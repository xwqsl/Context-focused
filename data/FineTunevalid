{"code_tokens":["\n","public","long","position","(",")","{","\n","return","position",";","\n"],"docstring_tokens":["Get","the","position","where","the","next","write","operation","will","begin","writing","from"]}
{"code_tokens":["\n","public","void","flushAndForceWrite","(","boolean","forceMetadata",")","throws","IOException","{","\n","flush","(",")",";","\n","forceWrite","(","forceMetadata",")",";","\n"],"docstring_tokens":["calls","both","flush","and","forceWrite","methods"]}
{"code_tokens":["\n","public","StorageServerChannel","intercept","(","long","scId",")","{","\n","return","intercept","(","new","StorageContainerClientInterceptor","(","scId",")",")",";","\n"],"docstring_tokens":["Create","an","intercepted","server","channel","that","add","additional","storage","container","metadata"]}
{"code_tokens":["\n","public","LedgerCache",".","PageEntriesIterable","listEntries","(","long","ledgerId",")","throws","IOException","{","\n","return","new","PageEntriesIterableImpl","(","ledgerId",")",";","\n"],"docstring_tokens":["Return","iterator","over","pages","for","mapping","entries","to","entry","loggers"]}
{"code_tokens":["\n","@Override\n","public","boolean","hasPassword","(",")","{","\n","return","hasPassword",";","\n"],"docstring_tokens":["In","versions","4.1.0","and","below,","the","digest","type","and","password","were","not","stored","in","the","metadata"]}
{"code_tokens":["\n","@Override\n","public","String","toSafeString","(",")","{","\n","return","toStringRepresentation","(","false",")",";","\n"],"docstring_tokens":["Returns","a","string","representation","of","this","LedgerMetadata","object","by","filtering","out","the","password","field"]}
{"code_tokens":["\n","public","void","updateBookieIdInLedgers","(","final","BookieId","oldBookieId,","final","BookieId","newBookieId,\n","final","int","rate,","int","maxOutstandingReads,","final","int","limit,\n","final","UpdateLedgerNotifier","progressable",")","\n","throws","IOException,","InterruptedException","{","\n\n","final","AtomicInteger","issuedLedgerCnt","=","new","AtomicInteger","(",")",";","\n","final","AtomicInteger","updatedLedgerCnt","=","new","AtomicInteger","(",")",";","\n","final","CompletableFuture<Void>","finalPromise","=","new","CompletableFuture<>","(",")",";","\n","final","Set<CompletableFuture<?>>","outstanding","=\n","Collections",".","newSetFromMap","(","new","ConcurrentHashMap<CompletableFuture<?>,","Boolean>","(",")",")",";","\n","final","RateLimiter","throttler","=","RateLimiter",".","create","(","rate",")",";","\n","final","Semaphore","outstandingReads","=","new","Semaphore","(","maxOutstandingReads",")",";","\n","final","Iterator<Long>","ledgerItr","=","admin",".","listLedgers","(",")",".","iterator","(",")",";","\n\n","//","iterate","through","all","the","ledgers\n","while","(","ledgerItr",".","hasNext","(",")","&&","!finalPromise",".","isDone","(",")","\n","&&","(","limit","==","Integer",".","MIN_VALUE","||","issuedLedgerCnt",".","get","(",")","<","limit",")",")","{","\n","//","semaphore","to","control","reads","according","to","update","throttling\n","outstandingReads",".","acquire","(",")",";","\n\n","final","long","ledgerId","=","ledgerItr",".","next","(",")",";","\n","issuedLedgerCnt",".","incrementAndGet","(",")",";","\n\n","CompletableFuture<Versioned<LedgerMetadata>>","writePromise","=","lm",".","readLedgerMetadata","(","ledgerId",")","\n",".","thenCompose","(","(","readMetadata",")","->","{","\n","AtomicReference<Versioned<LedgerMetadata>>","ref","=","new","AtomicReference<>","(","readMetadata",")",";","\n","return","new","MetadataUpdateLoop","(","\n","lm,","ledgerId,\n","ref::get,\n","(","metadata",")","->","{","\n","return","metadata",".","getAllEnsembles","(",")",".","values","(",")",".","stream","(",")","\n",".","flatMap","(","Collection::stream",")","\n",".","anyMatch","(","b","->","b",".","equals","(","oldBookieId",")",")",";","\n","}",",\n","(","metadata",")","->","{","\n","return","replaceBookieInEnsembles","(","metadata,","oldBookieId,","newBookieId",")",";","\n","}",",\n","ref::compareAndSet,","throttler",")",".","run","(",")",";","\n","}",")",";","\n\n","outstanding",".","add","(","writePromise",")",";","\n","writePromise",".","whenComplete","(","(","metadata,","ex",")","->","{","\n","if","(","ex","!=","null\n","&&","!","(","ex","instanceof","BKException",".","BKNoSuchLedgerExistsOnMetadataServerException",")",")","{","\n","String","error","=","String",".","format","(","\"Failed","to","update","ledger","metadata","%s,","replacing","%s","with","%s\",\n","ledgerId,","oldBookieId,","newBookieId",")",";","\n","LOG",".","error","(","error,","ex",")",";","\n","finalPromise",".","completeExceptionally","(","new","IOException","(","error,","ex",")",")",";","\n","}","else","{","\n","LOG",".","info","(","\"Updated","ledger","{","}","metadata,","replacing","{","}","with","{","}","\",\n","ledgerId,","oldBookieId,","newBookieId",")",";","\n\n","updatedLedgerCnt",".","incrementAndGet","(",")",";","\n","progressable",".","progress","(","updatedLedgerCnt",".","get","(",")",",","issuedLedgerCnt",".","get","(",")",")",";","\n","}","\n","outstandingReads",".","release","(",")",";","\n","outstanding",".","remove","(","writePromise",")",";","\n","}",")",";","\n","}","\n\n","CompletableFuture",".","allOf","(","outstanding",".","stream","(",")",".","toArray","(","CompletableFuture[]::new",")",")","\n",".","whenComplete","(","(","res,","ex",")","->","{","\n","if","(","ex","!=","null",")","{","\n","finalPromise",".","completeExceptionally","(","ex",")",";","\n","}","else","{","\n","finalPromise",".","complete","(","null",")",";","\n","}","\n","}",")",";","\n\n","try","{","\n","finalPromise",".","get","(",")",";","\n","LOG",".","info","(","\"Total","number","of","ledgers","issued=","{","}","updated=","{","}","\",\n","issuedLedgerCnt",".","get","(",")",",","updatedLedgerCnt",".","get","(",")",")",";","\n","}","catch","(","ExecutionException","e",")","{","\n","String","error","=","String",".","format","(","\"Error","waiting","for","ledger","metadata","updates","to","complete","(","replacing","%s","with","%s",")","\",\n","oldBookieId,","newBookieId",")",";","\n","LOG",".","info","(","error,","e",")",";","\n","if","(","e",".","getCause","(",")","instanceof","IOException",")","{","\n","throw","(","IOException",")","e",".","getCause","(",")",";","\n","}","else","{","\n","throw","new","IOException","(","error,","e",")",";","\n","}","\n","}","\n"],"docstring_tokens":["Update","the","bookie","id","present","in","the","ledger","metadata"]}
{"code_tokens":["\n","private","CompletableFuture<Versioned<Set<BookieId>>>","getChildren","(","String","regPath,","Watcher","watcher",")","{","\n","CompletableFuture<Versioned<Set<BookieId>>>","future","=","FutureUtils",".","createFuture","(",")",";","\n","zk",".","getChildren","(","regPath,","watcher,","(","rc,","path,","ctx,","children,","stat",")","->","{","\n","if","(","KeeperException",".","Code",".","OK",".","intValue","(",")","!=","rc",")","{","\n","ZKException","zke","=","new","ZKException","(","KeeperException",".","create","(","KeeperException",".","Code",".","get","(","rc",")",",","path",")",")",";","\n","future",".","completeExceptionally","(","zke",".","fillInStackTrace","(",")",")",";","\n","return",";","\n","}","\n\n","Version","version","=","new","LongVersion","(","stat",".","getCversion","(",")",")",";","\n","Set<BookieId>","bookies","=","convertToBookieAddresses","(","children",")",";","\n","List<CompletableFuture<Versioned<BookieServiceInfo>>>","bookieInfoUpdated","=","new","ArrayList<>","(","bookies",".","size","(",")",")",";","\n","for","(","BookieId","id",":","bookies",")","{","\n","//","update","the","cache","for","new","bookies\n","if","(","!bookieServiceInfoCache",".","containsKey","(","id",")",")","{","\n","bookieInfoUpdated",".","add","(","readBookieServiceInfoAsync","(","id",")",")",";","\n","}","\n","}","\n","if","(","bookieInfoUpdated",".","isEmpty","(",")",")","{","\n","future",".","complete","(","new","Versioned<>","(","bookies,","version",")",")",";","\n","}","else","{","\n","FutureUtils\n",".","collect","(","bookieInfoUpdated",")","\n",".","whenComplete","(","(","List<Versioned<BookieServiceInfo>>","info,","Throwable","error",")","->","{","\n","//","we","are","ignoring","errors","intentionally\n","//","there","could","be","bookies","that","publish","unparseable","information\n","//","or","other","temporary/permanent","errors\n","future",".","complete","(","new","Versioned<>","(","bookies,","version",")",")",";","\n","}",")",";","\n","}","\n","}",",","null",")",";","\n","return","future",";","\n"],"docstring_tokens":["Reads","the","list","of","bookies","at","the","given","path","and","eagerly","caches","the","BookieServiceInfo","structure"]}
{"code_tokens":["\n","public","static","SchedulerBuilder","newSchedulerBuilder","(",")","{","\n","return","new","SchedulerBuilder","(",")",";","\n"],"docstring_tokens":["Create","a","builder","to","build","ordered","scheduler"]}
{"code_tokens":["\n","public","ScheduledFuture<?>","scheduleOrdered","(","Object","orderingKey,","SafeRunnable","command,","long","delay,","TimeUnit","unit",")","{","\n","return","chooseThread","(","orderingKey",")",".","schedule","(","command,","delay,","unit",")",";","\n"],"docstring_tokens":["Creates","and","executes","a","one-shot","action","that","becomes","enabled","after","the","given","delay"]}
{"code_tokens":["\n","public","static","void","forceFlush","(","Bookie","b",")","throws","IOException","{","\n","CheckpointSourceList","source","=","new","CheckpointSourceList","(","b",".","journals",")",";","\n","Checkpoint","cp","=","source",".","newCheckpoint","(",")",";","\n","b",".","ledgerStorage",".","flush","(",")",";","\n","source",".","checkpointComplete","(","cp,","true",")",";","\n"],"docstring_tokens":["Force","a","bookie","to","flush","its","ledger","storage"]}
{"code_tokens":["\n","@SuppressWarnings","(","\"deprecation\"",")","\n","public","static","LedgerManagerFactory","newLedgerManagerFactory","(","\n","final","AbstractConfiguration<?>","conf,","LayoutManager","layoutManager",")","\n","throws","IOException,","InterruptedException","{","\n","String","metadataServiceUriStr",";","\n","try","{","\n","metadataServiceUriStr","=","conf",".","getMetadataServiceUri","(",")",";","\n","}","catch","(","ConfigurationException","e",")","{","\n","log",".","error","(","\"Failed","to","retrieve","metadata","service","uri","from","configuration\",","e",")",";","\n","throw","new","IOException","(","\n","\"Failed","to","retrieve","metadata","service","uri","from","configuration\",","e",")",";","\n","}","\n\n","Class<?","extends","LedgerManagerFactory>","factoryClass",";","\n","String","ledgerRootPath",";","\n","//","`metadataServiceUri`","can","be","null","when","constructing","bookkeeper","client","using","an","external","zookeeper","client",".","\n","if","(","null","==","metadataServiceUriStr",")","{","//\n","try","{","\n","factoryClass","=","conf",".","getLedgerManagerFactoryClass","(",")",";","\n","}","catch","(","ConfigurationException","e",")","{","\n","log",".","error","(","\"Failed","to","get","ledger","manager","factory","class","when","using","an","external","zookeeper","client\",","e",")",";","\n","throw","new","IOException","(","\n","\"Failed","to","get","ledger","manager","factory","class","when","using","an","external","zookeeper","client\",","e",")",";","\n","}","\n","ledgerRootPath","=","conf",".","getZkLedgersRootPath","(",")",";","\n","}","else","{","\n","URI","metadataServiceUri","=","URI",".","create","(","metadataServiceUriStr",")",";","\n","factoryClass","=","ZKMetadataDriverBase",".","resolveLedgerManagerFactory","(","metadataServiceUri",")",";","\n","ledgerRootPath","=","metadataServiceUri",".","getPath","(",")",";","\n","}","\n\n","if","(","null","==","ledgerRootPath","||","ledgerRootPath",".","length","(",")","==","0",")","{","\n","throw","new","IOException","(","\"Empty","Ledger","Root","Path",".","\"",")",";","\n","}","\n\n","//","if","layoutManager","is","null,","return","the","default","ledger","manager\n","if","(","layoutManager","==","null",")","{","\n","return","new","FlatLedgerManagerFactory","(",")","\n",".","initialize","(","conf,","null,","FlatLedgerManagerFactory",".","CUR_VERSION",")",";","\n","}","\n\n","LedgerManagerFactory","lmFactory",";","\n\n","//","check","that","the","configured","ledger","manager","is\n","//","compatible","with","the","existing","layout\n","LedgerLayout","layout","=","layoutManager",".","readLedgerLayout","(",")",";","\n\n","if","(","layout","==","null",")","{","//","no","existing","layout\n","lmFactory","=","createNewLMFactory","(","conf,","layoutManager,","factoryClass",")",";","\n","return","lmFactory\n",".","initialize","(","conf,","layoutManager,","lmFactory",".","getCurrentVersion","(",")",")",";","\n","}","\n","if","(","log",".","isDebugEnabled","(",")",")","{","\n","log",".","debug","(","\"read","ledger","layout","{","}","\",","layout",")",";","\n","}","\n\n","//","there","is","existing","layout,","we","need","to","look","into","the","layout",".","\n","//","handle","pre","V2","layout\n","if","(","layout",".","getLayoutFormatVersion","(",")","<=","V1",")","{","\n","//","pre","V2","layout","we","use","type","of","ledger","manager\n","String","lmType","=","conf",".","getLedgerManagerType","(",")",";","\n","if","(","lmType","!=","null","&&","!layout",".","getManagerFactoryClass","(",")",".","equals","(","lmType",")",")","{","\n","throw","new","IOException","(","\"Configured","layout","\"","+","lmType\n","+","\"","does","not","match","existing","layout","\"","+","layout",".","getManagerFactoryClass","(",")",")",";","\n","}","\n\n","//","create","the","ledger","manager\n","if","(","FlatLedgerManagerFactory",".","NAME",".","equals","(","layout",".","getManagerFactoryClass","(",")",")",")","{","\n","lmFactory","=","new","FlatLedgerManagerFactory","(",")",";","\n","}","else","if","(","HierarchicalLedgerManagerFactory",".","NAME",".","equals","(","layout",".","getManagerFactoryClass","(",")",")",")","{","\n","lmFactory","=","new","HierarchicalLedgerManagerFactory","(",")",";","\n","}","else","{","\n","throw","new","IOException","(","\"Unknown","ledger","manager","type:","\"","+","lmType",")",";","\n","}","\n","return","lmFactory",".","initialize","(","conf,","layoutManager,","layout",".","getManagerVersion","(",")",")",";","\n","}","\n\n","//","handle","V2","layout","case\n","if","(","factoryClass","!=","null\n","&&","!isSameLedgerManagerFactory","(","\n","conf,","layout",".","getManagerFactoryClass","(",")",",","factoryClass",".","getName","(",")",")","\n","&&","conf",".","getProperty","(","AbstractConfiguration",".","LEDGER_MANAGER_FACTORY_DISABLE_CLASS_CHECK",")","==","null",")","{","\n","//","Disable","should","ONLY","happen","during","compatibility","testing",".","\n\n","throw","new","IOException","(","\"Configured","layout","\"","+","factoryClass",".","getName","(",")","\n","+","\"","does","not","match","existing","layout","\"","+","layout",".","getManagerFactoryClass","(",")",")",";","\n","}","\n","if","(","factoryClass","==","null",")","{","\n","//","no","factory","specified","in","configuration\n","try","{","\n","Class<?>","theCls","=","Class",".","forName","(","layout",".","getManagerFactoryClass","(",")",")",";","\n","if","(","!LedgerManagerFactory",".","class",".","isAssignableFrom","(","theCls",")",")","{","\n","throw","new","IOException","(","\"Wrong","ledger","manager","factory","\"","+","layout",".","getManagerFactoryClass","(",")",")",";","\n","}","\n","factoryClass","=","theCls",".","asSubclass","(","LedgerManagerFactory",".","class",")",";","\n","}","catch","(","ClassNotFoundException","|","IOException","e",")","{","\n","factoryClass","=","attemptToResolveShadedLedgerManagerFactory","(","\n","conf,\n","layout",".","getManagerFactoryClass","(",")",",\n","e",")",";","\n","}","\n","}","\n","//","instantiate","a","factory\n","lmFactory","=","ReflectionUtils",".","newInstance","(","factoryClass",")",";","\n","return","lmFactory",".","initialize","(","conf,","layoutManager,","layout",".","getManagerVersion","(",")",")",";","\n"],"docstring_tokens":["Create","new","Ledger","Manager","Factory"]}
{"code_tokens":["\n","@SuppressWarnings","(","\"deprecation\"",")","\n","protected","static","LedgerManagerFactory","createNewLMFactory","(","\n","final","AbstractConfiguration","conf,","final","LayoutManager","layoutManager,\n","Class<?","extends","LedgerManagerFactory>","factoryClass",")","\n","throws","IOException,","InterruptedException","{","\n\n","LedgerManagerFactory","lmFactory",";","\n","LedgerLayout","layout",";","\n","//","use","default","ledger","manager","factory","if","no","one","provided\n","if","(","factoryClass","==","null",")","{","\n","//","for","backward","compatibility,","check","manager","type\n","String","lmType","=","conf",".","getLedgerManagerType","(",")",";","\n","if","(","lmType","==","null",")","{","\n","factoryClass","=","HierarchicalLedgerManagerFactory",".","class",";","\n","}","else","{","\n","if","(","FlatLedgerManagerFactory",".","NAME",".","equals","(","lmType",")",")","{","\n","factoryClass","=","FlatLedgerManagerFactory",".","class",";","\n","}","else","if","(","HierarchicalLedgerManagerFactory",".","NAME",".","equals","(","lmType",")",")","{","\n","factoryClass","=","HierarchicalLedgerManagerFactory",".","class",";","\n","}","else","if","(","LongHierarchicalLedgerManagerFactory",".","NAME",".","equals","(","lmType",")",")","{","\n","factoryClass","=","LongHierarchicalLedgerManagerFactory",".","class",";","\n","}","else","{","\n","throw","new","IOException","(","\"Unknown","ledger","manager","type:","\"\n","+","lmType",")",";","\n","}","\n","}","\n","}","\n\n","lmFactory","=","ReflectionUtils",".","newInstance","(","factoryClass",")",";","\n\n","layout","=","new","LedgerLayout","(","factoryClass",".","getName","(",")",",\n","lmFactory",".","getCurrentVersion","(",")",")",";","\n","try","{","\n","layoutManager",".","storeLedgerLayout","(","layout",")",";","\n","}","catch","(","LedgerLayoutExistsException","e",")","{","\n","LedgerLayout","layout2","=","layoutManager",".","readLedgerLayout","(",")",";","\n","if","(","!layout2",".","equals","(","layout",")",")","{","\n","throw","new","IOException","(","\n","\"Contention","writing","to","layout","to","zookeeper,","\"\n","+","\"","other","layout","\"","+","layout2\n","+","\"","is","incompatible","with","our","\"","+","\"layout","\"\n","+","layout",")",";","\n","}","\n","}","\n","return","lmFactory",";","\n"],"docstring_tokens":["Creates","the","new","layout","and","stores","in","zookeeper","and","returns","the","LedgerManagerFactory","instance"]}
{"code_tokens":["\n","public","static","BookKeeperClientBuilder","newBuilder","(",")","{","\n","return","new","BookKeeperClientBuilder","(",")",";","\n"],"docstring_tokens":["Create","a","bookkeeper","client","builder","to","build","bookkeeper","clients"]}
{"code_tokens":["\n","public","synchronized","BookKeeperClientBuilder","dlConfig","(","DistributedLogConfiguration","dlConfig",")","{","\n","this",".","dlConfig","=","dlConfig",";","\n","return","this",";","\n"],"docstring_tokens":["dlConfig","used","to","configure","bookkeeper","client"]}
{"code_tokens":["\n","public","synchronized","BookKeeperClientBuilder","ledgersPath","(","String","ledgersPath",")","{","\n","this",".","ledgersPath","=","ledgersPath",";","\n","return","this",";","\n"],"docstring_tokens":["Set","the","ledgers","path","that","bookkeeper","client","is","going","to","access"]}
{"code_tokens":["\n","public","synchronized","BookKeeperClientBuilder","bkc","(","BookKeeperClient","bkc",")","{","\n","this",".","cachedClient","=","bkc",";","\n","return","this",";","\n"],"docstring_tokens":["Build","BookKeeper","client","using","existing","bkc","client"]}
{"code_tokens":["\n","public","synchronized","BookKeeperClientBuilder","eventLoopGroup","(","EventLoopGroup","eventLoopGroup",")","{","\n","this",".","eventLoopGroup","=","eventLoopGroup",";","\n","return","this",";","\n"],"docstring_tokens":["Build","BookKeeper","client","using","existing","channelFactory"]}
{"code_tokens":["\n","public","synchronized","BookKeeperClientBuilder","requestTimer","(","HashedWheelTimer","requestTimer",")","{","\n","this",".","requestTimer","=","requestTimer",";","\n","return","this",";","\n"],"docstring_tokens":["Build","BookKeeper","client","using","existing","request","timer"]}
{"code_tokens":["\n","public","synchronized","BookKeeperClientBuilder","statsLogger","(","StatsLogger","statsLogger",")","{","\n","this",".","statsLogger","=","statsLogger",";","\n","return","this",";","\n"],"docstring_tokens":["Build","BookKeeper","Client","using","given","stats","logger","statsLogger"]}
{"code_tokens":["\n","public","static","ZooKeeperClientBuilder","newBuilder","(",")","{","\n","return","new","ZooKeeperClientBuilder","(",")",";","\n"],"docstring_tokens":["Create","a","zookeeper","client","builder","to","build","zookeeper","clients"]}
{"code_tokens":["\n","public","synchronized","ZooKeeperClientBuilder","name","(","String","name",")","{","\n","this",".","name","=","name",";","\n","return","this",";","\n"],"docstring_tokens":["Set","zookeeper","client","name"]}
{"code_tokens":["\n","public","synchronized","ZooKeeperClientBuilder","zkc","(","ZooKeeperClient","zkc",")","{","\n","this",".","cachedClient","=","zkc",";","\n","return","this",";","\n"],"docstring_tokens":["Build","zookeeper","client","using","existing","zkc","client"]}
{"code_tokens":["\n","public","synchronized","ZooKeeperClientBuilder","retryPolicy","(","RetryPolicy","retryPolicy",")","{","\n","this",".","retryPolicy","=","retryPolicy",";","\n","return","this",";","\n"],"docstring_tokens":["Build","zookeeper","client","with","given","retry","policy","retryPolicy"]}
{"code_tokens":["\n","public","synchronized","ZooKeeperClientBuilder","statsLogger","(","StatsLogger","statsLogger",")","{","\n","this",".","statsLogger","=","statsLogger",";","\n","return","this",";","\n"],"docstring_tokens":["Build","zookeeper","client","with","given","stats","logger","statsLogger"]}
{"code_tokens":["\n","public","synchronized","ZooKeeperClientBuilder","zkAclId","(","String","zkAclId",")","{","\n","this",".","zkAclIdSet","=","true",";","\n","this",".","zkAclId","=","zkAclId",";","\n","return","this",";","\n"],"docstring_tokens":["Build","zookeeper","client","with","given","zk","acl","digest","id","zkAclId"]}
{"code_tokens":["\n","public","synchronized","ZooKeeperClient","build","(",")","{","\n","if","(","null","==","cachedClient",")","{","\n","cachedClient","=","buildClient","(",")",";","\n","}","\n","return","cachedClient",";","\n"],"docstring_tokens":["Build","a","zookeeper","client"]}
{"code_tokens":["\n","public","long","size","(",")","throws","IOException","{","\n","return","validateAndGetFileChannel","(",")",".","size","(",")",";","\n"],"docstring_tokens":["Get","the","current","size","of","the","underlying","FileChannel"]}
{"code_tokens":["\n","public","void","advance","(","Duration","duration",")","{","\n","now","=","now",".","plus","(","duration",")",";","\n"],"docstring_tokens":["Advance","the","clock","by","the","given","amount","of","time"]}
{"code_tokens":["\n","public","static","long","resumeChecksum","(","long","previousChecksum,","ByteBuf","payload",")","{","\n","int","crc","=","(","int",")","previousChecksum",";","\n","if","(","payload",".","hasMemoryAddress","(",")","&&","(","CRC32C_HASH","instanceof","Sse42Crc32C",")",")","{","\n","crc","=","CRC32C_HASH",".","resume","(","crc,","payload",".","memoryAddress","(",")","+","payload",".","readerIndex","(",")",",\n","payload",".","readableBytes","(",")",")",";","\n","}","else","if","(","payload",".","hasArray","(",")",")","{","\n","crc","=","CRC32C_HASH",".","resume","(","crc,","payload",".","array","(",")",",","payload",".","arrayOffset","(",")","+","payload",".","readerIndex","(",")",",\n","payload",".","readableBytes","(",")",")",";","\n","}","else","{","\n","crc","=","CRC32C_HASH",".","resume","(","crc,","payload",".","nioBuffer","(",")",")",";","\n","}","\n","return","crc","&","0xffffffffL",";","\n"],"docstring_tokens":["Computes","incremental","checksum","with","input","previousChecksum","and","input","payload"]}
{"code_tokens":["\n","private","void","verifyLedgerFragment","(","LedgerFragment","fragment,\n","int","bookieIndex,\n","GenericCallback<LedgerFragment>","cb,\n","long","percentageOfLedgerFragmentToBeVerified",")","\n","throws","InvalidFragmentException","{","\n","long","firstStored","=","fragment",".","getFirstStoredEntryId","(","bookieIndex",")",";","\n","long","lastStored","=","fragment",".","getLastStoredEntryId","(","bookieIndex",")",";","\n\n","BookieId","bookie","=","fragment",".","getAddress","(","bookieIndex",")",";","\n","if","(","null","==","bookie",")","{","\n","throw","new","InvalidFragmentException","(",")",";","\n","}","\n\n","if","(","firstStored","==","LedgerHandle",".","INVALID_ENTRY_ID",")","{","\n","//","this","fragment","is","not","on","this","bookie\n","if","(","lastStored","!=","LedgerHandle",".","INVALID_ENTRY_ID",")","{","\n","throw","new","InvalidFragmentException","(",")",";","\n","}","\n","cb",".","operationComplete","(","BKException",".","Code",".","OK,","fragment",")",";","\n","}","else","if","(","bookieWatcher",".","isBookieUnavailable","(","fragment",".","getAddress","(","bookieIndex",")",")",")","{","\n","//","fragment","is","on","this","bookie,","but","already","know","it's","unavailable,","so","skip","the","call\n","cb",".","operationComplete","(","BKException",".","Code",".","BookieHandleNotAvailableException,","fragment",")",";","\n","}","else","if","(","firstStored","==","lastStored",")","{","\n","ReadManyEntriesCallback","manycb","=","new","ReadManyEntriesCallback","(","1,\n","fragment,","cb",")",";","\n","bookieClient",".","readEntry","(","bookie,","fragment",".","getLedgerId","(",")",",","firstStored,\n","manycb,","null,","BookieProtocol",".","FLAG_NONE",")",";","\n","}","else","{","\n","if","(","lastStored","<=","firstStored",")","{","\n","cb",".","operationComplete","(","Code",".","IncorrectParameterException,","null",")",";","\n","return",";","\n","}","\n\n","long","lengthOfLedgerFragment","=","lastStored","-","firstStored","+","1",";","\n\n","int","numberOfEntriesToBeVerified","=\n","(","int",")","(","lengthOfLedgerFragment","*","(","percentageOfLedgerFragmentToBeVerified","/","100",".","0",")",")",";","\n\n","TreeSet<Long>","entriesToBeVerified","=","new","TreeSet<Long>","(",")",";","\n\n","if","(","numberOfEntriesToBeVerified","<","lengthOfLedgerFragment",")","{","\n","//","Evenly","pick","random","entries","over","the","length","of","the","fragment\n","if","(","numberOfEntriesToBeVerified",">","0",")","{","\n","int","lengthOfBucket","=","(","int",")","(","lengthOfLedgerFragment","/","numberOfEntriesToBeVerified",")",";","\n","for","(","long","index","=","firstStored",";","\n","index","<","(","lastStored","-","lengthOfBucket","-","1",")",";","\n","index","+=","lengthOfBucket",")","{","\n","long","potentialEntryId","=","ThreadLocalRandom",".","current","(",")",".","nextInt","(","(","lengthOfBucket",")",")","+","index",";","\n","if","(","fragment",".","isStoredEntryId","(","potentialEntryId,","bookieIndex",")",")","{","\n","entriesToBeVerified",".","add","(","potentialEntryId",")",";","\n","}","\n","}","\n","}","\n","entriesToBeVerified",".","add","(","firstStored",")",";","\n","entriesToBeVerified",".","add","(","lastStored",")",";","\n","}","else","{","\n","//","Verify","the","entire","fragment\n","while","(","firstStored","<=","lastStored",")","{","\n","if","(","fragment",".","isStoredEntryId","(","firstStored,","bookieIndex",")",")","{","\n","entriesToBeVerified",".","add","(","firstStored",")",";","\n","}","\n","firstStored++",";","\n","}","\n","}","\n","ReadManyEntriesCallback","manycb","=","new","ReadManyEntriesCallback","(","entriesToBeVerified",".","size","(",")",",\n","fragment,","cb",")",";","\n","for","(","Long","entryID:","entriesToBeVerified",")","{","\n","bookieClient",".","readEntry","(","bookie,","fragment",".","getLedgerId","(",")",",","entryID,","manycb,","null,","BookieProtocol",".","FLAG_NONE",")",";","\n","}","\n","}","\n"],"docstring_tokens":["Verify","a","bookie","inside","a","ledger","fragment"]}
{"code_tokens":["\n","public","void","checkLedger","(","final","LedgerHandle","lh,\n","final","GenericCallback<Set<LedgerFragment>>","cb",")","{","\n","checkLedger","(","lh,","cb,","0L",")",";","\n"],"docstring_tokens":["Check","that","all","the","fragments","in","the","passed","in","ledger,","and","report","those","which","are","missing"]}
{"code_tokens":["\n","public","NamespaceBuilder","conf","(","DistributedLogConfiguration","conf",")","{","\n","this",".","_conf","=","conf",";","\n","return","this",";","\n"],"docstring_tokens":["DistributedLog","Configuration","used","for","the","namespace"]}
{"code_tokens":["\n","public","NamespaceBuilder","dynConf","(","DynamicDistributedLogConfiguration","dynConf",")","{","\n","this",".","_dynConf","=","dynConf",";","\n","return","this",";","\n"],"docstring_tokens":["Dynamic","DistributedLog","Configuration","used","for","the","namespace"]}
{"code_tokens":["\n","public","NamespaceBuilder","featureProvider","(","FeatureProvider","featureProvider",")","{","\n","this",".","_featureProvider","=","featureProvider",";","\n","return","this",";","\n"],"docstring_tokens":["Feature","provider","used","to","control","the","availabilities","of","features","in","the","namespace"]}
{"code_tokens":["\n","public","NamespaceBuilder","clientId","(","String","clientId",")","{","\n","this",".","_clientId","=","clientId",";","\n","return","this",";","\n"],"docstring_tokens":["Client","Id","used","for","accessing","the","namespace"]}
{"code_tokens":["\n","public","NamespaceBuilder","regionId","(","int","regionId",")","{","\n","this",".","_regionId","=","regionId",";","\n","return","this",";","\n"],"docstring_tokens":["Region","Id","used","for","encoding","logs","in","the","namespace"]}
{"code_tokens":["\n","public","static","StringUtf8Coder","of","(",")","{","\n","return","INSTANCE",";","\n"],"docstring_tokens":["Get","the","coder","to","encode","strings","in","utf-8"]}
{"code_tokens":["\n","public","byte[]","serialize","(",")","{","\n","StringBuilder","sb","=","new","StringBuilder","(",")",";","\n","sb",".","append","(","metadataFormatVersion",")",".","append","(","LINE_SPLITTER",")",";","\n","sb",".","append","(","dlType",")",".","append","(","LINE_SPLITTER",")",";","\n","sb",".","append","(","dlConfig",".","serialize","(",")",")",";","\n","LOG",".","debug","(","\"Serialized","dl","metadata","{","}",".","\",","sb",")",";","\n","return","sb",".","toString","(",")",".","getBytes","(","UTF_8",")",";","\n"],"docstring_tokens":["Serialize","the","DL","metadata","into","bytes","array"]}
{"code_tokens":["\n","public","static","DLMetadata","deserialize","(","URI","uri,","byte[]","data",")","throws","IOException","{","\n","String","metadata","=","new","String","(","data,","UTF_8",")",";","\n","LOG",".","debug","(","\"Parsing","dl","metadata","{","}",".","\",","metadata",")",";","\n","BufferedReader","br","=","new","BufferedReader","(","new","StringReader","(","metadata",")",")",";","\n","String","versionLine","=","br",".","readLine","(",")",";","\n","if","(","null","==","versionLine",")","{","\n","throw","new","IOException","(","\"Empty","DL","Metadata",".","\"",")",";","\n","}","\n","int","version",";","\n","try","{","\n","version","=","Integer",".","parseInt","(","versionLine",")",";","\n","}","catch","(","NumberFormatException","nfe",")","{","\n","version","=","-1",";","\n","}","\n","if","(","METADATA_FORMAT_VERSION","!=","version",")","{","\n","throw","new","IOException","(","\"Metadata","version","not","compatible",".","Expected","\"\n","+","METADATA_FORMAT_VERSION","+","\"","but","got","\"","+","version",")",";","\n","}","\n","String","type","=","br",".","readLine","(",")",";","\n","if","(","!BK_DL_TYPE",".","equals","(","type",")",")","{","\n","throw","new","IOException","(","\"Invalid","DL","type",":","\"","+","type",")",";","\n","}","\n","DLConfig","dlConfig","=","new","BKDLConfig","(","uri",")",";","\n","StringBuilder","sb","=","new","StringBuilder","(",")",";","\n","String","line",";","\n","while","(","null","!=","(","line","=","br",".","readLine","(",")",")",")","{","\n","sb",".","append","(","line",")",";","\n","}","\n","dlConfig",".","deserialize","(","sb",".","toString","(",")",".","getBytes","(","UTF_8",")",")",";","\n","return","new","DLMetadata","(","type,","dlConfig,","version",")",";","\n"],"docstring_tokens":["Deserialize","dl","metadata","of","given","uri","from","a","given","bytes","array"]}
{"code_tokens":["\n","public","void","registerListener","(","NamespaceListener","listener",")","{","\n","if","(","listeners",".","add","(","listener",")",")","{","\n","watchNamespaceChanges","(",")",";","\n","}","\n"],"docstring_tokens":["Register","listener","for","namespace","changes"]}
{"code_tokens":["\n","public","void","unregisterListener","(","NamespaceListener","listener",")","{","\n","listeners",".","remove","(","listener",")",";","\n"],"docstring_tokens":["Unregister","listener","from","the","namespace","watcher"]}
{"code_tokens":["\n","public","static","CompressionCodec",".","Type","stringToType","(","String","compressionString",")","{","\n","if","(","compressionString",".","equals","(","LZ4",")",")","{","\n","return","CompressionCodec",".","Type",".","LZ4",";","\n","}","else","if","(","compressionString",".","equals","(","NONE",")",")","{","\n","return","CompressionCodec",".","Type",".","NONE",";","\n","}","else","{","\n","return","CompressionCodec",".","Type",".","UNKNOWN",";","\n","}","\n"],"docstring_tokens":["Compression","type","value","from","string"]}
{"code_tokens":["\n","public","static","<T","extends","CliFlags>","Builder<T>","newBuilder","(",")","{","\n","return","new","Builder<>","(",")",";","\n"],"docstring_tokens":["Create","a","new","builder","to","build","the","cli","spec"]}
{"code_tokens":["\n","public","static","MonitoringServerInterceptor","create","(","StatsLogger","statsLogger,\n","boolean","includeLatencyHistograms",")","{","\n","return","new","MonitoringServerInterceptor","(","\n","new","Factory","(","includeLatencyHistograms",")",",","statsLogger",")",";","\n"],"docstring_tokens":["Create","a","monitoring","client","interceptor","with","provided","stats","logger","and","configuration"]}
{"code_tokens":["\n","@SuppressWarnings","(","\"unchecked\"",")","\n","public","void","loadConf","(","URL","confURL",")","throws","ConfigurationException","{","\n","PropertiesConfiguration","loadedConf","=","new","PropertiesConfiguration","(","confURL",")",";","\n","for","(","Iterator<String>","iter","=","loadedConf",".","getKeys","(",")",";","iter",".","hasNext","(",")",";",")","{","\n","String","key","=","iter",".","next","(",")",";","\n","setProperty","(","key,","loadedConf",".","getProperty","(","key",")",")",";","\n","}","\n"],"docstring_tokens":["You","can","load","configurations","in","precedence","order"]}
{"code_tokens":["\n","@SuppressWarnings","(","\"unchecked\"",")","\n","public","void","loadConf","(","CompositeConfiguration","baseConf",")","{","\n","for","(","Iterator<String>","iter","=","baseConf",".","getKeys","(",")",";","iter",".","hasNext","(",")",";",")","{","\n","String","key","=","iter",".","next","(",")",";","\n","setProperty","(","key,","baseConf",".","getProperty","(","key",")",")",";","\n","}","\n"],"docstring_tokens":["You","can","load","configuration","from","other","configuration"]}
{"code_tokens":["\n","@Override\n","public","void","suspend","(",")","{","\n","synchronized","(","suspensionLock",")","{","\n","suspended","=","true",";","\n","suspensionLock",".","notifyAll","(",")",";","\n","}","\n"],"docstring_tokens":["Suspend","the","controller","if","the","leader","disconnects","from","zookeeper"]}
{"code_tokens":["\n","public","static","void","put","(","ByteBuffer","dst",")","{","\n","put","(","dst,","dst",".","remaining","(",")",")",";","\n"],"docstring_tokens":["Fill","zeros","into","given","buffer"]}
{"code_tokens":["\n","public","static","void","put","(","ByteBuffer","dst,","int","length",")","{","\n","while","(","length",">","zeroBytes",".","length",")","{","\n","dst",".","put","(","zeroBytes",")",";","\n","length","-=","zeroBytes",".","length",";","\n","}","\n","if","(","length",">","0",")","{","\n","dst",".","put","(","zeroBytes,","0,","length",")",";","\n","}","\n"],"docstring_tokens":["Fill","zeros","into","given","buffer","up","to","given","length"]}
{"code_tokens":["\n","public","static","ByteBuffer","readOnlyBuffer","(","int","length",")","{","\n","ByteBuffer","buffer",";","\n","if","(","length","<=","zeroBytes",".","length",")","{","\n","buffer","=","ByteBuffer",".","wrap","(","zeroBytes,","0,","length",")",";","\n","}","else","{","\n","buffer","=","ByteBuffer",".","allocate","(","length",")",";","\n","put","(","buffer",")",";","\n","buffer",".","rewind","(",")",";","\n","}","\n","return","buffer",".","asReadOnlyBuffer","(",")",";","\n"],"docstring_tokens":["Returns","read-only","zero-filled","buffer"]}
{"code_tokens":["\n","public","byte[]","serializeBytes","(",")","{","\n","return","serializeBytes","(","CUR_VERSION",")",";","\n"],"docstring_tokens":["Serialize","the","DLSN","into","bytes","with","current","version"]}
{"code_tokens":["\n","public","byte[]","serializeBytes","(","byte","version",")","{","\n","checkArgument","(","version","<=","CUR_VERSION","&&","version",">=","VERSION0",")",";","\n","byte[]","data","=","new","byte[CUR_VERSION","==","version","?","VERSION1_LEN",":","VERSION0_LEN]",";","\n","ByteBuffer","bb","=","ByteBuffer",".","wrap","(","data",")",";","\n","bb",".","put","(","version",")",";","\n","bb",".","putLong","(","logSegmentSequenceNo",")",";","\n","bb",".","putLong","(","entryId",")",";","\n","bb",".","putLong","(","slotId",")",";","\n","return","data",";","\n"],"docstring_tokens":["Serialize","the","DLSN","into","bytes","with","given","version"]}
{"code_tokens":["\n","public","String","serialize","(",")","{","\n","return","serialize","(","CUR_VERSION",")",";","\n"],"docstring_tokens":["Serialize","the","DLSN","into","base64","encoded","string"]}
{"code_tokens":["\n","public","String","serialize","(","byte","version",")","{","\n","return","Base64",".","encodeBase64String","(","serializeBytes","(","version",")",")",";","\n"],"docstring_tokens":["Serialize","the","DLSN","into","base64","encoded","string","with","given","version"]}
{"code_tokens":["\n","public","static","DLSN","deserialize","(","String","dlsn",")","{","\n","byte[]","data","=","Base64",".","decodeBase64","(","dlsn",")",";","\n","return","deserializeBytes","(","data",")",";","\n"],"docstring_tokens":["Deserialize","the","DLSN","from","base64","encoded","string","dlsn"]}
{"code_tokens":["\n","public","static","DLSN","deserializeBytes","(","byte[]","data",")","{","\n","ByteBuffer","bb","=","ByteBuffer",".","wrap","(","data",")",";","\n","byte","version","=","bb",".","get","(",")",";","\n","if","(","VERSION0","==","version",")","{","\n","if","(","VERSION0_LEN","!=","data",".","length",")","{","\n","throw","new","IllegalArgumentException","(","\"Invalid","version","zero","DLSN","\"","+","Hex",".","encodeHexString","(","data",")",")",";","\n","}","\n","}","else","if","(","VERSION1","==","version",")","{","\n","if","(","VERSION1_LEN","!=","data",".","length",")","{","\n","throw","new","IllegalArgumentException","(","\"Invalid","version","one","DLSN","\"","+","Hex",".","encodeHexString","(","data",")",")",";","\n","}","\n","}","else","{","\n","throw","new","IllegalArgumentException","(","\"Invalid","DLSN",":","version","=","\"\n","+","version","+","\",","\"","+","Hex",".","encodeHexString","(","data",")",")",";","\n","}","\n","return","new","DLSN","(","bb",".","getLong","(",")",",","bb",".","getLong","(",")",",","bb",".","getLong","(",")",")",";","\n"],"docstring_tokens":["Deserialize","the","DLSN","from","bytes","array"]}
{"code_tokens":["\n","public","void","add","(","String","name,","LogSegmentMetadata","metadata",")","{","\n","synchronized","(","logSegments",")","{","\n","if","(","!logSegments",".","containsKey","(","name",")",")","{","\n","logSegments",".","put","(","name,","metadata",")",";","\n","LOG",".","info","(","\"","{","}","added","log","segment","(","{","}",":","{","}",")","to","cache",".","\",\n","streamName,","name,","metadata",")",";","\n","}","\n","LogSegmentMetadata","oldMetadata","=","lid2LogSegments",".","remove","(","metadata",".","getLogSegmentId","(",")",")",";","\n","if","(","null","==","oldMetadata",")","{","\n","lid2LogSegments",".","put","(","metadata",".","getLogSegmentId","(",")",",","metadata",")",";","\n","}","else","{","\n","if","(","oldMetadata",".","isInProgress","(",")","&&","!metadata",".","isInProgress","(",")",")","{","\n","lid2LogSegments",".","put","(","metadata",".","getLogSegmentId","(",")",",","metadata",")",";","\n","}","else","{","\n","lid2LogSegments",".","put","(","oldMetadata",".","getLogSegmentId","(",")",",","oldMetadata",")",";","\n","}","\n","}","\n","}","\n"],"docstring_tokens":["Add","the","segment","metadata","for","name","in","the","cache"]}
{"code_tokens":["\n","public","LogSegmentMetadata","get","(","String","name",")","{","\n","synchronized","(","logSegments",")","{","\n","return","logSegments",".","get","(","name",")",";","\n","}","\n"],"docstring_tokens":["Retrieve","log","segment","name","from","the","cache"]}
{"code_tokens":["\n","public","Pair<Set<String>,","Set<String>>","diff","(","Set<String>","segmentsReceived",")","{","\n","Set<String>","segmentsAdded",";","\n","Set<String>","segmentsRemoved",";","\n","synchronized","(","logSegments",")","{","\n","Set<String>","segmentsCached","=","logSegments",".","keySet","(",")",";","\n","segmentsAdded","=","Sets",".","difference","(","segmentsReceived,","segmentsCached",")",".","immutableCopy","(",")",";","\n","segmentsRemoved","=","Sets",".","difference","(","segmentsCached,","segmentsReceived",")",".","immutableCopy","(",")",";","\n","}","\n","return","Pair",".","of","(","segmentsAdded,","segmentsRemoved",")",";","\n"],"docstring_tokens":["Diff","with","new","received","segment","list","segmentReceived"]}
{"code_tokens":["\n","public","LogSegmentMetadata","remove","(","String","name",")","{","\n","synchronized","(","logSegments",")","{","\n","LogSegmentMetadata","metadata","=","logSegments",".","remove","(","name",")",";","\n","if","(","null","!=","metadata",")","{","\n","lid2LogSegments",".","remove","(","metadata",".","getLogSegmentId","(",")",",","metadata",")",";","\n","LOG",".","debug","(","\"Removed","log","segment","(","{","}",":","{","}",")","from","cache",".","\",","name,","metadata",")",";","\n","}","\n","return","metadata",";","\n","}","\n"],"docstring_tokens":["Remove","log","segment","name","from","the","cache"]}
{"code_tokens":["\n","@Override\n","public","long","addEntry","(","final","long","entryId,","byte[]","data",")","throws","InterruptedException,","BKException","{","\n\n","return","addEntry","(","entryId,","data,","0,","data",".","length",")",";","\n\n"],"docstring_tokens":["Add","entry","synchronously","to","an","open","ledger"]}
{"code_tokens":["\n","@Override\n","public","void","asyncAddEntry","(","long","entryId,","byte[]","data,","AddCallback","cb,","Object","ctx",")","{","\n","asyncAddEntry","(","entryId,","data,","0,","data",".","length,","cb,","ctx",")",";","\n"],"docstring_tokens":["Add","entry","asynchronously","to","an","open","ledger"]}
{"code_tokens":["\n","@Override\n","public","void","asyncAddEntry","(","final","long","entryId,","final","byte[]","data,","final","int","offset,","final","int","length,\n","final","AddCallback","cb,","final","Object","ctx",")","{","\n","asyncAddEntry","(","entryId,","Unpooled",".","wrappedBuffer","(","data,","offset,","length",")",",","cb,","ctx",")",";","\n"],"docstring_tokens":["Add","entry","asynchronously","to","an","open","ledger,","using","an","offset","and","range"]}
{"code_tokens":["\n","@Override\n","public","void","asyncAddEntry","(","ByteBuf","data,","AddCallback","cb,","Object","ctx",")","{","\n","cb",".","addCompleteWithLatency","(","BKException",".","Code",".","IllegalOpException,","this,","LedgerHandle",".","INVALID_ENTRY_ID,","0,","ctx",")",";","\n"],"docstring_tokens":["LedgerHandleAdv","will","not","allow","addEntry","without","providing","an","entryId"]}
{"code_tokens":["\n","private","void","startAudit","(","boolean","shutDownTask",")","{","\n","try","{","\n","auditBookies","(",")",";","\n","shutDownTask","=","false",";","\n","}","catch","(","BKException","bke",")","{","\n","LOG",".","error","(","\"Exception","getting","bookie","list\",","bke",")",";","\n","}","catch","(","InterruptedException","ie",")","{","\n","Thread",".","currentThread","(",")",".","interrupt","(",")",";","\n","LOG",".","error","(","\"Interrupted","while","watching","available","bookies","\",","ie",")",";","\n","}","catch","(","BKAuditException","bke",")","{","\n","LOG",".","error","(","\"Exception","while","watching","available","bookies\",","bke",")",";","\n","}","\n","if","(","shutDownTask",")","{","\n","submitShutdownTask","(",")",";","\n","}","\n"],"docstring_tokens":["Start","running","the","actual","audit","task"]}
{"code_tokens":["\n","public","boolean","isRunning","(",")","{","\n","return","!executor",".","isShutdown","(",")",";","\n"],"docstring_tokens":["Return","true","if","auditor","is","running","otherwise","return","false"]}
{"code_tokens":["\n","public","<T>","CompletableFuture<T>","execute","(","Supplier<CompletableFuture<T>>","action",")","{","\n","return","Retries",".","run","(","\n","backoffPolicy",".","toBackoffs","(",")",",\n","retryPredicate,\n","action,\n","scheduler\n",")",";","\n"],"docstring_tokens":["Run","the","action","with","retries"]}
{"code_tokens":["\n","protected","void","handleException","(","Thread","t,","Throwable","e",")","{","\n","LOG",".","error","(","\"Uncaught","exception","in","thread","{","}","\",","t",".","getName","(",")",",","e",")",";","\n"],"docstring_tokens":["Handles","uncaught","exception","occurred","in","thread"]}
{"code_tokens":["\n","@Override\n","public","void","checkpointComplete","(","Checkpoint","checkpoint,","boolean","compact",")","throws","IOException","{","\n","if","(","!","(","checkpoint","instanceof","LogMarkCheckpoint",")",")","{","\n","return",";","//","we","didn't","create","this","checkpoint,","so","dont","do","anything","with","it\n","}","\n","LogMarkCheckpoint","lmcheckpoint","=","(","LogMarkCheckpoint",")","checkpoint",";","\n","LastLogMark","mark","=","lmcheckpoint",".","mark",";","\n\n","mark",".","rollLog","(","mark",")",";","\n","if","(","compact",")","{","\n","//","list","the","journals","that","have","been","marked\n","List<Long>","logs","=","listJournalIds","(","journalDirectory,","new","JournalRollingFilter","(","mark",")",")",";","\n","//","keep","MAX_BACKUP_JOURNALS","journal","files","before","marked","journal\n","if","(","logs",".","size","(",")",">=","maxBackupJournals",")","{","\n","int","maxIdx","=","logs",".","size","(",")","-","maxBackupJournals",";","\n","for","(","int","i","=","0",";","i","<","maxIdx",";","i++",")","{","\n","long","id","=","logs",".","get","(","i",")",";","\n","//","make","sure","the","journal","id","is","smaller","than","marked","journal","id\n","if","(","id","<","mark",".","getCurMark","(",")",".","getLogFileId","(",")",")","{","\n","File","journalFile","=","new","File","(","journalDirectory,","Long",".","toHexString","(","id",")","+","\"",".","txn\"",")",";","\n","if","(","!journalFile",".","delete","(",")",")","{","\n","LOG",".","warn","(","\"Could","not","delete","old","journal","file","{","}","\",","journalFile",")",";","\n","}","\n","LOG",".","info","(","\"garbage","collected","journal","\"","+","journalFile",".","getName","(",")",")",";","\n","}","\n","}","\n","}","\n","}","\n"],"docstring_tokens":["Telling","journal","a","checkpoint","is","finished"]}
{"code_tokens":["\n","public","void","logAddEntry","(","ByteBuf","entry,","boolean","ackBeforeSync,","WriteCallback","cb,","Object","ctx",")","\n","throws","InterruptedException","{","\n","long","ledgerId","=","entry",".","getLong","(","entry",".","readerIndex","(",")","+","0",")",";","\n","long","entryId","=","entry",".","getLong","(","entry",".","readerIndex","(",")","+","8",")",";","\n","logAddEntry","(","ledgerId,","entryId,","entry,","ackBeforeSync,","cb,","ctx",")",";","\n"],"docstring_tokens":["record","an","add","entry","operation","in","journal"]}
{"code_tokens":["\n","public","synchronized","void","shutdown","(",")","{","\n","try","{","\n","if","(","!running",")","{","\n","return",";","\n","}","\n","LOG",".","info","(","\"Shutting","down","Journal\"",")",";","\n","forceWriteThread",".","shutdown","(",")",";","\n","cbThreadPool",".","shutdown","(",")",";","\n","if","(","!cbThreadPool",".","awaitTermination","(","5,","TimeUnit",".","SECONDS",")",")","{","\n","LOG",".","warn","(","\"Couldn't","shutdown","journal","callback","thread","gracefully",".","Forcing\"",")",";","\n","}","\n","cbThreadPool",".","shutdownNow","(",")",";","\n\n","running","=","false",";","\n","this",".","interrupt","(",")",";","\n","this",".","join","(",")",";","\n","LOG",".","info","(","\"Finished","Shutting","down","Journal","thread\"",")",";","\n","}","catch","(","InterruptedException","ie",")","{","\n","Thread",".","currentThread","(",")",".","interrupt","(",")",";","\n","LOG",".","warn","(","\"Interrupted","during","shutting","down","journal",":","\",","ie",")",";","\n","}","\n"],"docstring_tokens":["Shuts","down","the","journal"]}
{"code_tokens":["\n","public","void","await","(",")","throws","InterruptedException","{","\n","if","(","LOG",".","isDebugEnabled","(",")",")","{","\n","LOG",".","debug","(","\"Automatic","ledger","re-replication","is","disabled",".","Hence","waiting","until","its","enabled!\"",")",";","\n","}","\n","latch",".","await","(",")",";","\n"],"docstring_tokens":["This","is","a","blocking","call","and","causes","the","current","thread","to","wait","until","the","replication","process","is","enabled"]}
{"code_tokens":["\n","public","void","start","(",")","{","\n","this",".","workerThread",".","start","(",")",";","\n"],"docstring_tokens":["Start","the","replication","worker"]}
{"code_tokens":["\n","private","void","rereplicate","(",")","throws","InterruptedException,","BKException,\n","UnavailableException","{","\n","long","ledgerIdToReplicate","=","underreplicationManager\n",".","getLedgerToRereplicate","(",")",";","\n\n","Stopwatch","stopwatch","=","Stopwatch",".","createStarted","(",")",";","\n","boolean","success","=","false",";","\n","try","{","\n","success","=","rereplicate","(","ledgerIdToReplicate",")",";","\n","}","finally","{","\n","long","latencyMillis","=","stopwatch",".","stop","(",")",".","elapsed","(","TimeUnit",".","MILLISECONDS",")",";","\n","if","(","success",")","{","\n","rereplicateOpStats",".","registerSuccessfulEvent","(","latencyMillis,","TimeUnit",".","MILLISECONDS",")",";","\n","}","else","{","\n","rereplicateOpStats",".","registerFailedEvent","(","latencyMillis,","TimeUnit",".","MILLISECONDS",")",";","\n","}","\n","}","\n"],"docstring_tokens":["Replicates","the","under","replicated","fragments","from","failed","bookie","ledger","to","targetBookie"]}
{"code_tokens":["\n","private","void","deferLedgerLockReleaseOfFailedLedger","(","final","long","ledgerId",")","{","\n","int","numOfTimesFailedSoFar","=","replicationFailedLedgers",".","getUnchecked","(","ledgerId",")",".","getAndIncrement","(",")",";","\n","/*\n","*","for","the","first","NUM_OF_EXPONENTIAL_BACKOFF_RETRIALS","retrials","do\n","*","exponential","backoff,","starting","from\n","*","baseBackoffForLockReleaseOfFailedLedger\n","*/\n","long","delayOfLedgerLockReleaseInMSecs","=","(","numOfTimesFailedSoFar",">=","NUM_OF_EXPONENTIAL_BACKOFF_RETRIALS",")","\n","?","this",".","lockReleaseOfFailedLedgerGracePeriod\n",":","this",".","baseBackoffForLockReleaseOfFailedLedger","*","(","int",")","Math",".","pow","(","2,","numOfTimesFailedSoFar",")",";","\n","LOG",".","error","(","\n","\"ReplicationWorker","failed","to","replicate","Ledger",":","{","}","for","{","}","number","of","times,","\"\n","+","\"so","deferring","the","ledger","lock","release","by","{","}","msecs\",\n","ledgerId,","numOfTimesFailedSoFar,","delayOfLedgerLockReleaseInMSecs",")",";","\n","TimerTask","timerTask","=","new","TimerTask","(",")","{","\n","@Override\n","public","void","run","(",")","{","\n","try","{","\n","underreplicationManager",".","releaseUnderreplicatedLedger","(","ledgerId",")",";","\n","}","catch","(","UnavailableException","e",")","{","\n","LOG",".","error","(","\"UnavailableException","while","replicating","fragments","of","ledger","{","}","\",","ledgerId,","e",")",";","\n","shutdown","(",")",";","\n","}","\n","}","\n","}",";","\n","scheduleTaskWithDelay","(","timerTask,","delayOfLedgerLockReleaseInMSecs",")",";","\n"],"docstring_tokens":["Schedules","a","timer","task","for","releasing","the","lock"]}
{"code_tokens":["\n","public","void","shutdown","(",")","{","\n","LOG",".","info","(","\"Shutting","down","replication","worker\"",")",";","\n\n","synchronized","(","this",")","{","\n","if","(","!workerRunning",")","{","\n","return",";","\n","}","\n","workerRunning","=","false",";","\n","}","\n","LOG",".","info","(","\"Shutting","down","ReplicationWorker\"",")",";","\n","this",".","pendingReplicationTimer",".","cancel","(",")",";","\n","try","{","\n","this",".","workerThread",".","interrupt","(",")",";","\n","this",".","workerThread",".","join","(",")",";","\n","}","catch","(","InterruptedException","e",")","{","\n","LOG",".","error","(","\"Interrupted","during","shutting","down","replication","worker",":","\",\n","e",")",";","\n","Thread",".","currentThread","(",")",".","interrupt","(",")",";","\n","}","\n","if","(","ownBkc",")","{","\n","try","{","\n","bkc",".","close","(",")",";","\n","}","catch","(","InterruptedException","e",")","{","\n","LOG",".","warn","(","\"Interrupted","while","closing","the","Bookie","client\",","e",")",";","\n","Thread",".","currentThread","(",")",".","interrupt","(",")",";","\n","}","catch","(","BKException","e",")","{","\n","LOG",".","warn","(","\"Exception","while","closing","the","Bookie","client\",","e",")",";","\n","}","\n","}","\n","try","{","\n","underreplicationManager",".","close","(",")",";","\n","}","catch","(","UnavailableException","e",")","{","\n","LOG",".","warn","(","\"Exception","while","closing","the","\"\n","+","\"ZkLedgerUnderrepliationManager\",","e",")",";","\n","}","\n"],"docstring_tokens":["Stop","the","replication","worker","service"]}
{"code_tokens":["\n","boolean","isRunning","(",")","{","\n","return","workerRunning","&&","workerThread",".","isAlive","(",")",";","\n"],"docstring_tokens":["Gives","the","running","status","of","ReplicationWorker"]}
{"code_tokens":["\n","@Override\n","public","void","cleanUpAndRecover","(",")","{","\n","//","clean","up","compacting","logs","and","recover","index","for","already","compacted","logs\n","List<File>","ledgerDirs","=","entryLogger",".","getLedgerDirsManager","(",")",".","getAllLedgerDirs","(",")",";","\n","for","(","File","dir",":","ledgerDirs",")","{","\n","File[]","compactingPhaseFiles","=","dir",".","listFiles","(","file","->","file",".","getName","(",")",".","endsWith","(","COMPACTING_SUFFIX",")",")",";","\n","if","(","compactingPhaseFiles","!=","null",")","{","\n","for","(","File","file",":","compactingPhaseFiles",")","{","\n","if","(","file",".","delete","(",")",")","{","\n","LOG",".","info","(","\"Deleted","failed","compaction","file","{","}","\",","file",")",";","\n","}","\n","}","\n","}","\n","File[]","compactedPhaseFiles","=","dir",".","listFiles","(","file","->","file",".","getName","(",")",".","endsWith","(","COMPACTED_SUFFIX",")",")",";","\n","if","(","compactedPhaseFiles","!=","null",")","{","\n","for","(","File","compactedFile",":","compactedPhaseFiles",")","{","\n","LOG",".","info","(","\"Found","compacted","log","file","{","}","has","partially","flushed","index,","recovering","index",".","\",\n","compactedFile",")",";","\n","CompactionPhase","updateIndex","=","new","UpdateIndexPhase","(","compactedFile,","true",")",";","\n","updateIndex",".","run","(",")",";","\n","}","\n","}","\n","}","\n"],"docstring_tokens":["Delete","all","previously","incomplete","compacting","logs","and","recover","the","index","for","compacted","logs"]}
{"code_tokens":["\n","@Override\n","public","void","add","(","Node","node",")","{","\n","if","(","node","==","null",")","{","\n","return",";","\n","}","\n","String","oldTopoStr","=","this",".","toString","(",")",";","\n","if","(","node","instanceof","InnerNode",")","{","\n","throw","new","IllegalArgumentException","(","\"Not","allow","to","add","an","inner","node:","\"","+","NodeBase",".","getPath","(","node",")",")",";","\n","}","\n","int","newDepth","=","NodeBase",".","locationToDepth","(","node",".","getNetworkLocation","(",")",")","+","1",";","\n","netlock",".","writeLock","(",")",".","lock","(",")",";","\n","try","{","\n","if","(","(","depthOfAllLeaves","!=","-1",")","&&","(","depthOfAllLeaves","!=","newDepth",")",")","{","\n","LOG",".","error","(","\"Error:","can't","add","leaf","node","{","}","at","depth","{","}","to","topology:\\n","{","}","\",","node,","newDepth,","oldTopoStr",")",";","\n","throw","new","InvalidTopologyException","(","\"Invalid","network","topology",".","\"\n","+","\"You","cannot","have","a","rack","and","a","non-rack","node","at","the","same","level","of","the","network","topology",".","\"",")",";","\n","}","\n","Node","rack","=","getNodeForNetworkLocation","(","node",")",";","\n","if","(","rack","!=","null","&&","!","(","rack","instanceof","InnerNode",")",")","{","\n","LOG",".","error","(","\"Unexpected","data","node","{","}","at","an","illegal","network","location\",","node",")",";","\n","throw","new","IllegalArgumentException","(","\"Unexpected","data","node","\"","+","node",".","toString","(",")","\n","+","\"","at","an","illegal","network","location\"",")",";","\n","}","\n","if","(","clusterMap",".","add","(","node",")",")","{","\n","LOG",".","info","(","\"Adding","a","new","node:","\"","+","NodeBase",".","getPath","(","node",")",")",";","\n","if","(","rack","==","null",")","{","\n","numOfRacks++",";","\n","}","\n","if","(","!","(","node","instanceof","InnerNode",")",")","{","\n","if","(","depthOfAllLeaves","==","-1",")","{","\n","depthOfAllLeaves","=","node",".","getLevel","(",")",";","\n","}","\n","}","\n","}","\n","if","(","LOG",".","isDebugEnabled","(",")",")","{","\n","LOG",".","debug","(","\"NetworkTopology","became:\\n\"","+","this",".","toString","(",")",")",";","\n","}","\n","}","finally","{","\n","netlock",".","writeLock","(",")",".","unlock","(",")",";","\n","}","\n"],"docstring_tokens":["Add","a","leaf","node"]}
{"code_tokens":["\n","public","boolean","isNodeGroupAware","(",")","{","\n","return","false",";","\n"],"docstring_tokens":["Check","if","network","topology","is","aware","of","NodeGroup"]}
{"code_tokens":["\n","@Override\n","public","String","toString","(",")","{","\n","//","print","the","number","of","racks\n","StringBuilder","tree","=","new","StringBuilder","(",")",";","\n","tree",".","append","(","\"Number","of","racks:","\"",")",";","\n","tree",".","append","(","numOfRacks",")",";","\n","tree",".","append","(","\"\\n\"",")",";","\n","//","print","the","number","of","leaves\n","int","numOfLeaves","=","getNumOfLeaves","(",")",";","\n","tree",".","append","(","\"Expected","number","of","leaves:\"",")",";","\n","tree",".","append","(","numOfLeaves",")",";","\n","tree",".","append","(","\"\\n\"",")",";","\n","//","print","nodes\n","for","(","int","i","=","0",";","i","<","numOfLeaves",";","i++",")","{","\n","tree",".","append","(","NodeBase",".","getPath","(","clusterMap",".","getLeaf","(","i,","null",")",")",")",";","\n","tree",".","append","(","\"\\n\"",")",";","\n","}","\n","return","tree",".","toString","(",")",";","\n"],"docstring_tokens":["Convert","a","network","tree","to","a","string"]}
{"code_tokens":["\n","public","static","String","getFirstHalf","(","String","networkLocation",")","{","\n","int","index","=","networkLocation",".","lastIndexOf","(","NodeBase",".","PATH_SEPARATOR_STR",")",";","\n","return","networkLocation",".","substring","(","0,","index",")",";","\n"],"docstring_tokens":["Divide","networklocation","string","into","two","parts","by","last","separator,","and","get","the","first","part","here"]}
{"code_tokens":["\n","public","static","String","getLastHalf","(","String","networkLocation",")","{","\n","int","index","=","networkLocation",".","lastIndexOf","(","NodeBase",".","PATH_SEPARATOR_STR",")",";","\n","return","networkLocation",".","substring","(","index",")",";","\n"],"docstring_tokens":["Divide","networklocation","string","into","two","parts","by","last","separator,","and","get","the","second","part","here"]}
{"code_tokens":["\n","HttpServer",".","Method","httpServerMethod","(","HttpServletRequest","request",")","{","\n","switch","(","request",".","getMethod","(",")",")","{","\n","case","\"POST\":\n","return","HttpServer",".","Method",".","POST",";","\n","case","\"DELETE\":\n","return","HttpServer",".","Method",".","DELETE",";","\n","case","\"PUT\":\n","return","HttpServer",".","Method",".","PUT",";","\n","case","\"GET\":\n","return","HttpServer",".","Method",".","GET",";","\n","default:\n","throw","new","UnsupportedOperationException","(","\"Unsupported","http","method\"",")",";","\n","}","\n"],"docstring_tokens":["Get","servlet","request","method","and","convert","to","the","method","that","can","be","recognized","by","HttpServer"]}
{"code_tokens":["\n","static","Set<LedgerFragment>","splitIntoSubFragments","(","LedgerHandle","lh,\n","LedgerFragment","ledgerFragment,","long","rereplicationEntryBatchSize",")","{","\n","Set<LedgerFragment>","fragments","=","new","HashSet<LedgerFragment>","(",")",";","\n","if","(","rereplicationEntryBatchSize","<=","0",")","{","\n","//","rereplicationEntryBatchSize","can","not","be","0","or","less","than","0,\n","//","returning","with","the","current","fragment\n","fragments",".","add","(","ledgerFragment",")",";","\n","return","fragments",";","\n","}","\n\n","long","firstEntryId","=","ledgerFragment",".","getFirstStoredEntryId","(",")",";","\n","long","lastEntryId","=","ledgerFragment",".","getLastStoredEntryId","(",")",";","\n\n","/*\n","*","if","firstEntryId","is","INVALID_ENTRY_ID","then","lastEntryId","should","be\n","*","INVALID_ENTRY_ID","and","viceversa",".","\n","*/\n","if","(","firstEntryId","==","INVALID_ENTRY_ID","^","lastEntryId","==","INVALID_ENTRY_ID",")","{","\n","LOG",".","error","(","\"For","LedgerFragment:","{","}",",","seeing","inconsistent","firstStoredEntryId:","{","}","and","lastStoredEntryId:","{","}","\",\n","ledgerFragment,","firstEntryId,","lastEntryId",")",";","\n","assert","false",";","\n","}","\n\n","long","numberOfEntriesToReplicate","=","(","lastEntryId","-","firstEntryId",")","+","1",";","\n","long","splitsWithFullEntries","=","numberOfEntriesToReplicate\n","/","rereplicationEntryBatchSize",";","\n\n","if","(","splitsWithFullEntries","==","0",")","{","//","only","one","fragment\n","fragments",".","add","(","ledgerFragment",")",";","\n","return","fragments",";","\n","}","\n\n","long","fragmentSplitLastEntry","=","0",";","\n","for","(","int","i","=","0",";","i","<","splitsWithFullEntries",";","i++",")","{","\n","fragmentSplitLastEntry","=","(","firstEntryId","+","rereplicationEntryBatchSize",")","-","1",";","\n","fragments",".","add","(","new","LedgerFragment","(","lh,","firstEntryId,\n","fragmentSplitLastEntry,","ledgerFragment",".","getBookiesIndexes","(",")",")",")",";","\n","firstEntryId","=","fragmentSplitLastEntry","+","1",";","\n","}","\n\n","long","lastSplitWithPartialEntries","=","numberOfEntriesToReplicate\n","%","rereplicationEntryBatchSize",";","\n","if","(","lastSplitWithPartialEntries",">","0",")","{","\n","fragments",".","add","(","new","LedgerFragment","(","lh,","firstEntryId,","firstEntryId\n","+","lastSplitWithPartialEntries","-","1,","ledgerFragment\n",".","getBookiesIndexes","(",")",")",")",";","\n","}","\n","return","fragments",";","\n"],"docstring_tokens":["Split","the","full","fragment","into","batched","entry","fragments","by","keeping","rereplicationEntryBatchSize","of","entries","in","each","one","and","can","treat","them","as","sub","fragments"]}
{"code_tokens":["\n","public","static","ProtoCompareImpl","newCompareOp","(","Compare","protoCompare",")","{","\n","ProtoCompareImpl","op","=","RECYCLER",".","get","(",")",";","\n","op",".","setRequest","(","protoCompare",")",";","\n","op",".","setTarget","(","toApiCompareTarget","(","protoCompare",".","getTarget","(",")",")",")",";","\n","op",".","setResult","(","toApiCompareResult","(","protoCompare",".","getResult","(",")",")",")",";","\n","return","op",";","\n"],"docstring_tokens":["Create","a","protobuf","encoded","compare","operation"]}
{"code_tokens":["\n","long","flush","(","final","SkipListFlusher","flusher",")","throws","IOException","{","\n","try","{","\n","long","flushSize","=","flushSnapshot","(","flusher,","Checkpoint",".","MAX",")",";","\n","previousFlushSucceeded",".","set","(","true",")",";","\n","return","flushSize",";","\n","}","catch","(","IOException","ioe",")","{","\n","previousFlushSucceeded",".","set","(","false",")",";","\n","throw","ioe",";","\n","}","\n"],"docstring_tokens":["Flush","snapshot","and","clear","it"]}
{"code_tokens":["\n","public","long","flush","(","SkipListFlusher","flusher,","Checkpoint","checkpoint",")","throws","IOException","{","\n","try","{","\n","long","size","=","flushSnapshot","(","flusher,","checkpoint",")",";","\n","if","(","null","!=","snapshot","(","checkpoint",")",")","{","\n","size","+=","flushSnapshot","(","flusher,","checkpoint",")",";","\n","}","\n","previousFlushSucceeded",".","set","(","true",")",";","\n","return","size",";","\n","}","catch","(","IOException","ioe",")","{","\n","previousFlushSucceeded",".","set","(","false",")",";","\n","throw","ioe",";","\n","}","\n"],"docstring_tokens":["Flush","memtable","until","checkpoint"]}
{"code_tokens":["\n","public","EntryKeyValue","getLastEntry","(","long","ledgerId",")","throws","IOException","{","\n","EntryKey","result","=","null",";","\n","EntryKey","key","=","new","EntryKey","(","ledgerId,","Long",".","MAX_VALUE",")",";","\n","long","startTimeNanos","=","MathUtils",".","nowInNano","(",")",";","\n","boolean","success","=","false",";","\n","this",".","lock",".","readLock","(",")",".","lock","(",")",";","\n","try","{","\n","result","=","this",".","kvmap",".","floorKey","(","key",")",";","\n","if","(","result","==","null","||","result",".","getLedgerId","(",")","!=","ledgerId",")","{","\n","result","=","this",".","snapshot",".","floorKey","(","key",")",";","\n","}","\n","success","=","true",";","\n","}","finally","{","\n","this",".","lock",".","readLock","(",")",".","unlock","(",")",";","\n","if","(","success",")","{","\n","memTableStats",".","getGetEntryStats","(",")","\n",".","registerSuccessfulEvent","(","MathUtils",".","elapsedNanos","(","startTimeNanos",")",",","TimeUnit",".","NANOSECONDS",")",";","\n","}","else","{","\n","memTableStats",".","getGetEntryStats","(",")","\n",".","registerFailedEvent","(","MathUtils",".","elapsedNanos","(","startTimeNanos",")",",","TimeUnit",".","NANOSECONDS",")",";","\n","}","\n","}","\n\n","if","(","result","==","null","||","result",".","getLedgerId","(",")","!=","ledgerId",")","{","\n","return","null",";","\n","}","\n","return","(","EntryKeyValue",")","result",";","\n"],"docstring_tokens":["Find","the","last","entry","with","the","given","ledger","key"]}
{"code_tokens":["\n","boolean","isSizeLimitReached","(",")","{","\n","return","size",".","get","(",")",">=","skipListSizeLimit",";","\n"],"docstring_tokens":["Check","if","the","entire","heap","usage","for","this","EntryMemTable","exceeds","limit"]}
{"code_tokens":["\n","boolean","isEmpty","(",")","{","\n","return","size",".","get","(",")","==","0","&&","snapshot",".","isEmpty","(",")",";","\n"],"docstring_tokens":["Check","if","there","is","data","in","the","mem-table"]}
{"code_tokens":["\n","private","void","checkState","(",")","throws","IOException","{","\n","if","(","closed",".","get","(",")",")","{","\n","LOG",".","error","(","\"BK","namespace","{","}","is","already","closed\",","namespace",")",";","\n","throw","new","AlreadyClosedException","(","\"BK","namespace","\"","+","namespace","+","\"","is","already","closed\"",")",";","\n","}","\n"],"docstring_tokens":["Check","the","namespace","state"]}
{"code_tokens":["\n","public","void","initialBlockingBookieRead","(",")","throws","BKException","{","\n\n","CompletableFuture<?>","writable",";","\n","CompletableFuture<?>","readonly",";","\n","synchronized","(","this",")","{","\n","if","(","initialReadonlyBookiesFuture","==","null",")","{","\n","assert","initialWritableBookiesFuture","==","null",";","\n\n","writable","=","this",".","registrationClient",".","watchWritableBookies","(","\n","bookies","->","processWritableBookiesChanged","(","bookies",".","getValue","(",")",")",")",";","\n\n","readonly","=","this",".","registrationClient",".","watchReadOnlyBookies","(","\n","bookies","->","processReadOnlyBookiesChanged","(","bookies",".","getValue","(",")",")",")",";","\n","initialWritableBookiesFuture","=","writable",";","\n","initialReadonlyBookiesFuture","=","readonly",";","\n","}","else","{","\n","writable","=","initialWritableBookiesFuture",";","\n","readonly","=","initialReadonlyBookiesFuture",";","\n","}","\n","}","\n","try","{","\n","FutureUtils",".","result","(","writable,","EXCEPTION_FUNC",")",";","\n","}","catch","(","BKInterruptedException","ie",")","{","\n","Thread",".","currentThread","(",")",".","interrupt","(",")",";","\n","throw","ie",";","\n","}","\n","try","{","\n","FutureUtils",".","result","(","readonly,","EXCEPTION_FUNC",")",";","\n","}","catch","(","BKInterruptedException","ie",")","{","\n","Thread",".","currentThread","(",")",".","interrupt","(",")",";","\n","throw","ie",";","\n","}","catch","(","Exception","e",")","{","\n","log",".","error","(","\"Failed","getReadOnlyBookies:","\",","e",")",";","\n","}","\n"],"docstring_tokens":["Blocks","until","bookies","are","read","from","zookeeper,","used","in","the","BookKeeper","constructor"]}
{"code_tokens":["\n","public","Value","project","(","Set<String>","fields",")","{","\n","if","(","ALL_FIELDS","==","fields",")","{","\n","return","new","Value","(","this",")",";","\n","}","\n","Value","v","=","new","Value","(",")",";","\n","for","(","String","f",":","fields",")","{","\n","byte[]","data","=","this",".","fields",".","get","(","f",")",";","\n","v",".","setField","(","f,","data",")",";","\n","}","\n","return","v",";","\n"],"docstring_tokens":["Select","parts","of","fields"]}
{"code_tokens":["\n","private","void","copyFilesToDest","(","String","checkpointId,","List<CheckpointFile>","files",")","throws","IOException","{","\n","for","(","CheckpointFile","file",":","files",")","{","\n","file",".","copyToRemote","(","checkpointStore,","dbPrefix,","checkpointId",")",";","\n","}","\n"],"docstring_tokens":["All","sst","files","are","copied","to","checkpoint","location","first"]}
{"code_tokens":["\n","public","BKStats","diff","(","BKStats","base",")","{","\n","BKStats","diff","=","new","BKStats","(",")",";","\n","for","(","int","i","=","0",";","i","<","NUM_STATS",";","i++",")","{","\n","diff",".","setOpStats","(","i,","stats[i]",".","diff","(","base",".","getOpStats","(","i",")",")",")",";","\n","}","\n","return","diff",";","\n"],"docstring_tokens":["Diff","with","base","stats"]}
{"code_tokens":["\n","public","void","copyOf","(","BKStats","other",")","{","\n","for","(","int","i","=","0",";","i","<","NUM_STATS",";","i++",")","{","\n","stats[i]",".","copyOf","(","other",".","getOpStats","(","i",")",")",";","\n","}","\n"],"docstring_tokens":["Copy","stats","from","other","stats"]}
{"code_tokens":["\n","public","NavigableMap<K,","V>","snapshot","(",")","{","\n","this",".","lock",".","writeLock","(",")",".","lock","(",")",";","\n","try","{","\n","if","(","updates",".","isEmpty","(",")",")","{","\n","return","snapshot",";","\n","}","\n","//","put","updates","for","merge","to","snapshot\n","updatesToMerge","=","updates",";","\n","updates","=","new","ConcurrentHashMap<K,","V>","(",")",";","\n","}","finally","{","\n","this",".","lock",".","writeLock","(",")",".","unlock","(",")",";","\n","}","\n","//","merging","the","updates","to","snapshot\n","for","(","Map",".","Entry<K,","V>","entry",":","updatesToMerge",".","entrySet","(",")",")","{","\n","snapshot",".","put","(","entry",".","getKey","(",")",",","entry",".","getValue","(",")",")",";","\n","}","\n","//","clear","updatesToMerge\n","this",".","lock",".","writeLock","(",")",".","lock","(",")",";","\n","try","{","\n","updatesToMerge","=","new","ConcurrentHashMap<K,","V>","(",")",";","\n","}","finally","{","\n","this",".","lock",".","writeLock","(",")",".","unlock","(",")",";","\n","}","\n","return","snapshot",";","\n"],"docstring_tokens":["Create","a","snapshot","of","current","map"]}
{"code_tokens":["\n","public","void","put","(","K","key,","V","value",")","{","\n","this",".","lock",".","readLock","(",")",".","lock","(",")",";","\n","try","{","\n","updates",".","put","(","key,","value",")",";","\n","}","finally","{","\n","this",".","lock",".","readLock","(",")",".","unlock","(",")",";","\n","}","\n\n"],"docstring_tokens":["Associates","the","specified","value","with","the","specified","key","in","this","map"]}
{"code_tokens":["\n","public","void","remove","(","K","key",")","{","\n","this",".","lock",".","readLock","(",")",".","lock","(",")",";","\n","try","{","\n","//","first","remove","updates\n","updates",".","remove","(","key",")",";","\n","updatesToMerge",".","remove","(","key",")",";","\n","//","then","remove","snapshot\n","snapshot",".","remove","(","key",")",";","\n","}","finally","{","\n","this",".","lock",".","readLock","(",")",".","unlock","(",")",";","\n","}","\n"],"docstring_tokens":["Removes","the","mapping","for","the","key","from","this","map","if","it","is","present"]}
{"code_tokens":["\n","public","boolean","containsKey","(","K","key",")","{","\n","this",".","lock",".","readLock","(",")",".","lock","(",")",";","\n","try","{","\n","return","updates",".","containsKey","(","key",")","\n","|","updatesToMerge",".","containsKey","(","key",")","\n","|","snapshot",".","containsKey","(","key",")",";","\n","}","finally","{","\n","this",".","lock",".","readLock","(",")",".","unlock","(",")",";","\n","}","\n"],"docstring_tokens":["Returns","true","if","this","map","contains","a","mapping","for","the","specified","key"]}
{"code_tokens":["\n","private","Header","getHeaderForLogId","(","long","entryLogId",")","throws","IOException","{","\n","BufferedReadChannel","bc","=","getChannelForLogId","(","entryLogId",")",";","\n\n","//","Allocate","buffer","to","read","(","version,","ledgersMapOffset,","ledgerCount",")","\n","ByteBuf","headers","=","allocator",".","directBuffer","(","LOGFILE_HEADER_SIZE",")",";","\n","try","{","\n","bc",".","read","(","headers,","0",")",";","\n\n","//","Skip","marker","string","\"BKLO\"\n","headers",".","readInt","(",")",";","\n\n","int","headerVersion","=","headers",".","readInt","(",")",";","\n","if","(","headerVersion","<","HEADER_V0","||","headerVersion",">","HEADER_CURRENT_VERSION",")","{","\n","LOG",".","info","(","\"Unknown","entry","log","header","version","for","log","{","}",":","{","}","\",","entryLogId,","headerVersion",")",";","\n","}","\n\n","long","ledgersMapOffset","=","headers",".","readLong","(",")",";","\n","int","ledgersCount","=","headers",".","readInt","(",")",";","\n","return","new","Header","(","headerVersion,","ledgersMapOffset,","ledgersCount",")",";","\n","}","finally","{","\n","headers",".","release","(",")",";","\n","}","\n"],"docstring_tokens":["Read","the","header","of","an","entry","log"]}
{"code_tokens":["\n","public","void","shutdown","(",")","{","\n","//","since","logChannel","is","buffered","channel,","do","flush","when","shutting","down\n","LOG",".","info","(","\"Stopping","EntryLogger\"",")",";","\n","try","{","\n","flush","(",")",";","\n","for","(","FileChannel","fc",":","logid2FileChannel",".","values","(",")",")","{","\n","fc",".","close","(",")",";","\n","}","\n","//","clear","the","mapping,","so","we","don't","need","to","go","through","the","channels","again","in","finally","block","in","normal","case",".","\n","logid2FileChannel",".","clear","(",")",";","\n","entryLogManager",".","close","(",")",";","\n","synchronized","(","compactionLogLock",")","{","\n","if","(","compactionLogChannel","!=","null",")","{","\n","compactionLogChannel",".","close","(",")",";","\n","compactionLogChannel","=","null",";","\n","}","\n","}","\n","}","catch","(","IOException","ie",")","{","\n","//","we","have","no","idea","how","to","avoid","io","exception","during","shutting","down,","so","just","ignore","it\n","LOG",".","error","(","\"Error","flush","entry","log","during","shutting","down,","which","may","cause","entry","log","corrupted",".","\",","ie",")",";","\n","}","finally","{","\n","for","(","FileChannel","fc",":","logid2FileChannel",".","values","(",")",")","{","\n","IOUtils",".","close","(","LOG,","fc",")",";","\n","}","\n\n","entryLogManager",".","forceClose","(",")",";","\n","synchronized","(","compactionLogLock",")","{","\n","IOUtils",".","close","(","LOG,","compactionLogChannel",")",";","\n","}","\n","}","\n","//","shutdown","the","pre-allocation","thread\n","entryLoggerAllocator",".","stop","(",")",";","\n"],"docstring_tokens":["Shutdown","method","to","gracefully","stop","entry","logger"]}
{"code_tokens":["\n","@Override\n","public","void","safeRun","(",")","{","\n","hasRun","=","true",";","\n","if","(","callbackTriggered",")","{","\n","//","this","should","only","be","true","if","the","request","was","failed","due\n","//","to","another","request","ahead","in","the","pending","queue,\n","//","so","we","can","just","ignore","this","request\n","maybeRecycle","(",")",";","\n","return",";","\n","}","\n\n","this",".","requestTimeNanos","=","MathUtils",".","nowInNano","(",")",";","\n","checkNotNull","(","lh",")",";","\n","checkNotNull","(","lh",".","macManager",")",";","\n\n","this",".","toSend","=","lh",".","macManager",".","computeDigestAndPackageForSending","(","\n","entryId,","lh",".","lastAddConfirmed,","currentLedgerLength,\n","payload",")",";","\n","//","ownership","of","RefCounted","ByteBuf","was","passed","to","computeDigestAndPackageForSending\n","payload","=","null",";","\n\n","//","We","are","about","to","send",".","Check","if","we","need","to","make","an","ensemble","change\n","//","because","of","delayed","write","errors\n","lh",".","maybeHandleDelayedWriteBookieFailure","(",")",";","\n\n","//","Iterate","over","set","and","trigger","the","sendWriteRequests\n","DistributionSchedule",".","WriteSet","writeSet","=","lh",".","distributionSchedule",".","getWriteSet","(","entryId",")",";","\n\n","try","{","\n","for","(","int","i","=","0",";","i","<","writeSet",".","size","(",")",";","i++",")","{","\n","sendWriteRequest","(","ensemble,","writeSet",".","get","(","i",")",")",";","\n","}","\n","}","finally","{","\n","writeSet",".","recycle","(",")",";","\n","}","\n"],"docstring_tokens":["Initiate","the","add","operation"]}
{"code_tokens":["\n","private","LogRecordWithInputStream","nextLogRecord","(",")","throws","IOException","{","\n","return","nextLogRecord","(","reader",")",";","\n"],"docstring_tokens":["Get","input","stream","representing","next","entry","in","the","ledger"]}
{"code_tokens":["\n","public","static","StreamCluster","build","(","StreamClusterSpec","spec",")","{","\n","return","new","StreamCluster","(","spec",")",";","\n"],"docstring_tokens":["Build","a","stream","cluster","from","the","provided","cluster","spec"]}
{"code_tokens":["\n","public","BookieId","getBookie","(","int","index",")","throws","Exception","{","\n","if","(","bs",".","size","(",")","<=","index","||","index","<","0",")","{","\n","throw","new","IllegalArgumentException","(","\"Invalid","index,","there","are","only","\"","+","bs",".","size","(",")","\n","+","\"","bookies",".","Asked","for","\"","+","index",")",";","\n","}","\n","return","bs",".","get","(","index",")",".","getBookieId","(",")",";","\n"],"docstring_tokens":["Get","bookie","address","for","bookie","at","index"]}
{"code_tokens":["\n","public","ServerConfiguration","getBkConf","(","BookieId","addr",")","throws","Exception","{","\n","int","bkIndex","=","0",";","\n","for","(","BookieServer","server",":","bs",")","{","\n","if","(","server",".","getBookieId","(",")",".","equals","(","addr",")",")","{","\n","break",";","\n","}","\n","++bkIndex",";","\n","}","\n","if","(","bkIndex","<","bs",".","size","(",")",")","{","\n","return","bsConfs",".","get","(","bkIndex",")",";","\n","}","\n","return","null",";","\n"],"docstring_tokens":["Get","bookie","configuration","for","bookie"]}
{"code_tokens":["\n","public","void","stopReplicationService","(",")","throws","Exception","{","\n","if","(","!isAutoRecoveryEnabled","(",")",")","{","\n","return",";","\n","}","\n","for","(","Entry<BookieServer,","AutoRecoveryMain>","autoRecoveryProcess",":","autoRecoveryProcesses\n",".","entrySet","(",")",")","{","\n","autoRecoveryProcess",".","getValue","(",")",".","shutdown","(",")",";","\n","LOG",".","debug","(","\"Shutdown","Auditor","Recovery","for","the","bookie:\"\n","+","autoRecoveryProcess",".","getKey","(",")",".","getBookieId","(",")",")",";","\n","}","\n"],"docstring_tokens":["Will","stops","all","the","auto","recovery","processes","for","the","bookie","cluster,","if","isAutoRecoveryEnabled","is","true"]}
{"code_tokens":["\n","private","boolean","makeSpace","(","int","len",")","{","\n","if","(","bytebuff",".","remaining","(",")","<","len",")","{","\n","flush","(",")",";","\n","bytebuff",".","clear","(",")",";","\n","return","bytebuff",".","capacity","(",")",">=","len",";","\n","}","\n","return","true",";","\n"],"docstring_tokens":["make","space","for","len","bytes","to","be","written","to","the","buffer"]}
{"code_tokens":["\n","public","void","init","(",")","throws","DiskErrorException,","NoWritableLedgerDirException","{","\n","checkDirs","(",")",";","\n"],"docstring_tokens":["Sweep","through","all","the","directories","to","check","disk","errors","or","disk","full"]}
{"code_tokens":["\n","public","ClientConfiguration","setExplictLacInterval","(","int","interval",")","{","\n","setProperty","(","EXPLICIT_LAC_INTERVAL,","interval",")",";","\n","return","this",";","\n"],"docstring_tokens":["Set","the","interval","to","check","the","need","for","sending","an","explicit","LAC"]}
{"code_tokens":["\n","public","Class<?","extends","EnsemblePlacementPolicy>","getEnsemblePlacementPolicy","(",")","\n","throws","ConfigurationException","{","\n","return","ReflectionUtils",".","getClass","(","this,","ENSEMBLE_PLACEMENT_POLICY,\n","RackawareEnsemblePlacementPolicy",".","class,\n","EnsemblePlacementPolicy",".","class,\n","DEFAULT_LOADER",")",";","\n"],"docstring_tokens":["Get","Ensemble","Placement","Policy","Class"]}
{"code_tokens":["\n","public","ClientConfiguration","setTLSKeyStoreType","(","String","arg",")","{","\n","setProperty","(","TLS_KEYSTORE_TYPE,","arg",")",";","\n","return","this",";","\n"],"docstring_tokens":["Set","the","keystore","type","for","client"]}
{"code_tokens":["\n","public","ClientConfiguration","setTLSKeyStore","(","String","arg",")","{","\n","setProperty","(","TLS_KEYSTORE,","arg",")",";","\n","return","this",";","\n"],"docstring_tokens":["Set","the","keystore","path","for","the","client"]}
{"code_tokens":["\n","public","ClientConfiguration","setTLSKeyStorePasswordPath","(","String","arg",")","{","\n","setProperty","(","TLS_KEYSTORE_PASSWORD_PATH,","arg",")",";","\n","return","this",";","\n"],"docstring_tokens":["Set","the","path","to","file","containing","keystore","password,","if","the","client","keystore","is","password","protected"]}
{"code_tokens":["\n","public","ClientConfiguration","setTLSTrustStoreType","(","String","arg",")","{","\n","setProperty","(","TLS_TRUSTSTORE_TYPE,","arg",")",";","\n","return","this",";","\n"],"docstring_tokens":["Set","the","truststore","type","for","client"]}
{"code_tokens":["\n","public","ClientConfiguration","setTLSTrustStore","(","String","arg",")","{","\n","setProperty","(","TLS_TRUSTSTORE,","arg",")",";","\n","return","this",";","\n"],"docstring_tokens":["Set","the","truststore","path","for","the","client"]}
{"code_tokens":["\n","public","ClientConfiguration","setTLSTrustStorePasswordPath","(","String","arg",")","{","\n","setProperty","(","TLS_TRUSTSTORE_PASSWORD_PATH,","arg",")",";","\n","return","this",";","\n"],"docstring_tokens":["Set","the","path","to","file","containing","truststore","password,","if","the","client","truststore","is","password","protected"]}
{"code_tokens":["\n","public","CompletableFuture<DLSN>","writeControlRecord","(","final","LogRecord","record",")","{","\n","record",".","setControl","(",")",";","\n","return","write","(","record",")",";","\n"],"docstring_tokens":["Write","a","log","record","as","control","record"]}
{"code_tokens":["\n","@Override\n","public","CompletableFuture<DLSN>","write","(","final","LogRecord","record",")","{","\n","final","Stopwatch","stopwatch","=","Stopwatch",".","createStarted","(",")",";","\n","return","FutureUtils",".","stats","(","\n","asyncWrite","(","record,","true",")",",\n","writeOpStatsLogger,\n","stopwatch",")",";","\n"],"docstring_tokens":["Write","a","log","record","to","the","stream"]}
{"code_tokens":["\n","@Override\n","public","String","getStreamName","(",")","{","\n","return","bkDistributedLogManager",".","getStreamName","(",")",";","\n"],"docstring_tokens":["TEMP","HACK","Get","the","name","of","the","stream","this","writer","writes","data","to"]}
{"code_tokens":["\n","public","static","void","close","(","@Nullable","AsyncCloseable","closeable",")","\n","throws","IOException","{","\n","if","(","null","==","closeable",")","{","\n","return",";","\n","}","\n","Utils",".","ioResult","(","closeable",".","asyncClose","(",")",")",";","\n"],"docstring_tokens":["Close","an","async","closeable"]}
{"code_tokens":["\n","public","static","CompletableFuture<Void>","closeSequence","(","ExecutorService","executorService,\n","boolean","ignoreCloseError,\n","AsyncCloseable",".",".",".","closeables",")","{","\n","List<AsyncCloseable>","closeableList","=","Lists",".","newArrayListWithExpectedSize","(","closeables",".","length",")",";","\n","for","(","AsyncCloseable","closeable",":","closeables",")","{","\n","if","(","null","==","closeable",")","{","\n","closeableList",".","add","(","AsyncCloseable",".","NULL",")",";","\n","}","else","{","\n","closeableList",".","add","(","closeable",")",";","\n","}","\n","}","\n","return","FutureUtils",".","processList","(","\n","closeableList,\n","ignoreCloseError","?","AsyncCloseable",".","CLOSE_FUNC_IGNORE_ERRORS",":","AsyncCloseable",".","CLOSE_FUNC,\n","executorService\n",")",".","thenApply","(","VoidFunctions",".","LIST_TO_VOID_FUNC",")",";","\n"],"docstring_tokens":["Close","the","closeables","in","sequence","and","ignore","errors","during","closing"]}
{"code_tokens":["\n","public","static","Long","nextLogSegmentSequenceNumber","(","List<LogSegmentMetadata>","segmentListDesc",")","{","\n","int","lastAssignedLogSegmentIdx","=","-1",";","\n","Long","lastAssignedLogSegmentSeqNo","=","null",";","\n","Long","nextLogSegmentSeqNo","=","null",";","\n\n","for","(","int","i","=","0",";","i","<","segmentListDesc",".","size","(",")",";","i++",")","{","\n","LogSegmentMetadata","metadata","=","segmentListDesc",".","get","(","i",")",";","\n","if","(","LogSegmentMetadata",".","supportsLogSegmentSequenceNo","(","metadata",".","getVersion","(",")",")",")","{","\n","lastAssignedLogSegmentSeqNo","=","metadata",".","getLogSegmentSequenceNumber","(",")",";","\n","lastAssignedLogSegmentIdx","=","i",";","\n","break",";","\n","}","\n","}","\n\n","if","(","null","!=","lastAssignedLogSegmentSeqNo",")","{","\n","//","latest","log","segment","is","assigned","with","a","sequence","number,","start","with","next","sequence","number\n","nextLogSegmentSeqNo","=","lastAssignedLogSegmentSeqNo","+","lastAssignedLogSegmentIdx","+","1",";","\n","}","\n","return","nextLogSegmentSeqNo",";","\n"],"docstring_tokens":["Assign","next","log","segment","sequence","number","based","on","a","decreasing","list","of","log","segments"]}
{"code_tokens":["\n","public","static","long","computeStartSequenceId","(","List<LogSegmentMetadata>","logSegmentDescList,\n","LogSegmentMetadata","segment",")","\n","throws","UnexpectedException","{","\n","long","startSequenceId","=","0L",";","\n","for","(","LogSegmentMetadata","metadata",":","logSegmentDescList",")","{","\n","if","(","metadata",".","getLogSegmentSequenceNumber","(",")",">=","segment",".","getLogSegmentSequenceNumber","(",")",")","{","\n","continue",";","\n","}","else","if","(","metadata",".","getLogSegmentSequenceNumber","(",")","<","(","segment",".","getLogSegmentSequenceNumber","(",")","-","1",")",")","{","\n","break",";","\n","}","\n","if","(","metadata",".","isInProgress","(",")",")","{","\n","throw","new","UnexpectedException","(","\"Should","not","complete","log","segment","\"","+","segment",".","getLogSegmentSequenceNumber","(",")","\n","+","\"","since","it's","previous","log","segment","is","still","inprogress",":","\"","+","logSegmentDescList",")",";","\n","}","\n","if","(","metadata",".","supportsSequenceId","(",")",")","{","\n","startSequenceId","=","metadata",".","getStartSequenceId","(",")","+","metadata",".","getRecordCount","(",")",";","\n","}","\n","}","\n","return","startSequenceId",";","\n"],"docstring_tokens":["Compute","the","start","sequence","id","for","segment,","based","on","previous","segment","list","segmentListDesc"]}
{"code_tokens":["\n","public","static","long","deserializeTransactionId","(","byte[]","data",")","{","\n","String","seqNoStr","=","new","String","(","data,","UTF_8",")",";","\n","return","Long",".","parseLong","(","seqNoStr",")",";","\n"],"docstring_tokens":["Deserialize","log","record","transaction","id","for","bytes","data"]}
{"code_tokens":["\n","public","static","byte[]","serializeTransactionId","(","long","transactionId",")","{","\n","return","Long",".","toString","(","transactionId",")",".","getBytes","(","UTF_8",")",";","\n"],"docstring_tokens":["Serilize","log","record","transaction","id","transactionId","into","bytes"]}
{"code_tokens":["\n","public","static","byte[]","logSegmentId2Bytes","(","long","logSegmentId",")","{","\n","return","Long",".","toString","(","logSegmentId",")",".","getBytes","(","UTF_8",")",";","\n"],"docstring_tokens":["Serialize","log","segment","id","into","bytes"]}
{"code_tokens":["\n","public","static","long","bytes2LogSegmentId","(","byte[]","data",")","{","\n","return","Long",".","parseLong","(","new","String","(","data,","UTF_8",")",")",";","\n"],"docstring_tokens":["Deserialize","bytes","into","log","segment","id"]}
{"code_tokens":["\n","public","static","String","validateAndNormalizeName","(","String","logName",")","\n","throws","InvalidStreamNameException","{","\n","if","(","isReservedStreamName","(","logName",")",")","{","\n","throw","new","InvalidStreamNameException","(","logName,","\"Log","Name","is","reserved\"",")",";","\n","}","\n\n","if","(","logName",".","charAt","(","0",")","==","'/'",")","{","\n","validatePathName","(","logName",")",";","\n","return","logName",".","substring","(","1",")",";","\n","}","else","{","\n","validatePathName","(","\"/\"","+","logName",")",";","\n","return","logName",";","\n","}","\n"],"docstring_tokens":["Validate","the","log","name"]}
{"code_tokens":["\n","public","StorageContainerStoreBuilder","withStatsLogger","(","StatsLogger","statsLogger",")","{","\n","if","(","null","==","statsLogger",")","{","\n","return","this",";","\n","}","\n","this",".","statsLogger","=","statsLogger",";","\n","return","this",";","\n"],"docstring_tokens":["Build","the","range","store","with","the","provided","StatsLogger"]}
{"code_tokens":["\n","public","StorageContainerStoreBuilder","withStorageConfiguration","(","StorageConfiguration","storeConf",")","{","\n","this",".","storeConf","=","storeConf",";","\n","return","this",";","\n"],"docstring_tokens":["Build","the","range","store","with","provided","StorageConfiguration"]}
{"code_tokens":["\n","public","StorageContainerStoreBuilder","withStorageContainerManagerFactory","(","StorageContainerManagerFactory","scmFactory",")","{","\n","this",".","scmFactory","=","scmFactory",";","\n","return","this",";","\n"],"docstring_tokens":["Build","the","range","store","with","provided","StorageContainerManagerFactory"]}
{"code_tokens":["\n","public","StorageContainerStoreBuilder","withStorageResources","(","StorageResources","resources",")","{","\n","this",".","storeResources","=","resources",";","\n","return","this",";","\n"],"docstring_tokens":["Build","the","range","store","with","provided","StorageResources"]}
{"code_tokens":["\n","public","StorageContainerStoreBuilder","withDefaultBackendUri","(","URI","uri",")","{","\n","this",".","defaultBackendUri","=","uri",";","\n","return","this",";","\n"],"docstring_tokens":["Backend","uri","for","storing","table","ranges"]}
{"code_tokens":["\n","public","static","long","toLong","(","byte[]","memory,","int","index",")","{","\n","return","(","(","long",")","memory[index]","&","0xff",")","<<","56\n","|","(","(","long",")","memory[index","+","1]","&","0xff",")","<<","48\n","|","(","(","long",")","memory[index","+","2]","&","0xff",")","<<","40\n","|","(","(","long",")","memory[index","+","3]","&","0xff",")","<<","32\n","|","(","(","long",")","memory[index","+","4]","&","0xff",")","<<","24\n","|","(","(","long",")","memory[index","+","5]","&","0xff",")","<<","16\n","|","(","(","long",")","memory[index","+","6]","&","0xff",")","<<","8\n","|","(","long",")","memory[index","+","7]","&","0xff",";","\n"],"docstring_tokens":["Get","a","long","number","from","a","bytes","array","starting","from","the","provided","index"]}
{"code_tokens":["\n","public","static","byte[]","toBytes","(","long","value",")","{","\n","byte[]","memory","=","new","byte[8]",";","\n","toBytes","(","value,","memory,","0",")",";","\n","return","memory",";","\n"],"docstring_tokens":["Convert","a","long","number","to","a","bytes","array"]}
{"code_tokens":["\n","private","void","notifyEvent","(","WatchedEvent","event",")","{","\n","//","notify","child","watchers\n","for","(","Watcher","w",":","childWatchers",")","{","\n","try","{","\n","w",".","process","(","event",")",";","\n","}","catch","(","Exception","t",")","{","\n","LOG",".","warn","(","\"Encountered","unexpected","exception","from","watcher","{","}",":","\",","w,","t",")",";","\n","}","\n","}","\n"],"docstring_tokens":["Notify","Event","to","child","watchers"]}
{"code_tokens":["\n","private","static","Closeable","tryAcquireFileLock","(","int","cpu",")","throws","IOException","{","\n","String","lockPath","=","LOCK_FILE_PREFIX","+","cpu",";","\n\n","RandomAccessFile","file","=","null",";","\n","FileChannel","channel","=","null",";","\n","FileLock","lock","=","null",";","\n\n","try","{","\n","file","=","new","RandomAccessFile","(","new","File","(","lockPath",")",",","\"rw\"",")",";","\n","channel","=","file",".","getChannel","(",")",";","\n","lock","=","channel",".","tryLock","(",")",";","\n\n","if","(","lock","==","null",")","{","\n","return","null",";","\n","}","else","{","\n","final","FileLock","finalLock","=","lock",";","\n","final","FileChannel","finalChannel","=","channel",";","\n","final","RandomAccessFile","finalFile","=","file",";","\n","return","(",")","->","{","\n","//","Closable","object\n","finalLock",".","close","(",")",";","\n","finalChannel",".","close","(",")",";","\n","finalFile",".","close","(",")",";","\n","}",";","\n","}","\n","}","finally","{","\n","if","(","lock","==","null",")","{","\n","if","(","channel","!=","null",")","{","\n","channel",".","close","(",")",";","\n","}","\n\n","if","(","file","!=","null",")","{","\n","file",".","close","(",")",";","\n","}","\n","}","\n","}","\n"],"docstring_tokens":["Try","to","acquire","a","lock","on","a","particular","cpu"]}
{"code_tokens":["\n","public","static","void","readLedgerIndexEntries","(","long","ledgerId,","ServerConfiguration","serverConf,\n","LedgerLoggerProcessor","processor",")","throws","IOException","{","\n\n","checkNotNull","(","serverConf,","\"ServerConfiguration","can't","be","null\"",")",";","\n","checkNotNull","(","processor,","\"LedgerLoggger","info","processor","can't","null\"",")",";","\n\n","LedgerDirsManager","ledgerDirsManager","=","new","LedgerDirsManager","(","serverConf,","serverConf",".","getLedgerDirs","(",")",",\n","new","DiskChecker","(","serverConf",".","getDiskUsageThreshold","(",")",",","serverConf",".","getDiskUsageWarnThreshold","(",")",")",")",";","\n","List<File>","ledgerDirs","=","ledgerDirsManager",".","getAllLedgerDirs","(",")",";","\n\n","int","dirIndex","=","MathUtils",".","signSafeMod","(","ledgerId,","ledgerDirs",".","size","(",")",")",";","\n","String","ledgerBasePath","=","ledgerDirs",".","get","(","dirIndex",")",".","toString","(",")",";","\n\n","EntryLocationIndex","entryLocationIndex","=","new","EntryLocationIndex","(","serverConf,\n","(","basePath,","subPath,","dbConfigType,","conf1",")","->\n","new","KeyValueStorageRocksDB","(","basePath,","subPath,","DbConfigType",".","Small,","conf1,","true",")",",\n","ledgerBasePath,","NullStatsLogger",".","INSTANCE",")",";","\n","try","{","\n","long","lastEntryId","=","entryLocationIndex",".","getLastEntryInLedger","(","ledgerId",")",";","\n","for","(","long","currentEntry","=","0",";","currentEntry","<=","lastEntryId",";","currentEntry++",")","{","\n","long","offset","=","entryLocationIndex",".","getLocation","(","ledgerId,","currentEntry",")",";","\n","if","(","offset","<=","0",")","{","\n","//","entry","not","found","in","this","bookie\n","continue",";","\n","}","\n","long","entryLogId","=","offset",">>","32L",";","\n","long","position","=","offset","&","0xffffffffL",";","\n","processor",".","process","(","currentEntry,","entryLogId,","position",")",";","\n","}","\n","}","finally","{","\n","entryLocationIndex",".","close","(",")",";","\n","}","\n"],"docstring_tokens":["Reads","ledger","index","entries","to","get","list","of","entry-logger","that","contains","given","ledgerId"]}
{"code_tokens":["\n","private","void","completeExceptionally","(","Throwable","throwable,","boolean","isBackground",")","{","\n","lastExceptionUpdater",".","compareAndSet","(","this,","null,","throwable",")",";","\n","if","(","isBackground",")","{","\n","notifyReaders","(",")",";","\n","}","\n"],"docstring_tokens":["Set","the","reader","into","error","state","with","return","code","rc"]}
{"code_tokens":["\n","@Override\n","public","void","safeRun","(",")","{","\n","long","scheduleCountLocal","=","scheduleCountUpdater",".","get","(","this",")",";","\n","while","(","true",")","{","\n","PendingReadRequest","nextRequest","=","null",";","\n","synchronized","(","readQueue",")","{","\n","nextRequest","=","readQueue",".","peek","(",")",";","\n","}","\n\n","//","if","read","queue","is","empty,","nothing","to","read,","return\n","if","(","null","==","nextRequest",")","{","\n","scheduleCountUpdater",".","set","(","this,","0L",")",";","\n","return",";","\n","}","\n\n","//","if","the","oldest","pending","promise","is","interrupted","then","we","must\n","//","mark","the","reader","in","error","and","abort","all","pending","reads","since\n","//","we","don't","know","the","last","consumed","read\n","if","(","null","==","lastExceptionUpdater",".","get","(","this",")",")","{","\n","if","(","nextRequest",".","getPromise","(",")",".","isCancelled","(",")",")","{","\n","completeExceptionally","(","new","DLInterruptedException","(","\"Interrupted","on","reading","log","segment","\"\n","+","getSegment","(",")","+","\"",":","\"","+","nextRequest",".","getPromise","(",")",".","isCancelled","(",")",")",",","false",")",";","\n","}","\n","}","\n\n","//","if","the","reader","is","in","error","state,","stop","read\n","if","(","checkClosedOrInError","(",")",")","{","\n","return",";","\n","}","\n\n","//","read","entries","from","readahead","cache","to","satisfy","next","read","request\n","readEntriesFromReadAheadCache","(","nextRequest",")",";","\n\n","//","check","if","we","can","satisfy","the","read","request\n","if","(","nextRequest",".","hasReadEntries","(",")",")","{","\n","PendingReadRequest","request",";","\n","synchronized","(","readQueue",")","{","\n","request","=","readQueue",".","poll","(",")",";","\n","}","\n","if","(","null","!=","request","&&","nextRequest","==","request",")","{","\n","request",".","complete","(",")",";","\n","}","else","{","\n","DLIllegalStateException","ise","=","new","DLIllegalStateException","(","\"Unexpected","condition","at","reading","from","\"\n","+","getSegment","(",")",")",";","\n","nextRequest",".","completeExceptionally","(","ise",")",";","\n","if","(","null","!=","request",")","{","\n","request",".","completeExceptionally","(","ise",")",";","\n","}","\n","completeExceptionally","(","ise,","false",")",";","\n","}","\n","}","else","{","\n","if","(","0","==","scheduleCountLocal",")","{","\n","return",";","\n","}","\n","scheduleCountLocal","=","scheduleCountUpdater",".","decrementAndGet","(","this",")",";","\n","}","\n","}","\n"],"docstring_tokens":["The","core","function","to","propagate","fetched","entries","to","read","requests"]}
{"code_tokens":["\n","public","static","Builder","builder","(",")","{","\n","return","new","Builder","(",")",";","\n"],"docstring_tokens":["Create","a","builder","to","build","a","config","def"]}
{"code_tokens":["\n","@SuppressWarnings","(","\"unchecked\"",")","\n","public","static","ConfigDef","of","(","Class","configClass",")","{","\n","ConfigDef",".","Builder","builder","=","ConfigDef",".","builder","(",")",";","\n\n","Field[]","fields","=","configClass",".","getDeclaredFields","(",")",";","\n","for","(","Field","field",":","fields",")","{","\n","if","(","Modifier",".","isStatic","(","field",".","getModifiers","(",")",")","&&","field",".","getType","(",")",".","equals","(","ConfigKey",".","class",")",")","{","\n","field",".","setAccessible","(","true",")",";","\n","try","{","\n","builder",".","withConfigKey","(","(","ConfigKey",")","field",".","get","(","null",")",")",";","\n","}","catch","(","IllegalAccessException","e",")","{","\n","log",".","error","(","\"Illegal","to","access","{","}","#","{","}","\",","configClass",".","getSimpleName","(",")",",","field",".","getName","(",")",",","e",")",";","\n","}","\n","}","\n","}","\n\n","return","builder",".","build","(",")",";","\n"],"docstring_tokens":["Build","the","config","definitation","of","a","config","class"]}
{"code_tokens":["\n","public","static","CompletableFuture<Void>","closeLedgers","(","LedgerHandle",".",".",".","lhs",")","{","\n","List<CompletableFuture<Void>>","closeResults","=","Lists",".","newArrayListWithExpectedSize","(","lhs",".","length",")",";","\n","for","(","LedgerHandle","lh",":","lhs",")","{","\n","closeResults",".","add","(","closeLedger","(","lh",")",")",";","\n","}","\n","return","FutureUtils",".","collect","(","closeResults",")",".","thenApply","(","VoidFunctions",".","LIST_TO_VOID_FUNC",")",";","\n"],"docstring_tokens":["Close","a","list","of","ledgers","lhs"]}
{"code_tokens":["\n","private","MetadataBookieDriver","instantiateMetadataDriver","(","ServerConfiguration","conf",")","throws","BookieException","{","\n","try","{","\n","String","metadataServiceUriStr","=","conf",".","getMetadataServiceUri","(",")",";","\n","if","(","null","==","metadataServiceUriStr",")","{","\n","return","null",";","\n","}","\n\n","MetadataBookieDriver","driver","=","MetadataDrivers",".","getBookieDriver","(","\n","URI",".","create","(","metadataServiceUriStr",")",")",";","\n","driver",".","initialize","(","\n","conf,\n","(",")","->","{","\n","stateManager",".","forceToUnregistered","(",")",";","\n","//","schedule","a","re-register","operation\n","stateManager",".","registerBookie","(","false",")",";","\n","}",",\n","statsLogger",")",";","\n","return","driver",";","\n","}","catch","(","MetadataException","me",")","{","\n","throw","new","MetadataStoreException","(","\"Failed","to","initialize","metadata","bookie","driver\",","me",")",";","\n","}","catch","(","ConfigurationException","e",")","{","\n","throw","new","BookieIllegalOpException","(","e",")",";","\n","}","\n"],"docstring_tokens":["Instantiate","the","metadata","driver","for","the","Bookie"]}
{"code_tokens":["\n","public","boolean","isAvailableForHighPriorityWrites","(",")","{","\n","return","stateManager",".","isAvailableForHighPriorityWrites","(",")",";","\n"],"docstring_tokens":["Check","whether","Bookie","is","available","for","high","priority","writes"]}
{"code_tokens":["\n","@VisibleForTesting\n","LedgerDescriptor","getLedgerForEntry","(","ByteBuf","entry,","final","byte[]","masterKey",")","\n","throws","IOException,","BookieException","{","\n","final","long","ledgerId","=","entry",".","getLong","(","entry",".","readerIndex","(",")",")",";","\n\n","return","handles",".","getHandle","(","ledgerId,","masterKey",")",";","\n"],"docstring_tokens":["Retrieve","the","ledger","descriptor","for","the","ledger","which","entry","should","be","added","to"]}
{"code_tokens":["\n","private","void","addEntryInternal","(","LedgerDescriptor","handle,","ByteBuf","entry,\n","boolean","ackBeforeSync,","WriteCallback","cb,","Object","ctx,","byte[]","masterKey",")","\n","throws","IOException,","BookieException,","InterruptedException","{","\n","long","ledgerId","=","handle",".","getLedgerId","(",")",";","\n","long","entryId","=","handle",".","addEntry","(","entry",")",";","\n\n","bookieStats",".","getWriteBytes","(",")",".","add","(","entry",".","readableBytes","(",")",")",";","\n\n","//","journal","`addEntry`","should","happen","after","the","entry","is","added","to","ledger","storage",".","\n","//","otherwise","the","journal","entry","can","potentially","be","rolled","before","the","ledger","is","created","in","ledger","storage",".","\n","if","(","masterKeyCache",".","get","(","ledgerId",")","==","null",")","{","\n","//","Force","the","load","into","masterKey","cache\n","byte[]","oldValue","=","masterKeyCache",".","putIfAbsent","(","ledgerId,","masterKey",")",";","\n","if","(","oldValue","==","null",")","{","\n","//","new","handle,","we","should","add","the","key","to","journal","ensure","we","can","rebuild\n","ByteBuffer","bb","=","ByteBuffer",".","allocate","(","8","+","8","+","4","+","masterKey",".","length",")",";","\n","bb",".","putLong","(","ledgerId",")",";","\n","bb",".","putLong","(","METAENTRY_ID_LEDGER_KEY",")",";","\n","bb",".","putInt","(","masterKey",".","length",")",";","\n","bb",".","put","(","masterKey",")",";","\n","bb",".","flip","(",")",";","\n\n","getJournal","(","ledgerId",")",".","logAddEntry","(","bb,","false","/*","ackBeforeSync","*/,","new","NopWriteCallback","(",")",",","null",")",";","\n","}","\n","}","\n\n","if","(","!writeDataToJournal",")","{","\n","cb",".","writeComplete","(","0,","ledgerId,","entryId,","null,","ctx",")",";","\n","return",";","\n","}","\n\n","if","(","LOG",".","isTraceEnabled","(",")",")","{","\n","LOG",".","trace","(","\"Adding","{","}","@","{","}","\",","entryId,","ledgerId",")",";","\n","}","\n","getJournal","(","ledgerId",")",".","logAddEntry","(","entry,","ackBeforeSync,","cb,","ctx",")",";","\n"],"docstring_tokens":["Add","an","entry","to","a","ledger","as","specified","by","handle"]}
{"code_tokens":["\n","public","void","addEntry","(","ByteBuf","entry,","boolean","ackBeforeSync,","WriteCallback","cb,","Object","ctx,","byte[]","masterKey",")","\n","throws","IOException,","BookieException,","InterruptedException","{","\n","long","requestNanos","=","MathUtils",".","nowInNano","(",")",";","\n","boolean","success","=","false",";","\n","int","entrySize","=","0",";","\n","try","{","\n","LedgerDescriptor","handle","=","getLedgerForEntry","(","entry,","masterKey",")",";","\n","synchronized","(","handle",")","{","\n","if","(","handle",".","isFenced","(",")",")","{","\n","throw","BookieException\n",".","create","(","BookieException",".","Code",".","LedgerFencedException",")",";","\n","}","\n","entrySize","=","entry",".","readableBytes","(",")",";","\n","addEntryInternal","(","handle,","entry,","ackBeforeSync,","cb,","ctx,","masterKey",")",";","\n","}","\n","success","=","true",";","\n","}","catch","(","NoWritableLedgerDirException","e",")","{","\n","stateManager",".","transitionToReadOnlyMode","(",")",";","\n","throw","new","IOException","(","e",")",";","\n","}","finally","{","\n","long","elapsedNanos","=","MathUtils",".","elapsedNanos","(","requestNanos",")",";","\n","if","(","success",")","{","\n","bookieStats",".","getAddEntryStats","(",")",".","registerSuccessfulEvent","(","elapsedNanos,","TimeUnit",".","NANOSECONDS",")",";","\n","bookieStats",".","getAddBytesStats","(",")",".","registerSuccessfulValue","(","entrySize",")",";","\n","}","else","{","\n","bookieStats",".","getAddEntryStats","(",")",".","registerFailedEvent","(","elapsedNanos,","TimeUnit",".","NANOSECONDS",")",";","\n","bookieStats",".","getAddBytesStats","(",")",".","registerFailedValue","(","entrySize",")",";","\n","}","\n\n","entry",".","release","(",")",";","\n","}","\n"],"docstring_tokens":["Add","entry","to","a","ledger"]}
{"code_tokens":["\n","public","static","boolean","format","(","ServerConfiguration","conf,\n","boolean","isInteractive,","boolean","force",")","{","\n","for","(","File","journalDir",":","conf",".","getJournalDirs","(",")",")","{","\n","String[]","journalDirFiles","=\n","journalDir",".","exists","(",")","&&","journalDir",".","isDirectory","(",")","?","journalDir",".","list","(",")",":","null",";","\n","if","(","journalDirFiles","!=","null","&&","journalDirFiles",".","length","!=","0",")","{","\n","try","{","\n","boolean","confirm","=","false",";","\n","if","(","!isInteractive",")","{","\n","//","If","non","interactive","and","force","is","set,","then","delete","old\n","//","data",".","\n","confirm","=","force",";","\n","}","else","{","\n","confirm","=","IOUtils\n",".","confirmPrompt","(","\"Are","you","sure","to","format","Bookie","data",".",".","?\"",")",";","\n","}","\n\n","if","(","!confirm",")","{","\n","LOG",".","error","(","\"Bookie","format","aborted!!\"",")",";","\n","return","false",";","\n","}","\n","}","catch","(","IOException","e",")","{","\n","LOG",".","error","(","\"Error","during","bookie","format\",","e",")",";","\n","return","false",";","\n","}","\n","}","\n","if","(","!cleanDir","(","journalDir",")",")","{","\n","LOG",".","error","(","\"Formatting","journal","directory","failed\"",")",";","\n","return","false",";","\n","}","\n","}","\n\n","File[]","ledgerDirs","=","conf",".","getLedgerDirs","(",")",";","\n","for","(","File","dir",":","ledgerDirs",")","{","\n","if","(","!cleanDir","(","dir",")",")","{","\n","LOG",".","error","(","\"Formatting","ledger","directory","\"","+","dir","+","\"","failed\"",")",";","\n","return","false",";","\n","}","\n","}","\n\n","//","Clean","up","index","directories","if","they","are","separate","from","the","ledger","dirs\n","File[]","indexDirs","=","conf",".","getIndexDirs","(",")",";","\n","if","(","null","!=","indexDirs",")","{","\n","for","(","File","dir",":","indexDirs",")","{","\n","if","(","!cleanDir","(","dir",")",")","{","\n","LOG",".","error","(","\"Formatting","index","directory","\"","+","dir","+","\"","failed\"",")",";","\n","return","false",";","\n","}","\n","}","\n","}","\n\n","LOG",".","info","(","\"Bookie","format","completed","successfully\"",")",";","\n","return","true",";","\n"],"docstring_tokens":["Format","the","bookie","server","data"]}
{"code_tokens":["\n","private","void","handleSessionExpired","(","final","int","lockEpoch",")","{","\n","executeLockAction","(","lockEpoch,","new","LockAction","(",")","{","\n","@Override\n","public","void","execute","(",")","{","\n","if","(","lockState",".","inState","(","State",".","CLOSED",")","||","lockState",".","inState","(","State",".","CLOSING",")",")","{","\n","//","Already","fully","closed,","no","need","to","process","expire",".","\n","return",";","\n","}","\n\n","boolean","shouldNotifyLockListener","=","lockState",".","inState","(","State",".","CLAIMED",")",";","\n\n","lockState",".","transition","(","State",".","EXPIRED",")",";","\n\n","//","remove","the","watcher\n","if","(","null","!=","watcher",")","{","\n","zkClient",".","unregister","(","watcher",")",";","\n","}","\n\n","//","increment","epoch","to","avoid","any","ongoing","locking","action\n","epochUpdater",".","incrementAndGet","(","ZKSessionLock",".","this",")",";","\n\n","//","if","session","expired,","just","notify","the","waiter",".","as","the","lock","acquire","doesn't","succeed",".","\n","//","we","don't","even","need","to","clean","up","the","lock","as","the","znode","will","disappear","after","session","expired\n","acquireFuture",".","completeExceptionally","(","\n","new","LockSessionExpiredException","(","lockPath,","lockId,","lockState",".","getState","(",")",")",")",";","\n\n","//","session","expired,","ephemeral","node","is","gone",".","\n","currentNode","=","null",";","\n","currentId","=","null",";","\n\n","if","(","shouldNotifyLockListener",")","{","\n","//","if","session","expired","after","claimed,","we","need","to","notify","the","caller","to","re-lock\n","if","(","null","!=","lockListener",")","{","\n","lockListener",".","onExpired","(",")",";","\n","}","\n","}","\n","}","\n\n","@Override\n","public","String","getActionName","(",")","{","\n","return","\"handleSessionExpired","(","epoch=\"","+","lockEpoch","+","\"",")","\"",";","\n","}","\n","}",")",";","\n"],"docstring_tokens":["Handle","session","expired","for","lock","watcher","at","epoch","lockEpoch"]}
{"code_tokens":["\n","public","static","File","createTempDir","(","String","prefix,","String","suffix",")","\n","throws","IOException","{","\n","return","createTempDir","(","prefix,","suffix,","null",")",";","\n"],"docstring_tokens":["Create","a","temp","directory","with","given","prefix","and","suffix"]}
{"code_tokens":["\n","public","Set<Integer>","getCpusOnSameCore","(","int","targetCpu",")","{","\n","Set<Integer>","result","=","new","TreeSet<>","(",")",";","\n","int","targetCore","=","cpus",".","get","(","targetCpu",")",";","\n\n","cpus",".","forEach","(","(","cpu,","core",")","->","{","\n","if","(","core","==","targetCore",")","{","\n","result",".","add","(","cpu",")",";","\n","}","\n","}",")",";","\n\n","return","result",";","\n"],"docstring_tokens":["Given","one","cpu","id,","return","all","CPUs","that","are","sharing","the","same","core"]}
{"code_tokens":["\n","public","static","LogMetadataForReader","of","(","URI","uri,","String","logName,","String","logIdentifier",")","{","\n","return","new","LogMetadataForReader","(","uri,","logName,","logIdentifier",")",";","\n"],"docstring_tokens":["Create","a","metadata","representation","of","a","log","for","reader"]}
{"code_tokens":["\n","public","String","getReadLockPath","(","Optional<String>","subscriberId",")","{","\n","if","(","subscriberId",".","isPresent","(",")",")","{","\n","return","logRootPath","+","SUBSCRIBERS_PATH","+","\"/\"","+","subscriberId",".","get","(",")","+","READ_LOCK_PATH",";","\n","}","else","{","\n","return","logRootPath","+","READ_LOCK_PATH",";","\n","}","\n"],"docstring_tokens":["Get","the","readlock","path","for","the","log","or","a","subscriber","of","the","log"]}
{"code_tokens":["\n","protected","BookieNode","selectRandomFromRack","(","String","netPath,","Set<Node>","excludeBookies,","Predicate<BookieNode>","predicate,\n","Ensemble<BookieNode>","ensemble",")","throws","BKNotEnoughBookiesException","{","\n","WeightedRandomSelection<BookieNode>","wRSelection","=","null",";","\n","List<Node>","leaves","=","new","ArrayList<Node>","(","topology",".","getLeaves","(","netPath",")",")",";","\n","if","(","!this",".","isWeighted",")","{","\n","Collections",".","shuffle","(","leaves",")",";","\n","}","else","{","\n","if","(","CollectionUtils",".","subtract","(","leaves,","excludeBookies",")",".","size","(",")","<","1",")","{","\n","throw","new","BKNotEnoughBookiesException","(",")",";","\n","}","\n","wRSelection","=","prepareForWeightedSelection","(","leaves",")",";","\n","if","(","wRSelection","==","null",")","{","\n","throw","new","BKNotEnoughBookiesException","(",")",";","\n","}","\n","}","\n\n","Iterator<Node>","it","=","leaves",".","iterator","(",")",";","\n","Set<Node>","bookiesSeenSoFar","=","new","HashSet<Node>","(",")",";","\n","while","(","true",")","{","\n","Node","n",";","\n","if","(","isWeighted",")","{","\n","if","(","bookiesSeenSoFar",".","size","(",")","==","leaves",".","size","(",")",")","{","\n","//","Don't","loop","infinitely",".","\n","break",";","\n","}","\n","n","=","wRSelection",".","getNextRandom","(",")",";","\n","bookiesSeenSoFar",".","add","(","n",")",";","\n","}","else","{","\n","if","(","it",".","hasNext","(",")",")","{","\n","n","=","it",".","next","(",")",";","\n","}","else","{","\n","break",";","\n","}","\n","}","\n","if","(","excludeBookies",".","contains","(","n",")",")","{","\n","continue",";","\n","}","\n","if","(","!","(","n","instanceof","BookieNode",")","||","!predicate",".","apply","(","(","BookieNode",")","n,","ensemble",")",")","{","\n","continue",";","\n","}","\n","BookieNode","bn","=","(","BookieNode",")","n",";","\n","//","got","a","good","candidate\n","if","(","ensemble",".","addNode","(","bn",")",")","{","\n","//","add","the","candidate","to","exclude","set\n","excludeBookies",".","add","(","bn",")",";","\n","}","\n","return","bn",";","\n","}","\n","throw","new","BKNotEnoughBookiesException","(",")",";","\n"],"docstring_tokens":["Choose","random","node","under","a","given","network","path"]}
{"code_tokens":["\n","public","static","RangeValidator","atLeast","(","Number","min",")","{","\n","return","new","RangeValidator","(","min,","null",")",";","\n"],"docstring_tokens":["A","numeric","range","that","checks","the","lower","bound"]}
{"code_tokens":["\n","public","static","RangeValidator","atMost","(","Number","max",")","{","\n","return","new","RangeValidator","(","null,","max",")",";","\n"],"docstring_tokens":["A","numeric","range","that","checks","the","upper","bound"]}
{"code_tokens":["\n","public","static","RangeValidator","between","(","Number","min,","Number","max",")","{","\n","return","new","RangeValidator","(","min,","max",")",";","\n"],"docstring_tokens":["A","numeric","range","that","checks","both","lower","and","upper","bounds"]}
{"code_tokens":["\n","@Override\n","public","long","getCount","(",")","{","\n","long","sum","=","0",";","\n","for","(","AtomicLong","c",":","counter",")","{","\n","sum","+=","c",".","get","(",")",";","\n","}","\n","return","sum",";","\n"],"docstring_tokens":["Returns","the","all-time","count","of","events","this","timer","has","seen"]}
{"code_tokens":["\n","@Override\n","public","Snapshot","getSnapshot","(",")","{","\n","long","sum","=","0",";","\n","long","cnt","=","0",";","\n","long","min","=","0",";","\n","long","max","=","0",";","\n\n","//","get","time","and","trigger","housekeeping\n","int","now","=","getNow","(","0",")","-","1",";","//","start","from","last","completed","second\n","int","secFrom","=","now","-","(","timeWindow","-","2",")",";","\n\n","for","(","int","i","=","1",";","i","<","HASH_SIZE",";","i++",")","{","\n","getNow","(","i",")",";","\n","}","\n\n","long[]","buckets","=","(","numBuckets",">","0","?","new","long[numBuckets]",":","null",")",";","\n","for","(","int","i","=","now",";","i",">","secFrom",";","i--",")","{","\n","int","t","=","(","timeWindow","+","i",")","%","timeWindow",";","\n","for","(","int","h","=","0",";","h","<","HASH_SIZE",";","h++",")","{","\n","synchronized","(","locks[h]",")","{","\n","sum","+=","this",".","sum[h][t]",";","\n","cnt","+=","this",".","meter[h][t]",";","\n","if","(","(","this",".","min[h][t]","<","min","&&","this",".","min[h][t]",">","0",")","||","min","==","0",")","{","\n","min","=","this",".","min[h][t]",";","\n","}","\n","if","(","this",".","max[h][t]",">","max",")","{","\n","max","=","this",".","max[h][t]",";","\n","}","\n","}","\n","}","\n","//","no","need","to","synchronize","for","reading","(","buckets","(","int",")","is","written","atomically",")","\n","for","(","int","b","=","0",";","b","<","numBuckets",";","b++",")","{","\n","buckets[b]","+=","this",".","buckets[b][t]",";","\n","}","\n","}","\n\n","return","new","FastSnapshot","(","this,","min,","max,","sum,","cnt,","buckets",")",";","\n"],"docstring_tokens":["Returns","a","snapshot","of","this","timer"]}
{"code_tokens":["\n","@Override\n","public","void","update","(","long","duration,","TimeUnit","unit",")","{","\n","update","(","unit",".","toNanos","(","duration",")",")",";","\n"],"docstring_tokens":["Add","an","event","to","this","timer"]}
{"code_tokens":["\n","private","SettableFuture<Boolean>","logFenceEntryInJournal","(","Journal","journal",")","{","\n","SettableFuture<Boolean>","result",";","\n","synchronized","(","this",")","{","\n","result","=","logFenceResult","=","SettableFuture",".","create","(",")",";","\n","}","\n","ByteBuf","entry","=","createLedgerFenceEntry","(","ledgerId",")",";","\n","try","{","\n","journal",".","logAddEntry","(","entry,","false","/*","ackBeforeSync","*/,","(","rc,","ledgerId,","entryId,","addr,","ctx",")","->","{","\n","if","(","LOG",".","isDebugEnabled","(",")",")","{","\n","LOG",".","debug","(","\"Record","fenced","state","for","ledger","{","}","in","journal","with","rc","{","}","\",\n","ledgerId,","BKException",".","codeLogger","(","rc",")",")",";","\n","}","\n","if","(","rc","==","0",")","{","\n","fenceEntryPersisted",".","compareAndSet","(","false,","true",")",";","\n","result",".","set","(","true",")",";","\n","}","else","{","\n","result",".","set","(","false",")",";","\n","}","\n","}",",","null",")",";","\n","}","catch","(","InterruptedException","e",")","{","\n","Thread",".","currentThread","(",")",".","interrupt","(",")",";","\n","result",".","setException","(","e",")",";","\n","}","\n","return","result",";","\n"],"docstring_tokens":["Log","the","fence","ledger","entry","in","Journal","so","that","we","can","rebuild","the","state"]}
{"code_tokens":["\n","private","Future<?>","waitForBookieInSet","(","BookieId","b,\n","boolean","writable",")","throws","Exception","{","\n","log",".","info","(","\"Wait","for","{","}","to","become","{","}","\",\n","b,","writable","?","\"writable\"",":","\"readonly\"",")",";","\n\n","CompletableFuture<Void>","readOnlyFuture","=","new","CompletableFuture<>","(",")",";","\n","CompletableFuture<Void>","writableFuture","=","new","CompletableFuture<>","(",")",";","\n\n","RegistrationListener","readOnlyListener","=","(","bookies",")","->","{","\n","boolean","contains","=","bookies",".","getValue","(",")",".","contains","(","b",")",";","\n","if","(","(","!writable","&&","contains",")","||","(","writable","&&","!contains",")",")","{","\n","readOnlyFuture",".","complete","(","null",")",";","\n","}","\n","}",";","\n","RegistrationListener","writableListener","=","(","bookies",")","->","{","\n","boolean","contains","=","bookies",".","getValue","(",")",".","contains","(","b",")",";","\n","if","(","(","writable","&&","contains",")","||","(","!writable","&&","!contains",")",")","{","\n","writableFuture",".","complete","(","null",")",";","\n","}","\n","}",";","\n\n","getMetadataClientDriver","(",")",".","getRegistrationClient","(",")",".","watchWritableBookies","(","writableListener",")",";","\n","getMetadataClientDriver","(",")",".","getRegistrationClient","(",")",".","watchReadOnlyBookies","(","readOnlyListener",")",";","\n\n","if","(","writable",")","{","\n","return","writableFuture\n",".","thenCompose","(","ignored","->","getMetadataClientDriver","(",")",".","getRegistrationClient","(",")",".","getReadOnlyBookies","(",")",")","\n",".","thenCompose","(","readonlyBookies","->","{","\n","if","(","readonlyBookies",".","getValue","(",")",".","contains","(","b",")",")","{","\n","//","if","the","bookie","still","shows","up","at","readonly","path,","wait","for","it","to","disappear\n","return","readOnlyFuture",";","\n","}","else","{","\n","return","FutureUtils",".","Void","(",")",";","\n","}","\n","}",")",";","\n","}","else","{","\n","return","readOnlyFuture\n",".","thenCompose","(","ignored","->","getMetadataClientDriver","(",")",".","getRegistrationClient","(",")",".","getWritableBookies","(",")",")","\n",".","thenCompose","(","writableBookies","->","{","\n","if","(","writableBookies",".","getValue","(",")",".","contains","(","b",")",")","{","\n","//","if","the","bookie","still","shows","up","at","writable","path,","wait","for","it","to","disappear\n","return","writableFuture",";","\n","}","else","{","\n","return","FutureUtils",".","Void","(",")",";","\n","}","\n","}",")",";","\n","}","\n"],"docstring_tokens":["Wait","for","bookie","to","appear","in","either","the","writable","set","of","bookies,","or","the","read","only","set","of","bookies"]}
{"code_tokens":["\n","protected","void","addCommand","(","Command","command",")","{","\n","commands",".","put","(","command",".","getName","(",")",",","command",")",";","\n"],"docstring_tokens":["Add","a","command","in","this","tool"]}
{"code_tokens":["\n","protected","static","void","println","(","String","msg",")","{","\n","System",".","out",".","println","(","msg",")",";","\n"],"docstring_tokens":["Print","a","message","in","this","tool"]}
{"code_tokens":["\n","public","StorageContainerChannel","remove","(","long","scId",")","{","\n","return","scChannels",".","remove","(","scId",")",";","\n"],"docstring_tokens":["Remove","the","storage","container","channel","from","the","channels","map"]}
{"code_tokens":["\n","@Override\n","public","void","notifyOnError","(","Throwable","cause",")","{","\n","if","(","cause","instanceof","IOException",")","{","\n","setLastException","(","(","IOException",")","cause",")",";","\n","}","else","{","\n","setLastException","(","new","IOException","(","cause",")",")",";","\n","}","\n","scheduleBackgroundRead","(",")",";","\n"],"docstring_tokens":["Triggered","when","the","background","activity","encounters","an","exception"]}
{"code_tokens":["\n","@Override\n","public","void","notifyOnOperationComplete","(",")","{","\n","scheduleBackgroundRead","(",")",";","\n"],"docstring_tokens":["Triggered","when","the","background","activity","completes","an","operation"]}
{"code_tokens":["\n","public","void","writeToRegistrationManager","(","RegistrationManager","rm,","ServerConfiguration","conf,","Version","version",")","\n","throws","BookieException","{","\n","BookieId","address","=","null",";","\n","try","{","\n","address","=","Bookie",".","getBookieId","(","conf",")",";","\n","}","catch","(","UnknownHostException","e",")","{","\n","throw","new","UnknownBookieIdException","(","e",")",";","\n","}","\n","byte[]","data","=","toString","(",")",".","getBytes","(","UTF_8",")",";","\n","rm",".","writeCookie","(","address,","new","Versioned<>","(","data,","version",")",")",";","\n"],"docstring_tokens":["Writes","cookie","details","to","registration","manager"]}
{"code_tokens":["\n","public","void","deleteFromRegistrationManager","(","RegistrationManager","rm,\n","ServerConfiguration","conf,\n","Version","version",")","throws","BookieException","{","\n","BookieId","address","=","null",";","\n","try","{","\n","address","=","Bookie",".","getBookieId","(","conf",")",";","\n","}","catch","(","UnknownHostException","e",")","{","\n","throw","new","UnknownBookieIdException","(","e",")",";","\n","}","\n","deleteFromRegistrationManager","(","rm,","address,","version",")",";","\n"],"docstring_tokens":["Deletes","cookie","from","registration","manager"]}
{"code_tokens":["\n","public","void","deleteFromRegistrationManager","(","RegistrationManager","rm,\n","BookieId","address,\n","Version","version",")","throws","BookieException","{","\n","if","(","!","(","version","instanceof","LongVersion",")",")","{","\n","throw","new","IllegalArgumentException","(","\"Invalid","version","type,","expected","ZkVersion","type\"",")",";","\n","}","\n\n","rm",".","removeCookie","(","address,","version",")",";","\n"],"docstring_tokens":["Delete","cookie","from","registration","manager"]}
{"code_tokens":["\n","public","static","Versioned<Cookie>","readFromRegistrationManager","(","RegistrationManager","rm,","ServerConfiguration","conf",")","\n","throws","BookieException","{","\n","try","{","\n","return","readFromRegistrationManager","(","rm,","Bookie",".","getBookieId","(","conf",")",")",";","\n","}","catch","(","UnknownHostException","e",")","{","\n","throw","new","UnknownBookieIdException","(","e",")",";","\n","}","\n"],"docstring_tokens":["Read","cookie","from","registration","manager"]}
{"code_tokens":["\n","public","static","Versioned<Cookie>","readFromRegistrationManager","(","RegistrationManager","rm,\n","BookieId","address",")","throws","BookieException","{","\n","Versioned<byte[]>","cookieData","=","rm",".","readCookie","(","address",")",";","\n","try","{","\n","try","(","BufferedReader","reader","=","new","BufferedReader","(","\n","new","StringReader","(","new","String","(","cookieData",".","getValue","(",")",",","UTF_8",")",")",")",")","{","\n","Builder","builder","=","parse","(","reader",")",";","\n","Cookie","cookie","=","builder",".","build","(",")",";","\n","return","new","Versioned<Cookie>","(","cookie,","cookieData",".","getVersion","(",")",")",";","\n","}","\n","}","catch","(","IOException","ioe",")","{","\n","throw","new","InvalidCookieException","(","ioe",")",";","\n","}","\n"],"docstring_tokens":["Read","cookie","from","registration","manager","for","a","given","bookie","address"]}
{"code_tokens":["\n","public","static","Cookie","readFromDirectory","(","File","directory",")","throws","IOException","{","\n","File","versionFile","=","new","File","(","directory,","BookKeeperConstants",".","VERSION_FILENAME",")",";","\n","try","(","BufferedReader","reader","=","new","BufferedReader","(","\n","new","InputStreamReader","(","new","FileInputStream","(","versionFile",")",",","UTF_8",")",")",")","{","\n","return","parse","(","reader",")",".","build","(",")",";","\n","}","\n"],"docstring_tokens":["Returns","cookie","from","the","given","directory"]}
{"code_tokens":["\n","public","static","Builder","newBuilder","(","Cookie","oldCookie",")","{","\n","return","new","Builder","(","oldCookie",".","layoutVersion,","oldCookie",".","bookieId,","oldCookie",".","journalDirs,","oldCookie",".","ledgerDirs,\n","oldCookie",".","instanceId",")",";","\n"],"docstring_tokens":["Returns","Cookie","builder","with","the","copy","of","given","oldCookie"]}
{"code_tokens":["\n","public","ByteBufList","computeDigestAndPackageForSending","(","long","entryId,","long","lastAddConfirmed,","long","length,\n","ByteBuf","data",")","{","\n","ByteBuf","headersBuffer",";","\n","if","(","this",".","useV2Protocol",")","{","\n","headersBuffer","=","allocator",".","buffer","(","METADATA_LENGTH","+","macCodeLength",")",";","\n","}","else","{","\n","headersBuffer","=","Unpooled",".","buffer","(","METADATA_LENGTH","+","macCodeLength",")",";","\n","}","\n","headersBuffer",".","writeLong","(","ledgerId",")",";","\n","headersBuffer",".","writeLong","(","entryId",")",";","\n","headersBuffer",".","writeLong","(","lastAddConfirmed",")",";","\n","headersBuffer",".","writeLong","(","length",")",";","\n\n","update","(","headersBuffer",")",";","\n\n","//","don't","unwrap","slices\n","final","ByteBuf","unwrapped","=","data",".","unwrap","(",")","!=","null","&&","data",".","unwrap","(",")","instanceof","CompositeByteBuf\n","?","data",".","unwrap","(",")",":","data",";","\n","ReferenceCountUtil",".","retain","(","unwrapped",")",";","\n","ReferenceCountUtil",".","release","(","data",")",";","\n\n","if","(","unwrapped","instanceof","CompositeByteBuf",")","{","\n","(","(","CompositeByteBuf",")","unwrapped",")",".","forEach","(","this::update",")",";","\n","}","else","{","\n","update","(","unwrapped",")",";","\n","}","\n","populateValueAndReset","(","headersBuffer",")",";","\n\n","return","ByteBufList",".","get","(","headersBuffer,","unwrapped",")",";","\n"],"docstring_tokens":["Computes","the","digest","for","an","entry","and","put","bytes","together","for","sending"]}
{"code_tokens":["\n","public","ByteBuf","verifyDigestAndReturnData","(","long","entryId,","ByteBuf","dataReceived",")","\n","throws","BKDigestMatchException","{","\n","verifyDigest","(","entryId,","dataReceived",")",";","\n","dataReceived",".","readerIndex","(","METADATA_LENGTH","+","macCodeLength",")",";","\n","return","dataReceived",";","\n"],"docstring_tokens":["Verify","that","the","digest","matches","and","returns","the","data","in","the","entry"]}
{"code_tokens":["\n","public","static","CompletableFuture<LogRecordWithDLSN>","asyncReadLastRecord","(","\n","final","String","streamName,\n","final","LogSegmentMetadata","l,\n","final","boolean","fence,\n","final","boolean","includeControl,\n","final","boolean","includeEndOfStream,\n","final","int","scanStartBatchSize,\n","final","int","scanMaxBatchSize,\n","final","AtomicInteger","numRecordsScanned,\n","final","ExecutorService","executorService,\n","final","LogSegmentEntryStore","entryStore",")","{","\n","final","LogRecordSelector","selector","=","new","LastRecordSelector","(",")",";","\n","return","asyncReadRecord","(","streamName,","l,","fence,","includeControl,","includeEndOfStream,","scanStartBatchSize,\n","scanMaxBatchSize,","numRecordsScanned,","executorService,","entryStore,\n","selector,","true","/*","backward","*/,","0L",")",";","\n"],"docstring_tokens":["Read","last","record","from","a","log","segment"]}
{"code_tokens":["\n","public","static","CompletableFuture<LogRecordWithDLSN>","asyncReadFirstUserRecord","(","\n","final","String","streamName,\n","final","LogSegmentMetadata","l,\n","final","int","scanStartBatchSize,\n","final","int","scanMaxBatchSize,\n","final","AtomicInteger","numRecordsScanned,\n","final","ExecutorService","executorService,\n","final","LogSegmentEntryStore","entryStore,\n","final","DLSN","dlsn",")","{","\n","long","startEntryId","=","0L",";","\n","if","(","l",".","getLogSegmentSequenceNumber","(",")","==","dlsn",".","getLogSegmentSequenceNo","(",")",")","{","\n","startEntryId","=","dlsn",".","getEntryId","(",")",";","\n","}","\n","final","LogRecordSelector","selector","=","new","FirstDLSNNotLessThanSelector","(","dlsn",")",";","\n","return","asyncReadRecord","(","streamName,","l,","false,","false,","false,","scanStartBatchSize,\n","scanMaxBatchSize,","numRecordsScanned,","executorService,","entryStore,\n","selector,","false","/*","backward","*/,","startEntryId",")",";","\n"],"docstring_tokens":["Read","first","record","from","a","log","segment","with","a","DLSN","larger","than","that","given"]}
{"code_tokens":["\n","private","static","CompletableFuture<LogRecordWithDLSN>","asyncReadRecordFromEntries","(","\n","final","String","streamName,\n","final","LogSegmentRandomAccessEntryReader","reader,\n","final","LogSegmentMetadata","metadata,\n","final","ExecutorService","executorService,\n","final","ScanContext","context,\n","final","LogRecordSelector","selector",")","{","\n","final","CompletableFuture<LogRecordWithDLSN>","promise","=","new","CompletableFuture<LogRecordWithDLSN>","(",")",";","\n","final","long","startEntryId","=","context",".","curStartEntryId",".","get","(",")",";","\n","final","long","endEntryId","=","context",".","curEndEntryId",".","get","(",")",";","\n","if","(","LOG",".","isDebugEnabled","(",")",")","{","\n","LOG",".","debug","(","\"","{","}","reading","entries","[","{","}","-","{","}","]","from","{","}",".","\",\n","streamName,","startEntryId,","endEntryId,","metadata",")",";","\n","}","\n","FutureEventListener<List<Entry",".","Reader>>","readEntriesListener","=\n","new","FutureEventListener<List<Entry",".","Reader>>","(",")","{","\n","@Override\n","public","void","onSuccess","(","final","List<Entry",".","Reader>","entries",")","{","\n","if","(","LOG",".","isDebugEnabled","(",")",")","{","\n","LOG",".","debug","(","\"","{","}","finished","reading","entries","[","{","}","-","{","}","]","from","{","}","\",\n","streamName,","startEntryId,","endEntryId,","metadata",")",";","\n","}","\n","for","(","Entry",".","Reader","entry",":","entries",")","{","\n","try","{","\n","visitEntryRecords","(","entry,","context,","selector",")",";","\n","}","catch","(","IOException","ioe",")","{","\n","//","exception","is","only","thrown","due","to","bad","ledger","entry,","so","it","might","be","corrupted\n","//","we","shouldn't","do","anything","beyond","this","point",".","throw","the","exception","to","application\n","promise",".","completeExceptionally","(","ioe",")",";","\n","return",";","\n","}","\n","}","\n\n","LogRecordWithDLSN","record","=","selector",".","result","(",")",";","\n","if","(","LOG",".","isDebugEnabled","(",")",")","{","\n","LOG",".","debug","(","\"","{","}","got","record","from","entries","[","{","}","-","{","}","]","of","{","}",":","{","}","\",\n","streamName,","startEntryId,","endEntryId,","metadata,","record",")",";","\n","}","\n","promise",".","complete","(","record",")",";","\n","}","\n\n","@Override\n","public","void","onFailure","(","final","Throwable","cause",")","{","\n","promise",".","completeExceptionally","(","cause",")",";","\n","}","\n","}",";","\n","reader",".","readEntries","(","startEntryId,","endEntryId",")","\n",".","whenCompleteAsync","(","readEntriesListener,","executorService",")",";","\n","return","promise",";","\n"],"docstring_tokens":["Read","record","from","a","given","range","of","log","segment","entries"]}
{"code_tokens":["\n","private","static","void","visitEntryRecords","(","\n","Entry",".","Reader","entry,\n","ScanContext","context,\n","LogRecordSelector","selector",")","throws","IOException","{","\n","LogRecordWithDLSN","nextRecord","=","entry",".","nextRecord","(",")",";","\n","while","(","nextRecord","!=","null",")","{","\n","LogRecordWithDLSN","record","=","nextRecord",";","\n","nextRecord","=","entry",".","nextRecord","(",")",";","\n","context",".","numRecordsScanned",".","incrementAndGet","(",")",";","\n","if","(","!context",".","includeControl","&&","record",".","isControl","(",")",")","{","\n","continue",";","\n","}","\n","if","(","!context",".","includeEndOfStream","&&","record",".","isEndOfStream","(",")",")","{","\n","continue",";","\n","}","\n","selector",".","process","(","record",")",";","\n","}","\n"],"docstring_tokens":["Process","each","record","using","LogRecordSelector"]}
{"code_tokens":["\n","public","static","boolean","supportsLogSegmentSequenceNo","(","int","version",")","{","\n","return","version",">=","LogSegmentMetadataVersion",".","VERSION_V2_LEDGER_SEQNO",".","value",";","\n"],"docstring_tokens":["Whether","the","provided","version","supports","log","segment","sequence","number"]}
{"code_tokens":["\n","void","recordReadErrorOnBookie","(","int","bookieIndex",")","{","\n","//","If","sticky","bookie","reads","are","enabled,","switch","the","sticky","bookie","to","the\n","//","next","bookie","in","the","ensemble","so","that","we","avoid","to","keep","reading","from","the\n","//","same","failed","bookie\n","if","(","stickyBookieIndex","!=","STICKY_READ_BOOKIE_INDEX_UNSET",")","{","\n","//","This","will","be","idempotent","when","we","have","multiple","read","errors","on","the\n","//","same","bookie",".","The","net","result","is","that","we","just","go","to","the","next","bookie\n","stickyBookieIndex","=","clientCtx",".","getPlacementPolicy","(",")",".","getStickyReadBookieIndex","(","getLedgerMetadata","(",")",",\n","Optional",".","of","(","bookieIndex",")",")",";","\n","}","\n"],"docstring_tokens":["Notify","the","LedgerHandle","that","a","read","operation","was","failed","on","a","particular","bookie"]}
{"code_tokens":["\n","@Override\n","public","long","getId","(",")","{","\n","return","ledgerId",";","\n"],"docstring_tokens":["Get","the","id","of","the","current","ledger"]}
{"code_tokens":["\n","public","synchronized","long","getNumBookies","(",")","{","\n","Map<Long,","?","extends","List<BookieId>>","m","=","getLedgerMetadata","(",")",".","getAllEnsembles","(",")",";","\n","Set<BookieId>","s","=","Sets",".","newHashSet","(",")",";","\n","for","(","List<BookieId>","aList",":","m",".","values","(",")",")","{","\n","s",".","addAll","(","aList",")",";","\n","}","\n","return","s",".","size","(",")",";","\n"],"docstring_tokens":["Get","the","count","of","unique","bookies","that","own","part","of","this","ledger","by","going","over","all","the","fragments","of","the","ledger"]}
{"code_tokens":["\n","synchronized","long","addToLength","(","long","delta",")","{","\n","this",".","length","+=","delta",";","\n","return","this",".","length",";","\n"],"docstring_tokens":["Add","to","the","length","of","the","ledger","in","bytes"]}
{"code_tokens":["\n","@Override\n","public","synchronized","long","getLength","(",")","{","\n","return","this",".","length",";","\n"],"docstring_tokens":["Returns","the","length","of","the","ledger","in","bytes"]}
{"code_tokens":["\n","public","void","start","(",")","throws","IOException","{","\n","//","no-op\n"],"docstring_tokens":["Start","the","feature","provider"]}
{"code_tokens":["\n","public","void","stop","(",")","{","\n","//","no-op\n"],"docstring_tokens":["Stop","the","feature","provider"]}
{"code_tokens":["\n","boolean","updatePage","(","LedgerEntryPage","lep",")","throws","IOException","{","\n","if","(","!lep",".","isClean","(",")",")","{","\n","throw","new","IOException","(","\"Trying","to","update","a","dirty","page\"",")",";","\n","}","\n","CachedFileInfo","fi","=","null",";","\n","try","{","\n","fi","=","getFileInfo","(","lep",".","getLedger","(",")",",","null",")",";","\n","long","pos","=","lep",".","getFirstEntryPosition","(",")",";","\n","if","(","pos",">=","fi",".","size","(",")",")","{","\n","lep",".","zeroPage","(",")",";","\n","return","true",";","\n","}","else","{","\n","lep",".","readPage","(","fi",")",";","\n","return","false",";","\n","}","\n","}","finally","{","\n","if","(","fi","!=","null",")","{","\n","fi",".","release","(",")",";","\n","}","\n","}","\n"],"docstring_tokens":["Update","the","ledger","entry","page"]}
{"code_tokens":["\n","String","completedLedgerZNode","(","long","firstTxId,","long","lastTxId,","long","logSegmentSeqNo",")","{","\n","return","String",".","format","(","\"%s/%s\",","logMetadata",".","getLogSegmentsPath","(",")",",\n","completedLedgerZNodeName","(","firstTxId,","lastTxId,","logSegmentSeqNo",")",")",";","\n"],"docstring_tokens":["Get","the","znode","path","for","a","finalize","ledger"]}
{"code_tokens":["\n","String","inprogressZNodeName","(","long","logSegmentId,","long","firstTxId,","long","logSegmentSeqNo",")","{","\n","if","(","DistributedLogConstants",".","LOGSEGMENT_NAME_VERSION","==","conf",".","getLogSegmentNameVersion","(",")",")","{","\n","//","Lots","of","the","problems","are","introduced","due","to","different","inprogress","names","with","same","ledger","sequence","number",".","\n","return","String",".","format","(","\"%s_%018d\",","DistributedLogConstants",".","INPROGRESS_LOGSEGMENT_PREFIX,","logSegmentSeqNo",")",";","\n","}","else","{","\n","return","DistributedLogConstants",".","INPROGRESS_LOGSEGMENT_PREFIX","+","\"_\"","+","Long",".","toString","(","firstTxId,","16",")",";","\n","}","\n"],"docstring_tokens":["Get","the","name","of","the","inprogress","znode"]}
{"code_tokens":["\n","String","inprogressZNode","(","long","logSegmentId,","long","firstTxId,","long","logSegmentSeqNo",")","{","\n","return","logMetadata",".","getLogSegmentsPath","(",")","+","\"/\"","+","inprogressZNodeName","(","logSegmentId,","firstTxId,","logSegmentSeqNo",")",";","\n"],"docstring_tokens":["Get","the","znode","path","for","the","inprogressZNode"]}
{"code_tokens":["\n","public","static","RetryPolicy","infiniteRetry","(","long","baseBackoffTimeMs,","long","maxBackoffTimeMs",")","{","\n","return","new","BoundExponentialBackoffRetryPolicy","(","baseBackoffTimeMs,","maxBackoffTimeMs,","Integer",".","MAX_VALUE",")",";","\n"],"docstring_tokens":["Create","an","infinite","retry","policy","with","backoff","time","between","baseBackOffTimeMs","and","maxBackoffTimeMs"]}
{"code_tokens":["\n","int","writeToByteBuffer","(","ByteBuffer","dst",")","{","\n","if","(","dst",".","remaining","(",")","<","getLength","(",")",")","{","\n","throw","new","IllegalArgumentException","(","\"Buffer","size","\"","+","dst",".","remaining","(",")","+","\"","<","\"","+","getLength","(",")",")",";","\n","}","\n\n","dst",".","put","(","getBuffer","(",")",",","getOffset","(",")",",","getLength","(",")",")",";","\n","return","getLength","(",")",";","\n"],"docstring_tokens":["Write","EntryKeyValue","blob","into","the","provided","byte","buffer"]}
{"code_tokens":["\n","public","static","Stream<Long>","constant","(","long","startMs",")","{","\n","return","Stream",".","iterate","(","startMs,","lastMs","->","startMs",")",";","\n"],"docstring_tokens":["Create","a","stream","with","constant","backoffs"]}
{"code_tokens":["\n","public","static","Stream<Long>","exponential","(","long","startMs,\n","int","multiplier,\n","long","maxMs",")","{","\n","return","Stream",".","iterate","(","startMs,","lastMs","->","Math",".","min","(","lastMs","*","multiplier,","maxMs",")",")",";","\n"],"docstring_tokens":["Create","a","stream","with","exponential","backoffs"]}
{"code_tokens":["\n","public","static","Stream<Long>","exponentialJittered","(","long","startMs,\n","long","maxMs",")","{","\n","final","long","startNanos","=","TimeUnit",".","NANOSECONDS",".","convert","(","startMs,","TimeUnit",".","MILLISECONDS",")",";","\n","final","long","maxNanos","=","TimeUnit",".","NANOSECONDS",".","convert","(","maxMs,","TimeUnit",".","MILLISECONDS",")",";","\n","final","AtomicLong","attempts","=","new","AtomicLong","(","1",")",";","\n","return","Stream",".","iterate","(","startMs,","lastMs","->","{","\n","long","shift","=","Math",".","min","(","attempts",".","get","(",")",",","MaxBitShift",")",";","\n","long","maxBackoffNanos","=","Math",".","min","(","maxNanos,","startNanos","*","(","1L","<<","shift",")",")",";","\n","long","randomMs","=","TimeUnit",".","MILLISECONDS",".","convert","(","\n","ThreadLocalRandom",".","current","(",")",".","nextLong","(","startNanos,","maxBackoffNanos",")",",\n","TimeUnit",".","NANOSECONDS",")",";","\n","attempts",".","incrementAndGet","(",")",";","\n","return","randomMs",";","\n","}",")",";","\n"],"docstring_tokens":["Create","a","stream","of","exponential","backoffs","with","jitters"]}
{"code_tokens":["\n","public","static","Collection<ServerServiceDefinition>","create","(","RangeStoreService","store",")","{","\n","return","Lists",".","newArrayList","(","\n","new","GrpcRootRangeService","(","store",")",".","bindService","(",")",",\n","new","GrpcMetaRangeService","(","store",")",".","bindService","(",")",",\n","new","GrpcTableService","(","store",")",".","bindService","(",")",")",";","\n"],"docstring_tokens":["Create","the","grpc","services","of","a","range","store"]}
{"code_tokens":["\n","protected","CompletableFuture<Void>","closeNoThrow","(",")","{","\n","CompletableFuture<Void>","closeFuture",";","\n","synchronized","(","this",")","{","\n","if","(","null","!=","closePromise",")","{","\n","return","closePromise",";","\n","}","\n","closeFuture","=","closePromise","=","new","CompletableFuture<Void>","(",")",";","\n","}","\n","cancelTruncation","(",")",";","\n","FutureUtils",".","proxyTo","(","\n","Utils",".","closeSequence","(","bkDistributedLogManager",".","getScheduler","(",")",",\n","true,","/**","ignore","close","errors","**/\n","getCachedLogWriter","(",")",",\n","getAllocatedLogWriter","(",")",",\n","getCachedWriteHandler","(",")","\n",")",",\n","closeFuture",")",";","\n","return","closeFuture",";","\n"],"docstring_tokens":["Close","the","writer","and","release","all","the","underlying","resources"]}
{"code_tokens":["\n","@Override\n","public","ScheduledFuture<?>","initiateSpeculativeRequest","(","final","ScheduledExecutorService","scheduler,\n","final","SpeculativeRequestExecutor","requestExecutor",")","{","\n","return","scheduleSpeculativeRead","(","scheduler,","requestExecutor,","firstSpeculativeRequestTimeout",")",";","\n"],"docstring_tokens":["Initialize","the","speculative","request","execution","policy"]}
{"code_tokens":["\n","@Override\n","public","ConfigurationException","getCause","(",")","{","\n","return","(","ConfigurationException",")","super",".","getCause","(",")",";","\n"],"docstring_tokens":["Returns","the","cause","of","this","exception"]}
{"code_tokens":["\n","synchronized","Optional<Long>","getFreeDiskSpace","(","BookieId","bookie",")","{","\n","BookieInfo","bookieInfo","=","bookieInfoMap",".","getInfo","(","bookie",")",";","\n","if","(","bookieInfo","!=","null",")","{","\n","return","Optional",".","of","(","bookieInfo",".","getFreeDiskSpace","(",")",")",";","\n","}","else","{","\n","return","Optional",".","empty","(",")",";","\n","}","\n"],"docstring_tokens":["Method","to","allow","tests","to","block","until","bookie","info","is","available"]}
{"code_tokens":["\n","@VisibleForTesting\n","LedgerRecoveryOp","setEntryListener","(","ReadEntryListener","entryListener",")","{","\n","this",".","entryListener","=","entryListener",";","\n","return","this",";","\n"],"docstring_tokens":["Set","an","entry","listener","to","listen","on","individual","recovery","reads","during","recovery","procedure"]}
{"code_tokens":["\n","synchronized","void","writeToDirectories","(","List<File>","directories",")","{","\n","boolean","success","=","false",";","\n","for","(","File","dir",":","directories",")","{","\n","try","{","\n","File","statusFile","=","new","File","(","dir,","BOOKIE_STATUS_FILENAME",")",";","\n","writeToFile","(","statusFile,","toString","(",")",")",";","\n","success","=","true",";","\n","}","catch","(","IOException","e",")","{","\n","LOG",".","warn","(","\"IOException","while","trying","to","write","bookie","status","to","directory","{","}",".","\"\n","+","\"","This","is","fine","if","not","all","directories","are","failed",".","\",","dir",")",";","\n","}","\n","}","\n","if","(","success",")","{","\n","LOG",".","info","(","\"Successfully","persist","bookie","status","{","}","\",","this",".","bookieMode",")",";","\n","}","else","{","\n","LOG",".","warn","(","\"Failed","to","persist","bookie","status","{","}","\",","this",".","bookieMode",")",";","\n","}","\n"],"docstring_tokens":["Write","bookie","status","to","multiple","directories","in","best","effort"]}
{"code_tokens":["\n","private","BookieStatus","readFromFile","(","File","file",")","\n","throws","IOException,","IllegalArgumentException","{","\n","if","(","!file",".","exists","(",")",")","{","\n","return","null",";","\n","}","\n\n","try","(","BufferedReader","reader","=","new","BufferedReader","(","\n","new","InputStreamReader","(","new","FileInputStream","(","file",")",",","UTF_8",")",")",")","{","\n","return","parse","(","reader",")",";","\n","}","\n"],"docstring_tokens":["Function","to","read","the","bookie","status","from","a","single","file"]}
{"code_tokens":["\n","public","BookieStatus","parse","(","BufferedReader","reader",")","\n","throws","IOException,","IllegalArgumentException","{","\n","BookieStatus","status","=","new","BookieStatus","(",")",";","\n","String","line","=","reader",".","readLine","(",")",";","\n","if","(","line","==","null","||","line",".","trim","(",")",".","isEmpty","(",")",")","{","\n","LOG",".","debug","(","\"Empty","line","when","parsing","bookie","status\"",")",";","\n","return","null",";","\n","}","\n","String[]","parts","=","line",".","split","(","\",\"",")",";","\n","if","(","parts",".","length","==","0",")","{","\n","LOG",".","debug","(","\"Error","in","parsing","bookie","status:","{","}","\",","line",")",";","\n","return","null",";","\n","}","\n","synchronized","(","status",")","{","\n","status",".","layoutVersion","=","Integer",".","parseInt","(","parts[0]",".","trim","(",")",")",";","\n","if","(","status",".","layoutVersion","==","1","&&","parts",".","length","==","3",")","{","\n","status",".","bookieMode","=","BookieMode",".","valueOf","(","parts[1]",")",";","\n","status",".","lastUpdateTime","=","Long",".","parseLong","(","parts[2]",".","trim","(",")",")",";","\n","return","status",";","\n","}","\n","}","\n","return","null",";","\n\n"],"docstring_tokens":["Parse","the","bookie","status","object","using","appropriate","layout","version"]}
{"code_tokens":["\n","public","byte[]","serialize","(",")","throws","IOException","{","\n","String","s","=\n","new","StringBuilder","(",")",".","append","(","layoutFormatVersion",")",".","append","(","lSplitter",")","\n",".","append","(","managerFactoryClass",")",".","append","(","splitter",")",".","append","(","managerVersion",")",".","toString","(",")",";","\n\n","if","(","log",".","isDebugEnabled","(",")",")","{","\n","log",".","debug","(","\"Serialized","layout","info:","{","}","\",","s",")",";","\n","}","\n","return","s",".","getBytes","(","StandardCharsets",".","UTF_8",")",";","\n"],"docstring_tokens":["Generates","a","byte","array","based","on","the","LedgerLayout","object"]}
{"code_tokens":["\n","public","static","LedgerLayout","parseLayout","(","byte[]","bytes",")","throws","IOException","{","\n","String","layout","=","new","String","(","bytes,","StandardCharsets",".","UTF_8",")",";","\n","if","(","log",".","isDebugEnabled","(",")",")","{","\n","log",".","debug","(","\"Parsing","Layout:","{","}","\",","layout",")",";","\n","}","\n\n","String[]","lines","=","layout",".","split","(","lSplitter",")",";","\n\n","try","{","\n","int","layoutFormatVersion","=","Integer",".","parseInt","(","lines[0]",")",";","\n","if","(","LAYOUT_FORMAT_VERSION","<","layoutFormatVersion","||","LAYOUT_MIN_COMPAT_VERSION",">","layoutFormatVersion",")","{","\n","throw","new","IOException","(","\"Metadata","version","not","compatible",".","Expected","\"\n","+","LAYOUT_FORMAT_VERSION","+","\",","but","got","\"","+","layoutFormatVersion",")",";","\n","}","\n\n","if","(","lines",".","length","<","2",")","{","\n","throw","new","IOException","(","\"Ledger","manager","and","its","version","absent","from","layout:","\"","+","layout",")",";","\n","}","\n\n","String[]","parts","=","lines[1]",".","split","(","splitter",")",";","\n","if","(","parts",".","length","!=","2",")","{","\n","throw","new","IOException","(","\"Invalid","Ledger","Manager","defined","in","layout",":","\"","+","layout",")",";","\n","}","\n","//","ledger","manager","factory","class\n","String","managerFactoryCls","=","parts[0]",";","\n","//","ledger","manager","version\n","int","managerVersion","=","Integer",".","parseInt","(","parts[1]",")",";","\n","return","new","LedgerLayout","(","managerFactoryCls,","managerVersion,","layoutFormatVersion",")",";","\n","}","catch","(","NumberFormatException","e",")","{","\n","throw","new","IOException","(","\"Could","not","parse","layout","'\"","+","layout","+","\"'\",","e",")",";","\n","}","\n"],"docstring_tokens":["Parses","a","given","byte","array","and","transforms","into","a","LedgerLayout","object"]}
{"code_tokens":["\n","public","void","loadConf","(","URL","confURL",")","throws","ConfigurationException","{","\n","Configuration","loadedConf","=","new","PropertiesConfiguration","(","confURL",")",";","\n","loadConf","(","loadedConf",")",";","\n"],"docstring_tokens":["Load","configuration","from","a","given","confURL"]}
{"code_tokens":["\n","public","HttpWaitStrategy","forStatusCode","(","int","statusCode",")","{","\n","this",".","statusCode","=","statusCode",";","\n","return","this",";","\n"],"docstring_tokens":["Waits","for","the","given","status","code"]}
{"code_tokens":["\n","public","HttpWaitStrategy","forPath","(","String","path",")","{","\n","this",".","path","=","path",";","\n","return","this",";","\n"],"docstring_tokens":["Waits","for","the","given","path"]}
{"code_tokens":["\n","public","HttpWaitStrategy","forPort","(","int","port",")","{","\n","this",".","port","=","port",";","\n","return","this",";","\n"],"docstring_tokens":["Wait","for","the","given","port"]}
{"code_tokens":["\n","public","HttpWaitStrategy","usingTls","(",")","{","\n","this",".","tlsEnabled","=","true",";","\n","return","this",";","\n"],"docstring_tokens":["Indicates","that","the","status","check","should","use","HTTPS"]}
{"code_tokens":["\n","public","HttpWaitStrategy","withBasicCredentials","(","String","username,","String","password",")","{","\n","this",".","username","=","username",";","\n","this",".","password","=","password",";","\n","return","this",";","\n"],"docstring_tokens":["Authenticate","with","HTTP","Basic","Authorization","credentials"]}
{"code_tokens":["\n","public","HttpWaitStrategy","forResponsePredicate","(","Predicate<String>","responsePredicate",")","{","\n","this",".","responsePredicate","=","responsePredicate",";","\n","return","this",";","\n"],"docstring_tokens":["Waits","for","the","response","to","pass","the","given","predicate"]}
{"code_tokens":["\n","private","URI","buildLivenessUri","(","int","livenessCheckPort",")","{","\n","final","String","scheme","=","(","tlsEnabled","?","\"https\"",":","\"http\"",")","+","\"://\"",";","\n","final","String","host","=","waitStrategyTarget",".","getContainerIpAddress","(",")",";","\n","final","String","portSuffix",";","\n","if","(","(","tlsEnabled","&&","443","==","livenessCheckPort",")","||","(","!tlsEnabled","&&","80","==","livenessCheckPort",")",")","{","\n","portSuffix","=","\"\"",";","\n","}","else","{","\n","portSuffix","=","\":\"","+","String",".","valueOf","(","livenessCheckPort",")",";","\n","}","\n","return","URI",".","create","(","scheme","+","host","+","portSuffix","+","path",")",";","\n"],"docstring_tokens":["Build","the","URI","on","which","to","check","if","the","container","is","ready"]}
{"code_tokens":["\n","@Override\n","public","String","toString","(",")","{","\n","return","id",";","\n"],"docstring_tokens":["Returns","the","serialized","version","of","this","object"]}
{"code_tokens":["\n","public","static","BookieId","parse","(","String","serialized",")","{","\n","return","new","BookieId","(","serialized",")",";","\n"],"docstring_tokens":["Parses","the","given","serialized","representation","of","a","BookieId"]}
{"code_tokens":["\n","public","static","boolean","hasCache","(",")","{","\n","return","HASH_CACHE","!=","null",";","\n"],"docstring_tokens":["Returns","whether","a","hash","function","cache","is","available"]}
{"code_tokens":["\n","public","static","HashCache","getCache","(",")","{","\n","if","(","HASH_CACHE","==","null",")","\n","throw","new","UnsupportedOperationException","(",")",";","\n","return","HASH_CACHE",";","\n"],"docstring_tokens":["Returns","the","single","hash","function","cache"]}
{"code_tokens":["\n","public","static","StorageClientBuilder","newBuilder","(",")","{","\n","return","new","StorageClientBuilder","(",")",";","\n"],"docstring_tokens":["Create","a","builder","to","build","StorageClient","clients"]}
{"code_tokens":["\n","public","StorageClientBuilder","withSettings","(","StorageClientSettings","settings",")","{","\n","this",".","settings","=","settings",";","\n","return","this",";","\n"],"docstring_tokens":["Configure","the","client","with","StorageClientSettings"]}
{"code_tokens":["\n","public","StorageClient","build","(",")","{","\n","checkNotNull","(","settings,","\"Stream","settings","is","null\"",")",";","\n","checkArgument","(","validateNamespaceName","(","namespaceName",")",",","\"Namespace","name","'\"","+","namespaceName","+","\"'is","invalid\"",")",";","\n\n","if","(","settings",".","enableServerSideRouting","(",")",")","{","\n","return","new","SimpleStorageClientImpl","(","namespaceName,","settings",")",";","\n","}","else","{","\n","return","new","StorageClientImpl","(","\n","namespaceName,\n","settings,\n","ClientResources",".","create","(",")",")",";","\n","}","\n"],"docstring_tokens":["Build","a","StorageClient","client"]}
{"code_tokens":["\n","public","StorageAdminClient","buildAdmin","(",")","{","\n","checkNotNull","(","settings,","\"Storage","client","settings","is","null\"",")",";","\n\n","if","(","settings",".","enableServerSideRouting","(",")",")","{","\n","return","new","SimpleStorageAdminClientImpl","(","settings",")",";","\n","}","else","{","\n","return","new","StorageAdminClientImpl","(","settings,","ClientResources",".","create","(",")",")",";","\n","}","\n"],"docstring_tokens":["Build","a","StorageAdminClient","client"]}
{"code_tokens":["\n","public","static","Object","codeLogger","(","int","code",")","{","\n","return","logMessagePool",".","get","(","code",")",";","\n"],"docstring_tokens":["Returns","a","lazy","error","code","formatter","suitable","to","pass","to","log","functions"]}
{"code_tokens":["\n","public","static","void","main","(","String[]","args",")","{","\n","Main",".","main","(","args",")",";","\n"],"docstring_tokens":["Legacy","Method","to","run","bookie","server"]}
{"code_tokens":["\n","public","static","ServiceURI","create","(","String","uriStr",")","{","\n","checkNotNull","(","uriStr,","\"service","uri","string","is","null\"",")",";","\n\n","//","a","service","uri","first","should","be","a","valid","java",".","net",".","URI\n","URI","uri","=","URI",".","create","(","uriStr",")",";","\n\n","return","create","(","uri",")",";","\n"],"docstring_tokens":["Create","a","service","uri","instance","from","a","uri","string"]}
{"code_tokens":["\n","public","static","ServiceURI","create","(","URI","uri",")","{","\n","checkNotNull","(","uri,","\"service","uri","instance","is","null\"",")",";","\n\n","String","serviceName",";","\n","String[]","serviceInfos","=","new","String[0]",";","\n","String","scheme","=","uri",".","getScheme","(",")",";","\n","if","(","null","!=","scheme",")","{","\n","scheme","=","scheme",".","toLowerCase","(",")",";","\n","final","String","serviceSep",";","\n","if","(","scheme",".","startsWith","(","SERVICE_DLOG",")",")","{","\n","serviceSep","=","SERVICE_DLOG_SEP",";","\n","}","else","{","\n","serviceSep","=","SERVICE_SEP",";","\n","}","\n","String[]","schemeParts","=","StringUtils",".","split","(","scheme,","serviceSep",")",";","\n","serviceName","=","schemeParts[0]",";","\n","serviceInfos","=","new","String[schemeParts",".","length","-","1]",";","\n","System",".","arraycopy","(","schemeParts,","1,","serviceInfos,","0,","serviceInfos",".","length",")",";","\n","}","else","{","\n","serviceName","=","null",";","\n","}","\n\n","String","userAndHostInformation","=","uri",".","getAuthority","(",")",";","\n","checkArgument","(","!Strings",".","isNullOrEmpty","(","userAndHostInformation",")",",\n","\"authority","component","is","missing","in","service","uri",":","\"","+","uri",")",";","\n\n","String","serviceUser",";","\n","List<String>","serviceHosts",";","\n","int","atIndex","=","userAndHostInformation",".","indexOf","(","'@'",")",";","\n","Splitter","splitter","=","Splitter",".","on","(","CharMatcher",".","anyOf","(","\",",";","\"",")",")",";","\n","if","(","atIndex",">","0",")","{","\n","serviceUser","=","userAndHostInformation",".","substring","(","0,","atIndex",")",";","\n","serviceHosts","=","splitter",".","splitToList","(","userAndHostInformation",".","substring","(","atIndex","+","1",")",")",";","\n","}","else","{","\n","serviceUser","=","null",";","\n","serviceHosts","=","splitter",".","splitToList","(","userAndHostInformation",")",";","\n","}","\n","serviceHosts","=","serviceHosts\n",".","stream","(",")","\n",".","map","(","host","->","validateHostName","(","serviceName,","host",")",")","\n",".","collect","(","Collectors",".","toList","(",")",")",";","\n\n","String","servicePath","=","uri",".","getPath","(",")",";","\n","checkArgument","(","null","!=","servicePath,\n","\"service","path","component","is","missing","in","service","uri",":","\"","+","uri",")",";","\n\n","return","new","ServiceURI","(","\n","serviceName,\n","serviceInfos,\n","serviceUser,\n","serviceHosts",".","toArray","(","new","String[serviceHosts",".","size","(",")","]",")",",\n","servicePath,\n","uri",")",";","\n"],"docstring_tokens":["Create","a","service","uri","instance","from","a","URI","instance"]}
{"code_tokens":["\n","public","static","Provider","getBCProviderFromClassPath","(",")","throws","Exception","{","\n","Class","clazz",";","\n","try","{","\n","clazz","=","Class",".","forName","(","BC_FIPS_PROVIDER_CLASS",")",";","\n","}","catch","(","ClassNotFoundException","cnf",")","{","\n","if","(","log",".","isDebugEnabled","(",")",")","{","\n","log",".","debug","(","\"Not","able","to","get","Bouncy","Castle","provider:","{","}",",","try","to","get","FIPS","provider","{","}","\",\n","BC_NON_FIPS_PROVIDER_CLASS,","BC_FIPS_PROVIDER_CLASS",")",";","\n","}","\n","//","attempt","to","use","the","NON_FIPS","provider",".","\n","clazz","=","Class",".","forName","(","BC_NON_FIPS_PROVIDER_CLASS",")",";","\n\n","}","\n\n","@SuppressWarnings","(","\"unchecked\"",")","\n","Provider","provider","=","(","Provider",")","clazz",".","getDeclaredConstructor","(",")",".","newInstance","(",")",";","\n","Security",".","addProvider","(","provider",")",";","\n","if","(","log",".","isDebugEnabled","(",")",")","{","\n","log",".","debug","(","\"Found","and","Instantiated","Bouncy","Castle","provider","in","classpath","{","}","\",","provider",".","getName","(",")",")",";","\n","}","\n","return","provider",";","\n"],"docstring_tokens":["Get","Bouncy","Castle","provider","from","classpath,","and","call","Security.addProvider"]}
{"code_tokens":["\n","public","int","bitWidth","(",")","{","\n","return","bitWidth",";","\n"],"docstring_tokens":["Returns","the","width","in","bits","of","the","CRC","function"]}
{"code_tokens":["\n","public","long","initial","(",")","{","\n","return","initial",";","\n"],"docstring_tokens":["Returns","the","initial","value","of","the","CRC","register"]}
{"code_tokens":["\n","public","boolean","match","(","int","bitWidth,","long","polynomial,","long","initial,","long","xorOut,","boolean","reflected",")","{","\n","return","bitWidth","==","this",".","bitWidth","&&","polynomial","==","this",".","polynomial","&&\n","initial","==","this",".","initial","&&","xorOut","==","this",".","xorOut","&&","reflected","==","this",".","reflected",";","\n"],"docstring_tokens":["Returns","whether","this","object","matches","the","given","CRC","parameters"]}
{"code_tokens":["\n","public","void","asyncIsClosed","(","long","lId,","final","IsClosedCallback","cb,","final","Object","ctx",")","{","\n","ledgerManager",".","readLedgerMetadata","(","lId",")",".","whenComplete","(","(","metadata,","exception",")","->","{","\n","if","(","exception","==","null",")","{","\n","cb",".","isClosedComplete","(","BKException",".","Code",".","OK,","metadata",".","getValue","(",")",".","isClosed","(",")",",","ctx",")",";","\n","}","else","{","\n","cb",".","isClosedComplete","(","BKException",".","getExceptionCode","(","exception",")",",","false,","ctx",")",";","\n","}","\n","}",")",";","\n"],"docstring_tokens":["Check","asynchronously","whether","the","ledger","with","identifier","lId","has","been","closed"]}
{"code_tokens":["\n","public","synchronized","void","createPrincipal","(","String","principal,","String","password",")","\n","throws","Exception","{","\n","simpleKdc",".","createPrincipal","(","principal,","password",")",";","\n"],"docstring_tokens":["Creates","a","principal","in","the","KDC","with","the","specified","user","and","password"]}
{"code_tokens":["\n","public","synchronized","void","createPrincipal","(","File","keytabFile,\n","String",".",".",".","principals",")","\n","throws","Exception","{","\n","simpleKdc",".","createPrincipals","(","principals",")",";","\n","if","(","keytabFile",".","exists","(",")","&&","!keytabFile",".","delete","(",")",")","{","\n","LOG",".","error","(","\"Failed","to","delete","keytab","file:","\"","+","keytabFile",")",";","\n","}","\n","for","(","String","principal",":","principals",")","{","\n","simpleKdc",".","getKadmin","(",")",".","exportKeytab","(","keytabFile,","principal",")",";","\n","}","\n"],"docstring_tokens":["Creates","multiple","principals","in","the","KDC","and","adds","them","to","a","keytab","file"]}
{"code_tokens":["\n","public","LedgerFragment","subset","(","Set<Integer>","subset",")","{","\n","return","new","LedgerFragment","(","this,","subset",")",";","\n"],"docstring_tokens":["Return","a","ledger","fragment","contains","subset","of","bookies"]}
{"code_tokens":["\n","public","long","getFirstStoredEntryId","(",")","{","\n","long","firstEntry","=","LedgerHandle",".","INVALID_ENTRY_ID",";","\n","for","(","int","bookieIndex",":","bookieIndexes",")","{","\n","Long","firstStoredEntryForBookie","=","getFirstStoredEntryId","(","bookieIndex",")",";","\n","if","(","firstStoredEntryForBookie","!=","LedgerHandle",".","INVALID_ENTRY_ID",")","{","\n","if","(","firstEntry","==","LedgerHandle",".","INVALID_ENTRY_ID",")","{","\n","firstEntry","=","firstStoredEntryForBookie",";","\n","}","else","{","\n","firstEntry","=","Math",".","min","(","firstEntry,","firstStoredEntryForBookie",")",";","\n","}","\n","}","\n","}","\n","return","firstEntry",";","\n"],"docstring_tokens":["Gets","the","first","stored","entry","id","of","the","fragment","in","failed","bookies"]}
{"code_tokens":["\n","public","Long","getFirstStoredEntryId","(","int","bookieIndex",")","{","\n","long","firstEntry","=","firstEntryId",";","\n\n","for","(","int","i","=","0",";","i","<","ensemble",".","size","(",")","&&","firstEntry","<=","lastKnownEntryId",";","i++",")","{","\n","if","(","schedule",".","hasEntry","(","firstEntry,","bookieIndex",")",")","{","\n","return","firstEntry",";","\n","}","else","{","\n","firstEntry++",";","\n","}","\n","}","\n","return","LedgerHandle",".","INVALID_ENTRY_ID",";","\n"],"docstring_tokens":["Get","the","first","stored","entry","id","of","the","fragment","in","the","given","failed","bookies"]}
{"code_tokens":["\n","public","long","getLastStoredEntryId","(",")","{","\n","long","lastEntry","=","LedgerHandle",".","INVALID_ENTRY_ID",";","\n","for","(","int","bookieIndex",":","bookieIndexes",")","{","\n","Long","lastStoredEntryIdForBookie","=","getLastStoredEntryId","(","bookieIndex",")",";","\n","if","(","lastStoredEntryIdForBookie","!=","LedgerHandle",".","INVALID_ENTRY_ID",")","{","\n","if","(","lastEntry","==","LedgerHandle",".","INVALID_ENTRY_ID",")","{","\n","lastEntry","=","lastStoredEntryIdForBookie",";","\n","}","else","{","\n","lastEntry","=","Math",".","max","(","lastEntry,","lastStoredEntryIdForBookie",")",";","\n","}","\n","}","\n","}","\n","return","lastEntry",";","\n"],"docstring_tokens":["Gets","the","last","stored","entry","id","of","the","fragment","in","failed","bookie"]}
{"code_tokens":["\n","public","Long","getLastStoredEntryId","(","int","bookieIndex",")","{","\n","long","lastEntry","=","lastKnownEntryId",";","\n","for","(","int","i","=","0",";","i","<","ensemble",".","size","(",")","&&","lastEntry",">=","firstEntryId",";","i++",")","{","\n","if","(","schedule",".","hasEntry","(","lastEntry,","bookieIndex",")",")","{","\n","return","lastEntry",";","\n","}","else","{","\n","lastEntry--",";","\n","}","\n","}","\n","return","LedgerHandle",".","INVALID_ENTRY_ID",";","\n"],"docstring_tokens":["Get","the","last","stored","entry","id","of","the","fragment","in","the","given","failed","bookie"]}
{"code_tokens":["\n","public","static","Supplier<MVCCAsyncStore<byte[],","byte[]>>","bytesStoreSupplier","(","Supplier<Namespace>","nsSupplier",")","{","\n","return","(",")","->","new","MVCCAsyncBytesStoreImpl","(","\n","(",")","->","new","MVCCStoreImpl<>","(",")",",\n","nsSupplier\n",")",";","\n"],"docstring_tokens":["Provide","a","supplier","to","supply","mvcc","stores","with","a","given","namespace","supplier"]}
{"code_tokens":["\n","public","static","Writer","newEntry","(","\n","String","logName,\n","int","initialBufferSize,\n","boolean","envelopeBeforeTransmit,\n","CompressionCodec",".","Type","codec",")","{","\n","return","new","EnvelopedEntryWriter","(","\n","logName,\n","initialBufferSize,\n","envelopeBeforeTransmit,\n","codec",")",";","\n"],"docstring_tokens":["Create","a","new","log","record","set"]}
{"code_tokens":["\n","private","synchronized","BufferedLogChannel","allocateNewLog","(","File","dirForNextEntryLog,","String","suffix",")","throws","IOException","{","\n","List<File>","ledgersDirs","=","ledgerDirsManager",".","getAllLedgerDirs","(",")",";","\n","String","logFileName",";","\n","//","It","would","better","not","to","overwrite","existing","entry","log","files\n","File","testLogFile","=","null",";","\n","do","{","\n","if","(","preallocatedLogId",">=","Integer",".","MAX_VALUE",")","{","\n","preallocatedLogId","=","0",";","\n","}","else","{","\n","++preallocatedLogId",";","\n","}","\n","logFileName","=","Long",".","toHexString","(","preallocatedLogId",")","+","suffix",";","\n","for","(","File","dir",":","ledgersDirs",")","{","\n","testLogFile","=","new","File","(","dir,","logFileName",")",";","\n","if","(","testLogFile",".","exists","(",")",")","{","\n","log",".","warn","(","\"Found","existed","entry","log","\"","+","testLogFile\n","+","\"","when","trying","to","create","it","as","a","new","log",".","\"",")",";","\n","testLogFile","=","null",";","\n","break",";","\n","}","\n","}","\n","}","while","(","testLogFile","==","null",")",";","\n\n","File","newLogFile","=","new","File","(","dirForNextEntryLog,","logFileName",")",";","\n","FileChannel","channel","=","new","RandomAccessFile","(","newLogFile,","\"rw\"",")",".","getChannel","(",")",";","\n\n","BufferedLogChannel","logChannel","=","new","BufferedLogChannel","(","byteBufAllocator,","channel,","conf",".","getWriteBufferBytes","(",")",",\n","conf",".","getReadBufferBytes","(",")",",","preallocatedLogId,","newLogFile,","conf",".","getFlushIntervalInBytes","(",")",")",";","\n","logfileHeader",".","readerIndex","(","0",")",";","\n","logChannel",".","write","(","logfileHeader",")",";","\n\n","for","(","File","f",":","ledgersDirs",")","{","\n","setLastLogId","(","f,","preallocatedLogId",")",";","\n","}","\n\n","if","(","suffix",".","equals","(","EntryLogger",".","LOG_FILE_SUFFIX",")",")","{","\n","recentlyCreatedEntryLogsStatus",".","createdEntryLog","(","preallocatedLogId",")",";","\n","}","\n\n","log",".","info","(","\"Created","new","entry","log","file","{","}","for","logId","{","}",".","\",","newLogFile,","preallocatedLogId",")",";","\n","return","logChannel",";","\n"],"docstring_tokens":["Allocate","a","new","log","file"]}
{"code_tokens":["\n","void","checkReadLock","(",")","throws","DLIllegalStateException,","LockingException","{","\n","synchronized","(","this",")","{","\n","if","(","(","null","==","lockAcquireFuture",")","\n","||","(","!lockAcquireFuture",".","isDone","(",")",")",")","{","\n","throw","new","DLIllegalStateException","(","\"Attempt","to","check","for","lock","before","it","has","been","acquired","successfully\"",")",";","\n","}","\n","}","\n\n","readLock",".","checkOwnership","(",")",";","\n"],"docstring_tokens":["Check","ownership","of","elective","stream","lock"]}
{"code_tokens":["\n","CompletableFuture<Versioned<List<LogSegmentMetadata>>>","asyncStartFetchLogSegments","(",")","{","\n","CompletableFuture<Versioned<List<LogSegmentMetadata>>>","promise","=\n","new","CompletableFuture<Versioned<List<LogSegmentMetadata>>>","(",")",";","\n","asyncStartFetchLogSegments","(","promise",")",";","\n","return","promise",";","\n"],"docstring_tokens":["Start","fetch","the","log","segments","and","register","the","LogSegmentNamesListener"]}
{"code_tokens":["\n","public","boolean","isControl","(",")","{","\n","return","isControl","(","metadata",")",";","\n"],"docstring_tokens":["Check","if","the","record","is","a","control","record"]}
{"code_tokens":["\n","public","static","boolean","isControl","(","long","flags",")","{","\n","return","(","(","flags","&","LOGRECORD_FLAGS_CONTROL_MESSAGE",")","!=","0",")",";","\n"],"docstring_tokens":["Check","flags","to","see","if","it","indicates","a","control","record"]}
{"code_tokens":["\n","int","getPersistentSize","(",")","{","\n","//","Flags","+","TxId","+","Payload-length","+","payload\n","return","2","*","(","Long",".","SIZE","/","8",")","+","Integer",".","SIZE","/","8","+","payload",".","readableBytes","(",")",";","\n"],"docstring_tokens":["The","size","of","the","serialized","log","record"]}
{"code_tokens":["\n","public","static","CompletableFuture<Void>","startComponent","(","LifecycleComponent","component",")","{","\n","CompletableFuture<Void>","future","=","new","CompletableFuture<>","(",")",";","\n","final","Thread","shutdownHookThread","=","new","Thread","(","\n","new","ComponentShutdownHook","(","component,","future",")",",\n","\"component-shutdown-thread\"\n",")",";","\n\n","//","register","a","shutdown","hook\n","Runtime",".","getRuntime","(",")",".","addShutdownHook","(","shutdownHookThread",")",";","\n\n","//","register","a","component","exception","handler\n","component",".","setExceptionHandler","(","(","t,","e",")","->","{","\n","log",".","error","(","\"Triggered","exceptionHandler","of","Component:","{","}","because","of","Exception","in","Thread:","{","}","\",\n","component",".","getName","(",")",",","t,","e",")",";","\n","//","start","the","shutdown","hook","when","an","uncaught","exception","happen","in","the","lifecycle","component",".","\n","shutdownHookThread",".","start","(",")",";","\n","}",")",";","\n\n","component",".","publishInfo","(","new","ComponentInfoPublisher","(",")",")",";","\n\n","log",".","info","(","\"Starting","component","{","}",".","\",","component",".","getName","(",")",")",";","\n","component",".","start","(",")",";","\n","log",".","info","(","\"Started","component","{","}",".","\",","component",".","getName","(",")",")",";","\n","return","future",";","\n"],"docstring_tokens":["Start","a","component","and","register","a","shutdown","hook"]}
{"code_tokens":["\n","public","static","void","registerClientDriver","(","String","metadataBackendScheme,\n","Class<?","extends","MetadataClientDriver>","driver",")","{","\n","registerClientDriver","(","metadataBackendScheme,","driver,","false",")",";","\n"],"docstring_tokens":["Register","the","metadata","client","driver"]}
{"code_tokens":["\n","public","static","void","registerBookieDriver","(","String","metadataBackendScheme,\n","Class<?","extends","MetadataBookieDriver>","driver",")","{","\n","registerBookieDriver","(","metadataBackendScheme,","driver,","false",")",";","\n"],"docstring_tokens":["Register","the","metadata","bookie","driver"]}
{"code_tokens":["\n","public","static","MetadataClientDriver","getClientDriver","(","String","scheme",")","{","\n","checkNotNull","(","scheme,","\"Client","Driver","Scheme","is","null\"",")",";","\n","MetadataClientDriverInfo","driverInfo","=","clientDrivers",".","get","(","scheme",".","toLowerCase","(",")",")",";","\n","if","(","null","==","driverInfo",")","{","\n","throw","new","IllegalArgumentException","(","\"Unknown","backend","\"","+","scheme",")",";","\n","}","\n","return","ReflectionUtils",".","newInstance","(","driverInfo",".","driverClass",")",";","\n"],"docstring_tokens":["Retrieve","the","client","driver","for","scheme"]}
{"code_tokens":["\n","public","static","MetadataClientDriver","getClientDriver","(","URI","uri",")","{","\n","//","Validate","the","uri","and","load","the","backend","according","to","scheme\n","checkNotNull","(","uri,","\"Metadata","service","uri","is","null\"",")",";","\n","String","scheme","=","uri",".","getScheme","(",")",";","\n","checkNotNull","(","scheme,","\"Invalid","metadata","service","uri",":","\"","+","uri",")",";","\n","scheme","=","scheme",".","toLowerCase","(",")",";","\n","String[]","schemeParts","=","StringUtils",".","split","(","scheme,","'+'",")",";","\n","checkArgument","(","schemeParts",".","length",">","0,\n","\"Invalid","metadata","service","scheme","found",":","\"","+","uri",")",";","\n","return","getClientDriver","(","schemeParts[0]",")",";","\n"],"docstring_tokens":["Retrieve","the","client","driver","for","uri"]}
{"code_tokens":["\n","public","static","MetadataBookieDriver","getBookieDriver","(","String","scheme",")","{","\n","checkNotNull","(","scheme,","\"Bookie","Driver","Scheme","is","null\"",")",";","\n","MetadataBookieDriverInfo","driverInfo","=","bookieDrivers",".","get","(","scheme",".","toLowerCase","(",")",")",";","\n","if","(","null","==","driverInfo",")","{","\n","throw","new","IllegalArgumentException","(","\"Unknown","backend","\"","+","scheme",")",";","\n","}","\n","return","ReflectionUtils",".","newInstance","(","driverInfo",".","driverClass",")",";","\n"],"docstring_tokens":["Retrieve","the","bookie","driver","for","scheme"]}
{"code_tokens":["\n","public","static","MetadataBookieDriver","getBookieDriver","(","URI","uri",")","{","\n","//","Validate","the","uri","and","load","the","backend","according","to","scheme\n","checkNotNull","(","uri,","\"Metadata","service","uri","is","null\"",")",";","\n","String","scheme","=","uri",".","getScheme","(",")",";","\n","checkNotNull","(","scheme,","\"Invalid","metadata","service","uri",":","\"","+","uri",")",";","\n","scheme","=","scheme",".","toLowerCase","(",")",";","\n","String[]","schemeParts","=","StringUtils",".","split","(","scheme,","'+'",")",";","\n","checkArgument","(","schemeParts",".","length",">","0,\n","\"Invalid","metadata","service","scheme","found",":","\"","+","uri",")",";","\n","return","getBookieDriver","(","schemeParts[0]",")",";","\n"],"docstring_tokens":["Retrieve","the","bookie","driver","for","uri"]}
{"code_tokens":["\n","File","pickRandomWritableDir","(",")","throws","NoWritableLedgerDirException","{","\n","return","pickRandomWritableDir","(","null",")",";","\n"],"docstring_tokens":["Returns","one","of","the","ledger","dir","from","writable","dirs","list","randomly"]}
{"code_tokens":["\n","public","void","executeOrdered","(","Object","orderingKey,","SafeRunnable","r",")","{","\n","chooseThread","(","orderingKey",")",".","execute","(","r",")",";","\n"],"docstring_tokens":["Schedules","a","one","time","action","to","execute","with","an","ordering","guarantee","on","the","key"]}
{"code_tokens":["\n","public","static","void","registerDriver","(","String","backend,","Class<?","extends","NamespaceDriver>","driver",")","{","\n","if","(","!initialized",")","{","\n","initialize","(",")",";","\n","}","\n\n","String","scheme","=","backend",".","toLowerCase","(",")",";","\n","NamespaceDriverInfo","oldDriverInfo","=","drivers",".","get","(","scheme",")",";","\n","if","(","null","!=","oldDriverInfo",")","{","\n","return",";","\n","}","\n","NamespaceDriverInfo","newDriverInfo","=","new","NamespaceDriverInfo","(","driver",")",";","\n","oldDriverInfo","=","drivers",".","putIfAbsent","(","scheme,","newDriverInfo",")",";","\n","if","(","null","!=","oldDriverInfo",")","{","\n","logger",".","debug","(","\"Driver","for","{","}","is","already","there",".","\",","scheme",")",";","\n","}","\n"],"docstring_tokens":["Register","the","namespace","driver"]}
{"code_tokens":["\n","public","static","NamespaceDriver","getDriver","(","String","scheme",")","{","\n","checkNotNull","(","scheme,","\"Driver","Scheme","is","null\"",")",";","\n","if","(","!initialized",")","{","\n","initialize","(",")",";","\n","}","\n","NamespaceDriverInfo","driverInfo","=","drivers",".","get","(","scheme",".","toLowerCase","(",")",")",";","\n","if","(","null","==","driverInfo",")","{","\n","throw","new","IllegalArgumentException","(","\"Unknown","backend","\"","+","scheme",")",";","\n","}","\n","return","ReflectionUtils",".","newInstance","(","driverInfo",".","driverClass",")",";","\n"],"docstring_tokens":["Retrieve","the","namespace","driver","for","scheme"]}
{"code_tokens":["\n","public","static","NamespaceDriver","getDriver","(","URI","uri",")","{","\n","//","Validate","the","uri","and","load","the","backend","according","to","scheme\n","checkNotNull","(","uri,","\"DistributedLog","uri","is","null\"",")",";","\n","String","scheme","=","uri",".","getScheme","(",")",";","\n","checkNotNull","(","scheme,","\"Invalid","distributedlog","uri",":","\"","+","uri",")",";","\n","scheme","=","scheme",".","toLowerCase","(",")",";","\n","String[]","schemeParts","=","StringUtils",".","split","(","scheme,","'-'",")",";","\n","checkArgument","(","schemeParts",".","length",">","0,\n","\"Invalid","distributedlog","scheme","found",":","\"","+","uri",")",";","\n","checkArgument","(","Objects",".","equal","(","DistributedLogConstants",".","SCHEME_PREFIX,","schemeParts[0]",".","toLowerCase","(",")",")",",\n","\"Unknown","distributedlog","scheme","found",":","\"","+","uri",")",";","\n","//","bookkeeper","is","the","default","backend\n","String","backend","=","DistributedLogConstants",".","BACKEND_BK",";","\n","if","(","schemeParts",".","length",">","1",")","{","\n","backend","=","schemeParts[1]",";","\n","}","\n","return","getDriver","(","backend",")",";","\n"],"docstring_tokens":["Retrieve","the","namespace","driver","for","uri"]}
{"code_tokens":["\n","public","void","loadConf","(","Configuration","baseConf",")","{","\n","for","(","Iterator<String>","iter","=","baseConf",".","getKeys","(",")",";","iter",".","hasNext","(",")",";",")","{","\n","String","key","=","iter",".","next","(",")",";","\n","setProperty","(","key,","baseConf",".","getProperty","(","key",")",")",";","\n","}","\n"],"docstring_tokens":["Load","configuration","from","other","configuration","object"]}
{"code_tokens":["\n","public","void","loadStreamConf","(","Optional<DistributedLogConfiguration>","streamConfiguration",")","{","\n","if","(","!streamConfiguration",".","isPresent","(",")",")","{","\n","return",";","\n","}","\n","ArrayList<Object>","ignoredSettings","=","new","ArrayList<Object>","(",")",";","\n","Iterator","iterator","=","streamConfiguration",".","get","(",")",".","getKeys","(",")",";","\n","while","(","iterator",".","hasNext","(",")",")","{","\n","Object","setting","=","iterator",".","next","(",")",";","\n","if","(","setting","instanceof","String","&&","streamSettings",".","contains","(","setting",")",")","{","\n","String","settingStr","=","(","String",")","setting",";","\n","setProperty","(","settingStr,","streamConfiguration",".","get","(",")",".","getProperty","(","settingStr",")",")",";","\n","}","else","{","\n","ignoredSettings",".","add","(","setting",")",";","\n","}","\n","}","\n","if","(","LOG",".","isWarnEnabled","(",")","&&","!ignoredSettings",".","isEmpty","(",")",")","{","\n","LOG",".","warn","(","\"invalid","stream","configuration","override","(","s",")",":","{","}","\",\n","StringUtils",".","join","(","ignoredSettings,","\"",";","\"",")",")",";","\n","}","\n"],"docstring_tokens":["Load","whitelisted","stream","configuration","from","another","configuration","object"]}
{"code_tokens":["\n","public","DistributedLogConfiguration","setDLLedgerMetadataLayoutVersion","(","int","layoutVersion",")","\n","throws","IllegalArgumentException","{","\n","if","(","(","layoutVersion","<=","0",")","\n","||","(","layoutVersion",">","LogSegmentMetadata",".","LEDGER_METADATA_CURRENT_LAYOUT_VERSION",")",")","{","\n","//","Incorrect","version","specified\n","throw","new","IllegalArgumentException","(","\"Incorrect","value","for","ledger","metadata","layout","version\"",")",";","\n","}","\n","setProperty","(","BKDL_LEDGER_METADATA_LAYOUT_VERSION,","layoutVersion",")",";","\n","return","this",";","\n"],"docstring_tokens":["Set","DL","ledger","metadata","output","layout","version"]}
{"code_tokens":["\n","public","DistributedLogConfiguration","setEnableRecordCounts","(","boolean","enableRecordCounts",")","{","\n","setProperty","(","BKDL_ENABLE_RECORD_COUNTS,","enableRecordCounts",")",";","\n","return","this",";","\n"],"docstring_tokens":["Set","if","we","should","publish","record","counts","in","the","log","records","and","metadata"]}
{"code_tokens":["\n","public","DistributedLogConfiguration","setOutputBufferSize","(","int","opBufferSize",")","{","\n","setProperty","(","BKDL_OUTPUT_BUFFER_SIZE,","opBufferSize",")",";","\n","return","this",";","\n"],"docstring_tokens":["Set","output","buffer","size","for","DL","writers,","in","bytes"]}
{"code_tokens":["\n","public","DistributedLogConfiguration","setPeriodicFlushFrequencyMilliSeconds","(","int","flushFrequencyMs",")","{","\n","setProperty","(","BKDL_PERIODIC_FLUSH_FREQUENCY_MILLISECONDS,","flushFrequencyMs",")",";","\n","return","this",";","\n"],"docstring_tokens":["Set","Periodic","Log","Flush","Frequency","in","milliseconds"]}
{"code_tokens":["\n","public","int","getRetentionPeriodHours","(",")","{","\n","return","this",".","getInt","(","BKDL_RETENTION_PERIOD_IN_HOURS,\n","getInt","(","BKDL_RETENTION_PERIOD_IN_HOURS_OLD,\n","BKDL_RETENTION_PERIOD_IN_HOURS_DEFAULT",")",")",";","\n"],"docstring_tokens":["Get","log","segment","retention","period","in","hours"]}
{"code_tokens":["\n","public","DistributedLogConfiguration","setRetentionPeriodHours","(","int","retentionHours",")","{","\n","setProperty","(","BKDL_RETENTION_PERIOD_IN_HOURS,","retentionHours",")",";","\n","return","this",";","\n"],"docstring_tokens":["Set","log","segment","retention","period","in","hours"]}
{"code_tokens":["\n","public","boolean","getPositionGapDetectionEnabled","(",")","{","\n","return\n","getBoolean","(","BKDL_READER_POSITION_GAP_DETECTION_ENABLED,\n","BKDL_READER_POSITION_GAP_DETECTION_ENABLED_DEFAULT",")",";","\n"],"docstring_tokens":["Get","whether","position","gap","detection","for","reader","enabled"]}
{"code_tokens":["\n","public","DistributedLogConfiguration","setReadAheadWaitTime","(","int","readAheadWaitTime",")","{","\n","setProperty","(","BKDL_READAHEAD_WAITTIME,","readAheadWaitTime",")",";","\n","return","this",";","\n"],"docstring_tokens":["Set","the","wait","time","between","successive","attempts","to","poll","for","new","log","records,","in","milliseconds"]}
{"code_tokens":["\n","public","DistributedLogConfiguration","setEnableTaskExecutionStats","(","boolean","enabled",")","{","\n","setProperty","(","BKDL_ENABLE_TASK_EXECUTION_STATS,","enabled",")",";","\n","return","this",";","\n"],"docstring_tokens":["Set","to","trace","long","running","tasks","and","record","task","execution","stats","in","thread","pools"]}
{"code_tokens":["\n","public","DistributedLogConfiguration","setFederatedCheckExistenceWhenCacheMiss","(","boolean","enabled",")","{","\n","setProperty","(","BKDL_FEDERATED_CHECK_EXISTENCE_WHEN_CACHE_MISS,","enabled",")",";","\n","return","this",";","\n"],"docstring_tokens":["Enable","check","existence","of","a","log","if","quering","local","cache","of","a","federated","namespace","missed"]}
{"code_tokens":["\n","public","DistributedLogConfiguration","setDynamicConfigReloadIntervalSec","(","int","intervalSec",")","{","\n","setProperty","(","BKDL_DYNAMIC_CONFIG_RELOAD_INTERVAL_SEC,","intervalSec",")",";","\n","return","this",";","\n"],"docstring_tokens":["Get","dynamic","configuration","reload","interval","in","seconds"]}
{"code_tokens":["\n","private","void","doGcLedgers","(",")","{","\n","garbageCollector",".","gc","(","garbageCleaner",")",";","\n"],"docstring_tokens":["Do","garbage","collection","ledger","index","files"]}
{"code_tokens":["\n","private","void","doGcEntryLogs","(",")","{","\n","//","Get","a","cumulative","count,","don't","update","until","complete\n","AtomicLong","totalEntryLogSizeAcc","=","new","AtomicLong","(","0L",")",";","\n\n","//","Loop","through","all","of","the","entry","logs","and","remove","the","non-active","ledgers",".","\n","entryLogMetaMap",".","forEach","(","(","entryLogId,","meta",")","->","{","\n","removeIfLedgerNotExists","(","meta",")",";","\n","if","(","meta",".","isEmpty","(",")",")","{","\n","//","This","means","the","entry","log","is","not","associated","with","any","active","ledgers","anymore",".","\n","//","We","can","remove","this","entry","log","file","now",".","\n","LOG",".","info","(","\"Deleting","entryLogId","\"","+","entryLogId","+","\"","as","it","has","no","active","ledgers!\"",")",";","\n","removeEntryLog","(","entryLogId",")",";","\n","gcStats",".","getReclaimedSpaceViaDeletes","(",")",".","add","(","meta",".","getTotalSize","(",")",")",";","\n","}","\n\n","totalEntryLogSizeAcc",".","getAndAdd","(","meta",".","getRemainingSize","(",")",")",";","\n","}",")",";","\n\n","this",".","totalEntryLogSize","=","totalEntryLogSizeAcc",".","get","(",")",";","\n","this",".","numActiveEntryLogs","=","entryLogMetaMap",".","keySet","(",")",".","size","(",")",";","\n"],"docstring_tokens":["Garbage","collect","those","entry","loggers","which","are","not","associated","with","any","active","ledgers"]}
{"code_tokens":["\n","public","void","shutdown","(",")","throws","InterruptedException","{","\n","this",".","running","=","false",";","\n","LOG",".","info","(","\"Shutting","down","GarbageCollectorThread\"",")",";","\n\n","while","(","!compacting",".","compareAndSet","(","false,","true",")",")","{","\n","//","Wait","till","the","thread","stops","compacting\n","Thread",".","sleep","(","100",")",";","\n","}","\n\n","//","Interrupt","GC","executor","thread\n","gcExecutor",".","shutdownNow","(",")",";","\n"],"docstring_tokens":["Shutdown","the","garbage","collector","thread"]}
{"code_tokens":["\n","public","double","getEIInjectedWriteDelayPercent","(",")","{","\n","return","getDouble","(","DistributedLogConfiguration",".","BKDL_EI_INJECTED_WRITE_DELAY_PERCENT,\n","defaultConfig",".","getDouble","(","DistributedLogConfiguration",".","BKDL_EI_INJECTED_WRITE_DELAY_PERCENT,\n","DistributedLogConfiguration",".","BKDL_EI_INJECTED_WRITE_DELAY_PERCENT_DEFAULT",")",")",";","\n"],"docstring_tokens":["Get","percent","of","write","bytes","which","should","be","delayed","by","BKDL_EI_INJECTED_WRITE_DELAY_MS"]}
{"code_tokens":["\n","public","int","getPeriodicFlushFrequencyMilliSeconds","(",")","{","\n","return","getInt","(","DistributedLogConfiguration",".","BKDL_PERIODIC_FLUSH_FREQUENCY_MILLISECONDS,\n","defaultConfig",".","getInt","(","DistributedLogConfiguration",".","BKDL_PERIODIC_FLUSH_FREQUENCY_MILLISECONDS,\n","DistributedLogConfiguration",".","BKDL_PERIODIC_FLUSH_FREQUENCY_MILLISECONDS_DEFAULT",")",")",";","\n"],"docstring_tokens":["Get","Periodic","Log","Flush","Frequency","in","seconds"]}
{"code_tokens":["\n","private","ByteBuf","getLastEntryId","(","long","ledgerId",")","throws","IOException","{","\n","EntryKeyValue","kv","=","memTable",".","getLastEntry","(","ledgerId",")",";","\n","if","(","null","!=","kv",")","{","\n","return","kv",".","getValueAsByteBuffer","(",")",";","\n","}","\n","//","If","it","doesn't","exist","in","the","skip","list,","then","fallback","to","the","ledger","cache+index",".","\n","return","interleavedLedgerStorage",".","getEntry","(","ledgerId,","BookieProtocol",".","LAST_ADD_CONFIRMED",")",";","\n"],"docstring_tokens":["Get","the","last","entry","id","for","a","particular","ledger"]}
{"code_tokens":["\n","@Override\n","public","CompletableFuture<DLSN>","getLastCommitPosition","(",")","{","\n","DLSN","dlsn","=","lastCommittedPositionUpdater",".","get","(","this",")",";","\n","if","(","null","!=","dlsn",")","{","\n","return","FutureUtils",".","value","(","dlsn",")",";","\n","}","else","{","\n","return","getLastCommitPositionFromZK","(",")",";","\n","}","\n"],"docstring_tokens":["Get","the","last","committed","position","stored","for","this","subscription"]}
{"code_tokens":["\n","public","Watcher","registerExpirationHandler","(","final","ZooKeeperSessionExpireNotifier","onExpired",")","{","\n","Watcher","watcher","=","new","Watcher","(",")","{","\n","@Override\n","public","void","process","(","WatchedEvent","event",")","{","\n","if","(","event",".","getType","(",")","==","EventType",".","None","&&","event",".","getState","(",")","==","KeeperState",".","Expired",")","{","\n","try","{","\n","onExpired",".","notifySessionExpired","(",")",";","\n","}","catch","(","Exception","exc",")","{","\n","//","do","nothing\n","}","\n","}","\n","}","\n","}",";","\n","register","(","watcher",")",";","\n","return","watcher",";","\n"],"docstring_tokens":["Clients","that","need","to","re-establish","state","after","session","expiration","can","register","an","onExpired","command","to","execute"]}
{"code_tokens":["\n","public","boolean","unregister","(","Watcher","watcher",")","{","\n","return","null","!=","watcher","&&","watchers",".","remove","(","watcher",")",";","\n"],"docstring_tokens":["Clients","can","attempt","to","unregister","a","top-level","Watcher","that","has","previously","been","registered"]}
{"code_tokens":["\n","public","static","ByteBufList","clone","(","ByteBufList","other",")","{","\n","ByteBufList","buf","=","get","(",")",";","\n","for","(","int","i","=","0",";","i","<","other",".","buffers",".","size","(",")",";","i++",")","{","\n","//","Create","a","duplicate","of","the","buffer","so","that","there","is","no","interference","from","other","threads\n","buf",".","add","(","other",".","buffers",".","get","(","i",")",".","retainedDuplicate","(",")",")",";","\n","}","\n","return","buf",";","\n"],"docstring_tokens":["Get","a","new","ByteBufList","instance","from","the","pool","that","is","the","clone","of","an","already","existing","instance"]}
{"code_tokens":["\n","public","void","add","(","ByteBuf","buf",")","{","\n","final","ByteBuf","unwrapped","=","buf",".","unwrap","(",")","!=","null","&&","buf",".","unwrap","(",")","instanceof","CompositeByteBuf\n","?","buf",".","unwrap","(",")",":","buf",";","\n","ReferenceCountUtil",".","retain","(","unwrapped",")",";","\n","ReferenceCountUtil",".","release","(","buf",")",";","\n\n","if","(","unwrapped","instanceof","CompositeByteBuf",")","{","\n","(","(","CompositeByteBuf",")","unwrapped",")",".","forEach","(","b","->","{","\n","ReferenceCountUtil",".","retain","(","b",")",";","\n","buffers",".","add","(","b",")",";","\n","}",")",";","\n","ReferenceCountUtil",".","release","(","unwrapped",")",";","\n","}","else","{","\n","buffers",".","add","(","unwrapped",")",";","\n","}","\n"],"docstring_tokens":["Append","a","ByteBuf","at","the","end","of","this","ByteBufList"]}
{"code_tokens":["\n","public","void","prepend","(","ByteBuf","buf",")","{","\n","//","don't","unwrap","slices\n","final","ByteBuf","unwrapped","=","buf",".","unwrap","(",")","!=","null","&&","buf",".","unwrap","(",")","instanceof","CompositeByteBuf\n","?","buf",".","unwrap","(",")",":","buf",";","\n","ReferenceCountUtil",".","retain","(","unwrapped",")",";","\n","ReferenceCountUtil",".","release","(","buf",")",";","\n\n","if","(","unwrapped","instanceof","CompositeByteBuf",")","{","\n","CompositeByteBuf","composite","=","(","CompositeByteBuf",")","unwrapped",";","\n","for","(","int","i","=","composite",".","numComponents","(",")","-","1",";","i",">=","0",";","i--",")","{","\n","ByteBuf","b","=","composite",".","component","(","i",")",";","\n","ReferenceCountUtil",".","retain","(","b",")",";","\n","buffers",".","add","(","0,","b",")",";","\n","}","\n","ReferenceCountUtil",".","release","(","unwrapped",")",";","\n","}","else","{","\n","buffers",".","add","(","0,","unwrapped",")",";","\n","}","\n"],"docstring_tokens":["Prepend","a","ByteBuf","at","the","beginning","of","this","ByteBufList"]}
{"code_tokens":["\n","public","int","getBytes","(","byte[]","dst",")","{","\n","int","copied","=","0",";","\n","for","(","int","idx","=","0",";","idx","<","buffers",".","size","(",")","&&","copied","<","dst",".","length",";","idx++",")","{","\n","ByteBuf","b","=","buffers",".","get","(","idx",")",";","\n","int","len","=","Math",".","min","(","b",".","readableBytes","(",")",",","dst",".","length","-","copied",")",";","\n","b",".","getBytes","(","b",".","readerIndex","(",")",",","dst,","copied,","len",")",";","\n\n","copied","+=","len",";","\n","}","\n\n","return","copied",";","\n"],"docstring_tokens":["Write","bytes","from","the","current","ByteBufList","into","a","byte","array"]}
{"code_tokens":["\n","@Override\n","public","boolean","isEndOfStreamMarked","(",")","throws","IOException","{","\n","checkClosedOrInError","(","\"isEndOfStreamMarked\"",")",";","\n","long","lastTxId","=","Utils",".","ioResult","(","getLastLogRecordAsyncInternal","(","false,","true",")",")",".","getTransactionId","(",")",";","\n","return","lastTxId","==","DistributedLogConstants",".","MAX_TXID",";","\n"],"docstring_tokens":["Check","if","an","end","of","stream","marker","was","added","to","the","stream"]}
{"code_tokens":["\n","public","AppendOnlyStreamWriter","getAppendOnlyStreamWriter","(",")","throws","IOException","{","\n","long","position",";","\n","try","{","\n","position","=","Utils",".","ioResult","(","getLastLogRecordAsyncInternal","(","true,","false",")",")",".","getTransactionId","(",")",";","\n","if","(","DistributedLogConstants",".","INVALID_TXID","==","position\n","||","DistributedLogConstants",".","EMPTY_LOGSEGMENT_TX_ID","==","position",")","{","\n","position","=","0",";","\n","}","\n","}","catch","(","LogEmptyException","ex",")","{","\n","position","=","0",";","\n","}","catch","(","LogNotFoundException","ex",")","{","\n","position","=","0",";","\n","}","\n","return","new","AppendOnlyStreamWriter","(","startAsyncLogSegmentNonPartitioned","(",")",",","position",")",";","\n"],"docstring_tokens":["Begin","appending","to","the","end","of","the","log","stream","which","is","being","treated","as","a","sequence","of","bytes"]}
{"code_tokens":["\n","@Override\n","public","BKAsyncLogWriter","startAsyncLogSegmentNonPartitioned","(",")","throws","IOException","{","\n","return","(","BKAsyncLogWriter",")","Utils",".","ioResult","(","openAsyncLogWriter","(",")",")",";","\n"],"docstring_tokens":["Begin","writing","to","the","log","stream","identified","by","the","name"]}
{"code_tokens":["\n","@Override\n","public","LogReader","openLogReader","(","long","fromTxnId",")","\n","throws","IOException","{","\n","return","getInputStreamInternal","(","fromTxnId",")",";","\n"],"docstring_tokens":["Get","the","input","stream","starting","with","fromTxnId","for","the","specified","log"]}
{"code_tokens":["\n","@Override\n","public","CompletableFuture<Long>","getLastTxIdAsync","(",")","{","\n","return","getLastLogRecordAsyncInternal","(","false,","false",")","\n",".","thenApply","(","RECORD_2_TXID_FUNCTION",")",";","\n"],"docstring_tokens":["Get","Latest","Transaction","Id","in","the","log"]}
{"code_tokens":["\n","@Override\n","public","CompletableFuture<DLSN>","getFirstDLSNAsync","(",")","{","\n","return","getFirstRecordAsyncInternal","(",")",".","thenApply","(","RECORD_2_DLSN_FUNCTION",")",";","\n"],"docstring_tokens":["Get","first","DLSN","in","the","log"]}
{"code_tokens":["\n","@Override\n","public","CompletableFuture<DLSN>","getLastDLSNAsync","(",")","{","\n","return","getLastLogRecordAsyncInternal","(","false,","false",")","\n",".","thenApply","(","RECORD_2_DLSN_FUNCTION",")",";","\n"],"docstring_tokens":["Get","Latest","DLSN","in","the","log"]}
{"code_tokens":["\n","@Override\n","public","void","delete","(",")","throws","IOException","{","\n","//","delete","the","actual","log","stream","and","log","segments\n","BKLogWriteHandler","ledgerHandler","=","createWriteHandler","(","true",")",";","\n","ledgerHandler",".","deleteLog","(",")",";","\n","//","delete","the","log","stream","metadata\n","Utils",".","ioResult","(","driver",".","getLogStreamMetadataStore","(","WRITER",")","\n",".","deleteLog","(","uri,","getStreamName","(",")",")",")",";","\n"],"docstring_tokens":["Delete","all","the","partitions","of","the","specified","log"]}
{"code_tokens":["\n","@Override\n","public","CompletableFuture<Void>","asyncClose","(",")","{","\n","CompletableFuture<Void>","closeFuture",";","\n","BKLogReadHandler","readHandlerToClose",";","\n","synchronized","(","this",")","{","\n","if","(","null","!=","closePromise",")","{","\n","return","closePromise",";","\n","}","\n","closeFuture","=","closePromise","=","new","CompletableFuture<Void>","(",")",";","\n","readHandlerToClose","=","readHandlerForListener",";","\n","}","\n\n","CompletableFuture<Void>","closeResult","=","Utils",".","closeSequence","(","null,","true,\n","readHandlerToClose,\n","pendingReaders,\n","resourcesCloseable",".","orElse","(","AsyncCloseable",".","NULL",")",")",";","\n","FutureUtils",".","proxyTo","(","closeResult,","closeFuture",")",";","\n","return","closeFuture",";","\n"],"docstring_tokens":["Close","the","distributed","log","manager,","freeing","any","resources","it","may","hold"]}
{"code_tokens":["\n","public","static","long","get","(","long","value,","long","mask",")","{","\n","checkArgument","(","value",">=","0L","&&","mask",">=","0L",")",";","\n","return","(","value","&","mask",")",";","\n"],"docstring_tokens":["Get","the","bits","where","mask","is","1"]}
{"code_tokens":["\n","public","static","<T>","CompletableFuture<T>","whenCompleteAsync","(","\n","CompletableFuture<T>","future,\n","BiConsumer<?","super","T,","?","super","Throwable>","action,\n","OrderedScheduler","scheduler,\n","Object","scheduleKey",")","{","\n","return","future",".","whenCompleteAsync","(","action,","scheduler",".","chooseThread","(","scheduleKey",")",")",";","\n"],"docstring_tokens":["Completing","the","future","in","the","thread","in","the","scheduler","identified","by","the","scheduleKey"]}
{"code_tokens":["\n","public","static","<T>","CompletableFuture<Void>","ignore","(","CompletableFuture<T>","future",")","{","\n","return","ignore","(","future,","null",")",";","\n"],"docstring_tokens":["Ignore","exception","from","the","future"]}
{"code_tokens":["\n","public","static","<T>","CompletableFuture<Void>","ignore","(","CompletableFuture<T>","future,\n","final","String","errorMsg",")","{","\n","final","CompletableFuture<Void>","promise","=","new","CompletableFuture<Void>","(",")",";","\n","future",".","whenComplete","(","new","FutureEventListener<T>","(",")","{","\n","@Override\n","public","void","onSuccess","(","T","value",")","{","\n","promise",".","complete","(","null",")",";","\n","}","\n\n","@Override\n","public","void","onFailure","(","Throwable","cause",")","{","\n","if","(","null","!=","errorMsg",")","{","\n","log",".","error","(","errorMsg,","cause",")",";","\n","}","\n","promise",".","complete","(","null",")",";","\n","}","\n","}",")",";","\n","return","promise",";","\n"],"docstring_tokens":["Ignore","exception","from","the","future","and","log","errorMsg","on","exceptions"]}
{"code_tokens":["\n","private","void","unsafeInitializeLogSegments","(","List<LogSegmentMetadata>","segments",")","{","\n","if","(","segments",".","isEmpty","(",")",")","{","\n","//","not","initialize","the","background","reader,","until","the","first","log","segment","is","notified\n","return",";","\n","}","\n","boolean","skipTruncatedLogSegments","=","true",";","\n","DLSN","dlsnToStart","=","fromDLSN",";","\n","//","positioning","the","reader\n","for","(","int","i","=","0",";","i","<","segments",".","size","(",")",";","i++",")","{","\n","LogSegmentMetadata","segment","=","segments",".","get","(","i",")",";","\n","//","skip","any","log","segments","that","have","smaller","log","segment","sequence","numbers\n","if","(","segment",".","getLogSegmentSequenceNumber","(",")","<","fromDLSN",".","getLogSegmentSequenceNo","(",")",")","{","\n","continue",";","\n","}","\n","//","if","the","log","segment","is","truncated,","skip","it",".","\n","if","(","skipTruncatedLogSegments\n","&&","!conf",".","getIgnoreTruncationStatus","(",")","\n","&&","segment",".","isTruncated","(",")",")","{","\n","continue",";","\n","}","\n","//","if","the","log","segment","is","partially","truncated,","move","the","start","dlsn","to","the","min","active","dlsn\n","if","(","skipTruncatedLogSegments\n","&&","!conf",".","getIgnoreTruncationStatus","(",")","\n","&&","segment",".","isPartiallyTruncated","(",")",")","{","\n","if","(","segment",".","getMinActiveDLSN","(",")",".","compareTo","(","fromDLSN",")",">","0",")","{","\n","dlsnToStart","=","segment",".","getMinActiveDLSN","(",")",";","\n","}","\n","}","\n","skipTruncatedLogSegments","=","false",";","\n","if","(","!isAllowedToPosition","(","segment,","dlsnToStart",")",")","{","\n","logger",".","error","(","\"segment","{","}","is","not","allowed","to","position","at","{","}","\",","segment,","dlsnToStart",")",";","\n","return",";","\n","}","\n\n","SegmentReader","reader","=","new","SegmentReader","(","segment,\n","segment",".","getLogSegmentSequenceNumber","(",")","==","dlsnToStart",".","getLogSegmentSequenceNo","(",")","\n","?","dlsnToStart",".","getEntryId","(",")",":","0L",")",";","\n","segmentReaders",".","add","(","reader",")",";","\n","}","\n","if","(","segmentReaders",".","isEmpty","(",")",")","{","\n","//","not","initialize","the","background","reader,","until","the","first","log","segment","is","available","to","read\n","return",";","\n","}","\n","currentSegmentReader","=","segmentReaders",".","pollFirst","(",")",";","\n","currentSegmentReader",".","openReader","(",")",";","\n","currentSegmentReader",".","startRead","(",")",";","\n","currentSegmentSequenceNumber","=","currentSegmentReader",".","getSegment","(",")",".","getLogSegmentSequenceNumber","(",")",";","\n\n","scheduleRead","(",")",";","\n\n","if","(","!segmentReaders",".","isEmpty","(",")",")","{","\n","for","(","SegmentReader","reader",":","segmentReaders",")","{","\n","reader",".","openReader","(",")",";","\n","}","\n","unsafePrefetchNextSegment","(","true",")",";","\n","}","\n","//","mark","the","reader","initialized\n","isInitialized","=","true",";","\n"],"docstring_tokens":["Initialize","the","reader","with","the","log","segments"]}
{"code_tokens":["\n","private","boolean","isAllowedToPosition","(","LogSegmentMetadata","segment,","DLSN","fromDLSN",")","{","\n","if","(","segment",".","isTruncated","(",")","\n","&&","segment",".","getLastDLSN","(",")",".","compareTo","(","fromDLSN",")",">=","0\n","&&","!conf",".","getIgnoreTruncationStatus","(",")",")","{","\n","setLastException","(","new","AlreadyTruncatedTransactionException","(","streamName\n","+","\"",":","trying","to","position","read","ahead","at","\"","+","fromDLSN\n","+","\"","on","a","segment","\"","+","segment","+","\"","that","is","already","marked","as","truncated\"",")",")",";","\n","return","false",";","\n","}","\n","if","(","segment",".","isPartiallyTruncated","(",")","\n","&&","segment",".","getMinActiveDLSN","(",")",".","compareTo","(","fromDLSN",")",">","0",")","{","\n","if","(","conf",".","getAlertWhenPositioningOnTruncated","(",")",")","{","\n","alertStatsLogger",".","raise","(","\"Trying","to","position","reader","on","{","}","when","{","}","is","marked","partially","truncated\",\n","fromDLSN,","segment",")",";","\n","}","\n","if","(","!conf",".","getIgnoreTruncationStatus","(",")",")","{","\n","logger",".","error","(","\"","{","}",":","Trying","to","position","reader","on","{","}","when","{","}","is","marked","partially","truncated\",\n","streamName,","fromDLSN,","segment",")",";","\n\n","setLastException","(","new","AlreadyTruncatedTransactionException","(","streamName\n","+","\"",":","trying","to","position","read","ahead","at","\"","+","fromDLSN\n","+","\"","on","a","segment","\"","+","segment","+","\"","that","is","already","marked","as","truncated\"",")",")",";","\n","return","false",";","\n","}","\n","}","\n","return","true",";","\n"],"docstring_tokens":["Check","if","we","are","allowed","to","position","the","reader","at","fromDLSN"]}
{"code_tokens":["\n","public","void","initiate","(",")","{","\n","startTime","=","MathUtils",".","nowInNano","(",")",";","\n\n","/**\n","*","Asynchronously","read","the","ledger","metadata","node",".","\n","*/\n","bk",".","getLedgerManager","(",")",".","readLedgerMetadata","(","ledgerId",")","\n",".","whenComplete","(","(","metadata,","exception",")","->","{","\n","if","(","exception","!=","null",")","{","\n","openComplete","(","BKException",".","getExceptionCode","(","exception",")",",","null",")",";","\n","}","else","{","\n","openWithMetadata","(","metadata",")",";","\n","}","\n","}",")",";","\n"],"docstring_tokens":["Inititates","the","ledger","open","operation"]}
{"code_tokens":["\n","public","void","initiateWithoutRecovery","(",")","{","\n","this",".","doRecovery","=","false",";","\n","initiate","(",")",";","\n"],"docstring_tokens":["Inititates","the","ledger","open","operation","without","recovery"]}
{"code_tokens":["\n","private","synchronized","boolean","refill","(",")","throws","IOException","{","\n","bytebuff",".","clear","(",")",";","\n","if","(","!ledgerSeq",".","hasMoreElements","(",")","&&","lastEntry",">=","lh",".","getLastAddConfirmed","(",")",")","{","\n","return","false",";","\n","}","\n","if","(","!ledgerSeq",".","hasMoreElements","(",")",")","{","\n","//","do","refill\n","long","last","=","Math",".","min","(","lastEntry","+","increment,","lh",".","getLastAddConfirmed","(",")",")",";","\n","try","{","\n","ledgerSeq","=","lh",".","readEntries","(","lastEntry","+","1,","last",")",";","\n","}","catch","(","BKException","bk",")","{","\n","IOException","ie","=","new","IOException","(","bk",".","getMessage","(",")",")",";","\n","ie",".","initCause","(","bk",")",";","\n","throw","ie",";","\n","}","catch","(","InterruptedException","ie",")","{","\n","Thread",".","currentThread","(",")",".","interrupt","(",")",";","\n","}","\n","lastEntry","=","last",";","\n","}","\n","LedgerEntry","le","=","ledgerSeq",".","nextElement","(",")",";","\n","bbytes","=","le",".","getEntry","(",")",";","\n","bytebuff","=","ByteBuffer",".","wrap","(","bbytes",")",";","\n","return","true",";","\n"],"docstring_tokens":["refill","the","buffer,","we","need","to","read","more","bytes"]}
{"code_tokens":["\n","protected","void","run","(",")","throws","IOException","{","\n","if","(","lastTime","+","interval",">","System",".","currentTimeMillis","(",")",")","{","\n","return",";","\n","}","\n","exitCode","=","0",";","//","reset","for","next","run\n","runCommand","(",")",";","\n"],"docstring_tokens":["Check","to","see","if","a","command","needs","to","be","executed","and","execute","if","needed"]}
{"code_tokens":["\n","public","boolean","isTimedOut","(",")","{","\n","return","timedOut",".","get","(",")",";","\n"],"docstring_tokens":["To","check","if","the","passed","script","to","shell","command","executor","timed","out","or","not"]}
{"code_tokens":["\n","protected","NavigableSet<Long>","ledgerListToSet","(","List<String>","ledgerNodes,","String","path",")","{","\n","NavigableSet<Long>","zkActiveLedgers","=","new","TreeSet<Long>","(",")",";","\n","for","(","String","ledgerNode",":","ledgerNodes",")","{","\n","if","(","isSpecialZnode","(","ledgerNode",")",")","{","\n","continue",";","\n","}","\n","try","{","\n","//","convert","the","node","path","to","ledger","id","according","to","different","ledger","manager","implementation\n","zkActiveLedgers",".","add","(","getLedgerId","(","path","+","\"/\"","+","ledgerNode",")",")",";","\n","}","catch","(","IOException","e",")","{","\n","LOG",".","warn","(","\"Error","extracting","ledgerId","from","ZK","ledger","node:","\"","+","ledgerNode",")",";","\n","//","This","is","a","pretty","bad","error","as","it","indicates","a","ledger","node","in","ZK\n","//","has","an","incorrect","format",".","For","now","just","continue","and","consider\n","//","this","as","a","non-existent","ledger",".","\n","continue",";","\n","}","\n","}","\n","return","zkActiveLedgers",";","\n"],"docstring_tokens":["Convert","the","ZK","retrieved","ledger","nodes","to","a","HashSet","for","easier","comparisons"]}
{"code_tokens":["\n","public","Map<String,","Long>","calculateStreamSpaceUsage","(","final","URI","uri",")","throws","IOException","{","\n","logger",".","info","(","\"Collecting","stream","space","usage","for","{","}",".","\",","uri",")",";","\n","Namespace","namespace","=","NamespaceBuilder",".","newBuilder","(",")","\n",".","conf","(","conf",")","\n",".","uri","(","uri",")","\n",".","build","(",")",";","\n","try","{","\n","return","calculateStreamSpaceUsage","(","uri,","namespace",")",";","\n","}","finally","{","\n","namespace",".","close","(",")",";","\n","}","\n"],"docstring_tokens":["Calculating","stream","space","usage","from","given","uri"]}
{"code_tokens":["\n","public","static","List<String>","getChildrenInSingleNode","(","final","ZooKeeper","zk,","final","String","node,","long","zkOpTimeoutMs",")","\n","throws","InterruptedException,","IOException,","KeeperException",".","NoNodeException","{","\n","final","GetChildrenCtx","ctx","=","new","GetChildrenCtx","(",")",";","\n","getChildrenInSingleNode","(","zk,","node,","new","GenericCallback<List<String>>","(",")","{","\n","@Override\n","public","void","operationComplete","(","int","rc,","List<String>","ledgers",")","{","\n","synchronized","(","ctx",")","{","\n","if","(","Code",".","OK",".","intValue","(",")","==","rc",")","{","\n","ctx",".","children","=","ledgers",";","\n","}","\n","ctx",".","rc","=","rc",";","\n","ctx",".","done","=","true",";","\n","ctx",".","notifyAll","(",")",";","\n","}","\n","}","\n","}",")",";","\n\n","synchronized","(","ctx",")","{","\n","long","startTime","=","System",".","currentTimeMillis","(",")",";","\n","while","(","!ctx",".","done",")","{","\n","try","{","\n","ctx",".","wait","(","zkOpTimeoutMs",">","0","?","zkOpTimeoutMs",":","0",")",";","\n","}","catch","(","InterruptedException","e",")","{","\n","ctx",".","rc","=","Code",".","OPERATIONTIMEOUT",".","intValue","(",")",";","\n","ctx",".","done","=","true",";","\n","}","\n","//","timeout","the","process","if","get-children","response","not","received\n","//","zkOpTimeoutMs",".","\n","if","(","zkOpTimeoutMs",">","0","&&","(","System",".","currentTimeMillis","(",")","-","startTime",")",">=","zkOpTimeoutMs",")","{","\n","ctx",".","rc","=","Code",".","OPERATIONTIMEOUT",".","intValue","(",")",";","\n","ctx",".","done","=","true",";","\n","}","\n","}","\n","}","\n","if","(","Code",".","NONODE",".","intValue","(",")","==","ctx",".","rc",")","{","\n","throw","new","KeeperException",".","NoNodeException","(","\"Got","NoNode","on","call","to","getChildren","on","path","\"","+","node",")",";","\n","}","else","if","(","Code",".","OK",".","intValue","(",")","!=","ctx",".","rc",")","{","\n","throw","new","IOException","(","\"Error","on","getting","children","from","node","\"","+","node",")",";","\n","}","\n","return","ctx",".","children",";","\n"],"docstring_tokens":["Sync","get","all","children","under","single","zk","node"]}
{"code_tokens":["\n","public","static","void","getChildrenInSingleNode","(","final","ZooKeeper","zk,","final","String","node,\n","final","GenericCallback<List<String>>","cb",")","{","\n","zk",".","sync","(","node,","new","AsyncCallback",".","VoidCallback","(",")","{","\n","@Override\n","public","void","processResult","(","int","rc,","String","path,","Object","ctx",")","{","\n","if","(","rc","!=","Code",".","OK",".","intValue","(",")",")","{","\n","LOG",".","error","(","\"ZK","error","syncing","nodes","when","getting","children:","\",","KeeperException\n",".","create","(","KeeperException",".","Code",".","get","(","rc",")",",","path",")",")",";","\n","cb",".","operationComplete","(","rc,","null",")",";","\n","return",";","\n","}","\n","zk",".","getChildren","(","node,","false,","new","AsyncCallback",".","ChildrenCallback","(",")","{","\n","@Override\n","public","void","processResult","(","int","rc,","String","path,","Object","ctx,","List<String>","nodes",")","{","\n","if","(","rc","!=","Code",".","OK",".","intValue","(",")",")","{","\n","LOG",".","error","(","\"Error","polling","ZK","for","the","available","nodes:","\",","KeeperException\n",".","create","(","KeeperException",".","Code",".","get","(","rc",")",",","path",")",")",";","\n","cb",".","operationComplete","(","rc,","null",")",";","\n","return",";","\n","}","\n\n","cb",".","operationComplete","(","rc,","nodes",")",";","\n\n","}","\n","}",",","null",")",";","\n","}","\n","}",",","null",")",";","\n"],"docstring_tokens":["Async","get","direct","children","under","single","node"]}
{"code_tokens":["\n","@Override\n","public","CompletableFuture<Void>","asyncClose","(",")","{","\n","CompletableFuture<Void>","closeFuture",";","\n","synchronized","(","this",")","{","\n","if","(","null","!=","closePromise",")","{","\n","return","closePromise",";","\n","}","\n","closeFuture","=","closePromise","=","new","CompletableFuture<Void>","(",")",";","\n","}","\n","//","NOTE:","ownWriterZKC","and","ownReaderZKC","are","mostly","used","by","tests\n","//","the","managers","created","by","the","namespace","-","whose","zkc","will","be","closed","by","namespace\n","try","{","\n","if","(","ownWriterZKC",")","{","\n","writerZKC",".","close","(",")",";","\n","}","\n","if","(","ownReaderZKC",")","{","\n","readerZKC",".","close","(",")",";","\n","}","\n","}","catch","(","Exception","e",")","{","\n","LOG",".","warn","(","\"Exception","while","closing","distributed","log","manager\",","e",")",";","\n","}","\n","FutureUtils",".","complete","(","closeFuture,","null",")",";","\n","return","closeFuture",";","\n"],"docstring_tokens":["Close","the","metadata","accessor,","freeing","any","resources","it","may","hold"]}
{"code_tokens":["\n","public","static","String","getShortHierarchicalLedgerPath","(","long","ledgerId",")","{","\n","String","ledgerIdStr","=","getZKStringId","(","ledgerId",")",";","\n","//","do","2-4-4","split\n","StringBuilder","sb","=","new","StringBuilder","(",")",";","\n","sb",".","append","(","\"/\"",")","\n",".","append","(","ledgerIdStr",".","substring","(","0,","2",")",")",".","append","(","\"/\"",")","\n",".","append","(","ledgerIdStr",".","substring","(","2,","6",")",")",".","append","(","\"/\"",")","\n",".","append","(","LEDGER_NODE_PREFIX",")","\n",".","append","(","ledgerIdStr",".","substring","(","6,","10",")",")",";","\n","return","sb",".","toString","(",")",";","\n"],"docstring_tokens":["Get","the","hierarchical","ledger","path","according","to","the","ledger","id"]}
{"code_tokens":["\n","public","static","String","getLongHierarchicalLedgerPath","(","long","ledgerId",")","{","\n","String","ledgerIdStr","=","getZKStringIdForLongHierarchical","(","ledgerId",")",";","\n","//","do","3-4-4-4-4","split\n","StringBuilder","sb","=","new","StringBuilder","(",")",";","\n","sb",".","append","(","\"/\"",")","\n",".","append","(","ledgerIdStr",".","substring","(","0,","3",")",")",".","append","(","\"/\"",")","\n",".","append","(","ledgerIdStr",".","substring","(","3,","7",")",")",".","append","(","\"/\"",")","\n",".","append","(","ledgerIdStr",".","substring","(","7,","11",")",")",".","append","(","\"/\"",")","\n",".","append","(","ledgerIdStr",".","substring","(","11,","15",")",")",".","append","(","\"/\"",")","\n",".","append","(","LEDGER_NODE_PREFIX",")","\n",".","append","(","ledgerIdStr",".","substring","(","15,","19",")",")",";","\n","return","sb",".","toString","(",")",";","\n"],"docstring_tokens":["Get","the","long","hierarchical","ledger","path","according","to","the","ledger","id"]}
{"code_tokens":["\n","public","Map<String,","Set<Long>>","getBookieToLedgerIndex","(",")","\n","throws","BKAuditException","{","\n","//","bookie","vs","ledgers","map\n","final","ConcurrentHashMap<String,","Set<Long>>","bookie2ledgersMap","=","new","ConcurrentHashMap<String,","Set<Long>>","(",")",";","\n","final","CountDownLatch","ledgerCollectorLatch","=","new","CountDownLatch","(","1",")",";","\n\n","Processor<Long>","ledgerProcessor","=","new","Processor<Long>","(",")","{","\n","@Override\n","public","void","process","(","Long","ledgerId,","AsyncCallback",".","VoidCallback","iterCallback",")","{","\n","ledgerManager",".","readLedgerMetadata","(","ledgerId",")",".","whenComplete","(","(","metadata,","exception",")","->","{","\n","if","(","exception","==","null",")","{","\n","for","(","Map",".","Entry<Long,","?","extends","List<BookieId>>","ensemble\n",":","metadata",".","getValue","(",")",".","getAllEnsembles","(",")",".","entrySet","(",")",")","{","\n","for","(","BookieId","bookie",":","ensemble",".","getValue","(",")",")","{","\n","putLedger","(","bookie2ledgersMap,","bookie",".","toString","(",")",",","ledgerId",")",";","\n","}","\n","}","\n","iterCallback",".","processResult","(","BKException",".","Code",".","OK,","null,","null",")",";","\n","}","else","if","(","BKException",".","getExceptionCode","(","exception",")","\n","==","BKException",".","Code",".","NoSuchLedgerExistsOnMetadataServerException",")","{","\n","LOG",".","info","(","\"Ignoring","replication","of","already","deleted","ledger","{","}","\",","ledgerId",")",";","\n","iterCallback",".","processResult","(","BKException",".","Code",".","OK,","null,","null",")",";","\n","}","else","{","\n","LOG",".","warn","(","\"Unable","to","read","the","ledger:","{","}","information\",","ledgerId",")",";","\n","iterCallback",".","processResult","(","BKException",".","getExceptionCode","(","exception",")",",","null,","null",")",";","\n","}","\n","}",")",";","\n","}","\n","}",";","\n","//","Reading","the","result","after","processing","all","the","ledgers\n","final","List<Integer>","resultCode","=","new","ArrayList<Integer>","(","1",")",";","\n","ledgerManager",".","asyncProcessLedgers","(","ledgerProcessor,\n","new","AsyncCallback",".","VoidCallback","(",")","{","\n\n","@Override\n","public","void","processResult","(","int","rc,","String","s,","Object","obj",")","{","\n","resultCode",".","add","(","rc",")",";","\n","ledgerCollectorLatch",".","countDown","(",")",";","\n","}","\n","}",",","null,","BKException",".","Code",".","OK,","BKException",".","Code",".","ReadException",")",";","\n","try","{","\n","ledgerCollectorLatch",".","await","(",")",";","\n","}","catch","(","InterruptedException","e",")","{","\n","Thread",".","currentThread","(",")",".","interrupt","(",")",";","\n","throw","new","BKAuditException","(","\n","\"Exception","while","getting","the","bookie-ledgers\",","e",")",";","\n","}","\n","if","(","!resultCode",".","contains","(","BKException",".","Code",".","OK",")",")","{","\n","throw","new","BKAuditException","(","\n","\"Exception","while","getting","the","bookie-ledgers\",","BKException\n",".","create","(","resultCode",".","get","(","0",")",")",")",";","\n","}","\n","return","bookie2ledgersMap",";","\n"],"docstring_tokens":["Generating","bookie","vs","its","ledgers","map","by","reading","all","the","ledgers","in","each","bookie","and","parsing","its","metadata"]}
{"code_tokens":["\n","public","static","int","hash32","(","ByteBuf","data,","int","offset,","int","length,","int","seed",")","{","\n","int","m","=","0x5bd1e995",";","\n","int","r","=","24",";","\n\n","int","h","=","seed","^","length",";","\n\n","int","len4","=","length",">>","2",";","\n\n","for","(","int","i","=","0",";","i","<","len4",";","i++",")","{","\n","int","i4","=","i","<<","2",";","\n","int","k","=","data",".","getByte","(","offset","+","i4","+","3",")",";","\n","k","=","k","<<","8",";","\n","k","=","k","|","(","data",".","getByte","(","offset","+","i4","+","2",")","&","0xff",")",";","\n","k","=","k","<<","8",";","\n","k","=","k","|","(","data",".","getByte","(","offset","+","i4","+","1",")","&","0xff",")",";","\n","k","=","k","<<","8",";","\n","k","=","k","|","(","data",".","getByte","(","offset","+","i4","+","0",")","&","0xff",")",";","\n","k","*=","m",";","\n","k","^=","k",">>>","r",";","\n","k","*=","m",";","\n","h","*=","m",";","\n","h","^=","k",";","\n","}","\n\n","//","avoid","calculating","modulo\n","int","lenM","=","len4","<<","2",";","\n","int","left","=","length","-","lenM",";","\n\n","if","(","left","!=","0",")","{","\n","if","(","left",">=","3",")","{","\n","h","^=","(","int",")","data",".","getByte","(","offset","+","length","-","3",")","<<","16",";","\n","}","\n","if","(","left",">=","2",")","{","\n","h","^=","(","int",")","data",".","getByte","(","offset","+","length","-","2",")","<<","8",";","\n","}","\n","if","(","left",">=","1",")","{","\n","h","^=","(","int",")","data",".","getByte","(","offset","+","length","-","1",")",";","\n","}","\n\n","h","*=","m",";","\n","}","\n\n","h","^=","h",">>>","13",";","\n","h","*=","m",";","\n","h","^=","h",">>>","15",";","\n\n","return","h",";","\n"],"docstring_tokens":["Create","a","32","bits","murmur","hash","value","for","the","provided","data"]}
{"code_tokens":["\n","public","static","long","hash64","(","ByteBuf","key,","int","offset,","int","length,","long","seed",")","{","\n","long","m64","=","0xc6a4a7935bd1e995L",";","\n","int","r64","=","47",";","\n\n","long","h64","=","(","seed","&","0xffffffffL",")","^","(","m64","*","length",")",";","\n\n","int","lenLongs","=","length",">>","3",";","\n\n","for","(","int","i","=","0",";","i","<","lenLongs",";","++i",")","{","\n","int","i8","=","i","<<","3",";","\n\n","long","k64","=","(","(","long",")","key",".","getByte","(","offset","+","i8","+","0",")","&","0xff",")","\n","+","(","(","(","long",")","key",".","getByte","(","offset","+","i8","+","1",")","&","0xff",")","<<","8",")","\n","+","(","(","(","long",")","key",".","getByte","(","offset","+","i8","+","2",")","&","0xff",")","<<","16",")","\n","+","(","(","(","long",")","key",".","getByte","(","offset","+","i8","+","3",")","&","0xff",")","<<","24",")","\n","+","(","(","(","long",")","key",".","getByte","(","offset","+","i8","+","4",")","&","0xff",")","<<","32",")","\n","+","(","(","(","long",")","key",".","getByte","(","offset","+","i8","+","5",")","&","0xff",")","<<","40",")","\n","+","(","(","(","long",")","key",".","getByte","(","offset","+","i8","+","6",")","&","0xff",")","<<","48",")","\n","+","(","(","(","long",")","key",".","getByte","(","offset","+","i8","+","7",")","&","0xff",")","<<","56",")",";","\n\n","k64","*=","m64",";","\n","k64","^=","k64",">>>","r64",";","\n","k64","*=","m64",";","\n\n","h64","^=","k64",";","\n","h64","*=","m64",";","\n","}","\n\n","int","rem","=","length","&","0x7",";","\n\n","//","CHECKSTYLE",".","OFF:","FallThrough\n","switch","(","rem",")","{","\n","case","0:\n","break",";","\n","case","7:\n","h64","^=","(","long",")","key",".","getByte","(","offset","+","length","-","rem","+","6",")","<<","48",";","\n","case","6:\n","h64","^=","(","long",")","key",".","getByte","(","offset","+","length","-","rem","+","5",")","<<","40",";","\n","case","5:\n","h64","^=","(","long",")","key",".","getByte","(","offset","+","length","-","rem","+","4",")","<<","32",";","\n","case","4:\n","h64","^=","(","long",")","key",".","getByte","(","offset","+","length","-","rem","+","3",")","<<","24",";","\n","case","3:\n","h64","^=","(","long",")","key",".","getByte","(","offset","+","length","-","rem","+","2",")","<<","16",";","\n","case","2:\n","h64","^=","(","long",")","key",".","getByte","(","offset","+","length","-","rem","+","1",")","<<","8",";","\n","case","1:\n","h64","^=","(","long",")","key",".","getByte","(","offset","+","length","-","rem",")",";","\n","h64","*=","m64",";","\n","}","\n","//","CHECKSTYLE",".","ON:","FallThrough\n\n","h64","^=","h64",">>>","r64",";","\n","h64","*=","m64",";","\n","h64","^=","h64",">>>","r64",";","\n\n","return","h64",";","\n"],"docstring_tokens":["Create","a","64","bits","murmur","hash","value","for","the","provided","data"]}
{"code_tokens":["\n","public","static","NullValidator","of","(",")","{","\n","return","INSTANCE",";","\n"],"docstring_tokens":["Return","the","instance","of","NullValidator"]}
{"code_tokens":["\n","@Override\n","public","void","write","(","LogRecord","record",")","throws","IOException","{","\n","getLedgerWriter","(","record",".","getTransactionId","(",")",",","false",")",".","write","(","record",")",";","\n"],"docstring_tokens":["Write","log","records","to","the","stream"]}
{"code_tokens":["\n","@Override\n","@Deprecated\n","public","int","writeBulk","(","List<LogRecord>","records",")","throws","IOException","{","\n","return","getLedgerWriter","(","records",".","get","(","0",")",".","getTransactionId","(",")",",","false",")",".","writeBulk","(","records",")",";","\n"],"docstring_tokens":["Write","edits","logs","operation","to","the","stream"]}
{"code_tokens":["\n","public","ServerConfiguration","setGcWaitTime","(","long","gcWaitTime",")","{","\n","this",".","setProperty","(","GC_WAIT_TIME,","Long",".","toString","(","gcWaitTime",")",")",";","\n","return","this",";","\n"],"docstring_tokens":["Set","garbage","collection","wait","time"]}
{"code_tokens":["\n","public","boolean","isLocalScrubEnabled","(",")","{","\n","return","this",".","getLocalScrubPeriod","(",")",">","0",";","\n"],"docstring_tokens":["Get","whether","local","scrub","is","enabled"]}
{"code_tokens":["\n","public","ServerConfiguration","setFlushIntervalInBytes","(","long","flushInterval",")","{","\n","this",".","setProperty","(","FLUSH_ENTRYLOG_INTERVAL_BYTES,","Long",".","toString","(","flushInterval",")",")",";","\n","return","this",";","\n"],"docstring_tokens":["Set","entry","log","flush","interval","in","bytes"]}
{"code_tokens":["\n","public","ServerConfiguration","setPageLimit","(","int","pageLimit",")","{","\n","this",".","setProperty","(","PAGE_LIMIT,","pageLimit",")",";","\n","return","this",";","\n"],"docstring_tokens":["Set","limitation","number","of","index","pages","in","ledger","cache"]}
{"code_tokens":["\n","public","ServerConfiguration","setBookiePort","(","int","port",")","{","\n","this",".","setProperty","(","BOOKIE_PORT,","Integer",".","toString","(","port",")",")",";","\n","return","this",";","\n"],"docstring_tokens":["Set","new","bookie","port","that","bookie","server","listen","on"]}
{"code_tokens":["\n","public","ServerConfiguration","setListeningInterface","(","String","iface",")","{","\n","this",".","setProperty","(","LISTENING_INTERFACE,","iface",")",";","\n","return","this",";","\n"],"docstring_tokens":["Set","the","network","interface","that","the","bookie","should","listen","on"]}
{"code_tokens":["\n","public","ServerConfiguration","setAllowLoopback","(","boolean","allow",")","{","\n","this",".","setProperty","(","ALLOW_LOOPBACK,","allow",")",";","\n","return","this",";","\n"],"docstring_tokens":["Configure","the","bookie","to","allow","loopback","interfaces","to","be","used","as","the","primary","bookie","interface"]}
{"code_tokens":["\n","public","ServerConfiguration","setAllowEphemeralPorts","(","boolean","allow",")","{","\n","this",".","setProperty","(","ALLOW_EPHEMERAL_PORTS,","allow",")",";","\n","return","this",";","\n"],"docstring_tokens":["Configure","the","bookie","to","allow","using","an","ephemeral","port"]}
{"code_tokens":["\n","public","ServerConfiguration","setJournalDirName","(","String","journalDir",")","{","\n","this",".","setProperty","(","JOURNAL_DIRS,","new","String[]","{","journalDir","}",")",";","\n","return","this",";","\n"],"docstring_tokens":["Set","dir","name","to","store","journal","files"]}
{"code_tokens":["\n","public","File[]","getIndexDirs","(",")","{","\n","String[]","idxDirNames","=","getIndexDirNames","(",")",";","\n","if","(","null","==","idxDirNames",")","{","\n","return","null",";","\n","}","\n","File[]","idxDirs","=","new","File[idxDirNames",".","length]",";","\n","for","(","int","i","=","0",";","i","<","idxDirNames",".","length",";","i++",")","{","\n","idxDirs[i]","=","new","File","(","idxDirNames[i]",")",";","\n","}","\n","return","idxDirs",";","\n"],"docstring_tokens":["Get","index","dir","to","store","ledger","index","files"]}
{"code_tokens":["\n","public","ServerConfiguration","setIsForceGCAllowWhenNoSpace","(","boolean","force",")","{","\n","setProperty","(","IS_FORCE_GC_ALLOW_WHEN_NO_SPACE,","force",")",";","\n","return","this",";","\n"],"docstring_tokens":["Set","whether","force","GC","is","allowed","when","disk","full","or","almost","full"]}
{"code_tokens":["\n","public","ServerConfiguration","setPersistBookieStatusEnabled","(","boolean","enabled",")","{","\n","setProperty","(","PERSIST_BOOKIE_STATUS_ENABLED,","enabled",")",";","\n","return","this",";","\n"],"docstring_tokens":["Whether","to","persist","the","bookie","status","so","that","when","bookie","server","restarts,","it","will","continue","using","the","previous","status"]}
{"code_tokens":["\n","public","boolean","isPersistBookieStatusEnabled","(",")","{","\n","return","getBoolean","(","PERSIST_BOOKIE_STATUS_ENABLED,","false",")",";","\n"],"docstring_tokens":["Get","whether","to","persist","the","bookie","status","so","that","when","bookie","server","restarts,","it","will","continue","using","the","previous","status"]}
{"code_tokens":["\n","public","ServerConfiguration","setDiskUsageThreshold","(","float","threshold",")","{","\n","setProperty","(","DISK_USAGE_THRESHOLD,","threshold",")",";","\n","return","this",";","\n"],"docstring_tokens":["Set","the","Disk","free","space","threshold","as","a","fraction","of","the","total","after","which","disk","will","be","considered","as","full","during","disk","check"]}
{"code_tokens":["\n","public","ServerConfiguration","setAutoRecoveryDaemonEnabled","(","boolean","enabled",")","{","\n","setProperty","(","AUTO_RECOVERY_DAEMON_ENABLED,","enabled",")",";","\n","return","this",";","\n"],"docstring_tokens":["Sets","that","whether","the","auto-recovery","service","can","start","along","with","Bookie","server","itself","or","not"]}
{"code_tokens":["\n","public","boolean","isAutoRecoveryDaemonEnabled","(",")","{","\n","return","getBoolean","(","AUTO_RECOVERY_DAEMON_ENABLED,","false",")",";","\n"],"docstring_tokens":["Get","whether","the","Bookie","itself","can","start","auto-recovery","service","also","or","not"]}
{"code_tokens":["\n","public","ServerConfiguration","setForceReadOnlyBookie","(","boolean","enabled",")","{","\n","setProperty","(","FORCE_READ_ONLY_BOOKIE,","enabled",")",";","\n","return","this",";","\n"],"docstring_tokens":["Sets","that","whether","force","start","a","bookie","in","readonly","mode"]}
{"code_tokens":["\n","public","boolean","isForceReadOnlyBookie","(",")","{","\n","return","getBoolean","(","FORCE_READ_ONLY_BOOKIE,","false",")",";","\n"],"docstring_tokens":["Get","whether","the","Bookie","is","force","started","in","read","only","mode","or","not"]}
{"code_tokens":["\n","public","boolean","isEnableLocalTransport","(",")","{","\n","return","getBoolean","(","ENABLE_LOCAL_TRANSPORT,","false",")",";","\n"],"docstring_tokens":["Get","whether","to","listen","for","local","JVM","clients"]}
{"code_tokens":["\n","public","ServerConfiguration","setEnableLocalTransport","(","boolean","enableLocalTransport",")","{","\n","setProperty","(","ENABLE_LOCAL_TRANSPORT,","enableLocalTransport",")",";","\n","return","this",";","\n"],"docstring_tokens":["Configure","the","bookie","to","listen","for","BookKeeper","clients","executed","on","the","local","JVM"]}
{"code_tokens":["\n","public","ServerConfiguration","setStatsProviderClass","(","Class<?","extends","StatsProvider>","providerClass",")","{","\n","setProperty","(","STATS_PROVIDER_CLASS,","providerClass",".","getName","(",")",")",";","\n","return","this",";","\n"],"docstring_tokens":["Set","the","stats","provider","used","by","bookie"]}
{"code_tokens":["\n","public","ServerConfiguration","setMinUsableSizeForHighPriorityWrites","(","long","minUsableSizeForHighPriorityWrites",")","{","\n","this",".","setProperty","(","MIN_USABLESIZE_FOR_HIGH_PRIORITY_WRITES,","minUsableSizeForHighPriorityWrites",")",";","\n","return","this",";","\n"],"docstring_tokens":["Sets","the","minimum","safe","usable","size","to","be","available","in","ledger","directory","for","Bookie","to","accept","high","priority","writes"]}
{"code_tokens":["\n","public","String[]","getExtraServerComponents","(",")","{","\n","String","extraServerComponentsStr","=","getString","(","EXTRA_SERVER_COMPONENTS",")",";","\n","if","(","Strings",".","isNullOrEmpty","(","extraServerComponentsStr",")",")","{","\n","return","null",";","\n","}","\n","return","this",".","getStringArray","(","EXTRA_SERVER_COMPONENTS",")",";","\n"],"docstring_tokens":["Get","the","extra","list","of","server","lifecycle","components","to","enable","on","a","bookie","server"]}
{"code_tokens":["\n","public","ServerConfiguration","setExtraServerComponents","(","String[]","componentClasses",")","{","\n","this",".","setProperty","(","EXTRA_SERVER_COMPONENTS,","componentClasses",")",";","\n","return","this",";","\n"],"docstring_tokens":["Set","the","extra","list","of","server","lifecycle","components","to","enable","on","a","bookie","server"]}
{"code_tokens":["\n","public","static","InetSocketAddress","of","(","Endpoint","endpoint",")","{","\n","return","new","InetSocketAddress","(","endpoint",".","getHostname","(",")",",","endpoint",".","getPort","(",")",")",";","\n"],"docstring_tokens":["Get","the","inet","socket","address","for","the","provided","endpoint"]}
{"code_tokens":["\n","private","synchronized","boolean","haveDataToTransmit","(",")","{","\n","if","(","!transmitResultUpdater",".","compareAndSet","(","this,","BKException",".","Code",".","OK,","BKException",".","Code",".","OK",")",")","{","\n","//","Even","if","there","is","data","it","cannot","be","transmitted,","so","effectively","nothing","to","send\n","return","false",";","\n","}","\n\n","return","(","recordSetWriter",".","getNumRecords","(",")",">","0",")",";","\n"],"docstring_tokens":["Checks","if","there","is","any","data","to","transmit","so","that","the","periodic","flush","task","can","determine","if","there","is","anything","it","needs","to","do"]}
{"code_tokens":["\n","private","void","submitShutdownTask","(",")","{","\n","executor",".","submit","(","new","Runnable","(",")","{","\n","@Override\n","public","void","run","(",")","{","\n","if","(","!running",".","compareAndSet","(","true,","false",")",")","{","\n","return",";","\n","}","\n\n","try","{","\n","ledgerAuditorManager",".","close","(",")",";","\n","}","catch","(","InterruptedException","ie",")","{","\n","Thread",".","currentThread","(",")",".","interrupt","(",")",";","\n","LOG",".","warn","(","\"InterruptedException","while","closing","ledger","auditor","manager\",","ie",")",";","\n","}","catch","(","Exception","ke",")","{","\n","LOG",".","error","(","\"Exception","while","closing","ledger","auditor","manager\",","ke",")",";","\n","}","\n","}","\n","}",")",";","\n"],"docstring_tokens":["Run","cleanup","operations","for","the","auditor","elector"]}
{"code_tokens":["\n","@SuppressWarnings","(","\"unchecked\"",")","\n","Map<String,","String>","convertParams","(","HttpServerRequest","request",")","{","\n","Map<String,","String>","map","=","new","HashMap<>","(",")",";","\n","Iterator<Map",".","Entry<String,","String>>","iterator","=","request",".","params","(",")",".","iterator","(",")",";","\n","while","(","iterator",".","hasNext","(",")",")","{","\n","Map",".","Entry<String,","String>","entry","=","iterator",".","next","(",")",";","\n","map",".","put","(","entry",".","getKey","(",")",",","entry",".","getValue","(",")",")",";","\n","}","\n","return","map",";","\n"],"docstring_tokens":["Convert","http","request","parameters","to","a","map"]}
{"code_tokens":["\n","HttpServer",".","Method","convertMethod","(","HttpServerRequest","request",")","{","\n","switch","(","request",".","method","(",")",")","{","\n","case","POST:\n","return","HttpServer",".","Method",".","POST",";","\n","case","DELETE:\n","return","HttpServer",".","Method",".","DELETE",";","\n","case","PUT:\n","return","HttpServer",".","Method",".","PUT",";","\n","default:\n","return","HttpServer",".","Method",".","GET",";","\n","}","\n"],"docstring_tokens":["Convert","http","request","method","to","the","method","that","can","be","recognized","by","HttpServer"]}
{"code_tokens":["\n","public","void","put","(","String","path,","LogSegmentMetadata","segment",")","{","\n","if","(","isCacheEnabled",")","{","\n","cache",".","put","(","path,","segment",")",";","\n","}","\n"],"docstring_tokens":["Add","the","log","segment","of","path","to","the","cache"]}
{"code_tokens":["\n","public","void","invalidate","(","String","path",")","{","\n","if","(","isCacheEnabled",")","{","\n","cache",".","invalidate","(","path",")",";","\n","}","\n"],"docstring_tokens":["Invalid","the","cache","entry","associated","with","path"]}
{"code_tokens":["\n","public","void","replicateLedgerFragment","(","LedgerHandle","lh,\n","final","LedgerFragment","ledgerFragment,\n","final","BiConsumer<Long,","Long>","onReadEntryFailureCallback",")","\n","throws","InterruptedException,","BKException","{","\n","Optional<Set<BookieId>>","excludedBookies","=","Optional",".","empty","(",")",";","\n","Map<Integer,","BookieId>","targetBookieAddresses","=\n","getReplacementBookiesByIndexes","(","lh,","ledgerFragment",".","getEnsemble","(",")",",\n","ledgerFragment",".","getBookiesIndexes","(",")",",","excludedBookies",")",";","\n","replicateLedgerFragment","(","lh,","ledgerFragment,","targetBookieAddresses,","onReadEntryFailureCallback",")",";","\n"],"docstring_tokens":["Replicate","the","Ledger","fragment","to","target","Bookie","passed"]}
{"code_tokens":["\n","public","static","boolean","format","(","ServerConfiguration","conf,\n","boolean","isInteractive,","boolean","force",")","throws","Exception","{","\n","return","runFunctionWithMetadataBookieDriver","(","conf,","driver","->","{","\n","try","{","\n","boolean","ledgerRootExists","=","driver",".","getRegistrationManager","(",")",".","prepareFormat","(",")",";","\n\n","//","If","old","data","was","there","then","confirm","with","admin",".","\n","boolean","doFormat","=","true",";","\n","if","(","ledgerRootExists",")","{","\n","if","(","!isInteractive",")","{","\n","//","If","non","interactive","and","force","is","set,","then","delete","old","data",".","\n","doFormat","=","force",";","\n","}","else","{","\n","//","Confirm","with","the","admin",".","\n","doFormat","=","IOUtils\n",".","confirmPrompt","(","\"Ledger","root","already","exists",".","\"\n","+","\"Are","you","sure","to","format","bookkeeper","metadata?","\"\n","+","\"This","may","cause","data","loss",".","\"",")",";","\n","}","\n","}","\n\n","if","(","!doFormat",")","{","\n","return","false",";","\n","}","\n\n","driver",".","getLedgerManagerFactory","(",")",".","format","(","\n","conf,\n","driver",".","getLayoutManager","(",")",")",";","\n\n","return","driver",".","getRegistrationManager","(",")",".","format","(",")",";","\n","}","catch","(","Exception","e",")","{","\n","throw","new","UncheckedExecutionException","(","e",".","getMessage","(",")",",","e",")",";","\n","}","\n","}",")",";","\n"],"docstring_tokens":["Format","the","BookKeeper","metadata","in","zookeeper"]}
{"code_tokens":["\n","public","static","boolean","initNewCluster","(","ServerConfiguration","conf",")","throws","Exception","{","\n","return","runFunctionWithRegistrationManager","(","conf,","rm","->","{","\n","try","{","\n","return","rm",".","initNewCluster","(",")",";","\n","}","catch","(","Exception","e",")","{","\n","throw","new","UncheckedExecutionException","(","e",".","getMessage","(",")",",","e",")",";","\n","}","\n","}",")",";","\n"],"docstring_tokens":["Intializes","new","cluster","by","creating","required","znodes","for","the","cluster"]}
{"code_tokens":["\n","public","static","boolean","initBookie","(","ServerConfiguration","conf",")","throws","Exception","{","\n","/*\n","*","make","sure","that","journalDirs,","ledgerDirs","and","indexDirs","are","empty\n","*/\n","File[]","journalDirs","=","conf",".","getJournalDirs","(",")",";","\n","if","(","!validateDirectoriesAreEmpty","(","journalDirs,","\"JournalDir\"",")",")","{","\n","return","false",";","\n","}","\n\n","File[]","ledgerDirs","=","conf",".","getLedgerDirs","(",")",";","\n","if","(","!validateDirectoriesAreEmpty","(","ledgerDirs,","\"LedgerDir\"",")",")","{","\n","return","false",";","\n","}","\n\n","File[]","indexDirs","=","conf",".","getIndexDirs","(",")",";","\n","if","(","indexDirs","!=","null",")","{","\n","if","(","!validateDirectoriesAreEmpty","(","indexDirs,","\"IndexDir\"",")",")","{","\n","return","false",";","\n","}","\n","}","\n\n","return","runFunctionWithRegistrationManager","(","conf,","rm","->","{","\n","try","{","\n","/*\n","*","make","sure","that","there","is","no","bookie","registered","with","the","same\n","*","bookieid","and","the","cookie","for","the","same","bookieid","is","not","existing",".","\n","*/\n","BookieId","bookieId","=","Bookie",".","getBookieId","(","conf",")",";","\n","if","(","rm",".","isBookieRegistered","(","bookieId",")",")","{","\n","LOG",".","error","(","\"Bookie","with","bookieId:","{","}","is","still","registered,","\"\n","+","\"If","this","node","is","running","bookie","process,","try","stopping","it","first",".","\",","bookieId",")",";","\n","return","false",";","\n","}","\n\n","try","{","\n","rm",".","readCookie","(","bookieId",")",";","\n","LOG",".","error","(","\"Cookie","still","exists","in","the","ZK","for","this","bookie:","{","}",",","try","formatting","the","bookie\",","bookieId",")",";","\n","return","false",";","\n","}","catch","(","BookieException",".","CookieNotFoundException","nfe",")","{","\n","//","it","is","expected","for","readCookie","to","fail","with\n","//","BookieException",".","CookieNotFoundException\n","}","\n","return","true",";","\n","}","catch","(","Exception","e",")","{","\n","throw","new","UncheckedExecutionException","(","e",".","getMessage","(",")",",","e",")",";","\n","}","\n","}",")",";","\n"],"docstring_tokens":["Initializes","bookie,","by","making","sure","that","the","journalDir,","ledgerDirs","and","indexDirs","are","empty","and","there","is","no","registered","Bookie","with","this","BookieId"]}
{"code_tokens":["\n","public","CompletableFuture<AvailabilityOfEntriesOfLedger>","asyncGetListOfEntriesOfLedger","(","BookieId","address,\n","long","ledgerId",")","{","\n","return","bkc",".","getBookieClient","(",")",".","getListOfEntriesOfLedger","(","address,","ledgerId",")",";","\n"],"docstring_tokens":["Makes","async","request","for","getting","list","of","entries","of","ledger","from","a","bookie","and","returns","Future","for","the","result"]}
{"code_tokens":["\n","public","static","boolean","isRecoverableException","(","int","rc",")","{","\n","return","KeeperException",".","Code",".","CONNECTIONLOSS",".","intValue","(",")","==","rc\n","||","KeeperException",".","Code",".","OPERATIONTIMEOUT",".","intValue","(",")","==","rc\n","||","KeeperException",".","Code",".","SESSIONMOVED",".","intValue","(",")","==","rc\n","||","KeeperException",".","Code",".","SESSIONEXPIRED",".","intValue","(",")","==","rc",";","\n"],"docstring_tokens":["Check","whether","the","given","result","code","is","recoverable","by","retry"]}
{"code_tokens":["\n","public","CompletableFuture<Long>","asyncGetLogRecordCount","(","final","DLSN","beginDLSN",")","{","\n","return","streamMetadataStore",".","logExists","(","logMetadata",".","getUri","(",")",",","logMetadata",".","getLogName","(",")",")","\n",".","thenCompose","(","new","Function<Void,","CompletableFuture<Long>>","(",")","{","\n","public","CompletableFuture<Long>","apply","(","Void","done",")","{","\n\n","return","readLogSegmentsFromStore","(","\n","LogSegmentMetadata",".","COMPARATOR,\n","LogSegmentFilter",".","DEFAULT_FILTER,\n","null\n",")",".","thenCompose","(","new","Function<Versioned<List<LogSegmentMetadata>>,","CompletableFuture<Long>>","(",")","{","\n","public","CompletableFuture<Long>","apply","(","Versioned<List<LogSegmentMetadata>>","ledgerList",")","{","\n\n","List<CompletableFuture<Long>>","futureCounts","=\n","Lists",".","newArrayListWithExpectedSize","(","ledgerList",".","getValue","(",")",".","size","(",")",")",";","\n","for","(","LogSegmentMetadata","ledger",":","ledgerList",".","getValue","(",")",")","{","\n","if","(","ledger",".","getLogSegmentSequenceNumber","(",")",">=","beginDLSN",".","getLogSegmentSequenceNo","(",")",")","{","\n","futureCounts",".","add","(","asyncGetLogRecordCount","(","ledger,","beginDLSN",")",")",";","\n","}","\n","}","\n","return","FutureUtils",".","collect","(","futureCounts",")",".","thenApply","(","counts","->","sum","(","counts",")",")",";","\n","}","\n","}",")",";","\n","}","\n","}",")",";","\n"],"docstring_tokens":["Get","a","count","of","records","between","beginDLSN","and","the","end","of","the","stream"]}
{"code_tokens":["\n","public","void","disconnect","(",")","{","\n","disconnect","(","true",")",";","\n"],"docstring_tokens":["Disconnects","the","bookie","client"]}
{"code_tokens":["\n","public","void","close","(",")","{","\n","close","(","true",")",";","\n"],"docstring_tokens":["Closes","the","bookie","client","permanently"]}
{"code_tokens":["\n","@Override\n","public","void","channelInactive","(","ChannelHandlerContext","ctx",")","throws","Exception","{","\n","LOG",".","info","(","\"Disconnected","from","bookie","channel","{","}","\",","ctx",".","channel","(",")",")",";","\n","if","(","ctx",".","channel","(",")","!=","null",")","{","\n","closeChannel","(","ctx",".","channel","(",")",")",";","\n","if","(","ctx",".","channel","(",")",".","pipeline","(",")",".","get","(","SslHandler",".","class",")","!=","null",")","{","\n","activeTlsChannelCounter",".","dec","(",")",";","\n","}","else","{","\n","activeNonTlsChannelCounter",".","dec","(",")",";","\n","}","\n","}","\n\n","errorOutOutstandingEntries","(","BKException",".","Code",".","BookieHandleNotAvailableException",")",";","\n","errorOutPendingOps","(","BKException",".","Code",".","BookieHandleNotAvailableException",")",";","\n\n","synchronized","(","this",")","{","\n","if","(","this",".","channel","==","ctx",".","channel","(",")","\n","&&","state","!=","ConnectionState",".","CLOSED",")","{","\n","state","=","ConnectionState",".","DISCONNECTED",";","\n","}","\n","}","\n\n","//","we","don't","want","to","reconnect","right","away",".","If","someone","sends","a","request","to\n","//","this","address,","we","will","reconnect",".","\n"],"docstring_tokens":["If","our","channel","has","disconnected,","we","just","error","out","the","pending","entries"]}
{"code_tokens":["\n","private","static","CachedFileInfo","tryRetainFileInfo","(","CachedFileInfo","fi",")","throws","IOException","{","\n","boolean","retained","=","fi",".","tryRetain","(",")",";","\n","if","(","!retained",")","{","\n","throw","new","IOException","(","\"FileInfo","\"","+","fi","+","\"","is","already","marked","dead\"",")",";","\n","}","else","if","(","fi",".","isDeleted","(",")",")","{","\n","throw","new","Bookie",".","NoLedgerException","(","fi",".","ledgerId",")",";","\n","}","\n","return","fi",";","\n"],"docstring_tokens":["This","method","should","be","under","`lock`","of","FileInfoBackingCache"]}
{"code_tokens":["\n","private","Chunk","getCurrentChunk","(",")","{","\n","while","(","true",")","{","\n","//","Try","to","get","the","chunk\n","Chunk","c","=","curChunk",".","get","(",")",";","\n","if","(","c","!=","null",")","{","\n","return","c",";","\n","}","\n\n","//","No","current","chunk,","so","we","want","to","allocate","one",".","We","race\n","//","against","other","allocators","to","CAS","in","an","uninitialized","chunk\n","//","(","which","is","cheap","to","allocate",")","\n","c","=","new","Chunk","(","chunkSize",")",";","\n","if","(","curChunk",".","compareAndSet","(","null,","c",")",")","{","\n","c",".","init","(",")",";","\n","return","c",";","\n","}","\n","//","lost","race\n","}","\n"],"docstring_tokens":["Get","the","current","chunk,","or,","if","there","is","no","current","chunk,","allocate","a","new","one","from","the","JVM"]}
{"code_tokens":["\n","private","void","rescueAllocator","(","final","SimpleLedgerAllocator","ledgerAllocator",")","throws","DLInterruptedException","{","\n","SimpleLedgerAllocator","oldAllocator",";","\n","synchronized","(","this",")","{","\n","oldAllocator","=","rescueMap",".","put","(","ledgerAllocator",".","allocatePath,","ledgerAllocator",")",";","\n","}","\n","if","(","oldAllocator","!=","null",")","{","\n","logger",".","info","(","\"ledger","allocator","{","}","is","being","rescued",".","\",","ledgerAllocator",".","allocatePath",")",";","\n","return",";","\n","}","\n","try","{","\n","zkc",".","get","(",")",".","getData","(","ledgerAllocator",".","allocatePath,","false,","new","AsyncCallback",".","DataCallback","(",")","{","\n","@Override\n","public","void","processResult","(","int","rc,","String","path,","Object","ctx,","byte[]","data,","Stat","stat",")","{","\n","boolean","retry","=","false",";","\n","SimpleLedgerAllocator","newAllocator","=","null",";","\n","if","(","KeeperException",".","Code",".","OK",".","intValue","(",")","==","rc",")","{","\n","Versioned<byte[]>","allocatorData","=\n","new","Versioned<byte[]>","(","data,","new","LongVersion","(","stat",".","getVersion","(",")",")",")",";","\n","logger",".","info","(","\"Rescuing","ledger","allocator","{","}",".","\",","path",")",";","\n","newAllocator","=","new","SimpleLedgerAllocator","(","path,","allocatorData,","quorumConfigProvider,","zkc,","bkc",")",";","\n","newAllocator",".","start","(",")",";","\n","logger",".","info","(","\"Rescued","ledger","allocator","{","}",".","\",","path",")",";","\n","}","else","if","(","KeeperException",".","Code",".","NONODE",".","intValue","(",")","==","rc",")","{","\n","logger",".","info","(","\"Ledger","allocator","{","}","doesn't","exist,","skip","rescuing","it",".","\",","path",")",";","\n","}","else","{","\n","retry","=","true",";","\n","}","\n","synchronized","(","LedgerAllocatorPool",".","this",")","{","\n","rescueMap",".","remove","(","ledgerAllocator",".","allocatePath",")",";","\n","if","(","null","!=","newAllocator",")","{","\n","pendingList",".","addLast","(","newAllocator",")",";","\n","}","\n","}","\n","if","(","retry",")","{","\n","scheduleAllocatorRescue","(","ledgerAllocator",")",";","\n","}","\n","}","\n","}",",","null",")",";","\n","}","catch","(","InterruptedException","ie",")","{","\n","Thread",".","currentThread","(",")",".","interrupt","(",")",";","\n","logger",".","warn","(","\"Interrupted","on","rescuing","ledger","allocator","{","}",":","\",","ledgerAllocator",".","allocatePath,","ie",")",";","\n","synchronized","(","LedgerAllocatorPool",".","this",")","{","\n","rescueMap",".","remove","(","ledgerAllocator",".","allocatePath",")",";","\n","}","\n","throw","new","DLInterruptedException","(","\"Interrupted","on","rescuing","ledger","allocator","\"\n","+","ledgerAllocator",".","allocatePath,","ie",")",";","\n","}","catch","(","IOException","ioe",")","{","\n","logger",".","warn","(","\"Failed","to","rescue","ledger","allocator","{","}",",","retry","rescuing","it","later",":","\",\n","ledgerAllocator",".","allocatePath,","ioe",")",";","\n","synchronized","(","LedgerAllocatorPool",".","this",")","{","\n","rescueMap",".","remove","(","ledgerAllocator",".","allocatePath",")",";","\n","}","\n","scheduleAllocatorRescue","(","ledgerAllocator",")",";","\n","}","\n"],"docstring_tokens":["Rescue","a","ledger","allocator","from","an","ERROR","state"]}
{"code_tokens":["\n","@Deprecated\n","public","static","boolean","canHandle","(","Table","table",")","{","\n","if","(","table","instanceof","TransientTable",")","{","\n","//","CALCITE-3673:","TransientTable","can't","be","implemented","with","Enumerable\n","return","false",";","\n","}","\n","//","See","org",".","apache",".","calcite",".","prepare",".","RelOptTableImpl",".","getClassExpressionFunction\n","return","table","instanceof","QueryableTable\n","||","table","instanceof","FilterableTable\n","||","table","instanceof","ProjectableFilterableTable\n","||","table","instanceof","ScannableTable",";","\n"],"docstring_tokens":["Returns","whether","EnumerableTableScan","can","generate","code","to","handle","a","particular","variant","of","the","Table","SPI"]}
{"code_tokens":["\n","public","boolean","supportsApproxCountDistinct","(",")","{","\n","return","false",";","\n"],"docstring_tokens":["Returns","whether","this","dialect","supports","APPROX_COUNT_DISTINCT","functions"]}
{"code_tokens":["\n","public","boolean","supportsDataType","(","RelDataType","type",")","{","\n","return","true",";","\n"],"docstring_tokens":["Returns","whether","this","dialect","supports","a","given","type"]}
{"code_tokens":["\n","public","boolean","supportsJoinType","(","JoinRelType","joinType",")","{","\n","return","true",";","\n"],"docstring_tokens":["Returns","whether","this","dialect","support","the","specified","type","of","join"]}
{"code_tokens":["\n","protected","SqlNode","parseQuery","(","String","sql",")","{","\n","SqlNode","node",";","\n","try","{","\n","node","=","SqlParser",".","create","(","sql",")",".","parseQuery","(",")",";","\n","}","catch","(","SqlParseException","e",")","{","\n","String","message","=","\"Received","error","while","parsing","SQL","'\"","+","sql","+","\"'\"\n","+","\"",";","error","is:\\n\"\n","+","e",".","toString","(",")",";","\n","throw","new","AssertionError","(","message",")",";","\n","}","\n","return","node",";","\n"],"docstring_tokens":["Parses","a","SQL","query"]}
{"code_tokens":["\n","public","Enumerable<Object>","query","(","\n","final","TableReaderFactory","tableReaderFactory,\n","final","List<Map",".","Entry<String,","Class>>","fields,\n","final","List<Map",".","Entry<String,","String>>","selectFields,\n","final","IndexCondition","condition,\n","final","Boolean","ascOrder",")","{","\n","final","QueryType","queryType","=","condition",".","getQueryType","(",")",";","\n","final","List<Object>","pointQueryKey","=","condition",".","getPointQueryKey","(",")",";","\n","final","ComparisonOperator","rangeQueryLowerOp","=","condition",".","getRangeQueryLowerOp","(",")",";","\n","final","List<Object>","rangeQueryLowerKey","=","condition",".","getRangeQueryLowerKey","(",")",";","\n","final","ComparisonOperator","rangeQueryUpperOp","=","condition",".","getRangeQueryUpperOp","(",")",";","\n","final","List<Object>","rangeQueryUpperKey","=","condition",".","getRangeQueryUpperKey","(",")",";","\n","final","String","indexName","=","condition",".","getIndexName","(",")",";","\n\n","//","Build","the","type","of","the","resulting","row","based","on","the","provided","fields\n","final","RelDataTypeFactory","typeFactory","=\n","new","SqlTypeFactoryImpl","(","RelDataTypeSystem",".","DEFAULT",")",";","\n","final","RelDataTypeFactory",".","Builder","fieldInfo","=","typeFactory",".","builder","(",")",";","\n","final","RelDataType","rowType","=","getRowType","(","typeFactory",")",";","\n\n","Function1<String,","Void>","addField","=","fieldName","->","{","\n","RelDataType","relDataType","=\n","rowType",".","getField","(","fieldName,","true,","false",")",".","getType","(",")",";","\n","fieldInfo",".","add","(","fieldName,","relDataType",")",".","nullable","(","relDataType",".","isNullable","(",")",")",";","\n","return","null",";","\n","}",";","\n\n","List<String>","selectedColumnNames","=","new","ArrayList<>","(","selectFields",".","size","(",")",")",";","\n","if","(","selectFields",".","isEmpty","(",")",")","{","\n","for","(","Map",".","Entry<String,","Class>","field",":","fields",")","{","\n","addField",".","apply","(","field",".","getKey","(",")",")",";","\n","}","\n","}","else","{","\n","for","(","Map",".","Entry<String,","String>","field",":","selectFields",")","{","\n","addField",".","apply","(","field",".","getKey","(",")",")",";","\n","selectedColumnNames",".","add","(","field",".","getKey","(",")",")",";","\n","}","\n","}","\n\n","final","RelProtoDataType","resultRowType","=","RelDataTypeImpl",".","proto","(","fieldInfo",".","build","(",")",")",";","\n\n","TableReader","tableReader","=","tableReaderFactory",".","createTableReader","(","tableName",")",";","\n","tableReader",".","open","(",")",";","\n","return","new","AbstractEnumerable<Object>","(",")","{","\n","@Override","public","Enumerator<Object>","enumerator","(",")","{","\n","Iterator<GenericRecord>","resultIterator",";","\n","LOGGER",".","debug","(","\"Create","query","iterator,","queryType=","{","}",",","indexName=","{","}",",","\"\n","+","\"pointQueryKey=","{","}",",","projection=","{","}",",","rangeQueryKey=","{","}","{","}","AND","{","}","{","}",",","\"\n","+","\"ascOrder=","{","}","\",","queryType,","indexName,","pointQueryKey,\n","selectedColumnNames,","rangeQueryLowerKey,","rangeQueryLowerOp,\n","rangeQueryUpperKey,","rangeQueryUpperOp,","ascOrder",")",";","\n","switch","(","queryType",")","{","\n","case","PK_POINT_QUERY:\n","resultIterator","=\n","RecordIterator",".","create","(","tableReader\n",".","queryByPrimaryKey","(","pointQueryKey,","selectedColumnNames",")",")",";","\n","break",";","\n","case","PK_RANGE_QUERY:\n","resultIterator","=","tableReader",".","getRangeQueryIterator","(","\n","rangeQueryLowerKey,","rangeQueryLowerOp,","rangeQueryUpperKey,","rangeQueryUpperOp,\n","selectedColumnNames,","ascOrder",")",";","\n","break",";","\n","case","SK_POINT_QUERY:\n","resultIterator","=","tableReader",".","getRecordIteratorBySk","(","indexName,\n","pointQueryKey,","ComparisonOperator",".","GTE,","pointQueryKey,","ComparisonOperator",".","LTE,\n","selectedColumnNames,","ascOrder",")",";","\n","break",";","\n","case","SK_RANGE_QUERY:\n","case","SK_FULL_SCAN:\n","resultIterator","=","tableReader",".","getRecordIteratorBySk","(","indexName,\n","rangeQueryLowerKey,","rangeQueryLowerOp,","rangeQueryUpperKey,","rangeQueryUpperOp,\n","selectedColumnNames,","ascOrder",")",";","\n","break",";","\n","case","PK_FULL_SCAN:\n","resultIterator","=\n","tableReader",".","getQueryAllIterator","(","selectedColumnNames,","ascOrder",")",";","\n","break",";","\n","default:\n","throw","new","AssertionError","(","\"query","type","is","invalid\"",")",";","\n","}","\n\n","RelDataType","rowType","=","resultRowType",".","apply","(","typeFactory",")",";","\n","return","new","InnodbEnumerator","(","resultIterator,","rowType",")","{","\n","@Override","public","void","close","(",")","{","\n","super",".","close","(",")",";","\n","tableReader",".","close","(",")",";","\n","}","\n","}",";","\n","}","\n","}",";","\n"],"docstring_tokens":["Executes","a","query","on","the","underlying","InnoDB","table"]}
{"code_tokens":["\n","public","final","SqlValidatorFixture","sql","(","String","sql",")","{","\n","return","fixture","(",")",".","withSql","(","sql",")",";","\n"],"docstring_tokens":["Creates","a","test","context","with","a","SQL","query"]}
{"code_tokens":["\n","public","final","SqlValidatorFixture","expr","(","String","sql",")","{","\n","return","fixture","(",")",".","withExpr","(","sql",")",";","\n"],"docstring_tokens":["Creates","a","test","context","with","a","SQL","expression"]}
{"code_tokens":["\n","public","final","boolean","containsOver","(",")","{","\n","return","RexOver",".","containsOver","(","condition",")",";","\n"],"docstring_tokens":["Returns","whether","this","Filter","contains","any","windowed-aggregate","functions"]}
{"code_tokens":["\n","public","List<RelHint>","apply","(","List<RelHint>","hints,","RelNode","rel",")","{","\n","return","hints",".","stream","(",")","\n",".","filter","(","relHint","->","canApply","(","relHint,","rel",")",")","\n",".","collect","(","Collectors",".","toList","(",")",")",";","\n"],"docstring_tokens":["Applies","this","HintStrategyTable","hint","strategies","to","the","given","relational","expression","and","the","hints"]}
{"code_tokens":["\n","public","boolean","validateHint","(","RelHint","hint",")","{","\n","final","Key","key","=","Key",".","of","(","hint",".","hintName",")",";","\n","boolean","hintExists","=","this",".","errorHandler",".","check","(","\n","this",".","strategies",".","containsKey","(","key",")",",\n","\"Hint:","{","}","should","be","registered","in","the","{","}","\",\n","hint",".","hintName,\n","this",".","getClass","(",")",".","getSimpleName","(",")",")",";","\n","if","(","!hintExists",")","{","\n","return","false",";","\n","}","\n","final","HintStrategy","strategy","=","strategies",".","get","(","key",")",";","\n","if","(","strategy","!=","null","&&","strategy",".","hintOptionChecker","!=","null",")","{","\n","return","strategy",".","hintOptionChecker",".","checkOptions","(","hint,","this",".","errorHandler",")",";","\n","}","\n","return","true",";","\n"],"docstring_tokens":["Checks","if","the","given","hint","is","valid"]}
{"code_tokens":["\n","public","boolean","isRuleExcluded","(","Hintable","hintable,","RelOptRule","rule",")","{","\n","final","List<RelHint>","hints","=","hintable",".","getHints","(",")",";","\n","if","(","hints",".","size","(",")","==","0",")","{","\n","return","false",";","\n","}","\n\n","for","(","RelHint","hint",":","hints",")","{","\n","final","Key","key","=","Key",".","of","(","hint",".","hintName",")",";","\n","assert","this",".","strategies",".","containsKey","(","key",")",":","\"hint","\"","+","hint",".","hintName","+","\"","must","be","present\"",";","\n","final","HintStrategy","strategy","=","strategies",".","get","(","key",")",";","\n","if","(","strategy",".","excludedRules",".","contains","(","rule",")",")","{","\n","return","isDesiredConversionPossible","(","strategy",".","converterRules,","hintable",")",";","\n","}","\n","}","\n\n","return","false",";","\n"],"docstring_tokens":["Returns","whether","the","hintable","has","hints","that","imply","the","given","rule","should","be","excluded"]}
{"code_tokens":["\n","private","static","boolean","isDesiredConversionPossible","(","\n","Set<ConverterRule>","converterRules,\n","Hintable","hintable",")","{","\n","//","If","no","converter","rules","are","specified,","we","assume","the","conversion","is","possible",".","\n","return","converterRules",".","size","(",")","==","0\n","||","converterRules",".","stream","(",")","\n",".","anyMatch","(","converterRule","->","converterRule",".","convert","(","(","RelNode",")","hintable",")","!=","null",")",";","\n"],"docstring_tokens":["Returns","whether","the","hintable","has","hints","that","imply","the","given","hintable","can","make","conversion","successfully"]}
{"code_tokens":["\n","public","static","Builder","builder","(",")","{","\n","return","new","Builder","(",")",";","\n"],"docstring_tokens":["Returns","a","HintStrategyTable","builder"]}
{"code_tokens":["\n","private","static","CassandraResource","getOrCreate","(","ExtensionContext","context",")","{","\n","//","same","cassandra","instance","should","be","shared","across","all","extension","instances\n","return","context",".","getRoot","(",")","\n",".","getStore","(","NAMESPACE",")","\n",".","getOrComputeIfAbsent","(","KEY,","key","->","new","CassandraResource","(",")",",","CassandraResource",".","class",")",";","\n"],"docstring_tokens":["Registers","a","Cassandra","resource","in","root","context,","so","it","can","be","shared","with","other","tests"]}
{"code_tokens":["\n","public","String","asString","(",")","{","\n","final","Map<String,","@Nullable","Object>","map","=","jsonBuilder",".","map","(",")",";","\n","map",".","put","(","\"rels\",","relList",")",";","\n","return","jsonBuilder",".","toJsonString","(","map",")",";","\n"],"docstring_tokens":["Returns","a","JSON","string","describing","the","relational","expressions","that","were","just","explained"]}
{"code_tokens":["\n","public","static","RelDistribution","hash","(","Collection<?","extends","Number>","numbers",")","{","\n","ImmutableIntList","list","=","normalizeKeys","(","numbers",")",";","\n","return","of","(","RelDistribution",".","Type",".","HASH_DISTRIBUTED,","list",")",";","\n"],"docstring_tokens":["Creates","a","hash","distribution"]}
{"code_tokens":["\n","private","static","ImmutableIntList","normalizeKeys","(","Collection<?","extends","Number>","keys",")","{","\n","ImmutableIntList","list","=","ImmutableIntList",".","copyOf","(","keys",")",";","\n","if","(","list",".","size","(",")",">","1\n","&&","!Ordering",".","natural","(",")",".","isOrdered","(","list",")",")","{","\n","list","=","ImmutableIntList",".","copyOf","(","Ordering",".","natural","(",")",".","sortedCopy","(","list",")",")",";","\n","}","\n","return","list",";","\n"],"docstring_tokens":["Creates","ordered","immutable","copy","of","keys","collection"]}
{"code_tokens":["\n","public","void","setDataSource","(","String","jdbcURL,","Properties","jdbcProps",")","{","\n","this",".","jdbcURL","=","jdbcURL",";","\n","this",".","jdbcProps","=","jdbcProps",";","\n"],"docstring_tokens":["Sets","the","jdbc","data","source","for","executing","the","command","threads"]}
{"code_tokens":["\n","public","boolean","failed","(",")","{","\n","return","!failedThreads",".","isEmpty","(",")",";","\n"],"docstring_tokens":["Returns","whether","any","test","thread","failed"]}
{"code_tokens":["\n","void","printCommands","(","\n","PrintStream","out,\n","Integer","threadId",")","{","\n","int","stepNumber","=","1",";","\n","for","(","ConcurrentTestCommand","command",":","getCommandIterable","(","threadId",")",")","{","\n","out",".","println","(","\"\\tStep","\"","+","stepNumber++\n","+","\":","\"","+","command",".","getClass","(",")",".","getName","(",")",")",";","\n","}","\n"],"docstring_tokens":["Prints","a","description","of","the","commands","to","be","executed","for","a","given","thread"]}
{"code_tokens":["\n","public","static","<T>","ComparableList<T>","of","(",")","{","\n","//noinspection","unchecked\n","return","COMPARABLE_EMPTY_LIST",";","\n"],"docstring_tokens":["Creates","a","flat","list","with","0","elements"]}
{"code_tokens":["\n","public","static","<T>","List<T>","of","(","T","t0",")","{","\n","return","new","Flat1List<>","(","t0",")",";","\n"],"docstring_tokens":["Creates","a","flat","list","with","1","element"]}
{"code_tokens":["\n","public","static","<T>","List<T>","of","(","T","t0,","T","t1",")","{","\n","return","new","Flat2List<>","(","t0,","t1",")",";","\n"],"docstring_tokens":["Creates","a","flat","list","with","2","elements"]}
{"code_tokens":["\n","public","static","<T>","List<T>","of","(","T","t0,","T","t1,","T","t2",")","{","\n","return","new","Flat3List<>","(","t0,","t1,","t2",")",";","\n"],"docstring_tokens":["Creates","a","flat","list","with","3","elements"]}
{"code_tokens":["\n","public","static","<T>","List<T>","of","(","T","t0,","T","t1,","T","t2,","T","t3",")","{","\n","return","new","Flat4List<>","(","t0,","t1,","t2,","t3",")",";","\n"],"docstring_tokens":["Creates","a","flat","list","with","4","elements"]}
{"code_tokens":["\n","public","static","<T>","List<T>","of","(","T","t0,","T","t1,","T","t2,","T","t3,","T","t4",")","{","\n","return","new","Flat5List<>","(","t0,","t1,","t2,","t3,","t4",")",";","\n"],"docstring_tokens":["Creates","a","flat","list","with","6","elements"]}
{"code_tokens":["\n","public","static","boolean","isStar","(","List<RexNode>","exps,","RelDataType","inputRowType,\n","RelDataType","projectRowType",")","{","\n","assert","exps",".","size","(",")","==","projectRowType",".","getFieldCount","(",")",";","\n","int","i","=","0",";","\n","for","(","RexNode","ref",":","exps",")","{","\n","if","(","!","(","ref","instanceof","RexInputRef",")",")","{","\n","return","false",";","\n","}","else","if","(","(","(","RexInputRef",")","ref",")",".","getIndex","(",")","!=","i++",")","{","\n","return","false",";","\n","}","\n","}","\n","return","i","==","inputRowType",".","getFieldCount","(",")","\n","&&","inputRowType",".","getFieldNames","(",")",".","equals","(","projectRowType",".","getFieldNames","(",")",")",";","\n"],"docstring_tokens":["Returns","whether","a","list","of","expressions","projects","all","fields,","in","order,","from","the","input,","with","the","same","names"]}
{"code_tokens":["\n","private","boolean","requiresAlias","(","SqlNode","node",")","{","\n","if","(","!dialect",".","requiresAliasForFromItems","(",")",")","{","\n","return","false",";","\n","}","\n","switch","(","node",".","getKind","(",")",")","{","\n","case","IDENTIFIER:\n","return","!dialect",".","hasImplicitTableAlias","(",")",";","\n","case","AS:\n","case","JOIN:\n","case","EXPLICIT_TABLE:\n","return","false",";","\n","default:\n","return","true",";","\n","}","\n"],"docstring_tokens":["Returns","whether","we","need","to","add","an","alias","if","this","node","is","to","be","the","FROM","clause","of","a","SELECT"]}
{"code_tokens":["\n","public","static","SqlKeyConstraint","unique","(","SqlParserPos","pos,","SqlIdentifier","name,\n","SqlNodeList","columnList",")","{","\n","return","new","SqlKeyConstraint","(","pos,","name,","columnList",")",";","\n"],"docstring_tokens":["Creates","a","UNIQUE","constraint"]}
{"code_tokens":["\n","public","static","SqlKeyConstraint","primary","(","SqlParserPos","pos,","SqlIdentifier","name,\n","SqlNodeList","columnList",")","{","\n","return","new","SqlKeyConstraint","(","pos,","name,","columnList",")","{","\n","@Override","public","SqlOperator","getOperator","(",")","{","\n","return","PRIMARY",";","\n","}","\n","}",";","\n"],"docstring_tokens":["Creates","a","PRIMARY","KEY","constraint"]}
{"code_tokens":["\n","static","SqlUserDefinedFunction","createPigBagUDF","(","ImmutableList<RexNode>","operands",")","{","\n","final","SqlOperandMetadata","operandMetadata","=\n","OperandTypes",".","operandMetadata","(","getTypeFamilies","(","operands",")",",\n","typeFactory","->","getRelDataTypes","(","operands",")",",","i","->","\"arg\"","+","i,\n","i","->","false",")",";","\n","return","new","PigUserDefinedFunction","(","\"PIG_BAG\",\n","infer","(","PigRelSqlUdfs",".","PIG_BAG_FUNC",")",",","operandMetadata,\n","PigRelSqlUdfs",".","PIG_BAG_FUNC",")",";","\n"],"docstring_tokens":["Creates","a","Pig","DataBag","from","a","list","of","relational","operands"]}
{"code_tokens":["\n","private","static","RelDataType","getRelDataType","(","ScalarFunction","function",")","{","\n","final","JavaTypeFactory","typeFactory","=","TYPE_FACTORY",";","\n","final","RelDataType","type","=","function",".","getReturnType","(","typeFactory",")",";","\n","if","(","type","instanceof","RelDataTypeFactoryImpl",".","JavaType\n","&&","(","(","RelDataTypeFactoryImpl",".","JavaType",")","type",")",".","getJavaClass","(",")","\n","==","Object",".","class",")","{","\n","return","typeFactory",".","createTypeWithNullability","(","\n","typeFactory",".","createSqlType","(","SqlTypeName",".","ANY",")",",","true",")",";","\n","}","\n","return","typeFactory",".","toSql","(","type",")",";","\n"],"docstring_tokens":["Gets","the","return","data","type","for","a","given","function"]}
{"code_tokens":["\n","public","static","Tuple","buildTuple","(","Object",".",".",".","elements",")","{","\n","return","TupleFactory",".","getInstance","(",")",".","newTuple","(","Arrays",".","asList","(","elements",")",")",";","\n"],"docstring_tokens":["Implementation","for","PIG_TUPLE","functions"]}
{"code_tokens":["\n","public","static","Tuple","buildBag","(","Object",".",".",".","elements",")","{","\n","final","TupleFactory","tupleFactory","=","TupleFactory",".","getInstance","(",")",";","\n","final","BagFactory","bagFactory","=","BagFactory",".","getInstance","(",")",";","\n","//","Convert","each","row","into","a","Tuple\n","List<Tuple>","tupleList","=","new","ArrayList<>","(",")",";","\n","if","(","elements","!=","null",")","{","\n","//","The","first","input","contains","a","list","of","rows","for","the","bag\n","final","List","bag","=","(","elements[0]","instanceof","List",")","\n","?","(","List",")","elements[0]\n",":","Collections",".","singletonList","(","elements[0]",")",";","\n","for","(","Object","row",":","bag",")","{","\n","tupleList",".","add","(","tupleFactory",".","newTuple","(","Arrays",".","asList","(","row",")",")",")",";","\n","}","\n","}","\n\n","//","Then","build","a","bag","from","the","tuple","list\n","DataBag","resultBag","=","bagFactory",".","newDefaultBag","(","tupleList",")",";","\n\n","//","The","returned","result","is","a","new","Tuple","with","the","newly","constructed","DataBag\n","//","as","the","first","item",".","\n","List<Object>","finalTuple","=","new","ArrayList<>","(",")",";","\n","finalTuple",".","add","(","resultBag",")",";","\n\n","if","(","elements","!=","null",")","{","\n","//","Add","the","remaining","elements","from","the","input\n","for","(","int","i","=","1",";","i","<","elements",".","length",";","i++",")","{","\n","finalTuple",".","add","(","elements[i]",")",";","\n","}","\n","}","\n\n","return","tupleFactory",".","newTuple","(","finalTuple",")",";","\n"],"docstring_tokens":["Implementation","for","PIG_BAG","functions"]}
{"code_tokens":["\n","public","RelJson","withInputTranslator","(","InputTranslator","inputTranslator",")","{","\n","if","(","inputTranslator","==","this",".","inputTranslator",")","{","\n","return","this",";","\n","}","\n","return","new","RelJson","(","jsonBuilder,","inputTranslator",")",";","\n"],"docstring_tokens":["Returns","a","RelJson","with","a","given","InputTranslator"]}
{"code_tokens":["\n","public","void","attachTo","(","RelOptPlanner","planner",")","{","\n","assert","this",".","planner","==","null",";","\n","planner",".","addListener","(","this",")",";","\n","this",".","planner","=","planner",";","\n"],"docstring_tokens":["Attaches","the","visualizer","to","the","planner"]}
{"code_tokens":["\n","private","static","List<RelNode>","getInputs","(","final","RelNode","node",")","{","\n","return","node",".","getInputs","(",")",".","stream","(",")",".","map","(","n","->","{","\n","if","(","n","instanceof","HepRelVertex",")","{","\n","return","(","(","HepRelVertex",")","n",")",".","getCurrentRel","(",")",";","\n","}","\n","return","n",";","\n","}",")",".","collect","(","Collectors",".","toList","(",")",")",";","\n"],"docstring_tokens":["Get","the","inputs","for","a","node,","unwrapping","HepRelVertex","nodes"]}
{"code_tokens":["\n","private","void","updateFinalPlan","(","RelNode","node",")","{","\n","int","size","=","this",".","steps",".","size","(",")",";","\n","if","(","size",">","0","&&","FINAL",".","equals","(","this",".","steps",".","get","(","size","-","1",")",".","getId","(",")",")",")","{","\n","return",";","\n","}","\n\n","this",".","registerRelNode","(","node",")",".","updateAttribute","(","\"inFinalPlan\",","Boolean",".","TRUE",")",";","\n","if","(","node","instanceof","RelSubset",")","{","\n","RelNode","best","=","(","(","RelSubset",")","node",")",".","getBest","(",")",";","\n","if","(","best","==","null",")","{","\n","return",";","\n","}","\n","updateFinalPlan","(","best",")",";","\n","}","else","{","\n","for","(","RelNode","input",":","getInputs","(","node",")",")","{","\n","updateFinalPlan","(","input",")",";","\n","}","\n","}","\n"],"docstring_tokens":["Mark","nodes","that","are","part","of","the","final","plan"]}
{"code_tokens":["\n","private","void","updateNodeInfo","(","final","RelNode","rel,","final","boolean","isLastStep",")","{","\n","NodeUpdateHelper","helper","=","registerRelNode","(","rel",")",";","\n","if","(","this",".","includeIntermediateCosts","||","isLastStep",")","{","\n","RelOptPlanner","planner","=","this",".","planner",";","\n","assert","planner","!=","null",";","\n","RelMetadataQuery","mq","=","rel",".","getCluster","(",")",".","getMetadataQuery","(",")",";","\n","RelOptCost","cost","=","planner",".","getCost","(","rel,","mq",")",";","\n","Double","rowCount","=","mq",".","getRowCount","(","rel",")",";","\n","helper",".","updateAttribute","(","\"cost\",","formatCost","(","rowCount,","cost",")",")",";","\n","}","\n\n","List<String>","inputs","=","new","ArrayList<>","(",")",";","\n","if","(","rel","instanceof","RelSubset",")","{","\n","RelSubset","relSubset","=","(","RelSubset",")","rel",";","\n","relSubset",".","getRels","(",")",".","forEach","(","input","->","inputs",".","add","(","key","(","input",")",")",")",";","\n","Set<String>","transitive","=","new","HashSet<>","(",")",";","\n","relSubset",".","getSubsetsSatisfyingThis","(",")","\n",".","filter","(","other","->","!other",".","equals","(","relSubset",")",")","\n",".","forEach","(","input","->","{","\n","inputs",".","add","(","key","(","input",")",")",";","\n","if","(","!includeTransitiveEdges",")","{","\n","input",".","getRels","(",")",".","forEach","(","r","->","transitive",".","add","(","key","(","r",")",")",")",";","\n","}","\n","}",")",";","\n","inputs",".","removeAll","(","transitive",")",";","\n","}","else","{","\n","getInputs","(","rel",")",".","forEach","(","input","->","inputs",".","add","(","key","(","input",")",")",")",";","\n","}","\n\n","helper",".","updateAttribute","(","\"inputs\",","inputs",")",";","\n"],"docstring_tokens":["Check","and","store","the","changes","of","the","rel","node"]}
{"code_tokens":["\n","public","void","writeToFile","(",")","{","\n","if","(","outputDirectory","==","null","||","outputSuffix","==","null",")","{","\n","return",";","\n","}","\n\n","try","{","\n","String","templatePath","=","Paths",".","get","(","templateDirectory",")",".","resolve","(","\"viz-template",".","html\"",")",".","toString","(",")",";","\n","ClassLoader","cl","=","getClass","(",")",".","getClassLoader","(",")",";","\n","assert","cl","!=","null",";","\n","InputStream","resourceAsStream","=","cl",".","getResourceAsStream","(","templatePath",")",";","\n","assert","resourceAsStream","!=","null",";","\n","String","htmlTemplate","=","IOUtils",".","toString","(","resourceAsStream,","StandardCharsets",".","UTF_8",")",";","\n\n","String","htmlFileName","=","\"planner-viz\"","+","outputSuffix","+","\"",".","html\"",";","\n","String","dataFileName","=","\"planner-viz-data\"","+","outputSuffix","+","\"",".","js\"",";","\n\n","String","replaceString","=","\"src=\\\"planner-viz-data",".","js\\\"\"",";","\n","int","replaceIndex","=","htmlTemplate",".","indexOf","(","replaceString",")",";","\n","String","htmlContent","=","htmlTemplate",".","substring","(","0,","replaceIndex",")","\n","+","\"src=\\\"\"","+","dataFileName","+","\"\\\"\"\n","+","htmlTemplate",".","substring","(","replaceIndex","+","replaceString",".","length","(",")",")",";","\n\n","String","dataJsContent","=","\"var","data","=","\"","+","getJsonStringResult","(",")","+","\"",";","\\n\"",";","\n\n","Path","outputDirPath","=","Paths",".","get","(","outputDirectory",")",";","\n","Path","htmlOutput","=","outputDirPath",".","resolve","(","htmlFileName",")",";","\n","Path","dataOutput","=","outputDirPath",".","resolve","(","dataFileName",")",";","\n\n","if","(","!Files",".","exists","(","outputDirPath",")",")","{","\n","Files",".","createDirectories","(","outputDirPath",")",";","\n","}","\n\n","Files",".","write","(","htmlOutput,","htmlContent",".","getBytes","(","Charsets",".","UTF_8",")",",","StandardOpenOption",".","CREATE,\n","StandardOpenOption",".","TRUNCATE_EXISTING",")",";","\n","Files",".","write","(","dataOutput,","dataJsContent",".","getBytes","(","Charsets",".","UTF_8",")",",","StandardOpenOption",".","CREATE,\n","StandardOpenOption",".","TRUNCATE_EXISTING",")",";","\n","}","catch","(","IOException","e",")","{","\n","throw","new","UncheckedIOException","(","e",")",";","\n","}","\n"],"docstring_tokens":["Writes","the","HTML","and","JS","files","of","the","rule","match","visualization"]}
{"code_tokens":["\n","public","boolean","isCaseSensitive","(",")","{","\n","return","caseSensitive",";","\n"],"docstring_tokens":["Returns","whether","this","operator","matches","the","case","of","its","operands"]}
{"code_tokens":["\n","public","final","boolean","containsOver","(",")","{","\n","return","RexOver",".","containsOver","(","getProjects","(",")",",","null",")",";","\n"],"docstring_tokens":["Returns","whether","this","Project","contains","any","windowed-aggregate","functions"]}
{"code_tokens":["\n","public","@Nullable","RelOptPredicateList","getAllPredicates","(","TableScan","scan,","RelMetadataQuery","mq",")","{","\n","final","BuiltInMetadata",".","AllPredicates",".","Handler","handler","=\n","scan",".","getTable","(",")",".","unwrap","(","BuiltInMetadata",".","AllPredicates",".","Handler",".","class",")",";","\n","if","(","handler","!=","null",")","{","\n","return","handler",".","getAllPredicates","(","scan,","mq",")",";","\n","}","\n","return","RelOptPredicateList",".","EMPTY",";","\n"],"docstring_tokens":["Extracts","predicates","for","a","table","scan"]}
{"code_tokens":["\n","private","static","@Nullable","RelOptPredicateList","getAllFilterPredicates","(","RelNode","rel,\n","RelMetadataQuery","mq,","RexNode","pred",")","{","\n","final","RexBuilder","rexBuilder","=","rel",".","getCluster","(",")",".","getRexBuilder","(",")",";","\n","final","RelOptPredicateList","predsBelow","=","mq",".","getAllPredicates","(","rel",")",";","\n","if","(","predsBelow","==","null",")","{","\n","//","Safety","check\n","return","null",";","\n","}","\n\n","//","Extract","input","fields","referenced","by","Filter","condition\n","final","Set<RelDataTypeField>","inputExtraFields","=","new","LinkedHashSet<>","(",")",";","\n","final","RelOptUtil",".","InputFinder","inputFinder","=","new","RelOptUtil",".","InputFinder","(","inputExtraFields",")",";","\n","pred",".","accept","(","inputFinder",")",";","\n","final","ImmutableBitSet","inputFieldsUsed","=","inputFinder",".","build","(",")",";","\n\n","//","Infer","column","origin","expressions","for","given","references\n","final","Map<RexInputRef,","Set<RexNode>>","mapping","=","new","LinkedHashMap<>","(",")",";","\n","for","(","int","idx",":","inputFieldsUsed",")","{","\n","final","RexInputRef","ref","=","RexInputRef",".","of","(","idx,","rel",".","getRowType","(",")",".","getFieldList","(",")",")",";","\n","final","Set<RexNode>","originalExprs","=","mq",".","getExpressionLineage","(","rel,","ref",")",";","\n","if","(","originalExprs","==","null",")","{","\n","//","Bail","out\n","return","null",";","\n","}","\n","mapping",".","put","(","ref,","originalExprs",")",";","\n","}","\n\n","//","Replace","with","new","expressions","and","return","union","of","predicates\n","final","Set<RexNode>","allExprs","=\n","RelMdExpressionLineage",".","createAllPossibleExpressions","(","rexBuilder,","pred,","mapping",")",";","\n","if","(","allExprs","==","null",")","{","\n","return","null",";","\n","}","\n","return","predsBelow",".","union","(","rexBuilder,","RelOptPredicateList",".","of","(","rexBuilder,","allExprs",")",")",";","\n"],"docstring_tokens":["Add","the","Filter","condition","to","the","list","obtained","from","the","input"]}
{"code_tokens":["\n","public","@Nullable","RelOptPredicateList","getAllPredicates","(","Join","join,","RelMetadataQuery","mq",")","{","\n","if","(","join",".","getJoinType","(",")",".","isOuterJoin","(",")",")","{","\n","//","We","cannot","map","origin","of","this","expression",".","\n","return","null",";","\n","}","\n\n","final","RexBuilder","rexBuilder","=","join",".","getCluster","(",")",".","getRexBuilder","(",")",";","\n","final","RexNode","pred","=","join",".","getCondition","(",")",";","\n\n","final","Multimap<List<String>,","RelTableRef>","qualifiedNamesToRefs","=","HashMultimap",".","create","(",")",";","\n","RelOptPredicateList","newPreds","=","RelOptPredicateList",".","EMPTY",";","\n","for","(","RelNode","input",":","join",".","getInputs","(",")",")","{","\n","final","RelOptPredicateList","inputPreds","=","mq",".","getAllPredicates","(","input",")",";","\n","if","(","inputPreds","==","null",")","{","\n","//","Bail","out\n","return","null",";","\n","}","\n","//","Gather","table","references\n","final","Set<RelTableRef>","tableRefs","=","mq",".","getTableReferences","(","input",")",";","\n","if","(","tableRefs","==","null",")","{","\n","return","null",";","\n","}","\n","if","(","input","==","join",".","getLeft","(",")",")","{","\n","//","Left","input","references","remain","unchanged\n","for","(","RelTableRef","leftRef",":","tableRefs",")","{","\n","qualifiedNamesToRefs",".","put","(","leftRef",".","getQualifiedName","(",")",",","leftRef",")",";","\n","}","\n","newPreds","=","newPreds",".","union","(","rexBuilder,","inputPreds",")",";","\n","}","else","{","\n","//","Right","input","references","might","need","to","be","updated","if","there","are","table","name\n","//","clashes","with","left","input\n","final","Map<RelTableRef,","RelTableRef>","currentTablesMapping","=","new","HashMap<>","(",")",";","\n","for","(","RelTableRef","rightRef",":","tableRefs",")","{","\n","int","shift","=","0",";","\n","Collection<RelTableRef>","lRefs","=","qualifiedNamesToRefs",".","get","(","\n","rightRef",".","getQualifiedName","(",")",")",";","\n","if","(","lRefs","!=","null",")","{","\n","shift","=","lRefs",".","size","(",")",";","\n","}","\n","currentTablesMapping",".","put","(","rightRef,\n","RelTableRef",".","of","(","rightRef",".","getTable","(",")",",","shift","+","rightRef",".","getEntityNumber","(",")",")",")",";","\n","}","\n","final","List<RexNode>","updatedPreds","=\n","Util",".","transform","(","inputPreds",".","pulledUpPredicates,\n","e","->","RexUtil",".","swapTableReferences","(","rexBuilder,","e,\n","currentTablesMapping",")",")",";","\n","newPreds","=","newPreds",".","union","(","rexBuilder,\n","RelOptPredicateList",".","of","(","rexBuilder,","updatedPreds",")",")",";","\n","}","\n","}","\n\n","//","Extract","input","fields","referenced","by","Join","condition\n","final","Set<RelDataTypeField>","inputExtraFields","=","new","LinkedHashSet<>","(",")",";","\n","final","RelOptUtil",".","InputFinder","inputFinder","=","new","RelOptUtil",".","InputFinder","(","inputExtraFields",")",";","\n","pred",".","accept","(","inputFinder",")",";","\n","final","ImmutableBitSet","inputFieldsUsed","=","inputFinder",".","build","(",")",";","\n\n","//","Infer","column","origin","expressions","for","given","references\n","final","Map<RexInputRef,","Set<RexNode>>","mapping","=","new","LinkedHashMap<>","(",")",";","\n","final","RelDataType","fullRowType","=","SqlValidatorUtil",".","createJoinType","(","\n","rexBuilder",".","getTypeFactory","(",")",",\n","join",".","getLeft","(",")",".","getRowType","(",")",",\n","join",".","getRight","(",")",".","getRowType","(",")",",\n","null,\n","ImmutableList",".","of","(",")",")",";","\n","for","(","int","idx",":","inputFieldsUsed",")","{","\n","final","RexInputRef","inputRef","=","RexInputRef",".","of","(","idx,","fullRowType",".","getFieldList","(",")",")",";","\n","final","Set<RexNode>","originalExprs","=","mq",".","getExpressionLineage","(","join,","inputRef",")",";","\n","if","(","originalExprs","==","null",")","{","\n","//","Bail","out\n","return","null",";","\n","}","\n","final","RexInputRef","ref","=","RexInputRef",".","of","(","idx,","fullRowType",".","getFieldList","(",")",")",";","\n","mapping",".","put","(","ref,","originalExprs",")",";","\n","}","\n\n","//","Replace","with","new","expressions","and","return","union","of","predicates\n","final","Set<RexNode>","allExprs","=\n","RelMdExpressionLineage",".","createAllPossibleExpressions","(","rexBuilder,","pred,","mapping",")",";","\n","if","(","allExprs","==","null",")","{","\n","return","null",";","\n","}","\n","return","newPreds",".","union","(","rexBuilder,","RelOptPredicateList",".","of","(","rexBuilder,","allExprs",")",")",";","\n"],"docstring_tokens":["Add","the","Join","condition","to","the","list","obtained","from","the","input"]}
{"code_tokens":["\n","public","static","SqlOperatorTable","spatialInstance","(",")","{","\n","return","SPATIAL",".","get","(",")",";","\n"],"docstring_tokens":["Returns","the","Spatial","operator","table,","creating","it","if","necessary"]}
{"code_tokens":["\n","public","static","SqlOperatorTable","chain","(","Iterable<SqlOperatorTable>","tables",")","{","\n","final","ImmutableList<SqlOperatorTable>","list","=\n","ImmutableList",".","copyOf","(","tables",")",";","\n","if","(","list",".","size","(",")","==","1",")","{","\n","return","list",".","get","(","0",")",";","\n","}","\n","return","new","ChainedSqlOperatorTable","(","list",")",";","\n"],"docstring_tokens":["Creates","a","composite","operator","table"]}
{"code_tokens":["\n","public","static","SqlOperatorTable","chain","(","SqlOperatorTable",".",".",".","tables",")","{","\n","return","chain","(","ImmutableList",".","copyOf","(","tables",")",")",";","\n"],"docstring_tokens":["Creates","a","composite","operator","table","from","an","array","of","tables"]}
{"code_tokens":["\n","public","void","run","(",")","{","\n","try","{","\n","connection","=","DriverManager",".","getConnection","(","jdbcURL,","jdbcProps",")",";","\n","if","(","connection",".","getMetaData","(",")",".","supportsTransactions","(",")",")","{","\n","connection",".","setAutoCommit","(","false",")",";","\n","}","\n","}","catch","(","Throwable","t",")","{","\n","handleError","(","t,","\"during","connect\",","null",")",";","\n","}","\n\n","//","stepNumber","is","used","to","reconstitute","the","original","step\n","//","numbers","passed","by","the","test","case","author",".","\n","int","stepNumber","=","0",";","\n\n","for","(","ConcurrentTestCommand","command",":","commands",")","{","\n","if","(","!","(","command\n","instanceof\n","ConcurrentTestCommandGenerator",".","AutoSynchronizationCommand",")",")","{","\n","stepNumber++",";","\n","}","\n\n","//","if","(","debugPrintStream","!=","null",")","{","\n","//","debugPrintStream",".","println","(","Thread",".","currentThread","(",")",".","getName","(",")","\n","//","+","\":","Step","\"\n","//","+","stepNumber\n","//","+","\":","\"\n","//","+","System",".","currentTimeMillis","(",")",")",";","\n","//","}","\n\n","//","synchronization","commands","are","always","executed,","lest","we","deadlock\n","boolean","isSync","=","command\n","instanceof","ConcurrentTestCommandGenerator",".","SynchronizationCommand",";","\n\n","if","(","isSync\n","||","(","(","connection","!=","null",")","\n","&&","(","command","!=","null",")","\n","&&","(","error","==","null",")",")",")","{","\n","try","{","\n","command",".","execute","(","this",")",";","\n","}","catch","(","Throwable","t",")","{","\n","handleError","(","t,","\"during","step","\"","+","stepNumber,","command",")",";","\n","}","\n","}","\n","}","\n\n","try","{","\n","if","(","connection","!=","null",")","{","\n","if","(","connection",".","getMetaData","(",")",".","supportsTransactions","(",")",")","{","\n","connection",".","rollback","(",")",";","\n","}","\n","connection",".","close","(",")",";","\n","}","\n","}","catch","(","Throwable","t",")","{","\n","handleError","(","t,","\"during","connection","close\",","null",")",";","\n","}","\n"],"docstring_tokens":["Executes","the","configured","commands"]}
{"code_tokens":["\n","protected","RexLiteral","null_","(","RelDataType","type",")","{","\n","return","rexBuilder",".","makeNullLiteral","(","nullable","(","type",")",")",";","\n"],"docstring_tokens":["Creates","null","literal","with","given","type"]}
{"code_tokens":["\n","public","static","BitSet","range","(","int","toIndex",")","{","\n","return","range","(","0,","toIndex",")",";","\n"],"docstring_tokens":["Creates","a","BitSet","with","bits","between","0","and","toIndex","set"]}
{"code_tokens":["\n","public","static","void","setAll","(","BitSet","bitSet,","Iterable<?","extends","Number>","list",")","{","\n","for","(","Number","number",":","list",")","{","\n","bitSet",".","set","(","number",".","intValue","(",")",")",";","\n","}","\n"],"docstring_tokens":["Sets","all","bits","in","a","given","BitSet","corresponding","to","integers","from","a","list"]}
{"code_tokens":["\n","RelOptFixture","fixture","(",")","{","\n","return","RelOptFixture",".","DEFAULT",";","\n"],"docstring_tokens":["Creates","a","fixture","for","a","test"]}
{"code_tokens":["\n","protected","final","RelOptFixture","sql","(","String","sql",")","{","\n","return","fixture","(",")",".","sql","(","sql",")",";","\n"],"docstring_tokens":["Creates","a","fixture","and","sets","its","SQL","statement"]}
{"code_tokens":["\n","protected","final","RelOptFixture","relFn","(","Function<RelBuilder,","RelNode>","relFn",")","{","\n","return","fixture","(",")",".","relFn","(","relFn",")",";","\n"],"docstring_tokens":["Initiates","a","test","case","with","a","given","RelNode","supplier"]}
{"code_tokens":["\n","private","String","computeDigest","(",")","{","\n","StringBuilder","buf","=\n","new","StringBuilder","(","\"rule","[\"","+","getRule","(",")","+","\"]","rels","[\"",")",";","\n","for","(","int","i","=","0",";","i","<","rels",".","length",";","i++",")","{","\n","if","(","i",">","0",")","{","\n","buf",".","append","(","','",")",";","\n","}","\n","buf",".","append","(","'#'",")",".","append","(","rels[i]",".","getId","(",")",")",";","\n","}","\n","buf",".","append","(","']'",")",";","\n","return","buf",".","toString","(",")",";","\n"],"docstring_tokens":["Computes","a","string","describing","this","rule","match"]}
{"code_tokens":["\n","@Deprecated","//","to","be","removed","before","2",".","0\n","public","void","recomputeDigest","(",")","{","\n","digest","=","computeDigest","(",")",";","\n"],"docstring_tokens":["Recomputes","the","digest","of","this","VolcanoRuleMatch"]}
{"code_tokens":["\n","private","static","<E>","boolean","allNotNull","(","E[]","es,","Litmus","litmus",")","{","\n","for","(","E","e",":","es",")","{","\n","if","(","e","==","null",")","{","\n","return","litmus",".","fail","(","\"was","null\",","(","Object",")","es",")",";","\n","}","\n","}","\n","return","litmus",".","succeed","(",")",";","\n"],"docstring_tokens":["Returns","whether","all","elements","of","a","given","array","are","not-null;","fails","if","any","are","null"]}
{"code_tokens":["\n","protected","<MH","extends","MetadataHandler<?>>","MH","handler","(","Class<MH>","handlerClass",")","{","\n","return","getMetadataHandlerProvider","(",")",".","handler","(","handlerClass",")",";","\n"],"docstring_tokens":["Provide","a","handler","for","the","requested","metadata","class"]}
{"code_tokens":["\n","public","boolean","clearCache","(","RelNode","rel",")","{","\n","Map<Object,","Object>","row","=","map",".","row","(","rel",")",";","\n","if","(","row",".","isEmpty","(",")",")","{","\n","return","false",";","\n","}","\n\n","row",".","clear","(",")",";","\n","return","true",";","\n"],"docstring_tokens":["Removes","cached","metadata","values","for","specified","RelNode"]}
{"code_tokens":["\n","public","static","RelDataType","toSql","(","final","RelDataTypeFactory","typeFactory,\n","RelDataType","type",")","{","\n","if","(","type","instanceof","RelRecordType",")","{","\n","return","typeFactory",".","createTypeWithNullability","(","\n","typeFactory",".","createStructType","(","\n","type",".","getFieldList","(",")","\n",".","stream","(",")","\n",".","map","(","field","->","toSql","(","typeFactory,","field",".","getType","(",")",")",")","\n",".","collect","(","Collectors",".","toList","(",")",")",",\n","type",".","getFieldNames","(",")",")",",\n","type",".","isNullable","(",")",")",";","\n","}","else","if","(","type","instanceof","JavaType",")","{","\n","SqlTypeName","sqlTypeName","=","type",".","getSqlTypeName","(",")",";","\n","final","RelDataType","relDataType",";","\n","if","(","SqlTypeUtil",".","isArray","(","type",")",")","{","\n","//","Transform","to","sql","type,","take","care","for","two","cases:\n","//","1",".","type",".","getJavaClass","(",")","is","collection","with","erased","generic","type\n","//","2",".","ElementType","returned","by","JavaType","is","also","of","JavaType,\n","//","and","needs","conversion","using","typeFactory\n","final","RelDataType","elementType","=","toSqlTypeWithNullToAny","(","\n","typeFactory,","type",".","getComponentType","(",")",")",";","\n","relDataType","=","typeFactory",".","createArrayType","(","elementType,","-1",")",";","\n","}","else","if","(","SqlTypeUtil",".","isMap","(","type",")",")","{","\n","final","RelDataType","keyType","=","toSqlTypeWithNullToAny","(","\n","typeFactory,","type",".","getKeyType","(",")",")",";","\n","final","RelDataType","valueType","=","toSqlTypeWithNullToAny","(","\n","typeFactory,","type",".","getValueType","(",")",")",";","\n","relDataType","=","typeFactory",".","createMapType","(","keyType,","valueType",")",";","\n","}","else","{","\n","relDataType","=","typeFactory",".","createSqlType","(","sqlTypeName",")",";","\n","}","\n","return","typeFactory",".","createTypeWithNullability","(","relDataType,","type",".","isNullable","(",")",")",";","\n","}","\n","return","type",";","\n"],"docstring_tokens":["Converts","a","type","in","Java","format","to","a","SQL-oriented","type"]}
{"code_tokens":["\n","private","Type","createSyntheticType","(","RelRecordType","type",")","{","\n","final","String","name","=\n","\"Record\"","+","type",".","getFieldCount","(",")","+","\"_\"","+","syntheticTypes",".","size","(",")",";","\n","final","SyntheticRecordType","syntheticType","=\n","new","SyntheticRecordType","(","type,","name",")",";","\n","for","(","final","RelDataTypeField","recordField",":","type",".","getFieldList","(",")",")","{","\n","final","Type","javaClass","=","getJavaClass","(","recordField",".","getType","(",")",")",";","\n","syntheticType",".","fields",".","add","(","\n","new","RecordFieldImpl","(","\n","syntheticType,\n","recordField",".","getName","(",")",",\n","javaClass,\n","recordField",".","getType","(",")",".","isNullable","(",")","\n","&&","!Primitive",".","is","(","javaClass",")",",\n","Modifier",".","PUBLIC",")",")",";","\n","}","\n","return","register","(","syntheticType",")",";","\n"],"docstring_tokens":["Creates","a","synthetic","Java","class","whose","fields","have","the","same","names","and","relational","types"]}
{"code_tokens":["\n","public","static","AggregateCall","create","(","SqlAggFunction","aggFunction,\n","boolean","distinct,","boolean","approximate,","boolean","ignoreNulls,\n","List<Integer>","argList,","int","filterArg,\n","@Nullable","ImmutableBitSet","distinctKeys,","RelCollation","collation,\n","int","groupCount,\n","RelNode","input,","@Nullable","RelDataType","type,","@Nullable","String","name",")","{","\n","if","(","type","==","null",")","{","\n","final","RelDataTypeFactory","typeFactory","=\n","input",".","getCluster","(",")",".","getTypeFactory","(",")",";","\n","final","List<RelDataType>","types","=\n","SqlTypeUtil",".","projectTypes","(","input",".","getRowType","(",")",",","argList",")",";","\n","final","Aggregate",".","AggCallBinding","callBinding","=\n","new","Aggregate",".","AggCallBinding","(","typeFactory,","aggFunction,","types,\n","groupCount,","filterArg",">=","0",")",";","\n","type","=","aggFunction",".","inferReturnType","(","callBinding",")",";","\n","}","\n","return","create","(","aggFunction,","distinct,","approximate,","ignoreNulls,","argList,\n","filterArg,","distinctKeys,","collation,","type,","name",")",";","\n"],"docstring_tokens":["Creates","an","AggregateCall,","inferring","its","type","if","type","is","null"]}
{"code_tokens":["\n","public","final","boolean","ignoreNulls","(",")","{","\n","return","ignoreNulls",";","\n"],"docstring_tokens":["Returns","whether","this","AggregateCall","ignores","nulls"]}
{"code_tokens":["\n","public","boolean","hasFilter","(",")","{","\n","return","filterArg",">=","0",";","\n"],"docstring_tokens":["Returns","whether","this","AggregateCall","has","a","filter","argument"]}
{"code_tokens":["\n","public","Aggregate",".","AggCallBinding","createBinding","(","\n","Aggregate","aggregateRelBase",")","{","\n","final","RelDataType","rowType","=","aggregateRelBase",".","getInput","(",")",".","getRowType","(",")",";","\n\n","return","new","Aggregate",".","AggCallBinding","(","\n","aggregateRelBase",".","getCluster","(",")",".","getTypeFactory","(",")",",","aggFunction,\n","SqlTypeUtil",".","projectTypes","(","rowType,","argList",")",",\n","aggregateRelBase",".","getGroupCount","(",")",",","hasFilter","(",")",")",";","\n"],"docstring_tokens":["Creates","a","binding","of","this","call","in","the","context","of","an","org.apache.calcite.rel.logical.LogicalAggregate,","which","can","then","be","used","to","infer","the","return","type"]}
{"code_tokens":["\n","@Deprecated","//","to","be","removed","before","2",".","0\n","public","AggregateCall","copy","(","List<Integer>","args,","int","filterArg,\n","@Nullable","ImmutableBitSet","distinctKeys,","RelCollation","collation",")","{","\n","return","new","AggregateCall","(","aggFunction,","distinct,","approximate,","ignoreNulls,\n","args,","filterArg,","distinctKeys,","collation,","type,","name",")",";","\n"],"docstring_tokens":["Creates","an","equivalent","AggregateCall","with","new","argument","ordinals"]}
{"code_tokens":["\n","public","AggregateCall","transform","(","Mappings",".","TargetMapping","mapping",")","{","\n","return","copy","(","Mappings",".","apply2","(","(","Mapping",")","mapping,","argList",")",",\n","hasFilter","(",")","?","Mappings",".","apply","(","mapping,","filterArg",")",":","-1,\n","distinctKeys","==","null","?","null",":","distinctKeys",".","permute","(","mapping",")",",\n","RelCollations",".","permute","(","collation,","mapping",")",")",";","\n"],"docstring_tokens":["Creates","a","copy","of","this","aggregate","call,","applying","a","mapping","to","its","arguments"]}
{"code_tokens":["\n","@Override","public","String","toString","(",")","{","\n","return","\"rel#\"","+","id","+","':'","+","getDigest","(",")",";","\n"],"docstring_tokens":["Description;","consists","of","id","plus","digest"]}
{"code_tokens":["\n","@API","(","since","=","\"1",".","25\",","status","=","API",".","Status",".","MAINTAINED",")","\n","@Override","public","int","deepHashCode","(",")","{","\n","int","result","=","31","+","getTraitSet","(",")",".","hashCode","(",")",";","\n","List<Pair<String,","@Nullable","Object>>","items","=","this",".","getDigestItems","(",")",";","\n","for","(","Pair<String,","@Nullable","Object>","item",":","items",")","{","\n","Object","value","=","item",".","right",";","\n","final","int","h",";","\n","if","(","value","==","null",")","{","\n","h","=","0",";","\n","}","else","if","(","value","instanceof","RelNode",")","{","\n","h","=","(","(","RelNode",")","value",")",".","deepHashCode","(",")",";","\n","}","else","{","\n","h","=","value",".","hashCode","(",")",";","\n","}","\n","result","=","result","*","31","+","h",";","\n","}","\n","return","result",";","\n"],"docstring_tokens":["Compute","hash","code","for","RelNode","digest"]}
{"code_tokens":["\n","private","static","@Nullable","DruidJsonFilter","toEqualityKindDruidFilter","(","RexNode","rexNode,\n","RelDataType","rowType,","DruidQuery","druidQuery",")","{","\n","if","(","rexNode",".","getKind","(",")","!=","SqlKind",".","EQUALS\n","&&","rexNode",".","getKind","(",")","!=","SqlKind",".","NOT_EQUALS",")","{","\n","throw","new","AssertionError","(","\n","DruidQuery",".","format","(","\"Expecting","EQUALS","or","NOT_EQUALS","but","got","[%s]\",","rexNode",".","getKind","(",")",")",")",";","\n","}","\n","final","RexCall","rexCall","=","(","RexCall",")","rexNode",";","\n","if","(","rexCall",".","getOperands","(",")",".","size","(",")","<","2",")","{","\n","return","null",";","\n","}","\n","final","RexLiteral","rexLiteral",";","\n","final","RexNode","refNode",";","\n","final","RexNode","lhs","=","rexCall",".","getOperands","(",")",".","get","(","0",")",";","\n","final","RexNode","rhs","=","rexCall",".","getOperands","(",")",".","get","(","1",")",";","\n","if","(","lhs",".","getKind","(",")","==","SqlKind",".","LITERAL","&&","rhs",".","getKind","(",")","!=","SqlKind",".","LITERAL",")","{","\n","rexLiteral","=","(","RexLiteral",")","lhs",";","\n","refNode","=","rhs",";","\n","}","else","if","(","rhs",".","getKind","(",")","==","SqlKind",".","LITERAL","&&","lhs",".","getKind","(",")","!=","SqlKind",".","LITERAL",")","{","\n","rexLiteral","=","(","RexLiteral",")","rhs",";","\n","refNode","=","lhs",";","\n","}","else","{","\n","//","must","have","at","least","one","literal\n","return","null",";","\n","}","\n\n","if","(","RexLiteral",".","isNullLiteral","(","rexLiteral",")",")","{","\n","//","we","are","not","handling","is","NULL","filter","here","thus","we","bail","out","if","Literal","is","null\n","return","null",";","\n","}","\n","final","String","literalValue","=","toDruidLiteral","(","rexLiteral,","rowType,","druidQuery",")",";","\n","if","(","literalValue","==","null",")","{","\n","//","cannot","translate","literal",";","better","bail","out\n","return","null",";","\n","}","\n","final","boolean","isNumeric","=","refNode",".","getType","(",")",".","getFamily","(",")","==","SqlTypeFamily",".","NUMERIC\n","||","rexLiteral",".","getType","(",")",".","getFamily","(",")","==","SqlTypeFamily",".","NUMERIC",";","\n","final","Pair<String,","ExtractionFunction>","druidColumn","=","DruidQuery",".","toDruidColumn","(","refNode,","rowType,\n","druidQuery",")",";","\n","final","String","columnName","=","druidColumn",".","left",";","\n","final","ExtractionFunction","extractionFunction","=","druidColumn",".","right",";","\n","if","(","columnName","==","null",")","{","\n","//","no","column","name","better","bail","out",".","\n","return","null",";","\n","}","\n","final","DruidJsonFilter","partialFilter",";","\n","if","(","isNumeric",")","{","\n","//need","bound","filter","since","it","one","of","operands","is","numeric\n","partialFilter","=","new","JsonBound","(","columnName,","literalValue,","false,","literalValue,","false,","true,\n","extractionFunction",")",";","\n","}","else","{","\n","partialFilter","=","new","JsonSelector","(","columnName,","literalValue,","extractionFunction",")",";","\n","}","\n\n","if","(","rexNode",".","getKind","(",")","==","SqlKind",".","EQUALS",")","{","\n","return","partialFilter",";","\n","}","\n","return","toNotDruidFilter","(","partialFilter",")",";","\n"],"docstring_tokens":["Converts","a","RexNode","to","a","Druid","JSON","filter"]}
{"code_tokens":["\n","private","static","@Nullable","DruidJsonFilter","toBoundDruidFilter","(","RexNode","rexNode,","RelDataType","rowType,\n","DruidQuery","druidQuery",")","{","\n","final","RexCall","rexCall","=","(","RexCall",")","rexNode",";","\n","final","RexLiteral","rexLiteral",";","\n","if","(","rexCall",".","getOperands","(",")",".","size","(",")","<","2",")","{","\n","return","null",";","\n","}","\n","final","RexNode","refNode",";","\n","final","RexNode","lhs","=","rexCall",".","getOperands","(",")",".","get","(","0",")",";","\n","final","RexNode","rhs","=","rexCall",".","getOperands","(",")",".","get","(","1",")",";","\n","final","boolean","lhsIsRef",";","\n","if","(","lhs",".","getKind","(",")","==","SqlKind",".","LITERAL","&&","rhs",".","getKind","(",")","!=","SqlKind",".","LITERAL",")","{","\n","rexLiteral","=","(","RexLiteral",")","lhs",";","\n","refNode","=","rhs",";","\n","lhsIsRef","=","false",";","\n","}","else","if","(","rhs",".","getKind","(",")","==","SqlKind",".","LITERAL","&&","lhs",".","getKind","(",")","!=","SqlKind",".","LITERAL",")","{","\n","rexLiteral","=","(","RexLiteral",")","rhs",";","\n","refNode","=","lhs",";","\n","lhsIsRef","=","true",";","\n","}","else","{","\n","//","must","have","at","least","one","literal\n","return","null",";","\n","}","\n\n","if","(","RexLiteral",".","isNullLiteral","(","rexLiteral",")",")","{","\n","//","we","are","not","handling","is","NULL","filter","here",";","thus","we","bail","out","if","Literal","is\n","//","null\n","return","null",";","\n","}","\n","final","String","literalValue","=\n","DruidJsonFilter",".","toDruidLiteral","(","rexLiteral,","rowType,","druidQuery",")",";","\n","if","(","literalValue","==","null",")","{","\n","//","cannot","translate","literal",";","better","bail","out\n","return","null",";","\n","}","\n","final","boolean","isNumeric","=","refNode",".","getType","(",")",".","getFamily","(",")","==","SqlTypeFamily",".","NUMERIC\n","||","rexLiteral",".","getType","(",")",".","getFamily","(",")","==","SqlTypeFamily",".","NUMERIC",";","\n","final","Pair<String,","ExtractionFunction>","druidColumn","=\n","DruidQuery",".","toDruidColumn","(","refNode,","rowType,","druidQuery",")",";","\n","final","String","columnName","=","druidColumn",".","left",";","\n","final","ExtractionFunction","extractionFunction","=","druidColumn",".","right",";","\n","if","(","columnName","==","null",")","{","\n","//","no","column","name","better","bail","out",".","\n","return","null",";","\n","}","\n","switch","(","rexCall",".","getKind","(",")",")","{","\n","case","LESS_THAN_OR_EQUAL:\n","case","LESS_THAN:\n","if","(","lhsIsRef",")","{","\n","return","new","JsonBound","(","columnName,","null,","false,","literalValue,\n","rexCall",".","getKind","(",")","==","SqlKind",".","LESS_THAN,","isNumeric,\n","extractionFunction",")",";","\n","}","else","{","\n","return","new","JsonBound","(","columnName,","literalValue,","rexCall",".","getKind","(",")","==","SqlKind",".","LESS_THAN,","null,\n","false,","isNumeric,\n","extractionFunction",")",";","\n","}","\n","case","GREATER_THAN_OR_EQUAL:\n","case","GREATER_THAN:\n","if","(","!lhsIsRef",")","{","\n","return","new","JsonBound","(","columnName,","null,","false,","literalValue,\n","rexCall",".","getKind","(",")","==","SqlKind",".","GREATER_THAN,","isNumeric,\n","extractionFunction",")",";","\n","}","else","{","\n","return","new","JsonBound","(","columnName,","literalValue,","rexCall",".","getKind","(",")","==","SqlKind",".","GREATER_THAN,\n","null,\n","false,","isNumeric,\n","extractionFunction",")",";","\n","}","\n","default:\n","return","null",";","\n","}","\n\n"],"docstring_tokens":["Converts","a","RexNode","to","a","Druid","JSON","bound","filter"]}
{"code_tokens":["\n","private","static","SqlNode","reg","(","SqlValidatorScope","scope,","SqlNode","e",")","{","\n","scope",".","getValidator","(",")",".","deriveType","(","scope,","e",")",";","\n","return","e",";","\n"],"docstring_tokens":["Registers","with","the","validator","a","SqlNode","that","has","been","created","during","the","Sql-to-Rel","process"]}
{"code_tokens":["\n","public","RelNode","convertToSingleValueSubq","(","\n","SqlNode","query,\n","RelNode","plan",")","{","\n","//","Check","whether","query","is","guaranteed","to","produce","a","single","value",".","\n","if","(","query","instanceof","SqlSelect",")","{","\n","SqlSelect","select","=","(","SqlSelect",")","query",";","\n","SqlNodeList","selectList","=","select",".","getSelectList","(",")",";","\n","SqlNodeList","groupList","=","select",".","getGroup","(",")",";","\n\n","if","(","(","selectList",".","size","(",")","==","1",")","\n","&&","(","(","groupList","==","null",")","||","(","groupList",".","size","(",")","==","0",")",")",")","{","\n","SqlNode","selectExpr","=","selectList",".","get","(","0",")",";","\n","if","(","selectExpr","instanceof","SqlCall",")","{","\n","SqlCall","selectExprCall","=","(","SqlCall",")","selectExpr",";","\n","if","(","Util",".","isSingleValue","(","selectExprCall",")",")","{","\n","return","plan",";","\n","}","\n","}","\n\n","//","If","there","is","a","limit","with","0","or","1,\n","//","it","is","ensured","to","produce","a","single","value\n","SqlNode","fetch","=","select",".","getFetch","(",")",";","\n","if","(","fetch","instanceof","SqlNumericLiteral",")","{","\n","long","value","=","(","(","SqlNumericLiteral",")","fetch",")",".","getValueAs","(","Long",".","class",")",";","\n","if","(","value","<","2",")","{","\n","return","plan",";","\n","}","\n","}","\n","}","\n","}","else","if","(","query","instanceof","SqlCall",")","{","\n","//","If","the","query","is","(","values",".",".",".",")",",\n","//","it","is","necessary","to","look","into","the","operands","to","determine\n","//","whether","SingleValueAgg","is","necessary\n","SqlCall","exprCall","=","(","SqlCall",")","query",";","\n","if","(","exprCall",".","getOperator","(",")","\n","instanceof","SqlValuesOperator\n","&&","Util",".","isSingleValue","(","exprCall",")",")","{","\n","return","plan",";","\n","}","\n","}","\n\n","//","If","not,","project","SingleValueAgg\n","return","RelOptUtil",".","createSingleValueAggRel","(","\n","cluster,\n","plan",")",";","\n"],"docstring_tokens":["Converts","the","RelNode","tree","for","a","select","statement","to","a","select","that","produces","a","single","value"]}
{"code_tokens":["\n","private","RelNode","createModify","(","RelOptTable","targetTable,","RelNode","source",")","{","\n","final","ModifiableTable","modifiableTable","=\n","targetTable",".","unwrap","(","ModifiableTable",".","class",")",";","\n","if","(","modifiableTable","!=","null\n","&&","modifiableTable","==","targetTable",".","unwrap","(","Table",".","class",")",")","{","\n","return","modifiableTable",".","toModificationRel","(","cluster,","targetTable,\n","catalogReader,","source,","LogicalTableModify",".","Operation",".","INSERT,","null,\n","null,","false",")",";","\n","}","\n","final","ModifiableView","modifiableView","=\n","targetTable",".","unwrap","(","ModifiableView",".","class",")",";","\n","if","(","modifiableView","!=","null",")","{","\n","final","Table","delegateTable","=","modifiableView",".","getTable","(",")",";","\n","final","RelDataType","delegateRowType","=","delegateTable",".","getRowType","(","typeFactory",")",";","\n","final","RelOptTable","delegateRelOptTable","=\n","RelOptTableImpl",".","create","(","null,","delegateRowType,","delegateTable,\n","modifiableView",".","getTablePath","(",")",")",";","\n","final","RelNode","newSource","=\n","createSource","(","targetTable,","source,","modifiableView,","delegateRowType",")",";","\n","return","createModify","(","delegateRelOptTable,","newSource",")",";","\n","}","\n","return","LogicalTableModify",".","create","(","targetTable,","catalogReader,","source,\n","LogicalTableModify",".","Operation",".","INSERT,","null,","null,","false",")",";","\n"],"docstring_tokens":["Creates","a","relational","expression","to","modify","a","table","or","modifiable","view"]}
{"code_tokens":["\n","private","Blackboard","createInsertBlackboard","(","RelOptTable","targetTable,\n","RexNode","sourceRef,","List<String>","targetColumnNames",")","{","\n","final","Map<String,","RexNode>","nameToNodeMap","=","new","HashMap<>","(",")",";","\n","int","j","=","0",";","\n\n","//","Assign","expressions","for","non-generated","columns",".","\n","final","List<ColumnStrategy>","strategies","=","targetTable",".","getColumnStrategies","(",")",";","\n","final","List<String>","targetFields","=","targetTable",".","getRowType","(",")",".","getFieldNames","(",")",";","\n","for","(","String","targetColumnName",":","targetColumnNames",")","{","\n","final","int","i","=","targetFields",".","indexOf","(","targetColumnName",")",";","\n","switch","(","strategies",".","get","(","i",")",")","{","\n","case","STORED:\n","case","VIRTUAL:\n","break",";","\n","default:\n","nameToNodeMap",".","put","(","targetColumnName,\n","rexBuilder",".","makeFieldAccess","(","sourceRef,","j++",")",")",";","\n","}","\n","}","\n","return","createBlackboard","(","null,","nameToNodeMap,","false",")",";","\n"],"docstring_tokens":["Creates","a","blackboard","for","translating","the","expressions","of","generated","columns","in","an","INSERT","statement"]}
{"code_tokens":["\n","protected","void","collectInsertTargets","(","\n","SqlInsert","call,\n","final","RexNode","sourceRef,\n","final","List<String>","targetColumnNames,\n","List<RexNode>","columnExprs",")","{","\n","final","RelOptTable","targetTable","=","getTargetTable","(","call",")",";","\n","final","RelDataType","tableRowType","=","targetTable",".","getRowType","(",")",";","\n","SqlNodeList","targetColumnList","=","call",".","getTargetColumnList","(",")",";","\n","if","(","targetColumnList","==","null",")","{","\n","if","(","validator","(",")",".","config","(",")",".","conformance","(",")",".","isInsertSubsetColumnsAllowed","(",")",")","{","\n","final","RelDataType","targetRowType","=\n","typeFactory",".","createStructType","(","\n","tableRowType",".","getFieldList","(",")","\n",".","subList","(","0,","sourceRef",".","getType","(",")",".","getFieldCount","(",")",")",")",";","\n","targetColumnNames",".","addAll","(","targetRowType",".","getFieldNames","(",")",")",";","\n","}","else","{","\n","targetColumnNames",".","addAll","(","tableRowType",".","getFieldNames","(",")",")",";","\n","}","\n","}","else","{","\n","for","(","int","i","=","0",";","i","<","targetColumnList",".","size","(",")",";","i++",")","{","\n","SqlIdentifier","id","=","(","SqlIdentifier",")","targetColumnList",".","get","(","i",")",";","\n","RelDataTypeField","field","=\n","SqlValidatorUtil",".","getTargetField","(","\n","tableRowType,","typeFactory,","id,","catalogReader,","targetTable",")",";","\n","assert","field","!=","null",":","\"column","\"","+","id",".","toString","(",")","+","\"","not","found\"",";","\n","targetColumnNames",".","add","(","field",".","getName","(",")",")",";","\n","}","\n","}","\n\n","final","Blackboard","bb","=\n","createInsertBlackboard","(","targetTable,","sourceRef,","targetColumnNames",")",";","\n\n","//","Next,","assign","expressions","for","generated","columns",".","\n","final","List<ColumnStrategy>","strategies","=","targetTable",".","getColumnStrategies","(",")",";","\n","for","(","String","columnName",":","targetColumnNames",")","{","\n","final","int","i","=","tableRowType",".","getFieldNames","(",")",".","indexOf","(","columnName",")",";","\n","final","RexNode","expr",";","\n","switch","(","strategies",".","get","(","i",")",")","{","\n","case","STORED:\n","final","InitializerExpressionFactory","f","=\n","targetTable",".","maybeUnwrap","(","InitializerExpressionFactory",".","class",")","\n",".","orElse","(","NullInitializerExpressionFactory",".","INSTANCE",")",";","\n","expr","=","f",".","newColumnDefaultValue","(","targetTable,","i,","bb",")",";","\n","break",";","\n","case","VIRTUAL:\n","expr","=","null",";","\n","break",";","\n","default:\n","expr","=","requireNonNull","(","bb",".","nameToNodeMap,","\"nameToNodeMap\"",")","\n",".","get","(","columnName",")",";","\n","}","\n","//","expr","is","nullable,","however,","all","the","nulls","will","be","removed","in","the","loop","below\n","columnExprs",".","add","(","castNonNull","(","expr",")",")",";","\n","}","\n\n","//","Remove","virtual","columns","from","the","list",".","\n","for","(","int","i","=","0",";","i","<","targetColumnNames",".","size","(",")",";","i++",")","{","\n","if","(","columnExprs",".","get","(","i",")","==","null",")","{","\n","columnExprs",".","remove","(","i",")",";","\n","targetColumnNames",".","remove","(","i",")",";","\n","--i",";","\n","}","\n","}","\n"],"docstring_tokens":["Given","an","INSERT","statement,","collects","the","list","of","names","to","be","populated","and","the","expressions","to","put","in","them"]}
{"code_tokens":["\n","public","static","SqlTypeName","strictTypeName","(","RelDataType","type",")","{","\n","final","SqlTypeName","typeName","=","type",".","getSqlTypeName","(",")",";","\n","switch","(","typeName",")","{","\n","case","INTEGER:\n","case","TINYINT:\n","case","SMALLINT:\n","return","SqlTypeName",".","DECIMAL",";","\n","case","REAL:\n","case","FLOAT:\n","return","SqlTypeName",".","DOUBLE",";","\n","case","VARBINARY:\n","return","SqlTypeName",".","BINARY",";","\n","case","VARCHAR:\n","return","SqlTypeName",".","CHAR",";","\n","default:\n","return","typeName",";","\n","}","\n"],"docstring_tokens":["Returns","the","strict","literal","type","for","a","given","type"]}
{"code_tokens":["\n","public","void","printAsJava","(","PrintWriter","pw",")","{","\n","Util",".","asStringBuilder","(","pw,","sb","->\n","appendAsJava","(","value,","sb,","typeName,","type,","true,\n","RexDigestIncludeType",".","NO_TYPE",")",")",";","\n"],"docstring_tokens":["Prints","the","value","this","literal","as","a","Java","string","constant"]}
{"code_tokens":["\n","public","@Nullable","Object","getValue2","(",")","{","\n","if","(","value","==","null",")","{","\n","return","null",";","\n","}","\n","switch","(","typeName",")","{","\n","case","CHAR:\n","return","getValueAs","(","String",".","class",")",";","\n","case","DECIMAL:\n","case","TIMESTAMP:\n","case","TIMESTAMP_WITH_LOCAL_TIME_ZONE:\n","return","getValueAs","(","Long",".","class",")",";","\n","case","DATE:\n","case","TIME:\n","case","TIME_WITH_LOCAL_TIME_ZONE:\n","return","getValueAs","(","Integer",".","class",")",";","\n","default:\n","return","value",";","\n","}","\n"],"docstring_tokens":["Returns","the","value","of","this","literal,","in","the","form","that","the","calculator","program","builder","wants","it"]}
{"code_tokens":["\n","public","@Nullable","Object","getValue3","(",")","{","\n","if","(","value","==","null",")","{","\n","return","null",";","\n","}","\n","switch","(","typeName",")","{","\n","case","DECIMAL:\n","assert","value","instanceof","BigDecimal",";","\n","return","value",";","\n","default:\n","return","getValue2","(",")",";","\n","}","\n"],"docstring_tokens":["Returns","the","value","of","this","literal,","in","the","form","that","the","rex-to-lix","translator","wants","it"]}
{"code_tokens":["\n","public","@Nullable","Comparable","getValue4","(",")","{","\n","if","(","value","==","null",")","{","\n","return","null",";","\n","}","\n","switch","(","typeName",")","{","\n","case","TIMESTAMP:\n","case","TIMESTAMP_WITH_LOCAL_TIME_ZONE:\n","return","getValueAs","(","Long",".","class",")",";","\n","case","DATE:\n","case","TIME:\n","case","TIME_WITH_LOCAL_TIME_ZONE:\n","return","getValueAs","(","Integer",".","class",")",";","\n","default:\n","return","value",";","\n","}","\n"],"docstring_tokens":["Returns","the","value","of","this","literal,","in","the","form","that","RexInterpreter","wants","it"]}
{"code_tokens":["\n","@SuppressWarnings","(","\"UnusedDeclaration\"",")","\n","public","static","CalcitePrepare",".","SparkHandler","instance","(",")","{","\n","return","Holder",".","INSTANCE",";","\n"],"docstring_tokens":["Creates","a","SparkHandlerImpl,","initializing","on","first","call"]}
{"code_tokens":["\n","private","static","List<Integer>","getAggColumns","(","RexCall","pigAggCall",")","{","\n","if","(","isMultisetProjection","(","pigAggCall",")",")","{","\n","return","getColsFromMultisetProjection","(","pigAggCall",")",";","\n","}","\n\n","//","The","only","operand","should","be","PIG_BAG\n","assert","pigAggCall",".","getOperands","(",")",".","size","(",")","==","1\n","&&","pigAggCall",".","getOperands","(",")",".","get","(","0",")","instanceof","RexCall",";","\n","final","RexCall","pigBag","=","(","RexCall",")","pigAggCall",".","getOperands","(",")",".","get","(","0",")",";","\n","assert","pigBag",".","getOperands","(",")",".","size","(",")","==","1",";","\n","final","RexNode","pigBagInput","=","pigBag",".","getOperands","(",")",".","get","(","0",")",";","\n\n","if","(","pigBagInput","instanceof","RexCall",")","{","\n","//","Multiset-projection","call\n","final","RexCall","multisetProjection","=","(","RexCall",")","pigBagInput",";","\n","assert","isMultisetProjection","(","multisetProjection",")",";","\n","return","getColsFromMultisetProjection","(","multisetProjection",")",";","\n","}","\n","return","new","ArrayList<>","(",")",";","\n"],"docstring_tokens":["Returns","a","list","of","columns","accessed","in","a","Pig","aggregate","UDF","call"]}
{"code_tokens":["\n","private","void","doGenerateWithoutMultisetFlatten","(","LOGenerate","gen,","List<Integer>","multisetFlattens,\n","List<String>","flattenOutputAliases",")","throws","FrontendException","{","\n","final","List<LogicalExpressionPlan>","pigProjections","=","gen",".","getOutputPlans","(",")",";","\n","final","List<RexNode>","innerCols","=","new","ArrayList<>","(",")",";","//","For","projection","expressions\n","final","List<String>","fieldAlias","=","new","ArrayList<>","(",")",";","//","For","projection","names/alias\n\n","if","(","gen",".","getOutputPlanSchemas","(",")","==","null",")","{","\n","throw","new","IllegalArgumentException","(","\n","\"Generate","statement","at","line","\"","+","gen",".","getLocation","(",")",".","line","(",")","+","\"","produces","empty","schema\"",")",";","\n","}","\n\n","for","(","int","i","=","0",";","i","<","pigProjections",".","size","(",")",";","i++",")","{","\n","final","LogicalSchema","outputFieldSchema","=","gen",".","getOutputPlanSchemas","(",")",".","get","(","i",")",";","\n","RexNode","rexNode","=","PigRelExVisitor",".","translatePigEx","(","builder,","pigProjections",".","get","(","i",")",")",";","\n","RelDataType","dataType","=","rexNode",".","getType","(",")",";","\n","//","If","project","field","in","null","constant,","dataType","will","by","NULL","type,","need","to","check","the","original\n","//","type","of","Pig","Schema\n","if","(","dataType",".","getSqlTypeName","(",")","==","SqlTypeName",".","NULL",")","{","\n","dataType","=","PigTypes",".","convertSchema","(","outputFieldSchema,","true",")",";","\n","}","\n\n","if","(","outputFieldSchema",".","size","(",")","==","1","&&","!gen",".","getFlattenFlags","(",")","[i]",")","{","\n","final","RelDataType","scriptType","=","PigTypes",".","convertSchemaField","(","\n","outputFieldSchema",".","getField","(","0",")",")",";","\n","if","(","dataType",".","getSqlTypeName","(",")","==","SqlTypeName",".","ANY\n","||","!SqlTypeUtil",".","isComparable","(","dataType,","scriptType",")",")","{","\n","//","Script","schema","is","different","from","project","expression","schema,","need","to","do","type","cast\n","rexNode","=","builder",".","getRexBuilder","(",")",".","makeCast","(","scriptType,","rexNode",")",";","\n","}","\n","}","\n\n","if","(","gen",".","getFlattenFlags","(",")","[i]","&&","dataType",".","isStruct","(",")","\n","&&","(","dataType",".","getFieldCount","(",")",">","0","||","dataType","instanceof","DynamicTupleRecordType",")",")","{","\n","if","(","dataType","instanceof","DynamicTupleRecordType",")","{","\n","(","(","DynamicTupleRecordType",")","dataType",")",".","resize","(","outputFieldSchema",".","size","(",")",")",";","\n","for","(","int","j","=","0",";","j","<","outputFieldSchema",".","size","(",")",";","j++",")","{","\n","final","RelDataType","scriptType","=","PigTypes",".","convertSchemaField","(","\n","outputFieldSchema",".","getField","(","j",")",")",";","\n","RexNode","exp","=","builder",".","call","(","\n","SqlStdOperatorTable",".","ITEM,","rexNode,","builder",".","literal","(","j","+","1",")",")",";","\n","innerCols",".","add","(","builder",".","getRexBuilder","(",")",".","makeCast","(","scriptType,","exp",")",")",";","\n","fieldAlias",".","add","(","outputFieldSchema",".","getField","(","j",")",".","alias",")",";","\n","}","\n","}","else","{","\n","for","(","int","j","=","0",";","j","<","dataType",".","getFieldCount","(",")",";","j++",")","{","\n","innerCols",".","add","(","builder",".","dot","(","rexNode,","j",")",")",";","\n","fieldAlias",".","add","(","outputFieldSchema",".","getField","(","j",")",".","alias",")",";","\n","}","\n","}","\n","}","else","{","\n","innerCols",".","add","(","rexNode",")",";","\n","String","alias","=","null",";","\n","if","(","outputFieldSchema",".","size","(",")","==","1",")","{","\n","//","If","simple","type,","take","user","alias","if","available\n","alias","=","outputFieldSchema",".","getField","(","0",")",".","alias",";","\n","}","\n","fieldAlias",".","add","(","alias",")",";","\n","if","(","gen",".","getFlattenFlags","(",")","[i]","&&","dataType",".","getFamily","(",")","instanceof","MultisetSqlType",")","{","\n","multisetFlattens",".","add","(","innerCols",".","size","(",")","-","1",")",";","\n","for","(","LogicalSchema",".","LogicalFieldSchema","field",":","outputFieldSchema",".","getFields","(",")",")","{","\n","String","colAlias","=","field",".","alias",";","\n","if","(","colAlias",".","contains","(","\"::\"",")",")","{","\n","String[]","tokens","=","colAlias",".","split","(","\"::\"",")",";","\n","colAlias","=","tokens[tokens",".","length","-","1]",";","\n","}","\n","flattenOutputAliases",".","add","(","colAlias",")",";","\n","}","\n","}","\n","}","\n","}","\n","builder",".","project","(","innerCols,","fieldAlias,","true",")",";","\n"],"docstring_tokens":["Projects","all","expressions","in","LOGenerate","output","expressions,","but","not","consider","flatten","multiset","columns","yet"]}
{"code_tokens":["\n","public","static","Config","config","(","ConverterRule","converterRule,\n","RelBuilderFactory","relBuilderFactory",")","{","\n","final","RelOptRuleOperand","operand","=","converterRule",".","getOperand","(",")",";","\n","assert","operand",".","childPolicy","==","RelOptRuleOperandChildPolicy",".","ANY",";","\n","return","ImmutableTraitMatchingRule",".","Config",".","builder","(",")",".","withRelBuilderFactory","(","relBuilderFactory",")","\n",".","withDescription","(","\"TraitMatchingRule:","\"","+","converterRule",")","\n",".","withOperandSupplier","(","b0","->\n","b0",".","operand","(","operand",".","getMatchedClass","(",")",")",".","oneInput","(","b1","->\n","b1",".","operand","(","RelNode",".","class",")",".","anyInputs","(",")",")",")","\n",".","withConverterRule","(","converterRule",")","\n",".","build","(",")",";","\n"],"docstring_tokens":["Creates","a","configuration","for","a","TraitMatchingRule"]}
{"code_tokens":["\n","@Override","public","Object","current","(",")","{","\n","if","(","fieldTypes",".","size","(",")","==","1",")","{","\n","//","If","we","just","have","one","field,","produce","it","directly\n","return","currentRowField","(","0",")",";","\n","}","else","{","\n","//","Build","an","array","with","all","fields","in","this","row\n","Object[]","row","=","new","Object[fieldTypes",".","size","(",")","]",";","\n","for","(","int","i","=","0",";","i","<","fieldTypes",".","size","(",")",";","i++",")","{","\n","row[i]","=","currentRowField","(","i",")",";","\n","}","\n\n","return","row",";","\n","}","\n"],"docstring_tokens":["Produces","the","next","row","from","the","results"]}
{"code_tokens":["\n","private","@Nullable","Object","currentRowField","(","int","index",")","{","\n","assert","current","!=","null",";","\n","final","Object","o","=","current",".","get","(","index,\n","CodecRegistry",".","DEFAULT",".","codecFor","(","\n","current",".","getColumnDefinitions","(",")",".","get","(","index",")",".","getType","(",")",")",")",";","\n\n","return","convertToEnumeratorObject","(","o",")",";","\n"],"docstring_tokens":["Get","a","field","for","the","current","row","from","the","underlying","object"]}
{"code_tokens":["\n","public","List<RelDataType>","getFieldTypes","(","RelDataTypeFactory","typeFactory",")","{","\n","if","(","fieldTypes","==","null",")","{","\n","fieldTypes","=","new","ArrayList<>","(",")",";","\n","CsvEnumerator",".","deduceRowType","(","(","JavaTypeFactory",")","typeFactory,","source,\n","fieldTypes,","isStream","(",")",")",";","\n","}","\n","return","fieldTypes",";","\n"],"docstring_tokens":["Returns","the","field","types","of","this","CSV","table"]}
{"code_tokens":["\n","protected","boolean","isStream","(",")","{","\n","return","false",";","\n"],"docstring_tokens":["Returns","whether","the","table","represents","a","stream"]}
{"code_tokens":["\n","public","boolean","isHomogeneous","(","boolean","compareNames",")","{","\n","RelDataType","unionType","=","getRowType","(",")",";","\n","for","(","RelNode","input",":","getInputs","(",")",")","{","\n","if","(","!RelOptUtil",".","areRowTypesEqual","(","\n","input",".","getRowType","(",")",",","unionType,","compareNames",")",")","{","\n","return","false",";","\n","}","\n","}","\n","return","true",";","\n"],"docstring_tokens":["Returns","whether","all","the","inputs","of","this","set","operator","have","the","same","row","type","as","its","output","row"]}
{"code_tokens":["\n","public","static","SqlParserFixture","forParser","(",")","{","\n","return","new","SqlParserTest","(",")",".","fixture","(",")",";","\n"],"docstring_tokens":["Creates","a","fixture","for","parser","tests"]}
{"code_tokens":["\n","public","static","SqlValidatorFixture","forValidator","(",")","{","\n","return","SqlValidatorTestCase",".","FIXTURE",";","\n"],"docstring_tokens":["Creates","a","fixture","for","validation","tests"]}
{"code_tokens":["\n","public","static","SqlToRelFixture","forSqlToRel","(",")","{","\n","return","SqlToRelFixture",".","DEFAULT",";","\n"],"docstring_tokens":["Creates","a","fixture","for","SQL-to-Rel","tests"]}
{"code_tokens":["\n","public","static","RelOptFixture","forRules","(",")","{","\n","return","RelOptFixture",".","DEFAULT",";","\n"],"docstring_tokens":["Creates","a","fixture","for","rule","tests"]}
{"code_tokens":["\n","public","static","SqlOperatorFixture","forOperators","(","boolean","execute",")","{","\n","return","execute\n","?","SqlOperatorFixtureImpl",".","DEFAULT",".","withTester","(","t","->","SqlOperatorTest",".","TESTER",")","\n",":","SqlOperatorFixtureImpl",".","DEFAULT",";","\n"],"docstring_tokens":["Creates","a","fixture","for","operator","tests"]}
{"code_tokens":["\n","public","static","RelMetadataFixture","forMetadata","(",")","{","\n","return","RelMetadataFixture",".","DEFAULT",";","\n"],"docstring_tokens":["Creates","a","fixture","for","metadata","tests"]}
{"code_tokens":["\n","public","Set<LatticeTable>","tables","(",")","{","\n","return","rootNode",".","descendants",".","stream","(",")",".","map","(","n","->","n",".","table",")","\n",".","collect","(","Collectors",".","toCollection","(","LinkedHashSet::new",")",")",";","\n"],"docstring_tokens":["Returns","the","set","of","tables","in","this","lattice"]}
{"code_tokens":["\n","private","Collection<SqlOperator>","lookUpOperators","(","String","name,","SqlSyntax","syntax,\n","SqlNameMatcher","nameMatcher",")","{","\n","//","Case","sensitive","only","works","for","UDFs",".","\n","//","Always","look","up","built-in","operators","case-insensitively",".","Even","in","sessions\n","//","with","unquotedCasing=UNCHANGED","and","caseSensitive=true",".","\n","if","(","nameMatcher",".","isCaseSensitive","(",")","\n","&&","!","(","this","instanceof","SqlStdOperatorTable",")",")","{","\n","return","caseSensitiveOperators",".","get","(","new","CaseSensitiveKey","(","name,","syntax",")",")",";","\n","}","else","{","\n","return","caseInsensitiveOperators",".","get","(","new","CaseInsensitiveKey","(","name,","syntax",")",")",";","\n","}","\n"],"docstring_tokens":["Look","up","operators","based","on","case-sensitiveness"]}
{"code_tokens":["\n","public","void","register","(","SqlOperator","op",")","{","\n","//","Register","both","for","case-sensitive","and","case-insensitive","look","up",".","\n","caseSensitiveOperators",".","put","(","new","CaseSensitiveKey","(","op",".","getName","(",")",",","op",".","getSyntax","(",")",")",",","op",")",";","\n","caseInsensitiveOperators",".","put","(","new","CaseInsensitiveKey","(","op",".","getName","(",")",",","op",".","getSyntax","(",")",")",",","op",")",";","\n"],"docstring_tokens":["Registers","a","function","or","operator","in","the","table"]}
{"code_tokens":["\n","private","static","void","applyMapping","(","ObjectNode","parent,","String","key,","String","type",")","{","\n","final","int","index","=","key",".","indexOf","(","'",".","'",")",";","\n","if","(","index",">","-1",")","{","\n","String","prefix","=","key",".","substring","(","0,","index",")",";","\n","String","suffix","=","key",".","substring","(","index","+","1,","key",".","length","(",")",")",";","\n","applyMapping","(","parent",".","with","(","prefix",")",".","with","(","\"properties\"",")",",","suffix,","type",")",";","\n","}","else","{","\n","parent",".","with","(","key",")",".","put","(","\"type\",","type",")",";","\n","}","\n"],"docstring_tokens":["Creates","nested","mappings","for","an","index"]}
{"code_tokens":["\n","RestClient","restClient","(",")","{","\n","if","(","client","!=","null",")","{","\n","return","client",";","\n","}","\n\n","final","RestClient","client","=","RestClient",".","builder","(","httpHost","(",")",")","\n",".","setRequestConfigCallback","(","requestConfigBuilder","->","requestConfigBuilder\n",".","setConnectTimeout","(","60","*","1000",")","//","default","1000\n",".","setSocketTimeout","(","3","*","60","*","1000",")",")","//","default","30000\n",".","build","(",")",";","\n","closer",".","add","(","client",")",";","\n","this",".","client","=","client",";","\n","return","client",";","\n"],"docstring_tokens":["Low-level","http","rest","client","connected","to","current","embedded","elastic","search","instance"]}
{"code_tokens":["\n","public","static","List<RelOptMaterialization>","getApplicableMaterializations","(","\n","RelNode","rel,","List<RelOptMaterialization>","materializations",")","{","\n","DirectedGraph<List<String>,","DefaultEdge>","usesGraph","=\n","DefaultDirectedGraph",".","create","(",")",";","\n","final","Map<List<String>,","RelOptMaterialization>","qnameMap","=","new","HashMap<>","(",")",";","\n","for","(","RelOptMaterialization","materialization",":","materializations",")","{","\n","//","If","materialization","is","a","tile","in","a","lattice,","we","will","deal","with","it","shortly",".","\n","if","(","materialization",".","qualifiedTableName","!=","null\n","&&","materialization",".","starTable","==","null",")","{","\n","final","List<String>","qname","=","materialization",".","qualifiedTableName",";","\n","qnameMap",".","put","(","qname,","materialization",")",";","\n","for","(","RelOptTable","usedTable\n",":","RelOptUtil",".","findTables","(","materialization",".","queryRel",")",")","{","\n","usesGraph",".","addVertex","(","qname",")",";","\n","usesGraph",".","addVertex","(","usedTable",".","getQualifiedName","(",")",")",";","\n","usesGraph",".","addEdge","(","usedTable",".","getQualifiedName","(",")",",","qname",")",";","\n","}","\n","}","\n","}","\n\n","//","Use","a","materialization","if","uses","at","least","one","of","the","tables","are","used","by\n","//","the","query",".","(","Simple","rule","that","includes","some","materializations","we","won't\n","//","actually","use",".",")","\n","//","For","example,","given","materializations:\n","//","T","=","Emps","Join","Depts\n","//","T2","=","T","Group","by","C1\n","//","the","graph","will","contain\n","//","(","T,","Emps",")",",","(","T,","Depts",")",",","(","T2,","T",")","\n","//","and","therefore","we","can","deduce","T2","uses","Emps",".","\n","final","Graphs",".","FrozenGraph<List<String>,","DefaultEdge>","frozenGraph","=\n","Graphs",".","makeImmutable","(","usesGraph",")",";","\n","final","Set<RelOptTable>","queryTablesUsed","=","RelOptUtil",".","findTables","(","rel",")",";","\n","final","List<RelOptMaterialization>","applicableMaterializations","=\n","new","ArrayList<>","(",")",";","\n","for","(","List<String>","qname",":","TopologicalOrderIterator",".","of","(","usesGraph",")",")","{","\n","RelOptMaterialization","materialization","=","qnameMap",".","get","(","qname",")",";","\n","if","(","materialization","!=","null\n","&&","usesTable","(","materialization",".","qualifiedTableName,","queryTablesUsed,","frozenGraph",")",")","{","\n","applicableMaterializations",".","add","(","materialization",")",";","\n","}","\n","}","\n","return","applicableMaterializations",";","\n"],"docstring_tokens":["Returns","a","list","of","materializations","that","can","potentially","be","used","by","the","query"]}
{"code_tokens":["\n","public","final","<T","extends","@Nullable","RexNode>","boolean","mutate","(","List<T>","exprList",")","{","\n","int","changeCount","=","0",";","\n","for","(","int","i","=","0",";","i","<","exprList",".","size","(",")",";","i++",")","{","\n","T","expr","=","exprList",".","get","(","i",")",";","\n","T","expr2","=","(","T",")","apply","(","expr",")",";","//","Avoid","NPE","if","expr","is","null\n","if","(","expr","!=","expr2",")","{","\n","++changeCount",";","\n","exprList",".","set","(","i,","expr2",")",";","\n","}","\n","}","\n","return","changeCount",">","0",";","\n"],"docstring_tokens":["Applies","this","shuttle","to","each","expression","in","a","list"]}
{"code_tokens":["\n","public","final","@PolyNull","RexNode","apply","(","@PolyNull","RexNode","expr",")","{","\n","return","(","expr","==","null",")","?","expr",":","expr",".","accept","(","this",")",";","\n"],"docstring_tokens":["Applies","this","shuttle","to","an","expression,","or","returns","null","if","the","expression","is","null"]}
{"code_tokens":["\n","public","@Nullable","RelNode","rewrite","(","RelNode","node",")","{","\n","return","RelOptMaterialization",".","tryUseStar","(","node,","starRelOptTable",")",";","\n"],"docstring_tokens":["Rewrites","a","relational","expression","to","use","a","lattice"]}
{"code_tokens":["\n","public","static","List<RelDataTypeField>","getExtendedColumns","(","\n","@Nullable","SqlValidator","validator,","SqlValidatorTable","table,","SqlNodeList","extendedColumns",")","{","\n","final","ImmutableList",".","Builder<RelDataTypeField>","extendedFields","=\n","ImmutableList",".","builder","(",")",";","\n","final","ExtensibleTable","extTable","=","table",".","unwrap","(","ExtensibleTable",".","class",")",";","\n","int","extendedFieldOffset","=\n","extTable","==","null\n","?","table",".","getRowType","(",")",".","getFieldCount","(",")","\n",":","extTable",".","getExtendedColumnOffset","(",")",";","\n","for","(","final","Pair<SqlIdentifier,","SqlDataTypeSpec>","pair",":","pairs","(","extendedColumns",")",")","{","\n","final","SqlIdentifier","identifier","=","pair",".","left",";","\n","final","SqlDataTypeSpec","type","=","pair",".","right",";","\n","extendedFields",".","add","(","\n","new","RelDataTypeFieldImpl","(","identifier",".","toString","(",")",",\n","extendedFieldOffset++,\n","type",".","deriveType","(","requireNonNull","(","validator,","\"validator\"",")",")",")",")",";","\n","}","\n","return","extendedFields",".","build","(",")",";","\n"],"docstring_tokens":["Gets","a","list","of","extended","columns","with","field","indices","to","the","underlying","table"]}
{"code_tokens":["\n","public","static","ImmutableMap<Integer,","RelDataTypeField>","getIndexToFieldMap","(","\n","List<RelDataTypeField>","sourceFields,\n","RelDataType","targetFields",")","{","\n","final","ImmutableMap",".","Builder<Integer,","RelDataTypeField>","output","=\n","ImmutableMap",".","builder","(",")",";","\n","for","(","final","RelDataTypeField","source",":","sourceFields",")","{","\n","final","RelDataTypeField","target","=","targetFields",".","getField","(","source",".","getName","(",")",",","true,","false",")",";","\n","if","(","target","!=","null",")","{","\n","output",".","put","(","source",".","getIndex","(",")",",","target",")",";","\n","}","\n","}","\n","return","output",".","build","(",")",";","\n"],"docstring_tokens":["Gets","a","map","of","indexes","from","the","source","to","fields","in","the","target","for","the","intersecting","set","of","source","and","target","fields"]}
{"code_tokens":["\n","public","static","ImmutableBitSet","getOrdinalBitSet","(","\n","RelDataType","sourceRowType,\n","Map<Integer,","RelDataTypeField>","indexToField",")","{","\n","ImmutableBitSet","source","=","ImmutableBitSet",".","of","(","\n","Util",".","transform","(","sourceRowType",".","getFieldList","(",")",",","RelDataTypeField::getIndex",")",")",";","\n","//","checkerframework:","found",":","Set<@KeyFor","(","\"indexToField\"",")","Integer>\n","//noinspection","RedundantCast\n","ImmutableBitSet","target","=\n","ImmutableBitSet",".","of","(","(","Iterable<Integer>",")","indexToField",".","keySet","(",")",")",";","\n","return","source",".","intersect","(","target",")",";","\n"],"docstring_tokens":["Gets","the","bit-set","to","the","column","ordinals","in","the","source","for","columns","that","intersect","in","the","target"]}
{"code_tokens":["\n","public","static","String","uniquify","(","@Nullable","String","name,","Set<String>","usedNames,\n","Suggester","suggester",")","{","\n","if","(","name","!=","null",")","{","\n","if","(","usedNames",".","add","(","name",")",")","{","\n","return","name",";","\n","}","\n","}","\n","final","String","originalName","=","name",";","\n","for","(","int","j","=","0",";",";","j++",")","{","\n","name","=","suggester",".","apply","(","originalName,","j,","usedNames",".","size","(",")",")",";","\n","if","(","usedNames",".","add","(","name",")",")","{","\n","return","name",";","\n","}","\n","}","\n"],"docstring_tokens":["Makes","a","name","distinct","from","other","names","which","have","already","been","used,","adds","it","to","the","list,","and","returns","it"]}
{"code_tokens":["\n","public","static","@Nullable","RelDataTypeField","getTargetField","(","\n","RelDataType","rowType,","RelDataTypeFactory","typeFactory,\n","SqlIdentifier","id,","SqlValidatorCatalogReader","catalogReader,\n","@Nullable","RelOptTable","table",")","{","\n","final","Table","t","=","table","==","null","?","null",":","table",".","unwrap","(","Table",".","class",")",";","\n","if","(","!","(","t","instanceof","CustomColumnResolvingTable",")",")","{","\n","final","SqlNameMatcher","nameMatcher","=","catalogReader",".","nameMatcher","(",")",";","\n","return","nameMatcher",".","field","(","rowType,","id",".","getSimple","(",")",")",";","\n","}","\n\n","final","List<Pair<RelDataTypeField,","List<String>>>","entries","=\n","(","(","CustomColumnResolvingTable",")","t",")",".","resolveColumn","(","\n","rowType,","typeFactory,","id",".","names",")",";","\n","switch","(","entries",".","size","(",")",")","{","\n","case","1:\n","if","(","!entries",".","get","(","0",")",".","getValue","(",")",".","isEmpty","(",")",")","{","\n","return","null",";","\n","}","\n","return","entries",".","get","(","0",")",".","getKey","(",")",";","\n","default:\n","return","null",";","\n","}","\n"],"docstring_tokens":["Resolve","a","target","column","name","in","the","target","table"]}
{"code_tokens":["\n","private","static","ImmutableBitSet","analyzeGroupExpr","(","SqlValidatorScope","scope,\n","GroupAnalyzer","groupAnalyzer,\n","SqlNode","groupExpr",")","{","\n","final","SqlNode","expandedGroupExpr","=\n","scope",".","getValidator","(",")",".","expand","(","groupExpr,","scope",")",";","\n\n","switch","(","expandedGroupExpr",".","getKind","(",")",")","{","\n","case","ROW:\n","return","ImmutableBitSet",".","union","(","\n","analyzeGroupTuple","(","scope,","groupAnalyzer,\n","(","(","SqlCall",")","expandedGroupExpr",")",".","getOperandList","(",")",")",")",";","\n","case","OTHER:\n","if","(","expandedGroupExpr","instanceof","SqlNodeList\n","&&","(","(","SqlNodeList",")","expandedGroupExpr",")",".","size","(",")","==","0",")","{","\n","return","ImmutableBitSet",".","of","(",")",";","\n","}","\n","break",";","\n","default:\n","break",";","\n","}","\n\n","final","int","ref","=","lookupGroupExpr","(","groupAnalyzer,","expandedGroupExpr",")",";","\n","if","(","expandedGroupExpr","instanceof","SqlIdentifier",")","{","\n","//","SQL","2003","does","not","allow","expressions","of","column","references\n","SqlIdentifier","expr","=","(","SqlIdentifier",")","expandedGroupExpr",";","\n\n","//","column","references","should","be","fully","qualified",".","\n","assert","expr",".","names",".","size","(",")",">=","2",";","\n","String","originalRelName","=","expr",".","names",".","get","(","0",")",";","\n","String","originalFieldName","=","expr",".","names",".","get","(","1",")",";","\n\n","final","SqlNameMatcher","nameMatcher","=\n","scope",".","getValidator","(",")",".","getCatalogReader","(",")",".","nameMatcher","(",")",";","\n","final","SqlValidatorScope",".","ResolvedImpl","resolved","=\n","new","SqlValidatorScope",".","ResolvedImpl","(",")",";","\n","scope",".","resolve","(","ImmutableList",".","of","(","originalRelName",")",",","nameMatcher,","false,\n","resolved",")",";","\n\n","assert","resolved",".","count","(",")","==","1",";","\n","final","SqlValidatorScope",".","Resolve","resolve","=","resolved",".","only","(",")",";","\n","final","RelDataType","rowType","=","resolve",".","rowType","(",")",";","\n","final","int","childNamespaceIndex","=","resolve",".","path",".","steps","(",")",".","get","(","0",")",".","i",";","\n\n","int","namespaceOffset","=","0",";","\n\n","if","(","childNamespaceIndex",">","0",")","{","\n","//","If","not","the","first","child,","need","to","figure","out","the","width","of\n","//","output","types","from","all","the","preceding","namespaces\n","final","SqlValidatorScope","ancestorScope","=","resolve",".","scope",";","\n","assert","ancestorScope","instanceof","ListScope",";","\n","List<SqlValidatorNamespace>","children","=\n","(","(","ListScope",")","ancestorScope",")",".","getChildren","(",")",";","\n\n","for","(","int","j","=","0",";","j","<","childNamespaceIndex",";","j++",")","{","\n","namespaceOffset","+=\n","children",".","get","(","j",")",".","getRowType","(",")",".","getFieldCount","(",")",";","\n","}","\n","}","\n\n","RelDataTypeField","field","=","requireNonNull","(","\n","nameMatcher",".","field","(","rowType,","originalFieldName",")",",\n","(",")","->","\"field","\"","+","originalFieldName","+","\"","is","not","found","in","\"","+","rowType\n","+","\"","with","\"","+","nameMatcher",")",";","\n","int","origPos","=","namespaceOffset","+","field",".","getIndex","(",")",";","\n\n","groupAnalyzer",".","groupExprProjection",".","put","(","origPos,","ref",")",";","\n","}","\n\n","return","ImmutableBitSet",".","of","(","ref",")",";","\n"],"docstring_tokens":["Analyzes","a","component","of","a","tuple","in","a","GROUPING","SETS","clause"]}
{"code_tokens":["\n","public","static","CalciteSchema",".","@Nullable","TypeEntry","getTypeEntry","(","\n","CalciteSchema","rootSchema,","SqlIdentifier","typeName",")","{","\n","final","String","name",";","\n","final","List<String>","path",";","\n","if","(","typeName",".","isSimple","(",")",")","{","\n","path","=","ImmutableList",".","of","(",")",";","\n","name","=","typeName",".","getSimple","(",")",";","\n","}","else","{","\n","path","=","Util",".","skipLast","(","typeName",".","names",")",";","\n","name","=","Util",".","last","(","typeName",".","names",")",";","\n","}","\n","CalciteSchema","schema","=","rootSchema",";","\n","for","(","String","p",":","path",")","{","\n","if","(","schema","==","rootSchema\n","&&","SqlNameMatchers",".","withCaseSensitive","(","true",")",".","matches","(","p,","schema",".","getName","(",")",")",")","{","\n","continue",";","\n","}","\n","schema","=","schema",".","getSubSchema","(","p,","true",")",";","\n","if","(","schema","==","null",")","{","\n","return","null",";","\n","}","\n","}","\n","return","schema",".","getType","(","name,","false",")",";","\n"],"docstring_tokens":["Finds","a","org.apache.calcite.jdbc.CalciteSchema.TypeEntry","in","a","given","schema","whose","type","has","the","given","name,","possibly","qualified"]}
{"code_tokens":["\n","public","static","@Nullable","SqlOperator","lookupSqlFunctionByID","(","SqlOperatorTable","opTab,\n","SqlIdentifier","funName,\n","@Nullable","SqlFunctionCategory","funcType",")","{","\n","if","(","funName",".","isSimple","(",")",")","{","\n","final","List<SqlOperator>","list","=","new","ArrayList<>","(",")",";","\n","opTab",".","lookupOperatorOverloads","(","funName,","funcType,","SqlSyntax",".","FUNCTION,","list,\n","SqlNameMatchers",".","withCaseSensitive","(","funName",".","isComponentQuoted","(","0",")",")",")",";","\n","if","(","list",".","size","(",")","==","1",")","{","\n","return","list",".","get","(","0",")",";","\n","}","\n","}","\n","return","null",";","\n"],"docstring_tokens":["Lookup","sql","function","by","sql","identifier","and","function","category"]}
{"code_tokens":["\n","public","static","FlatAggregate","flatten","(","SqlCall","call",")","{","\n","return","flattenRecurse","(","null,","null,","null,","call",")",";","\n"],"docstring_tokens":["Flattens","an","aggregate","call"]}
{"code_tokens":["\n","private","boolean","containsAvgStddevVarCall","(","List<AggregateCall>","aggCallList",")","{","\n","return","aggCallList",".","stream","(",")",".","anyMatch","(","this::canReduce",")",";","\n"],"docstring_tokens":["Returns","whether","any","of","the","aggregates","are","calls","to","AVG,","STDDEV_,","VAR_"]}
{"code_tokens":["\n","public","boolean","canReduce","(","AggregateCall","call",")","{","\n","return","functionsToReduce",".","contains","(","call",".","getAggregation","(",")",".","getKind","(",")",")","\n","&&","config",".","extraCondition","(",")",".","test","(","call",")",";","\n"],"docstring_tokens":["Returns","whether","this","rule","can","reduce","a","given","aggregate","function","call"]}
{"code_tokens":["\n","protected","void","newCalcRel","(","RelBuilder","relBuilder,\n","RelDataType","rowType,\n","List<RexNode>","exprs",")","{","\n","relBuilder",".","project","(","exprs,","rowType",".","getFieldNames","(",")",")",";","\n"],"docstring_tokens":["Adds","a","calculation","with","the","expressions","to","compute","the","original","aggregate","calls","from","the","decomposed","ones"]}
{"code_tokens":["\n","@Override","protected","Expression\n","tryOptimizeNewInstance","(","NewExpression","newExpression",")","{","\n","if","(","newExpression",".","type","instanceof","Class\n","&&","isConstant","(","newExpression",".","arguments",")","\n","&&","isConstructorDeterministic","(","newExpression",")",")","{","\n","//","Reuse","instance","creation","when","class","is","immutable:","new","BigInteger","(","3",")","\n","return","createField","(","newExpression",")",";","\n","}","\n","return","newExpression",";","\n"],"docstring_tokens":["Optimizes","new","Type","constructs"]}
{"code_tokens":["\n","protected","Expression","tryOptimizeMethodCall","(","MethodCallExpression\n","methodCallExpression",")","{","\n","if","(","isConstant","(","methodCallExpression",".","targetExpression",")","\n","&&","isConstant","(","methodCallExpression",".","expressions",")","\n","&&","isMethodDeterministic","(","methodCallExpression",".","method",")",")","{","\n","return","createField","(","methodCallExpression",")",";","\n","}","\n","return","methodCallExpression",";","\n"],"docstring_tokens":["Optimized","method","call,","possibly","converting","it","to","final","static","field"]}
{"code_tokens":["\n","public","RelWriter","explainCalc","(","RelWriter","pw",")","{","\n","if","(","pw","instanceof","RelJsonWriter",")","{","\n","return","pw\n",".","item","(","\"exprs\",","exprs",")","\n",".","item","(","\"projects\",","projects",")","\n",".","item","(","\"condition\",","condition",")","\n",".","item","(","\"inputRowType\",","inputRowType",")","\n",".","item","(","\"outputRowType\",","outputRowType",")",";","\n","}","else","{","\n","return","collectExplainTerms","(","\"\",","pw,","pw",".","getDetailLevel","(",")",")",";","\n","}","\n"],"docstring_tokens":["Writes","an","explanation","of","the","expressions","in","this","program","to","a","plan","writer"]}
{"code_tokens":["\n","public","RelWriter","collectExplainTerms","(","\n","String","prefix,\n","RelWriter","pw,\n","SqlExplainLevel","level",")","{","\n","final","List<RelDataTypeField>","inFields","=","inputRowType",".","getFieldList","(",")",";","\n","final","List<RelDataTypeField>","outFields","=","outputRowType",".","getFieldList","(",")",";","\n","assert","outFields",".","size","(",")","==","projects",".","size","(",")","\n",":","\"outFields",".","length=\"","+","outFields",".","size","(",")","\n","+","\",","projects",".","length=\"","+","projects",".","size","(",")",";","\n","pw",".","item","(","prefix","+","\"expr#0\"\n","+","(","(","inFields",".","size","(",")",">","1",")","?","(","\"",".",".","\"","+","(","inFields",".","size","(",")","-","1",")",")",":","\"\"",")",",\n","\"","{","inputs","}","\"",")",";","\n","for","(","int","i","=","inFields",".","size","(",")",";","i","<","exprs",".","size","(",")",";","i++",")","{","\n","pw",".","item","(","prefix","+","\"expr#\"","+","i,","exprs",".","get","(","i",")",")",";","\n","}","\n\n","//","If","a","lot","of","the","fields","are","simply","projections","of","the","underlying\n","//","expression,","try","to","be","a","bit","less","verbose",".","\n","int","trivialCount","=","countTrivial","(","projects",")",";","\n\n","switch","(","trivialCount",")","{","\n","case","0:\n","break",";","\n","case","1:\n","trivialCount","=","0",";","\n","break",";","\n","default:\n","pw",".","item","(","prefix","+","\"proj#0",".",".","\"","+","(","trivialCount","-","1",")",",","\"","{","exprs","}","\"",")",";","\n","break",";","\n","}","\n\n","final","boolean","withFieldNames","=","level","!=","SqlExplainLevel",".","DIGEST_ATTRIBUTES",";","\n","//","Print","the","non-trivial","fields","with","their","names","as","they","appear","in","the\n","//","output","row","type",".","\n","for","(","int","i","=","trivialCount",";","i","<","projects",".","size","(",")",";","i++",")","{","\n","final","String","fieldName","=","withFieldNames","?","prefix","+","outFields",".","get","(","i",")",".","getName","(",")",":","prefix","+","i",";","\n","pw",".","item","(","fieldName,","projects",".","get","(","i",")",")",";","\n","}","\n","if","(","condition","!=","null",")","{","\n","pw",".","item","(","prefix","+","\"$condition\",","condition",")",";","\n","}","\n","return","pw",";","\n"],"docstring_tokens":["Collects","the","expressions","in","this","program","into","a","list","of","terms","and","values"]}
{"code_tokens":["\n","public","int","getExprCount","(",")","{","\n","return","exprs",".","size","(",")","\n","+","projects",".","size","(",")","\n","+","(","(","condition","==","null",")","?","0",":","1",")",";","\n"],"docstring_tokens":["Returns","the","number","of","expressions","in","this","program"]}
{"code_tokens":["\n","public","static","RexProgram","createIdentity","(","RelDataType","rowType",")","{","\n","return","createIdentity","(","rowType,","rowType",")",";","\n"],"docstring_tokens":["Creates","the","identity","program"]}
{"code_tokens":["\n","public","static","RexProgram","createIdentity","(","\n","RelDataType","rowType,\n","RelDataType","outputRowType",")","{","\n","if","(","rowType","!=","outputRowType\n","&&","!Pair",".","right","(","rowType",".","getFieldList","(",")",")",".","equals","(","\n","Pair",".","right","(","outputRowType",".","getFieldList","(",")",")",")",")","{","\n","throw","new","IllegalArgumentException","(","\n","\"field","type","mismatch:","\"","+","rowType","+","\"","vs",".","\"","+","outputRowType",")",";","\n","}","\n","final","List<RelDataTypeField>","fields","=","rowType",".","getFieldList","(",")",";","\n","final","List<RexLocalRef>","projectRefs","=","new","ArrayList<>","(",")",";","\n","final","List<RexInputRef>","refs","=","new","ArrayList<>","(",")",";","\n","for","(","int","i","=","0",";","i","<","fields",".","size","(",")",";","i++",")","{","\n","final","RexInputRef","ref","=","RexInputRef",".","of","(","i,","fields",")",";","\n","refs",".","add","(","ref",")",";","\n","projectRefs",".","add","(","new","RexLocalRef","(","i,","ref",".","getType","(",")",")",")",";","\n","}","\n","return","new","RexProgram","(","rowType,","refs,","projectRefs,","null,","outputRowType",")",";","\n"],"docstring_tokens":["Creates","a","program","that","projects","its","input","fields","but","with","possibly","different","names","for","the","output","fields"]}
{"code_tokens":["\n","public","boolean","containsAggs","(",")","{","\n","return","RexOver",".","containsOver","(","this",")",";","\n"],"docstring_tokens":["Returns","whether","this","program","contains","windowed","aggregate","functions"]}
{"code_tokens":["\n","public","boolean","projectsIdentity","(","final","boolean","fail",")","{","\n","final","int","fieldCount","=","inputRowType",".","getFieldCount","(",")",";","\n","if","(","projects",".","size","(",")","<","fieldCount",")","{","\n","assert","!fail\n",":","\"program","'\"","+","toString","(",")","\n","+","\"'","does","not","project","identity","for","input","row","type","'\"\n","+","inputRowType","+","\"'\"",";","\n","return","false",";","\n","}","\n","for","(","int","i","=","0",";","i","<","fieldCount",";","i++",")","{","\n","RexLocalRef","project","=","projects",".","get","(","i",")",";","\n","if","(","project",".","index","!=","i",")","{","\n","assert","!fail\n",":","\"program","\"","+","toString","(",")","\n","+","\"'","does","not","project","identity","for","input","row","type","'\"\n","+","inputRowType","+","\"',","field","#\"","+","i",";","\n","return","false",";","\n","}","\n","}","\n","return","true",";","\n"],"docstring_tokens":["Returns","whether","the","fields","on","the","leading","edge","of","the","project","list","are","the","input","fields"]}
{"code_tokens":["\n","public","boolean","isTrivial","(",")","{","\n","return","getCondition","(",")","==","null","&&","projectsOnlyIdentity","(",")",";","\n"],"docstring_tokens":["Returns","whether","this","program","returns","its","input","exactly"]}
{"code_tokens":["\n","public","boolean","isPermutation","(",")","{","\n","if","(","projects",".","size","(",")","!=","inputRowType",".","getFieldList","(",")",".","size","(",")",")","{","\n","return","false",";","\n","}","\n","for","(","int","i","=","0",";","i","<","projects",".","size","(",")",";","++i",")","{","\n","if","(","getSourceField","(","i",")","<","0",")","{","\n","return","false",";","\n","}","\n","}","\n","return","true",";","\n"],"docstring_tokens":["Returns","whether","this","program","is","a","permutation","of","its","inputs"]}
{"code_tokens":["\n","@CheckReturnValue\n","public","@Nullable","Permutation","getPermutation","(",")","{","\n","Permutation","permutation","=","new","Permutation","(","projects",".","size","(",")",")",";","\n","if","(","projects",".","size","(",")","!=","inputRowType",".","getFieldList","(",")",".","size","(",")",")","{","\n","return","null",";","\n","}","\n","for","(","int","i","=","0",";","i","<","projects",".","size","(",")",";","++i",")","{","\n","int","sourceField","=","getSourceField","(","i",")",";","\n","if","(","sourceField","<","0",")","{","\n","return","null",";","\n","}","\n","permutation",".","set","(","i,","sourceField",")",";","\n","}","\n","return","permutation",";","\n"],"docstring_tokens":["Returns","a","permutation,","if","this","program","is","a","permutation,","otherwise","null"]}
{"code_tokens":["\n","public","boolean","isNormalized","(","Litmus","litmus,","RexBuilder","rexBuilder",")","{","\n","final","RexProgram","normalizedProgram","=","normalize","(","rexBuilder,","null",")",";","\n","String","normalized","=","normalizedProgram",".","toString","(",")",";","\n","String","string","=","toString","(",")",";","\n","if","(","!normalized",".","equals","(","string",")",")","{","\n","final","String","message","=","\"Program","is","not","normalized:\\n\"\n","+","\"program:","{","}","\\n\"\n","+","\"normalized:","{","}","\\n\"",";","\n","return","litmus",".","fail","(","message,","string,","normalized",")",";","\n","}","\n","return","litmus",".","succeed","(",")",";","\n"],"docstring_tokens":["Returns","whether","this","program","is","in","canonical","form"]}
{"code_tokens":["\n","public","RelMetadataFixture","withSql","(","String","sql",")","{","\n","final","RelSupplier","relSupplier","=","RelSupplier",".","of","(","sql",")",";","\n","if","(","relSupplier",".","equals","(","this",".","relSupplier",")",")","{","\n","return","this",";","\n","}","\n","return","new","RelMetadataFixture","(","tester,","factory,","metadataConfig,","relSupplier,\n","convertAsCalc,","relTransform",")",";","\n"],"docstring_tokens":["Creates","a","copy","of","this","fixture","that","uses","a","given","SQL","query"]}
{"code_tokens":["\n","public","RelMetadataFixture","withRelFn","(","Function<RelBuilder,","RelNode>","relFn",")","{","\n","final","RelSupplier","relSupplier","=\n","RelSupplier",".","of","(","builder","->","{","\n","metadataConfig",".","applyMetadata","(","builder",".","getCluster","(",")",")",";","\n","return","relFn",".","apply","(","builder",")",";","\n","}",")",";","\n","if","(","relSupplier",".","equals","(","this",".","relSupplier",")",")","{","\n","return","this",";","\n","}","\n","return","new","RelMetadataFixture","(","tester,","factory,","metadataConfig,","relSupplier,\n","convertAsCalc,","relTransform",")",";","\n"],"docstring_tokens":["Creates","a","copy","of","this","fixture","that","uses","a","given","function","to","create","a","RelNode"]}
{"code_tokens":["\n","@SuppressWarnings","(","{","\"UnusedReturnValue\"","}",")","\n","public","RelMetadataFixture","assertThatUniqueKeysAre","(","\n","ImmutableBitSet",".",".",".","expectedUniqueKeys",")","{","\n","RelNode","rel","=","toRel","(",")",";","\n","final","RelMetadataQuery","mq","=","rel",".","getCluster","(",")",".","getMetadataQuery","(",")",";","\n","Set<ImmutableBitSet>","result","=","mq",".","getUniqueKeys","(","rel",")",";","\n","assertThat","(","result,","notNullValue","(",")",")",";","\n","assertEquals","(","ImmutableSortedSet",".","copyOf","(","expectedUniqueKeys",")",",\n","ImmutableSortedSet",".","copyOf","(","result",")",",\n","(",")","->","\"unique","keys,","sql:","\"","+","relSupplier","+","\",","rel:","\"","+","RelOptUtil",".","toString","(","rel",")",")",";","\n","checkUniqueConsistent","(","rel",")",";","\n","return","this",";","\n"],"docstring_tokens":["Checks","result","of","getting","unique","keys","for","SQL"]}
{"code_tokens":["\n","private","static","boolean","isEmptyAggregate","(","Aggregate","aggregate",")","{","\n","return","aggregate",".","getRowType","(",")",".","getFieldCount","(",")","==","0",";","\n"],"docstring_tokens":["Tests","if","an","Aggregate","always","produces","1","row","and","0","columns"]}
{"code_tokens":["\n","public","final","boolean","containsOver","(",")","{","\n","return","RexOver",".","containsOver","(","program",")",";","\n"],"docstring_tokens":["Returns","whether","this","Calc","contains","any","windowed-aggregate","functions"]}
{"code_tokens":["\n","@SuppressWarnings","(","\"method",".","invocation",".","invalid\"",")","\n","protected","void","computeDigest","(","\n","@UnknownInitialization","RelDataTypeImpl","this\n",")","{","\n","StringBuilder","sb","=","new","StringBuilder","(",")",";","\n","generateTypeString","(","sb,","true",")",";","\n","if","(","!isNullable","(",")",")","{","\n","sb",".","append","(","NON_NULLABLE_SUFFIX",")",";","\n","}","\n","digest","=","sb",".","toString","(",")",";","\n"],"docstring_tokens":["Computes","the","digest","field"]}
{"code_tokens":["\n","public","static","RelNode","strip","(","Project","project",")","{","\n","return","isTrivial","(","project",")","?","project",".","getInput","(",")",":","project",";","\n"],"docstring_tokens":["Returns","the","child","of","a","project","if","the","project","is","trivial,","otherwise","the","project","itself"]}
{"code_tokens":["\n","@Deprecated","//","to","be","removed","before","2",".","0\n","public","static","int[]","toArray","(","List<Integer>","integers",")","{","\n","return","Ints",".","toArray","(","integers",")",";","\n"],"docstring_tokens":["Converts","a","list","of","Integer","objects","to","an","array","of","primitive","ints"]}
{"code_tokens":["\n","public","static","ImmutableIntList","identity","(","RelOptTable","table",")","{","\n","return","ImmutableIntList",".","identity","(","table",".","getRowType","(",")",".","getFieldCount","(",")",")",";","\n"],"docstring_tokens":["Returns","an","identity","projection","for","the","given","table"]}
{"code_tokens":["\n","public","static","<K,","V>","Pair<K,","V>","of","(","Map",".","Entry<?","extends","K,","?","extends","V>","entry",")","{","\n","return","of","(","entry",".","getKey","(",")",",","entry",".","getValue","(",")",")",";","\n"],"docstring_tokens":["Creates","a","Pair","from","a","java.util.Map.Entry"]}
{"code_tokens":["\n","public","static","<K,","V>","void","forEach","(","\n","final","Iterable<?","extends","Map",".","Entry<?","extends","K,","?","extends","V>>","entries,\n","BiConsumer<?","super","K,","?","super","V>","consumer",")","{","\n","for","(","Map",".","Entry<?","extends","K,","?","extends","V>","entry",":","entries",")","{","\n","consumer",".","accept","(","entry",".","getKey","(",")",",","entry",".","getValue","(",")",")",";","\n","}","\n"],"docstring_tokens":["Applies","an","action","to","every","element","of","an","iterable","of","pairs"]}
{"code_tokens":["\n","private","static","RelCollation","extendCollation","(","RelCollation","collation,","List<Integer>","keys",")","{","\n","List<RelFieldCollation>","fieldsForNewCollation","=","new","ArrayList<>","(","keys",".","size","(",")",")",";","\n","fieldsForNewCollation",".","addAll","(","collation",".","getFieldCollations","(",")",")",";","\n\n","ImmutableBitSet","keysBitset","=","ImmutableBitSet",".","of","(","keys",")",";","\n","ImmutableBitSet","colKeysBitset","=","ImmutableBitSet",".","of","(","collation",".","getKeys","(",")",")",";","\n","ImmutableBitSet","exceptBitset","=","keysBitset",".","except","(","colKeysBitset",")",";","\n","for","(","Integer","i",":","exceptBitset",")","{","\n","fieldsForNewCollation",".","add","(","new","RelFieldCollation","(","i",")",")",";","\n","}","\n","return","RelCollations",".","of","(","fieldsForNewCollation",")",";","\n"],"docstring_tokens":["This","function","extends","collation","by","appending","new","collation","fields","defined","on","keys"]}
{"code_tokens":["\n","static","MatchAllQueryBuilder","matchAll","(",")","{","\n","return","new","MatchAllQueryBuilder","(",")",";","\n"],"docstring_tokens":["A","query","that","matches","on","all","documents"]}
{"code_tokens":["\n","public","RelOptPredicateList","getPredicates","(","Filter","filter,","RelMetadataQuery","mq",")","{","\n","final","RelNode","input","=","filter",".","getInput","(",")",";","\n","final","RexBuilder","rexBuilder","=","filter",".","getCluster","(",")",".","getRexBuilder","(",")",";","\n","final","RelOptPredicateList","inputInfo","=","mq",".","getPulledUpPredicates","(","input",")",";","\n\n","return","Util",".","first","(","inputInfo,","RelOptPredicateList",".","EMPTY",")","\n",".","union","(","rexBuilder,\n","RelOptPredicateList",".","of","(","rexBuilder,\n","RexUtil",".","retainDeterministic","(","\n","RelOptUtil",".","conjunctions","(","filter",".","getCondition","(",")",")",")",")",")",";","\n"],"docstring_tokens":["Add","the","Filter","condition","to","the","pulledPredicates","list","from","the","input"]}
{"code_tokens":["\n","List<RelNode>","translate","(",")","throws","FrontendException","{","\n","List<RelNode>","relNodes","=","new","ArrayList<>","(",")",";","\n","for","(","Operator","pigOp",":","plan",".","getSinks","(",")",")","{","\n","currentRoot","=","pigOp",";","\n","currentWalker",".","walk","(","this",")",";","\n","if","(","!","(","pigOp","instanceof","LOStore",")",")","{","\n","relNodes",".","add","(","builder",".","build","(",")",")",";","\n","}","\n","}","\n","return","relNodes",";","\n"],"docstring_tokens":["Translates","the","given","pig","logical","plan","into","a","list","of","relational","algebra","plans"]}
{"code_tokens":["\n","private","void","adjustCubeInput","(",")","{","\n","RelNode","project1","=","builder",".","peek","(",")",";","\n","assert","project1","instanceof","LogicalProject",";","\n","RelNode","correl","=","(","(","LogicalProject",")","project1",")",".","getInput","(",")",";","\n","assert","correl","instanceof","LogicalCorrelate",";","\n","RelNode","project2","=","(","(","LogicalCorrelate",")","correl",")",".","getLeft","(",")",";","\n","assert","project2","instanceof","LogicalProject",";","\n","builder",".","replaceTop","(","(","(","LogicalProject",")","project2",")",".","getInput","(",")",")",";","\n"],"docstring_tokens":["Adjusts","the","rel","input","for","Pig","Cube","operator"]}
{"code_tokens":["\n","private","void","preprocessCogroup","(","LOCogroup","loCogroup,","boolean","isCubeRollup",")","\n","throws","FrontendException","{","\n","final","int","numRels","=","loCogroup",".","getExpressionPlans","(",")",".","size","(",")",";","\n\n","//","Pull","out","all","cogrouped","relations","from","the","builder\n","List<RelNode>","inputRels","=","new","ArrayList<>","(",")",";","\n","for","(","int","i","=","0",";","i","<","numRels",";","i++",")","{","\n","inputRels",".","add","(","0,","builder",".","build","(",")",")",";","\n","}","\n\n","//","Then","adding","back","with","the","corresponding","projection\n","for","(","int","i","=","0",";","i","<","numRels",";","i++",")","{","\n","final","RelNode","originalRel","=","inputRels",".","get","(","i",")",";","\n","builder",".","push","(","originalRel",")",";","\n","final","Collection<LogicalExpressionPlan>","pigGroupKeys","=\n","loCogroup",".","getExpressionPlans","(",")",".","get","(","i",")",";","\n","List<RexNode>","fieldRels","=","new","ArrayList<>","(",")",";","\n","for","(","LogicalExpressionPlan","pigKey",":","pigGroupKeys",")","{","\n","fieldRels",".","add","(","PigRelExVisitor",".","translatePigEx","(","builder,","pigKey",")",")",";","\n","}","\n","final","RexNode","row","=","builder",".","getRexBuilder","(",")",".","makeCall","(","getGroupRowType","(","fieldRels,","isCubeRollup",")",",\n","SqlStdOperatorTable",".","ROW,","getGroupRowOperands","(","fieldRels,","isCubeRollup",")",")",";","\n","fieldRels",".","add","(","row",")",";","\n","builder",".","project","(","fieldRels",")",";","\n","builder",".","updateAlias","(","builder",".","getPig","(","originalRel",")",",","builder",".","getAlias","(","originalRel",")",",","false",")",";","\n","}","\n"],"docstring_tokens":["Projects","out","group","key","and","the","row","for","each","relation"]}
{"code_tokens":["\n","public","static","EnumerableProject","create","(","final","RelNode","input,\n","final","List<?","extends","RexNode>","projects,","RelDataType","rowType",")","{","\n","final","RelOptCluster","cluster","=","input",".","getCluster","(",")",";","\n","final","RelMetadataQuery","mq","=","cluster",".","getMetadataQuery","(",")",";","\n","final","RelTraitSet","traitSet","=\n","cluster",".","traitSet","(",")",".","replace","(","EnumerableConvention",".","INSTANCE",")","\n",".","replaceIfs","(","RelCollationTraitDef",".","INSTANCE,\n","(",")","->","RelMdCollation",".","project","(","mq,","input,","projects",")",")",";","\n","return","new","EnumerableProject","(","cluster,","traitSet,","input,","projects,","rowType",")",";","\n"],"docstring_tokens":["Creates","an","EnumerableProject,","specifying","row","type","rather","than","field","names"]}
{"code_tokens":["\n","public","Set<ImmutableBitSet>","getUniqueKeys","(","Minus","rel,\n","RelMetadataQuery","mq,","boolean","ignoreNulls",")","{","\n","Set<ImmutableBitSet>","uniqueKeys","=","mq",".","getUniqueKeys","(","rel",".","getInput","(","0",")",",","ignoreNulls",")",";","\n","if","(","uniqueKeys","!=","null",")","{","\n","return","uniqueKeys",";","\n","}","\n\n","if","(","!rel",".","all",")","{","\n","return","ImmutableSet",".","of","(","\n","ImmutableBitSet",".","range","(","rel",".","getRowType","(",")",".","getFieldCount","(",")",")",")",";","\n","}","\n","return","ImmutableSet",".","of","(",")",";","\n"],"docstring_tokens":["The","unique","keys","of","Minus","are","precisely","the","unique","keys","of","its","first","input"]}
{"code_tokens":["\n","public","RexCall","clone","(","RelDataType","type,","List<RexNode>","operands",")","{","\n","return","new","RexCall","(","type,","op,","operands",")",";","\n"],"docstring_tokens":["Creates","a","new","call","to","the","same","operator","with","different","operands"]}
{"code_tokens":["\n","public","static","void","assumeRealMongoInstance","(",")","{","\n","assumeTrue","(","useMongo","(",")",",","\"Expect","mongo","instance\"",")",";","\n"],"docstring_tokens":["Used","to","skip","tests","if","current","instance","is","not","mongo"]}
{"code_tokens":["\n","public","static","@NonNull","TCatalogReader","create","(","RelDataTypeFactory","typeFactory,\n","boolean","caseSensitive",")","{","\n","return","new","TCatalogReader","(","typeFactory,","caseSensitive",")",".","init","(",")",";","\n"],"docstring_tokens":["Creates","and","initializes","a","TCatalogReader"]}
{"code_tokens":["\n","public","static","<V,","E","extends","DefaultEdge>","Iterable<V>","of","(","\n","DirectedGraph<V,","E>","graph,","V","start",")","{","\n","//","Doesn't","actually","return","a","DepthFirstIterator,","but","a","list","with","the","same\n","//","contents,","which","is","more","efficient",".","\n","return","buildList","(","graph,","start",")",";","\n"],"docstring_tokens":["Creates","an","iterable","over","the","vertices","in","the","given","graph","in","a","depth-first","iteration","order"]}
{"code_tokens":["\n","public","static","ClassDeclarationFinder","create","(","\n","final","Class<?","extends","ClassDeclarationFinder>","optimizingClass",")","{","\n","return","create","(","newChildCreator","(","optimizingClass",")",")",";","\n"],"docstring_tokens":["Creates","visitor","that","uses","given","class","as","optimizer"]}
{"code_tokens":["\n","@Override","public","Shuttle","preVisit","(","NewExpression","newExpression",")","{","\n","if","(","newExpression",".","memberDeclarations","==","null",")","{","\n","return","this",";","\n","}","\n","ClassDeclarationFinder","visitor","=","goDeeper","(",")",";","\n","visitor",".","learnFinalStaticDeclarations","(","newExpression",".","memberDeclarations",")",";","\n","return","visitor",";","\n"],"docstring_tokens":["Creates","optimizer","local","to","the","newly","generated","anonymous","class"]}
{"code_tokens":["\n","@Override","public","Shuttle","preVisit","(","ClassDeclaration","classDeclaration",")","{","\n","ClassDeclarationFinder","visitor","=","goDeeper","(",")",";","\n","visitor",".","learnFinalStaticDeclarations","(","classDeclaration",".","memberDeclarations",")",";","\n","return","visitor",";","\n"],"docstring_tokens":["Creates","optimizer","local","to","the","newly","generated","class"]}
{"code_tokens":["\n","protected","@Nullable","ParameterExpression","findDeclaredExpression","(","Expression","expression",")","{","\n","return","null",";","\n"],"docstring_tokens":["Finds","if","there","exists","ready","for","reuse","declaration","for","given","expression"]}
{"code_tokens":["\n","public","static","RelCollation","of","(","int","fieldIndex",")","{","\n","return","of","(","new","RelFieldCollation","(","fieldIndex",")",")",";","\n"],"docstring_tokens":["Creates","a","collation","containing","one","field"]}
{"code_tokens":["\n","public","static","RelCollation","of","(","ImmutableIntList","keys",")","{","\n","List<RelFieldCollation>","cols","=","keys",".","stream","(",")","\n",".","map","(","k","->","new","RelFieldCollation","(","k",")",")","\n",".","collect","(","Collectors",".","toList","(",")",")",";","\n","return","of","(","cols",")",";","\n"],"docstring_tokens":["Creates","a","collation","containing","multiple","fields"]}
{"code_tokens":["\n","public","static","List<Integer>","ordinals","(","RelCollation","collation",")","{","\n","return","ordinals","(","collation",".","getFieldCollations","(",")",")",";","\n"],"docstring_tokens":["Returns","the","indexes","of","the","field","collations","in","a","given","collation"]}
{"code_tokens":["\n","public","static","boolean","contains","(","RelCollation","collation,\n","Iterable<Integer>","keys",")","{","\n","return","contains","(","collation,","Util",".","distinctList","(","keys",")",")",";","\n"],"docstring_tokens":["Returns","whether","a","collation","indicates","that","the","collection","is","sorted","on","a","given","list","of","keys"]}
{"code_tokens":["\n","public","static","RelCollation","permute","(","RelCollation","collation,\n","Map<Integer,","Integer>","mapping",")","{","\n","return","of","(","\n","Util",".","transform","(","collation",".","getFieldCollations","(",")",",\n","fc","->","fc",".","withFieldIndex","(","\n","requireNonNull","(","mapping",".","get","(","fc",".","getFieldIndex","(",")",")",",\n","(",")","->","\"no","entry","for","\"","+","fc",".","getFieldIndex","(",")","+","\"","in","\"","+","mapping",")",")",")",")",";","\n"],"docstring_tokens":["Creates","a","copy","of","this","collation","that","changes","the","ordinals","of","input","fields"]}
{"code_tokens":["\n","void","resize","(","int","size",")","{","\n","int","currentSize","=","getFieldCount","(",")",";","\n","if","(","size",">","currentSize",")","{","\n","for","(","int","i","=","currentSize",";","i","<","size",";","i++",")","{","\n","super",".","getField","(","\"$\"","+","i,","true,","true",")",";","\n","}","\n","computeDigest","(",")",";","\n","}","\n"],"docstring_tokens":["Resizes","the","record","if","the","new","size","greater","than","the","current","size"]}
{"code_tokens":["\n","private","static","int","nameToIndex","(","String","fieldName",")","{","\n","Matcher","matcher","=","INDEX_PATTERN",".","matcher","(","fieldName",")",";","\n","if","(","matcher",".","find","(",")",")","{","\n","return","Integer",".","parseInt","(","matcher",".","group","(","1",")",")",";","\n","}","\n","return","-1",";","\n"],"docstring_tokens":["Gets","index","number","from","field","name"]}
{"code_tokens":["\n","public","static","Expression","convert","(","Expression","operand,","Type","toType",")","{","\n","final","Type","fromType","=","operand",".","getType","(",")",";","\n","return","convert","(","operand,","fromType,","toType",")",";","\n"],"docstring_tokens":["Convert","operand","to","target","type","toType"]}
{"code_tokens":["\n","public","static","<T>","@Nullable","T","evaluate","(","Object","o,","Class<T>","clazz",")","{","\n","//","We","need","optimization","here","for","constant","folding",".","\n","//","Not","all","the","expressions","can","be","interpreted","(","e",".","g",".","ternary",")",",","so\n","//","we","rely","on","optimization","capabilities","to","fold","non-interpretable\n","//","expressions",".","\n","//noinspection","unchecked\n","clazz","=","Primitive",".","box","(","clazz",")",";","\n","BlockBuilder","bb","=","new","BlockBuilder","(",")",";","\n","final","Expression","expr","=\n","convert","(","Expressions",".","constant","(","o",")",",","clazz",")",";","\n","bb",".","add","(","Expressions",".","return_","(","null,","expr",")",")",";","\n","final","FunctionExpression<?>","convert","=\n","Expressions",".","lambda","(","bb",".","toBlock","(",")",",","ImmutableList",".","of","(",")",")",";","\n","return","clazz",".","cast","(","convert",".","compile","(",")",".","dynamicInvoke","(",")",")",";","\n"],"docstring_tokens":["Converts","a","value","to","a","given","class"]}
{"code_tokens":["\n","static","Expression","generatePredicate","(","\n","EnumerableRelImplementor","implementor,\n","RexBuilder","rexBuilder,\n","RelNode","left,\n","RelNode","right,\n","PhysType","leftPhysType,\n","PhysType","rightPhysType,\n","RexNode","condition",")","{","\n","final","BlockBuilder","builder","=","new","BlockBuilder","(",")",";","\n","final","ParameterExpression","left_","=\n","Expressions",".","parameter","(","leftPhysType",".","getJavaRowType","(",")",",","\"left\"",")",";","\n","final","ParameterExpression","right_","=\n","Expressions",".","parameter","(","rightPhysType",".","getJavaRowType","(",")",",","\"right\"",")",";","\n","final","RexProgramBuilder","program","=\n","new","RexProgramBuilder","(","\n","implementor",".","getTypeFactory","(",")",".","builder","(",")","\n",".","addAll","(","left",".","getRowType","(",")",".","getFieldList","(",")",")","\n",".","addAll","(","right",".","getRowType","(",")",".","getFieldList","(",")",")","\n",".","build","(",")",",\n","rexBuilder",")",";","\n","program",".","addCondition","(","condition",")",";","\n","builder",".","add","(","\n","Expressions",".","return_","(","null,\n","RexToLixTranslator",".","translateCondition","(","program",".","getProgram","(",")",",\n","implementor",".","getTypeFactory","(",")",",\n","builder,\n","new","RexToLixTranslator",".","InputGetterImpl","(","\n","ImmutableMap",".","of","(","left_,","leftPhysType,\n","right_,","rightPhysType",")",")",",\n","implementor",".","allCorrelateVariables,\n","implementor",".","getConformance","(",")",")",")",")",";","\n","return","Expressions",".","lambda","(","Predicate2",".","class,","builder",".","toBlock","(",")",",","left_,","right_",")",";","\n"],"docstring_tokens":["Returns","a","predicate","expression","based","on","a","join","condition"]}
{"code_tokens":["\n","protected","static","Geom","bind","(","Geometry","geometry,","int","srid",")","{","\n","if","(","srid","==","NO_SRID",")","{","\n","return","new","SimpleGeom","(","geometry",")",";","\n","}","\n","return","bind","(","geometry,","SpatialReference",".","create","(","srid",")",")",";","\n"],"docstring_tokens":["Returns","a","Geom","that","is","a","Geometry","bound","to","a","SRID"]}
{"code_tokens":["\n","public","static","Type","type","(","Geometry","g",")","{","\n","switch","(","g",".","getType","(",")",")","{","\n","case","Point:\n","return","Type",".","POINT",";","\n","case","Polyline:\n","return","Type",".","LINESTRING",";","\n","case","Polygon:\n","return","Type",".","POLYGON",";","\n","case","MultiPoint:\n","return","Type",".","MULTIPOINT",";","\n","case","Envelope:\n","return","Type",".","POLYGON",";","\n","case","Line:\n","return","Type",".","LINESTRING",";","\n","case","Unknown:\n","return","Type",".","Geometry",";","\n","default:\n","throw","new","AssertionError","(","g",")",";","\n","}","\n"],"docstring_tokens":["Returns","the","OGC","type","of","a","geometry"]}
{"code_tokens":["\n","public","String","simplifySql","(","String","sql",")","{","\n","Tokenizer","tokenizer","=","new","Tokenizer","(","sql,","hintToken,","parserConfig",".","quoting","(",")",")",";","\n","List<Token>","list","=","new","ArrayList<>","(",")",";","\n","while","(","true",")","{","\n","Token","token","=","tokenizer",".","nextToken","(",")",";","\n","if","(","token","==","null",")","{","\n","break",";","\n","}","\n","if","(","token",".","type","==","TokenType",".","COMMENT",")","{","\n","//","ignore","comments\n","continue",";","\n","}","\n","list",".","add","(","token",")",";","\n","}","\n\n","//","Gather","consecutive","sub-sequences","of","tokens","into","sub-queries",".","\n","List<Token>","outList","=","new","ArrayList<>","(",")",";","\n","consumeQuery","(","list",".","listIterator","(",")",",","outList",")",";","\n\n","//","Simplify",".","\n","Query",".","simplifyList","(","outList,","hintToken",")",";","\n\n","//","Convert","to","string",".","\n","StringBuilder","buf","=","new","StringBuilder","(",")",";","\n","int","k","=","-1",";","\n","for","(","Token","token",":","outList",")","{","\n","if","(","++k",">","0",")","{","\n","buf",".","append","(","'","'",")",";","\n","}","\n","token",".","unparse","(","buf",")",";","\n","}","\n","return","buf",".","toString","(",")",";","\n"],"docstring_tokens":["Turns","a","partially","completed","or","syntactically","incorrect","SQL","statement","into","a","simplified,","valid","one","that","can","be","validated"]}
{"code_tokens":["\n","@Override","public","void","validateIdentifier","(","SqlIdentifier","id,","SqlValidatorScope","scope",")","{","\n","registerId","(","id,","scope",")",";","\n","try","{","\n","super",".","validateIdentifier","(","id,","scope",")",";","\n","}","catch","(","CalciteException","e",")","{","\n","Util",".","swallow","(","e,","TRACER",")",";","\n","}","\n"],"docstring_tokens":["Registers","the","identifier","and","its","scope","into","a","map","keyed","by","ParserPosition"]}
{"code_tokens":["\n","public","static","@Nullable","String","getCharacterSet","(","String","s",")","{","\n","if","(","s",".","charAt","(","0",")","==","'\\''",")","{","\n","return","null",";","\n","}","\n","if","(","Character",".","toUpperCase","(","s",".","charAt","(","0",")",")","==","'N'",")","{","\n","return","CalciteSystemProperty",".","DEFAULT_NATIONAL_CHARSET",".","value","(",")",";","\n","}","\n","int","i","=","s",".","indexOf","(","\"'\"",")",";","\n","return","s",".","substring","(","1,","i",")",";","//","skip","prefixed","'_'\n"],"docstring_tokens":["Returns","the","character-set","prefix","of","a","SQL","string","literal;","returns","null","if","there","is","none"]}
{"code_tokens":["\n","public","static","long","intervalToMillis","(","\n","SqlIntervalLiteral",".","IntervalValue","interval",")","{","\n","return","intervalToMillis","(","\n","interval",".","getIntervalLiteral","(",")",",\n","interval",".","getIntervalQualifier","(",")",")",";","\n"],"docstring_tokens":["Converts","the","interval","value","into","a","millisecond","representation"]}
{"code_tokens":["\n","public","static","long","intervalToMonths","(","\n","SqlIntervalLiteral",".","IntervalValue","interval",")","{","\n","return","intervalToMonths","(","\n","interval",".","getIntervalLiteral","(",")",",\n","interval",".","getIntervalQualifier","(",")",")",";","\n"],"docstring_tokens":["Converts","the","interval","value","into","a","months","representation"]}
{"code_tokens":["\n","public","static","boolean","allowsIdentifier","(","String[]","tokenImage,","int[][]","expectedTokenSequences",")","{","\n","//","Compares","from","tailing","tokens","first","because","the","<IDENTIFIER>\n","//","was","very","probably","at","the","tail",".","\n","for","(","int","i","=","expectedTokenSequences",".","length","-","1",";","i",">=","0",";","i--",")","{","\n","int[]","expectedTokenSequence","=","expectedTokenSequences[i]",";","\n","for","(","int","j","=","expectedTokenSequence",".","length","-","1",";","j",">=","0",";","j--",")","{","\n","if","(","tokenImage[expectedTokenSequence[j]]",".","equals","(","\"<IDENTIFIER>\"",")",")","{","\n","return","true",";","\n","}","\n","}","\n","}","\n\n","return","false",";","\n"],"docstring_tokens":["Returns","whether","the","reported","ParseException","tokenImage","allows","SQL","identifier"]}
{"code_tokens":["\n","public","static","RexInputRef","of","(","int","index,","RelDataType","rowType",")","{","\n","return","of","(","index,","rowType",".","getFieldList","(",")",")",";","\n"],"docstring_tokens":["Creates","a","reference","to","a","given","field","in","a","row","type"]}
{"code_tokens":["\n","public","static","RexInputRef","of","(","int","index,","List<RelDataTypeField>","fields",")","{","\n","return","new","RexInputRef","(","index,","fields",".","get","(","index",")",".","getType","(",")",")",";","\n"],"docstring_tokens":["Creates","a","reference","to","a","given","field","in","a","list","of","fields"]}
{"code_tokens":["\n","static","String","sqlToRegexLike","(","\n","String","sqlPattern,\n","@Nullable","CharSequence","escapeStr",")","{","\n","final","char","escapeChar",";","\n","if","(","escapeStr","!=","null",")","{","\n","if","(","escapeStr",".","length","(",")","!=","1",")","{","\n","throw","invalidEscapeCharacter","(","escapeStr",".","toString","(",")",")",";","\n","}","\n","escapeChar","=","escapeStr",".","charAt","(","0",")",";","\n","}","else","{","\n","escapeChar","=","0",";","\n","}","\n","return","sqlToRegexLike","(","sqlPattern,","escapeChar",")",";","\n"],"docstring_tokens":["Translates","a","SQL","LIKE","pattern","to","Java","regex","pattern,","with","optional","escape","string"]}
{"code_tokens":["\n","static","String","sqlToRegexSimilar","(","\n","String","sqlPattern,\n","@Nullable","CharSequence","escapeStr",")","{","\n","final","char","escapeChar",";","\n","if","(","escapeStr","!=","null",")","{","\n","if","(","escapeStr",".","length","(",")","!=","1",")","{","\n","throw","invalidEscapeCharacter","(","escapeStr",".","toString","(",")",")",";","\n","}","\n","escapeChar","=","escapeStr",".","charAt","(","0",")",";","\n","}","else","{","\n","escapeChar","=","0",";","\n","}","\n","return","sqlToRegexSimilar","(","sqlPattern,","escapeChar",")",";","\n"],"docstring_tokens":["Translates","a","SQL","SIMILAR","pattern","to","Java","regex","pattern,","with","optional","escape","string"]}
{"code_tokens":["\n","public","static","PigConverter","create","(","FrameworkConfig","config,\n","Properties","properties",")","throws","Exception","{","\n","return","new","PigConverter","(","config,","ExecType",".","LOCAL,","properties",")",";","\n"],"docstring_tokens":["Creates","a","PigConverter","using","the","given","property","settings"]}
{"code_tokens":["\n","public","static","PigConverter","create","(","FrameworkConfig","config",")","throws","Exception","{","\n","return","create","(","config,","PropertiesUtil",".","loadDefaultProperties","(",")",")",";","\n"],"docstring_tokens":["Creates","a","PigConverter","using","default","property","settings"]}
{"code_tokens":["\n","public","List<RelNode>","pigScript2Rel","(","String","fileName,","Map<String,","String>","params,\n","boolean","planRewrite",")","throws","IOException","{","\n","setBatchOn","(",")",";","\n","registerScript","(","fileName,","params",")",";","\n","final","LogicalPlan","pigPlan","=","getCurrentDAG","(",")",".","getLogicalPlan","(",")",";","\n","pigPlan",".","validate","(","getPigContext","(",")",",","scope,","false",")",";","\n\n","return","pigPlan2Rel","(","pigPlan,","planRewrite,","true",")",";","\n"],"docstring_tokens":["Parses","a","Pig","script","and","converts","it","into","relational","algebra","plans"]}
{"code_tokens":["\n","public","List<String>","pigToSql","(","String","pigQuery,","SqlDialect","sqlDialect",")","\n","throws","IOException","{","\n","final","SqlWriterConfig","config","=","SqlPrettyWriter",".","config","(",")","\n",".","withQuoteAllIdentifiers","(","false",")","\n",".","withAlwaysUseParentheses","(","false",")","\n",".","withSelectListItemsOnSeparateLines","(","false",")","\n",".","withIndentation","(","2",")","\n",".","withDialect","(","sqlDialect",")",";","\n","final","SqlPrettyWriter","writer","=","new","SqlPrettyWriter","(","config",")",";","\n","return","pigToSql","(","pigQuery,","writer",")",";","\n"],"docstring_tokens":["Converts","a","Pig","script","to","a","list","of","SQL","statements"]}
{"code_tokens":["\n","private","static","boolean","invokeVisitorInternal","(","\n","Object","visitor,\n","Object","visitee,\n","Class","hierarchyRoot,\n","String","visitMethodName",")","{","\n","Class<?>","visitorClass","=","visitor",".","getClass","(",")",";","\n","Class","visiteeClass","=","visitee",".","getClass","(",")",";","\n","Method","method","=\n","lookupVisitMethod","(","\n","visitorClass,\n","visiteeClass,\n","visitMethodName",")",";","\n","if","(","method","==","null",")","{","\n","return","false",";","\n","}","\n\n","if","(","hierarchyRoot","!=","null",")","{","\n","Class","paramType","=","method",".","getParameterTypes","(",")","[0]",";","\n","if","(","!hierarchyRoot",".","isAssignableFrom","(","paramType",")",")","{","\n","return","false",";","\n","}","\n","}","\n\n","try","{","\n","method",".","invoke","(","\n","visitor,\n","visitee",")",";","\n","}","catch","(","IllegalAccessException","ex",")","{","\n","throw","new","RuntimeException","(","ex",")",";","\n","}","catch","(","InvocationTargetException","ex",")","{","\n","//","visit","methods","aren't","allowed","to","have","throws","clauses,\n","//","so","the","only","exceptions","which","should","come\n","//","to","us","are","RuntimeExceptions","and","Errors\n","throw","Util",".","throwAsRuntime","(","Util",".","causeOrSelf","(","ex",")",")",";","\n","}","\n","return","true",";","\n"],"docstring_tokens":["Shared","implementation","of","the","two","forms","of","invokeVisitor"]}
{"code_tokens":["\n","protected","void","validateQuantifier","(","SqlValidator","validator,","SqlCall","call",")","{","\n","SqlLiteral","functionQuantifier","=","call",".","getFunctionQuantifier","(",")",";","\n","if","(","(","null","!=","functionQuantifier",")","&&","!isQuantifierAllowed","(",")",")","{","\n","throw","validator",".","newValidationError","(","functionQuantifier,\n","RESOURCE",".","functionQuantifierNotAllowed","(","call",".","getOperator","(",")",".","getName","(",")",")",")",";","\n","}","\n"],"docstring_tokens":["Throws","a","validation","error","if","a","DISTINCT","or","ALL","quantifier","is","present","but","not","allowed"]}
{"code_tokens":["\n","public","static","@Nullable","ByteString","compress","(","@Nullable","String","data",")","{","\n","try","{","\n","if","(","data","==","null",")","{","\n","return","null",";","\n","}","\n","if","(","StringUtils",".","isEmpty","(","data",")",")","{","\n","return","new","ByteString","(","new","byte[0]",")",";","\n","}","\n","ByteArrayOutputStream","outputStream","=","new","ByteArrayOutputStream","(",")",";","\n","ByteBuffer","dataLength","=","ByteBuffer",".","allocate","(","4",")",";","\n","dataLength",".","order","(","ByteOrder",".","LITTLE_ENDIAN",")",";","\n","dataLength",".","putInt","(","data",".","length","(",")",")",";","\n","outputStream",".","write","(","dataLength",".","array","(",")",")",";","\n","DeflaterOutputStream","inflaterStream","=","new","DeflaterOutputStream","(","outputStream",")",";","\n","inflaterStream",".","write","(","data",".","getBytes","(","Charset",".","defaultCharset","(",")",")",")",";","\n","inflaterStream",".","close","(",")",";","\n","return","new","ByteString","(","outputStream",".","toByteArray","(",")",")",";","\n","}","catch","(","IOException","e",")","{","\n","return","null",";","\n","}","\n"],"docstring_tokens":["MySql","Compression","is","based","on","zlib"]}
{"code_tokens":["\n","public","static","AssertThat","that","(",")","{","\n","return","AssertThat",".","EMPTY",";","\n"],"docstring_tokens":["Creates","an","instance","of","CalciteAssert","with","the","empty","configuration"]}
{"code_tokens":["\n","public","static","AssertThat","that","(","Config","config",")","{","\n","return","that","(",")",".","with","(","config",")",";","\n"],"docstring_tokens":["Creates","an","instance","of","CalciteAssert","with","a","given","configuration"]}
{"code_tokens":["\n","public","final","SqlToRelFixture","sql","(","String","sql",")","{","\n","return","fixture","(",")",".","expression","(","false",")",".","withSql","(","sql",")",";","\n"],"docstring_tokens":["Sets","the","SQL","statement","for","a","test"]}
{"code_tokens":["\n","@SuppressWarnings","(","\"unchecked\"",")","\n","public","static","<K,","V>","Map<K,","V>","of","(",")","{","\n","return","(","Map<K,","V>",")","INSTANCE",";","\n"],"docstring_tokens":["Gets","an","instance","of","BlackholeMap"]}
{"code_tokens":["\n","public","SqlTypeName","lookup","(","DataType","name",")","{","\n","return","rules",".","getOrDefault","(","name,","SqlTypeName",".","ANY",")",";","\n"],"docstring_tokens":["Returns","a","corresponding","SqlTypeName","for","a","given","CQL","type","name"]}
{"code_tokens":["\n","@Override","public","TranslatableTable","apply","(","List<?","extends","@Nullable","Object>","arguments",")","{","\n","try","{","\n","Object","o","=","null",";","\n","if","(","!Modifier",".","isStatic","(","method",".","getModifiers","(",")",")",")","{","\n","final","Constructor<?>","constructor","=\n","method",".","getDeclaringClass","(",")",".","getConstructor","(",")",";","\n","o","=","constructor",".","newInstance","(",")",";","\n","}","\n","return","(","TranslatableTable",")","requireNonNull","(","\n","method",".","invoke","(","o,","arguments",".","toArray","(",")",")",",\n","(",")","->","\"got","null","from","\"","+","method","+","\"","with","arguments","\"","+","arguments",")",";","\n","}","catch","(","IllegalArgumentException","e",")","{","\n","throw","new","RuntimeException","(","\"Expected","\"\n","+","Arrays",".","toString","(","method",".","getParameterTypes","(",")",")","+","\"","actual","\"\n","+","arguments,\n","e",")",";","\n","}","catch","(","IllegalAccessException","|","InvocationTargetException\n","|","NoSuchMethodException","|","InstantiationException","e",")","{","\n","throw","new","RuntimeException","(","e",")",";","\n","}","\n"],"docstring_tokens":["Applies","arguments","to","yield","a","table"]}
{"code_tokens":["\n","public","static","SqlBasicAggFunction","create","(","SqlKind","kind,\n","SqlReturnTypeInference","returnTypeInference,\n","SqlOperandTypeChecker","operandTypeChecker",")","{","\n","return","create","(","kind",".","name","(",")",",","kind,","returnTypeInference,","operandTypeChecker",")",";","\n"],"docstring_tokens":["Creates","a","SqlBasicAggFunction","whose","name","is","the","same","as","its","kind"]}
{"code_tokens":["\n","public","static","@NonNull","MockCatalogReaderDynamic","create","(","\n","RelDataTypeFactory","typeFactory,","boolean","caseSensitive",")","{","\n","return","new","MockCatalogReaderDynamic","(","typeFactory,","caseSensitive",")",".","init","(",")",";","\n"],"docstring_tokens":["Creates","and","initializes","a","MockCatalogReaderDynamic"]}
{"code_tokens":["\n","private","int[]","evaluateIntervalLiteralAsYear","(","\n","RelDataTypeSystem","typeSystem,","int","sign,\n","String","value,\n","String","originalValue,\n","SqlParserPos","pos",")","{","\n","BigDecimal","year",";","\n\n","//","validate","as","YEAR","(","startPrecision",")",",","e",".","g",".","'YY'\n","String","intervalPattern","=","\"","(","\\\\d+",")","\"",";","\n\n","Matcher","m","=","Pattern",".","compile","(","intervalPattern",")",".","matcher","(","value",")",";","\n","if","(","m",".","matches","(",")",")","{","\n","//","Break","out","field","values\n","try","{","\n","year","=","parseField","(","m,","1",")",";","\n","}","catch","(","NumberFormatException","e",")","{","\n","throw","invalidValueException","(","pos,","originalValue",")",";","\n","}","\n\n","//","Validate","individual","fields\n","checkLeadFieldInRange","(","typeSystem,","sign,","year,","TimeUnit",".","YEAR,","pos",")",";","\n\n","//","package","values","up","for","return\n","return","fillIntervalValueArray","(","sign,","year,","ZERO",")",";","\n","}","else","{","\n","throw","invalidValueException","(","pos,","originalValue",")",";","\n","}","\n"],"docstring_tokens":["Validates","an","INTERVAL","literal","against","a","YEAR","interval","qualifier"]}
{"code_tokens":["\n","private","int[]","evaluateIntervalLiteralAsYearToMonth","(","\n","RelDataTypeSystem","typeSystem,","int","sign,\n","String","value,\n","String","originalValue,\n","SqlParserPos","pos",")","{","\n","BigDecimal","year",";","\n","BigDecimal","month",";","\n\n","//","validate","as","YEAR","(","startPrecision",")","TO","MONTH,","e",".","g",".","'YY-DD'\n","String","intervalPattern","=","\"","(","\\\\d+",")","-","(","\\\\d","{","1,2","}",")","\"",";","\n\n","Matcher","m","=","Pattern",".","compile","(","intervalPattern",")",".","matcher","(","value",")",";","\n","if","(","m",".","matches","(",")",")","{","\n","//","Break","out","field","values\n","try","{","\n","year","=","parseField","(","m,","1",")",";","\n","month","=","parseField","(","m,","2",")",";","\n","}","catch","(","NumberFormatException","e",")","{","\n","throw","invalidValueException","(","pos,","originalValue",")",";","\n","}","\n\n","//","Validate","individual","fields\n","checkLeadFieldInRange","(","typeSystem,","sign,","year,","TimeUnit",".","YEAR,","pos",")",";","\n","if","(","!isSecondaryFieldInRange","(","month,","TimeUnit",".","MONTH",")",")","{","\n","throw","invalidValueException","(","pos,","originalValue",")",";","\n","}","\n\n","//","package","values","up","for","return\n","return","fillIntervalValueArray","(","sign,","year,","month",")",";","\n","}","else","{","\n","throw","invalidValueException","(","pos,","originalValue",")",";","\n","}","\n"],"docstring_tokens":["Validates","an","INTERVAL","literal","against","a","YEAR","TO","MONTH","interval","qualifier"]}
{"code_tokens":["\n","private","int[]","evaluateIntervalLiteralAsMonth","(","\n","RelDataTypeSystem","typeSystem,","int","sign,\n","String","value,\n","String","originalValue,\n","SqlParserPos","pos",")","{","\n","BigDecimal","month",";","\n\n","//","validate","as","MONTH","(","startPrecision",")",",","e",".","g",".","'MM'\n","String","intervalPattern","=","\"","(","\\\\d+",")","\"",";","\n\n","Matcher","m","=","Pattern",".","compile","(","intervalPattern",")",".","matcher","(","value",")",";","\n","if","(","m",".","matches","(",")",")","{","\n","//","Break","out","field","values\n","try","{","\n","month","=","parseField","(","m,","1",")",";","\n","}","catch","(","NumberFormatException","e",")","{","\n","throw","invalidValueException","(","pos,","originalValue",")",";","\n","}","\n\n","//","Validate","individual","fields\n","checkLeadFieldInRange","(","typeSystem,","sign,","month,","TimeUnit",".","MONTH,","pos",")",";","\n\n","//","package","values","up","for","return\n","return","fillIntervalValueArray","(","sign,","ZERO,","month",")",";","\n","}","else","{","\n","throw","invalidValueException","(","pos,","originalValue",")",";","\n","}","\n"],"docstring_tokens":["Validates","an","INTERVAL","literal","against","a","MONTH","interval","qualifier"]}
{"code_tokens":["\n","private","int[]","evaluateIntervalLiteralAsDay","(","\n","RelDataTypeSystem","typeSystem,","int","sign,\n","String","value,\n","String","originalValue,\n","SqlParserPos","pos",")","{","\n","BigDecimal","day",";","\n\n","//","validate","as","DAY","(","startPrecision",")",",","e",".","g",".","'DD'\n","String","intervalPattern","=","\"","(","\\\\d+",")","\"",";","\n\n","Matcher","m","=","Pattern",".","compile","(","intervalPattern",")",".","matcher","(","value",")",";","\n","if","(","m",".","matches","(",")",")","{","\n","//","Break","out","field","values\n","try","{","\n","day","=","parseField","(","m,","1",")",";","\n","}","catch","(","NumberFormatException","e",")","{","\n","throw","invalidValueException","(","pos,","originalValue",")",";","\n","}","\n\n","//","Validate","individual","fields\n","checkLeadFieldInRange","(","typeSystem,","sign,","day,","TimeUnit",".","DAY,","pos",")",";","\n\n","//","package","values","up","for","return\n","return","fillIntervalValueArray","(","sign,","day,","ZERO,","ZERO,","ZERO,","ZERO",")",";","\n","}","else","{","\n","throw","invalidValueException","(","pos,","originalValue",")",";","\n","}","\n"],"docstring_tokens":["Validates","an","INTERVAL","literal","against","a","DAY","interval","qualifier"]}
{"code_tokens":["\n","private","int[]","evaluateIntervalLiteralAsDayToHour","(","\n","RelDataTypeSystem","typeSystem,","int","sign,\n","String","value,\n","String","originalValue,\n","SqlParserPos","pos",")","{","\n","BigDecimal","day",";","\n","BigDecimal","hour",";","\n\n","//","validate","as","DAY","(","startPrecision",")","TO","HOUR,","e",".","g",".","'DD","HH'\n","String","intervalPattern","=","\"","(","\\\\d+",")","(","\\\\d","{","1,2","}",")","\"",";","\n\n","Matcher","m","=","Pattern",".","compile","(","intervalPattern",")",".","matcher","(","value",")",";","\n","if","(","m",".","matches","(",")",")","{","\n","//","Break","out","field","values\n","try","{","\n","day","=","parseField","(","m,","1",")",";","\n","hour","=","parseField","(","m,","2",")",";","\n","}","catch","(","NumberFormatException","e",")","{","\n","throw","invalidValueException","(","pos,","originalValue",")",";","\n","}","\n\n","//","Validate","individual","fields\n","checkLeadFieldInRange","(","typeSystem,","sign,","day,","TimeUnit",".","DAY,","pos",")",";","\n","if","(","!isSecondaryFieldInRange","(","hour,","TimeUnit",".","HOUR",")",")","{","\n","throw","invalidValueException","(","pos,","originalValue",")",";","\n","}","\n\n","//","package","values","up","for","return\n","return","fillIntervalValueArray","(","sign,","day,","hour,","ZERO,","ZERO,","ZERO",")",";","\n","}","else","{","\n","throw","invalidValueException","(","pos,","originalValue",")",";","\n","}","\n"],"docstring_tokens":["Validates","an","INTERVAL","literal","against","a","DAY","TO","HOUR","interval","qualifier"]}
{"code_tokens":["\n","private","int[]","evaluateIntervalLiteralAsDayToMinute","(","\n","RelDataTypeSystem","typeSystem,","int","sign,\n","String","value,\n","String","originalValue,\n","SqlParserPos","pos",")","{","\n","BigDecimal","day",";","\n","BigDecimal","hour",";","\n","BigDecimal","minute",";","\n\n","//","validate","as","DAY","(","startPrecision",")","TO","MINUTE,","e",".","g",".","'DD","HH:MM'\n","String","intervalPattern","=","\"","(","\\\\d+",")","(","\\\\d","{","1,2","}",")",":","(","\\\\d","{","1,2","}",")","\"",";","\n\n","Matcher","m","=","Pattern",".","compile","(","intervalPattern",")",".","matcher","(","value",")",";","\n","if","(","m",".","matches","(",")",")","{","\n","//","Break","out","field","values\n","try","{","\n","day","=","parseField","(","m,","1",")",";","\n","hour","=","parseField","(","m,","2",")",";","\n","minute","=","parseField","(","m,","3",")",";","\n","}","catch","(","NumberFormatException","e",")","{","\n","throw","invalidValueException","(","pos,","originalValue",")",";","\n","}","\n\n","//","Validate","individual","fields\n","checkLeadFieldInRange","(","typeSystem,","sign,","day,","TimeUnit",".","DAY,","pos",")",";","\n","if","(","!isSecondaryFieldInRange","(","hour,","TimeUnit",".","HOUR",")","\n","||","!isSecondaryFieldInRange","(","minute,","TimeUnit",".","MINUTE",")",")","{","\n","throw","invalidValueException","(","pos,","originalValue",")",";","\n","}","\n\n","//","package","values","up","for","return\n","return","fillIntervalValueArray","(","sign,","day,","hour,","minute,","ZERO,","ZERO",")",";","\n","}","else","{","\n","throw","invalidValueException","(","pos,","originalValue",")",";","\n","}","\n"],"docstring_tokens":["Validates","an","INTERVAL","literal","against","a","DAY","TO","MINUTE","interval","qualifier"]}
{"code_tokens":["\n","private","int[]","evaluateIntervalLiteralAsDayToSecond","(","\n","RelDataTypeSystem","typeSystem,","int","sign,\n","String","value,\n","String","originalValue,\n","SqlParserPos","pos",")","{","\n","BigDecimal","day",";","\n","BigDecimal","hour",";","\n","BigDecimal","minute",";","\n","BigDecimal","second",";","\n","BigDecimal","secondFrac",";","\n","boolean","hasFractionalSecond",";","\n\n","//","validate","as","DAY","(","startPrecision",")","TO","MINUTE,\n","//","e",".","g",".","'DD","HH:MM:SS'","or","'DD","HH:MM:SS",".","SSS'\n","//","Note:","must","check","two","patterns,","since","fractional","second","is","optional\n","final","int","fractionalSecondPrecision","=\n","getFractionalSecondPrecision","(","typeSystem",")",";","\n","String","intervalPatternWithFracSec","=\n","\"","(","\\\\d+",")","(","\\\\d","{","1,2","}",")",":","(","\\\\d","{","1,2","}",")",":","(","\\\\d","{","1,2","}",")","\\\\",".","(","\\\\d","{","1,\"\n","+","fractionalSecondPrecision","+","\"","}",")","\"",";","\n","String","intervalPatternWithoutFracSec","=\n","\"","(","\\\\d+",")","(","\\\\d","{","1,2","}",")",":","(","\\\\d","{","1,2","}",")",":","(","\\\\d","{","1,2","}",")","\"",";","\n\n","Matcher","m","=","Pattern",".","compile","(","intervalPatternWithFracSec",")",".","matcher","(","value",")",";","\n","if","(","m",".","matches","(",")",")","{","\n","hasFractionalSecond","=","true",";","\n","}","else","{","\n","m","=","Pattern",".","compile","(","intervalPatternWithoutFracSec",")",".","matcher","(","value",")",";","\n","hasFractionalSecond","=","false",";","\n","}","\n\n","if","(","m",".","matches","(",")",")","{","\n","//","Break","out","field","values\n","try","{","\n","day","=","parseField","(","m,","1",")",";","\n","hour","=","parseField","(","m,","2",")",";","\n","minute","=","parseField","(","m,","3",")",";","\n","second","=","parseField","(","m,","4",")",";","\n","}","catch","(","NumberFormatException","e",")","{","\n","throw","invalidValueException","(","pos,","originalValue",")",";","\n","}","\n\n","if","(","hasFractionalSecond",")","{","\n","secondFrac","=","normalizeSecondFraction","(","castNonNull","(","m",".","group","(","5",")",")",")",";","\n","}","else","{","\n","secondFrac","=","ZERO",";","\n","}","\n\n","//","Validate","individual","fields\n","checkLeadFieldInRange","(","typeSystem,","sign,","day,","TimeUnit",".","DAY,","pos",")",";","\n","if","(","!isSecondaryFieldInRange","(","hour,","TimeUnit",".","HOUR",")","\n","||","!isSecondaryFieldInRange","(","minute,","TimeUnit",".","MINUTE",")","\n","||","!isSecondaryFieldInRange","(","second,","TimeUnit",".","SECOND",")","\n","||","!isFractionalSecondFieldInRange","(","secondFrac",")",")","{","\n","throw","invalidValueException","(","pos,","originalValue",")",";","\n","}","\n\n","//","package","values","up","for","return\n","return","fillIntervalValueArray","(","\n","sign,\n","day,\n","hour,\n","minute,\n","second,\n","secondFrac",")",";","\n","}","else","{","\n","throw","invalidValueException","(","pos,","originalValue",")",";","\n","}","\n"],"docstring_tokens":["Validates","an","INTERVAL","literal","against","a","DAY","TO","SECOND","interval","qualifier"]}
{"code_tokens":["\n","private","int[]","evaluateIntervalLiteralAsHour","(","\n","RelDataTypeSystem","typeSystem,","int","sign,\n","String","value,\n","String","originalValue,\n","SqlParserPos","pos",")","{","\n","BigDecimal","hour",";","\n\n","//","validate","as","HOUR","(","startPrecision",")",",","e",".","g",".","'HH'\n","String","intervalPattern","=","\"","(","\\\\d+",")","\"",";","\n\n","Matcher","m","=","Pattern",".","compile","(","intervalPattern",")",".","matcher","(","value",")",";","\n","if","(","m",".","matches","(",")",")","{","\n","//","Break","out","field","values\n","try","{","\n","hour","=","parseField","(","m,","1",")",";","\n","}","catch","(","NumberFormatException","e",")","{","\n","throw","invalidValueException","(","pos,","originalValue",")",";","\n","}","\n\n","//","Validate","individual","fields\n","checkLeadFieldInRange","(","typeSystem,","sign,","hour,","TimeUnit",".","HOUR,","pos",")",";","\n\n","//","package","values","up","for","return\n","return","fillIntervalValueArray","(","sign,","ZERO,","hour,","ZERO,","ZERO,","ZERO",")",";","\n","}","else","{","\n","throw","invalidValueException","(","pos,","originalValue",")",";","\n","}","\n"],"docstring_tokens":["Validates","an","INTERVAL","literal","against","an","HOUR","interval","qualifier"]}
{"code_tokens":["\n","private","int[]","evaluateIntervalLiteralAsHourToMinute","(","\n","RelDataTypeSystem","typeSystem,","int","sign,\n","String","value,\n","String","originalValue,\n","SqlParserPos","pos",")","{","\n","BigDecimal","hour",";","\n","BigDecimal","minute",";","\n\n","//","validate","as","HOUR","(","startPrecision",")","TO","MINUTE,","e",".","g",".","'HH:MM'\n","String","intervalPattern","=","\"","(","\\\\d+",")",":","(","\\\\d","{","1,2","}",")","\"",";","\n\n","Matcher","m","=","Pattern",".","compile","(","intervalPattern",")",".","matcher","(","value",")",";","\n","if","(","m",".","matches","(",")",")","{","\n","//","Break","out","field","values\n","try","{","\n","hour","=","parseField","(","m,","1",")",";","\n","minute","=","parseField","(","m,","2",")",";","\n","}","catch","(","NumberFormatException","e",")","{","\n","throw","invalidValueException","(","pos,","originalValue",")",";","\n","}","\n\n","//","Validate","individual","fields\n","checkLeadFieldInRange","(","typeSystem,","sign,","hour,","TimeUnit",".","HOUR,","pos",")",";","\n","if","(","!isSecondaryFieldInRange","(","minute,","TimeUnit",".","MINUTE",")",")","{","\n","throw","invalidValueException","(","pos,","originalValue",")",";","\n","}","\n\n","//","package","values","up","for","return\n","return","fillIntervalValueArray","(","sign,","ZERO,","hour,","minute,","ZERO,","ZERO",")",";","\n","}","else","{","\n","throw","invalidValueException","(","pos,","originalValue",")",";","\n","}","\n"],"docstring_tokens":["Validates","an","INTERVAL","literal","against","an","HOUR","TO","MINUTE","interval","qualifier"]}
{"code_tokens":["\n","private","int[]","evaluateIntervalLiteralAsHourToSecond","(","\n","RelDataTypeSystem","typeSystem,","int","sign,\n","String","value,\n","String","originalValue,\n","SqlParserPos","pos",")","{","\n","BigDecimal","hour",";","\n","BigDecimal","minute",";","\n","BigDecimal","second",";","\n","BigDecimal","secondFrac",";","\n","boolean","hasFractionalSecond",";","\n\n","//","validate","as","HOUR","(","startPrecision",")","TO","SECOND,\n","//","e",".","g",".","'HH:MM:SS'","or","'HH:MM:SS",".","SSS'\n","//","Note:","must","check","two","patterns,","since","fractional","second","is","optional\n","final","int","fractionalSecondPrecision","=\n","getFractionalSecondPrecision","(","typeSystem",")",";","\n","String","intervalPatternWithFracSec","=\n","\"","(","\\\\d+",")",":","(","\\\\d","{","1,2","}",")",":","(","\\\\d","{","1,2","}",")","\\\\",".","(","\\\\d","{","1,\"\n","+","fractionalSecondPrecision","+","\"","}",")","\"",";","\n","String","intervalPatternWithoutFracSec","=\n","\"","(","\\\\d+",")",":","(","\\\\d","{","1,2","}",")",":","(","\\\\d","{","1,2","}",")","\"",";","\n\n","Matcher","m","=","Pattern",".","compile","(","intervalPatternWithFracSec",")",".","matcher","(","value",")",";","\n","if","(","m",".","matches","(",")",")","{","\n","hasFractionalSecond","=","true",";","\n","}","else","{","\n","m","=","Pattern",".","compile","(","intervalPatternWithoutFracSec",")",".","matcher","(","value",")",";","\n","hasFractionalSecond","=","false",";","\n","}","\n\n","if","(","m",".","matches","(",")",")","{","\n","//","Break","out","field","values\n","try","{","\n","hour","=","parseField","(","m,","1",")",";","\n","minute","=","parseField","(","m,","2",")",";","\n","second","=","parseField","(","m,","3",")",";","\n","}","catch","(","NumberFormatException","e",")","{","\n","throw","invalidValueException","(","pos,","originalValue",")",";","\n","}","\n\n","if","(","hasFractionalSecond",")","{","\n","secondFrac","=","normalizeSecondFraction","(","castNonNull","(","m",".","group","(","4",")",")",")",";","\n","}","else","{","\n","secondFrac","=","ZERO",";","\n","}","\n\n","//","Validate","individual","fields\n","checkLeadFieldInRange","(","typeSystem,","sign,","hour,","TimeUnit",".","HOUR,","pos",")",";","\n","if","(","!isSecondaryFieldInRange","(","minute,","TimeUnit",".","MINUTE",")","\n","||","!isSecondaryFieldInRange","(","second,","TimeUnit",".","SECOND",")","\n","||","!isFractionalSecondFieldInRange","(","secondFrac",")",")","{","\n","throw","invalidValueException","(","pos,","originalValue",")",";","\n","}","\n\n","//","package","values","up","for","return\n","return","fillIntervalValueArray","(","\n","sign,\n","ZERO,\n","hour,\n","minute,\n","second,\n","secondFrac",")",";","\n","}","else","{","\n","throw","invalidValueException","(","pos,","originalValue",")",";","\n","}","\n"],"docstring_tokens":["Validates","an","INTERVAL","literal","against","an","HOUR","TO","SECOND","interval","qualifier"]}
{"code_tokens":["\n","private","int[]","evaluateIntervalLiteralAsMinute","(","\n","RelDataTypeSystem","typeSystem,","int","sign,\n","String","value,\n","String","originalValue,\n","SqlParserPos","pos",")","{","\n","BigDecimal","minute",";","\n\n","//","validate","as","MINUTE","(","startPrecision",")",",","e",".","g",".","'MM'\n","String","intervalPattern","=","\"","(","\\\\d+",")","\"",";","\n\n","Matcher","m","=","Pattern",".","compile","(","intervalPattern",")",".","matcher","(","value",")",";","\n","if","(","m",".","matches","(",")",")","{","\n","//","Break","out","field","values\n","try","{","\n","minute","=","parseField","(","m,","1",")",";","\n","}","catch","(","NumberFormatException","e",")","{","\n","throw","invalidValueException","(","pos,","originalValue",")",";","\n","}","\n\n","//","Validate","individual","fields\n","checkLeadFieldInRange","(","typeSystem,","sign,","minute,","TimeUnit",".","MINUTE,","pos",")",";","\n\n","//","package","values","up","for","return\n","return","fillIntervalValueArray","(","sign,","ZERO,","ZERO,","minute,","ZERO,","ZERO",")",";","\n","}","else","{","\n","throw","invalidValueException","(","pos,","originalValue",")",";","\n","}","\n"],"docstring_tokens":["Validates","an","INTERVAL","literal","against","an","MINUTE","interval","qualifier"]}
{"code_tokens":["\n","private","int[]","evaluateIntervalLiteralAsMinuteToSecond","(","\n","RelDataTypeSystem","typeSystem,","int","sign,\n","String","value,\n","String","originalValue,\n","SqlParserPos","pos",")","{","\n","BigDecimal","minute",";","\n","BigDecimal","second",";","\n","BigDecimal","secondFrac",";","\n","boolean","hasFractionalSecond",";","\n\n","//","validate","as","MINUTE","(","startPrecision",")","TO","SECOND,\n","//","e",".","g",".","'MM:SS'","or","'MM:SS",".","SSS'\n","//","Note:","must","check","two","patterns,","since","fractional","second","is","optional\n","final","int","fractionalSecondPrecision","=\n","getFractionalSecondPrecision","(","typeSystem",")",";","\n","String","intervalPatternWithFracSec","=\n","\"","(","\\\\d+",")",":","(","\\\\d","{","1,2","}",")","\\\\",".","(","\\\\d","{","1,\"","+","fractionalSecondPrecision","+","\"","}",")","\"",";","\n","String","intervalPatternWithoutFracSec","=\n","\"","(","\\\\d+",")",":","(","\\\\d","{","1,2","}",")","\"",";","\n\n","Matcher","m","=","Pattern",".","compile","(","intervalPatternWithFracSec",")",".","matcher","(","value",")",";","\n","if","(","m",".","matches","(",")",")","{","\n","hasFractionalSecond","=","true",";","\n","}","else","{","\n","m","=","Pattern",".","compile","(","intervalPatternWithoutFracSec",")",".","matcher","(","value",")",";","\n","hasFractionalSecond","=","false",";","\n","}","\n\n","if","(","m",".","matches","(",")",")","{","\n","//","Break","out","field","values\n","try","{","\n","minute","=","parseField","(","m,","1",")",";","\n","second","=","parseField","(","m,","2",")",";","\n","}","catch","(","NumberFormatException","e",")","{","\n","throw","invalidValueException","(","pos,","originalValue",")",";","\n","}","\n\n","if","(","hasFractionalSecond",")","{","\n","secondFrac","=","normalizeSecondFraction","(","castNonNull","(","m",".","group","(","3",")",")",")",";","\n","}","else","{","\n","secondFrac","=","ZERO",";","\n","}","\n\n","//","Validate","individual","fields\n","checkLeadFieldInRange","(","typeSystem,","sign,","minute,","TimeUnit",".","MINUTE,","pos",")",";","\n","if","(","!isSecondaryFieldInRange","(","second,","TimeUnit",".","SECOND",")","\n","||","!isFractionalSecondFieldInRange","(","secondFrac",")",")","{","\n","throw","invalidValueException","(","pos,","originalValue",")",";","\n","}","\n\n","//","package","values","up","for","return\n","return","fillIntervalValueArray","(","\n","sign,\n","ZERO,\n","ZERO,\n","minute,\n","second,\n","secondFrac",")",";","\n","}","else","{","\n","throw","invalidValueException","(","pos,","originalValue",")",";","\n","}","\n"],"docstring_tokens":["Validates","an","INTERVAL","literal","against","an","MINUTE","TO","SECOND","interval","qualifier"]}
{"code_tokens":["\n","private","int[]","evaluateIntervalLiteralAsSecond","(","\n","RelDataTypeSystem","typeSystem,\n","int","sign,\n","String","value,\n","String","originalValue,\n","SqlParserPos","pos",")","{","\n","BigDecimal","second",";","\n","BigDecimal","secondFrac",";","\n","boolean","hasFractionalSecond",";","\n\n","//","validate","as","SECOND","(","startPrecision,","fractionalSecondPrecision",")","\n","//","e",".","g",".","'SS'","or","'SS",".","SSS'\n","//","Note:","must","check","two","patterns,","since","fractional","second","is","optional\n","final","int","fractionalSecondPrecision","=\n","getFractionalSecondPrecision","(","typeSystem",")",";","\n","String","intervalPatternWithFracSec","=\n","\"","(","\\\\d+",")","\\\\",".","(","\\\\d","{","1,\"","+","fractionalSecondPrecision","+","\"","}",")","\"",";","\n","String","intervalPatternWithoutFracSec","=\n","\"","(","\\\\d+",")","\"",";","\n\n","Matcher","m","=","Pattern",".","compile","(","intervalPatternWithFracSec",")",".","matcher","(","value",")",";","\n","if","(","m",".","matches","(",")",")","{","\n","hasFractionalSecond","=","true",";","\n","}","else","{","\n","m","=","Pattern",".","compile","(","intervalPatternWithoutFracSec",")",".","matcher","(","value",")",";","\n","hasFractionalSecond","=","false",";","\n","}","\n\n","if","(","m",".","matches","(",")",")","{","\n","//","Break","out","field","values\n","try","{","\n","second","=","parseField","(","m,","1",")",";","\n","}","catch","(","NumberFormatException","e",")","{","\n","throw","invalidValueException","(","pos,","originalValue",")",";","\n","}","\n\n","if","(","hasFractionalSecond",")","{","\n","secondFrac","=","normalizeSecondFraction","(","castNonNull","(","m",".","group","(","2",")",")",")",";","\n","}","else","{","\n","secondFrac","=","ZERO",";","\n","}","\n\n","//","Validate","individual","fields\n","checkLeadFieldInRange","(","typeSystem,","sign,","second,","TimeUnit",".","SECOND,","pos",")",";","\n","if","(","!isFractionalSecondFieldInRange","(","secondFrac",")",")","{","\n","throw","invalidValueException","(","pos,","originalValue",")",";","\n","}","\n\n","//","package","values","up","for","return\n","return","fillIntervalValueArray","(","\n","sign,","ZERO,","ZERO,","ZERO,","second,","secondFrac",")",";","\n","}","else","{","\n","throw","invalidValueException","(","pos,","originalValue",")",";","\n","}","\n"],"docstring_tokens":["Validates","an","INTERVAL","literal","against","an","SECOND","interval","qualifier"]}
{"code_tokens":["\n","@Pure\n","public","@Nullable","SqlIdentifier","getAlias","(",")","{","\n","return","alias",";","\n"],"docstring_tokens":["Returns","the","alias","for","the","target","table","of","this","UPDATE"]}
{"code_tokens":["\n","private","void","postOrderWalk","(","Operator","root,","PlanVisitor","visitor",")","throws","FrontendException","{","\n","final","Collection<Operator>","nexts","=\n","Utils",".","mergeCollection","(","plan",".","getSuccessors","(","root",")",",","plan",".","getSuccessors","(","root",")",")",";","\n","if","(","nexts","!=","null",")","{","\n","for","(","Operator","op",":","nexts",")","{","\n","postOrderWalk","(","op,","visitor",")",";","\n","}","\n","}","\n","root",".","accept","(","visitor",")",";","\n"],"docstring_tokens":["Does","post-order","walk","on","the","Pig","expression","plan","from","source","to","sinks"]}
{"code_tokens":["\n","protected","SqlParserListFixture","list","(",")","{","\n","return","new","SqlParserListFixture","(","factory,","tester,","dialect,","convertToLinux,","sap",")",";","\n"],"docstring_tokens":["Creates","an","instance","of","helper","class","SqlParserListFixture","to","test","parsing","a","list","of","statements"]}
{"code_tokens":["\n","public","SqlParserFixture","withFactory","(","UnaryOperator<SqlTestFactory>","transform",")","{","\n","final","SqlTestFactory","factory","=","transform",".","apply","(","this",".","factory",")",";","\n","if","(","factory","==","this",".","factory",")","{","\n","return","this",";","\n","}","\n","return","new","SqlParserFixture","(","factory,","sap,","expression,","tester,","dialect,\n","convertToLinux,","parserChecker",")",";","\n"],"docstring_tokens":["Creates","a","copy","of","this","fixture","with","a","new","test","factory"]}
{"code_tokens":["\n","private","IndexCondition","translateAnd","(","RexNode","condition",")","{","\n","//","expand","calls","to","SEARCH","(",".",".",".",",","Sarg","(",")",")","to",">,","=,","etc",".","\n","final","RexNode","condition2","=\n","RexUtil",".","expandSearch","(","rexBuilder,","null,","condition",")",";","\n","//","decompose","condition","by","AND,","flatten","row","expression\n","List<RexNode>","rexNodeList","=","RelOptUtil",".","conjunctions","(","condition2",")",";","\n\n","List<IndexCondition>","indexConditions","=","new","ArrayList<>","(",")",";","\n\n","//","try","to","push","down","filter","by","primary","key\n","if","(","pkMeta","!=","null",")","{","\n","IndexCondition","pkPushDownCond","=","findPushDownCondition","(","rexNodeList,","pkMeta",")",";","\n","indexConditions",".","add","(","pkPushDownCond",")",";","\n","}","\n\n","//","try","to","push","down","filter","by","secondary","keys\n","if","(","CollectionUtils",".","isNotEmpty","(","skMetaList",")",")","{","\n","for","(","KeyMeta","skMeta",":","skMetaList",")","{","\n","indexConditions",".","add","(","findPushDownCondition","(","rexNodeList,","skMeta",")",")",";","\n","}","\n","}","\n\n","//","a","collection","of","all","possible","push","down","conditions,","see","if","it","can\n","//","be","pushed","down,","filter","by","forcing","index","name,","then","sort","by","comparator\n","Stream<IndexCondition>","pushDownConditions","=","indexConditions",".","stream","(",")","\n",".","filter","(","IndexCondition::canPushDown",")","\n",".","filter","(","this::nonForceIndexOrMatchForceIndexName",")","\n",".","sorted","(","new","IndexConditionComparator","(",")",")",";","\n\n","return","pushDownConditions",".","findFirst","(",")",".","orElse","(","IndexCondition",".","EMPTY_CONDITION",")",";","\n"],"docstring_tokens":["Translates","a","conjunctive","predicate","to","a","push","down","condition"]}
{"code_tokens":["\n","private","IndexCondition","findPushDownCondition","(","List<RexNode>","rexNodeList,","KeyMeta","keyMeta",")","{","\n","//","find","field","expressions","matching","index","columns","and","specific","operators\n","List<InternalRexNode>","matchedRexNodeList","=","analyzePrefixMatches","(","rexNodeList,","keyMeta",")",";","\n\n","//","none","of","the","conditions","can","be","pushed","down\n","if","(","CollectionUtils",".","isEmpty","(","matchedRexNodeList",")",")","{","\n","return","IndexCondition",".","EMPTY_CONDITION",";","\n","}","\n\n","//","a","collection","that","maps","ordinal","in","index","column","list\n","//","to","multiple","field","expressions\n","Multimap<Integer,","InternalRexNode>","keyOrdToNodesMap","=","HashMultimap",".","create","(",")",";","\n","for","(","InternalRexNode","node",":","matchedRexNodeList",")","{","\n","keyOrdToNodesMap",".","put","(","node",".","ordinalInKey,","node",")",";","\n","}","\n\n","//","left-prefix","index","rule","not","match\n","Collection<InternalRexNode>","leftMostKeyNodes","=","keyOrdToNodesMap",".","get","(","0",")",";","\n","if","(","CollectionUtils",".","isEmpty","(","leftMostKeyNodes",")",")","{","\n","return","IndexCondition",".","EMPTY_CONDITION",";","\n","}","\n\n","//","create","result","which","might","have","conditions","to","push","down\n","List<String>","indexColumnNames","=","keyMeta",".","getKeyColumnNames","(",")",";","\n","List<RexNode>","pushDownRexNodeList","=","new","ArrayList<>","(",")",";","\n","List<RexNode>","remainderRexNodeList","=","new","ArrayList<>","(","rexNodeList",")",";","\n","IndexCondition","condition","=\n","IndexCondition",".","create","(","fieldNames,","keyMeta",".","getName","(",")",",","indexColumnNames,\n","pushDownRexNodeList,","remainderRexNodeList",")",";","\n\n","//","handle","point","query","if","possible\n","condition","=","handlePointQuery","(","condition,","keyMeta,","leftMostKeyNodes,\n","keyOrdToNodesMap,","pushDownRexNodeList,","remainderRexNodeList",")",";","\n","if","(","condition",".","canPushDown","(",")",")","{","\n","return","condition",";","\n","}","\n\n","//","handle","range","query\n","condition","=","handleRangeQuery","(","condition,","keyMeta,","leftMostKeyNodes,\n","pushDownRexNodeList,","remainderRexNodeList,","\">=\",","\">\"",")",";","\n","condition","=","handleRangeQuery","(","condition,","keyMeta,","leftMostKeyNodes,\n","pushDownRexNodeList,","remainderRexNodeList,","\"<=\",","\"<\"",")",";","\n\n","return","condition",";","\n"],"docstring_tokens":["Tries","to","translate","a","conjunctive","predicate","to","push","down","condition"]}
{"code_tokens":["\n","private","Optional<InternalRexNode>","translateMatch2","(","RexNode","node,","KeyMeta","keyMeta",")","{","\n","switch","(","node",".","getKind","(",")",")","{","\n","case","EQUALS:\n","return","translateBinary","(","\"=\",","\"=\",","(","RexCall",")","node,","keyMeta",")",";","\n","case","LESS_THAN:\n","return","translateBinary","(","\"<\",","\">\",","(","RexCall",")","node,","keyMeta",")",";","\n","case","LESS_THAN_OR_EQUAL:\n","return","translateBinary","(","\"<=\",","\">=\",","(","RexCall",")","node,","keyMeta",")",";","\n","case","GREATER_THAN:\n","return","translateBinary","(","\">\",","\"<\",","(","RexCall",")","node,","keyMeta",")",";","\n","case","GREATER_THAN_OR_EQUAL:\n","return","translateBinary","(","\">=\",","\"<=\",","(","RexCall",")","node,","keyMeta",")",";","\n","default:\n","return","Optional",".","empty","(",")",";","\n","}","\n"],"docstring_tokens":["Translates","a","binary","relation"]}
{"code_tokens":["\n","private","Optional<InternalRexNode>","translateBinary2","(","String","op,","RexNode","left,\n","RexNode","right,","RexNode","originNode,","KeyMeta","keyMeta",")","{","\n","RexLiteral","rightLiteral",";","\n","if","(","right",".","isA","(","SqlKind",".","LITERAL",")",")","{","\n","rightLiteral","=","(","RexLiteral",")","right",";","\n","}","else","{","\n","//","because","MySQL's","TIMESTAMP","is","mapped","to","TIMESTAMP_WITH_TIME_ZONE","sql","type,\n","//","we","should","cast","the","value","to","literal",".","\n","if","(","right",".","isA","(","SqlKind",".","CAST",")","\n","&&","isSqlTypeMatch","(","(","RexCall",")","right,","SqlTypeName",".","TIMESTAMP_WITH_LOCAL_TIME_ZONE",")",")","{","\n","rightLiteral","=","(","RexLiteral",")","(","(","RexCall",")","right",")",".","operands",".","get","(","0",")",";","\n","}","else","{","\n","return","Optional",".","empty","(",")",";","\n","}","\n","}","\n","switch","(","left",".","getKind","(",")",")","{","\n","case","INPUT_REF:\n","final","RexInputRef","left1","=","(","RexInputRef",")","left",";","\n","String","name","=","fieldNames",".","get","(","left1",".","getIndex","(",")",")",";","\n","//","filter","out","field","does","not","show","in","index","column\n","if","(","!keyMeta",".","getKeyColumnNames","(",")",".","contains","(","name",")",")","{","\n","return","Optional",".","empty","(",")",";","\n","}","\n","return","translateOp2","(","op,","name,","rightLiteral,","originNode,","keyMeta",")",";","\n","case","CAST:\n","return","translateBinary2","(","op,","(","(","RexCall",")","left",")",".","operands",".","get","(","0",")",",","right,\n","originNode,","keyMeta",")",";","\n","default:\n","return","Optional",".","empty","(",")",";","\n","}","\n"],"docstring_tokens":["Translates","a","call","to","a","binary","operator"]}
{"code_tokens":["\n","private","static","Optional<InternalRexNode>","translateOp2","(","String","op,","String","name,\n","RexLiteral","right,","RexNode","originNode,","KeyMeta","keyMeta",")","{","\n","String","value","=","literalValue","(","right",")",";","\n","InternalRexNode","node","=","new","InternalRexNode","(",")",";","\n","node",".","node","=","originNode",";","\n","node",".","ordinalInKey","=","keyMeta",".","getKeyColumnNames","(",")",".","indexOf","(","name",")",";","\n","//","For","variable","length","column,","Innodb-java-reader","have","a","limitation,\n","//","left-prefix","index","length","should","be","less","than","search","value","literal",".","\n","//","For","example,","we","cannot","leverage","index","of","EMAIL","(","3",")","upon","search","value\n","//","`someone@apache",".","org`,","because","the","value","length","is","longer","than","3",".","\n","if","(","keyMeta",".","getVarLen","(","name",")",".","isPresent","(",")","\n","&&","keyMeta",".","getVarLen","(","name",")",".","get","(",")","<","value",".","length","(",")",")","{","\n","return","Optional",".","empty","(",")",";","\n","}","\n","node",".","fieldName","=","name",";","\n","node",".","op","=","op",";","\n","node",".","right","=","value",";","\n","return","Optional",".","of","(","node",")",";","\n"],"docstring_tokens":["Combines","a","field","name,","operator,","and","literal","to","produce","a","predicate","string"]}
{"code_tokens":["\n","public","static","<E>","Iterable<Ord<E>>","zip","(","final","Iterable<?","extends","E>","iterable",")","{","\n","return","(",")","->","zip","(","iterable",".","iterator","(",")",")",";","\n"],"docstring_tokens":["Creates","an","iterable","of","Ords","over","an","iterable"]}
{"code_tokens":["\n","public","static","<E>","Iterator<Ord<E>>","zip","(","final","Iterator<?","extends","E>","iterator",")","{","\n","return","new","Iterator<Ord<E>>","(",")","{","\n","int","n","=","0",";","\n\n","@Override","public","boolean","hasNext","(",")","{","\n","return","iterator",".","hasNext","(",")",";","\n","}","\n\n","@Override","public","Ord<E>","next","(",")","{","\n","return","Ord",".","of","(","n++,","iterator",".","next","(",")",")",";","\n","}","\n\n","@Override","public","void","remove","(",")","{","\n","iterator",".","remove","(",")",";","\n","}","\n","}",";","\n"],"docstring_tokens":["Creates","an","iterator","of","Ords","over","an","iterator"]}
{"code_tokens":["\n","public","static","@PolyNull","SerializableCharset","forCharset","(","@PolyNull","Charset","charset",")","{","\n","if","(","charset","==","null",")","{","\n","return","null",";","\n","}","\n","return","new","SerializableCharset","(","charset",")",";","\n"],"docstring_tokens":["Returns","a","SerializableCharset","wrapping","the","given","Charset,","or","null","if","the","charset","is","null"]}
{"code_tokens":["\n","@EnsuresNonNull","(","{","\"this",".","metadataProvider\",","\"this",".","metadataFactory\"","}",")","\n","@SuppressWarnings","(","\"deprecation\"",")","\n","public","void","setMetadataProvider","(","\n","@UnknownInitialization","RelOptCluster","this,\n","RelMetadataProvider","metadataProvider",")","{","\n","this",".","metadataProvider","=","metadataProvider",";","\n","this",".","metadataFactory","=\n","new","org",".","apache",".","calcite",".","rel",".","metadata",".","MetadataFactoryImpl","(","metadataProvider",")",";","\n","//","Wrap","the","metadata","provider","as","a","JaninoRelMetadataProvider\n","//","and","set","it","to","the","ThreadLocal,\n","//","JaninoRelMetadataProvider","is","required","by","the","RelMetadataQuery",".","\n","RelMetadataQueryBase",".","THREAD_PROVIDERS\n",".","set","(","JaninoRelMetadataProvider",".","of","(","metadataProvider",")",")",";","\n"],"docstring_tokens":["Overrides","the","default","metadata","provider","for","this","cluster"]}
{"code_tokens":["\n","public","HintStrategyTable","getHintStrategies","(",")","{","\n","if","(","this",".","hintStrategies","==","null",")","{","\n","this",".","hintStrategies","=","HintStrategyTable",".","EMPTY",";","\n","}","\n","return","this",".","hintStrategies",";","\n"],"docstring_tokens":["Returns","the","hint","strategies","of","this","cluster"]}
{"code_tokens":["\n","public","CorrelationId","createCorrel","(",")","{","\n","return","new","CorrelationId","(","nextCorrel",".","getAndIncrement","(",")",")",";","\n"],"docstring_tokens":["Constructs","a","new","id","for","a","correlating","variable"]}
{"code_tokens":["\n","public","RelTraitSet","traitSet","(",")","{","\n","return","emptyTraitSet",";","\n"],"docstring_tokens":["Returns","the","default","trait","set","for","this","cluster"]}
{"code_tokens":["\n","public","static","@Nullable","Object","fromEnum","(","@Nullable","Object","value",")","{","\n","return","value","instanceof","Enum","?","fromEnum","(","(","Enum",")","value",")",":","value",";","\n"],"docstring_tokens":["Converts","a","literal","into","a","value","that","can","be","serialized","to","JSON"]}
{"code_tokens":["\n","public","static","SqlCharStringLiteral","createRegexPatternLiteral","(","SqlNode","call,","SqlLiteral","trimFlag",")","{","\n","final","String","regexPattern","=","requireNonNull","(","(","(","SqlCharStringLiteral",")","call",")",".","toValue","(",")",",\n","(",")","->","\"null","value","for","SqlNode","\"","+","call",")",";","\n","String","escaped","=","escapeSpecialChar","(","regexPattern",")",";","\n","final","StringBuilder","builder","=","new","StringBuilder","(",")",";","\n","switch","(","trimFlag",".","getValueAs","(","SqlTrimFunction",".","Flag",".","class",")",")","{","\n","case","LEADING:\n","builder",".","append","(","\"^","(","\"",")",".","append","(","escaped",")",".","append","(","\"",")","*\"",")",";","\n","break",";","\n","case","TRAILING:\n","builder",".","append","(","\"","(","\"",")",".","append","(","escaped",")",".","append","(","\"",")","*$\"",")",";","\n","break",";","\n","default:\n","builder",".","append","(","\"^","(","\"",")","\n",".","append","(","escaped",")","\n",".","append","(","\"",")","*|","(","\"",")","\n",".","append","(","escaped",")","\n",".","append","(","\"",")","*$\"",")",";","\n","break",";","\n","}","\n","return","SqlLiteral",".","createCharString","(","builder",".","toString","(",")",",\n","call",".","getParserPosition","(",")",")",";","\n"],"docstring_tokens":["Creates","regex","pattern","based","on","the","TRIM","flag"]}
{"code_tokens":["\n","public","static","SqlSpecialOperator","specialOperatorByName","(","String","opName",")","{","\n","return","new","SqlSpecialOperator","(","opName,","SqlKind",".","OTHER_FUNCTION",")","{","\n","@Override","public","void","unparse","(","\n","SqlWriter","writer,\n","SqlCall","call,\n","int","leftPrec,\n","int","rightPrec",")","{","\n","writer",".","print","(","getName","(",")",")",";","\n","final","SqlWriter",".","Frame","frame","=\n","writer",".","startList","(","SqlWriter",".","FrameTypeEnum",".","FUN_CALL,","\"","(","\",","\"",")","\"",")",";","\n","for","(","SqlNode","operand",":","call",".","getOperandList","(",")",")","{","\n","writer",".","sep","(","\",\"",")",";","\n","operand",".","unparse","(","writer,","0,","0",")",";","\n","}","\n","writer",".","endList","(","frame",")",";","\n","}","\n","}",";","\n"],"docstring_tokens":["Returns","a","SqlSpecialOperator","with","given","operator","name,","mainly","used","for","unparse","override"]}
{"code_tokens":["\n","public","static","<E>","Set<E>","of","(","E","e1",")","{","\n","//noinspection","unchecked\n","return","e1","==","null","?","(","Set<E>",")","SINGLETON_NULL",":","ImmutableSet",".","of","(","e1",")",";","\n"],"docstring_tokens":["Creates","an","immutable","set","of","1","element"]}
{"code_tokens":["\n","@SuppressWarnings","(","\"unchecked\"",")","\n","public","static","<E>","Set<E>","of","(","E","e1,","E","e2",")","{","\n","return","copyOf","(","(","E","[]",")","new","Object[]","{","e1,","e2","}",",","false",")",";","\n"],"docstring_tokens":["Creates","an","immutable","set","of","2","elements"]}
{"code_tokens":["\n","@SuppressWarnings","(","\"unchecked\"",")","\n","public","static","<E>","Set<E>","of","(","E","e1,","E","e2,","E","e3",")","{","\n","return","copyOf","(","(","E","[]",")","new","Object[]","{","e1,","e2,","e3","}",",","false",")",";","\n"],"docstring_tokens":["Creates","an","immutable","set","of","3","elements"]}
{"code_tokens":["\n","@SuppressWarnings","(","\"unchecked\"",")","\n","public","static","<E>","Set<E>","of","(","E","e1,","E","e2,","E","e3,","E","e4",")","{","\n","return","copyOf","(","(","E","[]",")","new","Object[]","{","e1,","e2,","e3,","e4","}",",","false",")",";","\n"],"docstring_tokens":["Creates","an","immutable","set","of","4","elements"]}
{"code_tokens":["\n","@SuppressWarnings","(","\"unchecked\"",")","\n","public","static","<E>","Set<E>","of","(","E","e1,","E","e2,","E","e3,","E","e4,","E","e5,","E",".",".",".","others",")","{","\n","E[]","elements","=","(","E[]",")","new","Object[5","+","others",".","length]",";","\n","elements[0]","=","e1",";","\n","elements[1]","=","e2",";","\n","elements[2]","=","e3",";","\n","elements[3]","=","e4",";","\n","elements[4]","=","e5",";","\n","System",".","arraycopy","(","others,","0,","elements,","5,","others",".","length",")",";","\n","return","copyOf","(","elements,","false",")",";","\n"],"docstring_tokens":["Creates","an","immutable","set","of","5","or","more","elements"]}
{"code_tokens":["\n","public","static","List<Integer>","left","(","final","List<IntPair>","pairs",")","{","\n","return","Util",".","transform","(","pairs,","x","->","x",".","source",")",";","\n"],"docstring_tokens":["Returns","the","left","side","of","a","list","of","pairs"]}
{"code_tokens":["\n","public","static","List<Integer>","right","(","final","List<IntPair>","pairs",")","{","\n","return","Util",".","transform","(","pairs,","x","->","x",".","target",")",";","\n"],"docstring_tokens":["Returns","the","right","side","of","a","list","of","pairs"]}
{"code_tokens":["\n","protected","NodeLineage","generateSwapTableColumnReferencesLineage","(","\n","RexBuilder","rexBuilder,\n","RelMetadataQuery","mq,\n","RelNode","node,\n","BiMap<RelTableRef,","RelTableRef>","tableMapping,\n","EquivalenceClasses","ec,\n","List<RexNode>","nodeExprs",")","{","\n","final","Map<RexNode,","Integer>","exprsLineage","=","new","HashMap<>","(",")",";","\n","final","Map<RexNode,","Integer>","exprsLineageLosslessCasts","=","new","HashMap<>","(",")",";","\n","for","(","int","i","=","0",";","i","<","nodeExprs",".","size","(",")",";","i++",")","{","\n","final","RexNode","expr","=","nodeExprs",".","get","(","i",")",";","\n","final","Set<RexNode>","lineages","=","mq",".","getExpressionLineage","(","node,","expr",")",";","\n","if","(","lineages","==","null",")","{","\n","//","Next","expression\n","continue",";","\n","}","\n","if","(","lineages",".","size","(",")","!=","1",")","{","\n","throw","new","IllegalStateException","(","\"We","only","support","project","-","filter","-","join,","\"\n","+","\"thus","expression","lineage","should","map","to","a","single","expression,","got:","'\"\n","+","lineages","+","\"'","for","expr","'\"","+","expr","+","\"'","in","node","'\"","+","node","+","\"'\"",")",";","\n","}","\n","//","Rewrite","expr",".","First","we","swap","the","table","references","following","the","table\n","//","mapping,","then","we","take","first","element","from","the","corresponding","equivalence","class\n","final","RexNode","e","=","RexUtil",".","swapTableColumnReferences","(","rexBuilder,\n","lineages",".","iterator","(",")",".","next","(",")",",","tableMapping,","ec",".","getEquivalenceClassesMap","(",")",")",";","\n","exprsLineage",".","put","(","e,","i",")",";","\n","if","(","RexUtil",".","isLosslessCast","(","e",")",")","{","\n","exprsLineageLosslessCasts",".","put","(","(","(","RexCall",")","e",")",".","getOperands","(",")",".","get","(","0",")",",","i",")",";","\n","}","\n","}","\n","return","new","NodeLineage","(","exprsLineage,","exprsLineageLosslessCasts",")",";","\n"],"docstring_tokens":["It","swaps","the","table","references","and","then","the","column","references","of","the","input","expressions","using","the","table","mapping","and","the","equivalence","classes"]}
{"code_tokens":["\n","protected","NodeLineage","generateSwapColumnTableReferencesLineage","(","\n","RexBuilder","rexBuilder,\n","RelMetadataQuery","mq,\n","RelNode","node,\n","BiMap<RelTableRef,","RelTableRef>","tableMapping,\n","EquivalenceClasses","ec,\n","List<RexNode>","nodeExprs",")","{","\n","final","Map<RexNode,","Integer>","exprsLineage","=","new","HashMap<>","(",")",";","\n","final","Map<RexNode,","Integer>","exprsLineageLosslessCasts","=","new","HashMap<>","(",")",";","\n","for","(","int","i","=","0",";","i","<","nodeExprs",".","size","(",")",";","i++",")","{","\n","final","RexNode","expr","=","nodeExprs",".","get","(","i",")",";","\n","final","Set<RexNode>","lineages","=","mq",".","getExpressionLineage","(","node,","expr",")",";","\n","if","(","lineages","==","null",")","{","\n","//","Next","expression\n","continue",";","\n","}","\n","if","(","lineages",".","size","(",")","!=","1",")","{","\n","throw","new","IllegalStateException","(","\"We","only","support","project","-","filter","-","join,","\"\n","+","\"thus","expression","lineage","should","map","to","a","single","expression,","got:","'\"\n","+","lineages","+","\"'","for","expr","'\"","+","expr","+","\"'","in","node","'\"","+","node","+","\"'\"",")",";","\n","}","\n","//","Rewrite","expr",".","First","we","take","first","element","from","the","corresponding","equivalence","class,\n","//","then","we","swap","the","table","references","following","the","table","mapping\n","final","RexNode","e","=","RexUtil",".","swapColumnTableReferences","(","rexBuilder,\n","lineages",".","iterator","(",")",".","next","(",")",",","ec",".","getEquivalenceClassesMap","(",")",",","tableMapping",")",";","\n","exprsLineage",".","put","(","e,","i",")",";","\n","if","(","RexUtil",".","isLosslessCast","(","e",")",")","{","\n","exprsLineageLosslessCasts",".","put","(","(","(","RexCall",")","e",")",".","getOperands","(",")",".","get","(","0",")",",","i",")",";","\n","}","\n","}","\n","return","new","NodeLineage","(","exprsLineage,","exprsLineageLosslessCasts",")",";","\n"],"docstring_tokens":["It","swaps","the","column","references","and","then","the","table","references","of","the","input","expressions","using","the","equivalence","classes","and","the","table","mapping"]}
{"code_tokens":["\n","private","<T>","@Nullable","Table","fieldRelation","(","final","Field","field",")","{","\n","final","Type","elementType","=","getElementType","(","field",".","getType","(",")",")",";","\n","if","(","elementType","==","null",")","{","\n","return","null",";","\n","}","\n","Object","o",";","\n","try","{","\n","o","=","field",".","get","(","target",")",";","\n","}","catch","(","IllegalAccessException","e",")","{","\n","throw","new","RuntimeException","(","\n","\"Error","while","accessing","field","\"","+","field,","e",")",";","\n","}","\n","requireNonNull","(","o,","(",")","->","\"field","\"","+","field","+","\"","is","null","for","\"","+","target",")",";","\n","@SuppressWarnings","(","\"unchecked\"",")","\n","final","Enumerable<T>","enumerable","=","toEnumerable","(","o",")",";","\n","return","new","FieldTable<>","(","field,","elementType,","enumerable",")",";","\n"],"docstring_tokens":["Returns","a","table","based","on","a","particular","field","of","this","schema"]}
{"code_tokens":["\n","public","static","String","regexpReplace","(","String","s,","String","regex,\n","String","replacement",")","{","\n","return","regexpReplace","(","s,","regex,","replacement,","1,","0,","null",")",";","\n"],"docstring_tokens":["SQL","REGEXP_REPLACE","function","with","3","arguments"]}
{"code_tokens":["\n","public","static","String","regexpReplace","(","String","s,","String","regex,","String","replacement,\n","int","pos",")","{","\n","return","regexpReplace","(","s,","regex,","replacement,","pos,","0,","null",")",";","\n"],"docstring_tokens":["SQL","REGEXP_REPLACE","function","with","4","arguments"]}
{"code_tokens":["\n","public","static","String","regexpReplace","(","String","s,","String","regex,","String","replacement,\n","int","pos,","int","occurrence",")","{","\n","return","regexpReplace","(","s,","regex,","replacement,","pos,","occurrence,","null",")",";","\n"],"docstring_tokens":["SQL","REGEXP_REPLACE","function","with","5","arguments"]}
{"code_tokens":["\n","public","static","String","regexpReplace","(","String","s,","String","regex,","String","replacement,\n","int","pos,","int","occurrence,","@Nullable","String","matchType",")","{","\n","if","(","pos","<","1","||","pos",">","s",".","length","(",")",")","{","\n","throw","RESOURCE",".","invalidInputForRegexpReplace","(","Integer",".","toString","(","pos",")",")",".","ex","(",")",";","\n","}","\n\n","final","int","flags","=","makeRegexpFlags","(","matchType",")",";","\n","final","Pattern","pattern","=","Pattern",".","compile","(","regex,","flags",")",";","\n\n","return","Unsafe",".","regexpReplace","(","s,","pattern,","replacement,","pos,","occurrence",")",";","\n"],"docstring_tokens":["SQL","REGEXP_REPLACE","function","with","6","arguments"]}
{"code_tokens":["\n","public","static","String","concat","(","String","s0,","String","s1",")","{","\n","return","s0","+","s1",";","\n"],"docstring_tokens":["SQL","string","||","string","operator"]}
{"code_tokens":["\n","public","static","ByteString","concat","(","ByteString","s0,","ByteString","s1",")","{","\n","return","s0",".","concat","(","s1",")",";","\n"],"docstring_tokens":["SQL","binary","||","binary","operator"]}
{"code_tokens":["\n","public","static","String","rtrim","(","String","s",")","{","\n","return","trim","(","false,","true,","\"","\",","s",")",";","\n"],"docstring_tokens":["SQL","RTRIM","function","applied","to","string"]}
{"code_tokens":["\n","public","static","ByteString","trim","(","ByteString","s",")","{","\n","return","trim_","(","s,","true,","true",")",";","\n"],"docstring_tokens":["SQL","TRIM","function","applied","to","binary","string"]}
{"code_tokens":["\n","public","static","ByteString","overlay","(","ByteString","s,","ByteString","r,","int","start",")","{","\n","return","s",".","substring","(","0,","start","-","1",")","\n",".","concat","(","r",")","\n",".","concat","(","s",".","substring","(","start","-","1","+","r",".","length","(",")",")",")",";","\n"],"docstring_tokens":["SQL","OVERLAY","function","applied","to","binary","strings"]}
{"code_tokens":["\n","public","static","boolean","like","(","String","s,","String","pattern,","String","escape",")","{","\n","final","String","regex","=","Like",".","sqlToRegexLike","(","pattern,","escape",")",";","\n","return","Pattern",".","matches","(","regex,","s",")",";","\n"],"docstring_tokens":["SQL","LIKE","function","with","escape"]}
{"code_tokens":["\n","public","static","boolean","ilike","(","String","s,","String","pattern,","String","escape",")","{","\n","final","String","regex","=","Like",".","sqlToRegexLike","(","pattern,","escape",")",";","\n","return","Pattern",".","compile","(","regex,","Pattern",".","CASE_INSENSITIVE",")",".","matcher","(","s",")",".","matches","(",")",";","\n"],"docstring_tokens":["SQL","ILIKE","function","with","escape"]}
{"code_tokens":["\n","public","static","boolean","similar","(","String","s,","String","pattern,","String","escape",")","{","\n","final","String","regex","=","Like",".","sqlToRegexSimilar","(","pattern,","escape",")",";","\n","return","Pattern",".","matches","(","regex,","s",")",";","\n"],"docstring_tokens":["SQL","SIMILAR","function","with","escape"]}
{"code_tokens":["\n","public","static","boolean","eq","(","String","s0,","String","s1,","Comparator<String>","comparator",")","{","\n","return","comparator",".","compare","(","s0,","s1",")","==","0",";","\n"],"docstring_tokens":["SQL","=","operator","applied","to","String","values","with","a","certain","Comparator"]}
{"code_tokens":["\n","public","static","int","plus","(","int","b0,","int","b1",")","{","\n","return","b0","+","b1",";","\n"],"docstring_tokens":["SQL","+","operator","applied","to","int","values"]}
{"code_tokens":["\n","public","static","@PolyNull","Integer","plus","(","@PolyNull","Integer","b0,","@PolyNull","Integer","b1",")","{","\n","return","(","b0","==","null","||","b1","==","null",")","?","castNonNull","(","null",")",":","(","b0","+","b1",")",";","\n"],"docstring_tokens":["SQL","+","operator","applied","to","nullable","int","values"]}
{"code_tokens":["\n","public","static","@PolyNull","Long","plus","(","@PolyNull","Long","b0,","@PolyNull","Integer","b1",")","{","\n","return","(","b0","==","null","||","b1","==","null",")","\n","?","castNonNull","(","null",")","\n",":","(","b0",".","longValue","(",")","+","b1",".","longValue","(",")",")",";","\n"],"docstring_tokens":["SQL","+","operator","applied","to","nullable","long","and","int","values"]}
{"code_tokens":["\n","public","static","@PolyNull","Long","plus","(","@PolyNull","Integer","b0,","@PolyNull","Long","b1",")","{","\n","return","(","b0","==","null","||","b1","==","null",")","\n","?","castNonNull","(","null",")","\n",":","(","b0",".","longValue","(",")","+","b1",".","longValue","(",")",")",";","\n"],"docstring_tokens":["SQL","+","operator","applied","to","nullable","int","and","long","values"]}
{"code_tokens":["\n","public","static","@PolyNull","BigDecimal","plus","(","@PolyNull","BigDecimal","b0,\n","@PolyNull","BigDecimal","b1",")","{","\n","return","(","b0","==","null","||","b1","==","null",")","?","castNonNull","(","null",")",":","b0",".","add","(","b1",")",";","\n"],"docstring_tokens":["SQL","+","operator","applied","to","BigDecimal","values"]}
{"code_tokens":["\n","public","static","int","minus","(","int","b0,","int","b1",")","{","\n","return","b0","-","b1",";","\n"],"docstring_tokens":["SQL","-","operator","applied","to","int","values"]}
{"code_tokens":["\n","public","static","@PolyNull","Integer","minus","(","@PolyNull","Integer","b0,","int","b1",")","{","\n","return","b0","==","null","?","castNonNull","(","null",")",":","(","b0","-","b1",")",";","\n"],"docstring_tokens":["SQL","-","operator","applied","to","int","values;","left","side","may","be","null"]}
{"code_tokens":["\n","public","static","@PolyNull","Integer","minus","(","int","b0,","@PolyNull","Integer","b1",")","{","\n","return","b1","==","null","?","castNonNull","(","null",")",":","(","b0","-","b1",")",";","\n"],"docstring_tokens":["SQL","-","operator","applied","to","int","values;","right","side","may","be","null"]}
{"code_tokens":["\n","public","static","@PolyNull","Integer","minus","(","@PolyNull","Integer","b0,","@PolyNull","Integer","b1",")","{","\n","return","(","b0","==","null","||","b1","==","null",")","?","castNonNull","(","null",")",":","(","b0","-","b1",")",";","\n"],"docstring_tokens":["SQL","-","operator","applied","to","nullable","int","values"]}
{"code_tokens":["\n","public","static","@PolyNull","Long","minus","(","@PolyNull","Long","b0,","@PolyNull","Integer","b1",")","{","\n","return","(","b0","==","null","||","b1","==","null",")","\n","?","castNonNull","(","null",")","\n",":","(","b0",".","longValue","(",")","-","b1",".","longValue","(",")",")",";","\n"],"docstring_tokens":["SQL","-","operator","applied","to","nullable","long","and","int","values"]}
{"code_tokens":["\n","public","static","@PolyNull","Long","minus","(","@PolyNull","Integer","b0,","@PolyNull","Long","b1",")","{","\n","return","(","b0","==","null","||","b1","==","null",")","\n","?","castNonNull","(","null",")","\n",":","(","b0",".","longValue","(",")","-","b1",".","longValue","(",")",")",";","\n"],"docstring_tokens":["SQL","-","operator","applied","to","nullable","int","and","long","values"]}
{"code_tokens":["\n","public","static","@PolyNull","BigDecimal","minus","(","@PolyNull","BigDecimal","b0,\n","@PolyNull","BigDecimal","b1",")","{","\n","return","(","b0","==","null","||","b1","==","null",")","?","castNonNull","(","null",")",":","b0",".","subtract","(","b1",")",";","\n"],"docstring_tokens":["SQL","-","operator","applied","to","nullable","BigDecimal","values"]}
{"code_tokens":["\n","public","static","int","multiply","(","int","b0,","int","b1",")","{","\n","return","b0","*","b1",";","\n"],"docstring_tokens":["SQL","operator","applied","to","int","values"]}
{"code_tokens":["\n","public","static","@PolyNull","Integer","multiply","(","@PolyNull","Integer","b0,","int","b1",")","{","\n","return","b0","==","null","?","castNonNull","(","null",")",":","(","b0","*","b1",")",";","\n"],"docstring_tokens":["SQL","operator","applied","to","int","values;","left","side","may","be","null"]}
{"code_tokens":["\n","public","static","@PolyNull","Integer","multiply","(","int","b0,","@PolyNull","Integer","b1",")","{","\n","return","b1","==","null","?","castNonNull","(","null",")",":","(","b0","*","b1",")",";","\n"],"docstring_tokens":["SQL","operator","applied","to","int","values;","right","side","may","be","null"]}
{"code_tokens":["\n","public","static","@PolyNull","Integer","multiply","(","@PolyNull","Integer","b0,\n","@PolyNull","Integer","b1",")","{","\n","return","(","b0","==","null","||","b1","==","null",")","?","castNonNull","(","null",")",":","(","b0","*","b1",")",";","\n"],"docstring_tokens":["SQL","operator","applied","to","nullable","int","values"]}
{"code_tokens":["\n","public","static","@PolyNull","Long","multiply","(","@PolyNull","Long","b0,","@PolyNull","Integer","b1",")","{","\n","return","(","b0","==","null","||","b1","==","null",")","\n","?","castNonNull","(","null",")","\n",":","(","b0",".","longValue","(",")","*","b1",".","longValue","(",")",")",";","\n"],"docstring_tokens":["SQL","operator","applied","to","nullable","long","and","int","values"]}
{"code_tokens":["\n","public","static","@PolyNull","Long","multiply","(","@PolyNull","Integer","b0,","@PolyNull","Long","b1",")","{","\n","return","(","b0","==","null","||","b1","==","null",")","\n","?","castNonNull","(","null",")","\n",":","(","b0",".","longValue","(",")","*","b1",".","longValue","(",")",")",";","\n"],"docstring_tokens":["SQL","operator","applied","to","nullable","int","and","long","values"]}
{"code_tokens":["\n","public","static","@PolyNull","BigDecimal","multiply","(","@PolyNull","BigDecimal","b0,\n","@PolyNull","BigDecimal","b1",")","{","\n","return","(","b0","==","null","||","b1","==","null",")","?","castNonNull","(","null",")",":","b0",".","multiply","(","b1",")",";","\n"],"docstring_tokens":["SQL","operator","applied","to","nullable","BigDecimal","values"]}
{"code_tokens":["\n","public","static","ByteString","bitAnd","(","ByteString","b0,","ByteString","b1",")","{","\n","return","binaryOperator","(","b0,","b1,","(","x,","y",")","->","(","byte",")","(","x","&","y",")",")",";","\n"],"docstring_tokens":["Bitwise","function","BIT_AND","applied","to","binary","values"]}
{"code_tokens":["\n","public","static","ByteString","bitOr","(","ByteString","b0,","ByteString","b1",")","{","\n","return","binaryOperator","(","b0,","b1,","(","x,","y",")","->","(","byte",")","(","x","|","y",")",")",";","\n"],"docstring_tokens":["Bitwise","function","BIT_OR","applied","to","binary","values"]}
{"code_tokens":["\n","public","static","ByteString","bitXor","(","ByteString","b0,","ByteString","b1",")","{","\n","return","binaryOperator","(","b0,","b1,","(","x,","y",")","->","(","byte",")","(","x","^","y",")",")",";","\n"],"docstring_tokens":["Bitwise","function","BIT_XOR","applied","to","binary","values"]}
{"code_tokens":["\n","private","static","ByteString","binaryOperator","(","\n","ByteString","b0,","ByteString","b1,","BinaryOperator<Byte>","bitOp",")","{","\n","if","(","b0",".","length","(",")","==","0",")","{","\n","return","b1",";","\n","}","\n","if","(","b1",".","length","(",")","==","0",")","{","\n","return","b0",";","\n","}","\n\n","if","(","b0",".","length","(",")","!=","b1",".","length","(",")",")","{","\n","throw","RESOURCE",".","differentLengthForBitwiseOperands","(","\n","b0",".","length","(",")",",","b1",".","length","(",")",")",".","ex","(",")",";","\n","}","\n\n","final","byte[]","result","=","new","byte[b0",".","length","(",")","]",";","\n","for","(","int","i","=","0",";","i","<","b0",".","length","(",")",";","i++",")","{","\n","result[i]","=","bitOp",".","apply","(","b0",".","byteAt","(","i",")",",","b1",".","byteAt","(","i",")",")",";","\n","}","\n\n","return","new","ByteString","(","result",")",";","\n"],"docstring_tokens":["Utility","for","bitwise","function","applied","to","two","byteString","values"]}
{"code_tokens":["\n","public","static","double","exp","(","double","b0",")","{","\n","return","Math",".","exp","(","b0",")",";","\n"],"docstring_tokens":["SQL","EXP","operator","applied","to","double","values"]}
{"code_tokens":["\n","public","static","double","power","(","double","b0,","double","b1",")","{","\n","return","Math",".","pow","(","b0,","b1",")",";","\n"],"docstring_tokens":["SQL","POWER","operator","applied","to","double","values"]}
{"code_tokens":["\n","public","static","byte","mod","(","byte","b0,","byte","b1",")","{","\n","return","(","byte",")","(","b0","%","b1",")",";","\n"],"docstring_tokens":["SQL","MOD","operator","applied","to","byte","values"]}
{"code_tokens":["\n","public","static","short","mod","(","short","b0,","short","b1",")","{","\n","return","(","short",")","(","b0","%","b1",")",";","\n"],"docstring_tokens":["SQL","MOD","operator","applied","to","short","values"]}
{"code_tokens":["\n","public","static","int","mod","(","int","b0,","int","b1",")","{","\n","return","b0","%","b1",";","\n"],"docstring_tokens":["SQL","MOD","operator","applied","to","int","values"]}
{"code_tokens":["\n","public","static","long","mod","(","long","b0,","long","b1",")","{","\n","return","b0","%","b1",";","\n"],"docstring_tokens":["SQL","MOD","operator","applied","to","long","values"]}
{"code_tokens":["\n","public","static","byte","floor","(","byte","b0,","byte","b1",")","{","\n","return","(","byte",")","floor","(","(","int",")","b0,","(","int",")","b1",")",";","\n"],"docstring_tokens":["SQL","FLOOR","operator","applied","to","byte","values"]}
{"code_tokens":["\n","public","static","short","floor","(","short","b0,","short","b1",")","{","\n","return","(","short",")","floor","(","(","int",")","b0,","(","int",")","b1",")",";","\n"],"docstring_tokens":["SQL","FLOOR","operator","applied","to","short","values"]}
{"code_tokens":["\n","public","static","int","floor","(","int","b0,","int","b1",")","{","\n","int","r","=","b0","%","b1",";","\n","if","(","r","<","0",")","{","\n","r","+=","b1",";","\n","}","\n","return","b0","-","r",";","\n"],"docstring_tokens":["SQL","FLOOR","operator","applied","to","int","values"]}
{"code_tokens":["\n","public","static","long","floor","(","long","b0,","long","b1",")","{","\n","long","r","=","b0","%","b1",";","\n","if","(","r","<","0",")","{","\n","r","+=","b1",";","\n","}","\n","return","b0","-","r",";","\n"],"docstring_tokens":["SQL","FLOOR","operator","applied","to","long","values"]}
{"code_tokens":["\n","public","static","byte","ceil","(","byte","b0,","byte","b1",")","{","\n","return","floor","(","(","byte",")","(","b0","+","b1","-","1",")",",","b1",")",";","\n"],"docstring_tokens":["SQL","CEIL","operator","applied","to","byte","values"]}
{"code_tokens":["\n","public","static","short","ceil","(","short","b0,","short","b1",")","{","\n","return","floor","(","(","short",")","(","b0","+","b1","-","1",")",",","b1",")",";","\n"],"docstring_tokens":["SQL","CEIL","operator","applied","to","short","values"]}
{"code_tokens":["\n","public","static","int","ceil","(","int","b0,","int","b1",")","{","\n","int","r","=","b0","%","b1",";","\n","if","(","r",">","0",")","{","\n","r","-=","b1",";","\n","}","\n","return","b0","-","r",";","\n"],"docstring_tokens":["SQL","CEIL","operator","applied","to","int","values"]}
{"code_tokens":["\n","public","static","long","ceil","(","long","b0,","long","b1",")","{","\n","return","floor","(","b0","+","b1","-","1,","b1",")",";","\n"],"docstring_tokens":["SQL","CEIL","operator","applied","to","long","values"]}
{"code_tokens":["\n","public","static","byte","abs","(","byte","b0",")","{","\n","return","(","byte",")","Math",".","abs","(","b0",")",";","\n"],"docstring_tokens":["SQL","ABS","operator","applied","to","byte","values"]}
{"code_tokens":["\n","public","static","short","abs","(","short","b0",")","{","\n","return","(","short",")","Math",".","abs","(","b0",")",";","\n"],"docstring_tokens":["SQL","ABS","operator","applied","to","short","values"]}
{"code_tokens":["\n","public","static","int","abs","(","int","b0",")","{","\n","return","Math",".","abs","(","b0",")",";","\n"],"docstring_tokens":["SQL","ABS","operator","applied","to","int","values"]}
{"code_tokens":["\n","public","static","long","abs","(","long","b0",")","{","\n","return","Math",".","abs","(","b0",")",";","\n"],"docstring_tokens":["SQL","ABS","operator","applied","to","long","values"]}
{"code_tokens":["\n","public","static","float","abs","(","float","b0",")","{","\n","return","Math",".","abs","(","b0",")",";","\n"],"docstring_tokens":["SQL","ABS","operator","applied","to","float","values"]}
{"code_tokens":["\n","public","static","double","abs","(","double","b0",")","{","\n","return","Math",".","abs","(","b0",")",";","\n"],"docstring_tokens":["SQL","ABS","operator","applied","to","double","values"]}
{"code_tokens":["\n","public","static","BigDecimal","abs","(","BigDecimal","b0",")","{","\n","return","b0",".","abs","(",")",";","\n"],"docstring_tokens":["SQL","ABS","operator","applied","to","BigDecimal","values"]}
{"code_tokens":["\n","public","static","double","acos","(","BigDecimal","b0",")","{","\n","return","Math",".","acos","(","b0",".","doubleValue","(",")",")",";","\n"],"docstring_tokens":["SQL","ACOS","operator","applied","to","BigDecimal","values"]}
{"code_tokens":["\n","public","static","double","acos","(","double","b0",")","{","\n","return","Math",".","acos","(","b0",")",";","\n"],"docstring_tokens":["SQL","ACOS","operator","applied","to","double","values"]}
{"code_tokens":["\n","public","static","double","asin","(","BigDecimal","b0",")","{","\n","return","Math",".","asin","(","b0",".","doubleValue","(",")",")",";","\n"],"docstring_tokens":["SQL","ASIN","operator","applied","to","BigDecimal","values"]}
{"code_tokens":["\n","public","static","double","asin","(","double","b0",")","{","\n","return","Math",".","asin","(","b0",")",";","\n"],"docstring_tokens":["SQL","ASIN","operator","applied","to","double","values"]}
{"code_tokens":["\n","public","static","double","atan","(","BigDecimal","b0",")","{","\n","return","Math",".","atan","(","b0",".","doubleValue","(",")",")",";","\n"],"docstring_tokens":["SQL","ATAN","operator","applied","to","BigDecimal","values"]}
{"code_tokens":["\n","public","static","double","atan","(","double","b0",")","{","\n","return","Math",".","atan","(","b0",")",";","\n"],"docstring_tokens":["SQL","ATAN","operator","applied","to","double","values"]}
{"code_tokens":["\n","public","static","double","atan2","(","BigDecimal","b0,","BigDecimal","b1",")","{","\n","return","Math",".","atan2","(","b0",".","doubleValue","(",")",",","b1",".","doubleValue","(",")",")",";","\n"],"docstring_tokens":["SQL","ATAN2","operator","applied","to","BigDecimal","values"]}
{"code_tokens":["\n","public","static","double","atan2","(","double","b0,","double","b1",")","{","\n","return","Math",".","atan2","(","b0,","b1",")",";","\n"],"docstring_tokens":["SQL","ATAN2","operator","applied","to","double","values"]}
{"code_tokens":["\n","public","static","double","cbrt","(","BigDecimal","b",")","{","\n","return","cbrt","(","b",".","doubleValue","(",")",")",";","\n"],"docstring_tokens":["SQL","CBRT","operator","applied","to","BigDecimal","values"]}
{"code_tokens":["\n","public","static","double","cbrt","(","double","b",")","{","\n","return","Math",".","cbrt","(","b",")",";","\n"],"docstring_tokens":["SQL","CBRT","operator","applied","to","double","values"]}
{"code_tokens":["\n","public","static","double","cos","(","BigDecimal","b0",")","{","\n","return","Math",".","cos","(","b0",".","doubleValue","(",")",")",";","\n"],"docstring_tokens":["SQL","COS","operator","applied","to","BigDecimal","values"]}
{"code_tokens":["\n","public","static","double","cos","(","double","b0",")","{","\n","return","Math",".","cos","(","b0",")",";","\n"],"docstring_tokens":["SQL","COS","operator","applied","to","double","values"]}
{"code_tokens":["\n","public","static","double","cosh","(","BigDecimal","b",")","{","\n","return","cosh","(","b",".","doubleValue","(",")",")",";","\n"],"docstring_tokens":["SQL","COSH","operator","applied","to","BigDecimal","values"]}
{"code_tokens":["\n","public","static","double","cosh","(","double","b",")","{","\n","return","Math",".","cosh","(","b",")",";","\n"],"docstring_tokens":["SQL","COSH","operator","applied","to","double","values"]}
{"code_tokens":["\n","public","static","double","cot","(","BigDecimal","b0",")","{","\n","return","1",".","0d","/","Math",".","tan","(","b0",".","doubleValue","(",")",")",";","\n"],"docstring_tokens":["SQL","COT","operator","applied","to","BigDecimal","values"]}
{"code_tokens":["\n","public","static","double","cot","(","double","b0",")","{","\n","return","1",".","0d","/","Math",".","tan","(","b0",")",";","\n"],"docstring_tokens":["SQL","COT","operator","applied","to","double","values"]}
{"code_tokens":["\n","public","static","double","degrees","(","BigDecimal","b0",")","{","\n","return","Math",".","toDegrees","(","b0",".","doubleValue","(",")",")",";","\n"],"docstring_tokens":["SQL","DEGREES","operator","applied","to","BigDecimal","values"]}
{"code_tokens":["\n","public","static","double","degrees","(","double","b0",")","{","\n","return","Math",".","toDegrees","(","b0",")",";","\n"],"docstring_tokens":["SQL","DEGREES","operator","applied","to","double","values"]}
{"code_tokens":["\n","public","static","double","radians","(","BigDecimal","b0",")","{","\n","return","Math",".","toRadians","(","b0",".","doubleValue","(",")",")",";","\n"],"docstring_tokens":["SQL","RADIANS","operator","applied","to","BigDecimal","values"]}
{"code_tokens":["\n","public","static","double","radians","(","double","b0",")","{","\n","return","Math",".","toRadians","(","b0",")",";","\n"],"docstring_tokens":["SQL","RADIANS","operator","applied","to","double","values"]}
{"code_tokens":["\n","public","static","int","sround","(","int","b0",")","{","\n","return","sround","(","b0,","0",")",";","\n"],"docstring_tokens":["SQL","ROUND","operator","applied","to","int","values"]}
{"code_tokens":["\n","public","static","long","sround","(","long","b0",")","{","\n","return","sround","(","b0,","0",")",";","\n"],"docstring_tokens":["SQL","ROUND","operator","applied","to","long","values"]}
{"code_tokens":["\n","public","static","BigDecimal","sround","(","BigDecimal","b0",")","{","\n","return","sround","(","b0,","0",")",";","\n"],"docstring_tokens":["SQL","ROUND","operator","applied","to","BigDecimal","values"]}
{"code_tokens":["\n","public","static","double","sround","(","double","b0",")","{","\n","return","sround","(","b0,","0",")",";","\n"],"docstring_tokens":["SQL","ROUND","operator","applied","to","double","values"]}
{"code_tokens":["\n","public","static","int","struncate","(","int","b0",")","{","\n","return","struncate","(","b0,","0",")",";","\n"],"docstring_tokens":["SQL","TRUNCATE","operator","applied","to","int","values"]}
{"code_tokens":["\n","public","static","long","struncate","(","long","b0",")","{","\n","return","struncate","(","b0,","0",")",";","\n"],"docstring_tokens":["SQL","TRUNCATE","operator","applied","to","long","values"]}
{"code_tokens":["\n","public","static","BigDecimal","struncate","(","BigDecimal","b0",")","{","\n","return","struncate","(","b0,","0",")",";","\n"],"docstring_tokens":["SQL","TRUNCATE","operator","applied","to","BigDecimal","values"]}
{"code_tokens":["\n","public","static","double","struncate","(","double","b0",")","{","\n","return","struncate","(","b0,","0",")",";","\n"],"docstring_tokens":["SQL","TRUNCATE","operator","applied","to","double","values"]}
{"code_tokens":["\n","public","static","int","sign","(","int","b0",")","{","\n","return","Integer",".","signum","(","b0",")",";","\n"],"docstring_tokens":["SQL","SIGN","operator","applied","to","int","values"]}
{"code_tokens":["\n","public","static","long","sign","(","long","b0",")","{","\n","return","Long",".","signum","(","b0",")",";","\n"],"docstring_tokens":["SQL","SIGN","operator","applied","to","long","values"]}
{"code_tokens":["\n","public","static","BigDecimal","sign","(","BigDecimal","b0",")","{","\n","return","BigDecimal",".","valueOf","(","b0",".","signum","(",")",")",";","\n"],"docstring_tokens":["SQL","SIGN","operator","applied","to","BigDecimal","values"]}
{"code_tokens":["\n","public","static","double","sign","(","double","b0",")","{","\n","return","Math",".","signum","(","b0",")",";","\n"],"docstring_tokens":["SQL","SIGN","operator","applied","to","double","values"]}
{"code_tokens":["\n","public","static","double","sin","(","BigDecimal","b0",")","{","\n","return","Math",".","sin","(","b0",".","doubleValue","(",")",")",";","\n"],"docstring_tokens":["SQL","SIN","operator","applied","to","BigDecimal","values"]}
{"code_tokens":["\n","public","static","double","sin","(","double","b0",")","{","\n","return","Math",".","sin","(","b0",")",";","\n"],"docstring_tokens":["SQL","SIN","operator","applied","to","double","values"]}
{"code_tokens":["\n","public","static","double","sinh","(","BigDecimal","b",")","{","\n","return","sinh","(","b",".","doubleValue","(",")",")",";","\n"],"docstring_tokens":["SQL","SINH","operator","applied","to","BigDecimal","values"]}
{"code_tokens":["\n","public","static","double","sinh","(","double","b",")","{","\n","return","Math",".","sinh","(","b",")",";","\n"],"docstring_tokens":["SQL","SINH","operator","applied","to","double","values"]}
{"code_tokens":["\n","public","static","double","tan","(","BigDecimal","b0",")","{","\n","return","Math",".","tan","(","b0",".","doubleValue","(",")",")",";","\n"],"docstring_tokens":["SQL","TAN","operator","applied","to","BigDecimal","values"]}
{"code_tokens":["\n","public","static","double","tan","(","double","b0",")","{","\n","return","Math",".","tan","(","b0",")",";","\n"],"docstring_tokens":["SQL","TAN","operator","applied","to","double","values"]}
{"code_tokens":["\n","public","static","double","tanh","(","BigDecimal","b",")","{","\n","return","tanh","(","b",".","doubleValue","(",")",")",";","\n"],"docstring_tokens":["SQL","TANH","operator","applied","to","BigDecimal","values"]}
{"code_tokens":["\n","public","static","double","tanh","(","double","b",")","{","\n","return","Math",".","tanh","(","b",")",";","\n"],"docstring_tokens":["SQL","TANH","operator","applied","to","double","values"]}
{"code_tokens":["\n","public","static","String","dayNameWithTimestamp","(","long","timestamp,","Locale","locale",")","{","\n","return","timeStampToLocalDate","(","timestamp",")","\n",".","format","(","ROOT_DAY_FORMAT",".","withLocale","(","locale",")",")",";","\n"],"docstring_tokens":["SQL","DAYNAME","function,","applied","to","a","TIMESTAMP","argument"]}
{"code_tokens":["\n","public","static","String","dayNameWithDate","(","int","date,","Locale","locale",")","{","\n","return","dateToLocalDate","(","date",")","\n",".","format","(","ROOT_DAY_FORMAT",".","withLocale","(","locale",")",")",";","\n"],"docstring_tokens":["SQL","DAYNAME","function,","applied","to","a","DATE","argument"]}
{"code_tokens":["\n","public","static","String","monthNameWithTimestamp","(","long","timestamp,","Locale","locale",")","{","\n","return","timeStampToLocalDate","(","timestamp",")","\n",".","format","(","ROOT_MONTH_FORMAT",".","withLocale","(","locale",")",")",";","\n"],"docstring_tokens":["SQL","MONTHNAME","function,","applied","to","a","TIMESTAMP","argument"]}
{"code_tokens":["\n","public","static","String","monthNameWithDate","(","int","date,","Locale","locale",")","{","\n","return","dateToLocalDate","(","date",")","\n",".","format","(","ROOT_MONTH_FORMAT",".","withLocale","(","locale",")",")",";","\n"],"docstring_tokens":["SQL","MONTHNAME","function,","applied","to","a","DATE","argument"]}
{"code_tokens":["\n","public","static","int","addMonths","(","int","date,","int","m",")","{","\n","int","y0","=","(","int",")","DateTimeUtils",".","unixDateExtract","(","TimeUnitRange",".","YEAR,","date",")",";","\n","int","m0","=","(","int",")","DateTimeUtils",".","unixDateExtract","(","TimeUnitRange",".","MONTH,","date",")",";","\n","int","d0","=","(","int",")","DateTimeUtils",".","unixDateExtract","(","TimeUnitRange",".","DAY,","date",")",";","\n","m0","+=","m",";","\n","int","deltaYear","=","(","int",")","DateTimeUtils",".","floorDiv","(","m0,","12",")",";","\n","y0","+=","deltaYear",";","\n","m0","=","(","int",")","DateTimeUtils",".","floorMod","(","m0,","12",")",";","\n","if","(","m0","==","0",")","{","\n","y0","-=","1",";","\n","m0","+=","12",";","\n","}","\n\n","int","last","=","lastDay","(","y0,","m0",")",";","\n","if","(","d0",">","last",")","{","\n","d0","=","last",";","\n","}","\n","return","DateTimeUtils",".","ymdToUnixDate","(","y0,","m0,","d0",")",";","\n"],"docstring_tokens":["Adds","a","given","number","of","months","to","a","date,","represented","as","the","number","of","days","since","the","epoch"]}
{"code_tokens":["\n","public","static","boolean","isEmpty","(","@Nullable","RelOptPredicateList","value",")","{","\n","if","(","value","==","null","||","value","==","EMPTY",")","{","\n","return","true",";","\n","}","\n","return","value",".","constantMap",".","isEmpty","(",")","\n","&&","value",".","leftInferredPredicates",".","isEmpty","(",")","\n","&&","value",".","rightInferredPredicates",".","isEmpty","(",")","\n","&&","value",".","pulledUpPredicates",".","isEmpty","(",")",";","\n"],"docstring_tokens":["Returns","true","if","given","predicate","list","is","empty"]}
{"code_tokens":["\n","public","static","RelOptPredicateList","of","(","RexBuilder","rexBuilder,\n","Iterable<RexNode>","pulledUpPredicates,\n","Iterable<RexNode>","leftInferredPredicates,\n","Iterable<RexNode>","rightInferredPredicates",")","{","\n","final","ImmutableList<RexNode>","pulledUpPredicatesList","=\n","ImmutableList",".","copyOf","(","pulledUpPredicates",")",";","\n","final","ImmutableList<RexNode>","leftInferredPredicateList","=\n","ImmutableList",".","copyOf","(","leftInferredPredicates",")",";","\n","final","ImmutableList<RexNode>","rightInferredPredicatesList","=\n","ImmutableList",".","copyOf","(","rightInferredPredicates",")",";","\n","if","(","pulledUpPredicatesList",".","isEmpty","(",")","\n","&&","leftInferredPredicateList",".","isEmpty","(",")","\n","&&","rightInferredPredicatesList",".","isEmpty","(",")",")","{","\n","return","EMPTY",";","\n","}","\n","final","ImmutableMap<RexNode,","RexNode>","constantMap","=\n","RexUtil",".","predicateConstants","(","RexNode",".","class,","rexBuilder,\n","pulledUpPredicatesList",")",";","\n","return","new","RelOptPredicateList","(","pulledUpPredicatesList,\n","leftInferredPredicateList,","rightInferredPredicatesList,","constantMap",")",";","\n"],"docstring_tokens":["Creates","a","RelOptPredicateList","for","a","join"]}
{"code_tokens":["\n","private","static","<E>","ImmutableList<E>","concat","(","ImmutableList<E>","list1,\n","ImmutableList<E>","list2",")","{","\n","if","(","list1",".","isEmpty","(",")",")","{","\n","return","list2",";","\n","}","else","if","(","list2",".","isEmpty","(",")",")","{","\n","return","list1",";","\n","}","else","{","\n","return","ImmutableList",".","<E>builder","(",")",".","addAll","(","list1",")",".","addAll","(","list2",")",".","build","(",")",";","\n","}","\n"],"docstring_tokens":["Concatenates","two","immutable","lists,","avoiding","a","copy","it","possible"]}
{"code_tokens":["\n","public","boolean","isEffectivelyNotNull","(","RexNode","e",")","{","\n","if","(","!e",".","getType","(",")",".","isNullable","(",")",")","{","\n","return","true",";","\n","}","\n","for","(","RexNode","p",":","pulledUpPredicates",")","{","\n","if","(","p",".","getKind","(",")","==","SqlKind",".","IS_NOT_NULL\n","&&","(","(","RexCall",")","p",")",".","getOperands","(",")",".","get","(","0",")",".","equals","(","e",")",")","{","\n","return","true",";","\n","}","\n","}","\n","if","(","SqlKind",".","COMPARISON",".","contains","(","e",".","getKind","(",")",")",")","{","\n","//","A","comparison","with","a","(","non-null",")","literal,","such","as","'ref","<","10',","is","not","null","if","'ref'\n","//","is","not","null",".","\n","RexCall","call","=","(","RexCall",")","e",";","\n","if","(","call",".","getOperands","(",")",".","get","(","1",")","instanceof","RexLiteral\n","&&","!","(","(","RexLiteral",")","call",".","getOperands","(",")",".","get","(","1",")",")",".","isNull","(",")",")","{","\n","return","isEffectivelyNotNull","(","call",".","getOperands","(",")",".","get","(","0",")",")",";","\n","}","\n","}","\n","return","false",";","\n"],"docstring_tokens":["Returns","whether","an","expression","is","effectively","NOT","NULL","due","to","an","e","IS","NOT","NULL","condition","in","this","predicate","list"]}
{"code_tokens":["\n","protected","TrimResult","trimChild","(","\n","RelNode","rel,\n","RelNode","input,\n","final","ImmutableBitSet","fieldsUsed,\n","Set<RelDataTypeField>","extraFields",")","{","\n","final","ImmutableBitSet",".","Builder","fieldsUsedBuilder","=","fieldsUsed",".","rebuild","(",")",";","\n\n","//","Fields","that","define","the","collation","cannot","be","discarded",".","\n","final","RelMetadataQuery","mq","=","rel",".","getCluster","(",")",".","getMetadataQuery","(",")",";","\n","final","ImmutableList<RelCollation>","collations","=","mq",".","collations","(","input",")",";","\n","if","(","collations","!=","null",")","{","\n","for","(","RelCollation","collation",":","collations",")","{","\n","for","(","RelFieldCollation","fieldCollation",":","collation",".","getFieldCollations","(",")",")","{","\n","fieldsUsedBuilder",".","set","(","fieldCollation",".","getFieldIndex","(",")",")",";","\n","}","\n","}","\n","}","\n\n","//","Correlating","variables","are","a","means","for","other","relational","expressions","to","use\n","//","fields",".","\n","for","(","final","CorrelationId","correlation",":","rel",".","getVariablesSet","(",")",")","{","\n","rel",".","accept","(","\n","new","CorrelationReferenceFinder","(",")","{","\n","@Override","protected","RexNode","handle","(","RexFieldAccess","fieldAccess",")","{","\n","final","RexCorrelVariable","v","=\n","(","RexCorrelVariable",")","fieldAccess",".","getReferenceExpr","(",")",";","\n","if","(","v",".","id",".","equals","(","correlation",")",")","{","\n","fieldsUsedBuilder",".","set","(","fieldAccess",".","getField","(",")",".","getIndex","(",")",")",";","\n","}","\n","return","fieldAccess",";","\n","}","\n","}",")",";","\n","}","\n\n","return","dispatchTrimFields","(","input,","fieldsUsedBuilder",".","build","(",")",",","extraFields",")",";","\n"],"docstring_tokens":["Trims","the","fields","of","an","input","relational","expression"]}
{"code_tokens":["\n","protected","TrimResult","dummyProject","(","int","fieldCount,","RelNode","input,\n","@Nullable","RelNode","originalRelNode",")","{","\n","final","RelOptCluster","cluster","=","input",".","getCluster","(",")",";","\n","final","Mapping","mapping","=\n","Mappings",".","create","(","MappingType",".","INVERSE_SURJECTION,","fieldCount,","1",")",";","\n","if","(","input",".","getRowType","(",")",".","getFieldCount","(",")","==","1",")","{","\n","//","Input","already","has","one","field","(","and","may","in","fact","be","a","dummy","project","we\n","//","created","for","the","child",")",".","We","can't","do","better",".","\n","return","result","(","input,","mapping",")",";","\n","}","\n","final","RexLiteral","expr","=\n","cluster",".","getRexBuilder","(",")",".","makeExactLiteral","(","BigDecimal",".","ZERO",")",";","\n","relBuilder",".","push","(","input",")",";","\n","relBuilder",".","project","(","ImmutableList",".","of","(","expr",")",",","ImmutableList",".","of","(","\"DUMMY\"",")",")",";","\n","RelNode","newProject","=","relBuilder",".","build","(",")",";","\n","if","(","originalRelNode","!=","null",")","{","\n","newProject","=","RelOptUtil",".","propagateRelHints","(","originalRelNode,","newProject",")",";","\n","}","\n","return","result","(","newProject,","mapping",")",";","\n"],"docstring_tokens":["Creates","a","project","with","a","dummy","column,","to","protect","the","parts","of","the","system","that","cannot","handle","a","relational","expression","with","no","columns"]}
{"code_tokens":["\n","public","static","<E>","Holder<E>","of","(","E","e",")","{","\n","return","new","Holder<>","(","e",")",";","\n"],"docstring_tokens":["Creates","a","holder","containing","a","given","value"]}
{"code_tokens":["\n","@SuppressWarnings","(","\"ConstantConditions\"",")","\n","public","static","<E>","Holder<@Nullable","E>","empty","(",")","{","\n","return","new","Holder<@Nullable","E>","(","null",")",";","\n"],"docstring_tokens":["Creates","a","holder","containing","null"]}
{"code_tokens":["\n","@Override","public","boolean","clear","(",")","{","\n","boolean","empty","=","true",";","\n","if","(","!matchList",".","queue",".","isEmpty","(",")","||","!matchList",".","preQueue",".","isEmpty","(",")",")","{","\n","empty","=","false",";","\n","}","\n","matchList",".","clear","(",")",";","\n","return","!empty",";","\n"],"docstring_tokens":["Clear","internal","data","structure","for","this","rule","queue"]}
{"code_tokens":["\n","@Override","public","void","addMatch","(","VolcanoRuleMatch","match",")","{","\n","final","String","matchName","=","match",".","toString","(",")",";","\n\n","if","(","!matchList",".","names",".","add","(","matchName",")",")","{","\n","//","Identical","match","has","already","been","added",".","\n","return",";","\n","}","\n\n","LOGGER",".","trace","(","\"Rule-match","queued:","{","}","\",","matchName",")",";","\n\n","matchList",".","offer","(","match",")",";","\n\n","matchList",".","matchMap",".","put","(","\n","planner",".","getSubset","(","match",".","rels[0]",")",",","match",")",";","\n"],"docstring_tokens":["Add","a","rule","match"]}
{"code_tokens":["\n","private","String","getPigGroupBy","(","Implementor","implementor",")","{","\n","final","String","relAlias","=","implementor",".","getPigRelationAlias","(","this",")",";","\n","final","List<RelDataTypeField>","allFields","=","getInput","(",")",".","getRowType","(",")",".","getFieldList","(",")",";","\n","final","List<Integer>","groupedFieldIndexes","=","groupSet",".","asList","(",")",";","\n","if","(","groupedFieldIndexes",".","size","(",")","<","1",")","{","\n","return","relAlias","+","\"","=","GROUP","\"","+","relAlias","+","\"","ALL",";","\"",";","\n","}","else","{","\n","final","List<String>","groupedFieldNames","=","new","ArrayList<>","(","groupedFieldIndexes",".","size","(",")",")",";","\n","for","(","int","fieldIndex",":","groupedFieldIndexes",")","{","\n","groupedFieldNames",".","add","(","allFields",".","get","(","fieldIndex",")",".","getName","(",")",")",";","\n","}","\n","return","relAlias","+","\"","=","GROUP","\"","+","relAlias","+","\"","BY","(","\"\n","+","String",".","join","(","\",","\",","groupedFieldNames",")","+","\"",")",";","\"",";","\n","}","\n"],"docstring_tokens":["Generates","the","GROUP","BY","statement,","e.g"]}
{"code_tokens":["\n","@SuppressWarnings","(","\"initialization",".","invalid",".","field",".","write",".","initialized\"",")","\n","public","void","setRule","(","@UnknownInitialization","RelOptRule","rule",")","{","\n","this",".","rule","=","rule",";","\n"],"docstring_tokens":["Sets","the","rule","this","operand","belongs","to"]}
{"code_tokens":["\n","public","boolean","matches","(","RelNode","rel",")","{","\n","if","(","!clazz",".","isInstance","(","rel",")",")","{","\n","return","false",";","\n","}","\n","if","(","(","trait","!=","null",")","&&","!rel",".","getTraitSet","(",")",".","contains","(","trait",")",")","{","\n","return","false",";","\n","}","\n","return","predicate",".","test","(","rel",")",";","\n"],"docstring_tokens":["Returns","whether","a","relational","expression","matches","this","operand"]}
{"code_tokens":["\n","public","void","clear","(",")","{","\n","parents",".","clear","(",")",";","\n"],"docstring_tokens":["Removes","all","elements","in","this","equivalence","set"]}
{"code_tokens":["\n","public","int","size","(",")","{","\n","return","parents",".","size","(",")",";","\n"],"docstring_tokens":["Returns","the","number","of","elements","in","this","equivalence","set"]}
{"code_tokens":["\n","public","int","classCount","(",")","{","\n","return","new","HashSet<>","(","parents",".","values","(",")",")",".","size","(",")",";","\n"],"docstring_tokens":["Returns","the","number","of","equivalence","classes","in","this","equivalence","set"]}
{"code_tokens":["\n","protected","boolean","coerceOperandType","(","\n","@Nullable","SqlValidatorScope","scope,\n","SqlCall","call,\n","int","index,\n","RelDataType","targetType",")","{","\n","//","Transform","the","JavaType","to","SQL","type","because","the","SqlDataTypeSpec\n","//","does","not","support","deriving","JavaType","yet",".","\n","if","(","RelDataTypeFactoryImpl",".","isJavaType","(","targetType",")",")","{","\n","targetType","=","(","(","JavaTypeFactory",")","factory",")",".","toSql","(","targetType",")",";","\n","}","\n\n","SqlNode","operand","=","call",".","getOperandList","(",")",".","get","(","index",")",";","\n","if","(","operand","instanceof","SqlDynamicParam",")","{","\n","//","Do","not","support","implicit","type","coercion","for","dynamic","param",".","\n","return","false",";","\n","}","\n","requireNonNull","(","scope,","\"scope\"",")",";","\n","//","Check","it","early",".","\n","if","(","!needToCast","(","scope,","operand,","targetType",")",")","{","\n","return","false",";","\n","}","\n","//","Fix","up","nullable","attr",".","\n","RelDataType","targetType1","=","syncAttributes","(","validator",".","deriveType","(","scope,","operand",")",",","targetType",")",";","\n","SqlNode","desired","=","castTo","(","operand,","targetType1",")",";","\n","call",".","setOperand","(","index,","desired",")",";","\n","updateInferredType","(","desired,","targetType1",")",";","\n","return","true",";","\n"],"docstring_tokens":["Cast","operand","at","index","index","to","target","type"]}
{"code_tokens":["\n","protected","boolean","coerceColumnType","(","\n","@Nullable","SqlValidatorScope","scope,\n","SqlNodeList","nodeList,\n","int","index,\n","RelDataType","targetType",")","{","\n","//","Transform","the","JavaType","to","SQL","type","because","the","SqlDataTypeSpec\n","//","does","not","support","deriving","JavaType","yet",".","\n","if","(","RelDataTypeFactoryImpl",".","isJavaType","(","targetType",")",")","{","\n","targetType","=","(","(","JavaTypeFactory",")","factory",")",".","toSql","(","targetType",")",";","\n","}","\n\n","//","This","will","happen","when","there","is","a","star/dynamic-star","column","in","the","select","list,\n","//","and","the","source","is","values","expression,","i",".","e",".","`select","*","from","(","values","(","1,","2,","3",")",")","`",".","\n","//","There","is","no","need","to","coerce","the","column","type,","only","remark\n","//","the","inferred","row","type","has","changed,","we","will","then","add","in","type","coercion\n","//","when","expanding","star/dynamic-star",".","\n\n","//","See","SqlToRelConverter#convertSelectList","for","details",".","\n","if","(","index",">=","nodeList",".","size","(",")",")","{","\n","//","Can","only","happen","when","there","is","a","star","(","*",")","in","the","column,\n","//","just","return","true",".","\n","return","true",";","\n","}","\n\n","final","SqlNode","node","=","nodeList",".","get","(","index",")",";","\n","if","(","node","instanceof","SqlDynamicParam",")","{","\n","//","Do","not","support","implicit","type","coercion","for","dynamic","param",".","\n","return","false",";","\n","}","\n","if","(","node","instanceof","SqlIdentifier",")","{","\n","//","Do","not","expand","a","star/dynamic","table","col",".","\n","SqlIdentifier","node1","=","(","SqlIdentifier",")","node",";","\n","if","(","node1",".","isStar","(",")",")","{","\n","return","true",";","\n","}","else","if","(","DynamicRecordType",".","isDynamicStarColName","(","Util",".","last","(","node1",".","names",")",")",")","{","\n","//","Should","support","implicit","cast","for","dynamic","table",".","\n","return","false",";","\n","}","\n","}","\n\n","requireNonNull","(","scope,","\"scope","is","needed","for","needToCast","(","scope,","operand,","targetType",")","\"",")",";","\n","if","(","node","instanceof","SqlCall",")","{","\n","SqlCall","node2","=","(","SqlCall",")","node",";","\n","if","(","node2",".","getOperator","(",")",".","kind","==","SqlKind",".","AS",")","{","\n","final","SqlNode","operand","=","node2",".","operand","(","0",")",";","\n","if","(","!needToCast","(","scope,","operand,","targetType",")",")","{","\n","return","false",";","\n","}","\n","RelDataType","targetType2","=","syncAttributes","(","validator",".","deriveType","(","scope,","operand",")",",","targetType",")",";","\n","final","SqlNode","casted","=","castTo","(","operand,","targetType2",")",";","\n","node2",".","setOperand","(","0,","casted",")",";","\n","updateInferredType","(","casted,","targetType2",")",";","\n","return","true",";","\n","}","\n","}","\n","if","(","!needToCast","(","scope,","node,","targetType",")",")","{","\n","return","false",";","\n","}","\n","RelDataType","targetType3","=","syncAttributes","(","validator",".","deriveType","(","scope,","node",")",",","targetType",")",";","\n","final","SqlNode","node3","=","castTo","(","node,","targetType3",")",";","\n","nodeList",".","set","(","index,","node3",")",";","\n","updateInferredType","(","node3,","targetType3",")",";","\n","return","true",";","\n"],"docstring_tokens":["Cast","column","at","index","index","to","target","type"]}
{"code_tokens":["\n","RelDataType","syncAttributes","(","\n","RelDataType","fromType,\n","RelDataType","toType",")","{","\n","RelDataType","syncedType","=","toType",";","\n","if","(","fromType","!=","null",")","{","\n","syncedType","=","factory",".","createTypeWithNullability","(","syncedType,","fromType",".","isNullable","(",")",")",";","\n","if","(","SqlTypeUtil",".","inCharOrBinaryFamilies","(","fromType",")","\n","&&","SqlTypeUtil",".","inCharOrBinaryFamilies","(","toType",")",")","{","\n","Charset","charset","=","fromType",".","getCharset","(",")",";","\n","if","(","charset","!=","null","&&","SqlTypeUtil",".","inCharFamily","(","syncedType",")",")","{","\n","SqlCollation","collation","=","getCollation","(","fromType",")",";","\n","syncedType","=","factory",".","createTypeWithCharsetAndCollation","(","syncedType,\n","charset,\n","collation",")",";","\n","}","\n","}","\n","}","\n","return","syncedType",";","\n"],"docstring_tokens":["Sync","the","data","type","additional","attributes","before","casting,","i.e"]}
{"code_tokens":["\n","protected","boolean","needToCast","(","SqlValidatorScope","scope,","SqlNode","node,","RelDataType","toType",")","{","\n","RelDataType","fromType","=","validator",".","deriveType","(","scope,","node",")",";","\n","//","This","depends","on","the","fact","that","type","validate","happens","before","coercion",".","\n","//","We","do","not","have","inferred","type","for","some","node,","i",".","e",".","LOCALTIME",".","\n","if","(","fromType","==","null",")","{","\n","return","false",";","\n","}","\n\n","//","This","prevents","that","we","cast","a","JavaType","to","normal","RelDataType",".","\n","if","(","fromType","instanceof","RelDataTypeFactoryImpl",".","JavaType\n","&&","toType",".","getSqlTypeName","(",")","==","fromType",".","getSqlTypeName","(",")",")","{","\n","return","false",";","\n","}","\n\n","//","Do","not","make","a","cast","when","we","don't","know","specific","type","(","ANY",")","of","the","origin","node",".","\n","if","(","toType",".","getSqlTypeName","(",")","==","SqlTypeName",".","ANY\n","||","fromType",".","getSqlTypeName","(",")","==","SqlTypeName",".","ANY",")","{","\n","return","false",";","\n","}","\n\n","//","No","need","to","cast","between","char","and","varchar",".","\n","if","(","SqlTypeUtil",".","isCharacter","(","toType",")","&&","SqlTypeUtil",".","isCharacter","(","fromType",")",")","{","\n","return","false",";","\n","}","\n\n","//","No","need","to","cast","if","the","source","type","precedence","list\n","//","contains","target","type",".","i",".","e",".","do","not","cast","from\n","//","tinyint","to","int","or","int","to","bigint",".","\n","if","(","fromType",".","getPrecedenceList","(",")",".","containsType","(","toType",")","\n","&&","SqlTypeUtil",".","isIntType","(","fromType",")","\n","&&","SqlTypeUtil",".","isIntType","(","toType",")",")","{","\n","return","false",";","\n","}","\n\n","//","Implicit","type","coercion","does","not","handle","nullability",".","\n","if","(","SqlTypeUtil",".","equalSansNullability","(","factory,","fromType,","toType",")",")","{","\n","return","false",";","\n","}","\n","//","Should","keep","sync","with","rules","in","SqlTypeCoercionRule",".","\n","assert","SqlTypeUtil",".","canCastFrom","(","toType,","fromType,","true",")",";","\n","return","true",";","\n"],"docstring_tokens":["Decide","if","a","SqlNode","should","be","casted","to","target","type,","derived","class","can","override","this","strategy"]}
{"code_tokens":["\n","protected","void","updateInferredColumnType","(","\n","SqlValidatorScope","scope,\n","SqlNode","query,\n","int","columnIndex,\n","RelDataType","desiredType",")","{","\n","final","RelDataType","rowType","=","validator",".","deriveType","(","scope,","query",")",";","\n","assert","rowType",".","isStruct","(",")",";","\n","assert","columnIndex","<","rowType",".","getFieldList","(",")",".","size","(",")",";","\n\n","final","List<Map",".","Entry<String,","RelDataType>>","fieldList","=","new","ArrayList<>","(",")",";","\n","for","(","int","i","=","0",";","i","<","rowType",".","getFieldCount","(",")",";","i++",")","{","\n","final","RelDataTypeField","field","=","rowType",".","getFieldList","(",")",".","get","(","i",")",";","\n","final","String","name","=","field",".","getName","(",")",";","\n","final","RelDataType","type","=","field",".","getType","(",")",";","\n","final","RelDataType","targetType","=","i","==","columnIndex","?","desiredType",":","type",";","\n","fieldList",".","add","(","Pair",".","of","(","name,","targetType",")",")",";","\n","}","\n","updateInferredType","(","query,","factory",".","createStructType","(","fieldList",")",")",";","\n"],"docstring_tokens":["Update","inferred","row","type","for","a","query,","i.e"]}
{"code_tokens":["\n","public","SqlTypeName","lookup","(","String","name",")","{","\n","return","rules",".","getOrDefault","(","name,","SqlTypeName",".","ANY",")",";","\n"],"docstring_tokens":["Returns","a","corresponding","SqlTypeName","for","a","given","InnoDB","type","name"]}
{"code_tokens":["\n","@Deprecated","//","to","be","removed","before","2",".","0\n","public","Subtype","getSubtype","(",")","{","\n","return","Subtype",".","valueOf","(","kind",".","name","(",")",")",";","\n"],"docstring_tokens":["Returns","the","specific","function,","e.g"]}
{"code_tokens":["\n","public","static","StarTable","of","(","Lattice","lattice,","List<Table>","tables",")","{","\n","return","new","StarTable","(","lattice,","ImmutableList",".","copyOf","(","tables",")",")",";","\n"],"docstring_tokens":["Creates","a","StarTable","and","registers","it","in","a","schema"]}
{"code_tokens":["\n","public","static","SqlNodeList","of","(","SqlParserPos","pos,","List<@Nullable","SqlNode>","list",")","{","\n","return","new","SqlNodeList","(","pos,","list",")",";","\n"],"docstring_tokens":["Creates","a","SqlNodeList","with","a","given","backing","list"]}
{"code_tokens":["\n","void","flatten","(","List<MutableNode>","flatNodes",")","{","\n","flatNodes",".","add","(","this",")",";","\n","for","(","MutableNode","child",":","children",")","{","\n","child",".","flatten","(","flatNodes",")",";","\n","}","\n"],"docstring_tokens":["Populates","a","flattened","list","of","mutable","nodes"]}
{"code_tokens":["\n","@SuppressWarnings","(","\"BetaApi\"",")","\n","protected","RelDataType","canonize","(","final","RelDataType","type",")","{","\n","return","DATATYPE_CACHE",".","intern","(","type",")",";","\n"],"docstring_tokens":["Registers","a","type,","or","returns","the","existing","type","if","it","is","already","registered"]}
{"code_tokens":["\n","private","static","List<RelDataTypeField>","getFieldList","(","List<RelDataType>","types",")","{","\n","final","List<RelDataTypeField>","fieldList","=","new","ArrayList<>","(",")",";","\n","for","(","RelDataType","type",":","types",")","{","\n","addFields","(","type,","fieldList",")",";","\n","}","\n","return","fieldList",";","\n"],"docstring_tokens":["Returns","a","list","of","the","fields","in","a","list","of","types"]}
{"code_tokens":["\n","private","RelDataType","decimalOf2","(","RelDataType","type",")","{","\n","assert","SqlTypeUtil",".","isNumeric","(","type",")","||","SqlTypeUtil",".","isNull","(","type",")",";","\n","SqlTypeName","typeName","=","type",".","getSqlTypeName","(",")",";","\n","assert","typeName","!=","null",";","\n","switch","(","typeName",")","{","\n","case","DECIMAL:\n","//","Fix","the","precision","when","the","type","is","JavaType",".","\n","return","RelDataTypeFactoryImpl",".","isJavaType","(","type",")","\n","?","SqlTypeUtil",".","getMaxPrecisionScaleDecimal","(","this",")",":","type",";","\n","case","TINYINT:\n","return","createSqlType","(","SqlTypeName",".","DECIMAL,","3,","0",")",";","\n","case","SMALLINT:\n","return","createSqlType","(","SqlTypeName",".","DECIMAL,","5,","0",")",";","\n","case","INTEGER:\n","return","createSqlType","(","SqlTypeName",".","DECIMAL,","10,","0",")",";","\n","case","BIGINT:\n","//","the","default","max","precision","is","19,","so","this","is","actually","DECIMAL","(","19,","0",")","\n","//","but","derived","system","can","override","the","max","precision/scale",".","\n","return","createSqlType","(","SqlTypeName",".","DECIMAL,","38,","0",")",";","\n","case","REAL:\n","return","createSqlType","(","SqlTypeName",".","DECIMAL,","14,","7",")",";","\n","case","FLOAT:\n","return","createSqlType","(","SqlTypeName",".","DECIMAL,","14,","7",")",";","\n","case","DOUBLE:\n","//","the","default","max","precision","is","19,","so","this","is","actually","DECIMAL","(","19,","15",")","\n","//","but","derived","system","can","override","the","max","precision/scale",".","\n","return","createSqlType","(","SqlTypeName",".","DECIMAL,","30,","15",")",";","\n","default:\n","//","default","precision","and","scale",".","\n","return","createSqlType","(","SqlTypeName",".","DECIMAL",")",";","\n","}","\n"],"docstring_tokens":["Create","decimal","type","equivalent","with","the","given","type","while","sans","nullability"]}
{"code_tokens":["\n","public","@Nullable","SqlTypeName","lookup","(","Class","javaClass",")","{","\n","return","rules",".","get","(","javaClass",")",";","\n"],"docstring_tokens":["Returns","a","corresponding","SqlTypeName","for","a","given","Java","class"]}
{"code_tokens":["\n","public","static","TimestampString","fromCalendarFields","(","Calendar","calendar",")","{","\n","return","new","TimestampString","(","\n","calendar",".","get","(","Calendar",".","YEAR",")",",\n","calendar",".","get","(","Calendar",".","MONTH",")","+","1,\n","calendar",".","get","(","Calendar",".","DAY_OF_MONTH",")",",\n","calendar",".","get","(","Calendar",".","HOUR_OF_DAY",")",",\n","calendar",".","get","(","Calendar",".","MINUTE",")",",\n","calendar",".","get","(","Calendar",".","SECOND",")",")","\n",".","withMillis","(","calendar",".","get","(","Calendar",".","MILLISECOND",")",")",";","\n"],"docstring_tokens":["Creates","a","TimestampString","from","a","Calendar"]}
{"code_tokens":["\n","public","String","toString","(","int","precision",")","{","\n","Preconditions",".","checkArgument","(","precision",">=","0",")",";","\n","final","int","p","=","precision","(",")",";","\n","if","(","precision","<","p",")","{","\n","return","round","(","precision",")",".","toString","(","precision",")",";","\n","}","\n","if","(","precision",">","p",")","{","\n","String","s","=","v",";","\n","if","(","p","==","0",")","{","\n","s","+=","\"",".","\"",";","\n","}","\n","return","s","+","Strings",".","repeat","(","\"0\",","precision","-","p",")",";","\n","}","\n","return","v",";","\n"],"docstring_tokens":["Converts","this","TimestampString","to","a","string,","truncated","or","padded","with","zeros","to","a","given","precision"]}
{"code_tokens":["\n","protected","RelDataType","toStruct","(","RelDataType","type,","@Nullable","SqlNode","unnest",")","{","\n","if","(","type",".","isStruct","(",")",")","{","\n","return","type",";","\n","}","\n","return","validator",".","getTypeFactory","(",")",".","builder","(",")","\n",".","add","(","\n","castNonNull","(","\n","validator",".","deriveAlias","(","\n","Objects",".","requireNonNull","(","unnest,","\"unnest\"",")",",\n","0",")",")",",\n","type",")","\n",".","build","(",")",";","\n"],"docstring_tokens":["Converts","a","type","to","a","struct","if","it","is","not","already"]}
{"code_tokens":["\n","public","@Nullable","SqlNode","convertCall","(","\n","RexToSqlNodeConverter","converter,\n","RexCall","call",")","{","\n","if","(","get","(","call",")","==","null",")","{","\n","return","null",";","\n","}","\n\n","final","SqlOperator","op","=","call",".","getOperator","(",")",";","\n","final","List<RexNode>","operands","=","call",".","getOperands","(",")",";","\n\n","final","@Nullable","List<@Nullable","SqlNode>","exprs","=\n","convertExpressionList","(","converter,","operands",")",";","\n","if","(","exprs","==","null",")","{","\n","return","null",";","\n","}","\n","return","new","SqlBasicCall","(","\n","op,\n","exprs,\n","SqlParserPos",".","ZERO",")",";","\n"],"docstring_tokens":["Converts","a","call","to","an","operator","into","a","SqlCall","to","the","same","operator"]}
{"code_tokens":["\n","protected","void","registerEquivOp","(","SqlOperator","op",")","{","\n","registerOp","(","op,","new","EquivConvertlet","(","op",")",")",";","\n"],"docstring_tokens":["Creates","and","registers","a","convertlet","for","an","operator","in","which","the","SQL","and","Rex","representations","are","structurally","equivalent"]}
{"code_tokens":["\n","private","void","registerCaseOp","(","final","SqlOperator","op",")","{","\n","registerOp","(","\n","op,","(","converter,","call",")","->","{","\n","assert","op","instanceof","SqlCaseOperator",";","\n","@Nullable","List<@Nullable","SqlNode>","operands","=\n","convertExpressionList","(","converter,","call",".","operands",")",";","\n","if","(","operands","==","null",")","{","\n","return","null",";","\n","}","\n","SqlNodeList","whenList","=","new","SqlNodeList","(","SqlParserPos",".","ZERO",")",";","\n","SqlNodeList","thenList","=","new","SqlNodeList","(","SqlParserPos",".","ZERO",")",";","\n","int","i","=","0",";","\n","while","(","i","<","operands",".","size","(",")","-","1",")","{","\n","whenList",".","add","(","operands",".","get","(","i",")",")",";","\n","++i",";","\n","thenList",".","add","(","operands",".","get","(","i",")",")",";","\n","++i",";","\n","}","\n","SqlNode","elseExpr","=","operands",".","get","(","i",")",";","\n","return","op",".","createCall","(","null,","SqlParserPos",".","ZERO,","null,","whenList,","thenList,","elseExpr",")",";","\n","}",")",";","\n"],"docstring_tokens":["Creates","and","registers","a","convertlet","for","the","CASE","operator,","which","takes","different","forms","for","SQL","vs","Rex"]}
{"code_tokens":["\n","public","static","RexToLixTranslator","forAggregation","(","JavaTypeFactory","typeFactory,\n","BlockBuilder","list,","@Nullable","InputGetter","inputGetter,","SqlConformance","conformance",")","{","\n","final","ParameterExpression","root","=","DataContext",".","ROOT",";","\n","return","new","RexToLixTranslator","(","null,","typeFactory,","root,","inputGetter,","list,\n","null,","new","RexBuilder","(","typeFactory",")",",","conformance,","null",")",";","\n"],"docstring_tokens":["Creates","a","translator","for","translating","aggregate","functions"]}
{"code_tokens":["\n","BasicSqlType","createWithNullability","(","boolean","nullable",")","{","\n","if","(","nullable","==","this",".","isNullable",")","{","\n","return","this",";","\n","}","\n","return","new","BasicSqlType","(","this",".","typeSystem,","this",".","typeName,","nullable,\n","this",".","precision,","this",".","scale,","this",".","collation,","this",".","wrappedCharset",")",";","\n"],"docstring_tokens":["Constructs","a","type","with","nullablity"]}
{"code_tokens":["\n","BasicSqlType","createWithCharsetAndCollation","(","Charset","charset,\n","SqlCollation","collation",")","{","\n","Preconditions",".","checkArgument","(","SqlTypeUtil",".","inCharFamily","(","this",")",")",";","\n","return","new","BasicSqlType","(","this",".","typeSystem,","this",".","typeName,","this",".","isNullable,\n","this",".","precision,","this",".","scale,","collation,\n","SerializableCharset",".","forCharset","(","charset",")",")",";","\n"],"docstring_tokens":["Constructs","a","type","with","charset","and","collation"]}
{"code_tokens":["\n","private","static","Set<RexNode>","findCorrelationDependentCalls","(","CorrelationId","corrId,","RelNode","plan",")","{","\n","SimpleCorrelationCollector","finder","=","new","SimpleCorrelationCollector","(","corrId",")",";","\n","plan",".","accept","(","new","RelHomogeneousShuttle","(",")","{","\n","@Override","public","RelNode","visit","(","RelNode","other",")","{","\n","if","(","other","instanceof","Project","||","other","instanceof","Filter",")","{","\n","other",".","accept","(","finder",")",";","\n","}","\n","return","super",".","visit","(","other",")",";","\n","}","\n","}",")",";","\n","return","finder",".","correlations",";","\n"],"docstring_tokens":["Traverses","a","plan","and","finds","all","simply","correlated","row","expressions","with","the","specified","id"]}
{"code_tokens":["\n","public","static","boolean","containsMixing","(","RexProgram","program",")","{","\n","RexCallMultisetOperatorCounter","counter","=\n","new","RexCallMultisetOperatorCounter","(",")",";","\n","for","(","RexNode","expr",":","program",".","getExprList","(",")",")","{","\n","counter",".","reset","(",")",";","\n","expr",".","accept","(","counter",")",";","\n\n","if","(","(","counter",".","totalCount","!=","counter",".","multisetCount",")","\n","&&","(","0","!=","counter",".","multisetCount",")",")","{","\n","return","true",";","\n","}","\n","}","\n","return","false",";","\n"],"docstring_tokens":["Returns","true","if","any","expression","in","a","program","contains","a","mixing","between","multiset","and","non-multiset","calls"]}
{"code_tokens":["\n","public","static","boolean","containsMixing","(","RexNode","node",")","{","\n","RexCallMultisetOperatorCounter","counter","=\n","new","RexCallMultisetOperatorCounter","(",")",";","\n","node",".","accept","(","counter",")",";","\n","return","(","counter",".","totalCount","!=","counter",".","multisetCount",")","\n","&&","(","0","!=","counter",".","multisetCount",")",";","\n"],"docstring_tokens":["Returns","true","if","a","node","contains","a","mixing","between","multiset","and","non-multiset","calls"]}
{"code_tokens":["\n","public","static","@Nullable","RexCall","findFirstMultiset","(","final","RexNode","node,","boolean","deep",")","{","\n","if","(","node","instanceof","RexFieldAccess",")","{","\n","return","findFirstMultiset","(","\n","(","(","RexFieldAccess",")","node",")",".","getReferenceExpr","(",")",",\n","deep",")",";","\n","}","\n\n","if","(","!","(","node","instanceof","RexCall",")",")","{","\n","return","null",";","\n","}","\n","final","RexCall","call","=","(","RexCall",")","node",";","\n","RexCall","firstOne","=","null",";","\n","for","(","SqlOperator","op",":","MULTISET_OPERATORS",")","{","\n","firstOne","=","RexUtil",".","findOperatorCall","(","op,","call",")",";","\n","if","(","null","!=","firstOne",")","{","\n","if","(","firstOne",".","getOperator","(",")",".","equals","(","SqlStdOperatorTable",".","CAST",")","\n","&&","!isMultisetCast","(","firstOne",")",")","{","\n","firstOne","=","null",";","\n","continue",";","\n","}","\n","break",";","\n","}","\n","}","\n\n","if","(","!deep","&&","(","firstOne","!=","call",")",")","{","\n","return","null",";","\n","}","\n","return","firstOne",";","\n"],"docstring_tokens":["Returns","a","reference","to","the","first","found","multiset","call","or","null","if","none","was","found"]}
{"code_tokens":["\n","public","void","start","(",")","{","\n","Preconditions",".","checkState","(","!isStarted,","\"already","started\"",")",";","\n","try","{","\n","node",".","start","(",")",";","\n","this",".","isStarted","=","true",";","\n","}","catch","(","NodeValidationException","e",")","{","\n","throw","TestUtil",".","rethrow","(","e",")",";","\n","}","\n"],"docstring_tokens":["Starts","the","current","node"]}
{"code_tokens":["\n","public","TransportAddress","httpAddress","(",")","{","\n","Preconditions",".","checkState","(","isStarted,","\"node","is","not","started\"",")",";","\n\n","NodesInfoResponse","response","=","client","(",")",".","admin","(",")",".","cluster","(",")",".","prepareNodesInfo","(",")","\n",".","execute","(",")",".","actionGet","(",")",";","\n","if","(","response",".","getNodes","(",")",".","size","(",")","!=","1",")","{","\n","throw","new","IllegalStateException","(","\"Expected","single","node","but","got","\"\n","+","response",".","getNodes","(",")",".","size","(",")",")",";","\n","}","\n","NodeInfo","node","=","response",".","getNodes","(",")",".","get","(","0",")",";","\n","HttpInfo","httpInfo","=","node",".","getInfo","(","HttpInfo",".","class",")",";","\n","return","httpInfo",".","address","(",")",".","boundAddresses","(",")","[0]",";","\n"],"docstring_tokens":["Returns","current","address","to","connect","to","with","HTTP","client"]}
{"code_tokens":["\n","public","static","@Nullable","AggregateFunctionImpl","create","(","Class<?>","clazz",")","{","\n","final","Method","initMethod","=","ReflectiveFunctionBase",".","findMethod","(","clazz,","\"init\"",")",";","\n","final","Method","addMethod","=","ReflectiveFunctionBase",".","findMethod","(","clazz,","\"add\"",")",";","\n","final","Method","mergeMethod","=","null",";","//","TODO:\n","final","Method","resultMethod","=","ReflectiveFunctionBase",".","findMethod","(","\n","clazz,","\"result\"",")",";","\n","if","(","initMethod","!=","null","&&","addMethod","!=","null",")","{","\n","//","A","is","return","type","of","init","by","definition\n","final","Class<?>","accumulatorType","=","initMethod",".","getReturnType","(",")",";","\n\n","//","R","is","return","type","of","result","by","definition\n","final","Class<?>","resultType","=\n","resultMethod","!=","null","?","resultMethod",".","getReturnType","(",")",":","accumulatorType",";","\n\n","//","V","is","remaining","args","of","add","by","definition\n","final","List<Class>","addParamTypes","=\n","ImmutableList",".","copyOf","(","(","Class[]",")","addMethod",".","getParameterTypes","(",")",")",";","\n","if","(","addParamTypes",".","isEmpty","(",")","||","addParamTypes",".","get","(","0",")","!=","accumulatorType",")","{","\n","throw","RESOURCE",".","firstParameterOfAdd","(","clazz",".","getName","(",")",")",".","ex","(",")",";","\n","}","\n","final","ReflectiveFunctionBase",".","ParameterListBuilder","params","=\n","ReflectiveFunctionBase",".","builder","(",")",";","\n","final","ImmutableList",".","Builder<Class<?>>","valueTypes","=\n","ImmutableList",".","builder","(",")",";","\n","for","(","int","i","=","1",";","i","<","addParamTypes",".","size","(",")",";","i++",")","{","\n","final","Class","type","=","addParamTypes",".","get","(","i",")",";","\n","final","String","name","=","ReflectUtil",".","getParameterName","(","addMethod,","i",")",";","\n","final","boolean","optional","=","ReflectUtil",".","isParameterOptional","(","addMethod,","i",")",";","\n","params",".","add","(","type,","name,","optional",")",";","\n","valueTypes",".","add","(","type",")",";","\n","}","\n\n","//","A","init","(",")","\n","//","A","add","(","A,","V",")","\n","//","A","merge","(","A,","A",")","\n","//","R","result","(","A",")","\n\n","//","TODO:","check","add","returns","A\n","//","TODO:","check","merge","returns","A\n","//","TODO:","check","merge","args","are","(","A,","A",")","\n","//","TODO:","check","result","args","are","(","A",")","\n\n","return","new","AggregateFunctionImpl","(","clazz,","params",".","build","(",")",",\n","valueTypes",".","build","(",")",",","accumulatorType,","resultType,","initMethod,\n","addMethod,","mergeMethod,","resultMethod",")",";","\n","}","\n","return","null",";","\n"],"docstring_tokens":["Creates","an","aggregate","function,","or","returns","null"]}
{"code_tokens":["\n","public","static","List<RexNode>","generateCastExpressions","(","\n","RexBuilder","rexBuilder,\n","RelDataType","lhsRowType,\n","RelDataType","rhsRowType",")","{","\n","final","List<RelDataTypeField>","fieldList","=","rhsRowType",".","getFieldList","(",")",";","\n","int","n","=","fieldList",".","size","(",")",";","\n","assert","n","==","lhsRowType",".","getFieldCount","(",")","\n",":","\"field","count:","lhs","[\"","+","lhsRowType","+","\"]","rhs","[\"","+","rhsRowType","+","\"]\"",";","\n","List<RexNode>","rhsExps","=","new","ArrayList<>","(",")",";","\n","for","(","RelDataTypeField","field",":","fieldList",")","{","\n","rhsExps",".","add","(","\n","rexBuilder",".","makeInputRef","(","field",".","getType","(",")",",","field",".","getIndex","(",")",")",")",";","\n","}","\n","return","generateCastExpressions","(","rexBuilder,","lhsRowType,","rhsExps",")",";","\n"],"docstring_tokens":["Generates","a","cast","from","one","row","type","to","another"]}
{"code_tokens":["\n","public","static","List<RexNode>","generateCastExpressions","(","\n","RexBuilder","rexBuilder,\n","RelDataType","lhsRowType,\n","List<RexNode>","rhsExps",")","{","\n","List<RelDataTypeField>","lhsFields","=","lhsRowType",".","getFieldList","(",")",";","\n","List<RexNode>","castExps","=","new","ArrayList<>","(",")",";","\n","for","(","Pair<RelDataTypeField,","RexNode>","pair\n",":","Pair",".","zip","(","lhsFields,","rhsExps,","true",")",")","{","\n","RelDataTypeField","lhsField","=","pair",".","left",";","\n","RelDataType","lhsType","=","lhsField",".","getType","(",")",";","\n","final","RexNode","rhsExp","=","pair",".","right",";","\n","RelDataType","rhsType","=","rhsExp",".","getType","(",")",";","\n","if","(","lhsType",".","equals","(","rhsType",")",")","{","\n","castExps",".","add","(","rhsExp",")",";","\n","}","else","{","\n","castExps",".","add","(","rexBuilder",".","makeCast","(","lhsType,","rhsExp",")",")",";","\n","}","\n","}","\n","return","castExps",";","\n"],"docstring_tokens":["Generates","a","cast","for","a","row","type"]}
{"code_tokens":["\n","public","static","boolean","isNullabilityCast","(","RelDataTypeFactory","typeFactory,\n","RexNode","node",")","{","\n","switch","(","node",".","getKind","(",")",")","{","\n","case","CAST:\n","final","RexCall","call","=","(","RexCall",")","node",";","\n","final","RexNode","arg0","=","call",".","getOperands","(",")",".","get","(","0",")",";","\n","return","SqlTypeUtil",".","equalSansNullability","(","typeFactory,","arg0",".","getType","(",")",",\n","call",".","getType","(",")",")",";","\n","default:\n","break",";","\n","}","\n","return","false",";","\n"],"docstring_tokens":["Returns","whether","an","expression","is","a","cast","just","for","the","purposes","of","nullability,","not","changing","any","other","aspect","of","the","type"]}
{"code_tokens":["\n","public","static","boolean","isCallTo","(","RexNode","expr,","SqlOperator","op",")","{","\n","return","(","expr","instanceof","RexCall",")","\n","&&","(","(","(","RexCall",")","expr",")",".","getOperator","(",")","==","op",")",";","\n"],"docstring_tokens":["Returns","whether","a","RexNode","node","is","a","RexCall","call","to","a","given","SqlOperator","operator"]}
{"code_tokens":["\n","public","static","boolean","isIdentity","(","List<?","extends","RexNode>","exps,\n","RelDataType","inputRowType",")","{","\n","return","inputRowType",".","getFieldCount","(",")","==","exps",".","size","(",")","\n","&&","containIdentity","(","exps,","inputRowType,","Litmus",".","IGNORE",")",";","\n"],"docstring_tokens":["Returns","whether","a","list","of","expressions","projects","the","incoming","fields"]}
{"code_tokens":["\n","public","static","@Nullable","RexNode","composeDisjunction","(","RexBuilder","rexBuilder,\n","Iterable<?","extends","RexNode>","nodes,","boolean","nullOnEmpty",")","{","\n","ImmutableList<RexNode>","list","=","flattenOr","(","nodes",")",";","\n","switch","(","list",".","size","(",")",")","{","\n","case","0:\n","return","nullOnEmpty\n","?","null\n",":","rexBuilder",".","makeLiteral","(","false",")",";","\n","case","1:\n","return","list",".","get","(","0",")",";","\n","default:\n","if","(","containsTrue","(","list",")",")","{","\n","return","rexBuilder",".","makeLiteral","(","true",")",";","\n","}","\n","return","rexBuilder",".","makeCall","(","SqlStdOperatorTable",".","OR,","list",")",";","\n","}","\n"],"docstring_tokens":["Converts","a","collection","of","expressions","into","an","OR,","optionally","returning","null","if","the","list","is","empty"]}
{"code_tokens":["\n","public","static","@Nullable","RelFieldCollation","apply","(","\n","Mappings",".","TargetMapping","mapping,\n","RelFieldCollation","fieldCollation",")","{","\n","final","int","target","=\n","mapping",".","getTargetOpt","(","fieldCollation",".","getFieldIndex","(",")",")",";","\n","if","(","target","<","0",")","{","\n","return","null",";","\n","}","\n","return","fieldCollation",".","withFieldIndex","(","target",")",";","\n"],"docstring_tokens":["Applies","a","mapping","to","a","field","collation"]}
{"code_tokens":["\n","public","static","boolean","isFlat","(","RexNode","expr",")","{","\n","if","(","!","(","expr","instanceof","RexCall",")",")","{","\n","return","true",";","\n","}","\n","final","RexCall","call","=","(","RexCall",")","expr",";","\n","return","isFlat","(","call",".","getOperands","(",")",",","call",".","getOperator","(",")",")","\n","&&","all","(","call",".","getOperands","(",")",",","RexUtil::isFlat",")",";","\n"],"docstring_tokens":["Returns","false","if","the","expression","can","be","optimized","by","flattening","calls","to","an","associative","operator","such","as","AND","and","OR"]}
{"code_tokens":["\n","public","static","RexNode","not","(","RexNode","e",")","{","\n","switch","(","e",".","getKind","(",")",")","{","\n","case","NOT:\n","return","(","(","RexCall",")","e",")",".","getOperands","(",")",".","get","(","0",")",";","\n","default:\n","return","addNot","(","e",")",";","\n","}","\n"],"docstring_tokens":["Negates","a","logical","expression","by","adding","or","removing","a","NOT"]}
{"code_tokens":["\n","public","static","synchronized","OracleSqlOperatorTable","instance","(",")","{","\n","OracleSqlOperatorTable","instance","=","OracleSqlOperatorTable",".","instance",";","\n","if","(","instance","==","null",")","{","\n","//","Creates","and","initializes","the","standard","operator","table",".","\n","//","Uses","two-phase","construction,","because","we","can't","initialize","the\n","//","table","until","the","constructor","of","the","sub-class","has","completed",".","\n","instance","=","new","OracleSqlOperatorTable","(",")",";","\n","instance",".","init","(",")",";","\n","OracleSqlOperatorTable",".","instance","=","instance",";","\n","}","\n","return","instance",";","\n"],"docstring_tokens":["Returns","the","Oracle","operator","table,","creating","it","if","necessary"]}
{"code_tokens":["\n","public","Set<RelSet>","getChildSets","(","VolcanoPlanner","planner",")","{","\n","Set<RelSet>","childSets","=","new","HashSet<>","(",")",";","\n","for","(","RelNode","node",":","this",".","rels",")","{","\n","if","(","node","instanceof","Converter",")","{","\n","continue",";","\n","}","\n","for","(","RelNode","child",":","node",".","getInputs","(",")",")","{","\n","RelSet","childSet","=","planner",".","equivRoot","(","(","(","RelSubset",")","child",")",".","getSet","(",")",")",";","\n","if","(","childSet",".","id","!=","this",".","id",")","{","\n","childSets",".","add","(","childSet",")",";","\n","}","\n","}","\n","}","\n","return","childSets",";","\n"],"docstring_tokens":["Returns","the","child","RelSet","for","the","current","set"]}
{"code_tokens":["\n","void","addInternal","(","RelNode","rel",")","{","\n","if","(","!rels",".","contains","(","rel",")",")","{","\n","rels",".","add","(","rel",")",";","\n","for","(","RelTrait","trait",":","rel",".","getTraitSet","(",")",")","{","\n","assert","trait","==","trait",".","getTraitDef","(",")",".","canonize","(","trait",")",";","\n","}","\n\n","VolcanoPlanner","planner","=\n","(","VolcanoPlanner",")","rel",".","getCluster","(",")",".","getPlanner","(",")",";","\n","if","(","planner",".","getListener","(",")","!=","null",")","{","\n","postEquivalenceEvent","(","planner,","rel",")",";","\n","}","\n","}","\n","if","(","this",".","rel","==","null",")","{","\n","this",".","rel","=","rel",";","\n","}","else","{","\n","//","Row","types","must","be","the","same,","except","for","field","names",".","\n","RelOptUtil",".","verifyTypeEquivalence","(","\n","this",".","rel,\n","rel,\n","this",")",";","\n","}","\n"],"docstring_tokens":["Adds","an","expression","rel","to","this","set,","without","creating","a","org.apache.calcite.plan.volcano.RelSubset"]}
{"code_tokens":["\n","private","static","String","hms","(","int","h,","int","m,","int","s",")","{","\n","Preconditions",".","checkArgument","(","h",">=","0","&&","h","<","24,","\"Hour","out","of","range:\",","h",")",";","\n","Preconditions",".","checkArgument","(","m",">=","0","&&","m","<","60,","\"Minute","out","of","range:\",","m",")",";","\n","Preconditions",".","checkArgument","(","s",">=","0","&&","s","<","60,","\"Second","out","of","range:\",","s",")",";","\n","final","StringBuilder","b","=","new","StringBuilder","(",")",";","\n","DateTimeStringUtils",".","hms","(","b,","h,","m,","s",")",";","\n","return","b",".","toString","(",")",";","\n"],"docstring_tokens":["Validates","an","hour-minute-second","value","and","converts","to","a","string"]}
{"code_tokens":["\n","public","static","TimeString","fromCalendarFields","(","Calendar","calendar",")","{","\n","return","new","TimeString","(","\n","calendar",".","get","(","Calendar",".","HOUR_OF_DAY",")",",\n","calendar",".","get","(","Calendar",".","MINUTE",")",",\n","calendar",".","get","(","Calendar",".","SECOND",")",")","\n",".","withMillis","(","calendar",".","get","(","Calendar",".","MILLISECOND",")",")",";","\n"],"docstring_tokens":["Creates","a","TimeString","from","a","Calendar"]}
{"code_tokens":["\n","public","static","ConfigBuilder","newConfigBuilder","(",")","{","\n","return","new","ConfigBuilder","(",")",";","\n"],"docstring_tokens":["Creates","a","config","builder","with","each","setting","initialized","to","its","default","value"]}
{"code_tokens":["\n","protected","void","assertNode","(","String","message,","String","expected,","RexNode","node",")","{","\n","String","actual",";","\n","if","(","node",".","isA","(","SqlKind",".","CAST",")","||","node",".","isA","(","SqlKind",".","NEW_SPECIFICATION",")",")","{","\n","//","toString","contains","type","(","see","RexCall",".","toString",")","\n","actual","=","node",".","toString","(",")",";","\n","}","else","{","\n","actual","=","node","+","\":\"","+","node",".","getType","(",")","+","(","node",".","getType","(",")",".","isNullable","(",")","?","\"\"\n",":","RelDataTypeImpl",".","NON_NULLABLE_SUFFIX",")",";","\n","}","\n","assertEquals","(","expected,","actual,","message",")",";","\n"],"docstring_tokens":["Asserts","that","a","given","node","has","expected","string","representation","with","account","of","node","type"]}
{"code_tokens":["\n","public","<E","extends","RelMultipleTrait>","List<E>","getTraits","(","int","index",")","{","\n","final","RelTrait","trait","=","traits[index]",";","\n","if","(","trait","instanceof","RelCompositeTrait",")","{","\n","//noinspection","unchecked\n","return","(","(","RelCompositeTrait<E>",")","trait",")",".","traitList","(",")",";","\n","}","else","{","\n","//noinspection","unchecked\n","return","ImmutableList",".","of","(","(","E",")","trait",")",";","\n","}","\n"],"docstring_tokens":["Retrieves","a","list","of","traits","from","the","set"]}
{"code_tokens":["\n","public","<T","extends","RelTrait>","boolean","isEnabled","(","RelTraitDef<T>","traitDef",")","{","\n","return","getTrait","(","traitDef",")","!=","null",";","\n"],"docstring_tokens":["Returns","whether","a","given","kind","of","trait","is","enabled"]}
{"code_tokens":["\n","public","<T","extends","RelTrait>","@Nullable","T","getTrait","(","RelTraitDef<T>","traitDef",")","{","\n","int","index","=","findIndex","(","traitDef",")",";","\n","if","(","index",">=","0",")","{","\n","//noinspection","unchecked\n","return","(","T",")","getTrait","(","index",")",";","\n","}","\n\n","return","null",";","\n"],"docstring_tokens":["Retrieves","a","RelTrait","of","the","given","type","from","the","set"]}
{"code_tokens":["\n","public","<T","extends","RelMultipleTrait>","RelTraitSet","replaceIfs","(","RelTraitDef<T>","def,\n","Supplier<?","extends","@Nullable","List<T>>","traitSupplier",")","{","\n","int","index","=","findIndex","(","def",")",";","\n","if","(","index","<","0",")","{","\n","return","this",";","//","trait","is","not","enabled",";","ignore","it\n","}","\n","final","List<T>","traitList","=","traitSupplier",".","get","(",")",";","\n","if","(","traitList","==","null",")","{","\n","return","replace","(","index,","def",".","getDefault","(",")",")",";","\n","}","\n","return","replace","(","index,","RelCompositeTrait",".","of","(","def,","traitList",")",")",";","\n"],"docstring_tokens":["If","a","given","multiple","trait","is","enabled,","replaces","it","by","calling","the","given","function"]}
{"code_tokens":["\n","public","<T","extends","RelTrait>","RelTraitSet","replaceIf","(","RelTraitDef<T>","def,\n","Supplier<?","extends","@Nullable","T>","traitSupplier",")","{","\n","int","index","=","findIndex","(","def",")",";","\n","if","(","index","<","0",")","{","\n","return","this",";","//","trait","is","not","enabled",";","ignore","it\n","}","\n","T","traitList","=","traitSupplier",".","get","(",")",";","\n","if","(","traitList","==","null",")","{","\n","traitList","=","def",".","getDefault","(",")",";","\n","}","\n","return","replace","(","index,","traitList",")",";","\n"],"docstring_tokens":["If","a","given","trait","is","enabled,","replaces","it","by","calling","the","given","function"]}
{"code_tokens":["\n","public","boolean","isDefault","(",")","{","\n","for","(","final","RelTrait","trait",":","traits",")","{","\n","if","(","trait","!=","trait",".","getTraitDef","(",")",".","getDefault","(",")",")","{","\n","return","false",";","\n","}","\n","}","\n","return","true",";","\n"],"docstring_tokens":["Returns","whether","all","the","traits","are","default","trait","value"]}
{"code_tokens":["\n","public","boolean","isDefaultSansConvention","(",")","{","\n","for","(","final","RelTrait","trait",":","traits",")","{","\n","if","(","trait",".","getTraitDef","(",")","==","ConventionTraitDef",".","INSTANCE",")","{","\n","continue",";","\n","}","\n","if","(","trait","!=","trait",".","getTraitDef","(",")",".","getDefault","(",")",")","{","\n","return","false",";","\n","}","\n","}","\n","return","true",";","\n"],"docstring_tokens":["Returns","whether","all","the","traits","except","Convention","are","default","trait","value"]}
{"code_tokens":["\n","public","boolean","equalsSansConvention","(","RelTraitSet","other",")","{","\n","if","(","this","==","other",")","{","\n","return","true",";","\n","}","\n","if","(","this",".","size","(",")","!=","other",".","size","(",")",")","{","\n","return","false",";","\n","}","\n","for","(","int","i","=","0",";","i","<","traits",".","length",";","i++",")","{","\n","if","(","traits[i]",".","getTraitDef","(",")","==","ConventionTraitDef",".","INSTANCE",")","{","\n","continue",";","\n","}","\n","//","each","trait","should","be","canonized","already\n","if","(","traits[i]","!=","other",".","traits[i]",")","{","\n","return","false",";","\n","}","\n","}","\n","return","true",";","\n"],"docstring_tokens":["Returns","whether","all","the","traits","except","Convention","equals","with","traits","in","other","traitSet"]}
{"code_tokens":["\n","public","RelTraitSet","getDefault","(",")","{","\n","RelTrait[]","newTraits","=","new","RelTrait[traits",".","length]",";","\n","for","(","int","i","=","0",";","i","<","traits",".","length",";","i++",")","{","\n","newTraits[i]","=","traits[i]",".","getTraitDef","(",")",".","getDefault","(",")",";","\n","}","\n","return","cache",".","getOrAdd","(","new","RelTraitSet","(","cache,","newTraits",")",")",";","\n"],"docstring_tokens":["Returns","a","new","traitSet","with","same","traitDefs","with","current","traitSet,","but","each","trait","is","the","default","trait","value"]}
{"code_tokens":["\n","@Override","public","int","size","(",")","{","\n","return","traits",".","length",";","\n"],"docstring_tokens":["Returns","the","size","of","the","RelTraitSet"]}
{"code_tokens":["\n","public","<T","extends","RelTrait>","T","canonize","(","T","trait",")","{","\n","if","(","trait","==","null",")","{","\n","//","Return","\"trait\"","makes","the","input","type","to","be","the","same","as","the","output","type,\n","//","so","checkerframework","is","happy\n","return","trait",";","\n","}","\n\n","if","(","trait","instanceof","RelCompositeTrait",")","{","\n","//","Composite","traits","are","canonized","on","creation\n","//noinspection","unchecked\n","return","trait",";","\n","}","\n\n","//noinspection","unchecked\n","return","(","T",")","trait",".","getTraitDef","(",")",".","canonize","(","trait",")",";","\n"],"docstring_tokens":["Converts","a","trait","to","canonical","form"]}
{"code_tokens":["\n","@Override","public","boolean","equals","(","@Nullable","Object","obj",")","{","\n","if","(","this","==","obj",")","{","\n","return","true",";","\n","}","\n","if","(","!","(","obj","instanceof","RelTraitSet",")",")","{","\n","return","false",";","\n","}","\n","RelTraitSet","that","=","(","RelTraitSet",")","obj",";","\n","if","(","this",".","hash","!=","0\n","&&","that",".","hash","!=","0\n","&&","this",".","hash","!=","that",".","hash",")","{","\n","return","false",";","\n","}","\n","if","(","traits",".","length","!=","that",".","traits",".","length",")","{","\n","return","false",";","\n","}","\n","for","(","int","i","=","0",";","i","<","traits",".","length",";","i++",")","{","\n","if","(","traits[i]","!=","that",".","traits[i]",")","{","\n","return","false",";","\n","}","\n","}","\n","return","true",";","\n"],"docstring_tokens":["Compares","two","RelTraitSet","objects","for","equality"]}
{"code_tokens":["\n","public","boolean","contains","(","RelTrait","trait",")","{","\n","for","(","RelTrait","relTrait",":","traits",")","{","\n","if","(","trait","==","relTrait",")","{","\n","return","true",";","\n","}","\n","}","\n","return","false",";","\n"],"docstring_tokens":["Returns","whether","this","trait","set","contains","a","given","trait"]}
{"code_tokens":["\n","public","boolean","comprises","(","RelTrait",".",".",".","relTraits",")","{","\n","return","Arrays",".","equals","(","traits,","relTraits",")",";","\n"],"docstring_tokens":["Returns","whether","this","trait","set","comprises","precisely","the","list","of","given","traits"]}
{"code_tokens":["\n","String","computeString","(",")","{","\n","StringBuilder","s","=","new","StringBuilder","(",")",";","\n","for","(","int","i","=","0",";","i","<","traits",".","length",";","i++",")","{","\n","final","RelTrait","trait","=","traits[i]",";","\n","if","(","i",">","0",")","{","\n","s",".","append","(","'",".","'",")",";","\n","}","\n","if","(","(","trait","==","null",")","\n","&&","(","traits",".","length","==","1",")",")","{","\n","//","Special","format","for","a","list","containing","a","single","null","trait",";","\n","//","otherwise","its","string","appears","as","\"null\",","which","is","the","same\n","//","as","if","the","whole","trait","set","were","null,","and","so","confusing",".","\n","s",".","append","(","\"","{","null","}","\"",")",";","\n","}","else","{","\n","s",".","append","(","trait",")",";","\n","}","\n","}","\n","return","s",".","toString","(",")",";","\n"],"docstring_tokens":["Outputs","the","traits","of","this","set","as","a","String"]}
{"code_tokens":["\n","private","int","findIndex","(","RelTraitDef","traitDef",")","{","\n","for","(","int","i","=","0",";","i","<","traits",".","length",";","i++",")","{","\n","RelTrait","trait","=","traits[i]",";","\n","if","(","(","trait","!=","null",")","&&","(","trait",".","getTraitDef","(",")","==","traitDef",")",")","{","\n","return","i",";","\n","}","\n","}","\n\n","return","-1",";","\n"],"docstring_tokens":["Finds","the","index","of","a","trait","of","a","given","type","in","this","set"]}
{"code_tokens":["\n","public","ImmutableList<RelTrait>","difference","(","RelTraitSet","traitSet",")","{","\n","final","ImmutableList",".","Builder<RelTrait>","builder","=","ImmutableList",".","builder","(",")",";","\n","final","int","n","=\n","Math",".","min","(","\n","this",".","size","(",")",",\n","traitSet",".","size","(",")",")",";","\n\n","for","(","int","i","=","0",";","i","<","n",";","i++",")","{","\n","RelTrait","thisTrait","=","this",".","traits[i]",";","\n","RelTrait","thatTrait","=","traitSet",".","traits[i]",";","\n","if","(","thisTrait","!=","thatTrait",")","{","\n","builder",".","add","(","thatTrait",")",";","\n","}","\n","}","\n","return","builder",".","build","(",")",";","\n"],"docstring_tokens":["Returns","a","list","of","traits","that","are","in","traitSet","but","not","in","this","RelTraitSet"]}
{"code_tokens":["\n","public","boolean","allSimple","(",")","{","\n","for","(","RelTrait","trait",":","traits",")","{","\n","if","(","trait","instanceof","RelCompositeTrait",")","{","\n","return","false",";","\n","}","\n","}","\n","return","true",";","\n"],"docstring_tokens":["Returns","whether","there","are","any","composite","traits","in","this","set"]}
{"code_tokens":["\n","public","RelTraitSet","simplify","(",")","{","\n","RelTraitSet","x","=","this",";","\n","for","(","int","i","=","0",";","i","<","traits",".","length",";","i++",")","{","\n","final","RelTrait","trait","=","traits[i]",";","\n","if","(","trait","instanceof","RelCompositeTrait",")","{","\n","x","=","x",".","replace","(","i,\n","(","(","RelCompositeTrait",")","trait",")",".","size","(",")","==","1\n","?","(","(","RelCompositeTrait",")","trait",")",".","trait","(","0",")","\n",":","trait",".","getTraitDef","(",")",".","getDefault","(",")",")",";","\n","}","\n","}","\n","return","x",";","\n"],"docstring_tokens":["Returns","a","trait","set","similar","to","this","one","but","with","all","composite","traits","flattened"]}
{"code_tokens":["\n","public","boolean","hasFilter","(",")","{","\n","return","false",";","\n"],"docstring_tokens":["Returns","whether","the","operator","is","an","aggregate","function","with","a","filter"]}
{"code_tokens":["\n","public","Enumerable<Object>","query","(","final","CqlSession","session,","List<Map",".","Entry<String,","Class>>","fields,\n","final","List<Map",".","Entry<String,","String>>","selectFields,","List<String>","predicates,\n","List<String>","order,","final","Integer","offset,","final","Integer","fetch",")","{","\n","//","Build","the","type","of","the","resulting","row","based","on","the","provided","fields\n","final","RelDataTypeFactory","typeFactory","=\n","new","SqlTypeFactoryImpl","(","RelDataTypeSystem",".","DEFAULT",")",";","\n","final","RelDataTypeFactory",".","Builder","fieldInfo","=","typeFactory",".","builder","(",")",";","\n","final","RelDataType","rowType","=","getRowType","(","typeFactory",")",";","\n\n","Function1<String,","Void>","addField","=","fieldName","->","{","\n","RelDataType","relDataType","=","Objects",".","requireNonNull","(","\n","rowType",".","getField","(","fieldName,","true,","false",")",")",".","getType","(",")",";","\n","fieldInfo",".","add","(","fieldName,","relDataType",")",".","nullable","(","true",")",";","\n","return","null",";","\n","}",";","\n\n","if","(","selectFields",".","isEmpty","(",")",")","{","\n","for","(","Map",".","Entry<String,","Class>","field",":","fields",")","{","\n","addField",".","apply","(","field",".","getKey","(",")",")",";","\n","}","\n","}","else","{","\n","for","(","Map",".","Entry<String,","String>","field",":","selectFields",")","{","\n","addField",".","apply","(","field",".","getKey","(",")",")",";","\n","}","\n","}","\n\n","final","RelProtoDataType","resultRowType","=","RelDataTypeImpl",".","proto","(","fieldInfo",".","build","(",")",")",";","\n\n","//","Construct","the","list","of","fields","to","project\n","final","String","selectString",";","\n","if","(","selectFields",".","isEmpty","(",")",")","{","\n","selectString","=","\"*\"",";","\n","}","else","{","\n","selectString","=","Util",".","toString","(","(",")","->","{","\n","final","Iterator<Map",".","Entry<String,","String>>","selectIterator","=\n","selectFields",".","iterator","(",")",";","\n\n","return","new","Iterator<String>","(",")","{","\n","@Override","public","boolean","hasNext","(",")","{","\n","return","selectIterator",".","hasNext","(",")",";","\n","}","\n\n","@Override","public","String","next","(",")","{","\n","Map",".","Entry<String,","String>","entry","=","selectIterator",".","next","(",")",";","\n","return","entry",".","getKey","(",")","+","\"","AS","\"","+","entry",".","getValue","(",")",";","\n","}","\n\n","@Override","public","void","remove","(",")","{","\n","throw","new","UnsupportedOperationException","(",")",";","\n","}","\n","}",";","\n","}",",","\"\",","\",","\",","\"\"",")",";","\n","}","\n\n","//","Combine","all","predicates","conjunctively\n","String","whereClause","=","\"\"",";","\n","if","(","!predicates",".","isEmpty","(",")",")","{","\n","whereClause","=","\"","WHERE","\"",";","\n","whereClause","+=","Util",".","toString","(","predicates,","\"\",","\"","AND","\",","\"\"",")",";","\n","}","\n\n","//","Build","and","issue","the","query","and","return","an","Enumerator","over","the","results\n","StringBuilder","queryBuilder","=","new","StringBuilder","(","\"SELECT","\"",")",";","\n","queryBuilder",".","append","(","selectString",")","\n",".","append","(","\"","FROM","\\\"\"",")","\n",".","append","(","columnFamily",")","\n",".","append","(","\"\\\"\"",")","\n",".","append","(","whereClause",")",";","\n","if","(","!order",".","isEmpty","(",")",")","{","\n","queryBuilder",".","append","(","Util",".","toString","(","order,","\"","ORDER","BY","\",","\",","\",","\"\"",")",")",";","\n","}","\n\n","int","limit","=","offset",";","\n","if","(","fetch",">=","0",")","{","\n","limit","+=","fetch",";","\n","}","\n","if","(","limit",">","0",")","{","\n","queryBuilder",".","append","(","\"","LIMIT","\"",")","\n",".","append","(","limit",")",";","\n","}","\n","queryBuilder",".","append","(","\"","ALLOW","FILTERING\"",")",";","\n\n","return","new","AbstractEnumerable<Object>","(",")","{","\n","@Override","public","Enumerator<Object>","enumerator","(",")","{","\n","final","ResultSet","results","=","session",".","execute","(","queryBuilder",".","toString","(",")",")",";","\n","//","Skip","results","until","we","get","to","the","right","offset\n","int","skip","=","0",";","\n","Enumerator<Object>","enumerator","=","new","CassandraEnumerator","(","results,","resultRowType",")",";","\n","while","(","skip","<","offset","&&","enumerator",".","moveNext","(",")",")","{","\n","skip++",";","\n","}","\n","return","enumerator",";","\n","}","\n","}",";","\n"],"docstring_tokens":["Executes","a","CQL","query","on","the","underlying","table"]}
{"code_tokens":["\n","private","static","ImmutableBitSet","decorateWithConstantColumnsFromPredicates","(","\n","ImmutableBitSet","checkingColumns,","RelNode","rel,","RelMetadataQuery","mq",")","{","\n","final","RelOptPredicateList","predicates","=","mq",".","getPulledUpPredicates","(","rel",")",";","\n","if","(","!RelOptPredicateList",".","isEmpty","(","predicates",")",")","{","\n","final","Set<Integer>","constantIndexes","=","new","HashSet<>","(",")",";","\n","predicates",".","constantMap",".","keySet","(",")",".","forEach","(","rex","->","{","\n","if","(","rex","instanceof","RexInputRef",")","{","\n","constantIndexes",".","add","(","(","(","RexInputRef",")","rex",")",".","getIndex","(",")",")",";","\n","}","\n","}",")",";","\n","if","(","!constantIndexes",".","isEmpty","(",")",")","{","\n","return","checkingColumns",".","union","(","ImmutableBitSet",".","of","(","constantIndexes",")",")",";","\n","}","\n","}","\n","//","If","no","constant","columns","deduced,","return","the","original","\"checkingColumns\"",".","\n","return","checkingColumns",";","\n"],"docstring_tokens":["Deduce","constant","columns","from","predicates","of","rel","and","return","the","union","bitsets","of","checkingColumns","and","the","constant","columns"]}
{"code_tokens":["\n","public","static","SqlSampleSpec","sampleValue","(","SqlNode","node",")","{","\n","return","(","(","SqlLiteral",")","node",")",".","getValueAs","(","SqlSampleSpec",".","class",")",";","\n"],"docstring_tokens":["Extracts","the","SqlSampleSpec","value","from","a","symbol","literal"]}
{"code_tokens":["\n","@Deprecated","//","to","be","removed","before","2",".","0\n","public","static","String","stringValue","(","SqlNode","node",")","{","\n","if","(","node","instanceof","SqlLiteral",")","{","\n","SqlLiteral","literal","=","(","SqlLiteral",")","node",";","\n","assert","SqlTypeUtil",".","inCharFamily","(","literal",".","getTypeName","(",")",")",";","\n","return","requireNonNull","(","literal",".","value",")",".","toString","(",")",";","\n","}","else","if","(","SqlUtil",".","isLiteralChain","(","node",")",")","{","\n","final","SqlLiteral","literal","=\n","SqlLiteralChainOperator",".","concatenateOperands","(","(","SqlCall",")","node",")",";","\n","assert","SqlTypeUtil",".","inCharFamily","(","literal",".","getTypeName","(",")",")",";","\n","return","requireNonNull","(","literal",".","value",")",".","toString","(",")",";","\n","}","else","if","(","node","instanceof","SqlCall\n","&&","(","(","SqlCall",")","node",")",".","getOperator","(",")","==","SqlStdOperatorTable",".","CAST",")","{","\n","return","stringValue","(","(","(","SqlCall",")","node",")",".","operand","(","0",")",")",";","\n","}","else","{","\n","throw","new","AssertionError","(","\"invalid","string","literal:","\"","+","node",")",";","\n","}","\n"],"docstring_tokens":["Extracts","the","string","value","from","a","string","literal,","a","chain","of","string","literals,","or","a","CAST","of","a","string","literal"]}
{"code_tokens":["\n","public","static","SqlLiteral","createBoolean","(","\n","boolean","b,\n","SqlParserPos","pos",")","{","\n","return","b","?","new","SqlLiteral","(","Boolean",".","TRUE,","SqlTypeName",".","BOOLEAN,","pos",")","\n",":","new","SqlLiteral","(","Boolean",".","FALSE,","SqlTypeName",".","BOOLEAN,","pos",")",";","\n"],"docstring_tokens":["Creates","a","boolean","literal"]}
{"code_tokens":["\n","public","static","SqlLiteral","createSample","(","\n","SqlSampleSpec","sampleSpec,\n","SqlParserPos","pos",")","{","\n","return","new","SqlLiteral","(","sampleSpec,","SqlTypeName",".","SYMBOL,","pos",")",";","\n"],"docstring_tokens":["Creates","a","literal","which","represents","a","sample","specification"]}
{"code_tokens":["\n","public","int","intValue","(","boolean","exact",")","{","\n","switch","(","typeName",")","{","\n","case","DECIMAL:\n","case","DOUBLE:\n","BigDecimal","bd","=","(","BigDecimal",")","requireNonNull","(","value,","\"value\"",")",";","\n","if","(","exact",")","{","\n","try","{","\n","return","bd",".","intValueExact","(",")",";","\n","}","catch","(","ArithmeticException","e",")","{","\n","throw","SqlUtil",".","newContextException","(","getParserPosition","(",")",",\n","RESOURCE",".","numberLiteralOutOfRange","(","bd",".","toString","(",")",")",")",";","\n","}","\n","}","else","{","\n","return","bd",".","intValue","(",")",";","\n","}","\n","default:\n","throw","Util",".","unexpected","(","typeName",")",";","\n","}","\n"],"docstring_tokens":["Returns","the","integer","value","of","this","literal"]}
{"code_tokens":["\n","public","long","longValue","(","boolean","exact",")","{","\n","switch","(","typeName",")","{","\n","case","DECIMAL:\n","case","DOUBLE:\n","BigDecimal","bd","=","(","BigDecimal",")","requireNonNull","(","value,","\"value\"",")",";","\n","if","(","exact",")","{","\n","try","{","\n","return","bd",".","longValueExact","(",")",";","\n","}","catch","(","ArithmeticException","e",")","{","\n","throw","SqlUtil",".","newContextException","(","getParserPosition","(",")",",\n","RESOURCE",".","numberLiteralOutOfRange","(","bd",".","toString","(",")",")",")",";","\n","}","\n","}","else","{","\n","return","bd",".","longValue","(",")",";","\n","}","\n","default:\n","throw","Util",".","unexpected","(","typeName",")",";","\n","}","\n"],"docstring_tokens":["Returns","the","long","value","of","this","literal"]}
{"code_tokens":["\n","@Deprecated","//","to","be","removed","before","2",".","0\n","public","int","signum","(",")","{","\n","return","castNonNull","(","bigDecimalValue","(",")",")",".","compareTo","(","\n","BigDecimal",".","ZERO",")",";","\n"],"docstring_tokens":["Returns","sign","of","value"]}
{"code_tokens":["\n","public","static","SqlIntervalLiteral","createInterval","(","\n","int","sign,\n","String","intervalStr,\n","SqlIntervalQualifier","intervalQualifier,\n","SqlParserPos","pos",")","{","\n","return","new","SqlIntervalLiteral","(","sign,","intervalStr,","intervalQualifier,\n","intervalQualifier",".","typeName","(",")",",","pos",")",";","\n"],"docstring_tokens":["Creates","an","interval","literal"]}
{"code_tokens":["\n","public","static","SqlCharStringLiteral","createCharString","(","\n","String","s,\n","SqlParserPos","pos",")","{","\n","//","UnsupportedCharsetException","not","possible\n","return","createCharString","(","s,","null,","pos",")",";","\n"],"docstring_tokens":["Creates","a","string","literal","in","the","system","character","set"]}
{"code_tokens":["\n","public","static","SqlCharStringLiteral","createCharString","(","\n","String","s,\n","@Nullable","String","charSet,\n","SqlParserPos","pos",")","{","\n","NlsString","slit","=","new","NlsString","(","s,","charSet,","null",")",";","\n","return","new","SqlCharStringLiteral","(","slit,","pos",")",";","\n"],"docstring_tokens":["Creates","a","string","literal,","with","optional","character-set"]}
{"code_tokens":["\n","private","static","void","findRemovableSelfJoins","(","RelMetadataQuery","mq,","LoptMultiJoin","multiJoin",")","{","\n","//","Candidates","for","self-joins","must","be","simple","factors\n","Map<Integer,","RelOptTable>","simpleFactors","=","getSimpleFactors","(","mq,","multiJoin",")",";","\n\n","//","See","if","a","simple","factor","is","repeated","and","therefore","potentially","is\n","//","part","of","a","self-join",".","Restrict","each","factor","to","at","most","one\n","//","self-join",".","\n","final","List<RelOptTable>","repeatedTables","=","new","ArrayList<>","(",")",";","\n","final","Map<Integer,","Integer>","selfJoinPairs","=","new","HashMap<>","(",")",";","\n","@KeyFor","(","\"simpleFactors\"",")","Integer","[]","factors","=\n","new","TreeSet<>","(","simpleFactors",".","keySet","(",")",")",".","toArray","(","new","Integer[0]",")",";","\n","for","(","int","i","=","0",";","i","<","factors",".","length",";","i++",")","{","\n","if","(","repeatedTables",".","contains","(","simpleFactors",".","get","(","factors[i]",")",")",")","{","\n","continue",";","\n","}","\n","for","(","int","j","=","i","+","1",";","j","<","factors",".","length",";","j++",")","{","\n","@KeyFor","(","\"simpleFactors\"",")","int","leftFactor","=","factors[i]",";","\n","@KeyFor","(","\"simpleFactors\"",")","int","rightFactor","=","factors[j]",";","\n","if","(","simpleFactors",".","get","(","leftFactor",")",".","getQualifiedName","(",")",".","equals","(","\n","simpleFactors",".","get","(","rightFactor",")",".","getQualifiedName","(",")",")",")","{","\n","selfJoinPairs",".","put","(","leftFactor,","rightFactor",")",";","\n","repeatedTables",".","add","(","simpleFactors",".","get","(","leftFactor",")",")",";","\n","break",";","\n","}","\n","}","\n","}","\n\n","//","From","the","candidate","self-join","pairs,","determine","if","there","is\n","//","the","appropriate","join","condition","between","the","two","factors","that","will\n","//","allow","the","join","to","be","removed",".","\n","for","(","Integer","factor1",":","selfJoinPairs",".","keySet","(",")",")","{","\n","final","int","factor2","=","selfJoinPairs",".","get","(","factor1",")",";","\n","final","List<RexNode>","selfJoinFilters","=","new","ArrayList<>","(",")",";","\n","for","(","RexNode","filter",":","multiJoin",".","getJoinFilters","(",")",")","{","\n","ImmutableBitSet","joinFactors","=\n","multiJoin",".","getFactorsRefByJoinFilter","(","filter",")",";","\n","if","(","(","joinFactors",".","cardinality","(",")","==","2",")","\n","&&","joinFactors",".","get","(","factor1",")","\n","&&","joinFactors",".","get","(","factor2",")",")","{","\n","selfJoinFilters",".","add","(","filter",")",";","\n","}","\n","}","\n","if","(","(","selfJoinFilters",".","size","(",")",">","0",")","\n","&&","isSelfJoinFilterUnique","(","\n","mq,\n","multiJoin,\n","factor1,\n","factor2,\n","selfJoinFilters",")",")","{","\n","multiJoin",".","addRemovableSelfJoinPair","(","factor1,","factor2",")",";","\n","}","\n","}","\n"],"docstring_tokens":["Locates","pairs","of","joins","that","are","self-joins","where","the","join","can","be","removed","because","the","join","condition","between","the","two","factors","is","an","equality","join","on","unique","keys"]}
{"code_tokens":["\n","private","static","boolean","isSelfJoinFilterUnique","(","\n","RelMetadataQuery","mq,\n","LoptMultiJoin","multiJoin,\n","int","leftFactor,\n","int","rightFactor,\n","List<RexNode>","joinFilterList",")","{","\n","RexBuilder","rexBuilder","=\n","multiJoin",".","getMultiJoinRel","(",")",".","getCluster","(",")",".","getRexBuilder","(",")",";","\n","RelNode","leftRel","=","multiJoin",".","getJoinFactor","(","leftFactor",")",";","\n","RelNode","rightRel","=","multiJoin",".","getJoinFactor","(","rightFactor",")",";","\n","RexNode","joinFilters","=\n","RexUtil",".","composeConjunction","(","rexBuilder,","joinFilterList",")",";","\n\n","//","Adjust","the","offsets","in","the","filter","by","shifting","the","left","factor\n","//","to","the","left","and","shifting","the","right","factor","to","the","left","and","then","back\n","//","to","the","right","by","the","number","of","fields","in","the","left\n","int","[]","adjustments","=","new","int[multiJoin",".","getNumTotalFields","(",")","]",";","\n","int","leftAdjust","=","multiJoin",".","getJoinStart","(","leftFactor",")",";","\n","int","nLeftFields","=","leftRel",".","getRowType","(",")",".","getFieldCount","(",")",";","\n","for","(","int","i","=","0",";","i","<","nLeftFields",";","i++",")","{","\n","adjustments[leftAdjust","+","i]","=","-leftAdjust",";","\n","}","\n","int","rightAdjust","=","multiJoin",".","getJoinStart","(","rightFactor",")",";","\n","for","(","int","i","=","0",";","i","<","rightRel",".","getRowType","(",")",".","getFieldCount","(",")",";","i++",")","{","\n","adjustments[rightAdjust","+","i]","=","-rightAdjust","+","nLeftFields",";","\n","}","\n","joinFilters","=\n","joinFilters",".","accept","(","\n","new","RelOptUtil",".","RexInputConverter","(","\n","rexBuilder,\n","multiJoin",".","getMultiJoinFields","(",")",",\n","leftRel",".","getRowType","(",")",".","getFieldList","(",")",",\n","rightRel",".","getRowType","(",")",".","getFieldList","(",")",",\n","adjustments",")",")",";","\n\n","return","areSelfJoinKeysUnique","(","mq,","leftRel,","rightRel,","joinFilters",")",";","\n"],"docstring_tokens":["Determines","if","the","equality","join","filters","between","two","factors","that","map","to","the","same","table","consist","of","unique,","identical","keys"]}
{"code_tokens":["\n","private","static","void","findBestOrderings","(","\n","RelMetadataQuery","mq,\n","RelBuilder","relBuilder,\n","LoptMultiJoin","multiJoin,\n","LoptSemiJoinOptimizer","semiJoinOpt,\n","RelOptRuleCall","call",")","{","\n","final","List<RelNode>","plans","=","new","ArrayList<>","(",")",";","\n\n","final","List<String>","fieldNames","=\n","multiJoin",".","getMultiJoinRel","(",")",".","getRowType","(",")",".","getFieldNames","(",")",";","\n\n","//","generate","the","N","join","orderings\n","for","(","int","i","=","0",";","i","<","multiJoin",".","getNumJoinFactors","(",")",";","i++",")","{","\n","//","first","factor","cannot","be","null","generating\n","if","(","multiJoin",".","isNullGenerating","(","i",")",")","{","\n","continue",";","\n","}","\n","LoptJoinTree","joinTree","=\n","createOrdering","(","\n","mq,\n","relBuilder,\n","multiJoin,\n","semiJoinOpt,\n","i",")",";","\n","if","(","joinTree","==","null",")","{","\n","continue",";","\n","}","\n\n","RelNode","newProject","=\n","createTopProject","(","call",".","builder","(",")",",","multiJoin,","joinTree,","fieldNames",")",";","\n","plans",".","add","(","newProject",")",";","\n","}","\n\n","//","transform","the","selected","plans",";","note","that","we","wait","till","then","the","end","to\n","//","transform","everything","so","any","intermediate","RelNodes","we","create","are","not\n","//","converted","to","RelSubsets","The","HEP","planner","will","choose","the","join","subtree\n","//","with","the","best","cumulative","cost",".","Volcano","planner","keeps","the","alternative\n","//","join","subtrees","and","cost","the","final","plan","to","pick","the","best","one",".","\n","for","(","RelNode","plan",":","plans",")","{","\n","call",".","transformTo","(","plan",")",";","\n","}","\n"],"docstring_tokens":["Generates","N","optimal","join","orderings"]}
{"code_tokens":["\n","private","static","@Nullable","Double","computeJoinCardinality","(","\n","RelMetadataQuery","mq,\n","LoptMultiJoin","multiJoin,\n","LoptSemiJoinOptimizer","semiJoinOpt,\n","LoptJoinTree","joinTree,\n","List<RexNode>","filters,\n","int","factor",")","{","\n","final","ImmutableBitSet","childFactors","=\n","ImmutableBitSet",".","builder","(",")","\n",".","addAll","(","joinTree",".","getTreeOrder","(",")",")","\n",".","set","(","factor",")","\n",".","build","(",")",";","\n\n","int","factorStart","=","multiJoin",".","getJoinStart","(","factor",")",";","\n","int","nFields","=","multiJoin",".","getNumFieldsInJoinFactor","(","factor",")",";","\n","final","ImmutableBitSet",".","Builder","joinKeys","=","ImmutableBitSet",".","builder","(",")",";","\n\n","//","first","loop","through","the","inner","join","filters,","picking","out","the","ones\n","//","that","reference","only","the","factors","in","either","the","join","tree","or","the\n","//","factor","that","will","be","added\n","setFactorJoinKeys","(","\n","multiJoin,\n","filters,\n","childFactors,\n","factorStart,\n","nFields,\n","joinKeys",")",";","\n\n","//","then","loop","through","the","outer","join","filters","where","the","factor","being\n","//","added","is","the","null","generating","factor","in","the","outer","join\n","setFactorJoinKeys","(","\n","multiJoin,\n","RelOptUtil",".","conjunctions","(","multiJoin",".","getOuterJoinCond","(","factor",")",")",",\n","childFactors,\n","factorStart,\n","nFields,\n","joinKeys",")",";","\n\n","//","if","the","join","tree","doesn't","contain","all","the","necessary","factors","in\n","//","any","of","the","join","filters,","then","joinKeys","will","be","empty,","so","return\n","//","null","in","that","case\n","if","(","joinKeys",".","isEmpty","(",")",")","{","\n","return","null",";","\n","}","else","{","\n","return","mq",".","getDistinctRowCount","(","semiJoinOpt",".","getChosenSemiJoin","(","factor",")",",\n","joinKeys",".","build","(",")",",","null",")",";","\n","}","\n"],"docstring_tokens":["Computes","the","cardinality","of","the","join","columns","from","a","particular","factor,","when","that","factor","is","joined","with","another","join","tree"]}
{"code_tokens":["\n","private","static","@Nullable","LoptJoinTree","createOrdering","(","\n","RelMetadataQuery","mq,\n","RelBuilder","relBuilder,\n","LoptMultiJoin","multiJoin,\n","LoptSemiJoinOptimizer","semiJoinOpt,\n","int","firstFactor",")","{","\n","LoptJoinTree","joinTree","=","null",";","\n","final","int","nJoinFactors","=","multiJoin",".","getNumJoinFactors","(",")",";","\n","final","BitSet","factorsToAdd","=","BitSets",".","range","(","0,","nJoinFactors",")",";","\n","final","BitSet","factorsAdded","=","new","BitSet","(","nJoinFactors",")",";","\n","final","List<RexNode>","filtersToAdd","=\n","new","ArrayList<>","(","multiJoin",".","getJoinFilters","(",")",")",";","\n\n","int","prevFactor","=","-1",";","\n","while","(","factorsToAdd",".","cardinality","(",")",">","0",")","{","\n","int","nextFactor",";","\n","boolean","selfJoin","=","false",";","\n","if","(","factorsAdded",".","cardinality","(",")","==","0",")","{","\n","nextFactor","=","firstFactor",";","\n","}","else","{","\n","//","If","the","factor","just","added","is","part","of","a","removable","self-join\n","//","and","the","other","half","of","the","self-join","hasn't","been","added","yet,\n","//","then","add","it","next",".","Otherwise,","look","for","the","optimal","factor\n","//","to","add","next",".","\n","Integer","selfJoinFactor","=\n","multiJoin",".","getOtherSelfJoinFactor","(","prevFactor",")",";","\n","if","(","(","selfJoinFactor","!=","null",")","\n","&&","!factorsAdded",".","get","(","selfJoinFactor",")",")","{","\n","nextFactor","=","selfJoinFactor",";","\n","selfJoin","=","true",";","\n","}","else","{","\n","nextFactor","=\n","getBestNextFactor","(","\n","mq,\n","multiJoin,\n","factorsToAdd,\n","factorsAdded,\n","semiJoinOpt,\n","joinTree,\n","filtersToAdd",")",";","\n","}","\n","}","\n\n","//","add","the","factor",";","pass","in","a","bitmap","representing","the","factors\n","//","this","factor","joins","with","that","have","already","been","added","to\n","//","the","tree\n","BitSet","factorsNeeded","=\n","multiJoin",".","getFactorsRefByFactor","(","nextFactor",")",".","toBitSet","(",")",";","\n","if","(","multiJoin",".","isNullGenerating","(","nextFactor",")",")","{","\n","factorsNeeded",".","or","(","multiJoin",".","getOuterJoinFactors","(","nextFactor",")",".","toBitSet","(",")",")",";","\n","}","\n","factorsNeeded",".","and","(","factorsAdded",")",";","\n","joinTree","=\n","addFactorToTree","(","\n","mq,\n","relBuilder,\n","multiJoin,\n","semiJoinOpt,\n","joinTree,\n","nextFactor,\n","factorsNeeded,\n","filtersToAdd,\n","selfJoin",")",";","\n","if","(","joinTree","==","null",")","{","\n","return","null",";","\n","}","\n","factorsToAdd",".","clear","(","nextFactor",")",";","\n","factorsAdded",".","set","(","nextFactor",")",";","\n","prevFactor","=","nextFactor",";","\n","}","\n\n","assert","filtersToAdd",".","size","(",")","==","0",";","\n","return","joinTree",";","\n"],"docstring_tokens":["Generates","a","join","tree","with","a","specific","factor","as","the","first","factor","in","the","join","tree"]}
{"code_tokens":["\n","private","static","int","getBestNextFactor","(","\n","RelMetadataQuery","mq,\n","LoptMultiJoin","multiJoin,\n","BitSet","factorsToAdd,\n","BitSet","factorsAdded,\n","LoptSemiJoinOptimizer","semiJoinOpt,\n","@Nullable","LoptJoinTree","joinTree,\n","List<RexNode>","filtersToAdd",")","{","\n","//","iterate","through","the","remaining","factors","and","determine","the\n","//","best","one","to","add","next\n","int","nextFactor","=","-1",";","\n","int","bestWeight","=","0",";","\n","Double","bestCardinality","=","null",";","\n","int","[][]","factorWeights","=","multiJoin",".","getFactorWeights","(",")",";","\n","for","(","int","factor",":","BitSets",".","toIter","(","factorsToAdd",")",")","{","\n","//","if","the","factor","corresponds","to","a","dimension","table","whose\n","//","join","we","can","remove,","make","sure","the","the","corresponding","fact\n","//","table","is","in","the","current","join","tree\n","Integer","factIdx","=","multiJoin",".","getJoinRemovalFactor","(","factor",")",";","\n","if","(","factIdx","!=","null",")","{","\n","if","(","!factorsAdded",".","get","(","factIdx",")",")","{","\n","continue",";","\n","}","\n","}","\n\n","//","can't","add","a","null-generating","factor","if","its","dependent,\n","//","non-null","generating","factors","haven't","been","added","yet\n","if","(","multiJoin",".","isNullGenerating","(","factor",")","\n","&&","!BitSets",".","contains","(","factorsAdded,\n","multiJoin",".","getOuterJoinFactors","(","factor",")",")",")","{","\n","continue",";","\n","}","\n\n","//","determine","the","best","weight","between","the","current","factor\n","//","under","consideration","and","the","factors","that","have","already\n","//","been","added","to","the","tree\n","int","dimWeight","=","0",";","\n","for","(","int","prevFactor",":","BitSets",".","toIter","(","factorsAdded",")",")","{","\n","int[]","factorWeight","=","requireNonNull","(","factorWeights,","\"factorWeights\"",")","[prevFactor]",";","\n","if","(","factorWeight[factor]",">","dimWeight",")","{","\n","dimWeight","=","factorWeight[factor]",";","\n","}","\n","}","\n\n","//","only","compute","the","join","cardinality","if","we","know","that\n","//","this","factor","joins","with","some","part","of","the","current","join\n","//","tree","and","is","potentially","better","than","other","factors\n","//","already","considered\n","Double","cardinality","=","null",";","\n","if","(","(","dimWeight",">","0",")","\n","&&","(","(","dimWeight",">","bestWeight",")","||","(","dimWeight","==","bestWeight",")",")",")","{","\n","cardinality","=\n","computeJoinCardinality","(","\n","mq,\n","multiJoin,\n","semiJoinOpt,\n","requireNonNull","(","joinTree,","\"joinTree\"",")",",\n","filtersToAdd,\n","factor",")",";","\n","}","\n\n","//","if","two","factors","have","the","same","weight,","pick","the","one\n","//","with","the","higher","cardinality","join","key,","relative","to\n","//","the","join","being","considered\n","if","(","(","dimWeight",">","bestWeight",")","\n","||","(","(","dimWeight","==","bestWeight",")","\n","&&","(","(","bestCardinality","==","null",")","\n","||","(","(","cardinality","!=","null",")","\n","&&","(","cardinality",">","bestCardinality",")",")",")",")",")","{","\n","nextFactor","=","factor",";","\n","bestWeight","=","dimWeight",";","\n","bestCardinality","=","cardinality",";","\n","}","\n","}","\n\n","return","nextFactor",";","\n"],"docstring_tokens":["Determines","the","best","factor","to","be","added","next","into","a","join","tree"]}
{"code_tokens":["\n","private","static","@Nullable","LoptJoinTree","pushDownFactor","(","\n","RelMetadataQuery","mq,\n","RelBuilder","relBuilder,\n","LoptMultiJoin","multiJoin,\n","LoptSemiJoinOptimizer","semiJoinOpt,\n","LoptJoinTree","joinTree,\n","int","factorToAdd,\n","BitSet","factorsNeeded,\n","List<RexNode>","filtersToAdd,\n","boolean","selfJoin",")","{","\n","//","pushdown","option","only","works","if","we","already","have","a","join","tree\n","if","(","!isJoinTree","(","joinTree",".","getJoinTree","(",")",")",")","{","\n","return","null",";","\n","}","\n","int","childNo","=","-1",";","\n","LoptJoinTree","left","=","joinTree",".","getLeft","(",")",";","\n","LoptJoinTree","right","=","joinTree",".","getRight","(",")",";","\n","Join","joinRel","=","(","Join",")","joinTree",".","getJoinTree","(",")",";","\n","JoinRelType","joinType","=","joinRel",".","getJoinType","(",")",";","\n\n","//","can't","push","factors","pass","self-joins","because","in","order","to","later","remove\n","//","them,","we","need","to","keep","the","factors","together\n","if","(","joinTree",".","isRemovableSelfJoin","(",")",")","{","\n","return","null",";","\n","}","\n\n","//","If","there","are","no","constraints","as","to","which","side","the","factor","must\n","//","be","pushed,","arbitrarily","push","to","the","left",".","In","the","case","of","a\n","//","self-join,","always","push","to","the","input","that","contains","the","other\n","//","half","of","the","self-join",".","\n","if","(","selfJoin",")","{","\n","BitSet","selfJoinFactor","=","new","BitSet","(","multiJoin",".","getNumJoinFactors","(",")",")",";","\n","Integer","factor","=","requireNonNull","(","multiJoin",".","getOtherSelfJoinFactor","(","factorToAdd",")",",\n","(",")","->","\"multiJoin",".","getOtherSelfJoinFactor","(","\"","+","factorToAdd","+","\"",")","is","null\"",")",";","\n","selfJoinFactor",".","set","(","factor",")",";","\n","if","(","multiJoin",".","hasAllFactors","(","left,","selfJoinFactor",")",")","{","\n","childNo","=","0",";","\n","}","else","{","\n","assert","multiJoin",".","hasAllFactors","(","right,","selfJoinFactor",")",";","\n","childNo","=","1",";","\n","}","\n","}","else","if","(","\n","(","factorsNeeded",".","cardinality","(",")","==","0",")","\n","&&","!joinType",".","generatesNullsOnLeft","(",")",")","{","\n","childNo","=","0",";","\n","}","else","{","\n","//","push","to","the","left","if","the","LHS","contains","all","factors","that","the\n","//","current","factor","needs","and","that","side","is","not","null-generating",";","\n","//","same","check","for","RHS\n","if","(","multiJoin",".","hasAllFactors","(","left,","factorsNeeded",")","\n","&&","!joinType",".","generatesNullsOnLeft","(",")",")","{","\n","childNo","=","0",";","\n","}","else","if","(","\n","multiJoin",".","hasAllFactors","(","right,","factorsNeeded",")","\n","&&","!joinType",".","generatesNullsOnRight","(",")",")","{","\n","childNo","=","1",";","\n","}","\n","//","if","it","couldn't","be","pushed","down","to","either","side,","then","it","can\n","//","only","be","put","on","top\n","}","\n","if","(","childNo","==","-1",")","{","\n","return","null",";","\n","}","\n\n","//","remember","the","original","join","order","before","the","pushdown","so","we","can\n","//","appropriately","adjust","any","filters","already","attached","to","the","join\n","//","node\n","final","List<Integer>","origJoinOrder","=","joinTree",".","getTreeOrder","(",")",";","\n\n","//","recursively","pushdown","the","factor\n","LoptJoinTree","subTree","=","(","childNo","==","0",")","?","left",":","right",";","\n","subTree","=\n","addFactorToTree","(","\n","mq,\n","relBuilder,\n","multiJoin,\n","semiJoinOpt,\n","subTree,\n","factorToAdd,\n","factorsNeeded,\n","filtersToAdd,\n","selfJoin",")",";","\n\n","if","(","childNo","==","0",")","{","\n","left","=","subTree",";","\n","}","else","{","\n","right","=","subTree",";","\n","}","\n\n","//","adjust","the","join","condition","from","the","original","join","tree","to","reflect\n","//","pushdown","of","the","new","factor","as","well","as","any","swapping","that","may","have\n","//","been","done","during","the","pushdown\n","RexNode","newCondition","=\n","(","(","Join",")","joinTree",".","getJoinTree","(",")",")",".","getCondition","(",")",";","\n","newCondition","=\n","adjustFilter","(","\n","multiJoin,\n","requireNonNull","(","left,","\"left\"",")",",\n","requireNonNull","(","right,","\"right\"",")",",\n","newCondition,\n","factorToAdd,\n","origJoinOrder,\n","joinTree",".","getJoinTree","(",")",".","getRowType","(",")",".","getFieldList","(",")",")",";","\n\n","//","determine","if","additional","filters","apply","as","a","result","of","adding","the\n","//","new","factor,","provided","this","isn't","a","left","or","right","outer","join",";","for\n","//","those","cases,","the","additional","filters","will","be","added","on","top","of","the\n","//","join","in","createJoinSubtree\n","if","(","(","joinType","!=","JoinRelType",".","LEFT",")","&&","(","joinType","!=","JoinRelType",".","RIGHT",")",")","{","\n","RexNode","condition","=\n","addFilters","(","\n","multiJoin,\n","left,\n","-1,\n","right,\n","filtersToAdd,\n","true",")",";","\n","RexBuilder","rexBuilder","=\n","multiJoin",".","getMultiJoinRel","(",")",".","getCluster","(",")",".","getRexBuilder","(",")",";","\n","newCondition","=\n","RelOptUtil",".","andJoinFilters","(","\n","rexBuilder,\n","newCondition,\n","condition",")",";","\n","}","\n\n","//","create","the","new","join","tree","with","the","factor","pushed","down\n","return","createJoinSubtree","(","\n","mq,\n","relBuilder,\n","multiJoin,\n","left,\n","right,\n","newCondition,\n","joinType,\n","filtersToAdd,\n","false,\n","false",")",";","\n"],"docstring_tokens":["Creates","a","join","tree","where","the","new","factor","is","pushed","down","one","of","the","operands","of","the","current","join","tree"]}
{"code_tokens":["\n","private","static","@Nullable","LoptJoinTree","addToTop","(","\n","RelMetadataQuery","mq,\n","RelBuilder","relBuilder,\n","LoptMultiJoin","multiJoin,\n","LoptSemiJoinOptimizer","semiJoinOpt,\n","LoptJoinTree","joinTree,\n","int","factorToAdd,\n","List<RexNode>","filtersToAdd,\n","boolean","selfJoin",")","{","\n","//","self-joins","can","never","be","created","at","the","top","of","an","existing\n","//","join","tree","because","it","needs","to","be","paired","directly","with","the\n","//","other","self-join","factor\n","if","(","selfJoin","&&","isJoinTree","(","joinTree",".","getJoinTree","(",")",")",")","{","\n","return","null",";","\n","}","\n\n","//","if","the","factor","being","added","is","null-generating,","create","the","join\n","//","as","a","left","outer","join","since","it's","being","added","to","the","RHS","side","of\n","//","the","join",";","createJoinSubTree","may","swap","the","inputs","and","therefore\n","//","convert","the","left","outer","join","to","a","right","outer","join",";","if","the","original\n","//","MultiJoin","was","a","full","outer","join,","these","should","be","the","only\n","//","factors","in","the","join,","so","create","the","join","as","a","full","outer","join\n","JoinRelType","joinType",";","\n","if","(","multiJoin",".","getMultiJoinRel","(",")",".","isFullOuterJoin","(",")",")","{","\n","assert","multiJoin",".","getNumJoinFactors","(",")","==","2",";","\n","joinType","=","JoinRelType",".","FULL",";","\n","}","else","if","(","multiJoin",".","isNullGenerating","(","factorToAdd",")",")","{","\n","joinType","=","JoinRelType",".","LEFT",";","\n","}","else","{","\n","joinType","=","JoinRelType",".","INNER",";","\n","}","\n\n","LoptJoinTree","rightTree","=\n","new","LoptJoinTree","(","\n","semiJoinOpt",".","getChosenSemiJoin","(","factorToAdd",")",",\n","factorToAdd",")",";","\n\n","//","in","the","case","of","a","left","or","right","outer","join,","use","the","specific\n","//","outer","join","condition\n","RexNode","condition",";","\n","if","(","(","joinType","==","JoinRelType",".","LEFT",")","||","(","joinType","==","JoinRelType",".","RIGHT",")",")","{","\n","condition","=","requireNonNull","(","multiJoin",".","getOuterJoinCond","(","factorToAdd",")",",\n","\"multiJoin",".","getOuterJoinCond","(","factorToAdd",")","\"",")",";","\n","}","else","{","\n","condition","=\n","addFilters","(","\n","multiJoin,\n","joinTree,\n","-1,\n","rightTree,\n","filtersToAdd,\n","false",")",";","\n","}","\n\n","return","createJoinSubtree","(","\n","mq,\n","relBuilder,\n","multiJoin,\n","joinTree,\n","rightTree,\n","condition,\n","joinType,\n","filtersToAdd,\n","true,\n","selfJoin",")",";","\n"],"docstring_tokens":["Creates","a","join","tree","with","the","new","factor","added","to","the","top","of","the","tree"]}
{"code_tokens":["\n","private","static","RexNode","adjustFilter","(","\n","LoptMultiJoin","multiJoin,\n","LoptJoinTree","left,\n","LoptJoinTree","right,\n","RexNode","condition,\n","int","factorAdded,\n","List<Integer>","origJoinOrder,\n","List<RelDataTypeField>","origFields",")","{","\n","final","List<Integer>","newJoinOrder","=","new","ArrayList<>","(",")",";","\n","left",".","getTreeOrder","(","newJoinOrder",")",";","\n","right",".","getTreeOrder","(","newJoinOrder",")",";","\n\n","int","totalFields","=\n","left",".","getJoinTree","(",")",".","getRowType","(",")",".","getFieldCount","(",")","\n","+","right",".","getJoinTree","(",")",".","getRowType","(",")",".","getFieldCount","(",")","\n","-","multiJoin",".","getNumFieldsInJoinFactor","(","factorAdded",")",";","\n","int","[]","adjustments","=","new","int[totalFields]",";","\n\n","//","go","through","each","factor","and","adjust","relative","to","the","original\n","//","join","order\n","boolean","needAdjust","=","false",";","\n","int","nFieldsNew","=","0",";","\n","for","(","int","newPos","=","0",";","newPos","<","newJoinOrder",".","size","(",")",";","newPos++",")","{","\n","int","nFieldsOld","=","0",";","\n\n","//","no","need","to","make","any","adjustments","on","the","newly","added","factor\n","int","factor","=","newJoinOrder",".","get","(","newPos",")",";","\n","if","(","factor","!=","factorAdded",")","{","\n","//","locate","the","position","of","the","factor","in","the","original","join\n","//","ordering\n","for","(","int","pos",":","origJoinOrder",")","{","\n","if","(","factor","==","pos",")","{","\n","break",";","\n","}","\n","nFieldsOld","+=","multiJoin",".","getNumFieldsInJoinFactor","(","pos",")",";","\n","}","\n\n","//","fill","in","the","adjustment","array","for","this","factor\n","if","(","remapJoinReferences","(","\n","multiJoin,\n","factor,\n","newJoinOrder,\n","newPos,\n","adjustments,\n","nFieldsOld,\n","nFieldsNew,\n","false",")",")","{","\n","needAdjust","=","true",";","\n","}","\n","}","\n","nFieldsNew","+=","multiJoin",".","getNumFieldsInJoinFactor","(","factor",")",";","\n","}","\n\n","if","(","needAdjust",")","{","\n","RexBuilder","rexBuilder","=\n","multiJoin",".","getMultiJoinRel","(",")",".","getCluster","(",")",".","getRexBuilder","(",")",";","\n","condition","=\n","condition",".","accept","(","\n","new","RelOptUtil",".","RexInputConverter","(","\n","rexBuilder,\n","origFields,\n","left",".","getJoinTree","(",")",".","getRowType","(",")",".","getFieldList","(",")",",\n","right",".","getJoinTree","(",")",".","getRowType","(",")",".","getFieldList","(",")",",\n","adjustments",")",")",";","\n","}","\n\n","return","condition",";","\n"],"docstring_tokens":["Adjusts","a","filter","to","reflect","a","newly","added","factor","in","the","middle","of","an","existing","join","tree"]}
{"code_tokens":["\n","private","static","RexNode","swapFilter","(","\n","RexBuilder","rexBuilder,\n","LoptMultiJoin","multiJoin,\n","LoptJoinTree","origLeft,\n","LoptJoinTree","origRight,\n","RexNode","condition",")","{","\n","int","nFieldsOnLeft","=\n","origLeft",".","getJoinTree","(",")",".","getRowType","(",")",".","getFieldCount","(",")",";","\n","int","nFieldsOnRight","=\n","origRight",".","getJoinTree","(",")",".","getRowType","(",")",".","getFieldCount","(",")",";","\n","int","[]","adjustments","=","new","int[nFieldsOnLeft","+","nFieldsOnRight]",";","\n\n","for","(","int","i","=","0",";","i","<","nFieldsOnLeft",";","i++",")","{","\n","adjustments[i]","=","nFieldsOnRight",";","\n","}","\n","for","(","int","i","=","nFieldsOnLeft",";","i","<","(","nFieldsOnLeft","+","nFieldsOnRight",")",";","i++",")","{","\n","adjustments[i]","=","-nFieldsOnLeft",";","\n","}","\n\n","condition","=\n","condition",".","accept","(","\n","new","RelOptUtil",".","RexInputConverter","(","\n","rexBuilder,\n","multiJoin",".","getJoinFields","(","origLeft,","origRight",")",",\n","multiJoin",".","getJoinFields","(","origRight,","origLeft",")",",\n","adjustments",")",")",";","\n\n","return","condition",";","\n"],"docstring_tokens":["Adjusts","a","filter","to","reflect","swapping","of","join","inputs"]}
{"code_tokens":["\n","private","static","RexNode","rewriteSome","(","RexSubQuery","e,","Set<CorrelationId>","variablesSet,\n","RelBuilder","builder",")","{","\n","//","Most","general","case,","where","the","left","and","right","keys","might","have","nulls,","and\n","//","caller","requires","3-valued","logic","return",".","\n","//\n","//","select","e",".","deptno,","e",".","deptno","<","some","(","select","deptno","from","emp",")","as","v\n","//","from","emp","as","e\n","//\n","//","becomes\n","//\n","//","select","e",".","deptno,\n","//","case\n","//","when","q",".","c","=","0","then","false","//","sub-query","is","empty\n","//","when","(","e",".","deptno","<","q",".","m",")","is","true","then","true\n","//","when","q",".","c",">","q",".","d","then","unknown","//","sub-query","has","at","least","one","null\n","//","else","e",".","deptno","<","q",".","m\n","//","end","as","v\n","//","from","emp","as","e\n","//","cross","join","(","\n","//","select","max","(","deptno",")","as","m,","count","(","*",")","as","c,","count","(","deptno",")","as","d\n","//","from","emp",")","as","q\n","//\n","final","SqlQuantifyOperator","op","=","(","SqlQuantifyOperator",")","e",".","op",";","\n","switch","(","op",".","comparisonKind",")","{","\n","case","GREATER_THAN_OR_EQUAL:\n","case","LESS_THAN_OR_EQUAL:\n","case","LESS_THAN:\n","case","GREATER_THAN:\n","case","NOT_EQUALS:\n","break",";","\n\n","default:\n","//","\"SOME","=\"","should","have","been","rewritten","into","IN",".","\n","throw","new","AssertionError","(","\"unexpected","\"","+","op",")",";","\n","}","\n\n","final","RexNode","caseRexNode",";","\n","final","RexNode","literalFalse","=","builder",".","literal","(","false",")",";","\n","final","RexNode","literalTrue","=","builder",".","literal","(","true",")",";","\n","final","RexLiteral","literalUnknown","=\n","builder",".","getRexBuilder","(",")",".","makeNullLiteral","(","literalFalse",".","getType","(",")",")",";","\n\n","final","SqlAggFunction","minMax","=","op",".","comparisonKind","==","SqlKind",".","GREATER_THAN\n","||","op",".","comparisonKind","==","SqlKind",".","GREATER_THAN_OR_EQUAL\n","?","SqlStdOperatorTable",".","MIN\n",":","SqlStdOperatorTable",".","MAX",";","\n\n","if","(","variablesSet",".","isEmpty","(",")",")","{","\n","switch","(","op",".","comparisonKind",")","{","\n","case","GREATER_THAN_OR_EQUAL:\n","case","LESS_THAN_OR_EQUAL:\n","case","LESS_THAN:\n","case","GREATER_THAN:\n","//","for","non-correlated","case","queries","such","as\n","//","select","e",".","deptno,","e",".","deptno","<","some","(","select","deptno","from","emp",")","as","v\n","//","from","emp","as","e\n","//\n","//","becomes\n","//\n","//","select","e",".","deptno,\n","//","case\n","//","when","q",".","c","=","0","then","false","//","sub-query","is","empty\n","//","when","(","e",".","deptno","<","q",".","m",")","is","true","then","true\n","//","when","q",".","c",">","q",".","d","then","unknown","//","sub-query","has","at","least","one","null\n","//","else","e",".","deptno","<","q",".","m\n","//","end","as","v\n","//","from","emp","as","e\n","//","cross","join","(","\n","//","select","max","(","deptno",")","as","m,","count","(","*",")","as","c,","count","(","deptno",")","as","d\n","//","from","emp",")","as","q\n","builder",".","push","(","e",".","rel",")","\n",".","aggregate","(","builder",".","groupKey","(",")",",\n","builder",".","aggregateCall","(","minMax,","builder",".","field","(","0",")",")",".","as","(","\"m\"",")",",\n","builder",".","count","(","false,","\"c\"",")",",\n","builder",".","count","(","false,","\"d\",","builder",".","field","(","0",")",")",")","\n",".","as","(","\"q\"",")","\n",".","join","(","JoinRelType",".","INNER",")",";","\n","caseRexNode","=","builder",".","call","(","SqlStdOperatorTable",".","CASE,\n","builder",".","equals","(","builder",".","field","(","\"q\",","\"c\"",")",",","builder",".","literal","(","0",")",")",",\n","literalFalse,\n","builder",".","call","(","SqlStdOperatorTable",".","IS_TRUE,\n","builder",".","call","(","RexUtil",".","op","(","op",".","comparisonKind",")",",\n","e",".","operands",".","get","(","0",")",",","builder",".","field","(","\"q\",","\"m\"",")",")",")",",\n","literalTrue,\n","builder",".","greaterThan","(","builder",".","field","(","\"q\",","\"c\"",")",",\n","builder",".","field","(","\"q\",","\"d\"",")",")",",\n","literalUnknown,\n","builder",".","call","(","RexUtil",".","op","(","op",".","comparisonKind",")",",\n","e",".","operands",".","get","(","0",")",",","builder",".","field","(","\"q\",","\"m\"",")",")",")",";","\n","break",";","\n\n","case","NOT_EQUALS:\n","//","for","non-correlated","case","queries","such","as\n","//","select","e",".","deptno,","e",".","deptno","<>","some","(","select","deptno","from","emp",")","as","v\n","//","from","emp","as","e\n","//\n","//","becomes\n","//\n","//","select","e",".","deptno,\n","//","case\n","//","when","q",".","c","=","0","then","false","//","sub-query","is","empty\n","//","when","e",".","deptno","is","null","then","unknown\n","//","when","q",".","c","<>","q",".","d","&&","q",".","d","<=","1","then","e",".","deptno","!=","m","||","unknown\n","//","when","q",".","d","=","1\n","//","then","e",".","deptno","!=","m","//","sub-query","has","the","distinct","result\n","//","else","true\n","//","end","as","v\n","//","from","emp","as","e\n","//","cross","join","(","\n","//","select","count","(","*",")","as","c,","count","(","deptno",")","as","d,","max","(","deptno",")","as","m\n","//","from","(","select","distinct","deptno","from","emp",")",")","as","q\n","builder",".","push","(","e",".","rel",")",";","\n","builder",".","distinct","(",")","\n",".","aggregate","(","builder",".","groupKey","(",")",",\n","builder",".","count","(","false,","\"c\"",")",",\n","builder",".","count","(","false,","\"d\",","builder",".","field","(","0",")",")",",\n","builder",".","max","(","builder",".","field","(","0",")",")",".","as","(","\"m\"",")",")","\n",".","as","(","\"q\"",")","\n",".","join","(","JoinRelType",".","INNER",")",";","\n","caseRexNode","=","builder",".","call","(","SqlStdOperatorTable",".","CASE,\n","builder",".","equals","(","builder",".","field","(","\"c\"",")",",","builder",".","literal","(","0",")",")",",\n","literalFalse,\n","builder",".","isNull","(","e",".","getOperands","(",")",".","get","(","0",")",")",",\n","literalUnknown,\n","builder",".","and","(","\n","builder",".","notEquals","(","builder",".","field","(","\"d\"",")",",","builder",".","field","(","\"c\"",")",")",",\n","builder",".","lessThanOrEqual","(","builder",".","field","(","\"d\"",")",",\n","builder",".","literal","(","1",")",")",")",",\n","builder",".","or","(","\n","builder",".","notEquals","(","e",".","operands",".","get","(","0",")",",","builder",".","field","(","\"q\",","\"m\"",")",")",",\n","literalUnknown",")",",\n","builder",".","equals","(","builder",".","field","(","\"d\"",")",",","builder",".","literal","(","1",")",")",",\n","builder",".","notEquals","(","e",".","operands",".","get","(","0",")",",","builder",".","field","(","\"q\",","\"m\"",")",")",",\n","literalTrue",")",";","\n","break",";","\n\n","default:\n","throw","new","AssertionError","(","\"not","possible","-","per","above","check\"",")",";","\n","}","\n","}","else","{","\n","final","String","indicator","=","\"trueLiteral\"",";","\n","final","List<RexNode>","parentQueryFields","=","new","ArrayList<>","(",")",";","\n","switch","(","op",".","comparisonKind",")","{","\n","case","GREATER_THAN_OR_EQUAL:\n","case","LESS_THAN_OR_EQUAL:\n","case","LESS_THAN:\n","case","GREATER_THAN:\n","//","for","correlated","case","queries","such","as\n","//\n","//","select","e",".","deptno,","e",".","deptno","<","some","(","\n","//","select","deptno","from","emp","where","emp",".","name","=","e",".","name",")","as","v\n","//","from","emp","as","e\n","//\n","//","becomes\n","//\n","//","select","e",".","deptno,\n","//","case\n","//","when","indicator","is","null","then","false","//","sub-query","is","empty","for","corresponding","corr","value\n","//","when","q",".","c","=","0","then","false","//","sub-query","is","empty\n","//","when","(","e",".","deptno","<","q",".","m",")","is","true","then","true\n","//","when","q",".","c",">","q",".","d","then","unknown","//","sub-query","has","at","least","one","null\n","//","else","e",".","deptno","<","q",".","m\n","//","end","as","v\n","//","from","emp","as","e\n","//","left","outer","join","(","\n","//","select","name,","max","(","deptno",")","as","m,","count","(","*",")","as","c,","count","(","deptno",")","as","d,\n","//","\"alwaysTrue\"","as","indicator\n","//","from","emp","group","by","name",")","as","q","on","e",".","name","=","q",".","name\n","builder",".","push","(","e",".","rel",")","\n",".","aggregate","(","builder",".","groupKey","(",")",",\n","builder",".","aggregateCall","(","minMax,","builder",".","field","(","0",")",")",".","as","(","\"m\"",")",",\n","builder",".","count","(","false,","\"c\"",")",",\n","builder",".","count","(","false,","\"d\",","builder",".","field","(","0",")",")",")",";","\n\n","parentQueryFields",".","addAll","(","builder",".","fields","(",")",")",";","\n","parentQueryFields",".","add","(","builder",".","alias","(","literalTrue,","indicator",")",")",";","\n","builder",".","project","(","parentQueryFields",")",".","as","(","\"q\"",")",";","\n","builder",".","join","(","JoinRelType",".","LEFT,","literalTrue,","variablesSet",")",";","\n","caseRexNode","=","builder",".","call","(","SqlStdOperatorTable",".","CASE,\n","builder",".","isNull","(","builder",".","field","(","\"q\",","indicator",")",")",",\n","literalFalse,\n","builder",".","equals","(","builder",".","field","(","\"q\",","\"c\"",")",",","builder",".","literal","(","0",")",")",",\n","literalFalse,\n","builder",".","call","(","SqlStdOperatorTable",".","IS_TRUE,\n","builder",".","call","(","RexUtil",".","op","(","op",".","comparisonKind",")",",\n","e",".","operands",".","get","(","0",")",",","builder",".","field","(","\"q\",","\"m\"",")",")",")",",\n","literalTrue,\n","builder",".","greaterThan","(","builder",".","field","(","\"q\",","\"c\"",")",",\n","builder",".","field","(","\"q\",","\"d\"",")",")",",\n","literalUnknown,\n","builder",".","call","(","RexUtil",".","op","(","op",".","comparisonKind",")",",\n","e",".","operands",".","get","(","0",")",",","builder",".","field","(","\"q\",","\"m\"",")",")",")",";","\n","break",";","\n\n","case","NOT_EQUALS:\n","//","for","correlated","case","queries","such","as\n","//\n","//","select","e",".","deptno,","e",".","deptno","<>","some","(","\n","//","select","deptno","from","emp","where","emp",".","name","=","e",".","name",")","as","v\n","//","from","emp","as","e\n","//\n","//","becomes\n","//\n","//","select","e",".","deptno,\n","//","case\n","//","when","indicator","is","null\n","//","then","false","//","sub-query","is","empty","for","corresponding","corr","value\n","//","when","q",".","c","=","0","then","false","//","sub-query","is","empty\n","//","when","e",".","deptno","is","null","then","unknown\n","//","when","q",".","c","<>","q",".","d","&&","q",".","d","<=","1\n","//","then","e",".","deptno","!=","m","||","unknown\n","//","when","q",".","d","=","1\n","//","then","e",".","deptno","!=","m","//","sub-query","has","the","distinct","result\n","//","else","true\n","//","end","as","v\n","//","from","emp","as","e\n","//","left","outer","join","(","\n","//","select","name,","count","(","distinct","*",")","as","c,","count","(","distinct","deptno",")","as","d,\n","//","max","(","deptno",")","as","m,","\"alwaysTrue\"","as","indicator\n","//","from","emp","group","by","name",")","as","q","on","e",".","name","=","q",".","name\n","builder",".","push","(","e",".","rel",")","\n",".","aggregate","(","builder",".","groupKey","(",")",",\n","builder",".","count","(","true,","\"c\"",")",",\n","builder",".","count","(","true,","\"d\",","builder",".","field","(","0",")",")",",\n","builder",".","max","(","builder",".","field","(","0",")",")",".","as","(","\"m\"",")",")",";","\n\n","parentQueryFields",".","addAll","(","builder",".","fields","(",")",")",";","\n","parentQueryFields",".","add","(","builder",".","alias","(","literalTrue,","indicator",")",")",";","\n","builder",".","project","(","parentQueryFields",")",".","as","(","\"q\"",")",";","//","TODO","use","projectPlus\n","builder",".","join","(","JoinRelType",".","LEFT,","literalTrue,","variablesSet",")",";","\n","caseRexNode","=","builder",".","call","(","SqlStdOperatorTable",".","CASE,\n","builder",".","isNull","(","builder",".","field","(","\"q\",","indicator",")",")",",\n","literalFalse,\n","builder",".","equals","(","builder",".","field","(","\"c\"",")",",","builder",".","literal","(","0",")",")",",\n","literalFalse,\n","builder",".","isNull","(","e",".","getOperands","(",")",".","get","(","0",")",")",",\n","literalUnknown,\n","builder",".","and","(","\n","builder",".","notEquals","(","builder",".","field","(","\"d\"",")",",","builder",".","field","(","\"c\"",")",")",",\n","builder",".","lessThanOrEqual","(","builder",".","field","(","\"d\"",")",",\n","builder",".","literal","(","1",")",")",")",",\n","builder",".","or","(","\n","builder",".","notEquals","(","e",".","operands",".","get","(","0",")",",","builder",".","field","(","\"q\",","\"m\"",")",")",",\n","literalUnknown",")",",\n","builder",".","equals","(","builder",".","field","(","\"d\"",")",",","builder",".","literal","(","1",")",")",",\n","builder",".","notEquals","(","e",".","operands",".","get","(","0",")",",","builder",".","field","(","\"q\",","\"m\"",")",")",",\n","literalTrue",")",";","\n","break",";","\n\n","default:\n","throw","new","AssertionError","(","\"not","possible","-","per","above","check\"",")",";","\n","}","\n","}","\n\n","//","CASE","statement","above","is","created","with","nullable","boolean","type,","but","it","might\n","//","not","be","correct",".","If","the","original","sub-query","node's","type","is","not","nullable","it\n","//","is","guaranteed","for","case","statement","to","not","produce","NULLs",".","Therefore","to","avoid\n","//","planner","complaining","we","need","to","add","cast",".","Note","that","nullable","type","is\n","//","created","due","to","the","MIN","aggregate","call,","since","there","is","no","GROUP","BY",".","\n","if","(","!e",".","getType","(",")",".","isNullable","(",")",")","{","\n","return","builder",".","cast","(","caseRexNode,","e",".","getType","(",")",".","getSqlTypeName","(",")",")",";","\n","}","\n","return","caseRexNode",";","\n"],"docstring_tokens":["Rewrites","a","SOME","sub-query","into","a","Join"]}
{"code_tokens":["\n","private","static","RexNode","rewriteExists","(","RexSubQuery","e,","Set<CorrelationId>","variablesSet,\n","RelOptUtil",".","Logic","logic,","RelBuilder","builder",")","{","\n","builder",".","push","(","e",".","rel",")",";","\n\n","builder",".","project","(","builder",".","alias","(","builder",".","literal","(","true",")",",","\"i\"",")",")",";","\n","switch","(","logic",")","{","\n","case","TRUE:\n","//","Handles","queries","with","single","EXISTS","in","filter","condition:\n","//","select","e",".","deptno","from","emp","as","e\n","//","where","exists","(","select","deptno","from","emp",")","\n","builder",".","aggregate","(","builder",".","groupKey","(","0",")",")",";","\n","builder",".","as","(","\"dt\"",")",";","\n","builder",".","join","(","JoinRelType",".","INNER,","builder",".","literal","(","true",")",",","variablesSet",")",";","\n","return","builder",".","literal","(","true",")",";","\n","default:\n","builder",".","distinct","(",")",";","\n","}","\n\n","builder",".","as","(","\"dt\"",")",";","\n\n","builder",".","join","(","JoinRelType",".","LEFT,","builder",".","literal","(","true",")",",","variablesSet",")",";","\n\n","return","builder",".","isNotNull","(","last","(","builder",".","fields","(",")",")",")",";","\n"],"docstring_tokens":["Rewrites","an","EXISTS","RexSubQuery","into","a","Join"]}
{"code_tokens":["\n","private","static","RexNode","rewriteIn","(","RexSubQuery","e,","Set<CorrelationId>","variablesSet,\n","RelOptUtil",".","Logic","logic,","RelBuilder","builder,","int","offset",")","{","\n","//","Most","general","case,","where","the","left","and","right","keys","might","have","nulls,","and\n","//","caller","requires","3-valued","logic","return",".","\n","//\n","//","select","e",".","deptno,","e",".","deptno","in","(","select","deptno","from","emp",")","\n","//","from","emp","as","e\n","//\n","//","becomes\n","//\n","//","select","e",".","deptno,\n","//","case\n","//","when","ct",".","c","=","0","then","false\n","//","when","e",".","deptno","is","null","then","null\n","//","when","dt",".","i","is","not","null","then","true\n","//","when","ct",".","ck","<","ct",".","c","then","null\n","//","else","false\n","//","end\n","//","from","emp","as","e\n","//","left","join","(","\n","//","(","select","count","(","*",")","as","c,","count","(","deptno",")","as","ck","from","emp",")","as","ct\n","//","cross","join","(","select","distinct","deptno,","true","as","i","from","emp",")",")","as","dt\n","//","on","e",".","deptno","=","dt",".","deptno\n","//\n","//","If","keys","are","not","null","we","can","remove","\"ct\"","and","simplify","to\n","//\n","//","select","e",".","deptno,\n","//","case\n","//","when","dt",".","i","is","not","null","then","true\n","//","else","false\n","//","end\n","//","from","emp","as","e\n","//","left","join","(","select","distinct","deptno,","true","as","i","from","emp",")","as","dt\n","//","on","e",".","deptno","=","dt",".","deptno\n","//\n","//","We","could","further","simplify","to\n","//\n","//","select","e",".","deptno,\n","//","dt",".","i","is","not","null\n","//","from","emp","as","e\n","//","left","join","(","select","distinct","deptno,","true","as","i","from","emp",")","as","dt\n","//","on","e",".","deptno","=","dt",".","deptno\n","//\n","//","but","have","not","yet",".","\n","//\n","//","If","the","logic","is","TRUE","we","can","just","kill","the","record","if","the","condition\n","//","evaluates","to","FALSE","or","UNKNOWN",".","Thus","the","query","simplifies","to","an","inner\n","//","join:\n","//\n","//","select","e",".","deptno,\n","//","true\n","//","from","emp","as","e\n","//","inner","join","(","select","distinct","deptno","from","emp",")","as","dt\n","//","on","e",".","deptno","=","dt",".","deptno\n","//\n\n","builder",".","push","(","e",".","rel",")",";","\n","final","List<RexNode>","fields","=","new","ArrayList<>","(","builder",".","fields","(",")",")",";","\n\n","//","for","the","case","when","IN","has","only","literal","operands,","it","may","be","handled\n","//","in","the","simpler","way:\n","//\n","//","select","e",".","deptno,","123456","in","(","select","deptno","from","emp",")","\n","//","from","emp","as","e\n","//\n","//","becomes\n","//\n","//","select","e",".","deptno,\n","//","case\n","//","when","dt",".","c","IS","NULL","THEN","FALSE\n","//","when","e",".","deptno","IS","NULL","THEN","NULL\n","//","when","dt",".","cs","IS","FALSE","THEN","NULL\n","//","when","dt",".","cs","IS","NOT","NULL","THEN","TRUE\n","//","else","false\n","//","end\n","//","from","emp","AS","e\n","//","cross","join","(","\n","//","select","distinct","deptno","is","not","null","as","cs,","count","(","*",")","as","c\n","//","from","emp\n","//","where","deptno","=","123456","or","deptno","is","null","or","e",".","deptno","is","null\n","//","order","by","cs","desc","limit","1",")","as","dt\n","//\n\n","boolean","allLiterals","=","RexUtil",".","allLiterals","(","e",".","getOperands","(",")",")",";","\n","final","List<RexNode>","expressionOperands","=","new","ArrayList<>","(","e",".","getOperands","(",")",")",";","\n\n","final","List<RexNode>","keyIsNulls","=","e",".","getOperands","(",")",".","stream","(",")","\n",".","filter","(","operand","->","operand",".","getType","(",")",".","isNullable","(",")",")","\n",".","map","(","builder::isNull",")","\n",".","collect","(","Collectors",".","toList","(",")",")",";","\n\n","final","RexLiteral","trueLiteral","=","builder",".","literal","(","true",")",";","\n","final","RexLiteral","falseLiteral","=","builder",".","literal","(","false",")",";","\n","final","RexLiteral","unknownLiteral","=\n","builder",".","getRexBuilder","(",")",".","makeNullLiteral","(","trueLiteral",".","getType","(",")",")",";","\n","if","(","allLiterals",")","{","\n","final","List<RexNode>","conditions","=\n","Pair",".","zip","(","expressionOperands,","fields",")",".","stream","(",")","\n",".","map","(","pair","->","builder",".","equals","(","pair",".","left,","pair",".","right",")",")","\n",".","collect","(","Collectors",".","toList","(",")",")",";","\n","switch","(","logic",")","{","\n","case","TRUE:\n","case","TRUE_FALSE:\n","builder",".","filter","(","conditions",")",";","\n","builder",".","project","(","builder",".","alias","(","trueLiteral,","\"cs\"",")",")",";","\n","builder",".","distinct","(",")",";","\n","break",";","\n","default:\n","List<RexNode>","isNullOperands","=","fields",".","stream","(",")","\n",".","map","(","builder::isNull",")","\n",".","collect","(","Collectors",".","toList","(",")",")",";","\n","//","uses","keyIsNulls","conditions","in","the","filter","to","avoid","empty","results\n","isNullOperands",".","addAll","(","keyIsNulls",")",";","\n","builder",".","filter","(","\n","builder",".","or","(","\n","builder",".","and","(","conditions",")",",\n","builder",".","or","(","isNullOperands",")",")",")",";","\n","RexNode","project","=","builder",".","and","(","\n","fields",".","stream","(",")","\n",".","map","(","builder::isNotNull",")","\n",".","collect","(","Collectors",".","toList","(",")",")",")",";","\n","builder",".","project","(","builder",".","alias","(","project,","\"cs\"",")",")",";","\n\n","if","(","variablesSet",".","isEmpty","(",")",")","{","\n","builder",".","aggregate","(","builder",".","groupKey","(","builder",".","field","(","\"cs\"",")",")",",\n","builder",".","count","(","false,","\"c\"",")",")",";","\n\n","//","sorts","input","with","desc","order","since","we","are","interested\n","//","only","in","the","case","when","one","of","the","values","is","true",".","\n","//","When","true","value","is","absent","then","we","are","interested\n","//","only","in","false","value",".","\n","builder",".","sortLimit","(","0,","1,\n","ImmutableList",".","of","(","builder",".","desc","(","builder",".","field","(","\"cs\"",")",")",")",")",";","\n","}","else","{","\n","builder",".","distinct","(",")",";","\n","}","\n","}","\n","//","clears","expressionOperands","and","fields","lists","since\n","//","all","expressions","were","used","in","the","filter\n","expressionOperands",".","clear","(",")",";","\n","fields",".","clear","(",")",";","\n","}","else","{","\n","switch","(","logic",")","{","\n","case","TRUE:\n","builder",".","aggregate","(","builder",".","groupKey","(","fields",")",")",";","\n","break",";","\n","case","TRUE_FALSE_UNKNOWN:\n","case","UNKNOWN_AS_TRUE:\n","//","Builds","the","cross","join\n","builder",".","aggregate","(","builder",".","groupKey","(",")",",\n","builder",".","count","(","false,","\"c\"",")",",\n","builder",".","count","(","builder",".","fields","(",")",")",".","as","(","\"ck\"",")",")",";","\n","builder",".","as","(","\"ct\"",")",";","\n","if","(","!variablesSet",".","isEmpty","(",")",")","{","\n","builder",".","join","(","JoinRelType",".","LEFT,","trueLiteral,","variablesSet",")",";","\n","}","else","{","\n","builder",".","join","(","JoinRelType",".","INNER,","trueLiteral,","variablesSet",")",";","\n","}","\n","offset","+=","2",";","\n","builder",".","push","(","e",".","rel",")",";","\n","//","fall","through\n","default:\n","fields",".","add","(","builder",".","alias","(","trueLiteral,","\"i\"",")",")",";","\n","builder",".","project","(","fields",")",";","\n","builder",".","distinct","(",")",";","\n","}","\n","}","\n\n","builder",".","as","(","\"dt\"",")",";","\n","int","refOffset","=","offset",";","\n","final","List<RexNode>","conditions","=\n","Pair",".","zip","(","expressionOperands,","builder",".","fields","(",")",")",".","stream","(",")","\n",".","map","(","pair","->","builder",".","equals","(","pair",".","left,","RexUtil",".","shift","(","pair",".","right,","refOffset",")",")",")","\n",".","collect","(","Collectors",".","toList","(",")",")",";","\n","switch","(","logic",")","{","\n","case","TRUE:\n","builder",".","join","(","JoinRelType",".","INNER,","builder",".","and","(","conditions",")",",","variablesSet",")",";","\n","return","trueLiteral",";","\n","default:\n","break",";","\n","}","\n","//","Now","the","left","join\n","builder",".","join","(","JoinRelType",".","LEFT,","builder",".","and","(","conditions",")",",","variablesSet",")",";","\n\n","final","ImmutableList",".","Builder<RexNode>","operands","=","ImmutableList",".","builder","(",")",";","\n","RexLiteral","b","=","trueLiteral",";","\n","switch","(","logic",")","{","\n","case","TRUE_FALSE_UNKNOWN:\n","b","=","unknownLiteral",";","\n","//","fall","through\n","case","UNKNOWN_AS_TRUE:\n","if","(","allLiterals",")","{","\n","//","Considers","case","when","right","side","of","IN","is","empty\n","//","for","the","case","of","non-correlated","sub-queries\n","if","(","variablesSet",".","isEmpty","(",")",")","{","\n","operands",".","add","(","\n","builder",".","isNull","(","builder",".","field","(","\"c\"",")",")",",\n","falseLiteral",")",";","\n","}","\n","operands",".","add","(","\n","builder",".","equals","(","builder",".","field","(","\"cs\"",")",",","falseLiteral",")",",\n","b",")",";","\n","}","else","{","\n","operands",".","add","(","\n","builder",".","equals","(","builder",".","field","(","\"ct\",","\"c\"",")",",","builder",".","literal","(","0",")",")",",\n","falseLiteral",")",";","\n","}","\n","break",";","\n","default:\n","break",";","\n","}","\n\n","if","(","!keyIsNulls",".","isEmpty","(",")",")","{","\n","operands",".","add","(","builder",".","or","(","keyIsNulls",")",",","unknownLiteral",")",";","\n","}","\n\n","if","(","allLiterals",")","{","\n","operands",".","add","(","builder",".","isNotNull","(","builder",".","field","(","\"cs\"",")",")",",\n","trueLiteral",")",";","\n","}","else","{","\n","operands",".","add","(","builder",".","isNotNull","(","last","(","builder",".","fields","(",")",")",")",",\n","trueLiteral",")",";","\n","}","\n\n","if","(","!allLiterals",")","{","\n","switch","(","logic",")","{","\n","case","TRUE_FALSE_UNKNOWN:\n","case","UNKNOWN_AS_TRUE:\n","operands",".","add","(","\n","builder",".","lessThan","(","builder",".","field","(","\"ct\",","\"ck\"",")",",\n","builder",".","field","(","\"ct\",","\"c\"",")",")",",\n","b",")",";","\n","break",";","\n","default:\n","break",";","\n","}","\n","}","\n","operands",".","add","(","falseLiteral",")",";","\n","return","builder",".","call","(","SqlStdOperatorTable",".","CASE,","operands",".","build","(",")",")",";","\n"],"docstring_tokens":["Rewrites","an","IN","RexSubQuery","into","a","Join"]}
{"code_tokens":["\n","@Deprecated","//","to","be","removed","before","2",".","0\n","public","SqlSelect","createCall","(","\n","SqlNodeList","keywordList,\n","SqlNodeList","selectList,\n","SqlNode","fromClause,\n","SqlNode","whereClause,\n","SqlNodeList","groupBy,\n","SqlNode","having,\n","SqlNodeList","windowDecls,\n","SqlNodeList","orderBy,\n","SqlNode","offset,\n","SqlNode","fetch,\n","SqlNodeList","hints,\n","SqlParserPos","pos",")","{","\n","return","new","SqlSelect","(","\n","pos,\n","keywordList,\n","selectList,\n","fromClause,\n","whereClause,\n","groupBy,\n","having,\n","windowDecls,\n","orderBy,\n","offset,\n","fetch,\n","hints",")",";","\n"],"docstring_tokens":["Creates","a","call","to","the","SELECT","operator"]}
{"code_tokens":["\n","private","RelBuilder","example1","(","RelBuilder","builder",")","{","\n","return","builder\n",".","scan","(","\"EMP\"",")",";","\n"],"docstring_tokens":["Creates","a","relational","expression","for","a","table","scan"]}
{"code_tokens":["\n","public","static","ImmutableSet<CorrelationId>","setOf","(","Set<String>","set",")","{","\n","if","(","set",".","isEmpty","(",")",")","{","\n","return","ImmutableSet",".","of","(",")",";","\n","}","\n","final","ImmutableSet",".","Builder<CorrelationId>","builder","=","ImmutableSet",".","builder","(",")",";","\n","for","(","String","s",":","set",")","{","\n","builder",".","add","(","new","CorrelationId","(","s",")",")",";","\n","}","\n","return","builder",".","build","(",")",";","\n"],"docstring_tokens":["Converts","a","set","of","correlation","ids","to","a","set","of","names"]}
{"code_tokens":["\n","public","static","Set<String>","names","(","Set<CorrelationId>","set",")","{","\n","if","(","set",".","isEmpty","(",")",")","{","\n","return","ImmutableSet",".","of","(",")",";","\n","}","\n","final","ImmutableSet",".","Builder<String>","builder","=","ImmutableSet",".","builder","(",")",";","\n","for","(","CorrelationId","s",":","set",")","{","\n","builder",".","add","(","s",".","name",")",";","\n","}","\n","return","builder",".","build","(",")",";","\n"],"docstring_tokens":["Converts","a","set","of","names","to","a","set","of","correlation","ids"]}
{"code_tokens":["\n","@Override","public","RelDataType","rowDataType","(","final","String","topicName",")","{","\n","final","RelDataTypeFactory","typeFactory","=\n","new","SqlTypeFactoryImpl","(","RelDataTypeSystem",".","DEFAULT",")",";","\n","final","RelDataTypeFactory",".","Builder","fieldInfo","=","typeFactory",".","builder","(",")",";","\n","fieldInfo",".","add","(","\"MSG_PARTITION\",","typeFactory",".","createSqlType","(","SqlTypeName",".","INTEGER",")",")",".","nullable","(","false",")",";","\n","fieldInfo",".","add","(","\"MSG_TIMESTAMP\",","typeFactory",".","createSqlType","(","SqlTypeName",".","BIGINT",")",")",".","nullable","(","false",")",";","\n","fieldInfo",".","add","(","\"MSG_OFFSET\",","typeFactory",".","createSqlType","(","SqlTypeName",".","BIGINT",")",")",".","nullable","(","false",")",";","\n","fieldInfo",".","add","(","\"MSG_KEY_BYTES\",","typeFactory",".","createSqlType","(","SqlTypeName",".","VARBINARY",")",")",".","nullable","(","true",")",";","\n","fieldInfo",".","add","(","\"MSG_VALUE_BYTES\",","typeFactory",".","createSqlType","(","SqlTypeName",".","VARBINARY",")",")","\n",".","nullable","(","false",")",";","\n\n","return","fieldInfo",".","build","(",")",";","\n"],"docstring_tokens":["Generates","the","row","schema","for","a","given","Kafka","topic"]}
{"code_tokens":["\n","public","TableEntry","add","(","String","tableName,","Table","table",")","{","\n","return","add","(","tableName,","table,","ImmutableList",".","of","(",")",")",";","\n"],"docstring_tokens":["Defines","a","table","within","this","schema"]}
{"code_tokens":["\n","public","TypeEntry","add","(","String","name,","RelProtoDataType","type",")","{","\n","final","TypeEntry","entry","=\n","new","TypeEntryImpl","(","this,","name,","type",")",";","\n","typeMap",".","put","(","name,","entry",")",";","\n","return","entry",";","\n"],"docstring_tokens":["Defines","a","type","within","this","schema"]}
{"code_tokens":["\n","public","boolean","isRoot","(",")","{","\n","return","parent","==","null",";","\n"],"docstring_tokens":["Returns","whether","this","is","a","root","schema"]}
{"code_tokens":["\n","public","List<String>","path","(","@Nullable","String","name",")","{","\n","final","List<String>","list","=","new","ArrayList<>","(",")",";","\n","if","(","name","!=","null",")","{","\n","list",".","add","(","name",")",";","\n","}","\n","for","(","CalciteSchema","s","=","this",";","s","!=","null",";","s","=","s",".","parent",")","{","\n","if","(","s",".","parent","!=","null","||","!s",".","name",".","equals","(","\"\"",")",")","{","\n","//","Omit","the","root","schema's","name","from","the","path","if","it's","the","empty","string,\n","//","which","it","usually","is",".","\n","list",".","add","(","s",".","name",")",";","\n","}","\n","}","\n","return","ImmutableList",".","copyOf","(","Lists",".","reverse","(","list",")",")",";","\n"],"docstring_tokens":["Returns","the","path","of","an","object","in","this","schema"]}
{"code_tokens":["\n","public","final","@Nullable","TableEntry","getTable","(","String","tableName,","boolean","caseSensitive",")","{","\n","//","Check","explicit","tables",".","\n","//noinspection","LoopStatementThatDoesntLoop\n","for","(","Map",".","Entry<String,","TableEntry>","entry\n",":","tableMap",".","range","(","tableName,","caseSensitive",")",".","entrySet","(",")",")","{","\n","return","entry",".","getValue","(",")",";","\n","}","\n","return","getImplicitTable","(","tableName,","caseSensitive",")",";","\n"],"docstring_tokens":["Returns","a","table","with","the","given","name"]}
{"code_tokens":["\n","public","final","@Nullable","TypeEntry","getType","(","String","name,","boolean","caseSensitive",")","{","\n","for","(","Map",".","Entry<String,","TypeEntry>","entry\n",":","typeMap",".","range","(","name,","caseSensitive",")",".","entrySet","(",")",")","{","\n","return","entry",".","getValue","(",")",";","\n","}","\n","return","getImplicitType","(","name,","caseSensitive",")",";","\n"],"docstring_tokens":["Returns","a","type,","explicit","and","implicit,","with","a","given","name"]}
{"code_tokens":["\n","public","final","NavigableSet<String>","getFunctionNames","(",")","{","\n","final","ImmutableSortedSet",".","Builder<String>","builder","=\n","new","ImmutableSortedSet",".","Builder<>","(","NameSet",".","COMPARATOR",")",";","\n","//","Add","explicit","functions,","case-sensitive",".","\n","builder",".","addAll","(","functionMap",".","map","(",")",".","keySet","(",")",")",";","\n","//","Add","implicit","functions,","case-sensitive",".","\n","addImplicitFuncNamesToBuilder","(","builder",")",";","\n","return","builder",".","build","(",")",";","\n"],"docstring_tokens":["Returns","the","list","of","function","names","in","this","schema,","both","implicit","and","explicit,","never","null"]}
{"code_tokens":["\n","public","final","@Nullable","TableEntry","getTableBasedOnNullaryFunction","(","String","tableName,\n","boolean","caseSensitive",")","{","\n","for","(","Map",".","Entry<String,","FunctionEntry>","entry\n",":","nullaryFunctionMap",".","range","(","tableName,","caseSensitive",")",".","entrySet","(",")",")","{","\n","final","Function","function","=","entry",".","getValue","(",")",".","getFunction","(",")",";","\n","if","(","function","instanceof","TableMacro",")","{","\n","assert","function",".","getParameters","(",")",".","isEmpty","(",")",";","\n","final","Table","table","=","(","(","TableMacro",")","function",")",".","apply","(","ImmutableList",".","of","(",")",")",";","\n","return","tableEntry","(","tableName,","table",")",";","\n","}","\n","}","\n","return","getImplicitTableBasedOnNullaryFunction","(","tableName,","caseSensitive",")",";","\n"],"docstring_tokens":["Returns","a","tables","derived","from","explicit","and","implicit","functions","that","take","zero","parameters"]}
{"code_tokens":["\n","public","static","<T>","List<T>","of","(",")","{","\n","return","ImmutableList",".","of","(",")",";","\n"],"docstring_tokens":["Creates","a","CompositeList","of","zero","lists"]}
{"code_tokens":["\n","public","static","<T>","List<T>","of","(","List<T>","list0",")","{","\n","return","list0",";","\n"],"docstring_tokens":["Creates","a","CompositeList","of","one","list"]}
{"code_tokens":["\n","public","static","<T>","CompositeList<T>","of","(","List<?","extends","T>","list0,\n","List<?","extends","T>","list1",")","{","\n","//noinspection","unchecked\n","return","new","CompositeList<T>","(","(","ImmutableList",")","ImmutableList",".","of","(","list0,","list1",")",")",";","\n"],"docstring_tokens":["Creates","a","CompositeList","of","two","lists"]}
{"code_tokens":["\n","public","static","<T>","CompositeList<T>","of","(","List<?","extends","T>","list0,\n","List<?","extends","T>","list1,\n","List<?","extends","T>","list2",")","{","\n","//noinspection","unchecked\n","return","new","CompositeList<T>","(","(","ImmutableList",")","ImmutableList",".","of","(","list0,","list1,","list2",")",")",";","\n"],"docstring_tokens":["Creates","a","CompositeList","of","three","lists"]}
{"code_tokens":["\n","@Override","public","String","toString","(",")","{","\n","return","sql",";","\n"],"docstring_tokens":["Returns","the","SQL","string"]}
{"code_tokens":["\n","public","static","Statistic","of","(","final","double","rowCount,\n","final","@Nullable","List<ImmutableBitSet>","keys",")","{","\n","return","of","(","rowCount,","keys,","null,\n","null",")",";","\n"],"docstring_tokens":["Returns","a","statistic","with","a","given","row","count","and","set","of","unique","keys"]}
{"code_tokens":["\n","public","static","Statistic","of","(","final","double","rowCount,\n","final","@Nullable","List<ImmutableBitSet>","keys,\n","final","@Nullable","List<RelCollation>","collations",")","{","\n","return","of","(","rowCount,","keys,","null,","collations",")",";","\n"],"docstring_tokens":["Returns","a","statistic","with","a","given","row","count,","set","of","unique","keys,","and","collations"]}
{"code_tokens":["\n","protected","RelOptPlanner","createPlanner","(","\n","final","CalcitePrepare",".","Context","prepareContext,\n","org",".","apache",".","calcite",".","plan",".","@Nullable","Context","externalContext,\n","@Nullable","RelOptCostFactory","costFactory",")","{","\n","if","(","externalContext","==","null",")","{","\n","externalContext","=","Contexts",".","of","(","prepareContext",".","config","(",")",")",";","\n","}","\n","final","VolcanoPlanner","planner","=\n","new","VolcanoPlanner","(","costFactory,","externalContext",")",";","\n","planner",".","addRelTraitDef","(","ConventionTraitDef",".","INSTANCE",")",";","\n","if","(","CalciteSystemProperty",".","ENABLE_COLLATION_TRAIT",".","value","(",")",")","{","\n","planner",".","addRelTraitDef","(","RelCollationTraitDef",".","INSTANCE",")",";","\n","}","\n","planner",".","setTopDownOpt","(","prepareContext",".","config","(",")",".","topDownOpt","(",")",")",";","\n","RelOptUtil",".","registerDefaultRules","(","planner,\n","prepareContext",".","config","(",")",".","materializationsEnabled","(",")",",\n","enableBindable",")",";","\n\n","final","CalcitePrepare",".","SparkHandler","spark","=","prepareContext",".","spark","(",")",";","\n","if","(","spark",".","enabled","(",")",")","{","\n","spark",".","registerRules","(","\n","new","SparkHandler",".","RuleSetBuilder","(",")","{","\n","@Override","public","void","addRule","(","RelOptRule","rule",")","{","\n","//","TODO:\n","}","\n\n","@Override","public","void","removeRule","(","RelOptRule","rule",")","{","\n","//","TODO:\n","}","\n","}",")",";","\n","}","\n","Hook",".","PLANNER",".","run","(","planner",")",";","//","allow","test","to","add","or","remove","rules\n\n","return","planner",";","\n"],"docstring_tokens":["Creates","a","query","planner","and","initializes","it","with","a","default","set","of","rules"]}
{"code_tokens":["\n","private","static","Meta",".","StatementType","getStatementType","(","Prepare",".","PreparedResult","preparedResult",")","{","\n","if","(","preparedResult",".","isDml","(",")",")","{","\n","return","Meta",".","StatementType",".","IS_DML",";","\n","}","else","{","\n","return","Meta",".","StatementType",".","SELECT",";","\n","}","\n"],"docstring_tokens":["Deduces","the","broad","type","of","statement","for","a","prepare","result"]}
{"code_tokens":["\n","public","<R>","R","perform","(","CalciteServerStatement","statement,\n","FrameworkConfig","config,","Frameworks",".","BasePrepareAction<R>","action",")","{","\n","final","CalcitePrepare",".","Context","prepareContext","=\n","statement",".","createPrepareContext","(",")",";","\n","final","JavaTypeFactory","typeFactory","=","prepareContext",".","getTypeFactory","(",")",";","\n","SchemaPlus","defaultSchema","=","config",".","getDefaultSchema","(",")",";","\n","final","CalciteSchema","schema","=\n","defaultSchema","!=","null\n","?","CalciteSchema",".","from","(","defaultSchema",")","\n",":","prepareContext",".","getRootSchema","(",")",";","\n","CalciteCatalogReader","catalogReader","=\n","new","CalciteCatalogReader","(","schema",".","root","(",")",",\n","schema",".","path","(","null",")",",\n","typeFactory,\n","prepareContext",".","config","(",")",")",";","\n","final","RexBuilder","rexBuilder","=","new","RexBuilder","(","typeFactory",")",";","\n","final","RelOptPlanner","planner","=\n","createPlanner","(","prepareContext,\n","config",".","getContext","(",")",",\n","config",".","getCostFactory","(",")",")",";","\n","final","RelOptCluster","cluster","=","createCluster","(","planner,","rexBuilder",")",";","\n","return","action",".","apply","(","cluster,","catalogReader,\n","prepareContext",".","getRootSchema","(",")",".","plus","(",")",",","statement",")",";","\n"],"docstring_tokens":["Executes","a","prepare","action"]}
{"code_tokens":["\n","public","static","boolean","isLiteralChain","(","SqlNode","node",")","{","\n","assert","node","!=","null",";","\n","if","(","node","instanceof","SqlCall",")","{","\n","SqlCall","call","=","(","SqlCall",")","node",";","\n","return","call",".","getKind","(",")","==","SqlKind",".","LITERAL_CHAIN",";","\n","}","else","{","\n","return","false",";","\n","}","\n"],"docstring_tokens":["Returns","whether","a","node","is","a","literal","chain","which","is","used","to","represent","a","continued","string","literal"]}
{"code_tokens":["\n","public","static","void","unparseFunctionSyntax","(","SqlOperator","operator,\n","SqlWriter","writer,","SqlCall","call,","boolean","ordered",")","{","\n","if","(","operator","instanceof","SqlFunction",")","{","\n","SqlFunction","function","=","(","SqlFunction",")","operator",";","\n\n","if","(","function",".","getFunctionType","(",")",".","isSpecific","(",")",")","{","\n","writer",".","keyword","(","\"SPECIFIC\"",")",";","\n","}","\n","SqlIdentifier","id","=","function",".","getSqlIdentifier","(",")",";","\n","if","(","id","==","null",")","{","\n","writer",".","keyword","(","operator",".","getName","(",")",")",";","\n","}","else","{","\n","unparseSqlIdentifierSyntax","(","writer,","id,","true",")",";","\n","}","\n","}","else","{","\n","writer",".","print","(","operator",".","getName","(",")",")",";","\n","}","\n","if","(","call",".","operandCount","(",")","==","0",")","{","\n","switch","(","call",".","getOperator","(",")",".","getSyntax","(",")",")","{","\n","case","FUNCTION_ID:\n","//","For","example,","the","\"LOCALTIME\"","function","appears","as","\"LOCALTIME\"\n","//","when","it","has","0","args,","not","\"LOCALTIME","(",")","\"",".","\n","return",";","\n","case","FUNCTION_STAR:","//","E",".","g",".","\"COUNT","(","*",")","\"\n","case","FUNCTION:","//","E",".","g",".","\"RANK","(",")","\"\n","case","ORDERED_FUNCTION:","//","E",".","g",".","\"STRING_AGG","(","x",")","\"\n","//","fall","through","-","dealt","with","below\n","break",";","\n","default:\n","break",";","\n","}","\n","}","\n","final","SqlWriter",".","Frame","frame","=\n","writer",".","startList","(","SqlWriter",".","FrameTypeEnum",".","FUN_CALL,","\"","(","\",","\"",")","\"",")",";","\n","final","SqlLiteral","quantifier","=","call",".","getFunctionQuantifier","(",")",";","\n","if","(","quantifier","!=","null",")","{","\n","quantifier",".","unparse","(","writer,","0,","0",")",";","\n","}","\n","if","(","call",".","operandCount","(",")","==","0",")","{","\n","switch","(","call",".","getOperator","(",")",".","getSyntax","(",")",")","{","\n","case","FUNCTION_STAR:\n","writer",".","sep","(","\"*\"",")",";","\n","break",";","\n","default:\n","break",";","\n","}","\n","}","\n","for","(","SqlNode","operand",":","call",".","getOperandList","(",")",")","{","\n","if","(","ordered","&&","operand","instanceof","SqlNodeList",")","{","\n","writer",".","sep","(","\"ORDER","BY\"",")",";","\n","}","else","if","(","ordered","&&","operand",".","getKind","(",")","==","SqlKind",".","SEPARATOR",")","{","\n","writer",".","sep","(","\"SEPARATOR\"",")",";","\n","(","(","SqlCall",")","operand",")",".","operand","(","0",")",".","unparse","(","writer,","0,","0",")",";","\n","continue",";","\n","}","else","{","\n","writer",".","sep","(","\",\"",")",";","\n","}","\n","operand",".","unparse","(","writer,","0,","0",")",";","\n","}","\n\n","writer",".","endList","(","frame",")",";","\n"],"docstring_tokens":["Unparses","a","call","to","an","operator","that","has","function","syntax"]}
{"code_tokens":["\n","public","static","Iterator<SqlOperator>","lookupSubjectRoutines","(","\n","SqlOperatorTable","opTab,","RelDataTypeFactory","typeFactory,\n","SqlIdentifier","funcName,","List<RelDataType>","argTypes,","@Nullable","List<String>","argNames,\n","SqlSyntax","sqlSyntax,","SqlKind","sqlKind,\n","@Nullable","SqlFunctionCategory","category,","SqlNameMatcher","nameMatcher,\n","boolean","coerce",")","{","\n","//","start","with","all","routines","matching","by","name\n","Iterator<SqlOperator>","routines","=\n","lookupSubjectRoutinesByName","(","opTab,","funcName,","sqlSyntax,","category,\n","nameMatcher",")",";","\n\n","//","first","pass:","eliminate","routines","which","don't","accept","the","given\n","//","number","of","arguments\n","routines","=","filterRoutinesByParameterCount","(","routines,","argTypes",")",";","\n\n","//","NOTE:","according","to","SQL99,","procedures","are","NOT","overloaded","on","type,\n","//","only","on","number","of","arguments",".","\n","if","(","category","==","SqlFunctionCategory",".","USER_DEFINED_PROCEDURE",")","{","\n","return","routines",";","\n","}","\n\n","//","second","pass:","eliminate","routines","which","don't","accept","the","given\n","//","argument","types","and","parameter","names","if","specified\n","routines","=\n","filterRoutinesByParameterTypeAndName","(","typeFactory,","sqlSyntax,","routines,\n","argTypes,","argNames,","coerce",")",";","\n\n","//","see","if","we","can","stop","now",";","this","is","necessary","for","the","case\n","//","of","builtin","functions","where","we","don't","have","param","type","info,\n","//","or","UDF","whose","operands","can","make","type","coercion",".","\n","final","List<SqlOperator>","list","=","Lists",".","newArrayList","(","routines",")",";","\n","routines","=","list",".","iterator","(",")",";","\n","if","(","list",".","size","(",")","<","2","||","coerce",")","{","\n","return","routines",";","\n","}","\n\n","//","third","pass:","for","each","parameter","from","left","to","right,","eliminate\n","//","all","routines","except","those","with","the","best","precedence","match","for\n","//","the","given","arguments\n","routines","=","filterRoutinesByTypePrecedence","(","sqlSyntax,","typeFactory,","routines,","argTypes,","argNames",")",";","\n\n","//","fourth","pass:","eliminate","routines","which","do","not","have","the","same\n","//","SqlKind","as","requested\n","return","filterOperatorRoutinesByKind","(","routines,","sqlKind",")",";","\n"],"docstring_tokens":["Looks","up","all","subject","routines","matching","the","given","name","and","argument","types"]}
{"code_tokens":["\n","public","static","boolean","matchRoutinesByParameterCount","(","\n","SqlOperatorTable","opTab,\n","SqlIdentifier","funcName,\n","List<RelDataType>","argTypes,\n","SqlFunctionCategory","category,\n","SqlNameMatcher","nameMatcher",")","{","\n","//","start","with","all","routines","matching","by","name\n","Iterator<SqlOperator>","routines","=\n","lookupSubjectRoutinesByName","(","opTab,","funcName,","SqlSyntax",".","FUNCTION,\n","category,","nameMatcher",")",";","\n\n","//","first","pass:","eliminate","routines","which","don't","accept","the","given\n","//","number","of","arguments\n","routines","=","filterRoutinesByParameterCount","(","routines,","argTypes",")",";","\n\n","return","routines",".","hasNext","(",")",";","\n"],"docstring_tokens":["Determines","whether","there","is","a","routine","matching","the","given","name","and","number","of","arguments"]}
{"code_tokens":["\n","private","static","Iterator<SqlOperator>","filterRoutinesByTypePrecedence","(","\n","SqlSyntax","sqlSyntax,\n","RelDataTypeFactory","typeFactory,\n","Iterator<SqlOperator>","routines,\n","List<RelDataType>","argTypes,\n","@Nullable","List<String>","argNames",")","{","\n","if","(","sqlSyntax","!=","SqlSyntax",".","FUNCTION",")","{","\n","return","routines",";","\n","}","\n\n","List<SqlFunction>","sqlFunctions","=\n","Lists",".","newArrayList","(","Iterators",".","filter","(","routines,","SqlFunction",".","class",")",")",";","\n\n","for","(","final","Ord<RelDataType>","argType",":","Ord",".","zip","(","argTypes",")",")","{","\n","final","RelDataTypePrecedenceList","precList","=\n","argType",".","e",".","getPrecedenceList","(",")",";","\n","final","RelDataType","bestMatch","=\n","bestMatch","(","typeFactory,","sqlFunctions,","argType",".","i,","argNames,","precList",")",";","\n","if","(","bestMatch","!=","null",")","{","\n","sqlFunctions","=","sqlFunctions",".","stream","(",")","\n",".","filter","(","function","->","{","\n","SqlOperandTypeChecker","operandTypeChecker","=","function",".","getOperandTypeChecker","(",")",";","\n","if","(","operandTypeChecker","==","null","||","!operandTypeChecker",".","isFixedParameters","(",")",")","{","\n","return","false",";","\n","}","\n","final","SqlOperandMetadata","operandMetadata","=","(","SqlOperandMetadata",")","operandTypeChecker",";","\n","final","List<String>","paramNames","=","operandMetadata",".","paramNames","(",")",";","\n","final","List<RelDataType>","paramTypes","=\n","operandMetadata",".","paramTypes","(","typeFactory",")",";","\n","int","index","=","argNames","!=","null\n","?","paramNames",".","indexOf","(","argNames",".","get","(","argType",".","i",")",")","\n",":","argType",".","i",";","\n","final","RelDataType","paramType","=","paramTypes",".","get","(","index",")",";","\n","return","precList",".","compareTypePrecedence","(","paramType,","bestMatch",")",">=","0",";","\n","}",")","\n",".","collect","(","Collectors",".","toList","(",")",")",";","\n","}","\n","}","\n","//noinspection","unchecked\n","return","(","Iterator",")","sqlFunctions",".","iterator","(",")",";","\n"],"docstring_tokens":["Filters","an","iterator","of","routines,","keeping","only","those","with","the","best","match","for","the","actual","argument","types"]}
{"code_tokens":["\n","public","static","String","getAliasedSignature","(","\n","SqlOperator","op,\n","String","opName,\n","List<?>","typeList",")","{","\n","StringBuilder","ret","=","new","StringBuilder","(",")",";","\n","String","template","=","op",".","getSignatureTemplate","(","typeList",".","size","(",")",")",";","\n","if","(","null","==","template",")","{","\n","ret",".","append","(","\"'\"",")",";","\n","ret",".","append","(","opName",")",";","\n","ret",".","append","(","\"","(","\"",")",";","\n","for","(","int","i","=","0",";","i","<","typeList",".","size","(",")",";","i++",")","{","\n","if","(","i",">","0",")","{","\n","ret",".","append","(","\",","\"",")",";","\n","}","\n","final","String","t","=","String",".","valueOf","(","typeList",".","get","(","i",")",")",".","toUpperCase","(","Locale",".","ROOT",")",";","\n","ret",".","append","(","\"<\"",")",".","append","(","t",")",".","append","(","\">\"",")",";","\n","}","\n","ret",".","append","(","\"",")","'\"",")",";","\n","}","else","{","\n","Object[]","values","=","new","Object[typeList",".","size","(",")","+","1]",";","\n","values[0]","=","opName",";","\n","ret",".","append","(","\"'\"",")",";","\n","for","(","int","i","=","0",";","i","<","typeList",".","size","(",")",";","i++",")","{","\n","final","String","t","=","String",".","valueOf","(","typeList",".","get","(","i",")",")",".","toUpperCase","(","Locale",".","ROOT",")",";","\n","values[i","+","1]","=","\"<\"","+","t","+","\">\"",";","\n","}","\n","ret",".","append","(","new","MessageFormat","(","template,","Locale",".","ROOT",")",".","format","(","values",")",")",";","\n","ret",".","append","(","\"'\"",")",";","\n","assert","(","typeList",".","size","(",")","+","1",")","==","values",".","length",";","\n","}","\n\n","return","ret",".","toString","(",")",";","\n"],"docstring_tokens":["Constructs","an","operator","signature","from","a","type","list,","substituting","an","alias","for","the","operator","name"]}
{"code_tokens":["\n","public","static","boolean","isCallTo","(","SqlNode","node,","SqlOperator","operator",")","{","\n","return","(","node","instanceof","SqlCall",")","\n","&&","(","(","(","SqlCall",")","node",")",".","getOperator","(",")","==","operator",")",";","\n"],"docstring_tokens":["Returns","whether","a","SqlNode","node","is","a","SqlCall","call","to","a","given","SqlOperator","operator"]}
{"code_tokens":["\n","public","static","@Nullable","String","translateCharacterSetName","(","String","name",")","{","\n","switch","(","name",")","{","\n","case","\"BIG5\":\n","return","\"Big5\"",";","\n","case","\"LATIN1\":\n","return","\"ISO-8859-1\"",";","\n","case","\"UTF8\":\n","return","\"UTF-8\"",";","\n","case","\"UTF16\":\n","case","\"UTF-16\":\n","return","ConversionUtil",".","NATIVE_UTF16_CHARSET_NAME",";","\n","case","\"GB2312\":\n","case","\"GBK\":\n","case","\"UTF-16BE\":\n","case","\"UTF-16LE\":\n","case","\"ISO-8859-1\":\n","case","\"UTF-8\":\n","return","name",";","\n","default:\n","return","null",";","\n","}","\n"],"docstring_tokens":["Translates","a","character","set","name","from","a","SQL-level","name","into","a","Java-level","name"]}
{"code_tokens":["\n","public","static","Charset","getCharset","(","String","charsetName",")","{","\n","assert","charsetName","!=","null",";","\n","charsetName","=","charsetName",".","toUpperCase","(","Locale",".","ROOT",")",";","\n","String","javaCharsetName","=","translateCharacterSetName","(","charsetName",")",";","\n","if","(","javaCharsetName","==","null",")","{","\n","throw","new","UnsupportedCharsetException","(","charsetName",")",";","\n","}","\n","return","Charset",".","forName","(","javaCharsetName",")",";","\n"],"docstring_tokens":["Returns","the","Java-level","Charset","based","on","given","SQL-level","name"]}
{"code_tokens":["\n","private","static","SqlNode","createBalancedCall","(","SqlOperator","op,","SqlParserPos","pos,\n","List<SqlNode>","operands,","int","start,","int","end",")","{","\n","assert","start","<","end","&&","end","<=","operands",".","size","(",")",";","\n","if","(","start","+","1","==","end",")","{","\n","return","operands",".","get","(","start",")",";","\n","}","\n","int","mid","=","(","end","-","start",")","/","2","+","start",";","\n","SqlNode","leftNode","=","createBalancedCall","(","op,","pos,","operands,","start,","mid",")",";","\n","SqlNode","rightNode","=","createBalancedCall","(","op,","pos,","operands,","mid,","end",")",";","\n","return","op",".","createCall","(","pos,","leftNode,","rightNode",")",";","\n"],"docstring_tokens":["Creates","a","balanced","binary","call","from","sql","node","list,","start","inclusive,","end","exclusive"]}
{"code_tokens":["\n","static","IndexCondition","create","(","\n","List<String>","fieldNames,\n","String","indexName,\n","List<String>","indexColumnNames,\n","List<RexNode>","pushDownConditions,\n","List<RexNode>","remainderConditions",")","{","\n","return","new","IndexCondition","(","fieldNames,","indexName,","indexColumnNames,","null,\n","pushDownConditions,","remainderConditions,","null,","null,\n","ComparisonOperator",".","NOP,","ComparisonOperator",".","NOP,","ImmutableList",".","of","(",")",",\n","ImmutableList",".","of","(",")",")",";","\n"],"docstring_tokens":["Creates","a","new","instance","for","InnodbFilterTranslator","to","build","index","condition","which","can","be","pushed","down"]}
{"code_tokens":["\n","boolean","canPushDown","(",")","{","\n","return","!pushDownConditions",".","isEmpty","(",")",";","\n"],"docstring_tokens":["Returns","whether","there","are","any","push","down","conditions"]}
{"code_tokens":["\n","private","static","RelCollation","deduceImplicitCollation","(","List<String>","fieldNames,\n","List<String>","indexColumnNames",")","{","\n","checkState","(","fieldNames","!=","null,","\"field","names","cannot","be","null\"",")",";","\n","List<RelFieldCollation>","keyCollations","=","new","ArrayList<>","(","indexColumnNames",".","size","(",")",")",";","\n","for","(","String","keyColumnName",":","indexColumnNames",")","{","\n","int","fieldIndex","=","fieldNames",".","indexOf","(","keyColumnName",")",";","\n","keyCollations",".","add","(","\n","new","RelFieldCollation","(","fieldIndex,","RelFieldCollation",".","Direction",".","ASCENDING",")",")",";","\n","}","\n","return","RelCollations",".","of","(","keyCollations",")",";","\n"],"docstring_tokens":["Infers","the","implicit","correlation","from","the","index"]}
{"code_tokens":["\n","public","static","@Nullable","TableFunction","create","(","Class<?>","clazz,","String","methodName",")","{","\n","final","Method","method","=","findMethod","(","clazz,","methodName",")",";","\n","if","(","method","==","null",")","{","\n","return","null",";","\n","}","\n","return","create","(","method",")",";","\n"],"docstring_tokens":["Creates","a","TableFunctionImpl","from","a","class,","looking","for","a","method","with","a","given","name"]}
{"code_tokens":["\n","public","static","@Nullable","TableFunction","create","(","final","Method","method",")","{","\n","if","(","!Modifier",".","isStatic","(","method",".","getModifiers","(",")",")",")","{","\n","Class","clazz","=","method",".","getDeclaringClass","(",")",";","\n","if","(","!classHasPublicZeroArgsConstructor","(","clazz",")",")","{","\n","throw","RESOURCE",".","requireDefaultConstructor","(","clazz",".","getName","(",")",")",".","ex","(",")",";","\n","}","\n","}","\n","final","Class<?>","returnType","=","method",".","getReturnType","(",")",";","\n","if","(","!QueryableTable",".","class",".","isAssignableFrom","(","returnType",")","\n","&&","!ScannableTable",".","class",".","isAssignableFrom","(","returnType",")",")","{","\n","return","null",";","\n","}","\n","CallImplementor","implementor","=","createImplementor","(","method",")",";","\n","return","new","TableFunctionImpl","(","method,","implementor",")",";","\n"],"docstring_tokens":["Creates","a","TableFunctionImpl","from","a","method"]}
{"code_tokens":["\n","public","void","updateAlias","(","Operator","pigOp,","String","alias,","boolean","updatePigRelMap",")","{","\n","final","RelNode","rel","=","peek","(",")",";","\n","if","(","updatePigRelMap",")","{","\n","pigRelMap",".","put","(","pigOp,","rel",")",";","\n","}","\n","relPigMap",".","put","(","rel,","pigOp",")",";","\n","aliasMap",".","put","(","alias,","rel",")",";","\n","reverseAliasMap",".","put","(","rel,","alias",")",";","\n"],"docstring_tokens":["Updates","the","Pig","logical","operator","and","its","alias","with","the","top","relational","algebra","node"]}
{"code_tokens":["\n","void","register","(","LogicalRelationalOperator","pigOp",")","{","\n","updateAlias","(","pigOp,","pigOp",".","getAlias","(",")",",","true",")",";","\n"],"docstring_tokens":["Registers","the","Pig","logical","operator","with","the","top","relational","algebra","node"]}
{"code_tokens":["\n","public","RelBuilder","scan","(","RelOptTable","userSchema,","String",".",".",".","tableNames",")","{","\n","//","First,","look","up","the","database","schema","to","find","the","table","schema","with","the","given","names\n","final","List<String>","names","=","ImmutableList",".","copyOf","(","tableNames",")",";","\n","Objects",".","requireNonNull","(","relOptSchema,","\"relOptSchema\"",")",";","\n","final","RelOptTable","systemSchema","=","relOptSchema",".","getTableForMember","(","names",")",";","\n\n","//","Now","we","may","end","up","with","two","different","schemas",".","\n","if","(","systemSchema","!=","null",")","{","\n","if","(","userSchema","!=","null","&&","!compatibleType","(","userSchema",".","getRowType","(",")",",\n","systemSchema",".","getRowType","(",")",")",")","{","\n","//","If","both","schemas","are","valid,","they","must","be","compatible\n","throw","new","IllegalArgumentException","(","\n","\"Pig","script","schema","does","not","match","database","schema","for","table","\"","+","names","+","\"",".","\\n\"\n","+","\"\\t","Scrip","schema:","\"","+","userSchema",".","getRowType","(",")",".","getFullTypeString","(",")","+","\"\\n\"\n","+","\"\\t","Database","schema:","\"","+","systemSchema",".","getRowType","(",")",".","getFullTypeString","(",")",")",";","\n","}","\n","//","We","choose","to","use","systemSchema","if","it","is","valid\n","return","scan","(","systemSchema",")",";","\n","}","else","if","(","userSchema","!=","null",")","{","\n","//","If","systemSchema","is","not","valid,","use","userSchema","if","it","is","valid\n","return","scan","(","userSchema",")",";","\n","}","else","{","\n","//","At","least","one","of","them","needs","to","be","valid\n","throw","Static",".","RESOURCE",".","tableNotFound","(","String",".","join","(","\"",".","\",","names",")",")",".","ex","(",")",";","\n","}","\n"],"docstring_tokens":["Scans","a","table","with","its","given","schema","and","names"]}
{"code_tokens":["\n","public","RelBuilder","scan","(","RelDataType","rowType,","List<String>","tableNames",")","{","\n","final","RelOptTable","relOptTable","=\n","PigTable",".","createRelOptTable","(","getRelOptSchema","(",")",",","rowType,","tableNames",")",";","\n","return","scan","(","relOptTable",")",";","\n"],"docstring_tokens":["Makes","a","table","scan","operator","for","a","given","row","type","and","names"]}
{"code_tokens":["\n","public","RexNode","correl","(","List<RelDataTypeField>","inputFields,\n","CorrelationId","correlId",")","{","\n","final","RelDataTypeFactory",".","Builder","fieldBuilder","=\n","PigTypes",".","TYPE_FACTORY",".","builder","(",")",";","\n","for","(","RelDataTypeField","field",":","inputFields",")","{","\n","fieldBuilder",".","add","(","field",".","getName","(",")",",","field",".","getType","(",")",")",";","\n","}","\n","return","getRexBuilder","(",")",".","makeCorrel","(","fieldBuilder",".","uniquify","(",")",".","build","(",")",",","correlId",")",";","\n"],"docstring_tokens":["Makes","the","correlated","expression","from","rel","input","fields","and","correlation","id"]}
{"code_tokens":["\n","public","RelBuilder","collect","(",")","{","\n","final","RelNode","inputRel","=","peek","(",")",";","\n\n","//","First","project","out","a","combined","column","which","is","a","of","all","other","columns\n","final","RexNode","row","=","getRexBuilder","(",")",".","makeCall","(","inputRel",".","getRowType","(",")",",\n","SqlStdOperatorTable",".","ROW,","fields","(",")",")",";","\n","project","(","ImmutableList",".","of","(","literal","(","\"all\"",")",",","row",")",")",";","\n\n","//","Update","the","alias","map","for","the","new","projected","rel",".","\n","updateAlias","(","getPig","(","inputRel",")",",","getAlias","(","inputRel",")",",","false",")",";","\n\n","//","Build","a","single","group","for","all","rows\n","cogroup","(","ImmutableList",".","of","(","groupKey","(","ImmutableList",".","<RexNode>of","(","field","(","0",")",")",")",")",")",";","\n\n","//","Finally","project","out","the","final","multiset","value\n","project","(","field","(","1",")",")",";","\n\n","return","this",";","\n"],"docstring_tokens":["Collects","all","rows","of","the","top","rel","into","a","single","multiset","value"]}
{"code_tokens":["\n","public","List<RelNode>","getRelsForStores","(",")","{","\n","if","(","storeMap",".","isEmpty","(",")",")","{","\n","return","null",";","\n","}","\n","return","ImmutableList",".","copyOf","(","storeMap",".","values","(",")",")",";","\n"],"docstring_tokens":["Gets","all","relational","plans","corresponding","to","Pig","Store","operators"]}
{"code_tokens":["\n","boolean","isValid","(","Litmus","litmus",")","{","\n","for","(","int","i","=","0",";","i","<","descendants",".","size","(",")",";","i++",")","{","\n","LatticeNode","node","=","descendants",".","get","(","i",")",";","\n","if","(","i","==","0",")","{","\n","if","(","node","!=","this",")","{","\n","return","litmus",".","fail","(","\"node","0","should","be","root\"",")",";","\n","}","\n","}","else","{","\n","if","(","!","(","node","instanceof","LatticeChildNode",")",")","{","\n","return","litmus",".","fail","(","\"node","after","0","should","be","child\"",")",";","\n","}","\n","final","LatticeChildNode","child","=","(","LatticeChildNode",")","node",";","\n","if","(","!descendants",".","subList","(","0,","i",")",".","contains","(","child",".","parent",")",")","{","\n","return","litmus",".","fail","(","\"parent","not","in","preceding","list\"",")",";","\n","}","\n","}","\n","}","\n","return","litmus",".","succeed","(",")",";","\n"],"docstring_tokens":["Validates","that","nodes","form","a","tree;","each","node","except","the","first","references","a","predecessor"]}
{"code_tokens":["\n","public","@Nullable","Set<RexNode>","getExpressionLineage","(","Join","rel,","RelMetadataQuery","mq,\n","RexNode","outputExpression",")","{","\n","final","RexBuilder","rexBuilder","=","rel",".","getCluster","(",")",".","getRexBuilder","(",")",";","\n","final","RelNode","leftInput","=","rel",".","getLeft","(",")",";","\n","final","RelNode","rightInput","=","rel",".","getRight","(",")",";","\n","final","int","nLeftColumns","=","leftInput",".","getRowType","(",")",".","getFieldList","(",")",".","size","(",")",";","\n\n","//","Extract","input","fields","referenced","by","expression\n","final","ImmutableBitSet","inputFieldsUsed","=","extractInputRefs","(","outputExpression",")",";","\n\n","if","(","rel",".","getJoinType","(",")",".","isOuterJoin","(",")",")","{","\n","//","If","we","reference","the","inner","side,","we","will","bail","out\n","if","(","rel",".","getJoinType","(",")","==","JoinRelType",".","LEFT",")","{","\n","ImmutableBitSet","rightFields","=","ImmutableBitSet",".","range","(","\n","nLeftColumns,","rel",".","getRowType","(",")",".","getFieldCount","(",")",")",";","\n","if","(","inputFieldsUsed",".","intersects","(","rightFields",")",")","{","\n","//","We","cannot","map","origin","of","this","expression",".","\n","return","null",";","\n","}","\n","}","else","if","(","rel",".","getJoinType","(",")","==","JoinRelType",".","RIGHT",")","{","\n","ImmutableBitSet","leftFields","=","ImmutableBitSet",".","range","(","\n","0,","nLeftColumns",")",";","\n","if","(","inputFieldsUsed",".","intersects","(","leftFields",")",")","{","\n","//","We","cannot","map","origin","of","this","expression",".","\n","return","null",";","\n","}","\n","}","else","{","\n","//","We","cannot","map","origin","of","this","expression",".","\n","return","null",";","\n","}","\n","}","\n\n","//","Gather","table","references\n","final","Set<RelTableRef>","leftTableRefs","=","mq",".","getTableReferences","(","leftInput",")",";","\n","if","(","leftTableRefs","==","null",")","{","\n","//","Bail","out\n","return","null",";","\n","}","\n","final","Set<RelTableRef>","rightTableRefs","=","mq",".","getTableReferences","(","rightInput",")",";","\n","if","(","rightTableRefs","==","null",")","{","\n","//","Bail","out\n","return","null",";","\n","}","\n","final","Multimap<List<String>,","RelTableRef>","qualifiedNamesToRefs","=","HashMultimap",".","create","(",")",";","\n","final","Map<RelTableRef,","RelTableRef>","currentTablesMapping","=","new","HashMap<>","(",")",";","\n","for","(","RelTableRef","leftRef",":","leftTableRefs",")","{","\n","qualifiedNamesToRefs",".","put","(","leftRef",".","getQualifiedName","(",")",",","leftRef",")",";","\n","}","\n","for","(","RelTableRef","rightRef",":","rightTableRefs",")","{","\n","int","shift","=","0",";","\n","Collection<RelTableRef>","lRefs","=","qualifiedNamesToRefs",".","get","(","\n","rightRef",".","getQualifiedName","(",")",")",";","\n","if","(","lRefs","!=","null",")","{","\n","shift","=","lRefs",".","size","(",")",";","\n","}","\n","currentTablesMapping",".","put","(","rightRef,\n","RelTableRef",".","of","(","rightRef",".","getTable","(",")",",","shift","+","rightRef",".","getEntityNumber","(",")",")",")",";","\n","}","\n\n","//","Infer","column","origin","expressions","for","given","references\n","final","Map<RexInputRef,","Set<RexNode>>","mapping","=","new","LinkedHashMap<>","(",")",";","\n","for","(","int","idx",":","inputFieldsUsed",")","{","\n","if","(","idx","<","nLeftColumns",")","{","\n","final","RexInputRef","inputRef","=","RexInputRef",".","of","(","idx,","leftInput",".","getRowType","(",")",".","getFieldList","(",")",")",";","\n","final","Set<RexNode>","originalExprs","=","mq",".","getExpressionLineage","(","leftInput,","inputRef",")",";","\n","if","(","originalExprs","==","null",")","{","\n","//","Bail","out\n","return","null",";","\n","}","\n","//","Left","input","references","remain","unchanged\n","mapping",".","put","(","RexInputRef",".","of","(","idx,","rel",".","getRowType","(",")",".","getFieldList","(",")",")",",","originalExprs",")",";","\n","}","else","{","\n","//","Right","input",".","\n","final","RexInputRef","inputRef","=","RexInputRef",".","of","(","idx","-","nLeftColumns,\n","rightInput",".","getRowType","(",")",".","getFieldList","(",")",")",";","\n","final","Set<RexNode>","originalExprs","=","mq",".","getExpressionLineage","(","rightInput,","inputRef",")",";","\n","if","(","originalExprs","==","null",")","{","\n","//","Bail","out\n","return","null",";","\n","}","\n","//","Right","input","references","might","need","to","be","updated","if","there","are\n","//","table","names","clashes","with","left","input\n","final","RelDataType","fullRowType","=","SqlValidatorUtil",".","createJoinType","(","\n","rexBuilder",".","getTypeFactory","(",")",",\n","rel",".","getLeft","(",")",".","getRowType","(",")",",\n","rel",".","getRight","(",")",".","getRowType","(",")",",\n","null,\n","ImmutableList",".","of","(",")",")",";","\n","final","Set<RexNode>","updatedExprs","=","ImmutableSet",".","copyOf","(","\n","Util",".","transform","(","originalExprs,","e","->\n","RexUtil",".","swapTableReferences","(","rexBuilder,","e,\n","currentTablesMapping",")",")",")",";","\n","mapping",".","put","(","RexInputRef",".","of","(","idx,","fullRowType",")",",","updatedExprs",")",";","\n","}","\n","}","\n\n","//","Return","result\n","return","createAllPossibleExpressions","(","rexBuilder,","outputExpression,","mapping",")",";","\n"],"docstring_tokens":["Expression","lineage","from","Join"]}
{"code_tokens":["\n","public","static","SqlOperatorTable","operatorTable","(","String",".",".",".","classNames",")","{","\n","//","Dummy","schema","to","collect","the","functions\n","final","CalciteSchema","schema","=\n","CalciteSchema",".","createRootSchema","(","false,","false",")",";","\n","for","(","String","className",":","classNames",")","{","\n","ModelHandler",".","addFunctions","(","schema",".","plus","(",")",",","null,","ImmutableList",".","of","(",")",",\n","className,","\"*\",","true",")",";","\n","}","\n\n","final","ListSqlOperatorTable","table","=","new","ListSqlOperatorTable","(",")",";","\n","for","(","String","name",":","schema",".","getFunctionNames","(",")",")","{","\n","schema",".","getFunctions","(","name,","true",")",".","forEach","(","function","->","{","\n","final","SqlIdentifier","id","=","new","SqlIdentifier","(","name,","SqlParserPos",".","ZERO",")",";","\n","table",".","add","(","toOp","(","id,","function",")",")",";","\n","}",")",";","\n","}","\n","return","table",";","\n"],"docstring_tokens":["Creates","an","operator","table","that","contains","functions","in","the","given","class","or","classes"]}
{"code_tokens":["\n","public","static","List<SqlNode>","removeTypeSpecOperands","(","SqlCall","call",")","{","\n","@Nullable","SqlNode[]","operands","=","call",".","getOperandList","(",")",".","toArray","(","new","SqlNode[0]",")",";","\n","if","(","hasExplicitTypeSpec","(","operands",")",")","{","\n","operands[2]","=","null",";","\n","operands[3]","=","null",";","\n","}","\n","return","Arrays",".","stream","(","operands",")","\n",".","filter","(","Objects::nonNull",")","\n",".","collect","(","Collectors",".","toList","(",")",")",";","\n"],"docstring_tokens":["Returns","new","operand","list","with","type","specification","removed"]}
{"code_tokens":["\n","public","boolean","canBeUsed","(","AggregateCall","call",")","{","\n","switch","(","type",")","{","\n","case","HYPER_UNIQUE:\n","case","THETA_SKETCH:\n","return","call","!=","null\n","&&","call",".","getAggregation","(",")",".","getKind","(",")","==","SqlKind",".","COUNT\n","&&","call",".","isDistinct","(",")",";","\n","default:\n","return","false",";","\n","}","\n"],"docstring_tokens":["Returns","true","if","and","only","if","this","ComplexMetric","can","be","used","in","the","given","AggregateCall"]}
{"code_tokens":["\n","public","NlsString","rtrim","(",")","{","\n","String","trimmed","=","SqlFunctions",".","rtrim","(","getValue","(",")",")",";","\n","if","(","!trimmed",".","equals","(","getValue","(",")",")",")","{","\n","return","new","NlsString","(","trimmed,","charsetName,","collation",")",";","\n","}","\n","return","this",";","\n"],"docstring_tokens":["Returns","a","string","the","same","as","this","but","with","spaces","trimmed","from","the","right"]}
{"code_tokens":["\n","public","NlsString","copy","(","String","value",")","{","\n","return","new","NlsString","(","value,","charsetName,","collation",")",";","\n"],"docstring_tokens":["Creates","a","copy","of","this","NlsString","with","different","content","but","same","charset","and","collation"]}
{"code_tokens":["\n","public","static","RexWindowBound","create","(","SqlNode","node,","@Nullable","RexNode","rexNode",")","{","\n","if","(","SqlWindow",".","isUnboundedPreceding","(","node",")",")","{","\n","return","UNBOUNDED_PRECEDING",";","\n","}","\n","if","(","SqlWindow",".","isUnboundedFollowing","(","node",")",")","{","\n","return","UNBOUNDED_FOLLOWING",";","\n","}","\n","if","(","SqlWindow",".","isCurrentRow","(","node",")",")","{","\n","return","CURRENT_ROW",";","\n","}","\n","assert","rexNode","!=","null",":","\"offset","value","cannot","be","null","for","bounded","window\"",";","\n","return","new","RexBoundedWindowBound","(","(","RexCall",")","rexNode",")",";","\n"],"docstring_tokens":["Creates","a","window","bound","from","a","SqlNode"]}
{"code_tokens":["\n","protected","boolean","hasLeftChild","(","RelOptRuleCall","call",")","{","\n","return","call",".","rel","(","1",")","instanceof","Project",";","\n"],"docstring_tokens":["Returns","whether","the","rule","was","invoked","with","a","left","project","child"]}
{"code_tokens":["\n","protected","boolean","hasRightChild","(","RelOptRuleCall","call",")","{","\n","return","call",".","rels",".","length","==","3",";","\n"],"docstring_tokens":["Returns","whether","the","rule","was","invoked","with","2","children"]}
{"code_tokens":["\n","protected","RelNode","getProjectChild","(","\n","RelOptRuleCall","call,\n","Project","project,\n","boolean","leftChild",")","{","\n","return","project",".","getInput","(",")",";","\n"],"docstring_tokens":["Returns","the","child","of","the","project","that","will","be","used","as","input","into","the","new","LogicalJoin","once","the","projects","are","pulled","above","the","LogicalJoin"]}
{"code_tokens":["\n","protected","void","createProjectExprs","(","\n","@Nullable","Project","project,\n","RelNode","joinChild,\n","int","adjustmentAmount,\n","RexBuilder","rexBuilder,\n","List<RelDataTypeField>","joinChildrenFields,\n","List<Pair<RexNode,","String>>","projects",")","{","\n","List<RelDataTypeField>","childFields","=\n","joinChild",".","getRowType","(",")",".","getFieldList","(",")",";","\n","if","(","project","!=","null",")","{","\n","List<Pair<RexNode,","String>>","namedProjects","=\n","project",".","getNamedProjects","(",")",";","\n","int","nChildFields","=","childFields",".","size","(",")",";","\n","int[]","adjustments","=","new","int[nChildFields]",";","\n","for","(","int","i","=","0",";","i","<","nChildFields",";","i++",")","{","\n","adjustments[i]","=","adjustmentAmount",";","\n","}","\n","for","(","Pair<RexNode,","String>","pair",":","namedProjects",")","{","\n","RexNode","e","=","pair",".","left",";","\n","if","(","adjustmentAmount","!=","0",")","{","\n","//","shift","the","references","by","the","adjustment","amount\n","e","=","e",".","accept","(","\n","new","RelOptUtil",".","RexInputConverter","(","\n","rexBuilder,\n","childFields,\n","joinChildrenFields,\n","adjustments",")",")",";","\n","}","\n","projects",".","add","(","Pair",".","of","(","e,","pair",".","right",")",")",";","\n","}","\n","}","else","{","\n","//","no","projection",";","just","create","references","to","the","inputs\n","for","(","int","i","=","0",";","i","<","childFields",".","size","(",")",";","i++",")","{","\n","final","RelDataTypeField","field","=","childFields",".","get","(","i",")",";","\n","projects",".","add","(","\n","Pair",".","of","(","\n","rexBuilder",".","makeInputRef","(","field",".","getType","(",")",",\n","i","+","adjustmentAmount",")",",\n","field",".","getName","(",")",")",")",";","\n","}","\n","}","\n"],"docstring_tokens":["Creates","projection","expressions","corresponding","to","one","of","the","inputs","into","the","join"]}
{"code_tokens":["\n","public","void","addOperator","(","SqlOperator","op",")","{","\n","listOpTab",".","add","(","op",")",";","\n"],"docstring_tokens":["Adds","an","operator","to","this","table"]}
{"code_tokens":["\n","public","static","<V>","NameMap","immutableCopyOf","(","Map<String,","V>","names",")","{","\n","return","new","NameMap<>","(","ImmutableSortedMap",".","copyOf","(","names,","COMPARATOR",")",")",";","\n"],"docstring_tokens":["Creates","a","NameMap","that","is","an","immutable","copy","of","a","given","map"]}
{"code_tokens":["\n","public","boolean","containsKey","(","String","name,","boolean","caseSensitive",")","{","\n","return","!range","(","name,","caseSensitive",")",".","isEmpty","(",")",";","\n"],"docstring_tokens":["Returns","whether","this","map","contains","a","given","key,","with","a","given","case-sensitivity"]}
{"code_tokens":["\n","public","JoinInfo","analyzeCondition","(",")","{","\n","return","joinInfo",";","\n"],"docstring_tokens":["Analyzes","the","join","condition"]}
{"code_tokens":["\n","public","static","LogicalProject","create","(","final","RelNode","input,","List<RelHint>","hints,\n","final","List<?","extends","RexNode>","projects,","RelDataType","rowType",")","{","\n","final","RelOptCluster","cluster","=","input",".","getCluster","(",")",";","\n","final","RelMetadataQuery","mq","=","cluster",".","getMetadataQuery","(",")",";","\n","final","RelTraitSet","traitSet","=\n","cluster",".","traitSet","(",")",".","replace","(","Convention",".","NONE",")","\n",".","replaceIfs","(","RelCollationTraitDef",".","INSTANCE,\n","(",")","->","RelMdCollation",".","project","(","mq,","input,","projects",")",")",";","\n","return","new","LogicalProject","(","cluster,","traitSet,","hints,","input,","projects,","rowType",")",";","\n"],"docstring_tokens":["Creates","a","LogicalProject,","specifying","row","type","rather","than","field","names"]}
{"code_tokens":["\n","public","static","synchronized","SqlStdOperatorTable","instance","(",")","{","\n","if","(","instance","==","null",")","{","\n","//","Creates","and","initializes","the","standard","operator","table",".","\n","//","Uses","two-phase","construction,","because","we","can't","initialize","the\n","//","table","until","the","constructor","of","the","sub-class","has","completed",".","\n","instance","=","new","SqlStdOperatorTable","(",")",";","\n","instance",".","init","(",")",";","\n","}","\n","return","instance",";","\n"],"docstring_tokens":["Returns","the","standard","operator","table,","creating","it","if","necessary"]}
{"code_tokens":["\n","private","static","SqlCall","copy","(","SqlCall","call,","SqlOperator","operator",")","{","\n","return","new","SqlBasicCall","(","operator,","call",".","getOperandList","(",")",",\n","call",".","getParserPosition","(",")",")",";","\n"],"docstring_tokens":["Creates","a","copy","of","a","call","with","a","new","operator"]}
{"code_tokens":["\n","public","static","SqlQuantifyOperator","some","(","SqlKind","comparisonKind",")","{","\n","switch","(","comparisonKind",")","{","\n","case","EQUALS:\n","return","SOME_EQ",";","\n","case","NOT_EQUALS:\n","return","SOME_NE",";","\n","case","LESS_THAN:\n","return","SOME_LT",";","\n","case","LESS_THAN_OR_EQUAL:\n","return","SOME_LE",";","\n","case","GREATER_THAN:\n","return","SOME_GT",";","\n","case","GREATER_THAN_OR_EQUAL:\n","return","SOME_GE",";","\n","default:\n","throw","new","AssertionError","(","comparisonKind",")",";","\n","}","\n"],"docstring_tokens":["Returns","the","operator","for","SOME","comparisonKind"]}
{"code_tokens":["\n","public","static","SqlQuantifyOperator","all","(","SqlKind","comparisonKind",")","{","\n","switch","(","comparisonKind",")","{","\n","case","EQUALS:\n","return","ALL_EQ",";","\n","case","NOT_EQUALS:\n","return","ALL_NE",";","\n","case","LESS_THAN:\n","return","ALL_LT",";","\n","case","LESS_THAN_OR_EQUAL:\n","return","ALL_LE",";","\n","case","GREATER_THAN:\n","return","ALL_GT",";","\n","case","GREATER_THAN_OR_EQUAL:\n","return","ALL_GE",";","\n","default:\n","throw","new","AssertionError","(","comparisonKind",")",";","\n","}","\n"],"docstring_tokens":["Returns","the","operator","for","ALL","comparisonKind"]}
{"code_tokens":["\n","public","static","SqlOperator","like","(","boolean","negated,","boolean","caseSensitive",")","{","\n","if","(","negated",")","{","\n","if","(","caseSensitive",")","{","\n","return","NOT_LIKE",";","\n","}","else","{","\n","return","SqlLibraryOperators",".","NOT_ILIKE",";","\n","}","\n","}","else","{","\n","if","(","caseSensitive",")","{","\n","return","LIKE",";","\n","}","else","{","\n","return","SqlLibraryOperators",".","ILIKE",";","\n","}","\n","}","\n"],"docstring_tokens":["Returns","the","operator","for","LIKE","with","given","case-sensitivity,","optionally","negated"]}
{"code_tokens":["\n","@VisibleForTesting\n","@SuppressWarnings","(","\"BetaApi\"",")","\n","public","static","RexNode","replaceTimeUnits","(","RexBuilder","rexBuilder,","RexNode","e,\n","String","timeZone",")","{","\n","ImmutableSortedSet<TimeUnitRange>","timeUnits","=","extractTimeUnits","(","e",")",";","\n","if","(","!timeUnits",".","contains","(","TimeUnitRange",".","YEAR",")",")","{","\n","//","Case","when","we","have","FLOOR","or","CEIL","but","no","extract","on","YEAR",".","\n","//","Add","YEAR","as","TimeUnit","so","that","FLOOR","gets","replaced","in","first","iteration\n","//","with","timeUnit","YEAR",".","\n","timeUnits","=","ImmutableSortedSet",".","<TimeUnitRange>naturalOrder","(",")","\n",".","addAll","(","timeUnits",")",".","add","(","TimeUnitRange",".","YEAR",")",".","build","(",")",";","\n","}","\n","final","Map<RexNode,","RangeSet<Calendar>>","operandRanges","=","new","HashMap<>","(",")",";","\n","for","(","TimeUnitRange","timeUnit",":","timeUnits",")","{","\n","e","=","e",".","accept","(","\n","new","ExtractShuttle","(","rexBuilder,","timeUnit,","operandRanges,","timeUnits,\n","timeZone",")",")",";","\n","}","\n","return","e",";","\n"],"docstring_tokens":["Replaces","calls","to","EXTRACT,","FLOOR","and","CEIL","in","an","expression"]}
{"code_tokens":["\n","public","void","execute","(","SqlCreateTable","create,","CalcitePrepare",".","Context","context",")","{","\n","final","CalciteSchema","schema","=\n","Schemas",".","subSchema","(","context",".","getRootSchema","(",")",",\n","context",".","getDefaultSchemaPath","(",")",")",";","\n","final","JavaTypeFactory","typeFactory","=","context",".","getTypeFactory","(",")",";","\n","final","RelDataType","queryRowType",";","\n","if","(","create",".","query","!=","null",")","{","\n","//","A","bit","of","a","hack:","pretend","it's","a","view,","to","get","its","row","type\n","final","String","sql","=\n","create",".","query",".","toSqlString","(","CalciteSqlDialect",".","DEFAULT",")",".","getSql","(",")",";","\n","final","ViewTableMacro","viewTableMacro","=\n","ViewTable",".","viewMacro","(","schema",".","plus","(",")",",","sql,","schema",".","path","(","null",")",",\n","context",".","getObjectPath","(",")",",","false",")",";","\n","final","TranslatableTable","x","=","viewTableMacro",".","apply","(","ImmutableList",".","of","(",")",")",";","\n","queryRowType","=","x",".","getRowType","(","typeFactory",")",";","\n\n","if","(","create",".","columnList","!=","null\n","&&","queryRowType",".","getFieldCount","(",")","!=","create",".","columnList",".","size","(",")",")","{","\n","throw","SqlUtil",".","newContextException","(","create",".","columnList",".","getParserPosition","(",")",",\n","RESOURCE",".","columnCountMismatch","(",")",")",";","\n","}","\n","}","else","{","\n","queryRowType","=","null",";","\n","}","\n","final","RelDataTypeFactory",".","Builder","builder","=","typeFactory",".","builder","(",")",";","\n","if","(","create",".","columnList","!=","null",")","{","\n","final","SqlValidator","validator","=","new","ContextSqlValidator","(","context,","false",")",";","\n","create",".","forEachNameType","(","(","name,","typeSpec",")","->\n","builder",".","add","(","name",".","getSimple","(",")",",","typeSpec",".","deriveType","(","validator,","true",")",")",")",";","\n","}","else","{","\n","if","(","queryRowType","==","null",")","{","\n","//","\"CREATE","TABLE","t\"","is","invalid",";","because","there","is","no","\"AS","query\"","we","need\n","//","a","list","of","column","names","and","types,","\"CREATE","TABLE","t","(","INT","c",")","\"",".","\n","throw","SqlUtil",".","newContextException","(","create",".","name",".","getParserPosition","(",")",",\n","RESOURCE",".","createTableRequiresColumnList","(",")",")",";","\n","}","\n","builder",".","addAll","(","queryRowType",".","getFieldList","(",")",")",";","\n","}","\n","final","RelDataType","rowType","=","builder",".","build","(",")",";","\n","schema",".","add","(","create",".","name",".","getSimple","(",")",",\n","new","MutableArrayTable","(","create",".","name",".","getSimple","(",")",",\n","RelDataTypeImpl",".","proto","(","rowType",")",")",")",";","\n","if","(","create",".","query","!=","null",")","{","\n","populate","(","create",".","name,","create",".","query,","context",")",";","\n","}","\n"],"docstring_tokens":["Executes","a","CREATE","TABLE","command"]}
{"code_tokens":["\n","protected","static","void","populate","(","SqlIdentifier","name,","SqlNode","query,\n","CalcitePrepare",".","Context","context",")","{","\n","//","Generate,","prepare","and","execute","an","\"INSERT","INTO","table","query\"","statement",".","\n","//","(","It's","a","bit","inefficient","that","we","convert","from","SqlNode","to","SQL","and","back\n","//","again",".",")","\n","final","FrameworkConfig","config","=","Frameworks",".","newConfigBuilder","(",")","\n",".","defaultSchema","(","\n","Objects",".","requireNonNull","(","\n","Schemas",".","subSchema","(","context",".","getRootSchema","(",")",",\n","context",".","getDefaultSchemaPath","(",")",")",")",".","plus","(",")",")","\n",".","build","(",")",";","\n","final","Planner","planner","=","Frameworks",".","getPlanner","(","config",")",";","\n","try","{","\n","final","StringBuilder","buf","=","new","StringBuilder","(",")",";","\n","final","SqlPrettyWriter","w","=\n","new","SqlPrettyWriter","(","\n","SqlPrettyWriter",".","config","(",")","\n",".","withDialect","(","CalciteSqlDialect",".","DEFAULT",")","\n",".","withAlwaysUseParentheses","(","false",")",",\n","buf",")",";","\n","buf",".","append","(","\"INSERT","INTO","\"",")",";","\n","name",".","unparse","(","w,","0,","0",")",";","\n","buf",".","append","(","\"","\"",")",";","\n","query",".","unparse","(","w,","0,","0",")",";","\n","final","String","sql","=","buf",".","toString","(",")",";","\n","final","SqlNode","query1","=","planner",".","parse","(","sql",")",";","\n","final","SqlNode","query2","=","planner",".","validate","(","query1",")",";","\n","final","RelRoot","r","=","planner",".","rel","(","query2",")",";","\n","final","PreparedStatement","prepare","=\n","context",".","getRelRunner","(",")",".","prepareStatement","(","r",".","rel",")",";","\n","int","rowCount","=","prepare",".","executeUpdate","(",")",";","\n","Util",".","discard","(","rowCount",")",";","\n","prepare",".","close","(",")",";","\n","}","catch","(","SqlParseException","|","ValidationException\n","|","RelConversionException","|","SQLException","e",")","{","\n","throw","Util",".","throwAsRuntime","(","e",")",";","\n","}","\n"],"docstring_tokens":["Populates","the","table","called","name","by","executing","query"]}
{"code_tokens":["\n","public","SqlToRelFixture","ensuring","(","Predicate<SqlToRelFixture>","predicate,\n","UnaryOperator<SqlToRelFixture>","remedy",")","{","\n","SqlToRelFixture","f","=","this",";","\n","if","(","!predicate",".","test","(","f",")",")","{","\n","f","=","remedy",".","apply","(","f",")",";","\n","assertThat","(","\"remedy","failed\",","predicate",".","test","(","f",")",",","is","(","true",")",")",";","\n","}","\n","return","f",";","\n"],"docstring_tokens":["Returns","a","fixture","that","meets","a","given","condition,","applying","a","remedy","if","it","does","not","already"]}
{"code_tokens":["\n","public","List<RexNode>","identityProjects","(","final","RelDataType","rowType",")","{","\n","return","Util",".","transform","(","rowType",".","getFieldList","(",")",",\n","input","->","new","RexInputRef","(","input",".","getIndex","(",")",",","input",".","getType","(",")",")",")",";","\n"],"docstring_tokens":["Creates","a","list","of","org.apache.calcite.rex.RexInputRef","expressions,","projecting","the","fields","of","a","given","record","type"]}
{"code_tokens":["\n","public","RexNode","makeFieldAccess","(","\n","RexNode","expr,\n","int","i",")","{","\n","final","RelDataType","type","=","expr",".","getType","(",")",";","\n","final","List<RelDataTypeField>","fields","=","type",".","getFieldList","(",")",";","\n","if","(","(","i","<","0",")","||","(","i",">=","fields",".","size","(",")",")",")","{","\n","throw","new","AssertionError","(","\"Field","ordinal","\"","+","i","+","\"","is","invalid","for","\"\n","+","\"","type","'\"","+","type","+","\"'\"",")",";","\n","}","\n","return","makeFieldAccessInternal","(","expr,","fields",".","get","(","i",")",")",";","\n"],"docstring_tokens":["Creates","an","expression","accessing","a","field","with","a","given","ordinal","from","a","record"]}
{"code_tokens":["\n","public","final","RexNode","makeCall","(","\n","SqlOperator","op,\n","RexNode",".",".",".","exprs",")","{","\n","return","makeCall","(","op,","ImmutableList",".","copyOf","(","exprs",")",")",";","\n"],"docstring_tokens":["Creates","a","call","with","a","list","of","arguments"]}
{"code_tokens":["\n","public","RelDataType","deriveReturnType","(","\n","SqlOperator","op,\n","List<?","extends","RexNode>","exprs",")","{","\n","return","op",".","inferReturnType","(","\n","new","RexCallBinding","(","typeFactory,","op,","exprs,\n","ImmutableList",".","of","(",")",")",")",";","\n"],"docstring_tokens":["Derives","the","return","type","of","a","call","to","an","operator"]}
{"code_tokens":["\n","public","RexNode","makeOver","(","\n","RelDataType","type,\n","SqlAggFunction","operator,\n","List<RexNode>","exprs,\n","List<RexNode>","partitionKeys,\n","ImmutableList<RexFieldCollation>","orderKeys,\n","RexWindowBound","lowerBound,\n","RexWindowBound","upperBound,\n","boolean","rows,\n","boolean","allowPartial,\n","boolean","nullWhenCountZero,\n","boolean","distinct,\n","boolean","ignoreNulls",")","{","\n","final","RexWindow","window","=\n","makeWindow","(","\n","partitionKeys,\n","orderKeys,\n","lowerBound,\n","upperBound,\n","rows",")",";","\n","final","RexOver","over","=","new","RexOver","(","type,","operator,","exprs,","window,\n","distinct,","ignoreNulls",")",";","\n","RexNode","result","=","over",";","\n\n","//","This","should","be","correct","but","need","time","to","go","over","test","results",".","\n","//","Also","want","to","look","at","combing","with","section","below",".","\n","if","(","nullWhenCountZero",")","{","\n","final","RelDataType","bigintType","=\n","typeFactory",".","createSqlType","(","SqlTypeName",".","BIGINT",")",";","\n","result","=","makeCall","(","\n","SqlStdOperatorTable",".","CASE,\n","makeCall","(","\n","SqlStdOperatorTable",".","GREATER_THAN,\n","new","RexOver","(","\n","bigintType,\n","SqlStdOperatorTable",".","COUNT,\n","exprs,\n","window,\n","distinct,\n","ignoreNulls",")",",\n","makeLiteral","(","\n","BigDecimal",".","ZERO,\n","bigintType,\n","SqlTypeName",".","DECIMAL",")",")",",\n","ensureType","(","type,","//","SUM0","is","non-nullable,","thus","need","a","cast\n","new","RexOver","(","typeFactory",".","createTypeWithNullability","(","type,","false",")",",\n","operator,","exprs,","window,","distinct,","ignoreNulls",")",",\n","false",")",",\n","makeNullLiteral","(","type",")",")",";","\n","}","\n","if","(","!allowPartial",")","{","\n","Preconditions",".","checkArgument","(","rows,","\"DISALLOW","PARTIAL","over","RANGE\"",")",";","\n","final","RelDataType","bigintType","=\n","typeFactory",".","createSqlType","(","SqlTypeName",".","BIGINT",")",";","\n","//","todo:","read","bound\n","result","=\n","makeCall","(","\n","SqlStdOperatorTable",".","CASE,\n","makeCall","(","\n","SqlStdOperatorTable",".","GREATER_THAN_OR_EQUAL,\n","new","RexOver","(","\n","bigintType,\n","SqlStdOperatorTable",".","COUNT,\n","ImmutableList",".","of","(",")",",\n","window,\n","distinct,\n","ignoreNulls",")",",\n","makeLiteral","(","\n","BigDecimal",".","valueOf","(","2",")",",\n","bigintType,\n","SqlTypeName",".","DECIMAL",")",")",",\n","result,\n","constantNull",")",";","\n","}","\n","return","result",";","\n"],"docstring_tokens":["Creates","a","call","to","a","windowed","agg"]}
{"code_tokens":["\n","public","RexNode","makeCorrel","(","\n","RelDataType","type,\n","CorrelationId","id",")","{","\n","return","new","RexCorrelVariable","(","id,","type",")",";","\n"],"docstring_tokens":["Creates","an","expression","referencing","a","correlation","variable"]}
{"code_tokens":["\n","public","RexNode","makeCast","(","\n","RelDataType","type,\n","RexNode","exp",")","{","\n","return","makeCast","(","type,","exp,","false",")",";","\n"],"docstring_tokens":["Creates","a","call","to","the","CAST","operator"]}
{"code_tokens":["\n","public","RexNode","makeNotNull","(","RexNode","exp",")","{","\n","final","RelDataType","type","=","exp",".","getType","(",")",";","\n","if","(","!type",".","isNullable","(",")",")","{","\n","return","exp",";","\n","}","\n","final","RelDataType","notNullType","=\n","typeFactory",".","createTypeWithNullability","(","type,","false",")",";","\n","return","makeAbstractCast","(","notNullType,","exp",")",";","\n"],"docstring_tokens":["Makes","a","cast","of","a","value","to","NOT","NULL;","no-op","if","the","type","already","has","NOT","NULL"]}
{"code_tokens":["\n","public","RexInputRef","makeInputRef","(","\n","RelDataType","type,\n","int","i",")","{","\n","type","=","SqlTypeUtil",".","addCharsetAndCollation","(","type,","typeFactory",")",";","\n","return","new","RexInputRef","(","i,","type",")",";","\n"],"docstring_tokens":["Creates","a","reference","to","a","given","field","of","the","input","record"]}
{"code_tokens":["\n","public","RexInputRef","makeInputRef","(","RelNode","input,","int","i",")","{","\n","return","makeInputRef","(","input",".","getRowType","(",")",".","getFieldList","(",")",".","get","(","i",")",".","getType","(",")",",","i",")",";","\n"],"docstring_tokens":["Creates","a","reference","to","a","given","field","of","the","input","relational","expression"]}
{"code_tokens":["\n","public","RexLiteral","makeFlag","(","Enum","flag",")","{","\n","assert","flag","!=","null",";","\n","return","makeLiteral","(","flag,\n","typeFactory",".","createSqlType","(","SqlTypeName",".","SYMBOL",")",",\n","SqlTypeName",".","SYMBOL",")",";","\n"],"docstring_tokens":["Creates","a","literal","representing","a","flag"]}
{"code_tokens":["\n","public","RexLiteral","makeExactLiteral","(","BigDecimal","bd",")","{","\n","RelDataType","relType",";","\n","int","scale","=","bd",".","scale","(",")",";","\n","assert","scale",">=","0",";","\n","assert","scale","<=","typeFactory",".","getTypeSystem","(",")",".","getMaxNumericScale","(",")",":","scale",";","\n","if","(","scale","==","0",")","{","\n","if","(","bd",".","compareTo","(","INT_MIN",")",">=","0","&&","bd",".","compareTo","(","INT_MAX",")","<=","0",")","{","\n","relType","=","typeFactory",".","createSqlType","(","SqlTypeName",".","INTEGER",")",";","\n","}","else","{","\n","relType","=","typeFactory",".","createSqlType","(","SqlTypeName",".","BIGINT",")",";","\n","}","\n","}","else","{","\n","int","precision","=","bd",".","unscaledValue","(",")",".","abs","(",")",".","toString","(",")",".","length","(",")",";","\n","if","(","precision",">","scale",")","{","\n","//","bd","is","greater","than","or","equal","to","1\n","relType","=\n","typeFactory",".","createSqlType","(","SqlTypeName",".","DECIMAL,","precision,","scale",")",";","\n","}","else","{","\n","//","bd","is","less","than","1\n","relType","=\n","typeFactory",".","createSqlType","(","SqlTypeName",".","DECIMAL,","scale","+","1,","scale",")",";","\n","}","\n","}","\n","return","makeExactLiteral","(","bd,","relType",")",";","\n"],"docstring_tokens":["Creates","a","numeric","literal"]}
{"code_tokens":["\n","public","RexLiteral","makeBigintLiteral","(","@Nullable","BigDecimal","bd",")","{","\n","RelDataType","bigintType","=\n","typeFactory",".","createSqlType","(","\n","SqlTypeName",".","BIGINT",")",";","\n","return","makeLiteral","(","bd,","bigintType,","SqlTypeName",".","DECIMAL",")",";","\n"],"docstring_tokens":["Creates","a","BIGINT","literal"]}
{"code_tokens":["\n","public","RexLiteral","makeBinaryLiteral","(","ByteString","byteString",")","{","\n","return","makeLiteral","(","\n","byteString,\n","typeFactory",".","createSqlType","(","SqlTypeName",".","BINARY,","byteString",".","length","(",")",")",",\n","SqlTypeName",".","BINARY",")",";","\n"],"docstring_tokens":["Creates","a","byte","array","literal"]}
{"code_tokens":["\n","public","RexLiteral","makeApproxLiteral","(","BigDecimal","bd",")","{","\n","//","Validator","should","catch","if","underflow","is","allowed\n","//","If","underflow","is","allowed,","let","underflow","become","zero\n","if","(","bd",".","doubleValue","(",")","==","0",")","{","\n","bd","=","BigDecimal",".","ZERO",";","\n","}","\n","return","makeApproxLiteral","(","bd,","typeFactory",".","createSqlType","(","SqlTypeName",".","DOUBLE",")",")",";","\n"],"docstring_tokens":["Creates","a","double-precision","literal"]}
{"code_tokens":["\n","public","RexLiteral","makeLiteral","(","String","s",")","{","\n","assert","s","!=","null",";","\n","return","makePreciseStringLiteral","(","s",")",";","\n"],"docstring_tokens":["Creates","a","character","string","literal"]}
{"code_tokens":["\n","protected","RexLiteral","makePreciseStringLiteral","(","String","s",")","{","\n","assert","s","!=","null",";","\n","if","(","s",".","equals","(","\"\"",")",")","{","\n","return","charEmpty",";","\n","}","\n","return","makeCharLiteral","(","new","NlsString","(","s,","null,","null",")",")",";","\n"],"docstring_tokens":["Creates","a","character","string","literal","with","type","CHAR","and","default","charset","and","collation"]}
{"code_tokens":["\n","protected","RexLiteral","makePreciseStringLiteral","(","ByteString","value,\n","String","charsetName,","SqlCollation","collation",")","{","\n","return","makeCharLiteral","(","new","NlsString","(","value,","charsetName,","collation",")",")",";","\n"],"docstring_tokens":["Creates","a","character","string","literal","with","type","CHAR"]}
{"code_tokens":["\n","public","RexLiteral","makeDateLiteral","(","DateString","date",")","{","\n","return","makeLiteral","(","Objects",".","requireNonNull","(","date,","\"date\"",")",",\n","typeFactory",".","createSqlType","(","SqlTypeName",".","DATE",")",",","SqlTypeName",".","DATE",")",";","\n"],"docstring_tokens":["Creates","a","Date","literal"]}
{"code_tokens":["\n","public","RexLiteral","makeTimeLiteral","(","TimeString","time,","int","precision",")","{","\n","return","makeLiteral","(","Objects",".","requireNonNull","(","time,","\"time\"",")",",\n","typeFactory",".","createSqlType","(","SqlTypeName",".","TIME,","precision",")",",\n","SqlTypeName",".","TIME",")",";","\n"],"docstring_tokens":["Creates","a","Time","literal"]}
{"code_tokens":["\n","public","RexLiteral","makeTimeWithLocalTimeZoneLiteral","(","\n","TimeString","time,\n","int","precision",")","{","\n","return","makeLiteral","(","Objects",".","requireNonNull","(","time,","\"time\"",")",",\n","typeFactory",".","createSqlType","(","SqlTypeName",".","TIME_WITH_LOCAL_TIME_ZONE,","precision",")",",\n","SqlTypeName",".","TIME_WITH_LOCAL_TIME_ZONE",")",";","\n"],"docstring_tokens":["Creates","a","Time","with","local","time-zone","literal"]}
{"code_tokens":["\n","public","RexLiteral","makeTimestampLiteral","(","TimestampString","timestamp,\n","int","precision",")","{","\n","return","makeLiteral","(","Objects",".","requireNonNull","(","timestamp,","\"timestamp\"",")",",\n","typeFactory",".","createSqlType","(","SqlTypeName",".","TIMESTAMP,","precision",")",",\n","SqlTypeName",".","TIMESTAMP",")",";","\n"],"docstring_tokens":["Creates","a","Timestamp","literal"]}
{"code_tokens":["\n","public","RexLiteral","makeTimestampWithLocalTimeZoneLiteral","(","\n","TimestampString","timestamp,\n","int","precision",")","{","\n","return","makeLiteral","(","Objects",".","requireNonNull","(","timestamp,","\"timestamp\"",")",",\n","typeFactory",".","createSqlType","(","SqlTypeName",".","TIMESTAMP_WITH_LOCAL_TIME_ZONE,","precision",")",",\n","SqlTypeName",".","TIMESTAMP_WITH_LOCAL_TIME_ZONE",")",";","\n"],"docstring_tokens":["Creates","a","Timestamp","with","local","time-zone","literal"]}
{"code_tokens":["\n","private","static","boolean","areAssignable","(","RexNode","arg,","List<?","extends","RexNode>","bounds",")","{","\n","for","(","RexNode","bound",":","bounds",")","{","\n","if","(","!SqlTypeUtil",".","inSameFamily","(","arg",".","getType","(",")",",","bound",".","getType","(",")",")","\n","&&","!","(","arg",".","getType","(",")",".","isStruct","(",")","&&","bound",".","getType","(",")",".","isStruct","(",")",")",")","{","\n","return","false",";","\n","}","\n","}","\n","return","true",";","\n"],"docstring_tokens":["Returns","whether","and","argument","and","bounds","are","have","types","that","are","sufficiently","compatible","to","be","converted","to","a","Sarg"]}
{"code_tokens":["\n","private","static","NlsString","padRight","(","NlsString","s,","int","length",")","{","\n","if","(","s",".","getValue","(",")",".","length","(",")",">=","length",")","{","\n","return","s",";","\n","}","\n","return","s",".","copy","(","padRight","(","s",".","getValue","(",")",",","length",")",")",";","\n"],"docstring_tokens":["Returns","an","NlsString","with","spaces","to","make","it","at","least","a","given","length"]}
{"code_tokens":["\n","public","static","Builder","builder","(","String","hintName",")","{","\n","return","new","Builder","(","hintName",")",";","\n"],"docstring_tokens":["Creates","a","hint","builder","with","specified","hint","name"]}
{"code_tokens":["\n","public","RelHint","copy","(","List<Integer>","inheritPath",")","{","\n","Objects",".","requireNonNull","(","inheritPath,","\"inheritPath\"",")",";","\n","return","new","RelHint","(","inheritPath,","hintName,","listOptions,","kvOptions",")",";","\n"],"docstring_tokens":["Returns","a","copy","of","this","hint","with","specified","inherit","path"]}
{"code_tokens":["\n","public","static","@Nullable","List<RelCollation>","enumerableHashJoin","(","RelMetadataQuery","mq,\n","RelNode","left,","RelNode","right,","JoinRelType","joinType",")","{","\n","if","(","joinType","==","JoinRelType",".","SEMI",")","{","\n","return","enumerableSemiJoin","(","mq,","left,","right",")",";","\n","}","else","{","\n","return","enumerableJoin0","(","mq,","left,","right,","joinType",")",";","\n","}","\n"],"docstring_tokens":["Returns","the","collation","of","EnumerableHashJoin","based","on","its","inputs","and","the","join","type"]}
{"code_tokens":["\n","public","static","@Nullable","List<RelCollation>","enumerableNestedLoopJoin","(","RelMetadataQuery","mq,\n","RelNode","left,","RelNode","right,","JoinRelType","joinType",")","{","\n","return","enumerableJoin0","(","mq,","left,","right,","joinType",")",";","\n"],"docstring_tokens":["Returns","the","collation","of","EnumerableNestedLoopJoin","based","on","its","inputs","and","the","join","type"]}
{"code_tokens":["\n","private","static","String","concatenate","(","List<?>","list",")","{","\n","final","StringJoiner","buf","=","new","StringJoiner","(","\"\\n\",","\"\",","\"\\n\"",")",";","\n","for","(","Object","o",":","list",")","{","\n","if","(","!","(","o","instanceof","String",")",")","{","\n","throw","new","RuntimeException","(","\n","\"each","element","of","a","string","list","must","be","a","string",";","found:","\"","+","o",")",";","\n","}","\n","buf",".","add","(","(","String",")","o",")",";","\n","}","\n","return","buf",".","toString","(",")",";","\n"],"docstring_tokens":["Converts","a","list","of","strings","into","a","multi-line","string"]}
{"code_tokens":["\n","@Deprecated","//","to","be","removed","before","2",".","0\n","public","static","ImmutableMultimap<String,","ScalarFunction>","createAll","(","\n","Class<?>","clazz",")","{","\n","final","ImmutableMultimap",".","Builder<String,","ScalarFunction>","builder","=\n","ImmutableMultimap",".","builder","(",")",";","\n","for","(","Method","method",":","clazz",".","getMethods","(",")",")","{","\n","if","(","method",".","getDeclaringClass","(",")","==","Object",".","class",")","{","\n","continue",";","\n","}","\n","if","(","!Modifier",".","isStatic","(","method",".","getModifiers","(",")",")","\n","&&","!classHasPublicZeroArgsConstructor","(","clazz",")",")","{","\n","continue",";","\n","}","\n","final","ScalarFunction","function","=","create","(","method",")",";","\n","builder",".","put","(","method",".","getName","(",")",",","function",")",";","\n","}","\n","return","builder",".","build","(",")",";","\n"],"docstring_tokens":["Creates","org.apache.calcite.schema.ScalarFunction","for","each","method","in","a","given","class"]}
{"code_tokens":["\n","public","double","rand","(",")","{","\n","if","(","random","==","null",")","{","\n","random","=","new","Random","(",")",";","\n","}","\n","return","random",".","nextDouble","(",")",";","\n"],"docstring_tokens":["Implements","the","RAND","SQL","function"]}
{"code_tokens":["\n","public","static","ImmutableBitSet","of","(",")","{","\n","return","EMPTY",";","\n"],"docstring_tokens":["Creates","an","ImmutableBitSet","with","no","bits"]}
{"code_tokens":["\n","public","static","ImmutableBitSet","fromBitSet","(","BitSet","input",")","{","\n","return","ImmutableBitSet",".","of","(","BitSets",".","toIter","(","input",")",")",";","\n"],"docstring_tokens":["Returns","a","new","immutable","bit","set","containing","all","the","bits","in","the","given","BitSet"]}
{"code_tokens":["\n","public","static","ImmutableBitSet","range","(","int","toIndex",")","{","\n","return","range","(","0,","toIndex",")",";","\n"],"docstring_tokens":["Creates","an","ImmutableBitSet","with","bits","between","0","and","toIndex","set"]}
{"code_tokens":["\n","@Pure\n","private","static","int","wordIndex","(","int","bitIndex",")","{","\n","return","bitIndex",">>","ADDRESS_BITS_PER_WORD",";","\n"],"docstring_tokens":["Given","a","bit","index,","return","word","index","containing","it"]}
{"code_tokens":["\n","public","int","cardinality","(",")","{","\n","return","countBits","(","words",")",";","\n"],"docstring_tokens":["Returns","the","number","of","bits","set","to","true","in","this","ImmutableBitSet"]}
{"code_tokens":["\n","public","int","nextClearBit","(","int","fromIndex",")","{","\n","if","(","fromIndex","<","0",")","{","\n","throw","new","IndexOutOfBoundsException","(","\"fromIndex","<","0:","\"","+","fromIndex",")",";","\n","}","\n","int","u","=","wordIndex","(","fromIndex",")",";","\n","if","(","u",">=","words",".","length",")","{","\n","return","fromIndex",";","\n","}","\n","long","word","=","~words[u]","&","(","WORD_MASK","<<","fromIndex",")",";","\n\n","while","(","true",")","{","\n","if","(","word","!=","0",")","{","\n","return","(","u","*","BITS_PER_WORD",")","+","Long",".","numberOfTrailingZeros","(","word",")",";","\n","}","\n","if","(","++u","==","words",".","length",")","{","\n","return","words",".","length","*","BITS_PER_WORD",";","\n","}","\n","word","=","~words[u]",";","\n","}","\n"],"docstring_tokens":["Returns","the","index","of","the","first","bit","that","is","set","to","false","that","occurs","on","or","after","the","specified","starting","index"]}
{"code_tokens":["\n","public","List<Integer>","toList","(",")","{","\n","final","List<Integer>","list","=","new","ArrayList<>","(",")",";","\n","for","(","int","i","=","nextSetBit","(","0",")",";","i",">=","0",";","i","=","nextSetBit","(","i","+","1",")",")","{","\n","list",".","add","(","i",")",";","\n","}","\n","return","list",";","\n"],"docstring_tokens":["Converts","this","bit","set","to","a","list"]}
{"code_tokens":["\n","public","int[]","toArray","(",")","{","\n","final","int[]","integers","=","new","int[cardinality","(",")","]",";","\n","int","j","=","0",";","\n","for","(","int","i","=","nextSetBit","(","0",")",";","i",">=","0",";","i","=","nextSetBit","(","i","+","1",")",")","{","\n","integers[j++]","=","i",";","\n","}","\n","return","integers",";","\n"],"docstring_tokens":["Converts","this","bit","set","to","an","array"]}
{"code_tokens":["\n","public","long[]","toLongArray","(",")","{","\n","return","words",".","length","==","0","?","words",":","words",".","clone","(",")",";","\n"],"docstring_tokens":["Converts","this","bit","set","to","an","array","of","little-endian","words"]}
{"code_tokens":["\n","public","ImmutableBitSet","union","(","BitSet","other",")","{","\n","return","rebuild","(",")","//","remember","\"this\"","and","try","to","re-use","later\n",".","addAll","(","BitSets",".","toIter","(","other",")",")","\n",".","build","(",")",";","\n"],"docstring_tokens":["Returns","the","union","of","this","immutable","bit","set","with","a","BitSet"]}
{"code_tokens":["\n","public","ImmutableBitSet","union","(","ImmutableBitSet","other",")","{","\n","return","rebuild","(",")","//","remember","\"this\"","and","try","to","re-use","later\n",".","addAll","(","other",")","\n",".","build","(","other",")",";","//","try","to","re-use","\"other\"\n"],"docstring_tokens":["Returns","the","union","of","this","bit","set","with","another"]}
{"code_tokens":["\n","public","static","ImmutableBitSet","union","(","\n","Iterable<?","extends","ImmutableBitSet>","sets",")","{","\n","final","Builder","builder","=","builder","(",")",";","\n","for","(","ImmutableBitSet","set",":","sets",")","{","\n","builder",".","addAll","(","set",")",";","\n","}","\n","return","builder",".","build","(",")",";","\n"],"docstring_tokens":["Returns","the","union","of","a","number","of","bit","sets"]}
{"code_tokens":["\n","public","ImmutableBitSet","except","(","ImmutableBitSet","that",")","{","\n","final","Builder","builder","=","rebuild","(",")",";","\n","builder",".","removeAll","(","that",")",";","\n","return","builder",".","build","(",")",";","\n"],"docstring_tokens":["Returns","a","bit","set","with","all","the","bits","in","this","set","that","are","not","in","another"]}
{"code_tokens":["\n","public","ImmutableBitSet","intersect","(","ImmutableBitSet","that",")","{","\n","final","Builder","builder","=","rebuild","(",")",";","\n","builder",".","intersect","(","that",")",";","\n","return","builder",".","build","(",")",";","\n"],"docstring_tokens":["Returns","a","bit","set","with","all","the","bits","set","in","both","this","set","and","in","another"]}
{"code_tokens":["\n","public","int","indexOf","(","int","bit",")","{","\n","for","(","int","i","=","nextSetBit","(","0",")",",","k","=","0",";",";","i","=","nextSetBit","(","i","+","1",")",",","++k",")","{","\n","if","(","i","<","0",")","{","\n","return","-1",";","\n","}","\n","if","(","i","==","bit",")","{","\n","return","k",";","\n","}","\n","}","\n"],"docstring_tokens":["The","ordinal","of","a","given","bit,","or","-1","if","it","is","not","set"]}
{"code_tokens":["\n","public","boolean","isEmpty","(",")","{","\n","return","words",".","length","==","0",";","\n"],"docstring_tokens":["Returns","true","if","this","ImmutableBitSet","contains","no","bits","that","are","set","to","true"]}
{"code_tokens":["\n","public","Builder","rebuild","(",")","{","\n","return","new","Rebuilder","(","this",")",";","\n"],"docstring_tokens":["Creates","a","Builder","whose","initial","contents","are","the","same","as","this","ImmutableBitSet"]}
{"code_tokens":["\n","public","int","nth","(","int","n",")","{","\n","int","start","=","0",";","\n","for","(","long","word",":","words",")","{","\n","final","int","bitCount","=","Long",".","bitCount","(","word",")",";","\n","if","(","n","<","bitCount",")","{","\n","while","(","word","!=","0",")","{","\n","if","(","(","word","&","1",")","==","1",")","{","\n","if","(","n","==","0",")","{","\n","return","start",";","\n","}","\n","--n",";","\n","}","\n","word",">>=","1",";","\n","++start",";","\n","}","\n","}","\n","start","+=","64",";","\n","n","-=","bitCount",";","\n","}","\n","throw","new","IndexOutOfBoundsException","(","\"index","out","of","range:","\"","+","n",")",";","\n"],"docstring_tokens":["Returns","the","nth","set","bit"]}
{"code_tokens":["\n","public","ImmutableBitSet","clear","(","int","i",")","{","\n","return","except","(","ImmutableBitSet",".","of","(","i",")",")",";","\n"],"docstring_tokens":["Returns","a","bit","set","the","same","as","this","but","with","a","given","bit","cleared"]}
{"code_tokens":["\n","public","ImmutableBitSet","clearIf","(","int","i,","boolean","condition",")","{","\n","return","condition","?","except","(","ImmutableBitSet",".","of","(","i",")",")",":","this",";","\n"],"docstring_tokens":["Returns","a","bit","set","the","same","as","this","but","with","a","given","bit","cleared","if","condition","is","true"]}
{"code_tokens":["\n","public","BitSet","toBitSet","(",")","{","\n","return","BitSets",".","of","(","this",")",";","\n"],"docstring_tokens":["Returns","a","BitSet","that","has","the","same","contents","as","this","ImmutableBitSet"]}
{"code_tokens":["\n","public","ImmutableBitSet","permute","(","Map<Integer,","Integer>","map",")","{","\n","final","Builder","builder","=","builder","(",")",";","\n","for","(","int","i","=","nextSetBit","(","0",")",";","i",">=","0",";","i","=","nextSetBit","(","i","+","1",")",")","{","\n","Integer","value","=","map",".","get","(","i",")",";","\n","if","(","value","==","null",")","{","\n","throw","new","NullPointerException","(","\"Index","\"","+","i","+","\"","is","not","mapped","in","\"","+","map",")",";","\n","}","\n","builder",".","set","(","value",")",";","\n","}","\n","return","builder",".","build","(",")",";","\n"],"docstring_tokens":["Permutes","a","bit","set","according","to","a","given","mapping"]}
{"code_tokens":["\n","public","static","Iterable<ImmutableBitSet>","permute","(","\n","Iterable<ImmutableBitSet>","bitSets,\n","final","Map<Integer,","Integer>","map",")","{","\n","return","Util",".","transform","(","bitSets,","bitSet","->","bitSet",".","permute","(","map",")",")",";","\n"],"docstring_tokens":["Permutes","a","collection","of","bit","sets","according","to","a","given","mapping"]}
{"code_tokens":["\n","public","static","boolean","allContain","(","Collection<ImmutableBitSet>","bitSets,","int","bit",")","{","\n","for","(","ImmutableBitSet","bitSet",":","bitSets",")","{","\n","if","(","!bitSet",".","get","(","bit",")",")","{","\n","return","false",";","\n","}","\n","}","\n","return","true",";","\n"],"docstring_tokens":["Checks","if","all","bit","sets","contain","a","particular","bit"]}
{"code_tokens":["\n","public","HepProgramBuilder","addConverters","(","boolean","guaranteed",")","{","\n","checkArgument","(","group","<","0",")",";","\n","return","addInstruction","(","new","HepInstruction",".","ConverterRules","(","guaranteed",")",")",";","\n"],"docstring_tokens":["Adds","an","instruction","to","attempt","to","match","instances","of","org.apache.calcite.rel.convert.ConverterRule,","but","only","where","a","conversion","is","actually","required"]}
{"code_tokens":["\n","public","HepProgram","build","(",")","{","\n","checkArgument","(","group","<","0",")",";","\n","HepProgram","program","=","new","HepProgram","(","instructions",")",";","\n","clear","(",")",";","\n","return","program",";","\n"],"docstring_tokens":["Returns","the","constructed","program,","clearing","the","state","of","this","program","builder","as","a","side-effect"]}
{"code_tokens":["\n","public","static","Mapping","create","(","\n","MappingType","mappingType,\n","int","sourceCount,\n","int","targetCount",")","{","\n","switch","(","mappingType",")","{","\n","case","BIJECTION:\n","assert","sourceCount","==","targetCount",";","\n","return","new","Permutation","(","sourceCount",")",";","\n","case","INVERSE_SURJECTION:\n","assert","sourceCount",">=","targetCount",";","\n","return","new","SurjectionWithInverse","(","\n","sourceCount,\n","targetCount",")",";","\n","case","PARTIAL_SURJECTION:\n","case","SURJECTION:\n","return","new","Mappings",".","PartialMapping","(","\n","sourceCount,\n","targetCount,\n","mappingType",")",";","\n","case","PARTIAL_FUNCTION:\n","case","FUNCTION:\n","return","new","PartialFunctionImpl","(","\n","sourceCount,\n","targetCount,\n","mappingType",")",";","\n","case","INVERSE_FUNCTION:\n","case","INVERSE_PARTIAL_FUNCTION:\n","return","new","InverseMapping","(","\n","create","(","mappingType",".","inverse","(",")",",","targetCount,","sourceCount",")",")",";","\n","default:\n","throw","Util",".","needToImplement","(","\n","\"no","known","implementation","for","mapping","type","\"","+","mappingType",")",";","\n","}","\n"],"docstring_tokens":["Creates","a","mapping","with","required","properties"]}
{"code_tokens":["\n","public","static","Mapping","invert","(","Mapping","mapping",")","{","\n","if","(","mapping","instanceof","InverseMapping",")","{","\n","return","(","(","InverseMapping",")","mapping",")",".","parent",";","\n","}","\n","return","new","InverseMapping","(","mapping",")",";","\n"],"docstring_tokens":["Converts","a","mapping","to","its","inverse"]}
{"code_tokens":["\n","public","static","Expression","expression","(","SchemaPlus","schema",")","{","\n","return","schema",".","getExpression","(","schema",".","getParentSchema","(",")",",","schema",".","getName","(",")",")",";","\n"],"docstring_tokens":["Returns","the","expression","for","a","schema"]}
{"code_tokens":["\n","public","static","<E>","Queryable<E>","queryable","(","DataContext","root,","SchemaPlus","schema,\n","Class<E>","clazz,","String","tableName",")","{","\n","QueryableTable","table","=","(","QueryableTable",")","requireNonNull","(","\n","schema",".","getTable","(","tableName",")",",\n","(",")","->","\"table","\"","+","tableName","+","\"","is","not","found","in","\"","+","schema",")",";","\n","QueryProvider","queryProvider","=","root",".","getQueryProvider","(",")",";","\n","return","table",".","asQueryable","(","queryProvider,","schema,","tableName",")",";","\n"],"docstring_tokens":["Returns","a","Queryable,","given","a","schema","and","table","name"]}
{"code_tokens":["\n","private","static","CalcitePrepare",".","Context","makeContext","(","\n","CalciteConnection","connection,","CalciteSchema","schema,\n","@Nullable","List<String>","schemaPath,","@Nullable","List<String>","objectPath,\n","final","ImmutableMap<CalciteConnectionProperty,","String>","propValues",")","{","\n","if","(","connection","==","null",")","{","\n","final","CalcitePrepare",".","Context","context0","=","CalcitePrepare",".","Dummy",".","peek","(",")",";","\n","final","CalciteConnectionConfig","config","=\n","mutate","(","context0",".","config","(",")",",","propValues",")",";","\n","return","makeContext","(","config,","context0",".","getTypeFactory","(",")",",\n","context0",".","getDataContext","(",")",",","schema,","schemaPath,","objectPath",")",";","\n","}","else","{","\n","final","CalciteConnectionConfig","config","=\n","mutate","(","connection",".","config","(",")",",","propValues",")",";","\n","return","makeContext","(","config,","connection",".","getTypeFactory","(",")",",\n","DataContexts",".","of","(","connection,","schema",".","root","(",")",".","plus","(",")",")",",","schema,\n","schemaPath,","objectPath",")",";","\n","}","\n"],"docstring_tokens":["Creates","a","context","for","the","purposes","of","preparing","a","statement"]}
{"code_tokens":["\n","public","static","Path","path","(","CalciteSchema","rootSchema,","Iterable<String>","names",")","{","\n","final","ImmutableList",".","Builder<Pair<String,","Schema>>","builder","=\n","ImmutableList",".","builder","(",")",";","\n","Schema","schema","=","rootSchema",".","plus","(",")",";","\n","final","Iterator<String>","iterator","=","names",".","iterator","(",")",";","\n","if","(","!iterator",".","hasNext","(",")",")","{","\n","return","PathImpl",".","EMPTY",";","\n","}","\n","if","(","!rootSchema",".","name",".","isEmpty","(",")",")","{","\n","//","If","path","starts","with","the","name","of","the","root","schema,","ignore","the","first","step\n","//","in","the","path",".","\n","Preconditions",".","checkState","(","rootSchema",".","name",".","equals","(","iterator",".","next","(",")",")",")",";","\n","}","\n","for","(",";",";",")","{","\n","final","String","name","=","iterator",".","next","(",")",";","\n","builder",".","add","(","Pair",".","of","(","name,","schema",")",")",";","\n","if","(","!iterator",".","hasNext","(",")",")","{","\n","return","path","(","builder",".","build","(",")",")",";","\n","}","\n","Schema","next","=","schema",".","getSubSchema","(","name",")",";","\n","if","(","next","==","null",")","{","\n","throw","new","IllegalArgumentException","(","\"schema","\"","+","name","+","\"","is","not","found","in","\"","+","schema",")",";","\n","}","\n","schema","=","next",";","\n","}","\n"],"docstring_tokens":["Creates","a","path","with","a","given","list","of","names","starting","from","a","given","root","schema"]}
{"code_tokens":["\n","public","static","Path","path","(","SchemaPlus","schema",")","{","\n","List<Pair<String,","Schema>>","list","=","new","ArrayList<>","(",")",";","\n","for","(","SchemaPlus","s","=","schema",";","s","!=","null",";","s","=","s",".","getParentSchema","(",")",")","{","\n","list",".","add","(","Pair",".","of","(","s",".","getName","(",")",",","s",")",")",";","\n","}","\n","return","new","PathImpl","(","ImmutableList",".","copyOf","(","Lists",".","reverse","(","list",")",")",")",";","\n"],"docstring_tokens":["Returns","the","path","to","get","to","a","schema","from","its","root"]}
{"code_tokens":["\n","private","static","CalciteConnectionConfig","connConfig","(","Context","context,\n","SqlParser",".","Config","parserConfig",")","{","\n","CalciteConnectionConfigImpl","config","=\n","context",".","maybeUnwrap","(","CalciteConnectionConfigImpl",".","class",")","\n",".","orElse","(","CalciteConnectionConfig",".","DEFAULT",")",";","\n","if","(","!config",".","isSet","(","CalciteConnectionProperty",".","CASE_SENSITIVE",")",")","{","\n","config","=","config",".","set","(","CalciteConnectionProperty",".","CASE_SENSITIVE,\n","String",".","valueOf","(","parserConfig",".","caseSensitive","(",")",")",")",";","\n","}","\n","if","(","!config",".","isSet","(","CalciteConnectionProperty",".","CONFORMANCE",")",")","{","\n","config","=","config",".","set","(","CalciteConnectionProperty",".","CONFORMANCE,\n","String",".","valueOf","(","parserConfig",".","conformance","(",")",")",")",";","\n","}","\n","return","config",";","\n"],"docstring_tokens":["Gets","a","user-defined","config","and","appends","default","connection","values"]}
{"code_tokens":["\n","public","void","addIdentity","(",")","{","\n","assert","projectRefList",".","isEmpty","(",")",";","\n","for","(","RelDataTypeField","field",":","inputRowType",".","getFieldList","(",")",")","{","\n","addProject","(","\n","new","RexInputRef","(","\n","field",".","getIndex","(",")",",\n","field",".","getType","(",")",")",",\n","field",".","getName","(",")",")",";","\n","}","\n"],"docstring_tokens":["Adds","a","project","item","for","every","input","field"]}
{"code_tokens":["\n","public","RexLocalRef","makeInputRef","(","int","index",")","{","\n","final","List<RelDataTypeField>","fields","=","inputRowType",".","getFieldList","(",")",";","\n","assert","index","<","fields",".","size","(",")",";","\n","final","RelDataTypeField","field","=","fields",".","get","(","index",")",";","\n","return","new","RexLocalRef","(","\n","index,\n","field",".","getType","(",")",")",";","\n"],"docstring_tokens":["Creates","a","reference","to","a","given","input","field"]}
{"code_tokens":["\n","public","SqlGroupedWindowFunction","auxiliary","(","SqlKind","kind",")","{","\n","return","auxiliary","(","kind",".","name","(",")",",","kind",")",";","\n"],"docstring_tokens":["Creates","an","auxiliary","function","from","this","grouped","window","function"]}
{"code_tokens":["\n","protected","static","List<Integer>","simplifyDistributionKeys","(","RelDistribution","distribution,\n","Set<Integer>","constants",")","{","\n","return","distribution",".","getKeys","(",")",".","stream","(",")","\n",".","filter","(","key","->","!constants",".","contains","(","key",")",")","\n",".","collect","(","Collectors",".","toList","(",")",")",";","\n"],"docstring_tokens":["Removes","constant","in","distribution","keys"]}
{"code_tokens":["\n","public","static","@Nullable","Boolean","toBoolean","(","@Nullable","String","str",")","{","\n","if","(","str","==","null",")","{","\n","return","null",";","\n","}","\n","str","=","str",".","trim","(",")",";","\n","if","(","str",".","equalsIgnoreCase","(","\"TRUE\"",")",")","{","\n","return","Boolean",".","TRUE",";","\n","}","else","if","(","str",".","equalsIgnoreCase","(","\"FALSE\"",")",")","{","\n","return","Boolean",".","FALSE",";","\n","}","else","if","(","str",".","equalsIgnoreCase","(","\"UNKNOWN\"",")",")","{","\n","return","null",";","\n","}","else","{","\n","throw","RESOURCE",".","invalidBoolean","(","str",")",".","ex","(",")",";","\n","}","\n"],"docstring_tokens":["Converts","a","string","into","a","BOOLEAN"]}
{"code_tokens":["\n","@Pure\n","public","SqlNode","getExplicandum","(",")","{","\n","return","explicandum",";","\n"],"docstring_tokens":["Returns","the","underlying","SQL","statement","to","be","explained"]}
{"code_tokens":["\n","@Deprecated","//","to","be","removed","before","2",".","0\n","public","boolean","isXml","(",")","{","\n","return","getFormat","(",")","==","SqlExplainFormat",".","XML",";","\n"],"docstring_tokens":["Returns","whether","result","is","to","be","in","XML","format"]}
{"code_tokens":["\n","public","boolean","isJson","(",")","{","\n","return","getFormat","(",")","==","SqlExplainFormat",".","JSON",";","\n"],"docstring_tokens":["Returns","whether","result","is","to","be","in","JSON","format"]}
{"code_tokens":["\n","private","static","RexNode","convertNvl","(","SqlRexContext","cx,","SqlCall","call",")","{","\n","final","RexBuilder","rexBuilder","=","cx",".","getRexBuilder","(",")",";","\n","final","RexNode","operand0","=\n","cx",".","convertExpression","(","call",".","getOperandList","(",")",".","get","(","0",")",")",";","\n","final","RexNode","operand1","=\n","cx",".","convertExpression","(","call",".","getOperandList","(",")",".","get","(","1",")",")",";","\n","final","RelDataType","type","=\n","cx",".","getValidator","(",")",".","getValidatedNodeType","(","call",")",";","\n","//","Preserve","Operand","Nullability\n","return","rexBuilder",".","makeCall","(","type,","SqlStdOperatorTable",".","CASE,\n","ImmutableList",".","of","(","\n","rexBuilder",".","makeCall","(","SqlStdOperatorTable",".","IS_NOT_NULL,\n","operand0",")",",\n","rexBuilder",".","makeCast","(","\n","cx",".","getTypeFactory","(",")","\n",".","createTypeWithNullability","(","type,","operand0",".","getType","(",")",".","isNullable","(",")",")",",\n","operand0",")",",\n","rexBuilder",".","makeCast","(","\n","cx",".","getTypeFactory","(",")","\n",".","createTypeWithNullability","(","type,","operand1",".","getType","(",")",".","isNullable","(",")",")",",\n","operand1",")","\n",")",")",";","\n"],"docstring_tokens":["Converts","a","call","to","the","NVL","function"]}
{"code_tokens":["\n","private","static","RexNode","convertDecode","(","SqlRexContext","cx,","SqlCall","call",")","{","\n","final","RexBuilder","rexBuilder","=","cx",".","getRexBuilder","(",")",";","\n","final","List<RexNode>","operands","=\n","convertOperands","(","cx,","call,","SqlOperandTypeChecker",".","Consistency",".","NONE",")",";","\n","final","RelDataType","type","=\n","cx",".","getValidator","(",")",".","getValidatedNodeType","(","call",")",";","\n","final","List<RexNode>","exprs","=","new","ArrayList<>","(",")",";","\n","for","(","int","i","=","1",";","i","<","operands",".","size","(",")","-","1",";","i","+=","2",")","{","\n","exprs",".","add","(","\n","RelOptUtil",".","isDistinctFrom","(","rexBuilder,","operands",".","get","(","0",")",",\n","operands",".","get","(","i",")",",","true",")",")",";","\n","exprs",".","add","(","operands",".","get","(","i","+","1",")",")",";","\n","}","\n","if","(","operands",".","size","(",")","%","2","==","0",")","{","\n","exprs",".","add","(","Util",".","last","(","operands",")",")",";","\n","}","else","{","\n","exprs",".","add","(","rexBuilder",".","makeNullLiteral","(","type",")",")",";","\n","}","\n","return","rexBuilder",".","makeCall","(","type,","SqlStdOperatorTable",".","CASE,","exprs",")",";","\n"],"docstring_tokens":["Converts","a","call","to","the","DECODE","function"]}
{"code_tokens":["\n","private","static","RexNode","convertInterval","(","SqlRexContext","cx,","SqlCall","call",")","{","\n","//","\"INTERVAL","n","HOUR\"","becomes","\"n","*","INTERVAL","'1'","HOUR\"\n","final","SqlNode","n","=","call",".","operand","(","0",")",";","\n","final","SqlIntervalQualifier","intervalQualifier","=","call",".","operand","(","1",")",";","\n","final","SqlIntervalLiteral","literal","=\n","SqlLiteral",".","createInterval","(","1,","\"1\",","intervalQualifier,\n","call",".","getParserPosition","(",")",")",";","\n","final","SqlCall","multiply","=\n","SqlStdOperatorTable",".","MULTIPLY",".","createCall","(","call",".","getParserPosition","(",")",",","n,\n","literal",")",";","\n","return","cx",".","convertExpression","(","multiply",")",";","\n"],"docstring_tokens":["Converts","an","interval","expression","to","a","numeric","multiplied","by","an","interval","literal"]}
{"code_tokens":["\n","public","RexNode","convertCase","(","\n","SqlRexContext","cx,\n","SqlCase","call",")","{","\n","SqlNodeList","whenList","=","call",".","getWhenOperands","(",")",";","\n","SqlNodeList","thenList","=","call",".","getThenOperands","(",")",";","\n","assert","whenList",".","size","(",")","==","thenList",".","size","(",")",";","\n\n","RexBuilder","rexBuilder","=","cx",".","getRexBuilder","(",")",";","\n","final","List<RexNode>","exprList","=","new","ArrayList<>","(",")",";","\n","final","RelDataTypeFactory","typeFactory","=","rexBuilder",".","getTypeFactory","(",")",";","\n","final","RexLiteral","unknownLiteral","=","rexBuilder",".","makeNullLiteral","(","\n","typeFactory",".","createSqlType","(","SqlTypeName",".","BOOLEAN",")",")",";","\n","final","RexLiteral","nullLiteral","=","rexBuilder",".","makeNullLiteral","(","\n","typeFactory",".","createSqlType","(","SqlTypeName",".","NULL",")",")",";","\n","for","(","int","i","=","0",";","i","<","whenList",".","size","(",")",";","i++",")","{","\n","if","(","SqlUtil",".","isNullLiteral","(","whenList",".","get","(","i",")",",","false",")",")","{","\n","exprList",".","add","(","unknownLiteral",")",";","\n","}","else","{","\n","exprList",".","add","(","cx",".","convertExpression","(","whenList",".","get","(","i",")",")",")",";","\n","}","\n","if","(","SqlUtil",".","isNullLiteral","(","thenList",".","get","(","i",")",",","false",")",")","{","\n","exprList",".","add","(","nullLiteral",")",";","\n","}","else","{","\n","exprList",".","add","(","cx",".","convertExpression","(","thenList",".","get","(","i",")",")",")",";","\n","}","\n","}","\n","SqlNode","elseOperand","=","call",".","getElseOperand","(",")",";","\n","if","(","SqlUtil",".","isNullLiteral","(","elseOperand,","false",")",")","{","\n","exprList",".","add","(","nullLiteral",")",";","\n","}","else","{","\n","exprList",".","add","(","cx",".","convertExpression","(","requireNonNull","(","elseOperand,","\"elseOperand\"",")",")",")",";","\n","}","\n\n","RelDataType","type","=\n","rexBuilder",".","deriveReturnType","(","call",".","getOperator","(",")",",","exprList",")",";","\n","for","(","int","i",":","elseArgs","(","exprList",".","size","(",")",")",")","{","\n","exprList",".","set","(","i,\n","rexBuilder",".","ensureType","(","type,","exprList",".","get","(","i",")",",","false",")",")",";","\n","}","\n","return","rexBuilder",".","makeCall","(","type,","SqlStdOperatorTable",".","CASE,","exprList",")",";","\n"],"docstring_tokens":["Converts","a","CASE","expression"]}
{"code_tokens":["\n","public","RexNode","convertExtract","(","\n","SqlRexContext","cx,\n","SqlExtractFunction","op,\n","SqlCall","call",")","{","\n","return","convertFunction","(","cx,","(","SqlFunction",")","call",".","getOperator","(",")",",","call",")",";","\n"],"docstring_tokens":["Converts","a","call","to","the","EXTRACT","function"]}
{"code_tokens":["\n","public","RexNode","convertCall","(","\n","@UnknownInitialization","StandardConvertletTable","this,\n","SqlRexContext","cx,\n","SqlCall","call",")","{","\n","final","SqlOperator","op","=","call",".","getOperator","(",")",";","\n","final","RexBuilder","rexBuilder","=","cx",".","getRexBuilder","(",")",";","\n","SqlOperandTypeChecker","operandTypeChecker","=","op",".","getOperandTypeChecker","(",")",";","\n","final","SqlOperandTypeChecker",".","Consistency","consistency","=\n","operandTypeChecker","==","null\n","?","SqlOperandTypeChecker",".","Consistency",".","NONE\n",":","operandTypeChecker",".","getConsistency","(",")",";","\n","final","List<RexNode>","exprs","=","convertOperands","(","cx,","call,","consistency",")",";","\n","RelDataType","type","=","rexBuilder",".","deriveReturnType","(","op,","exprs",")",";","\n\n","//","Expand","'ROW","(","x0,","x1,",".",".",".",")","=","ROW","(","y0,","y1,",".",".",".",")","'\n","//","to","'x0","=","y0","AND","x1","=","y1","AND",".",".",".","'\n","if","(","op",".","kind","==","SqlKind",".","EQUALS",")","{","\n","final","RexNode","expr0","=","RexUtil",".","removeCast","(","exprs",".","get","(","0",")",")",";","\n","final","RexNode","expr1","=","RexUtil",".","removeCast","(","exprs",".","get","(","1",")",")",";","\n","if","(","expr0",".","getKind","(",")","==","SqlKind",".","ROW","&&","expr1",".","getKind","(",")","==","SqlKind",".","ROW",")","{","\n","final","RexCall","call0","=","(","RexCall",")","expr0",";","\n","final","RexCall","call1","=","(","RexCall",")","expr1",";","\n","final","List<RexNode>","eqList","=","new","ArrayList<>","(",")",";","\n","Pair",".","forEach","(","call0",".","getOperands","(",")",",","call1",".","getOperands","(",")",",","(","x,","y",")","->\n","eqList",".","add","(","rexBuilder",".","makeCall","(","op,","x,","y",")",")",")",";","\n","return","RexUtil",".","composeConjunction","(","rexBuilder,","eqList",")",";","\n","}","\n","}","\n","return","rexBuilder",".","makeCall","(","type,","op,","RexUtil",".","flatten","(","exprs,","op",")",")",";","\n"],"docstring_tokens":["Converts","a","call","to","an","operator","into","a","RexCall","to","the","same","operator"]}
{"code_tokens":["\n","private","SqlOperatorTable","create","(","ImmutableSet<SqlLibrary>","librarySet",")","{","\n","final","ImmutableList",".","Builder<SqlOperator>","list","=","ImmutableList",".","builder","(",")",";","\n","boolean","custom","=","false",";","\n","boolean","standard","=","false",";","\n","for","(","SqlLibrary","library",":","librarySet",")","{","\n","switch","(","library",")","{","\n","case","STANDARD:\n","standard","=","true",";","\n","break",";","\n","case","SPATIAL:\n","list",".","addAll","(","SqlOperatorTables",".","spatialInstance","(",")",".","getOperatorList","(",")",")",";","\n","break",";","\n","default:\n","custom","=","true",";","\n","}","\n","}","\n\n","//","Use","reflection","to","register","the","expressions","stored","in","public","fields",".","\n","//","Skip","if","the","only","libraries","asked","for","are","\"standard\"","or","\"spatial\"",".","\n","if","(","custom",")","{","\n","for","(","Class","aClass",":","classes",")","{","\n","for","(","Field","field",":","aClass",".","getFields","(",")",")","{","\n","try","{","\n","if","(","SqlOperator",".","class",".","isAssignableFrom","(","field",".","getType","(",")",")",")","{","\n","final","SqlOperator","op","=","(","SqlOperator",")","requireNonNull","(","field",".","get","(","this",")",",\n","(",")","->","\"null","value","of","\"","+","field","+","\"","for","\"","+","this",")",";","\n","if","(","operatorIsInLibrary","(","op",".","getName","(",")",",","field,","librarySet",")",")","{","\n","list",".","add","(","op",")",";","\n","}","\n","}","\n","}","catch","(","IllegalArgumentException","|","IllegalAccessException","e",")","{","\n","throw","Util",".","throwAsRuntime","(","Util",".","causeOrSelf","(","e",")",")",";","\n","}","\n","}","\n","}","\n","}","\n","SqlOperatorTable","operatorTable","=","new","ListSqlOperatorTable","(","list",".","build","(",")",")",";","\n","if","(","standard",")","{","\n","operatorTable","=\n","SqlOperatorTables",".","chain","(","SqlStdOperatorTable",".","instance","(",")",",\n","operatorTable",")",";","\n","}","\n","return","operatorTable",";","\n"],"docstring_tokens":["Creates","an","operator","table","that","contains","operators","in","the","given","set","of","libraries"]}
{"code_tokens":["\n","public","SqlOperatorTable","getOperatorTable","(","Iterable<SqlLibrary>","librarySet",")","{","\n","try","{","\n","return","cache",".","get","(","ImmutableSet",".","copyOf","(","librarySet",")",")",";","\n","}","catch","(","ExecutionException","e",")","{","\n","throw","Util",".","throwAsRuntime","(","\"populating","SqlOperatorTable","for","library","\"\n","+","librarySet,","Util",".","causeOrSelf","(","e",")",")",";","\n","}","\n"],"docstring_tokens":["Returns","a","SQL","operator","table","that","contains","operators","in","the","given","set","of","libraries"]}
{"code_tokens":["\n","@Override","public","boolean","argumentMustBeScalar","(","int","ordinal",")","{","\n","return","ordinal","!=","0",";","\n"],"docstring_tokens":["Overrides","because","the","first","parameter","of","table-value","function","windowing","is","an","explicit","TABLE","parameter,","which","is","not","scalar"]}
{"code_tokens":["\n","public","static","<TSource>","Queryable<TSource>","asQueryable","(","\n","Enumerable<TSource>","enumerable",")","{","\n","throw","Extensions",".","todo","(",")",";","\n"],"docstring_tokens":["Converts","an","Enumerable","to","an","IQueryable"]}
{"code_tokens":["\n","public","static","<TSource,","TInner,","TResult>","Enumerable<TResult>","correlateJoin","(","\n","final","JoinType","joinType,","final","Enumerable<TSource>","outer,\n","final","Function1<TSource,","Enumerable<TInner>>","inner,\n","final","Function2<TSource,","?","super","@Nullable","TInner,","TResult>","resultSelector",")","{","\n","if","(","joinType","==","JoinType",".","RIGHT","||","joinType","==","JoinType",".","FULL",")","{","\n","throw","new","IllegalArgumentException","(","\"JoinType","\"","+","joinType","+","\"","is","not","valid","for","correlation\"",")",";","\n","}","\n\n","return","new","AbstractEnumerable<TResult>","(",")","{","\n","@Override","public","Enumerator<TResult>","enumerator","(",")","{","\n","return","new","Enumerator<TResult>","(",")","{","\n","private","final","Enumerator<TSource>","outerEnumerator","=","outer",".","enumerator","(",")",";","\n","private","@Nullable","Enumerator<TInner>","innerEnumerator",";","\n","@Nullable","TSource","outerValue",";","\n","@Nullable","TInner","innerValue",";","\n","int","state","=","0",";","//","0","--","moving","outer,","1","moving","inner",";","\n\n","@Override","public","TResult","current","(",")","{","\n","return","resultSelector",".","apply","(","castNonNull","(","outerValue",")",",","innerValue",")",";","\n","}","\n\n","@Override","public","boolean","moveNext","(",")","{","\n","while","(","true",")","{","\n","switch","(","state",")","{","\n","case","0:\n","//","move","outer\n","if","(","!outerEnumerator",".","moveNext","(",")",")","{","\n","return","false",";","\n","}","\n","outerValue","=","outerEnumerator",".","current","(",")",";","\n","//","initial","move","inner\n","Enumerable<TInner>","innerEnumerable","=","inner",".","apply","(","outerValue",")",";","\n","if","(","innerEnumerable","==","null",")","{","\n","innerEnumerable","=","Linq4j",".","emptyEnumerable","(",")",";","\n","}","\n","if","(","innerEnumerator","!=","null",")","{","\n","innerEnumerator",".","close","(",")",";","\n","}","\n","innerEnumerator","=","innerEnumerable",".","enumerator","(",")",";","\n","if","(","innerEnumerator",".","moveNext","(",")",")","{","\n","switch","(","joinType",")","{","\n","case","ANTI:\n","//","For","anti-join","need","to","try","next","outer","row\n","//","Current","does","not","match\n","continue",";","\n","case","SEMI:\n","return","true",";","//","current","row","matches\n","default:\n","break",";","\n","}","\n","//","INNER","and","LEFT","just","return","result\n","innerValue","=","innerEnumerator",".","current","(",")",";","\n","state","=","1",";","//","iterate","over","inner","results\n","return","true",";","\n","}","\n","//","No","match","detected\n","innerValue","=","null",";","\n","switch","(","joinType",")","{","\n","case","LEFT:\n","case","ANTI:\n","return","true",";","\n","default:\n","break",";","\n","}","\n","//","For","INNER","and","LEFT","need","to","find","another","outer","row\n","continue",";","\n","case","1:\n","//","subsequent","move","inner\n","Enumerator<TInner>","innerEnumerator","=","requireNonNull","(","this",".","innerEnumerator",")",";","\n","if","(","innerEnumerator",".","moveNext","(",")",")","{","\n","innerValue","=","innerEnumerator",".","current","(",")",";","\n","return","true",";","\n","}","\n","state","=","0",";","\n","//","continue","loop,","move","outer\n","break",";","\n","default:\n","break",";","\n","}","\n","}","\n","}","\n\n","@Override","public","void","reset","(",")","{","\n","state","=","0",";","\n","outerEnumerator",".","reset","(",")",";","\n","closeInner","(",")",";","\n","}","\n\n","@Override","public","void","close","(",")","{","\n","outerEnumerator",".","close","(",")",";","\n","closeInner","(",")",";","\n","outerValue","=","null",";","\n","}","\n\n","private","void","closeInner","(",")","{","\n","innerValue","=","null",";","\n","if","(","innerEnumerator","!=","null",")","{","\n","innerEnumerator",".","close","(",")",";","\n","innerEnumerator","=","null",";","\n","}","\n","}","\n","}",";","\n","}","\n","}",";","\n"],"docstring_tokens":["For","each","row","of","the","outer","enumerable","returns","the","correlated","rows","from","the","inner","enumerable"]}
{"code_tokens":["\n","public","static","<TSource>","double","max","(","Enumerable<TSource>","source,\n","DoubleFunction1<TSource>","selector",")","{","\n","return","requireNonNull","(","aggregate","(","source",".","select","(","adapt","(","selector",")",")",",","Extensions",".","DOUBLE_MAX",")",")",";","\n"],"docstring_tokens":["Invokes","a","transform","function","on","each","element","of","a","sequence","and","returns","the","maximum","Double","value"]}
{"code_tokens":["\n","public","static","<TSource>","long","max","(","Enumerable<TSource>","source,\n","LongFunction1<TSource>","selector",")","{","\n","return","requireNonNull","(","aggregate","(","source",".","select","(","adapt","(","selector",")",")",",","Extensions",".","LONG_MAX",")",")",";","\n"],"docstring_tokens":["Invokes","a","transform","function","on","each","element","of","a","sequence","and","returns","the","maximum","long","value"]}
{"code_tokens":["\n","public","static","<TSource>","float","max","(","Enumerable<TSource>","source,\n","FloatFunction1<TSource>","selector",")","{","\n","return","requireNonNull","(","aggregate","(","source",".","select","(","adapt","(","selector",")",")",",","Extensions",".","FLOAT_MAX",")",")",";","\n"],"docstring_tokens":["Invokes","a","transform","function","on","each","element","of","a","sequence","and","returns","the","maximum","Float","value"]}
{"code_tokens":["\n","public","static","<TSource>","double","min","(","Enumerable<TSource>","source,\n","DoubleFunction1<TSource>","selector",")","{","\n","return","requireNonNull","(","aggregate","(","source",".","select","(","adapt","(","selector",")",")",",","Extensions",".","DOUBLE_MIN",")",")",";","\n"],"docstring_tokens":["Invokes","a","transform","function","on","each","element","of","a","sequence","and","returns","the","minimum","Double","value"]}
{"code_tokens":["\n","public","static","<TSource>","long","min","(","Enumerable<TSource>","source,\n","LongFunction1<TSource>","selector",")","{","\n","return","aggregate","(","source",".","select","(","adapt","(","selector",")",")",",","null,","Extensions",".","LONG_MIN",")",";","\n"],"docstring_tokens":["Invokes","a","transform","function","on","each","element","of","a","sequence","and","returns","the","minimum","long","value"]}
{"code_tokens":["\n","public","static","<TSource>","float","min","(","Enumerable<TSource>","source,\n","FloatFunction1<TSource>","selector",")","{","\n","return","aggregate","(","source",".","select","(","adapt","(","selector",")",")",",","null,\n","Extensions",".","FLOAT_MIN",")",";","\n"],"docstring_tokens":["Invokes","a","transform","function","on","each","element","of","a","sequence","and","returns","the","minimum","Float","value"]}
{"code_tokens":["\n","public","SqlValidatorFixture","withLenientOperatorLookup","(","boolean","lenient",")","{","\n","return","withValidatorConfig","(","c","->","c",".","withLenientOperatorLookup","(","lenient",")",")",";","\n"],"docstring_tokens":["Returns","a","tester","that","does","not","fail","validation","if","it","encounters","an","unknown","function"]}
{"code_tokens":["\n","SqlValidatorFixture","fails","(","String","expected",")","{","\n","requireNonNull","(","expected,","\"expected\"",")",";","\n","tester",".","assertExceptionIsThrown","(","factory,","toSql","(","true",")",",","expected",")",";","\n","return","this",";","\n"],"docstring_tokens":["Checks","that","a","SQL","expression","gives","a","particular","error"]}
{"code_tokens":["\n","public","SqlValidatorFixture","assertMonotonicity","(","\n","Matcher<SqlMonotonicity>","matcher",")","{","\n","tester",".","validateAndThen","(","factory,","toSql","(","false",")",",\n","(","sap,","validator,","n",")","->","{","\n","final","RelDataType","rowType","=","validator",".","getValidatedNodeType","(","n",")",";","\n","final","SqlValidatorNamespace","selectNamespace","=\n","validator",".","getNamespace","(","n",")",";","\n","final","String","field0","=","rowType",".","getFieldList","(",")",".","get","(","0",")",".","getName","(",")",";","\n","final","SqlMonotonicity","monotonicity","=\n","selectNamespace",".","getMonotonicity","(","field0",")",";","\n","assertThat","(","monotonicity,","matcher",")",";","\n","}",")",";","\n","return","this",";","\n"],"docstring_tokens":["Tests","that","the","first","column","of","the","query","has","a","given","monotonicity"]}
{"code_tokens":["\n","public","RelFieldCollation","withFieldIndex","(","int","fieldIndex",")","{","\n","return","this",".","fieldIndex","==","fieldIndex","?","this\n",":","new","RelFieldCollation","(","fieldIndex,","direction,","nullDirection",")",";","\n"],"docstring_tokens":["Creates","a","copy","of","this","RelFieldCollation","against","a","different","field"]}
{"code_tokens":["\n","public","RelFieldCollation","withDirection","(","Direction","direction",")","{","\n","return","this",".","direction","==","direction","?","this\n",":","new","RelFieldCollation","(","fieldIndex,","direction,","nullDirection",")",";","\n"],"docstring_tokens":["Creates","a","copy","of","this","RelFieldCollation","with","a","different","direction"]}
{"code_tokens":["\n","public","RelFieldCollation","withNullDirection","(","NullDirection","nullDirection",")","{","\n","return","this",".","nullDirection","==","nullDirection","?","this\n",":","new","RelFieldCollation","(","fieldIndex,","direction,","nullDirection",")",";","\n"],"docstring_tokens":["Creates","a","copy","of","this","RelFieldCollation","with","a","different","null","direction"]}
{"code_tokens":["\n","public","RelFieldCollation","shift","(","int","offset",")","{","\n","return","withFieldIndex","(","fieldIndex","+","offset",")",";","\n"],"docstring_tokens":["Returns","a","copy","of","this","RelFieldCollation","with","the","field","index","shifted","offset","to","the","right"]}
{"code_tokens":["\n","public","static","Expression","castIfNecessary","(","Type","returnType,\n","Expression","expression",")","{","\n","final","Type","type","=","expression",".","getType","(",")",";","\n","if","(","!needTypeCast","(","type,","returnType",")",")","{","\n","return","expression",";","\n","}","\n","if","(","returnType","instanceof","Class\n","&&","Number",".","class",".","isAssignableFrom","(","(","Class",")","returnType",")","\n","&&","type","instanceof","Class\n","&&","Number",".","class",".","isAssignableFrom","(","(","Class",")","type",")",")","{","\n","//","E",".","g",".","\n","//","Integer","foo","(","BigDecimal","o",")","{","\n","//","return","o",".","intValue","(",")",";","\n","//","}","\n","return","Expressions",".","unbox","(","expression,","requireNonNull","(","Primitive",".","ofBox","(","returnType",")",")",")",";","\n","}","\n","if","(","Primitive",".","is","(","returnType",")","&&","!Primitive",".","is","(","type",")",")","{","\n","//","E",".","g",".","\n","//","int","foo","(","Object","o",")","{","\n","//","return","(","(","Integer",")","o",")",".","intValue","(",")",";","\n","//","}","\n","return","Expressions",".","unbox","(","\n","Expressions",".","convert_","(","expression,","Types",".","box","(","returnType",")",")",",\n","requireNonNull","(","Primitive",".","of","(","returnType",")",")",")",";","\n","}","\n","if","(","!Primitive",".","is","(","returnType",")","&&","Primitive",".","is","(","type",")",")","{","\n","//","E",".","g",".","\n","//","Short","foo","(","Object","o",")","{","\n","//","return","(","short",")","(","int",")","o",";","\n","//","}","\n","return","Expressions",".","convert_","(","expression,\n","Types",".","unbox","(","returnType",")",")",";","\n","}","\n","return","Expressions",".","convert_","(","expression,","returnType",")",";","\n"],"docstring_tokens":["Wraps","an","expression","in","a","cast","if","it","is","not","already","of","the","desired","type,","or","cannot","be","implicitly","converted","to","it"]}
{"code_tokens":["\n","public","static","SqlIdentifier","star","(","SqlParserPos","pos",")","{","\n","return","star","(","ImmutableList",".","of","(","\"\"",")",",","pos,","ImmutableList",".","of","(","pos",")",")",";","\n"],"docstring_tokens":["Creates","an","identifier","that","is","a","singleton","wildcard","star"]}
{"code_tokens":["\n","public","static","SqlIdentifier","star","(","List<String>","names,","SqlParserPos","pos,\n","List<SqlParserPos>","componentPositions",")","{","\n","return","new","SqlIdentifier","(","\n","Util",".","transform","(","names,","s","->","s",".","equals","(","\"*\"",")","?","\"\"",":","s",")",",","null,","pos,\n","componentPositions",")",";","\n"],"docstring_tokens":["Creates","an","identifier","that","ends","in","a","wildcard","star"]}
{"code_tokens":["\n","public","static","List<String>","toStar","(","List<String>","names",")","{","\n","return","Util",".","transform","(","names,","s","->","s",".","equals","(","\"\"",")","?","\"*\"",":","s",")",";","\n"],"docstring_tokens":["Converts","empty","strings","in","a","list","of","names","to","stars"]}
{"code_tokens":["\n","public","void","setNames","(","List<String>","names,","@Nullable","List<SqlParserPos>","poses",")","{","\n","this",".","names","=","ImmutableList",".","copyOf","(","names",")",";","\n","this",".","componentPositions","=","poses","==","null","?","null\n",":","ImmutableList",".","copyOf","(","poses",")",";","\n"],"docstring_tokens":["Modifies","the","components","of","this","identifier","and","their","positions"]}
{"code_tokens":["\n","public","SqlIdentifier","setName","(","int","i,","String","name",")","{","\n","if","(","!names",".","get","(","i",")",".","equals","(","name",")",")","{","\n","String[]","nameArray","=","names",".","toArray","(","new","String[0]",")",";","\n","nameArray[i]","=","name",";","\n","return","new","SqlIdentifier","(","ImmutableList",".","copyOf","(","nameArray",")",",","collation,","pos,\n","componentPositions",")",";","\n","}","else","{","\n","return","this",";","\n","}","\n"],"docstring_tokens":["Returns","an","identifier","that","is","the","same","as","this","except","one","modified","name"]}
{"code_tokens":["\n","public","SqlIdentifier","add","(","int","i,","String","name,","SqlParserPos","pos",")","{","\n","final","List<String>","names2","=","new","ArrayList<>","(","names",")",";","\n","names2",".","add","(","i,","name",")",";","\n","final","List<SqlParserPos>","pos2",";","\n","if","(","componentPositions","==","null",")","{","\n","pos2","=","null",";","\n","}","else","{","\n","pos2","=","new","ArrayList<>","(","componentPositions",")",";","\n","pos2",".","add","(","i,","pos",")",";","\n","}","\n","return","new","SqlIdentifier","(","names2,","collation,","pos,","pos2",")",";","\n"],"docstring_tokens":["Returns","an","identifier","that","is","the","same","as","this","except","with","a","component","added","at","a","given","position"]}
{"code_tokens":["\n","public","SqlParserPos","getComponentParserPosition","(","int","i",")","{","\n","assert","(","i",">=","0",")","&&","(","i","<","names",".","size","(",")",")",";","\n","return","(","componentPositions","==","null",")","?","getParserPosition","(",")","\n",":","componentPositions",".","get","(","i",")",";","\n"],"docstring_tokens":["Returns","the","position","of","the","ith","component","of","a","compound","identifier,","or","the","position","of","the","whole","identifier","if","that","information","is","not","present"]}
{"code_tokens":["\n","public","void","assignNamesFrom","(","SqlIdentifier","other",")","{","\n","setNames","(","other",".","names,","other",".","componentPositions",")",";","\n"],"docstring_tokens":["Copies","names","and","components","from","another","identifier"]}
{"code_tokens":["\n","public","SqlIdentifier","plus","(","String","name,","SqlParserPos","pos",")","{","\n","final","ImmutableList<String>","names","=\n","ImmutableList",".","<String>builder","(",")",".","addAll","(","this",".","names",")",".","add","(","name",")",".","build","(",")",";","\n","final","ImmutableList<SqlParserPos>","componentPositions",";","\n","final","SqlParserPos","pos2",";","\n","ImmutableList<SqlParserPos>","thisComponentPositions","=","this",".","componentPositions",";","\n","if","(","thisComponentPositions","!=","null",")","{","\n","final","ImmutableList",".","Builder<SqlParserPos>","builder","=\n","ImmutableList",".","builder","(",")",";","\n","componentPositions","=\n","builder",".","addAll","(","thisComponentPositions",")",".","add","(","pos",")",".","build","(",")",";","\n","pos2","=","SqlParserPos",".","sum","(","builder",".","add","(","this",".","pos",")",".","build","(",")",")",";","\n","}","else","{","\n","componentPositions","=","null",";","\n","pos2","=","pos",";","\n","}","\n","return","new","SqlIdentifier","(","names,","collation,","pos2,","componentPositions",")",";","\n"],"docstring_tokens":["Creates","an","identifier","that","consists","of","this","identifier","plus","a","name","segment"]}
{"code_tokens":["\n","public","SqlIdentifier","plusStar","(",")","{","\n","final","SqlIdentifier","id","=","this",".","plus","(","\"*\",","SqlParserPos",".","ZERO",")",";","\n","return","new","SqlIdentifier","(","\n","id",".","names",".","stream","(",")",".","map","(","s","->","s",".","equals","(","\"*\"",")","?","\"\"",":","s",")","\n",".","collect","(","Util",".","toImmutableList","(",")",")",",\n","null,","id",".","pos,","id",".","componentPositions",")",";","\n"],"docstring_tokens":["Creates","an","identifier","that","consists","of","this","identifier","plus","a","wildcard","star"]}
{"code_tokens":["\n","public","SqlIdentifier","skipLast","(","int","n",")","{","\n","return","getComponent","(","0,","names",".","size","(",")","-","n",")",";","\n"],"docstring_tokens":["Creates","an","identifier","that","consists","of","all","but","the","last","n","name","segments","of","this","one"]}
{"code_tokens":["\n","public","static","List<String>","simpleNames","(","List<?","extends","SqlNode>","list",")","{","\n","return","Util",".","transform","(","list,","n","->","(","(","SqlIdentifier",")","n",")",".","getSimple","(",")",")",";","\n"],"docstring_tokens":["Returns","the","simple","names","in","a","list","of","identifiers"]}
{"code_tokens":["\n","public","static","Iterable<String>","simpleNames","(","Iterable<?","extends","SqlNode>","list",")","{","\n","return","Util",".","transform","(","list,","n","->","(","(","SqlIdentifier",")","n",")",".","getSimple","(",")",")",";","\n"],"docstring_tokens":["Returns","the","simple","names","in","a","iterable","of","identifiers"]}
{"code_tokens":["\n","public","boolean","isSimple","(",")","{","\n","return","names",".","size","(",")","==","1","&&","!isStar","(",")",";","\n"],"docstring_tokens":["Returns","whether","this","is","a","simple","identifier"]}
{"code_tokens":["\n","public","boolean","isComponentQuoted","(","int","i",")","{","\n","return","componentPositions","!=","null\n","&&","componentPositions",".","get","(","i",")",".","isQuoted","(",")",";","\n"],"docstring_tokens":["Returns","whether","the","ith","component","of","a","compound","identifier","is","quoted"]}
{"code_tokens":["\n","public","static","@PolyNull","BigDecimal","toBigDecimal","(","@PolyNull","Number","number",")","{","\n","if","(","number","==","null",")","{","\n","return","castNonNull","(","null",")",";","\n","}","\n","if","(","number","instanceof","BigDecimal",")","{","\n","return","(","BigDecimal",")","number",";","\n","}","else","if","(","(","number","instanceof","Double",")","\n","||","(","number","instanceof","Float",")",")","{","\n","return","BigDecimal",".","valueOf","(","number",".","doubleValue","(",")",")",";","\n","}","else","if","(","number","instanceof","BigInteger",")","{","\n","return","new","BigDecimal","(","(","BigInteger",")","number",")",";","\n","}","else","{","\n","return","new","BigDecimal","(","number",".","longValue","(",")",")",";","\n","}","\n"],"docstring_tokens":["Converts","a","number","to","a","BigDecimal","with","the","same","value;","returns","null","if","and","only","if","the","number","is","null"]}
{"code_tokens":["\n","public","static","@PolyNull","Double","add","(","@PolyNull","Double","a,","@PolyNull","Double","b",")","{","\n","if","(","a","==","null","||","b","==","null",")","{","\n","return","null",";","\n","}","\n\n","return","a","+","b",";","\n"],"docstring_tokens":["Returns","the","sum","of","two","numbers,","or","null","if","either","is","null"]}
{"code_tokens":["\n","public","static","@PolyNull","Double","subtract","(","@PolyNull","Double","a,","@PolyNull","Double","b",")","{","\n","if","(","a","==","null","||","b","==","null",")","{","\n","return","castNonNull","(","null",")",";","\n","}","\n\n","return","a","-","b",";","\n"],"docstring_tokens":["Returns","the","difference","of","two","numbers,","or","null","if","either","is","null"]}
{"code_tokens":["\n","public","static","@Nullable","Double","divide","(","@Nullable","Double","a,","@Nullable","Double","b",")","{","\n","if","(","(","a","==","null",")","||","(","b","==","null",")","||","(","b","==","0D",")",")","{","\n","return","castNonNull","(","null",")",";","\n","}","\n\n","return","a","/","b",";","\n"],"docstring_tokens":["Returns","the","quotient","of","two","numbers,","or","null","if","either","is","null","or","the","divisor","is","zero"]}
{"code_tokens":["\n","public","static","@PolyNull","Double","multiply","(","@PolyNull","Double","a,","@PolyNull","Double","b",")","{","\n","if","(","a","==","null","||","b","==","null",")","{","\n","return","castNonNull","(","null",")",";","\n","}","\n\n","return","a","*","b",";","\n"],"docstring_tokens":["Returns","the","product","of","two","numbers,","or","null","if","either","is","null"]}
{"code_tokens":["\n","public","void","append","(","StringBuilder","buf,","int","indent,","@Nullable","Object","o",")","{","\n","if","(","o","==","null",")","{","\n","buf",".","append","(","\"null\"",")",";","\n","}","else","if","(","o","instanceof","Map",")","{","\n","//noinspection","unchecked\n","appendMap","(","buf,","indent,","(","Map",")","o",")",";","\n","}","else","if","(","o","instanceof","List",")","{","\n","appendList","(","buf,","indent,","(","List<?>",")","o",")",";","\n","}","else","if","(","o","instanceof","String",")","{","\n","buf",".","append","(","'\"'",")","\n",".","append","(","\n","(","(","String",")","o",")",".","replace","(","\"\\\"\",","\"\\\\\\\"\"",")","\n",".","replace","(","\"\\n\",","\"\\\\n\"",")",")","\n",".","append","(","'\"'",")",";","\n","}","else","{","\n","assert","o","instanceof","Number","||","o","instanceof","Boolean",";","\n","buf",".","append","(","o",")",";","\n","}","\n"],"docstring_tokens":["Appends","a","JSON","object","to","a","string","builder"]}
{"code_tokens":["\n","private","static","boolean","rowTypesAreEquivalent","(","\n","MutableRel","rel0,","MutableRel","rel1,","Litmus","litmus",")","{","\n","if","(","rel0",".","rowType",".","getFieldCount","(",")","!=","rel1",".","rowType",".","getFieldCount","(",")",")","{","\n","return","litmus",".","fail","(","\"Mismatch","for","column","count:","[","{","}","]\",","Pair",".","of","(","rel0,","rel1",")",")",";","\n","}","\n","for","(","Pair<RelDataTypeField,","RelDataTypeField>","pair\n",":","Pair",".","zip","(","rel0",".","rowType",".","getFieldList","(",")",",","rel1",".","rowType",".","getFieldList","(",")",")",")","{","\n","if","(","!pair",".","left",".","getType","(",")",".","equals","(","pair",".","right",".","getType","(",")",")",")","{","\n","return","litmus",".","fail","(","\"Mismatch","for","column","type:","[","{","}","]\",","Pair",".","of","(","rel0,","rel1",")",")",";","\n","}","\n","}","\n","return","litmus",".","succeed","(",")",";","\n"],"docstring_tokens":["Equivalence","checking","for","row","types,","but","except","for","the","field","names"]}
{"code_tokens":["\n","public","static","Pair<RexNode,","List<RexNode>>","explainCalc","(","MutableCalc","calc",")","{","\n","final","RexShuttle","shuttle","=","getExpandShuttle","(","calc",".","program",")",";","\n","final","RexNode","condition","=","shuttle",".","apply","(","calc",".","program",".","getCondition","(",")",")",";","\n","final","List<RexNode>","projects","=","new","ArrayList<>","(",")",";","\n","for","(","RexNode","rex:","shuttle",".","apply","(","calc",".","program",".","getProjectList","(",")",")",")","{","\n","projects",".","add","(","rex",")",";","\n","}","\n","if","(","condition","==","null",")","{","\n","return","Pair",".","of","(","calc",".","cluster",".","getRexBuilder","(",")",".","makeLiteral","(","true",")",",","projects",")",";","\n","}","else","{","\n","return","Pair",".","of","(","condition,","projects",")",";","\n","}","\n"],"docstring_tokens":["Explain","filtering","condition","and","projections","from","MutableCalc"]}
{"code_tokens":["\n","public","static","boolean","equalType","(","String","desc0,","MutableRel","rel0,","String","desc1,\n","MutableRel","rel1,","Litmus","litmus",")","{","\n","return","RelOptUtil",".","equal","(","desc0,","rel0",".","rowType,","desc1,","rel1",".","rowType,","litmus",")",";","\n"],"docstring_tokens":["Returns","whether","two","relational","expressions","have","the","same","row-type"]}
{"code_tokens":["\n","@API","(","since","=","\"1",".","24\",","status","=","API",".","Status",".","EXPERIMENTAL",")","\n","public","static","Pair<SqlOperator,","List<RexNode>>","normalize","(","\n","SqlOperator","operator,\n","List<RexNode>","operands",")","{","\n","final","Pair<SqlOperator,","List<RexNode>>","original","=","Pair",".","of","(","operator,","operands",")",";","\n","if","(","!allowsNormalize","(",")","||","operands",".","size","(",")","!=","2",")","{","\n","return","original",";","\n","}","\n\n","final","RexNode","operand0","=","operands",".","get","(","0",")",";","\n","final","RexNode","operand1","=","operands",".","get","(","1",")",";","\n\n","//","If","arguments","are","the","same,","then","we","normalize","<","vs",">\n","//","'<'","==","60,","'>'","==","62,","so","we","prefer","<",".","\n","final","SqlKind","kind","=","operator",".","getKind","(",")",";","\n","final","SqlKind","reversedKind","=","kind",".","reverse","(",")",";","\n","final","int","x","=","reversedKind",".","compareTo","(","kind",")",";","\n","if","(","x","<","0",")","{","\n","return","Pair",".","of","(","requireNonNull","(","operator",".","reverse","(",")",")",",\n","ImmutableList",".","of","(","operand1,","operand0",")",")",";","\n","}","\n","if","(","x",">","0",")","{","\n","return","original",";","\n","}","\n\n","if","(","!isSymmetricalCall","(","operator,","operand0,","operand1",")",")","{","\n","return","original",";","\n","}","\n\n","if","(","reorderOperands","(","operand0,","operand1",")","<","0",")","{","\n","//","$0=$1","is","the","same","as","$1=$0,","so","we","make","sure","the","digest","is","the","same","for","them",".","\n\n","//","When","$1",">","$0","is","normalized,","the","operation","needs","to","be","flipped\n","//","so","we","sort","arguments","first,","then","flip","the","sign",".","\n","return","Pair",".","of","(","requireNonNull","(","operator",".","reverse","(",")",")",",\n","ImmutableList",".","of","(","operand1,","operand0",")",")",";","\n","}","\n","return","original",";","\n"],"docstring_tokens":["Normalizes","the","variables","of","a","rex","call"]}
{"code_tokens":["\n","private","static","boolean","allowsNormalize","(",")","{","\n","return","CalciteSystemProperty",".","ENABLE_REX_DIGEST_NORMALIZE",".","value","(",")",";","\n"],"docstring_tokens":["The","digest","of","RexNode","is","normalized","by","default"]}
{"code_tokens":["\n","private","static","String","ymd","(","int","year,","int","month,","int","day",")","{","\n","Preconditions",".","checkArgument","(","year",">=","1","&&","year","<=","9999,\n","\"Year","out","of","range:\",","year",")",";","\n","Preconditions",".","checkArgument","(","month",">=","1","&&","month","<=","12,\n","\"Month","out","of","range:\",","month",")",";","\n","Preconditions",".","checkArgument","(","day",">=","1","&&","day","<=","31,\n","\"Day","out","of","range:\",","day",")",";","\n","final","StringBuilder","b","=","new","StringBuilder","(",")",";","\n","DateTimeStringUtils",".","ymd","(","b,","year,","month,","day",")",";","\n","return","b",".","toString","(",")",";","\n"],"docstring_tokens":["Validates","a","year-month-date","and","converts","to","a","string"]}
{"code_tokens":["\n","public","static","DateString","fromCalendarFields","(","Calendar","calendar",")","{","\n","return","new","DateString","(","calendar",".","get","(","Calendar",".","YEAR",")",",\n","calendar",".","get","(","Calendar",".","MONTH",")","+","1,\n","calendar",".","get","(","Calendar",".","DAY_OF_MONTH",")",")",";","\n"],"docstring_tokens":["Creates","a","DateString","from","a","Calendar"]}
{"code_tokens":["\n","public","static","boolean","isCharTypeComparable","(","\n","SqlCallBinding","binding,\n","List<SqlNode>","operands,\n","boolean","throwOnFailure",")","{","\n","requireNonNull","(","operands,","\"operands\"",")",";","\n","assert","operands",".","size","(",")",">=","2\n",":","\"operands",".","size","(",")","should","be","2","or","greater,","actual:","\"","+","operands",".","size","(",")",";","\n\n","if","(","!isCharTypeComparable","(","SqlTypeUtil",".","deriveType","(","binding,","operands",")",")",")","{","\n","if","(","throwOnFailure",")","{","\n","String","msg","=","String",".","join","(","\",","\",","Util",".","transform","(","operands,","String::valueOf",")",")",";","\n","throw","binding",".","newError","(","RESOURCE",".","operandNotComparable","(","msg",")",")",";","\n","}","\n","return","false",";","\n","}","\n","return","true",";","\n"],"docstring_tokens":["Returns","whether","the","operands","to","a","call","are","char","type-comparable"]}
{"code_tokens":["\n","@API","(","since","=","\"1",".","26\",","status","=","API",".","Status",".","EXPERIMENTAL",")","\n","public","static","RelDataType","deriveType","(","SqlCallBinding","binding",")","{","\n","return","deriveType","(","binding,","binding",".","getCall","(",")",")",";","\n"],"docstring_tokens":["Derives","type","of","the","call","via","its","binding"]}
{"code_tokens":["\n","public","static","RelDataType","makeNullableIfOperandsAre","(","\n","final","SqlValidator","validator,\n","final","SqlValidatorScope","scope,\n","final","SqlCall","call,\n","RelDataType","type",")","{","\n","for","(","SqlNode","operand",":","call",".","getOperandList","(",")",")","{","\n","RelDataType","operandType","=","validator",".","deriveType","(","scope,","operand",")",";","\n\n","if","(","containsNullable","(","operandType",")",")","{","\n","RelDataTypeFactory","typeFactory","=","validator",".","getTypeFactory","(",")",";","\n","type","=","typeFactory",".","createTypeWithNullability","(","type,","true",")",";","\n","break",";","\n","}","\n","}","\n","return","type",";","\n"],"docstring_tokens":["Recreates","a","given","RelDataType","with","nullability","iff","any","of","the","operands","of","a","call","are","nullable"]}
{"code_tokens":["\n","public","static","RelDataType","makeNullableIfOperandsAre","(","\n","final","RelDataTypeFactory","typeFactory,\n","final","List<RelDataType>","argTypes,\n","RelDataType","type",")","{","\n","requireNonNull","(","type,","\"type\"",")",";","\n","if","(","containsNullable","(","argTypes",")",")","{","\n","type","=","typeFactory",".","createTypeWithNullability","(","type,","true",")",";","\n","}","\n","return","type",";","\n"],"docstring_tokens":["Recreates","a","given","RelDataType","with","nullability","iff","any","of","the","param","argTypes","are","nullable"]}
{"code_tokens":["\n","public","static","boolean","allNullable","(","List<RelDataType>","types",")","{","\n","for","(","RelDataType","type",":","types",")","{","\n","if","(","!containsNullable","(","type",")",")","{","\n","return","false",";","\n","}","\n","}","\n","return","true",";","\n"],"docstring_tokens":["Returns","whether","all","of","array","of","types","are","nullable"]}
{"code_tokens":["\n","public","static","boolean","containsNullable","(","List<RelDataType>","types",")","{","\n","for","(","RelDataType","type",":","types",")","{","\n","if","(","containsNullable","(","type",")",")","{","\n","return","true",";","\n","}","\n","}","\n","return","false",";","\n"],"docstring_tokens":["Returns","whether","one","or","more","of","an","array","of","types","is","nullable"]}
{"code_tokens":["\n","public","static","boolean","isOfSameTypeName","(","\n","Collection<SqlTypeName>","typeNames,\n","RelDataType","type",")","{","\n","for","(","SqlTypeName","typeName",":","typeNames",")","{","\n","if","(","isOfSameTypeName","(","typeName,","type",")",")","{","\n","return","true",";","\n","}","\n","}","\n","return","false",";","\n"],"docstring_tokens":["Returns","true","if","any","element","in","typeNames","matches","type.getSqlTypeName"]}
{"code_tokens":["\n","public","static","boolean","isDatetime","(","RelDataType","type",")","{","\n","return","SqlTypeFamily",".","DATETIME",".","contains","(","type",")",";","\n"],"docstring_tokens":["Returns","whether","a","type","is","DATE,","TIME,","or","TIMESTAMP"]}
{"code_tokens":["\n","public","static","boolean","isDate","(","RelDataType","type",")","{","\n","SqlTypeName","typeName","=","type",".","getSqlTypeName","(",")",";","\n","if","(","typeName","==","null",")","{","\n","return","false",";","\n","}","\n\n","return","type",".","getSqlTypeName","(",")","==","SqlTypeName",".","DATE",";","\n"],"docstring_tokens":["Returns","whether","a","type","is","DATE"]}
{"code_tokens":["\n","public","static","boolean","isTimestamp","(","RelDataType","type",")","{","\n","return","SqlTypeFamily",".","TIMESTAMP",".","contains","(","type",")",";","\n"],"docstring_tokens":["Returns","whether","a","type","is","TIMESTAMP"]}
{"code_tokens":["\n","@SuppressWarnings","(","\"contracts",".","conditional",".","postcondition",".","not",".","satisfied\"",")","\n","@EnsuresNonNullIf","(","expression","=","\"#1",".","getIntervalQualifier","(",")","\",","result","=","true",")","\n","public","static","boolean","isInterval","(","RelDataType","type",")","{","\n","return","SqlTypeFamily",".","DATETIME_INTERVAL",".","contains","(","type",")",";","\n"],"docstring_tokens":["Returns","whether","a","type","is","some","kind","of","INTERVAL"]}
{"code_tokens":["\n","@SuppressWarnings","(","\"contracts",".","conditional",".","postcondition",".","not",".","satisfied\"",")","\n","@EnsuresNonNullIf","(","expression","=","\"#1",".","getCharset","(",")","\",","result","=","true",")","\n","@EnsuresNonNullIf","(","expression","=","\"#1",".","getCollation","(",")","\",","result","=","true",")","\n","public","static","boolean","inCharFamily","(","RelDataType","type",")","{","\n","return","type",".","getFamily","(",")","==","SqlTypeFamily",".","CHARACTER",";","\n"],"docstring_tokens":["Returns","whether","a","type","is","in","SqlTypeFamily.Character"]}
{"code_tokens":["\n","public","static","boolean","inCharFamily","(","SqlTypeName","typeName",")","{","\n","return","typeName",".","getFamily","(",")","==","SqlTypeFamily",".","CHARACTER",";","\n"],"docstring_tokens":["Returns","whether","a","type","name","is","in","SqlTypeFamily.Character"]}
{"code_tokens":["\n","public","static","boolean","inBooleanFamily","(","RelDataType","type",")","{","\n","return","type",".","getFamily","(",")","==","SqlTypeFamily",".","BOOLEAN",";","\n"],"docstring_tokens":["Returns","whether","a","type","is","in","SqlTypeFamily.Boolean"]}
{"code_tokens":["\n","public","static","boolean","inSameFamily","(","RelDataType","t1,","RelDataType","t2",")","{","\n","return","t1",".","getFamily","(",")","==","t2",".","getFamily","(",")",";","\n"],"docstring_tokens":["Returns","whether","two","types","are","in","same","type","family"]}
{"code_tokens":["\n","public","static","boolean","inCharOrBinaryFamilies","(","RelDataType","type",")","{","\n","return","(","type",".","getFamily","(",")","==","SqlTypeFamily",".","CHARACTER",")","\n","||","(","type",".","getFamily","(",")","==","SqlTypeFamily",".","BINARY",")",";","\n"],"docstring_tokens":["Returns","whether","a","type","family","is","either","character","or","binary"]}
{"code_tokens":["\n","public","static","boolean","isLob","(","RelDataType","type",")","{","\n","//","TODO","jvs","9-Dec-2004:","once","we","support","LOB","types\n","return","false",";","\n"],"docstring_tokens":["Returns","whether","a","type","is","a","LOB","of","some","kind"]}
{"code_tokens":["\n","public","static","boolean","isBoundedVariableWidth","(","RelDataType","type",")","{","\n","SqlTypeName","typeName","=","type",".","getSqlTypeName","(",")",";","\n","if","(","typeName","==","null",")","{","\n","return","false",";","\n","}","\n","switch","(","typeName",")","{","\n","case","VARCHAR:\n","case","VARBINARY:\n\n","//","TODO","angel","8-June-2005:","Multiset","should","be","LOB\n","case","MULTISET:\n","return","true",";","\n","default:\n","return","false",";","\n","}","\n"],"docstring_tokens":["Returns","whether","a","type","is","variable","width","with","bounded","precision"]}
{"code_tokens":["\n","public","static","boolean","isIntType","(","RelDataType","type",")","{","\n","SqlTypeName","typeName","=","type",".","getSqlTypeName","(",")",";","\n","if","(","typeName","==","null",")","{","\n","return","false",";","\n","}","\n","switch","(","typeName",")","{","\n","case","TINYINT:\n","case","SMALLINT:\n","case","INTEGER:\n","case","BIGINT:\n","return","true",";","\n","default:\n","return","false",";","\n","}","\n"],"docstring_tokens":["Returns","whether","a","type","is","one","of","the","integer","types"]}
{"code_tokens":["\n","public","static","boolean","isDecimal","(","RelDataType","type",")","{","\n","SqlTypeName","typeName","=","type",".","getSqlTypeName","(",")",";","\n","if","(","typeName","==","null",")","{","\n","return","false",";","\n","}","\n","return","typeName","==","SqlTypeName",".","DECIMAL",";","\n"],"docstring_tokens":["Returns","whether","a","type","is","DECIMAL"]}
{"code_tokens":["\n","public","static","boolean","isDouble","(","RelDataType","type",")","{","\n","SqlTypeName","typeName","=","type",".","getSqlTypeName","(",")",";","\n","if","(","typeName","==","null",")","{","\n","return","false",";","\n","}","\n","return","typeName","==","SqlTypeName",".","DOUBLE",";","\n"],"docstring_tokens":["Returns","whether","a","type","is","DOUBLE"]}
{"code_tokens":["\n","public","static","boolean","isBigint","(","RelDataType","type",")","{","\n","SqlTypeName","typeName","=","type",".","getSqlTypeName","(",")",";","\n","if","(","typeName","==","null",")","{","\n","return","false",";","\n","}","\n","return","typeName","==","SqlTypeName",".","BIGINT",";","\n"],"docstring_tokens":["Returns","whether","a","type","is","BIGINT"]}
{"code_tokens":["\n","public","static","boolean","isExactNumeric","(","RelDataType","type",")","{","\n","SqlTypeName","typeName","=","type",".","getSqlTypeName","(",")",";","\n","if","(","typeName","==","null",")","{","\n","return","false",";","\n","}","\n","switch","(","typeName",")","{","\n","case","TINYINT:\n","case","SMALLINT:\n","case","INTEGER:\n","case","BIGINT:\n","case","DECIMAL:\n","return","true",";","\n","default:\n","return","false",";","\n","}","\n"],"docstring_tokens":["Returns","whether","a","type","is","numeric","with","exact","precision"]}
{"code_tokens":["\n","public","static","long","maxValue","(","RelDataType","type",")","{","\n","assert","SqlTypeUtil",".","isIntType","(","type",")",";","\n","switch","(","type",".","getSqlTypeName","(",")",")","{","\n","case","TINYINT:\n","return","Byte",".","MAX_VALUE",";","\n","case","SMALLINT:\n","return","Short",".","MAX_VALUE",";","\n","case","INTEGER:\n","return","Integer",".","MAX_VALUE",";","\n","case","BIGINT:\n","return","Long",".","MAX_VALUE",";","\n","default:\n","throw","Util",".","unexpected","(","type",".","getSqlTypeName","(",")",")",";","\n","}","\n"],"docstring_tokens":["Returns","the","maximum","value","of","an","integral","type,","as","a","long","value"]}
{"code_tokens":["\n","public","static","boolean","isApproximateNumeric","(","RelDataType","type",")","{","\n","SqlTypeName","typeName","=","type",".","getSqlTypeName","(",")",";","\n","if","(","typeName","==","null",")","{","\n","return","false",";","\n","}","\n","switch","(","typeName",")","{","\n","case","FLOAT:\n","case","REAL:\n","case","DOUBLE:\n","return","true",";","\n","default:\n","return","false",";","\n","}","\n"],"docstring_tokens":["Returns","whether","a","type","is","numeric","with","approximate","precision"]}
{"code_tokens":["\n","public","static","boolean","isNumeric","(","RelDataType","type",")","{","\n","return","isExactNumeric","(","type",")","||","isApproximateNumeric","(","type",")",";","\n"],"docstring_tokens":["Returns","whether","a","type","is","numeric"]}
{"code_tokens":["\n","public","static","boolean","isNull","(","RelDataType","type",")","{","\n","SqlTypeName","typeName","=","type",".","getSqlTypeName","(",")",";","\n","if","(","typeName","==","null",")","{","\n","return","false",";","\n","}","\n","return","typeName","==","SqlTypeName",".","NULL",";","\n"],"docstring_tokens":["Returns","whether","a","type","is","the","NULL","type"]}
{"code_tokens":["\n","public","static","long","getMinValue","(","RelDataType","type",")","{","\n","SqlTypeName","typeName","=","type",".","getSqlTypeName","(",")",";","\n","switch","(","typeName",")","{","\n","case","TINYINT:\n","return","Byte",".","MIN_VALUE",";","\n","case","SMALLINT:\n","return","Short",".","MIN_VALUE",";","\n","case","INTEGER:\n","return","Integer",".","MIN_VALUE",";","\n","case","BIGINT:\n","case","DECIMAL:\n","return","NumberUtil",".","getMinUnscaled","(","type",".","getPrecision","(",")",")",".","longValue","(",")",";","\n","default:\n","throw","new","AssertionError","(","\"getMinValue","(","\"","+","typeName","+","\"",")","\"",")",";","\n","}","\n"],"docstring_tokens":["Returns","the","minimum","unscaled","value","of","a","numeric","type"]}
{"code_tokens":["\n","public","static","long","getMaxValue","(","RelDataType","type",")","{","\n","SqlTypeName","typeName","=","type",".","getSqlTypeName","(",")",";","\n","switch","(","typeName",")","{","\n","case","TINYINT:\n","return","Byte",".","MAX_VALUE",";","\n","case","SMALLINT:\n","return","Short",".","MAX_VALUE",";","\n","case","INTEGER:\n","return","Integer",".","MAX_VALUE",";","\n","case","BIGINT:\n","case","DECIMAL:\n","return","NumberUtil",".","getMaxUnscaled","(","type",".","getPrecision","(",")",")",".","longValue","(",")",";","\n","default:\n","throw","new","AssertionError","(","\"getMaxValue","(","\"","+","typeName","+","\"",")","\"",")",";","\n","}","\n"],"docstring_tokens":["Returns","the","maximum","unscaled","value","of","a","numeric","type"]}
{"code_tokens":["\n","@Deprecated","//","to","be","removed","before","2",".","0\n","public","static","@Nullable","String","getPrimitiveWrapperJavaClassName","(","@Nullable","RelDataType","type",")","{","\n","if","(","type","==","null",")","{","\n","return","null",";","\n","}","\n","SqlTypeName","typeName","=","type",".","getSqlTypeName","(",")",";","\n","if","(","typeName","==","null",")","{","\n","return","null",";","\n","}","\n\n","switch","(","typeName",")","{","\n","case","BOOLEAN:\n","return","\"Boolean\"",";","\n","default:\n","//noinspection","deprecation\n","return","getNumericJavaClassName","(","type",")",";","\n","}","\n"],"docstring_tokens":["Returns","the","class","name","of","the","wrapper","for","the","primitive","data","type"]}
{"code_tokens":["\n","@Deprecated","//","to","be","removed","before","2",".","0\n","public","static","@Nullable","String","getNumericJavaClassName","(","@Nullable","RelDataType","type",")","{","\n","if","(","type","==","null",")","{","\n","return","null",";","\n","}","\n","SqlTypeName","typeName","=","type",".","getSqlTypeName","(",")",";","\n","if","(","typeName","==","null",")","{","\n","return","null",";","\n","}","\n\n","switch","(","typeName",")","{","\n","case","TINYINT:\n","return","\"Byte\"",";","\n","case","SMALLINT:\n","return","\"Short\"",";","\n","case","INTEGER:\n","return","\"Integer\"",";","\n","case","BIGINT:\n","return","\"Long\"",";","\n","case","REAL:\n","return","\"Float\"",";","\n","case","DECIMAL:\n","case","FLOAT:\n","case","DOUBLE:\n","return","\"Double\"",";","\n","default:\n","return","null",";","\n","}","\n"],"docstring_tokens":["Returns","the","class","name","of","a","numeric","data","type"]}
{"code_tokens":["\n","public","static","boolean","canAssignFrom","(","\n","RelDataType","toType,\n","RelDataType","fromType",")","{","\n","if","(","isAny","(","toType",")","||","isAny","(","fromType",")",")","{","\n","return","true",";","\n","}","\n\n","//","TODO","jvs","2-Jan-2005:","handle","all","the","other","cases","like\n","//","rows,","collections,","UDT's\n","if","(","fromType",".","getSqlTypeName","(",")","==","SqlTypeName",".","NULL",")","{","\n","//","REVIEW","jvs","4-Dec-2008:","We","allow","assignment","from","NULL","to","any\n","//","type,","including","NOT","NULL","types,","since","in","the","case","where","no\n","//","rows","are","actually","processed,","the","assignment","is","legal\n","//","(","FRG-365",")",".","However,","it","would","be","better","if","the","validator's\n","//","NULL","type","inference","guaranteed","that","we","had","already\n","//","assigned","a","real","(","nullable",")","type","to","every","NULL","literal",".","\n","return","true",";","\n","}","\n\n","if","(","fromType",".","getSqlTypeName","(",")","==","SqlTypeName",".","ARRAY",")","{","\n","if","(","toType",".","getSqlTypeName","(",")","!=","SqlTypeName",".","ARRAY",")","{","\n","return","false",";","\n","}","\n","return","canAssignFrom","(","getComponentTypeOrThrow","(","toType",")",",","getComponentTypeOrThrow","(","fromType",")",")",";","\n","}","\n\n","if","(","areCharacterSetsMismatched","(","toType,","fromType",")",")","{","\n","return","false",";","\n","}","\n\n","return","toType",".","getFamily","(",")","==","fromType",".","getFamily","(",")",";","\n"],"docstring_tokens":["Tests","whether","a","value","can","be","assigned","to","a","site"]}
{"code_tokens":["\n","public","static","RelDataType","addCharsetAndCollation","(","\n","RelDataType","type,\n","RelDataTypeFactory","typeFactory",")","{","\n","if","(","!inCharFamily","(","type",")",")","{","\n","return","type",";","\n","}","\n","Charset","charset","=","type",".","getCharset","(",")",";","\n","if","(","charset","==","null",")","{","\n","charset","=","typeFactory",".","getDefaultCharset","(",")",";","\n","}","\n","SqlCollation","collation","=","type",".","getCollation","(",")",";","\n","if","(","collation","==","null",")","{","\n","collation","=","SqlCollation",".","IMPLICIT",";","\n","}","\n\n","//","todo:","should","get","the","implicit","collation","from","repository\n","//","instead","of","null\n","type","=\n","typeFactory",".","createTypeWithCharsetAndCollation","(","\n","type,\n","charset,\n","collation",")",";","\n","SqlValidatorUtil",".","checkCharsetAndCollateConsistentIfCharType","(","type",")",";","\n","return","type",";","\n"],"docstring_tokens":["Adds","collation","and","charset","to","a","character","type,","returns","other","types","unchanged"]}
{"code_tokens":["\n","public","static","boolean","equalSansNullability","(","\n","RelDataTypeFactory","factory,\n","RelDataType","type1,\n","RelDataType","type2",")","{","\n","if","(","type1",".","isNullable","(",")","==","type2",".","isNullable","(",")",")","{","\n","return","type1",".","equals","(","type2",")",";","\n","}","\n","return","type1",".","equals","(","\n","factory",".","createTypeWithNullability","(","type2,","type1",".","isNullable","(",")",")",")",";","\n"],"docstring_tokens":["Returns","whether","two","types","are","equal,","ignoring","nullability"]}
{"code_tokens":["\n","public","static","boolean","equalAsCollectionSansNullability","(","\n","RelDataTypeFactory","factory,\n","RelDataType","type1,\n","RelDataType","type2",")","{","\n","Preconditions",".","checkArgument","(","isCollection","(","type1",")",",\n","\"Input","type1","must","be","collection","type\"",")",";","\n","Preconditions",".","checkArgument","(","isCollection","(","type2",")",",\n","\"Input","type2","must","be","collection","type\"",")",";","\n\n","return","(","type1","==","type2",")","\n","||","(","type1",".","getSqlTypeName","(",")","==","type2",".","getSqlTypeName","(",")","\n","&&","equalSansNullability","(","\n","factory,","getComponentTypeOrThrow","(","type1",")",",","getComponentTypeOrThrow","(","type2",")",")",")",";","\n"],"docstring_tokens":["Returns","whether","two","collection","types","are","equal,","ignoring","nullability"]}
{"code_tokens":["\n","public","static","boolean","equalAsMapSansNullability","(","\n","RelDataTypeFactory","factory,\n","RelDataType","type1,\n","RelDataType","type2",")","{","\n","Preconditions",".","checkArgument","(","isMap","(","type1",")",",","\"Input","type1","must","be","map","type\"",")",";","\n","Preconditions",".","checkArgument","(","isMap","(","type2",")",",","\"Input","type2","must","be","map","type\"",")",";","\n\n","MapSqlType","mType1","=","(","MapSqlType",")","type1",";","\n","MapSqlType","mType2","=","(","MapSqlType",")","type2",";","\n","return","(","type1","==","type2",")","\n","||","(","equalSansNullability","(","factory,","mType1",".","getKeyType","(",")",",","mType2",".","getKeyType","(",")",")","\n","&&","equalSansNullability","(","factory,","mType1",".","getValueType","(",")",",","mType2",".","getValueType","(",")",")",")",";","\n"],"docstring_tokens":["Returns","whether","two","map","types","are","equal,","ignoring","nullability"]}
{"code_tokens":["\n","public","static","boolean","equalAsStructSansNullability","(","\n","RelDataTypeFactory","factory,\n","RelDataType","type1,\n","RelDataType","type2,\n","@Nullable","SqlNameMatcher","nameMatcher",")","{","\n","Preconditions",".","checkArgument","(","type1",".","isStruct","(",")",",","\"Input","type1","must","be","struct","type\"",")",";","\n","Preconditions",".","checkArgument","(","type2",".","isStruct","(",")",",","\"Input","type2","must","be","struct","type\"",")",";","\n\n","if","(","type1","==","type2",")","{","\n","return","true",";","\n","}","\n\n","if","(","type1",".","getFieldCount","(",")","!=","type2",".","getFieldCount","(",")",")","{","\n","return","false",";","\n","}","\n\n","for","(","Pair<RelDataTypeField,","RelDataTypeField>","pair\n",":","Pair",".","zip","(","type1",".","getFieldList","(",")",",","type2",".","getFieldList","(",")",")",")","{","\n","if","(","nameMatcher","!=","null\n","&&","!nameMatcher",".","matches","(","pair",".","left",".","getName","(",")",",","pair",".","right",".","getName","(",")",")",")","{","\n","return","false",";","\n","}","\n","if","(","!equalSansNullability","(","factory,","pair",".","left",".","getType","(",")",",","pair",".","right",".","getType","(",")",")",")","{","\n","return","false",";","\n","}","\n","}","\n\n","return","true",";","\n"],"docstring_tokens":["Returns","whether","two","struct","types","are","equal,","ignoring","nullability"]}
{"code_tokens":["\n","public","static","boolean","isFlat","(","RelDataType","type",")","{","\n","if","(","type",".","isStruct","(",")",")","{","\n","for","(","RelDataTypeField","field",":","type",".","getFieldList","(",")",")","{","\n","if","(","field",".","getType","(",")",".","isStruct","(",")",")","{","\n","return","false",";","\n","}","\n","}","\n","}","\n","return","true",";","\n"],"docstring_tokens":["Returns","whether","a","type","is","flat"]}
{"code_tokens":["\n","public","static","boolean","isUnicode","(","RelDataType","type",")","{","\n","Charset","charset","=","type",".","getCharset","(",")",";","\n","if","(","charset","==","null",")","{","\n","return","false",";","\n","}","\n","return","charset",".","name","(",")",".","startsWith","(","\"UTF\"",")",";","\n"],"docstring_tokens":["Checks","whether","a","type","represents","Unicode","character","data"]}
{"code_tokens":["\n","public","static","boolean","isArray","(","RelDataType","type",")","{","\n","return","type",".","getSqlTypeName","(",")","==","SqlTypeName",".","ARRAY",";","\n"],"docstring_tokens":["Returns","whether","a","type","is","ARRAY"]}
{"code_tokens":["\n","public","static","boolean","isRow","(","RelDataType","type",")","{","\n","SqlTypeName","typeName","=","type",".","getSqlTypeName","(",")",";","\n","if","(","typeName","==","null",")","{","\n","return","false",";","\n","}","\n","return","type",".","getSqlTypeName","(",")","==","SqlTypeName",".","ROW",";","\n"],"docstring_tokens":["Returns","whether","a","type","is","ROW"]}
{"code_tokens":["\n","public","static","boolean","isMap","(","RelDataType","type",")","{","\n","SqlTypeName","typeName","=","type",".","getSqlTypeName","(",")",";","\n","if","(","typeName","==","null",")","{","\n","return","false",";","\n","}","\n","return","type",".","getSqlTypeName","(",")","==","SqlTypeName",".","MAP",";","\n"],"docstring_tokens":["Returns","whether","a","type","is","MAP"]}
{"code_tokens":["\n","public","static","boolean","isMultiset","(","RelDataType","type",")","{","\n","SqlTypeName","typeName","=","type",".","getSqlTypeName","(",")",";","\n","if","(","typeName","==","null",")","{","\n","return","false",";","\n","}","\n","return","type",".","getSqlTypeName","(",")","==","SqlTypeName",".","MULTISET",";","\n"],"docstring_tokens":["Returns","whether","a","type","is","MULTISET"]}
{"code_tokens":["\n","public","static","boolean","isCollection","(","RelDataType","type",")","{","\n","SqlTypeName","typeName","=","type",".","getSqlTypeName","(",")",";","\n","if","(","typeName","==","null",")","{","\n","return","false",";","\n","}","\n","return","type",".","getSqlTypeName","(",")","==","SqlTypeName",".","ARRAY\n","||","type",".","getSqlTypeName","(",")","==","SqlTypeName",".","MULTISET",";","\n"],"docstring_tokens":["Returns","whether","a","type","is","ARRAY","or","MULTISET"]}
{"code_tokens":["\n","public","static","boolean","isCharacter","(","RelDataType","type",")","{","\n","SqlTypeName","typeName","=","type",".","getSqlTypeName","(",")",";","\n","if","(","typeName","==","null",")","{","\n","return","false",";","\n","}","\n","return","SqlTypeFamily",".","CHARACTER",".","contains","(","type",")",";","\n"],"docstring_tokens":["Returns","whether","a","type","is","CHARACTER"]}
{"code_tokens":["\n","@Deprecated","//","to","be","removed","before","2",".","0\n","public","static","boolean","hasCharactor","(","RelDataType","type",")","{","\n","return","hasCharacter","(","type",")",";","\n"],"docstring_tokens":["Returns","whether","a","type","is","a","CHARACTER","or","contains","a","CHARACTER","type"]}
{"code_tokens":["\n","public","static","boolean","isString","(","RelDataType","type",")","{","\n","SqlTypeName","typeName","=","type",".","getSqlTypeName","(",")",";","\n","if","(","typeName","==","null",")","{","\n","return","false",";","\n","}","\n","return","SqlTypeFamily",".","STRING",".","contains","(","type",")",";","\n"],"docstring_tokens":["Returns","whether","a","type","is","STRING"]}
{"code_tokens":["\n","public","static","boolean","isBoolean","(","RelDataType","type",")","{","\n","SqlTypeName","typeName","=","type",".","getSqlTypeName","(",")",";","\n","if","(","typeName","==","null",")","{","\n","return","false",";","\n","}","\n","return","SqlTypeFamily",".","BOOLEAN",".","contains","(","type",")",";","\n"],"docstring_tokens":["Returns","whether","a","type","is","BOOLEAN"]}
{"code_tokens":["\n","public","static","boolean","isBinary","(","RelDataType","type",")","{","\n","SqlTypeName","typeName","=","type",".","getSqlTypeName","(",")",";","\n","if","(","typeName","==","null",")","{","\n","return","false",";","\n","}","\n","return","SqlTypeFamily",".","BINARY",".","contains","(","type",")",";","\n"],"docstring_tokens":["Returns","whether","a","type","is","BINARY"]}
{"code_tokens":["\n","public","static","RelDataType","getMaxPrecisionScaleDecimal","(","RelDataTypeFactory","factory",")","{","\n","int","maxPrecision","=","factory",".","getTypeSystem","(",")",".","getMaxNumericPrecision","(",")",";","\n","//","scale","should","not","greater","than","precision",".","\n","int","scale","=","maxPrecision","/","2",";","\n","return","factory",".","createSqlType","(","SqlTypeName",".","DECIMAL,","maxPrecision,","scale",")",";","\n"],"docstring_tokens":["Returns","a","DECIMAL","type","with","the","maximum","precision","for","the","current","type","system"]}
{"code_tokens":["\n","public","static","RelDataType","extractLastNFields","(","RelDataTypeFactory","typeFactory,\n","RelDataType","type,","int","numToKeep",")","{","\n","assert","type",".","isStruct","(",")",";","\n","assert","type",".","getFieldCount","(",")",">=","numToKeep",";","\n","final","int","fieldsCnt","=","type",".","getFieldCount","(",")",";","\n","return","typeFactory",".","createStructType","(","\n","type",".","getFieldList","(",")",".","subList","(","fieldsCnt","-","numToKeep,","fieldsCnt",")",")",";","\n"],"docstring_tokens":["Keeps","only","the","last","N","fields","and","returns","the","new","struct","type"]}
{"code_tokens":["\n","public","static","boolean","isValidDecimalValue","(","@Nullable","BigDecimal","value,","RelDataType","toType",")","{","\n","if","(","value","==","null",")","{","\n","return","true",";","\n","}","\n","switch","(","toType",".","getSqlTypeName","(",")",")","{","\n","case","DECIMAL:\n","final","int","intDigits","=","value",".","precision","(",")","-","value",".","scale","(",")",";","\n","final","int","maxIntDigits","=","toType",".","getPrecision","(",")","-","toType",".","getScale","(",")",";","\n","return","intDigits","<=","maxIntDigits",";","\n","default:\n","return","true",";","\n","}","\n"],"docstring_tokens":["Returns","whether","the","decimal","value","is","valid","for","the","type"]}
{"code_tokens":["\n","public","static","SqlNameMatcher","withCaseSensitive","(","final","boolean","caseSensitive",")","{","\n","return","caseSensitive","?","CASE_SENSITIVE",":","CASE_INSENSITIVE",";","\n"],"docstring_tokens":["Returns","a","name","matcher","with","the","given","case","sensitivity"]}
{"code_tokens":["\n","@Override","public","String[]","readNext","(",")","throws","IOException","{","\n","String[]","result","=","null",";","\n","do","{","\n","String","nextLine","=","getNextLine","(",")",";","\n","if","(","nextLine","==","null",")","{","\n","return","null",";","\n","}","\n","String[]","r","=","parser",".","parseLineMulti","(","nextLine",")",";","\n","if","(","r",".","length",">","0",")","{","\n","if","(","result","==","null",")","{","\n","result","=","r",";","\n","}","else","{","\n","String[]","t","=","new","String[result",".","length","+","r",".","length]",";","\n","System",".","arraycopy","(","result,","0,","t,","0,","result",".","length",")",";","\n","System",".","arraycopy","(","r,","0,","t,","result",".","length,","r",".","length",")",";","\n","result","=","t",";","\n","}","\n","}","\n","}","while","(","parser",".","isPending","(",")",")",";","\n","return","result",";","\n"],"docstring_tokens":["Reads","the","next","line","from","the","buffer","and","converts","to","a","string","array"]}
{"code_tokens":["\n","@Override","public","void","close","(",")","throws","IOException","{","\n"],"docstring_tokens":["Closes","the","underlying","reader"]}
{"code_tokens":["\n","CalciteConnection","connect","(","CalciteSchema","rootSchema,\n","@Nullable","JavaTypeFactory","typeFactory",")","{","\n","return","(","CalciteConnection",")","(","(","CalciteFactory",")","factory",")","\n",".","newConnection","(","this,","factory,","CONNECT_STRING_PREFIX,","new","Properties","(",")",",\n","rootSchema,","typeFactory",")",";","\n"],"docstring_tokens":["Creates","an","internal","connection"]}
{"code_tokens":["\n","public","Expression","append","(","String","name,","BlockStatement","block,\n","boolean","optimize",")","{","\n","if","(","statements",".","size","(",")",">","0",")","{","\n","Statement","lastStatement","=","statements",".","get","(","statements",".","size","(",")","-","1",")",";","\n","if","(","lastStatement","instanceof","GotoStatement",")","{","\n","//","convert","\"return","expr",";","\"","into","\"expr",";","\"\n","statements",".","set","(","statements",".","size","(",")","-","1,\n","Expressions",".","statement","(","(","(","GotoStatement",")","lastStatement",")",".","expression",")",")",";","\n","}","\n","}","\n","Expression","result","=","null",";","\n","final","IdentityHashMap<ParameterExpression,","Expression>","replacements","=\n","new","IdentityHashMap<>","(",")",";","\n","final","Shuttle","shuttle","=","new","SubstituteVariableVisitor","(","replacements",")",";","\n","for","(","int","i","=","0",";","i","<","block",".","statements",".","size","(",")",";","i++",")","{","\n","Statement","statement","=","block",".","statements",".","get","(","i",")",";","\n","if","(","!replacements",".","isEmpty","(",")",")","{","\n","//","Save","effort,","and","only","substitute","variables","if","there","are","some",".","\n","statement","=","statement",".","accept","(","shuttle",")",";","\n","}","\n","if","(","statement","instanceof","DeclarationStatement",")","{","\n","DeclarationStatement","declaration","=","(","DeclarationStatement",")","statement",";","\n","if","(","!variables",".","contains","(","declaration",".","parameter",".","name",")",")","{","\n","add","(","statement",")",";","\n","}","else","{","\n","String","newName","=","newName","(","declaration",".","parameter",".","name,","optimize",")",";","\n","Expression","x",";","\n","//","When","initializer","is","null,","append","(","name,","initializer",")","can't","deduce","expression","type\n","if","(","declaration",".","initializer","!=","null","&&","isSafeForReuse","(","declaration",")",")","{","\n","x","=","append","(","newName,","declaration",".","initializer",")",";","\n","}","else","{","\n","ParameterExpression","pe","=","Expressions",".","parameter","(","\n","declaration",".","parameter",".","type,","newName",")",";","\n","DeclarationStatement","newDeclaration","=","Expressions",".","declare","(","\n","declaration",".","modifiers,","pe,","declaration",".","initializer",")",";","\n","x","=","pe",";","\n","add","(","newDeclaration",")",";","\n","}","\n","statement","=","null",";","\n","result","=","x",";","\n","if","(","declaration",".","parameter","!=","x",")","{","\n","//","declaration",".","parameter","can","be","equal","to","x","if","exactly","the","same\n","//","declaration","was","present","in","BlockBuilder\n","replacements",".","put","(","declaration",".","parameter,","x",")",";","\n","}","\n","}","\n","}","else","{","\n","add","(","statement",")",";","\n","}","\n","if","(","i","==","block",".","statements",".","size","(",")","-","1",")","{","\n","if","(","statement","instanceof","DeclarationStatement",")","{","\n","result","=","(","(","DeclarationStatement",")","statement",")",".","parameter",";","\n","}","else","if","(","statement","instanceof","GotoStatement",")","{","\n","statements",".","remove","(","statements",".","size","(",")","-","1",")",";","\n","result","=","append_","(","name,\n","requireNonNull","(","(","(","GotoStatement",")","statement",")",".","expression,","\"expression\"",")",",\n","optimize",")",";","\n","if","(","isSimpleExpression","(","result",")",")","{","\n","//","already","simple",";","no","need","to","declare","a","variable","or\n","//","even","to","evaluate","the","expression\n","}","else","{","\n","DeclarationStatement","declare","=","Expressions",".","declare","(","Modifier",".","FINAL,\n","newName","(","name,","optimize",")",",","result",")",";","\n","add","(","declare",")",";","\n","result","=","declare",".","parameter",";","\n","}","\n","}","else","{","\n","//","not","an","expression","--","result","remains","null\n","}","\n","}","\n","}","\n","return","requireNonNull","(","result,","(",")","->","\"empty","result","when","appending","name=\"","+","name","+","\",","\"","+","block",")",";","\n"],"docstring_tokens":["Appends","an","expression","to","a","list","of","statements,","optionally","optimizing","it","to","a","variable","if","it","is","used","more","than","once"]}
{"code_tokens":["\n","public","Expression","append","(","String","name,","Expression","expression,\n","boolean","optimize",")","{","\n","if","(","statements",".","size","(",")",">","0",")","{","\n","Statement","lastStatement","=","statements",".","get","(","statements",".","size","(",")","-","1",")",";","\n","if","(","lastStatement","instanceof","GotoStatement",")","{","\n","//","convert","\"return","expr",";","\"","into","\"expr",";","\"\n","statements",".","set","(","statements",".","size","(",")","-","1,\n","Expressions",".","statement","(","(","(","GotoStatement",")","lastStatement",")",".","expression",")",")",";","\n","}","\n","}","\n","return","append_","(","name,","expression,","optimize",")",";","\n"],"docstring_tokens":["Appends","an","expression","to","a","list","of","statements,","optionally","optimizing","if","the","expression","is","used","more","than","once"]}
{"code_tokens":["\n","private","static","Expression","normalizeDeclaration","(","DeclarationStatement","decl",")","{","\n","Expression","expr","=","decl",".","initializer",";","\n","Type","declType","=","decl",".","parameter",".","getType","(",")",";","\n","if","(","expr","==","null",")","{","\n","expr","=","Expressions",".","constant","(","null,","declType",")",";","\n","}","else","if","(","expr",".","getType","(",")","!=","declType",")","{","\n","expr","=","Expressions",".","convert_","(","expr,","declType",")",";","\n","}","\n","return","expr",";","\n"],"docstring_tokens":["Prepares","declaration","for","inlining,","adds","cast"]}
{"code_tokens":["\n","public","BlockStatement","toBlock","(",")","{","\n","if","(","optimizing","&&","removeUnused",")","{","\n","//","We","put","an","artificial","limit","of","10","iterations","just","to","prevent","an","endless\n","//","loop",".","Optimize","should","not","loop","forever,","however","it","is","hard","to","prove","if\n","//","it","always","finishes","in","reasonable","time",".","\n","for","(","int","i","=","0",";","i","<","10",";","i++",")","{","\n","if","(","!optimize","(","createOptimizeShuttle","(",")",",","true",")",")","{","\n","break",";","\n","}","\n","}","\n","optimize","(","createFinishingOptimizeShuttle","(",")",",","false",")",";","\n","}","\n","return","Expressions",".","block","(","statements",")",";","\n"],"docstring_tokens":["Returns","a","block","consisting","of","the","current","list","of","statements"]}
{"code_tokens":["\n","private","boolean","optimize","(","Shuttle","optimizer,","boolean","performInline",")","{","\n","int","optimizeCount","=","0",";","\n","final","UseCounter","useCounter","=","new","UseCounter","(",")",";","\n","for","(","Statement","statement",":","statements",")","{","\n","if","(","statement","instanceof","DeclarationStatement","&&","performInline",")","{","\n","DeclarationStatement","decl","=","(","DeclarationStatement",")","statement",";","\n","useCounter",".","map",".","put","(","decl",".","parameter,","new","Slot","(",")",")",";","\n","}","\n","//","We","are","added","only","counters","up","to","current","statement",".","\n","//","It","is","fine","to","count","usages","as","the","latter","declarations","cannot","be","used\n","//","in","more","recent","statements",".","\n","if","(","!useCounter",".","map",".","isEmpty","(",")",")","{","\n","statement",".","accept","(","useCounter",")",";","\n","}","\n","}","\n","final","IdentityHashMap<ParameterExpression,","Expression>","subMap","=\n","new","IdentityHashMap<>","(","useCounter",".","map",".","size","(",")",")",";","\n","final","Shuttle","visitor","=","new","InlineVariableVisitor","(","\n","subMap",")",";","\n","final","ArrayList<Statement>","oldStatements","=","new","ArrayList<>","(","statements",")",";","\n","statements",".","clear","(",")",";","\n\n","for","(","Statement","oldStatement",":","oldStatements",")","{","\n","if","(","oldStatement","instanceof","DeclarationStatement",")","{","\n","DeclarationStatement","statement","=","(","DeclarationStatement",")","oldStatement",";","\n","final","Slot","slot","=","useCounter",".","map",".","get","(","statement",".","parameter",")",";","\n","int","count","=","slot","==","null","?","Integer",".","MAX_VALUE","-","10",":","slot",".","count",";","\n","if","(","count",">","1","&&","isSimpleExpression","(","statement",".","initializer",")",")","{","\n","//","Inline","simple","final","constants\n","count","=","1",";","\n","}","\n","if","(","!isSafeForReuse","(","statement",")",")","{","\n","//","Don't","inline","variables","that","are","not","final",".","They","might","be","assigned\n","//","more","than","once",".","\n","count","=","100",";","\n","}","\n","if","(","isCostly","(","statement",")",")","{","\n","//","Don't","inline","variables","that","are","costly,","such","as","\"new","MyFunction","(",")","\"",".","\n","//","Later","we","will","make","their","declarations","static",".","\n","count","=","100",";","\n","}","\n","if","(","statement",".","parameter",".","name",".","startsWith","(","\"_\"",")",")","{","\n","//","Don't","inline","variables","whose","name","begins","with","\"_\"",".","This\n","//","is","a","hacky","way","to","prevent","inlining",".","E",".","g",".","\n","//","final","int","_count","=","collection",".","size","(",")",";","\n","//","foo","(","collection",")",";","\n","//","return","collection",".","size","(",")","-","_count",";","\n","count","=","Integer",".","MAX_VALUE",";","\n","}","\n","if","(","statement",".","initializer","instanceof","NewExpression\n","&&","(","(","NewExpression",")","statement",".","initializer",")",".","memberDeclarations\n","!=","null",")","{","\n","//","Don't","inline","anonymous","inner","classes",".","Janino","gets\n","//","confused","referencing","variables","from","deeply","nested\n","//","anonymous","classes",".","\n","count","=","Integer",".","MAX_VALUE",";","\n","}","\n","Expression","normalized","=","normalizeDeclaration","(","statement",")",";","\n","expressionForReuse",".","remove","(","normalized",")",";","\n","switch","(","count",")","{","\n","case","0:\n","//","Only","declared,","never","used",".","Throw","away","declaration",".","\n","break",";","\n","case","1:\n","//","declared,","used","once",".","inline","it",".","\n","subMap",".","put","(","statement",".","parameter,","normalized",")",";","\n","break",";","\n","default:\n","Statement","beforeOptimize","=","oldStatement",";","\n","if","(","!subMap",".","isEmpty","(",")",")","{","\n","oldStatement","=","oldStatement",".","accept","(","visitor",")",";","//","remap\n","}","\n","oldStatement","=","oldStatement",".","accept","(","optimizer",")",";","\n","if","(","beforeOptimize","!=","oldStatement",")","{","\n","++optimizeCount",";","\n","if","(","count","!=","Integer",".","MAX_VALUE\n","&&","oldStatement","instanceof","DeclarationStatement\n","&&","isSafeForReuse","(","(","DeclarationStatement",")","oldStatement",")","\n","&&","isSimpleExpression","(","\n","(","(","DeclarationStatement",")","oldStatement",")",".","initializer",")",")","{","\n","//","Allow","to","inline","the","expression","that","became","simple","after\n","//","optimizations",".","\n","DeclarationStatement","newDecl","=\n","(","DeclarationStatement",")","oldStatement",";","\n","subMap",".","put","(","newDecl",".","parameter,","normalizeDeclaration","(","newDecl",")",")",";","\n","oldStatement","=","OptimizeShuttle",".","EMPTY_STATEMENT",";","\n","}","\n","}","\n","if","(","oldStatement","!=","OptimizeShuttle",".","EMPTY_STATEMENT",")","{","\n","if","(","oldStatement","instanceof","DeclarationStatement",")","{","\n","addExpressionForReuse","(","(","DeclarationStatement",")","oldStatement",")",";","\n","}","\n","statements",".","add","(","oldStatement",")",";","\n","}","\n","break",";","\n","}","\n","}","else","{","\n","Statement","beforeOptimize","=","oldStatement",";","\n","if","(","!subMap",".","isEmpty","(",")",")","{","\n","oldStatement","=","oldStatement",".","accept","(","visitor",")",";","//","remap\n","}","\n","oldStatement","=","oldStatement",".","accept","(","optimizer",")",";","\n","if","(","beforeOptimize","!=","oldStatement",")","{","\n","++optimizeCount",";","\n","}","\n","if","(","oldStatement","!=","OptimizeShuttle",".","EMPTY_STATEMENT",")","{","\n","statements",".","add","(","oldStatement",")",";","\n","}","\n","}","\n","}","\n","return","optimizeCount",">","0",";","\n"],"docstring_tokens":["Optimizes","the","list","of","statements"]}
{"code_tokens":["\n","public","String","newName","(","String","suggestion",")","{","\n","int","i","=","0",";","\n","String","candidate","=","suggestion",";","\n","while","(","hasVariable","(","candidate",")",")","{","\n","candidate","=","suggestion","+","i++",";","\n","}","\n","return","candidate",";","\n"],"docstring_tokens":["Creates","a","name","for","a","new","variable,","unique","within","this","block"]}
{"code_tokens":["\n","public","SqlParserPos","plusAll","(","Collection<?","extends","@Nullable","SqlNode>","nodes",")","{","\n","final","PosBuilder","b","=","new","PosBuilder","(","this",")",";","\n","for","(","SqlNode","node",":","nodes",")","{","\n","if","(","node","!=","null",")","{","\n","b",".","add","(","node",".","getParserPosition","(",")",")",";","\n","}","\n","}","\n","return","b",".","build","(","this",")",";","\n"],"docstring_tokens":["Combines","this","parser","position","with","a","list","of","positions"]}
{"code_tokens":["\n","public","static","<C","extends","Comparable<C>>","RangeSet<C>","minus","(","RangeSet<C>","rangeSet,\n","Range<C>","range",")","{","\n","final","TreeRangeSet<C>","mutableRangeSet","=","TreeRangeSet",".","create","(","rangeSet",")",";","\n","mutableRangeSet",".","remove","(","range",")",";","\n","return","mutableRangeSet",".","equals","(","rangeSet",")","?","rangeSet\n",":","ImmutableRangeSet",".","copyOf","(","mutableRangeSet",")",";","\n"],"docstring_tokens":["Subtracts","a","range","from","a","range","set"]}
{"code_tokens":["\n","public","static","<C","extends","Comparable<C>>","int","compare","(","RangeSet<C>","s0,\n","RangeSet<C>","s1",")","{","\n","final","Iterator<Range<C>>","i0","=","s0",".","asRanges","(",")",".","iterator","(",")",";","\n","final","Iterator<Range<C>>","i1","=","s1",".","asRanges","(",")",".","iterator","(",")",";","\n","for","(",";",";",")","{","\n","final","boolean","h0","=","i0",".","hasNext","(",")",";","\n","final","boolean","h1","=","i1",".","hasNext","(",")",";","\n","if","(","!h0","||","!h1",")","{","\n","return","Boolean",".","compare","(","h0,","h1",")",";","\n","}","\n","final","Range<C>","r0","=","i0",".","next","(",")",";","\n","final","Range<C>","r1","=","i1",".","next","(",")",";","\n","int","c","=","compare","(","r0,","r1",")",";","\n","if","(","c","!=","0",")","{","\n","return","c",";","\n","}","\n","}","\n"],"docstring_tokens":["Compares","two","range","sets"]}
{"code_tokens":["\n","public","static","<C","extends","Comparable<C>>","boolean","isPoint","(","Range<C>","range",")","{","\n","return","range",".","hasLowerBound","(",")","\n","&&","range",".","hasUpperBound","(",")","\n","&&","range",".","lowerEndpoint","(",")",".","equals","(","range",".","upperEndpoint","(",")",")","\n","&&","!range",".","isEmpty","(",")",";","\n"],"docstring_tokens":["Returns","whether","a","range","is","a","point"]}
{"code_tokens":["\n","public","static","<C","extends","Comparable<C>>","boolean","isOpenInterval","(","RangeSet<C>","rangeSet",")","{","\n","if","(","rangeSet",".","isEmpty","(",")",")","{","\n","return","false",";","\n","}","\n","final","Set<Range<C>>","ranges","=","rangeSet",".","asRanges","(",")",";","\n","final","Range<C>","range","=","ranges",".","iterator","(",")",".","next","(",")",";","\n","return","ranges",".","size","(",")","==","1\n","&&","(","!range",".","hasLowerBound","(",")","||","!range",".","hasUpperBound","(",")",")",";","\n"],"docstring_tokens":["Returns","whether","a","range","set","is","a","single","open","interval"]}
{"code_tokens":["\n","public","static","<C","extends","Comparable<C>,","R>","R","map","(","Range<C>","range,\n","Handler<C,","R>","handler",")","{","\n","if","(","range",".","hasLowerBound","(",")","&&","range",".","hasUpperBound","(",")",")","{","\n","final","C","lower","=","range",".","lowerEndpoint","(",")",";","\n","final","C","upper","=","range",".","upperEndpoint","(",")",";","\n","if","(","range",".","lowerBoundType","(",")","==","BoundType",".","OPEN",")","{","\n","if","(","range",".","upperBoundType","(",")","==","BoundType",".","OPEN",")","{","\n","return","handler",".","open","(","lower,","upper",")",";","\n","}","else","{","\n","return","handler",".","openClosed","(","lower,","upper",")",";","\n","}","\n","}","else","{","\n","if","(","range",".","upperBoundType","(",")","==","BoundType",".","OPEN",")","{","\n","return","handler",".","closedOpen","(","lower,","upper",")",";","\n","}","else","{","\n","if","(","lower",".","equals","(","upper",")",")","{","\n","return","handler",".","singleton","(","lower",")",";","\n","}","else","{","\n","return","handler",".","closed","(","lower,","upper",")",";","\n","}","\n","}","\n","}","\n","}","else","if","(","range",".","hasLowerBound","(",")",")","{","\n","final","C","lower","=","range",".","lowerEndpoint","(",")",";","\n","if","(","range",".","lowerBoundType","(",")","==","BoundType",".","OPEN",")","{","\n","return","handler",".","greaterThan","(","lower",")",";","\n","}","else","{","\n","return","handler",".","atLeast","(","lower",")",";","\n","}","\n","}","else","if","(","range",".","hasUpperBound","(",")",")","{","\n","final","C","upper","=","range",".","upperEndpoint","(",")",";","\n","if","(","range",".","upperBoundType","(",")","==","BoundType",".","OPEN",")","{","\n","return","handler",".","lessThan","(","upper",")",";","\n","}","else","{","\n","return","handler",".","atMost","(","upper",")",";","\n","}","\n","}","else","{","\n","return","handler",".","all","(",")",";","\n","}","\n"],"docstring_tokens":["Calls","the","appropriate","handler","method","for","the","type","of","range"]}
{"code_tokens":["\n","public","static","<C","extends","Comparable<C>,","C2","extends","Comparable<C2>>\n","RangeSet<C2>","copy","(","RangeSet<C>","rangeSet,","Function<C,","C2>","map",")","{","\n","return","map","(","rangeSet,","new","CopyingHandler<C,","C2>","(",")","{","\n","@Override","C2","convert","(","C","c",")","{","\n","return","map",".","apply","(","c",")",";","\n","}","\n","}",")",";","\n"],"docstring_tokens":["Copies","a","range","set"]}
{"code_tokens":["\n","Cache","cache","(",")","{","\n","requireStatus","(","AbstractLauncher",".","Status",".","ONLINE",")",";","\n","return","CacheFactory",".","getAnyInstance","(",")",";","\n"],"docstring_tokens":["Returns","current","cache","instance","which","was","initialized","for","tests"]}
{"code_tokens":["\n","public","static","Consumer<List>","elasticsearchChecker","(","final","String",".",".",".","strings",")","{","\n","Objects",".","requireNonNull","(","strings,","\"strings\"",")",";","\n","return","a","->","{","\n","ObjectNode","actual","=","a","==","null","||","a",".","isEmpty","(",")","?","null\n",":","(","(","ObjectNode",")","a",".","get","(","0",")",")",";","\n\n","actual","=","expandDots","(","actual",")",";","\n","try","{","\n\n","String","json","=","\"","{","\"","+","Arrays",".","stream","(","strings",")",".","collect","(","Collectors",".","joining","(","\",\"",")",")","+","\"","}","\"",";","\n","ObjectNode","expected","=","(","ObjectNode",")","MAPPER",".","readTree","(","json",")",";","\n","expected","=","expandDots","(","expected",")",";","\n\n","if","(","!expected",".","equals","(","actual",")",")","{","\n","assertEquals","(","MAPPER",".","writeValueAsString","(","expected",")",",","MAPPER",".","writeValueAsString","(","actual",")",",\n","\"expected","and","actual","Elasticsearch","queries","do","not","match\"",")",";","\n","}","\n","}","catch","(","IOException","e",")","{","\n","throw","new","UncheckedIOException","(","e",")",";","\n","}","\n","}",";","\n"],"docstring_tokens":["Returns","a","function","that","checks","that","a","particular","Elasticsearch","pipeline","is","generated","to","implement","a","query"]}
{"code_tokens":["\n","static","Table","create","(","DruidSchema","druidSchema,","String","dataSourceName,\n","List<Interval>","intervals,","Map<String,","SqlTypeName>","fieldMap,\n","Set<String>","metricNameSet,","String","timestampColumnName,\n","Map<String,","List<ComplexMetric>>","complexMetrics",")","{","\n","final","ImmutableMap<String,","SqlTypeName>","fields","=\n","ImmutableMap",".","copyOf","(","fieldMap",")",";","\n","return","new","DruidTable","(","druidSchema,\n","dataSourceName,\n","new","MapRelProtoDataType","(","fields,","timestampColumnName",")",",\n","ImmutableSet",".","copyOf","(","metricNameSet",")",",\n","timestampColumnName,\n","intervals,\n","complexMetrics,\n","fieldMap",")",";","\n"],"docstring_tokens":["Creates","a","DruidTable","by","copying","the","given","parameters"]}
{"code_tokens":["\n","public","static","boolean","isDynamicStarColName","(","String","name",")","{","\n","return","name",".","startsWith","(","DYNAMIC_STAR_PREFIX",")",";","\n"],"docstring_tokens":["Returns","true","if","the","column","name","starts","with","DYNAMIC_STAR_PREFIX"]}
{"code_tokens":["\n","public","static","ConnectionFactory","empty","(",")","{","\n","return","EMPTY",";","\n"],"docstring_tokens":["Returns","an","empty","connection","factory"]}
{"code_tokens":["\n","public","static","RexCallBinding","create","(","RelDataTypeFactory","typeFactory,\n","RexCall","call,\n","List<RelCollation>","inputCollations",")","{","\n","return","create","(","typeFactory,","call,","null,","inputCollations",")",";","\n"],"docstring_tokens":["Creates","a","binding","of","the","appropriate","type"]}
{"code_tokens":["\n","public","static","RexCallBinding","create","(","RelDataTypeFactory","typeFactory,\n","RexCall","call,","@Nullable","RexProgram","program,\n","List<RelCollation>","inputCollations",")","{","\n","final","List<RexNode>","operands","=\n","program","!=","null","?","program",".","expandList","(","call",".","getOperands","(",")",")","\n",":","call",".","getOperands","(",")",";","\n","switch","(","call",".","getKind","(",")",")","{","\n","case","CAST:\n","return","new","RexCastCallBinding","(","typeFactory,","call",".","getOperator","(",")",",\n","operands,","call",".","getType","(",")",",","inputCollations",")",";","\n","default:\n","return","new","RexCallBinding","(","typeFactory,","call",".","getOperator","(",")",",\n","operands,","inputCollations",")",";","\n","}","\n"],"docstring_tokens":["Creates","a","binding","of","the","appropriate","type,","optionally","with","a","program"]}
{"code_tokens":["\n","private","void","postOrderWalk","(","Operator","root,","PlanPreVisitor","visitor",")","throws","FrontendException","{","\n","if","(","root","==","null","||","visitor",".","preVisit","(","(","LogicalRelationalOperator",")","root",")",")","{","\n","return",";","\n","}","\n\n","Collection<Operator>","nexts","=\n","Utils",".","mergeCollection","(","plan",".","getPredecessors","(","root",")",",","plan",".","getSoftLinkPredecessors","(","root",")",")",";","\n","if","(","nexts","!=","null",")","{","\n","for","(","Operator","op",":","nexts",")","{","\n","postOrderWalk","(","op,","visitor",")",";","\n","}","\n","}","\n","root",".","accept","(","visitor",")",";","\n"],"docstring_tokens":["Does","post-order","walk","on","the","Pig","logical","relational","plans","from","sinks","to","sources"]}
{"code_tokens":["\n","public","static","void","addFunctions","(","SchemaPlus","schema,","@Nullable","String","functionName,\n","List<String>","path,","String","className,","@Nullable","String","methodName,","boolean","upCase",")","{","\n","final","Class<?>","clazz",";","\n","try","{","\n","clazz","=","Class",".","forName","(","className",")",";","\n","}","catch","(","ClassNotFoundException","e",")","{","\n","throw","new","RuntimeException","(","\"UDF","class","'\"\n","+","className","+","\"'","not","found\"",")",";","\n","}","\n","String","methodNameOrDefault","=","Util",".","first","(","methodName,","\"eval\"",")",";","\n","String","actualFunctionName",";","\n","if","(","functionName","!=","null",")","{","\n","actualFunctionName","=","functionName",";","\n","}","else","{","\n","actualFunctionName","=","methodNameOrDefault",";","\n","}","\n","if","(","upCase",")","{","\n","actualFunctionName","=","actualFunctionName",".","toUpperCase","(","Locale",".","ROOT",")",";","\n","}","\n","final","TableFunction","tableFunction","=\n","TableFunctionImpl",".","create","(","clazz,","methodNameOrDefault",")",";","\n","if","(","tableFunction","!=","null",")","{","\n","schema",".","add","(","Util",".","first","(","functionName,","methodNameOrDefault",")",",\n","tableFunction",")",";","\n","return",";","\n","}","\n","//","Must","look","for","TableMacro","before","ScalarFunction",".","Both","have","an","\"eval\"\n","//","method",".","\n","final","TableMacro","macro","=","TableMacroImpl",".","create","(","clazz",")",";","\n","if","(","macro","!=","null",")","{","\n","schema",".","add","(","actualFunctionName,","macro",")",";","\n","return",";","\n","}","\n","if","(","methodName","!=","null","&&","methodName",".","equals","(","\"*\"",")",")","{","\n","for","(","Map",".","Entry<String,","Function>","entry\n",":","ScalarFunctionImpl",".","functions","(","clazz",")",".","entries","(",")",")","{","\n","String","name","=","entry",".","getKey","(",")",";","\n","if","(","upCase",")","{","\n","name","=","name",".","toUpperCase","(","Locale",".","ROOT",")",";","\n","}","\n","schema",".","add","(","name,","entry",".","getValue","(",")",")",";","\n","}","\n","return",";","\n","}","else","{","\n","final","ScalarFunction","function","=\n","ScalarFunctionImpl",".","create","(","clazz,","methodNameOrDefault",")",";","\n","if","(","function","!=","null",")","{","\n","schema",".","add","(","actualFunctionName,","function",")",";","\n","return",";","\n","}","\n","}","\n","if","(","methodName","==","null",")","{","\n","final","AggregateFunction","aggFunction","=","AggregateFunctionImpl",".","create","(","clazz",")",";","\n","if","(","aggFunction","!=","null",")","{","\n","schema",".","add","(","actualFunctionName,","aggFunction",")",";","\n","return",";","\n","}","\n","}","\n","throw","new","RuntimeException","(","\"Not","a","valid","function","class:","\"","+","clazz\n","+","\"",".","Scalar","functions","and","table","macros","have","an","'eval'","method",";","\"\n","+","\"aggregate","functions","have","'init'","and","'add'","methods,","and","optionally","\"\n","+","\"'initAdd',","'merge'","and","'result'","methods",".","\"",")",";","\n"],"docstring_tokens":["Creates","and","validates","a","ScalarFunctionImpl,","and","adds","it","to","a","schema"]}
{"code_tokens":["\n","public","static","boolean","isPureOrder","(","RelNode","rel",")","{","\n","return","!isLimit","(","rel",")","&&","isOrder","(","rel",")",";","\n"],"docstring_tokens":["Whether","this","node","is","a","sort","without","limit","specification"]}
{"code_tokens":["\n","public","static","Set<RelOptTable>","findTables","(","RelNode","rel",")","{","\n","return","new","LinkedHashSet<>","(","findAllTables","(","rel",")",")",";","\n"],"docstring_tokens":["Returns","a","set","of","tables","used","by","this","expression","or","its","children"]}
{"code_tokens":["\n","public","static","void","go","(","\n","RelVisitor","visitor,\n","RelNode","p",")","{","\n","try","{","\n","visitor",".","go","(","p",")",";","\n","}","catch","(","Exception","e",")","{","\n","throw","new","RuntimeException","(","\"while","visiting","tree\",","e",")",";","\n","}","\n"],"docstring_tokens":["Sets","a","RelVisitor","going","on","a","given","relational","expression,","and","returns","the","result"]}
{"code_tokens":["\n","public","static","void","verifyTypeEquivalence","(","\n","RelNode","originalRel,\n","RelNode","newRel,\n","Object","equivalenceClass",")","{","\n","RelDataType","expectedRowType","=","originalRel",".","getRowType","(",")",";","\n","RelDataType","actualRowType","=","newRel",".","getRowType","(",")",";","\n\n","//","Row","types","must","be","the","same,","except","for","field","names",".","\n","if","(","areRowTypesEqual","(","expectedRowType,","actualRowType,","false",")",")","{","\n","return",";","\n","}","\n\n","String","s","=","\"Cannot","add","expression","of","different","type","to","set:\\n\"\n","+","\"set","type","is","\"","+","expectedRowType",".","getFullTypeString","(",")","\n","+","\"\\nexpression","type","is","\"","+","actualRowType",".","getFullTypeString","(",")","\n","+","\"\\nset","is","\"","+","equivalenceClass",".","toString","(",")","\n","+","\"\\nexpression","is","\"","+","RelOptUtil",".","toString","(","newRel",")",";","\n","throw","new","AssertionError","(","s",")",";","\n"],"docstring_tokens":["Verifies","that","a","row","type","being","added","to","an","equivalence","class","matches","the","existing","type,","raising","an","assertion","if","this","is","not","the","case"]}
{"code_tokens":["\n","public","static","RelNode","createFilter","(","RelNode","child,\n","Iterable<?","extends","RexNode>","conditions",")","{","\n","return","createFilter","(","child,","conditions,","RelFactories",".","DEFAULT_FILTER_FACTORY",")",";","\n"],"docstring_tokens":["Creates","a","filter,","using","the","default","filter","factory,","or","returns","the","original","relational","expression","if","the","condition","is","trivial"]}
{"code_tokens":["\n","public","static","Set<Integer>","getAllFields2","(","ImmutableBitSet","groupSet,\n","List<AggregateCall>","aggCallList",")","{","\n","final","Set<Integer>","allFields","=","new","TreeSet<>","(",")",";","\n","allFields",".","addAll","(","groupSet",".","asList","(",")",")",";","\n","for","(","AggregateCall","aggregateCall",":","aggCallList",")","{","\n","allFields",".","addAll","(","aggregateCall",".","getArgList","(",")",")",";","\n","if","(","aggregateCall",".","filterArg",">=","0",")","{","\n","allFields",".","add","(","aggregateCall",".","filterArg",")",";","\n","}","\n","if","(","aggregateCall",".","distinctKeys","!=","null",")","{","\n","allFields",".","addAll","(","aggregateCall",".","distinctKeys",".","asList","(",")",")",";","\n","}","\n","allFields",".","addAll","(","RelCollations",".","ordinals","(","aggregateCall",".","collation",")",")",";","\n","}","\n","return","allFields",";","\n"],"docstring_tokens":["Gets","all","fields","in","an","aggregate"]}
{"code_tokens":["\n","public","static","String","dumpPlan","(","\n","String","header,\n","RelNode","rel,\n","SqlExplainFormat","format,\n","SqlExplainLevel","detailLevel",")","{","\n","StringWriter","sw","=","new","StringWriter","(",")",";","\n","PrintWriter","pw","=","new","PrintWriter","(","sw",")",";","\n","if","(","!header",".","equals","(","\"\"",")",")","{","\n","pw",".","println","(","header",")",";","\n","}","\n","RelWriter","planWriter",";","\n","switch","(","format",")","{","\n","case","XML:\n","planWriter","=","new","RelXmlWriter","(","pw,","detailLevel",")",";","\n","break",";","\n","case","JSON:\n","planWriter","=","new","RelJsonWriter","(",")",";","\n","rel",".","explain","(","planWriter",")",";","\n","return","(","(","RelJsonWriter",")","planWriter",")",".","asString","(",")",";","\n","case","DOT:\n","planWriter","=","new","RelDotWriter","(","pw,","detailLevel,","false",")",";","\n","break",";","\n","default:\n","planWriter","=","new","RelWriterImpl","(","pw,","detailLevel,","false",")",";","\n","}","\n","rel",".","explain","(","planWriter",")",";","\n","pw",".","flush","(",")",";","\n","return","sw",".","toString","(",")",";","\n"],"docstring_tokens":["Dumps","a","plan","as","a","string"]}
{"code_tokens":["\n","public","static","String","toString","(","final","RelNode","rel",")","{","\n","return","toString","(","rel,","SqlExplainLevel",".","EXPPLAN_ATTRIBUTES",")",";","\n"],"docstring_tokens":["Converts","a","relational","expression","to","a","string,","showing","just","basic","attributes"]}
{"code_tokens":["\n","public","static","@PolyNull","String","toString","(","\n","final","@PolyNull","RelNode","rel,\n","SqlExplainLevel","detailLevel",")","{","\n","if","(","rel","==","null",")","{","\n","return","null",";","\n","}","\n","final","StringWriter","sw","=","new","StringWriter","(",")",";","\n","final","RelWriter","planWriter","=\n","new","RelWriterImpl","(","\n","new","PrintWriter","(","sw",")",",","detailLevel,","false",")",";","\n","rel",".","explain","(","planWriter",")",";","\n","return","sw",".","toString","(",")",";","\n"],"docstring_tokens":["Converts","a","relational","expression","to","a","string;","returns","null","if","and","only","if","rel","is","null"]}
{"code_tokens":["\n","public","static","List<RexNode>","disjunctions","(","RexNode","rexPredicate",")","{","\n","final","List<RexNode>","list","=","new","ArrayList<>","(",")",";","\n","decomposeDisjunction","(","rexPredicate,","list",")",";","\n","return","list",";","\n"],"docstring_tokens":["Returns","a","condition","decomposed","by","OR"]}
{"code_tokens":["\n","public","static","Map<Integer,","RexNode>","getColumnConstraints","(","\n","ModifiableView","modifiableViewTable,","RelDataType","targetRowType,\n","RelDataTypeFactory","typeFactory",")","{","\n","final","RexBuilder","rexBuilder","=","new","RexBuilder","(","typeFactory",")",";","\n","final","RexNode","constraint","=\n","modifiableViewTable",".","getConstraint","(","rexBuilder,","targetRowType",")",";","\n","final","Map<Integer,","RexNode>","projectMap","=","new","HashMap<>","(",")",";","\n","final","List<RexNode>","filters","=","new","ArrayList<>","(",")",";","\n","RelOptUtil",".","inferViewPredicates","(","projectMap,","filters,","constraint",")",";","\n","assert","filters",".","isEmpty","(",")",";","\n","return","projectMap",";","\n"],"docstring_tokens":["Returns","a","mapping","of","the","column","ordinal","in","the","underlying","table","to","a","column","constraint","of","the","modifiable","view"]}
{"code_tokens":["\n","public","static","RelNode","replaceInput","(","\n","RelNode","parent,","int","ordinal,","RelNode","newInput",")","{","\n","final","List<RelNode>","inputs","=","new","ArrayList<>","(","parent",".","getInputs","(",")",")",";","\n","if","(","inputs",".","get","(","ordinal",")","==","newInput",")","{","\n","return","parent",";","\n","}","\n","inputs",".","set","(","ordinal,","newInput",")",";","\n","return","parent",".","copy","(","parent",".","getTraitSet","(",")",",","inputs",")",";","\n"],"docstring_tokens":["Returns","a","shallow","copy","of","a","relational","expression","with","a","particular","input","replaced"]}
{"code_tokens":["\n","public","static","RelDataType","permute","(","RelDataTypeFactory","typeFactory,\n","RelDataType","rowType,","Mapping","mapping",")","{","\n","return","typeFactory",".","createStructType","(","\n","Mappings",".","apply3","(","mapping,","rowType",".","getFieldList","(",")",")",")",";","\n"],"docstring_tokens":["Permutes","a","record","type","according","to","a","mapping"]}
{"code_tokens":["\n","public","static","RelNode","createProject","(","final","RelNode","child,\n","final","List<Integer>","posList",")","{","\n","return","createProject","(","\n","RelFactories",".","DEFAULT_PROJECT_FACTORY,","child,","posList",")",";","\n"],"docstring_tokens":["Creates","a","relational","expression","that","projects","the","given","fields","of","the","input"]}
{"code_tokens":["\n","private","Ord<RelDataType>","getNewFieldForOldInput","(","int","oldOrdinal,","int","innerOrdinal",")","{","\n","//","sum","of","predecessors","post","flatten","sizes","points","to","new","ordinal\n","//","of","flat","field","or","first","field","of","flattened","struct\n","final","int","postFlatteningOrdinal","=","getCurrentRelOrThrow","(",")",".","getInputs","(",")",".","stream","(",")","\n",".","flatMap","(","node","->","node",".","getRowType","(",")",".","getFieldList","(",")",".","stream","(",")",")","\n",".","limit","(","oldOrdinal",")","\n",".","map","(","RelDataTypeField::getType",")","\n",".","mapToInt","(","this::postFlattenSize",")","\n",".","sum","(",")",";","\n","final","int","newOrdinal","=","postFlatteningOrdinal","+","innerOrdinal",";","\n","//","NoSuchElementException","may","be","thrown","because","of","two","reasons:\n","//","1",".","postFlattenSize","(",")","didn't","predict","well\n","//","2",".","innerOrdinal","has","wrong","value\n","RelDataTypeField","newField","=","getNewInputFieldByNewOrdinal","(","newOrdinal",")",";","\n","return","Ord",".","of","(","newOrdinal,","newField",".","getType","(",")",")",";","\n"],"docstring_tokens":["Finds","type","and","new","ordinal","relative","to","new","inputs","by","oldOrdinal","and","innerOrdinal","indexes"]}
{"code_tokens":["\n","private","boolean","noFlatteningForInput","(","int","fieldIdx",")","{","\n","final","List<RelNode>","inputs","=","getCurrentRelOrThrow","(",")",".","getInputs","(",")",";","\n","int","fieldCnt","=","0",";","\n","for","(","RelNode","input",":","inputs",")","{","\n","fieldCnt","+=","input",".","getRowType","(",")",".","getFieldCount","(",")",";","\n","if","(","fieldCnt",">","fieldIdx",")","{","\n","return","getNewForOldRel","(","input",")",".","getRowType","(",")",".","getFieldList","(",")",".","size","(",")","\n","==","input",".","getRowType","(",")",".","getFieldList","(",")",".","size","(",")",";","\n","}","\n","}","\n","return","false",";","\n"],"docstring_tokens":["Returns","whether","the","old","field","at","index","fieldIdx","was","not","flattened"]}
{"code_tokens":["\n","private","Mappings",".","TargetMapping","getNewForOldInputMapping","(","RelNode","oldRel",")","{","\n","final","RelNode","newRel","=","getNewForOldRel","(","oldRel",")",";","\n","return","Mappings",".","target","(","\n","this::getNewForOldInput,\n","oldRel",".","getRowType","(",")",".","getFieldCount","(",")",",\n","newRel",".","getRowType","(",")",".","getFieldCount","(",")",")",";","\n"],"docstring_tokens":["Returns","a","mapping","between","old","and","new","fields"]}
{"code_tokens":["\n","private","void","flattenInputs","(","List<RelDataTypeField>","fieldList,","RexNode","prefix,\n","List<Pair<RexNode,","String>>","flattenedExpList",")","{","\n","for","(","RelDataTypeField","field",":","fieldList",")","{","\n","final","RexNode","ref","=\n","rexBuilder",".","makeFieldAccess","(","prefix,","field",".","getIndex","(",")",")",";","\n","if","(","field",".","getType","(",")",".","isStruct","(",")",")","{","\n","final","List<RelDataTypeField>","structFields","=","field",".","getType","(",")",".","getFieldList","(",")",";","\n","flattenInputs","(","structFields,","ref,","flattenedExpList",")",";","\n","}","else","{","\n","flattenedExpList",".","add","(","Pair",".","of","(","ref,","field",".","getName","(",")",")",")",";","\n","}","\n","}","\n"],"docstring_tokens":["Generates","expressions","that","reference","the","flattened","input","fields","from","a","given","row","type"]}
{"code_tokens":["\n","@Override","public","CalciteSchema","add","(","String","name,","Schema","schema",")","{","\n","final","CalciteSchema","calciteSchema","=\n","new","CachingCalciteSchema","(","this,","schema,","name",")",";","\n","subSchemaMap",".","put","(","name,","calciteSchema",")",";","\n","return","calciteSchema",";","\n"],"docstring_tokens":["Adds","a","child","schema","of","this","schema"]}
{"code_tokens":["\n","public","final","SqlCall","createCall","(","\n","@Nullable","SqlLiteral","functionQualifier,\n","SqlParserPos","pos,\n","Iterable<?","extends","@Nullable","SqlNode>","operands",")","{","\n","return","createCall","(","functionQualifier,","pos,\n","Iterables",".","toArray","(","operands,","SqlNode",".","class",")",")",";","\n"],"docstring_tokens":["Creates","a","call","to","this","operator","with","a","list","of","operands"]}
{"code_tokens":["\n","public","SqlCall","createCall","(","\n","@Nullable","SqlLiteral","functionQualifier,\n","SqlParserPos","pos,\n","@Nullable","SqlNode",".",".",".","operands",")","{","\n","pos","=","pos",".","plusAll","(","operands",")",";","\n","return","new","SqlBasicCall","(","this,","ImmutableNullableList",".","copyOf","(","operands",")",",","pos,\n","functionQualifier",")",";","\n"],"docstring_tokens":["Creates","a","call","to","this","operator","with","an","array","of","operands"]}
{"code_tokens":["\n","public","final","SqlCall","createCall","(","\n","SqlNodeList","nodeList",")","{","\n","return","createCall","(","\n","null,\n","nodeList",".","getParserPosition","(",")",",\n","nodeList",".","toArray","(","new","SqlNode[0]",")",")",";","\n"],"docstring_tokens":["Creates","a","call","to","this","operator","with","a","list","of","operands","contained","in","a","SqlNodeList"]}
{"code_tokens":["\n","public","final","RelDataType","validateOperands","(","\n","SqlValidator","validator,\n","@Nullable","SqlValidatorScope","scope,\n","SqlCall","call",")","{","\n","//","Let","subclasses","know","what's","up",".","\n","preValidateCall","(","validator,","scope,","call",")",";","\n\n","//","Check","the","number","of","operands\n","checkOperandCount","(","validator,","operandTypeChecker,","call",")",";","\n\n","SqlCallBinding","opBinding","=","new","SqlCallBinding","(","validator,","scope,","call",")",";","\n\n","checkOperandTypes","(","\n","opBinding,\n","true",")",";","\n\n","//","Now","infer","the","result","type",".","\n","RelDataType","ret","=","inferReturnType","(","opBinding",")",";","\n","validator",".","setValidatedNodeType","(","call,","ret",")",";","\n","return","ret",";","\n"],"docstring_tokens":["Validates","the","operands","of","a","call,","inferring","the","return","type","in","the","process"]}
{"code_tokens":["\n","boolean","needsSpace","(",")","{","\n","return","true",";","\n"],"docstring_tokens":["Returns","whether","this","operator","should","be","surrounded","by","space","when","unparsed"]}
{"code_tokens":["\n","protected","RelDataType","adjustType","(","\n","SqlValidator","validator,\n","final","SqlCall","call,\n","RelDataType","type",")","{","\n","return","type",";","\n"],"docstring_tokens":["Validates","and","determines","coercibility","and","resulting","collation","name","of","binary","operator","if","needed"]}
{"code_tokens":["\n","public","final","RelDataType","inferReturnType","(","\n","RelDataTypeFactory","typeFactory,\n","List<RelDataType>","operandTypes",")","{","\n","return","inferReturnType","(","\n","new","ExplicitOperatorBinding","(","\n","typeFactory,\n","this,\n","operandTypes",")",")",";","\n"],"docstring_tokens":["Infers","the","type","of","a","call","to","this","operator","with","a","given","set","of","operand","types"]}
{"code_tokens":["\n","public","<R>","@Nullable","R","acceptCall","(","SqlVisitor<R>","visitor,","SqlCall","call",")","{","\n","for","(","SqlNode","operand",":","call",".","getOperandList","(",")",")","{","\n","if","(","operand","==","null",")","{","\n","continue",";","\n","}","\n","operand",".","accept","(","visitor",")",";","\n","}","\n","return","null",";","\n"],"docstring_tokens":["Accepts","a","SqlVisitor,","visiting","each","operand","of","a","call"]}
{"code_tokens":["\n","@Deprecated","//","to","be","removed","before","2",".","0\n","public","SqlMonotonicity","getMonotonicity","(","\n","SqlCall","call,\n","SqlValidatorScope","scope",")","{","\n","return","getMonotonicity","(","\n","new","SqlCallBinding","(","scope",".","getValidator","(",")",",","scope,","call",")",")",";","\n"],"docstring_tokens":["Returns","whether","this","operator","is","monotonic"]}
{"code_tokens":["\n","public","List<T>","traitList","(",")","{","\n","return","ImmutableList",".","copyOf","(","traits",")",";","\n"],"docstring_tokens":["Returns","an","immutable","list","of","the","traits","in","this","composite","trait"]}
{"code_tokens":["\n","public","int","size","(",")","{","\n","return","traits",".","length",";","\n"],"docstring_tokens":["Returns","the","number","of","traits"]}
{"code_tokens":["\n","protected","static","void","findReducibleExps","(","RelDataTypeFactory","typeFactory,\n","List<RexNode>","exps,","ImmutableMap<RexNode,","RexNode>","constants,\n","List<RexNode>","constExps,","List<Boolean>","addCasts,","boolean","treatDynamicCallsAsConstant",")","{","\n","ReducibleExprLocator","gardener","=\n","new","ReducibleExprLocator","(","typeFactory,","constants,","constExps,\n","addCasts,","treatDynamicCallsAsConstant",")",";","\n","for","(","RexNode","exp",":","exps",")","{","\n","gardener",".","analyze","(","exp",")",";","\n","}","\n","assert","constExps",".","size","(",")","==","addCasts",".","size","(",")",";","\n"],"docstring_tokens":["Locates","expressions","that","can","be","reduced","to","literals","or","converted","to","expressions","with","redundant","casts","removed"]}
{"code_tokens":["\n","public","SqlCall","withExpanded","(","boolean","expanded",")","{","\n","return","!expanded\n","?","this\n",":","new","ExpandedBasicCall","(","operator,","operandList,","pos,\n","functionQuantifier",")",";","\n"],"docstring_tokens":["Sets","whether","this","call","is","expanded"]}
{"code_tokens":["\n","public","static","boolean","enabled","(",")","{","\n","return","LOGGER",".","isDebugEnabled","(",")",";","\n"],"docstring_tokens":["Returns","whether","performance","tests","are","enabled"]}
{"code_tokens":["\n","public","List<SqlNode>","operands","(",")","{","\n","if","(","hasAssignment","(",")","\n","&&","!","(","call",".","getOperator","(",")","instanceof","SqlUnresolvedFunction",")",")","{","\n","return","permutedOperands","(","call",")",";","\n","}","else","{","\n","final","List<SqlNode>","operandList","=","call",".","getOperandList","(",")",";","\n","final","SqlOperandTypeChecker","checker","=\n","call",".","getOperator","(",")",".","getOperandTypeChecker","(",")",";","\n","if","(","checker","==","null",")","{","\n","return","operandList",";","\n","}","\n","final","SqlOperandCountRange","range","=","checker",".","getOperandCountRange","(",")",";","\n","final","List<SqlNode>","list","=","Lists",".","newArrayList","(","operandList",")",";","\n","while","(","list",".","size","(",")","<","range",".","getMax","(",")","\n","&&","checker",".","isOptional","(","list",".","size","(",")",")","\n","&&","checker",".","isFixedParameters","(",")",")","{","\n","list",".","add","(","DefaultCallHolder",".","DEFAULT_CALL",")",";","\n","}","\n","return","list",";","\n","}","\n"],"docstring_tokens":["Returns","the","operands","to","a","call","permuted","into","the","same","order","as","the","formal","parameters","of","the","function"]}
{"code_tokens":["\n","public","SqlNode","operand","(","int","i",")","{","\n","return","operands","(",")",".","get","(","i",")",";","\n"],"docstring_tokens":["Returns","a","particular","operand"]}
{"code_tokens":["\n","public","CalciteException","newValidationSignatureError","(",")","{","\n","return","validator",".","newValidationError","(","call,\n","RESOURCE",".","canNotApplyOp2Type","(","getOperator","(",")",".","getName","(",")",",\n","call",".","getCallSignature","(","validator,","scope",")",",\n","getOperator","(",")",".","getAllowedSignatures","(",")",")",")",";","\n"],"docstring_tokens":["Constructs","a","new","validation","signature","error","for","the","call"]}
{"code_tokens":["\n","public","CalciteException","newValidationError","(","\n","Resources",".","ExInst<SqlValidatorException>","ex",")","{","\n","return","validator",".","newValidationError","(","call,","ex",")",";","\n"],"docstring_tokens":["Constructs","a","new","validation","error","for","the","call"]}
{"code_tokens":["\n","@Benchmark\n","public","void","appendString","(","Blackhole","bh,","AppenderState","appenderState",")","throws","IOException","{","\n","bh",".","consume","(","appenderState",".","getOrCreateAppender","(",")",".","append","(","\"placeholder\"",")",")",";","\n"],"docstring_tokens":["Benchmarks","the","performance","of","instantiating","different","Appendable","objects","and","appending","the","same","string","a","fixed","number","of","times"]}
{"code_tokens":["\n","public","static","Span","of","(",")","{","\n","return","new","Span","(",")",";","\n"],"docstring_tokens":["Creates","an","empty","Span"]}
{"code_tokens":["\n","public","static","Span","of","(","SqlParserPos","p",")","{","\n","return","new","Span","(",")",".","add","(","p",")",";","\n"],"docstring_tokens":["Creates","a","Span","with","one","position"]}
{"code_tokens":["\n","public","static","Span","of","(","SqlNode","n",")","{","\n","return","new","Span","(",")",".","add","(","n",")",";","\n"],"docstring_tokens":["Creates","a","Span","of","one","node"]}
{"code_tokens":["\n","public","static","Span","of","(","SqlNode","n0,","SqlNode","n1",")","{","\n","return","new","Span","(",")",".","add","(","n0",")",".","add","(","n1",")",";","\n"],"docstring_tokens":["Creates","a","Span","between","two","nodes"]}
{"code_tokens":["\n","public","static","Span","of","(","Collection<?","extends","SqlNode>","nodes",")","{","\n","return","new","Span","(",")",".","addAll","(","nodes",")",";","\n"],"docstring_tokens":["Creates","a","Span","of","a","list","of","nodes"]}
{"code_tokens":["\n","public","static","Span","of","(","SqlNodeList","nodeList",")","{","\n","//","SqlNodeList","has","its","own","position,","so","just","that","position,","not","all","of","the\n","//","constituent","nodes",".","\n","return","new","Span","(",")",".","add","(","nodeList",")",";","\n"],"docstring_tokens":["Creates","a","Span","of","a","node","list"]}
{"code_tokens":["\n","public","Span","add","(","SqlParserPos","pos",")","{","\n","posList",".","add","(","pos",")",";","\n","return","this",";","\n"],"docstring_tokens":["Adds","a","position","to","the","list,","and","returns","this","Span"]}
{"code_tokens":["\n","public","Span","addAll","(","Iterable<?","extends","SqlNode>","nodes",")","{","\n","for","(","SqlNode","node",":","nodes",")","{","\n","add","(","node",")",";","\n","}","\n","return","this",";","\n"],"docstring_tokens":["Adds","the","positions","of","a","collection","of","nodes","to","the","list,","and","returns","this","Span"]}
{"code_tokens":["\n","public","Span","add","(","SqlAbstractParserImpl","parser",")","{","\n","try","{","\n","final","SqlParserPos","pos","=","parser",".","getPos","(",")",";","\n","return","add","(","pos",")",";","\n","}","catch","(","Exception","e",")","{","\n","//","getPos","does","not","really","throw","an","exception\n","throw","new","AssertionError","(","e",")",";","\n","}","\n"],"docstring_tokens":["Adds","the","position","of","the","last","token","emitted","by","a","parser","to","the","list,","and","returns","this","Span"]}
{"code_tokens":["\n","public","Span","clear","(",")","{","\n","posList",".","clear","(",")",";","\n","return","this",";","\n"],"docstring_tokens":["Clears","the","contents","of","this","Span,","and","returns","this","Span"]}
{"code_tokens":["\n","public","StringBuilder","printTo","(","StringBuilder","sb,\n","BiConsumer<StringBuilder,","C>","valuePrinter",")","{","\n","sb",".","append","(","\"Sarg[\"",")",";","\n","final","RangeSets",".","Consumer<C>","printer","=","RangeSets",".","printer","(","sb,","valuePrinter",")",";","\n","Ord",".","forEach","(","rangeSet",".","asRanges","(",")",",","(","r,","i",")","->","{","\n","if","(","i",">","0",")","{","\n","sb",".","append","(","\",","\"",")",";","\n","}","\n","RangeSets",".","forEach","(","r,","printer",")",";","\n","}",")",";","\n","switch","(","nullAs",")","{","\n","case","FALSE:\n","return","sb",".","append","(","\"",";","NULL","AS","FALSE]\"",")",";","\n","case","TRUE:\n","return","sb",".","append","(","\"",";","NULL","AS","TRUE]\"",")",";","\n","case","UNKNOWN:\n","return","sb",".","append","(","\"]\"",")",";","\n","default:\n","throw","new","AssertionError","(",")",";","\n","}","\n"],"docstring_tokens":["Prints","this","Sarg","to","a","StringBuilder,","using","the","given","printer","to","deal","with","each","embedded","value"]}
{"code_tokens":["\n","public","Sarg","negate","(",")","{","\n","return","Sarg",".","of","(","nullAs",".","negate","(",")",",","rangeSet",".","complement","(",")",")",";","\n"],"docstring_tokens":["Returns","a","Sarg","that","matches","a","value","if","and","only","this","Sarg","does","not"]}
{"code_tokens":["\n","private","static","@Nullable","RelNode","changeConvention","(","\n","RelNode","rel,\n","Convention","source,\n","Convention","target,\n","final","Multimap<Pair<Convention,","Convention>,","ConverterRule>\n","mapArcToConverterRule",")","{","\n","assert","source","==","rel",".","getConvention","(",")",";","\n\n","//","Try","to","apply","each","converter","rule","for","this","arc's","source/target","calling\n","//","conventions",".","\n","final","Pair<Convention,","Convention>","key","=","Pair",".","of","(","source,","target",")",";","\n","for","(","ConverterRule","rule",":","mapArcToConverterRule",".","get","(","key",")",")","{","\n","assert","rule",".","getInTrait","(",")","==","source",";","\n","assert","rule",".","getOutTrait","(",")","==","target",";","\n","RelNode","converted","=","rule",".","convert","(","rel",")",";","\n","if","(","converted","!=","null",")","{","\n","return","converted",";","\n","}","\n","}","\n","return","null",";","\n"],"docstring_tokens":["Tries","to","convert","a","relational","expression","to","the","target","convention","of","an","arc"]}
{"code_tokens":["\n","private","Lattice","findMatch","(","final","Lattice","lattice,","MutableNode","mutableNode",")","{","\n","final","Lattice","lattice1","=","latticeMap",".","get","(","lattice",".","toString","(",")",")",";","\n","if","(","lattice1","!=","null",")","{","\n","//","Exact","match","for","an","existing","lattice\n","return","lattice1",";","\n","}","\n\n","if","(","evolve",")","{","\n","//","No","exact","match",".","Scan","existing","lattices","for","a","sub-set",".","\n","int","bestMatchQuality","=","0",";","\n","Lattice","bestMatch","=","null",";","\n","for","(","Lattice","lattice2",":","latticeMap",".","values","(",")",")","{","\n","int","q","=","matchQuality","(","lattice2,","lattice",")",";","\n","if","(","q",">","bestMatchQuality",")","{","\n","bestMatch","=","lattice2",";","\n","bestMatchQuality","=","q",";","\n","}","else","if","(","q","==","bestMatchQuality\n","&&","bestMatch","!=","null\n","&&","!lattice2",".","rootNode",".","paths",".","equals","(","bestMatch",".","rootNode",".","paths",")","\n","&&","lattice2",".","rootNode",".","paths",".","containsAll","(","bestMatch",".","rootNode",".","paths",")",")","{","\n","bestMatch","=","lattice2",";","\n","}","\n","}","\n\n","if","(","bestMatch","!=","null",")","{","\n","//","Fix","up","the","best","batch\n","for","(","Path","path\n",":","minus","(","bestMatch",".","rootNode",".","paths,","lattice",".","rootNode",".","paths",")",")","{","\n","//","TODO:","assign","alias","based","on","node","in","bestMatch\n","mutableNode",".","addPath","(","path,","null",")",";","\n","}","\n","final","CalciteSchema","rootSchema","=","CalciteSchema",".","createRootSchema","(","false",")",";","\n","final","Lattice",".","Builder","builder","=\n","new","Lattice",".","Builder","(","space,","rootSchema,","mutableNode",")",";","\n","copyMeasures","(","builder,","bestMatch",")",";","\n","copyMeasures","(","builder,","lattice",")",";","\n","final","Lattice","lattice2","=","builder",".","build","(",")",";","\n","latticeMap",".","remove","(","bestMatch",".","toString","(",")",")",";","\n","obsoleteLatticeMap",".","put","(","bestMatch,","lattice2",")",";","\n","latticeMap",".","put","(","lattice2",".","toString","(",")",",","lattice2",")",";","\n","return","lattice2",";","\n","}","\n","}","\n\n","//","No","suitable","existing","lattice",".","Register","this","one",".","\n","latticeMap",".","put","(","lattice",".","toString","(",")",",","lattice",")",";","\n","return","lattice",";","\n"],"docstring_tokens":["Returns","the","best","match","for","a","lattice"]}
{"code_tokens":["\n","public","static","@Nullable","String","toDruidExpression","(","\n","final","RexNode","rexNode,\n","final","RelDataType","inputRowType,\n","final","DruidQuery","druidRel",")","{","\n","SqlKind","kind","=","rexNode",".","getKind","(",")",";","\n","SqlTypeName","sqlTypeName","=","rexNode",".","getType","(",")",".","getSqlTypeName","(",")",";","\n\n","if","(","kind","==","SqlKind",".","INPUT_REF",")","{","\n","final","RexInputRef","ref","=","(","RexInputRef",")","rexNode",";","\n","final","String","columnName","=","inputRowType",".","getFieldNames","(",")",".","get","(","ref",".","getIndex","(",")",")",";","\n","if","(","columnName","==","null",")","{","\n","return","null",";","\n","}","\n","if","(","druidRel",".","getDruidTable","(",")",".","timestampFieldName",".","equals","(","columnName",")",")","{","\n","return","DruidExpressions",".","fromColumn","(","DruidTable",".","DEFAULT_TIMESTAMP_COLUMN",")",";","\n","}","\n","return","DruidExpressions",".","fromColumn","(","columnName",")",";","\n","}","\n\n","if","(","rexNode","instanceof","RexCall",")","{","\n","final","SqlOperator","operator","=","(","(","RexCall",")","rexNode",")",".","getOperator","(",")",";","\n","final","DruidSqlOperatorConverter","conversion","=","druidRel",".","getOperatorConversionMap","(",")","\n",".","get","(","operator",")",";","\n","if","(","conversion","==","null",")","{","\n","//unknown","operator","can","not","translate\n","return","null",";","\n","}","else","{","\n","return","conversion",".","toDruidExpression","(","rexNode,","inputRowType,","druidRel",")",";","\n","}","\n","}","\n","if","(","kind","==","SqlKind",".","LITERAL",")","{","\n","//","Translate","literal",".","\n","if","(","RexLiteral",".","isNullLiteral","(","rexNode",")",")","{","\n","//case","the","filter/project","might","yield","to","unknown","let","Calcite","deal","with","this","for","now\n","return","null",";","\n","}","else","if","(","SqlTypeName",".","NUMERIC_TYPES",".","contains","(","sqlTypeName",")",")","{","\n","return","DruidExpressions",".","numberLiteral","(","(","Number",")","RexLiteral\n",".","value","(","rexNode",")",")",";","\n","}","else","if","(","SqlTypeFamily",".","INTERVAL_DAY_TIME","==","sqlTypeName",".","getFamily","(",")",")","{","\n","//","Calcite","represents","DAY-TIME","intervals","in","milliseconds",".","\n","final","long","milliseconds","=","(","(","Number",")","RexLiteral",".","value","(","rexNode",")",")",".","longValue","(",")",";","\n","return","DruidExpressions",".","numberLiteral","(","milliseconds",")",";","\n","}","else","if","(","SqlTypeFamily",".","INTERVAL_YEAR_MONTH","==","sqlTypeName",".","getFamily","(",")",")","{","\n","//","Calcite","represents","YEAR-MONTH","intervals","in","months",".","\n","final","long","months","=","(","(","Number",")","RexLiteral",".","value","(","rexNode",")",")",".","longValue","(",")",";","\n","return","DruidExpressions",".","numberLiteral","(","months",")",";","\n","}","else","if","(","SqlTypeName",".","STRING_TYPES",".","contains","(","sqlTypeName",")",")","{","\n","return\n","DruidExpressions",".","stringLiteral","(","RexLiteral",".","stringValue","(","rexNode",")",")",";","\n","}","else","if","(","SqlTypeName",".","DATE","==","sqlTypeName\n","||","SqlTypeName",".","TIMESTAMP","==","sqlTypeName\n","||","SqlTypeName",".","TIME_WITH_LOCAL_TIME_ZONE","==","sqlTypeName",")","{","\n","return","DruidExpressions",".","numberLiteral","(","\n","DruidDateTimeUtils",".","literalValue","(","rexNode",")",")",";","\n","}","else","if","(","SqlTypeName",".","BOOLEAN","==","sqlTypeName",")","{","\n","return","DruidExpressions",".","numberLiteral","(","RexLiteral",".","booleanValue","(","rexNode",")","?","1",":","0",")",";","\n","}","\n","}","\n","//","Not","Literal/InputRef/RexCall","or","unknown","type?\n","return","null",";","\n"],"docstring_tokens":["Translates","a","Calcite","RexNode","to","a","Druid","expression,","if","possible;","returns","null","if","not","possible"]}
{"code_tokens":["\n","public","static","RelOptTable",".","ToRelContext","toRelContext","(","\n","RelOptTable",".","ViewExpander","viewExpander,\n","RelOptCluster","cluster,\n","List<RelHint>","hints",")","{","\n","return","new","RelOptTable",".","ToRelContext","(",")","{","\n","@Override","public","RelOptCluster","getCluster","(",")","{","\n","return","cluster",";","\n","}","\n\n","@Override","public","List<RelHint>","getTableHints","(",")","{","\n","return","hints",";","\n","}","\n\n","@Override","public","RelRoot","expandView","(","RelDataType","rowType,","String","queryString,\n","List<String>","schemaPath,","@Nullable","List<String>","viewPath",")","{","\n","return","viewExpander",".","expandView","(","rowType,","queryString,","schemaPath,\n","viewPath",")",";","\n","}","\n","}",";","\n"],"docstring_tokens":["Converts","a","ViewExpander","to","a","ToRelContext"]}
{"code_tokens":["\n","public","static","RelOptTable",".","ToRelContext","simpleContext","(","RelOptCluster","cluster",")","{","\n","return","simpleContext","(","cluster,","ImmutableList",".","of","(",")",")",";","\n"],"docstring_tokens":["Creates","a","simple","ToRelContext","that","cannot","expand","views"]}
{"code_tokens":["\n","Set<RelNode>","getParents","(",")","{","\n","final","Set<RelNode>","list","=","new","LinkedHashSet<>","(",")",";","\n","for","(","RelNode","parent",":","set",".","getParentRels","(",")",")","{","\n","for","(","RelSubset","rel",":","inputSubsets","(","parent",")",")","{","\n","//","see","usage","of","this","method","in","propagateCostImprovements0","(",")","\n","if","(","rel","==","this",")","{","\n","list",".","add","(","parent",")",";","\n","}","\n","}","\n","}","\n","return","list",";","\n"],"docstring_tokens":["Returns","the","collection","of","RelNodes","one","of","whose","inputs","is","in","this","subset"]}
{"code_tokens":["\n","Set<RelSubset>","getParentSubsets","(","VolcanoPlanner","planner",")","{","\n","final","Set<RelSubset>","list","=","new","LinkedHashSet<>","(",")",";","\n","for","(","RelNode","parent",":","set",".","getParentRels","(",")",")","{","\n","for","(","RelSubset","rel",":","inputSubsets","(","parent",")",")","{","\n","if","(","rel",".","set","==","set","&&","rel",".","getTraitSet","(",")",".","equals","(","traitSet",")",")","{","\n","list",".","add","(","planner",".","getSubsetNonNull","(","parent",")",")",";","\n","}","\n","}","\n","}","\n","return","list",";","\n"],"docstring_tokens":["Returns","the","collection","of","distinct","subsets","that","contain","a","RelNode","one","of","whose","inputs","is","in","this","subset"]}
{"code_tokens":["\n","void","add","(","RelNode","rel",")","{","\n","if","(","set",".","rels",".","contains","(","rel",")",")","{","\n","return",";","\n","}","\n\n","VolcanoPlanner","planner","=","(","VolcanoPlanner",")","rel",".","getCluster","(",")",".","getPlanner","(",")",";","\n","if","(","planner",".","getListener","(",")","!=","null",")","{","\n","RelOptListener",".","RelEquivalenceEvent","event","=\n","new","RelOptListener",".","RelEquivalenceEvent","(","\n","planner,\n","rel,\n","this,\n","true",")",";","\n","planner",".","getListener","(",")",".","relEquivalenceFound","(","event",")",";","\n","}","\n\n","//","If","this","isn't","the","first","rel","in","the","set,","it","must","have","compatible\n","//","row","type",".","\n","if","(","set",".","rel","!=","null",")","{","\n","RelOptUtil",".","equal","(","\"rowtype","of","new","rel\",","rel",".","getRowType","(",")",",\n","\"rowtype","of","set\",","getRowType","(",")",",","Litmus",".","THROW",")",";","\n","}","\n","set",".","addInternal","(","rel",")",";","\n","if","(","false",")","{","\n","Set<CorrelationId>","variablesSet","=","RelOptUtil",".","getVariablesSet","(","rel",")",";","\n","Set<CorrelationId>","variablesStopped","=","rel",".","getVariablesSet","(",")",";","\n","Set<CorrelationId>","variablesPropagated","=\n","Util",".","minus","(","variablesSet,","variablesStopped",")",";","\n","assert","set",".","variablesPropagated",".","containsAll","(","variablesPropagated",")",";","\n","Set<CorrelationId>","variablesUsed","=","RelOptUtil",".","getVariablesUsed","(","rel",")",";","\n","assert","set",".","variablesUsed",".","containsAll","(","variablesUsed",")",";","\n","}","\n"],"docstring_tokens":["Adds","expression","rel","to","this","subset"]}
{"code_tokens":["\n","public","Iterable<RelNode>","getRels","(",")","{","\n","return","(",")","->","Linq4j",".","asEnumerable","(","set",".","rels",")","\n",".","where","(","v1","->","v1",".","getTraitSet","(",")",".","satisfies","(","traitSet",")",")","\n",".","iterator","(",")",";","\n"],"docstring_tokens":["Returns","the","rel","nodes","in","this","rel","subset"]}
{"code_tokens":["\n","public","boolean","contains","(","RelNode","node",")","{","\n","return","set",".","rels",".","contains","(","node",")","&&","node",".","getTraitSet","(",")",".","satisfies","(","traitSet",")",";","\n"],"docstring_tokens":["Returns","whether","this","subset","contains","the","specified","relational","expression"]}
{"code_tokens":["\n","@API","(","since","=","\"1",".","24\",","status","=","API",".","Status",".","INTERNAL",")","\n","public","@Nullable","RelOptCost","getWinnerCost","(",")","{","\n","if","(","taskState","==","OptimizeState",".","COMPLETED","&&","bestCost",".","isLe","(","upperBound",")",")","{","\n","return","bestCost",";","\n","}","\n","//","if","bestCost","!=","upperBound,","it","means","optimize","failed\n","return","null",";","\n"],"docstring_tokens":["Returns","the","best","cost","if","this","subset","is","fully","optimized","or","null","if","the","subset","is","not","fully","optimized"]}
{"code_tokens":["\n","public","static","NameSet","immutableCopyOf","(","Set<String>","names",")","{","\n","return","new","NameSet","(","NameMap",".","immutableCopyOf","(","Maps",".","asMap","(","names,","k","->","DUMMY",")",")",")",";","\n"],"docstring_tokens":["Creates","a","NameSet","that","is","an","immutable","copy","of","a","given","collection"]}
{"code_tokens":["\n","public","boolean","contains","(","String","name,","boolean","caseSensitive",")","{","\n","return","names",".","containsKey","(","name,","caseSensitive",")",";","\n"],"docstring_tokens":["Returns","whether","this","set","contains","the","given","name,","with","a","given","case-sensitivity"]}
{"code_tokens":["\n","public","CalciteSchema",".","@Nullable","TableEntry","checkValid","(","MaterializationKey","key",")","{","\n","final","MaterializationActor",".","Materialization","materialization","=\n","actor",".","keyMap",".","get","(","key",")",";","\n","if","(","materialization","!=","null",")","{","\n","return","materialization",".","materializedTable",";","\n","}","\n","return","null",";","\n"],"docstring_tokens":["Checks","whether","a","materialization","is","valid,","and","if","so,","returns","the","table","where","the","data","are","stored"]}
{"code_tokens":["\n","public","static","void","setLeftRightBitmaps","(","\n","ImmutableBitSet","groupKey,\n","ImmutableBitSet",".","Builder","leftMask,\n","ImmutableBitSet",".","Builder","rightMask,\n","int","nFieldsOnLeft",")","{","\n","for","(","int","bit",":","groupKey",")","{","\n","if","(","bit","<","nFieldsOnLeft",")","{","\n","leftMask",".","set","(","bit",")",";","\n","}","else","{","\n","rightMask",".","set","(","bit","-","nFieldsOnLeft",")",";","\n","}","\n","}","\n"],"docstring_tokens":["Separates","a","bit-mask","representing","a","join","into","masks","representing","the","left","and","right","inputs","into","the","join"]}
{"code_tokens":["\n","public","static","@Nullable","Double","getJoinPopulationSize","(","RelMetadataQuery","mq,\n","RelNode","join_,","ImmutableBitSet","groupKey",")","{","\n","Join","join","=","(","Join",")","join_",";","\n","if","(","!join",".","getJoinType","(",")",".","projectsRight","(",")",")","{","\n","return","mq",".","getPopulationSize","(","join",".","getLeft","(",")",",","groupKey",")",";","\n","}","\n","ImmutableBitSet",".","Builder","leftMask","=","ImmutableBitSet",".","builder","(",")",";","\n","ImmutableBitSet",".","Builder","rightMask","=","ImmutableBitSet",".","builder","(",")",";","\n","RelNode","left","=","join",".","getLeft","(",")",";","\n","RelNode","right","=","join",".","getRight","(",")",";","\n\n","//","separate","the","mask","into","masks","for","the","left","and","right\n","RelMdUtil",".","setLeftRightBitmaps","(","\n","groupKey,","leftMask,","rightMask,","left",".","getRowType","(",")",".","getFieldCount","(",")",")",";","\n\n","Double","population","=\n","multiply","(","\n","mq",".","getPopulationSize","(","left,","leftMask",".","build","(",")",")",",\n","mq",".","getPopulationSize","(","right,","rightMask",".","build","(",")",")",")",";","\n\n","return","numDistinctVals","(","population,","mq",".","getRowCount","(","join",")",")",";","\n"],"docstring_tokens":["Computes","the","population","size","for","a","set","of","keys","returned","from","a","join"]}
{"code_tokens":["\n","public","static","double","getMinusRowCount","(","RelMetadataQuery","mq,","Minus","minus",")","{","\n","//","REVIEW","jvs","30-May-2005:","I","just","pulled","this","out","of","a","hat",".","\n","final","List<RelNode>","inputs","=","minus",".","getInputs","(",")",";","\n","double","dRows","=","mq",".","getRowCount","(","inputs",".","get","(","0",")",")",";","\n","for","(","int","i","=","1",";","i","<","inputs",".","size","(",")",";","i++",")","{","\n","dRows","-=","0",".","5","*","mq",".","getRowCount","(","inputs",".","get","(","i",")",")",";","\n","}","\n","if","(","dRows","<","0",")","{","\n","dRows","=","0",";","\n","}","\n","return","dRows",";","\n"],"docstring_tokens":["Returns","an","estimate","of","the","number","of","rows","returned","by","a","Minus"]}
{"code_tokens":["\n","public","static","@Nullable","Double","getJoinRowCount","(","RelMetadataQuery","mq,","Join","join,\n","RexNode","condition",")","{","\n","if","(","!join",".","getJoinType","(",")",".","projectsRight","(",")",")","{","\n","//","Create","a","RexNode","representing","the","selectivity","of","the\n","//","semijoin","filter","and","pass","it","to","getSelectivity\n","RexNode","semiJoinSelectivity","=\n","RelMdUtil",".","makeSemiJoinSelectivityRexNode","(","mq,","join",")",";","\n","Double","selectivity","=","mq",".","getSelectivity","(","join",".","getLeft","(",")",",","semiJoinSelectivity",")",";","\n","if","(","selectivity","==","null",")","{","\n","return","null",";","\n","}","\n","return","(","join",".","getJoinType","(",")","==","JoinRelType",".","SEMI\n","?","selectivity\n",":","1D","-","selectivity",")","//","ANTI","join\n","*","mq",".","getRowCount","(","join",".","getLeft","(",")",")",";","\n","}","\n","//","Row","count","estimates","of","0","will","be","rounded","up","to","1",".","\n","//","So,","use","maxRowCount","where","the","product","is","very","small",".","\n","final","Double","left","=","mq",".","getRowCount","(","join",".","getLeft","(",")",")",";","\n","final","Double","right","=","mq",".","getRowCount","(","join",".","getRight","(",")",")",";","\n","if","(","left","==","null","||","right","==","null",")","{","\n","return","null",";","\n","}","\n","if","(","left","<=","1D","||","right","<=","1D",")","{","\n","Double","max","=","mq",".","getMaxRowCount","(","join",")",";","\n","if","(","max","!=","null","&&","max","<=","1D",")","{","\n","return","max",";","\n","}","\n","}","\n\n","Double","selectivity","=","mq",".","getSelectivity","(","join,","condition",")",";","\n","if","(","selectivity","==","null",")","{","\n","return","null",";","\n","}","\n","double","innerRowCount","=","left","*","right","*","selectivity",";","\n","switch","(","join",".","getJoinType","(",")",")","{","\n","case","INNER:\n","return","innerRowCount",";","\n","case","LEFT:\n","return","left","*","(","1D","-","selectivity",")","+","innerRowCount",";","\n","case","RIGHT:\n","return","right","*","(","1D","-","selectivity",")","+","innerRowCount",";","\n","case","FULL:\n","return","(","left","+","right",")","*","(","1D","-","selectivity",")","+","innerRowCount",";","\n","default:\n","throw","Util",".","unexpected","(","join",".","getJoinType","(",")",")",";","\n","}","\n"],"docstring_tokens":["Returns","an","estimate","of","the","number","of","rows","returned","by","a","Join"]}
{"code_tokens":["\n","public","void","identity","(",")","{","\n","for","(","int","i","=","0",";","i","<","targets",".","length",";","i++",")","{","\n","targets[i]","=","sources[i]","=","i",";","\n","}","\n"],"docstring_tokens":["Initializes","this","permutation","to","the","identity","permutation"]}
{"code_tokens":["\n","@Override","public","final","int","size","(",")","{","\n","return","targets",".","length",";","\n"],"docstring_tokens":["Returns","the","number","of","elements","in","this","permutation"]}
{"code_tokens":["\n","@Override","public","Permutation","inverse","(",")","{","\n","return","new","Permutation","(","\n","sources",".","clone","(",")",",\n","targets",".","clone","(",")",")",";","\n"],"docstring_tokens":["Returns","the","inverse","permutation"]}
{"code_tokens":["\n","@Override","public","boolean","isIdentity","(",")","{","\n","for","(","int","i","=","0",";","i","<","targets",".","length",";","i++",")","{","\n","if","(","targets[i]","!=","i",")","{","\n","return","false",";","\n","}","\n","}","\n","return","true",";","\n"],"docstring_tokens":["Returns","whether","this","is","the","identity","permutation"]}
{"code_tokens":["\n","@RequiresNonNull","(","{","\"sources\",","\"targets\"","}",")","\n","private","boolean","isValid","(","@UnknownInitialization","Permutation","this,","boolean","fail",")","{","\n","final","int","size","=","targets",".","length",";","\n","if","(","sources",".","length","!=","size",")","{","\n","assert","!fail",":","\"different","lengths\"",";","\n","return","false",";","\n","}","\n\n","//","Every","element","in","sources","has","corresponding","element","in","targets",".","\n","int[]","occurCount","=","new","int[size]",";","\n","for","(","int","i","=","0",";","i","<","size",";","i++",")","{","\n","int","target","=","targets[i]",";","\n","if","(","sources[target]","!=","i",")","{","\n","assert","!fail\n",":","\"source[\"","+","target","+","\"]","=","\"","+","sources[target]\n","+","\",","should","be","\"","+","i",";","\n","return","false",";","\n","}","\n","int","source","=","sources[i]",";","\n","if","(","targets[source]","!=","i",")","{","\n","assert","!fail\n",":","\"target[\"","+","source","+","\"]","=","\"","+","targets[source]\n","+","\",","should","be","\"","+","i",";","\n","return","false",";","\n","}","\n\n","//","Every","member","should","occur","once",".","\n","if","(","occurCount[target]","!=","0",")","{","\n","assert","!fail",":","\"target","\"","+","target","+","\"","occurs","more","than","once\"",";","\n","return","false",";","\n","}","\n","occurCount[target]++",";","\n","}","\n","return","true",";","\n"],"docstring_tokens":["Checks","whether","this","permutation","is","valid"]}
{"code_tokens":["\n","public","synchronized","void","set","(","String","resourceName,","String","value",")","{","\n","assert","resourceName","!=","null",";","\n","final","String","testCaseName","=","getCurrentTestCaseName","(","true",")",";","\n","update","(","testCaseName,","resourceName,","value",")",";","\n"],"docstring_tokens":["Sets","the","value","of","a","given","resource","of","the","current","test","case"]}
{"code_tokens":["\n","private","synchronized","String","get","(","\n","final","String","testCaseName,\n","String","resourceName",")","{","\n","Element","testCaseElement","=","getTestCaseElement","(","testCaseName,","true,","null",")",";","\n","if","(","testCaseElement","==","null",")","{","\n","if","(","baseRepository","!=","null",")","{","\n","return","baseRepository",".","get","(","testCaseName,","resourceName",")",";","\n","}","else","{","\n","return","null",";","\n","}","\n","}","\n","final","Element","resourceElement","=\n","getResourceElement","(","testCaseElement,","resourceName",")",";","\n","if","(","resourceElement","!=","null",")","{","\n","return","getText","(","resourceElement",")",";","\n","}","\n","return","null",";","\n"],"docstring_tokens":["Returns","a","given","resource","from","a","given","test","case"]}
{"code_tokens":["\n","public","static","DiffRepository","lookup","(","Class<?>","clazz",")","{","\n","return","lookup","(","clazz,","null,","null,","2",")",";","\n"],"docstring_tokens":["Finds","the","repository","instance","for","a","given","class,","with","no","base","repository","or","filter"]}
{"code_tokens":["\n","static","RelDataType","convertSchemaField","(","LogicalSchema",".","LogicalFieldSchema","pigField",")","{","\n","return","convertSchemaField","(","pigField,","true",")",";","\n"],"docstring_tokens":["Converts","a","Pig","schema","field","to","relational","type"]}
{"code_tokens":["\n","static","RelDataType","convertSchema","(","LogicalSchema","pigSchema",")","{","\n","return","convertSchema","(","pigSchema,","true",")",";","\n"],"docstring_tokens":["Converts","a","Pig","tuple","schema","to","a","SQL","row","type"]}
{"code_tokens":["\n","public","static","Template","of","(","String","pattern",")","{","\n","return","of","(","pattern,","Locale",".","getDefault","(",")",")",";","\n"],"docstring_tokens":["Creates","a","Template","for","the","default","locale","and","the","specified","pattern"]}
{"code_tokens":["\n","public","static","Template","of","(","String","pattern,","Locale","locale",")","{","\n","final","List<String>","parameterNames","=","new","ArrayList<>","(",")",";","\n","final","String","processedPattern","=","process","(","pattern,","parameterNames",")",";","\n","return","new","Template","(","processedPattern,","parameterNames,","locale",")",";","\n"],"docstring_tokens":["Creates","a","Template","for","the","specified","locale","and","pattern"]}
{"code_tokens":["\n","public","Enumerable<V>","valuesEnumerable","(",")","{","\n","return","new","AbstractEnumerable<V>","(",")","{","\n","@Override","public","Enumerator<V>","enumerator","(",")","{","\n","final","Enumerator<Enumerable<V>>","listEnumerator","=\n","Linq4j",".","iterableEnumerator","(","values","(",")",")",";","\n","return","new","Enumerator<V>","(",")","{","\n","Enumerator<V>","enumerator","=","Linq4j",".","emptyEnumerator","(",")",";","\n\n","@Override","public","V","current","(",")","{","\n","return","enumerator",".","current","(",")",";","\n","}","\n\n","@Override","public","boolean","moveNext","(",")","{","\n","for","(",";",";",")","{","\n","if","(","enumerator",".","moveNext","(",")",")","{","\n","return","true",";","\n","}","\n","enumerator",".","close","(",")",";","\n","if","(","!listEnumerator",".","moveNext","(",")",")","{","\n","enumerator","=","Linq4j",".","emptyEnumerator","(",")",";","\n","return","false",";","\n","}","\n","enumerator","=","listEnumerator",".","current","(",")",".","enumerator","(",")",";","\n","}","\n","}","\n\n","@Override","public","void","reset","(",")","{","\n","listEnumerator",".","reset","(",")",";","\n","enumerator","=","Linq4j",".","emptyEnumerator","(",")",";","\n","}","\n\n","@Override","public","void","close","(",")","{","\n","enumerator",".","close","(",")",";","\n","}","\n","}",";","\n","}","\n","}",";","\n"],"docstring_tokens":["Returns","an","enumerable","over","the","values","in","this","lookup,","in","map","order"]}
{"code_tokens":["\n","public","List<Pair<AggregateCall,","String>>","getNamedAggCalls","(",")","{","\n","final","int","offset","=","getGroupCount","(",")",";","\n","return","Pair",".","zip","(","aggCalls,","Util",".","skip","(","getRowType","(",")",".","getFieldNames","(",")",",","offset",")",")",";","\n"],"docstring_tokens":["Returns","a","list","of","calls","to","aggregate","functions","together","with","their","output","field","names"]}
{"code_tokens":["\n","public","static","RelDataType","deriveRowType","(","RelDataTypeFactory","typeFactory,\n","final","RelDataType","inputRowType,","boolean","indicator,\n","ImmutableBitSet","groupSet,","@Nullable","List<ImmutableBitSet>","groupSets,\n","final","List<AggregateCall>","aggCalls",")","{","\n","final","List<Integer>","groupList","=","groupSet",".","asList","(",")",";","\n","assert","groupList",".","size","(",")","==","groupSet",".","cardinality","(",")",";","\n","final","RelDataTypeFactory",".","Builder","builder","=","typeFactory",".","builder","(",")",";","\n","final","List<RelDataTypeField>","fieldList","=","inputRowType",".","getFieldList","(",")",";","\n","final","Set<String>","containedNames","=","new","HashSet<>","(",")",";","\n","for","(","int","groupKey",":","groupList",")","{","\n","final","RelDataTypeField","field","=","fieldList",".","get","(","groupKey",")",";","\n","containedNames",".","add","(","field",".","getName","(",")",")",";","\n","builder",".","add","(","field",")",";","\n","if","(","groupSets","!=","null","&&","!ImmutableBitSet",".","allContain","(","groupSets,","groupKey",")",")","{","\n","builder",".","nullable","(","true",")",";","\n","}","\n","}","\n","checkIndicator","(","indicator",")",";","\n","for","(","Ord<AggregateCall>","aggCall",":","Ord",".","zip","(","aggCalls",")",")","{","\n","final","String","base",";","\n","if","(","aggCall",".","e",".","name","!=","null",")","{","\n","base","=","aggCall",".","e",".","name",";","\n","}","else","{","\n","base","=","\"$f\"","+","(","groupList",".","size","(",")","+","aggCall",".","i",")",";","\n","}","\n","String","name","=","base",";","\n","int","i","=","0",";","\n","while","(","containedNames",".","contains","(","name",")",")","{","\n","name","=","base","+","\"_\"","+","i++",";","\n","}","\n","containedNames",".","add","(","name",")",";","\n","builder",".","add","(","name,","aggCall",".","e",".","type",")",";","\n","}","\n","return","builder",".","build","(",")",";","\n"],"docstring_tokens":["Computes","the","row","type","of","an","Aggregate","before","it","exists"]}
{"code_tokens":["\n","private","boolean","typeMatchesInferred","(","\n","final","AggregateCall","aggCall,\n","final","Litmus","litmus",")","{","\n","SqlAggFunction","aggFunction","=","aggCall",".","getAggregation","(",")",";","\n","AggCallBinding","callBinding","=","aggCall",".","createBinding","(","this",")",";","\n","RelDataType","type","=","aggFunction",".","inferReturnType","(","callBinding",")",";","\n","RelDataType","expectedType","=","aggCall",".","type",";","\n","return","RelOptUtil",".","eq","(","\"aggCall","type\",\n","expectedType,\n","\"inferred","type\",\n","type,\n","litmus",")",";","\n"],"docstring_tokens":["Returns","whether","the","inferred","type","of","an","AggregateCall","matches","the","type","it","was","given","when","it","was","created"]}
{"code_tokens":["\n","public","boolean","containsDistinctCall","(",")","{","\n","for","(","AggregateCall","call",":","aggCalls",")","{","\n","if","(","call",".","isDistinct","(",")",")","{","\n","return","true",";","\n","}","\n","}","\n","return","false",";","\n"],"docstring_tokens":["Returns","whether","any","of","the","aggregates","are","DISTINCT"]}
{"code_tokens":["\n","AutomatonBuilder","symbol","(","State","fromState,","State","toState,\n","String","name",")","{","\n","Objects",".","requireNonNull","(","name,","\"name\"",")",";","\n","final","int","symbolId","=\n","symbolIds",".","computeIfAbsent","(","name,","k","->","symbolIds",".","size","(",")",")",";","\n","transitionList",".","add","(","new","SymbolTransition","(","fromState,","toState,","symbolId",")",")",";","\n","return","this",";","\n"],"docstring_tokens":["Adds","a","symbol","transition"]}
{"code_tokens":["\n","AutomatonBuilder","seq","(","State","fromState,","State","toState,\n","List<Pattern>","patterns",")","{","\n","State","prevState","=","fromState",";","\n","for","(","int","i","=","0",";","i","<","patterns",".","size","(",")",";","i++",")","{","\n","Pattern","pattern","=","patterns",".","get","(","i",")",";","\n","final","State","nextState",";","\n","if","(","i","==","patterns",".","size","(",")","-","1",")","{","\n","nextState","=","toState",";","\n","}","else","{","\n","nextState","=","createState","(",")",";","\n","}","\n","add","(","pattern,","prevState,","nextState",")",";","\n","prevState","=","nextState",";","\n","}","\n","return","this",";","\n"],"docstring_tokens":["Adds","a","transition","made","up","of","a","sequence","of","patterns"]}
{"code_tokens":["\n","AutomatonBuilder","star","(","State","fromState,","State","toState,","Pattern","pattern",")","{","\n","//\n","//","+-------------------------","e","------------------------+\n","//","|","+--------","e","-------+","|\n","//","|","|","|","|\n","//","|","V","|","V\n","//","fromState","----->","beforeState","----->","afterState","----->","toState\n","//","e","pattern","e\n","//\n","final","State","beforeState","=","createState","(",")",";","\n","final","State","afterState","=","createState","(",")",";","\n","transitionList",".","add","(","new","EpsilonTransition","(","fromState,","beforeState",")",")",";","\n","add","(","pattern,","beforeState,","afterState",")",";","\n","transitionList",".","add","(","new","EpsilonTransition","(","afterState,","beforeState",")",")",";","\n","transitionList",".","add","(","new","EpsilonTransition","(","afterState,","toState",")",")",";","\n","transitionList",".","add","(","new","EpsilonTransition","(","fromState,","toState",")",")",";","\n","return","this",";","\n"],"docstring_tokens":["Adds","a","transition","made","up","of","the","Kleene","star","applied","to","a","pattern"]}
{"code_tokens":["\n","AutomatonBuilder","plus","(","State","fromState,","State","toState,","Pattern","pattern",")","{","\n","//\n","//","+--------","e","-------+\n","//","|","|\n","//","V","|\n","//","fromState","----->","beforeState","----->","afterState","----->","toState\n","//","e","pattern","e\n","//\n","final","State","beforeState","=","createState","(",")",";","\n","final","State","afterState","=","createState","(",")",";","\n","transitionList",".","add","(","new","EpsilonTransition","(","fromState,","beforeState",")",")",";","\n","add","(","pattern,","beforeState,","afterState",")",";","\n","transitionList",".","add","(","new","EpsilonTransition","(","afterState,","beforeState",")",")",";","\n","transitionList",".","add","(","new","EpsilonTransition","(","afterState,","toState",")",")",";","\n","return","this",";","\n"],"docstring_tokens":["Adds","a","transition","made","up","of","a","pattern","repeated","1","or","more","times"]}
{"code_tokens":["\n","AutomatonBuilder","repeat","(","State","fromState,","State","toState,","Pattern","pattern,\n","int","minRepeat,","int","maxRepeat",")","{","\n","//","Diagram","for","repeat","(","1,","3",")","\n","//","+--------","e","--------------+\n","//","|","+----","e","----+","|\n","//","|","|","V","V\n","//","fromState","--->","state0","--->","state1","--->","state2","--->","state3","--->","toState\n","//","e","pattern","pattern","pattern","e\n","//\n","Preconditions",".","checkArgument","(","0","<=","minRepeat",")",";","\n","Preconditions",".","checkArgument","(","minRepeat","<=","maxRepeat",")",";","\n","Preconditions",".","checkArgument","(","1","<=","maxRepeat",")",";","\n","State","prevState","=","fromState",";","\n","for","(","int","i","=","0",";","i","<=","maxRepeat",";","i++",")","{","\n","final","State","s","=","createState","(",")",";","\n","if","(","i","==","0",")","{","\n","transitionList",".","add","(","new","EpsilonTransition","(","fromState,","s",")",")",";","\n","}","else","{","\n","add","(","pattern,","prevState,","s",")",";","\n","}","\n","if","(","i",">=","minRepeat",")","{","\n","transitionList",".","add","(","new","EpsilonTransition","(","s,","toState",")",")",";","\n","}","\n","prevState","=","s",";","\n","}","\n","transitionList",".","add","(","new","EpsilonTransition","(","prevState,","toState",")",")",";","\n","return","this",";","\n"],"docstring_tokens":["Adds","a","transition","made","up","of","a","pattern","repeated","between","minRepeat","and","maxRepeat","times"]}
{"code_tokens":["\n","void","lookupSelectHints","(","\n","SqlSelect","select,\n","SqlParserPos","pos,\n","Collection<SqlMoniker>","hintList",")","{","\n","IdInfo","info","=","idPositions",".","get","(","pos",".","toString","(",")",")",";","\n","if","(","(","info","==","null",")","||","(","info",".","scope","==","null",")",")","{","\n","SqlNode","fromNode","=","select",".","getFrom","(",")",";","\n","final","SqlValidatorScope","fromScope","=","getFromScope","(","select",")",";","\n","lookupFromHints","(","fromNode,","fromScope,","pos,","hintList",")",";","\n","}","else","{","\n","lookupNameCompletionHints","(","info",".","scope,","info",".","id",".","names,\n","info",".","id",".","getParserPosition","(",")",",","hintList",")",";","\n","}","\n"],"docstring_tokens":["Looks","up","completion","hints","for","a","syntactically","correct","select","SQL","that","has","been","parsed","into","an","expression","tree"]}
{"code_tokens":["\n","public","final","void","lookupNameCompletionHints","(","\n","SqlValidatorScope","scope,\n","List<String>","names,\n","SqlParserPos","pos,\n","Collection<SqlMoniker>","hintList",")","{","\n","//","Remove","the","last","part","of","name","-","it","is","a","dummy\n","List<String>","subNames","=","Util",".","skipLast","(","names",")",";","\n\n","if","(","subNames",".","size","(",")",">","0",")","{","\n","//","If","there's","a","prefix,","resolve","it","to","a","namespace",".","\n","SqlValidatorNamespace","ns","=","null",";","\n","for","(","String","name",":","subNames",")","{","\n","if","(","ns","==","null",")","{","\n","final","SqlValidatorScope",".","ResolvedImpl","resolved","=\n","new","SqlValidatorScope",".","ResolvedImpl","(",")",";","\n","final","SqlNameMatcher","nameMatcher","=","catalogReader",".","nameMatcher","(",")",";","\n","scope",".","resolve","(","ImmutableList",".","of","(","name",")",",","nameMatcher,","false,","resolved",")",";","\n","if","(","resolved",".","count","(",")","==","1",")","{","\n","ns","=","resolved",".","only","(",")",".","namespace",";","\n","}","\n","}","else","{","\n","ns","=","ns",".","lookupChild","(","name",")",";","\n","}","\n","if","(","ns","==","null",")","{","\n","break",";","\n","}","\n","}","\n","if","(","ns","!=","null",")","{","\n","RelDataType","rowType","=","ns",".","getRowType","(",")",";","\n","if","(","rowType",".","isStruct","(",")",")","{","\n","for","(","RelDataTypeField","field",":","rowType",".","getFieldList","(",")",")","{","\n","hintList",".","add","(","\n","new","SqlMonikerImpl","(","\n","field",".","getName","(",")",",\n","SqlMonikerType",".","COLUMN",")",")",";","\n","}","\n","}","\n","}","\n\n","//","builtin","function","names","are","valid","completion","hints","when","the\n","//","identifier","has","only","1","name","part\n","findAllValidFunctionNames","(","names,","this,","hintList,","pos",")",";","\n","}","else","{","\n","//","No","prefix",";","use","the","children","of","the","current","scope","(","that","is,\n","//","the","aliases","in","the","FROM","clause",")","\n","scope",".","findAliases","(","hintList",")",";","\n\n","//","If","there's","only","one","alias,","add","all","child","columns\n","SelectScope","selectScope","=\n","SqlValidatorUtil",".","getEnclosingSelectScope","(","scope",")",";","\n","if","(","(","selectScope","!=","null",")","\n","&&","(","selectScope",".","getChildren","(",")",".","size","(",")","==","1",")",")","{","\n","RelDataType","rowType","=\n","selectScope",".","getChildren","(",")",".","get","(","0",")",".","getRowType","(",")",";","\n","for","(","RelDataTypeField","field",":","rowType",".","getFieldList","(",")",")","{","\n","hintList",".","add","(","\n","new","SqlMonikerImpl","(","\n","field",".","getName","(",")",",\n","SqlMonikerType",".","COLUMN",")",")",";","\n","}","\n","}","\n","}","\n\n","findAllValidUdfNames","(","names,","this,","hintList",")",";","\n"],"docstring_tokens":["Populates","a","list","of","all","the","valid","alternatives","for","an","identifier"]}
{"code_tokens":["\n","@Nullable","RelDataType","getTableConstructorRowType","(","\n","SqlCall","values,\n","SqlValidatorScope","scope",")","{","\n","final","List<SqlNode>","rows","=","values",".","getOperandList","(",")",";","\n","assert","rows",".","size","(",")",">=","1",";","\n","final","List<RelDataType>","rowTypes","=","new","ArrayList<>","(",")",";","\n","for","(","final","SqlNode","row",":","rows",")","{","\n","assert","row",".","getKind","(",")","==","SqlKind",".","ROW",";","\n","SqlCall","rowConstructor","=","(","SqlCall",")","row",";","\n\n","//","REVIEW","jvs","10-Sept-2003:","Once","we","support","single-row","queries","as\n","//","rows,","need","to","infer","aliases","from","there",".","\n","final","List<String>","aliasList","=","new","ArrayList<>","(",")",";","\n","final","List<RelDataType>","typeList","=","new","ArrayList<>","(",")",";","\n","for","(","Ord<SqlNode>","column",":","Ord",".","zip","(","rowConstructor",".","getOperandList","(",")",")",")","{","\n","final","String","alias","=","deriveAliasNonNull","(","column",".","e,","column",".","i",")",";","\n","aliasList",".","add","(","alias",")",";","\n","final","RelDataType","type","=","deriveType","(","scope,","column",".","e",")",";","\n","typeList",".","add","(","type",")",";","\n","}","\n","rowTypes",".","add","(","typeFactory",".","createStructType","(","typeList,","aliasList",")",")",";","\n","}","\n","if","(","rows",".","size","(",")","==","1",")","{","\n","//","TODO","jvs","10-Oct-2005:","get","rid","of","this","workaround","once\n","//","leastRestrictive","can","handle","all","cases\n","return","rowTypes",".","get","(","0",")",";","\n","}","\n","return","typeFactory",".","leastRestrictive","(","rowTypes",")",";","\n"],"docstring_tokens":["Returns","null","if","there","is","no","common","type"]}
{"code_tokens":["\n","protected","void","addToSelectList","(","\n","List<SqlNode>","list,\n","Set<String>","aliases,\n","List<Map",".","Entry<String,","RelDataType>>","fieldList,\n","SqlNode","exp,\n","SelectScope","scope,\n","final","boolean","includeSystemVars",")","{","\n","String","alias","=","SqlValidatorUtil",".","getAlias","(","exp,","-1",")",";","\n","String","uniqueAlias","=\n","SqlValidatorUtil",".","uniquify","(","\n","alias,","aliases,","SqlValidatorUtil",".","EXPR_SUGGESTER",")",";","\n","if","(","!Objects",".","equals","(","alias,","uniqueAlias",")",")","{","\n","exp","=","SqlValidatorUtil",".","addAlias","(","exp,","uniqueAlias",")",";","\n","}","\n","fieldList",".","add","(","Pair",".","of","(","uniqueAlias,","deriveType","(","scope,","exp",")",")",")",";","\n","list",".","add","(","exp",")",";","\n"],"docstring_tokens":["Adds","an","expression","to","a","select","list,","ensuring","that","its","alias","does","not","clash","with","any","existing","expressions","on","the","list"]}
{"code_tokens":["\n","private","void","registerQuery","(","\n","SqlValidatorScope","parentScope,\n","@Nullable","SqlValidatorScope","usingScope,\n","SqlNode","node,\n","SqlNode","enclosingNode,\n","@Nullable","String","alias,\n","boolean","forceNullable,\n","boolean","checkUpdate",")","{","\n","requireNonNull","(","node,","\"node\"",")",";","\n","requireNonNull","(","enclosingNode,","\"enclosingNode\"",")",";","\n","Preconditions",".","checkArgument","(","usingScope","==","null","||","alias","!=","null",")",";","\n\n","SqlCall","call",";","\n","List<SqlNode>","operands",";","\n","switch","(","node",".","getKind","(",")",")","{","\n","case","SELECT:\n","final","SqlSelect","select","=","(","SqlSelect",")","node",";","\n","final","SelectNamespace","selectNs","=\n","createSelectNamespace","(","select,","enclosingNode",")",";","\n","registerNamespace","(","usingScope,","alias,","selectNs,","forceNullable",")",";","\n","final","SqlValidatorScope","windowParentScope","=\n","(","usingScope","!=","null",")","?","usingScope",":","parentScope",";","\n","SelectScope","selectScope","=\n","new","SelectScope","(","parentScope,","windowParentScope,","select",")",";","\n","scopes",".","put","(","select,","selectScope",")",";","\n\n","//","Start","by","registering","the","WHERE","clause\n","clauseScopes",".","put","(","IdPair",".","of","(","select,","Clause",".","WHERE",")",",","selectScope",")",";","\n","registerOperandSubQueries","(","\n","selectScope,\n","select,\n","SqlSelect",".","WHERE_OPERAND",")",";","\n\n","//","Register","FROM","with","the","inherited","scope","'parentScope',","not\n","//","'selectScope',","otherwise","tables","in","the","FROM","clause","would","be\n","//","able","to","see","each","other",".","\n","final","SqlNode","from","=","select",".","getFrom","(",")",";","\n","if","(","from","!=","null",")","{","\n","final","SqlNode","newFrom","=\n","registerFrom","(","\n","parentScope,\n","selectScope,\n","true,\n","from,\n","from,\n","null,\n","null,\n","false,\n","false",")",";","\n","if","(","newFrom","!=","from",")","{","\n","select",".","setFrom","(","newFrom",")",";","\n","}","\n","}","\n\n","//","If","this","is","an","aggregating","query,","the","SELECT","list","and","HAVING\n","//","clause","use","a","different","scope,","where","you","can","only","reference\n","//","columns","which","are","in","the","GROUP","BY","clause",".","\n","SqlValidatorScope","aggScope","=","selectScope",";","\n","if","(","isAggregate","(","select",")",")","{","\n","aggScope","=\n","new","AggregatingSelectScope","(","selectScope,","select,","false",")",";","\n","clauseScopes",".","put","(","IdPair",".","of","(","select,","Clause",".","SELECT",")",",","aggScope",")",";","\n","}","else","{","\n","clauseScopes",".","put","(","IdPair",".","of","(","select,","Clause",".","SELECT",")",",","selectScope",")",";","\n","}","\n","if","(","select",".","getGroup","(",")","!=","null",")","{","\n","GroupByScope","groupByScope","=\n","new","GroupByScope","(","selectScope,","select",".","getGroup","(",")",",","select",")",";","\n","clauseScopes",".","put","(","IdPair",".","of","(","select,","Clause",".","GROUP_BY",")",",","groupByScope",")",";","\n","registerSubQueries","(","groupByScope,","select",".","getGroup","(",")",")",";","\n","}","\n","registerOperandSubQueries","(","\n","aggScope,\n","select,\n","SqlSelect",".","HAVING_OPERAND",")",";","\n","registerSubQueries","(","aggScope,","SqlNonNullableAccessors",".","getSelectList","(","select",")",")",";","\n","final","SqlNodeList","orderList","=","select",".","getOrderList","(",")",";","\n","if","(","orderList","!=","null",")","{","\n","//","If","the","query","is","'SELECT","DISTINCT',","restrict","the","columns\n","//","available","to","the","ORDER","BY","clause",".","\n","if","(","select",".","isDistinct","(",")",")","{","\n","aggScope","=\n","new","AggregatingSelectScope","(","selectScope,","select,","true",")",";","\n","}","\n","OrderByScope","orderScope","=\n","new","OrderByScope","(","aggScope,","orderList,","select",")",";","\n","clauseScopes",".","put","(","IdPair",".","of","(","select,","Clause",".","ORDER",")",",","orderScope",")",";","\n","registerSubQueries","(","orderScope,","orderList",")",";","\n\n","if","(","!isAggregate","(","select",")",")","{","\n","//","Since","this","is","not","an","aggregating","query,\n","//","there","cannot","be","any","aggregates","in","the","ORDER","BY","clause",".","\n","SqlNode","agg","=","aggFinder",".","findAgg","(","orderList",")",";","\n","if","(","agg","!=","null",")","{","\n","throw","newValidationError","(","agg,","RESOURCE",".","aggregateIllegalInOrderBy","(",")",")",";","\n","}","\n","}","\n","}","\n","break",";","\n\n","case","INTERSECT:\n","validateFeature","(","RESOURCE",".","sQLFeature_F302","(",")",",","node",".","getParserPosition","(",")",")",";","\n","registerSetop","(","\n","parentScope,\n","usingScope,\n","node,\n","node,\n","alias,\n","forceNullable",")",";","\n","break",";","\n\n","case","EXCEPT:\n","validateFeature","(","RESOURCE",".","sQLFeature_E071_03","(",")",",","node",".","getParserPosition","(",")",")",";","\n","registerSetop","(","\n","parentScope,\n","usingScope,\n","node,\n","node,\n","alias,\n","forceNullable",")",";","\n","break",";","\n\n","case","UNION:\n","registerSetop","(","\n","parentScope,\n","usingScope,\n","node,\n","node,\n","alias,\n","forceNullable",")",";","\n","break",";","\n\n","case","WITH:\n","registerWith","(","parentScope,","usingScope,","(","SqlWith",")","node,","enclosingNode,\n","alias,","forceNullable,","checkUpdate",")",";","\n","break",";","\n\n","case","VALUES:\n","call","=","(","SqlCall",")","node",";","\n","scopes",".","put","(","call,","parentScope",")",";","\n","final","TableConstructorNamespace","tableConstructorNamespace","=\n","new","TableConstructorNamespace","(","\n","this,\n","call,\n","parentScope,\n","enclosingNode",")",";","\n","registerNamespace","(","\n","usingScope,\n","alias,\n","tableConstructorNamespace,\n","forceNullable",")",";","\n","operands","=","call",".","getOperandList","(",")",";","\n","for","(","int","i","=","0",";","i","<","operands",".","size","(",")",";","++i",")","{","\n","assert","operands",".","get","(","i",")",".","getKind","(",")","==","SqlKind",".","ROW",";","\n\n","//","FIXME","jvs","9-Feb-2005:","Correlation","should\n","//","be","illegal","in","these","sub-queries",".","Same","goes","for\n","//","any","non-lateral","SELECT","in","the","FROM","list",".","\n","registerOperandSubQueries","(","parentScope,","call,","i",")",";","\n","}","\n","break",";","\n\n","case","INSERT:\n","SqlInsert","insertCall","=","(","SqlInsert",")","node",";","\n","InsertNamespace","insertNs","=\n","new","InsertNamespace","(","\n","this,\n","insertCall,\n","enclosingNode,\n","parentScope",")",";","\n","registerNamespace","(","usingScope,","null,","insertNs,","forceNullable",")",";","\n","registerQuery","(","\n","parentScope,\n","usingScope,\n","insertCall",".","getSource","(",")",",\n","enclosingNode,\n","null,\n","false",")",";","\n","break",";","\n\n","case","DELETE:\n","SqlDelete","deleteCall","=","(","SqlDelete",")","node",";","\n","DeleteNamespace","deleteNs","=\n","new","DeleteNamespace","(","\n","this,\n","deleteCall,\n","enclosingNode,\n","parentScope",")",";","\n","registerNamespace","(","usingScope,","null,","deleteNs,","forceNullable",")",";","\n","registerQuery","(","\n","parentScope,\n","usingScope,\n","SqlNonNullableAccessors",".","getSourceSelect","(","deleteCall",")",",\n","enclosingNode,\n","null,\n","false",")",";","\n","break",";","\n\n","case","UPDATE:\n","if","(","checkUpdate",")","{","\n","validateFeature","(","RESOURCE",".","sQLFeature_E101_03","(",")",",\n","node",".","getParserPosition","(",")",")",";","\n","}","\n","SqlUpdate","updateCall","=","(","SqlUpdate",")","node",";","\n","UpdateNamespace","updateNs","=\n","new","UpdateNamespace","(","\n","this,\n","updateCall,\n","enclosingNode,\n","parentScope",")",";","\n","registerNamespace","(","usingScope,","null,","updateNs,","forceNullable",")",";","\n","registerQuery","(","\n","parentScope,\n","usingScope,\n","SqlNonNullableAccessors",".","getSourceSelect","(","updateCall",")",",\n","enclosingNode,\n","null,\n","false",")",";","\n","break",";","\n\n","case","MERGE:\n","validateFeature","(","RESOURCE",".","sQLFeature_F312","(",")",",","node",".","getParserPosition","(",")",")",";","\n","SqlMerge","mergeCall","=","(","SqlMerge",")","node",";","\n","MergeNamespace","mergeNs","=\n","new","MergeNamespace","(","\n","this,\n","mergeCall,\n","enclosingNode,\n","parentScope",")",";","\n","registerNamespace","(","usingScope,","null,","mergeNs,","forceNullable",")",";","\n","registerQuery","(","\n","parentScope,\n","usingScope,\n","SqlNonNullableAccessors",".","getSourceSelect","(","mergeCall",")",",\n","enclosingNode,\n","null,\n","false",")",";","\n\n","//","update","call","can","reference","either","the","source","table","reference\n","//","or","the","target","table,","so","set","its","parent","scope","to","the","merge's\n","//","source","select",";","when","validating","the","update,","skip","the","feature\n","//","validation","check\n","SqlUpdate","mergeUpdateCall","=","mergeCall",".","getUpdateCall","(",")",";","\n","if","(","mergeUpdateCall","!=","null",")","{","\n","registerQuery","(","\n","getScope","(","SqlNonNullableAccessors",".","getSourceSelect","(","mergeCall",")",",","Clause",".","WHERE",")",",\n","null,\n","mergeUpdateCall,\n","enclosingNode,\n","null,\n","false,\n","false",")",";","\n","}","\n","SqlInsert","mergeInsertCall","=","mergeCall",".","getInsertCall","(",")",";","\n","if","(","mergeInsertCall","!=","null",")","{","\n","registerQuery","(","\n","parentScope,\n","null,\n","mergeInsertCall,\n","enclosingNode,\n","null,\n","false",")",";","\n","}","\n","break",";","\n\n","case","UNNEST:\n","call","=","(","SqlCall",")","node",";","\n","final","UnnestNamespace","unnestNs","=\n","new","UnnestNamespace","(","this,","call,","parentScope,","enclosingNode",")",";","\n","registerNamespace","(","\n","usingScope,\n","alias,\n","unnestNs,\n","forceNullable",")",";","\n","registerOperandSubQueries","(","parentScope,","call,","0",")",";","\n","scopes",".","put","(","node,","parentScope",")",";","\n","break",";","\n","case","OTHER_FUNCTION:\n","call","=","(","SqlCall",")","node",";","\n","ProcedureNamespace","procNs","=\n","new","ProcedureNamespace","(","\n","this,\n","parentScope,\n","call,\n","enclosingNode",")",";","\n","registerNamespace","(","\n","usingScope,\n","alias,\n","procNs,\n","forceNullable",")",";","\n","registerSubQueries","(","parentScope,","call",")",";","\n","break",";","\n\n","case","MULTISET_QUERY_CONSTRUCTOR:\n","case","MULTISET_VALUE_CONSTRUCTOR:\n","validateFeature","(","RESOURCE",".","sQLFeature_S271","(",")",",","node",".","getParserPosition","(",")",")",";","\n","call","=","(","SqlCall",")","node",";","\n","CollectScope","cs","=","new","CollectScope","(","parentScope,","usingScope,","call",")",";","\n","final","CollectNamespace","tableConstructorNs","=\n","new","CollectNamespace","(","call,","cs,","enclosingNode",")",";","\n","final","String","alias2","=","deriveAliasNonNull","(","node,","nextGeneratedId++",")",";","\n","registerNamespace","(","\n","usingScope,\n","alias2,\n","tableConstructorNs,\n","forceNullable",")",";","\n","operands","=","call",".","getOperandList","(",")",";","\n","for","(","int","i","=","0",";","i","<","operands",".","size","(",")",";","i++",")","{","\n","registerOperandSubQueries","(","parentScope,","call,","i",")",";","\n","}","\n","break",";","\n\n","default:\n","throw","Util",".","unexpected","(","node",".","getKind","(",")",")",";","\n","}","\n"],"docstring_tokens":["Registers","a","query","in","a","parent","scope"]}
{"code_tokens":["\n","private","@Nullable","SqlNode","getAgg","(","SqlSelect","select",")","{","\n","final","SelectScope","selectScope","=","getRawSelectScope","(","select",")",";","\n","if","(","selectScope","!=","null",")","{","\n","final","List<SqlNode>","selectList","=","selectScope",".","getExpandedSelectList","(",")",";","\n","if","(","selectList","!=","null",")","{","\n","return","aggFinder",".","findAgg","(","selectList",")",";","\n","}","\n","}","\n","return","aggFinder",".","findAgg","(","SqlNonNullableAccessors",".","getSelectList","(","select",")",")",";","\n"],"docstring_tokens":["If","there","is","at","least","one","call","to","an","aggregate","function,","returns","the","first"]}
{"code_tokens":["\n","private","void","registerOperandSubQueries","(","\n","SqlValidatorScope","parentScope,\n","SqlCall","call,\n","int","operandOrdinal",")","{","\n","SqlNode","operand","=","call",".","operand","(","operandOrdinal",")",";","\n","if","(","operand","==","null",")","{","\n","return",";","\n","}","\n","if","(","operand",".","getKind","(",")",".","belongsTo","(","SqlKind",".","QUERY",")","\n","&&","call",".","getOperator","(",")",".","argumentMustBeScalar","(","operandOrdinal",")",")","{","\n","operand","=\n","SqlStdOperatorTable",".","SCALAR_QUERY",".","createCall","(","\n","operand",".","getParserPosition","(",")",",\n","operand",")",";","\n","call",".","setOperand","(","operandOrdinal,","operand",")",";","\n","}","\n","registerSubQueries","(","parentScope,","operand",")",";","\n"],"docstring_tokens":["Registers","any","sub-queries","inside","a","given","call","operand,","and","converts","the","operand","to","a","scalar","sub-query","if","the","operator","requires","it"]}
{"code_tokens":["\n","private","void","validateNoAggs","(","AggFinder","aggFinder,","SqlNode","node,\n","String","clause",")","{","\n","final","SqlCall","agg","=","aggFinder",".","findAgg","(","node",")",";","\n","if","(","agg","==","null",")","{","\n","return",";","\n","}","\n","final","SqlOperator","op","=","agg",".","getOperator","(",")",";","\n","if","(","op","==","SqlStdOperatorTable",".","OVER",")","{","\n","throw","newValidationError","(","agg,\n","RESOURCE",".","windowedAggregateIllegalInClause","(","clause",")",")",";","\n","}","else","if","(","op",".","isGroup","(",")","||","op",".","isGroupAuxiliary","(",")",")","{","\n","throw","newValidationError","(","agg,\n","RESOURCE",".","groupFunctionMustAppearInGroupByClause","(","op",".","getName","(",")",")",")",";","\n","}","else","{","\n","throw","newValidationError","(","agg,\n","RESOURCE",".","aggregateIllegalInClause","(","clause",")",")",";","\n","}","\n"],"docstring_tokens":["Throws","an","error","if","there","is","an","aggregate","or","windowed","aggregate","in","the","given","clause"]}
{"code_tokens":["\n","private","void","validateModality","(","SqlNode","query",")","{","\n","final","SqlModality","modality","=","deduceModality","(","query",")",";","\n","if","(","query","instanceof","SqlSelect",")","{","\n","final","SqlSelect","select","=","(","SqlSelect",")","query",";","\n","validateModality","(","select,","modality,","true",")",";","\n","}","else","if","(","query",".","getKind","(",")","==","SqlKind",".","VALUES",")","{","\n","switch","(","modality",")","{","\n","case","STREAM:\n","throw","newValidationError","(","query,","Static",".","RESOURCE",".","cannotStreamValues","(",")",")",";","\n","default:\n","break",";","\n","}","\n","}","else","{","\n","assert","query",".","isA","(","SqlKind",".","SET_QUERY",")",";","\n","final","SqlCall","call","=","(","SqlCall",")","query",";","\n","for","(","SqlNode","operand",":","call",".","getOperandList","(",")",")","{","\n","if","(","deduceModality","(","operand",")","!=","modality",")","{","\n","throw","newValidationError","(","operand,\n","Static",".","RESOURCE",".","streamSetOpInconsistentInputs","(",")",")",";","\n","}","\n","validateModality","(","operand",")",";","\n","}","\n","}","\n"],"docstring_tokens":["Validates","that","a","query","can","deliver","the","modality","it","promises"]}
{"code_tokens":["\n","protected","void","validateOrderList","(","SqlSelect","select",")","{","\n","//","ORDER","BY","is","validated","in","a","scope","where","aliases","in","the","SELECT","clause\n","//","are","visible",".","For","example,","\"SELECT","empno","AS","x","FROM","emp","ORDER","BY","x\"\n","//","is","valid",".","\n","SqlNodeList","orderList","=","select",".","getOrderList","(",")",";","\n","if","(","orderList","==","null",")","{","\n","return",";","\n","}","\n","if","(","!shouldAllowIntermediateOrderBy","(",")",")","{","\n","if","(","!cursorSet",".","contains","(","select",")",")","{","\n","throw","newValidationError","(","select,","RESOURCE",".","invalidOrderByPos","(",")",")",";","\n","}","\n","}","\n","final","SqlValidatorScope","orderScope","=","getOrderScope","(","select",")",";","\n","requireNonNull","(","orderScope,","\"orderScope\"",")",";","\n\n","List<SqlNode>","expandList","=","new","ArrayList<>","(",")",";","\n","for","(","SqlNode","orderItem",":","orderList",")","{","\n","SqlNode","expandedOrderItem","=","expand","(","orderItem,","orderScope",")",";","\n","expandList",".","add","(","expandedOrderItem",")",";","\n","}","\n\n","SqlNodeList","expandedOrderList","=","new","SqlNodeList","(","\n","expandList,\n","orderList",".","getParserPosition","(",")",")",";","\n","select",".","setOrderBy","(","expandedOrderList",")",";","\n\n","for","(","SqlNode","orderItem",":","expandedOrderList",")","{","\n","validateOrderItem","(","select,","orderItem",")",";","\n","}","\n"],"docstring_tokens":["Validates","the","ORDER","BY","clause","of","a","SELECT","statement"]}
{"code_tokens":["\n","private","void","validateGroupByItem","(","SqlSelect","select,","SqlNode","groupByItem",")","{","\n","final","SqlValidatorScope","groupByScope","=","getGroupScope","(","select",")",";","\n","validateGroupByExpr","(","groupByItem,","groupByScope",")",";","\n","groupByScope",".","validateExpr","(","groupByItem",")",";","\n"],"docstring_tokens":["Validates","an","item","in","the","GROUP","BY","clause","of","a","SELECT","statement"]}
{"code_tokens":["\n","protected","void","validateGroupClause","(","SqlSelect","select",")","{","\n","SqlNodeList","groupList","=","select",".","getGroup","(",")",";","\n","if","(","groupList","==","null",")","{","\n","return",";","\n","}","\n","final","String","clause","=","\"GROUP","BY\"",";","\n","validateNoAggs","(","aggOrOverFinder,","groupList,","clause",")",";","\n","final","SqlValidatorScope","groupScope","=","getGroupScope","(","select",")",";","\n\n","//","expand","the","expression","in","group","list",".","\n","List<SqlNode>","expandedList","=","new","ArrayList<>","(",")",";","\n","for","(","SqlNode","groupItem",":","groupList",")","{","\n","SqlNode","expandedItem","=","expandGroupByOrHavingExpr","(","groupItem,","groupScope,","select,","false",")",";","\n","expandedList",".","add","(","expandedItem",")",";","\n","}","\n","groupList","=","new","SqlNodeList","(","expandedList,","groupList",".","getParserPosition","(",")",")",";","\n","select",".","setGroupBy","(","groupList",")",";","\n","inferUnknownTypes","(","unknownType,","groupScope,","groupList",")",";","\n","for","(","SqlNode","groupItem",":","expandedList",")","{","\n","validateGroupByItem","(","select,","groupItem",")",";","\n","}","\n\n","//","Nodes","in","the","GROUP","BY","clause","are","expressions","except","if","they","are","calls\n","//","to","the","GROUPING","SETS,","ROLLUP","or","CUBE","operators",";","this","operators","are","not\n","//","expressions,","because","they","do","not","have","a","type",".","\n","for","(","SqlNode","node",":","groupList",")","{","\n","switch","(","node",".","getKind","(",")",")","{","\n","case","GROUPING_SETS:\n","case","ROLLUP:\n","case","CUBE:\n","node",".","validate","(","this,","groupScope",")",";","\n","break",";","\n","default:\n","node",".","validateExpr","(","this,","groupScope",")",";","\n","}","\n","}","\n\n","//","Derive","the","type","of","each","GROUP","BY","item",".","We","don't","need","the","type,","but\n","//","it","resolves","functions,","and","that","is","necessary","for","deducing\n","//","monotonicity",".","\n","final","SqlValidatorScope","selectScope","=","getSelectScope","(","select",")",";","\n","AggregatingSelectScope","aggregatingScope","=","null",";","\n","if","(","selectScope","instanceof","AggregatingSelectScope",")","{","\n","aggregatingScope","=","(","AggregatingSelectScope",")","selectScope",";","\n","}","\n","for","(","SqlNode","groupItem",":","groupList",")","{","\n","if","(","groupItem","instanceof","SqlNodeList\n","&&","(","(","SqlNodeList",")","groupItem",")",".","size","(",")","==","0",")","{","\n","continue",";","\n","}","\n","validateGroupItem","(","groupScope,","aggregatingScope,","groupItem",")",";","\n","}","\n\n","SqlNode","agg","=","aggFinder",".","findAgg","(","groupList",")",";","\n","if","(","agg","!=","null",")","{","\n","throw","newValidationError","(","agg,","RESOURCE",".","aggregateIllegalInClause","(","clause",")",")",";","\n","}","\n"],"docstring_tokens":["Validates","the","GROUP","BY","clause","of","a","SELECT","statement"]}
{"code_tokens":["\n","protected","RelDataType","createTargetRowType","(","\n","SqlValidatorTable","table,\n","@Nullable","SqlNodeList","targetColumnList,\n","boolean","append",")","{","\n","RelDataType","baseRowType","=","table",".","getRowType","(",")",";","\n","if","(","targetColumnList","==","null",")","{","\n","return","baseRowType",";","\n","}","\n","List<RelDataTypeField>","targetFields","=","baseRowType",".","getFieldList","(",")",";","\n","final","List<Map",".","Entry<String,","RelDataType>>","fields","=","new","ArrayList<>","(",")",";","\n","if","(","append",")","{","\n","for","(","RelDataTypeField","targetField",":","targetFields",")","{","\n","fields",".","add","(","\n","Pair",".","of","(","SqlUtil",".","deriveAliasFromOrdinal","(","fields",".","size","(",")",")",",\n","targetField",".","getType","(",")",")",")",";","\n","}","\n","}","\n","final","Set<Integer>","assignedFields","=","new","HashSet<>","(",")",";","\n","final","RelOptTable","relOptTable","=","table","instanceof","RelOptTable\n","?","(","(","RelOptTable",")","table",")",":","null",";","\n","for","(","SqlNode","node",":","targetColumnList",")","{","\n","SqlIdentifier","id","=","(","SqlIdentifier",")","node",";","\n","RelDataTypeField","targetField","=\n","SqlValidatorUtil",".","getTargetField","(","\n","baseRowType,","typeFactory,","id,","catalogReader,","relOptTable",")",";","\n","if","(","targetField","==","null",")","{","\n","throw","newValidationError","(","id,\n","RESOURCE",".","unknownTargetColumn","(","id",".","toString","(",")",")",")",";","\n","}","\n","if","(","!assignedFields",".","add","(","targetField",".","getIndex","(",")",")",")","{","\n","throw","newValidationError","(","id,\n","RESOURCE",".","duplicateTargetColumn","(","targetField",".","getName","(",")",")",")",";","\n","}","\n","fields",".","add","(","targetField",")",";","\n","}","\n","return","typeFactory",".","createStructType","(","fields",")",";","\n"],"docstring_tokens":["Derives","a","row-type","for","INSERT","and","UPDATE","operations"]}
{"code_tokens":["\n","private","void","checkConstraint","(","\n","SqlValidatorTable","validatorTable,\n","SqlNode","source,\n","RelDataType","targetRowType",")","{","\n","final","ModifiableViewTable","modifiableViewTable","=\n","validatorTable",".","unwrap","(","ModifiableViewTable",".","class",")",";","\n","if","(","modifiableViewTable","!=","null","&&","source","instanceof","SqlCall",")","{","\n","final","Table","table","=","modifiableViewTable",".","getTable","(",")",";","\n","final","RelDataType","tableRowType","=","table",".","getRowType","(","typeFactory",")",";","\n","final","List<RelDataTypeField>","tableFields","=","tableRowType",".","getFieldList","(",")",";","\n\n","//","Get","the","mapping","from","column","indexes","of","the","underlying","table\n","//","to","the","target","columns","and","view","constraints",".","\n","final","Map<Integer,","RelDataTypeField>","tableIndexToTargetField","=\n","SqlValidatorUtil",".","getIndexToFieldMap","(","tableFields,","targetRowType",")",";","\n","final","Map<Integer,","RexNode>","projectMap","=\n","RelOptUtil",".","getColumnConstraints","(","modifiableViewTable,","targetRowType,","typeFactory",")",";","\n\n","//","Determine","columns","(","indexed","to","the","underlying","table",")","that","need\n","//","to","be","validated","against","the","view","constraint",".","\n","@SuppressWarnings","(","\"RedundantCast\"",")","\n","final","ImmutableBitSet","targetColumns","=\n","ImmutableBitSet",".","of","(","(","Iterable<Integer>",")","tableIndexToTargetField",".","keySet","(",")",")",";","\n","@SuppressWarnings","(","\"RedundantCast\"",")","\n","final","ImmutableBitSet","constrainedColumns","=\n","ImmutableBitSet",".","of","(","(","Iterable<Integer>",")","projectMap",".","keySet","(",")",")",";","\n","@SuppressWarnings","(","\"assignment",".","type",".","incompatible\"",")","\n","List<@KeyFor","(","{","\"tableIndexToTargetField\",","\"projectMap\"","}",")","Integer>","constrainedTargetColumns","=\n","targetColumns",".","intersect","(","constrainedColumns",")",".","asList","(",")",";","\n\n","//","Validate","insert","values","against","the","view","constraint",".","\n","final","List<SqlNode>","values","=","(","(","SqlCall",")","source",")",".","getOperandList","(",")",";","\n","for","(","final","int","colIndex:","constrainedTargetColumns",")","{","\n","final","String","colName","=","tableFields",".","get","(","colIndex",")",".","getName","(",")",";","\n","final","RelDataTypeField","targetField","=","tableIndexToTargetField",".","get","(","colIndex",")",";","\n","for","(","SqlNode","row",":","values",")","{","\n","final","SqlCall","call","=","(","SqlCall",")","row",";","\n","final","SqlNode","sourceValue","=","call",".","operand","(","targetField",".","getIndex","(",")",")",";","\n","final","ValidationError","validationError","=\n","new","ValidationError","(","sourceValue,\n","RESOURCE",".","viewConstraintNotSatisfied","(","colName,\n","Util",".","last","(","validatorTable",".","getQualifiedName","(",")",")",")",")",";","\n","RelOptUtil",".","validateValueAgainstConstraint","(","sourceValue,\n","projectMap",".","get","(","colIndex",")",",","validationError",")",";","\n","}","\n","}","\n","}","\n"],"docstring_tokens":["Validates","insert","values","against","the","constraint","of","a","modifiable","view"]}
{"code_tokens":["\n","private","void","checkConstraint","(","\n","SqlValidatorTable","validatorTable,\n","SqlUpdate","update,\n","RelDataType","targetRowType",")","{","\n","final","ModifiableViewTable","modifiableViewTable","=\n","validatorTable",".","unwrap","(","ModifiableViewTable",".","class",")",";","\n","if","(","modifiableViewTable","!=","null",")","{","\n","final","Table","table","=","modifiableViewTable",".","getTable","(",")",";","\n","final","RelDataType","tableRowType","=","table",".","getRowType","(","typeFactory",")",";","\n\n","final","Map<Integer,","RexNode>","projectMap","=\n","RelOptUtil",".","getColumnConstraints","(","modifiableViewTable,","targetRowType,\n","typeFactory",")",";","\n","final","Map<String,","Integer>","nameToIndex","=\n","SqlValidatorUtil",".","mapNameToIndex","(","tableRowType",".","getFieldList","(",")",")",";","\n\n","//","Validate","update","values","against","the","view","constraint",".","\n","final","List<String>","targetNames","=\n","SqlIdentifier",".","simpleNames","(","update",".","getTargetColumnList","(",")",")",";","\n","final","List<SqlNode>","sources","=","update",".","getSourceExpressionList","(",")",";","\n","Pair",".","forEach","(","targetNames,","sources,","(","columnName,","expr",")","->","{","\n","final","Integer","columnIndex","=","nameToIndex",".","get","(","columnName",")",";","\n","if","(","projectMap",".","containsKey","(","columnIndex",")",")","{","\n","final","RexNode","columnConstraint","=","projectMap",".","get","(","columnIndex",")",";","\n","final","ValidationError","validationError","=\n","new","ValidationError","(","expr,\n","RESOURCE",".","viewConstraintNotSatisfied","(","columnName,\n","Util",".","last","(","validatorTable",".","getQualifiedName","(",")",")",")",")",";","\n","RelOptUtil",".","validateValueAgainstConstraint","(","expr,\n","columnConstraint,","validationError",")",";","\n","}","\n","}",")",";","\n","}","\n"],"docstring_tokens":["Validates","updates","against","the","constraint","of","a","modifiable","view"]}
{"code_tokens":["\n","private","void","checkFieldCount","(","SqlNode","node,","SqlValidatorTable","table,\n","List<ColumnStrategy>","strategies,","RelDataType","targetRowTypeToValidate,\n","RelDataType","realTargetRowType,","SqlNode","source,\n","RelDataType","logicalSourceRowType,","RelDataType","logicalTargetRowType",")","{","\n","final","int","sourceFieldCount","=","logicalSourceRowType",".","getFieldCount","(",")",";","\n","final","int","targetFieldCount","=","logicalTargetRowType",".","getFieldCount","(",")",";","\n","final","int","targetRealFieldCount","=","realTargetRowType",".","getFieldCount","(",")",";","\n","if","(","sourceFieldCount","!=","targetFieldCount\n","&&","sourceFieldCount","!=","targetRealFieldCount",")","{","\n","//","Allows","the","source","row","fields","count","to","be","equal","with","either\n","//","the","logical","or","the","real","(","excludes","columns","that","can","not","insert","into",")","\n","//","target","row","fields","count",".","\n","throw","newValidationError","(","node,\n","RESOURCE",".","unmatchInsertColumn","(","targetFieldCount,","sourceFieldCount",")",")",";","\n","}","\n","//","Ensure","that","non-nullable","fields","are","targeted",".","\n","for","(","final","RelDataTypeField","field",":","table",".","getRowType","(",")",".","getFieldList","(",")",")","{","\n","final","RelDataTypeField","targetField","=\n","targetRowTypeToValidate",".","getField","(","field",".","getName","(",")",",","true,","false",")",";","\n","switch","(","strategies",".","get","(","field",".","getIndex","(",")",")",")","{","\n","case","NOT_NULLABLE:\n","assert","!field",".","getType","(",")",".","isNullable","(",")",";","\n","if","(","targetField","==","null",")","{","\n","throw","newValidationError","(","node,\n","RESOURCE",".","columnNotNullable","(","field",".","getName","(",")",")",")",";","\n","}","\n","break",";","\n","case","NULLABLE:\n","assert","field",".","getType","(",")",".","isNullable","(",")",";","\n","break",";","\n","case","VIRTUAL:\n","case","STORED:\n","if","(","targetField","!=","null\n","&&","!isValuesWithDefault","(","source,","targetField",".","getIndex","(",")",")",")","{","\n","throw","newValidationError","(","node,\n","RESOURCE",".","insertIntoAlwaysGenerated","(","field",".","getName","(",")",")",")",";","\n","}","\n","break",";","\n","default:\n","break",";","\n","}","\n","}","\n"],"docstring_tokens":["Check","the","field","count","of","sql","insert","source","and","target","node","row","type"]}
{"code_tokens":["\n","private","void","validateSnapshot","(","\n","SqlNode","node,\n","@Nullable","SqlValidatorScope","scope,\n","SqlValidatorNamespace","ns",")","{","\n","if","(","node",".","getKind","(",")","==","SqlKind",".","SNAPSHOT",")","{","\n","SqlSnapshot","snapshot","=","(","SqlSnapshot",")","node",";","\n","SqlNode","period","=","snapshot",".","getPeriod","(",")",";","\n","RelDataType","dataType","=","deriveType","(","requireNonNull","(","scope,","\"scope\"",")",",","period",")",";","\n","if","(","dataType",".","getSqlTypeName","(",")","!=","SqlTypeName",".","TIMESTAMP",")","{","\n","throw","newValidationError","(","period,\n","Static",".","RESOURCE",".","illegalExpressionForTemporal","(","dataType",".","getSqlTypeName","(",")",".","getName","(",")",")",")",";","\n","}","\n","SqlValidatorTable","table","=","getTable","(","ns",")",";","\n","if","(","!table",".","isTemporal","(",")",")","{","\n","List<String>","qualifiedName","=","table",".","getQualifiedName","(",")",";","\n","String","tableName","=","qualifiedName",".","get","(","qualifiedName",".","size","(",")","-","1",")",";","\n","throw","newValidationError","(","snapshot",".","getTableRef","(",")",",\n","Static",".","RESOURCE",".","notTemporalTable","(","tableName",")",")",";","\n","}","\n","}","\n"],"docstring_tokens":["Validates","snapshot","to","a","table"]}
{"code_tokens":["\n","public","static","MaterializedViewTableMacro","create","(","final","CalciteSchema","schema,\n","final","String","viewSql,","final","@Nullable","List<String>","viewSchemaPath,","List<String>","viewPath,\n","final","@Nullable","String","suggestedTableName,","boolean","existing",")","{","\n","return","new","MaterializedViewTableMacro","(","schema,","viewSql,","viewSchemaPath,","viewPath,\n","suggestedTableName,","existing",")",";","\n"],"docstring_tokens":["Table","macro","that","returns","a","materialized","view"]}
{"code_tokens":["\n","public","static","<E>","List<E>","of","(","@Nullable","E","e1",")","{","\n","//noinspection","unchecked\n","return","e1","==","null","?","(","List<E>",")","SINGLETON_NULL",":","ImmutableList",".","of","(","e1",")",";","\n"],"docstring_tokens":["Creates","an","immutable","list","of","1","element"]}
{"code_tokens":["\n","public","static","<E>","List<E>","of","(","E","e1,","E","e2",")","{","\n","//","Only","we","can","see","the","varargs","array",".","Therefore","the","list","is","immutable",".","\n","//noinspection","unchecked\n","return","UnmodifiableArrayList",".","of","(","e1,","e2",")",";","\n"],"docstring_tokens":["Creates","an","immutable","list","of","2","elements"]}
{"code_tokens":["\n","public","static","<E>","List<E>","of","(","E","e1,","E","e2,","E","e3",")","{","\n","//","Only","we","can","see","the","varargs","array",".","Therefore","the","list","is","immutable",".","\n","//noinspection","unchecked\n","return","UnmodifiableArrayList",".","of","(","e1,","e2,","e3",")",";","\n"],"docstring_tokens":["Creates","an","immutable","list","of","3","elements"]}
{"code_tokens":["\n","public","static","<E>","List<E>","of","(","E","e1,","E","e2,","E","e3,","E","e4",")","{","\n","//","Only","we","can","see","the","varargs","array",".","Therefore","the","list","is","immutable",".","\n","//noinspection","unchecked\n","return","UnmodifiableArrayList",".","of","(","e1,","e2,","e3,","e4",")",";","\n"],"docstring_tokens":["Creates","an","immutable","list","of","4","elements"]}
{"code_tokens":["\n","public","static","<E>","List<E>","of","(","E","e1,","E","e2,","E","e3,","E","e4,","E","e5",")","{","\n","//","Only","we","can","see","the","varargs","array",".","Therefore","the","list","is","immutable",".","\n","//noinspection","unchecked\n","return","UnmodifiableArrayList",".","of","(","e1,","e2,","e3,","e4,","e5",")",";","\n"],"docstring_tokens":["Creates","an","immutable","list","of","5","elements"]}
{"code_tokens":["\n","public","static","<E>","List<E>","of","(","E","e1,","E","e2,","E","e3,","E","e4,","E","e5,","E","e6",")","{","\n","//","Only","we","can","see","the","varargs","array",".","Therefore","the","list","is","immutable",".","\n","//noinspection","unchecked\n","return","UnmodifiableArrayList",".","of","(","e1,","e2,","e3,","e4,","e5,","e6",")",";","\n"],"docstring_tokens":["Creates","an","immutable","list","of","6","elements"]}
{"code_tokens":["\n","public","static","<E>","List<E>","of","(","E","e1,","E","e2,","E","e3,","E","e4,","E","e5,","E","e6,","E","e7",")","{","\n","//","Only","we","can","see","the","varargs","array",".","Therefore","the","list","is","immutable",".","\n","//noinspection","unchecked\n","return","UnmodifiableArrayList",".","of","(","e1,","e2,","e3,","e4,","e5,","e6,","e7",")",";","\n"],"docstring_tokens":["Creates","an","immutable","list","of","7","elements"]}
{"code_tokens":["\n","public","static","<E>","List<E>","of","(","E","e1,","E","e2,","E","e3,","E","e4,","E","e5,","E","e6,","E","e7,","E","e8,\n","E",".",".",".","others",")","{","\n","@SuppressWarnings","(","\"unchecked\"",")","\n","E[]","array","=","(","E[]",")","new","Object[8","+","others",".","length]",";","\n","array[0]","=","e1",";","\n","array[1]","=","e2",";","\n","array[2]","=","e3",";","\n","array[3]","=","e4",";","\n","array[4]","=","e5",";","\n","array[5]","=","e6",";","\n","array[6]","=","e7",";","\n","array[7]","=","e8",";","\n","System",".","arraycopy","(","others,","0,","array,","8,","others",".","length",")",";","\n","return","new","ImmutableNullableList<>","(","array",")",";","\n"],"docstring_tokens":["Creates","an","immutable","list","of","8","or","more","elements"]}
{"code_tokens":["\n","private","boolean","enabled","(",")","{","\n","return","CalciteSystemProperty",".","TEST_REDIS",".","value","(",")",";","\n"],"docstring_tokens":["Whether","to","run","this","test"]}
{"code_tokens":["\n","public","static","FamilyOperandTypeChecker","family","(","SqlTypeFamily",".",".",".","families",")","{","\n","return","new","FamilyOperandTypeChecker","(","ImmutableList",".","copyOf","(","families",")",",\n","i","->","false",")",";","\n"],"docstring_tokens":["Creates","a","checker","that","passes","if","each","operand","is","a","member","of","a","corresponding","family"]}
{"code_tokens":["\n","public","static","SqlSingleOperandTypeChecker","or","(","\n","SqlSingleOperandTypeChecker",".",".",".","rules",")","{","\n","return","new","CompositeSingleOperandTypeChecker","(","\n","CompositeOperandTypeChecker",".","Composition",".","OR,\n","ImmutableList",".","copyOf","(","rules",")",",","null",")",";","\n"],"docstring_tokens":["Creates","a","single-operand","checker","that","passes","if","any","one","of","the","rules","passes"]}
{"code_tokens":["\n","public","static","SqlOperandTypeChecker","sequence","(","String","allowedSignatures,\n","SqlSingleOperandTypeChecker",".",".",".","rules",")","{","\n","return","new","CompositeOperandTypeChecker","(","\n","CompositeOperandTypeChecker",".","Composition",".","SEQUENCE,\n","ImmutableList",".","copyOf","(","rules",")",",","allowedSignatures,","null",")",";","\n"],"docstring_tokens":["Creates","an","operand","checker","from","a","sequence","of","single-operand","checkers"]}
{"code_tokens":["\n","public","boolean","requireParentheses","(","Expression","expression,","int","lprec,\n","int","rprec",")","{","\n","if","(","lprec","<","expression",".","nodeType",".","lprec\n","&&","expression",".","nodeType",".","rprec",">=","rprec",")","{","\n","return","false",";","\n","}","\n","buf",".","append","(","\"","(","\"",")",";","\n","expression",".","accept","(","this,","0,","0",")",";","\n","buf",".","append","(","\"",")","\"",")",";","\n","return","true",";","\n"],"docstring_tokens":["If","parentheses","are","required,","writes","this","expression","out","with","parentheses","and","returns","true"]}
{"code_tokens":["\n","private","List<RexNode>","translate","(",")","throws","FrontendException","{","\n","currentWalker",".","walk","(","this",")",";","\n","return","new","ArrayList<>","(","stack",")",";","\n"],"docstring_tokens":["Translates","the","given","pig","expression","plan","into","a","list","of","relational","algebra","expressions"]}
{"code_tokens":["\n","private","ImmutableList<RexNode>","buildOperands","(","int","numOps",")","{","\n","List<RexNode>","opList","=","new","ArrayList<>","(",")",";","\n","for","(","int","i","=","0",";","i","<","numOps",";","i++",")","{","\n","opList",".","add","(","0,","stack",".","pop","(",")",")",";","\n","}","\n","return","ImmutableList",".","copyOf","(","opList",")",";","\n"],"docstring_tokens":["Builds","operands","for","an","operator","from","expressions","on","the","top","of","the","visitor","stack"]}
{"code_tokens":["\n","private","static","RexNode","replacePatternIfPossible","(","RexNode","rexNode",")","{","\n","//","Until\n","//","[CALCITE-3194]","Convert","Pig","string","patterns","into","SQL","string","patterns\n","//","is","fixed,","return","the","pattern","unchanged",".","\n","return","rexNode",";","\n"],"docstring_tokens":["Replaces","Pig","regular","expressions","with","SQL","regular","expressions","in","a","string"]}
{"code_tokens":["\n","@SuppressWarnings","(","\"AmbiguousMethodReference\"",")","\n","public","static","<E","extends","SqlNode>","E","clone","(","E","e",")","{","\n","//noinspection","unchecked\n","return","(","E",")","e",".","clone","(","e",".","pos",")",";","\n"],"docstring_tokens":["Creates","a","copy","of","a","SqlNode"]}
{"code_tokens":["\n","public","static","<T","extends","SqlNode>","Collector<T,","ArrayList<@Nullable","SqlNode>,","SqlNodeList>\n","toList","(",")","{","\n","return","toList","(","SqlParserPos",".","ZERO",")",";","\n"],"docstring_tokens":["Returns","a","Collector","that","accumulates","the","input","elements","into","a","SqlNodeList,","with","zero","position"]}
{"code_tokens":["\n","public","static","BlockStatement","create","(","Statement","statement,\n","BlockStatement","block",")","{","\n","return","Expressions",".","block","(","\n","Expressions",".","list","(","statement",")",".","appendAll","(","block",".","statements",")",")",";","\n"],"docstring_tokens":["Prepends","a","statement","to","a","block"]}
{"code_tokens":["\n","public","SqlDataTypeSpec","withNullable","(","Boolean","nullable",")","{","\n","return","withNullable","(","nullable,","SqlParserPos",".","ZERO",")",";","\n"],"docstring_tokens":["Returns","a","copy","of","this","data","type","specification","with","a","given","nullability"]}
{"code_tokens":["\n","public","RelDataType","deriveType","(","SqlValidator","validator",")","{","\n","return","deriveType","(","validator,","false",")",";","\n"],"docstring_tokens":["Converts","this","type","specification","to","a","RelDataType"]}
{"code_tokens":["\n","private","RelDataType","fixUpNullability","(","RelDataTypeFactory","typeFactory,\n","RelDataType","type,","boolean","nullable",")","{","\n","if","(","this",".","nullable","!=","null",")","{","\n","nullable","=","this",".","nullable",";","\n","}","\n","return","typeFactory",".","createTypeWithNullability","(","type,","nullable",")",";","\n"],"docstring_tokens":["Fix","up","the","nullability","of","the","type"]}
{"code_tokens":["\n","private","static","void","unparseFloor","(","SqlWriter","writer,","SqlCall","call",")","{","\n","SqlLiteral","node","=","call",".","operand","(","1",")",";","\n","TimeUnitRange","unit","=","node",".","getValueAs","(","TimeUnitRange",".","class",")",";","\n\n","if","(","unit","==","TimeUnitRange",".","WEEK",")","{","\n","writer",".","print","(","\"STR_TO_DATE\"",")",";","\n","SqlWriter",".","Frame","frame","=","writer",".","startList","(","\"","(","\",","\"",")","\"",")",";","\n\n","writer",".","print","(","\"DATE_FORMAT","(","\"",")",";","\n","call",".","operand","(","0",")",".","unparse","(","writer,","0,","0",")",";","\n","writer",".","print","(","\",","'%x%v-1'",")",",","'%x%v-%w'\"",")",";","\n","writer",".","endList","(","frame",")",";","\n","return",";","\n","}","\n\n","String","format",";","\n","switch","(","unit",")","{","\n","case","YEAR:\n","format","=","\"%Y-01-01\"",";","\n","break",";","\n","case","MONTH:\n","format","=","\"%Y-%m-01\"",";","\n","break",";","\n","case","DAY:\n","format","=","\"%Y-%m-%d\"",";","\n","break",";","\n","case","HOUR:\n","format","=","\"%Y-%m-%d","%H:00:00\"",";","\n","break",";","\n","case","MINUTE:\n","format","=","\"%Y-%m-%d","%H:%i:00\"",";","\n","break",";","\n","case","SECOND:\n","format","=","\"%Y-%m-%d","%H:%i:%s\"",";","\n","break",";","\n","default:\n","throw","new","AssertionError","(","\"MYSQL","does","not","support","FLOOR","for","time","unit:","\"\n","+","unit",")",";","\n","}","\n\n","writer",".","print","(","\"DATE_FORMAT\"",")",";","\n","SqlWriter",".","Frame","frame","=","writer",".","startList","(","\"","(","\",","\"",")","\"",")",";","\n","call",".","operand","(","0",")",".","unparse","(","writer,","0,","0",")",";","\n","writer",".","sep","(","\",\",","true",")",";","\n","writer",".","print","(","\"'\"","+","format","+","\"'\"",")",";","\n","writer",".","endList","(","frame",")",";","\n"],"docstring_tokens":["Unparses","datetime","floor","for","MySQL"]}
{"code_tokens":["\n","public","static","RelNode","create","(","RelOptCluster","cluster,\n","RelTraitSet","traitSet,","RelBuilder","relBuilder,","RelNode","child,\n","final","RexProgram","program",")","{","\n","final","RelDataType","outRowType","=","program",".","getOutputRowType","(",")",";","\n","//","Build","a","list","of","distinct","groups,","partitions","and","aggregate\n","//","functions",".","\n","final","Multimap<WindowKey,","RexOver>","windowMap","=\n","LinkedListMultimap",".","create","(",")",";","\n\n","final","int","inputFieldCount","=","child",".","getRowType","(",")",".","getFieldCount","(",")",";","\n\n","final","Map<RexLiteral,","RexInputRef>","constantPool","=","new","HashMap<>","(",")",";","\n","final","List<RexLiteral>","constants","=","new","ArrayList<>","(",")",";","\n\n","//","Identify","constants","in","the","expression","tree","and","replace","them","with\n","//","references","to","newly","generated","constant","pool",".","\n","RexShuttle","replaceConstants","=","new","RexShuttle","(",")","{","\n","@Override","public","RexNode","visitLiteral","(","RexLiteral","literal",")","{","\n","RexInputRef","ref","=","constantPool",".","get","(","literal",")",";","\n","if","(","ref","!=","null",")","{","\n","return","ref",";","\n","}","\n","constants",".","add","(","literal",")",";","\n","ref","=","new","RexInputRef","(","constantPool",".","size","(",")","+","inputFieldCount,\n","literal",".","getType","(",")",")",";","\n","constantPool",".","put","(","literal,","ref",")",";","\n","return","ref",";","\n","}","\n","}",";","\n\n","//","Build","a","list","of","groups,","partitions,","and","aggregate","functions",".","Each\n","//","aggregate","function","will","add","its","arguments","as","outputs","of","the","input\n","//","program",".","\n","final","IdentityHashMap<RexOver,","RexOver>","origToNewOver","=","new","IdentityHashMap<>","(",")",";","\n","for","(","RexNode","agg",":","program",".","getExprList","(",")",")","{","\n","if","(","agg","instanceof","RexOver",")","{","\n","final","RexOver","origOver","=","(","RexOver",")","agg",";","\n","final","RexOver","newOver","=","(","RexOver",")","origOver",".","accept","(","replaceConstants",")",";","\n","origToNewOver",".","put","(","origOver,","newOver",")",";","\n","addWindows","(","windowMap,","newOver,","inputFieldCount",")",";","\n","}","\n","}","\n\n","final","Map<RexOver,","Window",".","RexWinAggCall>","aggMap","=","new","HashMap<>","(",")",";","\n","List<Group>","groups","=","new","ArrayList<>","(",")",";","\n","for","(","Map",".","Entry<WindowKey,","Collection<RexOver>>","entry\n",":","windowMap",".","asMap","(",")",".","entrySet","(",")",")","{","\n","final","WindowKey","windowKey","=","entry",".","getKey","(",")",";","\n","final","List<RexWinAggCall>","aggCalls","=","new","ArrayList<>","(",")",";","\n","for","(","RexOver","over",":","entry",".","getValue","(",")",")","{","\n","final","RexWinAggCall","aggCall","=\n","new","RexWinAggCall","(","\n","over",".","getAggOperator","(",")",",\n","over",".","getType","(",")",",\n","toInputRefs","(","over",".","operands",")",",\n","aggMap",".","size","(",")",",\n","over",".","isDistinct","(",")",",\n","over",".","ignoreNulls","(",")",")",";","\n","aggCalls",".","add","(","aggCall",")",";","\n","aggMap",".","put","(","over,","aggCall",")",";","\n","}","\n","RexShuttle","toInputRefs","=","new","RexShuttle","(",")","{","\n","@Override","public","RexNode","visitLocalRef","(","RexLocalRef","localRef",")","{","\n","return","new","RexInputRef","(","localRef",".","getIndex","(",")",",","localRef",".","getType","(",")",")",";","\n","}","\n","}",";","\n","groups",".","add","(","\n","new","Group","(","\n","windowKey",".","groupSet,\n","windowKey",".","isRows,\n","windowKey",".","lowerBound",".","accept","(","toInputRefs",")",",\n","windowKey",".","upperBound",".","accept","(","toInputRefs",")",",\n","windowKey",".","orderKeys,\n","aggCalls",")",")",";","\n","}","\n\n","//","Figure","out","the","type","of","the","inputs","to","the","output","program",".","\n","//","They","are:","the","inputs","to","this","rel,","followed","by","the","outputs","of\n","//","each","window",".","\n","final","List<Window",".","RexWinAggCall>","flattenedAggCallList","=","new","ArrayList<>","(",")",";","\n","final","List<Map",".","Entry<String,","RelDataType>>","fieldList","=\n","new","ArrayList<>","(","child",".","getRowType","(",")",".","getFieldList","(",")",")",";","\n","final","int","offset","=","fieldList",".","size","(",")",";","\n\n","//","Use","better","field","names","for","agg","calls","that","are","projected",".","\n","final","Map<Integer,","String>","fieldNames","=","new","HashMap<>","(",")",";","\n","for","(","Ord<RexLocalRef>","ref",":","Ord",".","zip","(","program",".","getProjectList","(",")",")",")","{","\n","final","int","index","=","ref",".","e",".","getIndex","(",")",";","\n","if","(","index",">=","offset",")","{","\n","fieldNames",".","put","(","\n","index","-","offset,","outRowType",".","getFieldNames","(",")",".","get","(","ref",".","i",")",")",";","\n","}","\n","}","\n\n","for","(","Ord<Group>","window",":","Ord",".","zip","(","groups",")",")","{","\n","for","(","Ord<RexWinAggCall>","over",":","Ord",".","zip","(","window",".","e",".","aggCalls",")",")","{","\n","//","Add","the","k-th","over","expression","of\n","//","the","i-th","window","to","the","output","of","the","program",".","\n","String","name","=","fieldNames",".","get","(","over",".","i",")",";","\n","if","(","name","==","null","||","name",".","startsWith","(","\"$\"",")",")","{","\n","name","=","\"w\"","+","window",".","i","+","\"$o\"","+","over",".","i",";","\n","}","\n","fieldList",".","add","(","Pair",".","of","(","name,","over",".","e",".","getType","(",")",")",")",";","\n","flattenedAggCallList",".","add","(","over",".","e",")",";","\n","}","\n","}","\n","final","RelDataType","intermediateRowType","=\n","cluster",".","getTypeFactory","(",")",".","createStructType","(","fieldList",")",";","\n\n","//","The","output","program","is","the","windowed","agg's","program,","combined","with\n","//","the","output","calc","(","if","it","exists",")",".","\n","RexShuttle","shuttle","=\n","new","RexShuttle","(",")","{","\n","@Override","public","RexNode","visitOver","(","RexOver","over",")","{","\n","//","Look","up","the","aggCall","which","this","expr","was","translated","to",".","\n","final","Window",".","RexWinAggCall","aggCall","=\n","aggMap",".","get","(","origToNewOver",".","get","(","over",")",")",";","\n","assert","aggCall","!=","null",";","\n","assert","RelOptUtil",".","eq","(","\n","\"over\",\n","over",".","getType","(",")",",\n","\"aggCall\",\n","aggCall",".","getType","(",")",",\n","Litmus",".","THROW",")",";","\n\n","//","Find","the","index","of","the","aggCall","among","all","partitions","of","all\n","//","groups",".","\n","final","int","aggCallIndex","=\n","flattenedAggCallList",".","indexOf","(","aggCall",")",";","\n","assert","aggCallIndex",">=","0",";","\n\n","//","Replace","expression","with","a","reference","to","the","window","slot",".","\n","final","int","index","=","inputFieldCount","+","aggCallIndex",";","\n","assert","RelOptUtil",".","eq","(","\n","\"over\",\n","over",".","getType","(",")",",\n","\"intermed\",\n","intermediateRowType",".","getFieldList","(",")",".","get","(","index",")",".","getType","(",")",",\n","Litmus",".","THROW",")",";","\n","return","new","RexInputRef","(","\n","index,\n","over",".","getType","(",")",")",";","\n","}","\n\n","@Override","public","RexNode","visitLocalRef","(","RexLocalRef","localRef",")","{","\n","final","int","index","=","localRef",".","getIndex","(",")",";","\n","if","(","index","<","inputFieldCount",")","{","\n","//","Reference","to","input","field",".","\n","return","localRef",";","\n","}","\n","return","new","RexLocalRef","(","\n","flattenedAggCallList",".","size","(",")","+","index,\n","localRef",".","getType","(",")",")",";","\n","}","\n","}",";","\n\n","final","LogicalWindow","window","=\n","LogicalWindow",".","create","(","traitSet,","child,","constants,","intermediateRowType,\n","groups",")",";","\n\n","//","The","order","that","the","\"over\"","calls","occur","in","the","groups","and\n","//","partitions","may","not","match","the","order","in","which","they","occurred","in","the\n","//","original","expression",".","\n","//","Add","a","project","to","permute","them",".","\n","final","List<RexNode>","refToWindow","=\n","toInputRefs","(","shuttle",".","visitList","(","program",".","getExprList","(",")",")",")",";","\n\n","final","List<RexNode>","projectList","=","new","ArrayList<>","(",")",";","\n","for","(","RexLocalRef","inputRef",":","program",".","getProjectList","(",")",")","{","\n","final","int","index","=","inputRef",".","getIndex","(",")",";","\n","final","RexInputRef","ref","=","(","RexInputRef",")","refToWindow",".","get","(","index",")",";","\n","projectList",".","add","(","ref",")",";","\n","}","\n\n","return","relBuilder",".","push","(","window",")","\n",".","project","(","projectList,","outRowType",".","getFieldNames","(",")",")","\n",".","build","(",")",";","\n"],"docstring_tokens":["Creates","a","LogicalWindow","by","parsing","a","RexProgram"]}
{"code_tokens":["\n","private","static","ImmutableIntList","getNewColumnMapping","(","Table","underlying,\n","ImmutableIntList","oldColumnMapping,","List<RelDataTypeField>","extendedColumns,\n","RelDataTypeFactory","typeFactory",")","{","\n","final","List<RelDataTypeField>","baseColumns","=\n","underlying",".","getRowType","(","typeFactory",")",".","getFieldList","(",")",";","\n","final","Map<String,","Integer>","nameToIndex","=","mapNameToIndex","(","baseColumns",")",";","\n\n","final","ImmutableList",".","Builder<Integer>","newMapping","=","ImmutableList",".","builder","(",")",";","\n","newMapping",".","addAll","(","oldColumnMapping",")",";","\n","int","newMappedIndex","=","baseColumns",".","size","(",")",";","\n","for","(","RelDataTypeField","extendedColumn",":","extendedColumns",")","{","\n","String","extendedColumnName","=","extendedColumn",".","getName","(",")",";","\n","if","(","nameToIndex",".","containsKey","(","extendedColumnName",")",")","{","\n","//","The","extended","column","duplicates","a","column","in","the","underlying","table",".","\n","//","Map","to","the","index","in","the","underlying","table",".","\n","newMapping",".","add","(","nameToIndex",".","get","(","extendedColumnName",")",")",";","\n","}","else","{","\n","//","The","extended","column","is","not","in","the","underlying","table",".","\n","newMapping",".","add","(","newMappedIndex++",")",";","\n","}","\n","}","\n","return","ImmutableIntList",".","copyOf","(","newMapping",".","build","(",")",")",";","\n"],"docstring_tokens":["Creates","a","mapping","from","the","view","index","to","the","index","in","the","underlying","table"]}
{"code_tokens":["\n","@Override","public","boolean","equalsDeep","(","@Nullable","SqlNode","node,","Litmus","litmus",")","{","\n","//","This","is","the","difference","over","super",".","equalsDeep",".","It","skips\n","//","operands[0]","the","declared","name","fo","this","window",".","We","only","want\n","//","to","check","the","window","components",".","\n","return","node","==","this\n","||","node","instanceof","SqlWindow\n","&&","SqlNode",".","equalDeep","(","\n","Util",".","skip","(","getOperandList","(",")",")",",\n","Util",".","skip","(","(","(","SqlWindow",")","node",")",".","getOperandList","(",")",")",",","litmus",")",";","\n"],"docstring_tokens":["Overridden","method","to","specifically","check","only","the","right","subtree","of","a","window","definition"]}
{"code_tokens":["\n","public","boolean","isSinglePartition","(",")","{","\n","return","singlePartition",";","\n"],"docstring_tokens":["Check","if","the","filter","restricts","to","a","single","partition"]}
{"code_tokens":["\n","public","boolean","isExpanded","(",")","{","\n","return","false",";","\n"],"docstring_tokens":["Whether","this","call","was","created","by","expanding","a","parentheses-free","call","to","what","was","syntactically","an","identifier"]}
{"code_tokens":["\n","public","void","describe","(","PrintWriter","pw,","boolean","omitDefaults",")","{","\n","final","Bean","properties","=","getBean","(",")",";","\n","final","String[]","propertyNames","=","properties",".","getPropertyNames","(",")",";","\n","int","count","=","0",";","\n","for","(","String","key",":","propertyNames",")","{","\n","final","Object","value","=","properties",".","get","(","key",")",";","\n","final","Object","defaultValue","=","DEFAULT_BEAN",".","get","(","key",")",";","\n","if","(","Objects",".","equals","(","value,","defaultValue",")",")","{","\n","continue",";","\n","}","\n","if","(","count++",">","0",")","{","\n","pw",".","print","(","\",\"",")",";","\n","}","\n","pw",".","print","(","key","+","\"=\"","+","value",")",";","\n","}","\n"],"docstring_tokens":["Prints","the","property","settings","of","this","pretty-writer","to","a","writer"]}
{"code_tokens":["\n","@Pure\n","public","@Nullable","SqlIdentifier","getAlias","(",")","{","\n","return","alias",";","\n"],"docstring_tokens":["Returns","the","alias","for","the","target","table","of","this","MERGE"]}
{"code_tokens":["\n","public","void","setPosition","(","int","posLine,","int","posColumn",")","{","\n","this",".","posLine","=","posLine",";","\n","this",".","posColumn","=","posColumn",";","\n","this",".","endPosLine","=","posLine",";","\n","this",".","endPosColumn","=","posColumn",";","\n"],"docstring_tokens":["Sets","a","textual","position","at","which","this","exception","was","detected"]}
{"code_tokens":["\n","public","void","setPosition","(","\n","@UnknownInitialization","CalciteContextException","this,\n","int","posLine,\n","int","posColumn,\n","int","endPosLine,\n","int","endPosColumn",")","{","\n","this",".","posLine","=","posLine",";","\n","this",".","posColumn","=","posColumn",";","\n","this",".","endPosLine","=","endPosLine",";","\n","this",".","endPosColumn","=","endPosColumn",";","\n"],"docstring_tokens":["Sets","a","textual","range","at","which","this","exception","was","detected"]}
{"code_tokens":["\n","public","static","@NonNull","MockCatalogReaderSimple","create","(","\n","RelDataTypeFactory","typeFactory,","boolean","caseSensitive",")","{","\n","return","new","MockCatalogReaderSimple","(","typeFactory,","caseSensitive",")",".","init","(",")",";","\n"],"docstring_tokens":["Creates","and","initializes","a","MockCatalogReaderSimple"]}
{"code_tokens":["\n","public","static","<E>","int","lastWithSymbol","(","String","symbol,","List<E>","rows,","List<String>","symbols,\n","int","startIndex",")","{","\n","for","(","int","i","=","startIndex",";","i",">=","0",";","i--",")","{","\n","if","(","symbol",".","equals","(","symbols",".","get","(","i",")",")",")","{","\n","return","i",";","\n","}","\n","}","\n","return","-1",";","\n"],"docstring_tokens":["Returns","the","row","with","the","highest","index","whose","corresponding","symbol","matches,","null","otherwese"]}
{"code_tokens":["\n","public","RexSimplify","withParanoid","(","boolean","paranoid",")","{","\n","return","paranoid","==","this",".","paranoid\n","?","this\n",":","new","RexSimplify","(","rexBuilder,","predicates,","defaultUnknownAs,\n","predicateElimination,","paranoid,","executor",")",";","\n"],"docstring_tokens":["Returns","a","RexSimplify","the","same","as","this","but","which","verifies","that","the","expression","before","and","after","simplification","are","equivalent"]}
{"code_tokens":["\n","public","static","RuleSet","ofList","(","RelOptRule",".",".",".","rules",")","{","\n","return","new","ListRuleSet","(","ImmutableList",".","copyOf","(","rules",")",")",";","\n"],"docstring_tokens":["Creates","a","rule","set","with","a","given","array","of","rules"]}
{"code_tokens":["\n","public","static","RuleSet","ofList","(","Iterable<?","extends","RelOptRule>","rules",")","{","\n","return","new","ListRuleSet","(","ImmutableList",".","copyOf","(","rules",")",")",";","\n"],"docstring_tokens":["Creates","a","rule","set","with","a","given","collection","of","rules"]}
{"code_tokens":["\n","public","static","JdbcSchema","create","(","\n","SchemaPlus","parentSchema,\n","String","name,\n","Map<String,","Object>","operand",")","{","\n","DataSource","dataSource",";","\n","try","{","\n","final","String","dataSourceName","=","(","String",")","operand",".","get","(","\"dataSource\"",")",";","\n","if","(","dataSourceName","!=","null",")","{","\n","dataSource","=\n","AvaticaUtils",".","instantiatePlugin","(","DataSource",".","class,","dataSourceName",")",";","\n","}","else","{","\n","final","String","jdbcUrl","=","(","String",")","requireNonNull","(","operand",".","get","(","\"jdbcUrl\"",")",",","\"jdbcUrl\"",")",";","\n","final","String","jdbcDriver","=","(","String",")","operand",".","get","(","\"jdbcDriver\"",")",";","\n","final","String","jdbcUser","=","(","String",")","operand",".","get","(","\"jdbcUser\"",")",";","\n","final","String","jdbcPassword","=","(","String",")","operand",".","get","(","\"jdbcPassword\"",")",";","\n","dataSource","=","dataSource","(","jdbcUrl,","jdbcDriver,","jdbcUser,","jdbcPassword",")",";","\n","}","\n","}","catch","(","Exception","e",")","{","\n","throw","new","RuntimeException","(","\"Error","while","reading","dataSource\",","e",")",";","\n","}","\n","String","jdbcCatalog","=","(","String",")","operand",".","get","(","\"jdbcCatalog\"",")",";","\n","String","jdbcSchema","=","(","String",")","operand",".","get","(","\"jdbcSchema\"",")",";","\n","String","sqlDialectFactory","=","(","String",")","operand",".","get","(","\"sqlDialectFactory\"",")",";","\n\n","if","(","sqlDialectFactory","==","null","||","sqlDialectFactory",".","isEmpty","(",")",")","{","\n","return","JdbcSchema",".","create","(","\n","parentSchema,","name,","dataSource,","jdbcCatalog,","jdbcSchema",")",";","\n","}","else","{","\n","SqlDialectFactory","factory","=","AvaticaUtils",".","instantiatePlugin","(","\n","SqlDialectFactory",".","class,","sqlDialectFactory",")",";","\n","return","JdbcSchema",".","create","(","\n","parentSchema,","name,","dataSource,","factory,","jdbcCatalog,","jdbcSchema",")",";","\n","}","\n"],"docstring_tokens":["Creates","a","JdbcSchema,","taking","credentials","from","a","map"]}
{"code_tokens":["\n","public","static","DataSource","dataSource","(","String","url,","@Nullable","String","driverClassName,\n","@Nullable","String","username,","@Nullable","String","password",")","{","\n","if","(","url",".","startsWith","(","\"jdbc:hsqldb:\"",")",")","{","\n","//","Prevent","hsqldb","from","screwing","up","java",".","util",".","logging",".","\n","System",".","setProperty","(","\"hsqldb",".","reconfig_logging\",","\"false\"",")",";","\n","}","\n","return","JdbcUtils",".","DataSourcePool",".","INSTANCE",".","get","(","url,","driverClassName,","username,\n","password",")",";","\n"],"docstring_tokens":["Creates","a","JDBC","data","source","with","the","given","specification"]}
{"code_tokens":["\n","protected","void","onMatch","(",")","{","\n","assert","getRule","(",")",".","matches","(","this",")",";","\n","volcanoPlanner",".","checkCancel","(",")",";","\n","try","{","\n","if","(","volcanoPlanner",".","isRuleExcluded","(","getRule","(",")",")",")","{","\n","LOGGER",".","debug","(","\"Rule","[","{","}","]","not","fired","due","to","exclusion","filter\",","getRule","(",")",")",";","\n","return",";","\n","}","\n\n","if","(","isRuleExcluded","(",")",")","{","\n","LOGGER",".","debug","(","\"Rule","[","{","}","]","not","fired","due","to","exclusion","hint\",","getRule","(",")",")",";","\n","return",";","\n","}","\n\n","for","(","int","i","=","0",";","i","<","rels",".","length",";","i++",")","{","\n","RelNode","rel","=","rels[i]",";","\n","RelSubset","subset","=","volcanoPlanner",".","getSubset","(","rel",")",";","\n\n","if","(","subset","==","null",")","{","\n","LOGGER",".","debug","(","\n","\"Rule","[","{","}","]","not","fired","because","operand","#","{","}","(","{","}",")","has","no","subset\",\n","getRule","(",")",",","i,","rel",")",";","\n","return",";","\n","}","\n\n","if","(","(","subset",".","set",".","equivalentSet","!=","null",")","\n","//","When","rename","RelNode","via","VolcanoPlanner#rename","(","RelNode","rel",")",",\n","//","we","may","remove","rel","from","its","subset:","\"subset",".","set",".","rels",".","remove","(","rel",")","\"",".","\n","//","Skip","rule","match","when","the","rel","has","been","removed","from","set",".","\n","||","(","subset","!=","rel","&&","!subset",".","contains","(","rel",")",")",")","{","\n","LOGGER",".","debug","(","\n","\"Rule","[","{","}","]","not","fired","because","operand","#","{","}","(","{","}",")","belongs","to","obsolete","set\",\n","getRule","(",")",",","i,","rel",")",";","\n","return",";","\n","}","\n\n","if","(","volcanoPlanner",".","prunedNodes",".","contains","(","rel",")",")","{","\n","LOGGER",".","debug","(","\"Rule","[","{","}","]","not","fired","because","operand","#","{","}","(","{","}",")","has","importance=0\",\n","getRule","(",")",",","i,","rel",")",";","\n","return",";","\n","}","\n","}","\n\n","if","(","volcanoPlanner",".","getListener","(",")","!=","null",")","{","\n","RelOptListener",".","RuleAttemptedEvent","event","=\n","new","RelOptListener",".","RuleAttemptedEvent","(","\n","volcanoPlanner,\n","rels[0],\n","this,\n","true",")",";","\n","volcanoPlanner",".","getListener","(",")",".","ruleAttempted","(","event",")",";","\n","}","\n\n","if","(","LOGGER",".","isDebugEnabled","(",")",")","{","\n","this",".","generatedRelList","=","new","ArrayList<>","(",")",";","\n","}","\n\n","volcanoPlanner",".","ruleCallStack",".","push","(","this",")",";","\n","try","{","\n","getRule","(",")",".","onMatch","(","this",")",";","\n","}","finally","{","\n","volcanoPlanner",".","ruleCallStack",".","pop","(",")",";","\n","}","\n\n","if","(","generatedRelList","!=","null",")","{","\n","if","(","generatedRelList",".","isEmpty","(",")",")","{","\n","LOGGER",".","debug","(","\"call#","{","}","generated","0","successors",".","\",","id",")",";","\n","}","else","{","\n","LOGGER",".","debug","(","\n","\"call#","{","}","generated","{","}","successors:","{","}","\",\n","id,","generatedRelList",".","size","(",")",",","generatedRelList",")",";","\n","}","\n","this",".","generatedRelList","=","null",";","\n","}","\n\n","if","(","volcanoPlanner",".","getListener","(",")","!=","null",")","{","\n","RelOptListener",".","RuleAttemptedEvent","event","=\n","new","RelOptListener",".","RuleAttemptedEvent","(","\n","volcanoPlanner,\n","rels[0],\n","this,\n","false",")",";","\n","volcanoPlanner",".","getListener","(",")",".","ruleAttempted","(","event",")",";","\n","}","\n","}","catch","(","Exception","e",")","{","\n","throw","new","RuntimeException","(","\"Error","while","applying","rule","\"","+","getRule","(",")","\n","+","\",","args","\"","+","Arrays",".","toString","(","rels",")",",","e",")",";","\n","}","\n"],"docstring_tokens":["Called","when","all","operands","have","matched"]}
{"code_tokens":["\n","void","match","(","RelNode","rel",")","{","\n","assert","getOperand0","(",")",".","matches","(","rel",")",":","\"precondition\"",";","\n","final","int","solve","=","0",";","\n","int","operandOrdinal","=","castNonNull","(","getOperand0","(",")",".","solveOrder",")","[solve]",";","\n","this",".","rels[operandOrdinal]","=","rel",";","\n","matchRecurse","(","solve","+","1",")",";","\n"],"docstring_tokens":["Applies","this","rule,","with","a","given","relational","expression","in","the","first","slot"]}
{"code_tokens":["\n","private","void","matchRecurse","(","int","solve",")","{","\n","assert","solve",">","0",";","\n","assert","solve","<=","rule",".","operands",".","size","(",")",";","\n","final","List<RelOptRuleOperand>","operands","=","getRule","(",")",".","operands",";","\n","if","(","solve","==","operands",".","size","(",")",")","{","\n","//","We","have","matched","all","operands",".","Now","ask","the","rule","whether","it\n","//","matches",";","this","gives","the","rule","chance","to","apply","side-conditions",".","\n","//","If","the","side-conditions","are","satisfied,","we","have","a","match",".","\n","if","(","getRule","(",")",".","matches","(","this",")",")","{","\n","onMatch","(",")",";","\n","}","\n","}","else","{","\n","final","int[]","solveOrder","=","castNonNull","(","operand0",".","solveOrder",")",";","\n","final","int","operandOrdinal","=","solveOrder[solve]",";","\n","final","int","previousOperandOrdinal","=","solveOrder[solve","-","1]",";","\n","boolean","ascending","=","operandOrdinal","<","previousOperandOrdinal",";","\n","final","RelOptRuleOperand","previousOperand","=\n","operands",".","get","(","previousOperandOrdinal",")",";","\n","final","RelOptRuleOperand","operand","=","operands",".","get","(","operandOrdinal",")",";","\n","final","RelNode","previous","=","rels[previousOperandOrdinal]",";","\n\n","final","RelOptRuleOperand","parentOperand",";","\n","final","Collection<?","extends","RelNode>","successors",";","\n","if","(","ascending",")","{","\n","assert","previousOperand",".","getParent","(",")","==","operand",";","\n","assert","operand",".","getMatchedClass","(",")","!=","RelSubset",".","class",";","\n","if","(","previousOperand",".","getMatchedClass","(",")","!=","RelSubset",".","class\n","&&","previous","instanceof","RelSubset",")","{","\n","throw","new","RuntimeException","(","\"RelSubset","should","not","match","with","\"\n","+","previousOperand",".","getMatchedClass","(",")",".","getSimpleName","(",")",")",";","\n","}","\n","parentOperand","=","operand",";","\n","final","RelSubset","subset","=","volcanoPlanner",".","getSubsetNonNull","(","previous",")",";","\n","successors","=","subset",".","getParentRels","(",")",";","\n","}","else","{","\n","parentOperand","=","requireNonNull","(","\n","operand",".","getParent","(",")",",\n","(",")","->","\"operand",".","getParent","(",")","for","\"","+","operand",")",";","\n","final","RelNode","parentRel","=","rels[parentOperand",".","ordinalInRule]",";","\n","final","List<RelNode>","inputs","=","parentRel",".","getInputs","(",")",";","\n","//","if","the","child","is","unordered,","then","add","all","rels","in","all","input","subsets","to","the","successors","list\n","//","because","unordered","can","match","child","in","any","ordinal\n","if","(","parentOperand",".","childPolicy","==","RelOptRuleOperandChildPolicy",".","UNORDERED",")","{","\n","if","(","operand",".","getMatchedClass","(",")","==","RelSubset",".","class",")","{","\n","//","Find","all","the","sibling","subsets","that","satisfy","this","subset's","traitSet\n","successors","=","inputs",".","stream","(",")","\n",".","flatMap","(","subset","->","(","(","RelSubset",")","subset",")",".","getSubsetsSatisfyingThis","(",")",")","\n",".","collect","(","Collectors",".","toList","(",")",")",";","\n","}","else","{","\n","List<RelNode>","allRelsInAllSubsets","=","new","ArrayList<>","(",")",";","\n","Set<RelNode>","duplicates","=","new","HashSet<>","(",")",";","\n","for","(","RelNode","input",":","inputs",")","{","\n","if","(","!duplicates",".","add","(","input",")",")","{","\n","//","Ignore","duplicate","subsets\n","continue",";","\n","}","\n","RelSubset","inputSubset","=","(","RelSubset",")","input",";","\n","for","(","RelNode","rel",":","inputSubset",".","getRels","(",")",")","{","\n","if","(","!duplicates",".","add","(","rel",")",")","{","\n","//","Ignore","duplicate","relations\n","continue",";","\n","}","\n","allRelsInAllSubsets",".","add","(","rel",")",";","\n","}","\n","}","\n","successors","=","allRelsInAllSubsets",";","\n","}","\n","}","else","if","(","operand",".","ordinalInParent","<","inputs",".","size","(",")",")","{","\n","//","child","policy","is","not","unordered\n","//","we","need","to","find","the","exact","input","node","based","on","child","operand's","ordinalInParent\n","final","RelSubset","subset","=\n","(","RelSubset",")","inputs",".","get","(","operand",".","ordinalInParent",")",";","\n","if","(","operand",".","getMatchedClass","(",")","==","RelSubset",".","class",")","{","\n","//","Find","all","the","sibling","subsets","that","satisfy","this","subset'straitSet\n","successors","=\n","subset",".","getSubsetsSatisfyingThis","(",")",".","collect","(","Collectors",".","toList","(",")",")",";","\n","}","else","{","\n","successors","=","subset",".","getRelList","(",")",";","\n","}","\n","}","else","{","\n","//","The","operand","expects","parentRel","to","have","a","certain","number\n","//","of","inputs","and","it","does","not",".","\n","successors","=","ImmutableList",".","of","(",")",";","\n","}","\n","}","\n\n","for","(","RelNode","rel",":","successors",")","{","\n","if","(","operand",".","getRule","(",")","instanceof","TransformationRule\n","&&","rel",".","getConvention","(",")","!=","previous",".","getConvention","(",")",")","{","\n","continue",";","\n","}","\n","if","(","!operand",".","matches","(","rel",")",")","{","\n","continue",";","\n","}","\n","if","(","ascending","&&","operand",".","childPolicy","!=","RelOptRuleOperandChildPolicy",".","UNORDERED",")","{","\n","//","We","know","that","the","previous","operand","was","*a*","child","of","its","parent,\n","//","but","now","check","that","it","is","the","*correct*","child",".","\n","if","(","previousOperand",".","ordinalInParent",">=","rel",".","getInputs","(",")",".","size","(",")",")","{","\n","continue",";","\n","}","\n","final","RelSubset","input","=\n","(","RelSubset",")","rel",".","getInput","(","previousOperand",".","ordinalInParent",")",";","\n","if","(","previousOperand",".","getMatchedClass","(",")","==","RelSubset",".","class",")","{","\n","//","The","matched","subset","(","previous",")","should","satisfy","our","input","subset","(","input",")","\n","if","(","input",".","getSubsetsSatisfyingThis","(",")",".","noneMatch","(","previous::equals",")",")","{","\n","continue",";","\n","}","\n","}","else","{","\n","if","(","!input",".","contains","(","previous",")",")","{","\n","continue",";","\n","}","\n","}","\n","}","\n\n","//","Assign","\"childRels\"","if","the","operand","is","UNORDERED",".","\n","switch","(","parentOperand",".","childPolicy",")","{","\n","case","UNORDERED:\n","//","Note:","below","is","ill-defined",".","Suppose","there's","a","union","with","3","inputs,\n","//","and","the","rule","is","written","as","Union",".","class,","unordered","(",".",".",".",")","\n","//","What","should","be","provided","for","the","rest","2","arguments?\n","//","RelSubsets?","Random","relations","from","those","subsets?\n","//","For","now,","Calcite","code","does","not","use","getChildRels,","so","the","bug","is","just","waiting","its","day\n","if","(","ascending",")","{","\n","final","List<RelNode>","inputs","=","Lists",".","newArrayList","(","rel",".","getInputs","(",")",")",";","\n","inputs",".","set","(","previousOperand",".","ordinalInParent,","previous",")",";","\n","setChildRels","(","rel,","inputs",")",";","\n","}","else","{","\n","List<RelNode>","inputs","=","getChildRels","(","previous",")",";","\n","if","(","inputs","==","null",")","{","\n","inputs","=","Lists",".","newArrayList","(","previous",".","getInputs","(",")",")",";","\n","}","\n","inputs",".","set","(","operand",".","ordinalInParent,","rel",")",";","\n","setChildRels","(","previous,","inputs",")",";","\n","}","\n","break",";","\n","default:\n","break",";","\n","}","\n\n","rels[operandOrdinal]","=","rel",";","\n","matchRecurse","(","solve","+","1",")",";","\n","}","\n","}","\n"],"docstring_tokens":["Recursively","matches","operands","above","a","given","solve","order"]}
{"code_tokens":["\n","public","static","Object","convertToRowValues","(","\n","List<RelDataTypeField>","relDataTypeFields,","Object","geodeResultObject",")","{","\n\n","Object","values",";","\n\n","if","(","geodeResultObject","instanceof","Struct",")","{","\n","values","=","handleStructEntry","(","relDataTypeFields,","geodeResultObject",")",";","\n","}","else","if","(","geodeResultObject","instanceof","PdxInstance",")","{","\n","values","=","handlePdxInstanceEntry","(","relDataTypeFields,","geodeResultObject",")",";","\n","}","else","{","\n","values","=","handleJavaObjectEntry","(","relDataTypeFields,","geodeResultObject",")",";","\n","}","\n\n","return","values",";","\n"],"docstring_tokens":["Converts","a","Geode","object","into","a","Row","tuple"]}
{"code_tokens":["\n","public","static","RelDataType","autodetectRelTypeFromRegion","(","Region<?,","?>","region",")","{","\n","Objects",".","requireNonNull","(","region,","\"region\"",")",";","\n\n","//","try","to","detect","type","using","value","constraints","(","if","they","exists",")","\n","final","Class<?>","constraint","=","region",".","getAttributes","(",")",".","getValueConstraint","(",")",";","\n","if","(","constraint","!=","null","&&","!PdxInstance",".","class",".","isAssignableFrom","(","constraint",")",")","{","\n","return","new","JavaTypeFactoryExtImpl","(",")",".","createStructType","(","constraint",")",";","\n","}","\n\n","final","Iterator<?>","iter",";","\n","if","(","region",".","getAttributes","(",")",".","getPoolName","(",")","==","null",")","{","\n","//","means","current","cache","is","server","(","not","ClientCache",")","\n","iter","=","region",".","keySet","(",")",".","iterator","(",")",";","\n","}","else","{","\n","//","for","ClientCache\n","iter","=","region",".","keySetOnServer","(",")",".","iterator","(",")",";","\n","}","\n\n","if","(","!iter",".","hasNext","(",")",")","{","\n","String","message","=","String",".","format","(","Locale",".","ROOT,","\"Region","%s","is","empty,","can't","\"\n","+","\"autodetect","type","(","s",")","\",","region",".","getName","(",")",")",";","\n","throw","new","IllegalStateException","(","message",")",";","\n","}","\n\n","final","Object","entry","=","region",".","get","(","iter",".","next","(",")",")",";","\n","return","createRelDataType","(","entry",")",";","\n"],"docstring_tokens":["Extract","the","first","entity","of","each","Regions","and","use","it","to","build","a","table","types"]}
{"code_tokens":["\n","private","static","RelNode","getInputWithSameRowType","(","Aggregate","bottomAggRel",")","{","\n","if","(","RelOptUtil",".","areRowTypesEqual","(","\n","bottomAggRel",".","getRowType","(",")",",\n","bottomAggRel",".","getInput","(","0",")",".","getRowType","(",")",",\n","false",")",")","{","\n","return","bottomAggRel",".","getInput","(","0",")",";","\n","}","else","{","\n","return","RelOptUtil",".","createProject","(","\n","bottomAggRel",".","getInput","(",")",",\n","bottomAggRel",".","getGroupSet","(",")",".","asList","(",")",")",";","\n","}","\n"],"docstring_tokens":["Returns","an","input","with","the","same","row","type","with","the","input","Aggregate,","create","a","Project","node","if","needed"]}
{"code_tokens":["\n","public","static","SimpleDateFormat","getDateFormatter","(","String","format,","TimeZone","timeZone",")","{","\n","final","SimpleDateFormat","dateFormatter","=","new","SimpleDateFormat","(","\n","format,","Locale",".","ROOT",")",";","\n","dateFormatter",".","setTimeZone","(","timeZone",")",";","\n","return","dateFormatter",";","\n"],"docstring_tokens":["Create","a","SimpleDateFormat","with","format","string","and","time","zone"]}
{"code_tokens":["\n","public","static","RelMetadataQuery","instance","(",")","{","\n","return","new","RelMetadataQuery","(",")",";","\n"],"docstring_tokens":["Returns","an","instance","of","RelMetadataQuery"]}
{"code_tokens":["\n","public","@Nullable","Set<RexNode>","getExpressionLineage","(","RelNode","rel,","RexNode","expression",")","{","\n","for","(",";",";",")","{","\n","try","{","\n","return","expressionLineageHandler",".","getExpressionLineage","(","rel,","this,","expression",")",";","\n","}","catch","(","MetadataHandlerProvider",".","NoHandler","e",")","{","\n","expressionLineageHandler","=","revise","(","BuiltInMetadata",".","ExpressionLineage",".","Handler",".","class",")",";","\n","}","\n","}","\n"],"docstring_tokens":["Determines","the","origin","of","a","column"]}
{"code_tokens":["\n","static","@Nullable","SqlDialect","simple","(","SqlDialect",".","DatabaseProduct","databaseProduct",")","{","\n","switch","(","databaseProduct",")","{","\n","case","ACCESS:\n","return","AccessSqlDialect",".","DEFAULT",";","\n","case","BIG_QUERY:\n","return","BigQuerySqlDialect",".","DEFAULT",";","\n","case","CALCITE:\n","return","CalciteSqlDialect",".","DEFAULT",";","\n","case","CLICKHOUSE:\n","return","ClickHouseSqlDialect",".","DEFAULT",";","\n","case","DB2:\n","return","Db2SqlDialect",".","DEFAULT",";","\n","case","DERBY:\n","return","DerbySqlDialect",".","DEFAULT",";","\n","case","EXASOL:\n","return","ExasolSqlDialect",".","DEFAULT",";","\n","case","FIREBIRD:\n","return","FirebirdSqlDialect",".","DEFAULT",";","\n","case","H2:\n","return","H2SqlDialect",".","DEFAULT",";","\n","case","HIVE:\n","return","HiveSqlDialect",".","DEFAULT",";","\n","case","HSQLDB:\n","return","HsqldbSqlDialect",".","DEFAULT",";","\n","case","INFOBRIGHT:\n","return","InfobrightSqlDialect",".","DEFAULT",";","\n","case","INFORMIX:\n","return","InformixSqlDialect",".","DEFAULT",";","\n","case","INGRES:\n","return","IngresSqlDialect",".","DEFAULT",";","\n","case","INTERBASE:\n","return","InterbaseSqlDialect",".","DEFAULT",";","\n","case","JETHRO:\n","throw","new","RuntimeException","(","\"Jethro","does","not","support","simple","creation\"",")",";","\n","case","LUCIDDB:\n","return","LucidDbSqlDialect",".","DEFAULT",";","\n","case","MSSQL:\n","return","MssqlSqlDialect",".","DEFAULT",";","\n","case","MYSQL:\n","return","MysqlSqlDialect",".","DEFAULT",";","\n","case","NEOVIEW:\n","return","NeoviewSqlDialect",".","DEFAULT",";","\n","case","NETEZZA:\n","return","NetezzaSqlDialect",".","DEFAULT",";","\n","case","ORACLE:\n","return","OracleSqlDialect",".","DEFAULT",";","\n","case","PARACCEL:\n","return","ParaccelSqlDialect",".","DEFAULT",";","\n","case","PHOENIX:\n","return","PhoenixSqlDialect",".","DEFAULT",";","\n","case","POSTGRESQL:\n","return","PostgresqlSqlDialect",".","DEFAULT",";","\n","case","PRESTO:\n","return","PrestoSqlDialect",".","DEFAULT",";","\n","case","REDSHIFT:\n","return","RedshiftSqlDialect",".","DEFAULT",";","\n","case","SNOWFLAKE:\n","return","SnowflakeSqlDialect",".","DEFAULT",";","\n","case","SPARK:\n","return","SparkSqlDialect",".","DEFAULT",";","\n","case","SYBASE:\n","return","SybaseSqlDialect",".","DEFAULT",";","\n","case","TERADATA:\n","return","TeradataSqlDialect",".","DEFAULT",";","\n","case","VERTICA:\n","return","VerticaSqlDialect",".","DEFAULT",";","\n","case","SQLSTREAM:\n","case","UNKNOWN:\n","default:\n","return","null",";","\n","}","\n"],"docstring_tokens":["Returns","a","basic","dialect","for","a","given","product,","or","null","if","none","is","known"]}
{"code_tokens":["\n","@Deprecated","//","to","be","removed","before","2",".","0\n","public","static","int","getCorrelOrdinal","(","String","correlName",")","{","\n","assert","correlName",".","startsWith","(","CORREL_PREFIX",")",";","\n","return","Integer",".","parseInt","(","correlName",".","substring","(","CORREL_PREFIX",".","length","(",")",")",")",";","\n"],"docstring_tokens":["Converts","a","correlating","variable","name","into","an","ordinal,","unique","within","the","query"]}
{"code_tokens":["\n","private","static","Config","getConfig","(","Context","context",")","{","\n","final","Config","config","=\n","context",".","maybeUnwrap","(","Config",".","class",")",".","orElse","(","Config",".","DEFAULT",")",";","\n","boolean","simplify","=","Hook",".","REL_BUILDER_SIMPLIFY",".","get","(","config",".","simplify","(",")",")",";","\n","return","config",".","withSimplify","(","simplify",")",";","\n"],"docstring_tokens":["Derives","the","Config","to","be","used","for","this","RelBuilder"]}
{"code_tokens":["\n","public","RelBuilder","transform","(","UnaryOperator<Config>","transform",")","{","\n","final","Context","context","=\n","Contexts",".","of","(","struct,","transform",".","apply","(","config",")",")",";","\n","return","new","RelBuilder","(","context,","cluster,","relOptSchema",")",";","\n"],"docstring_tokens":["Creates","a","copy","of","this","RelBuilder,","with","the","same","state","as","this,","applying","a","transform","to","the","config"]}
{"code_tokens":["\n","@Override","public","String","toString","(",")","{","\n","return","stack",".","stream","(",")","\n",".","map","(","frame","->","RelOptUtil",".","toString","(","frame",".","rel",")",")","\n",".","collect","(","Collectors",".","joining","(","\"\"",")",")",";","\n"],"docstring_tokens":["Converts","this","RelBuilder","to","a","string"]}
{"code_tokens":["\n","public","RelBuilder","adoptConvention","(","Convention","convention",")","{","\n","this",".","struct","=","convention",".","getRelFactories","(",")",";","\n","return","this",";","\n"],"docstring_tokens":["Returns","new","RelBuilder","that","adopts","the","convention","provided"]}
{"code_tokens":["\n","public","static","RelBuilderFactory","proto","(","final","Context","context",")","{","\n","return","(","cluster,","schema",")","->","new","RelBuilder","(","context,","cluster,","schema",")",";","\n"],"docstring_tokens":["Creates","a","RelBuilderFactory,","a","partially-created","RelBuilder"]}
{"code_tokens":["\n","public","static","RelBuilderFactory","proto","(","Object",".",".",".","factories",")","{","\n","return","proto","(","Contexts",".","of","(","factories",")",")",";","\n"],"docstring_tokens":["Creates","a","RelBuilderFactory","that","uses","a","given","set","of","factories"]}
{"code_tokens":["\n","private","void","replaceTop","(","RelNode","node",")","{","\n","final","Frame","frame","=","stack",".","pop","(",")",";","\n","stack",".","push","(","new","Frame","(","node,","frame",".","fields",")",")",";","\n"],"docstring_tokens":["Adds","a","rel","node","to","the","top","of","the","stack","while","preserving","the","field","names","and","aliases"]}
{"code_tokens":["\n","public","RelNode","build","(",")","{","\n","return","stack",".","pop","(",")",".","rel",";","\n"],"docstring_tokens":["Returns","the","final","relational","expression"]}
{"code_tokens":["\n","public","RelNode","peek","(",")","{","\n","return","castNonNull","(","peek_","(",")",")",".","rel",";","\n"],"docstring_tokens":["Returns","the","relational","expression","at","the","top","of","the","stack,","but","does","not","remove","it"]}
{"code_tokens":["\n","public","RelBuilder","variable","(","Holder<RexCorrelVariable>","v",")","{","\n","v",".","set","(","(","RexCorrelVariable",")","\n","getRexBuilder","(",")",".","makeCorrel","(","peek","(",")",".","getRowType","(",")",",\n","cluster",".","createCorrel","(",")",")",")",";","\n","return","this",";","\n"],"docstring_tokens":["Creates","a","correlation","variable","for","the","current","input,","and","writes","it","into","a","Holder"]}
{"code_tokens":["\n","public","RexInputRef","field","(","String","fieldName",")","{","\n","return","field","(","1,","0,","fieldName",")",";","\n"],"docstring_tokens":["Creates","a","reference","to","a","field","by","name"]}
{"code_tokens":["\n","public","RexInputRef","field","(","int","fieldOrdinal",")","{","\n","return","(","RexInputRef",")","field","(","1,","0,","fieldOrdinal,","false",")",";","\n"],"docstring_tokens":["Creates","a","reference","to","an","input","field","by","ordinal"]}
{"code_tokens":["\n","public","RexNode","field","(","String","alias,","String","fieldName",")","{","\n","return","field","(","1,","alias,","fieldName",")",";","\n"],"docstring_tokens":["Creates","a","reference","to","a","field","of","the","current","record","which","originated","in","a","relation","with","a","given","alias"]}
{"code_tokens":["\n","public","ImmutableList<RexNode>","fields","(",")","{","\n","return","fields","(","1,","0",")",";","\n"],"docstring_tokens":["Returns","references","to","the","fields","of","the","top","input"]}
{"code_tokens":["\n","public","RexNode","dot","(","RexNode","node,","String","fieldName",")","{","\n","final","RexBuilder","builder","=","cluster",".","getRexBuilder","(",")",";","\n","return","builder",".","makeFieldAccess","(","node,","fieldName,","true",")",";","\n"],"docstring_tokens":["Creates","an","access","to","a","field","by","name"]}
{"code_tokens":["\n","public","RexNode","dot","(","RexNode","node,","int","fieldOrdinal",")","{","\n","final","RexBuilder","builder","=","cluster",".","getRexBuilder","(",")",";","\n","return","builder",".","makeFieldAccess","(","node,","fieldOrdinal",")",";","\n"],"docstring_tokens":["Creates","an","access","to","a","field","by","ordinal"]}
{"code_tokens":["\n","public","RexNode","call","(","SqlOperator","operator,","RexNode",".",".",".","operands",")","{","\n","return","call","(","operator,","ImmutableList",".","copyOf","(","operands",")",")",";","\n"],"docstring_tokens":["Creates","a","call","to","a","scalar","operator"]}
{"code_tokens":["\n","public","RexNode","cast","(","RexNode","expr,","SqlTypeName","typeName",")","{","\n","final","RelDataType","type","=","cluster",".","getTypeFactory","(",")",".","createSqlType","(","typeName",")",";","\n","return","cluster",".","getRexBuilder","(",")",".","makeCast","(","type,","expr",")",";","\n"],"docstring_tokens":["Creates","an","expression","that","casts","an","expression","to","a","given","type"]}
{"code_tokens":["\n","public","RexNode","cast","(","RexNode","expr,","SqlTypeName","typeName,","int","precision",")","{","\n","final","RelDataType","type","=\n","cluster",".","getTypeFactory","(",")",".","createSqlType","(","typeName,","precision",")",";","\n","return","cluster",".","getRexBuilder","(",")",".","makeCast","(","type,","expr",")",";","\n"],"docstring_tokens":["Creates","an","expression","that","casts","an","expression","to","a","type","with","a","given","name","and","precision","or","length"]}
{"code_tokens":["\n","public","RexNode","cast","(","RexNode","expr,","SqlTypeName","typeName,","int","precision,\n","int","scale",")","{","\n","final","RelDataType","type","=\n","cluster",".","getTypeFactory","(",")",".","createSqlType","(","typeName,","precision,","scale",")",";","\n","return","cluster",".","getRexBuilder","(",")",".","makeCast","(","type,","expr",")",";","\n"],"docstring_tokens":["Creates","an","expression","that","casts","an","expression","to","a","type","with","a","given","name,","precision","and","scale"]}
{"code_tokens":["\n","public","RexNode","desc","(","RexNode","node",")","{","\n","return","call","(","SqlStdOperatorTable",".","DESC,","node",")",";","\n"],"docstring_tokens":["Converts","a","sort","expression","to","descending"]}
{"code_tokens":["\n","public","RexNode","nullsLast","(","RexNode","node",")","{","\n","return","call","(","SqlStdOperatorTable",".","NULLS_LAST,","node",")",";","\n"],"docstring_tokens":["Converts","a","sort","expression","to","nulls","last"]}
{"code_tokens":["\n","public","RexNode","nullsFirst","(","RexNode","node",")","{","\n","return","call","(","SqlStdOperatorTable",".","NULLS_FIRST,","node",")",";","\n"],"docstring_tokens":["Converts","a","sort","expression","to","nulls","first"]}
{"code_tokens":["\n","public","GroupKey","groupKey","(",")","{","\n","return","groupKey","(","ImmutableList",".","of","(",")",")",";","\n"],"docstring_tokens":["Creates","an","empty","group","key"]}
{"code_tokens":["\n","public","GroupKey","groupKey","(","String",".",".",".","fieldNames",")","{","\n","return","groupKey","(","fields","(","ImmutableList",".","copyOf","(","fieldNames",")",")",")",";","\n"],"docstring_tokens":["Creates","a","group","key","of","fields","identified","by","name"]}
{"code_tokens":["\n","public","AggCall","aggregateCall","(","AggregateCall","a",")","{","\n","return","aggregateCall","(","a",".","getAggregation","(",")",",","a",".","isDistinct","(",")",",","a",".","isApproximate","(",")",",\n","a",".","ignoreNulls","(",")",",","a",".","filterArg","<","0","?","null",":","field","(","a",".","filterArg",")",",\n","a",".","distinctKeys","==","null","?","null",":","fields","(","a",".","distinctKeys",")",",\n","fields","(","a",".","collation",")",",","a",".","name,","fields","(","a",".","getArgList","(",")",")",")",";","\n"],"docstring_tokens":["Creates","a","call","to","an","aggregate","function","as","a","copy","of","an","AggregateCall"]}
{"code_tokens":["\n","public","AggCall","aggregateCall","(","AggregateCall","a,","Mapping","mapping",")","{","\n","return","aggregateCall","(","a",".","getAggregation","(",")",",","a",".","isDistinct","(",")",",","a",".","isApproximate","(",")",",\n","a",".","ignoreNulls","(",")",",\n","a",".","filterArg","<","0","?","null",":","field","(","Mappings",".","apply","(","mapping,","a",".","filterArg",")",")",",\n","a",".","distinctKeys","==","null","?","null\n",":","fields","(","Mappings",".","apply","(","mapping,","a",".","distinctKeys",")",")",",\n","fields","(","RexUtil",".","apply","(","mapping,","a",".","collation",")",")",",","a",".","name,\n","fields","(","Mappings",".","apply2","(","mapping,","a",".","getArgList","(",")",")",")",")",";","\n"],"docstring_tokens":["Creates","a","call","to","an","aggregate","function","as","a","copy","of","an","AggregateCall,","applying","a","mapping"]}
{"code_tokens":["\n","public","AggCall","count","(","RexNode",".",".",".","operands",")","{","\n","return","count","(","false,","null,","operands",")",";","\n"],"docstring_tokens":["Creates","a","call","to","the","COUNT","aggregate","function"]}
{"code_tokens":["\n","public","AggCall","count","(","boolean","distinct,","@Nullable","String","alias,","RexNode",".",".",".","operands",")","{","\n","return","aggregateCall","(","SqlStdOperatorTable",".","COUNT,","distinct,","false,","false,","null,\n","null,","ImmutableList",".","of","(",")",",","alias,","ImmutableList",".","copyOf","(","operands",")",")",";","\n"],"docstring_tokens":["Creates","a","call","to","the","COUNT","aggregate","function,","optionally","distinct","and","with","an","alias"]}
{"code_tokens":["\n","public","AggCall","sum","(","RexNode","operand",")","{","\n","return","sum","(","false,","null,","operand",")",";","\n"],"docstring_tokens":["Creates","a","call","to","the","SUM","aggregate","function"]}
{"code_tokens":["\n","public","AggCall","sum","(","boolean","distinct,","@Nullable","String","alias,","RexNode","operand",")","{","\n","return","aggregateCall","(","SqlStdOperatorTable",".","SUM,","distinct,","false,","false,","null,\n","null,","ImmutableList",".","of","(",")",",","alias,","ImmutableList",".","of","(","operand",")",")",";","\n"],"docstring_tokens":["Creates","a","call","to","the","SUM","aggregate","function,","optionally","distinct","and","with","an","alias"]}
{"code_tokens":["\n","public","AggCall","avg","(","boolean","distinct,","@Nullable","String","alias,","RexNode","operand",")","{","\n","return","aggregateCall","(","SqlStdOperatorTable",".","AVG,","distinct,","false,","false,","null,\n","null,","ImmutableList",".","of","(",")",",","alias,","ImmutableList",".","of","(","operand",")",")",";","\n"],"docstring_tokens":["Creates","a","call","to","the","AVG","aggregate","function,","optionally","distinct","and","with","an","alias"]}
{"code_tokens":["\n","public","AggCall","min","(","RexNode","operand",")","{","\n","return","min","(","null,","operand",")",";","\n"],"docstring_tokens":["Creates","a","call","to","the","MIN","aggregate","function"]}
{"code_tokens":["\n","public","AggCall","min","(","@Nullable","String","alias,","RexNode","operand",")","{","\n","return","aggregateCall","(","SqlStdOperatorTable",".","MIN,","false,","false,","false,","null,\n","null,","ImmutableList",".","of","(",")",",","alias,","ImmutableList",".","of","(","operand",")",")",";","\n"],"docstring_tokens":["Creates","a","call","to","the","MIN","aggregate","function,","optionally","with","an","alias"]}
{"code_tokens":["\n","public","AggCall","max","(","RexNode","operand",")","{","\n","return","max","(","null,","operand",")",";","\n"],"docstring_tokens":["Creates","a","call","to","the","MAX","aggregate","function,","optionally","with","an","alias"]}
{"code_tokens":["\n","public","AggCall","max","(","@Nullable","String","alias,","RexNode","operand",")","{","\n","return","aggregateCall","(","SqlStdOperatorTable",".","MAX,","false,","false,","false,","null,\n","null,","ImmutableList",".","of","(",")",",","alias,","ImmutableList",".","of","(","operand",")",")",";","\n"],"docstring_tokens":["Creates","a","call","to","the","MAX","aggregate","function"]}
{"code_tokens":["\n","public","RexNode","cursor","(","int","inputCount,","int","ordinal",")","{","\n","if","(","inputCount","<=","ordinal","||","ordinal","<","0",")","{","\n","throw","new","IllegalArgumentException","(","\"bad","input","count","or","ordinal\"",")",";","\n","}","\n","//","Refer","to","the","\"ordinal\"th","input","as","if","it","were","a","field\n","//","(","because","that's","how","things","are","laid","out","inside","a","TableFunctionScan",")","\n","final","RelNode","input","=","peek","(","inputCount,","ordinal",")",";","\n","return","call","(","SqlStdOperatorTable",".","CURSOR,\n","getRexBuilder","(",")",".","makeInputRef","(","input",".","getRowType","(",")",",","ordinal",")",")",";","\n"],"docstring_tokens":["Creates","a","RexCall","to","the","CURSOR","function","by","ordinal"]}
{"code_tokens":["\n","public","RelBuilder","project","(","RexNode",".",".",".","nodes",")","{","\n","return","project","(","ImmutableList",".","copyOf","(","nodes",")",")",";","\n"],"docstring_tokens":["Creates","a","Project","of","the","given","expressions"]}
{"code_tokens":["\n","public","RelBuilder","project","(","Iterable<?","extends","RexNode>","nodes,\n","Iterable<?","extends","@Nullable","String>","fieldNames",")","{","\n","return","project","(","nodes,","fieldNames,","false",")",";","\n"],"docstring_tokens":["Creates","a","Project","of","the","given","list","of","expressions","and","field","names"]}
{"code_tokens":["\n","public","RelBuilder","distinct","(",")","{","\n","return","aggregate","(","groupKey","(","fields","(",")",")",")",";","\n"],"docstring_tokens":["Creates","an","Aggregate","that","makes","the","relational","expression","distinct","on","all","fields"]}
{"code_tokens":["\n","public","RelBuilder","aggregate","(","GroupKey","groupKey,","AggCall",".",".",".","aggCalls",")","{","\n","return","aggregate","(","groupKey,","ImmutableList",".","copyOf","(","aggCalls",")",")",";","\n"],"docstring_tokens":["Creates","an","Aggregate","with","an","array","of","calls"]}
{"code_tokens":["\n","public","RelBuilder","aggregate","(","GroupKey","groupKey,","List<AggregateCall>","aggregateCalls",")","{","\n","return","aggregate","(","groupKey,\n","aggregateCalls",".","stream","(",")","\n",".","map","(","aggregateCall","->\n","new","AggCallImpl2","(","aggregateCall,\n","aggregateCall",".","getArgList","(",")",".","stream","(",")","\n",".","map","(","this::field",")","\n",".","collect","(","Util",".","toImmutableList","(",")",")",")",")","\n",".","collect","(","Collectors",".","toList","(",")",")",")",";","\n"],"docstring_tokens":["Creates","an","Aggregate","with","an","array","of","AggregateCalls"]}
{"code_tokens":["\n","public","RelBuilder","aggregate","(","GroupKey","groupKey,","Iterable<AggCall>","aggCalls",")","{","\n","final","Registrar","registrar","=\n","new","Registrar","(","fields","(",")",",","peek","(",")",".","getRowType","(",")",".","getFieldNames","(",")",")",";","\n","final","GroupKeyImpl","groupKey_","=","(","GroupKeyImpl",")","groupKey",";","\n","ImmutableBitSet","groupSet","=\n","ImmutableBitSet",".","of","(","registrar",".","registerExpressions","(","groupKey_",".","nodes",")",")",";","\n","label:\n","if","(","Iterables",".","isEmpty","(","aggCalls",")",")","{","\n","final","RelMetadataQuery","mq","=","peek","(",")",".","getCluster","(",")",".","getMetadataQuery","(",")",";","\n","if","(","groupSet",".","isEmpty","(",")",")","{","\n","final","Double","minRowCount","=","mq",".","getMinRowCount","(","peek","(",")",")",";","\n","if","(","minRowCount","==","null","||","minRowCount","<","1D",")","{","\n","//","We","can't","remove","\"GROUP","BY","(",")","\"","if","there's","a","chance","the","rel","could","be\n","//","empty",".","\n","break","label",";","\n","}","\n","}","\n","if","(","registrar",".","extraNodes",".","size","(",")","==","fields","(",")",".","size","(",")",")","{","\n","final","Boolean","unique","=","mq",".","areColumnsUnique","(","peek","(",")",",","groupSet",")",";","\n","if","(","unique","!=","null","&&","unique\n","&&","!config",".","aggregateUnique","(",")","\n","&&","groupKey_",".","isSimple","(",")",")","{","\n","//","Rel","is","already","unique",".","\n","return","project","(","fields","(","groupSet",")",")",";","\n","}","\n","}","\n","final","Double","maxRowCount","=","mq",".","getMaxRowCount","(","peek","(",")",")",";","\n","if","(","maxRowCount","!=","null","&&","maxRowCount","<=","1D\n","&&","!config",".","aggregateUnique","(",")","\n","&&","groupKey_",".","isSimple","(",")",")","{","\n","//","If","there","is","at","most","one","row,","rel","is","already","unique",".","\n","return","project","(","fields","(","groupSet",")",")",";","\n","}","\n","}","\n\n","ImmutableList<ImmutableBitSet>","groupSets",";","\n","if","(","groupKey_",".","nodeLists","!=","null",")","{","\n","final","int","sizeBefore","=","registrar",".","extraNodes",".","size","(",")",";","\n","final","List<ImmutableBitSet>","groupSetList","=","new","ArrayList<>","(",")",";","\n","for","(","ImmutableList<RexNode>","nodeList",":","groupKey_",".","nodeLists",")","{","\n","final","ImmutableBitSet","groupSet2","=\n","ImmutableBitSet",".","of","(","registrar",".","registerExpressions","(","nodeList",")",")",";","\n","if","(","!groupSet",".","contains","(","groupSet2",")",")","{","\n","throw","new","IllegalArgumentException","(","\"group","set","element","\"","+","nodeList\n","+","\"","must","be","a","subset","of","group","key\"",")",";","\n","}","\n","groupSetList",".","add","(","groupSet2",")",";","\n","}","\n","final","ImmutableSortedMultiset<ImmutableBitSet>","groupSetMultiset","=\n","ImmutableSortedMultiset",".","copyOf","(","ImmutableBitSet",".","COMPARATOR,\n","groupSetList",")",";","\n","if","(","Iterables",".","any","(","aggCalls,","RelBuilder::isGroupId",")","\n","||","!ImmutableBitSet",".","ORDERING",".","isStrictlyOrdered","(","groupSetMultiset",")",")","{","\n","return","rewriteAggregateWithDuplicateGroupSets","(","groupSet,","groupSetMultiset,\n","ImmutableList",".","copyOf","(","aggCalls",")",")",";","\n","}","\n","groupSets","=","ImmutableList",".","copyOf","(","groupSetMultiset",".","elementSet","(",")",")",";","\n","if","(","registrar",".","extraNodes",".","size","(",")",">","sizeBefore",")","{","\n","throw","new","IllegalArgumentException","(","\"group","sets","contained","expressions","\"\n","+","\"not","in","group","key:","\"\n","+","Util",".","skip","(","registrar",".","extraNodes,","sizeBefore",")",")",";","\n","}","\n","}","else","{","\n","groupSets","=","ImmutableList",".","of","(","groupSet",")",";","\n","}","\n\n","for","(","AggCall","aggCall",":","aggCalls",")","{","\n","(","(","AggCallPlus",")","aggCall",")",".","register","(","registrar",")",";","\n","}","\n","project","(","registrar",".","extraNodes",")",";","\n","rename","(","registrar",".","names",")",";","\n","final","Frame","frame","=","stack",".","pop","(",")",";","\n","RelNode","r","=","frame",".","rel",";","\n","final","List<AggregateCall>","aggregateCalls","=","new","ArrayList<>","(",")",";","\n","for","(","AggCall","aggCall",":","aggCalls",")","{","\n","aggregateCalls",".","add","(","\n","(","(","AggCallPlus",")","aggCall",")",".","aggregateCall","(","registrar,","groupSet,","r",")",")",";","\n","}","\n\n","assert","ImmutableBitSet",".","ORDERING",".","isStrictlyOrdered","(","groupSets",")",":","groupSets",";","\n","for","(","ImmutableBitSet","set",":","groupSets",")","{","\n","assert","groupSet",".","contains","(","set",")",";","\n","}","\n\n","List<Field>","inFields","=","frame",".","fields",";","\n","if","(","config",".","pruneInputOfAggregate","(",")","\n","&&","r","instanceof","Project",")","{","\n","final","Set<Integer>","fieldsUsed","=\n","RelOptUtil",".","getAllFields2","(","groupSet,","aggregateCalls",")",";","\n","//","Some","parts","of","the","system","can't","handle","rows","with","zero","fields,","so\n","//","pretend","that","one","field","is","used",".","\n","if","(","fieldsUsed",".","isEmpty","(",")",")","{","\n","r","=","(","(","Project",")","r",")",".","getInput","(",")",";","\n","}","else","if","(","fieldsUsed",".","size","(",")","<","r",".","getRowType","(",")",".","getFieldCount","(",")",")","{","\n","//","Some","fields","are","computed","but","not","used",".","Prune","them",".","\n","final","Map<Integer,","Integer>","map","=","new","HashMap<>","(",")",";","\n","for","(","int","source",":","fieldsUsed",")","{","\n","map",".","put","(","source,","map",".","size","(",")",")",";","\n","}","\n\n","groupSet","=","groupSet",".","permute","(","map",")",";","\n","groupSets","=\n","ImmutableBitSet",".","ORDERING",".","immutableSortedCopy","(","\n","ImmutableBitSet",".","permute","(","groupSets,","map",")",")",";","\n\n","final","Mappings",".","TargetMapping","targetMapping","=\n","Mappings",".","target","(","map,","r",".","getRowType","(",")",".","getFieldCount","(",")",",\n","fieldsUsed",".","size","(",")",")",";","\n","final","List<AggregateCall>","oldAggregateCalls","=\n","new","ArrayList<>","(","aggregateCalls",")",";","\n","aggregateCalls",".","clear","(",")",";","\n","for","(","AggregateCall","aggregateCall",":","oldAggregateCalls",")","{","\n","aggregateCalls",".","add","(","aggregateCall",".","transform","(","targetMapping",")",")",";","\n","}","\n","inFields","=","Mappings",".","permute","(","inFields,","targetMapping",".","inverse","(",")",")",";","\n\n","final","Project","project","=","(","Project",")","r",";","\n","final","List<RexNode>","newProjects","=","new","ArrayList<>","(",")",";","\n","final","RelDataTypeFactory",".","Builder","builder","=\n","cluster",".","getTypeFactory","(",")",".","builder","(",")",";","\n","for","(","int","i",":","fieldsUsed",")","{","\n","newProjects",".","add","(","project",".","getProjects","(",")",".","get","(","i",")",")",";","\n","builder",".","add","(","project",".","getRowType","(",")",".","getFieldList","(",")",".","get","(","i",")",")",";","\n","}","\n","r","=","project",".","copy","(","cluster",".","traitSet","(",")",",","project",".","getInput","(",")",",","newProjects,\n","builder",".","build","(",")",")",";","\n","}","\n","}","\n\n","if","(","!config",".","dedupAggregateCalls","(",")","||","Util",".","isDistinct","(","aggregateCalls",")",")","{","\n","return","aggregate_","(","groupSet,","groupSets,","r,","aggregateCalls,\n","registrar",".","extraNodes,","inFields",")",";","\n","}","\n\n","//","There","are","duplicate","aggregate","calls",".","Rebuild","the","list","to","eliminate\n","//","duplicates,","then","add","a","Project",".","\n","final","Set<AggregateCall>","callSet","=","new","HashSet<>","(",")",";","\n","final","List<Pair<Integer,","@Nullable","String>>","projects","=","new","ArrayList<>","(",")",";","\n","Util",".","range","(","groupSet",".","cardinality","(",")",")","\n",".","forEach","(","i","->","projects",".","add","(","Pair",".","of","(","i,","null",")",")",")",";","\n","final","List<AggregateCall>","distinctAggregateCalls","=","new","ArrayList<>","(",")",";","\n","for","(","AggregateCall","aggregateCall",":","aggregateCalls",")","{","\n","final","int","i",";","\n","if","(","callSet",".","add","(","aggregateCall",")",")","{","\n","i","=","distinctAggregateCalls",".","size","(",")",";","\n","distinctAggregateCalls",".","add","(","aggregateCall",")",";","\n","}","else","{","\n","i","=","distinctAggregateCalls",".","indexOf","(","aggregateCall",")",";","\n","assert","i",">=","0",";","\n","}","\n","projects",".","add","(","Pair",".","of","(","groupSet",".","cardinality","(",")","+","i,","aggregateCall",".","name",")",")",";","\n","}","\n","aggregate_","(","groupSet,","groupSets,","r,","distinctAggregateCalls,\n","registrar",".","extraNodes,","inFields",")",";","\n","final","List<RexNode>","fields","=","projects",".","stream","(",")","\n",".","map","(","p","->","p",".","right","==","null","?","field","(","p",".","left",")","\n",":","alias","(","field","(","p",".","left",")",",","p",".","right",")",")","\n",".","collect","(","Collectors",".","toList","(",")",")",";","\n","return","project","(","fields",")",";","\n"],"docstring_tokens":["Creates","an","Aggregate","with","multiple","calls"]}
{"code_tokens":["\n","public","RelBuilder","union","(","boolean","all",")","{","\n","return","union","(","all,","2",")",";","\n"],"docstring_tokens":["Creates","a","Union","of","the","two","most","recent","relational","expressions","on","the","stack"]}
{"code_tokens":["\n","@Experimental\n","public","RelBuilder","transientScan","(","String","tableName,","RelDataType","rowType",")","{","\n","TransientTable","transientTable","=","new","ListTransientTable","(","tableName,","rowType",")",";","\n","requireNonNull","(","relOptSchema,","\"relOptSchema\"",")",";","\n","RelOptTable","relOptTable","=","RelOptTableImpl",".","create","(","\n","relOptSchema,\n","rowType,\n","transientTable,\n","ImmutableList",".","of","(","tableName",")",")",";","\n","RelNode","scan","=\n","struct",".","scanFactory",".","createScan","(","\n","ViewExpanders",".","toRelContext","(","viewExpander,","cluster",")",",\n","relOptTable",")",";","\n","push","(","scan",")",";","\n","rename","(","rowType",".","getFieldNames","(",")",")",";","\n","return","this",";","\n"],"docstring_tokens":["Creates","a","TableScan","on","a","TransientTable","with","the","given","name","and","type"]}
{"code_tokens":["\n","public","RelBuilder","join","(","JoinRelType","joinType,","RexNode","condition0,\n","RexNode",".",".",".","conditions",")","{","\n","return","join","(","joinType,","Lists",".","asList","(","condition0,","conditions",")",")",";","\n"],"docstring_tokens":["Creates","a","Join","with","an","array","of","conditions"]}
{"code_tokens":["\n","public","RelBuilder","join","(","JoinRelType","joinType,","RexNode","condition",")","{","\n","return","join","(","joinType,","condition,","ImmutableSet",".","of","(",")",")",";","\n"],"docstring_tokens":["Creates","a","Join","with","one","condition"]}
{"code_tokens":["\n","public","RelBuilder","correlate","(","JoinRelType","joinType,\n","CorrelationId","correlationId,","RexNode",".",".",".","requiredFields",")","{","\n","return","correlate","(","joinType,","correlationId,","ImmutableList",".","copyOf","(","requiredFields",")",")",";","\n"],"docstring_tokens":["Creates","a","Correlate","with","a","CorrelationId","and","an","array","of","fields","that","are","used","by","correlation"]}
{"code_tokens":["\n","public","RelBuilder","as","(","final","String","alias",")","{","\n","final","Frame","pair","=","stack",".","pop","(",")",";","\n","List<Field>","newFields","=\n","Util",".","transform","(","pair",".","fields,","field","->","field",".","addAlias","(","alias",")",")",";","\n","stack",".","push","(","new","Frame","(","pair",".","rel,","ImmutableList",".","copyOf","(","newFields",")",")",")",";","\n","return","this",";","\n"],"docstring_tokens":["Assigns","a","table","alias","to","the","top","entry","on","the","stack"]}
{"code_tokens":["\n","public","RelBuilder","limit","(","int","offset,","int","fetch",")","{","\n","return","sortLimit","(","offset,","fetch,","ImmutableList",".","of","(",")",")",";","\n"],"docstring_tokens":["Creates","a","limit","without","a","sort"]}
{"code_tokens":["\n","public","RelBuilder","exchange","(","RelDistribution","distribution",")","{","\n","RelNode","exchange","=\n","struct",".","exchangeFactory",".","createExchange","(","peek","(",")",",","distribution",")",";","\n","replaceTop","(","exchange",")",";","\n","return","this",";","\n"],"docstring_tokens":["Creates","an","Exchange","by","distribution"]}
{"code_tokens":["\n","public","RelBuilder","sortExchange","(","RelDistribution","distribution,\n","RelCollation","collation",")","{","\n","RelNode","exchange","=\n","struct",".","sortExchangeFactory",".","createSortExchange","(","peek","(",")",",","distribution,\n","collation",")",";","\n","replaceTop","(","exchange",")",";","\n","return","this",";","\n"],"docstring_tokens":["Creates","a","SortExchange","by","distribution","and","collation"]}
{"code_tokens":["\n","public","RelBuilder","sort","(","RexNode",".",".",".","nodes",")","{","\n","return","sortLimit","(","-1,","-1,","ImmutableList",".","copyOf","(","nodes",")",")",";","\n"],"docstring_tokens":["Creates","a","Sort","by","expressions"]}
{"code_tokens":["\n","public","RelBuilder","sortLimit","(","int","offset,","int","fetch,\n","Iterable<?","extends","RexNode>","nodes",")","{","\n","final","Registrar","registrar","=","new","Registrar","(","fields","(",")",",","ImmutableList",".","of","(",")",")",";","\n","final","List<RelFieldCollation>","fieldCollations","=\n","registrar",".","registerFieldCollations","(","nodes",")",";","\n\n","final","RexNode","offsetNode","=","offset","<=","0","?","null",":","literal","(","offset",")",";","\n","final","RexNode","fetchNode","=","fetch","<","0","?","null",":","literal","(","fetch",")",";","\n","if","(","offsetNode","==","null","&&","fetch","==","0","&&","config",".","simplifyLimit","(",")",")","{","\n","return","empty","(",")",";","\n","}","\n","if","(","offsetNode","==","null","&&","fetchNode","==","null","&&","fieldCollations",".","isEmpty","(",")",")","{","\n","return","this",";","//","sort","is","trivial\n","}","\n\n","if","(","fieldCollations",".","isEmpty","(",")",")","{","\n","assert","registrar",".","addedFieldCount","(",")","==","0",";","\n","RelNode","top","=","peek","(",")",";","\n","if","(","top","instanceof","Sort",")","{","\n","final","Sort","sort2","=","(","Sort",")","top",";","\n","if","(","sort2",".","offset","==","null","&&","sort2",".","fetch","==","null",")","{","\n","replaceTop","(","sort2",".","getInput","(",")",")",";","\n","final","RelNode","sort","=\n","struct",".","sortFactory",".","createSort","(","peek","(",")",",","sort2",".","collation,\n","offsetNode,","fetchNode",")",";","\n","replaceTop","(","sort",")",";","\n","return","this",";","\n","}","\n","}","\n","if","(","top","instanceof","Project",")","{","\n","final","Project","project","=","(","Project",")","top",";","\n","if","(","project",".","getInput","(",")","instanceof","Sort",")","{","\n","final","Sort","sort2","=","(","Sort",")","project",".","getInput","(",")",";","\n","if","(","sort2",".","offset","==","null","&&","sort2",".","fetch","==","null",")","{","\n","final","RelNode","sort","=\n","struct",".","sortFactory",".","createSort","(","sort2",".","getInput","(",")",",\n","sort2",".","collation,","offsetNode,","fetchNode",")",";","\n","replaceTop","(","\n","struct",".","projectFactory",".","createProject","(","sort,\n","project",".","getHints","(",")",",\n","project",".","getProjects","(",")",",\n","Pair",".","right","(","project",".","getNamedProjects","(",")",")",")",")",";","\n","return","this",";","\n","}","\n","}","\n","}","\n","}","\n","if","(","registrar",".","addedFieldCount","(",")",">","0",")","{","\n","project","(","registrar",".","extraNodes",")",";","\n","}","\n","final","RelNode","sort","=\n","struct",".","sortFactory",".","createSort","(","peek","(",")",",\n","RelCollations",".","of","(","fieldCollations",")",",","offsetNode,","fetchNode",")",";","\n","replaceTop","(","sort",")",";","\n","if","(","registrar",".","addedFieldCount","(",")",">","0",")","{","\n","project","(","registrar",".","originalExtraNodes",")",";","\n","}","\n","return","this",";","\n"],"docstring_tokens":["Creates","a","Sort","by","a","list","of","expressions,","with","limit","and","offset"]}
{"code_tokens":["\n","public","RelBuilder","hints","(","Iterable<RelHint>","hints",")","{","\n","requireNonNull","(","hints,","\"hints\"",")",";","\n","final","List<RelHint>","relHintList","=","hints","instanceof","List","?","(","List<RelHint>",")","hints\n",":","Lists",".","newArrayList","(","hints",")",";","\n","if","(","relHintList",".","isEmpty","(",")",")","{","\n","return","this",";","\n","}","\n","final","Frame","frame","=","peek_","(",")",";","\n","assert","frame","!=","null",":","\"There","is","no","relational","expression","to","attach","the","hints\"",";","\n","assert","frame",".","rel","instanceof","Hintable",":","\"The","top","relational","expression","is","not","a","Hintable\"",";","\n","Hintable","hintable","=","(","Hintable",")","frame",".","rel",";","\n","replaceTop","(","hintable",".","attachHints","(","relHintList",")",")",";","\n","return","this",";","\n"],"docstring_tokens":["Attaches","multiple","hints","to","the","stack","top","relational","expression"]}
{"code_tokens":["\n","public","static","RelDataType","deriveRowType","(","RelDataTypeFactory","typeFactory,\n","SqlTypeName","collectionType,","String","fieldName,","RelDataType","elementType",")","{","\n","final","RelDataType","type1",";","\n","switch","(","collectionType",")","{","\n","case","ARRAY:\n","type1","=","SqlTypeUtil",".","createArrayType","(","typeFactory,","elementType,","false",")",";","\n","break",";","\n","case","MULTISET:\n","type1","=","SqlTypeUtil",".","createMultisetType","(","typeFactory,","elementType,","false",")",";","\n","break",";","\n","case","MAP:\n","type1","=","SqlTypeUtil",".","createMapTypeFromRecord","(","typeFactory,","elementType",")",";","\n","break",";","\n","default:\n","throw","new","AssertionError","(","collectionType",")",";","\n","}","\n","return","typeFactory",".","createTypeWithNullability","(","\n","typeFactory",".","builder","(",")",".","add","(","fieldName,","type1",")",".","build","(",")",",","false",")",";","\n"],"docstring_tokens":["Derives","the","output","row","type","of","a","Collect","relational","expression"]}
{"code_tokens":["\n","public","static","List<RelOptRule>","rules","(","JdbcConvention","out",")","{","\n","final","ImmutableList",".","Builder<RelOptRule>","b","=","ImmutableList",".","builder","(",")",";","\n","foreachRule","(","out,","b::add",")",";","\n","return","b",".","build","(",")",";","\n"],"docstring_tokens":["Creates","a","list","of","rules","with","the","given","JDBC","convention","instance"]}
{"code_tokens":["\n","public","static","List<RelOptRule>","rules","(","JdbcConvention","out,\n","RelBuilderFactory","relBuilderFactory",")","{","\n","final","ImmutableList",".","Builder<RelOptRule>","b","=","ImmutableList",".","builder","(",")",";","\n","foreachRule","(","out,","r","->\n","b",".","add","(","r",".","config",".","withRelBuilderFactory","(","relBuilderFactory",")",".","toRule","(",")",")",")",";","\n","return","b",".","build","(",")",";","\n"],"docstring_tokens":["Creates","a","list","of","rules","with","the","given","JDBC","convention","instance","and","builder","factory"]}
{"code_tokens":["\n","private","static","boolean","canImplement","(","AggregateCall","aggregateCall,\n","SqlDialect","sqlDialect",")","{","\n","return","sqlDialect",".","supportsAggregateFunction","(","\n","aggregateCall",".","getAggregation","(",")",".","getKind","(",")",")","\n","&&","aggregateCall",".","distinctKeys","==","null",";","\n"],"docstring_tokens":["Returns","whether","this","JDBC","data","source","can","implement","a","given","aggregate","function"]}
{"code_tokens":["\n","public","static","RexSubQuery","exists","(","RelNode","rel",")","{","\n","final","RelDataTypeFactory","typeFactory","=","rel",".","getCluster","(",")",".","getTypeFactory","(",")",";","\n","final","RelDataType","type","=","typeFactory",".","createSqlType","(","SqlTypeName",".","BOOLEAN",")",";","\n","return","new","RexSubQuery","(","type,","SqlStdOperatorTable",".","EXISTS,\n","ImmutableList",".","of","(",")",",","rel",")",";","\n"],"docstring_tokens":["Creates","an","EXISTS","sub-query"]}
{"code_tokens":["\n","public","static","RexSubQuery","unique","(","RelNode","rel",")","{","\n","final","RelDataTypeFactory","typeFactory","=","rel",".","getCluster","(",")",".","getTypeFactory","(",")",";","\n","final","RelDataType","type","=","typeFactory",".","createSqlType","(","SqlTypeName",".","BOOLEAN",")",";","\n","return","new","RexSubQuery","(","type,","SqlStdOperatorTable",".","UNIQUE,\n","ImmutableList",".","of","(",")",",","rel",")",";","\n"],"docstring_tokens":["Creates","an","UNIQUE","sub-query"]}
{"code_tokens":["\n","public","static","RexSubQuery","scalar","(","RelNode","rel",")","{","\n","final","List<RelDataTypeField>","fieldList","=","rel",".","getRowType","(",")",".","getFieldList","(",")",";","\n","if","(","fieldList",".","size","(",")","!=","1",")","{","\n","throw","new","IllegalArgumentException","(",")",";","\n","}","\n","final","RelDataTypeFactory","typeFactory","=","rel",".","getCluster","(",")",".","getTypeFactory","(",")",";","\n","final","RelDataType","type","=\n","typeFactory",".","createTypeWithNullability","(","fieldList",".","get","(","0",")",".","getType","(",")",",","true",")",";","\n","return","new","RexSubQuery","(","type,","SqlStdOperatorTable",".","SCALAR_QUERY,\n","ImmutableList",".","of","(",")",",","rel",")",";","\n"],"docstring_tokens":["Creates","a","scalar","sub-query"]}
{"code_tokens":["\n","public","static","RexSubQuery","array","(","RelNode","rel",")","{","\n","final","RelDataTypeFactory","typeFactory","=","rel",".","getCluster","(",")",".","getTypeFactory","(",")",";","\n","final","RelDataType","type","=\n","typeFactory",".","createArrayType","(","rel",".","getRowType","(",")",",","-1L",")",";","\n","return","new","RexSubQuery","(","type,","SqlStdOperatorTable",".","ARRAY_QUERY,\n","ImmutableList",".","of","(",")",",","rel",")",";","\n"],"docstring_tokens":["Creates","an","ARRAY","sub-query"]}
{"code_tokens":["\n","public","static","RexSubQuery","multiset","(","RelNode","rel",")","{","\n","final","RelDataTypeFactory","typeFactory","=","rel",".","getCluster","(",")",".","getTypeFactory","(",")",";","\n","final","RelDataType","type","=\n","typeFactory",".","createMultisetType","(","rel",".","getRowType","(",")",",","-1L",")",";","\n","return","new","RexSubQuery","(","type,","SqlStdOperatorTable",".","MULTISET_QUERY,\n","ImmutableList",".","of","(",")",",","rel",")",";","\n"],"docstring_tokens":["Creates","a","MULTISET","sub-query"]}
{"code_tokens":["\n","public","static","RexSubQuery","map","(","RelNode","rel",")","{","\n","final","RelDataTypeFactory","typeFactory","=","rel",".","getCluster","(",")",".","getTypeFactory","(",")",";","\n","final","RelDataType","rowType","=","rel",".","getRowType","(",")",";","\n","Preconditions",".","checkArgument","(","rowType",".","getFieldCount","(",")","==","2,\n","\"MAP","requires","exactly","two","fields,","got","%s",";","row","type","%s\",\n","rowType",".","getFieldCount","(",")",",","rowType",")",";","\n","final","List<RelDataTypeField>","fieldList","=","rowType",".","getFieldList","(",")",";","\n","final","RelDataType","type","=\n","typeFactory",".","createMapType","(","fieldList",".","get","(","0",")",".","getType","(",")",",\n","fieldList",".","get","(","1",")",".","getType","(",")",")",";","\n","return","new","RexSubQuery","(","type,","SqlStdOperatorTable",".","MAP_QUERY,\n","ImmutableList",".","of","(",")",",","rel",")",";","\n"],"docstring_tokens":["Creates","a","MAP","sub-query"]}
{"code_tokens":["\n","public","static","TimeExtractionFunction","createDefault","(","String","timeZone",")","{","\n","return","new","TimeExtractionFunction","(","ISO_DATETIME_FRACTIONAL_SECOND_FORMAT,\n","null,","timeZone,","null",")",";","\n"],"docstring_tokens":["Creates","the","default","time","format","extraction","function"]}
{"code_tokens":["\n","public","static","TimeExtractionFunction","createExtractFromGranularity","(","\n","Granularity","granularity,","String","timeZone",")","{","\n","final","String","local","=","Locale",".","US",".","toLanguageTag","(",")",";","\n","switch","(","granularity",".","getType","(",")",")","{","\n","case","DAY:\n","return","new","TimeExtractionFunction","(","\"d\",","null,","timeZone,","local",")",";","\n","case","MONTH:\n","return","new","TimeExtractionFunction","(","\"M\",","null,","timeZone,","local",")",";","\n","case","YEAR:\n","return","new","TimeExtractionFunction","(","\"yyyy\",","null,","timeZone,","local",")",";","\n","case","WEEK:\n","return","new","TimeExtractionFunction","(","\"w\",","null,","timeZone,","local",")",";","\n","case","HOUR:\n","return","new","TimeExtractionFunction","(","\"H\",","null,","timeZone,","local",")",";","\n","case","MINUTE:\n","return","new","TimeExtractionFunction","(","\"m\",","null,","timeZone,","local",")",";","\n","case","SECOND:\n","return","new","TimeExtractionFunction","(","\"s\",","null,","timeZone,","local",")",";","\n","default:\n","throw","new","IllegalArgumentException","(","\"Granularity","[\"","+","granularity","+","\"]","is","not","supported\"",")",";","\n","}","\n"],"docstring_tokens":["Creates","the","time","format","extraction","function","for","the","given","granularity"]}
{"code_tokens":["\n","public","static","TimeExtractionFunction","createFloorFromGranularity","(","\n","Granularity","granularity,","String","timeZone",")","{","\n","return","new","TimeExtractionFunction","(","ISO_DATETIME_FRACTIONAL_SECOND_FORMAT,","granularity,","timeZone,\n","Locale",".","ROOT",".","toLanguageTag","(",")",")",";","\n"],"docstring_tokens":["Creates","time","format","floor","time","extraction","function","using","a","given","granularity"]}
{"code_tokens":["\n\n","public","static","boolean","isValidTimeExtract","(","RexNode","rexNode",")","{","\n","final","RexCall","call","=","(","RexCall",")","rexNode",";","\n","if","(","call",".","getKind","(",")","!=","SqlKind",".","EXTRACT","||","call",".","getOperands","(",")",".","size","(",")","!=","2",")","{","\n","return","false",";","\n","}","\n","final","RexLiteral","flag","=","(","RexLiteral",")","call",".","operands",".","get","(","0",")",";","\n","final","TimeUnitRange","timeUnit","=","(","TimeUnitRange",")","flag",".","getValue","(",")",";","\n","return","timeUnit","!=","null","&&","VALID_TIME_EXTRACT",".","contains","(","timeUnit",")",";","\n"],"docstring_tokens":["Returns","whether","the","RexCall","contains","a","valid","extract","unit","that","we","can","serialize","to","Druid"]}
{"code_tokens":["\n","public","static","boolean","isValidTimeFloor","(","RexNode","rexNode",")","{","\n","if","(","rexNode",".","getKind","(",")","!=","SqlKind",".","FLOOR",")","{","\n","return","false",";","\n","}","\n","final","RexCall","call","=","(","RexCall",")","rexNode",";","\n","if","(","call",".","operands",".","size","(",")","!=","2",")","{","\n","return","false",";","\n","}","\n","final","RexLiteral","flag","=","(","RexLiteral",")","call",".","operands",".","get","(","1",")",";","\n","final","TimeUnitRange","timeUnit","=","(","TimeUnitRange",")","flag",".","getValue","(",")",";","\n","return","timeUnit","!=","null","&&","VALID_TIME_FLOOR",".","contains","(","timeUnit",")",";","\n"],"docstring_tokens":["Returns","whether","the","RexCall","contains","a","valid","FLOOR","unit","that","we","can","serialize","to","Druid"]}
{"code_tokens":["\n","public","static","@Nullable","TimeExtractionFunction","translateCastToTimeExtract","(","RexNode","rexNode,\n","TimeZone","timeZone",")","{","\n","assert","rexNode",".","getKind","(",")","==","SqlKind",".","CAST",";","\n","final","RexCall","rexCall","=","(","RexCall",")","rexNode",";","\n","final","String","castFormat","=","DruidSqlCastConverter\n",".","dateTimeFormatString","(","rexCall",".","getType","(",")",".","getSqlTypeName","(",")",")",";","\n","final","String","timeZoneId","=","timeZone","==","null","?","null",":","timeZone",".","getID","(",")",";","\n","if","(","castFormat","==","null",")","{","\n","//","unknown","format\n","return","null",";","\n","}","\n","SqlTypeName","fromType","=","rexCall",".","getOperands","(",")",".","get","(","0",")",".","getType","(",")",".","getSqlTypeName","(",")",";","\n","SqlTypeName","toType","=","rexCall",".","getType","(",")",".","getSqlTypeName","(",")",";","\n","String","granularityTZId",";","\n","switch","(","fromType",")","{","\n","case","DATE:\n","case","TIMESTAMP:\n","granularityTZId","=","DateTimeUtils",".","UTC_ZONE",".","getID","(",")",";","\n","break",";","\n","case","TIMESTAMP_WITH_LOCAL_TIME_ZONE:\n","granularityTZId","=","timeZoneId",";","\n","break",";","\n","default:\n","return","null",";","\n","}","\n","switch","(","toType",")","{","\n","case","DATE:\n","return","new","TimeExtractionFunction","(","castFormat,\n","Granularities",".","createGranularity","(","TimeUnitRange",".","DAY,","granularityTZId",")",",\n","DateTimeUtils",".","UTC_ZONE",".","getID","(",")",",","Locale",".","ENGLISH",".","toString","(",")",")",";","\n","case","TIMESTAMP:\n","//","date","->","timestamp:","UTC\n","//","timestamp","->","timestamp:","UTC\n","//","timestamp","with","local","time","zone","->","granularityTZId\n","return","new","TimeExtractionFunction","(","\n","castFormat,","null,","granularityTZId,","Locale",".","ENGLISH",".","toString","(",")",")",";","\n","case","TIMESTAMP_WITH_LOCAL_TIME_ZONE:\n","return","new","TimeExtractionFunction","(","\n","castFormat,","null,","DateTimeUtils",".","UTC_ZONE",".","getID","(",")",",","Locale",".","ENGLISH",".","toString","(",")",")",";","\n","default:\n","return","null",";","\n","}","\n"],"docstring_tokens":["Translates","a","CAST","expression","to","a","Druid","Time","extraction","function,","or","null","when","can","not","translate","the","cast"]}
{"code_tokens":["\n","public","List<SqlMoniker>","getCompletionHints","(","String","sql,","SqlParserPos","pos",")","{","\n","//","First","try","the","statement","they","gave","us",".","If","this","fails,","just","return\n","//","the","tokens","which","were","expected","at","the","failure","point",".","\n","List<SqlMoniker>","hintList","=","new","ArrayList<>","(",")",";","\n","SqlNode","sqlNode","=","tryParse","(","sql,","hintList",")",";","\n","if","(","sqlNode","==","null",")","{","\n","return","hintList",";","\n","}","\n\n","//","Now","construct","a","statement","which","is","bound","to","fail",".","(","Character","7","BEL\n","//","is","not","legal","in","any","SQL","statement",".",")","\n","final","int","x","=","pos",".","getColumnNum","(",")","-","1",";","\n","sql","=","sql",".","substring","(","0,","x",")","\n","+","\"","\\07\"\n","+","sql",".","substring","(","x",")",";","\n","tryParse","(","sql,","hintList",")",";","\n\n","final","SqlMoniker","star","=\n","new","SqlMonikerImpl","(","ImmutableList",".","of","(","\"*\"",")",",","SqlMonikerType",".","KEYWORD",")",";","\n","String","hintToken","=\n","parserConfig",".","unquotedCasing","(",")","==","Casing",".","TO_UPPER","?","UPPER_HINT_TOKEN",":","HINT_TOKEN",";","\n","if","(","hintList",".","contains","(","star",")","&&","!isSelectListItem","(","sqlNode,","pos,","hintToken",")",")","{","\n","hintList",".","remove","(","star",")",";","\n","}","\n\n","//","Add","the","identifiers","which","are","expected","at","the","point","of","interest",".","\n","try","{","\n","validator",".","validate","(","sqlNode",")",";","\n","}","catch","(","Exception","e",")","{","\n","//","mask","any","exception","that","is","thrown","during","the","validation,","i",".","e",".","\n","//","try","to","continue","even","if","the","sql","is","invalid",".","we","are","doing","a","best\n","//","effort","here","to","try","to","come","up","with","the","requested","completion\n","//","hints\n","Util",".","swallow","(","e,","LOGGER",")",";","\n","}","\n","final","List<SqlMoniker>","validatorHints","=\n","validator",".","lookupHints","(","sqlNode,","pos",")",";","\n","hintList",".","addAll","(","validatorHints",")",";","\n","return","hintList",";","\n"],"docstring_tokens":["Gets","completion","hints","for","a","syntactically","correct","SQL","statement","with","dummy","SqlIdentifier"]}
{"code_tokens":["\n","public","@Nullable","SqlMoniker","getQualifiedName","(","String","sql,","int","cursor",")","{","\n","SqlNode","sqlNode",";","\n","try","{","\n","sqlNode","=","parseQuery","(","sql",")",";","\n","validator",".","validate","(","sqlNode",")",";","\n","}","catch","(","Exception","e",")","{","\n","return","null",";","\n","}","\n","SqlParserPos","pos","=","new","SqlParserPos","(","1,","cursor","+","1",")",";","\n","try","{","\n","return","validator",".","lookupQualifiedName","(","sqlNode,","pos",")",";","\n","}","catch","(","CalciteContextException","|","AssertionError","e",")","{","\n","return","null",";","\n","}","\n"],"docstring_tokens":["Gets","the","fully","qualified","name","for","a","SqlIdentifier","at","a","given","position","of","a","sql","statement"]}
{"code_tokens":["\n","@EnsuresNonNull","(","{","\"reservedWordsSet\",","\"reservedWordsList\"","}",")","\n","public","List<String>","getReservedAndKeyWords","(",")","{","\n","ensureReservedAndKeyWords","(",")",";","\n","return","reservedWordsList",";","\n"],"docstring_tokens":["Returns","an","array","of","SQL","reserved","and","keywords"]}
{"code_tokens":["\n","protected","void","registerOp","(","SqlOperator","op,","RexSqlConvertlet","convertlet",")","{","\n","map",".","put","(","op,","convertlet",")",";","\n"],"docstring_tokens":["Registers","a","convertlet","for","a","given","operator","instance"]}
{"code_tokens":["\n","private","CalciteAssert",".","AssertQuery","foodmartApprox","(","String","sql",")","{","\n","return","approxQuery","(","FOODMART,","sql",")",";","\n"],"docstring_tokens":["Creates","a","query","against","FOODMART","with","approximate","parameters"]}
{"code_tokens":["\n","private","CalciteAssert",".","AssertQuery","wikiApprox","(","String","sql",")","{","\n","return","approxQuery","(","WIKI,","sql",")",";","\n"],"docstring_tokens":["Creates","a","query","against","WIKI","with","approximate","parameters"]}
{"code_tokens":["\n","private","CalciteAssert",".","AssertQuery","sql","(","String","sql,","URL","url",")","{","\n","return","fixture","(",")","\n",".","withModel","(","url",")","\n",".","query","(","sql",")",";","\n"],"docstring_tokens":["Creates","a","query","against","a","data","set","given","by","a","map"]}
{"code_tokens":["\n","protected","void","notifyChosen","(","RelNode","rel",")","{","\n","LOGGER",".","debug","(","\"For","final","plan,","using","{","}","\",","rel",")",";","\n\n","if","(","listener","!=","null",")","{","\n","RelOptListener",".","RelChosenEvent","event","=\n","new","RelOptListener",".","RelChosenEvent","(","\n","this,\n","rel",")",";","\n","listener",".","relChosen","(","event",")",";","\n","}","\n"],"docstring_tokens":["Takes","care","of","tracing","and","listener","notification","when","a","rel","is","chosen","as","part","of","the","final","plan"]}
{"code_tokens":["\n","protected","void","notifyEquivalence","(","\n","RelNode","rel,\n","Object","equivalenceClass,\n","boolean","physical",")","{","\n","if","(","listener","!=","null",")","{","\n","RelOptListener",".","RelEquivalenceEvent","event","=\n","new","RelOptListener",".","RelEquivalenceEvent","(","\n","this,\n","rel,\n","equivalenceClass,\n","physical",")",";","\n","listener",".","relEquivalenceFound","(","event",")",";","\n","}","\n"],"docstring_tokens":["Takes","care","of","tracing","and","listener","notification","when","a","rel","equivalence","is","detected"]}
{"code_tokens":["\n","protected","void","notifyDiscard","(","RelNode","rel",")","{","\n","if","(","listener","!=","null",")","{","\n","RelOptListener",".","RelDiscardedEvent","event","=\n","new","RelOptListener",".","RelDiscardedEvent","(","\n","this,\n","rel",")",";","\n","listener",".","relDiscarded","(","event",")",";","\n","}","\n"],"docstring_tokens":["Takes","care","of","tracing","and","listener","notification","when","a","rel","is","discarded"]}
{"code_tokens":["\n","private","static","int","soleArgument","(","AggregateCall","aggregateCall",")","{","\n","return","aggregateCall",".","getArgList","(",")",".","size","(",")","==","1\n","?","aggregateCall",".","getArgList","(",")",".","get","(","0",")","\n",":","-1",";","\n"],"docstring_tokens":["Returns","the","argument,","if","an","aggregate","call","has","a","single","argument,","otherwise","-1"]}
{"code_tokens":["\n","public","static","LogicalJoin","create","(","RelNode","left,","RelNode","right,","List<RelHint>","hints,\n","RexNode","condition,","Set<CorrelationId>","variablesSet,","JoinRelType","joinType,\n","boolean","semiJoinDone,","ImmutableList<RelDataTypeField>","systemFieldList",")","{","\n","final","RelOptCluster","cluster","=","left",".","getCluster","(",")",";","\n","final","RelTraitSet","traitSet","=","cluster",".","traitSetOf","(","Convention",".","NONE",")",";","\n","return","new","LogicalJoin","(","cluster,","traitSet,","hints,","left,","right,","condition,\n","variablesSet,","joinType,","semiJoinDone,","systemFieldList",")",";","\n"],"docstring_tokens":["Creates","a","LogicalJoin,","flagged","with","whether","it","has","been","translated","to","a","semi-join"]}
{"code_tokens":["\n","public","static","SqlTypeTransformCascade","cascade","(","SqlReturnTypeInference","rule,\n","SqlTypeTransform",".",".",".","transforms",")","{","\n","return","new","SqlTypeTransformCascade","(","rule,","transforms",")",";","\n"],"docstring_tokens":["Creates","a","return-type","inference","that","applies","a","rule","then","a","sequence","of","transforms"]}
{"code_tokens":["\n","public","static","ExplicitReturnTypeInference","explicit","(","RelDataType","type",")","{","\n","return","explicit","(","RelDataTypeImpl",".","proto","(","type",")",")",";","\n"],"docstring_tokens":["Creates","an","inference","rule","which","returns","a","copy","of","a","given","data","type"]}
{"code_tokens":["\n","public","static","ExplicitReturnTypeInference","explicit","(","SqlTypeName","typeName",")","{","\n","return","explicit","(","RelDataTypeImpl",".","proto","(","typeName,","false",")",")",";","\n"],"docstring_tokens":["Creates","an","inference","rule","which","returns","a","type","with","no","precision","or","scale,","such","as","DATE"]}
{"code_tokens":["\n","protected","OutputStream","openTestLogOutputStream","(","File","testFileSansExt",")","\n","throws","IOException","{","\n","assert","logOutputStream","==","null",";","\n\n","logFile","=","new","File","(","testFileSansExt",".","toString","(",")","+","\"",".","log\"",")",";","\n","logFile",".","delete","(",")",";","\n\n","refFile","=","new","File","(","testFileSansExt",".","toString","(",")","+","\"",".","ref\"",")",";","\n\n","logOutputStream","=","new","FileOutputStream","(","logFile",")",";","\n","return","logOutputStream",";","\n"],"docstring_tokens":["Initializes","a","diff-based","test,","overriding","the","default","log","file","naming","scheme","altogether"]}
{"code_tokens":["\n","private","static","boolean","inIde","(",")","{","\n","Throwable","runtimeException","=","new","Throwable","(",")",";","\n","runtimeException",".","fillInStackTrace","(",")",";","\n","final","StackTraceElement[]","stackTrace","=\n","runtimeException",".","getStackTrace","(",")",";","\n","StackTraceElement","lastStackTraceElement","=\n","stackTrace[stackTrace",".","length","-","1]",";","\n\n","//","Junit","test","launched","from","IntelliJ","6",".","0\n","if","(","lastStackTraceElement",".","getClassName","(",")",".","equals","(","\n","\"com",".","intellij",".","rt",".","execution",".","junit",".","JUnitStarter\"",")","\n","&&","lastStackTraceElement",".","getMethodName","(",")",".","equals","(","\"main\"",")",")","{","\n","return","true",";","\n","}","\n\n","//","Application","launched","from","IntelliJ","6",".","0\n","if","(","lastStackTraceElement",".","getClassName","(",")",".","equals","(","\n","\"com",".","intellij",".","rt",".","execution",".","application",".","AppMain\"",")","\n","&&","lastStackTraceElement",".","getMethodName","(",")",".","equals","(","\"main\"",")",")","{","\n","return","true",";","\n","}","\n","return","false",";","\n"],"docstring_tokens":["Returns","whether","this","test","is","running","inside","the","IntelliJ","IDE"]}
{"code_tokens":["\n","public","boolean","isNullGenerating","(","int","factIdx",")","{","\n","return","joinTypes",".","get","(","factIdx",")",".","isOuterJoin","(",")",";","\n"],"docstring_tokens":["Returns","whether","the","factor","corresponds","to","a","null-generating","factor","in","a","left","or","right","outer","join"]}
{"code_tokens":["\n","@RequiresNonNull","(","{","\"allJoinFilters\",","\"joinStart\",","\"nFieldsInJoinFactor\"","}",")","\n","private","void","setJoinFilterRefs","(","\n","@UnderInitialization","LoptMultiJoin","this",")","{","\n","ListIterator<RexNode>","filterIter","=","allJoinFilters",".","listIterator","(",")",";","\n","while","(","filterIter",".","hasNext","(",")",")","{","\n","RexNode","joinFilter","=","filterIter",".","next","(",")",";","\n\n","//","ignore","the","literal","filter",";","if","necessary,","we'll","add","it","back\n","//","later\n","if","(","joinFilter",".","isAlwaysTrue","(",")",")","{","\n","filterIter",".","remove","(",")",";","\n","}","\n","ImmutableBitSet","factorRefBitmap","=\n","getJoinFilterFactorBitmap","(","joinFilter,","true",")",";","\n","factorsRefByJoinFilter",".","put","(","joinFilter,","factorRefBitmap",")",";","\n","}","\n"],"docstring_tokens":["Sets","bitmaps","indicating","which","factors","and","fields","each","join","filter","references"]}
{"code_tokens":["\n","@RequiresNonNull","(","{","\"joinStart\",","\"nFieldsInJoinFactor\"","}",")","\n","private","ImmutableBitSet","factorBitmap","(","\n","@UnknownInitialization","LoptMultiJoin","this,\n","ImmutableBitSet","fieldRefBitmap",")","{","\n","ImmutableBitSet",".","Builder","factorRefBitmap","=","ImmutableBitSet",".","builder","(",")",";","\n","for","(","int","field",":","fieldRefBitmap",")","{","\n","int","factor","=","findRef","(","field",")",";","\n","factorRefBitmap",".","set","(","factor",")",";","\n","}","\n","return","factorRefBitmap",".","build","(",")",";","\n"],"docstring_tokens":["Sets","the","bitmap","indicating","which","factors","a","filter","references","based","on","which","fields","it","references"]}
{"code_tokens":["\n","@RequiresNonNull","(","{","\"joinStart\",","\"nFieldsInJoinFactor\"","}",")","\n","public","int","findRef","(","\n","@UnknownInitialization","LoptMultiJoin","this,\n","int","rexInputRef",")","{","\n","for","(","int","i","=","0",";","i","<","nJoinFactors",";","i++",")","{","\n","if","(","(","rexInputRef",">=","joinStart[i]",")","\n","&&","(","rexInputRef","<","(","joinStart[i]","+","nFieldsInJoinFactor[i]",")",")",")","{","\n","return","i",";","\n","}","\n","}","\n","throw","new","AssertionError","(",")",";","\n"],"docstring_tokens":["Determines","the","join","factor","corresponding","to","a","RexInputRef"]}
{"code_tokens":["\n","public","boolean","hasAllFactors","(","\n","LoptJoinTree","joinTree,\n","BitSet","factorsNeeded",")","{","\n","return","BitSets",".","contains","(","BitSets",".","of","(","joinTree",".","getTreeOrder","(",")",")",",","factorsNeeded",")",";","\n"],"docstring_tokens":["Returns","whether","if","a","join","tree","contains","all","factors","required"]}
{"code_tokens":["\n","@Deprecated","//","to","be","removed","before","2",".","0\n","public","void","getChildFactors","(","LoptJoinTree","joinTree,\n","ImmutableBitSet",".","Builder","childFactors",")","{","\n","for","(","int","child",":","joinTree",".","getTreeOrder","(",")",")","{","\n","childFactors",".","set","(","child",")",";","\n","}","\n"],"docstring_tokens":["Sets","a","bitmap","indicating","all","child","RelNodes","in","a","join","tree"]}
{"code_tokens":["\n","public","List<RelDataTypeField>","getJoinFields","(","\n","LoptJoinTree","left,\n","LoptJoinTree","right",")","{","\n","RelDataType","rowType","=\n","factory",".","createJoinType","(","\n","left",".","getJoinTree","(",")",".","getRowType","(",")",",\n","right",".","getJoinTree","(",")",".","getRowType","(",")",")",";","\n","return","rowType",".","getFieldList","(",")",";","\n"],"docstring_tokens":["Retrieves","the","fields","corresponding","to","a","join","between","a","left","and","right","tree"]}
{"code_tokens":["\n","public","String","simple","(",")","{","\n","final","StringBuilder","buf","=","new","StringBuilder","(","\"","(","\"",")",";","\n","for","(","Ord<Pair<String,","@Nullable","Object>>","ord",":","Ord",".","zip","(","values",")",")","{","\n","if","(","ord",".","i",">","0",")","{","\n","buf",".","append","(","\",","\"",")",";","\n","}","\n","buf",".","append","(","ord",".","e",".","left",")",".","append","(","\"=[\"",")",".","append","(","ord",".","e",".","right",")",".","append","(","\"]\"",")",";","\n","}","\n","buf",".","append","(","\"",")","\"",")",";","\n","return","buf",".","toString","(",")",";","\n"],"docstring_tokens":["Converts","the","collected","terms","and","values","to","a","string"]}
{"code_tokens":["\n","private","RelDataType","getBaseRowType","(",")","{","\n","final","Table","schemaTable","=","Objects",".","requireNonNull","(","\n","table",".","unwrap","(","Table",".","class",")",",\n","(",")","->","\"can't","unwrap","Table","from","\"","+","table",")",";","\n","if","(","schemaTable","instanceof","ModifiableViewTable",")","{","\n","final","Table","underlying","=\n","(","(","ModifiableViewTable",")","schemaTable",")",".","unwrap","(","Table",".","class",")",";","\n","assert","underlying","!=","null",";","\n","return","underlying",".","getRowType","(","validator",".","typeFactory",")",";","\n","}","\n","return","schemaTable",".","getRowType","(","validator",".","typeFactory",")",";","\n"],"docstring_tokens":["Gets","the","data-type","of","all","columns","in","a","table"]}
{"code_tokens":["\n","private","void","checkExtendedColumnTypes","(","SqlNodeList","extendList",")","{","\n","final","List<RelDataTypeField>","extendedFields","=\n","SqlValidatorUtil",".","getExtendedColumns","(","validator,","table,","extendList",")",";","\n","final","List<RelDataTypeField>","baseFields","=\n","getBaseRowType","(",")",".","getFieldList","(",")",";","\n","final","Map<String,","Integer>","nameToIndex","=\n","SqlValidatorUtil",".","mapNameToIndex","(","baseFields",")",";","\n\n","for","(","final","RelDataTypeField","extendedField",":","extendedFields",")","{","\n","final","String","extFieldName","=","extendedField",".","getName","(",")",";","\n","if","(","nameToIndex",".","containsKey","(","extFieldName",")",")","{","\n","final","Integer","baseIndex","=","nameToIndex",".","get","(","extFieldName",")",";","\n","final","RelDataType","baseType","=","baseFields",".","get","(","baseIndex",")",".","getType","(",")",";","\n","final","RelDataType","extType","=","extendedField",".","getType","(",")",";","\n\n","if","(","!extType",".","equals","(","baseType",")",")","{","\n","//","Get","the","extended","column","node","that","failed","validation",".","\n","final","SqlNode","extColNode","=\n","Iterables",".","find","(","extendList,\n","sqlNode","->","sqlNode","instanceof","SqlIdentifier\n","&&","Util",".","last","(","(","(","SqlIdentifier",")","sqlNode",")",".","names",")",".","equals","(","\n","extendedField",".","getName","(",")",")",")",";","\n\n","throw","validator",".","getValidationErrorFunction","(",")",".","apply","(","extColNode,\n","RESOURCE",".","typeNotAssignable","(","\n","baseFields",".","get","(","baseIndex",")",".","getName","(",")",",","baseType",".","getFullTypeString","(",")",",\n","extendedField",".","getName","(",")",",","extType",".","getFullTypeString","(",")",")",")",";","\n","}","\n","}","\n","}","\n"],"docstring_tokens":["Ensures","that","extended","columns","that","have","the","same","name","as","a","base","column","also","have","the","same","data-type"]}
{"code_tokens":["\n","public","Enumerator<String>","enumerator","(","final","Set<Integer>","solutionSet",")","{","\n","final","CellContent","cellContent",";","\n","if","(","solutionSet","==","null",")","{","\n","cellContent","=","CellContent",".","SPACE",";","\n","}","else","{","\n","cellContent","=","c","->","solutionSet",".","contains","(","c",")","?","\"*","\"",":","\"","\"",";","\n","}","\n","return","new","Enumerator<String>","(",")","{","\n","int","i","=","-1",";","\n","final","StringBuilder","b","=","new","StringBuilder","(",")",";","\n","final","StringBuilder","b2","=","new","StringBuilder","(",")",";","\n\n","@Override","public","String","current","(",")","{","\n","return","i","%","2","==","0","?","b",".","toString","(",")",":","b2",".","toString","(",")",";","\n","}","\n\n","@Override","public","boolean","moveNext","(",")","{","\n","if","(","i",">=","height","*","2",")","{","\n","return","false",";","\n","}","\n","++i",";","\n","if","(","i","%","2","==","0",")","{","\n","b",".","setLength","(","0",")",";","\n","b2",".","setLength","(","0",")",";","\n","row","(","cellContent,","b,","b2,","i","/","2",")",";","\n","}","\n","return","true",";","\n","}","\n\n","@Override","public","void","reset","(",")","{","\n","i","=","-1",";","\n","}","\n\n","@Override","public","void","close","(",")","{","}","\n","}",";","\n"],"docstring_tokens":["Generates","a","list","of","lines","representing","the","maze","in","text","form"]}
{"code_tokens":["\n","private","void","row","(","CellContent","cellContent,","StringBuilder","b,","StringBuilder","b2,\n","int","y",")","{","\n","final","int","c0","=","y","*","width",";","\n","for","(","int","x","=","0",";","x","<","width",";","x++",")","{","\n","b",".","append","(","'+'",")",";","\n","b",".","append","(","ups[c0","+","x]","?","\"","\"",":","\"--\"",")",";","\n","}","\n","b",".","append","(","'+'",")",";","\n","if","(","y","==","height",")","{","\n","return",";","\n","}","\n","for","(","int","x","=","0",";","x","<","width",";","x++",")","{","\n","b2",".","append","(","lefts[c0","+","x]","?","'","'",":","'|'",")","\n",".","append","(","cellContent",".","get","(","c0","+","x",")",")",";","\n","}","\n","b2",".","append","(","'|'",")",";","\n"],"docstring_tokens":["Returns","a","pair","of","strings","representing","a","row","of","the","maze"]}
{"code_tokens":["\n","@Deprecated","//","to","be","removed","before","2",".","0\n","protected","static","<R","extends","RelNode>","ConverterRelOptRuleOperand\n","convertOperand","(","Class<R>","clazz,","Predicate<?","super","R>","predicate,\n","RelTrait","trait",")","{","\n","return","new","ConverterRelOptRuleOperand","(","clazz,","trait,","predicate",")",";","\n"],"docstring_tokens":["Creates","an","operand","for","a","converter","rule"]}
{"code_tokens":["\n","public","static","RelNode","convert","(","RelNode","rel,","RelTraitSet","toTraits",")","{","\n","RelOptPlanner","planner","=","rel",".","getCluster","(",")",".","getPlanner","(",")",";","\n\n","RelTraitSet","outTraits","=","rel",".","getTraitSet","(",")",";","\n","for","(","int","i","=","0",";","i","<","toTraits",".","size","(",")",";","i++",")","{","\n","RelTrait","toTrait","=","toTraits",".","getTrait","(","i",")",";","\n","if","(","toTrait","!=","null",")","{","\n","outTraits","=","outTraits",".","replace","(","i,","toTrait",")",";","\n","}","\n","}","\n\n","if","(","rel",".","getTraitSet","(",")",".","matches","(","outTraits",")",")","{","\n","return","rel",";","\n","}","\n\n","return","planner",".","changeTraits","(","rel,","outTraits",")",";","\n"],"docstring_tokens":["Converts","a","relation","expression","to","a","given","set","of","traits,","if","it","does","not","already","have","those","traits"]}
{"code_tokens":["\n","public","static","RelNode","convert","(","RelNode","rel,","@Nullable","RelTrait","toTrait",")","{","\n","RelOptPlanner","planner","=","rel",".","getCluster","(",")",".","getPlanner","(",")",";","\n","RelTraitSet","outTraits","=","rel",".","getTraitSet","(",")",";","\n","if","(","toTrait","!=","null",")","{","\n","outTraits","=","outTraits",".","replace","(","toTrait",")",";","\n","}","\n\n","if","(","rel",".","getTraitSet","(",")",".","matches","(","outTraits",")",")","{","\n","return","rel",";","\n","}","\n\n","return","planner",".","changeTraits","(","rel,","outTraits",".","simplify","(",")",")",";","\n"],"docstring_tokens":["Converts","one","trait","of","a","relational","expression,","if","it","does","not","already","have","that","trait"]}
{"code_tokens":["\n","public","void","dump","(","PrintWriter","pw",")","{","\n","pw",".","println","(","\"Root:","\"","+","root",")",";","\n","pw",".","println","(","\"Original","rel:\"",")",";","\n\n","if","(","originalRoot","!=","null",")","{","\n","originalRoot",".","explain","(","\n","new","RelWriterImpl","(","pw,","SqlExplainLevel",".","ALL_ATTRIBUTES,","false",")",")",";","\n","}","\n\n","try","{","\n","if","(","CalciteSystemProperty",".","DUMP_SETS",".","value","(",")",")","{","\n","pw",".","println","(",")",";","\n","pw",".","println","(","\"Sets:\"",")",";","\n","Dumpers",".","dumpSets","(","this,","pw",")",";","\n","}","\n","if","(","CalciteSystemProperty",".","DUMP_GRAPHVIZ",".","value","(",")",")","{","\n","pw",".","println","(",")",";","\n","pw",".","println","(","\"Graphviz:\"",")",";","\n","Dumpers",".","dumpGraphviz","(","this,","pw",")",";","\n","}","\n","}","catch","(","Exception","|","AssertionError","e",")","{","\n","pw",".","println","(","\"Error","when","dumping","plan","state:","\\n\"\n","+","e",")",";","\n","}","\n"],"docstring_tokens":["Dumps","the","internal","state","of","this","VolcanoPlanner","to","a","writer"]}
{"code_tokens":["\n","void","fireRules","(","RelNode","rel",")","{","\n","for","(","RelOptRuleOperand","operand",":","classOperands",".","get","(","rel",".","getClass","(",")",")",")","{","\n","if","(","operand",".","matches","(","rel",")",")","{","\n","final","VolcanoRuleCall","ruleCall",";","\n","ruleCall","=","new","DeferringRuleCall","(","this,","operand",")",";","\n","ruleCall",".","match","(","rel",")",";","\n","}","\n","}","\n"],"docstring_tokens":["Fires","all","rules","matched","by","a","relational","expression"]}
{"code_tokens":["\n","@API","(","since","=","\"1",".","24\",","status","=","API",".","Status",".","EXPERIMENTAL",")","\n","protected","boolean","isSubstituteRule","(","VolcanoRuleCall","match",")","{","\n","return","match",".","getRule","(",")","instanceof","SubstitutionRule",";","\n"],"docstring_tokens":["Checks","whether","a","rule","match","is","a","substitution","rule","match"]}
{"code_tokens":["\n","@API","(","since","=","\"1",".","24\",","status","=","API",".","Status",".","EXPERIMENTAL",")","\n","protected","RelOptCost","getLowerBound","(","RelNode","rel",")","{","\n","RelMetadataQuery","mq","=","rel",".","getCluster","(",")",".","getMetadataQuery","(",")",";","\n","RelOptCost","lowerBound","=","mq",".","getLowerBoundCost","(","rel,","this",")",";","\n","if","(","lowerBound","==","null",")","{","\n","return","zeroCost",";","\n","}","\n","return","lowerBound",";","\n"],"docstring_tokens":["Gets","the","lower","bound","cost","of","a","relational","operator"]}
{"code_tokens":["\n","public","static","SqlTypeCoercionRule","instance","(","\n","Map<SqlTypeName,","ImmutableSet<SqlTypeName>>","map",")","{","\n","return","new","SqlTypeCoercionRule","(","map",")",";","\n"],"docstring_tokens":["Returns","an","instance","with","specified","type","mappings"]}
{"code_tokens":["\n","public","static","LogicalValues","createEmpty","(","RelOptCluster","cluster,\n","RelDataType","rowType",")","{","\n","return","create","(","cluster,","rowType,\n","ImmutableList",".","of","(",")",")",";","\n"],"docstring_tokens":["Creates","a","LogicalValues","that","outputs","no","rows","of","a","given","row","type"]}
{"code_tokens":["\n","public","static","Builder","builder","(","HintPredicate","hintPredicate",")","{","\n","return","new","Builder","(","hintPredicate",")",";","\n"],"docstring_tokens":["Returns","a","HintStrategy","builder","with","given","hint","predicate"]}
{"code_tokens":["\n","protected","Socket","applySettings","(","Socket","s",")","{","\n","try","{","\n","s",".","setKeepAlive","(","SO_KEEPALIVE",")",";","\n","s",".","setOOBInline","(","OOBINLINE",")",";","\n","s",".","setReuseAddress","(","SO_REUSEADDR",")",";","\n","s",".","setTcpNoDelay","(","TCP_NODELAY",")",";","\n","s",".","setOOBInline","(","OOBINLINE",")",";","\n\n","s",".","setReceiveBufferSize","(","SO_RCVBUF",")",";","\n","s",".","setSendBufferSize","(","SO_SNDBUF",")",";","\n","s",".","setSoTimeout","(","SO_TIMEOUT",")",";","\n","s",".","setSoLinger","(","SO_LINGER,","LINGER",")",";","\n","}","catch","(","SocketException","e",")","{","\n","throw","new","RuntimeException","(","e",")",";","\n","}","\n","return","s",";","\n"],"docstring_tokens":["Applies","the","current","settings","to","the","given","socket"]}
{"code_tokens":["\n","public","void","stringTag","(","String","name,","String","data",")","{","\n","beginTag","(","name,","null",")",";","\n","cdata","(","data",")",";","\n","endTag","(","name",")",";","\n"],"docstring_tokens":["Writes","a","String","tag;","a","tag","containing","nothing","but","a","CDATA","section"]}
{"code_tokens":["\n","private","static","void","printAtt","(","PrintWriter","pw,","String","name,","@Nullable","String","val",")","{","\n","if","(","val","!=","null","/*","&&","!val",".","equals","(","\"\"",")","*/",")","{","\n","pw",".","print","(","\"","\"",")",";","\n","pw",".","print","(","name",")",";","\n","pw",".","print","(","\"=\\\"\"",")",";","\n","pw",".","print","(","escapeForQuoting","(","val",")",")",";","\n","pw",".","print","(","\"\\\"\"",")",";","\n","}","\n"],"docstring_tokens":["Prints","an","XML","attribute","name","and","value","for","string","val"]}
{"code_tokens":["\n","private","static","void","stringEncodeXML","(","String","input,","PrintWriter","out",")","{","\n","for","(","int","i","=","0",";","i","<","input",".","length","(",")",";","i++",")","{","\n","char","c","=","input",".","charAt","(","i",")",";","\n","switch","(","c",")","{","\n","case","'<':\n","case","'>':\n","case","'\"':\n","case","'\\'':\n","case","'&':\n","case","'\\t':\n","case","'\\n':\n","case","'\\r':\n","out",".","print","(","\"&#\"","+","(","int",")","c","+","\"",";","\"",")",";","\n","break",";","\n","default:\n","out",".","print","(","c",")",";","\n","}","\n","}","\n"],"docstring_tokens":["Encode","a","String","for","XML","output,","displaying","it","to","a","PrintWriter"]}
{"code_tokens":["\n","@Deprecated","//","to","be","removed","before","2",".","0\n","public","static","RelMetadataProvider","reflectiveSource","(","MetadataHandler","target,\n","Method",".",".",".","methods",")","{","\n","return","reflectiveSource","(","target,","ImmutableList",".","copyOf","(","methods",")",",","target",".","getDef","(",")",".","handlerClass",")",";","\n"],"docstring_tokens":["Returns","a","reflective","metadata","provider","that","implements","several","methods"]}
{"code_tokens":["\n","public","void","execute","(","SqlCreateForeignSchema","create,\n","CalcitePrepare",".","Context","context",")","{","\n","final","Pair<CalciteSchema,","String>","pair","=\n","schema","(","context,","true,","create",".","name",")",";","\n","final","SchemaPlus","subSchema0","=","pair",".","left",".","plus","(",")",".","getSubSchema","(","pair",".","right",")",";","\n","if","(","subSchema0","!=","null",")","{","\n","if","(","!create",".","getReplace","(",")","&&","!create",".","ifNotExists",")","{","\n","throw","SqlUtil",".","newContextException","(","create",".","name",".","getParserPosition","(",")",",\n","RESOURCE",".","schemaExists","(","pair",".","right",")",")",";","\n","}","\n","}","\n","final","Schema","subSchema",";","\n","final","String","libraryName",";","\n","if","(","create",".","type","!=","null",")","{","\n","Preconditions",".","checkArgument","(","create",".","library","==","null",")",";","\n","final","String","typeName","=","(","String",")","value","(","create",".","type",")",";","\n","final","JsonSchema",".","Type","type","=\n","Util",".","enumVal","(","JsonSchema",".","Type",".","class,\n","typeName",".","toUpperCase","(","Locale",".","ROOT",")",")",";","\n","if","(","type","!=","null",")","{","\n","switch","(","type",")","{","\n","case","JDBC:\n","libraryName","=","JdbcSchema",".","Factory",".","class",".","getName","(",")",";","\n","break",";","\n","default:\n","libraryName","=","null",";","\n","}","\n","}","else","{","\n","libraryName","=","null",";","\n","}","\n","if","(","libraryName","==","null",")","{","\n","throw","SqlUtil",".","newContextException","(","create",".","type",".","getParserPosition","(",")",",\n","RESOURCE",".","schemaInvalidType","(","typeName,\n","Arrays",".","toString","(","JsonSchema",".","Type",".","values","(",")",")",")",")",";","\n","}","\n","}","else","{","\n","Preconditions",".","checkArgument","(","create",".","library","!=","null",")",";","\n","libraryName","=","(","String",")","value","(","create",".","library",")",";","\n","}","\n","final","SchemaFactory","schemaFactory","=\n","AvaticaUtils",".","instantiatePlugin","(","SchemaFactory",".","class,","libraryName",")",";","\n","final","Map<String,","Object>","operandMap","=","new","LinkedHashMap<>","(",")",";","\n","for","(","Pair<SqlIdentifier,","SqlNode>","option",":","create",".","options","(",")",")","{","\n","operandMap",".","put","(","option",".","left",".","getSimple","(",")",",","value","(","option",".","right",")",")",";","\n","}","\n","subSchema","=\n","schemaFactory",".","create","(","pair",".","left",".","plus","(",")",",","pair",".","right,","operandMap",")",";","\n","pair",".","left",".","add","(","pair",".","right,","subSchema",")",";","\n"],"docstring_tokens":["Executes","a","CREATE","FOREIGN","SCHEMA","command"]}
{"code_tokens":["\n","public","void","execute","(","SqlCreateMaterializedView","create,\n","CalcitePrepare",".","Context","context",")","{","\n","final","Pair<CalciteSchema,","String>","pair","=","schema","(","context,","true,","create",".","name",")",";","\n","if","(","pair",".","left",".","plus","(",")",".","getTable","(","pair",".","right",")","!=","null",")","{","\n","//","Materialized","view","exists",".","\n","if","(","!create",".","ifNotExists",")","{","\n","//","They","did","not","specify","IF","NOT","EXISTS,","so","give","error",".","\n","throw","SqlUtil",".","newContextException","(","create",".","name",".","getParserPosition","(",")",",\n","RESOURCE",".","tableExists","(","pair",".","right",")",")",";","\n","}","\n","return",";","\n","}","\n","final","SqlNode","q","=","renameColumns","(","create",".","columnList,","create",".","query",")",";","\n","final","String","sql","=","q",".","toSqlString","(","CalciteSqlDialect",".","DEFAULT",")",".","getSql","(",")",";","\n","final","List<String>","schemaPath","=","pair",".","left",".","path","(","null",")",";","\n","final","ViewTableMacro","viewTableMacro","=\n","ViewTable",".","viewMacro","(","pair",".","left",".","plus","(",")",",","sql,","schemaPath,\n","context",".","getObjectPath","(",")",",","false",")",";","\n","final","TranslatableTable","x","=","viewTableMacro",".","apply","(","ImmutableList",".","of","(",")",")",";","\n","final","RelDataType","rowType","=","x",".","getRowType","(","context",".","getTypeFactory","(",")",")",";","\n\n","//","Table","does","not","exist",".","Create","it",".","\n","final","MaterializedViewTable","table","=\n","new","MaterializedViewTable","(","pair",".","right,","RelDataTypeImpl",".","proto","(","rowType",")",")",";","\n","pair",".","left",".","add","(","pair",".","right,","table",")",";","\n","populate","(","create",".","name,","create",".","query,","context",")",";","\n","table",".","key","=\n","MaterializationService",".","instance","(",")",".","defineMaterialization","(","pair",".","left,","null,\n","sql,","schemaPath,","pair",".","right,","true,","true",")",";","\n"],"docstring_tokens":["Executes","a","CREATE","MATERIALIZED","VIEW","command"]}
{"code_tokens":["\n","public","void","execute","(","SqlCreateSchema","create,\n","CalcitePrepare",".","Context","context",")","{","\n","final","Pair<CalciteSchema,","String>","pair","=","schema","(","context,","true,","create",".","name",")",";","\n","final","SchemaPlus","subSchema0","=","pair",".","left",".","plus","(",")",".","getSubSchema","(","pair",".","right",")",";","\n","if","(","subSchema0","!=","null",")","{","\n","if","(","create",".","ifNotExists",")","{","\n","return",";","\n","}","\n","if","(","!create",".","getReplace","(",")",")","{","\n","throw","SqlUtil",".","newContextException","(","create",".","name",".","getParserPosition","(",")",",\n","RESOURCE",".","schemaExists","(","pair",".","right",")",")",";","\n","}","\n","}","\n","final","Schema","subSchema","=","new","AbstractSchema","(",")",";","\n","pair",".","left",".","add","(","pair",".","right,","subSchema",")",";","\n"],"docstring_tokens":["Executes","a","CREATE","SCHEMA","command"]}
{"code_tokens":["\n","public","void","execute","(","SqlDropSchema","drop,\n","CalcitePrepare",".","Context","context",")","{","\n","final","Pair<CalciteSchema,","String>","pair","=","schema","(","context,","false,","drop",".","name",")",";","\n","final","boolean","existed","=","pair",".","left","!=","null","&&","pair",".","left",".","removeSubSchema","(","pair",".","right",")",";","\n","if","(","!existed","&&","!drop",".","ifExists",")","{","\n","throw","SqlUtil",".","newContextException","(","drop",".","name",".","getParserPosition","(",")",",\n","RESOURCE",".","schemaNotFound","(","pair",".","right",")",")",";","\n","}","\n"],"docstring_tokens":["Executes","a","DROP","SCHEMA","command"]}
{"code_tokens":["\n","public","void","execute","(","SqlCreateView","create,\n","CalcitePrepare",".","Context","context",")","{","\n","final","Pair<CalciteSchema,","String>","pair","=\n","schema","(","context,","true,","create",".","name",")",";","\n","final","SchemaPlus","schemaPlus","=","pair",".","left",".","plus","(",")",";","\n","for","(","Function","function",":","schemaPlus",".","getFunctions","(","pair",".","right",")",")","{","\n","if","(","function",".","getParameters","(",")",".","isEmpty","(",")",")","{","\n","if","(","!create",".","getReplace","(",")",")","{","\n","throw","SqlUtil",".","newContextException","(","create",".","name",".","getParserPosition","(",")",",\n","RESOURCE",".","viewExists","(","pair",".","right",")",")",";","\n","}","\n","pair",".","left",".","removeFunction","(","pair",".","right",")",";","\n","}","\n","}","\n","final","SqlNode","q","=","renameColumns","(","create",".","columnList,","create",".","query",")",";","\n","final","String","sql","=","q",".","toSqlString","(","CalciteSqlDialect",".","DEFAULT",")",".","getSql","(",")",";","\n","final","ViewTableMacro","viewTableMacro","=\n","ViewTable",".","viewMacro","(","schemaPlus,","sql,","pair",".","left",".","path","(","null",")",",\n","context",".","getObjectPath","(",")",",","false",")",";","\n","final","TranslatableTable","x","=","viewTableMacro",".","apply","(","ImmutableList",".","of","(",")",")",";","\n","Util",".","discard","(","x",")",";","\n","schemaPlus",".","add","(","pair",".","right,","viewTableMacro",")",";","\n"],"docstring_tokens":["Executes","a","CREATE","VIEW","command"]}
{"code_tokens":["\n","static","boolean","isValidSignature","(","String","signature",")","{","\n","return","VALID_SIG",".","matcher","(","signature",")",".","matches","(",")",";","\n"],"docstring_tokens":["Returns","whether","a","signature","represents","an","sequence","of","relational","operators","that","can","be","translated","into","a","valid","Druid","query"]}
{"code_tokens":["\n","private","static","boolean","needUtcTimeExtract","(","RexNode","rexNode",")","{","\n","return","rexNode",".","getType","(",")",".","getSqlTypeName","(",")","==","SqlTypeName",".","DATE\n","||","rexNode",".","getType","(",")",".","getSqlTypeName","(",")","==","SqlTypeName",".","TIMESTAMP\n","||","rexNode",".","getType","(",")",".","getSqlTypeName","(",")","\n","==","SqlTypeName",".","TIMESTAMP_WITH_LOCAL_TIME_ZONE",";","\n"],"docstring_tokens":["Check","if","it","is","needed","to","use","UTC","for","DATE","and","TIMESTAMP","types"]}
{"code_tokens":["\n","private","static","boolean","isValidLeafCast","(","RexNode","rexNode",")","{","\n","assert","rexNode",".","isA","(","SqlKind",".","CAST",")",";","\n","final","RexNode","input","=","(","(","RexCall",")","rexNode",")",".","getOperands","(",")",".","get","(","0",")",";","\n","if","(","!input",".","isA","(","SqlKind",".","INPUT_REF",")",")","{","\n","//","it","is","not","a","leaf","cast","don't","bother","going","further",".","\n","return","false",";","\n","}","\n","final","SqlTypeName","toTypeName","=","rexNode",".","getType","(",")",".","getSqlTypeName","(",")",";","\n","if","(","toTypeName",".","getFamily","(",")","==","SqlTypeFamily",".","CHARACTER",")","{","\n","//","CAST","of","input","to","character","type\n","return","true",";","\n","}","\n","if","(","toTypeName",".","getFamily","(",")","==","SqlTypeFamily",".","NUMERIC",")","{","\n","//","CAST","of","input","to","numeric","type,","it","is","part","of","a","bounded","comparison\n","return","true",";","\n","}","\n","if","(","toTypeName",".","getFamily","(",")","==","SqlTypeFamily",".","TIMESTAMP\n","||","toTypeName",".","getFamily","(",")","==","SqlTypeFamily",".","DATETIME",")","{","\n","//","CAST","of","literal","to","timestamp","type\n","return","true",";","\n","}","\n","if","(","toTypeName",".","getFamily","(",")",".","contains","(","input",".","getType","(",")",")",")","{","\n","//","same","type","it","is","okay","to","push","it\n","return","true",";","\n","}","\n","//","Currently","other","CAST","operations","cannot","be","pushed","to","Druid\n","return","false",";","\n\n"],"docstring_tokens":["Returns","whether","a","RexNode","is","a","valid","Druid","cast","operation"]}
{"code_tokens":["\n","protected","static","@Nullable","String","extractColumnName","(","RexNode","rexNode,","RelDataType","rowType,\n","DruidQuery","query",")","{","\n","if","(","rexNode",".","getKind","(",")","==","SqlKind",".","INPUT_REF",")","{","\n","final","RexInputRef","ref","=","(","RexInputRef",")","rexNode",";","\n","final","String","columnName","=","rowType",".","getFieldNames","(",")",".","get","(","ref",".","getIndex","(",")",")",";","\n","if","(","columnName","==","null",")","{","\n","return","null",";","\n","}","\n","//","calcite","has","this","un-direct","renaming","of","timestampFieldName","to","native","druid","`__time`\n","if","(","query",".","getDruidTable","(",")",".","timestampFieldName",".","equals","(","columnName",")",")","{","\n","return","DruidTable",".","DEFAULT_TIMESTAMP_COLUMN",";","\n","}","\n","return","columnName",";","\n","}","\n","return","null",";","\n"],"docstring_tokens":["Returns","Druid","column","name","or","null","when","it","is","not","possible","to","translate"]}
{"code_tokens":["\n","public","static","String","toString","(","Node","expression",")","{","\n","return","toString","(","Collections",".","singletonList","(","expression",")",",","\"\",","true",")",";","\n"],"docstring_tokens":["Converts","an","expression","to","Java","source","code"]}
{"code_tokens":["\n","public","static","BinaryExpression","add","(","Expression","left,","Expression","right",")","{","\n","return","makeBinary","(","ExpressionType",".","Add,","left,","right",")",";","\n"],"docstring_tokens":["Creates","a","BinaryExpression","that","represents","an","arithmetic","addition","operation","that","does","not","have","overflow","checking"]}
{"code_tokens":["\n","public","static","IndexExpression","arrayIndex","(","Expression","array,\n","Expression","indexExpression",")","{","\n","return","new","IndexExpression","(","array,\n","Collections",".","singletonList","(","indexExpression",")",")",";","\n"],"docstring_tokens":["Creates","an","expression","that","represents","applying","an","array","index","operator","to","an","array","of","rank","one"]}
{"code_tokens":["\n","public","static","BlockStatement","block","(","\n","Iterable<?","extends","Statement>","statements",")","{","\n","return","block","(","(","Type",")","null,","statements",")",";","\n"],"docstring_tokens":["Creates","a","BlockExpression","that","contains","the","given","statements"]}
{"code_tokens":["\n","public","static","BlockStatement","block","(","@Nullable","Type","type,\n","Iterable<?","extends","Statement>","expressions",")","{","\n","List<Statement>","list","=","toList","(","expressions",")",";","\n","if","(","type","==","null",")","{","\n","if","(","list",".","size","(",")",">","0",")","{","\n","type","=","list",".","get","(","list",".","size","(",")","-","1",")",".","getType","(",")",";","\n","}","else","{","\n","type","=","Void",".","TYPE",";","\n","}","\n","}","\n","return","new","BlockStatement","(","list,","type",")",";","\n"],"docstring_tokens":["Creates","a","BlockExpression","that","contains","the","given","expressions,","has","no","variables","and","has","specific","result","type"]}
{"code_tokens":["\n","public","static","MethodCallExpression","call","(","@Nullable","Expression","expression,","Method","method,\n","Expression",".",".",".","arguments",")","{","\n","return","new","MethodCallExpression","(","method,","expression,","toList","(","arguments",")",")",";","\n"],"docstring_tokens":["Creates","a","MethodCallExpression","that","represents","a","call","to","a","method","that","takes","arguments,","using","varargs"]}
{"code_tokens":["\n","public","static","MethodCallExpression","call","(","Type","type,","String","methodName,\n","Iterable<?","extends","Expression>","arguments",")","{","\n","Method","method","=","Types",".","lookupMethod","(","Types",".","toClass","(","type",")",",","methodName,\n","Types",".","toClassArray","(","arguments",")",")",";","\n","return","new","MethodCallExpression","(","method,","null,","toList","(","arguments",")",")",";","\n"],"docstring_tokens":["Creates","a","MethodCallExpression","that","represents","a","call","to","a","static","method","by","calling","the","appropriate","factory","method"]}
{"code_tokens":["\n","public","static","ConstantExpression","constant","(","@Nullable","Object","value,","Type","type",")","{","\n","if","(","value","!=","null","&&","type","instanceof","Class",")","{","\n","//","Fix","up","value","so","that","it","matches","type",".","\n","Class<?>","clazz","=","(","Class<?>",")","type",";","\n","Primitive","primitive","=","Primitive",".","ofBoxOr","(","clazz",")",";","\n","if","(","primitive","!=","null",")","{","\n","clazz","=","requireNonNull","(","primitive",".","boxClass,","\"boxClass\"",")",";","\n","}","\n","if","(","(","clazz","==","Float",".","class","||","clazz","==","Double",".","class",")","\n","&&","value","instanceof","BigDecimal",")","{","\n","//","Don't","try","to","convert","the","value","of","float","and","double","literals",".","\n","//","We'd","experience","rounding,","e",".","g",".","3",".","2","becomes","3",".","1999998",".","\n","}","else","if","(","!clazz",".","isInstance","(","value",")",")","{","\n","String","stringValue","=","String",".","valueOf","(","value",")",";","\n","if","(","type","==","BigDecimal",".","class",")","{","\n","value","=","new","BigDecimal","(","stringValue",")",";","\n","}","\n","if","(","type","==","BigInteger",".","class",")","{","\n","value","=","new","BigInteger","(","stringValue",")",";","\n","}","\n","if","(","primitive","!=","null",")","{","\n","value","=","primitive",".","parse","(","stringValue",")",";","\n","}","\n","}","\n","}","\n","return","new","ConstantExpression","(","type,","value",")",";","\n"],"docstring_tokens":["Creates","a","ConstantExpression","that","has","the","Value","and","Type","properties","set","to","the","specified","values"]}
{"code_tokens":["\n","public","static","UnaryExpression","convert_","(","Expression","expression,","Type","type",")","{","\n","return","new","UnaryExpression","(","ExpressionType",".","Convert,","type,","expression",")",";","\n"],"docstring_tokens":["Creates","a","UnaryExpression","that","represents","a","type","conversion","operation"]}
{"code_tokens":["\n","public","static","BinaryExpression","equal","(","Expression","left,","Expression","right",")","{","\n","return","makeBinary","(","ExpressionType",".","Equal,","left,","right",")",";","\n"],"docstring_tokens":["Creates","a","BinaryExpression","that","represents","an","equality","comparison"]}
{"code_tokens":["\n","public","static","MemberExpression","field","(","@Nullable","Expression","expression,","Field","field",")","{","\n","return","makeMemberAccess","(","expression,","Types",".","field","(","field",")",")",";","\n"],"docstring_tokens":["Creates","a","MemberExpression","that","represents","accessing","a","field"]}
{"code_tokens":["\n","public","static","MemberExpression","field","(","Expression","expression,\n","String","fieldName",")","{","\n","PseudoField","field","=","Types",".","getField","(","fieldName,","expression",".","getType","(",")",")",";","\n","return","makeMemberAccess","(","expression,","field",")",";","\n"],"docstring_tokens":["Creates","a","MemberExpression","that","represents","accessing","a","field","given","the","name","of","the","field"]}
{"code_tokens":["\n","public","static","ConditionalStatement","ifThen","(","Expression","test,","Node","ifTrue",")","{","\n","return","new","ConditionalStatement","(","Arrays",".","asList","(","test,","ifTrue",")",")",";","\n"],"docstring_tokens":["Creates","a","ConditionalExpression","that","represents","a","conditional","block","with","an","if","statement"]}
{"code_tokens":["\n","public","static","ConditionalStatement","ifThenElse","(","Expression","test,","Node","ifTrue,\n","Node","ifFalse",")","{","\n","return","new","ConditionalStatement","(","Arrays",".","asList","(","test,","ifTrue,","ifFalse",")",")",";","\n"],"docstring_tokens":["Creates","a","ConditionalExpression","that","represents","a","conditional","block","with","if","and","else","statements"]}
{"code_tokens":["\n","public","static","<F","extends","Function<?>>","FunctionExpression<F>","lambda","(","\n","BlockStatement","body,\n","Iterable<?","extends","ParameterExpression>","parameters",")","{","\n","final","List<ParameterExpression>","parameterList","=","toList","(","parameters",")",";","\n","@SuppressWarnings","(","\"unchecked\"",")","\n","Class<F>","type","=","deduceType","(","parameterList,","body",".","getType","(",")",")",";","\n","return","new","FunctionExpression<>","(","type,","body,","parameterList",")",";","\n"],"docstring_tokens":["Creates","a","LambdaExpression","by","first","constructing","a","delegate","type"]}
{"code_tokens":["\n","public","static","BinaryExpression","multiply","(","Expression","left,","Expression","right",")","{","\n","return","makeBinary","(","ExpressionType",".","Multiply,","left,","right",")",";","\n"],"docstring_tokens":["Creates","a","BinaryExpression","that","represents","an","arithmetic","multiplication","operation","that","does","not","have","overflow","checking"]}
{"code_tokens":["\n","public","static","NewExpression","new_","(","Type","type",")","{","\n","return","new_","(","type,","ImmutableList",".","of","(",")",")",";","\n"],"docstring_tokens":["Creates","a","NewExpression","that","represents","calling","the","parameterless","constructor","of","the","specified","type"]}
{"code_tokens":["\n","public","static","ParameterExpression","parameter","(","Type","type,","String","name",")","{","\n","return","new","ParameterExpression","(","0,","type,","name",")",";","\n"],"docstring_tokens":["Creates","a","ParameterExpression","node","that","can","be","used","to","identify","a","parameter","or","a","variable","in","an","expression","tree"]}
{"code_tokens":["\n","public","static","SwitchCase","switchCase","(","Expression","expression,\n","Iterable<?","extends","Expression>","body",")","{","\n","throw","Extensions",".","todo","(",")",";","\n"],"docstring_tokens":["Creates","a","SwitchCase","for","use","in","a","SwitchExpression"]}
{"code_tokens":["\n","public","static","SwitchCase","switchCase","(","Expression","expression,\n","Expression",".",".",".","body",")","{","\n","return","switchCase","(","expression,","toList","(","body",")",")",";","\n"],"docstring_tokens":["Creates","a","SwitchCase","for","use","in","a","SwitchExpression,","with","varargs"]}
{"code_tokens":["\n","public","static","ThrowStatement","throw_","(","Expression","expression",")","{","\n","return","new","ThrowStatement","(","expression",")",";","\n"],"docstring_tokens":["Creates","a","statement","that","represents","the","throwing","of","an","exception"]}
{"code_tokens":["\n","public","static","DeclarationStatement","declare","(","int","modifiers,\n","ParameterExpression","parameter,","@Nullable","Expression","initializer",")","{","\n","return","new","DeclarationStatement","(","modifiers,","parameter,","initializer",")",";","\n"],"docstring_tokens":["Creates","a","statement","that","declares","a","variable"]}
{"code_tokens":["\n","public","static","ImmutableIntList","of","(",")","{","\n","return","EMPTY",";","\n"],"docstring_tokens":["Returns","an","empty","ImmutableIntList"]}
{"code_tokens":["\n","public","static","ImmutableIntList","of","(","int",".",".",".","ints",")","{","\n","return","new","ImmutableIntList","(","ints",".","clone","(",")",")",";","\n"],"docstring_tokens":["Creates","an","ImmutableIntList","from","an","array","of","int"]}
{"code_tokens":["\n","public","static","ImmutableIntList","copyOf","(","Number",".",".",".","numbers",")","{","\n","final","int[]","ints","=","new","int[numbers",".","length]",";","\n","for","(","int","i","=","0",";","i","<","ints",".","length",";","i++",")","{","\n","ints[i]","=","numbers[i]",".","intValue","(",")",";","\n","}","\n","return","new","ImmutableIntList","(","ints",")",";","\n"],"docstring_tokens":["Creates","an","ImmutableIntList","from","an","array","of","Number"]}
{"code_tokens":["\n","public","static","ImmutableIntList","copyOf","(","Iterable<?","extends","Number>","list",")","{","\n","if","(","list","instanceof","ImmutableIntList",")","{","\n","return","(","ImmutableIntList",")","list",";","\n","}","\n","@SuppressWarnings","(","\"unchecked\"",")","\n","final","Collection<?","extends","Number>","collection","=\n","list","instanceof","Collection\n","?","(","Collection<?","extends","Number>",")","list\n",":","Lists",".","newArrayList","(","list",")",";","\n","return","copyFromCollection","(","collection",")",";","\n"],"docstring_tokens":["Creates","an","ImmutableIntList","from","an","iterable","of","Number"]}
{"code_tokens":["\n","public","static","ImmutableIntList","copyOf","(","Iterator<?","extends","Number>","list",")","{","\n","return","copyFromCollection","(","Lists",".","newArrayList","(","list",")",")",";","\n"],"docstring_tokens":["Creates","an","ImmutableIntList","from","an","iterator","of","Number"]}
{"code_tokens":["\n","public","int[]","toIntArray","(",")","{","\n","return","ints",".","clone","(",")",";","\n"],"docstring_tokens":["Returns","an","array","of","ints","with","the","same","contents","as","this","list"]}
{"code_tokens":["\n","public","ImmutableIntList","append","(","int","element",")","{","\n","if","(","ints",".","length","==","0",")","{","\n","return","of","(","element",")",";","\n","}","\n","final","int[]","newInts","=","Arrays",".","copyOf","(","this",".","ints,","ints",".","length","+","1",")",";","\n","newInts[ints",".","length]","=","element",";","\n","return","new","ImmutableIntList","(","newInts",")",";","\n"],"docstring_tokens":["Returns","a","copy","of","this","list","with","one","element","added"]}
{"code_tokens":["\n","public","static","ImmutableIntList","identity","(","int","count",")","{","\n","final","int[]","integers","=","new","int[count]",";","\n","for","(","int","i","=","0",";","i","<","integers",".","length",";","i++",")","{","\n","integers[i]","=","i",";","\n","}","\n","return","new","ImmutableIntList","(","integers",")",";","\n"],"docstring_tokens":["Returns","the","identity","list","[0,","...,","count","-","1]"]}
{"code_tokens":["\n","public","ImmutableIntList","appendAll","(","Iterable<Integer>","list",")","{","\n","if","(","list","instanceof","Collection","&&","(","(","Collection",")","list",")",".","isEmpty","(",")",")","{","\n","return","this",";","\n","}","\n","return","ImmutableIntList",".","copyOf","(","Iterables",".","concat","(","this,","list",")",")",";","\n"],"docstring_tokens":["Returns","a","copy","of","this","list","with","all","of","the","given","integers","added"]}
{"code_tokens":["\n","public","ImmutableIntList","incr","(","int","offset",")","{","\n","final","int[]","integers","=","new","int[ints",".","length]",";","\n","for","(","int","i","=","0",";","i","<","ints",".","length",";","i++",")","{","\n","integers[i]","=","ints[i]","+","offset",";","\n","}","\n","return","new","ImmutableIntList","(","integers",")",";","\n"],"docstring_tokens":["Increments","offset","to","each","element","of","the","list","and","returns","a","new","int","list"]}
{"code_tokens":["\n","public","T","value","(",")","{","\n","return","value",";","\n"],"docstring_tokens":["Returns","the","value","of","this","property"]}
{"code_tokens":["\n","Iterable<SqlCall>","findAll","(","Iterable<SqlNode>","nodes",")","{","\n","final","AggIterable","aggIterable","=\n","new","AggIterable","(","opTab,","over,","aggregate,","group,","delegate,","nameMatcher",")",";","\n","for","(","SqlNode","node",":","nodes",")","{","\n","node",".","accept","(","aggIterable",")",";","\n","}","\n","return","aggIterable",".","calls",";","\n"],"docstring_tokens":["Creates","a","copy","of","this","finder","that","has","the","same","parameters","as","this,","then","returns","the","list","of","all","aggregates","found"]}
{"code_tokens":["\n","public","boolean","isRuleExcluded","(",")","{","\n","if","(","!","(","rels[0]","instanceof","Hintable",")",")","{","\n","return","false",";","\n","}","\n\n","return","rels[0]",".","getCluster","(",")","\n",".","getHintStrategies","(",")","\n",".","isRuleExcluded","(","(","Hintable",")","rels[0],","rule",")",";","\n"],"docstring_tokens":["Determines","whether","the","rule","is","excluded","by","any","root","node","hint"]}
{"code_tokens":["\n","public","void","addListener","(","RelOptListener","listener",")","{","\n","listeners",".","add","(","listener",")",";","\n"],"docstring_tokens":["Adds","a","listener","which","will","receive","multicast","events"]}
{"code_tokens":["\n","public","void","put","(","String","name,","V","v",")","{","\n","List<V>","list","=","map","(",")",".","computeIfAbsent","(","name,","k","->","new","ArrayList<>","(",")",")",";","\n","list",".","add","(","v",")",";","\n"],"docstring_tokens":["Adds","an","entry","to","this","multimap"]}
{"code_tokens":["\n","public","Collection<Map",".","Entry<String,","V>>","range","(","String","name,\n","boolean","caseSensitive",")","{","\n","NavigableMap<String,","List<V>>","range","=","map",".","range","(","name,","caseSensitive",")",";","\n","List<Pair<String,","V>>","result","=","range",".","entrySet","(",")",".","stream","(",")","\n",".","flatMap","(","e","->","e",".","getValue","(",")",".","stream","(",")",".","map","(","v","->","Pair",".","of","(","e",".","getKey","(",")",",","v",")",")",")","\n",".","collect","(","Collectors",".","toList","(",")",")",";","\n","return","Collections",".","unmodifiableList","(","result",")",";","\n"],"docstring_tokens":["Returns","a","map","containing","all","the","entries","in","this","multimap","that","match","the","given","name"]}
{"code_tokens":["\n","public","static","ViewTableMacro","viewMacro","(","SchemaPlus","schema,","String","viewSql,\n","List<String>","schemaPath,","@Nullable","List<String>","viewPath,\n","@Nullable","Boolean","modifiable",")","{","\n","return","new","ViewTableMacro","(","CalciteSchema",".","from","(","schema",")",",","viewSql,","schemaPath,\n","viewPath,","modifiable",")",";","\n"],"docstring_tokens":["Table","macro","that","returns","a","view"]}
{"code_tokens":["\n","private","static","int","prevRight","(","@Nullable","Token","token",")","{","\n","for","(",";","token","!=","null",";","token","=","token",".","previous",")","{","\n","if","(","token",".","type","==","Type",".","POSTFIX",")","{","\n","return","Integer",".","MAX_VALUE",";","\n","}","\n","if","(","token",".","right",">=","0",")","{","\n","return","token",".","right",";","\n","}","\n","}","\n","return","-1",";","\n"],"docstring_tokens":["Returns","the","right","precedence","of","the","preceding","operator","token"]}
{"code_tokens":["\n","private","static","int","nextLeft","(","@Nullable","Token","token",")","{","\n","for","(",";","token","!=","null",";","token","=","token",".","next",")","{","\n","if","(","token",".","type","==","Type",".","PREFIX",")","{","\n","return","Integer",".","MAX_VALUE",";","\n","}","\n","if","(","token",".","left",">=","0",")","{","\n","return","token",".","left",";","\n","}","\n","}","\n","return","-1",";","\n"],"docstring_tokens":["Returns","the","left","precedence","of","the","following","operator","token"]}
{"code_tokens":["\n","public","static","Builder","builder","(",")","{","\n","return","new","Builder","(",")",";","\n"],"docstring_tokens":["Returns","a","Builder","to","build","the","type","mappings"]}
{"code_tokens":["\n","public","static","Program","of","(","RuleSet","ruleSet",")","{","\n","return","new","RuleSetProgram","(","ruleSet",")",";","\n"],"docstring_tokens":["Creates","a","program","that","executes","a","rule","set"]}
{"code_tokens":["\n","public","static","Program","ofRules","(","RelOptRule",".",".",".","rules",")","{","\n","return","of","(","RuleSets",".","ofList","(","rules",")",")",";","\n"],"docstring_tokens":["Creates","a","program","from","a","list","of","rules"]}
{"code_tokens":["\n","public","static","Program","hep","(","Iterable<?","extends","RelOptRule>","rules,\n","boolean","noDag,","RelMetadataProvider","metadataProvider",")","{","\n","final","HepProgramBuilder","builder","=","HepProgram",".","builder","(",")",";","\n","for","(","RelOptRule","rule",":","rules",")","{","\n","builder",".","addRuleInstance","(","rule",")",";","\n","}","\n","return","of","(","builder",".","build","(",")",",","noDag,","metadataProvider",")",";","\n"],"docstring_tokens":["Creates","a","program","that","executes","a","list","of","rules","in","a","HEP","planner"]}
{"code_tokens":["\n","public","static","Program","standard","(",")","{","\n","return","standard","(","DefaultRelMetadataProvider",".","INSTANCE",")",";","\n"],"docstring_tokens":["Returns","the","standard","program","used","by","Prepare"]}
{"code_tokens":["\n","protected","@Nullable","Multimap<Integer,","Integer>","generateMapping","(","\n","RexBuilder","rexBuilder,\n","RexSimplify","simplify,\n","RelMetadataQuery","mq,\n","RelNode","node,\n","RelNode","target,\n","ImmutableBitSet","positions,\n","BiMap<RelTableRef,","RelTableRef>","tableMapping,\n","EquivalenceClasses","sourceEC,\n","List<RexNode>","additionalExprs",")","{","\n","Preconditions",".","checkArgument","(","additionalExprs",".","isEmpty","(",")",")",";","\n","Multimap<Integer,","Integer>","m","=","ArrayListMultimap",".","create","(",")",";","\n","Map<RexTableInputRef,","Set<RexTableInputRef>>","equivalenceClassesMap","=\n","sourceEC",".","getEquivalenceClassesMap","(",")",";","\n","Multimap<RexNode,","Integer>","exprsLineage","=","ArrayListMultimap",".","create","(",")",";","\n","final","List<RexNode>","timestampExprs","=","new","ArrayList<>","(",")",";","\n","for","(","int","i","=","0",";","i","<","target",".","getRowType","(",")",".","getFieldCount","(",")",";","i++",")","{","\n","Set<RexNode>","s","=","mq",".","getExpressionLineage","(","target,","rexBuilder",".","makeInputRef","(","target,","i",")",")",";","\n","if","(","s","==","null",")","{","\n","//","Bail","out\n","continue",";","\n","}","\n","//","We","only","support","project","-","filter","-","join,","thus","it","should","map","to\n","//","a","single","expression\n","final","RexNode","e","=","Iterables",".","getOnlyElement","(","s",")",";","\n","//","Rewrite","expr","to","be","expressed","on","query","tables\n","final","RexNode","simplified","=","simplify",".","simplifyUnknownAsFalse","(","e",")",";","\n","final","RexNode","expr","=","RexUtil",".","swapTableColumnReferences","(","rexBuilder,\n","simplified,\n","tableMapping",".","inverse","(",")",",\n","equivalenceClassesMap",")",";","\n","exprsLineage",".","put","(","expr,","i",")",";","\n","SqlTypeName","sqlTypeName","=","expr",".","getType","(",")",".","getSqlTypeName","(",")",";","\n","if","(","sqlTypeName","==","SqlTypeName",".","TIMESTAMP\n","||","sqlTypeName","==","SqlTypeName",".","TIMESTAMP_WITH_LOCAL_TIME_ZONE",")","{","\n","timestampExprs",".","add","(","expr",")",";","\n","}","\n","}","\n\n","//","If","this","is","a","column","of","TIMESTAMP","(","WITH","LOCAL","TIME","ZONE",")","\n","//","type,","we","add","the","possible","rollup","columns","too",".","\n","//","This","way","we","will","be","able","to","match","FLOOR","(","ts","to","HOUR",")","to\n","//","FLOOR","(","ts","to","DAY",")","via","FLOOR","(","FLOOR","(","ts","to","HOUR",")","to","DAY",")","\n","for","(","RexNode","timestampExpr",":","timestampExprs",")","{","\n","for","(","TimeUnitRange","value",":","SUPPORTED_DATE_TIME_ROLLUP_UNITS",")","{","\n","final","SqlFunction[]","functions","=","{","getCeilSqlFunction","(","value",")",",\n","getFloorSqlFunction","(","value",")","}",";","\n","for","(","SqlFunction","function",":","functions",")","{","\n","final","RexNode","call","=\n","rexBuilder",".","makeCall","(","function,\n","timestampExpr,","rexBuilder",".","makeFlag","(","value",")",")",";","\n","//","References","self-row\n","final","RexNode","rewrittenCall","=\n","shuttleReferences","(","rexBuilder,","call,","exprsLineage",")",";","\n","if","(","rewrittenCall","==","null",")","{","\n","continue",";","\n","}","\n","//","We","add","the","CEIL","or","FLOOR","expression","to","the","additional\n","//","expressions,","replacing","the","child","expression","by","the","position","that\n","//","it","references\n","additionalExprs",".","add","(","rewrittenCall",")",";","\n","//","Then","we","simplify","the","expression","and","we","add","it","to","the","expressions\n","//","lineage","so","we","can","try","to","find","a","match",".","\n","final","RexNode","simplified","=\n","simplify",".","simplifyUnknownAsFalse","(","call",")",";","\n","exprsLineage",".","put","(","simplified,\n","target",".","getRowType","(",")",".","getFieldCount","(",")","+","additionalExprs",".","size","(",")","-","1",")",";","\n","}","\n","}","\n","}","\n\n","for","(","int","i",":","positions",")","{","\n","Set<RexNode>","s","=","mq",".","getExpressionLineage","(","node,","rexBuilder",".","makeInputRef","(","node,","i",")",")",";","\n","if","(","s","==","null",")","{","\n","//","Bail","out\n","return","null",";","\n","}","\n","//","We","only","support","project","-","filter","-","join,","thus","it","should","map","to\n","//","a","single","expression\n","final","RexNode","e","=","Iterables",".","getOnlyElement","(","s",")",";","\n","//","Rewrite","expr","to","be","expressed","on","query","tables\n","final","RexNode","simplified","=","simplify",".","simplifyUnknownAsFalse","(","e",")",";","\n","RexNode","targetExpr","=","RexUtil",".","swapColumnReferences","(","rexBuilder,\n","simplified,","equivalenceClassesMap",")",";","\n","final","Collection<Integer>","c","=","exprsLineage",".","get","(","targetExpr",")",";","\n","if","(","!c",".","isEmpty","(",")",")","{","\n","for","(","Integer","j",":","c",")","{","\n","m",".","put","(","i,","j",")",";","\n","}","\n","}","else","{","\n","//","If","we","did","not","find","the","expression,","try","to","navigate","it\n","RexNode","rewrittenTargetExpr","=\n","shuttleReferences","(","rexBuilder,","targetExpr,","exprsLineage",")",";","\n","if","(","rewrittenTargetExpr","==","null",")","{","\n","//","Some","expressions","were","not","present\n","return","null",";","\n","}","\n","m",".","put","(","i,","target",".","getRowType","(",")",".","getFieldCount","(",")","+","additionalExprs",".","size","(",")",")",";","\n","additionalExprs",".","add","(","rewrittenTargetExpr",")",";","\n","}","\n","}","\n","return","m",";","\n"],"docstring_tokens":["Mapping","from","node","expressions","to","target","expressions"]}
{"code_tokens":["\n","List<String>","getPartitionKeys","(","String","columnFamily,","boolean","isView",")","{","\n","RelationMetadata","table","=","getRelationMetadata","(","columnFamily,","isView",")",";","\n","return","table",".","getPartitionKey","(",")",".","stream","(",")","\n",".","map","(","ColumnMetadata::getName",")","\n",".","map","(","CqlIdentifier::asInternal",")","\n",".","collect","(","Collectors",".","toList","(",")",")",";","\n"],"docstring_tokens":["Returns","the","partition","key","columns","from","the","underlying","CQL","table"]}
{"code_tokens":["\n","List<String>","getClusteringKeys","(","String","columnFamily,","boolean","isView",")","{","\n","RelationMetadata","table","=","getRelationMetadata","(","columnFamily,","isView",")",";","\n","return","table",".","getClusteringColumns","(",")",".","keySet","(",")",".","stream","(",")","\n",".","map","(","ColumnMetadata::getName",")","\n",".","map","(","CqlIdentifier::asInternal",")","\n",".","collect","(","Collectors",".","toList","(",")",")",";","\n"],"docstring_tokens":["Returns","the","clustering","keys","from","the","underlying","CQL","table"]}
{"code_tokens":["\n","private","void","addMaterializedViews","(",")","{","\n","//","Close","the","hook","used","to","get","us","here\n","hook",".","close","(",")",";","\n\n","for","(","ViewMetadata","view",":","getKeyspace","(",")",".","getViews","(",")",".","values","(",")",")","{","\n","String","tableName","=","view",".","getBaseTable","(",")",".","asInternal","(",")",";","\n","StringBuilder","queryBuilder","=","new","StringBuilder","(","\"SELECT","\"",")",";","\n\n","//","Add","all","the","selected","columns","to","the","query\n","String","columnsList","=","view",".","getColumns","(",")",".","values","(",")",".","stream","(",")","\n",".","map","(","c","->","c",".","getName","(",")",".","asInternal","(",")",")","\n",".","collect","(","Collectors",".","joining","(","\",","\"",")",")",";","\n","queryBuilder",".","append","(","columnsList",")",";","\n\n","queryBuilder",".","append","(","\"","FROM","\"",")","\n",".","append","(","tableName",")",";","\n\n","//","Get","the","where","clause","from","the","system","schema\n","String","whereQuery","=","\"SELECT","where_clause","from","system_schema",".","views","\"\n","+","\"WHERE","keyspace_name='\"","+","keyspace","+","\"'","AND","view_name='\"\n","+","view",".","getName","(",")",".","asInternal","(",")","+","\"'\"",";","\n\n","Row","whereClauseRow","=","Objects",".","requireNonNull","(","session",".","execute","(","whereQuery",")",".","one","(",")",")",";","\n\n","queryBuilder",".","append","(","\"","WHERE","\"",")","\n",".","append","(","whereClauseRow",".","getString","(","0",")",")",";","\n\n","//","Parse","and","unparse","the","view","query","to","get","properly","quoted","field","names\n","String","query","=","queryBuilder",".","toString","(",")",";","\n","SqlParser",".","Config","parserConfig","=","SqlParser",".","config","(",")","\n",".","withUnquotedCasing","(","Casing",".","UNCHANGED",")",";","\n\n","SqlSelect","parsedQuery",";","\n","try","{","\n","parsedQuery","=","(","SqlSelect",")","SqlParser",".","create","(","query,","parserConfig",")",".","parseQuery","(",")",";","\n","}","catch","(","SqlParseException","e",")","{","\n","LOGGER",".","warn","(","\"Could","not","parse","query","{","}","for","CQL","view","{","}",".","{","}","\",\n","query,","keyspace,","view",".","getName","(",")",".","asInternal","(",")",")",";","\n","continue",";","\n","}","\n\n","final","StringBuilder","buf","=","new","StringBuilder","(","query",".","length","(",")",")",";","\n","final","SqlWriterConfig","config","=","SqlPrettyWriter",".","config","(",")","\n",".","withAlwaysUseParentheses","(","true",")",";","\n","final","SqlWriter","writer","=","new","SqlPrettyWriter","(","config,","buf",")",";","\n","parsedQuery",".","unparse","(","writer,","0,","0",")",";","\n","query","=","buf",".","toString","(",")",";","\n\n","//","Add","the","view","for","this","query\n","String","viewName","=","\"$\"","+","getTableNames","(",")",".","size","(",")",";","\n","SchemaPlus","schema","=","parentSchema",".","getSubSchema","(","name",")",";","\n","if","(","schema","==","null",")","{","\n","throw","new","IllegalStateException","(","\"Cannot","find","schema","\"","+","name\n","+","\"","in","parent","schema","\"","+","parentSchema",".","getName","(",")",")",";","\n","}","\n","CalciteSchema","calciteSchema","=","CalciteSchema",".","from","(","schema",")",";","\n\n","List<String>","viewPath","=","calciteSchema",".","path","(","viewName",")",";","\n\n","schema",".","add","(","viewName,\n","MaterializedViewTable",".","create","(","calciteSchema,","query,\n","null,","viewPath,","view",".","getName","(",")",".","asInternal","(",")",",","true",")",")",";","\n","}","\n"],"docstring_tokens":["Adds","all","materialized","views","defined","in","the","schema","to","this","column","family"]}
{"code_tokens":["\n","public","List<Object>","getDataList","(","RelDataTypeFactory","typeFactory",")","{","\n","if","(","dataList","==","null",")","{","\n","JsonDataConverter","jsonDataConverter","=\n","JsonEnumerator",".","deduceRowType","(","typeFactory,","source",")",";","\n","dataList","=","jsonDataConverter",".","getDataList","(",")",";","\n","}","\n","return","dataList",";","\n"],"docstring_tokens":["Returns","the","data","list","of","the","table"]}
{"code_tokens":["\n","protected","boolean","binaryArithmeticWithStrings","(","\n","SqlCallBinding","binding,\n","RelDataType","left,\n","RelDataType","right",")","{","\n","//","For","expression","\"NUMERIC","<OP>","CHARACTER\",\n","//","PostgreSQL","and","MS-SQL","coerce","the","CHARACTER","operand","to","NUMERIC,\n","//","i",".","e",".","for","'9':VARCHAR","(","1",")","/","2:","INT,","'9'","would","be","coerced","to","INTEGER,\n","//","while","for","'9':VARCHAR","(","1",")","/","3",".","3:","DOUBLE,","'9'","would","be","coerced","to","DOUBLE",".","\n","//","They","do","not","allow","both","CHARACTER","operands","for","binary","arithmetic","operators",".","\n\n","//","MySQL","and","Oracle","would","coerce","all","the","string","operands","to","DOUBLE",".","\n\n","//","Keep","sync","with","PostgreSQL","and","MS-SQL","because","their","behaviors","are","more","in\n","//","line","with","the","SQL","standard",".","\n","if","(","SqlTypeUtil",".","isString","(","left",")","&&","SqlTypeUtil",".","isNumeric","(","right",")",")","{","\n","//","If","the","numeric","operand","is","DECIMAL","type,","coerce","the","STRING","operand","to\n","//","max","precision/scale","DECIMAL",".","\n","if","(","SqlTypeUtil",".","isDecimal","(","right",")",")","{","\n","right","=","SqlTypeUtil",".","getMaxPrecisionScaleDecimal","(","factory",")",";","\n","}","\n","return","coerceOperandType","(","binding",".","getScope","(",")",",","binding",".","getCall","(",")",",","0,","right",")",";","\n","}","else","if","(","SqlTypeUtil",".","isNumeric","(","left",")","&&","SqlTypeUtil",".","isString","(","right",")",")","{","\n","if","(","SqlTypeUtil",".","isDecimal","(","left",")",")","{","\n","left","=","SqlTypeUtil",".","getMaxPrecisionScaleDecimal","(","factory",")",";","\n","}","\n","return","coerceOperandType","(","binding",".","getScope","(",")",",","binding",".","getCall","(",")",",","1,","left",")",";","\n","}","\n","return","false",";","\n"],"docstring_tokens":["For","NUMERIC","and","STRING","operands,","cast","STRING","to","data","type","of","the","other","operand"]}
{"code_tokens":["\n","private","boolean","coerceSourceRowType","(","\n","@Nullable","SqlValidatorScope","sourceScope,\n","SqlNode","query,\n","int","columnIndex,\n","RelDataType","targetType",")","{","\n","switch","(","query",".","getKind","(",")",")","{","\n","case","INSERT:\n","SqlInsert","insert","=","(","SqlInsert",")","query",";","\n","return","coerceSourceRowType","(","sourceScope,\n","insert",".","getSource","(",")",",\n","columnIndex,\n","targetType",")",";","\n","case","UPDATE:\n","SqlUpdate","update","=","(","SqlUpdate",")","query",";","\n","final","SqlNodeList","sourceExpressionList","=","update",".","getSourceExpressionList","(",")",";","\n","if","(","sourceExpressionList","!=","null",")","{","\n","return","coerceColumnType","(","sourceScope,","sourceExpressionList,","columnIndex,","targetType",")",";","\n","}","else","{","\n","//","Note:","this","is","dead","code","since","sourceExpressionList","is","always","non-null\n","return","coerceSourceRowType","(","sourceScope,\n","castNonNull","(","update",".","getSourceSelect","(",")",")",",\n","columnIndex,\n","targetType",")",";","\n","}","\n","default:\n","return","rowTypeCoercion","(","sourceScope,","query,","columnIndex,","targetType",")",";","\n","}","\n"],"docstring_tokens":["Coerces","the","field","expression","at","index","columnIndex","of","source","in","an","INSERT","or","UPDATE","query","to","target","type"]}
{"code_tokens":["\n","void","checkMaterialize","(","MaterializedViewFixture","f",")","{","\n","final","TestConfig","testConfig","=","build","(","f",")",";","\n","final","Predicate<String>","checker","=\n","Util",".","first","(","f",".","checker,\n","s","->","MaterializedViewFixture",".","resultContains","(","s,\n","\"EnumerableTableScan","(","table=[[\"\n","+","testConfig",".","defaultSchema","+","\",","MV0]]\"",")",")",";","\n","final","List<RelNode>","substitutes","=\n","optimize","(","testConfig",".","queryRel,","testConfig",".","materializationList",")",";","\n","if","(","substitutes",".","stream","(",")","\n",".","noneMatch","(","sub","->","checker",".","test","(","RelOptUtil",".","toString","(","sub",")",")",")",")","{","\n","StringBuilder","substituteMessages","=","new","StringBuilder","(",")",";","\n","for","(","RelNode","sub:","substitutes",")","{","\n","substituteMessages",".","append","(","RelOptUtil",".","toString","(","sub",")",")",".","append","(","\"\\n\"",")",";","\n","}","\n","throw","new","AssertionError","(","\"Materialized","view","failed","to","be","matched","by","optimized","results:\\n\"\n","+","substituteMessages",")",";","\n","}","\n"],"docstring_tokens":["Checks","that","a","given","query","can","use","a","materialized","view","with","a","given","definition"]}
{"code_tokens":["\n","void","checkNoMaterialize","(","MaterializedViewFixture","f",")","{","\n","final","TestConfig","testConfig","=","build","(","f",")",";","\n","final","List<RelNode>","results","=\n","optimize","(","testConfig",".","queryRel,","testConfig",".","materializationList",")",";","\n","if","(","results",".","isEmpty","(",")","\n","||","(","results",".","size","(",")","==","1\n","&&","!RelOptUtil",".","toString","(","results",".","get","(","0",")",")",".","contains","(","\"MV0\"",")",")",")","{","\n","return",";","\n","}","\n","final","StringBuilder","errMsgBuilder","=","new","StringBuilder","(",")",";","\n","errMsgBuilder",".","append","(","\"Optimization","succeeds","out","of","expectation:","\"",")",";","\n","for","(","RelNode","res:","results",")","{","\n","errMsgBuilder",".","append","(","RelOptUtil",".","toString","(","res",")",")",".","append","(","\"\\n\"",")",";","\n","}","\n","throw","new","AssertionError","(","errMsgBuilder",".","toString","(",")",")",";","\n"],"docstring_tokens":["Checks","that","a","given","query","cannot","use","a","materialized","view","with","a","given","definition"]}
{"code_tokens":["\n","private","static","void","parse","(","QueryType","queryType,","InputStream","in,","Sink","sink,\n","List<String>","fieldNames,","List<ColumnMetaData",".","Rep>","fieldTypes,","Page","page",")","{","\n","final","JsonFactory","factory","=","new","JsonFactory","(",")",";","\n","final","Row",".","RowBuilder","rowBuilder","=","Row",".","newBuilder","(","fieldNames",".","size","(",")",")",";","\n\n","if","(","CalciteSystemProperty",".","DEBUG",".","value","(",")",")","{","\n","try","{","\n","final","byte[]","bytes","=","AvaticaUtils",".","readFullyToBytes","(","in",")",";","\n","System",".","out",".","println","(","\"Response:","\"\n","+","new","String","(","bytes,","StandardCharsets",".","UTF_8",")",")",";","//","CHECKSTYLE:","IGNORE","0\n","in","=","new","ByteArrayInputStream","(","bytes",")",";","\n","}","catch","(","IOException","e",")","{","\n","throw","new","RuntimeException","(","e",")",";","\n","}","\n","}","\n\n","int","posTimestampField","=","-1",";","\n","for","(","int","i","=","0",";","i","<","fieldTypes",".","size","(",")",";","i++",")","{","\n","/*@TODO","This","need","to","be","revisited",".","The","logic","seems","implying","that","only\n","one","column","of","type","timestamp","is","present,","this","is","not","necessarily","true,\n","see","https://issues",".","apache",".","org/jira/browse/CALCITE-2175\n","*/\n","if","(","fieldTypes",".","get","(","i",")","==","ColumnMetaData",".","Rep",".","JAVA_SQL_TIMESTAMP",")","{","\n","posTimestampField","=","i",";","\n","break",";","\n","}","\n","}","\n\n","try","(","JsonParser","parser","=","factory",".","createParser","(","in",")",")","{","\n","switch","(","queryType",")","{","\n","case","TIMESERIES:\n","if","(","parser",".","nextToken","(",")","==","JsonToken",".","START_ARRAY",")","{","\n","while","(","parser",".","nextToken","(",")","==","JsonToken",".","START_OBJECT",")","{","\n","//","loop","until","token","equal","to","\"","}","\"\n","final","Long","timeValue","=","extractTimestampField","(","parser",")",";","\n","if","(","parser",".","nextToken","(",")","==","JsonToken",".","FIELD_NAME\n","&&","parser",".","getCurrentName","(",")",".","equals","(","\"result\"",")","\n","&&","parser",".","nextToken","(",")","==","JsonToken",".","START_OBJECT",")","{","\n","if","(","posTimestampField","!=","-1",")","{","\n","rowBuilder",".","set","(","posTimestampField,","timeValue",")",";","\n","}","\n","parseFields","(","fieldNames,","fieldTypes,","rowBuilder,","parser",")",";","\n","sink",".","send","(","rowBuilder",".","build","(",")",")",";","\n","rowBuilder",".","reset","(",")",";","\n","}","\n","expect","(","parser,","JsonToken",".","END_OBJECT",")",";","\n","}","\n","}","\n","break",";","\n\n","case","TOP_N:\n","if","(","parser",".","nextToken","(",")","==","JsonToken",".","START_ARRAY\n","&&","parser",".","nextToken","(",")","==","JsonToken",".","START_OBJECT",")","{","\n","final","Long","timeValue","=","extractTimestampField","(","parser",")",";","\n","if","(","parser",".","nextToken","(",")","==","JsonToken",".","FIELD_NAME\n","&&","parser",".","getCurrentName","(",")",".","equals","(","\"result\"",")","\n","&&","parser",".","nextToken","(",")","==","JsonToken",".","START_ARRAY",")","{","\n","while","(","parser",".","nextToken","(",")","==","JsonToken",".","START_OBJECT",")","{","\n","//","loop","until","token","equal","to","\"","}","\"\n","if","(","posTimestampField","!=","-1",")","{","\n","rowBuilder",".","set","(","posTimestampField,","timeValue",")",";","\n","}","\n","parseFields","(","fieldNames,","fieldTypes,","rowBuilder,","parser",")",";","\n","sink",".","send","(","rowBuilder",".","build","(",")",")",";","\n","rowBuilder",".","reset","(",")",";","\n","}","\n","}","\n","}","\n","break",";","\n\n","case","SELECT:\n","if","(","parser",".","nextToken","(",")","==","JsonToken",".","START_ARRAY\n","&&","parser",".","nextToken","(",")","==","JsonToken",".","START_OBJECT",")","{","\n","page",".","pagingIdentifier","=","null",";","\n","page",".","offset","=","-1",";","\n","page",".","totalRowCount","=","0",";","\n","expectScalarField","(","parser,","DEFAULT_RESPONSE_TIMESTAMP_COLUMN",")",";","\n","if","(","parser",".","nextToken","(",")","==","JsonToken",".","FIELD_NAME\n","&&","parser",".","getCurrentName","(",")",".","equals","(","\"result\"",")","\n","&&","parser",".","nextToken","(",")","==","JsonToken",".","START_OBJECT",")","{","\n","while","(","parser",".","nextToken","(",")","==","JsonToken",".","FIELD_NAME",")","{","\n","if","(","parser",".","getCurrentName","(",")",".","equals","(","\"pagingIdentifiers\"",")","\n","&&","parser",".","nextToken","(",")","==","JsonToken",".","START_OBJECT",")","{","\n","JsonToken","token","=","parser",".","nextToken","(",")",";","\n","while","(","parser",".","getCurrentToken","(",")","==","JsonToken",".","FIELD_NAME",")","{","\n","page",".","pagingIdentifier","=","parser",".","getCurrentName","(",")",";","\n","if","(","parser",".","nextToken","(",")","==","JsonToken",".","VALUE_NUMBER_INT",")","{","\n","page",".","offset","=","parser",".","getIntValue","(",")",";","\n","}","\n","token","=","parser",".","nextToken","(",")",";","\n","}","\n","expect","(","token,","JsonToken",".","END_OBJECT",")",";","\n","}","else","if","(","parser",".","getCurrentName","(",")",".","equals","(","\"events\"",")","\n","&&","parser",".","nextToken","(",")","==","JsonToken",".","START_ARRAY",")","{","\n","while","(","parser",".","nextToken","(",")","==","JsonToken",".","START_OBJECT",")","{","\n","expectScalarField","(","parser,","\"segmentId\"",")",";","\n","expectScalarField","(","parser,","\"offset\"",")",";","\n","if","(","parser",".","nextToken","(",")","==","JsonToken",".","FIELD_NAME\n","&&","parser",".","getCurrentName","(",")",".","equals","(","\"event\"",")","\n","&&","parser",".","nextToken","(",")","==","JsonToken",".","START_OBJECT",")","{","\n","parseFields","(","fieldNames,","fieldTypes,","posTimestampField,","rowBuilder,","parser",")",";","\n","sink",".","send","(","rowBuilder",".","build","(",")",")",";","\n","rowBuilder",".","reset","(",")",";","\n","page",".","totalRowCount","+=","1",";","\n","}","\n","expect","(","parser,","JsonToken",".","END_OBJECT",")",";","\n","}","\n","parser",".","nextToken","(",")",";","\n","}","else","if","(","parser",".","getCurrentName","(",")",".","equals","(","\"dimensions\"",")","\n","||","parser",".","getCurrentName","(",")",".","equals","(","\"metrics\"",")",")","{","\n","expect","(","parser,","JsonToken",".","START_ARRAY",")",";","\n","while","(","parser",".","nextToken","(",")","!=","JsonToken",".","END_ARRAY",")","{","\n","//","empty\n","}","\n","}","\n","}","\n","}","\n","}","\n","break",";","\n\n","case","GROUP_BY:\n","if","(","parser",".","nextToken","(",")","==","JsonToken",".","START_ARRAY",")","{","\n","while","(","parser",".","nextToken","(",")","==","JsonToken",".","START_OBJECT",")","{","\n","expectScalarField","(","parser,","\"version\"",")",";","\n","final","Long","timeValue","=","extractTimestampField","(","parser",")",";","\n","if","(","parser",".","nextToken","(",")","==","JsonToken",".","FIELD_NAME\n","&&","parser",".","getCurrentName","(",")",".","equals","(","\"event\"",")","\n","&&","parser",".","nextToken","(",")","==","JsonToken",".","START_OBJECT",")","{","\n","if","(","posTimestampField","!=","-1",")","{","\n","rowBuilder",".","set","(","posTimestampField,","timeValue",")",";","\n","}","\n","parseFields","(","fieldNames,","fieldTypes,","posTimestampField,","rowBuilder,","parser",")",";","\n","sink",".","send","(","rowBuilder",".","build","(",")",")",";","\n","rowBuilder",".","reset","(",")",";","\n","}","\n","expect","(","parser,","JsonToken",".","END_OBJECT",")",";","\n","}","\n","}","\n","break",";","\n\n","case","SCAN:\n","if","(","parser",".","nextToken","(",")","==","JsonToken",".","START_ARRAY",")","{","\n","while","(","parser",".","nextToken","(",")","==","JsonToken",".","START_OBJECT",")","{","\n","expectScalarField","(","parser,","\"segmentId\"",")",";","\n\n","expect","(","parser,","JsonToken",".","FIELD_NAME",")",";","\n","if","(","parser",".","getCurrentName","(",")",".","equals","(","\"columns\"",")",")","{","\n","expect","(","parser,","JsonToken",".","START_ARRAY",")",";","\n","while","(","parser",".","nextToken","(",")","!=","JsonToken",".","END_ARRAY",")","{","\n","//","Skip","the","columns","list\n","}","\n","}","\n","if","(","parser",".","nextToken","(",")","==","JsonToken",".","FIELD_NAME\n","&&","parser",".","getCurrentName","(",")",".","equals","(","\"events\"",")","\n","&&","parser",".","nextToken","(",")","==","JsonToken",".","START_ARRAY",")","{","\n","//","Events","is","Array","of","Arrays","where","each","array","is","a","row\n","while","(","parser",".","nextToken","(",")","==","JsonToken",".","START_ARRAY",")","{","\n","for","(","String","field",":","fieldNames",")","{","\n","parseFieldForName","(","fieldNames,","fieldTypes,","posTimestampField,","rowBuilder,","parser,\n","field",")",";","\n","}","\n","expect","(","parser,","JsonToken",".","END_ARRAY",")",";","\n","Row","row","=","rowBuilder",".","build","(",")",";","\n","sink",".","send","(","row",")",";","\n","rowBuilder",".","reset","(",")",";","\n","page",".","totalRowCount","+=","1",";","\n","}","\n","}","\n","expect","(","parser,","JsonToken",".","END_OBJECT",")",";","\n","}","\n","}","\n","break",";","\n","default:\n","break",";","\n","}","\n","}","catch","(","IOException","|","InterruptedException","e",")","{","\n","throw","new","RuntimeException","(","e",")",";","\n","}","\n"],"docstring_tokens":["Parses","the","output","of","a","query,","sending","the","results","to","a","Sink"]}
{"code_tokens":["\n","void","metadata","(","String","dataSourceName,","String","timestampColumnName,\n","List<Interval>","intervals,\n","Map<String,","SqlTypeName>","fieldBuilder,","Set<String>","metricNameBuilder,\n","Map<String,","List<ComplexMetric>>","complexMetrics",")","{","\n","final","String","url","=","this",".","url","+","\"/druid/v2/?pretty\"",";","\n","final","Map<String,","String>","requestHeaders","=\n","ImmutableMap",".","of","(","\"Content-Type\",","\"application/json\"",")",";","\n","final","String","data","=","DruidQuery",".","metadataQuery","(","dataSourceName,","intervals",")",";","\n","if","(","CalciteSystemProperty",".","DEBUG",".","value","(",")",")","{","\n","System",".","out",".","println","(","\"Druid:","\"","+","data",")",";","\n","}","\n","try","(","InputStream","in0","=","post","(","url,","data,","requestHeaders,","10000,","1800000",")",";","\n","InputStream","in","=","traceResponse","(","in0",")",")","{","\n","final","ObjectMapper","mapper","=","new","ObjectMapper","(",")","\n",".","configure","(","DeserializationFeature",".","FAIL_ON_UNKNOWN_PROPERTIES,","false",")",";","\n","final","CollectionType","listType","=\n","mapper",".","getTypeFactory","(",")",".","constructCollectionType","(","List",".","class,\n","JsonSegmentMetadata",".","class",")",";","\n","final","List<JsonSegmentMetadata>","list","=","mapper",".","readValue","(","in,","listType",")",";","\n","in",".","close","(",")",";","\n","fieldBuilder",".","put","(","timestampColumnName,","SqlTypeName",".","TIMESTAMP_WITH_LOCAL_TIME_ZONE",")",";","\n","for","(","JsonSegmentMetadata","o",":","list",")","{","\n","for","(","Map",".","Entry<String,","JsonColumn>","entry",":","o",".","columns",".","entrySet","(",")",")","{","\n","if","(","entry",".","getKey","(",")",".","equals","(","DruidTable",".","DEFAULT_TIMESTAMP_COLUMN",")",")","{","\n","//","timestamp","column\n","continue",";","\n","}","\n","final","DruidType","druidType",";","\n","try","{","\n","druidType","=","DruidType",".","getTypeFromMetaData","(","entry",".","getValue","(",")",".","type",")",";","\n","}","catch","(","AssertionError","e",")","{","\n","//","ignore","exception",";","not","a","supported","type\n","continue",";","\n","}","\n","fieldBuilder",".","put","(","entry",".","getKey","(",")",",","druidType",".","sqlType",")",";","\n","}","\n","if","(","o",".","aggregators","!=","null",")","{","\n","for","(","Map",".","Entry<String,","JsonAggregator>","entry\n",":","o",".","aggregators",".","entrySet","(",")",")","{","\n","if","(","!fieldBuilder",".","containsKey","(","entry",".","getKey","(",")",")",")","{","\n","continue",";","\n","}","\n","DruidType","type","=","DruidType",".","getTypeFromMetaData","(","entry",".","getValue","(",")",".","type",")",";","\n","if","(","type",".","isComplex","(",")",")","{","\n","//","Each","complex","type","will","get","their","own","alias,","equal","to","their","actual","name",".","\n","//","Maybe","we","should","have","some","smart","string","replacement","strategies","to","make","the","column\n","//","names","more","natural",".","\n","List<ComplexMetric>","metricList","=","new","ArrayList<>","(",")",";","\n","metricList",".","add","(","new","ComplexMetric","(","entry",".","getKey","(",")",",","type",")",")",";","\n","complexMetrics",".","put","(","entry",".","getKey","(",")",",","metricList",")",";","\n","}","else","{","\n","metricNameBuilder",".","add","(","entry",".","getKey","(",")",")",";","\n","}","\n","}","\n","}","\n","}","\n","}","catch","(","IOException","e",")","{","\n","throw","new","RuntimeException","(","e",")",";","\n","}","\n"],"docstring_tokens":["Reads","segment","metadata,","and","populates","a","list","of","columns","and","metrics"]}
{"code_tokens":["\n","Set<String>","tableNames","(",")","{","\n","final","Map<String,","String>","requestHeaders","=\n","ImmutableMap",".","of","(","\"Content-Type\",","\"application/json\"",")",";","\n","final","String","data","=","null",";","\n","final","String","url","=","coordinatorUrl","+","\"/druid/coordinator/v1/metadata/datasources\"",";","\n","if","(","CalciteSystemProperty",".","DEBUG",".","value","(",")",")","{","\n","System",".","out",".","println","(","\"Druid:","table","names\"","+","data","+","\"",";","\"","+","url",")",";","\n","}","\n","try","(","InputStream","in0","=","post","(","url,","data,","requestHeaders,","10000,","1800000",")",";","\n","InputStream","in","=","traceResponse","(","in0",")",")","{","\n","final","ObjectMapper","mapper","=","new","ObjectMapper","(",")",";","\n","final","CollectionType","listType","=\n","mapper",".","getTypeFactory","(",")",".","constructCollectionType","(","List",".","class,\n","String",".","class",")",";","\n","final","List<String>","list","=","mapper",".","readValue","(","in,","listType",")",";","\n","return","ImmutableSet",".","copyOf","(","list",")",";","\n","}","catch","(","IOException","e",")","{","\n","throw","new","RuntimeException","(","e",")",";","\n","}","\n"],"docstring_tokens":["Reads","data","source","names","from","Druid"]}
{"code_tokens":["\n","public","static","ResultSetEnumerable<@Nullable","Object>","of","(","DataSource","dataSource,","String","sql,\n","Primitive[]","primitives",")","{","\n","return","of","(","dataSource,","sql,","primitiveRowBuilderFactory","(","primitives",")",")",";","\n"],"docstring_tokens":["Creates","a","ResultSetEnumerable","that","retrieves","columns","as","specific","Java","types"]}
{"code_tokens":["\n","public","static","PreparedStatementEnricher","createEnricher","(","Integer[]","indexes,\n","DataContext","context",")","{","\n","return","preparedStatement","->","{","\n","for","(","int","i","=","0",";","i","<","indexes",".","length",";","i++",")","{","\n","final","int","index","=","indexes[i]",";","\n","setDynamicParam","(","preparedStatement,","i","+","1,\n","context",".","get","(","\"?\"","+","index",")",")",";","\n","}","\n","}",";","\n"],"docstring_tokens":["Called","from","generated","code","that","proposes","to","create","a","ResultSetEnumerable","over","a","prepared","statement"]}
{"code_tokens":["\n","public","static","Row","of","(","@Nullable","Object","value0",")","{","\n","return","new","Row","(","new","Object[]","{","value0","}",")",";","\n"],"docstring_tokens":["Creates","a","Row","with","one","column","value"]}
{"code_tokens":["\n","public","static","Row","of","(","@Nullable","Object","value0,","@Nullable","Object","value1",")","{","\n","return","new","Row","(","new","Object[]","{","value0,","value1","}",")",";","\n"],"docstring_tokens":["Creates","a","Row","with","two","column","values"]}
{"code_tokens":["\n","public","static","Row","of","(","@Nullable","Object","value0,","@Nullable","Object","value1,","@Nullable","Object","value2",")","{","\n","return","new","Row","(","new","Object[]","{","value0,","value1,","value2","}",")",";","\n"],"docstring_tokens":["Creates","a","Row","with","three","column","values"]}
{"code_tokens":["\n","public","static","Row","of","(","@Nullable","Object",".",".",".","values",")","{","\n","return","new","Row","(","values",")",";","\n"],"docstring_tokens":["Creates","a","Row","with","variable","number","of","values"]}
{"code_tokens":["\n","public","static","RowBuilder","newBuilder","(","int","size",")","{","\n","return","new","RowBuilder","(","size",")",";","\n"],"docstring_tokens":["Create","a","RowBuilder","object","that","eases","creation","of","a","new","row"]}
{"code_tokens":["\n","public","boolean","isFullOuterJoin","(",")","{","\n","return","isFullOuterJoin",";","\n"],"docstring_tokens":["Returns","true","if","the","MultiJoin","corresponds","to","a","full","outer","join"]}
{"code_tokens":["\n","public","SqlNode","parseExpression","(",")","throws","SqlParseException","{","\n","try","{","\n","return","parser",".","parseSqlExpressionEof","(",")",";","\n","}","catch","(","Throwable","ex",")","{","\n","if","(","ex","instanceof","CalciteContextException",")","{","\n","final","String","originalSql","=","parser",".","getOriginalSql","(",")",";","\n","if","(","originalSql","!=","null",")","{","\n","(","(","CalciteContextException",")","ex",")",".","setOriginalStatement","(","originalSql",")",";","\n","}","\n","}","\n","throw","parser",".","normalizeException","(","ex",")",";","\n","}","\n"],"docstring_tokens":["Parses","a","SQL","expression"]}
{"code_tokens":["\n","private","SqlParseException","handleException","(","Throwable","ex",")","{","\n","if","(","ex","instanceof","CalciteContextException",")","{","\n","final","String","originalSql","=","parser",".","getOriginalSql","(",")",";","\n","if","(","originalSql","!=","null",")","{","\n","(","(","CalciteContextException",")","ex",")",".","setOriginalStatement","(","originalSql",")",";","\n","}","\n","}","\n","return","parser",".","normalizeException","(","ex",")",";","\n"],"docstring_tokens":["Normalizes","a","SQL","exception"]}
{"code_tokens":["\n","public","SqlNode","parseQuery","(","String","sql",")","throws","SqlParseException","{","\n","parser",".","ReInit","(","new","StringReader","(","sql",")",")",";","\n","return","parseQuery","(",")",";","\n"],"docstring_tokens":["Parses","a","SELECT","statement","and","reuses","parser"]}
{"code_tokens":["\n","public","SqlNode","parseStmt","(",")","throws","SqlParseException","{","\n","return","parseQuery","(",")",";","\n"],"docstring_tokens":["Parses","an","SQL","statement"]}
{"code_tokens":["\n","public","SqlNodeList","parseStmtList","(",")","throws","SqlParseException","{","\n","try","{","\n","return","parser",".","parseSqlStmtList","(",")",";","\n","}","catch","(","Throwable","ex",")","{","\n","throw","handleException","(","ex",")",";","\n","}","\n"],"docstring_tokens":["Parses","a","list","of","SQL","statements","separated","by","semicolon"]}
{"code_tokens":["\n","public","@Nullable","Frame","decorrelateRel","(","RelNode","rel,","boolean","isCorVarDefined",")","{","\n","RelNode","newRel","=","rel",".","copy","(","rel",".","getTraitSet","(",")",",","rel",".","getInputs","(",")",")",";","\n\n","if","(","rel",".","getInputs","(",")",".","size","(",")",">","0",")","{","\n","List<RelNode>","oldInputs","=","rel",".","getInputs","(",")",";","\n","List<RelNode>","newInputs","=","new","ArrayList<>","(",")",";","\n","for","(","int","i","=","0",";","i","<","oldInputs",".","size","(",")",";","++i",")","{","\n","final","Frame","frame","=","getInvoke","(","oldInputs",".","get","(","i",")",",","isCorVarDefined,","rel",")",";","\n","if","(","frame","==","null","||","!frame",".","corDefOutputs",".","isEmpty","(",")",")","{","\n","//","if","input","is","not","rewritten,","or","if","it","produces","correlated\n","//","variables,","terminate","rewrite\n","return","null",";","\n","}","\n","newInputs",".","add","(","frame",".","r",")",";","\n","newRel",".","replaceInput","(","i,","frame",".","r",")",";","\n","}","\n\n","if","(","!Util",".","equalShallow","(","oldInputs,","newInputs",")",")","{","\n","newRel","=","rel",".","copy","(","rel",".","getTraitSet","(",")",",","newInputs",")",";","\n","}","\n","}","\n\n","//","the","output","position","should","not","change","since","there","are","no","corVars\n","//","coming","from","below",".","\n","return","register","(","rel,","newRel,","identityMap","(","rel",".","getRowType","(",")",".","getFieldCount","(",")",")",",\n","ImmutableSortedMap",".","of","(",")",")",";","\n"],"docstring_tokens":["Fallback","if","none","of","the","other","decorrelateRel","methods","match"]}
{"code_tokens":["\n","private","RelNode","aggregateCorrelatorOutput","(","\n","Correlate","correlate,\n","Project","project,\n","Set<Integer>","isCount",")","{","\n","final","RelNode","left","=","correlate",".","getLeft","(",")",";","\n","final","JoinRelType","joinType","=","correlate",".","getJoinType","(",")",";","\n\n","//","now","create","the","new","project\n","final","List<Pair<RexNode,","String>>","newProjects","=","new","ArrayList<>","(",")",";","\n\n","//","Project","everything","from","the","LHS","and","then","those","from","the","original\n","//","project\n","final","List<RelDataTypeField>","leftInputFields","=\n","left",".","getRowType","(",")",".","getFieldList","(",")",";","\n\n","for","(","int","i","=","0",";","i","<","leftInputFields",".","size","(",")",";","i++",")","{","\n","newProjects",".","add","(","RexInputRef",".","of2","(","i,","leftInputFields",")",")",";","\n","}","\n\n","//","Marked","where","the","projected","expr","is","coming","from","so","that","the","types","will\n","//","become","nullable","for","the","original","projections","which","are","now","coming","out\n","//","of","the","nullable","side","of","the","OJ",".","\n","boolean","projectPulledAboveLeftCorrelator","=\n","joinType",".","generatesNullsOnRight","(",")",";","\n\n","for","(","Pair<RexNode,","String>","pair",":","project",".","getNamedProjects","(",")",")","{","\n","RexNode","newProjExpr","=\n","removeCorrelationExpr","(","\n","pair",".","left,\n","projectPulledAboveLeftCorrelator,\n","isCount",")",";","\n","newProjects",".","add","(","Pair",".","of","(","newProjExpr,","pair",".","right",")",")",";","\n","}","\n\n","return","relBuilder",".","push","(","correlate",")","\n",".","projectNamed","(","Pair",".","left","(","newProjects",")",",","Pair",".","right","(","newProjects",")",",","true",")","\n",".","build","(",")",";","\n"],"docstring_tokens":["Pulls","a","Project","above","a","Correlate","from","its","RHS","input"]}
{"code_tokens":["\n","private","RelNode","createProjectWithAdditionalExprs","(","\n","RelNode","input,\n","List<Pair<RexNode,","String>>","additionalExprs",")","{","\n","final","List<RelDataTypeField>","fieldList","=\n","input",".","getRowType","(",")",".","getFieldList","(",")",";","\n","List<Pair<RexNode,","String>>","projects","=","new","ArrayList<>","(",")",";","\n","Ord",".","forEach","(","fieldList,","(","field,","i",")","->\n","projects",".","add","(","\n","Pair",".","of","(","relBuilder",".","getRexBuilder","(",")",".","makeInputRef","(","field",".","getType","(",")",",","i",")",",\n","field",".","getName","(",")",")",")",")",";","\n","projects",".","addAll","(","additionalExprs",")",";","\n","return","relBuilder",".","push","(","input",")","\n",".","projectNamed","(","Pair",".","left","(","projects",")",",","Pair",".","right","(","projects",")",",","true",")","\n",".","build","(",")",";","\n"],"docstring_tokens":["Projects","all","input","output","fields","plus","the","additional","expressions"]}
{"code_tokens":["\n","public","static","SqlSampleSpec","createNamed","(","String","name",")","{","\n","return","new","SqlSubstitutionSampleSpec","(","name",")",";","\n"],"docstring_tokens":["Creates","a","sample","which","substitutes","one","relation","for","another"]}
{"code_tokens":["\n","private","RexNode","adjustSemiJoinCondition","(","\n","LoptMultiJoin","multiJoin,\n","int","leftAdjustment,\n","RexNode","semiJoinCondition,\n","int","leftIdx,\n","int","rightIdx",")","{","\n","//","adjust","the","semijoin","condition","to","reflect","the","fact","that","the\n","//","RHS","is","now","the","second","factor","into","the","semijoin","and","the","LHS\n","//","is","the","first\n","int","rightAdjustment","=","0",";","\n","for","(","int","i","=","0",";","i","<","rightIdx",";","i++",")","{","\n","rightAdjustment","-=","multiJoin",".","getNumFieldsInJoinFactor","(","i",")",";","\n","}","\n","int","rightStart","=","-rightAdjustment",";","\n","int","numFieldsLeftIdx","=","multiJoin",".","getNumFieldsInJoinFactor","(","leftIdx",")",";","\n","int","numFieldsRightIdx","=","multiJoin",".","getNumFieldsInJoinFactor","(","rightIdx",")",";","\n","rightAdjustment","+=","numFieldsLeftIdx",";","\n\n","//","only","adjust","the","filter","if","adjustments","are","required\n","if","(","(","leftAdjustment","!=","0",")","||","(","rightAdjustment","!=","0",")",")","{","\n","int","[]","adjustments","=","new","int[multiJoin",".","getNumTotalFields","(",")","]",";","\n","if","(","leftAdjustment","!=","0",")","{","\n","for","(","int","i","=","-leftAdjustment",";","\n","i","<","(","-leftAdjustment","+","numFieldsLeftIdx",")",";","\n","i++",")","{","\n","adjustments[i]","=","leftAdjustment",";","\n","}","\n","}","\n","if","(","rightAdjustment","!=","0",")","{","\n","for","(","int","i","=","rightStart",";","\n","i","<","(","rightStart","+","numFieldsRightIdx",")",";","\n","i++",")","{","\n","adjustments[i]","=","rightAdjustment",";","\n","}","\n","}","\n","return","semiJoinCondition",".","accept","(","\n","new","RelOptUtil",".","RexInputConverter","(","\n","rexBuilder,\n","multiJoin",".","getMultiJoinFields","(",")",",\n","adjustments",")",")",";","\n","}","\n\n","return","semiJoinCondition",";","\n"],"docstring_tokens":["Modifies","the","semijoin","condition","to","reflect","the","fact","that","the","RHS","is","now","the","second","factor","into","a","join","and","the","LHS","is","the","first"]}
{"code_tokens":["\n","public","static","RelRoot","of","(","RelNode","rel,","SqlKind","kind",")","{","\n","return","of","(","rel,","rel",".","getRowType","(",")",",","kind",")",";","\n"],"docstring_tokens":["Creates","a","simple","RelRoot"]}
{"code_tokens":["\n","public","RelRoot","withRel","(","RelNode","rel",")","{","\n","if","(","rel","==","this",".","rel",")","{","\n","return","this",";","\n","}","\n","return","new","RelRoot","(","rel,","validatedRowType,","kind,","fields,","collation,","hints",")",";","\n"],"docstring_tokens":["Creates","a","copy","of","this","RelRoot,","assigning","a","RelNode"]}
{"code_tokens":["\n","public","RelRoot","withHints","(","List<RelHint>","hints",")","{","\n","return","new","RelRoot","(","rel,","validatedRowType,","kind,","fields,","collation,","hints",")",";","\n"],"docstring_tokens":["Creates","a","copy,","assigning","the","query","hints"]}
{"code_tokens":["\n","public","RelNode","project","(","boolean","force",")","{","\n","if","(","isRefTrivial","(",")","\n","&&","(","SqlKind",".","DML",".","contains","(","kind",")","\n","||","!force\n","||","rel","instanceof","LogicalProject",")",")","{","\n","return","rel",";","\n","}","\n","final","List<RexNode>","projects","=","new","ArrayList<>","(","fields",".","size","(",")",")",";","\n","final","RexBuilder","rexBuilder","=","rel",".","getCluster","(",")",".","getRexBuilder","(",")",";","\n","for","(","Pair<Integer,","String>","field",":","fields",")","{","\n","projects",".","add","(","rexBuilder",".","makeInputRef","(","rel,","field",".","left",")",")",";","\n","}","\n","return","LogicalProject",".","create","(","rel,","hints,","projects,","Pair",".","right","(","fields",")",")",";","\n"],"docstring_tokens":["Returns","the","root","relational","expression","as","a","LogicalProject"]}
{"code_tokens":["\n","public","static","JoinInfo","of","(","RelNode","left,","RelNode","right,","RexNode","condition",")","{","\n","final","List<Integer>","leftKeys","=","new","ArrayList<>","(",")",";","\n","final","List<Integer>","rightKeys","=","new","ArrayList<>","(",")",";","\n","final","List<Boolean>","filterNulls","=","new","ArrayList<>","(",")",";","\n","final","List<RexNode>","nonEquiList","=","new","ArrayList<>","(",")",";","\n","RelOptUtil",".","splitJoinCondition","(","left,","right,","condition,","leftKeys,","rightKeys,\n","filterNulls,","nonEquiList",")",";","\n","return","new","JoinInfo","(","ImmutableIntList",".","copyOf","(","leftKeys",")",",\n","ImmutableIntList",".","copyOf","(","rightKeys",")",",","ImmutableList",".","copyOf","(","nonEquiList",")",")",";","\n"],"docstring_tokens":["Creates","a","JoinInfo","by","analyzing","a","condition"]}
{"code_tokens":["\n","public","static","Matcher<?","super","Throwable>","expectThrowable","(","Throwable","expected",")","{","\n","return","new","BaseMatcher<Throwable>","(",")","{","\n","@Override","public","boolean","matches","(","Object","item",")","{","\n","if","(","!","(","item","instanceof","Throwable",")",")","{","\n","return","false",";","\n","}","\n","Throwable","error","=","(","Throwable",")","item",";","\n","return","expected","!=","null\n","&&","Objects",".","equals","(","error",".","getClass","(",")",",","expected",".","getClass","(",")",")","\n","&&","Objects",".","equals","(","error",".","getMessage","(",")",",","expected",".","getMessage","(",")",")",";","\n","}","\n\n","@Override","public","void","describeTo","(","Description","description",")","{","\n","description",".","appendText","(","\"is","\"",")",".","appendText","(","expected",".","toString","(",")",")",";","\n","}","\n","}",";","\n"],"docstring_tokens":["Creates","a","matcher","that","matches","if","the","examined","value","is","expected","throwable"]}
{"code_tokens":["\n","private","boolean","coerceOperands","(","SqlCallBinding","callBinding,","boolean","repeat",")","{","\n","//","Type","coercion","for","the","call,\n","//","collect","SqlTypeFamily","and","data","type","of","all","the","operands",".","\n","List<SqlTypeFamily>","families","=","allowedRules",".","stream","(",")","\n",".","filter","(","r","->","r","instanceof","ImplicitCastOperandTypeChecker",")","\n","//","All","the","rules","are","SqlSingleOperandTypeChecker",".","\n",".","map","(","r","->","(","(","ImplicitCastOperandTypeChecker",")","r",")",".","getOperandSqlTypeFamily","(","0",")",")","\n",".","collect","(","Collectors",".","toList","(",")",")",";","\n","if","(","families",".","size","(",")","<","allowedRules",".","size","(",")",")","{","\n","//","Not","all","the","checkers","are","ImplicitCastOperandTypeChecker,","returns","early",".","\n","return","false",";","\n","}","\n","if","(","repeat",")","{","\n","assert","families",".","size","(",")","==","1",";","\n","families","=","Collections",".","nCopies","(","callBinding",".","getOperandCount","(",")",",","families",".","get","(","0",")",")",";","\n","}","\n","final","List<RelDataType>","operandTypes","=","new","ArrayList<>","(",")",";","\n","for","(","int","i","=","0",";","i","<","callBinding",".","getOperandCount","(",")",";","i++",")","{","\n","operandTypes",".","add","(","callBinding",".","getOperandType","(","i",")",")",";","\n","}","\n","TypeCoercion","typeCoercion","=","callBinding",".","getValidator","(",")",".","getTypeCoercion","(",")",";","\n","return","typeCoercion",".","builtinFunctionCoercion","(","callBinding,\n","operandTypes,","families",")",";","\n"],"docstring_tokens":["Tries","to","coerce","the","operands","based","on","the","defined","type","families"]}
{"code_tokens":["\n","public","static","SqlLiteral","concatenateOperands","(","SqlCall","call",")","{","\n","final","List<SqlNode>","operandList","=","call",".","getOperandList","(",")",";","\n","assert","operandList",".","size","(",")",">","0",";","\n","assert","operandList",".","get","(","0",")","instanceof","SqlLiteral\n",":","operandList",".","get","(","0",")",".","getClass","(",")",";","\n","return","SqlUtil",".","concatenateLiterals","(","\n","Util",".","cast","(","operandList,","SqlLiteral",".","class",")",")",";","\n"],"docstring_tokens":["Concatenates","the","operands","of","a","call","to","this","operator"]}
{"code_tokens":["\n","private","static","void","appendPosixDaylightTransition","(","\n","TimeZone","tz,\n","StringBuilder","buf,\n","int","mode,\n","int","day,\n","int","month,\n","int","dayOfWeek,\n","int","time,\n","int","timeMode,\n","boolean","verbose,\n","boolean","isEnd",")","{","\n","buf",".","append","(","','",")",";","\n","int","week","=","day",";","\n","switch","(","mode",")","{","\n","case","1:","//","SimpleTimeZone",".","DOM_MODE\n","throw","Util",".","needToImplement","(","0",")",";","\n\n","case","3:","//","SimpleTimeZone",".","DOW_GE_DOM_MODE\n\n","//","If","the","day","is","1,","8,","15,","22,","we","can","translate","this","to","case","2",".","\n","switch","(","day",")","{","\n","case","1:\n","week","=","1",";","//","1st","week","of","month\n","break",";","\n","case","8:\n","week","=","2",";","//","2nd","week","of","month\n","break",";","\n","case","15:\n","week","=","3",";","//","3rd","week","of","month\n","break",";","\n","case","22:\n","week","=","4",";","//","4th","week","of","month\n","break",";","\n","default:\n","throw","new","AssertionError","(","\n","\"POSIX","timezone","format","cannot","represent","\"","+","tz",")",";","\n","}","\n","//","fall","through\n\n","case","2:","//","SimpleTimeZone",".","DOW_IN_MONTH_MODE\n","buf",".","append","(","'M'",")",";","\n","buf",".","append","(","month","+","1",")",";","//","1","<=","m","<=","12\n","buf",".","append","(","'",".","'",")",";","\n","if","(","week","==","-1",")","{","\n","//","java","represents","'last","week'","differently","from","POSIX\n","week","=","5",";","\n","}","\n","buf",".","append","(","week",")",";","//","1","<=","n","<=","5,","5","means","'last'\n","buf",".","append","(","'",".","'",")",";","\n","buf",".","append","(","dayOfWeek","-","1",")",";","//","0","<=","d","<=","6,","0=Sunday\n","break",";","\n\n","case","4:","//","SimpleTimeZone",".","DOW_LE_DOM_MODE\n","throw","Util",".","needToImplement","(","0",")",";","\n","default:\n","throw","new","AssertionError","(","\"unexpected","value:","\"","+","mode",")",";","\n","}","\n","switch","(","timeMode",")","{","\n","case","0:","//","SimpleTimeZone",".","WALL_TIME\n","break",";","\n","case","1:","//","SimpleTimeZone",".","STANDARD_TIME,","e",".","g",".","Australia/Sydney\n","if","(","isEnd",")","{","\n","time","+=","tz",".","getDSTSavings","(",")",";","\n","}","\n","break",";","\n","case","2:","//","SimpleTimeZone",".","UTC_TIME,","e",".","g",".","Europe/Paris\n","time","+=","tz",".","getRawOffset","(",")",";","\n","if","(","isEnd",")","{","\n","time","+=","tz",".","getDSTSavings","(",")",";","\n","}","\n","break",";","\n","default:\n","break",";","\n","}","\n","if","(","verbose","||","(","time","!=","7200000",")",")","{","\n","//","POSIX","allows","us","to","omit","the","time","if","it","is","2am","(","the","default",")","\n","buf",".","append","(","'/'",")",";","\n","appendPosixTime","(","buf,","time",")",";","\n","}","\n"],"docstring_tokens":["Writes","a","daylight","savings","time","transition","to","a","POSIX","timezone","description"]}
{"code_tokens":["\n","public","SqlBuilder","append","(","SqlString","s",")","{","\n","buf",".","append","(","s",".","getSql","(",")",")",";","\n","return","this",";","\n"],"docstring_tokens":["Appends","a","hygienic","SQL","string"]}
{"code_tokens":["\n","public","SqlBuilder","identifier","(","String","name",")","{","\n","dialect",".","quoteIdentifier","(","buf,","name",")",";","\n","return","this",";","\n"],"docstring_tokens":["Appends","an","identifier","to","this","buffer,","quoting","accordingly"]}
{"code_tokens":["\n","public","SqlBuilder","identifier","(","String",".",".",".","names",")","{","\n","dialect",".","quoteIdentifier","(","buf,","UnmodifiableArrayList",".","of","(","names",")",")",";","\n","return","this",";","\n"],"docstring_tokens":["Appends","one","or","more","identifiers","to","this","buffer,","quoting","accordingly"]}
{"code_tokens":["\n","public","SqlBuilder","identifier","(","List<String>","names",")","{","\n","dialect",".","quoteIdentifier","(","buf,","names",")",";","\n","return","this",";","\n"],"docstring_tokens":["Appends","a","compound","identifier","to","this","buffer,","quoting","accordingly"]}
{"code_tokens":["\n","public","SqlBuilder","literal","(","Timestamp","timestamp",")","{","\n","buf",".","append","(","\n","timestamp","==","null\n","?","\"null\"\n",":","dialect",".","quoteTimestampLiteral","(","timestamp",")",")",";","\n","return","this",";","\n"],"docstring_tokens":["Appends","a","timestamp","literal","to","this","buffer"]}
{"code_tokens":["\n","protected","boolean","isStrictEngine","(",")","{","\n","return","options",".","isStrict","(",")",";","\n"],"docstring_tokens":["Whether","this","interpreter","is","currently","evaluating","with","a","strict","engine","flag"]}
{"code_tokens":["\n","protected","boolean","isSafe","(",")","{","\n","return","options",".","isSafe","(",")",";","\n"],"docstring_tokens":["Whether","this","interpreter","ignores","null","in","navigation","expression","as","errors"]}
{"code_tokens":["\n","protected","boolean","isSilent","(",")","{","\n","return","options",".","isSilent","(",")",";","\n"],"docstring_tokens":["Whether","this","interpreter","is","currently","evaluating","with","a","silent","mode"]}
{"code_tokens":["\n","protected","boolean","isCancelled","(",")","{","\n","return","cancelled",".","get","(",")","|","Thread",".","currentThread","(",")",".","isInterrupted","(",")",";","\n"],"docstring_tokens":["Checks","whether","this","interpreter","execution","was","cancelled","due","to","thread","interruption"]}
{"code_tokens":["\n","protected","Object","functionArgument","(","final","boolean","narrow,","final","Object","arg",")","{","\n","return","narrow","&&","arg","instanceof","Number","?","arithmetic",".","narrow","(","(","Number",")","arg",")",":","arg",";","\n"],"docstring_tokens":["Optionally","narrows","an","argument","for","a","function","call"]}
{"code_tokens":["\n","@Override\n","public","void","jjtAddChild","(","final","Node","n,","final","int","i",")","{","\n","if","(","children","==","null",")","{","\n","children","=","new","JexlNode[i","+","1]",";","\n","}","else","if","(","i",">=","children",".","length",")","{","\n","final","JexlNode[]","c","=","new","JexlNode[i","+","1]",";","\n","System",".","arraycopy","(","children,","0,","c,","0,","children",".","length",")",";","\n","children","=","c",";","\n","}","\n","children[i]","=","(","JexlNode",")","n",";","\n"],"docstring_tokens":["Adds","a","child","node"]}
{"code_tokens":["\n","@Override\n","public","JexlNode","jjtGetChild","(","final","int","i",")","{","\n","return","children[i]",";","\n"],"docstring_tokens":["Gets","a","child","of","this","node"]}
{"code_tokens":["\n","@Override\n","public","int","jjtGetNumChildren","(",")","{","\n","return","(","children","==","null",")","?","0",":","children",".","length",";","\n"],"docstring_tokens":["Gets","this","node","number","of","children"]}
{"code_tokens":["\n","public","void","jjtSetValue","(","final","Object","value",")","{","\n","this",".","value","=","value",";","\n"],"docstring_tokens":["Sets","this","node","value"]}
{"code_tokens":["\n","public","Object","jjtGetValue","(",")","{","\n","return","value",";","\n"],"docstring_tokens":["Gets","this","node","value"]}
{"code_tokens":["\n","private","static","JexlInfo","detailedInfo","(","final","JexlNode","node,","final","JexlInfo","info",")","{","\n","if","(","info","!=","null","&&","node","!=","null",")","{","\n","final","Debugger","dbg","=","new","Debugger","(",")",";","\n","if","(","dbg",".","debug","(","node",")",")","{","\n","return","new","JexlInfo","(","info",")","{","\n","@Override\n","public","JexlInfo",".","Detail","getDetail","(",")","{","\n","return","dbg",";","\n","}","\n","}",";","\n","}","\n","}","\n","return","info",";","\n"],"docstring_tokens":["Gets","the","most","specific","information","attached","to","a","node"]}
{"code_tokens":["\n","public","JexlException","clean","(",")","{","\n","return","clean","(","this",")",";","\n"],"docstring_tokens":["Cleans","a","JexlException","from","any","org.apache.commons.jexl3.internal","stack","trace","element"]}
{"code_tokens":["\n","public","static","String","propertyError","(","final","JexlNode","node,","final","String","pty,","final","boolean","undef",")","{","\n","final","StringBuilder","msg","=","errorAt","(","node",")",";","\n","if","(","undef",")","{","\n","msg",".","append","(","\"unsolvable\"",")",";","\n","}","else","{","\n","msg",".","append","(","\"null","value\"",")",";","\n","}","\n","msg",".","append","(","\"","property","'\"",")",";","\n","msg",".","append","(","pty",")",";","\n","msg",".","append","(","'\\''",")",";","\n","return","msg",".","toString","(",")",";","\n"],"docstring_tokens":["Generates","a","message","for","an","unsolvable","property","error"]}
{"code_tokens":["\n","public","static","String","methodError","(","final","JexlNode","node,","final","String","method,","final","Object[]","args",")","{","\n","final","StringBuilder","msg","=","errorAt","(","node",")",";","\n","msg",".","append","(","\"unsolvable","function/method","'\"",")",";","\n","msg",".","append","(","methodSignature","(","method,","args",")",")",";","\n","msg",".","append","(","'\\''",")",";","\n","return","msg",".","toString","(",")",";","\n"],"docstring_tokens":["Generates","a","message","for","a","unsolvable","method","error"]}
{"code_tokens":["\n","public","static","JexlException","tryFailed","(","final","InvocationTargetException","xinvoke",")","{","\n","final","Throwable","cause","=","xinvoke",".","getCause","(",")",";","\n","return","cause","instanceof","JexlException\n","?","(","JexlException",")","cause\n",":","new","JexlException",".","TryFailed","(","xinvoke",")",";","//","fail\n"],"docstring_tokens":["Wrap","an","invocation","exception"]}
{"code_tokens":["\n","public","static","DuckGetExecutor","discover","(","final","Introspector","is,","final","Class<?>","clazz,","final","Object","identifier",")","{","\n","final","java",".","lang",".","reflect",".","Method","method","=","is",".","getMethod","(","clazz,","\"get\",","makeArgs","(","identifier",")",")",";","\n","return","method","==","null?","null",":","new","DuckGetExecutor","(","clazz,","method,","identifier",")",";","\n"],"docstring_tokens":["Attempts","to","discover","a","DuckGetExecutor"]}
{"code_tokens":["\n","public","static","MapGetExecutor","discover","(","final","Introspector","is,","final","Class<?>","clazz,","final","Object","identifier",")","{","\n","if","(","Map",".","class",".","isAssignableFrom","(","clazz",")",")","{","\n","return","new","MapGetExecutor","(","clazz,","MAP_GET,","identifier",")",";","\n","}","\n","return","null",";","\n"],"docstring_tokens":["Attempts","to","discover","a","MapGetExecutor"]}
{"code_tokens":["\n","public","JexlArithmetic","options","(","final","JexlOptions","options",")","{","\n","if","(","options","!=","null",")","{","\n","final","boolean","ostrict","=","options",".","isStrictArithmetic","(",")",";","\n","MathContext","bigdContext","=","options",".","getMathContext","(",")",";","\n","if","(","bigdContext","==","null",")","{","\n","bigdContext","=","getMathContext","(",")",";","\n","}","\n","int","bigdScale","=","options",".","getMathScale","(",")",";","\n","if","(","bigdScale","==","Integer",".","MIN_VALUE",")","{","\n","bigdScale","=","getMathScale","(",")",";","\n","}","\n","if","(","ostrict","!=","isStrict","(",")","\n","||","bigdScale","!=","getMathScale","(",")","\n","||","bigdContext","!=","getMathContext","(",")",")","{","\n","return","createWithOptions","(","ostrict,","bigdContext,","bigdScale",")",";","\n","}","\n","}","\n","return","this",";","\n"],"docstring_tokens":["Apply","options","to","this","arithmetic","which","eventually","may","create","another","instance"]}
{"code_tokens":["\n","protected","JexlArithmetic","createWithOptions","(","final","boolean","astrict,","final","MathContext","bigdContext,","final","int","bigdScale",")","{","\n","if","(","ctor","!=","null",")","{","\n","try","{","\n","return","ctor",".","newInstance","(","astrict,","bigdContext,","bigdScale",")",";","\n","}","catch","(","IllegalAccessException","|","IllegalArgumentException\n","|","InstantiationException","|","InvocationTargetException","xany",")","{","\n","//","it","was","worth","the","try\n","}","\n","}","\n","return","new","JexlArithmetic","(","astrict,","bigdContext,","bigdScale",")",";","\n"],"docstring_tokens":["Creates","a","JexlArithmetic","instance"]}
{"code_tokens":["\n","protected","BigDecimal","roundBigDecimal","(","final","BigDecimal","number",")","{","\n","final","int","mscale","=","getMathScale","(",")",";","\n","if","(","mscale",">=","0",")","{","\n","return","number",".","setScale","(","mscale,","getMathContext","(",")",".","getRoundingMode","(",")",")",";","\n","}","\n","return","number",";","\n"],"docstring_tokens":["Ensure","a","big","decimal","is","rounded","by","this","arithmetic","scale","and","rounding","mode"]}
{"code_tokens":["\n","protected","void","controlNullOperand","(",")","{","\n","if","(","isStrict","(",")",")","{","\n","throw","new","NullOperand","(",")",";","\n","}","\n"],"docstring_tokens":["Throw","a","NPE","if","arithmetic","is","strict"]}
{"code_tokens":["\n","protected","boolean","isFloatingPointNumber","(","final","Object","val",")","{","\n","if","(","val","instanceof","Float","||","val","instanceof","Double",")","{","\n","return","true",";","\n","}","\n","if","(","val","instanceof","CharSequence",")","{","\n","final","Matcher","m","=","FLOAT_PATTERN",".","matcher","(","(","CharSequence",")","val",")",";","\n","//","first","group","is","decimal,","second","is","exponent",";","\n","//","one","of","them","must","exist","hence","start","(","{","1,2","}",")",">=","0\n","return","m",".","matches","(",")","&&","(","m",".","start","(","1",")",">=","0","||","m",".","start","(","2",")",">=","0",")",";","\n","}","\n","return","false",";","\n"],"docstring_tokens":["Test","if","the","passed","value","is","a","floating","point","number,","i.e"]}
{"code_tokens":["\n","protected","Number","narrowBigDecimal","(","final","Object","lhs,","final","Object","rhs,","final","BigDecimal","bigd",")","{","\n","if","(","isNumberable","(","lhs",")","||","isNumberable","(","rhs",")",")","{","\n","try","{","\n","final","long","l","=","bigd",".","longValueExact","(",")",";","\n","//","coerce","to","int","when","possible","(","int","being","so","often","used","in","method","parms",")","\n","if","(","l","<=","Integer",".","MAX_VALUE","&&","l",">=","Integer",".","MIN_VALUE",")","{","\n","return","(","int",")","l",";","\n","}","\n","return","l",";","\n","}","catch","(","final","ArithmeticException","xa",")","{","\n","//","ignore,","no","exact","value","possible\n","}","\n","}","\n","return","bigd",";","\n"],"docstring_tokens":["Given","a","BigDecimal,","attempt","to","narrow","it","to","an","Integer","or","Long","if","it","fits","if","one","of","the","arguments","is","a","numberable"]}
{"code_tokens":["\n","public","Object","and","(","final","Object","left,","final","Object","right",")","{","\n","final","long","l","=","toLong","(","left",")",";","\n","final","long","r","=","toLong","(","right",")",";","\n","return","l","&","r",";","\n"],"docstring_tokens":["Performs","a","bitwise","and"]}
{"code_tokens":["\n","public","Object","or","(","final","Object","left,","final","Object","right",")","{","\n","final","long","l","=","toLong","(","left",")",";","\n","final","long","r","=","toLong","(","right",")",";","\n","return","l","|","r",";","\n"],"docstring_tokens":["Performs","a","bitwise","or"]}
{"code_tokens":["\n","public","Object","xor","(","final","Object","left,","final","Object","right",")","{","\n","final","long","l","=","toLong","(","left",")",";","\n","final","long","r","=","toLong","(","right",")",";","\n","return","l","^","r",";","\n"],"docstring_tokens":["Performs","a","bitwise","xor"]}
{"code_tokens":["\n","public","Object","not","(","final","Object","val",")","{","\n","return","!toBoolean","(","val",")",";","\n"],"docstring_tokens":["Performs","a","logical","not"]}
{"code_tokens":["\n","private","static","int","append","(","final","StringBuilder","strb,","final","CharSequence","expr,","final","int","position,","final","char","c",")","{","\n","strb",".","append","(","c",")",";","\n","if","(","c","!=","'\"'","&&","c","!=","'\\''",")","{","\n","return","position",";","\n","}","\n","//","read","thru","strings\n","final","int","end","=","expr",".","length","(",")",";","\n","boolean","escape=","false",";","\n","int","index","=","position","+","1",";","\n","for","(",";","index","<","end",";","++index",")","{","\n","final","char","ec","=","expr",".","charAt","(","index",")",";","\n","strb",".","append","(","ec",")",";","\n","if","(","ec","==","'\\\\'",")","{","\n","escape","=","!escape",";","\n","}","else","if","(","escape",")","{","\n","escape","=","false",";","\n","}","else","if","(","ec","==","c",")","{","\n","break",";","\n","}","\n","}","\n","return","index",";","\n"],"docstring_tokens":["Helper","for","expression","dealing","with","embedded","strings"]}
{"code_tokens":["\n","public","void","reset","(",")","{","\n","builder",".","setLength","(","0",")",";","\n","cause","=","null",";","\n","start","=","0",";","\n","end","=","0",";","\n","indentLevel","=","0",";","\n","indent","=","2",";","\n","depth","=","Integer",".","MAX_VALUE",";","\n"],"docstring_tokens":["Resets","this","debugger","state"]}
{"code_tokens":["\n","public","boolean","debug","(","final","JexlExpression","jscript",")","{","\n","if","(","jscript","instanceof","Script",")","{","\n","return","debug","(","(","(","Script",")","jscript",")",".","script",")",";","\n","}","\n","return","false",";","\n"],"docstring_tokens":["Position","the","debugger","on","the","root","of","an","expression"]}
{"code_tokens":["\n","public","boolean","debug","(","final","JexlScript","jscript",")","{","\n","if","(","jscript","instanceof","Script",")","{","\n","return","debug","(","(","(","Script",")","jscript",")",".","script",")",";","\n","}","\n","return","false",";","\n"],"docstring_tokens":["Position","the","debugger","on","the","root","of","a","script"]}
{"code_tokens":["\n","public","Debugger","indentation","(","final","int","level",")","{","\n","indent","=","Math",".","max","(","level,","0",")",";","\n","indentLevel","=","0",";","\n","return","this",";","\n"],"docstring_tokens":["Sets","the","indentation","level"]}
{"code_tokens":["\n","public","Debugger","depth","(","final","int","rdepth",")","{","\n","this",".","depth","=","rdepth",";","\n","return","this",";","\n"],"docstring_tokens":["Sets","this","debugger","relative","maximum","depth"]}
{"code_tokens":["\n","public","Class<?>","getClassByName","(","final","String","className",")","{","\n","try","{","\n","return","Class",".","forName","(","className,","false,","loader",")",";","\n","}","catch","(","final","ClassNotFoundException","xignore",")","{","\n","return","null",";","\n","}","\n"],"docstring_tokens":["Gets","a","class","by","name","through","this","introspector","class","loader"]}
{"code_tokens":["\n","public","Method[]","getMethods","(","final","Class<?>","c,","final","String","methodName",")","{","\n","if","(","c","==","null",")","{","\n","return","null",";","\n","}","\n","final","ClassMap","classMap","=","getMap","(","c",")",";","\n","return","classMap",".","getMethods","(","methodName",")",";","\n"],"docstring_tokens":["Gets","the","array","of","accessible","method","known","for","a","given","class"]}
{"code_tokens":["\n","private","static","boolean","isLoadedBy","(","final","ClassLoader","loader,","final","Class<?>","clazz",")","{","\n","if","(","loader","!=","null",")","{","\n","ClassLoader","cloader","=","clazz",".","getClassLoader","(",")",";","\n","while","(","cloader","!=","null",")","{","\n","if","(","cloader",".","equals","(","loader",")",")","{","\n","return","true",";","\n","}","\n","cloader","=","cloader",".","getParent","(",")",";","\n","}","\n","}","\n","return","false",";","\n"],"docstring_tokens":["Checks","whether","a","class","is","loaded","through","a","given","class","loader","or","one","of","its","ascendants"]}
{"code_tokens":["\n","public","void","setScope","(","final","Scope","theScope",")","{","\n","this",".","scope","=","theScope",";","\n","if","(","theScope","!=","null",")","{","\n","for","(","int","a","=","0",";","a","<","theScope",".","getArgCount","(",")",";","++a",")","{","\n","this",".","declareSymbol","(","a",")",";","\n","}","\n","}","\n"],"docstring_tokens":["Sets","this","script","scope"]}
{"code_tokens":["\n","private","Integer","getSymbol","(","final","String","name,","final","boolean","capture",")","{","\n","Integer","register","=","namedVariables","!=","null","?","namedVariables",".","get","(","name",")",":","null",";","\n","if","(","register","==","null","&&","capture","&&","parent","!=","null",")","{","\n","final","Integer","pr","=","parent",".","getSymbol","(","name,","true",")",";","\n","if","(","pr","!=","null",")","{","\n","if","(","capturedVariables","==","null",")","{","\n","capturedVariables","=","new","LinkedHashMap<Integer,","Integer>","(",")",";","\n","}","\n","if","(","namedVariables","==","null",")","{","\n","namedVariables","=","new","LinkedHashMap<String,","Integer>","(",")",";","\n","}","\n","register","=","namedVariables",".","size","(",")",";","\n","namedVariables",".","put","(","name,","register",")",";","\n","capturedVariables",".","put","(","register,","pr",")",";","\n","}","\n","}","\n","return","register",";","\n"],"docstring_tokens":["Checks","whether","an","identifier","is","a","local","variable","or","argument,","ie","a","symbol"]}
{"code_tokens":["\n","public","boolean","isCapturedSymbol","(","final","int","symbol",")","{","\n","return","capturedVariables","!=","null","&&","capturedVariables",".","containsKey","(","symbol",")",";","\n"],"docstring_tokens":["Checks","whether","a","given","symbol","is","captured"]}
{"code_tokens":["\n","private","boolean","isSymbolDeclared","(","final","JexlNode",".","Info","info,","final","int","symbol",")","{","\n","JexlNode","walk","=","info",".","getNode","(",")",";","\n","while","(","walk","!=","null",")","{","\n","if","(","walk","instanceof","JexlParser",".","LexicalUnit",")","{","\n","final","LexicalScope","scope","=","(","(","JexlParser",".","LexicalUnit",")","walk",")",".","getLexicalScope","(",")",";","\n","if","(","scope","!=","null","&&","scope",".","hasSymbol","(","symbol",")",")","{","\n","return","true",";","\n","}","\n","//","stop","at","first","new","scope","reset,","aka","lambda\n","if","(","walk","instanceof","ASTJexlLambda",")","{","\n","break",";","\n","}","\n","}","\n","walk","=","walk",".","jjtGetParent","(",")",";","\n","}","\n","return","false",";","\n"],"docstring_tokens":["Checks","if","a","symbol","is","defined","in","lexical","scopes"]}
{"code_tokens":["\n","protected","String","checkVariable","(","final","ASTIdentifier","identifier,","final","String","name",")","{","\n","if","(","frame","!=","null",")","{","\n","final","Integer","symbol","=","frame",".","getSymbol","(","name",")",";","\n","if","(","symbol","!=","null",")","{","\n","boolean","declared","=","true",";","\n","if","(","frame",".","isCapturedSymbol","(","symbol",")",")","{","\n","//","captured","are","declared","in","all","cases\n","identifier",".","setCaptured","(","true",")",";","\n","}","else","{","\n","declared","=","block",".","hasSymbol","(","symbol",")",";","\n","//","one","of","the","lexical","blocks","above","should","declare","it\n","if","(","!declared",")","{","\n","for","(","final","LexicalUnit","u",":","blocks",")","{","\n","if","(","u",".","hasSymbol","(","symbol",")",")","{","\n","declared","=","true",";","\n","break",";","\n","}","\n","}","\n","}","\n","if","(","!declared","&&","info","instanceof","JexlNode",".","Info",")","{","\n","declared","=","isSymbolDeclared","(","(","JexlNode",".","Info",")","info,","symbol",")",";","\n","}","\n","}","\n","identifier",".","setSymbol","(","symbol,","name",")",";","\n","if","(","!declared",")","{","\n","identifier",".","setShaded","(","true",")",";","\n","if","(","getFeatures","(",")",".","isLexicalShade","(",")",")","{","\n","//","can","not","reuse","a","local","as","a","global\n","throw","new","JexlException","(","identifier,","name","+","\":","variable","is","not","defined\"",")",";","\n","}","\n","}","\n","}","\n","}","\n","return","name",";","\n"],"docstring_tokens":["Checks","whether","an","identifier","is","a","local","variable","or","argument,","ie","a","symbol,","stored","in","a","register"]}
{"code_tokens":["\n","protected","boolean","allowVariable","(","final","String","image",")","{","\n","final","JexlFeatures","features","=","getFeatures","(",")",";","\n","if","(","!features",".","supportsLocalVar","(",")",")","{","\n","return","false",";","\n","}","\n","if","(","features",".","isReservedName","(","image",")",")","{","\n","return","false",";","\n","}","\n","return","true",";","\n"],"docstring_tokens":["Whether","a","given","variable","name","is","allowed"]}
{"code_tokens":["\n","protected","void","declareVariable","(","final","ASTVar","variable,","final","Token","token",")","{","\n","final","String","name","=","token",".","image",";","\n","if","(","!allowVariable","(","name",")",")","{","\n","throwFeatureException","(","JexlFeatures",".","LOCAL_VAR,","token",")",";","\n","}","\n","if","(","frame","==","null",")","{","\n","frame","=","new","Scope","(","null,","(","String[]",")","null",")",";","\n","}","\n","final","int","symbol","=","frame",".","declareVariable","(","name",")",";","\n","variable",".","setSymbol","(","symbol,","name",")",";","\n","if","(","frame",".","isCapturedSymbol","(","symbol",")",")","{","\n","variable",".","setCaptured","(","true",")",";","\n","}","\n","//","lexical","feature","error\n","if","(","!declareSymbol","(","symbol",")",")","{","\n","if","(","getFeatures","(",")",".","isLexical","(",")",")","{","\n","throw","new","JexlException","(","variable,","name","+","\":","variable","is","already","declared\"",")",";","\n","}","\n","variable",".","setRedefined","(","true",")",";","\n","}","\n"],"docstring_tokens":["Declares","a","local","variable"]}
{"code_tokens":["\n","protected","void","declareParameter","(","final","Token","token",")","{","\n","final","String","identifier","=","token",".","image",";","\n","if","(","!allowVariable","(","identifier",")",")","{","\n","throwFeatureException","(","JexlFeatures",".","LOCAL_VAR,","token",")",";","\n","}","\n","if","(","frame","==","null",")","{","\n","frame","=","new","Scope","(","null,","(","String[]",")","null",")",";","\n","}","\n","final","int","symbol","=","frame",".","declareParameter","(","identifier",")",";","\n","//","not","sure","how","declaring","a","parameter","could","fail",".",".",".","\n","//","lexical","feature","error\n","if","(","!block",".","declareSymbol","(","symbol",")","&&","getFeatures","(",")",".","isLexical","(",")",")","{","\n","final","JexlInfo","xinfo","=","info",".","at","(","token",".","beginLine,","token",".","beginColumn",")",";","\n","throw","new","JexlException","(","xinfo,","identifier","+","\":","variable","is","already","declared\",","null",")",";","\n","}","\n"],"docstring_tokens":["Declares","a","local","parameter"]}
{"code_tokens":["\n","protected","void","jjtreeOpenNodeScope","(","final","JexlNode","node",")","{","\n","//","nothing\n"],"docstring_tokens":["Called","by","parser","at","beginning","of","node","construction"]}
{"code_tokens":["\n","//","CSOFF:","DoubleCheckedLocking\n","protected","final","Introspector","base","(",")","{","\n","Introspector","intro","=","ref",".","get","(",")",";","\n","if","(","intro","==","null",")","{","\n","//","double","checked","locking","is","ok","(","fixed","by","Java","5","memory","model",")",".","\n","synchronized","(","this",")","{","\n","intro","=","ref",".","get","(",")",";","\n","if","(","intro","==","null",")","{","\n","intro","=","new","Introspector","(","logger,","loader",".","get","(",")",",","permissions",")",";","\n","ref","=","new","SoftReference<Introspector>","(","intro",")",";","\n","loader","=","new","SoftReference<ClassLoader>","(","intro",".","getLoader","(",")",")",";","\n","version",".","incrementAndGet","(",")",";","\n","}","\n","}","\n","}","\n","return","intro",";","\n"],"docstring_tokens":["Gets","the","current","introspector","base"]}
{"code_tokens":["\n","@Override\n","public","String","getMessage","(",")","{","\n","return","(","\"Lexical","error","at","line","\"\n","+","line","+","\",","column","\"\n","+","column","+","\"",".","Encountered:","\"\n","+","(","eof","?","\"<EOF>","\"\n",":","(","StringParser",".","escapeString","(","String",".","valueOf","(","current",")",",","'\"'",")",")","+","\"","(","\"","+","(","int",")","current","+","\"",")",",","\"",")","\n","+","\"after",":","\"","+","StringParser",".","escapeString","(","after,","'\"'",")",")",";","\n"],"docstring_tokens":["Returns","a","detailed","message","for","the","Error","when","it","is","thrown","by","the","token","manager","to","indicate","a","lexical","error"]}
{"code_tokens":["\n","private","static","ReferenceHandler","discoverHandler","(","Object","ref",")","{","\n","//","optional","support\n","if","(","ref","instanceof","Optional<?>",")","{","\n","return","ReferenceUberspect::handleOptional",";","\n","}","\n","//","atomic","ref\n","if","(","ref","instanceof","AtomicReference<?>",")","{","\n","return","ReferenceUberspect::handleAtomic",";","\n","}","\n","//","a","reference\n","if","(","ref","instanceof","Reference<?>",")","{","\n","return","ReferenceUberspect::handleReference",";","\n","}","\n","//","delegate\n","return","null",";","\n"],"docstring_tokens":["Find","a","reference","handler","for","a","given","instance"]}
{"code_tokens":["\n","static","Object","handleAtomic","(","Object","ref",")","{","\n","Object","obj","=","(","(","AtomicReference<?>",")","ref",")",".","get","(",")",";","\n","return","obj","==","null?","ref",":","obj",";","\n"],"docstring_tokens":["Cast","ref","to","atomic","reference,","call","get"]}
{"code_tokens":["\n","public","final","JexlScript","createScript","(","final","String","scriptText",")","{","\n","return","createScript","(","null,","null,","scriptText,","(","String[]",")","null",")",";","\n"],"docstring_tokens":["Creates","a","Script","from","a","String","containing","valid","JEXL","syntax"]}
{"code_tokens":["\n","public","final","JexlScript","createScript","(","final","File","scriptFile",")","{","\n","return","createScript","(","null,","null,","readSource","(","scriptFile",")",",","(","String[]",")","null",")",";","\n"],"docstring_tokens":["Creates","a","Script","from","a","File","containing","valid","JEXL","syntax"]}
{"code_tokens":["\n","public","final","JexlScript","createScript","(","final","URL","scriptUrl",")","{","\n","return","createScript","(","null,","readSource","(","scriptUrl",")",",","(","String[]",")","null",")",";","\n"],"docstring_tokens":["Creates","a","Script","from","a","URL","containing","valid","JEXL","syntax"]}
{"code_tokens":["\n","protected","String","readSource","(","final","File","file",")","{","\n","if","(","file","==","null",")","{","\n","throw","new","NullPointerException","(","\"source","file","is","null\"",")",";","\n","}","\n","try","(","BufferedReader","reader","=","new","BufferedReader","(","new","InputStreamReader","(","new","FileInputStream","(","file",")",",\n","getCharset","(",")",")",")",")","{","\n","return","toString","(","reader",")",";","\n","}","catch","(","final","IOException","xio",")","{","\n","throw","new","JexlException","(","createInfo","(","file",".","toString","(",")",",","1,","1",")",",","\"could","not","read","source","File\",","xio",")",";","\n","}","\n"],"docstring_tokens":["Reads","a","JEXL","source","from","a","File"]}
{"code_tokens":["\n","protected","String","readSource","(","final","URL","url",")","{","\n","if","(","url","==","null",")","{","\n","throw","new","NullPointerException","(","\"source","URL","is","null\"",")",";","\n","}","\n","try","(","BufferedReader","reader","=","new","BufferedReader","(","new","InputStreamReader","(","url",".","openStream","(",")",",","getCharset","(",")",")",")",")","{","\n","return","toString","(","reader",")",";","\n","}","catch","(","final","IOException","xio",")","{","\n","throw","new","JexlException","(","createInfo","(","url",".","toString","(",")",",","1,","1",")",",","\"could","not","read","source","URL\",","xio",")",";","\n","}","\n"],"docstring_tokens":["Reads","a","JEXL","source","from","an","URL"]}
{"code_tokens":["\n","public","boolean","isSafe","(",")","{","\n","return","false",";","\n"],"docstring_tokens":["Whether","this","is","a","dot","or","a","question-mark-dot","aka","safe-navigation","access"]}
{"code_tokens":["\n","public","static","LongRange","create","(","final","long","from,","final","long","to",")","{","\n","if","(","from","<=","to",")","{","\n","return","new","LongRange",".","Ascending","(","from,","to",")",";","\n","}","\n","return","new","LongRange",".","Descending","(","to,","from",")",";","\n"],"docstring_tokens":["Creates","a","range,","ascending","or","descending","depending","on","boundaries","order"]}
{"code_tokens":["\n","private","static","Scope","scopeOf","(","final","JexlNode",".","Info","info",")","{","\n","JexlNode","walk","=","info",".","getNode","(",")",";","\n","while","(","walk","!=","null",")","{","\n","if","(","walk","instanceof","ASTJexlScript",")","{","\n","return","(","(","ASTJexlScript",")","walk",")",".","getScope","(",")",";","\n","}","\n","walk","=","walk",".","jjtGetParent","(",")",";","\n","}","\n","return","null",";","\n"],"docstring_tokens":["Gets","the","scope","from","an","info"]}
{"code_tokens":["\n","public","boolean","addSymbol","(","final","int","symbol",")","{","\n","if","(","symbol","<","LONGBITS",")","{","\n","if","(","(","symbols","&","(","1L","<<","symbol",")",")","!=","0L",")","{","\n","return","false",";","\n","}","\n","symbols","|=","(","1L","<<","symbol",")",";","\n","}","else","{","\n","final","int","s","=","symbol","-","LONGBITS",";","\n","final","BitSet","ms","=","moreSymbols","(",")",";","\n","if","(","ms",".","get","(","s",")",")","{","\n","return","false",";","\n","}","\n","ms",".","set","(","s,","true",")",";","\n","}","\n","return","true",";","\n"],"docstring_tokens":["Adds","a","symbol","in","this","scope"]}
{"code_tokens":["\n","public","static","Method","cacheMiss","(",")","{","\n","try","{","\n","return","ClassMap",".","class",".","getMethod","(","\"cacheMiss\"",")",";","\n","}","catch","(","final","Exception","xio",")","{","\n","//","this","really","can't","make","an","error",".",".",".","\n","return","null",";","\n","}","\n"],"docstring_tokens":["A","method","that","returns","itself","used","as","a","marker","for","cache","miss,","allows","the","underlying","cache","map","to","be","strongly","typed"]}
{"code_tokens":["\n","Method[]","getMethods","(","final","String","methodName",")","{","\n","final","Method[]","lm","=","byName",".","get","(","methodName",")",";","\n","if","(","lm","!=","null","&&","lm",".","length",">","0",")","{","\n","return","lm",".","clone","(",")",";","\n","}","\n","return","null",";","\n"],"docstring_tokens":["Gets","all","the","methods","with","a","given","name","from","this","map"]}
{"code_tokens":["\n","public","String","read","(","final","Class<?>","clazz,","final","String","name",")","{","\n","return","get","(","clazz",")",".","read","(",")",".","get","(","name",")",";","\n"],"docstring_tokens":["Gets","the","read","permission","value","for","a","given","property","of","a","class"]}
{"code_tokens":["\n","public","String","write","(","final","Class<?>","clazz,","final","String","name",")","{","\n","return","get","(","clazz",")",".","write","(",")",".","get","(","name",")",";","\n"],"docstring_tokens":["Gets","the","write","permission","value","for","a","given","property","of","a","class"]}
{"code_tokens":["\n","public","String","execute","(","final","Class<?>","clazz,","final","String","name",")","{","\n","final","String","m","=","get","(","clazz",")",".","execute","(",")",".","get","(","name",")",";","\n","return","\"\"",".","equals","(","name",")","&&","m","!=","null?","clazz",".","getName","(",")",":","m",";","\n"],"docstring_tokens":["Gets","the","execute","permission","value","for","a","given","method","of","a","class"]}
{"code_tokens":["\n","boolean","has","(","final","int","s",")","{","\n","return","s",">=","0","&&","s","<","stack",".","length","&&","stack[s]","!=","Scope",".","UNDECLARED",";","\n"],"docstring_tokens":["Whether","this","frame","defines","a","symbol,","ie","declared","it","and","assigned","it","a","value"]}
{"code_tokens":["\n","Frame","assign","(","final","Object",".",".",".","values",")","{","\n","if","(","stack","!=","null",")","{","\n","final","int","nparm","=","scope",".","getArgCount","(",")",";","\n","final","Object[]","copy","=","stack",".","clone","(",")",";","\n","int","ncopy","=","0",";","\n","if","(","values","!=","null","&&","values",".","length",">","0",")","{","\n","ncopy","=","Math",".","min","(","nparm","-","curried,","Math",".","min","(","nparm,","values",".","length",")",")",";","\n","System",".","arraycopy","(","values,","0,","copy,","curried,","ncopy",")",";","\n","}","\n","//","unbound","parameters","are","defined","as","null\n","Arrays",".","fill","(","copy,","curried","+","ncopy,","nparm,","null",")",";","\n","return","new","Frame","(","scope,","copy,","curried","+","ncopy",")",";","\n","}","\n","return","this",";","\n"],"docstring_tokens":["Assign","values","to","this","frame"]}
{"code_tokens":["\n","public","static","JexlPropertyGet","discover","(","final","Introspector","is,","final","Class<?>","clazz,","final","String","identifier",")","{","\n","if","(","identifier","!=","null",")","{","\n","final","Field","field","=","is",".","getField","(","clazz,","identifier",")",";","\n","if","(","field","!=","null",")","{","\n","return","new","FieldGetExecutor","(","field",")",";","\n","}","\n","}","\n","return","null",";","\n"],"docstring_tokens":["Attempts","to","discover","a","FieldGetExecutor"]}
{"code_tokens":["\n","public","String","debugString","(",")","{","\n","final","StringBuilder","builder","=","new","StringBuilder","(","method",")",";","\n","builder",".","append","(","'","(","'",")",";","\n","for","(","int","i","=","0",";","i","<","params",".","length",";","i++",")","{","\n","if","(","i",">","0",")","{","\n","builder",".","append","(","\",","\"",")",";","\n","}","\n","builder",".","append","(","Void",".","class","==","params[i]","?","\"null\"",":","params[i]",".","getName","(",")",")",";","\n","}","\n","builder",".","append","(","'",")","'",")",";","\n","return","builder",".","toString","(",")",";","\n"],"docstring_tokens":["Outputs","a","human","readable","debug","representation","of","this","key"]}
{"code_tokens":["\n","public","JexlInfo","jexlInfo","(",")","{","\n","JexlInfo","info","=","null",";","\n","JexlNode","node","=","this",";","\n","while","(","node","!=","null",")","{","\n","if","(","node",".","jjtGetValue","(",")","instanceof","JexlInfo",")","{","\n","info","=","(","JexlInfo",")","node",".","jjtGetValue","(",")",";","\n","break",";","\n","}","\n","node","=","node",".","jjtGetParent","(",")",";","\n","}","\n","if","(","lc",">=","0",")","{","\n","final","int","c","=","lc","&","0xfff",";","\n","final","int","l","=","lc",">>","0xc",";","\n","//","at","least","an","info","with","line/column","number\n","return","info","!=","null?","info",".","at","(","info",".","getLine","(",")","+","l","-","1,","c",")",":","new","JexlInfo","(","null,","l,","c",")",";","\n","}","\n","//","weird","though",";","no","jjSetFirstToken","(",".",".",".",")","ever","called?\n","return","info",";","\n"],"docstring_tokens":["Gets","the","associated","JexlInfo","instance"]}
{"code_tokens":["\n","public","boolean","isOperator","(",")","{","\n","return","OperatorController",".","INSTANCE",".","control","(","this,","Boolean",".","TRUE",")",";","\n"],"docstring_tokens":["Checks","whether","this","node","is","an","operator"]}
{"code_tokens":["\n","public","boolean","isConstant","(",")","{","\n","return","isConstant","(","this","instanceof","JexlNode",".","Constant<?>",")",";","\n"],"docstring_tokens":["Whether","this","node","is","a","constant","node","Its","value","can","not","change","after","the","first","evaluation","and","can","be","cached","indefinitely"]}
{"code_tokens":["\n","public","boolean","isLeftValue","(",")","{","\n","JexlNode","walk","=","this",";","\n","do","{","\n","if","(","walk","instanceof","ASTIdentifier\n","||","walk","instanceof","ASTIdentifierAccess\n","||","walk","instanceof","ASTArrayAccess",")","{","\n","return","true",";","\n","}","\n","final","int","nc","=","walk",".","jjtGetNumChildren","(",")","-","1",";","\n","if","(","nc","<","0",")","{","\n","return","walk",".","jjtGetParent","(",")","instanceof","ASTReference",";","\n","}","\n","walk","=","walk",".","jjtGetChild","(","nc",")",";","\n","}","while","(","walk","!=","null",")",";","\n","return","false",";","\n"],"docstring_tokens":["Whether","this","node","is","a","left","value"]}
{"code_tokens":["\n","public","boolean","isLocalVar","(",")","{","\n","return","this","instanceof","ASTIdentifier","&&","(","(","ASTIdentifier",")","this",")",".","getSymbol","(",")",">=","0",";","\n"],"docstring_tokens":["Whether","this","node","is","a","local","variable"]}
{"code_tokens":["\n","public","boolean","isSafeLhs","(","final","boolean","safe",")","{","\n","if","(","this","instanceof","ASTReference",")","{","\n","return","jjtGetChild","(","0",")",".","isSafeLhs","(","safe",")",";","\n","}","\n","if","(","this","instanceof","ASTMethodNode",")","{","\n","if","(","this",".","jjtGetNumChildren","(",")",">","1\n","&&","this",".","jjtGetChild","(","0",")","instanceof","ASTIdentifierAccess\n","&&","(","(","(","ASTIdentifierAccess",")","this",".","jjtGetChild","(","0",")",")",".","isSafe","(",")","||","safe",")",")","{","\n","return","true",";","\n","}","\n","}","\n","final","JexlNode","parent","=","this",".","jjtGetParent","(",")",";","\n","if","(","parent","==","null",")","{","\n","return","false",";","\n","}","\n","//","find","this","node","in","its","parent\n","final","int","nsiblings","=","parent",".","jjtGetNumChildren","(",")",";","\n","int","rhs","=","-1",";","\n","for","(","int","s","=","0",";","s","<","nsiblings",";","++s",")","{","\n","final","JexlNode","sibling","=","parent",".","jjtGetChild","(","s",")",";","\n","if","(","sibling","==","this",")","{","\n","//","the","next","chid","offset","of","this","nodes","parent\n","rhs","=","s","+","1",";","\n","break",";","\n","}","\n","}","\n","//","seek","next","child","in","parent\n","if","(","rhs",">=","0","&&","rhs","<","nsiblings",")","{","\n","JexlNode","rsibling","=","parent",".","jjtGetChild","(","rhs",")",";","\n","if","(","rsibling","instanceof","ASTMethodNode","||","rsibling","instanceof","ASTFunctionNode",")","{","\n","rsibling","=","rsibling",".","jjtGetChild","(","0",")",";","\n","}","\n","if","(","rsibling","instanceof","ASTIdentifierAccess\n","&&","(","(","(","ASTIdentifierAccess",")","rsibling",")",".","isSafe","(",")","||","safe",")",")","{","\n","return","true",";","\n","}","\n","if","(","rsibling","instanceof","ASTArrayAccess",")","{","\n","return","safe",";","\n","}","\n","}","\n","return","false",";","\n"],"docstring_tokens":["Whether","this","node","is","the","left-hand","side","of","a","safe","access","identifier","as","in"]}
{"code_tokens":["\n","public","static","JexlPropertySet","discover","(","final","Introspector","is,\n","final","Class<?>","clazz,\n","final","String","identifier,\n","final","Object","value",")","{","\n","if","(","identifier","!=","null",")","{","\n","final","Field","field","=","is",".","getField","(","clazz,","identifier",")",";","\n","if","(","field","!=","null\n","&&","!Modifier",".","isFinal","(","field",".","getModifiers","(",")",")","\n","&&","(","value","==","null","||","MethodKey",".","isInvocationConvertible","(","field",".","getType","(",")",",","value",".","getClass","(",")",",","false",")",")",")","{","\n","return","new","FieldSetExecutor","(","field",")",";","\n","}","\n","}","\n","return","null",";","\n"],"docstring_tokens":["Attempts","to","discover","a","FieldSetExecutor"]}
{"code_tokens":["\n","public","boolean","debug","(","final","JxltEngine",".","Expression","je",")","{","\n","if","(","je","instanceof","TemplateExpression",")","{","\n","final","TemplateEngine",".","TemplateExpression","te","=","(","TemplateEngine",".","TemplateExpression",")","je",";","\n","return","visit","(","te,","this",")","!=","null",";","\n","}","\n","return","false",";","\n"],"docstring_tokens":["Position","the","debugger","on","the","root","of","a","template","expression"]}
{"code_tokens":["\n","public","boolean","debug","(","final","JxltEngine",".","Template","jt",")","{","\n","if","(","!","(","jt","instanceof","TemplateScript",")",")","{","\n","return","false",";","\n","}","\n","final","TemplateScript","ts","=","(","TemplateScript",")","jt",";","\n","//","ensure","expr","is","not","null","for","templates\n","this",".","exprs","=","ts",".","getExpressions","(",")","==","null?","new","TemplateExpression[0]",":","ts",".","getExpressions","(",")",";","\n","this",".","script","=","ts",".","getScript","(",")",";","\n","start","=","0",";","\n","end","=","0",";","\n","indentLevel","=","0",";","\n","builder",".","setLength","(","0",")",";","\n","cause","=","script",";","\n","final","int","num","=","script",".","jjtGetNumChildren","(",")",";","\n","for","(","int","i","=","0",";","i","<","num",";","++i",")","{","\n","final","JexlNode","child","=","script",".","jjtGetChild","(","i",")",";","\n","acceptStatement","(","child,","null",")",";","\n","}","\n","//","the","last","line\n","if","(","builder",".","length","(",")",">","0","&&","builder",".","charAt","(","builder",".","length","(",")","-","1",")","!=","'\\n'",")","{","\n","builder",".","append","(","'\\n'",")",";","\n","}","\n","end","=","builder",".","length","(",")",";","\n","return","end",">","0",";","\n"],"docstring_tokens":["Position","the","debugger","on","the","root","of","a","template","script"]}
{"code_tokens":["\n","private","Object","visit","(","final","TemplateExpression","expr,","final","Object","data",")","{","\n","Object","r",";","\n","switch","(","expr",".","getType","(",")",")","{","\n","case","CONSTANT:\n","r","=","visit","(","(","ConstantExpression",")","expr,","data",")",";","\n","break",";","\n","case","IMMEDIATE:\n","r","=","visit","(","(","ImmediateExpression",")","expr,","data",")",";","\n","break",";","\n","case","DEFERRED:\n","r","=","visit","(","(","DeferredExpression",")","expr,","data",")",";","\n","break",";","\n","case","NESTED:\n","r","=","visit","(","(","NestedExpression",")","expr,","data",")",";","\n","break",";","\n","case","COMPOSITE:\n","r","=","visit","(","(","CompositeExpression",")","expr,","data",")",";","\n","break",";","\n","default:\n","r","=","null",";","\n","}","\n","return","r",";","\n"],"docstring_tokens":["Visit","a","template","expression"]}
{"code_tokens":["\n","public","LexicalFrame","pop","(",")","{","\n","//","undefine","all","symbols\n","clearSymbols","(","s","->","frame",".","set","(","s,","Scope",".","UNDEFINED",")",")",";","\n","//","restore","values","of","captured","symbols","that","were","overwritten\n","if","(","stack","!=","null",")","{","\n","while","(","!stack",".","isEmpty","(",")",")","{","\n","Object","value","=","stack",".","pop","(",")",";","\n","if","(","value","==","Scope",".","UNDECLARED",")","{","\n","value","=","Scope",".","UNDEFINED",";","\n","}","else","if","(","value","==","this",")","{","\n","value","=","null",";","\n","}","\n","final","int","symbol","=","(","Integer",")","stack",".","pop","(",")",";","\n","frame",".","set","(","symbol,","value",")",";","\n","}","\n","}","\n","return","previous",";","\n"],"docstring_tokens":["Pops","back","values","and","lexical","frame"]}
{"code_tokens":["\n","private","boolean","isArrayReferenceLiteral","(","final","JexlNode","child",")","{","\n","if","(","child","instanceof","ASTStringLiteral",")","{","\n","return","true",";","\n","}","\n","if","(","child","instanceof","ASTNumberLiteral","&&","(","(","ASTNumberLiteral",")","child",")",".","isInteger","(",")",")","{","\n","return","true",";","\n","}","\n","return","false",";","\n"],"docstring_tokens":["Checks","whether","a","node","is","a","string","or","an","integer"]}
{"code_tokens":["\n","public","void","assertExpression","(","final","String","expression,","final","Object","expected",")","throws","Exception","{","\n","final","JexlScript","exp","=","engine",".","createScript","(","expression",")",";","\n","final","Object","value","=","exp",".","execute","(","context",")",";","\n","if","(","expected","instanceof","BigDecimal",")","{","\n","final","JexlArithmetic","jexla","=","engine",".","getArithmetic","(",")",";","\n","Assert",".","assertEquals","(","\"expression:","\"","+","expression,","0,\n","(","(","BigDecimal",")","expected",")",".","compareTo","(","jexla",".","toBigDecimal","(","value",")",")",")",";","\n","}","\n","if","(","expected","!=","null","&&","value","!=","null",")","{","\n","if","(","expected",".","getClass","(",")",".","isArray","(",")","&&","value",".","getClass","(",")",".","isArray","(",")",")","{","\n","final","int","esz","=","Array",".","getLength","(","expected",")",";","\n","final","int","vsz","=","Array",".","getLength","(","value",")",";","\n","final","String","report","=","\"expression:","\"","+","expression",";","\n","Assert",".","assertEquals","(","report","+","\",","array","size\",","esz,","vsz",")",";","\n","for","(","int","i","=","0",";","i","<","vsz",";","++i",")","{","\n","Assert",".","assertEquals","(","report","+","\",","value@[]\"","+","i,","Array",".","get","(","expected,","i",")",",","Array",".","get","(","value,","i",")",")",";","\n","}","\n","}","else","{","\n","Assert",".","assertEquals","(","\"expression:","\"","+","expression","+","\",","\"\n","+","expected",".","getClass","(",")",".","getSimpleName","(",")","\n","+","\"","?=","\"\n","+","value",".","getClass","(",")",".","getSimpleName","(",")",",\n","expected,","value",")",";","\n","}","\n","}","else","{","\n","Assert",".","assertEquals","(","\"expression:","\"","+","expression,","expected,","value",")",";","\n","}","\n"],"docstring_tokens":["Performs","an","assertion","that","the","value","of","the","given","JEXL","expression","evaluates","to","the","given","expected","value"]}
{"code_tokens":["\n","public","static","ListSetExecutor","discover","(","final","Introspector","is,\n","final","Class<?>","clazz,\n","final","Object","identifier,\n","final","Object","value",")","{","\n","final","Integer","index","=","castInteger","(","identifier",")",";","\n","if","(","index","!=","null",")","{","\n","if","(","clazz",".","isArray","(",")",")","{","\n","//","we","could","verify","if","the","call","can","be","performed","but","it","does","not","change\n","//","the","fact","we","would","fail",".",".",".","\n","//","Class<?>","formal","=","clazz",".","getComponentType","(",")",";","\n","//","Class<?>","actual","=","value","==","null?","Object",".","class",":","value",".","getClass","(",")",";","\n","//","if","(","IntrospectionUtils",".","isMethodInvocationConvertible","(","formal,","actual,","false",")",")","{","\n","return","new","ListSetExecutor","(","clazz,","ARRAY_SET,","index",")",";","\n","//","}","\n","}","\n","if","(","List",".","class",".","isAssignableFrom","(","clazz",")",")","{","\n","return","new","ListSetExecutor","(","clazz,","LIST_SET,","index",")",";","\n","}","\n","}","\n","return","null",";","\n"],"docstring_tokens":["Attempts","to","discover","a","ListSetExecutor"]}
{"code_tokens":["\n","protected","Frame","createFrame","(","final","Object[]","args",")","{","\n","return","script",".","createFrame","(","args",")",";","\n"],"docstring_tokens":["Creates","this","script","frame","for","evaluation"]}
{"code_tokens":["\n","protected","Interpreter","createInterpreter","(","final","JexlContext","context,","final","Frame","frame",")","{","\n","final","JexlOptions","opts","=","jexl",".","options","(","script,","context",")",";","\n","return","jexl",".","createInterpreter","(","context,","frame,","opts",")",";","\n"],"docstring_tokens":["Creates","this","script","interpreter"]}
{"code_tokens":["\n","@Override\n","public","Map<String,","Object>","getPragmas","(",")","{","\n","return","script",".","getPragmas","(",")",";","\n"],"docstring_tokens":["Get","this","script","pragmas","Pragma","keys","are","ant-ish","variables,","their","values","are","scalar","literals"]}
{"code_tokens":["\n","@Override\n","public","Object","next","(",")","{","\n","if","(","pos","<","size",")","{","\n","return","Array",".","get","(","array,","pos++",")",";","\n","}","\n","//","we","screwed","up",".",".",".","\n","throw","new","NoSuchElementException","(","\"No","more","elements:","\"","+","pos\n","+","\"","/","\"","+","size",")",";","\n"],"docstring_tokens":["Move","to","next","element","in","the","array"]}
{"code_tokens":["\n","@Override\n","public","boolean","hasNext","(",")","{","\n","return","(","pos","<","size",")",";","\n"],"docstring_tokens":["Check","to","see","if","there","is","another","element","in","the","array"]}
{"code_tokens":["\n","@Override\n","public","void","remove","(",")","{","\n","throw","new","UnsupportedOperationException","(",")",";","\n"],"docstring_tokens":["No","op--merely","added","to","satify","the","Iterator","interface"]}
{"code_tokens":["\n","public","int","size","(",")","{","\n","return","size",";","\n"],"docstring_tokens":["Returns","the","cache","size"]}
{"code_tokens":["\n","public","V","get","(","final","K","key",")","{","\n","lock",".","readLock","(",")",".","lock","(",")",";","\n","try","{","\n","final","Map<K,","V>","map","=","ref","!=","null","?","ref",".","get","(",")",":","null",";","\n","return","map","!=","null","?","map",".","get","(","key",")",":","null",";","\n","}","finally","{","\n","lock",".","readLock","(",")",".","unlock","(",")",";","\n","}","\n"],"docstring_tokens":["Gets","a","value","from","cache"]}
{"code_tokens":["\n","public","void","put","(","final","K","key,","final","V","script",")","{","\n","lock",".","writeLock","(",")",".","lock","(",")",";","\n","try","{","\n","Map<K,","V>","map","=","ref","!=","null","?","ref",".","get","(",")",":","null",";","\n","if","(","map","==","null",")","{","\n","map","=","createCache","(","size",")",";","\n","ref","=","new","SoftReference<Map<K,","V>>","(","map",")",";","\n","}","\n","map",".","put","(","key,","script",")",";","\n","}","finally","{","\n","lock",".","writeLock","(",")",".","unlock","(",")",";","\n","}","\n"],"docstring_tokens":["Puts","a","value","in","cache"]}
{"code_tokens":["\n","public","List<Map",".","Entry<K,","V>>","entries","(",")","{","\n","lock",".","readLock","(",")",".","lock","(",")",";","\n","try","{","\n","final","Map<K,","V>","map","=","ref","!=","null","?","ref",".","get","(",")",":","null",";","\n","if","(","map","==","null",")","{","\n","return","Collections",".","emptyList","(",")",";","\n","}","\n","final","Set<Map",".","Entry<K,","V>>","set","=","map",".","entrySet","(",")",";","\n","final","List<Map",".","Entry<K,","V>>","entries","=","new","ArrayList<Map",".","Entry<K,","V>>","(","set",".","size","(",")",")",";","\n","for","(","final","Map",".","Entry<K,","V>","e",":","set",")","{","\n","entries",".","add","(","new","SoftCacheEntry<K,","V>","(","e",")",")",";","\n","}","\n","return","entries",";","\n","}","finally","{","\n","lock",".","readLock","(",")",".","unlock","(",")",";","\n","}","\n"],"docstring_tokens":["Produces","the","cache","entry","set"]}
{"code_tokens":["\n","public","boolean","isSafe","(",")","{","\n","return","isSet","(","SAFE,","flags",")",";","\n"],"docstring_tokens":["Checks","whether","the","engine","considers","null","in","navigation","expression","as","errors","during","evaluation"]}
{"code_tokens":["\n","public","boolean","isSilent","(",")","{","\n","return","isSet","(","SILENT,","flags",")",";","\n"],"docstring_tokens":["Checks","whether","the","engine","will","throw","a","JexlException","when","an","error","is","encountered","during","evaluation"]}
{"code_tokens":["\n","public","static","ConstructorMethod","discover","(","final","Introspector","is,","final","Object","ctorHandle,","final","Object",".",".",".","args",")","{","\n","String","className",";","\n","Class<?>","clazz","=","null",";","\n","if","(","ctorHandle","instanceof","Class<?>",")","{","\n","clazz","=","(","Class<?>",")","ctorHandle",";","\n","className","=","clazz",".","getName","(",")",";","\n","}","else","if","(","ctorHandle","!=","null",")","{","\n","className","=","ctorHandle",".","toString","(",")",";","\n","}","else","{","\n","return","null",";","\n","}","\n","final","Constructor<?>","ctor","=","is",".","getConstructor","(","clazz,","new","MethodKey","(","className,","args",")",")",";","\n","if","(","ctor","!=","null",")","{","\n","return","new","ConstructorMethod","(","ctor",")",";","\n","}","\n","return","null",";","\n"],"docstring_tokens":["Discovers","a","class","constructor","and","wrap","it","as","a","JexlMethod"]}
{"code_tokens":["\n","public","JexlBuilder","arithmetic","(","final","JexlArithmetic","a",")","{","\n","this",".","arithmetic","=","a",";","\n","options",".","setStrictArithmetic","(","a",".","isStrict","(",")",")",";","\n","options",".","setMathContext","(","a",".","getMathContext","(",")",")",";","\n","options",".","setMathScale","(","a",".","getMathScale","(",")",")",";","\n","return","this",";","\n"],"docstring_tokens":["Sets","the","JexlArithmetic","instance","the","engine","will","use"]}
{"code_tokens":["\n","public","JexlBuilder","sandbox","(","final","JexlSandbox","box",")","{","\n","this",".","sandbox","=","box",";","\n","return","this",";","\n"],"docstring_tokens":["Sets","the","sandbox","the","engine","will","use"]}
{"code_tokens":["\n","@Deprecated\n","public","JexlBuilder","loader","(","final","Charset","arg",")","{","\n","return","charset","(","arg",")",";","\n"],"docstring_tokens":["Sets","the","charset","to","use"]}
{"code_tokens":["\n","public","JexlBuilder","antish","(","final","boolean","flag",")","{","\n","options",".","setAntish","(","flag",")",";","\n","return","this",";","\n"],"docstring_tokens":["Sets","whether","the","engine","will","resolve","antish","variable","names"]}
{"code_tokens":["\n","public","JexlBuilder","lexical","(","final","boolean","flag",")","{","\n","options",".","setLexical","(","flag",")",";","\n","return","this",";","\n"],"docstring_tokens":["Sets","whether","the","engine","is","in","lexical","mode"]}
{"code_tokens":["\n","public","JexlBuilder","lexicalShade","(","final","boolean","flag",")","{","\n","options",".","setLexicalShade","(","flag",")",";","\n","return","this",";","\n"],"docstring_tokens":["Sets","whether","the","engine","is","in","lexical","shading","mode"]}
{"code_tokens":["\n","public","JexlBuilder","silent","(","final","boolean","flag",")","{","\n","options",".","setSilent","(","flag",")",";","\n","return","this",";","\n"],"docstring_tokens":["Sets","whether","the","engine","will","throw","JexlException","during","evaluation","when","an","error","is","triggered"]}
{"code_tokens":["\n","public","JexlFeatures","reservedNames","(","final","Collection<String>","names",")","{","\n","if","(","names","==","null","||","names",".","isEmpty","(",")",")","{","\n","reservedNames","=","Collections",".","emptySet","(",")",";","\n","}","else","{","\n","reservedNames","=","Collections",".","unmodifiableSet","(","new","TreeSet<String>","(","names",")",")",";","\n","}","\n","setFeature","(","RESERVED,","!reservedNames",".","isEmpty","(",")",")",";","\n","return","this",";","\n"],"docstring_tokens":["Sets","a","collection","of","reserved","names","precluding","those","to","be","used","as","local","variables","or","parameter","names"]}
{"code_tokens":["\n","public","JexlFeatures","lexical","(","final","boolean","flag",")","{","\n","setFeature","(","LEXICAL,","flag",")",";","\n","return","this",";","\n"],"docstring_tokens":["Sets","whether","syntactic","lexical","mode","is","enabled"]}
{"code_tokens":["\n","public","JexlFeatures","lexicalShade","(","final","boolean","flag",")","{","\n","setFeature","(","LEXICAL_SHADE,","flag",")",";","\n","if","(","flag",")","{","\n","setFeature","(","LEXICAL,","true",")",";","\n","}","\n","return","this",";","\n"],"docstring_tokens":["Sets","whether","syntactic","lexical","shade","is","enabled"]}
{"code_tokens":["\n","public","JexlInfo","at","(","final","int","l,","final","int","c",")","{","\n","return","new","JexlInfo","(","name,","l,","c",")",";","\n"],"docstring_tokens":["Creates","info","reusing","the","name"]}
{"code_tokens":["\n","public","static","JexlInfo","from","(","final","JexlScript","script",")","{","\n","return","script","instanceof","Script?","(","(","Script",")","script",")",".","getInfo","(",")",":","null",";","\n"],"docstring_tokens":["Gets","the","info","from","a","script"]}
{"code_tokens":["\n","private","static","void","flatten","(","final","List<JexlNode>","list,","final","JexlNode","node",")","{","\n","final","int","nc","=","node",".","jjtGetNumChildren","(",")",";","\n","list",".","add","(","node",")",";","\n","for","(","int","c","=","0",";","c","<","nc",";","++c",")","{","\n","flatten","(","list,","node",".","jjtGetChild","(","c",")",")",";","\n","}","\n"],"docstring_tokens":["Recursively","adds","all","children","of","a","script","to","the","list","of","descendants"]}
{"code_tokens":["\n","public","static","ListGetExecutor","discover","(","final","Introspector","is,","final","Class<?>","clazz,","final","Integer","index",")","{","\n","if","(","index","!=","null",")","{","\n","if","(","clazz",".","isArray","(",")",")","{","\n","return","new","ListGetExecutor","(","clazz,","ARRAY_GET,","index",")",";","\n","}","\n","if","(","List",".","class",".","isAssignableFrom","(","clazz",")",")","{","\n","return","new","ListGetExecutor","(","clazz,","LIST_GET,","index",")",";","\n","}","\n","}","\n","return","null",";","\n"],"docstring_tokens":["Attempts","to","discover","a","ListGetExecutor"]}
{"code_tokens":["\n","@SuppressWarnings","(","\"SuspiciousSystemArraycopy\"",")","\n","private","Object[]","handleVarArg","(","Object[]","actual",")","{","\n","final","Class<?>","vaclass","=","vaClass",";","\n","final","int","vastart","=","vaStart",";","\n","//","variable","arguments","count\n","final","int","varargc","=","actual",".","length","-","vastart",";","\n","//","if","no","values","are","being","passed","into","the","vararg,","size","==","0\n","if","(","varargc","==","1",")","{","\n","//","if","one","non-null","value","is","being","passed","into","the","vararg,\n","//","and","that","arg","is","not","the","sole","argument","and","not","an","array","of","the","expected","type,\n","//","make","the","last","arg","an","array","of","the","expected","type\n","if","(","actual[vastart]","!=","null",")","{","\n","final","Class<?>","aclazz","=","actual[vastart]",".","getClass","(",")",";","\n","if","(","!aclazz",".","isArray","(",")","||","!vaclass",".","isAssignableFrom","(","aclazz",".","getComponentType","(",")",")",")","{","\n","//","create","a","1-length","array","to","hold","and","replace","the","last","argument\n","final","Object","lastActual","=","Array",".","newInstance","(","vaclass,","1",")",";","\n","Array",".","set","(","lastActual,","0,","actual[vastart]",")",";","\n","actual[vastart]","=","lastActual",";","\n","}","\n","}","\n","//","else,","the","vararg","is","null","and","used","as","is,","considered","as","T[]\n","}","else","{","\n","//","if","no","or","multiple","values","are","being","passed","into","the","vararg,\n","//","put","them","in","an","array","of","the","expected","type\n","final","Object","varargs","=","Array",".","newInstance","(","vaclass,","varargc",")",";","\n","System",".","arraycopy","(","actual,","vastart,","varargs,","0,","varargc",")",";","\n","//","put","all","arguments","into","a","new","actual","array","of","the","appropriate","size\n","final","Object[]","newActual","=","new","Object[vastart","+","1]",";","\n","System",".","arraycopy","(","actual,","0,","newActual,","0,","vastart",")",";","\n","newActual[vastart]","=","varargs",";","\n","//","replace","the","old","actual","array\n","actual","=","newActual",";","\n","}","\n","return","actual",";","\n"],"docstring_tokens":["Reassembles","arguments","if","the","method","is","a","vararg","method"]}
{"code_tokens":["\n","public","boolean","allow","(","final","Constructor<?>","ctor",")","{","\n","if","(","ctor","==","null",")","{","\n","return","false",";","\n","}","\n","if","(","!Modifier",".","isPublic","(","ctor",".","getModifiers","(",")",")",")","{","\n","return","false",";","\n","}","\n","final","Class<?>","clazz","=","ctor",".","getDeclaringClass","(",")",";","\n","if","(","!allow","(","clazz,","false",")",")","{","\n","return","false",";","\n","}","\n","//","is","ctor","annotated","with","nojexl","?\n","final","NoJexl","nojexl","=","ctor",".","getAnnotation","(","NoJexl",".","class",")",";","\n","if","(","nojexl","!=","null",")","{","\n","return","false",";","\n","}","\n","return","true",";","\n"],"docstring_tokens":["Checks","whether","a","constructor","explicitly","disallows","JEXL","introspection"]}
{"code_tokens":["\n","static","java",".","lang",".","reflect",".","Method","discoverGet","(","final","Introspector","is,\n","final","String","which,\n","final","Class<?>","clazz,\n","final","String","property",")","{","\n","if","(","property","==","null","||","property",".","isEmpty","(",")",")","{","\n","return","null",";","\n","}","\n","//","this","is","gross","and","linear,","but","it","keeps","it","straightforward",".","\n","java",".","lang",".","reflect",".","Method","method",";","\n","final","int","start","=","which",".","length","(",")",";","//","\"get\"","or","\"is\"","so","3","or","2","for","char","case","switch\n","//","start","with","get<Property>\n","final","StringBuilder","sb","=","new","StringBuilder","(","which",")",";","\n","sb",".","append","(","property",")",";","\n","//","uppercase","nth","char\n","final","char","c","=","sb",".","charAt","(","start",")",";","\n","sb",".","setCharAt","(","start,","Character",".","toUpperCase","(","c",")",")",";","\n","method","=","is",".","getMethod","(","clazz,","sb",".","toString","(",")",",","EMPTY_PARAMS",")",";","\n","//lowercase","nth","char\n","if","(","method","==","null",")","{","\n","sb",".","setCharAt","(","start,","Character",".","toLowerCase","(","c",")",")",";","\n","method","=","is",".","getMethod","(","clazz,","sb",".","toString","(",")",",","EMPTY_PARAMS",")",";","\n","}","\n","return","method",";","\n"],"docstring_tokens":["Base","method","for","boolean","and","object","property","get"]}
{"code_tokens":["\n","protected","final","Object","visit","(","final","SimpleNode","node,","final","Object","data",")","{","\n","throw","new","UnsupportedOperationException","(","node",".","getClass","(",")",".","getSimpleName","(",")","+","\"",":","not","supported","yet",".","\"",")",";","\n"],"docstring_tokens":["Unused,","satisfy","ParserVisitor","interface"]}
{"code_tokens":["\n","protected","final","Object","visit","(","final","ASTAmbiguous","node,","final","Object","data",")","{","\n","throw","new","UnsupportedOperationException","(","\"unexpected","type","of","node\"",")",";","\n"],"docstring_tokens":["Unused,","should","throw","in","Parser"]}
{"code_tokens":["\n","public","JexlOptions","optionsSet","(","final","JexlOptions","opts",")","{","\n","if","(","opts","!=","null",")","{","\n","opts",".","set","(","options",")",";","\n","}","\n","return","opts",";","\n"],"docstring_tokens":["Sets","options","from","this","engine","options"]}
{"code_tokens":["\n","protected","Object","doCreateInstance","(","final","Object","clazz,","final","Object",".",".",".","args",")","{","\n","JexlException","xjexl","=","null",";","\n","Object","result","=","null",";","\n","final","JexlInfo","info","=","debug","?","createInfo","(",")",":","null",";","\n","try","{","\n","JexlMethod","ctor","=","uberspect",".","getConstructor","(","clazz,","args",")",";","\n","if","(","ctor","==","null","&&","arithmetic",".","narrowArguments","(","args",")",")","{","\n","ctor","=","uberspect",".","getConstructor","(","clazz,","args",")",";","\n","}","\n","if","(","ctor","!=","null",")","{","\n","result","=","ctor",".","invoke","(","clazz,","args",")",";","\n","}","else","{","\n","xjexl","=","new","JexlException",".","Method","(","info,","clazz",".","toString","(",")",",","args",")",";","\n","}","\n","}","catch","(","final","JexlException","xany",")","{","\n","xjexl","=","xany",";","\n","}","catch","(","final","Exception","xany",")","{","\n","xjexl","=","new","JexlException",".","Method","(","info,","clazz",".","toString","(",")",",","args,","xany",")",";","\n","}","\n","if","(","xjexl","!=","null",")","{","\n","if","(","silent",")","{","\n","logger",".","warn","(","xjexl",".","getMessage","(",")",",","xjexl",".","getCause","(",")",")",";","\n","return","null",";","\n","}","\n","throw","xjexl",".","clean","(",")",";","\n","}","\n","return","result",";","\n"],"docstring_tokens":["Creates","a","new","instance","of","an","object","using","the","most","appropriate","constructor","based","on","the","arguments"]}
{"code_tokens":["\n","public","boolean","equals","(","final","AbstractExecutor","arg",")","{","\n","//","common","equality","check\n","if","(","!this",".","getClass","(",")",".","equals","(","arg",".","getClass","(",")",")",")","{","\n","return","false",";","\n","}","\n","if","(","!this",".","getMethod","(",")",".","equals","(","arg",".","getMethod","(",")",")",")","{","\n","return","false",";","\n","}","\n","if","(","!this",".","getTargetClass","(",")",".","equals","(","arg",".","getTargetClass","(",")",")",")","{","\n","return","false",";","\n","}","\n","//","specific","equality","check\n","final","Object","lhsp","=","this",".","getTargetProperty","(",")",";","\n","final","Object","rhsp","=","arg",".","getTargetProperty","(",")",";","\n","if","(","lhsp","==","null","&&","rhsp","==","null",")","{","\n","return","true",";","\n","}","\n","if","(","lhsp","!=","null","&&","rhsp","!=","null",")","{","\n","return","lhsp",".","equals","(","rhsp",")",";","\n","}","\n","return","false",";","\n"],"docstring_tokens":["Indicates","whether","some","other","executor","is","equivalent","to","this","one"]}
{"code_tokens":["\n","public","final","boolean","isAlive","(",")","{","\n","return","(","method","!=","null",")",";","\n"],"docstring_tokens":["Tell","whether","the","executor","is","alive","by","looking","at","the","value","of","the","method"]}
{"code_tokens":["\n","public","boolean","isCacheable","(",")","{","\n","return","method","!=","null",";","\n"],"docstring_tokens":["Specifies","if","this","executor","is","cacheable","and","able","to","be","reused","for","this","class","of","object","it","was","returned","for"]}
{"code_tokens":["\n","public","static","MapSetExecutor","discover","(","final","Introspector","is,\n","final","Class<?>","clazz,\n","final","Object","identifier,\n","final","Object","value",")","{","\n","if","(","Map",".","class",".","isAssignableFrom","(","clazz",")",")","{","\n","return","new","MapSetExecutor","(","clazz,","MAP_SET,","identifier,","value",")",";","\n","}","\n","return","null",";","\n"],"docstring_tokens":["Attempts","to","discover","a","MapSetExecutor"]}
{"code_tokens":["\n","private","boolean","isArithmetic","(","final","JexlMethod","vm",")","{","\n","if","(","vm","instanceof","MethodExecutor",")","{","\n","final","Method","method","=","(","(","MethodExecutor",")","vm",")",".","getMethod","(",")",";","\n","return","JexlArithmetic",".","class",".","equals","(","method",".","getDeclaringClass","(",")",")",";","\n","}","\n","return","false",";","\n"],"docstring_tokens":["Checks","whether","a","method","is","a","JexlArithmetic","method"]}
{"code_tokens":["\n","@Override\n","public","boolean","isCollectionAccessor","(","final","Method","method",")","{","\n","return","false",";","\n"],"docstring_tokens":["The","method","way","well","represent","a","collection,","but","this","facet","factory","does","not","have","any","opinion","on","the","matter"]}
{"code_tokens":["\n","public","void","run","(","\n","final","@NonNull","UnaryOperator<InteractionContext>","sudoMapper,\n","final","@NonNull","ThrowingRunnable","runnable",")","{","\n","call","(","sudoMapper,","ThrowingRunnable",".","toCallable","(","runnable",")",")",";","\n"],"docstring_tokens":["Executes","the","supplied","Callable","block,","within","the","provided","InteractionContext"]}
{"code_tokens":["\n","public","void","simulateChoiceSelect","(","final","int","choiceIndex",")","{","\n","selectedItem",".","setValue","(","choiceBox",".","getValue","(",")",".","getElseFail","(","choiceIndex",")",")",";","\n"],"docstring_tokens":["assuming","the","parameter","is","a","scalar","type"]}
{"code_tokens":["\n","public","void","simulateMultiChoiceSelect","(","final","int",".",".",".","choiceIndices",")","{","\n","val","newValuePojos","=","choiceBox",".","getValue","(",")","\n",".","pickByIndex","(","choiceIndices",")","\n",".","map","(","ManagedObject::getPojo",")",";","\n","val","newValue","=","ManagedObject",".","of","(","\n","valueSpecification,\n","newValuePojos",".","toList","(",")",")",";","\n","selectedItem",".","setValue","(","newValue",")",";","\n"],"docstring_tokens":["assuming","the","parameter","is","a","non-scalar","type"]}
{"code_tokens":["\n","public","Class<?>","unboxPrimitiveIfNecessary","(","final","@NonNull","Class<?>","clazz",")","{","\n","//","an","optimization,","to","skip","the","lookup","if","possible\n","val","firstPass","=","clazz",".","isPrimitive","(",")","\n","||","!clazz",".","getPackageName","(",")",".","equals","(","\"java",".","lang\"",")","\n","?","clazz\n",":","primitiveByNameWrapper",".","get","(","clazz",")",";","\n","return","firstPass!=null\n","?","firstPass\n",":","clazz",";","\n"],"docstring_tokens":["Unbox","the","given","class","if","it","is","a","primitive","wrapper","class,","returning","the","corresponding","primitive","type","instead"]}
{"code_tokens":["\n","@Override\n","protected","ApplicationAdvice","appliesTo","(","final","IModel<?>","model",")","{","\n","if","(","!","(","model","instanceof","ServiceActionsModel",")",")","{","\n","return","ApplicationAdvice",".","DOES_NOT_APPLY",";","\n","}","\n","val","menuUiModel","=","(","(","ServiceActionsModel",")","model",")",".","getObject","(",")",";","\n","val","menuBarSelect","=","menuUiModel",".","getMenuBarSelect","(",")",";","\n","return","appliesIf","(","\n","menuBarSelect","==","DomainServiceLayout",".","MenuBar",".","TERTIARY\n","||","menuBarSelect","==","null",")",";","\n"],"docstring_tokens":["Applies","only","to","tertiary","service","action","models"]}
{"code_tokens":["\n","public","static","ClobJpaEmbeddable","fromClob","(","Clob","clob",")","{","\n","if","(","clob","==","null",")","{","\n","return","null",";","\n","}","\n","val","clobJpaEmbeddable","=","new","ClobJpaEmbeddable","(",")",";","\n","clobJpaEmbeddable",".","chars","=","clob",".","getChars","(",")",".","toString","(",")",";","\n","clobJpaEmbeddable",".","mimeType","=","clob",".","getMimeType","(",")",".","toString","(",")",";","\n","clobJpaEmbeddable",".","name","=","clob",".","getName","(",")",";","\n","return","clobJpaEmbeddable",";","\n"],"docstring_tokens":["Factory","method","to","marshall","a","Clob","into","a","ClobJpaEmbeddable"]}
{"code_tokens":["\n","public","static","Clob","toClob","(","final","ClobJpaEmbeddable","clobJpaEmbeddable",")","{","\n","return","Optional",".","ofNullable","(","clobJpaEmbeddable",")",".","map","(","ClobJpaEmbeddable::asClob",")",".","orElse","(","null",")",";","\n"],"docstring_tokens":["Reciprocal","method","to","marshall","a","ClobJpaEmbeddable","into","a","Clob"]}
{"code_tokens":["\n","public","static","<F","extends","Facet>","void","purgeIf","(","\n","final","Class<F>","facetType,\n","final","Predicate<?","super","F>","filter,\n","final","FacetHolder","facetHolder",")","{","\n\n","facetHolder",".","getFacetRanking","(","facetType",")","\n",".","ifPresent","(","ranking->ranking",".","purgeIf","(","facetType,","filter",")",")",";","\n"],"docstring_tokens":["Removes","any","facet","of","facet-type","from","facetHolder","if","it","passes","the","given","filter"]}
{"code_tokens":["\n","private","void","setProviderAndCurrAndPending","(","\n","final","Select2","select2",")","{","\n\n","final","ChoiceProvider<ObjectMemento>","choiceProvider","=","buildChoiceProvider","(",")",";","\n\n","select2",".","setProvider","(","choiceProvider",")",";","\n","getModel","(",")",".","clearPending","(",")",";","\n\n","val","dependsOnPreviousArgs","=","(","choiceProvider","instanceof","ObjectAdapterMementoProviderAbstract",")","\n","&&","(","(","ObjectAdapterMementoProviderAbstract",")","choiceProvider",")",".","dependsOnPreviousArgs","(",")",";","\n\n","if","(","dependsOnPreviousArgs",")","{","\n","syncIfNull","(","select2",")",";","\n","}","\n\n"],"docstring_tokens":["sets","up","the","choices,","also","ensuring","that","any","currently","held","value","is","compatible"]}
{"code_tokens":["\n","public","static","String","prefix","(","final","@Nullable","String","input,","final","@NonNull","String","prefix",")","{","\n","if","(","input==null",")","{","\n","return","null",";","\n","}","\n","if","(","input",".","startsWith","(","prefix",")",")","{","\n","return","input",";","\n","}","\n","return","prefix","+","input",";","\n"],"docstring_tokens":["If","input","does","not","start","with","prefix","prepends","prefix","to","the","input"]}
{"code_tokens":["\n","public","static","String","suffix","(","final","@Nullable","String","input,","final","@NonNull","String","suffix",")","{","\n","if","(","input==null",")","{","\n","return","null",";","\n","}","\n","if","(","input",".","endsWith","(","suffix",")",")","{","\n","return","input",";","\n","}","\n","return","input","+","suffix",";","\n"],"docstring_tokens":["If","input","does","not","end","with","suffix","appends","suffix","to","the","input"]}
{"code_tokens":["\n","public","static","final","byte[]","toBytes","(","final","@Nullable","String","str,","final","@NonNull","Charset","charset",")","{","\n","return","mapIfPresentElse","(","str,","__->str",".","getBytes","(","charset",")",",","null",")",";","\n"],"docstring_tokens":["Encodes","str","into","a","sequence","of","bytes","using","the","given","charset"]}
{"code_tokens":["\n","public","static","final","String","ofBytes","(","final","@Nullable","byte[]","bytes,","final","@NonNull","Charset","charset",")","{","\n","return","mapIfPresentElse","(","bytes,","__->new","String","(","bytes,","charset",")",",","null",")",";","\n"],"docstring_tokens":["Constructs","a","new","String","by","decoding","the","specified","array","of","bytes","using","the","specified","charset"]}
{"code_tokens":["\n","public","Persistable","newInstance","(","Class","pcClass,","StateManager","sm",")","\n","{","\n","Persistable","pc","=","getPersistableForClass","(","pcClass",")",";","\n","return","pc","==","null","?","null",":","pc",".","dnNewInstance","(","sm",")",";","\n"],"docstring_tokens":["Create","a","new","instance","of","the","class","and","assign","its","StateManager"]}
{"code_tokens":["\n","@SuppressWarnings","(","\"deprecation\"",")","\n","private","static","Persistable","getPersistableForClass","(","Class","pcClass",")","\n","{","\n","Meta","ret","=","registeredClasses",".","get","(","pcClass",")",";","\n","if","(","ret","==","null",")","\n","{","\n","//","Commented","out","code","that","we","could","enable,","particularly","if","we","update","registerClass","to","not","pass","an","instance\n","if","(","Persistable",".","class",".","isAssignableFrom","(","pcClass",")",")","\n","{","\n","System",".","err",".","println","(","String",".","format","(","\"MONKEY","PATCH","INTERCEPTING","%s\",","pcClass",")",")",";","\n","//","Not","yet","registered","but","this","is","Persistable,","so","create","an","instance\n","Persistable","pc",";","\n","try\n","{","\n","pc","=","(","Persistable",")","pcClass",".","newInstance","(",")",";","\n","registeredClasses",".","put","(","pcClass,","new","Meta","(","pc",")",")",";","\n","return","pc",";","\n","}","\n","catch","(","InstantiationException","|","IllegalAccessException","e",")","\n","{","\n","System",".","err",".","println","(","e",".","getMessage","(",")",")",";","\n","}","\n","}","\n","throw","new","NucleusUserException","(","\"Cannot","lookup","meta","info","for","\"","+","pcClass","+","\"","-","nothing","found\"",")",".","setFatal","(",")",";","\n","}","\n","return","ret",".","getPC","(",")",";","\n"],"docstring_tokens":["Look","up","the","instance","for","a","Persistable","class"]}
{"code_tokens":["\n","public","ReasonBuffer2","append","(","final","String","reason",")","{","\n","append","(","true,","reason",")",";","\n","return","this",";","\n"],"docstring_tokens":["Append","a","reason","to","the","list","of","existing","reasons"]}
{"code_tokens":["\n","public","ReasonBuffer2","append","(","final","boolean","condition,","final","String","reason",")","{","\n","lazyReasons",".","add","(","ConditionAndReason",".","create","(","(",")","->","condition,","reason",")",")",";","\n","return","this",";","\n"],"docstring_tokens":["Append","a","reason","to","the","list","of","existing","reasons","if","the","condition","flag","is","true"]}
{"code_tokens":["\n","public","ReasonBuffer2","plus","(","final","ReasonBuffer2","other",")","{","\n","this",".","lazyReasons",".","addAll","(","other",".","lazyReasons",")",";","\n","return","this",";","\n"],"docstring_tokens":["Combines","sets","of","reasons","from","another"]}
{"code_tokens":["\n","public","static","<S>","S","load","(","\n","final","Class<S>","pluginInterfaceClass,\n","final","File","classPath,\n","final","String","pluginFullyQualifiedClassName",")","{","\n\n","try","{","\n\n","ClassLoader","parentCL","=","pluginInterfaceClass",".","getClassLoader","(",")",";","\n","URL[]","urls","=","{","classPath",".","toURI","(",")",".","toURL","(",")","}",";","\n\n","try","(","URLClassLoader","cl","=","URLClassLoader",".","newInstance","(","urls,","parentCL",")",")","{","\n","Class<S>","pluginClass","=","_Casts",".","uncheckedCast","(","\n","cl",".","loadClass","(","pluginFullyQualifiedClassName",")",")",";","\n","S","plugin","=","pluginClass",".","getDeclaredConstructor","(",")",".","newInstance","(",")",";","\n\n","_Context",".","putSingleton","(","pluginInterfaceClass,","plugin",")",";","\n\n","return","plugin",";","\n","}","\n\n","}","catch","(","Exception","e",")","{","\n","throw","new","_PluginResolveException","(","\n","String",".","format","(","\"Failed","to","load","plugin","'%s'","implementing","'%s'","from","path","'%s'",".","\",\n","pluginFullyQualifiedClassName,\n","pluginInterfaceClass",".","getName","(",")",",\n","classPath",".","getAbsolutePath","(",")","\n",")",",","e",")",";","\n","}","\n\n"],"docstring_tokens":["Loads","a","plugin","by","name","and","class-path"]}
{"code_tokens":["\n","@Bean","(","\"isis",".","testing",".","fixtures",".","FixtureScriptsSpecificationProviderDefault\"",")","\n","@ConditionalOnMissingBean","(","FixtureScriptsSpecificationProvider",".","class",")","\n","@Qualifier","(","\"Default\"",")","\n","FixtureScriptsSpecificationProvider","fixtureScriptsSpecificationProvider","(","final","IsisConfiguration","isisConfiguration",")","{","\n\n","val","fixturesConfig","=","isisConfiguration",".","getTesting","(",")",".","getFixtures","(",")",".","getFixtureScriptsSpecification","(",")",";","\n","val","builder","=","builderFrom","(","fixturesConfig",")",";","\n\n","builder",".","with","(","FixtureScripts",".","NonPersistedObjectsStrategy",".","valueOf","(","fixturesConfig",".","getNonPersistedObjectsStrategy","(",")",".","name","(",")",")",")",";","\n","builder",".","with","(","FixtureScripts",".","MultipleExecutionStrategy",".","valueOf","(","fixturesConfig",".","getMultipleExecutionStrategy","(",")",".","name","(",")",")",")",";","\n","builder",".","withRecreate","(","(","Class",")","fixturesConfig",".","getRecreate","(",")",")",";","\n","builder",".","withRunScriptDefault","(","(","Class",")","fixturesConfig",".","getRunScriptDefault","(",")",")",";","\n\n","return","builder::build",";","\n"],"docstring_tokens":["Returns","an","implementation","of","FixtureScriptsSpecificationProvider","that","uses","configuration","properties","under","isis.testing.fixtures.fixture-scripts-specification"]}
{"code_tokens":["\n","public","static","int","determineMinLength","(","final","Method","method",")","{","\n","if","(","method","==","null\n","||","method",".","getParameterCount","(",")","==0",")","{","\n","return","MIN_LENGTH_DEFAULT",";","\n","}","\n\n","val","lastParam","=","method",".","getParameters","(",")","[method",".","getParameterCount","(",")","-1]",";","\n\n","for","(","Annotation","annotation:","lastParam",".","getAnnotations","(",")",")","{","\n","if","(","annotation","instanceof","MinLength",")","{","\n","return","(","(","MinLength",")","annotation",")",".","value","(",")",";","\n","}","\n","}","\n\n","return","MinLengthUtil",".","MIN_LENGTH_DEFAULT",";","\n"],"docstring_tokens":["Finds","the","value","of","the","minimum","length,","from","the","MinLength","annotation","on","the","last","parameter","of","the","supplied","method"]}
{"code_tokens":["\n","public","<T","extends","Component>","T","attributeReplace","(","\n","final","@Nullable","T","component,\n","final","@Nullable","String","attributeName,\n","final","@Nullable","String","attributeValue",")","{","\n","if","(","component==null\n","||","_Strings",".","isEmpty","(","attributeName",")",")","{","\n","return","component",";","\n","}","\n","if","(","_Strings",".","isEmpty","(","attributeValue",")",")","{","\n","component",".","add","(","AttributeModifier",".","remove","(","attributeName",")",")",";","\n","return","component",";","\n","}","\n","component",".","add","(","AttributeModifier",".","replace","(","attributeName,","attributeValue",")",")",";","\n","return","component",";","\n"],"docstring_tokens":["If","any","of","component","or","attributeName","is","null","or","empty,","does","nothing"]}
{"code_tokens":["\n","public","ComponentTag","cssAppend","(","final","ComponentTag","tag,","final","@Nullable","String","cssClass",")","{","\n","if","(","_Strings",".","isNotEmpty","(","cssClass",")",")","{","\n","tag",".","append","(","\"class\",","cssClass,","\"","\"",")",";","\n","}","\n","return","tag",";","\n"],"docstring_tokens":["If","cssClass","is","empty,","does","nothing"]}
{"code_tokens":["\n","@Override\n","public","void","init","(","final","FilterConfig","pConfig",")","{","\n","final","ArrayList<String[]>","newReplyHeaders","=","new","ArrayList<String[]>","(",")",";","\n","final","String","cacheTime","=","pConfig",".","getInitParameter","(","CACHE_TIME_PARAM_NAME",")",";","\n","this",".","cacheTime","=","Long",".","parseLong","(","cacheTime","!=","null","?","cacheTime",":","CACHE_TIME_PARAM_NAME_DEFAULT",")",";","\n","if","(","this",".","cacheTime",">","0L",")","{","\n","newReplyHeaders",".","add","(","new","String[]","{","CACHE_CONTROL_HEADER,","MAX_AGE_VALUE","+","this",".","cacheTime","}",")",";","\n","newReplyHeaders",".","add","(","new","String[]","{","CACHE_CONTROL_HEADER,","PRE_CHECK_VALUE","+","this",".","cacheTime","}",")",";","\n","newReplyHeaders",".","add","(","new","String[]","{","CACHE_CONTROL_HEADER,","POST_CHECK_VALUE","+","this",".","cacheTime","}",")",";","\n","}","else","{","\n","newReplyHeaders",".","add","(","new","String[]","{","PRAGMA_HEADER,","NO_CACHE_VALUE","}",")",";","\n","newReplyHeaders",".","add","(","new","String[]","{","EXPIRES_HEADER,","ZERO_STRING_VALUE","}",")",";","\n","newReplyHeaders",".","add","(","new","String[]","{","CACHE_CONTROL_HEADER,","NO_CACHE_VALUE","}",")",";","\n","newReplyHeaders",".","add","(","new","String[]","{","CACHE_CONTROL_HEADER,","NO_STORE_VALUE","}",")",";","\n","}","\n","this",".","mReplyHeaders","=","new","String[newReplyHeaders",".","size","(",")","][2]",";","\n","newReplyHeaders",".","toArray","(","this",".","mReplyHeaders",")",";","\n"],"docstring_tokens":["Initializes","the","Servlet","filter","with","the","cache","time","and","sets","up","the","unchanging","headers"]}
{"code_tokens":["\n","@Override\n","public","final","ValueType","getSchemaValueType","(",")","{","\n","return","getDelegate","(",")",".","getSchemaValueType","(",")",";","\n"],"docstring_tokens":["By","design,","adapters","always","share","their","SchemaValueType","with","their","delegate"]}
{"code_tokens":["\n","public","static","ObjectIcon","eager","(","\n","final","String","shortName,\n","final","URL","url,\n","final","CommonMimeType","mimeType",")","{","\n","val","id","=","_Strings",".","base64UrlEncode","(","url",".","getPath","(",")",")",";","\n","val","objectIcon","=","new","ObjectIcon","(","shortName,","url,","mimeType,","id",")",";","\n","objectIcon",".","asBytes","(",")",";","//","memoize\n","return","objectIcon",";","\n"],"docstring_tokens":["Create","an","ObjectIcon","and","eagerly","read","in","image","data","from","class-path","resources"]}
{"code_tokens":["\n","public","static","ObjectIcon","lazy","(","\n","final","String","shortName,\n","final","URL","url,\n","final","CommonMimeType","mimeType",")","{","\n","val","id","=","_Strings",".","base64UrlEncode","(","url",".","getPath","(",")",")",";","\n","return","new","ObjectIcon","(","shortName,","url,","mimeType,","id",")",";","\n"],"docstring_tokens":["Create","an","ObjectIcon","and","not","yet","read","in","image","data","from","class-path","resources"]}
{"code_tokens":["\n	public","String","getPersistentClassName","(",")","{","\n		if","(","this",".","persistentClass","instanceof","Class",")","{","\n			return","(","(","Class<?>",")","this",".","persistentClass",")",".","getName","(",")",";","\n		","}","\n		return","(","this",".","persistentClass","!=","null","?","this",".","persistentClass",".","toString","(",")",":","null",")",";","\n	"],"docstring_tokens":["Return","the","name","of","the","persistent","class","of","the","object","that","was","not","found.	","Will","work","for","both","Class","objects","and","String","names"]}
{"code_tokens":["\n","@Override\n","public","String","hiddenReason","(","final","ManagedObject","target,","Where","where",")","{","\n","return","\"Always","hidden\"",";","\n"],"docstring_tokens":["Always","returns","Always","hidden"]}
{"code_tokens":["\n","Element","createXsElement","(","final","Document","xsdDoc,","final","String","localName",")","{","\n\n","final","Element","element","=","xsdDoc",".","createElementNS","(","XsMetaModel",".","W3_ORG_XS_URI,","XsMetaModel",".","W3_ORG_XS_PREFIX","+","\":\"","+","localName",")",";","\n","//","xmlns:xs=\"",".",".",".","\"","added","to","root\n","helper",".","rootElementFor","(","element",")",".","setAttributeNS","(","XsMetaModel",".","W3_ORG_XMLNS_URI,","XsMetaModel",".","W3_ORG_XMLNS_PREFIX","+","\":\"","+","XsMetaModel",".","W3_ORG_XS_PREFIX,","XsMetaModel",".","W3_ORG_XS_URI",")",";","\n","return","element",";","\n"],"docstring_tokens":["Creates","an","element","in","the","XS","namespace,","adding","the","definition","of","the","namespace","to","the","root","element","of","the","document","if","required,"]}
{"code_tokens":["\n	public","static","void","doReleasePersistenceManager","(","PersistenceManager","pm,","PersistenceManagerFactory","pmf",")","\n			throws","JDOException","{","\n\n		if","(","pm","==","null",")","{","\n			return",";","\n		","}","\n		//","Only","release","non-transactional","PersistenceManagers",".","\n		if","(","!isPersistenceManagerTransactional","(","pm,","pmf",")",")","{","\n			logger",".","debug","(","\"Closing","JDO","PersistenceManager\"",")",";","\n			pm",".","close","(",")",";","\n		","}","\n	"],"docstring_tokens":["Actually","release","a","PersistenceManager","for","the","given","factory.	","Same","as","releasePersistenceManager,","but","throwing","the","original","JDOException"]}
{"code_tokens":["\n","public","<T,","E>","Collection<E>","proxy","(","\n","final","Collection<E>","collectionToProxy,\n","final","DomainObjectInvocationHandler<T>","handler,\n","final","OneToManyAssociation","otma",")","{","\n\n","val","collectionInvocationHandler","=","new","CollectionInvocationHandler<T,","Collection<E>>","(","\n","collectionToProxy,","handler,","otma",")",";","\n","collectionInvocationHandler",".","setResolveObjectChangedEnabled","(","\n","handler",".","isResolveObjectChangedEnabled","(",")",")",";","\n\n","return","proxyCreator",".","instantiateProxy","(","collectionInvocationHandler",")",";","\n"],"docstring_tokens":["Whether","to","execute","or","not","will","be","picked","up","from","the","supplied","parent","handler"]}
{"code_tokens":["\n	public","String","getPersistentClassName","(",")","{","\n		if","(","this",".","persistentClass","instanceof","Class",")","{","\n			return","(","(","Class<?>",")","this",".","persistentClass",")",".","getName","(",")",";","\n		","}","\n		return","(","this",".","persistentClass","!=","null","?","this",".","persistentClass",".","toString","(",")",":","null",")",";","\n	"],"docstring_tokens":["Return","the","name","of","the","persistent","class","of","the","object","for","which","the","locking","failed.	","Will","work","for","both","Class","objects","and","String","names"]}
{"code_tokens":["\n","@Override\n","public","final","ManagedObject","getObject","(",")","{","\n","if","(","isCurrentValueAbsent","(",")",")","{","\n","return","ManagedObject",".","empty","(","proposedValue","(",")",".","getElementType","(",")",")",";","\n","}","\n","return","proposedValue","(",")",".","getValue","(",")",".","getValue","(",")",";","\n"],"docstring_tokens":["Gets","the","proposed","value","as","ManagedObject"]}
{"code_tokens":["\n","public","static","String","requiresNotEmpty","(","final","@Nullable","String","obj,","final","String","paramName",")","{","\n","if","(","obj","==","null",")","{","\n","throw","new","NullPointerException","(","String",".","format","(","\"Parameter/Field","'%s'","is","required","to","be","present","(","not","null",")",".","\",","paramName",")",")",";","\n","}","\n","if","(","obj",".","length","(",")","==0",")","{","\n","throw","new","IllegalArgumentException","(","String",".","format","(","\"Parameter/Field","'%s'","is","required","to","be","present","and","not","empty",".","\",","paramName",")",")",";","\n","}","\n","return","obj",";","\n"],"docstring_tokens":["Allows","for","convenient","named","parameter","non-empty-check"]}
{"code_tokens":["\n","public","static","<T>","T","getFrom","(","Page","page,","final","Class<T>","cls",")","{","\n","final","Object[]","pComponent","=","new","Object[1]",";","\n","page",".","visitChildren","(","new","DeepChildFirstVisitor","(",")","{","\n","@Override\n","public","void","component","(","Component","component,","IVisit<Void>","visit",")","{","\n","if","(","cls",".","isAssignableFrom","(","component",".","getClass","(",")",")",")","{","\n","pComponent[0]","=","component",";","\n","visit",".","stop","(",")",";","\n","}","\n","}","\n","@Override\n","public","boolean","preCheck","(","Component","component",")","{","\n","return","false",";","\n","}","\n","}",")",";","\n\n","return","_Casts",".","uncheckedCast","(","pComponent[0]",")",";","\n"],"docstring_tokens":["Locates","a","component","implementing","the","required","class","on","the","supplied","page"]}
{"code_tokens":["\n","public","String","getUri","(",")","{","\n","if","(","uri","==","null",")","{","\n","throw","new","IllegalStateException","(","\"URI","has","not","been","specified",".","\"",")",";","\n","}","\n","return","uri",";","\n"],"docstring_tokens":["The","URI","of","the","application","namespace"]}
{"code_tokens":["\n","private","Element","addExtensionsElement","(","final","Element","parentXsElement",")","{","\n","final","Element","xsExtensionsElementElement","=","xsMeta",".","createXsElementElement","(","helper",".","docFor","(","parentXsElement",")",",","\"isis-extensions\"",")",";","\n","parentXsElement",".","appendChild","(","xsExtensionsElementElement",")",";","\n\n","//","xs:element/xs:complexType/xs:sequence/xs:element/xs:complexType/xs:sequence\n","final","Element","xsExtensionsComplexTypeElement","=","xsMeta",".","complexTypeFor","(","xsExtensionsElementElement",")",";","\n","final","Element","xsExtensionsSequenceElement","=","xsMeta",".","sequenceFor","(","xsExtensionsComplexTypeElement",")",";","\n\n","return","xsExtensionsSequenceElement",";","\n"],"docstring_tokens":["Adds","an","isis-extensions","element","and","a","complexType","and","sequence","elements","underneath"]}
{"code_tokens":["\n","void","configureSecurity","(","final","IsisConfiguration","configuration",")","{","\n","getSecuritySettings","(",")",".","setAuthenticationStrategy","(","newAuthenticationStrategy","(","configuration",")",")",";","\n"],"docstring_tokens":["protected","visibility","to","allow","ad-hoc","overriding","of","some","other","authentication","strategy"]}
{"code_tokens":["\n","@Override\n","protected","IConverterLocator","newConverterLocator","(",")","{","\n","final","ConverterLocator","converterLocator","=","new","ConverterLocator","(",")",";","\n","converterLocator",".","set","(","ManagedObject",".","class,","new","ConverterForObjectAdapter","(",")",")",";","\n","converterLocator",".","set","(","ObjectMemento",".","class,","new","ConverterForObjectAdapterMemento","(","commonContext",")",")",";","\n","return","converterLocator",";","\n"],"docstring_tokens":["Installs","a","ConverterLocator","preconfigured","with","a","number","of","implementations","to","support","Isis","specific","objects"]}
{"code_tokens":["\n","public","boolean","isIntegralNumber","(","final","String","path",")","{","\n","return","isIntegralNumber","(","getNode","(","path",")",")",";","\n"],"docstring_tokens":["Is","a","long,","an","int","or","a","BigInteger"]}
{"code_tokens":["\n","public","LinkRepresentation","mapValueAsLink","(",")","{","\n","if","(","asJsonNode","(",")",".","size","(",")","!=","1",")","{","\n","throw","new","IllegalStateException","(","\"does","not","represent","link\"",")",";","\n","}","\n","final","String","linkPropertyName","=","asJsonNode","(",")",".","fieldNames","(",")",".","next","(",")",";","\n","return","getLink","(","linkPropertyName",")",";","\n"],"docstring_tokens":["Convert","a","representation","that","contains","a","single","node","representing","a","link","into","a","LinkRepresentation"]}
{"code_tokens":["\n","protected","ArrayNode","asArrayNode","(",")","{","\n","if","(","!isArray","(",")",")","{","\n","throw","new","IllegalStateException","(","\"does","not","represent","array\"",")",";","\n","}","\n","return","(","ArrayNode",")","asJsonNode","(",")",";","\n"],"docstring_tokens":["Convert","underlying","representation","into","an","array"]}
{"code_tokens":["\n","private","ManagedObject","reassessPropertyValue","(",")","{","\n","val","property","=","getProperty","(",")",";","\n","val","owner","=","getOwner","(",")",";","\n\n","return","property",".","isVisible","(","owner,","InteractionInitiatedBy",".","FRAMEWORK,","getWhere","(",")",")",".","isAllowed","(",")","\n","&&","property",".","isVisible","(","owner,","InteractionInitiatedBy",".","USER,","getWhere","(",")",")",".","isAllowed","(",")","\n","?","property",".","get","(","owner,","InteractionInitiatedBy",".","USER",")","\n",":","ManagedObject",".","empty","(","property",".","getElementType","(",")",")",";","\n"],"docstring_tokens":["If","visibility","is","vetoed,","returns","an","empty","but","specified","ManagedObject"]}
{"code_tokens":["\n","@Override\n","public","String","getUsername","(",")","{","\n","//",".",".",".","\n","return","commandDto","!=","null\n","?","commandDto",".","getUser","(",")","\n",":","null",";","\n"],"docstring_tokens":["The","user","that","created","the","command"]}
{"code_tokens":["\n","public","List<FacetedMethod>","getActionFacetedMethods","(",")","{","\n","if","(","actionFacetedMethods","==","null",")","{","\n","actionFacetedMethods","=","findActionFacetedMethods","(",")",";","\n","}","\n","return","actionFacetedMethods",";","\n"],"docstring_tokens":["Returns","a","List","of","FacetedMethods","representing","object","actions,","lazily","creating","them","first","if","required"]}
{"code_tokens":["\n","public","static","UserMemento","ofName","(","\n","final","@NonNull","String","name",")","{","\n\n","return","builderWithDefaults","(","name",")","\n",".","roles","(","Can",".","empty","(",")",")","\n",".","build","(",")",";","\n"],"docstring_tokens":["Creates","a","new","user","with","the","specified","name","and","no","roles"]}
{"code_tokens":["\n","public","static","UserMemento","ofNameAndRoles","(","\n","final","@NonNull","String","name,\n","final","RoleMemento",".",".",".","roles",")","{","\n\n","return","builderWithDefaults","(","name",")","\n",".","roles","(","Can",".","ofArray","(","roles",")",")","\n",".","build","(",")",";","\n"],"docstring_tokens":["Creates","a","new","user","with","the","specified","name","and","assigned","roles"]}
{"code_tokens":["\n","public","static","UserMemento","ofNameAndRoleNames","(","\n","final","@NonNull","String","name,\n","final","String",".",".",".","roleNames",")","{","\n","return","ofNameAndRoleNames","(","name,","Stream",".","of","(","roleNames",")",")",";","\n"],"docstring_tokens":["Creates","a","new","user","with","the","specified","name","and","assigned","role","names"]}
{"code_tokens":["\n","@Collection\n","@CollectionLayout","(","sequence","=","\"1\"",")","\n","public","List<RoleMemento>","getRoles","(",")","{","\n","return","roles",".","toList","(",")",";","\n"],"docstring_tokens":["The","roles","associated","with","this","user"]}
{"code_tokens":["\n","@Programmatic\n","public","boolean","isSystem","(",")","{","\n","return","Objects",".","equals","(","SYSTEM_USER,","this",")",";","\n"],"docstring_tokens":["Whether","this","UserMemento","represent","the","system","user"]}
{"code_tokens":["\n","public","void","interactionOpen","(","final","String","format,","final","Object",".",".",".","args",")","{","\n","record","(","1,","_IconResource",".","INTERACTION_OPEN,","format,","args",")",";","\n"],"docstring_tokens":["Interaction","open","event","entry"]}
{"code_tokens":["\n","public","void","interactionClose","(","final","String","format,","final","Object",".",".",".","args",")","{","\n","record","(","1,","_IconResource",".","INTERACTION_CLOSE,","format,","args",")",";","\n"],"docstring_tokens":["Interaction","close","event","entry"]}
{"code_tokens":["\n","public","void","transaction","(","final","String","format,","final","Object",".",".",".","args",")","{","\n","record","(","1,","_IconResource",".","TRANSACTION,","format,","args",")",";","\n"],"docstring_tokens":["General","purpose","transaction","event","entry"]}
{"code_tokens":["\n","void","record","(","final","int","depthLimit,","final","_IconResource","icon,","final","String","format,","final","Object",".",".",".","args",")","{","\n","val","stackTrace","=","_Exceptions",".","streamStackTrace","(",")","\n",".","skip","(","3",")","\n",".","filter","(","_XrayEvent::accept",")","\n",".","collect","(","Can",".","toCan","(",")",")",";","\n","//",".","reverse","(",")",";","\n\n","val","logMessage","=","String",".","format","(","format,","args",")",";","\n\n","_Xray",".","recordDebugLogEvent","(","icon,","logMessage,","stackTrace",")",";","\n\n","val","context","=","String",".","format","(","\"%s||","%s\",\n","Thread",".","currentThread","(",")",".","getName","(",")",",\n","stackTrace",".","stream","(",")","\n",".","limit","(","depthLimit",")","\n",".","map","(","_XrayEvent::stringify",")","\n",".","collect","(","Collectors",".","joining","(","\"","<-","\"",")",")",")",";","\n\n","System",".","err",".","println","(","context",")",";","\n","System",".","err",".","println","(","\"|","\"","+","logMessage",")",";","\n"],"docstring_tokens":["General","purpose","event","log","entry"]}
{"code_tokens":["\n","public","static","void","depthFirst","(","StructuralNodeVisitor","visitor,","StructuralNode","root",")","{","\n","traverse","(","visitor,","root,","0,","_Refs",".","booleanRef","(","true",")",")",";","\n"],"docstring_tokens":["Start","a","depth-first","traverse","of","the","root","and","all","of","its","descendants"]}
{"code_tokens":["\n","protected","final","List<FixtureResult>","run","(","\n","final","String","parameters,\n","final","FixtureScripts","fixtureScripts",")","{","\n","try","{","\n","executionContext","=","fixtureScripts",".","newExecutionContext","(","parameters",")",";","\n","executionContext",".","executeChildIfNotAlready","(","this",")",";","\n","return","executionContext",".","getResults","(",")",";","\n","}","catch","(","Exception","ex",")","{","\n","log",".","error","(","this",".","getQualifiedName","(",")",",","ex",")",";","\n","throw","ex",";","\n","}","\n"],"docstring_tokens":["Entry","point","for","FixtureScripts","service","to","call"]}
{"code_tokens":["\n","public","static","Stream<Field>","streamAllFields","(","\n","final","@Nullable","Class<?>","type,\n","final","boolean","ignoreAccess",")","{","\n\n","return","streamTypeHierarchy","(","type,","InterfacePolicy",".","EXCLUDE",")","//","interfaces","don't","have","fields\n",".","filter","(","t->!Object",".","class",".","equals","(","t",")",")","//","do","not","process","Object","class",".","\n",".","flatMap","(","t->streamFields","(","t,","ignoreAccess",")",")",";","\n"],"docstring_tokens":["Stream","all","fields","of","given","type,","up","the","super","class","hierarchy"]}
{"code_tokens":["\n","public","static","Stream<Method>","streamAllMethods","(","\n","final","@Nullable","Class<?>","type,\n","final","boolean","ignoreAccess",")","{","\n\n","return","streamTypeHierarchy","(","type,","InterfacePolicy",".","INCLUDE",")","\n",".","filter","(","t->!t",".","equals","(","Object",".","class",")",")","//","do","not","process","Object","class",".","\n",".","flatMap","(","t->streamMethods","(","t,","ignoreAccess",")",")",";","\n"],"docstring_tokens":["Stream","all","methods","of","given","type,","up","the","super","class","hierarchy"]}
{"code_tokens":["\n","@Programmatic\n","public","ApplicationFeatureViewModel","getParentNamespace","(",")","{","\n","return","ApplicationFeatureViewModel\n",".","newViewModel","(","getFeatureId","(",")",".","getParentNamespaceFeatureId","(",")",",","featureRepository,","factory",")",";","\n"],"docstring_tokens":["The","parent","package","feature","of","this","class","or","package"]}
{"code_tokens":["\n","@Override\n","public","String","invalidates","(","final","ValidityContext","context",")","{","\n","return","null",";","\n"],"docstring_tokens":["No","limit","to","maximum","length"]}
{"code_tokens":["\n","@Override\n","public","void","process","(","final","ProcessMethodContext","processMethodContext",")","{","\n","//","don't","overwrite","any","defaults","that","might","already","picked","up\n","final","PropertyDefaultFacet","existingDefaultFacet","=","processMethodContext",".","getFacetHolder","(",")","\n",".","lookupNonFallbackFacet","(","PropertyDefaultFacet",".","class",")","\n",".","orElse","(","null",")",";","\n","if","(","existingDefaultFacet","!=","null",")","{","\n","return",";","\n","}","\n\n","//","try","to","infer","defaults","from","the","underlying","return","type\n","final","Class<?>","returnType","=","processMethodContext",".","getMethod","(",")",".","getReturnType","(",")",";","\n","final","DefaultedFacet","returnTypeDefaultedFacet","=","getDefaultedFacet","(","returnType",")",";","\n","if","(","returnTypeDefaultedFacet","!=","null",")","{","\n","FacetUtil",".","addFacet","(","\n","new","PropertyDefaultFacetFromDefaultedFacet","(","\n","returnTypeDefaultedFacet,","processMethodContext",".","getFacetHolder","(",")",")",")",";","\n","}","\n"],"docstring_tokens":["If","there","is","a","DefaultedFacet","on","the","properties","return","type,","then","installs","a","PropertyDefaultFacet","for","the","property","with","the","same","default"]}
{"code_tokens":["\n","@Override\n","public","void","clearArguments","(",")","{","\n","delegate",".","resetParametersToDefault","(",")",";","\n"],"docstring_tokens":["Resets","arguments","to","their","fixed","point","default","values"]}
{"code_tokens":["\n","@Override\n","public","Document","apply","(","final","J2AdocUnit","unit,","final","File","file",")","{","\n\n","val","doc","=","AsciiDocFactory",".","doc","(",")",";","\n\n","//","--","title\n","if","(","!j2aContext",".","isSkipTitleHeader","(",")",")","{","\n","title","(","unit",")","\n",".","ifPresent","(","doc::setTitle",")",";","\n","}","\n\n","//","--","license\n\n","_Strings",".","nonEmpty","(","j2aContext",".","getLicenseHeader","(",")",")","\n",".","ifPresent","(","notice->AsciiDocFactory",".","attrNotice","(","doc,","notice",")",")",";","\n\n\n","//","--","intro\n\n","intro","(","unit,","doc",")",";","\n\n","//","==","API\n","val","titleBlock","=","block","(","doc",")",";","\n","titleBlock",".","setSource","(","\"==","API\"",")",";","\n\n","//","--","java","source\n\n","javaSource","(","unit",")","\n",".","ifPresent","(","block","(","doc",")","::setSource",")",";","\n\n","//","--","member","descriptions\n\n","memberDescriptions","(","unit,","doc",")",";","\n\n\n","//","--","inclusions\n\n","inclusions","(","unit,","file",")","\n",".","stream","(",")","\n",".","map","(","inclusion","->","String",".","format","(","\"include::%s[]\",","inclusion",")",")","\n",".","forEach","(","inclusion","->","{","\n","final","Block","block","=","block","(","doc",")",";","\n","block",".","setSource","(","inclusion",")",";","\n","}",")",";","\n\n","return","doc",";","\n"],"docstring_tokens":["Main","algorithm","for","laying","out","a","unit"]}
{"code_tokens":["\n","public","<F","extends","Facet>","Can<F>","getRankLowerOrEqualTo","(","\n","final","@NonNull","Class<F>","facetType,\n","final","@NonNull","Precedence","precedenceUpper",")","{","\n","_Assert",".","assertEquals","(","this",".","facetType,","facetType",")",";","\n\n","val","precedenceSelected","=","getHighestPrecedenceLowerOrEqualTo","(","precedenceUpper",")",";","\n\n","return","precedenceSelected\n",".","map","(","facetsByPrecedence::get",")","\n",".","map","(","facetsOfSameRank->Can",".","<F>ofCollection","(","_Casts",".","uncheckedCast","(","facetsOfSameRank",")",")",")","\n",".","orElseGet","(","Can::empty",")",";","\n"],"docstring_tokens":["Returns","a","defensive","copy","of","the","selected","rank","of","given","precedence","constraint"]}
{"code_tokens":["\n","public","Optional<Precedence>","getHighestPrecedenceLowerOrEqualTo","(","final","@NonNull","Precedence","precedenceUpper",")","{","\n","return","facetsByPrecedence\n",".","keySet","(",")","\n",".","stream","(",")","\n",".","filter","(","precedence->precedence",".","ordinal","(",")","<=precedenceUpper",".","ordinal","(",")",")","\n",".","max","(","Comparator",".","comparing","(","Precedence::ordinal",")",")",";","\n"],"docstring_tokens":["Returns","highest","found","precedence","within","ranks","that","conforms","to","given","precedence","constraint"]}
{"code_tokens":["\n","public","<F","extends","Facet>","void","purgeIf","(","\n","final","@NonNull","Class<F>","facetType,\n","final","@NonNull","Predicate<?","super","F>","filter",")","{","\n\n","//","reassess","the","top","precedence\n","final","_Reduction<Facet",".","Precedence>","top","=","_Reduction",".","of","(","null,","(","a,","b",")","->a==null?b:a",".","ordinal","(",")",">b",".","ordinal","(",")","?a:b",")",";","\n","val","markedForRemoval","=","_Lists",".","newArrayList","(","facetsByPrecedence",".","size","(",")",")",";","\n\n","facetsByPrecedence",".","forEach","(","(","precedence,","facets",")","->","{","\n","facets",".","removeIf","(","_Casts",".","uncheckedCast","(","filter",")",")",";","\n","if","(","!facets",".","isEmpty","(",")",")","{","\n","top",".","accept","(","precedence",")",";","\n","}","else","{","\n","markedForRemoval",".","add","(","precedence",")",";","\n","}","\n","}",")",";","\n\n","topPrecedenceRef",".","set","(","top",".","getResult","(",")",".","orElse","(","null",")",")",";","\n\n","//","remove","keys","that","associate","empty","lists,","so","finding","highest","used","precedence","by","key","is","simple\n","markedForRemoval",".","forEach","(","facetsByPrecedence::remove",")",";","\n"],"docstring_tokens":["Removes","any","facet","of","facetType","from","facetHolder","if","it","passes","the","given","filter"]}
{"code_tokens":["\n","public","static","TranslatableString","tr","(","\n","final","String","pattern,\n","final","Object",".",".",".","paramArgs",")","{","\n\n","if","(","pattern","==","null",")","{","\n","return","null",";","\n","}","\n","return","new","TranslatableString","(","Type",".","TR,","pattern,","null,","1,","asMap","(","paramArgs",")",")",";","\n\n","//",".",".",".","\n"],"docstring_tokens":["A","translatable","string","with","a","single","pattern","for","both","singular","and","plural","forms"]}
{"code_tokens":["\n","public","static","final","IllegalArgumentException","unmatchedCase","(","final","@Nullable","Object","_case",")","{","\n","return","new","IllegalArgumentException","(","\"internal","error:","unmatched","case","in","switch","statement:","\"+_case",")",";","\n"],"docstring_tokens":["Most","likely","to","be","used","in","switch","statements","to","handle","the","default","case"]}
{"code_tokens":["\n	protected","String","getJdoIsolationLevel","(","TransactionDefinition","definition",")","{","\n		switch","(","definition",".","getIsolationLevel","(",")",")","{","\n			case","TransactionDefinition",".","ISOLATION_SERIALIZABLE:\n				return","Constants",".","TX_SERIALIZABLE",";","\n			case","TransactionDefinition",".","ISOLATION_REPEATABLE_READ:\n				return","Constants",".","TX_REPEATABLE_READ",";","\n			case","TransactionDefinition",".","ISOLATION_READ_COMMITTED:\n				return","Constants",".","TX_READ_COMMITTED",";","\n			case","TransactionDefinition",".","ISOLATION_READ_UNCOMMITTED:\n				return","Constants",".","TX_READ_UNCOMMITTED",";","\n			default:\n				return","null",";","\n		","}","\n	"],"docstring_tokens":["Determine","the","JDO","isolation","level","String","to","use","for","the","given	","Spring","transaction","definition"]}
{"code_tokens":["\n	@Override\n	public","void","cleanupTransaction","(","Object","transactionData",")","{","\n	"],"docstring_tokens":["This","implementation","does","nothing,","as","the","default","beginTransaction","implementation	","does","not","require","any","cleanup"]}
{"code_tokens":["\n","public","static","<T>","Stream<T>","streamNullable","(","final","@Nullable","T","nullable",")","{","\n","return","nullable","!=","null\n","?","Stream",".","of","(","nullable",")","\n",":","Stream",".","empty","(",")",";","\n"],"docstring_tokens":["If","nullable","is","null","returns","the","empty","stream,","otherwise","returns","a","Stream","containing","the","single","element","nullable"]}
{"code_tokens":["\n","public","static","<T>","Stream<T>","stream","(","final","@Nullable","Stream<T>","stream",")","{","\n","return","stream!=null\n","?","stream\n",":","Stream",".","empty","(",")",";","\n"],"docstring_tokens":["If","stream","is","null","returns","the","empty","stream,","otherwise","returns","the","stream","argument"]}
{"code_tokens":["\n","public","static","String","asNormalized","(","final","@NonNull","EnumConstantDeclaration","ecd",")","{","\n","return","ecd",".","getNameAsString","(",")",".","trim","(",")",";","\n"],"docstring_tokens":["Returns","given","EnumConstantDeclaration","as","normal","text,","without","formatting"]}
{"code_tokens":["\n","@Override\n","public","void","process","(","final","ProcessClassContext","processClassContext",")","{","\n","val","cls","=","processClassContext",".","getCls","(",")",";","\n","val","facetHolder","=","processClassContext",".","getFacetHolder","(",")",";","\n\n","addFacetIfPresent","(","TitleFacetViaTitleAnnotation",".","create","(","cls,","facetHolder",")",")",";","\n"],"docstring_tokens":["If","no","method","tagged","with","Title","annotation","then","will","use","Facets","provided","by","FallbackFacetFactory","instead"]}
{"code_tokens":["\n","public","<T>","T","execute","(","\n","final","Callable<T>","callable,\n","final","Class<?>","callingClass,\n","final","String","methodName,\n","final","Object",".",".",".","keys",")","{","\n","if","(","isIgnoreCache","(",")",")","{","\n","try","{","\n","return","callable",".","call","(",")",";","\n","}","catch","(","Exception","e",")","{","\n","throw","new","RuntimeException","(","e",")",";","\n","}","\n","}","\n","final","Key","cacheKey","=","new","Key","(","callingClass,","methodName,","keys",")",";","\n","return","executeWithCaching","(","callable,","cacheKey",")",";","\n"],"docstring_tokens":["Executes","the","callable","if","not","already","cached","for","the","supplied","calling","class,","method","and","keys"]}
{"code_tokens":["\n","@Override\n","public","String","disables","(","final","UsabilityContext","ic",")","{","\n","final","ManagedObject","target","=","ic",".","getTarget","(",")",";","\n","switch","(","ic",".","getInteractionType","(",")",")","{","\n","case","PROPERTY_MODIFY:\n","case","COLLECTION_ADD_TO:\n","case","COLLECTION_REMOVE_FROM:\n","return","disabledReason","(","target",")",";","\n","default:\n","return","null",";","\n","}","\n"],"docstring_tokens":["Immutable","facet","only","prevents","changes","to","a","property","or","a","collection"]}
{"code_tokens":["\n","public","Optional<T>","getResult","(",")","{","\n","if","(","!initialized",")","{","\n","return","Optional",".","empty","(",")",";","\n","}","\n","return","Optional",".","ofNullable","(","result",")",";","\n"],"docstring_tokens":["Returns","the","reduction","result","if","ever","initialized,","Optional.empty","otherwise"]}
{"code_tokens":["\n","@Programmatic\n","public","FixtureScripts",".","MultipleExecutionStrategy","getMultipleExecutionStrategy","(",")","{","\n","return","multipleExecutionStrategy",";","\n"],"docstring_tokens":["Note","that","this","can","be","overridden","on","a","fixture-by-fixture","basis","if","the","fixture","implements","FixtureScriptWithExecutionStrategy"]}
{"code_tokens":["\n","public","CanVector<T>","set","(","int","index,","@NonNull","Can<T>","can",")","{","\n","cans",".","set","(","index,","can",")",";","\n","return","this",";","\n"],"docstring_tokens":["Replaces","the","element","at","the","specified","position","in","this","CanVector","with","the","specified","element"]}
{"code_tokens":["\n","@Bean\n","public","ServletRegistrationBean<SpringServlet>","servletRegistrationBean","(",")","{","\n","String","urlMapping","=","configurationProperties",".","getUrlMapping","(",")",";","\n","val","initParameters","=","new","HashMap<String,","String>","(",")",";","\n","val","isRootMapping","=","RootMappedCondition",".","isRootMapping","(","urlMapping",")",";","\n","if","(","isRootMapping",")","{","\n","urlMapping","=","\"/vaadinServlet/*\"",";","\n","initParameters",".","put","(","InitParameters",".","SERVLET_PARAMETER_PUSH_URL,\n","makeContextRelative","(","urlMapping",".","replace","(","\"*\",","\"\"",")",")",")",";","\n","}","\n","val","registration","=","new","ServletRegistrationBean<SpringServlet>","(","\n","new","IsisServletForVaadin","(","interactionService,","context,","isRootMapping",")",",\n","urlMapping",")",";","\n","registration",".","setInitParameters","(","initParameters",")",";","\n","registration",".","setAsyncSupported","(","configurationProperties",".","isAsyncSupported","(",")",")",";","\n","registration",".","setName","(","ClassUtils",".","getShortNameAsProperty","(","SpringServlet",".","class",")",")",";","\n","return","registration",";","\n"],"docstring_tokens":["Creates","a","ServletRegistrationBean","instance","with","Spring","aware","Vaadin","servlet"]}
{"code_tokens":["\n","public","FixtureScript","getTeardownFixtureWillDelete","(",")","{","\n","return","new","TeardownFixtureJdoAbstract","(",")","{","\n","@Override\n","protected","void","execute","(","final","ExecutionContext","executionContext",")","{","\n","deleteFrom","(","CommandModel",".","class",")",";","\n","}","\n","}",";","\n"],"docstring_tokens":["For","tests","that","need","to","delete","the","command","table","first"]}
{"code_tokens":["\n	public","void","setPersistenceManagerFactory","(","PersistenceManagerFactory","pmf",")","{","\n		Assert",".","notNull","(","pmf,","\"PersistenceManagerFactory","must","not","be","null\"",")",";","\n		this",".","proxy","=","pmf",".","getPersistenceManagerProxy","(",")",";","\n	"],"docstring_tokens":["Set","the","target","JDO","PersistenceManagerFactory","that","this","proxy","should	","delegate","to"]}
{"code_tokens":["\n","@SafeVarargs\n","public","static","<T>","List<T>","of","(","final","@NonNull","T",".",".",".","elements",")","{","\n","if","(","elements",".","length==0",")","{","\n","return","Collections",".","emptyList","(",")",";","\n","}","\n","return","Collections",".","unmodifiableList","(","Arrays",".","asList","(","elements",")",")",";","\n"],"docstring_tokens":["Copies","all","elements","into","a","new","unmodifiable","List"]}
{"code_tokens":["\n","public","static","BlobJpaEmbeddable","fromBlob","(","Blob","blob",")","{","\n","if","(","blob","==","null",")","{","\n","return","null",";","\n","}","\n","val","blobJpaEmbeddable","=","new","BlobJpaEmbeddable","(",")",";","\n","blobJpaEmbeddable",".","bytes","=","blob",".","getBytes","(",")",";","\n","blobJpaEmbeddable",".","mimeType","=","blob",".","getMimeType","(",")",".","toString","(",")",";","\n","blobJpaEmbeddable",".","name","=","blob",".","getName","(",")",";","\n","return","blobJpaEmbeddable",";","\n"],"docstring_tokens":["Factory","method","to","marshall","a","Blob","into","a","BlobJpaEmbeddable"]}
{"code_tokens":["\n","public","static","Blob","toBlob","(","final","BlobJpaEmbeddable","blobJpaEmbeddable",")","{","\n","return","Optional",".","ofNullable","(","blobJpaEmbeddable",")",".","map","(","BlobJpaEmbeddable::asBlob",")",".","orElse","(","null",")",";","\n"],"docstring_tokens":["Reciprocal","method","to","marshall","a","BlobJpaEmbeddable","into","a","Blob"]}
{"code_tokens":["\n","@Override\n","public","Object","getProposed","(",")","{","\n","return","proposed",";","\n"],"docstring_tokens":["The","object","that","is","being","added"]}
{"code_tokens":["\n","public","static","boolean","isSpecified","(","final","@Nullable","ManagedObject","adapter",")","{","\n","return","adapter!=null","&&","adapter!=ManagedObject",".","unspecified","(",")",";","\n"],"docstring_tokens":["whether","has","at","least","a","spec"]}
{"code_tokens":["\n","@Override\n","protected","void","onConfigure","(",")","{","\n","//","logged","in","already?\n","if","(","isSignedIn","(",")","==","false",")","{","\n","IAuthenticationStrategy","authenticationStrategy","=","getApplication","(",")",".","getSecuritySettings","(",")","\n",".","getAuthenticationStrategy","(",")",";","\n","//","get","username,","password","and","zoneID","from","persistence","store\n","String[]","data","=","authenticationStrategy",".","load","(",")",";","\n\n","if","(","(","data","!=","null",")","&&","(","data",".","length",">","1",")",")","{","\n","//","try","to","sign","in","the","user\n","if","(","signIn","(","data[0],","data[1]",")",")","{","\n","username","=","data[0]",";","\n","password","=","data[1]",";","\n\n","if","(","data",".","length",">","2\n","&&","_Strings",".","isNotEmpty","(","data[2]",")",")","{","\n","try","{","\n","timezone","=","ZoneId",".","of","(","data[2]",")",";","\n","}","catch","(","Exception","e",")","{","\n","e",".","printStackTrace","(",")",";","\n","}","\n","}","\n\n","onSignInRemembered","(",")",";","\n","}","else","{","\n","//","the","loaded","credentials","are","wrong",".","erase","them",".","\n","authenticationStrategy",".","remove","(",")",";","\n","}","\n","}","\n","}","\n\n","super",".","onConfigure","(",")",";","\n"],"docstring_tokens":["Try","to","sign-in","with","remembered","credentials"]}
{"code_tokens":["\n","public","String","getString","(","String","key,","final","String","defaultValue",")","{","\n","try","{","\n","String","v","=","context",".","getJobDetail","(",")",".","getJobDataMap","(",")",".","getString","(","key",")",";","\n","return","v","!=","null","?","v",":","defaultValue",";","\n","}","catch","(","Exception","e",")","{","\n","return","defaultValue",";","\n","}","\n"],"docstring_tokens":["Lookup","property","from","the","job","detail"]}
{"code_tokens":["\n","public","static","<T>","void","putSingleton","(","final","@NonNull","Class<?","super","T>","type,","final","@NonNull","T","singleton",")","{","\n\n","//","let","writes","to","the","map","be","atomic\n","synchronized","(","$LOCK",")","{","\n","if","(","singletonMap",".","containsKey","(","type",")",")","\n","throw","new","IllegalStateException","(","\n","\"there","is","already","a","singleton","of","type","'\"+type+\"'","on","this","context",".","\"",")",";","\n","singletonMap",".","put","(","type,","singleton",")",";","\n","}","\n"],"docstring_tokens":["Puts","a","singleton","instance","onto","the","current","context"]}
{"code_tokens":["\n","public","static","Class<?>","loadClass","(","final","String","className",")","throws","ClassNotFoundException","{","\n","return","getDefaultClassLoader","(",")",".","loadClass","(","className",")",";","\n"],"docstring_tokens":["Uses","the","frameworks","default-ClassLoader","to","load","a","class","by","name"]}
{"code_tokens":["\n","protected","static","Function<Throwable,","String>","prefix","(","final","String","prefix",")","{","\n","return","rootCause->prefix","+","\":","\"","+","rootCause",".","getMessage","(",")",";","\n"],"docstring_tokens":["Convenience","for","subclass","implementations","that","always","prefixes","the","exception","message","with","the","supplied","text"]}
{"code_tokens":["\n","@Programmatic\n","public","void","expand","(",")","{","\n","final","Set<TreePath>","expandedPaths","=","getTreeState","(",")",".","getExpandedNodePaths","(",")",";","\n","streamHierarchyUp","(",")","\n",".","map","(","TreeNode::getPositionAsPath",")","\n",".","forEach","(","expandedPaths::add",")",";","\n"],"docstring_tokens":["Expands","this","node","and","all","its","parents"]}
{"code_tokens":["\n	@Override\n	public","void","destroy","(",")","{","\n		logger",".","info","(","\"Closing","JDO","PersistenceManagerFactory\"",")",";","\n		this",".","persistenceManagerFactory",".","close","(",")",";","\n	"],"docstring_tokens":["Close","the","PersistenceManagerFactory","on","bean","factory","shutdown"]}
{"code_tokens":["\n","@Override\n","public","void","onInitialize","(",")","{","\n","super",".","onInitialize","(",")",";","\n","addDropdown","(",")",";","\n"],"docstring_tokens":["Build","UI","only","after","added","to","parent"]}
{"code_tokens":["\n","public","DateTimeConfig","keepOpen","(","final","boolean","keepOpen",")","{","\n","put","(","KeepOpen,","keepOpen",")",";","\n","return","this",";","\n"],"docstring_tokens":["Will","cause","the","date","picker","to","stay","open","after","selecting","a","date"]}
{"code_tokens":["\n","public","DateTimeConfig","allowKeyboardNavigation","(","final","boolean","value",")","{","\n","put","(","KeyboardNavigation,","value",")",";","\n","return","this",";","\n"],"docstring_tokens":["Whether","or","not","to","allow","date","navigation","by","arrow","keys"]}
{"code_tokens":["\n","public","DateTimeConfig","highlightToday","(","final","boolean","value",")","{","\n","put","(","HighlightToday,","value",")",";","\n","return","this",";","\n"],"docstring_tokens":["If","true,","highlights","the","current","date"]}
{"code_tokens":["\n","public","DateTimeConfig","autoClose","(","final","boolean","value",")","{","\n","put","(","AutoClose,","value",")",";","\n","return","this",";","\n"],"docstring_tokens":["Whether","or","not","to","close","the","datepicker","immediately","when","a","date","is","selected"]}
{"code_tokens":["\n","public","static","Stream<Class<?>>","streamGenericTypeArgumentsOf","(","\n","final","@NonNull","Class<?>","owner,\n","final","@NonNull","Type","genericType",")","{","\n\n","return","(","genericType","instanceof","ParameterizedType",")","\n","?","Stream",".","of","(","(","(","ParameterizedType",")","genericType",")",".","getActualTypeArguments","(",")",")","\n",".","flatMap","(","type->streamClassesOfType","(","owner,","type",")",")","\n",":","Stream",".","empty","(",")",";","\n"],"docstring_tokens":["Returns","a","Stream","of","the","actual","type","arguments","for","given","genericType"]}
{"code_tokens":["\n","public","static","<T>","ResponseDigest<T>","ofAsyncFailure","(","\n","final","Future<Response>","asyncResponse,\n","final","Class<T>","entityType,\n","final","Exception","failure",")","{","\n\n","Response","response",";","\n","try","{","\n","response","=","asyncResponse",".","isDone","(",")","?","asyncResponse",".","get","(",")",":","null",";","\n","}","catch","(","Exception","e",")","{","\n","response","=","null",";","\n","}","\n\n","final","ResponseDigest<T>","failureDigest","=","new","ResponseDigest<>","(","response,","entityType,","null",")",";","\n","return","failureDigest",".","digestAsyncFailure","(","asyncResponse",".","isCancelled","(",")",",","failure",")",";","\n"],"docstring_tokens":["a-synchronous","response","failure","processing"]}
{"code_tokens":["\n","@Override\n","public","String","toString","(",")","{","\n","return","title",".","toString","(",")",";","\n"],"docstring_tokens":["Returns","a","String","that","represents","the","value","of","this","object"]}
{"code_tokens":["\n","public","static","LocalDate","endDateFromStartDate","(","LocalDate","date",")","{","\n","return","new","LocalDateInterval","(","date,","null",")",".","endDateFromStartDate","(",")",";","\n\n"],"docstring_tokens":["Returns","an","end","date","given","the","start","date","of","the","next","adjoining","interval"]}
{"code_tokens":["\n","public","ApplicationRole","act","(","\n","final","ApplicationPermissionRule","rule,\n","final","ApplicationPermissionMode","mode,\n","@ParameterLayout","(","\n","describedAs","=","ApplicationFeatureChoices",".","DESCRIBED_AS\n",")","\n","final","ApplicationFeatureChoices",".","AppFeat","feature",")","{","\n\n","applicationPermissionRepository",".","newPermission","(","target,","rule,","mode,","feature",".","getFeatureId","(",")",")",";","\n","return","target",";","\n"],"docstring_tokens":["Adds","a","ApplicationPermission","permission","for","this","role","to","a","ApplicationFeature","feature"]}
{"code_tokens":["\n","protected","MarkupContainer","createShallowComponentForRegular","(",")","{","\n","return","Wkt",".","container","(","ID_SCALAR_IF_REGULAR",")",";","//","empty","component",";","\n"],"docstring_tokens":["Builds","the","hidden","REGULAR","component","when","in","COMPACT","format"]}
{"code_tokens":["\n","protected","Component","createShallowComponentForCompact","(",")","{","\n","return","Wkt",".","container","(","ID_SCALAR_IF_COMPACT",")",";","//","empty","component\n"],"docstring_tokens":["Builds","the","hidden","COMPACT","component","when","in","REGULAR","format"]}
{"code_tokens":["\n","public","void","repaint","(","final","AjaxRequestTarget","target",")","{","\n","target",".","add","(","this",")",";","\n"],"docstring_tokens":["Repaints","this","panel","of","just","some","of","its","children"]}
{"code_tokens":["\n","@Override\n","protected","AuthorizationInfo","queryForAuthorizationInfo","(","final","PrincipalCollection","principals,","final","LdapContextFactory","ldapContextFactory",")","throws","NamingException","{","\n","final","Set<String>","roleNames","=","getRoles","(","principals,","ldapContextFactory",")",";","\n","SimpleAuthorizationInfo","simpleAuthorizationInfo","=","new","SimpleAuthorizationInfo","(","roleNames",")",";","\n","Set<String>","stringPermissions","=","permsFor","(","roleNames",")",";","\n","final","String","username","=","(","String",")","getAvailablePrincipal","(","principals",")",";","\n","final","LdapContext","finalLdapContext","=","ldapContextFactory",".","getSystemLdapContext","(",")",";","\n","stringPermissions",".","addAll","(","getPermissionForUser","(","username,","finalLdapContext",")",")",";","\n","stringPermissions",".","addAll","(","getPermissionForRole","(","username,","finalLdapContext",")",")",";","\n","simpleAuthorizationInfo",".","setStringPermissions","(","stringPermissions",")",";","\n\n","return","simpleAuthorizationInfo",";","\n"],"docstring_tokens":["Get","groups","from","LDAP"]}
{"code_tokens":["\n","protected","JsonRepresentation","getLinks","(",")","{","\n","JsonRepresentation","links","=","representation",".","getArray","(","\"links\"",")",";","\n","if","(","links","==","null",")","{","\n","links","=","JsonRepresentation",".","newArray","(",")",";","\n","representation",".","mapPut","(","\"links\",","links",")",";","\n","}","\n","return","links",";","\n"],"docstring_tokens":["Will","lazily","create","links","array","as","required"]}
{"code_tokens":["\n","protected","JsonRepresentation","getExtensions","(",")","{","\n","JsonRepresentation","extensions","=","representation",".","getMap","(","\"extensions\"",")",";","\n","if","(","extensions","==","null",")","{","\n","extensions","=","JsonRepresentation",".","newMap","(",")",";","\n","representation",".","mapPut","(","\"extensions\",","extensions",")",";","\n","}","\n","return","extensions",";","\n"],"docstring_tokens":["Will","lazily","create","extensions","map","as","required"]}
{"code_tokens":["\n","public","static","InteractionContext","ofUserWithSystemDefaults","(","\n","final","@NonNull","UserMemento","user",")","{","\n","return","InteractionContext",".","builder","(",")","\n",".","user","(","user",")","\n",".","clock","(","VirtualClock",".","system","(",")",")","\n",".","timeZone","(","ZoneId",".","systemDefault","(",")",")","\n",".","build","(",")",";","\n"],"docstring_tokens":["Creates","a","new","InteractionContext","with","the","specified","user","and","system","defaults","for","clock,","locale","and","time-zone"]}
{"code_tokens":["\n","@Override\n","public","boolean","hasReturn","(",")","{","\n","if","(","getReturnType","(",")","==","null",")","{","\n","//","this","shouldn't","happen",";","return","Type","always","defined,","even","if","represents","void",".","class\n","return","false",";","\n","}","\n","return","getReturnType","(",")","!=","getSpecificationLoader","(",")",".","loadSpecification","(","void",".","class",")",";","\n"],"docstring_tokens":["Returns","true","if","the","represented","action","returns","something,","else","returns","false"]}
{"code_tokens":["\n","@Override\n","public","boolean","isPropertyAccessor","(","final","Method","method",")","{","\n","return","false",";","\n"],"docstring_tokens":["The","method","way","well","represent","a","reference","property,","but","this","facet","factory","does","not","have","any","opinion","on","the","matter"]}
{"code_tokens":["\n","public","static","void","raise","(","\n","@NonNull","SpecificationLoader","specLoader,\n","@NonNull","Identifier","deficiencyOrigin,\n","@NonNull","String","deficiencyMessage",")","{","\n\n","specLoader",".","addValidationFailure","(","ValidationFailure",".","of","(","deficiencyOrigin,","deficiencyMessage",")",")",";","\n"],"docstring_tokens":["Collects","a","new","ValidationFailure","with","given","origin","and","message"]}
{"code_tokens":["\n","@Override\n","public","ObjectValidityContext","createValidityInteractionContext","(","\n","final","ManagedObject","targetAdapter,","final","InteractionInitiatedBy","interactionInitiatedBy",")","{","\n","return","new","ObjectValidityContext","(","targetAdapter,","getFeatureIdentifier","(",")",",","interactionInitiatedBy",")",";","\n"],"docstring_tokens":["Create","an","InteractionContext","representing","an","attempt","to","save","the","object"]}
{"code_tokens":["\n","public","static","Optional<Class<?>>","inferComponentType","(","\n","final","@Nullable","Class<?>","arrayType",")","{","\n","if","(","!isArrayType","(","arrayType",")",")","{","\n","return","Optional",".","empty","(",")",";","\n","}","\n","return","Optional",".","ofNullable","(","arrayType",".","getComponentType","(",")",")",";","\n"],"docstring_tokens":["Returns","the","inferred","element","type","of","the","specified","array","type"]}
{"code_tokens":["\n","@Nullable\n","Method","get","(","String","name",")","{","\n","int","index","=","indexOf","(","name",")",";","\n","return","index","!=","-1","?","this",".","attributeMethods[index]",":","null",";","\n"],"docstring_tokens":["Get","the","attribute","with","the","specified","name","or","null","if","no","matching","attribute","exists"]}
{"code_tokens":["\n","boolean","canThrowTypeNotPresentException","(","int","index",")","{","\n","return","this",".","canThrowTypeNotPresentException[index]",";","\n"],"docstring_tokens":["Determine","if","the","attribute","at","the","specified","index","could","throw","a","TypeNotPresentException","when","accessed"]}
{"code_tokens":["\n","int","indexOf","(","String","name",")","{","\n","for","(","int","i","=","0",";","i","<","this",".","attributeMethods",".","length",";","i++",")","{","\n","if","(","this",".","attributeMethods[i]",".","getName","(",")",".","equals","(","name",")",")","{","\n","return","i",";","\n","}","\n","}","\n","return","-1",";","\n"],"docstring_tokens":["Get","the","index","of","the","attribute","with","the","specified","name,","or","-1","if","there","is","no","attribute","with","the","name"]}
{"code_tokens":["\n","int","indexOf","(","Method","attribute",")","{","\n","for","(","int","i","=","0",";","i","<","this",".","attributeMethods",".","length",";","i++",")","{","\n","if","(","this",".","attributeMethods[i]",".","equals","(","attribute",")",")","{","\n","return","i",";","\n","}","\n","}","\n","return","-1",";","\n"],"docstring_tokens":["Get","the","index","of","the","specified","attribute,","or","-1","if","the","attribute","is","not","in","this","collection"]}
{"code_tokens":["\n","int","size","(",")","{","\n","return","this",".","attributeMethods",".","length",";","\n"],"docstring_tokens":["Get","the","number","of","attributes","in","this","collection"]}
{"code_tokens":["\n","boolean","hasDefaultValueMethod","(",")","{","\n","return","this",".","hasDefaultValueMethod",";","\n"],"docstring_tokens":["Determine","if","at","least","one","of","the","attribute","methods","has","a","default","value"]}
{"code_tokens":["\n","boolean","hasNestedAnnotation","(",")","{","\n","return","this",".","hasNestedAnnotation",";","\n"],"docstring_tokens":["Determine","if","at","least","one","of","the","attribute","methods","is","a","nested","annotation"]}
{"code_tokens":["\n","static","_Annotations_AttributeMethods","forAnnotationType","(","@Nullable","Class<?","extends","Annotation>","annotationType",")","{","\n","if","(","annotationType","==","null",")","{","\n","return","NONE",";","\n","}","\n","return","cache",".","computeIfAbsent","(","annotationType,","_Annotations_AttributeMethods::compute",")",";","\n"],"docstring_tokens":["Get","the","attribute","methods","for","the","given","annotation","type"]}
{"code_tokens":["\n","public","static","void","viewmodelRefresh","(","final","IRequestablePage","iRequestablePage",")","{","\n","if","(","iRequestablePage","instanceof","EntityPage",")","{","\n\n","val","entityPage","=","(","EntityPage",")","iRequestablePage",";","\n\n","//","optimization,","not","strictly","required\n","if","(","entityPage",".","isAlreadyRefreshedWithinThisInteraction","(",")",")","{","\n","return",";","\n","}","\n\n","val","entityModel","=","(","EntityModel",")","entityPage",".","getUiHintContainerIfAny","(",")",";","\n","val","spec","=","entityModel",".","getObject","(",")",".","getSpecification","(",")",";","\n","if","(","spec",".","isViewModel","(",")",")","{","\n\n","val","viewModelFacet","=","spec",".","getFacet","(","ViewModelFacet",".","class",")",";","\n","if","(","viewModelFacet",".","containsEntities","(",")",")","{","\n\n","_Debug",".","onCondition","(","XrayUi",".","isXrayEnabled","(",")",",","(",")","->","{","\n","_Debug",".","log","(","\"about","to","refresh","EntityPage",".",".","\"",")",";","\n","}",")",";","\n\n","val","viewmodel","=","entityModel",".","getBookmarkedOwner","(",")",";","\n","if","(","viewmodel",".","isBookmarkMemoized","(",")",")","{","\n","viewmodel",".","reloadViewmodelFromMemoizedBookmark","(",")",";","\n","}","else","{","\n","val","bookmark","=","PageParameterUtils\n",".","toBookmark","(","entityPage",".","getPageParameters","(",")",")",".","orElseThrow","(",")",";","\n","viewmodel",".","reloadViewmodelFromBookmark","(","bookmark",")",";","\n","}","\n\n","}","\n","}","\n","}","\n"],"docstring_tokens":["Re-fetch","entities","for","view-models,","usually","required","once","at","begin","of","request"]}
{"code_tokens":["\n","@Programmatic\n","public","ApplicationFeatureId","getParentNamespaceFeatureId","(",")","{","\n\n","_Assert",".","assertFalse","(","sort",".","isMember","(",")",")",";","\n\n","if","(","sort",".","isType","(",")",")","{","\n","return","ApplicationFeatureId",".","newNamespace","(","getNamespace","(",")",")",";","\n","}","else","{","\n","val","namespace","=","getNamespace","(",")",";","//","eg","aaa",".","bbb",".","ccc\n","if","(","!namespace",".","contains","(","\"",".","\"",")",")","{","\n","return","null",";","//","parent","is","root\n","}","\n","final","int","cutOffPos","=","namespace",".","lastIndexOf","(","'",".","'",")",";","\n","final","String","parentPackageName","=","namespace",".","substring","(","0,","cutOffPos",")",";","\n","return","newNamespace","(","parentPackageName",")",";","\n","}","\n"],"docstring_tokens":["The","ApplicationFeatureId","id","of","the","parent","package","of","this","class","or","package"]}
{"code_tokens":["\n","public","ApplicationFeatureId","withNamespace","(","final","@NonNull","String","namespace",")","{","\n","return","newFeature","(","namespace,","this",".","getTypeSimpleName","(",")",",","this",".","getLogicalMemberName","(",")",")",";","\n"],"docstring_tokens":["Returns","a","new","instance","that","is","a","clone","of","this,","except","for","the","namespace,","which","is","taken","from","the","argument"]}
{"code_tokens":["\n","@SneakyThrows\n","private","ManagedObject","invokeValueTypeMixin","(","\n","final","@NonNull","Can<ManagedObject>","actionParameters",")","{","\n\n","val","method","=","(","(","ObjectMemberAbstract",")","action",")",".","getFacetedMethod","(",")",".","getMethod","(",")",";","\n\n","final","Object[]","executionParameters","=","UnwrapUtil",".","multipleAsArray","(","actionParameters",")",";","\n","final","Object","targetPojo","=","UnwrapUtil",".","single","(","interactionHead","(",")",".","getTarget","(",")",")",";","\n\n","val","resultPojo","=","CanonicalParameterUtil\n",".","invoke","(","method,","targetPojo,","executionParameters",")",";","\n\n","return","mmc","(",")",".","getObjectManager","(",")",".","adapt","(","resultPojo",")",";","\n"],"docstring_tokens":["value-type","mixins","have","no","rule-checking,","no","domain","events","and","no","routing"]}
{"code_tokens":["\n","public","boolean","contains","(","final","LocalDate","date",")","{","\n","if","(","date","==","null",")","{","\n","return","false",";","\n","}","\n","if","(","endDate","(",")","==","null",")","{","\n","if","(","startDate","(",")","==","null",")","{","\n","return","true",";","\n","}","\n","if","(","date",".","isEqual","(","startDate","(",")",")","||","date",".","isAfter","(","startDate","(",")",")",")","{","\n","return","true",";","\n","}","\n","return","false",";","\n","}","\n","return","asInterval","(",")",".","contains","(","date",".","toInterval","(",")",")",";","\n"],"docstring_tokens":["Does","this","date","contain","the","specified","time","interval"]}
{"code_tokens":["\n","public","boolean","contains","(","final","T","localDateInterval",")","{","\n","return","asInterval","(",")",".","contains","(","localDateInterval",".","asInterval","(",")",")",";","\n"],"docstring_tokens":["Does","this","time","interval","contain","the","specified","time","interval"]}
{"code_tokens":["\n","@SuppressWarnings","(","\"unchecked\"",")","\n","public","T","overlap","(","final","T","otherInterval",")","{","\n","if","(","otherInterval","==","null",")","{","\n","return","null",";","\n","}","\n","if","(","otherInterval",".","isInfinite","(",")",")","{","\n","return","(","T",")","this",";","\n","}","\n","if","(","this",".","isInfinite","(",")",")","{","\n","return","otherInterval",";","\n","}","\n","final","Interval","thisAsInterval","=","asInterval","(",")",";","\n","final","Interval","otherAsInterval","=","otherInterval",".","asInterval","(",")",";","\n","Interval","overlap","=","thisAsInterval",".","overlap","(","otherAsInterval",")",";","\n","if","(","overlap","==","null",")","{","\n","return","null",";","\n","}","\n","return","newInterval","(","overlap",")",";","\n"],"docstring_tokens":["Gets","the","overlap","between","this","interval","and","another","interval"]}
{"code_tokens":["\n","public","boolean","within","(","final","T","interval",")","{","\n","return","interval",".","asInterval","(",")",".","contains","(","asInterval","(",")",")",";","\n"],"docstring_tokens":["Does","this","interval","is","within","the","specified","interval"]}
{"code_tokens":["\n","private","void","buildGui","(",")","{","\n\n","//","REVIEW:","this","is","nasty,","both","write","to","the","same","entityLink","field\n","//","even","though","only","one","is","used\n","componentIfCompact","=","addComponentForCompact","(",")",";","\n","componentIfRegular","=","addComponentForRegular","(",")",";","\n\n","getRendering","(",")",".","buildGui","(","this",")",";","\n","addCssForMetaModel","(",")",";","\n\n","if","(","!subscribers",".","isEmpty","(",")",")","{","\n","addFormComponentBehavior","(","new","ScalarUpdatingBehavior","(",")",")",";","\n","}","\n"],"docstring_tokens":["Builds","GUI","lazily","prior","to","first","render"]}
{"code_tokens":["\n","public","Optional<ManagedObject>","getMixedIn","(",")","{","\n","return","Objects",".","equals","(","getOwner","(",")",",","getTarget","(",")",")","\n","?","Optional",".","empty","(",")","\n",":","Optional",".","of","(","getOwner","(",")",")",";","\n"],"docstring_tokens":["as","used","by","the","domain","event","subsystem"]}
{"code_tokens":["\n","public","static","void","millis","(","long","millis",")","{","\n\n","try","{","\n","Thread",".","sleep","(","millis",")",";","\n","}","catch","(","InterruptedException","e",")","{","\n","log",".","warn","(","\"Interrupted!\",","e",")",";","\n","//","Restore","interrupted","state",".",".",".","\n","Thread",".","currentThread","(",")",".","interrupt","(",")",";","\n","}","\n\n"],"docstring_tokens":["Suspends","the","current","thread","for","given","milliseconds","of","time"]}
{"code_tokens":["\n","@Override\n","protected","ApplicationAdvice","appliesTo","(","final","IModel<?>","model",")","{","\n","if","(","!","(","model","instanceof","ServiceActionsModel",")",")","{","\n","return","ApplicationAdvice",".","DOES_NOT_APPLY",";","\n","}","\n","val","menuUiModel","=","(","(","ServiceActionsModel",")","model",")",".","getObject","(",")",";","\n","val","menuBarSelect","=","menuUiModel",".","getMenuBarSelect","(",")",";","\n","return","appliesIf","(","\n","menuBarSelect","!=","DomainServiceLayout",".","MenuBar",".","TERTIARY\n","&&","menuBarSelect","!=","null",")",";","\n"],"docstring_tokens":["Applies","to","primary","and","secondary","service","action","models"]}
{"code_tokens":["\n","private","static","int","getWorksheetProtectionBlockInsertPos","(","List<RecordBase>","records",")","{","\n","int","i","=","getDimensionsIndex","(","records",")",";","\n","while","(","i",">","0",")","{","\n","i--",";","\n","Object","rb","=","records",".","get","(","i",")",";","\n","if","(","!isProtectionSubsequentRecord","(","rb",")",")","{","\n","return","i+1",";","\n","}","\n","}","\n","throw","new","IllegalStateException","(","\"did","not","find","insert","pos","for","protection","block\"",")",";","\n"],"docstring_tokens":["Finds","the","index","where","the","protection","block","should","be","inserted"]}
{"code_tokens":["\n","private","static","int","findInsertPosForNewCondFormatTable","(","List<RecordBase>","records",")","{","\n\n","for","(","int","i","=","records",".","size","(",")","-","2",";","i",">=","0",";","i--",")","{","//","-2","to","skip","EOF","record\n","Object","rb","=","records",".","get","(","i",")",";","\n","if","(","rb","instanceof","MergedCellsTable",")","{","\n","return","i","+","1",";","\n","}","\n","if","(","rb","instanceof","DataValidityTable",")","{","\n","continue",";","\n","}","\n\n","Record","rec","=","(","org",".","apache",".","poi",".","hssf",".","record",".","Record",")","rb",";","\n","switch","(","rec",".","getSid","(",")",")","{","\n","case","WindowTwoRecord",".","sid:\n","case","SCLRecord",".","sid:\n","case","PaneRecord",".","sid:\n","case","SelectionRecord",".","sid:\n","case","UnknownRecord",".","STANDARDWIDTH_0099:\n","//","MergedCellsTable","usually","here\n","case","UnknownRecord",".","LABELRANGES_015F:\n","case","UnknownRecord",".","PHONETICPR_00EF:\n","//","ConditionalFormattingTable","goes","here\n","return","i","+","1",";","\n","//","HyperlinkTable","(","not","aggregated","by","POI","yet",")","\n","//","DataValidityTable\n","}","\n","}","\n","throw","new","RuntimeException","(","\"Did","not","find","Window2","record\"",")",";","\n"],"docstring_tokens":["Find","correct","position","to","add","new","CFHeader","record"]}
{"code_tokens":["\n","private","static","int","findDataValidationTableInsertPos","(","List<RecordBase>","records",")","{","\n","int","i","=","records",".","size","(",")","-","1",";","\n","if","(","!","(","records",".","get","(","i",")","instanceof","EOFRecord",")",")","{","\n","throw","new","IllegalStateException","(","\"Last","sheet","record","should","be","EOFRecord\"",")",";","\n","}","\n","while","(","i",">","0",")","{","\n","i--",";","\n","RecordBase","rb","=","records",".","get","(","i",")",";","\n","if","(","isDVTPriorRecord","(","rb",")",")","{","\n","Record","nextRec","=","(","org",".","apache",".","poi",".","hssf",".","record",".","Record",")","records",".","get","(","i","+","1",")",";","\n","if","(","!isDVTSubsequentRecord","(","nextRec",".","getSid","(",")",")",")","{","\n","throw","new","IllegalStateException","(","\"Unexpected","(","\"","+","nextRec",".","getClass","(",")",".","getName","(",")","\n","+","\"",")","found","after","(","\"","+","rb",".","getClass","(",")",".","getName","(",")","+","\"",")","\"",")",";","\n","}","\n","return","i+1",";","\n","}","\n","Record","rec","=","(","org",".","apache",".","poi",".","hssf",".","record",".","Record",")","rb",";","\n","if","(","!isDVTSubsequentRecord","(","rec",".","getSid","(",")",")",")","{","\n","throw","new","IllegalStateException","(","\"Unexpected","(","\"","+","rec",".","getClass","(",")",".","getName","(",")","\n","+","\"",")","while","looking","for","DV","Table","insert","pos\"",")",";","\n","}","\n","}","\n","return","0",";","\n"],"docstring_tokens":["Finds","the","index","where","the","sheet","validations","header","record","should","be","inserted"]}
{"code_tokens":["\n","private","static","int","getDimensionsIndex","(","List<RecordBase>","records",")","{","\n","int","nRecs","=","records",".","size","(",")",";","\n","for","(","int","i=0",";","i<nRecs",";","i++",")","{","\n","if","(","records",".","get","(","i",")","instanceof","DimensionsRecord",")","{","\n","return","i",";","\n","}","\n","}","\n","//","worksheet","stream","is","seriously","broken\n","throw","new","RuntimeException","(","\"DimensionsRecord","not","found\"",")",";","\n"],"docstring_tokens":["DIMENSIONS","record","is","always","present"]}
{"code_tokens":["\n","public","static","void","registerFunction","(","String","name,","Function","func",")","{","\n","FunctionMetadata","metaData","=","FunctionMetadataRegistry",".","getFunctionByName","(","name",")",";","\n","if","(","metaData","==","null",")","{","\n","if","(","AnalysisToolPak",".","isATPFunction","(","name",")",")","{","\n","throw","new","IllegalArgumentException","(","name","+","\"","is","a","function","from","the","Excel","Analysis","Toolpack",".","\"","+\n","\"Use","AnalysisToolpack",".","registerFunction","(","String","name,","FreeRefFunction","func",")","instead",".","\"",")",";","\n","}","\n\n","throw","new","IllegalArgumentException","(","\"Unknown","function:","\"","+","name",")",";","\n","}","\n\n","int","idx","=","metaData",".","getIndex","(",")",";","\n","if","(","functions[idx]","instanceof","NotImplementedFunction",")","{","\n","functions[idx]","=","func",";","\n","}","else","{","\n","throw","new","IllegalArgumentException","(","\"POI","already","implements","\"","+","name","+\n","\"",".","You","cannot","override","POI's","implementations","of","Excel","functions\"",")",";","\n","}","\n"],"docstring_tokens":["Register","a","new","function","in","runtime"]}
{"code_tokens":["\n","public","boolean","isColumnTracked","(","int","column",")","{","\n","return","(","trackAllColumns","&&","!untrackedColumns",".","contains","(","column",")",")","\n","||","maxColumnWidths",".","containsKey","(","column",")",";","\n"],"docstring_tokens":["Returns","true","if","column","is","currently","tracked","for","auto-sizing"]}
{"code_tokens":["\n","public","void","untrackAllColumns","(",")","{","\n","trackAllColumns","=","false",";","\n","maxColumnWidths",".","clear","(",")",";","\n","untrackedColumns",".","clear","(",")",";","\n"],"docstring_tokens":["Untrack","all","columns","that","were","previously","tracked","for","auto-sizing"]}
{"code_tokens":["\n","public","int","getBestFitColumnWidth","(","int","column,","boolean","useMergedCells",")","{","\n","if","(","!maxColumnWidths",".","containsKey","(","column",")",")","{","\n","//","if","column","is","not","tracked,","implicitly","track","the","column","if","trackAllColumns","is","True","and","column","has","not","been","explicitly","untracked\n","if","(","trackAllColumns",")","{","\n","if","(","!implicitlyTrackColumn","(","column",")",")","{","\n","final","Throwable","reason","=","new","IllegalStateException","(","\n","\"Column","was","explicitly","untracked","after","trackAllColumns","(",")","was","called",".","\"",")",";","\n","throw","new","IllegalStateException","(","\n","\"Cannot","get","best","fit","column","width","on","explicitly","untracked","column","\"","+","column","+","\"",".","\"","+\n","\"Either","explicitly","track","the","column","or","track","all","columns",".","\",","reason",")",";","\n","}","\n","}","\n","else","{","\n","final","Throwable","reason","=","new","IllegalStateException","(","\n","\"Column","was","never","explicitly","tracked","and","isAllColumnsTracked","(",")","is","false","\"","+\n","\"","(","trackAllColumns","(",")","was","never","called","or","untrackAllColumns","(",")","was","called","after","trackAllColumns","(",")","was","called",")",".","\"",")",";","\n","throw","new","IllegalStateException","(","\n","\"Cannot","get","best","fit","column","width","on","untracked","column","\"","+","column","+","\"",".","\"","+\n","\"Either","explicitly","track","the","column","or","track","all","columns",".","\",","reason",")",";","\n","}","\n","}","\n","final","double","width","=","maxColumnWidths",".","get","(","column",")",".","getMaxColumnWidth","(","useMergedCells",")",";","\n","return","Math",".","toIntExact","(","Math",".","round","(","256*width",")",")",";","\n"],"docstring_tokens":["Get","the","best-fit","width","of","a","tracked","column"]}
{"code_tokens":["\n","public","void","updateColumnWidths","(","Row","row",")","{","\n","//","track","new","columns\n","implicitlyTrackColumnsInRow","(","row",")",";","\n","\n","//","update","the","widths\n","//","for-loop","over","the","shorter","of","the","number","of","cells","in","the","row","and","the","number","of","tracked","columns\n","//","these","two","for-loops","should","do","the","same","thing\n","if","(","maxColumnWidths",".","size","(",")","<","row",".","getPhysicalNumberOfCells","(",")",")","{","\n","//","loop","over","the","tracked","columns,","because","there","are","fewer","tracked","columns","than","cells","in","this","row\n","for","(","final","Entry<Integer,","ColumnWidthPair>","e",":","maxColumnWidths",".","entrySet","(",")",")","{","\n","final","int","column","=","e",".","getKey","(",")",";","\n","final","Cell","cell","=","row",".","getCell","(","column",")",";","//is","MissingCellPolicy=Row",".","RETURN_NULL_AND_BLANK","needed?\n\n","//","FIXME:","if","cell","belongs","to","a","merged","region,","some","of","the","merged","region","may","have","fallen","outside","of","the","random","access","window\n","//","In","this","case,","getting","the","column","width","may","result","in","an","error",".","Need","to","gracefully","handle","this",".","\n\n","//","FIXME:","Most","cells","are","not","merged,","so","calling","getCellWidth","twice","re-computes","the","same","value","twice",".","\n","//","Need","to","rewrite","this","to","avoid","unnecessary","computation","if","this","proves","to","be","a","performance","bottleneck",".","\n\n","if","(","cell","!=","null",")","{","\n","final","ColumnWidthPair","pair","=","e",".","getValue","(",")",";","\n","updateColumnWidth","(","cell,","pair",")",";","\n","}","\n","}","\n","}","\n","else","{","\n","//","loop","over","the","cells","in","this","row,","because","there","are","fewer","cells","in","this","row","than","tracked","columns\n","for","(","final","Cell","cell",":","row",")","{","\n","final","int","column","=","cell",".","getColumnIndex","(",")",";","\n\n","//","FIXME:","if","cell","belongs","to","a","merged","region,","some","of","the","merged","region","may","have","fallen","outside","of","the","random","access","window\n","//","In","this","case,","getting","the","column","width","may","result","in","an","error",".","Need","to","gracefully","handle","this",".","\n\n","//","FIXME:","Most","cells","are","not","merged,","so","calling","getCellWidth","twice","re-computes","the","same","value","twice",".","\n","//","Need","to","rewrite","this","to","avoid","unnecessary","computation","if","this","proves","to","be","a","performance","bottleneck",".","\n\n","if","(","maxColumnWidths",".","containsKey","(","column",")",")","{","\n","final","ColumnWidthPair","pair","=","maxColumnWidths",".","get","(","column",")",";","\n","updateColumnWidth","(","cell,","pair",")",";","\n","}","\n","}","\n","}","\n"],"docstring_tokens":["Calculate","the","best","fit","width","for","each","tracked","column","in","row"]}
{"code_tokens":["\n","@Internal\n","public","void","setIftcHtml","(","byte","value",")","\n","{","\n","field_3_info3","=","(","short",")","iftcHtml",".","setValue","(","field_3_info3,","value",")",";","\n"],"docstring_tokens":["Sets","the","iftcHtml","field","value"]}
{"code_tokens":["\n","protected","float","processColumnWidths","(","HSSFSheet","sheet,","int","maxSheetColumns,\n","Element","table",")","{","\n","float","tableWidth","=","0",";","\n\n","if","(","isOutputRowNumbers","(",")",")","{","\n","final","float","columnWidthIn","=","getDefaultColumnWidth","(","sheet",")","/","DPI",";","\n\n","final","Element","rowNumberColumn","=","foDocumentFacade\n",".","createTableColumn","(",")",";","\n","rowNumberColumn",".","setAttribute","(","\"column-width\",","columnWidthIn","+","\"in\"",")",";","\n","table",".","appendChild","(","rowNumberColumn",")",";","\n\n","tableWidth","+=","columnWidthIn",";","\n","}","\n\n","for","(","int","c","=","0",";","c","<","maxSheetColumns",";","c++",")","{","\n","if","(","!isOutputHiddenColumns","(",")","&&","sheet",".","isColumnHidden","(","c",")",")","{","\n","continue",";","\n","}","\n\n","final","float","columnWidthIn","=","getColumnWidth","(","sheet,","c",")","/","DPI",";","\n\n","Element","col","=","foDocumentFacade",".","createTableColumn","(",")",";","\n","col",".","setAttribute","(","\"column-width\",","columnWidthIn","+","\"in\"",")",";","\n","table",".","appendChild","(","col",")",";","\n\n","tableWidth","+=","columnWidthIn",";","\n","}","\n\n","table",".","setAttribute","(","\"width\",","tableWidth","+","\"in\"",")",";","\n","return","tableWidth",";","\n"],"docstring_tokens":["Creates","COLGROUP","element","with","width","specified","for","all","columns"]}
{"code_tokens":["\n\n","public","String","getName","(",")","\n","{","\n","return","_property",".","getName","(",")",";","\n"],"docstring_tokens":["get","the","name","of","the","Entry"]}
{"code_tokens":["\n","@Override\n","public","String","getText","(",")","{","\n","return","getHeaderFooter","(",")",".","getOddFooter","(",")",";","\n"],"docstring_tokens":["Get","the","content","text","representing","the","footer"]}
{"code_tokens":["\n","@Override\n","public","void","setText","(","String","text",")","{","\n","if","(","text","==","null",")","{","\n","getHeaderFooter","(",")",".","unsetOddFooter","(",")",";","\n","}","else","{","\n","getHeaderFooter","(",")",".","setOddFooter","(","text",")",";","\n","}","\n"],"docstring_tokens":["Set","a","text","for","the","footer"]}
{"code_tokens":["\n","public","static","void","main","(","String[]","args",")","{","\n","if","(","args",".","length","<=","0",")","{","\n","System",".","err",".","println","(","\"No","files","names","provided\"",")",";","\n","}","else","{","\n","for","(","String","arg",":","args",")","{","\n","try","{","\n","Msg2txt","processor","=","new","Msg2txt","(","arg",")",";","\n","processor",".","processMessage","(",")",";","\n","}","catch","(","IOException","e",")","{","\n","System",".","err",".","println","(","\"Could","not","process","\"","+","arg","+","\":","\"","+","e",")",";","\n","}","\n","}","\n","}","\n"],"docstring_tokens":["Processes","the","list","of","arguments","as","a","list","of","names","of","Outlook","MSG","files"]}
{"code_tokens":["\n","public","static","Calendar","getJavaCalendar","(","double","date,","boolean","use1904windowing,","TimeZone","timeZone,","boolean","roundSeconds",")","{","\n","if","(","!isValidExcelDate","(","date",")",")","{","\n","return","null",";","\n","}","\n","int","wholeDays","=","(","int",")","Math",".","floor","(","date",")",";","\n","int","millisecondsInDay","=","(","int",")","(","(","date","-","wholeDays",")","*","DAY_MILLISECONDS","+","0",".","5",")",";","\n","Calendar","calendar",";","\n","if","(","timeZone","!=","null",")","{","\n","calendar","=","LocaleUtil",".","getLocaleCalendar","(","timeZone",")",";","\n","}","else","{","\n","calendar","=","LocaleUtil",".","getLocaleCalendar","(",")",";","//","using","default","time-zone\n","}","\n","setCalendar","(","calendar,","wholeDays,","millisecondsInDay,","use1904windowing,","roundSeconds",")",";","\n","return","calendar",";","\n"],"docstring_tokens":["Get","EXCEL","date","as","Java","Calendar","with","given","time","zone"]}
{"code_tokens":["\n","public","static","boolean","isCellDateFormatted","(","Cell","cell",")","{","\n","return","isCellDateFormatted","(","cell,","null",")",";","\n"],"docstring_tokens":["Check","if","a","cell","contains","a","date","Since","dates","are","stored","internally","in","Excel","as","double","values","we","infer","it","is","a","date","if","it","is","formatted","as","such"]}
{"code_tokens":["\n","@Test\n","protected","void","cloneSheetMultipleTimes","(",")","throws","IOException","{","\n","try","(","Workbook","workbook","=","_testDataProvider",".","createWorkbook","(",")",")","{","\n","CreationHelper","factory","=","workbook",".","getCreationHelper","(",")",";","\n","Sheet","sheet","=","workbook",".","createSheet","(","\"Test","Clone\"",")",";","\n","Row","row","=","sheet",".","createRow","(","0",")",";","\n","Cell","cell","=","row",".","createCell","(","0",")",";","\n","cell",".","setCellValue","(","factory",".","createRichTextString","(","\"clone_test\"",")",")",";","\n","//Clone","the","sheet","multiple","times\n","workbook",".","cloneSheet","(","0",")",";","\n","workbook",".","cloneSheet","(","0",")",";","\n\n","assertNotNull","(","workbook",".","getSheet","(","\"Test","Clone\"",")",")",";","\n","assertNotNull","(","workbook",".","getSheet","(","\"Test","Clone","(","2",")","\"",")",")",";","\n","assertEquals","(","\"Test","Clone","(","3",")","\",","workbook",".","getSheetName","(","2",")",")",";","\n","assertNotNull","(","workbook",".","getSheet","(","\"Test","Clone","(","3",")","\"",")",")",";","\n\n","workbook",".","removeSheetAt","(","0",")",";","\n","workbook",".","removeSheetAt","(","0",")",";","\n","workbook",".","removeSheetAt","(","0",")",";","\n","workbook",".","createSheet","(","\"abc","(","123",")","\"",")",";","\n","workbook",".","cloneSheet","(","0",")",";","\n","assertEquals","(","\"abc","(","124",")","\",","workbook",".","getSheetName","(","1",")",")",";","\n","}","\n"],"docstring_tokens":["tests","that","the","sheet","name","for","multiple","clones","of","the","same","sheet","is","unique","BUG","37416"]}
{"code_tokens":["\n","@Test\n","void","printSetupLandscapeNew","(",")","throws","IOException","{","\n","try","(","Workbook","wb1","=","_testDataProvider",".","createWorkbook","(",")",")","{","\n","Sheet","sheetL","=","wb1",".","createSheet","(","\"LandscapeS\"",")",";","\n","Sheet","sheetP","=","wb1",".","createSheet","(","\"LandscapeP\"",")",";","\n\n","//","Check","two","aspects","of","the","print","setup\n","assertFalse","(","sheetL",".","getPrintSetup","(",")",".","getLandscape","(",")",")",";","\n","assertFalse","(","sheetP",".","getPrintSetup","(",")",".","getLandscape","(",")",")",";","\n","assertEquals","(","1,","sheetL",".","getPrintSetup","(",")",".","getCopies","(",")",")",";","\n","assertEquals","(","1,","sheetP",".","getPrintSetup","(",")",".","getCopies","(",")",")",";","\n\n","//","Change","one","on","each\n","sheetL",".","getPrintSetup","(",")",".","setLandscape","(","true",")",";","\n","sheetP",".","getPrintSetup","(",")",".","setCopies","(","(","short",")","3",")",";","\n\n","//","Check","taken\n","assertTrue","(","sheetL",".","getPrintSetup","(",")",".","getLandscape","(",")",")",";","\n","assertFalse","(","sheetP",".","getPrintSetup","(",")",".","getLandscape","(",")",")",";","\n","assertEquals","(","1,","sheetL",".","getPrintSetup","(",")",".","getCopies","(",")",")",";","\n","assertEquals","(","3,","sheetP",".","getPrintSetup","(",")",".","getCopies","(",")",")",";","\n\n","//","Save","and","re-load,","and","check","still","there\n","try","(","Workbook","wb2","=","_testDataProvider",".","writeOutAndReadBack","(","wb1",")",")","{","\n","sheetL","=","wb2",".","getSheet","(","\"LandscapeS\"",")",";","\n","sheetP","=","wb2",".","getSheet","(","\"LandscapeP\"",")",";","\n\n","assertTrue","(","sheetL",".","getPrintSetup","(",")",".","getLandscape","(",")",")",";","\n","assertFalse","(","sheetP",".","getPrintSetup","(",")",".","getLandscape","(",")",")",";","\n","assertEquals","(","1,","sheetL",".","getPrintSetup","(",")",".","getCopies","(",")",")",";","\n","assertEquals","(","3,","sheetP",".","getPrintSetup","(",")",".","getCopies","(",")",")",";","\n","}","\n","}","\n"],"docstring_tokens":["Setting","landscape","and","portrait","stuff","on","new","sheets"]}
{"code_tokens":["\n","@Test\n","void","addOverlappingMergedRegions","(",")","throws","IOException","{","\n","try","(","final","Workbook","wb","=","_testDataProvider",".","createWorkbook","(",")",")","{","\n","final","Sheet","sheet","=","wb",".","createSheet","(",")",";","\n\n","final","CellRangeAddress","baseRegion","=","new","CellRangeAddress","(","0,","1,","0,","1",")",";","//A1:B2\n","assertEquals","(","0,","sheet",".","addMergedRegion","(","baseRegion",")",")",";","\n\n","final","CellRangeAddress","duplicateRegion","=","new","CellRangeAddress","(","0,","1,","0,","1",")",";","//A1:B2\n","assertThrows","(","\n","IllegalStateException",".","class,\n","(",")","->","sheet",".","addMergedRegion","(","duplicateRegion",")",",\n","\"Should","not","be","able","to","add","a","merged","region","(","\"","+","duplicateRegion",".","formatAsString","(",")","+","\"",")","\"","+\n","\"if","sheet","already","contains","the","same","merged","region","(","\"","+","baseRegion",".","formatAsString","(",")","+","\"",")","\"\n",")",";","\n\n","final","CellRangeAddress","partiallyOverlappingRegion","=","new","CellRangeAddress","(","1,","2,","1,","2",")",";","//B2:C3\n","assertThrows","(","\n","IllegalStateException",".","class,\n","(",")","->","sheet",".","addMergedRegion","(","partiallyOverlappingRegion",")",",\n","\"Should","not","be","able","to","add","a","merged","region","(","\"","+","partiallyOverlappingRegion",".","formatAsString","(",")","+","\"",")","\"","+\n","\"if","it","partially","overlaps","with","an","existing","merged","region","(","\"","+","baseRegion",".","formatAsString","(",")","+","\"",")","\"\n",")",";","\n\n","final","CellRangeAddress","subsetRegion","=","new","CellRangeAddress","(","0,","1,","0,","0",")",";","//A1:A2\n","assertThrows","(","\n","IllegalStateException",".","class,\n","(",")","->","sheet",".","addMergedRegion","(","subsetRegion",")",",\n","\"Should","not","be","able","to","add","a","merged","region","(","\"","+","subsetRegion",".","formatAsString","(",")","+","\"",")","\"","+\n","\"if","it","is","a","formal","subset","of","an","existing","merged","region","(","\"","+","baseRegion",".","formatAsString","(",")","+","\"",")","\"\n",")",";","\n\n","final","CellRangeAddress","supersetRegion","=","new","CellRangeAddress","(","0,","2,","0,","2",")",";","//A1:C3\n","assertThrows","(","\n","IllegalStateException",".","class,\n","(",")","->","sheet",".","addMergedRegion","(","supersetRegion",")",",\n","\"Should","not","be","able","to","add","a","merged","region","(","\"","+","supersetRegion",".","formatAsString","(",")","+","\"",")","\"","+\n","\"if","it","is","a","formal","superset","of","an","existing","merged","region","(","\"","+","baseRegion",".","formatAsString","(",")","+","\"",")","\"\n",")",";","\n\n","final","CellRangeAddress","disjointRegion","=","new","CellRangeAddress","(","10,","11,","10,","11",")",";","\n","assertEquals","(","1,","sheet",".","addMergedRegion","(","disjointRegion",")",")",";","\n","}","\n"],"docstring_tokens":["Disallow","creating","wholly","or","partially","overlapping","merged","regions","as","this","results","in","a","corrupted","workbook"]}
{"code_tokens":["\n","@Test\n","void","addMerged","(",")","throws","IOException","{","\n","try","(","Workbook","wb","=","_testDataProvider",".","createWorkbook","(",")",")","{","\n","Sheet","sheet","=","wb",".","createSheet","(",")",";","\n","assertEquals","(","0,","sheet",".","getNumMergedRegions","(",")",")",";","\n","SpreadsheetVersion","ssVersion","=","_testDataProvider",".","getSpreadsheetVersion","(",")",";","\n\n","CellRangeAddress","region","=","new","CellRangeAddress","(","0,","1,","0,","1",")",";","\n","assertEquals","(","0,","sheet",".","addMergedRegion","(","region",")",")",";","\n","assertEquals","(","1,","sheet",".","getNumMergedRegions","(",")",")",";","\n\n","IllegalArgumentException","ex","=","assertThrows","(","\n","IllegalArgumentException",".","class,\n","(",")","->","sheet",".","addMergedRegion","(","new","CellRangeAddress","(","-1,","-1,","-1,","-1",")",")","\n",")",";","\n","assertEquals","(","\"Merged","region",":","must","contain","2","or","more","cells\",","ex",".","getMessage","(",")",")",";","\n\n","ex","=","assertThrows","(","\n","IllegalArgumentException",".","class,\n","(",")","->","sheet",".","addMergedRegion","(","new","CellRangeAddress","(","0,","0,","0,","ssVersion",".","getLastColumnIndex","(",")","+","1",")",")","\n",")",";","\n","assertEquals","(","\"Maximum","column","number","is","\"","+","ssVersion",".","getLastColumnIndex","(",")",",","ex",".","getMessage","(",")",")",";","\n\n","ex","=","assertThrows","(","\n","IllegalArgumentException",".","class,\n","(",")","->","sheet",".","addMergedRegion","(","new","CellRangeAddress","(","0,","ssVersion",".","getLastRowIndex","(",")","+","1,","0,","1",")",")","\n",")",";","\n","assertEquals","(","\"Maximum","row","number","is","\"","+","ssVersion",".","getLastRowIndex","(",")",",","ex",".","getMessage","(",")",")",";","\n\n","assertEquals","(","1,","sheet",".","getNumMergedRegions","(",")",")",";","\n","}","\n"],"docstring_tokens":["Test","adding","merged","regions"]}
{"code_tokens":["\n","@Test\n","void","removeMerged","(",")","throws","IOException","{","\n","try","(","Workbook","wb","=","_testDataProvider",".","createWorkbook","(",")",")","{","\n","Sheet","sheet","=","wb",".","createSheet","(",")",";","\n","CellRangeAddress","region","=","new","CellRangeAddress","(","0,","1,","0,","1",")",";","\n","assertEquals","(","0,","sheet",".","addMergedRegion","(","region",")",")",";","\n","region","=","new","CellRangeAddress","(","2,","3,","0,","1",")",";","\n","assertEquals","(","1,","sheet",".","addMergedRegion","(","region",")",")",";","\n\n","sheet",".","removeMergedRegion","(","0",")",";","\n\n","region","=","sheet",".","getMergedRegion","(","0",")",";","\n","assertEquals","(","2,","region",".","getFirstRow","(",")",",","\"Left","over","region","should","be","starting","at","row","2\"",")",";","\n\n","sheet",".","removeMergedRegion","(","0",")",";","\n\n","assertEquals","(","0,","sheet",".","getNumMergedRegions","(",")",",","\"there","should","be","no","merged","regions","left!\"",")",";","\n\n","//an,","add,","remove,","get","(","0",")","would","null","pointer\n","assertEquals","(","0,","sheet",".","addMergedRegion","(","region",")",")",";","\n","assertEquals","(","1,","sheet",".","getNumMergedRegions","(",")",",","\"there","should","now","be","one","merged","region!\"",")",";","\n","sheet",".","removeMergedRegion","(","0",")",";","\n","assertEquals","(","0,","sheet",".","getNumMergedRegions","(",")",",","\"there","should","now","be","zero","merged","regions!\"",")",";","\n","//add","it","again!\n","region",".","setLastRow","(","4",")",";","\n\n","assertEquals","(","0,","sheet",".","addMergedRegion","(","region",")",")",";","\n","assertEquals","(","1,","sheet",".","getNumMergedRegions","(",")",",","\"there","should","now","be","one","merged","region!\"",")",";","\n\n","//should","exist","now!\n","assertTrue","(","1","<=","sheet",".","getNumMergedRegions","(",")",",","\"there","isn't","more","than","one","merged","region","in","there\"",")",";","\n","region","=","sheet",".","getMergedRegion","(","0",")",";","\n","assertEquals","(","4,","region",".","getLastRow","(",")",",","\"the","merged","row","to","doesn't","match","the","one","we","put","in","\"",")",";","\n","}","\n"],"docstring_tokens":["When","removing","one","merged","region,","it","would","break"]}
{"code_tokens":["\n","@Test\n","void","displayOptions","(",")","throws","IOException","{","\n","try","(","Workbook","wb1","=","_testDataProvider",".","createWorkbook","(",")",")","{","\n","Sheet","sheet","=","wb1",".","createSheet","(",")",";","\n\n","assertTrue","(","sheet",".","isDisplayGridlines","(",")",")",";","\n","assertTrue","(","sheet",".","isDisplayRowColHeadings","(",")",")",";","\n","assertFalse","(","sheet",".","isDisplayFormulas","(",")",")",";","\n","assertTrue","(","sheet",".","isDisplayZeros","(",")",")",";","\n\n","sheet",".","setDisplayGridlines","(","false",")",";","\n","sheet",".","setDisplayRowColHeadings","(","false",")",";","\n","sheet",".","setDisplayFormulas","(","true",")",";","\n","sheet",".","setDisplayZeros","(","false",")",";","\n\n","try","(","Workbook","wb2","=","_testDataProvider",".","writeOutAndReadBack","(","wb1",")",")","{","\n","sheet","=","wb2",".","getSheetAt","(","0",")",";","\n\n","assertFalse","(","sheet",".","isDisplayGridlines","(",")",")",";","\n","assertFalse","(","sheet",".","isDisplayRowColHeadings","(",")",")",";","\n","assertTrue","(","sheet",".","isDisplayFormulas","(",")",")",";","\n","assertFalse","(","sheet",".","isDisplayZeros","(",")",")",";","\n","}","\n","}","\n"],"docstring_tokens":["Tests","the","display","of","gridlines,","formulas,","and","rowcolheadings"]}
{"code_tokens":["\n","@Test\n","protected","void","bug35084","(",")","throws","IOException","{","\n","try","(","Workbook","wb","=","_testDataProvider",".","createWorkbook","(",")",")","{","\n","Sheet","s","=","wb",".","createSheet","(","\"Sheet1\"",")",";","\n","Row","r","=","s",".","createRow","(","0",")",";","\n","r",".","createCell","(","0",")",".","setCellValue","(","1",")",";","\n","r",".","createCell","(","1",")",".","setCellFormula","(","\"A1*2\"",")",";","\n","Sheet","s1","=","wb",".","cloneSheet","(","0",")",";","\n","r","=","s1",".","getRow","(","0",")",";","\n","//","sanity","check\n","assertEquals","(","1,","r",".","getCell","(","0",")",".","getNumericCellValue","(",")",",","0,","\"double\"",")",";","\n","assertNotNull","(","r",".","getCell","(","1",")",")",";","\n","assertEquals","(","\"A1*2\",","r",".","getCell","(","1",")",".","getCellFormula","(",")",",","\"formula\"",")",";","\n","}","\n"],"docstring_tokens":["cell","with","formula","becomes","null","on","cloning","a","sheet"]}
{"code_tokens":["\n","@Test\n","protected","void","defaultColumnStyle","(",")","throws","IOException","{","\n","try","(","Workbook","wb","=","_testDataProvider",".","createWorkbook","(",")",")","{","\n","CellStyle","style","=","wb",".","createCellStyle","(",")",";","\n","Sheet","sheet","=","wb",".","createSheet","(",")",";","\n","sheet",".","setDefaultColumnStyle","(","0,","style",")",";","\n","assertNotNull","(","sheet",".","getColumnStyle","(","0",")",")",";","\n","assertEquals","(","style",".","getIndex","(",")",",","sheet",".","getColumnStyle","(","0",")",".","getIndex","(",")",")",";","\n\n","Row","row","=","sheet",".","createRow","(","0",")",";","\n","Cell","cell","=","row",".","createCell","(","0",")",";","\n","CellStyle","style2","=","cell",".","getCellStyle","(",")",";","\n","assertNotNull","(","style2",")",";","\n","assertEquals","(","style",".","getIndex","(",")",",","style2",".","getIndex","(",")",",","\"style","should","match\"",")",";","\n","}","\n"],"docstring_tokens":["test","that","new","default","column","styles","get","applied"]}
{"code_tokens":["\n","@Test\n","void","sheetProperties","(",")","throws","IOException","{","\n","try","(","Workbook","wb","=","_testDataProvider",".","createWorkbook","(",")",")","{","\n","Sheet","sheet","=","wb",".","createSheet","(",")",";","\n\n","assertFalse","(","sheet",".","getHorizontallyCenter","(",")",")",";","\n","sheet",".","setHorizontallyCenter","(","true",")",";","\n","assertTrue","(","sheet",".","getHorizontallyCenter","(",")",")",";","\n","sheet",".","setHorizontallyCenter","(","false",")",";","\n","assertFalse","(","sheet",".","getHorizontallyCenter","(",")",")",";","\n\n","assertFalse","(","sheet",".","getVerticallyCenter","(",")",")",";","\n","sheet",".","setVerticallyCenter","(","true",")",";","\n","assertTrue","(","sheet",".","getVerticallyCenter","(",")",")",";","\n","sheet",".","setVerticallyCenter","(","false",")",";","\n","assertFalse","(","sheet",".","getVerticallyCenter","(",")",")",";","\n\n","assertFalse","(","sheet",".","isPrintGridlines","(",")",")",";","\n","sheet",".","setPrintGridlines","(","true",")",";","\n","assertTrue","(","sheet",".","isPrintGridlines","(",")",")",";","\n\n","assertFalse","(","sheet",".","isPrintRowAndColumnHeadings","(",")",")",";","\n","sheet",".","setPrintRowAndColumnHeadings","(","true",")",";","\n","assertTrue","(","sheet",".","isPrintRowAndColumnHeadings","(",")",")",";","\n\n","assertFalse","(","sheet",".","isDisplayFormulas","(",")",")",";","\n","sheet",".","setDisplayFormulas","(","true",")",";","\n","assertTrue","(","sheet",".","isDisplayFormulas","(",")",")",";","\n\n","assertTrue","(","sheet",".","isDisplayGridlines","(",")",")",";","\n","sheet",".","setDisplayGridlines","(","false",")",";","\n","assertFalse","(","sheet",".","isDisplayGridlines","(",")",")",";","\n\n","//TODO:","default","\"guts\"","is","different","in","HSSF","and","XSSF\n","//assertTrue","(","sheet",".","getDisplayGuts","(",")",")",";","\n","sheet",".","setDisplayGuts","(","false",")",";","\n","assertFalse","(","sheet",".","getDisplayGuts","(",")",")",";","\n\n","assertTrue","(","sheet",".","isDisplayRowColHeadings","(",")",")",";","\n","sheet",".","setDisplayRowColHeadings","(","false",")",";","\n","assertFalse","(","sheet",".","isDisplayRowColHeadings","(",")",")",";","\n\n","//TODO:","default","\"autobreaks\"","is","different","in","HSSF","and","XSSF\n","//assertTrue","(","sheet",".","getAutobreaks","(",")",")",";","\n","sheet",".","setAutobreaks","(","false",")",";","\n","assertFalse","(","sheet",".","getAutobreaks","(",")",")",";","\n\n","assertFalse","(","sheet",".","getScenarioProtect","(",")",")",";","\n\n","//TODO:","default","\"fit-to-page\"","is","different","in","HSSF","and","XSSF\n","//assertFalse","(","sheet",".","getFitToPage","(",")",")",";","\n","sheet",".","setFitToPage","(","true",")",";","\n","assertTrue","(","sheet",".","getFitToPage","(",")",")",";","\n","sheet",".","setFitToPage","(","false",")",";","\n","assertFalse","(","sheet",".","getFitToPage","(",")",")",";","\n","}","\n"],"docstring_tokens":["Test","basic","display","and","print","properties"]}
{"code_tokens":["\n","@Test\n","void","bug48325","(",")","throws","IOException","{","\n","try","(","Workbook","wb","=","_testDataProvider",".","createWorkbook","(",")",")","{","\n","Sheet","sheet","=","wb",".","createSheet","(","\"Test\"",")",";","\n","trackColumnsForAutoSizingIfSXSSF","(","sheet",")",";","\n","CreationHelper","factory","=","wb",".","getCreationHelper","(",")",";","\n\n","Row","row","=","sheet",".","createRow","(","0",")",";","\n","Cell","cell","=","row",".","createCell","(","0",")",";","\n\n","Font","font","=","wb",".","createFont","(",")",";","\n","RichTextString","rts","=","factory",".","createRichTextString","(","\"\"",")",";","\n","rts",".","applyFont","(","font",")",";","\n","cell",".","setCellValue","(","rts",")",";","\n\n","sheet",".","autoSizeColumn","(","0",")",";","\n\n","assertNotNull","(","_testDataProvider",".","writeOutAndReadBack","(","wb",")",")",";","\n","}","\n"],"docstring_tokens":["XSSFSheet","autoSizeColumn","on","empty","RichTextString","fails"]}
{"code_tokens":["\n","@Test\n","void","setActiveCell","(",")","throws","IOException","{","\n","try","(","Workbook","wb1","=","_testDataProvider",".","createWorkbook","(",")",")","{","\n","Sheet","sheet","=","wb1",".","createSheet","(",")",";","\n","CellAddress","B42","=","new","CellAddress","(","\"B42\"",")",";","\n\n","//","active","cell","behavior","is","undefined","if","not","set",".","\n","//","HSSFSheet","defaults","to","A1","active","cell,","while","XSSFSheet","defaults","to","null",".","\n","CellAddress","ac","=","sheet",".","getActiveCell","(",")",";","\n","assertTrue","(","ac","==","null","||","CellAddress",".","A1",".","equals","(","ac",")",",","\"If","not","set,","active","cell","should","default","to","null","or","A1\"",")",";","\n\n","sheet",".","setActiveCell","(","B42",")",";","\n\n","try","(","Workbook","wb2","=","_testDataProvider",".","writeOutAndReadBack","(","wb1",")",")","{","\n","sheet","=","wb2",".","getSheetAt","(","0",")",";","\n","assertEquals","(","B42,","sheet",".","getActiveCell","(",")",")",";","\n","}","\n","}","\n"],"docstring_tokens":["Tests","that","the","setAsActiveCell","and","getActiveCell","function","pairs","work","together"]}
{"code_tokens":["\n","public","int","write","(","final","OutputStream","out,","final","int","codepage",")","\n","throws","IOException,","WritingNotSupportedException","{","\n","int","length","=","0",";","\n","long","variantType","=","getType","(",")",";","\n\n","/*","Ensure","that","wide","strings","are","written","if","the","codepage","is","Unicode",".","*/\n//","if","(","codepage","==","CodePageUtil",".","CP_UNICODE","&&","variantType","==","Variant",".","VT_LPSTR",")","{","\n//","variantType","=","Variant",".","VT_LPWSTR",";","\n//","}","\n\n","if","(","variantType","==","Variant",".","VT_LPSTR","&&","codepage","!=","CodePageUtil",".","CP_UTF16",")","{","\n","String","csStr","=","CodePageUtil",".","codepageToEncoding","(","codepage",">","0","?","codepage",":","Property",".","DEFAULT_CODEPAGE",")",";","\n","if","(","!Charset",".","forName","(","csStr",")",".","newEncoder","(",")",".","canEncode","(","(","String",")","value",")",")","{","\n","variantType","=","Variant",".","VT_LPWSTR",";","\n","}","\n","}","\n\n","LittleEndian",".","putUInt","(","variantType,","out",")",";","\n","length","+=","LittleEndianConsts",".","INT_SIZE",";","\n","length","+=","VariantSupport",".","write","(","out,","variantType,","getValue","(",")",",","codepage",")",";","\n","return","length",";","\n"],"docstring_tokens":["Writes","the","property","to","an","output","stream"]}
{"code_tokens":["\n","static","void","unCompressPAPOperation","(","ParagraphProperties","newPAP,","SprmOperation","sprm",")","\n","{","\n","switch","(","sprm",".","getOperation","(",")",")","\n","{","\n","case","0:\n","newPAP",".","setIstd","(","sprm",".","getOperand","(",")",")",";","\n","break",";","\n","case","0x1:\n\n","//","Used","only","for","piece","table","grpprl's","not","for","PAPX\n//","int","istdFirst","=","LittleEndian",".","getShort","(","varParam,","2",")",";","\n//","int","istdLast","=","LittleEndian",".","getShort","(","varParam,","4",")",";","\n//","if","(","(","newPAP",".","getIstd","(",")",">","istdFirst",")","||","(","newPAP",".","getIstd","(",")","<=","istdLast",")",")","\n//","{","\n//","permuteIstd","(","newPAP,","varParam,","opSize",")",";","\n//","}","\n","break",";","\n","case","0x2:\n","if","(","newPAP",".","getIstd","(",")","<=","9","||","newPAP",".","getIstd","(",")",">=","1",")","\n","{","\n","byte","paramTmp","=","(","byte",")","sprm",".","getOperand","(",")",";","\n","newPAP",".","setIstd","(","newPAP",".","getIstd","(",")","+","paramTmp",")",";","\n","newPAP",".","setLvl","(","(","byte",")","(","newPAP",".","getLvl","(",")","+","paramTmp",")",")",";","\n\n","if","(","(","(","paramTmp",">>","7",")","&","0x01",")","==","1",")","\n","{","\n","newPAP",".","setIstd","(","Math",".","max","(","newPAP",".","getIstd","(",")",",","1",")",")",";","\n","}","\n","else\n","{","\n","newPAP",".","setIstd","(","Math",".","min","(","newPAP",".","getIstd","(",")",",","9",")",")",";","\n","}","\n\n","}","\n","break",";","\n","case","0x3:\n","//","Physical","justification","of","the","paragraph\n","newPAP",".","setJc","(","(","byte",")","sprm",".","getOperand","(",")",")",";","\n","break",";","\n","case","0x4:\n","newPAP",".","setFSideBySide","(","sprm",".","getOperand","(",")","!=","0",")",";","\n","break",";","\n","case","0x5:\n","newPAP",".","setFKeep","(","sprm",".","getOperand","(",")","!=","0",")",";","\n","break",";","\n","case","0x6:\n","newPAP",".","setFKeepFollow","(","sprm",".","getOperand","(",")","!=","0",")",";","\n","break",";","\n","case","0x7:\n","newPAP",".","setFPageBreakBefore","(","sprm",".","getOperand","(",")","!=","0",")",";","\n","break",";","\n","case","0x8:\n","newPAP",".","setBrcl","(","(","byte",")","sprm",".","getOperand","(",")",")",";","\n","break",";","\n","case","0x9:\n","newPAP",".","setBrcp","(","(","byte",")","sprm",".","getOperand","(",")",")",";","\n","break",";","\n","case","0xa:\n","newPAP",".","setIlvl","(","(","byte",")","sprm",".","getOperand","(",")",")",";","\n","break",";","\n","case","0xb:\n","/*","sprmPIlfo","--","0x460B","*/\n","newPAP",".","setIlfo","(","sprm",".","getOperandShortSigned","(",")",")",";","\n","break",";","\n","case","0xc:\n","newPAP",".","setFNoLnn","(","sprm",".","getOperand","(",")","!=","0",")",";","\n","break",";","\n","case","0xd:\n","//","handle","tabs",".","variable","parameter",".","seperate","processing","needed\n","handleTabs","(","newPAP,","sprm",")",";","\n","break",";","\n","case","0xe:\n","newPAP",".","setDxaRight","(","sprm",".","getOperand","(",")",")",";","\n","break",";","\n","case","0xf:\n","newPAP",".","setDxaLeft","(","sprm",".","getOperand","(",")",")",";","\n","break",";","\n","case","0x10:\n\n","//","sprmPNest","is","only","stored","in","grpprls","linked","to","a","piece","table",".","\n","newPAP",".","setDxaLeft","(","newPAP",".","getDxaLeft","(",")","+","sprm",".","getOperand","(",")",")",";","\n","newPAP",".","setDxaLeft","(","Math",".","max","(","0,","newPAP",".","getDxaLeft","(",")",")",")",";","\n","break",";","\n","case","0x11:\n","newPAP",".","setDxaLeft1","(","sprm",".","getOperand","(",")",")",";","\n","break",";","\n","case","0x12:\n","newPAP",".","setLspd","(","new","LineSpacingDescriptor","(","sprm",".","getGrpprl","(",")",",","sprm",".","getGrpprlOffset","(",")",")",")",";","\n","break",";","\n","case","0x13:\n","newPAP",".","setDyaBefore","(","sprm",".","getOperand","(",")",")",";","\n","break",";","\n","case","0x14:\n","newPAP",".","setDyaAfter","(","sprm",".","getOperand","(",")",")",";","\n","break",";","\n","case","0x15:\n","//","fast","saved","only\n","//applySprmPChgTabs","(","newPAP,","varParam,","opSize",")",";","\n","break",";","\n","case","0x16:\n","//","sprmPFInTable","--","0x2416\n","newPAP",".","setFInTable","(","sprm",".","getOperand","(",")","!=","0",")",";","\n","break",";","\n","case","0x17:\n","newPAP",".","setFTtp","(","sprm",".","getOperand","(",")","!=","0",")",";","\n","break",";","\n","case","0x18:\n","newPAP",".","setDxaAbs","(","sprm",".","getOperand","(",")",")",";","\n","break",";","\n","case","0x19:\n","newPAP",".","setDyaAbs","(","sprm",".","getOperand","(",")",")",";","\n","break",";","\n","case","0x1a:\n","newPAP",".","setDxaWidth","(","sprm",".","getOperand","(",")",")",";","\n","break",";","\n","case","0x1b:\n","byte","param","=","(","byte",")","sprm",".","getOperand","(",")",";","\n","//","TODO:","handle","paragraph","postioning\n","byte","pcVert","=","(","byte",")","(","(","param","&","0x0c",")",">>","2",")",";","\n","byte","pcHorz","=","(","byte",")","(","param","&","0x03",")",";","\n","if","(","pcVert","!=","3",")","\n","{","\n","newPAP",".","setPcVert","(","pcVert",")",";","\n","}","\n","if","(","pcHorz","!=","3",")","\n","{","\n","newPAP",".","setPcHorz","(","pcHorz",")",";","\n","}","\n","break",";","\n\n","//","BrcXXX1","is","older","Version",".","Brc","is","used\n","//","case","0x1c:\n","//","newPAP",".","setBrcTop1","(","(","short",")","param",")",";","\n","//","break",";","\n","//","case","0x1d:\n","//","newPAP",".","setBrcLeft1","(","(","short",")","param",")",";","\n","//","break",";","\n","//","case","0x1e:\n","//","newPAP",".","setBrcBottom1","(","(","short",")","param",")",";","\n","//","break",";","\n","//","case","0x1f:\n","//","newPAP",".","setBrcRight1","(","(","short",")","param",")",";","\n","//","break",";","\n","//","case","0x20:\n","//","newPAP",".","setBrcBetween1","(","(","short",")","param",")",";","\n","//","break",";","\n","//","case","0x21:\n","//","newPAP",".","setBrcBar1","(","(","byte",")","param",")",";","\n","//","break",";","\n\n","case","0x22:\n","newPAP",".","setDxaFromText","(","sprm",".","getOperand","(",")",")",";","\n","break",";","\n","case","0x23:\n","newPAP",".","setWr","(","(","byte",")","sprm",".","getOperand","(",")",")",";","\n","break",";","\n","case","0x24:\n","newPAP",".","setBrcTop","(","new","BorderCode","(","sprm",".","getGrpprl","(",")",",","sprm",".","getGrpprlOffset","(",")",")",")",";","\n","break",";","\n","case","0x25:\n","newPAP",".","setBrcLeft","(","new","BorderCode","(","sprm",".","getGrpprl","(",")",",","sprm",".","getGrpprlOffset","(",")",")",")",";","\n","break",";","\n","case","0x26:\n","newPAP",".","setBrcBottom","(","new","BorderCode","(","sprm",".","getGrpprl","(",")",",","sprm",".","getGrpprlOffset","(",")",")",")",";","\n","break",";","\n","case","0x27:\n","newPAP",".","setBrcRight","(","new","BorderCode","(","sprm",".","getGrpprl","(",")",",","sprm",".","getGrpprlOffset","(",")",")",")",";","\n","break",";","\n","case","0x28:\n","newPAP",".","setBrcBetween","(","new","BorderCode","(","sprm",".","getGrpprl","(",")",",","sprm",".","getGrpprlOffset","(",")",")",")",";","\n","break",";","\n","case","0x29:\n","newPAP",".","setBrcBar","(","new","BorderCode","(","sprm",".","getGrpprl","(",")",",","sprm",".","getGrpprlOffset","(",")",")",")",";","\n","break",";","\n","case","0x2a:\n","newPAP",".","setFNoAutoHyph","(","sprm",".","getOperand","(",")","!=","0",")",";","\n","break",";","\n","case","0x2b:\n","newPAP",".","setDyaHeight","(","sprm",".","getOperand","(",")",")",";","\n","break",";","\n","case","0x2c:\n","newPAP",".","setDcs","(","new","DropCapSpecifier","(","(","short",")","sprm",".","getOperand","(",")",")",")",";","\n","break",";","\n","case","0x2d:\n","newPAP",".","setShd","(","new","ShadingDescriptor80","(","(","short",")","sprm",".","getOperand","(",")",")","\n",".","toShadingDescriptor","(",")",")",";","\n","break",";","\n","case","0x2e:\n","newPAP",".","setDyaFromText","(","sprm",".","getOperand","(",")",")",";","\n","break",";","\n","case","0x2f:\n","newPAP",".","setDxaFromText","(","sprm",".","getOperand","(",")",")",";","\n","break",";","\n","case","0x30:\n","newPAP",".","setFLocked","(","sprm",".","getOperand","(",")","!=","0",")",";","\n","break",";","\n","case","0x31:\n","newPAP",".","setFWidowControl","(","sprm",".","getOperand","(",")","!=","0",")",";","\n","break",";","\n","case","0x33:\n","newPAP",".","setFKinsoku","(","sprm",".","getOperand","(",")","!=","0",")",";","\n","break",";","\n","case","0x34:\n","newPAP",".","setFWordWrap","(","sprm",".","getOperand","(",")","!=","0",")",";","\n","break",";","\n","case","0x35:\n","newPAP",".","setFOverflowPunct","(","sprm",".","getOperand","(",")","!=","0",")",";","\n","break",";","\n","case","0x36:\n","newPAP",".","setFTopLinePunct","(","sprm",".","getOperand","(",")","!=","0",")",";","\n","break",";","\n","case","0x37:\n","newPAP",".","setFAutoSpaceDE","(","sprm",".","getOperand","(",")","!=","0",")",";","\n","break",";","\n","case","0x38:\n","newPAP",".","setFAutoSpaceDN","(","sprm",".","getOperand","(",")","!=","0",")",";","\n","break",";","\n","case","0x39:\n","newPAP",".","setWAlignFont","(","sprm",".","getOperand","(",")",")",";","\n","break",";","\n","case","0x3a:\n","newPAP",".","setFontAlign","(","(","short",")","sprm",".","getOperand","(",")",")",";","\n","break",";","\n","case","0x3b:\n","//obsolete\n","break",";","\n","case","0x3e:","{","\n","//","TODO:","REMOVEME\n","byte[]","buf","=","Arrays",".","copyOfRange","(","sprm",".","getGrpprl","(",")",",","sprm",".","getGrpprlOffset","(",")",",","sprm",".","getGrpprlOffset","(",")","+","(","sprm",".","size","(",")","-","3",")",")",";","\n","newPAP",".","setAnld","(","buf",")",";","\n","break",";","\n","}","\n","case","0x3f:\n","//don't","really","need","this",".","spec","is","confusing","regarding","this\n","//sprm\n","byte[]","varParam","=","sprm",".","getGrpprl","(",")",";","\n","int","offset","=","sprm",".","getGrpprlOffset","(",")",";","\n","newPAP",".","setFPropRMark","(","varParam[offset]","!=","0",")",";","\n","newPAP",".","setIbstPropRMark","(","LittleEndian",".","getShort","(","varParam,","offset","+","1",")",")",";","\n","newPAP",".","setDttmPropRMark","(","new","DateAndTime","(","varParam,","offset","+","3",")",")",";","\n","break",";","\n","case","0x40:\n","//","This","condition","commented","out,","as","Word","seems","to","set","outline","levels","even","for\n","//","paragraph","with","other","styles","than","Heading","1",".",".","9,","even","though","specification\n","//","does","not","say","so",".","See","bug","49820","for","discussion",".","\n","//if","(","newPAP",".","getIstd","(",")","<","1","&&","newPAP",".","getIstd","(",")",">","9",")","\n","{","\n","newPAP",".","setLvl","(","(","byte",")","sprm",".","getOperand","(",")",")",";","\n","}","\n","break",";","\n","case","0x41:\n","//","sprmPFBiDi\n","newPAP",".","setFBiDi","(","sprm",".","getOperand","(",")","!=","0",")",";","\n","break",";","\n","case","0x43:\n\n","//pap",".","fNumRMIns\n","newPAP",".","setFNumRMIns","(","sprm",".","getOperand","(",")","!=","0",")",";","\n","break",";","\n","case","0x44:\n\n","//undocumented\n","break",";","\n","case","0x45:\n","if","(","sprm",".","getSizeCode","(",")","==","6",")","\n","{","\n","byte[]","buf","=","new","byte[sprm",".","size","(",")","-","3]",";","\n","System",".","arraycopy","(","buf,","0,","sprm",".","getGrpprl","(",")",",","sprm",".","getGrpprlOffset","(",")",",","buf",".","length",")",";","\n","newPAP",".","setNumrm","(","buf",")",";","\n","}","\n","else\n","{","\n","/**@todo","handle","large","PAPX","from","data","stream*/\n","}","\n","break",";","\n\n","case","0x47:\n","newPAP",".","setFUsePgsuSettings","(","sprm",".","getOperand","(",")","!=","0",")",";","\n","break",";","\n","case","0x48:\n","newPAP",".","setFAdjustRight","(","sprm",".","getOperand","(",")","!=","0",")",";","\n","break",";","\n","case","0x49:\n","//","sprmPItap","--","0x6649\n","newPAP",".","setItap","(","sprm",".","getOperand","(",")",")",";","\n","break",";","\n","case","0x4a:\n","//","sprmPDtap","--","0x664a\n","newPAP",".","setItap","(","(","byte",")","(","newPAP",".","getItap","(",")","+","sprm",".","getOperand","(",")",")",")",";","\n","break",";","\n","case","0x4b:\n","//","sprmPFInnerTableCell","--","0x244b\n","newPAP",".","setFInnerTableCell","(","sprm",".","getOperand","(",")","!=","0",")",";","\n","break",";","\n","case","0x4c:\n","//","sprmPFInnerTtp","--","0x244c\n","newPAP",".","setFTtpEmbedded","(","sprm",".","getOperand","(",")","!=","0",")",";","\n","break",";","\n","case","0x4d:\n","//","sprmPShd","--","0xc64d\n","ShadingDescriptor","shadingDescriptor","=","new","ShadingDescriptor","(","\n","sprm",".","getGrpprl","(",")",",","3",")",";","\n","newPAP",".","setShading","(","shadingDescriptor",")",";","\n","break",";","\n","case","0x5d:\n","//","sprmPDxaRight","--","0x845d\n","newPAP",".","setDxaRight","(","sprm",".","getOperand","(",")",")",";","\n","break",";","\n","case","0x5e:\n","//","sprmPDxaLeft","--","0x845e\n","newPAP",".","setDxaLeft","(","sprm",".","getOperand","(",")",")",";","\n","break",";","\n","case","0x60:\n","//","sprmPDxaLeft1","--","0x8460\n","newPAP",".","setDxaLeft1","(","sprm",".","getOperand","(",")",")",";","\n","break",";","\n","case","0x61:\n","//","sprmPJc\n","newPAP",".","setJustificationLogical","(","(","byte",")","sprm",".","getOperand","(",")",")",";","\n","break",";","\n","case","0x67:\n","//","sprmPRsid","--","0x6467\n","newPAP",".","setRsid","(","sprm",".","getOperand","(",")",")",";","\n","break",";","\n","default:\n","LOG",".","atDebug","(",")",".","log","(","\"Unknown","PAP","sprm","ignored:","{","}","\",","sprm",")",";","\n","break",";","\n","}","\n"],"docstring_tokens":["Performs","an","operation","on","a","ParagraphProperties","object"]}
{"code_tokens":["\n","private","void","findInterestingChildren","(",")","{","\n\n","//","First","child","should","be","the","ExMediaAtom\n","Record","child","=","_children[0]",";","\n","if","(","child","instanceof","ExMediaAtom",")","{","\n","mediaAtom","=","(","ExMediaAtom",")","child",";","\n","}","else","{","\n","LOG",".","atError","(",")",".","log","(","\"First","child","record","wasn't","a","ExMediaAtom,","was","of","type","{","}","\",","box","(","child",".","getRecordType","(",")",")",")",";","\n","}","\n","child","=","_children[1]",";","\n","if","(","child","instanceof","CString",")","{","\n","pathAtom","=","(","CString",")","child",";","\n","}","else","{","\n","LOG",".","atError","(",")",".","log","(","\"Second","child","record","wasn't","a","CString,","was","of","type","{","}","\",","box","(","child",".","getRecordType","(",")",")",")",";","\n","}","\n"],"docstring_tokens":["Go","through","our","child","records,","picking","out","the","ones","that","are","interesting,","and","saving","those","for","use","by","the","easy","helper","methods"]}
{"code_tokens":["\n","public","void","writeOut","(","OutputStream","out",")","throws","IOException","{","\n","writeOut","(","_header[0],_header[1],getRecordType","(",")",",_children,out",")",";","\n"],"docstring_tokens":["Write","the","contents","of","the","record","back,","so","it","can","be","written","to","disk"]}
{"code_tokens":["\n","@Removal","(","version","=","\"6",".","0",".","0\"",")","\n","//make","this","protected","or","private","in","POI","6",".","0",".","0","-","no","need","for","this","to","be","public\n","public","Writer","createWriter","(","File","fd",")","throws","IOException","{","\n","FileOutputStream","fos","=","new","FileOutputStream","(","fd",")",";","\n","OutputStream","decorated",";","\n","try","{","\n","decorated","=","decorateOutputStream","(","fos",")",";","\n","}","catch","(","final","IOException","e",")","{","\n","fos",".","close","(",")",";","\n","throw","e",";","\n","}","\n","return","new","BufferedWriter","(","\n","new","OutputStreamWriter","(","decorated,","StandardCharsets",".","UTF_8",")",")",";","\n"],"docstring_tokens":["Create","a","writer","for","the","sheet","data"]}
{"code_tokens":["\n","public","void","close","(",")","throws","IOException","{","\n","//","this","would","break","writing","the","same","document","multiple","times:","_out",".","flush","(",")",";","\n","_out",".","close","(",")",";","\n"],"docstring_tokens":["flush","and","close","the","temp","data","writer"]}
{"code_tokens":["\n","boolean","dispose","(",")","throws","IOException","{","\n","final","boolean","ret",";","\n","try","{","\n","_out",".","close","(",")",";","\n","}","finally","{","\n","ret","=","_fd",".","delete","(",")",";","\n","}","\n","return","ret",";","\n"],"docstring_tokens":["Deletes","the","temporary","file","that","backed","this","sheet","on","disk"]}
{"code_tokens":["\n\n","public","short","getBackup","(",")","\n","{","\n","return","field_1_backup",";","\n"],"docstring_tokens":["get","the","backup","flag"]}
{"code_tokens":["\n","public","byte","getHorizontalAlignment","(",")","\n","{","\n","return","field_1_horizontalAlignment",";","\n"],"docstring_tokens":["Get","the","horizontal","alignment","field","for","the","Text","record"]}
{"code_tokens":["\n","public","void","setHorizontalAlignment","(","byte","field_1_horizontalAlignment",")","\n","{","\n","this",".","field_1_horizontalAlignment","=","field_1_horizontalAlignment",";","\n"],"docstring_tokens":["Set","the","horizontal","alignment","field","for","the","Text","record"]}
{"code_tokens":["\n","public","byte","getVerticalAlignment","(",")","\n","{","\n","return","field_2_verticalAlignment",";","\n"],"docstring_tokens":["Get","the","vertical","alignment","field","for","the","Text","record"]}
{"code_tokens":["\n","public","void","setVerticalAlignment","(","byte","field_2_verticalAlignment",")","\n","{","\n","this",".","field_2_verticalAlignment","=","field_2_verticalAlignment",";","\n"],"docstring_tokens":["Set","the","vertical","alignment","field","for","the","Text","record"]}
{"code_tokens":["\n","public","short","getDisplayMode","(",")","\n","{","\n","return","field_3_displayMode",";","\n"],"docstring_tokens":["Get","the","display","mode","field","for","the","Text","record"]}
{"code_tokens":["\n","public","void","setDisplayMode","(","short","field_3_displayMode",")","\n","{","\n","this",".","field_3_displayMode","=","field_3_displayMode",";","\n"],"docstring_tokens":["Set","the","display","mode","field","for","the","Text","record"]}
{"code_tokens":["\n","public","int","getRgbColor","(",")","\n","{","\n","return","field_4_rgbColor",";","\n"],"docstring_tokens":["Get","the","rgbColor","field","for","the","Text","record"]}
{"code_tokens":["\n","public","void","setRgbColor","(","int","field_4_rgbColor",")","\n","{","\n","this",".","field_4_rgbColor","=","field_4_rgbColor",";","\n"],"docstring_tokens":["Set","the","rgbColor","field","for","the","Text","record"]}
{"code_tokens":["\n","public","int","getX","(",")","\n","{","\n","return","field_5_x",";","\n"],"docstring_tokens":["Get","the","x","field","for","the","Text","record"]}
{"code_tokens":["\n","public","void","setX","(","int","field_5_x",")","\n","{","\n","this",".","field_5_x","=","field_5_x",";","\n"],"docstring_tokens":["Set","the","x","field","for","the","Text","record"]}
{"code_tokens":["\n","public","int","getY","(",")","\n","{","\n","return","field_6_y",";","\n"],"docstring_tokens":["Get","the","y","field","for","the","Text","record"]}
{"code_tokens":["\n","public","void","setY","(","int","field_6_y",")","\n","{","\n","this",".","field_6_y","=","field_6_y",";","\n"],"docstring_tokens":["Set","the","y","field","for","the","Text","record"]}
{"code_tokens":["\n","public","int","getWidth","(",")","\n","{","\n","return","field_7_width",";","\n"],"docstring_tokens":["Get","the","width","field","for","the","Text","record"]}
{"code_tokens":["\n","public","void","setWidth","(","int","field_7_width",")","\n","{","\n","this",".","field_7_width","=","field_7_width",";","\n"],"docstring_tokens":["Set","the","width","field","for","the","Text","record"]}
{"code_tokens":["\n","public","int","getHeight","(",")","\n","{","\n","return","field_8_height",";","\n"],"docstring_tokens":["Get","the","height","field","for","the","Text","record"]}
{"code_tokens":["\n","public","void","setHeight","(","int","field_8_height",")","\n","{","\n","this",".","field_8_height","=","field_8_height",";","\n"],"docstring_tokens":["Set","the","height","field","for","the","Text","record"]}
{"code_tokens":["\n","public","short","getOptions1","(",")","\n","{","\n","return","field_9_options1",";","\n"],"docstring_tokens":["Get","the","options1","field","for","the","Text","record"]}
{"code_tokens":["\n","public","void","setOptions1","(","short","field_9_options1",")","\n","{","\n","this",".","field_9_options1","=","field_9_options1",";","\n"],"docstring_tokens":["Set","the","options1","field","for","the","Text","record"]}
{"code_tokens":["\n","public","short","getIndexOfColorValue","(",")","\n","{","\n","return","field_10_indexOfColorValue",";","\n"],"docstring_tokens":["Get","the","index","of","color","value","field","for","the","Text","record"]}
{"code_tokens":["\n","public","void","setIndexOfColorValue","(","short","field_10_indexOfColorValue",")","\n","{","\n","this",".","field_10_indexOfColorValue","=","field_10_indexOfColorValue",";","\n"],"docstring_tokens":["Set","the","index","of","color","value","field","for","the","Text","record"]}
{"code_tokens":["\n","public","short","getOptions2","(",")","\n","{","\n","return","field_11_options2",";","\n"],"docstring_tokens":["Get","the","options2","field","for","the","Text","record"]}
{"code_tokens":["\n","public","void","setOptions2","(","short","field_11_options2",")","\n","{","\n","this",".","field_11_options2","=","field_11_options2",";","\n"],"docstring_tokens":["Set","the","options2","field","for","the","Text","record"]}
{"code_tokens":["\n","public","short","getTextRotation","(",")","\n","{","\n","return","field_12_textRotation",";","\n"],"docstring_tokens":["Get","the","text","rotation","field","for","the","Text","record"]}
{"code_tokens":["\n","public","void","setTextRotation","(","short","field_12_textRotation",")","\n","{","\n","this",".","field_12_textRotation","=","field_12_textRotation",";","\n"],"docstring_tokens":["Set","the","text","rotation","field","for","the","Text","record"]}
{"code_tokens":["\n","public","boolean","isShowValue","(",")","\n","{","\n","return","showValue",".","isSet","(","field_9_options1",")",";","\n"],"docstring_tokens":["false","=","text","is","category","label"]}
{"code_tokens":["\n","public","boolean","isVertical","(",")","\n","{","\n","return","vertical",".","isSet","(","field_9_options1",")",";","\n"],"docstring_tokens":["true","=","text","is","vertical"]}
{"code_tokens":["\n","public","void","setRotation","(","short","value",")","\n","{","\n","field_9_options1","=","rotation",".","setShortValue","(","field_9_options1,","value",")",";","\n"],"docstring_tokens":["Sets","the","rotation","field","value"]}
{"code_tokens":["\n","public","void","setDataLabelPlacement","(","short","value",")","\n","{","\n","field_11_options2","=","dataLabelPlacement",".","setShortValue","(","field_11_options2,","value",")",";","\n"],"docstring_tokens":["Sets","the","data","label","placement","field","value"]}
{"code_tokens":["\n","protected","List<EvaluationConditionalFormatRule>","getRules","(","Sheet","sheet",")","{","\n","final","String","sheetName","=","sheet",".","getSheetName","(",")",";","\n","List<EvaluationConditionalFormatRule>","rules","=","formats",".","get","(","sheetName",")",";","\n","if","(","rules","==","null",")","{","\n","if","(","formats",".","containsKey","(","sheetName",")",")","{","\n","return","Collections",".","emptyList","(",")",";","\n","}","\n","final","SheetConditionalFormatting","scf","=","sheet",".","getSheetConditionalFormatting","(",")",";","\n","final","int","count","=","scf",".","getNumConditionalFormattings","(",")",";","\n","rules","=","new","ArrayList<>","(","count",")",";","\n","formats",".","put","(","sheetName,","rules",")",";","\n","for","(","int","i=0",";","i","<","count",";","i++",")","{","\n","ConditionalFormatting","f","=","scf",".","getConditionalFormattingAt","(","i",")",";","\n","//optimization,","as","this","may","be","expensive","for","lots","of","ranges\n","final","CellRangeAddress[]","regions","=","f",".","getFormattingRanges","(",")",";","\n","for","(","int","r=0",";","r","<","f",".","getNumberOfRules","(",")",";","r++",")","{","\n","ConditionalFormattingRule","rule","=","f",".","getRule","(","r",")",";","\n","rules",".","add","(","new","EvaluationConditionalFormatRule","(","workbookEvaluator,","sheet,","f,","i,","rule,","r,","regions",")",")",";","\n","}","\n","}","\n","//","need","them","in","formatting","and","priority","order","so","logic","works","right\n","Collections",".","sort","(","rules",")",";","\n","}","\n","return","Collections",".","unmodifiableList","(","rules",")",";","\n"],"docstring_tokens":["lazy","load","by","sheet","since","reading","can","be","expensive"]}
{"code_tokens":["\n","public","void","draw","(","Graphics2D","graphics",")","{","\n\n","String","textContent","=","getTextContent","(",")",";","\n","if","(","textContent",".","length","(",")","==","0",")","{","\n","return",";","\n","}","\n\n","Rectangle2D",".","Double","bounds","=","getTextBounds","(",")",";","\n\n","String[]","lines","=","textContent",".","trim","(",")",".","split","(","\"\\n\"",")",";","\n","FontRenderContext","frc","=","graphics",".","getFontRenderContext","(",")",";","\n","Font","font","=","graphics",".","getFont","(",")",";","\n\n","AffineTransform","oldTr","=","graphics",".","getTransform","(",")",";","\n\n","//","visio","is","in","flipped","coordinates,","so","translate","the","text","to","be","in","the\n","//","right","place\n","Boolean","flipX","=","_parent",".","getFlipX","(",")",";","\n","Boolean","flipY","=","_parent",".","getFlipY","(",")",";","\n\n","if","(","flipY","==","null","||","!_parent",".","getFlipY","(",")",")","{","\n","graphics",".","translate","(","bounds",".","x,","bounds",".","y",")",";","\n","graphics",".","scale","(","1,","-1",")",";","\n","graphics",".","translate","(","0,","-bounds",".","height\n","+","graphics",".","getFontMetrics","(",")",".","getMaxCharBounds","(","graphics",")","\n",".","getHeight","(",")",")",";","\n","}","\n\n","if","(","flipX","!=","null","&&","_parent",".","getFlipX","(",")",")","{","\n","graphics",".","scale","(","-1,","1",")",";","\n","graphics",".","translate","(","-bounds",".","width,","0",")",";","\n","}","\n\n","Double","txtAngle","=","_parent",".","getTxtAngle","(",")",";","\n","if","(","txtAngle","!=","null","&&","Math",".","abs","(","txtAngle",")",">","0",".","01",")","{","\n","graphics",".","rotate","(","txtAngle",")",";","\n","}","\n\n","float","nextY","=","0",";","\n","for","(","String","line",":","lines",")","{","\n\n","if","(","line",".","length","(",")","==","0",")","{","\n","continue",";","\n","}","\n\n","TextLayout","layout","=","new","TextLayout","(","line,","font,","frc",")",";","\n\n","if","(","layout",".","isLeftToRight","(",")",")","{","\n","layout",".","draw","(","graphics,","0,","nextY",")",";","\n","}","else","{","\n","layout",".","draw","(","graphics,\n","(","float",")","(","bounds",".","width","-","layout",".","getAdvance","(",")",")",",","nextY",")",";","\n","}","\n\n","nextY","+=","layout",".","getAscent","(",")","+","layout",".","getDescent","(",")","\n","+","layout",".","getLeading","(",")",";","\n","}","\n\n","graphics",".","setTransform","(","oldTr",")",";","\n"],"docstring_tokens":["When","calling","this","to","draw","text,","it","assumes","graphics","is","set","properly","to","draw","in","the","right","style"]}
{"code_tokens":["\n\n","public","int","hashCode","(",")","\n","{","\n","if","(","hashcode","==","0",")","\n","{","\n","hashcode","=","path",".","hashCode","(",")","^","name",".","hashCode","(",")",";","\n","}","\n","return","hashcode",";","\n"],"docstring_tokens":["calculate","and","return","the","hashcode"]}
{"code_tokens":["\n","public","XSLFSlide","createSlide","(","XSLFSlideLayout","layout",")","{","\n","CTSlideIdList","slideList","=","_presentation",".","isSetSldIdLst","(",")","\n","?","_presentation",".","getSldIdLst","(",")",":","_presentation",".","addNewSldIdLst","(",")",";","\n\n","@SuppressWarnings","(","\"deprecation\"",")","\n","OptionalLong","maxId","=","Stream",".","of","(","slideList",".","getSldIdArray","(",")",")","\n",".","mapToLong","(","CTSlideIdListEntry::getId",")",".","max","(",")",";","\n\n","final","XSLFRelation","relationType","=","XSLFRelation",".","SLIDE",";","\n","final","int","slideNumber","=","(","int",")","(","Math",".","max","(","maxId",".","orElse","(","0",")",",255",")","+1",")",";","\n","final","int","cnt","=","findNextAvailableFileNameIndex","(","relationType",")",";","\n\n","RelationPart","rp","=","createRelationship\n","(","relationType,","XSLFFactory",".","getInstance","(",")",",","cnt,","false",")",";","\n","XSLFSlide","slide","=","rp",".","getDocumentPart","(",")",";","\n\n","CTSlideIdListEntry","slideId","=","slideList",".","addNewSldId","(",")",";","\n","slideId",".","setId","(","slideNumber",")",";","\n","slideId",".","setId2","(","rp",".","getRelationship","(",")",".","getId","(",")",")",";","\n\n","layout",".","copyLayout","(","slide",")",";","\n","slide",".","getPackagePart","(",")",".","clearRelationships","(",")",";","\n","slide",".","addRelation","(","null,","XSLFRelation",".","SLIDE_LAYOUT,","layout",")",";","\n\n","_slides",".","add","(","slide",")",";","\n","return","slide",";","\n"],"docstring_tokens":["Create","a","slide","and","initialize","it","from","the","specified","layout"]}
{"code_tokens":["\n","public","XSLFNotes","getNotesSlide","(","XSLFSlide","slide",")","{","\n\n","XSLFNotes","notesSlide","=","slide",".","getNotes","(",")",";","\n","if","(","notesSlide","==","null",")","{","\n","notesSlide","=","createNotesSlide","(","slide",")",";","\n","}","\n\n","return","notesSlide",";","\n"],"docstring_tokens":["Return","notes","slide","for","the","specified","slide","or","create","new","if","it","does","not","exist","yet"]}
{"code_tokens":["\n","public","XSLFSlideLayout","findLayout","(","String","name",")","{","\n","for","(","XSLFSlideMaster","master",":","getSlideMasters","(",")",")","{","\n","XSLFSlideLayout","layout","=","master",".","getLayout","(","name",")",";","\n","if","(","layout","!=","null",")","{","\n","return","layout",";","\n","}","\n","}","\n","return","null",";","\n"],"docstring_tokens":["Scan","the","master","slides","for","the","first","slide","layout","with","the","given","name"]}
{"code_tokens":["\n","String","importBlip","(","String","blipId,","POIXMLDocumentPart","parent,","POIXMLDocumentPart","target",")","{","\n","OPCPackage","targetPackage","=","target",".","getPackagePart","(",")",".","getPackage","(",")",";","\n","if","(","targetPackage","!=","getPackage","(",")",")","{","\n","throw","new","RuntimeException","(","\"the","target","document","part","is","not","a","child","of","this","package\"",")",";","\n","}","\n","final","POIXMLDocumentPart","docPart","=","parent",".","getRelationPartById","(","blipId",")",".","getDocumentPart","(",")",";","\n","XSLFPictureData","parData",";","\n","if","(","docPart","instanceof","XSLFPictureData",")","{","\n","parData","=","(","XSLFPictureData",")","docPart",";","\n","}","else","{","\n","throw","new","RuntimeException","(","\"cannot","import","blip","\"","+","blipId","+","\"","-","its","document","part","is","not","XSLFPictureData\"",")",";","\n","}","\n","final","XSLFPictureData","pictureData",";","\n","if","(","targetPackage","==","parent",".","getPackagePart","(",")",".","getPackage","(",")",")","{","\n","//","handle","ref","counter","correct,","if","the","parent","document","is","the","same","as","this\n","pictureData","=","parData",";","\n","}","else","{","\n","pictureData","=","addPicture","(","parData",".","getData","(",")",",","parData",".","getType","(",")",")",";","\n","}","\n\n","RelationPart","rp","=","target",".","addRelation","(","null,","XSLFRelation",".","IMAGES,","pictureData",")",";","\n","return","rp",".","getRelationship","(",")",".","getId","(",")",";","\n"],"docstring_tokens":["Import","a","picture","data","from","a","document","part"]}
{"code_tokens":["\n","void","importPart","(","PackageRelationship","srcRel,","PackagePart","srcPart",")","{","\n","PackagePart","destPP","=","getPackagePart","(",")",";","\n","PackagePartName","srcPPName","=","srcPart",".","getPartName","(",")",";","\n\n","OPCPackage","pkg","=","destPP",".","getPackage","(",")",";","\n","if","(","pkg",".","containPart","(","srcPPName",")",")","{","\n","//","already","exists\n","return",";","\n","}","\n\n","destPP",".","addRelationship","(","srcPPName,","TargetMode",".","INTERNAL,","srcRel",".","getRelationshipType","(",")",")",";","\n\n","PackagePart","part","=","pkg",".","createPart","(","srcPPName,","srcPart",".","getContentType","(",")",")",";","\n","try","(","\n","OutputStream","out","=","part",".","getOutputStream","(",")",";","\n","InputStream","is","=","srcPart",".","getInputStream","(",")",";","\n",")","{","\n","IOUtils",".","copy","(","is,","out",")",";","\n","}","catch","(","IOException","e",")","{","\n","throw","new","POIXMLException","(","e",")",";","\n","}","\n"],"docstring_tokens":["Import","a","package","part","into","this","sheet"]}
{"code_tokens":["\n","void","removePictureRelation","(","XSLFPictureShape","pictureShape",")","{","\n","int","numberOfRelations","=","0",";","\n","String","targetBlipId","=","pictureShape",".","getBlipId","(",")",";","\n","for","(","XSLFShape","shape",":","pictureShape",".","getSheet","(",")",".","getShapes","(",")",")","{","\n","if","(","shape","instanceof","XSLFPictureShape",")","{","\n","XSLFPictureShape","currentPictureShape","=","(","(","XSLFPictureShape",")","shape",")",";","\n","String","currentBlipId","=","currentPictureShape",".","getBlipId","(",")",";","\n","if","(","currentBlipId","!=","null","&&","currentBlipId",".","equals","(","targetBlipId",")",")","{","\n","numberOfRelations++",";","\n","}","\n","}","\n","}","\n","if","(","numberOfRelations","<=","1",")","{","\n","removeRelation","(","pictureShape",".","getBlipId","(",")",")",";","\n","}","\n"],"docstring_tokens":["Helper","method","for","sheet","and","group","shapes"]}
{"code_tokens":["\n","public","void","addChart","(","XSLFChart","chart,","Rectangle2D","rect2D",")","{","\n","RelationPart","rp","=","addRelation","(","null,","XSLFRelation",".","CHART,","chart",")",";","\n","getDrawing","(",")",".","addChart","(","rp",".","getRelationship","(",")",".","getId","(",")",",","rect2D",")",";","\n"],"docstring_tokens":["this","method","will","add","chart","into","slide","with","given","height,","width,","x","and","y"]}
{"code_tokens":["\n","@Override\n","public","int","serialize","(","final","int","offset,","final","byte[]","data",")","{","\n","//","Determine","buffer","size\n","List","<EscherRecord>records","=","getEscherRecords","(",")",";","\n","int","size","=","getEscherRecordSize","(","records",")",";","\n","byte[]","buffer","=","new","byte[size]",";","\n\n","//","Serialize","escher","records","into","one","big","data","structure","and","keep","note","of","ending","offsets",".","\n","final","List","<Integer>spEndingOffsets","=","new","ArrayList<>","(",")",";","\n","final","List","<EscherRecord>","shapes","=","new","ArrayList<>","(",")",";","\n","int","pos","=","0",";","\n","for","(","EscherRecord","record",":","records",")","{","\n","pos","+=","record",".","serialize","(","pos,","buffer,","new","EscherSerializationListener","(",")","{","\n","@Override\n","public","void","beforeRecordSerialize","(","int","offset,","short","recordId,","EscherRecord","record",")","{","\n","}","\n\n","@Override\n","public","void","afterRecordSerialize","(","int","offset,","short","recordId,","int","size,","EscherRecord","record",")","{","\n","if","(","recordId","==","EscherClientDataRecord",".","RECORD_ID","||","recordId","==","EscherTextboxRecord",".","RECORD_ID",")","{","\n","spEndingOffsets",".","add","(","offset",")",";","\n","shapes",".","add","(","record",")",";","\n","}","\n","}","\n","}",")",";","\n","}","\n","shapes",".","add","(","0,","null",")",";","\n","spEndingOffsets",".","add","(","0,","0",")",";","\n\n","//","Split","escher","records","into","separate","MSODRAWING","and","OBJ,","TXO","records",".","(","We","don't","break","on\n","//","the","first","one","because","it's","the","patriach",")",".","\n","pos","=","offset",";","\n","int","writtenEscherBytes","=","0",";","\n","boolean","isFirst","=","true",";","\n","int","endOffset","=","0",";","\n","for","(","int","i","=","1",";","i","<","shapes",".","size","(",")",";","i++",")","{","\n","int","startOffset","=","endOffset",";","\n","endOffset","=","spEndingOffsets",".","get","(","i",")",";","\n\n","byte[]","drawingData","=","Arrays",".","copyOfRange","(","buffer,","startOffset,","endOffset",")",";","\n","pos","+=","writeDataIntoDrawingRecord","(","drawingData,","writtenEscherBytes,","pos,","data,","isFirst",")",";","\n\n","writtenEscherBytes","+=","drawingData",".","length",";","\n\n","//","Write","the","matching","OBJ","record\n","Record","obj","=","shapeToObj",".","get","(","shapes",".","get","(","i",")",")",";","\n","pos","+=","obj",".","serialize","(","pos,","data",")",";","\n\n","isFirst","=","false",";","\n","}","\n\n","if","(","endOffset","<","buffer",".","length","-","1",")","{","\n","byte[]","drawingData","=","Arrays",".","copyOfRange","(","buffer,","endOffset,","buffer",".","length",")",";","\n","pos","+=","writeDataIntoDrawingRecord","(","drawingData,","writtenEscherBytes,","pos,","data,","isFirst",")",";","\n","}","\n\n","for","(","NoteRecord","noteRecord",":","tailRec",".","values","(",")",")","{","\n","pos","+=","noteRecord",".","serialize","(","pos,","data",")",";","\n","}","\n\n","int","bytesWritten","=","pos","-","offset",";","\n","if","(","bytesWritten","!=","getRecordSize","(",")",")","{","\n","throw","new","RecordFormatException","(","bytesWritten","+","\"","bytes","written","but","getRecordSize","(",")","reports","\"","+","getRecordSize","(",")",")",";","\n","}","\n","return","bytesWritten",";","\n"],"docstring_tokens":["Serializes","this","aggregate","to","a","byte","array"]}
{"code_tokens":["\n","public","void","associateShapeToObjRecord","(","EscherRecord","r,","Record","objRecord",")","{","\n","shapeToObj",".","put","(","r,","objRecord",")",";","\n"],"docstring_tokens":["Associates","an","escher","record","to","an","OBJ","record","or","a","TXO","record"]}
{"code_tokens":["\n","public","void","setDgId","(","short","dgId",")","{","\n","EscherContainerRecord","dgContainer","=","getEscherContainer","(",")",";","\n","EscherDgRecord","dg","=","dgContainer",".","getChildById","(","EscherDgRecord",".","RECORD_ID",")",";","\n","if","(","dg","!=","null",")","{","\n","dg",".","setOptions","(","(","short",")","(","dgId","<<","4",")",")",";","\n","}","\n"],"docstring_tokens":["EscherDgContainer","-EscherSpgrContainer","-EscherDgRecord","-","set","id","for","this","record","set","id","for","DgRecord","of","DgContainer"]}
{"code_tokens":["\n\n","public","DocumentEntry","createDocument","(","final","InputStream","stream,\n","final","String","name",")","\n","throws","IOException","{","\n","return","getRoot","(",")",".","createDocument","(","name,","stream",")",";","\n"],"docstring_tokens":["Create","a","new","document","to","be","added","to","the","root","directory"]}
{"code_tokens":["\n","public","DocumentEntry","createDocument","(","final","String","name,","final","int","size,","final","POIFSWriterListener","writer",")","\n","throws","IOException","{","\n","return","getRoot","(",")",".","createDocument","(","name,","size,","writer",")",";","\n"],"docstring_tokens":["create","a","new","DocumentEntry","in","the","root","entry;","the","data","will","be","provided","later"]}
{"code_tokens":["\n\n","public","DirectoryEntry","createDirectory","(","final","String","name",")","\n","throws","IOException","{","\n","return","getRoot","(",")",".","createDirectory","(","name",")",";","\n"],"docstring_tokens":["create","a","new","DirectoryEntry","in","the","root","directory"]}
{"code_tokens":["\n","@SuppressWarnings","(","\"UnusedReturnValue\"",")","\n","public","DocumentEntry","createOrUpdateDocument","(","final","InputStream","stream,","final","String","name",")","\n","throws","IOException","{","\n","return","getRoot","(",")",".","createOrUpdateDocument","(","name,","stream",")",";","\n"],"docstring_tokens":["Set","the","contents","of","a","document","in","the","root","directory,","creating","if","needed,","otherwise","updating"]}
{"code_tokens":["\n","public","void","writeFilesystem","(",")","throws","IOException","{","\n","if","(","!","(","_data","instanceof","FileBackedDataSource",")",")","{","\n","throw","new","IllegalArgumentException","(","\n","\"POIFS","opened","from","an","inputstream,","so","writeFilesystem","(",")","may","\"","+\n","\"not","be","called",".","Use","writeFilesystem","(","OutputStream",")","instead\"\n",")",";","\n","}","\n","if","(","!","(","(","FileBackedDataSource",")","_data",")",".","isWriteable","(",")",")","{","\n","throw","new","IllegalArgumentException","(","\n","\"POIFS","opened","in","read","only","mode,","so","writeFilesystem","(",")","may","\"","+\n","\"not","be","called",".","Open","the","FileSystem","in","read-write","mode","first\"\n",")",";","\n","}","\n","syncWithDataSource","(",")",";","\n"],"docstring_tokens":["Write","the","filesystem","out","to","the","open","file"]}
{"code_tokens":["\n","private","void","syncWithDataSource","(",")","throws","IOException","{","\n","//","Mini","Stream","+","SBATs","first,","as","mini-stream","details","have\n","//","to","be","stored","in","the","Root","Property\n","_mini_store",".","syncWithDataSource","(",")",";","\n\n","//","Properties\n","POIFSStream","propStream","=","new","POIFSStream","(","this,","_header",".","getPropertyStart","(",")",")",";","\n","_property_table",".","preWrite","(",")",";","\n","_property_table",".","write","(","propStream",")",";","\n","//","_header",".","setPropertyStart","has","been","updated","on","write",".",".",".","\n\n","//","HeaderBlock\n","UnsynchronizedByteArrayOutputStream","baos","=","new","UnsynchronizedByteArrayOutputStream","(","\n","_header",".","getBigBlockSize","(",")",".","getBigBlockSize","(",")","\n",")",";","\n","_header",".","writeData","(","baos",")",";","\n","getBlockAt","(","-1",")",".","put","(","baos",".","toByteArray","(",")",")",";","\n\n\n","//","BATs\n","for","(","BATBlock","bat",":","_bat_blocks",")","{","\n","ByteBuffer","block","=","getBlockAt","(","bat",".","getOurBlockIndex","(",")",")",";","\n","bat",".","writeData","(","block",")",";","\n","}","\n","//","XBats\n","for","(","BATBlock","bat",":","_xbat_blocks",")","{","\n","ByteBuffer","block","=","getBlockAt","(","bat",".","getOurBlockIndex","(",")",")",";","\n","bat",".","writeData","(","block",")",";","\n","}","\n"],"docstring_tokens":["Has","our","in-memory","objects","write","their","state","to","their","backing","blocks"]}
{"code_tokens":["\n","public","static","void","main","(","String[]","args",")","throws","IOException","{","\n","if","(","args",".","length","!=","2",")","{","\n","System",".","err",".","println","(","\n","\"two","arguments","required:","input","filename","and","output","filename\"",")",";","\n","System",".","exit","(","1",")",";","\n","}","\n\n","try","(","FileInputStream","istream","=","new","FileInputStream","(","args[0]",")",")","{","\n","try","(","FileOutputStream","ostream","=","new","FileOutputStream","(","args[1]",")",")","{","\n","try","(","POIFSFileSystem","fs","=","new","POIFSFileSystem","(","istream",")",")","{","\n","fs",".","writeFilesystem","(","ostream",")",";","\n","}","\n","}","\n","}","\n"],"docstring_tokens":["read","in","a","file","and","write","it","back","out","again"]}
{"code_tokens":["\n","public","DirectoryNode","getRoot","(",")","{","\n","if","(","_root","==","null",")","{","\n","_root","=","new","DirectoryNode","(","_property_table",".","getRoot","(",")",",","this,","null",")",";","\n","}","\n","return","_root",";","\n"],"docstring_tokens":["Get","the","root","entry"]}
{"code_tokens":["\n\n","@Override\n","public","boolean","preferArray","(",")","{","\n","return","getRoot","(",")",".","preferArray","(",")",";","\n"],"docstring_tokens":["Give","viewers","a","hint","as","to","whether","to","call","getViewableArray","or","getViewableIterator"]}
{"code_tokens":["\n","@Override\n","public","void","setSelectedTab","(","int","index",")","{","\n\n","validateSheetIndex","(","index",")",";","\n","int","nSheets","=","_sheets",".","size","(",")",";","\n","for","(","int","i","=","0",";","i","<","nSheets",";","i++",")","{","\n","getSheetAt","(","i",")",".","setSelected","(","i","==","index",")",";","\n","}","\n","workbook",".","getWindowOne","(",")",".","setNumSelectedTabs","(","(","short",")","1",")",";","\n"],"docstring_tokens":["Selects","a","single","sheet"]}
{"code_tokens":["\n\n","@Override\n","public","HSSFSheet","createSheet","(",")","{","\n","HSSFSheet","sheet","=","new","HSSFSheet","(","this",")",";","\n\n","_sheets",".","add","(","sheet",")",";","\n","workbook",".","setSheetName","(","_sheets",".","size","(",")","-","1,","\"Sheet\"","+","(","_sheets",".","size","(",")","-","1",")",")",";","\n","boolean","isOnlySheet","=","_sheets",".","size","(",")","==","1",";","\n","sheet",".","setSelected","(","isOnlySheet",")",";","\n","sheet",".","setActive","(","isOnlySheet",")",";","\n","return","sheet",";","\n"],"docstring_tokens":["create","an","HSSFSheet","for","this","HSSFWorkbook,","adds","it","to","the","sheets","and","returns","the","high","level","representation"]}
{"code_tokens":["\n\n","@Override\n","public","HSSFSheet","cloneSheet","(","int","sheetIndex",")","{","\n","validateSheetIndex","(","sheetIndex",")",";","\n","HSSFSheet","srcSheet","=","_sheets",".","get","(","sheetIndex",")",";","\n","String","srcName","=","workbook",".","getSheetName","(","sheetIndex",")",";","\n","HSSFSheet","clonedSheet","=","srcSheet",".","cloneSheet","(","this",")",";","\n","clonedSheet",".","setSelected","(","false",")",";","\n","clonedSheet",".","setActive","(","false",")",";","\n\n","String","name","=","getUniqueSheetName","(","srcName",")",";","\n","int","newSheetIndex","=","_sheets",".","size","(",")",";","\n","_sheets",".","add","(","clonedSheet",")",";","\n","workbook",".","setSheetName","(","newSheetIndex,","name",")",";","\n\n","//","Check","this","sheet","has","an","autofilter,","(","which","has","a","built-in","NameRecord","at","workbook","level",")","\n","int","filterDbNameIndex","=","findExistingBuiltinNameRecordIdx","(","sheetIndex,","NameRecord",".","BUILTIN_FILTER_DB",")",";","\n","if","(","filterDbNameIndex","!=","-1",")","{","\n","NameRecord","newNameRecord","=","workbook",".","cloneFilter","(","filterDbNameIndex,","newSheetIndex",")",";","\n","HSSFName","newName","=","new","HSSFName","(","this,","newNameRecord",")",";","\n","names",".","add","(","newName",")",";","\n","}","\n","//","TODO","-","maybe","same","logic","required","for","other/all","built-in","name","records\n//","workbook",".","cloneDrawings","(","clonedSheet",".","getSheet","(",")",")",";","\n\n","return","clonedSheet",";","\n"],"docstring_tokens":["create","an","HSSFSheet","from","an","existing","sheet","in","the","HSSFWorkbook"]}
{"code_tokens":["\n","@Override\n","public","HSSFSheet","getSheetAt","(","int","index",")","{","\n","validateSheetIndex","(","index",")",";","\n","return","_sheets",".","get","(","index",")",";","\n"],"docstring_tokens":["Get","the","HSSFSheet","object","at","the","given","index"]}
{"code_tokens":["\n","@Override\n","public","HSSFFont","findFont","(","boolean","bold,","short","color,","short","fontHeight,\n","String","name,","boolean","italic,","boolean","strikeout,\n","short","typeOffset,","byte","underline",")","{","\n","int","numberOfFonts","=","getNumberOfFonts","(",")",";","\n","for","(","int","i","=","0",";","i","<=","numberOfFonts",";","i++",")","{","\n","//","Remember","-","there","is","no","4!\n","if","(","i","==","4",")","{","\n","continue",";","\n","}","\n\n","HSSFFont","hssfFont","=","getFontAt","(","i",")",";","\n","if","(","hssfFont",".","getBold","(",")","==","bold\n","&&","hssfFont",".","getColor","(",")","==","color\n","&&","hssfFont",".","getFontHeight","(",")","==","fontHeight\n","&&","hssfFont",".","getFontName","(",")",".","equals","(","name",")","\n","&&","hssfFont",".","getItalic","(",")","==","italic\n","&&","hssfFont",".","getStrikeout","(",")","==","strikeout\n","&&","hssfFont",".","getTypeOffset","(",")","==","typeOffset\n","&&","hssfFont",".","getUnderline","(",")","==","underline",")","{","\n","return","hssfFont",";","\n","}","\n","}","\n\n","return","null",";","\n"],"docstring_tokens":["Finds","a","font","that","matches","the","one","with","the","supplied","attributes"]}
{"code_tokens":["\n","@Override\n","public","void","setPrintArea","(","int","sheetIndex,","String","reference",")","{","\n","NameRecord","name","=","workbook",".","getSpecificBuiltinRecord","(","NameRecord",".","BUILTIN_PRINT_AREA,","sheetIndex","+","1",")",";","\n\n\n","if","(","name","==","null",")","{","\n","name","=","workbook",".","createBuiltInName","(","NameRecord",".","BUILTIN_PRINT_AREA,","sheetIndex","+","1",")",";","\n","//","adding","one","here","because","0","indicates","a","global","named","region",";","doesn't","make","sense","for","print","areas\n","}","\n","String[]","parts","=","COMMA_PATTERN",".","split","(","reference",")",";","\n","StringBuilder","sb","=","new","StringBuilder","(","32",")",";","\n","for","(","int","i","=","0",";","i","<","parts",".","length",";","i++",")","{","\n","if","(","i",">","0",")","{","\n","sb",".","append","(","','",")",";","\n","}","\n","SheetNameFormatter",".","appendFormat","(","sb,","getSheetName","(","sheetIndex",")",")",";","\n","sb",".","append","(","'!'",")",";","\n","sb",".","append","(","parts[i]",")",";","\n","}","\n","name",".","setNameDefinition","(","HSSFFormulaParser",".","parse","(","sb",".","toString","(",")",",","this,","FormulaType",".","NAMEDRANGE,","sheetIndex",")",")",";","\n"],"docstring_tokens":["Sets","the","printarea","for","the","sheet","provided","i.e"]}
{"code_tokens":["\n","@Override\n","public","HSSFName","createName","(",")","{","\n","NameRecord","nameRecord","=","workbook",".","createName","(",")",";","\n\n","HSSFName","newName","=","new","HSSFName","(","this,","nameRecord",")",";","\n\n","names",".","add","(","newName",")",";","\n\n","return","newName",";","\n"],"docstring_tokens":["creates","a","new","named","range","and","add","it","to","the","model"]}
{"code_tokens":["\n","private","void","searchForPictures","(","List<EscherRecord>","escherRecords,","List<HSSFPictureData>","pictures",")","{","\n","for","(","EscherRecord","escherRecord",":","escherRecords",")","{","\n\n","if","(","escherRecord","instanceof","EscherBSERecord",")","{","\n","EscherBlipRecord","blip","=","(","(","EscherBSERecord",")","escherRecord",")",".","getBlipRecord","(",")",";","\n","if","(","blip","!=","null",")","{","\n","//","TODO:","Some","kind","of","structure",".","\n","HSSFPictureData","picture","=","new","HSSFPictureData","(","blip",")",";","\n","pictures",".","add","(","picture",")",";","\n","}","\n\n\n","}","\n\n","//","Recursive","call",".","\n","searchForPictures","(","escherRecord",".","getChildRecords","(",")",",","pictures",")",";","\n","}","\n\n"],"docstring_tokens":["Performs","a","recursive","search","for","pictures","in","the","given","list","of","escher","records"]}
{"code_tokens":["\n","public","void","unwriteProtectWorkbook","(",")","{","\n","this",".","workbook",".","unwriteProtectWorkbook","(",")",";","\n"],"docstring_tokens":["removes","the","write","protect","flag"]}
{"code_tokens":["\n","@Override\n","public","boolean","getForceFormulaRecalculation","(",")","{","\n","InternalWorkbook","iwb","=","getWorkbook","(",")",";","\n","RecalcIdRecord","recalc","=","(","RecalcIdRecord",")","iwb",".","findFirstRecordBySid","(","RecalcIdRecord",".","sid",")",";","\n","return","recalc","!=","null","&&","recalc",".","getEngineId","(",")","!=","0",";","\n"],"docstring_tokens":["Whether","Excel","will","be","asked","to","recalculate","all","formulas","when","the","workbook","is","opened"]}
{"code_tokens":["\n","public","static","Date","getAsDate","(","MAPIAttribute","attr",")","{","\n","if","(","attr","==","null",")","{","\n","return","null",";","\n","}","\n","if","(","attr","instanceof","MAPIDateAttribute",")","{","\n","return","(","(","MAPIDateAttribute",")","attr",")",".","getDate","(",")",";","\n","}","\n\n","LOG",".","atWarn","(",")",".","log","(","\"Warning,","non","date","property","found:","{","}","\",","attr",")",";","\n","return","null",";","\n"],"docstring_tokens":["Returns","the","Date","of","a","Attribute,","converting","as","appropriate"]}
{"code_tokens":["\n","@Internal\n","public","void","setIcoFore","(","byte","value",")","\n","{","\n","field_1_value","=","(","short",")","icoFore",".","setValue","(","field_1_value,","value",")",";","\n"],"docstring_tokens":["Sets","the","icoFore","field","value"]}
{"code_tokens":["\n","@Internal\n","public","void","setIcoBack","(","byte","value",")","\n","{","\n","field_1_value","=","(","short",")","icoBack",".","setValue","(","field_1_value,","value",")",";","\n"],"docstring_tokens":["Sets","the","icoBack","field","value"]}
{"code_tokens":["\n","@Internal\n","public","void","setIpat","(","byte","value",")","\n","{","\n","field_1_value","=","(","short",")","ipat",".","setValue","(","field_1_value,","value",")",";","\n"],"docstring_tokens":["Sets","the","ipat","field","value"]}
{"code_tokens":["\n","public","String","getFileName","(",")","{","\n","EscherComplexProperty","propFile","=","getOptRecord","(",")",".","lookup","(","EscherPropertyTypes",".","BLIP__BLIPFILENAME",")",";","\n","return","(","null","==","propFile",")","\n","?","\"\"\n",":","StringUtil",".","getFromUnicodeLE","(","propFile",".","getComplexData","(",")",")",".","trim","(",")",";","\n"],"docstring_tokens":["The","filename","of","the","embedded","image"]}
{"code_tokens":["\n","public","static","short","lookupIndexByName","(","String","name",")","{","\n","FunctionMetadata","fd","=","getInstance","(",")",".","getFunctionByNameInternal","(","name",")",";","\n","if","(","fd","==","null",")","{","\n","//","also","try","the","cetab","functions\n","fd","=","getInstanceCetab","(",")",".","getFunctionByNameInternal","(","name",")",";","\n","if","(","fd","==","null",")","{","\n","return","-1",";","\n","}","\n","}","\n","return","(","short",")","fd",".","getIndex","(",")",";","\n"],"docstring_tokens":["Resolves","a","built-in","function","index"]}
{"code_tokens":["\n","@Override\n","public","HSSFRow","getRow","(",")","{","\n","int","rowIndex","=","getRowIndex","(",")",";","\n","return","_sheet",".","getRow","(","rowIndex",")",";","\n"],"docstring_tokens":["Returns","the","HSSFRow","this","cell","belongs","to"]}
{"code_tokens":["\n","@Override\n","@SuppressWarnings","(","\"fallthrough\"",")","\n","public","void","setCellValue","(","boolean","value",")","{","\n","int","row=_record",".","getRow","(",")",";","\n","short","col=_record",".","getColumn","(",")",";","\n","short","styleIndex=_record",".","getXFIndex","(",")",";","\n\n","switch","(","_cellType",")","{","\n","default:\n","setCellType","(","CellType",".","BOOLEAN,","false,","row,","col,","styleIndex",")",";","\n","//","fall","through\n","case","BOOLEAN:\n","(","(","BoolErrRecord",")","_record",")",".","setValue","(","value",")",";","\n","break",";","\n","case","FORMULA:\n","(","(","FormulaRecordAggregate",")","_record",")",".","setCachedBooleanResult","(","value",")",";","\n","break",";","\n","}","\n"],"docstring_tokens":["set","a","boolean","value","for","the","cell"]}
{"code_tokens":["\n","@Override\n","public","CellType","getCachedFormulaResultType","(",")","{","\n","if","(","_cellType","!=","CellType",".","FORMULA",")","{","\n","throw","new","IllegalStateException","(","\"Only","formula","cells","have","cached","results\"",")",";","\n","}","\n\n","return","(","(","FormulaRecordAggregate",")","_record",")",".","getFormulaRecord","(",")",".","getCachedResultTypeEnum","(",")",";","\n"],"docstring_tokens":["Only","valid","for","formula","cells"]}
{"code_tokens":["\n","@Override\n","public","void","initialize","(","EncryptionInfo","info,","LittleEndianInput","dis",")","\n","throws","IOException","{","\n","/*","int","hSize","=","*/","dis",".","readInt","(",")",";","\n","CryptoAPIEncryptionHeader","header","=","new","CryptoAPIEncryptionHeader","(","dis",")",";","\n","info",".","setHeader","(","header",")",";","\n","info",".","setVerifier","(","new","CryptoAPIEncryptionVerifier","(","dis,","header",")",")",";","\n","CryptoAPIDecryptor","dec","=","new","CryptoAPIDecryptor","(",")",";","\n","dec",".","setEncryptionInfo","(","info",")",";","\n","info",".","setDecryptor","(","dec",")",";","\n","CryptoAPIEncryptor","enc","=","new","CryptoAPIEncryptor","(",")",";","\n","enc",".","setEncryptionInfo","(","info",")",";","\n","info",".","setEncryptor","(","enc",")",";","\n"],"docstring_tokens":["initialize","the","builder","from","a","stream"]}
{"code_tokens":["\n","@Override\n","public","void","initialize","(","EncryptionInfo","info,\n","CipherAlgorithm","cipherAlgorithm,","HashAlgorithm","hashAlgorithm,\n","int","keyBits,","int","blockSize,","ChainingMode","chainingMode",")","{","\n","if","(","cipherAlgorithm","==","null",")","{","\n","cipherAlgorithm","=","CipherAlgorithm",".","rc4",";","\n","}","\n","if","(","hashAlgorithm","==","null",")","{","\n","hashAlgorithm","=","HashAlgorithm",".","sha1",";","\n","}","\n","if","(","keyBits","==","-1",")","{","\n","keyBits","=","0x28",";","\n","}","\n","assert","(","cipherAlgorithm","==","CipherAlgorithm",".","rc4","&&","hashAlgorithm","==","HashAlgorithm",".","sha1",")",";","\n","\n","info",".","setHeader","(","new","CryptoAPIEncryptionHeader","(","cipherAlgorithm,","hashAlgorithm,","keyBits,","blockSize,","chainingMode",")",")",";","\n","info",".","setVerifier","(","new","CryptoAPIEncryptionVerifier","(","cipherAlgorithm,","hashAlgorithm,","keyBits,","blockSize,","chainingMode",")",")",";","\n","CryptoAPIDecryptor","dec","=","new","CryptoAPIDecryptor","(",")",";","\n","dec",".","setEncryptionInfo","(","info",")",";","\n","info",".","setDecryptor","(","dec",")",";","\n","CryptoAPIEncryptor","enc","=","new","CryptoAPIEncryptor","(",")",";","\n","enc",".","setEncryptionInfo","(","info",")",";","\n","info",".","setEncryptor","(","enc",")",";","\n"],"docstring_tokens":["initialize","the","builder","from","scratch"]}
{"code_tokens":["\n\n","public","void","setXFType","(","short","type",")","\n","{","\n","field_3_cell_options","=","_xf_type",".","setShortValue","(","field_3_cell_options,\n","type",")",";","\n"],"docstring_tokens":["set","whether","the","cell","is","a","cell","or","style","XFRecord"]}
{"code_tokens":["\n\n","public","void","set123Prefix","(","boolean","prefix",")","\n","{","\n","field_3_cell_options","=\n","_123_prefix",".","setShortBoolean","(","field_3_cell_options,","prefix",")",";","\n"],"docstring_tokens":["set","some","old","holdover","from","lotus","123"]}
{"code_tokens":["\n\n","public","void","setLeftBorderPaletteIdx","(","short","border",")","\n","{","\n","field_7_palette_options","=\n","_left_border_palette_idx",".","setShortValue","(","field_7_palette_options,\n","border",")",";","\n"],"docstring_tokens":["set","the","palette","index","for","the","left","border","color"]}
{"code_tokens":["\n\n","public","void","setRightBorderPaletteIdx","(","short","border",")","\n","{","\n","field_7_palette_options","=\n","_right_border_palette_idx",".","setShortValue","(","field_7_palette_options,\n","border",")",";","\n"],"docstring_tokens":["set","the","palette","index","for","the","right","border","color"]}
{"code_tokens":["\n\n","public","void","setFillForeground","(","short","color",")","\n","{","\n","field_9_fill_palette_options","=\n","_fill_foreground",".","setShortValue","(","field_9_fill_palette_options,\n","color",")",";","\n"],"docstring_tokens":["set","the","foreground","palette","color","index"]}
{"code_tokens":["\n\n","public","void","setFillBackground","(","short","color",")","\n","{","\n","field_9_fill_palette_options","=\n","_fill_background",".","setShortValue","(","field_9_fill_palette_options,\n","color",")",";","\n"],"docstring_tokens":["set","the","background","palette","color","index"]}
{"code_tokens":["\n\n","public","boolean","isLocked","(",")","\n","{","\n","return","_locked",".","isSet","(","field_3_cell_options",")",";","\n"],"docstring_tokens":["get","whether","the","cell","is","locked","or","not"]}
{"code_tokens":["\n\n","public","boolean","isHidden","(",")","\n","{","\n","return","_hidden",".","isSet","(","field_3_cell_options",")",";","\n"],"docstring_tokens":["get","whether","the","cell","is","hidden","or","not"]}
{"code_tokens":["\n\n","public","short","getXFType","(",")","\n","{","\n","return","_xf_type",".","getShortValue","(","field_3_cell_options",")",";","\n"],"docstring_tokens":["get","whether","the","cell","is","a","cell","or","style","XFRecord"]}
{"code_tokens":["\n\n","public","boolean","get123Prefix","(",")","\n","{","\n","return","_123_prefix",".","isSet","(","field_3_cell_options",")",";","\n"],"docstring_tokens":["get","some","old","holdover","from","lotus","123"]}
{"code_tokens":["\n\n","public","short","getLeftBorderPaletteIdx","(",")","\n","{","\n","return","_left_border_palette_idx\n",".","getShortValue","(","field_7_palette_options",")",";","\n"],"docstring_tokens":["get","the","palette","index","for","the","left","border","color"]}
{"code_tokens":["\n\n","public","short","getRightBorderPaletteIdx","(",")","\n","{","\n","return","_right_border_palette_idx\n",".","getShortValue","(","field_7_palette_options",")",";","\n"],"docstring_tokens":["get","the","palette","index","for","the","right","border","color"]}
{"code_tokens":["\n\n","public","short","getFillForeground","(",")","\n","{","\n","return","_fill_foreground",".","getShortValue","(","field_9_fill_palette_options",")",";","\n"],"docstring_tokens":["get","the","foreground","palette","color","index"]}
{"code_tokens":["\n\n","public","short","getFillBackground","(",")","\n","{","\n","return","_fill_background",".","getShortValue","(","field_9_fill_palette_options",")",";","\n"],"docstring_tokens":["get","the","background","palette","color","index"]}
{"code_tokens":["\n","public","static","Stream","createStream","(","Pointer","pointer,","byte[]","documentData,","ChunkFactory","chunkFactory,","PointerFactory","pointerFactory",")","{","\n","//","Create","the","store\n","StreamStore","store",";","\n","if","(","pointer",".","destinationCompressed","(",")",")","{","\n","try","{","\n","store","=","new","CompressedStreamStore","(","\n","documentData,","pointer",".","getOffset","(",")",",","pointer",".","getLength","(",")","\n",")",";","\n","}","catch","(","IOException","e",")","{","\n","//","Should","never","occur\n","throw","new","HDGFException","(","e",")",";","\n","}","\n","}","else","{","\n","store","=","new","StreamStore","(","\n","documentData,","pointer",".","getOffset","(",")",",","pointer",".","getLength","(",")","\n",")",";","\n","}","\n\n","//","Figure","out","what","sort","of","Stream","to","create,","create","and","return","it\n","if","(","pointer",".","getType","(",")","==","20",")","{","\n","return","new","TrailerStream","(","pointer,","store,","chunkFactory,","pointerFactory",")",";","\n","}","\n","else","if","(","pointer",".","destinationHasPointers","(",")",")","{","\n","return","new","PointerContainingStream","(","pointer,","store,","chunkFactory,","pointerFactory",")",";","\n","}","\n","else","if","(","pointer",".","destinationHasChunks","(",")",")","{","\n","return","new","ChunkStream","(","pointer,","store,","chunkFactory",")",";","\n","}","\n","else","if","(","pointer",".","destinationHasStrings","(",")",")","{","\n","return","new","StringsStream","(","pointer,","store,","chunkFactory",")",";","\n","}","\n\n","//","Give","up","and","return","a","generic","one\n","return","new","UnknownStream","(","pointer,","store",")",";","\n"],"docstring_tokens":["Uses","the","pointer","to","locate","a","Stream","within","the","document","data,","and","creates","it"]}
{"code_tokens":["\n","@Deprecated\n","@Removal","(","version","=","\"6",".","0",".","0\"",")","\n","public","static","OPCPackage","clone","(","OPCPackage","pkg,","File","file",")","throws","OpenXML4JException,","IOException","{","\n\n","String","path","=","file",".","getAbsolutePath","(",")",";","\n\n","try","(","OPCPackage","dest","=","OPCPackage",".","create","(","path",")",")","{","\n","PackageRelationshipCollection","rels","=","pkg",".","getRelationships","(",")",";","\n","for","(","PackageRelationship","rel",":","rels",")","{","\n","PackagePart","part","=","pkg",".","getPart","(","rel",")",";","\n","PackagePart","part_tgt",";","\n","if","(","rel",".","getRelationshipType","(",")",".","equals","(","PackageRelationshipTypes",".","CORE_PROPERTIES",")",")","{","\n","copyProperties","(","pkg",".","getPackageProperties","(",")",",","dest",".","getPackageProperties","(",")",")",";","\n","continue",";","\n","}","\n","dest",".","addRelationship","(","part",".","getPartName","(",")",",","rel",".","getTargetMode","(",")",",","rel",".","getRelationshipType","(",")",")",";","\n","part_tgt","=","dest",".","createPart","(","part",".","getPartName","(",")",",","part",".","getContentType","(",")",")",";","\n\n","try","(","\n","InputStream","in","=","part",".","getInputStream","(",")",";","\n","OutputStream","out","=","part_tgt",".","getOutputStream","(",")","\n",")","{","\n","IOUtils",".","copy","(","in,","out",")",";","\n","}","\n\n","if","(","part",".","hasRelationships","(",")",")","{","\n","copy","(","pkg,","part,","dest,","part_tgt",")",";","\n","}","\n","}","\n","}","\n\n","//the","temp","file","will","be","deleted","when","JVM","terminates\n","new","File","(","path",")",".","deleteOnExit","(",")",";","\n","return","OPCPackage",".","open","(","path",")",";","\n"],"docstring_tokens":["Clone","the","specified","package"]}
{"code_tokens":["\n","private","static","void","copy","(","OPCPackage","pkg,","PackagePart","part,","OPCPackage","tgt,","PackagePart","part_tgt",")","throws","OpenXML4JException,","IOException","{","\n","PackageRelationshipCollection","rels","=","part",".","getRelationships","(",")",";","\n","if","(","rels","!=","null",")","for","(","PackageRelationship","rel",":","rels",")","{","\n","PackagePart","p",";","\n","if","(","rel",".","getTargetMode","(",")","==","TargetMode",".","EXTERNAL",")","{","\n","part_tgt",".","addExternalRelationship","(","rel",".","getTargetURI","(",")",".","toString","(",")",",","rel",".","getRelationshipType","(",")",",","rel",".","getId","(",")",")",";","\n","//external","relations","don't","have","associated","package","parts\n","continue",";","\n","}","\n","URI","uri","=","rel",".","getTargetURI","(",")",";","\n\n","if","(","uri",".","getRawFragment","(",")","!=","null",")","{","\n","part_tgt",".","addRelationship","(","uri,","rel",".","getTargetMode","(",")",",","rel",".","getRelationshipType","(",")",",","rel",".","getId","(",")",")",";","\n","continue",";","\n","}","\n","PackagePartName","relName","=","PackagingURIHelper",".","createPartName","(","rel",".","getTargetURI","(",")",")",";","\n","p","=","pkg",".","getPart","(","relName",")",";","\n","part_tgt",".","addRelationship","(","p",".","getPartName","(",")",",","rel",".","getTargetMode","(",")",",","rel",".","getRelationshipType","(",")",",","rel",".","getId","(",")",")",";","\n\n","PackagePart","dest",";","\n","if","(","!tgt",".","containPart","(","p",".","getPartName","(",")",")",")","{","\n","dest","=","tgt",".","createPart","(","p",".","getPartName","(",")",",","p",".","getContentType","(",")",")",";","\n","try","(","\n","InputStream","in","=","p",".","getInputStream","(",")",";","\n","OutputStream","out","=","dest",".","getOutputStream","(",")","\n",")","{","\n","IOUtils",".","copy","(","in,","out",")",";","\n","}","\n","copy","(","pkg,","p,","tgt,","dest",")",";","\n","}","\n","}","\n"],"docstring_tokens":["Recursively","copy","package","parts","to","the","destination","package"]}
{"code_tokens":["\n","private","static","void","copyProperties","(","PackageProperties","src,","PackageProperties","tgt",")","{","\n","tgt",".","setCategoryProperty","(","src",".","getCategoryProperty","(",")",")",";","\n","tgt",".","setContentStatusProperty","(","src",".","getContentStatusProperty","(",")",")",";","\n","tgt",".","setContentTypeProperty","(","src",".","getContentTypeProperty","(",")",")",";","\n","tgt",".","setCreatorProperty","(","src",".","getCreatorProperty","(",")",")",";","\n","tgt",".","setDescriptionProperty","(","src",".","getDescriptionProperty","(",")",")",";","\n","tgt",".","setIdentifierProperty","(","src",".","getIdentifierProperty","(",")",")",";","\n","tgt",".","setKeywordsProperty","(","src",".","getKeywordsProperty","(",")",")",";","\n","tgt",".","setLanguageProperty","(","src",".","getLanguageProperty","(",")",")",";","\n","tgt",".","setRevisionProperty","(","src",".","getRevisionProperty","(",")",")",";","\n","tgt",".","setSubjectProperty","(","src",".","getSubjectProperty","(",")",")",";","\n","tgt",".","setTitleProperty","(","src",".","getTitleProperty","(",")",")",";","\n","tgt",".","setVersionProperty","(","src",".","getVersionProperty","(",")",")",";","\n"],"docstring_tokens":["Copy","core","package","properties"]}
{"code_tokens":["\n","public","void","addSlidePersistAtom","(","SlidePersistAtom","spa",")","{","\n","//","Add","the","new","SlidePersistAtom","at","the","end\n","appendChildRecord","(","spa",")",";","\n\n","SlideAtomsSet","newSAS","=","new","SlideAtomsSet","(","spa,","new","org",".","apache",".","poi",".","hslf",".","record",".","Record[0]",")",";","\n\n","//","Update","our","SlideAtomsSets","with","this\n","SlideAtomsSet[]","sas","=","new","SlideAtomsSet[slideAtomsSets",".","length+1]",";","\n","System",".","arraycopy","(","slideAtomsSets,","0,","sas,","0,","slideAtomsSets",".","length",")",";","\n","sas[sas",".","length-1]","=","newSAS",";","\n","slideAtomsSets","=","sas",";","\n"],"docstring_tokens":["Add","a","new","SlidePersistAtom,","to","the","end","of","the","current","list,","and","update","the","internal","list","of","SlidePersistAtoms"]}
{"code_tokens":["\n","public","int","addEmbed","(","POIFSFileSystem","poiData",")","{","\n","DirectoryNode","root","=","poiData",".","getRoot","(",")",";","\n\n","//","prepare","embedded","data\n","if","(","new","ClassID","(",")",".","equals","(","root",".","getStorageClsid","(",")",")",")","{","\n","//","need","to","set","class","id\n","Map<String,ClassID>","olemap","=","getOleMap","(",")",";","\n","ClassID","classID","=","null",";","\n","for","(","Map",".","Entry<String,ClassID>","entry",":","olemap",".","entrySet","(",")",")","{","\n","if","(","root",".","hasEntry","(","entry",".","getKey","(",")",")",")","{","\n","classID","=","entry",".","getValue","(",")",";","\n","break",";","\n","}","\n","}","\n","if","(","classID","==","null",")","{","\n","throw","new","IllegalArgumentException","(","\"Unsupported","embedded","document\"",")",";","\n","}","\n\n","root",".","setStorageClsid","(","classID",")",";","\n","}","\n\n","ExEmbed","exEmbed","=","new","ExEmbed","(",")",";","\n","//","remove","unneccessary","infos,","so","we","don't","need","to","specify","the","type\n","//","of","the","ole","object","multiple","times\n","Record[]","children","=","exEmbed",".","getChildRecords","(",")",";","\n","exEmbed",".","removeChild","(","children[2]",")",";","\n","exEmbed",".","removeChild","(","children[3]",")",";","\n","exEmbed",".","removeChild","(","children[4]",")",";","\n\n","ExEmbedAtom","eeEmbed","=","exEmbed",".","getExEmbedAtom","(",")",";","\n","eeEmbed",".","setCantLockServerB","(","true",")",";","\n\n","ExOleObjAtom","eeAtom","=","exEmbed",".","getExOleObjAtom","(",")",";","\n","eeAtom",".","setDrawAspect","(","ExOleObjAtom",".","DRAW_ASPECT_VISIBLE",")",";","\n","eeAtom",".","setType","(","ExOleObjAtom",".","TYPE_EMBEDDED",")",";","\n","//","eeAtom",".","setSubType","(","ExOleObjAtom",".","SUBTYPE_EXCEL",")",";","\n","//","should","be","ignored?!?,","see","MS-PPT","ExOleObjAtom,","but","Libre","Office","sets","it",".",".",".","\n","eeAtom",".","setOptions","(","1226240",")",";","\n\n","ExOleObjStg","exOleObjStg","=","new","ExOleObjStg","(",")",";","\n","try","{","\n","Ole10Native",".","createOleMarkerEntry","(","poiData",")",";","\n","UnsynchronizedByteArrayOutputStream","bos","=","new","UnsynchronizedByteArrayOutputStream","(",")",";","\n","poiData",".","writeFilesystem","(","bos",")",";","\n","exOleObjStg",".","setData","(","bos",".","toByteArray","(",")",")",";","\n","}","catch","(","IOException","e",")","{","\n","throw","new","HSLFException","(","e",")",";","\n","}","\n\n","int","psrId","=","addPersistentObject","(","exOleObjStg",")",";","\n","exOleObjStg",".","setPersistId","(","psrId",")",";","\n","eeAtom",".","setObjStgDataRef","(","psrId",")",";","\n\n","int","objectId","=","addToObjListAtom","(","exEmbed",")",";","\n","eeAtom",".","setObjID","(","objectId",")",";","\n","return","objectId",";","\n"],"docstring_tokens":["Add","a","embedded","object","to","this","presentation"]}
{"code_tokens":["\n","public","Pointer","createPointer","(","byte[]","data,","int","offset",")","{","\n","Pointer","p",";","\n","if","(","version",">=","6",")","{","\n","p","=","new","PointerV6","(",")",";","\n","p",".","setType","(","LittleEndian",".","getInt","(","data,","offset",")",")",";","\n","p",".","setAddress","(","(","int",")","LittleEndian",".","getUInt","(","data,","offset+4",")",")",";","\n","p",".","setOffset","(","(","int",")","LittleEndian",".","getUInt","(","data,","offset+8",")",")",";","\n","p",".","setLength","(","(","int",")","LittleEndian",".","getUInt","(","data,","offset+12",")",")",";","\n","p",".","setFormat","(","LittleEndian",".","getShort","(","data,","offset+16",")",")",";","\n\n","return","p",";","\n","}","else","if","(","version","==","5",")","{","\n","p","=","new","PointerV5","(",")",";","\n","p",".","setType","(","LittleEndian",".","getShort","(","data,","offset",")",")",";","\n","p",".","setFormat","(","LittleEndian",".","getShort","(","data,","offset+2",")",")",";","\n","p",".","setAddress","(","(","int",")","LittleEndian",".","getUInt","(","data,","offset+4",")",")",";","\n","p",".","setOffset","(","(","int",")","LittleEndian",".","getUInt","(","data,","offset+8",")",")",";","\n","p",".","setLength","(","(","int",")","LittleEndian",".","getUInt","(","data,","offset+12",")",")",";","\n\n","return","p",";","\n","}","else","{","\n","throw","new","OldVisioFormatException","(","\"Visio","files","with","versions","below","5","are","not","supported,","yours","was","\"","+","version",")",";","\n","}","\n"],"docstring_tokens":["Creates","a","single","Pointer","from","the","data","at","the","given","offset"]}
{"code_tokens":["\n","public","Pointer[]","createContainerPointers","(","Pointer","parent,","byte[]","data",")","{","\n","//","Where","in","the","stream","does","the","\"number","of","pointers\"","offset","live?\n","int","numPointersOffset","=","parent",".","getNumPointersOffset","(","data",")",";","\n","//","How","many","do","we","have?\n","int","numPointers","=","parent",".","getNumPointers","(","numPointersOffset,","data",")",";","\n","//","How","much","to","skip","for","the","num","pointers","+","any","extra","data?\n","int","skip","=","parent",".","getPostNumPointersSkip","(",")",";","\n\n","if","(","numPointers","<","0",")","{","\n","throw","new","IllegalArgumentException","(","\"Cannot","create","container","pointers","with","negative","count:","\"","+","numPointers",")",";","\n","}","\n\n","IOUtils",".","safelyAllocateCheck","(","numPointers,","MAX_NUMBER_OF_POINTERS",")",";","\n\n","//","Create\n","int","pos","=","numPointersOffset","+","skip",";","\n","Pointer[]","childPointers","=","new","Pointer[numPointers]",";","\n","for","(","int","i=0",";","i<numPointers",";","i++",")","{","\n","childPointers[i]","=","this",".","createPointer","(","data,","pos",")",";","\n","pos","+=","childPointers[i]",".","getSizeInBytes","(",")",";","\n","}","\n\n","return","childPointers",";","\n"],"docstring_tokens":["Parsers","the","PointerContainingStream","contents","and","creates","all","the","child","Pointers","for","it"]}
{"code_tokens":["\n","@Override\n","protected","EscherContainerRecord","createSpContainer","(","boolean","isChild",")","{","\n","EscherContainerRecord","ecr","=","super",".","createSpContainer","(","isChild",")",";","\n\n","setPlaceholder","(","Placeholder",".","BODY",")",";","\n\n","return","ecr",";","\n"],"docstring_tokens":["Create","a","new","Placeholder","and","initialize","internal","structures"]}
{"code_tokens":["\n","static","HSSFPatriarch","createPatriarch","(","HSSFPatriarch","patriarch,","HSSFSheet","sheet",")","{","\n","HSSFPatriarch","newPatriarch","=","new","HSSFPatriarch","(","sheet,","new","EscherAggregate","(","true",")",")",";","\n","newPatriarch",".","afterCreate","(",")",";","\n","for","(","HSSFShape","shape:","patriarch",".","getChildren","(",")",")","{","\n","HSSFShape","newShape",";","\n","if","(","shape","instanceof","HSSFShapeGroup",")","{","\n","newShape","=","(","(","HSSFShapeGroup",")","shape",")",".","cloneShape","(","newPatriarch",")",";","\n","}","else","{","\n","newShape","=","shape",".","cloneShape","(",")",";","\n","}","\n","newPatriarch",".","onCreate","(","newShape",")",";","\n","newPatriarch",".","addShape","(","newShape",")",";","\n","}","\n","return","newPatriarch",";","\n"],"docstring_tokens":["used","to","clone","patriarch","create","patriarch","from","existing","one"]}
{"code_tokens":["\n","public","HSSFShapeGroup","createGroup","(","HSSFClientAnchor","anchor",")","{","\n","HSSFShapeGroup","group","=","new","HSSFShapeGroup","(","null,","anchor",")",";","\n","addShape","(","group",")",";","\n","onCreate","(","group",")",";","\n","return","group",";","\n"],"docstring_tokens":["Creates","a","new","group","record","stored","under","this","patriarch"]}
{"code_tokens":["\n","public","HSSFComment","createComment","(","HSSFAnchor","anchor",")","{","\n","HSSFComment","shape","=","new","HSSFComment","(","null,","anchor",")",";","\n","addShape","(","shape",")",";","\n","onCreate","(","shape",")",";","\n","return","shape",";","\n"],"docstring_tokens":["Constructs","a","cell","comment"]}
{"code_tokens":["\n","@Override\n","public","List<HSSFShape>","getChildren","(",")","{","\n","return","Collections",".","unmodifiableList","(","_shapes",")",";","\n"],"docstring_tokens":["Returns","a","unmodifiable","list","of","all","shapes","contained","by","the","patriarch"]}
{"code_tokens":["\n","@Override\n","public","void","clear","(",")","{","\n","ArrayList","<HSSFShape>","copy","=","new","ArrayList<>","(","_shapes",")",";","\n","for","(","HSSFShape","shape:","copy",")","{","\n","removeShape","(","shape",")",";","\n","}","\n"],"docstring_tokens":["remove","all","shapes","inside","patriarch"]}
{"code_tokens":["\n","void","buildShapeTree","(",")","{","\n","EscherContainerRecord","dgContainer","=","_boundAggregate",".","getEscherContainer","(",")",";","\n","if","(","dgContainer","==","null",")","{","\n","return",";","\n","}","\n","EscherContainerRecord","spgrConrainer","=","dgContainer",".","getChildContainers","(",")",".","get","(","0",")",";","\n","List<EscherContainerRecord>","spgrChildren","=","spgrConrainer",".","getChildContainers","(",")",";","\n\n","for","(","int","i","=","0",";","i","<","spgrChildren",".","size","(",")",";","i++",")","{","\n","EscherContainerRecord","spContainer","=","spgrChildren",".","get","(","i",")",";","\n","if","(","i","!=","0",")","{","\n","HSSFShapeFactory",".","createShapeTree","(","spContainer,","_boundAggregate,","this,","_sheet",".","getWorkbook","(",")",".","getDirectory","(",")",")",";","\n","}","\n","}","\n"],"docstring_tokens":["create","shape","tree","from","existing","escher","records","tree"]}
{"code_tokens":["\n","@Beta\n","public","void","addRowLabel","(","int","columnIndex",")","{","\n","checkColumnIndex","(","columnIndex",")",";","\n","\n","AreaReference","pivotArea","=","getPivotArea","(",")",";","\n","final","int","lastRowIndex","=","pivotArea",".","getLastCell","(",")",".","getRow","(",")","-","pivotArea",".","getFirstCell","(",")",".","getRow","(",")",";","\n","CTPivotFields","pivotFields","=","pivotTableDefinition",".","getPivotFields","(",")",";","\n\n","CTPivotField","pivotField","=","CTPivotField",".","Factory",".","newInstance","(",")",";","\n","CTItems","items","=","pivotField",".","addNewItems","(",")",";","\n\n","pivotField",".","setAxis","(","STAxis",".","AXIS_ROW",")",";","\n","pivotField",".","setShowAll","(","false",")",";","\n","for","(","int","i","=","0",";","i","<=","lastRowIndex",";","i++",")","{","\n","items",".","addNewItem","(",")",".","setT","(","STItemType",".","DEFAULT",")",";","\n","}","\n","items",".","setCount","(","items",".","sizeOfItemArray","(",")",")",";","\n","pivotFields",".","setPivotFieldArray","(","columnIndex,","pivotField",")",";","\n\n","CTRowFields","rowFields",";","\n","if","(","pivotTableDefinition",".","getRowFields","(",")","!=","null",")","{","\n","rowFields","=","pivotTableDefinition",".","getRowFields","(",")",";","\n","}","else","{","\n","rowFields","=","pivotTableDefinition",".","addNewRowFields","(",")",";","\n","}","\n\n","rowFields",".","addNewField","(",")",".","setX","(","columnIndex",")",";","\n","rowFields",".","setCount","(","rowFields",".","sizeOfFieldArray","(",")",")",";","\n"],"docstring_tokens":["Add","a","row","label","using","data","from","the","given","column"]}
{"code_tokens":["\n","@Beta\n","public","void","addColLabel","(","int","columnIndex,","String","valueFormat",")","{","\n","checkColumnIndex","(","columnIndex",")",";","\n","\n","AreaReference","pivotArea","=","getPivotArea","(",")",";","\n","final","int","lastRowIndex","=","pivotArea",".","getLastCell","(",")",".","getRow","(",")","-","pivotArea",".","getFirstCell","(",")",".","getRow","(",")",";","\n","CTPivotFields","pivotFields","=","pivotTableDefinition",".","getPivotFields","(",")",";","\n\n","CTPivotField","pivotField","=","CTPivotField",".","Factory",".","newInstance","(",")",";","\n","CTItems","items","=","pivotField",".","addNewItems","(",")",";","\n\n","pivotField",".","setAxis","(","STAxis",".","AXIS_COL",")",";","\n","pivotField",".","setShowAll","(","false",")",";","\n","if","(","valueFormat","!=","null","&&","!valueFormat",".","trim","(",")",".","isEmpty","(",")",")","{","\n","DataFormat","df","=","parentSheet",".","getWorkbook","(",")",".","createDataFormat","(",")",";","\n","pivotField",".","setNumFmtId","(","df",".","getFormat","(","valueFormat",")",")",";","\n","}","\n","for","(","int","i","=","0",";","i","<=","lastRowIndex",";","i++",")","{","\n","items",".","addNewItem","(",")",".","setT","(","STItemType",".","DEFAULT",")",";","\n","}","\n","items",".","setCount","(","items",".","sizeOfItemArray","(",")",")",";","\n","pivotFields",".","setPivotFieldArray","(","columnIndex,","pivotField",")",";","\n\n","CTColFields","colFields",";","\n","if","(","pivotTableDefinition",".","getColFields","(",")","!=","null",")","{","\n","colFields","=","pivotTableDefinition",".","getColFields","(",")",";","\n","}","else","{","\n","colFields","=","pivotTableDefinition",".","addNewColFields","(",")",";","\n","}","\n\n","colFields",".","addNewField","(",")",".","setX","(","columnIndex",")",";","\n","colFields",".","setCount","(","colFields",".","sizeOfFieldArray","(",")",")",";","\n"],"docstring_tokens":["Add","a","col","label","using","data","from","the","given","column"]}
{"code_tokens":["\n","@Beta\n","private","void","addDataField","(","DataConsolidateFunction","function,","int","columnIndex,","String","valueFieldName,","String","valueFormat",")","{","\n","checkColumnIndex","(","columnIndex",")",";","\n","\n","CTDataFields","dataFields",";","\n","if","(","pivotTableDefinition",".","getDataFields","(",")","!=","null",")","{","\n","dataFields","=","pivotTableDefinition",".","getDataFields","(",")",";","\n","}","else","{","\n","dataFields","=","pivotTableDefinition",".","addNewDataFields","(",")",";","\n","}","\n","CTDataField","dataField","=","dataFields",".","addNewDataField","(",")",";","\n","dataField",".","setSubtotal","(","STDataConsolidateFunction",".","Enum",".","forInt","(","function",".","getValue","(",")",")",")",";","\n","dataField",".","setName","(","valueFieldName",")",";","\n","dataField",".","setFld","(","columnIndex",")",";","\n","if","(","valueFormat","!=","null","&&","!valueFormat",".","trim","(",")",".","isEmpty","(",")",")","{","\n","DataFormat","df","=","parentSheet",".","getWorkbook","(",")",".","createDataFormat","(",")",";","\n","dataField",".","setNumFmtId","(","df",".","getFormat","(","valueFormat",")",")",";","\n","}","\n","dataFields",".","setCount","(","dataFields",".","sizeOfDataFieldArray","(",")",")",";","\n"],"docstring_tokens":["Add","data","field","with","data","from","the","given","column","and","specified","function"]}
{"code_tokens":["\n","@Beta\n","public","void","addReportFilter","(","int","columnIndex",")","{","\n","checkColumnIndex","(","columnIndex",")",";","\n","\n","AreaReference","pivotArea","=","getPivotArea","(",")",";","\n","int","lastRowIndex","=","pivotArea",".","getLastCell","(",")",".","getRow","(",")","-","pivotArea",".","getFirstCell","(",")",".","getRow","(",")",";","\n","//","check","and","change","row","of","location\n","CTLocation","location","=","pivotTableDefinition",".","getLocation","(",")",";","\n","AreaReference","destination","=","new","AreaReference","(","location",".","getRef","(",")",",","SpreadsheetVersion",".","EXCEL2007",")",";","\n","if","(","destination",".","getFirstCell","(",")",".","getRow","(",")","<","2",")","{","\n","AreaReference","newDestination","=","new","AreaReference","(","new","CellReference","(","2,","destination",".","getFirstCell","(",")",".","getCol","(",")",")",",","new","CellReference","(","\n","3,","destination",".","getFirstCell","(",")",".","getCol","(",")","+1",")",",","SpreadsheetVersion",".","EXCEL2007",")",";","\n","location",".","setRef","(","newDestination",".","formatAsString","(",")",")",";","\n","}","\n\n","CTPivotFields","pivotFields","=","pivotTableDefinition",".","getPivotFields","(",")",";","\n","CTPivotField","pivotField","=","CTPivotField",".","Factory",".","newInstance","(",")",";","\n","CTItems","items","=","pivotField",".","addNewItems","(",")",";","\n\n","pivotField",".","setAxis","(","STAxis",".","AXIS_PAGE",")",";","\n","pivotField",".","setShowAll","(","false",")",";","\n","for","(","int","i","=","0",";","i","<=","lastRowIndex",";","i++",")","{","\n","items",".","addNewItem","(",")",".","setT","(","STItemType",".","DEFAULT",")",";","\n","}","\n","items",".","setCount","(","items",".","sizeOfItemArray","(",")",")",";","\n","pivotFields",".","setPivotFieldArray","(","columnIndex,","pivotField",")",";","\n\n","CTPageFields","pageFields",";","\n","if","(","pivotTableDefinition",".","getPageFields","(",")","!=","null",")","{","\n","pageFields","=","pivotTableDefinition",".","getPageFields","(",")",";","\n","//Another","filter","has","already","been","created\n","pivotTableDefinition",".","setMultipleFieldFilters","(","true",")",";","\n","}","else","{","\n","pageFields","=","pivotTableDefinition",".","addNewPageFields","(",")",";","\n","}","\n","CTPageField","pageField","=","pageFields",".","addNewPageField","(",")",";","\n","pageField",".","setHier","(","-1",")",";","\n","pageField",".","setFld","(","columnIndex",")",";","\n\n","pageFields",".","setCount","(","pageFields",".","sizeOfPageFieldArray","(",")",")",";","\n","pivotTableDefinition",".","getLocation","(",")",".","setColPageCount","(","pageFields",".","getCount","(",")",")",";","\n"],"docstring_tokens":["Add","filter","for","the","column","with","the","corresponding","index","and","cell","value"]}
{"code_tokens":["\n","public","short","getBarSpace","(",")","\n","{","\n","return","field_1_barSpace",";","\n"],"docstring_tokens":["Get","the","bar","space","field","for","the","Bar","record"]}
{"code_tokens":["\n","public","void","setBarSpace","(","short","field_1_barSpace",")","\n","{","\n","this",".","field_1_barSpace","=","field_1_barSpace",";","\n"],"docstring_tokens":["Set","the","bar","space","field","for","the","Bar","record"]}
{"code_tokens":["\n","public","short","getCategorySpace","(",")","\n","{","\n","return","field_2_categorySpace",";","\n"],"docstring_tokens":["Get","the","category","space","field","for","the","Bar","record"]}
{"code_tokens":["\n","public","void","setCategorySpace","(","short","field_2_categorySpace",")","\n","{","\n","this",".","field_2_categorySpace","=","field_2_categorySpace",";","\n"],"docstring_tokens":["Set","the","category","space","field","for","the","Bar","record"]}
{"code_tokens":["\n","public","short","getFormatFlags","(",")","\n","{","\n","return","field_3_formatFlags",";","\n"],"docstring_tokens":["Get","the","format","flags","field","for","the","Bar","record"]}
{"code_tokens":["\n","public","void","setFormatFlags","(","short","field_3_formatFlags",")","\n","{","\n","this",".","field_3_formatFlags","=","field_3_formatFlags",";","\n"],"docstring_tokens":["Set","the","format","flags","field","for","the","Bar","record"]}
{"code_tokens":["\n","public","boolean","isHorizontal","(",")","\n","{","\n","return","horizontal",".","isSet","(","field_3_formatFlags",")",";","\n"],"docstring_tokens":["true","to","display","horizontal","bar","charts,","false","for","vertical"]}
{"code_tokens":["\n","@SuppressWarnings","(","{","\"squid:S2755\"","}",")","\n","private","boolean","isValid","(","Document","xml",")","throws","SAXException","{","\n","try","{","\n","SchemaFactory","factory","=","XMLHelper",".","getSchemaFactory","(",")",";","\n\n","Source","source","=","new","DOMSource","(","map",".","getSchema","(",")",")",";","\n","Schema","schema","=","factory",".","newSchema","(","source",")",";","\n","Validator","validator","=","schema",".","newValidator","(",")",";","\n","validator",".","validate","(","new","DOMSource","(","xml",")",")",";","\n","\n","//if","no","exceptions","where","raised,","the","document","is","valid\n","return","true",";","\n","}","catch","(","IOException","e",")","{","\n","LOG",".","atError","(",")",".","withThrowable","(","e",")",".","log","(","\"document","is","not","valid\"",")",";","\n","}","\n\n","return","false",";","\n"],"docstring_tokens":["Validate","the","generated","XML","against","the","XML","Schema","associated","with","the","XSSFMap"]}
{"code_tokens":["\n","@Override\n","public","int","compare","(","String","leftXpath,","String","rightXpath",")","{","\n","Node","xmlSchema","=","map",".","getSchema","(",")",";","\n\n","String[]","leftTokens","=","leftXpath",".","split","(","\"/\"",")",";","\n","String[]","rightTokens","=","rightXpath",".","split","(","\"/\"",")",";","\n","String","samePath","=","\"\"",";","\n\n","int","minLength","=","Math",".","min","(","leftTokens",".","length,","rightTokens",".","length",")",";","\n\n","Node","localComplexTypeRootNode","=","xmlSchema",";","\n\n","for","(","int","i","=1",";","i","<minLength",";","i++",")","{","\n\n","String","leftElementName","=","leftTokens[i]",";","\n","String","rightElementName","=","rightTokens[i]",";","\n\n","if","(","leftElementName",".","equals","(","rightElementName",")",")","{","\n","samePath","+=","\"/\"","+","leftElementName",";","\n","localComplexTypeRootNode","=","getComplexTypeForElement","(","leftElementName,","xmlSchema,","localComplexTypeRootNode",")",";","\n","}","else","{","\n","return","indexOfElementInComplexType","(","samePath,","leftElementName,","rightElementName,localComplexTypeRootNode",")",";","\n","}","\n","}","\n\n","return","0",";","\n"],"docstring_tokens":["Compares","two","xpaths","to","define","an","ordering","according","to","the","XML","Schema"]}
{"code_tokens":["\n\n","public","void","setColWidth","(","int","width",")","\n","{","\n","field_1_col_width","=","width",";","\n"],"docstring_tokens":["set","the","default","column","width"]}
{"code_tokens":["\n\n","public","int","getColWidth","(",")","\n","{","\n","return","field_1_col_width",";","\n"],"docstring_tokens":["get","the","default","column","width"]}
{"code_tokens":["\n","public","String[]","getParagraphText","(",")","{","\n","String[]","ret",";","\n\n","//","Extract","using","the","model","code\n","try","{","\n","Range","r","=","doc",".","getRange","(",")",";","\n\n","ret","=","getParagraphText","(","r",")",";","\n","}","catch","(","Exception","e",")","{","\n","//","Something's","up","with","turning","the","text","pieces","into","paragraphs\n","//","Fall","back","to","ripping","out","the","text","pieces\n","ret","=","new","String[1]",";","\n","ret[0]","=","getTextFromPieces","(",")",";","\n","}","\n\n","return","ret",";","\n"],"docstring_tokens":["Get","the","text","from","the","word","file,","as","an","array","with","one","String","per","paragraph"]}
{"code_tokens":["\n","public","short","getObjectType","(",")","\n","{","\n","return","field_1_objectType",";","\n"],"docstring_tokens":["Get","the","object","type","field","for","the","CommonObjectData","record"]}
{"code_tokens":["\n","public","void","setObjectType","(","short","field_1_objectType",")","\n","{","\n","this",".","field_1_objectType","=","field_1_objectType",";","\n"],"docstring_tokens":["Set","the","object","type","field","for","the","CommonObjectData","record"]}
{"code_tokens":["\n","public","int","getObjectId","(",")","\n","{","\n","return","field_2_objectId",";","\n"],"docstring_tokens":["Get","the","object","id","field","for","the","CommonObjectData","record"]}
{"code_tokens":["\n","public","void","setObjectId","(","int","field_2_objectId",")","\n","{","\n","this",".","field_2_objectId","=","field_2_objectId",";","\n"],"docstring_tokens":["Set","the","object","id","field","for","the","CommonObjectData","record"]}
{"code_tokens":["\n","public","short","getOption","(",")","\n","{","\n","return","field_3_option",";","\n"],"docstring_tokens":["Get","the","option","field","for","the","CommonObjectData","record"]}
{"code_tokens":["\n","public","void","setOption","(","short","field_3_option",")","\n","{","\n","this",".","field_3_option","=","field_3_option",";","\n"],"docstring_tokens":["Set","the","option","field","for","the","CommonObjectData","record"]}
{"code_tokens":["\n","public","int","getReserved1","(",")","\n","{","\n","return","field_4_reserved1",";","\n"],"docstring_tokens":["Get","the","reserved1","field","for","the","CommonObjectData","record"]}
{"code_tokens":["\n","public","void","setReserved1","(","int","field_4_reserved1",")","\n","{","\n","this",".","field_4_reserved1","=","field_4_reserved1",";","\n"],"docstring_tokens":["Set","the","reserved1","field","for","the","CommonObjectData","record"]}
{"code_tokens":["\n","public","int","getReserved2","(",")","\n","{","\n","return","field_5_reserved2",";","\n"],"docstring_tokens":["Get","the","reserved2","field","for","the","CommonObjectData","record"]}
{"code_tokens":["\n","public","void","setReserved2","(","int","field_5_reserved2",")","\n","{","\n","this",".","field_5_reserved2","=","field_5_reserved2",";","\n"],"docstring_tokens":["Set","the","reserved2","field","for","the","CommonObjectData","record"]}
{"code_tokens":["\n","public","int","getReserved3","(",")","\n","{","\n","return","field_6_reserved3",";","\n"],"docstring_tokens":["Get","the","reserved3","field","for","the","CommonObjectData","record"]}
{"code_tokens":["\n","public","void","setReserved3","(","int","field_6_reserved3",")","\n","{","\n","this",".","field_6_reserved3","=","field_6_reserved3",";","\n"],"docstring_tokens":["Set","the","reserved3","field","for","the","CommonObjectData","record"]}
{"code_tokens":["\n","public","boolean","isLocked","(",")","\n","{","\n","return","locked",".","isSet","(","field_3_option",")",";","\n"],"docstring_tokens":["true","if","object","is","locked","when","sheet","has","been","protected"]}
{"code_tokens":["\n","public","boolean","isPrintable","(",")","\n","{","\n","return","printable",".","isSet","(","field_3_option",")",";","\n"],"docstring_tokens":["object","appears","when","printed"]}
{"code_tokens":["\n","public","boolean","isAutofill","(",")","\n","{","\n","return","autofill",".","isSet","(","field_3_option",")",";","\n"],"docstring_tokens":["whether","object","uses","an","automatic","fill","style"]}
{"code_tokens":["\n","public","boolean","isAutoline","(",")","\n","{","\n","return","autoline",".","isSet","(","field_3_option",")",";","\n"],"docstring_tokens":["whether","object","uses","an","automatic","line","style"]}
{"code_tokens":["\n","public","void","addBreak","(","int","main,","int","subFrom,","int","subTo",")","{","\n\n","Integer","key","=","main",";","\n","Break","region","=","_breakMap",".","get","(","key",")",";","\n","if","(","region","==","null",")","{","\n","region","=","new","Break","(","main,","subFrom,","subTo",")",";","\n","_breakMap",".","put","(","key,","region",")",";","\n","_breaks",".","add","(","region",")",";","\n","}","else","{","\n","region",".","main","=","main",";","\n","region",".","subFrom","=","subFrom",";","\n","region",".","subTo","=","subTo",";","\n","}","\n"],"docstring_tokens":["Adds","the","page","break","at","the","specified","parameters"]}
{"code_tokens":["\n","@Override\n","public","final","String","toString","(",")","{","\n","return","toString","(","true",")",";","\n"],"docstring_tokens":["Returns","the","content","type","as","a","string,","including","parameters"]}
{"code_tokens":["\n","public","void","setLevelNumberProperties","(","int","level,","CharacterProperties","chp",")","\n","{","\n","ListLevel","listLevel","=","_listData",".","getLevel","(","level",")",";","\n","int","styleIndex","=","_listData",".","getLevelStyle","(","level",")",";","\n","CharacterProperties","base","=","_styleSheet",".","getCharacterStyle","(","styleIndex",")",";","\n\n","byte[]","grpprl","=","CharacterSprmCompressor",".","compressCharacterProperty","(","chp,","base",")",";","\n","listLevel",".","setNumberProperties","(","grpprl",")",";","\n"],"docstring_tokens":["Sets","the","character","properties","of","the","list","numbers"]}
{"code_tokens":["\n","private","static","String","processFormatPattern","(","String","f",")","{","\n","String","t","=","f",".","replace","(","\"MMMMM\",","MMMMM_START_SYMBOL","+","\"MMM\"","+","MMMMM_TRUNCATE_SYMBOL",")",";","\n","t","=","t",".","replace","(","\"[H]\",","String",".","valueOf","(","H_BRACKET_SYMBOL",")",")",";","\n","t","=","t",".","replace","(","\"[HH]\",","String",".","valueOf","(","HH_BRACKET_SYMBOL",")",")",";","\n","t","=","t",".","replace","(","\"[m]\",","String",".","valueOf","(","M_BRACKET_SYMBOL",")",")",";","\n","t","=","t",".","replace","(","\"[mm]\",","String",".","valueOf","(","MM_BRACKET_SYMBOL",")",")",";","\n","t","=","t",".","replace","(","\"[s]\",","String",".","valueOf","(","S_BRACKET_SYMBOL",")",")",";","\n","t","=","t",".","replace","(","\"[ss]\",","String",".","valueOf","(","SS_BRACKET_SYMBOL",")",")",";","\n","t","=","t",".","replace","(","\"T\",","\"'T'\"",")",";","\n","t","=","t",".","replace","(","\"''T''\",","\"'T'\"",")",";","\n","t","=","t",".","replaceAll","(","\"s",".","000\",","\"s",".","SSS\"",")",";","\n","t","=","t",".","replaceAll","(","\"s",".","00\",","\"s",".","\"","+","LL_BRACKET_SYMBOL",")",";","\n","t","=","t",".","replaceAll","(","\"s",".","0\",","\"s",".","\"","+","L_BRACKET_SYMBOL",")",";","\n","return","t",";","\n"],"docstring_tokens":["Takes","a","format","String,","and","replaces","Excel","specific","bits","with","our","detection","sequences"]}
{"code_tokens":["\n","@Override\n","public","void","setSheetIndex","(","int","index",")","{","\n","int","lastSheetIx","=","_workbook",".","getNumberOfSheets","(",")","-","1",";","\n","if","(","index","<","-1","||","index",">","lastSheetIx",")","{","\n","throw","new","IllegalArgumentException","(","\"Sheet","index","(","\"","+","index","+\"",")","is","out","of","range\"","+\n","(","lastSheetIx","==","-1","?","\"\"",":","(","\"","(","0",".",".","\"","+","lastSheetIx","+","\"",")","\"",")",")",")",";","\n","}","\n\n","if","(","index","==","-1",")","{","\n","if","(","_ctName",".","isSetLocalSheetId","(",")",")","_ctName",".","unsetLocalSheetId","(",")",";","\n","}","else","{","\n","_ctName",".","setLocalSheetId","(","index",")",";","\n","}","\n"],"docstring_tokens":["Tell","Excel","that","this","name","applies","to","the","worksheet","with","the","specified","index","instead","of","the","entire","workbook"]}
{"code_tokens":["\n","@Override\n","public","int","getSheetIndex","(",")","{","\n","return","_ctName",".","isSetLocalSheetId","(",")","?","(","int",")","_ctName",".","getLocalSheetId","(",")",":","-1",";","\n"],"docstring_tokens":["Returns","the","sheet","index","this","name","applies","to"]}
{"code_tokens":["\n","public","int","getCharCount","(",")","{","\n","if","(","field_1_charCount","<","0",")","{","\n","return","field_1_charCount","+","65536",";","\n","}","\n","return","field_1_charCount",";","\n"],"docstring_tokens":["get","the","number","of","characters","in","the","string,","as","an","un-wrapped","int"]}
{"code_tokens":["\n\n","public","void","setCharCount","(","short","cc",")","\n","{","\n","field_1_charCount","=","cc",";","\n"],"docstring_tokens":["set","the","number","of","characters","in","the","string"]}
{"code_tokens":["\n\n","public","byte","getOptionFlags","(",")","\n","{","\n","return","field_2_optionflags",";","\n"],"docstring_tokens":["get","the","option","flags","which","among","other","things","return","if","this","is","a","16-bit","or","8","bit","string"]}
{"code_tokens":["\n\n","public","void","setOptionFlags","(","byte","of",")","\n","{","\n","field_2_optionflags","=","of",";","\n"],"docstring_tokens":["set","the","option","flags","which","among","other","things","return","if","this","is","a","16-bit","or","8","bit","string"]}
{"code_tokens":["\n","public","void","addFormatRun","(","FormatRun","r",")","{","\n","if","(","field_4_format_runs","==","null",")","{","\n","field_4_format_runs","=","new","ArrayList<>","(",")",";","\n","}","\n\n","int","index","=","findFormatRunAt","(","r",".","_character",")",";","\n","if","(","index","!=","-1",")","{","\n","field_4_format_runs",".","remove","(","index",")",";","\n","}","\n\n","field_4_format_runs",".","add","(","r",")",";","\n","//Need","to","sort","the","font","runs","to","ensure","that","the","font","runs","appear","in\n","//character","order\n","Collections",".","sort","(","field_4_format_runs",")",";","\n\n","//Make","sure","that","we","now","say","that","we","are","a","rich","string\n","field_2_optionflags","=","richText",".","setByte","(","field_2_optionflags",")",";","\n"],"docstring_tokens":["Adds","a","font","run","to","the","formatted","string"]}
{"code_tokens":["\n","public","void","serialize","(","ContinuableRecordOutput","out",")","{","\n","int","numberOfRichTextRuns","=","0",";","\n","int","extendedDataSize","=","0",";","\n","if","(","isRichText","(",")","&&","field_4_format_runs","!=","null",")","{","\n","numberOfRichTextRuns","=","field_4_format_runs",".","size","(",")",";","\n","}","\n","if","(","isExtendedText","(",")","&&","field_5_ext_rst","!=","null",")","{","\n","extendedDataSize","=","4","+","field_5_ext_rst",".","getDataSize","(",")",";","\n","}","\n\n","//","Serialise","the","bulk","of","the","String\n","//","The","writeString","handles","tricky","continue","stuff","for","us\n","out",".","writeString","(","field_3_string,","numberOfRichTextRuns,","extendedDataSize",")",";","\n\n","if","(","numberOfRichTextRuns",">","0",")","{","\n\n","//This","will","ensure","that","a","run","does","not","split","a","continue\n","for","(","int","i=0",";","i<numberOfRichTextRuns",";","i++",")","{","\n","if","(","out",".","getAvailableSpace","(",")","<","4",")","{","\n","out",".","writeContinue","(",")",";","\n","}","\n","FormatRun","r","=","field_4_format_runs",".","get","(","i",")",";","\n","r",".","serialize","(","out",")",";","\n","}","\n","}","\n\n","if","(","extendedDataSize",">","0","&&","field_5_ext_rst","!=","null",")","{","\n","field_5_ext_rst",".","serialize","(","out",")",";","\n","}","\n"],"docstring_tokens":["Serialises","out","the","String"]}
{"code_tokens":["\n","public","void","debug","(",")","{","\n","System",".","err",".","println","(","\"Trailer","is","at","\"","+","trailerPointer",".","getOffset","(",")",")",";","\n","System",".","err",".","println","(","\"Trailer","has","type","\"","+","trailerPointer",".","getType","(",")",")",";","\n","System",".","err",".","println","(","\"Trailer","has","length","\"","+","trailerPointer",".","getLength","(",")",")",";","\n","System",".","err",".","println","(","\"Trailer","has","format","\"","+","trailerPointer",".","getFormat","(",")",")",";","\n\n","for","(","int","i=0",";","i<trailer",".","getPointedToStreams","(",")",".","length",";","i++",")","{","\n","Stream","stream","=","trailer",".","getPointedToStreams","(",")","[i]",";","\n","Pointer","ptr","=","stream",".","getPointer","(",")",";","\n\n","System",".","err",".","println","(","\"Looking","at","pointer","\"","+","i",")",";","\n","System",".","err",".","println","(","\"\\tType","is","\"","+","ptr",".","getType","(",")","+","\"\\t\\t\"","+","Integer",".","toHexString","(","ptr",".","getType","(",")",")",")",";","\n","System",".","err",".","println","(","\"\\tOffset","is","\"","+","ptr",".","getOffset","(",")","+","\"\\t\\t\"","+","Long",".","toHexString","(","ptr",".","getOffset","(",")",")",")",";","\n","System",".","err",".","println","(","\"\\tAddress","is","\"","+","ptr",".","getAddress","(",")","+","\"\\t\"","+","Long",".","toHexString","(","ptr",".","getAddress","(",")",")",")",";","\n","System",".","err",".","println","(","\"\\tLength","is","\"","+","ptr",".","getLength","(",")","+","\"\\t\\t\"","+","Long",".","toHexString","(","ptr",".","getLength","(",")",")",")",";","\n","System",".","err",".","println","(","\"\\tFormat","is","\"","+","ptr",".","getFormat","(",")","+","\"\\t\\t\"","+","Long",".","toHexString","(","ptr",".","getFormat","(",")",")",")",";","\n","System",".","err",".","println","(","\"\\tCompressed","is","\"","+","ptr",".","destinationCompressed","(",")",")",";","\n","System",".","err",".","println","(","\"\\tStream","is","\"","+","stream",".","getClass","(",")",")",";","\n\n","if","(","stream","instanceof","PointerContainingStream",")","{","\n","PointerContainingStream","pcs","=","(","PointerContainingStream",")","stream",";","\n\n","if","(","pcs",".","getPointedToStreams","(",")","!=","null","&&","pcs",".","getPointedToStreams","(",")",".","length",">","0",")","{","\n","System",".","err",".","println","(","\"\\tContains","\"","+","pcs",".","getPointedToStreams","(",")",".","length","+","\"","other","pointers/streams\"",")",";","\n","for","(","int","j=0",";","j<pcs",".","getPointedToStreams","(",")",".","length",";","j++",")","{","\n","Stream","ss","=","pcs",".","getPointedToStreams","(",")","[j]",";","\n","Pointer","sptr","=","ss",".","getPointer","(",")",";","\n","System",".","err",".","println","(","\"\\t\\t\"","+","j","+","\"","-","Type","is","\"","+","sptr",".","getType","(",")","+","\"\\t\\t\"","+","Integer",".","toHexString","(","sptr",".","getType","(",")",")",")",";","\n","System",".","err",".","println","(","\"\\t\\t\"","+","j","+","\"","-","Length","is","\"","+","sptr",".","getLength","(",")","+","\"\\t\\t\"","+","Long",".","toHexString","(","sptr",".","getLength","(",")",")",")",";","\n","}","\n","}","\n","}","\n\n","if","(","stream","instanceof","StringsStream",")","{","\n","System",".","err",".","println","(","\"\\t\\t**strings**\"",")",";","\n","StringsStream","ss","=","(","StringsStream",")","stream",";","\n","System",".","err",".","println","(","\"\\t\\t\"","+","ss",".","_getContentsLength","(",")",")",";","\n","}","\n","}","\n"],"docstring_tokens":["Prints","out","some","simple","debug","on","the","base","contents","of","the","file"]}
{"code_tokens":["\n","private","int","findChildLocation","(","Record","child",")","{","\n","int","i=0",";","\n","for","(","org",".","apache",".","poi",".","hslf",".","record",".","Record","r",":","_children",")","{","\n","if","(","r",".","equals","(","child",")",")","{","\n","return","i",";","\n","}","\n","i++",";","\n","}","\n","return","-1",";","\n"],"docstring_tokens":["Finds","the","location","of","the","given","child","record"]}
{"code_tokens":["\n","private","int","appendChild","(","Record","newChild",")","{","\n","//","Copy","over,","and","pop","the","child","in","at","the","end\n","Record[]","nc","=","Arrays",".","copyOf","(","_children,","_children",".","length+1,","org",".","apache",".","poi",".","hslf",".","record",".","Record[]",".","class",")",";","\n","//","Switch","the","arrays\n","nc[_children",".","length]","=","newChild",";","\n","_children","=","nc",";","\n","return","_children",".","length",";","\n"],"docstring_tokens":["Adds","a","child","record,","at","the","very","end"]}
{"code_tokens":["\n","private","void","addChildAt","(","Record","newChild,","int","position",")","{","\n","//","Firstly,","have","the","child","added","in","at","the","end\n","appendChild","(","newChild",")",";","\n\n","//","Now,","have","them","moved","to","the","right","place\n","moveChildRecords","(","(","_children",".","length-1",")",",","position,","1",")",";","\n"],"docstring_tokens":["Adds","the","given","new","Child","Record","at","the","given","location,","shuffling","everything","from","there","on","down","by","one"]}
{"code_tokens":["\n","public","org",".","apache",".","poi",".","hslf",".","record",".","Record","findFirstOfType","(","long","type",")","{","\n","for","(","org",".","apache",".","poi",".","hslf",".","record",".","Record","r",":","_children",")","{","\n","if","(","r",".","getRecordType","(",")","==","type",")","{","\n","return","r",";","\n","}","\n","}","\n","return","null",";","\n"],"docstring_tokens":["Finds","the","first","child","record","of","the","given","type,","or","null","if","none","of","the","child","records","are","of","the","given","type"]}
{"code_tokens":["\n","public","org",".","apache",".","poi",".","hslf",".","record",".","Record","removeChild","(","Record","ch",")","{","\n","org",".","apache",".","poi",".","hslf",".","record",".","Record","rm","=","null",";","\n","ArrayList<org",".","apache",".","poi",".","hslf",".","record",".","Record>","lst","=","new","ArrayList<>","(",")",";","\n","for","(","org",".","apache",".","poi",".","hslf",".","record",".","Record","r",":","_children",")","{","\n","if","(","r","!=","ch",")","{","\n","lst",".","add","(","r",")",";","\n","}","else","{","\n","rm","=","r",";","\n","}","\n","}","\n","_children","=","lst",".","toArray","(","new","org",".","apache",".","poi",".","hslf",".","record",".","Record[0]",")",";","\n","return","rm",";","\n"],"docstring_tokens":["Remove","a","child","record","from","this","record","container"]}
{"code_tokens":["\n","public","int","addChildAfter","(","Record","newChild,","Record","after",")","{","\n","//","Decide","where","we're","going","to","put","it\n","int","loc","=","findChildLocation","(","after",")",";","\n","if","(","loc","==","-1",")","{","\n","throw","new","IllegalArgumentException","(","\"Asked","to","add","a","new","child","after","another","record,","but","that","record","wasn't","one","of","our","children!\"",")",";","\n","}","\n\n","//","Add","one","place","after","the","supplied","record\n","addChildAt","(","newChild,","loc+1",")",";","\n","return","loc+1",";","\n"],"docstring_tokens":["Adds","the","given","Child","Record","after","the","supplied","record"]}
{"code_tokens":["\n","public","int","addChildBefore","(","Record","newChild,","Record","before",")","{","\n","//","Decide","where","we're","going","to","put","it\n","int","loc","=","findChildLocation","(","before",")",";","\n","if","(","loc","==","-1",")","{","\n","throw","new","IllegalArgumentException","(","\"Asked","to","add","a","new","child","before","another","record,","but","that","record","wasn't","one","of","our","children!\"",")",";","\n","}","\n\n","//","Add","at","the","place","of","the","supplied","record\n","addChildAt","(","newChild,","loc",")",";","\n","return","loc",";","\n"],"docstring_tokens":["Adds","the","given","Child","Record","before","the","supplied","record"]}
{"code_tokens":["\n","public","static","void","handleParentAwareRecords","(","RecordContainer","br",")","{","\n","//","Loop","over","child","records,","looking","for","interesting","ones\n","for","(","org",".","apache",".","poi",".","hslf",".","record",".","Record","record",":","br",".","getChildRecords","(",")",")","{","\n","//","Tell","parent","aware","records","of","their","parent\n","if","(","record","instanceof","ParentAwareRecord",")","{","\n","(","(","ParentAwareRecord",")","record",")",".","setParentRecord","(","br",")",";","\n","}","\n","//","Walk","on","down","for","the","case","of","container","records\n","if","(","record","instanceof","RecordContainer",")","{","\n","handleParentAwareRecords","(","(","RecordContainer",")","record",")",";","\n","}","\n","}","\n"],"docstring_tokens":["Find","the","records","that","are","parent-aware,","and","tell","them","who","their","parent","is"]}
{"code_tokens":["\n","@Beta\n","protected","void","createCacheFields","(","Sheet","sheet",")","{","\n","//Get","values","for","start","row,","start","and","end","column\n","AreaReference","ar","=","getPivotArea","(","sheet",".","getWorkbook","(",")",")",";","\n","CellReference","firstCell","=","ar",".","getFirstCell","(",")",";","\n","CellReference","lastCell","=","ar",".","getLastCell","(",")",";","\n","int","columnStart","=","firstCell",".","getCol","(",")",";","\n","int","columnEnd","=","lastCell",".","getCol","(",")",";","\n","Row","row","=","sheet",".","getRow","(","firstCell",".","getRow","(",")",")",";","\n","CTCacheFields","cFields",";","\n","if","(","ctPivotCacheDefinition",".","getCacheFields","(",")","!=","null",")","{","\n","cFields","=","ctPivotCacheDefinition",".","getCacheFields","(",")",";","\n","}","else","{","\n","cFields","=","ctPivotCacheDefinition",".","addNewCacheFields","(",")",";","\n","}","\n","//For","each","column,","create","a","cache","field","and","give","it","en","empty","sharedItems\n","for","(","int","i=columnStart",";","i<=columnEnd",";","i++",")","{","\n","CTCacheField","cf","=","cFields",".","addNewCacheField","(",")",";","\n","if","(","i==columnEnd",")","{","\n","cFields",".","setCount","(","cFields",".","sizeOfCacheFieldArray","(",")",")",";","\n","}","\n","//General","number","format\n","cf",".","setNumFmtId","(","0",")",";","\n","cf",".","setName","(","row",".","getCell","(","i",")",".","getStringCellValue","(",")",")",";","\n","cf",".","addNewSharedItems","(",")",";","\n","}","\n"],"docstring_tokens":["Generates","a","cache","field","for","each","column","in","the","reference","area","for","the","pivot","table"]}
{"code_tokens":["\n","public","static","FontDetails","create","(","String","fontName,","Properties","fontMetricsProps",")","\n","{","\n","String","heightStr","=","fontMetricsProps",".","getProperty","(","buildFontHeightProperty","(","fontName",")",")",";","\n","String","widthsStr","=","fontMetricsProps",".","getProperty","(","buildFontWidthsProperty","(","fontName",")",")",";","\n","String","charactersStr","=","fontMetricsProps",".","getProperty","(","buildFontCharactersProperty","(","fontName",")",")",";","\n\n","//","Ensure","that","this","is","a","font","we","know","about\n","if","(","heightStr","==","null","||","widthsStr","==","null","||","charactersStr","==","null",")","{","\n","//","We","don't","know","all","we","need","to","about","this","font\n","//","Since","we","don't","know","its","sizes,","we","can't","work","with","it\n","throw","new","IllegalArgumentException","(","\"The","supplied","FontMetrics","doesn't","know","about","the","font","'\"","+","fontName","+","\"',","so","we","can't","use","it",".","Please","add","it","to","your","font","metrics","file","(","see","StaticFontMetrics",".","getFontDetails\"",")",";","\n","}","\n\n","int","height","=","Integer",".","parseInt","(","heightStr",")",";","\n","FontDetails","d","=","new","FontDetails","(","fontName,","height",")",";","\n","String[]","charactersStrArray","=","split","(","charactersStr,","\",\",","-1",")",";","\n","String[]","widthsStrArray","=","split","(","widthsStr,","\",\",","-1",")",";","\n","if","(","charactersStrArray",".","length","!=","widthsStrArray",".","length",")","\n","throw","new","RuntimeException","(","\"Number","of","characters","does","not","number","of","widths","for","font","\"","+","fontName",")",";","\n","for","(","int","i","=","0",";","i","<","widthsStrArray",".","length",";","i++",")","\n","{","\n","if","(","charactersStrArray[i]",".","length","(",")","!=","0",")","\n","d",".","addChar","(","charactersStrArray[i]",".","charAt","(","0",")",",","Integer",".","parseInt","(","widthsStrArray[i]",")",")",";","\n","}","\n","return","d",";","\n"],"docstring_tokens":["Create","an","instance","of","FontDetails","by","loading","them","from","the","provided","property","object"]}
{"code_tokens":["\n","public","static","Workbook","create","(","boolean","xssf",")","throws","IOException","{","\n","return","wp","(","xssf","?","FileMagic",".","OOXML",":","FileMagic",".","OLE2,","WorkbookProvider::create",")",";","\n"],"docstring_tokens":["Create","a","new","empty","Workbook,","either","XSSF","or","HSSF","depending","on","the","parameter"]}
{"code_tokens":["\n","@Override\n","public","int","getSignature","(",")","{","\n","return","(","getUIDInstanceCount","(",")","==","1","?","0x3D40",":","0x3D50",")",";","\n"],"docstring_tokens":["EMF","signature","is","0x3D40","or","0x3D50"]}
{"code_tokens":["\n","@Override\n","public","void","setSignature","(","int","signature",")","{","\n","switch","(","signature",")","{","\n","case","0x3D40:\n","setUIDInstanceCount","(","1",")",";","\n","break",";","\n","case","0x3D50:\n","setUIDInstanceCount","(","2",")",";","\n","break",";","\n","default:\n","throw","new","IllegalArgumentException","(","signature+\"","is","not","a","valid","instance/signature","value","for","EMF\"",")",";","\n","}","\n"],"docstring_tokens":["Sets","the","EMF","signature","-","either","0x3D40","or","0x3D50"]}
{"code_tokens":["\n","protected","static","String","parseAs7BitData","(","byte[]","data",")","{","\n","return","parseAs7BitData","(","data,","DEFAULT_ENCODING",")",";","\n"],"docstring_tokens":["Parses","as","non-unicode,","supposedly","7","bit","CP1252","data","and","returns","the","string","that","that","yields"]}
{"code_tokens":["\n","protected","static","String","parseAs7BitData","(","byte[]","data,","String","encoding",")","{","\n","//","Handle","any","encoding","aliases,","where","outlook","describes","it","differently\n","if","(","\"ansi\"",".","equals","(","encoding",")",")","{","\n","encoding","=","DEFAULT_ENCODING",";","\n","}","\n\n","//","Decode\n","return","new","String","(","data,","Charset",".","forName","(","encoding",")",")",";","\n"],"docstring_tokens":["Parses","as","non-unicode,","supposedly","7","bit","data","and","returns","the","string","that","that","yields"]}
{"code_tokens":["\n","private","void","searchForPictures","(","List<EscherRecord>","escherRecords,","List<Picture>","pictures",")","{","\n","for","(","EscherRecord","escherRecord",":","escherRecords",")","{","\n","if","(","escherRecord","instanceof","EscherBSERecord",")","{","\n","EscherBSERecord","bse","=","(","EscherBSERecord",")","escherRecord",";","\n","EscherBlipRecord","blip","=","bse",".","getBlipRecord","(",")",";","\n","if","(","blip","!=","null",")","{","\n","pictures",".","add","(","new","Picture","(","blip",")",")",";","\n","}","else","if","(","bse",".","getOffset","(",")",">","0",")","{","\n","try","{","\n","//","Blip","stored","in","delay","stream,","which","in","a","word","doc,","is\n","//","the","main","stream\n","EscherRecordFactory","recordFactory","=","new","DefaultEscherRecordFactory","(",")",";","\n","EscherRecord","record","=","recordFactory",".","createRecord","(","\n","_mainStream,","bse",".","getOffset","(",")",")",";","\n\n","if","(","record","instanceof","EscherBlipRecord",")","{","\n","record",".","fillFields","(","_mainStream,","bse",".","getOffset","(",")",",\n","recordFactory",")",";","\n","blip","=","(","EscherBlipRecord",")","record",";","\n","pictures",".","add","(","new","Picture","(","blip",")",")",";","\n","}","\n","}","catch","(","Exception","exc",")","{","\n","LOG",".","atWarn","(",")",".","withThrowable","(","exc",")",".","log","(","\"Unable","to","load","picture","from","BLIP","record","at","offset","#","{","}","\",","box","(","bse",".","getOffset","(",")",")",")",";","\n","}","\n","}","\n","}","\n","}","\n"],"docstring_tokens":["Performs","a","search","for","pictures","in","the","given","list","of","escher","records"]}
{"code_tokens":["\n","public","String","text","(",")","{","\n","return","_text",".","substring","(","_start,","_end",")",";","\n"],"docstring_tokens":["Gets","the","text","that","this","Range","contains"]}
{"code_tokens":["\n","public","int","numSections","(",")","{","\n","initSections","(",")",";","\n","return","_sectionEnd","-","_sectionStart",";","\n"],"docstring_tokens":["Used","to","get","the","number","of","sections","in","a","range"]}
{"code_tokens":["\n\n","public","int","numParagraphs","(",")","{","\n","initParagraphs","(",")",";","\n","return","_parEnd","-","_parStart",";","\n"],"docstring_tokens":["Used","to","get","the","number","of","paragraphs","in","a","range"]}
{"code_tokens":["\n","public","CharacterRun","insertBefore","(","String","text",")","\n","{","\n","initAll","(",")",";","\n\n","_text",".","insert","(","_start,","text",")",";","\n","_doc",".","getCharacterTable","(",")",".","adjustForInsert","(","_charStart,","text",".","length","(",")",")",";","\n","_doc",".","getParagraphTable","(",")",".","adjustForInsert","(","_parStart,","text",".","length","(",")",")",";","\n","_doc",".","getSectionTable","(",")",".","adjustForInsert","(","_sectionStart,","text",".","length","(",")",")",";","\n","if","(","_doc","instanceof","HWPFDocument",")","\n","{","\n","(","(","BookmarksImpl",")","(","(","HWPFDocument",")","_doc",")",".","getBookmarks","(",")",")","\n",".","afterInsert","(","_start,","text",".","length","(",")",")",";","\n","}","\n","adjustForInsert","(","text",".","length","(",")",")",";","\n\n","//","update","the","FIB",".","CCPText","+","friends","fields\n","adjustFIB","(","text",".","length","(",")",")",";","\n\n","sanityCheck","(",")",";","\n\n","return","getCharacterRun","(","0",")",";","\n"],"docstring_tokens":["Inserts","text","into","the","front","of","this","range"]}
{"code_tokens":["\n","public","CharacterRun","insertAfter","(","String","text",")","\n","{","\n","initAll","(",")",";","\n\n","_text",".","insert","(","_end,","text",")",";","\n\n","_doc",".","getCharacterTable","(",")",".","adjustForInsert","(","_charEnd","-","1,","text",".","length","(",")",")",";","\n","_doc",".","getParagraphTable","(",")",".","adjustForInsert","(","_parEnd","-","1,","text",".","length","(",")",")",";","\n","_doc",".","getSectionTable","(",")",".","adjustForInsert","(","_sectionEnd","-","1,","text",".","length","(",")",")",";","\n","if","(","_doc","instanceof","HWPFDocument",")","\n","{","\n","(","(","BookmarksImpl",")","(","(","HWPFDocument",")","_doc",")",".","getBookmarks","(",")",")","\n",".","afterInsert","(","_end,","text",".","length","(",")",")",";","\n","}","\n","adjustForInsert","(","text",".","length","(",")",")",";","\n\n","sanityCheck","(",")",";","\n","return","getCharacterRun","(","numCharacterRuns","(",")","-","1",")",";","\n"],"docstring_tokens":["Inserts","text","onto","the","end","of","this","range"]}
{"code_tokens":["\n","@Deprecated\n","private","CharacterRun","insertBefore","(","String","text,","CharacterProperties","props",")","\n","{","\n","initAll","(",")",";","\n","PAPX","papx","=","_paragraphs",".","get","(","_parStart",")",";","\n","short","istd","=","papx",".","getIstd","(",")",";","\n\n","StyleSheet","ss","=","_doc",".","getStyleSheet","(",")",";","\n","CharacterProperties","baseStyle","=","ss",".","getCharacterStyle","(","istd",")",";","\n","byte[]","grpprl","=","CharacterSprmCompressor",".","compressCharacterProperty","(","props,","baseStyle",")",";","\n","SprmBuffer","buf","=","new","SprmBuffer","(","grpprl,","0",")",";","\n","_doc",".","getCharacterTable","(",")",".","insert","(","_charStart,","_start,","buf",")",";","\n\n","return","insertBefore","(","text",")",";","\n"],"docstring_tokens":["Inserts","text","into","the","front","of","this","range","and","it","gives","that","text","the","CharacterProperties","specified","in","props"]}
{"code_tokens":["\n","@Deprecated\n","private","CharacterRun","insertAfter","(","String","text,","CharacterProperties","props",")","\n","{","\n","initAll","(",")",";","\n","PAPX","papx","=","_paragraphs",".","get","(","_parEnd","-","1",")",";","\n","short","istd","=","papx",".","getIstd","(",")",";","\n\n","StyleSheet","ss","=","_doc",".","getStyleSheet","(",")",";","\n","CharacterProperties","baseStyle","=","ss",".","getCharacterStyle","(","istd",")",";","\n","byte[]","grpprl","=","CharacterSprmCompressor",".","compressCharacterProperty","(","props,","baseStyle",")",";","\n","SprmBuffer","buf","=","new","SprmBuffer","(","grpprl,","0",")",";","\n","_doc",".","getCharacterTable","(",")",".","insert","(","_charEnd,","_end,","buf",")",";","\n","_charEnd++",";","\n","return","insertAfter","(","text",")",";","\n"],"docstring_tokens":["Inserts","text","onto","the","end","of","this","range","and","gives","that","text","the","CharacterProperties","specified","in","props"]}
{"code_tokens":["\n","@Deprecated\n","private","Paragraph","insertBefore","(","ParagraphProperties","props,","int","styleIndex",")","\n","{","\n","return","this",".","insertBefore","(","props,","styleIndex,","\"\\r\"",")",";","\n"],"docstring_tokens":["Inserts","and","empty","paragraph","into","the","front","of","this","range"]}
{"code_tokens":["\n","@Deprecated\n","Paragraph","insertAfter","(","ParagraphProperties","props,","int","styleIndex",")","\n","{","\n","return","this",".","insertAfter","(","props,","styleIndex,","\"\\r\"",")",";","\n"],"docstring_tokens":["Inserts","and","empty","paragraph","into","the","end","of","this","range"]}
{"code_tokens":["\n","public","Table","insertTableBefore","(","short","columns,","int","rows",")","{","\n","ParagraphProperties","parProps","=","new","ParagraphProperties","(",")",";","\n","parProps",".","setFInTable","(","true",")",";","\n","parProps",".","setItap","(","1",")",";","\n\n","final","int","oldEnd","=","this",".","_end",";","\n\n","for","(","int","x","=","0",";","x","<","rows",";","x++",")","\n","{","\n","Paragraph","cell","=","this",".","insertBefore","(","parProps,","StyleSheet",".","NIL_STYLE",")",";","\n","cell",".","insertAfter","(","String",".","valueOf","(","'\\u0007'",")",")",";","\n","for","(","int","y","=","1",";","y","<","columns",";","y++",")","\n","{","\n","cell","=","cell",".","insertAfter","(","parProps,","StyleSheet",".","NIL_STYLE",")",";","\n","cell",".","insertAfter","(","String",".","valueOf","(","'\\u0007'",")",")",";","\n","}","\n","cell","=","cell",".","insertAfter","(","parProps,","StyleSheet",".","NIL_STYLE,\n","String",".","valueOf","(","'\\u0007'",")",")",";","\n","cell",".","setTableRowEnd","(","new","TableProperties","(","columns",")",")",";","\n","}","\n\n","final","int","newEnd","=","this",".","_end",";","\n","final","int","diff","=","newEnd","-","oldEnd",";","\n\n","return","new","Table","(","_start,","_start","+","diff,","this,","1",")",";","\n"],"docstring_tokens":["Inserts","a","simple","table","into","the","beginning","of","this","range"]}
{"code_tokens":["\n","public","void","replaceText","(","String","newText,","boolean","addAfter",")","\n","{","\n","if","(","addAfter",")","\n","{","\n","int","originalEnd","=","getEndOffset","(",")",";","\n","insertAfter","(","newText",")",";","\n","new","Range","(","getStartOffset","(",")",",","originalEnd,","this",")",".","delete","(",")",";","\n","}","\n","else\n","{","\n","int","originalStart","=","getStartOffset","(",")",";","\n","int","originalEnd","=","getEndOffset","(",")",";","\n\n","insertBefore","(","newText",")",";","\n","new","Range","(","originalStart","+","newText",".","length","(",")",",","originalEnd\n","+","newText",".","length","(",")",",","this",")",".","delete","(",")",";","\n","}","\n"],"docstring_tokens":["Replace","range","text","with","new","one,","adding","it","to","the","range","and","deleting","original","text","from","document"]}
{"code_tokens":["\n","private","void","adjustForInsert","(","int","length",")","{","\n","_end","+=","length",";","\n\n","reset","(",")",";","\n","Range","parent","=","_parent",";","\n","if","(","parent","!=","null",")","{","\n","parent",".","adjustForInsert","(","length",")",";","\n","}","\n"],"docstring_tokens":["adjust","this","range","after","an","insert","happens"]}
{"code_tokens":["\n","private","void","outputCompressed","(",")","throws","IOException","{","\n","//","It's","not","worth","compressing","only","1","or","two","bytes,","due","to","the","overheads\n","//","So","if","asked,","just","output","uncompressed\n","if","(","rawCodeLen","<","3",")","{","\n","final","int","rcl","=","rawCodeLen",";","\n","for","(","int","i","=","0",";","i","<","rcl",";","i++",")","{","\n","outputUncompressed","(","rawCode[i]",")",";","\n","}","\n","return",";","\n","}","\n\n","//","Grab","where","the","data","lives\n","int","codesAt","=","findRawCodeInBuffer","(",")",";","\n","codesAt","=","(","codesAt-18",")","&","DICT_MASK",";","\n\n","//","Increment","the","mask","bit","count,","we've","done","another","code\n","maskBitsSet++",";","\n\n","//","Add","the","length+code","to","the","buffer\n","//","(","The","position","is","the","first","12","bits,","the","length","is","the","last","4","bits",")","\n","int","bp1","=","(","codesAt","&","0xFF",")",";","\n","int","bp2","=","(","rawCodeLen","-","3",")","+","(","(","codesAt","-","bp1",")",">>>","4",")",";","\n","buffer[bufferLen++]","=","(","byte",")","bp1",";","\n","buffer[bufferLen++]","=","(","byte",")","bp2",";","\n\n","assert","(","maskBitsSet","<=","8",")",";","\n\n","//","If","we're","now","at","8","codes,","output\n","if","(","maskBitsSet","==","8",")","{","\n","output8Codes","(",")",";","\n","}","\n\n","rawCodeLen","=","0",";","\n"],"docstring_tokens":["Output","the","compressed","representation","for","the","bytes","found","in","rawCode"]}
{"code_tokens":["\n","public","void","construct","(","CellValueRecordInterface","rec,","RecordStream","rs,","SharedValueManager","sfh",")","{","\n","if","(","rec","instanceof","FormulaRecord",")","{","\n","FormulaRecord","formulaRec","=","(","FormulaRecord",")","rec",";","\n","//","read","optional","cached","text","value\n","StringRecord","cachedText",";","\n","Class<?","extends","Record>","nextClass","=","rs",".","peekNextClass","(",")",";","\n","if","(","nextClass","==","StringRecord",".","class",")","{","\n","cachedText","=","(","StringRecord",")","rs",".","getNext","(",")",";","\n","}","else","{","\n","cachedText","=","null",";","\n","}","\n","insertCell","(","new","FormulaRecordAggregate","(","formulaRec,","cachedText,","sfh",")",")",";","\n","}","else","{","\n","insertCell","(","rec",")",";","\n","}","\n"],"docstring_tokens":["Processes","a","single","cell","value","record"]}
{"code_tokens":["\n","public","int","getRowCellBlockSize","(","int","startRow,","int","endRow",")","{","\n","int","result","=","0",";","\n","for","(","int","rowIx=startRow",";","rowIx<=endRow","&&","rowIx<records",".","length",";","rowIx++",")","{","\n","result","+=","getRowSerializedSize","(","records[rowIx]",")",";","\n","}","\n","return","result",";","\n"],"docstring_tokens":["Tallies","a","count","of","the","size","of","the","cell","records","that","are","attached","to","the","rows","in","the","range","specified"]}
{"code_tokens":["\n","@Override\n","public","boolean","marshall","(","PackagePart","part,","OutputStream","out",")","\n","throws","OpenXML4JException","{","\n","if","(","!","(","part","instanceof","PackagePropertiesPart",")",")","\n","throw","new","IllegalArgumentException","(","\n","\"'part'","must","be","a","PackagePropertiesPart","instance",".","\"",")",";","\n","propsPart","=","(","PackagePropertiesPart",")","part",";","\n\n","//","Configure","the","document\n","xmlDoc","=","DocumentHelper",".","createDocument","(",")",";","\n","Element","rootElem","=","xmlDoc",".","createElementNS","(","namespaceCoreProperties",".","getNamespaceURI","(",")",",\n","getQName","(","\"coreProperties\",","namespaceCoreProperties",")",")",";","\n","DocumentHelper",".","addNamespaceDeclaration","(","rootElem,\n","namespaceCoreProperties",".","getPrefix","(",")",",","namespaceCoreProperties",".","getNamespaceURI","(",")",")",";","\n","DocumentHelper",".","addNamespaceDeclaration","(","rootElem,\n","namespaceDC",".","getPrefix","(",")",",","namespaceDC",".","getNamespaceURI","(",")",")",";","\n","DocumentHelper",".","addNamespaceDeclaration","(","rootElem,\n","namespaceDcTerms",".","getPrefix","(",")",",","namespaceDcTerms",".","getNamespaceURI","(",")",")",";","\n","DocumentHelper",".","addNamespaceDeclaration","(","rootElem,\n","namespaceXSI",".","getPrefix","(",")",",","namespaceXSI",".","getNamespaceURI","(",")",")",";","\n","xmlDoc",".","appendChild","(","rootElem",")",";","\n\n","addCategory","(",")",";","\n","addContentStatus","(",")",";","\n","addContentType","(",")",";","\n","addCreated","(",")",";","\n","addCreator","(",")",";","\n","addDescription","(",")",";","\n","addIdentifier","(",")",";","\n","addKeywords","(",")",";","\n","addLanguage","(",")",";","\n","addLastModifiedBy","(",")",";","\n","addLastPrinted","(",")",";","\n","addModified","(",")",";","\n","addRevision","(",")",";","\n","addSubject","(",")",";","\n","addTitle","(",")",";","\n","addVersion","(",")",";","\n","return","true",";","\n"],"docstring_tokens":["Marshall","package","core","properties","to","an","XML","document"]}
{"code_tokens":["\n","private","void","addCategory","(",")","{","\n","setElementTextContent","(","KEYWORD_CATEGORY,","namespaceCoreProperties,","propsPart",".","getCategoryProperty","(",")",")",";","\n"],"docstring_tokens":["Add","category","property","element","if","needed"]}
{"code_tokens":["\n","private","void","addContentStatus","(",")","{","\n","setElementTextContent","(","KEYWORD_CONTENT_STATUS,","namespaceCoreProperties,","propsPart",".","getContentStatusProperty","(",")",")",";","\n"],"docstring_tokens":["Add","content","status","property","element","if","needed"]}
{"code_tokens":["\n","private","void","addContentType","(",")","{","\n","setElementTextContent","(","KEYWORD_CONTENT_TYPE,","namespaceCoreProperties,","propsPart",".","getContentTypeProperty","(",")",")",";","\n"],"docstring_tokens":["Add","content","type","property","element","if","needed"]}
{"code_tokens":["\n","private","void","addCreated","(",")","{","\n","setElementTextContent","(","KEYWORD_CREATED,","namespaceDcTerms,","propsPart",".","getCreatedProperty","(",")",",\n","propsPart",".","getCreatedPropertyString","(",")",",","\"dcterms:W3CDTF\"",")",";","\n"],"docstring_tokens":["Add","created","property","element","if","needed"]}
{"code_tokens":["\n","private","void","addCreator","(",")","{","\n","setElementTextContent","(","KEYWORD_CREATOR,","namespaceDC,","propsPart",".","getCreatorProperty","(",")",")",";","\n"],"docstring_tokens":["Add","creator","property","element","if","needed"]}
{"code_tokens":["\n","private","void","addDescription","(",")","{","\n","setElementTextContent","(","KEYWORD_DESCRIPTION,","namespaceDC,","propsPart",".","getDescriptionProperty","(",")",")",";","\n"],"docstring_tokens":["Add","description","property","element","if","needed"]}
{"code_tokens":["\n","private","void","addIdentifier","(",")","{","\n","setElementTextContent","(","KEYWORD_IDENTIFIER,","namespaceDC,","propsPart",".","getIdentifierProperty","(",")",")",";","\n"],"docstring_tokens":["Add","identifier","property","element","if","needed"]}
{"code_tokens":["\n","private","void","addKeywords","(",")","{","\n","setElementTextContent","(","KEYWORD_KEYWORDS,","namespaceCoreProperties,","propsPart",".","getKeywordsProperty","(",")",")",";","\n"],"docstring_tokens":["Add","keywords","property","element","if","needed"]}
{"code_tokens":["\n","private","void","addLanguage","(",")","{","\n","setElementTextContent","(","KEYWORD_LANGUAGE,","namespaceDC,","propsPart",".","getLanguageProperty","(",")",")",";","\n"],"docstring_tokens":["Add","language","property","element","if","needed"]}
{"code_tokens":["\n","private","void","addModified","(",")","{","\n","setElementTextContent","(","KEYWORD_MODIFIED,","namespaceDcTerms,","propsPart",".","getModifiedProperty","(",")",",\n","propsPart",".","getModifiedPropertyString","(",")",",","\"dcterms:W3CDTF\"",")",";","\n"],"docstring_tokens":["Add","modified","property","element","if","needed"]}
{"code_tokens":["\n","private","void","addRevision","(",")","{","\n","setElementTextContent","(","KEYWORD_REVISION,","namespaceCoreProperties,","propsPart",".","getRevisionProperty","(",")",")",";","\n"],"docstring_tokens":["Add","revision","property","if","needed"]}
{"code_tokens":["\n","private","void","addSubject","(",")","{","\n","setElementTextContent","(","KEYWORD_SUBJECT,","namespaceDC,","propsPart",".","getSubjectProperty","(",")",")",";","\n"],"docstring_tokens":["Add","subject","property","if","needed"]}
{"code_tokens":["\n","private","void","addTitle","(",")","{","\n","setElementTextContent","(","KEYWORD_TITLE,","namespaceDC,","propsPart",".","getTitleProperty","(",")",")",";","\n"],"docstring_tokens":["Add","title","property","if","needed"]}
{"code_tokens":["\n","public","static","ValueEval","evaluate","(","OperationPtg","ptg,","ValueEval[]","args,\n","OperationEvaluationContext","ec",")","{","\n","if","(","ptg","==","null",")","{","\n","throw","new","IllegalArgumentException","(","\"ptg","must","not","be","null\"",")",";","\n","}","\n","Function","result","=","_instancesByPtgClass",".","get","(","ptg",".","getSid","(",")",")",";","\n","FreeRefFunction","udfFunc","=","null",";","\n","if","(","result","==","null",")","{","\n","if","(","ptg","instanceof","AbstractFunctionPtg",")","{","\n","AbstractFunctionPtg","fptg","=","(","AbstractFunctionPtg",")","ptg",";","\n","int","functionIndex","=","fptg",".","getFunctionIndex","(",")",";","\n","switch","(","functionIndex",")","{","\n","case","FunctionMetadataRegistry",".","FUNCTION_INDEX_INDIRECT:\n","udfFunc","=","Indirect",".","instance",";","\n","break",";","\n","case","FunctionMetadataRegistry",".","FUNCTION_INDEX_EXTERNAL:\n","udfFunc","=","UserDefinedFunction",".","instance",";","\n","break",";","\n","default:\n","result","=","FunctionEval",".","getBasicFunction","(","functionIndex",")",";","\n","break",";","\n","}","\n","}","\n","}","\n","if","(","result","!=","null",")","{","\n\n","if","(","result","instanceof","ArrayFunction",")","{","\n","ArrayFunction","func","=","(","ArrayFunction",")","result",";","\n","ValueEval","eval","=","evaluateArrayFunction","(","func,","args,","ec",")",";","\n","if","(","eval","!=","null",")","{","\n","return","eval",";","\n","}","\n","}","\n\n","return","result",".","evaluate","(","args,","ec",".","getRowIndex","(",")",",","ec",".","getColumnIndex","(",")",")",";","\n","}","else","if","(","udfFunc","!=","null",")","{","\n","return","udfFunc",".","evaluate","(","args,","ec",")",";","\n","}","\n\n","throw","new","RuntimeException","(","\"Unexpected","operation","ptg","class","(","\"","+","ptg",".","getClass","(",")",".","getName","(",")","+","\"",")","\"",")",";","\n"],"docstring_tokens":["returns","the","OperationEval","concrete","impl","instance","corresponding","to","the","supplied","operationPtg"]}
{"code_tokens":["\n","@Override\n","public","String","getText","(",")","{","\n","return","getHeaderFooter","(",")",".","getFirstHeader","(",")",";","\n"],"docstring_tokens":["Get","the","content","text","representing","this","header"]}
{"code_tokens":["\n","@Test\n","public","final","void","readComments","(",")","throws","IOException","{","\n\n","Workbook","wb","=","_testDataProvider",".","openSampleWorkbook","(","\"SimpleWithComments",".","\"","+","_testDataProvider",".","getStandardFileNameExtension","(",")",")",";","\n\n","Sheet","sheet","=","wb",".","getSheetAt","(","0",")",";","\n\n","Cell","cell",";","\n","Row","row",";","\n","Comment","comment",";","\n\n","for","(","int","rownum","=","0",";","rownum","<","3",";","rownum++",")","{","\n","row","=","sheet",".","getRow","(","rownum",")",";","\n","cell","=","row",".","getCell","(","0",")",";","\n","comment","=","cell",".","getCellComment","(",")",";","\n","assertNull","(","comment,","\"Cells","in","the","first","column","are","not","commented\"",")",";","\n","assertNull","(","sheet",".","getCellComment","(","new","CellAddress","(","rownum,","0",")",")",")",";","\n","}","\n\n","for","(","int","rownum","=","0",";","rownum","<","3",";","rownum++",")","{","\n","row","=","sheet",".","getRow","(","rownum",")",";","\n","cell","=","row",".","getCell","(","1",")",";","\n","comment","=","cell",".","getCellComment","(",")",";","\n","assertNotNull","(","comment,","\"Cells","in","the","second","column","have","comments\"",")",";","\n","assertNotNull","(","sheet",".","getCellComment","(","new","CellAddress","(","rownum,","1",")",")",",","\"Cells","in","the","second","column","have","comments\"",")",";","\n\n","assertEquals","(","\"Yegor","Kozlov\",","comment",".","getAuthor","(",")",")",";","\n","assertFalse","(","comment",".","getString","(",")",".","getString","(",")",".","isEmpty","(",")",")",";","\n","assertEquals","(","rownum,","comment",".","getRow","(",")",")",";","\n","assertEquals","(","cell",".","getColumnIndex","(",")",",","comment",".","getColumn","(",")",")",";","\n","}","\n\n","wb",".","close","(",")",";","\n"],"docstring_tokens":["test","that","we","can","read","cell","comments","from","an","existing","workbook"]}
{"code_tokens":["\n","@Test\n","public","final","void","modifyComments","(",")","throws","IOException","{","\n\n","Workbook","wb1","=","_testDataProvider",".","openSampleWorkbook","(","\"SimpleWithComments",".","\"","+","_testDataProvider",".","getStandardFileNameExtension","(",")",")",";","\n","CreationHelper","factory","=","wb1",".","getCreationHelper","(",")",";","\n\n","Sheet","sheet","=","wb1",".","getSheetAt","(","0",")",";","\n\n","Cell","cell",";","\n","Row","row",";","\n","Comment","comment",";","\n\n","for","(","int","rownum","=","0",";","rownum","<","3",";","rownum++",")","{","\n","row","=","sheet",".","getRow","(","rownum",")",";","\n","cell","=","row",".","getCell","(","1",")",";","\n","comment","=","cell",".","getCellComment","(",")",";","\n","comment",".","setAuthor","(","\"Mofified[\"","+","rownum","+","\"]","by","Yegor\"",")",";","\n","comment",".","setString","(","factory",".","createRichTextString","(","\"Modified","comment","at","row","\"","+","rownum",")",")",";","\n","}","\n\n","Workbook","wb2","=","_testDataProvider",".","writeOutAndReadBack","(","wb1",")",";","\n","wb1",".","close","(",")",";","\n","sheet","=","wb2",".","getSheetAt","(","0",")",";","\n\n","for","(","int","rownum","=","0",";","rownum","<","3",";","rownum++",")","{","\n","row","=","sheet",".","getRow","(","rownum",")",";","\n","cell","=","row",".","getCell","(","1",")",";","\n","comment","=","cell",".","getCellComment","(",")",";","\n\n","assertEquals","(","\"Mofified[\"","+","rownum","+","\"]","by","Yegor\",","comment",".","getAuthor","(",")",")",";","\n","assertEquals","(","\"Modified","comment","at","row","\"","+","rownum,","comment",".","getString","(",")",".","getString","(",")",")",";","\n","}","\n\n","wb2",".","close","(",")",";","\n"],"docstring_tokens":["test","that","we","can","modify","existing","cell","comments"]}
{"code_tokens":["\n","@Override\n","public","int","getRow","(",")","{","\n","return","_note",".","getRow","(",")",";","\n"],"docstring_tokens":["Return","the","row","of","the","cell","that","contains","the","comment"]}
{"code_tokens":["\n","@Override\n","public","void","setRow","(","int","row",")","{","\n","_note",".","setRow","(","row",")",";","\n"],"docstring_tokens":["Set","the","row","of","the","cell","that","contains","the","comment"]}
{"code_tokens":["\n","@Override\n","public","int","getColumn","(",")","{","\n","return","_note",".","getColumn","(",")",";","\n"],"docstring_tokens":["Return","the","column","of","the","cell","that","contains","the","comment"]}
{"code_tokens":["\n","@Override\n","public","void","setColumn","(","int","col",")","{","\n","_note",".","setColumn","(","col",")",";","\n"],"docstring_tokens":["Set","the","column","of","the","cell","that","contains","the","comment"]}
{"code_tokens":["\n","@Override\n","public","String","getAuthor","(",")","{","\n","return","_note",".","getAuthor","(",")",";","\n"],"docstring_tokens":["Name","of","the","original","comment","author"]}
{"code_tokens":["\n","public","static","synchronized","Map<Integer,HSSFColor>","getIndexHash","(",")","{","\n","if","(","indexHash","==","null",")","{","\n","indexHash","=","Collections",".","unmodifiableMap","(","createColorsByIndexMap","(",")",")",";","\n","}","\n\n","return","indexHash",";","\n"],"docstring_tokens":["This","function","returns","all","the","colours","in","an","unmodifiable","Map"]}
{"code_tokens":["\n","@Deprecated\n","@Removal","(","version=\"3",".","18\"",")","\n","private","static","synchronized","Map<HSSFColorPredefined,HSSFColor>","mapEnumToColorClass","(",")","{","\n","if","(","enumList","==","null",")","{","\n","enumList","=","new","EnumMap<>","(","HSSFColorPredefined",".","class",")",";","\n","//","AUTOMATIC","is","not","add","to","list\n","addHSSFColorPredefined","(","HSSFColorPredefined",".","BLACK",")",";","\n","addHSSFColorPredefined","(","HSSFColorPredefined",".","BROWN",")",";","\n","addHSSFColorPredefined","(","HSSFColorPredefined",".","OLIVE_GREEN",")",";","\n","addHSSFColorPredefined","(","HSSFColorPredefined",".","DARK_GREEN",")",";","\n","addHSSFColorPredefined","(","HSSFColorPredefined",".","DARK_TEAL",")",";","\n","addHSSFColorPredefined","(","HSSFColorPredefined",".","DARK_BLUE",")",";","\n","addHSSFColorPredefined","(","HSSFColorPredefined",".","INDIGO",")",";","\n","addHSSFColorPredefined","(","HSSFColorPredefined",".","GREY_80_PERCENT",")",";","\n","addHSSFColorPredefined","(","HSSFColorPredefined",".","ORANGE",")",";","\n","addHSSFColorPredefined","(","HSSFColorPredefined",".","DARK_YELLOW",")",";","\n","addHSSFColorPredefined","(","HSSFColorPredefined",".","GREEN",")",";","\n","addHSSFColorPredefined","(","HSSFColorPredefined",".","TEAL",")",";","\n","addHSSFColorPredefined","(","HSSFColorPredefined",".","BLUE",")",";","\n","addHSSFColorPredefined","(","HSSFColorPredefined",".","BLUE_GREY",")",";","\n","addHSSFColorPredefined","(","HSSFColorPredefined",".","GREY_50_PERCENT",")",";","\n","addHSSFColorPredefined","(","HSSFColorPredefined",".","RED",")",";","\n","addHSSFColorPredefined","(","HSSFColorPredefined",".","LIGHT_ORANGE",")",";","\n","addHSSFColorPredefined","(","HSSFColorPredefined",".","LIME",")",";","\n","addHSSFColorPredefined","(","HSSFColorPredefined",".","SEA_GREEN",")",";","\n","addHSSFColorPredefined","(","HSSFColorPredefined",".","AQUA",")",";","\n","addHSSFColorPredefined","(","HSSFColorPredefined",".","LIGHT_BLUE",")",";","\n","addHSSFColorPredefined","(","HSSFColorPredefined",".","VIOLET",")",";","\n","addHSSFColorPredefined","(","HSSFColorPredefined",".","GREY_40_PERCENT",")",";","\n","addHSSFColorPredefined","(","HSSFColorPredefined",".","PINK",")",";","\n","addHSSFColorPredefined","(","HSSFColorPredefined",".","GOLD",")",";","\n","addHSSFColorPredefined","(","HSSFColorPredefined",".","YELLOW",")",";","\n","addHSSFColorPredefined","(","HSSFColorPredefined",".","BRIGHT_GREEN",")",";","\n","addHSSFColorPredefined","(","HSSFColorPredefined",".","TURQUOISE",")",";","\n","addHSSFColorPredefined","(","HSSFColorPredefined",".","DARK_RED",")",";","\n","addHSSFColorPredefined","(","HSSFColorPredefined",".","SKY_BLUE",")",";","\n","addHSSFColorPredefined","(","HSSFColorPredefined",".","PLUM",")",";","\n","addHSSFColorPredefined","(","HSSFColorPredefined",".","GREY_25_PERCENT",")",";","\n","addHSSFColorPredefined","(","HSSFColorPredefined",".","ROSE",")",";","\n","addHSSFColorPredefined","(","HSSFColorPredefined",".","LIGHT_YELLOW",")",";","\n","addHSSFColorPredefined","(","HSSFColorPredefined",".","LIGHT_GREEN",")",";","\n","addHSSFColorPredefined","(","HSSFColorPredefined",".","LIGHT_TURQUOISE",")",";","\n","addHSSFColorPredefined","(","HSSFColorPredefined",".","PALE_BLUE",")",";","\n","addHSSFColorPredefined","(","HSSFColorPredefined",".","LAVENDER",")",";","\n","addHSSFColorPredefined","(","HSSFColorPredefined",".","WHITE",")",";","\n","addHSSFColorPredefined","(","HSSFColorPredefined",".","CORNFLOWER_BLUE",")",";","\n","addHSSFColorPredefined","(","HSSFColorPredefined",".","LEMON_CHIFFON",")",";","\n","addHSSFColorPredefined","(","HSSFColorPredefined",".","MAROON",")",";","\n","addHSSFColorPredefined","(","HSSFColorPredefined",".","ORCHID",")",";","\n","addHSSFColorPredefined","(","HSSFColorPredefined",".","CORAL",")",";","\n","addHSSFColorPredefined","(","HSSFColorPredefined",".","ROYAL_BLUE",")",";","\n","addHSSFColorPredefined","(","HSSFColorPredefined",".","LIGHT_CORNFLOWER_BLUE",")",";","\n","addHSSFColorPredefined","(","HSSFColorPredefined",".","TAN",")",";","\n","}","\n","return","enumList",";","\n"],"docstring_tokens":["Maps","the","Enums","to","the","HSSFColor,","in","cases","of","user","code","evaluating","the","classname"]}
{"code_tokens":["\n\n","public","short","getIndex","(",")","{","\n","return","(","short",")","index",";","\n"],"docstring_tokens":["returns","color","standard","palette","index"]}
{"code_tokens":["\n\n","public","short","getIndex2","(",")","{","\n","return","(","short",")","index2",";","\n"],"docstring_tokens":["returns","alternative","color","standard","palette","index"]}
{"code_tokens":["\n","public","static","HSSFColor","toHSSFColor","(","Color","color",")","{","\n","//","FIXME:","this","method","would","be","more","useful","if","it","could","convert","any","Color","to","an","HSSFColor\n","//","Currently","the","only","benefit","of","this","method","is","to","throw","an","IllegalArgumentException\n","//","instead","of","a","ClassCastException",".","\n","if","(","color","!=","null","&&","!","(","color","instanceof","HSSFColor",")",")","{","\n","throw","new","IllegalArgumentException","(","\"Only","HSSFColor","objects","are","supported,","but","had","\"","+","color",".","getClass","(",")",")",";","\n","}","\n","return","(","HSSFColor",")","color",";","\n"],"docstring_tokens":["Checked","type","cast","color","to","an","HSSFColor"]}
{"code_tokens":["\n","public","int","getEscherProperty","(","short","propId",")","{","\n","AbstractEscherOptRecord","opt","=","getEscherOptRecord","(",")",";","\n","EscherSimpleProperty","prop","=","getEscherProperty","(","opt,","propId",")",";","\n","return","prop","==","null","?","0",":","prop",".","getPropertyValue","(",")",";","\n"],"docstring_tokens":["Get","the","value","of","a","simple","escher","property","for","this","shape"]}
{"code_tokens":["\n","protected","HSLFEscherClientDataRecord","getClientData","(","boolean","create",")","{","\n","HSLFEscherClientDataRecord","clientData","=","getEscherChild","(","EscherClientDataRecord",".","RECORD_ID",")",";","\n","if","(","clientData","==","null","&&","create",")","{","\n","clientData","=","new","HSLFEscherClientDataRecord","(",")",";","\n","clientData",".","setOptions","(","(","short",")","15",")",";","\n","clientData",".","setRecordId","(","EscherClientDataRecord",".","RECORD_ID",")",";","\n","getSpContainer","(",")",".","addChildBefore","(","clientData,","EscherTextboxRecord",".","RECORD_ID",")",";","\n","}","\n","return","clientData",";","\n"],"docstring_tokens":["Create","a","new","HSLF-specific","EscherClientDataRecord"]}
{"code_tokens":["\n\n","public","boolean","containsAll","(","final","IntList","c",")","\n","{","\n","if","(","this","!=","c",")","\n","{","\n","for","(","int","j","=","0",";","j","<","c",".","_limit",";","j++",")","\n","{","\n","if","(","!contains","(","c",".","_array[","j","]",")",")","\n","{","\n","return","false",";","\n","}","\n","}","\n","}","\n","return","true",";","\n"],"docstring_tokens":["Returns","true","if","this","list","contains","all","of","the","elements","of","the","specified","collection"]}
{"code_tokens":["\n\n","public","int","get","(","final","int","index",")","\n","{","\n","if","(","index",">=","_limit",")","\n","{","\n","throw","new","IndexOutOfBoundsException","(","\n","index","+","\"","not","accessible","in","a","list","of","length","\"","+","_limit\n",")",";","\n","}","\n","return","_array[","index","]",";","\n"],"docstring_tokens":["Returns","the","element","at","the","specified","position","in","this","list"]}
{"code_tokens":["\n\n","public","boolean","isEmpty","(",")","\n","{","\n","return","_limit","==","0",";","\n"],"docstring_tokens":["Returns","true","if","this","list","contains","no","elements"]}
{"code_tokens":["\n\n","public","boolean","removeAll","(","final","IntList","c",")","\n","{","\n","boolean","rval","=","false",";","\n\n","for","(","int","j","=","0",";","j","<","c",".","_limit",";","j++",")","\n","{","\n","if","(","removeValue","(","c",".","_array[","j","]",")",")","\n","{","\n","rval","=","true",";","\n","}","\n","}","\n","return","rval",";","\n"],"docstring_tokens":["Removes","from","this","list","all","the","elements","that","are","contained","in","the","specified","collection"]}
{"code_tokens":["\n\n","public","int","set","(","final","int","index,","final","int","element",")","\n","{","\n","if","(","index",">=","_limit",")","\n","{","\n","throw","new","IndexOutOfBoundsException","(",")",";","\n","}","\n","int","rval","=","_array[","index","]",";","\n\n","_array[","index","]","=","element",";","\n","return","rval",";","\n"],"docstring_tokens":["Replaces","the","element","at","the","specified","position","in","this","list","with","the","specified","element"]}
{"code_tokens":["\n\n","public","int","getSize","(",")","\n","{","\n","return","getProperty","(",")",".","getSize","(",")",";","\n"],"docstring_tokens":["get","the","zize","of","the","document,","in","bytes"]}
{"code_tokens":["\n","public","void","addRelationship","(","PackageRelationship","relPart",")","{","\n","if","(","relPart","==","null","||","relPart",".","getId","(",")","==","null","||","relPart",".","getId","(",")",".","isEmpty","(",")",")","{","\n","throw","new","IllegalArgumentException","(","\"invalid","relationship","part/id:","\"","+\n","(","relPart","==","null","?","\"<null>\"",":","relPart",".","getId","(",")",")","+","\"","for","relationship:","\"","+","relPart",")",";","\n","}","\n","relationshipsByID",".","put","(","relPart",".","getId","(",")",",","relPart",")",";","\n","relationshipsByType",".","put","(","relPart",".","getRelationshipType","(",")",",","relPart",")",";","\n"],"docstring_tokens":["Add","the","specified","relationship","to","the","collection"]}
{"code_tokens":["\n","public","PackageRelationship","addRelationship","(","URI","targetUri,\n","TargetMode","targetMode,","String","relationshipType,","String","id",")","{","\n","if","(","id","==","null","||","id",".","length","(",")","==","0",")","{","\n","//","Generate","a","unique","ID","is","id","parameter","is","null",".","\n","if","(","nextRelationshipId","==","-1",")","{","\n","nextRelationshipId","=","size","(",")","+","1",";","\n","}","\n\n","//","Work","up","until","we","find","a","unique","number","(","there","could","be","gaps","etc",")","\n","do","{","\n","id","=","\"rId\"","+","nextRelationshipId++",";","\n","}","while","(","relationshipsByID",".","get","(","id",")","!=","null",")",";","\n","}","\n\n","PackageRelationship","rel","=","new","PackageRelationship","(","container,\n","sourcePart,","targetUri,","targetMode,","relationshipType,","id",")",";","\n","addRelationship","(","rel",")",";","\n","if","(","targetMode","==","TargetMode",".","INTERNAL",")","{","\n","internalRelationshipsByTargetName",".","put","(","targetUri",".","toASCIIString","(",")",",","rel",")",";","\n","}","\n","return","rel",";","\n"],"docstring_tokens":["Add","a","relationship","to","the","collection"]}
{"code_tokens":["\n","public","void","removeRelationship","(","String","id",")","{","\n","PackageRelationship","rel","=","relationshipsByID",".","get","(","id",")",";","\n","if","(","rel","!=","null",")","{","\n","relationshipsByID",".","remove","(","rel",".","getId","(",")",")",";","\n","relationshipsByType",".","values","(",")",".","remove","(","rel",")",";","\n","internalRelationshipsByTargetName",".","values","(",")",".","remove","(","rel",")",";","\n","}","\n"],"docstring_tokens":["Remove","a","relationship","by","its","ID"]}
{"code_tokens":["\n","public","PackageRelationship","getRelationship","(","int","index",")","{","\n","if","(","index","<","0","||","index",">","relationshipsByID",".","values","(",")",".","size","(",")",")","\n","throw","new","IllegalArgumentException","(","\"index\"",")",";","\n\n","int","i","=","0",";","\n","for","(","PackageRelationship","rel",":","relationshipsByID",".","values","(",")",")","{","\n","if","(","index","==","i++",")","\n","return","rel",";","\n","}","\n\n","return","null",";","\n"],"docstring_tokens":["Retrieves","a","relationship","by","its","index","in","the","collection"]}
{"code_tokens":["\n","public","int","size","(",")","{","\n","return","relationshipsByID",".","size","(",")",";","\n"],"docstring_tokens":["Get","the","number","of","relationships","in","the","collection"]}
{"code_tokens":["\n","public","void","parseRelationshipsPart","(","PackagePart","relPart",")","\n","throws","InvalidFormatException","{","\n","try","{","\n","LOG",".","atDebug","(",")",".","log","(","\"Parsing","relationship:","{","}","\",","relPart",".","getPartName","(",")",")",";","\n","Document","xmlRelationshipsDoc",";","\n","try","(","InputStream","partStream","=","relPart",".","getInputStream","(",")",")","{","\n","xmlRelationshipsDoc","=","DocumentHelper",".","readDocument","(","partStream",")",";","\n","}","\n\n","//","Browse","default","types\n","Element","root","=","xmlRelationshipsDoc",".","getDocumentElement","(",")",";","\n\n","//","Check","OPC","compliance","M4",".","1","rule\n","boolean","fCorePropertiesRelationship","=","false",";","\n\n","NodeList","nodeList","=","root",".","getElementsByTagNameNS","(","PackageNamespaces",".","RELATIONSHIPS,","PackageRelationship",".","RELATIONSHIP_TAG_NAME",")",";","\n","int","nodeCount","=","nodeList",".","getLength","(",")",";","\n","for","(","int","i","=","0",";","i","<","nodeCount",";","i++",")","{","\n","Element","element","=","(","Element",")","nodeList",".","item","(","i",")",";","\n","//","Relationship","ID\n","String","id","=","element",".","getAttribute","(","PackageRelationship",".","ID_ATTRIBUTE_NAME",")",";","\n","//","Relationship","type\n","String","type","=","element",".","getAttribute","(","PackageRelationship",".","TYPE_ATTRIBUTE_NAME",")",";","\n\n","/*","Check","OPC","Compliance","*/\n","//","Check","Rule","M4",".","1\n","if","(","type",".","equals","(","PackageRelationshipTypes",".","CORE_PROPERTIES",")",")","\n","if","(","!fCorePropertiesRelationship",")","\n","fCorePropertiesRelationship","=","true",";","\n","else\n","throw","new","InvalidFormatException","(","\n","\"OPC","Compliance","error","[M4",".","1]:","there","is","more","than","one","core","properties","relationship","in","the","package","!\"",")",";","\n\n","/*","End","OPC","Compliance","*/\n\n","//","TargetMode","(","default","value","\"Internal\"",")","\n","Attr","targetModeAttr","=","element",".","getAttributeNode","(","PackageRelationship",".","TARGET_MODE_ATTRIBUTE_NAME",")",";","\n","TargetMode","targetMode","=","TargetMode",".","INTERNAL",";","\n","if","(","targetModeAttr","!=","null",")","{","\n","targetMode","=","targetModeAttr",".","getValue","(",")",".","toLowerCase","(","Locale",".","ROOT",")","\n",".","equals","(","\"internal\"",")","?","TargetMode",".","INTERNAL\n",":","TargetMode",".","EXTERNAL",";","\n","}","\n\n","//","Target","converted","in","URI\n","URI","target","=","PackagingURIHelper",".","toURI","(","\"http://invalid",".","uri\"",")",";","//","dummy","url\n","String","value","=","element",".","getAttribute","(","PackageRelationship",".","TARGET_ATTRIBUTE_NAME",")",";","\n","try","{","\n","//","when","parsing","of","the","given","uri","fails,","we","can","either\n","//","ignore","this","relationship,","which","leads","to","IllegalStateException\n","//","later","on,","or","use","a","dummy","value","and","thus","enable","processing","of","the\n","//","package\n","target","=","PackagingURIHelper",".","toURI","(","value",")",";","\n","}","catch","(","URISyntaxException","e",")","{","\n","LOG",".","atError","(",")",".","withThrowable","(","e",")",".","log","(","\"Cannot","convert","{","}","in","a","valid","relationship","URI->","dummy-URI","used\",","value",")",";","\n","}","\n","addRelationship","(","target,","targetMode,","type,","id",")",";","\n","}","\n","}","catch","(","Exception","e",")","{","\n","throw","new","InvalidFormatException","(","\"Failed","to","parse","relationships\",","e",")",";","\n","}","\n"],"docstring_tokens":["Parse","the","relationship","part","and","add","all","relationship","in","this","collection"]}
{"code_tokens":["\n","public","Iterator<PackageRelationship>","iterator","(","String","typeFilter",")","{","\n","ArrayList<PackageRelationship>","retArr","=","new","ArrayList<>","(",")",";","\n","for","(","PackageRelationship","rel",":","relationshipsByID",".","values","(",")",")","{","\n","if","(","rel",".","getRelationshipType","(",")",".","equals","(","typeFilter",")",")","\n","retArr",".","add","(","rel",")",";","\n","}","\n","return","retArr",".","iterator","(",")",";","\n"],"docstring_tokens":["Get","an","iterator","of","a","collection","with","all","relationship","with","the","specified","type"]}
{"code_tokens":["\n","public","void","serialize","(","LittleEndianOutput","out",")","{","\n","out",".","writeShort","(","sid",")",";","\n","out",".","writeShort","(","length",")",";","\n","out",".","writeShort","(","flags",")",";","\n"],"docstring_tokens":["Serialize","the","record","data","into","the","supplied","array","of","bytes"]}
{"code_tokens":["\n","@SuppressWarnings","(","\"unused\"",")","\n","public","CommandDefinition[]","getCommandDefinitions","(",")","{","\n","return","commandDefinitions",";","\n"],"docstring_tokens":["Gets","the","command","definitions,","which","define","and","describe","much","of","the","data","held","by","the","chunk"]}
{"code_tokens":["\n","public","int","getOnDiskSize","(",")","{","\n","int","size","=","header",".","getSizeInBytes","(",")","+","contents",".","length",";","\n","if","(","trailer","!=","null",")","{","\n","size","+=","trailer",".","getTrailerData","(",")",".","length",";","\n","}","\n","if","(","separator","!=","null",")","{","\n","size","+=","separator",".","separatorData",".","length",";","\n","}","\n","return","size",";","\n"],"docstring_tokens":["Returns","the","size","of","the","chunk,","including","any","headers,","trailers","and","separators"]}
{"code_tokens":["\n","void","processCommands","(",")","{","\n","if","(","commandDefinitions","==","null",")","{","\n","throw","new","IllegalStateException","(","\"You","must","supply","the","command","definitions","before","calling","processCommands!\"",")",";","\n","}","\n\n","//","Loop","over","the","definitions,","building","the","commands\n","//","and","getting","their","values\n","ArrayList<Command>","commandList","=","new","ArrayList<>","(",")",";","\n","for","(","CommandDefinition","cdef",":","commandDefinitions",")","{","\n","int","type","=","cdef",".","getType","(",")",";","\n","int","offset","=","cdef",".","getOffset","(",")",";","\n\n","//","Handle","virtual","commands\n","if","(","type","==","10",")","{","\n","name","=","cdef",".","getName","(",")",";","\n","continue",";","\n","}","else","if","(","type","==","18",")","{","\n","continue",";","\n","}","\n\n\n","//","Build","the","appropriate","command","for","the","type\n","Command","command",";","\n","if","(","type","==","11","||","type","==","21",")","{","\n","command","=","new","BlockOffsetCommand","(","cdef",")",";","\n","}","else","{","\n","command","=","new","Command","(","cdef",")",";","\n","}","\n\n","//","Bizarrely,","many","of","the","offsets","are","from","the","start","of","the\n","//","header,","not","from","the","start","of","the","chunk","body\n","switch","(","type",")","{","\n","case","0:","case","1:","case","2:","case","3:","case","4:","case","5:","case","6:","case","7:\n","case","11:","case","21:\n","case","12:","case","16:","case","17:","case","28:","case","29:\n","//","Offset","is","from","start","of","chunk","(","case","18","has","been","taken","care","of","above",")","\n","break",";","\n","default:\n","//","Offset","is","from","start","of","header!\n","if","(","offset",">=","19",")","{","\n","offset","-=","19",";","\n","}","\n","}","\n\n","//","Check","we","seem","to","have","enough","data\n","if","(","offset",">=","contents",".","length",")","{","\n","LOG",".","atWarn","(",")",".","log","(","\"Command","offset","{","}","past","end","of","data","at","{","}","\",","box","(","offset",")",",box","(","contents",".","length",")",")",";","\n","continue",";","\n","}","\n\n","try","{","\n","//","Process\n","switch","(","type",")","{","\n","//","Types","0->7","=","a","flag","at","bit","0->7\n","case","0:","case","1:","case","2:","case","3:","case","4:","case","5:","case","6:","case","7:\n","command",".","value","=","(","(","contents[offset]",">>>","type",")","&","1",")","==","1",";","\n","break",";","\n","case","8:\n","command",".","value","=","contents[offset]",";","\n","break",";","\n","case","9:\n","command",".","value","=","LittleEndian",".","getDouble","(","contents,","offset",")",";","\n","break",";","\n","case","12:\n","//","A","Little","Endian","String\n","//","Starts","8","bytes","into","the","data","segment\n","//","Ends","at","end","of","data,","or","00","00\n\n","//","Ensure","we","have","enough","data\n","if","(","contents",".","length","<","8",")","{","\n","command",".","value","=","\"\"",";","\n","break",";","\n","}","\n\n","//","Find","the","end","point\n","int","startsAt","=","8",";","\n","int","endsAt","=","startsAt",";","\n","for","(","int","j=startsAt",";","j<contents",".","length-1","&&","endsAt","==","startsAt",";","j++",")","{","\n","if","(","contents[j]","==","0","&&","contents[j+1]","==","0",")","{","\n","endsAt","=","j",";","\n","}","\n","}","\n","if","(","endsAt","==","startsAt",")","{","\n","endsAt","=","contents",".","length",";","\n","}","\n\n","int","strLen","=","endsAt","-","startsAt",";","\n","command",".","value","=","new","String","(","contents,","startsAt,","strLen,","header",".","getChunkCharset","(",")",".","name","(",")",")",";","\n","break",";","\n","case","25:\n","command",".","value","=","LittleEndian",".","getShort","(","contents,","offset",")",";","\n","break",";","\n","case","26:\n","command",".","value","=","LittleEndian",".","getInt","(","contents,","offset",")",";","\n","break",";","\n\n","//","Types","11","and","21","hold","the","offset","to","the","blocks\n","case","11:","case","21:\n","if","(","offset","<","contents",".","length","-","3",")","{","\n","int","bOffset","=","(","int",")","LittleEndian",".","getUInt","(","contents,","offset",")",";","\n","BlockOffsetCommand","bcmd","=","(","BlockOffsetCommand",")","command",";","\n","bcmd",".","setOffset","(","bOffset",")",";","\n","}","\n","break",";","\n\n","default:\n","LOG",".","atInfo","(",")",".","log","(","\"Command","of","type","{","}","not","processed!\",","box","(","type",")",")",";","\n","}","\n","}","\n","catch","(","Exception","e",")","{","\n","LOG",".","atError","(",")",".","withThrowable","(","e",")",".","log","(","\"Unexpected","error","processing","command,","ignoring","and","continuing",".","Command:","{","}","\",","command",")",";","\n","}","\n\n","//","Add","to","the","array\n","commandList",".","add","(","command",")",";","\n","}","\n\n","//","Save","the","commands","we","liked","the","look","of\n","this",".","commands","=","commandList",".","toArray","(","\n","new","Command[0]",")",";","\n\n","//","Now","build","up","the","blocks,","if","we","had","a","command","that","tells\n","//","us","where","a","block","is\n"],"docstring_tokens":["Uses","our","CommandDefinitions","to","process","the","commands","our","chunk","type","has,","and","figure","out","the","values","for","them"]}
{"code_tokens":["\n","@Override\n","public","void","onDocumentRead","(",")","throws","IOException","{","\n","try","(","InputStream","is","=","getPackagePart","(",")",".","getInputStream","(",")",")","{","\n","CommentsDocument","doc","=","CommentsDocument",".","Factory",".","parse","(","is,","DEFAULT_XML_OPTIONS",")",";","\n","ctComments","=","doc",".","getComments","(",")",";","\n","for","(","CTComment","ctComment",":","ctComments",".","getCommentList","(",")",")","{","\n","comments",".","add","(","new","XWPFComment","(","ctComment,","this",")",")",";","\n","}","\n","}","catch","(","XmlException","e",")","{","\n","throw","new","POIXMLException","(","\"Unable","to","read","comments\",","e",")",";","\n","}","\n\n","for","(","POIXMLDocumentPart","poixmlDocumentPart",":","getRelations","(",")",")","{","\n","if","(","poixmlDocumentPart","instanceof","XWPFPictureData",")","{","\n","XWPFPictureData","xwpfPicData","=","(","XWPFPictureData",")","poixmlDocumentPart",";","\n","pictures",".","add","(","xwpfPicData",")",";","\n","document",".","registerPackagePictureData","(","xwpfPicData",")",";","\n","}","\n","}","\n"],"docstring_tokens":["read","comments","form","an","existing","package"]}
{"code_tokens":["\n","public","XWPFComment","createComment","(","BigInteger","cid",")","{","\n","CTComment","ctComment","=","ctComments",".","addNewComment","(",")",";","\n","ctComment",".","setId","(","cid",")",";","\n","XWPFComment","comment","=","new","XWPFComment","(","ctComment,","this",")",";","\n","comments",".","add","(","comment",")",";","\n","return","comment",";","\n"],"docstring_tokens":["Create","a","new","comment","and","add","it","to","the","document"]}
{"code_tokens":["\n","private","int","setGroupHidden","(","int","pIdx,","int","level,","boolean","hidden",")","{","\n","int","idx","=","pIdx",";","\n","ColumnInfoRecord","columnInfo","=","getColInfo","(","idx",")",";","\n","while","(","idx","<","records",".","size","(",")",")","{","\n","columnInfo",".","setHidden","(","hidden",")",";","\n","if","(","idx","+","1","<","records",".","size","(",")",")","{","\n","ColumnInfoRecord","nextColumnInfo","=","getColInfo","(","idx","+","1",")",";","\n","if","(","!columnInfo",".","isAdjacentBefore","(","nextColumnInfo",")",")","{","\n","break",";","\n","}","\n","if","(","nextColumnInfo",".","getOutlineLevel","(",")","<","level",")","{","\n","break",";","\n","}","\n","columnInfo","=","nextColumnInfo",";","\n","}","\n","idx++",";","\n","}","\n","return","columnInfo",".","getLastColumn","(",")",";","\n"],"docstring_tokens":["Sets","all","adjacent","columns","of","the","same","outline","level","to","the","specified","hidden","status"]}
{"code_tokens":["\n","public","void","readFrom","(","InputStream","is",")","throws","IOException,","SAXException","{","\n","//","test","if","the","file","is","empty,","otherwise","parse","it\n","PushbackInputStream","pis","=","new","PushbackInputStream","(","is,","1",")",";","\n","int","emptyTest","=","pis",".","read","(",")",";","\n","if","(","emptyTest",">","-1",")","{","\n","pis",".","unread","(","emptyTest",")",";","\n","InputSource","sheetSource","=","new","InputSource","(","pis",")",";","\n","try","{","\n","XMLReader","sheetParser","=","XMLHelper",".","newXMLReader","(",")",";","\n","sheetParser",".","setContentHandler","(","this",")",";","\n","sheetParser",".","parse","(","sheetSource",")",";","\n","}","catch","(","ParserConfigurationException","e",")","{","\n","throw","new","SAXException","(","\"SAX","parser","appears","to","be","broken","-","\"","+","e",".","getMessage","(",")",")",";","\n","}","\n","}","\n"],"docstring_tokens":["Read","this","shared","strings","table","from","an","XML","file"]}
{"code_tokens":["\n","@Override\n","public","int","getValue","(",")","{","\n","return","maskValue","(","super",".","getValue","(",")",")",";","\n"],"docstring_tokens":["Return","the","text","property","value"]}
{"code_tokens":["\n","public","static","void","registerFunction","(","String","name,","FreeRefFunction","func",")","{","\n","AnalysisToolPak","inst","=","(","AnalysisToolPak",")","instance",";","\n","if","(","!isATPFunction","(","name",")",")","{","\n","FunctionMetadata","metaData","=","FunctionMetadataRegistry",".","getFunctionByName","(","name",")",";","\n","if","(","metaData","!=","null",")","{","\n","throw","new","IllegalArgumentException","(","name","+","\"","is","a","built-in","Excel","function",".","\"","+\n","\"Use","FunctionEval",".","registerFunction","(","String","name,","Function","func",")","instead",".","\"",")",";","\n","}","\n\n","throw","new","IllegalArgumentException","(","name","+","\"","is","not","a","function","from","the","Excel","Analysis","Toolpack",".","\"",")",";","\n","}","\n","FreeRefFunction","f","=","inst",".","findFunction","(","name",")",";","\n","if","(","f","!=","null","&&","!","(","f","instanceof","NotImplemented",")",")","{","\n","throw","new","IllegalArgumentException","(","\"POI","already","implements","\"","+","name","+\n","\"",".","You","cannot","override","POI's","implementations","of","Excel","functions\"",")",";","\n","}","\n\n","//","FIXME:","inconsistent","case-sensitivity\n","inst",".","_functionsByName",".","put","(","name,","func",")",";","\n"],"docstring_tokens":["Register","an","ATP","function","in","runtime"]}
{"code_tokens":["\n","@Override\n","public","int","serializeSimplePart","(","byte[]","data,","int","offset",")","\n","{","\n","LittleEndian",".","putShort","(","data,","offset,","getId","(",")",")",";","\n","LittleEndian",".","putInt","(","data,","offset","+","2,","propertyValue",")",";","\n","return","6",";","\n"],"docstring_tokens":["Serialize","the","simple","part","of","the","escher","record"]}
{"code_tokens":["\n","@Override\n","public","boolean","equals","(","Object","o",")","\n","{","\n","if","(","this","==","o",")","{","\n","return","true",";","\n","}","\n","if","(","!","(","o","instanceof","EscherSimpleProperty",")",")","{","\n","return","false",";","\n","}","\n\n","final","EscherSimpleProperty","escherSimpleProperty","=","(","EscherSimpleProperty",")","o",";","\n\n","if","(","propertyValue","!=","escherSimpleProperty",".","propertyValue",")","{","\n","return","false",";","\n","}","\n","if","(","getId","(",")","!=","escherSimpleProperty",".","getId","(",")",")","{","\n","return","false",";","\n","}","\n\n","return","true",";","\n"],"docstring_tokens":["Returns","true","if","one","escher","property","is","equal","to","another"]}
{"code_tokens":["\n","public","void","clearText","(",")","{","\n","_paragraphs",".","clear","(",")",";","\n","CTTextBody","txBody","=","getTextBody","(","true",")",";","\n","txBody",".","setPArray","(","null",")",";","//","remove","any","existing","paragraphs\n"],"docstring_tokens":["unset","text","from","this","shape"]}
{"code_tokens":["\n","public","XSLFTextParagraph","addNewTextParagraph","(",")","{","\n","CTTextBody","txBody","=","getTextBody","(","false",")",";","\n","CTTextParagraph","p",";","\n","if","(","txBody","==","null",")","{","\n","txBody","=","getTextBody","(","true",")",";","\n","new","XDDFTextBody","(","this,","txBody",")",".","initialize","(",")",";","\n","p","=","txBody",".","getPArray","(","0",")",";","\n","p",".","removeR","(","0",")",";","\n","}","else","{","\n","p","=","txBody",".","addNewP","(",")",";","\n","}","\n","XSLFTextParagraph","paragraph","=","newTextParagraph","(","p",")",";","\n","_paragraphs",".","add","(","paragraph",")",";","\n","return","paragraph",";","\n"],"docstring_tokens":["add","a","new","paragraph","run","to","this","shape"]}
{"code_tokens":["\n","@Override\n","public","void","close","(",")","throws","IOException","{","\n","this",".","flush","(",")",";","\n"],"docstring_tokens":["Close","this","stream","and","flush","the","content"]}
{"code_tokens":["\n","public","static","CFRecordsAggregate","createCFAggregate","(","RecordStream","rs",")","{","\n","Record","rec","=","rs",".","getNext","(",")",";","\n","if","(","rec",".","getSid","(",")","!=","CFHeaderRecord",".","sid","&&\n","rec",".","getSid","(",")","!=","CFHeader12Record",".","sid",")","{","\n","throw","new","IllegalStateException","(","\"next","record","sid","was","\"","+","rec",".","getSid","(",")","\n","+","\"","instead","of","\"","+","CFHeaderRecord",".","sid","+","\"","or","\"","+\n","CFHeader12Record",".","sid","+","\"","as","expected\"",")",";","\n","}","\n\n","CFHeaderBase","header","=","(","CFHeaderBase",")","rec",";","\n","int","nRules","=","header",".","getNumberOfConditionalFormats","(",")",";","\n\n","CFRuleBase[]","rules","=","new","CFRuleBase[nRules]",";","\n","for","(","int","i","=","0",";","i","<","rules",".","length",";","i++",")","{","\n","rules[i]","=","(","CFRuleBase",")","rs",".","getNext","(",")",";","\n","}","\n\n","return","new","CFRecordsAggregate","(","header,","rules",")",";","\n"],"docstring_tokens":["Create","CFRecordsAggregate","from","a","list","of","CF","Records"]}
{"code_tokens":["\n","public","String","toString","(",")","{","\n","return","GenericRecordJsonWriter",".","marshal","(","this",")",";","\n"],"docstring_tokens":["String","representation","of","CFRecordsAggregate"]}
{"code_tokens":["\n","public","XWPFFootnote","createFootnote","(",")","{","\n","CTFtnEdn","newNote","=","CTFtnEdn",".","Factory",".","newInstance","(",")",";","\n","newNote",".","setType","(","STFtnEdn",".","NORMAL",")",";","\n\n","XWPFFootnote","footnote","=","addFootnote","(","newNote",")",";","\n","footnote",".","getCTFtnEdn","(",")",".","setId","(","getIdManager","(",")",".","nextId","(",")",")",";","\n","return","footnote",";","\n\n"],"docstring_tokens":["Create","a","new","footnote","and","add","it","to","the","document"]}
{"code_tokens":["\n","@SuppressWarnings","(","\"WeakerAccess\"",")","\n","public","void","mergeCells","(","int","firstCol,","int","lastCol",")","\n","{","\n","if","(","firstCol",">=","lastCol",")","{","\n","throw","new","IllegalArgumentException","(","\n","\"Cannot","merge,","first","column",">=","last","column",":","\"\n","+","firstCol","+","\"",">=","\"","+","lastCol\n",")",";","\n","}","\n\n","final","int","colSpan","=","(","lastCol","-","firstCol",")","+","1",";","\n\n","_cells",".","get","(","firstCol",")",".","setGridSpan","(","colSpan",")",";","\n","for","(","final","XSLFTableCell","cell",":","_cells",".","subList","(","firstCol+1,","lastCol+1",")",")","{","\n","cell",".","setHMerge","(",")",";","\n","}","\n"],"docstring_tokens":["Merge","cells","of","a","table","row,","inclusive"]}
{"code_tokens":["\n\n","@Override\n","public","void","setColor","(","short","color",")","\n","{","\n","font",".","setColorPaletteIndex","(","color",")",";","\n"],"docstring_tokens":["set","the","color","for","the","font"]}
{"code_tokens":["\n","@Override\n","public","short","getColor","(",")","\n","{","\n","return","font",".","getColorPaletteIndex","(",")",";","\n"],"docstring_tokens":["get","the","color","for","the","font"]}
{"code_tokens":["\n","public","HSSFColor","getHSSFColor","(","HSSFWorkbook","wb",")","\n","{","\n","HSSFPalette","pallette","=","wb",".","getCustomPalette","(",")",";","\n","return","pallette",".","getColor","(","getColor","(",")",")",";","\n"],"docstring_tokens":["get","the","color","value","for","the","font"]}
{"code_tokens":["\n","@Override\n","public","void","setBold","(","boolean","bold",")","\n","{","\n","if","(","bold",")","\n","font",".","setBoldWeight","(","BOLDWEIGHT_BOLD",")",";","\n","else\n","font",".","setBoldWeight","(","BOLDWEIGHT_NORMAL",")",";","\n"],"docstring_tokens":["sets","the","font","to","be","bold","or","not"]}
{"code_tokens":["\n","@Override\n","public","boolean","getBold","(",")","\n","{","\n","return","font",".","getBoldWeight","(",")","==","BOLDWEIGHT_BOLD",";","\n"],"docstring_tokens":["get","if","the","font","is","bold","or","not"]}
{"code_tokens":["\n","public","String","format","(","Object","value",")","{","\n","StringBuffer","sb","=","new","StringBuffer","(",")",";","\n","formatValue","(","sb,","value",")",";","\n","return","sb",".","toString","(",")",";","\n"],"docstring_tokens":["Formats","the","value,","returning","the","resulting","string"]}
{"code_tokens":["\n","public","String","simpleFormat","(","Object","value",")","{","\n","StringBuffer","sb","=","new","StringBuffer","(",")",";","\n","simpleValue","(","sb,","value",")",";","\n","return","sb",".","toString","(",")",";","\n"],"docstring_tokens":["Formats","the","value","in","the","most","basic","way,","returning","the","resulting","string"]}
{"code_tokens":["\n","@Override\n","protected","void","onDocumentRead","(",")","throws","IOException","{","\n","NumberingDocument","numberingDoc",";","\n","InputStream","is",";","\n","is","=","getPackagePart","(",")",".","getInputStream","(",")",";","\n","try","{","\n","numberingDoc","=","NumberingDocument",".","Factory",".","parse","(","is,","DEFAULT_XML_OPTIONS",")",";","\n","ctNumbering","=","numberingDoc",".","getNumbering","(",")",";","\n","//get","any","Nums\n","for","(","CTNum","ctNum",":","ctNumbering",".","getNumArray","(",")",")","{","\n","nums",".","add","(","new","XWPFNum","(","ctNum,","this",")",")",";","\n","}","\n","for","(","CTAbstractNum","ctAbstractNum",":","ctNumbering",".","getAbstractNumArray","(",")",")","{","\n","abstractNums",".","add","(","new","XWPFAbstractNum","(","ctAbstractNum,","this",")",")",";","\n","}","\n","isNew","=","false",";","\n","}","catch","(","XmlException","e",")","{","\n","throw","new","POIXMLException","(",")",";","\n","}","finally","{","\n","is",".","close","(",")",";","\n","}","\n"],"docstring_tokens":["read","numbering","form","an","existing","package"]}
{"code_tokens":["\n","public","boolean","isCommitted","(",")","{","\n","return","isCommitted",";","\n"],"docstring_tokens":["to","check","whether","embedded","part","is","already","committed"]}
{"code_tokens":["\n","public","final","List<POIXMLDocumentPart>","getRelations","(",")","{","\n","List<POIXMLDocumentPart>","l","=","new","ArrayList<>","(",")",";","\n","for","(","RelationPart","rp",":","relations",".","values","(",")",")","{","\n","l",".","add","(","rp",".","getDocumentPart","(",")",")",";","\n","}","\n","return","Collections",".","unmodifiableList","(","l",")",";","\n"],"docstring_tokens":["Returns","the","list","of","child","relations","for","this","POIXMLDocumentPart"]}
{"code_tokens":["\n","public","final","RelationPart","addRelation","(","String","relId,","POIXMLRelation","relationshipType,","POIXMLDocumentPart","part",")","{","\n","PackageRelationship","pr","=","this",".","packagePart",".","findExistingRelation","(","part",".","getPackagePart","(",")",")",";","\n","if","(","pr","==","null",")","{","\n","PackagePartName","ppn","=","part",".","getPackagePart","(",")",".","getPartName","(",")",";","\n","String","relType","=","relationshipType",".","getRelation","(",")",";","\n","pr","=","packagePart",".","addRelationship","(","ppn,","TargetMode",".","INTERNAL,","relType,","relId",")",";","\n","}","\n","addRelation","(","pr,","part",")",";","\n","return","new","RelationPart","(","pr,","part",")",";","\n"],"docstring_tokens":["Add","a","new","child","POIXMLDocumentPart"]}
{"code_tokens":["\n","private","boolean","removeRelation","(","String","partId,","boolean","removeUnusedParts",")","{","\n","RelationPart","rp","=","relations",".","get","(","partId",")",";","\n","if","(","rp","==","null",")","{","\n","//","part","is","not","related","with","this","POIXMLDocumentPart\n","return","false",";","\n","}","\n","POIXMLDocumentPart","part","=","rp",".","getDocumentPart","(",")",";","\n","/*","decrement","usage","counter","*/\n","part",".","decrementRelationCounter","(",")",";","\n","/*","remove","packagepart","relationship","*/\n","getPackagePart","(",")",".","removeRelationship","(","partId",")",";","\n","/*","remove","POIXMLDocument","from","relations","*/\n","relations",".","remove","(","partId",")",";","\n\n","if","(","removeUnusedParts",")","{","\n","/*","if","last","relation","to","target","part","was","removed,","delete","according","target","part","*/\n","if","(","part",".","getRelationCounter","(",")","==","0",")","{","\n","try","{","\n","part",".","onDocumentRemove","(",")",";","\n","}","catch","(","IOException","e",")","{","\n","throw","new","POIXMLException","(","e",")",";","\n","}","\n","getPackagePart","(",")",".","getPackage","(",")",".","removePart","(","part",".","getPackagePart","(",")",")",";","\n","}","\n","}","\n","return","true",";","\n"],"docstring_tokens":["Remove","the","relation","to","the","specified","part","in","this","package","and","remove","the","part,","if","it","is","no","longer","needed","and","flag","is","set","to","true"]}
{"code_tokens":["\n","protected","final","void","onSave","(","Set<PackagePart>","alreadySaved",")","throws","IOException","{","\n","//if","part","is","already","committed","then","return\n","if","(","this",".","isCommitted",")","{","\n","return",";","\n","}","\n\n","//","this","usually","clears","out","previous","content","in","the","part",".",".",".","\n","prepareForCommit","(",")",";","\n\n","commit","(",")",";","\n","alreadySaved",".","add","(","this",".","getPackagePart","(",")",")",";","\n","for","(","RelationPart","rp",":","relations",".","values","(",")",")","{","\n","POIXMLDocumentPart","p","=","rp",".","getDocumentPart","(",")",";","\n","if","(","!alreadySaved",".","contains","(","p",".","getPackagePart","(",")",")",")","{","\n","p",".","onSave","(","alreadySaved",")",";","\n","}","\n","}","\n"],"docstring_tokens":["Save","changes","in","the","underlying","OOXML","package"]}
{"code_tokens":["\n","public","final","POIXMLDocumentPart","createRelationship","(","POIXMLRelation","descriptor,","POIXMLFactory","factory",")","{","\n","return","createRelationship","(","descriptor,","factory,","-1,","false",")",".","getDocumentPart","(",")",";","\n"],"docstring_tokens":["Create","a","new","child","POIXMLDocumentPart"]}
{"code_tokens":["\n","protected","void","onDocumentCreate","(",")","throws","IOException","{","\n\n"],"docstring_tokens":["Fired","when","a","new","package","part","is","created"]}
{"code_tokens":["\n","protected","void","onDocumentRead","(",")","throws","IOException","{","\n\n"],"docstring_tokens":["Fired","when","a","package","part","is","read"]}
{"code_tokens":["\n","protected","void","onDocumentRemove","(",")","throws","IOException","{","\n\n"],"docstring_tokens":["Fired","when","a","package","part","is","about","to","be","removed","from","the","package"]}
{"code_tokens":["\n","public","boolean","mapsTo","(","long","id",")","{","\n","List<XSSFXmlColumnPr>","pointers","=","getXmlColumnPrs","(",")",";","\n\n","for","(","XSSFXmlColumnPr","pointer:","pointers",")","{","\n","if","(","pointer",".","getMapId","(",")","==id",")","{","\n","return","true",";","\n","}","\n","}","\n\n","return","false",";","\n"],"docstring_tokens":["Checks","if","this","Table","element","contains","even","a","single","mapping","to","the","map","identified","by","id"]}
{"code_tokens":["\n","public","XSSFTableColumn","createColumn","(","String","columnName",")","{","\n","return","createColumn","(","columnName,","getColumnCount","(",")",")",";","\n"],"docstring_tokens":["Add","a","new","column","to","the","right","end","of","the","table"]}
{"code_tokens":["\n","public","void","setName","(","String","newName",")","{","\n","if","(","newName","==","null",")","{","\n","ctTable",".","unsetName","(",")",";","\n","name","=","null",";","\n","return",";","\n","}","\n","ctTable",".","setName","(","newName",")",";","\n","name","=","newName",";","\n"],"docstring_tokens":["Changes","the","name","of","the","Table"]}
{"code_tokens":["\n","public","void","setDisplayName","(","String","name",")","{","\n","if","(","name","==","null","||","name",".","isEmpty","(",")",")","{","\n","throw","new","IllegalArgumentException","(","\"Display","name","must","not","be","null","or","empty\"",")",";","\n","}","\n","ctTable",".","setDisplayName","(","name",")",";","\n"],"docstring_tokens":["Changes","the","display","name","of","the","Table"]}
{"code_tokens":["\n","@Override\n","public","int","getSignature","(",")","{","\n","return","(","getUIDInstanceCount","(",")","==","1","?","0x2160",":","0x2170",")",";","\n"],"docstring_tokens":["WMF","signature","is","either","0x2160","or","0x2170"]}
{"code_tokens":["\n","@Override\n","public","void","setSignature","(","int","signature",")","{","\n","switch","(","signature",")","{","\n","case","0x2160:\n","setUIDInstanceCount","(","1",")",";","\n","break",";","\n","case","0x2170:\n","setUIDInstanceCount","(","2",")",";","\n","break",";","\n","default:\n","throw","new","IllegalArgumentException","(","signature+\"","is","not","a","valid","instance/signature","value","for","WMF\"",")",";","\n","}","\n"],"docstring_tokens":["Sets","the","WMF","signature","-","either","0x2160","or","0x2170"]}
{"code_tokens":["\n","public","POIXMLDocumentPart","createDocumentPart","(","POIXMLDocumentPart","parent,","PackagePart","part",")","{","\n","final","PackageRelationship","rel","=","getPackageRelationship","(","parent,","part",")",";","\n","final","String","relType","=","rel",".","getRelationshipType","(",")",";","\n","final","POIXMLRelation","descriptor","=","getDescriptor","(","relType",")",";","\n\n","//","don't","parse","the","document","parts,","if","its","class","can't","be","determined\n","//","or","if","it's","a","package","relation","of","another","embedded","resource\n","try","{","\n","if","(","descriptor","!=","null","&&","!POIXMLDocument",".","PACK_OBJECT_REL_TYPE",".","equals","(","relType",")",")","{","\n","ParentPartConstructor","parentPartConstructor","=","descriptor",".","getParentPartConstructor","(",")",";","\n","if","(","parentPartConstructor","!=","null",")","{","\n","return","parentPartConstructor",".","init","(","parent,","part",")",";","\n","}","\n","PackagePartConstructor","packagePartConstructor","=","descriptor",".","getPackagePartConstructor","(",")",";","\n","if","(","packagePartConstructor","!=","null",")","{","\n","return","packagePartConstructor",".","init","(","part",")",";","\n","}","\n","}","\n\n","LOGGER",".","atDebug","(",")",".","log","(","\"using","default","POIXMLDocumentPart","for","{","}","\",","rel",".","getRelationshipType","(",")",")",";","\n","return","new","POIXMLDocumentPart","(","parent,","part",")",";","\n","}","catch","(","IOException","|","XmlException","e",")","{","\n","throw","new","POIXMLException","(","e",".","getMessage","(",")",",","e",")",";","\n","}","\n"],"docstring_tokens":["Create","a","POIXMLDocumentPart","from","existing","package","part","and","relation"]}
{"code_tokens":["\n","protected","PackageRelationship","getPackageRelationship","(","POIXMLDocumentPart","parent,","PackagePart","part",")","{","\n","try","{","\n","String","partName","=","part",".","getPartName","(",")",".","getName","(",")",";","\n","for","(","PackageRelationship","pr",":","parent",".","getPackagePart","(",")",".","getRelationships","(",")",")","{","\n","String","packName","=","pr",".","getTargetURI","(",")",".","toASCIIString","(",")",";","\n","if","(","packName",".","equalsIgnoreCase","(","partName",")",")","{","\n","return","pr",";","\n","}","\n","}","\n","}","catch","(","InvalidFormatException","e",")","{","\n","throw","new","POIXMLException","(","\"error","while","determining","package","relations\",","e",")",";","\n","}","\n\n","throw","new","POIXMLException","(","\"package","part","isn't","a","child","of","the","parent","document",".","\"",")",";","\n"],"docstring_tokens":["Retrieves","the","package","relationship","of","the","child","part","within","the","parent"]}
{"code_tokens":["\n","public","boolean","nameAlreadyExists","(","NameRecord","name",")","{","\n","//","Check","to","ensure","no","other","names","have","the","same","case-insensitive","name\n","for","(","int","i","=","getNumNames","(",")","-","1",";","i",">=","0",";","i--",")","{","\n","NameRecord","rec","=","getNameRecord","(","i",")",";","\n","if","(","rec","!=","name",")","{","\n","if","(","isDuplicatedNames","(","name,","rec",")",")","\n","return","true",";","\n","}","\n","}","\n","return","false",";","\n"],"docstring_tokens":["checks","if","the","given","name","is","already","included","in","the","linkTable"]}
{"code_tokens":["\n","public","NameXPtg","addNameXPtg","(","String","name",")","{","\n","int","extBlockIndex","=","-1",";","\n","ExternalBookBlock","extBlock","=","null",";","\n\n","//","find","ExternalBlock","for","Add-In","functions","and","remember","its","index\n","for","(","int","i","=","0",";","i","<","_externalBookBlocks",".","length",";","i++",")","{","\n","SupBookRecord","ebr","=","_externalBookBlocks[i]",".","getExternalBookRecord","(",")",";","\n","if","(","ebr",".","isAddInFunctions","(",")",")","{","\n","extBlock","=","_externalBookBlocks[i]",";","\n","extBlockIndex","=","i",";","\n","break",";","\n","}","\n","}","\n","//","An","ExternalBlock","for","Add-In","functions","was","not","found",".","Create","a","new","one",".","\n","if","(","extBlock","==","null",")","{","\n","extBlock","=","new","ExternalBookBlock","(",")",";","\n","extBlockIndex","=","extendExternalBookBlocks","(","extBlock",")",";","\n\n","//","add","the","created","SupBookRecord","before","ExternSheetRecord\n","int","idx","=","findFirstRecordLocBySid","(","ExternSheetRecord",".","sid",")",";","\n","_workbookRecordList",".","add","(","idx,","extBlock",".","getExternalBookRecord","(",")",")",";","\n\n","//","register","the","SupBookRecord","in","the","ExternSheetRecord\n","//","-2","means","that","the","scope","of","this","name","is","Workbook","and","the","reference","applies","to","the","entire","workbook",".","\n","_externSheetRecord",".","addRef","(","_externalBookBlocks",".","length","-","1,","-2,","-2",")",";","\n","}","\n\n","//","create","a","ExternalNameRecord","that","will","describe","this","name\n","ExternalNameRecord","extNameRecord","=","new","ExternalNameRecord","(",")",";","\n","extNameRecord",".","setText","(","name",")",";","\n","//","The","docs","don't","explain","why","Excel","set","the","formula","to","#REF!\n","extNameRecord",".","setParsedExpression","(","new","Ptg[]","{","ErrPtg",".","REF_INVALID","}",")",";","\n\n","int","nameIndex","=","extBlock",".","addExternalName","(","extNameRecord",")",";","\n","int","supLinkIndex","=","0",";","\n","//","find","the","posistion","of","the","Add-In","SupBookRecord","in","the","workbook","stream,\n","//","the","created","ExternalNameRecord","will","be","appended","to","it\n","for","(","org",".","apache",".","poi",".","hssf",".","record",".","Record","record",":","_workbookRecordList",".","getRecords","(",")",")","{","\n","if","(","record","instanceof","SupBookRecord","&&","(","(","SupBookRecord",")","record",")",".","isAddInFunctions","(",")",")","{","\n","break",";","\n","}","\n","supLinkIndex++",";","\n","}","\n","int","numberOfNames","=","extBlock",".","getNumberOfNames","(",")",";","\n","//","a","new","name","is","inserted","in","the","end","of","the","SupBookRecord,","after","the","last","name\n","_workbookRecordList",".","add","(","supLinkIndex","+","numberOfNames,","extNameRecord",")",";","\n","int","fakeSheetIdx","=","-2",";","/*","the","scope","is","workbook*/\n","int","ix","=","_externSheetRecord",".","getRefIxForSheet","(","extBlockIndex,","fakeSheetIdx,","fakeSheetIdx",")",";","\n","return","new","NameXPtg","(","ix,","nameIndex",")",";","\n"],"docstring_tokens":["Register","an","external","name","in","this","workbook"]}
{"code_tokens":["\n","@Override\n","public","TextPropCollection","getPropCollection","(","final","int","txtype,","final","int","level,","final","String","name,","final","boolean","isCharacter",")","{","\n","final","HSLFMasterSheet","master","=","getMasterSheet","(",")",";","\n","return","(","master","==","null",")","?","null",":","master",".","getPropCollection","(","txtype,","level,","name,","isCharacter",")",";","\n"],"docstring_tokens":["Delegate","the","call","to","the","underlying","slide","master"]}
{"code_tokens":["\n","@Override\n","public","HSLFMasterSheet","getMasterSheet","(",")","{","\n","SlideAtom","sa","=","(","(","org",".","apache",".","poi",".","hslf",".","record",".","Slide",")","getSheetContainer","(",")",")",".","getSlideAtom","(",")",";","\n","int","masterId","=","sa",".","getMasterID","(",")",";","\n","for","(","HSLFSlideMaster","sm",":","getSlideShow","(",")",".","getSlideMasters","(",")",")","{","\n","if","(","masterId","==","sm",".","_getSheetNumber","(",")",")","{","\n","return","sm",";","\n","}","\n","}","\n","return","null",";","\n"],"docstring_tokens":["Returns","the","slide","master","for","this","title","master"]}
{"code_tokens":["\n","public","int","allocateShapeId","(","EscherDgRecord","dg,","boolean","sort",")","{","\n","final","short","drawingGroupId","=","dg",".","getDrawingGroupId","(",")",";","\n","field_3_numShapesSaved++",";","\n\n","//","check","for","an","existing","cluster,","which","has","space","available\n","//","see","2",".","2",".","46","OfficeArtIDCL","(","cspidCur",")","for","the","1024","limitation\n","//","multiple","clusters","can","belong","to","the","same","drawing","group\n","FileIdCluster","ficAdd","=","null",";","\n","int","index","=","1",";","\n","for","(","FileIdCluster","fic",":","field_5_fileIdClusters",")","{","\n","if","(","fic",".","getDrawingGroupId","(",")","==","drawingGroupId\n","&&","fic",".","getNumShapeIdsUsed","(",")","<","1024",")","{","\n","ficAdd","=","fic",";","\n","break",";","\n","}","\n","index++",";","\n","}","\n\n","if","(","ficAdd","==","null",")","{","\n","ficAdd","=","addCluster","(","drawingGroupId,","0,","sort",")",";","\n","maxDgId","=","Math",".","max","(","maxDgId,","drawingGroupId",")",";","\n","}","\n\n","int","shapeId","=","index*1024","+","ficAdd",".","getNumShapeIdsUsed","(",")",";","\n","ficAdd",".","incrementUsedShapeId","(",")",";","\n\n","dg",".","setNumShapes","(","dg",".","getNumShapes","(",")","+","1",")",";","\n","dg",".","setLastMSOSPID","(","shapeId",")",";","\n","field_1_shapeIdMax","=","Math",".","max","(","field_1_shapeIdMax,","shapeId","+","1",")",";","\n\n","return","shapeId",";","\n"],"docstring_tokens":["Allocates","new","shape","id","for","the","drawing","group"]}
{"code_tokens":["\n","public","InputStream","getData","(",")","{","\n","if","(","isCompressed","(",")",")","{","\n","int","size","=","LittleEndian",".","getInt","(","_data",")",";","\n\n","InputStream","compressedStream","=","new","ByteArrayInputStream","(","_data,","4,","_data",".","length",")",";","\n","return","new","BoundedInputStream","(","new","InflaterInputStream","(","compressedStream",")",",","size",")",";","\n","}","else","{","\n","return","new","ByteArrayInputStream","(","_data,","0,","_data",".","length",")",";","\n","}","\n"],"docstring_tokens":["Opens","an","input","stream","which","will","decompress","the","data","on","the","fly"]}
{"code_tokens":["\n","public","void","setData","(","byte[]","data",")","throws","IOException","{","\n","try","(","UnsynchronizedByteArrayOutputStream","out","=","new","UnsynchronizedByteArrayOutputStream","(",")",";","\n","DeflaterOutputStream","def","=","new","DeflaterOutputStream","(","out",")",")","{","\n","//first","four","bytes","is","the","length","of","the","raw","data\n","byte[]","b","=","new","byte[4]",";","\n","LittleEndian",".","putInt","(","b,","0,","data",".","length",")",";","\n","out",".","write","(","b",")",";","\n\n","def",".","write","(","data,","0,","data",".","length",")",";","\n","def",".","finish","(",")",";","\n","//","TODO:","CHECK","if","it's","correct","that","DeflaterOutputStream","is","only","finished","and","not","closed?\n","_data","=","out",".","toByteArray","(",")",";","\n","LittleEndian",".","putInt","(","_header,","4,","_data",".","length",")",";","\n","}","\n"],"docstring_tokens":["Sets","the","embedded","data"]}
{"code_tokens":["\n","public","int","buildTextPropList","(","int","containsField,","byte[]","data,","int","dataOffset",")","{","\n","int","bytesPassed","=","0",";","\n\n","//","For","each","possible","entry,","see","if","we","match","the","mask\n","//","If","we","do,","decode","that,","save","it,","and","shuffle","on\n","for","(","TextProp","tp",":","getPotentialProperties","(",")",")","{","\n","//","Check","there's","still","data","left","to","read\n\n","//","Check","if","this","property","is","found","in","the","mask\n","if","(","(","containsField","&","tp",".","getMask","(",")",")","!=","0",")","{","\n","if","(","dataOffset+bytesPassed",">=","data",".","length",")","{","\n","//","Out","of","data,","can't","be","any","more","properties","to","go\n","//","remember","the","mask","and","return\n","maskSpecial","|=","tp",".","getMask","(",")",";","\n","return","bytesPassed",";","\n","}","\n\n","//","Bingo,","data","contains","this","property\n","TextProp","prop","=","tp",".","copy","(",")",";","\n","int","val","=","0",";","\n","if","(","prop","instanceof","HSLFTabStopPropCollection",")","{","\n","(","(","HSLFTabStopPropCollection",")","prop",")",".","parseProperty","(","data,","dataOffset+bytesPassed",")",";","\n","}","else","if","(","prop",".","getSize","(",")","==","2",")","{","\n","val","=","LittleEndian",".","getShort","(","data,dataOffset+bytesPassed",")",";","\n","}","else","if","(","prop",".","getSize","(",")","==","4",")","{","\n","val","=","LittleEndian",".","getInt","(","data,dataOffset+bytesPassed",")",";","\n","}","else","if","(","prop",".","getSize","(",")","==","0",")","{","\n","//remember","\"special\"","bits",".","\n","maskSpecial","|=","tp",".","getMask","(",")",";","\n","continue",";","\n","}","\n\n","if","(","prop","instanceof","BitMaskTextProp",")","{","\n","(","(","BitMaskTextProp",")","prop",")",".","setValueWithMask","(","val,","containsField",")",";","\n","}","else","if","(","!","(","prop","instanceof","HSLFTabStopPropCollection",")",")","{","\n","prop",".","setValue","(","val",")",";","\n","}","\n","bytesPassed","+=","prop",".","getSize","(",")",";","\n","addProp","(","prop",")",";","\n","}","\n","}","\n\n","//","Return","how","many","bytes","were","used\n","return","bytesPassed",";","\n"],"docstring_tokens":["For","an","existing","set","of","text","properties,","build","the","list","of","properties","coded","for","in","a","given","run","of","properties"]}
{"code_tokens":["\n","@Override\n","public","TextPropCollection","copy","(",")","{","\n","return","new","TextPropCollection","(","this",")",";","\n"],"docstring_tokens":["Clones","the","given","text","properties"]}
{"code_tokens":["\n","public","void","updateTextSize","(","int","textSize",")","{","\n","charactersCovered","=","textSize",";","\n"],"docstring_tokens":["Update","the","size","of","the","text","that","this","set","of","properties","applies","to"]}
{"code_tokens":["\n","public","void","writeOut","(","OutputStream","o,","boolean","isMasterStyle",")","throws","IOException","{","\n","if","(","!isMasterStyle",")","{","\n","//","First","goes","the","number","of","characters","we","affect\n","//","MasterStyles","don't","have","this","field\n","Record",".","writeLittleEndian","(","charactersCovered,o",")",";","\n","}","\n\n","//","Then","we","have","the","indentLevel","field","if","it's","a","paragraph","collection\n","if","(","textPropType","==","TextPropType",".","paragraph","&&","indentLevel",">","-1",")","{","\n","Record",".","writeLittleEndian","(","indentLevel,","o",")",";","\n","}","\n\n","//","Then","the","mask","field\n","int","mask","=","maskSpecial",";","\n","for","(","TextProp","textProp",":","textProps",".","values","(",")",")","{","\n","mask","|=","textProp",".","getWriteMask","(",")",";","\n","}","\n","Record",".","writeLittleEndian","(","mask,o",")",";","\n\n","//","Then","the","contents","of","all","the","properties\n","for","(","TextProp","textProp",":","getTextPropList","(",")",")","{","\n","int","val","=","textProp",".","getValue","(",")",";","\n","if","(","textProp","instanceof","BitMaskTextProp","&&","textProp",".","getWriteMask","(",")","==","0",")","{","\n","//","don't","add","empty","properties,","as","they","can't","be","recognized","while","reading\n","continue",";","\n","}","else","if","(","textProp",".","getSize","(",")","==","2",")","{","\n","Record",".","writeLittleEndian","(","(","short",")","val,o",")",";","\n","}","else","if","(","textProp",".","getSize","(",")","==","4",")","{","\n","Record",".","writeLittleEndian","(","val,o",")",";","\n","}","else","if","(","textProp","instanceof","HSLFTabStopPropCollection",")","{","\n","(","(","HSLFTabStopPropCollection",")","textProp",")",".","writeProperty","(","o",")",";","\n","}","\n","}","\n"],"docstring_tokens":["Writes","out","to","disk","the","header,","and","then","all","the","properties"]}
{"code_tokens":["\n","public","POIXMLTextExtractor","create","(","OPCPackage","pkg",")","throws","IOException","{","\n","try","{","\n","//","Check","for","the","normal","Office","core","document\n","PackageRelationshipCollection","core",";","\n","core","=","pkg",".","getRelationshipsByType","(","CORE_DOCUMENT_REL",")",";","\n\n","//","If","nothing","was","found,","try","some","of","the","other","OOXML-based","core","types\n","if","(","core",".","isEmpty","(",")",")","{","\n","//","Could","it","be","an","OOXML-Strict","one?\n","core","=","pkg",".","getRelationshipsByType","(","STRICT_DOCUMENT_REL",")",";","\n","}","\n","if","(","core",".","isEmpty","(",")",")","{","\n","//","Could","it","be","a","visio","one?\n","core","=","pkg",".","getRelationshipsByType","(","VISIO_DOCUMENT_REL",")",";","\n","if","(","core",".","size","(",")","==","1",")","{","\n","return","new","XDGFVisioExtractor","(","pkg",")",";","\n","}","\n","}","\n\n","//","Should","just","be","a","single","core","document,","complain","if","not\n","if","(","core",".","size","(",")","!=","1",")","{","\n","throw","new","IllegalArgumentException","(","\"Invalid","OOXML","Package","received","-","expected","1","core","document,","found","\"","+","core",".","size","(",")",")",";","\n","}","\n\n","//","Grab","the","core","document","part,","and","try","to","identify","from","that\n","final","PackagePart","corePart","=","pkg",".","getPart","(","core",".","getRelationship","(","0",")",")",";","\n","final","String","contentType","=","corePart",".","getContentType","(",")",";","\n\n","//","Is","it","XSSF?\n","for","(","XSSFRelation","rel",":","XSSFExcelExtractor",".","SUPPORTED_TYPES",")","{","\n","if","(","rel",".","getContentType","(",")",".","equals","(","contentType",")",")","{","\n","if","(","getPreferEventExtractor","(",")",")","{","\n","return","new","XSSFEventBasedExcelExtractor","(","pkg",")",";","\n","}","\n","return","new","XSSFExcelExtractor","(","pkg",")",";","\n","}","\n","}","\n\n","//","Is","it","XWPF?\n","for","(","XWPFRelation","rel",":","XWPFWordExtractor",".","SUPPORTED_TYPES",")","{","\n","if","(","rel",".","getContentType","(",")",".","equals","(","contentType",")",")","{","\n","return","new","XWPFWordExtractor","(","pkg",")",";","\n","}","\n","}","\n\n","//","Is","it","XSLF?\n","for","(","XSLFRelation","rel",":","SUPPORTED_XSLF_TYPES",")","{","\n","if","(","rel",".","getContentType","(",")",".","equals","(","contentType",")",")","{","\n","return","new","XSLFExtractor","(","new","XMLSlideShow","(","pkg",")",")",";","\n","}","\n","}","\n\n","//","special","handling","for","SlideShow-Theme-files,\n","if","(","XSLFRelation",".","THEME_MANAGER",".","getContentType","(",")",".","equals","(","contentType",")",")","{","\n","return","new","XSLFExtractor","(","new","XMLSlideShow","(","pkg",")",")",";","\n","}","\n\n","//","How","about","xlsb?\n","for","(","XSSFRelation","rel",":","XSSFBEventBasedExcelExtractor",".","SUPPORTED_TYPES",")","{","\n","if","(","rel",".","getContentType","(",")",".","equals","(","contentType",")",")","{","\n","return","new","XSSFBEventBasedExcelExtractor","(","pkg",")",";","\n","}","\n","}","\n\n","return","null",";","\n","}","catch","(","Error","|","RuntimeException","|","XmlException","|","OpenXML4JException","e",")","{","//","NOSONAR\n","throw","new","IOException","(","e",")",";","\n","}","\n","//","we","used","to","close","(","revert","(",")",")","the","package","here,","but","this","is","the","callers","responsibility\n","//","and","we","can't","reuse","the","package\n"],"docstring_tokens":["Tries","to","determine","the","actual","type","of","file","and","produces","a","matching","text-extractor","for","it"]}
{"code_tokens":["\n","public","void","decode","(",")","\n","{","\n","if","(","escherRecords",".","isEmpty","(",")",")","{","\n","byte[]","rawData","=","getRawData","(",")",";","\n","convertToEscherRecords","(","0,","rawData",".","length,","rawData",")",";","\n","}","\n"],"docstring_tokens":["Convert","raw","data","to","escher","records"]}
{"code_tokens":["\n","public","static","XSSFBCellRange","parse","(","byte[]","data,","int","offset,","XSSFBCellRange","cellRange",")","{","\n","if","(","cellRange","==","null",")","{","\n","cellRange","=","new","XSSFBCellRange","(",")",";","\n","}","\n","cellRange",".","firstRow","=","XSSFBUtils",".","castToInt","(","LittleEndian",".","getUInt","(","data,","offset",")",")",";","offset","+=","LittleEndianConsts",".","INT_SIZE",";","\n","cellRange",".","lastRow","=","XSSFBUtils",".","castToInt","(","LittleEndian",".","getUInt","(","data,","offset",")",")",";","offset","+=","LittleEndianConsts",".","INT_SIZE",";","\n","cellRange",".","firstCol","=","XSSFBUtils",".","castToInt","(","LittleEndian",".","getUInt","(","data,","offset",")",")",";","offset","+=","LittleEndianConsts",".","INT_SIZE",";","\n","cellRange",".","lastCol","=","XSSFBUtils",".","castToInt","(","LittleEndian",".","getUInt","(","data,","offset",")",")",";","\n\n","return","cellRange",";","\n"],"docstring_tokens":["Parses","an","RfX","cell","range","from","the","data","starting","at","the","offset"]}
{"code_tokens":["\n","public","short","getIndex","(",")","\n","{","\n","return","field_1_index",";","\n"],"docstring_tokens":["Get","the","index","field","for","the","SeriesIndex","record"]}
{"code_tokens":["\n","public","void","setIndex","(","short","field_1_index",")","\n","{","\n","this",".","field_1_index","=","field_1_index",";","\n"],"docstring_tokens":["Set","the","index","field","for","the","SeriesIndex","record"]}
{"code_tokens":["\n","protected","static","CTGraphicalObjectFrame","prototype","(",")","{","\n","if","(","prototype","==","null",")","{","\n","CTGraphicalObjectFrame","graphicFrame","=","CTGraphicalObjectFrame",".","Factory",".","newInstance","(",")",";","\n\n","CTGraphicalObjectFrameNonVisual","nvGraphic","=","graphicFrame",".","addNewNvGraphicFramePr","(",")",";","\n","CTNonVisualDrawingProps","props","=","nvGraphic",".","addNewCNvPr","(",")",";","\n","props",".","setId","(","0",")",";","\n","props",".","setName","(","\"Diagramm","1\"",")",";","\n","nvGraphic",".","addNewCNvGraphicFramePr","(",")",";","\n\n","CTTransform2D","transform","=","graphicFrame",".","addNewXfrm","(",")",";","\n","CTPositiveSize2D","extPoint","=","transform",".","addNewExt","(",")",";","\n","CTPoint2D","offPoint","=","transform",".","addNewOff","(",")",";","\n\n","extPoint",".","setCx","(","0",")",";","\n","extPoint",".","setCy","(","0",")",";","\n","offPoint",".","setX","(","0",")",";","\n","offPoint",".","setY","(","0",")",";","\n\n","/*","CTGraphicalObject","graphic","=","*/","graphicFrame",".","addNewGraphic","(",")",";","\n\n","prototype","=","graphicFrame",";","\n","}","\n","return","prototype",";","\n"],"docstring_tokens":["Initialize","default","structure","of","a","new","graphic","frame"]}
{"code_tokens":["\n","@Override\n","public","XSSFClientAnchor","getAnchor","(",")","{","\n","return","(","XSSFClientAnchor",")","anchor",";","\n"],"docstring_tokens":["Returns","the","frame","anchor"]}
{"code_tokens":["\n","protected","void","setChart","(","XSSFChart","chart,","String","relId",")","{","\n","CTGraphicalObjectData","data","=","graphicFrame",".","getGraphic","(",")",".","addNewGraphicData","(",")",";","\n","appendChartElement","(","data,","relId",")",";","\n","chart",".","setGraphicFrame","(","this",")",";","\n"],"docstring_tokens":["Assign","a","DrawingML","chart","to","the","graphic","frame"]}
{"code_tokens":["\n","public","static","AreaReference[]","generateContiguous","(","SpreadsheetVersion","version,","String","reference",")","{","\n","if","(","null","==","version",")","{","\n","version","=","DEFAULT_SPREADSHEET_VERSION",";","//","how","the","code","used","to","behave",".","\n","}","\n","List<AreaReference>","refs","=","new","ArrayList<>","(",")",";","\n","String[]","splitReferences","=","splitAreaReferences","(","reference",")",";","\n","for","(","String","ref",":","splitReferences",")","{","\n","refs",".","add","(","new","AreaReference","(","ref,","version",")",")",";","\n","}","\n","return","refs",".","toArray","(","new","AreaReference[0]",")",";","\n"],"docstring_tokens":["Takes","a","non-contiguous","area","reference,","and","returns","an","array","of","contiguous","area","references"]}
{"code_tokens":["\n","public","CellReference[]","getAllReferencedCells","(",")","{","\n","//","Special","case","for","single","cell","reference\n","if","(","_isSingleCell",")","{","\n","return","new","CellReference[]","{","_firstCell,","}",";","\n","}","\n\n","//","Interpolate","between","the","two\n","int","minRow","=","Math",".","min","(","_firstCell",".","getRow","(",")",",","_lastCell",".","getRow","(",")",")",";","\n","int","maxRow","=","Math",".","max","(","_firstCell",".","getRow","(",")",",","_lastCell",".","getRow","(",")",")",";","\n","int","minCol","=","Math",".","min","(","_firstCell",".","getCol","(",")",",","_lastCell",".","getCol","(",")",")",";","\n","int","maxCol","=","Math",".","max","(","_firstCell",".","getCol","(",")",",","_lastCell",".","getCol","(",")",")",";","\n","String","sheetName","=","_firstCell",".","getSheetName","(",")",";","\n\n","List<CellReference>","refs","=","new","ArrayList<>","(",")",";","\n","for","(","int","row=minRow",";","row<=maxRow",";","row++",")","{","\n","for","(","int","col=minCol",";","col<=maxCol",";","col++",")","{","\n","CellReference","ref","=","new","CellReference","(","sheetName,","row,","col,","_firstCell",".","isRowAbsolute","(",")",",","_firstCell",".","isColAbsolute","(",")",")",";","\n","refs",".","add","(","ref",")",";","\n","}","\n","}","\n","return","refs",".","toArray","(","new","CellReference[0]",")",";","\n"],"docstring_tokens":["Returns","a","reference","to","every","cell","covered","by","this","area"]}
{"code_tokens":["\n","public","void","validate","(","SpreadsheetVersion","ssVersion",")","{","\n","validateRow","(","_firstRow,","ssVersion",")",";","\n","validateRow","(","_lastRow,","ssVersion",")",";","\n","validateColumn","(","_firstCol,","ssVersion",")",";","\n","validateColumn","(","_lastCol,","ssVersion",")",";","\n"],"docstring_tokens":["Validate","the","range","limits","against","the","supplied","version","of","Excel"]}
{"code_tokens":["\n","public","boolean","containsRow","(","int","rowInd",")","{","\n","return","_firstRow","<=","rowInd","&&","rowInd","<=","_lastRow",";","\n"],"docstring_tokens":["Check","if","the","row","is","in","the","specified","cell","range"]}
{"code_tokens":["\n","public","boolean","containsColumn","(","int","colInd",")","{","\n","return","_firstCol","<=","colInd","&&","colInd","<=","_lastCol",";","\n"],"docstring_tokens":["Check","if","the","column","is","in","the","specified","cell","range"]}
{"code_tokens":["\n","@Override\n","public","Iterator<CellAddress>","iterator","(",")","{","\n","return","new","RowMajorCellAddressIterator","(","this",")",";","\n"],"docstring_tokens":["Returns","an","iterator","over","the","CellAddresses","in","this","cell","range","in","row-major","order"]}
{"code_tokens":["\n","@Override\n","public","Spliterator<CellAddress>","spliterator","(",")","{","\n","return","Spliterators",".","spliterator","(","iterator","(",")",",","getNumberOfCells","(",")",",","0",")",";","\n"],"docstring_tokens":["Returns","a","spliterator","over","the","CellAddresses","in","this","cell","range","in","row-major","order"]}
{"code_tokens":["\n","@Override\n","public","void","record","(","Chunk","chunk",")","{","\n","if","(","chunk",".","getType","(",")","==","Types",".","BINARY",")","{","\n","switch","(","chunk",".","getChunkId","(",")",")","{","\n","case","2:\n","guidStream","=","(","ByteChunk",")","chunk",";","\n","break",";","\n","case","3:\n","entryStream","=","(","ByteChunk",")","chunk",";","\n","break",";","\n","case","4:\n","stringStream","=","(","ByteChunk",")","chunk",";","\n","break",";","\n","}","\n","}","\n","allChunks",".","add","(","chunk",")",";","\n"],"docstring_tokens":["Called","by","the","parser","whenever","a","chunk","is","found"]}
{"code_tokens":["\n","public","long","getPropertyTag","(","ClassID","guid,","String","name,","long","id",")","{","\n","final","byte[]","entryStreamBytes","=","(","entryStream","==","null",")","?","null",":","entryStream",".","getValue","(",")",";","\n","if","(","guidStream","==","null","||","entryStream","==","null","||","stringStream","==","null","||","guid","==","null","||\n","entryStreamBytes","==","null",")","{","\n","return","0",";","\n","}","\n\n","LittleEndianByteArrayInputStream","leis","=","new","LittleEndianByteArrayInputStream","(","entryStreamBytes",")",";","\n","for","(","int","i","=","0",";","i","<","entryStreamBytes",".","length","/","8",";","i++",")","{","\n","final","long","nameOffset","=","leis",".","readUInt","(",")",";","\n","int","guidIndex","=","leis",".","readUShort","(",")",";","\n","final","int","propertyKind","=","guidIndex","&","0x01",";","\n","guidIndex","=","guidIndex",">>>","1",";","\n","final","int","propertyIndex","=","leis",".","readUShort","(",")",";","\n\n","//","fetch","and","match","property","GUID\n","if","(","!guid",".","equals","(","getPropertyGUID","(","guidIndex",")",")",")","{","\n","continue",";","\n","}","\n\n","//","fetch","property","name","/","stream","ID\n","final","String[]","propertyName","=","{","null","}",";","\n","final","long[]","propertyNameCRC32","=","{","-1L","}",";","\n","long","streamID","=","getStreamID","(","propertyKind,","(","int",")","nameOffset,","guid,","guidIndex,\n","n","->","propertyName[0]","=","n,","c","->","propertyNameCRC32[0]","=","c",")",";","\n\n","if","(","!matchesProperty","(","propertyKind,","nameOffset,","name,","propertyName[0],","id",")",")","{","\n","continue",";","\n","}","\n\n","//","find","property","index","in","matching","stream","entry\n","if","(","propertyKind","==","1","&&","propertyNameCRC32[0]","<","0",")","{","\n","//","skip","stream","entry","matching","and","return","tag","from","property","index","from","entry","stream\n","//","this","code","should","not","be","reached\n","return","0x8000L","+","propertyIndex",";","\n","}","\n\n","return","getPropertyTag","(","streamID,","nameOffset,","propertyNameCRC32[0]",")",";","\n","}","\n","return","0",";","\n"],"docstring_tokens":["Get","property","tag","id","by","property","set","GUID","and","string","name","or","numerical","name","from","named","properties","mapping"]}
{"code_tokens":["\n","public","void","dump","(","byte[]","data,","int","offset,","int","size,","PrintStream","out",")","{","\n","EscherRecordFactory","recordFactory","=","new","DefaultEscherRecordFactory","(",")",";","\n","int","pos","=","offset",";","\n","while","(","pos","<","offset","+","size",")","\n","{","\n","EscherRecord","r","=","recordFactory",".","createRecord","(","data,","pos",")",";","\n","int","bytesRead","=","r",".","fillFields","(","data,","pos,","recordFactory",")",";","\n","out",".","println","(","r",")",";","\n","pos","+=","bytesRead",";","\n","}","\n"],"docstring_tokens":["Decodes","the","escher","stream","from","a","byte","array","and","dumps","the","results","to","a","print","stream"]}
{"code_tokens":["\n","public","Date","calculateWorkdays","(","double","start,","int","workdays,","int","weekendType,","double[]","holidays",")","{","\n","Set<Integer>","weekendDays","=","weekendTypeMap",".","getOrDefault","(","weekendType,","standardWeekend",")",";","\n","Date","startDate","=","DateUtil",".","getJavaDate","(","start",")",";","\n","int","direction","=","workdays","<","0","?","-1",":","1",";","\n","Calendar","endDate","=","LocaleUtil",".","getLocaleCalendar","(",")",";","\n","endDate",".","setTime","(","startDate",")",";","\n","double","excelEndDate","=","DateUtil",".","getExcelDate","(","endDate",".","getTime","(",")",")",";","\n","while","(","workdays","!=","0",")","{","\n","endDate",".","add","(","Calendar",".","DAY_OF_YEAR,","direction",")",";","\n","excelEndDate","+=","direction",";","\n","if","(","!isWeekend","(","endDate,","weekendDays",")","&&","!isHoliday","(","excelEndDate,","holidays",")",")","{","\n","workdays","-=","direction",";","\n","}","\n","}","\n","return","endDate",".","getTime","(",")",";","\n"],"docstring_tokens":["Calculate","the","workday","past","x","workdays","from","a","starting","date,","considering","a","range","of","holidays"]}
{"code_tokens":["\n","protected","int","pastDaysOfWeek","(","double","start,","double","end,","int","dayOfWeek",")","{","\n","int","pastDaysOfWeek","=","0",";","\n","int","startDay","=","(","int",")","Math",".","floor","(","start","<","end","?","start",":","end",")",";","\n","int","endDay","=","(","int",")","Math",".","floor","(","end",">","start","?","end",":","start",")",";","\n","for","(",";","startDay","<=","endDay",";","startDay++",")","{","\n","Calendar","today","=","LocaleUtil",".","getLocaleCalendar","(",")",";","\n","today",".","setTime","(","DateUtil",".","getJavaDate","(","startDay",")",")",";","\n","if","(","today",".","get","(","Calendar",".","DAY_OF_WEEK",")","==","dayOfWeek",")","{","\n","pastDaysOfWeek++",";","\n","}","\n","}","\n","return","start","<=","end","?","pastDaysOfWeek",":","-pastDaysOfWeek",";","\n"],"docstring_tokens":["Calculates","how","many","days","of","week","past","between","a","start","and","an","end","date"]}
{"code_tokens":["\n","protected","int","calculateNonWeekendHolidays","(","double","start,","double","end,","double[]","holidays",")","{","\n","int","nonWeekendHolidays","=","0",";","\n","double","startDay","=","start","<","end","?","start",":","end",";","\n","double","endDay","=","end",">","start","?","end",":","start",";","\n","for","(","double","holiday",":","holidays",")","{","\n","if","(","isInARange","(","startDay,","endDay,","holiday",")",")","{","\n","if","(","!isWeekend","(","holiday",")",")","{","\n","nonWeekendHolidays++",";","\n","}","\n","}","\n","}","\n","return","start","<=","end","?","nonWeekendHolidays",":","-nonWeekendHolidays",";","\n"],"docstring_tokens":["Calculates","how","many","holidays","in","a","list","are","workdays,","considering","an","interval","of","dates"]}
{"code_tokens":["\n","@Override\n","public","SXSSFRow","createRow","(","int","rownum",")","{","\n","int","maxrow","=","SpreadsheetVersion",".","EXCEL2007",".","getLastRowIndex","(",")",";","\n","if","(","rownum","<","0","||","rownum",">","maxrow",")","{","\n","throw","new","IllegalArgumentException","(","\"Invalid","row","number","(","\"","+","rownum\n","+","\"",")","outside","allowable","range","(","0",".",".","\"","+","maxrow","+","\"",")","\"",")",";","\n","}","\n\n","//","attempt","to","overwrite","a","row","that","is","already","flushed","to","disk\n","if","(","_writer","!=","null","&&","rownum","<=","_writer",".","getLastFlushedRow","(",")",")","{","\n","throw","new","IllegalArgumentException","(","\n","\"Attempting","to","write","a","row[\"+rownum+\"]","\"","+\n","\"in","the","range","[0,\"","+","_writer",".","getLastFlushedRow","(",")","+","\"]","that","is","already","written","to","disk",".","\"",")",";","\n","}","\n\n","//","attempt","to","overwrite","a","existing","row","in","the","input","template\n","if","(","_sh",".","getPhysicalNumberOfRows","(",")",">","0","&&","rownum","<=","_sh",".","getLastRowNum","(",")",")","{","\n","throw","new","IllegalArgumentException","(","\n","\"Attempting","to","write","a","row[\"+rownum+\"]","\"","+\n","\"in","the","range","[0,\"","+","_sh",".","getLastRowNum","(",")","+","\"]","that","is","already","written","to","disk",".","\"",")",";","\n","}","\n\n","SXSSFRow","newRow","=","new","SXSSFRow","(","this",")",";","\n","newRow",".","setRowNumWithoutUpdatingSheet","(","rownum",")",";","\n","_rows",".","put","(","rownum,","newRow",")",";","\n","allFlushed","=","false",";","\n","if","(","_randomAccessWindowSize",">=","0","&&","_rows",".","size","(",")",">","_randomAccessWindowSize",")","{","\n","try","{","\n","flushRows","(","_randomAccessWindowSize",")",";","\n","}","catch","(","IOException","ioe",")","{","\n","throw","new","RuntimeException","(","ioe",")",";","\n","}","\n","}","\n","return","newRow",";","\n"],"docstring_tokens":["Create","a","new","row","within","the","sheet","and","return","the","high","level","representation"]}
{"code_tokens":["\n","@Override\n","public","void","removeRow","(","Row","row",")","{","\n","if","(","row",".","getSheet","(",")","!=","this",")","{","\n","throw","new","IllegalArgumentException","(","\"Specified","row","does","not","belong","to","this","sheet\"",")",";","\n","}","\n\n","for","(","Iterator<Map",".","Entry<Integer,","SXSSFRow>>","iter","=","_rows",".","entrySet","(",")",".","iterator","(",")",";","iter",".","hasNext","(",")",";",")","{","\n","Map",".","Entry<Integer,","SXSSFRow>","entry","=","iter",".","next","(",")",";","\n","if","(","entry",".","getValue","(",")","==","row",")","{","\n","iter",".","remove","(",")",";","\n","return",";","\n","}","\n","}","\n"],"docstring_tokens":["Remove","a","row","from","this","sheet"]}
{"code_tokens":["\n","@Override\n","@SuppressWarnings","(","\"unchecked\"",")","\n","public","Spliterator<Row>","spliterator","(",")","{","\n","return","(","Spliterator<Row>",")","(","Spliterator<?","extends","Row>",")","_rows",".","values","(",")",".","spliterator","(",")",";","\n"],"docstring_tokens":["Returns","a","spliterator","of","the","physical","rows"]}
{"code_tokens":["\n","public","void","addStyle","(","XWPFStyle","style",")","{","\n","listStyle",".","add","(","style",")",";","\n","ctStyles",".","addNewStyle","(",")",";","\n","int","pos","=","ctStyles",".","sizeOfStyleArray","(",")","-","1",";","\n","ctStyles",".","setStyleArray","(","pos,","style",".","getCTStyle","(",")",")",";","\n"],"docstring_tokens":["add","a","style","to","the","document"]}
{"code_tokens":["\n","protected","void","attach","(","String","chartRelId,","XWPFRun","run",")","\n","throws","InvalidFormatException,","IOException","{","\n","ctInline","=","run",".","addChart","(","chartRelId",")",";","\n","ctInline",".","addNewExtent","(",")",";","\n","setChartBoundingBox","(","DEFAULT_WIDTH,","DEFAULT_HEIGHT",")",";","\n"],"docstring_tokens":["Attach","this","chart","known","by","its","relation","id","to","the","given","text","run"]}
{"code_tokens":["\n","public","void","setChartBoundingBox","(","long","width,","long","height",")","{","\n","this",".","setChartWidth","(","width",")",";","\n","this",".","setChartHeight","(","height",")",";","\n"],"docstring_tokens":["set","chart","height","and","width"]}
{"code_tokens":["\n","public","static","Color","HSL2RGB","(","double","h,","double","s,","double","l,","double","alpha",")","{","\n","//","we","clamp","the","values,","as","it","possible","to","come","up","with","more","than","100%","sat/lum\n","//","(","see","links","in","applyColorTransform","(",")","for","more","info",")","\n","s","=","Math",".","max","(","0,","Math",".","min","(","100,","s",")",")",";","\n","l","=","Math",".","max","(","0,","Math",".","min","(","100,","l",")",")",";","\n\n","if","(","alpha","<0",".","0f","||","alpha",">","1",".","0f",")","{","\n","String","message","=","\"Color","parameter","outside","of","expected","range","-","Alpha:","\"","+","alpha",";","\n","throw","new","IllegalArgumentException","(","message",")",";","\n","}","\n\n","//","Formula","needs","all","values","between","0","-","1",".","\n\n","h","=","h","%","360",".","0f",";","\n","h","/=","360f",";","\n","s","/=","100f",";","\n","l","/=","100f",";","\n\n","double","q","=","(","l","<","0",".","5d",")","\n","?","l","*","(","1d","+","s",")","\n",":","(","l","+","s",")","-","(","s","*","l",")",";","\n\n","double","p","=","2d","*","l","-","q",";","\n\n","double","r","=","Math",".","max","(","0,","HUE2RGB","(","p,","q,","h","+","(","1",".","0d","/","3",".","0d",")",")",")",";","\n","double","g","=","Math",".","max","(","0,","HUE2RGB","(","p,","q,","h",")",")",";","\n","double","b","=","Math",".","max","(","0,","HUE2RGB","(","p,","q,","h","-","(","1",".","0d","/","3",".","0d",")",")",")",";","\n\n","r","=","Math",".","min","(","r,","1",".","0d",")",";","\n","g","=","Math",".","min","(","g,","1",".","0d",")",";","\n","b","=","Math",".","min","(","b,","1",".","0d",")",";","\n\n","return","new","Color","(","(","float",")","r,","(","float",")","g,","(","float",")","b,","(","float",")","alpha",")",";","\n"],"docstring_tokens":["Convert","HSL","values","to","a","RGB","Color"]}
{"code_tokens":["\n","public","static","double[]","RGB2HSL","(","Color","color",")","{","\n","//","Get","RGB","values","in","the","range","0","-","1\n\n","float[]","rgb","=","color",".","getRGBColorComponents","(","null",")",";","\n","double","r","=","rgb[0]",";","\n","double","g","=","rgb[1]",";","\n","double","b","=","rgb[2]",";","\n\n","//","Minimum","and","Maximum","RGB","values","are","used","in","the","HSL","calculations\n\n","double","min","=","Math",".","min","(","r,","Math",".","min","(","g,","b",")",")",";","\n","double","max","=","Math",".","max","(","r,","Math",".","max","(","g,","b",")",")",";","\n\n","//","Calculate","the","Hue\n\n","double","h","=","0",";","\n\n","if","(","max","==","min",")","{","\n","h","=","0",";","\n","}","else","if","(","max","==","r",")","{","\n","h","=","(","(","60d","*","(","g","-","b",")","/","(","max","-","min",")",")","+","360d",")","%","360d",";","\n","}","else","if","(","max","==","g",")","{","\n","h","=","(","60d","*","(","b","-","r",")","/","(","max","-","min",")",")","+","120d",";","\n","}","else","if","(","max","==","b",")","{","\n","h","=","(","60d","*","(","r","-","g",")","/","(","max","-","min",")",")","+","240d",";","\n","}","\n\n","//","Calculate","the","Luminance\n\n","double","l","=","(","max","+","min",")","/","2d",";","\n\n","//","Calculate","the","Saturation\n\n","final","double","s",";","\n\n","if","(","max","==","min",")","{","\n","s","=","0",";","\n","}","else","if","(","l","<=",".","5d",")","{","\n","s","=","(","max","-","min",")","/","(","max","+","min",")",";","\n","}","else","{","\n","s","=","(","max","-","min",")","/","(","2d","-","max","-","min",")",";","\n","}","\n\n","return","new","double[]","{","h,","s","*","100,","l","*","100","}",";","\n"],"docstring_tokens":["Convert","a","RGB","Color","to","it","corresponding","HSL","values"]}
{"code_tokens":["\n","@Override\n","public","HSLFObjectData","getObjectData","(",")","{","\n","HSLFSlideShow","ppt","=","getSheet","(",")",".","getSlideShow","(",")",";","\n","HSLFObjectData[]","ole","=","ppt",".","getEmbeddedObjects","(",")",";","\n\n","//persist","reference\n","ExEmbed","exEmbed","=","getExEmbed","(",")",";","\n","HSLFObjectData","data","=","null",";","\n","if","(","exEmbed","!=","null",")","{","\n","int","ref","=","exEmbed",".","getExOleObjAtom","(",")",".","getObjStgDataRef","(",")",";","\n\n","for","(","HSLFObjectData","hod",":","ole",")","{","\n","if","(","hod",".","getExOleObjStg","(",")",".","getPersistId","(",")","==","ref",")","{","\n","data=hod",";","\n","//","keep","searching","to","return","the","last","persistent","object","with","that","refId\n","}","\n","}","\n","}","\n","if","(","data==null",")","{","\n","LOG",".","atWarn","(",")",".","log","(","\"OLE","data","not","found\"",")",";","\n","}","\n\n","return","data",";","\n"],"docstring_tokens":["Returns","unique","identifier","for","the","OLE","object"]}
{"code_tokens":["\n","public","String","getInstanceName","(",")","{","\n","ExEmbed","ee","=","getExEmbed","(",")",";","\n","return","(","ee","==","null",")","?","null",":","ee",".","getMenuName","(",")",";","\n"],"docstring_tokens":["Returns","the","instance","name","of","the","embedded","object,","e.g"]}
{"code_tokens":["\n","static","void","sameCell","(","Sheet","sheet",")","{","\n","sheet",".","createRow","(","0",")",".","createCell","(","0",")",".","setCellValue","(","84",")",";","\n","sheet",".","createRow","(","1",")",".","createCell","(","0",")",".","setCellValue","(","74",")",";","\n","sheet",".","createRow","(","2",")",".","createCell","(","0",")",".","setCellValue","(","50",")",";","\n","sheet",".","createRow","(","3",")",".","createCell","(","0",")",".","setCellValue","(","51",")",";","\n","sheet",".","createRow","(","4",")",".","createCell","(","0",")",".","setCellValue","(","49",")",";","\n","sheet",".","createRow","(","5",")",".","createCell","(","0",")",".","setCellValue","(","41",")",";","\n\n","SheetConditionalFormatting","sheetCF","=","sheet",".","getSheetConditionalFormatting","(",")",";","\n\n","//","Condition","1:","Cell","Value","Is","greater","than","70","(","Blue","Fill",")","\n","ConditionalFormattingRule","rule1","=","sheetCF",".","createConditionalFormattingRule","(","ComparisonOperator",".","GT,","\"70\"",")",";","\n","PatternFormatting","fill1","=","rule1",".","createPatternFormatting","(",")",";","\n","fill1",".","setFillBackgroundColor","(","IndexedColors",".","BLUE",".","index",")",";","\n","fill1",".","setFillPattern","(","PatternFormatting",".","SOLID_FOREGROUND",")",";","\n\n","//","Condition","2:","Cell","Value","Is","less","than","50","(","Green","Fill",")","\n","ConditionalFormattingRule","rule2","=","sheetCF",".","createConditionalFormattingRule","(","ComparisonOperator",".","LT,","\"50\"",")",";","\n","PatternFormatting","fill2","=","rule2",".","createPatternFormatting","(",")",";","\n","fill2",".","setFillBackgroundColor","(","IndexedColors",".","GREEN",".","index",")",";","\n","fill2",".","setFillPattern","(","PatternFormatting",".","SOLID_FOREGROUND",")",";","\n\n","CellRangeAddress[]","regions","=","{","\n","CellRangeAddress",".","valueOf","(","\"A1:A6\"",")","\n","}",";","\n\n","sheetCF",".","addConditionalFormatting","(","regions,","rule1,","rule2",")",";","\n\n","sheet",".","getRow","(","0",")",".","createCell","(","2",")",".","setCellValue","(","\"<==","Condition","1:","Cell","Value","Is","greater","than","70","(","Blue","Fill",")","\"",")",";","\n","sheet",".","getRow","(","4",")",".","createCell","(","2",")",".","setCellValue","(","\"<==","Condition","2:","Cell","Value","Is","less","than","50","(","Green","Fill",")","\"",")",";","\n"],"docstring_tokens":["Highlight","cells","based","on","their","values"]}
{"code_tokens":["\n","static","void","formatDuplicates","(","Sheet","sheet",")","{","\n","sheet",".","createRow","(","0",")",".","createCell","(","0",")",".","setCellValue","(","\"Code\"",")",";","\n","sheet",".","createRow","(","1",")",".","createCell","(","0",")",".","setCellValue","(","4",")",";","\n","sheet",".","createRow","(","2",")",".","createCell","(","0",")",".","setCellValue","(","3",")",";","\n","sheet",".","createRow","(","3",")",".","createCell","(","0",")",".","setCellValue","(","6",")",";","\n","sheet",".","createRow","(","4",")",".","createCell","(","0",")",".","setCellValue","(","3",")",";","\n","sheet",".","createRow","(","5",")",".","createCell","(","0",")",".","setCellValue","(","5",")",";","\n","sheet",".","createRow","(","6",")",".","createCell","(","0",")",".","setCellValue","(","8",")",";","\n","sheet",".","createRow","(","7",")",".","createCell","(","0",")",".","setCellValue","(","0",")",";","\n","sheet",".","createRow","(","8",")",".","createCell","(","0",")",".","setCellValue","(","2",")",";","\n","sheet",".","createRow","(","9",")",".","createCell","(","0",")",".","setCellValue","(","8",")",";","\n","sheet",".","createRow","(","10",")",".","createCell","(","0",")",".","setCellValue","(","6",")",";","\n\n","SheetConditionalFormatting","sheetCF","=","sheet",".","getSheetConditionalFormatting","(",")",";","\n\n","//","Condition","1:","Formula","Is","=A2=A1","(","White","Font",")","\n","ConditionalFormattingRule","rule1","=","sheetCF",".","createConditionalFormattingRule","(","\"COUNTIF","(","$A$2:$A$11,A2",")",">1\"",")",";","\n","FontFormatting","font","=","rule1",".","createFontFormatting","(",")",";","\n","font",".","setFontStyle","(","false,","true",")",";","\n","font",".","setFontColorIndex","(","IndexedColors",".","BLUE",".","index",")",";","\n\n","CellRangeAddress[]","regions","=","{","\n","CellRangeAddress",".","valueOf","(","\"A2:A11\"",")","\n","}",";","\n\n","sheetCF",".","addConditionalFormatting","(","regions,","rule1",")",";","\n\n","sheet",".","getRow","(","2",")",".","createCell","(","1",")",".","setCellValue","(","\"<==","Duplicates","numbers","in","the","column","are","highlighted",".","\"","+\n","\"Condition:","Formula","Is","=COUNTIF","(","$A$2:$A$11,A2",")",">1","(","Blue","Font",")","\"",")",";","\n"],"docstring_tokens":["Use","Excel","conditional","formatting","to","highlight","duplicate","entries","in","a","column"]}
{"code_tokens":["\n","static","void","inList","(","Sheet","sheet",")","{","\n","sheet",".","createRow","(","0",")",".","createCell","(","0",")",".","setCellValue","(","\"Codes\"",")",";","\n","sheet",".","createRow","(","1",")",".","createCell","(","0",")",".","setCellValue","(","\"AA\"",")",";","\n","sheet",".","createRow","(","2",")",".","createCell","(","0",")",".","setCellValue","(","\"BB\"",")",";","\n","sheet",".","createRow","(","3",")",".","createCell","(","0",")",".","setCellValue","(","\"GG\"",")",";","\n","sheet",".","createRow","(","4",")",".","createCell","(","0",")",".","setCellValue","(","\"AA\"",")",";","\n","sheet",".","createRow","(","5",")",".","createCell","(","0",")",".","setCellValue","(","\"FF\"",")",";","\n","sheet",".","createRow","(","6",")",".","createCell","(","0",")",".","setCellValue","(","\"XX\"",")",";","\n","sheet",".","createRow","(","7",")",".","createCell","(","0",")",".","setCellValue","(","\"CC\"",")",";","\n\n","sheet",".","getRow","(","0",")",".","createCell","(","2",")",".","setCellValue","(","\"Valid\"",")",";","\n","sheet",".","getRow","(","1",")",".","createCell","(","2",")",".","setCellValue","(","\"AA\"",")",";","\n","sheet",".","getRow","(","2",")",".","createCell","(","2",")",".","setCellValue","(","\"BB\"",")",";","\n","sheet",".","getRow","(","3",")",".","createCell","(","2",")",".","setCellValue","(","\"CC\"",")",";","\n\n","SheetConditionalFormatting","sheetCF","=","sheet",".","getSheetConditionalFormatting","(",")",";","\n\n","//","Condition","1:","Formula","Is","=A2=A1","(","White","Font",")","\n","ConditionalFormattingRule","rule1","=","sheetCF",".","createConditionalFormattingRule","(","\"COUNTIF","(","$C$2:$C$4,A2",")","\"",")",";","\n","PatternFormatting","fill1","=","rule1",".","createPatternFormatting","(",")",";","\n","fill1",".","setFillBackgroundColor","(","IndexedColors",".","LIGHT_BLUE",".","index",")",";","\n","fill1",".","setFillPattern","(","PatternFormatting",".","SOLID_FOREGROUND",")",";","\n\n","CellRangeAddress[]","regions","=","{","\n","CellRangeAddress",".","valueOf","(","\"A2:A8\"",")","\n","}",";","\n\n","sheetCF",".","addConditionalFormatting","(","regions,","rule1",")",";","\n\n","sheet",".","getRow","(","2",")",".","createCell","(","3",")",".","setCellValue","(","\"<==","Use","Excel","conditional","formatting","to","highlight","items","that","are","in","a","list","on","the","worksheet\"",")",";","\n"],"docstring_tokens":["Use","Excel","conditional","formatting","to","highlight","items","that","are","in","a","list","on","the","worksheet"]}
{"code_tokens":["\n","static","void","shadeAlt","(","Sheet","sheet",")","{","\n","SheetConditionalFormatting","sheetCF","=","sheet",".","getSheetConditionalFormatting","(",")",";","\n\n","//","Condition","1:","Formula","Is","=A2=A1","(","White","Font",")","\n","ConditionalFormattingRule","rule1","=","sheetCF",".","createConditionalFormattingRule","(","\"MOD","(","ROW","(",")",",2",")","\"",")",";","\n","PatternFormatting","fill1","=","rule1",".","createPatternFormatting","(",")",";","\n","fill1",".","setFillBackgroundColor","(","IndexedColors",".","LIGHT_GREEN",".","index",")",";","\n","fill1",".","setFillPattern","(","PatternFormatting",".","SOLID_FOREGROUND",")",";","\n\n","CellRangeAddress[]","regions","=","{","\n","CellRangeAddress",".","valueOf","(","\"A1:Z100\"",")","\n","}",";","\n\n","sheetCF",".","addConditionalFormatting","(","regions,","rule1",")",";","\n\n","sheet",".","createRow","(","0",")",".","createCell","(","1",")",".","setCellValue","(","\"Shade","Alternating","Rows\"",")",";","\n","sheet",".","createRow","(","1",")",".","createCell","(","1",")",".","setCellValue","(","\"Condition:","Formula","Is","=MOD","(","ROW","(",")",",2",")","(","Light","Green","Fill",")","\"",")",";","\n"],"docstring_tokens":["Use","Excel","conditional","formatting","to","shade","alternating","rows","on","the","worksheet"]}
{"code_tokens":["\n","@Internal\n","public","byte","getIxchFollow","(",")","\n","{","\n","return","field_5_ixchFollow",";","\n"],"docstring_tokens":["An","unsigned","integer","that","specifies","the","character","that","follows","the","number","text"]}
{"code_tokens":["\n","@Internal\n","public","short","getCbGrpprlChpx","(",")","\n","{","\n","return","field_8_cbGrpprlChpx",";","\n"],"docstring_tokens":["An","unsigned","integer","that","specifies","the","size,","in","bytes,","of","the","grpprlChpx","in","the","LVL","that","contains","this","LVLF"]}
{"code_tokens":["\n","@Internal\n","public","void","setCbGrpprlPapx","(","short","field_9_cbGrpprlPapx",")","\n","{","\n","this",".","field_9_cbGrpprlPapx","=","field_9_cbGrpprlPapx",";","\n"],"docstring_tokens":["An","unsigned","integer","that","specifies","the","size,","in","bytes,","of","the","grpprlPapx","in","the","LVL","that","contains","this","LVLF"]}
{"code_tokens":["\n","@Internal\n","public","void","setJc","(","byte","value",")","\n","{","\n","field_3_info","=","(","byte",")","jc",".","setValue","(","field_3_info,","value",")",";","\n"],"docstring_tokens":["Sets","the","jc","field","value"]}
{"code_tokens":["\n","private","static","double","evaluate","(","int","year,","int","month,","int","pDay",")","throws","EvaluationException","{","\n","//","We","don't","support","negative","years","yet\n","if","(","year","<","0",")","{","\n","throw","new","EvaluationException","(","ErrorEval",".","VALUE_INVALID",")",";","\n","}","\n","//","Negative","months","are","fairly","easy\n","while","(","month","<","0",")","{","\n","year--",";","\n","month","+=","12",";","\n","}","\n","//","Negative","days","are","handled","by","the","Java","Calendar\n","\n","//","Excel","has","bugs","around","leap","years","in","1900,","handle","them\n","//","Special","case","for","the","non-existant","1900","leap","year\n","if","(","year","==","1900","&&","month","==","Calendar",".","FEBRUARY","&&","pDay","==","29",")","{","\n","return","60",".","0",";","\n","}","\n\n","//","If","they","give","a","date","in","1900","in","Jan/Feb,","with","the","days\n","//","putting","it","past","the","leap","year,","adjust\n","int","day","=","pDay",";","\n","if","(","year","==","1900",")","{","\n","if","(","(","month","==","Calendar",".","JANUARY","&&","day",">=","60",")","||\n","(","month","==","Calendar",".","FEBRUARY","&&","day",">=","30",")",")","{","\n","day--",";","\n","}","\n","}","\n\n","//","Turn","this","into","a","Java","date\n","Calendar","c","=","LocaleUtil",".","getLocaleCalendar","(","year,","month,","day",")",";","\n","\n","//","Handle","negative","days","of","the","week,","that","pull","us","across\n","//","the","29th","of","Feb","1900\n","if","(","pDay","<","0","&&","c",".","get","(","Calendar",".","YEAR",")","==","1900","&&\n","month",">","Calendar",".","FEBRUARY","&&","\n","c",".","get","(","Calendar",".","MONTH",")","<","Calendar",".","MARCH",")","{","\n","c",".","add","(","Calendar",".","DATE,","1",")",";","\n","}","\n\n","//","TODO","Identify","if","we're","doing","1900","or","1904","date","windowing\n","boolean","use1904windowing","=","false",";","\n","\n","//","Have","this","Java","date","turned","back","into","an","Excel","one\n","return","DateUtil",".","getExcelDate","(","c",".","getTime","(",")",",","use1904windowing",")",";","\n"],"docstring_tokens":["Note","-","works","with","Java","Calendar","months,","not","Excel","months"]}
{"code_tokens":["\n","byte[]","getHashMagic","(",")","{","\n","//","in","an","earlier","release","the","hashMagic","(","aka","DigestAlgorithmIdentifier",")","contained","only\n","//","an","object","identifier,","but","to","conform","with","the","header","generated","by","the\n","//","javax-signature","API,","the","empty","<associated","parameters>","are","also","included\n","try","(","UnsynchronizedByteArrayOutputStream","bos","=","new","UnsynchronizedByteArrayOutputStream","(",")",")","{","\n","final","byte[]","oidBytes","=","new","Oid","(","algo",".","rsaOid",")",".","getDER","(",")",";","\n\n","bos",".","write","(","0x30",")",";","\n","bos",".","write","(","algo",".","hashSize+oidBytes",".","length+6",")",";","\n","bos",".","write","(","0x30",")",";","\n","bos",".","write","(","oidBytes",".","length+2",")",";","\n","bos",".","write","(","oidBytes",")",";","\n","bos",".","write","(","new","byte[]","{","5,0,4","}",")",";","\n","bos",".","write","(","algo",".","hashSize",")",";","\n\n","return","bos",".","toByteArray","(",")",";","\n","}","catch","(","GSSException|IOException","e",")","{","\n","throw","new","IllegalStateException","(","e",")",";","\n","}","\n"],"docstring_tokens":["Each","digest","method","has","its","own","ASN1","header"]}
{"code_tokens":["\n","protected","void","init","(",")","{","\n","//type","of","the","text\n","int","type","=","getTextType","(",")",";","\n\n","int","head",";","\n","int","pos","=","0",";","\n\n","//number","of","indentation","levels\n","short","levels","=","LittleEndian",".","getShort","(","_data,","0",")",";","\n","pos","+=","LittleEndianConsts",".","SHORT_SIZE",";","\n\n","paragraphStyles","=","new","ArrayList<>","(","levels",")",";","\n","charStyles","=","new","ArrayList<>","(","levels",")",";","\n\n","for","(","short","i","=","0",";","i","<","levels",";","i++",")","{","\n","TextPropCollection","prprops","=","new","TextPropCollection","(","0,","TextPropType",".","paragraph",")",";","\n","if","(","type",">=","TextPlaceholder",".","CENTER_BODY",".","nativeId",")","{","\n","//","Fetch","the","2","byte","value,","that","is","safe","to","ignore","for","some","types","of","text\n","short","indentLevel","=","LittleEndian",".","getShort","(","_data,","pos",")",";","\n","prprops",".","setIndentLevel","(","indentLevel",")",";","\n","pos","+=","LittleEndianConsts",".","SHORT_SIZE",";","\n","}","else","{","\n","prprops",".","setIndentLevel","(","(","short",")","-1",")",";","\n","}","\n\n","head","=","LittleEndian",".","getInt","(","_data,","pos",")",";","\n","pos","+=","LittleEndianConsts",".","INT_SIZE",";","\n\n","pos","+=","prprops",".","buildTextPropList","(","head,","_data,","pos",")",";","\n","paragraphStyles",".","add","(","prprops",")",";","\n\n","head","=","LittleEndian",".","getInt","(","_data,","pos",")",";","\n","pos","+=","LittleEndianConsts",".","INT_SIZE",";","\n","TextPropCollection","chprops","=","new","TextPropCollection","(","0,","TextPropType",".","character",")",";","\n","pos","+=","chprops",".","buildTextPropList","(","head,","_data,","pos",")",";","\n","charStyles",".","add","(","chprops",")",";","\n","}","\n"],"docstring_tokens":["parse","the","record","data","and","initialize","styles"]}
{"code_tokens":["\n","public","String","getTitleFormula","(",")","{","\n","if","(","!getCTChart","(",")",".","isSetTitle","(",")",")","{","\n","return","null",";","\n","}","\n\n","CTTitle","title","=","getCTChart","(",")",".","getTitle","(",")",";","\n\n","if","(","!title",".","isSetTx","(",")",")","{","\n","return","null",";","\n","}","\n\n","CTTx","tx","=","title",".","getTx","(",")",";","\n\n","if","(","!tx",".","isSetStrRef","(",")",")","{","\n","return","null",";","\n","}","\n\n","return","tx",".","getStrRef","(",")",".","getF","(",")",";","\n"],"docstring_tokens":["Get","the","chart","title","formula","expression","if","there","is","one"]}
{"code_tokens":["\n","public","void","setTitleFormula","(","String","formula",")","{","\n","CTTitle","ctTitle",";","\n","if","(","getCTChart","(",")",".","isSetTitle","(",")",")","{","\n","ctTitle","=","getCTChart","(",")",".","getTitle","(",")",";","\n","}","else","{","\n","ctTitle","=","getCTChart","(",")",".","addNewTitle","(",")",";","\n","}","\n\n","CTTx","tx",";","\n","if","(","ctTitle",".","isSetTx","(",")",")","{","\n","tx","=","ctTitle",".","getTx","(",")",";","\n","}","else","{","\n","tx","=","ctTitle",".","addNewTx","(",")",";","\n","}","\n\n","if","(","tx",".","isSetRich","(",")",")","{","\n","tx",".","unsetRich","(",")",";","\n","}","\n\n","CTStrRef","strRef",";","\n","if","(","tx",".","isSetStrRef","(",")",")","{","\n","strRef","=","tx",".","getStrRef","(",")",";","\n","}","else","{","\n","strRef","=","tx",".","addNewStrRef","(",")",";","\n","}","\n\n","strRef",".","setF","(","formula",")",";","\n"],"docstring_tokens":["Set","the","formula","expression","to","use","for","the","chart","title"]}
{"code_tokens":["\n","@Internal\n","public","boolean","getFInTable","(",")","\n","{","\n","return","field_14_fInTable",";","\n"],"docstring_tokens":["Paragraph","is","in","table","flag"]}
{"code_tokens":["\n","@Internal\n","public","boolean","getFWidowControl","(",")","\n","{","\n","return","field_32_fWidowControl",";","\n"],"docstring_tokens":["1,","Word","will","prevent","widowed","lines","in","this","paragraph","from","being","placed","at","the","beginning","of","a","page"]}
{"code_tokens":["\n","@Internal\n","public","boolean","getFKinsoku","(",")","\n","{","\n","return","field_33_fKinsoku",";","\n"],"docstring_tokens":["apply","Kinsoku","rules","when","performing","line","wrapping"]}
{"code_tokens":["\n","@Internal\n","public","boolean","getFInnerTableCell","(",")","\n","{","\n","return","field_48_fInnerTableCell",";","\n"],"docstring_tokens":["When","1,","the","end","of","paragraph","mark","is","really","an","end","of","cell","mark","for","a","nested","table","cell"]}
{"code_tokens":["\n","//","Keep","this","code","in","sync","with","{","@link","ColumnShifter#shiftMergedRegions","}","\n","@Override\n","public","List<CellRangeAddress>","shiftMergedRegions","(","int","startRow,","int","endRow,","int","n",")","{","\n","List<CellRangeAddress>","shiftedRegions","=","new","ArrayList<>","(",")",";","\n","Set<Integer>","removedIndices","=","new","HashSet<>","(",")",";","\n","//move","merged","regions","completely","if","they","fall","within","the","new","region","boundaries","when","they","are","shifted\n","int","size","=","sheet",".","getNumMergedRegions","(",")",";","\n","for","(","int","i","=","0",";","i","<","size",";","i++",")","{","\n","CellRangeAddress","merged","=","sheet",".","getMergedRegion","(","i",")",";","\n\n","//","remove","merged","region","that","are","replaced","by","the","shifting,\n","//","i",".","e",".","where","the","area","includes","something","in","the","overwritten","area\n","if","(","removalNeeded","(","merged,","startRow,","endRow,","n",")",")","{","\n","removedIndices",".","add","(","i",")",";","\n","continue",";","\n","}","\n\n","boolean","inStart","=","(","merged",".","getFirstRow","(",")",">=","startRow","||","merged",".","getLastRow","(",")",">=","startRow",")",";","\n","boolean","inEnd","=","(","merged",".","getFirstRow","(",")","<=","endRow","||","merged",".","getLastRow","(",")","<=","endRow",")",";","\n\n","//don't","check","if","it's","not","within","the","shifted","area\n","if","(","!inStart","||","!inEnd",")","{","\n","continue",";","\n","}","\n\n","//only","shift","if","the","region","outside","the","shifted","rows","is","not","merged","too\n","if","(","!merged",".","containsRow","(","startRow","-","1",")","&&","!merged",".","containsRow","(","endRow","+","1",")",")","{","\n","merged",".","setFirstRow","(","merged",".","getFirstRow","(",")","+","n",")",";","\n","merged",".","setLastRow","(","merged",".","getLastRow","(",")","+","n",")",";","\n","//have","to","remove/add","it","back\n","shiftedRegions",".","add","(","merged",")",";","\n","removedIndices",".","add","(","i",")",";","\n","}","\n","}","\n","\n","if","(","!removedIndices",".","isEmpty","(",")",")","{","\n","sheet",".","removeMergedRegions","(","removedIndices",")",";","\n","}","\n\n","//read","so","it","doesn't","get","shifted","again\n","for","(","CellRangeAddress","region",":","shiftedRegions",")","{","\n","sheet",".","addMergedRegion","(","region",")",";","\n","}","\n","return","shiftedRegions",";","\n"],"docstring_tokens":["Shifts,","grows,","or","shrinks","the","merged","regions","due","to","a","row","shift"]}
{"code_tokens":["\n","public","static","CellFormatCondition","getInstance","(","String","opString,\n","String","constStr",")","{","\n\n","if","(","!TESTS",".","containsKey","(","opString",")",")","\n","throw","new","IllegalArgumentException","(","\"Unknown","test:","\"","+","opString",")",";","\n","int","test","=","TESTS",".","get","(","opString",")",";","\n\n","final","double","c","=","Double",".","parseDouble","(","constStr",")",";","\n\n","switch","(","test",")","{","\n","case","LT:\n","return","new","CellFormatCondition","(",")","{","\n","@Override\n","public","boolean","pass","(","double","value",")","{","\n","return","value","<","c",";","\n","}","\n","}",";","\n","case","LE:\n","return","new","CellFormatCondition","(",")","{","\n","@Override\n","public","boolean","pass","(","double","value",")","{","\n","return","value","<=","c",";","\n","}","\n","}",";","\n","case","GT:\n","return","new","CellFormatCondition","(",")","{","\n","@Override\n","public","boolean","pass","(","double","value",")","{","\n","return","value",">","c",";","\n","}","\n","}",";","\n","case","GE:\n","return","new","CellFormatCondition","(",")","{","\n","@Override\n","public","boolean","pass","(","double","value",")","{","\n","return","value",">=","c",";","\n","}","\n","}",";","\n","case","EQ:\n","return","new","CellFormatCondition","(",")","{","\n","@Override\n","public","boolean","pass","(","double","value",")","{","\n","return","value","==","c",";","\n","}","\n","}",";","\n","case","NE:\n","return","new","CellFormatCondition","(",")","{","\n","@Override\n","public","boolean","pass","(","double","value",")","{","\n","return","value","!=","c",";","\n","}","\n","}",";","\n","default:\n","throw","new","IllegalArgumentException","(","\n","\"Cannot","create","for","test","number","\"","+","test","+","\"","(","\\\"\"","+","opString","+\n","\"\\\"",")","\"",")",";","\n","}","\n"],"docstring_tokens":["Returns","an","instance","of","a","condition","object"]}
{"code_tokens":["\n","@Override\n","public","int","getSignature","(",")","{","\n","return","(","getUIDInstanceCount","(",")","==","1","?","0x5420",":","0x5430",")",";","\n"],"docstring_tokens":["PICT","signature","is","0x5420","or","0x5430"]}
{"code_tokens":["\n","@Override\n","public","void","setSignature","(","int","signature",")","{","\n","switch","(","signature",")","{","\n","case","0x5420:\n","setUIDInstanceCount","(","1",")",";","\n","break",";","\n","case","0x5430:\n","setUIDInstanceCount","(","2",")",";","\n","break",";","\n","default:\n","throw","new","IllegalArgumentException","(","signature+\"","is","not","a","valid","instance/signature","value","for","PICT\"",")",";","\n","}","\n"],"docstring_tokens":["Sets","the","PICT","signature","-","either","0x5420","or","0x5430"]}
{"code_tokens":["\n","public","static","void","setBorderLeft","(","BorderStyle","border,","CellRangeAddress","region,","Sheet","sheet",")","{","\n","int","rowStart","=","region",".","getFirstRow","(",")",";","\n","int","rowEnd","=","region",".","getLastRow","(",")",";","\n","int","column","=","region",".","getFirstColumn","(",")",";","\n\n","CellPropertySetter","cps","=","new","CellPropertySetter","(","CellUtil",".","BORDER_LEFT,","border",")",";","\n","for","(","int","i","=","rowStart",";","i","<=","rowEnd",";","i++",")","{","\n","cps",".","setProperty","(","CellUtil",".","getRow","(","i,","sheet",")",",","column",")",";","\n","}","\n"],"docstring_tokens":["Sets","the","left","border","style","for","a","region","of","cells","by","manipulating","the","cell","style","of","the","individual","cells","on","the","left"]}
{"code_tokens":["\n","public","static","void","setLeftBorderColor","(","int","color,","CellRangeAddress","region,","Sheet","sheet",")","{","\n","int","rowStart","=","region",".","getFirstRow","(",")",";","\n","int","rowEnd","=","region",".","getLastRow","(",")",";","\n","int","column","=","region",".","getFirstColumn","(",")",";","\n\n","CellPropertySetter","cps","=","new","CellPropertySetter","(","CellUtil",".","LEFT_BORDER_COLOR,","color",")",";","\n","for","(","int","i","=","rowStart",";","i","<=","rowEnd",";","i++",")","{","\n","cps",".","setProperty","(","CellUtil",".","getRow","(","i,","sheet",")",",","column",")",";","\n","}","\n"],"docstring_tokens":["Sets","the","left","border","color","for","a","region","of","cells","by","manipulating","the","cell","style","of","the","individual","cells","on","the","left"]}
{"code_tokens":["\n","public","static","void","setBorderRight","(","BorderStyle","border,","CellRangeAddress","region,","Sheet","sheet",")","{","\n","int","rowStart","=","region",".","getFirstRow","(",")",";","\n","int","rowEnd","=","region",".","getLastRow","(",")",";","\n","int","column","=","region",".","getLastColumn","(",")",";","\n\n","CellPropertySetter","cps","=","new","CellPropertySetter","(","CellUtil",".","BORDER_RIGHT,","border",")",";","\n","for","(","int","i","=","rowStart",";","i","<=","rowEnd",";","i++",")","{","\n","cps",".","setProperty","(","CellUtil",".","getRow","(","i,","sheet",")",",","column",")",";","\n","}","\n"],"docstring_tokens":["Sets","the","right","border","style","for","a","region","of","cells","by","manipulating","the","cell","style","of","the","individual","cells","on","the","right"]}
{"code_tokens":["\n","public","static","void","setRightBorderColor","(","int","color,","CellRangeAddress","region,","Sheet","sheet",")","{","\n","int","rowStart","=","region",".","getFirstRow","(",")",";","\n","int","rowEnd","=","region",".","getLastRow","(",")",";","\n","int","column","=","region",".","getLastColumn","(",")",";","\n\n","CellPropertySetter","cps","=","new","CellPropertySetter","(","CellUtil",".","RIGHT_BORDER_COLOR,","color",")",";","\n","for","(","int","i","=","rowStart",";","i","<=","rowEnd",";","i++",")","{","\n","cps",".","setProperty","(","CellUtil",".","getRow","(","i,","sheet",")",",","column",")",";","\n","}","\n"],"docstring_tokens":["Sets","the","right","border","color","for","a","region","of","cells","by","manipulating","the","cell","style","of","the","individual","cells","on","the","right"]}
{"code_tokens":["\n","public","static","void","setBorderBottom","(","BorderStyle","border,","CellRangeAddress","region,","Sheet","sheet",")","{","\n","int","colStart","=","region",".","getFirstColumn","(",")",";","\n","int","colEnd","=","region",".","getLastColumn","(",")",";","\n","int","rowIndex","=","region",".","getLastRow","(",")",";","\n","CellPropertySetter","cps","=","new","CellPropertySetter","(","CellUtil",".","BORDER_BOTTOM,","border",")",";","\n","Row","row","=","CellUtil",".","getRow","(","rowIndex,","sheet",")",";","\n","for","(","int","i","=","colStart",";","i","<=","colEnd",";","i++",")","{","\n","cps",".","setProperty","(","row,","i",")",";","\n","}","\n"],"docstring_tokens":["Sets","the","bottom","border","style","for","a","region","of","cells","by","manipulating","the","cell","style","of","the","individual","cells","on","the","bottom"]}
{"code_tokens":["\n","public","static","void","setBottomBorderColor","(","int","color,","CellRangeAddress","region,","Sheet","sheet",")","{","\n","int","colStart","=","region",".","getFirstColumn","(",")",";","\n","int","colEnd","=","region",".","getLastColumn","(",")",";","\n","int","rowIndex","=","region",".","getLastRow","(",")",";","\n","CellPropertySetter","cps","=","new","CellPropertySetter","(","CellUtil",".","BOTTOM_BORDER_COLOR,","color",")",";","\n","Row","row","=","CellUtil",".","getRow","(","rowIndex,","sheet",")",";","\n","for","(","int","i","=","colStart",";","i","<=","colEnd",";","i++",")","{","\n","cps",".","setProperty","(","row,","i",")",";","\n","}","\n"],"docstring_tokens":["Sets","the","bottom","border","color","for","a","region","of","cells","by","manipulating","the","cell","style","of","the","individual","cells","on","the","bottom"]}
{"code_tokens":["\n","public","static","void","setBorderTop","(","BorderStyle","border,","CellRangeAddress","region,","Sheet","sheet",")","{","\n","int","colStart","=","region",".","getFirstColumn","(",")",";","\n","int","colEnd","=","region",".","getLastColumn","(",")",";","\n","int","rowIndex","=","region",".","getFirstRow","(",")",";","\n","CellPropertySetter","cps","=","new","CellPropertySetter","(","CellUtil",".","BORDER_TOP,","border",")",";","\n","Row","row","=","CellUtil",".","getRow","(","rowIndex,","sheet",")",";","\n","for","(","int","i","=","colStart",";","i","<=","colEnd",";","i++",")","{","\n","cps",".","setProperty","(","row,","i",")",";","\n","}","\n"],"docstring_tokens":["Sets","the","top","border","style","for","a","region","of","cells","by","manipulating","the","cell","style","of","the","individual","cells","on","the","top"]}
{"code_tokens":["\n","public","static","void","setTopBorderColor","(","int","color,","CellRangeAddress","region,","Sheet","sheet",")","{","\n","int","colStart","=","region",".","getFirstColumn","(",")",";","\n","int","colEnd","=","region",".","getLastColumn","(",")",";","\n","int","rowIndex","=","region",".","getFirstRow","(",")",";","\n","CellPropertySetter","cps","=","new","CellPropertySetter","(","CellUtil",".","TOP_BORDER_COLOR,","color",")",";","\n","Row","row","=","CellUtil",".","getRow","(","rowIndex,","sheet",")",";","\n","for","(","int","i","=","colStart",";","i","<=","colEnd",";","i++",")","{","\n","cps",".","setProperty","(","row,","i",")",";","\n","}","\n"],"docstring_tokens":["Sets","the","top","border","color","for","a","region","of","cells","by","manipulating","the","cell","style","of","the","individual","cells","on","the","top"]}
{"code_tokens":["\n","public","void","updateCell","(","String","sheetName,","int","rowIndex,","int","columnIndex,","ValueEval","value",")","{","\n\n","ForkedEvaluationCell","cell","=","_sewb",".","getOrCreateUpdatableCell","(","sheetName,","rowIndex,","columnIndex",")",";","\n","cell",".","setValue","(","value",")",";","\n","_evaluator",".","notifyUpdateCell","(","cell",")",";","\n"],"docstring_tokens":["Sets","the","specified","cell","to","the","supplied","value"]}
{"code_tokens":["\n","public","void","setAlternateFormula","(","boolean","formula",")","\n","{","\n","field_2_wsbool","=","alternateformula",".","setByteBoolean","(","field_2_wsbool,\n","formula",")",";","\n"],"docstring_tokens":["whether","alternative","formula","entry","is","on"]}
{"code_tokens":["\n","public","ListLevel","getLevel","(","int","index",")","\n","{","\n","return","_levels[index","-","1]",";","\n"],"docstring_tokens":["Gets","the","level","associated","to","a","particular","List","at","a","particular","index"]}
{"code_tokens":["\n\n","public","short","getNumEntries","(",")","\n","{","\n","return","_cEntries",";","\n"],"docstring_tokens":["get","the","number","of","AutoFilter","drop-down","arrows","on","the","sheet"]}
{"code_tokens":["\n","public","int","getSize","(",")","{","\n","return","PLAIN_TOKEN_SIZE\n","//","data","written","after","the","all","tokens:\n","+","1","+","2","//","column,","row\n","+","ConstantValueParser",".","getEncodedSize","(","_arrayValues",")",";","\n"],"docstring_tokens":["This","size","includes","the","size","of","the","array","Ptg","plus","the","Array","Ptg","Token","value","size"]}
{"code_tokens":["\n","private","static","Map<String,","CellStyle>","createStyles","(","Workbook","wb",")","{","\n","Map<String,","CellStyle>","styles","=","new","HashMap<>","(",")",";","\n\n","CellStyle","style",";","\n","Font","titleFont","=","wb",".","createFont","(",")",";","\n","titleFont",".","setFontHeightInPoints","(","(","short",")","14",")",";","\n","titleFont",".","setFontName","(","\"Trebuchet","MS\"",")",";","\n","style","=","wb",".","createCellStyle","(",")",";","\n","style",".","setFont","(","titleFont",")",";","\n","style",".","setBorderBottom","(","BorderStyle",".","DOTTED",")",";","\n","style",".","setBottomBorderColor","(","IndexedColors",".","GREY_40_PERCENT",".","getIndex","(",")",")",";","\n","styles",".","put","(","\"title\",","style",")",";","\n\n","Font","itemFont","=","wb",".","createFont","(",")",";","\n","itemFont",".","setFontHeightInPoints","(","(","short",")","9",")",";","\n","itemFont",".","setFontName","(","\"Trebuchet","MS\"",")",";","\n","style","=","wb",".","createCellStyle","(",")",";","\n","style",".","setAlignment","(","HorizontalAlignment",".","LEFT",")",";","\n","style",".","setFont","(","itemFont",")",";","\n","styles",".","put","(","\"item_left\",","style",")",";","\n\n","style","=","wb",".","createCellStyle","(",")",";","\n","style",".","setAlignment","(","HorizontalAlignment",".","RIGHT",")",";","\n","style",".","setFont","(","itemFont",")",";","\n","styles",".","put","(","\"item_right\",","style",")",";","\n\n","style","=","wb",".","createCellStyle","(",")",";","\n","style",".","setAlignment","(","HorizontalAlignment",".","RIGHT",")",";","\n","style",".","setFont","(","itemFont",")",";","\n","style",".","setBorderRight","(","BorderStyle",".","DOTTED",")",";","\n","style",".","setRightBorderColor","(","IndexedColors",".","GREY_40_PERCENT",".","getIndex","(",")",")",";","\n","style",".","setBorderBottom","(","BorderStyle",".","DOTTED",")",";","\n","style",".","setBottomBorderColor","(","IndexedColors",".","GREY_40_PERCENT",".","getIndex","(",")",")",";","\n","style",".","setBorderLeft","(","BorderStyle",".","DOTTED",")",";","\n","style",".","setLeftBorderColor","(","IndexedColors",".","GREY_40_PERCENT",".","getIndex","(",")",")",";","\n","style",".","setBorderTop","(","BorderStyle",".","DOTTED",")",";","\n","style",".","setTopBorderColor","(","IndexedColors",".","GREY_40_PERCENT",".","getIndex","(",")",")",";","\n","style",".","setDataFormat","(","wb",".","createDataFormat","(",")",".","getFormat","(","\"_","(","$*","#,##0",".","00_",")",";","_","(","$*","(","#,##0",".","00",")",";","_","(","$*","\\\"-\\\"??_",")",";","_","(","@_",")","\"",")",")",";","\n","styles",".","put","(","\"input_$\",","style",")",";","\n\n","style","=","wb",".","createCellStyle","(",")",";","\n","style",".","setAlignment","(","HorizontalAlignment",".","RIGHT",")",";","\n","style",".","setFont","(","itemFont",")",";","\n","style",".","setBorderRight","(","BorderStyle",".","DOTTED",")",";","\n","style",".","setRightBorderColor","(","IndexedColors",".","GREY_40_PERCENT",".","getIndex","(",")",")",";","\n","style",".","setBorderBottom","(","BorderStyle",".","DOTTED",")",";","\n","style",".","setBottomBorderColor","(","IndexedColors",".","GREY_40_PERCENT",".","getIndex","(",")",")",";","\n","style",".","setBorderLeft","(","BorderStyle",".","DOTTED",")",";","\n","style",".","setLeftBorderColor","(","IndexedColors",".","GREY_40_PERCENT",".","getIndex","(",")",")",";","\n","style",".","setBorderTop","(","BorderStyle",".","DOTTED",")",";","\n","style",".","setTopBorderColor","(","IndexedColors",".","GREY_40_PERCENT",".","getIndex","(",")",")",";","\n","style",".","setDataFormat","(","wb",".","createDataFormat","(",")",".","getFormat","(","\"0",".","000%\"",")",")",";","\n","styles",".","put","(","\"input_%\",","style",")",";","\n\n","style","=","wb",".","createCellStyle","(",")",";","\n","style",".","setAlignment","(","HorizontalAlignment",".","RIGHT",")",";","\n","style",".","setFont","(","itemFont",")",";","\n","style",".","setBorderRight","(","BorderStyle",".","DOTTED",")",";","\n","style",".","setRightBorderColor","(","IndexedColors",".","GREY_40_PERCENT",".","getIndex","(",")",")",";","\n","style",".","setBorderBottom","(","BorderStyle",".","DOTTED",")",";","\n","style",".","setBottomBorderColor","(","IndexedColors",".","GREY_40_PERCENT",".","getIndex","(",")",")",";","\n","style",".","setBorderLeft","(","BorderStyle",".","DOTTED",")",";","\n","style",".","setLeftBorderColor","(","IndexedColors",".","GREY_40_PERCENT",".","getIndex","(",")",")",";","\n","style",".","setBorderTop","(","BorderStyle",".","DOTTED",")",";","\n","style",".","setTopBorderColor","(","IndexedColors",".","GREY_40_PERCENT",".","getIndex","(",")",")",";","\n","style",".","setDataFormat","(","wb",".","createDataFormat","(",")",".","getFormat","(","\"0\"",")",")",";","\n","styles",".","put","(","\"input_i\",","style",")",";","\n\n","style","=","wb",".","createCellStyle","(",")",";","\n","style",".","setAlignment","(","HorizontalAlignment",".","CENTER",")",";","\n","style",".","setFont","(","itemFont",")",";","\n","style",".","setDataFormat","(","wb",".","createDataFormat","(",")",".","getFormat","(","\"m/d/yy\"",")",")",";","\n","styles",".","put","(","\"input_d\",","style",")",";","\n\n","style","=","wb",".","createCellStyle","(",")",";","\n","style",".","setAlignment","(","HorizontalAlignment",".","RIGHT",")",";","\n","style",".","setFont","(","itemFont",")",";","\n","style",".","setBorderRight","(","BorderStyle",".","DOTTED",")",";","\n","style",".","setRightBorderColor","(","IndexedColors",".","GREY_40_PERCENT",".","getIndex","(",")",")",";","\n","style",".","setBorderBottom","(","BorderStyle",".","DOTTED",")",";","\n","style",".","setBottomBorderColor","(","IndexedColors",".","GREY_40_PERCENT",".","getIndex","(",")",")",";","\n","style",".","setBorderLeft","(","BorderStyle",".","DOTTED",")",";","\n","style",".","setLeftBorderColor","(","IndexedColors",".","GREY_40_PERCENT",".","getIndex","(",")",")",";","\n","style",".","setBorderTop","(","BorderStyle",".","DOTTED",")",";","\n","style",".","setTopBorderColor","(","IndexedColors",".","GREY_40_PERCENT",".","getIndex","(",")",")",";","\n","style",".","setDataFormat","(","wb",".","createDataFormat","(",")",".","getFormat","(","\"$##,##0",".","00\"",")",")",";","\n","style",".","setBorderBottom","(","BorderStyle",".","DOTTED",")",";","\n","style",".","setBottomBorderColor","(","IndexedColors",".","GREY_40_PERCENT",".","getIndex","(",")",")",";","\n","style",".","setFillForegroundColor","(","IndexedColors",".","GREY_25_PERCENT",".","getIndex","(",")",")",";","\n","style",".","setFillPattern","(","FillPatternType",".","SOLID_FOREGROUND",")",";","\n","styles",".","put","(","\"formula_$\",","style",")",";","\n\n","style","=","wb",".","createCellStyle","(",")",";","\n","style",".","setAlignment","(","HorizontalAlignment",".","RIGHT",")",";","\n","style",".","setFont","(","itemFont",")",";","\n","style",".","setBorderRight","(","BorderStyle",".","DOTTED",")",";","\n","style",".","setRightBorderColor","(","IndexedColors",".","GREY_40_PERCENT",".","getIndex","(",")",")",";","\n","style",".","setBorderBottom","(","BorderStyle",".","DOTTED",")",";","\n","style",".","setBottomBorderColor","(","IndexedColors",".","GREY_40_PERCENT",".","getIndex","(",")",")",";","\n","style",".","setBorderLeft","(","BorderStyle",".","DOTTED",")",";","\n","style",".","setLeftBorderColor","(","IndexedColors",".","GREY_40_PERCENT",".","getIndex","(",")",")",";","\n","style",".","setBorderTop","(","BorderStyle",".","DOTTED",")",";","\n","style",".","setTopBorderColor","(","IndexedColors",".","GREY_40_PERCENT",".","getIndex","(",")",")",";","\n","style",".","setDataFormat","(","wb",".","createDataFormat","(",")",".","getFormat","(","\"0\"",")",")",";","\n","style",".","setBorderBottom","(","BorderStyle",".","DOTTED",")",";","\n","style",".","setBottomBorderColor","(","IndexedColors",".","GREY_40_PERCENT",".","getIndex","(",")",")",";","\n","style",".","setFillForegroundColor","(","IndexedColors",".","GREY_25_PERCENT",".","getIndex","(",")",")",";","\n","style",".","setFillPattern","(","FillPatternType",".","SOLID_FOREGROUND",")",";","\n","styles",".","put","(","\"formula_i\",","style",")",";","\n\n","return","styles",";","\n"],"docstring_tokens":["cell","styles","used","for","formatting","calendar","sheets"]}
{"code_tokens":["\n","public","XWPFTableRow","createRow","(",")","{","\n","int","sizeCol","=","ctTbl",".","sizeOfTrArray","(",")",">","0","?","ctTbl",".","getTrArray","(","0",")","\n",".","sizeOfTcArray","(",")",":","0",";","\n","XWPFTableRow","tabRow","=","new","XWPFTableRow","(","ctTbl",".","addNewTr","(",")",",","this",")",";","\n","addColumn","(","tabRow,","sizeCol",")",";","\n","tableRows",".","add","(","tabRow",")",";","\n","return","tabRow",";","\n"],"docstring_tokens":["create","a","new","XWPFTableRow","object","with","as","many","cells","as","the","number","of","columns","defined","in","that","moment"]}
{"code_tokens":["\n","public","void","removeInsideHBorder","(",")","{","\n","removeBorder","(","Border",".","INSIDE_H",")",";","\n"],"docstring_tokens":["Remove","inside","horizontal","borders","for","table"]}
{"code_tokens":["\n","public","void","removeInsideVBorder","(",")","{","\n","removeBorder","(","Border",".","INSIDE_V",")",";","\n"],"docstring_tokens":["Remove","inside","vertical","borders","for","table"]}
{"code_tokens":["\n","private","void","cleanupTblBorders","(",")","{","\n","final","CTTblPr","pr","=","getTblPr","(","false",")",";","\n","if","(","pr","!=","null","&&","pr",".","isSetTblBorders","(",")",")","{","\n","final","CTTblBorders","b","=","pr",".","getTblBorders","(",")",";","\n","if","(","!","(","b",".","isSetInsideH","(",")","||\n","b",".","isSetInsideV","(",")","||\n","b",".","isSetTop","(",")","||\n","b",".","isSetBottom","(",")","||\n","b",".","isSetLeft","(",")","||\n","b",".","isSetRight","(",")",")",")","{","\n","pr",".","unsetTblBorders","(",")",";","\n","}","\n","}","\n"],"docstring_tokens":["removes","the","Borders","node","from","Table","properties","if","there","are","no","border","elements"]}
{"code_tokens":["\n","public","boolean","removeRow","(","int","pos",")","throws","IndexOutOfBoundsException","{","\n","if","(","pos",">=","0","&&","pos","<","tableRows",".","size","(",")",")","{","\n","if","(","ctTbl",".","sizeOfTrArray","(",")",">","0",")","{","\n","ctTbl",".","removeTr","(","pos",")",";","\n","}","\n","tableRows",".","remove","(","pos",")",";","\n","return","true",";","\n","}","\n","return","false",";","\n"],"docstring_tokens":["Remove","a","row","at","position","pos","from","the","table"]}
{"code_tokens":["\n","public","XWPFTableRow","getRow","(","CTRow","row",")","{","\n","for","(","int","i","=","0",";","i","<","getRows","(",")",".","size","(",")",";","i++",")","{","\n","if","(","getRows","(",")",".","get","(","i",")",".","getCtRow","(",")","==","row",")","{","\n","return","getRow","(","i",")",";","\n","}","\n","}","\n","return","null",";","\n"],"docstring_tokens":["returns","the","XWPFRow","which","belongs","to","the","CTRow","row","if","this","row","is","not","existing","in","the","table","null","will","be","returned"]}
{"code_tokens":["\n","protected","static","void","setWidthPercentage","(","CTTblWidth","ctWidth,","String","widthValue",")","{","\n","ctWidth",".","setType","(","STTblWidth",".","PCT",")",";","\n","if","(","widthValue",".","matches","(","REGEX_PERCENTAGE",")",")","{","\n","String","numberPart","=","widthValue",".","substring","(","0,","widthValue",".","length","(",")","-","1",")",";","\n","double","percentage","=","Double",".","parseDouble","(","numberPart",")","*","50",";","\n","long","intValue","=","Math",".","round","(","percentage",")",";","\n","ctWidth",".","setW","(","BigInteger",".","valueOf","(","intValue",")",")",";","\n","}","else","if","(","widthValue",".","matches","(","\"[0-9]+\"",")",")","{","\n","ctWidth",".","setW","(","new","BigInteger","(","widthValue",")",")",";","\n","}","else","{","\n","throw","new","RuntimeException","(","\"setWidthPercentage","(",")",":","Width","value","must","be","a","percentage","(","\\\"33",".","3%\\\"","or","an","integer,","was","\\\"\"","+","widthValue","+","\"\\\"\"",")",";","\n","}","\n"],"docstring_tokens":["Set","the","underlying","table","width","value","to","a","percentage","value"]}
{"code_tokens":["\n","public","short","getFontIndex","(",")","\n","{","\n","return","field_1_fontIndex",";","\n"],"docstring_tokens":["Get","the","font","index","field","for","the","FontIndex","record"]}
{"code_tokens":["\n","public","void","setFontIndex","(","short","field_1_fontIndex",")","\n","{","\n","this",".","field_1_fontIndex","=","field_1_fontIndex",";","\n"],"docstring_tokens":["Set","the","font","index","field","for","the","FontIndex","record"]}
{"code_tokens":["\n","@Override\n","public","FillStyle","getFillStyle","(",")","{","\n","return","XSLFSimpleShape",".","this::getFillPaint",";","\n"],"docstring_tokens":["fetch","shape","fill","as","a","java.awt.Paint"]}
{"code_tokens":["\n","@Override\n","public","XSSFSheet","getSheet","(",")","{","\n","return","this",".","_sheet",";","\n"],"docstring_tokens":["Returns","the","XSSFSheet","this","row","belongs","to"]}
{"code_tokens":["\n","@Override\n","public","short","getFirstCellNum","(",")","{","\n","return","(","short",")","(","_cells",".","isEmpty","(",")","?","-1",":","_cells",".","firstKey","(",")",")",";","\n"],"docstring_tokens":["Get","the","0-based","number","of","the","first","cell","contained","in","this","row"]}
{"code_tokens":["\n","@Override\n","public","boolean","getZeroHeight","(",")","{","\n","return","this",".","_row",".","getHidden","(",")",";","\n"],"docstring_tokens":["Get","whether","or","not","to","display","this","row","with","0","height"]}
{"code_tokens":["\n","@Override\n","public","void","removeCell","(","Cell","cell",")","{","\n","if","(","cell",".","getRow","(",")","!=","this",")","{","\n","throw","new","IllegalArgumentException","(","\"Specified","cell","does","not","belong","to","this","row\"",")",";","\n","}","\n","//noinspection","SuspiciousMethodCalls\n","if","(","!_cells",".","containsValue","(","cell",")",")","{","\n","throw","new","IllegalArgumentException","(","\"the","row","does","not","contain","this","cell\"",")",";","\n","}","\n\n","XSSFCell","xcell","=","(","XSSFCell",")","cell",";","\n","if","(","xcell",".","isPartOfArrayFormulaGroup","(",")",")","{","\n","xcell",".","setCellFormula","(","null",")",";","//","to","remove","the","array","formula\n","}","\n","if","(","cell",".","getCellType","(",")","==","CellType",".","FORMULA",")","{","\n","_sheet",".","getWorkbook","(",")",".","onDeleteFormula","(","xcell",")",";","\n","}","\n","//","Performance","optimization","for","bug","57840:","explicit","boxing","is","slightly","faster","than","auto-unboxing,","though","may","use","more","memory\n","final","Integer","colI","=","Integer",".","valueOf","(","cell",".","getColumnIndex","(",")",")",";","//","NOSONAR\n","XSSFCell","removed","=","_cells",".","remove","(","colI",")",";","\n\n","//","also","remove","the","corresponding","CTCell","from","the","_row",".","cArray,\n","//","it","may","not","be","at","the","same","position","right","now\n","//","thus","search","for","it\n","int","i","=","0",";","\n","for","(","CTCell","ctCell",":","_row",".","getCArray","(",")",")","{","\n","if","(","ctCell","==","removed",".","getCTCell","(",")",")","{","\n","_row",".","removeC","(","i",")",";","\n","}","\n","i++",";","\n","}","\n"],"docstring_tokens":["Remove","the","Cell","from","this","row"]}
{"code_tokens":["\n","@Internal\n","public","CTRow","getCTRow","(",")","{","\n","return","_row",";","\n"],"docstring_tokens":["Returns","the","underlying","CTRow","xml","bean","containing","all","cell","definitions","in","this","row"]}
{"code_tokens":["\n","protected","void","shift","(","int","n",")","{","\n","final","int","rownum","=","getRowNum","(",")",";","\n","final","int","newRownum","=","rownum","+","n",";","\n","String","msg","=","\"Row[rownum=\"","+","rownum","+","\"]","contains","cell","(","s",")","included","in","a","multi-cell","array","formula",".","\"","+\n","\"You","cannot","change","part","of","an","array",".","\"",";","\n","setRowNum","(","newRownum",")",";","\n","for","(","Cell","c",":","this",")","{","\n","(","(","XSSFCell",")","c",")",".","updateCellReferencesForShifting","(","msg",")",";","\n","}","\n\n"],"docstring_tokens":["update","cell","references","when","shifting","rows"]}
{"code_tokens":["\n","private","static","int","countTokensToBeSkipped","(","Ptg[]","ptgs,","int","startIndex,","int","distInBytes",")","{","\n","int","remBytes","=","distInBytes",";","\n","int","index","=","startIndex",";","\n","while","(","remBytes","!=","0",")","{","\n","index++",";","\n","if","(","index",">=","ptgs",".","length",")","{","\n","throw","new","RuntimeException","(","\"Skip","distance","too","far","(","ran","out","of","formula","tokens",")",".","\"",")",";","\n","}","\n","remBytes","-=","ptgs[index]",".","getSize","(",")",";","\n","if","(","remBytes","<","0",")","{","\n","throw","new","RuntimeException","(","\"Bad","skip","distance","(","wrong","token","size","calculation",")",".","\"",")",";","\n","}","\n","}","\n","return","index","-","startIndex",";","\n"],"docstring_tokens":["Calculates","the","number","of","tokens","that","the","evaluator","should","skip","upon","reaching","a","tAttrSkip"]}
{"code_tokens":["\n","public","void","setRow","(","int","row",")","\n","{","\n","field_1_row","=","row",";","\n"],"docstring_tokens":["set","the","row","this","cell","occurs","on"]}
{"code_tokens":["\n","public","void","setXFIndex","(","short","xf",")","\n","{","\n","field_3_xf","=","xf",";","\n"],"docstring_tokens":["set","the","index","of","the","extended","format","record","to","style","this","cell","with"]}
{"code_tokens":["\n","public","short","getXFIndex","(",")","\n","{","\n","return","field_3_xf",";","\n"],"docstring_tokens":["get","the","index","of","the","extended","format","record","to","style","this","cell","with"]}
{"code_tokens":["\n\n","public","void","setColumn","(","short","col",")","\n","{","\n","field_2_col","=","col",";","\n"],"docstring_tokens":["set","the","column","this","cell","defines","within","the","row"]}
{"code_tokens":["\n","public","short","getSid","(",")","\n","{","\n","return","sid",";","\n"],"docstring_tokens":["return","the","non","static","version","of","the","id","for","this","record"]}
{"code_tokens":["\n","public","int[]","getKnownSlideIDs","(",")","{","\n","int[]","ids","=","new","int[_slideLocations",".","size","(",")","]",";","\n","int","i","=","0",";","\n","for","(","Integer","slideId",":","_slideLocations",".","keySet","(",")",")","{","\n","ids[i++]","=","slideId",";","\n","}","\n","return","ids",";","\n"],"docstring_tokens":["Get","the","list","of","slides","that","this","PersistPtrHolder","knows","about"]}
{"code_tokens":["\n","public","void","clear","(",")","{","\n","_slideLocations",".","clear","(",")",";","\n"],"docstring_tokens":["remove","all","slide","references","Convenience","method","provided,","for","easier","reviewing","of","invocations"]}
{"code_tokens":["\n","public","static","Formula","read","(","int","encodedTokenLen,","LittleEndianInput","in,","int","totalEncodedLen",")","{","\n","byte[]","byteEncoding","=","IOUtils",".","safelyAllocate","(","totalEncodedLen,","MAX_ENCODED_LEN",")",";","\n","in",".","readFully","(","byteEncoding",")",";","\n","return","new","Formula","(","byteEncoding,","encodedTokenLen",")",";","\n"],"docstring_tokens":["When","there","are","no","array","constants","present,","encodedTokenLen==totalEncodedLen"]}
{"code_tokens":["\n","public","static","Formula","create","(","Ptg[]","ptgs",")","{","\n","if","(","ptgs","==","null","||","ptgs",".","length","<","1",")","{","\n","return","EMPTY",";","\n","}","\n","int","totalSize","=","Ptg",".","getEncodedSize","(","ptgs",")",";","\n","byte[]","encodedData","=","new","byte[totalSize]",";","\n","Ptg",".","serializePtgs","(","ptgs,","encodedData,","0",")",";","\n","int","encodedTokenLen","=","Ptg",".","getEncodedSizeWithoutArrayData","(","ptgs",")",";","\n","return","new","Formula","(","encodedData,","encodedTokenLen",")",";","\n"],"docstring_tokens":["Creates","a","Formula","object","from","a","supplied","Ptg","array"]}
{"code_tokens":["\n","public","static","Ptg[]","getTokens","(","Formula","formula",")","{","\n","if","(","formula","==","null",")","{","\n","return","null",";","\n","}","\n","return","formula",".","getTokens","(",")",";","\n"],"docstring_tokens":["Gets","the","Ptg","array","from","the","supplied","Formula"]}
{"code_tokens":["\n","public","int","getHorizontalScale","(",")","\n","{","\n","return","field_1_horizontalScale",";","\n"],"docstring_tokens":["Get","the","horizontalScale","field","for","the","PlotGrowth","record"]}
{"code_tokens":["\n","public","void","setHorizontalScale","(","int","field_1_horizontalScale",")","\n","{","\n","this",".","field_1_horizontalScale","=","field_1_horizontalScale",";","\n"],"docstring_tokens":["Set","the","horizontalScale","field","for","the","PlotGrowth","record"]}
{"code_tokens":["\n","public","int","getVerticalScale","(",")","\n","{","\n","return","field_2_verticalScale",";","\n"],"docstring_tokens":["Get","the","verticalScale","field","for","the","PlotGrowth","record"]}
{"code_tokens":["\n","public","void","setVerticalScale","(","int","field_2_verticalScale",")","\n","{","\n","this",".","field_2_verticalScale","=","field_2_verticalScale",";","\n"],"docstring_tokens":["Set","the","verticalScale","field","for","the","PlotGrowth","record"]}
{"code_tokens":["\n","public","short","getStyleIndex","(",")","\n","{","\n","return","_istd",";","\n"],"docstring_tokens":["Returns","the","index","of","the","style","which","applies","to","this","Paragraph"]}
{"code_tokens":["\n","public","int","getTabStopsNumber","(",")","\n","{","\n","return","_props",".","getItbdMac","(",")",";","\n"],"docstring_tokens":["Returns","number","of","tabs","stops","defined","for","paragraph"]}
{"code_tokens":["\n","public","ParagraphProperties","cloneProperties","(",")","{","\n","return","_props",".","copy","(",")",";","\n"],"docstring_tokens":["Clone","the","ParagraphProperties","object","associated","with","this","Paragraph,","so","that","you","can","apply","the","same","properties","to","another","Paragraph"]}
{"code_tokens":["\n","@Override\n","public","String","getSheetName","(",")","{","\n","int","indexToExternSheet","=","_definedNameRec",".","getExternSheetNumber","(",")",";","\n\n","return","_book",".","getWorkbook","(",")",".","findSheetFirstNameFromExternSheet","(","indexToExternSheet",")",";","\n"],"docstring_tokens":["Get","the","sheets","name","which","this","named","range","is","referenced","to"]}
{"code_tokens":["\n","@Override\n","public","boolean","isHidden","(",")","{","\n","return","_definedNameRec",".","isHiddenName","(",")",";","\n"],"docstring_tokens":["Checks","if","this","name","is","hidden,","eg","one","of","the","built-in","Excel","internal","names"]}
{"code_tokens":["\n","public","static","XSSFColor","toXSSFColor","(","Color","color",")","{","\n","//","FIXME:","this","method","would","be","more","useful","if","it","could","convert","any","Color","to","an","XSSFColor\n","//","Currently","the","only","benefit","of","this","method","is","to","throw","an","IllegalArgumentException\n","//","instead","of","a","ClassCastException",".","\n","if","(","color","!=","null","&&","!","(","color","instanceof","XSSFColor",")",")","{","\n","throw","new","IllegalArgumentException","(","\"Only","XSSFColor","objects","are","supported,","but","had","\"","+","color",".","getClass","(",")",")",";","\n","}","\n","return","(","XSSFColor",")","color",";","\n"],"docstring_tokens":["Checked","type","cast","color","to","an","XSSFColor"]}
{"code_tokens":["\n","public","XWPFTableCell","createCell","(",")","{","\n","XWPFTableCell","tableCell","=","new","XWPFTableCell","(","ctRow",".","addNewTc","(",")",",","this,","table",".","getBody","(",")",")",";","\n","ensureBlockLevelElement","(","tableCell",")",";","\n","tableCells",".","add","(","tableCell",")",";","\n","return","tableCell",";","\n"],"docstring_tokens":["create","a","new","XWPFTableCell","and","add","it","to","the","tableCell-list","of","this","tableRow"]}
{"code_tokens":["\n","public","List<ICell>","getTableICells","(",")","{","\n\n","List<ICell>","cells","=","new","ArrayList<>","(",")",";","\n","//Can't","use","ctRow",".","getTcList","because","that","only","gets","table","cells\n","//Can't","use","ctRow",".","getSdtList","because","that","only","gets","sdts","that","are","at","cell","level\n","XmlCursor","cursor","=","ctRow",".","newCursor","(",")",";","\n","try","{","\n","cursor",".","selectPath","(","\"",".","/*\"",")",";","\n","while","(","cursor",".","toNextSelection","(",")",")","{","\n","XmlObject","o","=","cursor",".","getObject","(",")",";","\n","if","(","o","instanceof","CTTc",")","{","\n","cells",".","add","(","new","XWPFTableCell","(","(","CTTc",")","o,","this,","table",".","getBody","(",")",")",")",";","\n","}","else","if","(","o","instanceof","CTSdtCell",")","{","\n","cells",".","add","(","new","XWPFSDTCell","(","(","CTSdtCell",")","o,","this,","table",".","getBody","(",")",")",")",";","\n","}","\n","}","\n","}","finally","{","\n","cursor",".","dispose","(",")",";","\n","}","\n","return","cells",";","\n"],"docstring_tokens":["create","and","return","a","list","of","all","XWPFTableCell","who","belongs","to","this","row"]}
{"code_tokens":["\n","private","void","unhook","(",")","{","\n","if","(","_evaluators",".","length","<","1",")","{","\n","//","Never","dismantle","the","EMPTY","environment\n","return",";","\n","}","\n","for","(","WorkbookEvaluator","evaluator",":","_evaluators",")","{","\n","evaluator",".","detachFromEnvironment","(",")",";","\n","}","\n","_unhooked","=","true",";","\n"],"docstring_tokens":["Tell","all","contained","evaluators","that","this","environment","should","be","discarded"]}
{"code_tokens":["\n","@Override\n","public","int","getRecordSize","(",")","\n","{","\n","return","8","+","8",";","\n"],"docstring_tokens":["Returns","the","number","of","bytes","that","are","required","to","serialize","this","record"]}
{"code_tokens":["\n","public","int","getLastMSOSPID","(",")","\n","{","\n","return","field_2_lastMSOSPID",";","\n"],"docstring_tokens":["The","last","shape","id","used","in","this","drawing","group"]}
{"code_tokens":["\n","public","short","getDrawingGroupId","(",")","\n","{","\n","return","(","short",")","(","getOptions","(",")",">>","4",")",";","\n"],"docstring_tokens":["Gets","the","drawing","group","id","for","this","record"]}
{"code_tokens":["\n","public","String","getText","(",")","{","\n","StringBuilder","out","=","new","StringBuilder","(","64",")",";","\n","for","(","IRunElement","run",":","iruns",")","{","\n","if","(","run","instanceof","XWPFRun",")","{","\n","XWPFRun","xRun","=","(","XWPFRun",")","run",";","\n","//","don't","include","the","text","if","reviewing","is","enabled","and","this","is","a","deleted","run\n","if","(","xRun",".","getCTR","(",")",".","getDelTextArray","(",")",".","length","==","0",")","{","\n","out",".","append","(","xRun",")",";","\n","}","\n","}","else","if","(","run","instanceof","XWPFSDT",")","{","\n","out",".","append","(","(","(","XWPFSDT",")","run",")",".","getContent","(",")",".","getText","(",")",")",";","\n","}","else","{","\n","out",".","append","(","run",")",";","\n","}","\n","}","\n","out",".","append","(","footnoteText",")",";","\n","return","out",".","toString","(",")",";","\n"],"docstring_tokens":["Return","the","textual","content","of","the","paragraph,","including","text","from","pictures","and","sdt","elements","in","it"]}
{"code_tokens":["\n","public","BigInteger","getNumStartOverride","(",")","{","\n","BigInteger","numID","=","getNumID","(",")",";","\n","XWPFNumbering","numbering","=","document",".","getNumbering","(",")",";","\n","if","(","numID","!=","null","&&","numbering","!=","null",")","{","\n","XWPFNum","num","=","numbering",".","getNum","(","numID",")",";","\n\n","if","(","num","!=","null",")","{","\n","CTNum","ctNum","=","num",".","getCTNum","(",")",";","\n","if","(","ctNum","==","null",")","{","\n","return","null",";","\n","}","\n","BigInteger","ilvl","=","getNumIlvl","(",")",";","\n","CTNumLvl","level","=","null",";","\n","for","(","int","i","=","0",";","i","<","ctNum",".","sizeOfLvlOverrideArray","(",")",";","i++",")","{","\n","CTNumLvl","ctNumLvl","=","ctNum",".","getLvlOverrideArray","(","i",")",";","\n","if","(","ctNumLvl","!=","null","&&","ctNumLvl",".","getIlvl","(",")","!=","null","&&\n","ctNumLvl",".","getIlvl","(",")",".","equals","(","ilvl",")",")","{","\n","level","=","ctNumLvl",";","\n","break",";","\n","}","\n","}","\n","if","(","level","!=","null","&&","level",".","getStartOverride","(",")","!=","null",")","{","\n","return","level",".","getStartOverride","(",")",".","getVal","(",")",";","\n","}","\n","}","\n","}","\n","return","null",";","\n"],"docstring_tokens":["Gets","the","numstartOverride","for","the","paragraph","numbering","for","this","paragraph"]}
{"code_tokens":["\n","public","Borders","getBorderTop","(",")","{","\n","CTPBdr","border","=","getCTPBrd","(","false",")",";","\n","CTBorder","ct","=","null",";","\n","if","(","border","!=","null",")","{","\n","ct","=","border",".","getTop","(",")",";","\n","}","\n","STBorder",".","Enum","ptrn","=","(","ct","!=","null",")","?","ct",".","getVal","(",")",":","STBorder",".","NONE",";","\n","return","Borders",".","valueOf","(","ptrn",".","intValue","(",")",")",";","\n"],"docstring_tokens":["Specifies","the","border","which","shall","be","displayed","above","a","set","of","paragraphs","which","have","the","same","set","of","paragraph","border","settings"]}
{"code_tokens":["\n","public","void","setStyle","(","String","styleId",")","{","\n","CTPPr","pr","=","getCTPPr","(",")",";","\n","CTString","style","=","pr",".","getPStyle","(",")","!=","null","?","pr",".","getPStyle","(",")",":","pr",".","addNewPStyle","(",")",";","\n","style",".","setVal","(","styleId",")",";","\n"],"docstring_tokens":["Set","the","style","ID","for","the","paragraph"]}
{"code_tokens":["\n","public","XWPFRun","createRun","(",")","{","\n","XWPFRun","xwpfRun","=","new","XWPFRun","(","paragraph",".","addNewR","(",")",",","(","IRunBody",")","this",")",";","\n","runs",".","add","(","xwpfRun",")",";","\n","iruns",".","add","(","xwpfRun",")",";","\n","return","xwpfRun",";","\n"],"docstring_tokens":["Appends","a","new","run","to","this","paragraph"]}
{"code_tokens":["\n","public","XWPFHyperlinkRun","createHyperlinkRun","(","String","uri",")","{","\n","//","Create","a","relationship","ID","for","this","link",".","\n","String","rId","=","getPart","(",")",".","getPackagePart","(",")",".","addExternalRelationship","(","\n","uri,","XWPFRelation",".","HYPERLINK",".","getRelation","(",")","\n",")",".","getId","(",")",";","\n\n","//","Create","the","run",".","\n","CTHyperlink","ctHyperLink","=","getCTP","(",")",".","addNewHyperlink","(",")",";","\n","ctHyperLink",".","setId","(","rId",")",";","\n","ctHyperLink",".","addNewR","(",")",";","\n\n","//","Append","this","run","to","the","paragraph",".","\n","XWPFHyperlinkRun","link","=","new","XWPFHyperlinkRun","(","ctHyperLink,","ctHyperLink",".","getRArray","(","0",")",",","this",")",";","\n","runs",".","add","(","link",")",";","\n","iruns",".","add","(","link",")",";","\n","return","link",";","\n"],"docstring_tokens":["Appends","a","new","hyperlink","run","to","this","paragraph"]}
{"code_tokens":["\n","public","XWPFFieldRun","createFieldRun","(",")","{","\n","CTSimpleField","ctSimpleField","=","paragraph",".","addNewFldSimple","(",")",";","\n","XWPFFieldRun","newRun","=","new","XWPFFieldRun","(","ctSimpleField,","ctSimpleField",".","addNewR","(",")",",","this",")",";","\n","runs",".","add","(","newRun",")",";","\n","iruns",".","add","(","newRun",")",";","\n","return","newRun",";","\n"],"docstring_tokens":["Appends","a","new","field","run","to","this","paragraph"]}
{"code_tokens":["\n","public","XWPFRun","getRun","(","CTR","r",")","{","\n","for","(","int","i","=","0",";","i","<","getRuns","(",")",".","size","(",")",";","i++",")","{","\n","if","(","getRuns","(",")",".","get","(","i",")",".","getCTR","(",")","==","r",")","{","\n","return","getRuns","(",")",".","get","(","i",")",";","\n","}","\n","}","\n","return","null",";","\n"],"docstring_tokens":["return","the","XWPFRun-Element","which","owns","the","CTR","run-Element"]}
{"code_tokens":["\n","public","void","addFootnoteReference","(","XWPFAbstractFootnoteEndnote","footnote",")","{","\n","XWPFRun","run","=","createRun","(",")",";","\n","CTR","ctRun","=","run",".","getCTR","(",")",";","\n","ctRun",".","addNewRPr","(",")",".","addNewRStyle","(",")",".","setVal","(","\"FootnoteReference\"",")",";","\n","if","(","footnote","instanceof","XWPFEndnote",")","{","\n","ctRun",".","addNewEndnoteReference","(",")",".","setId","(","footnote",".","getId","(",")",")",";","\n","}","else","{","\n","ctRun",".","addNewFootnoteReference","(",")",".","setId","(","footnote",".","getId","(",")",")",";","\n","}","\n"],"docstring_tokens":["Add","a","new","run","with","a","reference","to","the","specified","footnote"]}
{"code_tokens":["\n","public","short","getUnits","(",")","\n","{","\n","return","field_1_units",";","\n"],"docstring_tokens":["Get","the","units","field","for","the","Units","record"]}
{"code_tokens":["\n","public","void","setUnits","(","short","field_1_units",")","\n","{","\n","this",".","field_1_units","=","field_1_units",";","\n"],"docstring_tokens":["Set","the","units","field","for","the","Units","record"]}
{"code_tokens":["\n","@Internal\n","public","static","void","copyNodeRecursively","(","Entry","entry,","DirectoryEntry","target",")","\n","throws","IOException","{","\n","if","(","entry",".","isDirectoryEntry","(",")",")","{","\n","DirectoryEntry","dirEntry","=","(","DirectoryEntry",")","entry",";","\n","DirectoryEntry","newTarget","=","target",".","createDirectory","(","entry",".","getName","(",")",")",";","\n","newTarget",".","setStorageClsid","(","dirEntry",".","getStorageClsid","(",")",")",";","\n","Iterator<Entry>","entries","=","dirEntry",".","getEntries","(",")",";","\n\n","while","(","entries",".","hasNext","(",")",")","{","\n","copyNodeRecursively","(","entries",".","next","(",")",",","newTarget",")",";","\n","}","\n","}","else","{","\n","DocumentEntry","dentry","=","(","DocumentEntry",")","entry",";","\n","DocumentInputStream","dstream","=","new","DocumentInputStream","(","dentry",")",";","\n","target",".","createDocument","(","dentry",".","getName","(",")",",","dstream",")",";","\n","dstream",".","close","(",")",";","\n","}","\n"],"docstring_tokens":["Copies","an","Entry","into","a","target","POIFS","directory,","recursively"]}
{"code_tokens":["\n","@SuppressWarnings","(","\"WeakerAccess\"",")","\n","public","XSLFSlideMaster","getSlideMaster","(",")","{","\n","if","(","_master","==","null",")","{","\n","for","(","POIXMLDocumentPart","p",":","getRelations","(",")",")","{","\n","if","(","p","instanceof","XSLFSlideMaster",")","{","\n","_master","=","(","XSLFSlideMaster",")","p",";","\n","}","\n","}","\n","}","\n","if","(","_master","==","null",")","{","\n","throw","new","IllegalStateException","(","\"SlideMaster","was","not","found","for","\"","+","this",")",";","\n","}","\n","return","_master",";","\n"],"docstring_tokens":["Slide","master","object","associated","with","this","layout"]}
{"code_tokens":["\n","@SuppressWarnings","(","\"WeakerAccess\"",")","\n","public","void","copyLayout","(","XSLFSlide","slide",")","{","\n","for","(","XSLFShape","sh",":","getShapes","(",")",")","{","\n","if","(","sh","instanceof","XSLFTextShape",")","{","\n","XSLFTextShape","tsh","=","(","XSLFTextShape",")","sh",";","\n","Placeholder","ph","=","tsh",".","getTextType","(",")",";","\n","if","(","ph","==","null",")","continue",";","\n\n","switch","(","ph",")","{","\n","//","these","are","special","and","not","copied","by","default\n","case","DATETIME:\n","case","SLIDE_NUMBER:\n","case","FOOTER:\n","break",";","\n","default:\n","slide",".","getSpTree","(",")",".","addNewSp","(",")",".","set","(","tsh",".","getXmlObject","(",")",".","copy","(",")",")",";","\n","}","\n","}","\n","}","\n"],"docstring_tokens":["Copy","placeholders","from","this","layout","to","the","destination","slide"]}
{"code_tokens":["\n","public","SummaryInformation","getSummaryInformation","(",")","{","\n","if","(","!initialized",")","{","\n","readProperties","(",")",";","\n","}","\n","return","sInf",";","\n"],"docstring_tokens":["Fetch","the","Summary","Information","of","the","document"]}
{"code_tokens":["\n","public","void","draw","(","Graphics2D","graphics",")","{","\n","visitShapes","(","new","ShapeRenderer","(","graphics",")",")",";","\n"],"docstring_tokens":["Draws","the","contents","of","a","page","onto","a","Graphics2D","object"]}
{"code_tokens":["\n","@Test\n","void","setRepeatingRowsAndColumns","(",")","throws","IOException","{","\n","try","(","Workbook","wb","=","_testDataProvider",".","createWorkbook","(",")",")","{","\n","CellRangeAddress","cra","=","new","CellRangeAddress","(","0,","3,","0,","0",")",";","\n","String","expRows","=","\"1:4\",","expCols","=","\"A:A\"",";","\n\n\n","Sheet","sheet1","=","wb",".","createSheet","(",")",";","\n","sheet1",".","setRepeatingRows","(","cra",")",";","\n","sheet1",".","setRepeatingColumns","(","cra",")",";","\n","assertEquals","(","expRows,","sheet1",".","getRepeatingRows","(",")",".","formatAsString","(",")",")",";","\n","assertEquals","(","expCols,","sheet1",".","getRepeatingColumns","(",")",".","formatAsString","(",")",")",";","\n\n","//must","handle","sheets","with","quotas,","see","Bugzilla","#47294\n","Sheet","sheet2","=","wb",".","createSheet","(","\"My'","Sheet\"",")",";","\n","sheet2",".","setRepeatingRows","(","cra",")",";","\n","sheet2",".","setRepeatingColumns","(","cra",")",";","\n","assertEquals","(","expRows,","sheet2",".","getRepeatingRows","(",")",".","formatAsString","(",")",")",";","\n","assertEquals","(","expCols,","sheet2",".","getRepeatingColumns","(",")",".","formatAsString","(",")",")",";","\n","}","\n"],"docstring_tokens":["Test","to","validate","that","replacement","for","removed","setRepeatingRowsAndColumns","methods","is","still","working","correctly"]}
{"code_tokens":["\n","@Test\n","protected","void","unicodeInAll","(",")","throws","IOException","{","\n","try","(","Workbook","wb1","=","_testDataProvider",".","createWorkbook","(",")",")","{","\n","CreationHelper","factory","=","wb1",".","getCreationHelper","(",")",";","\n","//Create","a","unicode","dataformat","(","contains","euro","symbol",")","\n","DataFormat","df","=","wb1",".","createDataFormat","(",")",";","\n","final","String","formatStr","=","\"_","(","[$\\u20ac-2]\\\\\\\\\\\\","*","#,##0",".","00_",")",";","_","(","[$\\u20ac-2]\\\\\\\\\\\\","*","\\\\\\\\\\\\","(","#,##0",".","00\\\\\\\\\\\\",")",";","_","(","[$\\u20ac-2]\\\\\\\\\\\\","*\\\\\\\"\\\\-\\\\\\\\\\\"??_",")",";","_","(","@_",")","\"",";","\n","short","fmt","=","df",".","getFormat","(","formatStr",")",";","\n\n","//Create","a","unicode","sheet","name","(","euro","symbol",")","\n","Sheet","s","=","wb1",".","createSheet","(","\"\\u20ac\"",")",";","\n\n","//Set","a","unicode","header","(","you","guessed","it","the","euro","symbol",")","\n","Header","h","=","s",".","getHeader","(",")",";","\n","h",".","setCenter","(","\"\\u20ac\"",")",";","\n","h",".","setLeft","(","\"\\u20ac\"",")",";","\n","h",".","setRight","(","\"\\u20ac\"",")",";","\n\n","//Set","a","unicode","footer\n","Footer","f","=","s",".","getFooter","(",")",";","\n","f",".","setCenter","(","\"\\u20ac\"",")",";","\n","f",".","setLeft","(","\"\\u20ac\"",")",";","\n","f",".","setRight","(","\"\\u20ac\"",")",";","\n\n","Row","r","=","s",".","createRow","(","0",")",";","\n","Cell","c","=","r",".","createCell","(","1",")",";","\n","c",".","setCellValue","(","12",".","34",")",";","\n","c",".","getCellStyle","(",")",".","setDataFormat","(","fmt",")",";","\n\n","/*Cell","c2","=*/\n","r",".","createCell","(","2",")",";","//","TODO","-","c2","unused","but","changing","next","line","(","'c'->'c2'",")","causes","test","to","fail\n","c",".","setCellValue","(","factory",".","createRichTextString","(","\"\\u20ac\"",")",")",";","\n\n","Cell","c3","=","r",".","createCell","(","3",")",";","\n","String","formulaString","=","\"TEXT","(","12",".","34,\\\"\\u20ac###,##\\\"",")","\"",";","\n","c3",".","setCellFormula","(","formulaString",")",";","\n\n","try","(","Workbook","wb2","=","_testDataProvider",".","writeOutAndReadBack","(","wb1",")",")","{","\n","//Test","the","sheetname\n","s","=","wb2",".","getSheet","(","\"\\u20ac\"",")",";","\n","assertNotNull","(","s",")",";","\n\n","//Test","the","header\n","h","=","s",".","getHeader","(",")",";","\n","assertEquals","(","\"\\u20ac\",","h",".","getCenter","(",")",")",";","\n","assertEquals","(","\"\\u20ac\",","h",".","getLeft","(",")",")",";","\n","assertEquals","(","\"\\u20ac\",","h",".","getRight","(",")",")",";","\n\n","//Test","the","footer\n","f","=","s",".","getFooter","(",")",";","\n","assertEquals","(","\"\\u20ac\",","f",".","getCenter","(",")",")",";","\n","assertEquals","(","\"\\u20ac\",","f",".","getLeft","(",")",")",";","\n","assertEquals","(","\"\\u20ac\",","f",".","getRight","(",")",")",";","\n\n","//Test","the","dataformat\n","r","=","s",".","getRow","(","0",")",";","\n","c","=","r",".","getCell","(","1",")",";","\n","df","=","wb2",".","createDataFormat","(",")",";","\n","assertEquals","(","formatStr,","df",".","getFormat","(","c",".","getCellStyle","(",")",".","getDataFormat","(",")",")",")",";","\n\n","//Test","the","cell","string","value\n","/*c2","=*/\n","r",".","getCell","(","2",")",";","\n","assertEquals","(","\"\\u20ac\",","c",".","getRichStringCellValue","(",")",".","getString","(",")",")",";","\n\n","//Test","the","cell","formula\n","c3","=","r",".","getCell","(","3",")",";","\n","assertEquals","(","c3",".","getCellFormula","(",")",",","formulaString",")",";","\n","}","\n","}","\n"],"docstring_tokens":["Tests","that","all","the","unicode","capable","string","fields","can","be","set,","written","and","then","read","back"]}
{"code_tokens":["\n","public","String","getText","(",")","{","\n","try","{","\n","XSSFBSharedStringsTable","strings","=","new","XSSFBSharedStringsTable","(","getPackage","(",")",")",";","\n","XSSFBReader","xssfbReader","=","new","XSSFBReader","(","getPackage","(",")",")",";","\n","XSSFBStylesTable","styles","=","xssfbReader",".","getXSSFBStylesTable","(",")",";","\n","XSSFBReader",".","SheetIterator","iter","=","(","XSSFBReader",".","SheetIterator",")","xssfbReader",".","getSheetsData","(",")",";","\n\n","StringBuilder","text","=","new","StringBuilder","(","64",")",";","\n","SheetTextExtractor","sheetExtractor","=","new","SheetTextExtractor","(",")",";","\n","XSSFBHyperlinksTable","hyperlinksTable","=","null",";","\n","while","(","iter",".","hasNext","(",")",")","{","\n","try","(","InputStream","stream","=","iter",".","next","(",")",")","{","\n","if","(","getIncludeSheetNames","(",")",")","{","\n","text",".","append","(","iter",".","getSheetName","(",")",")",";","\n","text",".","append","(","'\\n'",")",";","\n","}","\n","if","(","handleHyperlinksInCells",")","{","\n","hyperlinksTable","=","new","XSSFBHyperlinksTable","(","iter",".","getSheetPart","(",")",")",";","\n","}","\n","XSSFBCommentsTable","comments","=","getIncludeCellComments","(",")","?","iter",".","getXSSFBSheetComments","(",")",":","null",";","\n","processSheet","(","sheetExtractor,","styles,","comments,","strings,","stream",")",";","\n","if","(","getIncludeHeadersFooters","(",")",")","{","\n","sheetExtractor",".","appendHeaderText","(","text",")",";","\n","}","\n","sheetExtractor",".","appendCellText","(","text",")",";","\n","if","(","getIncludeTextBoxes","(",")",")","{","\n","processShapes","(","iter",".","getShapes","(",")",",","text",")",";","\n","}","\n","if","(","getIncludeHeadersFooters","(",")",")","{","\n","sheetExtractor",".","appendFooterText","(","text",")",";","\n","}","\n","sheetExtractor",".","reset","(",")",";","\n","}","\n","}","\n\n","return","text",".","toString","(",")",";","\n","}","catch","(","IOException","|","OpenXML4JException","|","SAXException","e",")","{","\n","LOGGER",".","atWarn","(",")",".","withThrowable","(","e",")",".","log","(","\"Failed","to","load","text\"",")",";","\n","return","\"\"",";","\n","}","\n"],"docstring_tokens":["Processes","the","file","and","returns","the","text"]}
{"code_tokens":["\n","public","void","setItcFirst","(","byte","value",")","\n","{","\n","field_2_bkf_flags","=","(","short",")","itcFirst",".","setValue","(","field_2_bkf_flags,","value",")",";","\n"],"docstring_tokens":["Sets","the","itcFirst","field","value"]}
{"code_tokens":["\n","protected","void","generateData","(",")","{","\n","int","size","=","0",";","\n","for","(","int","i=0",";","i<records",".","length",";","i++",")","{","\n","size","+=","records[i]",".","getRecordSize","(",")",";","\n","}","\n\n","byte[]","data","=","IOUtils",".","safelyAllocate","(","size,","MAX_RECORD_LENGTH",")",";","\n","size","=","0",";","\n","for","(","int","i=0",";","i<records",".","length",";","i++",")","{","\n","int","thisSize","=\n","records[i]",".","serialize","(","size,","data",")",";","\n","size","+=","thisSize",";","\n","}","\n","\n","setData","(","data",")",";","\n"],"docstring_tokens":["Serialises","our","Escher","children","back","into","bytes"]}
{"code_tokens":["\n\n","public","void","setProtect","(","boolean","protect",")","\n","{","\n","if","(","protect",")","\n","{","\n","field_1_protect","=","1",";","\n","}","\n","else\n","{","\n","field_1_protect","=","0",";","\n","}","\n"],"docstring_tokens":["set","whether","the","sheet","is","protected","or","not"]}
{"code_tokens":["\n","protected","void","breakText","(","Graphics2D","graphics",")","{","\n","lines",".","clear","(",")",";","\n\n","DrawFactory","fact","=","DrawFactory",".","getInstance","(","graphics",")",";","\n","StringBuilder","text","=","new","StringBuilder","(",")",";","\n\n","List<AttributedStringData>","attList","=","getAttributedString","(","graphics,","text",")",";","\n","AttributedString","as","=","new","AttributedString","(","text",".","toString","(",")",")",";","\n","AttributedString","asNoCR","=","new","AttributedString","(","text",".","toString","(",")",".","replaceAll","(","\"[\\\\r\\\\n]\",","\"","\"",")",")",";","\n\n","for","(","AttributedStringData","asd",":","attList",")","{","\n","as",".","addAttribute","(","asd",".","attribute,","asd",".","value,","asd",".","beginIndex,","asd",".","endIndex",")",";","\n","asNoCR",".","addAttribute","(","asd",".","attribute,","asd",".","value,","asd",".","beginIndex,","asd",".","endIndex",")",";","\n","}","\n\n","AttributedCharacterIterator","it","=","as",".","getIterator","(",")",";","\n","AttributedCharacterIterator","itNoCR","=","asNoCR",".","getIterator","(",")",";","\n","LineBreakMeasurer","measurer","=","new","LineBreakMeasurer","(","it,","graphics",".","getFontRenderContext","(",")",")",";","\n","for","(",";",";",")","{","\n","int","startIndex","=","measurer",".","getPosition","(",")",";","\n\n","//","add","a","pixel","to","compensate","rounding","errors\n","double","wrappingWidth","=","getWrappingWidth","(","lines",".","isEmpty","(",")",",","graphics",")","+","1",";","\n","//","shape","width","can","be","smaller","that","the","sum","of","insets","(","this","was","proved","by","a","test","file",")","\n","if","(","wrappingWidth","<","0",")","{","\n","wrappingWidth","=","1",";","\n","}","\n\n","//","usually","\"\\n\"","is","added","after","a","line,","if","it","occurs","before","it","-","only","possible","as","first","char","-\n","//","we","need","to","add","an","empty","line\n","TextLayout","layout",";","\n","int","endIndex",";","\n","if","(","startIndex","==","0","&&","text",".","toString","(",")",".","startsWith","(","\"\\n\"",")",")","{","\n","layout","=","measurer",".","nextLayout","(","(","float",")","wrappingWidth,","1,","false",")",";","\n","endIndex","=","1",";","\n","}","else","{","\n","int","nextBreak","=","text",".","indexOf","(","\"\\n\",","startIndex","+","1",")",";","\n","if","(","nextBreak","==","-1",")","{","\n","nextBreak","=","it",".","getEndIndex","(",")",";","\n","}","\n\n","layout","=","measurer",".","nextLayout","(","(","float",")","wrappingWidth,","nextBreak,","true",")",";","\n","if","(","layout","==","null",")","{","\n","//","layout","can","be","null","if","the","entire","word","at","the","current","position\n","//","does","not","fit","within","the","wrapping","width",".","Try","with","requireNextWord=false",".","\n","layout","=","measurer",".","nextLayout","(","(","float",")","wrappingWidth,","nextBreak,","false",")",";","\n","}","\n\n","if","(","layout","==","null",")","{","\n","//","exit","if","can't","break","any","more\n","break",";","\n","}","\n\n","endIndex","=","measurer",".","getPosition","(",")",";","\n","//","skip","over","new","line","breaks","(","we","paint","'clear'","text","runs","not","starting","or","ending","with","\\n",")","\n","if","(","endIndex","<","it",".","getEndIndex","(",")","&&","text",".","charAt","(","endIndex",")","==","'\\n'",")","{","\n","measurer",".","setPosition","(","endIndex","+","1",")",";","\n","}","\n\n","TextAlign","hAlign","=","paragraph",".","getTextAlign","(",")",";","\n","if","(","hAlign","==","TextAlign",".","JUSTIFY","||","hAlign","==","TextAlign",".","JUSTIFY_LOW",")","{","\n","layout","=","layout",".","getJustifiedLayout","(","(","float",")","wrappingWidth",")",";","\n","}","\n","}","\n\n","AttributedString","str","=","new","AttributedString","(","itNoCR,","startIndex,","endIndex",")",";","\n","DrawTextFragment","line","=","fact",".","getTextFragment","(","layout,","str",")",";","\n","lines",".","add","(","line",")",";","\n\n","if","(","endIndex","==","it",".","getEndIndex","(",")",")","{","\n","break",";","\n","}","\n","}","\n\n","rawText","=","text",".","toString","(",")",";","\n"],"docstring_tokens":["break","text","into","lines,","each","representing","a","line","of","text","that","fits","in","the","wrapping","width"]}
{"code_tokens":["\n","protected","double","getWrappingWidth","(","boolean","firstLine,","Graphics2D","graphics",")","{","\n","final","long","TAB_SIZE","=","347663L",";","\n","TextShape<?,?>","ts","=","paragraph",".","getParentShape","(",")",";","\n\n","//","internal","margins","for","the","text","box\n","Insets2D","insets","=","ts",".","getInsets","(",")",";","\n","double","leftInset","=","insets",".","left",";","\n","double","rightInset","=","insets",".","right",";","\n\n","int","indentLevel","=","paragraph",".","getIndentLevel","(",")",";","\n","if","(","indentLevel","==","-1",")","{","\n","//","default","to","0,","if","indentLevel","is","not","set\n","indentLevel","=","0",";","\n","}","\n","Double","leftMargin","=","paragraph",".","getLeftMargin","(",")",";","\n","if","(","leftMargin","==","null",")","{","\n","//","if","the","marL","attribute","is","omitted,","then","a","value","of","347663","is","implied\n","leftMargin","=","Units",".","toPoints","(","TAB_SIZE","*","indentLevel",")",";","\n","}","\n","Double","indent","=","paragraph",".","getIndent","(",")",";","\n","if","(","indent","==","null",")","{","\n","indent","=","0",".",";","\n","}","\n","Double","rightMargin","=","paragraph",".","getRightMargin","(",")",";","\n","if","(","rightMargin","==","null",")","{","\n","rightMargin","=","0d",";","\n","}","\n\n","Rectangle2D","anchor","=","DrawShape",".","getAnchor","(","graphics,","ts",")",";","\n","TextDirection","textDir","=","ts",".","getTextDirection","(",")",";","\n","double","width",";","\n","if","(","!ts",".","getWordWrap","(",")",")","{","\n","Dimension","pageDim","=","ts",".","getSheet","(",")",".","getSlideShow","(",")",".","getPageSize","(",")",";","\n","//","if","wordWrap","==","false","then","we","return","the","advance","to","the","(","right",")","border","of","the","sheet\n","switch","(","textDir",")","{","\n","default:\n","width","=","pageDim",".","getWidth","(",")","-","anchor",".","getX","(",")",";","\n","break",";","\n","case","VERTICAL:\n","width","=","pageDim",".","getHeight","(",")","-","anchor",".","getX","(",")",";","\n","break",";","\n","case","VERTICAL_270:\n","width","=","anchor",".","getX","(",")",";","\n","break",";","\n","}","\n","}","else","{","\n","switch","(","textDir",")","{","\n","default:\n","width","=","anchor",".","getWidth","(",")","-","leftInset","-","rightInset","-","leftMargin","-","rightMargin",";","\n","break",";","\n","case","VERTICAL:\n","case","VERTICAL_270:\n","width","=","anchor",".","getHeight","(",")","-","leftInset","-","rightInset","-","leftMargin","-","rightMargin",";","\n","break",";","\n","}","\n","if","(","firstLine","&&","bullet","==","null",")","{","\n","//","indent","is","usually","negative","in","XSLF\n","width","+=","isHSLF","(",")","?","(","leftMargin","-","indent",")",":","-indent",";","\n","}","\n","}","\n\n","return","width",";","\n"],"docstring_tokens":["Returns","wrapping","width","to","break","lines","in","this","paragraph"]}
{"code_tokens":["\n","public","void","serialize","(","LittleEndianOutput","out",")","{","\n","out",".","write","(","_rawData",")",";","\n"],"docstring_tokens":["spit","the","record","out","AS","IS"]}
{"code_tokens":["\n","public","short","getCategoryDataType","(",")","\n","{","\n","return","field_1_categoryDataType",";","\n"],"docstring_tokens":["Get","the","category","data","type","field","for","the","Series","record"]}
{"code_tokens":["\n","public","void","setCategoryDataType","(","short","field_1_categoryDataType",")","\n","{","\n","this",".","field_1_categoryDataType","=","field_1_categoryDataType",";","\n"],"docstring_tokens":["Set","the","category","data","type","field","for","the","Series","record"]}
{"code_tokens":["\n","public","short","getValuesDataType","(",")","\n","{","\n","return","field_2_valuesDataType",";","\n"],"docstring_tokens":["Get","the","values","data","type","field","for","the","Series","record"]}
{"code_tokens":["\n","public","void","setValuesDataType","(","short","field_2_valuesDataType",")","\n","{","\n","this",".","field_2_valuesDataType","=","field_2_valuesDataType",";","\n"],"docstring_tokens":["Set","the","values","data","type","field","for","the","Series","record"]}
{"code_tokens":["\n","public","short","getNumCategories","(",")","\n","{","\n","return","field_3_numCategories",";","\n"],"docstring_tokens":["Get","the","num","categories","field","for","the","Series","record"]}
{"code_tokens":["\n","public","void","setNumCategories","(","short","field_3_numCategories",")","\n","{","\n","this",".","field_3_numCategories","=","field_3_numCategories",";","\n"],"docstring_tokens":["Set","the","num","categories","field","for","the","Series","record"]}
{"code_tokens":["\n","public","short","getNumValues","(",")","\n","{","\n","return","field_4_numValues",";","\n"],"docstring_tokens":["Get","the","num","values","field","for","the","Series","record"]}
{"code_tokens":["\n","public","void","setNumValues","(","short","field_4_numValues",")","\n","{","\n","this",".","field_4_numValues","=","field_4_numValues",";","\n"],"docstring_tokens":["Set","the","num","values","field","for","the","Series","record"]}
{"code_tokens":["\n","public","short","getBubbleSeriesType","(",")","\n","{","\n","return","field_5_bubbleSeriesType",";","\n"],"docstring_tokens":["Get","the","bubble","series","type","field","for","the","Series","record"]}
{"code_tokens":["\n","public","void","setBubbleSeriesType","(","short","field_5_bubbleSeriesType",")","\n","{","\n","this",".","field_5_bubbleSeriesType","=","field_5_bubbleSeriesType",";","\n"],"docstring_tokens":["Set","the","bubble","series","type","field","for","the","Series","record"]}
{"code_tokens":["\n","public","short","getNumBubbleValues","(",")","\n","{","\n","return","field_6_numBubbleValues",";","\n"],"docstring_tokens":["Get","the","num","bubble","values","field","for","the","Series","record"]}
{"code_tokens":["\n","public","void","setNumBubbleValues","(","short","field_6_numBubbleValues",")","\n","{","\n","this",".","field_6_numBubbleValues","=","field_6_numBubbleValues",";","\n"],"docstring_tokens":["Set","the","num","bubble","values","field","for","the","Series","record"]}
{"code_tokens":["\n","@Internal\n","@Override\n","protected","void","setSlideShow","(","HSLFSlideShow","ss",")","{","\n","super",".","setSlideShow","(","ss",")",";","\n\n","//after","the","slide","show","is","assigned","collect","all","available","style","records\n","assert","(","_txmaster","==","null",")",";","\n","_txmaster","=","new","TxMasterStyleAtom[9]",";","\n\n","if","(","getSlideShow","(",")","==","null","||","getSlideShow","(",")",".","getDocumentRecord","(",")","==","null","||\n","getSlideShow","(",")",".","getDocumentRecord","(",")",".","getEnvironment","(",")","==","null",")","{","\n","throw","new","IllegalStateException","(","\"Did","not","find","a","TxMasterStyleAtom","in","the","current","slide","show\"",")",";","\n","}","\n\n","TxMasterStyleAtom","txdoc","=","getSlideShow","(",")",".","getDocumentRecord","(",")",".","getEnvironment","(",")",".","getTxMasterStyleAtom","(",")",";","\n","if","(","txdoc","==","null",")","{","\n","throw","new","IllegalStateException","(","\"Did","not","find","a","TxMasterStyleAtom","in","the","current","slide","show\"",")",";","\n","}","\n\n","_txmaster[txdoc",".","getTextType","(",")","]","=","txdoc",";","\n\n","TxMasterStyleAtom[]","txrec","=","(","(","MainMaster",")","getSheetContainer","(",")",")",".","getTxMasterStyleAtoms","(",")",";","\n","for","(","TxMasterStyleAtom","txMasterStyleAtom",":","txrec",")","{","\n","int","txType","=","txMasterStyleAtom",".","getTextType","(",")",";","\n","if","(","txType","<","_txmaster",".","length","&&","_txmaster[txType]","==","null",")","{","\n","_txmaster[txType]","=","txMasterStyleAtom",";","\n","}","\n","}","\n\n","for","(","List<HSLFTextParagraph>","paras",":","getTextParagraphs","(",")",")","{","\n","for","(","HSLFTextParagraph","htp",":","paras",")","{","\n","int","txType","=","htp",".","getRunType","(",")",";","\n","if","(","txType",">=","_txmaster",".","length","||","_txmaster[txType]","==","null",")","{","\n","throw","new","HSLFException","(","\"Master","styles","not","initialized\"",")",";","\n","}","\n\n","int","level","=","htp",".","getIndentLevel","(",")",";","\n\n","List<TextPropCollection>","charStyles","=","_txmaster[txType]",".","getCharacterStyles","(",")",";","\n","List<TextPropCollection>","paragraphStyles","=","_txmaster[txType]",".","getParagraphStyles","(",")",";","\n","if","(","charStyles","==","null","||","paragraphStyles","==","null","||\n","charStyles",".","size","(",")","<=","level","||","paragraphStyles",".","size","(",")","<=","level",")","{","\n","throw","new","HSLFException","(","\"Master","styles","not","initialized\"",")",";","\n","}","\n","}","\n","}","\n"],"docstring_tokens":["Assign","SlideShow","for","this","slide","master"]}
{"code_tokens":["\n","private","int","store","(","InputStream","stream",")","throws","IOException","{","\n","final","int","bigBlockSize","=","POIFSConstants",".","BIG_BLOCK_MINIMUM_DOCUMENT_SIZE",";","\n","BufferedInputStream","bis","=","new","BufferedInputStream","(","stream,","bigBlockSize","+","1",")",";","\n","bis",".","mark","(","bigBlockSize",")",";","\n\n","//","Do","we","need","to","store","as","a","mini","stream","or","a","full","one?\n","long","streamBlockSize","=","IOUtils",".","skipFully","(","bis,","bigBlockSize",")",";","\n","if","(","streamBlockSize","<","bigBlockSize",")","{","\n","_stream","=","new","POIFSStream","(","_filesystem",".","getMiniStore","(",")",")",";","\n","_block_size","=","_filesystem",".","getMiniStore","(",")",".","getBlockStoreBlockSize","(",")",";","\n","}","else","{","\n","_stream","=","new","POIFSStream","(","_filesystem",")",";","\n","_block_size","=","_filesystem",".","getBlockStoreBlockSize","(",")",";","\n","}","\n\n","//","start","from","the","beginning\n","bis",".","reset","(",")",";","\n\n","//","Store","it\n","final","long","length",";","\n","try","(","OutputStream","os","=","_stream",".","getOutputStream","(",")",")","{","\n","length","=","IOUtils",".","copy","(","bis,","os",")",";","\n\n","//","Pad","to","the","end","of","the","block","with","-1s\n","int","usedInBlock","=","(","int",")","(","length","%","_block_size",")",";","\n","if","(","usedInBlock","!=","0","&&","usedInBlock","!=","_block_size",")","{","\n","int","toBlockEnd","=","_block_size","-","usedInBlock",";","\n","byte[]","padding","=","IOUtils",".","safelyAllocate","(","toBlockEnd,","POIFSFileSystem",".","getMaxRecordLength","(",")",")",";","\n","Arrays",".","fill","(","padding,","(","byte",")","0xFF",")",";","\n","os",".","write","(","padding",")",";","\n","}","\n","}","\n\n","return","Math",".","toIntExact","(","length",")",";","\n"],"docstring_tokens":["Stores","the","given","data","for","this","Document"]}
{"code_tokens":["\n","void","free","(",")","throws","IOException","{","\n","_stream",".","free","(",")",";","\n","_property",".","setStartBlock","(","POIFSConstants",".","END_OF_CHAIN",")",";","\n"],"docstring_tokens":["Frees","the","underlying","stream","and","property"]}
{"code_tokens":["\n","private","void","openWorkbook","(","File","file",")","throws","FileNotFoundException,","IOException","{","\n","System",".","out",".","println","(","\"Opening","workbook","[\"","+","file",".","getName","(",")","+","\"]\"",")",";","\n","try","(","FileInputStream","fis","=","new","FileInputStream","(","file",")",")","{","\n\n","//","Open","the","workbook","and","then","create","the","FormulaEvaluator","and\n","//","DataFormatter","instances","that","will","be","needed","to,","respectively,\n","//","force","evaluation","of","forumlae","found","in","cells","and","create","a\n","//","formatted","String","encapsulating","the","cells","contents",".","\n","this",".","workbook","=","WorkbookFactory",".","create","(","fis",")",";","\n","this",".","evaluator","=","this",".","workbook",".","getCreationHelper","(",")",".","createFormulaEvaluator","(",")",";","\n","this",".","formatter","=","new","DataFormatter","(","true",")",";","\n","}","\n"],"docstring_tokens":["Open","an","Excel","workbook","ready","for","conversion"]}
{"code_tokens":["\n","private","void","saveCSVFile","(","File","file",")","throws","IOException","{","\n","ArrayList<String>","line",";","\n","StringBuilder","buffer",";","\n","String","csvLineElement",";","\n\n","//","Open","a","writer","onto","the","CSV","file",".","\n","try","(","BufferedWriter","bw","=","Files",".","newBufferedWriter","(","file",".","toPath","(",")",",","StandardCharsets",".","ISO_8859_1",")",")","{","\n\n","System",".","out",".","println","(","\"Saving","the","CSV","file","[\"","+","file",".","getName","(",")","+","\"]\"",")",";","\n\n","//","Step","through","the","elements","of","the","ArrayList","that","was","used","to","hold\n","//","all","of","the","data","recovered","from","the","Excel","workbooks'","sheets,","rows\n","//","and","cells",".","\n","for","(","int","i","=","0",";","i","<","this",".","csvData",".","size","(",")",";","i++",")","{","\n","buffer","=","new","StringBuilder","(",")",";","\n\n","//","Get","an","element","from","the","ArrayList","that","contains","the","data","for\n","//","the","workbook",".","This","element","will","itself","be","an","ArrayList\n","//","containing","Strings","and","each","String","will","hold","the","data","recovered\n","//","from","a","single","cell",".","The","for","(",")","loop","is","used","to","recover","elements\n","//","from","this","'row'","ArrayList","one","at","a","time","and","to","write","the","Strings\n","//","away","to","a","StringBuilder","thus","assembling","a","single","line","for","inclusion\n","//","in","the","CSV","file",".","If","a","row","was","empty","or","if","it","was","short,","then\n","//","the","ArrayList","that","contains","it's","data","will","also","be","shorter","than\n","//","some","of","the","others",".","Therefore,","it","is","necessary","to","check","within\n","//","the","for","loop","to","ensure","that","the","ArrayList","contains","data","to","be\n","//","processed",".","If","it","does,","then","an","element","will","be","recovered","and\n","//","appended","to","the","StringBuilder",".","\n","line","=","this",".","csvData",".","get","(","i",")",";","\n","for","(","int","j","=","0",";","j","<","this",".","maxRowWidth",";","j++",")","{","\n","if","(","line",".","size","(",")",">","j",")","{","\n","csvLineElement","=","line",".","get","(","j",")",";","\n","if","(","csvLineElement","!=","null",")","{","\n","buffer",".","append","(","this",".","escapeEmbeddedCharacters","(","\n","csvLineElement",")",")",";","\n","}","\n","}","\n","if","(","j","<","(","this",".","maxRowWidth","-","1",")",")","{","\n","buffer",".","append","(","this",".","separator",")",";","\n","}","\n","}","\n\n","//","Once","the","line","is","built,","write","it","away","to","the","CSV","file",".","\n","bw",".","write","(","buffer",".","toString","(",")",".","trim","(",")",")",";","\n\n","//","Condition","the","inclusion","of","new","line","characters","so","as","to\n","//","avoid","an","additional,","superfluous,","new","line","at","the","end","of\n","//","the","file",".","\n","if","(","i","<","(","this",".","csvData",".","size","(",")","-","1",")",")","{","\n","bw",".","newLine","(",")",";","\n","}","\n","}","\n","}","\n"],"docstring_tokens":["Called","to","actually","save","the","data","recovered","from","the","Excel","workbook","as","a","CSV","file"]}
{"code_tokens":["\n","private","void","rowToCSV","(","Row","row",")","{","\n","Cell","cell",";","\n","int","lastCellNum",";","\n","ArrayList<String>","csvLine","=","new","ArrayList<>","(",")",";","\n\n","//","Check","to","ensure","that","a","row","was","recovered","from","the","sheet","as","it","is\n","//","possible","that","one","or","more","rows","between","other","populated","rows","could","be\n","//","missing","-","blank",".","If","the","row","does","contain","cells","then",".",".",".","\n","if","(","row","!=","null",")","{","\n\n","//","Get","the","index","for","the","right","most","cell","on","the","row","and","then\n","//","step","along","the","row","from","left","to","right","recovering","the","contents\n","//","of","each","cell,","converting","that","into","a","formatted","String","and\n","//","then","storing","the","String","into","the","csvLine","ArrayList",".","\n","lastCellNum","=","row",".","getLastCellNum","(",")",";","\n","for","(","int","i","=","0",";","i","<=","lastCellNum",";","i++",")","{","\n","cell","=","row",".","getCell","(","i",")",";","\n","if","(","cell","==","null",")","{","\n","csvLine",".","add","(","\"\"",")",";","\n","}","\n","else","{","\n","if","(","cell",".","getCellType","(",")","!=","CellType",".","FORMULA",")","{","\n","csvLine",".","add","(","this",".","formatter",".","formatCellValue","(","cell",")",")",";","\n","}","\n","else","{","\n","csvLine",".","add","(","this",".","formatter",".","formatCellValue","(","cell,","this",".","evaluator",")",")",";","\n","}","\n","}","\n","}","\n","//","Make","a","note","of","the","index","number","of","the","right","most","cell",".","This","value\n","//","will","later","be","used","to","ensure","that","the","matrix","of","data","in","the","CSV","file\n","//","is","square",".","\n","if","(","lastCellNum",">","this",".","maxRowWidth",")","{","\n","this",".","maxRowWidth","=","lastCellNum",";","\n","}","\n","}","\n","this",".","csvData",".","add","(","csvLine",")",";","\n"],"docstring_tokens":["Called","to","convert","a","row","of","cells","into","a","line","of","data","that","can","later","be","output","to","the","CSV","file"]}
{"code_tokens":["\n","public","static","OPCPackage","create","(","String","path",")","{","\n","return","create","(","new","File","(","path",")",")",";","\n"],"docstring_tokens":["Creates","a","new","package"]}
{"code_tokens":["\n","public","void","revert","(",")","{","\n","revertImpl","(",")",";","\n"],"docstring_tokens":["Close","the","package","WITHOUT","saving","its","content"]}
{"code_tokens":["\n","public","PackageProperties","getPackageProperties","(",")","\n","throws","InvalidFormatException","{","\n","this",".","throwExceptionIfWriteOnly","(",")",";","\n","//","If","no","properties","part","has","been","found","then","we","create","one\n","if","(","this",".","packageProperties","==","null",")","{","\n","this",".","packageProperties","=","new","PackagePropertiesPart","(","this,\n","PackagingURIHelper",".","CORE_PROPERTIES_PART_NAME",")",";","\n","}","\n","return","this",".","packageProperties",";","\n"],"docstring_tokens":["Retrieves","or","creates","if","none","exists,","core","package","property","part"]}
{"code_tokens":["\n","public","PackagePart","getPart","(","PackagePartName","partName",")","{","\n","throwExceptionIfWriteOnly","(",")",";","\n\n","if","(","partName","==","null",")","{","\n","throw","new","IllegalArgumentException","(","\"partName\"",")",";","\n","}","\n\n","//","If","the","partlist","is","null,","then","we","parse","the","package",".","\n","if","(","partList","==","null",")","{","\n","try","{","\n","getParts","(",")",";","\n","}","catch","(","InvalidFormatException","e",")","{","\n","return","null",";","\n","}","\n","}","\n\n","return","partList",".","get","(","partName",")",";","\n"],"docstring_tokens":["Retrieve","a","part","identified","by","its","name"]}
{"code_tokens":["\n","public","PackagePart","getPart","(","PackageRelationship","partRel",")","{","\n","PackagePart","retPart","=","null",";","\n","ensureRelationships","(",")",";","\n","for","(","PackageRelationship","rel",":","relationships",")","{","\n","if","(","rel",".","getRelationshipType","(",")",".","equals","(","partRel",".","getRelationshipType","(",")",")",")","{","\n","try","{","\n","retPart","=","getPart","(","PackagingURIHelper",".","createPartName","(","rel\n",".","getTargetURI","(",")",")",")",";","\n","}","catch","(","InvalidFormatException","e",")","{","\n","continue",";","\n","}","\n","break",";","\n","}","\n","}","\n","return","retPart",";","\n"],"docstring_tokens":["Get","the","target","part","from","the","specified","relationship"]}
{"code_tokens":["\n","public","PackagePart","createPart","(","PackagePartName","partName,","String","contentType",")","{","\n","return","this",".","createPart","(","partName,","contentType,","true",")",";","\n"],"docstring_tokens":["Create","and","add","a","part,","with","the","specified","name","and","content","type,","to","the","package"]}
{"code_tokens":["\n","public","void","removePart","(","PackagePartName","partName",")","{","\n","throwExceptionIfReadOnly","(",")",";","\n","if","(","partName","==","null","||","!this",".","containPart","(","partName",")",")","{","\n","throw","new","IllegalArgumentException","(","\"partName\"",")",";","\n","}","\n\n","//","Delete","the","specified","part","from","the","package",".","\n","if","(","this",".","partList",".","containsKey","(","partName",")",")","{","\n","this",".","partList",".","get","(","partName",")",".","setDeleted","(","true",")",";","\n","this",".","removePartImpl","(","partName",")",";","\n","this",".","partList",".","remove","(","partName",")",";","\n","}","else","{","\n","this",".","removePartImpl","(","partName",")",";","\n","}","\n\n","//","Delete","content","type\n","this",".","contentTypeManager",".","removeContentType","(","partName",")",";","\n\n","//","If","this","part","is","a","relationship","part,","then","delete","all","relationships","of\n","//","the","source","part",".","\n","if","(","partName",".","isRelationshipPartURI","(",")",")","{","\n","URI","sourceURI","=","PackagingURIHelper\n",".","getSourcePartUriFromRelationshipPartUri","(","partName",".","getURI","(",")",")",";","\n","PackagePartName","sourcePartName",";","\n","try","{","\n","sourcePartName","=","PackagingURIHelper",".","createPartName","(","sourceURI",")",";","\n","}","catch","(","InvalidFormatException","e",")","{","\n","LOG",".","atError","(",")",".","log","(","\"Part","name","URI","'","{","}","'","is","not","valid!","This","message","is","not","intended","to","be","displayed!\",","sourceURI",")",";","\n","return",";","\n","}","\n","if","(","sourcePartName",".","getURI","(",")",".","equals","(","\n","PackagingURIHelper",".","PACKAGE_ROOT_URI",")",")","{","\n","clearRelationships","(",")",";","\n","}","else","if","(","containPart","(","sourcePartName",")",")","{","\n","PackagePart","part","=","getPart","(","sourcePartName",")",";","\n","if","(","part","!=","null",")","{","\n","part",".","clearRelationships","(",")",";","\n","}","\n","}","\n","}","\n\n","this",".","isDirty","=","true",";","\n"],"docstring_tokens":["Remove","a","part","in","this","package"]}
{"code_tokens":["\n","public","boolean","containPart","(","PackagePartName","partName",")","{","\n","return","(","this",".","getPart","(","partName",")","!=","null",")",";","\n"],"docstring_tokens":["Check","if","a","part","already","exists","in","this","package","from","its","name"]}
{"code_tokens":["\n","@Override\n","public","PackageRelationship","addRelationship","(","PackagePartName","targetPartName,\n","TargetMode","targetMode,","String","relationshipType",")","{","\n","return","this",".","addRelationship","(","targetPartName,","targetMode,\n","relationshipType,","null",")",";","\n"],"docstring_tokens":["Add","a","package","relationship"]}
{"code_tokens":["\n","public","void","save","(","File","targetFile",")","throws","IOException","{","\n","if","(","targetFile","==","null",")","{","\n","throw","new","IllegalArgumentException","(","\"targetFile\"",")",";","\n","}","\n\n","this",".","throwExceptionIfReadOnly","(",")",";","\n\n","//","You","shouldn't","save","the","the","same","file,","do","a","close","instead\n","if","(","targetFile",".","exists","(",")","&&\n","targetFile",".","getAbsolutePath","(",")",".","equals","(","this",".","originalPackagePath",")",")","{","\n","throw","new","InvalidOperationException","(","\n","\"You","can't","call","save","(","File",")","to","save","to","the","currently","open","\"","+\n","\"file",".","To","save","to","the","current","file,","please","just","call","close","(",")","\"\n",")",";","\n","}","\n\n","//","Do","the","save\n","try","(","FileOutputStream","fos","=","new","FileOutputStream","(","targetFile",")",")","{","\n","this",".","save","(","fos",")",";","\n","}","\n"],"docstring_tokens":["Save","the","document","in","the","specified","file"]}
{"code_tokens":["\n","public","void","save","(","OutputStream","outputStream",")","throws","IOException","{","\n","throwExceptionIfReadOnly","(",")",";","\n","this",".","saveImpl","(","outputStream",")",";","\n"],"docstring_tokens":["Save","the","document","in","the","specified","output","stream"]}
{"code_tokens":["\n","public","void","registerPartAndContentType","(","PackagePart","part",")","{","\n","addPackagePart","(","part",")",";","\n","this",".","contentTypeManager",".","addContentType","(","part",".","getPartName","(",")",",","part",".","getContentType","(",")",")",";","\n","this",".","isDirty","=","true",";","\n"],"docstring_tokens":["Add","the","specified","part,","and","register","its","content","type","with","the","content","type","manager"]}
{"code_tokens":["\n","public","void","unregisterPartAndContentType","(","PackagePartName","partName",")","{","\n","removePart","(","partName",")",";","\n","this",".","contentTypeManager",".","removeContentType","(","partName",")",";","\n","this",".","isDirty","=","true",";","\n"],"docstring_tokens":["Remove","the","specified","part,","and","clear","its","content","type","from","the","content","type","manager"]}
{"code_tokens":["\n","public","void","setDisplayFormulas","(","boolean","formulas",")","\n","{","\n","field_1_options","=","displayFormulas",".","setShortBoolean","(","field_1_options,","formulas",")",";","\n"],"docstring_tokens":["set","whether","the","window","should","display","formulas"]}
{"code_tokens":["\n","public","void","setDisplayGridlines","(","boolean","gridlines",")","\n","{","\n","field_1_options","=","displayGridlines",".","setShortBoolean","(","field_1_options,","gridlines",")",";","\n"],"docstring_tokens":["set","whether","the","window","should","display","gridlines"]}
{"code_tokens":["\n","public","void","setDisplayRowColHeadings","(","boolean","headings",")","\n","{","\n","field_1_options","=","displayRowColHeadings",".","setShortBoolean","(","field_1_options,","headings",")",";","\n"],"docstring_tokens":["set","whether","the","window","should","display","row","and","column","headings"]}
{"code_tokens":["\n","public","void","setFreezePanes","(","boolean","freezepanes",")","\n","{","\n","field_1_options","=","freezePanes",".","setShortBoolean","(","field_1_options,","freezepanes",")",";","\n"],"docstring_tokens":["set","whether","the","window","should","freeze","panes"]}
{"code_tokens":["\n","public","void","setDisplayZeros","(","boolean","zeros",")","\n","{","\n","field_1_options","=","displayZeros",".","setShortBoolean","(","field_1_options,","zeros",")",";","\n"],"docstring_tokens":["set","whether","the","window","should","display","zero","values"]}
{"code_tokens":["\n","public","void","setDefaultHeader","(","boolean","header",")","\n","{","\n","field_1_options","=","defaultHeader",".","setShortBoolean","(","field_1_options,","header",")",";","\n"],"docstring_tokens":["set","whether","the","window","should","display","a","default","header"]}
{"code_tokens":["\n","public","void","setTopRow","(","short","topRow",")","\n","{","\n","field_2_top_row","=","topRow",";","\n"],"docstring_tokens":["set","the","top","row","visible","in","the","window"]}
{"code_tokens":["\n","public","void","setLeftCol","(","short","leftCol",")","\n","{","\n","field_3_left_col","=","leftCol",";","\n"],"docstring_tokens":["set","the","leftmost","column","displayed","in","the","window"]}
{"code_tokens":["\n","public","boolean","getDisplayFormulas","(",")","\n","{","\n","return","displayFormulas",".","isSet","(","field_1_options",")",";","\n"],"docstring_tokens":["get","whether","the","window","should","display","formulas"]}
{"code_tokens":["\n","public","boolean","getDisplayGridlines","(",")","\n","{","\n","return","displayGridlines",".","isSet","(","field_1_options",")",";","\n"],"docstring_tokens":["get","whether","the","window","should","display","gridlines"]}
{"code_tokens":["\n","public","boolean","getDisplayRowColHeadings","(",")","\n","{","\n","return","displayRowColHeadings",".","isSet","(","field_1_options",")",";","\n"],"docstring_tokens":["get","whether","the","window","should","display","row","and","column","headings"]}
{"code_tokens":["\n","public","boolean","getFreezePanes","(",")","\n","{","\n","return","freezePanes",".","isSet","(","field_1_options",")",";","\n"],"docstring_tokens":["get","whether","the","window","should","freeze","panes"]}
{"code_tokens":["\n","public","boolean","getDisplayZeros","(",")","\n","{","\n","return","displayZeros",".","isSet","(","field_1_options",")",";","\n"],"docstring_tokens":["get","whether","the","window","should","display","zero","values"]}
{"code_tokens":["\n","public","boolean","getDefaultHeader","(",")","\n","{","\n","return","defaultHeader",".","isSet","(","field_1_options",")",";","\n"],"docstring_tokens":["get","whether","the","window","should","display","a","default","header"]}
{"code_tokens":["\n","public","boolean","isActive","(",")","{","\n","return","active",".","isSet","(","field_1_options",")",";","\n"],"docstring_tokens":["is","the","sheet","currently","displayed","in","the","window"]}
{"code_tokens":["\n","public","short","getTopRow","(",")","\n","{","\n","return","field_2_top_row",";","\n"],"docstring_tokens":["get","the","top","row","visible","in","the","window"]}
{"code_tokens":["\n","public","short","getLeftCol","(",")","\n","{","\n","return","field_3_left_col",";","\n"],"docstring_tokens":["get","the","leftmost","column","displayed","in","the","window"]}
{"code_tokens":["\n","public","boolean","hasSameName","(","XWPFStyle","compStyle",")","{","\n","CTStyle","ctCompStyle","=","compStyle",".","getCTStyle","(",")",";","\n","String","name","=","ctCompStyle",".","getName","(",")",".","getVal","(",")",";","\n","return","name",".","equals","(","ctStyle",".","getName","(",")",".","getVal","(",")",")",";","\n"],"docstring_tokens":["compares","the","names","of","the","Styles"]}
{"code_tokens":["\n","@Override\n","public","RichTextString","getItemAt","(","int","idx",")","{","\n","return","new","XSSFRichTextString","(","strings",".","get","(","idx",")",")",";","\n"],"docstring_tokens":["Return","a","string","item","by","index"]}
{"code_tokens":["\n","public","List<RichTextString>","getSharedStringItems","(",")","{","\n","ArrayList<RichTextString>","items","=","new","ArrayList<>","(",")",";","\n","for","(","CTRst","rst",":","strings",")","{","\n","items",".","add","(","new","XSSFRichTextString","(","rst",")",")",";","\n","}","\n","return","Collections",".","unmodifiableList","(","items",")",";","\n"],"docstring_tokens":["Provide","access","to","the","strings","in","the","SharedStringsTable"]}
{"code_tokens":["\n","public","void","writeTo","(","OutputStream","out",")","throws","IOException","{","\n","XmlOptions","xmlOptions","=","new","XmlOptions","(","DEFAULT_XML_OPTIONS",")",";","\n","//","the","following","two","lines","turn","off","writing","CDATA\n","//","see","Bugzilla","48936\n","xmlOptions",".","setSaveCDataLengthThreshold","(","1000000",")",";","\n","xmlOptions",".","setSaveCDataEntityCountThreshold","(","-1",")",";","\n\n","//re-create","the","sst","table","every","time","saving","a","workbook\n","CTSst","sst","=","_sstDoc",".","getSst","(",")",";","\n","sst",".","setCount","(","count",")",";","\n","sst",".","setUniqueCount","(","uniqueCount",")",";","\n\n","_sstDoc",".","save","(","out,","xmlOptions",")",";","\n"],"docstring_tokens":["Write","this","table","out","as","XML"]}
{"code_tokens":["\n","public","String","getText","(",")","{","\n","final","int","MAX_LEVELS","=","9",";","\n","StringBuilder","out","=","new","StringBuilder","(",")",";","\n","List<Integer>","levelCount","=","new","ArrayList<>","(","MAX_LEVELS",")",";","//","maximum","9\n","//","levels\n","//","initialise","the","levelCount","array","-","this","maintains","a","record","of","the\n","//","numbering","to","be","used","at","each","level\n","for","(","int","k","=","0",";","k","<","MAX_LEVELS",";","k++",")","{","\n","levelCount",".","add","(","0",")",";","\n","}","\n\n","for","(","int","i","=","0",";","i","<","_paragraphs",".","size","(",")",";","i++",")","{","\n","if","(","out",".","length","(",")",">","0",")","{","\n","out",".","append","(","'\\n'",")",";","\n","}","\n","XSSFTextParagraph","p","=","_paragraphs",".","get","(","i",")",";","\n\n","if","(","p",".","isBullet","(",")","&&","p",".","getText","(",")",".","length","(",")",">","0",")","{","\n\n","int","level","=","Math",".","min","(","p",".","getLevel","(",")",",","MAX_LEVELS","-","1",")",";","\n\n","if","(","p",".","isBulletAutoNumber","(",")",")","{","\n","i","=","processAutoNumGroup","(","i,","level,","levelCount,","out",")",";","\n","}","else","{","\n","//","indent","appropriately","for","the","level\n","for","(","int","j","=","0",";","j","<","level",";","j++",")","{","\n","out",".","append","(","'\\t'",")",";","\n","}","\n","String","character","=","p",".","getBulletCharacter","(",")",";","\n","out",".","append","(","character",".","length","(",")",">","0","?","character","+","\"","\"",":","\"-","\"",")",";","\n","out",".","append","(","p",".","getText","(",")",")",";","\n","}","\n","}","else","{","\n","out",".","append","(","p",".","getText","(",")",")",";","\n\n","//","this","paragraph","is","not","a","bullet,","so","reset","the","count","array\n","for","(","int","k","=","0",";","k","<","MAX_LEVELS",";","k++",")","{","\n","levelCount",".","set","(","k,","0",")",";","\n","}","\n","}","\n","}","\n\n","return","out",".","toString","(",")",";","\n"],"docstring_tokens":["Returns","the","text","from","all","paragraphs","in","the","shape"]}
{"code_tokens":["\n","private","String","getBulletPrefix","(","ListAutoNumber","scheme,","int","value",")","{","\n","StringBuilder","out","=","new","StringBuilder","(",")",";","\n\n","switch","(","scheme",")","{","\n","case","ALPHA_LC_PARENT_BOTH:\n","case","ALPHA_LC_PARENT_R:\n","if","(","scheme","==","ListAutoNumber",".","ALPHA_LC_PARENT_BOTH",")","{","\n","out",".","append","(","'","(","'",")",";","\n","}","\n","out",".","append","(","valueToAlpha","(","value",")",".","toLowerCase","(","Locale",".","ROOT",")",")",";","\n","out",".","append","(","'",")","'",")",";","\n","break",";","\n","case","ALPHA_UC_PARENT_BOTH:\n","case","ALPHA_UC_PARENT_R:\n","if","(","scheme","==","ListAutoNumber",".","ALPHA_UC_PARENT_BOTH",")","{","\n","out",".","append","(","'","(","'",")",";","\n","}","\n","out",".","append","(","valueToAlpha","(","value",")",")",";","\n","out",".","append","(","'",")","'",")",";","\n","break",";","\n","case","ALPHA_LC_PERIOD:\n","out",".","append","(","valueToAlpha","(","value",")",".","toLowerCase","(","Locale",".","ROOT",")",")",";","\n","out",".","append","(","'",".","'",")",";","\n","break",";","\n","case","ALPHA_UC_PERIOD:\n","out",".","append","(","valueToAlpha","(","value",")",")",";","\n","out",".","append","(","'",".","'",")",";","\n","break",";","\n","case","ARABIC_PARENT_BOTH:\n","case","ARABIC_PARENT_R:\n","if","(","scheme","==","ListAutoNumber",".","ARABIC_PARENT_BOTH",")","{","\n","out",".","append","(","'","(","'",")",";","\n","}","\n","out",".","append","(","value",")",";","\n","out",".","append","(","'",")","'",")",";","\n","break",";","\n","case","ARABIC_PERIOD:\n","out",".","append","(","value",")",";","\n","out",".","append","(","'",".","'",")",";","\n","break",";","\n","case","ARABIC_PLAIN:\n","out",".","append","(","value",")",";","\n","break",";","\n","case","ROMAN_LC_PARENT_BOTH:\n","case","ROMAN_LC_PARENT_R:\n","if","(","scheme","==","ListAutoNumber",".","ROMAN_LC_PARENT_BOTH",")","{","\n","out",".","append","(","'","(","'",")",";","\n","}","\n","out",".","append","(","valueToRoman","(","value",")",".","toLowerCase","(","Locale",".","ROOT",")",")",";","\n","out",".","append","(","'",")","'",")",";","\n","break",";","\n","case","ROMAN_UC_PARENT_BOTH:\n","case","ROMAN_UC_PARENT_R:\n","if","(","scheme","==","ListAutoNumber",".","ROMAN_UC_PARENT_BOTH",")","{","\n","out",".","append","(","'","(","'",")",";","\n","}","\n","out",".","append","(","valueToRoman","(","value",")",")",";","\n","out",".","append","(","'",")","'",")",";","\n","break",";","\n","case","ROMAN_LC_PERIOD:\n","out",".","append","(","valueToRoman","(","value",")",".","toLowerCase","(","Locale",".","ROOT",")",")",";","\n","out",".","append","(","'",".","'",")",";","\n","break",";","\n","case","ROMAN_UC_PERIOD:\n","out",".","append","(","valueToRoman","(","value",")",")",";","\n","out",".","append","(","'",".","'",")",";","\n","break",";","\n","default:\n","out",".","append","(","'\\u2022'",")",";","//","can't","set","the","font","to","wingdings","so","use","the\n","//","default","bullet","character\n","break",";","\n","}","\n","out",".","append","(","\"","\"",")",";","\n","return","out",".","toString","(",")",";","\n"],"docstring_tokens":["Returns","a","string","containing","an","appropriate","prefix","for","an","auto-numbering","bullet"]}
{"code_tokens":["\n","public","void","clearText","(",")","{","\n","_paragraphs",".","clear","(",")",";","\n","CTTextBody","txBody","=","ctShape",".","getTxBody","(",")",";","\n","txBody",".","setPArray","(","null",")",";","//","remove","any","existing","paragraphs\n"],"docstring_tokens":["Clear","all","text","from","this","shape"]}
{"code_tokens":["\n","public","void","setText","(","String","text",")","{","\n","clearText","(",")",";","\n\n","addNewTextParagraph","(",")",".","addNewTextRun","(",")",".","setText","(","text",")",";","\n"],"docstring_tokens":["Set","a","single","paragraph","of","text","on","the","shape"]}
{"code_tokens":["\n","public","XSSFTextParagraph","addNewTextParagraph","(",")","{","\n","CTTextBody","txBody","=","ctShape",".","getTxBody","(",")",";","\n","CTTextParagraph","p","=","txBody",".","addNewP","(",")",";","\n","XSSFTextParagraph","paragraph","=","new","XSSFTextParagraph","(","p,","ctShape",")",";","\n","_paragraphs",".","add","(","paragraph",")",";","\n","return","paragraph",";","\n"],"docstring_tokens":["Add","a","new","paragraph","run","to","this","shape"]}
{"code_tokens":["\n","public","XSSFTextParagraph","addNewTextParagraph","(","String","text",")","{","\n","XSSFTextParagraph","paragraph","=","addNewTextParagraph","(",")",";","\n","paragraph",".","addNewTextRun","(",")",".","setText","(","text",")",";","\n","return","paragraph",";","\n"],"docstring_tokens":["Add","a","new","paragraph","run","to","this","shape,","set","to","the","provided","string"]}
{"code_tokens":["\n","public","XSSFTextParagraph","addNewTextParagraph","(","XSSFRichTextString","str",")","{","\n","CTTextBody","txBody","=","ctShape",".","getTxBody","(",")",";","\n","CTTextParagraph","p","=","txBody",".","addNewP","(",")",";","\n\n","if","(","str",".","numFormattingRuns","(",")","==","0",")","{","\n","CTRegularTextRun","r","=","p",".","addNewR","(",")",";","\n","CTTextCharacterProperties","rPr","=","r",".","addNewRPr","(",")",";","\n","rPr",".","setLang","(","\"en-US\"",")",";","\n","rPr",".","setSz","(","1100",")",";","\n","r",".","setT","(","str",".","getString","(",")",")",";","\n\n","}","else","{","\n","for","(","int","i","=","0",";","i","<","str",".","getCTRst","(",")",".","sizeOfRArray","(",")",";","i++",")","{","\n","CTRElt","lt","=","str",".","getCTRst","(",")",".","getRArray","(","i",")",";","\n","CTRPrElt","ltPr","=","lt",".","getRPr","(",")",";","\n","if","(","ltPr","==","null",")","{","\n","ltPr","=","lt",".","addNewRPr","(",")",";","\n","}","\n\n","CTRegularTextRun","r","=","p",".","addNewR","(",")",";","\n","CTTextCharacterProperties","rPr","=","r",".","addNewRPr","(",")",";","\n","rPr",".","setLang","(","\"en-US\"",")",";","\n\n","applyAttributes","(","ltPr,","rPr",")",";","\n\n","r",".","setT","(","lt",".","getT","(",")",")",";","\n","}","\n","}","\n\n","//","Note:","the","XSSFTextParagraph","constructor","will","create","its","required\n","//","XSSFTextRuns","from","the","provided","CTTextParagraph\n","XSSFTextParagraph","paragraph","=","new","XSSFTextParagraph","(","p,","ctShape",")",";","\n","_paragraphs",".","add","(","paragraph",")",";","\n\n","return","paragraph",";","\n"],"docstring_tokens":["Add","a","new","paragraph","run","to","this","shape,","set","to","the","provided","rich","text","string"]}
{"code_tokens":["\n","public","void","setVerticalAlignment","(","VerticalAlignment","anchor",")","{","\n","CTTextBodyProperties","bodyPr","=","ctShape",".","getTxBody","(",")",".","getBodyPr","(",")",";","\n","if","(","bodyPr","!=","null",")","{","\n","if","(","anchor","==","null",")","{","\n","if","(","bodyPr",".","isSetAnchor","(",")",")","{","\n","bodyPr",".","unsetAnchor","(",")",";","\n","}","\n","}","else","{","\n","bodyPr",".","setAnchor","(","STTextAnchoringType",".","Enum",".","forInt","(","anchor",".","ordinal","(",")","+","1",")",")",";","\n","}","\n","}","\n"],"docstring_tokens":["Sets","the","type","of","vertical","alignment","for","the","text","within","the","shape"]}
{"code_tokens":["\n","public","VerticalAlignment","getVerticalAlignment","(",")","{","\n","CTTextBodyProperties","bodyPr","=","ctShape",".","getTxBody","(",")",".","getBodyPr","(",")",";","\n","if","(","bodyPr","!=","null",")","{","\n","if","(","bodyPr",".","isSetAnchor","(",")",")","{","\n","return","VerticalAlignment",".","values","(",")","[bodyPr",".","getAnchor","(",")",".","intValue","(",")","-","1]",";","\n","}","\n","}","\n","return","VerticalAlignment",".","TOP",";","\n"],"docstring_tokens":["Returns","the","type","of","vertical","alignment","for","the","text","within","the","shape"]}
{"code_tokens":["\n","@Override\n","public","List<HSLFShape>","getShapes","(",")","{","\n","PPDrawing","ppdrawing","=","getPPDrawing","(",")",";","\n\n","EscherContainerRecord","dg","=","ppdrawing",".","getDgContainer","(",")",";","\n","EscherContainerRecord","spgr","=","null",";","\n\n","for","(","EscherRecord","rec",":","dg",")","{","\n","if","(","rec",".","getRecordId","(",")","==","EscherContainerRecord",".","SPGR_CONTAINER",")","{","\n","spgr","=","(","EscherContainerRecord",")","rec",";","\n","break",";","\n","}","\n","}","\n","if","(","spgr","==","null",")","{","\n","throw","new","IllegalStateException","(","\"spgr","not","found\"",")",";","\n","}","\n\n","List<HSLFShape>","shapeList","=","new","ArrayList<>","(",")",";","\n","boolean","isFirst","=","true",";","\n","for","(","EscherRecord","r",":","spgr",")","{","\n","if","(","isFirst",")","{","\n","//","skip","first","item\n","isFirst","=","false",";","\n","continue",";","\n","}","\n\n","EscherContainerRecord","sp","=","(","EscherContainerRecord",")","r",";","\n","HSLFShape","sh","=","HSLFShapeFactory",".","createShape","(","sp,","null",")",";","\n","sh",".","setSheet","(","this",")",";","\n\n","if","(","sh","instanceof","HSLFSimpleShape",")","{","\n","HSLFHyperlink","link","=","HSLFHyperlink",".","find","(","sh",")",";","\n","if","(","link","!=","null",")","{","\n","(","(","HSLFSimpleShape",")","sh",")",".","setHyperlink","(","link",")",";","\n","}","\n","}","\n\n","shapeList",".","add","(","sh",")",";","\n","}","\n\n","return","shapeList",";","\n"],"docstring_tokens":["Returns","all","shapes","contained","in","this","Sheet"]}
{"code_tokens":["\n","public","int","allocateShapeId","(",")","{","\n","EscherDggRecord","dgg","=","_slideShow",".","getDocumentRecord","(",")",".","getPPDrawingGroup","(",")",".","getEscherDggRecord","(",")",";","\n","EscherDgRecord","dg","=","_container",".","getPPDrawing","(",")",".","getEscherDgRecord","(",")",";","\n","return","dgg",".","allocateShapeId","(","dg,","false",")",";","\n"],"docstring_tokens":["Allocates","new","shape","id","for","the","new","drawing","group","id"]}
{"code_tokens":["\n","@Override\n","public","HSLFBackground","getBackground","(",")","{","\n","if","(","_background","==","null",")","{","\n","PPDrawing","ppdrawing","=","getPPDrawing","(",")",";","\n\n","EscherContainerRecord","dg","=","ppdrawing",".","getDgContainer","(",")",";","\n","EscherContainerRecord","spContainer","=","dg",".","getChildById","(","EscherContainerRecord",".","SP_CONTAINER",")",";","\n","_background","=","new","HSLFBackground","(","spContainer,","null",")",";","\n","_background",".","setSheet","(","this",")",";","\n","}","\n","return","_background",";","\n"],"docstring_tokens":["Returns","the","background","shape","for","this","sheet"]}
{"code_tokens":["\n","public","String","getProgrammableTag","(",")","{","\n","String","tag","=","null",";","\n","RecordContainer","progTags","=","(","RecordContainer",")","\n","getSheetContainer","(",")",".","findFirstOfType","(","\n","RecordTypes",".","ProgTags",".","typeID\n",")",";","\n","if","(","progTags","!=","null",")","{","\n","RecordContainer","progBinaryTag","=","(","RecordContainer",")","\n","progTags",".","findFirstOfType","(","\n","RecordTypes",".","ProgBinaryTag",".","typeID\n",")",";","\n","if","(","progBinaryTag","!=","null",")","{","\n","CString","binaryTag","=","(","CString",")","\n","progBinaryTag",".","findFirstOfType","(","\n","RecordTypes",".","CString",".","typeID\n",")",";","\n","if","(","binaryTag","!=","null",")","{","\n","tag","=","binaryTag",".","getText","(",")",";","\n","}","\n","}","\n","}","\n\n","return","tag",";","\n\n"],"docstring_tokens":["Return","programmable","tag","associated","with","this","sheet,","e.g"]}
{"code_tokens":["\n","/*","package","*/","static","I_MatchPredicate","createCriteriaPredicate","(","ValueEval","arg,","int","srcRowIndex,","int","srcColumnIndex",")","{","\n\n","ValueEval","evaluatedCriteriaArg","=","evaluateCriteriaArg","(","arg,","srcRowIndex,","srcColumnIndex",")",";","\n\n","if","(","evaluatedCriteriaArg","instanceof","NumberEval",")","{","\n","return","new","NumberMatcher","(","(","(","NumberEval",")","evaluatedCriteriaArg",")",".","getNumberValue","(",")",",","CmpOp",".","OP_NONE",")",";","\n","}","\n","if","(","evaluatedCriteriaArg","instanceof","BoolEval",")","{","\n","return","new","BooleanMatcher","(","(","(","BoolEval",")","evaluatedCriteriaArg",")",".","getBooleanValue","(",")",",","CmpOp",".","OP_NONE",")",";","\n","}","\n\n","if","(","evaluatedCriteriaArg","instanceof","StringEval",")","{","\n","return","createGeneralMatchPredicate","(","(","StringEval",")","evaluatedCriteriaArg",")",";","\n","}","\n","if","(","evaluatedCriteriaArg","instanceof","ErrorEval",")","{","\n","return","new","ErrorMatcher","(","(","(","ErrorEval",")","evaluatedCriteriaArg",")",".","getErrorCode","(",")",",","CmpOp",".","OP_NONE",")",";","\n","}","\n","if","(","evaluatedCriteriaArg","==","BlankEval",".","instance",")","{","\n","return","null",";","\n","}","\n","throw","new","RuntimeException","(","\"Unexpected","type","for","criteria","(","\"\n","+","evaluatedCriteriaArg",".","getClass","(",")",".","getName","(",")","+","\"",")","\"",")",";","\n"],"docstring_tokens":["Creates","a","criteria","predicate","object","for","the","supplied","criteria","arg"]}
{"code_tokens":["\n","private","static","I_MatchPredicate","createGeneralMatchPredicate","(","StringEval","stringEval",")","{","\n","String","value","=","stringEval",".","getStringValue","(",")",";","\n","CmpOp","operator","=","CmpOp",".","getOperator","(","value",")",";","\n","value","=","value",".","substring","(","operator",".","getLength","(",")",")",";","\n\n","Boolean","booleanVal","=","parseBoolean","(","value",")",";","\n","if","(","booleanVal","!=","null",")","{","\n","return","new","BooleanMatcher","(","booleanVal,","operator",")",";","\n","}","\n\n","Double","doubleVal","=","OperandResolver",".","parseDouble","(","value",")",";","\n","if","(","doubleVal","!=","null",")","{","\n","return","new","NumberMatcher","(","doubleVal,","operator",")",";","\n","}","\n","ErrorEval","ee","=","parseError","(","value",")",";","\n","if","(","ee","!=","null",")","{","\n","return","new","ErrorMatcher","(","ee",".","getErrorCode","(",")",",","operator",")",";","\n","}","\n\n","//else","-","just","a","plain","string","with","no","interpretation",".","\n","return","new","StringMatcher","(","value,","operator",")",";","\n"],"docstring_tokens":["When","the","second","argument","is","a","string,","many","things","are","possible"]}
{"code_tokens":["\n","public","void","setText","(","String","text",")","{","\n","//","Convert","to","little","endian","unicode\n","_text","=","IOUtils",".","safelyAllocate","(","text",".","length","(",")","*","2L,","getMaxRecordLength","(",")",")",";","\n","StringUtil",".","putUnicodeLE","(","text,_text,0",")",";","\n\n","//","Update","the","size","(","header","bytes","5-8",")","\n","LittleEndian",".","putInt","(","_header,4,_text",".","length",")",";","\n"],"docstring_tokens":["Updates","the","text","in","the","Atom"]}
{"code_tokens":["\n","@Override\n","public","String","toString","(",")","{","\n","return","GenericRecordJsonWriter",".","marshal","(","this",")",";","\n"],"docstring_tokens":["dump","debug","info;","use","getText","to","return","a","string","representation","of","the","atom"]}
{"code_tokens":["\n","public","Iterator<Property>","getChildren","(",")","\n","{","\n","return","_children",".","iterator","(",")",";","\n"],"docstring_tokens":["Get","an","iterator","over","the","children","of","this","Parent;","all","elements","are","instances","of","Property"]}
{"code_tokens":["\n","@Override\n","public","Spliterator<Property>","spliterator","(",")","{","\n","return","_children",".","spliterator","(",")",";","\n"],"docstring_tokens":["Get","a","spliterator","over","the","children","of","this","Parent;","all","elements","are","instances","of","Property"]}
{"code_tokens":["\n","public","String","getValue","(",")","\n","{","\n","return","OldStringRecord",".","getString","(","field_5_bytes,","codepage",")",";","\n"],"docstring_tokens":["Get","the","String","of","the","cell"]}
{"code_tokens":["\n","public","void","processWorkbookEvents","(","HSSFRequest","req,","POIFSFileSystem","fs",")","throws","IOException","{","\n","processWorkbookEvents","(","req,","fs",".","getRoot","(",")",")",";","\n"],"docstring_tokens":["Processes","a","file","into","essentially","record","events"]}
{"code_tokens":["\n","private","short","genericProcessEvents","(","HSSFRequest","req,","InputStream","in",")","\n","throws","HSSFUserException","{","\n","short","userCode","=","0",";","\n\n","//","Create","a","new","RecordStream","and","use","that\n","RecordFactoryInputStream","recordStream","=","new","RecordFactoryInputStream","(","in,","false",")",";","\n\n","//","Process","each","record","as","they","come","in\n","while","(","true",")","{","\n","org",".","apache",".","poi",".","hssf",".","record",".","Record","r","=","recordStream",".","nextRecord","(",")",";","\n","if","(","r","==","null",")","{","\n","break",";","\n","}","\n","userCode","=","req",".","processRecord","(","r",")",";","\n","if","(","userCode","!=","0",")","{","\n","break",";","\n","}","\n","}","\n\n","//","All","done,","return","our","last","code\n","return","userCode",";","\n"],"docstring_tokens":["Processes","a","DocumentInputStream","into","essentially","Record","events"]}
{"code_tokens":["\n","@Override\n","public","XSSFSheet","getSheet","(",")","{","\n","return","getRow","(",")",".","getSheet","(",")",";","\n"],"docstring_tokens":["Returns","the","sheet","this","cell","belongs","to"]}
{"code_tokens":["\n","@Override\n","public","int","getColumnIndex","(",")","{","\n","return","this",".","_cellNum",";","\n"],"docstring_tokens":["Returns","column","index","of","this","cell"]}
{"code_tokens":["\n","@Override\n","public","int","getRowIndex","(",")","{","\n","return","_row",".","getRowNum","(",")",";","\n"],"docstring_tokens":["Returns","row","index","of","a","row","in","the","sheet","that","contains","this","cell"]}
{"code_tokens":["\n","public","String","getReference","(",")","{","\n","String","ref","=","_cell",".","getR","(",")",";","\n","if","(","ref","==","null",")","{","\n","return","getAddress","(",")",".","formatAsString","(",")",";","\n","}","\n","return","ref",";","\n"],"docstring_tokens":["Returns","an","A1","style","reference","to","the","location","of","this","cell"]}
{"code_tokens":["\n","private","static","RuntimeException","typeMismatch","(","CellType","expectedType,","CellType","actualType,","boolean","isFormulaCell",")","{","\n","String","msg","=","\"Cannot","get","a","\"","+","expectedType","+","\"","value","from","a","\"","+","actualType+","\"","\"","+","(","isFormulaCell","?","\"formula","\"",":","\"\"",")","+","\"cell\"",";","\n","return","new","IllegalStateException","(","msg",")",";","\n"],"docstring_tokens":["Used","to","help","format","error","messages"]}
{"code_tokens":["\n","@Override\n","public","XSSFHyperlink","getHyperlink","(",")","{","\n","return","getSheet","(",")",".","getHyperlink","(","_row",".","getRowNum","(",")",",","_cellNum",")",";","\n"],"docstring_tokens":["Returns","hyperlink","associated","with","this","cell"]}
{"code_tokens":["\n","@Override\n","public","void","setHyperlink","(","Hyperlink","hyperlink",")","{","\n","if","(","hyperlink","==","null",")","{","\n","removeHyperlink","(",")",";","\n","return",";","\n","}","\n\n","XSSFHyperlink","link",";","\n","if","(","hyperlink","instanceof","XSSFHyperlink",")","{","\n","link","=","(","XSSFHyperlink",")","hyperlink",";","\n","}","else","{","\n","link","=","new","XSSFHyperlink","(","hyperlink",")",";","\n","}","\n\n","//","Assign","to","us\n","link",".","setCellReference","(","new","CellReference","(","_row",".","getRowNum","(",")",",","_cellNum",")",".","formatAsString","(",")",")",";","\n\n","//","Add","to","the","lists\n","getSheet","(",")",".","addHyperlink","(","link",")",";","\n"],"docstring_tokens":["Assign","a","hyperlink","to","this","cell"]}
{"code_tokens":["\n","public","static","HSLFSoundData[]","find","(","Document","document",")","{","\n","ArrayList<HSLFSoundData>","lst","=","new","ArrayList<>","(",")",";","\n","org",".","apache",".","poi",".","hslf",".","record",".","Record[]","ch","=","document",".","getChildRecords","(",")",";","\n","for","(","int","i","=","0",";","i","<","ch",".","length",";","i++",")","{","\n","if","(","ch[i]",".","getRecordType","(",")","==","RecordTypes",".","SoundCollection",".","typeID",")","{","\n","RecordContainer","col","=","(","RecordContainer",")","ch[i]",";","\n","org",".","apache",".","poi",".","hslf",".","record",".","Record[]","sr","=","col",".","getChildRecords","(",")",";","\n","for","(","int","j","=","0",";","j","<","sr",".","length",";","j++",")","{","\n","if","(","sr[j]","instanceof","Sound",")","{","\n","lst",".","add","(","new","HSLFSoundData","(","(","Sound",")","sr[j]",")",")",";","\n","}","\n","}","\n","}","\n\n","}","\n","return","lst",".","toArray","(","new","HSLFSoundData[0]",")",";","\n"],"docstring_tokens":["Find","all","sound","records","in","the","supplied","Document","records"]}
{"code_tokens":["\n","public","boolean","isExternalRef","(",")","\n","{","\n","return","path[0]","==","0x01",";","\n"],"docstring_tokens":["Checks","if","the","data","source","in","this","reference","record","is","external","to","this","sheet","or","internal"]}
{"code_tokens":["\n","@Override\n","public","int","serializeSimplePart","(","byte[]","data,","int","pos",")","{","\n","LittleEndian",".","putShort","(","data,","pos,","getId","(",")",")",";","\n","LittleEndian",".","putInt","(","data,","pos","+","2,","complexData",".","length",")",";","\n","return","6",";","\n"],"docstring_tokens":["Serializes","the","simple","part","of","this","property"]}
{"code_tokens":["\n","@Override\n","public","int","serializeComplexPart","(","byte[]","data,","int","pos",")","{","\n","System",".","arraycopy","(","complexData,","0,","data,","pos,","complexData",".","length",")",";","\n","return","complexData",".","length",";","\n"],"docstring_tokens":["Serializes","the","complex","part","of","this","property"]}
{"code_tokens":["\n","@Override\n","public","boolean","equals","(","Object","o",")","{","\n","if","(","this","==","o",")","{","\n","return","true",";","\n","}","\n","if","(","!","(","o","instanceof","EscherComplexProperty",")",")","{","\n","return","false",";","\n","}","\n\n","EscherComplexProperty","escherComplexProperty","=","(","EscherComplexProperty",")","o",";","\n\n","return","Arrays",".","equals","(","complexData,","escherComplexProperty",".","complexData",")",";","\n"],"docstring_tokens":["Determine","whether","this","property","is","equal","to","another","property"]}
{"code_tokens":["\n","public","String","getText","(",")","{","\n","StringBuilder","s","=","new","StringBuilder","(",")",";","\n\n","//","See","if","we","can","get","a","suitable","encoding","for","any\n","//","non","unicode","text","in","the","file\n","msg",".","guess7BitEncoding","(",")",";","\n\n","//","Off","we","go\n","Iterator<String>","emails",";","\n","try","{","\n","emails","=","Arrays",".","asList","(","msg",".","getRecipientEmailAddressList","(",")",")",".","iterator","(",")",";","\n","}","catch","(","ChunkNotFoundException","e",")","{","\n","emails","=","Collections",".","emptyIterator","(",")",";","\n","}","\n\n","try","{","\n","s",".","append","(","\"From:","\"",")",".","append","(","msg",".","getDisplayFrom","(",")",")",".","append","(","\"\\n\"",")",";","\n","}","catch","(","ChunkNotFoundException","ignored",")","{","\n","}","\n\n","//","For","To,","CC","and","BCC,","try","to","match","the","names\n","//","up","with","their","email","addresses",".","Relies","on","the\n","//","Recipient","Chunks","being","in","the","same","order","as\n","//","people","in","To","+","CC","+","BCC",".","\n","try","{","\n","handleEmails","(","s,","\"To\",","msg",".","getDisplayTo","(",")",",","emails",")",";","\n","}","catch","(","ChunkNotFoundException","ignored",")","{","\n","}","\n","try","{","\n","handleEmails","(","s,","\"CC\",","msg",".","getDisplayCC","(",")",",","emails",")",";","\n","}","catch","(","ChunkNotFoundException","ignored",")","{","\n","}","\n","try","{","\n","handleEmails","(","s,","\"BCC\",","msg",".","getDisplayBCC","(",")",",","emails",")",";","\n","}","catch","(","ChunkNotFoundException","ignored",")","{","\n","}","\n\n","//","Date","-","try","two","ways","to","find","it\n","try","{","\n","//","First","try","via","the","proper","chunk\n","SimpleDateFormat","f","=","new","SimpleDateFormat","(","\"E,","d","MMM","yyyy","HH:mm:ss","Z\",","Locale",".","ROOT",")",";","\n","f",".","setTimeZone","(","LocaleUtil",".","getUserTimeZone","(",")",")",";","\n","s",".","append","(","\"Date:","\"",")",".","append","(","f",".","format","(","msg",".","getMessageDate","(",")",".","getTime","(",")",")",")",".","append","(","\"\\n\"",")",";","\n","}","catch","(","ChunkNotFoundException","e",")","{","\n","try","{","\n","//","Failing","that","try","via","the","raw","headers\n","String[]","headers","=","msg",".","getHeaders","(",")",";","\n","for","(","String","header",":","headers",")","{","\n","if","(","startsWithIgnoreCase","(","header,","\"date:\"",")",")","{","\n","s",".","append","(","\"Date:\"",")",".","append","(","header,","header",".","indexOf","(","':'",")","+","1,","header",".","length","(",")",")",".","append","(","\"\\n\"",")",";","\n","break",";","\n","}","\n","}","\n","}","catch","(","ChunkNotFoundException","he",")","{","\n","//","We","can't","find","the","date,","sorry",".",".",".","\n","}","\n","}","\n\n","try","{","\n","s",".","append","(","\"Subject:","\"",")",".","append","(","msg",".","getSubject","(",")",")",".","append","(","\"\\n\"",")",";","\n","}","catch","(","ChunkNotFoundException","ignored",")","{","\n","}","\n\n","//","Display","attachment","names\n","//","To","get","the","attachments,","use","ExtractorFactory\n","for","(","AttachmentChunks","att",":","msg",".","getAttachmentFiles","(",")",")","{","\n","StringChunk","name","=","att",".","getAttachLongFileName","(",")",";","\n","if","(","name","==","null",")","name","=","att",".","getAttachFileName","(",")",";","\n","String","attName","=","name","==","null","?","null",":","name",".","getValue","(",")",";","\n\n","if","(","att",".","getAttachMimeTag","(",")","!=","null","&&\n","att",".","getAttachMimeTag","(",")",".","getValue","(",")","!=","null",")","{","\n","attName","=","att",".","getAttachMimeTag","(",")",".","getValue","(",")","+","\"","=","\"","+","attName",";","\n","}","\n","s",".","append","(","\"Attachment:","\"",")",".","append","(","attName",")",".","append","(","\"\\n\"",")",";","\n","}","\n\n","try","{","\n","s",".","append","(","\"\\n\"",")",".","append","(","msg",".","getTextBody","(",")",")",".","append","(","\"\\n\"",")",";","\n","}","catch","(","ChunkNotFoundException","ignored",")","{","\n","}","\n\n","return","s",".","toString","(",")",";","\n"],"docstring_tokens":["Outputs","something","a","little","like","a","RFC822","email"]}
{"code_tokens":["\n","public","void","setMaxNumberOfDataFormats","(","int","num",")","{","\n","if","(","num","<","getNumDataFormats","(",")",")","{","\n","if","(","num","<","0",")","{","\n","throw","new","IllegalArgumentException","(","\"Maximum","Number","of","Data","Formats","must","be","greater","than","or","equal","to","0\"",")",";","\n","}","else","{","\n","throw","new","IllegalStateException","(","\"Cannot","set","the","maximum","number","of","data","formats","less","than","the","current","quantity",".","\"","+\n","\"Data","formats","must","be","explicitly","removed","(","via","StylesTable",".","removeNumberFormat",")","before","the","limit","can","be","decreased",".","\"",")",";","\n","}","\n","}","\n","MAXIMUM_NUMBER_OF_DATA_FORMATS","=","num",";","\n"],"docstring_tokens":["Changes","the","maximum","number","of","data","formats","that","may","be","in","a","style","table"]}
{"code_tokens":["\n","public","void","readFrom","(","InputStream","is",")","throws","IOException","{","\n","try","{","\n","doc","=","StyleSheetDocument",".","Factory",".","parse","(","is,","DEFAULT_XML_OPTIONS",")",";","\n\n","CTStylesheet","styleSheet","=","doc",".","getStyleSheet","(",")",";","\n\n","//","Grab","all","the","different","bits","we","care","about\n\n","//","keep","this","first,","as","some","constructors","below","want","it\n","IndexedColorMap","customColors","=","CustomIndexedColorMap",".","fromColors","(","styleSheet",".","getColors","(",")",")",";","\n","if","(","customColors","!=","null",")","indexedColors","=","customColors",";","\n\n","CTNumFmts","ctfmts","=","styleSheet",".","getNumFmts","(",")",";","\n","if","(","ctfmts","!=","null",")","{","\n","for","(","CTNumFmt","nfmt",":","ctfmts",".","getNumFmtArray","(",")",")","{","\n","short","formatId","=","(","short",")","nfmt",".","getNumFmtId","(",")",";","\n","numberFormats",".","put","(","formatId,","nfmt",".","getFormatCode","(",")",")",";","\n","}","\n","}","\n\n","CTFonts","ctfonts","=","styleSheet",".","getFonts","(",")",";","\n","if","(","ctfonts","!=","null",")","{","\n","int","idx","=","0",";","\n","for","(","CTFont","font",":","ctfonts",".","getFontArray","(",")",")","{","\n","//","Create","the","font","and","save","it",".","Themes","Table","supplied","later\n","XSSFFont","f","=","new","XSSFFont","(","font,","idx,","indexedColors",")",";","\n","fonts",".","add","(","f",")",";","\n","idx++",";","\n","}","\n","}","\n","CTFills","ctfills","=","styleSheet",".","getFills","(",")",";","\n","if","(","ctfills","!=","null",")","{","\n","for","(","CTFill","fill",":","ctfills",".","getFillArray","(",")",")","{","\n","fills",".","add","(","new","XSSFCellFill","(","fill,","indexedColors",")",")",";","\n","}","\n","}","\n\n","CTBorders","ctborders","=","styleSheet",".","getBorders","(",")",";","\n","if","(","ctborders","!=","null",")","{","\n","for","(","CTBorder","border",":","ctborders",".","getBorderArray","(",")",")","{","\n","borders",".","add","(","new","XSSFCellBorder","(","border,","indexedColors",")",")",";","\n","}","\n","}","\n\n","CTCellXfs","cellXfs","=","styleSheet",".","getCellXfs","(",")",";","\n","if","(","cellXfs","!=","null",")","xfs",".","addAll","(","Arrays",".","asList","(","cellXfs",".","getXfArray","(",")",")",")",";","\n\n","CTCellStyleXfs","cellStyleXfs","=","styleSheet",".","getCellStyleXfs","(",")",";","\n","if","(","cellStyleXfs","!=","null",")","styleXfs",".","addAll","(","Arrays",".","asList","(","cellStyleXfs",".","getXfArray","(",")",")",")",";","\n\n","CTDxfs","styleDxfs","=","styleSheet",".","getDxfs","(",")",";","\n","if","(","styleDxfs","!=","null",")","dxfs",".","addAll","(","Arrays",".","asList","(","styleDxfs",".","getDxfArray","(",")",")",")",";","\n\n","CTTableStyles","ctTableStyles","=","styleSheet",".","getTableStyles","(",")",";","\n","if","(","ctTableStyles","!=","null","&&","styleDxfs","!=","null",")","{","\n","int","idx","=","0",";","\n","for","(","CTTableStyle","style",":","ctTableStyles",".","getTableStyleArray","(",")",")","{","\n","tableStyles",".","put","(","style",".","getName","(",")",",","new","XSSFTableStyle","(","idx,","styleDxfs,","style,","indexedColors",")",")",";","\n","idx++",";","\n","}","\n","}","\n\n","}","catch","(","XmlException","e",")","{","\n","throw","new","IOException","(","e",".","getLocalizedMessage","(",")",")",";","\n","}","\n"],"docstring_tokens":["Read","this","shared","styles","table","from","an","XML","file"]}
{"code_tokens":["\n","@Override\n","public","boolean","removeNumberFormat","(","short","index",")","{","\n","String","fmt","=","numberFormats",".","remove","(","index",")",";","\n","boolean","removed","=","(","fmt","!=","null",")",";","\n","if","(","removed",")","{","\n","for","(","final","CTXf","style",":","xfs",")","{","\n","if","(","style",".","isSetNumFmtId","(",")","&&","style",".","getNumFmtId","(",")","==","index",")","{","\n","style",".","unsetApplyNumberFormat","(",")",";","\n","style",".","unsetNumFmtId","(",")",";","\n","}","\n","}","\n","}","\n","return","removed",";","\n"],"docstring_tokens":["Remove","a","number","format","from","the","style","table","if","it","exists"]}
{"code_tokens":["\n","@Override\n","public","boolean","removeNumberFormat","(","String","fmt",")","{","\n","short","id","=","getNumberFormatId","(","fmt",")",";","\n","return","removeNumberFormat","(","id",")",";","\n"],"docstring_tokens":["Remove","a","number","format","from","the","style","table","if","it","exists","All","cell","styles","with","this","number","format","will","be","modified","to","use","the","default","number","format"]}
{"code_tokens":["\n","@Internal\n","public","int","putCellXf","(","CTXf","cellXf",")","{","\n","xfs",".","add","(","cellXf",")",";","\n","return","xfs",".","size","(",")",";","\n"],"docstring_tokens":["Adds","a","cell","to","the","styles","table"]}
{"code_tokens":["\n","@Internal\n","public","int","putCellStyleXf","(","CTXf","cellStyleXf",")","{","\n","styleXfs",".","add","(","cellStyleXf",")",";","\n","//","TODO:","check","for","duplicate\n","return","styleXfs",".","size","(",")",";","\n"],"docstring_tokens":["Adds","a","cell","style","to","the","styles","table"]}
{"code_tokens":["\n","@Internal\n","public","int","putDxf","(","CTDxf","dxf",")","{","\n","this",".","dxfs",".","add","(","dxf",")",";","\n","return","this",".","dxfs",".","size","(",")",";","\n"],"docstring_tokens":["Adds","a","Dxf","to","the","style","table","Does","not","check","for","duplicates"]}
{"code_tokens":["\n","public","XSSFFont","findFont","(","boolean","bold,","short","color,","short","fontHeight,","String","name,","boolean","italic,","boolean","strikeout,","short","typeOffset,","byte","underline",")","{","\n","for","(","XSSFFont","font",":","fonts",")","{","\n","if","(","(","font",".","getBold","(",")","==","bold",")","\n","&&","font",".","getColor","(",")","==","color\n","&&","font",".","getFontHeight","(",")","==","fontHeight\n","&&","font",".","getFontName","(",")",".","equals","(","name",")","\n","&&","font",".","getItalic","(",")","==","italic\n","&&","font",".","getStrikeout","(",")","==","strikeout\n","&&","font",".","getTypeOffset","(",")","==","typeOffset\n","&&","font",".","getUnderline","(",")","==","underline",")","\n","{","\n","return","font",";","\n","}","\n","}","\n","return","null",";","\n"],"docstring_tokens":["Finds","a","font","that","matches","the","one","with","the","supplied","attributes,","where","color","is","the","indexed-value,","not","the","actual","color"]}
{"code_tokens":["\n","public","static","String","getAsString","(","TNEFAttribute","attr",")","{","\n","if","(","attr","==","null",")","{","\n","return","null",";","\n","}","\n","if","(","attr","instanceof","TNEFStringAttribute",")","{","\n","return","(","(","TNEFStringAttribute",")","attr",")",".","getString","(",")",";","\n","}","\n\n","LOG",".","atWarn","(",")",".","log","(","\"Warning,","non","string","property","found:","{","}","\",","attr",")",";","\n","return","null",";","\n"],"docstring_tokens":["Returns","the","string","of","a","Attribute,","converting","as","appropriate"]}
{"code_tokens":["\n","public","List<String>","getTextAsVector","(",")","{","\n","List<String>","textV","=","new","ArrayList<>","(",")",";","\n\n","//","Set","to","the","start","of","the","file\n","int","walkPos","=","0",";","\n\n","//","Start","walking","the","file,","looking","for","the","records\n","while","(","walkPos","!=","-1",")","{","\n","walkPos","=","findTextRecords","(","walkPos,textV",")",";","\n","}","\n\n","//","Return","what","we","find\n","return","textV",";","\n"],"docstring_tokens":["Fetches","the","ALL","the","text","of","the","powerpoint","file,","in","a","List","of","strings,","one","per","text","record"]}
{"code_tokens":["\n","public","int","adjustForInsert","(","int","listIndex,","int","length",")","{","\n","int","size","=","_textPieces",".","size","(",")",";","\n\n","TextPiece","tp","=","_textPieces",".","get","(","listIndex",")",";","\n\n","//","Update","with","the","new","end\n","tp",".","setEnd","(","tp",".","getEnd","(",")","+","length",")",";","\n\n","//","Now","change","all","subsequent","ones\n","for","(","int","x","=","listIndex","+","1",";","x","<","size",";","x++",")","{","\n","tp","=","_textPieces",".","get","(","x",")",";","\n","tp",".","setStart","(","tp",".","getStart","(",")","+","length",")",";","\n","tp",".","setEnd","(","tp",".","getEnd","(",")","+","length",")",";","\n","}","\n\n","//","All","done\n","return","length",";","\n"],"docstring_tokens":["Adjust","all","the","text","piece","after","inserting","some","text","into","one","of","them"]}
{"code_tokens":["\n","public","static","InputStream","getDecryptedStream","(","final","DirectoryNode","root,","String","password",")","\n","throws","IOException","{","\n","//","first","check","if","the","node","contains","an","plain","package\n","if","(","root",".","hasEntry","(","OOXML_PACKAGE",")",")","{","\n","return","root",".","createDocumentInputStream","(","OOXML_PACKAGE",")",";","\n","}","\n\n","EncryptionInfo","info","=","new","EncryptionInfo","(","root",")",";","\n","Decryptor","d","=","Decryptor",".","getInstance","(","info",")",";","\n\n","try","{","\n","boolean","passwordCorrect","=","false",";","\n","if","(","password","!=","null","&&","d",".","verifyPassword","(","password",")",")","{","\n","passwordCorrect","=","true",";","\n","}","\n","if","(","!passwordCorrect","&&","d",".","verifyPassword","(","Decryptor",".","DEFAULT_PASSWORD",")",")","{","\n","passwordCorrect","=","true",";","\n","}","\n\n","if","(","passwordCorrect",")","{","\n","return","d",".","getDataStream","(","root",")",";","\n","}","else","if","(","password","!=","null",")","{","\n","throw","new","EncryptedDocumentException","(","\"Password","incorrect\"",")",";","\n","}","else","{","\n","throw","new","EncryptedDocumentException","(","\"The","supplied","spreadsheet","is","protected,","but","no","password","was","supplied\"",")",";","\n","}","\n","}","catch","(","GeneralSecurityException","e",")","{","\n","throw","new","IOException","(","e",")",";","\n","}","\n"],"docstring_tokens":["Wrap","the","OLE2","data","of","the","DirectoryNode","into","a","decrypted","stream","by","using","the","given","password"]}
{"code_tokens":["\n","public","void","setText","(","String","text",")","{","\n","if","(","text",".","length","(",")",">","MAX_LEN",")","{","\n","throw","new","IllegalArgumentException","(","\"Text","is","too","long","(","\"\n","+","text",".","length","(",")","+","\">\"","+","MAX_LEN","+","\"",")","\"",")",";","\n","}","\n","field_4_text","=","text",";","\n","is16bit","=","StringUtil",".","hasMultibyte","(","text",")",";","\n"],"docstring_tokens":["Set","the","text","field","for","the","SeriesText","record"]}
{"code_tokens":["\n","public","byte[]","getContents","(",")","{","\n","TNEFAttribute","contents","=","getAttribute","(","TNEFProperty",".","ID_ATTACHDATA",")",";","\n","if","(","contents","==","null",")","{","\n","throw","new","IllegalArgumentException","(","\"Attachment","corrupt","-","no","Data","section\"",")",";","\n","}","\n","return","contents",".","getData","(",")",";","\n"],"docstring_tokens":["Returns","the","contents","of","the","attachment"]}
{"code_tokens":["\n","public","byte[]","getRenderedMetaFile","(",")","{","\n","TNEFAttribute","meta","=","getAttribute","(","TNEFProperty",".","ID_ATTACHMETAFILE",")",";","\n","if","(","meta","==","null",")","return","null",";","\n","return","meta",".","getData","(",")",";","\n"],"docstring_tokens":["Returns","the","Meta","File","rendered","representation","of","the","attachment,","or","null","if","not","set"]}
{"code_tokens":["\n","public","void","free","(",")","throws","IOException","{","\n","ChainLoopDetector","loopDetector","=","blockStore",".","getChainLoopDetector","(",")",";","\n","free","(","loopDetector",")",";","\n"],"docstring_tokens":["Frees","all","blocks","in","the","stream"]}
{"code_tokens":["\n","public","short","getNumAxis","(",")","\n","{","\n","return","field_1_numAxis",";","\n"],"docstring_tokens":["Get","the","num","axis","field","for","the","AxisUsed","record"]}
{"code_tokens":["\n","public","void","setNumAxis","(","short","field_1_numAxis",")","\n","{","\n","this",".","field_1_numAxis","=","field_1_numAxis",";","\n"],"docstring_tokens":["Set","the","num","axis","field","for","the","AxisUsed","record"]}
{"code_tokens":["\n","public","List<String>","getSheets","(",")","{","\n","ArrayList<String>","sheets","=","new","ArrayList<>","(",")",";","\n\n","int","sheetCount","=","workbook",".","getNumberOfSheets","(",")",";","\n\n","for","(","int","x=0",";","x<sheetCount",";","x++",")","{","\n","sheets",".","add","(","workbook",".","getSheetName","(","x",")",")",";","\n","}","\n\n","return","sheets",";","\n"],"docstring_tokens":["Returns","the","list","of","sheet","names"]}
{"code_tokens":["\n","public","void","setStringValue","(","String","cellName,","String","value",")","{","\n","Cell","cell","=","getCell","(","cellName",")",";","\n","cell",".","setCellValue","(","value",")",";","\n"],"docstring_tokens":["Utility","method","for","setting","the","value","of","a","Cell","with","a","String"]}
{"code_tokens":["\n","public","void","setFormulaValue","(","String","cellName,","String","formula",")","{","\n","Cell","cell","=","getCell","(","cellName",")",";","\n","cell",".","setCellFormula","(","formula",")",";","\n"],"docstring_tokens":["Utility","method","for","setting","the","value","of","a","Cell","with","a","Formula"]}
{"code_tokens":["\n","public","void","setDateValue","(","String","cellName,","Date","date",")","{","\n","Cell","cell","=","getCell","(","cellName",")",";","\n","cell",".","setCellValue","(","date",")",";","\n"],"docstring_tokens":["Utility","method","for","setting","the","value","of","a","Cell","with","a","Date"]}
{"code_tokens":["\n","public","String","getCellAsString","(","String","cellName",")","{","\n","Cell","cell","=","getCell","(","cellName",")",";","\n","return","cell",".","getStringCellValue","(",")",";","\n"],"docstring_tokens":["Returns","a","Cell","as","a","String","value"]}
{"code_tokens":["\n","public","double","getCellAsDouble","(","String","cellName",")","{","\n","Cell","cell","=","getCell","(","cellName",")",";","\n","return","cell",".","getNumericCellValue","(",")",";","\n"],"docstring_tokens":["Returns","the","value","of","the","Cell","as","a","double"]}
{"code_tokens":["\n","@Override\n","public","void","setRowNum","(","int","rowIndex",")","{","\n","int","maxrow","=","SpreadsheetVersion",".","EXCEL97",".","getLastRowIndex","(",")",";","\n","if","(","(","rowIndex","<","0",")","||","(","rowIndex",">","maxrow",")",")","{","\n","throw","new","IllegalArgumentException","(","\"Invalid","row","number","(","\"","+","rowIndex\n","+","\"",")","outside","allowable","range","(","0",".",".","\"","+","maxrow","+","\"",")","\"",")",";","\n","}","\n","rowNum","=","rowIndex",";","\n","if","(","row","!=","null",")","{","\n","row",".","setRowNumber","(","rowIndex",")",";","//","used","only","for","KEY","comparison","(","HSSFRow",")","\n","}","\n"],"docstring_tokens":["set","the","row","number","of","this","row"]}
{"code_tokens":["\n","@Override\n","public","HSSFSheet","getSheet","(",")","\n","{","\n","return","sheet",";","\n"],"docstring_tokens":["Returns","the","HSSFSheet","this","row","belongs","to"]}
{"code_tokens":["\n","@Override\n","public","boolean","getZeroHeight","(",")","{","\n","return","row",".","getZeroHeight","(",")",";","\n"],"docstring_tokens":["get","whether","or","not","to","display","this","row","with","0","height"]}
{"code_tokens":["\n","@Override\n","protected","void","removePartImpl","(","PackagePartName","partName",")","{","\n","if","(","partName","==","null",")","{","\n","throw","new","IllegalArgumentException","(","\"partUri\"",")",";","\n","}","\n"],"docstring_tokens":["Delete","a","part","from","the","package"]}
{"code_tokens":["\n","@Override\n","protected","void","closeImpl","(",")","throws","IOException","{","\n","//","Flush","the","package\n","flush","(",")",";","\n\n","if","(","this",".","originalPackagePath","==","null","||","this",".","originalPackagePath",".","isEmpty","(",")",")","{","\n","return",";","\n","}","\n\n","//","Save","the","content\n","File","targetFile","=","new","File","(","this",".","originalPackagePath",")",";","\n","if","(","!targetFile",".","exists","(",")",")","{","\n","throw","new","InvalidOperationException","(","\n","\"Can't","close","a","package","not","previously","open","with","the","open","(",")","method","!\"",")",";","\n","}","\n\n","//","Case","of","a","package","previously","open\n","String","tempFileName","=","generateTempFileName","(","FileHelper",".","getDirectory","(","targetFile",")",")",";","\n","File","tempFile","=","TempFile",".","createTempFile","(","tempFileName,","\"",".","tmp\"",")",";","\n\n","//","Save","the","final","package","to","a","temporary","file\n","boolean","success","=","false",";","\n","try","{","\n","save","(","tempFile",")",";","\n","success","=","true",";","\n","}","finally","{","\n","//","Close","the","current","zip","file,","so","we","can","overwrite","it","on","all","platforms\n","IOUtils",".","closeQuietly","(","this",".","zipArchive",")",";","\n","try","{","\n","//","Copy","the","new","file","over","the","old","one","if","save","(",")","succeed\n","if","(","success",")","{","\n","FileHelper",".","copyFile","(","tempFile,","targetFile",")",";","\n","}","\n","}","finally","{","\n","//","Either","the","save","operation","succeed","or","not,","we","delete","the","temporary","file\n","if","(","!tempFile",".","delete","(",")",")","{","\n","LOG",".","atWarn","(",")",".","log","(","\"The","temporary","file:","'","{","}","'","cannot","be","deleted","!","Make","sure","that","no","other","application","use","it",".","\",","targetFile",".","getAbsolutePath","(",")",")",";","\n","}","\n","}","\n","}","\n"],"docstring_tokens":["Close","and","save","the","package"]}
{"code_tokens":["\n","@Override\n","protected","void","revertImpl","(",")","{","\n","try","{","\n","if","(","this",".","zipArchive","!=","null",")","{","\n","this",".","zipArchive",".","close","(",")",";","\n","}","\n","}","catch","(","IOException","e",")","{","\n","//","Do","nothing,","user","dont","have","to","know\n","}","\n"],"docstring_tokens":["Close","the","package","without","saving","the","document"]}
{"code_tokens":["\n","@Override\n","public","void","saveImpl","(","OutputStream","outputStream",")","{","\n","//","Check","that","the","document","was","open","in","write","mode\n","throwExceptionIfReadOnly","(",")",";","\n\n","final","ZipArchiveOutputStream","zos","=","(","outputStream","instanceof","ZipArchiveOutputStream",")","\n","?","(","ZipArchiveOutputStream",")","outputStream",":","new","ZipArchiveOutputStream","(","outputStream",")",";","\n\n","try","{","\n","//","If","the","core","properties","part","does","not","exist","in","the","part","list,\n","//","we","save","it","as","well\n","if","(","this",".","getPartsByRelationshipType","(","PackageRelationshipTypes",".","CORE_PROPERTIES",")",".","isEmpty","(",")","&&\n","this",".","getPartsByRelationshipType","(","PackageRelationshipTypes",".","CORE_PROPERTIES_ECMA376",")",".","isEmpty","(",")",")","{","\n","LOG",".","atDebug","(",")",".","log","(","\"Save","core","properties","part\"",")",";","\n\n","//","Ensure","that","core","properties","are","added","if","missing\n","getPackageProperties","(",")",";","\n","//","Add","core","properties","to","part","list",".",".",".","\n","addPackagePart","(","this",".","packageProperties",")",";","\n","//",".",".",".","and","to","add","its","relationship",".",".",".","\n","this",".","relationships",".","addRelationship","(","this",".","packageProperties\n",".","getPartName","(",")",".","getURI","(",")",",","TargetMode",".","INTERNAL,\n","PackageRelationshipTypes",".","CORE_PROPERTIES,","null",")",";","\n","//",".",".",".","and","the","content","if","it","has","not","been","added","yet",".","\n","if","(","!this",".","contentTypeManager\n",".","isContentTypeRegister","(","ContentTypes",".","CORE_PROPERTIES_PART",")",")","{","\n","this",".","contentTypeManager",".","addContentType","(","\n","this",".","packageProperties",".","getPartName","(",")",",\n","ContentTypes",".","CORE_PROPERTIES_PART",")",";","\n","}","\n","}","\n\n","//","Save","content","type","part",".","\n","LOG",".","atDebug","(",")",".","log","(","\"Save","content","types","part\"",")",";","\n","this",".","contentTypeManager",".","save","(","zos",")",";","\n\n","//","Save","package","relationships","part",".","\n","LOG",".","atDebug","(",")",".","log","(","\"Save","package","relationships\"",")",";","\n","ZipPartMarshaller",".","marshallRelationshipPart","(","this",".","getRelationships","(",")",",\n","PackagingURIHelper",".","PACKAGE_RELATIONSHIPS_ROOT_PART_NAME,\n","zos",")",";","\n\n","//","Save","parts",".","\n","for","(","PackagePart","part",":","getParts","(",")",")","{","\n","//","If","the","part","is","a","relationship","part,","we","don't","save","it,","it's\n","//","the","source","part","that","will","do","the","job",".","\n","if","(","part",".","isRelationshipPart","(",")",")","{","\n","continue",";","\n","}","\n\n","final","PackagePartName","ppn","=","part",".","getPartName","(",")",";","\n","LOG",".","atDebug","(",")",".","log","(","(",")","->","new","SimpleMessage","(","\"Save","part","'\"","+","ZipHelper",".","getZipItemNameFromOPCName","(","ppn",".","getName","(",")",")","+","\"'\"",")",")",";","\n","final","PartMarshaller","marshaller","=","partMarshallers",".","get","(","part",".","_contentType",")",";","\n\n","final","PartMarshaller","pm","=","(","marshaller","!=","null",")","?","marshaller",":","defaultPartMarshaller",";","\n","if","(","!pm",".","marshall","(","part,","zos",")",")","{","\n","String","errMsg","=","\"The","part","\"","+","ppn",".","getURI","(",")","+","\"","failed","to","be","saved","in","the","stream","with","marshaller","\"","+","pm","+\n","\"",".","Enable","logging","via","Log4j","2","for","more","details",".","\"",";","\n","throw","new","OpenXML4JException","(","errMsg",")",";","\n","}","\n","}","\n\n","zos",".","finish","(",")",";","\n","}","catch","(","OpenXML4JRuntimeException","e",")","{","\n","//","no","need","to","wrap","this","type","of","Exception\n","throw","e",";","\n","}","catch","(","Exception","e",")","{","\n","throw","new","OpenXML4JRuntimeException","(","\n","\"Fail","to","save:","an","error","occurs","while","saving","the","package",":","\"\n","+","e",".","getMessage","(",")",",","e",")",";","\n","}","\n"],"docstring_tokens":["Save","this","package","into","the","specified","stream"]}
{"code_tokens":["\n","private","CTTablePartStyle","getTablePartStyle","(","TablePartStyle","tablePartStyle",")","{","\n","CTTable","ct","=","table",".","getCTTable","(",")",";","\n","if","(","!ct",".","isSetTblPr","(",")",")","{","\n","return","null",";","\n","}","\n\n","CTTableProperties","pr","=","ct",".","getTblPr","(",")",";","\n","boolean","bandRow","=","(","pr",".","isSetBandRow","(",")","&&","pr",".","getBandRow","(",")",")",";","\n","boolean","firstRow","=","(","pr",".","isSetFirstRow","(",")","&&","pr",".","getFirstRow","(",")",")",";","\n","boolean","lastRow","=","(","pr",".","isSetLastRow","(",")","&&","pr",".","getLastRow","(",")",")",";","\n","boolean","bandCol","=","(","pr",".","isSetBandCol","(",")","&&","pr",".","getBandCol","(",")",")",";","\n","boolean","firstCol","=","(","pr",".","isSetFirstCol","(",")","&&","pr",".","getFirstCol","(",")",")",";","\n","boolean","lastCol","=","(","pr",".","isSetLastCol","(",")","&&","pr",".","getLastCol","(",")",")",";","\n\n","TablePartStyle","tps",";","\n","if","(","tablePartStyle","!=","null",")","{","\n","tps","=","tablePartStyle",";","\n","}","else","if","(","row","==","0","&&","firstRow",")","{","\n","tps","=","TablePartStyle",".","firstRow",";","\n","}","else","if","(","row","==","table",".","getNumberOfRows","(",")","-","1","&&","lastRow",")","{","\n","tps","=","TablePartStyle",".","lastRow",";","\n","}","else","if","(","col","==","0","&&","firstCol",")","{","\n","tps","=","TablePartStyle",".","firstCol",";","\n","}","else","if","(","col","==","table",".","getNumberOfColumns","(",")","-","1","&&","lastCol",")","{","\n","tps","=","TablePartStyle",".","lastCol",";","\n","}","else","{","\n","tps","=","TablePartStyle",".","wholeTbl",";","\n\n","int","br","=","row","+","(","firstRow","?","1",":","0",")",";","\n","int","bc","=","col","+","(","firstCol","?","1",":","0",")",";","\n","if","(","bandRow","&&","(","br","&","1",")","==","0",")","{","\n","tps","=","TablePartStyle",".","band1H",";","\n","}","else","if","(","bandCol","&&","(","bc","&","1",")","==","0",")","{","\n","tps","=","TablePartStyle",".","band1V",";","\n","}","\n","}","\n\n","XSLFTableStyle","tabStyle","=","table",".","getTableStyle","(",")",";","\n","if","(","tabStyle","==","null",")","{","\n","return","null",";","\n","}","\n\n","CTTablePartStyle","part","=","tabStyle",".","getTablePartStyle","(","tps",")",";","\n","return","(","part","==","null",")","?","tabStyle",".","getTablePartStyle","(","TablePartStyle",".","wholeTbl",")",":","part",";","\n"],"docstring_tokens":["Retrieves","the","part","style","depending","on","the","location","of","this","cell"]}
{"code_tokens":["\n","public","void","setSignature","(","int","signature",")","{","\n","switch","(","signature",")","{","\n","case","0x6E00:\n","setUIDInstanceCount","(","1",")",";","\n","break",";","\n","case","0x6E10:\n","setUIDInstanceCount","(","2",")",";","\n","break",";","\n","default:\n","throw","new","IllegalArgumentException","(","signature+\"","is","not","a","valid","instance/signature","value","for","PNG\"",")",";","\n","}","\n"],"docstring_tokens":["Sets","the","PNG","signature","-","either","0x6E00","or","0x6E10"]}
{"code_tokens":["\n","public","TextPropCollection","addParagraphTextPropCollection","(","int","charactersCovered",")","{","\n","TextPropCollection","tpc","=","new","TextPropCollection","(","charactersCovered,","TextPropType",".","paragraph",")",";","\n","paragraphStyles",".","add","(","tpc",")",";","\n","return","tpc",";","\n"],"docstring_tokens":["Create","a","new","Paragraph","TextPropCollection,","and","add","it","to","the","list"]}
{"code_tokens":["\n","public","TextPropCollection","addCharacterTextPropCollection","(","int","charactersCovered",")","{","\n","TextPropCollection","tpc","=","new","TextPropCollection","(","charactersCovered,","TextPropType",".","character",")",";","\n","charStyles",".","add","(","tpc",")",";","\n","return","tpc",";","\n"],"docstring_tokens":["Create","a","new","Character","TextPropCollection,","and","add","it","to","the","list"]}
{"code_tokens":["\n","public","Ptg[]","getFormulaTokens","(","FormulaRecord","formula",")","{","\n","int","formulaRow","=","formula",".","getRow","(",")",";","\n","int","formulaColumn","=","formula",".","getColumn","(",")",";","\n","//Sanity","checks\n","if","(","!isInRange","(","formulaRow,","formulaColumn",")",")","{","\n","throw","new","RuntimeException","(","\"Shared","Formula","Conversion:","Coding","Error\"",")",";","\n","}","\n\n","SharedFormula","sf","=","new","SharedFormula","(","SpreadsheetVersion",".","EXCEL97",")",";","\n","return","sf",".","convertSharedFormulas","(","field_7_parsed_expr",".","getTokens","(",")",",","formulaRow,","formulaColumn",")",";","\n"],"docstring_tokens":["Convert","formula","into","an","array","of","Ptg","tokens"]}
{"code_tokens":["\n","public","HSSFSimpleShape","createShape","(","HSSFChildAnchor","anchor",")","{","\n","HSSFSimpleShape","shape","=","new","HSSFSimpleShape","(","this,","anchor",")",";","\n","shape",".","setParent","(","this",")",";","\n","shape",".","setAnchor","(","anchor",")",";","\n","shapes",".","add","(","shape",")",";","\n","onCreate","(","shape",")",";","\n","EscherSpRecord","sp","=","shape",".","getEscherContainer","(",")",".","getChildById","(","EscherSpRecord",".","RECORD_ID",")",";","\n","if","(","shape",".","getAnchor","(",")",".","isHorizontallyFlipped","(",")",")","{","\n","sp",".","setFlags","(","sp",".","getFlags","(",")","|","EscherSpRecord",".","FLAG_FLIPHORIZ",")",";","\n","}","\n","if","(","shape",".","getAnchor","(",")",".","isVerticallyFlipped","(",")",")","{","\n","sp",".","setFlags","(","sp",".","getFlags","(",")","|","EscherSpRecord",".","FLAG_FLIPVERT",")",";","\n","}","\n","return","shape",";","\n"],"docstring_tokens":["Create","a","new","simple","shape","under","this","group"]}
{"code_tokens":["\n","public","HSSFTextbox","createTextbox","(","HSSFChildAnchor","anchor",")","{","\n","HSSFTextbox","shape","=","new","HSSFTextbox","(","this,","anchor",")",";","\n","shape",".","setParent","(","this",")",";","\n","shape",".","setAnchor","(","anchor",")",";","\n","shapes",".","add","(","shape",")",";","\n","onCreate","(","shape",")",";","\n","return","shape",";","\n"],"docstring_tokens":["Create","a","new","textbox","under","this","group"]}
{"code_tokens":["\n","@Override\n","public","List<HSSFShape>","getChildren","(",")","{","\n","return","Collections",".","unmodifiableList","(","shapes",")",";","\n"],"docstring_tokens":["Return","all","children","contained","by","this","shape"]}
{"code_tokens":["\n","@Override\n","public","void","setCoordinates","(","int","x1,","int","y1,","int","x2,","int","y2",")","{","\n","_spgrRecord",".","setRectX1","(","x1",")",";","\n","_spgrRecord",".","setRectX2","(","x2",")",";","\n","_spgrRecord",".","setRectY1","(","y1",")",";","\n","_spgrRecord",".","setRectY2","(","y2",")",";","\n"],"docstring_tokens":["Sets","the","coordinate","space","of","this","group"]}
{"code_tokens":["\n","@Override\n","public","int","getX1","(",")","{","\n","return","_spgrRecord",".","getRectX1","(",")",";","\n"],"docstring_tokens":["The","top","left","x","coordinate","of","this","group"]}
{"code_tokens":["\n","@Override\n","public","int","getY1","(",")","{","\n","return","_spgrRecord",".","getRectY1","(",")",";","\n"],"docstring_tokens":["The","top","left","y","coordinate","of","this","group"]}
{"code_tokens":["\n","@Override\n","public","int","getX2","(",")","{","\n","return","_spgrRecord",".","getRectX2","(",")",";","\n"],"docstring_tokens":["The","bottom","right","x","coordinate","of","this","group"]}
{"code_tokens":["\n","@Override\n","public","int","getY2","(",")","{","\n","return","_spgrRecord",".","getRectY2","(",")",";","\n"],"docstring_tokens":["The","bottom","right","y","coordinate","of","this","group"]}
{"code_tokens":["\n","@Override\n","public","int","countOfAllChildren","(",")","{","\n","int","count","=","shapes",".","size","(",")",";","\n","for","(","HSSFShape","shape",":","shapes",")","{","\n","count","+=","shape",".","countOfAllChildren","(",")",";","\n","}","\n","return","count",";","\n"],"docstring_tokens":["Count","of","all","children","and","their","childrens","children"]}
{"code_tokens":["\n","@Override\n","protected","void","afterInsert","(","HSLFSheet","sh",")","{","\n","super",".","afterInsert","(","sh",")",";","\n\n","EscherBSERecord","bse","=","getEscherBSERecord","(",")",";","\n","bse",".","setRef","(","bse",".","getRef","(",")","+","1",")",";","\n\n","Rectangle2D","anchor","=","getAnchor","(",")",";","\n","if","(","anchor",".","isEmpty","(",")",")","{","\n","new","DrawPictureShape","(","this",")",".","resize","(",")",";","\n","}","\n"],"docstring_tokens":["By","default","set","the","orininal","image","size"]}
{"code_tokens":["\n","private","static","void","process","(","Entry","entry,","ChunkGroup","grouping,","Map<Integer,","MultiChunk>","multiChunks",")","{","\n","final","String","entryName","=","entry",".","getName","(",")",";","\n","boolean[]","isMultiValued","=","{","false","}",";","\n\n","//","Is","it","a","properties","chunk?","(","They","have","special","names",")","\n","Chunk","chunk","=","(","PropertiesChunk",".","NAME",".","equals","(","entryName",")",")","\n","?","readPropertiesChunk","(","grouping,","entry",")","\n",":","readPrimitiveChunk","(","entry,","isMultiValued,","multiChunks",")",";","\n\n","if","(","chunk","==","null",")","{","\n","return",";","\n","}","\n\n","if","(","entry","instanceof","DocumentNode",")","{","\n","try","(","DocumentInputStream","inp","=","new","DocumentInputStream","(","(","DocumentNode",")","entry",")",")","{","\n","chunk",".","readValue","(","inp",")",";","\n","}","catch","(","IOException","e",")","{","\n","LOG",".","atError","(",")",".","withThrowable","(","e",")",".","log","(","\"Error","reading","from","part","{","}","\",","entry",".","getName","(",")",")",";","\n","}","\n","}","\n\n","if","(","!isMultiValued[0]",")","{","\n","//","multi","value","chunks","will","be","grouped","later,","in","the","correct","order\n","grouping",".","record","(","chunk",")",";","\n","}","\n"],"docstring_tokens":["Creates","a","chunk,","and","gives","it","to","its","parent","group"]}
{"code_tokens":["\n","public","int","getLineColor","(",")","\n","{","\n","return","field_1_lineColor",";","\n"],"docstring_tokens":["Get","the","line","color","field","for","the","LineFormat","record"]}
{"code_tokens":["\n","public","void","setLineColor","(","int","field_1_lineColor",")","\n","{","\n","this",".","field_1_lineColor","=","field_1_lineColor",";","\n"],"docstring_tokens":["Set","the","line","color","field","for","the","LineFormat","record"]}
{"code_tokens":["\n","public","short","getLinePattern","(",")","\n","{","\n","return","field_2_linePattern",";","\n"],"docstring_tokens":["Get","the","line","pattern","field","for","the","LineFormat","record"]}
{"code_tokens":["\n","public","void","setLinePattern","(","short","field_2_linePattern",")","\n","{","\n","this",".","field_2_linePattern","=","field_2_linePattern",";","\n"],"docstring_tokens":["Set","the","line","pattern","field","for","the","LineFormat","record"]}
{"code_tokens":["\n","public","short","getWeight","(",")","\n","{","\n","return","field_3_weight",";","\n"],"docstring_tokens":["Get","the","weight","field","for","the","LineFormat","record"]}
{"code_tokens":["\n","public","void","setWeight","(","short","field_3_weight",")","\n","{","\n","this",".","field_3_weight","=","field_3_weight",";","\n"],"docstring_tokens":["Set","the","weight","field","for","the","LineFormat","record"]}
{"code_tokens":["\n","public","short","getFormat","(",")","\n","{","\n","return","field_4_format",";","\n"],"docstring_tokens":["Get","the","format","field","for","the","LineFormat","record"]}
{"code_tokens":["\n","public","void","setFormat","(","short","field_4_format",")","\n","{","\n","this",".","field_4_format","=","field_4_format",";","\n"],"docstring_tokens":["Set","the","format","field","for","the","LineFormat","record"]}
{"code_tokens":["\n","public","short","getColourPaletteIndex","(",")","\n","{","\n","return","field_5_colourPaletteIndex",";","\n"],"docstring_tokens":["Get","the","colour","palette","index","field","for","the","LineFormat","record"]}
{"code_tokens":["\n","public","void","setColourPaletteIndex","(","short","field_5_colourPaletteIndex",")","\n","{","\n","this",".","field_5_colourPaletteIndex","=","field_5_colourPaletteIndex",";","\n"],"docstring_tokens":["Set","the","colour","palette","index","field","for","the","LineFormat","record"]}
{"code_tokens":["\n","@Override\n","public","boolean","isBuiltin","(",")","{","\n","return","false",";","\n"],"docstring_tokens":["Always","false","for","these,","these","are","user","defined","styles"]}
{"code_tokens":["\n","@Override\n","public","Range","getRange","(",")","{","\n","//","//","First","up,","trigger","a","full-recalculate\n","//","//","Needed","in","case","of","deletes","etc\n","//","getOverallRange","(",")",";","\n","//\n","//","if","(","getFileInformationBlock","(",")",".","isFComplex","(",")",")","\n","//","{","\n","//","/*\n","//","*","Page","31:\n","//","*\n","//","*","main","document","must","be","found","by","examining","the","piece","table","entries\n","//","*","from","the","0th","piece","table","entry","from","the","piece","table","entry","that\n","//","*","describes","cp=fib",".","ccpText",".","\n","//","*/\n","//","//","TODO:","review\n","//","return","new","Range","(","_cpSplit",".","getMainDocumentStart","(",")",",\n","//","_cpSplit",".","getMainDocumentEnd","(",")",",","this",")",";","\n","//","}","\n","//\n","//","/*\n","//","*","Page","31:\n","//","*\n","//","*","\"In","a","non-complex","file,","this","means","text","of","the:","main","document\n","//","begins\n","//","*","at","fib",".","fcMin","in","the","file","and","continues","through\n","//","*","fib",".","fcMin+fib",".","ccpText",".","\"\n","//","*/\n","//","int","bytesStart","=","getFileInformationBlock","(",")",".","getFcMin","(",")",";","\n","//\n","//","int","charsStart","=","getTextTable","(",")",".","getCharIndex","(","bytesStart",")",";","\n","//","int","charsEnd","=","charsStart\n","//","+","getFileInformationBlock","(",")",".","getSubdocumentTextStreamLength","(","\n","//","SubdocumentType",".","MAIN",")",";","\n\n","//","it","seems","much","simpler","--","sergey\n","return","getRange","(","SubdocumentType",".","MAIN",")",";","\n"],"docstring_tokens":["Returns","the","range","which","covers","the","whole","of","the","document,","but","excludes","any","headers","and","footers"]}
{"code_tokens":["\n","@Internal\n","public","RevisionMarkAuthorTable","getRevisionMarkAuthorTable","(",")","{","\n","return","_rmat",";","\n"],"docstring_tokens":["Gets","a","reference","to","the","revision","mark","author","table,","which","holds","the","revision","mark","authors","for","the","document"]}
{"code_tokens":["\n","@Internal\n","public","CTChartSpace","getCTChartSpace","(",")","{","\n","return","chartSpace",";","\n"],"docstring_tokens":["Return","the","underlying","CTChartSpace","bean,","the","root","element","of","the","Chart","part"]}
{"code_tokens":["\n","@Internal\n","public","CTChart","getCTChart","(",")","{","\n","return","chartSpace",".","getChart","(",")",";","\n"],"docstring_tokens":["Return","the","underlying","CTChart","bean,","within","the","Chart","Space"]}
{"code_tokens":["\n","@Internal\n","protected","CTPlotArea","getCTPlotArea","(",")","{","\n","return","getCTChart","(",")",".","getPlotArea","(",")",";","\n"],"docstring_tokens":["Return","the","underlying","CTPlotArea","bean,","within","the","Chart"]}
{"code_tokens":["\n","public","void","clear","(",")","{","\n","axes",".","clear","(",")",";","\n","seriesCount","=","0",";","\n","if","(","workbook","!=","null",")","{","\n","workbook",".","removeSheetAt","(","0",")",";","\n","workbook",".","createSheet","(",")",";","\n","}","\n","getCTChart","(",")",".","set","(","CTChart",".","Factory",".","newInstance","(",")",")",";","\n","getCTChart","(",")",".","addNewPlotArea","(",")",";","\n"],"docstring_tokens":["Clear","all","properties,","as","if","a","new","instance","had","just","been","created"]}
{"code_tokens":["\n","public","void","removeTitle","(",")","{","\n","setAutoTitleDeleted","(","true",")",";","\n"],"docstring_tokens":["Remove","the","chart","title"]}
{"code_tokens":["\n","@Beta\n","public","XDDFTextBody","getFormattedTitle","(",")","{","\n","if","(","!getCTChart","(",")",".","isSetTitle","(",")",")","{","\n","return","null",";","\n","}","\n","return","new","XDDFTitle","(","this,","getCTChart","(",")",".","getTitle","(",")",")",".","getBody","(",")",";","\n"],"docstring_tokens":["Get","the","chart","title","body","if","there","is","one,","i.e"]}
{"code_tokens":["\n","public","XDDFChartData","createData","(","ChartTypes","type,","XDDFChartAxis","category,","XDDFValueAxis","values",")","{","\n","Map<Long,","XDDFChartAxis>","categories","=","null",";","\n","Map<Long,","XDDFValueAxis>","mapValues","=","null",";","\n\n","if","(","ChartTypes",".","PIE","!=","type","&&","ChartTypes",".","PIE3D","!=","type","&&","ChartTypes",".","DOUGHNUT","!=","type",")","{","\n","categories","=","Collections",".","singletonMap","(","category",".","getId","(",")",",","category",")",";","\n","mapValues","=","Collections",".","singletonMap","(","values",".","getId","(",")",",","values",")",";","\n","}","\n\n","final","CTPlotArea","plotArea","=","getCTPlotArea","(",")",";","\n","switch","(","type",")","{","\n","case","AREA:\n","return","new","XDDFAreaChartData","(","this,","plotArea",".","addNewAreaChart","(",")",",","categories,","mapValues",")",";","\n","case","AREA3D:\n","return","new","XDDFArea3DChartData","(","this,","plotArea",".","addNewArea3DChart","(",")",",","categories,","mapValues",")",";","\n","case","BAR:\n","return","new","XDDFBarChartData","(","this,","plotArea",".","addNewBarChart","(",")",",","categories,","mapValues",")",";","\n","case","BAR3D:\n","return","new","XDDFBar3DChartData","(","this,","plotArea",".","addNewBar3DChart","(",")",",","categories,","mapValues",")",";","\n","case","DOUGHNUT:\n","return","new","XDDFDoughnutChartData","(","this,","plotArea",".","addNewDoughnutChart","(",")",")",";","\n","case","LINE:\n","return","new","XDDFLineChartData","(","this,","plotArea",".","addNewLineChart","(",")",",","categories,","mapValues",")",";","\n","case","LINE3D:\n","return","new","XDDFLine3DChartData","(","this,","plotArea",".","addNewLine3DChart","(",")",",","categories,","mapValues",")",";","\n","case","PIE:\n","return","new","XDDFPieChartData","(","this,","plotArea",".","addNewPieChart","(",")",")",";","\n","case","PIE3D:\n","return","new","XDDFPie3DChartData","(","this,","plotArea",".","addNewPie3DChart","(",")",")",";","\n","case","RADAR:\n","return","new","XDDFRadarChartData","(","this,","plotArea",".","addNewRadarChart","(",")",",","categories,","mapValues",")",";","\n","case","SCATTER:\n","return","new","XDDFScatterChartData","(","this,","plotArea",".","addNewScatterChart","(",")",",","categories,","mapValues",")",";","\n","case","SURFACE:\n","return","new","XDDFSurfaceChartData","(","this,","plotArea",".","addNewSurfaceChart","(",")",",","categories,","mapValues",")",";","\n","case","SURFACE3D:\n","return","new","XDDFSurface3DChartData","(","this,","plotArea",".","addNewSurface3DChart","(",")",",","categories,","mapValues",")",";","\n","//","TODO","repeat","above","code","for","missing","charts:","Bubble,","OfPie","and","Stock\n","default:\n","return","null",";","\n","}","\n"],"docstring_tokens":["this","method","will","return","specified","chart","data","with","category","and","series","values"]}
{"code_tokens":["\n","public","void","saveWorkbook","(","XSSFWorkbook","workbook",")","throws","IOException,","InvalidFormatException","{","\n","PackagePart","worksheetPart","=","getWorksheetPart","(",")",";","\n","if","(","worksheetPart","==","null",")","{","\n","POIXMLRelation","chartWorkbookRelation","=","getChartWorkbookRelation","(",")",";","\n","POIXMLFactory","chartFactory","=","getChartFactory","(",")",";","\n","if","(","chartWorkbookRelation","!=","null","&&","chartFactory","!=","null",")","{","\n","worksheetPart","=","createWorksheetPart","(","chartWorkbookRelation,","chartFactory",")",";","\n","}","else","{","\n","throw","new","InvalidFormatException","(","\"unable","to","determine","chart","relations\"",")",";","\n","}","\n","}","\n","try","(","OutputStream","xlsOut","=","worksheetPart",".","getOutputStream","(",")",")","{","\n","setWorksheetPartCommitted","(",")",";","\n","workbook",".","write","(","xlsOut",")",";","\n","}","\n"],"docstring_tokens":["this","method","write","the","XSSFWorkbook","object","data","into","embedded","excel","file"]}
{"code_tokens":["\n","private","XSSFRow","getRow","(","XSSFSheet","sheet,","int","index",")","{","\n","XSSFRow","row","=","sheet",".","getRow","(","index",")",";","\n","if","(","row","==","null",")","{","\n","return","sheet",".","createRow","(","index",")",";","\n","}","else","{","\n","return","row",";","\n","}","\n"],"docstring_tokens":["this","method","return","row","on","given","index","if","row","is","null","then","create","new","row"]}
{"code_tokens":["\n","private","XSSFCell","getCell","(","XSSFRow","row,","int","index",")","{","\n","XSSFCell","cell","=","row",".","getCell","(","index",")",";","\n","if","(","cell","==","null",")","{","\n","return","row",".","createCell","(","index",")",";","\n","}","else","{","\n","return","cell",";","\n","}","\n"],"docstring_tokens":["this","method","return","cell","on","given","index","if","cell","is","null","then","create","new","cell"]}
{"code_tokens":["\n","public","void","importContent","(","XDDFChart","other",")","{","\n","getCTChartSpace","(",")",".","set","(","other",".","getCTChartSpace","(",")",")",";","\n"],"docstring_tokens":["import","content","from","other","chart","to","created","chart"]}
{"code_tokens":["\n","public","void","replaceReferences","(","XSSFSheet","newSheet",")","{","\n","for","(","XDDFChartData","data",":","getChartSeries","(",")",")","{","\n","for","(","XDDFChartData",".","Series","series",":","data",".","series",")","{","\n","XDDFDataSource<?>","newCategory","=","series",".","categoryData",";","\n","XDDFNumericalDataSource<?","extends","Number>","newValues","=","series",".","valuesData",";","\n","try","{","\n","if","(","series",".","categoryData","!=","null","&&","series",".","categoryData",".","isReference","(",")",")","{","\n","String","ref","=","series",".","categoryData",".","getDataRangeReference","(",")",";","\n","CellRangeAddress","rangeAddress","=","CellRangeAddress",".","valueOf","(","ref",".","substring","(","ref",".","indexOf","(","'!'",")","+","1",")",")",";","\n","newCategory","=","series",".","categoryData",".","isNumeric","(",")","\n","?","XDDFDataSourcesFactory",".","fromNumericCellRange","(","newSheet,","rangeAddress",")","\n",":","XDDFDataSourcesFactory",".","fromStringCellRange","(","newSheet,","rangeAddress",")",";","\n","if","(","newCategory",".","isNumeric","(",")",")","{","\n","(","(","XDDFNumericalDataSource<?","extends","Number>",")","newCategory",")",".","setFormatCode","(","series",".","categoryData",".","getFormatCode","(",")",")",";","\n","}","\n","}","\n","if","(","series",".","valuesData!=","null","&&","series",".","valuesData",".","isReference","(",")",")","{","\n","String","ref","=","series",".","valuesData",".","getDataRangeReference","(",")",";","\n","CellRangeAddress","rangeAddress","=","CellRangeAddress",".","valueOf","(","ref",".","substring","(","ref",".","indexOf","(","'!'",")","+","1",")",")",";","\n","newValues","=","XDDFDataSourcesFactory",".","fromNumericCellRange","(","newSheet,","rangeAddress",")",";","\n","newValues",".","setFormatCode","(","series",".","valuesData",".","getFormatCode","(",")",")",";","\n","}","\n","}","catch","(","IllegalArgumentException","iae",")","{","\n","//","keep","old","values","when","cell","range","cannot","be","parsed\n","}","\n","series",".","replaceData","(","newCategory,","newValues",")",";","\n","series",".","plot","(",")",";","\n","}","\n","}","\n"],"docstring_tokens":["Replace","references","to","the","sheet","name","in","the","data","supporting","the","chart"]}
{"code_tokens":["\n","//","Keep","this","code","in","sync","with","{","@link","RowShifter#shiftMergedRegions","}","\n","@Override\n","public","List<CellRangeAddress>","shiftMergedRegions","(","int","startColumn,","int","endColumn,","int","n",")","{","\n","List<CellRangeAddress>","shiftedRegions","=","new","ArrayList<>","(",")",";","\n","Set<Integer>","removedIndices","=","new","HashSet<>","(",")",";","\n","//move","merged","regions","completely","if","they","fall","within","the","new","region","boundaries","when","they","are","shifted\n","int","size","=","sheet",".","getNumMergedRegions","(",")",";","\n","for","(","int","i","=","0",";","i","<","size",";","i++",")","{","\n","CellRangeAddress","merged","=","sheet",".","getMergedRegion","(","i",")",";","\n\n","//","remove","merged","region","that","are","replaced","by","the","shifting,\n","//","i",".","e",".","where","the","area","includes","something","in","the","overwritten","area\n","if","(","removalNeeded","(","merged,","startColumn,","endColumn,","n",")",")","{","\n","removedIndices",".","add","(","i",")",";","\n","continue",";","\n","}","\n\n","boolean","inStart","=","(","merged",".","getFirstColumn","(",")",">=","startColumn","||","merged",".","getLastColumn","(",")",">=","startColumn",")",";","\n","boolean","inEnd","=","(","merged",".","getFirstColumn","(",")","<=","endColumn","||","merged",".","getLastColumn","(",")","<=","endColumn",")",";","\n\n","//don't","check","if","it's","not","within","the","shifted","area\n","if","(","!inStart","||","!inEnd",")","{","\n","continue",";","\n","}","\n\n","//only","shift","if","the","region","outside","the","shifted","columns","is","not","merged","too\n","if","(","!merged",".","containsColumn","(","startColumn","-","1",")","&&","!merged",".","containsColumn","(","endColumn","+","1",")",")","{","\n","merged",".","setFirstColumn","(","merged",".","getFirstColumn","(",")","+","n",")",";","\n","merged",".","setLastColumn","(","merged",".","getLastColumn","(",")","+","n",")",";","\n","//have","to","remove/add","it","back\n","shiftedRegions",".","add","(","merged",")",";","\n","removedIndices",".","add","(","i",")",";","\n","}","\n","}","\n","\n","if","(","!removedIndices",".","isEmpty","(",")",")","{","\n","sheet",".","removeMergedRegions","(","removedIndices",")",";","\n","}","\n\n","//read","so","it","doesn't","get","shifted","again\n","for","(","CellRangeAddress","region",":","shiftedRegions",")","{","\n","sheet",".","addMergedRegion","(","region",")",";","\n","}","\n","return","shiftedRegions",";","\n"],"docstring_tokens":["Shifts,","grows,","or","shrinks","the","merged","regions","due","to","a","column","shift"]}
{"code_tokens":["\n","public","void","updateSheet","(",")","{","\n","if","(","cachedFontInfo","!=","null",")","{","\n","for","(","FontGroup","tt",":","FontGroup",".","values","(",")",")","{","\n","setFontInfo","(","cachedFontInfo[tt",".","ordinal","(",")","],","tt",")",";","\n","}","\n","cachedFontInfo","=","null",";","\n","}","\n"],"docstring_tokens":["Supply","the","SlideShow","we","belong","to"]}
{"code_tokens":["\n","public","double","getMargin","(",")","\n","{","\n","return","field_1_margin",";","\n"],"docstring_tokens":["Get","the","margin","field","for","the","BottomMargin","record"]}
{"code_tokens":["\n","public","void","setMargin","(","double","field_1_margin",")","\n","{","\n","this",".","field_1_margin","=","field_1_margin",";","\n"],"docstring_tokens":["Set","the","margin","field","for","the","BottomMargin","record"]}
{"code_tokens":["\n","public","int","numStyles","(",")","{","\n","return","_styleDescriptions",".","length",";","\n"],"docstring_tokens":["Gets","the","number","of","styles","in","the","style","sheet"]}
{"code_tokens":["\n","public","short","getPointNumber","(",")","\n","{","\n","return","field_1_pointNumber",";","\n"],"docstring_tokens":["Get","the","point","number","field","for","the","DataFormat","record"]}
{"code_tokens":["\n","public","void","setPointNumber","(","short","field_1_pointNumber",")","\n","{","\n","this",".","field_1_pointNumber","=","field_1_pointNumber",";","\n"],"docstring_tokens":["Set","the","point","number","field","for","the","DataFormat","record"]}
{"code_tokens":["\n","public","short","getSeriesIndex","(",")","\n","{","\n","return","field_2_seriesIndex",";","\n"],"docstring_tokens":["Get","the","series","index","field","for","the","DataFormat","record"]}
{"code_tokens":["\n","public","void","setSeriesIndex","(","short","field_2_seriesIndex",")","\n","{","\n","this",".","field_2_seriesIndex","=","field_2_seriesIndex",";","\n"],"docstring_tokens":["Set","the","series","index","field","for","the","DataFormat","record"]}
{"code_tokens":["\n","public","short","getSeriesNumber","(",")","\n","{","\n","return","field_3_seriesNumber",";","\n"],"docstring_tokens":["Get","the","series","number","field","for","the","DataFormat","record"]}
{"code_tokens":["\n","public","void","setSeriesNumber","(","short","field_3_seriesNumber",")","\n","{","\n","this",".","field_3_seriesNumber","=","field_3_seriesNumber",";","\n"],"docstring_tokens":["Set","the","series","number","field","for","the","DataFormat","record"]}
{"code_tokens":["\n","public","short","getFormatFlags","(",")","\n","{","\n","return","field_4_formatFlags",";","\n"],"docstring_tokens":["Get","the","format","flags","field","for","the","DataFormat","record"]}
{"code_tokens":["\n","public","void","setFormatFlags","(","short","field_4_formatFlags",")","\n","{","\n","this",".","field_4_formatFlags","=","field_4_formatFlags",";","\n"],"docstring_tokens":["Set","the","format","flags","field","for","the","DataFormat","record"]}
{"code_tokens":["\n","public","boolean","isUseExcel4Colors","(",")","\n","{","\n","return","useExcel4Colors",".","isSet","(","field_4_formatFlags",")",";","\n"],"docstring_tokens":["set","true","to","use","excel","4","colors"]}
{"code_tokens":["\n","private","static","ObjectProtectRecord","createObjectProtect","(",")","{","\n","ObjectProtectRecord","retval","=","new","ObjectProtectRecord","(",")",";","\n","retval",".","setProtect","(","false",")",";","\n","return","retval",";","\n"],"docstring_tokens":["creates","an","ObjectProtect","record","with","protect","set","to","false"]}
{"code_tokens":["\n","private","static","ScenarioProtectRecord","createScenarioProtect","(",")","{","\n","ScenarioProtectRecord","retval","=","new","ScenarioProtectRecord","(",")",";","\n","retval",".","setProtect","(","false",")",";","\n","return","retval",";","\n"],"docstring_tokens":["creates","a","ScenarioProtect","record","with","protect","set","to","false"]}
{"code_tokens":["\n","public","int","getRectX1","(",")","\n","{","\n","return","field_1_rectX1",";","\n"],"docstring_tokens":["The","starting","top-left","coordinate","of","child","records"]}
{"code_tokens":["\n","public","void","setRectX1","(","int","x1",")","\n","{","\n","this",".","field_1_rectX1","=","x1",";","\n"],"docstring_tokens":["The","top-left","coordinate","of","child","records"]}
{"code_tokens":["\n","public","void","setRectY1","(","int","y1",")","\n","{","\n","this",".","field_2_rectY1","=","y1",";","\n"],"docstring_tokens":["The","top-left","y","coordinate","of","child","records"]}
{"code_tokens":["\n","public","int","getRectX2","(",")","\n","{","\n","return","field_3_rectX2",";","\n"],"docstring_tokens":["The","bottom-right","x","coordinate","of","child","records"]}
{"code_tokens":["\n","public","int","getRectY2","(",")","\n","{","\n","return","field_4_rectY2",";","\n"],"docstring_tokens":["The","bottom-right","y","coordinate","of","child","records"]}
{"code_tokens":["\n","@Test\n","protected","void","bug22720","(",")","throws","IOException","{","\n","try","(","Workbook","wb","=","_testDataProvider",".","createWorkbook","(",")",")","{","\n","wb",".","createSheet","(","\"TEST\"",")",";","\n","Sheet","template","=","wb",".","getSheetAt","(","0",")",";","\n\n","assertEquals","(","0,","template",".","addMergedRegion","(","new","CellRangeAddress","(","0,","1,","0,","2",")",")",")",";","\n","assertEquals","(","1,","template",".","addMergedRegion","(","new","CellRangeAddress","(","2,","3,","0,","2",")",")",")",";","\n\n","Sheet","clone","=","wb",".","cloneSheet","(","0",")",";","\n","int","originalMerged","=","template",".","getNumMergedRegions","(",")",";","\n","assertEquals","(","2,","originalMerged,","\"2","merged","regions\"",")",";","\n\n","//remove","merged","regions","from","clone\n","for","(","int","i","=","template",".","getNumMergedRegions","(",")","-","1",";","i",">=","0",";","i--",")","{","\n","clone",".","removeMergedRegion","(","i",")",";","\n","}","\n\n","assertEquals","(","originalMerged,","template",".","getNumMergedRegions","(",")",",","\"Original","Sheet's","Merged","Regions","were","removed\"",")",";","\n","//check","if","template's","merged","regions","are","OK\n","if","(","template",".","getNumMergedRegions","(",")",">","0",")","{","\n","//","fetch","the","first","merged","region",".",".",".","EXCEPTION","OCCURS","HERE\n","template",".","getMergedRegion","(","0",")",";","\n","}","\n","}","\n"],"docstring_tokens":["Merged","regions","were","being","removed","from","the","parent","in","cloned","sheets"]}
{"code_tokens":["\n","@Test\n","void","bug15353","(",")","throws","IOException","{","\n","String","hyperlinkF","=","\"HYPERLINK","(","\\\"http://google",".","com\\\",\\\"Google\\\"",")","\"",";","\n\n","try","(","Workbook","wb1","=","_testDataProvider",".","createWorkbook","(",")",")","{","\n","Sheet","sheet","=","wb1",".","createSheet","(","\"My","sheet\"",")",";","\n\n","Row","row","=","sheet",".","createRow","(","0",")",";","\n","Cell","cell","=","row",".","createCell","(","0",")",";","\n","cell",".","setCellFormula","(","hyperlinkF",")",";","\n\n","assertEquals","(","hyperlinkF,","cell",".","getCellFormula","(",")",")",";","\n\n","try","(","Workbook","wb2","=","_testDataProvider",".","writeOutAndReadBack","(","wb1",")",")","{","\n","sheet","=","wb2",".","getSheet","(","\"My","Sheet\"",")",";","\n","row","=","sheet",".","getRow","(","0",")",";","\n","cell","=","row",".","getCell","(","0",")",";","\n\n","assertEquals","(","hyperlinkF,","cell",".","getCellFormula","(",")",")",";","\n","}","\n","}","\n"],"docstring_tokens":["Test","hyperlinks","open","resulting","file","in","excel,","and","check","that","there","is","a","link","to","Google"]}
{"code_tokens":["\n","protected","ShapeVisitorAcceptor","getAcceptor","(",")","{","\n","return","new","ShapeVisitorAcceptor","(",")","{","\n","@Override\n","public","boolean","accept","(","XDGFShape","shape",")","{","\n","return","!shape",".","isDeleted","(",")",";","\n","}","\n","}",";","\n"],"docstring_tokens":["Is","only","called","on","construction","of","the","visitor,","allows","mixing","visitors","and","acceptors"]}
{"code_tokens":["\n\n","public","void","setWidth","(","short","w",")","\n","{","\n","field_3_width","=","w",";","\n"],"docstring_tokens":["set","the","width","of","the","window"]}
{"code_tokens":["\n\n","public","void","setHeight","(","short","h",")","\n","{","\n","field_4_height","=","h",";","\n"],"docstring_tokens":["set","teh","height","of","the","window"]}
{"code_tokens":["\n\n","public","void","setHidden","(","boolean","ishidden",")","\n","{","\n","field_5_options","=","hidden",".","setShortBoolean","(","field_5_options,","ishidden",")",";","\n"],"docstring_tokens":["set","whether","the","window","is","hidden","or","not"]}
{"code_tokens":["\n\n","public","void","setIconic","(","boolean","isiconic",")","\n","{","\n","field_5_options","=","iconic",".","setShortBoolean","(","field_5_options,","isiconic",")",";","\n"],"docstring_tokens":["set","whether","the","window","has","been","iconized","or","not"]}
{"code_tokens":["\n\n","public","short","getWidth","(",")","\n","{","\n","return","field_3_width",";","\n"],"docstring_tokens":["get","the","width","of","the","window"]}
{"code_tokens":["\n\n","public","short","getHeight","(",")","\n","{","\n","return","field_4_height",";","\n"],"docstring_tokens":["get","the","height","of","the","window"]}
{"code_tokens":["\n\n","public","boolean","getHidden","(",")","\n","{","\n","return","hidden",".","isSet","(","field_5_options",")",";","\n"],"docstring_tokens":["get","whether","the","window","is","hidden","or","not"]}
{"code_tokens":["\n\n","public","boolean","getIconic","(",")","\n","{","\n","return","iconic",".","isSet","(","field_5_options",")",";","\n"],"docstring_tokens":["get","whether","the","window","has","been","iconized","or","not"]}
{"code_tokens":["\n","public","static","Ptg[]","parse","(","String","formula,","HSSFWorkbook","workbook",")","throws","FormulaParseException","{","\n","return","parse","(","formula,","workbook,","FormulaType",".","CELL",")",";","\n"],"docstring_tokens":["Convenience","method","for","parsing","cell","formulas"]}
{"code_tokens":["\n","public","int","getDxaGoal","(",")","\n","{","\n","return","_picf",".","getDxaGoal","(",")",";","\n"],"docstring_tokens":["Gets","the","initial","width","of","the","picture,","in","twips,","prior","to","cropping","or","scaling"]}
{"code_tokens":["\n","public","int","getDyaGoal","(",")","\n","{","\n","return","_picf",".","getDyaGoal","(",")",";","\n"],"docstring_tokens":["Gets","the","initial","height","of","the","picture,","in","twips,","prior","to","cropping","or","scaling"]}
{"code_tokens":["\n","public","int","getHeight","(",")","\n","{","\n","if","(","height","==","-1",")","\n","{","\n","fillWidthHeight","(",")",";","\n","}","\n","return","height",";","\n"],"docstring_tokens":["returns","pixel","height","of","the","picture","or","-1","if","dimensions","determining","was","failed"]}
{"code_tokens":["\n","public","int","getWidth","(",")","\n","{","\n","if","(","width","==","-1",")","\n","{","\n","fillWidthHeight","(",")",";","\n","}","\n","return","width",";","\n"],"docstring_tokens":["returns","pixel","width","of","the","picture","or","-1","if","dimensions","determining","was","failed"]}
{"code_tokens":["\n","public","String","getDescription","(",")","\n","{","\n","for","(","EscherRecord","escherRecord",":","_picfAndOfficeArtData",".","getShape","(",")",")","{","\n","if","(","escherRecord","instanceof","EscherOptRecord",")","{","\n","EscherOptRecord","escherOptRecord","=","(","EscherOptRecord",")","escherRecord",";","\n","for","(","EscherProperty","property",":","escherOptRecord",".","getEscherProperties","(",")",")","{","\n","if","(","EscherPropertyTypes",".","GROUPSHAPE__DESCRIPTION",".","propNumber","==","property",".","getPropertyNumber","(",")",")","{","\n","byte[]","complexData","=","(","(","EscherComplexProperty",")","property",")",".","getComplexData","(",")",";","\n","return","StringUtil",".","getFromUnicodeLE","(","complexData,0,complexData",".","length/2-1",")",";","\n","}","\n","}","\n","}","\n","}","\n\n","return","null",";","\n"],"docstring_tokens":["returns","the","description","stored","in","the","alternative","text"]}
{"code_tokens":["\n","@Internal\n","CTComment","getCTComment","(","CellAddress","cellRef",")","{","\n","//","Create","the","cache","if","needed\n","prepareCTCommentCache","(",")",";","\n\n","//","Return","the","comment,","or","null","if","not","known\n","return","commentRefs",".","get","(","cellRef",")",";","\n"],"docstring_tokens":["Get","the","underlying","CTComment","xmlbean","for","a","comment","located","at","cellRef,","if","it","exists"]}
{"code_tokens":["\n","private","int","addNewAuthor","(","String","author",")","{","\n","int","index","=","comments",".","getAuthors","(",")",".","sizeOfAuthorArray","(",")",";","\n","comments",".","getAuthors","(",")",".","insertAuthor","(","index,","author",")",";","\n","return","index",";","\n"],"docstring_tokens":["Add","a","new","author","to","the","CommentsTable"]}
{"code_tokens":["\n","public","final","void","tryToDeleteArrayFormula","(","String","message",")","{","\n","assert","isPartOfArrayFormulaGroup","(",")",";","\n\n","CellRangeAddress","arrayFormulaRange","=","getArrayFormulaRange","(",")",";","\n","if","(","arrayFormulaRange",".","getNumberOfCells","(",")",">","1",")","{","\n","if","(","message","==","null",")","{","\n","message","=","\"Cell","\"","+","new","CellReference","(","this",")",".","formatAsString","(",")","+","\"","is","part","of","a","multi-cell","array","formula",".","\"","+\n","\"You","cannot","change","part","of","an","array",".","\"",";","\n","}","\n","throw","new","IllegalStateException","(","message",")",";","\n","}","\n","//un-register","the","single-cell","array","formula","from","the","parent","sheet","through","public","interface\n","getRow","(",")",".","getSheet","(",")",".","removeArrayFormula","(","this",")",";","\n"],"docstring_tokens":["Called","when","this","an","array","formula","in","this","cell","is","deleted"]}
{"code_tokens":["\n","public","static","boolean","isRowWithinRange","(","String","rowStr,","SpreadsheetVersion","ssVersion",")","{","\n","final","long","rowNum","=","Long",".","parseLong","(","rowStr",")","-","1",";","\n","if","(","rowNum",">","Integer",".","MAX_VALUE",")","{","\n","return","false",";","\n","}","\n","return","isRowWithinRange","(","Math",".","toIntExact","(","rowNum",")",",","ssVersion",")",";","\n"],"docstring_tokens":["Determines","whether","rowStr","is","a","valid","row","number","for","a","given","SpreadsheetVersion"]}
{"code_tokens":["\n","private","static","CellRefParts","separateRefParts","(","String","reference",")","{","\n","int","plingPos","=","reference",".","lastIndexOf","(","SHEET_NAME_DELIMITER",")",";","\n","final","String","sheetName","=","parseSheetName","(","reference,","plingPos",")",";","\n","String","cell","=","reference",".","substring","(","plingPos+1",")",".","toUpperCase","(","Locale",".","ROOT",")",";","\n","Matcher","matcher","=","CELL_REF_PATTERN",".","matcher","(","cell",")",";","\n","if","(","!matcher",".","matches","(",")",")","{","\n","throw","new","IllegalArgumentException","(","\"Invalid","CellReference:","\"","+","reference",")",";","\n","}","\n","String","col","=","matcher",".","group","(","1",")",";","\n","String","row","=","matcher",".","group","(","2",")",";","\n\n","return","new","CellRefParts","(","sheetName,","row,","col",")",";","\n"],"docstring_tokens":["Separates","the","sheet","name,","row,","and","columns","from","a","cell","reference","string"]}
{"code_tokens":["\n","private","boolean","processRecord","(","org",".","apache",".","poi",".","hssf",".","record",".","Record","record",")","{","\n","if","(","!isSidIncluded","(","record",".","getSid","(",")",")",")","{","\n","return","true",";","\n","}","\n","return","_listener",".","processRecord","(","record",")",";","\n"],"docstring_tokens":["sends","the","record","event","to","all","registered","listeners"]}
{"code_tokens":["\n","public","void","processRecords","(","InputStream","in",")","throws","RecordFormatException","{","\n","Record","last_record","=","null",";","\n\n","RecordInputStream","recStream","=","new","RecordInputStream","(","in",")",";","\n\n","while","(","recStream",".","hasNextRecord","(",")",")","{","\n","recStream",".","nextRecord","(",")",";","\n","Record[]","recs","=","RecordFactory",".","createRecord","(","recStream",")",";","//","handle","MulRK","records\n","if","(","recs",".","length",">","1",")","{","\n","for","(","org",".","apache",".","poi",".","hssf",".","record",".","Record","rec",":","recs",")","{","\n","if","(","last_record","!=","null",")","{","\n","if","(","!processRecord","(","last_record",")",")","{","\n","return",";","\n","}","\n","}","\n","last_record","=","rec",";","//","do","to","keep","the","algorithm","homogeneous",".",".",".","you","can't\n","}","//","actually","continue","a","number","record","anyhow",".","\n","}","else","{","\n","Record","record","=","recs[","0","]",";","\n\n","if","(","record","!=","null",")","{","\n","if","(","last_record","!=","null",")","{","\n","if","(","!processRecord","(","last_record",")",")","{","\n","return",";","\n","}","\n","}","\n","last_record","=","record",";","\n","}","\n","}","\n","}","\n\n","if","(","last_record","!=","null",")","{","\n","processRecord","(","last_record",")",";","\n","}","\n"],"docstring_tokens":["Create","an","array","of","records","from","an","input","stream"]}
{"code_tokens":["\n\n","public","void","setTopColGutter","(","short","gut",")","\n","{","\n","field_2_top_col_gutter","=","gut",";","\n"],"docstring_tokens":["set","the","size","of","the","gutter","that","appears","at","the","above","the","columns"]}
{"code_tokens":["\n\n","public","void","setRowLevelMax","(","short","max",")","\n","{","\n","field_3_row_level_max","=","max",";","\n"],"docstring_tokens":["set","the","maximum","outline","level","for","the","row","gutter"]}
{"code_tokens":["\n","public","static","String","format","(","String","rawSheetName",")","{","\n","StringBuilder","sb","=","new","StringBuilder","(","(","rawSheetName","==","null","?","0",":","rawSheetName",".","length","(",")",")","+","2",")",";","\n","appendFormat","(","sb,","rawSheetName",")",";","\n","return","sb",".","toString","(",")",";","\n"],"docstring_tokens":["Used","to","format","sheet","names","as","they","would","appear","in","cell","formula","expressions"]}
{"code_tokens":["\n","public","static","void","main","(","String[]","args",")","throws","IOException,","OpenXML4JException","{","\n","UpdateEmbeddedDoc","ued","=","new","UpdateEmbeddedDoc","(","args[0]",")",";","\n","ued",".","updateEmbeddedDoc","(",")",";","\n","ued",".","checkUpdatedDoc","(",")",";","\n"],"docstring_tokens":["Code","to","test","updating","of","the","embedded","Excel","workbook"]}
{"code_tokens":["\n","public","EscherDgRecord","createDgRecord","(",")","{","\n","EscherDgRecord","dg","=","new","EscherDgRecord","(",")",";","\n","dg",".","setRecordId","(","EscherDgRecord",".","RECORD_ID",")",";","\n","short","dgId","=","findNewDrawingGroupId","(",")",";","\n","dg",".","setOptions","(","(","short",")","(","dgId","<<","4",")",")",";","\n","dg",".","setNumShapes","(","0",")",";","\n","dg",".","setLastMSOSPID","(","-1",")",";","\n","drawingGroups",".","add","(","dg",")",";","\n","dgg",".","addCluster","(","dgId,","0",")",";","\n","dgg",".","setDrawingsSaved","(","dgg",".","getDrawingsSaved","(",")","+","1",")",";","\n","return","dg",";","\n"],"docstring_tokens":["Creates","a","new","drawing","group"]}
{"code_tokens":["\n","public","void","setSvgImage","(","XSLFPictureData","svgPic",")","{","\n","CTBlip","blip","=","getBlip","(",")",";","\n","CTOfficeArtExtensionList","extLst","=","blip",".","isSetExtLst","(",")","?","blip",".","getExtLst","(",")",":","blip",".","addNewExtLst","(",")",";","\n\n","final","int","bitmapId","=","getExt","(","extLst,","BITMAP_URI",")",";","\n","CTOfficeArtExtension","extBitmap",";","\n","if","(","bitmapId","==","-1",")","{","\n","extBitmap","=","extLst",".","addNewExt","(",")",";","\n","extBitmap",".","setUri","(","BITMAP_URI",")",";","\n","XmlCursor","cur","=","extBitmap",".","newCursor","(",")",";","\n","try","{","\n","cur",".","toEndToken","(",")",";","\n","cur",".","beginElement","(","new","QName","(","MS_DML_NS,","\"useLocalDpi\",","\"a14\"",")",")",";","\n","cur",".","insertNamespace","(","\"a14\",","MS_DML_NS",")",";","\n","cur",".","insertAttributeWithValue","(","\"val\",","\"0\"",")",";","\n","}","finally","{","\n","cur",".","dispose","(",")",";","\n","}","\n","}","\n\n","final","int","svgId","=","getExt","(","extLst,","SVG_URI",")",";","\n","if","(","svgId","!=","-1",")","{","\n","extLst",".","removeExt","(","svgId",")",";","\n","}","\n\n","String","svgRelId","=","getSheet","(",")",".","getRelationId","(","svgPic",")",";","\n","if","(","svgRelId","==","null",")","{","\n","svgRelId","=","getSheet","(",")",".","addRelation","(","null,","XSLFRelation",".","IMAGE_SVG,","svgPic",")",".","getRelationship","(",")",".","getId","(",")",";","\n","}","\n\n","CTOfficeArtExtension","svgBitmap","=","extLst",".","addNewExt","(",")",";","\n","svgBitmap",".","setUri","(","SVG_URI",")",";","\n","XmlCursor","cur","=","svgBitmap",".","newCursor","(",")",";","\n","try","{","\n","cur",".","toEndToken","(",")",";","\n","cur",".","beginElement","(","new","QName","(","MS_SVG_NS,","\"svgBlip\",","\"asvg\"",")",")",";","\n","cur",".","insertNamespace","(","\"asvg\",","MS_SVG_NS",")",";","\n","cur",".","insertAttributeWithValue","(","EMBED_TAG,","svgRelId",")",";","\n","}","finally","{","\n","cur",".","dispose","(",")",";","\n","}","\n"],"docstring_tokens":["Add","a","SVG","image","reference"]}
{"code_tokens":["\n","public","int","getFormatIndex","(","CellValueRecordInterface","cell",")","{","\n","ExtendedFormatRecord","xfr","=","_xfRecords",".","get","(","cell",".","getXFIndex","(",")",")",";","\n","if","(","xfr","==","null",")","{","\n","LOG",".","atError","(",")",".","log","(","\"Cell","{","}",",","{","}","uses","XF","with","index","{","}",",","but","we","don't","have","that\",","box","(","cell",".","getRow","(",")",")",",box","(","cell",".","getColumn","(",")",")",",box","(","cell",".","getXFIndex","(",")",")",")",";","\n","return","-1",";","\n","}","\n","return","xfr",".","getFormatIndex","(",")",";","\n"],"docstring_tokens":["Returns","the","index","of","the","format","string,","used","by","your","cell,","or","-1","if","none","found"]}
{"code_tokens":["\n","private","static","int","performBinarySearch","(","ValueVector","vector,","LookupValueComparer","lookupComparer",")","{","\n","//","both","low","and","high","indexes","point","to","values","assumed","too","low","and","too","high",".","\n","BinarySearchIndexes","bsi","=","new","BinarySearchIndexes","(","vector",".","getSize","(",")",")",";","\n\n","while","(","true",")","{","\n","int","midIx","=","bsi",".","getMidIx","(",")",";","\n\n","if","(","midIx","<","0",")","{","\n","return","bsi",".","getLowIx","(",")",";","\n","}","\n","CompareResult","cr","=","lookupComparer",".","compareTo","(","vector",".","getItem","(","midIx",")",")",";","\n","if","(","cr",".","isTypeMismatch","(",")",")","{","\n","int","newMidIx","=","handleMidValueTypeMismatch","(","lookupComparer,","vector,","bsi,","midIx,","false",")",";","\n","if","(","newMidIx","<","0",")","{","\n","continue",";","\n","}","\n","midIx","=","newMidIx",";","\n","cr","=","lookupComparer",".","compareTo","(","vector",".","getItem","(","midIx",")",")",";","\n","}","\n","if","(","cr",".","isEqual","(",")",")","{","\n","return","findLastIndexInRunOfEqualValues","(","lookupComparer,","vector,","midIx,","bsi",".","getHighIx","(",")",")",";","\n","}","\n","bsi",".","narrowSearch","(","midIx,","cr",".","isLessThan","(",")",")",";","\n","}","\n"],"docstring_tokens":["Excel","has","funny","behaviour","when","the","some","elements","in","the","search","vector","are","the","wrong","type"]}
{"code_tokens":["\n\n","public","int","getRawValue","(","final","int","holder",")","\n","{","\n","return","(","holder","&","_mask",")",";","\n"],"docstring_tokens":["Obtain","the","value","for","the","specified","BitField,","unshifted"]}
{"code_tokens":["\n\n","public","int","setValue","(","final","int","holder,","final","int","value",")","\n","{","\n","return","(","holder","&","~_mask",")","|","(","(","value","<<","_shift_count",")","&","_mask",")",";","\n"],"docstring_tokens":["Replace","the","bits","with","new","values"]}
{"code_tokens":["\n\n","public","int","setBoolean","(","final","int","holder,","final","boolean","flag",")","\n","{","\n","return","flag","?","set","(","holder",")","\n",":","clear","(","holder",")",";","\n"],"docstring_tokens":["Set","a","boolean","BitField"]}
{"code_tokens":["\n","public","boolean","getHCenter","(",")","\n","{","\n","return","(","field_1_hcenter","==","1",")",";","\n"],"docstring_tokens":["get","whether","or","not","to","horizonatally","center","this","sheet"]}
{"code_tokens":["\n","public","static","CellRangeAddress","valueOf","(","String","ref",")","{","\n","int","sep","=","ref",".","indexOf","(","':'",")",";","\n","CellReference","a",";","\n","CellReference","b",";","\n","if","(","sep","==","-1",")","{","\n","a","=","new","CellReference","(","ref",")",";","\n","b","=","a",";","\n","}","else","{","\n","a","=","new","CellReference","(","ref",".","substring","(","0,","sep",")",")",";","\n","b","=","new","CellReference","(","ref",".","substring","(","sep","+","1",")",")",";","\n","}","\n","return","new","CellRangeAddress","(","a",".","getRow","(",")",",","b",".","getRow","(",")",",","a",".","getCol","(",")",",","b",".","getCol","(",")",")",";","\n"],"docstring_tokens":["Creates","a","CellRangeAddress","from","a","cell","range","reference","string"]}
{"code_tokens":["\n","@Override\n","public","XSSFWorkbook","getWorkbook","(",")","{","\n","return","(","XSSFWorkbook",")","getParent","(",")",";","\n"],"docstring_tokens":["Returns","the","parent","XSSFWorkbook"]}
{"code_tokens":["\n","@Override\n","protected","void","onDocumentCreate","(",")","{","\n","worksheet","=","newSheet","(",")",";","\n","initRows","(","worksheet",")",";","\n","columnHelper","=","new","ColumnHelper","(","worksheet",")",";","\n","hyperlinks","=","new","ArrayList<>","(",")",";","\n"],"docstring_tokens":["Initialize","worksheet","data","when","creating","a","new","sheet"]}
{"code_tokens":["\n","private","static","CTWorksheet","newSheet","(",")","{","\n","CTWorksheet","worksheet","=","CTWorksheet",".","Factory",".","newInstance","(",")",";","\n","CTSheetFormatPr","ctFormat","=","worksheet",".","addNewSheetFormatPr","(",")",";","\n","ctFormat",".","setDefaultRowHeight","(","DEFAULT_ROW_HEIGHT",")",";","\n\n","CTSheetView","ctView","=","worksheet",".","addNewSheetViews","(",")",".","addNewSheetView","(",")",";","\n","ctView",".","setWorkbookViewId","(","0",")",";","\n\n","worksheet",".","addNewDimension","(",")",".","setRef","(","\"A1\"",")",";","\n\n","worksheet",".","addNewSheetData","(",")",";","\n\n","CTPageMargins","ctMargins","=","worksheet",".","addNewPageMargins","(",")",";","\n","ctMargins",".","setBottom","(","DEFAULT_MARGIN_BOTTOM",")",";","\n","ctMargins",".","setFooter","(","DEFAULT_MARGIN_FOOTER",")",";","\n","ctMargins",".","setHeader","(","DEFAULT_MARGIN_HEADER",")",";","\n","ctMargins",".","setLeft","(","DEFAULT_MARGIN_LEFT",")",";","\n","ctMargins",".","setRight","(","DEFAULT_MARGIN_RIGHT",")",";","\n","ctMargins",".","setTop","(","DEFAULT_MARGIN_TOP",")",";","\n\n","return","worksheet",";","\n"],"docstring_tokens":["Create","a","new","CTWorksheet","instance","with","all","values","set","to","defaults"]}
{"code_tokens":["\n","private","void","validateArrayFormulas","(","CellRangeAddress","region",")","{","\n","//","FIXME:","this","may","be","faster","if","it","looped","over","array","formulas","directly","rather","than","looping","over","each","cell","in\n","//","the","region","and","searching","if","that","cell","belongs","to","an","array","formula\n","int","firstRow","=","region",".","getFirstRow","(",")",";","\n","int","firstColumn","=","region",".","getFirstColumn","(",")",";","\n","int","lastRow","=","region",".","getLastRow","(",")",";","\n","int","lastColumn","=","region",".","getLastColumn","(",")",";","\n","//","for","each","cell","in","sheet,","if","cell","belongs","to","an","array","formula,","check","if","merged","region","intersects","array","formula","cells\n","for","(","int","rowIn","=","firstRow",";","rowIn","<=","lastRow",";","rowIn++",")","{","\n","XSSFRow","row","=","getRow","(","rowIn",")",";","\n","if","(","row","==","null",")","{","\n","continue",";","\n","}","\n\n","for","(","int","colIn","=","firstColumn",";","colIn","<=","lastColumn",";","colIn++",")","{","\n","XSSFCell","cell","=","row",".","getCell","(","colIn",")",";","\n","if","(","cell","==","null",")","{","\n","continue",";","\n","}","\n\n","if","(","cell",".","isPartOfArrayFormulaGroup","(",")",")","{","\n","CellRangeAddress","arrayRange","=","cell",".","getArrayFormulaRange","(",")",";","\n","if","(","arrayRange",".","getNumberOfCells","(",")",">","1","&&","region",".","intersects","(","arrayRange",")",")","{","\n","String","msg","=","\"The","range","\"","+","region",".","formatAsString","(",")","+","\"","intersects","with","a","multi-cell","array","formula",".","\"","+\n","\"You","cannot","merge","cells","of","an","array",".","\"",";","\n","throw","new","IllegalStateException","(","msg",")",";","\n","}","\n","}","\n","}","\n","}","\n"],"docstring_tokens":["Verify","that","the","candidate","region","does","not","intersect","with","an","existing","multi-cell","array","formula","in","this","sheet"]}
{"code_tokens":["\n","@Override\n","public","void","validateMergedRegions","(",")","{","\n","checkForMergedRegionsIntersectingArrayFormulas","(",")",";","\n","checkForIntersectingMergedRegions","(",")",";","\n"],"docstring_tokens":["Verify","that","merged","regions","do","not","intersect","multi-cell","array","formulas","and","no","merged","regions","intersect","another","merged","region","in","this","sheet"]}
{"code_tokens":["\n","@Override\n","public","XSSFDrawing","createDrawingPatriarch","(",")","{","\n","XSSFDrawing","existingDrawing","=","getDrawingPatriarch","(",")",";","\n","if","(","existingDrawing","!=","null",")","{","\n","return","existingDrawing",";","\n","}","\n\n","//","Default","drawingNumber","=","#drawings",".","size","(",")","+","1\n","int","drawingNumber","=","getPackagePart","(",")",".","getPackage","(",")",".","getPartsByContentType","(","XSSFRelation",".","DRAWINGS",".","getContentType","(",")",")",".","size","(",")","+","1",";","\n","drawingNumber","=","getNextPartNumber","(","XSSFRelation",".","DRAWINGS,","drawingNumber",")",";","\n","RelationPart","rp","=","createRelationship","(","XSSFRelation",".","DRAWINGS,","getWorkbook","(",")",".","getXssfFactory","(",")",",","drawingNumber,","false",")",";","\n","XSSFDrawing","drawing","=","rp",".","getDocumentPart","(",")",";","\n","String","relId","=","rp",".","getRelationship","(",")",".","getId","(",")",";","\n\n","//add","CT_Drawing","element","which","indicates","that","this","sheet","contains","drawing","components","built","on","the","drawingML","platform",".","\n","//The","relationship","Id","references","the","part","containing","the","drawingML","definitions",".","\n","CTDrawing","ctDrawing","=","worksheet",".","addNewDrawing","(",")",";","\n","ctDrawing",".","setId","(","relId",")",";","\n\n","//","Return","the","newly","created","drawing\n","return","drawing",";","\n"],"docstring_tokens":["Create","a","new","SpreadsheetML","drawing"]}
{"code_tokens":["\n","@Override\n","public","XSSFComment","getCellComment","(","CellAddress","address",")","{","\n","if","(","sheetComments","==","null",")","{","\n","return","null",";","\n","}","\n\n","return","sheetComments",".","findCellComment","(","address",")",";","\n"],"docstring_tokens":["Return","cell","comment","at","row,","column,","if","one","exists"]}
{"code_tokens":["\n","@Override\n","public","XSSFHyperlink","getHyperlink","(","CellAddress","addr",")","{","\n","for","(","XSSFHyperlink","hyperlink",":","getHyperlinkList","(",")",")","{","\n","if","(","addr",".","getRow","(",")",">=","hyperlink",".","getFirstRow","(",")","&&","addr",".","getRow","(",")","<=","hyperlink",".","getLastRow","(",")","\n","&&","addr",".","getColumn","(",")",">=","hyperlink",".","getFirstColumn","(",")","&&","addr",".","getColumn","(",")","<=","hyperlink",".","getLastColumn","(",")",")","{","\n","return","hyperlink",";","\n","}","\n","}","\n","return","null",";","\n"],"docstring_tokens":["Get","a","Hyperlink","in","this","sheet","located","in","a","cell","specified","by","{code","addr"]}
{"code_tokens":["\n","@Override\n","public","short","getTopRow","(",")","{","\n","final","CTSheetView","dsv","=","getDefaultSheetView","(","false",")",";","\n","final","String","cellRef","=","(","dsv","==","null",")","?","null",":","dsv",".","getTopLeftCell","(",")",";","\n","if","(","cellRef","==","null",")","{","\n","return","0",";","\n","}","\n","return","(","short",")","new","CellReference","(","cellRef",")",".","getRow","(",")",";","\n"],"docstring_tokens":["The","top","row","in","the","visible","view","when","the","sheet","is","first","viewed","after","opening","it","in","a","viewer"]}
{"code_tokens":["\n","@Override\n","public","boolean","isColumnBroken","(","int","column",")","{","\n","for","(","int","colBreak",":","getColumnBreaks","(",")",")","{","\n","if","(","colBreak","==","column",")","{","\n","return","true",";","\n","}","\n","}","\n","return","false",";","\n"],"docstring_tokens":["Determines","if","there","is","a","page","break","at","the","indicated","column"]}
{"code_tokens":["\n","@Override\n","public","boolean","isColumnHidden","(","int","columnIndex",")","{","\n","CTCol","col","=","columnHelper",".","getColumn","(","columnIndex,","false",")",";","\n","return","col","!=","null","&&","col",".","getHidden","(",")",";","\n"],"docstring_tokens":["Get","the","hidden","state","for","a","given","column"]}
{"code_tokens":["\n","@Override\n","public","boolean","isDisplayFormulas","(",")","{","\n","final","CTSheetView","dsv","=","getDefaultSheetView","(","false",")",";","\n","return","dsv","!=","null","&&","dsv",".","getShowFormulas","(",")",";","\n"],"docstring_tokens":["Gets","the","flag","indicating","whether","this","sheet","should","display","formulas"]}
{"code_tokens":["\n","@Override\n","public","boolean","isRowBroken","(","int","row",")","{","\n","for","(","int","rowBreak",":","getRowBreaks","(",")",")","{","\n","if","(","rowBreak","==","row",")","{","\n","return","true",";","\n","}","\n","}","\n","return","false",";","\n"],"docstring_tokens":["Tests","if","there","is","a","page","break","at","the","indicated","row"]}
{"code_tokens":["\n","@Override\n","public","boolean","getAutobreaks","(",")","{","\n","CTSheetPr","sheetPr","=","getSheetTypeSheetPr","(",")",";","\n","CTPageSetUpPr","psSetup","=","(","sheetPr","==","null","||","!sheetPr",".","isSetPageSetUpPr","(",")",")","?\n","CTPageSetUpPr",".","Factory",".","newInstance","(",")",":","sheetPr",".","getPageSetUpPr","(",")",";","\n","return","psSetup",".","getAutoPageBreaks","(",")",";","\n"],"docstring_tokens":["Flag","indicating","whether","the","sheet","displays","Automatic","Page","Breaks"]}
{"code_tokens":["\n","@Override\n","public","void","setDisplayFormulas","(","boolean","show",")","{","\n","final","CTSheetView","dsv","=","getDefaultSheetView","(","true",")",";","\n","assert","(","dsv","!=","null",")",";","\n","dsv",".","setShowFormulas","(","show",")",";","\n"],"docstring_tokens":["Sets","the","flag","indicating","whether","this","sheet","should","display","formulas"]}
{"code_tokens":["\n","public","void","removeTable","(","XSSFTable","t",")","{","\n","long","id","=","t",".","getCTTable","(",")",".","getId","(",")",";","\n","Map",".","Entry<String,","XSSFTable>","toDelete","=","null",";","\n\n","for","(","Map",".","Entry<String,","XSSFTable>","entry",":","tables",".","entrySet","(",")",")","{","\n","if","(","entry",".","getValue","(",")",".","getCTTable","(",")",".","getId","(",")","==","id",")","toDelete","=","entry",";","\n","}","\n","if","(","toDelete","!=","null",")","{","\n","removeRelation","(","getRelationById","(","toDelete",".","getKey","(",")",")",",","true",")",";","\n","tables",".","remove","(","toDelete",".","getKey","(",")",")",";","\n","toDelete",".","getValue","(",")",".","onTableDelete","(",")",";","\n","}","\n"],"docstring_tokens":["Remove","table","references","and","relations"]}
{"code_tokens":["\n","@Beta\n","public","List<XSSFPivotTable>","getPivotTables","(",")","{","\n","List<XSSFPivotTable>","tables","=","new","ArrayList<>","(",")",";","\n","for","(","XSSFPivotTable","table",":","getWorkbook","(",")",".","getPivotTables","(",")",")","{","\n","if","(","table",".","getParent","(",")","==","this",")","{","\n","tables",".","add","(","table",")",";","\n","}","\n","}","\n","return","tables",";","\n"],"docstring_tokens":["Returns","all","the","pivot","tables","for","this","Sheet"]}
{"code_tokens":["\n","public","void","removeColumnBreak","(","int","column",")","{","\n","getColumnBreaksRecord","(",")",".","removeBreak","(","column",")",";","\n"],"docstring_tokens":["Removes","a","page","break","at","the","indicated","column"]}
{"code_tokens":["\n","private","static","PrintSetupRecord","createPrintSetup","(",")","{","\n","PrintSetupRecord","retval","=","new","PrintSetupRecord","(",")",";","\n\n","retval",".","setPaperSize","(","(","short",")","1",")",";","\n","retval",".","setScale","(","(","short",")","100",")",";","\n","retval",".","setPageStart","(","(","short",")","1",")",";","\n","retval",".","setFitWidth","(","(","short",")","1",")",";","\n","retval",".","setFitHeight","(","(","short",")","1",")",";","\n","retval",".","setOptions","(","(","short",")","2",")",";","\n","retval",".","setHResolution","(","(","short",")","300",")",";","\n","retval",".","setVResolution","(","(","short",")","300",")",";","\n","retval",".","setHeaderMargin","(","0",".","5",")",";","\n","retval",".","setFooterMargin","(","0",".","5",")",";","\n","retval",".","setCopies","(","(","short",")","1",")",";","\n","return","retval",";","\n"],"docstring_tokens":["creates","the","PrintSetup","Record","and","sets","it","to","defaults","and","marks","it","invalid"]}
{"code_tokens":["\n","public","void","removeRowBreak","(","int","row",")","{","\n","if","(","getRowBreaksRecord","(",")",".","getBreaks","(",")",".","length","<","1",")","{","\n","throw","new","IllegalArgumentException","(","\"Sheet","does","not","define","any","row","breaks\"",")",";","\n","}","\n","getRowBreaksRecord","(",")",".","removeBreak","(","(","short",")","row",")",";","\n"],"docstring_tokens":["Removes","a","page","break","at","the","indicated","row"]}
{"code_tokens":["\n","public","boolean","isRowBroken","(","int","row",")","{","\n","return","getRowBreaksRecord","(",")",".","getBreak","(","row",")","!=","null",";","\n"],"docstring_tokens":["Queries","if","the","specified","row","has","a","page","break"]}
{"code_tokens":["\n","public","boolean","isColumnBroken","(","int","column",")","{","\n","return","getColumnBreaksRecord","(",")",".","getBreak","(","column",")","!=","null",";","\n"],"docstring_tokens":["Queries","if","the","specified","column","has","a","page","break"]}
{"code_tokens":["\n","public","void","shiftRowBreaks","(","int","startingRow,","int","endingRow,","int","count",")","{","\n","shiftBreaks","(","getRowBreaksRecord","(",")",",","startingRow,","endingRow,","count",")",";","\n"],"docstring_tokens":["Shifts","the","horizontal","page","breaks","for","the","indicated","count"]}
{"code_tokens":["\n","public","void","shiftColumnBreaks","(","short","startingCol,","short","endingCol,","short","count",")","{","\n","shiftBreaks","(","getColumnBreaksRecord","(",")",",","startingCol,","endingCol,","count",")",";","\n"],"docstring_tokens":["Shifts","the","vertical","page","breaks","for","the","indicated","count"]}
{"code_tokens":["\n","public","void","setSBATBlockCount","(","final","int","count",")","\n","{","\n","_sbat_count","=","count",";","\n"],"docstring_tokens":["Set","count","of","SBAT","blocks"]}
{"code_tokens":["\n","public","boolean","isTrue","(",")","\n","{","\n","return","getPropertyValue","(",")","!=","0",";","\n"],"docstring_tokens":["Whether","this","boolean","property","is","true"]}
{"code_tokens":["\n","public","static","int","intersect","(","CellRangeAddress","crA,","CellRangeAddress","crB",")","\n","{","\n\n","int","firstRow","=","crB",".","getFirstRow","(",")",";","\n","int","lastRow","=","crB",".","getLastRow","(",")",";","\n","int","firstCol","=","crB",".","getFirstColumn","(",")",";","\n","int","lastCol","=","crB",".","getLastColumn","(",")",";","\n\n","if","(","\n","gt","(","crA",".","getFirstRow","(",")",",","lastRow",")","||","lt","(","crA",".","getLastRow","(",")",",","firstRow",")","||\n","gt","(","crA",".","getFirstColumn","(",")",",","lastCol",")","||","lt","(","crA",".","getLastColumn","(",")",",","firstCol",")","\n",")","\n","{","\n","return","NO_INTERSECTION",";","\n","}","\n","else","if","(","contains","(","crA,","crB",")",")","\n","{","\n","return","INSIDE",";","\n","}","\n","else","if","(","contains","(","crB,","crA",")",")","\n","{","\n","return","ENCLOSES",";","\n","}","\n","else\n","{","\n","return","OVERLAP",";","\n","}","\n"],"docstring_tokens":["Get","the","type","of","intersection","between","two","cell","ranges"]}
{"code_tokens":["\n","public","static","boolean","hasExactSharedBorder","(","CellRangeAddress","crA,","CellRangeAddress","crB",")","{","\n","int","oFirstRow","=","crB",".","getFirstRow","(",")",";","\n","int","oLastRow","=","crB",".","getLastRow","(",")",";","\n","int","oFirstCol","=","crB",".","getFirstColumn","(",")",";","\n","int","oLastCol","=","crB",".","getLastColumn","(",")",";","\n\n","if","(","crA",".","getFirstRow","(",")",">","0","&&","crA",".","getFirstRow","(",")","-1","==","oLastRow","||\n","oFirstRow",">","0","&&","oFirstRow-1","==","crA",".","getLastRow","(",")",")","{","\n","//","ranges","have","a","horizontal","border","in","common\n","//","make","sure","columns","are","identical:\n","return","crA",".","getFirstColumn","(",")","==","oFirstCol","&&","crA",".","getLastColumn","(",")","==","oLastCol",";","\n","}","\n\n","if","(","crA",".","getFirstColumn","(",")",">0","&&","crA",".","getFirstColumn","(",")","-","1","==","oLastCol","||\n","oFirstCol>0","&&","crA",".","getLastColumn","(",")","==","oFirstCol","-1",")","{","\n","//","ranges","have","a","vertical","border","in","common\n","//","make","sure","rows","are","identical:\n","return","crA",".","getFirstRow","(",")","==","oFirstRow","&&","crA",".","getLastRow","(",")","==","oLastRow",";","\n","}","\n","return","false",";","\n"],"docstring_tokens":["Check","if","the","two","cell","ranges","have","a","shared","border"]}
{"code_tokens":["\n","private","static","double","getProductTerm","(","ValueEval","ve,","boolean","isScalarProduct",")","throws","EvaluationException","{","\n\n","if","(","ve","instanceof","BlankEval","||","ve","==","null",")","{","\n","//","TODO","-","shouldn't","BlankEval",".","INSTANCE","be","used","always","instead","of","null?\n","//","null","seems","to","occur","when","the","blank","cell","is","part","of","an","area","ref","(","but","not","reliably",")","\n","if","(","isScalarProduct",")","{","\n","throw","new","EvaluationException","(","ErrorEval",".","VALUE_INVALID",")",";","\n","}","\n","return","0",";","\n","}","\n\n","if","(","ve","instanceof","ErrorEval",")","{","\n","throw","new","EvaluationException","(","(","ErrorEval",")","ve",")",";","\n","}","\n","if","(","ve","instanceof","StringEval",")","{","\n","if","(","isScalarProduct",")","{","\n","throw","new","EvaluationException","(","ErrorEval",".","VALUE_INVALID",")",";","\n","}","\n","//","Note","for","area","SUMPRODUCTs,","string","values","are","interpreted","as","zero\n","//","even","if","they","would","parse","as","valid","numeric","values\n","return","0",";","\n","}","\n","if","(","ve","instanceof","NumericValueEval",")","{","\n","NumericValueEval","nve","=","(","NumericValueEval",")","ve",";","\n","return","nve",".","getNumberValue","(",")",";","\n","}","\n","throw","new","RuntimeException","(","\"Unexpected","value","eval","class","(","\"\n","+","ve",".","getClass","(",")",".","getName","(",")","+","\"",")","\"",")",";","\n"],"docstring_tokens":["Determines","a","double","value","for","the","specified","ValueEval"]}
{"code_tokens":["\n","public","static","SlideShow<?,?>","create","(","boolean","XSLF",")","throws","IOException","{","\n","return","wp","(","XSLF","?","FileMagic",".","OOXML",":","FileMagic",".","OLE2,","SlideShowProvider::create",")",";","\n"],"docstring_tokens":["Create","a","new","empty","SlideShow,","either","XSLF","or","HSLF","depending","on","the","parameter"]}
{"code_tokens":["\n","public","void","writeOut","(","OutputStream","out",")","throws","IOException","{","\n","//","Ensure","the","escher","layer","reflects","the","text","changes\n","for","(","EscherTextboxWrapper","w",":","textboxWrappers",")","{","\n","w",".","writeOut","(","null",")",";","\n","}","\n\n","//","Find","the","new","size","of","the","escher","children",";","\n","int","newSize","=","0",";","\n","newSize","+=","dgContainer",".","getRecordSize","(",")",";","\n\n","//","Update","the","size","(","header","bytes","5-8",")","\n","LittleEndian",".","putInt","(","_header,4,newSize",")",";","\n\n","//","Write","out","our","header\n","out",".","write","(","_header",")",";","\n\n","//","Now","grab","the","children's","data\n","byte[]","b","=","new","byte[newSize]",";","\n","int","done","=","0",";","\n","dgContainer",".","serialize","(","done,","b",")",";","\n\n","//","Finally,","write","out","the","children\n","out",".","write","(","b",")",";","\n"],"docstring_tokens":["Write","the","contents","of","the","record","back,","so","it","can","be","written","to","disk","Walks","the","escher","layer","to","get","the","contents"]}
{"code_tokens":["\n","private","void","create","(",")","{","\n","dgContainer",".","setRecordId","(","EscherContainerRecord",".","DG_CONTAINER",")",";","\n","dgContainer",".","setOptions","(","(","short",")","15",")",";","\n\n","dg","=","new","EscherDgRecord","(",")",";","\n","dg",".","setOptions","(","(","short",")","16",")",";","\n","dg",".","setNumShapes","(","1",")",";","\n","dgContainer",".","addChildRecord","(","dg",")",";","\n\n","EscherContainerRecord","spgrContainer","=","new","EscherContainerRecord","(",")",";","\n","spgrContainer",".","setOptions","(","(","short",")","15",")",";","\n","spgrContainer",".","setRecordId","(","EscherContainerRecord",".","SPGR_CONTAINER",")",";","\n\n","EscherContainerRecord","spContainer","=","new","EscherContainerRecord","(",")",";","\n","spContainer",".","setOptions","(","(","short",")","15",")",";","\n","spContainer",".","setRecordId","(","EscherContainerRecord",".","SP_CONTAINER",")",";","\n\n","EscherSpgrRecord","spgr","=","new","EscherSpgrRecord","(",")",";","\n","spgr",".","setOptions","(","(","short",")","1",")",";","\n","spContainer",".","addChildRecord","(","spgr",")",";","\n\n","EscherSpRecord","sp","=","new","EscherSpRecord","(",")",";","\n","sp",".","setOptions","(","(","short",")","(","(","ShapeType",".","NOT_PRIMITIVE",".","nativeId","<<","4",")","+","2",")",")",";","\n","sp",".","setFlags","(","EscherSpRecord",".","FLAG_PATRIARCH","|","EscherSpRecord",".","FLAG_GROUP",")",";","\n","spContainer",".","addChildRecord","(","sp",")",";","\n","spgrContainer",".","addChildRecord","(","spContainer",")",";","\n","dgContainer",".","addChildRecord","(","spgrContainer",")",";","\n\n","spContainer","=","new","EscherContainerRecord","(",")",";","\n","spContainer",".","setOptions","(","(","short",")","15",")",";","\n","spContainer",".","setRecordId","(","EscherContainerRecord",".","SP_CONTAINER",")",";","\n","sp","=","new","EscherSpRecord","(",")",";","\n","sp",".","setOptions","(","(","short",")","(","(","ShapeType",".","RECT",".","nativeId","<<","4",")","+","2",")",")",";","\n","sp",".","setFlags","(","EscherSpRecord",".","FLAG_BACKGROUND","|","EscherSpRecord",".","FLAG_HASSHAPETYPE",")",";","\n","spContainer",".","addChildRecord","(","sp",")",";","\n\n","EscherOptRecord","opt","=","new","EscherOptRecord","(",")",";","\n","opt",".","setRecordId","(","EscherOptRecord",".","RECORD_ID",")",";","\n","opt",".","addEscherProperty","(","new","EscherRGBProperty","(","EscherPropertyTypes",".","FILL__FILLCOLOR,","134217728",")",")",";","\n","opt",".","addEscherProperty","(","new","EscherRGBProperty","(","EscherPropertyTypes",".","FILL__FILLBACKCOLOR,","134217733",")",")",";","\n","opt",".","addEscherProperty","(","new","EscherSimpleProperty","(","EscherPropertyTypes",".","FILL__RECTRIGHT,","10064750",")",")",";","\n","opt",".","addEscherProperty","(","new","EscherSimpleProperty","(","EscherPropertyTypes",".","FILL__RECTBOTTOM,","7778750",")",")",";","\n","opt",".","addEscherProperty","(","new","EscherBoolProperty","(","EscherPropertyTypes",".","FILL__NOFILLHITTEST,","1179666",")",")",";","\n","opt",".","addEscherProperty","(","new","EscherBoolProperty","(","EscherPropertyTypes",".","LINESTYLE__NOLINEDRAWDASH,","524288",")",")",";","\n","opt",".","addEscherProperty","(","new","EscherSimpleProperty","(","EscherPropertyTypes",".","SHAPE__BLACKANDWHITESETTINGS,","9",")",")",";","\n","opt",".","addEscherProperty","(","new","EscherSimpleProperty","(","EscherPropertyTypes",".","SHAPE__BACKGROUNDSHAPE,","65537",")",")",";","\n","spContainer",".","addChildRecord","(","opt",")",";","\n\n","dgContainer",".","addChildRecord","(","spContainer",")",";","\n"],"docstring_tokens":["Create","the","Escher","records","associated","with","a","new","PPDrawing"]}
{"code_tokens":["\n","@Internal\n","public","boolean","isFComplex","(",")","\n","{","\n","return","fComplex",".","isSet","(","field_6_flags1",")",";","\n"],"docstring_tokens":["Specifies","that","the","last","save","operation","that","was","performed","on","this","document","was","an","incremental","save","operation"]}
{"code_tokens":["\n","@Internal\n","public","boolean","isFHasPic","(",")","\n","{","\n","return","fHasPic",".","isSet","(","field_6_flags1",")",";","\n"],"docstring_tokens":["When","set","to","0,","there","SHOULD","be","no","pictures","in","the","document"]}
{"code_tokens":["\n","@Internal\n","public","boolean","isFEncrypted","(",")","\n","{","\n","return","fEncrypted",".","isSet","(","field_6_flags1",")",";","\n"],"docstring_tokens":["Specifies","whether","the","document","is","encrypted","or","obfuscated","as","specified","in","Encryption","and","Obfuscation"]}
{"code_tokens":["\n","@Internal\n","public","void","setFSpare0","(","byte","value",")","\n","{","\n","field_10_flags2","=","(","byte",")","fSpare0",".","setValue","(","field_10_flags2,","value",")",";","\n"],"docstring_tokens":["Sets","the","fSpare0","field","value"]}
{"code_tokens":["\n","@Internal\n","@Deprecated\n","public","byte","getFSpare0","(",")","\n","{","\n","return","(","byte",")","fSpare0",".","getValue","(","field_10_flags2",")",";","\n"],"docstring_tokens":["This","value","is","undefined","and","MUST","be","ignored"]}
{"code_tokens":["\n","public","void","writeUInt","(","long","value",")","{","\n","try","{","\n","out",".","write","(","(","byte",")","(","(","value",")","&","0xFF",")",")",";","\n","out",".","write","(","(","byte",")","(","(","value",">>>","8",")","&","0xFF",")",")",";","\n","out",".","write","(","(","byte",")","(","(","value",">>>","16",")","&","0xFF",")",")",";","\n","out",".","write","(","(","byte",")","(","(","value",">>>","24",")","&","0xFF",")",")",";","\n","}","catch","(","IOException","e",")","{","\n","throw","new","RuntimeException","(","e",")",";","\n","}","\n"],"docstring_tokens":["Put","unsigned","int","into","output","stream"]}
{"code_tokens":["\n","public","void","putUShort","(","int","value",")","{","\n","try","{","\n","out",".","write","(","(","byte",")","(","(","value",")","&","0xFF",")",")",";","\n","out",".","write","(","(","byte",")","(","(","value",">>>","8",")","&","0xFF",")",")",";","\n","}","catch","(","IOException","e",")","{","\n","throw","new","RuntimeException","(","e",")",";","\n","}","\n"],"docstring_tokens":["Put","unsigned","short","into","output","stream"]}
{"code_tokens":["\n","@Internal\n","public","boolean","getFCantSplit","(",")","\n","{","\n","return","field_5_fCantSplit",";","\n"],"docstring_tokens":["When","1,","table","row","may","not","be","split","across","page","bounds"]}
{"code_tokens":["\n","@Internal\n","public","boolean","getFTableHeader","(",")","\n","{","\n","return","field_7_fTableHeader",";","\n"],"docstring_tokens":["When","1,","table","row","is","to","be","used","as","the","header","of","the","table"]}
{"code_tokens":["\n","@Internal\n","public","boolean","isFAutofit","(",")","\n","{","\n","return","fAutofit",".","isSet","(","field_13_widthAndFitsFlags",")",";","\n"],"docstring_tokens":["When","set","to","1,","AutoFit","this","table"]}
{"code_tokens":["\n","@Internal\n","public","boolean","isFKeepFollow","(",")","\n","{","\n","return","fKeepFollow",".","isSet","(","field_13_widthAndFitsFlags",")",";","\n"],"docstring_tokens":["When","set","to","1,","keep","this","row","with","the","following","row"]}
{"code_tokens":["\n","@Internal\n","public","void","setWidthAndFitsFlags_empty1","(","byte","value",")","\n","{","\n","field_13_widthAndFitsFlags","=","widthAndFitsFlags_empty1",".","setValue","(","field_13_widthAndFitsFlags,","value",")",";","\n"],"docstring_tokens":["Sets","the","widthAndFitsFlags_empty1","field","value"]}
{"code_tokens":["\n","@Internal\n","public","void","setWidthAndFitsFlags_empty2","(","short","value",")","\n","{","\n","field_13_widthAndFitsFlags","=","widthAndFitsFlags_empty2",".","setValue","(","field_13_widthAndFitsFlags,","value",")",";","\n"],"docstring_tokens":["Sets","the","widthAndFitsFlags_empty2","field","value"]}
{"code_tokens":["\n","@Internal\n","public","void","setGrpfTap_unused","(","short","value",")","\n","{","\n","field_25_internalFlags","=","grpfTap_unused",".","setValue","(","field_25_internalFlags,","value",")",";","\n"],"docstring_tokens":["Sets","the","grpfTap_unused","field","value"]}
{"code_tokens":["\n","@Internal\n","public","void","setViewFlags_unused2","(","short","value",")","\n","{","\n","field_32_viewFlags","=","viewFlags_unused2",".","setValue","(","field_32_viewFlags,","value",")",";","\n"],"docstring_tokens":["Sets","the","viewFlags_unused2","field","value"]}
{"code_tokens":["\n","@Override\n","@Deprecated\n","@NotImplemented\n","public","void","adjustForDelete","(","int","start,","int","length",")","{","\n","throw","new","UnsupportedOperationException","(",")",";","\n"],"docstring_tokens":["Not","implemented","for","OldTextPiece"]}
{"code_tokens":["\n\n","public","void","setVCenter","(","boolean","hc",")","\n","{","\n","field_1_vcenter","=","hc","?","1",":","0",";","\n"],"docstring_tokens":["set","whether","to","center","vertically","or","not"]}
{"code_tokens":["\n\n","public","boolean","getVCenter","(",")","\n","{","\n","return","(","field_1_vcenter","==","1",")",";","\n"],"docstring_tokens":["get","whether","to","center","vertically","or","not"]}
{"code_tokens":["\n","@Override\n","protected","InputStream","getInputStreamImpl","(",")","throws","IOException","{","\n","//","We","use","the","getInputStream","(",")","method","from","java",".","util",".","zip",".","ZipFile\n","//","class","which","return","an","InputStream","to","this","part","zip","entry",".","\n","return","(","(","ZipPackage",")","_container",")",".","getZipArchive","(",")","\n",".","getInputStream","(","zipEntry",")",";","\n"],"docstring_tokens":["Implementation","of","the","getInputStream","which","return","the","inputStream","of","this","part","zip","entry"]}
{"code_tokens":["\n","@Override\n","public","boolean","marshall","(","PackagePart","part,","OutputStream","os",")","\n","throws","OpenXML4JException","{","\n","if","(","!","(","os","instanceof","ZipArchiveOutputStream",")",")","{","\n","LOG",".","atError","(",")",".","log","(","\"Unexpected","class","{","}","\",","os",".","getClass","(",")",".","getName","(",")",")",";","\n","throw","new","OpenXML4JException","(","\"ZipOutputStream","expected","!\"",")",";","\n","//","Normally","should","happen","only","in","development","phase,","so","just","throw\n","//","exception\n","}","\n\n","//","check","if","there","is","anything","to","save","for","some","parts",".","We","don't","do","this","for","all","parts","as","some","code\n","//","might","depend","on","empty","parts","being","saved,","e",".","g",".","some","unit","tests","verify","this","currently",".","\n","if","(","part",".","getSize","(",")","==","0","&&","part",".","getPartName","(",")",".","getName","(",")",".","equals","(","XSSFRelation",".","SHARED_STRINGS",".","getDefaultFileName","(",")",")",")","{","\n","return","true",";","\n","}","\n\n","ZipArchiveOutputStream","zos","=","(","ZipArchiveOutputStream",")","os",";","\n","ZipArchiveEntry","partEntry","=","new","ZipArchiveEntry","(","ZipHelper\n",".","getZipItemNameFromOPCName","(","part",".","getPartName","(",")",".","getURI","(",")","\n",".","getPath","(",")",")",")",";","\n","try","{","\n","//","Create","next","zip","entry\n","zos",".","putArchiveEntry","(","partEntry",")",";","\n\n","//","Saving","data","in","the","ZIP","file\n","try","(","final","InputStream","ins","=","part",".","getInputStream","(",")",")","{","\n","IOUtils",".","copy","(","ins,","zos",")",";","\n","}","finally","{","\n","zos",".","closeArchiveEntry","(",")",";","\n","}","\n","}","catch","(","IOException","ioe",")","{","\n","LOG",".","atError","(",")",".","withThrowable","(","ioe",")",".","log","(","\"Cannot","write:","{","}",":","in","ZIP\",","part",".","getPartName","(",")",")",";","\n","return","false",";","\n","}","\n\n","//","Saving","relationship","part\n","if","(","part",".","hasRelationships","(",")",")","{","\n","PackagePartName","relationshipPartName","=","PackagingURIHelper\n",".","getRelationshipPartName","(","part",".","getPartName","(",")",")",";","\n\n","marshallRelationshipPart","(","part",".","getRelationships","(",")",",\n","relationshipPartName,","zos",")",";","\n","}","\n\n","return","true",";","\n"],"docstring_tokens":["Save","the","specified","part","to","the","given","stream"]}
{"code_tokens":["\n","public","static","boolean","marshallRelationshipPart","(","\n","PackageRelationshipCollection","rels,","PackagePartName","relPartName,\n","ZipArchiveOutputStream","zos",")","{","\n","//","Building","xml\n","Document","xmlOutDoc","=","DocumentHelper",".","createDocument","(",")",";","\n","//","make","something","like","<Relationships\n","//","xmlns=\"http://schemas",".","openxmlformats",".","org/package/2006/relationships\">\n","Element","root","=","xmlOutDoc",".","createElementNS","(","PackageNamespaces",".","RELATIONSHIPS,","PackageRelationship",".","RELATIONSHIPS_TAG_NAME",")",";","\n","xmlOutDoc",".","appendChild","(","root",")",";","\n\n","//","<Relationship\n","//","TargetMode=\"External\"\n","//","Id=\"rIdx\"\n","//","Target=\"http://www",".","custom",".","com/images/pic1",".","jpg\"\n","//","Type=\"http://www",".","custom",".","com/external-resource\"/>\n\n","URI","sourcePartURI","=","PackagingURIHelper\n",".","getSourcePartUriFromRelationshipPartUri","(","relPartName",".","getURI","(",")",")",";","\n\n","for","(","PackageRelationship","rel",":","rels",")","{","\n","//","the","relationship","element\n","Element","relElem","=","xmlOutDoc",".","createElementNS","(","PackageNamespaces",".","RELATIONSHIPS,","PackageRelationship",".","RELATIONSHIP_TAG_NAME",")",";","\n","root",".","appendChild","(","relElem",")",";","\n\n","//","the","relationship","ID\n","relElem",".","setAttribute","(","PackageRelationship",".","ID_ATTRIBUTE_NAME,","rel",".","getId","(",")",")",";","\n\n","//","the","relationship","Type\n","relElem",".","setAttribute","(","PackageRelationship",".","TYPE_ATTRIBUTE_NAME,","rel",".","getRelationshipType","(",")",")",";","\n\n","//","the","relationship","Target\n","String","targetValue",";","\n","URI","uri","=","rel",".","getTargetURI","(",")",";","\n","if","(","rel",".","getTargetMode","(",")","==","TargetMode",".","EXTERNAL",")","{","\n","//","Save","the","target","as-is","-","we","don't","need","to","validate","it,\n","//","alter","it","etc\n","targetValue","=","uri",".","toString","(",")",";","\n\n","//","add","TargetMode","attribute","(","as","it","is","external","link","external",")","\n","relElem",".","setAttribute","(","PackageRelationship",".","TARGET_MODE_ATTRIBUTE_NAME,","\"External\"",")",";","\n","}","else","{","\n","URI","targetURI","=","rel",".","getTargetURI","(",")",";","\n","targetValue","=","PackagingURIHelper",".","relativizeURI","(","\n","sourcePartURI,","targetURI,","true",")",".","toString","(",")",";","\n","}","\n","relElem",".","setAttribute","(","PackageRelationship",".","TARGET_ATTRIBUTE_NAME,","targetValue",")",";","\n","}","\n\n","xmlOutDoc",".","normalize","(",")",";","\n\n","//","String","schemaFilename","=","Configuration",".","getPathForXmlSchema","(",")","+\n","//","File",".","separator","+","\"opc-relationships",".","xsd\"",";","\n\n","//","Save","part","in","zip\n","ZipArchiveEntry","ctEntry","=","new","ZipArchiveEntry","(","ZipHelper",".","getZipURIFromOPCName","(","\n","relPartName",".","getURI","(",")",".","toASCIIString","(",")",")",".","getPath","(",")",")",";","\n","try","{","\n","zos",".","putArchiveEntry","(","ctEntry",")",";","\n","try","{","\n","return","StreamHelper",".","saveXmlInStream","(","xmlOutDoc,","zos",")",";","\n","}","finally","{","\n","zos",".","closeArchiveEntry","(",")",";","\n","}","\n","}","catch","(","IOException","e",")","{","\n","LOG",".","atError","(",")",".","withThrowable","(","e",")",".","log","(","\"Cannot","create","zip","entry","{","}","\",","relPartName",")",";","\n","return","false",";","\n","}","\n"],"docstring_tokens":["Save","relationships","into","the","part"]}
{"code_tokens":["\n","@Internal\n","public","int","getHps","(",")","\n","{","\n","return","field_2_hps",";","\n"],"docstring_tokens":["Font","size","in","half","points"]}
{"code_tokens":["\n","@Internal\n","public","int","getFtcAscii","(",")","\n","{","\n","return","field_3_ftcAscii",";","\n"],"docstring_tokens":["Font","for","ASCII","text"]}
{"code_tokens":["\n","@Internal\n","public","int","getDxaSpace","(",")","\n","{","\n","return","field_7_dxaSpace",";","\n"],"docstring_tokens":["Space","following","each","character","in","the","run","expressed","in","twip","units"]}
{"code_tokens":["\n","@Internal\n","public","byte","getIco","(",")","\n","{","\n","return","field_9_ico",";","\n"],"docstring_tokens":["Color","of","text","for","Word","97"]}
{"code_tokens":["\n","@Internal\n","public","byte","getIdctHint","(",")","\n","{","\n","return","field_18_idctHint",";","\n"],"docstring_tokens":["Identifier","of","Character","type"]}
{"code_tokens":["\n","@Internal\n","public","int","getHpsKern","(",")","\n","{","\n","return","field_21_hpsKern",";","\n"],"docstring_tokens":["Kerning","distance","for","characters","in","run","recorded","in","half","points"]}
{"code_tokens":["\n","@Internal\n","public","byte[]","getXstDispFldRMark","(",")","\n","{","\n","return","field_62_xstDispFldRMark",";","\n"],"docstring_tokens":["The","string","value","of","the","ListNum","field","when","revision","mark","tracking","began"]}
{"code_tokens":["\n","@Internal\n","public","boolean","isFRMarkDel","(",")","\n","{","\n","return","fRMarkDel",".","isSet","(","field_1_grpfChp",")",";","\n"],"docstring_tokens":["has","been","deleted","and","will","be","displayed","with","strikethrough","when","revision","marked","text","is","to","be","displayed"]}
{"code_tokens":["\n","@Internal\n","public","boolean","isFSmallCaps","(",")","\n","{","\n","return","fSmallCaps",".","isSet","(","field_1_grpfChp",")",";","\n"],"docstring_tokens":["Displayed","with","small","caps"]}
{"code_tokens":["\n","@Internal\n","public","boolean","isFVanish","(",")","\n","{","\n","return","fVanish",".","isSet","(","field_1_grpfChp",")",";","\n"],"docstring_tokens":["text","has","hidden","format,","and","is","not","displayed","unless","fPagHidden","is","set","in","the","DOP"]}
{"code_tokens":["\n","@Internal\n","public","boolean","isFSpec","(",")","\n","{","\n","return","fSpec",".","isSet","(","field_1_grpfChp",")",";","\n"],"docstring_tokens":["Character","is","a","Word","special","character"]}
{"code_tokens":["\n","@Internal\n","public","boolean","isFShadow","(",")","\n","{","\n","return","fShadow",".","isSet","(","field_1_grpfChp",")",";","\n"],"docstring_tokens":["Character","is","drawn","with","a","shadow"]}
{"code_tokens":["\n","@Internal\n","public","boolean","isFDStrike","(",")","\n","{","\n","return","fDStrike",".","isSet","(","field_1_grpfChp",")",";","\n"],"docstring_tokens":["Displayed","with","double","strikethrough"]}
{"code_tokens":["\n","@Internal\n","public","boolean","isFNoProof","(",")","\n","{","\n","return","fNoProof",".","isSet","(","field_1_grpfChp",")",";","\n"],"docstring_tokens":["When","set","to","1,","do","not","check","spelling","or","grammar"]}
{"code_tokens":["\n","@Internal\n","public","boolean","isFWebHidden","(",")","\n","{","\n","return","fWebHidden",".","isSet","(","field_1_grpfChp",")",";","\n"],"docstring_tokens":["Text","should","be","hidden","in","Web","View","when","set","to","1"]}
{"code_tokens":["\n","@Internal\n","public","boolean","isFFitText","(",")","\n","{","\n","return","fFitText",".","isSet","(","field_1_grpfChp",")",";","\n"],"docstring_tokens":["Fit","text","when","set","to","1"]}
{"code_tokens":["\n","@Internal\n","public","void","setItypFELayout","(","short","value",")","\n","{","\n","field_29_ufel","=","(","short",")","itypFELayout",".","setValue","(","field_29_ufel,","value",")",";","\n"],"docstring_tokens":["Sets","the","itypFELayout","field","value"]}
{"code_tokens":["\n","@Internal\n","public","void","setSpare","(","byte","value",")","\n","{","\n","field_29_ufel","=","(","short",")","spare",".","setValue","(","field_29_ufel,","value",")",";","\n"],"docstring_tokens":["Sets","the","spare","field","value"]}
{"code_tokens":["\n","@Internal\n","public","void","setIWarichuBracket","(","byte","value",")","\n","{","\n","field_30_copt","=","(","byte",")","iWarichuBracket",".","setValue","(","field_30_copt,","value",")",";","\n"],"docstring_tokens":["Sets","the","iWarichuBracket","field","value"]}
{"code_tokens":["\n","@Internal\n","public","void","setIcoHighlight","(","byte","value",")","\n","{","\n","field_48_Highlight","=","(","short",")","icoHighlight",".","setValue","(","field_48_Highlight,","value",")",";","\n"],"docstring_tokens":["Sets","the","icoHighlight","field","value"]}
{"code_tokens":["\n","public","void","remove","(","Object","record",")","{","\n","//","can't","use","List",".","indexOf","here","because","it","checks","the","records","for","equality","and","not","identity\n","int","i","=","0",";","\n","for","(","org",".","apache",".","poi",".","hssf",".","record",".","Record","r",":","records",")","{","\n","if","(","r","==","record",")","{","\n","remove","(","i",")",";","\n","break",";","\n","}","\n","i++",";","\n","}","\n"],"docstring_tokens":["Find","the","given","record","in","the","record","list","by","identity","and","removes","it"]}
{"code_tokens":["\n","@Override\n","public","String","toString","(",")","{","\n","return","toDebugFriendlyString","(","value",")",";","\n"],"docstring_tokens":["Returns","the","data","in","a","debug-friendly","string","format"]}
{"code_tokens":["\n","private","void","onWorkbookCreate","(",")","{","\n","workbook","=","CTWorkbook",".","Factory",".","newInstance","(",")",";","\n\n","//","don't","EVER","use","the","1904","date","system\n","CTWorkbookPr","workbookPr","=","workbook",".","addNewWorkbookPr","(",")",";","\n","workbookPr",".","setDate1904","(","false",")",";","\n\n","setBookViewsIfMissing","(",")",";","\n","workbook",".","addNewSheets","(",")",";","\n\n","POIXMLProperties",".","ExtendedProperties","expProps","=","getProperties","(",")",".","getExtendedProperties","(",")",";","\n","expProps",".","getUnderlyingProperties","(",")",".","setApplication","(","DOCUMENT_CREATOR",")",";","\n\n","sharedStringSource","=","(","SharedStringsTable",")","createRelationship","(","XSSFRelation",".","SHARED_STRINGS,","this",".","xssfFactory",")",";","\n","stylesSource","=","(","StylesTable",")","createRelationship","(","XSSFRelation",".","STYLES,","this",".","xssfFactory",")",";","\n","stylesSource",".","setWorkbook","(","this",")",";","\n\n","namedRanges","=","new","ArrayList<>","(",")",";","\n","namedRangesByName","=","new","ArrayListValuedHashMap<>","(",")",";","\n","sheets","=","new","ArrayList<>","(",")",";","\n","pivotTables","=","new","ArrayList<>","(",")",";","\n\n","externalLinks","=","new","ArrayList<>","(",")",";","\n"],"docstring_tokens":["Create","a","new","CTWorkbook","with","all","values","set","to","default"]}
{"code_tokens":["\n","protected","static","OPCPackage","newPackage","(","XSSFWorkbookType","workbookType",")","{","\n","OPCPackage","pkg","=","null",";","\n","try","{","\n","pkg","=","OPCPackage",".","create","(","new","UnsynchronizedByteArrayOutputStream","(",")",")",";","//","NOSONAR","-","we","do","not","want","to","close","this","here\n","//","Main","part\n","PackagePartName","corePartName","=","PackagingURIHelper",".","createPartName","(","XSSFRelation",".","WORKBOOK",".","getDefaultFileName","(",")",")",";","\n","//","Create","main","part","relationship\n","pkg",".","addRelationship","(","corePartName,","TargetMode",".","INTERNAL,","PackageRelationshipTypes",".","CORE_DOCUMENT",")",";","\n","//","Create","main","document","part\n","pkg",".","createPart","(","corePartName,","workbookType",".","getContentType","(",")",")",";","\n\n","pkg",".","getPackageProperties","(",")",".","setCreatorProperty","(","DOCUMENT_CREATOR",")",";","\n","}","catch","(","Exception","e",")","{","\n","IOUtils",".","closeQuietly","(","pkg",")",";","\n","throw","new","POIXMLException","(","e",")",";","\n","}","\n","return","pkg",";","\n"],"docstring_tokens":["Create","a","new","SpreadsheetML","package","and","setup","the","default","minimal","content"]}
{"code_tokens":["\n","@Override\n","public","XSSFSheet","cloneSheet","(","int","sheetNum",")","{","\n","return","cloneSheet","(","sheetNum,","null",")",";","\n"],"docstring_tokens":["Create","an","XSSFSheet","from","an","existing","sheet","in","the","XSSFWorkbook"]}
{"code_tokens":["\n","@Override\n","public","XSSFSheet","createSheet","(",")","{","\n","String","sheetname","=","\"Sheet\"","+","(","sheets",".","size","(",")",")",";","\n","int","idx","=","0",";","\n","while","(","getSheet","(","sheetname",")","!=","null",")","{","\n","sheetname","=","\"Sheet\"","+","idx",";","\n","idx++",";","\n","}","\n","return","createSheet","(","sheetname",")",";","\n"],"docstring_tokens":["Create","an","XSSFSheet","for","this","workbook,","adds","it","to","the","sheets","and","returns","the","high","level","representation"]}
{"code_tokens":["\n","@Override\n","public","int","getNumCellStyles","(",")","{","\n","return","stylesSource",".","getNumCellStyles","(",")",";","\n"],"docstring_tokens":["Get","the","number","of","styles","the","workbook","contains"]}
{"code_tokens":["\n","@Override\n","public","int","getNumberOfSheets","(",")","{","\n","return","sheets",".","size","(",")",";","\n"],"docstring_tokens":["Get","the","number","of","worksheets","in","the","this","workbook"]}
{"code_tokens":["\n","@Override\n","public","XSSFSheet","getSheetAt","(","int","index",")","{","\n","validateSheetIndex","(","index",")",";","\n","return","sheets",".","get","(","index",")",";","\n"],"docstring_tokens":["Get","the","XSSFSheet","object","at","the","given","index"]}
{"code_tokens":["\n","private","void","onSheetDelete","(","int","index",")","{","\n","//","remove","all","sheet","relations\n","final","XSSFSheet","sheet","=","getSheetAt","(","index",")",";","\n\n","sheet",".","onSheetDelete","(",")",";","\n\n","//delete","the","CTSheet","reference","from","workbook",".","xml\n","workbook",".","getSheets","(",")",".","removeSheet","(","index",")",";","\n\n","//calculation","chain","is","auxiliary,","remove","it","as","it","may","contain","orphan","references","to","deleted","cells\n","if","(","calcChain","!=","null",")","{","\n","removeRelation","(","calcChain",")",";","\n","calcChain","=","null",";","\n","}","\n\n","//adjust","indices","of","names","ranges\n","List<XSSFName>","toRemove","=","new","ArrayList<>","(",")",";","\n","for","(","XSSFName","nm",":","namedRanges",")","{","\n","CTDefinedName","ct","=","nm",".","getCTName","(",")",";","\n","if","(","!ct",".","isSetLocalSheetId","(",")",")","{","\n","continue",";","\n","}","\n","if","(","ct",".","getLocalSheetId","(",")","==","index",")","{","\n","toRemove",".","add","(","nm",")",";","\n","}","else","if","(","ct",".","getLocalSheetId","(",")",">","index",")","{","\n","//","Bump","down","by","one,","so","still","points","at","the","same","sheet\n","ct",".","setLocalSheetId","(","ct",".","getLocalSheetId","(",")","-1",")",";","\n","}","\n","}","\n","for","(","XSSFName","nm",":","toRemove",")","{","\n","removeName","(","nm",")",";","\n","}","\n"],"docstring_tokens":["Gracefully","remove","references","to","the","sheet","being","deleted"]}
{"code_tokens":["\n","public","boolean","isRevisionLocked","(",")","{","\n","return","workbookProtectionPresent","(",")","&&","workbook",".","getWorkbookProtection","(",")",".","getLockRevision","(",")",";","\n"],"docstring_tokens":["Specifies","a","boolean","value","that","indicates","whether","the","workbook","is","locked","for","revisions"]}
{"code_tokens":["\n","public","void","lockStructure","(",")","{","\n","safeGetWorkbookProtection","(",")",".","setLockStructure","(","true",")",";","\n"],"docstring_tokens":["Locks","the","structure","of","workbook"]}
{"code_tokens":["\n","public","void","unLockStructure","(",")","{","\n","safeGetWorkbookProtection","(",")",".","setLockStructure","(","false",")",";","\n"],"docstring_tokens":["Unlocks","the","structure","of","workbook"]}
{"code_tokens":["\n","public","void","lockWindows","(",")","{","\n","safeGetWorkbookProtection","(",")",".","setLockWindows","(","true",")",";","\n"],"docstring_tokens":["Locks","the","windows","that","comprise","the","workbook"]}
{"code_tokens":["\n","public","void","unLockWindows","(",")","{","\n","safeGetWorkbookProtection","(",")",".","setLockWindows","(","false",")",";","\n"],"docstring_tokens":["Unlocks","the","windows","that","comprise","the","workbook"]}
{"code_tokens":["\n","public","void","lockRevision","(",")","{","\n","safeGetWorkbookProtection","(",")",".","setLockRevision","(","true",")",";","\n"],"docstring_tokens":["Locks","the","workbook","for","revisions"]}
{"code_tokens":["\n","public","void","unLockRevision","(",")","{","\n","safeGetWorkbookProtection","(",")",".","setLockRevision","(","false",")",";","\n"],"docstring_tokens":["Unlocks","the","workbook","for","revisions"]}
{"code_tokens":["\n","public","boolean","validateRevisionsPassword","(","String","password",")","{","\n","if","(","!workbookProtectionPresent","(",")",")","{","\n","return","(","password","==","null",")",";","\n","}","\n","return","validatePassword","(","safeGetWorkbookProtection","(",")",",","password,","\"revisions\"",")",";","\n"],"docstring_tokens":["Validate","the","password","against","the","stored","hash,","the","hashing","method","will","be","determined","by","the","existing","password","attributes"]}
{"code_tokens":["\n","public","void","unLock","(",")","{","\n","if","(","workbookProtectionPresent","(",")",")","{","\n","workbook",".","unsetWorkbookProtection","(",")",";","\n","}","\n"],"docstring_tokens":["Removes","the","workbook","protection","settings"]}
{"code_tokens":["\n","public","void","setVBAProject","(","InputStream","vbaProjectStream",")","throws","IOException","{","\n","if","(","!isMacroEnabled","(",")",")","{","\n","setWorkbookType","(","XSSFWorkbookType",".","XLSM",")",";","\n","}","\n\n","PackagePartName","ppName",";","\n","try","{","\n","ppName","=","PackagingURIHelper",".","createPartName","(","XSSFRelation",".","VBA_MACROS",".","getDefaultFileName","(",")",")",";","\n","}","catch","(","InvalidFormatException","e",")","{","\n","throw","new","POIXMLException","(","e",")",";","\n","}","\n","OPCPackage","opc","=","getPackage","(",")",";","\n","OutputStream","outputStream",";","\n","if","(","!opc",".","containPart","(","ppName",")",")","{","\n","POIXMLDocumentPart","relationship","=","createRelationship","(","XSSFRelation",".","VBA_MACROS,","this",".","xssfFactory",")",";","\n","outputStream","=","relationship",".","getPackagePart","(",")",".","getOutputStream","(",")",";","\n","}","else","{","\n","PackagePart","part","=","opc",".","getPart","(","ppName",")",";","\n","outputStream","=","part",".","getOutputStream","(",")",";","\n","}","\n","try","{","\n","IOUtils",".","copy","(","vbaProjectStream,","outputStream",")",";","\n","}","finally","{","\n","IOUtils",".","closeQuietly","(","outputStream",")",";","\n","}","\n"],"docstring_tokens":["Adds","a","vbaProject.bin","file","to","the","workbook"]}
{"code_tokens":["\n","@Override\n","protected","EscherContainerRecord","createSpContainer","(",")","{","\n","EscherContainerRecord","spContainer","=","new","EscherContainerRecord","(",")",";","\n","EscherSpRecord","sp","=","new","EscherSpRecord","(",")",";","\n","EscherOptRecord","opt","=","new","EscherOptRecord","(",")",";","\n","EscherClientDataRecord","clientData","=","new","EscherClientDataRecord","(",")",";","\n\n","spContainer",".","setRecordId","(","EscherContainerRecord",".","SP_CONTAINER",")",";","\n","spContainer",".","setOptions","(","(","short",")","0x000F",")",";","\n","sp",".","setRecordId","(","EscherSpRecord",".","RECORD_ID",")",";","\n","sp",".","setOptions","(","(","short",")","(","(","ShapeType",".","NOT_PRIMITIVE",".","nativeId","<<","4",")","|","0x2",")",")",";","\n","if","(","getParent","(",")","==","null",")","{","\n","sp",".","setFlags","(","EscherSpRecord",".","FLAG_HAVEANCHOR","|","EscherSpRecord",".","FLAG_HASSHAPETYPE",")",";","\n","}","else","{","\n","sp",".","setFlags","(","EscherSpRecord",".","FLAG_CHILD","|","EscherSpRecord",".","FLAG_HAVEANCHOR","|","EscherSpRecord",".","FLAG_HASSHAPETYPE",")",";","\n","}","\n","opt",".","setRecordId","(","EscherOptRecord",".","RECORD_ID",")",";","\n","opt",".","setEscherProperty","(","new","EscherSimpleProperty","(","EscherPropertyTypes",".","TRANSFORM__ROTATION,","false,","false,","0",")",")",";","\n","opt",".","setEscherProperty","(","new","EscherSimpleProperty","(","EscherPropertyTypes",".","GEOMETRY__RIGHT,","false,","false,","100",")",")",";","\n","opt",".","setEscherProperty","(","new","EscherSimpleProperty","(","EscherPropertyTypes",".","GEOMETRY__BOTTOM,","false,","false,","100",")",")",";","\n","opt",".","setEscherProperty","(","new","EscherShapePathProperty","(","EscherPropertyTypes",".","GEOMETRY__SHAPEPATH,","EscherShapePathProperty",".","COMPLEX",")",")",";","\n\n","opt",".","setEscherProperty","(","new","EscherSimpleProperty","(","EscherPropertyTypes",".","GEOMETRY__FILLOK,","false,","false,","0x00010001",")",")",";","\n","opt",".","setEscherProperty","(","new","EscherSimpleProperty","(","EscherPropertyTypes",".","LINESTYLE__LINESTARTARROWHEAD,","false,","false,","0x0",")",")",";","\n","opt",".","setEscherProperty","(","new","EscherSimpleProperty","(","EscherPropertyTypes",".","LINESTYLE__LINEENDARROWHEAD,","false,","false,","0x0",")",")",";","\n","opt",".","setEscherProperty","(","new","EscherSimpleProperty","(","EscherPropertyTypes",".","LINESTYLE__LINEENDCAPSTYLE,","false,","false,","0x0",")",")",";","\n\n","opt",".","setEscherProperty","(","new","EscherSimpleProperty","(","EscherPropertyTypes",".","LINESTYLE__LINEDASHING,","LINESTYLE_SOLID",")",")",";","\n","opt",".","setEscherProperty","(","new","EscherBoolProperty","(","EscherPropertyTypes",".","LINESTYLE__NOLINEDRAWDASH,","0x00080008",")",")",";","\n","opt",".","setEscherProperty","(","new","EscherSimpleProperty","(","EscherPropertyTypes",".","LINESTYLE__LINEWIDTH,","LINEWIDTH_DEFAULT",")",")",";","\n","opt",".","setEscherProperty","(","new","EscherRGBProperty","(","EscherPropertyTypes",".","FILL__FILLCOLOR,","FILL__FILLCOLOR_DEFAULT",")",")",";","\n","opt",".","setEscherProperty","(","new","EscherRGBProperty","(","EscherPropertyTypes",".","LINESTYLE__COLOR,","LINESTYLE__COLOR_DEFAULT",")",")",";","\n","opt",".","setEscherProperty","(","new","EscherBoolProperty","(","EscherPropertyTypes",".","FILL__NOFILLHITTEST,","1",")",")",";","\n\n","opt",".","setEscherProperty","(","new","EscherBoolProperty","(","EscherPropertyTypes",".","GROUPSHAPE__FLAGS,","0x080000",")",")",";","\n\n","EscherRecord","anchor","=","getAnchor","(",")",".","getEscherAnchor","(",")",";","\n","clientData",".","setRecordId","(","EscherClientDataRecord",".","RECORD_ID",")",";","\n","clientData",".","setOptions","(","(","short",")","0x0000",")",";","\n\n","spContainer",".","addChildRecord","(","sp",")",";","\n","spContainer",".","addChildRecord","(","opt",")",";","\n","spContainer",".","addChildRecord","(","anchor",")",";","\n","spContainer",".","addChildRecord","(","clientData",")",";","\n\n","return","spContainer",";","\n"],"docstring_tokens":["Generates","the","shape","records","for","this","shape"]}
{"code_tokens":["\n","/*","package","*/","static","boolean","isSimpleAscii","(","char","c",")","{","\n\n","if","(","c>=0x21","&&","c<=0x7E",")","{","\n","//","everything","from","'!'","to","'~'","(","includes","letters,","digits,","punctuation\n","return","true",";","\n","}","\n","//","some","specific","whitespace","chars","below","0x21:\n","switch","(","c",")","{","\n","case","'","':\n","case","'\\t':\n","case","'\\r':\n","case","'\\n':\n","return","true",";","\n","}","\n","return","false",";","\n"],"docstring_tokens":["For","simplicity,","the","output","file","is","strictly","simple","ASCII"]}
{"code_tokens":["\n","@Override\n","public","Object","get","(","final","Object","key",")","{","\n","final","Long","id","=","dictionary",".","getKey","(","key",")",";","\n","final","CustomProperty","cp","=","props",".","get","(","id",")",";","\n","return","cp","!=","null","?","cp",".","getValue","(",")",":","null",";","\n"],"docstring_tokens":["Gets","a","named","value","from","the","custom","properties","-","only","works","for","keys","of","type","String"]}
{"code_tokens":["\n","@Override\n","public","CustomProperty","remove","(","Object","key",")","{","\n","final","Long","id","=","dictionary",".","removeValue","(","key",")",";","\n","return","props",".","remove","(","id",")",";","\n"],"docstring_tokens":["Removes","a","custom","property","-","only","works","for","keys","of","type","String"]}
{"code_tokens":["\n","@Override\n","public","Set<String>","keySet","(",")","{","\n","return","Collections",".","unmodifiableSet","(","dictionary",".","values","(",")",")",";","\n"],"docstring_tokens":["Returns","a","set","of","all","the","names","of","our","custom","properties"]}
{"code_tokens":["\n","public","Set<Long>","idSet","(",")","{","\n","return","Collections",".","unmodifiableSet","(","dictionary",".","keySet","(",")",")",";","\n"],"docstring_tokens":["Returns","a","set","of","all","the","IDs","of","our","custom","properties"]}
{"code_tokens":["\n","@SuppressWarnings","(","{","\"UnusedReturnValue\",","\"WeakerAccess\"","}",")","\n","public","synchronized","int","appendRootLevelRecord","(","Record","newRecord",")","{","\n","int","addedAt","=","-1",";","\n","Record[]","r","=","new","Record[_records",".","length","+","1]",";","\n","boolean","added","=","false",";","\n","for","(","int","i","=","(","_records",".","length","-","1",")",";","i",">=","0",";","i--",")","{","\n","if","(","added",")","{","\n","//","Just","copy","over\n","r[i]","=","_records[i]",";","\n","}","else","{","\n","r[","(","i","+","1",")","]","=","_records[i]",";","\n","if","(","_records[i]","instanceof","PersistPtrHolder",")","{","\n","r[i]","=","newRecord",";","\n","added","=","true",";","\n","addedAt","=","i",";","\n","}","\n","}","\n","}","\n","_records","=","r",";","\n","return","addedAt",";","\n"],"docstring_tokens":["Adds","a","new","root","level","record,","at","the","end,","but","before","the","last","PersistPtrIncrementalBlock"]}
{"code_tokens":["\n","public","HSLFObjectData[]","getEmbeddedObjects","(",")","{","\n","if","(","_objects","==","null",")","{","\n","List<HSLFObjectData>","objects","=","new","ArrayList<>","(",")",";","\n","for","(","Record","r",":","_records",")","{","\n","if","(","r","instanceof","ExOleObjStg",")","{","\n","objects",".","add","(","new","HSLFObjectData","(","(","ExOleObjStg",")","r",")",")",";","\n","}","\n","}","\n","_objects","=","objects",".","toArray","(","new","HSLFObjectData[0]",")",";","\n","}","\n","return","_objects",";","\n"],"docstring_tokens":["Gets","embedded","object","data","from","the","slide","show"]}
{"code_tokens":["\n","@Internal\n","public","void","setTlc","(","byte","value",")","\n","{","\n","field_1_value","=","(","byte",")","tlc",".","setValue","(","field_1_value,","value",")",";","\n"],"docstring_tokens":["Sets","the","tlc","field","value"]}
{"code_tokens":["\n","@Internal\n","public","void","setReserved","(","byte","value",")","\n","{","\n","field_1_value","=","(","byte",")","reserved",".","setValue","(","field_1_value,","value",")",";","\n"],"docstring_tokens":["Sets","the","reserved","field","value"]}
{"code_tokens":["\n","public","int","calcExtSSTRecordSize","(",")","{","\n","return","ExtSSTRecord",".","getRecordSizeForStrings","(","field_3_strings",".","size","(",")",")",";","\n"],"docstring_tokens":["Calculates","the","size","in","bytes","of","the","EXTSST","record","as","it","would","be","if","the","record","was","serialized"]}
{"code_tokens":["\n","@Override\n","public","XWPFParagraph","getParagraphArray","(","int","pos",")","{","\n","if","(","pos",">=","0","&&","pos<paragraphs",".","size","(",")",")","{","\n","return","paragraphs",".","get","(","pos",")",";","\n","}","\n","return","null",";","\n"],"docstring_tokens":["Returns","the","paragraph","that","holds","the","text","of","the","header","or","footer"]}
{"code_tokens":["\n","public","XWPFParagraph","createParagraph","(",")","{","\n","XWPFParagraph","paragraph","=","new","XWPFParagraph","(","headerFooter",".","addNewP","(",")",",","this",")",";","\n","paragraphs",".","add","(","paragraph",")",";","\n","bodyElements",".","add","(","paragraph",")",";","\n","return","paragraph",";","\n"],"docstring_tokens":["Adds","a","new","paragraph","at","the","end","of","the","header","or","footer"]}
{"code_tokens":["\n","public","XWPFTable","createTable","(","int","rows,","int","cols",")","{","\n","XWPFTable","table","=","new","XWPFTable","(","headerFooter",".","addNewTbl","(",")",",","this,","rows,","cols",")",";","\n","tables",".","add","(","table",")",";","\n","bodyElements",".","add","(","table",")",";","\n","return","table",";","\n"],"docstring_tokens":["Adds","a","new","table","at","the","end","of","the","header","or","footer"]}
{"code_tokens":["\n","@Override\n","public","XWPFParagraph","insertNewParagraph","(","XmlCursor","cursor",")","{","\n","if","(","isCursorInHdrF","(","cursor",")",")","{","\n","String","uri","=","CTP",".","type",".","getName","(",")",".","getNamespaceURI","(",")",";","\n","String","localPart","=","\"p\"",";","\n","cursor",".","beginElement","(","localPart,","uri",")",";","\n","cursor",".","toParent","(",")",";","\n","CTP","p","=","(","CTP",")","cursor",".","getObject","(",")",";","\n","XWPFParagraph","newP","=","new","XWPFParagraph","(","p,","this",")",";","\n","XmlObject","o","=","null",";","\n","while","(","!","(","o","instanceof","CTP",")","&&","(","cursor",".","toPrevSibling","(",")",")",")","{","\n","o","=","cursor",".","getObject","(",")",";","\n","}","\n","if","(","(","!","(","o","instanceof","CTP",")",")","||","o","==","p",")","{","\n","paragraphs",".","add","(","0,","newP",")",";","\n","}","else","{","\n","int","pos","=","paragraphs",".","indexOf","(","getParagraph","(","(","CTP",")","o",")",")","+","1",";","\n","paragraphs",".","add","(","pos,","newP",")",";","\n","}","\n","int","i","=","0",";","\n","final","XmlCursor","p2","=","p",".","newCursor","(",")",";","\n","try","{","\n","cursor",".","toCursor","(","p2",")",";","\n","}","finally","{","\n","p2",".","dispose","(",")",";","\n","}","\n","while","(","cursor",".","toPrevSibling","(",")",")","{","\n","o","=","cursor",".","getObject","(",")",";","\n","if","(","o","instanceof","CTP","||","o","instanceof","CTTbl",")","\n","i++",";","\n","}","\n","bodyElements",".","add","(","i,","newP",")",";","\n","final","XmlCursor","p3","=","p",".","newCursor","(",")",";","\n","try","{","\n","cursor",".","toCursor","(","p3",")",";","\n","cursor",".","toEndToken","(",")",";","\n","}","finally","{","\n","p3",".","dispose","(",")",";","\n","}","\n","return","newP",";","\n","}","\n","return","null",";","\n"],"docstring_tokens":["add","a","new","paragraph","at","position","of","the","cursor"]}
{"code_tokens":["\n","protected","static","OPCPackage","newPackage","(",")","{","\n","OPCPackage","pkg","=","null",";","\n","try","{","\n","pkg","=","OPCPackage",".","create","(","new","UnsynchronizedByteArrayOutputStream","(",")",")",";","//","NOSONAR","-","we","do","not","want","to","close","this","here\n","//","Main","part\n","PackagePartName","corePartName","=","PackagingURIHelper",".","createPartName","(","XWPFRelation",".","DOCUMENT",".","getDefaultFileName","(",")",")",";","\n","//","Create","main","part","relationship\n","pkg",".","addRelationship","(","corePartName,","TargetMode",".","INTERNAL,","PackageRelationshipTypes",".","CORE_DOCUMENT",")",";","\n","//","Create","main","document","part\n","pkg",".","createPart","(","corePartName,","XWPFRelation",".","DOCUMENT",".","getContentType","(",")",")",";","\n\n","pkg",".","getPackageProperties","(",")",".","setCreatorProperty","(","DOCUMENT_CREATOR",")",";","\n\n","return","pkg",";","\n","}","catch","(","Exception","e",")","{","\n","IOUtils",".","closeQuietly","(","pkg",")",";","\n","throw","new","POIXMLException","(","e",")",";","\n","}","\n"],"docstring_tokens":["Create","a","new","WordProcessingML","package","and","setup","the","default","minimal","content"]}
{"code_tokens":["\n","private","CTSectPr","getSection","(",")","{","\n","CTBody","ctBody","=","getDocument","(",")",".","getBody","(",")",";","\n","return","(","ctBody",".","isSetSectPr","(",")","?\n","ctBody",".","getSectPr","(",")",":\n","ctBody",".","addNewSectPr","(",")",")",";","\n"],"docstring_tokens":["Return","the","CTSectPr","object","that","corresponds","with","the","last","section","in","this","document"]}
{"code_tokens":["\n","private","int","getBodyElementSpecificPos","(","int","pos,","List<?","extends","IBodyElement>","list",")","{","\n","//","If","there's","nothing","to","find,","skip","it\n","if","(","list",".","isEmpty","(",")",")","{","\n","return","-1",";","\n","}","\n\n","if","(","pos",">=","0","&&","pos","<","bodyElements",".","size","(",")",")","{","\n","//","Ensure","the","type","is","correct\n","IBodyElement","needle","=","bodyElements",".","get","(","pos",")",";","\n","if","(","needle",".","getElementType","(",")","!=","list",".","get","(","0",")",".","getElementType","(",")",")","{","\n","//","Wrong","type\n","return","-1",";","\n","}","\n\n","//","Work","back","until","we","find","it\n","int","startPos","=","Math",".","min","(","pos,","list",".","size","(",")","-","1",")",";","\n","for","(","int","i","=","startPos",";","i",">=","0",";","i--",")","{","\n","if","(","list",".","get","(","i",")","==","needle",")","{","\n","return","i",";","\n","}","\n","}","\n","}","\n\n","//","Couldn't","be","found\n","return","-1",";","\n"],"docstring_tokens":["Finds","that","for","example","the","2nd","entry","in","the","body","list","is","the","1st","paragraph"]}
{"code_tokens":["\n","public","XWPFParagraph","createParagraph","(",")","{","\n","XWPFParagraph","p","=","new","XWPFParagraph","(","ctDocument",".","getBody","(",")",".","addNewP","(",")",",","this",")",";","\n","bodyElements",".","add","(","p",")",";","\n","paragraphs",".","add","(","p",")",";","\n","return","p",";","\n"],"docstring_tokens":["Appends","a","new","paragraph","to","this","document"]}
{"code_tokens":["\n","public","XWPFNumbering","createNumbering","(",")","{","\n","if","(","numbering","==","null",")","{","\n","NumberingDocument","numberingDoc","=","NumberingDocument",".","Factory",".","newInstance","(",")",";","\n\n","XWPFRelation","relation","=","XWPFRelation",".","NUMBERING",";","\n","int","i","=","getRelationIndex","(","relation",")",";","\n\n","XWPFNumbering","wrapper","=","(","XWPFNumbering",")","createRelationship","(","relation,","XWPFFactory",".","getInstance","(",")",",","i",")",";","\n","wrapper",".","setNumbering","(","numberingDoc",".","addNewNumbering","(",")",")",";","\n","numbering","=","wrapper",";","\n","}","\n\n","return","numbering",";","\n"],"docstring_tokens":["Creates","an","empty","numbering","if","one","does","not","already","exist","and","sets","the","numbering","member"]}
{"code_tokens":["\n","public","XWPFStyles","createStyles","(",")","{","\n","if","(","styles","==","null",")","{","\n","StylesDocument","stylesDoc","=","StylesDocument",".","Factory",".","newInstance","(",")",";","\n\n","XWPFRelation","relation","=","XWPFRelation",".","STYLES",";","\n","int","i","=","getRelationIndex","(","relation",")",";","\n\n","XWPFStyles","wrapper","=","(","XWPFStyles",")","createRelationship","(","relation,","XWPFFactory",".","getInstance","(",")",",","i",")",";","\n","wrapper",".","setStyles","(","stylesDoc",".","addNewStyles","(",")",")",";","\n","styles","=","wrapper",";","\n","}","\n\n","return","styles",";","\n"],"docstring_tokens":["Creates","an","empty","styles","for","the","document","if","one","does","not","already","exist"]}
{"code_tokens":["\n","public","XWPFTable","createTable","(","int","rows,","int","cols",")","{","\n","XWPFTable","table","=","new","XWPFTable","(","ctDocument",".","getBody","(",")",".","addNewTbl","(",")",",","this,","rows,","cols",")",";","\n","bodyElements",".","add","(","table",")",";","\n","tables",".","add","(","table",")",";","\n","return","table",";","\n"],"docstring_tokens":["Create","an","empty","table","with","a","number","of","rows","and","cols","specified"]}
{"code_tokens":["\n","public","boolean","isTrackRevisions","(",")","{","\n","return","settings",".","isTrackRevisions","(",")",";","\n"],"docstring_tokens":["Check","if","revision","tracking","is","turned","on"]}
{"code_tokens":["\n","@Override\n","public","XWPFTable","getTable","(","CTTbl","ctTbl",")","{","\n","for","(","int","i","=","0",";","i","<","tables",".","size","(",")",";","i++",")","{","\n","if","(","getTables","(",")",".","get","(","i",")",".","getCTTbl","(",")","==","ctTbl",")","{","\n","return","getTables","(",")",".","get","(","i",")",";","\n","}","\n","}","\n","return","null",";","\n"],"docstring_tokens":["get","a","table","by","its","CTTbl-Object"]}
{"code_tokens":["\n","public","XWPFEndnote","createEndnote","(",")","{","\n","XWPFEndnotes","endnotes","=","this",".","createEndnotes","(",")",";","\n\n","return","endnotes",".","createEndnote","(",")",";","\n\n"],"docstring_tokens":["Create","a","new","end","note","and","add","it","to","the","document"]}
{"code_tokens":["\n","public","List<XWPFEndnote>","getEndnotes","(",")","{","\n","if","(","endnotes","==","null",")","{","\n","return","Collections",".","emptyList","(",")",";","\n","}","\n","return","endnotes",".","getEndnotesList","(",")",";","\n"],"docstring_tokens":["Gets","the","list","of","end","notes","for","the","document"]}
{"code_tokens":["\n","private","static","Map<String,","CellStyle>","createStyles","(","Workbook","wb",")","{","\n","Map<String,","CellStyle>","styles","=","new","HashMap<>","(",")",";","\n","CellStyle","style",";","\n","Font","titleFont","=","wb",".","createFont","(",")",";","\n","titleFont",".","setFontHeightInPoints","(","(","short",")","18",")",";","\n","titleFont",".","setBold","(","true",")",";","\n","style","=","wb",".","createCellStyle","(",")",";","\n","style",".","setAlignment","(","HorizontalAlignment",".","CENTER",")",";","\n","style",".","setVerticalAlignment","(","VerticalAlignment",".","CENTER",")",";","\n","style",".","setFont","(","titleFont",")",";","\n","styles",".","put","(","\"title\",","style",")",";","\n\n","Font","monthFont","=","wb",".","createFont","(",")",";","\n","monthFont",".","setFontHeightInPoints","(","(","short",")","11",")",";","\n","monthFont",".","setColor","(","IndexedColors",".","WHITE",".","getIndex","(",")",")",";","\n","style","=","wb",".","createCellStyle","(",")",";","\n","style",".","setAlignment","(","HorizontalAlignment",".","CENTER",")",";","\n","style",".","setVerticalAlignment","(","VerticalAlignment",".","CENTER",")",";","\n","style",".","setFillForegroundColor","(","IndexedColors",".","GREY_50_PERCENT",".","getIndex","(",")",")",";","\n","style",".","setFillPattern","(","FillPatternType",".","SOLID_FOREGROUND",")",";","\n","style",".","setFont","(","monthFont",")",";","\n","style",".","setWrapText","(","true",")",";","\n","styles",".","put","(","\"header\",","style",")",";","\n\n","style","=","wb",".","createCellStyle","(",")",";","\n","style",".","setAlignment","(","HorizontalAlignment",".","CENTER",")",";","\n","style",".","setWrapText","(","true",")",";","\n","style",".","setBorderRight","(","BorderStyle",".","THIN",")",";","\n","style",".","setRightBorderColor","(","IndexedColors",".","BLACK",".","getIndex","(",")",")",";","\n","style",".","setBorderLeft","(","BorderStyle",".","THIN",")",";","\n","style",".","setLeftBorderColor","(","IndexedColors",".","BLACK",".","getIndex","(",")",")",";","\n","style",".","setBorderTop","(","BorderStyle",".","THIN",")",";","\n","style",".","setTopBorderColor","(","IndexedColors",".","BLACK",".","getIndex","(",")",")",";","\n","style",".","setBorderBottom","(","BorderStyle",".","THIN",")",";","\n","style",".","setBottomBorderColor","(","IndexedColors",".","BLACK",".","getIndex","(",")",")",";","\n","styles",".","put","(","\"cell\",","style",")",";","\n\n","style","=","wb",".","createCellStyle","(",")",";","\n","style",".","setAlignment","(","HorizontalAlignment",".","CENTER",")",";","\n","style",".","setVerticalAlignment","(","VerticalAlignment",".","CENTER",")",";","\n","style",".","setFillForegroundColor","(","IndexedColors",".","GREY_25_PERCENT",".","getIndex","(",")",")",";","\n","style",".","setFillPattern","(","FillPatternType",".","SOLID_FOREGROUND",")",";","\n","style",".","setDataFormat","(","wb",".","createDataFormat","(",")",".","getFormat","(","\"0",".","00\"",")",")",";","\n","styles",".","put","(","\"formula\",","style",")",";","\n\n","style","=","wb",".","createCellStyle","(",")",";","\n","style",".","setAlignment","(","HorizontalAlignment",".","CENTER",")",";","\n","style",".","setVerticalAlignment","(","VerticalAlignment",".","CENTER",")",";","\n","style",".","setFillForegroundColor","(","IndexedColors",".","GREY_40_PERCENT",".","getIndex","(",")",")",";","\n","style",".","setFillPattern","(","FillPatternType",".","SOLID_FOREGROUND",")",";","\n","style",".","setDataFormat","(","wb",".","createDataFormat","(",")",".","getFormat","(","\"0",".","00\"",")",")",";","\n","styles",".","put","(","\"formula_2\",","style",")",";","\n\n","return","styles",";","\n"],"docstring_tokens":["Create","a","library","of","cell","styles"]}
{"code_tokens":["\n","@Internal\n","public","void","setStk","(","byte","value",")","\n","{","\n","field_2_info2","=","(","short",")","stk",".","setValue","(","field_2_info2,","value",")",";","\n"],"docstring_tokens":["Sets","the","stk","field","value"]}
{"code_tokens":["\n","@Internal\n","public","void","setIstdBase","(","short","value",")","\n","{","\n","field_2_info2","=","(","short",")","istdBase",".","setValue","(","field_2_info2,","value",")",";","\n"],"docstring_tokens":["Sets","the","istdBase","field","value"]}
{"code_tokens":["\n","@Internal\n","public","void","setCupx","(","byte","value",")","\n","{","\n","field_3_info3","=","(","short",")","cupx",".","setValue","(","field_3_info3,","value",")",";","\n"],"docstring_tokens":["Sets","the","cupx","field","value"]}
{"code_tokens":["\n","@Internal\n","public","void","setIstdNext","(","short","value",")","\n","{","\n","field_3_info3","=","(","short",")","istdNext",".","setValue","(","field_3_info3,","value",")",";","\n"],"docstring_tokens":["Sets","the","istdNext","field","value"]}
{"code_tokens":["\n","@Internal\n","public","boolean","isFUnhideWhenUsed","(",")","\n","{","\n","return","fUnhideWhenUsed",".","isSet","(","field_5_grfstd",")",";","\n"],"docstring_tokens":["Specifies","whether","the","fSemiHidden","property","is","to","be","set","to","0","when","this","style","is","used"]}
{"code_tokens":["\n","@Internal\n","public","void","setFReserved","(","byte","value",")","\n","{","\n","field_5_grfstd","=","(","short",")","fReserved",".","setValue","(","field_5_grfstd,","value",")",";","\n"],"docstring_tokens":["Sets","the","fReserved","field","value"]}
{"code_tokens":["\n","@Internal\n","public","byte","getFReserved","(",")","\n","{","\n","return","(","byte",")","fReserved",".","getValue","(","field_5_grfstd",")",";","\n"],"docstring_tokens":["This","value","MUST","be","0","and","MUST","be","ignored"]}
{"code_tokens":["\n","public","static","Cell","getCell","(","Row","row,","int","columnIndex",")","{","\n","Cell","cell","=","row",".","getCell","(","columnIndex",")",";","\n\n","if","(","cell","==","null",")","{","\n","cell","=","row",".","createCell","(","columnIndex",")",";","\n","}","\n","return","cell",";","\n"],"docstring_tokens":["Get","a","specific","cell","from","a","row"]}
{"code_tokens":["\n","public","static","Cell","createCell","(","Row","row,","int","column,","String","value,","CellStyle","style",")","{","\n","Cell","cell","=","getCell","(","row,","column",")",";","\n\n","cell",".","setCellValue","(","cell",".","getRow","(",")",".","getSheet","(",")",".","getWorkbook","(",")",".","getCreationHelper","(",")","\n",".","createRichTextString","(","value",")",")",";","\n","if","(","style","!=","null",")","{","\n","cell",".","setCellStyle","(","style",")",";","\n","}","\n","return","cell",";","\n"],"docstring_tokens":["Creates","a","cell,","gives","it","a","value,","and","applies","a","style","if","provided"]}
{"code_tokens":["\n","public","static","void","setFont","(","Cell","cell,","Font","font",")","{","\n","//","Check","if","font","belongs","to","workbook\n","Workbook","wb","=","cell",".","getSheet","(",")",".","getWorkbook","(",")",";","\n","final","int","fontIndex","=","font",".","getIndex","(",")",";","\n","if","(","!wb",".","getFontAt","(","fontIndex",")",".","equals","(","font",")",")","{","\n","throw","new","IllegalArgumentException","(","\"Font","does","not","belong","to","this","workbook\"",")",";","\n","}","\n\n","//","Check","if","cell","belongs","to","workbook\n","//","(","checked","in","setCellStyleProperty",")","\n\n","setCellStyleProperty","(","cell,","FONT,","fontIndex",")",";","\n"],"docstring_tokens":["Take","a","cell,","and","apply","a","font","to","it"]}
{"code_tokens":["\n","private","static","void","setFormatProperties","(","CellStyle","style,","Workbook","workbook,","Map<String,","Object>","properties",")","{","\n","style",".","setAlignment","(","getHorizontalAlignment","(","properties,","ALIGNMENT",")",")",";","\n","style",".","setVerticalAlignment","(","getVerticalAlignment","(","properties,","VERTICAL_ALIGNMENT",")",")",";","\n","style",".","setBorderBottom","(","getBorderStyle","(","properties,","BORDER_BOTTOM",")",")",";","\n","style",".","setBorderLeft","(","getBorderStyle","(","properties,","BORDER_LEFT",")",")",";","\n","style",".","setBorderRight","(","getBorderStyle","(","properties,","BORDER_RIGHT",")",")",";","\n","style",".","setBorderTop","(","getBorderStyle","(","properties,","BORDER_TOP",")",")",";","\n","style",".","setBottomBorderColor","(","getShort","(","properties,","BOTTOM_BORDER_COLOR",")",")",";","\n","style",".","setDataFormat","(","getShort","(","properties,","DATA_FORMAT",")",")",";","\n","style",".","setFillPattern","(","getFillPattern","(","properties,","FILL_PATTERN",")",")",";","\n","style",".","setFillForegroundColor","(","getShort","(","properties,","FILL_FOREGROUND_COLOR",")",")",";","\n","style",".","setFillBackgroundColor","(","getShort","(","properties,","FILL_BACKGROUND_COLOR",")",")",";","\n","style",".","setFont","(","workbook",".","getFontAt","(","getInt","(","properties,","FONT",")",")",")",";","\n","style",".","setHidden","(","getBoolean","(","properties,","HIDDEN",")",")",";","\n","style",".","setIndention","(","getShort","(","properties,","INDENTION",")",")",";","\n","style",".","setLeftBorderColor","(","getShort","(","properties,","LEFT_BORDER_COLOR",")",")",";","\n","style",".","setLocked","(","getBoolean","(","properties,","LOCKED",")",")",";","\n","style",".","setRightBorderColor","(","getShort","(","properties,","RIGHT_BORDER_COLOR",")",")",";","\n","style",".","setRotation","(","getShort","(","properties,","ROTATION",")",")",";","\n","style",".","setTopBorderColor","(","getShort","(","properties,","TOP_BORDER_COLOR",")",")",";","\n","style",".","setWrapText","(","getBoolean","(","properties,","WRAP_TEXT",")",")",";","\n"],"docstring_tokens":["Sets","the","format","properties","of","the","given","style","based","on","the","given","map"]}
{"code_tokens":["\n","public","XSSFColor","getBottomBorderXSSFColor","(",")","{","\n","if","(","!_cellXf",".","getApplyBorder","(",")",")","return","null",";","\n\n","int","idx","=","Math",".","toIntExact","(","_cellXf",".","getBorderId","(",")",")",";","\n","XSSFCellBorder","border","=","_stylesSource",".","getBorderAt","(","idx",")",";","\n\n","return","border",".","getBorderColor","(","BorderSide",".","BOTTOM",")",";","\n"],"docstring_tokens":["Get","the","color","to","use","for","the","bottom","border","as","a","XSSFColor"]}
{"code_tokens":["\n","public","XSSFColor","getFillBackgroundXSSFColor","(",")","{","\n","//","bug","56295:","handle","missing","applyFill","attribute","as","\"true\"","because","Excel","does","as","well\n","if","(","_cellXf",".","isSetApplyFill","(",")","&&","!_cellXf",".","getApplyFill","(",")",")","return","null",";","\n\n","int","fillIndex","=","(","int",")","_cellXf",".","getFillId","(",")",";","\n","XSSFCellFill","fg","=","_stylesSource",".","getFillAt","(","fillIndex",")",";","\n\n","XSSFColor","fillBackgroundColor","=","fg",".","getFillBackgroundColor","(",")",";","\n","if","(","fillBackgroundColor","!=","null","&&","_theme","!=","null",")","{","\n","_theme",".","inheritFromThemeAsRequired","(","fillBackgroundColor",")",";","\n","}","\n","return","fillBackgroundColor",";","\n"],"docstring_tokens":["Get","the","background","fill","color"]}
{"code_tokens":["\n","public","XSSFColor","getFillForegroundXSSFColor","(",")","{","\n","//","bug","56295:","handle","missing","applyFill","attribute","as","\"true\"","because","Excel","does","as","well\n","if","(","_cellXf",".","isSetApplyFill","(",")","&&","!_cellXf",".","getApplyFill","(",")",")","return","null",";","\n\n","int","fillIndex","=","(","int",")","_cellXf",".","getFillId","(",")",";","\n","XSSFCellFill","fg","=","_stylesSource",".","getFillAt","(","fillIndex",")",";","\n\n","XSSFColor","fillForegroundColor","=","fg",".","getFillForegroundColor","(",")",";","\n","if","(","fillForegroundColor","!=","null","&&","_theme","!=","null",")","{","\n","_theme",".","inheritFromThemeAsRequired","(","fillForegroundColor",")",";","\n","}","\n","return","fillForegroundColor",";","\n"],"docstring_tokens":["Get","the","foreground","fill","color"]}
{"code_tokens":["\n","public","XSSFFont","getFont","(",")","{","\n","if","(","_font","==","null",")","{","\n","_font","=","_stylesSource",".","getFontAt","(","getFontId","(",")",")",";","\n","}","\n","return","_font",";","\n"],"docstring_tokens":["Gets","the","font","for","this","style"]}
{"code_tokens":["\n","@Override\n","public","int","getFontIndex","(",")","{","\n","return","getFontId","(",")",";","\n"],"docstring_tokens":["Gets","the","index","of","the","font","for","this","style"]}
{"code_tokens":["\n","@Override\n","public","short","getIndention","(",")","{","\n","CTCellAlignment","align","=","_cellXf",".","getAlignment","(",")",";","\n","return","(","short",")","(","align","==","null","?","0",":","align",".","getIndent","(",")",")",";","\n"],"docstring_tokens":["Get","the","number","of","spaces","to","indent","the","text","in","the","cell"]}
{"code_tokens":["\n","public","XSSFColor","getLeftBorderXSSFColor","(",")","{","\n","if","(","!_cellXf",".","getApplyBorder","(",")",")","return","null",";","\n\n","int","idx","=","Math",".","toIntExact","(","_cellXf",".","getBorderId","(",")",")",";","\n","XSSFCellBorder","border","=","_stylesSource",".","getBorderAt","(","idx",")",";","\n\n","return","border",".","getBorderColor","(","BorderSide",".","LEFT",")",";","\n"],"docstring_tokens":["Get","the","color","to","use","for","the","left","border"]}
{"code_tokens":["\n","public","XSSFColor","getRightBorderXSSFColor","(",")","{","\n","if","(","!_cellXf",".","getApplyBorder","(",")",")","return","null",";","\n\n","int","idx","=","Math",".","toIntExact","(","_cellXf",".","getBorderId","(",")",")",";","\n","XSSFCellBorder","border","=","_stylesSource",".","getBorderAt","(","idx",")",";","\n\n","return","border",".","getBorderColor","(","BorderSide",".","RIGHT",")",";","\n"],"docstring_tokens":["Get","the","color","to","use","for","the","right","border"]}
{"code_tokens":["\n","public","XSSFColor","getTopBorderXSSFColor","(",")","{","\n","if","(","!_cellXf",".","getApplyBorder","(",")",")","return","null",";","\n\n","int","idx","=","Math",".","toIntExact","(","_cellXf",".","getBorderId","(",")",")",";","\n","XSSFCellBorder","border","=","_stylesSource",".","getBorderAt","(","idx",")",";","\n\n","return","border",".","getBorderColor","(","BorderSide",".","TOP",")",";","\n"],"docstring_tokens":["Get","the","color","to","use","for","the","top","border"]}
{"code_tokens":["\n","@Override\n","public","void","setAlignment","(","HorizontalAlignment","align",")","{","\n","_cellXf",".","setApplyAlignment","(","true",")",";","\n\n","getCellAlignment","(",")",".","setHorizontal","(","align",")",";","\n"],"docstring_tokens":["Set","the","type","of","horizontal","alignment","for","the","cell"]}
{"code_tokens":["\n","@Override\n","public","void","setFont","(","Font","font",")","{","\n","if","(","font","!=","null",")","{","\n","long","index","=","font",".","getIndex","(",")",";","\n","this",".","_cellXf",".","setFontId","(","index",")",";","\n","this",".","_cellXf",".","setApplyFont","(","true",")",";","\n","}","else","{","\n","this",".","_cellXf",".","setApplyFont","(","false",")",";","\n","}","\n"],"docstring_tokens":["Set","the","font","for","this","style"]}
{"code_tokens":["\n","@Override\n","public","void","setIndention","(","short","indent",")","{","\n","getCellAlignment","(",")",".","setIndent","(","indent",")",";","\n"],"docstring_tokens":["Set","the","number","of","spaces","to","indent","the","text","in","the","cell"]}
{"code_tokens":["\n","public","void","setVerticalAlignment","(","VerticalAlignment","align",")","{","\n","_cellXf",".","setApplyAlignment","(","true",")",";","\n\n","getCellAlignment","(",")",".","setVertical","(","align",")",";","\n"],"docstring_tokens":["Set","the","type","of","vertical","alignment","for","the","cell"]}
{"code_tokens":["\n","@Override\n","public","boolean","equals","(","Object","o",")","{","\n","if","(","!","(","o","instanceof","XSSFCellStyle",")",")","return","false",";","\n\n","XSSFCellStyle","cf","=","(","XSSFCellStyle",")","o",";","\n","return","_cellXf",".","toString","(",")",".","equals","(","cf",".","getCoreXf","(",")",".","toString","(",")",")",";","\n"],"docstring_tokens":["Checks","is","the","supplied","style","is","equal","to","this","style"]}
{"code_tokens":["\n\n","public","static","void","main","(","final","String[]","args",")","{","\n","if","(","args",".","length","==","0",")","{","\n","System",".","err",".","println","(","\"Must","specify","at","least","one","file","to","view\"",")",";","\n","System",".","exit","(","1",")",";","\n","}","\n","boolean","printNames","=","(","args",".","length",">","1",")",";","\n\n","for","(","String","arg",":","args",")","{","\n","viewFile","(","arg,","printNames",")",";","\n","}","\n"],"docstring_tokens":["Display","the","contents","of","multiple","POIFS","files"]}
{"code_tokens":["\n","public","Cipher","initCipherForBlock","(","Cipher","cipher,","int","block",")","\n","throws","GeneralSecurityException","{","\n","return","CryptoAPIDecryptor",".","initCipherForBlock","(","cipher,","block,","getEncryptionInfo","(",")",",","getSecretKey","(",")",",","Cipher",".","ENCRYPT_MODE",")",";","\n"],"docstring_tokens":["Initializes","a","cipher","object","for","a","given","block","index","for","encryption"]}
{"code_tokens":["\n","public","char","getSymbolCharacter","(",")","\n","{","\n","if","(","isSymbol","(",")",")","{","\n","return","(","char",")","_props",".","getXchSym","(",")",";","\n","}","else\n","throw","new","IllegalStateException","(","\"Not","a","symbol","CharacterRun\"",")",";","\n"],"docstring_tokens":["Returns","the","symbol","character,","if","this","is","a","symbol","character","run"]}
{"code_tokens":["\n","public","Ffn","getSymbolFont","(",")","\n","{","\n","if","(","isSymbol","(",")",")","{","\n","if","(","_doc",".","getFontTable","(",")","==","null",")","\n","return","null",";","\n\n","//","Fetch","all","font","names\n","Ffn[]","fontNames","=","_doc",".","getFontTable","(",")",".","getFontNames","(",")",";","\n\n","//","Try","to","find","the","name","of","the","font","for","our","symbol\n","if","(","fontNames",".","length","<=","_props",".","getFtcSym","(",")",")","\n","return","null",";","\n\n","return","fontNames[_props",".","getFtcSym","(",")","]",";","\n","}","else\n","throw","new","IllegalStateException","(","\"Not","a","symbol","CharacterRun\"",")",";","\n"],"docstring_tokens":["Returns","the","symbol","font,","if","this","is","a","symbol","character","run"]}
{"code_tokens":["\n","public","short","getAxisType","(",")","\n","{","\n","return","field_1_axisType",";","\n"],"docstring_tokens":["Get","the","axis","type","field","for","the","AxisLineFormat","record"]}
{"code_tokens":["\n","public","void","setAxisType","(","short","field_1_axisType",")","\n","{","\n","this",".","field_1_axisType","=","field_1_axisType",";","\n"],"docstring_tokens":["Set","the","axis","type","field","for","the","AxisLineFormat","record"]}
{"code_tokens":["\n","@Override\n","public","boolean","equals","(","Object","obj",")","{","\n","if","(","obj","==","null",")","{","\n","return","false",";","\n","}","\n","if","(","!","obj",".","getClass","(",")",".","equals","(","this",".","getClass","(",")",")",")","{","\n","return","false",";","\n","}","\n","final","EvaluationConditionalFormatRule","r","=","(","EvaluationConditionalFormatRule",")","obj",";","\n","return","getSheet","(",")",".","getSheetName","(",")",".","equalsIgnoreCase","(","r",".","getSheet","(",")",".","getSheetName","(",")",")","\n","&&","getFormattingIndex","(",")","==","r",".","getFormattingIndex","(",")","\n","&&","getRuleIndex","(",")","==","r",".","getRuleIndex","(",")",";","\n"],"docstring_tokens":["Defined","as","equal","sheet","name","and","formatting","and","rule","indexes"]}
{"code_tokens":["\n","@Internal","(","since=\"5",".","1",".","0\"",")","\n","public","void","updateRowFormulas","(","HSSFRow","row,","FormulaShifter","formulaShifter",")","{","\n","HSSFRowColShifter",".","updateRowFormulas","(","row,","formulaShifter",")",";","\n"],"docstring_tokens":["Update","the","formulas","in","specified","row","using","the","formula","shifting","policy","specified","by","shifter"]}
{"code_tokens":["\n","public","void","setString","(","String","string",")","{","\n","_text","=","string",";","\n","_is16bitUnicode","=","StringUtil",".","hasMultibyte","(","string",")",";","\n"],"docstring_tokens":["Sets","the","string","represented","by","this","record"]}
{"code_tokens":["\n","public","void","backup","(","Graphics2D","graphics2D",")","{","\n","background","=","graphics2D",".","getBackground","(",")",";","\n","clip","=","graphics2D",".","getClip","(",")",";","\n","color","=","graphics2D",".","getColor","(",")",";","\n","composite","=","graphics2D",".","getComposite","(",")",";","\n","font","=","graphics2D",".","getFont","(",")",";","\n","paint","=","graphics2D",".","getPaint","(",")",";","\n","stroke","=","graphics2D",".","getStroke","(",")",";","\n","trans","=","graphics2D",".","getTransform","(",")",";","\n"],"docstring_tokens":["Saves","the","state","of","the","graphics2D","object"]}
{"code_tokens":["\n","public","void","restore","(","Graphics2D","graphics2D",")","{","\n","graphics2D",".","setBackground","(","background",")",";","\n","graphics2D",".","setClip","(","clip",")",";","\n","graphics2D",".","setColor","(","color",")",";","\n","graphics2D",".","setComposite","(","composite",")",";","\n","graphics2D",".","setFont","(","font",")",";","\n","graphics2D",".","setPaint","(","paint",")",";","\n","graphics2D",".","setStroke","(","stroke",")",";","\n","graphics2D",".","setTransform","(","trans",")",";","\n"],"docstring_tokens":["Retrieves","the","state","into","the","graphics2D","object"]}
{"code_tokens":["\n","@Override\n","public","int","readRecordSID","(",")","{","\n","readPlain","(","buffer,","0,","LittleEndianConsts",".","SHORT_SIZE",")",";","\n","int","sid","=","LittleEndian",".","getUShort","(","buffer,","0",")",";","\n","shouldSkipEncryptionOnCurrentRecord","=","isNeverEncryptedRecord","(","sid",")",";","\n","return","sid",";","\n"],"docstring_tokens":["Reads","an","unsigned","short","value","without","decrypting"]}
{"code_tokens":["\n","public","void","setSignatureMethodFromUri","(","final","String","signatureMethodUri",")","{","\n","switch","(","signatureMethodUri",")","{","\n","case","XMLSignature",".","ALGO_ID_SIGNATURE_RSA_SHA1:\n","setDigestAlgo","(","HashAlgorithm",".","sha1",")",";","\n","break",";","\n","case","XMLSignature",".","ALGO_ID_SIGNATURE_RSA_SHA224:\n","setDigestAlgo","(","HashAlgorithm",".","sha224",")",";","\n","break",";","\n","case","XMLSignature",".","ALGO_ID_SIGNATURE_RSA_SHA256:\n","setDigestAlgo","(","HashAlgorithm",".","sha256",")",";","\n","break",";","\n","case","XMLSignature",".","ALGO_ID_SIGNATURE_RSA_SHA384:\n","setDigestAlgo","(","HashAlgorithm",".","sha384",")",";","\n","break",";","\n","case","XMLSignature",".","ALGO_ID_SIGNATURE_RSA_SHA512:\n","setDigestAlgo","(","HashAlgorithm",".","sha512",")",";","\n","break",";","\n","case","XMLSignature",".","ALGO_ID_SIGNATURE_RSA_RIPEMD160:\n","setDigestAlgo","(","HashAlgorithm",".","ripemd160",")",";","\n","break",";","\n","default:","throw","new","EncryptedDocumentException","(","\"Hash","algorithm","\"\n","+signatureMethodUri+\"","not","supported",".","\"",")",";","\n","}","\n"],"docstring_tokens":["Set","the","digest","algorithm","based","on","the","method","uri"]}
{"code_tokens":["\n","@Override\n","public","short","getDataFormat","(",")","\n","{","\n","return","_format",".","getFormatIndex","(",")",";","\n"],"docstring_tokens":["get","the","index","of","the","format"]}
{"code_tokens":["\n","@Override\n","public","void","setFont","(","Font","font",")","{","\n","setFont","(","(","HSSFFont",")","font",")",";","\n"],"docstring_tokens":["set","the","font","for","this","style"]}
{"code_tokens":["\n","@Override\n","public","int","getFontIndex","(",")","\n","{","\n","return","_format",".","getFontIndex","(",")",";","\n"],"docstring_tokens":["gets","the","index","of","the","font","for","this","style"]}
{"code_tokens":["\n","@Override\n","public","void","setAlignment","(","HorizontalAlignment","align",")","\n","{","\n","_format",".","setIndentNotParentAlignment","(","true",")",";","\n","_format",".","setAlignment","(","align",".","getCode","(",")",")",";","\n"],"docstring_tokens":["set","the","type","of","horizontal","alignment","for","the","cell"]}
{"code_tokens":["\n","@Override\n","public","void","setIndention","(","short","indent",")","\n","{","\n","_format",".","setIndent","(","indent",")",";","\n"],"docstring_tokens":["set","the","number","of","spaces","to","indent","the","text","in","the","cell"]}
{"code_tokens":["\n","@Override\n","public","short","getIndention","(",")","\n","{","\n","return","_format",".","getIndent","(",")",";","\n"],"docstring_tokens":["get","the","number","of","spaces","to","indent","the","text","in","the","cell"]}
{"code_tokens":["\n","public","void","addEscherProperty","(","EscherProperty","prop",")","\n","{","\n","properties",".","add","(","prop",")",";","\n"],"docstring_tokens":["Add","a","property","to","this","record"]}
{"code_tokens":["\n","public","List<EscherProperty>","getEscherProperties","(",")","\n","{","\n","return","properties",";","\n"],"docstring_tokens":["The","list","of","properties","stored","by","this","record"]}
{"code_tokens":["\n","public","void","sortProperties","(",")","{","\n","properties",".","sort","(","Comparator",".","comparingInt","(","EscherProperty::getPropertyNumber",")",")",";","\n"],"docstring_tokens":["Records","should","be","sorted","by","property","number","before","being","stored"]}
{"code_tokens":["\n","@Override\n","public","void","formatValue","(","StringBuffer","toAppendTo,","Object","value",")","{","\n","if","(","value","instanceof","Number",")","{","\n","double","val","=","(","(","Number",")","value",")",".","doubleValue","(",")",";","\n","if","(","val","==","0",")","{","\n","toAppendTo",".","append","(","'0'",")",";","\n","return",";","\n","}","\n\n","String","fmt",";","\n","double","exp","=","Math",".","log10","(","Math",".","abs","(","val",")",")",";","\n","boolean","stripZeros","=","true",";","\n","if","(","exp",">","10","||","exp","<","-9",")","\n","fmt","=","\"%1",".","5E\"",";","\n","else","if","(","(","long",")","val","!=","val",")","\n","fmt","=","\"%1",".","9f\"",";","\n","else","{","\n","fmt","=","\"%1",".","0f\"",";","\n","stripZeros","=","false",";","\n","}","\n\n","try","(","Formatter","formatter","=","new","Formatter","(","toAppendTo,","locale",")",")","{","\n","formatter",".","format","(","locale,","fmt,","value",")",";","\n","}","\n","if","(","stripZeros",")","{","\n","//","strip","off","trailing","zeros\n","int","removeFrom",";","\n","if","(","fmt",".","endsWith","(","\"E\"",")",")","\n","removeFrom","=","toAppendTo",".","lastIndexOf","(","\"E\"",")","-","1",";","\n","else\n","removeFrom","=","toAppendTo",".","length","(",")","-","1",";","\n","while","(","toAppendTo",".","charAt","(","removeFrom",")","==","'0'",")","{","\n","toAppendTo",".","deleteCharAt","(","removeFrom--",")",";","\n","}","\n","if","(","toAppendTo",".","charAt","(","removeFrom",")","==","'",".","'",")","{","\n","toAppendTo",".","deleteCharAt","(","removeFrom--",")",";","\n","}","\n","}","\n","}","else","if","(","value","instanceof","Boolean",")","{","\n","toAppendTo",".","append","(","value",".","toString","(",")",".","toUpperCase","(","Locale",".","ROOT",")",")",";","\n","}","else","{","\n","toAppendTo",".","append","(","value",")",";","\n","}","\n"],"docstring_tokens":["The","general","style","is","not","quite","the","same","as","any","other,","or","any","combination","of","others"]}
{"code_tokens":["\n","public","short","getCategoryDataType","(",")","\n","{","\n","return","field_1_categoryDataType",";","\n"],"docstring_tokens":["Get","the","category","data","type","field","for","the","DefaultDataLabelTextProperties","record"]}
{"code_tokens":["\n","public","void","setCategoryDataType","(","short","field_1_categoryDataType",")","\n","{","\n","this",".","field_1_categoryDataType","=","field_1_categoryDataType",";","\n"],"docstring_tokens":["Set","the","category","data","type","field","for","the","DefaultDataLabelTextProperties","record"]}
{"code_tokens":["\n","@Override\n","public","void","simpleValue","(","StringBuffer","toAppendTo,","Object","value",")","{","\n","SIMPLE_TEXT",".","formatValue","(","toAppendTo,","value",")",";","\n"],"docstring_tokens":["For","text,","this","is","just","printing","the","text"]}
{"code_tokens":["\n","protected","void","setCellType","(","Cell","cell,","CellValue","cv",")","{","\n","CellType","cellType","=","cv",".","getCellType","(",")",";","\n","switch","(","cellType",")","{","\n","case","BOOLEAN:\n","case","ERROR:\n","case","NUMERIC:\n","case","STRING:\n","setCellType","(","cell,","cellType",")",";","\n","return",";","\n","case","BLANK:\n","//","never","happens","-","blanks","eventually","get","translated","to","zero\n","throw","new","IllegalArgumentException","(","\"This","should","never","happen",".","Blanks","eventually","get","translated","to","zero",".","\"",")",";","\n","case","FORMULA:\n","//","this","will","never","happen,","we","have","already","evaluated","the","formula\n","throw","new","IllegalArgumentException","(","\"This","should","never","happen",".","Formulas","should","have","already","been","evaluated",".","\"",")",";","\n","default:\n","throw","new","IllegalStateException","(","\"Unexpected","cell","value","type","(","\"","+","cellType","+","\"",")","\"",")",";","\n","}","\n"],"docstring_tokens":["Set","the","cell","type","based","on","the","computed","cell","type","as","part","of","a","formula","evaluation"]}
{"code_tokens":["\n","public","RootProperty","getRoot","(",")","{","\n","//","it's","always","the","first","element","in","the","List\n","return","(","RootProperty",")","_properties",".","get","(","0",")",";","\n"],"docstring_tokens":["Get","the","root","property"]}
{"code_tokens":["\n","public","void","write","(","POIFSStream","stream",")","throws","IOException","{","\n","OutputStream","os","=","stream",".","getOutputStream","(",")",";","\n","for","(","Property","property",":","_properties",")","{","\n","if","(","property","!=","null",")","{","\n","property",".","writeData","(","os",")",";","\n","}","\n","}","\n","os",".","close","(",")",";","\n\n","//","Update","the","start","position","if","needed\n","if","(","getStartBlock","(",")","!=","stream",".","getStartBlock","(",")",")","{","\n","setStartBlock","(","stream",".","getStartBlock","(",")",")",";","\n","}","\n"],"docstring_tokens":["Writes","the","properties","out","into","the","given","low-level","stream"]}
{"code_tokens":["\n","public","int","getSheetNumber","(",")","\n","{","\n","return","field_6_sheetNumber",";","\n"],"docstring_tokens":["For","named","ranges,","and","built-in","names"]}
{"code_tokens":["\n","@Override\n","public","void","serialize","(","ContinuableRecordOutput","out",")","{","\n\n","int","field_7_length_custom_menu","=","field_14_custom_menu_text",".","length","(",")",";","\n","int","field_8_length_description_text","=","field_15_description_text",".","length","(",")",";","\n","int","field_9_length_help_topic_text","=","field_16_help_topic_text",".","length","(",")",";","\n","int","field_10_length_status_bar_text","=","field_17_status_bar_text",".","length","(",")",";","\n\n","//","size","defined","below\n","out",".","writeShort","(","getOptionFlag","(",")",")",";","\n","out",".","writeByte","(","getKeyboardShortcut","(",")",")",";","\n","out",".","writeByte","(","getNameTextLength","(",")",")",";","\n","//","Note","-","formula","size","is","not","immediately","before","encoded","formula,","and","does","not","include","any","array","constant","data\n","out",".","writeShort","(","field_13_name_definition",".","getEncodedTokenSize","(",")",")",";","\n","out",".","writeShort","(","field_5_externSheetIndex_plus1",")",";","\n","out",".","writeShort","(","field_6_sheetNumber",")",";","\n","out",".","writeByte","(","field_7_length_custom_menu",")",";","\n","out",".","writeByte","(","field_8_length_description_text",")",";","\n","out",".","writeByte","(","field_9_length_help_topic_text",")",";","\n","out",".","writeByte","(","field_10_length_status_bar_text",")",";","\n","out",".","writeByte","(","field_11_nameIsMultibyte","?","1",":","0",")",";","\n\n","if","(","isBuiltInName","(",")",")","{","\n","//can","send","the","builtin","name","directly","in\n","out",".","writeByte","(","field_12_built_in_code",")",";","\n","}","else","{","\n","String","nameText","=","field_12_name_text",";","\n","if","(","field_11_nameIsMultibyte",")","{","\n","StringUtil",".","putUnicodeLE","(","nameText,","out",")",";","\n","}","else","{","\n","StringUtil",".","putCompressedUnicode","(","nameText,","out",")",";","\n","}","\n","}","\n","field_13_name_definition",".","serializeTokens","(","out",")",";","\n","field_13_name_definition",".","serializeArrayConstantData","(","out",")",";","\n\n","StringUtil",".","putCompressedUnicode","(","getCustomMenuText","(",")",",","out",")",";","\n","StringUtil",".","putCompressedUnicode","(","getDescriptionText","(",")",",","out",")",";","\n","StringUtil",".","putCompressedUnicode","(","getHelpTopicText","(",")",",","out",")",";","\n","StringUtil",".","putCompressedUnicode","(","getStatusBarText","(",")",",","out",")",";","\n"],"docstring_tokens":["NameRecord","can","span","into"]}
{"code_tokens":["\n","public","boolean","removeChildRecord","(","EscherRecord","toBeRemoved",")","{","\n","return","_childRecords",".","remove","(","toBeRemoved",")",";","\n"],"docstring_tokens":["Removes","the","given","escher","record","from","the","child","list"]}
{"code_tokens":["\n","public","void","addChildBefore","(","EscherRecord","record,","int","insertBeforeRecordId",")","{","\n","int","idx","=","0",";","\n","for","(","EscherRecord","rec",":","this",")","{","\n","if","(","rec",".","getRecordId","(",")","==","(","short",")","insertBeforeRecordId",")","{","\n","break",";","\n","}","\n","//","TODO","-","keep","looping?","Do","we","expect","multiple","matches?\n","idx++",";","\n","}","\n","_childRecords",".","add","(","idx,","record",")",";","\n"],"docstring_tokens":["Add","a","child","record","before","the","record","with","given","recordId"]}
{"code_tokens":["\n","@SuppressWarnings","(","\"PointlessArithmeticExpression\"",")","\n","public","void","write","(","final","byte[]","dst,","final","int","offset",")","\n","throws","ArrayStoreException","{","\n","/*","Check","array","size:","*/\n","if","(","dst",".","length","<","LENGTH",")","{","\n","throw","new","ArrayStoreException\n","(","\"Destination","byte[]","must","have","room","for","at","least","16","bytes,","\"","+\n","\"but","has","a","length","of","only","\"","+","dst",".","length","+","\"",".","\"",")",";","\n","}","\n\n","/*","Write","double","word",".","*/\n","dst[0","+","offset]","=","bytes[3]",";","\n","dst[1","+","offset]","=","bytes[2]",";","\n","dst[2","+","offset]","=","bytes[1]",";","\n","dst[3","+","offset]","=","bytes[0]",";","\n\n","/*","Write","first","word",".","*/\n","dst[4","+","offset]","=","bytes[5]",";","\n","dst[5","+","offset]","=","bytes[4]",";","\n\n","/*","Write","second","word",".","*/\n","dst[6","+","offset]","=","bytes[7]",";","\n","dst[7","+","offset]","=","bytes[6]",";","\n\n","/*","Write","8","bytes",".","*/\n","System",".","arraycopy","(","bytes,","8,","dst,","8","+","offset,","8",")",";","\n"],"docstring_tokens":["Writes","the","class","ID","to","a","byte","array","in","the","little-endian","format"]}
{"code_tokens":["\n","@Override\n","public","boolean","equals","(","final","Object","o",")","{","\n","return","(","o","instanceof","ClassID",")","&&","Arrays",".","equals","(","bytes,","(","(","ClassID",")","o",")",".","bytes",")",";","\n"],"docstring_tokens":["Checks","whether","this","ClassID","is","equal","to","another","object"]}
{"code_tokens":["\n","public","UUID","toUUID","(",")","{","\n","final","long","mostSigBits","=","ByteBuffer",".","wrap","(","bytes,","0,","8",")",".","getLong","(",")",";","\n","final","long","leastSigBits","=","ByteBuffer",".","wrap","(","bytes,","8,","8",")",".","getLong","(",")",";","\n","return","new","UUID","(","mostSigBits,","leastSigBits",")",";","\n"],"docstring_tokens":["Converts","the","ClassID","to","an","UUID"]}
{"code_tokens":["\n","public","TextAlign","getTextAlign","(",")","{","\n","ParagraphPropertyFetcher<TextAlign>","fetcher","=","new","ParagraphPropertyFetcher<TextAlign>","(","getLevel","(",")",")","{","\n","public","boolean","fetch","(","CTTextParagraphProperties","props",")","{","\n","if","(","props",".","isSetAlgn","(",")",")","{","\n","TextAlign","val","=","TextAlign",".","values","(",")","[props",".","getAlgn","(",")",".","intValue","(",")","-","1]",";","\n","setValue","(","val",")",";","\n","return","true",";","\n","}","\n","return","false",";","\n","}","\n","}",";","\n","fetchParagraphProperty","(","fetcher",")",";","\n","return","fetcher",".","getValue","(",")","==","null","?","TextAlign",".","LEFT",":","fetcher",".","getValue","(",")",";","\n"],"docstring_tokens":["Returns","the","alignment","that","is","applied","to","the","paragraph"]}
{"code_tokens":["\n","public","void","setBulletFontColor","(","Color","color",")","{","\n","CTTextParagraphProperties","pr","=","_p",".","isSetPPr","(",")","?","_p",".","getPPr","(",")",":","_p",".","addNewPPr","(",")",";","\n","CTColor","c","=","pr",".","isSetBuClr","(",")","?","pr",".","getBuClr","(",")",":","pr",".","addNewBuClr","(",")",";","\n","CTSRgbColor","clr","=","c",".","isSetSrgbClr","(",")","?","c",".","getSrgbClr","(",")",":","c",".","addNewSrgbClr","(",")",";","\n","clr",".","setVal","(","new","byte[]","{","(","byte",")","color",".","getRed","(",")",",","(","byte",")","color",".","getGreen","(",")",",","(","byte",")","color",".","getBlue","(",")","}",")",";","\n"],"docstring_tokens":["Set","the","color","to","be","used","on","bullet","characters","within","a","given","paragraph"]}
{"code_tokens":["\n","public","void","setIndent","(","double","value",")","{","\n","CTTextParagraphProperties","pr","=","_p",".","isSetPPr","(",")","?","_p",".","getPPr","(",")",":","_p",".","addNewPPr","(",")",";","\n","if","(","value","==","-1",")","{","\n","if","(","pr",".","isSetIndent","(",")",")","pr",".","unsetIndent","(",")",";","\n","}","else","{","\n","pr",".","setIndent","(","Units",".","toEMU","(","value",")",")",";","\n","}","\n"],"docstring_tokens":["Specifies","the","indent","size","that","will","be","applied","to","the","first","line","of","text","in","the","paragraph"]}
{"code_tokens":["\n","public","int","getLevel","(",")","{","\n","CTTextParagraphProperties","pr","=","_p",".","getPPr","(",")",";","\n","if","(","pr","==","null",")","return","0",";","\n\n","return","pr",".","getLvl","(",")",";","\n"],"docstring_tokens":["Returns","the","level","of","text","properties","that","this","paragraph","will","follow"]}
{"code_tokens":["\n","public","boolean","isBullet","(",")","{","\n","ParagraphPropertyFetcher<Boolean>","fetcher","=","new","ParagraphPropertyFetcher<Boolean>","(","getLevel","(",")",")","{","\n","public","boolean","fetch","(","CTTextParagraphProperties","props",")","{","\n","if","(","props",".","isSetBuNone","(",")",")","{","\n","setValue","(","false",")",";","\n","return","true",";","\n","}","\n","if","(","props",".","isSetBuFont","(",")",")","{","\n","if","(","props",".","isSetBuChar","(",")","||","props",".","isSetBuAutoNum","(",")",")","{","\n","setValue","(","true",")",";","\n","return","true",";","\n","}","/*else","{","\n","//","Excel","treats","text","with","buFont","but","no","char/autonum\n","//","as","not","bulleted\n","//","Possibly","the","font","is","just","used","if","bullets","turned","on","again?\n","}","*/\n","}","\n","return","false",";","\n","}","\n","}",";","\n","fetchParagraphProperty","(","fetcher",")",";","\n","return","fetcher",".","getValue","(",")","==","null","?","false",":","fetcher",".","getValue","(",")",";","\n"],"docstring_tokens":["Returns","whether","this","paragraph","has","bullets"]}
{"code_tokens":["\n","public","void","setBullet","(","boolean","flag",")","{","\n","if","(","isBullet","(",")","==","flag",")","return",";","\n\n","CTTextParagraphProperties","pr","=","_p",".","isSetPPr","(",")","?","_p",".","getPPr","(",")",":","_p",".","addNewPPr","(",")",";","\n","if","(","!flag",")","{","\n","pr",".","addNewBuNone","(",")",";","\n\n","if","(","pr",".","isSetBuAutoNum","(",")",")","pr",".","unsetBuAutoNum","(",")",";","\n","if","(","pr",".","isSetBuBlip","(",")",")","pr",".","unsetBuBlip","(",")",";","\n","if","(","pr",".","isSetBuChar","(",")",")","pr",".","unsetBuChar","(",")",";","\n","if","(","pr",".","isSetBuClr","(",")",")","pr",".","unsetBuClr","(",")",";","\n","if","(","pr",".","isSetBuClrTx","(",")",")","pr",".","unsetBuClrTx","(",")",";","\n","if","(","pr",".","isSetBuFont","(",")",")","pr",".","unsetBuFont","(",")",";","\n","if","(","pr",".","isSetBuFontTx","(",")",")","pr",".","unsetBuFontTx","(",")",";","\n","if","(","pr",".","isSetBuSzPct","(",")",")","pr",".","unsetBuSzPct","(",")",";","\n","if","(","pr",".","isSetBuSzPts","(",")",")","pr",".","unsetBuSzPts","(",")",";","\n","if","(","pr",".","isSetBuSzTx","(",")",")","pr",".","unsetBuSzTx","(",")",";","\n","}","else","{","\n","if","(","pr",".","isSetBuNone","(",")",")","pr",".","unsetBuNone","(",")",";","\n","if","(","!pr",".","isSetBuFont","(",")",")","pr",".","addNewBuFont","(",")",".","setTypeface","(","\"Arial\"",")",";","\n","if","(","!pr",".","isSetBuAutoNum","(",")",")","pr",".","addNewBuChar","(",")",".","setChar","(","\"\\u2022\"",")",";","\n","}","\n"],"docstring_tokens":["Set","or","unset","this","paragraph","as","a","bullet","point"]}
{"code_tokens":["\n","public","void","setBullet","(","ListAutoNumber","scheme,","int","startAt",")","{","\n","if","(","startAt","<","1",")","throw","new","IllegalArgumentException","(","\"Start","Number","must","be","greater","or","equal","that","1\"",")",";","\n","CTTextParagraphProperties","pr","=","_p",".","isSetPPr","(",")","?","_p",".","getPPr","(",")",":","_p",".","addNewPPr","(",")",";","\n","CTTextAutonumberBullet","lst","=","pr",".","isSetBuAutoNum","(",")","?","pr",".","getBuAutoNum","(",")",":","pr",".","addNewBuAutoNum","(",")",";","\n","lst",".","setType","(","STTextAutonumberScheme",".","Enum",".","forInt","(","scheme",".","ordinal","(",")","+","1",")",")",";","\n","lst",".","setStartAt","(","startAt",")",";","\n\n","if","(","!pr",".","isSetBuFont","(",")",")","pr",".","addNewBuFont","(",")",".","setTypeface","(","\"Arial\"",")",";","\n","if","(","pr",".","isSetBuNone","(",")",")","pr",".","unsetBuNone","(",")",";","\n","//","remove","these","elements","if","present","as","it","results","in","invalid","content","when","opening","in","Excel",".","\n","if","(","pr",".","isSetBuBlip","(",")",")","pr",".","unsetBuBlip","(",")",";","\n","if","(","pr",".","isSetBuChar","(",")",")","pr",".","unsetBuChar","(",")",";","\n"],"docstring_tokens":["Set","this","paragraph","as","an","automatic","numbered","bullet","point"]}
{"code_tokens":["\n","public","boolean","isBulletAutoNumber","(",")","{","\n","ParagraphPropertyFetcher<Boolean>","fetcher","=","new","ParagraphPropertyFetcher<Boolean>","(","getLevel","(",")",")","{","\n","public","boolean","fetch","(","CTTextParagraphProperties","props",")","{","\n","if","(","props",".","isSetBuAutoNum","(",")",")","{","\n","setValue","(","true",")",";","\n","return","true",";","\n","}","\n","return","false",";","\n","}","\n","}",";","\n","fetchParagraphProperty","(","fetcher",")",";","\n","return","fetcher",".","getValue","(",")","==","null","?","false",":","fetcher",".","getValue","(",")",";","\n"],"docstring_tokens":["Returns","whether","this","paragraph","has","automatic","numbered","bullets"]}
{"code_tokens":["\n","public","int","getBulletAutoNumberStart","(",")","{","\n","ParagraphPropertyFetcher<Integer>","fetcher","=","new","ParagraphPropertyFetcher<Integer>","(","getLevel","(",")",")","{","\n","public","boolean","fetch","(","CTTextParagraphProperties","props",")","{","\n","if","(","props",".","isSetBuAutoNum","(",")","&&","props",".","getBuAutoNum","(",")",".","isSetStartAt","(",")",")","{","\n","setValue","(","props",".","getBuAutoNum","(",")",".","getStartAt","(",")",")",";","\n","return","true",";","\n","}","\n","return","false",";","\n","}","\n","}",";","\n","fetchParagraphProperty","(","fetcher",")",";","\n","return","fetcher",".","getValue","(",")","==","null","?","0",":","fetcher",".","getValue","(",")",";","\n"],"docstring_tokens":["Returns","the","starting","number","if","this","paragraph","has","automatic","numbered","bullets,","otherwise","returns","0"]}
{"code_tokens":["\n","public","ListAutoNumber","getBulletAutoNumberScheme","(",")","{","\n","ParagraphPropertyFetcher<ListAutoNumber>","fetcher","=","new","ParagraphPropertyFetcher<ListAutoNumber>","(","getLevel","(",")",")","{","\n","public","boolean","fetch","(","CTTextParagraphProperties","props",")","{","\n","if","(","props",".","isSetBuAutoNum","(",")",")","{","\n","setValue","(","ListAutoNumber",".","values","(",")","[props",".","getBuAutoNum","(",")",".","getType","(",")",".","intValue","(",")","-","1]",")",";","\n","return","true",";","\n","}","\n","return","false",";","\n","}","\n","}",";","\n","fetchParagraphProperty","(","fetcher",")",";","\n\n","//","Note:","documentation","does","not","define","a","default,","return","ListAutoNumber",".","ARABIC_PLAIN","(","1,2,3",".",".",".",")","\n","return","fetcher",".","getValue","(",")","==","null","?","ListAutoNumber",".","ARABIC_PLAIN",":","fetcher",".","getValue","(",")",";","\n"],"docstring_tokens":["Returns","the","auto","number","scheme","if","this","paragraph","has","automatic","numbered","bullets,","otherwise","returns","ListAutoNumber.ARABIC_PLAIN"]}
{"code_tokens":["\n","public","short","getFormatFlags","(",")","\n","{","\n","return","field_1_formatFlags",";","\n"],"docstring_tokens":["Get","the","format","flags","field","for","the","Area","record"]}
{"code_tokens":["\n","public","void","setFormatFlags","(","short","field_1_formatFlags",")","\n","{","\n","this",".","field_1_formatFlags","=","field_1_formatFlags",";","\n"],"docstring_tokens":["Set","the","format","flags","field","for","the","Area","record"]}
{"code_tokens":["\n","public","void","setUID","(","byte[]","uid",")","{","\n","if","(","uid","==","null","||","uid",".","length","!=","16",")","{","\n","throw","new","IllegalArgumentException","(","\"uid","must","be","byte[16]\"",")",";","\n","}","\n","System",".","arraycopy","(","uid,","0,","field_1_UID,","0,","field_1_UID",".","length",")",";","\n"],"docstring_tokens":["Sets","the","first","MD4,","that","specifies","the","unique","identifier","of","the","uncompressed","blip","data"]}
{"code_tokens":["\n","public","void","setPrimaryUID","(","byte[]","primaryUID",")","{","\n","if","(","primaryUID","==","null","||","primaryUID",".","length","!=","16",")","{","\n","throw","new","IllegalArgumentException","(","\"primaryUID","must","be","byte[16]\"",")",";","\n","}","\n","System",".","arraycopy","(","primaryUID,","0,","field_2_UID,","0,","field_2_UID",".","length",")",";","\n"],"docstring_tokens":["Sets","the","second","MD4,","that","specifies","the","unique","identifier","of","the","uncompressed","blip","data"]}
{"code_tokens":["\n","public","Rectangle","getBounds","(",")","{","\n","return","new","Rectangle","(","field_3_rcBounds_x1,\n","field_3_rcBounds_y1,\n","field_3_rcBounds_x2","-","field_3_rcBounds_x1,\n","field_3_rcBounds_y2","-","field_3_rcBounds_y1",")",";","\n"],"docstring_tokens":["Get","the","clipping","region","of","the","metafile"]}
{"code_tokens":["\n","public","void","setSizeEMU","(","Dimension","sizeEMU",")","{","\n","field_4_ptSize_w","=","sizeEMU",".","width",";","\n","field_4_ptSize_h","=","sizeEMU",".","height",";","\n"],"docstring_tokens":["Gets","the","dimensions","of","the","metafile"]}
{"code_tokens":["\n","public","boolean","isCompressed","(",")","{","\n","return","(","field_6_fCompression","==","0",")",";","\n"],"docstring_tokens":["Gets","the","compression","of","the","metafile"]}
{"code_tokens":["\n","public","short","getSignature","(",")","{","\n","switch","(","EscherRecordTypes",".","forTypeID","(","getRecordId","(",")",")",")","{","\n","case","BLIP_EMF:","return","HSSFPictureData",".","MSOBI_EMF",";","\n","case","BLIP_WMF:","return","HSSFPictureData",".","MSOBI_WMF",";","\n","case","BLIP_PICT:","return","HSSFPictureData",".","MSOBI_PICT",";","\n","}","\n","LOGGER",".","atWarn","(",")",".","log","(","\"Unknown","metafile:","{","}","\",","box","(","getRecordId","(",")",")",")",";","\n","return","0",";","\n"],"docstring_tokens":["Return","the","blip","signature"]}
{"code_tokens":["\n","public","static","CFRule12Record","create","(","HSSFSheet","sheet,","ExtendedColor","color",")","{","\n","CFRule12Record","r","=","new","CFRule12Record","(","CONDITION_TYPE_DATA_BAR,\n","ComparisonOperator",".","NO_COMPARISON",")",";","\n","DataBarFormatting","dbf","=","r",".","createDataBarFormatting","(",")",";","\n","dbf",".","setColor","(","color",")",";","\n","dbf",".","setPercentMin","(","(","byte",")","0",")",";","\n","dbf",".","setPercentMax","(","(","byte",")","100",")",";","\n\n","DataBarThreshold","min","=","new","DataBarThreshold","(",")",";","\n","min",".","setType","(","RangeType",".","MIN",".","id",")",";","\n","dbf",".","setThresholdMin","(","min",")",";","\n\n","DataBarThreshold","max","=","new","DataBarThreshold","(",")",";","\n","max",".","setType","(","RangeType",".","MAX",".","id",")",";","\n","dbf",".","setThresholdMax","(","max",")",";","\n\n","return","r",";","\n"],"docstring_tokens":["Creates","a","new","Data","Bar","formatting"]}
{"code_tokens":["\n","public","static","String","getFilename","(","URI","uri",")","{","\n","if","(","uri","!=","null",")","{","\n","String","path","=","uri",".","getPath","(",")",";","\n","int","len","=","path",".","length","(",")",";","\n","int","num2","=","len",";","\n","while","(","--num2",">=","0",")","{","\n","char","ch1","=","path",".","charAt","(","num2",")",";","\n","if","(","ch1","==","PackagingURIHelper",".","FORWARD_SLASH_CHAR",")","\n","return","path",".","substring","(","num2","+","1,","len",")",";","\n","}","\n","}","\n","return","\"\"",";","\n"],"docstring_tokens":["Get","file","name","from","the","specified","URI"]}
{"code_tokens":["\n","public","static","String","combine","(","String","prefix,","String","suffix",")","{","\n","if","(","!prefix",".","endsWith","(","FORWARD_SLASH_STRING",")","&&","!suffix",".","startsWith","(","FORWARD_SLASH_STRING",")",")","\n","return","prefix","+","FORWARD_SLASH_CHAR","+","suffix",";","\n","else","if","(","prefix",".","endsWith","(","FORWARD_SLASH_STRING",")","^","suffix",".","startsWith","(","FORWARD_SLASH_STRING",")",")","\n","return","prefix","+","suffix",";","\n","else\n","return","\"\"",";","\n"],"docstring_tokens":["Combine","a","string","URI","with","a","prefix","and","a","suffix"]}
{"code_tokens":["\n","public","static","URI","relativizeURI","(","URI","sourceURI,","URI","targetURI,","boolean","msCompatible",")","{","\n","StringBuilder","retVal","=","new","StringBuilder","(",")",";","\n","String[]","segmentsSource","=","sourceURI",".","getPath","(",")",".","split","(","\"/\",","-1",")",";","\n","String[]","segmentsTarget","=","targetURI",".","getPath","(",")",".","split","(","\"/\",","-1",")",";","\n\n","//","If","the","source","URI","is","empty\n","if","(","segmentsSource",".","length","==","0",")","{","\n","throw","new","IllegalArgumentException","(","\n","\"Can't","relativize","an","empty","source","URI","!\"",")",";","\n","}","\n\n","//","If","target","URI","is","empty\n","if","(","segmentsTarget",".","length","==","0",")","{","\n","throw","new","IllegalArgumentException","(","\n","\"Can't","relativize","an","empty","target","URI","!\"",")",";","\n","}","\n\n","//","If","the","source","is","the","root,","then","the","relativized\n","//","form","must","actually","be","an","absolute","URI\n","if","(","sourceURI",".","toString","(",")",".","equals","(","\"/\"",")",")","{","\n","String","path","=","targetURI",".","getPath","(",")",";","\n","if","(","msCompatible","&&","path",".","length","(",")",">","0","&&","path",".","charAt","(","0",")","==","'/'",")","{","\n","try","{","\n","targetURI","=","new","URI","(","path",".","substring","(","1",")",")",";","\n","}","catch","(","Exception","e",")","{","\n","LOG",".","atWarn","(",")",".","withThrowable","(","e",")",".","log","(","\"Failed","to","relativize\"",")",";","\n","return","null",";","\n","}","\n","}","\n","return","targetURI",";","\n","}","\n\n\n","//","Relativize","the","source","URI","against","the","target","URI",".","\n","//","First","up,","figure","out","how","many","steps","along","we","can","go\n","//","and","still","have","them","be","the","same\n","int","segmentsTheSame","=","0",";","\n","for","(","int","i","=","0",";","i","<","segmentsSource",".","length","&&","i","<","segmentsTarget",".","length",";","i++",")","{","\n","if","(","segmentsSource[i]",".","equals","(","segmentsTarget[i]",")",")","{","\n","//","Match","so","far,","good\n","segmentsTheSame++",";","\n","}","else","{","\n","break",";","\n","}","\n","}","\n\n","//","If","we","didn't","have","a","good","match","or","at","least","except","a","first","empty","element\n","if","(","(","segmentsTheSame","==","0","||","segmentsTheSame","==","1",")","&&\n","segmentsSource[0]",".","isEmpty","(",")","&&","segmentsTarget[0]",".","isEmpty","(",")",")","{","\n","for","(","int","i","=","0",";","i","<","segmentsSource",".","length","-","2",";","i++",")","{","\n","retVal",".","append","(","\"",".",".","/\"",")",";","\n","}","\n","for","(","int","i","=","0",";","i","<","segmentsTarget",".","length",";","i++",")","{","\n","if","(","segmentsTarget[i]",".","isEmpty","(",")",")","\n","continue",";","\n","retVal",".","append","(","segmentsTarget[i]",")",";","\n","if","(","i","!=","segmentsTarget",".","length","-","1",")","\n","retVal",".","append","(","\"/\"",")",";","\n","}","\n\n","try","{","\n","return","new","URI","(","retVal",".","toString","(",")",")",";","\n","}","catch","(","Exception","e",")","{","\n","LOG",".","atWarn","(",")",".","withThrowable","(","e",")",".","log","(","\"Failed","to","relativize\"",")",";","\n","return","null",";","\n","}","\n","}","\n\n","//","Special","case","for","where","the","two","are","the","same\n","if","(","segmentsTheSame","==","segmentsSource",".","length\n","&&","segmentsTheSame","==","segmentsTarget",".","length",")","{","\n","if","(","sourceURI",".","equals","(","targetURI",")",")","{","\n","//","if","source","and","target","are","the","same","they","should","be","resolved","to","the","last","segment,\n","//","Example:","if","a","slide","references","itself,","e",".","g",".","the","source","URI","is\n","//","\"/ppt/slides/slide1",".","xml\"","and","the","targetURI","is","\"slide1",".","xml\"","then\n","//","this","it","should","be","relativized","as","\"slide1",".","xml\",","i",".","e",".","the","last","segment",".","\n","retVal",".","append","(","segmentsSource[segmentsSource",".","length","-","1]",")",";","\n","}","\n\n","}","else","{","\n","//","Matched","for","so","long,","but","no","more\n\n","//","Do","we","need","to","go","up","a","directory","or","two","from\n","//","the","source","to","get","here?\n","//","(","If","it's","all","the","way","up,","then","don't","bother!",")","\n","if","(","segmentsTheSame","==","1",")","{","\n","retVal",".","append","(","\"/\"",")",";","\n","}","else","{","\n","for","(","int","j","=","segmentsTheSame",";","j","<","segmentsSource",".","length","-","1",";","j++",")","{","\n","retVal",".","append","(","\"",".",".","/\"",")",";","\n","}","\n","}","\n\n","//","Now","go","from","here","on","down\n","for","(","int","j","=","segmentsTheSame",";","j","<","segmentsTarget",".","length",";","j++",")","{","\n","if","(","retVal",".","length","(",")",">","0\n","&&","retVal",".","charAt","(","retVal",".","length","(",")","-","1",")","!=","'/'",")","{","\n","retVal",".","append","(","\"/\"",")",";","\n","}","\n","retVal",".","append","(","segmentsTarget[j]",")",";","\n","}","\n","}","\n\n","//","if","the","target","had","a","fragment","then","append","it","to","the","result\n","String","fragment","=","targetURI",".","getRawFragment","(",")",";","\n","if","(","fragment","!=","null",")","{","\n","retVal",".","append","(","\"#\"",")",".","append","(","fragment",")",";","\n","}","\n\n","try","{","\n","return","new","URI","(","retVal",".","toString","(",")",")",";","\n","}","catch","(","Exception","e",")","{","\n","LOG",".","atWarn","(",")",".","withThrowable","(","e",")",".","log","(","\"Failed","to","relativize\"",")",";","\n","return","null",";","\n","}","\n"],"docstring_tokens":["Fully","relativize","the","source","part","URI","against","the","target","part","URI"]}
{"code_tokens":["\n","public","static","URI","resolvePartUri","(","URI","sourcePartUri,","URI","targetUri",")","{","\n","if","(","sourcePartUri","==","null","||","sourcePartUri",".","isAbsolute","(",")",")","{","\n","throw","new","IllegalArgumentException","(","\"sourcePartUri","invalid","-","\"\n","+","sourcePartUri",")",";","\n","}","\n\n","if","(","targetUri","==","null","||","targetUri",".","isAbsolute","(",")",")","{","\n","throw","new","IllegalArgumentException","(","\"targetUri","invalid","-","\"\n","+","targetUri",")",";","\n","}","\n\n","return","sourcePartUri",".","resolve","(","targetUri",")",";","\n"],"docstring_tokens":["Resolve","a","source","uri","against","a","target"]}
{"code_tokens":["\n","public","static","URI","getURIFromPath","(","String","path",")","{","\n","URI","retUri",";","\n","try","{","\n","retUri","=","toURI","(","path",")",";","\n","}","catch","(","URISyntaxException","e",")","{","\n","throw","new","IllegalArgumentException","(","\"path\"",")",";","\n","}","\n","return","retUri",";","\n"],"docstring_tokens":["Get","URI","from","a","string","path"]}
{"code_tokens":["\n","public","static","PackagePartName","createPartName","(","URI","partUri",")","\n","throws","InvalidFormatException","{","\n","if","(","partUri","==","null",")","\n","throw","new","IllegalArgumentException","(","\"partName\"",")",";","\n\n","return","new","PackagePartName","(","partUri,","true",")",";","\n"],"docstring_tokens":["Create","an","OPC","compliant","part","name","by","throwing","an","exception","if","the","URI","is","not","valid"]}
{"code_tokens":["\n","public","static","PackagePartName","createPartName","(","String","partName,\n","PackagePart","relativePart",")","throws","InvalidFormatException","{","\n","URI","newPartNameURI",";","\n","try","{","\n","newPartNameURI","=","resolvePartUri","(","\n","relativePart",".","getPartName","(",")",".","getURI","(",")",",","new","URI","(","partName",")",")",";","\n","}","catch","(","URISyntaxException","e",")","{","\n","throw","new","InvalidFormatException","(","e",".","getMessage","(",")",")",";","\n","}","\n","return","createPartName","(","newPartNameURI",")",";","\n"],"docstring_tokens":["Create","an","OPC","compliant","part","name","by","resolving","it","using","a","base","part"]}
{"code_tokens":["\n","public","static","FuncVarPtg","create","(","String","pName,","int","numArgs",")","{","\n","return","create","(","numArgs,","lookupIndex","(","pName",")",")",";","\n"],"docstring_tokens":["Create","a","function","ptg","from","a","string","tokenised","by","the","parser"]}
{"code_tokens":["\n","@Internal\n","public","CTSlideIdList","getSlideReferences","(",")","{","\n","if","(","!","getPresentation","(",")",".","isSetSldIdLst","(",")",")","{","\n","getPresentation","(",")",".","setSldIdLst","(","CTSlideIdList",".","Factory",".","newInstance","(",")",")",";","\n","}","\n","return","getPresentation","(",")",".","getSldIdLst","(",")",";","\n"],"docstring_tokens":["Returns","the","references","from","the","presentation","to","its","slides"]}
{"code_tokens":["\n","@Internal\n","public","CTSlideMasterIdList","getSlideMasterReferences","(",")","{","\n","return","getPresentation","(",")",".","getSldMasterIdLst","(",")",";","\n"],"docstring_tokens":["Returns","the","references","from","the","presentation","to","its","slide","masters"]}
{"code_tokens":["\n","public","ValueEval","getDynamicReference","(","String","workbookName,","String","sheetName,","String","refStrPart1,\n","String","refStrPart2,","boolean","isA1Style",")","{","\n","SheetRefEvaluator","se","=","createExternSheetRefEvaluator","(","workbookName,","sheetName",")",";","\n","if","(","se","==","null",")","{","\n","return","ErrorEval",".","REF_INVALID",";","\n","}","\n","SheetRangeEvaluator","sre","=","new","SheetRangeEvaluator","(","_sheetIndex,","se",")",";","\n\n","SpreadsheetVersion","ssVersion","=","_workbook",".","getSpreadsheetVersion","(",")",";","\n\n","NameType","part1refType","=","isA1Style","?","classifyCellReference","(","refStrPart1,","ssVersion",")",":","getR1C1CellType","(","refStrPart1",")",";","\n","switch","(","part1refType",")","{","\n","case","BAD_CELL_OR_NAMED_RANGE:\n","return","ErrorEval",".","REF_INVALID",";","\n","case","NAMED_RANGE:\n","EvaluationName","nm","=","_workbook",".","getName","(","refStrPart1,","_sheetIndex",")",";","\n","if","(","nm","==","null",")","{","\n","throw","new","RuntimeException","(","\"Specified","name","'\"","+","refStrPart1","+\n","\"'","is","not","found","in","the","workbook","(","sheetIndex=\"","+","_sheetIndex","+","\"",")",".","\"",")",";","\n","}","\n","if","(","!nm",".","isRange","(",")",")","{","\n","throw","new","RuntimeException","(","\"Specified","name","'\"","+","refStrPart1","+","\"'","is","not","a","range","as","expected",".","\"",")",";","\n","}","\n","return","_bookEvaluator",".","evaluateNameFormula","(","nm",".","getNameDefinition","(",")",",","this",")",";","\n","}","\n","if","(","refStrPart2","==","null",")","{","\n","//","no","':'\n","switch","(","part1refType",")","{","\n","case","COLUMN:\n","if","(","isA1Style",")","{","\n","return","ErrorEval",".","REF_INVALID",";","\n","}","else","{","\n","try","{","\n","String","upRef","=","refStrPart1",".","toUpperCase","(","LocaleUtil",".","getUserLocale","(",")",")",";","\n","int","cpos","=","upRef",".","indexOf","(","'C'",")",";","\n","String","cval","=","refStrPart1",".","substring","(","cpos","+","1",")",".","trim","(",")",";","\n","int","absoluteC",";","\n","if","(","cval",".","startsWith","(","\"[\"",")","&&","cval",".","endsWith","(","\"]\"",")",")","{","\n","int","relativeC","=","Integer",".","parseInt","(","cval",".","substring","(","1,","cval",".","length","(",")","-","1",")",".","trim","(",")",")",";","\n","absoluteC","=","getColumnIndex","(",")","+","relativeC",";","\n","}","else","if","(","!cval",".","isEmpty","(",")",")","{","\n","absoluteC","=","Integer",".","parseInt","(","cval",")","-","1",";","\n","}","else","{","\n","return","ErrorEval",".","REF_INVALID",";","\n","}","\n","return","new","LazyAreaEval","(","0,","absoluteC,","ssVersion",".","getLastRowIndex","(",")",",","absoluteC,","sre",")",";","\n","}","catch","(","Exception","e",")","{","\n","return","ErrorEval",".","REF_INVALID",";","\n","}","\n","}","\n","case","ROW:\n","if","(","isA1Style",")","{","\n","return","ErrorEval",".","REF_INVALID",";","\n","}","else","{","\n","try","{","\n","String","upRef","=","refStrPart1",".","toUpperCase","(","LocaleUtil",".","getUserLocale","(",")",")",";","\n","int","rpos","=","upRef",".","indexOf","(","'R'",")",";","\n","String","rval","=","refStrPart1",".","substring","(","rpos","+","1",")",".","trim","(",")",";","\n","int","absoluteR",";","\n","if","(","rval",".","startsWith","(","\"[\"",")","&&","rval",".","endsWith","(","\"]\"",")",")","{","\n","int","relativeR","=","Integer",".","parseInt","(","rval",".","substring","(","1,","rval",".","length","(",")","-","1",")",".","trim","(",")",")",";","\n","absoluteR","=","getRowIndex","(",")","+","relativeR",";","\n","}","else","if","(","!rval",".","isEmpty","(",")",")","{","\n","absoluteR","=","Integer",".","parseInt","(","rval",")","-","1",";","\n","}","else","{","\n","return","ErrorEval",".","REF_INVALID",";","\n","}","\n","return","new","LazyAreaEval","(","absoluteR,","0,","absoluteR,","ssVersion",".","getLastColumnIndex","(",")",",","sre",")",";","\n","}","catch","(","Exception","e",")","{","\n","return","ErrorEval",".","REF_INVALID",";","\n","}","\n","}","\n","case","CELL:\n","CellReference","cr",";","\n","if","(","isA1Style",")","{","\n","cr","=","new","CellReference","(","refStrPart1",")",";","\n","}","else","{","\n","cr","=","applyR1C1Reference","(","new","CellReference","(","getRowIndex","(",")",",","getColumnIndex","(",")",")",",","refStrPart1",")",";","\n","}","\n","return","new","LazyRefEval","(","cr",".","getRow","(",")",",","cr",".","getCol","(",")",",","sre",")",";","\n","}","\n","throw","new","IllegalStateException","(","\"Unexpected","reference","classification","of","'\"","+","refStrPart1","+","\"'",".","\"",")",";","\n","}","\n","NameType","part2refType","=","isA1Style","?","classifyCellReference","(","refStrPart2,","ssVersion",")",":","getR1C1CellType","(","refStrPart2",")",";","\n","switch","(","part2refType",")","{","\n","case","BAD_CELL_OR_NAMED_RANGE:\n","return","ErrorEval",".","REF_INVALID",";","\n","case","NAMED_RANGE:\n","throw","new","RuntimeException","(","\"Cannot","evaluate","'\"","+","refStrPart1\n","+","\"'",".","Indirect","evaluation","of","defined","names","not","supported","yet\"",")",";","\n","}","\n\n","if","(","part2refType","!=","part1refType",")","{","\n","//","LHS","and","RHS","of","':'","must","be","compatible\n","return","ErrorEval",".","REF_INVALID",";","\n","}","\n","int","firstRow,","firstCol,","lastRow,","lastCol",";","\n","switch","(","part1refType",")","{","\n","case","COLUMN:\n","firstRow","=","0",";","\n","lastRow","=","ssVersion",".","getLastRowIndex","(",")",";","\n","firstCol","=","parseRowRef","(","refStrPart1",")",";","\n","lastCol","=","parseRowRef","(","refStrPart2",")",";","\n","break",";","\n","case","ROW:\n","//","support","of","cell","range","in","the","form","of","integer:integer\n","firstCol","=","0",";","\n","lastCol","=","ssVersion",".","getLastColumnIndex","(",")",";","\n","firstRow","=","parseColRef","(","refStrPart1",")",";","\n","lastRow","=","parseColRef","(","refStrPart2",")",";","\n","break",";","\n","case","CELL:\n","CellReference","cr",";","\n","if","(","isA1Style",")","{","\n","cr","=","new","CellReference","(","refStrPart1",")",";","\n","}","else","{","\n","cr","=","applyR1C1Reference","(","new","CellReference","(","getRowIndex","(",")",",","getColumnIndex","(",")",")",",","refStrPart1",")",";","\n","}","\n","firstRow","=","cr",".","getRow","(",")",";","\n","firstCol","=","cr",".","getCol","(",")",";","\n","if","(","isA1Style",")","{","\n","cr","=","new","CellReference","(","refStrPart2",")",";","\n","}","else","{","\n","cr","=","applyR1C1Reference","(","new","CellReference","(","getRowIndex","(",")",",","getColumnIndex","(",")",")",",","refStrPart2",")",";","\n","}","\n","lastRow","=","cr",".","getRow","(",")",";","\n","lastCol","=","cr",".","getCol","(",")",";","\n","break",";","\n","default:\n","throw","new","IllegalStateException","(","\"Unexpected","reference","classification","of","'\"","+","refStrPart1","+","\"'",".","\"",")",";","\n","}","\n","return","new","LazyAreaEval","(","firstRow,","firstCol,","lastRow,","lastCol,","sre",")",";","\n"],"docstring_tokens":["Resolves","a","cell","or","area","reference","dynamically"]}
{"code_tokens":["\n","public","short","getOptions","(",")","\n","{","\n","return","field_1_options",";","\n"],"docstring_tokens":["Get","the","options","field","for","the","Dat","record"]}
{"code_tokens":["\n","public","void","setOptions","(","short","field_1_options",")","\n","{","\n","this",".","field_1_options","=","field_1_options",";","\n"],"docstring_tokens":["Set","the","options","field","for","the","Dat","record"]}
{"code_tokens":["\n","public","void","setWidth","(","Double","width",")","{","\n","if","(","width","==","null",")","{","\n","if","(","props",".","isSetW","(",")",")","{","\n","props",".","unsetW","(",")",";","\n","}","\n","}","else","{","\n","props",".","setW","(","Units",".","toEMU","(","width",")",")",";","\n","}","\n"],"docstring_tokens":["Internally","converts","the","width","to","EMU","units"]}
{"code_tokens":["\n","public","String","toString","(",")","{","\n","return","getText","(",")",";","\n"],"docstring_tokens":["Gets","a","string","representation","of","this","object,","primarily","for","debugging"]}
{"code_tokens":["\n","public","void","unlink","(","SharedFormulaRecord","sharedFormulaRecord",")","{","\n","SharedFormulaGroup","svg","=","_groupsBySharedFormulaRecord",".","remove","(","sharedFormulaRecord",")",";","\n","if","(","svg","==","null",")","{","\n","throw","new","IllegalStateException","(","\"Failed","to","find","formulas","for","shared","formula\"",")",";","\n","}","\n","_groupsCache","=","null",";","//","be","sure","to","reset","cached","value\n","svg",".","unlinkSharedFormulas","(",")",";","\n"],"docstring_tokens":["Converts","all","FormulaRecords","handled","by","sharedFormulaRecord","to","plain","unshared","formulas"]}
{"code_tokens":["\n","public","int","getXAxisUpperLeft","(",")","\n","{","\n","return","field_1_xAxisUpperLeft",";","\n"],"docstring_tokens":["Get","the","x","axis","upper","left","field","for","the","Legend","record"]}
{"code_tokens":["\n","public","void","setXAxisUpperLeft","(","int","field_1_xAxisUpperLeft",")","\n","{","\n","this",".","field_1_xAxisUpperLeft","=","field_1_xAxisUpperLeft",";","\n"],"docstring_tokens":["Set","the","x","axis","upper","left","field","for","the","Legend","record"]}
{"code_tokens":["\n","public","int","getYAxisUpperLeft","(",")","\n","{","\n","return","field_2_yAxisUpperLeft",";","\n"],"docstring_tokens":["Get","the","y","axis","upper","left","field","for","the","Legend","record"]}
{"code_tokens":["\n","public","void","setYAxisUpperLeft","(","int","field_2_yAxisUpperLeft",")","\n","{","\n","this",".","field_2_yAxisUpperLeft","=","field_2_yAxisUpperLeft",";","\n"],"docstring_tokens":["Set","the","y","axis","upper","left","field","for","the","Legend","record"]}
{"code_tokens":["\n","public","int","getXSize","(",")","\n","{","\n","return","field_3_xSize",";","\n"],"docstring_tokens":["Get","the","x","size","field","for","the","Legend","record"]}
{"code_tokens":["\n","public","void","setXSize","(","int","field_3_xSize",")","\n","{","\n","this",".","field_3_xSize","=","field_3_xSize",";","\n"],"docstring_tokens":["Set","the","x","size","field","for","the","Legend","record"]}
{"code_tokens":["\n","public","int","getYSize","(",")","\n","{","\n","return","field_4_ySize",";","\n"],"docstring_tokens":["Get","the","y","size","field","for","the","Legend","record"]}
{"code_tokens":["\n","public","void","setYSize","(","int","field_4_ySize",")","\n","{","\n","this",".","field_4_ySize","=","field_4_ySize",";","\n"],"docstring_tokens":["Set","the","y","size","field","for","the","Legend","record"]}
{"code_tokens":["\n","public","byte","getType","(",")","\n","{","\n","return","field_5_type",";","\n"],"docstring_tokens":["Get","the","type","field","for","the","Legend","record"]}
{"code_tokens":["\n","public","void","setType","(","byte","field_5_type",")","\n","{","\n","this",".","field_5_type","=","field_5_type",";","\n"],"docstring_tokens":["Set","the","type","field","for","the","Legend","record"]}
{"code_tokens":["\n","public","byte","getSpacing","(",")","\n","{","\n","return","field_6_spacing",";","\n"],"docstring_tokens":["Get","the","spacing","field","for","the","Legend","record"]}
{"code_tokens":["\n","public","void","setSpacing","(","byte","field_6_spacing",")","\n","{","\n","this",".","field_6_spacing","=","field_6_spacing",";","\n"],"docstring_tokens":["Set","the","spacing","field","for","the","Legend","record"]}
{"code_tokens":["\n","public","short","getOptions","(",")","\n","{","\n","return","field_7_options",";","\n"],"docstring_tokens":["Get","the","options","field","for","the","Legend","record"]}
{"code_tokens":["\n","public","void","setOptions","(","short","field_7_options",")","\n","{","\n","this",".","field_7_options","=","field_7_options",";","\n"],"docstring_tokens":["Set","the","options","field","for","the","Legend","record"]}
{"code_tokens":["\n","public","boolean","isAutoXPositioning","(",")","\n","{","\n","return","autoXPositioning",".","isSet","(","field_7_options",")",";","\n"],"docstring_tokens":["position","of","legend","on","the","x","axis","is","automatic"]}
{"code_tokens":["\n","public","boolean","isAutoYPositioning","(",")","\n","{","\n","return","autoYPositioning",".","isSet","(","field_7_options",")",";","\n"],"docstring_tokens":["position","of","legend","on","the","y","axis","is","automatic"]}
{"code_tokens":["\n","@Override\n","public","HyperlinkType","getType","(",")","{","\n","switch","(","info",".","getInteractiveInfoAtom","(",")",".","getHyperlinkType","(",")",")","{","\n","case","InteractiveInfoAtom",".","LINK_Url:\n","return","(","exHyper",".","getLinkURL","(",")",".","startsWith","(","\"mailto:\"",")",")","?","HyperlinkType",".","EMAIL",":","HyperlinkType",".","URL",";","\n","case","InteractiveInfoAtom",".","LINK_NextSlide:\n","case","InteractiveInfoAtom",".","LINK_PreviousSlide:\n","case","InteractiveInfoAtom",".","LINK_FirstSlide:\n","case","InteractiveInfoAtom",".","LINK_LastSlide:\n","case","InteractiveInfoAtom",".","LINK_SlideNumber:\n","return","HyperlinkType",".","DOCUMENT",";","\n","case","InteractiveInfoAtom",".","LINK_CustomShow:\n","case","InteractiveInfoAtom",".","LINK_OtherPresentation:\n","case","InteractiveInfoAtom",".","LINK_OtherFile:\n","return","HyperlinkType",".","FILE",";","\n","default:\n","case","InteractiveInfoAtom",".","LINK_NULL:\n","return","HyperlinkType",".","NONE",";","\n","}","\n"],"docstring_tokens":["Gets","the","type","of","the","hyperlink","action"]}
{"code_tokens":["\n","public","static","List<HSLFHyperlink>","find","(","HSLFTextShape","shape",")","{","\n","return","find","(","shape",".","getTextParagraphs","(",")",")",";","\n"],"docstring_tokens":["Find","hyperlinks","in","a","text","shape"]}
{"code_tokens":["\n","public","void","setValue","(","boolean","value",")","{","\n","_value","=","value","?","1",":","0",";","\n","_isError","=","false",";","\n"],"docstring_tokens":["set","the","boolean","value","for","the","cell"]}
{"code_tokens":["\n","public","void","setValue","(","FormulaError","value",")","{","\n","switch","(","value",")","{","\n","case","NULL:\n","case","DIV0:\n","case","VALUE:\n","case","REF:\n","case","NAME:\n","case","NUM:\n","case","NA:\n","_value","=","value",".","getCode","(",")",";","\n","_isError","=","true",";","\n","return",";","\n","default:\n","throw","new","IllegalArgumentException","(","\"Error","Value","can","only","be","0,7,15,23,29,36","or","42",".","It","cannot","be","\"+value",".","getCode","(",")","+\"","(","\"+value+\"",")","\"",")",";","\n","}","\n"],"docstring_tokens":["set","the","error","value","for","the","cell"]}
{"code_tokens":["\n","public","final","void","setText","(","String","text",")","{","\n","if","(","text","==","null",")","{","\n","throw","new","IllegalArgumentException","(","\"text","must","not","be","null\"",")",";","\n","}","\n","field_2_hasMultibyte","=","StringUtil",".","hasMultibyte","(","text",")",";","\n","field_3_text","=","text",";","\n\n","//","Check","it'll","fit","into","the","space","in","the","record\n","if","(","getDataSize","(",")",">","RecordInputStream",".","MAX_RECORD_DATA_SIZE",")","{","\n","throw","new","IllegalArgumentException","(","\"Header/Footer","string","too","long","(","limit","is","\"\n","+","RecordInputStream",".","MAX_RECORD_DATA_SIZE","+","\"","bytes",")","\"",")",";","\n","}","\n"],"docstring_tokens":["set","the","footer","string"]}
{"code_tokens":["\n","public","static","String","getLocaleFromLCID","(","int","lcid",")","{","\n","LocaleID","lid","=","LocaleID",".","lookupByLcid","(","lcid","&","0xFFFF",")",";","\n","return","(","lid","==","null",")","?","\"invalid\"",":","lid",".","getLanguageTag","(",")",";","\n"],"docstring_tokens":["Decode","the","language","ID","from","LCID","value"]}
{"code_tokens":["\n","public","short","getXBasis","(",")","\n","{","\n","return","field_1_xBasis",";","\n"],"docstring_tokens":["Get","the","x","Basis","field","for","the","FontBasis","record"]}
{"code_tokens":["\n","public","void","setXBasis","(","short","field_1_xBasis",")","\n","{","\n","this",".","field_1_xBasis","=","field_1_xBasis",";","\n"],"docstring_tokens":["Set","the","x","Basis","field","for","the","FontBasis","record"]}
{"code_tokens":["\n","public","short","getYBasis","(",")","\n","{","\n","return","field_2_yBasis",";","\n"],"docstring_tokens":["Get","the","y","Basis","field","for","the","FontBasis","record"]}
{"code_tokens":["\n","public","void","setYBasis","(","short","field_2_yBasis",")","\n","{","\n","this",".","field_2_yBasis","=","field_2_yBasis",";","\n"],"docstring_tokens":["Set","the","y","Basis","field","for","the","FontBasis","record"]}
{"code_tokens":["\n","public","short","getHeightBasis","(",")","\n","{","\n","return","field_3_heightBasis",";","\n"],"docstring_tokens":["Get","the","height","basis","field","for","the","FontBasis","record"]}
{"code_tokens":["\n","public","void","setHeightBasis","(","short","field_3_heightBasis",")","\n","{","\n","this",".","field_3_heightBasis","=","field_3_heightBasis",";","\n"],"docstring_tokens":["Set","the","height","basis","field","for","the","FontBasis","record"]}
{"code_tokens":["\n","public","short","getScale","(",")","\n","{","\n","return","field_4_scale",";","\n"],"docstring_tokens":["Get","the","scale","field","for","the","FontBasis","record"]}
{"code_tokens":["\n","public","void","setScale","(","short","field_4_scale",")","\n","{","\n","this",".","field_4_scale","=","field_4_scale",";","\n"],"docstring_tokens":["Set","the","scale","field","for","the","FontBasis","record"]}
{"code_tokens":["\n","public","short","getIndexToFontTable","(",")","\n","{","\n","return","field_5_indexToFontTable",";","\n"],"docstring_tokens":["Get","the","index","to","font","table","field","for","the","FontBasis","record"]}
{"code_tokens":["\n","public","void","setIndexToFontTable","(","short","field_5_indexToFontTable",")","\n","{","\n","this",".","field_5_indexToFontTable","=","field_5_indexToFontTable",";","\n"],"docstring_tokens":["Set","the","index","to","font","table","field","for","the","FontBasis","record"]}
{"code_tokens":["\n","public","double","evaluateDateArg","(","ValueEval","arg,","int","srcCellRow,","int","srcCellCol",")","throws","EvaluationException","{","\n","ValueEval","ve","=","OperandResolver",".","getSingleValue","(","arg,","srcCellRow,","(","short",")","srcCellCol",")",";","\n\n","if","(","ve","instanceof","StringEval",")","{","\n","String","strVal","=","(","(","StringEval",")","ve",")",".","getStringValue","(",")",";","\n","Double","dVal","=","OperandResolver",".","parseDouble","(","strVal",")",";","\n","if","(","dVal","!=","null",")","{","\n","return","dVal",".","doubleValue","(",")",";","\n","}","\n","LocalDate","date","=","DateParser",".","parseLocalDate","(","strVal",")",";","\n","return","DateUtil",".","getExcelDate","(","date,","false",")",";","\n","}","\n","return","OperandResolver",".","coerceValueToDouble","(","ve",")",";","\n"],"docstring_tokens":["Evaluate","a","generic","ValueEval","argument","to","a","double","value","that","represents","a","date","in","POI"]}
{"code_tokens":["\n","public","double[]","evaluateDatesArg","(","ValueEval","arg,","int","srcCellRow,","int","srcCellCol",")","throws","EvaluationException","{","\n","if","(","arg","==","null",")","{","\n","return","new","double[0]",";","\n","}","\n\n","if","(","arg","instanceof","StringEval",")","{","\n","return","new","double[]","{","evaluateDateArg","(","arg,","srcCellRow,","srcCellCol",")","}",";","\n","}","else","if","(","arg","instanceof","AreaEvalBase",")","{","\n","List<Double>","valuesList","=","new","ArrayList<>","(",")",";","\n","AreaEvalBase","area","=","(","AreaEvalBase",")","arg",";","\n","for","(","int","i","=","area",".","getFirstRow","(",")",";","i","<=","area",".","getLastRow","(",")",";","i++",")","{","\n","for","(","int","j","=","area",".","getFirstColumn","(",")",";","j","<=","area",".","getLastColumn","(",")",";","j++",")","{","\n","//","getValue","(",")","is","replaced","with","getAbsoluteValue","(",")","because","loop","variables","i,","j","are\n","//","absolute","indexes","values,","but","getValue","(",")","works","with","relative","indexes","values\n","valuesList",".","add","(","evaluateDateArg","(","area",".","getAbsoluteValue","(","i,","j",")",",","i,","j",")",")",";","\n","}","\n","}","\n","double[]","values","=","new","double[valuesList",".","size","(",")","]",";","\n","for","(","int","i","=","0",";","i","<","valuesList",".","size","(",")",";","i++",")","{","\n","values[i]","=","valuesList",".","get","(","i",")",".","doubleValue","(",")",";","\n","}","\n","return","values",";","\n","}","\n","return","new","double[]","{","OperandResolver",".","coerceValueToDouble","(","arg",")","}",";","\n"],"docstring_tokens":["Evaluate","a","generic","ValueEval","argument","to","an","array","of","double","values","that","represents","dates","in","POI"]}
{"code_tokens":["\n","public","double","evaluateNumberArg","(","ValueEval","arg,","int","srcCellRow,","int","srcCellCol",")","throws","EvaluationException","{","\n","if","(","arg","==","null",")","{","\n","return","0f",";","\n","}","\n\n","return","OperandResolver",".","coerceValueToDouble","(","arg",")",";","\n"],"docstring_tokens":["Evaluate","a","generic","ValueEval","argument","to","a","double","value"]}
{"code_tokens":["\n","@Override\n","public","void","applyFont","(","int","startIndex,","int","endIndex,","short","fontIndex",")","{","\n","if","(","startIndex",">","endIndex",")","\n","throw","new","IllegalArgumentException","(","\"Start","index","must","be","less","than","end","index",".","\"",")",";","\n","if","(","startIndex","<","0","||","endIndex",">","length","(",")",")","\n","throw","new","IllegalArgumentException","(","\"Start","and","end","index","not","in","range",".","\"",")",";","\n","if","(","startIndex","==","endIndex",")","\n","return",";","\n\n","//Need","to","check","what","the","font","is","currently,","so","we","can","reapply","it","after\n","//the","range","is","completed\n","short","currentFont","=","NO_FONT",";","\n","if","(","endIndex","!=","length","(",")",")","{","\n","currentFont","=","this",".","getFontAtIndex","(","endIndex",")",";","\n","}","\n\n","//Need","to","clear","the","current","formatting","between","the","startIndex","and","endIndex\n","_string","=","cloneStringIfRequired","(",")",";","\n","Iterator<FormatRun>","formatting","=","_string",".","formatIterator","(",")",";","\n","if","(","formatting","!=","null",")","{","\n","while","(","formatting",".","hasNext","(",")",")","{","\n","FormatRun","r","=","formatting",".","next","(",")",";","\n","if","(","(","r",".","getCharacterPos","(",")",">=","startIndex",")","&&","(","r",".","getCharacterPos","(",")","<","endIndex",")",")","\n","formatting",".","remove","(",")",";","\n","}","\n","}","\n\n\n","_string",".","addFormatRun","(","new","FormatRun","(","(","short",")","startIndex,","fontIndex",")",")",";","\n","if","(","endIndex","!=","length","(",")",")","\n","_string",".","addFormatRun","(","new","FormatRun","(","(","short",")","endIndex,","currentFont",")",")",";","\n\n","addToSSTIfRequired","(",")",";","\n"],"docstring_tokens":["Applies","a","font","to","the","specified","characters","of","a","string"]}
{"code_tokens":["\n","@Override\n","public","void","applyFont","(","Font","font",")","{","\n","applyFont","(","0,","_string",".","getCharCount","(",")",",","font",")",";","\n"],"docstring_tokens":["Sets","the","font","of","the","entire","string"]}
{"code_tokens":["\n","@Override\n","public","void","clearFormatting","(",")","{","\n","_string","=","cloneStringIfRequired","(",")",";","\n","_string",".","clearFormatting","(",")",";","\n","addToSSTIfRequired","(",")",";","\n"],"docstring_tokens":["Removes","any","formatting","that","may","have","been","applied","to","the","string"]}
{"code_tokens":["\n","@Override\n","public","int","getIndexOfFormattingRun","(","int","index",")","{","\n","FormatRun","r","=","_string",".","getFormatRun","(","index",")",";","\n","return","r",".","getCharacterPos","(",")",";","\n"],"docstring_tokens":["The","index","within","the","string","to","which","the","specified","formatting","run","applies"]}
{"code_tokens":["\n","@Override\n","public","int","compareTo","(","HSSFRichTextString","r",")","{","\n","return","_string",".","compareTo","(","r",".","_string",")",";","\n"],"docstring_tokens":["Compares","one","rich","text","string","to","another"]}
{"code_tokens":["\n","@Override\n","public","void","applyFont","(","short","fontIndex",")","{","\n","applyFont","(","0,","_string",".","getCharCount","(",")",",","fontIndex",")",";","\n"],"docstring_tokens":["Applies","the","specified","font","to","the","entire","string"]}
{"code_tokens":["\n","public","static","ErrorEval","valueOf","(","int","errorCode",")","{","\n","FormulaError","error","=","FormulaError",".","forInt","(","errorCode",")",";","\n","ErrorEval","eval","=","evals",".","get","(","error",")",";","\n","if","(","eval","!=","null",")","{","\n","return","eval",";","\n","}","else","{","\n","throw","new","RuntimeException","(","\"Unhandled","error","type","for","code","\"","+","errorCode",")",";","\n","}","\n"],"docstring_tokens":["Translates","an","Excel","internal","error","code","into","the","corresponding","POI","ErrorEval","instance"]}
{"code_tokens":["\n","@Internal\n","public","short","getBits","(",")","\n","{","\n","return","field_2_bits",";","\n"],"docstring_tokens":["An","FFDataBits","that","specifies","the","type","and","state","of","this","form","field"]}
{"code_tokens":["\n","@Internal\n","public","void","setIType","(","byte","value",")","\n","{","\n","field_2_bits","=","(","short",")","iType",".","setValue","(","field_2_bits,","value",")",";","\n"],"docstring_tokens":["Sets","the","iType","field","value"]}
{"code_tokens":["\n","@Internal\n","public","byte","getIType","(",")","\n","{","\n","return","(","byte",")","iType",".","getValue","(","field_2_bits",")",";","\n"],"docstring_tokens":["An","unsigned","integer","that","specifies","the","type","of","the","form","field"]}
{"code_tokens":["\n","public","static","void","storeDate","(","Date","date,","byte[]","dest",")","{","\n","storeDate","(","date,","dest,","0",")",";","\n"],"docstring_tokens":["Convert","the","supplied","java","Date","into","a","SystemTime","struct,","and","write","it","into","the","supplied","byte","array"]}
{"code_tokens":["\n","public","static","Record[]","findChildRecords","(","byte[]","b,","int","start,","int","len",")","{","\n","List<Record>","children","=","new","ArrayList<>","(","5",")",";","\n\n","//","Jump","our","little","way","along,","creating","records","as","we","go\n","int","pos","=","start",";","\n","while","(","pos","<=","(","start+len-8",")",")","{","\n","long","type","=","LittleEndian",".","getUShort","(","b,pos+2",")",";","\n","long","rlen","=","LittleEndian",".","getUInt","(","b,pos+4",")",";","\n\n","//","Sanity","check","the","length\n","int","rleni","=","(","int",")","rlen",";","\n","if","(","rleni","<","0",")","{","rleni","=","0",";","}","\n\n","//","Abort","if","first","record","is","of","type","0000","and","length","FFFF,\n","//","as","that's","a","sign","of","a","screwed","up","record\n","if","(","pos","==","0","&&","type","==","0L","&&","rleni","==","0xffff",")","{","\n","throw","new","CorruptPowerPointFileException","(","\"Corrupt","document","-","starts","with","record","of","type","0000","and","length","0xFFFF\"",")",";","\n","}","\n\n","Record","r","=","createRecordForType","(","type,b,pos,8+rleni",")",";","\n","if","(","r","!=","null",")","{","\n","children",".","add","(","r",")",";","\n","}","\n","pos","+=","8",";","\n","pos","+=","rleni",";","\n","}","\n\n","//","Turn","the","vector","into","an","array,","and","return\n","return","children",".","toArray","(","new","Record[0]",")",";","\n"],"docstring_tokens":["Default","method","for","finding","child","records","of","a","container","record"]}
{"code_tokens":["\n","@Override\n","public","HyperlinkType","getType","(",")","{","\n","return","_type",";","\n"],"docstring_tokens":["Return","the","type","of","this","hyperlink"]}
{"code_tokens":["\n","@Override\n","public","String","getLabel","(",")","{","\n","return","_ctHyperlink",".","getDisplay","(",")",";","\n"],"docstring_tokens":["Return","text","label","for","this","hyperlink"]}
{"code_tokens":["\n","@Override\n","public","void","setLabel","(","String","label",")","{","\n","_ctHyperlink",".","setDisplay","(","label",")",";","\n"],"docstring_tokens":["Sets","text","label","for","this","hyperlink"]}
{"code_tokens":["\n","@Internal\n","public","void","setCellReference","(","String","ref",")","{","\n","_ctHyperlink",".","setRef","(","ref",")",";","\n"],"docstring_tokens":["Assigns","this","hyperlink","to","the","given","cell","reference"]}
{"code_tokens":["\n","@Override\n","public","int","getFirstColumn","(",")","{","\n","return","buildFirstCellReference","(",")",".","getCol","(",")",";","\n"],"docstring_tokens":["Return","the","column","of","the","first","cell","that","contains","the","hyperlink"]}
{"code_tokens":["\n","@Override\n","public","int","getLastColumn","(",")","{","\n","return","buildLastCellReference","(",")",".","getCol","(",")",";","\n"],"docstring_tokens":["Return","the","column","of","the","last","cell","that","contains","the","hyperlink"]}
{"code_tokens":["\n","@Override\n","public","int","getFirstRow","(",")","{","\n","return","buildFirstCellReference","(",")",".","getRow","(",")",";","\n"],"docstring_tokens":["Return","the","row","of","the","first","cell","that","contains","the","hyperlink"]}
{"code_tokens":["\n","@Override\n","public","int","getLastRow","(",")","{","\n","return","buildLastCellReference","(",")",".","getRow","(",")",";","\n"],"docstring_tokens":["Return","the","row","of","the","last","cell","that","contains","the","hyperlink"]}
{"code_tokens":["\n","@Override\n","public","void","setFirstColumn","(","int","col",")","{","\n","int","lastColumn","=","getLastColumn","(",")",";","\n","if","(","col",">","lastColumn",")","lastColumn","=","col",";","\n","String","firstCellRef","=","CellReference",".","convertNumToColString","(","col",")","+","(","getFirstRow","(",")","+","1",")",";","\n","String","lastCellRef","=","CellReference",".","convertNumToColString","(","lastColumn",")","+","(","getLastRow","(",")","+","1",")",";","\n","setCellRange","(","firstCellRef","+","\":\"","+","lastCellRef",")",";","\n"],"docstring_tokens":["Set","the","column","of","the","first","cell","that","contains","the","hyperlink"]}
{"code_tokens":["\n","@Override\n","public","void","setLastColumn","(","int","col",")","{","\n","int","firstColumn","=","getFirstColumn","(",")",";","\n","if","(","col","<","firstColumn",")","firstColumn","=","col",";","\n","String","firstCellRef","=","CellReference",".","convertNumToColString","(","firstColumn",")","+","(","getFirstRow","(",")","+","1",")",";","\n","String","lastCellRef","=","CellReference",".","convertNumToColString","(","col",")","+","(","getLastRow","(",")","+","1",")",";","\n","setCellRange","(","firstCellRef","+","\":\"","+","lastCellRef",")",";","\n"],"docstring_tokens":["Set","the","column","of","the","last","cell","that","contains","the","hyperlink"]}
{"code_tokens":["\n","@Override\n","public","void","setFirstRow","(","int","row",")","{","\n","int","lastRow","=","getLastRow","(",")",";","\n","if","(","row",">","lastRow",")","lastRow","=","row",";","\n","String","firstCellRef","=","CellReference",".","convertNumToColString","(","getFirstColumn","(",")",")","+","(","row","+","1",")",";","\n","String","lastCellRef","=","CellReference",".","convertNumToColString","(","getLastColumn","(",")",")","+","(","lastRow","+","1",")",";","\n","setCellRange","(","firstCellRef","+","\":\"","+","lastCellRef",")",";","\n"],"docstring_tokens":["Set","the","row","of","the","first","cell","that","contains","the","hyperlink"]}
{"code_tokens":["\n","@Override\n","public","void","setLastRow","(","int","row",")","{","\n","int","firstRow","=","getFirstRow","(",")",";","\n","if","(","row","<","firstRow",")","firstRow","=","row",";","\n","String","firstCellRef","=","CellReference",".","convertNumToColString","(","getFirstColumn","(",")",")","+","(","firstRow","+","1",")",";","\n","String","lastCellRef","=","CellReference",".","convertNumToColString","(","getLastColumn","(",")",")","+","(","row","+","1",")",";","\n","setCellRange","(","firstCellRef","+","\":\"","+","lastCellRef",")",";","\n"],"docstring_tokens":["Set","the","row","of","the","last","cell","that","contains","the","hyperlink"]}
{"code_tokens":["\n","public","short","getFormatIndex","(",")","\n","{","\n","return","field_1_formatIndex",";","\n"],"docstring_tokens":["Get","the","format","index","field","for","the","NumberFormatIndex","record"]}
{"code_tokens":["\n","public","void","setFormatIndex","(","short","field_1_formatIndex",")","\n","{","\n","this",".","field_1_formatIndex","=","field_1_formatIndex",";","\n"],"docstring_tokens":["Set","the","format","index","field","for","the","NumberFormatIndex","record"]}
{"code_tokens":["\n","private","static","boolean","shouldCountFeb29","(","SimpleDate","start,","SimpleDate","end",")","{","\n","if","(","isLeapYear","(","start",".","year",")",")","{","\n","if","(","start",".","year","==","end",".","year",")","{","\n","//","note","-","dates","may","not","actually","span","Feb-29,","but","it","gets","counted","anyway","in","this","case\n","return","true",";","\n","}","\n\n","switch","(","start",".","month",")","{","\n","case","SimpleDate",".","JANUARY:\n","case","SimpleDate",".","FEBRUARY:\n","return","true",";","\n","}","\n","return","false",";","\n","}","\n\n","if","(","isLeapYear","(","end",".","year",")",")","{","\n","switch","(","end",".","month",")","{","\n","case","SimpleDate",".","JANUARY:\n","return","false",";","\n","case","SimpleDate",".","FEBRUARY:\n","break",";","\n","default:\n","return","true",";","\n","}","\n","return","end",".","day","==","LONG_FEB_LEN",";","\n","}","\n","return","false",";","\n"],"docstring_tokens":["Assumes","dates","are","no","more","than","1","year","apart"]}
{"code_tokens":["\n","public","XSSFClientAnchor","getPreferredSize","(","double","scale",")","{","\n","XSSFClientAnchor","anchor","=","getClientAnchor","(",")",";","\n","if","(","anchor","==","null",")","{","\n","LOG",".","atWarn","(",")",".","log","(","\"picture","is","not","anchored","via","client","anchor","-","ignoring","resize","call\"",")",";","\n","return","null",";","\n","}","\n\n","XSSFPictureData","data","=","getPictureData","(",")",";","\n","Dimension","size","=","getImageDimension","(","data",".","getPackagePart","(",")",",","data",".","getPictureType","(",")",")",";","\n","double","scaledWidth","=","size",".","getWidth","(",")","*","scale",";","\n","double","scaledHeight","=","size",".","getHeight","(",")","*","scale",";","\n\n","float","w","=","0",";","\n","int","col2","=","anchor",".","getCol1","(",")","-1",";","\n\n","while","(","w","<=","scaledWidth",")","{","\n","w","+=","getColumnWidthInPixels","(","++col2",")",";","\n","}","\n\n","assert","(","w",">","scaledWidth",")",";","\n","double","cw","=","getColumnWidthInPixels","(","col2",")",";","\n","double","deltaW","=","w","-","scaledWidth",";","\n","int","dx2","=","(","int",")","(","Units",".","EMU_PER_PIXEL","*","(","cw","-","deltaW",")",")",";","\n\n","anchor",".","setCol2","(","col2",")",";","\n","anchor",".","setDx2","(","dx2",")",";","\n\n","double","h","=","0",";","\n","int","row2","=","anchor",".","getRow1","(",")","-1",";","\n\n","while","(","h","<=","scaledHeight",")","{","\n","h","+=","getRowHeightInPixels","(","++row2",")",";","\n","}","\n\n","assert","(","h",">","scaledHeight",")",";","\n","double","ch","=","getRowHeightInPixels","(","row2",")",";","\n","double","deltaH","=","h","-","scaledHeight",";","\n","int","dy2","=","(","int",")","(","Units",".","EMU_PER_PIXEL","*","(","ch","-","deltaH",")",")",";","\n","anchor",".","setRow2","(","row2",")",";","\n","anchor",".","setDy2","(","dy2",")",";","\n\n","CTPositiveSize2D","size2d","=","getCTPicture","(",")",".","getSpPr","(",")",".","getXfrm","(",")",".","getExt","(",")",";","\n","size2d",".","setCx","(","(","long",")","(","scaledWidth","*","Units",".","EMU_PER_PIXEL",")",")",";","\n","size2d",".","setCy","(","(","long",")","(","scaledHeight","*","Units",".","EMU_PER_PIXEL",")",")",";","\n\n","return","anchor",";","\n"],"docstring_tokens":["Calculate","the","preferred","size","for","this","picture"]}
{"code_tokens":["\n","public","static","void","main","(","final","String[]","args",")","throws","IOException","{","\n","if","(","args",".","length","==","0",")","{","\n","System",".","err",".","println","(","\"Must","specify","at","least","one","file","to","view\"",")",";","\n","System",".","exit","(","1",")",";","\n","}","\n\n","boolean","withSizes","=","false",";","\n","boolean","newPOIFS","=","true",";","\n","for","(","String","arg",":","args",")","{","\n","if","(","arg",".","equalsIgnoreCase","(","\"-size\"",")","||","arg",".","equalsIgnoreCase","(","\"-sizes\"",")",")","{","\n","withSizes","=","true",";","\n","}","else","if","(","arg",".","equalsIgnoreCase","(","\"-old\"",")","||","arg",".","equalsIgnoreCase","(","\"-old-poifs\"",")",")","{","\n","newPOIFS","=","false",";","\n","}","else","{","\n","if","(","newPOIFS",")","{","\n","viewFile","(","arg,","withSizes",")",";","\n","}","else","{","\n","viewFileOld","(","arg,","withSizes",")",";","\n","}","\n","}","\n","}","\n"],"docstring_tokens":["Display","the","entries","of","multiple","POIFS","files"]}
{"code_tokens":["\n","@Override\n","public","void","setVisible","(","boolean","visible",")","{","\n","if","(","_vmlShape","!=","null",")","{","\n","if","(","visible",")","{","\n","_vmlShape",".","setStyle","(","\"position:absolute\"",")",";","\n","CTClientData","clientData","=","_vmlShape",".","getClientDataArray","(","0",")",";","\n","if","(","clientData","!=","null","&&","clientData",".","sizeOfVisibleArray","(",")","==","0",")","{","\n","clientData",".","addVisible","(","STTrueFalseBlank",".","X",")",";","\n","}","\n","}","else","{","\n","_vmlShape",".","setStyle","(","\"position:absolute",";","visibility:hidden\"",")",";","\n","CTClientData","clientData","=","_vmlShape",".","getClientDataArray","(","0",")",";","\n","if","(","clientData","!=","null","&&","clientData",".","sizeOfVisibleArray","(",")",">","0",")","{","\n","clientData",".","removeVisible","(","0",")",";","\n","}","\n","}","\n","}","\n","_comments",".","commentUpdated","(","this",")",";","\n"],"docstring_tokens":["Sets","whether","this","comment","is","visible"]}
{"code_tokens":["\n","@Override\n","public","void","setString","(","RichTextString","string",")","{","\n","if","(","!","(","string","instanceof","XSSFRichTextString",")",")","{","\n","throw","new","IllegalArgumentException","(","\"Only","XSSFRichTextString","argument","is","supported\"",")",";","\n","}","\n","_str","=","(","XSSFRichTextString",")","string",";","\n","_comment",".","setText","(","_str",".","getCTRst","(",")",")",";","\n","_comments",".","commentUpdated","(","this",")",";","\n"],"docstring_tokens":["Sets","the","rich","text","string","used","by","this","comment"]}
{"code_tokens":["\n","public","void","concatenate","(","byte[]","array",")","{","\n","if","(","array","==","null",")","{","\n","throw","new","IllegalArgumentException","(","\"array","cannot","be","null\"",")",";","\n","}","\n","arrays",".","add","(","array",")",";","\n"],"docstring_tokens":["Concatenates","an","array","onto","the","end","of","our","array"]}
{"code_tokens":["\n","public","boolean","marshall","(","PackagePart","part,","OutputStream","out",")","\n","throws","OpenXML4JException","{","\n","return","part",".","save","(","out",")",";","\n"],"docstring_tokens":["Save","the","given","part","in","the","output","stream","by","using","the","save","method","of","the","part"]}
{"code_tokens":["\n","public","boolean","isFooterVisible","(",")","{","\n","return","isVisible","(","HeadersFootersAtom",".","fHasFooter,","Placeholder",".","FOOTER",")",";","\n"],"docstring_tokens":["whether","the","footer","text","is","displayed"]}
{"code_tokens":["\n","public","boolean","isHeaderVisible","(",")","{","\n","return","isVisible","(","HeadersFootersAtom",".","fHasHeader,","Placeholder",".","HEADER",")",";","\n"],"docstring_tokens":["whether","the","header","text","is","displayed"]}
{"code_tokens":["\n","public","boolean","isDateTimeVisible","(",")","{","\n","return","isVisible","(","HeadersFootersAtom",".","fHasDate,","Placeholder",".","DATETIME",")",";","\n"],"docstring_tokens":["whether","the","date","is","displayed","in","the","footer"]}
{"code_tokens":["\n","public","boolean","isSlideNumberVisible","(",")","{","\n","return","isVisible","(","HeadersFootersAtom",".","fHasSlideNumber,","Placeholder",".","SLIDE_NUMBER",")",";","\n"],"docstring_tokens":["whether","the","slide","number","is","displayed","in","the","footer"]}
{"code_tokens":["\n","protected","static","CTGroupShape","prototype","(",")","{","\n","if","(","prototype","==","null",")","{","\n","CTGroupShape","shape","=","CTGroupShape",".","Factory",".","newInstance","(",")",";","\n\n","CTGroupShapeNonVisual","nv","=","shape",".","addNewNvGrpSpPr","(",")",";","\n","CTNonVisualDrawingProps","nvpr","=","nv",".","addNewCNvPr","(",")",";","\n","nvpr",".","setId","(","0",")",";","\n","nvpr",".","setName","(","\"Group","0\"",")",";","\n","nv",".","addNewCNvGrpSpPr","(",")",";","\n","CTGroupShapeProperties","sp","=","shape",".","addNewGrpSpPr","(",")",";","\n","CTGroupTransform2D","t2d","=","sp",".","addNewXfrm","(",")",";","\n","CTPositiveSize2D","p1","=","t2d",".","addNewExt","(",")",";","\n","p1",".","setCx","(","0",")",";","\n","p1",".","setCy","(","0",")",";","\n","CTPoint2D","p2","=","t2d",".","addNewOff","(",")",";","\n","p2",".","setX","(","0",")",";","\n","p2",".","setY","(","0",")",";","\n","CTPositiveSize2D","p3","=","t2d",".","addNewChExt","(",")",";","\n","p3",".","setCx","(","0",")",";","\n","p3",".","setCy","(","0",")",";","\n","CTPoint2D","p4","=","t2d",".","addNewChOff","(",")",";","\n","p4",".","setX","(","0",")",";","\n","p4",".","setY","(","0",")",";","\n\n","prototype","=","shape",";","\n","}","\n","return","prototype",";","\n"],"docstring_tokens":["Initialize","default","structure","of","a","new","shape","group"]}
{"code_tokens":["\n","public","XSSFShapeGroup","createGroup","(","XSSFChildAnchor","anchor",")","{","\n","CTGroupShape","ctShape","=","ctGroup",".","addNewGrpSp","(",")",";","\n","ctShape",".","set","(","prototype","(",")",")",";","\n\n","XSSFShapeGroup","shape","=","new","XSSFShapeGroup","(","getDrawing","(",")",",","ctShape",")",";","\n","shape",".","parent","=","this",";","\n","shape",".","anchor","=","anchor",";","\n\n","//","TODO:","calculate","bounding","rectangle","on","anchor","and","set","off/ext","correctly\n\n","CTGroupTransform2D","xfrm","=","shape",".","getCTGroupShape","(",")",".","getGrpSpPr","(",")",".","getXfrm","(",")",";","\n","CTTransform2D","t2","=","anchor",".","getCTTransform2D","(",")",";","\n","xfrm",".","setOff","(","t2",".","getOff","(",")",")",";","\n","xfrm",".","setExt","(","t2",".","getExt","(",")",")",";","\n","//","child","offset","is","left","to","0,0\n","xfrm",".","setChExt","(","t2",".","getExt","(",")",")",";","\n","xfrm",".","setFlipH","(","t2",".","getFlipH","(",")",")",";","\n","xfrm",".","setFlipV","(","t2",".","getFlipV","(",")",")",";","\n\n","return","shape",";","\n"],"docstring_tokens":["Creates","a","group","shape"]}
{"code_tokens":["\n","public","static","byte[]","getBytesInCodePage","(","final","String","string,","final","int","codepage",")","\n","throws","UnsupportedEncodingException","\n","{","\n","String","encoding","=","codepageToEncoding","(","codepage",")",";","\n","return","string",".","getBytes","(","encoding",")",";","\n"],"docstring_tokens":["Converts","a","string","into","bytes,","in","the","equivalent","character","encoding","to","the","supplied","codepage","number"]}
{"code_tokens":["\n","public","static","String","getStringFromCodePage","(","final","byte[]","string,","final","int","offset,","\n","final","int","length,","final","int","codepage",")","throws","UnsupportedEncodingException","\n","{","\n","String","encoding","=","codepageToEncoding","(","codepage",")",";","\n","return","new","String","(","string,","offset,","length,","encoding",")",";","\n"],"docstring_tokens":["Converts","the","bytes","into","a","String,","based","on","the","equivalent","character","encoding","to","the","supplied","codepage","number"]}
{"code_tokens":["\n","public","static","InternalWorkbook","createWorkbook","(",")","{","\n","LOG",".","atDebug","(",")",".","log","(","\"creating","new","workbook","from","scratch\"",")",";","\n\n","InternalWorkbook","retval","=","new","InternalWorkbook","(",")",";","\n","List<Record>","records","=","new","ArrayList<>","(","30",")",";","\n","retval",".","records",".","setRecords","(","records",")",";","\n","List<FormatRecord>","formats","=","retval",".","formats",";","\n\n","records",".","add","(","createBOF","(",")",")",";","\n","records",".","add","(","new","InterfaceHdrRecord","(","CODEPAGE",")",")",";","\n","records",".","add","(","createMMS","(",")",")",";","\n","records",".","add","(","InterfaceEndRecord",".","instance",")",";","\n","//","store","the","write-access","record","at","the","proper","position\n","retval",".","getWriteAccess","(",")",";","\n","records",".","add","(","createCodepage","(",")",")",";","\n","records",".","add","(","createDSF","(",")",")",";","\n","records",".","add","(","createTabId","(",")",")",";","\n","retval",".","records",".","setTabpos","(","records",".","size","(",")","-","1",")",";","\n","records",".","add","(","createFnGroupCount","(",")",")",";","\n","records",".","add","(","createWindowProtect","(",")",")",";","\n","records",".","add","(","createProtect","(",")",")",";","\n","retval",".","records",".","setProtpos","(","records",".","size","(",")","-","1",")",";","\n","records",".","add","(","createPassword","(",")",")",";","\n","records",".","add","(","createProtectionRev4","(",")",")",";","\n","records",".","add","(","createPasswordRev4","(",")",")",";","\n","retval",".","windowOne","=","createWindowOne","(",")",";","\n","records",".","add","(","retval",".","windowOne",")",";","\n","records",".","add","(","createBackup","(",")",")",";","\n","retval",".","records",".","setBackuppos","(","records",".","size","(",")","-","1",")",";","\n","records",".","add","(","createHideObj","(",")",")",";","\n","records",".","add","(","createDateWindow1904","(",")",")",";","\n","records",".","add","(","createPrecision","(",")",")",";","\n","records",".","add","(","createRefreshAll","(",")",")",";","\n","records",".","add","(","createBookBool","(",")",")",";","\n","records",".","add","(","createFont","(",")",")",";","\n","records",".","add","(","createFont","(",")",")",";","\n","records",".","add","(","createFont","(",")",")",";","\n","records",".","add","(","createFont","(",")",")",";","\n","retval",".","records",".","setFontpos","(","records",".","size","(",")","-","1",")",";","//","last","font","record","position\n","retval",".","numfonts","=","4",";","\n\n","//","set","up","format","records\n","for","(","int","i","=","0",";","i","<=","7",";","i++",")","{","\n","FormatRecord","rec","=","createFormat","(","i",")",";","\n","retval",".","maxformatid","=","Math",".","max","(","retval",".","maxformatid,","rec",".","getIndexCode","(",")",")",";","\n","formats",".","add","(","rec",")",";","\n","records",".","add","(","rec",")",";","\n","}","\n\n","for","(","int","k","=","0",";","k","<","21",";","k++",")","{","\n","records",".","add","(","InternalWorkbook",".","createExtendedFormat","(","k",")",")",";","\n","retval",".","numxfs++",";","\n","}","\n","retval",".","records",".","setXfpos","(","records",".","size","(",")","-","1",")",";","\n","for","(","int","k","=","0",";","k","<","6",";","k++",")","{","\n","records",".","add","(","InternalWorkbook",".","createStyle","(","k",")",")",";","\n","}","\n","records",".","add","(","InternalWorkbook",".","createUseSelFS","(",")",")",";","\n\n","int","nBoundSheets","=","1",";","//","now","just","do","1\n","for","(","int","k","=","0",";","k","<","nBoundSheets",";","k++",")","{","\n","BoundSheetRecord","bsr","=","createBoundSheet","(","k",")",";","\n\n","records",".","add","(","bsr",")",";","\n","retval",".","boundsheets",".","add","(","bsr",")",";","\n","retval",".","records",".","setBspos","(","records",".","size","(",")","-","1",")",";","\n","}","\n","records",".","add","(","InternalWorkbook",".","createCountry","(",")",")",";","\n","for","(","int","k","=","0",";","k","<","nBoundSheets",";","k++",")","{","\n","retval",".","getOrCreateLinkTable","(",")",".","checkExternSheet","(","k",")",";","\n","}","\n","retval",".","sst","=","new","SSTRecord","(",")",";","\n","records",".","add","(","retval",".","sst",")",";","\n","records",".","add","(","InternalWorkbook",".","createExtendedSST","(",")",")",";","\n\n","records",".","add","(","EOFRecord",".","instance",")",";","\n","LOG",".","atDebug","(",")",".","log","(","\"exit","create","new","workbook","from","scratch\"",")",";","\n\n","return","retval",";","\n"],"docstring_tokens":["Creates","an","empty","workbook","object","with","three","blank","sheets","and","all","the","empty","fields"]}
{"code_tokens":["\n","public","boolean","isSheetVeryHidden","(","int","sheetnum",")","{","\n","return","getBoundSheetRec","(","sheetnum",")",".","isVeryHidden","(",")",";","\n"],"docstring_tokens":["Gets","the","very","hidden","flag","for","a","given","sheet"]}
{"code_tokens":["\n\n","public","int","getNumSheets","(",")","{","\n","LOG",".","atDebug","(",")",".","log","(","\"getNumSheets=","{","}","\",","box","(","boundsheets",".","size","(",")",")",")",";","\n","return","boundsheets",".","size","(",")",";","\n"],"docstring_tokens":["returns","the","number","of","boundsheet","objects","contained","in","this","workbook"]}
{"code_tokens":["\n\n","public","int","getNumExFormats","(",")","{","\n","LOG",".","atDebug","(",")",".","log","(","\"getXF=","{","}","\",","box","(","numxfs",")",")",";","\n","return","numxfs",";","\n"],"docstring_tokens":["get","the","number","of","ExtendedFormat","records","contained","in","this","workbook"]}
{"code_tokens":["\n\n","public","ExtendedFormatRecord","createCellXF","(",")","{","\n","ExtendedFormatRecord","xf","=","createExtendedFormat","(",")",";","\n\n","records",".","add","(","records",".","getXfpos","(",")","+1,","xf",")",";","\n","records",".","setXfpos","(","records",".","getXfpos","(",")","+","1",")",";","\n","numxfs++",";","\n","return","xf",";","\n"],"docstring_tokens":["creates","a","new","Cell-type","Extended","Format","Record","and","adds","it","to","the","end","of","ExtendedFormatRecords","collection"]}
{"code_tokens":["\n","public","UnicodeString","getSSTString","(","int","str",")","{","\n","if","(","sst","==","null",")","{","\n","insertSST","(",")",";","\n","}","\n","UnicodeString","retval","=","sst",".","getString","(","str",")",";","\n\n","LOG",".","atTrace","(",")",".","log","(","\"Returning","SST","for","index=","{","}","String=","{","}","\",","box","(","str",")",",","retval",")",";","\n","return","retval",";","\n"],"docstring_tokens":["given","an","index","into","the","SST","table,","this","function","returns","the","corresponding","String","value"]}
{"code_tokens":["\n","private","static","BackupRecord","createBackup","(",")","{","\n","BackupRecord","retval","=","new","BackupRecord","(",")",";","\n\n","retval",".","setBackup","(","(","short",")","0",")",";","//","by","default","DONT","save","backups","of","files",".",".",".","just","loose","data\n","return","retval",";","\n"],"docstring_tokens":["creates","the","Backup","record","with","backup","set","to","0"]}
{"code_tokens":["\n","private","static","HideObjRecord","createHideObj","(",")","{","\n","HideObjRecord","retval","=","new","HideObjRecord","(",")",";","\n","retval",".","setHideObj","(","(","short",")","0",")",";","//","by","default","set","hide","object","off\n","return","retval",";","\n"],"docstring_tokens":["creates","the","HideObj","record","with","hide","object","set","to","0"]}
{"code_tokens":["\n","private","static","DateWindow1904Record","createDateWindow1904","(",")","{","\n","DateWindow1904Record","retval","=","new","DateWindow1904Record","(",")",";","\n\n","retval",".","setWindowing","(","(","short",")","0",")",";","//","don't","EVER","use","1904","date","windowing",".",".",".","tick","tock",".",".","\n","return","retval",";","\n"],"docstring_tokens":["creates","the","DateWindow1904","record","with","windowing","set","to","0"]}
{"code_tokens":["\n","private","static","PrecisionRecord","createPrecision","(",")","{","\n","PrecisionRecord","retval","=","new","PrecisionRecord","(",")",";","\n","retval",".","setFullPrecision","(","true",")",";","//","always","use","real","numbers","in","calculations!\n","return","retval",";","\n"],"docstring_tokens":["creates","the","Precision","record","with","precision","set","to","true"]}
{"code_tokens":["\n","private","static","BookBoolRecord","createBookBool","(",")","{","\n","BookBoolRecord","retval","=","new","BookBoolRecord","(",")",";","\n","retval",".","setSaveLinkValues","(","(","short",")","0",")",";","\n","return","retval",";","\n"],"docstring_tokens":["creates","the","BookBool","record","with","saveLinkValues","set","to","0"]}
{"code_tokens":["\n","private","static","ExtendedFormatRecord","createExtendedFormat","(",")","{","\n","ExtendedFormatRecord","retval","=","new","ExtendedFormatRecord","(",")",";","\n\n","retval",".","setFontIndex","(","(","short",")","0",")",";","\n","retval",".","setFormatIndex","(","(","short",")","0x0",")",";","\n","retval",".","setCellOptions","(","(","short",")","0x1",")",";","\n","retval",".","setAlignmentOptions","(","(","short",")","0x20",")",";","\n","retval",".","setIndentionOptions","(","(","short",")","0",")",";","\n","retval",".","setBorderOptions","(","(","short",")","0",")",";","\n","retval",".","setPaletteOptions","(","(","short",")","0",")",";","\n","retval",".","setAdtlPaletteOptions","(","(","short",")","0",")",";","\n","retval",".","setFillPaletteOptions","(","(","short",")","0x20c0",")",";","\n","retval",".","setTopBorderPaletteIdx","(","HSSFColorPredefined",".","BLACK",".","getIndex","(",")",")",";","\n","retval",".","setBottomBorderPaletteIdx","(","HSSFColorPredefined",".","BLACK",".","getIndex","(",")",")",";","\n","retval",".","setLeftBorderPaletteIdx","(","HSSFColorPredefined",".","BLACK",".","getIndex","(",")",")",";","\n","retval",".","setRightBorderPaletteIdx","(","HSSFColorPredefined",".","BLACK",".","getIndex","(",")",")",";","\n","return","retval",";","\n"],"docstring_tokens":["creates","an","default","cell","type","ExtendedFormatRecord","object"]}
{"code_tokens":["\n","public","String","findSheetFirstNameFromExternSheet","(","int","externSheetIndex",")","{","\n","int","indexToSheet","=","linkTable",".","getFirstInternalSheetIndexForExtIndex","(","externSheetIndex",")",";","\n","return","findSheetNameFromIndex","(","indexToSheet",")",";","\n"],"docstring_tokens":["Finds","the","first","sheet","name","by","his","extern","sheet","index"]}
{"code_tokens":["\n","public","short","getFormat","(","String","format,","boolean","createIfNotFound",")","{","\n","for","(","FormatRecord","r",":","formats",")","{","\n","if","(","r",".","getFormatString","(",")",".","equals","(","format",")",")","{","\n","return","(","short",")","r",".","getIndexCode","(",")",";","\n","}","\n","}","\n\n","if","(","createIfNotFound",")","{","\n","return","(","short",")","createFormat","(","format",")",";","\n","}","\n\n","return","-1",";","\n"],"docstring_tokens":["Returns","a","format","index","that","matches","the","passed","in","format"]}
{"code_tokens":["\n","public","PaletteRecord","getCustomPalette","(",")","{","\n","PaletteRecord","palette",";","\n","int","palettePos","=","records",".","getPalettepos","(",")",";","\n","if","(","palettePos","!=","-1",")","{","\n","Record","rec","=","records",".","get","(","palettePos",")",";","\n","if","(","rec","instanceof","PaletteRecord",")","{","\n","palette","=","(","PaletteRecord",")","rec",";","\n","}","else","{","\n","throw","new","RuntimeException","(","\"InternalError:","Expected","PaletteRecord","but","got","a","'\"+rec+\"'\"",")",";","\n","}","\n","}","else","{","\n","palette","=","createPalette","(",")",";","\n","//Add","the","palette","record","after","the","bof","which","is","always","the","first","record\n","records",".","add","(","1,","palette",")",";","\n","records",".","setPalettepos","(","1",")",";","\n","}","\n","return","palette",";","\n"],"docstring_tokens":["Returns","the","custom","palette","in","use","for","this","workbook;","if","a","custom","palette","record","does","not","exist,","then","it","is","created"]}
{"code_tokens":["\n","public","void","createDrawingGroup","(",")","{","\n","if","(","drawingManager","==","null",")","{","\n","EscherContainerRecord","dggContainer","=","new","EscherContainerRecord","(",")",";","\n","EscherDggRecord","dgg","=","new","EscherDggRecord","(",")",";","\n","EscherOptRecord","opt","=","new","EscherOptRecord","(",")",";","\n","EscherSplitMenuColorsRecord","splitMenuColors","=","new","EscherSplitMenuColorsRecord","(",")",";","\n\n","dggContainer",".","setRecordId","(","(","short",")","0xF000",")",";","\n","dggContainer",".","setOptions","(","(","short",")","0x000F",")",";","\n","dgg",".","setRecordId","(","EscherDggRecord",".","RECORD_ID",")",";","\n","dgg",".","setOptions","(","(","short",")","0x0000",")",";","\n","dgg",".","setShapeIdMax","(","1024",")",";","\n","dgg",".","setNumShapesSaved","(","0",")",";","\n","dgg",".","setDrawingsSaved","(","0",")",";","\n","dgg",".","setFileIdClusters","(","new","EscherDggRecord",".","FileIdCluster[]","{","}",")",";","\n","drawingManager","=","new","DrawingManager2","(","dgg",")",";","\n","EscherContainerRecord","bstoreContainer","=","null",";","\n","if","(","!escherBSERecords",".","isEmpty","(",")",")","\n","{","\n","bstoreContainer","=","new","EscherContainerRecord","(",")",";","\n","bstoreContainer",".","setRecordId","(","EscherContainerRecord",".","BSTORE_CONTAINER",")",";","\n","bstoreContainer",".","setOptions","(","(","short",")","(","(","escherBSERecords",".","size","(",")","<<","4",")","|","0xF",")",")",";","\n","for","(","EscherRecord","escherRecord",":","escherBSERecords",")","{","\n","bstoreContainer",".","addChildRecord","(","escherRecord",")",";","\n","}","\n","}","\n","opt",".","setRecordId","(","(","short",")","0xF00B",")",";","\n","opt",".","setOptions","(","(","short",")","0x0033",")",";","\n","opt",".","addEscherProperty","(","new","EscherBoolProperty","(","EscherPropertyTypes",".","TEXT__SIZE_TEXT_TO_FIT_SHAPE,","524296",")",")",";","\n","opt",".","addEscherProperty","(","new","EscherRGBProperty","(","EscherPropertyTypes",".","FILL__FILLCOLOR,","0x08000041",")",")",";","\n","opt",".","addEscherProperty","(","new","EscherRGBProperty","(","EscherPropertyTypes",".","LINESTYLE__COLOR,","134217792",")",")",";","\n","splitMenuColors",".","setRecordId","(","(","short",")","0xF11E",")",";","\n","splitMenuColors",".","setOptions","(","(","short",")","0x0040",")",";","\n","splitMenuColors",".","setColor1","(","0x0800000D",")",";","\n","splitMenuColors",".","setColor2","(","0x0800000C",")",";","\n","splitMenuColors",".","setColor3","(","0x08000017",")",";","\n","splitMenuColors",".","setColor4","(","0x100000F7",")",";","\n\n","dggContainer",".","addChildRecord","(","dgg",")",";","\n","if","(","bstoreContainer","!=","null",")","{","\n","dggContainer",".","addChildRecord","(","bstoreContainer",")",";","\n","}","\n","dggContainer",".","addChildRecord","(","opt",")",";","\n","dggContainer",".","addChildRecord","(","splitMenuColors",")",";","\n\n","int","dgLoc","=","findFirstRecordLocBySid","(","DrawingGroupRecord",".","sid",")",";","\n","if","(","dgLoc","==","-1",")","{","\n","DrawingGroupRecord","drawingGroup","=","new","DrawingGroupRecord","(",")",";","\n","drawingGroup",".","addEscherRecord","(","dggContainer",")",";","\n","int","loc","=","findFirstRecordLocBySid","(","CountryRecord",".","sid",")",";","\n\n","getRecords","(",")",".","add","(","loc+1,","drawingGroup",")",";","\n","}","else","{","\n","DrawingGroupRecord","drawingGroup","=","new","DrawingGroupRecord","(",")",";","\n","drawingGroup",".","addEscherRecord","(","dggContainer",")",";","\n","getRecords","(",")",".","set","(","dgLoc,","drawingGroup",")",";","\n","}","\n\n","}","\n"],"docstring_tokens":["Creates","a","primary","drawing","group","record"]}
{"code_tokens":["\n","@Internal\n","public","WorkbookRecordList","getWorkbookRecordList","(",")","{","\n","return","records",";","\n"],"docstring_tokens":["Only","for","internal","calls","-","code","based","on","this","is","not","supported"]}
{"code_tokens":["\n","public","static","POITextExtractor","createExtractor","(","InputStream","input",")","throws","IOException","{","\n","return","createExtractor","(","input,","getCurrentUserPassword","(",")",")",";","\n"],"docstring_tokens":["Create","an","extractor","that","can","be","used","to","read","text","from","the","given","file"]}
{"code_tokens":["\n","public","static","String","getBuiltinFormat","(","int","index",")","{","\n","if","(","index","<","0","||","index",">=_formats",".","length",")","{","\n","return","null",";","\n","}","\n","return","_formats[index]",";","\n"],"docstring_tokens":["Get","the","format","string","that","matches","the","given","format","index"]}
{"code_tokens":["\n","public","short","getBorderType","(",")","\n","{","\n","return","field_1_borderType",";","\n"],"docstring_tokens":["Get","the","border","type","field","for","the","Frame","record"]}
{"code_tokens":["\n","public","void","setBorderType","(","short","field_1_borderType",")","\n","{","\n","this",".","field_1_borderType","=","field_1_borderType",";","\n"],"docstring_tokens":["Set","the","border","type","field","for","the","Frame","record"]}
{"code_tokens":["\n","public","short","getOptions","(",")","\n","{","\n","return","field_2_options",";","\n"],"docstring_tokens":["Get","the","options","field","for","the","Frame","record"]}
{"code_tokens":["\n","public","void","setOptions","(","short","field_2_options",")","\n","{","\n","this",".","field_2_options","=","field_2_options",";","\n"],"docstring_tokens":["Set","the","options","field","for","the","Frame","record"]}
{"code_tokens":["\n","//@Override\n","public","long","readUInt","(",")","{","\n","long","retNum","=","readInt","(",")",";","\n","return","retNum","&","0x00FFFFFFFFL",";","\n"],"docstring_tokens":["get","an","unsigned","int","value","from","an","InputStream"]}
{"code_tokens":["\n","public","void","addSection","(","final","Section","section",")","{","\n","sections",".","add","(","section",")",";","\n"],"docstring_tokens":["Adds","a","section","to","this","property","set"]}
{"code_tokens":["\n","public","void","clearSections","(",")","{","\n","sections",".","clear","(",")",";","\n"],"docstring_tokens":["Removes","all","sections","from","this","property","set"]}
{"code_tokens":["\n","public","void","write","(","final","OutputStream","out",")","throws","IOException,","WritingNotSupportedException","{","\n\n","out",".","write","(","toBytes","(",")",")",";","\n\n","/*","Indicate","that","we're","done","*/\n","out",".","close","(",")",";","\n"],"docstring_tokens":["Writes","the","property","set","to","an","output","stream"]}
{"code_tokens":["\n","public","void","write","(","final","DirectoryEntry","dir,","final","String","name",")","\n","throws","WritingNotSupportedException,","IOException","{","\n","/*","If","there","is","already","an","entry","with","the","same","name,","remove","it",".","*/\n","if","(","dir",".","hasEntry","(","name",")",")","{","\n","final","Entry","e","=","dir",".","getEntry","(","name",")",";","\n","e",".","delete","(",")",";","\n","}","\n\n","/*","Create","the","new","entry",".","*/\n","dir",".","createDocument","(","name,","toInputStream","(",")",")",";","\n"],"docstring_tokens":["Writes","a","property","set","to","a","document","in","a","POI","filesystem","directory"]}
{"code_tokens":["\n","public","boolean","isSummaryInformation","(",")","{","\n","return","!sections",".","isEmpty","(",")","&&","matchesSummary","(","getFirstSection","(",")",".","getFormatID","(",")",",","SummaryInformation",".","FORMAT_ID",")",";","\n"],"docstring_tokens":["Checks","whether","this","PropertySet","represents","a","Summary","Information"]}
{"code_tokens":["\n","public","boolean","isDocumentSummaryInformation","(",")","{","\n","return","!sections",".","isEmpty","(",")","&&","matchesSummary","(","getFirstSection","(",")",".","getFormatID","(",")",",","DocumentSummaryInformation",".","FORMAT_ID",")",";","\n"],"docstring_tokens":["Checks","whether","this","PropertySet","is","a","Document","Summary","Information"]}
{"code_tokens":["\n","@SuppressWarnings","(","\"WeakerAccess\"",")","\n","public","Section","getFirstSection","(",")","{","\n","if","(","sections",".","isEmpty","(",")",")","{","\n","throw","new","MissingSectionException","(","\"Property","set","does","not","contain","any","sections",".","\"",")",";","\n","}","\n","return","sections",".","get","(","0",")",";","\n"],"docstring_tokens":["Gets","the","PropertySets","first","section"]}
{"code_tokens":["\n","@Override\n","public","boolean","equals","(","final","Object","o",")","{","\n","if","(","!","(","o","instanceof","PropertySet",")",")","{","\n","return","false",";","\n","}","\n","final","PropertySet","ps","=","(","PropertySet",")","o",";","\n","int","byteOrder1","=","ps",".","getByteOrder","(",")",";","\n","int","byteOrder2","=","getByteOrder","(",")",";","\n","ClassID","classID1","=","ps",".","getClassID","(",")",";","\n","ClassID","classID2","=","getClassID","(",")",";","\n","int","format1","=","ps",".","getFormat","(",")",";","\n","int","format2","=","getFormat","(",")",";","\n","int","osVersion1","=","ps",".","getOSVersion","(",")",";","\n","int","osVersion2","=","getOSVersion","(",")",";","\n","int","sectionCount1","=","ps",".","getSectionCount","(",")",";","\n","int","sectionCount2","=","getSectionCount","(",")",";","\n","if","(","byteOrder1","!=","byteOrder2","||\n","!classID1",".","equals","(","classID2",")","||\n","format1","!=","format2","||\n","osVersion1","!=","osVersion2","||\n","sectionCount1","!=","sectionCount2",")","{","\n","return","false",";","\n","}","\n\n","/*","Compare","the","sections:","*/\n","return","getSections","(",")",".","containsAll","(","ps",".","getSections","(",")",")",";","\n"],"docstring_tokens":["Returns","true","if","the","PropertySet","is","equal","to","the","specified","parameter,","else","false"]}
{"code_tokens":["\n","public","static","short","getShort","(","byte[]","data,","int","offset",")","{","\n","int","b0","=","data[offset]","&","0xFF",";","\n","int","b1","=","data[offset","+","1]","&","0xFF",";","\n","return","(","short",")","(","(","b1","<<","8",")","+","(","b0",")",")",";","\n"],"docstring_tokens":["get","a","short","value","from","a","byte","array"]}
{"code_tokens":["\n","public","static","long","getUInt","(","byte[]","data,","int","offset",")","{","\n","long","retNum","=","getInt","(","data,","offset",")",";","\n","return","retNum","&","0x00FFFFFFFFL",";","\n"],"docstring_tokens":["get","an","unsigned","int","value","from","a","byte","array"]}
{"code_tokens":["\n","public","static","int","getUShort","(","byte[]","data,","int","offset",")","{","\n","int","b0","=","data[offset]","&","0xFF",";","\n","int","b1","=","data[offset","+","1]","&","0xFF",";","\n","return","(","b1","<<","8",")","+","(","b0",")",";","\n"],"docstring_tokens":["get","an","unsigned","short","value","from","a","byte","array"]}
{"code_tokens":["\n","public","static","void","putInt","(","byte[]","data,","int","offset,","int","value",")","{","\n","int","i","=","offset",";","\n","data[i++]","=","(","byte",")","(","(","value",")","&","0xFF",")",";","\n","data[i++]","=","(","byte",")","(","(","value",">>>","8",")","&","0xFF",")",";","\n","data[i++]","=","(","byte",")","(","(","value",">>>","16",")","&","0xFF",")",";","\n","data[i]","=","(","byte",")","(","(","value",">>>","24",")","&","0xFF",")",";","\n"],"docstring_tokens":["put","an","int","value","into","a","byte","array"]}
{"code_tokens":["\n","public","static","void","putLong","(","byte[]","data,","int","offset,","long","value",")","{","\n","data[offset","]","=","(","byte",")","(","(","value",")","&","0xFF",")",";","\n","data[offset","+","1]","=","(","byte",")","(","(","value",">>>","8",")","&","0xFF",")",";","\n","data[offset","+","2]","=","(","byte",")","(","(","value",">>>","16",")","&","0xFF",")",";","\n","data[offset","+","3]","=","(","byte",")","(","(","value",">>>","24",")","&","0xFF",")",";","\n","data[offset","+","4]","=","(","byte",")","(","(","value",">>>","32",")","&","0xFF",")",";","\n","data[offset","+","5]","=","(","byte",")","(","(","value",">>>","40",")","&","0xFF",")",";","\n","data[offset","+","6]","=","(","byte",")","(","(","value",">>>","48",")","&","0xFF",")",";","\n","data[offset","+","7]","=","(","byte",")","(","(","value",">>>","56",")","&","0xFF",")",";","\n"],"docstring_tokens":["put","a","long","value","into","a","byte","array"]}
{"code_tokens":["\n","public","static","void","putShort","(","byte[]","data,","int","offset,","short","value",")","{","\n","int","i","=","offset",";","\n","data[i++]","=","(","byte",")","(","(","value",")","&","0xFF",")",";","\n","data[i","]","=","(","byte",")","(","(","value",">>>","8",")","&","0xFF",")",";","\n"],"docstring_tokens":["put","a","short","value","into","a","byte","array"]}
{"code_tokens":["\n","public","static","void","putUShort","(","byte[]","data,","int","offset,","int","value",")","{","\n","int","i","=","offset",";","\n","data[i++]","=","(","byte",")","(","(","value",")","&","0xFF",")",";","\n","data[i","]","=","(","byte",")","(","(","value",">>>","8",")","&","0xFF",")",";","\n"],"docstring_tokens":["put","an","unsigned","short","value","into","a","byte","array"]}
{"code_tokens":["\n","public","static","int","readInt","(","InputStream","stream",")","throws","IOException","{","\n","int","ch1","=","stream",".","read","(",")",";","\n","int","ch2","=","stream",".","read","(",")",";","\n","int","ch3","=","stream",".","read","(",")",";","\n","int","ch4","=","stream",".","read","(",")",";","\n","if","(","(","ch1","|","ch2","|","ch3","|","ch4",")","<","0",")","\n","{","\n","throw","new","BufferUnderrunException","(",")",";","\n","}","\n","return","(","ch4","<<","24",")","+","(","ch3","<<","16",")","+","(","ch2","<<","8",")","+","(","ch1",")",";","\n"],"docstring_tokens":["get","an","int","value","from","an","InputStream"]}
{"code_tokens":["\n","public","static","long","readLong","(","InputStream","stream",")","throws","IOException","{","\n","int","ch1","=","stream",".","read","(",")",";","\n","int","ch2","=","stream",".","read","(",")",";","\n","int","ch3","=","stream",".","read","(",")",";","\n","int","ch4","=","stream",".","read","(",")",";","\n","int","ch5","=","stream",".","read","(",")",";","\n","int","ch6","=","stream",".","read","(",")",";","\n","int","ch7","=","stream",".","read","(",")",";","\n","int","ch8","=","stream",".","read","(",")",";","\n","if","(","(","ch1","|","ch2","|","ch3","|","ch4","|","ch5","|","ch6","|","ch7","|","ch8",")","<","0",")","{","\n","throw","new","BufferUnderrunException","(",")",";","\n","}","\n\n","return","(","(","long",")","ch8","<<","56",")","+","(","(","long",")","ch7","<<","48",")","\n","+","(","(","long",")","ch6","<<","40",")","+","(","(","long",")","ch5","<<","32",")","\n","+","(","(","long",")","ch4","<<","24",")","+","//","cast","to","long","to","preserve","bit","31\n","//","(","sign","bit","for","ints",")","\n","(","ch3","<<","16",")","+","(","ch2","<<","8",")","+","(","ch1",")",";","\n"],"docstring_tokens":["get","a","long","value","from","an","InputStream"]}
{"code_tokens":["\n","public","XSLFSlideLayout","getLayout","(","SlideLayout","type",")","{","\n","for","(","XSLFSlideLayout","layout",":","getLayouts","(",")",".","values","(",")",")","{","\n","if","(","layout",".","getType","(",")","==","type",")","{","\n","return","layout",";","\n","}","\n","}","\n","return","null",";","\n"],"docstring_tokens":["Get","the","slide","layout","by","type"]}
{"code_tokens":["\n","public","boolean","isItalic","(",")","{","\n","return","italic",".","isSet","(","field_2_attributes",")",";","\n"],"docstring_tokens":["get","whether","the","font","is","to","be","italics","or","not"]}
{"code_tokens":["\n","public","boolean","isStruckout","(",")","{","\n","return","strikeout",".","isSet","(","field_2_attributes",")",";","\n"],"docstring_tokens":["get","whether","the","font","is","to","be","stricken","out","or","not"]}
{"code_tokens":["\n","public","void","cloneStyleFrom","(","FontRecord","source",")","{","\n","field_1_font_height","=","source",".","field_1_font_height",";","\n","field_2_attributes","=","source",".","field_2_attributes",";","\n","field_3_color_palette_index","=","source",".","field_3_color_palette_index",";","\n","field_4_bold_weight","=","source",".","field_4_bold_weight",";","\n","field_5_super_sub_script","=","source",".","field_5_super_sub_script",";","\n","field_6_underline","=","source",".","field_6_underline",";","\n","field_7_family","=","source",".","field_7_family",";","\n","field_8_charset","=","source",".","field_8_charset",";","\n","field_9_zero","=","source",".","field_9_zero",";","\n","field_11_font_name","=","source",".","field_11_font_name",";","\n"],"docstring_tokens":["Clones","all","the","font","style","information","from","another","FontRecord,","onto","this","one"]}
{"code_tokens":["\n","@Override\n","public","XSSFConditionalFormatting","getConditionalFormattingAt","(","int","index",")","{","\n","checkIndex","(","index",")",";","\n","CTConditionalFormatting","cf","=","_sheet",".","getCTWorksheet","(",")",".","getConditionalFormattingArray","(","index",")",";","\n","return","new","XSSFConditionalFormatting","(","_sheet,","cf",")",";","\n"],"docstring_tokens":["gets","Conditional","Formatting","object","at","a","particular","index"]}
{"code_tokens":["\n","@Override\n","public","void","removeConditionalFormatting","(","int","index",")","{","\n","checkIndex","(","index",")",";","\n","_sheet",".","getCTWorksheet","(",")",".","removeConditionalFormatting","(","index",")",";","\n"],"docstring_tokens":["removes","a","Conditional","Formatting","object","by","index"]}
{"code_tokens":["\n","public","static","int","pixelToEMU","(","int","pixels",")","{","\n","return","pixels*EMU_PER_PIXEL",";","\n"],"docstring_tokens":["Converts","pixels","to","EMUs"]}
{"code_tokens":["\n","public","void","addCRL","(","byte[]","encodedCrl",")","{","\n","if","(","this",".","crls",".","stream","(",")",".","noneMatch","(","by","->","Arrays",".","equals","(","by,","encodedCrl",")",")",")","{","\n","this",".","crls",".","add","(","encodedCrl",")",";","\n","}","\n"],"docstring_tokens":["Adds","a","CRL","to","this","revocation","data","set"]}
{"code_tokens":["\n","public","void","addOCSP","(","byte[]","encodedOcsp",")","{","\n","this",".","ocsps",".","add","(","encodedOcsp",")",";","\n"],"docstring_tokens":["Adds","an","OCSP","response","to","this","revocation","data","set"]}
{"code_tokens":["\n","public","boolean","hasOCSPs","(",")","{","\n","return","!this",".","ocsps",".","isEmpty","(",")",";","\n"],"docstring_tokens":["Returns","true","if","this","revocation","data","set","holds","OCSP","responses"]}
{"code_tokens":["\n","public","boolean","hasCRLs","(",")","{","\n","return","!this",".","crls",".","isEmpty","(",")",";","\n"],"docstring_tokens":["Returns","true","if","this","revocation","data","set","holds","CRLs"]}
{"code_tokens":["\n","public","Map<MAPIProperty,","List<PropertyValue>>","getProperties","(",")","{","\n","Map<MAPIProperty,","List<PropertyValue>>","props","=\n","new","HashMap<>","(","properties",".","size","(",")",")",";","\n","for","(","MAPIProperty","prop",":","properties",".","keySet","(",")",")","{","\n","props",".","put","(","prop,","getValues","(","prop",")",")",";","\n","}","\n","return","props",";","\n"],"docstring_tokens":["Returns","all","the","properties","in","the","chunk,","along","with","their","values"]}
{"code_tokens":["\n","public","void","writeProperties","(","DirectoryEntry","directory",")","throws","IOException","{","\n","try","(","UnsynchronizedByteArrayOutputStream","baos","=","new","UnsynchronizedByteArrayOutputStream","(",")",")","{","\n","List<PropertyValue>","values","=","writeProperties","(","baos",")",";","\n\n","//","write","the","header","data","with","the","properties","declaration\n","try","(","InputStream","is","=","baos",".","toInputStream","(",")",")","{","\n","directory",".","createDocument","(","PropertiesChunk",".","NAME,","is",")",";","\n","}","\n\n","//","write","the","property","values\n","writeNodeData","(","directory,","values",")",";","\n","}","\n"],"docstring_tokens":["Writes","this","chunk","in","the","specified","DirectoryEntry"]}
{"code_tokens":["\n","protected","List<PropertyValue>","writeProperties","(","OutputStream","out",")","throws","IOException","{","\n","List<PropertyValue>","variableLengthProperties","=","new","ArrayList<>","(",")",";","\n","for","(","Entry<MAPIProperty,","PropertyValue>","entry",":","properties",".","entrySet","(",")",")","{","\n","MAPIProperty","property","=","entry",".","getKey","(",")",";","\n","PropertyValue","value","=","entry",".","getValue","(",")",";","\n","if","(","value","==","null",")","{","\n","continue",";","\n","}","\n","if","(","property",".","id","<","0",")","{","\n","continue",";","\n","}","\n","//","generic","header\n","//","page","23,","point","2",".","4",".","2\n","//","tag","is","the","property","id","and","its","type\n","long","tag","=","Long",".","parseLong","(","getFileName","(","property,","value",".","getActualType","(",")",")",",","16",")",";","\n","LittleEndian",".","putUInt","(","tag,","out",")",";","\n","LittleEndian",".","putUInt","(","value",".","getFlags","(",")",",","out",")",";","//","readable","+","writable\n\n","MAPIType","type","=","getTypeMapping","(","value",".","getActualType","(",")",")",";","\n","if","(","type",".","isFixedLength","(",")",")","{","\n","//","page","11,","point","2",".","1",".","2\n","writeFixedLengthValueHeader","(","out,","property,","type,","value",")",";","\n","}","else","{","\n","//","page","12,","point","2",".","1",".","3\n","writeVariableLengthValueHeader","(","out,","property,","type,","value",")",";","\n","variableLengthProperties",".","add","(","value",")",";","\n","}","\n","}","\n","return","variableLengthProperties",";","\n"],"docstring_tokens":["Writes","the","header","of","the","properties"]}
{"code_tokens":["\n","@Internal\n","public","void","setReserved1","(","byte","value",")","\n","{","\n","field_4_flags","=","(","byte",")","reserved1",".","setValue","(","field_4_flags,","value",")",";","\n"],"docstring_tokens":["Sets","the","reserved1","field","value"]}
{"code_tokens":["\n","static","CTGraphicalObjectFrame","prototype","(","int","shapeId,","String","rID,","Rectangle2D","anchor",")","{","\n","CTGraphicalObjectFrame","frame","=","CTGraphicalObjectFrame",".","Factory",".","newInstance","(",")",";","\n","CTGraphicalObjectFrameNonVisual","nvGr","=","frame",".","addNewNvGraphicFramePr","(",")",";","\n\n","CTNonVisualDrawingProps","cnv","=","nvGr",".","addNewCNvPr","(",")",";","\n","cnv",".","setName","(","\"Chart","\"","+","shapeId",")",";","\n","cnv",".","setId","(","shapeId",")",";","\n","nvGr",".","addNewCNvGraphicFramePr","(",")",".","addNewGraphicFrameLocks","(",")",".","setNoGrp","(","true",")",";","\n","nvGr",".","addNewNvPr","(",")",";","\n\n","CTTransform2D","xfrm","=","frame",".","addNewXfrm","(",")",";","\n\n","CTPoint2D","off","=","xfrm",".","addNewOff","(",")",";","\n","off",".","setX","(","(","int",")","anchor",".","getX","(",")",")",";","\n","off",".","setY","(","(","int",")","anchor",".","getY","(",")",")",";","\n\n","CTPositiveSize2D","ext","=","xfrm",".","addNewExt","(",")",";","\n","ext",".","setCx","(","(","int",")","anchor",".","getWidth","(",")",")",";","\n","ext",".","setCy","(","(","int",")","anchor",".","getHeight","(",")",")",";","\n\n","xfrm",".","setExt","(","ext",")",";","\n","xfrm",".","setOff","(","off",")",";","\n\n","CTGraphicalObjectData","gr","=","frame",".","addNewGraphic","(",")",".","addNewGraphicData","(",")",";","\n","XmlCursor","grCur","=","gr",".","newCursor","(",")",";","\n","try","{","\n","grCur",".","toNextToken","(",")",";","\n","grCur",".","beginElement","(","new","QName","(","CHART_URI,","\"chart\"",")",")",";","\n","grCur",".","insertAttributeWithValue","(","\"id\",","PackageRelationshipTypes",".","CORE_PROPERTIES_ECMA376_NS,","rID",")",";","\n","}","finally","{","\n","grCur",".","dispose","(",")",";","\n","}","\n\n","gr",".","setUri","(","CHART_URI",")",";","\n","return","frame",";","\n"],"docstring_tokens":["method","to","add","graphic","frame","for","XSLF","chart"]}
{"code_tokens":["\n","public","static","ToHtml","create","(","Workbook","wb,","Appendable","output",")","{","\n","return","new","ToHtml","(","wb,","output",")",";","\n"],"docstring_tokens":["Creates","a","new","examples","to","HTML","for","the","given","workbook"]}
{"code_tokens":["\n","private","Map<Integer,","Integer>","computeWidths","(","Sheet","sheet",")","{","\n","Map<Integer,","Integer>","ret","=","new","TreeMap<>","(",")",";","\n","int","tableWidth","=","0",";","\n\n","ensureColumnBounds","(","sheet",")",";","\n\n","//","compute","width","of","the","header","column\n","int","lastRowNum","=","sheet",".","getLastRowNum","(",")",";","\n","int","headerCharCount","=","String",".","valueOf","(","lastRowNum",")",".","length","(",")",";","\n","int","headerColWidth","=","widthToPixels","(","(","headerCharCount","+","1",")","*","256",".","0",")",";","\n","ret",".","put","(","IDX_HEADER_COL_WIDTH,","headerColWidth",")",";","\n","tableWidth","+=","headerColWidth",";","\n\n","for","(","int","i","=","firstColumn",";","i","<","endColumn",";","i++",")","{","\n","int","colWidth","=","widthToPixels","(","sheet",".","getColumnWidth","(","i",")",")",";","\n","ret",".","put","(","i,","colWidth",")",";","\n","tableWidth","+=","colWidth",";","\n","}","\n\n","ret",".","put","(","IDX_TABLE_WIDTH,","tableWidth",")",";","\n","return","ret",";","\n"],"docstring_tokens":["computes","the","column","widths,","defined","by","the","sheet"]}
{"code_tokens":["\n","public","void","clearAll","(",")","{","\n","this",".","defaultContentType",".","clear","(",")",";","\n","if","(","this",".","overrideContentType","!=","null",")","{","\n","this",".","overrideContentType",".","clear","(",")",";","\n","}","\n"],"docstring_tokens":["Clear","all","content","types"]}
{"code_tokens":["\n","private","void","parseContentTypesFile","(","InputStream","in",")","\n","throws","InvalidFormatException","{","\n","try","{","\n","Document","xmlContentTypetDoc","=","DocumentHelper",".","readDocument","(","in",")",";","\n\n","//","Default","content","types\n","NodeList","defaultTypes","=","xmlContentTypetDoc",".","getDocumentElement","(",")",".","getElementsByTagNameNS","(","TYPES_NAMESPACE_URI,","DEFAULT_TAG_NAME",")",";","\n","int","defaultTypeCount","=","defaultTypes",".","getLength","(",")",";","\n","for","(","int","i","=","0",";","i","<","defaultTypeCount",";","i++",")","{","\n","Element","element","=","(","Element",")","defaultTypes",".","item","(","i",")",";","\n","String","extension","=","element",".","getAttribute","(","EXTENSION_ATTRIBUTE_NAME",")",";","\n","String","contentType","=","element",".","getAttribute","(","CONTENT_TYPE_ATTRIBUTE_NAME",")",";","\n","addDefaultContentType","(","extension,","contentType",")",";","\n","}","\n\n","//","Overriden","content","types\n","NodeList","overrideTypes","=","xmlContentTypetDoc",".","getDocumentElement","(",")",".","getElementsByTagNameNS","(","TYPES_NAMESPACE_URI,","OVERRIDE_TAG_NAME",")",";","\n","int","overrideTypeCount","=","overrideTypes",".","getLength","(",")",";","\n","for","(","int","i","=","0",";","i","<","overrideTypeCount",";","i++",")","{","\n","Element","element","=","(","Element",")","overrideTypes",".","item","(","i",")",";","\n","URI","uri","=","new","URI","(","element",".","getAttribute","(","PART_NAME_ATTRIBUTE_NAME",")",")",";","\n","PackagePartName","partName","=","PackagingURIHelper",".","createPartName","(","uri",")",";","\n","String","contentType","=","element",".","getAttribute","(","CONTENT_TYPE_ATTRIBUTE_NAME",")",";","\n","addOverrideContentType","(","partName,","contentType",")",";","\n","}","\n","}","catch","(","URISyntaxException","|","IOException","|","SAXException","e",")","{","\n","throw","new","InvalidFormatException","(","e",".","getMessage","(",")",")",";","\n","}","\n"],"docstring_tokens":["Parse","the","content","types","part"]}
{"code_tokens":["\n","public","boolean","save","(","OutputStream","outStream",")","{","\n","Document","xmlOutDoc","=","DocumentHelper",".","createDocument","(",")",";","\n\n","//","Building","namespace\n","Element","typesElem","=","xmlOutDoc",".","createElementNS","(","TYPES_NAMESPACE_URI,","TYPES_TAG_NAME",")",";","\n","xmlOutDoc",".","appendChild","(","typesElem",")",";","\n\n","//","Adding","default","types\n","for","(","Entry<String,","String>","entry",":","defaultContentType",".","entrySet","(",")",")","{","\n","appendDefaultType","(","typesElem,","entry",")",";","\n","}","\n\n","//","Adding","specific","types","if","any","exist\n","if","(","overrideContentType","!=","null",")","{","\n","for","(","Entry<PackagePartName,","String>","entry",":","overrideContentType\n",".","entrySet","(",")",")","{","\n","appendSpecificTypes","(","typesElem,","entry",")",";","\n","}","\n","}","\n","xmlOutDoc",".","normalize","(",")",";","\n\n","//","Save","content","in","the","specified","output","stream\n","return","this",".","saveImpl","(","xmlOutDoc,","outStream",")",";","\n"],"docstring_tokens":["Save","the","contents","type","part"]}
{"code_tokens":["\n","private","void","appendSpecificTypes","(","Element","root,\n","Entry<PackagePartName,","String>","entry",")","{","\n","Element","specificType","=","root",".","getOwnerDocument","(",")",".","createElementNS","(","TYPES_NAMESPACE_URI,","OVERRIDE_TAG_NAME",")",";","\n","specificType",".","setAttribute","(","PART_NAME_ATTRIBUTE_NAME,","entry",".","getKey","(",")",".","getName","(",")",")",";","\n","specificType",".","setAttribute","(","CONTENT_TYPE_ATTRIBUTE_NAME,","entry",".","getValue","(",")",")",";","\n","root",".","appendChild","(","specificType",")",";","\n"],"docstring_tokens":["Use","to","append","specific","type","XML","elements,","use","by","the","save","method"]}
{"code_tokens":["\n","private","void","appendDefaultType","(","Element","root,","Entry<String,","String>","entry",")","{","\n","Element","defaultType","=","root",".","getOwnerDocument","(",")",".","createElementNS","(","TYPES_NAMESPACE_URI,","DEFAULT_TAG_NAME",")",";","\n","defaultType",".","setAttribute","(","EXTENSION_ATTRIBUTE_NAME,","entry",".","getKey","(",")",")",";","\n","defaultType",".","setAttribute","(","CONTENT_TYPE_ATTRIBUTE_NAME,","entry",".","getValue","(",")",")",";","\n","root",".","appendChild","(","defaultType",")",";","\n"],"docstring_tokens":["Use","to","append","default","types","XML","elements,","use","by","the","save","method"]}
{"code_tokens":["\n","public","static","String","getBiffName","(","int","sid",")","{","\n","//","Note","to","POI","developers:\n","//","Make","sure","you","delete","the","corresponding","entry","from\n","//","this","method","any","time","a","new","Record","subclass","is","created",".","\n","switch","(","sid",")","{","\n","case","PRINTSIZE_0033:","return","\"PRINTSIZE\"",";","\n","case","PLS_004D:","return","\"PLS\"",";","\n","case","0x0050:","return","\"DCON\"",";","//","Data","Consolidation","Information\n","case","0x007F:","return","\"IMDATA\"",";","\n","case","SHEETPR_0081:","return","\"SHEETPR\"",";","\n","case","SORT_0090:","return","\"SORT\"",";","//","Sorting","Options\n","case","0x0094:","return","\"LHRECORD\"",";","//",".","WK?","File","Conversion","Information\n","case","STANDARDWIDTH_0099:","return","\"STANDARDWIDTH\"",";","//Standard","Column","Width\n","case","SCL_00A0:","return","\"SCL\"",";","//","Window","Zoom","Magnification\n","case","0x00AE:","return","\"SCENMAN\"",";","//","Scenario","Output","Data\n\n","case","0x00B2:","return","\"SXVI\"",";","//","(","pivot","table",")","View","Item\n","case","0x00B4:","return","\"SXIVD\"",";","//","(","pivot","table",")","Row/Column","Field","IDs\n","case","0x00B5:","return","\"SXLI\"",";","//","(","pivot","table",")","Line","Item","Array\n\n","case","0x00D3:","return","\"OBPROJ\"",";","\n","case","0x00DC:","return","\"PARAMQRY\"",";","\n","case","0x00DE:","return","\"OLESIZE\"",";","\n","case","BITMAP_00E9:","return","\"BITMAP\"",";","\n","case","PHONETICPR_00EF:","return","\"PHONETICPR\"",";","\n","case","0x00F1:","return","\"SXEX\"",";","//","PivotTable","View","Extended","Information\n\n","case","LABELRANGES_015F:","return","\"LABELRANGES\"",";","\n","case","0x01BA:","return","\"CODENAME\"",";","\n","case","0x01A9:","return","\"USERBVIEW\"",";","\n","case","0x01AD:","return","\"QSI\"",";","\n\n","case","0x01C0:","return","\"EXCEL9FILE\"",";","\n\n","case","0x0802:","return","\"QSISXTAG\"",";","//","Pivot","Table","and","Query","Table","Extensions\n","case","0x0803:","return","\"DBQUERYEXT\"",";","\n","case","0x0805:","return","\"TXTQUERY\"",";","\n","case","0x0810:","return","\"SXVIEWEX9\"",";","//","Pivot","Table","Extensions\n\n","case","0x0812:","return","\"CONTINUEFRT\"",";","\n","case","QUICKTIP_0800:","return","\"QUICKTIP\"",";","\n","case","SHEETEXT_0862:","return","\"SHEETEXT\"",";","\n","case","0x0863:","return","\"BOOKEXT\"",";","\n","case","0x0864:","return","\"SXADDL\"",";","//","Pivot","Table","Additional","Info\n","case","SHEETPROTECTION_0867:","return","\"SHEETPROTECTION\"",";","\n","case","0x086B:","return","\"DATALABEXTCONTENTS\"",";","\n","case","0x086C:","return","\"CELLWATCH\"",";","\n","case","FeatRecord",".","v11_sid:","return","\"SHARED","FEATURE","v11\"",";","\n","case","0x0874:","return","\"DROPDOWNOBJIDS\"",";","\n","case","0x0876:","return","\"DCONN\"",";","\n","case","FeatRecord",".","v12_sid:","return","\"SHARED","FEATURE","v12\"",";","\n","case","0x087B:","return","\"CFEX\"",";","\n","case","0x087C:","return","\"XFCRC\"",";","\n","case","0x087D:","return","\"XFEXT\"",";","\n","case","0x087F:","return","\"CONTINUEFRT12\"",";","\n","case","0x088B:","return","\"PLV\"",";","\n","case","0x088C:","return","\"COMPAT12\"",";","\n","case","0x088D:","return","\"DXF\"",";","\n","case","0x0892:","return","\"STYLEEXT\"",";","\n","case","0x0896:","return","\"THEME\"",";","\n","case","0x0897:","return","\"GUIDTYPELIB\"",";","\n","case","0x089A:","return","\"MTRSETTINGS\"",";","\n","case","0x089B:","return","\"COMPRESSPICTURES\"",";","\n","case","HEADER_FOOTER_089C:","return","\"HEADERFOOTER\"",";","\n","case","0x089D:","return","\"CRTLAYOUT12\"",";","\n","case","0x089E:","return","\"CRTMLFRT\"",";","\n","case","0x089F:","return","\"CRTMLFRTCONTINUE\"",";","\n","case","0x08A1:","return","\"SHAPEPROPSSTREAM\"",";","\n","case","0x08A3:","return","\"FORCEFULLCALCULATION\"",";","\n","case","0x08A4:","return","\"SHAPEPROPSSTREAM\"",";","\n","case","0x08A5:","return","\"TEXTPROPSSTREAM\"",";","\n","case","0x08A6:","return","\"RICHTEXTSTREAM\"",";","\n","case","0x08A7:","return","\"CRTLAYOUT12A\"",";","\n\n","case","0x08C8:","return","\"PLV","{","Mac","Excel","}","\"",";","\n\n","case","0x1001:","return","\"UNITS\"",";","\n","case","0x1006:","return","\"CHARTDATAFORMAT\"",";","\n","case","0x1007:","return","\"CHARTLINEFORMAT\"",";","\n","}","\n","if","(","isObservedButUnknown","(","sid",")",")","{","\n","return","\"UNKNOWN-\"","+","Integer",".","toHexString","(","sid",")",".","toUpperCase","(","Locale",".","ROOT",")",";","\n","}","\n\n","return","null",";","\n"],"docstring_tokens":["These","BIFF","record","types","are","known","but","still","uninterpreted","by","POI"]}
{"code_tokens":["\n","public","BufferedImage","readGDIImage","(","final","byte[]","data",")","{","\n","int[]","nBits,","bOffs",";","\n","switch","(","pixelFormat",")","{","\n","case","ARGB_32BPP:\n","nBits","=","new","int[]","{","8,","8,","8,","8","}",";","\n","bOffs","=","new","int[]","{","2,","1,","0,","3","}",";","\n","break",";","\n","case","RGB_24BPP:\n","nBits","=","new","int[]","{","8,","8,","8","}",";","\n","bOffs","=","new","int[]","{","2,","1,","0","}",";","\n","break",";","\n","default:\n","throw","new","RuntimeException","(","\"not","yet","implemented\"",")",";","\n","}","\n\n","ColorSpace","cs","=","ColorSpace",".","getInstance","(","ColorSpace",".","CS_sRGB",")",";","\n","ComponentColorModel","cm","=","new","ComponentColorModel\n","(","cs,","nBits,","pixelFormat",".","isAlpha","(",")",",","pixelFormat",".","isPreMultiplied","(",")",",","Transparency",".","TRANSLUCENT,","DataBuffer",".","TYPE_BYTE",")",";","\n","PixelInterleavedSampleModel","csm","=\n","new","PixelInterleavedSampleModel","(","cm",".","getTransferType","(",")",",","width,","height,","cm",".","getNumComponents","(",")",",","stride,","bOffs",")",";","\n\n","DataBufferByte","dbb","=","new","DataBufferByte","(","data,","data",".","length",")",";","\n","WritableRaster","raster","=","(","WritableRaster",")","Raster",".","createRaster","(","csm,","dbb,","null",")",";","\n\n","return","new","BufferedImage","(","cm,","raster,","cm",".","isAlphaPremultiplied","(",")",",","null",")",";","\n"],"docstring_tokens":["Converts","the","gdi","pixel","data","to","a","buffered","image"]}
{"code_tokens":["\n","public","int","getSignature","(",")","{","\n","return","(","colorSpace","==","ColorSpace",".","rgb",")","\n","?","(","getUIDInstanceCount","(",")","==","1","?","0x46A0",":","0x46B0",")","\n",":","(","getUIDInstanceCount","(",")","==","1","?","0x6E20",":","0x6E30",")",";","\n"],"docstring_tokens":["JPEG","signature","is","one","of","0x46A0,","0x46B0,","0x6E20,","0x6E30"]}
{"code_tokens":["\n","@Override\n","public","String","getTitle","(",")","{","\n","for","(","List<HSLFTextParagraph>","tp",":","getTextParagraphs","(",")",")","{","\n","if","(","tp",".","isEmpty","(",")",")","{","\n","continue",";","\n","}","\n","int","type","=","tp",".","get","(","0",")",".","getRunType","(",")",";","\n","if","(","TextPlaceholder",".","isTitle","(","type",")",")","{","\n","String","str","=","HSLFTextParagraph",".","getRawText","(","tp",")",";","\n","return","HSLFTextParagraph",".","toExternalString","(","str,","type",")",";","\n","}","\n","}","\n","return","null",";","\n"],"docstring_tokens":["The","title","is","a","run","of","text","of","type","TextHeaderAtom.CENTER_TITLE_TYPE","or","TextHeaderAtom.TITLE_TYPE"]}
{"code_tokens":["\n","@Override\n","public","HSLFMasterSheet","getMasterSheet","(",")","{","\n","int","masterId","=","getSlideRecord","(",")",".","getSlideAtom","(",")",".","getMasterID","(",")",";","\n","for","(","HSLFSlideMaster","sm",":","getSlideShow","(",")",".","getSlideMasters","(",")",")","{","\n","if","(","masterId","==","sm",".","_getSheetNumber","(",")",")","{","\n","return","sm",";","\n","}","\n","}","\n","for","(","HSLFTitleMaster","tm",":","getSlideShow","(",")",".","getTitleMasters","(",")",")","{","\n","if","(","masterId","==","tm",".","_getSheetNumber","(",")",")","{","\n","return","tm",";","\n","}","\n","}","\n","return","null",";","\n"],"docstring_tokens":["Returns","master","sheet","associated","with","this","slide"]}
{"code_tokens":["\n","public","void","setMasterSheet","(","HSLFMasterSheet","master",")","{","\n","SlideAtom","sa","=","getSlideRecord","(",")",".","getSlideAtom","(",")",";","\n","int","sheetNo","=","master",".","_getSheetNumber","(",")",";","\n","sa",".","setMasterID","(","sheetNo",")",";","\n"],"docstring_tokens":["Change","Master","of","this","slide"]}
{"code_tokens":["\n","@Override\n","public","void","setFollowMasterBackground","(","boolean","flag",")","{","\n","SlideAtom","sa","=","getSlideRecord","(",")",".","getSlideAtom","(",")",";","\n","sa",".","setFollowMasterBackground","(","flag",")",";","\n"],"docstring_tokens":["Sets","whether","this","slide","follows","master","background"]}
{"code_tokens":["\n","@Override\n","public","boolean","getFollowMasterBackground","(",")","{","\n","SlideAtom","sa","=","getSlideRecord","(",")",".","getSlideAtom","(",")",";","\n","return","sa",".","getFollowMasterBackground","(",")",";","\n"],"docstring_tokens":["Whether","this","slide","follows","master","sheet","background"]}
{"code_tokens":["\n","@Override\n","public","void","setFollowMasterObjects","(","boolean","flag",")","{","\n","SlideAtom","sa","=","getSlideRecord","(",")",".","getSlideAtom","(",")",";","\n","sa",".","setFollowMasterObjects","(","flag",")",";","\n"],"docstring_tokens":["Sets","whether","this","slide","draws","master","sheet","objects"]}
{"code_tokens":["\n","public","boolean","getFollowMasterScheme","(",")","{","\n","SlideAtom","sa","=","getSlideRecord","(",")",".","getSlideAtom","(",")",";","\n","return","sa",".","getFollowMasterScheme","(",")",";","\n"],"docstring_tokens":["Whether","this","slide","follows","master","color","scheme"]}
{"code_tokens":["\n","public","void","setFollowMasterScheme","(","boolean","flag",")","{","\n","SlideAtom","sa","=","getSlideRecord","(",")",".","getSlideAtom","(",")",";","\n","sa",".","setFollowMasterScheme","(","flag",")",";","\n"],"docstring_tokens":["Sets","whether","this","slide","draws","master","color","scheme"]}
{"code_tokens":["\n","@Override\n","public","boolean","getFollowMasterObjects","(",")","{","\n","SlideAtom","sa","=","getSlideRecord","(",")",".","getSlideAtom","(",")",";","\n","return","sa",".","getFollowMasterObjects","(",")",";","\n"],"docstring_tokens":["Whether","this","slide","draws","master","sheet","objects"]}
{"code_tokens":["\n","public","static","byte[]","toByteArray","(","InputStream","stream",")","throws","IOException","{","\n","return","toByteArray","(","stream,","Integer",".","MAX_VALUE",")",";","\n"],"docstring_tokens":["Reads","all","the","data","from","the","input","stream,","and","returns","the","bytes","read"]}
{"code_tokens":["\n","public","static","byte[]","toByteArray","(","InputStream","stream,","final","int","length",")","throws","IOException","{","\n","return","toByteArray","(","stream,","length,","Integer",".","MAX_VALUE",")",";","\n"],"docstring_tokens":["Reads","up","to","length","bytes","from","the","input","stream,","and","returns","the","bytes","read"]}
{"code_tokens":["\n","public","static","long","copy","(","InputStream","srcStream,","File","destFile",")","throws","IOException","{","\n","File","destDirectory","=","destFile",".","getParentFile","(",")",";","\n","if","(","!","(","destDirectory",".","exists","(",")","||","destDirectory",".","mkdirs","(",")",")",")","{","\n","throw","new","RuntimeException","(","\"Can't","create","destination","directory:","\"+destDirectory",")",";","\n","}","\n","try","(","OutputStream","destStream","=","new","FileOutputStream","(","destFile",")",")","{","\n","return","IOUtils",".","copy","(","srcStream,","destStream",")",";","\n","}","\n"],"docstring_tokens":["Copy","the","contents","of","the","stream","to","a","new","file"]}
{"code_tokens":["\n","public","static","long","calculateChecksum","(","InputStream","stream",")","throws","IOException","{","\n","final","Checksum","sum","=","new","CRC32","(",")",";","\n\n","final","byte[]","buf","=","new","byte[DEFAULT_BUFFER_SIZE]",";","\n","int","count",";","\n","while","(","(","count","=","stream",".","read","(","buf",")",")","!=","-1",")","{","\n","if","(","count",">","0",")","{","\n","sum",".","update","(","buf,","0,","count",")",";","\n","}","\n","}","\n","return","sum",".","getValue","(",")",";","\n"],"docstring_tokens":["Calculate","checksum","on","all","the","data","read","from","input","stream"]}
{"code_tokens":["\n","public","void","setMovieIndex","(","int","idx",")","{","\n","ExObjRefAtom","oe","=","getClientDataRecord","(","RecordTypes",".","ExObjRefAtom",".","typeID",")",";","\n","oe",".","setExObjIdRef","(","idx",")",";","\n\n","AnimationInfo","an","=","getClientDataRecord","(","RecordTypes",".","AnimationInfo",".","typeID",")",";","\n","if","(","an","!=","null",")","{","\n","AnimationInfoAtom","ai","=","an",".","getAnimationInfoAtom","(",")",";","\n","ai",".","setDimColor","(","0x07000000",")",";","\n","ai",".","setFlag","(","AnimationInfoAtom",".","Automatic,","true",")",";","\n","ai",".","setFlag","(","AnimationInfoAtom",".","Play,","true",")",";","\n","ai",".","setFlag","(","AnimationInfoAtom",".","Synchronous,","true",")",";","\n","ai",".","setOrderID","(","idx","+","1",")",";","\n","}","\n"],"docstring_tokens":["Assign","a","movie","to","this","shape"]}
{"code_tokens":["\n","public","void","readFrom","(","InputStream","is",")","throws","IOException","{","\n","try","{","\n","theme","=","ThemeDocument",".","Factory",".","parse","(","is,","DEFAULT_XML_OPTIONS",")",";","\n","}","catch","(","XmlException","e",")","{","\n","throw","new","IOException","(","e",".","getLocalizedMessage","(",")",",","e",")",";","\n","}","\n"],"docstring_tokens":["Read","this","themes","table","from","an","XML","file"]}
{"code_tokens":["\n","public","HSSFColor","findColor","(","byte","red,","byte","green,","byte","blue",")","\n","{","\n","byte[]","b","=","_palette",".","getColor","(","PaletteRecord",".","FIRST_COLOR_INDEX",")",";","\n","for","(","short","i","=","PaletteRecord",".","FIRST_COLOR_INDEX",";","b","!=","null",";","\n","b","=","_palette",".","getColor","(","++i",")",")","\n","{","\n","if","(","b[0]","==","red","&&","b[1]","==","green","&&","b[2]","==","blue",")","\n","{","\n","return","new","CustomColor","(","i,","b",")",";","\n","}","\n","}","\n","return","null",";","\n"],"docstring_tokens":["Finds","the","first","occurrence","of","a","given","color"]}
{"code_tokens":["\n","public","void","findChunks","(",")","{","\n","ArrayList<Chunk>","chunksA","=","new","ArrayList<>","(",")",";","\n\n","if","(","getPointer","(",")",".","getOffset","(",")","==","0x64b3",")","{","\n","int","i","=","0",";","\n","i++",";","\n","}","\n\n","int","pos","=","0",";","\n","byte[]","contents","=","getStore","(",")",".","getContents","(",")",";","\n","try","{","\n","while","(","pos","<","contents",".","length",")","{","\n","//","Ensure","we","have","enough","data","to","create","a","chunk","from\n","int","headerSize","=","ChunkHeader",".","getHeaderSize","(","chunkFactory",".","getVersion","(",")",")",";","\n","if","(","pos+headerSize","<=","contents",".","length",")","{","\n","Chunk","chunk","=","chunkFactory",".","createChunk","(","contents,","pos",")",";","\n","chunksA",".","add","(","chunk",")",";","\n\n","pos","+=","chunk",".","getOnDiskSize","(",")",";","\n","}","else","{","\n","LOG",".","atWarn","(",")",".","log","(","\"Needed","{","}","bytes","to","create","the","next","chunk","header,","but","only","found","{","}","bytes,","ignoring","rest","of","data\",","box","(","headerSize",")",",box","(","contents",".","length","-","pos",")",")",";","\n","pos","=","contents",".","length",";","\n","}","\n","}","\n","}","\n","catch","(","Exception","e",")","\n","{","\n","LOG",".","atError","(",")",".","withThrowable","(","e",")",".","log","(","\"Failed","to","create","chunk","at","{","}",",","ignoring","rest","of","data",".","\",","box","(","pos",")",")",";","\n","}","\n\n","chunks","=","chunksA",".","toArray","(","new","Chunk[0]",")",";","\n"],"docstring_tokens":["Process","the","contents","of","the","stream","out","into","chunks"]}
{"code_tokens":["\n","public","PackageRelationship","findExistingRelation","(","PackagePart","packagePart",")","{","\n","return","_relationships",".","findExistingInternalRelation","(","packagePart",")",";","\n"],"docstring_tokens":["Check","if","the","new","part","was","already","added","before","via","PackagePart.addRelationship"]}
{"code_tokens":["\n","@Override\n","public","PackageRelationshipCollection","getRelationships","(",")","\n","throws","InvalidFormatException","{","\n","return","getRelationshipsCore","(","null",")",";","\n"],"docstring_tokens":["Retrieve","all","the","relationships","attached","to","this","part"]}
{"code_tokens":["\n","@Override\n","public","PackageRelationship","getRelationship","(","String","id",")","{","\n","return","this",".","_relationships",".","getRelationshipByID","(","id",")",";","\n"],"docstring_tokens":["Retrieves","a","package","relationship","from","its","id"]}
{"code_tokens":["\n","@Override\n","public","PackageRelationshipCollection","getRelationshipsByType","(","\n","String","relationshipType",")","throws","InvalidFormatException","{","\n","_container",".","throwExceptionIfWriteOnly","(",")",";","\n\n","return","getRelationshipsCore","(","relationshipType",")",";","\n"],"docstring_tokens":["Retrieve","all","relationships","attached","to","this","part","which","have","the","specified","type"]}
{"code_tokens":["\n","@Override\n","public","boolean","hasRelationships","(",")","{","\n","return","(","!this",".","_isRelationshipPart","&&","(","_relationships","!=","null","&&","!_relationships",".","isEmpty","(",")",")",")",";","\n"],"docstring_tokens":["Knows","if","the","part","have","any","relationships"]}
{"code_tokens":["\n","@Override\n","public","boolean","isRelationshipExists","(","PackageRelationship","rel",")","{","\n","return","rel","!=","null","&&","_relationships",".","getRelationshipByID","(","rel",".","getId","(",")",")","!=","null",";","\n"],"docstring_tokens":["Checks","if","the","specified","relationship","is","part","of","this","package","part"]}
{"code_tokens":["\n","public","PackagePart","getRelatedPart","(","PackageRelationship","rel",")","throws","InvalidFormatException","{","\n","//","Ensure","this","is","one","of","ours\n","if","(","!","isRelationshipExists","(","rel",")",")","{","\n","throw","new","IllegalArgumentException","(","\"Relationship","\"","+","rel","+","\"","doesn't","start","with","this","part","\"","+","_partName",")",";","\n","}","\n","//","Get","the","target","URI,","excluding","any","relative","fragments\n","URI","target","=","rel",".","getTargetURI","(",")",";","\n","if","(","target",".","getFragment","(",")","!=","null",")","{","\n","String","t","=","target",".","toString","(",")",";","\n","try","{","\n","target","=","new","URI","(","t",".","substring","(","0,","t",".","indexOf","(","'#'",")",")",")",";","\n","}","catch","(","URISyntaxException","e",")","{","\n","throw","new","InvalidFormatException","(","\"Invalid","target","URI:","\"","+","target",")",";","\n","}","\n","}","\n\n","//","Turn","that","into","a","name,","and","fetch\n","PackagePartName","relName","=","PackagingURIHelper",".","createPartName","(","target",")",";","\n","PackagePart","part","=","_container",".","getPart","(","relName",")",";","\n","if","(","part","==","null",")","{","\n","throw","new","IllegalArgumentException","(","\"No","part","found","for","relationship","\"","+","rel",")",";","\n","}","\n","return","part",";","\n"],"docstring_tokens":["Get","the","PackagePart","that","is","the","target","of","a","relationship"]}
{"code_tokens":["\n","public","InputStream","getInputStream","(",")","throws","IOException","{","\n","InputStream","inStream","=","this",".","getInputStreamImpl","(",")",";","\n","if","(","inStream","==","null",")","{","\n","throw","new","IOException","(","\"Can't","obtain","the","input","stream","from","\"\n","+","_partName",".","getName","(",")",")",";","\n","}","\n","return","inStream",";","\n"],"docstring_tokens":["Get","the","input","stream","of","this","part","to","read","its","content"]}
{"code_tokens":["\n","private","void","throwExceptionIfRelationship","(",")","\n","throws","InvalidOperationException","{","\n","if","(","this",".","_isRelationshipPart",")","\n","throw","new","InvalidOperationException","(","\n","\"Can","do","this","operation","on","a","relationship","part","!\"",")",";","\n"],"docstring_tokens":["Throws","an","exception","if","this","package","part","is","a","relationship","part"]}
{"code_tokens":["\n","/*","package","*/","void","loadRelationships","(",")","throws","InvalidFormatException","{","\n","if","(","this",".","_relationships","==","null","&&","!this",".","_isRelationshipPart",")","{","\n","this",".","throwExceptionIfRelationship","(",")",";","\n","_relationships","=","new","PackageRelationshipCollection","(","this",")",";","\n","}","\n"],"docstring_tokens":["Ensure","the","package","relationships","collection","instance","is","built"]}
{"code_tokens":["\n","@Override\n","public","int","compareTo","(","PackagePart","other",")","\n","{","\n","//","NOTE","could","also","throw","a","NullPointerException","(",")","if","desired\n","if","(","other","==","null",")","\n","return","-1",";","\n\n","return","PackagePartName",".","compare","(","this",".","_partName,","other",".","_partName",")",";","\n"],"docstring_tokens":["Compare","based","on","the","package","part","name,","using","a","natural","sort","order"]}
{"code_tokens":["\n","public","void","clear","(",")","{","\n"],"docstring_tokens":["Allows","sub-classes","to","clean","up","before","new","data","is","added"]}
{"code_tokens":["\n","protected","static","HSSFWorkbook","loadWorkbook","(","String","sampleFileName",")","{","\n","return","HSSFTestDataSamples",".","openSampleWorkbook","(","sampleFileName",")",";","\n"],"docstring_tokens":["Loads","a","workbook","from","the","given","filename","in","the","test","data","dir"]}
{"code_tokens":["\n","public","void","readValue","(","DocumentNode","node",")","{","\n","this",".","node","=","node",";","\n"],"docstring_tokens":["Links","the","chunk","to","a","document"]}
{"code_tokens":["\n","public","void","updateLocale","(","Locale","newLocale",")","{","\n","if","(","!localeIsAdapting","||","newLocale",".","equals","(","locale",")",")","return",";","\n\n","locale","=","newLocale",";","\n\n","dateSymbols","=","DateFormatSymbols",".","getInstance","(","locale",")",";","\n","decimalSymbols","=","DecimalFormatSymbols",".","getInstance","(","locale",")",";","\n","generalNumberFormat","=","new","ExcelGeneralNumberFormat","(","locale",")",";","\n\n","//","taken","from","Date",".","toString","(",")","\n","defaultDateformat","=","new","SimpleDateFormat","(","\"EEE","MMM","dd","HH:mm:ss","zzz","yyyy\",","dateSymbols",")",";","\n","defaultDateformat",".","setTimeZone","(","LocaleUtil",".","getUserTimeZone","(",")",")",";","\n\n","//","init","built-in","formats\n\n","formats",".","clear","(",")",";","\n","Format","zipFormat","=","ZipPlusFourFormat",".","instance",";","\n","addFormat","(","\"00000\\\\-0000\",","zipFormat",")",";","\n","addFormat","(","\"00000-0000\",","zipFormat",")",";","\n\n","Format","phoneFormat","=","PhoneFormat",".","instance",";","\n","//","allow","for","format","string","variations\n","addFormat","(","\"[<=9999999]###\\\\-####",";","\\\\","(","###\\\\",")","\\\\","###\\\\-####\",","phoneFormat",")",";","\n","addFormat","(","\"[<=9999999]###-####",";","(","###",")","###-####\",","phoneFormat",")",";","\n","addFormat","(","\"###\\\\-####",";","\\\\","(","###\\\\",")","\\\\","###\\\\-####\",","phoneFormat",")",";","\n","addFormat","(","\"###-####",";","(","###",")","###-####\",","phoneFormat",")",";","\n\n","Format","ssnFormat","=","SSNFormat",".","instance",";","\n","addFormat","(","\"000\\\\-00\\\\-0000\",","ssnFormat",")",";","\n","addFormat","(","\"000-00-0000\",","ssnFormat",")",";","\n"],"docstring_tokens":["Update","formats","when","locale","has","been","changed"]}
{"code_tokens":["\n","public","byte","getLinkType","(",")","\n","{","\n","return","field_1_linkType",";","\n"],"docstring_tokens":["Get","the","link","type","field","for","the","LinkedData","record"]}
{"code_tokens":["\n","public","void","setLinkType","(","byte","field_1_linkType",")","\n","{","\n","this",".","field_1_linkType","=","field_1_linkType",";","\n"],"docstring_tokens":["Set","the","link","type","field","for","the","LinkedData","record"]}
{"code_tokens":["\n","public","byte","getReferenceType","(",")","\n","{","\n","return","field_2_referenceType",";","\n"],"docstring_tokens":["Get","the","reference","type","field","for","the","LinkedData","record"]}
{"code_tokens":["\n","public","void","setReferenceType","(","byte","field_2_referenceType",")","\n","{","\n","this",".","field_2_referenceType","=","field_2_referenceType",";","\n"],"docstring_tokens":["Set","the","reference","type","field","for","the","LinkedData","record"]}
{"code_tokens":["\n","public","short","getOptions","(",")","\n","{","\n","return","field_3_options",";","\n"],"docstring_tokens":["Get","the","options","field","for","the","LinkedData","record"]}
{"code_tokens":["\n","public","void","setOptions","(","short","field_3_options",")","\n","{","\n","this",".","field_3_options","=","field_3_options",";","\n"],"docstring_tokens":["Set","the","options","field","for","the","LinkedData","record"]}
{"code_tokens":["\n","public","void","setFormulaOfLink","(","Ptg[]","ptgs",")","\n","{","\n","this",".","field_5_formulaOfLink","=","Formula",".","create","(","ptgs",")",";","\n"],"docstring_tokens":["Set","the","formula","of","link","field","for","the","LinkedData","record"]}
{"code_tokens":["\n","public","String","getValue","(",")","{","\n","String","value","=","getText","(",")",";","\n","if","(","value","==","null",")","\n","return","\"\"",";","\n","return","value",";","\n"],"docstring_tokens":["Returns","the","value","of","the","header","or","footer"]}
{"code_tokens":["\n","@Override\n","public","String","getCenter","(",")","{","\n","String","text","=","helper",".","getCenterSection","(","getText","(",")",")",";","\n","if","(","stripFields",")","\n","return","stripFields","(","text",")",";","\n","return","text",";","\n"],"docstring_tokens":["get","the","text","representing","the","center","part","of","this","element"]}
{"code_tokens":["\n","@Override\n","public","String","getLeft","(",")","{","\n","String","text","=","helper",".","getLeftSection","(","getText","(",")",")",";","\n","if","(","stripFields",")","\n","return","stripFields","(","text",")",";","\n","return","text",";","\n"],"docstring_tokens":["get","the","text","representing","the","left","part","of","this","element"]}
{"code_tokens":["\n","@Override\n","public","String","getRight","(",")","{","\n","String","text","=","helper",".","getRightSection","(","getText","(",")",")",";","\n","if","(","stripFields",")","\n","return","stripFields","(","text",")",";","\n","return","text",";","\n"],"docstring_tokens":["get","the","text","representing","the","right","part","of","this","element"]}
{"code_tokens":["\n","@Override\n","public","void","setCenter","(","String","newCenter",")","{","\n","setText","(","helper",".","setCenterSection","(","getText","(",")",",","newCenter",")",")",";","\n"],"docstring_tokens":["set","a","centered","string","value","for","this","element"]}
{"code_tokens":["\n","@Override\n","public","void","setLeft","(","String","newLeft",")","{","\n","setText","(","helper",".","setLeftSection","(","getText","(",")",",","newLeft",")",")",";","\n"],"docstring_tokens":["set","a","left","string","value","for","this","element"]}
{"code_tokens":["\n","@Override\n","public","void","setRight","(","String","newRight",")","{","\n","setText","(","helper",".","setRightSection","(","getText","(",")",",","newRight",")",")",";","\n"],"docstring_tokens":["set","a","right","string","value","for","this","element"]}
{"code_tokens":["\n","private","static","boolean","isCTOnOff","(","CTOnOff","onoff",")","{","\n","return","!onoff",".","isSetVal","(",")","||","POIXMLUnits",".","parseOnOff","(","onoff",")",";","\n"],"docstring_tokens":["For","isBold,","isItalic","etc"]}
{"code_tokens":["\n","public","String","getLang","(",")","{","\n","CTRPr","pr","=","getRunProperties","(","false",")",";","\n","Object","lang","=","(","pr","==","null","||","pr",".","sizeOfLangArray","(",")","==","0",")","?","null",":","pr",".","getLangArray","(","0",")",".","getVal","(",")",";","\n","return","(","String",")","lang",";","\n"],"docstring_tokens":["Get","the","language","tag","associated","with","this","run,","if","any"]}
{"code_tokens":["\n","public","void","setLang","(","String","lang",")","{","\n","CTRPr","pr","=","getRunProperties","(","true",")",";","\n","CTLanguage","ctLang","=","pr",".","sizeOfLangArray","(",")",">","0","?","pr",".","getLangArray","(","0",")",":","pr",".","addNewLang","(",")",";","\n","ctLang",".","setVal","(","lang",")",";","\n"],"docstring_tokens":["Set","the","language","tag","associated","with","this","run"]}
{"code_tokens":["\n","private","CTUnderline","getCTUnderline","(","boolean","create",")","{","\n","CTRPr","pr","=","getRunProperties","(","true",")",";","\n","return","pr",".","sizeOfUArray","(",")",">","0","?","pr",".","getUArray","(","0",")",":","(","create","?","pr",".","addNewU","(",")",":","null",")",";","\n"],"docstring_tokens":["Get","the","CTUnderline","for","the","run"]}
{"code_tokens":["\n","@Override\n","public","boolean","isDoubleStrikeThrough","(",")","{","\n","CTRPr","pr","=","getRunProperties","(","false",")",";","\n","return","pr","!=","null","&&","pr",".","sizeOfDstrikeArray","(",")",">","0","&&","isCTOnOff","(","pr",".","getDstrikeArray","(","0",")",")",";","\n"],"docstring_tokens":["Specifies","that","the","contents","of","this","run","shall","be","displayed","with","a","double","horizontal","line","through","the","center","of","the","line"]}
{"code_tokens":["\n","@Internal\n","public","CTInline","addChart","(","String","chartRelId",")","throws","InvalidFormatException,","IOException","{","\n","try","{","\n","CTInline","inline","=","run",".","addNewDrawing","(",")",".","addNewInline","(",")",";","\n\n","//xml","part","of","chart","in","document\n","String","xml","=\n","\"<a:graphic","xmlns:a=\\\"\"","+","CTGraphicalObject",".","type",".","getName","(",")",".","getNamespaceURI","(",")","+","\"\\\">\"","+\n","\"<a:graphicData","uri=\\\"\"","+","CTChart",".","type",".","getName","(",")",".","getNamespaceURI","(",")","+","\"\\\">\"","+\n","\"<c:chart","xmlns:c=\\\"\"","+","CTChart",".","type",".","getName","(",")",".","getNamespaceURI","(",")","+","\"\\\"","xmlns:r=\\\"http://schemas",".","openxmlformats",".","org/officeDocument/2006/relationships\\\"","r:id=\\\"\"","+","chartRelId","+","\"\\\"","/>\"","+\n","\"</a:graphicData>\"","+\n","\"</a:graphic>\"",";","\n\n","InputSource","is","=","new","InputSource","(","new","StringReader","(","xml",")",")",";","\n\n","org",".","w3c",".","dom",".","Document","doc","=","DocumentHelper",".","readDocument","(","is",")",";","\n\n","inline",".","set","(","XmlToken",".","Factory",".","parse","(","doc",".","getDocumentElement","(",")",",","DEFAULT_XML_OPTIONS",")",")",";","\n\n","//","Setup","the","inline","with","0","margin\n","inline",".","setDistT","(","0",")",";","\n","inline",".","setDistR","(","0",")",";","\n","inline",".","setDistB","(","0",")",";","\n","inline",".","setDistL","(","0",")",";","\n\n","CTNonVisualDrawingProps","docPr","=","inline",".","addNewDocPr","(",")",";","\n","long","id","=","getParent","(",")",".","getDocument","(",")",".","getDrawingIdManager","(",")",".","reserveNew","(",")",";","\n","docPr",".","setId","(","id",")",";","\n","//This","name","is","not","visible","in","Word","anywhere",".","\n","docPr",".","setName","(","\"chart","\"","+","id",")",";","\n\n","return","inline",";","\n","}","catch","(","XmlException","|","SAXException","e",")","{","\n","throw","new","IllegalStateException","(","e",")",";","\n","}","\n"],"docstring_tokens":["this","method","add","chart","template","into","document"]}
{"code_tokens":["\n","public","void","setStyle","(","String","styleId",")","{","\n","CTRPr","pr","=","getCTR","(",")",".","getRPr","(",")",";","\n","if","(","null","==","pr",")","{","\n","pr","=","getCTR","(",")",".","addNewRPr","(",")",";","\n","}","\n","CTString","style","=","pr",".","sizeOfRStyleArray","(",")",">","0","?","pr",".","getRStyleArray","(","0",")",":","pr",".","addNewRStyle","(",")",";","\n","style",".","setVal","(","styleId",")",";","\n"],"docstring_tokens":["Set","the","style","ID","for","the","run"]}
{"code_tokens":["\n","@Override\n","public","String","toString","(",")","{","\n","String","phonetic","=","getPhonetic","(",")",";","\n","if","(","phonetic",".","length","(",")",">","0",")","{","\n","return","text","(",")","+","\"","(","\"","+","phonetic","+","\"",")","\"",";","\n","}","else","{","\n","return","text","(",")",";","\n","}","\n"],"docstring_tokens":["Returns","the","string","version","of","the","text","and","the","phonetic","string"]}
{"code_tokens":["\n","@Override\n","public","String","text","(",")","{","\n","StringBuilder","text","=","new","StringBuilder","(","64",")",";","\n\n","//","Grab","the","text","and","tabs","of","the","text","run\n","//","Do","so","in","a","way","that","preserves","the","ordering\n","XmlCursor","c","=","run",".","newCursor","(",")",";","\n","c",".","selectPath","(","\"",".","/*\"",")",";","\n","while","(","c",".","toNextSelection","(",")",")","{","\n","XmlObject","o","=","c",".","getObject","(",")",";","\n","if","(","o","instanceof","CTRuby",")","{","\n","handleRuby","(","o,","text,","false",")",";","\n","continue",";","\n","}","\n","_getText","(","o,","text",")",";","\n","}","\n","c",".","dispose","(",")",";","\n","return","text",".","toString","(",")",";","\n\n"],"docstring_tokens":["Returns","the","string","version","of","the","text,","with","tabs","and","carriage","returns","in","place","of","their","xml","equivalents"]}
{"code_tokens":["\n","public","void","setTextHighlightColor","(","String","colorName",")","{","\n","CTRPr","pr","=","getRunProperties","(","true",")",";","\n","CTHighlight","highlight","=","pr",".","sizeOfHighlightArray","(",")",">","0","?","pr",".","getHighlightArray","(","0",")",":","pr",".","addNewHighlight","(",")",";","\n","STHighlightColor","color","=","highlight",".","xgetVal","(",")",";","\n","if","(","color","==","null",")","{","\n","color","=","STHighlightColor",".","Factory",".","newInstance","(",")",";","\n","}","\n","STHighlightColor",".","Enum","val","=","STHighlightColor",".","Enum",".","forString","(","colorName",")",";","\n","if","(","val","!=","null",")","{","\n","color",".","setStringValue","(","val",".","toString","(",")",")",";","\n","highlight",".","xsetVal","(","color",")",";","\n","}","\n\n"],"docstring_tokens":["Set","the","highlight","color","for","the","run"]}
{"code_tokens":["\n","public","STHighlightColor",".","Enum","getTextHightlightColor","(",")","{","\n","CTRPr","pr","=","getRunProperties","(","true",")",";","\n","CTHighlight","highlight","=","pr",".","sizeOfHighlightArray","(",")",">","0","?","pr",".","getHighlightArray","(","0",")",":","pr",".","addNewHighlight","(",")",";","\n","STHighlightColor","color","=","highlight",".","xgetVal","(",")",";","\n","if","(","color","==","null",")","{","\n","color","=","STHighlightColor",".","Factory",".","newInstance","(",")",";","\n","color",".","setEnumValue","(","STHighlightColor",".","NONE",")",";","\n","}","\n","return","(","STHighlightColor",".","Enum",")","(","color",".","getEnumValue","(",")",")",";","\n"],"docstring_tokens":["Gets","the","highlight","color","for","the","run"]}
{"code_tokens":["\n","public","void","setVerticalAlignment","(","String","verticalAlignment",")","{","\n","CTRPr","pr","=","getRunProperties","(","true",")",";","\n","CTVerticalAlignRun","vertAlign","=","pr",".","sizeOfVertAlignArray","(",")",">","0","?","pr",".","getVertAlignArray","(","0",")",":","pr",".","addNewVertAlign","(",")",";","\n","STVerticalAlignRun","align","=","vertAlign",".","xgetVal","(",")",";","\n","if","(","align","==","null",")","{","\n","align","=","STVerticalAlignRun",".","Factory",".","newInstance","(",")",";","\n","}","\n","STVerticalAlignRun",".","Enum","val","=","STVerticalAlignRun",".","Enum",".","forString","(","verticalAlignment",")",";","\n","if","(","val","!=","null",")","{","\n","align",".","setStringValue","(","val",".","toString","(",")",")",";","\n","vertAlign",".","xsetVal","(","align",")",";","\n","}","\n\n\n"],"docstring_tokens":["Set","the","vertical","alignment","of","the","run"]}
{"code_tokens":["\n","public","STEm",".","Enum","getEmphasisMark","(",")","{","\n","CTRPr","pr","=","getRunProperties","(","true",")",";","\n","CTEm","emphasis","=","pr",".","sizeOfEmArray","(",")",">","0","?","pr",".","getEmArray","(","0",")",":","pr",".","addNewEm","(",")",";","\n\n","STEm",".","Enum","val","=","emphasis",".","getVal","(",")",";","\n","if","(","val","==","null",")","{","\n","val","=","STEm",".","NONE",";","\n","}","\n","return","val",";","\n"],"docstring_tokens":["Get","the","emphasis","mark","value","for","the","run"]}
{"code_tokens":["\n","public","void","setEmphasisMark","(","String","markType",")","{","\n","CTRPr","pr","=","getRunProperties","(","true",")",";","\n","CTEm","emphasisMark","=","pr",".","sizeOfEmArray","(",")",">","0","?","pr",".","getEmArray","(","0",")",":","pr",".","addNewEm","(",")",";","\n","STEm","mark","=","emphasisMark",".","xgetVal","(",")",";","\n","if","(","mark","==","null",")","{","\n","mark","=","STEm",".","Factory",".","newInstance","(",")",";","\n","}","\n","STEm",".","Enum","val","=","STEm",".","Enum",".","forString","(","markType",")",";","\n","if","(","val","!=","null",")","{","\n","mark",".","setStringValue","(","val",".","toString","(",")",")",";","\n","emphasisMark",".","xsetVal","(","mark",")",";","\n","}","\n\n\n"],"docstring_tokens":["Set","the","emphasis","mark","for","the","run"]}
{"code_tokens":["\n","@Internal\n","public","boolean","isFMerged","(",")","\n","{","\n","return","fMerged",".","isSet","(","field_1_rgf",")",";","\n"],"docstring_tokens":["When","1,","cell","has","been","merged","with","preceding","cell"]}
{"code_tokens":["\n","@Internal\n","public","boolean","isFVertical","(",")","\n","{","\n","return","fVertical",".","isSet","(","field_1_rgf",")",";","\n"],"docstring_tokens":["When","1,","cell","has","vertical","text","flow"]}
{"code_tokens":["\n","@Internal\n","public","void","setFtsWidth","(","byte","value",")","\n","{","\n","field_1_rgf","=","(","short",")","ftsWidth",".","setValue","(","field_1_rgf,","value",")",";","\n"],"docstring_tokens":["Sets","the","ftsWidth","field","value"]}
{"code_tokens":["\n","@Internal\n","public","void","setFUnused","(","byte","value",")","\n","{","\n","field_1_rgf","=","(","short",")","fUnused",".","setValue","(","field_1_rgf,","value",")",";","\n"],"docstring_tokens":["Sets","the","fUnused","field","value"]}
{"code_tokens":["\n","public","void","process","(",")","throws","IOException,","OpenXML4JException,","SAXException","{","\n","ReadOnlySharedStringsTable","strings","=","new","ReadOnlySharedStringsTable","(","this",".","xlsxPackage",")",";","\n","XSSFReader","xssfReader","=","new","XSSFReader","(","this",".","xlsxPackage",")",";","\n","StylesTable","styles","=","xssfReader",".","getStylesTable","(",")",";","\n","XSSFReader",".","SheetIterator","iter","=","(","XSSFReader",".","SheetIterator",")","xssfReader",".","getSheetsData","(",")",";","\n","int","index","=","0",";","\n","while","(","iter",".","hasNext","(",")",")","{","\n","try","(","InputStream","stream","=","iter",".","next","(",")",")","{","\n","String","sheetName","=","iter",".","getSheetName","(",")",";","\n","this",".","output",".","println","(",")",";","\n","this",".","output",".","println","(","sheetName","+","\"","[index=\"","+","index","+","\"]:\"",")",";","\n","processSheet","(","styles,","strings,","new","SheetToCSV","(",")",",","stream",")",";","\n","}","\n","++index",";","\n","}","\n"],"docstring_tokens":["Initiates","the","processing","of","the","XLS","workbook","file","to","CSV"]}
{"code_tokens":["\n","public","double","getMinimumAxisValue","(",")","\n","{","\n","return","field_1_minimumAxisValue",";","\n"],"docstring_tokens":["Get","the","minimum","axis","value","field","for","the","ValueRange","record"]}
{"code_tokens":["\n","public","void","setMinimumAxisValue","(","double","field_1_minimumAxisValue",")","\n","{","\n","this",".","field_1_minimumAxisValue","=","field_1_minimumAxisValue",";","\n"],"docstring_tokens":["Set","the","minimum","axis","value","field","for","the","ValueRange","record"]}
{"code_tokens":["\n","public","double","getMaximumAxisValue","(",")","\n","{","\n","return","field_2_maximumAxisValue",";","\n"],"docstring_tokens":["Get","the","maximum","axis","value","field","for","the","ValueRange","record"]}
{"code_tokens":["\n","public","void","setMaximumAxisValue","(","double","field_2_maximumAxisValue",")","\n","{","\n","this",".","field_2_maximumAxisValue","=","field_2_maximumAxisValue",";","\n"],"docstring_tokens":["Set","the","maximum","axis","value","field","for","the","ValueRange","record"]}
{"code_tokens":["\n","public","double","getMajorIncrement","(",")","\n","{","\n","return","field_3_majorIncrement",";","\n"],"docstring_tokens":["Get","the","major","increment","field","for","the","ValueRange","record"]}
{"code_tokens":["\n","public","void","setMajorIncrement","(","double","field_3_majorIncrement",")","\n","{","\n","this",".","field_3_majorIncrement","=","field_3_majorIncrement",";","\n"],"docstring_tokens":["Set","the","major","increment","field","for","the","ValueRange","record"]}
{"code_tokens":["\n","public","double","getMinorIncrement","(",")","\n","{","\n","return","field_4_minorIncrement",";","\n"],"docstring_tokens":["Get","the","minor","increment","field","for","the","ValueRange","record"]}
{"code_tokens":["\n","public","void","setMinorIncrement","(","double","field_4_minorIncrement",")","\n","{","\n","this",".","field_4_minorIncrement","=","field_4_minorIncrement",";","\n"],"docstring_tokens":["Set","the","minor","increment","field","for","the","ValueRange","record"]}
{"code_tokens":["\n","public","double","getCategoryAxisCross","(",")","\n","{","\n","return","field_5_categoryAxisCross",";","\n"],"docstring_tokens":["Get","the","category","axis","cross","field","for","the","ValueRange","record"]}
{"code_tokens":["\n","public","void","setCategoryAxisCross","(","double","field_5_categoryAxisCross",")","\n","{","\n","this",".","field_5_categoryAxisCross","=","field_5_categoryAxisCross",";","\n"],"docstring_tokens":["Set","the","category","axis","cross","field","for","the","ValueRange","record"]}
{"code_tokens":["\n","public","short","getOptions","(",")","\n","{","\n","return","field_6_options",";","\n"],"docstring_tokens":["Get","the","options","field","for","the","ValueRange","record"]}
{"code_tokens":["\n","public","void","setOptions","(","short","field_6_options",")","\n","{","\n","this",".","field_6_options","=","field_6_options",";","\n"],"docstring_tokens":["Set","the","options","field","for","the","ValueRange","record"]}
{"code_tokens":["\n","public","void","setAutomaticMinimum","(","boolean","value",")","\n","{","\n","field_6_options","=","automaticMinimum",".","setShortBoolean","(","field_6_options,","value",")",";","\n"],"docstring_tokens":["Sets","the","automatic","minimum","field","value"]}
{"code_tokens":["\n","public","boolean","isAutomaticMinimum","(",")","\n","{","\n","return","automaticMinimum",".","isSet","(","field_6_options",")",";","\n"],"docstring_tokens":["automatic","minimum","value","selected"]}
{"code_tokens":["\n","public","void","setAutomaticMaximum","(","boolean","value",")","\n","{","\n","field_6_options","=","automaticMaximum",".","setShortBoolean","(","field_6_options,","value",")",";","\n"],"docstring_tokens":["Sets","the","automatic","maximum","field","value"]}
{"code_tokens":["\n","public","boolean","isAutomaticMaximum","(",")","\n","{","\n","return","automaticMaximum",".","isSet","(","field_6_options",")",";","\n"],"docstring_tokens":["automatic","maximum","value","selected"]}
{"code_tokens":["\n","public","void","setAutomaticMajor","(","boolean","value",")","\n","{","\n","field_6_options","=","automaticMajor",".","setShortBoolean","(","field_6_options,","value",")",";","\n"],"docstring_tokens":["Sets","the","automatic","major","field","value"]}
{"code_tokens":["\n","public","void","setAutomaticMinor","(","boolean","value",")","\n","{","\n","field_6_options","=","automaticMinor",".","setShortBoolean","(","field_6_options,","value",")",";","\n"],"docstring_tokens":["Sets","the","automatic","minor","field","value"]}
{"code_tokens":["\n","public","void","setAutomaticCategoryCrossing","(","boolean","value",")","\n","{","\n","field_6_options","=","automaticCategoryCrossing",".","setShortBoolean","(","field_6_options,","value",")",";","\n"],"docstring_tokens":["Sets","the","automatic","category","crossing","field","value"]}
{"code_tokens":["\n","public","void","setLogarithmicScale","(","boolean","value",")","\n","{","\n","field_6_options","=","logarithmicScale",".","setShortBoolean","(","field_6_options,","value",")",";","\n"],"docstring_tokens":["Sets","the","logarithmic","scale","field","value"]}
{"code_tokens":["\n","public","void","setCrossCategoryAxisAtMaximum","(","boolean","value",")","\n","{","\n","field_6_options","=","crossCategoryAxisAtMaximum",".","setShortBoolean","(","field_6_options,","value",")",";","\n"],"docstring_tokens":["Sets","the","cross","category","axis","at","maximum","field","value"]}
{"code_tokens":["\n","public","boolean","isCrossCategoryAxisAtMaximum","(",")","\n","{","\n","return","crossCategoryAxisAtMaximum",".","isSet","(","field_6_options",")",";","\n"],"docstring_tokens":["category","axis","to","cross","at","maximum","value"]}
{"code_tokens":["\n","public","void","setMargin","(","double","field_1_margin",")","\n","{","\n","this",".","field_1_margin","=","field_1_margin",";","\n"],"docstring_tokens":["Set","the","margin","field","for","the","LeftMargin","record"]}
{"code_tokens":["\n\n","@Override\n","public","Entry","getEntry","(","final","String","name",")","throws","FileNotFoundException","{","\n","Entry","rval","=","null",";","\n\n","if","(","name","!=","null",")","{","\n","rval","=","_byname",".","get","(","name",")",";","\n","}","\n","if","(","rval","==","null",")","{","\n","//","throw","more","useful","exceptions","for","known","wrong","file-extensions\n","if","(","_byname",".","containsKey","(","\"Workbook\"",")",")","{","\n","throw","new","IllegalArgumentException","(","\"The","document","is","really","a","XLS","file\"",")",";","\n","}","else","if","(","_byname",".","containsKey","(","\"PowerPoint","Document\"",")",")","{","\n","throw","new","IllegalArgumentException","(","\"The","document","is","really","a","PPT","file\"",")",";","\n","}","else","if","(","_byname",".","containsKey","(","\"VisioDocument\"",")",")","{","\n","throw","new","IllegalArgumentException","(","\"The","document","is","really","a","VSD","file\"",")",";","\n","}","\n\n","//","either","a","null","name","was","given,","or","there","is","no","such","name\n","throw","new","FileNotFoundException","(","\"no","such","entry:","\\\"\"","+","name\n","+","\"\\\",","had:","\"","+","_byname",".","keySet","(",")",")",";","\n","}","\n","return","rval",";","\n"],"docstring_tokens":["get","a","specified","Entry","by","name"]}
{"code_tokens":["\n","@SuppressWarnings","(","\"WeakerAccess\"",")","\n","public","DocumentEntry","createOrUpdateDocument","(","final","String","name,\n","final","InputStream","stream",")","\n","throws","IOException\n","{","\n","if","(","!","hasEntry","(","name",")",")","{","\n","return","createDocument","(","name,","stream",")",";","\n","}","else","{","\n","DocumentNode","existing","=","(","DocumentNode",")","getEntry","(","name",")",";","\n","POIFSDocument","nDoc","=","new","POIFSDocument","(","existing",")",";","\n","nDoc",".","replaceContents","(","stream",")",";","\n","return","existing",";","\n","}","\n"],"docstring_tokens":["Set","the","contents","of","a","document,","creating","if","needed,","otherwise","updating"]}
{"code_tokens":["\n","@Override\n","public","ClassID","getStorageClsid","(",")","\n","{","\n","return","getProperty","(",")",".","getStorageClsid","(",")",";","\n"],"docstring_tokens":["Gets","the","storage","clsid","of","the","directory","entry"]}
{"code_tokens":["\n","@Override\n","public","void","setStorageClsid","(","ClassID","clsidStorage",")","\n","{","\n","getProperty","(",")",".","setStorageClsid","(","clsidStorage",")",";","\n"],"docstring_tokens":["Sets","the","storage","clsid","for","the","directory","entry"]}
{"code_tokens":["\n","public","void","addSlideListWithText","(","SlideListWithText","slwt",")","{","\n","//","The","new","SlideListWithText","should","go","in\n","//","just","before","the","EndDocumentRecord\n","Record","endDoc","=","_children[_children",".","length","-","1]",";","\n","if","(","endDoc",".","getRecordType","(",")","==","RecordTypes",".","RoundTripCustomTableStyles12",".","typeID",")","{","\n","//","last","record","can","optionally","be","a","RoundTripCustomTableStyles12Atom\n","endDoc","=","_children[_children",".","length","-","2]",";","\n","}","\n","if","(","endDoc",".","getRecordType","(",")","!=","RecordTypes",".","EndDocument",".","typeID",")","{","\n","throw","new","IllegalStateException","(","\"The","last","child","record","of","a","Document","should","be","EndDocument,","but","it","was","\"","+","endDoc",")",";","\n","}","\n\n","//","Add","in","the","record\n","addChildBefore","(","slwt,","endDoc",")",";","\n\n","//","Updated","our","cached","list","of","SlideListWithText","records\n","int","newSize","=","slwts",".","length","+","1",";","\n","SlideListWithText[]","nl","=","new","SlideListWithText[newSize]",";","\n","System",".","arraycopy","(","slwts,","0,","nl,","0,","slwts",".","length",")",";","\n","nl[nl",".","length-1]","=","slwt",";","\n","slwts","=","nl",";","\n"],"docstring_tokens":["Adds","a","new","SlideListWithText","record,","at","the","appropriate","point","in","the","child","records"]}
{"code_tokens":["\n","public","void","removeItem","(","int","sheetId,","String","ref",")","{","\n","//sheet","Id","of","a","sheet","the","cell","belongs","to\n","int","id","=","-1",";","\n","CTCalcCell[]","c","=","chain",".","getCArray","(",")",";","\n\n","for","(","int","i","=","0",";","i","<","c",".","length",";","i++",")","{","\n","//If","sheet","Id","is","omitted,","it","is","assumed","to","be","the","same","as","the","value","of","the","previous","cell",".","\n","if","(","c[i]",".","isSetI","(",")",")","id","=","c[i]",".","getI","(",")",";","\n\n","if","(","id","==","sheetId","&&","c[i]",".","getR","(",")",".","equals","(","ref",")",")","{","\n","if","(","c[i]",".","isSetI","(",")","&&","i","<","c",".","length","-","1","&&","!c[i+1]",".","isSetI","(",")",")","{","\n","c[i+1]",".","setI","(","id",")",";","\n","}","\n","chain",".","removeC","(","i",")",";","\n","break",";","\n","}","\n","}","\n"],"docstring_tokens":["Remove","a","formula","reference","from","the","calculation","chain"]}
{"code_tokens":["\n","public","InputStream","openResourceAsStream","(","String","sampleFileName",")","{","\n\n","if","(","_sampleDataIsAvaliableOnClassPath",")","{","\n","InputStream","result","=","sampleFileName","==","null","?","null",":\n","openClasspathResource","(","sampleFileName",")",";","\n","if","(","result","==","null",")","{","\n","throw","new","RuntimeException","(","\"specified","test","sample","file","'\"","+","sampleFileName\n","+","\"'","not","found","on","the","classpath\"",")",";","\n","}","\n","//","wrap","to","avoid","temp","warning","method","about","auto-closing","input","stream\n","return","new","NonSeekableInputStream","(","result",")",";","\n","}","\n","if","(","_resolvedDataDir","==","null",")","{","\n","throw","new","RuntimeException","(","\"Must","set","system","property","'\"\n","+","TEST_PROPERTY\n","+","\"'","properly","before","running","tests\"",")",";","\n","}","\n\n","File","f","=","getFile","(","sampleFileName",")",";","\n","try","{","\n","return","new","FileInputStream","(","f",")",";","\n","}","catch","(","FileNotFoundException","e",")","{","\n","throw","new","RuntimeException","(","e",")",";","\n","}","\n"],"docstring_tokens":["Opens","a","sample","file","from","the","test","data","directory"]}
{"code_tokens":["\n","public","POIXMLProperties","getProperties","(",")","{","\n","if","(","properties","==","null",")","{","\n","try","{","\n","properties","=","new","POIXMLProperties","(","pkg",")",";","\n","}","catch","(","Exception","e",")","{","\n","throw","new","POIXMLException","(","e",")",";","\n","}","\n","}","\n","return","properties",";","\n"],"docstring_tokens":["Get","the","document","properties"]}
{"code_tokens":["\n","public","void","confirmSignature","(",")","throws","XMLSignatureException,","MarshalException","{","\n","initXmlProvider","(",")",";","\n","final","Document","document","=","DocumentHelper",".","createDocument","(",")",";","\n","final","DOMSignContext","xmlSignContext","=","createXMLSignContext","(","document",")",";","\n\n","//","operate\n","final","DOMSignedInfo","signedInfo","=","preSign","(","xmlSignContext",")",";","\n\n","//","setup:","key","material,","signature","value\n","final","String","signatureValue","=","signDigest","(","xmlSignContext,","signedInfo",")",";","\n\n","//","operate:","postSign\n","postSign","(","xmlSignContext,","signatureValue",")",";","\n"],"docstring_tokens":["add","the","xml","signature","to","the","document"]}
{"code_tokens":["\n","public","DOMSignContext","createXMLSignContext","(","final","Document","document",")","{","\n","initXmlProvider","(",")",";","\n","return","new","DOMSignContext","(","signatureConfig",".","getKey","(",")",",","document",")",";","\n"],"docstring_tokens":["Convenience","method","for","creating","the","signature","context"]}
{"code_tokens":["\n","@SuppressWarnings","(","\"unchecked\"",")","\n","public","DOMSignedInfo","preSign","(","final","DOMSignContext","xmlSignContext",")","\n","throws","XMLSignatureException,","MarshalException","{","\n","final","Document","document","=","(","Document",")","xmlSignContext",".","getParent","(",")",";","\n\n","registerEventListener","(","document",")",";","\n\n","//","Signature","context","construction",".","\n","if","(","uriDereferencer","!=","null",")","{","\n","xmlSignContext",".","setURIDereferencer","(","uriDereferencer",")",";","\n","}","\n\n","signatureConfig",".","getNamespacePrefixes","(",")",".","forEach","(","xmlSignContext::putNamespacePrefix",")",";","\n\n","xmlSignContext",".","setDefaultNamespacePrefix","(","\"\"",")",";","\n\n","/*\n","*","Add","ds:References","that","come","from","signing","client","local","files",".","\n","*/\n","List<Reference>","references","=","new","ArrayList<>","(",")",";","\n\n","/*\n","*","Invoke","the","signature","facets",".","\n","*/\n","List<XMLObject>","objects","=","new","ArrayList<>","(",")",";","\n","for","(","SignatureFacet","signatureFacet",":","signatureConfig",".","getSignatureFacets","(",")",")","{","\n","LOG",".","atDebug","(",")",".","log","(","\"invoking","signature","facet:","{","}","\",","signatureFacet",".","getClass","(",")",".","getSimpleName","(",")",")",";","\n","signatureFacet",".","preSign","(","this,","document,","references,","objects",")",";","\n","}","\n\n","/*\n","*","ds:SignedInfo\n","*/\n","SignedInfo","signedInfo",";","\n","try","{","\n","SignatureMethod","signatureMethod","=","signatureFactory",".","newSignatureMethod\n","(","signatureConfig",".","getSignatureMethodUri","(",")",",","null",")",";","\n","CanonicalizationMethod","canonicalizationMethod","=","signatureFactory\n",".","newCanonicalizationMethod","(","signatureConfig",".","getCanonicalizationMethod","(",")",",\n","(","C14NMethodParameterSpec",")","null",")",";","\n","signedInfo","=","signatureFactory",".","newSignedInfo","(","\n","canonicalizationMethod,","signatureMethod,","references",")",";","\n","}","catch","(","GeneralSecurityException","e",")","{","\n","throw","new","XMLSignatureException","(","e",")",";","\n","}","\n\n","/*\n","*","JSR105","ds:Signature","creation\n","*/\n","String","signatureValueId","=","signatureConfig",".","getPackageSignatureId","(",")","+","\"-signature-value\"",";","\n","XMLSignature","xmlSignature","=","signatureFactory\n",".","newXMLSignature","(","signedInfo,","null,","objects,","signatureConfig",".","getPackageSignatureId","(",")",",\n","signatureValueId",")",";","\n\n","/*\n","*","ds:Signature","Marshalling",".","\n","*/\n","xmlSignature",".","sign","(","xmlSignContext",")",";","\n\n","/*\n","*","Completion","of","undigested","ds:References","in","the","ds:Manifests",".","\n","*/\n","for","(","XMLObject","object",":","objects",")","{","\n","LOG",".","atDebug","(",")",".","log","(","\"object","java","type:","{","}","\",","object",".","getClass","(",")",".","getName","(",")",")",";","\n","List<XMLStructure>","objectContentList","=","object",".","getContent","(",")",";","\n","for","(","XMLStructure","objectContent",":","objectContentList",")","{","\n","LOG",".","atDebug","(",")",".","log","(","\"object","content","java","type:","{","}","\",","objectContent",".","getClass","(",")",".","getName","(",")",")",";","\n","if","(","!","(","objectContent","instanceof","Manifest",")",")","{","\n","continue",";","\n","}","\n","Manifest","manifest","=","(","Manifest",")","objectContent",";","\n","List<Reference>","manifestReferences","=","manifest",".","getReferences","(",")",";","\n","for","(","Reference","manifestReference",":","manifestReferences",")","{","\n","if","(","manifestReference",".","getDigestValue","(",")","!=","null",")","{","\n","continue",";","\n","}","\n\n","DOMReference","manifestDOMReference","=","(","DOMReference",")","manifestReference",";","\n","manifestDOMReference",".","digest","(","xmlSignContext",")",";","\n","}","\n","}","\n","}","\n\n","/*\n","*","Completion","of","undigested","ds:References",".","\n","*/\n","List<Reference>","signedInfoReferences","=","signedInfo",".","getReferences","(",")",";","\n","for","(","Reference","signedInfoReference",":","signedInfoReferences",")","{","\n","DOMReference","domReference","=","(","DOMReference",")","signedInfoReference",";","\n\n","//","ds:Reference","with","external","digest","value\n","if","(","domReference",".","getDigestValue","(",")","!=","null",")","{","\n","continue",";","\n","}","\n\n","domReference",".","digest","(","xmlSignContext",")",";","\n","}","\n\n","return","(","DOMSignedInfo",")","signedInfo",";","\n"],"docstring_tokens":["Helper","method","for","adding","informations","before","the","signing"]}
{"code_tokens":["\n","protected","void","writeDocument","(","Document","document",")","throws","MarshalException","{","\n","XmlOptions","xo","=","new","XmlOptions","(",")",";","\n","Map<String,String>","namespaceMap","=","new","HashMap<>","(",")",";","\n","signatureConfig",".","getNamespacePrefixes","(",")",".","forEach","(","(","k,v",")","->","namespaceMap",".","put","(","v,k",")",")",";","\n","xo",".","setSaveSuggestedPrefixes","(","namespaceMap",")",";","\n","xo",".","setUseDefaultNamespace","(",")",";","\n\n","LOG",".","atDebug","(",")",".","log","(","\"output","signed","Office","OpenXML","document\"",")",";","\n\n","/*\n","*","Copy","the","original","OOXML","content","to","the","signed","OOXML","package",".","During\n","*","copying","some","files","need","to","changed",".","\n","*/\n","try","{","\n","//","<Default","Extension=\"sigs\"","ContentType=\"application/vnd",".","openxmlformats-package",".","digital-signature-origin\"/>\n","final","DSigRelation","originDesc","=","DSigRelation",".","ORIGIN_SIGS",";","\n","PackagePartName","originPartName","=","PackagingURIHelper",".","createPartName","(","originDesc",".","getFileName","(","0",")",")",";","\n\n","PackagePart","originPart","=","opcPackage",".","getPart","(","originPartName",")",";","\n","if","(","originPart","==","null",")","{","\n","//","touch","empty","marker","file\n","originPart","=","opcPackage",".","createPart","(","originPartName,","originDesc",".","getContentType","(",")",")",";","\n","opcPackage",".","addRelationship","(","originPartName,","TargetMode",".","INTERNAL,","originDesc",".","getRelation","(",")",")",";","\n","}","\n\n","//","<Override","PartName=\"/_xmlsignatures/sig1",".","xml\"","ContentType=\"application/vnd",".","openxmlformats-package",".","digital-signature-xmlsignature+xml\"/>\n","final","DSigRelation","sigDesc","=","DSigRelation",".","SIG",";","\n","int","nextSigIdx","=","opcPackage",".","getUnusedPartIndex","(","sigDesc",".","getDefaultFileName","(",")",")",";","\n\n","if","(","!signatureConfig",".","isAllowMultipleSignatures","(",")",")","{","\n","PackageRelationshipCollection","prc","=","originPart",".","getRelationshipsByType","(","sigDesc",".","getRelation","(",")",")",";","\n","for","(","int","i=2",";","i<nextSigIdx",";","i++",")","{","\n","PackagePartName","pn","=","PackagingURIHelper",".","createPartName","(","sigDesc",".","getFileName","(","i",")",")",";","\n","for","(","PackageRelationship","rel",":","prc",")","{","\n","PackagePart","pp","=","originPart",".","getRelatedPart","(","rel",")",";","\n","if","(","pp",".","getPartName","(",")",".","equals","(","pn",")",")","{","\n","originPart",".","removeRelationship","(","rel",".","getId","(",")",")",";","\n","prc",".","removeRelationship","(","rel",".","getId","(",")",")",";","\n","break",";","\n","}","\n","}","\n\n","opcPackage",".","removePart","(","opcPackage",".","getPart","(","pn",")",")",";","\n","}","\n","nextSigIdx","=","1",";","\n","}","\n\n\n","PackagePartName","sigPartName","=","PackagingURIHelper",".","createPartName","(","sigDesc",".","getFileName","(","nextSigIdx",")",")",";","\n","PackagePart","sigPart","=","opcPackage",".","getPart","(","sigPartName",")",";","\n","if","(","sigPart","==","null",")","{","\n","sigPart","=","opcPackage",".","createPart","(","sigPartName,","sigDesc",".","getContentType","(",")",")",";","\n","originPart",".","addRelationship","(","sigPartName,","TargetMode",".","INTERNAL,","sigDesc",".","getRelation","(",")",")",";","\n","}","else","{","\n","sigPart",".","clear","(",")",";","\n","}","\n\n","try","(","OutputStream","os","=","sigPart",".","getOutputStream","(",")",")","{","\n","SignatureDocument","sigDoc","=","SignatureDocument",".","Factory",".","parse","(","document,","DEFAULT_XML_OPTIONS",")",";","\n","sigDoc",".","save","(","os,","xo",")",";","\n","}","\n\n","}","catch","(","Exception","e",")","{","\n","throw","new","MarshalException","(","\"Unable","to","write","signature","document\",","e",")",";","\n","}","\n"],"docstring_tokens":["Write","XML","signature","into","the","OPC","package"]}
{"code_tokens":["\n","private","ParseNode","getFunction","(","String","name,","Ptg","namePtg,","ParseNode[]","args",")","{","\n\n","FunctionMetadata","fm","=","FunctionMetadataRegistry",".","getFunctionByName","(","name",".","toUpperCase","(","Locale",".","ROOT",")",")",";","\n","int","numArgs","=","args",".","length",";","\n","if","(","fm","==","null",")","{","\n","if","(","namePtg","==","null",")","{","\n","throw","new","IllegalStateException","(","\"NamePtg","must","be","supplied","for","external","functions\"",")",";","\n","}","\n","//","must","be","external","function\n","ParseNode[]","allArgs","=","new","ParseNode[numArgs+1]",";","\n","allArgs[0]","=","new","ParseNode","(","namePtg",")",";","\n","System",".","arraycopy","(","args,","0,","allArgs,","1,","numArgs",")",";","\n","return","new","ParseNode","(","FuncVarPtg",".","create","(","name,","numArgs+1",")",",","allArgs",")",";","\n","}","\n\n","if","(","namePtg","!=","null",")","{","\n","throw","new","IllegalStateException","(","\"NamePtg","no","applicable","to","internal","functions\"",")",";","\n","}","\n","boolean","isVarArgs","=","!fm",".","hasFixedArgsLength","(",")",";","\n","int","funcIx","=","fm",".","getIndex","(",")",";","\n","if","(","funcIx","==","FunctionMetadataRegistry",".","FUNCTION_INDEX_SUM","&&","args",".","length","==","1",")","{","\n","//","Excel","encodes","the","sum","of","a","single","argument","as","tAttrSum\n","//","POI","does","the","same","for","consistency,","but","this","is","not","critical\n","return","new","ParseNode","(","AttrPtg",".","getSumSingle","(",")",",","args",")",";","\n","//","The","code","below","would","encode","tFuncVar","(","SUM",")","which","seems","to","do","no","harm\n","}","\n","validateNumArgs","(","args",".","length,","fm",")",";","\n\n","AbstractFunctionPtg","retval",";","\n","if","(","isVarArgs",")","{","\n","retval","=","FuncVarPtg",".","create","(","name,","numArgs",")",";","\n","}","else","{","\n","retval","=","FuncPtg",".","create","(","funcIx",")",";","\n","}","\n","return","new","ParseNode","(","retval,","args",")",";","\n"],"docstring_tokens":["Generates","the","variable","function","ptg","for","the","formula"]}
{"code_tokens":["\n","private","ParseNode[]","Arguments","(",")","{","\n","//average","2","args","per","function\n","List<ParseNode>","temp","=","new","ArrayList<>","(","2",")",";","\n","SkipWhite","(",")",";","\n","if","(","look","==","'",")","'",")","{","\n","return","ParseNode",".","EMPTY_ARRAY",";","\n","}","\n\n","boolean","missedPrevArg","=","true",";","\n","while","(","true",")","{","\n","SkipWhite","(",")",";","\n","if","(","isArgumentDelimiter","(","look",")",")","{","\n","if","(","missedPrevArg",")","{","\n","temp",".","add","(","new","ParseNode","(","MissingArgPtg",".","instance",")",")",";","\n","}","\n","if","(","look","==","'",")","'",")","{","\n","break",";","\n","}","\n","Match","(","','",")",";","\n","missedPrevArg","=","true",";","\n","continue",";","\n","}","\n","temp",".","add","(","intersectionExpression","(",")",")",";","\n","missedPrevArg","=","false",";","\n","SkipWhite","(",")",";","\n","if","(","!isArgumentDelimiter","(","look",")",")","{","\n","throw","expected","(","\"','","or","'",")","'\"",")",";","\n","}","\n","}","\n","ParseNode[]","result","=","new","ParseNode[temp",".","size","(",")","]",";","\n","temp",".","toArray","(","result",")",";","\n","return","result",";","\n"],"docstring_tokens":["get","arguments","to","a","function"]}
{"code_tokens":["\n","private","ParseNode","powerFactor","(",")","{","\n","ParseNode","result","=","percentFactor","(",")",";","\n","while","(","true",")","{","\n","SkipWhite","(",")",";","\n","if","(","look","!=","'^'",")","{","\n","return","result",";","\n","}","\n","Match","(","'^'",")",";","\n","ParseNode","other","=","percentFactor","(",")",";","\n","result","=","new","ParseNode","(","PowerPtg",".","instance,","result,","other",")",";","\n","}","\n"],"docstring_tokens":["Parse","and","Translate","a","Math","Factor"]}
{"code_tokens":["\n","private","void","parse","(",")","{","\n","_pointer=0",";","\n","GetChar","(",")",";","\n","_rootNode","=","unionExpression","(",")",";","\n\n","if","(","_pointer","<=","_formulaLength",")","{","\n","String","msg","=","\"Unused","input","[\"","+","_formulaString",".","substring","(","_pointer-1",")","\n","+","\"]","after","attempting","to","parse","the","formula","[\"","+","_formulaString","+","\"]\"",";","\n","throw","new","FormulaParseException","(","msg",")",";","\n","}","\n"],"docstring_tokens":["API","call","to","execute","the","parsing","of","the","formula"]}
{"code_tokens":["\n","public","static","List<String>","compare","(","Workbook","wb1,","Workbook","wb2",")","{","\n","Locator","loc1","=","new","Locator","(",")",";","\n","Locator","loc2","=","new","Locator","(",")",";","\n","loc1",".","workbook","=","wb1",";","\n","loc2",".","workbook","=","wb2",";","\n\n","ExcelComparator","excelComparator","=","new","ExcelComparator","(",")",";","\n","excelComparator",".","compareNumberOfSheets","(","loc1,","loc2",")",";","\n","excelComparator",".","compareSheetNames","(","loc1,","loc2",")",";","\n","excelComparator",".","compareSheetData","(","loc1,","loc2",")",";","\n\n","return","Collections",".","unmodifiableList","(","excelComparator",".","listOfDifferences",")",";","\n"],"docstring_tokens":["Utility","to","compare","Excel","File","Contents","cell","by","cell","for","all","sheets"]}
{"code_tokens":["\n","private","void","isCellBorderMatches","(","Locator","loc1,","Locator","loc2,","char","borderSide",")","{","\n","if","(","!","(","loc1",".","cell","instanceof","XSSFCell",")",")","{","\n","return",";","\n","}","\n\n","CellStyle","style1","=","loc1",".","cell",".","getCellStyle","(",")",";","\n","if","(","style1","==","null",")","{","\n","return",";","\n","}","\n","CellStyle","style2","=","loc2",".","cell",".","getCellStyle","(",")",";","\n","if","(","style2","==","null",")","{","\n","return",";","\n","}","\n\n","boolean","b1,","b2",";","\n","String","borderName",";","\n","switch","(","borderSide",")","{","\n","case","'b':\n","b1","=","style1",".","getBorderBottom","(",")","==","BorderStyle",".","THIN",";","\n","b2","=","style2",".","getBorderBottom","(",")","==","BorderStyle",".","THIN",";","\n","borderName","=","\"BOTTOM\"",";","\n","break",";","\n","case","'l':\n","b1","=","style1",".","getBorderLeft","(",")","==","BorderStyle",".","THIN",";","\n","b2","=","style2",".","getBorderLeft","(",")","==","BorderStyle",".","THIN",";","\n","borderName","=","\"LEFT\"",";","\n","break",";","\n","case","'r':\n","b1","=","style1",".","getBorderRight","(",")","==","BorderStyle",".","THIN",";","\n","b2","=","style2",".","getBorderRight","(",")","==","BorderStyle",".","THIN",";","\n","borderName","=","\"RIGHT\"",";","\n","break",";","\n","case","'t':\n","default:\n","b1","=","style1",".","getBorderTop","(",")","==","BorderStyle",".","THIN",";","\n","b2","=","style2",".","getBorderTop","(",")","==","BorderStyle",".","THIN",";","\n","borderName","=","\"TOP\"",";","\n","break",";","\n","}","\n","if","(","b1","!=","b2",")","{","\n","addMessage","(","loc1,","loc2,\n","\"Cell","Border","Attributes","does","not","Match","::\",\n","(","b1","?","\"\"",":","\"NOT","\"",")","+borderName+\"","BORDER\",\n","(","b2","?","\"\"",":","\"NOT","\"",")","+borderName+\"","BORDER\"\n",")",";","\n","}","\n"],"docstring_tokens":["Checks","if","cell","border","bottom","matches"]}
{"code_tokens":["\n","@Internal\n","public","void","setGrfSupression","(","byte","value",")","\n","{","\n","field_1_formatFlags","=","(","byte",")","grfSupression",".","setValue","(","field_1_formatFlags,","value",")",";","\n"],"docstring_tokens":["Sets","the","grfSupression","field","value"]}
{"code_tokens":["\n","@Internal\n","public","void","setFpc","(","byte","value",")","\n","{","\n","field_1_formatFlags","=","(","byte",")","fpc",".","setValue","(","field_1_formatFlags,","value",")",";","\n"],"docstring_tokens":["Sets","the","fpc","field","value"]}
{"code_tokens":["\n","@Internal\n","public","void","setRncFtn","(","byte","value",")","\n","{","\n","field_3_footnoteInfo","=","(","short",")","rncFtn",".","setValue","(","field_3_footnoteInfo,","value",")",";","\n"],"docstring_tokens":["Sets","the","rncFtn","field","value"]}
{"code_tokens":["\n","@Internal\n","public","void","setNFtn","(","short","value",")","\n","{","\n","field_3_footnoteInfo","=","(","short",")","nFtn",".","setValue","(","field_3_footnoteInfo,","value",")",";","\n"],"docstring_tokens":["Sets","the","nFtn","field","value"]}
{"code_tokens":["\n","@Internal\n","public","void","setUnused5","(","byte","value",")","\n","{","\n","field_8_docinfo3","=","(","short",")","unused5",".","setValue","(","field_8_docinfo3,","value",")",";","\n"],"docstring_tokens":["Sets","the","unused5","field","value"]}
{"code_tokens":["\n","@Internal\n","public","void","setRncEdn","(","byte","value",")","\n","{","\n","field_23_Edn","=","(","short",")","rncEdn",".","setValue","(","field_23_Edn,","value",")",";","\n"],"docstring_tokens":["Sets","the","rncEdn","field","value"]}
{"code_tokens":["\n","@Internal\n","public","void","setNEdn","(","short","value",")","\n","{","\n","field_23_Edn","=","(","short",")","nEdn",".","setValue","(","field_23_Edn,","value",")",";","\n"],"docstring_tokens":["Sets","the","nEdn","field","value"]}
{"code_tokens":["\n","@Internal\n","public","void","setEpc","(","byte","value",")","\n","{","\n","field_24_Edn1","=","(","short",")","epc",".","setValue","(","field_24_Edn1,","value",")",";","\n"],"docstring_tokens":["Sets","the","epc","field","value"]}
{"code_tokens":["\n","@Internal\n","public","void","setNfcFtnRef1","(","byte","value",")","\n","{","\n","field_24_Edn1","=","(","short",")","nfcFtnRef1",".","setValue","(","field_24_Edn1,","value",")",";","\n"],"docstring_tokens":["Sets","the","nfcFtnRef1","field","value"]}
{"code_tokens":["\n","@Internal\n","public","void","setNfcEdnRef1","(","byte","value",")","\n","{","\n","field_24_Edn1","=","(","short",")","nfcEdnRef1",".","setValue","(","field_24_Edn1,","value",")",";","\n"],"docstring_tokens":["Sets","the","nfcEdnRef1","field","value"]}
{"code_tokens":["\n","@Internal\n","public","void","setWvkSaved","(","byte","value",")","\n","{","\n","field_32_view","=","(","short",")","wvkSaved",".","setValue","(","field_32_view,","value",")",";","\n"],"docstring_tokens":["Sets","the","wvkSaved","field","value"]}
{"code_tokens":["\n","@Internal\n","public","void","setWScaleSaved","(","short","value",")","\n","{","\n","field_32_view","=","(","short",")","wScaleSaved",".","setValue","(","field_32_view,","value",")",";","\n"],"docstring_tokens":["Sets","the","wScaleSaved","field","value"]}
{"code_tokens":["\n","@Internal\n","public","void","setZkSaved","(","byte","value",")","\n","{","\n","field_32_view","=","(","short",")","zkSaved",".","setValue","(","field_32_view,","value",")",";","\n"],"docstring_tokens":["Sets","the","zkSaved","field","value"]}
{"code_tokens":["\n","@Internal\n","public","void","setLvl","(","byte","value",")","\n","{","\n","field_37_docinfo5","=","(","short",")","lvl",".","setValue","(","field_37_docinfo5,","value",")",";","\n"],"docstring_tokens":["Sets","the","lvl","field","value"]}
{"code_tokens":["\n","@Internal\n","public","void","setKeyVirusSession30","(","int","value",")","\n","{","\n","field_43_virusinfo","=","KeyVirusSession30",".","setValue","(","field_43_virusinfo,","value",")",";","\n"],"docstring_tokens":["Sets","the","KeyVirusSession30","field","value"]}
{"code_tokens":["\n","public","static","boolean","startsWithIgnoreCase","(","String","haystack,","String","prefix",")","{","\n","return","haystack",".","regionMatches","(","true,","0,","prefix,","0,","prefix",".","length","(",")",")",";","\n"],"docstring_tokens":["Tests","if","the","string","starts","with","the","specified","prefix,","ignoring","case","consideration"]}
{"code_tokens":["\n","public","static","boolean","endsWithIgnoreCase","(","String","haystack,","String","suffix",")","{","\n","int","length","=","suffix",".","length","(",")",";","\n","int","start","=","haystack",".","length","(",")","-","length",";","\n","return","haystack",".","regionMatches","(","true,","start,","suffix,","0,","length",")",";","\n"],"docstring_tokens":["Tests","if","the","string","ends","with","the","specified","suffix,","ignoring","case","consideration"]}
{"code_tokens":["\n","public","String","getFormat","(","short","index",")","{","\n","if","(","_movedBuiltins",")","{","\n","return","_formats",".","get","(","index",")",";","\n","}","\n\n","if","(","index","==","-1",")","{","\n","//","YK:","formatIndex","can","be","-1,","for","example,","for","cell","in","column","Y","in","test-data/spreadsheet/45322",".","xls\n","//","return","null","for","those\n","return","null",";","\n","}","\n\n","String","fmt","=","_formats",".","size","(",")",">","index","?","_formats",".","get","(","index",")",":","null",";","\n","if","(","_builtinFormats",".","length",">","index","&&","_builtinFormats[index]","!=","null",")","{","\n","//","It's","in","the","built","in","range\n","if","(","fmt","!=","null",")","{","\n","//","It's","been","overriden,","use","that","value\n","return","fmt",";","\n","}","else","{","\n","//","Standard","built","in","format\n","return","_builtinFormats[index]",";","\n","}","\n","}","\n","return","fmt",";","\n"],"docstring_tokens":["get","the","format","string","that","matches","the","given","format","index"]}
{"code_tokens":["\n","public","void","setParsedExpression","(","Ptg[]","ptgs",")","{","\n","notifyFormulaChanging","(",")",";","\n","_formulaRecord",".","setParsedExpression","(","ptgs",")",";","\n"],"docstring_tokens":["Also","checks","for","a","related","shared","formula","and","unlinks","it","if","found"]}
{"code_tokens":["\n","public","short","getChartGroupIndex","(",")","\n","{","\n","return","field_1_chartGroupIndex",";","\n"],"docstring_tokens":["Get","the","chart","group","index","field","for","the","SeriesChartGroupIndex","record"]}
{"code_tokens":["\n","public","void","setChartGroupIndex","(","short","field_1_chartGroupIndex",")","\n","{","\n","this",".","field_1_chartGroupIndex","=","field_1_chartGroupIndex",";","\n"],"docstring_tokens":["Set","the","chart","group","index","field","for","the","SeriesChartGroupIndex","record"]}
{"code_tokens":["\n","protected","void","cacheProperties","(",")","{","\n","if","(","origSize","==","null","||","checksum","==","null",")","{","\n","byte[]","data","=","getData","(",")",";","\n","checksum","=","IOUtils",".","calculateChecksum","(","data",")",";","\n","\n","PictureType","pt","=","getType","(",")",";","\n","if","(","pt","==","null",")","{","\n","origSize","=","new","Dimension","(","1,1",")",";","\n","return",";","\n","}","\n","\n","switch","(","pt",")","{","\n","case","EMF:\n","origSize","=","new","ImageHeaderEMF","(","data,","0",")",".","getSize","(",")",";","\n","break",";","\n","case","WMF:\n","//","wmf","files","in","pptx","usually","have","their","placeable","header","\n","//","stripped","away,","so","this","returns","only","the","dummy","size\n","origSize","=","new","ImageHeaderWMF","(","data,","0",")",".","getSize","(",")",";","\n","break",";","\n","case","PICT:\n","origSize","=","new","ImageHeaderPICT","(","data,","0",")",".","getSize","(",")",";","\n","break",";","\n","default:\n","origSize","=","new","ImageHeaderBitmap","(","data,","0",")",".","getSize","(",")",";","\n","break",";","\n","}","\n","}","\n"],"docstring_tokens":["Determine","and","cache","image","properties"]}
{"code_tokens":["\n","private","int","writeHidden","(","RowRecord","pRowRecord,","int","row",")","{","\n","int","rowIx","=","row",";","\n","RowRecord","rowRecord","=","pRowRecord",";","\n","int","level","=","rowRecord",".","getOutlineLevel","(",")",";","\n","while","(","rowRecord","!=","null","&&","getRow","(","rowIx",")",".","getOutlineLevel","(",")",">=","level",")","{","\n","rowRecord",".","setZeroHeight","(","true",")",";","\n","rowIx++",";","\n","rowRecord","=","getRow","(","rowIx",")",";","\n","}","\n","return","rowIx",";","\n"],"docstring_tokens":["Hide","all","rows","at","or","below","the","current","outline","level"]}
{"code_tokens":["\n","@SuppressWarnings","(","\"WeakerAccess\"",")","\n","public","void","setBulletAutoNumber","(","AutoNumberingScheme","scheme,","int","startAt",")","{","\n","if","(","startAt","<","1",")","{","\n","throw","new","IllegalArgumentException","(","\"Start","Number","must","be","greater","or","equal","that","1\"",")",";","\n","}","\n","CTTextParagraphProperties","pr","=","_p",".","isSetPPr","(",")","?","_p",".","getPPr","(",")",":","_p",".","addNewPPr","(",")",";","\n","CTTextAutonumberBullet","lst","=","pr",".","isSetBuAutoNum","(",")","?","pr",".","getBuAutoNum","(",")",":","pr",".","addNewBuAutoNum","(",")",";","\n","lst",".","setType","(","STTextAutonumberScheme",".","Enum",".","forInt","(","scheme",".","ooxmlId",")",")",";","\n","lst",".","setStartAt","(","startAt",")",";","\n"],"docstring_tokens":["Specifies","that","automatic","numbered","bullet","points","should","be","applied","to","this","paragraph"]}
{"code_tokens":["\n","public","short","getMinimumCategory","(",")","\n","{","\n","return","field_1_minimumCategory",";","\n"],"docstring_tokens":["Get","the","minimum","category","field","for","the","AxisOptions","record"]}
{"code_tokens":["\n","public","void","setMinimumCategory","(","short","field_1_minimumCategory",")","\n","{","\n","this",".","field_1_minimumCategory","=","field_1_minimumCategory",";","\n"],"docstring_tokens":["Set","the","minimum","category","field","for","the","AxisOptions","record"]}
{"code_tokens":["\n","public","short","getMaximumCategory","(",")","\n","{","\n","return","field_2_maximumCategory",";","\n"],"docstring_tokens":["Get","the","maximum","category","field","for","the","AxisOptions","record"]}
{"code_tokens":["\n","public","void","setMaximumCategory","(","short","field_2_maximumCategory",")","\n","{","\n","this",".","field_2_maximumCategory","=","field_2_maximumCategory",";","\n"],"docstring_tokens":["Set","the","maximum","category","field","for","the","AxisOptions","record"]}
{"code_tokens":["\n","public","short","getMajorUnitValue","(",")","\n","{","\n","return","field_3_majorUnitValue",";","\n"],"docstring_tokens":["Get","the","major","unit","value","field","for","the","AxisOptions","record"]}
{"code_tokens":["\n","public","void","setMajorUnitValue","(","short","field_3_majorUnitValue",")","\n","{","\n","this",".","field_3_majorUnitValue","=","field_3_majorUnitValue",";","\n"],"docstring_tokens":["Set","the","major","unit","value","field","for","the","AxisOptions","record"]}
{"code_tokens":["\n","public","short","getMajorUnit","(",")","\n","{","\n","return","field_4_majorUnit",";","\n"],"docstring_tokens":["Get","the","major","unit","field","for","the","AxisOptions","record"]}
{"code_tokens":["\n","public","void","setMajorUnit","(","short","field_4_majorUnit",")","\n","{","\n","this",".","field_4_majorUnit","=","field_4_majorUnit",";","\n"],"docstring_tokens":["Set","the","major","unit","field","for","the","AxisOptions","record"]}
{"code_tokens":["\n","public","short","getMinorUnitValue","(",")","\n","{","\n","return","field_5_minorUnitValue",";","\n"],"docstring_tokens":["Get","the","minor","unit","value","field","for","the","AxisOptions","record"]}
{"code_tokens":["\n","public","void","setMinorUnitValue","(","short","field_5_minorUnitValue",")","\n","{","\n","this",".","field_5_minorUnitValue","=","field_5_minorUnitValue",";","\n"],"docstring_tokens":["Set","the","minor","unit","value","field","for","the","AxisOptions","record"]}
{"code_tokens":["\n","public","short","getMinorUnit","(",")","\n","{","\n","return","field_6_minorUnit",";","\n"],"docstring_tokens":["Get","the","minor","unit","field","for","the","AxisOptions","record"]}
{"code_tokens":["\n","public","void","setMinorUnit","(","short","field_6_minorUnit",")","\n","{","\n","this",".","field_6_minorUnit","=","field_6_minorUnit",";","\n"],"docstring_tokens":["Set","the","minor","unit","field","for","the","AxisOptions","record"]}
{"code_tokens":["\n","public","short","getBaseUnit","(",")","\n","{","\n","return","field_7_baseUnit",";","\n"],"docstring_tokens":["Get","the","base","unit","field","for","the","AxisOptions","record"]}
{"code_tokens":["\n","public","void","setBaseUnit","(","short","field_7_baseUnit",")","\n","{","\n","this",".","field_7_baseUnit","=","field_7_baseUnit",";","\n"],"docstring_tokens":["Set","the","base","unit","field","for","the","AxisOptions","record"]}
{"code_tokens":["\n","public","short","getCrossingPoint","(",")","\n","{","\n","return","field_8_crossingPoint",";","\n"],"docstring_tokens":["Get","the","crossing","point","field","for","the","AxisOptions","record"]}
{"code_tokens":["\n","public","void","setCrossingPoint","(","short","field_8_crossingPoint",")","\n","{","\n","this",".","field_8_crossingPoint","=","field_8_crossingPoint",";","\n"],"docstring_tokens":["Set","the","crossing","point","field","for","the","AxisOptions","record"]}
{"code_tokens":["\n","public","short","getOptions","(",")","\n","{","\n","return","field_9_options",";","\n"],"docstring_tokens":["Get","the","options","field","for","the","AxisOptions","record"]}
{"code_tokens":["\n","public","void","setOptions","(","short","field_9_options",")","\n","{","\n","this",".","field_9_options","=","field_9_options",";","\n"],"docstring_tokens":["Set","the","options","field","for","the","AxisOptions","record"]}
{"code_tokens":["\n","public","boolean","isIsDate","(",")","\n","{","\n","return","isDate",".","isSet","(","field_9_options",")",";","\n"],"docstring_tokens":["this","is","a","date","axis"]}
{"code_tokens":["\n","public","boolean","isDefaultDateSettings","(",")","\n","{","\n","return","defaultDateSettings",".","isSet","(","field_9_options",")",";","\n"],"docstring_tokens":["use","default","date","setttings","for","this","axis"]}
{"code_tokens":["\n","public","static","void","createShapeTree","(","EscherContainerRecord","container,","EscherAggregate","agg,","HSSFShapeContainer","out,","DirectoryNode","root",")","{","\n","if","(","container",".","getRecordId","(",")","==","EscherContainerRecord",".","SPGR_CONTAINER",")","{","\n","ObjRecord","obj","=","null",";","\n","EscherClientDataRecord","clientData","=","(","(","EscherContainerRecord",")","container",".","getChild","(","0",")",")",".","getChildById","(","EscherClientDataRecord",".","RECORD_ID",")",";","\n","if","(","null","!=","clientData",")","{","\n","obj","=","(","ObjRecord",")","agg",".","getShapeToObjMapping","(",")",".","get","(","clientData",")",";","\n","}","\n","HSSFShapeGroup","group","=","new","HSSFShapeGroup","(","container,","obj",")",";","\n","List<EscherContainerRecord>","children","=","container",".","getChildContainers","(",")",";","\n","//","skip","the","first","child","record,","it","is","group","descriptor\n","if","(","children",".","size","(",")",">","1",")","{","\n","children",".","subList","(","1,","children",".","size","(",")",")",".","forEach","(","c","->","createShapeTree","(","c,","agg,","group,","root",")",")",";","\n","}","\n","out",".","addShape","(","group",")",";","\n","}","else","if","(","container",".","getRecordId","(",")","==","EscherContainerRecord",".","SP_CONTAINER",")","{","\n","Map<EscherRecord,","Record>","shapeToObj","=","agg",".","getShapeToObjMapping","(",")",";","\n","ObjRecord","objRecord","=","null",";","\n","TextObjectRecord","txtRecord","=","null",";","\n\n","for","(","EscherRecord","record",":","container",")","{","\n","switch","(","EscherRecordTypes",".","forTypeID","(","record",".","getRecordId","(",")",")",")","{","\n","case","CLIENT_DATA:\n","objRecord","=","(","ObjRecord",")","shapeToObj",".","get","(","record",")",";","\n","break",";","\n","case","CLIENT_TEXTBOX:\n","txtRecord","=","(","TextObjectRecord",")","shapeToObj",".","get","(","record",")",";","\n","break",";","\n","default:\n","break",";","\n","}","\n","}","\n","if","(","objRecord","==","null",")","{","\n","throw","new","RecordFormatException","(","\"EscherClientDataRecord","can't","be","found",".","\"",")",";","\n","}","\n","if","(","isEmbeddedObject","(","objRecord",")",")","{","\n","HSSFObjectData","objectData","=","new","HSSFObjectData","(","container,","objRecord,","root",")",";","\n","out",".","addShape","(","objectData",")",";","\n","return",";","\n","}","\n","CommonObjectDataSubRecord","cmo","=","(","CommonObjectDataSubRecord",")","objRecord",".","getSubRecords","(",")",".","get","(","0",")",";","\n","final","HSSFShape","shape",";","\n","switch","(","cmo",".","getObjectType","(",")",")","{","\n","case","CommonObjectDataSubRecord",".","OBJECT_TYPE_PICTURE:\n","shape","=","new","HSSFPicture","(","container,","objRecord",")",";","\n","break",";","\n","case","CommonObjectDataSubRecord",".","OBJECT_TYPE_RECTANGLE:\n","shape","=","new","HSSFSimpleShape","(","container,","objRecord,","txtRecord",")",";","\n","break",";","\n","case","CommonObjectDataSubRecord",".","OBJECT_TYPE_LINE:\n","shape","=","new","HSSFSimpleShape","(","container,","objRecord",")",";","\n","break",";","\n","case","CommonObjectDataSubRecord",".","OBJECT_TYPE_COMBO_BOX:\n","shape","=","new","HSSFCombobox","(","container,","objRecord",")",";","\n","break",";","\n","case","CommonObjectDataSubRecord",".","OBJECT_TYPE_MICROSOFT_OFFICE_DRAWING:\n","EscherOptRecord","optRecord","=","container",".","getChildById","(","EscherOptRecord",".","RECORD_ID",")",";","\n","if","(","optRecord","==","null",")","{","\n","shape","=","new","HSSFSimpleShape","(","container,","objRecord,","txtRecord",")",";","\n","}","else","{","\n","EscherProperty","property","=","optRecord",".","lookup","(","EscherPropertyTypes",".","GEOMETRY__VERTICES",")",";","\n","if","(","null","!=","property",")","{","\n","shape","=","new","HSSFPolygon","(","container,","objRecord,","txtRecord",")",";","\n","}","else","{","\n","shape","=","new","HSSFSimpleShape","(","container,","objRecord,","txtRecord",")",";","\n","}","\n","}","\n","break",";","\n","case","CommonObjectDataSubRecord",".","OBJECT_TYPE_TEXT:\n","shape","=","new","HSSFTextbox","(","container,","objRecord,","txtRecord",")",";","\n","break",";","\n","case","CommonObjectDataSubRecord",".","OBJECT_TYPE_COMMENT:\n","shape","=","new","HSSFComment","(","container,","objRecord,","txtRecord,","agg",".","getNoteRecordByObj","(","objRecord",")",")",";","\n","break",";","\n","default:\n","shape","=","new","HSSFSimpleShape","(","container,","objRecord,","txtRecord",")",";","\n","}","\n","out",".","addShape","(","shape",")",";","\n","}","\n"],"docstring_tokens":["build","shape","tree","from","escher","container"]}
{"code_tokens":["\n","public","void","setSheetname","(","String","sheetName",")","{","\n\n","WorkbookUtil",".","validateSheetName","(","sheetName",")",";","\n","field_5_sheetname","=","sheetName",";","\n","field_4_isMultibyteUnicode","=","StringUtil",".","hasMultibyte","(","sheetName",")","?","1",":","0",";","\n"],"docstring_tokens":["Set","the","sheetname","for","this","sheet"]}
{"code_tokens":["\n","public","static","BoundSheetRecord[]","orderByBofPosition","(","List<BoundSheetRecord>","boundSheetRecords",")","{","\n","BoundSheetRecord[]","bsrs","=","new","BoundSheetRecord[boundSheetRecords",".","size","(",")","]",";","\n","boundSheetRecords",".","toArray","(","bsrs",")",";","\n","Arrays",".","sort","(","bsrs,","BoundSheetRecord::compareRecords",")",";","\n","return","bsrs",";","\n"],"docstring_tokens":["Converts","a","List","of","BoundSheetRecords","to","an","array","and","sorts","by","the","position","of","their","BOFs"]}
{"code_tokens":["\n","private","void","checkForEmptyCellComments","(","EmptyCellCommentsCheckType","type",")","{","\n","if","(","commentCellRefs","!=","null","&&","!commentCellRefs",".","isEmpty","(",")",")","{","\n","//","If","we've","reached","the","end","of","the","sheet","data,","output","any\n","//","comments","we","haven't","yet","already","handled\n","if","(","type","==","EmptyCellCommentsCheckType",".","END_OF_SHEET_DATA",")","{","\n","while","(","!commentCellRefs",".","isEmpty","(",")",")","{","\n","outputEmptyCellComment","(","commentCellRefs",".","remove","(",")",")",";","\n","}","\n","return",";","\n","}","\n\n","//","At","the","end","of","a","row,","handle","any","comments","for","\"missing\"","rows","before","us\n","if","(","this",".","cellRef","==","null",")","{","\n","if","(","type","==","EmptyCellCommentsCheckType",".","END_OF_ROW",")","{","\n","while","(","!commentCellRefs",".","isEmpty","(",")",")","{","\n","if","(","commentCellRefs",".","peek","(",")",".","getRow","(",")","==","rowNum",")","{","\n","outputEmptyCellComment","(","commentCellRefs",".","remove","(",")",")",";","\n","}","else","{","\n","return",";","\n","}","\n","}","\n","return",";","\n","}","else","{","\n","throw","new","IllegalStateException","(","\"Cell","ref","should","be","null","only","if","there","are","only","empty","cells","in","the","row",";","rowNum:","\"","+","rowNum",")",";","\n","}","\n","}","\n\n","CellAddress","nextCommentCellRef",";","\n","do","{","\n","CellAddress","cellRef","=","new","CellAddress","(","this",".","cellRef",")",";","\n","CellAddress","peekCellRef","=","commentCellRefs",".","peek","(",")",";","\n","if","(","type","==","EmptyCellCommentsCheckType",".","CELL","&&","cellRef",".","equals","(","peekCellRef",")",")","{","\n","//","remove","the","comment","cell","ref","from","the","list","if","we're","about","to","handle","it","alongside","the","cell","content\n","commentCellRefs",".","remove","(",")",";","\n","return",";","\n","}","else","{","\n","//","fill","in","any","gaps","if","there","are","empty","cells","with","comment","mixed","in","with","non-empty","cells\n","int","comparison","=","peekCellRef",".","compareTo","(","cellRef",")",";","\n","if","(","comparison",">","0","&&","type","==","EmptyCellCommentsCheckType",".","END_OF_ROW","&&","peekCellRef",".","getRow","(",")","<=","rowNum",")","{","\n","nextCommentCellRef","=","commentCellRefs",".","remove","(",")",";","\n","outputEmptyCellComment","(","nextCommentCellRef",")",";","\n","}","else","if","(","comparison","<","0","&&","type","==","EmptyCellCommentsCheckType",".","CELL","&&","peekCellRef",".","getRow","(",")","<=","rowNum",")","{","\n","nextCommentCellRef","=","commentCellRefs",".","remove","(",")",";","\n","outputEmptyCellComment","(","nextCommentCellRef",")",";","\n","}","else","{","\n","nextCommentCellRef","=","null",";","\n","}","\n","}","\n","}","while","(","nextCommentCellRef","!=","null","&&","!commentCellRefs",".","isEmpty","(",")",")",";","\n","}","\n"],"docstring_tokens":["Do","a","check","for,","and","output,","comments","in","otherwise","empty","cells"]}
{"code_tokens":["\n","@Override\n","protected","EscherContainerRecord","createSpContainer","(","boolean","isChild",")","{","\n","EscherContainerRecord","ecr","=","super",".","createSpContainer","(","isChild",")",";","\n","ecr",".","setRecordId","(","EscherContainerRecord",".","SP_CONTAINER",")",";","\n\n","EscherSpRecord","sp","=","new","EscherSpRecord","(",")",";","\n","int","flags","=","EscherSpRecord",".","FLAG_HAVEANCHOR","|","EscherSpRecord",".","FLAG_HASSHAPETYPE",";","\n","if","(","isChild",")","{","\n","flags","|=","EscherSpRecord",".","FLAG_CHILD",";","\n","}","\n","sp",".","setFlags","(","flags",")",";","\n","ecr",".","addChildRecord","(","sp",")",";","\n\n","AbstractEscherOptRecord","opt","=","new","EscherOptRecord","(",")",";","\n","opt",".","setRecordId","(","EscherOptRecord",".","RECORD_ID",")",";","\n","ecr",".","addChildRecord","(","opt",")",";","\n\n","EscherRecord","anchor",";","\n","if","(","isChild",")","{","\n","anchor","=","new","EscherChildAnchorRecord","(",")",";","\n","}","else","{","\n","anchor","=","new","EscherClientAnchorRecord","(",")",";","\n\n","//hack",".","internal","variable","EscherClientAnchorRecord",".","shortRecord","can","be\n","//initialized","only","in","fillFields","(",")",".","We","need","to","set","shortRecord=false",";","\n","byte[]","header","=","new","byte[16]",";","\n","LittleEndian",".","putUShort","(","header,","0,","0",")",";","\n","LittleEndian",".","putUShort","(","header,","2,","0",")",";","\n","LittleEndian",".","putInt","(","header,","4,","8",")",";","\n","anchor",".","fillFields","(","header,","0,","null",")",";","\n","}","\n","ecr",".","addChildRecord","(","anchor",")",";","\n\n","return","ecr",";","\n"],"docstring_tokens":["Create","a","new","Shape"]}
{"code_tokens":["\n","public","void","setLineCompound","(","LineCompound","style",")","{","\n","AbstractEscherOptRecord","opt","=","getEscherOptRecord","(",")",";","\n","setEscherProperty","(","opt,","EscherPropertyTypes",".","LINESTYLE__LINESTYLE,","style","==","LineCompound",".","SINGLE","?","-1",":","style",".","nativeId",")",";","\n"],"docstring_tokens":["Sets","the","line","compound","style"]}
{"code_tokens":["\n\n","public","static","String","dump","(","final","byte","[]","data,","final","long","offset,","final","int","index",")","{","\n","return","dump","(","data,","offset,","index,","Integer",".","MAX_VALUE",")",";","\n"],"docstring_tokens":["dump","an","array","of","bytes","to","a","String"]}
{"code_tokens":["\n","public","short","getCrossingPoint","(",")","\n","{","\n","return","field_1_crossingPoint",";","\n"],"docstring_tokens":["Get","the","crossing","point","field","for","the","CategorySeriesAxis","record"]}
{"code_tokens":["\n","public","void","setCrossingPoint","(","short","field_1_crossingPoint",")","\n","{","\n","this",".","field_1_crossingPoint","=","field_1_crossingPoint",";","\n"],"docstring_tokens":["Set","the","crossing","point","field","for","the","CategorySeriesAxis","record"]}
{"code_tokens":["\n","public","short","getLabelFrequency","(",")","\n","{","\n","return","field_2_labelFrequency",";","\n"],"docstring_tokens":["Get","the","label","frequency","field","for","the","CategorySeriesAxis","record"]}
{"code_tokens":["\n","public","void","setLabelFrequency","(","short","field_2_labelFrequency",")","\n","{","\n","this",".","field_2_labelFrequency","=","field_2_labelFrequency",";","\n"],"docstring_tokens":["Set","the","label","frequency","field","for","the","CategorySeriesAxis","record"]}
{"code_tokens":["\n","public","short","getTickMarkFrequency","(",")","\n","{","\n","return","field_3_tickMarkFrequency",";","\n"],"docstring_tokens":["Get","the","tick","mark","frequency","field","for","the","CategorySeriesAxis","record"]}
{"code_tokens":["\n","public","void","setTickMarkFrequency","(","short","field_3_tickMarkFrequency",")","\n","{","\n","this",".","field_3_tickMarkFrequency","=","field_3_tickMarkFrequency",";","\n"],"docstring_tokens":["Set","the","tick","mark","frequency","field","for","the","CategorySeriesAxis","record"]}
{"code_tokens":["\n","public","short","getOptions","(",")","\n","{","\n","return","field_4_options",";","\n"],"docstring_tokens":["Get","the","options","field","for","the","CategorySeriesAxis","record"]}
{"code_tokens":["\n","public","void","setOptions","(","short","field_4_options",")","\n","{","\n","this",".","field_4_options","=","field_4_options",";","\n"],"docstring_tokens":["Set","the","options","field","for","the","CategorySeriesAxis","record"]}
{"code_tokens":["\n","public","boolean","isValueAxisCrossing","(",")","\n","{","\n","return","valueAxisCrossing",".","isSet","(","field_4_options",")",";","\n"],"docstring_tokens":["set","true","to","indicate","axis","crosses","between","categories","and","false","to","cross","axis","midway"]}
{"code_tokens":["\n","public","boolean","isCrossesFarRight","(",")","\n","{","\n","return","crossesFarRight",".","isSet","(","field_4_options",")",";","\n"],"docstring_tokens":["axis","crosses","at","the","far","right"]}
{"code_tokens":["\n","public","boolean","isReversed","(",")","\n","{","\n","return","reversed",".","isSet","(","field_4_options",")",";","\n"],"docstring_tokens":["categories","are","displayed","in","reverse","order"]}
{"code_tokens":["\n","private","List<?","extends","DataValidation>","getValidations","(","Sheet","sheet",")","{","\n","List<?","extends","DataValidation>","dvs","=","validations",".","get","(","sheet",".","getSheetName","(",")",")",";","\n","if","(","dvs","==","null","&&","!validations",".","containsKey","(","sheet",".","getSheetName","(",")",")",")","{","\n","dvs","=","sheet",".","getDataValidations","(",")",";","\n","validations",".","put","(","sheet",".","getSheetName","(",")",",","dvs",")",";","\n","}","\n","return","dvs",";","\n"],"docstring_tokens":["Lazy","load","validations","by","sheet,","since","reading","the","CT","types","is","expensive"]}
{"code_tokens":["\n","public","static","boolean","isType","(","Cell","cell,","CellType","type",")","{","\n","final","CellType","cellType","=","cell",".","getCellType","(",")",";","\n","return","cellType","==","type","\n","||","(","cellType","==","CellType",".","FORMULA","\n","&&","cell",".","getCachedFormulaResultType","(",")","==","type\n",")",";","\n"],"docstring_tokens":["Note","that","this","assumes","the","cell","cached","value","is","up","to","date","and","in","sync","with","data","edits"]}
{"code_tokens":["\n","public","void","writeTo","(","ByteArrayOutputStream","tableStream",")","throws","IOException\n","{","\n","SttbUtils",".","writeSttbfRMark","(","entries,","tableStream",")",";","\n"],"docstring_tokens":["Writes","this","table","to","the","table","stream"]}
{"code_tokens":["\n","public","int","getNumPointersOffset","(","byte[]","data",")","{","\n","switch","(","getType","(",")",")","{","\n","case","0x1d:\n","case","0x4e:\n","return","30",";","\n","case","0x1e:\n","return","54",";","\n","case","0x14:\n","return","130",";","\n","}","\n","return","10",";","\n"],"docstring_tokens":["Depends","on","the","type","only,","not","stored"]}
{"code_tokens":["\n","public","boolean","isShadow","(",")","{","\n","return","_fShadow",".","getValue","(","_info2",")","!=","0",";","\n"],"docstring_tokens":["When","true,","border","is","drawn","with","shadow","Must","be","false","when","BRC","is","a","substructure","of","the","TC"]}
{"code_tokens":["\n","public","List<EscherProperty>","createProperties","(","byte[]","data,","int","offset,","short","numProperties",")","{","\n","List<EscherProperty>","results","=","new","ArrayList<>","(",")",";","\n\n","int","pos","=","offset",";","\n\n","for","(","int","i","=","0",";","i","<","numProperties",";","i++",")","{","\n","final","short","propId","=","LittleEndian",".","getShort","(","data,","pos",")",";","\n","final","int","propData","=","LittleEndian",".","getInt","(","data,","pos","+","2",")",";","\n","final","boolean","isComplex","=","(","propId","&","EscherProperty",".","IS_COMPLEX",")","!=","0",";","\n\n","EscherPropertyTypes","propertyType","=","EscherPropertyTypes",".","forPropertyID","(","propId",")",";","\n\n","final","BiFunction<Short,Integer,EscherProperty>","con",";","\n","switch","(","propertyType",".","holder",")","{","\n","case","BOOLEAN:\n","con","=","EscherBoolProperty::new",";","\n","break",";","\n","case","RGB:\n","con","=","EscherRGBProperty::new",";","\n","break",";","\n","case","SHAPE_PATH:\n","con","=","EscherShapePathProperty::new",";","\n","break",";","\n","default:\n","if","(","isComplex",")","{","\n","con","=","(","propertyType",".","holder","==","EscherPropertyTypesHolder",".","ARRAY",")","\n","?","EscherArrayProperty::new\n",":","EscherComplexProperty::new",";","\n","}","else","{","\n","con","=","EscherSimpleProperty::new",";","\n","}","\n","break",";","\n","}","\n\n","results",".","add","(","con",".","apply","(","propId,propData",")",")",";","\n","pos","+=","6",";","\n","}","\n\n","//","Get","complex","data\n","for","(","EscherProperty","p",":","results",")","{","\n","if","(","p","instanceof","EscherArrayProperty",")","{","\n","EscherArrayProperty","eap","=","(","EscherArrayProperty",")","p",";","\n","pos","+=","eap",".","setArrayData","(","data,","pos",")",";","\n","}","else","if","(","p","instanceof","EscherComplexProperty",")","{","\n","EscherComplexProperty","ecp","=","(","EscherComplexProperty",")","p",";","\n","int","cdLen","=","ecp",".","getComplexData","(",")",".","length",";","\n","int","leftover","=","data",".","length","-","pos",";","\n","if","(","leftover","<","cdLen",")","{","\n","throw","new","IllegalStateException","(","\"Could","not","read","complex","escher","property,","length","was","\"","+\n","cdLen","+","\",","but","had","only","\"","+","leftover","+","\"","bytes","left\"",")",";","\n","}","\n","pos","+=","ecp",".","setComplexData","(","data,","pos",")",";","\n","}","\n","}","\n","return","results",";","\n"],"docstring_tokens":["Create","new","properties","from","a","byte","array"]}
{"code_tokens":["\n","@Override\n","public","SXSSFSheet","createSheet","(",")","\n","{","\n","return","createAndRegisterSXSSFSheet","(","_wb",".","createSheet","(",")",")",";","\n"],"docstring_tokens":["Create","a","Sheet","for","this","Workbook,","adds","it","to","the","sheets","and","returns","the","high","level","representation"]}
{"code_tokens":["\n","@Override\n","@NotImplemented\n","public","Sheet","cloneSheet","(","int","sheetNum",")","{","\n","throw","new","RuntimeException","(","\"Not","Implemented\"",")",";","\n"],"docstring_tokens":["Not","implemented","for","SXSSFWorkbook","Create","a","Sheet","from","an","existing","sheet","in","the","Workbook"]}
{"code_tokens":["\n","@Override\n","public","int","getNumberOfSheets","(",")","\n","{","\n","return","_wb",".","getNumberOfSheets","(",")",";","\n"],"docstring_tokens":["Get","the","number","of","spreadsheets","in","the","workbook"]}
{"code_tokens":["\n","@Override\n","public","void","write","(","OutputStream","stream",")","throws","IOException","{","\n","flushSheets","(",")",";","\n\n","//Save","the","template\n","File","tmplFile","=","TempFile",".","createTempFile","(","\"poi-sxssf-template\",","\"",".","xlsx\"",")",";","\n","boolean","deleted",";","\n","try","{","\n","try","(","FileOutputStream","os","=","new","FileOutputStream","(","tmplFile",")",")","{","\n","_wb",".","write","(","os",")",";","\n","}","\n\n","//Substitute","the","template","entries","with","the","generated","sheet","data","files\n","try","(","ZipSecureFile","zf","=","new","ZipSecureFile","(","tmplFile",")",";","\n","ZipFileZipEntrySource","source","=","new","ZipFileZipEntrySource","(","zf",")",")","{","\n","injectData","(","source,","stream",")",";","\n","}","\n","}","finally","{","\n","deleted","=","tmplFile",".","delete","(",")",";","\n","}","\n","if","(","!deleted",")","{","\n","throw","new","IOException","(","\"Could","not","delete","temporary","file","after","processing:","\"","+","tmplFile",")",";","\n","}","\n"],"docstring_tokens":["Write","out","this","workbook","to","an","OutputStream"]}
{"code_tokens":["\n","private","CellFormatResult","apply","(","Date","date,","double","numericValue",")","{","\n","return","getApplicableFormatPart","(","numericValue",")",".","apply","(","date",")",";","\n"],"docstring_tokens":["Returns","the","result","of","applying","the","format","to","the","given","date"]}
{"code_tokens":["\n","@Override\n","public","boolean","equals","(","Object","obj",")","{","\n","if","(","this","==","obj",")","\n","return","true",";","\n","if","(","obj","instanceof","CellFormat",")","{","\n","CellFormat","that","=","(","CellFormat",")","obj",";","\n","return","format",".","equals","(","that",".","format",")",";","\n","}","\n","return","false",";","\n"],"docstring_tokens":["Returns","true","if","the","other","object","is","a","CellFormat","object","with","the","same","format"]}
{"code_tokens":["\n","@Override\n","public","int","hashCode","(",")","{","\n","return","format",".","hashCode","(",")",";","\n"],"docstring_tokens":["Returns","a","hash","code","for","the","format"]}
{"code_tokens":["\n","@Override\n","public","List<IBodyElement>","getBodyElements","(",")","{","\n","return","Collections",".","unmodifiableList","(","bodyElements",")",";","\n"],"docstring_tokens":["returns","an","Iterator","with","paragraphs","and","tables"]}
{"code_tokens":["\n","public","XWPFParagraph","addParagraph","(",")","{","\n","XWPFParagraph","p","=","new","XWPFParagraph","(","ctTc",".","addNewP","(",")",",","this",")",";","\n","addParagraph","(","p",")",";","\n","return","p",";","\n"],"docstring_tokens":["Add","a","Paragraph","to","this","Table","Cell"]}
{"code_tokens":["\n","public","XWPFVertAlign","getVerticalAlignment","(",")","{","\n","XWPFVertAlign","vAlign","=","null",";","\n","CTTcPr","tcpr","=","ctTc",".","getTcPr","(",")",";","\n","if","(","tcpr","!=","null",")","{","\n","CTVerticalJc","va","=","tcpr",".","getVAlign","(",")",";","\n","if","(","va","!=","null",")","{","\n","vAlign","=","stVertAlignTypeMap",".","get","(","va",".","getVal","(",")",".","intValue","(",")",")",";","\n","}","\n","}","\n","return","vAlign",";","\n"],"docstring_tokens":["Get","the","vertical","alignment","of","the","cell"]}
{"code_tokens":["\n","public","void","setVerticalAlignment","(","XWPFVertAlign","vAlign",")","{","\n","CTTcPr","tcpr","=","getTcPr","(",")",";","\n","CTVerticalJc","va","=","tcpr",".","addNewVAlign","(",")",";","\n","va",".","setVal","(","alignMap",".","get","(","vAlign",")",")",";","\n"],"docstring_tokens":["Set","the","vertical","alignment","of","the","cell"]}
{"code_tokens":["\n","@Override\n","public","void","insertTable","(","int","pos,","XWPFTable","table",")","{","\n","bodyElements",".","add","(","pos,","table",")",";","\n","int","i","=","0",";","\n","for","(","CTTbl","tbl",":","ctTc",".","getTblList","(",")",")","{","\n","if","(","tbl","==","table",".","getCTTbl","(",")",")","{","\n","break",";","\n","}","\n","i++",";","\n","}","\n","tables",".","add","(","i,","table",")",";","\n"],"docstring_tokens":["inserts","an","existing","XWPFTable","to","the","arrays","bodyElements","and","tables"]}
{"code_tokens":["\n","public","void","removeTable","(","int","pos",")","{","\n","XWPFTable","removedTable","=","tables",".","get","(","pos",")",";","\n","tables",".","remove","(","pos",")",";","\n","ctTc",".","removeTbl","(","pos",")",";","\n","bodyElements",".","remove","(","removedTable",")",";","\n"],"docstring_tokens":["removes","a","table","of","this","table","cell"]}
{"code_tokens":["\n","public","String","getTextRecursively","(",")","{","\n\n","StringBuilder","text","=","new","StringBuilder","(","64",")",";","\n","for","(","int","i","=","0",";","i","<","bodyElements",".","size","(",")",";","i++",")","{","\n","boolean","isLast","=","(","i","==","bodyElements",".","size","(",")","-","1",")",";","\n","appendBodyElementText","(","text,","bodyElements",".","get","(","i",")",",","isLast",")",";","\n","}","\n\n","return","text",".","toString","(",")",";","\n"],"docstring_tokens":["extracts","all","text","recursively","through","embedded","tables","and","embedded","SDTs"]}
{"code_tokens":["\n","public","String","getEntryName","(",")","{","\n","String","type","=","this",".","type",".","asFileEnding","(",")",";","\n\n","String","chunkId","=","Integer",".","toHexString","(","this",".","chunkId",")",";","\n","while","(","chunkId",".","length","(",")","<","4",")","{","\n","chunkId","=","\"0\"","+","chunkId",";","\n","}","\n\n","return","this",".","namePrefix\n","+","chunkId",".","toUpperCase","(","Locale",".","ROOT",")","\n","+","type",".","toUpperCase","(","Locale",".","ROOT",")",";","\n"],"docstring_tokens":["Creates","a","string","to","use","to","identify","this","chunk","in","the","POI","file","system","object"]}
{"code_tokens":["\n","public","short","getX","(",")","\n","{","\n","return","field_1_x",";","\n"],"docstring_tokens":["Get","the","x","field","for","the","Pane","record"]}
{"code_tokens":["\n","public","void","setX","(","short","field_1_x",")","\n","{","\n","this",".","field_1_x","=","field_1_x",";","\n"],"docstring_tokens":["Set","the","x","field","for","the","Pane","record"]}
{"code_tokens":["\n","public","short","getY","(",")","\n","{","\n","return","field_2_y",";","\n"],"docstring_tokens":["Get","the","y","field","for","the","Pane","record"]}
{"code_tokens":["\n","public","void","setY","(","short","field_2_y",")","\n","{","\n","this",".","field_2_y","=","field_2_y",";","\n"],"docstring_tokens":["Set","the","y","field","for","the","Pane","record"]}
{"code_tokens":["\n","public","short","getTopRow","(",")","\n","{","\n","return","field_3_topRow",";","\n"],"docstring_tokens":["Get","the","top","row","field","for","the","Pane","record"]}
{"code_tokens":["\n","public","void","setTopRow","(","short","field_3_topRow",")","\n","{","\n","this",".","field_3_topRow","=","field_3_topRow",";","\n"],"docstring_tokens":["Set","the","top","row","field","for","the","Pane","record"]}
{"code_tokens":["\n","public","short","getLeftColumn","(",")","\n","{","\n","return","field_4_leftColumn",";","\n"],"docstring_tokens":["Get","the","left","column","field","for","the","Pane","record"]}
{"code_tokens":["\n","public","void","setLeftColumn","(","short","field_4_leftColumn",")","\n","{","\n","this",".","field_4_leftColumn","=","field_4_leftColumn",";","\n"],"docstring_tokens":["Set","the","left","column","field","for","the","Pane","record"]}
{"code_tokens":["\n","public","short","getActivePane","(",")","\n","{","\n","return","field_5_activePane",";","\n"],"docstring_tokens":["Get","the","active","pane","field","for","the","Pane","record"]}
{"code_tokens":["\n","public","void","setActivePane","(","short","field_5_activePane",")","\n","{","\n","this",".","field_5_activePane","=","field_5_activePane",";","\n"],"docstring_tokens":["Set","the","active","pane","field","for","the","Pane","record"]}
{"code_tokens":["\n","private","boolean","isRelationshipPartURI","(","URI","partUri",")","{","\n","if","(","partUri","==","null",")","{","\n","throw","new","IllegalArgumentException","(","\"partUri\"",")",";","\n","}","\n\n","return","partUri",".","getPath","(",")",".","matches","(","\n","\"^",".","*/\"","+","PackagingURIHelper",".","RELATIONSHIP_PART_SEGMENT_NAME","+","\"/",".","*\\\\\"\n","+","PackagingURIHelper",".","RELATIONSHIP_PART_EXTENSION_NAME\n","+","\"$\"",")",";","\n"],"docstring_tokens":["Check","if","the","specified","part","name","is","a","relationship","part","name"]}
{"code_tokens":["\n","public","boolean","isRelationshipPartURI","(",")","{","\n","return","this",".","isRelationship",";","\n"],"docstring_tokens":["Know","if","this","part","name","is","a","relationship","part","name"]}
{"code_tokens":["\n","public","static","byte[]","getChecksum","(","byte[]","data",")","{","\n","MessageDigest","md5","=","CryptoFunctions",".","getMessageDigest","(","HashAlgorithm",".","md5",")",";","\n","md5",".","update","(","data",")",";","\n","return","md5",".","digest","(",")",";","\n"],"docstring_tokens":["Compute","16-byte","checksum","of","this","picture","using","MD5","algorithm"]}
{"code_tokens":["\n","public","void","write","(","OutputStream","out",")","throws","IOException","{","\n","LittleEndian",".","putUShort","(","getSignature","(",")",",","out",")",";","\n\n","PictureType","pt","=","getType","(",")",";","\n","LittleEndian",".","putUShort","(","pt",".","nativeId","+","EscherRecordTypes",".","BLIP_START",".","typeID,","out",")",";","\n\n","byte[]","rd","=","getRawData","(",")",";","\n","LittleEndian",".","putInt","(","rd",".","length,","out",")",";","\n","out",".","write","(","rd",")",";","\n"],"docstring_tokens":["Write","this","picture","into","OutputStream"]}
{"code_tokens":["\n","@Deprecated\n","@Removal","(","version","=","\"5",".","3\"",")","\n","public","static","HSLFPictureData","create","(","PictureType","type",")","{","\n","LOGGER",".","atWarn","(",")",".","log","(","\"HSLFPictureData#create","(","PictureType",")","is","deprecated",".","Some","functionality","such","\"","+\n","\"as","updating","pictures","won't","work",".","\"",")",";","\n\n","//","This","record","code","is","a","stub",".","It","exists","only","for","API","compatibility",".","\n","EscherContainerRecord","record","=","new","EscherContainerRecord","(",")",";","\n","EscherBSERecord","bse","=","new","EscherBSERecord","(",")",";","\n","return","new","HSLFSlideShowImpl",".","PictureFactory","(","record,","type,","new","byte[0],","0,","0",")","\n",".","setRecord","(","bse",")","\n",".","build","(",")",";","\n"],"docstring_tokens":["Create","an","instance","of","HSLFPictureData","by","type"]}
{"code_tokens":["\n","public","void","setSignature","(","int","signature",")","{","\n","switch","(","signature",")","{","\n","case","0x7A80:\n","setUIDInstanceCount","(","1",")",";","\n","break",";","\n","case","0x7A90:\n","setUIDInstanceCount","(","2",")",";","\n","break",";","\n","default:\n","throw","new","IllegalArgumentException","(","signature+\"","is","not","a","valid","instance/signature","value","for","DIB\"",")",";","\n","}","\n"],"docstring_tokens":["Sets","the","DIB","signature","-","either","0x7A80","or","0x7A90"]}
{"code_tokens":["\n","public","byte[]","getRemainingData","(",")","\n","{","\n","return","remainingData",";","\n"],"docstring_tokens":["Any","remaining","data","in","the","record"]}
{"code_tokens":["\n","protected","PackageRelationship","addPictureReference","(","int","pictureIndex",")","{","\n","XSSFPictureData","data","=","getSheet","(",")",".","getWorkbook","(",")",".","getAllPictures","(",")",".","get","(","pictureIndex",")",";","\n","XSSFPictureData","pic","=","new","XSSFPictureData","(","data",".","getPackagePart","(",")",")",";","\n","RelationPart","rp","=","addRelation","(","null,","XSSFRelation",".","IMAGES,","pic",")",";","\n","return","rp",".","getRelationship","(",")",";","\n"],"docstring_tokens":["Add","the","indexed","picture","to","this","drawing","relations"]}
{"code_tokens":["\n","public","XSSFShapeGroup","createGroup","(","XSSFClientAnchor","anchor",")","{","\n","CTTwoCellAnchor","ctAnchor","=","createTwoCellAnchor","(","anchor",")",";","\n","CTGroupShape","ctGroup","=","ctAnchor",".","addNewGrpSp","(",")",";","\n","ctGroup",".","set","(","XSSFShapeGroup",".","prototype","(",")",")",";","\n","CTTransform2D","xfrm","=","createXfrm","(","anchor",")",";","\n","CTGroupTransform2D","grpXfrm","=","ctGroup",".","getGrpSpPr","(",")",".","getXfrm","(",")",";","\n","grpXfrm",".","setOff","(","xfrm",".","getOff","(",")",")",";","\n","grpXfrm",".","setExt","(","xfrm",".","getExt","(",")",")",";","\n","grpXfrm",".","setChExt","(","xfrm",".","getExt","(",")",")",";","\n\n","XSSFShapeGroup","shape","=","new","XSSFShapeGroup","(","this,","ctGroup",")",";","\n","shape",".","anchor","=","anchor",";","\n","return","shape",";","\n"],"docstring_tokens":["Creates","a","simple","shape"]}
{"code_tokens":["\n","private","CTTwoCellAnchor","createTwoCellAnchor","(","XSSFClientAnchor","anchor",")","{","\n","CTTwoCellAnchor","ctAnchor","=","drawing",".","addNewTwoCellAnchor","(",")",";","\n","ctAnchor",".","setFrom","(","anchor",".","getFrom","(",")",")",";","\n","ctAnchor",".","setTo","(","anchor",".","getTo","(",")",")",";","\n","ctAnchor",".","addNewClientData","(",")",";","\n","anchor",".","setTo","(","ctAnchor",".","getTo","(",")",")",";","\n","anchor",".","setFrom","(","ctAnchor",".","getFrom","(",")",")",";","\n","STEditAs",".","Enum","editAs",";","\n","switch","(","anchor",".","getAnchorType","(",")",")","{","\n","case","DONT_MOVE_AND_RESIZE:\n","editAs","=","STEditAs",".","ABSOLUTE",";","\n","break",";","\n","case","MOVE_AND_RESIZE:\n","editAs","=","STEditAs",".","TWO_CELL",";","\n","break",";","\n","case","MOVE_DONT_RESIZE:\n","editAs","=","STEditAs",".","ONE_CELL",";","\n","break",";","\n","default:\n","editAs","=","STEditAs",".","ONE_CELL",";","\n","}","\n","ctAnchor",".","setEditAs","(","editAs",")",";","\n","return","ctAnchor",";","\n"],"docstring_tokens":["Create","and","initialize","a","CTTwoCellAnchor","that","anchors","a","shape","against","top-left","and","bottom-right","cells"]}
{"code_tokens":["\n","public","void","markAsClaimed","(","Picture","picture",")","{","\n","claimed",".","add","(","picture",")",";","\n"],"docstring_tokens":["Mark","a","Picture","as","claimed"]}
{"code_tokens":["\n","protected","void","setIndex","(","int","index",")","{","\n","if","(","_headerAtom","!=","null",")","{","\n","_headerAtom",".","setIndex","(","index",")",";","\n","}","\n"],"docstring_tokens":["Sets","the","index","of","the","paragraph","in","the","SLWT","container"]}
{"code_tokens":["\n","public","boolean","isBullet","(",")","{","\n","return","getFlag","(","ParagraphFlagsTextProp",".","BULLET_IDX",")",";","\n"],"docstring_tokens":["Returns","whether","this","rich","text","run","has","bullets"]}
{"code_tokens":["\n","protected","static","void","fixLineEndings","(","List<HSLFTextParagraph>","paragraphs",")","{","\n","HSLFTextRun","lastRun","=","null",";","\n","for","(","HSLFTextParagraph","p",":","paragraphs",")","{","\n","if","(","lastRun","!=","null","&&","!lastRun",".","getRawText","(",")",".","endsWith","(","\"\\r\"",")",")","{","\n","lastRun",".","setText","(","lastRun",".","getRawText","(",")","+","\"\\r\"",")",";","\n","}","\n","List<HSLFTextRun>","ltr","=","p",".","getTextRuns","(",")",";","\n","if","(","ltr",".","isEmpty","(",")",")","{","\n","throw","new","HSLFException","(","\"paragraph","without","textruns","found\"",")",";","\n","}","\n","lastRun","=","ltr",".","get","(","ltr",".","size","(",")","-","1",")",";","\n","assert","(","lastRun",".","getRawText","(",")","!=","null",")",";","\n","}","\n"],"docstring_tokens":["Check","and","add","linebreaks","to","text","runs","leading","other","paragraphs"]}
{"code_tokens":["\n","private","static","void","updateTextAtom","(","List<HSLFTextParagraph>","paragraphs",")","{","\n","final","String","rawText","=","toInternalString","(","getRawText","(","paragraphs",")",")",";","\n\n","//","Will","it","fit","in","a","8","bit","atom?\n","boolean","isUnicode","=","StringUtil",".","hasMultibyte","(","rawText",")",";","\n","//","isUnicode","=","true",";","\n\n","TextHeaderAtom","headerAtom","=","paragraphs",".","get","(","0",")",".","_headerAtom",";","\n","TextBytesAtom","byteAtom","=","paragraphs",".","get","(","0",")",".","_byteAtom",";","\n","TextCharsAtom","charAtom","=","paragraphs",".","get","(","0",")",".","_charAtom",";","\n","StyleTextPropAtom","styleAtom","=","findStyleAtomPresent","(","headerAtom,","rawText",".","length","(",")",")",";","\n\n","//","Store","in","the","appropriate","record\n","Record","oldRecord","=","null,","newRecord",";","\n","if","(","isUnicode",")","{","\n","if","(","byteAtom","!=","null","||","charAtom","==","null",")","{","\n","oldRecord","=","byteAtom",";","\n","charAtom","=","new","TextCharsAtom","(",")",";","\n","}","\n","newRecord","=","charAtom",";","\n","charAtom",".","setText","(","rawText",")",";","\n","}","else","{","\n","if","(","charAtom","!=","null","||","byteAtom","==","null",")","{","\n","oldRecord","=","charAtom",";","\n","byteAtom","=","new","TextBytesAtom","(",")",";","\n","}","\n","newRecord","=","byteAtom",";","\n","byte[]","byteText","=","new","byte[rawText",".","length","(",")","]",";","\n","StringUtil",".","putCompressedUnicode","(","rawText,","byteText,","0",")",";","\n","byteAtom",".","setText","(","byteText",")",";","\n","}","\n\n","RecordContainer","_txtbox","=","headerAtom",".","getParentRecord","(",")",";","\n","Record[]","cr","=","_txtbox",".","getChildRecords","(",")",";","\n","int","/*","headerIdx","=","-1,","*/","textIdx","=","-1,","styleIdx","=","-1",";","\n","for","(","int","i","=","0",";","i","<","cr",".","length",";","i++",")","{","\n","Record","r","=","cr[i]",";","\n","if","(","r","==","headerAtom",")","{","\n","//","headerIdx","=","i",";","\n","}","else","if","(","r","==","oldRecord","||","r","==","newRecord",")","{","\n","textIdx","=","i",";","\n","}","else","if","(","r","==","styleAtom",")","{","\n","styleIdx","=","i",";","\n","}","\n","}","\n\n","if","(","textIdx","==","-1",")","{","\n","//","the","old","record","was","never","registered,","ignore","it\n","_txtbox",".","addChildAfter","(","newRecord,","headerAtom",")",";","\n","//","textIdx","=","headerIdx","+","1",";","\n","}","else","{","\n","//","swap","not","appropriated","records","-","noop","if","unchanged\n","cr[textIdx]","=","newRecord",";","\n","}","\n\n","if","(","styleIdx","==","-1",")","{","\n","//","Add","the","new","StyleTextPropAtom","after","the","TextCharsAtom","/","TextBytesAtom\n","_txtbox",".","addChildAfter","(","styleAtom,","newRecord",")",";","\n","}","\n\n","for","(","HSLFTextParagraph","p",":","paragraphs",")","{","\n","if","(","newRecord","==","byteAtom",")","{","\n","p",".","_byteAtom","=","byteAtom",";","\n","p",".","_charAtom","=","null",";","\n","}","else","{","\n","p",".","_byteAtom","=","null",";","\n","p",".","_charAtom","=","charAtom",";","\n","}","\n","}","\n\n"],"docstring_tokens":["Set","the","correct","text","atom","depending","on","the","multibyte","usage"]}
{"code_tokens":["\n","private","static","void","updateStyles","(","List<HSLFTextParagraph>","paragraphs",")","{","\n","final","String","rawText","=","toInternalString","(","getRawText","(","paragraphs",")",")",";","\n","TextHeaderAtom","headerAtom","=","paragraphs",".","get","(","0",")",".","_headerAtom",";","\n","StyleTextPropAtom","styleAtom","=","findStyleAtomPresent","(","headerAtom,","rawText",".","length","(",")",")",";","\n\n","//","Update","the","text","length","for","its","Paragraph","and","Character","stylings\n","//","*","reset","the","length,","to","the","new","string's","length\n","//","*","add","on","+1","if","the","last","block\n\n","styleAtom",".","clearStyles","(",")",";","\n\n","TextPropCollection","lastPTPC","=","null,","lastRTPC","=","null,","ptpc","=","null,","rtpc","=","null",";","\n","for","(","HSLFTextParagraph","para",":","paragraphs",")","{","\n","ptpc","=","para",".","getParagraphStyle","(",")",";","\n","ptpc",".","updateTextSize","(","0",")",";","\n","if","(","!ptpc",".","equals","(","lastPTPC",")",")","{","\n","lastPTPC","=","ptpc",".","copy","(",")",";","\n","lastPTPC",".","updateTextSize","(","0",")",";","\n","styleAtom",".","addParagraphTextPropCollection","(","lastPTPC",")",";","\n","}","\n","for","(","HSLFTextRun","tr",":","para",".","getTextRuns","(",")",")","{","\n","rtpc","=","tr",".","getCharacterStyle","(",")",";","\n","rtpc",".","updateTextSize","(","0",")",";","\n","if","(","!rtpc",".","equals","(","lastRTPC",")",")","{","\n","lastRTPC","=","rtpc",".","copy","(",")",";","\n","lastRTPC",".","updateTextSize","(","0",")",";","\n","styleAtom",".","addCharacterTextPropCollection","(","lastRTPC",")",";","\n","}","\n","int","len","=","tr",".","getLength","(",")",";","\n","ptpc",".","updateTextSize","(","ptpc",".","getCharactersCovered","(",")","+","len",")",";","\n","rtpc",".","updateTextSize","(","len",")",";","\n","lastPTPC",".","updateTextSize","(","lastPTPC",".","getCharactersCovered","(",")","+","len",")",";","\n","lastRTPC",".","updateTextSize","(","lastRTPC",".","getCharactersCovered","(",")","+","len",")",";","\n","}","\n","}","\n\n","if","(","lastPTPC","==","null","||","lastRTPC","==","null","||","ptpc","==","null","||","rtpc","==","null",")","{","//","NOSONAR\n","throw","new","HSLFException","(","\"Not","all","TextPropCollection","could","be","determined",".","\"",")",";","\n","}","\n\n","ptpc",".","updateTextSize","(","ptpc",".","getCharactersCovered","(",")","+","1",")",";","\n","rtpc",".","updateTextSize","(","rtpc",".","getCharactersCovered","(",")","+","1",")",";","\n","lastPTPC",".","updateTextSize","(","lastPTPC",".","getCharactersCovered","(",")","+","1",")",";","\n","lastRTPC",".","updateTextSize","(","lastRTPC",".","getCharactersCovered","(",")","+","1",")",";","\n\n","//","If","TextSpecInfoAtom","is","present,","we","must","update","the","text","size","in","it,\n","//","otherwise","the","ppt","will","be","corrupted\n","for","(","Record","r",":","paragraphs",".","get","(","0",")",".","getRecords","(",")",")","{","\n","if","(","r","instanceof","TextSpecInfoAtom",")","{","\n","(","(","TextSpecInfoAtom",")","r",")",".","setParentSize","(","rawText",".","length","(",")","+","1",")",";","\n","break",";","\n","}","\n","}","\n"],"docstring_tokens":["Update","paragraph","and","character","styles","-","merges","them","when","subsequential","styles","match"]}
{"code_tokens":["\n","private","static","void","refreshRecords","(","List<HSLFTextParagraph>","paragraphs",")","{","\n","TextHeaderAtom","headerAtom","=","paragraphs",".","get","(","0",")",".","_headerAtom",";","\n","RecordContainer","_txtbox","=","headerAtom",".","getParentRecord","(",")",";","\n","if","(","_txtbox","instanceof","EscherTextboxWrapper",")","{","\n","try","{","\n","_txtbox",".","writeOut","(","null",")",";","\n","}","catch","(","IOException","e",")","{","\n","throw","new","HSLFException","(","\"failed","dummy","write\",","e",")",";","\n","}","\n","}","\n"],"docstring_tokens":["Writes","the","textbox","records","back","to","the","document","record"]}
{"code_tokens":["\n","protected","static","HSLFTextRun","appendText","(","List<HSLFTextParagraph>","paragraphs,","String","text,","boolean","newParagraph",")","{","\n","text","=","toInternalString","(","text",")",";","\n\n","//","check","paragraphs\n","assert","(","!paragraphs",".","isEmpty","(",")","&&","!paragraphs",".","get","(","0",")",".","getTextRuns","(",")",".","isEmpty","(",")",")",";","\n\n","HSLFTextParagraph","htp","=","paragraphs",".","get","(","paragraphs",".","size","(",")","-","1",")",";","\n","HSLFTextRun","htr","=","htp",".","getTextRuns","(",")",".","get","(","htp",".","getTextRuns","(",")",".","size","(",")","-","1",")",";","\n\n","boolean","addParagraph","=","newParagraph",";","\n","for","(","String","rawText",":","text",".","split","(","\"","(","?<=\\r",")","\"",")",")","{","\n","//","special","case,","if","last","text","paragraph","or","run","is","empty,","we","will","reuse","it\n","boolean","lastRunEmpty","=","(","htr",".","getLength","(",")","==","0",")",";","\n","boolean","lastParaEmpty","=","lastRunEmpty","&&","(","htp",".","getTextRuns","(",")",".","size","(",")","==","1",")",";","\n\n","if","(","addParagraph","&&","!lastParaEmpty",")","{","\n","TextPropCollection","tpc","=","htp",".","getParagraphStyle","(",")",";","\n","HSLFTextParagraph","prevHtp","=","htp",";","\n","htp","=","new","HSLFTextParagraph","(","htp",".","_headerAtom,","htp",".","_byteAtom,","htp",".","_charAtom,","paragraphs",")",";","\n","htp",".","setParagraphStyle","(","tpc",".","copy","(",")",")",";","\n","htp",".","setParentShape","(","prevHtp",".","getParentShape","(",")",")",";","\n","htp",".","setShapeId","(","prevHtp",".","getShapeId","(",")",")",";","\n","htp",".","supplySheet","(","prevHtp",".","getSheet","(",")",")",";","\n","paragraphs",".","add","(","htp",")",";","\n","}","\n","addParagraph","=","true",";","\n\n","if","(","!lastRunEmpty",")","{","\n","TextPropCollection","tpc","=","htr",".","getCharacterStyle","(",")",";","\n","htr","=","new","HSLFTextRun","(","htp",")",";","\n","htr",".","setCharacterStyle","(","tpc",".","copy","(",")",")",";","\n","htp",".","addTextRun","(","htr",")",";","\n","}","\n","htr",".","setText","(","rawText",")",";","\n","}","\n\n","storeText","(","paragraphs",")",";","\n\n","return","htr",";","\n"],"docstring_tokens":["Adds","the","supplied","text","onto","the","end","of","the","TextParagraphs,","creating","a","new","RichTextRun","for","it","to","sit","in"]}
{"code_tokens":["\n","public","void","read","(","final","POIFSFileSystem","poifs",")","throws","IOException","{","\n","registryClosed","=","true",";","\n\n","//","get","property","table","from","the","document\n","PropertyTable","properties","=","poifs",".","getPropertyTable","(",")",";","\n\n","//","process","documents\n","RootProperty","root","=","properties",".","getRoot","(",")",";","\n","processProperties","(","poifs,","root,","new","POIFSDocumentPath","(",")",")",";","\n"],"docstring_tokens":["Read","from","a","POIFSFileSystem","and","process","the","documents","we","get"]}
{"code_tokens":["\n","public","static","void","setPassword","(","XmlObject","xobj,","String","password,","HashAlgorithm","hashAlgo,","String","prefix",")","{","\n","XmlCursor","cur","=","xobj",".","newCursor","(",")",";","\n","try","{","\n","if","(","password","==","null",")","{","\n","cur",".","removeAttribute","(","getAttrName","(","prefix,","\"password\"",")",")",";","\n","cur",".","removeAttribute","(","getAttrName","(","prefix,","\"algorithmName\"",")",")",";","\n","cur",".","removeAttribute","(","getAttrName","(","prefix,","\"hashValue\"",")",")",";","\n","cur",".","removeAttribute","(","getAttrName","(","prefix,","\"saltValue\"",")",")",";","\n","cur",".","removeAttribute","(","getAttrName","(","prefix,","\"spinCount\"",")",")",";","\n","return",";","\n","}","\n\n","cur",".","toFirstContentToken","(",")",";","\n","if","(","hashAlgo","==","null",")","{","\n","int","hash","=","CryptoFunctions",".","createXorVerifier1","(","password",")",";","\n","cur",".","insertAttributeWithValue","(","getAttrName","(","prefix,","\"password\"",")",",\n","String",".","format","(","Locale",".","ROOT,","\"%04X\",","hash",")",".","toUpperCase","(","Locale",".","ROOT",")",")",";","\n","}","else","{","\n","byte[]","salt","=","RandomSingleton",".","getInstance","(",")",".","generateSeed","(","16",")",";","\n\n","//","Iterations","specifies","the","number","of","times","the","hashing","function","shall","be","iteratively","run","(","using","each\n","//","iteration's","result","as","the","input","for","the","next","iteration",")",".","\n","int","spinCount","=","100000",";","\n\n","//","Implementation","Notes","List:\n","//","-->","In","this","third","stage,","the","reversed","byte","order","legacy","hash","from","the","second","stage","shall\n","//","be","converted","to","Unicode","hex","string","representation\n","byte[]","hash","=","CryptoFunctions",".","hashPassword","(","password,","hashAlgo,","salt,","spinCount,","false",")",";","\n\n","Base64",".","Encoder","enc64","=","Base64",".","getEncoder","(",")",";","\n\n","cur",".","insertAttributeWithValue","(","getAttrName","(","prefix,","\"algorithmName\"",")",",","hashAlgo",".","jceId",")",";","\n","cur",".","insertAttributeWithValue","(","getAttrName","(","prefix,","\"hashValue\"",")",",","enc64",".","encodeToString","(","hash",")",")",";","\n","cur",".","insertAttributeWithValue","(","getAttrName","(","prefix,","\"saltValue\"",")",",","enc64",".","encodeToString","(","salt",")",")",";","\n","cur",".","insertAttributeWithValue","(","getAttrName","(","prefix,","\"spinCount\"",")",",","\"\"+spinCount",")",";","\n","}","\n","}","finally","{","\n","cur",".","dispose","(",")",";","\n","}","\n"],"docstring_tokens":["Sets","the","XORed","or","hashed","password"]}
{"code_tokens":["\n","public","HSLFFontInfo","getFontInfo","(","int","index",")","{","\n","for","(","HSLFFontInfo","fi",":","fonts",".","values","(",")",")","{","\n","if","(","fi",".","getIndex","(",")","==","index",")","{","\n","return","fi",";","\n","}","\n","}","\n","return","null",";","\n"],"docstring_tokens":["Lookup","a","FontInfo","object","by","its","internal","font","index"]}
{"code_tokens":["\n","public","static","double","getColumnWidth","(","Sheet","sheet,","int","column,","boolean","useMergedCells,","int","firstRow,","int","lastRow",")","{","\n","DataFormatter","formatter","=","new","DataFormatter","(",")",";","\n","int","defaultCharWidth","=","getDefaultCharWidth","(","sheet",".","getWorkbook","(",")",")",";","\n\n","List<CellRangeAddress>","mergedRegions","=","sheet",".","getMergedRegions","(",")",";","\n","double","width","=","-1",";","\n","for","(","int","rowIdx","=","firstRow",";","rowIdx","<=","lastRow",";","++rowIdx",")","{","\n","Row","row","=","sheet",".","getRow","(","rowIdx",")",";","\n","if","(","row","!=","null",")","{","\n","double","cellWidth","=","getColumnWidthForRow","(","row,","column,","defaultCharWidth,","formatter,","useMergedCells,","mergedRegions",")",";","\n","width","=","Math",".","max","(","width,","cellWidth",")",";","\n","}","\n","}","\n","return","width",";","\n"],"docstring_tokens":["Compute","width","of","a","column","based","on","a","subset","of","the","rows","and","return","the","result"]}
{"code_tokens":["\n","private","static","void","copyAttributes","(","Font","font,","AttributedString","str,","@SuppressWarnings","(","\"SameParameterValue\"",")","int","startIdx,","int","endIdx",")","{","\n","str",".","addAttribute","(","TextAttribute",".","FAMILY,","font",".","getFontName","(",")",",","startIdx,","endIdx",")",";","\n","str",".","addAttribute","(","TextAttribute",".","SIZE,","(","float",")","font",".","getFontHeightInPoints","(",")",")",";","\n","if","(","font",".","getBold","(",")",")","str",".","addAttribute","(","TextAttribute",".","WEIGHT,","TextAttribute",".","WEIGHT_BOLD,","startIdx,","endIdx",")",";","\n","if","(","font",".","getItalic","(",")",")","str",".","addAttribute","(","TextAttribute",".","POSTURE,","TextAttribute",".","POSTURE_OBLIQUE,","startIdx,","endIdx",")",";","\n","if","(","font",".","getUnderline","(",")","==","Font",".","U_SINGLE",")","str",".","addAttribute","(","TextAttribute",".","UNDERLINE,","TextAttribute",".","UNDERLINE_ON,","startIdx,","endIdx",")",";","\n"],"docstring_tokens":["Copy","text","attributes","from","the","supplied","Font","to","Java2D","AttributedString"]}
{"code_tokens":["\n","public","boolean","isFResultDirty","(",")","\n","{","\n","return","fResultDirty",".","isSet","(","field_2_flt",")",";","\n\n"],"docstring_tokens":["==1","when","user","has","edited","or","formatted","the","result"]}
{"code_tokens":["\n","public","boolean","isFResultEdited","(",")","\n","{","\n","return","fResultEdited",".","isSet","(","field_2_flt",")",";","\n\n"],"docstring_tokens":["==1","when","user","has","inserted","text","into","or","deleted","text","from","the","result"]}
{"code_tokens":["\n","@Override\n","public","void","applyTransform","(","Graphics2D","graphics",")","{","\n","if","(","!","(","shape","instanceof","PlaceableShape",")","||","graphics","==","null",")","{","\n","return",";","\n","}","\n\n","final","Rectangle2D","anchor","=","getAnchor","(","graphics,","(","PlaceableShape<?,?>",")","shape",")",";","\n","if","(","anchor","==","null",")","{","\n","return",";","\n","}","\n\n","if","(","isHSLF","(","shape",")",")","{","\n","flipHorizontal","(","graphics,","anchor",")",";","\n","flipVertical","(","graphics,","anchor",")",";","\n","rotate","(","graphics,","anchor",")",";","\n","}","else","{","\n","rotate","(","graphics,","anchor",")",";","\n","flipHorizontal","(","graphics,","anchor",")",";","\n","flipVertical","(","graphics,","anchor",")",";","\n","}","\n"],"docstring_tokens":["Apply","2-D","transforms","before","drawing","this","shape"]}
{"code_tokens":["\n","@Internal\n","public","int","getInfo3","(",")","\n","{","\n","return","field_3_info3",";","\n"],"docstring_tokens":["Get","the","info3","field","for","the","Stshif","record"]}
{"code_tokens":["\n","@Internal\n","public","void","setInfo3","(","int","field_3_info3",")","\n","{","\n","this",".","field_3_info3","=","field_3_info3",";","\n"],"docstring_tokens":["Set","the","info3","field","for","the","Stshif","record"]}
{"code_tokens":["\n","@Internal\n","public","short","getFReserved","(",")","\n","{","\n","return","(","short",")","fReserved",".","getValue","(","field_3_info3",")",";","\n"],"docstring_tokens":["This","value","MUST","be","zero","and","MUST","be","ignored"]}
{"code_tokens":["\n","/*package*/","int","getCellIndex","(","SXSSFCell","cell",")","\n","{","\n","for","(","Entry<Integer,","SXSSFCell>","entry",":","_cells",".","entrySet","(",")",")","{","\n","if","(","entry",".","getValue","(",")","==cell",")","{","\n","return","entry",".","getKey","(",")",";","\n","}","\n","}","\n","return","-1",";","\n"],"docstring_tokens":["Return","the","column","number","of","a","cell","if","it","is","in","this","row","Otherwise","return","-1"]}
{"code_tokens":["\n","@Override\n","public","SXSSFSheet","getSheet","(",")","\n","{","\n","return","_sheet",";","\n"],"docstring_tokens":["Returns","the","Sheet","this","row","belongs","to"]}
{"code_tokens":["\n","@Override\n","protected","EscherContainerRecord","createSpContainer","(","boolean","isChild",")","{","\n","EscherContainerRecord","ecr","=","super",".","createSpContainer","(","isChild",")",";","\n","ecr",".","setRecordId","(","EscherContainerRecord",".","SPGR_CONTAINER",")",";","\n\n","//The","group","itself","is","a","shape,","and","always","appears","as","the","first","EscherSpContainer","in","the","group","container",".","\n","EscherContainerRecord","spcont","=","new","EscherContainerRecord","(",")",";","\n","spcont",".","setRecordId","(","EscherContainerRecord",".","SP_CONTAINER",")",";","\n","spcont",".","setOptions","(","(","short",")","15",")",";","\n\n","EscherSpgrRecord","spg","=","new","EscherSpgrRecord","(",")",";","\n","spg",".","setOptions","(","(","short",")","1",")",";","\n","spcont",".","addChildRecord","(","spg",")",";","\n\n","EscherSpRecord","sp","=","new","EscherSpRecord","(",")",";","\n","short","type","=","(","short",")","(","(","ShapeType",".","NOT_PRIMITIVE",".","nativeId","<<","4",")","+","2",")",";","\n","sp",".","setOptions","(","type",")",";","\n","sp",".","setFlags","(","EscherSpRecord",".","FLAG_HAVEANCHOR","|","EscherSpRecord",".","FLAG_GROUP",")",";","\n","spcont",".","addChildRecord","(","sp",")",";","\n\n","EscherClientAnchorRecord","anchor","=","new","EscherClientAnchorRecord","(",")",";","\n","spcont",".","addChildRecord","(","anchor",")",";","\n\n","ecr",".","addChildRecord","(","spcont",")",";","\n","return","ecr",";","\n"],"docstring_tokens":["Create","a","new","ShapeGroup","and","create","an","instance","of","EscherSpgrContainer","which","represents","a","group","of","shapes"]}
{"code_tokens":["\n","@Override\n","public","void","addShape","(","HSLFShape","shape",")","{","\n","getSpContainer","(",")",".","addChildRecord","(","shape",".","getSpContainer","(",")",")",";","\n\n","HSLFSheet","sheet","=","getSheet","(",")",";","\n","shape",".","setSheet","(","sheet",")",";","\n","shape",".","setShapeId","(","sheet",".","allocateShapeId","(",")",")",";","\n","shape",".","afterInsert","(","sheet",")",";","\n"],"docstring_tokens":["Add","a","shape","to","this","group"]}
{"code_tokens":["\n","protected","void","moveAndScale","(","Rectangle2D","anchorDest",")","{","\n","Rectangle2D","anchorSrc","=","getAnchor","(",")",";","\n","double","scaleX","=","(","anchorSrc",".","getWidth","(",")","==","0",")","?","0",":","anchorDest",".","getWidth","(",")","/","anchorSrc",".","getWidth","(",")",";","\n","double","scaleY","=","(","anchorSrc",".","getHeight","(",")","==","0",")","?","0",":","anchorDest",".","getHeight","(",")","/","anchorSrc",".","getHeight","(",")",";","\n\n","setExteriorAnchor","(","anchorDest",")",";","\n","\n","for","(","HSLFShape","shape",":","getShapes","(",")",")","{","\n","Rectangle2D","chanchor","=","shape",".","getAnchor","(",")",";","\n","double","x","=","anchorDest",".","getX","(",")","+","(","chanchor",".","getX","(",")","-anchorSrc",".","getX","(",")",")","*scaleX",";","\n","double","y","=","anchorDest",".","getY","(",")","+","(","chanchor",".","getY","(",")","-anchorSrc",".","getY","(",")",")","*scaleY",";","\n","double","width","=","chanchor",".","getWidth","(",")","*scaleX",";","\n","double","height","=","chanchor",".","getHeight","(",")","*scaleY",";","\n","shape",".","setAnchor","(","new","Rectangle2D",".","Double","(","x,","y,","width,","height",")",")",";","\n","}","\n"],"docstring_tokens":["Moves","and","scales","this","ShapeGroup","to","the","specified","anchor"]}
{"code_tokens":["\n","@Override\n","protected","void","afterInsert","(","HSLFSheet","sh",")","{","\n","super",".","afterInsert","(","sh",")",";","\n\n","storeText","(",")",";","\n\n","EscherTextboxWrapper","thisTxtbox","=","getEscherTextboxWrapper","(",")",";","\n","if","(","thisTxtbox","!=","null",")","{","\n","getSpContainer","(",")",".","addChildRecord","(","thisTxtbox",".","getEscherRecord","(",")",")",";","\n\n","PPDrawing","ppdrawing","=","sh",".","getPPDrawing","(",")",";","\n","ppdrawing",".","addTextboxWrapper","(","thisTxtbox",")",";","\n","//","Ensure","the","escher","layer","knows","about","the","added","records\n","try","{","\n","thisTxtbox",".","writeOut","(","null",")",";","\n","}","catch","(","IOException","e",")","{","\n","throw","new","HSLFException","(","e",")",";","\n","}","\n","boolean","isInitialAnchor","=","getAnchor","(",")",".","equals","(","new","Rectangle2D",".","Double","(",")",")",";","\n","boolean","isFilledTxt","=","!\"\"",".","equals","(","getText","(",")",")",";","\n","if","(","isInitialAnchor","&&","isFilledTxt",")","{","\n","resizeToFitText","(",")",";","\n","}","\n","}","\n","for","(","HSLFTextParagraph","htp",":","_paragraphs",")","{","\n","htp",".","setShapeId","(","getShapeId","(",")",")",";","\n","}","\n","sh",".","onAddTextShape","(","this",")",";","\n"],"docstring_tokens":["When","a","textbox","is","added","to","a","sheet","we","need","to","tell","upper-level","PPDrawing","about","it"]}
{"code_tokens":["\n","public","int","getRunType","(",")","{","\n","getEscherTextboxWrapper","(",")",";","\n","if","(","_txtbox","==","null",")","{","\n","return","-1",";","\n","}","\n","List<HSLFTextParagraph>","paras","=","HSLFTextParagraph",".","findTextParagraphs","(","_txtbox,","getSheet","(",")",")",";","\n","return","(","paras",".","isEmpty","(",")","||","paras",".","get","(","0",")",".","getIndex","(",")","==","-1",")","?","-1",":","paras",".","get","(","0",")",".","getRunType","(",")",";","\n"],"docstring_tokens":["Returns","the","type","of","the","text,","from","the","TextHeaderAtom"]}
{"code_tokens":["\n","public","void","setRunType","(","int","type",")","{","\n","getEscherTextboxWrapper","(",")",";","\n","if","(","_txtbox","==","null",")","{","\n","return",";","\n","}","\n","List<HSLFTextParagraph>","paras","=","HSLFTextParagraph",".","findTextParagraphs","(","_txtbox,","getSheet","(",")",")",";","\n","if","(","!paras",".","isEmpty","(",")",")","{","\n","paras",".","get","(","0",")",".","setRunType","(","type",")",";","\n","}","\n"],"docstring_tokens":["Changes","the","type","of","the","text"]}
{"code_tokens":["\n","/*","package","*/","HSLFTextAnchor","getAlignment","(",")","{","\n","AbstractEscherOptRecord","opt","=","getEscherOptRecord","(",")",";","\n","EscherSimpleProperty","prop","=","getEscherProperty","(","opt,","EscherPropertyTypes",".","TEXT__ANCHORTEXT",")",";","\n","final","HSLFTextAnchor","align",";","\n","if","(","prop","==","null",")","{","\n","/**\n","*","If","vertical","alignment","was","not","found","in","the","shape","properties","then","try","to\n","*","fetch","the","master","shape","and","search","for","the","align","property","there",".","\n","*/\n","int","type","=","getRunType","(",")",";","\n","HSLFSheet","sh","=","getSheet","(",")",";","\n","HSLFMasterSheet","master","=","(","sh","!=","null",")","?","sh",".","getMasterSheet","(",")",":","null",";","\n","HSLFTextShape","masterShape","=","(","master","!=","null",")","?","master",".","getPlaceholderByTextType","(","type",")",":","null",";","\n","if","(","masterShape","!=","null","&&","type","!=","TextPlaceholder",".","OTHER",".","nativeId",")","{","\n","align","=","masterShape",".","getAlignment","(",")",";","\n","}","else","{","\n","//not","found","in","the","master","sheet",".","Use","the","hardcoded","defaults",".","\n","align","=","(","TextPlaceholder",".","isTitle","(","type",")",")","?","HSLFTextAnchor",".","MIDDLE",":","HSLFTextAnchor",".","TOP",";","\n","}","\n","}","else","{","\n","align","=","HSLFTextAnchor",".","fromNativeId","(","prop",".","getPropertyValue","(",")",")",";","\n","}","\n\n","return","(","align","==","null",")","?","HSLFTextAnchor",".","TOP",":","align",";","\n"],"docstring_tokens":["Returns","the","type","of","vertical","alignment","for","the","text"]}
{"code_tokens":["\n","public","int","getWordWrapEx","(",")","{","\n","AbstractEscherOptRecord","opt","=","getEscherOptRecord","(",")",";","\n","EscherSimpleProperty","prop","=","getEscherProperty","(","opt,","EscherPropertyTypes",".","TEXT__WRAPTEXT",")",";","\n","return","prop","==","null","?","WrapSquare",":","prop",".","getPropertyValue","(",")",";","\n"],"docstring_tokens":["Returns","the","value","indicating","word","wrap"]}
{"code_tokens":["\n","protected","void","copyBlockHeaderToContents","(",")","{","\n","if","(","blockHeaderInContents",")","return",";","\n\n","prependContentsWith","(","blockHeader",")",";","\n","blockHeaderInContents","=","true",";","\n"],"docstring_tokens":["Some","kinds","of","streams","expect","their","4","byte","header","to","be","on","the","front","of","the","contents"]}
{"code_tokens":["\n","public","void","setPoints","(","float[]","xPoints,","float[]","yPoints",")","\n","{","\n","float","right","=","findBiggest","(","xPoints",")",";","\n","float","bottom","=","findBiggest","(","yPoints",")",";","\n","float","left","=","findSmallest","(","xPoints",")",";","\n","float","top","=","findSmallest","(","yPoints",")",";","\n\n","AbstractEscherOptRecord","opt","=","getEscherOptRecord","(",")",";","\n","opt",".","addEscherProperty","(","new","EscherSimpleProperty","(","EscherPropertyTypes",".","GEOMETRY__RIGHT,","Units",".","pointsToMaster","(","right","-","left",")",")",")",";","\n","opt",".","addEscherProperty","(","new","EscherSimpleProperty","(","EscherPropertyTypes",".","GEOMETRY__BOTTOM,","Units",".","pointsToMaster","(","bottom","-","top",")",")",")",";","\n\n","for","(","int","i","=","0",";","i","<","xPoints",".","length",";","i++",")","{","\n","xPoints[i]","+=","-left",";","\n","yPoints[i]","+=","-top",";","\n","}","\n\n","int","numpoints","=","xPoints",".","length",";","\n\n","EscherArrayProperty","verticesProp","=","new","EscherArrayProperty","(","EscherPropertyTypes",".","GEOMETRY__VERTICES,","false,","0",")",";","\n","verticesProp",".","setNumberOfElementsInArray","(","numpoints+1",")",";","\n","verticesProp",".","setNumberOfElementsInMemory","(","numpoints+1",")",";","\n","verticesProp",".","setSizeOfElements","(","0xFFF0",")",";","\n","for","(","int","i","=","0",";","i","<","numpoints",";","i++",")","\n","{","\n","byte[]","data","=","new","byte[4]",";","\n","LittleEndian",".","putShort","(","data,","0,","(","short",")","Units",".","pointsToMaster","(","xPoints[i]",")",")",";","\n","LittleEndian",".","putShort","(","data,","2,","(","short",")","Units",".","pointsToMaster","(","yPoints[i]",")",")",";","\n","verticesProp",".","setElement","(","i,","data",")",";","\n","}","\n","byte[]","data","=","new","byte[4]",";","\n","LittleEndian",".","putShort","(","data,","0,","(","short",")","Units",".","pointsToMaster","(","xPoints[0]",")",")",";","\n","LittleEndian",".","putShort","(","data,","2,","(","short",")","Units",".","pointsToMaster","(","yPoints[0]",")",")",";","\n","verticesProp",".","setElement","(","numpoints,","data",")",";","\n","opt",".","addEscherProperty","(","verticesProp",")",";","\n\n","EscherArrayProperty","segmentsProp","=","new","EscherArrayProperty","(","EscherPropertyTypes",".","GEOMETRY__SEGMENTINFO,","false,","0",")",";","\n","segmentsProp",".","setSizeOfElements","(","0x0002",")",";","\n","segmentsProp",".","setNumberOfElementsInArray","(","numpoints","*","2","+","4",")",";","\n","segmentsProp",".","setNumberOfElementsInMemory","(","numpoints","*","2","+","4",")",";","\n","segmentsProp",".","setElement","(","0,","new","byte[]","{","(","byte",")","0x00,","(","byte",")","0x40","}",")",";","\n","segmentsProp",".","setElement","(","1,","new","byte[]","{","(","byte",")","0x00,","(","byte",")","0xAC","}",")",";","\n","for","(","int","i","=","0",";","i","<","numpoints",";","i++",")","\n","{","\n","segmentsProp",".","setElement","(","2","+","i","*","2,","new","byte[]","{","(","byte",")","0x01,","(","byte",")","0x00","}",")",";","\n","segmentsProp",".","setElement","(","3","+","i","*","2,","new","byte[]","{","(","byte",")","0x00,","(","byte",")","0xAC","}",")",";","\n","}","\n","segmentsProp",".","setElement","(","segmentsProp",".","getNumberOfElementsInArray","(",")","-","2,","new","byte[]","{","(","byte",")","0x01,","(","byte",")","0x60","}",")",";","\n","segmentsProp",".","setElement","(","segmentsProp",".","getNumberOfElementsInArray","(",")","-","1,","new","byte[]","{","(","byte",")","0x00,","(","byte",")","0x80","}",")",";","\n","opt",".","addEscherProperty","(","segmentsProp",")",";","\n\n","opt",".","sortProperties","(",")",";","\n"],"docstring_tokens":["Set","the","polygon","vertices"]}
{"code_tokens":["\n","public","STPatternType",".","Enum","getPatternType","(",")","{","\n","CTPatternFill","ptrn","=","_fill",".","getPatternFill","(",")",";","\n","return","ptrn","==","null","?","null",":","ptrn",".","getPatternType","(",")",";","\n"],"docstring_tokens":["get","the","fill","pattern"]}
{"code_tokens":["\n","public","void","setPatternType","(","STPatternType",".","Enum","patternType",")","{","\n","CTPatternFill","ptrn","=","ensureCTPatternFill","(",")",";","\n","ptrn",".","setPatternType","(","patternType",")",";","\n"],"docstring_tokens":["set","the","fill","pattern"]}
{"code_tokens":["\n","public","void","reset","(","int","size",")","{","\n","TextSpecInfoRun","sir","=","new","TextSpecInfoRun","(","size",")",";","\n","UnsynchronizedByteArrayOutputStream","bos","=","new","UnsynchronizedByteArrayOutputStream","(",")",";","\n","try","{","\n","sir",".","writeOut","(","bos",")",";","\n","}","catch","(","IOException","e",")","{","\n","throw","new","HSLFException","(","e",")",";","\n","}","\n","_data","=","bos",".","toByteArray","(",")",";","\n\n","//","Update","the","size","(","header","bytes","5-8",")","\n","LittleEndian",".","putInt","(","_header,","4,","_data",".","length",")",";","\n"],"docstring_tokens":["Reset","the","content","to","one","info","run","with","the","default","values"]}
{"code_tokens":["\n","public","void","setParentSize","(","int","size",")","{","\n","assert","(","size",">","0",")",";","\n\n","try","(","UnsynchronizedByteArrayOutputStream","bos","=","new","UnsynchronizedByteArrayOutputStream","(",")",")","{","\n","TextSpecInfoRun[]","runs","=","getTextSpecInfoRuns","(",")",";","\n","int","remaining","=","size",";","\n","int","idx","=","0",";","\n","for","(","TextSpecInfoRun","run",":","runs",")","{","\n","int","len","=","run",".","getLength","(",")",";","\n","if","(","len",">","remaining","||","idx","==","runs",".","length","-","1",")","{","\n","run",".","setLength","(","len","=","remaining",")",";","\n","}","\n","remaining","-=","len",";","\n","run",".","writeOut","(","bos",")",";","\n","idx++",";","\n","}","\n\n","_data","=","bos",".","toByteArray","(",")",";","\n\n","//","Update","the","size","(","header","bytes","5-8",")","\n","LittleEndian",".","putInt","(","_header,","4,","_data",".","length",")",";","\n","}","catch","(","IOException","e",")","{","\n","throw","new","HSLFException","(","e",")",";","\n","}","\n"],"docstring_tokens":["Adapts","the","size","by","enlarging","the","last","TextSpecInfoRun","or","chopping","the","runs","to","the","given","length"]}
{"code_tokens":["\n\n","@Override\n","public","void","processPOIFSReaderEvent","(","POIFSReaderEvent","event",")","\n","{","\n"],"docstring_tokens":["Process","a","POIFSReaderEvent","that","this","listener","had","registered","for"]}
{"code_tokens":["\n","@SuppressWarnings","(","\"resource\"",")","\n","public","String","getCorePropertiesText","(",")","{","\n","POIXMLDocument","document","=","getDocument","(",")",";","\n","if","(","document","==","null",")","{","//","event","based","extractor","does","not","have","a","document\n","return","\"\"",";","\n","}","\n\n","StringBuilder","text","=","new","StringBuilder","(","64",")",";","\n","PackagePropertiesPart","props","=\n","document",".","getProperties","(",")",".","getCoreProperties","(",")",".","getUnderlyingProperties","(",")",";","\n\n","appendIfPresent","(","text,","\"Category\",","props",".","getCategoryProperty","(",")",")",";","\n","appendIfPresent","(","text,","\"ContentStatus\",","props",".","getContentStatusProperty","(",")",")",";","\n","appendIfPresent","(","text,","\"ContentType\",","props",".","getContentTypeProperty","(",")",")",";","\n","appendDateIfPresent","(","text,","\"Created\",","props",".","getCreatedProperty","(",")",")",";","\n","appendIfPresent","(","text,","\"CreatedString\",","props",".","getCreatedPropertyString","(",")",")",";","\n","appendIfPresent","(","text,","\"Creator\",","props",".","getCreatorProperty","(",")",")",";","\n","appendIfPresent","(","text,","\"Description\",","props",".","getDescriptionProperty","(",")",")",";","\n","appendIfPresent","(","text,","\"Identifier\",","props",".","getIdentifierProperty","(",")",")",";","\n","appendIfPresent","(","text,","\"Keywords\",","props",".","getKeywordsProperty","(",")",")",";","\n","appendIfPresent","(","text,","\"Language\",","props",".","getLanguageProperty","(",")",")",";","\n","appendIfPresent","(","text,","\"LastModifiedBy\",","props",".","getLastModifiedByProperty","(",")",")",";","\n","appendDateIfPresent","(","text,","\"LastPrinted\",","props",".","getLastPrintedProperty","(",")",")",";","\n","appendIfPresent","(","text,","\"LastPrintedString\",","props",".","getLastPrintedPropertyString","(",")",")",";","\n","appendDateIfPresent","(","text,","\"Modified\",","props",".","getModifiedProperty","(",")",")",";","\n","appendIfPresent","(","text,","\"ModifiedString\",","props",".","getModifiedPropertyString","(",")",")",";","\n","appendIfPresent","(","text,","\"Revision\",","props",".","getRevisionProperty","(",")",")",";","\n","appendIfPresent","(","text,","\"Subject\",","props",".","getSubjectProperty","(",")",")",";","\n","appendIfPresent","(","text,","\"Title\",","props",".","getTitleProperty","(",")",")",";","\n","appendIfPresent","(","text,","\"Version\",","props",".","getVersionProperty","(",")",")",";","\n\n","return","text",".","toString","(",")",";","\n"],"docstring_tokens":["Returns","the","core","document","properties,","eg","author"]}
{"code_tokens":["\n","@SuppressWarnings","(","\"resource\"",")","\n","public","String","getExtendedPropertiesText","(",")","{","\n","POIXMLDocument","document","=","getDocument","(",")",";","\n","if","(","document","==","null",")","{","//","event","based","extractor","does","not","have","a","document\n","return","\"\"",";","\n","}","\n\n","StringBuilder","text","=","new","StringBuilder","(","64",")",";","\n","org",".","openxmlformats",".","schemas",".","officeDocument",".","x2006",".","extendedProperties",".","CTProperties\n","props","=","document",".","getProperties","(",")",".","getExtendedProperties","(",")",".","getUnderlyingProperties","(",")",";","\n\n","appendIfPresent","(","text,","\"Application\",","props",".","getApplication","(",")",")",";","\n","appendIfPresent","(","text,","\"AppVersion\",","props",".","getAppVersion","(",")",")",";","\n","appendIfPresent","(","text,","\"Characters\",","props",".","getCharacters","(",")",")",";","\n","appendIfPresent","(","text,","\"CharactersWithSpaces\",","props",".","getCharactersWithSpaces","(",")",")",";","\n","appendIfPresent","(","text,","\"Company\",","props",".","getCompany","(",")",")",";","\n","appendIfPresent","(","text,","\"HyperlinkBase\",","props",".","getHyperlinkBase","(",")",")",";","\n","appendIfPresent","(","text,","\"HyperlinksChanged\",","props",".","getHyperlinksChanged","(",")",")",";","\n","appendIfPresent","(","text,","\"Lines\",","props",".","getLines","(",")",")",";","\n","appendIfPresent","(","text,","\"LinksUpToDate\",","props",".","getLinksUpToDate","(",")",")",";","\n","appendIfPresent","(","text,","\"Manager\",","props",".","getManager","(",")",")",";","\n","appendIfPresent","(","text,","\"Pages\",","props",".","getPages","(",")",")",";","\n","appendIfPresent","(","text,","\"Paragraphs\",","props",".","getParagraphs","(",")",")",";","\n","appendIfPresent","(","text,","\"PresentationFormat\",","props",".","getPresentationFormat","(",")",")",";","\n","appendIfPresent","(","text,","\"Template\",","props",".","getTemplate","(",")",")",";","\n","appendIfPresent","(","text,","\"TotalTime\",","props",".","getTotalTime","(",")",")",";","\n\n","return","text",".","toString","(",")",";","\n"],"docstring_tokens":["Returns","the","extended","document","properties,","eg","application"]}
{"code_tokens":["\n","@SuppressWarnings","(","{","\"resource\"","}",")","\n","public","String","getCustomPropertiesText","(",")","{","\n","POIXMLDocument","document","=","getDocument","(",")",";","\n","if","(","document","==","null",")","{","//","event","based","extractor","does","not","have","a","document\n","return","\"\"",";","\n","}","\n\n","StringBuilder","text","=","new","StringBuilder","(",")",";","\n","org",".","openxmlformats",".","schemas",".","officeDocument",".","x2006",".","customProperties",".","CTProperties\n","props","=","document",".","getProperties","(",")",".","getCustomProperties","(",")",".","getUnderlyingProperties","(",")",";","\n\n","for","(","CTProperty","property",":","props",".","getPropertyList","(",")",")","{","\n","String","val","=","\"","(","not","implemented!",")","\"",";","\n\n","if","(","property",".","isSetLpwstr","(",")",")","{","\n","val","=","property",".","getLpwstr","(",")",";","\n","}","else","if","(","property",".","isSetLpstr","(",")",")","{","\n","val","=","property",".","getLpstr","(",")",";","\n","}","else","if","(","property",".","isSetDate","(",")",")","{","\n","val","=","property",".","getDate","(",")",".","toString","(",")",";","\n","}","else","if","(","property",".","isSetFiletime","(",")",")","{","\n","val","=","property",".","getFiletime","(",")",".","toString","(",")",";","\n","}","else","if","(","property",".","isSetBool","(",")",")","{","\n","val","=","Boolean",".","toString","(","property",".","getBool","(",")",")",";","\n","}","\n\n","//","Integers\n","else","if","(","property",".","isSetI1","(",")",")","{","\n","val","=","Integer",".","toString","(","property",".","getI1","(",")",")",";","\n","}","else","if","(","property",".","isSetI2","(",")",")","{","\n","val","=","Integer",".","toString","(","property",".","getI2","(",")",")",";","\n","}","else","if","(","property",".","isSetI4","(",")",")","{","\n","val","=","Integer",".","toString","(","property",".","getI4","(",")",")",";","\n","}","else","if","(","property",".","isSetI8","(",")",")","{","\n","val","=","Long",".","toString","(","property",".","getI8","(",")",")",";","\n","}","else","if","(","property",".","isSetInt","(",")",")","{","\n","val","=","Integer",".","toString","(","property",".","getInt","(",")",")",";","\n","}","\n\n","//","Unsigned","Integers\n","else","if","(","property",".","isSetUi1","(",")",")","{","\n","val","=","Integer",".","toString","(","property",".","getUi1","(",")",")",";","\n","}","else","if","(","property",".","isSetUi2","(",")",")","{","\n","val","=","Integer",".","toString","(","property",".","getUi2","(",")",")",";","\n","}","else","if","(","property",".","isSetUi4","(",")",")","{","\n","val","=","Long",".","toString","(","property",".","getUi4","(",")",")",";","\n","}","else","if","(","property",".","isSetUi8","(",")",")","{","\n","val","=","property",".","getUi8","(",")",".","toString","(",")",";","\n","}","else","if","(","property",".","isSetUint","(",")",")","{","\n","val","=","Long",".","toString","(","property",".","getUint","(",")",")",";","\n","}","\n\n","//","Reals\n","else","if","(","property",".","isSetR4","(",")",")","{","\n","val","=","Float",".","toString","(","property",".","getR4","(",")",")",";","\n","}","else","if","(","property",".","isSetR8","(",")",")","{","\n","val","=","Double",".","toString","(","property",".","getR8","(",")",")",";","\n","}","else","if","(","property",".","isSetDecimal","(",")",")","{","\n","BigDecimal","d","=","property",".","getDecimal","(",")",";","\n","if","(","d","==","null",")","{","\n","val","=","null",";","\n","}","else","{","\n","val","=","d",".","toPlainString","(",")",";","\n","}","\n","}","\n\n","/*else","if","(","property",".","isSetArray","(",")",")","{","\n","//","TODO","Fetch","the","array","values","and","output\n","}","\n","else","if","(","property",".","isSetVector","(",")",")","{","\n","//","TODO","Fetch","the","vector","values","and","output\n","}","\n\n","else","if","(","property",".","isSetBlob","(",")","||","property",".","isSetOblob","(",")",")","{","\n","//","TODO","Decode,","if","possible\n","}","\n","else","if","(","property",".","isSetStream","(",")","||","property",".","isSetOstream","(",")","||\n","property",".","isSetVstream","(",")",")","{","\n","//","TODO","Decode,","if","possible\n","}","\n","else","if","(","property",".","isSetStorage","(",")","||","property",".","isSetOstorage","(",")",")","{","\n","//","TODO","Decode,","if","possible\n","}","*/\n\n","text",".","append","(","property",".","getName","(",")",")",".","append","(","\"","=","\"",")",".","append","(","val",")",".","append","(","\"\\n\"",")",";","\n","}","\n\n","return","text",".","toString","(",")",";","\n"],"docstring_tokens":["Returns","the","custom","document","properties,","if","there","are","any"]}
{"code_tokens":["\n","public","ExHyperlink","get","(","int","id",")","{","\n","for","(","int","i=0",";","i<_children",".","length",";","i++",")","{","\n","if","(","_children[i]","instanceof","ExHyperlink",")","{","\n","ExHyperlink","rec","=","(","ExHyperlink",")","_children[i]",";","\n","if","(","rec",".","getExHyperlinkAtom","(",")",".","getNumber","(",")","==","id",")","{","\n","return","rec",";","\n","}","\n","}","\n","}","\n","return","null",";","\n"],"docstring_tokens":["Lookup","a","hyperlink","by","its","unique","id"]}
{"code_tokens":["\n\n","public","void","setRowHeight","(","short","height",")","\n","{","\n","field_2_row_height","=","height",";","\n"],"docstring_tokens":["set","the","default","row","height"]}
{"code_tokens":["\n\n","public","short","getRowHeight","(",")","\n","{","\n","return","field_2_row_height",";","\n"],"docstring_tokens":["get","the","default","row","height"]}
{"code_tokens":["\n","public","void","append","(","String","text,","XSSFFont","font",")","{","\n","if","(","st",".","sizeOfRArray","(",")","==","0","&&","st",".","isSetT","(",")",")","{","\n","//convert","<t>string</t>","into","a","text","run:","<r><t>string</t></r>\n","CTRElt","lt","=","st",".","addNewR","(",")",";","\n","lt",".","setT","(","st",".","getT","(",")",")",";","\n","preserveSpaces","(","lt",".","xgetT","(",")",")",";","\n","st",".","unsetT","(",")",";","\n","}","\n","CTRElt","lt","=","st",".","addNewR","(",")",";","\n","lt",".","setT","(","text",")",";","\n","preserveSpaces","(","lt",".","xgetT","(",")",")",";","\n\n","if","(","font","!=","null",")","{","\n","CTRPrElt","pr","=","lt",".","addNewRPr","(",")",";","\n","setRunAttributes","(","font",".","getCTFont","(",")",",","pr",")",";","\n","}","\n"],"docstring_tokens":["Append","new","text","to","this","text","run","and","apply","the","specify","font","to","it"]}
{"code_tokens":["\n","public","void","append","(","String","text",")","{","\n","append","(","text,","null",")",";","\n"],"docstring_tokens":["Append","new","text","to","this","text","run"]}
{"code_tokens":["\n","private","void","setRunAttributes","(","CTFont","ctFont,","CTRPrElt","pr",")","{","\n","if","(","ctFont",".","sizeOfBArray","(",")",">","0",")","pr",".","addNewB","(",")",".","setVal","(","ctFont",".","getBArray","(","0",")",".","getVal","(",")",")",";","\n","if","(","ctFont",".","sizeOfUArray","(",")",">","0",")","pr",".","addNewU","(",")",".","setVal","(","ctFont",".","getUArray","(","0",")",".","getVal","(",")",")",";","\n","if","(","ctFont",".","sizeOfIArray","(",")",">","0",")","pr",".","addNewI","(",")",".","setVal","(","ctFont",".","getIArray","(","0",")",".","getVal","(",")",")",";","\n","if","(","ctFont",".","sizeOfColorArray","(",")",">","0",")","{","\n","CTColor","c1","=","ctFont",".","getColorArray","(","0",")",";","\n","CTColor","c2","=","pr",".","addNewColor","(",")",";","\n","if","(","c1",".","isSetAuto","(",")",")","c2",".","setAuto","(","c1",".","getAuto","(",")",")",";","\n","if","(","c1",".","isSetIndexed","(",")",")","c2",".","setIndexed","(","c1",".","getIndexed","(",")",")",";","\n","if","(","c1",".","isSetRgb","(",")",")","c2",".","setRgb","(","c1",".","getRgb","(",")",")",";","\n","if","(","c1",".","isSetTheme","(",")",")","c2",".","setTheme","(","c1",".","getTheme","(",")",")",";","\n","if","(","c1",".","isSetTint","(",")",")","c2",".","setTint","(","c1",".","getTint","(",")",")",";","\n","}","\n","if","(","ctFont",".","sizeOfSzArray","(",")",">","0",")","pr",".","addNewSz","(",")",".","setVal","(","ctFont",".","getSzArray","(","0",")",".","getVal","(",")",")",";","\n","if","(","ctFont",".","sizeOfNameArray","(",")",">","0",")","pr",".","addNewRFont","(",")",".","setVal","(","ctFont",".","getNameArray","(","0",")",".","getVal","(",")",")",";","\n","if","(","ctFont",".","sizeOfFamilyArray","(",")",">","0",")","pr",".","addNewFamily","(",")",".","setVal","(","ctFont",".","getFamilyArray","(","0",")",".","getVal","(",")",")",";","\n","if","(","ctFont",".","sizeOfSchemeArray","(",")",">","0",")","pr",".","addNewScheme","(",")",".","setVal","(","ctFont",".","getSchemeArray","(","0",")",".","getVal","(",")",")",";","\n","if","(","ctFont",".","sizeOfCharsetArray","(",")",">","0",")","pr",".","addNewCharset","(",")",".","setVal","(","ctFont",".","getCharsetArray","(","0",")",".","getVal","(",")",")",";","\n","if","(","ctFont",".","sizeOfCondenseArray","(",")",">","0",")","pr",".","addNewCondense","(",")",".","setVal","(","ctFont",".","getCondenseArray","(","0",")",".","getVal","(",")",")",";","\n","if","(","ctFont",".","sizeOfExtendArray","(",")",">","0",")","pr",".","addNewExtend","(",")",".","setVal","(","ctFont",".","getExtendArray","(","0",")",".","getVal","(",")",")",";","\n","if","(","ctFont",".","sizeOfVertAlignArray","(",")",">","0",")","pr",".","addNewVertAlign","(",")",".","setVal","(","ctFont",".","getVertAlignArray","(","0",")",".","getVal","(",")",")",";","\n","if","(","ctFont",".","sizeOfOutlineArray","(",")",">","0",")","pr",".","addNewOutline","(",")",".","setVal","(","ctFont",".","getOutlineArray","(","0",")",".","getVal","(",")",")",";","\n","if","(","ctFont",".","sizeOfShadowArray","(",")",">","0",")","pr",".","addNewShadow","(",")",".","setVal","(","ctFont",".","getShadowArray","(","0",")",".","getVal","(",")",")",";","\n","if","(","ctFont",".","sizeOfStrikeArray","(",")",">","0",")","pr",".","addNewStrike","(",")",".","setVal","(","ctFont",".","getStrikeArray","(","0",")",".","getVal","(",")",")",";","\n"],"docstring_tokens":["Copy","font","attributes","from","CTFont","bean","into","CTRPrElt","bean"]}
{"code_tokens":["\n","public","int","length","(",")","{","\n","return","getString","(",")",".","length","(",")",";","\n"],"docstring_tokens":["Returns","the","number","of","characters","in","this","string"]}
{"code_tokens":["\n","public","XSSFFont","getFontAtIndex","(","int","index",")","{","\n","final","ThemesTable","themes","=","getThemesTable","(",")",";","\n","int","pos","=","0",";","\n","//noinspection","deprecation","-","for","performance","reasons!\n","for","(","CTRElt","r",":","st",".","getRArray","(",")",")","{","\n","final","int","length","=","r",".","getT","(",")",".","length","(",")",";","\n","if","(","index",">=","pos","&&","index","<","pos","+","length",")","{","\n","XSSFFont","fnt","=","new","XSSFFont","(","toCTFont","(","r",".","getRPr","(",")",")",")",";","\n","fnt",".","setThemesTable","(","themes",")",";","\n","return","fnt",";","\n","}","\n\n","pos","+=","length",";","\n","}","\n","return","null",";","\n\n"],"docstring_tokens":["Return","a","copy","of","the","font","in","use","at","a","particular","index"]}
{"code_tokens":["\n","public","static","boolean","isLogUnsupportedTypes","(",")","{","\n","return","logUnsupportedTypes",";","\n"],"docstring_tokens":["Checks","whether","logging","of","unsupported","variant","types","warning","is","turned","on","or","off"]}
{"code_tokens":["\n","protected","static","void","writeUnsupportedTypeMessage\n","(","final","UnsupportedVariantTypeException","ex",")","{","\n","if","(","isLogUnsupportedTypes","(",")",")","\n","{","\n","if","(","unsupportedMessage","==","null",")","{","\n","unsupportedMessage","=","new","LinkedList<>","(",")",";","\n","}","\n","Long","vt","=","Long",".","valueOf","(","ex",".","getVariantType","(",")",")",";","\n","if","(","!unsupportedMessage",".","contains","(","vt",")",")","\n","{","\n","LOG",".","atError","(",")",".","withThrowable","(","ex",")",".","log","(","\"Unsupported","type\"",")",";","\n","unsupportedMessage",".","add","(","vt",")",";","\n","}","\n","}","\n"],"docstring_tokens":["Writes","a","warning","to","System.err","that","a","variant","type","is","unsupported","by","HPSF"]}
{"code_tokens":["\n","public","static","Object","read","(","final","byte[]","src,","final","int","offset,\n","final","int","length,","final","long","type,","final","int","codepage",")","\n","throws","ReadingNotSupportedException,","UnsupportedEncodingException","{","\n","LittleEndianByteArrayInputStream","lei","=","new","LittleEndianByteArrayInputStream","(","src,","offset",")",";","\n","return","read","(","lei,","length,","type,","codepage",")",";","\n"],"docstring_tokens":["Reads","a","variant","type","from","a","byte","array"]}
{"code_tokens":["\n","private","String[]","getParts","(","String","string",")","{","\n","String[]","parts","=","new","String[]","{","\"\",","\"\",","\"\"","}",";","\n","if","(","string","==","null",")","\n","return","parts",";","\n","\n","//","They","can","come","in","any","order,","which","is","just","nasty\n","//","Work","backwards","from","the","end,","picking","the","last\n","//","on","off","each","time","as","we","go\n","int","lAt","=","0",";","\n","int","cAt","=","0",";","\n","int","rAt","=","0",";","\n","\n","while","(","\n","//","Ensure","all","indicies","get","updated,","then","-1","tested\n","(","lAt","=","string",".","indexOf","(","HeaderFooterEntity_L",")",")",">","-2","&&\n","(","cAt","=","string",".","indexOf","(","HeaderFooterEntity_C",")",")",">","-2","&&","\n","(","rAt","=","string",".","indexOf","(","HeaderFooterEntity_R",")",")",">","-2","&&\n","(","lAt",">","-1","||","cAt",">","-1","||","rAt",">","-1",")","\n",")","{","\n","//","Pick","off","the","last","one\n","if","(","rAt",">","cAt","&&","rAt",">","lAt",")","{","\n","parts[2]","=","string",".","substring","(","rAt","+","HeaderFooterEntity_R",".","length","(",")",")",";","\n","string","=","string",".","substring","(","0,","rAt",")",";","\n","}","else","if","(","cAt",">","rAt","&&","cAt",">","lAt",")","{","\n","parts[1]","=","string",".","substring","(","cAt","+","HeaderFooterEntity_C",".","length","(",")",")",";","\n","string","=","string",".","substring","(","0,","cAt",")",";","\n","}","else","{","\n","parts[0]","=","string",".","substring","(","lAt","+","HeaderFooterEntity_L",".","length","(",")",")",";","\n","string","=","string",".","substring","(","0,","lAt",")",";","\n","}","\n","}","\n","\n","return","parts",";","\n"],"docstring_tokens":["Split","into","left,","center,","right"]}
{"code_tokens":["\n","public","short","getFormatFlags","(",")","\n","{","\n","return","field_1_formatFlags",";","\n"],"docstring_tokens":["Get","the","format","flags","field","for","the","SeriesLabels","record"]}
{"code_tokens":["\n","public","void","setFormatFlags","(","short","field_1_formatFlags",")","\n","{","\n","this",".","field_1_formatFlags","=","field_1_formatFlags",";","\n"],"docstring_tokens":["Set","the","format","flags","field","for","the","SeriesLabels","record"]}
{"code_tokens":["\n","public","void","setValue","(","double","value",")","{","\n","field_4_value","=","value",";","\n","specialCachedValue","=","null",";","\n"],"docstring_tokens":["set","the","calculated","value","of","the","formula"]}
{"code_tokens":["\n","@Internal\n","public","CTMarker","getFrom","(",")","{","\n","return","getCell1","(",")",";","\n"],"docstring_tokens":["Return","starting","anchor","point"]}
{"code_tokens":["\n","@Internal\n","public","CTMarker","getTo","(",")","{","\n","return","getCell2","(",")",";","\n"],"docstring_tokens":["Return","ending","anchor","point"]}
{"code_tokens":["\n","private","static","double","evaluate","(","int","hours,","int","minutes,","int","seconds",")","throws","EvaluationException","{","\n\n","if","(","hours",">","32767","||","minutes",">","32767","||","seconds",">","32767",")","{","\n","throw","new","EvaluationException","(","ErrorEval",".","VALUE_INVALID",")",";","\n","}","\n","int","totalSeconds","=","hours","*","SECONDS_PER_HOUR","+","minutes","*","SECONDS_PER_MINUTE","+","seconds",";","\n\n","if","(","totalSeconds","<","0",")","{","\n","throw","new","EvaluationException","(","ErrorEval",".","VALUE_INVALID",")",";","\n","}","\n","return","(","totalSeconds","%","SECONDS_PER_DAY",")","/","(","double",")","SECONDS_PER_DAY",";","\n"],"docstring_tokens":["Converts","the","supplied","hours,","minutes","and","seconds","to","an","Excel","time","value"]}
{"code_tokens":["\n","@Override\n","public","void","write","(",")","throws","IOException","{","\n","POIFSFileSystem","fs","=","getDirectory","(",")",".","getFileSystem","(",")",";","\n\n","validateInPlaceWritePossible","(",")",";","\n","writeProperties","(","fs,","null",")",";","\n","fs",".","writeFilesystem","(",")",";","\n"],"docstring_tokens":["Write","out","to","the","currently","open","file","the","properties","changes,","but","nothing","else"]}
{"code_tokens":["\n","@Override\n","public","Row","getRow","(",")","\n","{","\n","return","_row",";","\n"],"docstring_tokens":["Returns","the","Row","this","cell","belongs","to"]}
{"code_tokens":["\n","protected","void","readMacros","(","DirectoryNode","macroDir,","ModuleMap","modules",")","throws","IOException","{","\n","//bug59858","shows","that","dirstream","may","not","be","in","this","directory","(","\\MBD00082648\\_VBA_PROJECT_CUR\\VBA","ENTRY","NAME",")","\n","//but","may","be","in","another","directory","(","\\_VBA_PROJECT_CUR\\VBA","ENTRY","NAME",")","\n","//process","the","dirstream","first","--","\"dir\"","is","case","insensitive\n","for","(","String","entryName",":","macroDir",".","getEntryNames","(",")",")","{","\n","if","(","\"dir\"",".","equalsIgnoreCase","(","entryName",")",")","{","\n","processDirStream","(","macroDir",".","getEntry","(","entryName",")",",","modules",")",";","\n","break",";","\n","}","\n","}","\n\n","for","(","Entry","entry",":","macroDir",")","{","\n","if","(","!","(","entry","instanceof","DocumentNode",")",")","{","continue",";","}","\n\n","String","name","=","entry",".","getName","(",")",";","\n","DocumentNode","document","=","(","DocumentNode",")","entry",";","\n\n","if","(","!","\"dir\"",".","equalsIgnoreCase","(","name",")","&&","!startsWithIgnoreCase","(","name,","\"__SRP\"",")","\n","&&","!startsWithIgnoreCase","(","name,","\"_VBA_PROJECT\"",")",")","{","\n","//","process","module,","skip","__SRP","and","_VBA_PROJECT","since","these","do","not","contain","macros\n","readModuleFromDocumentStream","(","document,","name,","modules",")",";","\n","}","\n","}","\n"],"docstring_tokens":["Reads","VBA","Project","modules","from","a","VBA","Project","directory","located","at","macroDir","into","modules"]}
{"code_tokens":["\n","@Override\n","public","void","setText","(","String","text",")","{","\n","if","(","text","==","null",")","{","\n","getHeaderFooter","(",")",".","unsetOddHeader","(",")",";","\n","}","else","{","\n","getHeaderFooter","(",")",".","setOddHeader","(","text",")",";","\n","}","\n"],"docstring_tokens":["Set","a","text","for","the","header"]}
{"code_tokens":["\n","public","void","setUsername","(","String","username",")","{","\n","boolean","is16bit","=","StringUtil",".","hasMultibyte","(","username",")",";","\n","int","encodedByteCount","=","3","+","username",".","length","(",")","*","(","is16bit","?","2",":","1",")",";","\n","int","paddingSize","=","DATA_SIZE","-","encodedByteCount",";","\n","if","(","paddingSize","<","0",")","{","\n","throw","new","IllegalArgumentException","(","\"Name","is","too","long:","\"","+","username",")",";","\n","}","\n\n","field_1_username","=","username",";","\n"],"docstring_tokens":["set","the","username","for","the","user","that","created","the","report"]}
{"code_tokens":["\n","protected","byte[]","generateImage","(","boolean","showSignature,","boolean","showInvalidStamp",")","throws","IOException","{","\n","BufferedImage","bi","=","new","BufferedImage","(","400,","150,","BufferedImage",".","TYPE_INT_ARGB",")",";","\n","Graphics2D","gfx","=","bi",".","createGraphics","(",")",";","\n","gfx",".","setRenderingHint","(","RenderingHints",".","KEY_FRACTIONALMETRICS,","RenderingHints",".","VALUE_FRACTIONALMETRICS_ON",")",";","\n","gfx",".","setRenderingHint","(","RenderingHints",".","KEY_ALPHA_INTERPOLATION,","RenderingHints",".","VALUE_ALPHA_INTERPOLATION_QUALITY",")",";","\n","gfx",".","setRenderingHint","(","RenderingHints",".","KEY_ANTIALIASING,","RenderingHints",".","VALUE_ANTIALIAS_ON",")",";","\n","gfx",".","setRenderingHint","(","RenderingHints",".","KEY_TEXT_ANTIALIASING,","RenderingHints",".","VALUE_TEXT_ANTIALIAS_ON",")",";","\n\n","String","markX","=","\"X\\n\"",";","\n","String","lineX","=","(","new","String","(","new","char[500]",")",".","replace","(","\"\\0\",","\"","\"",")",")","+\"\\n\"",";","\n","String","cap","=","(","getCaption","(",")","==","null",")","?","getDefaultCaption","(",")",":","getCaption","(",")",";","\n","String","text","=","markX+lineX+cap",".","replaceAll","(","\"","(","?m",")","^\",","\"","\"",")",";","\n\n","AttributedString","as","=","new","AttributedString","(","text",")",";","\n","as",".","addAttribute","(","TextAttribute",".","FAMILY,","Font",".","SANS_SERIF",")",";","\n","as",".","addAttribute","(","TextAttribute",".","UNDERLINE,","TextAttribute",".","UNDERLINE_ON,","markX",".","length","(",")",",","text",".","indexOf","(","'\\n',","markX",".","length","(",")",")",")",";","\n\n","as",".","addAttribute","(","TextAttribute",".","SIZE,","15,","0,","markX",".","length","(",")",")",";","\n","as",".","addAttribute","(","TextAttribute",".","SIZE,","12,","markX",".","length","(",")",",","text",".","length","(",")",")",";","\n\n","gfx",".","setColor","(","Color",".","BLACK",")",";","\n\n","AttributedCharacterIterator","chIter","=","as",".","getIterator","(",")",";","\n","FontRenderContext","frc","=","gfx",".","getFontRenderContext","(",")",";","\n","LineBreakMeasurer","measurer","=","new","LineBreakMeasurer","(","chIter,","frc",")",";","\n","float","y","=","80,","x","=","5",";","\n","for","(","int","lineNr","=","0",";","measurer",".","getPosition","(",")","<","chIter",".","getEndIndex","(",")",";","lineNr++",")","{","\n","int","mpos","=","measurer",".","getPosition","(",")",";","\n","int","limit","=","text",".","indexOf","(","'\\n',","mpos",")",";","\n","limit","=","(","limit","==","-1",")","?","text",".","length","(",")",":","limit+1",";","\n","TextLayout","textLayout","=","measurer",".","nextLayout","(","bi",".","getWidth","(",")","-10f,","limit,","false",")",";","\n","if","(","lineNr","!=","1",")","{","\n","y","+=","textLayout",".","getAscent","(",")",";","\n","}","\n","textLayout",".","draw","(","gfx,","x,","y",")",";","\n","y","+=","textLayout",".","getDescent","(",")","+","textLayout",".","getLeading","(",")",";","\n","}","\n\n","if","(","showSignature","&&","plainSignature","!=","null","&&","contentType","!=","null",")","{","\n\n","ImageRenderer","renderer","=","DrawPictureShape",".","getImageRenderer","(","gfx,","contentType",")",";","\n\n","renderer",".","loadImage","(","plainSignature,","contentType",")",";","\n\n","double","targetX","=","10",";","\n","double","targetY","=","100",";","\n","double","targetWidth","=","bi",".","getWidth","(",")","-","targetX",";","\n","double","targetHeight","=","targetY","-","5",";","\n","Dimension2D","dim","=","renderer",".","getDimension","(",")",";","\n","double","scale","=","Math",".","min","(","targetWidth","/","dim",".","getWidth","(",")",",","targetHeight","/","dim",".","getHeight","(",")",")",";","\n","double","effWidth","=","dim",".","getWidth","(",")","*","scale",";","\n","double","effHeight","=","dim",".","getHeight","(",")","*","scale",";","\n\n","renderer",".","drawImage","(","gfx,","new","Rectangle2D",".","Double","(","targetX","+","(","(","bi",".","getWidth","(",")","-","effWidth",")","/","2",")",",","targetY","-","effHeight,","effWidth,","effHeight",")",")",";","\n","}","\n\n","if","(","showInvalidStamp","&&","invalidStamp","!=","null","&&","!invalidStamp",".","isEmpty","(",")",")","{","\n","gfx",".","setFont","(","new","Font","(","\"Lucida","Bright\",","Font",".","ITALIC,","60",")",")",";","\n","gfx",".","rotate","(","Math",".","toRadians","(","-15",")",",","bi",".","getWidth","(",")","/2",".",",","bi",".","getHeight","(",")","/2",".",")",";","\n","TextLayout","tl","=","new","TextLayout","(","invalidStamp,","gfx",".","getFont","(",")",",","gfx",".","getFontRenderContext","(",")",")",";","\n","Rectangle2D","bounds","=","tl",".","getBounds","(",")",";","\n","x","=","(","float",")","(","(","bi",".","getWidth","(",")","-bounds",".","getWidth","(",")",")","/2","-","bounds",".","getX","(",")",")",";","\n","y","=","(","float",")","(","(","bi",".","getHeight","(",")","-bounds",".","getHeight","(",")",")","/2","-","bounds",".","getY","(",")",")",";","\n","Shape","outline","=","tl",".","getOutline","(","AffineTransform",".","getTranslateInstance","(","x+2,","y+1",")",")",";","\n","gfx",".","setComposite","(","AlphaComposite",".","getInstance","(","AlphaComposite",".","SRC_OVER,","0",".","3f",")",")",";","\n","gfx",".","setPaint","(","Color",".","RED",")",";","\n","gfx",".","draw","(","outline",")",";","\n","gfx",".","setPaint","(","new","GradientPaint","(","0,","0,","Color",".","RED,","30,","20,","new","Color","(","128,","128,","255",")",",","true",")",")",";","\n","tl",".","draw","(","gfx,","x,","y",")",";","\n","}","\n\n","gfx",".","dispose","(",")",";","\n\n","UnsynchronizedByteArrayOutputStream","bos","=","new","UnsynchronizedByteArrayOutputStream","(",")",";","\n","ImageIO",".","write","(","bi,","\"PNG\",","bos",")",";","\n","return","bos",".","toByteArray","(",")",";","\n"],"docstring_tokens":["Generate","the","image","for","a","signature","line"]}
{"code_tokens":["\n","public","void","extractMessageBody","(","File","dest",")","throws","IOException","{","\n","MAPIAttribute","body","=","getBodyAttribute","(",")",";","\n","if","(","body","==","null",")","{","\n","System",".","err",".","println","(","\"No","message","body","found,","\"","+","dest","+","\"","not","created\"",")",";","\n","return",";","\n","}","\n","if","(","body","instanceof","MAPIStringAttribute",")","{","\n","String","name","=","dest",".","toString","(",")",";","\n","if","(","name",".","endsWith","(","\"",".","rtf\"",")",")","{","\n","name","=","name",".","substring","(","0,","name",".","length","(",")","-4",")",";","\n","}","\n","dest","=","new","File","(","name","+","\"",".","txt\"",")",";","\n","}","\n\n","try","(","OutputStream","fout","=","new","FileOutputStream","(","dest",")",")","{","\n","if","(","body","instanceof","MAPIStringAttribute",")","{","\n","//","Save","in","a","predictable","encoding,","not","raw","bytes\n","String","text","=","(","(","MAPIStringAttribute",")","body",")",".","getDataString","(",")",";","\n","fout",".","write","(","text",".","getBytes","(","StringUtil",".","UTF8",")",")",";","\n","}","else","{","\n","//","Save","the","raw","bytes,","should","be","raw","RTF\n","fout",".","write","(","body",".","getData","(",")",")",";","\n","}","\n","}","\n"],"docstring_tokens":["Extracts","the","RTF","message","body","to","the","supplied","file"]}
{"code_tokens":["\n","private","static","StringBuilder","buildInitSB","(","byte[]","text,","PieceDescriptor","pd",")","{","\n","if","(","DoubleByteUtil",".","BIG5",".","equals","(","pd",".","getCharset","(",")",")",")","{","\n","return","new","StringBuilder","(","DoubleByteUtil",".","cp950ToString","(","text,","0,","text",".","length",")",")",";","\n","}","\n\n","String","str","=","new","String","(","text,","0,","text",".","length,","(","pd",".","isUnicode","(",")",")","?","StringUtil",".","UTF16LE",":","pd",".","getCharset","(",")",")",";","\n","return","new","StringBuilder","(","str",")",";","\n"],"docstring_tokens":["Create","the","StringBuilder","from","the","text","and","unicode","flag"]}
{"code_tokens":["\n","public","byte","getMajorTickType","(",")","\n","{","\n","return","field_1_majorTickType",";","\n"],"docstring_tokens":["Get","the","major","tick","type","field","for","the","Tick","record"]}
{"code_tokens":["\n","public","void","setMajorTickType","(","byte","field_1_majorTickType",")","\n","{","\n","this",".","field_1_majorTickType","=","field_1_majorTickType",";","\n"],"docstring_tokens":["Set","the","major","tick","type","field","for","the","Tick","record"]}
{"code_tokens":["\n","public","byte","getMinorTickType","(",")","\n","{","\n","return","field_2_minorTickType",";","\n"],"docstring_tokens":["Get","the","minor","tick","type","field","for","the","Tick","record"]}
{"code_tokens":["\n","public","void","setMinorTickType","(","byte","field_2_minorTickType",")","\n","{","\n","this",".","field_2_minorTickType","=","field_2_minorTickType",";","\n"],"docstring_tokens":["Set","the","minor","tick","type","field","for","the","Tick","record"]}
{"code_tokens":["\n","public","byte","getLabelPosition","(",")","\n","{","\n","return","field_3_labelPosition",";","\n"],"docstring_tokens":["Get","the","label","position","field","for","the","Tick","record"]}
{"code_tokens":["\n","public","void","setLabelPosition","(","byte","field_3_labelPosition",")","\n","{","\n","this",".","field_3_labelPosition","=","field_3_labelPosition",";","\n"],"docstring_tokens":["Set","the","label","position","field","for","the","Tick","record"]}
{"code_tokens":["\n","public","byte","getBackground","(",")","\n","{","\n","return","field_4_background",";","\n"],"docstring_tokens":["Get","the","background","field","for","the","Tick","record"]}
{"code_tokens":["\n","public","void","setBackground","(","byte","field_4_background",")","\n","{","\n","this",".","field_4_background","=","field_4_background",";","\n"],"docstring_tokens":["Set","the","background","field","for","the","Tick","record"]}
{"code_tokens":["\n","public","int","getLabelColorRgb","(",")","\n","{","\n","return","field_5_labelColorRgb",";","\n"],"docstring_tokens":["Get","the","label","color","rgb","field","for","the","Tick","record"]}
{"code_tokens":["\n","public","void","setLabelColorRgb","(","int","field_5_labelColorRgb",")","\n","{","\n","this",".","field_5_labelColorRgb","=","field_5_labelColorRgb",";","\n"],"docstring_tokens":["Set","the","label","color","rgb","field","for","the","Tick","record"]}
{"code_tokens":["\n","public","int","getZero1","(",")","\n","{","\n","return","field_6_zero1",";","\n"],"docstring_tokens":["Get","the","zero","1","field","for","the","Tick","record"]}
{"code_tokens":["\n","public","void","setZero1","(","int","field_6_zero1",")","\n","{","\n","this",".","field_6_zero1","=","field_6_zero1",";","\n"],"docstring_tokens":["Set","the","zero","1","field","for","the","Tick","record"]}
{"code_tokens":["\n","public","int","getZero2","(",")","\n","{","\n","return","field_7_zero2",";","\n"],"docstring_tokens":["Get","the","zero","2","field","for","the","Tick","record"]}
{"code_tokens":["\n","public","void","setZero2","(","int","field_7_zero2",")","\n","{","\n","this",".","field_7_zero2","=","field_7_zero2",";","\n"],"docstring_tokens":["Set","the","zero","2","field","for","the","Tick","record"]}
{"code_tokens":["\n","public","short","getOptions","(",")","\n","{","\n","return","field_10_options",";","\n"],"docstring_tokens":["Get","the","options","field","for","the","Tick","record"]}
{"code_tokens":["\n","public","void","setOptions","(","short","field_10_options",")","\n","{","\n","this",".","field_10_options","=","field_10_options",";","\n"],"docstring_tokens":["Set","the","options","field","for","the","Tick","record"]}
{"code_tokens":["\n","public","short","getTickColor","(",")","\n","{","\n","return","field_11_tickColor",";","\n"],"docstring_tokens":["Get","the","tick","color","field","for","the","Tick","record"]}
{"code_tokens":["\n","public","void","setTickColor","(","short","field_11_tickColor",")","\n","{","\n","this",".","field_11_tickColor","=","field_11_tickColor",";","\n"],"docstring_tokens":["Set","the","tick","color","field","for","the","Tick","record"]}
{"code_tokens":["\n","public","short","getZero3","(",")","\n","{","\n","return","field_12_zero5",";","\n"],"docstring_tokens":["Get","the","zero","3","field","for","the","Tick","record"]}
{"code_tokens":["\n","public","void","setZero3","(","short","field_12_zero3",")","\n","{","\n","this",".","field_12_zero5","=","field_12_zero3",";","\n"],"docstring_tokens":["Set","the","zero","3","field","for","the","Tick","record"]}
{"code_tokens":["\n","public","void","traverse","(","CellHandler","handler",")","{","\n","int","firstRow","=","range",".","getFirstRow","(",")",";","\n","int","lastRow","=","range",".","getLastRow","(",")",";","\n","int","firstColumn","=","range",".","getFirstColumn","(",")",";","\n","int","lastColumn","=","range",".","getLastColumn","(",")",";","\n","final","int","width","=","lastColumn","-","firstColumn","+","1",";","\n","SimpleCellWalkContext","ctx","=","new","SimpleCellWalkContext","(",")",";","\n","Row","currentRow",";","\n","Cell","currentCell",";","\n\n","for","(","ctx",".","rowNumber","=","firstRow",";","ctx",".","rowNumber","<=","lastRow",";","++ctx",".","rowNumber",")","{","\n","currentRow","=","sheet",".","getRow","(","ctx",".","rowNumber",")",";","\n","if","(","currentRow","==","null",")","{","\n","continue",";","\n","}","\n","for","(","ctx",".","colNumber","=","firstColumn",";","ctx",".","colNumber","<=","lastColumn",";","++ctx",".","colNumber",")","{","\n","currentCell","=","currentRow",".","getCell","(","ctx",".","colNumber",")",";","\n\n","if","(","currentCell","==","null",")","{","\n","continue",";","\n","}","\n","if","(","isEmpty","(","currentCell",")","&&","!traverseEmptyCells",")","{","\n","continue",";","\n","}","\n\n","long","rowSize","=","Math",".","multiplyExact","(","Math",".","subtractExact","(","ctx",".","rowNumber,","firstRow",")",",","(","long",")","width",")",";","\n\n","ctx",".","ordinalNumber","=","Math",".","addExact","(","rowSize,","(","ctx",".","colNumber","-","firstColumn","+","1",")",")",";","\n\n","handler",".","onCell","(","currentCell,","ctx",")",";","\n","}","\n","}","\n"],"docstring_tokens":["Traverse","cell","range","from","top","left","to","bottom","right","cell"]}
{"code_tokens":["\n","public","void","setStartBlock","(","int","startBlock",")","\n","{","\n","_start_block",".","set","(","startBlock,","_raw_data",")",";","\n"],"docstring_tokens":["Set","the","start","block","for","the","document","referred","to","by","this","Property"]}
{"code_tokens":["\n","public","String","getName","(",")","\n","{","\n","return","_name",";","\n"],"docstring_tokens":["Get","the","name","of","this","property"]}
{"code_tokens":["\n","protected","void","setSize","(","int","size",")","\n","{","\n","_size",".","set","(","size,","_raw_data",")",";","\n"],"docstring_tokens":["Set","the","size","of","the","document","associated","with","this","Property"]}
{"code_tokens":["\n","protected","void","setIndex","(","int","index",")","\n","{","\n","_index","=","index",";","\n"],"docstring_tokens":["Set","the","index","for","this","Property"]}
{"code_tokens":["\n","protected","int","getIndex","(",")","\n","{","\n","return","_index",";","\n"],"docstring_tokens":["get","the","index","for","this","Property"]}
{"code_tokens":["\n","@Override\n","public","void","setVaryColors","(","Boolean","varyColors",")","{","\n","//","nothing","to","do\n"],"docstring_tokens":["Surface","chart","is","not","supporting","vary","color","property"]}
{"code_tokens":["\n","public","static","long","dateToFileTime","(","final","Date","date",")","{","\n","return","BigInteger",".","valueOf","(","date",".","getTime","(",")",")",".","subtract","(","EPOCH_DIFF",")",".","multiply","(","NANO_100",")",".","longValue","(",")",";","\n"],"docstring_tokens":["Converts","a","Date","into","a","filetime"]}
{"code_tokens":["\n","public","static","boolean","isUndefined","(","Date","date",")","{","\n","return","(","date","==","null","||","dateToFileTime","(","date",")","==","0",")",";","\n"],"docstring_tokens":["Return","true","if","the","date","is","undefined"]}
{"code_tokens":["\n","@SuppressWarnings","(","\"resource\"",")","\n","public","HSLFPictureData","getPictureData","(",")","{","\n","AbstractEscherOptRecord","opt","=","shape",".","getEscherOptRecord","(",")",";","\n","EscherSimpleProperty","p","=","HSLFShape",".","getEscherProperty","(","opt,","EscherPropertyTypes",".","FILL__PATTERNTEXTURE",")",";","\n","if","(","p","==","null",")","{","\n","return","null",";","\n","}","\n\n","HSLFSlideShow","ppt","=","shape",".","getSheet","(",")",".","getSlideShow","(",")",";","\n","List<HSLFPictureData>","pict","=","ppt",".","getPictureData","(",")",";","\n","Document","doc","=","ppt",".","getDocumentRecord","(",")",";","\n\n","EscherContainerRecord","dggContainer","=","doc",".","getPPDrawingGroup","(",")",".","getDggContainer","(",")",";","\n","EscherContainerRecord","bstore","=","HSLFShape",".","getEscherChild","(","dggContainer,","EscherContainerRecord",".","BSTORE_CONTAINER",")",";","\n\n","int","idx","=","p",".","getPropertyValue","(",")",";","\n","if","(","idx","==","0",")","{","\n","LOG",".","atWarn","(",")",".","log","(","\"no","reference","to","picture","data","found","\"",")",";","\n","}","else","{","\n","EscherBSERecord","bse","=","(","EscherBSERecord",")","bstore",".","getChild","(","idx","-","1",")",";","\n","for","(","HSLFPictureData","pd",":","pict",")","{","\n\n","//","Reference","equals","is","safe","because","these","BSE","belong","to","the","same","slideshow\n","if","(","pd",".","bse","==","bse",")","{","\n","return","pd",";","\n","}","\n","}","\n","}","\n\n","return","null",";","\n"],"docstring_tokens":["PictureData","object","used","in","a","texture,","pattern","of","picture","fill"]}
{"code_tokens":["\n","@Override\n","public","ExcelNumberFormat","getNumberFormat","(",")","{","\n","CTDxf","dxf","=","getDxf","(","false",")",";","\n","if","(","dxf","==","null","||","!dxf",".","isSetNumFmt","(",")",")","return","null",";","\n\n","CTNumFmt","numFmt","=","dxf",".","getNumFmt","(",")",";","\n","return","new","ExcelNumberFormat","(","(","int",")","numFmt",".","getNumFmtId","(",")",",","numFmt",".","getFormatCode","(",")",")",";","\n"],"docstring_tokens":["Return","the","number","format","from","the","dxf","style","record","if","present,","null","if","not"]}
{"code_tokens":["\n","@Override\n","public","ConditionType","getConditionType","(",")","{","\n","return","typeLookup",".","get","(","_cfRule",".","getType","(",")",")",";","\n"],"docstring_tokens":["Type","of","conditional","formatting","rule"]}
{"code_tokens":["\n","public","MAPIMessage","getEmbeddedMessage","(",")","throws","IOException","{","\n","if","(","attachmentDirectory","!=","null",")","{","\n","return","attachmentDirectory",".","getAsEmbeddedMessage","(",")",";","\n","}","\n","return","null",";","\n"],"docstring_tokens":["Returns","the","embedded","MAPI","message,","if","the","attachment","is","an","embedded","message,","or","null","otherwise"]}
{"code_tokens":["\n","@Override\n","public","void","chunksComplete","(",")","{","\n","//","Currently,","we","don't","need","to","do","anything","special","once\n","//","all","the","chunks","have","been","located\n"],"docstring_tokens":["Used","to","flag","that","all","the","chunks","of","the","attachment","have","now","been","located"]}
{"code_tokens":["\n","public","byte[]","getRemainingData","(",")","\n","{","\n","return","remainingData",";","\n"],"docstring_tokens":["Any","data","recording","this","record"]}
{"code_tokens":["\n","@SuppressWarnings","(","{","\"unchecked\",","\"WeakerAccess\",","\"unused\",","\"SameParameterValue\"","}",")","\n","protected","<T","extends","XmlObject>","T","getChild","(","Class<T>","childClass,","String","namespace,","String","nodename",")","{","\n","T","child","=","null",";","\n","XmlCursor","cur","=","getXmlObject","(",")",".","newCursor","(",")",";","\n","try","{","\n","if","(","cur",".","toChild","(","namespace,","nodename",")",")","{","\n","child","=","(","T",")","cur",".","getObject","(",")",";","\n","}","\n","if","(","cur",".","toChild","(","XSLFRelation",".","NS_DRAWINGML,","nodename",")",")","{","\n","child","=","(","T",")","cur",".","getObject","(",")",";","\n","}","\n","}","finally","{","\n","cur",".","dispose","(",")",";","\n","}","\n","return","child",";","\n"],"docstring_tokens":["Return","direct","child","objects","of","this","shape"]}
{"code_tokens":["\n","@Internal\n","public","int","getFlags","(",")","\n","{","\n","return","field_2_flags",";","\n"],"docstring_tokens":["Get","the","flags","field","for","the","LFOLVLBase","record"]}
{"code_tokens":["\n","@Internal\n","public","void","setFlags","(","int","field_2_flags",")","\n","{","\n","this",".","field_2_flags","=","field_2_flags",";","\n"],"docstring_tokens":["Set","the","flags","field","for","the","LFOLVLBase","record"]}
{"code_tokens":["\n","@Internal\n","public","boolean","isFStartAt","(",")","\n","{","\n","return","fStartAt",".","isSet","(","field_2_flags",")",";","\n"],"docstring_tokens":["A","bit","that","specifies","whether","this","LFOLVL","overrides","the","start-at","value","of","the","level"]}
{"code_tokens":["\n","@Internal\n","public","boolean","isFFormatting","(",")","\n","{","\n","return","fFormatting",".","isSet","(","field_2_flags",")",";","\n"],"docstring_tokens":["A","bit","that","specifies","whether","lvl","is","an","LVL","that","overrides","the","corresponding","LVL"]}
{"code_tokens":["\n","@Internal\n","public","void","setGrfhic","(","short","value",")","\n","{","\n","field_2_flags","=","grfhic",".","setValue","(","field_2_flags,","value",")",";","\n"],"docstring_tokens":["Sets","the","grfhic","field","value"]}
{"code_tokens":["\n","@Internal\n","public","void","setUnused1","(","short","value",")","\n","{","\n","field_2_flags","=","unused1",".","setValue","(","field_2_flags,","value",")",";","\n"],"docstring_tokens":["Sets","the","unused1","field","value"]}
{"code_tokens":["\n","@Internal\n","public","void","setUnused2","(","byte","value",")","\n","{","\n","field_2_flags","=","unused2",".","setValue","(","field_2_flags,","value",")",";","\n"],"docstring_tokens":["Sets","the","unused2","field","value"]}
{"code_tokens":["\n","public","String","getStringFromChunk","(","StringChunk","chunk",")","throws","ChunkNotFoundException","{","\n","if","(","chunk","==","null",")","{","\n","if","(","returnNullOnMissingChunk",")","{","\n","return","null",";","\n","}","else","{","\n","throw","new","ChunkNotFoundException","(",")",";","\n","}","\n","}","\n","return","chunk",".","getValue","(",")",";","\n"],"docstring_tokens":["Gets","a","string","value","based","on","the","passed","chunk"]}
{"code_tokens":["\n","public","short","getAxisType","(",")","\n","{","\n","return","field_1_axisType",";","\n"],"docstring_tokens":["Get","the","axis","type","field","for","the","AxisParent","record"]}
{"code_tokens":["\n","public","void","setAxisType","(","short","field_1_axisType",")","\n","{","\n","this",".","field_1_axisType","=","field_1_axisType",";","\n"],"docstring_tokens":["Set","the","axis","type","field","for","the","AxisParent","record"]}
{"code_tokens":["\n","public","int","getX","(",")","\n","{","\n","return","field_2_x",";","\n"],"docstring_tokens":["Get","the","x","field","for","the","AxisParent","record"]}
{"code_tokens":["\n","public","void","setX","(","int","field_2_x",")","\n","{","\n","this",".","field_2_x","=","field_2_x",";","\n"],"docstring_tokens":["Set","the","x","field","for","the","AxisParent","record"]}
{"code_tokens":["\n","public","int","getY","(",")","\n","{","\n","return","field_3_y",";","\n"],"docstring_tokens":["Get","the","y","field","for","the","AxisParent","record"]}
{"code_tokens":["\n","public","void","setY","(","int","field_3_y",")","\n","{","\n","this",".","field_3_y","=","field_3_y",";","\n"],"docstring_tokens":["Set","the","y","field","for","the","AxisParent","record"]}
{"code_tokens":["\n","public","int","getWidth","(",")","\n","{","\n","return","field_4_width",";","\n"],"docstring_tokens":["Get","the","width","field","for","the","AxisParent","record"]}
{"code_tokens":["\n","public","void","setWidth","(","int","field_4_width",")","\n","{","\n","this",".","field_4_width","=","field_4_width",";","\n"],"docstring_tokens":["Set","the","width","field","for","the","AxisParent","record"]}
{"code_tokens":["\n","public","int","getHeight","(",")","\n","{","\n","return","field_5_height",";","\n"],"docstring_tokens":["Get","the","height","field","for","the","AxisParent","record"]}
{"code_tokens":["\n","public","void","setHeight","(","int","field_5_height",")","\n","{","\n","this",".","field_5_height","=","field_5_height",";","\n"],"docstring_tokens":["Set","the","height","field","for","the","AxisParent","record"]}
{"code_tokens":["\n","static","OldFfn","build","(","byte[]","buf,","int","offset,","int","fontTableEnd",")","{","\n","int","start","=","offset",";","\n","//preliminary","bytes\n","if","(","offset","+","6",">","fontTableEnd",")","{","\n","return","null",";","\n","}","\n","//first","byte\n","short","fontDescriptionLength","=","buf[offset]",";","\n","offset","+=","1",";","\n","if","(","offset","+","fontDescriptionLength",">","fontTableEnd",")","{","\n","LOG",".","atWarn","(",")",".","log","(","\"Asked","to","read","beyond","font","table","end",".","Skipping","font\"",")",";","\n","return","null",";","\n","}","\n\n","//no","idea","what","these","3","bytes","do\n","offset","+=","3",";","\n","byte","chs","=","buf[offset]",";","\n","Charset","charset","=","null",";","\n","FontCharset","wmfCharset","=","FontCharset",".","valueOf","(","chs","&","0xff",")",";","\n","if","(","wmfCharset","==","null",")","{","\n","LOG",".","atWarn","(",")",".","log","(","\"Couldn't","find","font","for","type:","{","}","\",","box","(","(","chs","&","0xff",")",")",")",";","\n","}","else","{","\n","charset","=","wmfCharset",".","getCharset","(",")",";","\n","}","\n","charset","=","charset","==","null","?","StringUtil",".","WIN_1252",":","charset",";","\n","offset","+=","LittleEndianConsts",".","BYTE_SIZE",";","\n","//if","this","byte","here","==","7,","it","_may_","signify","existence","of\n","//an","altername","font","name\n\n","//not","sure","what","the","byte","after","the","_chs","does\n","offset","+=","LittleEndianConsts",".","BYTE_SIZE",";","\n","int","fontNameLength","=","-1",";","\n","for","(","int","i","=","offset",";","i","<","fontTableEnd",";","i++",")","{","\n","if","(","buf[i]","==","0",")","{","\n","fontNameLength","=","i","-","offset",";","\n","break",";","\n","}","\n","}","\n","if","(","fontNameLength","==","-1",")","{","\n","LOG",".","atWarn","(",")",".","log","(","\"Couldn't","find","the","zero-byte","delimited","font","name","length\"",")",";","\n","return","null",";","\n","}","\n","String","fontName","=","new","String","(","buf,","offset,","fontNameLength,","charset",")",";","\n","String","altFontName","=","null",";","\n","int","altFontNameLength","=","-1",";","\n","offset","+=","fontNameLength","+","1",";","\n","if","(","offset","-","start","<","fontDescriptionLength",")","{","\n","for","(","int","i","=","offset",";","i","<=","start","+","fontDescriptionLength",";","i++",")","{","\n","if","(","buf[i]","==","0",")","{","\n","altFontNameLength","=","i","-","offset",";","\n","break",";","\n","}","\n","}","\n","if","(","altFontNameLength",">","-1",")","{","\n","altFontName","=","new","String","(","buf,","offset,","altFontNameLength,","charset",")",";","\n","}","\n","}","\n","//reset","to","0","for","length","calculation\n","altFontNameLength","=","(","altFontNameLength","<","0",")","?","0",":","altFontNameLength","+","1",";","//add","one","for","zero","byte\n\n","int","len","=","LittleEndianConsts",".","INT_SIZE","+","LittleEndianConsts",".","BYTE_SIZE","+","LittleEndianConsts",".","BYTE_SIZE","+//6","starting","bytes\n","fontNameLength","+","altFontNameLength","+","1",";","//+1","is","for","the","zero","byte\n","//this","len","should","==","fontDescriptionLength\n\n","return","new","OldFfn","(","chs,","fontName,","altFontName,","len",")",";","\n\n"],"docstring_tokens":["try","to","read","an","OldFfn","starting","at","offset;","read","no","farther","than","end"]}
{"code_tokens":["\n","public","static","Ptg[]","toTokenArray","(","ParseNode","rootNode",")","{","\n","TokenCollector","temp","=","new","TokenCollector","(","rootNode",".","getTokenCount","(",")",")",";","\n","rootNode",".","collectPtgs","(","temp",")",";","\n","return","temp",".","getResult","(",")",";","\n"],"docstring_tokens":["Collects","the","array","of","Ptg","tokens","for","the","specified","tree"]}
{"code_tokens":["\n","public","int","getForegroundColor","(",")","\n","{","\n","return","field_1_foregroundColor",";","\n"],"docstring_tokens":["Get","the","foreground","color","field","for","the","AreaFormat","record"]}
{"code_tokens":["\n","public","void","setForegroundColor","(","int","field_1_foregroundColor",")","\n","{","\n","this",".","field_1_foregroundColor","=","field_1_foregroundColor",";","\n"],"docstring_tokens":["Set","the","foreground","color","field","for","the","AreaFormat","record"]}
{"code_tokens":["\n","public","int","getBackgroundColor","(",")","\n","{","\n","return","field_2_backgroundColor",";","\n"],"docstring_tokens":["Get","the","background","color","field","for","the","AreaFormat","record"]}
{"code_tokens":["\n","public","void","setBackgroundColor","(","int","field_2_backgroundColor",")","\n","{","\n","this",".","field_2_backgroundColor","=","field_2_backgroundColor",";","\n"],"docstring_tokens":["Set","the","background","color","field","for","the","AreaFormat","record"]}
{"code_tokens":["\n","public","short","getPattern","(",")","\n","{","\n","return","field_3_pattern",";","\n"],"docstring_tokens":["Get","the","pattern","field","for","the","AreaFormat","record"]}
{"code_tokens":["\n","public","void","setPattern","(","short","field_3_pattern",")","\n","{","\n","this",".","field_3_pattern","=","field_3_pattern",";","\n"],"docstring_tokens":["Set","the","pattern","field","for","the","AreaFormat","record"]}
{"code_tokens":["\n","public","short","getFormatFlags","(",")","\n","{","\n","return","field_4_formatFlags",";","\n"],"docstring_tokens":["Get","the","format","flags","field","for","the","AreaFormat","record"]}
{"code_tokens":["\n","public","void","setFormatFlags","(","short","field_4_formatFlags",")","\n","{","\n","this",".","field_4_formatFlags","=","field_4_formatFlags",";","\n"],"docstring_tokens":["Set","the","format","flags","field","for","the","AreaFormat","record"]}
{"code_tokens":["\n","public","short","getForecolorIndex","(",")","\n","{","\n","return","field_5_forecolorIndex",";","\n"],"docstring_tokens":["Get","the","forecolor","index","field","for","the","AreaFormat","record"]}
{"code_tokens":["\n","public","void","setForecolorIndex","(","short","field_5_forecolorIndex",")","\n","{","\n","this",".","field_5_forecolorIndex","=","field_5_forecolorIndex",";","\n"],"docstring_tokens":["Set","the","forecolor","index","field","for","the","AreaFormat","record"]}
{"code_tokens":["\n","public","short","getBackcolorIndex","(",")","\n","{","\n","return","field_6_backcolorIndex",";","\n"],"docstring_tokens":["Get","the","backcolor","index","field","for","the","AreaFormat","record"]}
{"code_tokens":["\n","public","void","setBackcolorIndex","(","short","field_6_backcolorIndex",")","\n","{","\n","this",".","field_6_backcolorIndex","=","field_6_backcolorIndex",";","\n"],"docstring_tokens":["Set","the","backcolor","index","field","for","the","AreaFormat","record"]}
{"code_tokens":["\n","public","static","int","getEncodedSizeWithoutArrayData","(","Ptg[]","ptgs",")","{","\n","int","result","=","0",";","\n","for","(","Ptg","ptg",":","ptgs",")","{","\n","if","(","ptg","instanceof","ArrayPtg",")","{","\n","result","+=","ArrayPtg",".","PLAIN_TOKEN_SIZE",";","\n","}","else","{","\n","result","+=","ptg",".","getSize","(",")",";","\n","}","\n","}","\n","return","result",";","\n"],"docstring_tokens":["Used","to","calculate","value","that","should","be","encoded","at","the","start","of","the","encoded","Ptg","token","array;"]}
{"code_tokens":["\n","@Override\n","public","Iterator<XSLFShape>","iterator","(",")","{","\n","return","_shapes",".","iterator","(",")",";","\n"],"docstring_tokens":["Returns","an","iterator","over","the","shapes","in","this","sheet"]}
{"code_tokens":["\n","private","void","removeBorders","(","CellRangeAddress","range",")","{","\n","Set<String>","properties","=","new","HashSet<>","(",")",";","\n","properties",".","add","(","CellUtil",".","BORDER_TOP",")",";","\n","properties",".","add","(","CellUtil",".","BORDER_BOTTOM",")",";","\n","properties",".","add","(","CellUtil",".","BORDER_LEFT",")",";","\n","properties",".","add","(","CellUtil",".","BORDER_RIGHT",")",";","\n","for","(","int","row","=","range",".","getFirstRow","(",")",";","row","<=","range",".","getLastRow","(",")",";","row++",")","{","\n","for","(","int","col","=","range",".","getFirstColumn","(",")",";","col","<=","range\n",".","getLastColumn","(",")",";","col++",")","{","\n","removeProperties","(","row,","col,","properties",")",";","\n","}","\n","}","\n","removeBorderColors","(","range",")",";","\n"],"docstring_tokens":["Removes","all","border","properties","from","this","PropertyTemplate","for","the","specified","range"]}
{"code_tokens":["\n","private","void","addProperty","(","int","row,","int","col,","String","property,","short","value",")","{","\n","addProperty","(","row,","col,","property,","Short",".","valueOf","(","value",")",")",";","\n"],"docstring_tokens":["Adds","a","property","to","this","PropertyTemplate","for","a","given","cell"]}
{"code_tokens":["\n","private","void","removeProperties","(","int","row,","int","col,","Set<String>","properties",")","{","\n","CellAddress","cell","=","new","CellAddress","(","row,","col",")",";","\n","Map<String,","Object>","cellProperties","=","_propertyTemplate",".","get","(","cell",")",";","\n","if","(","cellProperties","!=","null",")","{","\n","cellProperties",".","keySet","(",")",".","removeAll","(","properties",")",";","\n","if","(","cellProperties",".","isEmpty","(",")",")","{","\n","_propertyTemplate",".","remove","(","cell",")",";","\n","}","else","{","\n","_propertyTemplate",".","put","(","cell,","cellProperties",")",";","\n","}","\n","}","\n"],"docstring_tokens":["Removes","a","set","of","properties","from","this","PropertyTemplate","for","a","given","cell"]}
{"code_tokens":["\n","public","static","ChunkHeader","createChunkHeader","(","int","documentVersion,","byte[]","data,","int","offset",")","{","\n","if","(","documentVersion",">=","6",")","{","\n","ChunkHeaderV6","ch",";","\n","if","(","documentVersion",">","6",")","{","\n","ch","=","new","ChunkHeaderV11","(",")",";","\n","}","else","{","\n","ch","=","new","ChunkHeaderV6","(",")",";","\n","}","\n","ch",".","setType","(","(","int",")","LittleEndian",".","getUInt","(","data,","offset",")",")",";","\n","ch",".","setId","(","(","int",")","LittleEndian",".","getUInt","(","data,","offset","+","4",")",")",";","\n","ch",".","setUnknown1","(","(","int",")","LittleEndian",".","getUInt","(","data,","offset","+","8",")",")",";","\n","ch",".","setLength","(","(","int",")","LittleEndian",".","getUInt","(","data,","offset","+","12",")",")",";","\n","ch",".","setUnknown2","(","LittleEndian",".","getShort","(","data,","offset","+","16",")",")",";","\n","ch",".","setUnknown3","(","LittleEndian",".","getUByte","(","data,","offset","+","18",")",")",";","\n\n","return","ch",";","\n","}","else","if","(","documentVersion","==","5","||","documentVersion","==","4",")","{","\n","ChunkHeaderV4V5","ch","=","new","ChunkHeaderV4V5","(",")",";","\n\n","ch",".","setType","(","LittleEndian",".","getShort","(","data,","offset",")",")",";","\n","ch",".","setId","(","LittleEndian",".","getShort","(","data,","offset","+","2",")",")",";","\n","ch",".","setUnknown2","(","LittleEndian",".","getUByte","(","data,","offset","+","4",")",")",";","\n","ch",".","setUnknown3","(","LittleEndian",".","getUByte","(","data,","offset","+","5",")",")",";","\n","ch",".","setUnknown1","(","LittleEndian",".","getShort","(","data,","offset","+","6",")",")",";","\n","ch",".","setLength","(","Math",".","toIntExact","(","LittleEndian",".","getUInt","(","data,","offset","+","8",")",")",")",";","\n\n","return","ch",";","\n","}","else","{","\n","throw","new","OldVisioFormatException","(","\"Visio","files","with","versions","below","4","are","not","supported,","yours","was","\"","+","documentVersion",")",";","\n","}","\n"],"docstring_tokens":["Creates","the","appropriate","ChunkHeader","for","the","Chunk","Header","at","the","given","location,","for","the","given","document","version"]}
{"code_tokens":["\n","public","int","getIndentAt","(","int","offset",")","{","\n","int","charsUntil","=","0",";","\n","for","(","IndentProp","prop",":","indents",")","{","\n","charsUntil","+=","prop",".","getCharactersCovered","(",")",";","\n","if","(","offset","<","charsUntil",")","{","\n","return","prop",".","getIndentLevel","(",")",";","\n","}","\n","}","\n","return","-1",";","\n"],"docstring_tokens":["Returns","the","indent","that","applies","at","the","given","text","offset"]}
{"code_tokens":["\n","private","CellFormatType","getCellFormatType","(","Matcher","matcher",")","{","\n","String","fdesc","=","matcher",".","group","(","SPECIFICATION_GROUP",")",";","\n","return","formatType","(","fdesc",")",";","\n"],"docstring_tokens":["Returns","the","CellFormatType","object","implied","by","the","format","specification","for","the","format","part"]}
{"code_tokens":["\n","private","CellFormatter","getFormatter","(","Locale","locale,","Matcher","matcher",")","{","\n","String","fdesc","=","matcher",".","group","(","SPECIFICATION_GROUP",")",";","\n\n","//","For","now,","we","don't","support","localised","currencies,","so","simplify","if","there\n","Matcher","currencyM","=","CURRENCY_PAT",".","matcher","(","fdesc",")",";","\n","if","(","currencyM",".","find","(",")",")","{","\n","String","currencyPart","=","currencyM",".","group","(","1",")",";","\n","String","currencyRepl",";","\n","if","(","currencyPart",".","startsWith","(","\"[$-\"",")",")","{","\n","//","Default","$","in","a","different","locale\n","currencyRepl","=","\"$\"",";","\n","}","else","if","(","!currencyPart",".","contains","(","\"-\"",")",")","{","\n","//","Accounting","formats","such","as","USD","[$USD]\n","currencyRepl","=","currencyPart",".","substring","(","2,","currencyPart",".","indexOf","(","\"]\"",")",")",";","\n","}","else","{","\n","currencyRepl","=","currencyPart",".","substring","(","2,","currencyPart",".","lastIndexOf","(","'-'",")",")",";","\n","}","\n","fdesc","=","fdesc",".","replace","(","currencyPart,","currencyRepl",")",";","\n","}","\n\n","//","Build","a","formatter","for","this","simplified","string\n","return","type",".","formatter","(","locale,","fdesc",")",";","\n"],"docstring_tokens":["Returns","the","formatter","object","implied","by","the","format","specification","for","the","format","part"]}
{"code_tokens":["\n","public","CellFormatResult","apply","(","Object","value",")","{","\n","boolean","applies","=","applies","(","value",")",";","\n","String","text",";","\n","Color","textColor",";","\n","if","(","applies",")","{","\n","text","=","format",".","format","(","value",")",";","\n","textColor","=","color",";","\n","}","else","{","\n","text","=","format",".","simpleFormat","(","value",")",";","\n","textColor","=","null",";","\n","}","\n","return","new","CellFormatResult","(","applies,","text,","textColor",")",";","\n"],"docstring_tokens":["Apply","this","format","part","to","the","given","value"]}
{"code_tokens":["\n","public","CellFormatResult","apply","(","JLabel","label,","Object","value",")","{","\n","CellFormatResult","result","=","apply","(","value",")",";","\n","label",".","setText","(","result",".","text",")",";","\n","if","(","result",".","textColor","!=","null",")","{","\n","label",".","setForeground","(","result",".","textColor",")",";","\n","}","\n","return","result",";","\n"],"docstring_tokens":["Apply","this","format","part","to","the","given","value,","applying","the","result","to","the","given","label"]}
{"code_tokens":["\n","boolean","hasCondition","(",")","{","\n","return","condition","!=","null",";","\n"],"docstring_tokens":["Returns","true","if","this","format","part","has","a","condition"]}
{"code_tokens":["\n","@Override\n","public","int","getFirstRowNum","(",")","{","\n","return","_firstrow",";","\n"],"docstring_tokens":["Gets","the","first","row","on","the","sheet"]}
{"code_tokens":["\n","@Override\n","public","void","addValidationData","(","DataValidation","dataValidation",")","{","\n","if","(","dataValidation","==","null",")","{","\n","throw","new","IllegalArgumentException","(","\"objValidation","must","not","be","null\"",")",";","\n","}","\n","HSSFDataValidation","hssfDataValidation","=","(","HSSFDataValidation",")","dataValidation",";","\n","DataValidityTable","dvt","=","_sheet",".","getOrCreateDataValidityTable","(",")",";","\n\n","DVRecord","dvRecord","=","hssfDataValidation",".","createDVRecord","(","this",")",";","\n","dvt",".","addDataValidation","(","dvRecord",")",";","\n"],"docstring_tokens":["Creates","a","data","validation","object"]}
{"code_tokens":["\n","@Override\n","public","int","addMergedRegion","(","CellRangeAddress","region",")","{","\n","return","addMergedRegion","(","region,","true",")",";","\n"],"docstring_tokens":["Adds","a","merged","region","of","cells","on","a","sheet"]}
{"code_tokens":["\n","@Override\n","public","void","setVerticallyCenter","(","boolean","value",")","{","\n","_sheet",".","getPageSettings","(",")",".","getVCenter","(",")",".","setVCenter","(","value",")",";","\n"],"docstring_tokens":["determines","whether","the","output","is","vertically","centered","on","the","page"]}
{"code_tokens":["\n","@Override\n","public","void","setHorizontallyCenter","(","boolean","value",")","{","\n","_sheet",".","getPageSettings","(",")",".","getHCenter","(",")",".","setHCenter","(","value",")",";","\n"],"docstring_tokens":["determines","whether","the","output","is","horizontally","centered","on","the","page"]}
{"code_tokens":["\n","@Override\n","public","boolean","isRightToLeft","(",")","{","\n","return","_sheet",".","getWindowTwo","(",")",".","getArabic","(",")",";","\n"],"docstring_tokens":["Whether","the","text","is","displayed","in","right-to-left","mode","in","the","window"]}
{"code_tokens":["\n","@Internal\n","public","InternalSheet","getSheet","(",")","{","\n","return","_sheet",";","\n"],"docstring_tokens":["used","internally","in","the","API","to","get","the","low","level","Sheet","record","represented","by","this","Object"]}
{"code_tokens":["\n","public","void","setAlternativeExpression","(","boolean","b",")","{","\n","WSBoolRecord","record","=\n","(","WSBoolRecord",")","_sheet",".","findFirstRecordBySid","(","WSBoolRecord",".","sid",")",";","\n\n","record",".","setAlternateExpression","(","b",")",";","\n"],"docstring_tokens":["whether","alternate","expression","evaluation","is","on"]}
{"code_tokens":["\n","@Override\n","public","void","setSelected","(","boolean","sel",")","{","\n","getSheet","(",")",".","getWindowTwo","(",")",".","setSelected","(","sel",")",";","\n"],"docstring_tokens":["Sets","whether","sheet","is","selected"]}
{"code_tokens":["\n","@Override\n","public","boolean","getProtect","(",")","{","\n","return","getProtectionBlock","(",")",".","isSheetProtected","(",")",";","\n"],"docstring_tokens":["Answer","whether","protection","is","enabled","or","disabled"]}
{"code_tokens":["\n","@Override\n","public","boolean","getScenarioProtect","(",")","{","\n","return","getProtectionBlock","(",")",".","isScenarioProtected","(",")",";","\n"],"docstring_tokens":["Answer","whether","scenario","protection","is","enabled","or","disabled"]}
{"code_tokens":["\n","@Override\n","public","void","protectSheet","(","String","password",")","{","\n","getProtectionBlock","(",")",".","protectSheet","(","password,","true,","true",")",";","//protect","objs&scenarios","(","normal",")","\n"],"docstring_tokens":["Sets","the","protection","enabled","as","well","as","the","password"]}
{"code_tokens":["\n","private","void","showInPane","(","short","toprow,","short","leftcol",")","{","\n","_sheet",".","setTopRow","(","toprow",")",";","\n","_sheet",".","setLeftCol","(","leftcol",")",";","\n"],"docstring_tokens":["Sets","desktop","window","pane","display","area,","when","the","file","is","first","opened","in","a","viewer"]}
{"code_tokens":["\n","@Override\n","public","void","removeRowBreak","(","int","row",")","{","\n","_sheet",".","getPageSettings","(",")",".","removeRowBreak","(","row",")",";","\n"],"docstring_tokens":["Removes","the","page","break","at","the","indicated","row"]}
{"code_tokens":["\n","public","void","dumpDrawingRecords","(","boolean","fat,","PrintWriter","pw",")","{","\n","_sheet",".","aggregateDrawingRecords","(","_book",".","getDrawingManager","(",")",",","false",")",";","\n\n","EscherAggregate","r","=","(","EscherAggregate",")","getSheet","(",")",".","findFirstRecordBySid","(","EscherAggregate",".","sid",")",";","\n","List<EscherRecord>","escherRecords","=","r",".","getEscherRecords","(",")",";","\n","for","(","EscherRecord","escherRecord",":","escherRecords",")","{","\n","if","(","fat",")","{","\n","pw",".","println","(","escherRecord",")",";","\n","}","else","{","\n","escherRecord",".","display","(","pw,","0",")",";","\n","}","\n","}","\n","pw",".","flush","(",")",";","\n"],"docstring_tokens":["Aggregates","the","drawing","records","and","dumps","the","escher","record","hierarchy","to","the","standard","output"]}
{"code_tokens":["\n","public","EscherAggregate","getDrawingEscherAggregate","(",")","{","\n","_book",".","findDrawingGroup","(",")",";","\n\n","//","If","there's","now","no","drawing","manager,","then","there's\n","//","no","drawing","escher","records","on","the","workbook\n","if","(","_book",".","getDrawingManager","(",")","==","null",")","{","\n","return","null",";","\n","}","\n\n","int","found","=","_sheet",".","aggregateDrawingRecords","(","\n","_book",".","getDrawingManager","(",")",",","false\n",")",";","\n","if","(","found","==","-1",")","{","\n","//","Workbook","has","drawing","stuff,","but","this","sheet","doesn't\n","return","null",";","\n","}","\n\n","//","Grab","our","aggregate","record,","and","wire","it","up\n","return","(","EscherAggregate",")","_sheet",".","findFirstRecordBySid","(","EscherAggregate",".","sid",")",";","\n"],"docstring_tokens":["Returns","the","agregate","escher","records","for","this","sheet,","it","there","is","one"]}
{"code_tokens":["\n","@Override\n","public","HSSFPatriarch","getDrawingPatriarch","(",")","{","\n","_patriarch","=","getPatriarch","(","false",")",";","\n","return","_patriarch",";","\n"],"docstring_tokens":["This","will","hold","any","graphics","or","charts","for","the","sheet"]}
{"code_tokens":["\n","@Override\n","public","void","groupColumn","(","int","fromColumn,","int","toColumn",")","{","\n","_sheet",".","groupColumnRange","(","fromColumn,","toColumn,","true",")",";","\n"],"docstring_tokens":["Create","an","outline","for","the","provided","column","range"]}
{"code_tokens":["\n","@Override\n","public","void","groupRow","(","int","fromRow,","int","toRow",")","{","\n","_sheet",".","groupRowRange","(","fromRow,","toRow,","true",")",";","\n"],"docstring_tokens":["Tie","a","range","of","cell","together","so","that","they","can","be","collapsed","or","expanded"]}
{"code_tokens":["\n","@Override\n","public","HSSFComment","getCellComment","(","CellAddress","ref",")","{","\n","return","findCellComment","(","ref",".","getRow","(",")",",","ref",".","getColumn","(",")",")",";","\n"],"docstring_tokens":["Returns","cell","comment","for","the","specified","row","and","column"]}
{"code_tokens":["\n","@Override\n","public","HSSFHyperlink","getHyperlink","(","int","row,","int","column",")","{","\n","for","(","RecordBase","rec",":","_sheet",".","getRecords","(",")",")","{","\n","if","(","rec","instanceof","HyperlinkRecord",")","{","\n","HyperlinkRecord","link","=","(","HyperlinkRecord",")","rec",";","\n","if","(","link",".","getFirstColumn","(",")","==","column","&&","link",".","getFirstRow","(",")","==","row",")","{","\n","return","new","HSSFHyperlink","(","link",")",";","\n","}","\n","}","\n","}","\n","return","null",";","\n"],"docstring_tokens":["Get","a","Hyperlink","in","this","sheet","anchored","at","row,","column"]}
{"code_tokens":["\n","public","void","walkEscherDDF","(","int","indent,","int","pos,","int","len",")","{","\n","if","(","len","<","8",")","{","\n","return",";","\n","}","\n\n","final","String","ind","=","(","indent","==","0",")","?","\"%1$s\"",":","\"%1$\"","+","indent","+","\"s\"",";","\n\n","byte[]","contents","=","IOUtils",".","safelyClone","(","docstream,","pos,","len,","MAX_RECORD_LENGTH",")",";","\n","DefaultEscherRecordFactory","erf","=","new","HSLFEscherRecordFactory","(",")",";","\n","EscherRecord","record","=","erf",".","createRecord","(","contents,","0",")",";","\n\n","//","For","now,","try","filling","in","the","fields\n","record",".","fillFields","(","contents,","0,","erf",")",";","\n\n","long","atomType","=","LittleEndian",".","getUShort","(","contents,","2",")",";","\n","//","This","lacks","the","8","byte","header","size\n","long","atomLen","=","LittleEndian",".","getUShort","(","contents,","4",")",";","\n","//","This","(","should",")","include","the","8","byte","header","size\n","int","recordLen","=","record",".","getRecordSize","(",")",";","\n\n","String","fmt","=","ind","+","\"At","position","%2$d","(","%2$04x",")",":","type","is","%3$d","(","%3$04x",")",",","len","is","%4$d","(","%4$04x",")","(","%5$d",")","-","record","claims","%6$d\"",";","\n","out",".","println","(","String",".","format","(","Locale",".","ROOT,","fmt,","\"\",","pos,","atomType,","atomLen,","atomLen","+","8,","recordLen",")",")",";","\n\n\n","//","Check","for","corrupt","/","lying","ones\n","if","(","recordLen","!=","8","&&","(","recordLen","!=","(","atomLen","+","8",")",")",")","{","\n","out",".","println","(","String",".","format","(","Locale",".","ROOT,","ind","+","\"**","Atom","length","of","$2d","(","$3d",")","doesn't","match","record","length","of","%4d\",","\"\",","atomLen,","atomLen","+","8,","recordLen",")",")",";","\n","}","\n\n","//","Print","the","record's","details\n","String","recordStr","=","record",".","toString","(",")",".","replace","(","\"\\n\",","String",".","format","(","Locale",".","ROOT,","\"\\n\"","+","ind,","\"\"",")",")",";","\n","out",".","println","(","String",".","format","(","Locale",".","ROOT,","ind","+","\"%2$s\",","\"\",","recordStr",")",")",";","\n\n","if","(","record","instanceof","EscherContainerRecord",")","{","\n","walkEscherDDF","(","(","indent","+","3",")",",","pos","+","8,","(","int",")","atomLen",")",";","\n","}","\n\n","//","Handle","records","that","seem","to","lie\n","if","(","atomType","==","61451L",")","{","\n","//","Normally","claims","a","size","of","8\n","recordLen","=","(","int",")","atomLen","+","8",";","\n","}","\n","if","(","atomType","==","61453L",")","{","\n","//","Returns","EscherContainerRecord,","but","really","msofbtClientTextbox\n","recordLen","=","(","int",")","atomLen","+","8",";","\n","record",".","fillFields","(","contents,","0,","erf",")",";","\n","if","(","!","(","record","instanceof","EscherTextboxRecord",")",")","{","\n","out",".","println","(","String",".","format","(","Locale",".","ROOT,","ind","+","\"%2$s\",","\"\",","\"**","Really","a","msofbtClientTextbox","!\"",")",")",";","\n","}","\n","}","\n\n","//","Decide","on","what","to","do,","based","on","how","the","lengths","match","up\n","if","(","recordLen","==","8","&&","atomLen",">","8",")","{","\n","//","Assume","it","has","children,","rather","than","being","corrupted\n","walkEscherDDF","(","(","indent","+","3",")",",","pos","+","8,","(","int",")","atomLen",")",";","\n\n","//","Wind","on","our","length","+","our","header\n","pos","+=","atomLen",";","\n","pos","+=","8",";","\n","len","-=","atomLen",";","\n","len","-=","8",";","\n","}","else","{","\n","//","No","children,","wind","on","our","real","length\n","pos","+=","atomLen",";","\n","pos","+=","8",";","\n","len","-=","atomLen",";","\n","len","-=","8",";","\n","}","\n\n","//","Move","on","to","the","next","one,","if","we're","not","at","the","end","yet\n","if","(","len",">=","8",")","{","\n","walkEscherDDF","(","indent,","pos,","len",")",";","\n","}","\n"],"docstring_tokens":["Use","the","DDF","code","to","walk","the","Escher","records"]}
{"code_tokens":["\n","protected","int","readHeader","(","byte[]","data,","int","offset",")","{","\n","_options","=","LittleEndian",".","getShort","(","data,","offset",")",";","\n","_recordId","=","LittleEndian",".","getShort","(","data,","offset","+","2",")",";","\n","return","LittleEndian",".","getInt","(","data,","offset","+","4",")",";","\n"],"docstring_tokens":["Reads","the","8","byte","header","information","and","populates","the","options","and","recordId","records"]}
{"code_tokens":["\n","public","byte[]","serialize","(",")","\n","{","\n","byte[]","retval","=","new","byte[getRecordSize","(",")","]",";","\n\n","serialize","(","0,","retval",")",";","\n","return","retval",";","\n"],"docstring_tokens":["Serializes","to","a","new","byte","array"]}
{"code_tokens":["\n","public","void","display","(","PrintWriter","w,","int","indent",")","\n","{","\n","for","(","int","i","=","0",";","i","<","indent","*","4",";","i++",")","{","\n","w",".","print","(","'","'",")",";","\n","}","\n","w",".","println","(","getRecordName","(",")",")",";","\n"],"docstring_tokens":["The","display","methods","allows","escher","variables","to","print","the","record","names","according","to","their","hierarchy"]}
{"code_tokens":["\n","public","short","getInstance","(",")","\n","{","\n","return","fInstance",".","getShortValue","(","_options",")",";","\n"],"docstring_tokens":["Returns","the","instance","part","of","the","option","record"]}
{"code_tokens":["\n","public","void","setInstance","(","short","value",")","\n","{","\n","_options","=","fInstance",".","setShortValue","(","_options,","value",")",";","\n"],"docstring_tokens":["Sets","the","instance","part","of","record"]}
{"code_tokens":["\n","public","short","getVersion","(",")","\n","{","\n","return","fVersion",".","getShortValue","(","_options",")",";","\n"],"docstring_tokens":["Returns","the","version","part","of","the","option","record"]}
{"code_tokens":["\n","public","void","setVersion","(","short","value",")","\n","{","\n","_options","=","fVersion",".","setShortValue","(","_options,","value",")",";","\n"],"docstring_tokens":["Sets","the","version","part","of","record"]}
{"code_tokens":["\n","public","static","Dimension","getDimensionFromAnchor","(","Picture","picture",")","{","\n","ClientAnchor","anchor","=","picture",".","getClientAnchor","(",")",";","\n","boolean","isHSSF","=","(","anchor","instanceof","HSSFClientAnchor",")",";","\n","Sheet","sheet","=","picture",".","getSheet","(",")",";","\n\n","//","default","to","image","size","(","in","pixel",")",",","if","the","anchor","is","only","specified","for","Col1/Row1\n","Dimension","imgSize","=","null",";","\n","if","(","anchor",".","getCol2","(",")","<","anchor",".","getCol1","(",")","||","anchor",".","getRow2","(",")","<","anchor",".","getRow1","(",")",")","{","\n","PictureData","data","=","picture",".","getPictureData","(",")",";","\n","imgSize","=","getImageDimension","(","new","UnsynchronizedByteArrayInputStream","(","data",".","getData","(",")",")",",","data",".","getPictureType","(",")",")",";","\n","}","\n\n","int","w","=","getDimFromCell","(","imgSize","==","null","?","0",":","imgSize",".","getWidth","(",")",",","anchor",".","getCol1","(",")",",","anchor",".","getDx1","(",")",",","anchor",".","getCol2","(",")",",","anchor",".","getDx2","(",")",",\n","isHSSF","?","WIDTH_UNITS",":","0,","sheet::getColumnWidthInPixels",")",";","\n\n","int","h","=","getDimFromCell","(","imgSize","==","null","?","0",":","imgSize",".","getHeight","(",")",",","anchor",".","getRow1","(",")",",","anchor",".","getDy1","(",")",",","anchor",".","getRow2","(",")",",","anchor",".","getDy2","(",")",",\n","isHSSF","?","HEIGHT_UNITS",":","0,","(","row",")","->","getRowHeightInPixels","(","sheet,","row",")",")",";","\n\n","return","new","Dimension","(","w,","h",")",";","\n"],"docstring_tokens":["Calculates","the","dimensions","in","EMUs","for","the","anchor","of","the","given","picture"]}
{"code_tokens":["\n","@Override\n","public","void","updateOtherRecordReferences","(","Map<Integer,Integer>","oldToNewReferencesLookup",")","{","\n","//","Look","up","the","new","positions","of","our","preceding","UserEditAtomOffset\n","if","(","lastUserEditAtomOffset","!=","0",")","{","\n","Integer","newLocation","=","oldToNewReferencesLookup",".","get","(","Integer",".","valueOf","(","lastUserEditAtomOffset",")",")",";","\n","if","(","newLocation","==","null",")","{","\n","throw","new","HSLFException","(","\"Couldn't","find","the","new","location","of","the","UserEditAtom","that","used","to","be","at","\"","+","lastUserEditAtomOffset",")",";","\n","}","\n","lastUserEditAtomOffset","=","newLocation",".","intValue","(",")",";","\n","}","\n\n","//","Ditto","for","our","PersistPtr\n","Integer","newLocation","=","oldToNewReferencesLookup",".","get","(","Integer",".","valueOf","(","persistPointersOffset",")",")",";","\n","if","(","newLocation","==","null",")","{","\n","throw","new","HSLFException","(","\"Couldn't","find","the","new","location","of","the","PersistPtr","that","used","to","be","at","\"","+","persistPointersOffset",")",";","\n","}","\n","persistPointersOffset","=","newLocation",".","intValue","(",")",";","\n"],"docstring_tokens":["At","write-out","time,","update","the","references","to","PersistPtrs","and","other","UserEditAtoms","to","point","to","their","new","positions"]}
{"code_tokens":["\n","private","static","void","confirmCycleErrorCode","(","CellValue","cellValue",")","{","\n","assertSame","(","CellType",".","ERROR,","cellValue",".","getCellType","(",")",")",";","\n","assertEquals","(","ErrorEval",".","CIRCULAR_REF_ERROR",".","getErrorCode","(",")",",","cellValue",".","getErrorValue","(",")",")",";","\n"],"docstring_tokens":["Makes","sure","that","the","specified","evaluated","cell","value","represents","a","circular","reference","error"]}
{"code_tokens":["\n","private","void","updateFormula","(","XSSFCell","cell,","String","oldName,","String","newName",")","{","\n","CTCellFormula","f","=","cell",".","getCTCell","(",")",".","getF","(",")",";","\n","if","(","f","!=","null",")","{","\n","String","formula","=","f",".","getStringValue","(",")",";","\n","if","(","formula","!=","null","&&","formula",".","length","(",")",">","0",")","{","\n","int","sheetIndex","=","_wb",".","getSheetIndex","(","cell",".","getSheet","(",")",")",";","\n","Ptg[]","ptgs","=","FormulaParser",".","parse","(","formula,","_fpwb,","FormulaType",".","CELL,","sheetIndex,","cell",".","getRowIndex","(",")",")",";","\n","for","(","Ptg","ptg",":","ptgs",")","{","\n","updatePtg","(","ptg,","oldName,","newName",")",";","\n","}","\n","String","updatedFormula","=","FormulaRenderer",".","toFormulaString","(","_fpwb,","ptgs",")",";","\n","if","(","!formula",".","equals","(","updatedFormula",")",")","{","\n","f",".","setStringValue","(","updatedFormula",")",";","\n","}","\n","}","\n","}","\n"],"docstring_tokens":["Parse","cell","formula","and","re-assemble","it","back","using","the","new","sheet","name"]}
{"code_tokens":["\n","private","void","updateName","(","XSSFName","name,","String","oldName,","String","newName",")","{","\n","String","formula","=","name",".","getRefersToFormula","(",")",";","\n","if","(","formula","!=","null",")","{","\n","int","sheetIndex","=","name",".","getSheetIndex","(",")",";","\n","int","rowIndex","=","-1",";","//don't","care\n","Ptg[]","ptgs","=","FormulaParser",".","parse","(","formula,","_fpwb,","FormulaType",".","NAMEDRANGE,","sheetIndex,","rowIndex",")",";","\n","for","(","Ptg","ptg",":","ptgs",")","{","\n","updatePtg","(","ptg,","oldName,","newName",")",";","\n","}","\n","String","updatedFormula","=","FormulaRenderer",".","toFormulaString","(","_fpwb,","ptgs",")",";","\n","if","(","!formula",".","equals","(","updatedFormula",")",")","{","\n","name",".","setRefersToFormula","(","updatedFormula",")",";","\n","}","\n","}","\n"],"docstring_tokens":["Parse","formula","in","the","named","range","and","re-assemble","it","back","using","the","new","sheet","name"]}
{"code_tokens":["\n","private","void","updateDomSheetReference","(","Node","dom,","final","String","oldName,","final","String","newName",")","{","\n","String","value","=","dom",".","getNodeValue","(",")",";","\n","if","(","value","!=","null",")","{","\n","//","make","sure","the","value","contains","the","old","sheet","and","not","a","similar","sheet\n","//","(","ex:","Valid:","'Sheet1'!","or","Sheet1!",";","NotValid:","'Sheet1Test'!","or","Sheet1Test!",")","\n","if","(","value",".","contains","(","oldName+\"!\"",")","||","value",".","contains","(","oldName+\"'!\"",")",")","{","\n","XSSFName","temporary","=","_wb",".","createName","(",")",";","\n","temporary",".","setRefersToFormula","(","value",")",";","\n","updateName","(","temporary,","oldName,","newName",")",";","\n","dom",".","setNodeValue","(","temporary",".","getRefersToFormula","(",")",")",";","\n","_wb",".","removeName","(","temporary",")",";","\n","}","\n","}","\n","NodeList","nl","=","dom",".","getChildNodes","(",")",";","\n","for","(","int","i","=","0",";","i","<","nl",".","getLength","(",")",";","i++",")","{","\n","updateDomSheetReference","(","nl",".","item","(","i",")",",","oldName,","newName",")",";","\n","}","\n"],"docstring_tokens":["Parse","the","DOM","tree","recursively","searching","for","text","containing","reference","to","the","old","sheet","name","and","replacing","it"]}
{"code_tokens":["\n","public","Integer","getFileNameIndex","(","POIXMLDocumentPart","part",")","{","\n","String","regex","=","_defaultName",".","replace","(","\"#\",","\"","(","\\\\d+",")","\"",")",";","\n","return","Integer",".","valueOf","(","part",".","getPackagePart","(",")",".","getPartName","(",")",".","getName","(",")",".","replaceAll","(","regex,","\"$1\"",")",")",";","\n"],"docstring_tokens":["Returns","the","index","of","the","filename","within","the","package","for","the","given","part"]}
{"code_tokens":["\n","@Internal\n","public","void","setBx","(","byte","value",")","\n","{","\n","field_6_flags","=","(","short",")","bx",".","setValue","(","field_6_flags,","value",")",";","\n"],"docstring_tokens":["Sets","the","bx","field","value"]}
{"code_tokens":["\n","@Internal\n","public","void","setBy","(","byte","value",")","\n","{","\n","field_6_flags","=","(","short",")","by",".","setValue","(","field_6_flags,","value",")",";","\n"],"docstring_tokens":["Sets","the","by","field","value"]}
{"code_tokens":["\n","@Internal\n","public","void","setWr","(","byte","value",")","\n","{","\n","field_6_flags","=","(","short",")","wr",".","setValue","(","field_6_flags,","value",")",";","\n"],"docstring_tokens":["Sets","the","wr","field","value"]}
{"code_tokens":["\n","protected","ByteBuffer","getBlockAt","(","final","int","offset",")","throws","IOException","{","\n","//","Which","big","block","is","this?\n","int","byteOffset","=","offset","*","POIFSConstants",".","SMALL_BLOCK_SIZE",";","\n","int","bigBlockNumber","=","byteOffset","/","_filesystem",".","getBigBlockSize","(",")",";","\n","int","bigBlockOffset","=","byteOffset","%","_filesystem",".","getBigBlockSize","(",")",";","\n\n","//","Now","locate","the","data","block","for","it\n","Iterator<Integer>","it","=","_mini_stream",".","getBlockOffsetIterator","(",")",";","\n","for","(","int","i","=","0",";","i","<","bigBlockNumber",";","i++",")","{","\n","it",".","next","(",")",";","\n","}","\n\n","ByteBuffer","dataBlock","=","_filesystem",".","getBlockAt","(","it",".","next","(",")",")",";","\n","assert","(","dataBlock","!=","null",")",";","\n\n","//","Position","ourselves,","and","take","a","slice\n","dataBlock",".","position","(","\n","dataBlock",".","position","(",")","+","bigBlockOffset\n",")",";","\n","ByteBuffer","miniBuffer","=","dataBlock",".","slice","(",")",";","\n","miniBuffer",".","limit","(","POIFSConstants",".","SMALL_BLOCK_SIZE",")",";","\n","return","miniBuffer",";","\n"],"docstring_tokens":["Load","the","block","at","the","given","offset"]}
{"code_tokens":["\n","public","static","SummaryInformation","newSummaryInformation","(",")","{","\n","return","new","SummaryInformation","(",")",";","\n"],"docstring_tokens":["Creates","a","new","summary","information"]}
{"code_tokens":["\n","public","static","DocumentSummaryInformation","newDocumentSummaryInformation","(",")","{","\n","return","new","DocumentSummaryInformation","(",")",";","\n"],"docstring_tokens":["Creates","a","new","document","summary","information"]}
{"code_tokens":["\n","public","static","File","getDirectory","(","File","f",")","{","\n","if","(","f","!=","null",")","{","\n","String","path","=","f",".","getPath","(",")",";","\n","int","num2","=","path",".","length","(",")",";","\n","while","(","--num2",">=","0",")","{","\n","char","ch1","=","path",".","charAt","(","num2",")",";","\n","if","(","ch1","==","File",".","separatorChar",")","{","\n","return","new","File","(","path",".","substring","(","0,","num2",")",")",";","\n","}","\n","}","\n","}","\n","return","null",";","\n"],"docstring_tokens":["Get","the","directory","part","of","the","specified","file","path"]}
{"code_tokens":["\n","public","static","String","getFilename","(","File","file",")","{","\n","if","(","file","!=","null",")","{","\n","String","path","=","file",".","getPath","(",")",";","\n","int","len","=","path",".","length","(",")",";","\n","int","num2","=","len",";","\n","while","(","--num2",">=","0",")","{","\n","char","ch1","=","path",".","charAt","(","num2",")",";","\n","if","(","ch1","==","File",".","separatorChar",")","\n","return","path",".","substring","(","num2","+","1,","len",")",";","\n","}","\n","}","\n","return","\"\"",";","\n"],"docstring_tokens":["Get","file","name","from","the","specified","File","object"]}
{"code_tokens":["\n","private","void","cacheExternalWorkbookCells","(","EvaluationCell","evalCell",")","{","\n","//\n","Ptg[]","formulaTokens","=","getEvaluationWorkbook","(",")",".","getFormulaTokens","(","evalCell",")",";","\n","for","(","Ptg","ptg",":","formulaTokens",")","{","\n","if","(","ptg","instanceof","Area3DPxg",")","{","\n","Area3DPxg","area3DPxg","=","(","Area3DPxg",")","ptg",";","\n","if","(","area3DPxg",".","getExternalWorkbookNumber","(",")",">","0",")","{","\n","EvaluationWorkbook",".","ExternalSheet","externalSheet","=","getEvaluationWorkbook","(",")",".","getExternalSheet","(","area3DPxg",".","getSheetName","(",")",",","area3DPxg",".","getLastSheetName","(",")",",","area3DPxg",".","getExternalWorkbookNumber","(",")",")",";","\n\n","XSSFCell","xssfCell","=","(","(","XSSFEvaluationCell",")","evalCell",")",".","getXSSFCell","(",")",";","\n","XSSFWorkbook","externalWorkbook","=","(","XSSFWorkbook",")","xssfCell",".","getSheet","(",")",".","getWorkbook","(",")",".","getCreationHelper","(",")",".","getReferencedWorkbooks","(",")",".","get","(","externalSheet",".","getWorkbookName","(",")",")",";","\n","ExternalLinksTable","externalLinksTable","=","xssfCell",".","getSheet","(",")",".","getWorkbook","(",")",".","getExternalLinksTable","(",")",".","get","(","area3DPxg",".","getExternalWorkbookNumber","(",")","-","1",")",";","\n\n","int","firstSheet","=","externalWorkbook",".","getSheetIndex","(","area3DPxg",".","getSheetName","(",")",")",";","\n","int","lastSheet","=","firstSheet",";","\n","if","(","area3DPxg",".","getLastSheetName","(",")","!=","null",")","{","\n","lastSheet","=","externalWorkbook",".","getSheetIndex","(","area3DPxg",".","getLastSheetName","(",")",")",";","\n","}","\n\n","for","(","int","sheetIndex","=","firstSheet",";","sheetIndex","<=","lastSheet",";","sheetIndex++",")","{","\n","XSSFSheet","sheet","=","externalWorkbook",".","getSheetAt","(","sheetIndex",")",";","\n","int","firstRow","=","area3DPxg",".","getFirstRow","(",")",";","\n","int","lastRow","=","area3DPxg",".","getLastRow","(",")",";","\n","for","(","int","rowIndex","=","firstRow",";","rowIndex","<=","lastRow",";","rowIndex++",")","{","\n","XSSFRow","row","=","sheet",".","getRow","(","rowIndex",")",";","\n","int","firstColumn","=","area3DPxg",".","getFirstColumn","(",")",";","\n","int","lastColumn","=","area3DPxg",".","getLastColumn","(",")",";","\n","for","(","int","cellIndex","=","firstColumn",";","cellIndex","<=","lastColumn",";","cellIndex++",")","{","\n","XSSFCell","cell","=","row",".","getCell","(","cellIndex",")",";","\n","String","cellValue","=","cell",".","getRawValue","(",")",";","\n","String","cellR","=","new","CellReference","(","cell",")",".","formatAsString","(","false",")",";","\n","externalLinksTable",".","cacheData","(","sheet",".","getSheetName","(",")",",","(","long",")","rowIndex","+","1,","cellR,","cellValue",")",";","\n","}","\n","}","\n\n","}","\n","}","\n\n","}","\n","}","\n"],"docstring_tokens":["cache","cell","value","of","external","workbook"]}
{"code_tokens":["\n","public","boolean","isBold","(",")","\n","{","\n","return","fontFormatting",".","isFontWeightModified","(",")","&&","fontFormatting",".","isBold","(",")",";","\n"],"docstring_tokens":["get","whether","the","font","weight","is","set","to","bold","or","not"]}
{"code_tokens":["\n","@Override\n","public","boolean","markSupported","(",")","{","\n","return","true",";","\n"],"docstring_tokens":["Tests","if","this","input","stream","supports","the","mark","and","reset","methods"]}
{"code_tokens":["\n","public","void","demonstrateMethodCalls","(","String","outputFilename",")","{","\n","try","(","HSSFWorkbook","workbook","=","new","HSSFWorkbook","(",")",")","{","\n","HSSFSheet","sheet","=","workbook",".","createSheet","(","\"In","Cell","Lists\"",")",";","\n","HSSFRow","row","=","sheet",".","createRow","(","0",")",";","\n\n","//","Create","a","cell","at","A1","and","insert","a","single,","bulleted,","item","into\n","//","that","cell",".","\n","HSSFCell","cell","=","row",".","createCell","(","0",")",";","\n","this",".","bulletedItemInCell","(","workbook,","\"List","Item\",","cell",")",";","\n\n","//","Create","a","cell","at","A2","and","insert","a","plain","list","-","that","is","one\n","//","whose","items","are","neither","bulleted","or","numbered","-","into","that","cell",".","\n","row","=","sheet",".","createRow","(","1",")",";","\n","cell","=","row",".","createCell","(","0",")",";","\n","List<String>","listItems","=","new","ArrayList<>","(",")",";","\n","listItems",".","add","(","\"List","Item","One",".","\"",")",";","\n","listItems",".","add","(","\"List","Item","Two",".","\"",")",";","\n","listItems",".","add","(","\"List","Item","Three",".","\"",")",";","\n","listItems",".","add","(","\"List","Item","Four",".","\"",")",";","\n","this",".","listInCell","(","workbook,","listItems,","cell",")",";","\n","//","The","row","height","and","cell","width","are","set","here","to","ensure","that","the\n","//","list","may","be","seen",".","\n","row",".","setHeight","(","(","short",")","1100",")",";","\n","sheet",".","setColumnWidth","(","0,","9500",")",";","\n\n","//","Create","a","cell","at","A3","and","insert","a","numbered","list","into","that","cell",".","\n","//","Note","that","a","couple","of","items","have","been","added","to","the","listItems\n","//","ArrayList\n","row","=","sheet",".","createRow","(","2",")",";","\n","cell","=","row",".","createCell","(","0",")",";","\n","listItems",".","add","(","\"List","Item","Five",".","\"",")",";","\n","listItems",".","add","(","\"List","Item","Six",".","\"",")",";","\n","this",".","numberedListInCell","(","workbook,","listItems,","cell,","1,","2",")",";","\n","row",".","setHeight","(","(","short",")","1550",")",";","\n\n","//","Create","a","cell","at","A4","and","insert","a","numbered","list","into","that","cell",".","\n","//","Note","that","a","couple","of","items","have","been","added","to","the","listItems\n","//","ArrayList\n","row","=","sheet",".","createRow","(","3",")",";","\n","cell","=","row",".","createCell","(","0",")",";","\n","listItems",".","add","(","\"List","Item","Seven",".","\"",")",";","\n","listItems",".","add","(","\"List","Item","Eight",".","\"",")",";","\n","listItems",".","add","(","\"List","Item","Nine",".","\"",")",";","\n","listItems",".","add","(","\"List","Item","Ten",".","\"",")",";","\n","this",".","bulletedListInCell","(","workbook,","listItems,","cell",")",";","\n","row",".","setHeight","(","(","short",")","2550",")",";","\n\n","//","Insert","a","plain,","multi-level","list","into","cell","A5",".","Note","that\n","//","the","major","difference","here","is","that","the","list","items","are","passed","as\n","//","an","ArrayList","of","MultiLevelListItems",".","Note","that","an","ArrayList\n","//","of","instances","of","an","inner","class","was","used","here","in","preference","to\n","//","a","Hashtable","or","HashMap","as","the","ArrayList","will","preserve","the\n","//","ordering","of","the","items","added","to","it",";","the","first","item","added","will\n","//","be","the","first","item","recovered","and","the","last","item","added,","the","last\n","//","item","recovered",".","Alternatively,","a","LinkedHashMap","could","be","used\n","//","to","preserve","order",".","\n","row","=","sheet",".","createRow","(","4",")",";","\n","cell","=","row",".","createCell","(","0",")",";","\n","List<MultiLevelListItem>","multiLevelListItems","=","new","ArrayList<>","(",")",";","\n","listItems","=","new","ArrayList<>","(",")",";","\n","listItems",".","add","(","\"ML","List","Item","One","-","Sub","Item","One",".","\"",")",";","\n","listItems",".","add","(","\"ML","List","Item","One","-","Sub","Item","Two",".","\"",")",";","\n","listItems",".","add","(","\"ML","List","Item","One","-","Sub","Item","Three",".","\"",")",";","\n","listItems",".","add","(","\"ML","List","Item","One","-","Sub","Item","Four",".","\"",")",";","\n","multiLevelListItems",".","add","(","new","MultiLevelListItem","(","\"List","Item","One",".","\",","listItems",")",")",";","\n","//","Passing","either","null","or","an","empty","ArrayList","will","signal","that\n","//","there","are","no","lower","level","items","associated","with","the","top","level\n","//","item\n","multiLevelListItems",".","add","(","new","MultiLevelListItem","(","\"List","Item","Two",".","\",","null",")",")",";","\n","multiLevelListItems",".","add","(","new","MultiLevelListItem","(","\"List","Item","Three",".","\",","null",")",")",";","\n","listItems","=","new","ArrayList<>","(",")",";","\n","listItems",".","add","(","\"ML","List","Item","Four","-","Sub","Item","One",".","\"",")",";","\n","listItems",".","add","(","\"ML","List","Item","Four","-","Sub","Item","Two",".","\"",")",";","\n","listItems",".","add","(","\"ML","List","Item","Four","-","Sub","Item","Three",".","\"",")",";","\n","multiLevelListItems",".","add","(","new","MultiLevelListItem","(","\"List","Item","Four",".","\",","listItems",")",")",";","\n","this",".","multiLevelListInCell","(","workbook,","multiLevelListItems,","cell",")",";","\n","row",".","setHeight","(","(","short",")","2800",")",";","\n\n","//","Insert","a","numbered","multi-level","list","into","cell","A6",".","Note","that","the\n","//","same","ArrayList","as","constructed","for","the","above","plain","multi-level\n","//","list","example","will","be","re-used\n","row","=","sheet",".","createRow","(","5",")",";","\n","cell","=","row",".","createCell","(","0",")",";","\n","this",".","multiLevelNumberedListInCell","(","workbook,","multiLevelListItems,\n","cell,","1,","1,","1,","2",")",";","\n","row",".","setHeight","(","(","short",")","2800",")",";","\n\n","//","Insert","a","numbered","multi-level","list","into","cell","A7",".","Note","that","the\n","//","same","ArrayList","as","constructed","for","the","plain","multi-level","list\n","//","example","will","be","re-used\n","row","=","sheet",".","createRow","(","6",")",";","\n","cell","=","row",".","createCell","(","0",")",";","\n","this",".","multiLevelBulletedListInCell","(","workbook,","multiLevelListItems,","cell",")",";","\n","row",".","setHeight","(","(","short",")","2800",")",";","\n\n","//","Save","the","completed","workbook\n","try","(","FileOutputStream","fos","=","new","FileOutputStream","(","outputFilename",")",")","{","\n","workbook",".","write","(","fos",")",";","\n","}","\n","}","catch","(","IOException","ioEx",")","{","\n","LOG",".","atWarn","(",")",".","withThrowable","(","ioEx",")",".","log","(","\"Unexpected","IOException\"",")",";","\n","}","\n"],"docstring_tokens":["Call","each","of","the","list","creation","methods"]}
{"code_tokens":["\n","public","VerticalAlignment","getVertical","(",")","{","\n","STVerticalAlignment",".","Enum","align","=","cellAlignement",".","getVertical","(",")",";","\n","if","(","align","==","null",")","align","=","STVerticalAlignment",".","BOTTOM",";","\n\n","return","VerticalAlignment",".","values","(",")","[align",".","intValue","(",")","-","1]",";","\n"],"docstring_tokens":["Get","the","type","of","vertical","alignment","for","the","cell"]}
{"code_tokens":["\n","public","HorizontalAlignment","getHorizontal","(",")","{","\n","STHorizontalAlignment",".","Enum","align","=","cellAlignement",".","getHorizontal","(",")",";","\n","if","(","align","==","null",")","align","=","STHorizontalAlignment",".","GENERAL",";","\n\n","return","HorizontalAlignment",".","values","(",")","[align",".","intValue","(",")","-","1]",";","\n"],"docstring_tokens":["Get","the","type","of","horizontal","alignment","for","the","cell"]}
{"code_tokens":["\n","protected","static","short","lookupIndex","(","String","name",")","{","\n","short","ix","=","FunctionMetadataRegistry",".","lookupIndexByName","(","name",".","toUpperCase","(","Locale",".","ROOT",")",")",";","\n","if","(","ix","<","0",")","{","\n","return","FUNCTION_INDEX_EXTERNAL",";","\n","}","\n","return","ix",";","\n"],"docstring_tokens":["Resolves","internal","function","names","into","function","indexes"]}
{"code_tokens":["\n","public","ExControl","getExControl","(",")","{","\n","int","idx","=","getControlIndex","(",")",";","\n","Document","doc","=","getSheet","(",")",".","getSlideShow","(",")",".","getDocumentRecord","(",")",";","\n","ExObjList","lst","=","(","ExObjList",")","doc",".","findFirstOfType","(","RecordTypes",".","ExObjList",".","typeID",")",";","\n","if","(","lst","==","null",")","{","\n","return","null",";","\n","}","\n\n","for","(","Record","ch",":","lst",".","getChildRecords","(",")",")","{","\n","if","(","ch","instanceof","ExControl",")","{","\n","ExControl","c","=","(","ExControl",")","ch",";","\n","if","(","c",".","getExOleObjAtom","(",")",".","getObjID","(",")","==","idx",")","{","\n","return","c",";","\n","}","\n","}","\n","}","\n","return","null",";","\n"],"docstring_tokens":["Document-level","container","that","specifies","information","about","an","ActiveX","control"]}
{"code_tokens":["\n\n","public","int","getFirstRow","(",")","\n","{","\n","return","field_1_first_row",";","\n"],"docstring_tokens":["get","the","first","row","number","for","the","sheet"]}
{"code_tokens":["\n\n","public","int","getLastRow","(",")","\n","{","\n","return","field_2_last_row",";","\n"],"docstring_tokens":["get","the","last","row","number","for","the","sheet"]}
{"code_tokens":["\n\n","public","short","getFirstCol","(",")","\n","{","\n","return","field_3_first_col",";","\n"],"docstring_tokens":["get","the","first","column","number","for","the","sheet"]}
{"code_tokens":["\n\n","public","short","getLastCol","(",")","\n","{","\n","return","field_4_last_col",";","\n"],"docstring_tokens":["get","the","last","col","number","for","the","sheet"]}
{"code_tokens":["\n","public","void","adjustForDelete","(","int","start,","int","length",")","{","\n","int","end","=","start","+","length",";","\n\n","if","(","_cpEnd",">","start",")","{","\n","//","The","start","of","the","change","is","before","we","end\n\n","if","(","_cpStart","<","end",")","{","\n","//","The","delete","was","somewhere","in","the","middle","of","us\n","_cpEnd","=","end",">=","_cpEnd","?","start",":","_cpEnd","-","length",";","\n","_cpStart","=","Math",".","min","(","start,","_cpStart",")",";","\n","}","else","{","\n","//","The","delete","was","before","us\n","_cpEnd","-=","length",";","\n","_cpStart","-=","length",";","\n","}","\n","}","\n"],"docstring_tokens":["Adjust","for","a","deletion","that","can","span","multiple","PropertyNodes"]}
{"code_tokens":["\n","@Override\n","public","List<XWPFParagraph>","getParagraphs","(",")","{","\n","return","paragraphs",";","\n"],"docstring_tokens":["Get","the","list","of","XWPFParagraphs","in","the","footnote"]}
{"code_tokens":["\n","@Override\n","public","Iterator<XWPFParagraph>","iterator","(",")","{","\n","return","paragraphs",".","iterator","(",")",";","\n"],"docstring_tokens":["Get","an","iterator","over","the","XWPFParagraphs","in","the","footnote"]}
{"code_tokens":["\n","@Override\n","public","Spliterator<XWPFParagraph>","spliterator","(",")","{","\n","return","paragraphs",".","spliterator","(",")",";","\n"],"docstring_tokens":["Get","a","spliterator","over","the","XWPFParagraphs","in","the","footnote"]}
{"code_tokens":["\n","@Override\n","public","List<XWPFTable>","getTables","(",")","{","\n","return","tables",";","\n"],"docstring_tokens":["Get","the","list","of","XWPFTables","in","the","footnote"]}
{"code_tokens":["\n","@Override\n","public","XWPFTable","insertNewTbl","(","XmlCursor","cursor",")","{","\n","if","(","isCursorInFtn","(","cursor",")",")","{","\n","String","uri","=","CTTbl",".","type",".","getName","(",")",".","getNamespaceURI","(",")",";","\n","String","localPart","=","\"tbl\"",";","\n","cursor",".","beginElement","(","localPart,","uri",")",";","\n","cursor",".","toParent","(",")",";","\n","CTTbl","t","=","(","CTTbl",")","cursor",".","getObject","(",")",";","\n","XWPFTable","newT","=","new","XWPFTable","(","t,","this",")",";","\n","cursor",".","removeXmlContents","(",")",";","\n","XmlObject","o","=","null",";","\n","while","(","!","(","o","instanceof","CTTbl",")","&&","(","cursor",".","toPrevSibling","(",")",")",")","{","\n","o","=","cursor",".","getObject","(",")",";","\n","}","\n","if","(","!","(","o","instanceof","CTTbl",")",")","{","\n","tables",".","add","(","0,","newT",")",";","\n","}","else","{","\n","int","pos","=","tables",".","indexOf","(","getTable","(","(","CTTbl",")","o",")",")","+","1",";","\n","tables",".","add","(","pos,","newT",")",";","\n","}","\n","int","i","=","0",";","\n","cursor","=","t",".","newCursor","(",")",";","\n","while","(","cursor",".","toPrevSibling","(",")",")","{","\n","o","=","cursor",".","getObject","(",")",";","\n","if","(","o","instanceof","CTP","||","o","instanceof","CTTbl",")","\n","i++",";","\n","}","\n","bodyElements",".","add","(","i,","newT",")",";","\n","XmlCursor","c2","=","t",".","newCursor","(",")",";","\n","try","{","\n","cursor",".","toCursor","(","c2",")",";","\n","cursor",".","toEndToken","(",")",";","\n","}","finally","{","\n","c2",".","dispose","(",")",";","\n","}","\n","return","newT",";","\n","}","\n","return","null",";","\n"],"docstring_tokens":["Insert","a","table","constructed","from","OOXML","table","markup"]}
{"code_tokens":["\n","@Override\n","public","XWPFParagraph","insertNewParagraph","(","final","XmlCursor","cursor",")","{","\n","if","(","isCursorInFtn","(","cursor",")",")","{","\n","String","uri","=","CTP",".","type",".","getName","(",")",".","getNamespaceURI","(",")",";","\n","String","localPart","=","\"p\"",";","\n","cursor",".","beginElement","(","localPart,","uri",")",";","\n","cursor",".","toParent","(",")",";","\n","CTP","p","=","(","CTP",")","cursor",".","getObject","(",")",";","\n","XWPFParagraph","newP","=","new","XWPFParagraph","(","p,","this",")",";","\n","XmlObject","o","=","null",";","\n","while","(","!","(","o","instanceof","CTP",")","&&","(","cursor",".","toPrevSibling","(",")",")",")","{","\n","o","=","cursor",".","getObject","(",")",";","\n","}","\n","if","(","(","!","(","o","instanceof","CTP",")",")","||","o","==","p",")","{","\n","paragraphs",".","add","(","0,","newP",")",";","\n","}","else","{","\n","int","pos","=","paragraphs",".","indexOf","(","getParagraph","(","(","CTP",")","o",")",")","+","1",";","\n","paragraphs",".","add","(","pos,","newP",")",";","\n","}","\n","int","i","=","0",";","\n","XmlCursor","p2","=","p",".","newCursor","(",")",";","\n","try","{","\n","cursor",".","toCursor","(","p2",")",";","\n","}","finally","{","\n","p2",".","dispose","(",")",";","\n","}","\n","while","(","cursor",".","toPrevSibling","(",")",")","{","\n","o","=","cursor",".","getObject","(",")",";","\n","if","(","o","instanceof","CTP","||","o","instanceof","CTTbl",")","\n","i++",";","\n","}","\n","bodyElements",".","add","(","i,","newP",")",";","\n","p2","=","p",".","newCursor","(",")",";","\n","cursor",".","toCursor","(","p2",")",";","\n","cursor",".","toEndToken","(",")",";","\n","p2",".","dispose","(",")",";","\n","return","newP",";","\n","}","\n","return","null",";","\n"],"docstring_tokens":["Add","a","new","XWPFParagraph","at","position","of","the","cursor"]}
{"code_tokens":["\n","public","XWPFTable","addNewTbl","(","CTTbl","table",")","{","\n","CTTbl","newTable","=","ctFtnEdn",".","addNewTbl","(",")",";","\n","newTable",".","set","(","table",")",";","\n","XWPFTable","xTable","=","new","XWPFTable","(","newTable,","this",")",";","\n","tables",".","add","(","xTable",")",";","\n","return","xTable",";","\n"],"docstring_tokens":["Add","a","new","XWPFTable","to","the","end","of","the","footnote"]}
{"code_tokens":["\n","public","XWPFParagraph","addNewParagraph","(","CTP","paragraph",")","{","\n","CTP","newPara","=","ctFtnEdn",".","addNewP","(",")",";","\n","newPara",".","set","(","paragraph",")",";","\n","XWPFParagraph","xPara","=","new","XWPFParagraph","(","newPara,","this",")",";","\n","paragraphs",".","add","(","xPara",")",";","\n","return","xPara",";","\n"],"docstring_tokens":["Add","a","new","XWPFParagraph","to","the","end","of","the","footnote"]}
{"code_tokens":["\n","@Override\n","public","XWPFDocument","getXWPFDocument","(",")","{","\n","return","document",";","\n"],"docstring_tokens":["Get","the","XWPFDocument","the","footnote","is","part","of"]}
{"code_tokens":["\n","@Override\n","public","POIXMLDocumentPart","getPart","(",")","{","\n","return","footnotes",";","\n"],"docstring_tokens":["Get","the","Part","to","which","the","footnote","belongs,","which","you","need","for","adding","relationships","to","other","parts"]}
{"code_tokens":["\n","@Override\n","public","BodyType","getPartType","(",")","{","\n","return","BodyType",".","FOOTNOTE",";","\n"],"docstring_tokens":["Get","the","part","type","BodyType","of","the","footnote"]}
{"code_tokens":["\n","public","XWPFParagraph","createParagraph","(",")","{","\n","XWPFParagraph","p","=","new","XWPFParagraph","(","this",".","ctFtnEdn",".","addNewP","(",")",",","this",")",";","\n","paragraphs",".","add","(","p",")",";","\n","bodyElements",".","add","(","p",")",";","\n\n","//","If","the","paragraph","is","the","first","paragraph","in","the","footnote,\n","//","ensure","that","it","has","a","footnote","reference","run",".","\n\n","if","(","p",".","equals","(","getParagraphs","(",")",".","get","(","0",")",")",")","{","\n","ensureFootnoteRef","(","p",")",";","\n","}","\n","return","p",";","\n"],"docstring_tokens":["Appends","a","new","XWPFParagraph","to","this","footnote"]}
{"code_tokens":["\n","public","XWPFTable","createTable","(",")","{","\n","XWPFTable","table","=","new","XWPFTable","(","ctFtnEdn",".","addNewTbl","(",")",",","this",")",";","\n","if","(","bodyElements",".","isEmpty","(",")",")","{","\n","XWPFParagraph","p","=","createParagraph","(",")",";","\n","ensureFootnoteRef","(","p",")",";","\n","}","\n","bodyElements",".","add","(","table",")",";","\n","tables",".","add","(","table",")",";","\n","return","table",";","\n"],"docstring_tokens":["Appends","a","new","XWPFTable","to","this","footnote"]}
{"code_tokens":["\n","public","XDDFTextRun","appendRegularRun","(","String","text",")","{","\n","CTRegularTextRun","r","=","_p",".","addNewR","(",")",";","\n","r",".","setT","(","text",")",";","\n","CTTextCharacterProperties","rPr","=","r",".","addNewRPr","(",")",";","\n","rPr",".","setLang","(","LocaleUtil",".","getUserLocale","(",")",".","toLanguageTag","(",")",")",";","\n","XDDFTextRun","run","=","new","XDDFTextRun","(","r,","this",")",";","\n","_runs",".","add","(","run",")",";","\n","return","run",";","\n"],"docstring_tokens":["Append","a","new","run","of","text"]}
{"code_tokens":["\n","public","int","getIndentationLevel","(",")","{","\n","if","(","_p",".","isSetPPr","(",")",")","{","\n","return","getProperties","(",")",".","getLevel","(",")",";","\n","}","else","{","\n","return","0",";","\n","}","\n"],"docstring_tokens":["Returns","the","paragraph","indentation","level"]}
{"code_tokens":["\n","public","void","setIndentationLevel","(","Integer","level",")","{","\n","if","(","_p",".","isSetPPr","(",")",")","{","\n","getProperties","(",")",".","setLevel","(","level",")",";","\n","}","\n"],"docstring_tokens":["Specifies","the","paragraph","indentation","level,","between","1","and","9"]}
{"code_tokens":["\n","public","void","setIndentation","(","Double","points",")","{","\n","if","(","points","!=","null","||","_p",".","isSetPPr","(",")",")","{","\n","getOrCreateProperties","(",")",".","setIndentation","(","points",")",";","\n","}","\n"],"docstring_tokens":["Specifies","the","indentation","size","that","will","be","applied","to","the","first","line","of","text","in","the","paragraph"]}
{"code_tokens":["\n","public","void","setDefaultTabSize","(","Double","points",")","{","\n","if","(","points","!=","null","||","_p",".","isSetPPr","(",")",")","{","\n","getOrCreateProperties","(",")",".","setDefaultTabSize","(","points",")",";","\n","}","\n"],"docstring_tokens":["Specifies","the","default","size","for","a","tab","character","within","this","paragraph"]}
{"code_tokens":["\n","public","void","setBulletFont","(","XDDFFont","font",")","{","\n","if","(","font","!=","null","||","_p",".","isSetPPr","(",")",")","{","\n","getOrCreateBulletProperties","(",")",".","setBulletFont","(","font",")",";","\n","}","\n"],"docstring_tokens":["Set","the","font","to","be","used","on","bullet","characters","within","a","given","paragraph"]}
{"code_tokens":["\n","public","static","CFRuleRecord","create","(","HSSFSheet","sheet,","String","formulaText",")","{","\n","Ptg[]","formula1","=","parseFormula","(","formulaText,","sheet",")",";","\n","return","new","CFRuleRecord","(","CONDITION_TYPE_FORMULA,","ComparisonOperator",".","NO_COMPARISON,\n","formula1,","null",")",";","\n"],"docstring_tokens":["Creates","a","new","comparison","operation","rule"]}
{"code_tokens":["\n","public","static","XMLInputFactory","newXMLInputFactory","(",")","{","\n","return","XMLHelper",".","newXMLInputFactory","(",")",";","\n"],"docstring_tokens":["Creates","a","new","StAX","XMLInputFactory,","with","sensible","defaults"]}
{"code_tokens":["\n","public","static","XMLOutputFactory","newXMLOutputFactory","(",")","{","\n","return","XMLHelper",".","newXMLOutputFactory","(",")",";","\n"],"docstring_tokens":["Creates","a","new","StAX","XMLOutputFactory,","with","sensible","defaults"]}
{"code_tokens":["\n","public","static","XMLEventFactory","newXMLEventFactory","(",")","{","\n","return","XMLHelper",".","newXMLEventFactory","(",")",";","\n"],"docstring_tokens":["Creates","a","new","StAX","XMLEventFactory,","with","sensible","defaults"]}
{"code_tokens":["\n","@SuppressWarnings","(","\"WeakerAccess\"",")","\n","public","void","setSuperscript","(","boolean","flag",")","{","\n","setBaselineOffset","(","flag","?","30",".",":","0",".",")",";","\n"],"docstring_tokens":["Set","whether","the","text","in","this","run","is","formatted","as","superscript"]}
{"code_tokens":["\n","@SuppressWarnings","(","\"WeakerAccess\"",")","\n","public","void","setSubscript","(","boolean","flag",")","{","\n","setBaselineOffset","(","flag","?","-25",".","0",":","0",".",")",";","\n"],"docstring_tokens":["Set","whether","the","text","in","this","run","is","formatted","as","subscript"]}
{"code_tokens":["\n","@Internal\n","public","CTTextCharacterProperties","getRPr","(","boolean","create",")","{","\n","if","(","_r","instanceof","CTTextField",")","{","\n","CTTextField","tf","=","(","CTTextField",")","_r",";","\n","if","(","tf",".","isSetRPr","(",")",")","{","\n","return","tf",".","getRPr","(",")",";","\n","}","else","if","(","create",")","{","\n","return","tf",".","addNewRPr","(",")",";","\n","}","\n","}","else","if","(","_r","instanceof","CTTextLineBreak",")","{","\n","CTTextLineBreak","tlb","=","(","CTTextLineBreak",")","_r",";","\n","if","(","tlb",".","isSetRPr","(",")",")","{","\n","return","tlb",".","getRPr","(",")",";","\n","}","else","if","(","create",")","{","\n","return","tlb",".","addNewRPr","(",")",";","\n","}","\n","}","else","{","\n","CTRegularTextRun","tr","=","(","CTRegularTextRun",")","_r",";","\n","if","(","tr",".","isSetRPr","(",")",")","{","\n","return","tr",".","getRPr","(",")",";","\n","}","else","if","(","create",")","{","\n","return","tr",".","addNewRPr","(",")",";","\n","}","\n","}","\n","if","(","_p",".","getXmlObject","(",")",".","isSetPPr","(",")","&&","_p",".","getXmlObject","(",")",".","getPPr","(",")",".","isSetDefRPr","(",")",")","{","\n","return","_p",".","getXmlObject","(",")",".","getPPr","(",")",".","getDefRPr","(",")",";","\n","}","\n","return","null",";","\n"],"docstring_tokens":["Return","the","character","properties"]}
{"code_tokens":["\n","@Override\n","public","int","serialize","(","int","offset,","byte[]","data,","EscherSerializationListener","listener",")","\n","{","\n","listener",".","beforeRecordSerialize","(","offset,","getRecordId","(",")",",","this",")",";","\n","LittleEndian",".","putShort","(","data,","offset,","getOptions","(",")",")",";","\n","LittleEndian",".","putShort","(","data,","offset","+","2,","getRecordId","(",")",")",";","\n","int","remainingBytes","=","8",";","\n","LittleEndian",".","putInt","(","data,","offset","+","4,","remainingBytes",")",";","\n","LittleEndian",".","putInt","(","data,","offset","+","8,","field_1_shapeId",")",";","\n","LittleEndian",".","putInt","(","data,","offset","+","12,","field_2_flags",")",";","\n","listener",".","afterRecordSerialize","(","offset","+","getRecordSize","(",")",",","getRecordId","(",")",",","getRecordSize","(",")",",","this",")",";","\n","return","8","+","8",";","\n"],"docstring_tokens":["This","method","serializes","this","escher","record","into","a","byte","array"]}
{"code_tokens":["\n","public","int","getFlags","(",")","\n","{","\n","return","field_2_flags",";","\n"],"docstring_tokens":["The","flags","that","apply","to","this","shape"]}
{"code_tokens":["\n","public","short","getAxisType","(",")","\n","{","\n","return","field_1_axisType",";","\n"],"docstring_tokens":["Get","the","axis","type","field","for","the","Axis","record"]}
{"code_tokens":["\n","public","void","setAxisType","(","short","field_1_axisType",")","\n","{","\n","this",".","field_1_axisType","=","field_1_axisType",";","\n"],"docstring_tokens":["Set","the","axis","type","field","for","the","Axis","record"]}
{"code_tokens":["\n","public","int","getReserved1","(",")","\n","{","\n","return","field_2_reserved1",";","\n"],"docstring_tokens":["Get","the","reserved1","field","for","the","Axis","record"]}
{"code_tokens":["\n","public","void","setReserved1","(","int","field_2_reserved1",")","\n","{","\n","this",".","field_2_reserved1","=","field_2_reserved1",";","\n"],"docstring_tokens":["Set","the","reserved1","field","for","the","Axis","record"]}
{"code_tokens":["\n","public","int","getReserved2","(",")","\n","{","\n","return","field_3_reserved2",";","\n"],"docstring_tokens":["Get","the","reserved2","field","for","the","Axis","record"]}
{"code_tokens":["\n","public","void","setReserved2","(","int","field_3_reserved2",")","\n","{","\n","this",".","field_3_reserved2","=","field_3_reserved2",";","\n"],"docstring_tokens":["Set","the","reserved2","field","for","the","Axis","record"]}
{"code_tokens":["\n","public","int","getReserved3","(",")","\n","{","\n","return","field_4_reserved3",";","\n"],"docstring_tokens":["Get","the","reserved3","field","for","the","Axis","record"]}
{"code_tokens":["\n","public","void","setReserved3","(","int","field_4_reserved3",")","\n","{","\n","this",".","field_4_reserved3","=","field_4_reserved3",";","\n"],"docstring_tokens":["Set","the","reserved3","field","for","the","Axis","record"]}
{"code_tokens":["\n","public","int","getReserved4","(",")","\n","{","\n","return","field_5_reserved4",";","\n"],"docstring_tokens":["Get","the","reserved4","field","for","the","Axis","record"]}
{"code_tokens":["\n","public","void","setReserved4","(","int","field_5_reserved4",")","\n","{","\n","this",".","field_5_reserved4","=","field_5_reserved4",";","\n"],"docstring_tokens":["Set","the","reserved4","field","for","the","Axis","record"]}
{"code_tokens":["\n","private","static","void","centerAcrossSelection","(","XSSFWorkbook","wb,","XSSFRow","row,\n","int","start_column,","int","end_column,","VerticalAlignment","valign",")","{","\n","CreationHelper","ch","=","wb",".","getCreationHelper","(",")",";","\n\n","//","Create","cell","style","with","ALIGN_CENTER_SELECTION\n","XSSFCellStyle","cellStyle","=","wb",".","createCellStyle","(",")",";","\n","cellStyle",".","setAlignment","(","HorizontalAlignment",".","CENTER_SELECTION",")",";","\n","cellStyle",".","setVerticalAlignment","(","valign",")",";","\n\n","//","Create","cells","over","the","selected","area\n","for","(","int","i","=","start_column",";","i","<=","end_column",";","i++",")","{","\n","XSSFCell","cell","=","row",".","createCell","(","i",")",";","\n","cell",".","setCellStyle","(","cellStyle",")",";","\n","}","\n\n","//","Set","value","to","the","first","cell\n","XSSFCell","cell","=","row",".","getCell","(","start_column",")",";","\n","cell",".","setCellValue","(","ch",".","createRichTextString","(","\"Align","It\"",")",")",";","\n\n","//","Make","the","selection\n","CTRowImpl","ctRow","=","(","CTRowImpl",")","row",".","getCTRow","(",")",";","\n\n","//","Add","object","with","format","start_coll:end_coll",".","For","example","1:3","will","span","from\n","//","cell","1","to","cell","3,","where","the","column","index","starts","with","0\n","//\n","//","You","can","add","multiple","spans","for","one","row\n","Object","span","=","start_column","+","\":\"","+","end_column",";","\n\n","List<Object>","spanList","=","new","ArrayList<>","(",")",";","\n","spanList",".","add","(","span",")",";","\n\n","//add","spns","to","the","row\n","ctRow",".","setSpans","(","spanList",")",";","\n"],"docstring_tokens":["Center","a","text","over","multiple","columns","using","ALIGN_CENTER_SELECTION"]}
{"code_tokens":["\n","CTPlaceholder","getCTPlaceholder","(","final","boolean","create",")","{","\n","if","(","_ph","!=","null",")","{","\n","return","_ph",";","\n","}","\n\n","final","CTApplicationNonVisualDrawingProps","nv","=","getNvProps","(",")",";","\n","if","(","nv","==","null",")","{","\n","//","shape","doesn't","support","CTApplicationNonVisualDrawingProps\n","return","null",";","\n","}","\n\n","_ph","=","(","nv",".","isSetPh","(",")","||","!create",")","?","nv",".","getPh","(",")",":","nv",".","addNewPh","(",")",";","\n","return","_ph",";","\n"],"docstring_tokens":["Gets","or","creates","a","new","placeholder","element"]}
{"code_tokens":["\n","@Internal\n","public","CTFont","getCTFont","(",")","{","\n","return","_ctFont",";","\n"],"docstring_tokens":["get","the","underlying","CTFont","font"]}
{"code_tokens":["\n","@Override\n","public","short","getColor","(",")","{","\n","CTColor","color","=","_ctFont",".","sizeOfColorArray","(",")","==","0","?","null",":","_ctFont",".","getColorArray","(","0",")",";","\n","if","(","color","==","null",")","return","IndexedColors",".","BLACK",".","getIndex","(",")",";","\n\n","long","index","=","color",".","getIndexed","(",")",";","\n","if","(","index","==","XSSFFont",".","DEFAULT_FONT_COLOR",")","{","\n","return","IndexedColors",".","BLACK",".","getIndex","(",")",";","\n","}","else","if","(","index","==","IndexedColors",".","RED",".","getIndex","(",")",")","{","\n","return","IndexedColors",".","RED",".","getIndex","(",")",";","\n","}","else","{","\n","return","(","short",")","index",";","\n","}","\n"],"docstring_tokens":["get","the","indexed","color","value","for","the","font","References","a","color","defined","in","IndexedColors"]}
{"code_tokens":["\n","@Override\n","public","boolean","getItalic","(",")","{","\n","CTBooleanProperty","italic","=","_ctFont",".","sizeOfIArray","(",")","==","0","?","null",":","_ctFont",".","getIArray","(","0",")",";","\n","return","italic","!=","null","&&","italic",".","getVal","(",")",";","\n"],"docstring_tokens":["get","a","boolean","value","that","specify","whether","to","use","italics","or","not"]}
{"code_tokens":["\n","@Override\n","public","void","setColor","(","short","color",")","{","\n","CTColor","ctColor","=","_ctFont",".","sizeOfColorArray","(",")","==","0","?","_ctFont",".","addNewColor","(",")",":","_ctFont",".","getColorArray","(","0",")",";","\n","switch","(","color",")","{","\n","case","Font",".","COLOR_NORMAL:","{","\n","ctColor",".","setIndexed","(","XSSFFont",".","DEFAULT_FONT_COLOR",")",";","\n","break",";","\n","}","\n","case","Font",".","COLOR_RED:","{","\n","ctColor",".","setIndexed","(","IndexedColors",".","RED",".","getIndex","(",")",")",";","\n","break",";","\n","}","\n","default:\n","ctColor",".","setIndexed","(","color",")",";","\n","}","\n"],"docstring_tokens":["set","the","indexed","color","for","the","font"]}
{"code_tokens":["\n","public","void","setColor","(","XSSFColor","color",")","{","\n","if","(","color","==","null",")","_ctFont",".","setColorArray","(","null",")",";","\n","else","{","\n","CTColor","ctColor","=","_ctFont",".","sizeOfColorArray","(",")","==","0","?","_ctFont",".","addNewColor","(",")",":","_ctFont",".","getColorArray","(","0",")",";","\n","if","(","ctColor",".","isSetIndexed","(",")",")","{","\n","ctColor",".","unsetIndexed","(",")",";","\n","}","\n","ctColor",".","setRgb","(","color",".","getRGB","(",")",")",";","\n","}","\n"],"docstring_tokens":["set","the","color","for","the","font","in","Standard","Alpha","Red","Green","Blue","color","value"]}
{"code_tokens":["\n","@Override\n","public","void","setFontHeight","(","short","height",")","{","\n","setFontHeight","(","(","double",")","height/Font",".","TWIPS_PER_POINT",")",";","\n"],"docstring_tokens":["set","the","font","height","in","points"]}
{"code_tokens":["\n","public","long","registerTo","(","StylesTable","styles",")","{","\n","return","registerTo","(","styles,","true",")",";","\n"],"docstring_tokens":["Perform","a","registration","of","ourselves","to","the","style","table"]}
{"code_tokens":["\n","public","void","setScheme","(","FontScheme","scheme",")","{","\n","CTFontScheme","ctFontScheme","=","_ctFont",".","sizeOfSchemeArray","(",")","==","0","?","_ctFont",".","addNewScheme","(",")",":","_ctFont",".","getSchemeArray","(","0",")",";","\n","STFontScheme",".","Enum","val","=","STFontScheme",".","Enum",".","forInt","(","scheme",".","getValue","(",")",")",";","\n","ctFontScheme",".","setVal","(","val",")",";","\n"],"docstring_tokens":["set","font","scheme","property"]}
{"code_tokens":["\n","@Override\n","public","String","getText","(",")","{","\n","StringBuilder","text","=","new","StringBuilder","(",")",";","\n\n","//","To","track","formats","and","encodings\n","CodepageRecord","codepage","=","null",";","\n","//","TODO","track","the","XFs","and","Format","Strings\n\n","//","Process","each","record","in","turn,","looking","for","interesting","ones\n","while","(","ris",".","hasNextRecord","(",")",")","{","\n","int","sid","=","ris",".","getNextSid","(",")",";","\n","ris",".","nextRecord","(",")",";","\n\n","switch","(","sid",")","{","\n","case","FILE_PASS_RECORD_SID:\n","throw","new","EncryptedDocumentException","(","\"Encryption","not","supported","for","Old","Excel","files\"",")",";","\n\n","case","OldSheetRecord",".","sid:\n","OldSheetRecord","shr","=","new","OldSheetRecord","(","ris",")",";","\n","shr",".","setCodePage","(","codepage",")",";","\n","text",".","append","(","\"Sheet:","\"",")",";","\n","text",".","append","(","shr",".","getSheetname","(",")",")",";","\n","text",".","append","(","'\\n'",")",";","\n","break",";","\n\n","case","OldLabelRecord",".","biff2_sid:\n","case","OldLabelRecord",".","biff345_sid:\n","OldLabelRecord","lr","=","new","OldLabelRecord","(","ris",")",";","\n","lr",".","setCodePage","(","codepage",")",";","\n","text",".","append","(","lr",".","getValue","(",")",")",";","\n","text",".","append","(","'\\n'",")",";","\n","break",";","\n","case","OldStringRecord",".","biff2_sid:\n","case","OldStringRecord",".","biff345_sid:\n","OldStringRecord","sr","=","new","OldStringRecord","(","ris",")",";","\n","sr",".","setCodePage","(","codepage",")",";","\n","text",".","append","(","sr",".","getString","(",")",")",";","\n","text",".","append","(","'\\n'",")",";","\n","break",";","\n\n","case","NumberRecord",".","sid:\n","NumberRecord","nr","=","new","NumberRecord","(","ris",")",";","\n","handleNumericCell","(","text,","nr",".","getValue","(",")",")",";","\n","break",";","\n","case","OldFormulaRecord",".","biff2_sid:\n","case","OldFormulaRecord",".","biff3_sid:\n","case","OldFormulaRecord",".","biff4_sid:\n","//","Biff","2","and","5+","share","the","same","SID,","due","to","a","bug",".",".",".","\n","if","(","biffVersion","==","5",")","{","\n","FormulaRecord","fr","=","new","FormulaRecord","(","ris",")",";","\n","if","(","fr",".","getCachedResultTypeEnum","(",")","==","CellType",".","NUMERIC",")","{","\n","handleNumericCell","(","text,","fr",".","getValue","(",")",")",";","\n","}","\n","}","else","{","\n","OldFormulaRecord","fr","=","new","OldFormulaRecord","(","ris",")",";","\n","if","(","fr",".","getCachedResultTypeEnum","(",")","==","CellType",".","NUMERIC",")","{","\n","handleNumericCell","(","text,","fr",".","getValue","(",")",")",";","\n","}","\n","}","\n","break",";","\n","case","RKRecord",".","sid:\n","RKRecord","rr","=","new","RKRecord","(","ris",")",";","\n","handleNumericCell","(","text,","rr",".","getRKNumber","(",")",")",";","\n","break",";","\n\n","case","CodepageRecord",".","sid:\n","codepage","=","new","CodepageRecord","(","ris",")",";","\n","break",";","\n\n","default:\n","ris",".","readFully","(","IOUtils",".","safelyAllocate","(","ris",".","remaining","(",")",",","HSSFWorkbook",".","getMaxRecordLength","(",")",")",")",";","\n","}","\n","}","\n\n","ris","=","null",";","\n\n","return","text",".","toString","(",")",";","\n"],"docstring_tokens":["Retrieves","the","text","contents","of","the","file,","as","best","we","can","for","these","old","file","formats"]}
{"code_tokens":["\n","public","void","updateFormulasAfterCellShift","(","FormulaShifter","shifter,","int","externSheetIndex",")","{","\n","getRowsAggregate","(",")",".","updateFormulasAfterRowShift","(","shifter,","externSheetIndex",")",";","\n","if","(","condFormatting","!=","null",")","{","\n","getConditionalFormattingTable","(",")",".","updateFormulasAfterCellShift","(","shifter,","externSheetIndex",")",";","\n","}","\n","//","TODO","-","adjust","data","validations\n"],"docstring_tokens":["Updates","formulas","in","cells","and","conditional","formats","due","to","moving","of","cells"]}
{"code_tokens":["\n","private","static","DefaultRowHeightRecord","createDefaultRowHeight","(",")","{","\n","DefaultRowHeightRecord","retval","=","new","DefaultRowHeightRecord","(",")",";","\n\n","retval",".","setOptionFlags","(","(","short",")","0",")",";","\n","retval",".","setRowHeight","(","DefaultRowHeightRecord",".","DEFAULT_ROW_HEIGHT",")",";","\n","return","retval",";","\n"],"docstring_tokens":["creates","the","DefaultRowHeight","Record","and","sets","its","options","to","0","and","rowheight","to","0xff"]}
{"code_tokens":["\n","private","static","WSBoolRecord","createWSBool","(",")","{","\n","WSBoolRecord","retval","=","new","WSBoolRecord","(",")",";","\n\n","retval",".","setWSBool1","(","(","byte",")","0x4",")",";","\n","retval",".","setWSBool2","(","(","byte",")","0xffffffc1",")",";","\n","return","retval",";","\n"],"docstring_tokens":["creates","the","WSBoolRecord","and","sets","its","values","to","defaults"]}
{"code_tokens":["\n","private","static","DefaultColWidthRecord","createDefaultColWidth","(",")","{","\n","DefaultColWidthRecord","retval","=","new","DefaultColWidthRecord","(",")",";","\n","retval",".","setColWidth","(","DefaultColWidthRecord",".","DEFAULT_COLUMN_WIDTH",")",";","\n","return","retval",";","\n"],"docstring_tokens":["creates","the","DefaultColWidth","Record","and","sets","it","to","8"]}
{"code_tokens":["\n","public","boolean","isColumnHidden","(","int","columnIndex",")","{","\n","ColumnInfoRecord","cir","=","_columnInfos",".","findColumnInfo","(","columnIndex",")",";","\n","if","(","cir","==","null",")","{","\n","return","false",";","\n","}","\n","return","cir",".","getHidden","(",")",";","\n"],"docstring_tokens":["Get","the","hidden","property","for","a","given","column"]}
{"code_tokens":["\n","public","void","groupColumnRange","(","int","fromColumn,","int","toColumn,","boolean","indent",")","{","\n\n","//","Set","the","level","for","each","column\n","_columnInfos",".","groupColumnRange","(","fromColumn,","toColumn,","indent",")",";","\n\n","//","Determine","the","maximum","overall","level\n","int","maxLevel","=","_columnInfos",".","getMaxOutlineLevel","(",")",";","\n\n","GutsRecord","guts","=","getGutsRecord","(",")",";","\n","guts",".","setColLevelMax","(","(","short",")","(","maxLevel+1",")",")",";","\n","if","(","maxLevel","==","0",")","{","\n","guts",".","setTopColGutter","(","(","short",")","0",")",";","\n","}","else","{","\n","guts",".","setTopColGutter","(","(","short",")","(","29","+","(","12","*","(","maxLevel-1",")",")",")",")",";","\n","}","\n"],"docstring_tokens":["Creates","an","outline","group","for","the","specified","columns"]}
{"code_tokens":["\n","public","void","setLeftCol","(","short","leftCol",")","{","\n","if","(","windowTwo!=null",")","{","\n","windowTwo",".","setLeftCol","(","leftCol",")",";","\n","}","\n"],"docstring_tokens":["Sets","the","left","column","to","show","in","desktop","window","pane"]}
{"code_tokens":["\n","public","GridsetRecord","getGridsetRecord","(",")","\n","{","\n","return","gridset",";","\n"],"docstring_tokens":["Gets","the","gridset","record","for","this","sheet"]}
{"code_tokens":["\n","public","void","setSCLRecord","(","SCLRecord","sclRecord",")","{","\n","int","oldRecordLoc","=","findFirstRecordLocBySid","(","SCLRecord",".","sid",")",";","\n","if","(","oldRecordLoc","==","-1",")","{","\n","//","Insert","it","after","the","window","record\n","int","windowRecordLoc","=","findFirstRecordLocBySid","(","WindowTwoRecord",".","sid",")",";","\n","_records",".","add","(","windowRecordLoc+1,","sclRecord",")",";","\n","}","else","{","\n","_records",".","set","(","oldRecordLoc,","sclRecord",")",";","\n","}","\n"],"docstring_tokens":["Sets","the","SCL","record","or","creates","it","in","the","correct","place","if","it","does","not","already","exist"]}
{"code_tokens":["\n","public","boolean","isPrintRowColHeadings","(",")","{","\n","return","windowTwo",".","getDisplayRowColHeadings","(",")",";","\n"],"docstring_tokens":["Returns","if","RowColHeadings","are","displayed"]}
{"code_tokens":["\n","public","void","removeHyperlinksChanged","(",")","{","\n","remove1stProperty","(","PropertyIDMap",".","PID_HYPERLINKSCHANGED",")",";","\n"],"docstring_tokens":["Removes","the","flag","for","if","the","User","Defined","Property","Set","has","been","updated","outside","of","the","Application"]}
{"code_tokens":["\n","public","void","removeLanguage","(",")","{","\n","remove1stProperty","(","PropertyIDMap",".","PID_LANGUAGE",")",";","\n"],"docstring_tokens":["Removes","the","document","language"]}
{"code_tokens":["\n","private","void","ensureSection2","(",")","{","\n","if","(","getSectionCount","(",")","<","2",")","{","\n","Section","s2","=","new","Section","(",")",";","\n","s2",".","setFormatID","(","USER_PROPERTIES",".","getClassID","(",")",")",";","\n","addSection","(","s2",")",";","\n","}","\n"],"docstring_tokens":["Creates","section","2","if","it","is","not","already","present"]}
{"code_tokens":["\n\n","public","void","setItalic","(","boolean","italic",")","{","\n","setFontOption","(","italic,","POSTURE",")",";","\n"],"docstring_tokens":["set","the","font","to","be","italics","or","not"]}
{"code_tokens":["\n","public","static","SubRecord","createSubRecord","(","LittleEndianInput","in,","int","cmoOt",")","{","\n","int","sid","=","in",".","readUShort","(",")",";","\n","//","Often","(","but","not","always",")","the","datasize","for","the","sub-record\n","int","size","=","in",".","readUShort","(",")",";","\n","SubRecordTypes","srt","=","SubRecordTypes",".","forSID","(","sid",")",";","\n","return","srt",".","recordConstructor",".","apply","(","in,","size,","srt","==","SubRecordTypes",".","UNKNOWN","?","sid",":","cmoOt",")",";","\n"],"docstring_tokens":["read","a","sub-record","from","the","supplied","stream"]}
{"code_tokens":["\n","public","String","getModifiedPropertyString","(",")","{","\n","if","(","modified",".","isPresent","(",")",")","{","\n","return","getDateValue","(","modified",")",";","\n","}","\n","return","getDateValue","(","Optional",".","of","(","new","Date","(",")",")",")",";","\n"],"docstring_tokens":["Get","modified","date","formatted","into","a","String"]}
{"code_tokens":["\n","@Override\n","public","void","setCreatedProperty","(","String","created",")","throws","InvalidFormatException","{","\n","this",".","created","=","parseDateValue","(","created",")",";","\n"],"docstring_tokens":["Set","the","created","date"]}
{"code_tokens":["\n","@Override\n","public","void","setLastPrintedProperty","(","String","lastPrinted",")","throws","InvalidFormatException","{","\n","this",".","lastPrinted","=","parseDateValue","(","lastPrinted",")",";","\n"],"docstring_tokens":["Set","last","printed","date"]}
{"code_tokens":["\n","@Override\n","public","void","setModifiedProperty","(","String","modified",")","throws","InvalidFormatException","{","\n","this",".","modified","=","parseDateValue","(","modified",")",";","\n"],"docstring_tokens":["Set","last","modification","date"]}
{"code_tokens":["\n","public","void","nextRecord","(",")","throws","RecordFormatException","{","\n","if","(","_nextSid","==","INVALID_SID_VALUE",")","{","\n","throw","new","IllegalStateException","(","\"EOF","-","next","record","not","available\"",")",";","\n","}","\n","if","(","_currentDataLength","!=","DATA_LEN_NEEDS_TO_BE_READ",")","{","\n","throw","new","IllegalStateException","(","\"Cannot","call","nextRecord","(",")","without","checking","hasNextRecord","(",")","first\"",")",";","\n","}","\n","_currentSid","=","_nextSid",";","\n","_currentDataOffset","=","0",";","\n","_currentDataLength","=","_bhi",".","readDataSize","(",")",";","\n","if","(","_currentDataLength",">","MAX_RECORD_DATA_SIZE",")","{","\n","throw","new","RecordFormatException","(","\"The","content","of","an","excel","record","cannot","exceed","\"\n","+","MAX_RECORD_DATA_SIZE","+","\"","bytes\"",")",";","\n","}","\n"],"docstring_tokens":["Moves","to","the","next","record","in","the","stream"]}
{"code_tokens":["\n","@Override\n","public","short","readShort","(",")","{","\n","checkRecordPosition","(","LittleEndianConsts",".","SHORT_SIZE",")",";","\n","_currentDataOffset","+=","LittleEndianConsts",".","SHORT_SIZE",";","\n","return","_dataInput",".","readShort","(",")",";","\n"],"docstring_tokens":["Reads","a","16","bit,","signed","value"]}
{"code_tokens":["\n","public","byte[]","readRemainder","(",")","{","\n","int","size","=","remaining","(",")",";","\n","if","(","size","==0",")","{","\n","return","EMPTY_BYTE_ARRAY",";","\n","}","\n","byte[]","result","=","IOUtils",".","safelyAllocate","(","size,","HSSFWorkbook",".","getMaxRecordLength","(",")",")",";","\n","readFully","(","result",")",";","\n","return","result",";","\n"],"docstring_tokens":["Returns","the","remaining","bytes","for","the","current","record"]}
{"code_tokens":["\n","@Deprecated\n","public","byte[]","readAllContinuedRemainder","(",")","{","\n","try","(","UnsynchronizedByteArrayOutputStream","out","=","new","UnsynchronizedByteArrayOutputStream","(","2","*","MAX_RECORD_DATA_SIZE",")",")","{","\n\n","while","(","true",")","{","\n","byte[]","b","=","readRemainder","(",")",";","\n","out",".","write","(","b,","0,","b",".","length",")",";","\n","if","(","!isContinueNext","(",")",")","{","\n","break",";","\n","}","\n","nextRecord","(",")",";","\n","}","\n","return","out",".","toByteArray","(",")",";","\n","}","catch","(","IOException","ex",")","{","\n","throw","new","RecordFormatException","(","ex",")",";","\n","}","\n"],"docstring_tokens":["Reads","all","byte","data","for","the","current","record,","including","any","that","overlaps","into","any","following","continue","records"]}
{"code_tokens":["\n","public","int","remaining","(",")","{","\n","if","(","_currentDataLength","==","DATA_LEN_NEEDS_TO_BE_READ",")","{","\n","//","already","read","sid","of","next","record",".","so","current","one","is","finished\n","return","0",";","\n","}","\n","return","_currentDataLength","-","_currentDataOffset",";","\n"],"docstring_tokens":["The","remaining","number","of","bytes","in","the","current","record"]}
{"code_tokens":["\n","@Internal\n","public","void","mark","(","int","readlimit",")","{","\n","(","(","InputStream",")","_dataInput",")",".","mark","(","readlimit",")",";","\n","_markedDataOffset","=","_currentDataOffset",";","\n"],"docstring_tokens":["Mark","the","stream","position","-","experimental","function"]}
{"code_tokens":["\n","public","BigInteger","nextId","(",")","{","\n\n","List<BigInteger>","ids","=","new","ArrayList<>","(",")",";","\n","for","(","XWPFAbstractFootnoteEndnote","note",":","document",".","getFootnotes","(",")",")","{","\n","ids",".","add","(","note",".","getId","(",")",")",";","\n","}","\n","for","(","XWPFAbstractFootnoteEndnote","note",":","document",".","getEndnotes","(",")",")","{","\n","ids",".","add","(","note",".","getId","(",")",")",";","\n","}","\n","int","cand","=","ids",".","size","(",")",";","\n","BigInteger","newId","=","BigInteger",".","valueOf","(","cand",")",";","\n","while","(","ids",".","contains","(","newId",")",")","{","\n","cand++",";","\n","newId","=","BigInteger",".","valueOf","(","cand",")",";","\n","}","\n\n","return","newId",";","\n"],"docstring_tokens":["Gets","the","next","ID","number"]}
{"code_tokens":["\n","public","static","void","assertEquals","(","File","expected,","File","actual",")","{","\n","assertNotNull","(","expected",")",";","\n","assertNotNull","(","actual",")",";","\n\n","assertTrue","(","expected",".","exists","(",")",",","\"File","does","not","exist","[\"","+","expected",".","getAbsolutePath","(",")","+","\"]\"",")",";","\n","assertTrue","(","actual",".","exists","(",")",",","\"File","does","not","exist","[\"","+","actual",".","getAbsolutePath","(",")","+","\"]\"",")",";","\n","assertTrue","(","expected",".","canRead","(",")",",","\"Expected","file","not","readable\"",")",";","\n","assertTrue","(","actual",".","canRead","(",")",",","\"Actual","file","not","readable\"",")",";","\n\n","assertDoesNotThrow","(","(",")","->","equals","(","decompress","(","expected",")",",","decompress","(","actual",")",")",")",";","\n"],"docstring_tokens":["Asserts","that","two","files","are","equal"]}
{"code_tokens":["\n","@Override\n","public","XSSFRichTextString","createRichTextString","(","String","text",")","{","\n","XSSFRichTextString","rt","=","new","XSSFRichTextString","(","text",")",";","\n","rt",".","setStylesTableReference","(","workbook",".","getStylesSource","(",")",")",";","\n","return","rt",";","\n"],"docstring_tokens":["Creates","a","new","XSSFRichTextString","for","you"]}
{"code_tokens":["\n","@Override\n","public","XSSFFormulaEvaluator","createFormulaEvaluator","(",")","{","\n","XSSFFormulaEvaluator","evaluator","=","new","XSSFFormulaEvaluator","(","workbook",")",";","\n","Map<String,","FormulaEvaluator>","evaluatorMap","=","new","HashMap<>","(",")",";","\n","evaluatorMap",".","put","(","\"\",","evaluator",")",";","\n","this",".","referencedWorkbooks",".","forEach","(","(","name,otherWorkbook",")","->evaluatorMap",".","put","(","name,otherWorkbook",".","getCreationHelper","(",")",".","createFormulaEvaluator","(",")",")",")",";","\n","evaluator",".","setupReferencedWorkbooks","(","evaluatorMap",")",";","\n","return","evaluator",";","\n"],"docstring_tokens":["Creates","a","XSSFFormulaEvaluator,","the","object","that","evaluates","formula","cells"]}
{"code_tokens":["\n","public","short","getAnchorId","(",")","\n","{","\n","return","field_1_anchorId",";","\n"],"docstring_tokens":["Get","the","anchor","id","field","for","the","ObjectLink","record"]}
{"code_tokens":["\n","public","void","setAnchorId","(","short","field_1_anchorId",")","\n","{","\n","this",".","field_1_anchorId","=","field_1_anchorId",";","\n"],"docstring_tokens":["Set","the","anchor","id","field","for","the","ObjectLink","record"]}
{"code_tokens":["\n","public","short","getLink1","(",")","\n","{","\n","return","field_2_link1",";","\n"],"docstring_tokens":["Get","the","link","1","field","for","the","ObjectLink","record"]}
{"code_tokens":["\n","public","void","setLink1","(","short","field_2_link1",")","\n","{","\n","this",".","field_2_link1","=","field_2_link1",";","\n"],"docstring_tokens":["Set","the","link","1","field","for","the","ObjectLink","record"]}
{"code_tokens":["\n","public","short","getLink2","(",")","\n","{","\n","return","field_3_link2",";","\n"],"docstring_tokens":["Get","the","link","2","field","for","the","ObjectLink","record"]}
{"code_tokens":["\n","public","void","setLink2","(","short","field_3_link2",")","\n","{","\n","this",".","field_3_link2","=","field_3_link2",";","\n"],"docstring_tokens":["Set","the","link","2","field","for","the","ObjectLink","record"]}
{"code_tokens":["\n","public","String","getFirstResult","(",")","{","\n","if","(","items","==","null","||","items",".","isEmpty","(",")",")","{","\n","return","null",";","\n","}","\n","return","items",".","get","(","0",")",".","getIndex","(",")",".","getResult","(",")",";","\n"],"docstring_tokens":["Retrieve","first","result","from","response"]}
{"code_tokens":["\n","protected","void","enqueue","(","List<TaskMessage>","msgs,","String","from",")","throws","InterruptedException","{","\n","if","(","null","==","msgs","||","msgs",".","isEmpty","(",")","||","closing",")","{","\n","return",";","\n","}","\n","addReceiveCount","(","from,","msgs",".","size","(",")",")",";","\n","cb",".","recv","(","msgs",")",";","\n"],"docstring_tokens":["enqueue","a","received","message"]}
{"code_tokens":["\n","public","static","void","main","(","String[]","args",")","throws","Exception","{","\n","Options","options","=","new","Options","(",")",";","\n","options",".","addOption","(","Option",".","builder","(","\"h\"",")","\n",".","longOpt","(","\"help\"",")","\n",".","desc","(","\"Print","a","help","message\"",")","\n",".","build","(",")",")",";","\n","options",".","addOption","(","Option",".","builder","(","\"t\"",")","\n",".","longOpt","(","\"test-time\"",")","\n",".","argName","(","\"MINS\"",")","\n",".","hasArg","(",")","\n",".","desc","(","\"How","long","to","run","the","tests","for","in","mins","(","defaults","to","\"","+","TEST_EXECUTE_TIME_DEFAULT","+","\"",")","\"",")","\n",".","build","(",")",")",";","\n","options",".","addOption","(","Option",".","builder","(",")","\n",".","longOpt","(","\"rate\"",")","\n",".","argName","(","\"SENTENCES/SEC\"",")","\n",".","hasArg","(",")","\n",".","desc","(","\"How","many","sentences","per","second","to","run",".","(","defaults","to","\"","+","DEFAULT_RATE_PER_SECOND","+","\"",")","\"",")","\n",".","build","(",")",")",";","\n","options",".","addOption","(","Option",".","builder","(",")","\n",".","longOpt","(","\"name\"",")","\n",".","argName","(","\"TOPO_NAME\"",")","\n",".","hasArg","(",")","\n",".","desc","(","\"Name","of","the","topology","to","run","(","defaults","to","\"","+","DEFAULT_TOPO_NAME","+","\"",")","\"",")","\n",".","build","(",")",")",";","\n","options",".","addOption","(","Option",".","builder","(",")","\n",".","longOpt","(","\"spouts\"",")","\n",".","argName","(","\"NUM\"",")","\n",".","hasArg","(",")","\n",".","desc","(","\"Number","of","spouts","to","use","(","defaults","to","\"","+","DEFAULT_NUM_SPOUTS","+","\"",")","\"",")","\n",".","build","(",")",")",";","\n","options",".","addOption","(","Option",".","builder","(",")","\n",".","longOpt","(","\"splitters\"",")","\n",".","argName","(","\"NUM\"",")","\n",".","hasArg","(",")","\n",".","desc","(","\"Number","of","splitter","bolts","to","use","(","defaults","to","\"","+","DEFAULT_NUM_SPLITS","+","\"",")","\"",")","\n",".","build","(",")",")",";","\n","options",".","addOption","(","Option",".","builder","(",")","\n",".","longOpt","(","\"splitter-imbalance\"",")","\n",".","argName","(","\"MS","(",":COUNT",")","?\"",")","\n",".","hasArg","(",")","\n",".","desc","(","\"The","number","of","ms","that","the","first","COUNT","splitters","will","wait","before","processing",".","This","creates","an","imbalance","\"\n","+","\"that","helps","test","load","aware","groupings","(","defaults","to","0:1",")","\"",")","\n",".","build","(",")",")",";","\n","options",".","addOption","(","Option",".","builder","(",")","\n",".","longOpt","(","\"counters\"",")","\n",".","argName","(","\"NUM\"",")","\n",".","hasArg","(",")","\n",".","desc","(","\"Number","of","counter","bolts","to","use","(","defaults","to","\"","+","DEFAULT_NUM_COUNTS","+","\"",")","\"",")","\n",".","build","(",")",")",";","\n","LoadMetricsServer",".","addCommandLineOptions","(","options",")",";","\n","CommandLineParser","parser","=","new","DefaultParser","(",")",";","\n","CommandLine","cmd","=","null",";","\n","Exception","commandLineException","=","null",";","\n","SlowExecutorPattern","slowness","=","null",";","\n","double","numMins","=","TEST_EXECUTE_TIME_DEFAULT",";","\n","double","ratePerSecond","=","DEFAULT_RATE_PER_SECOND",";","\n","String","name","=","DEFAULT_TOPO_NAME",";","\n","int","numSpouts","=","DEFAULT_NUM_SPOUTS",";","\n","int","numSplits","=","DEFAULT_NUM_SPLITS",";","\n","int","numCounts","=","DEFAULT_NUM_COUNTS",";","\n","try","{","\n","cmd","=","parser",".","parse","(","options,","args",")",";","\n","if","(","cmd",".","hasOption","(","\"t\"",")",")","{","\n","numMins","=","Double",".","valueOf","(","cmd",".","getOptionValue","(","\"t\"",")",")",";","\n","}","\n","if","(","cmd",".","hasOption","(","\"rate\"",")",")","{","\n","ratePerSecond","=","Double",".","parseDouble","(","cmd",".","getOptionValue","(","\"rate\"",")",")",";","\n","}","\n","if","(","cmd",".","hasOption","(","\"name\"",")",")","{","\n","name","=","cmd",".","getOptionValue","(","\"name\"",")",";","\n","}","\n","if","(","cmd",".","hasOption","(","\"spouts\"",")",")","{","\n","numSpouts","=","Integer",".","parseInt","(","cmd",".","getOptionValue","(","\"spouts\"",")",")",";","\n","}","\n","if","(","cmd",".","hasOption","(","\"splitters\"",")",")","{","\n","numSplits","=","Integer",".","parseInt","(","cmd",".","getOptionValue","(","\"splitters\"",")",")",";","\n","}","\n","if","(","cmd",".","hasOption","(","\"counters\"",")",")","{","\n","numCounts","=","Integer",".","parseInt","(","cmd",".","getOptionValue","(","\"counters\"",")",")",";","\n","}","\n","if","(","cmd",".","hasOption","(","\"splitter-imbalance\"",")",")","{","\n","slowness","=","SlowExecutorPattern",".","fromString","(","cmd",".","getOptionValue","(","\"splitter-imbalance\"",")",")",";","\n","}","\n","}","catch","(","ParseException","|","NumberFormatException","e",")","{","\n","commandLineException","=","e",";","\n","}","\n","if","(","commandLineException","!=","null","||","cmd",".","hasOption","(","'h'",")",")","{","\n","if","(","commandLineException","!=","null",")","{","\n","System",".","err",".","println","(","\"ERROR","\"","+","commandLineException",".","getMessage","(",")",")",";","\n","}","\n","new","HelpFormatter","(",")",".","printHelp","(","\"ThroughputVsLatency","[options]\",","options",")",";","\n","return",";","\n","}","\n\n","Map<String,","Object>","metrics","=","new","LinkedHashMap<>","(",")",";","\n","metrics",".","put","(","\"target_rate\",","ratePerSecond",")",";","\n","metrics",".","put","(","\"spout_parallel\",","numSpouts",")",";","\n","metrics",".","put","(","\"split_parallel\",","numSplits",")",";","\n","metrics",".","put","(","\"count_parallel\",","numCounts",")",";","\n\n","Config","conf","=","new","Config","(",")",";","\n","Map<String,","Object>","sysConf","=","Utils",".","readStormConfig","(",")",";","\n","LoadMetricsServer","metricServer","=","new","LoadMetricsServer","(","sysConf,","cmd,","metrics",")",";","\n","metricServer",".","serve","(",")",";","\n","String","url","=","metricServer",".","getUrl","(",")",";","\n\n","NimbusClient","client","=","NimbusClient",".","getConfiguredClient","(","sysConf",")",";","\n","conf",".","registerMetricsConsumer","(","LoggingMetricsConsumer",".","class",")",";","\n","conf",".","registerMetricsConsumer","(","HttpForwardingMetricsConsumer",".","class,","url,","1",")",";","\n","Map<String,","String>","workerMetrics","=","new","HashMap<>","(",")",";","\n","if","(","!NimbusClient",".","isLocalOverride","(",")",")","{","\n","//sigar","uses","JNI","and","does","not","work","in","local","mode\n","workerMetrics",".","put","(","\"CPU\",","\"org",".","apache",".","storm",".","metrics",".","sigar",".","CPUMetric\"",")",";","\n","}","\n","conf",".","put","(","Config",".","TOPOLOGY_WORKER_METRICS,","workerMetrics",")",";","\n","conf",".","put","(","Config",".","TOPOLOGY_BUILTIN_METRICS_BUCKET_SIZE_SECS,","10",")",";","\n","conf",".","put","(","Config",".","TOPOLOGY_WORKER_GC_CHILDOPTS,\n","\"-XX:+UseConcMarkSweepGC","-XX:+UseParNewGC","-XX:+UseConcMarkSweepGC","\"\n","+","\"-XX:NewSize=128m","-XX:CMSInitiatingOccupancyFraction=70","-XX:-CMSConcurrentMTEnabled\"",")",";","\n","conf",".","put","(","Config",".","TOPOLOGY_WORKER_CHILDOPTS,","\"-Xmx2g\"",")",";","\n\n","TopologyBuilder","builder","=","new","TopologyBuilder","(",")",";","\n\n","builder",".","setSpout","(","\"spout\",","new","FastRandomSentenceSpout","(","(","long",")","ratePerSecond","/","numSpouts",")",",","numSpouts",")",";","\n","builder",".","setBolt","(","\"split\",","new","SplitSentence","(","slowness",")",",","numSplits",")","\n",".","shuffleGrouping","(","\"spout\"",")",";","\n","builder",".","setBolt","(","\"count\",","new","WordCount","(",")",",","numCounts",")",".","fieldsGrouping","(","\"split\",","new","Fields","(","\"word\"",")",")",";","\n\n","int","exitStatus","=","-1",";","\n","try","(","ScopedTopologySet","topologyNames","=","new","ScopedTopologySet","(","client",".","getClient","(",")",")",")","{","\n","StormSubmitter",".","submitTopology","(","name,","conf,","builder",".","createTopology","(",")",")",";","\n","topologyNames",".","add","(","name",")",";","\n\n","metricServer",".","monitorFor","(","numMins,","client",".","getClient","(",")",",","topologyNames",")",";","\n","exitStatus","=","0",";","\n","}","catch","(","Exception","e",")","{","\n","LOG",".","error","(","\"Error","while","running","test\",","e",")",";","\n","}","finally","{","\n","System",".","exit","(","exitStatus",")",";","\n","}","\n"],"docstring_tokens":["The","main","entry","point","for","ThroughputVsLatency"]}
{"code_tokens":["\n","public","BatchCassandraWriterBolt","withQueueSize","(","int","size",")","{","\n","this",".","batchMaxSize","=","size",";","\n","return","this",";","\n"],"docstring_tokens":["Maximum","number","of","tuple","kept","in","memory","before","inserting","batches","to","cassandra"]}
{"code_tokens":["\n","public","void","recoverRunningTopology","(","final","LocalAssignment","currentAssignment,","final","int","port,\n","final","BlobChangingCallback","cb",")","throws","IOException","{","\n","final","PortAndAssignment","pna","=","new","PortAndAssignmentImpl","(","port,","currentAssignment",")",";","\n","final","String","topologyId","=","pna",".","getToplogyId","(",")",";","\n","LOG",".","info","(","\"recoverRunningTopology","for","{","}","\",","pna",")",";","\n\n","LocallyCachedBlob","topoJar","=","getTopoJar","(","topologyId,","pna",".","getAssignment","(",")",".","get_owner","(",")",")",";","\n","topoJar",".","addReference","(","pna,","cb",")",";","\n\n","LocallyCachedBlob","topoCode","=","getTopoCode","(","topologyId,","pna",".","getAssignment","(",")",".","get_owner","(",")",")",";","\n","topoCode",".","addReference","(","pna,","cb",")",";","\n\n","LocallyCachedBlob","topoConf","=","getTopoConf","(","topologyId,","pna",".","getAssignment","(",")",".","get_owner","(",")",")",";","\n","topoConf",".","addReference","(","pna,","cb",")",";","\n\n","CompletableFuture<Void>","localResource","=","blobPending",".","computeIfAbsent","(","topologyId,","(","tid",")","->","ALL_DONE_FUTURE",")",";","\n\n","try","{","\n","addReferencesToBlobs","(","pna,","cb",")",";","\n","}","catch","(","KeyNotFoundException","|","AuthorizationException","e",")","{","\n","LOG",".","error","(","\"Could","not","recover","all","blob","references","for","{","}","\",","pna",")",";","\n","}","\n\n","LOG",".","debug","(","\"Recovered","blobs","{","}","{","}","\",","topologyId,","localResource",")",";","\n"],"docstring_tokens":["Do","everything","needed","to","recover","the","state","in","the","AsyncLocalizer","for","a","running","topology"]}
{"code_tokens":["\n","private","void","removeLongTimeDisappearFromCache","(",")","{","\n\n","Map<String,","Integer>","supervisorCountMap","=","new","HashMap<String,","Integer>","(",")",";","\n","Map<WorkerSlot,","Integer>","slotCountMap","=","new","HashMap<WorkerSlot,","Integer>","(",")",";","\n\n","for","(","Map<String,","Set<Integer>>","item",":","badSupervisorsToleranceSlidingWindow",")","{","\n","Set<String>","supervisors","=","item",".","keySet","(",")",";","\n","for","(","String","supervisor",":","supervisors",")","{","\n","int","supervisorCount","=","supervisorCountMap",".","getOrDefault","(","supervisor,","0",")",";","\n","Set<Integer>","slots","=","item",".","get","(","supervisor",")",";","\n","//","treat","supervisor","as","bad","only","if","all","of","its","slots","matched","the","cached","supervisor\n","if","(","slots",".","equals","(","cachedSupervisors",".","get","(","supervisor",")",")",")","{","\n","//","track","how","many","times","a","cached","supervisor","has","been","marked","bad\n","supervisorCountMap",".","put","(","supervisor,","supervisorCount","+","1",")",";","\n","}","\n","//","track","how","many","times","each","supervisor","slot","has","been","listed","as","bad\n","for","(","Integer","slot",":","slots",")","{","\n","WorkerSlot","workerSlot","=","new","WorkerSlot","(","supervisor,","slot",")",";","\n","int","slotCount","=","slotCountMap",".","getOrDefault","(","workerSlot,","0",")",";","\n","slotCountMap",".","put","(","workerSlot,","slotCount","+","1",")",";","\n","}","\n","}","\n","}","\n\n","for","(","Map",".","Entry<String,","Integer>","entry",":","supervisorCountMap",".","entrySet","(",")",")","{","\n","String","key","=","entry",".","getKey","(",")",";","\n","int","value","=","entry",".","getValue","(",")",";","\n","if","(","value","==","windowSize",")","{","//","supervisor","which","was","never","back","to","normal","in","tolerance","period","will","be","removed","from","cache\n","cachedSupervisors",".","remove","(","key",")",";","\n","LOG",".","info","(","\"Supervisor","{","}","was","never","back","to","normal","during","tolerance","period,","probably","dead",".","Will","remove","from","cache",".","\",","key",")",";","\n","}","\n","}","\n\n","for","(","Map",".","Entry<WorkerSlot,","Integer>","entry",":","slotCountMap",".","entrySet","(",")",")","{","\n","WorkerSlot","workerSlot","=","entry",".","getKey","(",")",";","\n","String","supervisorKey","=","workerSlot",".","getNodeId","(",")",";","\n","Integer","slot","=","workerSlot",".","getPort","(",")",";","\n","int","slotFailures","=","entry",".","getValue","(",")",";","\n","if","(","slotFailures","==","windowSize",")","{","//","worker","slot","which","was","never","back","to","normal","in","tolerance","period","will","be","removed","from","cache\n","Set<Integer>","slots","=","cachedSupervisors",".","get","(","supervisorKey",")",";","\n","if","(","slots","!=","null",")","{","//","slots","will","be","null","while","supervisor","has","been","removed","from","cached","supervisors\n","slots",".","remove","(","slot",")",";","\n","cachedSupervisors",".","put","(","supervisorKey,","slots",")",";","\n","}","\n","LOG",".","info","(","\"Worker","slot","{","}","was","never","back","to","normal","during","tolerance","period,","probably","dead",".","Will","be","removed","from","cache",".","\",\n","workerSlot",")",";","\n","}","\n","}","\n"],"docstring_tokens":["supervisor","or","port","never","exits","once","in","tolerance","time","will","be","removed","from","cache"]}
{"code_tokens":["\n","public","String","execute","(","String","callSequence",")","{","\n","String[]","cmds","=","callSequence",".","split","(","\",\"",")",";","\n","for","(","String","cmd",":","cmds",")","{","\n","if","(","cmd",".","startsWith","(","\"r\"",")",")","{","\n","int","count","=","1",";","\n","if","(","cmd",".","length","(",")",">","1",")","{","\n","count","=","Integer",".","parseInt","(","cmd",".","substring","(","1",")",")",";","\n","}","\n","for","(","int","i","=","0",";","i","<","count",";","++i",")","{","\n","spout",".","nextTuple","(",")",";","\n","}","\n","}","else","if","(","cmd",".","startsWith","(","\"a\"",")",")","{","\n","String[]","midStrs","=","cmd",".","substring","(","1",")",".","split","(","\"_\"",")",";","\n","MessageId","msgId","=","new","MessageId","(","midStrs[0],","midStrs[1],","Long",".","parseLong","(","midStrs[1]",")",")",";","\n","spout",".","ack","(","msgId",")",";","\n","}","else","if","(","cmd",".","startsWith","(","\"f\"",")",")","{","\n","String[]","midStrs","=","cmd",".","substring","(","1",")",".","split","(","\"_\"",")",";","\n","MessageId","msgId","=","new","MessageId","(","midStrs[0],","midStrs[1],","Long",".","parseLong","(","midStrs[1]",")",")",";","\n","spout",".","fail","(","msgId",")",";","\n","}","\n","}","\n","return","collector",".","getOffsetSequenceAndReset","(",")",";","\n"],"docstring_tokens":["Execute","a","sequence","of","calls","to","EventHubSpout"]}
{"code_tokens":["\n","@VisibleForTesting\n","List<Path>","logsForPort","(","String","user,","Path","portDir",")","{","\n","try","{","\n","List<Path>","workerLogs","=","directoryCleaner",".","getFilesForDir","(","portDir",")",".","stream","(",")","\n",".","filter","(","file","->","WORKER_LOG_FILENAME_PATTERN",".","asPredicate","(",")",".","test","(","file",".","getFileName","(",")",".","toString","(",")",")",")","\n",".","collect","(","toList","(",")",")",";","\n\n","return","workerLogs",".","stream","(",")","\n",".","filter","(","log","->","resourceAuthorizer",".","isUserAllowedToAccessFile","(","user,","WorkerLogs",".","getTopologyPortWorkerLog","(","log",")",")",")","\n",".","map","(","Unchecked",".","function","(","p","->","Pair",".","of","(","p,","Files",".","getLastModifiedTime","(","p",")",")",")",")","\n",".","sorted","(","Comparator",".","comparing","(","(","Pair<Path,","FileTime>","p",")","->","p",".","getRight","(",")",")",".","reversed","(",")",")","\n",".","map","(","p","->","p",".","getLeft","(",")",")","\n",".","collect","(","toList","(",")",")",";","\n","}","catch","(","IOException","e",")","{","\n","throw","new","RuntimeException","(","e",")",";","\n","}","\n"],"docstring_tokens":["Get","the","filtered,","authorized,","sorted","log","files","for","a","port"]}
{"code_tokens":["\n","public","static","String","urlFormat","(","String","fmt,","Object",".",".",".","args",")","{","\n","String[]","argsEncoded","=","new","String[args",".","length]",";","\n","for","(","int","i","=","0",";","i","<","args",".","length",";","i++",")","{","\n","argsEncoded[i]","=","Utils",".","urlEncodeUtf8","(","String",".","valueOf","(","args[i]",")",")",";","\n","}","\n","return","String",".","format","(","fmt,","argsEncoded",")",";","\n"],"docstring_tokens":["url","formatter","for","log","links"]}
{"code_tokens":["\n","public","static","int","getLogviewerPort","(","Map<String,","Object>","config",")","{","\n","if","(","isSecureLogviewer","(","config",")",")","{","\n","return","(","int",")","config",".","get","(","DaemonConfig",".","LOGVIEWER_HTTPS_PORT",")",";","\n","}","\n","return","(","int",")","config",".","get","(","DaemonConfig",".","LOGVIEWER_PORT",")",";","\n"],"docstring_tokens":["Get","logviewer","port","depending","on","whether","the","logviewer","is","secure","or","not"]}
{"code_tokens":["\n","public","String","execute","(","String","callSequence",")","{","\n\n","String[]","cmds","=","callSequence",".","split","(","\",\"",")",";","\n","StringBuilder","ret","=","new","StringBuilder","(",")",";","\n","for","(","String","cmd",":","cmds",")","{","\n","if","(","cmd",".","startsWith","(","\"r\"",")",")","{","\n","int","count","=","1",";","\n","if","(","cmd",".","length","(",")",">","1",")","{","\n","count","=","Integer",".","parseInt","(","cmd",".","substring","(","1",")",")",";","\n","}","\n","for","(","int","i","=","0",";","i","<","count",";","++i",")","{","\n","EventDataWrap","ed","=","pm",".","receive","(",")",";","\n","if","(","ed","==","null",")","{","\n","ret",".","append","(","\"null,\"",")",";","\n","}","else","{","\n","ret",".","append","(","ed",".","getMessageId","(",")",".","getOffset","(",")",")",";","\n","ret",".","append","(","\",\"",")",";","\n","}","\n","}","\n","}","else","if","(","cmd",".","startsWith","(","\"a\"",")",")","{","\n","pm",".","ack","(","cmd",".","substring","(","1",")",")",";","\n","}","else","if","(","cmd",".","startsWith","(","\"f\"",")",")","{","\n","pm",".","fail","(","cmd",".","substring","(","1",")",")",";","\n","}","\n","}","\n","if","(","ret",".","length","(",")",">","0",")","{","\n","ret",".","setLength","(","ret",".","length","(",")","-","1",")",";","\n","}","\n","return","ret",".","toString","(",")",";","\n"],"docstring_tokens":["Execute","a","sequence","of","calls","to","Partition","Manager"]}
{"code_tokens":["\n","public","static","void","main","(","String[]","args",")","throws","Exception","{","\n","Options","options","=","new","Options","(",")",";","\n","options",".","addOption","(","Option",".","builder","(","\"a\"",")","\n",".","longOpt","(","\"anonymize\"",")","\n",".","desc","(","\"Strip","out","any","possibly","identifiable","information\"",")","\n",".","build","(",")",")",";","\n","options",".","addOption","(","Option",".","builder","(","\"o\"",")","\n",".","longOpt","(","\"output-dir\"",")","\n",".","argName","(","\"<file>\"",")","\n",".","hasArg","(",")","\n",".","desc","(","\"Where","to","write","(","defaults","to","\"","+","DEFAULT_OUT_DIR","+","\"",")","\"",")","\n",".","build","(",")",")",";","\n","options",".","addOption","(","Option",".","builder","(","\"h\"",")","\n",".","longOpt","(","\"help\"",")","\n",".","desc","(","\"Print","a","help","message\"",")","\n",".","build","(",")",")",";","\n","CommandLineParser","parser","=","new","DefaultParser","(",")",";","\n","CommandLine","cmd","=","null",";","\n","boolean","printHelp","=","false",";","\n","try","{","\n","cmd","=","parser",".","parse","(","options,","args",")",";","\n","}","catch","(","ParseException","e",")","{","\n","System",".","err",".","println","(","\"ERROR","\"","+","e",".","getMessage","(",")",")",";","\n","printHelp","=","true",";","\n","}","\n","if","(","printHelp","||","cmd",".","hasOption","(","'h'",")",")","{","\n","new","HelpFormatter","(",")",".","printHelp","(","\"CaptureLoad","[options]","[topologyName]*\",","options",")",";","\n","return",";","\n","}","\n\n","Config","conf","=","new","Config","(",")",";","\n","int","exitStatus","=","-1",";","\n","String","outputDir","=","DEFAULT_OUT_DIR",";","\n","if","(","cmd",".","hasOption","(","'o'",")",")","{","\n","outputDir","=","cmd",".","getOptionValue","(","'o'",")",";","\n","}","\n","File","baseOut","=","new","File","(","outputDir",")",";","\n","LOG",".","info","(","\"Will","save","captured","topologies","to","{","}","\",","baseOut",")",";","\n","baseOut",".","mkdirs","(",")",";","\n\n","try","(","NimbusClient","nc","=","NimbusClient",".","getConfiguredClient","(","conf",")",")","{","\n","Nimbus",".","Iface","client","=","nc",".","getClient","(",")",";","\n","List<String>","topologyNames","=","cmd",".","getArgList","(",")",";","\n\n","for","(","TopologySummary","topologySummary:","client",".","getTopologySummaries","(",")",")","{","\n","if","(","topologyNames",".","isEmpty","(",")","||","topologyNames",".","contains","(","topologySummary",".","get_name","(",")",")",")","{","\n","TopologyLoadConf","capturedConf","=","captureTopology","(","client,","topologySummary",")",";","\n","if","(","cmd",".","hasOption","(","'a'",")",")","{","\n","capturedConf","=","capturedConf",".","anonymize","(",")",";","\n","}","\n","capturedConf",".","writeTo","(","new","File","(","baseOut,","capturedConf",".","name","+","\"",".","yaml\"",")",")",";","\n","}","\n","}","\n\n","exitStatus","=","0",";","\n","}","catch","(","Exception","e",")","{","\n","LOG",".","error","(","\"Error","trying","to","capture","topologies",".",".",".","\",","e",")",";","\n","}","finally","{","\n","System",".","exit","(","exitStatus",")",";","\n","}","\n"],"docstring_tokens":["Main","entry","point","for","CaptureLoad","command"]}
{"code_tokens":["\n","@Override\n","public","String","toLocal","(","String","principal",")","{","\n","//This","technically","does","not","conform","with","rfc1964,","but","should","work","so\n","//","long","as","you","don't","have","any","really","odd","names","in","your","KDC",".","\n","return","principal","==","null","?","null",":","principal",".","split","(","\"[/@]\"",")","[0]",";","\n"],"docstring_tokens":["Convert","a","Principal","to","a","local","user","name"]}
{"code_tokens":["\n","public","static","void","reset","(",")","{","\n","ctxt",".","remove","(",")",";","\n"],"docstring_tokens":["Reset","the","context","back","to","a","default"]}
{"code_tokens":["\n","public","Subject","subject","(",")","{","\n","return","subject",";","\n"],"docstring_tokens":["Retrieve","client","subject","associated","with","this","request","context"]}
{"code_tokens":["\n","public","Principal","principal","(",")","{","\n","if","(","subject","==","null",")","{","\n","return","null",";","\n","}","\n","Set<Principal>","princs","=","subject",".","getPrincipals","(",")",";","\n","if","(","princs",".","size","(",")","==","0",")","{","\n","return","null",";","\n","}","\n","return","(","Principal",")","(","princs",".","toArray","(",")","[0]",")",";","\n"],"docstring_tokens":["The","primary","principal","associated","current","subject"]}
{"code_tokens":["\n","public","boolean","isImpersonating","(",")","{","\n","return","this",".","realPrincipal","!=","null","&&","!this",".","realPrincipal",".","equals","(","this",".","principal","(",")",")",";","\n"],"docstring_tokens":["Check","whether","context","is","impersonating"]}
{"code_tokens":["\n","private","TxnRecord","getTxnRecord","(","Path","indexFilePath",")","throws","IOException","{","\n","Path","tmpPath","=","tmpFilePath","(","indexFilePath",".","toString","(",")",")",";","\n","if","(","this",".","options",".","fs",".","exists","(","indexFilePath",")",")","{","\n","return","readTxnRecord","(","indexFilePath",")",";","\n","}","else","if","(","this",".","options",".","fs",".","exists","(","tmpPath",")",")","{","\n","return","readTxnRecord","(","tmpPath",")",";","\n","}","\n","return","new","TxnRecord","(","0,","options",".","currentFile",".","toString","(",")",",","0",")",";","\n"],"docstring_tokens":["Reads","the","last","txn","record","from","index","file","if","it","exists,","if","not","from",".tmp","file","if","exists"]}
{"code_tokens":["\n","public","Stream<T>","filter","(","Predicate<?","super","T>","predicate",")","{","\n","return","new","Stream<>","(","streamBuilder,","addProcessorNode","(","new","FilterProcessor<>","(","predicate",")",",","VALUE,","true",")",")",";","\n"],"docstring_tokens":["Returns","a","stream","consisting","of","the","elements","of","this","stream","that","matches","the","given","filter"]}
{"code_tokens":["\n","public","<K,","V>","PairStream<K,","V>","mapToPair","(","PairFunction<?","super","T,","?","extends","K,","?","extends","V>","function",")","{","\n","return","new","PairStream<>","(","streamBuilder,","addProcessorNode","(","new","MapProcessor<>","(","function",")",",","KEY_VALUE",")",")",";","\n"],"docstring_tokens":["Returns","a","stream","of","key-value","pairs","by","applying","a","PairFunction","on","each","value","of","this","stream"]}
{"code_tokens":["\n","public","void","forEach","(","Consumer<?","super","T>","action",")","{","\n","addProcessorNode","(","new","ForEachProcessor<>","(","action",")",",","new","Fields","(",")",")",";","\n"],"docstring_tokens":["Performs","an","action","for","each","element","of","this","stream"]}
{"code_tokens":["\n","public","void","print","(",")","{","\n","forEach","(","new","PrintConsumer<T>","(",")",")",";","\n"],"docstring_tokens":["Print","the","values","in","this","stream"]}
{"code_tokens":["\n","public","<V>","PairStream<T,","V>","stateQuery","(","StreamState<T,","V>","streamState",")","{","\n","//","need","field","grouping","for","state","query","so","that","the","query","is","routed","to","the","correct","task\n","Node","newNode","=","partitionBy","(","VALUE,","node",".","getParallelism","(",")",")",".","addProcessorNode","(","new","StateQueryProcessor<>","(","streamState",")",",","KEY_VALUE",")",";","\n","return","new","PairStream<>","(","streamBuilder,","newNode",")",";","\n"],"docstring_tokens":["Queries","the","given","stream","state","with","the","values","in","this","stream","as","the","keys"]}
{"code_tokens":["\n","@Override\n","public","void","write","(","ByteBuf","dest",")","{","\n","for","(","TaskMessage","msg",":","msgs",")","{","\n","writeTaskMessage","(","dest,","msg",")",";","\n","}","\n\n","//add","a","END_OF_BATCH","indicator\n","ControlMessage",".","EOB_MESSAGE",".","write","(","dest",")",";","\n"],"docstring_tokens":["create","a","buffer","containing","the","encoding","of","this","batch"]}
{"code_tokens":["\n","void","init","(",")","throws","MetricException","{","\n","this",".","stringMetadataCache","=","StringMetadataCache",".","getWritableStringMetadataCache","(",")",";","\n"],"docstring_tokens":["Init","routine","called","once","the","Metadata","cache","has","been","created"]}
{"code_tokens":["\n","@Override\n","public","void","run","(",")","{","\n","while","(","!shutdown",")","{","\n","try","{","\n","Metric","m","=","(","Metric",")","queue",".","take","(",")",";","\n","processInsert","(","m",")",";","\n","}","catch","(","Exception","e",")","{","\n","LOG",".","error","(","\"Failed","to","insert","metric\",","e",")",";","\n","if","(","this",".","failureMeter","!=","null",")","{","\n","this",".","failureMeter",".","mark","(",")",";","\n","}","\n","}","\n","}","\n"],"docstring_tokens":["Run","routine","to","wait","for","metrics","on","a","queue","and","insert","into","RocksDB"]}
{"code_tokens":["\n","private","void","processInsert","(","Metric","metric",")","throws","MetricException","{","\n\n","//","convert","all","strings","to","numeric","Ids","for","the","metric","key","and","add","to","the","metadata","cache\n","long","metricTimestamp","=","metric",".","getTimestamp","(",")",";","\n","Integer","topologyId","=","storeMetadataString","(","KeyType",".","TOPOLOGY_STRING,","metric",".","getTopologyId","(",")",",","metricTimestamp",")",";","\n","Integer","metricId","=","storeMetadataString","(","KeyType",".","METRIC_STRING,","metric",".","getMetricName","(",")",",","metricTimestamp",")",";","\n","Integer","componentId","=","storeMetadataString","(","KeyType",".","COMPONENT_STRING,","metric",".","getComponentId","(",")",",","metricTimestamp",")",";","\n","Integer","executorId","=","storeMetadataString","(","KeyType",".","EXEC_ID_STRING,","metric",".","getExecutorId","(",")",",","metricTimestamp",")",";","\n","Integer","hostId","=","storeMetadataString","(","KeyType",".","HOST_STRING,","metric",".","getHostname","(",")",",","metricTimestamp",")",";","\n","Integer","streamId","=","storeMetadataString","(","KeyType",".","STREAM_ID_STRING,","metric",".","getStreamId","(",")",",","metricTimestamp",")",";","\n\n","RocksDbKey","key","=","RocksDbKey",".","createMetricKey","(","AggLevel",".","AGG_LEVEL_NONE,","topologyId,","metric",".","getTimestamp","(",")",",","metricId,\n","componentId,","executorId,","hostId,","metric",".","getPort","(",")",",","streamId",")",";","\n\n","//","save","metric","key/value","to","be","batched\n","RocksDbValue","value","=","new","RocksDbValue","(","metric",")",";","\n","insertBatch",".","put","(","key,","value",")",";","\n\n","//","Aggregate","matching","metrics","over","bucket","timeframes",".","\n","//","We'll","process","starting","with","the","longest","bucket",".","If","the","metric","for","this","does","not","exist,","we","don't","have","to\n","//","search","for","the","remaining","bucket","metrics",".","\n","ListIterator","li","=","aggBuckets",".","listIterator","(","aggBuckets",".","size","(",")",")",";","\n","boolean","populate","=","true",";","\n","while","(","li",".","hasPrevious","(",")",")","{","\n","AggLevel","bucket","=","(","AggLevel",")","li",".","previous","(",")",";","\n","Metric","aggMetric","=","new","Metric","(","metric",")",";","\n","aggMetric",".","setAggLevel","(","bucket",")",";","\n\n","long","msToBucket","=","1000L","*","60L","*","bucket",".","getValue","(",")",";","\n","long","roundedToBucket","=","msToBucket","*","(","metric",".","getTimestamp","(",")","/","msToBucket",")",";","\n","aggMetric",".","setTimestamp","(","roundedToBucket",")",";","\n\n","RocksDbKey","aggKey","=","RocksDbKey",".","createMetricKey","(","bucket,","topologyId,","aggMetric",".","getTimestamp","(",")",",","metricId,\n","componentId,","executorId,","hostId,","aggMetric",".","getPort","(",")",",","streamId",")",";","\n\n","if","(","populate",")","{","\n","//","retrieve","any","existing","aggregation","matching","this","one","and","update","the","values\n","if","(","store",".","populateFromKey","(","aggKey,","aggMetric",")",")","{","\n","aggMetric",".","addValue","(","metric",".","getValue","(",")",")",";","\n","}","else","{","\n","//","aggregating","metric","did","not","exist,","don't","look","for","further","ones","with","smaller","timestamps\n","populate","=","false",";","\n","}","\n","}","\n\n","//","save","metric","key/value","to","be","batched\n","RocksDbValue","aggVal","=","new","RocksDbValue","(","aggMetric",")",";","\n","insertBatch",".","put","(","aggKey,","aggVal",")",";","\n","}","\n\n","processBatchInsert","(","insertBatch",")",";","\n\n","insertBatch",".","clear","(",")",";","\n"],"docstring_tokens":["Performs","the","actual","metric","insert,","and","aggregates","over","all","bucket","times"]}
{"code_tokens":["\n","public","static","InputStream","fromConf","(","Map<String,","Object>","conf",")","{","\n","String","component","=","(","String",")","conf",".","get","(","\"from\"",")",";","\n","String","toComp","=","(","String",")","conf",".","get","(","\"to\"",")",";","\n","NormalDistStats","execTime","=","NormalDistStats",".","fromConf","(","(","Map<String,","Object>",")","conf",".","get","(","\"execTime\"",")",")",";","\n","NormalDistStats","processTime","=","NormalDistStats",".","fromConf","(","(","Map<String,","Object>",")","conf",".","get","(","\"processTime\"",")",")",";","\n","Map<String,","Object>","grouping","=","(","Map<String,","Object>",")","conf",".","get","(","\"grouping\"",")",";","\n","GroupingType","groupingType","=","GroupingType",".","fromConf","(","(","String",")","grouping",".","get","(","\"type\"",")",")",";","\n","String","streamId","=","(","String",")","grouping",".","getOrDefault","(","\"streamId\",","\"default\"",")",";","\n","return","new","InputStream","(","component,","toComp,","streamId,","execTime,","processTime,","groupingType",")",";","\n"],"docstring_tokens":["Create","an","output","stream","from","a","config"]}
{"code_tokens":["\n","public","synchronized","GlobalStreamId","gsid","(",")","{","\n","if","(","gsid","==","null",")","{","\n","gsid","=","new","GlobalStreamId","(","fromComponent,","id",")",";","\n","}","\n","return","gsid",";","\n"],"docstring_tokens":["Get","the","global","stream","id","for","this","input","stream"]}
{"code_tokens":["\n","public","void","updateState","(","List<TridentTuple>","tuples,","TridentCollector","collector",")","{","\n","String","topic","=","null",";","\n","try","{","\n","final","long","startTime","=","System",".","currentTimeMillis","(",")",";","\n","int","numberOfRecords","=","tuples",".","size","(",")",";","\n","List<Future<RecordMetadata>>","futures","=","new","ArrayList<>","(","numberOfRecords",")",";","\n","for","(","TridentTuple","tuple",":","tuples",")","{","\n","topic","=","topicSelector",".","getTopic","(","tuple",")",";","\n","V","messageFromTuple","=","mapper",".","getMessageFromTuple","(","tuple",")",";","\n","K","keyFromTuple","=","mapper",".","getKeyFromTuple","(","tuple",")",";","\n\n","if","(","topic","!=","null",")","{","\n","if","(","messageFromTuple","!=","null",")","{","\n","Future<RecordMetadata>","result","=","producer",".","send","(","new","ProducerRecord<>","(","topic,","keyFromTuple,","messageFromTuple",")",")",";","\n","futures",".","add","(","result",")",";","\n","}","else","{","\n","LOG",".","warn","(","\"skipping","Message","with","Key","{","}","as","message","was","null\",","keyFromTuple",")",";","\n","}","\n\n","}","else","{","\n","LOG",".","warn","(","\"skipping","key","=","{","}",",","topic","selector","returned","null",".","\",","keyFromTuple",")",";","\n","}","\n","}","\n\n","int","emittedRecords","=","futures",".","size","(",")",";","\n","List<ExecutionException>","exceptions","=","new","ArrayList<>","(","emittedRecords",")",";","\n","for","(","Future<RecordMetadata>","future",":","futures",")","{","\n","try","{","\n","future",".","get","(",")",";","\n","}","catch","(","ExecutionException","e",")","{","\n","exceptions",".","add","(","e",")",";","\n","}","\n","}","\n\n","if","(","exceptions",".","size","(",")",">","0",")","{","\n","StringBuilder","errorMsg","=","new","StringBuilder","(","\"Could","not","retrieve","result","for","messages","\"",")",";","\n","errorMsg",".","append","(","tuples",")",".","append","(","\"","from","topic","=","\"",")",".","append","(","topic",")","\n",".","append","(","\"","because","of","the","following","exceptions:\"",")",".","append","(","System",".","lineSeparator","(",")",")",";","\n\n","for","(","ExecutionException","exception",":","exceptions",")","{","\n","errorMsg","=","errorMsg",".","append","(","exception",".","getMessage","(",")",")",".","append","(","System",".","lineSeparator","(",")",")",";","\n","}","\n","String","message","=","errorMsg",".","toString","(",")",";","\n","LOG",".","error","(","message",")",";","\n","throw","new","FailedException","(","message",")",";","\n","}","\n","long","latestTime","=","System",".","currentTimeMillis","(",")",";","\n","LOG",".","info","(","\"Emitted","record","{","}","sucessfully","in","{","}","ms","to","topic","{","}","\",","emittedRecords,","latestTime","-","startTime,","topic",")",";","\n\n","}","catch","(","Exception","ex",")","{","\n","String","errorMsg","=","\"Could","not","send","messages","\"","+","tuples","+","\"","to","topic","=","\"","+","topic",";","\n","LOG",".","warn","(","errorMsg,","ex",")",";","\n","throw","new","FailedException","(","errorMsg,","ex",")",";","\n","}","\n"],"docstring_tokens":["Write","the","given","tuples","to","Kafka"]}
{"code_tokens":["\n","public","void","readBlobTo","(","String","key,","OutputStream","out,","Subject","who",")","throws","IOException,","KeyNotFoundException,","AuthorizationException","{","\n","InputStreamWithMeta","in","=","getBlob","(","key,","who",")",";","\n","if","(","in","==","null",")","{","\n","throw","new","IOException","(","\"Could","not","find","\"","+","key",")",";","\n","}","\n","byte[]","buffer","=","new","byte[2048]",";","\n","int","len","=","0",";","\n","try","{","\n","while","(","(","len","=","in",".","read","(","buffer",")",")",">","0",")","{","\n","out",".","write","(","buffer,","0,","len",")",";","\n","}","\n","}","finally","{","\n","in",".","close","(",")",";","\n","out",".","flush","(",")",";","\n","}","\n"],"docstring_tokens":["Reads","the","blob","from","the","blob","store","and","writes","it","into","the","output","stream"]}
{"code_tokens":["\n","public","byte[]","readBlob","(","String","key,","Subject","who",")","throws","IOException,","KeyNotFoundException,","AuthorizationException","{","\n","ByteArrayOutputStream","out","=","new","ByteArrayOutputStream","(",")",";","\n","readBlobTo","(","key,","out,","who",")",";","\n","byte[]","bytes","=","out",".","toByteArray","(",")",";","\n","out",".","close","(",")",";","\n","return","bytes",";","\n"],"docstring_tokens":["Wrapper","around","readBlobTo","which","returns","a","ByteArray","output","stream"]}
{"code_tokens":["\n","public","Set<String>","storedTopoIds","(",")","{","\n","return","filterAndListKeys","(","TO_TOPO_ID",")",";","\n"],"docstring_tokens":["Get","IDs","stored","in","blob","store"]}
{"code_tokens":["\n","public","void","updateLastBlobUpdateTime","(",")","throws","IOException","{","\n","//","default","implementation","is","a","NOOP",".","\n"],"docstring_tokens":["Updates","the","last","update","time","of","existing","blobs","in","the","blobstore","to","the","current","time"]}
{"code_tokens":["\n","public","void","validateBlobUpdateTime","(",")","throws","IOException","{","\n","//","default","implementation","is","a","NOOP",".","\n"],"docstring_tokens":["Validates","that","the","blob","update","time","of","the","blobstore","is","up","to","date","with","the","current","existing","blobs"]}
{"code_tokens":["\n","@Override\n","protected","Cluster","make","(","Map<String,","Object>","topoConf",")","{","\n","CassandraConf","cassandraConf","=","new","CassandraConf","(","topoConf",")",";","\n\n","Cluster",".","Builder","cluster","=","Cluster",".","builder","(",")","\n",".","withoutJMXReporting","(",")","\n",".","withoutMetrics","(",")","\n",".","addContactPoints","(","cassandraConf",".","getNodes","(",")",")","\n",".","withPort","(","cassandraConf",".","getPort","(",")",")","\n",".","withRetryPolicy","(","cassandraConf",".","getRetryPolicy","(",")",")","\n",".","withReconnectionPolicy","(","new","ExponentialReconnectionPolicy","(","\n","cassandraConf",".","getReconnectionPolicyBaseMs","(",")",",\n","cassandraConf",".","getReconnectionPolicyMaxMs","(",")",")",")","\n",".","withLoadBalancingPolicy","(","cassandraConf",".","getLoadBalancingPolicy","(",")",")",";","\n","cluster",".","getConfiguration","(",")",".","getSocketOptions","(",")",".","setReadTimeoutMillis","(","(","int",")","cassandraConf",".","getSocketReadTimeoutMillis","(",")",")",";","\n","cluster",".","getConfiguration","(",")",".","getSocketOptions","(",")",".","setConnectTimeoutMillis","(","(","int",")","cassandraConf",".","getSocketConnectTimeoutMillis","(",")",")",";","\n\n","final","String","username","=","cassandraConf",".","getUsername","(",")",";","\n","final","String","password","=","cassandraConf",".","getPassword","(",")",";","\n\n","if","(","StringUtils",".","isNotEmpty","(","username",")","&&","StringUtils",".","isNotEmpty","(","password",")",")","{","\n","cluster",".","withAuthProvider","(","new","PlainTextAuthProvider","(","username,","password",")",")",";","\n","}","\n\n","QueryOptions","options","=","new","QueryOptions","(",")","\n",".","setConsistencyLevel","(","cassandraConf",".","getConsistencyLevel","(",")",")",";","\n","cluster",".","withQueryOptions","(","options",")",";","\n\n","PoolingOptions","poolOps","=","new","PoolingOptions","(",")",";","\n","poolOps",".","setMaxQueueSize","(","cassandraConf",".","getPoolMaxQueueSize","(",")",")",";","\n","poolOps",".","setHeartbeatIntervalSeconds","(","cassandraConf",".","getHeartbeatIntervalSeconds","(",")",")",";","\n","poolOps",".","setIdleTimeoutSeconds","(","cassandraConf",".","getIdleTimeoutSeconds","(",")",")",";","\n","poolOps",".","setMaxRequestsPerConnection","(","HostDistance",".","LOCAL,","cassandraConf",".","getMaxRequestPerConnectionLocal","(",")",")",";","\n","poolOps",".","setMaxRequestsPerConnection","(","HostDistance",".","REMOTE,","cassandraConf",".","getMaxRequestPerConnectionRemote","(",")",")",";","\n","cluster",".","withPoolingOptions","(","poolOps",")",";","\n\n","return","cluster",".","build","(",")",";","\n"],"docstring_tokens":["Creates","a","new","Cluster","based","on","the","specified","configuration"]}
{"code_tokens":["\n","public","void","addSupervisor","(","org",".","apache",".","storm",".","daemon",".","supervisor",".","Supervisor","supervisor",")","{","\n","assignmentsDistributer",".","addLocalSupervisor","(","supervisor",")",";","\n"],"docstring_tokens":["Used","for","local","cluster"]}
{"code_tokens":["\n","public","static","void","main","(","String","[]","args",")","throws","Exception","{","\n","Utils",".","setupDefaultUncaughtExceptionHandler","(",")",";","\n","Map<String,","Object>","conf","=","ConfigUtils",".","readStormConfig","(",")",";","\n","StormMetricsRegistry","metricsRegistry","=","new","StormMetricsRegistry","(",")",";","\n","try","(","DRPCServer","server","=","new","DRPCServer","(","conf,","metricsRegistry",")",")","{","\n","metricsRegistry",".","startMetricsReporters","(","conf",")",";","\n","Utils",".","addShutdownHookWithForceKillIn1Sec","(","(",")","->","{","\n","server",".","meterShutdownCalls",".","mark","(",")",";","\n","metricsRegistry",".","stopMetricsReporters","(",")",";","\n","server",".","close","(",")",";","\n","}",")",";","\n","server",".","start","(",")",";","\n","server",".","awaitTermination","(",")",";","\n","}","\n"],"docstring_tokens":["Main","method","to","start","the","server"]}
{"code_tokens":["\n","private","void","maybeAddCheckpointSpout","(",")","{","\n","if","(","hasStatefulBolt",")","{","\n","setSpout","(","CHECKPOINT_COMPONENT_ID,","new","CheckpointSpout","(",")",",","1",")",";","\n","}","\n"],"docstring_tokens":["If","the","topology","has","at","least","one","stateful","bolt","add","a","CheckpointSpout","component","to","the","topology"]}
{"code_tokens":["\n","@Override\n","public","Map<String,","Object>","load","(","String","configKey",")","{","\n","if","(","targetUri","==","null",")","{","\n","return","null",";","\n","}","\n\n","//","Check","for","new","file","every","so","often\n","int","currentTimeSecs","=","Time",".","currentTimeSecs","(",")",";","\n","if","(","lastReturnedValue","!=","null","&&","(","(","currentTimeSecs","-","lastReturnedTime",")","<","artifactoryPollTimeSecs",")",")","{","\n","LOG",".","debug","(","\"currentTimeSecs:","{","}",";","lastReturnedTime","{","}",";","artifactoryPollTimeSecs:","{","}",".","Returning","our","last","map",".","\",\n","currentTimeSecs,","lastReturnedTime,","artifactoryPollTimeSecs",")",";","\n","return","(","Map<String,","Object>",")","lastReturnedValue",".","get","(","configKey",")",";","\n","}","\n\n","try","{","\n","Map<String,","Object>","raw","=","loadFromUri","(","targetUri",")",";","\n","if","(","raw","!=","null",")","{","\n","return","(","Map<String,","Object>",")","raw",".","get","(","configKey",")",";","\n","}","\n","}","catch","(","Exception","e",")","{","\n","LOG",".","error","(","\"Failed","to","load","from","uri","{","}","\",","targetUri",")",";","\n","}","\n","return","null",";","\n"],"docstring_tokens":["Load","the","configs","associated","with","the","configKey","from","the","targetURI"]}
{"code_tokens":["\n","private","void","loginHadoopUser","(","Subject","subject",")","{","\n","Class<?>","ugi",";","\n","try","{","\n","ugi","=","Class",".","forName","(","\"org",".","apache",".","hadoop",".","security",".","UserGroupInformation\"",")",";","\n","}","catch","(","ClassNotFoundException","e",")","{","\n","LOG",".","info","(","\"Hadoop","was","not","found","on","the","class","path\"",")",";","\n","return",";","\n","}","\n","try","{","\n","Method","isSecEnabled","=","ugi",".","getMethod","(","\"isSecurityEnabled\"",")",";","\n","if","(","!","(","(","Boolean",")","isSecEnabled",".","invoke","(","null",")",")",")","{","\n","LOG",".","warn","(","\"Hadoop","is","on","the","classpath","but","not","configured","for","\"\n","+","\"security,","if","you","want","security","you","need","to","be","sure","that","\"\n","+","\"hadoop",".","security",".","authentication=kerberos","in","core-site",".","xml","\"\n","+","\"in","your","jar\"",")",";","\n","return",";","\n","}","\n\n","LOG",".","info","(","\"Invoking","Hadoop","UserGroupInformation",".","loginUserFromSubject",".","\"",")",";","\n","Method","login","=","ugi",".","getMethod","(","\"loginUserFromSubject\",","Subject",".","class",")",";","\n","login",".","invoke","(","null,","subject",")",";","\n\n","//Refer","to","STORM-3606","for","details\n","LOG",".","warn","(","\"UserGroupInformation",".","loginUserFromSubject","will","spawn","a","TGT","renewal","thread","(","\\\"TGT","Renewer","for","<username>\\\"",")","\"\n","+","\"to","execute","\\\"kinit","-R\\\"","command","some","time","before","the","current","TGT","expires",".","\"\n","+","\"It","will","fail","because","TGT","is","not","in","the","local","TGT","cache","and","the","thread","will","eventually","abort",".","\"\n","+","\"Exceptions","from","this","TGT","renewal","thread","can","be","ignored",".","Note:","TGT","for","the","Worker","is","kept","in","memory",".","\"\n","+","\"Please","refer","to","STORM-3606","for","detailed","explanations\"",")",";","\n","}","catch","(","Exception","e",")","{","\n","LOG",".","error","(","\"Something","went","wrong","while","trying","to","initialize","Hadoop","through","reflection",".","This","version","of","hadoop","\"\n","+","\"may","not","be","compatible",".","\",","e",")",";","\n","}","\n"],"docstring_tokens":["Hadoop","does","not","just","go","off","of","a","TGT,","it","needs","a","bit","more"]}
{"code_tokens":["\n","public","static","void","validateField","(","String","fieldName,","Map<String,","Object>","conf",")","{","\n","validateField","(","fieldName,","conf,","getConfigClasses","(",")",")",";","\n"],"docstring_tokens":["Validates","a","field","given","field","name","as","string","uses","Config.java","as","the","default","config","class"]}
{"code_tokens":["\n","public","static","void","validateFields","(","Map<String,","Object>","conf",")","{","\n","validateFields","(","conf,","getConfigClasses","(",")",")",";","\n"],"docstring_tokens":["Validate","all","confs","in","map"]}
{"code_tokens":["\n","public","ByTopicRecordTranslator<K,","V>","forTopic","(","String","topic,","Func<ConsumerRecord<K,","V>,","List<Object>>","func,","Fields","fields",")","{","\n","return","forTopic","(","topic,","new","SimpleRecordTranslator<>","(","func,","fields",")",")",";","\n"],"docstring_tokens":["Configure","a","translator","for","a","given","topic","with","tuples","to","be","emitted","to","the","default","stream"]}
{"code_tokens":["\n","public","ByTopicRecordTranslator<K,","V>","forTopic","(","String","topic,","Func<ConsumerRecord<K,","V>,\n","List<Object>>","func,","Fields","fields,","String","stream",")","{","\n","return","forTopic","(","topic,","new","SimpleRecordTranslator<>","(","func,","fields,","stream",")",")",";","\n"],"docstring_tokens":["Configure","a","translator","for","a","given","topic"]}
{"code_tokens":["\n","public","ByTopicRecordTranslator<K,","V>","forTopic","(","String","topic,","RecordTranslator<K,","V>","translator",")","{","\n","if","(","topicToTranslator",".","containsKey","(","topic",")",")","{","\n","throw","new","IllegalStateException","(","\"Topic","\"","+","topic","+","\"","is","already","registered\"",")",";","\n","}","\n","cacheNCheckFields","(","translator",")",";","\n","topicToTranslator",".","put","(","topic,","translator",")",";","\n","return","this",";","\n"],"docstring_tokens":["Configure","a","translator","for","a","given","kafka","topic"]}
{"code_tokens":["\n","public","List<Integer>","emit","(","List<Object>","tuple",")","{","\n","return","emit","(","Utils",".","DEFAULT_STREAM_ID,","tuple",")",";","\n"],"docstring_tokens":["Emits","a","tuple","to","the","default","output","stream"]}
{"code_tokens":["\n","@Override\n","public","boolean","doRequiredTopoFilesExist","(","Map<String,","Object>","conf,","String","topologyId",")","throws","IOException","{","\n","return","ClientSupervisorUtils",".","doRequiredTopoFilesExist","(","conf,","topologyId",")",";","\n"],"docstring_tokens":["Sanity","check","if","everything","the","topology","needs","is","there","for","it","to","run"]}
{"code_tokens":["\n","@Override\n","public","byte[]","slurp","(","File","location",")","throws","IOException","{","\n","return","FileUtils",".","readFileToByteArray","(","location",")",";","\n"],"docstring_tokens":["Read","the","contents","of","a","file","into","a","byte","array"]}
{"code_tokens":["\n","@Override\n","public","void","createSymlink","(","File","link,","File","target",")","throws","IOException","{","\n","if","(","symlinksDisabled",")","{","\n","throw","new","IOException","(","\"Symlinks","have","been","disabled,","this","should","not","be","called\"",")",";","\n","}","\n","Path","plink","=","link",".","toPath","(",")",".","toAbsolutePath","(",")",";","\n","Path","ptarget","=","target",".","toPath","(",")",".","toAbsolutePath","(",")",";","\n","LOG",".","debug","(","\"Creating","symlink","[","{","}","]","to","[","{","}","]\",","plink,","ptarget",")",";","\n","if","(","Files",".","exists","(","plink",")",")","{","\n","if","(","Files",".","isSameFile","(","plink,","ptarget",")",")","{","\n","//It","already","points","where","we","want","it","to\n","return",";","\n","}","\n","FileUtils",".","forceDelete","(","link",")",";","\n","}","\n","Files",".","createSymbolicLink","(","plink,","ptarget",")",";","\n"],"docstring_tokens":["Create","a","symbolic","link","pointing","at","target"]}
{"code_tokens":["\n","@Override\n","public","Double","getValue","(",")","{","\n","return","currentRate",";","\n"],"docstring_tokens":["Reports","the","the","average","rate","of","events","per","second","over","1","minute","for","the","metric"]}
{"code_tokens":["\n","void","update","(",")","{","\n","time","=","(","time","+","1",")","%","values",".","length",";","\n","values[time]","=","counter",".","getCount","(",")",";","\n","currentRate","=","(","(","double",")","(","values[time]","-","values[","(","time","+","1",")","%","values",".","length]",")","/","timeSpanInSeconds",")",";","\n"],"docstring_tokens":["Updates","the","rate","in","a","background","thread","by","a","StormMetricRegistry","at","a","fixed","frequency"]}
{"code_tokens":["\n","@Override\n","public","Map<String,","Object>","load","(","String","configKey",")","{","\n","if","(","targetFilePath","!=","null",")","{","\n","try","{","\n","Map<String,","Object>","raw","=","(","Map<String,","Object>",")","Utils",".","readYamlFile","(","targetFilePath",")",";","\n","if","(","raw","!=","null",")","{","\n","return","(","Map<String,","Object>",")","raw",".","get","(","configKey",")",";","\n","}","\n","}","catch","(","Exception","e",")","{","\n","LOG",".","error","(","\"Failed","to","load","from","file","{","}","\",","targetFilePath",")",";","\n","}","\n","}","\n","return","null",";","\n"],"docstring_tokens":["Load","the","configs","associated","with","the","configKey","from","the","targetFilePath"]}
{"code_tokens":["\n","public","List<Path>","getAllLogsForRootDir","(",")","throws","IOException","{","\n","List<Path>","files","=","new","ArrayList<>","(",")",";","\n","Set<Path>","topoDirFiles","=","getAllWorkerDirs","(",")",";","\n","if","(","topoDirFiles","!=","null",")","{","\n","for","(","Path","portDir",":","topoDirFiles",")","{","\n","files",".","addAll","(","directoryCleaner",".","getFilesForDir","(","portDir",")",")",";","\n","}","\n","}","\n\n","return","files",";","\n"],"docstring_tokens":["Return","a","list","of","all","log","files","from","worker","directories","in","root","log","directory"]}
{"code_tokens":["\n","public","Set<Path>","getAllWorkerDirs","(",")","{","\n","try","(","Stream<Path>","topoDirs","=","Files",".","list","(","logRootDir",")",")","{","\n","return","topoDirs\n",".","filter","(","Files::isDirectory",")","\n",".","flatMap","(","Unchecked",".","function","(","Files::list",")",")","//Worker","dirs\n",".","filter","(","Files::isDirectory",")","\n",".","collect","(","Collectors",".","toCollection","(","TreeSet::new",")",")",";","\n","}","catch","(","IOException","e",")","{","\n","throw","Utils",".","wrapInRuntime","(","e",")",";","\n","}","\n"],"docstring_tokens":["Return","a","set","of","all","worker","directories","in","all","topology","directories","in","root","log","directory"]}
{"code_tokens":["\n","public","String","getTopologyOwnerFromMetadataFile","(","Path","metaFile",")","{","\n","Map<String,","Object>","map","=","(","Map<String,","Object>",")","Utils",".","readYamlFile","(","metaFile",".","toString","(",")",")",";","\n","return","ObjectReader",".","getString","(","map",".","get","(","TOPOLOGY_SUBMITTER_USER",")",",","null",")",";","\n"],"docstring_tokens":["Return","topology","owner","from","worker","meta","file"]}
{"code_tokens":["\n","public","Set<String>","getAliveIds","(","int","nowSecs",")","throws","IOException","{","\n","return","SupervisorUtils",".","readWorkerHeartbeats","(","stormConf",")",".","entrySet","(",")",".","stream","(",")","\n",".","filter","(","entry","->","Objects",".","nonNull","(","entry",".","getValue","(",")",")","&&","!isTimedOut","(","nowSecs,","entry",")",")","\n",".","map","(","Map",".","Entry::getKey",")","\n",".","collect","(","toCollection","(","TreeSet::new",")",")",";","\n"],"docstring_tokens":["Retrieve","the","set","of","alive","worker","IDs"]}
{"code_tokens":["\n","public","SortedSet<Path>","getLogDirs","(","Set<Path>","logDirs,","Predicate<String>","predicate",")","{","\n","//","we","could","also","make","this","static,","but","not","to","do","it","due","to","mock\n","TreeSet<Path>","ret","=","new","TreeSet<>","(",")",";","\n","for","(","Path","logDir:","logDirs",")","{","\n","String","workerId","=","\"\"",";","\n","try","{","\n","Optional<Path>","metaFile","=","getMetadataFileForWorkerLogDir","(","logDir",")",";","\n","if","(","metaFile",".","isPresent","(",")",")","{","\n","workerId","=","getWorkerIdFromMetadataFile","(","metaFile",".","get","(",")",".","toAbsolutePath","(",")",".","normalize","(",")",")",";","\n","if","(","workerId","==","null",")","{","\n","workerId","=","\"\"",";","\n","}","\n","}","\n","}","catch","(","IOException","e",")","{","\n","LOG",".","warn","(","\"Error","trying","to","find","worker",".","yaml","in","{","}","\",","logDir,","e",")",";","\n","}","\n","if","(","predicate",".","test","(","workerId",")",")","{","\n","ret",".","add","(","logDir",")",";","\n","}","\n","}","\n","return","ret",";","\n"],"docstring_tokens":["Finds","directories","for","specific","worker","ids","that","can","be","cleaned","up"]}
{"code_tokens":["\n","public","static","IVersionInfo","getFromClasspath","(","String","cp",")","{","\n","List<String>","classpath","=","Arrays",".","asList","(","cp",".","split","(","File",".","pathSeparator",")",")",";","\n","return","getFromClasspath","(","classpath",")",";","\n"],"docstring_tokens":["Look","for","the","version","of","storm","defined","by","the","given","classpath"]}
{"code_tokens":["\n","private","boolean","isGzipped","(","byte[]","bytes",")","{","\n","return","(","bytes",".","length",">","1",")","&&","(","bytes[0]","==","GZIP_MAGIC_FIRST_BYTE",")","\n","&&","(","bytes[1]","==","GZIP_MAGIC_SECOND_BYTE",")",";","\n"],"docstring_tokens":["Looks","ahead","to","see","if","the","GZIP","magic","constant","is","heading","bytes"]}
{"code_tokens":["\n","public","static","Evaluator","newEvaluator","(","PMML","pmml",")","{","\n","Objects",".","requireNonNull","(","pmml",")",";","\n","final","PMMLManager","pmmlManager","=","new","PMMLManager","(","pmml",")",";","\n","return","(","ModelEvaluator<?>",")","pmmlManager",".","getModelManager","(","null,","ModelEvaluatorFactory",".","getInstance","(",")",")",";","\n"],"docstring_tokens":["Creates","a","new","Evaluator","object","representing","the","PMML","model","defined","in","the","PMML","argument"]}
{"code_tokens":["\n","private","Map<String,","Component>","computeComponentMap","(","StormTopology","topology",")","{","\n","Map<String,","Component>","ret","=","new","HashMap<>","(",")",";","\n\n","Map<String,","SpoutSpec>","spouts","=","topology",".","get_spouts","(",")",";","\n","Map<String,","Bolt>","bolts","=","topology",".","get_bolts","(",")",";","\n\n","if","(","spouts","!=","null",")","{","\n","for","(","Map",".","Entry<String,","SpoutSpec>","entry",":","spouts",".","entrySet","(",")",")","{","\n","String","compId","=","entry",".","getKey","(",")",";","\n","SpoutSpec","spout","=","entry",".","getValue","(",")",";","\n","if","(","!Utils",".","isSystemId","(","compId",")",")","{","\n","Component","comp","=","new","Component","(","ComponentType",".","SPOUT,","compId,","componentToExecs","(","compId",")",",","spout",".","get_common","(",")",".","get_inputs","(",")",")",";","\n","ret",".","put","(","compId,","comp",")",";","\n","}","\n","}","\n","}","\n","if","(","bolts","!=","null",")","{","\n","for","(","Map",".","Entry<String,","Bolt>","entry",":","bolts",".","entrySet","(",")",")","{","\n","String","compId","=","entry",".","getKey","(",")",";","\n","Bolt","bolt","=","entry",".","getValue","(",")",";","\n","if","(","!Utils",".","isSystemId","(","compId",")",")","{","\n","Component","comp","=","new","Component","(","ComponentType",".","BOLT,","compId,","componentToExecs","(","compId",")",",","bolt",".","get_common","(",")",".","get_inputs","(",")",")",";","\n","ret",".","put","(","compId,","comp",")",";","\n","}","\n","}","\n","}","\n\n","//Link","the","components","together\n","if","(","spouts","!=","null",")","{","\n","for","(","Map",".","Entry<String,","SpoutSpec>","entry",":","spouts",".","entrySet","(",")",")","{","\n","Component","spout","=","ret",".","get","(","entry",".","getKey","(",")",")",";","\n","for","(","String","parentId",":","getInputsTo","(","entry",".","getValue","(",")",".","get_common","(",")",")",")","{","\n","ret",".","get","(","parentId",")",".","addChild","(","spout",")",";","\n","}","\n","}","\n","}","\n\n","if","(","bolts","!=","null",")","{","\n","for","(","Map",".","Entry<String,","Bolt>","entry",":","bolts",".","entrySet","(",")",")","{","\n","Component","bolt","=","ret",".","get","(","entry",".","getKey","(",")",")",";","\n","for","(","String","parentId",":","getInputsTo","(","entry",".","getValue","(",")",".","get_common","(",")",")",")","{","\n","ret",".","get","(","parentId",")",".","addChild","(","bolt",")",";","\n","}","\n","}","\n","}","\n","return","ret",";","\n"],"docstring_tokens":["Compute","a","map","of","user","topology","specific","components"]}
{"code_tokens":["\n","public","Double","getOnHeapMemoryRequirement","(","ExecutorDetails","exec",")","{","\n","Double","ret","=","null",";","\n","if","(","hasExecInTopo","(","exec",")",")","{","\n","ret","=","resourceList\n",".","get","(","exec",")",".","getOnHeapMemoryMb","(",")",";","\n",";","\n","}","\n","return","ret",";","\n"],"docstring_tokens":["Gets","the","on","heap","memory","requirement","for","a","certain","task","within","a","topology"]}
{"code_tokens":["\n","public","Double","getOffHeapMemoryRequirement","(","ExecutorDetails","exec",")","{","\n","Double","ret","=","null",";","\n","if","(","hasExecInTopo","(","exec",")",")","{","\n","ret","=","resourceList\n",".","get","(","exec",")",".","getOffHeapMemoryMb","(",")",";","\n","}","\n","return","ret",";","\n"],"docstring_tokens":["Gets","the","off","heap","memory","requirement","for","a","certain","task","within","a","topology"]}
{"code_tokens":["\n","public","Double","getTotalMemReqTask","(","ExecutorDetails","exec",")","{","\n","if","(","hasExecInTopo","(","exec",")",")","{","\n","return","getOffHeapMemoryRequirement","(","exec",")","\n","+","getOnHeapMemoryRequirement","(","exec",")",";","\n","}","\n","return","null",";","\n"],"docstring_tokens":["Gets","the","total","memory","requirement","for","a","task"]}
{"code_tokens":["\n","public","Set<SharedMemory>","getSharedMemoryRequests","(","\n","Collection<ExecutorDetails>","executors\n",")","{","\n","Set<String>","components","=","new","HashSet<>","(",")",";","\n","for","(","ExecutorDetails","exec",":","executors",")","{","\n","String","component","=","executorToComponent",".","get","(","exec",")",";","\n","if","(","component","!=","null",")","{","\n","components",".","add","(","component",")",";","\n","}","\n","}","\n","Set<SharedMemory>","ret","=","new","HashSet<>","(",")",";","\n","if","(","topology","!=","null",")","{","\n","//topology","being","null","is","used","for","tests","We","probably","should","fix","that","at","some","point,\n","//","but","it","is","not","trivial","to","do",".",".",".","\n","Map<String,","Set<String>>","compToSharedName","=","topology",".","get_component_to_shared_memory","(",")",";","\n","if","(","compToSharedName","!=","null",")","{","\n","for","(","String","component",":","components",")","{","\n","Set<String>","sharedNames","=","compToSharedName",".","get","(","component",")",";","\n","if","(","sharedNames","!=","null",")","{","\n","for","(","String","name",":","sharedNames",")","{","\n","ret",".","add","(","topology",".","get_shared_memory","(",")",".","get","(","name",")",")",";","\n","}","\n","}","\n","}","\n","}","\n","}","\n","return","ret",";","\n"],"docstring_tokens":["Gets","the","total","memory","resource","list","for","a","set","of","tasks","that","is","part","of","a","topology"]}
{"code_tokens":["\n","public","NormalizedResourceRequest","getApproximateTotalResources","(",")","{","\n","NormalizedResourceRequest","ret","=","new","NormalizedResourceRequest","(",")",";","\n","for","(","NormalizedResourceRequest","resources",":","resourceList",".","values","(",")",")","{","\n","ret",".","add","(","resources",")",";","\n","}","\n","return","ret",";","\n"],"docstring_tokens":["Get","an","approximate","total","resources","needed","for","this","topology"]}
{"code_tokens":["\n","public","NormalizedResourceRequest","getApproximateResources","(","Set<ExecutorDetails>","execs",")","{","\n","NormalizedResourceRequest","ret","=","new","NormalizedResourceRequest","(",")",";","\n","execs",".","stream","(",")","\n",".","filter","(","x","->","hasExecInTopo","(","x",")",")","\n",".","forEach","(","x","->","ret",".","add","(","resourceList",".","get","(","x",")",")",")",";","\n","return","ret",";","\n"],"docstring_tokens":["Get","approximate","resources","for","given","topology","executors"]}
{"code_tokens":["\n","public","boolean","hasExecInTopo","(","ExecutorDetails","exec",")","{","\n","return","resourceList","!=","null","&&","resourceList",".","containsKey","(","exec",")",";","\n"],"docstring_tokens":["Checks","if","a","executor","is","part","of","this","topology"]}
{"code_tokens":["\n","private","void","addDefaultResforExec","(","ExecutorDetails","exec",")","{","\n","String","componentId","=","getExecutorToComponent","(",")",".","get","(","exec",")",";","\n","addResourcesForExec","(","exec,","new","NormalizedResourceRequest","(","topologyConf,","componentId",")",")",";","\n"],"docstring_tokens":["Add","default","resource","requirements","for","a","executor"]}
{"code_tokens":["\n","public","static","Exclusion","createExclusion","(","String","exclusionString",")","{","\n","String[]","parts","=","exclusionString",".","split","(","\":\"",")",";","\n\n","String","artifactId","=","\"*\"",";","\n","String","classifier","=","\"*\"",";","\n","String","extension","=","\"*\"",";","\n\n","int","len","=","parts",".","length",";","\n","if","(","len",">","1",")","{","\n","artifactId","=","parts[1]",";","\n","}","\n","if","(","len",">","2",")","{","\n","classifier","=","parts[2]",";","\n","}","\n","if","(","len",">","3",")","{","\n","extension","=","parts[3]",";","\n","}","\n\n","//","length","of","parts","should","be","greater","than","0\n","String","groupId","=","parts[0]",";","\n\n","return","new","Exclusion","(","groupId,","artifactId,","classifier,","extension",")",";","\n"],"docstring_tokens":["Parses","exclusion","parameter","and","build","Exclusion","object"]}
{"code_tokens":["\n","public","void","setArgs","(","List<Object>","args",")","{","\n\n","List<Object>","newVal","=","new","ArrayList<Object>","(",")",";","\n","for","(","Object","obj",":","args",")","{","\n","if","(","obj","instanceof","LinkedHashMap",")","{","\n","Map<String,","Object>","map","=","(","Map<String,","Object>",")","obj",";","\n","if","(","map",".","containsKey","(","\"ref\"",")","&&","map",".","size","(",")","==","1",")","{","\n","newVal",".","add","(","new","BeanReference","(","(","String",")","map",".","get","(","\"ref\"",")",")",")",";","\n","this",".","hasReferences","=","true",";","\n","}","else","if","(","map",".","containsKey","(","\"reflist\"",")","&&","map",".","size","(",")","==","1",")","{","\n","newVal",".","add","(","new","BeanListReference","(","(","List<String>",")","map",".","get","(","\"reflist\"",")",")",")",";","\n","this",".","hasReferences","=","true",";","\n","}","else","{","\n","newVal",".","add","(","obj",")",";","\n","}","\n","}","else","{","\n","newVal",".","add","(","obj",")",";","\n","}","\n","}","\n","this",".","args","=","newVal",";","\n"],"docstring_tokens":["Set","the","method","arguments"]}
{"code_tokens":["\n","@Override\n","public","TriggerPolicy<T,","?>","getTriggerPolicy","(","TriggerHandler","triggerHandler,","EvictionPolicy<T,","?>","evictionPolicy",")","{","\n","return","new","CountTriggerPolicy<>","(","windowConfig",".","getSlidingLength","(",")",",","triggerHandler,","evictionPolicy",")",";","\n"],"docstring_tokens":["Returns","a","TriggerPolicy","which","triggers","for","every","count","of","given","sliding","window"]}
{"code_tokens":["\n","@Override\n","public","EvictionPolicy<T,","?>","getEvictionPolicy","(",")","{","\n","return","new","CountEvictionPolicy<>","(","windowConfig",".","getWindowLength","(",")",")",";","\n"],"docstring_tokens":["Returns","an","EvictionPolicy","instance","which","evicts","elements","after","a","count","of","given","window","length"]}
{"code_tokens":["\n","public","void","refreshPartitions","(","List<KafkaTridentSpoutTopicPartition>","partitionResponsibilities",")","{","\n","Set<TopicPartition>","assignedTps","=","partitionResponsibilities",".","stream","(",")","\n",".","map","(","kttp","->","kttp",".","getTopicPartition","(",")",")","\n",".","collect","(","Collectors",".","toSet","(",")",")",";","\n","topicAssigner",".","assignPartitions","(","consumer,","assignedTps,","new","KafkaSpoutConsumerRebalanceListener","(",")",")",";","\n","LOG",".","debug","(","\"Assigned","partitions","[","{","}","]","to","this","task\",","assignedTps",")",";","\n"],"docstring_tokens":["Prepare","the","emitter","to","handle","the","input","partitions"]}
{"code_tokens":["\n","public","HiveStateFactory","withOptions","(","HiveOptions","options",")","{","\n","if","(","options",".","getTickTupleInterval","(",")","!=","HiveOptions",".","DEFAULT_TICK_TUPLE_INTERVAL_SECS",")","{","\n","LOG",".","error","(","\"Tick","tuple","interval","will","be","ignored","for","trident",".","\"\n","+","\"","The","Hive","writers","are","flushed","after","each","batch",".","\"",")",";","\n","}","\n","this",".","options","=","options",";","\n","return","this",";","\n"],"docstring_tokens":["The","options","for","connecting","to","Hive"]}
{"code_tokens":["\n","private","Set<Component>","sortComponents","(","final","Map<String,","Component>","componentMap",")","{","\n","Set<Component>","sortedComponents","=\n","new","TreeSet<>","(","(","o1,","o2",")","->","{","\n","int","connections1","=","0",";","\n","int","connections2","=","0",";","\n\n","for","(","String","childId",":","Sets",".","union","(","o1",".","getChildren","(",")",",","o1",".","getParents","(",")",")",")","{","\n","connections1","+=\n","(","componentMap",".","get","(","childId",")",".","getExecs","(",")",".","size","(",")","*","o1",".","getExecs","(",")",".","size","(",")",")",";","\n","}","\n\n","for","(","String","childId",":","Sets",".","union","(","o2",".","getChildren","(",")",",","o2",".","getParents","(",")",")",")","{","\n","connections2","+=\n","(","componentMap",".","get","(","childId",")",".","getExecs","(",")",".","size","(",")","*","o2",".","getExecs","(",")",".","size","(",")",")",";","\n","}","\n\n","if","(","connections1",">","connections2",")","{","\n","return","-1",";","\n","}","else","if","(","connections1","<","connections2",")","{","\n","return","1",";","\n","}","else","{","\n","return","o1",".","getId","(",")",".","compareTo","(","o2",".","getId","(",")",")",";","\n","}","\n","}",")",";","\n","sortedComponents",".","addAll","(","componentMap",".","values","(",")",")",";","\n","return","sortedComponents",";","\n"],"docstring_tokens":["sort","components","by","the","number","of","in","and","out","connections","that","need","to","be","made,","in","descending","order"]}
{"code_tokens":["\n","private","List<String>","mkProfileCommand","(","ProfileAction","action,","boolean","stop,","String","workerPid,","String","targetDir",")","{","\n","switch","(","action",")","{","\n","case","JMAP_DUMP:\n","return","jmapDumpCmd","(","workerPid,","targetDir",")",";","\n","case","JSTACK_DUMP:\n","return","jstackDumpCmd","(","workerPid,","targetDir",")",";","\n","case","JPROFILE_DUMP:\n","return","jprofileDump","(","workerPid,","targetDir",")",";","\n","case","JVM_RESTART:\n","return","jprofileJvmRestart","(","workerPid",")",";","\n","case","JPROFILE_STOP:\n","if","(","stop",")","{","\n","return","jprofileStop","(","workerPid,","targetDir",")",";","\n","}","\n","return","jprofileStart","(","workerPid",")",";","\n","default:\n","return","Lists",".","newArrayList","(",")",";","\n","}","\n"],"docstring_tokens":["Get","the","command","to","run","when","doing","profiling"]}
{"code_tokens":["\n","protected","String","getWorkerClassPath","(","String","stormJar,","List<String>","dependencyLocations,","SimpleVersion","topoVersion",")","{","\n","List<String>","workercp","=","new","ArrayList<>","(",")",";","\n","workercp",".","addAll","(","asStringList","(","topoConf",".","get","(","Config",".","TOPOLOGY_CLASSPATH_BEGINNING",")",")",")",";","\n","workercp",".","addAll","(","frameworkClasspath","(","topoVersion",")",")",";","\n","workercp",".","add","(","stormJar",")",";","\n","workercp",".","addAll","(","dependencyLocations",")",";","\n","workercp",".","addAll","(","asStringList","(","topoConf",".","get","(","Config",".","TOPOLOGY_CLASSPATH",")",")",")",";","\n","return","CPJ",".","join","(","workercp",")",";","\n"],"docstring_tokens":["Compute","the","classpath","for","the","worker","process"]}
{"code_tokens":["\n","private","List<String>","getClassPathParams","(","final","String","stormRoot,","final","SimpleVersion","topoVersion",")","throws","IOException","{","\n","final","String","stormJar","=","ConfigUtils",".","supervisorStormJarPath","(","stormRoot",")",";","\n","final","List<String>","dependencyLocations","=","getDependencyLocationsFor","(","conf,","topologyId,","ops,","stormRoot",")",";","\n","final","String","workerClassPath","=","getWorkerClassPath","(","stormJar,","dependencyLocations,","topoVersion",")",";","\n\n","List<String>","classPathParams","=","new","ArrayList<>","(",")",";","\n","classPathParams",".","add","(","\"-cp\"",")",";","\n","classPathParams",".","add","(","workerClassPath",")",";","\n","return","classPathParams",";","\n"],"docstring_tokens":["Get","parameters","for","the","class","path","of","the","worker","process"]}
{"code_tokens":["\n","private","List<String>","mkLaunchCommand","(","final","int","memOnheap,","final","int","memOffheap,","final","String","stormRoot,\n","final","String","jlp,","final","String","numaId",")","throws","IOException","{","\n","final","String","javaCmd","=","javaCmd","(","\"java\"",")",";","\n","final","String","stormOptions","=","ConfigUtils",".","concatIfNotNull","(","System",".","getProperty","(","\"storm",".","options\"",")",")",";","\n","final","String","topoConfFile","=","ConfigUtils",".","concatIfNotNull","(","System",".","getProperty","(","\"storm",".","conf",".","file\"",")",")",";","\n","final","String","workerTmpDir","=","ConfigUtils",".","workerTmpRoot","(","conf,","workerId",")",";","\n","String","topoVersionString","=","getStormVersionFor","(","conf,","topologyId,","ops,","stormRoot",")",";","\n","if","(","topoVersionString","==","null",")","{","\n","topoVersionString","=","(","String",")","conf",".","getOrDefault","(","Config",".","SUPERVISOR_WORKER_DEFAULT_VERSION,","VersionInfo",".","getVersion","(",")",")",";","\n","}","\n","final","SimpleVersion","topoVersion","=","new","SimpleVersion","(","topoVersionString",")",";","\n\n","List<String>","classPathParams","=","getClassPathParams","(","stormRoot,","topoVersion",")",";","\n","List<String>","commonParams","=","getCommonParams","(",")",";","\n\n","String","log4jConfigurationFile","=","getWorkerLoggingConfigFile","(",")",";","\n","String","workerLog4jConfig","=","log4jConfigurationFile",";","\n","if","(","topoConf",".","get","(","Config",".","TOPOLOGY_LOGGING_CONFIG_FILE",")","!=","null",")","{","\n","workerLog4jConfig","=","workerLog4jConfig","+","\",\"","+","topoConf",".","get","(","Config",".","TOPOLOGY_LOGGING_CONFIG_FILE",")",";","\n","}","\n\n","List<String>","commandList","=","new","ArrayList<>","(",")",";","\n","String","logWriter","=","getWorkerLogWriter","(","topoVersion",")",";","\n","if","(","logWriter","!=","null",")","{","\n","//Log","Writer","Command",".",".",".","\n","commandList",".","add","(","javaCmd",")",";","\n","commandList",".","addAll","(","classPathParams",")",";","\n","commandList",".","addAll","(","substituteChildopts","(","topoConf",".","get","(","Config",".","TOPOLOGY_WORKER_LOGWRITER_CHILDOPTS",")",")",")",";","\n","commandList",".","addAll","(","commonParams",")",";","\n","commandList",".","add","(","\"-Dlog4j",".","configurationFile=\"","+","log4jConfigurationFile",")",";","\n","commandList",".","add","(","logWriter",")",";","//The","LogWriter","in","turn","launches","the","actual","worker",".","\n","}","\n\n","//Worker","Command",".",".",".","\n","commandList",".","add","(","javaCmd",")",";","\n","commandList",".","add","(","\"-server\"",")",";","\n","commandList",".","addAll","(","commonParams",")",";","\n","commandList",".","add","(","\"-Dlog4j",".","configurationFile=\"","+","workerLog4jConfig",")",";","\n","commandList",".","addAll","(","substituteChildopts","(","conf",".","get","(","Config",".","WORKER_CHILDOPTS",")",",","memOnheap,","memOffheap",")",")",";","\n","commandList",".","addAll","(","substituteChildopts","(","topoConf",".","get","(","Config",".","TOPOLOGY_WORKER_CHILDOPTS",")",",","memOnheap,","memOffheap",")",")",";","\n","commandList",".","addAll","(","substituteChildopts","(","Utils",".","OR","(","\n","topoConf",".","get","(","Config",".","TOPOLOGY_WORKER_GC_CHILDOPTS",")",",\n","conf",".","get","(","Config",".","WORKER_GC_CHILDOPTS",")",")",",","memOnheap,","memOffheap",")",")",";","\n","commandList",".","addAll","(","getWorkerProfilerChildOpts","(","memOnheap,","memOffheap",")",")",";","\n","commandList",".","add","(","\"-Djava",".","library",".","path=\"","+","jlp",")",";","\n","commandList",".","add","(","\"-Dstorm",".","conf",".","file=\"","+","topoConfFile",")",";","\n","commandList",".","add","(","\"-Dstorm",".","options=\"","+","stormOptions",")",";","\n","commandList",".","add","(","\"-Djava",".","io",".","tmpdir=\"","+","workerTmpDir",")",";","\n","commandList",".","addAll","(","classPathParams",")",";","\n","commandList",".","add","(","getWorkerMain","(","topoVersion",")",")",";","\n","commandList",".","add","(","topologyId",")",";","\n","String","supervisorId","=","this",".","supervisorId",";","\n","if","(","numaId","!=","null",")","{","\n","supervisorId","+=","ServerConstants",".","NUMA_ID_SEPARATOR","+","numaId",";","\n","}","\n","commandList",".","add","(","supervisorId",")",";","\n","//","supervisor","port","should","be","only","presented","to","worker","which","supports","RPC","heartbeat\n","//","unknown","version","should","be","treated","as","\"current","version\",","which","supports","RPC","heartbeat\n","if","(","(","topoVersion",".","getMajor","(",")","==","-1","&&","topoVersion",".","getMinor","(",")","==","-1",")","\n","||","topoVersion",".","compareTo","(","MIN_VERSION_SUPPORT_RPC_HEARTBEAT",")",">=","0",")","{","\n","commandList",".","add","(","String",".","valueOf","(","supervisorPort",")",")",";","\n","}","\n\n","commandList",".","add","(","String",".","valueOf","(","port",")",")",";","\n","commandList",".","add","(","workerId",")",";","\n\n","return","commandList",";","\n"],"docstring_tokens":["Create","the","command","to","launch","the","worker","process"]}
{"code_tokens":["\n","public","void","deleteTopoConf","(","final","String","topoId,","final","Subject","who",")","throws","AuthorizationException,","KeyNotFoundException","{","\n","final","String","key","=","ConfigUtils",".","masterStormConfKey","(","topoId",")",";","\n","store",".","deleteBlob","(","key,","who",")",";","\n","confs",".","remove","(","topoId",")",";","\n"],"docstring_tokens":["Delete","a","topology","conf","when","we","are","done"]}
{"code_tokens":["\n","public","void","updateTopoConf","(","final","String","topoId,","final","Subject","who,","final","Map<String,","Object>","topoConf",")","\n","throws","AuthorizationException,","KeyNotFoundException,","IOException","{","\n","final","String","key","=","ConfigUtils",".","masterStormConfKey","(","topoId",")",";","\n","store",".","updateBlob","(","key,","Utils",".","toCompressedJsonConf","(","topoConf",")",",","who",")",";","\n","List<AccessControl>","acl","=","BlobStoreAclHandler",".","DEFAULT",";","\n","WithAcl<Map<String,","Object>>","old","=","confs",".","get","(","topoId",")",";","\n","if","(","old","!=","null",")","{","\n","acl","=","old",".","acl",";","\n","}","else","{","\n","acl","=","store",".","getBlobMeta","(","key,","who",")",".","get_settable","(",")",".","get_acl","(",")",";","\n","}","\n","confs",".","put","(","topoId,","new","WithAcl<>","(","acl,","topoConf",")",")",";","\n"],"docstring_tokens":["Update","an","existing","topology","conf"]}
{"code_tokens":["\n","@Override\n","public","int","hashCode","(",")","{","\n","return","(","17","*","getPort","(",")",")","+","getAssignment","(",")",".","hashCode","(",")",";","\n"],"docstring_tokens":["All","implementations","of","PortAndAssignment","should","implement","the","same","hashCode","method"]}
{"code_tokens":["\n","public","void","cleanupDataDirectories","(",")","throws","IOException","{","\n","for","(","String","s",":","getDataDirs","(",")",")","{","\n","cleanDir","(","s",")",";","\n","}","\n"],"docstring_tokens":["Deletes","all","data","from","cassandra","data","directories,","including","the","commit","log"]}
{"code_tokens":["\n","public","static","TopologyLoadConf","fromConf","(","File","file",")","throws","IOException","{","\n","Yaml","yaml","=","new","Yaml","(","new","SafeConstructor","(",")",")",";","\n","Map<String,","Object>","yamlConf","=","(","Map<String,","Object>",")","yaml",".","load","(","new","FileReader","(","file",")",")",";","\n","return","TopologyLoadConf",".","fromConf","(","yamlConf",")",";","\n"],"docstring_tokens":["Parse","the","TopologyLoadConf","from","a","file","in","YAML","format"]}
{"code_tokens":["\n","public","static","TopologyLoadConf","fromConf","(","Map<String,","Object>","conf",")","{","\n","Map<String,","Object>","topoConf","=","null",";","\n","if","(","conf",".","containsKey","(","\"config\"",")",")","{","\n","topoConf","=","new","HashMap<>","(","(","Map<String,","Object>",")","conf",".","get","(","\"config\"",")",")",";","\n","}","\n\n","List<LoadCompConf>","spouts","=","new","ArrayList<>","(",")",";","\n","for","(","Map<String,","Object>","spoutInfo:","(","List<Map<String,","Object>>",")","conf",".","get","(","\"spouts\"",")",")","{","\n","spouts",".","add","(","LoadCompConf",".","fromConf","(","spoutInfo",")",")",";","\n","}","\n\n","List<LoadCompConf>","bolts","=","new","ArrayList<>","(",")",";","\n","List<Map<String,","Object>>","boltInfos","=","(","List<Map<String,","Object>>",")","conf",".","get","(","\"bolts\"",")",";","\n","if","(","boltInfos","!=","null",")","{","\n","for","(","Map<String,","Object>","boltInfo",":","boltInfos",")","{","\n","bolts",".","add","(","LoadCompConf",".","fromConf","(","boltInfo",")",")",";","\n","}","\n","}","\n\n","List<InputStream>","streams","=","new","ArrayList<>","(",")",";","\n","List<Map<String,","Object>>","streamInfos","=","(","List<Map<String,","Object>>",")","conf",".","get","(","\"streams\"",")",";","\n","if","(","streamInfos","!=","null",")","{","\n","for","(","Map<String,","Object>","streamInfo:","streamInfos",")","{","\n","streams",".","add","(","InputStream",".","fromConf","(","streamInfo",")",")",";","\n","}","\n","}","\n\n","return","new","TopologyLoadConf","(","(","String",")","conf",".","get","(","\"name\"",")",",","topoConf,","spouts,","bolts,","streams",")",";","\n"],"docstring_tokens":["Parse","the","TopologyLoadConf","from","a","config","map"]}
{"code_tokens":["\n","public","TopologyLoadConf","scaleThroughput","(","double","v,","Map<String,","Double>","topoSpecific",")","{","\n","if","(","v","==","1",".","0","&&","(","topoSpecific","==","null","||","topoSpecific",".","isEmpty","(",")",")",")","{","\n","return","this",";","\n","}","\n","List<LoadCompConf>","scaledSpouts","=","spouts",".","stream","(",")",".","map","(","(","s",")","->","scaleCompThroughput","(","s,","v,","topoSpecific",")",")","\n",".","collect","(","Collectors",".","toList","(",")",")",";","\n","List<LoadCompConf>","scaledBolts","=","bolts",".","stream","(",")",".","map","(","(","s",")","->","scaleCompThroughput","(","s,","v,","topoSpecific",")",")","\n",".","collect","(","Collectors",".","toList","(",")",")",";","\n","return","new","TopologyLoadConf","(","name,","topoConf,","scaledSpouts,","scaledBolts,","streams",")",";","\n"],"docstring_tokens":["Scale","the","throughput","of","the","entire","topology","by","a","percentage"]}
{"code_tokens":["\n","public","TopologyLoadConf","anonymize","(",")","{","\n","Map<String,","String>","remappedComponents","=","new","HashMap<>","(",")",";","\n","Map<GlobalStreamId,","GlobalStreamId>","remappedStreams","=","new","HashMap<>","(",")",";","\n","for","(","LoadCompConf","comp:","bolts",")","{","\n","String","newId","=","getUniqueBoltName","(",")",";","\n","remappedComponents",".","put","(","comp",".","id,","newId",")",";","\n","if","(","comp",".","streams","!=","null",")","{","\n","for","(","OutputStream","out",":","comp",".","streams",")","{","\n","GlobalStreamId","orig","=","new","GlobalStreamId","(","comp",".","id,","out",".","id",")",";","\n","GlobalStreamId","remapped","=","new","GlobalStreamId","(","newId,","getUniqueStreamName","(",")",")",";","\n","remappedStreams",".","put","(","orig,","remapped",")",";","\n","}","\n","}","\n","}","\n\n","for","(","LoadCompConf","comp:","spouts",")","{","\n","remappedComponents",".","put","(","comp",".","id,","getUniqueSpoutName","(",")",")",";","\n","String","newId","=","getUniqueSpoutName","(",")",";","\n","remappedComponents",".","put","(","comp",".","id,","newId",")",";","\n","if","(","comp",".","streams","!=","null",")","{","\n","for","(","OutputStream","out",":","comp",".","streams",")","{","\n","GlobalStreamId","orig","=","new","GlobalStreamId","(","comp",".","id,","out",".","id",")",";","\n","GlobalStreamId","remapped","=","new","GlobalStreamId","(","newId,","getUniqueStreamName","(",")",")",";","\n","remappedStreams",".","put","(","orig,","remapped",")",";","\n","}","\n","}","\n","}","\n\n","for","(","InputStream","in",":","streams",")","{","\n","if","(","!remappedComponents",".","containsKey","(","in",".","toComponent",")",")","{","\n","remappedComponents",".","put","(","in",".","toComponent,","getUniqueSpoutName","(",")",")",";","\n","}","\n","GlobalStreamId","orig","=","in",".","gsid","(",")",";","\n","if","(","!remappedStreams",".","containsKey","(","orig",")",")","{","\n","//Even","if","the","topology","is","not","valid","we","still","need","to","remap","it","all\n","String","remappedComp","=","remappedComponents",".","computeIfAbsent","(","in",".","fromComponent,","(","key",")","->","{","\n","LOG",".","warn","(","\"stream's","{","}","from","is","not","defined","{","}","\",","in",".","id,","in",".","fromComponent",")",";","\n","return","getUniqueBoltName","(",")",";","\n","}",")",";","\n","remappedStreams",".","put","(","orig,","new","GlobalStreamId","(","remappedComp,","getUniqueStreamName","(",")",")",")",";","\n","}","\n","}","\n\n","//Now","we","need","to","map","them","all","back","again\n","List<LoadCompConf>","remappedSpouts","=","spouts",".","stream","(",")","\n",".","map","(","(","orig",")","->","orig",".","remap","(","remappedComponents,","remappedStreams",")",")","\n",".","collect","(","Collectors",".","toList","(",")",")",";","\n","List<LoadCompConf>","remappedBolts","=","bolts",".","stream","(",")","\n",".","map","(","(","orig",")","->","orig",".","remap","(","remappedComponents,","remappedStreams",")",")","\n",".","collect","(","Collectors",".","toList","(",")",")",";","\n","List<InputStream>","remappedInputStreams","=","streams",".","stream","(",")","\n",".","map","(","(","orig",")","->","orig",".","remap","(","remappedComponents,","remappedStreams",")",")","\n",".","collect","(","Collectors",".","toList","(",")",")",";","\n","return","new","TopologyLoadConf","(","getUniqueTopoName","(",")",",","anonymizeTopoConf","(","topoConf",")",",","remappedSpouts,","remappedBolts,","remappedInputStreams",")",";","\n"],"docstring_tokens":["Create","a","new","version","of","this","topology","with","identifiable","information","removed"]}
{"code_tokens":["\n","public","boolean","looksLikeTrident","(",")","{","\n","for","(","LoadCompConf","spout:","spouts",")","{","\n","if","(","spout",".","id",".","startsWith","(","\"$mastercoord\"",")",")","{","\n","return","true",";","\n","}","\n","}","\n\n","for","(","LoadCompConf","bolt:","bolts",")","{","\n","if","(","bolt",".","id",".","startsWith","(","\"$spoutcoord\"",")",")","{","\n","return","true",";","\n","}","\n","}","\n\n","for","(","InputStream","in:","streams",")","{","\n","if","(","in",".","id",".","equals","(","\"$batch\"",")",")","{","\n","return","true",";","\n","}","\n","}","\n","return","false",";","\n"],"docstring_tokens":["Try","to","see","if","this","looks","like","a","trident","topology"]}
{"code_tokens":["\n","public","double","getAllEmittedAggregate","(",")","{","\n","double","ret","=","getSpoutEmittedAggregate","(",")",";","\n","for","(","LoadCompConf","bolt:","bolts",")","{","\n","ret","+=","bolt",".","getAllEmittedAggregate","(",")",";","\n","}","\n","return","ret",";","\n"],"docstring_tokens":["Get","the","messages","emitted","per","second","in","aggregate","across","all","streams","in","the","topology"]}
{"code_tokens":["\n","public","double","getSpoutEmittedAggregate","(",")","{","\n","double","ret","=","0",";","\n","for","(","LoadCompConf","spout:","spouts",")","{","\n","ret","+=","spout",".","getAllEmittedAggregate","(",")",";","\n","}","\n","return","ret",";","\n"],"docstring_tokens":["Get","the","messages","emitted","per","second","in","aggregate","for","all","of","the","spouts","in","the","topology"]}
{"code_tokens":["\n","public","Response","listLogFiles","(","String","user,","Integer","port,","String","topologyId,","String","callback,","String","origin",")","throws","IOException","{","\n","List<Path>","fileResults","=","null",";","\n","if","(","topologyId","==","null",")","{","\n","if","(","port","==","null",")","{","\n","fileResults","=","workerLogs",".","getAllLogsForRootDir","(",")",";","\n","}","else","{","\n","fileResults","=","new","ArrayList<>","(",")",";","\n\n","File[]","logRootFiles","=","logRoot",".","toFile","(",")",".","listFiles","(",")",";","\n","if","(","logRootFiles","!=","null",")","{","\n","for","(","File","topoDir",":","logRootFiles",")","{","\n","File[]","topoDirFiles","=","topoDir",".","listFiles","(",")",";","\n","if","(","topoDirFiles","!=","null",")","{","\n","for","(","File","portDir",":","topoDirFiles",")","{","\n","if","(","portDir",".","getName","(",")",".","equals","(","port",".","toString","(",")",")",")","{","\n","fileResults",".","addAll","(","directoryCleaner",".","getFilesForDir","(","portDir",".","toPath","(",")",")",")",";","\n","}","\n","}","\n","}","\n","}","\n","}","\n","}","\n","}","else","{","\n","if","(","port","==","null",")","{","\n","fileResults","=","new","ArrayList<>","(",")",";","\n\n","Path","topoDir","=","logRoot",".","resolve","(","topologyId",")",".","toAbsolutePath","(",")",".","normalize","(",")",";","\n","if","(","!topoDir",".","startsWith","(","logRoot",")",")","{","\n","return","LogviewerResponseBuilder",".","buildSuccessJsonResponse","(","Collections",".","emptyList","(",")",",","callback,","origin",")",";","\n","}","\n","if","(","topoDir",".","toFile","(",")",".","exists","(",")",")","{","\n","File[]","topoDirFiles","=","topoDir",".","toFile","(",")",".","listFiles","(",")",";","\n","if","(","topoDirFiles","!=","null",")","{","\n","for","(","File","portDir",":","topoDirFiles",")","{","\n","fileResults",".","addAll","(","directoryCleaner",".","getFilesForDir","(","portDir",".","toPath","(",")",")",")",";","\n","}","\n","}","\n","}","\n\n","}","else","{","\n","File","portDir","=","ConfigUtils",".","getWorkerDirFromRoot","(","logRoot",".","toString","(",")",",","topologyId,","port",")",".","getCanonicalFile","(",")",";","\n","if","(","!portDir",".","getPath","(",")",".","startsWith","(","logRoot",".","toString","(",")",")",")","{","\n","return","LogviewerResponseBuilder",".","buildSuccessJsonResponse","(","Collections",".","emptyList","(",")",",","callback,","origin",")",";","\n","}","\n","if","(","portDir",".","exists","(",")",")","{","\n","fileResults","=","directoryCleaner",".","getFilesForDir","(","portDir",".","toPath","(",")",")",";","\n","}","\n","}","\n","}","\n\n","List<String>","files",";","\n","if","(","fileResults","!=","null",")","{","\n","files","=","fileResults",".","stream","(",")","\n",".","map","(","WorkerLogs::getTopologyPortWorkerLog",")","\n",".","sorted","(",")",".","collect","(","toList","(",")",")",";","\n","}","else","{","\n","files","=","new","ArrayList<>","(",")",";","\n","}","\n\n","return","LogviewerResponseBuilder",".","buildSuccessJsonResponse","(","files,","callback,","origin",")",";","\n"],"docstring_tokens":["Enumerate","worker","log","files","for","given","criteria"]}
{"code_tokens":["\n","public","Response","daemonLogPage","(","String","fileName,","Integer","start,","Integer","length,","String","grep,","String","user",")","\n","throws","IOException,","InvalidRequestException","{","\n","Path","file","=","daemonLogRoot",".","resolve","(","fileName",")",".","toAbsolutePath","(",")",".","normalize","(",")",";","\n","if","(","!file",".","startsWith","(","daemonLogRoot",")","||","Paths",".","get","(","fileName",")",".","getNameCount","(",")","!=","1",")","{","\n","//Prevent","fileName","from","pathing","into","worker","logs,","or","outside","daemon","log","root","\n","return","LogviewerResponseBuilder",".","buildResponsePageNotFound","(",")",";","\n","}","\n\n","if","(","file",".","toFile","(",")",".","exists","(",")",")","{","\n","//","all","types","of","files","included\n","List<File>","logFiles","=","Arrays",".","stream","(","daemonLogRoot",".","toFile","(",")",".","listFiles","(",")",")","\n",".","filter","(","File::isFile",")","\n",".","collect","(","toList","(",")",")",";","\n\n","List<String>","reorderedFilesStr","=","logFiles",".","stream","(",")","\n",".","map","(","File::getName",")","\n",".","filter","(","fName","->","!StringUtils",".","equals","(","fileName,","fName",")",")","\n",".","collect","(","toList","(",")",")",";","\n","reorderedFilesStr",".","add","(","fileName",")",";","\n\n","length","=","length","!=","null","?","Math",".","min","(","10485760,","length",")",":","LogviewerConstant",".","DEFAULT_BYTES_PER_PAGE",";","\n","final","boolean","isZipFile","=","file",".","getFileName","(",")",".","toString","(",")",".","endsWith","(","\"",".","gz\"",")",";","\n","long","fileLength","=","getFileLength","(","file",".","toFile","(",")",",","isZipFile",")",";","\n","if","(","start","==","null",")","{","\n","start","=","Long",".","valueOf","(","fileLength","-","length",")",".","intValue","(",")",";","\n","}","\n\n","String","logString","=","isTxtFile","(","fileName",")","?","escapeHtml","(","pageFile","(","file",".","toString","(",")",",","isZipFile,","fileLength,","start,","length",")",")",":\n","escapeHtml","(","\"This","is","a","binary","file","and","cannot","display!","You","may","download","the","full","file",".","\"",")",";","\n\n","List<DomContent>","bodyContents","=","new","ArrayList<>","(",")",";","\n","if","(","StringUtils",".","isNotEmpty","(","grep",")",")","{","\n","String","matchedString","=","String",".","join","(","\"\\n\",","Arrays",".","stream","(","logString",".","split","(","\"\\n\"",")",")","\n",".","filter","(","str","->","str",".","contains","(","grep",")",")",".","collect","(","toList","(",")",")",")",";","\n","bodyContents",".","add","(","pre","(","matchedString",")",".","withId","(","\"logContent\"",")",")",";","\n","}","else","{","\n","DomContent","pagerData","=","null",";","\n","if","(","isTxtFile","(","fileName",")",")","{","\n","pagerData","=","pagerLinks","(","fileName,","start,","length,","Long",".","valueOf","(","fileLength",")",".","intValue","(",")",",","\"daemonlog\"",")",";","\n","}","\n\n","bodyContents",".","add","(","searchFileForm","(","fileName,","\"yes\"",")",")",";","\n","//","list","all","daemon","logs\n","bodyContents",".","add","(","logFileSelectionForm","(","reorderedFilesStr,","fileName,","\"daemonlog\"",")",")",";","\n","if","(","pagerData","!=","null",")","{","\n","bodyContents",".","add","(","pagerData",")",";","\n","}","\n","bodyContents",".","add","(","daemonDownloadLink","(","fileName",")",")",";","\n","bodyContents",".","add","(","pre","(","logString",")",".","withClass","(","\"logContent\"",")",")",";","\n","if","(","pagerData","!=","null",")","{","\n","bodyContents",".","add","(","pagerData",")",";","\n","}","\n","}","\n\n","String","content","=","logTemplate","(","bodyContents,","fileName,","user",")",".","render","(",")",";","\n","return","LogviewerResponseBuilder",".","buildSuccessHtmlResponse","(","content",")",";","\n","}","else","{","\n","return","LogviewerResponseBuilder",".","buildResponsePageNotFound","(",")",";","\n","}","\n"],"docstring_tokens":["Provides","a","daemon","log","file","to","view"]}
{"code_tokens":["\n","public","void","setQos","(","int","qos",")","{","\n","if","(","qos","<","0","||","qos",">","2",")","{","\n","throw","new","IllegalArgumentException","(","\"MQTT","QoS","must","be",">=","0","and","<=","2\"",")",";","\n","}","\n","this",".","qos","=","qos",";","\n"],"docstring_tokens":["Sets","the","quality","of","service","to","use","for","MQTT","messages"]}
{"code_tokens":["\n","public","void","setWillQos","(","int","qos",")","{","\n","if","(","qos","<","0","||","qos",">","2",")","{","\n","throw","new","IllegalArgumentException","(","\"MQTT","Will","QoS","must","be",">=","0","and","<=","2\"",")",";","\n","}","\n","this",".","willQos","=","qos",";","\n"],"docstring_tokens":["Sets","the","quality","of","service","to","use","for","the","MQTT","Will","message"]}
{"code_tokens":["\n","@Override\n","public","Pair<V1,","V2>","apply","(","V1","value1,","V2","value2",")","{","\n","return","Pair",".","of","(","value1,","value2",")",";","\n"],"docstring_tokens":["Joins","two","values","and","produces","a","Pair","of","the","values","as","the","result"]}
{"code_tokens":["\n","public","static","void","main","(","final","String[]","args",")","{","\n","String","name","=","args[0]",";","\n","Map<String,","Object>","conf","=","Utils",".","readStormConfig","(",")",";","\n","Object","value","=","conf",".","get","(","name",")",";","\n","if","(","value","instanceof","List",")","{","\n","List<String>","stringValues","=","(","(","List<?>",")","value",")","\n",".","stream","(",")","\n",".","map","(","ObjectReader::getString",")","\n",".","collect","(","Collectors",".","toList","(",")",")",";","\n","value","=","String",".","join","(","\"","\",","stringValues",")",";","\n","}","\n","System",".","out",".","println","(","\"VALUE:","\"","+","value",")",";","\n"],"docstring_tokens":["Read","the","topology","config","and","return","the","value","for","the","given","key"]}
{"code_tokens":["\n","public","void","prepareCommit","(","long","txid",")","{","\n","flush","(",")",";","\n","partitionIdsState",".","prepareCommit","(","txid",")",";","\n","windowPartitionsState",".","prepareCommit","(","txid",")",";","\n","windowSystemState",".","prepareCommit","(","txid",")",";","\n"],"docstring_tokens":["Prepares","the","WindowState","for","commit"]}
{"code_tokens":["\n","public","void","rollback","(","boolean","reInit",")","{","\n","partitionIdsState",".","rollback","(",")",";","\n","windowPartitionsState",".","rollback","(",")",";","\n","windowSystemState",".","rollback","(",")",";","\n","//","re-init","cache","and","partitions\n","if","(","reInit",")","{","\n","init","(",")",";","\n","}","\n"],"docstring_tokens":["Rolls","back","the","WindowState"]}
{"code_tokens":["\n","public","static","void","main","(","String[]","args",")","throws","Exception","{","\n","Configuration","config","=","HBaseConfiguration",".","create","(",")",";","\n","if","(","args",".","length","==","1",")","{","\n","Properties","props","=","new","Properties","(",")",";","\n","props",".","load","(","new","FileInputStream","(","args[0]",")",")",";","\n","System",".","out",".","println","(","\"HBase","configuration:\"",")",";","\n","for","(","Object","key",":","props",".","keySet","(",")",")","{","\n","System",".","out",".","println","(","key","+","\"=\"","+","props",".","get","(","key",")",")",";","\n","config",".","set","(","(","String",")","key,","props",".","getProperty","(","(","String",")","key",")",")",";","\n","}","\n","}","else","{","\n","System",".","out",".","println","(","\"Usage:","WordCountClient","<hbase_config",".","properties>\"",")",";","\n","System",".","exit","(","1",")",";","\n","}","\n\n","Table","table","=","ConnectionFactory",".","createConnection","(","config",")",".","getTable","(","TableName",".","valueOf","(","\"WordCount\"",")",")",";","\n","String[]","words","=","new","String[]","{","\"nathan\",","\"mike\",","\"jackson\",","\"golda\",","\"bertels\"","}",";","\n\n","for","(","String","word",":","words",")","{","\n","Get","get","=","new","Get","(","Bytes",".","toBytes","(","word",")",")",";","\n","Result","result","=","table",".","get","(","get",")",";","\n\n","byte[]","countBytes","=","result",".","getValue","(","Bytes",".","toBytes","(","\"cf\"",")",",","Bytes",".","toBytes","(","\"count\"",")",")",";","\n","byte[]","wordBytes","=","result",".","getValue","(","Bytes",".","toBytes","(","\"cf\"",")",",","Bytes",".","toBytes","(","\"word\"",")",")",";","\n\n","String","wordStr","=","Bytes",".","toString","(","wordBytes",")",";","\n","long","count","=","Bytes",".","toLong","(","countBytes",")",";","\n","System",".","out",".","println","(","\"Word:","'\"","+","wordStr","+","\"',","Count:","\"","+","count",")",";","\n","}","\n\n"],"docstring_tokens":["Entry","point","for","WordCountClient"]}
{"code_tokens":["\n","@Override\n","public","Values","toValues","(","final","MqttMessage","message",")","{","\n","String","topic","=","message",".","getTopic","(",")",";","\n","String[]","topicElements","=","topic",".","split","(","\"/\"",")",";","\n","String[]","payloadElements","=","new","String","(","message",".","getMessage","(",")",")",".","split","(","\"/\"",")",";","\n\n","return","new","Values","(","topicElements[TOPIC_INDEX_1],\n","topicElements[TOPIC_INDEX_2],\n","topicElements[TOPIC_INDEX_3],\n","Float",".","parseFloat","(","payloadElements[0]",")",",\n","Float",".","parseFloat","(","payloadElements[1]",")",")",";","\n"],"docstring_tokens":["Converts","MQTT","message","to","an","instance","of","Values"]}
{"code_tokens":["\n","public","static","NormalDistStats","fromConf","(","Map<String,","Object>","conf",")","{","\n","return","fromConf","(","conf,","null",")",";","\n"],"docstring_tokens":["Read","the","stats","from","a","config"]}
{"code_tokens":["\n","public","static","void","main","(","String[]","args",")","throws","ParseException,","MalformedURLException","{","\n","Options","options","=","buildOptions","(",")",";","\n","CommandLineParser","parser","=","new","DefaultParser","(",")",";","\n","CommandLine","commandLine","=","parser",".","parse","(","options,","args",")",";","\n\n","if","(","!commandLine",".","hasOption","(","OPTION_ARTIFACTS_LONG",")",")","{","\n","throw","new","IllegalArgumentException","(","\"artifacts","must","be","presented",".","\"",")",";","\n","}","\n\n","String","artifactsArg","=","commandLine",".","getOptionValue","(","OPTION_ARTIFACTS_LONG",")",";","\n\n","//","DO","NOT","CHANGE","THIS","TO","SYSOUT\n","System",".","err",".","println","(","\"DependencyResolver","input","-","artifacts:","\"","+","artifactsArg",")",";","\n","List<Dependency>","dependencies","=","parseArtifactArgs","(","artifactsArg",")",";","\n\n","List<RemoteRepository>","repositories",";","\n","if","(","commandLine",".","hasOption","(","OPTION_ARTIFACT_REPOSITORIES_LONG",")",")","{","\n","String","remoteRepositoryArg","=","commandLine",".","getOptionValue","(","OPTION_ARTIFACT_REPOSITORIES_LONG",")",";","\n\n","//","DO","NOT","CHANGE","THIS","TO","SYSOUT\n","System",".","err",".","println","(","\"DependencyResolver","input","-","repositories:","\"","+","remoteRepositoryArg",")",";","\n\n","repositories","=","parseRemoteRepositoryArgs","(","remoteRepositoryArg",")",";","\n","}","else","{","\n","repositories","=","Collections",".","emptyList","(",")",";","\n","}","\n\n","try","{","\n","String","localMavenRepoPath","=","getOrDefaultLocalMavenRepositoryPath","(","\n","commandLine",".","getOptionValue","(","OPTION_MAVEN_LOCAL_REPOSITORY_DIRECTORY_LONG",")",",\n","DEFAULT_FAILBACK_MAVEN_LOCAL_REPOSITORY_DIRECTORY",")",";","\n\n","//","create","root","directory","if","not","exist\n","Files",".","createDirectories","(","new","File","(","localMavenRepoPath",")",".","toPath","(",")",")",";","\n\n","DependencyResolver","resolver","=","new","DependencyResolver","(","localMavenRepoPath,","repositories",")",";","\n\n","if","(","commandLine",".","hasOption","(","OPTION_PROXY_URL_LONG",")",")","{","\n","String","proxyUrl","=","commandLine",".","getOptionValue","(","OPTION_PROXY_URL_LONG",")",";","\n","String","proxyUsername","=","commandLine",".","getOptionValue","(","OPTION_PROXY_USERNAME_LONG",")",";","\n","String","proxyPassword","=","commandLine",".","getOptionValue","(","OPTION_PROXY_PASSWORD_LONG",")",";","\n\n","resolver",".","setProxy","(","parseProxyArg","(","proxyUrl,","proxyUsername,","proxyPassword",")",")",";","\n","}","\n\n","List<ArtifactResult>","artifactResults","=","resolver",".","resolve","(","dependencies",")",";","\n\n","Iterable<ArtifactResult>","missingArtifacts","=","filterMissingArtifacts","(","artifactResults",")",";","\n","if","(","missingArtifacts",".","iterator","(",")",".","hasNext","(",")",")","{","\n","printMissingArtifactsToSysErr","(","missingArtifacts",")",";","\n","throw","new","RuntimeException","(","\"Some","artifacts","are","not","resolved\"",")",";","\n","}","\n\n","System",".","out",".","println","(","JSONValue",".","toJSONString","(","transformArtifactResultToArtifactToPaths","(","artifactResults",")",")",")",";","\n","System",".","out",".","flush","(",")",";","\n","}","catch","(","Throwable","e",")","{","\n","throw","new","RuntimeException","(","e",")",";","\n","}","\n"],"docstring_tokens":["Main","entry","of","dependency","resolver"]}
{"code_tokens":["\n","public","static","void","setup","(","Map<String,","Object>","stormConf,","StormMetricsRegistry","metricRegistry",")","{","\n","LogviewerApplication",".","stormConf","=","stormConf",";","\n","LogviewerApplication",".","metricsRegistry","=","metricRegistry",";","\n"],"docstring_tokens":["Spot","to","inject","storm","configuration","before","initializing","LogviewerApplication","instance"]}
{"code_tokens":["\n","@Override\n","public","TriggerPolicy<T,","?>","getTriggerPolicy","(","TriggerHandler","triggerHandler,","EvictionPolicy<T,","?>","evictionPolicy",")","{","\n","return","new","TimeTriggerPolicy<>","(","windowConfig",".","getSlidingLength","(",")",",","triggerHandler,","evictionPolicy",")",";","\n"],"docstring_tokens":["Returns","a","TriggerPolicy","which","triggers","for","every","configured","sliding","window","duration"]}
{"code_tokens":["\n","@Override\n","public","EvictionPolicy<T,","?>","getEvictionPolicy","(",")","{","\n","return","new","TimeEvictionPolicy<>","(","windowConfig",".","getWindowLength","(",")",")",";","\n"],"docstring_tokens":["Returns","an","EvictionPolicy","instance","which","evicts","elements","after","window","duration","is","reached"]}
{"code_tokens":["\n","public","String","getComponentId","(","int","taskId",")","{","\n","if","(","taskId","==","Constants",".","SYSTEM_TASK_ID",")","{","\n","return","Constants",".","SYSTEM_COMPONENT_ID",";","\n","}","else","{","\n","return","taskToComponent",".","get","(","taskId",")",";","\n","}","\n"],"docstring_tokens":["Gets","the","component","id","for","the","specified","task","id"]}
{"code_tokens":["\n","public","Map<String,","Map<String,","Grouping>>","getTargets","(","String","componentId",")","{","\n","Map<String,","Map<String,","Grouping>>","ret","=","new","HashMap<>","(",")",";","\n","for","(","String","otherComponentId",":","getComponentIds","(",")",")","{","\n","Map<GlobalStreamId,","Grouping>","inputs","=","getComponentCommon","(","otherComponentId",")",".","get_inputs","(",")",";","\n","for","(","Map",".","Entry<GlobalStreamId,","Grouping>","entry",":","inputs",".","entrySet","(",")",")","{","\n","GlobalStreamId","id","=","entry",".","getKey","(",")",";","\n","if","(","id",".","get_componentId","(",")",".","equals","(","componentId",")",")","{","\n","Map<String,","Grouping>","curr","=","ret",".","get","(","id",".","get_streamId","(",")",")",";","\n","if","(","curr","==","null",")","{","\n","curr","=","new","HashMap<>","(",")",";","\n","}","\n","curr",".","put","(","otherComponentId,","entry",".","getValue","(",")",")",";","\n","ret",".","put","(","id",".","get_streamId","(",")",",","curr",")",";","\n","}","\n","}","\n","}","\n","return","ret",";","\n"],"docstring_tokens":["Gets","information","about","who","is","consuming","the","outputs","of","the","specified","component,","and","how"]}
{"code_tokens":["\n","public","DefaultFileNameFormat","withPrefix","(","String","prefix",")","{","\n","this",".","prefix","=","prefix",";","\n","return","this",";","\n"],"docstring_tokens":["Overrides","the","default","prefix"]}
{"code_tokens":["\n","public","DefaultFileNameFormat","withExtension","(","String","extension",")","{","\n","this",".","extension","=","extension",";","\n","return","this",";","\n"],"docstring_tokens":["Overrides","the","default","file","extension"]}
{"code_tokens":["\n","public","HBaseProjectionCriteria","addColumnFamily","(","String","columnFamily",")","{","\n","this",".","columnFamilies",".","add","(","columnFamily",".","getBytes","(",")",")",";","\n","return","this",";","\n"],"docstring_tokens":["all","columns","from","this","family","will","be","included","as","result","of","HBase","lookup"]}
{"code_tokens":["\n","public","HBaseProjectionCriteria","addColumn","(","ColumnMetaData","column",")","{","\n","this",".","columns",".","add","(","column",")",";","\n","return","this",";","\n"],"docstring_tokens":["Only","this","column","from","the","the","columnFamily","will","be","included","as","result","of","HBase","lookup"]}
{"code_tokens":["\n","public","void","ack","(",")","{","\n","latch",".","countDown","(",")",";","\n"],"docstring_tokens":["Countdown","if","the","sub","message","is","successful"]}
{"code_tokens":["\n","public","void","fail","(",")","{","\n","hasFailure","=","true",";","\n","//","fail","fast\n","long","count","=","latch",".","getCount","(",")",";","\n","for","(","int","i","=","0",";","i","<","count",";","i++",")","{","\n","latch",".","countDown","(",")",";","\n","}","\n"],"docstring_tokens":["Countdown","and","fail-fast","if","the","sub","message","is","failed"]}
{"code_tokens":["\n","private","void","validateConfig","(","Map<String,","Object>","config",")","throws","MetricException","{","\n","if","(","!","(","config",".","containsKey","(","DaemonConfig",".","STORM_ROCKSDB_LOCATION",")",")",")","{","\n","throw","new","MetricException","(","\"Not","a","vaild","RocksDB","configuration","-","Missing","store","location","\"","+","DaemonConfig",".","STORM_ROCKSDB_LOCATION",")",";","\n","}","\n\n","if","(","!","(","config",".","containsKey","(","DaemonConfig",".","STORM_ROCKSDB_CREATE_IF_MISSING",")",")",")","{","\n","throw","new","MetricException","(","\"Not","a","vaild","RocksDB","configuration","-","Does","not","specify","creation","policy","\"\n","+","DaemonConfig",".","STORM_ROCKSDB_CREATE_IF_MISSING",")",";","\n","}","\n\n","//","validate","path","defined\n","String","storePath","=","getRocksDbAbsoluteDir","(","config",")",";","\n\n","boolean","createIfMissing","=","ObjectReader",".","getBoolean","(","config",".","get","(","DaemonConfig",".","STORM_ROCKSDB_CREATE_IF_MISSING",")",",","false",")",";","\n","if","(","!createIfMissing",")","{","\n","if","(","!","(","new","File","(","storePath",")",".","exists","(",")",")",")","{","\n","throw","new","MetricException","(","\"Configuration","specifies","not","to","create","a","store","but","no","store","currently","exists","at","\"","+","storePath",")",";","\n","}","\n","}","\n\n","if","(","!","(","config",".","containsKey","(","DaemonConfig",".","STORM_ROCKSDB_METADATA_STRING_CACHE_CAPACITY",")",")",")","{","\n","throw","new","MetricException","(","\"Not","a","valid","RocksDB","configuration","-","Missing","metadata","string","cache","size","\"\n","+","DaemonConfig",".","STORM_ROCKSDB_METADATA_STRING_CACHE_CAPACITY",")",";","\n","}","\n\n","if","(","!config",".","containsKey","(","DaemonConfig",".","STORM_ROCKSDB_METRIC_RETENTION_HOURS",")",")","{","\n","throw","new","MetricException","(","\"Not","a","valid","RocksDB","configuration","-","Missing","metric","retention","\"\n","+","DaemonConfig",".","STORM_ROCKSDB_METRIC_RETENTION_HOURS",")",";","\n","}","\n"],"docstring_tokens":["Implements","configuration","validation","of","Metrics","Store,","validates","storm","configuration","for","Metrics","Store"]}
{"code_tokens":["\n","@Override\n","public","void","insert","(","Metric","metric",")","throws","MetricException","{","\n","try","{","\n","//","don't","bother","blocking","on","a","full","queue,","just","drop","metrics","in","case","we","can't","keep","up\n","if","(","queue",".","remainingCapacity","(",")","<=","0",")","{","\n","LOG",".","info","(","\"Metrics","q","full,","dropping","metric\"",")",";","\n","return",";","\n","}","\n","queue",".","put","(","metric",")",";","\n","}","catch","(","Exception","e",")","{","\n","String","message","=","\"Failed","to","insert","metric\"",";","\n","LOG",".","error","(","message,","e",")",";","\n","if","(","this",".","failureMeter","!=","null",")","{","\n","this",".","failureMeter",".","mark","(",")",";","\n","}","\n","throw","new","MetricException","(","message,","e",")",";","\n","}","\n"],"docstring_tokens":["Stores","metrics","in","the","store"]}
{"code_tokens":["\n","@Override\n","public","boolean","populateValue","(","Metric","metric",")","throws","MetricException","{","\n","Map<String,","Integer>","localLookupCache","=","new","HashMap<>","(","6",")",";","\n\n","int","topologyId","=","lookupMetadataString","(","KeyType",".","TOPOLOGY_STRING,","metric",".","getTopologyId","(",")",",","localLookupCache",")",";","\n","if","(","INVALID_METADATA_STRING_ID","==","topologyId",")","{","\n","return","false",";","\n","}","\n","int","metricId","=","lookupMetadataString","(","KeyType",".","METRIC_STRING,","metric",".","getMetricName","(",")",",","localLookupCache",")",";","\n","if","(","INVALID_METADATA_STRING_ID","==","metricId",")","{","\n","return","false",";","\n","}","\n","int","componentId","=","lookupMetadataString","(","KeyType",".","COMPONENT_STRING,","metric",".","getComponentId","(",")",",","localLookupCache",")",";","\n","if","(","INVALID_METADATA_STRING_ID","==","componentId",")","{","\n","return","false",";","\n","}","\n","int","executorId","=","lookupMetadataString","(","KeyType",".","EXEC_ID_STRING,","metric",".","getExecutorId","(",")",",","localLookupCache",")",";","\n","if","(","INVALID_METADATA_STRING_ID","==","executorId",")","{","\n","return","false",";","\n","}","\n","int","hostId","=","lookupMetadataString","(","KeyType",".","HOST_STRING,","metric",".","getHostname","(",")",",","localLookupCache",")",";","\n","if","(","INVALID_METADATA_STRING_ID","==","hostId",")","{","\n","return","false",";","\n","}","\n","int","streamId","=","lookupMetadataString","(","KeyType",".","STREAM_ID_STRING,","metric",".","getStreamId","(",")",",","localLookupCache",")",";","\n","if","(","INVALID_METADATA_STRING_ID","==","streamId",")","{","\n","return","false",";","\n","}","\n\n","RocksDbKey","key","=","RocksDbKey",".","createMetricKey","(","metric",".","getAggLevel","(",")",",","topologyId,","metric",".","getTimestamp","(",")",",","metricId,\n","componentId,","executorId,","hostId,","metric",".","getPort","(",")",",","streamId",")",";","\n\n","return","populateFromKey","(","key,","metric",")",";","\n"],"docstring_tokens":["Fill","out","the","numeric","values","for","a","metric"]}
{"code_tokens":["\n","public","Stream","parallelismHint","(","int","hint",")","{","\n","node",".","parallelismHint","=","hint",";","\n","return","this",";","\n"],"docstring_tokens":["Applies","a","parallelism","hint","to","a","stream"]}
{"code_tokens":["\n","public","Stream","filter","(","Filter","filter",")","{","\n","return","each","(","getOutputFields","(",")",",","filter",")",";","\n"],"docstring_tokens":["Returns","a","stream","consisting","of","the","elements","of","this","stream","that","match","the","given","filter"]}
{"code_tokens":["\n","public","Stream","tumblingWindow","(","int","windowCount,","WindowsStoreFactory","windowStoreFactory,\n","Fields","inputFields,","Aggregator","aggregator,","Fields","functionFields",")","{","\n","return","window","(","TumblingCountWindow",".","of","(","windowCount",")",",","windowStoreFactory,","inputFields,","aggregator,","functionFields",")",";","\n"],"docstring_tokens":["Returns","a","stream","of","tuples","which","are","aggregated","results","of","a","tumbling","window","with","every","windowCount","of","tuples"]}
{"code_tokens":["\n","public","Stream","tumblingWindow","(","BaseWindowedBolt",".","Duration","windowDuration,","WindowsStoreFactory","windowStoreFactory,\n","Fields","inputFields,","Aggregator","aggregator,","Fields","functionFields",")","{","\n","return","window","(","TumblingDurationWindow",".","of","(","windowDuration",")",",","windowStoreFactory,","inputFields,","aggregator,","functionFields",")",";","\n"],"docstring_tokens":["Returns","a","stream","of","tuples","which","are","aggregated","results","of","a","window","that","tumbles","at","duration","of","windowDuration"]}
{"code_tokens":["\n","public","Stream","slidingWindow","(","int","windowCount,","int","slideCount,","WindowsStoreFactory","windowStoreFactory,\n","Fields","inputFields,","Aggregator","aggregator,","Fields","functionFields",")","{","\n","return","window","(","SlidingCountWindow",".","of","(","windowCount,","slideCount",")",",","windowStoreFactory,","inputFields,","aggregator,","functionFields",")",";","\n"],"docstring_tokens":["Returns","a","stream","of","tuples","which","are","aggregated","results","of","a","sliding","window","with","every","windowCount","of","tuples","and","slides","the","window","after","slideCount"]}
{"code_tokens":["\n","public","Stream","slidingWindow","(","BaseWindowedBolt",".","Duration","windowDuration,","BaseWindowedBolt",".","Duration","slidingInterval,\n","WindowsStoreFactory","windowStoreFactory,","Fields","inputFields,","Aggregator","aggregator,","Fields","functionFields",")","{","\n","return","window","(","SlidingDurationWindow",".","of","(","windowDuration,","slidingInterval",")",",","windowStoreFactory,","inputFields,","aggregator,\n","functionFields",")",";","\n"],"docstring_tokens":["Returns","a","stream","of","tuples","which","are","aggregated","results","of","a","window","which","slides","at","duration","of","slidingInterval","and","completes","a","window","at","windowDuration"]}
{"code_tokens":["\n","public","Stream","window","(","WindowConfig","windowConfig,","WindowsStoreFactory","windowStoreFactory,","Fields","inputFields,\n","Aggregator","aggregator,","Fields","functionFields",")","{","\n","return","window","(","windowConfig,","windowStoreFactory,","inputFields,","aggregator,","functionFields,","true",")",";","\n"],"docstring_tokens":["Returns","stream","of","aggregated","results","based","on","the","given","window","configuration"]}
{"code_tokens":["\n","public","void","add","(","WorkerResources","value",")","{","\n","Map<String,","Double>","workerNormalizedResources","=","value",".","get_resources","(",")",";","\n","cpu","+=","workerNormalizedResources",".","getOrDefault","(","Constants",".","COMMON_CPU_RESOURCE_NAME,","0",".","0",")",";","\n","add","(","RESOURCE_MAP_ARRAY_BRIDGE",".","translateToResourceArray","(","workerNormalizedResources",")",")",";","\n"],"docstring_tokens":["Add","the","resources","from","a","worker","to","this"]}
{"code_tokens":["\n","public","boolean","remove","(","NormalizedResources","other,","ResourceMetrics","resourceMetrics",")","{","\n","boolean","ret","=","false",";","\n","this",".","cpu","-=","other",".","cpu",";","\n","if","(","cpu","<","0",".","0",")","{","\n","ret","=","true",";","\n","if","(","resourceMetrics","!=","null",")","{","\n","resourceMetrics",".","getNegativeResourceEventsMeter","(",")",".","mark","(",")",";","\n","}","\n","cpu","=","0",".","0",";","\n","}","\n","int","otherLength","=","other",".","otherResources",".","length",";","\n","zeroPadOtherResourcesIfNecessary","(","otherLength",")",";","\n","for","(","int","i","=","0",";","i","<","otherLength",";","i++",")","{","\n","otherResources[i]","-=","other",".","otherResources[i]",";","\n","if","(","otherResources[i]","<","0",".","0",")","{","\n","ret","=","true",";","\n","if","(","resourceMetrics","!=","null",")","{","\n","resourceMetrics",".","getNegativeResourceEventsMeter","(",")",".","mark","(",")",";","\n","}","\n","otherResources[i]","=","0",".","0",";","\n","}","\n","}","\n","return","ret",";","\n"],"docstring_tokens":["Remove","the","other","resources","from","this"]}
{"code_tokens":["\n","public","boolean","remove","(","WorkerResources","value",")","{","\n","Map<String,","Double>","workerNormalizedResources","=","value",".","get_resources","(",")",";","\n","cpu","-=","workerNormalizedResources",".","getOrDefault","(","Constants",".","COMMON_CPU_RESOURCE_NAME,","0",".","0",")",";","\n","return","remove","(","RESOURCE_MAP_ARRAY_BRIDGE",".","translateToResourceArray","(","workerNormalizedResources",")",")","||","cpu","<","0",";","\n"],"docstring_tokens":["Remove","the","resources","of","a","worker","from","this"]}
{"code_tokens":["\n","public","FieldSelector","now","(",")","{","\n","this",".","isNow","=","true",";","\n","return","this",";","\n"],"docstring_tokens":["Sets","the","fields","as","an","automatically","generated","TimeUUID"]}
{"code_tokens":["\n","public","FieldSelector","as","(","String","as",")","{","\n","this",".","as","=","as",";","\n","return","this",";","\n"],"docstring_tokens":["Sets","an","alias","for","this","field"]}
{"code_tokens":["\n","public","static","<K,","V","extends","Number>","Map<String,","Object>","aggPreMergeTopoPageBolt","(","\n","Map<String,","Object>","beat,","String","window,","boolean","includeSys",")","{","\n","Map<String,","Object>","subRet","=","new","HashMap<>","(",")",";","\n","subRet",".","put","(","NUM_EXECUTORS,","1",")",";","\n","subRet",".","put","(","NUM_TASKS,","beat",".","get","(","NUM_TASKS",")",")",";","\n\n","Map<String,","Object>","stat2win2sid2num","=","ClientStatsUtil",".","getMapByKey","(","beat,","STATS",")",";","\n","subRet",".","put","(","CAPACITY,","computeAggCapacity","(","stat2win2sid2num,","getByKeyOr0","(","beat,","ClientStatsUtil",".","UPTIME",")",".","intValue","(",")",")",")",";","\n\n","for","(","String","key",":","new","String[]","{","EMITTED,","TRANSFERRED,","ACKED,","FAILED","}",")","{","\n","Map<String,","Map<K,","V>>","stat","=","windowSetConverter","(","ClientStatsUtil",".","getMapByKey","(","stat2win2sid2num,","key",")",",","TO_STRING",")",";","\n","if","(","EMITTED",".","equals","(","key",")","||","TRANSFERRED",".","equals","(","key",")",")","{","\n","stat","=","filterSysStreams","(","stat,","includeSys",")",";","\n","}","\n","Map<K,","V>","winStat","=","stat",".","get","(","window",")",";","\n","long","sum","=","0",";","\n","if","(","winStat","!=","null",")","{","\n","for","(","V","v",":","winStat",".","values","(",")",")","{","\n","sum","+=","v",".","longValue","(",")",";","\n","}","\n","}","\n","subRet",".","put","(","key,","sum",")",";","\n","}","\n\n","Map<String,","Map<List<String>,","Double>>","win2sid2execLat","=\n","windowSetConverter","(","ClientStatsUtil",".","getMapByKey","(","stat2win2sid2num,","EXEC_LATENCIES",")",",","TO_STRING",")",";","\n","Map<String,","Map<List<String>,","Double>>","win2sid2procLat","=\n","windowSetConverter","(","ClientStatsUtil",".","getMapByKey","(","stat2win2sid2num,","PROC_LATENCIES",")",",","TO_STRING",")",";","\n","Map<String,","Map<List<String>,","Long>>","win2sid2exec","=\n","windowSetConverter","(","ClientStatsUtil",".","getMapByKey","(","stat2win2sid2num,","EXECUTED",")",",","TO_STRING",")",";","\n","subRet",".","putAll","(","aggBoltLatAndCount","(","\n","win2sid2execLat",".","get","(","window",")",",","win2sid2procLat",".","get","(","window",")",",","win2sid2exec",".","get","(","window",")",")",")",";","\n\n","Map<String,","Object>","ret","=","new","HashMap<>","(",")",";","\n","ret",".","put","(","(","String",")","beat",".","get","(","\"comp-id\"",")",",","subRet",")",";","\n","return","ret",";","\n"],"docstring_tokens":["pre-merge","component","stats","of","specified","bolt","id"]}
{"code_tokens":["\n","public","static","TopologyPageInfo","aggTopoExecsStats","(","\n","String","topologyId,","Map","exec2nodePort,","Map","task2component,","Map<List<Integer>,","Map<String,","Object>>","beats,\n","StormTopology","topology,","String","window,","boolean","includeSys,","IStormClusterState","clusterState",")","{","\n","List<Map<String,","Object>>","beatList","=","extractDataFromHb","(","exec2nodePort,","task2component,","beats,","includeSys,","topology",")",";","\n","Map<String,","Object>","topoStats","=","aggregateTopoStats","(","window,","includeSys,","beatList",")",";","\n","return","postAggregateTopoStats","(","task2component,","exec2nodePort,","topoStats,","topologyId,","clusterState",")",";","\n"],"docstring_tokens":["aggregate","topo","executors","stats"]}
{"code_tokens":["\n","public","static","Map<String,","Object>","aggBoltExecWinStats","(","\n","Map<String,","Object>","accStats,","Map<String,","Object>","newStats,","boolean","includeSys",")","{","\n","Map<String,","Object>","ret","=","new","HashMap<>","(",")",";","\n\n","Map<String,","Map<String,","Number>>","m","=","new","HashMap<>","(",")",";","\n","for","(","Object","win",":","ClientStatsUtil",".","getMapByKey","(","newStats,","EXECUTED",")",".","keySet","(",")",")","{","\n","m",".","put","(","(","String",")","win,","aggBoltLatAndCount","(","\n","(","Map",")","(","ClientStatsUtil",".","getMapByKey","(","newStats,","EXEC_LATENCIES",")",")",".","get","(","win",")",",\n","(","Map",")","(","ClientStatsUtil",".","getMapByKey","(","newStats,","PROC_LATENCIES",")",")",".","get","(","win",")",",\n","(","Map",")","(","ClientStatsUtil",".","getMapByKey","(","newStats,","EXECUTED",")",")",".","get","(","win",")",")",")",";","\n","}","\n","m","=","swapMapOrder","(","m",")",";","\n\n","Map<String,","Double>","win2execLatWgtAvg","=","ClientStatsUtil",".","getMapByKey","(","m,","EXEC_LAT_TOTAL",")",";","\n","Map<String,","Double>","win2procLatWgtAvg","=","ClientStatsUtil",".","getMapByKey","(","m,","PROC_LAT_TOTAL",")",";","\n","Map<String,","Long>","win2executed","=","ClientStatsUtil",".","getMapByKey","(","m,","EXECUTED",")",";","\n\n","Map<String,","Map<String,","Long>>","emitted","=","ClientStatsUtil",".","getMapByKey","(","newStats,","EMITTED",")",";","\n","Map<String,","Long>","win2emitted","=","mergeWithSumLong","(","aggregateCountStreams","(","filterSysStreams","(","emitted,","includeSys",")",")",",\n","ClientStatsUtil",".","getMapByKey","(","accStats,","WIN_TO_EMITTED",")",")",";","\n","ret",".","put","(","WIN_TO_EMITTED,","win2emitted",")",";","\n\n","Map<String,","Map<String,","Long>>","transferred","=","ClientStatsUtil",".","getMapByKey","(","newStats,","TRANSFERRED",")",";","\n","Map<String,","Long>","win2transferred","=","mergeWithSumLong","(","aggregateCountStreams","(","filterSysStreams","(","transferred,","includeSys",")",")",",\n","ClientStatsUtil",".","getMapByKey","(","accStats,","WIN_TO_TRANSFERRED",")",")",";","\n","ret",".","put","(","WIN_TO_TRANSFERRED,","win2transferred",")",";","\n\n","ret",".","put","(","WIN_TO_EXEC_LAT_WGT_AVG,","mergeWithSumDouble","(","\n","ClientStatsUtil",".","getMapByKey","(","accStats,","WIN_TO_EXEC_LAT_WGT_AVG",")",",","win2execLatWgtAvg",")",")",";","\n","ret",".","put","(","WIN_TO_PROC_LAT_WGT_AVG,","mergeWithSumDouble","(","\n","ClientStatsUtil",".","getMapByKey","(","accStats,","WIN_TO_PROC_LAT_WGT_AVG",")",",","win2procLatWgtAvg",")",")",";","\n","ret",".","put","(","WIN_TO_EXECUTED,","mergeWithSumLong","(","\n","ClientStatsUtil",".","getMapByKey","(","accStats,","WIN_TO_EXECUTED",")",",","win2executed",")",")",";","\n","ret",".","put","(","WIN_TO_ACKED,","mergeWithSumLong","(","\n","aggregateCountStreams","(","ClientStatsUtil",".","getMapByKey","(","newStats,","ACKED",")",")",",","ClientStatsUtil",".","getMapByKey","(","accStats,","WIN_TO_ACKED",")",")",")",";","\n","ret",".","put","(","WIN_TO_FAILED,","mergeWithSumLong","(","\n","aggregateCountStreams","(","ClientStatsUtil",".","getMapByKey","(","newStats,","FAILED",")",")",",","ClientStatsUtil",".","getMapByKey","(","accStats,","WIN_TO_FAILED",")",")",")",";","\n\n","return","ret",";","\n"],"docstring_tokens":["aggregate","windowed","stats","from","a","bolt","executor","stats","with","a","Map","of","accumulated","stats"]}
{"code_tokens":["\n","public","static","Map<String,","Object>","aggSpoutExecWinStats","(","\n","Map<String,","Object>","accStats,","Map<String,","Object>","beat,","boolean","includeSys",")","{","\n","Map<String,","Object>","ret","=","new","HashMap<>","(",")",";","\n\n","Map<String,","Map<String,","Number>>","m","=","new","HashMap<>","(",")",";","\n","for","(","Object","win",":","ClientStatsUtil",".","getMapByKey","(","beat,","ACKED",")",".","keySet","(",")",")","{","\n","m",".","put","(","(","String",")","win,","aggSpoutLatAndCount","(","\n","(","Map<String,","Double>",")","(","ClientStatsUtil",".","getMapByKey","(","beat,","COMP_LATENCIES",")",")",".","get","(","win",")",",\n","(","Map<String,","Long>",")","(","ClientStatsUtil",".","getMapByKey","(","beat,","ACKED",")",")",".","get","(","win",")",")",")",";","\n","}","\n","m","=","swapMapOrder","(","m",")",";","\n\n","Map<String,","Double>","win2compLatWgtAvg","=","ClientStatsUtil",".","getMapByKey","(","m,","COMP_LAT_TOTAL",")",";","\n","Map<String,","Long>","win2acked","=","ClientStatsUtil",".","getMapByKey","(","m,","ACKED",")",";","\n\n","Map<String,","Map<String,","Long>>","emitted","=","ClientStatsUtil",".","getMapByKey","(","beat,","EMITTED",")",";","\n","Map<String,","Long>","win2emitted","=","mergeWithSumLong","(","aggregateCountStreams","(","filterSysStreams","(","emitted,","includeSys",")",")",",\n","ClientStatsUtil",".","getMapByKey","(","accStats,","WIN_TO_EMITTED",")",")",";","\n","ret",".","put","(","WIN_TO_EMITTED,","win2emitted",")",";","\n\n","Map<String,","Map<String,","Long>>","transferred","=","ClientStatsUtil",".","getMapByKey","(","beat,","TRANSFERRED",")",";","\n","Map<String,","Long>","win2transferred","=","mergeWithSumLong","(","aggregateCountStreams","(","filterSysStreams","(","transferred,","includeSys",")",")",",\n","ClientStatsUtil",".","getMapByKey","(","accStats,","WIN_TO_TRANSFERRED",")",")",";","\n","ret",".","put","(","WIN_TO_TRANSFERRED,","win2transferred",")",";","\n\n","ret",".","put","(","WIN_TO_COMP_LAT_WGT_AVG,","mergeWithSumDouble","(","\n","ClientStatsUtil",".","getMapByKey","(","accStats,","WIN_TO_COMP_LAT_WGT_AVG",")",",","win2compLatWgtAvg",")",")",";","\n","ret",".","put","(","WIN_TO_ACKED,","mergeWithSumLong","(","\n","ClientStatsUtil",".","getMapByKey","(","accStats,","WIN_TO_ACKED",")",",","win2acked",")",")",";","\n","ret",".","put","(","WIN_TO_FAILED,","mergeWithSumLong","(","\n","aggregateCountStreams","(","ClientStatsUtil",".","getMapByKey","(","beat,","FAILED",")",")",",","ClientStatsUtil",".","getMapByKey","(","accStats,","WIN_TO_FAILED",")",")",")",";","\n\n","return","ret",";","\n"],"docstring_tokens":["aggregate","windowed","stats","from","a","spout","executor","stats","with","a","Map","of","accumulated","stats"]}
{"code_tokens":["\n","public","static","ComponentPageInfo","aggCompExecsStats","(","\n","Map","exec2hostPort,","Map","task2component,","Map<List<Integer>,","Map<String,","Object>>","beats,\n","String","window,","boolean","includeSys,","String","topologyId,","StormTopology","topology,","String","componentId",")","{","\n\n","List<Map<String,","Object>>","beatList","=\n","extractDataFromHb","(","exec2hostPort,","task2component,","beats,","includeSys,","topology,","componentId",")",";","\n","Map<String,","Object>","compStats","=","aggregateCompStats","(","window,","includeSys,","beatList,","componentType","(","topology,","componentId",")",")",";","\n","compStats","=","postAggregateCompStats","(","compStats",")",";","\n","return","thriftifyCompPageData","(","topologyId,","topology,","componentId,","compStats",")",";","\n"],"docstring_tokens":["aggregate","component","executor","stats"]}
{"code_tokens":["\n","public","static","List<WorkerSummary>","aggWorkerStats","(","String","stormId,","String","stormName,\n","Map<Integer,","String>","task2Component,\n","Map<List<Integer>,","Map<String,","Object>>","beats,\n","Map<List<Long>,","List<Object>>","exec2NodePort,\n","Map<String,","String>","nodeHost,\n","Map<WorkerSlot,","WorkerResources>","worker2Resources,\n","boolean","includeSys,\n","boolean","userAuthorized,\n","String","filterSupervisor,\n","String","owner",")","{","\n\n","//","host,port","=>","WorkerSummary\n","HashMap<WorkerSlot,","WorkerSummary>","workerSummaryMap","=","new","HashMap<>","(",")",";","\n\n","if","(","exec2NodePort","!=","null",")","{","\n","//","for","each","executor","->","node+port","pair\n","for","(","Map",".","Entry<List<Long>,","List<Object>>","execNodePort",":","exec2NodePort",".","entrySet","(",")",")","{","\n","List<Object>","nodePort","=","execNodePort",".","getValue","(",")",";","\n","String","node","=","(","String",")","nodePort",".","get","(","0",")",";","\n","Long","port","=","(","Long",")","nodePort",".","get","(","1",")",";","\n","String","host","=","nodeHost",".","get","(","node",")",";","\n","WorkerSlot","slot","=","new","WorkerSlot","(","node,","port",")",";","\n","WorkerResources","resources","=","worker2Resources",".","get","(","slot",")",";","\n\n","if","(","filterSupervisor","==","null","||","node",".","equals","(","filterSupervisor",")",")","{","\n","WorkerSummary","ws","=","workerSummaryMap",".","get","(","slot",")",";","\n\n","if","(","ws","==","null",")","{","\n","ws","=","new","WorkerSummary","(",")",";","\n","ws",".","set_host","(","host",")",";","\n","ws",".","set_port","(","port",".","intValue","(",")",")",";","\n","ws",".","set_supervisor_id","(","node",")",";","\n","ws",".","set_topology_id","(","stormId",")",";","\n","ws",".","set_topology_name","(","stormName",")",";","\n","ws",".","set_num_executors","(","0",")",";","\n","ws",".","set_owner","(","owner",")",";","\n","if","(","resources","!=","null",")","{","\n","ws",".","set_assigned_memonheap","(","resources",".","get_mem_on_heap","(",")",")",";","\n","ws",".","set_assigned_memoffheap","(","resources",".","get_mem_off_heap","(",")",")",";","\n","ws",".","set_assigned_cpu","(","resources",".","get_cpu","(",")",")",";","\n","}","else","{","\n","ws",".","set_assigned_memonheap","(","0",")",";","\n","ws",".","set_assigned_memoffheap","(","0",")",";","\n","ws",".","set_assigned_cpu","(","0",")",";","\n","}","\n","ws",".","set_component_to_num_tasks","(","new","HashMap<String,","Long>","(",")",")",";","\n","workerSummaryMap",".","put","(","slot,","ws",")",";","\n","}","\n","Map<String,","Long>","componentToNumTasks","=","ws",".","get_component_to_num_tasks","(",")",";","\n\n","//","gets","min/max","task","pairs","(","executors",")",":","[1","1]","[2","3]",".",".",".","\n","List<Long>","exec","=","execNodePort",".","getKey","(",")",";","\n","//","get","executor","heartbeat\n","int","hbeatSecs","=","0",";","\n","if","(","beats","!=","null",")","{","\n","Map<String,","Object>","beat","=","beats",".","get","(","ClientStatsUtil",".","convertExecutor","(","exec",")",")",";","\n","hbeatSecs","=","beat","==","null","?","0",":","(","int",")","beat",".","get","(","\"uptime\"",")",";","\n","}","\n","ws",".","set_uptime_secs","(","hbeatSecs",")",";","\n","ws",".","set_num_executors","(","ws",".","get_num_executors","(",")","+","1",")",";","\n\n","//","get","tasks","if","the","user","is","authorized","for","this","topology\n","if","(","userAuthorized",")","{","\n","int","firstTask","=","exec",".","get","(","0",")",".","intValue","(",")",";","\n","int","lastTask","=","exec",".","get","(","1",")",".","intValue","(",")",";","\n\n","//","get","per","task","components\n","for","(","int","task","=","firstTask",";","task","<=","lastTask",";","task++",")","{","\n","String","component","=","task2Component",".","get","(","task",")",";","\n","//","if","the","component","is","a","system","(","__*",")","component","and","we","are","hiding\n","//","them","in","UI,","keep","going\n","if","(","!includeSys","&&","Utils",".","isSystemId","(","component",")",")","{","\n","continue",";","\n","}","\n\n","//","good","to","go,","increment","#","of","tasks","this","component","is","being","executed","on\n","Long","counter","=","componentToNumTasks",".","get","(","component",")",";","\n","if","(","counter","==","null",")","{","\n","counter","=","new","Long","(","0",")",";","\n","}","\n","componentToNumTasks",".","put","(","component,","counter","+","1",")",";","\n","}","\n","}","\n","}","\n","}","\n","}","\n","return","new","ArrayList<WorkerSummary>","(","workerSummaryMap",".","values","(",")",")",";","\n"],"docstring_tokens":["aggregate","statistics","per","worker","for","a","topology"]}
{"code_tokens":["\n","public","static","Map<List<Integer>,","Map<String,","Object>>","convertExecutorBeats","(","Map<ExecutorInfo,","ExecutorBeat>","beats",")","{","\n","Map<List<Integer>,","Map<String,","Object>>","ret","=","new","HashMap<>","(",")",";","\n","for","(","Map",".","Entry<ExecutorInfo,","ExecutorBeat>","beat",":","beats",".","entrySet","(",")",")","{","\n","ExecutorInfo","executorInfo","=","beat",".","getKey","(",")",";","\n","ExecutorBeat","executorBeat","=","beat",".","getValue","(",")",";","\n","ret",".","put","(","Lists",".","newArrayList","(","executorInfo",".","get_task_start","(",")",",","executorInfo",".","get_task_end","(",")",")",",\n","convertZkExecutorHb","(","executorBeat",")",")",";","\n","}","\n\n","return","ret",";","\n"],"docstring_tokens":["convert","thrift","executor","heartbeats","into","a","java","HashMap"]}
{"code_tokens":["\n","public","static","Map<List<Integer>,","Map<String,","Object>>","convertWorkerBeats","(","SupervisorWorkerHeartbeat","workerHeartbeat",")","{","\n","Map<List<Integer>,","Map<String,","Object>>","ret","=","new","HashMap<>","(",")",";","\n","for","(","ExecutorInfo","executorInfo",":","workerHeartbeat",".","get_executors","(",")",")","{","\n","Map<String,","Object>","reportBeat","=","new","HashMap<>","(",")",";","\n","reportBeat",".","put","(","ClientStatsUtil",".","TIME_SECS,","workerHeartbeat",".","get_time_secs","(",")",")",";","\n","ret",".","put","(","Lists",".","newArrayList","(","executorInfo",".","get_task_start","(",")",",","executorInfo",".","get_task_end","(",")",")",",\n","reportBeat",")",";","\n","}","\n\n","return","ret",";","\n"],"docstring_tokens":["convert","SupervisorWorkerHeartbeat","to","nimbus","local","report","executor","heartbeats"]}
{"code_tokens":["\n","public","static","List<Map<String,","Object>>","extractNodeInfosFromHbForComp","(","\n","Map<List<?","extends","Number>,","List<Object>>","exec2hostPort,","Map<Integer,","String>","task2component,","boolean","includeSys,","String","compId",")","{","\n","List<Map<String,","Object>>","ret","=","new","ArrayList<>","(",")",";","\n\n","Set<List>","hostPorts","=","new","HashSet<>","(",")",";","\n","for","(","Entry<List<?","extends","Number>,","List<Object>>","entry",":","exec2hostPort",".","entrySet","(",")",")","{","\n","List<?","extends","Number>","key","=","entry",".","getKey","(",")",";","\n","List<Object>","value","=","entry",".","getValue","(",")",";","\n\n","Integer","start","=","key",".","get","(","0",")",".","intValue","(",")",";","\n","String","host","=","(","String",")","value",".","get","(","0",")",";","\n","Integer","port","=","(","Integer",")","value",".","get","(","1",")",";","\n","String","comp","=","task2component",".","get","(","start",")",";","\n","if","(","(","compId","==","null","||","compId",".","equals","(","comp",")",")","&&","(","includeSys","||","!Utils",".","isSystemId","(","comp",")",")",")","{","\n","hostPorts",".","add","(","Lists",".","newArrayList","(","host,","port",")",")",";","\n","}","\n","}","\n\n","for","(","List","hostPort",":","hostPorts",")","{","\n","Map<String,","Object>","m","=","new","HashMap<>","(",")",";","\n","m",".","put","(","HOST,","hostPort",".","get","(","0",")",")",";","\n","m",".","put","(","PORT,","hostPort",".","get","(","1",")",")",";","\n","ret",".","add","(","m",")",";","\n","}","\n\n","return","ret",";","\n"],"docstring_tokens":["extract","a","list","of","host","port","info","for","specified","component"]}
{"code_tokens":["\n","public","static","List<Map<String,","Object>>","extractDataFromHb","(","Map","executor2hostPort,","Map","task2component,\n","Map<List<Integer>,","Map<String,","Object>>","beats,\n","boolean","includeSys,","StormTopology","topology,","String","compId",")","{","\n","List<Map<String,","Object>>","ret","=","new","ArrayList<>","(",")",";","\n","if","(","executor2hostPort","==","null","||","beats","==","null",")","{","\n","return","ret",";","\n","}","\n","for","(","Object","o",":","executor2hostPort",".","entrySet","(",")",")","{","\n","Map",".","Entry","entry","=","(","Map",".","Entry",")","o",";","\n","List","executor","=","(","List",")","entry",".","getKey","(",")",";","\n","List","hostPort","=","(","List",")","entry",".","getValue","(",")",";","\n\n","Integer","start","=","(","(","Number",")","executor",".","get","(","0",")",")",".","intValue","(",")",";","\n","Integer","end","=","(","(","Number",")","executor",".","get","(","1",")",")",".","intValue","(",")",";","\n\n","String","host","=","(","String",")","hostPort",".","get","(","0",")",";","\n","Integer","port","=","(","(","Number",")","hostPort",".","get","(","1",")",")",".","intValue","(",")",";","\n\n","Map<String,","Object>","beat","=","beats",".","get","(","ClientStatsUtil",".","convertExecutor","(","executor",")",")",";","\n","if","(","beat","==","null",")","{","\n","continue",";","\n","}","\n","String","id","=","(","String",")","task2component",".","get","(","start",")",";","\n\n","Map<String,","Object>","m","=","new","HashMap<>","(",")",";","\n","if","(","(","compId","==","null","||","compId",".","equals","(","id",")",")","&&","(","includeSys","||","!Utils",".","isSystemId","(","id",")",")",")","{","\n","m",".","put","(","\"exec-id\",","entry",".","getKey","(",")",")",";","\n","m",".","put","(","\"comp-id\",","id",")",";","\n","m",".","put","(","NUM_TASKS,","end","-","start","+","1",")",";","\n","m",".","put","(","HOST,","host",")",";","\n","m",".","put","(","PORT,","port",")",";","\n\n","Map","stats","=","ClientStatsUtil",".","getMapByKey","(","beat,","STATS",")",";","\n","m",".","put","(","ClientStatsUtil",".","UPTIME,","beat",".","get","(","ClientStatsUtil",".","UPTIME",")",")",";","\n","m",".","put","(","STATS,","stats",")",";","\n\n","String","type","=","componentType","(","topology,","compId",")",";","\n","if","(","type","!=","null",")","{","\n","m",".","put","(","TYPE,","type",")",";","\n","}","else","{","\n","m",".","put","(","TYPE,","stats",".","get","(","TYPE",")",")",";","\n","}","\n","ret",".","add","(","m",")",";","\n","}","\n","}","\n","return","ret",";","\n"],"docstring_tokens":["extracts","a","list","of","executor","data","from","heart","beats"]}
{"code_tokens":["\n","private","static","<K,","V>","Map<K,","V>","filterSysStreams2Stat","(","Map<K,","V>","stream2stat,","boolean","includeSys",")","{","\n","LOG",".","trace","(","\"Filter","Sys","Streams2Stat","{","}","\",","stream2stat",")",";","\n","if","(","!includeSys",")","{","\n","for","(","Iterator","itr","=","stream2stat",".","keySet","(",")",".","iterator","(",")",";","itr",".","hasNext","(",")",";",")","{","\n","Object","key","=","itr",".","next","(",")",";","\n","if","(","key","instanceof","String","&&","Utils",".","isSystemId","(","(","String",")","key",")",")","{","\n","itr",".","remove","(",")",";","\n","}","\n","}","\n","}","\n","return","stream2stat",";","\n"],"docstring_tokens":["filter","system","streams","from","stats"]}
{"code_tokens":["\n","public","static","String","componentType","(","StormTopology","topology,","String","compId",")","{","\n","if","(","compId","==","null",")","{","\n","return","null",";","\n","}","\n\n","Map<String,","Bolt>","bolts","=","topology",".","get_bolts","(",")",";","\n","if","(","Utils",".","isSystemId","(","compId",")","||","bolts",".","containsKey","(","compId",")",")","{","\n","return","ClientStatsUtil",".","BOLT",";","\n","}","\n","return","ClientStatsUtil",".","SPOUT",";","\n"],"docstring_tokens":["Get","the","coponenet","type","for","a","give","id"]}
{"code_tokens":["\n","private","Set<Integer>","workerOutboundTasks","(",")","{","\n","WorkerTopologyContext","context","=","getWorkerTopologyContext","(",")",";","\n","Set<String>","components","=","new","HashSet<>","(",")",";","\n","for","(","Integer","taskId",":","localTaskIds",")","{","\n","for","(","Map<String,","Grouping>","value",":","context",".","getTargets","(","context",".","getComponentId","(","taskId",")",")",".","values","(",")",")","{","\n","components",".","addAll","(","value",".","keySet","(",")",")",";","\n","}","\n","}","\n\n","Set<Integer>","outboundTasks","=","new","HashSet<>","(",")",";","\n\n","for","(","Map",".","Entry<String,","List<Integer>>","entry",":","Utils",".","reverseMap","(","taskToComponent",")",".","entrySet","(",")",")","{","\n","if","(","components",".","contains","(","entry",".","getKey","(",")",")",")","{","\n","outboundTasks",".","addAll","(","entry",".","getValue","(",")",")",";","\n","}","\n","}","\n","return","outboundTasks",";","\n"],"docstring_tokens":["Get","worker","outbound","tasks"]}
{"code_tokens":["\n","public","boolean","hasRemoteOutboundTasks","(",")","{","\n","Set<Integer>","remoteTasks","=","Sets",".","difference","(","new","HashSet<>","(","outboundTasks",")",",","new","HashSet<>","(","localTaskIds",")",")",";","\n","return","!remoteTasks",".","isEmpty","(",")",";","\n"],"docstring_tokens":["Check","if","this","worker","has","remote","outbound","tasks"]}
{"code_tokens":["\n","public","boolean","isSingleWorker","(",")","{","\n","Set<Integer>","nonLocalTasks","=","Sets",".","difference","(","getTaskToComponent","(",")",".","keySet","(",")",",\n","new","HashSet<>","(","localTaskIds",")",")",";","\n","return","nonLocalTasks",".","isEmpty","(",")",";","\n"],"docstring_tokens":["If","all","the","tasks","are","local","tasks,","the","topology","has","only","one","worker"]}
{"code_tokens":["\n","@Override\n","public","TriggerPolicy<T,","?>","getTriggerPolicy","(","TriggerHandler","triggerHandler,","EvictionPolicy<T,","?>","evictionPolicy",")","{","\n","return","new","TimeTriggerPolicy<>","(","windowConfig",".","getSlidingLength","(",")",",","triggerHandler,","evictionPolicy",")",";","\n"],"docstring_tokens":["Returns","a","TriggerPolicy","which","triggers","for","every","given","sliding","duration"]}
{"code_tokens":["\n","@Override\n","public","EvictionPolicy<T,","?>","getEvictionPolicy","(",")","{","\n","return","new","TimeEvictionPolicy<>","(","windowConfig",".","getWindowLength","(",")",")",";","\n"],"docstring_tokens":["Returns","an","EvictionPolicy","instance","which","evicts","elements","after","given","window","duration"]}
{"code_tokens":["\n","public","boolean","hasCommitted","(",")","{","\n","return","committed",";","\n"],"docstring_tokens":["Checks","if","this","OffsetManager","has","committed","to","Kafka"]}
{"code_tokens":["\n","public","void","refresh","(",")","{","\n","long","current","=","Time",".","currentTimeMillis","(",")",";","\n","if","(","lastUpdateTimestamp","<=","0","||","current",">","lastUpdateTimestamp","+","configCacheExpirationMs",")","{","\n","LOG",".","debug","(","\"refreshing","scheduler","config","since","cache","is","expired\"",")",";","\n","T","updatedConfig","=","reloader",".","reload","(",")",";","\n","schedulerConfigAtomicReference",".","set","(","updatedConfig",")",";","\n","lastUpdateTimestamp","=","current",";","\n","}","else","{","\n","LOG",".","debug","(","\"skip","refreshing","scheduler","config","since","cache","is","not","yet","expired",";","\"",")",";","\n","}","\n"],"docstring_tokens":["Refresh","the","config","only","after","the","cache","expires"]}
{"code_tokens":["\n","public","LocalFsBlobStoreFile","read","(","String","key",")","throws","IOException","{","\n","return","new","LocalFsBlobStoreFile","(","getKeyDir","(","key",")",",","BlobStoreFile",".","BLOBSTORE_DATA_FILE",")",";","\n"],"docstring_tokens":["Get","an","input","stream","for","reading","a","part"]}
{"code_tokens":["\n","public","boolean","exists","(","String","key",")","{","\n","return","getKeyDir","(","key",")",".","exists","(",")",";","\n"],"docstring_tokens":["Check","if","the","key","exists","in","the","blob","store"]}
{"code_tokens":["\n","public","void","deleteKey","(","String","key",")","throws","IOException","{","\n","File","keyDir","=","getKeyDir","(","key",")",";","\n","LocalFsBlobStoreFile","pf","=","new","LocalFsBlobStoreFile","(","keyDir,","BlobStoreFile",".","BLOBSTORE_DATA_FILE",")",";","\n","pf",".","delete","(",")",";","\n","delete","(","keyDir",")",";","\n"],"docstring_tokens":["Delete","a","key","from","the","blob","store"]}
{"code_tokens":["\n","public","void","schedule","(","int","delaySecs,","Runnable","func,","boolean","checkActive,","int","jitterMs",")","{","\n","scheduleMs","(","Time",".","secsToMillisLong","(","delaySecs",")",",","func,","checkActive,","jitterMs",")",";","\n"],"docstring_tokens":["Schedule","a","function","to","be","executed","in","the","timer"]}
{"code_tokens":["\n","private","void","checkActive","(",")","{","\n","if","(","!this",".","task",".","isActive","(",")",")","{","\n","throw","new","IllegalStateException","(","\"Timer","is","not","active\"",")",";","\n","}","\n"],"docstring_tokens":["check","if","timer","is","active"]}
{"code_tokens":["\n","public","void","record","(","T","key,","long","latency",")","{","\n","get","(","key",")",".","record","(","latency",")",";","\n"],"docstring_tokens":["Record","a","latency","value"]}
{"code_tokens":["\n","public","Map<String,","Map<String,","List<String>>>","getThisInputFields","(",")","{","\n","Map<String,","Map<String,","List<String>>>","outputMap","=","new","HashMap<>","(",")",";","\n","for","(","Map",".","Entry<GlobalStreamId,","Grouping>","entry",":","this",".","getThisSources","(",")",".","entrySet","(",")",")","{","\n","String","componentId","=","entry",".","getKey","(",")",".","get_componentId","(",")",";","\n","Set<String>","streams","=","getComponentStreams","(","componentId",")",";","\n","for","(","String","stream",":","streams",")","{","\n","Map<String,","List<String>>","streamFieldMap","=","outputMap",".","get","(","componentId",")",";","\n","if","(","streamFieldMap","==","null",")","{","\n","streamFieldMap","=","new","HashMap<>","(",")",";","\n","outputMap",".","put","(","componentId,","streamFieldMap",")",";","\n","}","\n","streamFieldMap",".","put","(","stream,","getComponentOutputFields","(","componentId,","stream",")",".","toList","(",")",")",";","\n","}","\n","}","\n","return","outputMap",";","\n"],"docstring_tokens":["Gets","the","declared","input","fields","for","this","component"]}
{"code_tokens":["\n","public","TridentJmsSpout","named","(","String","name",")","{","\n","this",".","name","=","name",";","\n","return","this",";","\n"],"docstring_tokens":["Set","the","name","for","this","spout,","to","improve","log","identification"]}
{"code_tokens":["\n","public","TridentJmsSpout","withJmsProvider","(","JmsProvider","provider",")","{","\n","this",".","jmsProvider","=","provider",";","\n","return","this",";","\n"],"docstring_tokens":["Set","the","JmsProvider","implementation","that","this","Spout","will","use","to","connect","to","a","JMS","javax.jms.Desination"]}
{"code_tokens":["\n","public","OpenTsdbBolt","failTupleForFailedMetrics","(",")","{","\n","this",".","failTupleForFailedMetrics","=","true",";","\n","return","this",";","\n"],"docstring_tokens":["When","it","is","invoked,","this","bolt","acks","only","the","tuples","which","have","successful","metrics","stored","into","OpenTSDB","and","fails","the","respective","tuples","of","the","failed","metrics"]}
{"code_tokens":["\n","private","int","getNodesForIsolatedTop","(","TopologyDetails","td,","Set<Node>","allNodes,\n","NodePool[]","lesserPools,","int","nodesRequested",")","{","\n","String","topId","=","td",".","getId","(",")",";","\n","LOG",".","debug","(","\"Topology","{","}","is","isolated\",","topId",")",";","\n","int","nodesFromUsAvailable","=","nodesAvailable","(",")",";","\n","int","nodesFromOthersAvailable","=","NodePool",".","nodesAvailable","(","lesserPools",")",";","\n\n","int","nodesUsed","=","topologyIdToNodes",".","get","(","topId",")",".","size","(",")",";","\n","int","nodesNeeded","=","nodesRequested","-","nodesUsed",";","\n","LOG",".","debug","(","\"Nodes",".",".",".","requested","{","}","used","{","}","available","from","us","{","}","\"\n","+","\"avail","from","other","{","}","needed","{","}","\",\n","nodesRequested,\n","nodesUsed,\n","nodesFromUsAvailable,\n","nodesFromOthersAvailable,\n","nodesNeeded",")",";","\n","if","(","(","nodesNeeded","-","nodesFromUsAvailable",")",">","(","maxNodes","-","usedNodes",")",")","{","\n","cluster",".","setStatus","(","topId,\n","\"Max","Nodes","(","\"\n","+","maxNodes\n","+","\"",")","for","this","user","would","be","exceeded",".","\"\n","+","(","(","nodesNeeded","-","nodesFromUsAvailable",")","-","(","maxNodes","-","usedNodes",")",")","\n","+","\"","more","nodes","needed","to","run","topology",".","\"",")",";","\n","return","0",";","\n","}","\n\n","//In","order","to","avoid","going","over","maxNodes","I","may","need","to","steal","from\n","//","myself","even","though","other","pools","have","free","nodes",".","so","figure","out","how\n","//","much","each","group","should","provide\n","int","nodesNeededFromOthers","=","Math",".","min","(","Math",".","min","(","maxNodes","-","usedNodes,\n","nodesFromOthersAvailable",")",",","nodesNeeded",")",";","\n","int","nodesNeededFromUs","=","nodesNeeded","-","nodesNeededFromOthers",";","\n","LOG",".","debug","(","\"Nodes",".",".",".","needed","from","us","{","}","needed","from","others","{","}","\",\n","nodesNeededFromUs,","nodesNeededFromOthers",")",";","\n\n","if","(","nodesNeededFromUs",">","nodesFromUsAvailable",")","{","\n","cluster",".","setStatus","(","topId,","\"Not","Enough","Nodes","Available","to","Schedule","Topology\"",")",";","\n","return","0",";","\n","}","\n\n","//Get","the","nodes\n","Collection<Node>","found","=","NodePool",".","takeNodes","(","nodesNeededFromOthers,","lesserPools",")",";","\n","usedNodes","+=","found",".","size","(",")",";","\n","allNodes",".","addAll","(","found",")",";","\n","Collection<Node>","foundMore","=","takeNodes","(","nodesNeededFromUs",")",";","\n","usedNodes","+=","foundMore",".","size","(",")",";","\n","allNodes",".","addAll","(","foundMore",")",";","\n\n","int","totalTasks","=","td",".","getExecutors","(",")",".","size","(",")",";","\n","int","origRequest","=","td",".","getNumWorkers","(",")",";","\n","int","slotsRequested","=","Math",".","min","(","totalTasks,","origRequest",")",";","\n","int","slotsUsed","=","Node",".","countSlotsUsed","(","allNodes",")",";","\n","int","slotsFree","=","Node",".","countFreeSlotsAlive","(","allNodes",")",";","\n","int","slotsToUse","=","Math",".","min","(","slotsRequested","-","slotsUsed,","slotsFree",")",";","\n","if","(","slotsToUse","<=","0",")","{","\n","//","if","#","of","workers","requested","is","more","than","we","currently","have\n","if","(","origRequest",">","slotsUsed",")","{","\n","cluster",".","setStatus","(","topId,\n","\"Running","with","fewer","slots","than","requested","\"\n","+","slotsUsed\n","+","\"/\"\n","+","origRequest\n","+","\"","on","\"\n","+","allNodes",".","size","(",")","\n","+","\"","node","(","s",")","with","\"\n","+","(","slotsUsed","+","slotsFree",")","\n","+","\"","total","slots\"",")",";","\n","}","else","{","\n","//","if","#","of","workers","requested","is","less","than","we","took\n","//","then","we","know","some","workers","we","track","died,","since","we","have","more","workers","than","we","are","supposed","to","have\n","cluster",".","setStatus","(","topId,","\"Node","has","partially","crashed,","if","this","situation","persists","rebalance","the","topology",".","\"",")",";","\n","}","\n","}","\n","return","slotsToUse",";","\n"],"docstring_tokens":["Get","the","nodes","needed","to","schedule","an","isolated","topology"]}
{"code_tokens":["\n","private","int","getNodesForNotIsolatedTop","(","TopologyDetails","td,","Set<Node>","allNodes,\n","NodePool[]","lesserPools",")","{","\n","String","topId","=","td",".","getId","(",")",";","\n","LOG",".","debug","(","\"Topology","{","}","is","not","isolated\",","topId",")",";","\n","int","totalTasks","=","td",".","getExecutors","(",")",".","size","(",")",";","\n","int","origRequest","=","td",".","getNumWorkers","(",")",";","\n","int","slotsRequested","=","Math",".","min","(","totalTasks,","origRequest",")",";","\n","int","slotsUsed","=","Node",".","countSlotsUsed","(","topId,","allNodes",")",";","\n","int","slotsFree","=","Node",".","countFreeSlotsAlive","(","allNodes",")",";","\n","//Check","to","see","if","we","have","enough","slots","before","trying","to","get","them\n","int","slotsAvailable","=","0",";","\n","if","(","slotsRequested",">","slotsFree",")","{","\n","slotsAvailable","=","NodePool",".","slotsAvailable","(","lesserPools",")",";","\n","}","\n","int","slotsToUse","=","Math",".","min","(","slotsRequested","-","slotsUsed,","slotsFree","+","slotsAvailable",")",";","\n","LOG",".","debug","(","\"Slots",".",".",".","requested","{","}","used","{","}","free","{","}","available","{","}","to","be","used","{","}","\",\n","slotsRequested,","slotsUsed,","slotsFree,","slotsAvailable,","slotsToUse",")",";","\n","if","(","slotsToUse","<=","0",")","{","\n","cluster",".","setStatus","(","topId,","\"Not","Enough","Slots","Available","to","Schedule","Topology\"",")",";","\n","return","0",";","\n","}","\n","int","slotsNeeded","=","slotsToUse","-","slotsFree",";","\n","int","numNewNodes","=","NodePool",".","getNodeCountIfSlotsWereTaken","(","slotsNeeded,","lesserPools",")",";","\n","LOG",".","debug","(","\"Nodes",".",".",".","new","{","}","used","{","}","max","{","}","\",\n","numNewNodes,","usedNodes,","maxNodes",")",";","\n","if","(","(","numNewNodes","+","usedNodes",")",">","maxNodes",")","{","\n","cluster",".","setStatus","(","topId,\n","\"Max","Nodes","(","\"\n","+","maxNodes\n","+","\"",")","for","this","user","would","be","exceeded",".","\"\n","+","(","numNewNodes","-","(","maxNodes","-","usedNodes",")",")","\n","+","\"","more","nodes","needed","to","run","topology",".","\"",")",";","\n","return","0",";","\n","}","\n\n","Collection<Node>","found","=","NodePool",".","takeNodesBySlot","(","slotsNeeded,","lesserPools",")",";","\n","usedNodes","+=","found",".","size","(",")",";","\n","allNodes",".","addAll","(","found",")",";","\n","return","slotsToUse",";","\n"],"docstring_tokens":["Get","the","nodes","needed","to","schedule","a","non-isolated","topology"]}
{"code_tokens":["\n","public","LSWorkerHeartbeat","readHeartbeat","(",")","throws","IOException","{","\n","LocalState","localState","=","ConfigUtils",".","workerState","(","conf,","workerId",")",";","\n","LSWorkerHeartbeat","hb","=","localState",".","getWorkerHeartBeat","(",")",";","\n","LOG",".","trace","(","\"","{","}",":","Reading","heartbeat","{","}","\",","workerId,","hb",")",";","\n","return","hb",";","\n"],"docstring_tokens":["Read","the","Heartbeat","for","the","current","container"]}
{"code_tokens":["\n","public","boolean","isMemoryLimitViolated","(","LocalAssignment","withUpdatedLimits",")","throws","IOException","{","\n","updateMemoryAccounting","(",")",";","\n","return","false",";","\n"],"docstring_tokens":["Check","if","the","container","is","over","its","memory","limit","AND","needs","to","be","killed"]}
{"code_tokens":["\n","public","void","assign","(","WorkerSlot","slot,","String","topologyId,","Collection<ExecutorDetails>","executors",")","{","\n","assertValidTopologyForModification","(","topologyId",")",";","\n","if","(","isSlotOccupied","(","slot",")",")","{","\n","throw","new","RuntimeException","(","\n","\"slot:","[\"","+","slot",".","getNodeId","(",")","+","\",","\"","+","slot",".","getPort","(",")","+","\"]","is","already","occupied",".","\"",")",";","\n","}","\n\n","Collection<ExecutorDetails>","executorDetails","=\n","topoIdToNodeIdToSlotIdToExecutors\n",".","computeIfAbsent","(","topologyId,","Cluster::makeMap",")","\n",".","computeIfAbsent","(","slot",".","getNodeId","(",")",",","Cluster::makeMap",")","\n",".","computeIfAbsent","(","slot",".","getId","(",")",",","Cluster::makeSet",")",";","\n","executorDetails",".","clear","(",")",";","\n","executorDetails",".","addAll","(","executors",")",";","\n\n","TopologyDetails","td","=","topologies",".","getById","(","topologyId",")",";","\n","if","(","td","==","null",")","{","\n","throw","new","IllegalArgumentException","(","\n","\"Trying","to","schedule","for","topo","\"\n","+","topologyId\n","+","\"","but","that","is","not","a","known","topology","\"\n","+","topologies",".","getAllIds","(",")",")",";","\n","}","\n","WorkerResources","resources","=","calculateWorkerResources","(","td,","executors",")",";","\n","SchedulerAssignmentImpl","assignment","=","assignments",".","get","(","topologyId",")",";","\n","if","(","assignment","==","null",")","{","\n","assignment","=","new","SchedulerAssignmentImpl","(","topologyId",")",";","\n","assignments",".","put","(","topologyId,","assignment",")",";","\n","}","else","{","\n","for","(","ExecutorDetails","executor",":","executors",")","{","\n","if","(","assignment",".","isExecutorAssigned","(","executor",")",")","{","\n","throw","new","RuntimeException","(","\n","\"Attempting","to","assign","executor:","\"\n","+","executor\n","+","\"","of","topology:","\"\n","+","topologyId\n","+","\"","to","workerslot:","\"\n","+","slot\n","+","\"",".","The","executor","is","already","assigned","to","workerslot:","\"\n","+","assignment",".","getExecutorToSlot","(",")",".","get","(","executor",")","\n","+","\"",".","The","executor","must","unassigned","before","it","can","be","assigned","to","another","slot!\"",")",";","\n","}","\n","}","\n","}","\n\n","assignment",".","assign","(","slot,","executors,","resources",")",";","\n","String","nodeId","=","slot",".","getNodeId","(",")",";","\n","double","sharedOffHeapNodeMemory","=","calculateSharedOffHeapNodeMemory","(","nodeId,","td",")",";","\n","assignment",".","setTotalSharedOffHeapNodeMemory","(","nodeId,","sharedOffHeapNodeMemory",")",";","\n","updateCachesForWorkerSlot","(","slot,","resources,","topologyId,","sharedOffHeapNodeMemory",")",";","\n","totalResourcesPerNodeCache",".","remove","(","slot",".","getNodeId","(",")",")",";","\n"],"docstring_tokens":["Assign","the","slot","to","the","executors","for","this","topology"]}
{"code_tokens":["\n","public","void","assign","(","SchedulerAssignment","assignment,","boolean","ignoreSingleExceptions",")","{","\n","String","id","=","assignment",".","getTopologyId","(",")",";","\n","assertValidTopologyForModification","(","id",")",";","\n","Map<WorkerSlot,","Collection<ExecutorDetails>>","slotToExecs","=","assignment",".","getSlotToExecutors","(",")",";","\n","for","(","Entry<WorkerSlot,","Collection<ExecutorDetails>>","entry",":","slotToExecs",".","entrySet","(",")",")","{","\n","try","{","\n","assign","(","entry",".","getKey","(",")",",","id,","entry",".","getValue","(",")",")",";","\n","}","catch","(","RuntimeException","e",")","{","\n","if","(","!ignoreSingleExceptions",")","{","\n","throw","e",";","\n","}","\n","}","\n","}","\n"],"docstring_tokens":["Assign","everything","for","the","given","topology"]}
{"code_tokens":["\n","private","void","initializeTopoSharedOffHeapNodeMemoryFlag","(","TopologyDetails","td",")","{","\n","String","topoId","=","td",".","getId","(",")",";","\n","topoSharedOffHeapMemoryNodeFlag",".","put","(","topoId,","false",")",";","\n","StormTopology","topology","=","td",".","getTopology","(",")",";","\n","if","(","topology","==","null",")","{","\n","return",";","//","accommodate","multitenant_scheduler_test",".","clj\n","}","\n","if","(","topology",".","is_set_shared_memory","(",")",")","{","\n","for","(","SharedMemory","sharedMemory",":","topology",".","get_shared_memory","(",")",".","values","(",")",")","{","\n","double","val","=","sharedMemory",".","get_off_heap_node","(",")",";","\n","if","(","val",">","0",".","0",")","{","\n","topoSharedOffHeapMemoryNodeFlag",".","put","(","topoId,","true",")",";","\n","return",";","\n","}","\n","}","\n","}","\n"],"docstring_tokens":["Initialize","the","flag","to","true","if","specified","topology","uses","SharedOffHeapNodeMemory,","false","otherwise"]}
{"code_tokens":["\n","public","void","setAssignments","(","\n","Map<String,","?","extends","SchedulerAssignment>","newAssignments,","boolean","ignoreSingleExceptions",")","{","\n","if","(","newAssignments","==","assignments",")","{","\n","//NOOP\n","return",";","\n","}","\n","for","(","SchedulerAssignment","assignment",":","newAssignments",".","values","(",")",")","{","\n","assertValidTopologyForModification","(","assignment",".","getTopologyId","(",")",")",";","\n","}","\n","for","(","SchedulerAssignment","assignment",":","assignments",".","values","(",")",")","{","\n","assertValidTopologyForModification","(","assignment",".","getTopologyId","(",")",")",";","\n","}","\n","assignments",".","clear","(",")",";","\n","totalResourcesPerNodeCache",".","clear","(",")",";","\n","nodeToScheduledResourcesCache",".","values","(",")",".","forEach","(","Map::clear",")",";","\n","nodeToUsedSlotsCache",".","values","(",")",".","forEach","(","Set::clear",")",";","\n","for","(","SchedulerAssignment","assignment",":","newAssignments",".","values","(",")",")","{","\n","assign","(","assignment,","ignoreSingleExceptions",")",";","\n","}","\n"],"docstring_tokens":["Set","assignments","for","cluster"]}
{"code_tokens":["\n","public","void","setStatus","(","String","topologyId,","String","statusMessage",")","{","\n","assertValidTopologyForModification","(","topologyId",")",";","\n","LOG",".","info","(","\"STATUS","-","{","}","{","}","\",","topologyId,","statusMessage",")",";","\n","status",".","put","(","topologyId,","statusMessage",")",";","\n"],"docstring_tokens":["set","scheduler","status","for","a","topology"]}
{"code_tokens":["\n","public","void","setStatusMap","(","Map<String,","String>","statusMap",")","{","\n","if","(","statusMap","==","this",".","status",")","{","\n","return",";","//This","is","a","NOOP\n","}","\n","for","(","String","topologyId",":","statusMap",".","keySet","(",")",")","{","\n","assertValidTopologyForModification","(","topologyId",")",";","\n","}","\n","for","(","String","topologyId",":","status",".","keySet","(",")",")","{","\n","assertValidTopologyForModification","(","topologyId",")",";","\n","}","\n","this",".","status",".","clear","(",")",";","\n","this",".","status",".","putAll","(","statusMap",")",";","\n"],"docstring_tokens":["set","scheduler","status","map"]}
{"code_tokens":["\n","public","void","unassign","(","String","topoId",")","{","\n","assertValidTopologyForModification","(","topoId",")",";","\n","freeSlots","(","getUsedSlotsByTopologyId","(","topoId",")",")",";","\n"],"docstring_tokens":["Unassign","everything","for","the","given","topology","id"]}
{"code_tokens":["\n","public","void","updateFrom","(","Cluster","other",")","{","\n","for","(","SchedulerAssignment","assignment",":","other",".","getAssignments","(",")",".","values","(",")",")","{","\n","assertValidTopologyForModification","(","assignment",".","getTopologyId","(",")",")",";","\n","}","\n","setAssignments","(","other",".","getAssignments","(",")",",","false",")",";","\n","setStatusMap","(","other",".","getStatusMap","(",")",")",";","\n"],"docstring_tokens":["Update","the","assignments","and","status","from","the","other","cluster"]}
{"code_tokens":["\n","@Override\n","protected","boolean","isExecAssignmentToWorkerValid","(","ExecutorDetails","exec,","WorkerSlot","worker",")","{","\n","if","(","!super",".","isExecAssignmentToWorkerValid","(","exec,","worker",")",")","{","\n","return","false",";","\n","}","\n","//","check","if","executor","can","be","on","worker","based","on","component","exclusions\n","String","execComp","=","execToComp",".","get","(","exec",")",";","\n","Map<String,","Integer>","compAssignmentCnts","=","searcherState",".","getCompAssignmentCntMapForWorker","(","worker",")",";","\n","Set<String>","incompatibleComponents",";","\n","if","(","compAssignmentCnts","!=","null\n","&&","(","incompatibleComponents","=","constraintSolverConfig",".","getIncompatibleComponentSets","(",")",".","get","(","execComp",")",")","!=","null\n","&&","!incompatibleComponents",".","isEmpty","(",")",")","{","\n","for","(","String","otherComp",":","compAssignmentCnts",".","keySet","(",")",")","{","\n","if","(","incompatibleComponents",".","contains","(","otherComp",")",")","{","\n","LOG",".","debug","(","\"Topology","{","}",",","exec=","{","}","with","comp=","{","}","has","constraint","violation","with","comp=","{","}","on","worker=","{","}","\",\n","topoName,","exec,","execComp,","otherComp,","worker",")",";","\n","return","false",";","\n","}","\n","}","\n","}","\n\n","//","check","if","executor","can","be","on","worker","based","on","component","node","co-location","constraint\n","Map<String,","Integer>","maxNodeCoLocationCnts","=","constraintSolverConfig",".","getMaxNodeCoLocationCnts","(",")",";","\n","if","(","maxNodeCoLocationCnts",".","containsKey","(","execComp",")",")","{","\n","int","coLocationMaxCnt","=","maxNodeCoLocationCnts",".","get","(","execComp",")",";","\n","RasNode","node","=","nodes",".","getNodeById","(","worker",".","getNodeId","(",")",")",";","\n","int","compCntOnNode","=","searcherState",".","getComponentCntOnNode","(","node,","execComp",")",";","\n","if","(","compCntOnNode",">=","coLocationMaxCnt",")","{","\n","LOG",".","debug","(","\"Topology","{","}",",","exec=","{","}","with","comp=","{","}","has","MaxCoLocationCnt","violation","on","node","{","}",",","count","{","}",">=","colocation","count","{","}","\",\n","topoName,","exec,","execComp,","node",".","getId","(",")",",","compCntOnNode,","coLocationMaxCnt",")",";","\n","return","false",";","\n","}","\n","}","\n","return","true",";","\n"],"docstring_tokens":["Check","if","any","constraints","are","violated","if","exec","is","scheduled","on","worker"]}
{"code_tokens":["\n","private","boolean","isSchedulingFeasible","(",")","{","\n","int","nodeCnt","=","nodes",".","getNodes","(",")",".","size","(",")",";","\n","for","(","Map",".","Entry<String,","Integer>","entry",":","constraintSolverConfig",".","getMaxNodeCoLocationCnts","(",")",".","entrySet","(",")",")","{","\n","String","comp","=","entry",".","getKey","(",")",";","\n","int","maxCoLocationCnt","=","entry",".","getValue","(",")",";","\n","int","numExecs","=","compToExecs",".","get","(","comp",")",".","size","(",")",";","\n","if","(","numExecs",">","nodeCnt","*","maxCoLocationCnt",")","{","\n","LOG",".","error","(","\"Unsatisfiable","constraint:","Component:","{","}","marked","as","spread","has","{","}","executors","which","is","larger","than","\"\n","+","\"number","of","nodes","*","maxCoLocationCnt:","{","}","*","{","}","\",","comp,","numExecs,","nodeCnt,","maxCoLocationCnt",")",";","\n","return","false",";","\n","}","\n","}","\n","return","true",";","\n"],"docstring_tokens":["A","quick","check","to","see","if","scheduling","is","feasible"]}
{"code_tokens":["\n","public","static","Config","buildConfig","(","TopologyDef","topologyDef",")","{","\n","//","merge","contents","of","`config`","into","topology","config\n","Config","conf","=","new","Config","(",")",";","\n","conf",".","putAll","(","topologyDef",".","getConfig","(",")",")",";","\n","return","conf",";","\n"],"docstring_tokens":["Given","a","topology","definition,","return","a","populated","`org.apache.storm.Config`","instance"]}
{"code_tokens":["\n","public","static","StormTopology","buildTopology","(","ExecutionContext","context",")","throws","IllegalAccessException,\n","InstantiationException,","ClassNotFoundException,","NoSuchMethodException,","InvocationTargetException,","NoSuchFieldException","{","\n\n","StormTopology","topology","=","null",";","\n","TopologyDef","topologyDef","=","context",".","getTopologyDef","(",")",";","\n\n","if","(","!topologyDef",".","validate","(",")",")","{","\n","throw","new","IllegalArgumentException","(","\"Invalid","topology","config",".","Spouts,","bolts","and","streams","cannot","be","\"\n","+","\"defined","in","the","same","configuration","as","a","topologySource",".","\"",")",";","\n","}","\n\n","//","build","components","that","may","be","referenced","by","spouts,","bolts,","etc",".","\n","//","the","map","will","be","a","String","-->","Object","where","the","object","is","a","fully\n","//","constructed","class","instance\n","buildComponents","(","context",")",";","\n\n","if","(","topologyDef",".","isDslTopology","(",")",")","{","\n","//","This","is","a","DSL","(","YAML,","etc",".",")","topology",".",".",".","\n","LOG",".","info","(","\"Detected","DSL","topology",".",".",".","\"",")",";","\n\n","TopologyBuilder","builder","=","new","TopologyBuilder","(",")",";","\n\n","//","create","spouts\n","buildSpouts","(","context,","builder",")",";","\n\n","//","we","need","to","be","able","to","lookup","bolts","by","id,","then","switch","based\n","//","on","whether","they","are","IBasicBolt","or","IRichBolt","instances\n","buildBolts","(","context",")",";","\n\n","//","process","stream","definitions\n","buildStreamDefinitions","(","context,","builder",")",";","\n\n","topology","=","builder",".","createTopology","(",")",";","\n","}","else","{","\n","//","user","class","supplied",".",".",".","\n","//","this","also","provides","a","bridge","to","Trident",".",".",".","\n","LOG",".","info","(","\"A","topology","source","has","been","specified",".",".",".","\"",")",";","\n","ObjectDef","def","=","topologyDef",".","getTopologySource","(",")",";","\n","topology","=","buildExternalTopology","(","def,","context",")",";","\n","}","\n","return","topology",";","\n"],"docstring_tokens":["Given","a","topology","definition,","return","a","Storm","topology","that","can","be","run","either","locally","or","remotely"]}
{"code_tokens":["\n","private","void","heartbeatToMasterIfLocalbeatFail","(","LSWorkerHeartbeat","lsWorkerHeartbeat",")","{","\n","if","(","ConfigUtils",".","isLocalMode","(","this",".","conf",")",")","{","\n","return",";","\n","}","\n\n","//In","distributed","mode,","send","heartbeat","directly","to","master","if","local","supervisor","goes","down",".","\n","SupervisorWorkerHeartbeat","workerHeartbeat","=","new","SupervisorWorkerHeartbeat","(","lsWorkerHeartbeat",".","get_topology_id","(",")",",\n","lsWorkerHeartbeat",".","get_executors","(",")",",\n","lsWorkerHeartbeat",".","get_time_secs","(",")",")",";","\n","try","(","SupervisorIfaceFactory","fac","=","supervisorIfaceSupplier",".","get","(",")",")","{","\n","fac",".","getIface","(",")",".","sendSupervisorWorkerHeartbeat","(","workerHeartbeat",")",";","\n","}","catch","(","Exception","tr1",")","{","\n","//If","any","error/exception","thrown,","report","directly","to","nimbus",".","\n","LOG",".","warn","(","\"Exception","when","send","heartbeat","to","local","supervisor\",","tr1",".","getMessage","(",")",")",";","\n","try","(","NimbusClient","nimbusClient","=","NimbusClient",".","getConfiguredClient","(","topologyConf",")",")","{","\n","nimbusClient",".","getClient","(",")",".","sendSupervisorWorkerHeartbeat","(","workerHeartbeat",")",";","\n","}","catch","(","Exception","tr2",")","{","\n","//if","any","error/exception","thrown,","just","ignore",".","\n","LOG",".","error","(","\"Exception","when","send","heartbeat","to","master\",","tr2",".","getMessage","(",")",")",";","\n","}","\n","}","\n"],"docstring_tokens":["Send","a","heartbeat","to","local","supervisor","first","to","check","if","supervisor","is","ok","for","heartbeating"]}
{"code_tokens":["\n","@Override\n","public","void","close","(",")","{","\n","if","(","!closing",")","{","\n","LOG",".","info","(","\"closing","Netty","Client","{","}","\",","dstAddressPrefixedName",")",";","\n","//","Set","closing","to","true","to","prevent","any","further","reconnection","attempts",".","\n","closing","=","true",";","\n","waitForPendingMessagesToBeSent","(",")",";","\n","closeChannel","(",")",";","\n\n","//","stop","tracking","metrics","for","this","client\n","if","(","this",".","metricRegistry","!=","null",")","{","\n","this",".","metricRegistry",".","deregister","(","this",".","metrics",")",";","\n","}","\n","}","\n"],"docstring_tokens":["Gracefully","close","this","client"]}
{"code_tokens":["\n","public","static","void","main","(","String[]","args",")","throws","Exception","{","\n","Map<String,","Object>","cl","=","CLI",".","opt","(","\"f\",","\"file\",","null",")","\n",".","opt","(","\"u\",","\"user\",","null",")","\n",".","boolOpt","(","\"e\",","\"exception-when-empty\"",")","\n",".","arg","(","\"topologyName\",","CLI",".","FIRST_WINS",")","\n",".","optionalArg","(","\"rawCredentials\",","CLI",".","INTO_LIST",")","\n",".","parse","(","args",")",";","\n\n","String","credentialFile","=","(","String",")","cl",".","get","(","\"f\"",")",";","\n","List<String>","rawCredentials","=","(","List<String>",")","cl",".","get","(","\"rawCredentials\"",")",";","\n","String","topologyName","=","(","String",")","cl",".","get","(","\"topologyName\"",")",";","\n","Utils",".","validateTopologyName","(","topologyName",")",";","\n\n","if","(","null","!=","rawCredentials","&&","(","(","rawCredentials",".","size","(",")","%","2",")","!=","0",")",")","{","\n","throw","new","RuntimeException","(","\"Need","an","even","number","of","arguments","to","make","a","map\"",")",";","\n","}","\n","Map<String,","String>","credentialsMap","=","new","HashMap<>","(",")",";","\n","if","(","null","!=","credentialFile",")","{","\n","Properties","credentialProps","=","new","Properties","(",")",";","\n","credentialProps",".","load","(","new","FileReader","(","credentialFile",")",")",";","\n","for","(","Map",".","Entry<Object,","Object>","credentialProp",":","credentialProps",".","entrySet","(",")",")","{","\n","credentialsMap",".","put","(","(","String",")","credentialProp",".","getKey","(",")",",\n","(","String",")","credentialProp",".","getValue","(",")",")",";","\n","}","\n","}","\n","if","(","null","!=","rawCredentials",")","{","\n","for","(","int","i","=","0",";","i","<","rawCredentials",".","size","(",")",";","i","+=","2",")","{","\n","credentialsMap",".","put","(","rawCredentials",".","get","(","i",")",",","rawCredentials",".","get","(","i","+","1",")",")",";","\n","}","\n","}","\n\n","Map<String,","Object>","topologyConf","=","new","HashMap<>","(",")",";","\n","//Try","to","get","the","topology","conf","from","nimbus,","so","we","can","reuse","it",".","\n","try","(","NimbusClient","nc","=","NimbusClient",".","getConfiguredClient","(","new","HashMap<>","(",")",")",")","{","\n","Nimbus",".","Iface","client","=","nc",".","getClient","(",")",";","\n","TopologySummary","topo","=","client",".","getTopologySummaryByName","(","topologyName",")",";","\n","//We","found","the","topology,","lets","get","the","conf\n","String","topologyId","=","topo",".","get_id","(",")",";","\n","topologyConf","=","(","Map<String,","Object>",")","JSONValue",".","parse","(","client",".","getTopologyConf","(","topologyId",")",")",";","\n","LOG",".","info","(","\"Using","topology","conf","from","{","}","as","basis","for","getting","new","creds\",","topologyId",")",";","\n\n","Map<String,","Object>","commandLine","=","Utils",".","readCommandLineOpts","(",")",";","\n","List<String>","clCreds","=","(","List<String>",")","commandLine",".","get","(","Config",".","TOPOLOGY_AUTO_CREDENTIALS",")",";","\n","List<String>","topoCreds","=","(","List<String>",")","topologyConf",".","get","(","Config",".","TOPOLOGY_AUTO_CREDENTIALS",")",";","\n\n","if","(","clCreds","!=","null",")","{","\n","Set<String>","extra","=","new","HashSet<>","(","clCreds",")",";","\n","if","(","topoCreds","!=","null",")","{","\n","extra",".","removeAll","(","topoCreds",")",";","\n","}","\n","if","(","!extra",".","isEmpty","(",")",")","{","\n","LOG",".","warn","(","\"The","topology","{","}","is","not","using","{","}","but","they","were","included","here",".","\",","topologyId,","extra",")",";","\n","}","\n\n","//Now","check","for","autoCreds","that","are","missing","from","the","command","line,","but","only","if","the\n","//","command","line","is","used",".","\n","if","(","topoCreds","!=","null",")","{","\n","Set<String>","missing","=","new","HashSet<>","(","topoCreds",")",";","\n","missing",".","removeAll","(","clCreds",")",";","\n","if","(","!missing",".","isEmpty","(",")",")","{","\n","LOG",".","warn","(","\"The","topology","{","}","is","using","{","}","but","they","were","not","included","here",".","\",","topologyId,","missing",")",";","\n","}","\n","}","\n","}","\n","}","\n\n","//","use","the","local","setting","for","the","login","config","rather","than","the","topology's\n","topologyConf",".","remove","(","\"java",".","security",".","auth",".","login",".","config\"",")",";","\n\n","boolean","throwExceptionForEmptyCreds","=","(","boolean",")","cl",".","get","(","\"e\"",")",";","\n","boolean","hasCreds","=","StormSubmitter",".","pushCredentials","(","topologyName,","topologyConf,","credentialsMap,","(","String",")","cl",".","get","(","\"u\"",")",")",";","\n","if","(","!hasCreds","&&","throwExceptionForEmptyCreds",")","{","\n","String","message","=","\"No","credentials","were","uploaded","for","\"","+","topologyName",";","\n","LOG",".","error","(","message",")",";","\n","throw","new","RuntimeException","(","message",")",";","\n","}","\n","LOG",".","info","(","\"Uploaded","new","creds","to","topology:","{","}","\",","topologyName",")",";","\n"],"docstring_tokens":["Uploads","credentials","for","a","topology"]}
{"code_tokens":["\n","public","static","void","main","(","String[]","args",")","throws","Exception","{","\n","TopologyBuilder","builder","=","new","TopologyBuilder","(",")",";","\n\n","//","generate","random","numbers\n","builder",".","setSpout","(","\"spout\",","new","RandomIntegerSpout","(",")",")",";","\n\n","//","emits","sliding","window","and","global","averages\n","builder",".","setBolt","(","\"avgbolt\",","new","AvgBolt","(",")","\n",".","withWindow","(","new","Duration","(","10,","TimeUnit",".","SECONDS",")",",","new","Duration","(","2,","TimeUnit",".","SECONDS",")",")","\n","//","persist","the","window","in","state\n",".","withPersistence","(",")","\n","//","max","number","of","events","to","be","cached","in","memory\n",".","withMaxEventsInMemory","(","25000",")",",","1",")","\n",".","shuffleGrouping","(","\"spout\"",")",";","\n\n","//","print","the","values","to","stdout\n","builder",".","setBolt","(","\"printer\",","(","x,","y",")","->","System",".","out",".","println","(","x",".","getValue","(","0",")",")",",","1",")",".","shuffleGrouping","(","\"avgbolt\"",")",";","\n\n","Config","conf","=","new","Config","(",")",";","\n","conf",".","setDebug","(","false",")",";","\n\n","//","checkpoint","the","state","every","5","seconds\n","conf",".","put","(","Config",".","TOPOLOGY_STATE_CHECKPOINT_INTERVAL,","5000",")",";","\n\n","//","use","redis","for","state","persistence\n","conf",".","put","(","Config",".","TOPOLOGY_STATE_PROVIDER,","\"org",".","apache",".","storm",".","redis",".","state",".","RedisKeyValueStateProvider\"",")",";","\n\n","String","topoName","=","\"test\"",";","\n","if","(","args","!=","null","&&","args",".","length",">","0",")","{","\n","topoName","=","args[0]",";","\n","}","\n","conf",".","setNumWorkers","(","1",")",";","\n","StormSubmitter",".","submitTopologyWithProgressBar","(","topoName,","conf,","builder",".","createTopology","(",")",")",";","\n"],"docstring_tokens":["Create","and","deploy","the","topology"]}
{"code_tokens":["\n","protected","DownloadMeta","fetch","(","ClientBlobStore","store,","String","key,\n","IOFunction<Long,","Path>","pathSupplier,\n","IOFunction<File,","OutputStream>","outStreamSupplier",")","\n","throws","KeyNotFoundException,","AuthorizationException,","IOException","{","\n\n","try","(","InputStreamWithMeta","in","=","store",".","getBlob","(","key",")",")","{","\n","long","newVersion","=","in",".","getVersion","(",")",";","\n","long","currentVersion","=","getLocalVersion","(",")",";","\n","if","(","newVersion","==","currentVersion",")","{","\n","LOG",".","warn","(","\"The","version","did","not","change,","but","going","to","download","again","{","}","{","}","\",","currentVersion,","key",")",";","\n","}","\n\n","//Make","sure","the","parent","directory","is","there","and","ready","to","go\n","Path","downloadPath","=","pathSupplier",".","apply","(","newVersion",")",";","\n","LOG",".","debug","(","\"Downloading","{","}","to","{","}","\",","key,","downloadPath",")",";","\n\n","long","duration",";","\n","long","totalRead","=","0",";","\n","try","(","OutputStream","out","=","outStreamSupplier",".","apply","(","downloadPath",".","toFile","(",")",")",")","{","\n","long","startTime","=","Time",".","nanoTime","(",")",";","\n\n","byte[]","buffer","=","new","byte[4096]",";","\n","int","read",";","\n","while","(","(","read","=","in",".","read","(","buffer",")",")",">=","0",")","{","\n","out",".","write","(","buffer,","0,","read",")",";","\n","totalRead","+=","read",";","\n","}","\n\n","duration","=","Time",".","nanoTime","(",")","-","startTime",";","\n","}","\n\n","long","expectedSize","=","in",".","getFileLength","(",")",";","\n","if","(","totalRead","!=","expectedSize",")","{","\n","throw","new","IOException","(","\"We","expected","to","download","\"","+","expectedSize","+","\"","bytes","but","found","we","got","\"","+","totalRead",")",";","\n","}","else","{","\n","double","downloadRate","=","(","(","double",")","totalRead","*","1e3",")","/","duration",";","\n","fetchingRate",".","update","(","Math",".","round","(","downloadRate",")",")",";","\n","}","\n","return","new","DownloadMeta","(","downloadPath,","newVersion",")",";","\n","}","\n"],"docstring_tokens":["Helper","function","to","download","blob","from","blob","store"]}
{"code_tokens":["\n","protected","void","touch","(",")","{","\n","lastUsed",".","set","(","Time",".","currentTimeMillis","(",")",")",";","\n","LOG",".","debug","(","\"Setting","{","}","ts","to","{","}","\",","blobKey,","lastUsed",".","get","(",")",")",";","\n"],"docstring_tokens":["Updates","the","last","updated","time"]}
{"code_tokens":["\n","public","boolean","removeReference","(","final","PortAndAssignment","pna",")","{","\n","LOG",".","info","(","\"Removing","reference","{","}","from","{","}","\",","pna,","blobDescription",")",";","\n","PortAndAssignment","reservedReference","=","null",";","\n","for","(","Map",".","Entry<PortAndAssignment,","BlobChangingCallback>","entry",":","references",".","entrySet","(",")",")","{","\n","if","(","entry",".","getKey","(",")",".","isEquivalentTo","(","pna",")",")","{","\n","reservedReference","=","entry",".","getKey","(",")",";","\n","break",";","\n","}","\n","}","\n\n","if","(","reservedReference","!=","null",")","{","\n","references",".","remove","(","reservedReference",")",";","\n","touch","(",")",";","\n","return","true",";","\n","}","else","{","\n","LOG",".","warn","(","\"","{","}","had","no","reservation","for","{","}",",","current","references","are","{","}","with","last","update","at","{","}","\",\n","pna,","blobDescription,","getDependencies","(",")",",","getLastUsed","(",")",")",";","\n","return","false",";","\n","}","\n"],"docstring_tokens":["Removes","a","reservation","for","this","blob","from","a","given","slot","and","assignemnt"]}
{"code_tokens":["\n","private","CompletableFuture<Void>","informAllOfChangeAndWaitForConsensus","(",")","{","\n","HashMap<PortAndAssignment,","BlobChangingCallback>","refsCopy","=","new","HashMap<>","(","references",")",";","\n","CountDownLatch","cdl","=","new","CountDownLatch","(","refsCopy",".","size","(",")",")",";","\n","CompletableFuture<Void>","doneUpdating","=","new","CompletableFuture<>","(",")",";","\n","for","(","Map",".","Entry<PortAndAssignment,","BlobChangingCallback>","entry",":","refsCopy",".","entrySet","(",")",")","{","\n","GoodToGo","gtg","=","new","GoodToGo","(","cdl,","doneUpdating",")",";","\n","try","{","\n","PortAndAssignment","pna","=","entry",".","getKey","(",")",";","\n","BlobChangingCallback","cb","=","entry",".","getValue","(",")",";","\n","cb",".","blobChanging","(","pna",".","getAssignment","(",")",",","pna",".","getPort","(",")",",","this,","gtg",")",";","\n","}","finally","{","\n","gtg",".","countDownIfLatchWasNotGotten","(",")",";","\n","}","\n","}","\n","try","{","\n","cdl",".","await","(","3,","TimeUnit",".","MINUTES",")",";","\n","}","catch","(","InterruptedException","e",")","{","\n","//Interrupted","is","thrown","when","we","are","shutting","down",".","\n","//","So","just","ignore","it","for","now",".",".",".","\n","}","\n","return","doneUpdating",";","\n"],"docstring_tokens":["Inform","all","of","the","callbacks","that","a","change","is","going","to","happen","and","then","wait","for","them","to","all","get","back","that","it","is","OK","to","make","that","change"]}
{"code_tokens":["\n","boolean","requiresUpdate","(","ClientBlobStore","blobStore,","long","remoteBlobstoreUpdateTime",")","throws","KeyNotFoundException,","AuthorizationException","{","\n","if","(","!this",".","isUsed","(",")",")","{","\n","return","false",";","\n","}","\n\n","if","(","!this",".","isFullyDownloaded","(",")",")","{","\n","return","true",";","\n","}","\n\n","//","If","we","are","already","up","to","date","with","respect","to","the","remote","blob","store,","don't","query\n","//","the","remote","blobstore","for","the","remote","file",".","This","reduces","Hadoop","namenode","impact","of\n","//","100's","of","supervisors","querying","multiple","blobs",".","\n","if","(","remoteBlobstoreUpdateTime",">","0","&&","this",".","localUpdateTime","==","remoteBlobstoreUpdateTime",")","{","\n","LOG",".","debug","(","\"","{","}","is","up","to","date,","blob","localUpdateTime","matches","remote","timestamp","{","}","\",","this,","remoteBlobstoreUpdateTime",")",";","\n","return","false",";","\n","}","\n\n","long","localVersion","=","this",".","getLocalVersion","(",")",";","\n","long","remoteVersion","=","this",".","getRemoteVersion","(","blobStore",")",";","\n","if","(","localVersion","!=","remoteVersion",")","{","\n","return","true",";","\n","}","else","{","\n","//","track","that","we","are","now","up","to","date","with","respect","to","last","time","the","remote","blobstore","was","updated\n","this",".","localUpdateTime","=","remoteBlobstoreUpdateTime",";","\n","return","false",";","\n","}","\n"],"docstring_tokens":["Checks","to","see","if","the","local","blob","requires","update","with","respect","to","a","remote","blob"]}
{"code_tokens":["\n","private","void","download","(","ClientBlobStore","blobStore,","long","remoteBlobstoreUpdateTime",")","\n","throws","AuthorizationException,","IOException,","KeyNotFoundException","{","\n","if","(","this",".","isFullyDownloaded","(",")",")","{","\n","numBlobUpdateVersionChanged",".","mark","(",")",";","\n","}","\n","Timer",".","Context","timer","=","singleBlobLocalizationDuration",".","time","(",")",";","\n","try","{","\n","long","newVersion","=","this",".","fetchUnzipToTemp","(","blobStore",")",";","\n","this",".","informReferencesAndCommitNewVersion","(","newVersion",")",";","\n","this",".","localUpdateTime","=","remoteBlobstoreUpdateTime",";","\n","LOG",".","debug","(","\"local","blob","{","}","downloaded,","in","sync","with","remote","blobstore","to","time","{","}","\",","this,","remoteBlobstoreUpdateTime",")",";","\n","}","finally","{","\n","timer",".","stop","(",")",";","\n","this",".","cleanupOrphanedData","(",")",";","\n","}","\n"],"docstring_tokens":["Downloads","a","blob","locally"]}
{"code_tokens":["\n","public","void","update","(","ClientBlobStore","blobStore,","long","remoteBlobstoreUpdateTime",")","\n","throws","KeyNotFoundException,","AuthorizationException,","IOException","{","\n","synchronized","(","this",")","{","\n","if","(","this",".","requiresUpdate","(","blobStore,","remoteBlobstoreUpdateTime",")",")","{","\n","this",".","download","(","blobStore,","remoteBlobstoreUpdateTime",")",";","\n","}","\n","}","\n"],"docstring_tokens":["Checks","and","downloads","a","blob","locally","as","necessary"]}
{"code_tokens":["\n","public","static","void","verifyAcls","(","Map<String,","Object>","conf,","final","boolean","fixUp",")","throws","Exception","{","\n","if","(","!Utils",".","isZkAuthenticationConfiguredStormServer","(","conf",")",")","{","\n","LOG",".","info","(","\"SECURITY","IS","DISABLED","NO","FURTHER","CHECKS",".",".",".","\"",")",";","\n","//There","is","no","security","so","we","are","done",".","\n","return",";","\n","}","\n","ACL","superUserAcl","=","Utils",".","getSuperUserAcl","(","conf",")",";","\n","List<ACL>","superAcl","=","new","ArrayList<>","(","1",")",";","\n","superAcl",".","add","(","superUserAcl",")",";","\n\n","List<ACL>","drpcFullAcl","=","new","ArrayList<>","(","2",")",";","\n","drpcFullAcl",".","add","(","superUserAcl",")",";","\n\n","String","drpcAclString","=","(","String",")","conf",".","get","(","Config",".","STORM_ZOOKEEPER_DRPC_ACL",")",";","\n","if","(","drpcAclString","!=","null",")","{","\n","Id","drpcAclId","=","Utils",".","parseZkId","(","drpcAclString,","Config",".","STORM_ZOOKEEPER_DRPC_ACL",")",";","\n","ACL","drpcUserAcl","=","new","ACL","(","ZooDefs",".","Perms",".","READ,","drpcAclId",")",";","\n","drpcFullAcl",".","add","(","drpcUserAcl",")",";","\n","}","\n\n","List<String>","zkServers","=","(","List<String>",")","conf",".","get","(","Config",".","STORM_ZOOKEEPER_SERVERS",")",";","\n","int","port","=","ObjectReader",".","getInt","(","conf",".","get","(","Config",".","STORM_ZOOKEEPER_PORT",")",")",";","\n","String","stormRoot","=","(","String",")","conf",".","get","(","Config",".","STORM_ZOOKEEPER_ROOT",")",";","\n\n","try","(","CuratorFramework","zk","=","ClientZookeeper",".","mkClient","(","conf,","zkServers,","port,","\"\",\n","new","DefaultWatcherCallBack","(",")",",","conf,","DaemonType",".","NIMBUS",")",")","{","\n","if","(","zk",".","checkExists","(",")",".","forPath","(","stormRoot",")","!=","null",")","{","\n","//First","off","we","want","to","verify","that","ROOT","is","good\n","verifyAclStrict","(","zk,","superAcl,","stormRoot,","fixUp",")",";","\n","}","else","{","\n","LOG",".","warn","(","\"","{","}","does","not","exist","no","need","to","check","any","more",".",".",".","\",","stormRoot",")",";","\n","return",";","\n","}","\n","}","\n\n","//","Now","that","the","root","is","fine","we","can","start","to","look","at","the","other","paths","under","it",".","\n","try","(","CuratorFramework","zk","=","ClientZookeeper",".","mkClient","(","conf,","zkServers,","port,","stormRoot,\n","new","DefaultWatcherCallBack","(",")",",","conf,","DaemonType",".","NIMBUS",")",")","{","\n","//Next","verify","that","the","blob","store","is","correct","before","we","start","it","up",".","\n","if","(","zk",".","checkExists","(",")",".","forPath","(","ClusterUtils",".","BLOBSTORE_SUBTREE",")","!=","null",")","{","\n","verifyAclStrictRecursive","(","zk,","superAcl,","ClusterUtils",".","BLOBSTORE_SUBTREE,","fixUp",")",";","\n","}","\n\n","if","(","zk",".","checkExists","(",")",".","forPath","(","ClusterUtils",".","BLOBSTORE_MAX_KEY_SEQUENCE_NUMBER_SUBTREE",")","!=","null",")","{","\n","verifyAclStrict","(","zk,","superAcl,","ClusterUtils",".","BLOBSTORE_MAX_KEY_SEQUENCE_NUMBER_SUBTREE,","fixUp",")",";","\n","}","\n\n","//The","blobstore","is","good,","now","lets","get","the","list","of","all","topo","Ids\n","Set<String>","topoIds","=","new","HashSet<>","(",")",";","\n","if","(","zk",".","checkExists","(",")",".","forPath","(","ClusterUtils",".","STORMS_SUBTREE",")","!=","null",")","{","\n","topoIds",".","addAll","(","zk",".","getChildren","(",")",".","forPath","(","ClusterUtils",".","STORMS_SUBTREE",")",")",";","\n","}","\n\n","Map<String,","Id>","topoToZkCreds","=","new","HashMap<>","(",")",";","\n","//Now","lets","get","the","creds","for","the","topos","so","we","can","verify","those","as","well",".","\n","BlobStore","bs","=","ServerUtils",".","getNimbusBlobStore","(","conf,","NimbusInfo",".","fromConf","(","conf",")",",","null",")",";","\n","try","{","\n","Subject","nimbusSubject","=","new","Subject","(",")",";","\n","nimbusSubject",".","getPrincipals","(",")",".","add","(","new","NimbusPrincipal","(",")",")",";","\n","for","(","String","topoId",":","topoIds",")","{","\n","try","{","\n","String","blobKey","=","topoId","+","\"-stormconf",".","ser\"",";","\n","Map<String,","Object>","topoConf","=","Utils",".","fromCompressedJsonConf","(","bs",".","readBlob","(","blobKey,","nimbusSubject",")",")",";","\n","String","payload","=","(","String",")","topoConf",".","get","(","Config",".","STORM_ZOOKEEPER_TOPOLOGY_AUTH_PAYLOAD",")",";","\n","try","{","\n","topoToZkCreds",".","put","(","topoId,","new","Id","(","\"digest\",","DigestAuthenticationProvider",".","generateDigest","(","payload",")",")",")",";","\n","}","catch","(","NoSuchAlgorithmException","e",")","{","\n","throw","new","RuntimeException","(","e",")",";","\n","}","\n","}","catch","(","KeyNotFoundException","knf",")","{","\n","LOG",".","debug","(","\"topo","removed","{","}","\",","topoId,","knf",")",";","\n","}","\n","}","\n","}","finally","{","\n","if","(","bs","!=","null",")","{","\n","bs",".","shutdown","(",")",";","\n","}","\n","}","\n\n","verifyParentWithReadOnlyTopoChildren","(","zk,","superUserAcl,","ClusterUtils",".","STORMS_SUBTREE,","topoToZkCreds,","fixUp",")",";","\n","verifyParentWithReadOnlyTopoChildren","(","zk,","superUserAcl,","ClusterUtils",".","ASSIGNMENTS_SUBTREE,","topoToZkCreds,","fixUp",")",";","\n","//There","is","a","race","on","credentials","where","they","can","be","leaked","in","some","versions","of","storm",".","\n","verifyParentWithReadOnlyTopoChildrenDeleteDead","(","zk,","superUserAcl,","ClusterUtils",".","CREDENTIALS_SUBTREE,","topoToZkCreds,","fixUp",")",";","\n","//There","is","a","race","on","logconfig","where","they","can","be","leaked","in","some","versions","of","storm",".","\n","verifyParentWithReadOnlyTopoChildrenDeleteDead","(","zk,","superUserAcl,","ClusterUtils",".","LOGCONFIG_SUBTREE,","topoToZkCreds,","fixUp",")",";","\n","//There","is","a","race","on","backpressure","too",".",".",".","\n","verifyParentWithReadWriteTopoChildrenDeleteDead","(","zk,","superUserAcl,","ClusterUtils",".","BACKPRESSURE_SUBTREE,","topoToZkCreds,","fixUp",")",";","\n\n","if","(","zk",".","checkExists","(",")",".","forPath","(","ClusterUtils",".","ERRORS_SUBTREE",")","!=","null",")","{","\n","//errors","is","a","bit","special","because","in","older","versions","of","storm","the","worker","created","the","parent","directories","lazily\n","//","because","of","this","it","means","we","need","to","auto","create","at","least","the","topo-id","directory","for","all","running","topos",".","\n","for","(","String","topoId",":","topoToZkCreds",".","keySet","(",")",")","{","\n","String","path","=","ClusterUtils",".","errorStormRoot","(","topoId",")",";","\n","if","(","zk",".","checkExists","(",")",".","forPath","(","path",")","==","null",")","{","\n","LOG",".","warn","(","\"Creating","missing","errors","location","{","}","\",","path",")",";","\n","zk",".","create","(",")",".","withACL","(","getTopoReadWrite","(","path,","topoId,","topoToZkCreds,","superUserAcl,","fixUp",")",")",".","forPath","(","path",")",";","\n","}","\n","}","\n","}","\n","//Error","should","not","be","leaked","according","to","the","code,","but","they","are","not","important","enough","to","fail","the","build","if\n","//","for","some","odd","reason","they","are","leaked",".","\n","verifyParentWithReadWriteTopoChildrenDeleteDead","(","zk,","superUserAcl,","ClusterUtils",".","ERRORS_SUBTREE,","topoToZkCreds,","fixUp",")",";","\n\n","if","(","zk",".","checkExists","(",")",".","forPath","(","ClusterUtils",".","SECRET_KEYS_SUBTREE",")","!=","null",")","{","\n","verifyAclStrict","(","zk,","superAcl,","ClusterUtils",".","SECRET_KEYS_SUBTREE,","fixUp",")",";","\n","verifyAclStrictRecursive","(","zk,","superAcl,","ClusterUtils",".","secretKeysPath","(","WorkerTokenServiceType",".","NIMBUS",")",",","fixUp",")",";","\n","verifyAclStrictRecursive","(","zk,","drpcFullAcl,","ClusterUtils",".","secretKeysPath","(","WorkerTokenServiceType",".","DRPC",")",",","fixUp",")",";","\n","}","\n\n","if","(","zk",".","checkExists","(",")",".","forPath","(","ClusterUtils",".","NIMBUSES_SUBTREE",")","!=","null",")","{","\n","verifyAclStrictRecursive","(","zk,","superAcl,","ClusterUtils",".","NIMBUSES_SUBTREE,","fixUp",")",";","\n","}","\n\n","if","(","zk",".","checkExists","(",")",".","forPath","(","\"/leader-lock\"",")","!=","null",")","{","\n","verifyAclStrictRecursive","(","zk,","superAcl,","\"/leader-lock\",","fixUp",")",";","\n","}","\n\n","if","(","zk",".","checkExists","(",")",".","forPath","(","ClusterUtils",".","PROFILERCONFIG_SUBTREE",")","!=","null",")","{","\n","verifyAclStrictRecursive","(","zk,","superAcl,","ClusterUtils",".","PROFILERCONFIG_SUBTREE,","fixUp",")",";","\n","}","\n\n","if","(","zk",".","checkExists","(",")",".","forPath","(","ClusterUtils",".","SUPERVISORS_SUBTREE",")","!=","null",")","{","\n","verifyAclStrictRecursive","(","zk,","superAcl,","ClusterUtils",".","SUPERVISORS_SUBTREE,","fixUp",")",";","\n","}","\n\n","//","When","moving","to","pacemaker","workerbeats","can","be","leaked","too",".",".",".","\n","verifyParentWithReadWriteTopoChildrenDeleteDead","(","zk,","superUserAcl,","ClusterUtils",".","WORKERBEATS_SUBTREE,","topoToZkCreds,","fixUp",")",";","\n","}","\n"],"docstring_tokens":["Verify","the","ZK","ACLs","are","correct","and","optionally","fix","them","if","needed"]}
{"code_tokens":["\n","public","void","putTaskIds","(","List<Integer>","taskIds",")","{","\n","takeLock",".","lock","(",")",";","\n","try","{","\n","taskIdsQueue",".","add","(","taskIds",")",";","\n","notEmpty",".","signal","(",")",";","\n","}","finally","{","\n","takeLock",".","unlock","(",")",";","\n","}","\n"],"docstring_tokens":["put","list","of","task","id","to","its","queue"]}
{"code_tokens":["\n","public","void","putBoltMsg","(","BoltMsg","boltMsg",")","throws","InterruptedException","{","\n","boltMsgQueue",".","put","(","boltMsg",")",";","\n","takeLock",".","lock","(",")",";","\n","try","{","\n","notEmpty",".","signal","(",")",";","\n","}","finally","{","\n","takeLock",".","unlock","(",")",";","\n","}","\n"],"docstring_tokens":["put","bolt","message","to","its","queue"]}
{"code_tokens":["\n","public","TopologyResources","add","(","TopologyResources","other",")","{","\n","return","new","TopologyResources","(","\n","requestedMemOnHeap","+","other",".","requestedMemOnHeap,\n","requestedMemOffHeap","+","other",".","requestedMemOffHeap,\n","requestedSharedMemOnHeap","+","other",".","requestedSharedMemOnHeap,\n","requestedSharedMemOffHeap","+","other",".","requestedSharedMemOffHeap,\n","requestedNonSharedMemOnHeap","+","other",".","requestedNonSharedMemOnHeap,\n","requestedNonSharedMemOffHeap","+","other",".","requestedNonSharedMemOffHeap,\n","requestedCpu","+","other",".","requestedCpu,\n","NormalizedResourceRequest",".","addResourceMap","(","requestedGenericResources,","other",".","requestedGenericResources",")",",\n","assignedMemOnHeap","+","other",".","assignedMemOnHeap,\n","assignedMemOffHeap","+","other",".","assignedMemOffHeap,\n","assignedSharedMemOnHeap","+","other",".","assignedSharedMemOnHeap,\n","assignedSharedMemOffHeap","+","other",".","assignedSharedMemOffHeap,\n","assignedNonSharedMemOnHeap","+","other",".","assignedNonSharedMemOnHeap,\n","assignedNonSharedMemOffHeap","+","other",".","assignedNonSharedMemOffHeap,\n","assignedCpu","+","other",".","assignedCpu,\n","NormalizedResourceRequest",".","addResourceMap","(","assignedGenericResources,","other",".","assignedGenericResources",")",")",";","\n"],"docstring_tokens":["Add","the","values","in","other","to","this","and","return","a","combined","resources","object"]}
{"code_tokens":["\n","public","Response","downloadFile","(","String","host,","String","fileName,","String","user,","boolean","isDaemon",")","throws","IOException","{","\n","Path","rootDir","=","isDaemon","?","daemonLogRoot",":","logRoot",";","\n","Path","rawFile","=","rootDir",".","resolve","(","fileName",")",";","\n","Path","file","=","rawFile",".","toAbsolutePath","(",")",".","normalize","(",")",";","\n","if","(","!file",".","startsWith","(","rootDir",")","||","!rawFile",".","normalize","(",")",".","toString","(",")",".","equals","(","rawFile",".","toString","(",")",")",")","{","\n","//Ensure","filename","doesn't","contain",".",".","/","parts","\n","return","LogviewerResponseBuilder",".","buildResponsePageNotFound","(",")",";","\n","}","\n","if","(","isDaemon","&&","Paths",".","get","(","fileName",")",".","getNameCount","(",")","!=","1",")","{","\n","//Prevent","daemon","log","reads","from","pathing","into","worker","logs\n","return","LogviewerResponseBuilder",".","buildResponsePageNotFound","(",")",";","\n","}","\n","\n","if","(","file",".","toFile","(",")",".","exists","(",")",")","{","\n","if","(","isDaemon","||","resourceAuthorizer",".","isUserAllowedToAccessFile","(","user,","fileName",")",")","{","\n","fileDownloadSizeDistMb",".","update","(","Math",".","round","(","(","double",")","file",".","toFile","(",")",".","length","(",")","/","FileUtils",".","ONE_MB",")",")",";","\n","String","downloadedFileName",";","\n","Path","pathRelativeToRootDir","=","rootDir",".","relativize","(","file",")",";","\n","if","(","isDaemon","||","pathRelativeToRootDir",".","getNameCount","(",")","!=","3",")","{","\n","downloadedFileName","=","host","+","\"-\"","+","rawFile",".","getFileName","(",")",";","\n","}","else","{","\n","//host-topoId-port-fileName\n","downloadedFileName","=","host","+","\"-\"\n","+","pathRelativeToRootDir",".","getName","(","0",")","+","\"-\"\n","+","pathRelativeToRootDir",".","getName","(","1",")","+","\"-\"\n","+","pathRelativeToRootDir",".","getName","(","2",")",";","\n","}","\n","return","LogviewerResponseBuilder",".","buildDownloadFile","(","downloadedFileName,","file",".","toFile","(",")",",","numFileDownloadExceptions",")",";","\n","}","else","{","\n","return","LogviewerResponseBuilder",".","buildResponseUnauthorizedUser","(","user",")",";","\n","}","\n","}","else","{","\n","return","LogviewerResponseBuilder",".","buildResponsePageNotFound","(",")",";","\n","}","\n"],"docstring_tokens":["Checks","authorization","for","the","log","file","and","download"]}
{"code_tokens":["\n","public","WorkerToken","createOrUpdateTokenFor","(","WorkerTokenServiceType","serviceType,","String","user,","String","topologyId",")","{","\n","long","nextVersion","=","state",".","getNextPrivateWorkerKeyVersion","(","serviceType,","topologyId",")",";","\n","SecretKey","topoSecret","=","getCurrentSecret","(",")",";","\n","long","expirationTimeMillis","=","Time",".","currentTimeMillis","(",")","+","tokenLifetimeMillis",";","\n","WorkerTokenInfo","info","=","new","WorkerTokenInfo","(","user,","topologyId,","nextVersion,","expirationTimeMillis",")",";","\n","byte[]","serializedInfo","=","ClientAuthUtils",".","serializeWorkerTokenInfo","(","info",")",";","\n","byte[]","signature","=","WorkerTokenSigner",".","createPassword","(","serializedInfo,","topoSecret",")",";","\n","WorkerToken","ret","=","new","WorkerToken","(","serviceType,","ByteBuffer",".","wrap","(","serializedInfo",")",",","ByteBuffer",".","wrap","(","signature",")",")",";","\n","PrivateWorkerKey","key","=","new","PrivateWorkerKey","(","ByteBuffer",".","wrap","(","topoSecret",".","getEncoded","(",")",")",",","user,","expirationTimeMillis",")",";","\n","state",".","addPrivateWorkerKey","(","serviceType,","topologyId,","nextVersion,","key",")",";","\n","LOG",".","info","(","\"Created","new","WorkerToken","for","user","{","}","topology","{","}","on","service","{","}","\",","user,","topologyId,","serviceType",")",";","\n","return","ret",";","\n"],"docstring_tokens":["Create","or","update","an","existing","key"]}
{"code_tokens":["\n","private","int","retireIdleWriters","(",")","{","\n","LOG",".","info","(","\"Attempting","close","idle","writers\"",")",";","\n","int","count","=","0",";","\n","long","now","=","System",".","currentTimeMillis","(",")",";","\n\n","//1",")","Find","retirement","candidates\n","for","(","Entry<HiveEndPoint,","HiveWriter>","entry",":","allWriters",".","entrySet","(",")",")","{","\n","if","(","now","-","entry",".","getValue","(",")",".","getLastUsed","(",")",">","options",".","getIdleTimeout","(",")",")","{","\n","++count",";","\n","retire","(","entry",".","getKey","(",")",")",";","\n","}","\n","}","\n","return","count",";","\n"],"docstring_tokens":["Locate","all","writers","past","idle","timeout","and","retire","them"]}
{"code_tokens":["\n","public","double[]","empty","(",")","{","\n","return","new","double[counter",".","get","(",")","]",";","\n"],"docstring_tokens":["Create","an","array","that","has","all","values","0"]}
{"code_tokens":["\n","public","Map<String,","Double>","translateFromResourceArray","(","double[]","resources",")","{","\n","Map<String,","Double>","ret","=","new","HashMap<>","(",")",";","\n","int","length","=","resources",".","length",";","\n","for","(","Map",".","Entry<String,","Integer>","entry",":","resourceNamesToArrayIndex",".","entrySet","(",")",")","{","\n","int","index","=","entry",".","getValue","(",")",";","\n","if","(","index","<","length",")","{","\n","ret",".","put","(","entry",".","getKey","(",")",",","resources[index]",")",";","\n","}","\n","}","\n","return","ret",";","\n"],"docstring_tokens":["Translates","an","array","of","resource","values","to","a","normalized","resource","map"]}
{"code_tokens":["\n","@Override\n","public","void","setUpContext","(","final","Class<?>","ownerCls,","final","ShellProcess","process,\n","final","TopologyContext","context",")","{","\n","this",".","log","=","getLogger","(","ownerCls",")",";","\n","this",".","process","=","process",";","\n","//","context","is","not","used","by","the","default","implementation,","but","is","included\n","//","in","the","interface","in","case","it","is","useful","to","subclasses\n"],"docstring_tokens":["This","default","implementation","saves","the","ShellProcess","so","it","can","output","the","process","info","string","later"]}
{"code_tokens":["\n","public","boolean","supportsWorkerTokens","(",")","{","\n","return","areWorkerTokensSupported",";","\n"],"docstring_tokens":["Check","if","worker","tokens","are","supported","by","this","thrift","server"]}
{"code_tokens":["\n","public","static","StormTopology","getTopology","(","Map<String,","Object>","config",")","{","\n\n","final","int","spoutNum","=","Helper",".","getInt","(","config,","SPOUT_NUM,","DEFAULT_SPOUT_NUM",")",";","\n","final","int","boltNum","=","Helper",".","getInt","(","config,","BOLT_NUM,","DEFAULT_BOLT_NUM",")",";","\n","//","1","-","Setup","Kafka","Spout","--------\n\n","String","bootstrapServers","=","Optional",".","ofNullable","(","Helper",".","getStr","(","config,","BOOTSTRAP_SERVERS",")",")",".","orElse","(","\"127",".","0",".","0",".","1:9092\"",")",";","\n","String","kafkaTopic","=","Optional",".","ofNullable","(","Helper",".","getStr","(","config,","KAFKA_TOPIC",")",")",".","orElse","(","\"storm-perf-null-bolt-topic\"",")",";","\n","ProcessingGuarantee","processingGuarantee","=","ProcessingGuarantee",".","valueOf","(","\n","Optional",".","ofNullable","(","Helper",".","getStr","(","config,","PROCESSING_GUARANTEE",")",")","\n",".","orElse","(","ProcessingGuarantee",".","AT_LEAST_ONCE",".","name","(",")",")",")",";","\n","int","offsetCommitPeriodMs","=","Helper",".","getInt","(","config,","OFFSET_COMMIT_PERIOD_MS,","30_000",")",";","\n\n","KafkaSpoutConfig<String,","String>","kafkaSpoutConfig","=","KafkaSpoutConfig",".","builder","(","bootstrapServers,","kafkaTopic",")","\n",".","setProcessingGuarantee","(","processingGuarantee",")","\n",".","setOffsetCommitPeriodMs","(","offsetCommitPeriodMs",")","\n",".","setFirstPollOffsetStrategy","(","\n","FirstPollOffsetStrategy",".","EARLIEST",")","\n",".","setTupleTrackingEnforced","(","true",")","\n",".","build","(",")",";","\n\n","KafkaSpout<String,","String>","spout","=","new","KafkaSpout<>","(","kafkaSpoutConfig",")",";","\n\n","//","2","-","DevNull","Bolt","--------\n","DevNullBolt","bolt","=","new","DevNullBolt","(",")",";","\n\n","//","3","-","Setup","Topology","--------\n","TopologyBuilder","builder","=","new","TopologyBuilder","(",")",";","\n","builder",".","setSpout","(","SPOUT_ID,","spout,","spoutNum",")",";","\n","builder",".","setBolt","(","BOLT_ID,","bolt,","boltNum",")","\n",".","localOrShuffleGrouping","(","SPOUT_ID",")",";","\n\n","return","builder",".","createTopology","(",")",";","\n"],"docstring_tokens":["Create","and","configure","the","topology"]}
{"code_tokens":["\n","public","static","String","writeScript","(","String","dir,","List<String>","command,\n","Map<String,","String>","environment",")","throws","IOException","{","\n","return","writeScript","(","dir,","command,","environment,","null",")",";","\n"],"docstring_tokens":["Writes","a","posix","shell","script","file","to","be","executed","in","its","own","process"]}
{"code_tokens":["\n","public","static","void","unJar","(","File","jarFile,","File","toDir",")","throws","IOException","{","\n","try","(","JarFile","jar","=","new","JarFile","(","jarFile",")",")","{","\n","extractZipFile","(","jar,","toDir,","null",")",";","\n","}","\n"],"docstring_tokens":["Unpack","matching","files","from","a","jar"]}
{"code_tokens":["\n","public","static","boolean","isRas","(","Map<String,","Object>","conf",")","{","\n","if","(","conf",".","containsKey","(","DaemonConfig",".","STORM_SCHEDULER",")",")","{","\n","if","(","conf",".","get","(","DaemonConfig",".","STORM_SCHEDULER",")",".","equals","(","\"org",".","apache",".","storm",".","scheduler",".","resource",".","ResourceAwareScheduler\"",")",")","{","\n","return","true",";","\n","}","\n","}","\n","return","false",";","\n"],"docstring_tokens":["Check","if","the","scheduler","is","resource","aware","or","not"]}
{"code_tokens":["\n","public","static","long","getMemInfoFreeMb","(",")","throws","IOException","{","\n","//MemFree:","14367072","kB\n","//Buffers:","536512","kB\n","//Cached:","1192096","kB\n","//","MemFree","+","Buffers","+","Cached\n","long","memFree","=","0",";","\n","long","buffers","=","0",";","\n","long","cached","=","0",";","\n","try","(","BufferedReader","in","=","new","BufferedReader","(","new","FileReader","(","\"/proc/meminfo\"",")",")",")","{","\n","String","line","=","null",";","\n","while","(","(","line","=","in",".","readLine","(",")",")","!=","null",")","{","\n","Matcher","match","=","MEMINFO_PATTERN",".","matcher","(","line",")",";","\n","if","(","match",".","matches","(",")",")","{","\n","String","tag","=","match",".","group","(","1",")",";","\n","if","(","tag",".","equalsIgnoreCase","(","\"MemFree\"",")",")","{","\n","memFree","=","Long",".","parseLong","(","match",".","group","(","2",")",")",";","\n","}","else","if","(","tag",".","equalsIgnoreCase","(","\"Buffers\"",")",")","{","\n","buffers","=","Long",".","parseLong","(","match",".","group","(","2",")",")",";","\n","}","else","if","(","tag",".","equalsIgnoreCase","(","\"Cached\"",")",")","{","\n","cached","=","Long",".","parseLong","(","match",".","group","(","2",")",")",";","\n","}","\n","}","\n","}","\n","}","\n","return","(","memFree","+","buffers","+","cached",")","/","1024",";","\n"],"docstring_tokens":["Get","system","free","memory","in","megabytes"]}
{"code_tokens":["\n","public","static","<T>","T","first","(","List<T>","list",")","{","\n","if","(","list","==","null","||","list",".","size","(",")","<=","0",")","{","\n","return","null",";","\n","}","\n\n","return","list",".","get","(","0",")",";","\n"],"docstring_tokens":["Get","the","first","element","in","list"]}
{"code_tokens":["\n","public","static","<T>","T","last","(","List<T>","list",")","{","\n","if","(","list","==","null","||","list",".","size","(",")","<=","0",")","{","\n","return","null",";","\n","}","\n\n","return","list",".","get","(","list",".","size","(",")","-","1",")",";","\n"],"docstring_tokens":["get","the","last","element","in","list"]}
{"code_tokens":["\n","public","static","<T>","List<T>","takeLast","(","List<T>","list,","int","count",")","{","\n","if","(","list","==","null",")","{","\n","return","null",";","\n","}","\n\n","if","(","list",".","size","(",")","<=","count",")","{","\n","return","list",";","\n","}","else","{","\n","return","list",".","stream","(",")","\n",".","skip","(","list",".","size","(",")","-","count",")","\n",".","limit","(","count",")","\n",".","collect","(","Collectors",".","toList","(",")",")",";","\n","}","\n"],"docstring_tokens":["Get","the","last","N","elements","as","a","new","list"]}
{"code_tokens":["\n","public","static","<T>","List<T>","drop","(","List<T>","list,","int","count",")","{","\n","if","(","list","==","null",")","{","\n","return","null",";","\n","}","\n\n","return","list",".","stream","(",")","\n",".","skip","(","count",")","\n",".","collect","(","Collectors",".","toList","(",")",")",";","\n"],"docstring_tokens":["Drop","the","first","N","elements","and","create","a","new","list"]}
{"code_tokens":["\n","public","static","<T>","List<T>","rest","(","List<T>","list",")","{","\n","return","drop","(","list,","1",")",";","\n"],"docstring_tokens":["Drop","the","only","first","element","and","create","a","new","list"]}
{"code_tokens":["\n","public","List<Long>","getAllVersions","(",")","throws","IOException","{","\n","List<Long>","ret","=","new","ArrayList<Long>","(",")",";","\n","for","(","String","s",":","listDir","(","root",")",")","{","\n\n","if","(","s",".","endsWith","(","FINISHED_VERSION_SUFFIX",")","&&","new","File","(","s",".","substring","(","0,","s",".","length","(",")","-","FINISHED_VERSION_SUFFIX",".","length","(",")",")",")",".","exists","(",")",")","{","\n","ret",".","add","(","validateAndGetVersion","(","s",")",")",";","\n","}","\n","}","\n","Collections",".","sort","(","ret",")",";","\n","Collections",".","reverse","(","ret",")",";","\n","return","ret",";","\n"],"docstring_tokens":["Sorted","from","most","recent","to","oldest"]}
{"code_tokens":["\n","private","static","DynamicState","cleanupCurrentContainer","(","DynamicState","dynamicState,","StaticState","staticState,","MachineState","nextState",")","throws\n","Exception","{","\n","assert","(","dynamicState",".","container","!=","null",")",";","\n","assert","(","dynamicState",".","currentAssignment","!=","null",")",";","\n","assert","(","dynamicState",".","container",".","areAllProcessesDead","(",")",")",";","\n\n","dynamicState",".","container",".","cleanUp","(",")",";","\n","dynamicState",".","cancelPendingBlobs","(",")",";","\n","staticState",".","localizer",".","releaseSlotFor","(","dynamicState",".","currentAssignment,","staticState",".","port",")",";","\n","DynamicState","ret","=","dynamicState",".","withCurrentAssignment","(","null,","null",")",";","\n","if","(","nextState","!=","null",")","{","\n","ret","=","ret",".","withState","(","nextState",")",";","\n","}","\n","return","ret",";","\n"],"docstring_tokens":["Clean","up","a","container"]}
{"code_tokens":["\n","@Override\n","public","boolean","permit","(","ReqContext","context,","String","operation,","Map<String,","Object>","params",")","{","\n","if","(","\"execute\"",".","equals","(","operation",")",")","{","\n","return","permitClientRequest","(","context,","operation,","params",")",";","\n","}","else","if","(","\"failRequest\"",".","equals","(","operation",")","\n","||","\"fetchRequest\"",".","equals","(","operation",")","\n","||","\"result\"",".","equals","(","operation",")",")","{","\n","return","permitInvocationRequest","(","context,","operation,","params",")",";","\n","}","\n","//","Deny","unsupported","operations",".","\n","LOG",".","warn","(","\"Denying","unsupported","operation","\\\"\"","+","operation","+","\"\\\"","from","\"","+","context",".","remoteAddress","(",")",")",";","\n","return","false",";","\n"],"docstring_tokens":["Authorizes","request","from","to","the","DRPC","server"]}
{"code_tokens":["\n","public","static","void","main","(","String[]","args",")","throws","Exception","{","\n","Map<String,","Object>","cl","=","CLI",".","opt","(","\"f\",","\"function\",","null,","CLI",".","AS_STRING",")","\n",".","arg","(","\"FUNC_AND_ARGS\",","CLI",".","INTO_LIST",")","\n",".","parse","(","args",")",";","\n","final","List<String>","funcAndArgs","=","(","List<String>",")","cl",".","get","(","\"FUNC_AND_ARGS\"",")",";","\n","final","String","function","=","(","String",")","cl",".","get","(","\"f\"",")",";","\n","Config","conf","=","new","Config","(",")",";","\n","try","(","DRPCClient","drpc","=","DRPCClient",".","getConfiguredClient","(","conf",")",")","{","\n","if","(","function","==","null",")","{","\n","if","(","funcAndArgs",".","size","(",")","%","2","!=","0",")","{","\n","LOG",".","error","(","\"If","no","-f","is","supplied","arguments","need","to","be","in","the","form","[function","arg]",".","This","has","{","}","args\",","funcAndArgs",".","size","(",")",")",";","\n","System",".","exit","(","-1",")",";","\n","}","\n","for","(","int","i","=","0",";","i","<","funcAndArgs",".","size","(",")",";","i","+=","2",")","{","\n","String","func","=","funcAndArgs",".","get","(","i",")",";","\n","String","arg","=","funcAndArgs",".","get","(","i","+","1",")",";","\n","runAndPrint","(","drpc,","func,","arg",")",";","\n","}","\n","}","else","{","\n","for","(","String","arg",":","funcAndArgs",")","{","\n","runAndPrint","(","drpc,","function,","arg",")",";","\n","}","\n","}","\n","}","\n"],"docstring_tokens":["Main","entry","point","for","the","basic","DRPC","client"]}
{"code_tokens":["\n","public","void","unassignBySlot","(","WorkerSlot","slot",")","{","\n","Collection<ExecutorDetails>","executors","=","slotToExecutors",".","remove","(","slot",")",";","\n\n","//","remove\n","if","(","executors","!=","null",")","{","\n","for","(","ExecutorDetails","executor",":","executors",")","{","\n","executorToSlot",".","remove","(","executor",")",";","\n","}","\n","}","\n\n","resources",".","remove","(","slot",")",";","\n\n","String","node","=","slot",".","getNodeId","(",")",";","\n","boolean","isFound","=","false",";","\n","for","(","WorkerSlot","ws",":","executorToSlot",".","values","(",")",")","{","\n","if","(","node",".","equals","(","ws",".","getNodeId","(",")",")",")","{","\n","isFound","=","true",";","\n","break",";","\n","}","\n","}","\n","if","(","!isFound",")","{","\n","nodeIdToTotalSharedOffHeapNode",".","remove","(","node",")",";","\n","}","\n"],"docstring_tokens":["Release","the","slot","occupied","by","this","assignment"]}
{"code_tokens":["\n","public","static","SlowExecutorPattern","fromConf","(","Map<String,","Object>","conf",")","{","\n","double","slowness","=","ObjectReader",".","getDouble","(","conf",".","get","(","\"slownessMs\"",")",",","0",".","0",")",";","\n","int","count","=","ObjectReader",".","getInt","(","conf",".","get","(","\"count\"",")",",","1",")",";","\n","return","new","SlowExecutorPattern","(","slowness,","count",")",";","\n"],"docstring_tokens":["Creates","a","SlowExecutorPattern","from","a","Map","config"]}
{"code_tokens":["\n","public","static","List<ACL>","mkTopoReadOnlyAcls","(","Map<String,","Object>","topoConf",")","{","\n","return","mkTopoAcls","(","topoConf,","ZooDefs",".","Perms",".","READ",")",";","\n"],"docstring_tokens":["Get","ZK","ACLs","for","a","topology","to","have","read","only","access"]}
{"code_tokens":["\n","public","static","String","logConfigPath","(","String","stormId",")","{","\n","return","LOGCONFIG_SUBTREE","+","ZK_SEPERATOR","+","stormId",";","\n"],"docstring_tokens":["Get","the","path","to","the","log","config","for","a","topology"]}
{"code_tokens":["\n","public","static","String","secretKeysPath","(","WorkerTokenServiceType","type,","String","topologyId",")","{","\n","return","secretKeysPath","(","type",")","+","ZK_SEPERATOR","+","topologyId",";","\n"],"docstring_tokens":["Get","the","path","to","secret","keys","for","a","specific","topology"]}
{"code_tokens":["\n","public","static","String","secretKeysPath","(","WorkerTokenServiceType","type,","String","topologyId,","long","version",")","{","\n","return","secretKeysPath","(","type,","topologyId",")","+","ZK_SEPERATOR","+","version",";","\n"],"docstring_tokens":["Get","the","path","to","a","specific","secret","key"]}
{"code_tokens":["\n","public","static","StormTopology","newTopology","(","String","brokerUrl,","String","topicName",")","{","\n","final","TopologyBuilder","builder","=","new","TopologyBuilder","(",")",";","\n","builder",".","setSpout","(","\"spout\",","(",")","->","{","\n","Utils",".","sleep","(","1000",")",";","//Throttle","this","spout","a","bit","to","avoid","maxing","out","CPU\n","return","UUID",".","randomUUID","(",")",".","toString","(",")",";","\n","}",")",";","\n\n","/*","The","output","field","of","the","spout","(","\"lambda\"",")","is","provided","as","the","boltMessageField\n","so","that","this","gets","written","out","as","the","message","in","the","kafka","topic",".","\n","The","tuples","have","no","key","field,","so","the","messages","are","written","to","Kafka","without","a","key",".","*/\n","final","KafkaBolt<String,","String>","bolt","=","new","KafkaBolt<String,","String>","(",")","\n",".","withProducerProperties","(","newProps","(","brokerUrl,","topicName",")",")","\n",".","withTopicSelector","(","new","DefaultTopicSelector","(","topicName",")",")","\n",".","withTupleToKafkaMapper","(","new","FieldNameBasedTupleToKafkaMapper<>","(","\"key\",","\"lambda\"",")",")",";","\n\n","builder",".","setBolt","(","\"forwardToKafka\",","bolt,","1",")",".","shuffleGrouping","(","\"spout\"",")",";","\n\n","return","builder",".","createTopology","(",")",";","\n"],"docstring_tokens":["Create","a","new","topology","that","writes","random","UUIDs","to","Kafka"]}
{"code_tokens":["\n","public","void","pruneZeroCounts","(",")","{","\n","int","i","=","0",";","\n","while","(","i","<","rankedItems",".","size","(",")",")","{","\n","if","(","rankedItems",".","get","(","i",")",".","getCount","(",")","==","0",")","{","\n","rankedItems",".","remove","(","i",")",";","\n","}","else","{","\n","i++",";","\n","}","\n","}","\n"],"docstring_tokens":["Removes","ranking","entries","that","have","a","count","of","zero"]}
{"code_tokens":["\n","public","static","void","main","(","String[]","args",")","throws","Exception","{","\n","Utils",".","setupDefaultUncaughtExceptionHandler","(",")",";","\n","StormMetricsRegistry","metricsRegistry","=","new","StormMetricsRegistry","(",")",";","\n","@SuppressWarnings","(","\"resource\"",")","\n","Supervisor","instance","=","new","Supervisor","(","new","StandaloneSupervisor","(",")",",","metricsRegistry",")",";","\n","instance",".","launchDaemon","(",")",";","\n"],"docstring_tokens":["supervisor","daemon","enter","entrance"]}
{"code_tokens":["\n","public","static","String","getHdfsPrincipal","(","Map<String,","Object>","conf",")","throws","UnknownHostException","{","\n","String","ret",";","\n\n","String","blobstorePrincipal","=","(","String",")","conf",".","get","(","Config",".","BLOBSTORE_HDFS_PRINCIPAL",")",";","\n","String","hdfsPrincipal","=","(","String",")","conf",".","get","(","Config",".","STORM_HDFS_LOGIN_PRINCIPAL",")",";","\n","if","(","blobstorePrincipal","==","null","&&","hdfsPrincipal","==","null",")","{","\n","return","null",";","\n","}","else","if","(","blobstorePrincipal","==","null",")","{","\n","ret","=","hdfsPrincipal",";","\n","}","else","if","(","hdfsPrincipal","==","null",")","{","\n","LOG",".","warn","(","\"","{","}","is","used","as","the","hdfs","principal",".","Please","use","{","}","instead\",\n","Config",".","BLOBSTORE_HDFS_PRINCIPAL,","Config",".","STORM_HDFS_LOGIN_PRINCIPAL",")",";","\n","ret","=","blobstorePrincipal",";","\n","}","else","{","\n","//both","not","null",";","\n","LOG",".","warn","(","\"Both","{","}","and","{","}","are","set",".","Use","{","}","only",".","\",\n","Config",".","BLOBSTORE_HDFS_PRINCIPAL,","Config",".","STORM_HDFS_LOGIN_PRINCIPAL,","Config",".","STORM_HDFS_LOGIN_PRINCIPAL",")",";","\n","ret","=","hdfsPrincipal",";","\n","}","\n","return","substituteHostnameInPrincipal","(","ret",")",";","\n"],"docstring_tokens":["Get","the","hostname","substituted","hdfs","principal"]}
{"code_tokens":["\n\n","public","static","void","submitTopologyWithProgressBar","(","String","name,","Map<String,","Object>","topoConf,","StormTopology","topology",")","throws\n","AlreadyAliveException,","InvalidTopologyException,","AuthorizationException","{","\n","submitTopologyWithProgressBar","(","name,","topoConf,","topology,","null",")",";","\n"],"docstring_tokens":["Submits","a","topology","to","run","on","the","cluster","with","a","progress","bar"]}
{"code_tokens":["\n","private","void","setupBlobstore","(",")","throws","AuthorizationException,","KeyNotFoundException","{","\n","IStormClusterState","state","=","stormClusterState",";","\n","BlobStore","store","=","this",";","\n","Set<String>","localKeys","=","new","HashSet<>","(",")",";","\n","for","(","Iterator<String>","it","=","store",".","listKeys","(",")",";","it",".","hasNext","(",")",";",")","{","\n","localKeys",".","add","(","it",".","next","(",")",")",";","\n","}","\n","Set<String>","activeKeys","=","new","HashSet<>","(","state",".","activeKeys","(",")",")",";","\n","Set<String>","activeLocalKeys","=","new","HashSet<>","(","localKeys",")",";","\n","activeLocalKeys",".","retainAll","(","activeKeys",")",";","\n","Set<String>","keysToDelete","=","new","HashSet<>","(","localKeys",")",";","\n","keysToDelete",".","removeAll","(","activeKeys",")",";","\n","NimbusInfo","nimbusInfo","=","this",".","nimbusInfo",";","\n","LOG",".","debug","(","\"Deleting","keys","not","on","the","zookeeper","{","}","\",","keysToDelete",")",";","\n","for","(","String","toDelete:","keysToDelete",")","{","\n","store",".","deleteBlob","(","toDelete,","NIMBUS_SUBJECT",")",";","\n","}","\n","LOG",".","debug","(","\"Creating","list","of","key","entries","for","blobstore","inside","zookeeper","{","}","local","{","}","\",","activeKeys,","activeLocalKeys",")",";","\n","for","(","String","key:","activeLocalKeys",")","{","\n","try","{","\n","state",".","setupBlob","(","key,","nimbusInfo,","getVersionForKey","(","key,","nimbusInfo,","zkClient",")",")",";","\n","}","catch","(","KeyNotFoundException","e",")","{","\n","//","invalid","key,","remove","it","from","blobstore\n","store",".","deleteBlob","(","key,","NIMBUS_SUBJECT",")",";","\n","}","\n","}","\n"],"docstring_tokens":["Sets","up","blobstore","state","for","all","current","keys"]}
{"code_tokens":["\n","protected","boolean","isDisconnected","(",")","{","\n","return","session","==","null",";","\n"],"docstring_tokens":["Checks","whether","the","client","is","already","connected","to","the","cluster"]}
{"code_tokens":["\n","public","static","void","main","(","String[]","args",")","throws","Exception","{","\n","Options","options","=","new","Options","(",")",";","\n","options",".","addOption","(","Option",".","builder","(","\"h\"",")","\n",".","longOpt","(","\"help\"",")","\n",".","desc","(","\"Print","a","help","message\"",")","\n",".","build","(",")",")",";","\n","options",".","addOption","(","Option",".","builder","(","\"t\"",")","\n",".","longOpt","(","\"test-time\"",")","\n",".","argName","(","\"MINS\"",")","\n",".","hasArg","(",")","\n",".","desc","(","\"How","long","to","run","the","tests","for","in","mins","(","defaults","to","\"","+","TEST_EXECUTE_TIME_DEFAULT","+","\"",")","\"",")","\n",".","build","(",")",")",";","\n","options",".","addOption","(","Option",".","builder","(",")","\n",".","longOpt","(","\"parallel\"",")","\n",".","argName","(","\"MULTIPLIER","(",":TOPO:COMP",")","?\"",")","\n",".","hasArg","(",")","\n",".","desc","(","\"How","much","to","scale","the","topology","up","or","down","in","parallelism",".","\"\n","+","\"The","new","parallelism","will","round","up","to","the","next","whole","number",".","\"\n","+","\"If","a","topology","+","component","is","supplied","only","that","component","will","be","scaled",".","\"\n","+","\"If","topo","or","component","is","blank","or","a","'*'","all","topologies","or","components","matched","will","be","scaled",".","\"\n","+","\"Only","1","scaling","rule,","the","most","specific,","will","be","applied","to","a","component",".","Providing","a","topology","name","is","considered","more","\"\n","+","\"specific","than","not","providing","one",".","\"\n","+","\"","(","defaults","to","1",".","0","no","scaling",")","\"",")","\n",".","build","(",")",")",";","\n","options",".","addOption","(","Option",".","builder","(",")","\n",".","longOpt","(","\"throughput\"",")","\n",".","argName","(","\"MULTIPLIER","(",":TOPO:COMP",")","?\"",")","\n",".","hasArg","(",")","\n",".","desc","(","\"How","much","to","scale","the","topology","up","or","down","in","throughput",".","\"\n","+","\"If","a","topology","+","component","is","supplied","only","that","component","will","be","scaled",".","\"\n","+","\"If","topo","or","component","is","blank","or","a","'*'","all","topologies","or","components","matched","will","be","scaled",".","\"\n","+","\"Only","1","scaling","rule,","the","most","specific,","will","be","applied","to","a","component",".","Providing","a","topology","name","is","considered","more","\"\n","+","\"specific","than","not","providing","one",".","\"\n","+","\"","(","defaults","to","1",".","0","no","scaling",")","\"",")","\n",".","build","(",")",")",";","\n","options",".","addOption","(","Option",".","builder","(",")","\n",".","longOpt","(","\"local-or-shuffle\"",")","\n",".","desc","(","\"replace","shuffle","grouping","with","local","or","shuffle","grouping\"",")","\n",".","build","(",")",")",";","\n","options",".","addOption","(","Option",".","builder","(",")","\n",".","longOpt","(","\"imbalance\"",")","\n",".","argName","(","\"MS","(",":COUNT",")","?:TOPO:COMP\"",")","\n",".","hasArg","(",")","\n",".","desc","(","\"The","number","of","ms","that","the","first","COUNT","of","TOPO:COMP","will","wait","before","processing",".","This","creates","an","imbalance","\"\n","+","\"that","helps","test","load","aware","groupings",".","By","default","there","is","no","imbalance",".","If","no","count","is","given","it","defaults","to","1\"",")","\n",".","build","(",")",")",";","\n","options",".","addOption","(","Option",".","builder","(",")","\n",".","longOpt","(","\"debug\"",")","\n",".","desc","(","\"Print","debug","information","about","the","adjusted","topology","before","submitting","it",".","\"",")","\n",".","build","(",")",")",";","\n","LoadMetricsServer",".","addCommandLineOptions","(","options",")",";","\n","CommandLineParser","parser","=","new","DefaultParser","(",")",";","\n","CommandLine","cmd","=","null",";","\n","Exception","commandLineException","=","null",";","\n","double","executeTime","=","TEST_EXECUTE_TIME_DEFAULT",";","\n","double","globalParallel","=","1",".","0",";","\n","Map<String,","Double>","topoSpecificParallel","=","new","HashMap<>","(",")",";","\n","double","globalThroughput","=","1",".","0",";","\n","Map<String,","Double>","topoSpecificThroughput","=","new","HashMap<>","(",")",";","\n","Map<String,","SlowExecutorPattern>","topoSpecificImbalance","=","new","HashMap<>","(",")",";","\n","try","{","\n","cmd","=","parser",".","parse","(","options,","args",")",";","\n","if","(","cmd",".","hasOption","(","\"t\"",")",")","{","\n","executeTime","=","Double",".","valueOf","(","cmd",".","getOptionValue","(","\"t\"",")",")",";","\n","}","\n","if","(","cmd",".","hasOption","(","\"parallel\"",")",")","{","\n","for","(","String","stringParallel",":","cmd",".","getOptionValues","(","\"parallel\"",")",")","{","\n","Matcher","m","=","MULTI_PATTERN",".","matcher","(","stringParallel",")",";","\n","if","(","!m",".","matches","(",")",")","{","\n","throw","new","ParseException","(","\"--parallel","\"","+","stringParallel","+","\"","is","not","in","the","format","MULTIPLIER","(",":TOPO:COMP",")","?\"",")",";","\n","}","\n","double","parallel","=","Double",".","parseDouble","(","m",".","group","(","\"value\"",")",")",";","\n","String","topo","=","m",".","group","(","\"topo\"",")",";","\n","if","(","topo","==","null","||","topo",".","isEmpty","(",")",")","{","\n","topo","=","\"*\"",";","\n","}","\n","String","comp","=","m",".","group","(","\"comp\"",")",";","\n","if","(","comp","==","null","||","comp",".","isEmpty","(",")",")","{","\n","comp","=","\"*\"",";","\n","}","\n","if","(","\"*\"",".","equals","(","topo",")","&&","\"*\"",".","equals","(","comp",")",")","{","\n","globalParallel","=","parallel",";","\n","}","else","{","\n","topoSpecificParallel",".","put","(","topo","+","\":\"","+","comp,","parallel",")",";","\n","}","\n","}","\n","}","\n","if","(","cmd",".","hasOption","(","\"throughput\"",")",")","{","\n","for","(","String","stringThroughput",":","cmd",".","getOptionValues","(","\"throughput\"",")",")","{","\n","Matcher","m","=","MULTI_PATTERN",".","matcher","(","stringThroughput",")",";","\n","if","(","!m",".","matches","(",")",")","{","\n","throw","new","ParseException","(","\"--throughput","\"","+","stringThroughput","+","\"","is","not","in","the","format","MULTIPLIER","(",":TOPO:COMP",")","?\"",")",";","\n","}","\n","double","throughput","=","Double",".","parseDouble","(","m",".","group","(","\"value\"",")",")",";","\n","String","topo","=","m",".","group","(","\"topo\"",")",";","\n","if","(","topo","==","null","||","topo",".","isEmpty","(",")",")","{","\n","topo","=","\"*\"",";","\n","}","\n","String","comp","=","m",".","group","(","\"comp\"",")",";","\n","if","(","comp","==","null","||","comp",".","isEmpty","(",")",")","{","\n","comp","=","\"*\"",";","\n","}","\n","if","(","\"*\"",".","equals","(","topo",")","&&","\"*\"",".","equals","(","comp",")",")","{","\n","globalThroughput","=","throughput",";","\n","}","else","{","\n","topoSpecificThroughput",".","put","(","topo","+","\":\"","+","comp,","throughput",")",";","\n","}","\n","}","\n","}","\n","if","(","cmd",".","hasOption","(","\"imbalance\"",")",")","{","\n","for","(","String","stringImbalance",":","cmd",".","getOptionValues","(","\"imbalance\"",")",")","{","\n","//We","require","there","to","be","both","a","topology","and","a","component","in","this","case,","so","parse","it","out","as","such",".","\n","String","[]","parts","=","stringImbalance",".","split","(","\":\"",")",";","\n","if","(","parts",".","length","<","3","||","parts",".","length",">","4",")","{","\n","throw","new","ParseException","(","stringImbalance","+","\"","does","not","appear","to","match","the","expected","pattern\"",")",";","\n","}","else","if","(","parts",".","length","==","3",")","{","\n","topoSpecificImbalance",".","put","(","parts[1]","+","\":\"","+","parts[2],","SlowExecutorPattern",".","fromString","(","parts[0]",")",")",";","\n","}","else","{","//==","4\n","topoSpecificImbalance",".","put","(","parts[2]","+","\":\"","+","parts[3],\n","SlowExecutorPattern",".","fromString","(","parts[0]","+","\":\"","+","parts[1]",")",")",";","\n","}","\n","}","\n","}","\n","}","catch","(","ParseException","|","NumberFormatException","e",")","{","\n","commandLineException","=","e",";","\n","}","\n","if","(","commandLineException","!=","null","||","cmd",".","hasOption","(","'h'",")",")","{","\n","if","(","commandLineException","!=","null",")","{","\n","System",".","err",".","println","(","\"ERROR","\"","+","commandLineException",".","getMessage","(",")",")",";","\n","}","\n","new","HelpFormatter","(",")",".","printHelp","(","\"GenLoad","[options]","[captured_file]*\",","options",")",";","\n","return",";","\n","}","\n","Map<String,","Object>","metrics","=","new","LinkedHashMap<>","(",")",";","\n","metrics",".","put","(","\"parallel_adjust\",","globalParallel",")",";","\n","metrics",".","put","(","\"throughput_adjust\",","globalThroughput",")",";","\n","metrics",".","put","(","\"local_or_shuffle\",","cmd",".","hasOption","(","\"local-or-shuffle\"",")",")",";","\n","metrics",".","put","(","\"topo_parallel\",","topoSpecificParallel",".","entrySet","(",")",".","stream","(",")",".","map","(","(","entry",")","->","entry",".","getValue","(",")","+","\":\"","+","entry",".","getKey","(",")",")","\n",".","collect","(","Collectors",".","toList","(",")",")",")",";","\n","metrics",".","put","(","\"topo_throuhgput\",","topoSpecificThroughput",".","entrySet","(",")",".","stream","(",")",".","map","(","(","entry",")","->","entry",".","getValue","(",")","+","\":\"","+","entry",".","getKey","(",")",")","\n",".","collect","(","Collectors",".","toList","(",")",")",")",";","\n","metrics",".","put","(","\"slow_execs\",","topoSpecificImbalance",".","entrySet","(",")",".","stream","(",")",".","map","(","(","entry",")","->","entry",".","getValue","(",")","+","\":\"","+","entry",".","getKey","(",")",")","\n",".","collect","(","Collectors",".","toList","(",")",")",")",";","\n\n","Config","conf","=","new","Config","(",")",";","\n","LoadMetricsServer","metricServer","=","new","LoadMetricsServer","(","conf,","cmd,","metrics",")",";","\n\n","metricServer",".","serve","(",")",";","\n","String","url","=","metricServer",".","getUrl","(",")",";","\n","int","exitStatus","=","-1",";","\n","try","(","NimbusClient","client","=","NimbusClient",".","getConfiguredClient","(","conf",")",";","\n","ScopedTopologySet","topoNames","=","new","ScopedTopologySet","(","client",".","getClient","(",")",")",")","{","\n","for","(","String","topoFile",":","cmd",".","getArgList","(",")",")","{","\n","try","{","\n","TopologyLoadConf","tlc","=","readTopology","(","topoFile",")",";","\n","tlc","=","tlc",".","scaleParallel","(","globalParallel,","topoSpecificParallel",")",";","\n","tlc","=","tlc",".","scaleThroughput","(","globalThroughput,","topoSpecificThroughput",")",";","\n","tlc","=","tlc",".","overrideSlowExecs","(","topoSpecificImbalance",")",";","\n","if","(","cmd",".","hasOption","(","\"local-or-shuffle\"",")",")","{","\n","tlc","=","tlc",".","replaceShuffleWithLocalOrShuffle","(",")",";","\n","}","\n","if","(","cmd",".","hasOption","(","\"debug\"",")",")","{","\n","LOG",".","info","(","\"DEBUGGING:","{","}","\",","tlc",".","toYamlString","(",")",")",";","\n","}","\n","topoNames",".","add","(","parseAndSubmit","(","tlc,","url",")",")",";","\n","}","catch","(","Exception","e",")","{","\n","System",".","err",".","println","(","\"Could","Not","Submit","Topology","From","\"","+","topoFile",")",";","\n","e",".","printStackTrace","(","System",".","err",")",";","\n","}","\n","}","\n\n","metricServer",".","monitorFor","(","executeTime,","client",".","getClient","(",")",",","topoNames",")",";","\n","exitStatus","=","0",";","\n","}","catch","(","Exception","e",")","{","\n","LOG",".","error","(","\"Error","trying","to","run","topologies",".",".",".","\",","e",")",";","\n","}","finally","{","\n","System",".","exit","(","exitStatus",")",";","\n","}","\n"],"docstring_tokens":["Main","entry","point","for","GenLoad","application"]}
{"code_tokens":["\n","public","byte[]","serialize","(","Object","obj",")","{","\n","output",".","clear","(",")",";","\n","kryo",".","writeClassAndObject","(","output,","obj",")",";","\n","return","output",".","toBytes","(",")",";","\n"],"docstring_tokens":["Serializes","the","given","object","into","a","byte","array","using","Kryo","serialization"]}
{"code_tokens":["\n","public","ByteBuffer","serializeToByteBuffer","(","Object","obj",")","{","\n","output",".","clear","(",")",";","\n","kryo",".","writeClassAndObject","(","output,","obj",")",";","\n","return","ByteBuffer",".","wrap","(","output",".","getBuffer","(",")",",","0,","output",".","position","(",")",")",";","\n"],"docstring_tokens":["Serializes","the","given","object","into","a","ByteBuffer","backed","by","the","byte","array","returned","by","Kryo","serialization"]}
{"code_tokens":["\n","public","Object","deserialize","(","ByteBuffer","byteBuffer",")","{","\n","input",".","setBuffer","(","byteBuffer",".","array","(",")",",","byteBuffer",".","arrayOffset","(",")",",","byteBuffer",".","position","(",")",")",";","\n","return","kryo",".","readClassAndObject","(","input",")",";","\n"],"docstring_tokens":["Returns","an","Object","which","is","created","using","Kryo","deserialization","of","given","byteBuffer","instance"]}
{"code_tokens":["\n","public","static","Response","buildDownloadFile","(","String","contentDispositionName,\n","File","file,","Meter","numFileDownloadExceptions",")","throws","IOException","{","\n","try","{","\n","//","do","not","close","this","InputStream","in","method:","it","will","be","used","from","jetty","server\n","InputStream","is","=","Files",".","newInputStream","(","file",".","toPath","(",")",")",";","\n","return","Response",".","status","(","OK",")","\n",".","entity","(","wrapWithStreamingOutput","(","is",")",")","\n",".","type","(","MediaType",".","APPLICATION_OCTET_STREAM_TYPE",")","\n",".","header","(","\"Content-Disposition\",","\"attachment",";","filename=\\\"\"","+","contentDispositionName","+","\"\\\"\"",")","\n",".","build","(",")",";","\n","}","catch","(","IOException","e",")","{","\n","numFileDownloadExceptions",".","mark","(",")",";","\n","throw","e",";","\n","}","\n"],"docstring_tokens":["Build","a","Response","object","representing","download","a","file"]}
{"code_tokens":["\n","public","static","Response","buildResponseUnauthorizedUser","(","String","user",")","{","\n","String","entity","=","buildUnauthorizedUserHtml","(","user",")",";","\n","return","Response",".","status","(","FORBIDDEN",")","\n",".","entity","(","entity",")","\n",".","type","(","MediaType",".","TEXT_HTML_TYPE",")","\n",".","build","(",")",";","\n"],"docstring_tokens":["Build","a","Response","object","representing","unauthorized","user,","with","HTML","response"]}
{"code_tokens":["\n","public","static","DirLock","tryLock","(","FileSystem","fs,","Path","dir",")","throws","IOException","{","\n","Path","lockFile","=","getDirLockFile","(","dir",")",";","\n\n","try","{","\n","FSDataOutputStream","ostream","=","HdfsUtils",".","tryCreateFile","(","fs,","lockFile",")",";","\n","if","(","ostream","!=","null",")","{","\n","LOG",".","debug","(","\"Thread","(","{","}",")","Acquired","lock","on","dir","{","}","\",","threadInfo","(",")",",","dir",")",";","\n","ostream",".","close","(",")",";","\n","return","new","DirLock","(","fs,","lockFile",")",";","\n","}","else","{","\n","LOG",".","debug","(","\"Thread","(","{","}",")","cannot","lock","dir","{","}","as","its","already","locked",".","\",","threadInfo","(",")",",","dir",")",";","\n","return","null",";","\n","}","\n","}","catch","(","IOException","e",")","{","\n","LOG",".","error","(","\"Error","when","acquiring","lock","on","dir","\"","+","dir,","e",")",";","\n","throw","e",";","\n","}","\n"],"docstring_tokens":["Get","a","lock","on","file","if","not","already","locked"]}
{"code_tokens":["\n","public","static","DirLock","takeOwnershipIfStale","(","FileSystem","fs,","Path","dirToLock,","int","lockTimeoutSec",")","{","\n","Path","dirLockFile","=","getDirLockFile","(","dirToLock",")",";","\n\n","long","now","=","System",".","currentTimeMillis","(",")",";","\n","long","expiryTime","=","now","-","(","lockTimeoutSec","*","1000",")",";","\n\n","try","{","\n","long","modTime","=","fs",".","getFileStatus","(","dirLockFile",")",".","getModificationTime","(",")",";","\n","if","(","modTime","<=","expiryTime",")","{","\n","return","takeOwnership","(","fs,","dirLockFile",")",";","\n","}","\n","return","null",";","\n","}","catch","(","IOException","e",")","{","\n","return","null",";","\n","}","\n"],"docstring_tokens":["if","the","lock","on","the","directory","is","stale,","take","ownership"]}
{"code_tokens":["\n","public","void","release","(",")","throws","IOException","{","\n","if","(","!fs",".","delete","(","lockFile,","false",")",")","{","\n","LOG",".","error","(","\"Thread","{","}","could","not","delete","dir","lock","{","}","\",","threadInfo","(",")",",","lockFile",")",";","\n","}","else","{","\n","LOG",".","debug","(","\"Thread","{","}","Released","dir","lock","{","}","\",","threadInfo","(",")",",","lockFile",")",";","\n","}","\n"],"docstring_tokens":["Release","lock","on","dir","by","deleting","the","lock","file"]}
{"code_tokens":["\n","public","<R>","PairStream<K,","R>","mapValues","(","Function<?","super","V,","?","extends","R>","function",")","{","\n","return","new","PairStream<>","(","streamBuilder,\n","addProcessorNode","(","new","MapValuesProcessor<>","(","function",")",",","KEY_VALUE,","true",")",")",";","\n"],"docstring_tokens":["Returns","a","new","stream","by","applying","a","Function","to","the","value","of","each","key-value","pairs","in","this","stream"]}
{"code_tokens":["\n","public","<R>","PairStream<K,","R>","flatMapValues","(","FlatMapFunction<?","super","V,","?","extends","R>","function",")","{","\n","return","new","PairStream<>","(","streamBuilder,\n","addProcessorNode","(","new","FlatMapValuesProcessor<>","(","function",")",",","KEY_VALUE,","true",")",")",";","\n"],"docstring_tokens":["Return","a","new","stream","by","applying","a","FlatMapFunction","function","to","the","value","of","each","key-value","pairs","in","this","stream"]}
{"code_tokens":["\n","public","<R>","PairStream<K,","R>","aggregateByKey","(","R","initialValue,\n","BiFunction<?","super","R,","?","super","V,","?","extends","R>","accumulator,\n","BiFunction<?","super","R,","?","super","R,","?","extends","R>","combiner",")","{","\n","return","combineByKey","(","CombinerAggregator",".","of","(","initialValue,","accumulator,","combiner",")",")",";","\n"],"docstring_tokens":["Aggregates","the","values","for","each","key","of","this","stream","using","the","given","initial","value,","accumulator","and","combiner"]}
{"code_tokens":["\n","public","<A,","R>","PairStream<K,","R>","aggregateByKey","(","CombinerAggregator<?","super","V,","A,","?","extends","R>","aggregator",")","{","\n","return","combineByKey","(","aggregator",")",";","\n"],"docstring_tokens":["Aggregates","the","values","for","each","key","of","this","stream","using","the","given","CombinerAggregator"]}
{"code_tokens":["\n","public","PairStream<K,","Long>","countByKey","(",")","{","\n","return","aggregateByKey","(","new","Count<>","(",")",")",";","\n"],"docstring_tokens":["Counts","the","values","for","each","key","of","this","stream"]}
{"code_tokens":["\n","public","PairStream<K,","V>","reduceByKey","(","Reducer<V>","reducer",")","{","\n","return","combineByKey","(","reducer",")",";","\n"],"docstring_tokens":["Performs","a","reduction","on","the","values","for","each","key","of","this","stream","by","repeatedly","applying","the","reducer"]}
{"code_tokens":["\n","public","PairStream<K,","Iterable<V>>","groupByKey","(",")","{","\n","return","partitionByKey","(",")",".","aggregatePartition","(","new","MergeValues<>","(",")",")",";","\n"],"docstring_tokens":["Returns","a","new","stream","where","the","values","are","grouped","by","the","keys"]}
{"code_tokens":["\n","public","PairStream<K,","V>","reduceByKeyAndWindow","(","Reducer<V>","reducer,","Window<?,","?>","window",")","{","\n","return","partitionByKey","(",")",".","window","(","window",")",".","reduceByKey","(","reducer",")",";","\n"],"docstring_tokens":["Returns","a","new","stream","where","the","values","that","arrive","within","a","window","having","the","same","key","will","be","reduced","by","repeatedly","applying","the","reducer"]}
{"code_tokens":["\n","public","void","add","(","NormalizedResourceRequest","other",")","{","\n","this",".","normalizedResources",".","add","(","other",".","normalizedResources",")",";","\n","onHeap","+=","other",".","onHeap",";","\n","offHeap","+=","other",".","offHeap",";","\n"],"docstring_tokens":["Add","the","resources","in","other","to","this"]}
{"code_tokens":["\n","public","void","add","(","WorkerResources","value",")","{","\n","this",".","normalizedResources",".","add","(","value",")",";","\n","//The","resources","are","already","normalized\n","Map<String,","Double>","resources","=","value",".","get_resources","(",")",";","\n","onHeap","+=","resources",".","getOrDefault","(","Constants",".","COMMON_ONHEAP_MEMORY_RESOURCE_NAME,","0",".","0",")",";","\n","offHeap","+=","resources",".","getOrDefault","(","Constants",".","COMMON_OFFHEAP_MEMORY_RESOURCE_NAME,","0",".","0",")",";","\n"],"docstring_tokens":["Add","the","resources","from","a","worker","to","those","in","this"]}
{"code_tokens":["\n","public","void","execute","(","String[]","args",")","throws","Exception","{","\n","if","(","args",".","length","!=","4","&&","args",".","length","!=","5",")","{","\n","System",".","out",".","println","(","\"Usage:","\"","+","this",".","getClass","(",")",".","getSimpleName","(",")","+","\"","<dataSourceClassName>","<dataSource",".","url>","\"\n","+","\"<user>","<password>","[topology","name]\"",")",";","\n","System",".","exit","(","-1",")",";","\n","}","\n","Map<String,","Object>","map","=","Maps",".","newHashMap","(",")",";","\n","map",".","put","(","\"dataSourceClassName\",","args[0]",")",";","//com",".","mysql",".","jdbc",".","jdbc2",".","optional",".","MysqlDataSource\n","map",".","put","(","\"dataSource",".","url\",","args[1]",")",";","//jdbc:mysql://localhost/test\n","map",".","put","(","\"dataSource",".","user\",","args[2]",")",";","//root\n\n","if","(","args",".","length","==","4",")","{","\n","map",".","put","(","\"dataSource",".","password\",","args[3]",")",";","//password\n","}","\n\n","Config","config","=","new","Config","(",")",";","\n","config",".","put","(","JDBC_CONF,","map",")",";","\n\n","ConnectionProvider","connectionProvider","=","new","HikariCPConnectionProvider","(","map",")",";","\n","connectionProvider",".","prepare","(",")",";","\n","int","queryTimeoutSecs","=","60",";","\n","JdbcClient","jdbcClient","=","new","JdbcClient","(","connectionProvider,","queryTimeoutSecs",")",";","\n","for","(","String","sql",":","setupSqls",")","{","\n","jdbcClient",".","executeSql","(","sql",")",";","\n","}","\n\n","this",".","userSpout","=","new","UserSpout","(",")",";","\n","this",".","jdbcMapper","=","new","SimpleJdbcMapper","(","TABLE_NAME,","connectionProvider",")",";","\n","connectionProvider",".","cleanup","(",")",";","\n","Fields","outputFields","=","new","Fields","(","\"user_id\",","\"user_name\",","\"dept_name\",","\"create_date\"",")",";","\n","List<Column>","queryParamColumns","=","Lists",".","newArrayList","(","new","Column","(","\"user_id\",","Types",".","INTEGER",")",")",";","\n","this",".","jdbcLookupMapper","=","new","SimpleJdbcLookupMapper","(","outputFields,","queryParamColumns",")",";","\n","this",".","connectionProvider","=","new","HikariCPConnectionProvider","(","map",")",";","\n","String","topoName","=","\"test\"",";","\n","if","(","args",".","length",">","4",")","{","\n","topoName","=","args[4]",";","\n","}","\n","StormSubmitter",".","submitTopology","(","topoName,","config,","getTopology","(",")",")",";","\n"],"docstring_tokens":["A","main","method","template","to","extend"]}
{"code_tokens":["\n","private","void","kill","(","long","pid,","String","user",")","throws","IOException","{","\n","if","(","runAsUser",")","{","\n","signal","(","pid,","15,","user",")",";","\n","}","else","{","\n","ServerUtils",".","killProcessWithSigTerm","(","String",".","valueOf","(","pid",")",")",";","\n","}","\n"],"docstring_tokens":["Kill","a","given","process"]}
{"code_tokens":["\n","private","void","forceKill","(","long","pid,","String","user",")","throws","IOException","{","\n","if","(","runAsUser",")","{","\n","signal","(","pid,","9,","user",")",";","\n","}","else","{","\n","ServerUtils",".","forceKillProcess","(","String",".","valueOf","(","pid",")",")",";","\n","}","\n"],"docstring_tokens":["Kill","a","given","process","forcefully"]}
{"code_tokens":["\n","public","static","RedisCommandsInstanceContainer","build","(","JedisPoolConfig","config",")","{","\n","JedisPool","jedisPool","=\n","new","JedisPool","(","DEFAULT_POOL_CONFIG,","config",".","getHost","(",")",",","config",".","getPort","(",")",",","config",".","getTimeout","(",")",",","config",".","getPassword","(",")",",\n","config",".","getDatabase","(",")",")",";","\n","return","new","RedisContainer","(","jedisPool",")",";","\n"],"docstring_tokens":["Builds","container","for","single","Redis","environment"]}
{"code_tokens":["\n","public","static","RedisCommandsInstanceContainer","build","(","JedisClusterConfig","config",")","{","\n","JedisCluster","jedisCluster","=\n","new","JedisCluster","(","config",".","getNodes","(",")",",","config",".","getTimeout","(",")",",","config",".","getMaxRedirections","(",")",",","DEFAULT_POOL_CONFIG",")",";","\n","return","new","RedisClusterContainer","(","jedisCluster",")",";","\n"],"docstring_tokens":["Builds","container","for","Redis","Cluster","environment"]}
{"code_tokens":["\n","public","DockerRunCommand","setPrivileged","(",")","{","\n","super",".","addCommandArguments","(","\"--privileged\"",")",";","\n","return","this",";","\n"],"docstring_tokens":["Set","--privileged","option","to","run","a","privileged","container"]}
{"code_tokens":["\n","public","static","byte[]","getId","(","List<Object>","keys",")","{","\n","ByteArrayOutputStream","bos","=","new","ByteArrayOutputStream","(",")",";","\n","try","{","\n","for","(","Object","key",":","keys",")","{","\n","bos",".","write","(","String",".","valueOf","(","key",")",".","getBytes","(",")",")",";","\n","}","\n","bos",".","close","(",")",";","\n","}","catch","(","IOException","e",")","{","\n","throw","new","RuntimeException","(","\"IOException","creating","Mongo","document","_id",".","\",","e",")",";","\n","}","\n","return","bos",".","toByteArray","(",")",";","\n"],"docstring_tokens":["Create","Mongo","_id","based","on","input","keys"]}
{"code_tokens":["\n","String","getMetdataString","(",")","{","\n","if","(","this",".","value",".","length","<","MIN_METADATA_VALUE_SIZE",")","{","\n","throw","new","RuntimeException","(","\"RocksDB","value","is","too","small","to","be","a","metadata","string!\"",")",";","\n","}","\n","return","new","String","(","this",".","value,","9,","this",".","value",".","length","-","9",")",";","\n"],"docstring_tokens":["Get","the","metadata","string","portion","of","the","value"]}
{"code_tokens":["\n","void","populateMetric","(","Metric","metric",")","{","\n","ByteBuffer","bb","=","ByteBuffer",".","wrap","(","this",".","value,","0,","METRIC_VALUE_SIZE",")",";","\n","bb",".","get","(",")",";","//","version\n","metric",".","setValue","(","bb",".","getDouble","(",")",")",";","\n","metric",".","setCount","(","bb",".","getLong","(",")",")",";","\n","metric",".","setMin","(","bb",".","getDouble","(",")",")",";","\n","metric",".","setMax","(","bb",".","getDouble","(",")",")",";","\n","metric",".","setSum","(","bb",".","getDouble","(",")",")",";","\n"],"docstring_tokens":["populate","metric","values","from","the","raw","data"]}
{"code_tokens":["\n","public","long","getUsedMemoryMb","(","String","topologyId",")","{","\n","return","usedMemory\n",".","values","(",")","\n",".","stream","(",")","\n",".","filter","(","(","topoAndMem",")","->","topologyId",".","equals","(","topoAndMem",".","topoId",")",")","\n",".","mapToLong","(","(","topoAndMem",")","->","topoAndMem",".","memory",")","\n",".","sum","(",")",";","\n"],"docstring_tokens":["Gets","the","memory","used","by","the","given","topology","across","all","ports","on","this","supervisor"]}
{"code_tokens":["\n","public","long","getReservedMemoryMb","(","String","topologyId",")","{","\n","return","reservedMemory\n",".","values","(",")","\n",".","stream","(",")","\n",".","filter","(","(","topoAndMem",")","->","topologyId",".","equals","(","topoAndMem",".","topoId",")",")","\n",".","mapToLong","(","(","topoAndMem",")","->","topoAndMem",".","memory",")","\n",".","sum","(",")",";","\n"],"docstring_tokens":["Gets","the","memory","reserved","by","the","given","topology","across","all","ports","on","this","supervisor"]}
{"code_tokens":["\n","public","long","getAssignedWorkerCount","(","String","topologyId",")","{","\n","return","usedMemory\n",".","values","(",")","\n",".","stream","(",")","\n",".","filter","(","(","topoAndMem",")","->","topologyId",".","equals","(","topoAndMem",".","topoId",")",")","\n",".","count","(",")",";","\n"],"docstring_tokens":["Gets","the","number","of","worker","ports","assigned","to","the","given","topology","id","on","this","supervisor"]}
{"code_tokens":["\n","public","void","remove","(","int","port",")","{","\n","usedMemory",".","remove","(","port",")",";","\n","reservedMemory",".","remove","(","port",")",";","\n"],"docstring_tokens":["Clears","the","topology","assignment","and","tracked","memory","for","the","given","port"]}
{"code_tokens":["\n","public","void","setName","(","String","name,","boolean","override",")","{","\n","if","(","this",".","name","==","null","||","override",")","{","\n","this",".","name","=","name",";","\n","}","else","{","\n","LOG",".","warn","(","\"Ignoring","attempt","to","set","property","'name'","with","override","==","false",".","\"",")",";","\n","}","\n"],"docstring_tokens":["Sets","the","name","of","the","topology"]}
{"code_tokens":["\n","public","boolean","validate","(",")","{","\n","boolean","hasSpouts","=","this",".","spoutMap","!=","null","&&","this",".","spoutMap",".","size","(",")",">","0",";","\n","boolean","hasBolts","=","this",".","boltMap","!=","null","&&","this",".","boltMap",".","size","(",")",">","0",";","\n","boolean","hasStreams","=","this",".","streams","!=","null","&&","this",".","streams",".","size","(",")",">","0",";","\n","//","you","cant","define","a","topologySource","and","a","DSL","topology","at","the","same","time",".",".",".","\n","if","(","!isDslTopology","(",")","&&","(","(","hasSpouts","||","hasBolts","||","hasStreams",")",")",")","{","\n","return","false",";","\n","}","\n","if","(","isDslTopology","(",")","&&","(","hasSpouts","&&","hasBolts","&&","hasStreams",")",")","{","\n","return","true",";","\n","}","\n","return","true",";","\n"],"docstring_tokens":["Determines","is","this","represents","a","valid","Topology"]}
{"code_tokens":["\n","@Override\n","public","void","start","(","Map<String,","Object>","topoConf,","WorkerTopologyContext","context",")","{","\n","//","NOOP\n"],"docstring_tokens":["This","method","is","called","when","a","worker","is","started"]}
{"code_tokens":["\n","@Override\n","public","void","shutdown","(",")","{","\n","//","NOOP\n"],"docstring_tokens":["This","method","is","called","right","before","a","worker","shuts","down"]}
{"code_tokens":["\n","@Override\n","public","TTransport","connect","(","TTransport","transport,","String","serverHost,","String","asUser",")","throws","TTransportException","{","\n","int","maxBufferSize","=","type",".","getMaxBufferSize","(","topoConf",")",";","\n","//create","a","framed","transport\n","TTransport","conn","=","new","TFramedTransport","(","transport,","maxBufferSize",")",";","\n\n","//connect\n","conn",".","open","(",")",";","\n","LOG",".","debug","(","\"Simple","client","transport","has","been","established\"",")",";","\n\n","return","conn",";","\n"],"docstring_tokens":["Connect","to","the","specified","server","via","framed","transport"]}
{"code_tokens":["\n","public","static","void","main","(","String[]","args",")","throws","Exception","{","\n","Options","options","=","new","Options","(",")",";","\n","options",".","addOption","(","Option",".","builder","(","\"h\"",")","\n",".","longOpt","(","\"help\"",")","\n",".","desc","(","\"Print","a","help","message\"",")","\n",".","build","(",")",")",";","\n","CommandLineParser","parser","=","new","DefaultParser","(",")",";","\n","CommandLine","cmd","=","null",";","\n","boolean","printHelp","=","false",";","\n","try","{","\n","cmd","=","parser",".","parse","(","options,","args",")",";","\n","}","catch","(","ParseException","e",")","{","\n","System",".","err",".","println","(","\"ERROR","\"","+","e",".","getMessage","(",")",")",";","\n","printHelp","=","true",";","\n","}","\n","if","(","printHelp","||","cmd",".","hasOption","(","'h'",")",")","{","\n","new","HelpFormatter","(",")",".","printHelp","(","\"EstimateThroughput","[options]","[topologyName]*\",","options",")",";","\n","return",";","\n","}","\n\n","Config","conf","=","new","Config","(",")",";","\n","int","exitStatus","=","-1",";","\n\n","List<TopologyLoadConf>","regular","=","new","ArrayList<>","(",")",";","\n","List<TopologyLoadConf>","trident","=","new","ArrayList<>","(",")",";","\n\n","try","(","NimbusClient","nc","=","NimbusClient",".","getConfiguredClient","(","conf",")",")","{","\n","Nimbus",".","Iface","client","=","nc",".","getClient","(",")",";","\n","List<String>","topologyNames","=","cmd",".","getArgList","(",")",";","\n\n","for","(","TopologySummary","topologySummary:","client",".","getTopologySummaries","(",")",")","{","\n","if","(","topologyNames",".","isEmpty","(",")","||","topologyNames",".","contains","(","topologySummary",".","get_name","(",")",")",")","{","\n","TopologyLoadConf","capturedConf","=","CaptureLoad",".","captureTopology","(","client,","topologySummary",")",";","\n","if","(","capturedConf",".","looksLikeTrident","(",")",")","{","\n","trident",".","add","(","capturedConf",")",";","\n","}","else","{","\n","regular",".","add","(","capturedConf",")",";","\n","}","\n","}","\n","}","\n\n","System",".","out",".","println","(","\"TOPOLOGY\\tTOTAL","MESSAGES/sec\\tESTIMATED","INPUT","MESSAGES/sec\"",")",";","\n","for","(","TopologyLoadConf","tl:","regular",")","{","\n","System",".","out",".","println","(","tl",".","name","+","\"\\t\"","+","tl",".","getAllEmittedAggregate","(",")","+","\"\\t\"","+","tl",".","getSpoutEmittedAggregate","(",")",")",";","\n","}","\n","for","(","TopologyLoadConf","tl:","trident",")","{","\n","System",".","out",".","println","(","tl",".","name","+","\"\\t\"","+","tl",".","getAllEmittedAggregate","(",")","+","\"\\t\"","+","tl",".","getTridentEstimatedEmittedAggregate","(",")",")",";","\n","}","\n","exitStatus","=","0",";","\n","}","catch","(","Exception","e",")","{","\n","LOG",".","error","(","\"Error","trying","to","capture","topologies",".",".",".","\",","e",")",";","\n","}","finally","{","\n","System",".","exit","(","exitStatus",")",";","\n","}","\n"],"docstring_tokens":["Main","entry","point","for","estimate","throughput","command"]}
{"code_tokens":["\n","public","Collection<String>","getFreeSlotsId","(",")","{","\n","if","(","!isAlive",")","{","\n","return","new","HashSet<>","(",")",";","\n","}","\n","Set<String>","ret","=","new","HashSet<>","(","slots",".","keySet","(",")",")",";","\n","ret",".","removeAll","(","getUsedSlotsId","(",")",")",";","\n","return","ret",";","\n"],"docstring_tokens":["Get","the","IDs","of","all","free","slots","on","this","node"]}
{"code_tokens":["\n","public","void","freeAllSlots","(",")","{","\n","if","(","!isAlive",")","{","\n","LOG",".","warn","(","\"Freeing","all","slots","on","a","dead","node","{","}","\",","nodeId",")",";","\n","}","\n","cluster",".","freeSlots","(","slots",".","values","(",")",")",";","\n","//clearing","assignments\n","topIdToUsedSlots",".","clear","(",")",";","\n"],"docstring_tokens":["Free","all","slots","on","this","node"]}
{"code_tokens":["\n","public","void","free","(","WorkerSlot","ws",")","{","\n","LOG",".","debug","(","\"freeing","WorkerSlot","{","}","on","node","{","}","\",","ws,","hostname",")",";","\n","if","(","!slots",".","containsKey","(","ws",".","getId","(",")",")",")","{","\n","throw","new","IllegalArgumentException","(","\n","\"Tried","to","free","a","slot","\"","+","ws","+","\"","that","was","not\"","+","\"","part","of","this","node","\"","+","nodeId",")",";","\n","}","\n\n","TopologyDetails","topo","=","findTopologyUsingWorker","(","ws",")",";","\n","if","(","topo","==","null",")","{","\n","throw","new","IllegalArgumentException","(","\"Tried","to","free","a","slot","\"","+","ws","+","\"","that","was","already","free!\"",")",";","\n","}","\n\n","//free","slot\n","cluster",".","freeSlot","(","ws",")",";","\n","//cleanup","internal","assignments\n","topIdToUsedSlots",".","get","(","topo",".","getId","(",")",")",".","remove","(","ws",".","getId","(",")",")",";","\n"],"docstring_tokens":["Frees","a","single","slot","in","this","node"]}
{"code_tokens":["\n","public","void","assign","(","WorkerSlot","target,","TopologyDetails","td,","Collection<ExecutorDetails>","executors",")","{","\n","if","(","!isAlive",")","{","\n","throw","new","IllegalStateException","(","\"Trying","to","adding","to","a","dead","node","\"","+","nodeId",")",";","\n","}","\n","Collection<WorkerSlot>","freeSlots","=","getFreeSlots","(",")",";","\n","if","(","freeSlots",".","isEmpty","(",")",")","{","\n","throw","new","IllegalStateException","(","\"Trying","to","assign","to","a","full","node","\"","+","nodeId",")",";","\n","}","\n","if","(","executors",".","size","(",")","==","0",")","{","\n","LOG",".","warn","(","\"Trying","to","assign","nothing","from","\"","+","td",".","getId","(",")","+","\"","to","\"","+","nodeId","+","\"","(","Ignored",")","\"",")",";","\n","}","\n","if","(","target","==","null",")","{","\n","target","=","getFreeSlots","(",")",".","iterator","(",")",".","next","(",")",";","\n","}","\n","if","(","!freeSlots",".","contains","(","target",")",")","{","\n","throw","new","IllegalStateException","(","\n","\"Trying","to","assign","already","used","slot","\"","+","target",".","getPort","(",")","+","\"","on","node","\"","+","nodeId",")",";","\n","}","\n","LOG",".","debug","(","\"target","slot:","{","}","\",","target",")",";","\n\n","cluster",".","assign","(","target,","td",".","getId","(",")",",","executors",")",";","\n\n","//assigning","internally\n","topIdToUsedSlots",".","computeIfAbsent","(","td",".","getId","(",")",",","(","tid",")","->","new","HashMap<>","(",")",")","\n",".","computeIfAbsent","(","target",".","getId","(",")",",","(","tid",")","->","new","LinkedList<>","(",")",")","\n",".","addAll","(","executors",")",";","\n"],"docstring_tokens":["Assigns","a","worker","to","a","node"]}
{"code_tokens":["\n","public","boolean","wouldFit","(","WorkerSlot","ws,","ExecutorDetails","exec,","TopologyDetails","td",")","{","\n","assert","nodeId",".","equals","(","ws",".","getNodeId","(",")",")",":","\"Slot","\"","+","ws","+","\"","is","not","a","part","of","this","node","\"","+","nodeId",";","\n","if","(","!isAlive","||","!cluster",".","wouldFit","(","\n","ws,\n","exec,\n","td,\n","getTotalAvailableResources","(",")",",\n","td",".","getTopologyWorkerMaxHeapSize","(",")",")",")","{","\n","return","false",";","\n","}","\n\n","boolean","oneExecutorPerWorker","=","(","Boolean",")","td",".","getConf","(",")",".","get","(","Config",".","TOPOLOGY_RAS_ONE_EXECUTOR_PER_WORKER",")",";","\n","boolean","oneComponentPerWorker","=","(","Boolean",")","td",".","getConf","(",")",".","get","(","Config",".","TOPOLOGY_RAS_ONE_COMPONENT_PER_WORKER",")",";","\n\n","if","(","oneExecutorPerWorker",")","{","\n","return","!getUsedSlots","(","td",".","getId","(",")",")",".","contains","(","ws",")",";","\n","}","\n\n","if","(","oneComponentPerWorker",")","{","\n","Set<String>","components","=","new","HashSet<>","(",")",";","\n","Map<String,","Collection<ExecutorDetails>>","topologyExecutors","=","topIdToUsedSlots",".","get","(","td",".","getId","(",")",")",";","\n","if","(","topologyExecutors","!=","null",")","{","\n","Collection<ExecutorDetails>","slotExecs","=","topologyExecutors",".","get","(","ws",".","getId","(",")",")",";","\n","if","(","slotExecs","!=","null",")","{","\n","//","components","from","WorkerSlot\n","for","(","ExecutorDetails","slotExec",":","slotExecs",")","{","\n","components",".","add","(","td",".","getComponentFromExecutor","(","slotExec",")",")",";","\n","}","\n","//","component","from","exec\n","components",".","add","(","td",".","getComponentFromExecutor","(","exec",")",")",";","\n","}","\n","}","\n","return","components",".","size","(",")","<=","1",";","\n","}","\n\n","return","true",";","\n"],"docstring_tokens":["Would","scheduling","exec","in","ws","fit","with","the","current","resource","constraints"]}
{"code_tokens":["\n","public","boolean","couldEverFit","(","ExecutorDetails","exec,","TopologyDetails","td",")","{","\n","if","(","!isAlive",")","{","\n","return","false",";","\n","}","\n","NormalizedResourceOffer","avail","=","getTotalAvailableResources","(",")",";","\n","NormalizedResourceRequest","requestedResources","=","td",".","getTotalResources","(","exec",")",";","\n","return","avail",".","couldFit","(","cluster",".","getMinWorkerCpu","(",")",",","requestedResources",")",";","\n"],"docstring_tokens":["Is","there","any","possibility","that","exec","could","ever","fit","on","this","node"]}
{"code_tokens":["\n","public","NormalizedResourceOffer","getTotalResources","(",")","{","\n","if","(","sup","!=","null",")","{","\n","return","sup",".","getTotalResources","(",")",";","\n","}","else","{","\n","return","new","NormalizedResourceOffer","(",")",";","\n","}","\n"],"docstring_tokens":["Gets","total","resources","for","this","node"]}
{"code_tokens":["\n","public","NormalizedResourceOffer","getTotalAvailableResources","(",")","{","\n","if","(","sup","!=","null",")","{","\n","NormalizedResourceOffer","availableResources","=","new","NormalizedResourceOffer","(","sup",".","getTotalResources","(",")",")",";","\n","if","(","availableResources",".","remove","(","cluster",".","getAllScheduledResourcesForNode","(","sup",".","getId","(",")",")",",","cluster",".","getResourceMetrics","(",")",")",")","{","\n","if","(","!loggedUnderageUsage",")","{","\n","LOG",".","error","(","\"Resources","on","{","}","became","negative","and","was","clamped","to","0","{","}",".","\",","hostname,","availableResources",")",";","\n","loggedUnderageUsage","=","true",";","\n","}","\n","}","\n","return","availableResources",";","\n","}","else","{","\n","return","new","NormalizedResourceOffer","(",")",";","\n","}","\n"],"docstring_tokens":["Gets","all","available","resources","for","this","node"]}
{"code_tokens":["\n","public","double","getTotalMemoryResources","(",")","{","\n","if","(","sup","!=","null",")","{","\n","return","sup",".","getTotalMemory","(",")",";","\n","}","else","{","\n","return","0",".","0",";","\n","}","\n"],"docstring_tokens":["Gets","the","total","memory","resources","for","this","node"]}
{"code_tokens":["\n","public","double","getTotalCpuResources","(",")","{","\n","if","(","sup","!=","null",")","{","\n","return","sup",".","getTotalCpu","(",")",";","\n","}","else","{","\n","return","0",".","0",";","\n","}","\n"],"docstring_tokens":["Gets","the","total","cpu","resources","for","this","node"]}
{"code_tokens":["\n","public","Set<LocallyCachedBlob>","cleanup","(","ClientBlobStore","store",")","{","\n","Set<LocallyCachedBlob>","deleted","=","new","HashSet<>","(",")",";","\n","LOG",".","debug","(","\"cleanup","target","size:","{","}","current","size","is:","{","}","\",","targetSize,","currentSize",")",";","\n","long","bytesOver","=","currentSize","-","targetSize",";","\n","//First","delete","everything","that","no","longer","exists",".",".",".","\n","for","(","Iterator<Map",".","Entry<LocallyCachedBlob,","Map<String,","?","extends","LocallyCachedBlob>>>","i","=","noReferences",".","entrySet","(",")",".","iterator","(",")",";","\n","i",".","hasNext","(",")",";",")","{","\n","Map",".","Entry<LocallyCachedBlob,","Map<String,","?","extends","LocallyCachedBlob>>","rsrc","=","i",".","next","(",")",";","\n","LocallyCachedBlob","resource","=","rsrc",".","getKey","(",")",";","\n","try","{","\n","if","(","!store",".","isRemoteBlobExists","(","resource",".","getKey","(",")",")",")","{","\n","//The","key","was","removed","so","we","should","delete","it","too",".","\n","Map<String,","?","extends","LocallyCachedBlob>","set","=","rsrc",".","getValue","(",")",";","\n","if","(","removeBlob","(","resource,","set",")",")","{","\n","bytesOver","-=","resource",".","getSizeOnDisk","(",")",";","\n","LOG",".","info","(","\"Deleted","blob:","{","}","(","REMOVED","FROM","CLUSTER",")",".","\",","resource",".","getKey","(",")",")",";","\n","deleted",".","add","(","resource",")",";","\n","i",".","remove","(",")",";","\n","}","\n","}","\n","}","catch","(","AuthorizationException","e",")","{","\n","//Ignored\n","}","\n","}","\n\n","for","(","Iterator<Map",".","Entry<LocallyCachedBlob,","Map<String,","?","extends","LocallyCachedBlob>>>","i","=","noReferences",".","entrySet","(",")",".","iterator","(",")",";","\n","bytesOver",">","0","&&","i",".","hasNext","(",")",";",")","{","\n","Map",".","Entry<LocallyCachedBlob,","Map<String,","?","extends","LocallyCachedBlob>>","rsrc","=","i",".","next","(",")",";","\n","LocallyCachedBlob","resource","=","rsrc",".","getKey","(",")",";","\n","Map<String,","?","extends","LocallyCachedBlob>","set","=","rsrc",".","getValue","(",")",";","\n","if","(","removeBlob","(","resource,","set",")",")","{","\n","bytesOver","-=","resource",".","getSizeOnDisk","(",")",";","\n","LOG",".","info","(","\"Deleted","blob:","{","}","(","OVER","SIZE","LIMIT",")",".","\",","resource",".","getKey","(",")",")",";","\n","deleted",".","add","(","resource",")",";","\n","i",".","remove","(",")",";","\n","}","\n","}","\n","return","deleted",";","\n"],"docstring_tokens":["Actually","cleanup","the","blobs","to","try","and","get","below","the","target","cache","size"]}
{"code_tokens":["\n","public","static","void","main","(","String[]","args",")","throws","Exception","{","\n","Options","options","=","new","Options","(",")",";","\n\n","options",".","addOption","(","option","(","0,","\"h\",","OPTION_HELP,","\"Print","this","help","message\"",")",")",";","\n\n","options",".","addOption","(","option","(","0,","\"l\",","OPTION_LOCAL,","\"Ignored:","to","run","in","local","mode","use","`storm","local`\"\n","+","\"","instead","of","`storm","jar`\"",")",")",";","\n\n","options",".","addOption","(","option","(","0,","\"r\",","OPTION_REMOTE,","\"Ignored:","to","run","on","a","remote","cluster","launch\"\n","+","\"","using","`storm","jar`","to","run","in","a","local","cluster","use","`storm","local`\"",")",")",";","\n\n","options",".","addOption","(","option","(","0,","\"R\",","OPTION_RESOURCE,","\"Treat","the","supplied","path","as","a","classpath","resource","instead","of","a","file",".","\"",")",")",";","\n\n","options",".","addOption","(","option","(","1,","\"s\",","OPTION_SLEEP,","\"ms\",","\"Ignored:","to","set","cluster","run","time\"\n","+","\"","use","`--local-ttl`","with","`storm","local`","instead",".","\"",")",")",";","\n\n","options",".","addOption","(","option","(","0,","\"d\",","OPTION_DRY_RUN,","\"Do","not","run","or","deploy","the","topology",".","Just","build,","validate,","\"\n","+","\"and","print","information","about","the","topology",".","\"",")",")",";","\n\n","options",".","addOption","(","option","(","0,","\"q\",","OPTION_NO_DETAIL,","\"Suppress","the","printing","of","topology","details",".","\"",")",")",";","\n\n","options",".","addOption","(","option","(","0,","\"n\",","OPTION_NO_SPLASH,","\"Suppress","the","printing","of","the","splash","screen",".","\"",")",")",";","\n\n","options",".","addOption","(","option","(","0,","\"i\",","OPTION_INACTIVE,","\"Deploy","the","topology,","but","do","not","activate","it",".","\"",")",")",";","\n\n","options",".","addOption","(","option","(","1,","\"z\",","OPTION_ZOOKEEPER,","\"host:port\",","\"Ignored,","if","you","want","to\"\n","+","\"","set","the","zookeeper","host/port","in","local","mode","use","`--local-zookeeper`","instead\"",")",")",";","\n\n","options",".","addOption","(","option","(","1,","\"f\",","OPTION_FILTER,","\"file\",","\"Perform","property","substitution",".","Use","the","specified","file","\"\n","+","\"as","a","source","of","properties,","and","replace","keys","identified","with","{","$[property","name]","}","with","the","value","defined","\"\n","+","\"in","the","properties","file",".","\"",")",")",";","\n\n","options",".","addOption","(","option","(","0,","\"e\",","OPTION_ENV_FILTER,","\"Perform","environment","variable","substitution",".","Replace","keys\"\n","+","\"","identified","with","`$","{","ENV-[NAME]","}","`","will","be","replaced","with","the","corresponding","`NAME`","environment","value\"",")",")",";","\n\n","CommandLineParser","parser","=","new","BasicParser","(",")",";","\n","CommandLine","cmd","=","parser",".","parse","(","options,","args",")",";","\n\n","if","(","cmd",".","getArgs","(",")",".","length","!=","1","||","cmd",".","hasOption","(","OPTION_HELP",")",")","{","\n","usage","(","options",")",";","\n","System",".","exit","(","1",")",";","\n","}","\n","runCli","(","cmd",")",";","\n"],"docstring_tokens":["Flux","main","entry","point"]}
{"code_tokens":["\n","public","ExecutorDetails","currentExec","(",")","{","\n","return","execs",".","get","(","execIndex",")",";","\n"],"docstring_tokens":["Get","the","current","unassigned","executor"]}
{"code_tokens":["\n","@VisibleForTesting\n","public","void","addEmptyTopoForTests","(","String","topoId",")","{","\n","cache",".","put","(","topoId,","new","ConcurrentHashMap<>","(",")",")",";","\n"],"docstring_tokens":["Add","an","empty","topology","to","the","cache","for","testing","purposes"]}
{"code_tokens":["\n","@VisibleForTesting\n","public","int","getNumToposCached","(",")","{","\n","return","cache",".","size","(",")",";","\n"],"docstring_tokens":["Get","the","number","of","topologies","with","cached","heartbeats"]}
{"code_tokens":["\n","@VisibleForTesting\n","public","Set<String>","getTopologyIds","(",")","{","\n","return","cache",".","keySet","(",")",";","\n"],"docstring_tokens":["Get","the","topology","ids","with","cached","heartbeats"]}
{"code_tokens":["\n","public","void","removeTopo","(","String","topoId",")","{","\n","cache",".","remove","(","topoId",")",";","\n"],"docstring_tokens":["Remove","a","specific","topology","from","the","cache"]}
{"code_tokens":["\n","public","void","updateFromZkHeartbeat","(","String","topoId,","Map<List<Integer>,","Map<String,","Object>>","executorBeats,\n","Set<List<Integer>>","allExecutors,","Integer","timeout",")","{","\n","Map<List<Integer>,","ExecutorCache>","topoCache","=","cache",".","computeIfAbsent","(","topoId,","MAKE_MAP",")",";","\n","if","(","executorBeats","==","null",")","{","\n","executorBeats","=","new","HashMap<>","(",")",";","\n","}","\n\n","for","(","List<Integer>","executor",":","allExecutors",")","{","\n","final","Map<String,","Object>","newBeat","=","executorBeats",".","get","(","executor",")",";","\n","ExecutorCache","currBeat","=","topoCache",".","computeIfAbsent","(","executor,","(","k",")","->","new","ExecutorCache","(","newBeat",")",")",";","\n","currBeat",".","updateFromHb","(","timeout,","newBeat",")",";","\n","}","\n"],"docstring_tokens":["Update","the","cache","with","heartbeats","from","a","worker","through","zookeeper"]}
{"code_tokens":["\n","public","void","updateHeartbeat","(","SupervisorWorkerHeartbeat","workerHeartbeat,","Integer","taskTimeoutSecs",")","{","\n","Map<List<Integer>,","Map<String,","Object>>","executorBeats","=","StatsUtil",".","convertWorkerBeats","(","workerHeartbeat",")",";","\n","String","topoId","=","workerHeartbeat",".","get_storm_id","(",")",";","\n","Map<List<Integer>,","ExecutorCache>","topoCache","=","cache",".","computeIfAbsent","(","topoId,","MAKE_MAP",")",";","\n\n","for","(","ExecutorInfo","executorInfo",":","workerHeartbeat",".","get_executors","(",")",")","{","\n","List<Integer>","executor","=","Arrays",".","asList","(","executorInfo",".","get_task_start","(",")",",","executorInfo",".","get_task_end","(",")",")",";","\n","final","Map<String,","Object>","newBeat","=","executorBeats",".","get","(","executor",")",";","\n","ExecutorCache","currBeat","=","topoCache",".","computeIfAbsent","(","executor,","(","k",")","->","new","ExecutorCache","(","newBeat",")",")",";","\n","currBeat",".","updateFromHb","(","taskTimeoutSecs,","newBeat",")",";","\n","}","\n"],"docstring_tokens":["Update","the","heartbeats","for","a","given","worker"]}
{"code_tokens":["\n","public","static","List<Object>","generateTuples","(","Message","msg,","Scheme","scheme",")","{","\n","List<Object>","tup",";","\n","String","rawKey","=","msg",".","getKeys","(",")",";","\n","ByteBuffer","body","=","ByteBuffer",".","wrap","(","msg",".","getBody","(",")",")",";","\n","if","(","rawKey","!=","null","&&","scheme","instanceof","KeyValueScheme",")","{","\n","ByteBuffer","key","=","ByteBuffer",".","wrap","(","rawKey",".","getBytes","(","StandardCharsets",".","UTF_8",")",")",";","\n","tup","=","(","(","KeyValueScheme",")","scheme",")",".","deserializeKeyAndValue","(","key,","body",")",";","\n","}","else","{","\n","tup","=","scheme",".","deserialize","(","body",")",";","\n","}","\n","return","tup",";","\n"],"docstring_tokens":["Generate","Storm","tuple","values","by","Message","and","Scheme"]}
{"code_tokens":["\n","public","static","void","populateTopicData","(","KafkaUnit","kafkaUnit,","String","topicName,","int","msgCount",")","throws","Exception","{","\n","kafkaUnit",".","createTopic","(","topicName",")",";","\n","\n","for","(","int","i","=","0",";","i","<","msgCount",";","i++",")","{","\n","ProducerRecord<String,","String>","producerRecord","=","new","ProducerRecord<>","(","\n","topicName,","Integer",".","toString","(","i",")",",\n","Integer",".","toString","(","i",")",")",";","\n","kafkaUnit",".","sendMessage","(","producerRecord",")",";","\n","}","\n"],"docstring_tokens":["Using","the","given","KafkaUnit","instance,","put","some","messages","in","the","specified","topic"]}
{"code_tokens":["\n","public","final","AtomicOutputStream","createBlob","(","String","key,","SettableBlobMeta","meta",")","throws","AuthorizationException,","KeyAlreadyExistsException","{","\n","if","(","meta","!=","null","&&","meta",".","is_set_acl","(",")",")","{","\n","BlobStoreAclHandler",".","validateSettableACLs","(","key,","meta",".","get_acl","(",")",")",";","\n","}","\n","return","createBlobToExtend","(","key,","meta",")",";","\n"],"docstring_tokens":["Client","facing","API","to","create","a","blob"]}
{"code_tokens":["\n","public","final","void","setBlobMeta","(","String","key,","SettableBlobMeta","meta",")","throws","AuthorizationException,","KeyNotFoundException","{","\n","if","(","meta","!=","null","&&","meta",".","is_set_acl","(",")",")","{","\n","BlobStoreAclHandler",".","validateSettableACLs","(","key,","meta",".","get_acl","(",")",")",";","\n","}","\n","setBlobMetaToExtend","(","key,","meta",")",";","\n"],"docstring_tokens":["Client","facing","API","to","set","the","metadata","for","a","blob"]}
{"code_tokens":["\n","public","void","execute","(","final","K","key,","Runnable","r",")","{","\n","Runnable","old","=","latest",".","put","(","key,","r",")",";","\n","if","(","old","==","null",")","{","\n","//It","was","not","there","before","so","we","need","to","run","it",".","\n","exec",".","execute","(","(",")","->","{","\n","Runnable","run","=","latest",".","remove","(","key",")",";","\n","if","(","run","!=","null",")","{","\n","run",".","run","(",")",";","\n","}","\n","}",")",";","\n","}","else","{","\n","LOG",".","debug","(","\"Replacing","runnable","for","{","}","-","{","}","\",","key,","r",")",";","\n","}","\n"],"docstring_tokens":["Run","something","in","the","future,","but","replace","it","with","the","latest","if","it","is","taking","too","long"]}
{"code_tokens":["\n","public","static","void","skipFully","(","DataInput","in,","int","len",")","throws","IOException","{","\n","int","total","=","0",";","\n","int","cur","=","0",";","\n\n","while","(","(","total","<","len",")","&&","(","(","cur","=","in",".","skipBytes","(","len","-","total",")",")",">","0",")",")","{","\n","total","+=","cur",";","\n","}","\n\n","if","(","total","<","len",")","{","\n","throw","new","IOException","(","\"Not","able","to","skip","\"\n","+","len\n","+","\"","bytes,","possibly","\"\n","+","\"due","to","end","of","input",".","\"",")",";","\n","}","\n"],"docstring_tokens":["Skip","len","number","of","bytes","in","input","streamin"]}
{"code_tokens":["\n","int","getMetadataStringId","(",")","{","\n","if","(","this",".","getType","(",")",".","getValue","(",")","<","KeyType",".","METADATA_STRING_END",".","getValue","(",")",")","{","\n","return","ByteBuffer",".","wrap","(","key,","2,","4",")",".","getInt","(",")",";","\n","}","else","{","\n","throw","new","RuntimeException","(","\"Cannot","fetch","metadata","string","for","key","of","type","\"","+","this",".","getType","(",")",")",";","\n","}","\n"],"docstring_tokens":["get","the","metadata","string","Id","portion","of","the","key","for","metadata","keys"]}
{"code_tokens":["\n","@Override\n","public","int","compareTo","(","RocksDbKey","o",")","{","\n","return","UnsignedBytes",".","lexicographicalComparator","(",")",".","compare","(","this",".","getRaw","(",")",",","o",".","getRaw","(",")",")",";","\n"],"docstring_tokens":["compares","to","keys","on","a","byte","by","byte","basis"]}
{"code_tokens":["\n","public","static","void","main","(","String[]","args",")","throws","Exception","{","\n","if","(","args",".","length","==","0",")","{","\n","throw","new","IllegalArgumentException","(","\"Topology","name","must","be","provided",".","\"",")",";","\n","}","\n\n","final","String","name","=","args[0]",";","\n\n","NimbusClient",".","withConfiguredClient","(","new","NimbusClient",".","WithNimbus","(",")","{","\n","@Override\n","public","void","run","(","Nimbus",".","Iface","client",")","throws","Exception","{","\n","GetInfoOptions","opts","=","new","GetInfoOptions","(",")",";","\n","opts",".","set_num_err_choice","(","NumErrorsChoice",".","ONE",")",";","\n","Map<String,","Object>","outputMap","=","new","HashMap<>","(",")",";","\n","try","{","\n","TopologyInfo","topologyInfo","=","client",".","getTopologyInfoByNameWithOpts","(","name,","opts",")",";","\n","String","topologyName","=","topologyInfo",".","get_name","(",")",";","\n","Map<String,","List<ErrorInfo>>","topologyErrors","=","topologyInfo",".","get_errors","(",")",";","\n","outputMap",".","put","(","\"Topology","Name\",","topologyName",")",";","\n","outputMap",".","put","(","\"Comp-Errors\",","getComponentErrors","(","topologyErrors",")",")",";","\n","}","catch","(","NotAliveException","notAliveException",")","{","\n","outputMap",".","put","(","\"Failure\",","\"No","topologies","running","with","name","\"","+","name",")",";","\n","}","\n","System",".","out",".","println","(","JSONValue",".","toJSONString","(","outputMap",")",")",";","\n","}","\n\n","private","Map<String,","String>","getComponentErrors","(","Map<String,","List<ErrorInfo>>","topologyErrors",")","{","\n","Map<String,","String>","componentErrorMap","=","new","HashMap<>","(",")",";","\n","for","(","Map",".","Entry<String,","List<ErrorInfo>>","compNameToCompErrors",":","topologyErrors",".","entrySet","(",")",")","{","\n","String","compName","=","compNameToCompErrors",".","getKey","(",")",";","\n","List<ErrorInfo>","compErrors","=","compNameToCompErrors",".","getValue","(",")",";","\n","if","(","compErrors","!=","null","&&","!compErrors",".","isEmpty","(",")",")","{","\n","ErrorInfo","latestError","=","compErrors",".","get","(","0",")",";","\n","componentErrorMap",".","put","(","compName,","latestError",".","get_error","(",")",")",";","\n","}","\n","}","\n\n","return","componentErrorMap",";","\n","}","\n","}",")",";","\n"],"docstring_tokens":["Only","get","errors","for","a","topology"]}
{"code_tokens":["\n","@Override\n","public","T","addResources","(","Map<String,","Double>","resources",")","{","\n","if","(","resources","!=","null",")","{","\n","Map<String,","Double>","currentResources","=","(","Map<String,","Double>",")","getComponentConfiguration","(",")",".","computeIfAbsent","(","\n","Config",".","TOPOLOGY_COMPONENT_RESOURCES_MAP,","(","k",")","->","new","HashMap<>","(",")",")",";","\n","currentResources",".","putAll","(","resources",")",";","\n","}","\n","return","(","T",")","this",";","\n"],"docstring_tokens":["Add","generic","resources","for","this","component"]}
{"code_tokens":["\n","public","ExecutorShutdown","execute","(",")","throws","Exception","{","\n","LOG",".","info","(","\"Loading","executor","tasks","\"","+","componentId","+","\":\"","+","executorId",")",";","\n\n","String","handlerName","=","componentId","+","\"-executor\"","+","executorId",";","\n","Utils",".","SmartThread","handler","=\n","Utils",".","asyncLoop","(","this,","false,","reportErrorDie,","Thread",".","NORM_PRIORITY,","true,","true,","handlerName",")",";","\n\n","LOG",".","info","(","\"Finished","loading","executor","\"","+","componentId","+","\":\"","+","executorId",")",";","\n","return","new","ExecutorShutdown","(","this,","Lists",".","newArrayList","(","handler",")",",","idToTask,","receiveQueue",")",";","\n"],"docstring_tokens":["separated","from","mkExecutor","in","order","to","replace","executor","transfer","in","executor","data","for","testing"]}
{"code_tokens":["\n","private","Map<String,","Map<String,","LoadAwareCustomStreamGrouping>>","outboundComponents","(","\n","WorkerTopologyContext","workerTopologyContext,","String","componentId,","Map<String,","Object>","topoConf",")","{","\n","Map<String,","Map<String,","LoadAwareCustomStreamGrouping>>","ret","=","new","HashMap<>","(",")",";","\n\n","Map<String,","Map<String,","Grouping>>","outputGroupings","=","workerTopologyContext",".","getTargets","(","componentId",")",";","\n","for","(","Map",".","Entry<String,","Map<String,","Grouping>>","entry",":","outputGroupings",".","entrySet","(",")",")","{","\n","String","streamId","=","entry",".","getKey","(",")",";","\n","Map<String,","Grouping>","componentGrouping","=","entry",".","getValue","(",")",";","\n","Fields","outFields","=","workerTopologyContext",".","getComponentOutputFields","(","componentId,","streamId",")",";","\n","Map<String,","LoadAwareCustomStreamGrouping>","componentGrouper","=","new","HashMap<String,","LoadAwareCustomStreamGrouping>","(",")",";","\n","for","(","Map",".","Entry<String,","Grouping>","cg",":","componentGrouping",".","entrySet","(",")",")","{","\n","String","component","=","cg",".","getKey","(",")",";","\n","Grouping","grouping","=","cg",".","getValue","(",")",";","\n","List<Integer>","outTasks","=","workerTopologyContext",".","getComponentTasks","(","component",")",";","\n","LoadAwareCustomStreamGrouping","grouper","=","GrouperFactory",".","mkGrouper","(","\n","workerTopologyContext,","componentId,","streamId,","outFields,","grouping,","outTasks,","topoConf",")",";","\n","componentGrouper",".","put","(","component,","grouper",")",";","\n","}","\n","if","(","componentGrouper",".","size","(",")",">","0",")","{","\n","ret",".","put","(","streamId,","componentGrouper",")",";","\n","}","\n","}","\n\n","for","(","String","stream",":","workerTopologyContext",".","getComponentCommon","(","componentId",")",".","get_streams","(",")",".","keySet","(",")",")","{","\n","if","(","!ret",".","containsKey","(","stream",")",")","{","\n","ret",".","put","(","stream,","null",")",";","\n","}","\n","}","\n\n","return","ret",";","\n"],"docstring_tokens":["Returns","map","of","stream","id","to","component","id","to","grouper"]}
{"code_tokens":["\n","@Override\n","public","boolean","areAllProcessesDead","(","String","user,","String","workerId",")","throws","IOException","{","\n","boolean","areAllDead","=","isContainerDead","(","workerId,","user",")",";","\n","LOG",".","debug","(","\"WorkerId","{","}",":","Checking","areAllProcessesDead:","{","}","\",","workerId,","areAllDead",")",";","\n","return","areAllDead",";","\n"],"docstring_tokens":["The","container","terminates","if","any","process","inside","the","container","dies"]}
{"code_tokens":["\n","@Override\n","public","boolean","runProfilingCommand","(","String","user,","String","workerId,","List<String>","command,","Map<String,","String>","env,\n","String","logPrefix,","File","targetDir",")","throws","IOException,","InterruptedException","{","\n","String","workerDir","=","targetDir",".","getAbsolutePath","(",")",";","\n\n","String","profilingArgs","=","StringUtils",".","join","(","command,","\"","\"",")",";","\n\n","//run","nsenter\n","String","nsenterScriptPath","=","writeToCommandFile","(","workerDir,","profilingArgs,","\"profile\"",")",";","\n\n","Long","containerPid","=","getContainerPid","(","workerId",")",";","\n","if","(","containerPid","==","null",")","{","\n","LOG",".","error","(","\"Couldn't","get","container","PID","for","the","worker","{","}",".","Skip","profiling\",","workerId",")",";","\n","return","false",";","\n","}","\n\n","List<String>","args","=","Arrays",".","asList","(","CmdType",".","PROFILE_OCI_CONTAINER",".","toString","(",")",",","containerPid",".","toString","(",")",",","nsenterScriptPath",")",";","\n\n","int","exitCode","=","ClientSupervisorUtils",".","processLauncherAndWait","(","conf,","user,","args,","env,","logPrefix,","targetDir",")",";","\n","LOG",".","debug","(","\"WorkerId","{","}",":","exitCode","from","{","}",":","{","}","\",","workerId,","CmdType",".","PROFILE_OCI_CONTAINER",".","toString","(",")",",","exitCode",")",";","\n\n","return","exitCode","==","0",";","\n"],"docstring_tokens":["Run","profiling","command","in","the","container"]}
{"code_tokens":["\n","public","static","LoadCompConf","fromConf","(","Map<String,","Object>","conf",")","{","\n","String","id","=","(","String",")","conf",".","get","(","\"id\"",")",";","\n","int","parallelism","=","ObjectReader",".","getInt","(","conf",".","get","(","\"parallelism\"",")",",","1",")",";","\n","List<OutputStream>","streams","=","new","ArrayList<>","(",")",";","\n","List<Map<String,","Object>>","streamData","=","(","List<Map<String,","Object>>",")","conf",".","get","(","\"streams\"",")",";","\n","if","(","streamData","!=","null",")","{","\n","for","(","Map<String,","Object>","streamInfo:","streamData",")","{","\n","streams",".","add","(","OutputStream",".","fromConf","(","streamInfo",")",")",";","\n","}","\n","}","\n","double","memoryMb","=","ObjectReader",".","getDouble","(","conf",".","get","(","\"memoryLoad\"",")",",","0",".","0",")",";","\n","double","cpuPercent","=","ObjectReader",".","getDouble","(","conf",".","get","(","\"cpuLoad\"",")",",","0",".","0",")",";","\n\n","SlowExecutorPattern","slp","=","null",";","\n","if","(","conf",".","containsKey","(","\"slowExecutorPattern\"",")",")","{","\n","slp","=","SlowExecutorPattern",".","fromConf","(","(","Map<String,","Object>",")","conf",".","get","(","\"slowExecutorPattern\"",")",")",";","\n","}","\n","return","new","LoadCompConf","(","id,","parallelism,","streams,","memoryMb,","cpuPercent,","slp",")",";","\n"],"docstring_tokens":["Parse","the","LoadCompConf","from","a","config","Map"]}
{"code_tokens":["\n","public","LoadCompConf","setParallel","(","int","newParallelism",")","{","\n","//We","need","to","adjust","the","throughput","accordingly","(","so","that","it","stays","the","same","in","aggregate",")","\n","double","throughputAdjustment","=","(","(","double",")","parallelism",")","/","newParallelism",";","\n","return","new","LoadCompConf","(","id,","newParallelism,","streams,","cpuLoad,","memoryLoad,","slp",")",".","scaleThroughput","(","throughputAdjustment",")",";","\n"],"docstring_tokens":["Set","the","parallelism","of","this","component,","and","adjust","the","throughput","so","in","aggregate","it","stays","the","same"]}
{"code_tokens":["\n","public","boolean","isDistributed","(",")","{","\n","return","distributed",";","\n"],"docstring_tokens":["Returns","if","the","spout","is","distributed"]}
{"code_tokens":["\n","public","static","Map<List<Integer>,","ExecutorStats>","mkEmptyExecutorZkHbs","(","Set<List<Long>>","executors",")","{","\n","Map<List<Integer>,","ExecutorStats>","ret","=","new","HashMap<>","(",")",";","\n","for","(","Object","executor",":","executors",")","{","\n","List","startEnd","=","(","List",")","executor",";","\n","ret",".","put","(","convertExecutor","(","startEnd",")",",","null",")",";","\n","}","\n","return","ret",";","\n"],"docstring_tokens":["Make","an","map","of","executors","to","empty","stats,","in","preparation","for","doing","a","heartbeat"]}
{"code_tokens":["\n","public","static","<K1,","K2>","Map","windowSetConverter","(","\n","Map","stats,","KeyTransformer<K2>","secKeyFunc,","KeyTransformer<K1>","firstKeyFunc",")","{","\n","Map","ret","=","new","HashMap","(",")",";","\n\n","for","(","Object","o",":","stats",".","entrySet","(",")",")","{","\n","Map",".","Entry","entry","=","(","Map",".","Entry",")","o",";","\n","K1","key1","=","firstKeyFunc",".","transform","(","entry",".","getKey","(",")",")",";","\n\n","Map","subRetMap","=","(","Map",")","ret",".","get","(","key1",")",";","\n","if","(","subRetMap","==","null",")","{","\n","subRetMap","=","new","HashMap","(",")",";","\n","}","\n","ret",".","put","(","key1,","subRetMap",")",";","\n\n","Map","value","=","(","Map",")","entry",".","getValue","(",")",";","\n","for","(","Object","oo",":","value",".","entrySet","(",")",")","{","\n","Map",".","Entry","subEntry","=","(","Map",".","Entry",")","oo",";","\n","K2","key2","=","secKeyFunc",".","transform","(","subEntry",".","getKey","(",")",")",";","\n","subRetMap",".","put","(","key2,","subEntry",".","getValue","(",")",")",";","\n","}","\n","}","\n","return","ret",";","\n"],"docstring_tokens":["Converts","stats","to","be","over","given","windows","of","time"]}
{"code_tokens":["\n","public","Stream<Tuple>","newStream","(","IRichSpout","spout,","int","parallelism",")","{","\n","SpoutNode","spoutNode","=","new","SpoutNode","(","spout",")",";","\n","String","spoutId","=","UniqueIdGen",".","getInstance","(",")",".","getUniqueSpoutId","(",")",";","\n","spoutNode",".","setComponentId","(","spoutId",")",";","\n","spoutNode",".","setParallelism","(","parallelism",")",";","\n","graph",".","addVertex","(","spoutNode",")",";","\n","return","new","Stream<>","(","this,","spoutNode",")",";","\n"],"docstring_tokens":["Creates","a","new","Stream","of","tuples","from","the","given","IRichSpout","with","the","given","parallelism"]}
{"code_tokens":["\n","public","StormTopology","build","(",")","{","\n","nodeGroupingInfo",".","clear","(",")",";","\n","windowInfo",".","clear","(",")",";","\n","curGroup",".","clear","(",")",";","\n","TopologicalOrderIterator<Node,","Edge>","iterator","=","new","TopologicalOrderIterator<>","(","graph,","queue","(",")",")",";","\n","TopologyBuilder","topologyBuilder","=","new","TopologyBuilder","(",")",";","\n","while","(","iterator",".","hasNext","(",")",")","{","\n","Node","node","=","iterator",".","next","(",")",";","\n","if","(","node","instanceof","SpoutNode",")","{","\n","addSpout","(","topologyBuilder,","(","SpoutNode",")","node",")",";","\n","}","else","if","(","node","instanceof","ProcessorNode",")","{","\n","handleProcessorNode","(","(","ProcessorNode",")","node,","topologyBuilder",")",";","\n","}","else","if","(","node","instanceof","PartitionNode",")","{","\n","updateNodeGroupingInfo","(","(","PartitionNode",")","node",")",";","\n","processCurGroup","(","topologyBuilder",")",";","\n","}","else","if","(","node","instanceof","WindowNode",")","{","\n","updateWindowInfo","(","(","WindowNode",")","node",")",";","\n","processCurGroup","(","topologyBuilder",")",";","\n","}","else","if","(","node","instanceof","SinkNode",")","{","\n","processCurGroup","(","topologyBuilder",")",";","\n","addSink","(","topologyBuilder,","(","SinkNode",")","node",")",";","\n","}","\n","}","\n","processCurGroup","(","topologyBuilder",")",";","\n","mayBeAddTsField","(",")",";","\n","return","topologyBuilder",".","createTopology","(",")",";","\n"],"docstring_tokens":["Builds","a","new","StormTopology","for","the","computation","expressed","via","the","stream","api"]}
{"code_tokens":["\n","public","List<ArtifactResult>","resolve","(","List<Dependency>","dependencies",")","throws\n","DependencyResolutionException,","ArtifactResolutionException","{","\n\n","if","(","dependencies",".","size","(",")","==","0",")","{","\n","return","Collections",".","EMPTY_LIST",";","\n","}","\n\n","CollectRequest","collectRequest","=","new","CollectRequest","(",")",";","\n","collectRequest",".","setRoot","(","dependencies",".","get","(","0",")",")",";","\n","for","(","int","idx","=","1",";","idx","<","dependencies",".","size","(",")",";","idx++",")","{","\n","collectRequest",".","addDependency","(","dependencies",".","get","(","idx",")",")",";","\n","}","\n\n","for","(","RemoteRepository","repository",":","remoteRepositories",")","{","\n","collectRequest",".","addRepository","(","repository",")",";","\n","}","\n\n","DependencyFilter","classpathFilter","=","DependencyFilterUtils\n",".","classpathFilter","(","JavaScopes",".","COMPILE,","JavaScopes",".","RUNTIME",")",";","\n\n","DependencyRequest","dependencyRequest","=","new","DependencyRequest","(","collectRequest,","classpathFilter",")",";","\n","return","system",".","resolveDependencies","(","session,","dependencyRequest",")",".","getArtifactResults","(",")",";","\n"],"docstring_tokens":["Resolve","dependencies","and","return","downloaded","information","of","artifacts"]}
{"code_tokens":["\n","public","static","void","main","(","final","String[]","args",")","throws","Exception","{","\n","if","(","args",".","length","<","1",")","{","\n","throw","new","IllegalArgumentException","(","\"No","class","was","specified","to","run\"",")",";","\n","}","\n\n","long","ttl","=","20",";","\n","String","ttlString","=","System",".","getProperty","(","\"storm",".","local",".","sleeptime\",","\"20\"",")",";","\n","try","{","\n","ttl","=","Long",".","valueOf","(","ttlString",")",";","\n","}","catch","(","NumberFormatException","e",")","{","\n","LOG",".","warn","(","\"could","not","parse","the","sleep","time","defaulting","to","{","}","seconds\",","ttl",")",";","\n","}","\n\n","Map<String,","Object>","daemonConf","=","new","HashMap<>","(",")",";","\n","String","zkOverride","=","System",".","getProperty","(","\"storm",".","local",".","zookeeper\"",")",";","\n","if","(","zkOverride","!=","null",")","{","\n","LOG",".","info","(","\"Using","ZooKeeper","at","'","{","}","'","instead","of","in-process","one",".","\",","zkOverride",")",";","\n","long","zkPort","=","DEFAULT_ZK_PORT",";","\n","String","zkHost","=","null",";","\n","if","(","zkOverride",".","contains","(","\":\"",")",")","{","\n","String[]","hostPort","=","zkOverride",".","split","(","\":\"",")",";","\n","zkHost","=","hostPort[0]",";","\n","zkPort","=","hostPort",".","length",">","1","?","Long",".","parseLong","(","hostPort[1]",")",":","DEFAULT_ZK_PORT",";","\n","}","else","{","\n","zkHost","=","zkOverride",";","\n","}","\n","daemonConf",".","put","(","Config",".","TOPOLOGY_ENABLE_MESSAGE_TIMEOUTS,","true",")",";","\n","daemonConf",".","put","(","Config",".","STORM_ZOOKEEPER_SERVERS,","Arrays",".","asList","(","zkHost",")",")",";","\n","daemonConf",".","put","(","Config",".","STORM_ZOOKEEPER_PORT,","zkPort",")",";","\n","}","\n\n","withLocalModeOverride","(","(",")","->","{","\n","String","klass","=","args[0]",";","\n","String[]","newArgs","=","Arrays",".","copyOfRange","(","args,","1,","args",".","length",")",";","\n","Class<?>","c","=","Class",".","forName","(","klass",")",";","\n","Method","main","=","c",".","getDeclaredMethod","(","\"main\",","String[]",".","class",")",";","\n\n","LOG",".","info","(","\"\\n\\n\\t\\tRUNNING","{","}","with","args","{","}","\\n\\n\",","main,","Arrays",".","toString","(","newArgs",")",")",";","\n","main",".","invoke","(","null,","(","Object",")","newArgs",")",";","\n","return","(","Void",")","null",";","\n","}",",","ttl,","daemonConf",")",";","\n\n","//Sometimes","external","things","used","with","testing","don't","shut","down","all","the","way\n","System",".","exit","(","0",")",";","\n"],"docstring_tokens":["Main","entry","point","to","running","in","local","mode"]}
{"code_tokens":["\n","private","boolean","hasLeader","(",")","throws","AuthorizationException,","TException","{","\n","ClusterSummary","summary","=","getNimbus","(",")",".","getClusterInfo","(",")",";","\n","if","(","summary",".","is_set_nimbuses","(",")",")","{","\n","for","(","NimbusSummary","sum",":","summary",".","get_nimbuses","(",")",")","{","\n","if","(","sum",".","is_isLeader","(",")",")","{","\n","return","true",";","\n","}","\n","}","\n","}","\n","return","false",";","\n"],"docstring_tokens":["Checks","if","Nimbuses","have","elected","a","leader"]}
{"code_tokens":["\n","public","static","void","withConfiguredClient","(","WithNimbus","cb",")","throws","Exception","{","\n","withConfiguredClient","(","cb,","ConfigUtils",".","readStormConfig","(",")",")",";","\n"],"docstring_tokens":["Execute","cb","with","a","configured","nimbus","client","that","will","be","closed","once","cb","returns"]}
{"code_tokens":["\n","public","static","NimbusClient","getConfiguredClientAs","(","Map<String,","Object>","conf,","String","asUser,","Integer","timeout",")","{","\n","Nimbus",".","Iface","override","=","_localOverrideClient",";","\n","if","(","override","!=","null",")","{","\n","return","new","NimbusClient","(","override",")",";","\n","}","\n","Map<String,","Object>","fullConf","=","Utils",".","readStormConfig","(",")",";","\n","fullConf",".","putAll","(","Utils",".","readCommandLineOpts","(",")",")",";","\n","fullConf",".","putAll","(","conf",")",";","\n","conf","=","fullConf",";","\n","if","(","conf",".","containsKey","(","Config",".","STORM_DO_AS_USER",")",")","{","\n","if","(","asUser","!=","null","&&","!asUser",".","isEmpty","(",")",")","{","\n","LOG",".","warn","(","\"You","have","specified","a","doAsUser","as","param","{","}","and","a","doAsParam","as","config,","config","will","take","precedence",".","\",\n","asUser,","conf",".","get","(","Config",".","STORM_DO_AS_USER",")",")",";","\n","}","\n","asUser","=","(","String",")","conf",".","get","(","Config",".","STORM_DO_AS_USER",")",";","\n","}","\n\n","if","(","asUser","==","null","||","asUser",".","isEmpty","(",")",")","{","\n","//The","user","is","not","set","so","lets","see","what","the","request","context","is",".","\n","ReqContext","context","=","ReqContext",".","context","(",")",";","\n","Principal","principal","=","context",".","principal","(",")",";","\n","asUser","=","principal","==","null","?","null",":","principal",".","getName","(",")",";","\n","LOG",".","debug","(","\"Will","impersonate","{","}","based","off","of","request","context",".","\",","asUser",")",";","\n","}","\n\n","List<String>","seeds","=","(","List<String>",")","conf",".","get","(","Config",".","NIMBUS_SEEDS",")",";","\n\n","for","(","String","host",":","seeds",")","{","\n","int","port","=","Integer",".","parseInt","(","conf",".","get","(","Config",".","NIMBUS_THRIFT_PORT",")",".","toString","(",")",")",";","\n","NimbusSummary","nimbusSummary",";","\n","NimbusClient","client","=","null",";","\n","try","{","\n","client","=","new","NimbusClient","(","conf,","host,","port,","timeout,","asUser",")",";","\n","nimbusSummary","=","client",".","getClient","(",")",".","getLeader","(",")",";","\n","if","(","nimbusSummary","!=","null",")","{","\n","String","leaderNimbus","=","nimbusSummary",".","get_host","(",")","+","\":\"","+","nimbusSummary",".","get_port","(",")",";","\n","if","(","shouldLogLeader","(","leaderNimbus",")",")","{","\n","LOG",".","info","(","\"Found","leader","nimbus",":","{","}","\",","leaderNimbus",")",";","\n","}","\n","if","(","nimbusSummary",".","get_host","(",")",".","equals","(","host",")","&&","nimbusSummary",".","get_port","(",")","==","port",")","{","\n","NimbusClient","ret","=","client",";","\n","client","=","null",";","\n","return","ret",";","\n","}","\n","try","{","\n","return","new","NimbusClient","(","conf,","nimbusSummary",".","get_host","(",")",",","nimbusSummary",".","get_port","(",")",",","timeout,","asUser",")",";","\n","}","catch","(","TTransportException","e",")","{","\n","throw","new","RuntimeException","(","\"Failed","to","create","a","nimbus","client","for","the","leader","\"","+","leaderNimbus,","e",")",";","\n","}","\n","}","\n","}","catch","(","Exception","e",")","{","\n","LOG",".","warn","(","\"Ignoring","exception","while","trying","to","get","leader","nimbus","info","from","\"","+","host\n","+","\"",".","will","retry","with","a","different","seed","host",".","\",","e",")",";","\n","continue",";","\n","}","finally","{","\n","if","(","client","!=","null",")","{","\n","client",".","close","(",")",";","\n","}","\n","}","\n","throw","new","NimbusLeaderNotFoundException","(","\"Could","not","find","a","nimbus","leader,","please","try","again","after","some","time",".","\"",")",";","\n","}","\n","throw","new","NimbusLeaderNotFoundException","(","\n","\"Could","not","find","leader","nimbus","from","seed","hosts","\"","+","seeds","+","\"",".","\"\n","+","\"Did","you","specify","a","valid","list","of","nimbus","hosts","for","config","\"\n","+","Config",".","NIMBUS_SEEDS","+","\"?\"",")",";","\n"],"docstring_tokens":["Get","a","nimbus","client","as","configured","by","conf"]}
{"code_tokens":["\n","public","BaseCassandraBolt","withStreamOutputFields","(","String","stream,","Fields","fields",")","{","\n","if","(","stream","==","null","||","stream",".","length","(",")","==","0",")","{","\n","throw","new","IllegalArgumentException","(","\"'stream'","should","not","be","null\"",")",";","\n","}","\n","this",".","outputsFields",".","put","(","stream,","fields",")",";","\n","return","this",";","\n"],"docstring_tokens":["Configures","this","bolt","given","fields","as","outputfields","for","the","given","stream"]}
{"code_tokens":["\n","public","Map<String,","Double>","toNormalizedMap","(",")","{","\n","Map<String,","Double>","ret","=","normalizedResources",".","toNormalizedMap","(",")",";","\n","ret",".","put","(","Constants",".","COMMON_TOTAL_MEMORY_RESOURCE_NAME,","totalMemoryMb",")",";","\n","return","ret",";","\n"],"docstring_tokens":["Return","these","resources","as","a","normalized","map"]}
{"code_tokens":["\n","public","boolean","remove","(","NormalizedResourcesWithMemory","other,","ResourceMetrics","resourceMetrics",")","{","\n","boolean","negativeResources","=","normalizedResources",".","remove","(","other",".","getNormalizedResources","(",")",",","resourceMetrics",")",";","\n","totalMemoryMb","-=","other",".","getTotalMemoryMb","(",")",";","\n","if","(","totalMemoryMb","<","0",".","0",")","{","\n","negativeResources","=","true",";","\n","if","(","resourceMetrics","!=","null",")","{","\n","resourceMetrics",".","getNegativeResourceEventsMeter","(",")",".","mark","(",")",";","\n","}","\n","totalMemoryMb","=","0",".","0",";","\n","}","\n","return","negativeResources",";","\n"],"docstring_tokens":["Remove","the","resources","in","other","from","this"]}
{"code_tokens":["\n","public","double","calculateMinPercentageUsedBy","(","NormalizedResourceOffer","used",")","{","\n","return","normalizedResources",".","calculateMinPercentageUsedBy","(","used",".","getNormalizedResources","(",")",",","getTotalMemoryMb","(",")",",","used",".","getTotalMemoryMb","(",")",")",";","\n"],"docstring_tokens":["Calculate","the","min","percentage","used","of","the","resource"]}
{"code_tokens":["\n","public","boolean","couldHoldIgnoringSharedMemory","(","NormalizedResourcesWithMemory","other",")","{","\n","return","normalizedResources",".","couldHoldIgnoringSharedMemory","(","\n","other",".","getNormalizedResources","(",")",",","getTotalMemoryMb","(",")",",","other",".","getTotalMemoryMb","(",")",")",";","\n"],"docstring_tokens":["Check","if","resources","might","be","able","to","fit"]}
{"code_tokens":["\n","public","boolean","couldFit","(","double","minWorkerCpu,","NormalizedResourceRequest","requestedResources",")","{","\n","if","(","minWorkerCpu","<","0",".","001",")","{","\n","return","this",".","couldHoldIgnoringSharedMemory","(","requestedResources",")",";","\n","}","else","{","\n","//","Assume","that","there","could","be","a","worker","already","on","the","node","that","is","under","the","minWorkerCpu","budget",".","\n","//","It's","possible","we","could","combine","with","it",".","Let's","disregard","minWorkerCpu","from","the","request\n","//","and","validate","that","CPU","as","a","rough","fit",".","\n","double","requestedCpu","=","Math",".","max","(","requestedResources",".","getTotalCpu","(",")","-","minWorkerCpu,","0",".","0",")",";","\n","if","(","requestedCpu",">","this",".","getTotalCpu","(",")",")","{","\n","return","false",";","\n","}","\n","//","now","check","memory","only\n","return","this",".","couldHoldIgnoringSharedMemoryAndCpu","(","requestedResources",")",";","\n","}","\n"],"docstring_tokens":["Is","there","any","possibility","that","a","resource","request","could","ever","fit","on","this"]}
{"code_tokens":["\n","public","BlobStoreFile","write","(","String","key,","boolean","create",")","throws","IOException","{","\n","return","new","HdfsBlobStoreFile","(","getKeyDir","(","key",")",",","true,","create,","hadoopConf",")",";","\n"],"docstring_tokens":["Get","an","object","tied","to","writing","the","data"]}
{"code_tokens":["\n","public","synchronized","void","updateLastBlobUpdateTime","(",")","throws","IOException","{","\n","Long","timestamp","=","Time",".","currentTimeMillis","(",")",";","\n","Path","updateTimeFile","=","new","Path","(","fullPath,","BLOBSTORE_UPDATE_TIME_FILE",")",";","\n","FSDataOutputStream","fsDataOutputStream","=","fileSystem",".","create","(","updateTimeFile,","true",")",";","\n","BufferedWriter","bufferedWriter","=","new","BufferedWriter","(","new","OutputStreamWriter","(","fsDataOutputStream,","StandardCharsets",".","UTF_8",")",")",";","\n","bufferedWriter",".","write","(","timestamp",".","toString","(",")",")",";","\n","bufferedWriter",".","close","(",")",";","\n","LOG",".","debug","(","\"Updated","blobstore","update","time","of","{","}","to","{","}","\",","updateTimeFile,","timestamp",")",";","\n"],"docstring_tokens":["Updates","the","last","updated","time","of","existing","blobstores","to","the","current","time"]}
{"code_tokens":["\n","public","void","validateBlobUpdateTime","(",")","throws","IOException","{","\n","int","currentBucket","=","0",";","\n","long","baseModTime","=","0",";","\n","while","(","currentBucket","<","BUCKETS",")","{","\n","String","name","=","String",".","valueOf","(","currentBucket",")",";","\n","Path","bucketDir","=","new","Path","(","fullPath,","name",")",";","\n\n","//","only","consider","bucket","dirs","that","exist","with","files","in","them\n","if","(","fileSystem",".","exists","(","bucketDir",")","&&","fileSystem",".","listStatus","(","bucketDir",")",".","length",">","0",")","{","\n","long","modtime","=","fileSystem",".","getFileStatus","(","bucketDir",")",".","getModificationTime","(",")",";","\n","if","(","modtime",">","baseModTime",")","{","\n","baseModTime","=","modtime",";","\n","}","\n","}","\n\n","currentBucket++",";","\n","}","\n","if","(","baseModTime",">","0","&&","baseModTime",">","getLastBlobUpdateTime","(",")",")","{","\n","LOG",".","info","(","\"Blobstore","update","time","requires","an","update","to","at","least","{","}","\",","baseModTime",")",";","\n","updateLastBlobUpdateTime","(",")",";","\n","}","\n"],"docstring_tokens":["Validates","that","the","last","updated","blob","time","of","the","blobstore","is","up","to","date","with","the","current","existing","blobs"]}
{"code_tokens":["\n","@Override\n","public","ReqContext","populateContext","(","ReqContext","context,\n","HttpServletRequest","req",")","{","\n","String","userName","=","getUserName","(","req",")",";","\n\n","String","doAsUser","=","req",".","getHeader","(","\"doAsUser\"",")",";","\n","if","(","doAsUser","==","null",")","{","\n","doAsUser","=","req",".","getParameter","(","\"doAsUser\"",")",";","\n","}","\n\n","if","(","doAsUser","!=","null",")","{","\n","context",".","setRealPrincipal","(","new","SingleUserPrincipal","(","userName",")",")",";","\n","userName","=","doAsUser",";","\n","}","else","{","\n","context",".","setRealPrincipal","(","null",")",";","\n","}","\n\n","Set<Principal>","principals","=","new","HashSet<>","(",")",";","\n","if","(","userName","!=","null",")","{","\n","Principal","p","=","new","SingleUserPrincipal","(","userName",")",";","\n","principals",".","add","(","p",")",";","\n","}","\n","Subject","s","=","new","Subject","(","true,","principals,","new","HashSet","(",")",",","new","HashSet","(",")",")",";","\n","context",".","setSubject","(","s",")",";","\n\n","return","context",";","\n"],"docstring_tokens":["Populates","a","given","context","with","a","new","Subject","derived","from","the","credentials","in","a","servlet","request"]}
{"code_tokens":["\n","static","void","init","(","RocksDbMetricsWriter","dbWriter,","int","capacity",")","throws","MetricException","{","\n","if","(","instance","==","null",")","{","\n","instance","=","new","StringMetadataCache","(","dbWriter,","capacity",")",";","\n","}","else","{","\n","throw","new","MetricException","(","\"StringMetadataCache","already","created\"",")",";","\n","}","\n"],"docstring_tokens":["Initializes","the","cache","instance"]}
{"code_tokens":["\n","@Override\n","public","StringMetadata","get","(","String","s",")","{","\n","return","lruStringCache",".","get","(","s",")",";","\n"],"docstring_tokens":["Get","the","string","metadata","from","the","cache"]}
{"code_tokens":["\n","@Override\n","public","void","evictionCallback","(","String","key,","StringMetadata","val",")","{","\n","writeMetadataToDisk","(","key,","val",")",";","\n"],"docstring_tokens":["Callback","when","data","is","about","to","be","removed","from","the","cache"]}
{"code_tokens":["\n","@Override\n","public","boolean","contains","(","Integer","stringId",")","{","\n","return","hashToString",".","containsKey","(","stringId",")",";","\n"],"docstring_tokens":["Determines","if","a","string","Id","is","contained","in","the","cache"]}
{"code_tokens":["\n","@Override\n","public","String","getMetadataString","(","Integer","stringId",")","{","\n","return","hashToString",".","get","(","stringId",")",";","\n"],"docstring_tokens":["Returns","the","string","matching","the","string","Id","if","in","the","cache"]}
{"code_tokens":["\n","public","void","setValue","(","Object","value",")","{","\n","if","(","this",".","ref","!=","null",")","{","\n","throw","new","IllegalStateException","(","\"A","property","can","only","have","a","value","OR","a","reference,","not","both",".","\"",")",";","\n","}","\n","this",".","value","=","value",";","\n"],"docstring_tokens":["Sets","the","value","of","this","property"]}
{"code_tokens":["\n","public","void","setRef","(","String","ref",")","{","\n","if","(","this",".","value","!=","null",")","{","\n","throw","new","IllegalStateException","(","\"A","property","can","only","have","a","value","OR","a","reference,","not","both",".","\"",")",";","\n","}","\n","this",".","ref","=","ref",";","\n"],"docstring_tokens":["Sets","the","value","of","this","property","to","a","reference"]}
{"code_tokens":["\n","public","KafkaTuple","routedTo","(","String","stream",")","{","\n","assert","this",".","stream","==","null",";","\n","this",".","stream","=","stream",";","\n","return","this",";","\n"],"docstring_tokens":["Sets","the","target","stream","of","this","Tuple"]}
{"code_tokens":["\n","public","void","leaderCallBack","(",")","{","\n","numGainedLeader",".","mark","(",")",";","\n","//set","up","nimbus-info","to","zk\n","setUpNimbusInfo","(","acls",")",";","\n","//sync","zk","assignments/id-info","to","local\n","LOG",".","info","(","\"Sync","remote","assignments","and","id-info","to","local\"",")",";","\n","clusterState",".","syncRemoteAssignments","(","null",")",";","\n","clusterState",".","syncRemoteIds","(","null",")",";","\n","clusterState",".","setAssignmentsBackendSynchronized","(",")",";","\n\n","Set<String>","activeTopologyIds","=","new","TreeSet<>","(","ClientZookeeper",".","getChildren","(","zk,\n","ClusterUtils",".","STORMS_SUBTREE,","false",")",")",";","\n\n","Set<String>","activeTopologyBlobKeys","=","populateTopologyBlobKeys","(","activeTopologyIds",")",";","\n","Set<String>","activeTopologyCodeKeys","=","filterTopologyCodeKeys","(","activeTopologyBlobKeys",")",";","\n","Set<String>","allLocalBlobKeys","=","Sets",".","newHashSet","(","blobStore",".","listKeys","(",")",")",";","\n","Set<String>","allLocalTopologyBlobKeys","=","filterTopologyBlobKeys","(","allLocalBlobKeys",")",";","\n\n","//","this","finds","all","active","topologies","blob","keys","from","all","local","topology","blob","keys\n","Sets",".","SetView<String>","diffTopology","=","Sets",".","difference","(","activeTopologyBlobKeys,","allLocalTopologyBlobKeys",")",";","\n","LOG",".","info","(","\"active-topology-blobs","[","{","}","]","local-topology-blobs","[","{","}","]","diff-topology-blobs","[","{","}","]\",\n","generateJoinedString","(","activeTopologyIds",")",",","generateJoinedString","(","allLocalTopologyBlobKeys",")",",\n","generateJoinedString","(","diffTopology",")",")",";","\n\n","if","(","diffTopology",".","isEmpty","(",")",")","{","\n","Set<String>","activeTopologyDependencies","=","getTopologyDependencyKeys","(","activeTopologyCodeKeys",")",";","\n\n","//","this","finds","all","dependency","blob","keys","from","active","topologies","from","all","local","blob","keys\n","Sets",".","SetView<String>","diffDependencies","=","Sets",".","difference","(","activeTopologyDependencies,","allLocalBlobKeys",")",";","\n","LOG",".","info","(","\"active-topology-dependencies","[","{","}","]","local-blobs","[","{","}","]","diff-topology-dependencies","[","{","}","]\",\n","generateJoinedString","(","activeTopologyDependencies",")",",","generateJoinedString","(","allLocalBlobKeys",")",",\n","generateJoinedString","(","diffDependencies",")",")",";","\n\n","if","(","diffDependencies",".","isEmpty","(",")",")","{","\n","LOG",".","info","(","\"Accepting","leadership,","all","active","topologies","and","corresponding","dependencies","found","locally",".","\"",")",";","\n","tc",".","clear","(",")",";","\n","}","else","{","\n","LOG",".","info","(","\"Code","for","all","active","topologies","is","available","locally,","but","some","dependencies","are","not","found","locally,","\"\n","+","\"giving","up","leadership",".","\"",")",";","\n","surrenderLeadership","(",")",";","\n","}","\n","}","else","{","\n","LOG",".","info","(","\"code","for","all","active","topologies","not","available","locally,","giving","up","leadership",".","\"",")",";","\n","surrenderLeadership","(",")",";","\n","}","\n"],"docstring_tokens":["Invoke","when","gains","leadership"]}
{"code_tokens":["\n","@SuppressWarnings","(","\"checkstyle:AbbreviationAsWordInName\"",")","\n","public","static","List<ACL>","getWorkerACL","(","Map<String,","Object>","conf",")","{","\n","if","(","!isZkAuthenticationConfiguredTopology","(","conf",")",")","{","\n","return","null",";","\n","}","\n","ArrayList<ACL>","ret","=","new","ArrayList<>","(","ZooDefs",".","Ids",".","CREATOR_ALL_ACL",")",";","\n","ret",".","add","(","getSuperUserAcl","(","conf",")",")",";","\n","return","ret",";","\n"],"docstring_tokens":["Get","the","ZK","ACLs","that","a","worker","should","use","when","writing","to","ZK"]}
{"code_tokens":["\n","public","static","boolean","isZkAuthenticationConfiguredTopology","(","Map<String,","Object>","conf",")","{","\n","return","(","conf","!=","null\n","&&","conf",".","get","(","Config",".","STORM_ZOOKEEPER_TOPOLOGY_AUTH_SCHEME",")","!=","null\n","&&","!","(","(","String",")","conf",".","get","(","Config",".","STORM_ZOOKEEPER_TOPOLOGY_AUTH_SCHEME",")",")",".","isEmpty","(",")",")",";","\n"],"docstring_tokens":["Is","the","topology","configured","to","have","ZooKeeper","authentication"]}
{"code_tokens":["\n","public","static","void","forceDelete","(","String","path",")","throws","IOException","{","\n","_instance",".","forceDeleteImpl","(","path",")",";","\n"],"docstring_tokens":["Deletes","a","file","or","directory","and","its","contents","if","it","exists"]}
{"code_tokens":["\n","public","static","Double","parseJvmHeapMemByChildOpts","(","List<String>","options,","Double","defaultValue",")","{","\n","if","(","options","!=","null",")","{","\n","Pattern","optsPattern","=","Pattern",".","compile","(","\"Xmx","(","[0-9]+",")","(","[mkgMKG]",")","\"",")",";","\n","for","(","String","option",":","options",")","{","\n","if","(","option","==","null",")","{","\n","continue",";","\n","}","\n","Matcher","m","=","optsPattern",".","matcher","(","option",")",";","\n","while","(","m",".","find","(",")",")","{","\n","long","value","=","Long",".","parseLong","(","m",".","group","(","1",")",")",";","\n","char","unitChar","=","m",".","group","(","2",")",".","toLowerCase","(",")",".","charAt","(","0",")",";","\n","int","unit",";","\n","switch","(","unitChar",")","{","\n","case","'k':\n","unit","=","1024",";","\n","break",";","\n","case","'m':\n","unit","=","1024","*","1024",";","\n","break",";","\n","case","'g':\n","unit","=","1024","*","1024","*","1024",";","\n","break",";","\n","default:\n","unit","=","1",";","\n","}","\n","Double","result","=","value","*","unit","/","1024",".","0","/","1024",".","0",";","\n","return","(","result","<","1",".","0",")","?","1",".","0",":","result",";","\n","}","\n","}","\n","return","defaultValue",";","\n","}","else","{","\n","return","defaultValue",";","\n","}","\n"],"docstring_tokens":["parses","the","arguments","to","extract","jvm","heap","memory","size","in","MB"]}
{"code_tokens":["\n","public","static","void","validateTopologyBlobStoreMap","(","Map<String,","Object>","topoConf,","NimbusBlobStore","client",")","\n","throws","InvalidTopologyException,","AuthorizationException","{","\n","Map<String,","Map<String,","Object>>","blobStoreMap","=","(","Map<String,","Map<String,","Object>>",")","topoConf",".","get","(","Config",".","TOPOLOGY_BLOBSTORE_MAP",")",";","\n","if","(","blobStoreMap","!=","null",")","{","\n","for","(","String","key",":","blobStoreMap",".","keySet","(",")",")","{","\n\n","Map<String,","Object>","blobConf","=","blobStoreMap",".","get","(","key",")",";","\n","try","{","\n","ObjectReader",".","getBoolean","(","blobConf",".","get","(","\"uncompress\"",")",",","false",")",";","\n","ObjectReader",".","getBoolean","(","blobConf",".","get","(","\"workerRestart\"",")",",","false",")",";","\n","}","catch","(","IllegalArgumentException","e",")","{","\n","throw","new","WrappedInvalidTopologyException","(","\"Invalid","blob","conf","option:","\"","+","e",".","getMessage","(",")",")",";","\n","}","\n\n","//","try","to","get","BlobMeta\n","//","This","will","check","if","the","key","exists","and","if","the","subject","has","authorization\n","try","{","\n","client",".","getBlobMeta","(","key",")",";","\n","}","catch","(","KeyNotFoundException","keyNotFound",")","{","\n","//","wrap","KeyNotFoundException","in","an","InvalidTopologyException\n","throw","new","WrappedInvalidTopologyException","(","\"Key","not","found:","\"","+","keyNotFound",".","get_msg","(",")",")",";","\n","}","\n","}","\n","}","\n"],"docstring_tokens":["Validate","topology","blobstore","map"]}
{"code_tokens":["\n","public","static","StormTopology","addVersions","(","StormTopology","topology",")","{","\n","String","stormVersion","=","VersionInfo",".","getVersion","(",")",";","\n","if","(","stormVersion","!=","null\n","&&","!\"Unknown\"",".","equalsIgnoreCase","(","stormVersion",")","\n","&&","!topology",".","is_set_storm_version","(",")",")","{","\n","topology",".","set_storm_version","(","stormVersion",")",";","\n","}","\n\n","String","jdkVersion","=","System",".","getProperty","(","\"java",".","version\"",")",";","\n","if","(","jdkVersion","!=","null","&&","!topology",".","is_set_jdk_version","(",")",")","{","\n","topology",".","set_jdk_version","(","jdkVersion",")",";","\n","}","\n","return","topology",";","\n"],"docstring_tokens":["Add","version","information","to","the","given","topology"]}
{"code_tokens":["\n","public","static","NavigableMap<SimpleVersion,","List<String>>","getConfiguredClasspathVersions","(","Map<String,","Object>","conf,\n","List<String>","currentClassPath",")","{","\n","TreeMap<SimpleVersion,","List<String>>","ret","=","new","TreeMap<>","(",")",";","\n","Map<String,","String>","fromConf","=\n","(","Map<String,","String>",")","conf",".","getOrDefault","(","Config",".","SUPERVISOR_WORKER_VERSION_CLASSPATH_MAP,","Collections",".","emptyMap","(",")",")",";","\n","for","(","Map",".","Entry<String,","String>","entry",":","fromConf",".","entrySet","(",")",")","{","\n","ret",".","put","(","new","SimpleVersion","(","entry",".","getKey","(",")",")",",","Arrays",".","asList","(","entry",".","getValue","(",")",".","split","(","File",".","pathSeparator",")",")",")",";","\n","}","\n","ret",".","put","(","VersionInfo",".","OUR_VERSION,","currentClassPath",")",";","\n","return","ret",";","\n"],"docstring_tokens":["Get","a","map","of","version","to","classpath","from","the","conf","Config.SUPERVISOR_WORKER_VERSION_CLASSPATH_MAP"]}
{"code_tokens":["\n","public","static","NavigableMap<SimpleVersion,","String>","getConfiguredWorkerMainVersions","(","Map<String,","Object>","conf",")","{","\n","TreeMap<SimpleVersion,","String>","ret","=","new","TreeMap<>","(",")",";","\n","Map<String,","String>","fromConf","=\n","(","Map<String,","String>",")","conf",".","getOrDefault","(","Config",".","SUPERVISOR_WORKER_VERSION_MAIN_MAP,","Collections",".","emptyMap","(",")",")",";","\n","for","(","Map",".","Entry<String,","String>","entry",":","fromConf",".","entrySet","(",")",")","{","\n","ret",".","put","(","new","SimpleVersion","(","entry",".","getKey","(",")",")",",","entry",".","getValue","(",")",")",";","\n","}","\n\n","ret",".","put","(","VersionInfo",".","OUR_VERSION,","\"org",".","apache",".","storm",".","daemon",".","worker",".","Worker\"",")",";","\n","return","ret",";","\n"],"docstring_tokens":["Get","a","map","of","version","to","worker","main","from","the","conf","Config.SUPERVISOR_WORKER_VERSION_MAIN_MAP"]}
{"code_tokens":["\n","public","static","NavigableMap<SimpleVersion,","String>","getConfiguredWorkerLogWriterVersions","(","Map<String,","Object>","conf",")","{","\n","TreeMap<SimpleVersion,","String>","ret","=","new","TreeMap<>","(",")",";","\n","Map<String,","String>","fromConf","=\n","(","Map<String,","String>",")","conf",".","getOrDefault","(","Config",".","SUPERVISOR_WORKER_VERSION_LOGWRITER_MAP,","Collections",".","emptyMap","(",")",")",";","\n","for","(","Map",".","Entry<String,","String>","entry",":","fromConf",".","entrySet","(",")",")","{","\n","ret",".","put","(","new","SimpleVersion","(","entry",".","getKey","(",")",")",",","entry",".","getValue","(",")",")",";","\n","}","\n\n","ret",".","put","(","VersionInfo",".","OUR_VERSION,","\"org",".","apache",".","storm",".","LogWriter\"",")",";","\n","return","ret",";","\n"],"docstring_tokens":["Get","a","map","of","version","to","worker","log","writer","from","the","conf","Config.SUPERVISOR_WORKER_VERSION_LOGWRITER_MAP"]}
{"code_tokens":["\n","public","static","void","validateCycleFree","(","StormTopology","topology,","String","name",")","throws","InvalidTopologyException","{","\n","List<List<String>>","cycles","=","Utils",".","findComponentCycles","(","topology,","name",")",";","\n","if","(","!cycles",".","isEmpty","(",")",")","{","\n","String","err","=","String",".","format","(","\"Topology","%s","contains","cycles","in","components","\\\"%s\\\"\",","name,\n","cycles",".","stream","(",")",".","map","(","x","->","String",".","join","(","\",\",","x",")",")",".","collect","(","Collectors",".","joining","(","\"",";","\"",")",")",")",";","\n","throw","new","WrappedInvalidTopologyException","(","err",")",";","\n","}","\n"],"docstring_tokens":["Validate","that","the","topology","is","cycle","free"]}
{"code_tokens":["\n","public","static","void","main","(","String[]","args",")","throws","Exception","{","\n","String","confFile","=","\"conf/HdfsSpoutTopo",".","yaml\"",";","\n","int","runTime","=","-1",";","//Run","until","Ctrl-C\n","if","(","args",".","length",">","0",")","{","\n","runTime","=","Integer",".","parseInt","(","args[0]",")",";","\n","}","\n\n","if","(","args",".","length",">","1",")","{","\n","confFile","=","args[1]",";","\n","}","\n\n","//","Submit","to","Storm","cluster\n","if","(","args",".","length",">","2",")","{","\n","System",".","err",".","println","(","\"args:","[runDurationSec]","[confFile]\"",")",";","\n","return",";","\n","}","\n\n","Map<String,","Object>","topoConf","=","Utils",".","findAndReadConfigFile","(","confFile",")",";","\n","topoConf",".","put","(","Config",".","TOPOLOGY_PRODUCER_BATCH_SIZE,","1000",")",";","\n","topoConf",".","put","(","Config",".","TOPOLOGY_BOLT_WAIT_STRATEGY,","\"org",".","apache",".","storm",".","policy",".","WaitStrategyPark\"",")",";","\n","topoConf",".","put","(","Config",".","TOPOLOGY_BOLT_WAIT_PARK_MICROSEC,","0",")",";","\n","topoConf",".","put","(","Config",".","TOPOLOGY_DISABLE_LOADAWARE_MESSAGING,","true",")",";","\n","topoConf",".","put","(","Config",".","TOPOLOGY_STATS_SAMPLE_RATE,","0",".","0005",")",";","\n\n","topoConf",".","putAll","(","Utils",".","readCommandLineOpts","(",")",")",";","\n","Helper",".","runOnClusterAndPrintMetrics","(","runTime,","TOPOLOGY_NAME,","topoConf,","getTopology","(","topoConf",")",")",";","\n"],"docstring_tokens":["Spout","generates","random","strings","and","HDFS","bolt","writes","them","to","a","text","file"]}
{"code_tokens":["\n","public","boolean","blobExists","(","String","key,","Subject","who",")","throws","AuthorizationException","{","\n","try","{","\n","who","=","checkAndGetSubject","(","who",")",";","\n","validateKey","(","key",")",";","\n","SettableBlobMeta","meta","=","extractBlobMeta","(","key",")",";","\n","aclHandler",".","hasPermissions","(","meta",".","get_acl","(",")",",","READ,","who,","key",")",";","\n","}","catch","(","KeyNotFoundException","e",")","{","\n","return","false",";","\n","}","\n","return","true",";","\n"],"docstring_tokens":["Checks","if","a","blob","exists"]}
{"code_tokens":["\n","@Override\n","protected","void","handleCheckpoint","(","Tuple","checkpointTuple,","Action","action,","long","txid",")","{","\n","collector",".","emit","(","CHECKPOINT_STREAM_ID,","checkpointTuple,","new","Values","(","txid,","action",")",")",";","\n","collector",".","ack","(","checkpointTuple",")",";","\n"],"docstring_tokens":["Forwards","the","checkpoint","tuple","downstream"]}
{"code_tokens":["\n","public","void","hasAnyPermissions","(","List<AccessControl>","acl,","int","mask,","Subject","who,","String","key",")","throws","AuthorizationException","{","\n","if","(","!doAclValidation",")","{","\n","return",";","\n","}","\n","Set<String>","user","=","constructUserFromPrincipals","(","who",")",";","\n","LOG",".","debug","(","\"user","{","}","\",","user",")",";","\n","if","(","checkForValidUsers","(","who,","mask",")",")","{","\n","return",";","\n","}","\n","for","(","AccessControl","ac",":","acl",")","{","\n","int","allowed","=","getAllowed","(","ac,","user",")",";","\n","LOG",".","debug","(","\"","user:","{","}","allowed:","{","}","key:","{","}","\",","user,","allowed,","key",")",";","\n","if","(","(","allowed","&","mask",")",">","0",")","{","\n","return",";","\n","}","\n","}","\n","throw","new","WrappedAuthorizationException","(","\n","user","+","\"","does","not","have","access","to","\"","+","key",")",";","\n"],"docstring_tokens":["Validates","if","the","user","has","any","of","the","permissions","mentioned","in","the","mask"]}
{"code_tokens":["\n","public","void","hasPermissions","(","List<AccessControl>","acl,","int","mask,","Subject","who,","String","key",")","throws","AuthorizationException","{","\n","if","(","!doAclValidation",")","{","\n","return",";","\n","}","\n","Set<String>","user","=","constructUserFromPrincipals","(","who",")",";","\n","LOG",".","debug","(","\"user","{","}","\",","user",")",";","\n","if","(","checkForValidUsers","(","who,","mask",")",")","{","\n","return",";","\n","}","\n","for","(","AccessControl","ac",":","acl",")","{","\n","int","allowed","=","getAllowed","(","ac,","user",")",";","\n","mask","=","~allowed","&","mask",";","\n","LOG",".","debug","(","\"","user:","{","}","allowed:","{","}","disallowed:","{","}","key:","{","}","\",","user,","allowed,","mask,","key",")",";","\n","}","\n","if","(","mask","==","0",")","{","\n","return",";","\n","}","\n","throw","new","WrappedAuthorizationException","(","\n","user","+","\"","does","not","have","\"","+","namedPerms","(","mask",")","+","\"","access","to","\"","+","key",")",";","\n"],"docstring_tokens":["Validates","if","the","user","has","at","least","the","set","of","permissions","mentioned","in","the","mask"]}
{"code_tokens":["\n","public","NodeAssignments","nextAssignments","(","Integer","queueIndex",")","throws","InterruptedException","{","\n","NodeAssignments","target","=","null",";","\n","while","(","true",")","{","\n","target","=","getQueueById","(","queueIndex",")",".","poll","(",")",";","\n","if","(","target","!=","null",")","{","\n","return","target",";","\n","}","\n","Time",".","sleep","(","100L",")",";","\n","}","\n"],"docstring_tokens":["Get","an","assignments","from","the","target","queue","with","the","specific","index"]}
{"code_tokens":["\n","public","ColumnList","addCounter","(","byte[]","family,","byte[]","qualifier,","long","incr",")","{","\n","counters","(",")",".","add","(","new","Counter","(","family,","qualifier,","incr",")",")",";","\n","return","this",";","\n"],"docstring_tokens":["Add","an","HBase","counter","column"]}
{"code_tokens":["\n","public","ColumnList","addCounter","(","ICounter","counter",")","{","\n","return","this",".","addCounter","(","counter",".","family","(",")",",","counter",".","qualifier","(",")",",","counter",".","increment","(",")",")",";","\n"],"docstring_tokens":["Add","an","HBase","counter","column","given","an","instance","of","a","class","that","implements","the","ICounter","interface"]}
{"code_tokens":["\n","public","void","freeTopology","(","String","topId,","Cluster","cluster",")","{","\n","Set<WorkerSlot>","slots","=","topIdToUsedSlots",".","get","(","topId",")",";","\n","if","(","slots","==","null","||","slots",".","isEmpty","(",")",")","{","\n","return",";","\n","}","\n","for","(","WorkerSlot","ws",":","slots",")","{","\n","cluster",".","freeSlot","(","ws",")",";","\n","if","(","isAlive",")","{","\n","freeSlots",".","add","(","ws",")",";","\n","}","\n","}","\n","topIdToUsedSlots",".","remove","(","topId",")",";","\n"],"docstring_tokens":["Frees","all","the","slots","for","a","topology"]}
{"code_tokens":["\n","public","void","assign","(","String","topId,","Collection<ExecutorDetails>","executors,\n","Cluster","cluster",")","{","\n","if","(","!isAlive",")","{","\n","throw","new","IllegalStateException","(","\"Trying","to","adding","to","a","dead","node","\"","+","nodeId",")",";","\n","}","\n","if","(","freeSlots",".","isEmpty","(",")",")","{","\n","throw","new","IllegalStateException","(","\"Trying","to","assign","to","a","full","node","\"","+","nodeId",")",";","\n","}","\n","if","(","executors",".","size","(",")","==","0",")","{","\n","LOG",".","warn","(","\"Trying","to","assign","nothing","from","\"","+","topId","+","\"","to","\"","+","nodeId","+","\"","(","Ignored",")","\"",")",";","\n","}","else","{","\n","WorkerSlot","slot","=","freeSlots",".","iterator","(",")",".","next","(",")",";","\n","cluster",".","assign","(","slot,","topId,","executors",")",";","\n","assignInternal","(","slot,","topId,","false",")",";","\n","}","\n"],"docstring_tokens":["Assign","a","free","slot","on","the","node","to","the","following","topology","and","executors"]}
{"code_tokens":["\n","public","static","void","main","(","String[]","args",")","{","\n","if","(","args",".","length","==","0",")","{","\n","help","(","\"Missing","command",".","\",","System",".","err",")",";","\n","System",".","exit","(","1",")",";","\n","}","\n","String","commandName","=","args[0]",".","toLowerCase","(",")",";","\n","String[]","newArgs","=","Arrays",".","copyOfRange","(","args,","1,","args",".","length",")",";","\n","AdminCommand","command","=","COMMANDS",".","get","(","commandName",")",";","\n","if","(","command","==","null",")","{","\n","help","(","commandName","+","\"","is","not","a","supported","command\",","System",".","err",")",";","\n","System",".","exit","(","2",")",";","\n","}","\n\n","try","{","\n","command",".","run","(","newArgs,","Utils",".","readStormConfig","(",")",",","commandName",")",";","\n","}","catch","(","Exception","e",")","{","\n","LOG",".","error","(","\"Error","while","running","command","{","}","\",","commandName,","e",")",";","\n","help","(","\"Error","while","running","\"","+","commandName","+","\"","\"","+","e",".","getMessage","(",")",",","System",".","err",")",";","\n","System",".","exit","(","3",")",";","\n","}","\n"],"docstring_tokens":["Main","entry","point","to","the","admin","command"]}
{"code_tokens":["\n","public","static","ContainerLauncher","make","(","Map<String,","Object>","conf,","String","supervisorId,","int","supervisorPort,\n","IContext","sharedContext,","StormMetricsRegistry","metricsRegistry,","\n","ContainerMemoryTracker","containerMemoryTracker,\n","org",".","apache",".","storm",".","generated",".","Supervisor",".","Iface","localSupervisor",")","throws","IOException","{","\n","if","(","ConfigUtils",".","isLocalMode","(","conf",")",")","{","\n","return","new","LocalContainerLauncher","(","conf,","supervisorId,","supervisorPort,","sharedContext,","metricsRegistry,","containerMemoryTracker,\n","localSupervisor",")",";","\n","}","\n\n","ResourceIsolationInterface","resourceIsolationManager",";","\n","if","(","ObjectReader",".","getBoolean","(","conf",".","get","(","DaemonConfig",".","STORM_RESOURCE_ISOLATION_PLUGIN_ENABLE",")",",","false",")",")","{","\n","resourceIsolationManager","=","ReflectionUtils",".","newInstance","(","(","String",")","conf",".","get","(","DaemonConfig",".","STORM_RESOURCE_ISOLATION_PLUGIN",")",")",";","\n","LOG",".","info","(","\"Using","resource","isolation","plugin","{","}",":","{","}","\",","conf",".","get","(","DaemonConfig",".","STORM_RESOURCE_ISOLATION_PLUGIN",")",",\n","resourceIsolationManager",")",";","\n","}","else","{","\n","resourceIsolationManager","=","new","DefaultResourceIsolationManager","(",")",";","\n","LOG",".","info","(","\"","{","}","is","false",".","Using","default","resource","isolation","plugin:","{","}","\",","DaemonConfig",".","STORM_RESOURCE_ISOLATION_PLUGIN_ENABLE,\n","resourceIsolationManager",")",";","\n","}","\n\n","resourceIsolationManager",".","prepare","(","conf",")",";","\n\n","return","new","BasicContainerLauncher","(","conf,","supervisorId,","supervisorPort,","resourceIsolationManager,","metricsRegistry,","\n","containerMemoryTracker",")",";","\n"],"docstring_tokens":["Factory","to","create","the","right","container","launcher","for","the","config","and","the","environment"]}
{"code_tokens":["\n","public","CheckPointState","nextState","(","boolean","recovering",")","{","\n","CheckPointState","nextState",";","\n","switch","(","state",")","{","\n","case","PREPARING:\n","nextState","=","recovering","?","new","CheckPointState","(","txid","-","1,","COMMITTED",")",":","new","CheckPointState","(","txid,","COMMITTING",")",";","\n","break",";","\n","case","COMMITTING:\n","nextState","=","new","CheckPointState","(","txid,","COMMITTED",")",";","\n","break",";","\n","case","COMMITTED:\n","nextState","=","recovering","?","this",":","new","CheckPointState","(","txid","+","1,","PREPARING",")",";","\n","break",";","\n","default:\n","throw","new","IllegalStateException","(","\"Unknown","state","\"","+","state",")",";","\n","}","\n","return","nextState",";","\n"],"docstring_tokens":["Get","the","next","state","based","on","this","checkpoint","state"]}
{"code_tokens":["\n","public","Action","nextAction","(","boolean","recovering",")","{","\n","Action","action",";","\n","switch","(","state",")","{","\n","case","PREPARING:\n","action","=","recovering","?","Action",".","ROLLBACK",":","Action",".","PREPARE",";","\n","break",";","\n","case","COMMITTING:\n","action","=","Action",".","COMMIT",";","\n","break",";","\n","case","COMMITTED:\n","action","=","recovering","?","Action",".","INITSTATE",":","Action",".","PREPARE",";","\n","break",";","\n","default:\n","throw","new","IllegalStateException","(","\"Unknown","state","\"","+","state",")",";","\n","}","\n","return","action",";","\n"],"docstring_tokens":["Get","the","next","action","to","perform","based","on","this","checkpoint","state"]}
{"code_tokens":["\n","public","static","TopologyDef","parseFile","(","String","inputFile,","boolean","dumpYaml,","boolean","processIncludes,\n","Properties","properties,","boolean","envSub",")","throws","IOException","{","\n","FileInputStream","in","=","new","FileInputStream","(","inputFile",")",";","\n","TopologyDef","topology","=","parseInputStream","(","in,","dumpYaml,","processIncludes,","properties,","envSub",")",";","\n","in",".","close","(",")",";","\n\n","return","topology",";","\n"],"docstring_tokens":["Parse","a","flux","topology","definition"]}
{"code_tokens":["\n","public","static","TopologyDef","parseResource","(","String","resource,","boolean","dumpYaml,","boolean","processIncludes,\n","Properties","properties,","boolean","envSub",")","throws","IOException","{","\n","InputStream","in","=","FluxParser",".","class",".","getResourceAsStream","(","resource",")",";","\n","TopologyDef","topology","=","parseInputStream","(","in,","dumpYaml,","processIncludes,","properties,","envSub",")",";","\n","in",".","close","(",")",";","\n\n","return","topology",";","\n"],"docstring_tokens":["Parse","a","flux","topology","definition","from","a","classpath","resource"]}
{"code_tokens":["\n","private","static","TopologyDef","processIncludes","(","Yaml","yaml,","TopologyDef","topologyDef,","Properties","properties,","boolean","envSub",")","\n","throws","IOException","{","\n","//TODO","support","multiple","levels","of","includes\n","if","(","topologyDef",".","getIncludes","(",")","!=","null",")","{","\n","for","(","IncludeDef","include",":","topologyDef",".","getIncludes","(",")",")","{","\n","TopologyDef","includeTopologyDef","=","null",";","\n","if","(","include",".","isResource","(",")",")","{","\n","LOG",".","info","(","\"Loading","includes","from","resource:","{","}","\",","include",".","getFile","(",")",")",";","\n","includeTopologyDef","=","parseResource","(","include",".","getFile","(",")",",","true,","false,","properties,","envSub",")",";","\n","}","else","{","\n","LOG",".","info","(","\"Loading","includes","from","file:","{","}","\",","include",".","getFile","(",")",")",";","\n","includeTopologyDef","=","parseFile","(","include",".","getFile","(",")",",","true,","false,","properties,","envSub",")",";","\n","}","\n\n","//","if","overrides","are","disabled,","we","won't","replace","anything","that","already","exists\n","boolean","override","=","include",".","isOverride","(",")",";","\n","//","name\n","if","(","includeTopologyDef",".","getName","(",")","!=","null",")","{","\n","topologyDef",".","setName","(","includeTopologyDef",".","getName","(",")",",","override",")",";","\n","}","\n\n","//","config\n","if","(","includeTopologyDef",".","getConfig","(",")","!=","null",")","{","\n","//TODO","move","this","logic","to","the","model","class\n","Map<String,","Object>","config","=","topologyDef",".","getConfig","(",")",";","\n","Map<String,","Object>","includeConfig","=","includeTopologyDef",".","getConfig","(",")",";","\n","if","(","override",")","{","\n","config",".","putAll","(","includeTopologyDef",".","getConfig","(",")",")",";","\n","}","else","{","\n","for","(","String","key",":","includeConfig",".","keySet","(",")",")","{","\n","if","(","config",".","containsKey","(","key",")",")","{","\n","LOG",".","warn","(","\"Ignoring","attempt","to","set","topology","config","property","'","{","}","'","with","override","==","false\",","key",")",";","\n","}","else","{","\n","config",".","put","(","key,","includeConfig",".","get","(","key",")",")",";","\n","}","\n","}","\n","}","\n","}","\n\n","//component","overrides\n","if","(","includeTopologyDef",".","getComponents","(",")","!=","null",")","{","\n","topologyDef",".","addAllComponents","(","includeTopologyDef",".","getComponents","(",")",",","override",")",";","\n","}","\n","//bolt","overrides\n","if","(","includeTopologyDef",".","getBolts","(",")","!=","null",")","{","\n","topologyDef",".","addAllBolts","(","includeTopologyDef",".","getBolts","(",")",",","override",")",";","\n","}","\n","//spout","overrides\n","if","(","includeTopologyDef",".","getSpouts","(",")","!=","null",")","{","\n","topologyDef",".","addAllSpouts","(","includeTopologyDef",".","getSpouts","(",")",",","override",")",";","\n","}","\n","//stream","overrides\n","//TODO","streams","should","be","uniquely","identifiable\n","if","(","includeTopologyDef",".","getStreams","(",")","!=","null",")","{","\n","topologyDef",".","addAllStreams","(","includeTopologyDef",".","getStreams","(",")",",","override",")",";","\n","}","\n","}","//","end","include","processing\n","}","\n","return","topologyDef",";","\n"],"docstring_tokens":["Process","includes","contained","within","a","yaml","file"]}
{"code_tokens":["\n","public","void","filterOldTopologies","(","long","cutOffAge",")","{","\n","LSTopoHistoryList","lsTopoHistoryListWrapper","=","(","LSTopoHistoryList",")","get","(","LS_TOPO_HISTORY",")",";","\n","List<LSTopoHistory>","filteredTopoHistoryList","=","new","ArrayList<>","(",")",";","\n","if","(","null","!=","lsTopoHistoryListWrapper",")","{","\n","for","(","LSTopoHistory","topoHistory",":","lsTopoHistoryListWrapper",".","get_topo_history","(",")",")","{","\n","if","(","topoHistory",".","get_time_stamp","(",")",">","cutOffAge",")","{","\n","filteredTopoHistoryList",".","add","(","topoHistory",")",";","\n","}","\n","}","\n","}","\n","put","(","LS_TOPO_HISTORY,","new","LSTopoHistoryList","(","filteredTopoHistoryList",")",")",";","\n"],"docstring_tokens":["Remove","topologies","from","local","state","which","are","older","than","cutOffAge"]}
{"code_tokens":["\n","private","boolean","emitOrRetryTuple","(","ConsumerRecord<K,","V>","record",")","{","\n","final","TopicPartition","tp","=","new","TopicPartition","(","record",".","topic","(",")",",","record",".","partition","(",")",")",";","\n","final","KafkaSpoutMessageId","msgId","=","retryService",".","getMessageId","(","tp,","record",".","offset","(",")",")",";","\n\n","if","(","offsetManagers",".","containsKey","(","tp",")","&&","offsetManagers",".","get","(","tp",")",".","contains","(","msgId",")",")","{","//","has","been","acked\n","LOG",".","trace","(","\"Tuple","for","record","[","{","}","]","has","already","been","acked",".","Skipping\",","record",")",";","\n","}","else","if","(","emitted",".","contains","(","msgId",")",")","{","//","has","been","emitted","and","it","is","pending","ack","or","fail\n","LOG",".","trace","(","\"Tuple","for","record","[","{","}","]","has","already","been","emitted",".","Skipping\",","record",")",";","\n","}","else","{","\n","final","List<Object>","tuple","=","kafkaSpoutConfig",".","getTranslator","(",")",".","apply","(","record",")",";","\n","if","(","isEmitTuple","(","tuple",")",")","{","\n","final","boolean","isScheduled","=","retryService",".","isScheduled","(","msgId",")",";","\n","//","not","scheduled","<=>","never","failed","(","i",".","e",".","never","emitted",")",",","or","scheduled","and","ready","to","be","retried\n","if","(","!isScheduled","||","retryService",".","isReady","(","msgId",")",")","{","\n","final","String","stream","=","tuple","instanceof","KafkaTuple","?","(","(","KafkaTuple",")","tuple",")",".","getStream","(",")",":","Utils",".","DEFAULT_STREAM_ID",";","\n\n","if","(","!isAtLeastOnceProcessing","(",")",")","{","\n","if","(","kafkaSpoutConfig",".","isTupleTrackingEnforced","(",")",")","{","\n","collector",".","emit","(","stream,","tuple,","msgId",")",";","\n","LOG",".","trace","(","\"Emitted","tuple","[","{","}","]","for","record","[","{","}","]","with","msgId","[","{","}","]\",","tuple,","record,","msgId",")",";","\n","}","else","{","\n","collector",".","emit","(","stream,","tuple",")",";","\n","LOG",".","trace","(","\"Emitted","tuple","[","{","}","]","for","record","[","{","}","]\",","tuple,","record",")",";","\n","}","\n","}","else","{","\n","emitted",".","add","(","msgId",")",";","\n","offsetManagers",".","get","(","tp",")",".","addToEmitMsgs","(","msgId",".","offset","(",")",")",";","\n","if","(","isScheduled",")","{","//","Was","scheduled","for","retry","and","re-emitted,","so","remove","from","schedule",".","\n","retryService",".","remove","(","msgId",")",";","\n","}","\n","collector",".","emit","(","stream,","tuple,","msgId",")",";","\n","tupleListener",".","onEmit","(","tuple,","msgId",")",";","\n","LOG",".","trace","(","\"Emitted","tuple","[","{","}","]","for","record","[","{","}","]","with","msgId","[","{","}","]\",","tuple,","record,","msgId",")",";","\n","}","\n","return","true",";","\n","}","\n","}","else","{","\n","/*\n","*","if","a","null","tuple","is","not","configured","to","be","emitted,","it","should","be","marked","as","emitted","and","acked","immediately","to","allow","its","offset\n","*","to","be","commited","to","Kafka\n","*/\n","LOG",".","debug","(","\"Not","emitting","null","tuple","for","record","[","{","}","]","as","defined","in","configuration",".","\",","record",")",";","\n","if","(","isAtLeastOnceProcessing","(",")",")","{","\n","msgId",".","setNullTuple","(","true",")",";","\n","offsetManagers",".","get","(","tp",")",".","addToEmitMsgs","(","msgId",".","offset","(",")",")",";","\n","ack","(","msgId",")",";","\n","}","\n","}","\n","}","\n","return","false",";","\n"],"docstring_tokens":["Creates","a","tuple","from","the","kafka","record","and","emits","it","if","it","was","never","emitted","or","it","is","ready","to","be","retried"]}
{"code_tokens":["\n","private","boolean","isEmitTuple","(","List<Object>","tuple",")","{","\n","return","tuple","!=","null","||","kafkaSpoutConfig",".","isEmitNullTuples","(",")",";","\n"],"docstring_tokens":["Emits","a","tuple","if","it","is","not","a","null","tuple,","or","if","the","spout","is","configured","to","emit","null","tuples"]}
{"code_tokens":["\n","public","Response","build","(",")","{","\n","String","body","=","UIHelpers",".","getJsonResponseBody","(","data,","callback,","needSerialize",")",";","\n","Map<String,","Object>","respHeaders","=","UIHelpers",".","getJsonResponseHeaders","(","callback,","headers",")",";","\n","Response",".","ResponseBuilder","respBuilder","=","Response",".","status","(","status",")",".","entity","(","body",")",";","\n","respHeaders",".","forEach","(","respBuilder::header",")",";","\n","return","respBuilder",".","build","(",")",";","\n"],"docstring_tokens":["Build","a","Response","based","on","given","parameters"]}
{"code_tokens":["\n","@Override\n","public","boolean","equals","(","Object","other",")","{","\n\n","if","(","!","(","other","instanceof","Metric",")",")","{","\n","return","false",";","\n","}","\n\n","Metric","o","=","(","Metric",")","other",";","\n\n","return","this","==","other\n","||","(","this",".","name",".","equals","(","o",".","getMetricName","(",")",")","\n","&&","this",".","timestamp","==","o",".","getTimestamp","(",")","\n","&&","this",".","topologyId",".","equals","(","o",".","getTopologyId","(",")",")","\n","&&","this",".","value","==","o",".","getValue","(",")","\n","&&","this",".","componentId",".","equals","(","o",".","getComponentId","(",")",")","\n","&&","this",".","executorId",".","equals","(","o",".","getExecutorId","(",")",")","\n","&&","this",".","hostname",".","equals","(","o",".","getHostname","(",")",")","\n","&&","this",".","streamId",".","equals","(","o",".","getStreamId","(",")",")","\n","&&","this",".","port","==","o",".","getPort","(",")","\n","&&","this",".","count","==","o",".","getCount","(",")","\n","&&","this",".","min","==","o",".","getMin","(",")","\n","&&","this",".","max","==","o",".","getMax","(",")","\n","&&","this",".","sum","==","o",".","getSum","(",")","\n","&&","this",".","aggLevel","==","o",".","getAggLevel","(",")",")",";","\n"],"docstring_tokens":["Check","if","a","Metric","matches","another","object"]}
{"code_tokens":["\n","public","void","addValue","(","double","value",")","{","\n","this",".","count","+=","1",";","\n","this",".","min","=","Math",".","min","(","this",".","min,","value",")",";","\n","this",".","max","=","Math",".","max","(","this",".","max,","value",")",";","\n","this",".","sum","+=","value",";","\n","this",".","value","=","this",".","sum","/","this",".","count",";","\n"],"docstring_tokens":["Adds","an","additional","value","to","the","metric"]}
{"code_tokens":["\n","public","void","setValue","(","double","value",")","{","\n","this",".","count","=","1L",";","\n","this",".","min","=","value",";","\n","this",".","max","=","value",";","\n","this",".","sum","=","value",";","\n","this",".","value","=","value",";","\n"],"docstring_tokens":["Initialize","the","metric","value"]}
{"code_tokens":["\n","public","static","FileLock","tryLock","(","FileSystem","fs,","Path","fileToLock,","Path","lockDirPath,","String","spoutId",")","\n","throws","IOException","{","\n","Path","lockFile","=","new","Path","(","lockDirPath,","fileToLock",".","getName","(",")",")",";","\n\n","try","{","\n","FSDataOutputStream","ostream","=","HdfsUtils",".","tryCreateFile","(","fs,","lockFile",")",";","\n","if","(","ostream","!=","null",")","{","\n","LOG",".","debug","(","\"Acquired","lock","on","file","{","}",".","LockFile=","{","}",",","Spout","=","{","}","\",","fileToLock,","lockFile,","spoutId",")",";","\n","return","new","FileLock","(","fs,","lockFile,","ostream,","spoutId",")",";","\n","}","else","{","\n","LOG",".","debug","(","\"Cannot","lock","file","{","}","as","its","already","locked",".","Spout","=","{","}","\",","fileToLock,","spoutId",")",";","\n","return","null",";","\n","}","\n","}","catch","(","IOException","e",")","{","\n","LOG",".","error","(","\"Error","when","acquiring","lock","on","file","\"","+","fileToLock","+","\"","Spout","=","\"","+","spoutId,","e",")",";","\n","throw","e",";","\n","}","\n"],"docstring_tokens":["returns","lock","on","file","or","null","if","file","is","already","locked"]}
{"code_tokens":["\n","public","static","FileLock","takeOwnership","(","FileSystem","fs,","Path","lockFile,","LogEntry","lastEntry,","String","spoutId",")","\n","throws","IOException","{","\n","try","{","\n","if","(","fs","instanceof","DistributedFileSystem",")","{","\n","if","(","!","(","(","DistributedFileSystem",")","fs",")",".","recoverLease","(","lockFile",")",")","{","\n","LOG",".","warn","(","\n","\"Unable","to","recover","lease","on","lock","file","{","}","right","now",".","Cannot","transfer","ownership",".","Will","need","to","try","later",".","Spout","=","{","}","\",\n","lockFile,","spoutId",")",";","\n","return","null",";","\n","}","\n","}","\n","return","new","FileLock","(","fs,","lockFile,","spoutId,","lastEntry",")",";","\n","}","catch","(","IOException","e",")","{","\n","if","(","e","instanceof","RemoteException\n","&&","(","(","RemoteException",")","e",")",".","unwrapRemoteException","(",")","instanceof","AlreadyBeingCreatedException",")","{","\n","LOG",".","warn","(","\n","\"Lock","file","\"","+","lockFile","+","\"is","currently","open",".","Cannot","transfer","ownership","now",".","Will","need","to","try","later",".","Spout=","\"\n","+","spoutId,\n","e",")",";","\n","return","null",";","\n","}","else","{","//","unexpected","error\n","LOG",".","warn","(","\"Cannot","transfer","ownership","now","for","lock","file","\"","+","lockFile","+","\"",".","Will","need","to","try","later",".","Spout","=\"","+","spoutId,","e",")",";","\n","throw","e",";","\n","}","\n","}","\n"],"docstring_tokens":["Takes","ownership","of","the","lock","file","if","possible"]}
{"code_tokens":["\n","public","void","release","(",")","throws","IOException","{","\n","lockFileStream",".","close","(",")",";","\n","if","(","!fs",".","delete","(","lockFile,","false",")",")","{","\n","LOG",".","warn","(","\"Unable","to","delete","lock","file,","Spout","=","{","}","\",","componentId",")",";","\n","throw","new","IOException","(","\"Unable","to","delete","lock","file\"",")",";","\n","}","\n","LOG",".","debug","(","\"Released","lock","file","{","}",".","Spout","{","}","\",","lockFile,","componentId",")",";","\n"],"docstring_tokens":["Release","lock","by","deleting","file"]}
{"code_tokens":["\n","public","static","String","getNumaIdForPort","(","Integer","port,","Map<String,","Object>","supervisorConf",")","{","\n","Map<String,","Object>","validatedNumaMap","=","getNumaMap","(","supervisorConf",")",";","\n","for","(","Map",".","Entry<String,","Object>","numaEntry",":","validatedNumaMap",".","entrySet","(",")",")","{","\n","Map<String,","Object>","numaMap","=","(","Map<String,","Object>",")","numaEntry",".","getValue","(",")",";","\n","List<Integer>","portList","=","(","List<Integer>",")","numaMap",".","get","(","NUMA_PORTS",")",";","\n","if","(","portList",".","contains","(","port",")",")","{","\n","return","numaEntry",".","getKey","(",")",";","\n","}","\n","}","\n","return","null",";","\n"],"docstring_tokens":["getNumaIdForPort","for","a","specific","supervisor"]}
{"code_tokens":["\n","public","static","Set<Integer>","getNumaPorts","(","Map<String,","Object>","supervisorConf",")","{","\n","Set<Integer>","numaPorts","=","new","HashSet<>","(",")",";","\n","Map<String,","Object>","validatedNumaMap","=","getNumaMap","(","supervisorConf",")",";","\n","for","(","Map",".","Entry<String,","Object>","numaEntry",":","validatedNumaMap",".","entrySet","(",")",")","{","\n","Map<String,","Object>","numaMap","=","(","Map<String,","Object>",")","numaEntry",".","getValue","(",")",";","\n","List<Integer>","portList","=","(","List<Integer>",")","numaMap",".","get","(","NUMA_PORTS",")",";","\n","numaPorts",".","addAll","(","portList",")",";","\n","}","\n","return","numaPorts",";","\n"],"docstring_tokens":["gets","the","set","of","all","configured","numa","ports","for","a","specific","supervisor"]}
{"code_tokens":["\n","public","static","Map<String,","Object>","getNumaMap","(","Map<String,","Object>","stormConf",")","{","\n","Object","numa","=","stormConf",".","get","(","DaemonConfig",".","SUPERVISOR_NUMA_META",")",";","\n","if","(","numa","==","null",")","{","\n","return","Collections",".","emptyMap","(",")",";","\n","}","\n","return","(","Map<String,","Object>",")","numa",";","\n"],"docstring_tokens":["Return","supervisor","numa","configuration"]}
{"code_tokens":["\n","public","static","final","BoundCQLStatementMapperBuilder","boundQuery","(","String","cql",")","{","\n","return","new","BoundCQLStatementMapperBuilder","(","cql",")",";","\n"],"docstring_tokens":["Builds","a","new","bound","statement","based","on","the","specified","query"]}
{"code_tokens":["\n","public","static","final","BoundCQLStatementMapperBuilder","boundQuery","(","ContextQuery","field",")","{","\n","return","new","BoundCQLStatementMapperBuilder","(","field",")",";","\n"],"docstring_tokens":["Builds","a","new","bound","statement","identified","by","the","given","field"]}
{"code_tokens":["\n","public","static","final","CQLStatementTupleMapper","async","(","final","CQLStatementBuilder",".",".",".","builders",")","{","\n","return","new","CQLStatementTupleMapper",".","DynamicCQLStatementTupleMapper","(","Arrays",".","asList","(","builders",")",")",";","\n"],"docstring_tokens":["Builds","multiple","statements","which","will","be","executed","asynchronously"]}
{"code_tokens":["\n","public","void","start","(",")","{","\n","if","(","intervalSecs","!=","null",")","{","\n","LOG",".","debug","(","\"starting","log","cleanup","thread","at","interval:","{","}","\",","intervalSecs",")",";","\n\n","logviewerCleanupTimer","=","new","StormTimer","(","\"logviewer-cleanup\",","(","t,","e",")","->","{","\n","LOG",".","error","(","\"Error","when","doing","logs","cleanup\",","e",")",";","\n","Utils",".","exitProcess","(","20,","\"Error","when","doing","log","cleanup\"",")",";","\n","}",")",";","\n\n","logviewerCleanupTimer",".","scheduleRecurring","(","0,","intervalSecs,","this",")",";","\n","}","else","{","\n","LOG",".","warn","(","\"The","interval","for","log","cleanup","is","not","set",".","Skip","starting","log","cleanup","thread",".","\"",")",";","\n","}","\n"],"docstring_tokens":["Start","log","cleanup","thread"]}
{"code_tokens":["\n","@Override\n","public","void","run","(",")","{","\n","int","numFilesCleaned","=","0",";","\n","long","diskSpaceCleaned","=","0L",";","\n","try","(","Timer",".","Context","t","=","cleanupRoutineDuration",".","time","(",")",")","{","\n","final","long","nowMills","=","Time",".","currentTimeMillis","(",")",";","\n","Set<Path>","oldLogDirs","=","selectDirsForCleanup","(","nowMills",")",";","\n\n","final","long","nowSecs","=","TimeUnit",".","MILLISECONDS",".","toSeconds","(","nowMills",")",";","\n","SortedSet<Path>","deadWorkerDirs","=","getDeadWorkerDirs","(","(","int",")","nowSecs,","oldLogDirs",")",";","\n\n","LOG",".","debug","(","\"log","cleanup:","now=","{","}","old","log","dirs","{","}","dead","worker","dirs","{","}","\",","nowSecs,\n","oldLogDirs",".","stream","(",")",".","map","(","p","->","p",".","getFileName","(",")",".","toString","(",")",")",".","collect","(","joining","(","\",\"",")",")",",\n","deadWorkerDirs",".","stream","(",")",".","map","(","p","->","p",".","getFileName","(",")",".","toString","(",")",")",".","collect","(","joining","(","\",\"",")",")",")",";","\n\n","for","(","Path","dir",":","deadWorkerDirs",")","{","\n","Path","path","=","dir",".","toAbsolutePath","(",")",".","normalize","(",")",";","\n","long","sizeInBytes","=","sizeOfDir","(","dir",")",";","\n","LOG",".","info","(","\"Cleaning","up:","Removing","{","}",",","{","}","KB\",","path,","sizeInBytes","*","1e-3",")",";","\n\n","try","{","\n","Utils",".","forceDelete","(","path",".","toString","(",")",")",";","\n","cleanupEmptyTopoDirectory","(","dir",")",";","\n","numFilesCleaned++",";","\n","diskSpaceCleaned","+=","sizeInBytes",";","\n","}","catch","(","Exception","ex",")","{","\n","numFileRemovalExceptions",".","mark","(",")",";","\n","LOG",".","error","(","ex",".","getMessage","(",")",",","ex",")",";","\n","}","\n","}","\n\n","final","List<DeletionMeta>","perWorkerDirCleanupMeta","=","perWorkerDirCleanup","(","maxPerWorkerLogsSizeMb","*","1024","*","1024",")",";","\n","numFilesCleaned","+=","perWorkerDirCleanupMeta",".","stream","(",")",".","mapToInt","(","meta","->","meta",".","deletedFiles",")",".","sum","(",")",";","\n","diskSpaceCleaned","+=","perWorkerDirCleanupMeta",".","stream","(",")",".","mapToLong","(","meta","->","meta",".","deletedSize",")",".","sum","(",")",";","\n","final","DeletionMeta","globalLogCleanupMeta","=","globalLogCleanup","(","maxSumWorkerLogsSizeMb","*","1024","*","1024",")",";","\n","numFilesCleaned","+=","globalLogCleanupMeta",".","deletedFiles",";","\n","diskSpaceCleaned","+=","globalLogCleanupMeta",".","deletedSize",";","\n","}","catch","(","Exception","ex",")","{","\n","numCleanupExceptions",".","mark","(",")",";","\n","LOG",".","error","(","\"Exception","while","cleaning","up","old","log",".","\",","ex",")",";","\n","}","\n","numFilesCleanedUp",".","update","(","numFilesCleaned",")",";","\n","diskSpaceFreed",".","update","(","diskSpaceCleaned",")",";","\n"],"docstring_tokens":["Delete","old","log","dirs","for","which","the","workers","are","no","longer","alive"]}
{"code_tokens":["\n","@VisibleForTesting\n","List<DeletionMeta>","perWorkerDirCleanup","(","long","size",")","{","\n","return","workerLogs",".","getAllWorkerDirs","(",")",".","stream","(",")","\n",".","map","(","Unchecked",".","function","(","dir","->\n","directoryCleaner",".","deleteOldestWhileTooLarge","(","Collections",".","singletonList","(","dir",")",",","size,","true,","null",")",")",")","\n",".","collect","(","toList","(",")",")",";","\n"],"docstring_tokens":["Delete","the","oldest","files","in","each","overloaded","worker","log","dir"]}
{"code_tokens":["\n","@VisibleForTesting\n","DeletionMeta","globalLogCleanup","(","long","size",")","throws","Exception","{","\n","List<Path>","workerDirs","=","new","ArrayList<>","(","workerLogs",".","getAllWorkerDirs","(",")",")",";","\n","Set<Path>","aliveWorkerDirs","=","workerLogs",".","getAliveWorkerDirs","(",")",";","\n\n","return","directoryCleaner",".","deleteOldestWhileTooLarge","(","workerDirs,","size,","false,","aliveWorkerDirs",")",";","\n"],"docstring_tokens":["Delete","the","oldest","files","in","overloaded","worker-artifacts","globally"]}
{"code_tokens":["\n","@VisibleForTesting\n","void","cleanupEmptyTopoDirectory","(","Path","dir",")","throws","IOException","{","\n","Path","topoDir","=","dir",".","getParent","(",")",";","\n","try","(","Stream<Path>","topoDirContent","=","Files",".","list","(","topoDir",")",")","{","\n","if","(","!topoDirContent",".","findAny","(",")",".","isPresent","(",")",")","{","\n","Utils",".","forceDelete","(","topoDir",".","toAbsolutePath","(",")",".","normalize","(",")",".","toString","(",")",")",";","\n","}","\n","}","\n"],"docstring_tokens":["Delete","the","topo","dir","if","it","contains","zero","port","dirs"]}
{"code_tokens":["\n","public","void","notify","(","long","count",")","{","\n","currentBucket",".","addAndGet","(","count",")",";","\n"],"docstring_tokens":["Notify","the","tracker","upon","new","arrivals"]}
{"code_tokens":["\n","public","static","<T>","AsyncExecutor","getLocal","(","Session","session,","AsyncResultHandler<T>","handler",")","{","\n","AsyncExecutor<T>","executor","=","localAsyncExecutor",".","<T>get","(",")",";","\n","if","(","executor","==","null",")","{","\n","localAsyncExecutor",".","set","(","executor","=","new","AsyncExecutor<>","(","session,","handler",")",")",";","\n","}","\n","return","executor",";","\n"],"docstring_tokens":["Returns","a","new","AsyncExecutor","per","storm","executor"]}
{"code_tokens":["\n","public","static","SortedMap<String,","?>","pullConfig","(","Map<String,","Object>","topoConf,\n","String","section",")","throws","IOException","{","\n","Configuration","configuration","=","ClientAuthUtils",".","getConfiguration","(","topoConf",")",";","\n","AppConfigurationEntry[]","configurationEntries","=","ClientAuthUtils",".","getEntries","(","configuration,","section",")",";","\n\n","if","(","configurationEntries","==","null",")","{","\n","return","null",";","\n","}","\n\n","TreeMap<String,","Object>","results","=","new","TreeMap<>","(",")",";","\n\n","for","(","AppConfigurationEntry","entry",":","configurationEntries",")","{","\n","Map<String,","?>","options","=","entry",".","getOptions","(",")",";","\n","for","(","String","key",":","options",".","keySet","(",")",")","{","\n","results",".","put","(","key,","options",".","get","(","key",")",")",";","\n","}","\n","}","\n\n","return","results",";","\n"],"docstring_tokens":["Pull","a","set","of","keys","out","of","a","Configuration"]}
{"code_tokens":["\n","public","static","String","get","(","Map<String,","Object>","topoConf,","String","section,","String","key",")","throws","IOException","{","\n","Configuration","configuration","=","ClientAuthUtils",".","getConfiguration","(","topoConf",")",";","\n","return","get","(","configuration,","section,","key",")",";","\n"],"docstring_tokens":["Pull","a","the","value","given","section","and","key","from","Configuration"]}
{"code_tokens":["\n","public","static","WorkerToken","readWorkerToken","(","Map<String,","String>","credentials,","WorkerTokenServiceType","type",")","{","\n","WorkerToken","ret","=","null",";","\n","String","key","=","workerTokenCredentialsKey","(","type",")",";","\n","String","tokenStr","=","credentials",".","get","(","key",")",";","\n","if","(","tokenStr","!=","null",")","{","\n","ret","=","Utils",".","deserializeFromString","(","tokenStr,","WorkerToken",".","class",")",";","\n","}","\n","return","ret",";","\n"],"docstring_tokens":["Read","a","WorkerToken","out","of","credentials","for","the","given","type"]}
{"code_tokens":["\n","public","static","void","setWorkerToken","(","Map<String,","String>","credentials,","WorkerToken","token",")","{","\n","String","key","=","workerTokenCredentialsKey","(","token",".","get_serviceType","(",")",")",";","\n","credentials",".","put","(","key,","Utils",".","serializeToString","(","token",")",")",";","\n"],"docstring_tokens":["Store","a","worker","token","in","some","credentials"]}
{"code_tokens":["\n","public","static","WorkerToken","findWorkerToken","(","Subject","subject,","final","WorkerTokenServiceType","type",")","{","\n","Set<WorkerToken>","creds","=","subject",".","getPrivateCredentials","(","WorkerToken",".","class",")",";","\n","synchronized","(","creds",")","{","\n","return","creds",".","stream","(",")","\n",".","filter","(","(","wt",")","->\n","wt",".","get_serviceType","(",")","==","type",")","\n",".","findAny","(",")",".","orElse","(","null",")",";","\n","}","\n"],"docstring_tokens":["Find","a","worker","token","in","a","given","subject","with","a","given","token","type"]}
{"code_tokens":["\n","public","static","void","updateSubject","(","Subject","subject,","Collection<IAutoCredentials>","autos,","Map<String,","String>","credentials",")","{","\n","if","(","subject","==","null","||","autos","==","null",")","{","\n","throw","new","RuntimeException","(","\"The","subject","or","auto","credentials","cannot","be","null","when","updating","a","subject","with","credentials\"",")",";","\n","}","\n\n","try","{","\n","for","(","IAutoCredentials","autoCred",":","autos",")","{","\n","autoCred",".","updateSubject","(","subject,","credentials",")",";","\n","}","\n","}","catch","(","Exception","e",")","{","\n","throw","new","RuntimeException","(","e",")",";","\n","}","\n","insertWorkerTokens","(","subject,","credentials",")",";","\n"],"docstring_tokens":["Update","a","subject","from","credentials","using","the","IAutoCredentials"]}
{"code_tokens":["\n","public","boolean","isAuthorizedLogUser","(","String","user,","String","fileName",")","{","\n","Validate",".","isTrue","(","!fileName",".","contains","(","\"",".",".","\"","+","FileSystems",".","getDefault","(",")",".","getSeparator","(",")",")",")",";","\n","if","(","StringUtils",".","isEmpty","(","user",")","||","StringUtils",".","isEmpty","(","fileName",")",")","{","\n","return","false",";","\n","}","\n","LogUserGroupWhitelist","whitelist","=","getLogUserGroupWhitelist","(","fileName",")",";","\n\n","List<String>","logsUsers","=","new","ArrayList<>","(",")",";","\n","logsUsers",".","addAll","(","ObjectReader",".","getStrings","(","stormConf",".","get","(","DaemonConfig",".","LOGS_USERS",")",")",")",";","\n","logsUsers",".","addAll","(","ObjectReader",".","getStrings","(","stormConf",".","get","(","Config",".","NIMBUS_ADMINS",")",")",")",";","\n","if","(","whitelist","!=","null",")","{","\n","logsUsers",".","addAll","(","whitelist",".","getUserWhitelist","(",")",")",";","\n","}","\n\n","List<String>","logsGroups","=","new","ArrayList<>","(",")",";","\n","logsGroups",".","addAll","(","ObjectReader",".","getStrings","(","stormConf",".","get","(","DaemonConfig",".","LOGS_GROUPS",")",")",")",";","\n","logsGroups",".","addAll","(","ObjectReader",".","getStrings","(","stormConf",".","get","(","Config",".","NIMBUS_ADMINS_GROUPS",")",")",")",";","\n","if","(","whitelist","!=","null",")","{","\n","logsGroups",".","addAll","(","whitelist",".","getGroupWhitelist","(",")",")",";","\n","}","\n\n","String","userName","=","principalToLocal",".","toLocal","(","user",")",";","\n","Set<String>","groups","=","getUserGroups","(","userName",")",";","\n\n","return","logsUsers",".","stream","(",")",".","anyMatch","(","u","->","u",".","equals","(","userName",")",")","\n","||","Sets",".","intersection","(","groups,","new","HashSet<>","(","logsGroups",")",")",".","size","(",")",">","0",";","\n\n"],"docstring_tokens":["Checks","whether","user","is","authorized","to","access","file"]}
{"code_tokens":["\n","public","LogUserGroupWhitelist","getLogUserGroupWhitelist","(","String","fileName",")","{","\n","File","wlFile","=","ServerConfigUtils",".","getLogMetaDataFile","(","fileName",")",";","\n","Map<String,","Object>","map","=","(","Map<String,","Object>",")","Utils",".","readYamlFile","(","wlFile",".","getAbsolutePath","(",")",")",";","\n\n","if","(","map","==","null",")","{","\n","return","null",";","\n","}","\n\n","List<String>","logsUsers","=","ObjectReader",".","getStrings","(","map",".","get","(","DaemonConfig",".","LOGS_USERS",")",")",";","\n","List<String>","logsGroups","=","ObjectReader",".","getStrings","(","map",".","get","(","DaemonConfig",".","LOGS_GROUPS",")",")",";","\n","return","new","LogUserGroupWhitelist","(","\n","logsUsers",".","isEmpty","(",")","?","new","HashSet<>","(",")",":","new","HashSet<>","(","logsUsers",")",",\n","logsGroups",".","isEmpty","(",")","?","new","HashSet<>","(",")",":","new","HashSet<>","(","logsGroups",")","\n",")",";","\n"],"docstring_tokens":["Get","the","whitelist","of","users","and","groups","for","given","file"]}
{"code_tokens":["\n","private","int","getCheckpointInputTaskCount","(","TopologyContext","context",")","{","\n","int","count","=","0",";","\n","for","(","GlobalStreamId","inputStream",":","context",".","getThisSources","(",")",".","keySet","(",")",")","{","\n","if","(","CHECKPOINT_STREAM_ID",".","equals","(","inputStream",".","get_streamId","(",")",")",")","{","\n","count","+=","context",".","getComponentTasks","(","inputStream",".","get_componentId","(",")",")",".","size","(",")",";","\n","}","\n","}","\n","return","count",";","\n"],"docstring_tokens":["returns","the","total","number","of","input","checkpoint","streams","across","all","input","tasks","to","this","component"]}
{"code_tokens":["\n","private","void","processCheckpoint","(","Tuple","input",")","{","\n","CheckPointState",".","Action","action","=","(","CheckPointState",".","Action",")","input",".","getValueByField","(","CHECKPOINT_FIELD_ACTION",")",";","\n","long","txid","=","input",".","getLongByField","(","CHECKPOINT_FIELD_TXID",")",";","\n","if","(","shouldProcessTransaction","(","action,","txid",")",")","{","\n","LOG",".","debug","(","\"Processing","action","{","}",",","txid","{","}","\",","action,","txid",")",";","\n","try","{","\n","if","(","txid",">=","lastTxid",")","{","\n","handleCheckpoint","(","input,","action,","txid",")",";","\n","if","(","action","==","ROLLBACK",")","{","\n","lastTxid","=","txid","-","1",";","\n","}","else","{","\n","lastTxid","=","txid",";","\n","}","\n","}","else","{","\n","LOG",".","debug","(","\"Ignoring","old","transaction",".","Action","{","}",",","txid","{","}","\",","action,","txid",")",";","\n","collector",".","ack","(","input",")",";","\n","}","\n","}","catch","(","Throwable","th",")","{","\n","LOG",".","error","(","\"Got","error","while","processing","checkpoint","tuple\",","th",")",";","\n","collector",".","fail","(","input",")",";","\n","collector",".","reportError","(","th",")",";","\n","}","\n","}","else","{","\n","LOG",".","debug","(","\"Waiting","for","action","{","}",",","txid","{","}","from","all","input","tasks",".","checkPointInputTaskCount","{","}",",","\"\n","+","\"transactionRequestCount","{","}","\",","action,","txid,","checkPointInputTaskCount,","transactionRequestCount",")",";","\n","collector",".","ack","(","input",")",";","\n","}","\n"],"docstring_tokens":["Invokes","handleCheckpoint","once","checkpoint","tuple","is","received","on","all","input","checkpoint","streams","to","this","component"]}
{"code_tokens":["\n","public","static","Io",".","Builder<GraphMLIo>","graphml","(",")","{","\n","return","GraphMLIo",".","build","(",")",";","\n"],"docstring_tokens":["Creates","a","basic","GraphML-based","Io.Builder"]}
{"code_tokens":["\n","public","static","Io",".","Builder<GraphSONIo>","graphson","(",")","{","\n","return","GraphSONIo",".","build","(",")",";","\n"],"docstring_tokens":["Creates","a","basic","GraphSON-based","Io.Builder"]}
{"code_tokens":["\n","public","static","Io",".","Builder<GryoIo>","gryo","(",")","{","\n","return","GryoIo",".","build","(",")",";","\n"],"docstring_tokens":["Creates","a","basic","Gryo-based","Io.Builder"]}
{"code_tokens":["\n","private","static","IdManager<?>","selectIdManager","(","final","Configuration","config,","final","String","configKey,","final","Class<?","extends","Element>","clazz",")","{","\n","final","String","vertexIdManagerConfigValue","=","config",".","getString","(","configKey,","DefaultIdManager",".","ANY",".","name","(",")",")",";","\n","try","{","\n","return","DefaultIdManager",".","valueOf","(","vertexIdManagerConfigValue",")",";","\n","}","catch","(","IllegalArgumentException","iae",")","{","\n","try","{","\n","return","(","IdManager",")","Class",".","forName","(","vertexIdManagerConfigValue",")",".","newInstance","(",")",";","\n","}","catch","(","Exception","ex",")","{","\n","throw","new","IllegalStateException","(","String",".","format","(","\"Could","not","configure","TinkerGraph","%s","id","manager","with","%s\",","clazz",".","getSimpleName","(",")",",","vertexIdManagerConfigValue",")",")",";","\n","}","\n","}","\n"],"docstring_tokens":["Construct","an","TinkerGraph.IdManager","from","the","TinkerGraph","Configuration"]}
{"code_tokens":["\n","public","static","PythonTranslator","of","(","final","String","traversalSource,","final","TypeTranslator","typeTranslator",")","{","\n","return","new","PythonTranslator","(","traversalSource,","typeTranslator",")",";","\n"],"docstring_tokens":["Creates","the","translator","with","a","custom","TypeTranslator","instance"]}
{"code_tokens":["\n","public","static","StarGraph","open","(",")","{","\n","return","new","StarGraph","(",")",";","\n"],"docstring_tokens":["Creates","an","empty","StarGraph"]}
{"code_tokens":["\n","public","static","StarGraph","of","(","final","Vertex","vertex",")","{","\n","if","(","vertex","instanceof","StarVertex",")","return","(","StarGraph",")","vertex",".","graph","(",")",";","\n","//","else","convert","to","a","star","graph\n","final","StarGraph","starGraph","=","new","StarGraph","(",")",";","\n","final","StarVertex","starVertex","=","(","StarVertex",")","starGraph",".","addVertex","(","T",".","id,","vertex",".","id","(",")",",","T",".","label,","vertex",".","label","(",")",")",";","\n\n","final","boolean","supportsMetaProperties","=","vertex",".","graph","(",")",".","features","(",")",".","vertex","(",")",".","supportsMetaProperties","(",")",";","\n\n","vertex",".","properties","(",")",".","forEachRemaining","(","vp","->","{","\n","final","VertexProperty<?>","starVertexProperty","=","starVertex",".","property","(","VertexProperty",".","Cardinality",".","list,","vp",".","key","(",")",",","vp",".","value","(",")",",","T",".","id,","vp",".","id","(",")",")",";","\n","if","(","supportsMetaProperties",")","\n","vp",".","properties","(",")",".","forEachRemaining","(","p","->","starVertexProperty",".","property","(","p",".","key","(",")",",","p",".","value","(",")",")",")",";","\n","}",")",";","\n","vertex",".","edges","(","Direction",".","IN",")",".","forEachRemaining","(","edge","->","{","\n","final","Edge","starEdge","=","starVertex",".","addInEdge","(","edge",".","label","(",")",",","starGraph",".","addVertex","(","T",".","id,","edge",".","outVertex","(",")",".","id","(",")",")",",","T",".","id,","edge",".","id","(",")",")",";","\n","edge",".","properties","(",")",".","forEachRemaining","(","p","->","starEdge",".","property","(","p",".","key","(",")",",","p",".","value","(",")",")",")",";","\n","}",")",";","\n\n","vertex",".","edges","(","Direction",".","OUT",")",".","forEachRemaining","(","edge","->","{","\n","final","Edge","starEdge","=","starVertex",".","addOutEdge","(","edge",".","label","(",")",",","starGraph",".","addVertex","(","T",".","id,","edge",".","inVertex","(",")",".","id","(",")",")",",","T",".","id,","edge",".","id","(",")",")",";","\n","edge",".","properties","(",")",".","forEachRemaining","(","p","->","starEdge",".","property","(","p",".","key","(",")",",","p",".","value","(",")",")",")",";","\n","}",")",";","\n","return","starGraph",";","\n"],"docstring_tokens":["Creates","a","new","StarGraph","from","a","Vertex"]}
{"code_tokens":["\n","@Override\n","public","void","readWrite","(",")","{","\n","throw","new","UnsupportedOperationException","(","\"Remote","transaction","behaviors","are","not","auto-managed","-","they","are","always","manually","controlled\"",")",";","\n"],"docstring_tokens":["This","Transaction","implementation","is","not","auto-managed","and","therefore","this","method","is","not","supported"]}
{"code_tokens":["\n","@Override\n","public","void","addTransactionListener","(","final","Consumer<Status>","listener",")","{","\n","throw","new","UnsupportedOperationException","(","\"Remote","transactions","cannot","have","listeners","attached\"",")",";","\n"],"docstring_tokens":["There","is","no","support","for","remote","transaction","listeners"]}
{"code_tokens":["\n","public","Service","get","(","final","String","service,","final","boolean","isStart,","final","Map","params",")","{","\n","if","(","service","==","null","||","service",".","equals","(","DirectoryService",".","NAME",")",")","\n","return","this",";","\n\n","checkRegisteredService","(","service",")",";","\n","return","services",".","get","(","service",")",".","createService","(","isStart,","params",")",";","\n"],"docstring_tokens":["Lookup","a","service","by","name"]}
{"code_tokens":["\n","protected","String","describe","(","final","ServiceFactory","service",")","{","\n","final","Map","description","=","new","LinkedHashMap","(",")",";","\n","description",".","put","(","\"name\",","service",".","getName","(",")",")",";","\n","final","Map<Type,Set<TraverserRequirement>>","types","=","new","LinkedHashMap<>","(",")",";","\n","for","(","Type","type",":","(","Set<Type>",")","service",".","getSupportedTypes","(",")",")","{","\n","types",".","put","(","type,","service",".","getRequirements","(","type",")",")",";","\n","}","\n","description",".","put","(","\"type:[requirements]:\",","types",")",";","\n","description",".","put","(","\"params\",","service",".","describeParams","(",")",")",";","\n\n","final","ObjectMapper","om","=","new","ObjectMapper","(",")",";","\n","try","{","\n","return","om",".","writeValueAsString","(","description",")",";","\n","}","catch","(","JsonProcessingException","ex",")","{","\n","return","description",".","toString","(",")",";","\n","}","\n"],"docstring_tokens":["Provide","a","service","description","for","the","supplied","service"]}
{"code_tokens":["\n","public","<R>","R","detach","(","final","R","attached",")","{","\n","return","(","R",")","detachment",".","detach","(","attached",")",";","\n"],"docstring_tokens":["Applies","the","appropriate","detach","operation","to","elements","that","will","be","raised","in","mutation","events"]}
{"code_tokens":["\n","public","static","DetachedVertex",".","Builder","build","(",")","{","\n","return","new","Builder","(","new","DetachedVertex","(",")",")",";","\n"],"docstring_tokens":["Provides","a","way","to","construct","an","immutable","DetachedVertex"]}
{"code_tokens":["\n","public","void","add","(","final","Result","result",")","{","\n","this",".","resultLinkedBlockingQueue",".","offer","(","result",")",";","\n","tryDrainNextWaiting","(","false",")",";","\n"],"docstring_tokens":["Adds","a","Result","to","the","queue","which","will","be","later","read","by","the","ResultSet"]}
{"code_tokens":["\n","private","void","drainAllWaiting","(",")","{","\n","while","(","!waiting",".","isEmpty","(",")",")","{","\n","tryDrainNextWaiting","(","true",")",";","\n","}","\n"],"docstring_tokens":["Completes","all","remaining","futures"]}
{"code_tokens":["\n","@Override\n","public","boolean","submitTask","(","final","SessionTask","sessionTask",")","throws","RejectedExecutionException","{","\n","throw","new","UnsupportedOperationException","(","\"SingleWorker","doesn't","accept","tasks","beyond","the","one","provided","to","the","constructor\"",")",";","\n"],"docstring_tokens":["This","implementation","only","take","a","single","SessionTask","on","construction","-","no","additional","tasks","can","be","submitted"]}
{"code_tokens":["\n","@Override\n","public","synchronized","void","close","(",")","{","\n","//","already","closing/closed\n","if","(","!sessions",".","containsKey","(","sessionId",")",")","return",";","\n\n","sessions",".","remove","(","sessionId",")",";","\n\n","if","(","sessionCancelFuture",".","get","(",")","!=","null",")","{","\n","final","ScheduledFuture<?>","f","=","sessionCancelFuture",".","get","(",")",";","\n","if","(","!f",".","isDone","(",")",")","f",".","cancel","(","true",")",";","\n","}","\n"],"docstring_tokens":["Removes","the","session","from","the","session","list","and","cancels","the","future","that","manages","the","lifetime","of","the","session"]}
{"code_tokens":["\n","protected","Iterator<?>","fromScript","(","final","SessionTask","sessionTask,","final","String","script",")","throws","Exception","{","\n","final","RequestMessage","msg","=","sessionTask",".","getRequestMessage","(",")",";","\n","final","Map<String,","Object>","args","=","msg",".","getArgs","(",")",";","\n","final","String","language","=","args",".","containsKey","(","Tokens",".","ARGS_LANGUAGE",")","?","(","String",")","args",".","get","(","Tokens",".","ARGS_LANGUAGE",")",":","\"gremlin-groovy\"",";","\n","return","IteratorUtils",".","asIterator","(","getScriptEngine","(","sessionTask,","language",")",".","eval","(","\n","script,","mergeBindingsFromRequest","(","sessionTask,","getWorkerBindings","(",")",")",")",")",";","\n"],"docstring_tokens":["Constructs","an","Iterator","from","the","results","of","a","script","evaluation","provided","in","the","SessionTask"]}
{"code_tokens":["\n","protected","void","handleIterator","(","final","SessionTask","sessionTask,","final","Iterator<?>","itty",")","throws","InterruptedException","{","\n","final","ChannelHandlerContext","nettyContext","=","sessionTask",".","getChannelHandlerContext","(",")",";","\n","final","RequestMessage","msg","=","sessionTask",".","getRequestMessage","(",")",";","\n","final","Settings","settings","=","sessionTask",".","getSettings","(",")",";","\n","boolean","warnOnce","=","false",";","\n\n","//","sessionless","requests","are","always","transaction","managed,","but","in-session","requests","are","configurable",".","\n","final","boolean","managedTransactionsForRequest","=","transactionManaged","?\n","true",":","(","Boolean",")","msg",".","getArgs","(",")",".","getOrDefault","(","Tokens",".","ARGS_MANAGE_TRANSACTION,","false",")",";","\n\n","//","we","have","an","empty","iterator","-","happens","on","stuff","like:","g",".","V","(",")",".","iterate","(",")","\n","if","(","!itty",".","hasNext","(",")",")","{","\n","final","Map<String,","Object>","attributes","=","generateStatusAttributes","(","sessionTask,ResponseStatusCode",".","NO_CONTENT,","itty",")",";","\n","//","as","there","is","nothing","left","to","iterate","if","we","are","transaction","managed","then","we","should","execute","a\n","//","commit","here","before","we","send","back","a","NO_CONTENT","which","implies","success\n","if","(","managedTransactionsForRequest",")","\n","closeTransaction","(","sessionTask,","Transaction",".","Status",".","COMMIT",")",";","\n\n","sessionTask",".","writeAndFlush","(","ResponseMessage",".","build","(","msg",")","\n",".","code","(","ResponseStatusCode",".","NO_CONTENT",")","\n",".","statusAttributes","(","attributes",")","\n",".","create","(",")",")",";","\n","return",";","\n","}","\n\n","//","the","batch","size","can","be","overridden","by","the","request\n","final","int","resultIterationBatchSize","=","(","Integer",")","msg",".","optionalArgs","(","Tokens",".","ARGS_BATCH_SIZE",")","\n",".","orElse","(","settings",".","resultIterationBatchSize",")",";","\n","List<Object>","aggregate","=","new","ArrayList<>","(","resultIterationBatchSize",")",";","\n\n","//","use","an","external","control","to","manage","the","loop","as","opposed","to","just","checking","hasNext","(",")","in","the","while",".","this\n","//","prevent","situations","where","auto","transactions","create","a","new","transaction","after","calls","to","commit","(",")","withing\n","//","the","loop","on","calls","to","hasNext","(",")",".","\n","boolean","hasMore","=","itty",".","hasNext","(",")",";","\n\n","while","(","hasMore",")","{","\n","if","(","Thread",".","interrupted","(",")",")","throw","new","InterruptedException","(",")",";","\n\n","//","check","if","an","implementation","needs","to","force","flush","the","aggregated","results","before","the","iteration","batch\n","//","size","is","reached",".","\n","//","todo:","what","implementation","does","this?!","can","we","kill","it","going","forward","-","seems","always","false\n","//","final","boolean","forceFlush","=","isForceFlushed","(","nettyContext,","msg,","itty",")",";","\n","final","boolean","forceFlush","=","false",";","\n\n","//","have","to","check","the","aggregate","size","because","it","is","possible","that","the","channel","is","not","writeable","(","below",")","\n","//","so","iterating","next","(",")","if","the","message","is","not","written","and","flushed","would","bump","the","aggregate","size","beyond\n","//","the","expected","resultIterationBatchSize",".","Total","serialization","time","for","the","response","remains","in\n","//","effect","so","if","the","client","is","\"slow\"","it","may","simply","timeout",".","\n","//\n","//","there","is","a","need","to","check","hasNext","(",")","on","the","iterator","because","if","the","channel","is","not","writeable","the\n","//","previous","pass","through","the","while","loop","will","have","next","(",")","'d","the","iterator","and","if","it","is","\"done\"","then","a\n","//","NoSuchElementException","will","raise","its","head",".","also","need","a","check","to","ensure","that","this","iteration","doesn't\n","//","require","a","forced","flush","which","can","be","forced","by","sub-classes",".","\n","//\n","//","this","could","be","placed","inside","the","isWriteable","(",")","portion","of","the","if-then","below","but","it","seems","better","to\n","//","allow","iteration","to","continue","into","a","batch","if","that","is","possible","rather","than","just","doing","nothing","at","all\n","//","while","waiting","for","the","client","to","catch","up\n","if","(","aggregate",".","size","(",")","<","resultIterationBatchSize","&&","itty",".","hasNext","(",")","&&","!forceFlush",")","aggregate",".","add","(","itty",".","next","(",")",")",";","\n\n","//","send","back","a","page","of","results","if","batch","size","is","met","or","if","it's","the","end","of","the","results","being","iterated",".","\n","//","also","check","writeability","of","the","channel","to","prevent","OOME","for","slow","clients",".","\n","//\n","//","clients","might","decide","to","close","the","Netty","channel","to","the","server","with","a","CloseWebsocketFrame","after","errors\n","//","like","CorruptedFrameException",".","On","the","server,","although","the","channel","gets","closed,","there","might","be","some\n","//","executor","threads","waiting","for","watermark","to","clear","which","will","not","clear","in","these","cases","since","client","has\n","//","already","given","up","on","these","requests",".","This","leads","to","these","executors","waiting","for","the","client","to","consume\n","//","results","till","the","timeout",".","checking","for","isActive","(",")","should","help","prevent","that",".","\n","if","(","nettyContext",".","channel","(",")",".","isActive","(",")","&&","nettyContext",".","channel","(",")",".","isWritable","(",")",")","{","\n","if","(","forceFlush","||","aggregate",".","size","(",")","==","resultIterationBatchSize","||","!itty",".","hasNext","(",")",")","{","\n","final","ResponseStatusCode","code","=","itty",".","hasNext","(",")","?","ResponseStatusCode",".","PARTIAL_CONTENT",":","ResponseStatusCode",".","SUCCESS",";","\n","Frame","frame","=","null",";","\n","try","{","\n","frame","=","makeFrame","(","sessionTask,","aggregate,","code,","itty",")",";","\n","}","catch","(","Exception","ex",")","{","\n","//","a","frame","may","use","a","Bytebuf","which","is","a","countable","release","-","if","it","does","not","get","written\n","//","downstream","it","needs","to","be","released","here\n","if","(","frame","!=","null",")","frame",".","tryRelease","(",")",";","\n\n","//","exception","is","handled","in","makeFrame","(",")","-","serialization","error","gets","written","back","to","driver\n","//","at","that","point\n","if","(","managedTransactionsForRequest",")","\n","closeTransaction","(","sessionTask,","Transaction",".","Status",".","ROLLBACK",")",";","\n","break",";","\n","}","\n\n","//","track","whether","there","is","anything","left","in","the","iterator","because","it","needs","to","be","accessed","after\n","//","the","transaction","could","be","closed","-","in","that","case","a","call","to","hasNext","(",")","could","open","a","new","transaction\n","//","unintentionally\n","final","boolean","moreInIterator","=","itty",".","hasNext","(",")",";","\n\n","try","{","\n","//","only","need","to","reset","the","aggregation","list","if","there's","more","stuff","to","write\n","if","(","moreInIterator",")","\n","aggregate","=","new","ArrayList<>","(","resultIterationBatchSize",")",";","\n","else","{","\n","//","iteration","and","serialization","are","both","complete","which","means","this","finished","successfully",".","note","that\n","//","errors","internal","to","script","eval","or","timeout","will","rollback","given","GremlinServer's","global","configurations",".","\n","//","local","errors","will","get","rolledback","below","because","the","exceptions","aren't","thrown","in","those","cases","to","be\n","//","caught","by","the","GremlinExecutor","for","global","rollback","logic",".","this","only","needs","to","be","committed","if\n","//","there","are","no","more","items","to","iterate","and","serialization","is","complete\n","if","(","managedTransactionsForRequest",")","\n","closeTransaction","(","sessionTask,","Transaction",".","Status",".","COMMIT",")",";","\n\n","//","exit","the","result","iteration","loop","as","there","are","no","more","results","left",".","using","this","external","control\n","//","because","of","the","above","commit",".","some","graphs","may","open","a","new","transaction","on","the","call","to\n","//","hasNext","(",")","\n","hasMore","=","false",";","\n","}","\n","}","catch","(","Exception","ex",")","{","\n","//","a","frame","may","use","a","Bytebuf","which","is","a","countable","release","-","if","it","does","not","get","written\n","//","downstream","it","needs","to","be","released","here\n","if","(","frame","!=","null",")","frame",".","tryRelease","(",")",";","\n","throw","ex",";","\n","}","\n\n","if","(","!moreInIterator",")","iterateComplete","(","sessionTask,","itty",")",";","\n\n","//","the","flush","is","called","after","the","commit","has","potentially","occurred",".","in","this","way,","if","a","commit","was\n","//","required","then","it","will","be","100%","complete","before","the","client","receives","it",".","the","\"frame\"","at","this","point\n","//","should","have","completely","detached","objects","from","the","transaction","(","i",".","e",".","serialization","has","occurred",")","\n","//","so","a","new","one","should","not","be","opened","on","the","flush","down","the","netty","pipeline\n","sessionTask",".","writeAndFlush","(","code,","frame",")",";","\n","}","\n","}","else","{","\n","//","don't","keep","triggering","this","warning","over","and","over","again","for","the","same","request\n","if","(","!warnOnce",")","{","\n","logger",".","warn","(","\"Pausing","response","writing","as","writeBufferHighWaterMark","exceeded","on","{","}","-","writing","will","continue","once","client","has","caught","up\",","msg",")",";","\n","warnOnce","=","true",";","\n","}","\n\n","//","since","the","client","is","lagging","we","can","hold","here","for","a","period","of","time","for","the","client","to","catch","up",".","\n","//","this","isn't","blocking","the","IO","thread","-","just","a","worker",".","\n","TimeUnit",".","MILLISECONDS",".","sleep","(","10",")",";","\n","}","\n","}","\n"],"docstring_tokens":["Provides","a","generic","way","of","iterating","a","result","set","back","to","the","client"]}
{"code_tokens":["\n","protected","void","handleGraphOperation","(","final","SessionTask","sessionTask,","final","Bytecode","bytecode,","final","Graph","graph",")","throws","Exception","{","\n","final","RequestMessage","msg","=","sessionTask",".","getRequestMessage","(",")",";","\n","if","(","graph",".","features","(",")",".","graph","(",")",".","supportsTransactions","(",")",")","{","\n","if","(","TX_COMMIT",".","equals","(","bytecode",")","||","TX_ROLLBACK",".","equals","(","bytecode",")",")","{","\n","final","boolean","commit","=","TX_COMMIT",".","equals","(","bytecode",")",";","\n","closeTransaction","(","sessionTask,","commit","?","Transaction",".","Status",".","COMMIT",":","Transaction",".","Status",".","ROLLBACK",")",";","\n\n","//","write","back","a","no-op","for","success\n","final","Map<String,","Object>","attributes","=","generateStatusAttributes","(","sessionTask,\n","ResponseStatusCode",".","NO_CONTENT,","Collections",".","emptyIterator","(",")",")",";","\n","sessionTask",".","writeAndFlush","(","ResponseMessage",".","build","(","msg",")","\n",".","code","(","ResponseStatusCode",".","NO_CONTENT",")","\n",".","statusAttributes","(","attributes",")","\n",".","create","(",")",")",";","\n","}","else","{","\n","throw","new","IllegalStateException","(","String",".","format","(","\n","\"Bytecode","in","request","is","not","a","recognized","graph","operation:","%s\",","bytecode",".","toString","(",")",")",")",";","\n","}","\n","}","\n"],"docstring_tokens":["If","Bytecode","is","detected","to","contain","a","GraphOp","then","it","gets","processed","by","this","method"]}
{"code_tokens":["\n","public","void","reset","(",")","{","\n","internalReset","(",")",";","\n","getContext","(",")",".","getBindings","(","ScriptContext",".","ENGINE_SCOPE",")",".","clear","(",")",";","\n"],"docstring_tokens":["Resets","the","entire","GremlinGroovyScriptEngine","by","clearing","script","caches,","recreating","the","classloader,","clearing","bindings"]}
{"code_tokens":["\n","@Override\n","public","Bindings","createBindings","(",")","{","\n","return","new","SimpleBindings","(",")",";","\n"],"docstring_tokens":["Create","bindings","to","be","used","by","this","ScriptEngine"]}
{"code_tokens":["\n","public","long","getClassCacheLoadFailureCount","(",")","{","\n","//","don't","use","classMap",".","stats","(",")",".","loadFailureCount","(",")","because","the","load","mechanism","always","succeeds","with","a","future\n","//","that","will","in","turn","contain","the","success","or","failure\n","return","failedCompilationCount",".","longValue","(",")",";","\n"],"docstring_tokens":["Gets","the","total","number","of","times","the","cache","lookup","method","failed","to","compile","a","new","script"]}
{"code_tokens":["\n","public","double","getClassCacheLoadFailureRate","(",")","{","\n","//","don't","use","classMap",".","stats","(",")",".","loadFailureRate","(",")","because","the","load","mechanism","always","succeeds","with","a","future\n","//","that","will","in","turn","contain","the","success","or","failure\n","long","totalLoadCount","=","classMap",".","stats","(",")",".","loadCount","(",")",";","\n","return","(","totalLoadCount","==","0",")","\n","?","0",".","0\n",":","(","double",")","failedCompilationCount",".","longValue","(",")","/","totalLoadCount",";","\n"],"docstring_tokens":["Gets","the","ratio","of","script","compilation","attempts","that","failed"]}
{"code_tokens":["\n","public","long","getClassCacheLoadSuccessCount","(",")","{","\n","//","don't","use","classMap",".","stats","(",")",".","loadSuccessCount","(",")","because","the","load","mechanism","always","succeeds","with","a","future\n","//","that","will","in","turn","contain","the","success","or","failure\n","return","classMap",".","stats","(",")",".","loadCount","(",")","-","failedCompilationCount",".","longValue","(",")",";","\n"],"docstring_tokens":["Gets","the","total","number","of","times","the","cache","lookup","method","succeeded","to","compile","a","new","script"]}
{"code_tokens":["\n","public","boolean","isStart","(",")","{","\n","return","isStart",";","\n"],"docstring_tokens":["Determines","if","this","is","a","start","step"]}
{"code_tokens":["\n","public","static","Io",".","Builder<GraphSONIo>","build","(",")","{","\n","return","build","(","GraphSONVersion",".","V3_0",")",";","\n"],"docstring_tokens":["Create","a","new","builder","using","the","default","version","of","GraphSON","-","v3"]}
{"code_tokens":["\n","@Override\n","public","void","setup","(","final","Map<String,Object>","config",")","{","\n","AllowList","allowList",";","\n","final","String","file","=","(","String",")","config",".","get","(","KEY_AUTHORIZATION_ALLOWLIST",")",";","\n\n","try","{","\n","allowList","=","AllowList",".","read","(","file",")",";","\n","}","catch","(","Exception","e",")","{","\n","throw","new","IllegalArgumentException","(","String",".","format","(","\"Failed","to","read","list","with","allowed","users","from","%s\",","file",")",")",";","\n","}","\n","for","(","Map",".","Entry<String,","List<String>>","entry",":","allowList",".","grants",".","entrySet","(",")",")","{","\n","if","(","!entry",".","getKey","(",")",".","equals","(","SANDBOX",")",")","{","\n","usernamesByTraversalSource",".","put","(","entry",".","getKey","(",")",",","new","ArrayList<>","(",")",")",";","\n","}","\n","for","(","final","String","group",":","entry",".","getValue","(",")",")","{","\n","if","(","allowList",".","groups",".","get","(","group",")","==","null",")","{","\n","throw","new","RuntimeException","(","String",".","format","(","\"Group","'%s'","not","defined","in","file","with","allowed","users",".","\",","group",")",")",";","\n","}","\n","if","(","entry",".","getKey","(",")",".","equals","(","SANDBOX",")",")","{","\n","usernamesSandbox",".","addAll","(","allowList",".","groups",".","get","(","group",")",")",";","\n","}","else","{","\n","usernamesByTraversalSource",".","get","(","entry",".","getKey","(",")",")",".","addAll","(","allowList",".","groups",".","get","(","group",")",")",";","\n","}","\n","}","\n","}","\n"],"docstring_tokens":["This","method","is","called","once","upon","system","startup","to","initialize","the","AllowListAuthorizer"]}
{"code_tokens":["\n","public","static","Cluster","open","(",")","{","\n","return","build","(","\"localhost\"",")",".","create","(",")",";","\n"],"docstring_tokens":["Create","a","Cluster","with","all","default","settings","which","will","connect","to","one","contact","point","at","localhost"]}
{"code_tokens":["\n","public","static","Cluster","open","(","final","Configuration","conf",")","{","\n","return","getBuilderFromSettings","(","Settings",".","from","(","conf",")",")",".","create","(",")",";","\n"],"docstring_tokens":["Create","a","Cluster","from","Apache","Configurations"]}
{"code_tokens":["\n","public","static","AnonymousTraversalSource<GraphTraversalSource>","traversal","(",")","{","\n","return","traversal","(","GraphTraversalSource",".","class",")",";","\n"],"docstring_tokens":["Constructs","an","AnonymousTraversalSource","which","will","then","be","configured","to","spawn","a","GraphTraversalSource"]}
{"code_tokens":["\n","public","static","<T","extends","TraversalSource>","AnonymousTraversalSource<T>","traversal","(","final","Class<T>","traversalSourceClass",")","{","\n","return","new","AnonymousTraversalSource<>","(","traversalSourceClass",")",";","\n"],"docstring_tokens":["Constructs","an","AnonymousTraversalSource","which","will","then","be","configured","to","spawn","the","specified","TraversalSource"]}
{"code_tokens":["\n","@Override\n","protected","void","doReadWrite","(",")","{","\n","//","do","nothing\n"],"docstring_tokens":["Threaded","transactions","should","be","open","immediately","upon","creation","so","most","implementations","should","do","nothing","with","this","method"]}
{"code_tokens":["\n","private","static","Class<?>[]","filterSpecifiedTests","(","final","Class<?>[]","allTests",")","{","\n","if","(","null","==","allTests",")","return","null",";","\n\n","Class<?>[]","filteredTests",";","\n","final","String","override","=","System",".","getenv","(",")",".","getOrDefault","(","\"GREMLIN_TESTS\",","\"\"",")",";","\n","if","(","override",".","equals","(","\"\"",")",")","\n","filteredTests","=","allTests",";","\n","else","{","\n","final","List<String>","filters","=","Arrays",".","asList","(","override",".","split","(","\",\"",")",")",";","\n","final","List<Class<?>>","allowed","=","Stream",".","of","(","allTests",")","\n",".","filter","(","c","->","filters",".","contains","(","c",".","getName","(",")",")",")","\n",".","collect","(","Collectors",".","toList","(",")",")",";","\n","filteredTests","=","allowed",".","toArray","(","new","Class<?>[allowed",".","size","(",")","]",")",";","\n","}","\n","return","filteredTests",";","\n"],"docstring_tokens":["Filter","a","list","of","test","classes","through","the","GREMLIN_TESTS","environment","variable","list"]}
{"code_tokens":["\n","public","ResultSet","submit","(","final","String","gremlin",")","{","\n","return","submit","(","gremlin,","RequestOptions",".","EMPTY",")",";","\n"],"docstring_tokens":["Submits","a","Gremlin","script","to","the","server","and","returns","a","ResultSet","once","the","write","of","the","request","is","complete"]}
{"code_tokens":["\n","public","static","GraphTraversal<Vertex,","?>","compile","(","final","Graph","graph,","final","String","sparqlQuery",")","{","\n","return","compile","(","graph",".","traversal","(",")",",","sparqlQuery",")",";","\n"],"docstring_tokens":["Converts","SPARQL","to","a","Gremlin","traversal"]}
{"code_tokens":["\n","public","static","DriverRemoteConnection","using","(","final","Client","client",")","{","\n","return","using","(","client,","DEFAULT_TRAVERSAL_SOURCE",")",";","\n"],"docstring_tokens":["Creates","a","DriverRemoteConnection","using","an","existing","Client","object"]}
{"code_tokens":["\n","Optional<String>","getSessionId","(",")","{","\n","if","(","client","instanceof","Client",".","SessionedClient",")","{","\n","Client",".","SessionedClient","c","=","(","Client",".","SessionedClient",")","client",";","\n","return","Optional",".","of","(","c",".","getSessionId","(",")",")",";","\n","}","\n\n","return","Optional",".","empty","(",")",";","\n"],"docstring_tokens":["If","the","connection","is","bound","to","a","session,","then","get","the","session","identifier","from","it"]}
{"code_tokens":["\n","public","static","Settings","read","(","final","InputStream","stream",")","{","\n","Objects",".","requireNonNull","(","stream",")",";","\n\n","final","Constructor","constructor","=","createDefaultYamlConstructor","(",")",";","\n","final","Yaml","yaml","=","new","Yaml","(","constructor",")",";","\n","return","yaml",".","loadAs","(","stream,","Settings",".","class",")",";","\n"],"docstring_tokens":["Read","configuration","from","a","file","into","a","new","Settings","object"]}
{"code_tokens":["\n","public","SparkGraphComputer","skipPartitioner","(","final","boolean","skip",")","{","\n","return","configure","(","GREMLIN_SPARK_SKIP_PARTITIONER,","skip",")",";","\n"],"docstring_tokens":["Determines","if","the","graph","RDD","should","be","partitioned","or","not"]}
{"code_tokens":["\n","public","static","Io",".","Builder<GryoIo>","build","(",")","{","\n","return","build","(","GryoVersion",".","V3_0",")",";","\n"],"docstring_tokens":["Create","a","new","builder","using","the","default","version","of","Gryo","-","v3"]}
{"code_tokens":["\n","public","static","Io",".","Builder<GryoIo>","build","(","final","GryoVersion","version",")","{","\n","return","new","Builder","(","version",")",";","\n"],"docstring_tokens":["Create","a","new","builder","using","the","specified","version","of","Gryo"]}
{"code_tokens":["\n","public","<S>","GraphTraversal<S,?>","sparql","(","final","String","query",")","{","\n","final","SparqlTraversalSource","clone","=","this",".","withStrategies","(","SparqlStrategy",".","instance","(",")",")",".","clone","(",")",";","\n\n","//","the","inject","(",")","holds","the","sparql","which","the","SparqlStrategy","then","detects","and","converts","to","a","traversal\n","clone",".","bytecode",".","addStep","(","GraphTraversal",".","Symbols",".","inject,","query",")",";","\n","final","GraphTraversal",".","Admin<S,","S>","traversal","=","new","DefaultGraphTraversal","(","clone",")",";","\n","return","traversal",".","addStep","(","new","InjectStep<>","(","traversal,","query",")",")",";","\n"],"docstring_tokens":["The","start","step","for","a","SPARQL","based","traversal","that","accepts","a","string","representation","of","the","query","to","execute"]}
{"code_tokens":["\n","public","static","Builder","build","(","final","GraphSONMapper","mapper",")","{","\n","Builder","builder","=","build","(",")",";","\n\n","builder",".","customModules","=","mapper",".","customModules",";","\n","builder",".","version","=","mapper",".","version",";","\n","builder",".","loadCustomModules","=","mapper",".","loadCustomSerializers",";","\n","builder",".","normalize","=","mapper",".","normalize",";","\n","builder",".","typeInfo","=","mapper",".","typeInfo",";","\n\n","return","builder",";","\n"],"docstring_tokens":["Create","a","new","Builder","from","a","given","GraphSONMapper"]}
{"code_tokens":["\n","public","static","Object[]","getGenericLiteralList","(","final","GremlinParser",".","GenericLiteralListContext","objectLiteralList",")","{","\n","if","(","objectLiteralList","==","null","||","objectLiteralList",".","genericLiteralExpr","(",")","==","null",")","{","\n","return","new","Object[0]",";","\n","}","\n","return","objectLiteralList",".","genericLiteralExpr","(",")",".","genericLiteral","(",")","\n",".","stream","(",")","\n",".","filter","(","Objects::nonNull",")","\n",".","map","(","genericLiteral","->","instance","(",")",".","visitGenericLiteral","(","genericLiteral",")",")","\n",".","toArray","(","Object[]::new",")",";","\n"],"docstring_tokens":["Parse","a","generic","literal","list,","and","return","an","object","array"]}
{"code_tokens":["\n","public","static","TraversalStrategy[]","getTraversalStrategyList","(","final","GremlinParser",".","TraversalStrategyListContext","traversalStrategyListContext,\n","final","DefaultGremlinBaseVisitor<TraversalStrategy>","traversalStrategyVisitor",")","{","\n","if","(","traversalStrategyListContext","==","null","||","traversalStrategyListContext",".","traversalStrategyExpr","(",")","==","null",")","{","\n","return","new","TraversalStrategy[0]",";","\n","}","\n","return","traversalStrategyListContext",".","traversalStrategyExpr","(",")",".","traversalStrategy","(",")","\n",".","stream","(",")","\n",".","filter","(","Objects::nonNull",")","\n",".","map","(","tstrat","->","traversalStrategyVisitor",".","visitTraversalStrategy","(","tstrat",")",")","\n",".","toArray","(","TraversalStrategy[]::new",")",";","\n"],"docstring_tokens":["Parse","a","TraversalStrategy","literal","list","context","and","return","a","string","array"]}
{"code_tokens":["\n","public","boolean","isNoStarts","(",")","{","\n","return","noStarts",";","\n"],"docstring_tokens":["Determines","if","there","is","a","value","to","iterate","from","the","Traversal"]}
{"code_tokens":["\n","@Override\n","public","void","writeGraph","(","final","OutputStream","outputStream,","final","Graph","g",")","throws","IOException","{","\n","final","Map<String,","String>","identifiedVertexKeyTypes","=","this",".","vertexKeyTypes",".","orElseGet","(","(",")","->","GraphMLWriter",".","determineVertexTypes","(","g",")",")",";","\n","final","Map<String,","String>","identifiedEdgeKeyTypes","=","this",".","edgeKeyTypes",".","orElseGet","(","(",")","->","GraphMLWriter",".","determineEdgeTypes","(","g",")",")",";","\n\n","if","(","identifiedEdgeKeyTypes",".","containsKey","(","this",".","edgeLabelKey",")",")","\n","throw","new","IllegalStateException","(","String",".","format","(","\"The","edgeLabelKey","value","of[%s]","conflicts","with","the","name","of","an","existing","property","key","to","be","included","in","the","GraphML\",","this",".","edgeLabelKey",")",")",";","\n","if","(","identifiedVertexKeyTypes",".","containsKey","(","this",".","vertexLabelKey",")",")","\n","throw","new","IllegalStateException","(","String",".","format","(","\"The","vertexLabelKey","value","of[%s]","conflicts","with","the","name","of","an","existing","property","key","to","be","included","in","the","GraphML\",","this",".","vertexLabelKey",")",")",";","\n\n","identifiedEdgeKeyTypes",".","put","(","this",".","edgeLabelKey,","GraphMLTokens",".","STRING",")",";","\n","identifiedVertexKeyTypes",".","put","(","this",".","vertexLabelKey,","GraphMLTokens",".","STRING",")",";","\n\n","try","{","\n","final","XMLStreamWriter","writer",";","\n","writer","=","configureWriter","(","outputStream",")",";","\n\n","writer",".","writeStartDocument","(",")",";","\n","writer",".","writeStartElement","(","GraphMLTokens",".","GRAPHML",")",";","\n","writeXmlNsAndSchema","(","writer",")",";","\n\n","writeTypes","(","identifiedVertexKeyTypes,","identifiedEdgeKeyTypes,","writer",")",";","\n\n","writer",".","writeStartElement","(","GraphMLTokens",".","GRAPH",")",";","\n","writer",".","writeAttribute","(","GraphMLTokens",".","ID,","GraphMLTokens",".","G",")",";","\n","writer",".","writeAttribute","(","GraphMLTokens",".","EDGEDEFAULT,","GraphMLTokens",".","DIRECTED",")",";","\n\n","writeVertices","(","writer,","g",")",";","\n","writeEdges","(","writer,","g",")",";","\n\n","writer",".","writeEndElement","(",")",";","//","graph\n","writer",".","writeEndElement","(",")",";","//","graphml\n","writer",".","writeEndDocument","(",")",";","\n\n","writer",".","flush","(",")",";","\n","writer",".","close","(",")",";","\n","}","catch","(","XMLStreamException","xse",")","{","\n","throw","new","IOException","(","xse",")",";","\n","}","\n"],"docstring_tokens":["Write","the","data","in","a","Graph","to","a","GraphML","OutputStream"]}
{"code_tokens":["\n","public","void","writeValueFlagNull","(","Buffer","buffer",")","{","\n","buffer",".","writeByte","(","VALUE_FLAG_NULL",")",";","\n"],"docstring_tokens":["Writes","a","single","byte","representing","the","null","value_flag"]}
{"code_tokens":["\n","public","void","writeValueFlagNone","(","Buffer","buffer",")","{","\n","buffer",".","writeByte","(","VALUE_FLAG_NONE",")",";","\n"],"docstring_tokens":["Writes","a","single","byte","with","value","0,","representing","an","unset","value_flag"]}
{"code_tokens":["\n","@Override\n","public","<I","extends","InputShim>","StarGraph","read","(","final","KryoShim<I,","?>","kryo,","final","I","input,","final","Class<StarGraph>","clazz",")","{","\n","final","StarGraph","starGraph","=","StarGraph",".","open","(",")",";","\n","input",".","readByte","(",")",";","//","version","field","ignored","for","now","-","for","future","use","with","backward","compatibility\n","starGraph",".","edgeProperties","=","kryo",".","readObjectOrNull","(","input,","HashMap",".","class",")",";","\n","starGraph",".","metaProperties","=","kryo",".","readObjectOrNull","(","input,","HashMap",".","class",")",";","\n","starGraph",".","addVertex","(","T",".","id,","kryo",".","readClassAndObject","(","input",")",",","T",".","label,","kryo",".","readObject","(","input,","String",".","class",")",")",";","\n","readEdges","(","kryo,","input,","starGraph,","Direction",".","IN",")",";","\n","readEdges","(","kryo,","input,","starGraph,","Direction",".","OUT",")",";","\n","if","(","kryo",".","readObject","(","input,","Boolean",".","class",")",")","{","\n","final","int","numberOfUniqueKeys","=","kryo",".","readObject","(","input,","Integer",".","class",")",";","\n","for","(","int","i","=","0",";","i","<","numberOfUniqueKeys",";","i++",")","{","\n","final","String","vertexPropertyKey","=","kryo",".","readObject","(","input,","String",".","class",")",";","\n","final","int","numberOfVertexPropertiesWithKey","=","kryo",".","readObject","(","input,","Integer",".","class",")",";","\n","for","(","int","j","=","0",";","j","<","numberOfVertexPropertiesWithKey",";","j++",")","{","\n","final","Object","id","=","kryo",".","readClassAndObject","(","input",")",";","\n","final","Object","value","=","kryo",".","readClassAndObject","(","input",")",";","\n","starGraph",".","starVertex",".","property","(","VertexProperty",".","Cardinality",".","list,","vertexPropertyKey,","value,","T",".","id,","id",")",";","\n","}","\n","}","\n","}","\n","return","this",".","graphFilter",".","hasFilter","(",")","?","starGraph",".","applyGraphFilter","(","this",".","graphFilter",")",".","orElse","(","null",")",":","starGraph",";","\n"],"docstring_tokens":["If","the","returned","StarGraph","is","null,","that","means","that","the","GraphFilter","filtered","the","vertex"]}
{"code_tokens":["\n","public","boolean","isClosed","(",")","{","\n","return","closed",";","\n"],"docstring_tokens":["Determines","if","the","traversal","has","been","fully","iterated","and","resources","released"]}
{"code_tokens":["\n","public","CompletableFuture<Object>","eval","(","final","String","script",")","{","\n","return","eval","(","script,","null,","new","SimpleBindings","(",")",")",";","\n"],"docstring_tokens":["Evaluate","a","script","with","empty","bindings"]}
{"code_tokens":["\n","public","CompletableFuture<Object>","eval","(","final","String","script,","final","Bindings","boundVars",")","{","\n","return","eval","(","script,","null,","boundVars",")",";","\n"],"docstring_tokens":["Evaluate","a","script","with","specified","bindings"]}
{"code_tokens":["\n","public","CompletableFuture<Object>","eval","(","final","String","script,","final","Map<String,","Object>","boundVars",")","{","\n","return","eval","(","script,","null,","new","SimpleBindings","(","boundVars",")",")",";","\n"],"docstring_tokens":["Evaluate","a","script","with","a","Map","of","bindings"]}
{"code_tokens":["\n","public","CompletableFuture<Object>","eval","(","final","String","script,","final","String","language,","final","Bindings","boundVars,","final","LifeCycle","lifeCycle",")","{","\n","final","String","lang","=","Optional",".","ofNullable","(","language",")",".","orElse","(","\"gremlin-groovy\"",")",";","\n\n","if","(","logger",".","isDebugEnabled","(",")",")","{","\n","logger",".","debug","(","\"Preparing","to","evaluate","script","-","{","}","-","in","thread","[","{","}","]\",","script,","Thread",".","currentThread","(",")",".","getName","(",")",")",";","\n","}","\n\n","final","Bindings","bindings","=","new","SimpleBindings","(",")",";","\n","bindings",".","putAll","(","globalBindings",")",";","\n","bindings",".","putAll","(","boundVars",")",";","\n\n","//","override","the","timeout","if","the","lifecycle","has","a","value","assigned",".","if","the","script","contains","with","(","timeout",")","\n","//","options","then","allow","that","value","to","override","what's","provided","on","the","lifecycle\n","final","Optional<Long>","timeoutDefinedInScript","=","GremlinScriptChecker",".","parse","(","script",")",".","getTimeout","(",")",";","\n","final","long","scriptEvalTimeOut","=","timeoutDefinedInScript",".","orElse","(","\n","lifeCycle",".","getEvaluationTimeoutOverride","(",")",".","orElse","(","evaluationTimeout",")",")",";","\n\n","final","CompletableFuture<Object>","evaluationFuture","=","new","CompletableFuture<>","(",")",";","\n","final","FutureTask<Void>","evalFuture","=","new","FutureTask<>","(","(",")","->","{","\n","try","{","\n","lifeCycle",".","getBeforeEval","(",")",".","orElse","(","beforeEval",")",".","accept","(","bindings",")",";","\n\n","logger",".","debug","(","\"Evaluating","script","-","{","}","-","in","thread","[","{","}","]\",","script,","Thread",".","currentThread","(",")",".","getName","(",")",")",";","\n\n","final","Object","o","=","gremlinScriptEngineManager",".","getEngineByName","(","lang",")",".","eval","(","script,","bindings",")",";","\n\n","//","apply","a","transformation","before","sending","back","the","result","-","useful","when","trying","to","force","serialization\n","//","in","the","same","thread","that","the","eval","took","place","given","ThreadLocal","nature","of","graphs","as","well","as","some\n","//","transactional","constraints\n","final","Object","result","=","lifeCycle",".","getTransformResult","(",")",".","isPresent","(",")","?\n","lifeCycle",".","getTransformResult","(",")",".","get","(",")",".","apply","(","o",")",":","o",";","\n\n","//","a","mechanism","for","taking","the","final","result","and","doing","something","with","it","in","the","same","thread,","but\n","//","AFTER","the","eval","and","transform","are","done","and","that","future","completed",".","this","provides","a","final","means\n","//","for","working","with","the","result","in","the","same","thread","as","it","was","eval'd\n","if","(","lifeCycle",".","getWithResult","(",")",".","isPresent","(",")",")","lifeCycle",".","getWithResult","(",")",".","get","(",")",".","accept","(","result",")",";","\n\n","lifeCycle",".","getAfterSuccess","(",")",".","orElse","(","afterSuccess",")",".","accept","(","bindings",")",";","\n\n","//","the","evaluationFuture","must","be","completed","after","all","processing","as","an","exception","in","lifecycle","events\n","//","that","must","raise","as","an","exception","to","the","caller","who","has","the","returned","evaluationFuture",".","in","other","words,\n","//","if","it","occurs","before","this","point,","then","the","handle","(",")","method","won't","be","called","again","if","there","is","an\n","//","exception","that","ends","up","below","trying","to","completeExceptionally","(",")","\n","evaluationFuture",".","complete","(","result",")",";","\n","}","catch","(","Throwable","ex",")","{","\n","final","Throwable","root","=","null","==","ex",".","getCause","(",")","?","ex",":","ExceptionUtils",".","getRootCause","(","ex",")",";","\n\n","//","thread","interruptions","will","typically","come","as","the","result","of","a","timeout,","so","in","those","cases,\n","//","check","for","that","situation","and","convert","to","TimeoutException\n","if","(","root","instanceof","InterruptedException\n","||","root","instanceof","TraversalInterruptedException\n","||","root","instanceof","InterruptedIOException",")","{","\n","lifeCycle",".","getAfterTimeout","(",")",".","orElse","(","afterTimeout",")",".","accept","(","bindings",")",";","\n","evaluationFuture",".","completeExceptionally","(","new","TimeoutException","(","\n","String",".","format","(","\"Evaluation","exceeded","the","configured","'evaluationTimeout'","threshold","of","%s","ms","or","evaluation","was","otherwise","cancelled","directly","for","request","[%s]:","%s\",","scriptEvalTimeOut,","script,","root",".","getMessage","(",")",")",")",")",";","\n","}","else","{","\n","lifeCycle",".","getAfterFailure","(",")",".","orElse","(","afterFailure",")",".","accept","(","bindings,","root",")",";","\n","evaluationFuture",".","completeExceptionally","(","root",")",";","\n","}","\n","}","\n\n","return","null",";","\n","}",")",";","\n\n","final","WeakReference<CompletableFuture<Object>>","evaluationFutureRef","=","new","WeakReference<>","(","evaluationFuture",")",";","\n","final","Future<?>","executionFuture","=","executorService",".","submit","(","evalFuture",")",";","\n","if","(","scriptEvalTimeOut",">","0",")","{","\n","//","Schedule","a","timeout","in","the","thread","pool","for","future","execution\n","final","ScheduledFuture<?>","sf","=","scheduledExecutorService",".","schedule","(","(",")","->","{","\n","if","(","executionFuture",".","cancel","(","true",")",")","{","\n","final","CompletableFuture<Object>","ef","=","evaluationFutureRef",".","get","(",")",";","\n","if","(","ef","!=","null",")","{","\n","ef",".","completeExceptionally","(","new","TimeoutException","(","\n","String",".","format","(","\"Evaluation","exceeded","the","configured","'evaluationTimeout'","threshold","of","%s","ms","or","evaluation","was","otherwise","cancelled","directly","for","request","[%s]\",","scriptEvalTimeOut,","script",")",")",")",";","\n","}","\n","}","\n","}",",","scriptEvalTimeOut,","TimeUnit",".","MILLISECONDS",")",";","\n\n","//","Cancel","the","scheduled","timeout","if","the","eval","future","is","complete","or","the","script","evaluation","failed","with","exception\n","evaluationFuture",".","handleAsync","(","(","v,","t",")","->","{","\n","if","(","!sf",".","isDone","(",")",")","{","\n","logger",".","debug","(","\"Killing","scheduled","timeout","on","script","evaluation","-","{","}","-","as","the","eval","completed","(","possibly","with","exception",")",".","\",","script",")",";","\n","sf",".","cancel","(","true",")",";","\n","}","\n\n","//","no","return","is","necessary","-","nothing","downstream","is","concerned","with","what","happens","in","here\n","return","null",";","\n","}",",","scheduledExecutorService",")",";","\n","}","\n\n","return","evaluationFuture",";","\n"],"docstring_tokens":["Evaluate","a","script","and","allow","for","the","submission","of","alteration","to","the","entire","evaluation","execution","lifecycle"]}
{"code_tokens":["\n","public","Traversal",".","Admin","eval","(","final","Bytecode","bytecode,","final","Bindings","boundVars,","final","String","language,","final","String","traversalSource",")","throws","ScriptException","{","\n","final","String","lang","=","Optional",".","ofNullable","(","language",")",".","orElse","(","\"gremlin-groovy\"",")",";","\n\n","final","Bindings","bindings","=","new","SimpleBindings","(",")",";","\n","bindings",".","putAll","(","globalBindings",")",";","\n","bindings",".","putAll","(","boundVars",")",";","\n\n","return","gremlinScriptEngineManager",".","getEngineByName","(","lang",")",".","eval","(","bytecode,","bindings,","traversalSource",")",";","\n"],"docstring_tokens":["Evaluates","bytecode","with","bindings","for","a","specific","language","into","a","Traversal"]}
{"code_tokens":["\n","@Override\n","public","void","close","(",")","throws","Exception","{","\n","closeAsync","(",")",".","join","(",")",";","\n"],"docstring_tokens":["Executors","are","only","closed","if","they","were","not","supplied","externally","in","the","GremlinExecutor.Builder"]}
{"code_tokens":["\n","public","static","Builder","build","(",")","{","\n","return","new","Builder","(",")",";","\n"],"docstring_tokens":["Create","a","Builder","with","the","gremlin-groovy","ScriptEngine","configured"]}
{"code_tokens":["\n","public","static","NoSuchElementException","instance","(",")","{","\n","return","INSTANCE",";","\n"],"docstring_tokens":["Retrieve","a","singleton,","fast","NoSuchElementException","without","a","stack","trace"]}
{"code_tokens":["\n","public","static","void","validateLabel","(","final","String","label",")","throws","IllegalArgumentException","{","\n","if","(","null","==","label",")","\n","throw","Element",".","Exceptions",".","labelCanNotBeNull","(",")",";","\n","if","(","label",".","isEmpty","(",")",")","\n","throw","Element",".","Exceptions",".","labelCanNotBeEmpty","(",")",";","\n","if","(","Graph",".","Hidden",".","isHidden","(","label",")",")","\n","throw","Element",".","Exceptions",".","labelCanNotBeAHiddenKey","(","label",")",";","\n"],"docstring_tokens":["Determine","whether","the","Element","label","can","be","legally","set"]}
{"code_tokens":["\n","public","static","Result","parse","(","final","String","gremlin",")","{","\n","if","(","gremlin",".","isEmpty","(",")",")","return","EMPTY_RESULT",";","\n\n","//","do","a","cheap","check","for","tokens","we","care","about","-","no","need","to","parse","unless","one","of","these","tokens","is","present","in\n","//","the","string",".","\n","if","(","tokens",".","stream","(",")",".","noneMatch","(","gremlin::contains",")",")","return","EMPTY_RESULT",";","\n\n","//","kill","out","comments/whitespace",".","for","whitespace,","ignoring","the","need","to","keep","string","literals","together","as","that\n","//","isn't","currently","a","requirement\n","final","String","cleanGremlin","=","patternClean",".","matcher","(","gremlin",")",".","replaceAll","(","\"\"",")",";","\n\n","final","Matcher","m","=","patternTimeout",".","matcher","(","cleanGremlin",")",";","\n","if","(","!m",".","find","(",")",")","return","EMPTY_RESULT",";","\n\n","long","l","=","Long",".","parseLong","(","m",".","group","(","1",")",")",";","\n","while","(","m",".","find","(",")",")","{","\n","l","+=","Long",".","parseLong","(","m",".","group","(","1",")",")",";","\n","}","\n\n","return","new","Result","(","l",")",";","\n"],"docstring_tokens":["Parses","a","Gremlin","script","and","extracts","a","Result","containing","properties","that","are","relevant","to","the","checker"]}
{"code_tokens":["\n","public","static","<S,","E>","int","stepIndex","(","final","Step<S,","E>","step,","final","Traversal",".","Admin<?,","?>","traversal",")","{","\n","int","i","=","0",";","\n","for","(","final","Step","s",":","traversal",".","getSteps","(",")",")","{","\n","if","(","s",".","equals","(","step,","true",")",")","\n","return","i",";","\n","i++",";","\n","}","\n","return","-1",";","\n"],"docstring_tokens":["Gets","the","index","of","a","particular","step","in","the","Traversal"]}
{"code_tokens":["\n","public","static","boolean","hasStepOfClass","(","final","Class","stepClass,","final","Traversal",".","Admin<?,","?>","traversal",")","{","\n","for","(","final","Step<?,","?>","step",":","traversal",".","getSteps","(",")",")","{","\n","if","(","step",".","getClass","(",")",".","equals","(","stepClass",")",")","{","\n","return","true",";","\n","}","\n","}","\n","return","false",";","\n"],"docstring_tokens":["Determine","if","the","traversal","has","a","step","of","a","particular","class"]}
{"code_tokens":["\n","public","static","boolean","hasStepOfAssignableClass","(","final","Class","superClass,","final","Traversal",".","Admin<?,","?>","traversal",")","{","\n","for","(","final","Step<?,","?>","step",":","traversal",".","getSteps","(",")",")","{","\n","if","(","superClass",".","isAssignableFrom","(","step",".","getClass","(",")",")",")","{","\n","return","true",";","\n","}","\n","}","\n","return","false",";","\n"],"docstring_tokens":["Determine","if","the","traversal","has","a","step","of","an","assignable","class"]}
{"code_tokens":["\n","public","static","boolean","hasStepOfAssignableClassRecursively","(","final","Class","stepClass,","final","Traversal",".","Admin<?,","?>","traversal",")","{","\n","return","hasStepOfAssignableClassRecursively","(","null,","stepClass,","traversal",")",";","\n"],"docstring_tokens":["Determine","if","the","traversal","has","a","step","of","an","assignable","class","in","the","current","Traversal","and","its","local","and","global","child","traversals"]}
{"code_tokens":["\n","public","static","boolean","hasStepOfAssignableClassRecursively","(","final","Scope","scope,","final","Class","stepClass,","final","Traversal",".","Admin<?,","?>","traversal",")","{","\n","for","(","final","Step<?,","?>","step",":","traversal",".","getSteps","(",")",")","{","\n","if","(","stepClass",".","isAssignableFrom","(","step",".","getClass","(",")",")",")","{","\n","return","true",";","\n","}","\n","if","(","step","instanceof","TraversalParent",")","{","\n","if","(","null","==","scope","||","Scope",".","local",".","equals","(","scope",")",")","{","\n","for","(","final","Traversal",".","Admin<?,","?>","localChild",":","(","(","TraversalParent",")","step",")",".","getLocalChildren","(",")",")","{","\n","if","(","hasStepOfAssignableClassRecursively","(","stepClass,","localChild",")",")","return","true",";","\n","}","\n","}","\n","if","(","null","==","scope","||","Scope",".","global",".","equals","(","scope",")",")","{","\n","for","(","final","Traversal",".","Admin<?,","?>","globalChild",":","(","(","TraversalParent",")","step",")",".","getGlobalChildren","(",")",")","{","\n","if","(","hasStepOfAssignableClassRecursively","(","stepClass,","globalChild",")",")","return","true",";","\n","}","\n","}","\n","}","\n","}","\n","return","false",";","\n"],"docstring_tokens":["Determine","if","the","traversal","has","a","step","of","an","assignable","class","in","the","current","Traversal","and","its","Scope","child","traversals"]}
{"code_tokens":["\n","public","static","boolean","hasStepOfAssignableClassRecursively","(","final","Collection<Class>","stepClasses,","final","Traversal",".","Admin<?,","?>","traversal",")","{","\n","return","hasStepOfAssignableClassRecursively","(","null,","stepClasses,","traversal",")",";","\n"],"docstring_tokens":["Determine","if","the","traversal","has","any","of","the","supplied","steps","of","an","assignable","class","in","the","current","Traversal","and","its","global","or","local","child","traversals"]}
{"code_tokens":["\n","public","static","boolean","hasStepOfAssignableClassRecursively","(","final","Scope","scope,","final","Collection<Class>","stepClasses,","final","Traversal",".","Admin<?,","?>","traversal",")","{","\n","if","(","stepClasses",".","size","(",")","==","1",")","\n","return","hasStepOfAssignableClassRecursively","(","stepClasses",".","iterator","(",")",".","next","(",")",",","traversal",")",";","\n","for","(","final","Step<?,","?>","step",":","traversal",".","getSteps","(",")",")","{","\n","if","(","IteratorUtils",".","anyMatch","(","stepClasses",".","iterator","(",")",",","stepClass","->","stepClass",".","isAssignableFrom","(","step",".","getClass","(",")",")",")",")","{","\n","return","true",";","\n","}","\n","if","(","step","instanceof","TraversalParent",")","{","\n","if","(","null","==","scope","||","Scope",".","local",".","equals","(","scope",")",")","{","\n","for","(","final","Traversal",".","Admin<?,","?>","localChild",":","(","(","TraversalParent",")","step",")",".","getLocalChildren","(",")",")","{","\n","if","(","hasStepOfAssignableClassRecursively","(","stepClasses,","localChild",")",")","return","true",";","\n","}","\n","}","\n","if","(","null","==","scope","||","Scope",".","global",".","equals","(","scope",")",")","{","\n","for","(","final","Traversal",".","Admin<?,","?>","globalChild",":","(","(","TraversalParent",")","step",")",".","getGlobalChildren","(",")",")","{","\n","if","(","hasStepOfAssignableClassRecursively","(","stepClasses,","globalChild",")",")","return","true",";","\n","}","\n","}","\n","}","\n","}","\n","return","false",";","\n"],"docstring_tokens":["Determine","if","the","traversal","has","any","of","the","supplied","steps","of","an","assignable","class","in","the","current","Traversal","and","its","Scope","child","traversals"]}
{"code_tokens":["\n","public","static","boolean","anyStepRecursively","(","final","Predicate<Step>","predicate,","final","Traversal",".","Admin<?,","?>","traversal",")","{","\n","for","(","final","Step<?,","?>","step",":","traversal",".","getSteps","(",")",")","{","\n","if","(","predicate",".","test","(","step",")",")","{","\n","return","true",";","\n","}","\n\n","if","(","step","instanceof","TraversalParent","&&","anyStepRecursively","(","predicate,","(","(","TraversalParent",")","step",")",")",")","{","\n","return","true",";","\n","}","\n","}","\n","return","false",";","\n"],"docstring_tokens":["Determine","if","any","step","in","Traversal","or","its","children","match","the","step","given","the","provided","Predicate"]}
{"code_tokens":["\n","public","static","String","getShortName","(","final","Step","step,","final","int","maxLength",")","{","\n","final","String","name","=","step",".","toString","(",")",";","\n","if","(","name",".","length","(",")",">","maxLength",")","\n","return","name",".","substring","(","0,","maxLength","-","3",")","+","\"",".",".",".","\"",";","\n","return","name",";","\n"],"docstring_tokens":["Returns","the","name","of","step","truncated","to","maxLength"]}
{"code_tokens":["\n","public","String","prettyPrint","(","final","int","maxLineLength",")","{","\n","final","String","originalTraversal","=","\"Original","Traversal\"",";","\n","final","String","finalTraversal","=","\"Final","Traversal\"",";","\n","final","int","maxStrategyColumnLength","=","getStrategyTraversalsAsString","(",")","\n",".","map","(","String::length",")","\n",".","max","(","Comparator",".","naturalOrder","(",")",")","\n",".","orElse","(","15",")",";","\n","final","int","newLineIndent","=","maxStrategyColumnLength","+","10",";","\n","final","int","maxTraversalColumn","=","maxLineLength","-","newLineIndent",";","\n","if","(","maxTraversalColumn","<","1",")","\n","throw","new","IllegalArgumentException","(","\"The","maximum","line","length","is","too","small","to","present","the","\"","+","TraversalExplanation",".","class",".","getSimpleName","(",")","+","\":","\"","+","maxLineLength",")",";","\n","int","largestTraversalColumn","=","getTraversalStepsAsString","(",")","\n",".","map","(","s","->","wordWrap","(","s,","maxTraversalColumn,","newLineIndent",")",")","\n",".","flatMap","(","s","->","Stream",".","of","(","s",".","split","(","\"\\n\"",")",")",")","\n",".","map","(","String::trim",")","\n",".","map","(","s","->","s",".","trim","(",")",".","startsWith","(","\"[\"",")","?","s",":","\"","\"","+","s",")","//","3","indent","on","new","lines\n",".","map","(","String::length",")","\n",".","max","(","Comparator",".","naturalOrder","(",")",")","\n",".","get","(",")",";","\n\n","final","StringBuilder","builder","=","new","StringBuilder","(","\"Traversal","Explanation\\n\"",")",";","\n","for","(","int","i","=","0",";","i","<","(","maxStrategyColumnLength","+","7","+","largestTraversalColumn",")",";","i++",")","{","\n","builder",".","append","(","\"=\"",")",";","\n","}","\n\n","spacing","(","originalTraversal,","maxStrategyColumnLength,","builder",")",";","\n\n","builder",".","append","(","wordWrap","(","getOriginalTraversalAsString","(",")",",","maxTraversalColumn,","newLineIndent",")",")",";","\n","builder",".","append","(","\"\\n\\n\"",")",";","\n\n","final","List<Triplet<String,String,String>>","intermediates","=","this",".","getIntermediates","(",")",".","collect","(","Collectors",".","toList","(",")",")",";","\n","for","(","Triplet<String,String,String>","t",":","intermediates",")","{","\n","builder",".","append","(","t",".","getValue0","(",")",")",";","\n","int","spacesToAdd","=","maxStrategyColumnLength","-","t",".","getValue0","(",")",".","length","(",")","+","1",";","\n","for","(","int","i","=","0",";","i","<","spacesToAdd",";","i++",")","{","\n","builder",".","append","(","\"","\"",")",";","\n","}","\n","builder",".","append","(","\"[\"",")",".","append","(","t",".","getValue1","(",")",".","substring","(","0,","1",")",")",".","append","(","\"]\"",")",";","\n","for","(","int","i","=","0",";","i","<","3",";","i++",")","{","\n","builder",".","append","(","\"","\"",")",";","\n","}","\n","builder",".","append","(","wordWrap","(","t",".","getValue2","(",")",",","maxTraversalColumn,","newLineIndent",")",")",".","append","(","\"\\n\"",")",";","\n","}","\n\n","spacing","(","finalTraversal,","maxStrategyColumnLength,","builder",")",";","\n\n","builder",".","append","(","wordWrap","(","(","intermediates",".","size","(",")",">","0","?\n","intermediates",".","get","(","intermediates",".","size","(",")","-","1",")",".","getValue2","(",")",":\n","getOriginalTraversalAsString","(",")",")",",","maxTraversalColumn,","newLineIndent",")",")",";","\n","return","builder",".","toString","(",")",";","\n"],"docstring_tokens":["A","pretty-print","representation","of","the","traversal","explanation"]}
{"code_tokens":["\n","public","synchronized","CompletableFuture<ServerGremlinExecutor>","start","(",")","throws","Exception","{","\n","if","(","serverStarted","!=","null",")","{","\n","//","server","already","started","-","don't","get","it","rolling","again\n","return","serverStarted",";","\n","}","\n\n","serverStarted","=","new","CompletableFuture<>","(",")",";","\n","final","CompletableFuture<ServerGremlinExecutor>","serverReadyFuture","=","serverStarted",";","\n","try","{","\n","final","ServerBootstrap","b","=","new","ServerBootstrap","(",")",";","\n\n","//","when","high","value","is","reached","then","the","channel","becomes","non-writable","and","stays","like","that","until","the\n","//","low","value","is","so","that","there","is","time","to","recover\n","b",".","childOption","(","ChannelOption",".","WRITE_BUFFER_WATER_MARK,\n","new","WriteBufferWaterMark","(","settings",".","writeBufferLowWaterMark,","settings",".","writeBufferHighWaterMark",")",")",";","\n","b",".","childOption","(","ChannelOption",".","ALLOCATOR,","PooledByteBufAllocator",".","DEFAULT",")",";","\n\n","//","fire","off","any","lifecycle","scripts","that","were","provided","by","the","user",".","hooks","get","initialized","during\n","//","ServerGremlinExecutor","initialization\n","serverGremlinExecutor",".","getHooks","(",")",".","forEach","(","hook","->","{","\n","logger",".","info","(","\"Executing","start","up","{","}","\",","LifeCycleHook",".","class",".","getSimpleName","(",")",")",";","\n","try","{","\n","hook",".","onStartUp","(","new","LifeCycleHook",".","Context","(","logger",")",")",";","\n","}","catch","(","UnsupportedOperationException","uoe",")","{","\n","//","if","the","user","doesn't","implement","onStartUp","the","scriptengine","will","throw\n","//","this","exception",".","it","can","safely","be","ignored",".","\n","}","\n","}",")",";","\n\n","channelizer","=","createChannelizer","(","settings",")",";","\n","channelizer",".","init","(","serverGremlinExecutor",")",";","\n","b",".","group","(","bossGroup,","workerGroup",")","\n",".","childHandler","(","channelizer",")",";","\n","if","(","isEpollEnabled",")","{","\n","b",".","channel","(","EpollServerSocketChannel",".","class",")",";","\n","}","else","{","\n","b",".","channel","(","NioServerSocketChannel",".","class",")",";","\n","}","\n\n","//","bind","to","host/port","and","wait","for","channel","to","be","ready\n","b",".","bind","(","settings",".","host,","settings",".","port",")",".","addListener","(","new","ChannelFutureListener","(",")","{","\n","@Override\n","public","void","operationComplete","(","final","ChannelFuture","channelFuture",")","throws","Exception","{","\n","if","(","channelFuture",".","isSuccess","(",")",")","{","\n","ch","=","channelFuture",".","channel","(",")",";","\n\n","logger",".","info","(","\"Gremlin","Server","configured","with","worker","thread","pool","of","{","}",",","gremlin","pool","of","{","}","and","boss","thread","pool","of","{","}",".","\",\n","settings",".","threadPoolWorker,","settings",".","gremlinPool,","settings",".","threadPoolBoss",")",";","\n","logger",".","info","(","\"Channel","started","at","port","{","}",".","\",","settings",".","port",")",";","\n\n","serverReadyFuture",".","complete","(","serverGremlinExecutor",")",";","\n","}","else","{","\n","serverReadyFuture",".","completeExceptionally","(","new","IOException","(","\n","String",".","format","(","\"Could","not","bind","to","%s","and","%s","-","perhaps","something","else","is","bound","to","that","address",".","\",","settings",".","host,","settings",".","port",")",")",")",";","\n","}","\n","}","\n","}",")",";","\n","}","catch","(","Exception","ex",")","{","\n","logger",".","error","(","\"Gremlin","Server","Error\",","ex",")",";","\n","serverReadyFuture",".","completeExceptionally","(","ex",")",";","\n","}","\n\n","return","serverStarted",";","\n"],"docstring_tokens":["Start","Gremlin","Server","with","Settings","provided","to","the","constructor"]}
{"code_tokens":["\n","public","static","void","cloneElements","(","final","Graph","original,","final","Graph","clone",")","{","\n","original",".","vertices","(",")",".","forEachRemaining","(","v","->","DetachedFactory",".","detach","(","v,","true",")",".","attach","(","Attachable",".","Method",".","create","(","clone",")",")",")",";","\n","original",".","edges","(",")",".","forEachRemaining","(","e","->","DetachedFactory",".","detach","(","e,","true",")",".","attach","(","Attachable",".","Method",".","create","(","clone",")",")",")",";","\n"],"docstring_tokens":["make","a","deep","clone","of","the","graph","elements","that","preserves","ids"]}
{"code_tokens":["\n","public","static","<R>","EmptyTraverser<R>","instance","(",")","{","\n","return","INSTANCE",";","\n"],"docstring_tokens":["The","empty","Traverser","instance"]}
{"code_tokens":["\n","public","static","<T>","Stream<T>","stream","(","final","Iterator<T>","iterator",")","{","\n","return","StreamSupport",".","stream","(","Spliterators",".","spliteratorUnknownSize","(","iterator,","Spliterator",".","IMMUTABLE","|","Spliterator",".","SIZED",")",",","false",")","\n",".","onClose","(","(",")","->","CloseableIterator",".","closeIterator","(","iterator",")",")",";","\n"],"docstring_tokens":["Construct","a","Stream","from","an","Iterator"]}
{"code_tokens":["\n","public","static","Neo4jGraph","open","(","final","Configuration","configuration",")","{","\n","if","(","null","==","configuration",")","throw","Graph",".","Exceptions",".","argumentCanNotBeNull","(","\"configuration\"",")",";","\n","if","(","!configuration",".","containsKey","(","CONFIG_DIRECTORY",")",")","\n","throw","new","IllegalArgumentException","(","String",".","format","(","\"Neo4j","configuration","requires","that","the","%s","be","set\",","CONFIG_DIRECTORY",")",")",";","\n","return","new","Neo4jGraph","(","configuration",")",";","\n"],"docstring_tokens":["Open","a","new","Neo4jGraph","instance"]}
{"code_tokens":["\n","public","static","Neo4jGraph","open","(","final","String","directory",")","{","\n","final","Configuration","config","=","new","BaseConfiguration","(",")",";","\n","config",".","setProperty","(","CONFIG_DIRECTORY,","directory",")",";","\n","return","open","(","config",")",";","\n"],"docstring_tokens":["Construct","a","Neo4jGraph","instance","by","specifying","the","directory","to","create","the","database","in"]}
{"code_tokens":["\n","public","static","Neo4jGraph","open","(","final","Neo4jGraphAPI","baseGraph",")","{","\n","return","new","Neo4jGraph","(","baseGraph,","EMPTY_CONFIGURATION",")",";","\n"],"docstring_tokens":["Construct","a","Neo4jGraph","instance","using","an","existing","Neo4j","raw","instance"]}
{"code_tokens":["\n","public","int","size","(",")","{","\n","return","size",";","\n"],"docstring_tokens":["Returns","the","size","of","the","Iterable"]}
{"code_tokens":["\n","protected","static","boolean","requiresPersistence","(","final","Class<?>","test,","final","String","testMethodName",")","{","\n","return","test","==","GraphTest",".","class","&&","testMethodName",".","equals","(","\"shouldPersistDataOnClose\"",")",";","\n"],"docstring_tokens":["Determines","if","a","test","requires","TinkerGraph","persistence","to","be","configured","with","graph","location","and","format"]}
{"code_tokens":["\n","protected","TinkerGraph",".","DefaultIdManager","selectIdMakerFromTest","(","final","Class<?>","test,","final","String","testMethodName",")","{","\n","if","(","test",".","equals","(","GraphTest",".","class",")",")","{","\n","final","Set<String>","testsThatNeedLongIdManager","=","new","HashSet<String>","(",")","{","{","\n","add","(","\"shouldIterateVerticesWithNumericIdSupportUsingDoubleRepresentation\"",")",";","\n","add","(","\"shouldIterateVerticesWithNumericIdSupportUsingDoubleRepresentations\"",")",";","\n","add","(","\"shouldIterateVerticesWithNumericIdSupportUsingIntegerRepresentation\"",")",";","\n","add","(","\"shouldIterateVerticesWithNumericIdSupportUsingIntegerRepresentations\"",")",";","\n","add","(","\"shouldIterateVerticesWithNumericIdSupportUsingFloatRepresentation\"",")",";","\n","add","(","\"shouldIterateVerticesWithNumericIdSupportUsingFloatRepresentations\"",")",";","\n","add","(","\"shouldIterateVerticesWithNumericIdSupportUsingStringRepresentation\"",")",";","\n","add","(","\"shouldIterateVerticesWithNumericIdSupportUsingStringRepresentations\"",")",";","\n","add","(","\"shouldIterateEdgesWithNumericIdSupportUsingDoubleRepresentation\"",")",";","\n","add","(","\"shouldIterateEdgesWithNumericIdSupportUsingDoubleRepresentations\"",")",";","\n","add","(","\"shouldIterateEdgesWithNumericIdSupportUsingIntegerRepresentation\"",")",";","\n","add","(","\"shouldIterateEdgesWithNumericIdSupportUsingIntegerRepresentations\"",")",";","\n","add","(","\"shouldIterateEdgesWithNumericIdSupportUsingFloatRepresentation\"",")",";","\n","add","(","\"shouldIterateEdgesWithNumericIdSupportUsingFloatRepresentations\"",")",";","\n","add","(","\"shouldIterateEdgesWithNumericIdSupportUsingStringRepresentation\"",")",";","\n","add","(","\"shouldIterateEdgesWithNumericIdSupportUsingStringRepresentations\"",")",";","\n","}","}",";","\n\n","final","Set<String>","testsThatNeedUuidIdManager","=","new","HashSet<String>","(",")","{","{","\n","add","(","\"shouldIterateVerticesWithUuidIdSupportUsingStringRepresentation\"",")",";","\n","add","(","\"shouldIterateVerticesWithUuidIdSupportUsingStringRepresentations\"",")",";","\n","add","(","\"shouldIterateEdgesWithUuidIdSupportUsingStringRepresentation\"",")",";","\n","add","(","\"shouldIterateEdgesWithUuidIdSupportUsingStringRepresentations\"",")",";","\n","}","}",";","\n\n","if","(","testsThatNeedLongIdManager",".","contains","(","testMethodName",")",")","\n","return","TinkerGraph",".","DefaultIdManager",".","LONG",";","\n","else","if","(","testsThatNeedUuidIdManager",".","contains","(","testMethodName",")",")","\n","return","TinkerGraph",".","DefaultIdManager",".","UUID",";","\n","}","else","if","(","test",".","equals","(","IoEdgeTest",".","class",")",")","{","\n","final","Set<String>","testsThatNeedLongIdManager","=","new","HashSet<String>","(",")","{","{","\n","add","(","\"shouldReadWriteEdge[graphson-v1]\"",")",";","\n","add","(","\"shouldReadWriteDetachedEdgeAsReference[graphson-v1]\"",")",";","\n","add","(","\"shouldReadWriteDetachedEdge[graphson-v1]\"",")",";","\n","add","(","\"shouldReadWriteEdge[graphson-v2]\"",")",";","\n","add","(","\"shouldReadWriteDetachedEdgeAsReference[graphson-v2]\"",")",";","\n","add","(","\"shouldReadWriteDetachedEdge[graphson-v2]\"",")",";","\n","}","}",";","\n\n","if","(","testsThatNeedLongIdManager",".","contains","(","testMethodName",")",")","\n","return","TinkerGraph",".","DefaultIdManager",".","LONG",";","\n","}","else","if","(","test",".","equals","(","IoVertexTest",".","class",")",")","{","\n","final","Set<String>","testsThatNeedLongIdManager","=","new","HashSet<String>","(",")","{","{","\n","add","(","\"shouldReadWriteVertexWithBOTHEdges[graphson-v1]\"",")",";","\n","add","(","\"shouldReadWriteVertexWithINEdges[graphson-v1]\"",")",";","\n","add","(","\"shouldReadWriteVertexWithOUTEdges[graphson-v1]\"",")",";","\n","add","(","\"shouldReadWriteVertexNoEdges[graphson-v1]\"",")",";","\n","add","(","\"shouldReadWriteDetachedVertexNoEdges[graphson-v1]\"",")",";","\n","add","(","\"shouldReadWriteDetachedVertexAsReferenceNoEdges[graphson-v1]\"",")",";","\n","add","(","\"shouldReadWriteVertexMultiPropsNoEdges[graphson-v1]\"",")",";","\n","add","(","\"shouldReadWriteVertexWithBOTHEdges[graphson-v2]\"",")",";","\n","add","(","\"shouldReadWriteVertexWithINEdges[graphson-v2]\"",")",";","\n","add","(","\"shouldReadWriteVertexWithOUTEdges[graphson-v2]\"",")",";","\n","add","(","\"shouldReadWriteVertexNoEdges[graphson-v2]\"",")",";","\n","add","(","\"shouldReadWriteDetachedVertexNoEdges[graphson-v2]\"",")",";","\n","add","(","\"shouldReadWriteDetachedVertexAsReferenceNoEdges[graphson-v2]\"",")",";","\n","add","(","\"shouldReadWriteVertexMultiPropsNoEdges[graphson-v2]\"",")",";","\n","}","}",";","\n\n","if","(","testsThatNeedLongIdManager",".","contains","(","testMethodName",")",")","\n","return","TinkerGraph",".","DefaultIdManager",".","LONG",";","\n","}","\n\n","return","TinkerGraph",".","DefaultIdManager",".","ANY",";","\n"],"docstring_tokens":["Some","tests","require","special","configuration","for","TinkerGraph","to","properly","configure","the","id","manager"]}
{"code_tokens":["\n","public","static","Object","indexable","(","final","Object","obj",")","{","\n","return","null","==","obj","?","IndexedNull",".","instance","(",")",":","obj",";","\n"],"docstring_tokens":["Provides","a","way","for","an","index","to","have","a","null","value","as","ConcurrentHashMap","will","not","allow","a","null","key"]}
{"code_tokens":["\n","public","static","synchronized","void","init","(","final","Settings","settings",")","{","\n","if","(","!initialized",")","{","\n","processors",".","values","(",")",".","forEach","(","processor","->","processor",".","init","(","settings",")",")",";","\n","initialized","=","true",";","\n","}","\n"],"docstring_tokens":["Initialize","the","OpLoader","with","server","settings"]}
{"code_tokens":["\n","public","synchronized","CompletableFuture<Void>","closeAsync","(",")","{","\n","if","(","closeFuture",".","get","(",")","!=","null",")","return","closeFuture",".","get","(",")",";","\n\n","logger",".","info","(","\"Signalled","closing","of","connection","pool","on","{","}","with","core","size","of","{","}","\",","host,","minPoolSize",")",";","\n\n","announceAllAvailableConnection","(",")",";","\n","final","CompletableFuture<Void>","future","=","killAvailableConnections","(",")",";","\n","closeFuture",".","set","(","future",")",";","\n\n","return","future",";","\n"],"docstring_tokens":["Permanently","kills","the","pool"]}
{"code_tokens":["\n","public","static","<A","extends","TraversalStrategy>","Iterator<A>","findStrategies","(","final","Bytecode","bytecode,","final","Class<A>","clazz",")","{","\n","return","IteratorUtils",".","map","(","\n","IteratorUtils",".","filter","(","bytecode",".","getSourceInstructions","(",")",".","iterator","(",")",",\n","s","->","s",".","getOperator","(",")",".","equals","(","TraversalSource",".","Symbols",".","withStrategies",")","&&","clazz",".","isAssignableFrom","(","s",".","getArguments","(",")","[0]",".","getClass","(",")",")",")",",\n","os","->","(","A",")","os",".","getArguments","(",")","[0]",")",";","\n"],"docstring_tokens":["Parses","Bytecode","to","find","TraversalStrategy","objects","added","in","the","source","instructions"]}
{"code_tokens":["\n","public","static","boolean","isGraphOperation","(","final","Bytecode","bytecode",")","{","\n","return","Stream",".","of","(","GraphOp",".","values","(",")",")",".","anyMatch","(","op","->","op",".","equals","(","bytecode",")",")",";","\n"],"docstring_tokens":["Checks","if","the","bytecode","is","one","of","the","standard","GraphOp","options"]}
{"code_tokens":["\n","@Override\n","public","Bindings","getBindings","(",")","{","\n","return","globalScope",";","\n"],"docstring_tokens":["Gets","the","bindings","of","the","Bindings","in","global","scope"]}
{"code_tokens":["\n","public","static","DetachedEdge",".","Builder","build","(",")","{","\n","return","new","Builder","(","new","DetachedEdge","(",")",")",";","\n"],"docstring_tokens":["Provides","a","way","to","construct","an","immutable","DetachedEdge"]}
{"code_tokens":["\n","public","Collection<Traverser",".","Admin<S>>","get","(","final","I","k",")","{","\n","final","Collection<Traverser",".","Admin<S>>","c","=","index",".","getCollection","(","k",")",";","\n\n","//","if","remove","(",")","is","called","on","this","class,","then","the","MultiValueMap","*may*","(","javadoc","wasn't","clear\n","//","what","the","expectation","was","-","used","the","word","\"typically\"",")","return","an","empty","list","if","the","last\n","//","item","removed","leaves","the","list","empty",".","i","think","we","want","to","enforce","null","for","TraverserSet\n","//","semantics\n","return","c","!=","null","&&","c",".","isEmpty","(",")","?","null",":","c",";","\n"],"docstring_tokens":["Gets","a","collection","of","Traverser","objects","that","contain","the","specified","value"]}
{"code_tokens":["\n","@Override\n","public","Object","visitTraversalTerminalMethod_explain","(","final","GremlinParser",".","TraversalTerminalMethod_explainContext","ctx",")","{","\n","final","Bytecode","bc","=","this",".","traversal",".","asAdmin","(",")",".","getBytecode","(",")",";","\n","bc",".","addStep","(","\"explain\"",")",";","\n","return","bc",";","\n"],"docstring_tokens":["Traversal","terminal","method","explain","step"]}
{"code_tokens":["\n","@Override\n","public","Object","visitTraversalTerminalMethod_iterate","(","final","GremlinParser",".","TraversalTerminalMethod_iterateContext","ctx",")","{","\n","final","Bytecode","bc","=","this",".","traversal",".","asAdmin","(",")",".","getBytecode","(",")",";","\n","bc",".","addStep","(","\"iterate\"",")",";","\n","return","bc",";","\n"],"docstring_tokens":["Traversal","terminal","method","iterate","step"]}
{"code_tokens":["\n","@Override\n","public","Object","visitTraversalTerminalMethod_hasNext","(","final","GremlinParser",".","TraversalTerminalMethod_hasNextContext","ctx",")","{","\n","final","Bytecode","bc","=","this",".","traversal",".","asAdmin","(",")",".","getBytecode","(",")",";","\n","bc",".","addStep","(","\"hasNext\"",")",";","\n","return","bc",";","\n"],"docstring_tokens":["Traversal","terminal","method","has","next","step"]}
{"code_tokens":["\n","@Override\n","public","Object","visitTraversalTerminalMethod_tryNext","(","final","GremlinParser",".","TraversalTerminalMethod_tryNextContext","ctx",")","{","\n","final","Bytecode","bc","=","this",".","traversal",".","asAdmin","(",")",".","getBytecode","(",")",";","\n","bc",".","addStep","(","\"tryNext\"",")",";","\n","return","bc",";","\n"],"docstring_tokens":["Traversal","terminal","method","try","next","step"]}
{"code_tokens":["\n","@Override\n","public","Object","visitTraversalTerminalMethod_next","(","final","GremlinParser",".","TraversalTerminalMethod_nextContext","ctx",")","{","\n","final","Bytecode","bc","=","this",".","traversal",".","asAdmin","(",")",".","getBytecode","(",")",";","\n","if","(","ctx",".","getChildCount","(",")","==","3",")","{","\n","bc",".","addStep","(","\"next\"",")",";","\n","}","else","{","\n","//","the","3rd","child","is","integer","value\n","final","int","childIndexOfParamaterAmount","=","2",";","\n","bc",".","addStep","(","\"next\",","Integer",".","decode","(","ctx",".","getChild","(","childIndexOfParamaterAmount",")",".","getText","(",")",")",")",";","\n","}","\n\n","return","bc",";","\n"],"docstring_tokens":["Traversal","terminal","method","next","step"]}
{"code_tokens":["\n","@Override\n","public","Object","visitTraversalTerminalMethod_toList","(","final","GremlinParser",".","TraversalTerminalMethod_toListContext","ctx",")","{","\n","final","Bytecode","bc","=","this",".","traversal",".","asAdmin","(",")",".","getBytecode","(",")",";","\n","bc",".","addStep","(","\"toList\"",")",";","\n","return","bc",";","\n"],"docstring_tokens":["Traversal","terminal","method","to","list","step"]}
{"code_tokens":["\n","@Override\n","public","Object","visitTraversalTerminalMethod_toSet","(","final","GremlinParser",".","TraversalTerminalMethod_toSetContext","ctx",")","{","\n","final","Bytecode","bc","=","this",".","traversal",".","asAdmin","(",")",".","getBytecode","(",")",";","\n","bc",".","addStep","(","\"toSet\"",")",";","\n","return","bc",";","\n"],"docstring_tokens":["Traversal","terminal","method","to","set","step"]}
{"code_tokens":["\n","@Override\n","public","Object","visitTraversalTerminalMethod_toBulkSet","(","final","GremlinParser",".","TraversalTerminalMethod_toBulkSetContext","ctx",")","{","\n","final","Bytecode","bc","=","this",".","traversal",".","asAdmin","(",")",".","getBytecode","(",")",";","\n","bc",".","addStep","(","\"toBulkSet\"",")",";","\n","return","bc",";","\n"],"docstring_tokens":["Traversal","terminal","method","to","bulk","set","step"]}
{"code_tokens":["\n","private","Object","getSingleGenericLiteralArgument","(","final","ParseTree","ctx",")","{","\n","final","int","childIndexOfParameterValue","=","2",";","\n\n","return","GenericLiteralVisitor",".","instance","(",")",".","visitGenericLiteral","(","\n","ParseTreeContextCastHelper",".","castChildToGenericLiteral","(","ctx,","childIndexOfParameterValue",")",")",";","\n"],"docstring_tokens":["get","1","generic","literal","argument","from","the","antlr","parse","tree","context,","where","the","arguments","has","the","child","index","of","2"]}
{"code_tokens":["\n","private","Object[]","getDoubleGenericLiteralArgument","(","ParseTree","ctx",")","{","\n","final","int","childIndexOfParameterFirst","=","2",";","\n","final","int","childIndexOfParameterSecond","=","4",";","\n\n","final","Object","first","=","GenericLiteralVisitor",".","instance","(",")",".","visitGenericLiteral","(","\n","ParseTreeContextCastHelper",".","castChildToGenericLiteral","(","ctx,","childIndexOfParameterFirst",")",")",";","\n","final","Object","second","=","GenericLiteralVisitor",".","instance","(",")",".","visitGenericLiteral","(","\n","ParseTreeContextCastHelper",".","castChildToGenericLiteral","(","ctx,","childIndexOfParameterSecond",")",")",";","\n\n","return","new","Object[]","{","first,","second","}",";","\n"],"docstring_tokens":["get","2","generic","literal","arguments","from","the","antlr","parse","tree","context,","where","the","arguments","has","the","child","index","of","2","and","4"]}
{"code_tokens":["\n","public","boolean","contains","(","final","Object","key",")","{","\n","return","this",".","parameters",".","containsKey","(","key",")",";","\n"],"docstring_tokens":["Checks","for","existence","of","key","in","parameter","set"]}
{"code_tokens":["\n","public","boolean","contains","(","final","Object","key,","final","Object","value",")","{","\n","return","this",".","contains","(","key",")","&&","this",".","parameters",".","get","(","key",")",".","contains","(","value",")",";","\n"],"docstring_tokens":["Checks","for","existence","of","a","key","and","value","in","a","parameter","set"]}
{"code_tokens":["\n","public","boolean","isBoundTo","(","final","Channel","channel",")","{","\n","return","channel","==","boundChannel",";","\n"],"docstring_tokens":["Determines","if","the","supplied","Channel","object","is","the","same","as","the","one","bound","to","the","Session"]}
{"code_tokens":["\n","public","CompletableFuture<Void>","allItemsAvailableAsync","(",")","{","\n","//","readCompleted","future","is","always","completed","by","Netty's","event","loop","thread","pool",".","To","avoid","blocking","the","event","loop,\n","//","create","a","new","completion","stage","that","is","completed","by","executor","thread","loop,","when","returning","a","future","outside","the\n","//","client","(","ie","application","code",")",".","\n","return","readCompleted",".","whenCompleteAsync","(","(","s,t",")","->","{","}",",","executor",")",";","\n"],"docstring_tokens":["Returns","a","future","that","will","complete","when","all","items","have","been","returned","from","the","server"]}
{"code_tokens":["\n","public","Result","one","(",")","{","\n","final","List<Result>","results","=","some","(","1",")",".","join","(",")",";","\n\n","assert","results",".","size","(",")","<=","1",";","\n\n","return","results",".","size","(",")","==","1","?","results",".","get","(","0",")",":","null",";","\n"],"docstring_tokens":["Get","the","next","Result","from","the","stream,","blocking","until","one","is","available"]}
{"code_tokens":["\n","public","Stream<Result>","stream","(",")","{","\n","return","StreamSupport",".","stream","(","Spliterators",".","spliteratorUnknownSize","(","iterator","(",")",",\n","Spliterator",".","IMMUTABLE","|","Spliterator",".","SIZED",")",",","false",")",";","\n"],"docstring_tokens":["Stream","items","with","a","blocking","iterator"]}
{"code_tokens":["\n","public","final","Bindings","getAsBindings","(",")","{","\n","final","Bindings","bindings","=","new","SimpleBindings","(",")",";","\n","graphs",".","forEach","(","bindings::put",")",";","\n","traversalSources",".","forEach","(","bindings::put",")",";","\n","return","bindings",";","\n"],"docstring_tokens":["Get","the","Graph","and","TraversalSource","list","as","a","set","of","bindings"]}
{"code_tokens":["\n","public","final","void","rollbackAll","(",")","{","\n","graphs",".","entrySet","(",")",".","forEach","(","e","->","{","\n","final","Graph","graph","=","e",".","getValue","(",")",";","\n","if","(","graph",".","features","(",")",".","graph","(",")",".","supportsTransactions","(",")","&&","graph",".","tx","(",")",".","isOpen","(",")",")","\n","graph",".","tx","(",")",".","rollback","(",")",";","\n","}",")",";","\n"],"docstring_tokens":["Rollback","transactions","across","all","Graph","objects"]}
{"code_tokens":["\n","public","final","void","rollback","(","final","Set<String>","graphSourceNamesToCloseTxOn",")","{","\n","closeTx","(","graphSourceNamesToCloseTxOn,","Transaction",".","Status",".","ROLLBACK",")",";","\n"],"docstring_tokens":["Selectively","rollback","transactions","on","the","specified","graphs","or","the","graphs","of","traversal","sources"]}
{"code_tokens":["\n","public","final","void","commitAll","(",")","{","\n","graphs",".","entrySet","(",")",".","forEach","(","e","->","{","\n","final","Graph","graph","=","e",".","getValue","(",")",";","\n","if","(","graph",".","features","(",")",".","graph","(",")",".","supportsTransactions","(",")","&&","graph",".","tx","(",")",".","isOpen","(",")",")","\n","graph",".","tx","(",")",".","commit","(",")",";","\n","}",")",";","\n"],"docstring_tokens":["Commit","transactions","across","all","Graph","objects"]}
{"code_tokens":["\n","public","final","void","commit","(","final","Set<String>","graphSourceNamesToCloseTxOn",")","{","\n","closeTx","(","graphSourceNamesToCloseTxOn,","Transaction",".","Status",".","COMMIT",")",";","\n"],"docstring_tokens":["Selectively","commit","transactions","on","the","specified","graphs","or","the","graphs","of","traversal","sources"]}
{"code_tokens":["\n","private","void","closeTx","(","final","Set<String>","graphSourceNamesToCloseTxOn,","final","Transaction",".","Status","tx",")","{","\n","final","Set<Graph>","graphsToCloseTxOn","=","new","HashSet<>","(",")",";","\n\n","//","by","the","time","this","method","has","been","called,","it","should","be","validated","that","the","source/graph","is","present",".","\n","//","might","be","possible","that","it","could","have","been","removed","dynamically,","but","that","i'm","not","sure","how","one","would","do\n","//","that","as","of","right","now","unless","they","were","embedded","in","which","case","they'd","need","to","know","what","they","were","doing\n","//","anyway\n","graphSourceNamesToCloseTxOn",".","forEach","(","r","->","{","\n","if","(","graphs",".","containsKey","(","r",")",")","\n","graphsToCloseTxOn",".","add","(","graphs",".","get","(","r",")",")",";","\n","else\n","graphsToCloseTxOn",".","add","(","traversalSources",".","get","(","r",")",".","getGraph","(",")",")",";","\n","}",")",";","\n\n","graphsToCloseTxOn",".","forEach","(","graph","->","{","\n","if","(","graph",".","features","(",")",".","graph","(",")",".","supportsTransactions","(",")","&&","graph",".","tx","(",")",".","isOpen","(",")",")","{","\n","if","(","tx","==","Transaction",".","Status",".","COMMIT",")","\n","graph",".","tx","(",")",".","commit","(",")",";","\n","else\n","graph",".","tx","(",")",".","rollback","(",")",";","\n","}","\n","}",")",";","\n"],"docstring_tokens":["Selectively","close","transactions","on","the","specified","graphs","or","the","graphs","of","traversal","sources"]}
{"code_tokens":["\n","public","GraphTraversal<Vertex,","Vertex>","addV","(",")","{","\n","final","GraphTraversalSource","clone","=","this",".","clone","(",")",";","\n","clone",".","bytecode",".","addStep","(","GraphTraversal",".","Symbols",".","addV",")",";","\n","final","GraphTraversal",".","Admin<Vertex,","Vertex>","traversal","=","new","DefaultGraphTraversal<>","(","clone",")",";","\n","return","traversal",".","addStep","(","new","AddVertexStartStep","(","traversal,","(","String",")","null",")",")",";","\n"],"docstring_tokens":["Spawns","a","GraphTraversal","by","adding","a","vertex","with","the","default","label"]}
{"code_tokens":["\n","public","GraphTraversal<Edge,","Edge>","addE","(","final","String","label",")","{","\n","final","GraphTraversalSource","clone","=","this",".","clone","(",")",";","\n","clone",".","bytecode",".","addStep","(","GraphTraversal",".","Symbols",".","addE,","label",")",";","\n","final","GraphTraversal",".","Admin<Edge,","Edge>","traversal","=","new","DefaultGraphTraversal<>","(","clone",")",";","\n","return","traversal",".","addStep","(","new","AddEdgeStartStep","(","traversal,","label",")",")",";","\n"],"docstring_tokens":["Spawns","a","GraphTraversal","by","adding","an","edge","with","the","specified","label"]}
{"code_tokens":["\n","public","GraphTraversal<Edge,","Edge>","addE","(","final","Traversal<?,","String>","edgeLabelTraversal",")","{","\n","final","GraphTraversalSource","clone","=","this",".","clone","(",")",";","\n","clone",".","bytecode",".","addStep","(","GraphTraversal",".","Symbols",".","addE,","edgeLabelTraversal",")",";","\n","final","GraphTraversal",".","Admin<Edge,","Edge>","traversal","=","new","DefaultGraphTraversal<>","(","clone",")",";","\n","return","traversal",".","addStep","(","new","AddEdgeStartStep","(","traversal,","edgeLabelTraversal",")",")",";","\n"],"docstring_tokens":["Spawns","a","GraphTraversal","by","adding","a","edge","with","a","label","as","specified","by","the","provided","Traversal"]}
{"code_tokens":["\n","public","GraphTraversal<Vertex,","Vertex>","V","(","final","Object",".",".",".","vertexIds",")","{","\n","//","a","single","null","is","[null]\n","final","Object[]","ids","=","null","==","vertexIds","?","new","Object[]","{","null","}",":","vertexIds",";","\n","final","GraphTraversalSource","clone","=","this",".","clone","(",")",";","\n","clone",".","bytecode",".","addStep","(","GraphTraversal",".","Symbols",".","V,","ids",")",";","\n","final","GraphTraversal",".","Admin<Vertex,","Vertex>","traversal","=","new","DefaultGraphTraversal<>","(","clone",")",";","\n","return","traversal",".","addStep","(","new","GraphStep<>","(","traversal,","Vertex",".","class,","true,","ids",")",")",";","\n"],"docstring_tokens":["Spawns","a","GraphTraversal","starting","with","all","vertices","or","some","subset","of","vertices","as","specified","by","their","unique","identifier"]}
{"code_tokens":["\n","public","GraphTraversal<Edge,","Edge>","E","(","final","Object",".",".",".","edgeIds",")","{","\n","//","a","single","null","is","[null]\n","final","Object[]","ids","=","null","==","edgeIds","?","new","Object[]","{","null","}",":","edgeIds",";","\n","final","GraphTraversalSource","clone","=","this",".","clone","(",")",";","\n","clone",".","bytecode",".","addStep","(","GraphTraversal",".","Symbols",".","E,","ids",")",";","\n","final","GraphTraversal",".","Admin<Edge,","Edge>","traversal","=","new","DefaultGraphTraversal<>","(","clone",")",";","\n","return","traversal",".","addStep","(","new","GraphStep<>","(","traversal,","Edge",".","class,","true,","ids",")",")",";","\n"],"docstring_tokens":["Spawns","a","GraphTraversal","starting","with","all","edges","or","some","subset","of","edges","as","specified","by","their","unique","identifier"]}
{"code_tokens":["\n","public","ByteArrayOutputStream","readVertexBytes","(",")","throws","IOException","{","\n","final","ByteArrayOutputStream","stream","=","new","ByteArrayOutputStream","(",")",";","\n","final","LinkedList<Byte>","buffer","=","new","LinkedList<>","(",")",";","\n\n","int","current","=","read","(",")",";","\n","while","(","current",">","-1","&&","(","buffer",".","size","(",")","<","12","||","!isMatch","(","buffer",")",")",")","{","\n","stream",".","write","(","current",")",";","\n\n","current","=","read","(",")",";","\n","if","(","buffer",".","size","(",")",">","11",")","\n","buffer",".","removeFirst","(",")",";","\n\n","buffer",".","addLast","(","(","byte",")","current",")",";","\n","}","\n\n","stream",".","write","(","current",")",";","\n","return","stream",";","\n"],"docstring_tokens":["Read","the","bytes","of","the","next","Vertex","in","the","stream"]}
{"code_tokens":["\n","public","void","addSource","(","final","String","sourceName,","final","Object",".",".",".","arguments",")","{","\n","if","(","sourceName",".","equals","(","TraversalSource",".","Symbols",".","withoutStrategies",")",")","{","\n","if","(","arguments","==","null",")","\n","this",".","sourceInstructions",".","add","(","new","Instruction","(","sourceName,","null",")",")",";","\n","else","{","\n","final","Class<TraversalStrategy>[]","classes","=","new","Class[arguments",".","length]",";","\n","for","(","int","i","=","0",";","i","<","arguments",".","length",";","i++",")","{","\n","classes[i]","=","arguments[i]","instanceof","TraversalStrategyProxy","?\n","(","(","TraversalStrategyProxy",")","arguments[i]",")",".","getStrategyClass","(",")",":\n","(","Class",")","arguments[i]",";","\n","}","\n","this",".","sourceInstructions",".","add","(","new","Instruction","(","sourceName,","classes",")",")",";","\n","}","\n","}","else\n","this",".","sourceInstructions",".","add","(","new","Instruction","(","sourceName,","flattenArguments","(","arguments",")",")",")",";","\n","Bindings",".","clear","(",")",";","\n"],"docstring_tokens":["Add","a","TraversalSource","instruction","to","the","bytecode"]}
{"code_tokens":["\n","public","void","addStep","(","final","String","stepName,","final","Object",".",".",".","arguments",")","{","\n","this",".","stepInstructions",".","add","(","new","Instruction","(","stepName,","flattenArguments","(","arguments",")",")",")",";","\n"],"docstring_tokens":["Add","a","Traversal","instruction","to","the","bytecode"]}
{"code_tokens":["\n","public","static","AllowList","read","(","final","String","file",")","throws","Exception","{","\n","final","InputStream","stream","=","new","FileInputStream","(","new","File","(","file",")",")",";","\n\n","final","Constructor","constructor","=","new","Constructor","(","AllowList",".","class",")",";","\n","final","TypeDescription","allowListDescription","=","new","TypeDescription","(","AllowList",".","class",")",";","\n","allowListDescription",".","putMapPropertyType","(","\"grants\",","String",".","class,","Object",".","class",")",";","\n","allowListDescription",".","putMapPropertyType","(","\"groups\",","String",".","class,","Object",".","class",")",";","\n","constructor",".","addTypeDescription","(","allowListDescription",")",";","\n\n","final","Yaml","yaml","=","new","Yaml","(","constructor",")",";","\n","return","yaml",".","loadAs","(","stream,","AllowList",".","class",")",";","\n"],"docstring_tokens":["Read","a","configuration","from","a","YAML","file","into","an","AllowList","object"]}
{"code_tokens":["\n","public","static","List<String>","parseFlat","(","final","String","featureDir",")","throws","IOException","{","\n","return","parseFlat","(","featureDir,","Collections",".","emptyList","(",")",")",";","\n"],"docstring_tokens":["Parses","features","to","a","List","of","Gremlin","strings"]}
{"code_tokens":["\n	public","void","delete","(",")","\n	","{","\n		item",".","delete","(",")",";","\n	"],"docstring_tokens":["Deletes","temp","file","from","disk"]}
{"code_tokens":["\n	public","byte[]","getDigest","(","String","algorithm",")","\n	","{","\n		try\n		","{","\n			Args",".","notEmpty","(","algorithm,","\"algorithm\"",")",";","\n			MessageDigest","digest","=","java",".","security",".","MessageDigest",".","getInstance","(","algorithm",")",";","\n\n			if","(","item",".","isInMemory","(",")",")","\n			","{","\n				digest",".","update","(","getBytes","(",")",")",";","\n				return","digest",".","digest","(",")",";","\n			","}","\n\n			InputStream","in","=","null",";","\n\n			try\n			","{","\n				in","=","item",".","getInputStream","(",")",";","\n				byte[]","buf","=","new","byte[Math",".","min","(","(","int",")","item",".","getSize","(",")",",","4096","*","10",")","]",";","\n				int","len",";","\n				while","(","-1","!=","(","len","=","in",".","read","(","buf",")",")",")","\n				","{","\n					digest",".","update","(","buf,","0,","len",")",";","\n				","}","\n				return","digest",".","digest","(",")",";","\n			","}","\n			catch","(","IOException","ex",")","\n			","{","\n				throw","new","WicketRuntimeException","(","\"Error","while","reading","input","data","for","\"","+","algorithm","+\n					\"","checksum\",","ex",")",";","\n			","}","\n			finally\n			","{","\n				IOUtils",".","closeQuietly","(","in",")",";","\n			","}","\n		","}","\n		catch","(","NoSuchAlgorithmException","ex",")","\n		","{","\n			String","error","=","String",".","format","(","\n				\"Your","java","runtime","does","not","support","digest","algorithm","[%s]",".","\"\n					+","\"Please","see","java",".","security",".","MessageDigest",".","getInstance","(","\\\"%s\\\"",")","\",","algorithm,\n				algorithm",")",";","\n\n			throw","new","WicketRuntimeException","(","error,","ex",")",";","\n		","}","\n	"],"docstring_tokens":["Get","the","MD5","checksum"]}
{"code_tokens":["\n	public","void","writeTo","(","final","File","file",")","throws","Exception\n	","{","\n		Files",".","remove","(","file",")",";","\n		item",".","write","(","file",")",";","\n	"],"docstring_tokens":["Saves","this","file","upload","to","a","given","file","on","the","server","side"]}
{"code_tokens":["\n	protected","boolean","isLocalOrigin","(","HttpServletRequest","containerRequest,","String","originHeader",")","\n	","{","\n		//","Make","comparable","strings","from","Origin","and","Location\n		String","origin","=","normalizeUri","(","originHeader",")",";","\n		if","(","origin","==","null",")","\n			return","false",";","\n\n		String","request","=","getTargetUriFromRequest","(","containerRequest",")",";","\n		if","(","request","==","null",")","\n			return","false",";","\n\n		return","origin",".","equalsIgnoreCase","(","request",")",";","\n	"],"docstring_tokens":["Checks","whether","the","Origin","HTTP","header","of","the","request","matches","where","the","request","came	","from"]}
{"code_tokens":["\n	protected","final","String","getTargetUriFromRequest","(","HttpServletRequest","request",")","\n	","{","\n		//","Build","scheme://host:port","from","request\n		StringBuilder","target","=","new","StringBuilder","(",")",";","\n		String","scheme","=","request",".","getScheme","(",")",";","\n		if","(","scheme","==","null",")","\n		","{","\n			return","null",";","\n		","}","\n		else\n		","{","\n			scheme","=","scheme",".","toLowerCase","(","Locale",".","ROOT",")",";","\n		","}","\n		target",".","append","(","scheme",")",";","\n		target",".","append","(","\"://\"",")",";","\n\n		String","host","=","request",".","getServerName","(",")",";","\n		if","(","host","==","null",")","\n		","{","\n			return","null",";","\n		","}","\n		target",".","append","(","host",")",";","\n\n		int","port","=","request",".","getServerPort","(",")",";","\n		if","(","\"http\"",".","equals","(","scheme",")","&&","port","!=","80","||","\"https\"",".","equals","(","scheme",")","&&","port","!=","443",")","\n		","{","\n			target",".","append","(","':'",")",";","\n			target",".","append","(","port",")",";","\n		","}","\n\n		return","target",".","toString","(",")",";","\n	"],"docstring_tokens":["Creates","a","RFC-6454","comparable","URI","from","the","request","requested","resource"]}
{"code_tokens":["\n	public","static","Cookie","copyOf","(","Cookie","cookie",")","\n	","{","\n		return","cookie","!=","null","?","(","Cookie",")","cookie",".","clone","(",")",":","null",";","\n	"],"docstring_tokens":["Make","a","copy","of","the","passed","cookie"]}
{"code_tokens":["\n	public","static","Key","keyOf","(","Cookie","cookie",")","\n	","{","\n		return","new","Key","(","cookie",")",";","\n	"],"docstring_tokens":["creates","a","key","based","on","the","property","for","cookie","equality"]}
{"code_tokens":["\n	public","static","boolean","isEqual","(","Cookie","c1,","Cookie","c2",")","\n	","{","\n		Args",".","notNull","(","c1,","\"c1\"",")",";","\n		Args",".","notNull","(","c2,","\"c2\"",")",";","\n\n		return","new","Key","(","c1",")",".","equals","(","new","Key","(","c2",")",")",";","\n	"],"docstring_tokens":["Checks","whether","two","cookies","are","equal"]}
{"code_tokens":["\n	public","TagTester","getChild","(","String","tagName",")","\n	","{","\n		Args",".","notNull","(","tagName,","\"tagName\"",")",";","\n\n		TagTester","childTagTester","=","null",";","\n\n		if","(","openTag",".","isOpen","(",")",")","\n		","{","\n			//","Get","the","content","of","the","tag\n			int","startPos","=","openTag",".","getPos","(",")","+","openTag",".","getLength","(",")",";","\n			int","endPos","=","closeTag",".","getPos","(",")",";","\n			String","markup","=","parser",".","getInput","(","startPos,","endPos",")",".","toString","(",")",";","\n\n			childTagTester","=","createTagByName","(","markup,","tagName",")",";","\n		","}","\n\n		return","childTagTester",";","\n	"],"docstring_tokens":["Checks","if","the","tag","has","a","child","with","the","given","tagName"]}
{"code_tokens":["\n	public","TagTester","getChild","(","String","attribute,","String","value",")","\n	","{","\n		TagTester","childTag","=","null",";","\n\n		if","(","openTag",".","isOpen","(",")",")","\n		","{","\n			//","Generate","the","markup","for","this","tag\n			String","markup","=","getMarkup","(",")",";","\n\n			if","(","Strings",".","isEmpty","(","markup",")","==","false",")","\n			","{","\n				childTag","=","TagTester",".","createTagByAttribute","(","markup,","attribute,","value",")",";","\n			","}","\n		","}","\n\n		return","childTag",";","\n	"],"docstring_tokens":["Gets","a","child","tag","for","testing"]}
{"code_tokens":["\n	public","String","getMarkup","(",")","\n	","{","\n		int","openPos","=","openTag",".","getPos","(",")",";","\n		int","closePos","=","closeTag",".","getPos","(",")","+","closeTag",".","getLength","(",")",";","\n\n		return","parser",".","getInput","(","openPos,","closePos",")",".","toString","(",")",";","\n	"],"docstring_tokens":["Gets","the","markup","for","this","tag"]}
{"code_tokens":["\n	public","String","getValue","(",")","\n	","{","\n		if","(","openTag","==","closeTag",")","\n		","{","\n			return","null",";","\n		","}","\n\n		int","openPos","=","openTag",".","getPos","(",")","+","openTag",".","getLength","(",")",";","\n		int","closePos","=","closeTag",".","getPos","(",")",";","\n\n		return","parser",".","getInput","(","openPos,","closePos",")",".","toString","(",")",";","\n	"],"docstring_tokens":["Returns","the","value","for","this","tag"]}
{"code_tokens":["\n	public","static","List<TagTester>","createTagsByAttribute","(","String","markup,","String","attribute,","String","value,","boolean","stopAfterFirst",")","\n	","{","\n		if","(","Strings",".","isEmpty","(","attribute",")",")","{","\n			return","Collections",".","emptyList","(",")",";","\n		","}","\n		\n		return","createTags","(","markup,","xmlTag","->","Objects",".","equals","(","value,","xmlTag",".","getAttributes","(",")",".","get","(","attribute",")",")",",","stopAfterFirst",")",";","\n	"],"docstring_tokens":["Static","factory","method","for","creating","a","TagTester","based","on","tags","found","by","an	","attribute","with","a","specific","value"]}
{"code_tokens":["\n	protected","CharSequence","getURL","(",")","\n	","{","\n		return","urlForListener","(","new","PageParameters","(",")",")",";","\n	"],"docstring_tokens":["Gets","the","url","to","use","for","this","link"]}
{"code_tokens":["\n	public","Integer","getBehaviorIndex","(",")","\n	","{","\n		return","behaviorIndex",";","\n	"],"docstring_tokens":["Returns","index","of","behavior","this","listener","is","targeted","on","or","null","if","component","is	","the","target"]}
{"code_tokens":["\n	public","static","RequestCycle","get","(",")","\n	","{","\n		return","ThreadContext",".","getRequestCycle","(",")",";","\n	"],"docstring_tokens":["Returns","request","cycle","associated","with","current","thread"]}
{"code_tokens":["\n	@Override\n	public","final","UrlRenderer","getUrlRenderer","(",")","\n	","{","\n		if","(","urlRenderer","==","null",")","\n		","{","\n			urlRenderer","=","newUrlRenderer","(",")",";","\n		","}","\n		return","urlRenderer",";","\n	"],"docstring_tokens":["Returns","UrlRenderer","for","this","RequestCycle"]}
{"code_tokens":["\n	public","boolean","processRequestAndDetach","(",")","\n	","{","\n		boolean","result",";","\n		try\n		","{","\n			result","=","processRequest","(",")",";","\n		","}","\n		finally\n		","{","\n			detach","(",")",";","\n		","}","\n		return","result",";","\n	"],"docstring_tokens":["Convenience","method","that","processes","the","request","and","detaches","the","RequestCycle"]}
{"code_tokens":["\n	private","void","execute","(","IRequestHandler","handler",")","\n	","{","\n		Args",".","notNull","(","handler,","\"handler\"",")",";","\n\n		while","(","handler","!=","null",")","{","\n			try\n			","{","\n				listeners",".","onRequestHandlerResolved","(","this,","handler",")",";","\n				IRequestHandler","next","=","requestHandlerExecutor",".","execute","(","handler",")",";","\n				listeners",".","onRequestHandlerExecuted","(","this,","handler",")",";","\n				\n				handler","=","next",";","\n			","}","\n			catch","(","RuntimeException","e",")","\n			","{","\n				ReplaceHandlerException","replacer","=","Exceptions",".","findCause","(","e,","ReplaceHandlerException",".","class",")",";","\n\n				if","(","replacer","==","null",")","\n				","{","\n					throw","e",";","\n				","}","\n\n				if","(","replacer",".","getRemoveScheduled","(",")",")","\n				","{","\n					requestHandlerExecutor",".","schedule","(","null",")",";","\n				","}","\n\n				handler","=","replacer",".","getReplacementRequestHandler","(",")",";","\n			","}","\n		","}","\n	"],"docstring_tokens":["Execute","a","request","handler","and","notify","registered","IRequestCycleListeners"]}
{"code_tokens":["\n	@Override\n	public","final","<T>","T","getMetaData","(","final","MetaDataKey<T>","key",")","\n	","{","\n		return","key",".","get","(","metaData",")",";","\n	"],"docstring_tokens":["Gets","metadata","for","this","request","cycle","using","the","given","key"]}
{"code_tokens":["\n	public","void","onDetach","(",")","\n	","{","\n		try\n		","{","\n			requestHandlerExecutor",".","detach","(",")",";","\n		","}","\n		catch","(","RuntimeException","exception",")","\n		","{","\n			handleDetachException","(","exception",")",";","\n		","}","\n		finally\n		","{","\n			listeners",".","onDetach","(","this",")",";","\n		","}","\n\n		if","(","Session",".","exists","(",")",")","\n		","{","\n			Session",".","get","(",")",".","detach","(",")",";","\n		","}","\n\n	"],"docstring_tokens":["Called","after","request","processing","is","complete,","usually","takes","care","of","detaching","state"]}
{"code_tokens":["\n	protected","void","onBeginRequest","(",")","\n	","{","\n	"],"docstring_tokens":["Called","when","the","request","cycle","object","is","beginning","its","response"]}
{"code_tokens":["\n	protected","void","onEndRequest","(",")","\n	","{","\n		if","(","Session",".","exists","(",")",")","\n		","{","\n			Session",".","get","(",")",".","endRequest","(",")",";","\n		","}","\n	"],"docstring_tokens":["Called","when","the","request","cycle","object","has","finished","its","response"]}
{"code_tokens":["\n	@SuppressWarnings","(","\"unchecked\"",")","\n	public","<T","extends","IRequestHandler>","Optional<T>","find","(","final","Class<T>","type",")","\n	","{","\n		if","(","type","==","null",")","\n		","{","\n			return","Optional",".","empty","(",")",";","\n		","}","\n\n		IRequestHandler","result","=","getActiveRequestHandler","(",")",";","\n		if","(","type",".","isInstance","(","result",")",")","\n		","{","\n			return","(","Optional<T>",")","Optional",".","of","(","result",")",";","\n		","}","\n		\n		result","=","getRequestHandlerScheduledAfterCurrent","(",")",";","\n		if","(","type",".","isInstance","(","result",")",")","\n		","{","\n			return","(","Optional<T>",")","Optional",".","of","(","result",")",";","\n		","}","\n\n		return","Optional",".","empty","(",")",";","\n	"],"docstring_tokens":["Finds","a","IRequestHandler","which","is","either","the","currently","executing","handler","or","is","scheduled","to","be	","executed"]}
{"code_tokens":["\n	public","void","beforeRender","(","Component","component",")","\n	","{","\n	"],"docstring_tokens":["Called","when","a","component","is","about","to","render"]}
{"code_tokens":["\n	public","void","afterRender","(","Component","component",")","\n	","{","\n	"],"docstring_tokens":["Called","when","a","component","that","has","this","behavior","coupled","was","rendered"]}
{"code_tokens":["\n	public","void","unbind","(","Component","component",")","\n	","{","\n	"],"docstring_tokens":["Notifies","the","behavior","it","is","removed","from","the","specified","component"]}
{"code_tokens":["\n	public","void","detach","(","Component","component",")","\n	","{","\n	"],"docstring_tokens":["Allows","the","behavior","to","detach","any","state","it","has","attached","during","request","processing"]}
{"code_tokens":["\n	public","void","onComponentTag","(","Component","component,","ComponentTag","tag",")","\n	","{","\n	"],"docstring_tokens":["Called","any","time","a","component","that","has","this","behavior","registered","is","rendering","the","component","tag"]}
{"code_tokens":["\n	@Override\n	public","void","onEvent","(","Component","component,","IEvent<?>","event",")","\n	","{","\n	"],"docstring_tokens":["Called","to","notify","the","behavior","about","any","events","sent","to","the","component"]}
{"code_tokens":["\r\n	protected","PageParameters","getPageParameters","(","IRequestHandler","handler",")","\r\n	","{","\r\n		if","(","handler","instanceof","IPageClassRequestHandler",")","\r\n		","{","\r\n			IPageClassRequestHandler","pageHandler","=","(","IPageClassRequestHandler",")","handler",";","\r\n			return","pageHandler",".","getPageParameters","(",")",";","\r\n		","}","\r\n		return","null",";","\r\n	"],"docstring_tokens":["Resolves","page","parameters","from","a","request","handler"]}
{"code_tokens":["\n	private","<C","extends","IRequestablePage>","Constructor<C>","constructor","(","final","Class<C>","pageClass,\n		final","Class<PageParameters>","argumentType",")","\n	","{","\n		//","Get","constructor","for","page","class","from","cache\n		Constructor<C>","constructor","=","(","Constructor<C>",")","constructorForClass",".","get","(","pageClass",")",";","\n\n		//","Need","to","look","up?\n		if","(","constructor","==","null",")","\n		","{","\n			try\n			","{","\n				//","Try","to","find","the","constructor\n				constructor","=","pageClass",".","getDeclaredConstructor","(","new","Class[]","{","argumentType","}",")",";","\n\n				//","Store","it","in","the","cache\n				Constructor<C>","tmpConstructor","=","(","Constructor<C>",")","constructorForClass",".","putIfAbsent","(","pageClass,","constructor",")",";","\n				if","(","tmpConstructor","!=","null",")","\n				","{","\n					constructor","=","tmpConstructor",";","\n				","}","\n\n				log",".","debug","(","\"Found","constructor","for","Page","of","type","'","{","}","'","and","argument","of","type","'","{","}","'",".","\",\n					pageClass,","argumentType",")",";","\n			","}","\n			catch","(","NoSuchMethodException","e",")","\n			","{","\n				log",".","debug","(","\n					\"Page","of","type","'","{","}","'","has","not","visible","constructor","with","an","argument","of","type","'","{","}","'",".","\",\n					pageClass,","argumentType",")",";","\n\n				return","null",";","\n			","}","\n		","}","\n\n		return","constructor",";","\n	"],"docstring_tokens":["Looks","up","a","one-arg","Page","constructor","by","class","and","argument","type"]}
{"code_tokens":["\n	@Override\n	public","Enumeration<String>","getAttributeNames","(",")","\n	","{","\n		return","Collections",".","enumeration","(","attributes",".","keySet","(",")",")",";","\n\n	"],"docstring_tokens":["Get","the","names","of","the","attributes","in","the","session"]}
{"code_tokens":["\n	@Override\n	public","long","getCreationTime","(",")","\n	","{","\n		return","creationTime",";","\n	"],"docstring_tokens":["Get","the","creation","time","of","the","session"]}
{"code_tokens":["\n	@Override\n	public","String","getId","(",")","\n	","{","\n		return","id",";","\n	"],"docstring_tokens":["Return","the","id","of","this","session"]}
{"code_tokens":["\n	@Override\n	public","long","getLastAccessedTime","(",")","\n	","{","\n		return","lastAccessedTime",";","\n	"],"docstring_tokens":["Get","the","time","the","session","was","last","accessed"]}
{"code_tokens":["\n	@Override\n	public","ServletContext","getServletContext","(",")","\n	","{","\n		return","context",";","\n	"],"docstring_tokens":["Return","the","servlet","context","for","the","session"]}
{"code_tokens":["\n	@Override\n	@Deprecated\n	public","String[]","getValueNames","(",")","\n	","{","\n		String[]","result","=","new","String[attributes",".","size","(",")","]",";","\n		return","attributes",".","keySet","(",")",".","toArray","(","result",")",";","\n	"],"docstring_tokens":["Get","the","names","of","the","values","in","the","session"]}
{"code_tokens":["\n	@Override\n	public","boolean","isNew","(",")","\n	","{","\n		return","false",";","\n	"],"docstring_tokens":["Check","if","the","session","is","new"]}
{"code_tokens":["\n	public","void","timestamp","(",")","\n	","{","\n		lastAccessedTime","=","System",".","currentTimeMillis","(",")",";","\n	"],"docstring_tokens":["Set","the","last","accessed","time","for","the","session"]}
{"code_tokens":["\n	public","final","boolean","isTemporary","(",")","\n	","{","\n		return","temporary",";","\n	"],"docstring_tokens":["Indicates","the","state","of","the","session"]}
{"code_tokens":["\n	public","final","void","setTemporary","(","boolean","temporary",")","\n	","{","\n		this",".","temporary","=","temporary",";","\n	"],"docstring_tokens":["Changes","the","state","of","this","session"]}
{"code_tokens":["\n	public","static","byte[]","randomSalt","(",")","\n	","{","\n		//","must","be","8","bytes","-","for","anything","else","PBES1Core","throws\n		//","InvalidAlgorithmParameterException:","Salt","must","be","8","bytes","long","\n		byte[]","salt","=","new","byte[8]",";","\n		new","Random","(",")",".","nextBytes","(","salt",")",";","\n		return","salt",";","\n	"],"docstring_tokens":["Create","a","random","salt","to","be","used","for","this","crypt"]}
{"code_tokens":["\n	public","static","void","check","(",")","\n	","{","\n		if","(","Application",".","get","(",")",".","getDebugSettings","(",")",".","isDevelopmentUtilitiesEnabled","(",")","==","false",")","\n		","{","\n			throw","new","DevelopmentUtilitiesNotEnabledException","(",")",";","\n		","}","\n	"],"docstring_tokens":["Verifies","that","development","utilities","are","enabled"]}
{"code_tokens":["\n	public","void","addFactory","(","final","IFieldValueFactory","factory",")","\n	","{","\n		Args",".","notNull","(","factory,","\"factory\"",")",";","\n\n		delegates",".","add","(","factory",")",";","\n	"],"docstring_tokens":["Adds","a","factory","to","the","compound","factory"]}
{"code_tokens":["\n	public","final","String","getEncoding","(",")","\n	","{","\n		return","encoding",";","\n	"],"docstring_tokens":["Return","the","encoding","used","while","reading","the","markup","file"]}
{"code_tokens":["\n	private","String","determineEncoding","(","final","CharSequence","string",")","\n	","{","\n		//","Does","the","string","match","the","<?xml",".",".","?>","pattern\n		final","Matcher","matcher","=","encodingPattern",".","matcher","(","string",")",";","\n		if","(","!matcher",".","find","(",")",")","\n		","{","\n			//","No\n			return","null",";","\n		","}","\n\n		//","Extract","the","encoding\n		String","encoding","=","matcher",".","group","(","2",")",";","\n		if","(","(","encoding","==","null",")","||","(","encoding",".","length","(",")","==","0",")",")","\n		","{","\n			encoding","=","matcher",".","group","(","3",")",";","\n		","}","\n\n		if","(","encoding","!=","null",")","\n		","{","\n			encoding","=","encoding",".","trim","(",")",";","\n		","}","\n\n		return","encoding",";","\n	"],"docstring_tokens":["Determine","the","encoding","from","the","xml","decl"]}
{"code_tokens":["\n	protected","Form<?>","findForm","(",")","\n	","{","\n		//","try","to","find","form","in","the","hierarchy","of","owning","component\n		Component","component","=","getComponent","(",")",";","\n		if","(","component","instanceof","Form<?>",")","\n		","{","\n			return","(","Form<?>",")","component",";","\n		","}","\n		else\n		","{","\n			return","component",".","findParent","(","Form",".","class",")",";","\n		","}","\n	"],"docstring_tokens":["Finds","form","that","will","be","submitted"]}
{"code_tokens":["\n	protected","boolean","shouldTriggerJavaScriptSubmitEvent","(",")","\n	","{","\n		return","false",";","\n	"],"docstring_tokens":["Controls","whether","or","not","a","JS","submit","should","be","triggered","on","the","submitting","form.	","False","by","default"]}
{"code_tokens":["\n	protected","void","onError","(","AjaxRequestTarget","target",")","\n	","{","\n	"],"docstring_tokens":["Listener","method","invoked","when","the","form","has","been","processed","and","errors","occurred"]}
{"code_tokens":["\n	public","static","AjaxFormSubmitBehavior","onSubmit","(","String","eventName,\n		SerializableConsumer<AjaxRequestTarget>","onSubmit",")","\n	","{","\n		Args",".","notNull","(","onSubmit,","\"onSubmit\"",")",";","\n\n		return","new","AjaxFormSubmitBehavior","(","eventName",")","\n		","{","\n			private","static","final","long","serialVersionUID","=","1L",";","\n\n			@Override\n			protected","void","onSubmit","(","AjaxRequestTarget","target",")","\n			","{","\n				onSubmit",".","accept","(","target",")",";","\n			","}","\n		","}",";","\n	"],"docstring_tokens":["Creates","an","AjaxFormSubmitBehavior","based","on","lambda","expressions"]}
{"code_tokens":["\r\n	@Override\r\n	public","boolean","supportsVersioning","(",")","\r\n	","{","\r\n		return","true",";","\r\n	"],"docstring_tokens":["Pages","are","always","serialized,","so","versioning","is","supported"]}
{"code_tokens":["\r\n	@Override\r\n	public","boolean","canBeAsynchronous","(","IPageContext","context",")","\r\n	","{","\r\n		//","session","data","must","be","added","here","*before*","any","asynchronous","calls\r\n		//","when","session","is","no","longer","available\r\n		getSessionData","(","context",")",";","\r\n\r\n		return","getDelegate","(",")",".","canBeAsynchronous","(","context",")",";","\r\n	"],"docstring_tokens":["Supports","asynchronous","add","if","the","delegate","supports","it"]}
{"code_tokens":["\n	@Override\n	public","void","onComponentTag","(","final","Component","component,","final","ComponentTag","tag",")","\n	","{","\n		if","(","tag",".","isOpenClose","(",")",")","\n		","{","\n			tag",".","setType","(","TagType",".","OPEN",")",";","\n		","}","\n	"],"docstring_tokens":["Make","sure","we","open","up","open-close","tags","to","open-body-close"]}
{"code_tokens":["\r\n	public","static","String","join","(","final","String","separator,","final","List<String>","fragments",")","\r\n	","{","\r\n		if","(","fragments","==","null",")","\r\n		","{","\r\n			return","\"\"",";","\r\n		","}","\r\n		return","join","(","separator,","fragments",".","toArray","(","new","String[0]",")",")",";","\r\n	"],"docstring_tokens":["Joins","string","fragments","using","the","specified","separator"]}
{"code_tokens":["\r\n	public","static","CharSequence","replaceAll","(","final","CharSequence","s,","final","CharSequence","searchFor,\r\n		CharSequence","replaceWith",")","\r\n	","{","\r\n		if","(","s","==","null",")","\r\n		","{","\r\n			return","null",";","\r\n		","}","\r\n\r\n		//","If","searchFor","is","null","or","the","empty","string,","then","there","is","nothing","to\r\n		//","replace,","so","returning","s","is","the","only","option","here",".","\r\n		if","(","(","searchFor","==","null",")","||","searchFor",".","length","(",")","==","0",")","\r\n		","{","\r\n			return","s",";","\r\n		","}","\r\n\r\n		//","If","replaceWith","is","null,","then","the","searchFor","should","be","replaced","with\r\n		//","nothing,","which","can","be","seen","as","the","empty","string",".","\r\n		if","(","replaceWith","==","null",")","\r\n		","{","\r\n			replaceWith","=","\"\"",";","\r\n		","}","\r\n\r\n		String","searchString","=","searchFor",".","toString","(",")",";","\r\n		//","Look","for","first","occurrence","of","searchFor\r\n		int","matchIndex","=","search","(","s,","searchString,","0",")",";","\r\n		if","(","matchIndex","==","-1",")","\r\n		","{","\r\n			//","No","replace","operation","needs","to","happen\r\n			return","s",";","\r\n		","}","\r\n		else\r\n		","{","\r\n			return","s",".","toString","(",")",".","replace","(","searchString,","replaceWith",")",";","\r\n		","}","\r\n	"],"docstring_tokens":["Replace","all","occurrences","of","one","string","replaceWith","another","string"]}
{"code_tokens":["\r\n	public","static","Boolean","toBoolean","(","final","String","s",")","throws","StringValueConversionException\r\n	","{","\r\n		return","isTrue","(","s",")",";","\r\n	"],"docstring_tokens":["Converts","the","string","s","to","a","Boolean"]}
{"code_tokens":["\r\n	public","static","String","toString","(","final","Throwable","throwable",")","\r\n	","{","\r\n		if","(","throwable","!=","null",")","\r\n		","{","\r\n			List<Throwable>","al","=","new","ArrayList<>","(",")",";","\r\n			Throwable","cause","=","throwable",";","\r\n			al",".","add","(","cause",")",";","\r\n			while","(","(","cause",".","getCause","(",")","!=","null",")","&&","(","cause","!=","cause",".","getCause","(",")",")",")","\r\n			","{","\r\n				cause","=","cause",".","getCause","(",")",";","\r\n				al",".","add","(","cause",")",";","\r\n			","}","\r\n\r\n			AppendingStringBuffer","sb","=","new","AppendingStringBuffer","(","256",")",";","\r\n			//","first","print","the","last","cause\r\n			int","length","=","al",".","size","(",")","-","1",";","\r\n			cause","=","al",".","get","(","length",")",";","\r\n			if","(","throwable","instanceof","RuntimeException",")","\r\n			","{","\r\n				sb",".","append","(","\"Message:","\"",")",";","\r\n				sb",".","append","(","throwable",".","getMessage","(",")",")",";","\r\n				sb",".","append","(","\"\\n\\n\"",")",";","\r\n			","}","\r\n			sb",".","append","(","\"Root","cause:\\n\\n\"",")",";","\r\n			outputThrowable","(","cause,","sb,","false",")",";","\r\n\r\n			if","(","length",">","0",")","\r\n			","{","\r\n				sb",".","append","(","\"\\n\\nComplete","stack:\\n\\n\"",")",";","\r\n				for","(","int","i","=","0",";","i","<","length",";","i++",")","\r\n				","{","\r\n					outputThrowable","(","al",".","get","(","i",")",",","sb,","true",")",";","\r\n					sb",".","append","(","'\\n'",")",";","\r\n				","}","\r\n			","}","\r\n			return","sb",".","toString","(",")",";","\r\n		","}","\r\n		else\r\n		","{","\r\n			return","\"<Null","Throwable>\"",";","\r\n		","}","\r\n	"],"docstring_tokens":["Converts","a","Throwable","to","a","string"]}
{"code_tokens":["\n	public","MarkupContainer","addOrReplace","(","final","Component",".",".",".","children",")","\n	","{","\n		for","(","Component","child",":","children",")","\n		","{","\n			Args",".","notNull","(","child,","\"child\"",")",";","\n\n			checkHierarchyChange","(","child",")",";","\n\n			if","(","get","(","child",".","getId","(",")",")","==","null",")","\n			","{","\n				add","(","child",")",";","\n			","}","\n			else\n			","{","\n				replace","(","child",")",";","\n			","}","\n		","}","\n\n		return","this",";","\n	"],"docstring_tokens":["Replaces","a","child","component","of","this","container","with","another","or","just","adds","it","in","case","no","child	","with","the","same","id","existed","yet"]}
{"code_tokens":["\n	public","MarkupContainer","remove","(","final","Component","component",")","\n	","{","\n		checkHierarchyChange","(","component",")",";","\n\n		Args",".","notNull","(","component,","\"component\"",")",";","\n\n		children_remove","(","component",".","getId","(",")",")",";","\n		removedComponent","(","component",")",";","\n\n		return","this",";","\n	"],"docstring_tokens":["Removes","a","component","from","the","children","identified","by","the","component.getId"]}
{"code_tokens":["\n	@Deprecated","(","since","=","\"9",".","10",".","0\",","forRemoval","=","true",")","\n	public","final","void","renderAssociatedMarkup","(","final","String","openTagName,","final","String","exceptionMessage",")","\n	","{","\n		renderAssociatedMarkup","(","openTagName",")",";","\n	"],"docstring_tokens":["Renders","the","entire","associated","markup","for","a","container","such","as","a","Border","or","Panel"]}
{"code_tokens":["\n	public","MarkupContainer","replace","(","final","Component","child",")","\n	","{","\n		Args",".","notNull","(","child,","\"child\"",")",";","\n\n		checkHierarchyChange","(","child",")",";","\n\n		if","(","log",".","isDebugEnabled","(",")",")","\n		","{","\n			log",".","debug","(","\"Replacing","\"","+","child",".","getId","(",")","+","\"","in","\"","+","this",")",";","\n		","}","\n\n		if","(","child",".","getParent","(",")","!=","this",")","\n		","{","\n			final","Component","replaced","=","children_put","(","child",")",";","\n\n			//","Look","up","to","make","sure","it","was","already","in","the","map\n			if","(","replaced","==","null",")","\n			","{","\n				throw","new","WicketRuntimeException","(","\n					exceptionMessage","(","\"Cannot","replace","a","component","which","has","not","been","added:","id='\"","+\n						child",".","getId","(",")","+","\"',","component=\"","+","child",")",")",";","\n			","}","\n\n			//","first","remove","the","component",".","\n			removedComponent","(","replaced",")",";","\n\n			//","The","generated","markup","id","remains","the","same\n			child",".","setMarkupId","(","replaced",")",";","\n\n			//","then","add","the","other","one",".","\n			addedComponent","(","child",")",";","\n		","}","\n\n		return","this",";","\n	"],"docstring_tokens":["Replaces","a","child","component","of","this","container","with","another"]}
{"code_tokens":["\n	public","int","size","(",")","\n	","{","\n		return","children_size","(",")",";","\n	"],"docstring_tokens":["Get","the","number","of","children","in","this","container"]}
{"code_tokens":["\n	private","int","children_size","(",")","\n	","{","\n		if","(","children","==","null",")","\n		","{","\n			return","0",";","\n		","}","\n		if","(","children","instanceof","Component",")","\n		","{","\n			return","1",";","\n		","}","\n		if","(","children","instanceof","List",")","\n		","{","\n			List<?>","kids","=","children","(",")",";","\n			return","kids",".","size","(",")",";","\n		","}","\n		return","(","(","Map<?,","?>",")","children",")",".","size","(",")",";","\n	"],"docstring_tokens":["Gets","the","number","of","child","components","of","this","markup","container"]}
{"code_tokens":["\n	private","boolean","canRenderRawTag","(","MarkupElement","tag",")","\n	","{","\n		boolean","isWicketTag","=","tag","instanceof","WicketTag",";","\n		\n		boolean","stripTag","=","isWicketTag","?","Application",".","get","(",")",".","getMarkupSettings","(",")",".","getStripWicketTags","(",")",":","false",";","\n		\n		return","!stripTag",";","\n	"],"docstring_tokens":["Says","if","the","given","tag","can","be","handled","as","a","raw","markup"]}
{"code_tokens":["\n	private","void","throwException","(","final","MarkupStream","markupStream,","final","ComponentTag","tag",")","\n	","{","\n		final","String","id","=","tag",".","getId","(",")",";","\n		\n		if","(","tag","instanceof","WicketTag",")","\n		","{","\n			if","(","(","(","WicketTag",")","tag",")",".","isChildTag","(",")",")","\n			","{","\n				markupStream",".","throwMarkupException","(","\"Found","\"","+","tag",".","toString","(",")","+\n					\"","but","no","<wicket:extend>",".","Container:","\"","+","toString","(",")",")",";","\n			","}","\n			else\n			","{","\n				markupStream",".","throwMarkupException","(","\"Failed","to","handle:","\"","+\n					tag",".","toString","(",")","+\n					\"",".","It","might","be","that","no","resolver","has","been","registered","to","handle","this","special","tag",".","\"","+\n					\"","But","it","also","could","be","that","you","declared","wicket:id=\"","+","id","+\n					\"","in","your","markup,","but","that","you","either","did","not","add","the","\"","+\n					\"component","to","your","page","at","all,","or","that","the","hierarchy","does","not","match",".","\"","+\n					\"Container:","\"","+","toString","(",")",")",";","\n			","}","\n		","}","\n\n		List<String>","names","=","findSimilarComponents","(","id",")",";","\n\n		//","No","one","was","able","to","handle","the","component","id\n		StringBuilder","msg","=","new","StringBuilder","(","500",")",";","\n		msg",".","append","(","\"Unable","to","find","component","with","id","'\"",")",";","\n		msg",".","append","(","id",")",";","\n		msg",".","append","(","\"'","in","\"",")",";","\n		msg",".","append","(","this",".","toString","(",")",")",";","\n		msg",".","append","(","\"\\n\\tExpected:","'\"",")",";","\n		msg",".","append","(","getPageRelativePath","(",")",")",";","\n		msg",".","append","(","PATH_SEPARATOR",")",";","\n		msg",".","append","(","id",")",";","\n		msg",".","append","(","\"'",".","\\n\\tFound","with","similar","names:","'\"",")",";","\n		msg",".","append","(","Strings",".","join","(","\"',","\",","names",")",")",";","\n		msg",".","append","(","'\\''",")",";","\n\n		log",".","error","(","msg",".","toString","(",")",")",";","\n		markupStream",".","throwMarkupException","(","msg",".","toString","(",")",")",";","\n	"],"docstring_tokens":["Throws","a","org.apache.wicket.markup.MarkupException","when","the	","component","markup","is","not","consistent"]}
{"code_tokens":["\n	protected","final","void","renderAll","(","final","MarkupStream","markupStream,","final","ComponentTag","openTag",")","\n	","{","\n		while","(","markupStream",".","isCurrentIndexInsideTheStream","(",")",")","\n		","{","\n			//","In","case","of","Page","we","need","to","render","the","whole","file",".","For","all","other","components","just","what\n			//","is","in","between","the","open","and","the","close","tag",".","\n			if","(","(","openTag","!=","null",")","&&","markupStream",".","get","(",")",".","closes","(","openTag",")",")","\n			","{","\n				break",";","\n			","}","\n\n			//","Remember","where","we","are\n			final","int","index","=","markupStream",".","getCurrentIndex","(",")",";","\n\n			//","Render","the","markup","element\n			boolean","rawMarkup","=","renderNext","(","markupStream",")",";","\n\n			//","Go","back","to","where","we","were","and","move","the","markup","stream","forward","to","whatever","the","next\n			//","element","is",".","\n			markupStream",".","setCurrentIndex","(","index",")",";","\n\n			if","(","rawMarkup",")","\n			","{","\n				markupStream",".","next","(",")",";","\n			","}","\n			else","if","(","!markupStream",".","getTag","(",")",".","isClose","(",")",")","\n			","{","\n				markupStream",".","skipComponent","(",")",";","\n			","}","\n			else\n			","{","\n				throw","new","WicketRuntimeException","(","\"Ups",".","This","should","never","happen",".","\"","+\n					markupStream",".","toString","(",")",")",";","\n			","}","\n		","}","\n	"],"docstring_tokens":["Loop","through","the","markup","in","this","container"]}
{"code_tokens":["\n	@SuppressWarnings","(","\"unchecked\"",")","\n	public","Stream<Component>","streamChildren","(",")","\n	","{","\n		class","ChildrenIterator<C>","implements","Iterator<C>\n		","{","\n			private","Iterator<C>","currentIterator",";","\n\n			private","Deque<Iterator<C>>","iteratorStack","=","new","ArrayDeque<>","(",")",";","\n\n			private","ChildrenIterator","(","Iterator<C>","iterator",")","\n			","{","\n				currentIterator","=","iterator",";","\n			","}","\n\n			@Override\n			public","boolean","hasNext","(",")","\n			","{","\n				while","(","!currentIterator",".","hasNext","(",")","&&","!iteratorStack",".","isEmpty","(",")",")","\n				","{","\n					currentIterator","=","iteratorStack",".","pop","(",")",";","\n				","}","\n				return","currentIterator",".","hasNext","(",")",";","\n			","}","\n\n			@Override\n			public","C","next","(",")","\n			","{","\n				C","child","=","currentIterator",".","next","(",")",";","\n				if","(","child","instanceof","Iterable",")","\n				","{","\n					iteratorStack",".","push","(","currentIterator",")",";","\n					currentIterator","=","(","(","Iterable<C>",")","child",")",".","iterator","(",")",";","\n				","}","\n				return","child",";","\n			","}","\n		","}","\n		return","StreamSupport",".","stream","(","\n			Spliterators",".","spliteratorUnknownSize","(","new","ChildrenIterator<>","(","iterator","(",")",")",",","0",")",",","false",")",";","\n	"],"docstring_tokens":["Returns","a","sequential","Stream","with","the","all","children","of","this","markup","container","as","its	","source"]}
{"code_tokens":["\n	public","boolean","add","(","final","T","listener",")","\n	","{","\n		if","(","(","listener","==","null",")","&&","!isAllowingNulls","(",")",")","\n		","{","\n			return","false",";","\n		","}","\n		if","(","!isAllowingDuplicates","(",")","&&","listeners",".","contains","(","listener",")",")","\n		","{","\n			return","false",";","\n		","}","\n		listeners",".","add","(","listener",")",";","\n		return","true",";","\n	"],"docstring_tokens":["Adds","a","listener","to","this","set","of","listeners"]}
{"code_tokens":["\n	protected","void","notify","(","final","INotifier<T>","notifier",")","\n	","{","\n		for","(","T","listener",":","listeners",")","\n		","{","\n			notifier",".","notify","(","listener",")",";","\n		","}","\n	"],"docstring_tokens":["Notifies","each","listener","in","this"]}
{"code_tokens":["\n	protected","void","notifyIgnoringExceptions","(","final","INotifier<T>","notifier",")","\n	","{","\n		for","(","T","listener",":","listeners",")","\n		","{","\n			try\n			","{","\n				notifier",".","notify","(","listener",")",";","\n			","}","\n			catch","(","Exception","e",")","\n			","{","\n				logger",".","error","(","\"Error","invoking","listener:","\"","+","listener,","e",")",";","\n			","}","\n		","}","\n	"],"docstring_tokens":["Notifies","each","listener","in","this","set","ignoring","exceptions"]}
{"code_tokens":["\n	protected","void","reversedNotifyIgnoringExceptions","(","final","INotifier<T>","notifier",")","\n	","{","\n		reversedNotify","(","new","INotifier<T>","(",")","\n		","{","\n			@Override\n			public","void","notify","(","T","listener",")","\n			","{","\n				try\n				","{","\n					notifier",".","notify","(","listener",")",";","\n				","}","\n				catch","(","Exception","e",")","\n				","{","\n					logger",".","error","(","\"Error","invoking","listener:","\"","+","listener,","e",")",";","\n				","}","\n\n			","}","\n\n		","}",")",";","\n	"],"docstring_tokens":["Notifies","each","listener","in","this","set","in","reverse","order","ignoring","exceptions"]}
{"code_tokens":["\n	protected","void","reversedNotify","(","final","INotifier<T>","notifier",")","\n	","{","\n		Iterator<T>","it","=","new","ReverseListIterator<>","(","listeners",")",";","\n		while","(","it",".","hasNext","(",")",")","\n		","{","\n			T","listener","=","it",".","next","(",")",";","\n			notifier",".","notify","(","listener",")",";","\n		","}","\n	"],"docstring_tokens":["Notifies","each","listener","in","this","in","reversed","order"]}
{"code_tokens":["\n	public","void","remove","(","final","T","listener",")","\n	","{","\n		listeners",".","remove","(","listener",")",";","\n	"],"docstring_tokens":["Removes","a","listener","from","this","set"]}
{"code_tokens":["\n	protected","boolean","isAllowingDuplicates","(",")","\n	","{","\n		return","true",";","\n	"],"docstring_tokens":["Whether","or","not","added","listeners","should","be","checked","for","duplicates"]}
{"code_tokens":["\n	protected","boolean","isAllowingNulls","(",")","\n	","{","\n		return","false",";","\n	"],"docstring_tokens":["Whether","or","not","to","allow","nulls","in","listener","collection"]}
{"code_tokens":["\n	@Override\n	public","Iterator<T>","iterator","(",")","\n	","{","\n		return","listeners",".","iterator","(",")",";","\n	"],"docstring_tokens":["Returns","an","iterator","that","can","iterate","the","listeners"]}
{"code_tokens":["\n	public","boolean","hasRole","(","String","role",")","\n	","{","\n		return","roles",".","hasRole","(","role",")",";","\n	"],"docstring_tokens":["Whether","this","user","has","the","given","role"]}
{"code_tokens":["\n	public","boolean","hasAnyRole","(","Roles","roles",")","\n	","{","\n		return","this",".","roles",".","hasAnyRole","(","roles",")",";","\n	"],"docstring_tokens":["Whether","this","user","has","any","of","the","given","roles"]}
{"code_tokens":["\n	protected","final","void","activate","(","final","IBreadCrumbParticipant","breadCrumbParticipant",")","\n	","{","\n		//","get","old","value\n		IBreadCrumbParticipant","previousParticipant","=","activeParticipant",";","\n\n		//","and","set","the","provided","participant","as","the","active","one\n		activeParticipant","=","breadCrumbParticipant",";","\n\n		//","fire","bread","crumb","activated","event\n		listenerSupport",".","fireBreadCrumbActivated","(","previousParticipant,","breadCrumbParticipant",")",";","\n\n		//","signal","the","bread","crumb","participant","that","it","is","selected","as","the\n		//","currently","active","one\n		breadCrumbParticipant",".","onActivate","(","previousParticipant",")",";","\n	"],"docstring_tokens":["Activates","the","bread","crumb","participant"]}
{"code_tokens":["\n	public","void","invalidate","(","IStaticCacheableResource","resource",")","\n	","{","\n		//","get","cache","key","for","resource","reference\n		final","Serializable","key","=","Args",".","notNull","(","resource,","\"resource\"",")",".","getCacheKey","(",")",";","\n\n		//","if","key","is","available","purge","cache","entry\n		if","(","key","!=","null",")","\n		","{","\n			cache",".","remove","(","key",")",";","\n		","}","\n	"],"docstring_tokens":["remove","cacheable","resource","from","cache"]}
{"code_tokens":["\n	public","ResourceIsolationRequestCycleListener","setUnknownOutcomeAction","(","CsrfAction","action",")","\n	","{","\n		this",".","unknownOutcomeAction","=","action",";","\n		return","this",";","\n	"],"docstring_tokens":["Sets","the","action","when","none","of","the","resource","isolation","policies","can","come","to","an","outcome"]}
{"code_tokens":["\n	public","ResourceIsolationRequestCycleListener","setDisallowedOutcomeAction","(","CsrfAction","action",")","\n	","{","\n		this",".","disallowedOutcomeAction","=","action",";","\n		return","this",";","\n	"],"docstring_tokens":["Sets","the","action","when","a","request","is","disallowed","by","a","resource","isolation","policy"]}
{"code_tokens":["\n	public","ResourceIsolationRequestCycleListener","setErrorCode","(","int","errorCode",")","\n	","{","\n		this",".","errorCode","=","errorCode",";","\n		return","this",";","\n	"],"docstring_tokens":["Modifies","the","HTTP","error","code","in","the","exception","when","a","disallowed","request","is","detected"]}
{"code_tokens":["\n	public","ResourceIsolationRequestCycleListener","setErrorMessage","(","String","errorMessage",")","\n	","{","\n		this",".","errorMessage","=","errorMessage",";","\n		return","this",";","\n	"],"docstring_tokens":["Modifies","the","HTTP","message","in","the","exception","when","a","disallowed","request","is","detected"]}
{"code_tokens":["\n	protected","boolean","isChecked","(","IRequestablePage","targetedPage",")","\n	","{","\n		return","true",";","\n	"],"docstring_tokens":["Override","to","limit","whether","the","request","to","the","specific","page","should","be","checked","for","a","possible	","CSRF","attack"]}
{"code_tokens":["\n	@Override\n	public","void","onEndRequest","(","RequestCycle","cycle",")","\n	","{","\n		if","(","cycle",".","getResponse","(",")","instanceof","WebResponse",")","\n		","{","\n			WebResponse","webResponse","=","(","WebResponse",")","cycle",".","getResponse","(",")",";","\n			if","(","webResponse",".","isHeaderSupported","(",")",")","\n			","{","\n				for","(","IResourceIsolationPolicy","resourceIsolationPolicy",":","resourceIsolationPolicies",")","\n				","{","\n					resourceIsolationPolicy\n						",".","setHeaders","(","(","HttpServletResponse",")","webResponse",".","getContainerResponse","(",")",")",";","\n				","}","\n			","}","\n		","}","\n	"],"docstring_tokens":["Allow","isolation","policy","to","add","headers"]}
{"code_tokens":["\r\n\r\n	@Override\r\n	public","String","getMessage","(",")","\r\n	","{","\r\n		return","message",";","\r\n	"],"docstring_tokens":["Gets","the","error","message"]}
{"code_tokens":["\r\n	public","synchronized","void","setLog","(","final","Logger","log",")","\r\n	","{","\r\n		this",".","log","=","log",";","\r\n	"],"docstring_tokens":["Sets","log","for","user","code","to","log","to","when","task","runs"]}
{"code_tokens":["\r\n	public","synchronized","void","setStartTime","(","final","Instant","startTime",")","\r\n	","{","\r\n		if","(","isStarted",")","\r\n		","{","\r\n			throw","new","IllegalStateException","(","\r\n				\"Attempt","to","set","start","time","of","task","that","has","already","been","started\"",")",";","\r\n		","}","\r\n\r\n		this",".","startTime","=","startTime",";","\r\n	"],"docstring_tokens":["Sets","start","time","for","this","task"]}
{"code_tokens":["\r\n	protected","synchronized","Logger","getLog","(",")","\r\n	","{","\r\n		if","(","log","==","null",")","\r\n		","{","\r\n			log","=","LoggerFactory",".","getLogger","(","Task",".","class",")",";","\r\n		","}","\r\n		return","log",";","\r\n	"],"docstring_tokens":["Gets","the","log","for","this","Task"]}
{"code_tokens":["\r\n	public","void","stop","(",")","\r\n	","{","\r\n		stop","=","true",";","\r\n	"],"docstring_tokens":["Stops","this","Task","as","soon","as","it","has","the","opportunity"]}
{"code_tokens":["\r\n	public","void","interrupt","(",")","\r\n	","{","\r\n		stop","(",")",";","\r\n		if","(","thread","!=","null",")","\r\n		","{","\r\n			thread",".","interrupt","(",")",";","\r\n		","}","\r\n	"],"docstring_tokens":["Interrupts","the","Task","as","soon","as","it","has","the","opportunity"]}
{"code_tokens":["\n	public","final","Duration","getDefaultCacheDuration","(",")","\n	","{","\n		return","defaultCacheDuration",";","\n	"],"docstring_tokens":["Get","the","the","default","cache","duration","for","resources"]}
{"code_tokens":["\n	public","final","ResourceSettings","setDefaultCacheDuration","(","Duration","duration",")","\n	","{","\n		Args",".","notNull","(","duration,","\"duration\"",")",";","\n		defaultCacheDuration","=","duration",";","\n		return","this",";","\n	"],"docstring_tokens":["Set","the","the","default","cache","duration","for","resources.	","	","Based","on","RFC-2616","this","should","not","exceed","one","year"]}
{"code_tokens":["\n	public","ICssCompressor","getCssCompressor","(",")","\n	","{","\n		return","cssCompressor",";","\n	"],"docstring_tokens":["Get","the","CSS","compressor","to","remove","comments","and","whitespace","characters","from","css","resources"]}
{"code_tokens":["\n	public","IResourceCachingStrategy","getCachingStrategy","(",")","\n	","{","\n		if","(","resourceCachingStrategy","==","null",")","\n		","{","\n			final","IResourceVersion","resourceVersion",";","\n\n			if","(","application",".","usesDevelopmentConfig","(",")",")","\n			","{","\n				//","development","mode:\n				//","use","last-modified","timestamp","of","packaged","resource","for","resource","caching\n				//","cache","the","version","information","for","the","lifetime","of","the","current","http","request\n				resourceVersion","=","new","RequestCycleCachedResourceVersion","(","\n					new","LastModifiedResourceVersion","(",")",")",";","\n			","}","\n			else\n			","{","\n				//","deployment","mode:\n				//","use","message","digest","over","resource","content","for","resource","caching\n				//","cache","the","version","information","for","the","lifetime","of","the","application\n				resourceVersion","=","new","CachingResourceVersion","(","new","MessageDigestResourceVersion","(",")",")",";","\n			","}","\n			//","cache","resource","with","a","version","string","in","the","filename\n			resourceCachingStrategy","=","new","FilenameWithVersionResourceCachingStrategy","(","\n				resourceVersion",")",";","\n		","}","\n		return","resourceCachingStrategy",";","\n	"],"docstring_tokens":["gets","the","resource","caching","strategy"]}
{"code_tokens":["\n	public","ResourceSettings","setCachingStrategy","(","IResourceCachingStrategy","strategy",")","\n	","{","\n		if","(","strategy","==","null",")","\n		","{","\n			throw","new","NullPointerException","(","\n				\"It","is","not","allowed","to","set","the","resource","caching","strategy","to","value","NULL",".","\"","+\n					\"Please","use","\"","+","NoOpResourceCachingStrategy",".","class",".","getName","(",")","+","\"","instead",".","\"",")",";","\n		","}","\n		resourceCachingStrategy","=","strategy",";","\n		return","this",";","\n	"],"docstring_tokens":["sets","the","resource","caching","strategy"]}
{"code_tokens":["\n	public","MetaDataHeaderItem","addTagAttribute","(","String","attributeName",")","\n	","{","\n		Args",".","notEmpty","(","attributeName,","\"attributeName\"",")",";","\n		\n		tagMinimizedAttributes",".","add","(","attributeName",")",";","\n		return","this",";","\n	"],"docstring_tokens":["Add","a","minimized","tag","attribute","to","the","item"]}
{"code_tokens":["\n	public","String","generateString","(",")","\n	","{","\n		StringBuilder","buffer","=","new","StringBuilder","(",")",";","\n\n		buffer",".","append","(","'<'",")",".","append","(","tagName",")",";","\n\n		for","(","Map",".","Entry<String,","Object>","entry",":","tagAttributes",".","entrySet","(",")",")","\n		","{","\n			Object","value","=","entry",".","getValue","(",")",";","\n\n			if","(","value","instanceof","IModel",")","\n			","{","\n				value","=","(","(","IModel<?>",")","value",")",".","getObject","(",")",";","\n			","}","\n\n			buffer",".","append","(","'","'",")","\n				",".","append","(","Strings",".","escapeMarkup","(","entry",".","getKey","(",")",")",")",";","\n\n			if","(","value","!=","null",")","\n			","{","\n				buffer",".","append","(","'='",")","\n					",".","append","(","'\"'",")","\n					",".","append","(","Strings",".","replaceAll","(","value",".","toString","(",")",",","\"\\\"\",","\"\\\\\\\"\"",")",")","\n					",".","append","(","'\"'",")",";","\n			","}","\n		","}","\n		\n		for","(","String","attrName",":","tagMinimizedAttributes",")","\n		","{","\n			buffer",".","append","(","'","'",")","\n				",".","append","(","Strings",".","escapeMarkup","(","attrName",")",")",";","\n		","}","\n\n		buffer",".","append","(","\"","/>\\n\"",")",";","\n\n		return","buffer",".","toString","(",")",";","\n	"],"docstring_tokens":["Generate","the","string","representation","for","the","current","item"]}
{"code_tokens":["\n	public","void","save","(","final","Contact","contact",")","\n	","{","\n		if","(","contact",".","getId","(",")","==","0",")","\n		","{","\n			contact",".","setId","(","ContactGenerator",".","getInstance","(",")",".","generateId","(",")",")",";","\n			add","(","contact",")",";","\n			updateIndecies","(",")",";","\n		","}","\n		else\n		","{","\n			throw","new","IllegalArgumentException","(","\"contact","[\"","+","contact",".","getFirstName","(",")","+\n				\"]","is","already","persistent\"",")",";","\n		","}","\n	"],"docstring_tokens":["add","contact","to","the","database"]}
{"code_tokens":["\n	public","void","delete","(","final","Contact","contact",")","\n	","{","\n		map",".","remove","(","contact",".","getId","(",")",")",";","\n\n		fnameIdx",".","remove","(","contact",")",";","\n		lnameIdx",".","remove","(","contact",")",";","\n		fnameDescIdx",".","remove","(","contact",")",";","\n		lnameDescIdx",".","remove","(","contact",")",";","\n\n		contact",".","setId","(","0",")",";","\n	"],"docstring_tokens":["delete","contact","from","the","database"]}
{"code_tokens":["\n	public","static","WebApplication","get","(",")","\n	","{","\n		Application","application","=","Application",".","get","(",")",";","\n\n		if","(","application","instanceof","WebApplication","==","false",")","\n		","{","\n			throw","new","WicketRuntimeException","(","\n				\"The","application","attached","to","the","current","thread","is","not","a","\"","+\n					WebApplication",".","class",".","getSimpleName","(",")",")",";","\n		","}","\n\n		return","(","WebApplication",")","application",";","\n	"],"docstring_tokens":["Covariant","override","for","easy","getting","the","current","WebApplication","without","having","to","cast	","it"]}
{"code_tokens":["\n	public","String","getInitParameter","(","String","key",")","\n	","{","\n		if","(","wicketFilter","!=","null",")","\n		","{","\n			return","wicketFilter",".","getFilterConfig","(",")",".","getInitParameter","(","key",")",";","\n		","}","\n		throw","new","IllegalStateException","(","\"init","parameter","'\"","+","key","+\n			\"'","is","not","set","yet",".","Any","code","in","your\"","+\n			\"","Application","object","that","uses","the","wicketServlet/Filter","instance","should","be","put\"","+\n			\"","in","the","init","(",")","method","instead","of","your","constructor\"",")",";","\n	"],"docstring_tokens":["Gets","an","init","parameter","of","the","filter,","or","null","if","the","parameter","does","not","exist"]}
{"code_tokens":["\n	public","void","setServletContext","(","ServletContext","servletContext",")","\n	","{","\n		this",".","servletContext","=","servletContext",";","\n	"],"docstring_tokens":["Sets","servlet","context","this","application","runs","after"]}
{"code_tokens":["\n	private","void","unmountFromCompound","(","ICompoundRequestMapper","parent,","Request","request",")","\n	","{","\n		Collection<IRequestMapper>","toRemove","=","new","LinkedList<>","(",")",";","\n\n		for","(","IRequestMapper","mapper",":","parent",")","\n		","{","\n			if","(","mapper",".","mapRequest","(","request",")","!=","null",")","\n			","{","\n				IRequestMapper","actualMapper","=","mapper",";","\n\n				while","(","actualMapper","instanceof","IRequestMapperDelegate",")","\n				","{","\n					actualMapper","=","(","(","IRequestMapperDelegate",")","actualMapper",")",".","getDelegateMapper","(",")",";","\n				","}","\n\n				if","(","actualMapper","instanceof","ICompoundRequestMapper",")","\n				","{","\n					unmountFromCompound","(","(","ICompoundRequestMapper",")","actualMapper,","request",")",";","\n				","}","\n				else\n				","{","\n					toRemove",".","add","(","mapper",")",";","\n				","}","\n			","}","\n		","}","\n\n		for","(","IRequestMapper","mapper",":","toRemove",")","\n		","{","\n			parent",".","remove","(","mapper",")",";","\n		","}","\n	"],"docstring_tokens":["Descends","the","tree","of","ICompoundRequestMappers","and","IRequestMapperDelegates","to","find","the","correct","descendant	","to","remove"]}
{"code_tokens":["\n	final","void","logStarted","(",")","\n	","{","\n		if","(","log",".","isInfoEnabled","(",")",")","\n		","{","\n			String","version","=","getFrameworkSettings","(",")",".","getVersion","(",")",";","\n			StringBuilder","b","=","new","StringBuilder","(",")",";","\n			b",".","append","(","\"[\"",")",".","append","(","getName","(",")",")",".","append","(","\"]","Started","Wicket","\"",")",";","\n			if","(","!\"n/a\"",".","equals","(","version",")",")","\n			","{","\n				b",".","append","(","\"version","\"",")",".","append","(","version",")",".","append","(","\"","\"",")",";","\n			","}","\n			b",".","append","(","\"in","\"",")",".","append","(","getConfigurationType","(",")",")",".","append","(","\"","mode\"",")",";","\n			log",".","info","(","b",".","toString","(",")",")",";","\n		","}","\n\n		if","(","usesDevelopmentConfig","(",")",")","\n		","{","\n			outputDevelopmentModeWarning","(",")",";","\n		","}","\n	"],"docstring_tokens":["Log","that","this","application","is","started"]}
{"code_tokens":["\n	public","void","storeBufferedResponse","(","String","sessionId,","Url","url,","BufferedWebResponse","response",")","\n	","{","\n		if","(","Strings",".","isEmpty","(","sessionId",")",")","\n		","{","\n			log",".","error","(","\"storeBufferedResponse","needs","a","valid","session","id","to","store","the","response,","but","a","null","one","was","found",".","\"\n					+","\"Please","report","the","problem","to","dev","team","and","try","to","reproduce","it","in","a","quickstart","project",".","\"",")",";","\n			return",";","\n		","}","\n\n		String","key","=","sessionId","+","url",".","toString","(",")",";","\n		storedResponses",".","put","(","key,","response",")",";","\n	"],"docstring_tokens":["Store","the","buffered","response","at","application","level","to","use","it","at","a","later","time"]}
{"code_tokens":["\r\n	public","static","TimeFrame","valueOf","(","final","Time","start,","final","Duration","duration",")","\r\n	","{","\r\n		return","new","TimeFrame","(","start,","start",".","add","(","duration",")",")",";","\r\n	"],"docstring_tokens":["Creates","a","TimeFrame","for","a","start","Time","and","Duration"]}
{"code_tokens":["\r\n	public","static","TimeFrame","valueOf","(","final","Time","start,","final","Time","end",")","\r\n	","{","\r\n		return","new","TimeFrame","(","start,","end",")",";","\r\n	"],"docstring_tokens":["Creates","a","TimeFrame","for","given","start","and","end","Times"]}
{"code_tokens":["\r\n	public","boolean","contains","(","final","Time","time",")","\r\n	","{","\r\n		return","(","start",".","equals","(","time",")","||","start",".","before","(","time",")",")","&&","end",".","after","(","time",")",";","\r\n	"],"docstring_tokens":["Determines","if","this","TimeFrame","contains","a","given","point","in","time"]}
{"code_tokens":["\r\n	public","Duration","getDuration","(",")","\r\n	","{","\r\n		return","end",".","subtract","(","start",")",";","\r\n	"],"docstring_tokens":["Retrieves","the","Duration","of","this","TimeFrame"]}
{"code_tokens":["\r\n	public","Time","getEnd","(",")","\r\n	","{","\r\n		return","end",";","\r\n	"],"docstring_tokens":["Retrieves","the","end","Time","of","this","TimeFrame"]}
{"code_tokens":["\r\n	public","Time","getStart","(",")","\r\n	","{","\r\n		return","start",";","\r\n	"],"docstring_tokens":["Retrieves","the","start","Time","of","this","TimeFrame"]}
{"code_tokens":["\r\n	@Override\r\n	public","TimeFrame","getTimeFrame","(",")","\r\n	","{","\r\n		return","this",";","\r\n	"],"docstring_tokens":["Implementation","of","ITimeFrameSource","that","simply","returns","this","	","TimeFrame"]}
{"code_tokens":["\r\n	public","boolean","overlaps","(","final","TimeFrame","timeframe",")","\r\n	","{","\r\n		return","contains","(","timeframe",".","start",")","||","contains","(","timeframe",".","end",")","||","timeframe",".","contains","(","start",")","||\r\n			timeframe",".","contains","(","end",")",";","\r\n	"],"docstring_tokens":["Determines","if","two","TimeFrames","overlap"]}
{"code_tokens":["\r\n	@Override\r\n	public","String","toString","(",")","\r\n	","{","\r\n		return","\"[start=\"","+","start","+","\",","end=\"","+","end","+","\"]\"",";","\r\n	"],"docstring_tokens":["Converts","this","TimeFrame","to","a","String","representation"]}
{"code_tokens":["\n	public","ExportToolbar","setMessageModel","(","IModel<String>","messageModel",")","\n	","{","\n		this",".","messageModel","=","wrap","(","Args",".","notNull","(","messageModel,","\"messageModel\"",")",")",";","\n		return","this",";","\n	"],"docstring_tokens":["Sets","the","models","of","the","export","message","displayed","in","the","toolbar"]}
{"code_tokens":["\n	public","ExportToolbar","setFileNameModel","(","IModel<String>","fileNameModel",")","\n	","{","\n		this",".","fileNameModel","=","wrap","(","Args",".","notNull","(","fileNameModel,","\"fileNameModel\"",")",")",";","\n		return","this",";","\n	"],"docstring_tokens":["Sets","the","model","of","the","file","name","used","for","the","exported","data"]}
{"code_tokens":["\n	public","IModel<String>","getFileNameModel","(",")","\n	","{","\n		return","fileNameModel",";","\n	"],"docstring_tokens":["Returns","the","model","of","the","file","name","used","for","the","exported","data"]}
{"code_tokens":["\n	public","IModel<String>","getMessageModel","(",")","\n	","{","\n		return","messageModel",";","\n	"],"docstring_tokens":["Returns","the","model","of","the","export","message","displayed","in","the","toolbar"]}
{"code_tokens":["\n	public","ExportToolbar","addDataExporter","(","IDataExporter","exporter",")","\n	","{","\n		Args",".","notNull","(","exporter,","\"exporter\"",")",";","\n		dataExporters",".","add","(","exporter",")",";","\n		return","this",";","\n	"],"docstring_tokens":["Adds","a","IDataExporter","to","the","list","of","data","exporters","to","be","used","in","this","toolbar"]}
{"code_tokens":["\r\n	@Override\r\n	public","void","setCrossOrigin","(","CrossOrigin","crossorigin",")","\r\n	","{","\r\n		throw","new","UnsupportedOperationException","(","\r\n			\"It","is","not","allowed","to","set","the","crossorigin","attribute","for","source","tag\"",")",";","\r\n	"],"docstring_tokens":["Unsupported","for","source","tag"]}
{"code_tokens":["\n	@Override\n	protected","final","void","onRender","(",")","\n	","{","\n		Iterator<?","extends","Component>","it","=","renderIterator","(",")",";","\n		while","(","it",".","hasNext","(",")",")","\n		","{","\n			Component","child","=","it",".","next","(",")",";","\n			if","(","child","==","null",")","\n			","{","\n				throw","new","IllegalStateException","(","\n					\"The","render","iterator","returned","null","for","a","child",".","Container:","\"","+","this",".","toString","(",")","+\n						\"",";","Iterator=\"","+","it",".","toString","(",")",")",";","\n			","}","\n			renderChild","(","child",")",";","\n		","}","\n	"],"docstring_tokens":["Renders","all","child","items","in","no","specified","order"]}
{"code_tokens":["\n	public","File","get","(","String","name,","final","boolean","create",")","\n	","{","\n		name","=","name",".","replace","(","'*',","'_'",")",";","\n		name","=","name",".","replace","(","'/',","'_'",")",";","\n		name","=","name",".","replace","(","':',","'_'",")",";","\n\n		String","path","=","createPathFrom","(","name",")",";","\n\n		File","folder","=","new","File","(","base,","path",")",";","\n		if","(","create","&&","folder",".","exists","(",")","==","false",")","\n		","{","\n			Files",".","mkdirs","(","folder",")",";","\n		","}","\n		return","folder",";","\n	"],"docstring_tokens":["Get","a","nested","folder","for","the","given","name"]}
{"code_tokens":["\n	public","void","remove","(","String","name",")","\n	","{","\n		File","folder","=","get","(","name,","false",")",";","\n		if","(","folder",".","exists","(",")",")","\n		","{","\n			Files",".","removeFolder","(","folder",")",";","\n			\n			File","high","=","folder",".","getParentFile","(",")",";","\n			final","String[]","highChildren","=","high",".","list","(",")",";","\n			if","(","highChildren","!=","null","&&","highChildren",".","length","==","0","&&","Files",".","removeFolder","(","high",")",")","\n			","{","\n				File","low","=","high",".","getParentFile","(",")",";","\n				final","String[]","lowChildren","=","low",".","list","(",")",";","\n				if","(","lowChildren","!=","null","&&","lowChildren",".","length","==","0",")","\n				","{","\n					Files",".","removeFolder","(","low",")",";","\n				","}","\n			","}","\n		","}","\n	"],"docstring_tokens":["Remove","a","nested","folder"]}
{"code_tokens":["\n	public","void","newGame","(","final","int","guessesAllowed,","final","WordGenerator","wordGenerator",")","\n	","{","\n		this",".","guessesAllowed","=","guessesAllowed",";","\n		this",".","guessesRemaining","=","guessesAllowed",";","\n		this",".","word","=","wordGenerator",".","next","(",")",";","\n		this",".","wordGenerator","=","wordGenerator",";","\n\n		//","Add","letters\n		letters",".","clear","(",")",";","\n		for","(","char","c","=","'a'",";","c","<=","'z'",";","c++",")","\n		","{","\n			letters",".","add","(","new","Letter","(","c",")",")",";","\n		","}","\n	"],"docstring_tokens":["Initialise","the","hangman","read","for","a","new","game"]}
{"code_tokens":["\n	@Override\n	protected","void","onComponentTag","(","ComponentTag","tag",")","\n	","{","\n		super",".","onComponentTag","(","tag",")",";","\n\n		checkComponentTag","(","tag,","\"img\"",")",";","\n\n		try\n		","{","\n			tag",".","put","(","\"src\",","ImageUtil",".","createBase64EncodedImage","(","packageResourceReference,","false",")",")",";","\n		","}","\n		catch","(","ResourceStreamNotFoundException","e",")","\n		","{","\n			throw","new","WicketRuntimeException","(","\"Couldn't","find","the","resource","stream\",","e",")",";","\n		","}","\n		catch","(","IOException","e",")","\n		","{","\n			throw","new","WicketRuntimeException","(","\"Error","while","reading","the","resource","stream\",","e",")",";","\n		","}","\n	"],"docstring_tokens":["Renders","the","complete","image","tag","with","the","base64","encoded","content"]}
{"code_tokens":["\n	public","StringBufferResourceStream","append","(","final","CharSequence","s",")","\n	","{","\n		buffer",".","append","(","s",")",";","\n		setLastModified","(","Instant",".","now","(",")",")",";","\n		return","this",";","\n	"],"docstring_tokens":["Adds","to","this","string","buffer","resource"]}
{"code_tokens":["\n	public","StringBufferResourceStream","prepend","(","final","CharSequence","s",")","\n	","{","\n		buffer",".","insert","(","0,","s",")",";","\n		setLastModified","(","Instant",".","now","(",")",")",";","\n		return","this",";","\n	"],"docstring_tokens":["Prepends","to","this","string","buffer","resource"]}
{"code_tokens":["\n	public","StringBufferResourceStream","clear","(",")","\n	","{","\n		buffer",".","delete","(","0,","buffer",".","length","(",")",")",";","\n		return","this",";","\n	"],"docstring_tokens":["Clears","the","string","buffer","resource"]}
{"code_tokens":["\n	public","void","ensureExists","(",")","throws","IOException\n	","{","\n		if","(","!exists","(",")","&&","!mkdirs","(",")",")","\n		","{","\n			throw","new","IOException","(","\"Unable","to","create","folder","\"","+","this",")",";","\n		","}","\n	"],"docstring_tokens":["Does","a","mkdirs","on","this","folder","if","it","does","not","exist"]}
{"code_tokens":["\n	public","File[]","getNestedFiles","(","final","FileFilter","filter",")","\n	","{","\n		final","List<File>","files","=","new","ArrayList<>","(",")",";","\n		files",".","addAll","(","Arrays",".","asList","(","getFiles","(","filter",")",")",")",";","\n		final","Folder[]","folders","=","getFolders","(",")",";","\n		for","(","Folder","folder",":","folders",")","\n		","{","\n			files",".","addAll","(","Arrays",".","asList","(","folder",".","getNestedFiles","(","filter",")",")",")",";","\n		","}","\n		return","files",".","toArray","(","new","File[files",".","size","(",")","]",")",";","\n	"],"docstring_tokens":["Gets","files","in","this","folder","matching","a","given","filter","recursively"]}
{"code_tokens":["\n	public","boolean","removeFiles","(",")","\n	","{","\n		final","File[]","files","=","getFiles","(",")",";","\n		boolean","success","=","true",";","\n		for","(","File","file",":","files",")","\n		","{","\n			success","=","file",".","remove","(",")","&&","success",";","\n		","}","\n		return","success",";","\n	"],"docstring_tokens":["Removes","all","the","files","in","this","folder"]}
{"code_tokens":["\n	private","boolean","remove","(","final","Folder","folder",")","\n	","{","\n		final","Folder[]","folders","=","getFolders","(",")",";","\n		boolean","success","=","true",";","\n		for","(","Folder","subfolder",":","folders",")","\n		","{","\n			success","=","subfolder",".","remove","(",")","&&","success",";","\n		","}","\n		success","=","removeFiles","(",")","&&","success",";","\n		return","folder",".","delete","(",")","&&","success",";","\n	"],"docstring_tokens":["Removes","everything","in","the","given","folder","and","then","the","folder","itself"]}
{"code_tokens":["\n	public","final","ClientProperties","getProperties","(",")","\n	","{","\n		return","properties",";","\n	"],"docstring_tokens":["Gets","the","client","properties","object"]}
{"code_tokens":["\n	public","final","String","getUserAgent","(",")","\n	","{","\n		return","userAgent",";","\n	"],"docstring_tokens":["returns","the","user","agent","string"]}
{"code_tokens":["\n	@Override\n	public","boolean","supportsVersioning","(",")","\n	","{","\n		return","true",";","\n	"],"docstring_tokens":["Versioning","is","supported,","since","pages","are","always","serialized"]}
{"code_tokens":["\n	protected","String","findIndicatorId","(",")","\n	","{","\n		if","(","getComponent","(",")","instanceof","IAjaxIndicatorAware",")","\n		","{","\n			return","(","(","IAjaxIndicatorAware",")","getComponent","(",")",")",".","getAjaxIndicatorMarkupId","(",")",";","\n		","}","\n\n		if","(","this","instanceof","IAjaxIndicatorAware",")","\n		","{","\n			return","(","(","IAjaxIndicatorAware",")","this",")",".","getAjaxIndicatorMarkupId","(",")",";","\n		","}","\n\n		Component","parent","=","getComponent","(",")",".","getParent","(",")",";","\n		while","(","parent","!=","null",")","\n		","{","\n			if","(","parent","instanceof","IAjaxIndicatorAware",")","\n			","{","\n				return","(","(","IAjaxIndicatorAware",")","parent",")",".","getAjaxIndicatorMarkupId","(",")",";","\n			","}","\n			parent","=","parent",".","getParent","(",")",";","\n		","}","\n		return","null",";","\n	"],"docstring_tokens":["Finds","the","markup","id","of","the","indicator"]}
{"code_tokens":["\n	@Deprecated\n	public","static","void","writeCss","(","final","Response","response,","final","CharSequence","text,","String","id",")","\n	","{","\n		writeOpenTag","(","response,","id",")",";","\n		response",".","write","(","text",")",";","\n		writeCloseTag","(","response",")",";","\n	"],"docstring_tokens":["Write","the","simple","text","to","the","response","object","surrounded","by","a","style","tag"]}
{"code_tokens":["\n	public","static","void","writeOpenTag","(","final","Response","response,","String","id",")","\n	","{","\n		AttributeMap","attributes","=","new","AttributeMap","(",")",";","\n		attributes",".","putAttribute","(","ATTR_ID,","id",")",";","\n		writeOpenTag","(","response,","attributes",")",";","\n	"],"docstring_tokens":["Write","open","style","tag","for","the","inline","CSS"]}
{"code_tokens":["\n	@Deprecated\n	public","static","void","writeLinkUrl","(","final","Response","response,","final","CharSequence","url,\n		final","CharSequence","media,","final","String","markupId",")","\n	","{","\n		CssUtils",".","writeLinkUrl","(","response,","url,","media,","markupId,","null",")",";","\n	"],"docstring_tokens":["Writes","a","reference","to","a","css","file","in","the","response","object"]}
{"code_tokens":["\n	public","static","String","key","(","Class<?>","scope,","String","facet",")","\n	","{","\n		return","Classes",".","simpleName","(","scope",")","+","\"",".","CSS",".","\"","+","facet",";","\n	"],"docstring_tokens":["Get","a","standardized","key","for","a","CSS","class"]}
{"code_tokens":["\n	public","synchronized","void","writeTo","(","final","OutputStream","out",")","throws","IOException\n	","{","\n		int","remaining","=","count",";","\n		for","(","int","i","=","0",";","i","<","buffers",".","size","(",")",";","i++",")","\n		","{","\n			byte[]","buf","=","getBuffer","(","i",")",";","\n			int","c","=","Math",".","min","(","buf",".","length,","remaining",")",";","\n			out",".","write","(","buf,","0,","c",")",";","\n			remaining","-=","c",";","\n			if","(","remaining","==","0",")","\n			","{","\n				break",";","\n			","}","\n		","}","\n	"],"docstring_tokens":["Write","to","the","given","output","stream"]}
{"code_tokens":["\r\n	public","static","long","sizeof","(","final","Serializable","object",")","\r\n	","{","\r\n		Serializable","target","=","object",";","\r\n\r\n		if","(","object","instanceof","Component",")","\r\n		","{","\r\n			//","clone","to","not","detach","the","original","component","(","WICKET-5013,","5014",")","\r\n			Component","clone","=","(","Component",")","cloneObject","(","object",")",";","\r\n			clone",".","detach","(",")",";","\r\n\r\n			target","=","clone",";","\r\n		","}","\r\n		else","if","(","object","instanceof","IDetachable",")","\r\n		","{","\r\n			//","clone","to","not","detach","the","original","IDetachable","(","WICKET-5013,","5014",")","\r\n			IDetachable","clone","=","(","IDetachable",")","cloneObject","(","object",")",";","\r\n			clone",".","detach","(",")",";","\r\n\r\n			target","=","clone",";","\r\n		","}","\r\n\r\n		return","objectSizeOfStrategy",".","sizeOf","(","target",")",";","\r\n	"],"docstring_tokens":["Computes","the","size","of","an","object"]}
{"code_tokens":["\n	private","void","process","(",")","\n	","{","\n		try\n		","{","\n			formComponent",".","validate","(",")",";","\n			if","(","formComponent",".","isValid","(",")",")","\n			","{","\n				if","(","getUpdateModel","(",")",")","\n				","{","\n					formComponent",".","valid","(",")",";","\n					formComponent",".","updateModel","(",")",";","\n				","}","\n	\n				onUpdate","(",")",";","\n			","}","\n			else\n			","{","\n				formComponent",".","invalid","(",")",";","\n				\n				onError","(","null",")",";","\n			","}","\n		","}","\n		catch","(","RuntimeException","e",")","\n		","{","\n			onError","(","e",")",";","\n		","}","\n	"],"docstring_tokens":["Process","the","form","component"]}
{"code_tokens":["\n	public","int","anchor","(",")","\n	","{","\n		return","anchor",";","\n	"],"docstring_tokens":["Returns","the","anchor","position","of","the","chunk"]}
{"code_tokens":["\n	public","int","size","(",")","\n	","{","\n		return","count",";","\n	"],"docstring_tokens":["Returns","the","size","of","the","chunk"]}
{"code_tokens":["\n	public","int","first","(",")","\n	","{","\n		return","anchor","(",")",";","\n	"],"docstring_tokens":["Returns","the","index","of","the","first","line","of","the","chunk"]}
{"code_tokens":["\n	public","int","last","(",")","\n	","{","\n		return","anchor","(",")","+","size","(",")","-","1",";","\n	"],"docstring_tokens":["Returns","the","index","of","the","last","line","of","the","chunk"]}
{"code_tokens":["\n	public","int","rcsfrom","(",")","\n	","{","\n		return","anchor","+","1",";","\n	"],"docstring_tokens":["Returns","the","from","index","of","the","chunk","in","RCS","terms"]}
{"code_tokens":["\n	public","int","rcsto","(",")","\n	","{","\n		return","anchor","+","count",";","\n	"],"docstring_tokens":["Returns","the","to","index","of","the","chunk","in","RCS","terms"]}
{"code_tokens":["\n	public","void","applyDelete","(","final","List<Object>","target",")","\n	","{","\n		for","(","int","i","=","last","(",")",";","i",">=","first","(",")",";","i--",")","\n		","{","\n			target",".","remove","(","i",")",";","\n		","}","\n	"],"docstring_tokens":["Delete","this","chunk","from","he","given","text"]}
{"code_tokens":["\n	public","void","applyAdd","(","int","start,","final","List<Object>","target",")","\n	","{","\n		for","(","Object","aChunk",":","chunk",")","\n		","{","\n			target",".","add","(","start++,","aChunk",")",";","\n		","}","\n	"],"docstring_tokens":["Add","the","text","of","this","chunk","to","the","target","at","the","given","position"]}
{"code_tokens":["\n	@Override\n	public","void","toString","(","final","StringBuilder","s",")","\n	","{","\n		toString","(","s,","\"\",","\"\"",")",";","\n	"],"docstring_tokens":["Provide","a","string","image","of","the","chunk","using","the","an","empty","prefix","and","postfix"]}
{"code_tokens":["\n	public","StringBuilder","toString","(","final","StringBuilder","s,","final","String","prefix,","final","String","postfix",")","\n	","{","\n		if","(","chunk","!=","null",")","\n		","{","\n			for","(","Object","aChunk",":","chunk",")","\n			","{","\n				s",".","append","(","prefix",")",";","\n				s",".","append","(","aChunk",")",";","\n				s",".","append","(","postfix",")",";","\n			","}","\n		","}","\n		return","s",";","\n	"],"docstring_tokens":["Provide","a","string","image","of","the","chunk","using","the","given","prefix","and","postfix"]}
{"code_tokens":["\n	public","String","rangeString","(",")","\n	","{","\n		StringBuilder","result","=","new","StringBuilder","(",")",";","\n		rangeString","(","result",")",";","\n		return","result",".","toString","(",")",";","\n	"],"docstring_tokens":["Provide","a","string","representation","of","the","numeric","range","of","this","chunk"]}
{"code_tokens":["\n	public","StoreSettings","setAsynchronousQueueCapacity","(","int","queueCapacity",")","\n	","{","\n		if","(","queueCapacity","<","1",")","\n		","{","\n			throw","new","IllegalArgumentException","(","\n				\"The","capacity","of","the","asynchronous","queue","should","be","at","least","1",".","\"",")",";","\n		","}","\n		asynchronousQueueCapacity","=","queueCapacity",";","\n		return","this",";","\n	"],"docstring_tokens":["Sets","the","capacity","of","the","queue","used","to","store","the","pages","which","will","be","stored","asynchronously"]}
{"code_tokens":["\n	protected","void","onConnect","(","ConnectedMessage","message",")","\n	","{","\n	"],"docstring_tokens":["A","callback","method","called","when","a","WebSocket","client","has","connected","to","the","endpoint	","handled","by","this","WebSocketBehavior"]}
{"code_tokens":["\n	protected","void","init","(","final","Chunk","orig,","final","Chunk","rev",")","\n	","{","\n		original","=","orig",";","\n		revised","=","rev",";","\n	"],"docstring_tokens":["Initializes","the","delta","with","the","given","chunks","from","the","original","and","revised","texts"]}
{"code_tokens":["\n	public","final","void","patch","(","final","List<Object>","target",")","throws","PatchFailedException\n	","{","\n		verify","(","target",")",";","\n		try\n		","{","\n			applyTo","(","target",")",";","\n		","}","\n		catch","(","Exception","e",")","\n		","{","\n			throw","new","PatchFailedException","(","e",".","getMessage","(",")",")",";","\n		","}","\n	"],"docstring_tokens":["Applies","this","delta","as","a","patch","to","the","given","text"]}
{"code_tokens":["\n	@Override\n	public","void","toString","(","final","StringBuilder","s",")","\n	","{","\n		original",".","rangeString","(","s",")",";","\n		s",".","append","(","\"x\"",")",";","\n		revised",".","rangeString","(","s",")",";","\n		s",".","append","(","Diff",".","NL",")",";","\n		original",".","toString","(","s,","\">","\",","\"\\n\"",")",";","\n		s",".","append","(","\"---\"",")",";","\n		s",".","append","(","Diff",".","NL",")",";","\n		revised",".","toString","(","s,","\"<","\",","\"\\n\"",")",";","\n	"],"docstring_tokens":["Converts","this","delta","into","its","Unix","diff","style","string","representation"]}
{"code_tokens":["\n	public","String","toRCSString","(","final","String","EOL",")","\n	","{","\n		StringBuilder","s","=","new","StringBuilder","(",")",";","\n		toRCSString","(","s,","EOL",")",";","\n		return","s",".","toString","(",")",";","\n	"],"docstring_tokens":["Converts","this","delta","into","its","RCS","style","string","representation"]}
{"code_tokens":["\r\n	public","PrependingStringBuffer","prepend","(","final","char","ch",")","\r\n	","{","\r\n		int","len","=","1",";","\r\n		if","(","position","<","len",")","\r\n		","{","\r\n			expandCapacity","(","size","+","len",")",";","\r\n		","}","\r\n		position","-=","len",";","\r\n		buffer[position]","=","ch",";","\r\n		size","+=","len",";","\r\n		return","this",";","\r\n	"],"docstring_tokens":["Prepends","one","char","to","this","PrependingStringBuffer"]}
{"code_tokens":["\r\n	public","PrependingStringBuffer","prepend","(","final","String","str",")","\r\n	","{","\r\n		int","len","=","str",".","length","(",")",";","\r\n		if","(","position","<","len",")","\r\n		","{","\r\n			expandCapacity","(","size","+","len",")",";","\r\n		","}","\r\n		str",".","getChars","(","0,","len,","buffer,","position","-","len",")",";","\r\n		position","-=","len",";","\r\n		size","+=","len",";","\r\n		return","this",";","\r\n	"],"docstring_tokens":["Prepends","the","string","to","this","PrependingStringBuffer"]}
{"code_tokens":["\r\n	public","int","length","(",")","\r\n	","{","\r\n		return","size",";","\r\n	"],"docstring_tokens":["Returns","the","size","of","this","PrependingStringBuffer"]}
{"code_tokens":["\r\n	public","static","Time","now","(",")","\r\n	","{","\r\n		return","millis","(","System",".","currentTimeMillis","(",")",")",";","\r\n	"],"docstring_tokens":["Retrieves","a","Time","instance","based","on","the","current","time"]}
{"code_tokens":["\r\n	public","static","Time","millis","(","final","long","time",")","\r\n	","{","\r\n		return","new","Time","(","time",")",";","\r\n	"],"docstring_tokens":["Retrieves","a","Time","instance","based","on","the","given","milliseconds"]}
{"code_tokens":["\r\n	public","static","Time","valueOf","(","final","Calendar","calendar,","final","TimeOfDay","timeOfDay",")","\r\n	","{","\r\n		synchronized","(","calendar",")","\r\n		","{","\r\n			//","Set","time","to","midnight","today\r\n			calendar",".","setTimeInMillis","(","System",".","currentTimeMillis","(",")",")",";","\r\n			calendar",".","set","(","Calendar",".","HOUR_OF_DAY,","0",")",";","//","﻿WICKET-2349\r\n			calendar",".","set","(","Calendar",".","MINUTE,","0",")",";","\r\n			calendar",".","set","(","Calendar",".","SECOND,","0",")",";","\r\n			calendar",".","set","(","Calendar",".","MILLISECOND,","0",")",";","//","WICKET-1670\r\n\r\n			//","Add","time","of","day","milliseconds","to","midnight\r\n			return","millis","(","calendar",".","getTimeInMillis","(",")","+","timeOfDay",".","getMilliseconds","(",")",")",";","\r\n		","}","\r\n	"],"docstring_tokens":["Retrieves","a","Time","instance","based","on","the","given","Calendar","and","	","TimeOfDay","objects"]}
{"code_tokens":["\r\n	public","static","Time","valueOf","(","final","Date","date",")","\r\n	","{","\r\n		return","new","Time","(","date",".","getTime","(",")",")",";","\r\n	"],"docstring_tokens":["Retrieves","a","Time","instance","based","on","the","given","Date","object"]}
{"code_tokens":["\r\n	public","static","Time","valueOf","(","final","TimeOfDay","timeOfDay",")","\r\n	","{","\r\n		return","valueOf","(","localtime,","timeOfDay",")",";","\r\n	"],"docstring_tokens":["Retrieves","a","Time","instance","based","on","the","given","TimeOfDay","object"]}
{"code_tokens":["\r\n	public","Time","add","(","final","Duration","duration",")","\r\n	","{","\r\n		return","millis","(","getMilliseconds","(",")","+","duration",".","getMilliseconds","(",")",")",";","\r\n	"],"docstring_tokens":["Adds","the","given","Duration","to","this","Time","object,","moving","the","time","into","	","the","future"]}
{"code_tokens":["\r\n	public","Duration","elapsedSince","(",")","\r\n	","{","\r\n		final","Time","now","=","now","(",")",";","\r\n		if","(","this",".","greaterThan","(","now",")",")","\r\n		","{","\r\n			throw","new","IllegalStateException","(","\"This","time","is","in","the","future\"",")",";","\r\n		","}","\r\n		return","now",".","subtract","(","this",")",";","\r\n	"],"docstring_tokens":["Calculates","the","amount","of","time","that","has","elapsed","since","this","Time","value"]}
{"code_tokens":["\r\n	public","Time","subtract","(","final","Duration","duration",")","\r\n	","{","\r\n		return","millis","(","getMilliseconds","(",")","-","duration",".","getMilliseconds","(",")",")",";","\r\n	"],"docstring_tokens":["Subtracts","the","given","Duration","from","this","Time","object,","moving","the","time","	","into","the","past"]}
{"code_tokens":["\r\n	public","Duration","subtract","(","final","Time","that",")","\r\n	","{","\r\n		return","Duration",".","milliseconds","(","getMilliseconds","(",")","-","that",".","getMilliseconds","(",")",")",";","\r\n	"],"docstring_tokens":["Subtract","time","from","this","and","returns","the","difference","as","a","Duration","object"]}
{"code_tokens":["\r\n	@Override\r\n	public","String","toString","(",")","\r\n	","{","\r\n		return","toDateString","(",")","+","\"-\"","+","toTimeString","(",")",";","\r\n	"],"docstring_tokens":["Converts","this","Time","value","to","a","String","suitable","for","use","in","a","file","	","system","name"]}
{"code_tokens":["\r\n	public","String","toString","(","final","Calendar","calendar,","final","String","format",")","\r\n	","{","\r\n		final","SimpleDateFormat","dateTimeFormat","=","new","SimpleDateFormat","(","format,","Locale",".","ENGLISH",")",";","\r\n		dateTimeFormat",".","setCalendar","(","calendar","==","null","?","localtime",":","calendar",")",";","\r\n		return","dateTimeFormat",".","format","(","new","Date","(","getMilliseconds","(",")",")",")",";","\r\n	"],"docstring_tokens":["Converts","this","Time","object","to","a","String","using","the","given","	","Calendar","and","format"]}
{"code_tokens":["\r\n	public","String","toString","(","final","String","format",")","\r\n	","{","\r\n		return","toString","(","null,","format",")",";","\r\n	"],"docstring_tokens":["Converts","this","Time","value","to","a","String","using","the","given","format"]}
{"code_tokens":["\n	@Override\n	public","ComponentTag","mutable","(",")","\n	","{","\n		if","(","xmlTag",".","isMutable","(",")",")","\n		","{","\n			return","this",";","\n		","}","\n		else\n		","{","\n			final","WicketTag","tag","=","new","WicketTag","(","xmlTag",".","mutable","(",")",")",";","\n			copyPropertiesTo","(","tag",")",";","\n\n			return","tag",";","\n		","}","\n	"],"docstring_tokens":["Gets","this","tag","if","it","is","already","mutable,","or","a","mutable","copy","of","this","tag","if","it","is","immutable"]}
{"code_tokens":["\n	@Override\n	public","final","void","addListener","(","final","IWizardModelListener","listener",")","\n	","{","\n		wizardModelListeners",".","add","(","listener",")",";","\n	"],"docstring_tokens":["Adds","a","wizard","model","listener"]}
{"code_tokens":["\n	@Override\n	public","final","void","removeListener","(","final","IWizardModelListener","listener",")","\n	","{","\n		wizardModelListeners",".","remove","(","listener",")",";","\n	"],"docstring_tokens":["Removes","a","wizard","model","listener"]}
{"code_tokens":["\n	public","final","<T","extends","Component>","void","unauthorize","(","final","Class<T>","componentClass,\n		final","Roles","rolesToRemove",")","\n	","{","\n		if","(","componentClass","==","null",")","\n		","{","\n			throw","new","IllegalArgumentException","(","\"Argument","componentClass","cannot","be","null\"",")",";","\n		","}","\n\n		if","(","rolesToRemove","==","null",")","\n		","{","\n			throw","new","IllegalArgumentException","(","\"Argument","rolesToRemove","cannot","be","null\"",")",";","\n		","}","\n\n		Roles","roles","=","rolesForComponentClass",".","get","(","componentClass",")",";","\n		if","(","roles","!=","null",")","\n		","{","\n			roles",".","removeAll","(","rolesToRemove",")",";","\n		","}","\n		else\n		","{","\n			roles","=","new","Roles","(",")",";","\n			rolesForComponentClass",".","put","(","componentClass,","roles",")",";","\n		","}","\n\n		//","If","we","removed","the","last","authorized","role,","we","authorize","the","empty","role\n		//","so","that","removing","authorization","can't","suddenly","open","something","up","to\n		//","everyone",".","\n		if","(","roles",".","size","(",")","==","0",")","\n		","{","\n			roles",".","add","(","MetaDataRoleAuthorizationStrategy",".","NO_ROLE",")",";","\n		","}","\n	"],"docstring_tokens":["Removes","permission","for","the","given","role","to","instantiate","the","given","class"]}
{"code_tokens":["\n	public","static","void","main","(","String[]","args",")","throws","Exception\n	","{","\n		System",".","setProperty","(","\"wicket",".","configuration\",","\"development\"",")",";","\n\n		Server","server","=","new","Server","(",")",";","\n\n		HttpConfiguration","http_config","=","new","HttpConfiguration","(",")",";","\n		http_config",".","setSecureScheme","(","\"https\"",")",";","\n		http_config",".","setSecurePort","(","8443",")",";","\n		http_config",".","setOutputBufferSize","(","32768",")",";","\n\n		ServerConnector","http","=","new","ServerConnector","(","server,","new","HttpConnectionFactory","(","http_config",")",")",";","\n		http",".","setPort","(","8080",")",";","\n		http",".","setIdleTimeout","(","1000","*","60","*","60",")",";","\n\n		server",".","addConnector","(","http",")",";","\n\n		Resource","keystore","=","Resource",".","newClassPathResource","(","\"/keystore\"",")",";","\n		if","(","keystore","!=","null","&&","keystore",".","exists","(",")",")","\n		","{","\n			//","if","a","keystore","for","a","SSL","certificate","is","available,","start","a","SSL\n			//","connector","on","port","8443",".","\n			//","By","default,","the","quickstart","comes","with","a","Apache","Wicket","Quickstart\n			//","Certificate","that","expires","about","half","way","september","2021",".","Do","not\n			//","use","this","certificate","anywhere","important","as","the","passwords","are\n			//","available","in","the","source",".","\n\n			SslContextFactory","sslContextFactory","=","new","SslContextFactory",".","Server","(",")",";","\n			sslContextFactory",".","setKeyStoreResource","(","keystore",")",";","\n			sslContextFactory",".","setKeyStorePassword","(","\"wicket\"",")",";","\n			sslContextFactory",".","setKeyManagerPassword","(","\"wicket\"",")",";","\n\n			HttpConfiguration","https_config","=","new","HttpConfiguration","(","http_config",")",";","\n			https_config",".","addCustomizer","(","new","SecureRequestCustomizer","(",")",")",";","\n\n			ServerConnector","https","=","new","ServerConnector","(","server,","new","SslConnectionFactory","(","\n					sslContextFactory,","\"http/1",".","1\"",")",",","new","HttpConnectionFactory","(","https_config",")",")",";","\n			https",".","setPort","(","8443",")",";","\n			https",".","setIdleTimeout","(","500000",")",";","\n\n			server",".","addConnector","(","https",")",";","\n			System",".","out",".","println","(","\"SSL","access","to","the","examples","has","been","enabled","on","port","8443\"",")",";","\n			System",".","out\n					",".","println","(","\"You","can","access","the","application","using","SSL","on","https://localhost:8443\"",")",";","\n			System",".","out",".","println","(",")",";","\n		","}","\n\n		WebAppContext","bb","=","new","WebAppContext","(",")",";","\n		bb",".","setServer","(","server",")",";","\n		bb",".","setContextPath","(","\"/\"",")",";","\n		bb",".","setWar","(","\"src/main/webapp\"",")",";","\n\n		//","uncomment","next","lines","if","you","want","to","test","with","session","persistence\n//		DefaultSessionCache","sessionCache","=","new","DefaultSessionCache","(","bb",".","getSessionHandler","(",")",")",";","\n//		FileSessionDataStore","sessionStore","=","new","FileSessionDataStore","(",")",";","\n//		sessionStore",".","setStoreDir","(","new","File","(","\"",".","/jetty-session-data\"",")",")",";","\n//		sessionCache",".","setSessionDataStore","(","sessionStore",")",";","\n//		bb",".","getSessionHandler","(",")",".","setSessionCache","(","sessionCache",")",";","\n		\n		ServerContainer","serverContainer","=","WebSocketServerContainerInitializer",".","initialize","(","bb",")",";","\n		serverContainer",".","addEndpoint","(","new","WicketServerEndpointConfig","(",")",")",";","\n\n		//","uncomment","next","line","if","you","want","to","test","with","JSESSIONID","encoded","in","the","urls\n//		","(","(","AbstractSessionManager",")","bb",".","getSessionHandler","(",")",".","getSessionManager","(",")",")",".","setUsingCookies","(","false",")",";","\n\n		server",".","setHandler","(","bb",")",";","\n\n		MBeanServer","mBeanServer","=","ManagementFactory",".","getPlatformMBeanServer","(",")",";","\n		MBeanContainer","mBeanContainer","=","new","MBeanContainer","(","mBeanServer",")",";","\n		server",".","addEventListener","(","mBeanContainer",")",";","\n		server",".","addBean","(","mBeanContainer",")",";","\n\n		try\n		","{","\n			server",".","start","(",")",";","\n			server",".","join","(",")",";","\n		","}","\n		catch","(","Exception","e",")","\n		","{","\n			e",".","printStackTrace","(",")",";","\n			System",".","exit","(","100",")",";","\n		","}","\n	"],"docstring_tokens":["Main","function,","starts","the","jetty","server"]}
{"code_tokens":["\n	public","void","init","(","final","boolean","isServlet,","final","FilterConfig","filterConfig",")","\n		throws","ServletException\n	","{","\n		this",".","filterConfig","=","filterConfig",";","\n		this",".","isServlet","=","isServlet",";","\n		initIgnorePaths","(","filterConfig",")",";","\n\n		final","ClassLoader","previousClassLoader","=","Thread",".","currentThread","(",")",".","getContextClassLoader","(",")",";","\n		final","ClassLoader","newClassLoader","=","getClassLoader","(",")",";","\n		try\n		","{","\n			if","(","previousClassLoader","!=","newClassLoader",")","\n			","{","\n				Thread",".","currentThread","(",")",".","setContextClassLoader","(","newClassLoader",")",";","\n			","}","\n\n			//","locate","application","instance","unless","it","was","already","specified","during","construction\n			if","(","application","==","null",")","\n			","{","\n				applicationFactory","=","getApplicationFactory","(",")",";","\n				application","=","applicationFactory",".","createApplication","(","this",")",";","\n			","}","\n\n			if","(","application",".","getName","(",")","==","null",")","\n			","{","\n				application",".","setName","(","filterConfig",".","getFilterName","(",")",")",";","\n			","}","\n			application",".","setWicketFilter","(","this",")",";","\n\n			//","Allow","the","filterPath","to","be","preset","via","setFilterPath","(",")","\n			String","configureFilterPath","=","getFilterPath","(",")",";","\n\n			if","(","configureFilterPath","==","null",")","\n			","{","\n				configureFilterPath","=","getFilterPathFromConfig","(","filterConfig",")",";","\n\n				if","(","configureFilterPath","==","null",")","\n				","{","\n					configureFilterPath","=","getFilterPathFromWebXml","(","isServlet,","filterConfig",")",";","\n\n					if","(","configureFilterPath","==","null",")","\n					","{","\n						configureFilterPath","=","getFilterPathFromAnnotation","(","isServlet",")",";","\n					","}","\n				","}","\n\n				if","(","configureFilterPath","!=","null",")","\n				","{","\n					setFilterPath","(","configureFilterPath",")",";","\n				","}","\n			","}","\n\n			if","(","getFilterPath","(",")","==","null",")","\n			","{","\n				log",".","warn","(","\"Unable","to","determine","filter","path","from","filter","init-param,","web",".","xml,","\"\n					+","\"or","servlet","3",".","0","annotations",".","Assuming","user","will","set","filter","path","\"\n					+","\"manually","by","calling","setFilterPath","(","String",")","\"",")",";","\n			","}","\n\n			ThreadContext",".","setApplication","(","application",")",";","\n			try\n			","{","\n				application",".","initApplication","(",")",";","\n\n				//","Give","the","application","the","option","to","log","that","it","is","started\n				application",".","logStarted","(",")",";","\n			","}","\n			finally\n			","{","\n				ThreadContext",".","detach","(",")",";","\n			","}","\n		","}","\n		catch","(","Exception","e",")","\n		","{","\n			//","#destroy","(",")","might","not","be","called","by","the","web","container","when","#init","(",")","fails,\n			//","so","destroy","now\n			log",".","error","(","String",".","format","(","\"The","initialization","of","an","application","with","name","'%s'","has","failed",".","\",\n					filterConfig",".","getFilterName","(",")",")",",","e",")",";","\n\n			try\n			","{","\n				destroy","(",")",";","\n			","}","\n			catch","(","Exception","destroyException",")","\n			","{","\n				log",".","error","(","\"Unable","to","destroy","after","initialization","failure\",","destroyException",")",";","\n			","}","\n\n			throw","new","ServletException","(","e",")",";","\n		","}","\n		finally\n		","{","\n			if","(","newClassLoader","!=","previousClassLoader",")","\n			","{","\n				Thread",".","currentThread","(",")",".","setContextClassLoader","(","previousClassLoader",")",";","\n			","}","\n		","}","\n	"],"docstring_tokens":["Servlets","and","Filters","are","treated","essentially","the","same","with","Wicket"]}
{"code_tokens":["\n	public","String","getRelativePath","(","HttpServletRequest","request",")","\n	","{","\n		String","path","=","Strings",".","stripJSessionId","(","request",".","getRequestURI","(",")",")",";","\n		String","contextPath","=","request",".","getContextPath","(",")",";","\n		path","=","path",".","substring","(","contextPath",".","length","(",")",")",";","\n		if","(","isServlet",")","\n		","{","\n			String","servletPath","=","request",".","getServletPath","(",")",";","\n			path","=","path",".","substring","(","servletPath",".","length","(",")",")",";","\n		","}","\n\n		if","(","path",".","length","(",")",">","0",")","\n		","{","\n			path","=","path",".","substring","(","1",")",";","\n		","}","\n\n		//","We","should","always","be","under","the","rootPath,","except\n		//","for","the","special","case","of","someone","landing","on","the\n		//","home","page","without","a","trailing","slash",".","\n		String","filterPath","=","getFilterPath","(",")",";","\n		if","(","!path",".","startsWith","(","filterPath",")",")","\n		","{","\n			if","(","filterPath",".","equals","(","path","+","\"/\"",")",")","\n			","{","\n				path","+=","\"/\"",";","\n			","}","\n		","}","\n		if","(","path",".","startsWith","(","filterPath",")",")","\n		","{","\n			path","=","path",".","substring","(","filterPath",".","length","(",")",")",";","\n		","}","\n\n		return","path",";","\n\n	"],"docstring_tokens":["Returns","a","relative","path","to","the","filter","path","and","context","root","from","an","HttpServletRequest","-","use	","this","to","resolve","a","Wicket","request"]}
{"code_tokens":["\n	private","boolean","shouldIgnorePath","(","final","HttpServletRequest","request",")","\n	","{","\n		boolean","ignore","=","false",";","\n		if","(","ignorePaths",".","size","(",")",">","0",")","\n		","{","\n			String","relativePath","=","getRelativePath","(","request",")",";","\n			if","(","Strings",".","isEmpty","(","relativePath",")","==","false",")","\n			","{","\n				for","(","String","path",":","ignorePaths",")","\n				","{","\n					if","(","relativePath",".","startsWith","(","path",")",")","\n					","{","\n						ignore","=","true",";","\n						break",";","\n					","}","\n				","}","\n			","}","\n		","}","\n\n		return","ignore",";","\n	"],"docstring_tokens":["Checks","whether","this","is","a","request","to","an","ignored","path"]}
{"code_tokens":["\n	public","Contact","generate","(",")","\n	","{","\n		Contact","contact","=","new","Contact","(","randomString","(","firstNames",")",",","randomString","(","lastNames",")",")",";","\n		contact",".","setId","(","generateId","(",")",")",";","\n		contact",".","setHomePhone","(","generatePhoneNumber","(",")",")",";","\n		contact",".","setCellPhone","(","generatePhoneNumber","(",")",")",";","\n		contact",".","setBornDate","(","generateDate","(",")",")",";","\n		\n		return","contact",";","\n	"],"docstring_tokens":["generates","a","new","contact"]}
{"code_tokens":["\n	public","void","generate","(","Collection<Contact>","collection,","int","count",")","\n	","{","\n		for","(","int","i","=","0",";","i","<","count",";","i++",")","\n		","{","\n			collection",".","add","(","generate","(",")",")",";","\n		","}","\n	"],"docstring_tokens":["Generates","count","number","contacts","and","puts","them","into","collection	","collection"]}
{"code_tokens":["\n	public","static","OnChangeAjaxBehavior","onChange","(","SerializableConsumer<AjaxRequestTarget>","onChange",")","\n	","{","\n		Args",".","notNull","(","onChange,","\"onChange\"",")",";","\n\n		return","new","OnChangeAjaxBehavior","(",")","\n		","{","\n			private","static","final","long","serialVersionUID","=","1L",";","\n\n			@Override\n			protected","void","onUpdate","(","AjaxRequestTarget","target",")","\n			","{","\n				onChange",".","accept","(","target",")",";","\n			","}","\n		","}",";","\n	"],"docstring_tokens":["Creates","an","OnChangeAjaxBehavior","based","on","lambda","expressions"]}
{"code_tokens":["\r\n	@Override\r\n	public","boolean","accept","(","String","path",")","\r\n	","{","\r\n		//","First","check","the","cache\r\n		if","(","cache","!=","null",")","\r\n		","{","\r\n			Boolean","rtn","=","cache",".","get","(","path",")",";","\r\n			if","(","rtn","!=","null",")","\r\n			","{","\r\n				return","rtn",";","\r\n			","}","\r\n		","}","\r\n\r\n		//","Check","typical","files","such","as","log4j",".","xml","etc",".","\r\n		if","(","super",".","accept","(","path",")","==","false",")","\r\n		","{","\r\n			return","false",";","\r\n		","}","\r\n\r\n		//","Check","against","the","pattern\r\n		boolean","hit","=","false",";","\r\n		for","(","SearchPattern","pattern",":","new","ReverseListIterator<>","(","this",".","pattern",")",")","\r\n		","{","\r\n			if","(","(","pattern","!=","null",")","&&","pattern",".","isActive","(",")",")","\r\n			","{","\r\n				if","(","pattern",".","matches","(","path",")",")","\r\n				","{","\r\n					hit","=","pattern",".","isInclude","(",")",";","\r\n					break",";","\r\n				","}","\r\n			","}","\r\n		","}","\r\n\r\n		if","(","cache","!=","null",")","\r\n		","{","\r\n			//","Do","not","use","putIfAbsent","(",")",".","See","newCache","(",")","\r\n			cache",".","put","(","path,","(","hit","?","Boolean",".","TRUE",":","Boolean",".","FALSE",")",")",";","\r\n		","}","\r\n\r\n		if","(","hit","==","false",")","\r\n		","{","\r\n			log",".","warn","(","\"Access","denied","to","shared","(","static",")","resource:","\"","+","path",")",";","\r\n		","}","\r\n\r\n		return","hit",";","\r\n	"],"docstring_tokens":["Whether","the","provided","absolute","path","is","accepted"]}
{"code_tokens":["\n	protected","Result","doCheck","(","Object","object",")","\n	","{","\n		return","Result",".","SUCCESS",";","\n	"],"docstring_tokens":["The","implementations","should","make","the","specific","check","on","the","object"]}
{"code_tokens":["\n	public","Word","next","(",")","\n	","{","\n		if","(","index","==","words",".","size","(",")",")","\n		","{","\n			shuffle","(",")",";","\n		","}","\n		return","new","Word","(","words",".","get","(","index++",")",")",";","\n	"],"docstring_tokens":["Returns","the","next","word","from","the","word","generator"]}
{"code_tokens":["\n	public","int","size","(",")","\n	","{","\n		return","words",".","size","(",")",";","\n	"],"docstring_tokens":["Get","the","number","of","words","that","were","discovered"]}
{"code_tokens":["\n	public","CsrfPreventionRequestCycleListener","setNoOriginAction","(","CsrfAction","action",")","\n	","{","\n		this",".","noOriginAction","=","action",";","\n		return","this",";","\n	"],"docstring_tokens":["Sets","the","action","when","no","Origin","header","is","present","in","the","request"]}
{"code_tokens":["\n	protected","IRequestHandler","unwrap","(","IRequestHandler","handler",")","\n	","{","\n		while","(","handler","instanceof","IRequestHandlerDelegate",")","\n			handler","=","(","(","IRequestHandlerDelegate",")","handler",")",".","getDelegateHandler","(",")",";","\n		return","handler",";","\n	"],"docstring_tokens":["Unwraps","the","handler","if","it","is","a","IRequestHandlerDelegate","down","to","the","deepest","nested	","handler"]}
{"code_tokens":["\n	protected","void","checkRequest","(","HttpServletRequest","request,","String","sourceUri,","IRequestablePage","page",")","\n	","{","\n		if","(","sourceUri","==","null","||","sourceUri",".","isEmpty","(",")",")","\n		","{","\n			log",".","debug","(","\"Source","URI","not","present","in","request,","{","}","\",","noOriginAction",")",";","\n			switch","(","noOriginAction",")","\n			","{","\n				case","ALLOW",":\n					allowHandler","(","request,","sourceUri,","page",")",";","\n					break",";","\n				case","SUPPRESS",":\n					suppressHandler","(","request,","sourceUri,","page",")",";","\n					break",";","\n				case","ABORT",":\n					abortHandler","(","request,","sourceUri,","page",")",";","\n					break",";","\n			","}","\n			return",";","\n		","}","\n		sourceUri","=","sourceUri",".","toLowerCase","(","Locale",".","ROOT",")",";","\n\n		//","if","the","origin","is","a","know","and","trusted","origin,","don't","check","any","further","but","allow","the","request\n		if","(","isWhitelistedHost","(","sourceUri",")",")","\n		","{","\n			whitelistedHandler","(","request,","sourceUri,","page",")",";","\n			return",";","\n		","}","\n\n		//","check","if","the","origin","HTTP","header","matches","the","request","URI\n		if","(","!isLocalOrigin","(","request,","sourceUri",")",")","\n		","{","\n			log",".","debug","(","\"Source","URI","conflicts","with","request","origin,","{","}","\",","conflictingOriginAction",")",";","\n			switch","(","conflictingOriginAction",")","\n			","{","\n				case","ALLOW",":\n					allowHandler","(","request,","sourceUri,","page",")",";","\n					break",";","\n				case","SUPPRESS",":\n					suppressHandler","(","request,","sourceUri,","page",")",";","\n					break",";","\n				case","ABORT",":\n					abortHandler","(","request,","sourceUri,","page",")",";","\n					break",";","\n			","}","\n		","}","\n		else\n		","{","\n			matchingOrigin","(","request,","sourceUri,","page",")",";","\n		","}","\n	"],"docstring_tokens":["Performs","the","check","of","the","Origin","or","Referer","header","that","is","targeted","at","the	","page"]}
{"code_tokens":["\n	protected","void","matchingOrigin","(","HttpServletRequest","request,","String","origin,\n			IRequestablePage","page",")","\n	","{","\n		onMatchingOrigin","(","request,","origin,","page",")",";","\n		if","(","log",".","isDebugEnabled","(",")",")","\n		","{","\n			log",".","debug","(","\"CSRF","Origin","{","}","matched","requested","resource,","allowed","for","page","{","}","\",","origin,\n					page",".","getClass","(",")",".","getName","(",")",")",";","\n		","}","\n	"],"docstring_tokens":["Handles","the","case","where","an","origin","was","checked","and","matched","the","request","origin"]}
{"code_tokens":["\n	@Override\n	public","IRequestHandler","onException","(","final","RequestCycle","cycle,","final","Exception","ex",")","\n	","{","\n		final","List<IRequestHandler>","handlers","=","new","ArrayList<IRequestHandler>","(",")",";","\n\n		notify","(","new","INotifier<IRequestCycleListener>","(",")","\n		","{","\n			@Override\n			public","void","notify","(","IRequestCycleListener","listener",")","\n			","{","\n				IRequestHandler","handler","=","listener",".","onException","(","cycle,","ex",")",";","\n				if","(","handler","!=","null",")","\n				","{","\n					handlers",".","add","(","handler",")",";","\n				","}","\n			","}","\n		","}",")",";","\n\n		if","(","handlers",".","isEmpty","(",")",")","\n		","{","\n			return","null",";","\n		","}","\n		if","(","handlers",".","size","(",")",">","1",")","\n		","{","\n			logger",".","debug","(","\n				\"","{","}","exception","handlers","available","for","exception","{","}",",","using","the","first","handler\",\n				handlers",".","size","(",")",",","ex",")",";","\n		","}","\n		return","handlers",".","get","(","0",")",";","\n	"],"docstring_tokens":["Notifies","all","registered","listeners","of","the","exception","and","calls","the","first","handler","that","was	","returned","by","the","listeners"]}
{"code_tokens":["\n	@Override\n	protected","void","appendOptionHtml","(","final","AppendingStringBuffer","buffer,","final","T","choice,","int","index,\n		final","String","selected",")","\n	","{","\n		//","Append","option","suffix\n		buffer",".","append","(","getPrefix","(","index,","choice",")",")",";","\n\n		String","id","=","getChoiceRenderer","(",")",".","getIdValue","(","choice,","index",")",";","\n		final","String","idAttr","=","getMarkupId","(",")","+","\"-\"","+","id",";","\n\n		boolean","enabled","=","isEnabledInHierarchy","(",")","&&","!isDisabled","(","choice,","index,","selected",")",";","\n\n		CharSequence","renderValue","=","renderValue","(","choice",")",";","\n\n		//","Allows","user","to","add","attributes","to","the","<label",".",".",">","tag\n		IValueMap","labelAttrs","=","getAdditionalAttributesForLabel","(","index,","choice",")",";","\n		StringBuilder","extraLabelAttributes","=","new","StringBuilder","(",")",";","\n		if","(","labelAttrs","!=","null",")","\n		","{","\n			for","(","Map",".","Entry<String,","Object>","attr",":","labelAttrs",".","entrySet","(",")",")","\n			","{","\n				extraLabelAttributes",".","append","(","'","'",")","\n						",".","append","(","Strings",".","escapeMarkup","(","attr",".","getKey","(",")",")",")","\n						",".","append","(","\"=\\\"\"",")","\n						",".","append","(","Strings",".","escapeMarkup","(","attr",".","getValue","(",")",".","toString","(",")",")",")","\n						",".","append","(","'\"'",")",";","\n			","}","\n		","}","\n\n		labelPosition",".","before","(","buffer,","idAttr,","extraLabelAttributes,","renderValue",")",";","\n\n		//","Add","radio","tag\n		buffer",".","append","(","\"<input","name=\\\"\"",")","\n			",".","append","(","getInputName","(",")",")","\n			",".","append","(","'\"'",")","\n			",".","append","(","\"","type=\\\"radio\\\"\"",")","\n			",".","append","(","(","isSelected","(","choice,","index,","selected",")","?","\"","checked=\\\"checked\\\"\"",":","\"\"",")",")","\n			",".","append","(","(","enabled","?","\"\"",":","\"","disabled=\\\"disabled\\\"\"",")",")","\n			",".","append","(","\"","value=\\\"\"",")","\n			",".","append","(","Strings",".","escapeMarkup","(","id",")",")","\n			",".","append","(","\"\\\"","id=\\\"\"",")","\n			",".","append","(","Strings",".","escapeMarkup","(","idAttr",")",")","\n			",".","append","(","'\"'",")",";","\n\n		//","Allows","user","to","add","attributes","to","the","<input",".",".",">","tag\n		","{","\n			IValueMap","attrs","=","getAdditionalAttributes","(","index,","choice",")",";","\n			if","(","attrs","!=","null",")","\n			","{","\n				for","(","Map",".","Entry<String,","Object>","attr",":","attrs",".","entrySet","(",")",")","\n				","{","\n					buffer",".","append","(","'","'",")","\n						",".","append","(","Strings",".","escapeMarkup","(","attr",".","getKey","(",")",")",")","\n						",".","append","(","\"=\\\"\"",")","\n						",".","append","(","Strings",".","escapeMarkup","(","attr",".","getValue","(",")",".","toString","(",")",")",")","\n						",".","append","(","'\"'",")",";","\n				","}","\n			","}","\n		","}","\n\n		DebugSettings","debugSettings","=","getApplication","(",")",".","getDebugSettings","(",")",";","\n		String","componentPathAttributeName","=","debugSettings",".","getComponentPathAttributeName","(",")",";","\n		if","(","Strings",".","isEmpty","(","componentPathAttributeName",")","==","false",")","\n		","{","\n			CharSequence","path","=","getPageRelativePath","(",")",";","\n			path","=","Strings",".","replaceAll","(","path,","\"_\",","\"__\"",")",";","\n			path","=","Strings",".","replaceAll","(","path,","\":\",","\"_\"",")",";","\n			buffer",".","append","(","'","'",")",".","append","(","componentPathAttributeName",")",".","append","(","\"=\\\"\"",")","\n				",".","append","(","path",")","\n				",".","append","(","\"_input_\"",")","\n				",".","append","(","index",")","\n				",".","append","(","'\"'",")",";","\n		","}","\n\n		buffer",".","append","(","\"/>\"",")",";","\n\n		labelPosition",".","after","(","buffer,","idAttr,","extraLabelAttributes,","renderValue",")",";","\n\n		//","Append","option","suffix\n		buffer",".","append","(","getSuffix","(","index,","choice",")",")",";","\n	"],"docstring_tokens":["Generates","and","appends","html","for","a","single","choice","into","the","provided","buffer"]}
{"code_tokens":["\n	public","final","boolean","add","(","final","IMarkupFilter","filter",")","\n	","{","\n		return","getMarkupFilters","(",")",".","add","(","filter",")",";","\n	"],"docstring_tokens":["Add","a","markup","filter"]}
{"code_tokens":["\n	protected","void","onContentLoaded","(","T","content,","Optional<AjaxRequestTarget>","target",")","\n	","{","\n	"],"docstring_tokens":["Called","after","the","loading","component","was","replaced","with","the","lazy","loaded","content.	","	","This","default","implementation","does","nothing"]}
{"code_tokens":["\n	protected","void","initTimer","(",")","\n	","{","\n		//","when","the","timer","is","not","yet","installed","add","it\n		List<AjaxLazyLoadTimer>","behaviors","=","getPage","(",")",".","getBehaviors","(","AjaxLazyLoadTimer",".","class",")",";","\n		if","(","behaviors",".","isEmpty","(",")",")","{","\n			AbstractAjaxTimerBehavior","timer","=","new","AjaxLazyLoadTimer","(",")",";","\n			getPage","(",")",".","add","(","timer",")",";","\n			\n			getRequestCycle","(",")",".","find","(","AjaxRequestTarget",".","class",")",".","ifPresent","(","target","->","{","\n				//","the","timer","will","not","be","rendered,","so","restart","it","immediately","on","the","Ajax","target\n				timer",".","restart","(","target",")",";","\n			","}",")",";","\n		","}","\n	"],"docstring_tokens":["Initialize","a","timer","-","default","implementation","installs","an","AbstractAjaxTimerBehavior","on","the","page,	","if","it","is","not","already","present"]}
{"code_tokens":["\n	private","void","updateResult","(","final","Component","result,","final","CharSequence","mailBody,\n		final","AjaxRequestTarget","target",")","\n	","{","\n		result",".","setDefaultModelObject","(","mailBody",")",";","\n		target",".","add","(","result",")",";","\n	"],"docstring_tokens":["Updates","the","component","that","is","used","to","show","the","generated","mail","body","for","this","example"]}
{"code_tokens":["\n	protected","boolean","mustCheck","(","final","Component","component",")","\n	","{","\n		final","StatelessComponent","ann","=","component",".","getClass","(",")",".","getAnnotation","(","StatelessComponent",".","class",")",";","\n		return","(","ann","!=","null",")","&&","ann",".","enabled","(",")",";","\n	"],"docstring_tokens":["Returns","true","if","checker","must","check","given","component,","false	","otherwise"]}
{"code_tokens":["\n	public","final","String","getScope","(",")","\n	","{","\n		return","scope",";","\n	"],"docstring_tokens":["Get","the","scope","of","the","header","part"]}
{"code_tokens":["\r\n	@Override\r\n	public","final","void","setNextFilter","(","final","IMarkupFilter","parent",")","\r\n	","{","\r\n		throw","new","IllegalArgumentException","(","\"You","can","not","set","the","parent","with","RootMarkupFilter",".","\"",")",";","\r\n	"],"docstring_tokens":["This","is","the","root","filter"]}
{"code_tokens":["\n	public","void","add","(","final","IWizardStep","step,","final","ICondition","condition",")","\n	","{","\n		steps",".","add","(","step",")",";","\n		conditions",".","add","(","condition",")",";","\n	"],"docstring_tokens":["Adds","an","optional","step","to","the","model"]}
{"code_tokens":["\n	@Override\n	public","final","IWizardStep","getActiveStep","(",")","\n	","{","\n		return","activeStep",";","\n	"],"docstring_tokens":["Gets","the","current","active","step","the","wizard","should","display"]}
{"code_tokens":["\n	protected","final","IWizardStep","findLastStep","(",")","\n	","{","\n		for","(","int","i","=","conditions",".","size","(",")","-","1",";","i",">=","0",";","i--",")","\n		","{","\n			ICondition","condition","=","conditions",".","get","(","i",")",";","\n			if","(","condition",".","evaluate","(",")",")","\n			","{","\n				return","steps",".","get","(","i",")",";","\n			","}","\n		","}","\n\n		throw","new","IllegalStateException","(","\"Wizard","contains","no","visible","steps\"",")",";","\n	"],"docstring_tokens":["Finds","the","last","step","in","this","model"]}
{"code_tokens":["\n	public","final","boolean","isAttached","(",")","\n	","{","\n		return","state","==","InternalState",".","ATTACHED",";","\n	"],"docstring_tokens":["Gets","the","attached","status","of","this","model","instance"]}
{"code_tokens":["\n	public","static","<T>","LoadableDetachableModel<T>","of","(","SerializableSupplier<T>","getter",")","\n	","{","\n		return","new","LoadableDetachableModel<T>","(",")","\n		","{","\n			private","static","final","long","serialVersionUID","=","1L",";","\n\n			@Override\n			protected","T","load","(",")","\n			","{","\n				return","getter",".","get","(",")",";","\n			","}","\n		","}",";","\n	"],"docstring_tokens":["Create","a","LoadableDetachableModel","for","the","given","supplier"]}
{"code_tokens":["\n	@SuppressWarnings","(","\"resource\"",")","\n	public","final","CharSequence","getContent","(","String","filterName",")","\n	","{","\n		if","(","filterName","==","null","||","!responseFilterMap",".","containsKey","(","filterName",")",")","\n		","{","\n			return","\"\"",";","\n		","}","\n		List<HeaderItem>","resp","=","responseFilterMap",".","get","(","filterName",")",";","\n		final","StringResponse","strResponse","=","new","StringResponse","(",")",";","\n		IHeaderResponse","headerRenderer","=","new","HeaderResponse","(",")","\n		","{","\n			@Override\n			protected","Response","getRealResponse","(",")","\n			","{","\n				return","strResponse",";","\n			","}","\n\n			@Override\n			public","boolean","wasRendered","(","Object","object",")","\n			","{","\n				return","FilteringHeaderResponse",".","this",".","getRealResponse","(",")",".","wasRendered","(","object",")",";","\n			","}","\n\n			@Override\n			public","void","markRendered","(","Object","object",")","\n			","{","\n				FilteringHeaderResponse",".","this",".","getRealResponse","(",")",".","markRendered","(","object",")",";","\n			","}","\n		","}",";","\n\n		headerRenderer","=","decorate","(","headerRenderer",")",";","\n\n		for","(","HeaderItem","curItem",":","resp",")","\n		","{","\n			headerRenderer",".","render","(","curItem",")",";","\n		","}","\n\n		headerRenderer",".","close","(",")",";","\n\n		return","strResponse",".","getBuffer","(",")",";","\n	"],"docstring_tokens":["Gets","the","content","that","was","rendered","to","this","header","response","and","matched","the","filter","with","the	","given","name"]}
{"code_tokens":["\n	protected","IHeaderResponse","decorate","(","IHeaderResponse","response",")","\n	","{","\n		return","response",";","\n	"],"docstring_tokens":["Decorate","the","given","response","used","to","get","contents"]}
{"code_tokens":["\n	@SuppressWarnings","(","\"unchecked\"",")","\n	protected","C","parse","(","final","Format","format,","final","Object","value,","final","Locale","locale",")","\n	","{","\n		final","ParsePosition","position","=","new","ParsePosition","(","0",")",";","\n		final","String","stringValue","=","value",".","toString","(",")",";","\n		final","C","result","=","(","C",")","format",".","parseObject","(","stringValue,","position",")",";","\n\n		if","(","position",".","getIndex","(",")","!=","stringValue",".","length","(",")",")","\n		","{","\n			throw","newConversionException","(","\"Cannot","parse","'\"","+","value","+","\"'","using","format","\"","+","format,\n				value,","locale",")",".","setFormat","(","format",")",";","\n		","}","\n		return","result",";","\n	"],"docstring_tokens":["Parses","a","value","using","one","of","the","java.util.text","format","classes"]}
{"code_tokens":["\n	public","void","setSort","(","final","SortParam<T>","param",")","\n	","{","\n		this",".","param","=","param",";","\n	"],"docstring_tokens":["Sets","the","current","sort","state"]}
{"code_tokens":["\n	@Override\n	public","final","Locale","getLocale","(",")","\n	","{","\n		return","localeIterator",".","getLocale","(",")",";","\n	"],"docstring_tokens":["Get","the","exact","Locale","which","has","been","used","for","the","latest","resource","path"]}
{"code_tokens":["\n	@Override\n	public","final","String","getStyle","(",")","\n	","{","\n		return","styleIterator",".","getStyle","(",")",";","\n	"],"docstring_tokens":["Get","the","exact","Style","which","has","been","used","for","the","latest","resource","path"]}
{"code_tokens":["\n	@Override\n	public","final","String","getVariation","(",")","\n	","{","\n		return","styleIterator",".","getVariation","(",")",";","\n	"],"docstring_tokens":["Get","the","exact","Variation","which","has","been","used","for","the","latest","resource","path"]}
{"code_tokens":["\n	@Override\n	public","final","String","getExtension","(",")","\n	","{","\n		return","extensionsIterator",".","getExtension","(",")",";","\n	"],"docstring_tokens":["Get","the","exact","filename","extension","used","for","the","latest","resource","path"]}
{"code_tokens":["\n	protected","String","getClosedStyleClass","(",")","\n	","{","\n		return","getString","(","CLOSED_CSS_CLASS_KEY",")",";","\n	"],"docstring_tokens":["Get","a","style","class","for","anything","other","than","closed","or","open","folders"]}
{"code_tokens":["\n	protected","String","getSelectedStyleClass","(",")","\n	","{","\n		return","getString","(","SELECTED_CSS_CLASS_KEY",")",";","\n	"],"docstring_tokens":["Get","a","style","class","to","render","for","a","selected","folder"]}
{"code_tokens":["\n	public","void","removeXValues","(",")","\n	","{","\n		if","(","xValues","!=","null",")","\n		","{","\n			xValues",".","clear","(",")",";","\n		","}","\n	"],"docstring_tokens":["Removes","all","x","values","from","the","image","src","set"]}
{"code_tokens":["\n	protected","void","buildSizesAttribute","(","final","ComponentTag","tag",")","\n	","{","\n		//","if","no","sizes","have","been","set","then","don't","build","the","attribute\n		if","(","sizes","==","null",")","\n		","{","\n			return",";","\n		","}","\n		String","sizes","=","\"\"",";","\n		for","(","String","size",":","this",".","sizes",")","\n		","{","\n			sizes","+=","size","+","\",\"",";","\n		","}","\n		int","lastIndexOf","=","sizes",".","lastIndexOf","(","\",\"",")",";","\n		if","(","lastIndexOf","!=","-1",")","\n		","{","\n			sizes","=","sizes",".","substring","(","0,","lastIndexOf",")",";","\n		","}","\n		if","(","!sizes",".","isEmpty","(",")",")","\n		","{","\n			tag",".","put","(","\"sizes\",","sizes",")",";","\n		","}","\n	"],"docstring_tokens":["builds","the","sizes","attribute","of","the","img","tag"]}
{"code_tokens":["\n	protected","void","addAntiCacheParameter","(","final","ComponentTag","tag",")","\n	","{","\n		String","url","=","tag",".","getAttributes","(",")",".","getString","(","\"src\"",")",";","\n		url","=","url","+","(","url",".","contains","(","\"?\"",")","?","\"&\"",":","\"?\"",")",";","\n		url","=","url","+","\"antiCache=\"","+","System",".","currentTimeMillis","(",")",";","\n\n		tag",".","put","(","\"src\",","url",")",";","\n	"],"docstring_tokens":["Adds","random","noise","to","the","url","every","request","to","prevent","the","browser","from","caching","the","image"]}
{"code_tokens":["\n	@Around","(","\"execution","(","*","org",".","apache",".","wicket",".","metrics",".","aspects",".","session",".","SessionCountListener",".","inc","(",".",".",")",")","\"",")","\n	public","Object","aroundInc","(","ProceedingJoinPoint","joinPoint",")","throws","Throwable\n	","{","\n		Object","count","=","joinPoint",".","proceed","(",")",";","\n		count","(","\"core/session/count\",","null,","CounterOperation",".","INC,","1L",")",";","\n		return","count",";","\n	"],"docstring_tokens":["Measures","if","a","session","is","going","to","be","activated"]}
{"code_tokens":["\n	@Around","(","\"execution","(","*","org",".","apache",".","wicket",".","metrics",".","aspects",".","session",".","SessionCountListener",".","dec","(",".",".",")",")","\"",")","\n	public","Object","aroundDec","(","ProceedingJoinPoint","joinPoint",")","throws","Throwable\n	","{","\n		Object","count","=","joinPoint",".","proceed","(",")",";","\n		count","(","\"core/session/count\",","null,","CounterOperation",".","DEC,","1L",")",";","\n		return","count",";","\n	"],"docstring_tokens":["Measures","if","a","session","is","going","to","be","destroyed"]}
{"code_tokens":["\n	public","DebugBar","positionBottom","(",")","\n	","{","\n		add","(","AttributeModifier",".","append","(","\"class\",","\"bottom\"",")",")",";","\n		return","this",";","\n	"],"docstring_tokens":["Positions","the","DebugBar","at","the","bottom","of","the","page"]}
{"code_tokens":["\n	public","static","<T>","ValueProvider<T>","of","(","final","T","value",")","\n	","{","\n		return","new","ValueProvider<>","(","value",")",";","\n	"],"docstring_tokens":["Creates","a","provider","for","the","specified","value"]}
{"code_tokens":["\n	public","final","<C>","IConverter<C>","get","(","Class<C>","c",")","\n	","{","\n		return","(","IConverter<C>",")","classToConverter",".","get","(","c",".","getName","(",")",")",";","\n	"],"docstring_tokens":["Gets","the","type","converter","that","is","registered","for","class","c"]}
{"code_tokens":["\n	public","final","IConverter<?>","remove","(","Class<?>","c",")","\n	","{","\n		return","classToConverter",".","remove","(","c",".","getName","(",")",")",";","\n	"],"docstring_tokens":["Removes","the","type","converter","currently","registered","for","class","c"]}
{"code_tokens":["\n	public","final","IConverter<?>","set","(","final","Class<?>","c,","final","IConverter<?>","converter",")","\n	","{","\n		Args",".","notNull","(","c,","\"Class\"",")",";","\n		Args",".","notNull","(","converter,","\"converter\"",")",";","\n		return","classToConverter",".","put","(","c",".","getName","(",")",",","converter",")",";","\n	"],"docstring_tokens":["Registers","a","converter","for","use","with","class","c"]}
{"code_tokens":["\n	@Override\n	public","final","long","getCurrentPage","(",")","\n	","{","\n		//","If","first","cell","is","out","of","range,","bring","page","back","into","range\n		while","(","(","currentPage",">","0",")","&&","(","(","currentPage","*","itemsPerPage",")",">=","getItemCount","(",")",")",")","\n		","{","\n			currentPage--",";","\n		","}","\n\n		return","currentPage",";","\n	"],"docstring_tokens":["Gets","the","index","of","the","current","page","being","displayed","by","this","list","view"]}
{"code_tokens":["\n	@Override\n	public","final","long","getPageCount","(",")","\n	","{","\n		return","(","(","getItemCount","(",")","+","itemsPerPage",")","-","1",")","/","itemsPerPage",";","\n	"],"docstring_tokens":["Gets","the","number","of","pages","in","this","list","view"]}
{"code_tokens":["\n	@Override\n	public","final","void","setCurrentPage","(","long","currentPage",")","\n	","{","\n		if","(","currentPage","<","0",")","\n		","{","\n			currentPage","=","0",";","\n		","}","\n\n		long","pageCount","=","getPageCount","(",")",";","\n		if","(","(","currentPage",">","0",")","&&","(","currentPage",">=","pageCount",")",")","\n		","{","\n			currentPage","=","pageCount","-","1",";","\n		","}","\n\n		addStateChange","(",")",";","\n		this",".","currentPage","=","currentPage",";","\n	"],"docstring_tokens":["Sets","the","current","page","that","this","list","view","should","show"]}
{"code_tokens":["\n	@Override\n	public","void","respond","(","final","IRequestCycle","requestCycle",")","\n	","{","\n		WebResponse","webResponse","=","(","WebResponse",")","requestCycle",".","getResponse","(",")",";","\n		webResponse",".","sendError","(","errorCode,","message",")",";","\n	"],"docstring_tokens":["Respond","by","sending","the","set","errorCode","and","optionally","the","message","to","the","browser"]}
{"code_tokens":["\r\n	public","boolean","startsWith","(","final","CharSequence","prefix,","final","int","toffset",")","\r\n	","{","\r\n		char","ta[]","=","value",";","\r\n		int","to","=","toffset",";","\r\n		int","po","=","0",";","\r\n		int","pc","=","prefix",".","length","(",")",";","\r\n		//","Note:","toffset","might","be","near","-1>>>1",".","\r\n		if","(","(","toffset","<","0",")","||","(","toffset",">","count","-","pc",")",")","\r\n		","{","\r\n			return","false",";","\r\n		","}","\r\n		while","(","--pc",">=","0",")","\r\n		","{","\r\n			if","(","ta[to++]","!=","prefix",".","charAt","(","po++",")",")","\r\n			","{","\r\n				return","false",";","\r\n			","}","\r\n		","}","\r\n		return","true",";","\r\n	"],"docstring_tokens":["Tests","if","this","AppendingStringBuffer","starts","with","the","specified","prefix","beginning","a","specified","	","index"]}
{"code_tokens":["\r\n	public","boolean","startsWith","(","final","CharSequence","prefix",")","\r\n	","{","\r\n		return","startsWith","(","prefix,","0",")",";","\r\n	"],"docstring_tokens":["Tests","if","this","AppendingStringBuffer","starts","with","the","specified","prefix"]}
{"code_tokens":["\r\n	public","boolean","endsWith","(","final","CharSequence","suffix",")","\r\n	","{","\r\n		return","startsWith","(","suffix,","count","-","suffix",".","length","(",")",")",";","\r\n	"],"docstring_tokens":["Tests","if","this","AppendingStringBuffer","ends","with","the","specified","suffix"]}
{"code_tokens":["\r\n	private","void","readObject","(","final","java",".","io",".","ObjectInputStream","s",")","throws","IOException,\r\n		ClassNotFoundException\r\n	","{","\r\n		s",".","defaultReadObject","(",")",";","\r\n		value","=","value",".","clone","(",")",";","\r\n	"],"docstring_tokens":["readObject","is","called","to","restore","the","state","of","the","AppendingStringBuffer","from","a","stream"]}
{"code_tokens":["\r\n	public","void","clear","(",")","\r\n	","{","\r\n		count","=","0",";","\r\n	"],"docstring_tokens":["Clears","the","buffer","contents,","but","leaves","the","allocated","size","intact"]}
{"code_tokens":["\n	public","long","getMargin","(",")","\n	","{","\n		if","(","margin","==","-1","&&","viewSize","!=","0",")","\n		","{","\n			return","viewSize","/","2",";","\n		","}","\n		return","margin",";","\n	"],"docstring_tokens":["Gets","the","margin,","default","value","is","half","the","view","size,","unless","explicitly","set"]}
{"code_tokens":["\n	public","void","setViewSize","(","final","int","size",")","\n	","{","\n		viewSize","=","size",";","\n	"],"docstring_tokens":["view","size","of","the","navigation","bar"]}
{"code_tokens":["\n	protected","final","long","getStartIndex","(",")","\n	","{","\n		return","startIndex",";","\n	"],"docstring_tokens":["Allow","subclasses","replacing","populateItem","to","calculate","the","current","page","number"]}
{"code_tokens":["\n	protected","WicketTester","newWicketTester","(","final","WebApplication","app",")","\n	","{","\n		return","new","WicketTester","(","app",")","{","\n			@Override\n			protected","Locale","servletRequestLocale","(",")","{","\n				return","Locale",".","US",";","\n			","}","\n		","}",";","\n	"],"docstring_tokens":["In","case","you","need","to","subclass","WicketTester","and","want","to","be","independent","on","possible","changes","in	","setUp"]}
{"code_tokens":["\n	@Override\n	public","String","asString","(","Map<String,","?>","variables",")","\n	","{","\n		StringBuilder","b","=","new","StringBuilder","(",")",";","\n		b",".","append","(","getBeforeTemplateContents","(",")",")",";","\n		b",".","append","(","decorated",".","asString","(","variables",")",")",";","\n		b",".","append","(","getAfterTemplateContents","(",")",")",";","\n		return","b",".","toString","(",")",";","\n	"],"docstring_tokens":["Returns","the","decorated","contents","as","a","String"]}
{"code_tokens":["\n	public","void","write","(","final","char","ch",")","\n	","{","\n		buffer",".","append","(","ch",")",";","\n	"],"docstring_tokens":["Writers","the","char","to","the","buffer"]}
{"code_tokens":["\n	@Around","(","\"execution","(","org",".","apache",".","wicket",".","request",".","resource",".","IResource",".","new","(",".",".",")",")","\"",")","\n	public","Object","aroundNew","(","ProceedingJoinPoint","joinPoint",")","throws","Throwable\n	","{","\n		return","mark","(","\"core/resource/resource/create\",","joinPoint",")",";","\n	"],"docstring_tokens":["Collects","data","how","often","a","resource","reference","is","created"]}
{"code_tokens":["\n	@Override\n	public","void","setCharset","(","final","Charset","charset",")","\n	","{","\n		//","java",".","nio",".","Charset","itself","is","not","serializable","so","we","can","only","store","the","name\n		charsetName","=","(","charset","!=","null",")","?","charset",".","name","(",")",":","null",";","\n	"],"docstring_tokens":["Sets","the","character","set","used","for","reading","this","resource"]}
{"code_tokens":["\n	protected","boolean","isLengthAndPrefixCorrect","(","String","creditCardNumber",")","\n	","{","\n		if","(","creditCardNumber","==","null",")","\n		","{","\n			return","false",";","\n		","}","\n\n		//","strip","spaces","and","dashes\n		creditCardNumber","=","creditCardNumber",".","replaceAll","(","\"[","-]\",","\"\"",")",";","\n\n		//","the","length","of","the","credit","card","number","has","to","be","between","12","and","19",".","\n		//","else","the","number","is","invalid",".","\n		if","(","(","creditCardNumber",".","length","(",")",">=","12",")","&&","(","creditCardNumber",".","length","(",")","<=","19",")","&&\n			isChecksumCorrect","(","creditCardNumber",")",")","\n		","{","\n			if","(","(","failOnUnknown","==","false",")","||\n				","(","determineCardId","(","creditCardNumber",")","!=","CreditCard",".","INVALID",")",")","\n			","{","\n				return","true",";","\n			","}","\n		","}","\n\n		return","false",";","\n	"],"docstring_tokens":["Checks","if","the","credit","card","number","can","be","determined","as","a","valid","number"]}
{"code_tokens":["\n	public","static","StringValue","valueOf","(","final","double","value",")","\n	","{","\n		return","valueOf","(","value,","Locale",".","getDefault","(","Locale",".","Category",".","FORMAT",")",")",";","\n	"],"docstring_tokens":["Converts","the","given","input","to","an","instance","of","StringValue"]}
{"code_tokens":["\n	@SuppressWarnings","(","{","\"unchecked\",","\"rawtypes\"","}",")","\n	public","final","<T>","T","to","(","final","Class<T>","type",")","throws","StringValueConversionException\n	","{","\n		if","(","type","==","null",")","\n		","{","\n			return","null",";","\n		","}","\n\n		if","(","type","==","String",".","class",")","\n		","{","\n			return","(","T",")","toString","(",")",";","\n		","}","\n\n		if","(","(","type","==","Integer",".","TYPE",")","||","(","type","==","Integer",".","class",")",")","\n		","{","\n			return","(","T",")","toInteger","(",")",";","\n		","}","\n\n		if","(","(","type","==","Long",".","TYPE",")","||","(","type","==","Long",".","class",")",")","\n		","{","\n			return","(","T",")","toLongObject","(",")",";","\n		","}","\n\n		if","(","(","type","==","Boolean",".","TYPE",")","||","(","type","==","Boolean",".","class",")",")","\n		","{","\n			return","(","T",")","toBooleanObject","(",")",";","\n		","}","\n\n		if","(","(","type","==","Double",".","TYPE",")","||","(","type","==","Double",".","class",")",")","\n		","{","\n			return","(","T",")","toDoubleObject","(",")",";","\n		","}","\n\n		if","(","(","type","==","Character",".","TYPE",")","||","(","type","==","Character",".","class",")",")","\n		","{","\n			return","(","T",")","toCharacter","(",")",";","\n		","}","\n\n		if","(","type","==","Instant",".","class",")","\n		","{","\n			return","(","T",")","toInstant","(",")",";","\n		","}","\n\n		if","(","type","==","Duration",".","class",")","\n		","{","\n			return","(","T",")","toDuration","(",")",";","\n		","}","\n\n		if","(","type",".","isEnum","(",")",")","\n		","{","\n			return","(","T",")","toEnum","(","(","Class",")","type",")",";","\n		","}","\n\n		throw","new","StringValueConversionException","(","\n			\"Cannot","convert","'\"","+","toString","(",")","+","\"'to","type","\"","+","type",")",";","\n	"],"docstring_tokens":["Converts","this","StringValue","to","a","given","type"]}
{"code_tokens":["\n	public","final","<T>","T","toOptional","(","final","Class<T>","type",")","throws","StringValueConversionException\n	","{","\n		return","Strings",".","isEmpty","(","text",")","?","null",":","to","(","type",")",";","\n	"],"docstring_tokens":["Converts","this","StringValue","to","a","given","type","or","null","if","the","value","is","empty"]}
{"code_tokens":["\n	public","final","boolean","toBoolean","(","final","boolean","defaultValue",")","\n	","{","\n		if","(","text","!=","null",")","\n		","{","\n			try\n			","{","\n				return","toBoolean","(",")",";","\n			","}","\n			catch","(","StringValueConversionException","x",")","\n			","{","\n				if","(","LOG",".","isDebugEnabled","(",")",")","\n				","{","\n					LOG",".","debug","(","\n						String",".","format","(","\"An","error","occurred","while","converting","'%s'","to","a","boolean:","%s\",\n							text,","x",".","getMessage","(",")",")",",\n						x",")",";","\n				","}","\n			","}","\n		","}","\n		return","defaultValue",";","\n	"],"docstring_tokens":["Convert","to","boolean,","returning","default","value","if","text","is","inconvertible"]}
{"code_tokens":["\n	public","final","char","toChar","(","final","char","defaultValue",")","\n	","{","\n		if","(","text","!=","null",")","\n		","{","\n			try\n			","{","\n				return","toChar","(",")",";","\n			","}","\n			catch","(","StringValueConversionException","x",")","\n			","{","\n				if","(","LOG",".","isDebugEnabled","(",")",")","\n				","{","\n					LOG",".","debug","(","\n						String",".","format","(","\"An","error","occurred","while","converting","'%s'","to","a","character:","%s\",\n							text,","x",".","getMessage","(",")",")",",\n						x",")",";","\n				","}","\n			","}","\n		","}","\n		return","defaultValue",";","\n	"],"docstring_tokens":["Convert","to","character,","returning","default","value","if","text","is","inconvertible"]}
{"code_tokens":["\n	public","final","double","toDouble","(","final","double","defaultValue",")","\n	","{","\n		if","(","text","!=","null",")","\n		","{","\n			try\n			","{","\n				return","toDouble","(",")",";","\n			","}","\n			catch","(","Exception","x",")","\n			","{","\n				if","(","LOG",".","isDebugEnabled","(",")",")","\n				","{","\n					LOG",".","debug","(","\n						String",".","format","(","\"An","error","occurred","while","converting","'%s'","to","a","double:","%s\",\n							text,","x",".","getMessage","(",")",")",",\n						x",")",";","\n				","}","\n			","}","\n		","}","\n		return","defaultValue",";","\n	"],"docstring_tokens":["Convert","to","double,","returning","default","value","if","text","is","inconvertible"]}
{"code_tokens":["\n	public","final","Duration","toDuration","(","final","Duration","defaultValue",")","\n	","{","\n		if","(","text","!=","null",")","\n		","{","\n			try\n			","{","\n				return","toDuration","(",")",";","\n			","}","\n			catch","(","Exception","x",")","\n			","{","\n				if","(","LOG",".","isDebugEnabled","(",")",")","\n				","{","\n					LOG",".","debug","(","\n						String",".","format","(","\"An","error","occurred","while","converting","'%s'","to","a","Duration:","%s\",\n							text,","x",".","getMessage","(",")",")",",\n						x",")",";","\n				","}","\n			","}","\n		","}","\n		return","defaultValue",";","\n	"],"docstring_tokens":["Convert","to","duration,","returning","default","value","if","text","is","inconvertible"]}
{"code_tokens":["\n	public","final","int","toInt","(","final","int","defaultValue",")","\n	","{","\n		if","(","text","!=","null",")","\n		","{","\n			try\n			","{","\n				return","toInt","(",")",";","\n			","}","\n			catch","(","StringValueConversionException","x",")","\n			","{","\n				if","(","LOG",".","isDebugEnabled","(",")",")","\n				","{","\n					LOG",".","debug","(","\n						String",".","format","(","\"An","error","occurred","while","converting","'%s'","to","an","integer:","%s\",\n							text,","x",".","getMessage","(",")",")",",\n						x",")",";","\n				","}","\n			","}","\n		","}","\n		return","defaultValue",";","\n	"],"docstring_tokens":["Convert","to","integer,","returning","default","value","if","text","is","inconvertible"]}
{"code_tokens":["\n	public","final","long","toLong","(","final","long","defaultValue",")","\n	","{","\n		if","(","text","!=","null",")","\n		","{","\n			try\n			","{","\n				return","toLong","(",")",";","\n			","}","\n			catch","(","StringValueConversionException","x",")","\n			","{","\n				if","(","LOG",".","isDebugEnabled","(",")",")","\n				","{","\n					LOG",".","debug","(","String",".","format","(","\"An","error","occurred","while","converting","'%s'","to","a","long:","%s\",\n						text,","x",".","getMessage","(",")",")",",","x",")",";","\n				","}","\n			","}","\n		","}","\n		return","defaultValue",";","\n	"],"docstring_tokens":["Convert","to","long","integer,","returning","default","value","if","text","is","inconvertible"]}
{"code_tokens":["\n	public","final","Boolean","toOptionalBoolean","(",")","throws","StringValueConversionException\n	","{","\n		return","Strings",".","isEmpty","(","text",")","?","null",":","toBooleanObject","(",")",";","\n	"],"docstring_tokens":["Convert","to","object","types,","returning","null","if","text","is","null","or","empty"]}
{"code_tokens":["\n	public","final","String","toOptionalString","(",")","\n	","{","\n		return","text",";","\n	"],"docstring_tokens":["Convert","to","object","types,","returning","null","if","text","is","null"]}
{"code_tokens":["\n	public","final","String","toString","(","final","String","defaultValue",")","\n	","{","\n		return","(","text","==","null",")","?","defaultValue",":","text",";","\n	"],"docstring_tokens":["Convert","to","primitive","types,","returning","default","value","if","text","is","null"]}
{"code_tokens":["\n	public","final","Instant","toInstant","(","final","Instant","defaultValue",")","\n	","{","\n		if","(","text","!=","null",")","\n		","{","\n			try\n			","{","\n				return","toInstant","(",")",";","\n			","}","\n			catch","(","StringValueConversionException","x",")","\n			","{","\n				if","(","LOG",".","isDebugEnabled","(",")",")","\n				","{","\n					LOG",".","debug","(","String",".","format","(","\"An","error","occurred","while","converting","'%s'","to","an","Instant:","%s\",\n						text,","x",".","getMessage","(",")",")",",","x",")",";","\n				","}","\n			","}","\n		","}","\n		return","defaultValue",";","\n	"],"docstring_tokens":["Convert","to","Instant,","returning","default","value","if","text","is","inconvertible"]}
{"code_tokens":["\n	public","final","<T","extends","Enum<T>>","T","toOptionalEnum","(","Class<T>","eClass",")","\n		throws","StringValueConversionException\n	","{","\n		return","Strings",".","isEmpty","(","text",")","?","null",":","toEnum","(","eClass",")",";","\n	"],"docstring_tokens":["Convert","to","enum,","returning","null","if","text","is","null","or","empty"]}
{"code_tokens":["\n	public","void","setHandler","(","IRequestHandler","handler",")","\n	","{","\n		this",".","handler","=","handler",";","\n	"],"docstring_tokens":["Sets","the","custom","request","handler"]}
{"code_tokens":["\n	public","IPageStore","getCache","(",")","\n	","{","\n		return","cache",";","\n	"],"docstring_tokens":["Get","the","store","used","a","cache"]}
{"code_tokens":["\n	@Override\n	public","final","boolean","matches","(",")","\n	","{","\n		//","Are","there","any","more","elements\n		if","(","advance","(","entryGroup",")",")","\n		","{","\n			//","Add","the","first","element\n			final","String","value","=","entryGroup",".","get","(","matcher","(",")",")",";","\n			values",".","add","(","value",")",";","\n\n			//","All","remaining","elements","must","be","preceded","by","the","separator","pattern\n			while","(","advance","(","separatorPattern",")","&&","advance","(","entryGroup",")",")","\n			","{","\n				//","Add","the","value","not","including","the","separator\n				values",".","add","(","entryGroup",".","get","(","matcher","(",")",")",")",";","\n			","}","\n\n			//","Yes,","we","found","at","least","on","element\n			return","true",";","\n		","}","\n\n		//","Nothing","found,","not","even","one","element","without","separator\n		return","false",";","\n	"],"docstring_tokens":["Parse","the","input","and","add","the","elements","to","an","internal","list","to","be","accessed","by"]}
{"code_tokens":["\r\n	public","final","boolean","greaterThan","(","final","long","value",")","\r\n	","{","\r\n		return","this",".","value",">","value",";","\r\n	"],"docstring_tokens":["Compares","this","LongValue","with","a","primitive","long","value"]}
{"code_tokens":["\r\n	public","final","boolean","greaterThan","(","final","LongValue","that",")","\r\n	","{","\r\n		return","value",">","that",".","value",";","\r\n	"],"docstring_tokens":["Compares","this","LongValue","with","another","LongValue"]}
{"code_tokens":["\r\n	@Override\r\n	public","String","toString","(",")","\r\n	","{","\r\n		return","String",".","valueOf","(","value",")",";","\r\n	"],"docstring_tokens":["Converts","this","LongValue","to","a","String"]}
{"code_tokens":["\r\n	public","static","<T","extends","LongValue>","T","min","(","final","T","lhs,","final","T","rhs",")","\r\n	","{","\r\n		Args",".","notNull","(","lhs,","\"lhs\"",")",";","\r\n		Args",".","notNull","(","rhs,","\"rhs\"",")",";","\r\n		if","(","lhs",".","compareTo","(","rhs",")","<","0",")","\r\n		","{","\r\n			return","lhs",";","\r\n		","}","\r\n		return","rhs",";","\r\n	"],"docstring_tokens":["Returns","the","min","of","the","two","long","values"]}
{"code_tokens":["\r\n	public","static","<T","extends","LongValue>","T","max","(","final","T","lhs,","final","T","rhs",")","\r\n	","{","\r\n		Args",".","notNull","(","lhs,","\"lhs\"",")",";","\r\n		Args",".","notNull","(","rhs,","\"rhs\"",")",";","\r\n		if","(","lhs",".","compareTo","(","rhs",")",">","0",")","\r\n		","{","\r\n			return","lhs",";","\r\n		","}","\r\n		return","rhs",";","\r\n	"],"docstring_tokens":["Returns","the","max","of","the","two","long","values"]}
{"code_tokens":["\r\n	public","void","beforeRender","(",")","{","\r\n		cycle",".","setMetaData","(","KEY,","null",")",";","\r\n		cycle","=","null",";","\r\n		\r\n		for","(","IFeedback","feedback",":","feedbacks",")","\r\n		","{","\r\n			if","(","feedback","instanceof","Component",")","{","\r\n				Component","component","=","(","Component",")","feedback",";","\r\n				\r\n				//","render","only","if","it","is","still","in","the","page","hierarchy","(","WICKET-4895",")","\r\n				if","(","component",".","findParent","(","Page",".","class",")","==","null",")","\r\n				","{","\r\n					continue",";","\r\n				","}","			\r\n			","}","\r\n		\r\n			feedback",".","beforeRender","(",")",";","\r\n		","}","\r\n	"],"docstring_tokens":["Prepares","all","postponed","feedbacks","for","render"]}
{"code_tokens":["\r\n	public","PageParameters","getPageParameters","(",")","\r\n	","{","\r\n		return","pageParameters",";","\r\n	"],"docstring_tokens":["Gets","the","page","parameter","applied","to","the","URL","of","the","media","component"]}
{"code_tokens":["\r\n	public","void","setPageParameters","(","PageParameters","pageParameters",")","\r\n	","{","\r\n		this",".","pageParameters","=","pageParameters",";","\r\n	"],"docstring_tokens":["Sets","the","page","parameter","applied","to","the","URL","of","the","media","component"]}
{"code_tokens":["\r\n	public","String","getStartTime","(",")","\r\n	","{","\r\n		return","startTime",";","\r\n	"],"docstring_tokens":["Gets","the","position","at","which","the","media","component","starts","the","playback"]}
{"code_tokens":["\r\n	public","String","getEndTime","(",")","\r\n	","{","\r\n		return","endTime",";","\r\n	"],"docstring_tokens":["Gets","the","position","at","which","the","media","component","stops","the","playback"]}
{"code_tokens":["\n	protected","boolean","isSelected","(","IModel<?>","model",")","\n	","{","\n		return","compareModels","(","getDefaultModelObject","(",")",",","model",".","getObject","(",")",")",";","\n	"],"docstring_tokens":["Does","the","given","model","contain","a","selected","value"]}
{"code_tokens":["\n	public","static","Link<Void>","link","(","final","String","name,","final","long","id",")","\n	","{","\n		return","new","Link<Void>","(","name",")","\n		","{","\n			@Override\n			public","void","onClick","(",")","\n			","{","\n				setResponsePage","(","new","EditBook","(","Book",".","get","(","id",")",")",")",";","\n			","}","\n		","}",";","\n	"],"docstring_tokens":["Gets","a","link","to","a","page","that","will","edit","a","book"]}
{"code_tokens":["\r\n	public","static","List<EnumeratedType>","getValues","(","final","Class<?","extends","EnumeratedType>","c",")","\r\n	","{","\r\n		//","Get","values","for","class\r\n		List<EnumeratedType>","valueList","=","valueListByClass",".","get","(","c",".","getName","(",")",")",";","\r\n\r\n		//","If","no","list","exists\r\n		if","(","valueList","==","null",")","\r\n		","{","\r\n			//","create","lazily\r\n			valueList","=","new","ArrayList<>","(",")",";","\r\n			valueListByClass",".","put","(","c",".","getName","(",")",",","valueList",")",";","\r\n		","}","\r\n\r\n		return","valueList",";","\r\n	"],"docstring_tokens":["Gets","the","enumerated","type","values","for","a","given","subclass","of","EnumeratedType"]}
{"code_tokens":["\n","private","Component","newHelpLabel","(","final","String","id,","final","IModel<String>","model",")","\n","{","\n","return","new","Label","(","id,","model",")",";","\n"],"docstring_tokens":["creates","a","new","help","label","that","contains","a","help","message","for","the","form","field"]}
{"code_tokens":["\n	protected","final","ChainingModel<T>","setTarget","(","final","Object","modelObject",")","\n	","{","\n		this",".","target","=","modelObject",";","\n		return","this",";","\n	"],"docstring_tokens":["Sets","a","new","target","-","object","or","model"]}
{"code_tokens":["\n	public","static","Result","fail","(","String","message",")","\n	","{","\n		return","new","Result","(","true,","message",")",";","\n	"],"docstring_tokens":["Returns","a","Result","which","failed"]}
{"code_tokens":["\n	public","static","Result","pass","(",")","\n	","{","\n		return","PASS",";","\n	"],"docstring_tokens":["Returns","a","Result","which","passed"]}
{"code_tokens":["\n	public","boolean","wasFailed","(",")","\n	","{","\n		return","failed",";","\n	"],"docstring_tokens":["Returns","true","if","the","Result","was","a","failure"]}
{"code_tokens":["\n	public","String","getMessage","(",")","\n	","{","\n		return","message",";","\n	"],"docstring_tokens":["Retrieves","the","error","message"]}
{"code_tokens":["\n	public","void","add","(","final","IFormValidator","validator",")","\n	","{","\n		Args",".","notNull","(","validator,","\"validator\"",")",";","\n\n		if","(","validator","instanceof","Behavior",")","\n		","{","\n			add","(","(","Behavior",")","validator",")",";","\n		","}","\n		else\n		","{","\n			add","(","new","FormValidatorAdapter","(","validator",")",")",";","\n		","}","\n	"],"docstring_tokens":["Adds","a","form","validator","to","the","form"]}
{"code_tokens":["\n	public","void","remove","(","final","IFormValidator","validator",")","\n	","{","\n		Args",".","notNull","(","validator,","\"validator\"",")",";","\n\n		Behavior","match","=","null",";","\n		for","(","Behavior","behavior",":","getBehaviors","(",")",")","\n		","{","\n			if","(","behavior",".","equals","(","validator",")",")","\n			","{","\n				match","=","behavior",";","\n				break",";","\n			","}","\n			else","if","(","behavior","instanceof","FormValidatorAdapter",")","\n			","{","\n				if","(","(","(","FormValidatorAdapter",")","behavior",")",".","getValidator","(",")",".","equals","(","validator",")",")","\n				","{","\n					match","=","behavior",";","\n					break",";","\n				","}","\n			","}","\n		","}","\n\n		if","(","match","!=","null",")","\n		","{","\n			remove","(","match",")",";","\n		","}","\n		else\n		","{","\n\n			throw","new","IllegalStateException","(","\n				\"Tried","to","remove","form","validator","that","was","not","previously","added",".","\"\n					+","\"Make","sure","your","validator's","equals","(",")","implementation","is","sufficient\"",")",";","\n		","}","\n	"],"docstring_tokens":["Removes","a","form","validator","from","the","form"]}
{"code_tokens":["\n	public","final","CharSequence","getJsForSubmitter","(","IFormSubmittingComponent","submitter,","boolean","triggerEvent",")","\n	","{","\n		Form<?>","root","=","getRootForm","(",")",";","\n\n		String","param","=","submitter",".","getInputName","(",")","+","\"=x\"",";","\n\n		AppendingStringBuffer","buffer","=","new","AppendingStringBuffer","(",")",";","\n		buffer",".","append","(","String",".","format","(","\"var","f","=","document",".","getElementById","(","'%s'",")",";","\",","root",".","getMarkupId","(",")",")",")",";","\n		buffer",".","append","(","String",".","format","(","\"document",".","getElementById","(","'%s'",")",".","innerHTML","+=","'\",\n			root",".","getHiddenFieldsId","(","HIDDEN_FIELDS_PARAMS_IDX",")",")",")",";","\n		writeParamsAsHiddenFields","(","new","String[]","{","param","}",",","buffer",")",";","\n		buffer",".","append","(","\"'",";","\"",")",";","\n\n		if","(","triggerEvent",")","\n		","{","\n			buffer",".","append","(","\"Wicket",".","Event",".","fire","(","f,","'submit'",")",";","\"",")",";","\n		","}","\n		else\n		","{","\n			buffer",".","append","(","\"f",".","submit","(",")",";","\"",")",";","\n		","}","\n		return","buffer",";","\n	"],"docstring_tokens":["Generate","a","piece","of","JavaScript","that","submits","the","form","with","the","given	","IFormSubmittingComponent"]}
{"code_tokens":["\n	public","final","Bytes","getMaxSize","(",")","\n	","{","\n		/*\n		","*","NOTE:","This","method","should","remain","final","otherwise","it","will","be","impossible","to","set","a","default\n		","*","max","size","smaller","then","the","one","specified","in","applications","settings","because","the","inner","form\n		","*","will","return","the","default","unless","it","is","specifically","set","in","the","traversal",".","With","this","method\n		","*","remaining","final","we","can","tell","when","the","value","is","explicitly","set","by","the","user",".","\n		","*","\n		","*","If","the","value","needs","to","be","dynamic","it","can","be","set","in","oncofigure","(",")","instead","of","overriding","this\n		","*","method",".","\n		","*/\n\n		final","Bytes[]","maxSize","=","{","this",".","maxSize","}",";","\n		if","(","maxSize[0]","==","null",")","\n		","{","\n			visitChildren","(","Form",".","class,","new","IVisitor<Form<?>,","Bytes>","(",")","\n			","{","\n				@Override\n				public","void","component","(","Form<?>","component,","IVisit<Bytes>","visit",")","\n				","{","\n					maxSize[0]","=","LongValue",".","maxNullSafe","(","maxSize[0],","component",".","maxSize",")",";","\n				","}","\n			","}",")",";","\n		","}","\n		if","(","maxSize[0]","==","null",")","\n		","{","\n			return","getApplication","(",")",".","getApplicationSettings","(",")",".","getDefaultMaximumUploadSize","(",")",";","\n		","}","\n		return","maxSize[0]",";","\n	"],"docstring_tokens":["Gets","the","maximum","size","for","uploads"]}
{"code_tokens":["\n	public","final","boolean","hasError","(",")","\n	","{","\n		//","if","this","form","itself","has","an","error","message\n		if","(","hasErrorMessage","(",")",")","\n		","{","\n			return","true",";","\n		","}","\n\n		//","the","form","doesn't","have","any","errors,","now","check","any","nested","form\n		//","components\n		return","anyFormComponentError","(",")",";","\n	"],"docstring_tokens":["Gets","whether","the","current","form","has","any","error","registered"]}
{"code_tokens":["\n	public","final","boolean","isSubmitted","(",")","\n	","{","\n		return","getFlag","(","FLAG_SUBMITTED",")",";","\n	"],"docstring_tokens":["Checks","if","this","form","has","been","submitted","during","the","current","request"]}
{"code_tokens":["\n	protected","void","callOnError","(","IFormSubmitter","submitter",")","\n	","{","\n		final","Form<?>","processingForm","=","findFormToProcess","(","submitter",")",";","\n\n		if","(","submitter","!=","null",")","\n		","{","\n			submitter",".","onError","(",")",";","\n		","}","\n\n		//","invoke","Form#onSubmit","(",".",".",")","going","from","innermost","to","outermost\n		Visits",".","visitPostOrder","(","processingForm,","new","IVisitor<Form<?>,","Void>","(",")","\n		","{","\n			@Override\n			public","void","component","(","Form<?>","form,","IVisit<Void>","visit",")","\n			","{","\n				if","(","!form",".","isEnabledInHierarchy","(",")","||","!form",".","isVisibleInHierarchy","(",")",")","\n				","{","\n					visit",".","dontGoDeeper","(",")",";","\n					return",";","\n				","}","\n				if","(","form",".","hasError","(",")",")","\n				","{","\n					form",".","onError","(",")",";","\n				","}","\n			","}","\n		","}",",","new","ClassVisitFilter","(","Form",".","class",")",")",";","\n	"],"docstring_tokens":["Calls","onError","on","this","Form","and","any","enabled","and","visible","nested","form,","if","the","respective	","Form","actually","has","errors"]}
{"code_tokens":["\n	private","void","markFormsSubmitted","(","IFormSubmitter","submitter",")","\n	","{","\n		setFlag","(","FLAG_SUBMITTED,","true",")",";","\n		Form<?>","formToProcess","=","findFormToProcess","(","submitter",")",";","\n		\n		visitChildren","(","Form",".","class,","new","IVisitor<Component,","Void>","(",")","\n		","{","\n			@Override\n			public","void","component","(","final","Component","component,","final","IVisit<Void>","visit",")","\n			","{","\n				Form<?>","form","=","(","Form<?>",")","component",";","\n				if","(","(","form",".","wantSubmitOnParentFormSubmit","(",")","||","form","==","formToProcess",")","\n					&&","form",".","isEnabledInHierarchy","(",")","&&","form",".","isVisibleInHierarchy","(",")",")","\n				","{","\n					form",".","setFlag","(","FLAG_SUBMITTED,","true",")",";","\n					return",";","\n				","}","\n				visit",".","dontGoDeeper","(",")",";","\n			","}","\n		","}",")",";","\n	"],"docstring_tokens":["Sets","FLAG_SUBMITTED","to","true","on","this","form","and","every","enabled","nested","form"]}
{"code_tokens":["\n	protected","CharSequence","getActionUrl","(",")","\n	","{","\n		return","urlForListener","(","new","PageParameters","(",")",")",";","\n	"],"docstring_tokens":["Generates","the","action","url","for","the","form"]}
{"code_tokens":["\n	@Override\n	public","void","onComponentTagBody","(","final","MarkupStream","markupStream,","final","ComponentTag","openTag",")","\n	","{","\n		if","(","isRootForm","(",")",")","\n		","{","\n			//","get","the","hidden","field","id\n			writeHiddenFields","(",")",";","\n		","}","\n\n		//","do","the","rest","of","the","processing\n		super",".","onComponentTagBody","(","markupStream,","openTag",")",";","\n	"],"docstring_tokens":["Append","an","additional","hidden","input","tag","to","support","anchor","tags","that","can","submit","a","form"]}
{"code_tokens":["\n	public","final","void","writeHiddenFields","(",")","\n	","{","\n		getResponse","(",")",".","write","(","String",".","format","(","\"<div","id=\\\"%s\\\"","hidden=\\\"\\\"","class=\\\"%s\\\">\",\n			getHiddenFieldsId","(","HIDDEN_FIELDS_PARAMS_IDX",")",",\n			getString","(","HIDDEN_FIELDS_CSS_CLASS_KEY",")",")",")",";","\n		//","if","the","parameters","are","not","in","the","action","attribute,","they","have","to","be","written","as","hidden","fields\n		if","(","encodeUrlInHiddenFields","(",")",")","\n		","{","\n			AppendingStringBuffer","buffer","=","new","AppendingStringBuffer","(",")",";","				\n\n			String","url","=","getActionUrl","(",")",".","toString","(",")",";","\n			int","i","=","url",".","indexOf","(","'?'",")",";","\n			String","queryString","=","(","i",">","-1",")","?","url",".","substring","(","i","+","1",")",":","url",";","\n			String[]","params","=","Strings",".","split","(","queryString,","'&'",")",";","\n\n			writeParamsAsHiddenFields","(","params,","buffer",")",";","\n\n			getResponse","(",")",".","write","(","buffer",")",";","\n		","}","\n		getResponse","(",")",".","write","(","\"</div>\"",")",";","\n		\n		//","if","a","default","submitting","component","was","set,","handle","the","rendering","of","that\n		if","(","hasDefaultSubmittingComponent","(",")",")","\n		","{","\n			appendDefaultButtonField","(",")",";","\n		","}","\n	"],"docstring_tokens":["Writes","the","markup","for","the","hidden","input","fields","and","default","button","field","if","applicable","to","the	","current","response"]}
{"code_tokens":["\n	private","String","recode","(","String","s",")","\n	","{","\n		String","un","=","UrlDecoder",".","QUERY_INSTANCE",".","decode","(","s,","getRequest","(",")",".","getCharset","(",")",")",";","\n		return","Strings",".","escapeMarkup","(","un",")",".","toString","(",")",";","\n	"],"docstring_tokens":["Take","URL-encoded","query","string","value,","decode","it","and","return","HTML-escaped","version"]}
{"code_tokens":["\n	protected","void","onSubmit","(",")","\n	","{","\n	"],"docstring_tokens":["Implemented","by","subclasses","to","deal","with","form","submits"]}
{"code_tokens":["\n	protected","void","onValidate","(",")","\n	","{","\n\n	"],"docstring_tokens":["Callback","during","the","validation","stage","of","the","form"]}
{"code_tokens":["\n	protected","final","void","validateComponents","(",")","\n	","{","\n		visitFormComponentsPostOrder","(","new","ValidationVisitor","(",")","\n		","{","\n			@Override\n			public","void","validate","(","final","FormComponent<?>","formComponent",")","\n			","{","\n				final","Form<?>","form","=","formComponent",".","getForm","(",")",";","\n				if","(","form","==","Form",".","this","&&","form",".","isEnabledInHierarchy","(",")","&&","form",".","isVisibleInHierarchy","(",")",")","\n				","{","\n					formComponent",".","validate","(",")",";","\n				","}","\n			","}","\n		","}",")",";","\n	"],"docstring_tokens":["Triggers","type","conversion","on","form","components"]}
{"code_tokens":["\n	protected","String","getInputNamePrefix","(",")","\n	","{","\n		return","\"\"",";","\n	"],"docstring_tokens":["Allows","to","customize","input","names","of","form","components","inside","this","form"]}
{"code_tokens":["\n	public","Map<String,","Object>","getVariables","(",")","\n	","{","\n		return","vars",";","\n	"],"docstring_tokens":["Returns","the","map","of","variables","for","this","exception"]}
{"code_tokens":["\n	public","final","void","clearCache","(",")","\n	","{","\n		if","(","cache","!=","null",")","\n		","{","\n			cache","=","newCache","(",")",";","\n		","}","\n	"],"docstring_tokens":["Clear","all","cache","entries","by","instantiating","a","new","cache","object"]}
{"code_tokens":["\n	public","String","substitutePropertyExpressions","(","final","Component","component,","final","String","string,\n		final","IModel<?>","model",")","\n	","{","\n		if","(","(","string","!=","null",")","&&","(","model","!=","null",")",")","\n		","{","\n			final","IConverterLocator","locator",";","\n			final","Locale","locale",";","\n			if","(","component","==","null",")","\n			","{","\n				locator","=","Application",".","get","(",")",".","getConverterLocator","(",")",";","\n\n				if","(","Session",".","exists","(",")",")","\n				","{","\n					locale","=","Session",".","get","(",")",".","getLocale","(",")",";","\n				","}","\n				else\n				","{","\n					locale","=","Locale",".","getDefault","(",")",";","\n				","}","\n			","}","\n			else\n			","{","\n				locator","=","component",";","\n				locale","=","component",".","getLocale","(",")",";","\n			","}","\n\n			return","new","ConvertingPropertyVariableInterpolator","(","string,","model",".","getObject","(",")",",","locator,\n				locale",")",".","toString","(",")",";","\n		","}","\n		return","string",";","\n	"],"docstring_tokens":["Helper","method","to","handle","property","variable","substitution","in","strings"]}
{"code_tokens":["\n	private","void","merge","(","final","IMarkupFragment","markup,","final","IMarkupFragment","baseMarkup,\n		int","extendIndex",")","\n	","{","\n		//","True","if","either","<wicket:head>","or","<head>","has","been","processed\n		boolean","wicketHeadProcessed","=","false",";","\n\n		//","True,","if","<head>","was","found\n		boolean","foundHeadTag","=","false",";","\n\n		//","Add","all","elements","from","the","base","markup","to","the","new","list\n		//","until","<wicket:child/>","is","found",".","Convert","<wicket:child/>\n		//","into","<wicket:child>","and","add","it","as","well",".","\n		WicketTag","childTag","=","null",";","\n		int","baseIndex","=","0",";","\n		MarkupResourceStream","markupResourceStream","=","baseMarkup",".","getMarkupResourceStream","(",")",";","\n		IResourceStream","resource","=","markupResourceStream",".","getResource","(",")",";","\n		Class<?","extends","Component>","markupClass","=","markupResourceStream",".","getMarkupClass","(",")",";","\n\n		for","(",";","baseIndex","<","baseMarkup",".","size","(",")",";","baseIndex++",")","\n		","{","\n			MarkupElement","element","=","baseMarkup",".","get","(","baseIndex",")",";","\n			if","(","element","instanceof","RawMarkup",")","\n			","{","\n				//","Add","the","element","to","the","merged","list\n				addMarkupElement","(","element",")",";","\n				continue",";","\n			","}","\n\n			final","ComponentTag","tag","=","(","ComponentTag",")","element",";","\n\n			//","Make","sure","all","tags","of","the","base","markup","remember","where","they","are\n			//","from\n			if","(","resource","!=","null","&&","tag",".","getMarkupClass","(",")","==","null",")","\n			","{","\n				tag",".","setMarkupClass","(","markupClass",")",";","\n			","}","\n\n			if","(","element","instanceof","WicketTag",")","\n			","{","\n				WicketTag","wtag","=","(","WicketTag",")","element",";","\n\n				//","Found","wicket:child","in","the","base","markup",".","In","case","of","3+\n				//","level","inheritance","make","sure","the","child","tag","is","not","from","one","of\n				//","the","deeper","levels\n				if","(","wtag",".","isChildTag","(",")","&&","tag",".","getMarkupClass","(",")","==","markupClass",")","\n				","{","\n					if","(","wtag",".","isOpenClose","(",")",")","\n					","{","\n						//","<wicket:child","/>","=>","<wicket:child>",".",".",".","</wicket:child>\n						childTag","=","wtag",";","\n						WicketTag","childOpenTag","=","(","WicketTag",")","wtag",".","mutable","(",")",";","\n						childOpenTag",".","getXmlTag","(",")",".","setType","(","TagType",".","OPEN",")",";","\n						childOpenTag",".","setMarkupClass","(","markupClass",")",";","\n						addMarkupElement","(","childOpenTag",")",";","\n						break",";","\n					","}","\n					else","if","(","wtag",".","isOpen","(",")",")","\n					","{","\n						//","<wicket:child>\n						addMarkupElement","(","wtag",")",";","\n						break",";","\n					","}","\n					else\n					","{","\n						throw","new","WicketRuntimeException","(","\n							\"Did","not","expect","a","</wicket:child>","tag","in","\"","+","baseMarkup",".","toString","(",")",")",";","\n					","}","\n				","}","\n\n				//","Process","the","head","of","the","extended","markup","only","once\n				if","(","wicketHeadProcessed","==","false",")","\n				","{","\n					//","if","</wicket:head>","in","base","markup","and","no","<head>\n					if","(","wtag",".","isClose","(",")","&&","wtag",".","isHeadTag","(",")","&&","(","foundHeadTag","==","false",")",")","\n					","{","\n						wicketHeadProcessed","=","true",";","\n\n						//","Add","the","current","close","tag\n						addMarkupElement","(","wtag",")",";","\n\n						//","Add","the","<wicket:head>","body","from","the","derived","markup",".","\n						copyWicketHead","(","markup,","extendIndex",")",";","\n\n						//","Do","not","add","the","current","tag",".","It","has","already","been","added",".","\n						continue",";","\n					","}","\n\n					//","if","<wicket:panel>","or",".",".",".","in","base","markup\n					if","(","wtag",".","isOpen","(",")","&&","wtag",".","isMajorWicketComponentTag","(",")",")","\n					","{","\n						wicketHeadProcessed","=","true",";","\n\n						//","Add","the","<wicket:head>","body","from","the","derived","markup",".","\n						copyWicketHead","(","markup,","extendIndex",")",";","\n					","}","\n				","}","\n			","}","\n\n			//","Process","the","head","of","the","extended","markup","only","once\n			if","(","wicketHeadProcessed","==","false",")","\n			","{","\n				//","Remember","that","we","found","<head>","in","the","base","markup\n				if","(","tag",".","isOpen","(",")","&&","TagUtils",".","isHeadTag","(","tag",")",")","\n				","{","\n					foundHeadTag","=","true",";","\n				","}","\n\n				//","if","<head>","in","base","markup\n				if","(","(","tag",".","isClose","(",")","&&","TagUtils",".","isHeadTag","(","tag",")",")","||\n				","(","tag",".","isClose","(",")","&&","TagUtils",".","isWicketHeaderItemsTag","(","tag",")",")","||\n					","(","tag",".","isOpen","(",")","&&","TagUtils",".","isBodyTag","(","tag",")",")",")","\n				","{","\n					wicketHeadProcessed","=","true",";","\n\n					//","Add","the","<wicket:head>","body","from","the","derived","markup",".","\n					copyWicketHead","(","markup,","extendIndex",")",";","\n				","}","\n			","}","\n\n			//","Add","the","element","to","the","merged","list\n			addMarkupElement","(","element",")",";","\n		","}","\n\n		if","(","baseIndex","==","baseMarkup",".","size","(",")",")","\n		","{","\n			throw","new","WicketRuntimeException","(","\"Expected","to","find","<wicket:child/>","in","base","markup:","\"","+\n				baseMarkup",".","toString","(",")",")",";","\n		","}","\n\n		//","Now","append","all","elements","from","the","derived","markup","starting","with\n		//","<wicket:extend>","until","</wicket:extend>","to","the","list\n		for","(",";","extendIndex","<","markup",".","size","(",")",";","extendIndex++",")","\n		","{","\n			MarkupElement","element","=","markup",".","get","(","extendIndex",")",";","\n			addMarkupElement","(","element",")",";","\n\n			if","(","element","instanceof","WicketTag",")","\n			","{","\n				WicketTag","wtag","=","(","WicketTag",")","element",";","\n				if","(","wtag",".","isExtendTag","(",")","&&","wtag",".","isClose","(",")",")","\n				","{","\n					break",";","\n				","}","\n			","}","\n		","}","\n\n		if","(","extendIndex","==","markup",".","size","(",")",")","\n		","{","\n			throw","new","WicketRuntimeException","(","\n				\"Missing","close","tag","</wicket:extend>","in","derived","markup:","\"","+","markup",".","toString","(",")",")",";","\n		","}","\n\n		//","If","<wicket:child>","than","skip","the","body","and","find","</wicket:child>\n		if","(","(","(","ComponentTag",")","baseMarkup",".","get","(","baseIndex",")",")",".","isOpen","(",")",")","\n		","{","\n			for","(","baseIndex++",";","baseIndex","<","baseMarkup",".","size","(",")",";","baseIndex++",")","\n			","{","\n				MarkupElement","element","=","baseMarkup",".","get","(","baseIndex",")",";","\n				if","(","element","instanceof","WicketTag",")","\n				","{","\n					WicketTag","tag","=","(","WicketTag",")","element",";","\n					if","(","tag",".","isChildTag","(",")","&&","tag",".","isClose","(",")",")","\n					","{","\n						//","Ok,","skipped","the","childs","content\n						tag",".","setMarkupClass","(","markupClass",")",";","\n						addMarkupElement","(","tag",")",";","\n						break",";","\n					","}","\n					else\n					","{","\n						throw","new","WicketRuntimeException","(","\n							\"Wicket","tags","like","<wicket:xxx>","are","not","allowed","in","between","<wicket:child>","and","</wicket:child>","tags:","\"","+\n								markup",".","toString","(",")",")",";","\n					","}","\n				","}","\n				else","if","(","element","instanceof","ComponentTag",")","\n				","{","\n					throw","new","WicketRuntimeException","(","\n						\"Wicket","tags","identified","by","wicket:id","are","not","allowed","in","between","<wicket:child>","and","</wicket:child>","tags:","\"","+\n							markup",".","toString","(",")",")",";","\n				","}","\n			","}","\n\n			//","</wicket:child>","not","found\n			if","(","baseIndex","==","baseMarkup",".","size","(",")",")","\n			","{","\n				throw","new","WicketRuntimeException","(","\n					\"Expected","to","find","</wicket:child>","in","base","markup:","\"","+","baseMarkup",".","toString","(",")",")",";","\n			","}","\n		","}","\n		else\n		","{","\n			//","And","now","all","remaining","elements","from","the","derived","markup",".","\n			//","But","first","add","</wicket:child>\n			WicketTag","childCloseTag","=","(","WicketTag",")","childTag",".","mutable","(",")",";","\n			childCloseTag",".","getXmlTag","(",")",".","setType","(","TagType",".","CLOSE",")",";","\n			childCloseTag",".","setMarkupClass","(","markupClass",")",";","\n			childCloseTag",".","setOpenTag","(","childTag",")",";","\n			addMarkupElement","(","childCloseTag",")",";","\n		","}","\n\n		for","(","baseIndex++",";","baseIndex","<","baseMarkup",".","size","(",")",";","baseIndex++",")","\n		","{","\n			MarkupElement","element","=","baseMarkup",".","get","(","baseIndex",")",";","\n			addMarkupElement","(","element",")",";","\n\n			//","Make","sure","all","tags","of","the","base","markup","remember","where","they","are\n			//","from\n			if","(","element","instanceof","ComponentTag","&&","resource","!=","null",")","\n			","{","\n				ComponentTag","tag","=","(","ComponentTag",")","element",";","\n				if","(","tag",".","getMarkupClass","(",")","==","null",")","{","\n					tag",".","setMarkupClass","(","markupClass",")",";","\n				","}","\n			","}","\n		","}","\n\n		//","Automatically","add","<head>","if","missing","and","required",".","On","a","Page\n		//","it","must","enclose","ALL","of","the","<wicket:head>","tags",".","\n		//","Note:","HtmlHeaderSectionHandler","does","something","similar,","but","because\n		//","markup","filters","are","not","called","for","merged","markup","again,",".",".",".","\n		if","(","Page",".","class",".","isAssignableFrom","(","markup",".","getMarkupResourceStream","(",")",".","getMarkupClass","(",")",")",")","\n		","{","\n			//","Find","the","position","inside","the","markup","for","first","<wicket:head>,\n			//","last","</wicket:head>","and","<head>\n			int","hasOpenWicketHead","=","-1",";","\n			int","hasCloseWicketHead","=","-1",";","\n			int","hasHead","=","-1",";","\n			for","(","int","i","=","0",";","i","<","size","(",")",";","i++",")","\n			","{","\n				MarkupElement","element","=","get","(","i",")",";","\n\n				boolean","isHeadTag","=","(","element","instanceof","WicketTag",")","&&","(","(","WicketTag",")","element",")",".","isHeadTag","(",")",";","\n				if","(","(","hasOpenWicketHead","==","-1",")","&&","isHeadTag",")","\n				","{","\n					hasOpenWicketHead","=","i",";","\n				","}","\n				else","if","(","isHeadTag","&&","(","(","ComponentTag",")","element",")",".","isClose","(",")",")","\n				","{","\n					hasCloseWicketHead","=","i",";","\n				","}","\n				else","if","(","(","hasHead","==","-1",")","&&","(","element","instanceof","ComponentTag",")","&&\n					TagUtils",".","isHeadTag","(","element",")",")","\n				","{","\n					hasHead","=","i",";","\n				","}","\n				else","if","(","(","hasHead","!=","-1",")","&&","(","hasOpenWicketHead","!=","-1",")",")","\n				","{","\n					break",";","\n				","}","\n			","}","\n\n			//","If","a","<head>","tag","is","missing,","insert","it","automatically\n			if","(","(","hasOpenWicketHead","!=","-1",")","&&","(","hasHead","==","-1",")",")","\n			","{","\n				final","XmlTag","headOpenTag","=","new","XmlTag","(",")",";","\n				headOpenTag",".","setName","(","\"head\"",")",";","\n				headOpenTag",".","setType","(","TagType",".","OPEN",")",";","\n				final","ComponentTag","openTag","=","new","ComponentTag","(","headOpenTag",")",";","\n				openTag",".","setId","(","HtmlHeaderSectionHandler",".","HEADER_ID",")",";","\n				openTag",".","setAutoComponentTag","(","true",")",";","\n\n				final","XmlTag","headCloseTag","=","new","XmlTag","(",")",";","\n				headCloseTag",".","setName","(","headOpenTag",".","getName","(",")",")",";","\n				headCloseTag",".","setType","(","TagType",".","CLOSE",")",";","\n				final","ComponentTag","closeTag","=","new","ComponentTag","(","headCloseTag",")",";","\n				closeTag",".","setOpenTag","(","openTag",")",";","\n				closeTag",".","setId","(","HtmlHeaderSectionHandler",".","HEADER_ID",")",";","\n\n				addMarkupElement","(","hasOpenWicketHead,","openTag",")",";","\n				addMarkupElement","(","hasCloseWicketHead","+","2,","closeTag",")",";","\n			","}","\n		","}","\n	"],"docstring_tokens":["Merge","inherited","and","base","markup"]}
{"code_tokens":["\n	public","PatternValidator","setReverse","(","boolean","reverse",")","\n	","{","\n		this",".","reverse","=","reverse",";","\n		return","this",";","\n	"],"docstring_tokens":["If","set","to","true","then","input","that","matches","the","pattern","is","considered","invalid"]}
{"code_tokens":["\n	protected","long","getSize","(","IManageablePage","page",")","\n	","{","\n		if","(","page","instanceof","SerializedPage",")","\n		","{","\n			return","(","(","SerializedPage",")","page",")",".","getData","(",")",".","length",";","\n		","}","\n		else\n		","{","\n			return","WicketObjects",".","sizeof","(","page",")",";","\n		","}","\n	"],"docstring_tokens":["Get","the","size","of","the","given","page"]}
{"code_tokens":["\n	public","static","Url","parse","(","final","CharSequence","url",")","\n	","{","\n		return","parse","(","url,","null",")",";","\n	"],"docstring_tokens":["Parses","the","given","URL","string"]}
{"code_tokens":["\n	public","List<String>","getSegments","(",")","\n	","{","\n		return","segments",";","\n	"],"docstring_tokens":["Returns","segments","of","the","URL"]}
{"code_tokens":["\n	public","List<QueryParameter>","getQueryParameters","(",")","\n	","{","\n		return","parameters",";","\n	"],"docstring_tokens":["Returns","query","parameters","of","the","URL"]}
{"code_tokens":["\n	public","boolean","isContextAbsolute","(",")","\n	","{","\n		return","!contextRelative","&&","!isFull","(",")","&&","!getSegments","(",")",".","isEmpty","(",")","&&","Strings",".","isEmpty","(","getSegments","(",")",".","get","(","0",")",")",";","\n	"],"docstring_tokens":["Returns","whether","the","Url","is","context","absolute"]}
{"code_tokens":["\n	public","void","setContextRelative","(","boolean","contextRelative",")","\n	","{","\n		this",".","contextRelative","=","contextRelative",";","\n	"],"docstring_tokens":["Flags","the","URL","as","relative","to","the","application","context"]}
{"code_tokens":["\n	public","Integer","getPort","(",")","\n	","{","\n		return","port",";","\n	"],"docstring_tokens":["Gets","the","port","of","this","url"]}
{"code_tokens":["\n	public","void","setPort","(","final","Integer","port",")","\n	","{","\n		this",".","port","=","port",";","\n	"],"docstring_tokens":["Sets","the","port","of","this","url"]}
{"code_tokens":["\n	public","String","getHost","(",")","\n	","{","\n		return","host",";","\n	"],"docstring_tokens":["Gets","the","host","name","of","this","url"]}
{"code_tokens":["\n	public","void","setHost","(","final","String","host",")","\n	","{","\n		this",".","host","=","host",";","\n	"],"docstring_tokens":["Sets","the","host","name","of","this","url"]}
{"code_tokens":["\n	public","String","getPath","(","Charset","charset",")","\n	","{","\n		Args",".","notNull","(","charset,","\"charset\"",")",";","\n\n		StringBuilder","path","=","new","StringBuilder","(",")",";","\n		boolean","slash","=","false",";","\n\n		for","(","String","segment",":","getSegments","(",")",")","\n		","{","\n			if","(","slash",")","\n			","{","\n				path",".","append","(","'/'",")",";","\n			","}","\n			path",".","append","(","encodeSegment","(","segment,","charset",")",")",";","\n			slash","=","true",";","\n		","}","\n		return","path",".","toString","(",")",";","\n	"],"docstring_tokens":["return","path","for","current","url","in","given","encoding"]}
{"code_tokens":["\n	public","String","getPath","(",")","\n	","{","\n		return","getPath","(","getCharset","(",")",")",";","\n	"],"docstring_tokens":["return","path","for","current","url","in","original","encoding"]}
{"code_tokens":["\n	public","String","getQueryString","(","Charset","charset",")","\n	","{","\n		Args",".","notNull","(","charset,","\"charset\"",")",";","\n\n		String","queryString","=","null",";","\n		List<QueryParameter>","queryParameters","=","getQueryParameters","(",")",";","\n\n		if","(","queryParameters",".","size","(",")","!=","0",")","\n		","{","\n			StringBuilder","query","=","new","StringBuilder","(",")",";","\n\n			for","(","QueryParameter","parameter",":","queryParameters",")","\n			","{","\n				if","(","query",".","length","(",")","!=","0",")","\n				","{","\n					query",".","append","(","'&'",")",";","\n				","}","\n				query",".","append","(","parameter",".","toString","(","charset",")",")",";","\n			","}","\n			queryString","=","query",".","toString","(",")",";","\n		","}","\n		return","queryString",";","\n	"],"docstring_tokens":["return","query","string","part","of","url","in","given","encoding"]}
{"code_tokens":["\n	public","String","getQueryString","(",")","\n	","{","\n		return","getQueryString","(","getCharset","(",")",")",";","\n	"],"docstring_tokens":["return","query","string","part","of","url","in","original","encoding"]}
{"code_tokens":["\n	public","static","<R>","R","visitComponentsPostOrder","(","Component","component,\n		final","org",".","apache",".","wicket",".","util",".","visit",".","IVisitor<Component,","R>","visitor",")","\n	","{","\n		Args",".","notNull","(","visitor,","\"visitor\"",")",";","\n\n		return","Visits",".","visitPostOrder","(","component,","visitor,","new","IVisitFilter","(",")","\n		","{","\n			@Override\n			public","boolean","visitObject","(","Object","object",")","\n			","{","\n				return","true",";","\n			","}","\n\n			@Override\n			public","boolean","visitChildren","(","Object","object",")","\n			","{","\n				if","(","object","instanceof","IFormVisitorParticipant",")","\n				","{","\n					return","(","(","IFormVisitorParticipant",")","object",")",".","processChildren","(",")",";","\n				","}","\n				return","true",";","\n			","}","\n\n		","}",")",";","\n	"],"docstring_tokens":["Visits","any","form","components","inside","component","if","it","is","a","container,","or","component","itself","if","it	","is","itself","a","form","component"]}
{"code_tokens":["\n	@SuppressWarnings","(","{","\"rawtypes\",","\"unchecked\"","}",")","\n	public","final","FormComponent<T>","add","(","final","IValidator<?","super","T>","validator",")","\n	","{","\n		Args",".","notNull","(","validator,","\"validator\"",")",";","\n\n		if","(","validator","instanceof","Behavior",")","\n		","{","\n			add","(","(","Behavior",")","validator",")",";","\n		","}","\n		else\n		","{","\n			add","(","(","Behavior",")","new","ValidatorAdapter","(","validator",")",")",";","\n		","}","\n		return","this",";","\n	"],"docstring_tokens":["Adds","a","validator","to","this","form","component"]}
{"code_tokens":["\n	public","final","FormComponent<T>","remove","(","final","IValidator<?","super","T>","validator",")","\n	","{","\n		Args",".","notNull","(","validator,","\"validator\"",")",";","\n		Behavior","match","=","null",";","\n		for","(","Behavior","behavior",":","getBehaviors","(",")",")","\n		","{","\n			if","(","behavior",".","equals","(","validator",")",")","\n			","{","\n				match","=","behavior",";","\n				break",";","\n			","}","\n			else","if","(","behavior","instanceof","ValidatorAdapter",")","\n			","{","\n				if","(","(","(","ValidatorAdapter<?>",")","behavior",")",".","getValidator","(",")",".","equals","(","validator",")",")","\n				","{","\n					match","=","behavior",";","\n					break",";","\n				","}","\n			","}","\n		","}","\n\n		if","(","match","!=","null",")","\n		","{","\n			remove","(","match",")",";","\n		","}","\n		else\n		","{","\n			throw","new","IllegalStateException","(","\n				\"Tried","to","remove","validator","that","was","not","previously","added",".","\"\n					+","\"Make","sure","your","validator's","equals","(",")","implementation","is","sufficient\"",")",";","\n		","}","\n		return","this",";","\n	"],"docstring_tokens":["Removes","a","validator","from","the","form","component"]}
{"code_tokens":["\n	public","String","getInput","(",")","\n	","{","\n		String[]","input","=","getInputAsArray","(",")",";","\n		if","(","input","==","null","||","input",".","length","==","0",")","\n		","{","\n			return","null",";","\n		","}","\n		else\n		","{","\n			return","trim","(","input[0]",")",";","\n		","}","\n	"],"docstring_tokens":["Gets","the","request","parameter","for","this","component","as","a","string"]}
{"code_tokens":["\n	public","String[]","getInputAsArray","(",")","\n	","{","\n		List<StringValue>","list","=","getParameterValues","(","getInputName","(",")",")",";","\n\n		String[]","values","=","null",";","\n		if","(","list","!=","null",")","\n		","{","\n			values","=","new","String[list",".","size","(",")","]",";","\n			for","(","int","i","=","0",";","i","<","list",".","size","(",")",";","++i",")","\n			","{","\n				values[i]","=","list",".","get","(","i",")",".","toString","(",")",";","\n			","}","\n		","}","\n\n		if","(","!isInputNullable","(",")",")","\n		","{","\n			if","(","values","!=","null","&&","values",".","length","==","1","&&","values[0]","==","null",")","\n			","{","\n				//","the","key","got","passed","in","(","otherwise","values","would","be","null",")",",\n				//","but","the","value","was","set","to","null",".","\n				//","As","the","servlet","spec","isn't","clear","on","what","to","do","with","'empty'\n				//","request","values","-","most","return","an","empty","string,","but","some","null","-\n				//","we","have","to","workaround","here","and","deliberately","set","to","an","empty\n				//","string","if","the","component","is","not","nullable","(","text","components",")","\n				return","EMPTY_STRING_ARRAY",";","\n			","}","\n		","}","\n		return","values",";","\n	"],"docstring_tokens":["Gets","the","request","parameters","for","this","component","as","strings"]}
{"code_tokens":["\n	@SuppressWarnings","(","\"unchecked\"",")","\n	public","final","List<IValidator<?","super","T>>","getValidators","(",")","\n	","{","\n		final","List<IValidator<?","super","T>>","list","=","new","ArrayList<>","(",")",";","\n\n		for","(","Behavior","behavior",":","getBehaviors","(",")",")","\n		","{","\n			if","(","behavior","instanceof","IValidator",")","\n			","{","\n				list",".","add","(","(","IValidator<?","super","T>",")","behavior",")",";","\n			","}","\n		","}","\n\n		return","Collections",".","unmodifiableList","(","list",")",";","\n	"],"docstring_tokens":["Gets","an","unmodifiable","list","of","validators","for","this","FormComponent"]}
{"code_tokens":["\n	public","final","boolean","hasRawInput","(",")","\n	","{","\n		return","!NO_RAW_INPUT",".","equals","(","rawInput",")",";","\n	"],"docstring_tokens":["Returns","whether","this","component","has","raw","input"]}
{"code_tokens":["\n	public","final","void","inputChanged","(",")","\n	","{","\n		if","(","isVisibleInHierarchy","(",")","&&","isEnabledInHierarchy","(",")",")","\n		","{","\n			//","Get","input","as","String","array\n			final","String[]","input","=","getInputAsArray","(",")",";","\n\n			//","If","there","is","any","input\n			if","(","input","!=","null","&&","input",".","length",">","0","&&","input[0]","!=","null",")","\n			","{","\n				//","join","the","values","together","with","\"",";","\",","for","example,","\"id1",";","id2",";","id3\"\n				rawInput","=","StringList",".","valueOf","(","input",")",".","join","(","VALUE_SEPARATOR",")",";","\n			","}","\n			else","if","(","isInputNullable","(",")",")","\n			","{","\n				//","no","input\n				rawInput","=","null",";","\n			","}","\n			else\n			","{","\n				rawInput","=","NO_RAW_INPUT",";","\n			","}","\n		","}","\n	"],"docstring_tokens":["Used","by","Form","to","tell","the","FormComponent","that","a","new","user","input","is","available"]}
{"code_tokens":["\n	public","final","void","invalid","(",")","\n	","{","\n		onInvalid","(",")",";","\n	"],"docstring_tokens":["Indicate","that","validation","of","this","form","component","failed"]}
{"code_tokens":["\n	public","final","FormComponent<T>","setRequired","(","final","boolean","required",")","\n	","{","\n		if","(","!required","&&","getType","(",")","!=","null","&&","getType","(",")",".","isPrimitive","(",")",")","\n		","{","\n			throw","new","WicketRuntimeException","(","\n				\"FormComponent","has","to","be","required","when","the","type","is","primitive","class:","\"","+","this",")",";","\n		","}","\n		if","(","required","!=","isRequired","(",")",")","\n		","{","\n			addStateChange","(",")",";","\n		","}","\n		setFlag","(","FLAG_REQUIRED,","required",")",";","\n		return","this",";","\n	"],"docstring_tokens":["Sets","the","required","flag"]}
{"code_tokens":["\n	public","FormComponent<T>","setType","(","Class<?>","type",")","\n	","{","\n		typeName","=","type","==","null","?","null",":","type",".","getName","(",")",";","\n		if","(","type","!=","null","&&","type",".","isPrimitive","(",")",")","\n		","{","\n			setRequired","(","true",")",";","\n		","}","\n		return","this",";","\n	"],"docstring_tokens":["Sets","the","type","that","will","be","used","when","updating","the","model","for","this","component"]}
{"code_tokens":["\n	protected","final","int","inputAsInt","(",")","\n	","{","\n		final","String","string","=","getInput","(",")",";","\n		try\n		","{","\n			return","Integer",".","parseInt","(","string",")",";","\n		","}","\n		catch","(","NumberFormatException","e",")","\n		","{","\n			throw","new","IllegalArgumentException","(","\n				exceptionMessage","(","\"Internal","error",".","Request","string","'\"","+","string","+\n					\"'","not","a","valid","integer\"",")",")",";","\n		","}","\n	"],"docstring_tokens":["Gets","the","request","parameter","for","this","component","as","an","int"]}
{"code_tokens":["\n	protected","final","int[]","inputAsIntArray","(",")","\n	","{","\n		final","String[]","strings","=","getInputAsArray","(",")",";","\n		if","(","strings","!=","null",")","\n		","{","\n			final","int[]","ints","=","new","int[strings",".","length]",";","\n			for","(","int","i","=","0",";","i","<","strings",".","length",";","i++",")","\n			","{","\n				ints[i]","=","Integer",".","parseInt","(","strings[i]",")",";","\n			","}","\n			return","ints",";","\n		","}","\n		return","null",";","\n	"],"docstring_tokens":["Gets","the","request","parameters","for","this","component","as","ints"]}
{"code_tokens":["\n	protected","boolean","shouldTrimInput","(",")","\n	","{","\n		return","true",";","\n	"],"docstring_tokens":["Determines","whether","or","not","this","component","should","trim","its","input","prior","to","processing","it"]}
{"code_tokens":["\n	protected","final","void","validateRequired","(",")","\n	","{","\n		if","(","!checkRequired","(",")",")","\n		","{","\n			reportRequiredError","(",")",";","\n		","}","\n	"],"docstring_tokens":["Checks","if","the","raw","input","value","is","not","null","if","this","component","is","required"]}
{"code_tokens":["\n	protected","void","reportRequiredError","(",")","\n	","{","\n		error","(","new","ValidationError","(",")",".","addKey","(","\"Required\"",")",")",";","\n	"],"docstring_tokens":["Reports","required","error","against","this","component"]}
{"code_tokens":["\n	protected","Scheme","getDesiredSchemeFor","(","IRequestHandler","handler",")","\n	","{","\n		if","(","handler","instanceof","IPageClassRequestHandler",")","\n		","{","\n			return","getDesiredSchemeFor","(","(","(","IPageClassRequestHandler",")","handler",")",".","getPageClass","(",")",")",";","\n		","}","\n		return","Scheme",".","ANY",";","\n	"],"docstring_tokens":["Figures","out","which","Scheme","should","be","used","to","access","the","request","handler"]}
{"code_tokens":["\n	protected","Scheme","getSchemeOf","(","Request","request",")","\n	","{","\n		HttpServletRequest","req","=","(","HttpServletRequest",")","request",".","getContainerRequest","(",")",";","\n\n		if","(","\"https\"",".","equalsIgnoreCase","(","req",".","getScheme","(",")",")",")","\n		","{","\n			return","Scheme",".","HTTPS",";","\n		","}","\n		else","if","(","\"http\"",".","equalsIgnoreCase","(","req",".","getScheme","(",")",")",")","\n		","{","\n			return","Scheme",".","HTTP",";","\n		","}","\n		else\n		","{","\n			throw","new","IllegalStateException","(","\"Could","not","resolve","protocol","for","request:","\"","+","req",")",";","\n		","}","\n	"],"docstring_tokens":["Determines","the","Scheme","of","the","request"]}
{"code_tokens":["\n	protected","Scheme","getDesiredSchemeFor","(","Class<?","extends","IRequestablePage>","pageClass",")","\n	","{","\n		if","(","pageClass","==","null",")","\n		","{","\n			return","Scheme",".","ANY",";","\n		","}","\n\n		Scheme","SCHEME","=","cache",".","get","(","pageClass",")",";","\n		if","(","SCHEME","==","null",")","\n		","{","\n			if","(","hasSecureAnnotation","(","pageClass",")",")","\n			","{","\n				SCHEME","=","Scheme",".","HTTPS",";","\n			","}","\n			else\n			","{","\n				SCHEME","=","Scheme",".","HTTP",";","\n			","}","\n			cache",".","put","(","pageClass,","SCHEME",")",";","\n		","}","\n		return","SCHEME",";","\n	"],"docstring_tokens":["Determines","which","Scheme","should","be","used","to","access","the","page"]}
{"code_tokens":["\r\n	public","final","int","getLength","(",")","\r\n	","{","\r\n		return","xmlTag",".","getLength","(",")",";","\r\n	"],"docstring_tokens":["Gets","the","length","of","the","tag","in","characters"]}
{"code_tokens":["\r\n	void","copyPropertiesTo","(","final","HtmlSpecialTag","dest",")","\r\n	","{","\r\n		dest",".","flags","=","flags",";","\r\n	"],"docstring_tokens":["Copies","all","internal","properties","from","this","tag","to","dest"]}
{"code_tokens":["\r\n	public","final","void","writeOutput","(","final","Response","response,","final","boolean","stripWicketAttributes,\r\n		final","String","namespace",")","\r\n	","{","\r\n		response",".","write","(","toString","(",")",")",";","\r\n	"],"docstring_tokens":["Write","the","tag","to","the","response"]}
{"code_tokens":["\n	@Override\n	public","void","detachModels","(",")","\n	","{","\n		super",".","detachModels","(",")",";","\n	"],"docstring_tokens":["Detaches","any","attached","models","referenced","by","this","page"]}
{"code_tokens":["\n	final","void","endComponentRender","(","Component","component",")","\n	","{","\n		if","(","component","instanceof","MarkupContainer",")","\n		","{","\n			checkRendering","(","(","MarkupContainer",")","component",")",";","\n		","}","\n		else\n		","{","\n			renderedComponents","=","null",";","\n		","}","\n	"],"docstring_tokens":["This","method","is","called","when","a","component","was","rendered","as","a","part"]}
{"code_tokens":["\n	@Override\n	public","boolean","isBookmarkable","(",")","\n	","{","\n		return","getApplication","(",")",".","getPageFactory","(",")",".","isBookmarkable","(","getClass","(",")",")",";","\n	"],"docstring_tokens":["Bookmarkable","page","can","be","instantiated","using","a","bookmarkable","URL"]}
{"code_tokens":["\n	final","void","startComponentRender","(","Component","component",")","\n	","{","\n		renderedComponents","=","null",";","\n	"],"docstring_tokens":["This","method","is","called","when","a","component","will","be","rendered","as","a","part"]}
{"code_tokens":["\n	private","void","checkRendering","(","final","MarkupContainer","renderedContainer",")","\n	","{","\n		//","If","the","application","wants","component","uses","checked","and\n		//","the","response","is","not","a","redirect\n		final","DebugSettings","debugSettings","=","getApplication","(",")",".","getDebugSettings","(",")",";","\n		if","(","debugSettings",".","getComponentUseCheck","(",")",")","\n		","{","\n			final","List<Component>","unrenderedComponents","=","new","ArrayList<Component>","(",")",";","\n			final","StringBuilder","buffer","=","new","StringBuilder","(",")",";","\n			renderedContainer",".","visitChildren","(","new","IVisitor<Component,","Void>","(",")","\n			","{","\n				@Override\n				public","void","component","(","final","Component","component,","final","IVisit<Void>","visit",")","\n				","{","\n					//","If","component","never","rendered\n					if","(","renderedComponents","==","null","||","!renderedComponents",".","contains","(","component",")",")","\n					","{","\n						//","If","not","an","auto","component",".",".",".","\n						if","(","!component",".","isAuto","(",")","&&","component",".","isVisibleInHierarchy","(",")",")","\n						","{","\n							//","Increase","number","of","unrendered","components\n							unrenderedComponents",".","add","(","component",")",";","\n\n							//","Add","to","explanatory","string","to","buffer\n							buffer",".","append","(","Integer",".","toString","(","unrenderedComponents",".","size","(",")",")",")","\n								",".","append","(","\"",".","\"",")","\n								",".","append","(","component",".","toString","(","true",")",")","\n								",".","append","(","'\\n'",")",";","\n							String","metadata","=","component",".","getMetaData","(","Component",".","CONSTRUCTED_AT_KEY",")",";","\n							if","(","metadata","!=","null",")","\n							","{","\n								buffer",".","append","(","metadata",")",".","append","(","'\\n'",")",";","\n							","}","\n							metadata","=","component",".","getMetaData","(","Component",".","ADDED_AT_KEY",")",";","\n							if","(","metadata","!=","null",")","\n							","{","\n								buffer",".","append","(","metadata",")",".","append","(","'\\n'",")",";","\n							","}","\n						","}","\n						else\n						","{","\n							//","if","the","component","is","not","visible","in","hierarchy","we\n							//","should","not","visit","its","children","since","they","are","also\n							//","not","visible\n							visit",".","dontGoDeeper","(",")",";","\n						","}","\n					","}","\n				","}","\n			","}",")",";","\n\n			//","Throw","exception","if","any","errors","were","found\n			if","(","unrenderedComponents",".","size","(",")",">","0",")","\n			","{","\n				renderedComponents","=","null",";","\n\n				List<Component>","transparentContainerChildren","=","Generics",".","newArrayList","(",")",";","\n\n				Iterator<Component>","iterator","=","unrenderedComponents",".","iterator","(",")",";","\n				outerWhile",":","while","(","iterator",".","hasNext","(",")",")","\n				","{","\n					Component","component","=","iterator",".","next","(",")",";","\n\n					//","If","any","of","the","transparentContainerChildren","is","a","parent","to","component,","then\n					//","ignore","it",".","\n					for","(","Component","transparentContainerChild",":","transparentContainerChildren",")","\n					","{","\n						MarkupContainer","parent","=","component",".","getParent","(",")",";","\n						while","(","parent","!=","null",")","\n						","{","\n							if","(","parent","==","transparentContainerChild",")","\n							","{","\n								iterator",".","remove","(",")",";","\n								continue","outerWhile",";","\n							","}","\n							parent","=","parent",".","getParent","(",")",";","\n						","}","\n					","}","\n\n					if","(","hasInvisibleTransparentChild","(","component",".","getParent","(",")",",","component",")",")","\n					","{","\n						//","If","we","found","a","transparent","container","that","isn't","visible","then","ignore","this\n						//","component","and","only","do","a","debug","statement","here",".","\n						if","(","log",".","isDebugEnabled","(",")",")","\n						","{","\n							log",".","debug","(","\n								\"Component","{","}","wasn't","rendered","but","might","have","a","transparent","parent",".","\",\n								component",")",";","\n						","}","\n\n						transparentContainerChildren",".","add","(","component",")",";","\n						iterator",".","remove","(",")",";","\n						continue","outerWhile",";","\n					","}","\n				","}","\n\n				//","if","still",">","0\n				if","(","unrenderedComponents",".","size","(",")",">","0",")","\n				","{","\n					//","Throw","exception\n					throw","new","WicketRuntimeException","(","\n						\"The","component","(","s",")","below","failed","to","render",".","Possible","reasons","could","be","that:\\n\\t1",")","you","have","added","a","component","in","code","but","forgot","to","reference","it","in","the","markup","(","thus","the","component","will","never","be","rendered",")",",\\n\\t2",")","if","your","components","were","added","in","a","parent","container","then","make","sure","the","markup","for","the","child","container","includes","them","in","<wicket:extend>",".","\\n\\n\"","+\n							buffer",".","toString","(",")",")",";","\n				","}","\n			","}","\n		","}","\n\n		//","Get","rid","of","set\n		renderedComponents","=","null",";","\n	"],"docstring_tokens":["Throw","an","exception","if","not","all","components","rendered"]}
{"code_tokens":["\n	@Override\n	void","init","(",")","\n	","{","\n		if","(","isBookmarkable","(",")","==","false",")","\n		","{","\n			setStatelessHint","(","false",")",";","\n		","}","\n\n		//","Set","versioning","of","page","based","on","default\n		setVersioned","(","getApplication","(",")",".","getPageSettings","(",")",".","getVersionPagesByDefault","(",")",")",";","\n\n		//","All","Pages","are","born","dirty","so","they","get","clustered","right","away\n		dirty","(","true",")",";","\n\n		//","this","is","a","bit","of","a","dirty","hack,","but","calling","dirty","(","true",")","results","in","isStateless","called\n		//","which","is","bound","to","set","the","stateless","cache","to","true","as","there","are","no","components","yet\n		stateless","=","null",";","\n	"],"docstring_tokens":["Initializes","Page","by","adding","it","to","the","Session","and","initializing","it"]}
{"code_tokens":["\n	@Override\n	public","final","boolean","wasCreatedBookmarkable","(",")","\n	","{","\n		return","getFlag","(","FLAG_WAS_CREATED_BOOKMARKABLE",")",";","\n	"],"docstring_tokens":["Checks","if","this","page","was","created","using","one","of","its","bookmarkable","constructors"]}
{"code_tokens":["\n	@Override\n	public","String","getRealPath","(","String","name",")","\n	","{","\n		try","{","\n			URL","url","=","getResource","(","name",")",";","\n			if","(","url","!=","null",")","{","\n				//","WICKET-6755","do","not","use","url",".","getFile","(",")","as","it","does","not","properly","decode","the","path\n				return","new","File","(","url",".","toURI","(",")",")",".","getAbsolutePath","(",")",";","\n			","}","\n		","}","catch","(","IOException","|","URISyntaxException","e",")","{","\n			log",".","error","(","e",".","getMessage","(",")",",","e",")",";","\n		","}","\n		return","null",";","\n	"],"docstring_tokens":["Get","the","real","file","path","of","the","given","resource","name"]}
{"code_tokens":["\n	public","Object","getBeansToInject","(",")","\n	","{","\n		if","(","beansToInjectMap","!=","null","&&","beansToInjectMap",".","size","(",")",">","0",")","\n		","{","\n			return","beansToInjectMap",";","\n		","}","\n		\n		if","(","beansToInjectColl","!=","null","&&","beansToInjectColl",".","size","(",")",">","0",")","\n		","{","\n			return","beansToInjectColl",";","\n		","}","\n		\n		return","null",";","\n	"],"docstring_tokens":["Returns","an","instance","containing","all","the","beans","collected","for","the","field","and	","compatible","with","the","type","of","the","field"]}
{"code_tokens":["\n	public","CharSequence","getText","(",")","\n	","{","\n		if","(","dataStream","!=","null",")","\n		","{","\n			throw","new","IllegalStateException","(","\"write","(","byte[]",")","has","already","been","called",".","\"",")",";","\n		","}","\n		if","(","charSequenceBuilder","!=","null",")","\n		","{","\n			return","charSequenceBuilder",";","\n		","}","\n		else\n		","{","\n			return","null",";","\n		","}","\n	"],"docstring_tokens":["Returns","the","text","already","written","to","this","response"]}
{"code_tokens":["\n	public","void","setText","(","CharSequence","text",")","\n	","{","\n		if","(","dataStream","!=","null",")","\n		","{","\n			throw","new","IllegalStateException","(","\"write","(","byte[]",")","has","already","been","called",".","\"",")",";","\n		","}","\n		if","(","charSequenceBuilder","!=","null",")","\n		","{","\n			charSequenceBuilder",".","setLength","(","0",")",";","\n		","}","\n		write","(","text",")",";","\n	"],"docstring_tokens":["Replaces","the","text","in","this","response"]}
{"code_tokens":["\n	public","void","writeTo","(","final","WebResponse","response",")","\n	","{","\n		Args",".","notNull","(","response,","\"response\"",")",";","\n\n		Collections",".","sort","(","actions",")",";","\n\n		for","(","Action","action",":","actions",")","\n		","{","\n			action",".","invoke","(","response",")",";","\n		","}","\n	"],"docstring_tokens":["Writes","the","content","of","the","buffer","to","the","specified","response"]}
{"code_tokens":["\r\n	public","static","Duration","days","(","final","double","days",")","\r\n	","{","\r\n		return","hours","(","24",".","0","*","days",")",";","\r\n	"],"docstring_tokens":["Retrieves","the","Duration","based","on","days"]}
{"code_tokens":["\r\n	public","static","Duration","elapsed","(","final","Time","start",")","\r\n	","{","\r\n		return","start",".","elapsedSince","(",")",";","\r\n	"],"docstring_tokens":["Calculates","the","amount","of","time","elapsed","since","start","time"]}
{"code_tokens":["\r\n	public","static","Duration","hours","(","final","double","hours",")","\r\n	","{","\r\n		return","minutes","(","60",".","0","*","hours",")",";","\r\n	"],"docstring_tokens":["Retrieves","the","Duration","based","on","hours"]}
{"code_tokens":["\r\n	public","static","Duration","milliseconds","(","final","double","milliseconds",")","\r\n	","{","\r\n		return","milliseconds","(","Math",".","round","(","milliseconds",")",")",";","\r\n	"],"docstring_tokens":["Retrieves","the","Duration","based","on","milliseconds"]}
{"code_tokens":["\r\n	public","static","Duration","minutes","(","final","double","minutes",")","\r\n	","{","\r\n		return","seconds","(","60",".","0","*","minutes",")",";","\r\n	"],"docstring_tokens":["Retrieves","the","Duration","based","on","minutes"]}
{"code_tokens":["\r\n	public","static","Duration","seconds","(","final","double","seconds",")","\r\n	","{","\r\n		return","milliseconds","(","seconds","*","1000",".","0",")",";","\r\n	"],"docstring_tokens":["Retrieves","the","Duration","based","on","seconds"]}
{"code_tokens":["\r\n	public","static","Duration","valueOf","(","final","long","time",")","\r\n	","{","\r\n		return","new","Duration","(","time",")",";","\r\n	"],"docstring_tokens":["Retrieves","the","given","long","as","a","Duration"]}
{"code_tokens":["\r\n	public","Duration","add","(","final","Duration","duration",")","\r\n	","{","\r\n		return","valueOf","(","getMilliseconds","(",")","+","duration",".","getMilliseconds","(",")",")",";","\r\n	"],"docstring_tokens":["Adds","a","given","Duration","to","this","Duration"]}
{"code_tokens":["\r\n	public","final","double","days","(",")","\r\n	","{","\r\n		return","hours","(",")","/","24",".","0",";","\r\n	"],"docstring_tokens":["Retrieves","the","number","of","days","of","the","current","Duration"]}
{"code_tokens":["\r\n	public","final","double","hours","(",")","\r\n	","{","\r\n		return","minutes","(",")","/","60",".","0",";","\r\n	"],"docstring_tokens":["Retrieves","the","number","of","hours","of","the","current","Duration"]}
{"code_tokens":["\r\n	public","final","double","minutes","(",")","\r\n	","{","\r\n		return","seconds","(",")","/","60",".","0",";","\r\n	"],"docstring_tokens":["Retrieves","the","number","of","minutes","of","the","current","Duration"]}
{"code_tokens":["\r\n	public","final","double","seconds","(",")","\r\n	","{","\r\n		return","getMilliseconds","(",")","/","1000",".","0",";","\r\n	"],"docstring_tokens":["Retrieves","the","number","of","seconds","of","the","current","Duration"]}
{"code_tokens":["\r\n	public","final","void","sleep","(",")","\r\n	","{","\r\n		if","(","getMilliseconds","(",")",">","0",")","\r\n		","{","\r\n			try\r\n			","{","\r\n				Thread",".","sleep","(","getMilliseconds","(",")",")",";","\r\n			","}","\r\n			catch","(","InterruptedException","e",")","\r\n			","{","\r\n				//","Ignored\r\n			","}","\r\n		","}","\r\n	"],"docstring_tokens":["Sleeps","for","the","current","Duration"]}
{"code_tokens":["\r\n	public","Duration","subtract","(","final","Duration","that",")","\r\n	","{","\r\n		return","valueOf","(","getMilliseconds","(",")","-","that",".","getMilliseconds","(",")",")",";","\r\n	"],"docstring_tokens":["Subtracts","a","given","Duration","from","this","Duration"]}
{"code_tokens":["\r\n	public","void","wait","(","final","Object","object",")","\r\n	","{","\r\n		try\r\n		","{","\r\n			object",".","wait","(","getMilliseconds","(",")",")",";","\r\n		","}","\r\n		catch","(","InterruptedException","e",")","\r\n		","{","\r\n			throw","new","RuntimeException","(","e",")",";","\r\n		","}","\r\n	"],"docstring_tokens":["Wait","for","this","duration","on","the","given","monitor"]}
{"code_tokens":["\r\n	public","String","toString","(","final","Locale","locale",")","\r\n	","{","\r\n		if","(","getMilliseconds","(",")",">=","0",")","\r\n		","{","\r\n			if","(","days","(",")",">=","1",".","0",")","\r\n			","{","\r\n				return","unitString","(","days","(",")",",","\"day\",","locale",")",";","\r\n			","}","\r\n\r\n			if","(","hours","(",")",">=","1",".","0",")","\r\n			","{","\r\n				return","unitString","(","hours","(",")",",","\"hour\",","locale",")",";","\r\n			","}","\r\n\r\n			if","(","minutes","(",")",">=","1",".","0",")","\r\n			","{","\r\n				return","unitString","(","minutes","(",")",",","\"minute\",","locale",")",";","\r\n			","}","\r\n\r\n			if","(","seconds","(",")",">=","1",".","0",")","\r\n			","{","\r\n				return","unitString","(","seconds","(",")",",","\"second\",","locale",")",";","\r\n			","}","\r\n\r\n			return","unitString","(","getMilliseconds","(",")",",","\"millisecond\",","locale",")",";","\r\n		","}","\r\n		else\r\n		","{","\r\n			return","\"N/A\"",";","\r\n		","}","\r\n	"],"docstring_tokens":["Retrieves","the","String","representation","of","this","Duration","in","days,","	","hours,","minutes,","seconds","or","milliseconds,","as","appropriate"]}
{"code_tokens":["\r\n	public","static","Instant","getLastModified","(","final","URL","url",")","throws","IOException\r\n	","{","\r\n		//","check","if","url","points","to","a","local","file\r\n		final","File","file","=","Files",".","getLocalFileFromUrl","(","url",")",";","\r\n\r\n		if","(","file","!=","null",")","\r\n		","{","\r\n			//","in","that","case","we","can","get","the","timestamp","faster\r\n			return","Files",".","getLastModified","(","file",")",";","\r\n		","}","\r\n\r\n		//","otherwise","open","the","url","and","proceed\r\n		URLConnection","connection","=","url",".","openConnection","(",")",";","\r\n\r\n		final","long","milliseconds",";","\r\n\r\n		try\r\n		","{","\r\n			if","(","connection","instanceof","JarURLConnection",")","\r\n			","{","\r\n				JarURLConnection","jarUrlConnection","=","(","JarURLConnection",")","connection",";","\r\n				URL","jarFileUrl","=","jarUrlConnection",".","getJarFileURL","(",")",";","\r\n				URLConnection","jarFileConnection","=","jarFileUrl",".","openConnection","(",")",";","\r\n				jarFileConnection",".","setDoInput","(","false",")",";","\r\n				//","get","timestamp","from","JAR\r\n				milliseconds","=","jarFileConnection",".","getLastModified","(",")",";","\r\n			","}","\r\n			else\r\n			","{","\r\n				//","get","timestamp","from","URL\r\n				milliseconds","=","connection",".","getLastModified","(",")",";","\r\n			","}","\r\n\r\n			//","return","null","if","timestamp","is","unavailable\r\n			if","(","milliseconds","==","0",")","\r\n			","{","\r\n				return","null",";","\r\n			","}","\r\n\r\n			//","return","UNIX","timestamp\r\n			return","Instant",".","ofEpochMilli","(","milliseconds",")",";","\r\n\r\n		","}","\r\n		finally\r\n		","{","\r\n			closeQuietly","(","connection",")",";","\r\n		","}","\r\n	"],"docstring_tokens":["Gets","last","modified","date","of","the","given","URL"]}
{"code_tokens":["\n	public","final","String","getUrl","(",")","\n	","{","\n		return","uri",";","\n	"],"docstring_tokens":["Gets","the","url","to","the","external","resource"]}
{"code_tokens":["\r\n	private","boolean","isParentRendering","(",")","\r\n	","{","\r\n		MarkupContainer","parent","=","getParent","(",")",";","\r\n\r\n		return","parent","!=","null","&&","parent",".","isRendering","(",")",";","\r\n	"],"docstring_tokens":["Says","if","parent","container","is","rendering","or","not"]}
{"code_tokens":["\r\n	private","void","renderHeadForInnerSiblings","(","HtmlHeaderContainer","container",")","\r\n	","{","\r\n		MarkupStream","stream","=","new","MarkupStream","(","getMarkup","(",")",")",";","\r\n\r\n		while","(","stream",".","isCurrentIndexInsideTheStream","(",")",")","\r\n		","{","\r\n			MarkupElement","childOpenTag","=","stream",".","nextOpenTag","(",")",";","\r\n\r\n			if","(","(","childOpenTag","instanceof","ComponentTag",")","&&","!stream",".","atCloseTag","(",")",")","\r\n			","{","\r\n				//","Get","element","as","tag\r\n				final","ComponentTag","tag","=","(","ComponentTag",")","childOpenTag",";","\r\n\r\n				//","Get","component","id\r\n				final","String","id","=","tag",".","getId","(",")",";","\r\n\r\n				Component","component","=","null",";","\r\n\r\n				if","(","get","(","id",")","==","null",")","\r\n				","{","\r\n					component","=","ComponentResolvers",".","resolveByComponentHierarchy","(","this,","stream,","tag",")",";","\r\n				","}","\r\n\r\n				if","(","component","!=","null",")","\r\n				","{","\r\n					component",".","internalRenderHead","(","container",")",";","\r\n				","}","\r\n\r\n				//consider","just","direct","children\r\n				stream",".","skipToMatchingCloseTag","(","tag",")",";","\r\n			","}","\r\n		","}","\r\n	"],"docstring_tokens":["Renders","head","for","embedded","component,","i.e"]}
{"code_tokens":["\n	protected","WebMarkupContainer","newOverlay","(","String","overlayId",")","\n	","{","\n		return","new","WebMarkupContainer","(","overlayId",")",";","\n	"],"docstring_tokens":["Factory","method","for","the","overlay","markup","around","the","dialog"]}
{"code_tokens":["\n	public","ModalDialog","open","(","Component","content,","AjaxRequestTarget","target",")","\n	","{","\n		setContent","(","content",")",";","\n		removeContentOnClose","=","true",";","\n\n		overlay",".","setVisible","(","true",")",";","\n\n		if","(","target","!=","null",")","\n		","{","\n			target",".","add","(","this",")",";","\n		","}","\n\n		return","this",";","\n	"],"docstring_tokens":["Open","the","dialog","with","a","content.	","	","The","content","will","be","removed","on","close","of","the","dialog"]}
{"code_tokens":["\n	public","boolean","isOpen","(",")","\n	","{","\n		return","overlay",".","isVisible","(",")",";","\n	"],"docstring_tokens":["Is","this","dialog","open"]}
{"code_tokens":["\n	public","ModalDialog","closeOnEscape","(",")","\n	","{","\n		overlay",".","add","(","new","CloseBehavior","(","\"keydown\"",")","\n		","{","\n			protected","CharSequence","getPrecondition","(",")","\n			","{","\n				return","\"return","Wicket",".","Event",".","keyCode","(","attrs",".","event",")","==","27\"",";","\n			","}","\n		","}",")",";","\n		return","this",";","\n	"],"docstring_tokens":["Close","this","dialog","on","press","of","escape","key"]}
{"code_tokens":["\n	public","ModalDialog","closeOnClick","(",")","\n	","{","\n		overlay",".","add","(","new","CloseBehavior","(","\"click\"",")","\n		","{","\n			protected","CharSequence","getPrecondition","(",")","\n			","{","\n				return","String",".","format","(","\"return","attrs",".","event",".","target",".","id","===","'%s'",";","\",","overlay",".","getMarkupId","(",")",")",";","\n			","}","\n		","}",")",";","\n		return","this",";","\n	"],"docstring_tokens":["Close","this","dialog","on","click","outside"]}
{"code_tokens":["\r\n	public","static","String","newStringIso8859_1","(","final","byte[]","bytes",")","\r\n	","{","\r\n		return","StringUtils",".","newString","(","bytes,","CharEncoding",".","ISO_8859_1",")",";","\r\n	"],"docstring_tokens":["Constructs","a","new","String","by","decoding","the","specified","array","of","bytes","using","the","	","ISO-8859-1","charset"]}
{"code_tokens":["\r\n	public","static","String","newStringUtf16","(","final","byte[]","bytes",")","\r\n	","{","\r\n		return","StringUtils",".","newString","(","bytes,","CharEncoding",".","UTF_16",")",";","\r\n	"],"docstring_tokens":["Constructs","a","new","String","by","decoding","the","specified","array","of","bytes","using","the","	","UTF-16","charset"]}
{"code_tokens":["\r\n	public","static","String","newStringUtf16Be","(","final","byte[]","bytes",")","\r\n	","{","\r\n		return","StringUtils",".","newString","(","bytes,","CharEncoding",".","UTF_16BE",")",";","\r\n	"],"docstring_tokens":["Constructs","a","new","String","by","decoding","the","specified","array","of","bytes","using","the","	","UTF-16BE","charset"]}
{"code_tokens":["\r\n	public","static","String","newStringUtf16Le","(","final","byte[]","bytes",")","\r\n	","{","\r\n		return","StringUtils",".","newString","(","bytes,","CharEncoding",".","UTF_16LE",")",";","\r\n	"],"docstring_tokens":["Constructs","a","new","String","by","decoding","the","specified","array","of","bytes","using","the","	","UTF-16LE","charset"]}
{"code_tokens":["\r\n	public","static","String","newStringUtf8","(","final","byte[]","bytes",")","\r\n	","{","\r\n		return","StringUtils",".","newString","(","bytes,","CharEncoding",".","UTF_8",")",";","\r\n	"],"docstring_tokens":["Constructs","a","new","String","by","decoding","the","specified","array","of","bytes","using","the","UTF-8","	","charset"]}
{"code_tokens":["\n	public","void","increment","(",")","\n	","{","\n		count++",";","\n	"],"docstring_tokens":["Increases","the","count","value","by","one"]}
{"code_tokens":["\n	public","void","decrement","(",")","\n	","{","\n		count--",";","\n	"],"docstring_tokens":["Decreases","the","count","value","by","one"]}
{"code_tokens":["\n	public","void","setMarkupStream","(","final","MarkupStream","markupStream",")","\n	","{","\n		this",".","markupStream","=","markupStream",";","\n	"],"docstring_tokens":["Set","the","markup","stream","which","caused","the","exception"]}
{"code_tokens":["\n","public","static","FilesSelectedBehavior","onSelected","(","\n","SerializableBiConsumer<AjaxRequestTarget,","List<FileDescription>>","select",")","\n","{","\n","Args",".","notNull","(","select,","\"select\"",")",";","\n\n","return","new","FilesSelectedBehavior","(",")","\n","{","\n","private","static","final","long","serialVersionUID","=","1L",";","\n\n","@Override\n","protected","void","onSelected","(","AjaxRequestTarget","target,","List<FileDescription>","fileDescriptions",")","{","\n","select",".","accept","(","target,","fileDescriptions",")",";","\n","}","\n","}",";","\n"],"docstring_tokens":["Creates","an","FilesSelectedBehavior","based","on","lambda","expressions"]}
{"code_tokens":["\n	@Override\n	public","void","init","(","Application","application",")","\n	","{","\n		Http2Settings","http2Settings","=","Http2Settings",".","Holder",".","get","(","application",")",";","\n		http2Settings",".","setPushBuilder","(","new","Jetty9PushBuilder","(",")",")",";","\n	"],"docstring_tokens":["Initializes","the","push","builder","API","of","Jetty","9.3+"]}
{"code_tokens":["\n	@Override\n	public","Instant","lastModifiedTime","(",")","\n	","{","\n		final","long","time","=","lastModified","(",")",";","\n		\n		if","(","time","==","0",")","\n		","{","\n			return","null",";","\n		","}","\n		return","Instant",".","ofEpochMilli","(","time",")",";","\n	"],"docstring_tokens":["Returns","a","Time","object","representing","the","most","recent","time","this","file","was","modified"]}
{"code_tokens":["\n	public","void","sync","(",")","throws","IOException\n	","{","\n		final","FileInputStream","in","=","new","FileInputStream","(","this",")",";","\n		try\n		","{","\n			in",".","getFD","(",")",".","sync","(",")",";","\n		","}","\n		finally\n		","{","\n			in",".","close","(",")",";","\n		","}","\n	"],"docstring_tokens":["Force","contents","of","file","to","physical","storage"]}
{"code_tokens":["\n	public","int","write","(","final","File","file",")","throws","IOException\n	","{","\n		final","InputStream","in","=","new","BufferedInputStream","(","new","FileInputStream","(","file",")",")",";","\n		try\n		","{","\n			return","write","(","in",")",";","\n		","}","\n		finally\n		","{","\n			in",".","close","(",")",";","\n		","}","\n	"],"docstring_tokens":["Writes","the","given","file","to","this","one"]}
{"code_tokens":["\n	public","int","write","(","final","InputStream","input",")","throws","IOException\n	","{","\n		return","Files",".","writeTo","(","this,","input",")",";","\n	"],"docstring_tokens":["Writes","the","given","input","stream","to","this","file"]}
{"code_tokens":["\n	public","void","write","(","final","String","string",")","throws","IOException\n	","{","\n		final","FileWriter","out","=","new","FileWriter","(","this",")",";","\n		try\n		","{","\n			out",".","write","(","string",")",";","\n		","}","\n		finally\n		","{","\n			out",".","close","(",")",";","\n		","}","\n	"],"docstring_tokens":["Write","the","given","string","to","this","file"]}
{"code_tokens":["\n	private","boolean","checkHomePage","(","Url","url",")","\n	","{","\n		if","(","url",".","getSegments","(",")",".","isEmpty","(",")","&&","url",".","getQueryParameters","(",")",".","isEmpty","(",")",")","\n		","{","\n			//","this","is","home","page\n			if","(","getPageClass","(",")",".","equals","(","getContext","(",")",".","getHomePageClass","(",")",")",")","\n			","{","\n				return","true",";","\n			","}","\n		","}","\n		return","false",";","\n	"],"docstring_tokens":["Check","if","the","URL","is","for","home","page","and","the","home","page","class","match","mounted","class"]}
{"code_tokens":["\r\n	public","Object","get","(",")","\r\n	","{","\r\n		return","get","(","Time",".","now","(",")",")",";","\r\n	"],"docstring_tokens":["Retrieves","an","Object","for","the","current","Time","value"]}
{"code_tokens":["\r\n	public","Object","get","(","final","Time","time",")","\r\n	","{","\r\n		for","(","ITimeFrameSource","source",":","sources",".","keySet","(",")",")","\r\n		","{","\r\n			final","TimeFrame","current","=","source",".","getTimeFrame","(",")",";","\r\n			if","(","current",".","contains","(","time",")",")","\r\n			","{","\r\n				return","sources",".","get","(","current",")",";","\r\n			","}","\r\n		","}","\r\n\r\n		return","null",";","\r\n	"],"docstring_tokens":["Retrieves","an","Object","for","the","given","Time","value"]}
{"code_tokens":["\r\n	@Override\r\n	public","IResource","getResource","(",")","\r\n	","{","\r\n		return","resource",";","\r\n	"],"docstring_tokens":["Creates","a","new","resource","which","returns","the","interpolated","value","of","the","text","template"]}
{"code_tokens":["\r\n	public","static","StringList","repeat","(","final","int","count,","final","String","string",")","\r\n	","{","\r\n		final","StringList","list","=","new","StringList","(","count",")",";","\r\n\r\n		for","(","int","i","=","0",";","i","<","count",";","i++",")","\r\n		","{","\r\n			list",".","add","(","string",")",";","\r\n		","}","\r\n\r\n		return","list",";","\r\n	"],"docstring_tokens":["Returns","a","list","of","a","string","repeated","a","given","number","of","times"]}
{"code_tokens":["\r\n	public","static","StringList","tokenize","(","final","String","string",")","\r\n	","{","\r\n		return","tokenize","(","string,","\",","\"",")",";","\r\n	"],"docstring_tokens":["Extracts","tokens","from","a","comma","and","space","delimited","string"]}
{"code_tokens":["\r\n	public","static","StringList","tokenize","(","final","String","string,","final","String","delimiters",")","\r\n	","{","\r\n		final","StringTokenizer","tokenizer","=","new","StringTokenizer","(","string,","delimiters",")",";","\r\n		final","StringList","strings","=","new","StringList","(",")",";","\r\n\r\n		while","(","tokenizer",".","hasMoreTokens","(",")",")","\r\n		","{","\r\n			strings",".","add","(","tokenizer",".","nextToken","(",")",")",";","\r\n		","}","\r\n\r\n		return","strings",";","\r\n	"],"docstring_tokens":["Extracts","tokens","from","a","delimited","string"]}
{"code_tokens":["\r\n	public","static","StringList","valueOf","(","final","String","string",")","\r\n	","{","\r\n		final","StringList","strings","=","new","StringList","(",")",";","\r\n\r\n		if","(","string","!=","null",")","\r\n		","{","\r\n			strings",".","add","(","string",")",";","\r\n		","}","\r\n\r\n		return","strings",";","\r\n	"],"docstring_tokens":["Returns","a","string","list","with","just","one","string","in","it"]}
{"code_tokens":["\r\n	public","static","StringList","valueOf","(","final","String[]","array",")","\r\n	","{","\r\n		int","length","=","(","array","==","null",")","?","0",":","array",".","length",";","\r\n		final","StringList","strings","=","new","StringList","(","length",")",";","\r\n\r\n		for","(","int","i","=","0",";","i","<","length",";","i++",")","\r\n		","{","\r\n			strings",".","add","(","array[i]",")",";","\r\n		","}","\r\n\r\n		return","strings",";","\r\n	"],"docstring_tokens":["Converts","a","string","array","to","a","string","list"]}
{"code_tokens":["\r\n	public","void","add","(","final","String","string",")","\r\n	","{","\r\n		//","Add","to","list\r\n		add","(","size","(",")",",","string",")",";","\r\n	"],"docstring_tokens":["Adds","a","string","to","the","back","of","this","list"]}
{"code_tokens":["\r\n	public","void","add","(","final","int","pos,","final","String","string",")","\r\n	","{","\r\n		strings",".","add","(","pos,","string","==","null","?","\"\"",":","string",")",";","\r\n\r\n		//","Increase","total","length\r\n		totalLength","+=","string","==","null","?","0",":","string",".","length","(",")",";","\r\n	"],"docstring_tokens":["Adds","the","string","to","the","stringlist","at","position","pos"]}
{"code_tokens":["\r\n	public","void","add","(","final","StringValue","value",")","\r\n	","{","\r\n		add","(","value",".","toString","(",")",")",";","\r\n	"],"docstring_tokens":["Adds","a","string","value","to","this","list","as","a","string"]}
{"code_tokens":["\r\n	@Override\r\n	public","String","get","(","final","int","index",")","\r\n	","{","\r\n		return","strings",".","get","(","index",")",";","\r\n	"],"docstring_tokens":["Gets","the","string","at","the","given","index"]}
{"code_tokens":["\r\n	@Override\r\n	public","IStringIterator","iterator","(",")","\r\n	","{","\r\n		return","new","IStringIterator","(",")","\r\n		","{","\r\n			private","final","Iterator<String>","iterator","=","strings",".","iterator","(",")",";","\r\n\r\n			@Override\r\n			public","boolean","hasNext","(",")","\r\n			","{","\r\n				return","iterator",".","hasNext","(",")",";","\r\n			","}","\r\n\r\n			@Override\r\n			public","String","next","(",")","\r\n			","{","\r\n				return","iterator",".","next","(",")",";","\r\n			","}","\r\n		","}",";","\r\n	"],"docstring_tokens":["Returns","a","typesafe","iterator","over","this","collection","of","strings"]}
{"code_tokens":["\r\n	public","void","prepend","(","final","String","string",")","\r\n	","{","\r\n		add","(","0,","string",")",";","\r\n	"],"docstring_tokens":["Adds","the","given","string","to","the","front","of","the","list"]}
{"code_tokens":["\r\n	public","void","remove","(","final","int","index",")","\r\n	","{","\r\n		String","string","=","strings",".","remove","(","index",")",";","\r\n		totalLength","=","totalLength","-","string",".","length","(",")",";","\r\n	"],"docstring_tokens":["Removes","the","string","at","the","given","index"]}
{"code_tokens":["\r\n	public","void","removeLast","(",")","\r\n	","{","\r\n		remove","(","size","(",")","-","1",")",";","\r\n	"],"docstring_tokens":["Removes","the","last","string","in","this","list"]}
{"code_tokens":["\r\n	public","void","sort","(",")","\r\n	","{","\r\n		Collections",".","sort","(","strings",")",";","\r\n	"],"docstring_tokens":["Sorts","this","string","list","alphabetically"]}
{"code_tokens":["\r\n	@Override\r\n	public","String[]","toArray","(",")","\r\n	","{","\r\n		return","strings",".","toArray","(","new","String[0]",")",";","\r\n	"],"docstring_tokens":["Converts","this","string","list","to","a","string","array"]}
{"code_tokens":["\n	public","boolean","isEnabled","(",")","\n	","{","\n		return","enabled",";","\n	"],"docstring_tokens":["If","the","wicket","metrics","are","enabled"]}
{"code_tokens":["\n	public","Iterator<Contact>","iterator","(","long","first,","long","count",")","\n	","{","\n		return","getContactsDB","(",")",".","find","(","first,","count,","\"firstName\",","true",")",".","iterator","(",")",";","\n	"],"docstring_tokens":["retrieves","contacts","from","database","starting","with","index","first","and","ending","with	","first+count"]}
{"code_tokens":["\n	public","long","size","(",")","\n	","{","\n		return","getContactsDB","(",")",".","getCount","(",")",";","\n	"],"docstring_tokens":["returns","total","number","of","contacts","in","the","database"]}
{"code_tokens":["\n	public","IModel<Contact>","model","(","Contact","object",")","\n	","{","\n		return","new","DetachableContactModel","(","object",")",";","\n	"],"docstring_tokens":["wraps","retrieved","contact","pojo","with","a","wicket","model"]}
{"code_tokens":["\n	protected","String","getPageType","(","File","file",")","\n	","{","\n		String","pageType","=","null",";","\n		try\n		","{","\n			UserDefinedFileAttributeView","view","=","getAttributeView","(","file",")",";","\n			\n			ByteBuffer","buffer","=","ByteBuffer",".","allocate","(","view",".","size","(","ATTRIBUTE_PAGE_TYPE",")",")",";","\n			view",".","read","(","ATTRIBUTE_PAGE_TYPE,","buffer",")",";","\n			buffer",".","flip","(",")",";","\n			pageType","=","Charset",".","defaultCharset","(",")",".","decode","(","buffer",")",".","toString","(",")",";","\n		","}","\n		catch","(","Exception","ex",")","\n		","{","\n			log",".","debug","(","\"cannot","get","pageType","for","{","}","\",","file",")",";","\n		","}","\n\n		return","pageType",";","\n	"],"docstring_tokens":["Get","the","type","of","page","from","the","given","file.	","	","This","is","an","optional","operation","that","returns","null","in","case","of","any","error"]}
{"code_tokens":["\n	protected","void","setPageType","(","File","file,","String","pageType",")","\n	","{","\n		try\n		","{","\n			UserDefinedFileAttributeView","view","=","getAttributeView","(","file",")",";","\n\n			view",".","write","(","ATTRIBUTE_PAGE_TYPE,","Charset",".","defaultCharset","(",")",".","encode","(","pageType",")",")",";","\n		","}","\n		catch","(","Exception","ex",")","\n		","{","\n			log",".","debug","(","\"cannot","set","pageType","for","{","}","\",","file,","ex",")",";","\n		","}","\n	"],"docstring_tokens":["Set","the","type","of","page","on","the","given","file.	","	","This","is","an","optional","operation","that","silently","fails","in","case","of","an","error"]}
{"code_tokens":["\n	public","final","void","bind","(",")","\n	","{","\n		//","If","we","have","a","resource","reference\n		if","(","resourceReference","!=","null","&&","resourceReference",".","canBeRegistered","(",")","&&\n			Application",".","exists","(",")",")","\n		","{","\n			//","Bind","the","reference","to","the","application\n			Application",".","get","(",")","\n				",".","getResourceReferenceRegistry","(",")","\n				",".","registerResourceReference","(","resourceReference",")",";","\n		","}","\n	"],"docstring_tokens":["Binds","this","resource","if","it","is","shared"]}
{"code_tokens":["\n	private","void","newImage","(","final","CharSequence","value",")","\n	","{","\n		//","Parse","value\n		final","ImageValueParser","valueParser","=","new","ImageValueParser","(","value",")",";","\n\n		//","Does","value","match","parser?\n		if","(","valueParser",".","matches","(",")",")","\n		","{","\n			final","String","imageReferenceName","=","valueParser",".","getImageReferenceName","(",")",";","\n			final","String","specification","=","Strings",".","replaceHtmlEscapeNumber","(","valueParser",".","getSpecification","(",")",")",";","\n			final","String","factoryName","=","valueParser",".","getFactoryName","(",")",";","\n			final","Application","application","=","component",".","getApplication","(",")",";","\n\n			//","Do","we","have","a","reference?\n			if","(","!Strings",".","isEmpty","(","imageReferenceName",")",")","\n			","{","\n				//","Is","resource","already","available","via","the","application?\n				if","(","application",".","getResourceReferenceRegistry","(",")",".","getResourceReference","(","\n					Application",".","class,","imageReferenceName,","locale,","style,","variation,","true,","false",")","==","null",")","\n				","{","\n					//","Resource","not","available","yet,","so","create","it","with","factory","and\n					//","share","via","Application\n					final","IResource","imageResource","=","getResourceFactory","(","application,","factoryName",")",".","newResource","(","\n						specification,","locale,","style,","variation",")",";","\n\n					ResourceReference","ref","=","new","SimpleStaticResourceReference","(","Application",".","class,\n						imageReferenceName,","locale,","style,","variation,","imageResource",")",";","\n\n					application",".","getResourceReferenceRegistry","(",")",".","registerResourceReference","(","ref",")",";","\n				","}","\n\n				//","Create","resource","reference\n				resourceReference","=","new","PackageResourceReference","(","Application",".","class,\n					imageReferenceName,","locale,","style,","variation",")",";","\n			","}","\n			else\n			","{","\n				resource","=","getResourceFactory","(","application,","factoryName",")",".","newResource","(","specification,\n					locale,","style,","variation",")",";","\n			","}","\n		","}","\n		else\n		","{","\n			throw","new","WicketRuntimeException","(","\n				\"Could","not","generate","image","for","value","attribute","'\"","+\n					value","+\n					\"'",".","Was","expecting","a","value","attribute","of","the","form","\\\"[resourceFactoryName]:[resourceReferenceName]?:[factorySpecification]\\\"",".","\"",")",";","\n		","}","\n	"],"docstring_tokens":["Generates","an","image","resource","based","on","the","attribute","values","on","tag"]}
{"code_tokens":["\n	public","final","Link<Void>","removeLink","(","final","String","id,","final","ListItem<T>","item",")","\n	","{","\n		return","new","Link<Void>","(","id",")","\n		","{","\n			private","static","final","long","serialVersionUID","=","1L",";","\n\n			/**\n			","*","@see","org",".","apache",".","wicket",".","markup",".","html",".","link",".","Link#onClick","(",")","\n			","*/\n			@Override\n			public","void","onClick","(",")","\n			","{","\n				addStateChange","(",")",";","\n\n				item",".","modelChanging","(",")",";","\n\n				//","Remove","item","and","invalidate","listView\n				getList","(",")",".","remove","(","item",".","getIndex","(",")",")",";","\n\n				ListView",".","this",".","modelChanged","(",")",";","\n				ListView",".","this",".","removeAll","(",")",";","\n			","}","\n		","}",";","\n	"],"docstring_tokens":["Returns","a","link","that","will","remove","this","ListItem","from","the","ListView","that","holds","it"]}
{"code_tokens":["\n	public","ListView<T>","setList","(","List<T>","list",")","\n	","{","\n		setDefaultModel","(","Model",".","ofList","(","list",")",")",";","\n		return","this",";","\n	"],"docstring_tokens":["Sets","the","model","as","the","provided","list","and","removes","all","children,","so","that","the","next","render","will","be	","using","the","contents","of","the","model"]}
{"code_tokens":["\n	protected","ListItem<T>","newItem","(","final","int","index,","IModel<T>","itemModel",")","\n	","{","\n		return","new","ListItem<>","(","index,","itemModel",")",";","\n	"],"docstring_tokens":["Create","a","new","ListItem","for","list","item","at","index"]}
{"code_tokens":["\n	public","void","addBottomToolbar","(","final","AbstractToolbar","toolbar",")","\n	","{","\n		addToolbar","(","toolbar,","bottomToolbars",")",";","\n	"],"docstring_tokens":["Adds","a","toolbar","to","the","datatable","that","will","be","displayed","after","the","data"]}
{"code_tokens":["\n	public","void","addTopToolbar","(","final","AbstractToolbar","toolbar",")","\n	","{","\n		addToolbar","(","toolbar,","topToolbars",")",";","\n	"],"docstring_tokens":["Adds","a","toolbar","to","the","datatable","that","will","be","displayed","before","the","data"]}
{"code_tokens":["\n	private","Component","getChildComponent","(","final","MarkupStream","markupStream,\n		MarkupContainer","enclosureParent",")","\n	","{","\n		String","fullChildId","=","getChildId","(",")",";","\n\n		Component","controller","=","enclosureParent",".","get","(","fullChildId",")",";","\n		if","(","controller","==","null",")","\n		","{","\n			int","orgIndex","=","markupStream",".","getCurrentIndex","(",")",";","\n			try\n			","{","\n				while","(","markupStream",".","isCurrentIndexInsideTheStream","(",")",")","\n				","{","\n					markupStream",".","next","(",")",";","\n					if","(","markupStream",".","skipUntil","(","ComponentTag",".","class",")",")","\n					","{","\n						ComponentTag","tag","=","markupStream",".","getTag","(",")",";","\n						if","(","(","tag","!=","null",")","&&","(","tag",".","isOpen","(",")","||","tag",".","isOpenClose","(",")",")",")","\n						","{","\n							String","tagId","=","tag",".","getId","(",")",";","\n\n							if","(","fullChildId",".","equals","(","tagId",")",")","\n							","{","\n								ComponentTag","fullComponentTag","=","new","ComponentTag","(","tag",")",";","\n								fullComponentTag",".","setId","(","childId",".","toString","(",")",")",";","\n\n								controller","=","ComponentResolvers",".","resolve","(","enclosureParent,\n									markupStream,","fullComponentTag,","new","ResolverFilter","(",")","\n									","{","\n										@Override\n										public","boolean","ignoreResolver","(","\n											final","IComponentResolver","resolver",")","\n										","{","\n											return","resolver","instanceof","EnclosureHandler",";","\n										","}","\n									","}",")",";","\n								break",";","\n							","}","\n							else","if","(","fullChildId",".","startsWith","(","tagId","+","PATH_SEPARATOR",")",")","\n							","{","\n								fullChildId","=","Strings",".","afterFirst","(","fullChildId,","PATH_SEPARATOR",")",";","\n							","}","\n						","}","\n					","}","\n				","}","\n			","}","\n			finally\n			","{","\n				markupStream",".","setCurrentIndex","(","orgIndex",")",";","\n			","}","\n		","}","\n\n		checkChildComponent","(","controller",")",";","\n		return","controller",";","\n	"],"docstring_tokens":["Resolves","the","child","component","which","is","the","controller","of","this","Enclosure"]}
{"code_tokens":["\n	protected","CharSequence","getSmartLink","(","final","CharSequence","text",")","\n	","{","\n		return","getLinkParser","(",")",".","parse","(","text",".","toString","(",")",")",";","\n	"],"docstring_tokens":["Get","the","text","after","parsing","by","the","link","parser"]}
{"code_tokens":["\n	public","void","initiate","(","IPartialPageRequestHandler","handler",")","\n	","{","\n		if","(","getComponent","(",")","==","null",")","\n		","{","\n			throw","new","WicketRuntimeException","(","\"not","bound","to","a","component\"",")",";","\n		","}","\n\n		CharSequence","url",";","\n		if","(","resourceBehavior","==","null",")","\n		","{","\n			if","(","resourceReference",".","canBeRegistered","(",")",")","\n			","{","\n				getComponent","(",")",".","getApplication","(",")",".","getResourceReferenceRegistry","(",")","\n					",".","registerResourceReference","(","resourceReference",")",";","\n			","}","\n\n			PageParameters","parameters","=","new","PageParameters","(",")",";","\n			if","(","resourceParameters","!=","null",")","\n			","{","\n				parameters",".","mergeWith","(","resourceParameters",")",";","\n			","}","\n			parameters",".","set","(","RESOURCE_PARAMETER_NAME,","getName","(",")",")",";","\n\n			url","=","getComponent","(",")",".","getRequestCycle","(",")","\n				",".","urlFor","(","new","ResourceReferenceRequestHandler","(","resourceReference,","parameters",")",")",";","\n		","}","\n		else\n		","{","\n			url","=","resourceBehavior",".","getUrl","(",")",";","\n		","}","\n\n		JSONObject","settings","=","new","JSONObject","(",")",";","\n		settings",".","put","(","\"attributes\",","new","JSONFunction","(","renderAjaxAttributes","(","getComponent","(",")",")",")",")",";","\n		settings",".","put","(","\"name\",","getName","(",")",")",";","\n		settings",".","put","(","\"downloadUrl\",","url",")",";","\n		settings",".","put","(","\"method\",","getLocation","(",")",".","name","(",")",".","toLowerCase","(","Locale",".","ROOT",")",")",";","\n\n		handler",".","appendJavaScript","(","String",".","format","(","\"Wicket",".","AjaxDownload",".","initiate","(","%s",")",";","\",","settings",")",")",";","\n\n		onBeforeDownload","(","handler",")",";","\n	"],"docstring_tokens":["Call","this","method","to","initiate","the","download"]}
{"code_tokens":["\n	private","String","getName","(",")","\n	","{","\n		return","String",".","format","(","\"wicket-ajaxdownload-%s-%s\",","getComponent","(",")",".","getMarkupId","(",")",",\n			getComponent","(",")",".","getBehaviorId","(","this",")",")",";","\n	"],"docstring_tokens":["Identifying","name","of","this","behavior"]}
{"code_tokens":["\n	public","PopupSettings","setHeight","(","int","popupHeight",")","\n	","{","\n		height","=","popupHeight",";","\n		return","this",";","\n	"],"docstring_tokens":["Sets","the","popup","window","height"]}
{"code_tokens":["\n	public","PopupSettings","setLeft","(","int","popupPositionLeft",")","\n	","{","\n		left","=","popupPositionLeft",";","\n		return","this",";","\n	"],"docstring_tokens":["Sets","the","left","position","of","the","popup","window"]}
{"code_tokens":["\n	public","PopupSettings","setTop","(","int","popupPositionTop",")","\n	","{","\n		top","=","popupPositionTop",";","\n		return","this",";","\n	"],"docstring_tokens":["Sets","the","top","position","of","the","popup","window"]}
{"code_tokens":["\n	public","PopupSettings","setWidth","(","int","popupWidth",")","\n	","{","\n		width","=","popupWidth",";","\n		return","this",";","\n	"],"docstring_tokens":["Sets","the","popup","window","width"]}
{"code_tokens":["\r\n	@Override\r\n	public","void","onBeforeRespond","(","final","Map<String,","Component>","map,","final","AjaxRequestTarget","target",")","\r\n	","{","\r\n		final","List<String>","keysToRemove","=","new","ArrayList<>","(",")",";","\r\n\r\n		target",".","getPage","(",")",".","visitChildren","(","InlineEnclosure",".","class,","new","IVisitor<InlineEnclosure,","Void>","(",")","\r\n		","{","\r\n			@Override\r\n			public","void","component","(","final","InlineEnclosure","enclosure,","final","IVisit<Void>","visit",")","\r\n			","{","\r\n				Iterator<Map",".","Entry<String,","Component>>","entriesItor","=","map",".","entrySet","(",")",".","iterator","(",")",";","\r\n				while","(","entriesItor",".","hasNext","(",")",")","\r\n				","{","\r\n					Map",".","Entry<String,","Component>","entry","=","entriesItor",".","next","(",")",";","\r\n					Component","component","=","entry",".","getValue","(",")",";","\r\n					if","(","isControllerOfEnclosure","(","component,","enclosure",")",")","\r\n					","{","\r\n						final","Component","controller","=","component",";","\r\n						target",".","add","(","enclosure",")",";","\r\n						visit",".","dontGoDeeper","(",")",";","\r\n						enclosure",".","visitChildren","(","new","IVisitor<Component,","Void>","(",")","{","\r\n							@Override\r\n							public","void","component","(","Component","descendant,","IVisit<Void>","visit",")","{","\r\n								if","(","descendant","==","controller",")","{","\r\n									//","if","the","controlling","component","is","in","the","enclosure","we","do","not","need","to","repaint","it\r\n									//","individually,","it","will","be","repainted","as","part","of","the","enclosure","repaint\r\n									keysToRemove",".","add","(","controller",".","getId","(",")",")",";","\r\n								","}","\r\n							","}","\r\n						","}",")",";","\r\n						break",";","\r\n					","}","\r\n				","}","\r\n			","}","\r\n		","}",")",";","\r\n\r\n		for","(","String","key",":","keysToRemove",")","\r\n		","{","\r\n			map",".","remove","(","key",")",";","\r\n		","}","\r\n	"],"docstring_tokens":["Try","to","find","Enclosures","that","have","their","controllers","added","already,","and","add","them","to","the","target"]}
{"code_tokens":["\r\n	public","static","boolean","isControllerOfEnclosure","(","final","Component","component,\r\n		final","Enclosure","enclosure",")","\r\n	","{","\r\n		return","(","enclosure",".","get","(","enclosure",".","getChildId","(",")",")","==","component","||","//","#queue","(",")","\r\n				enclosure",".","getParent","(",")",".","get","(","enclosure",".","getChildId","(",")",")","==","component",")",";","//","#add","(",")","\r\n	"],"docstring_tokens":["Check","if","a","given","component","is","the","controlling","child","of","a","given","enclosure"]}
{"code_tokens":["\n	@Override\n	public","Iterable<?>","getRenderTokens","(",")","\n	","{","\n		Set<String>","tokens","=","new","TreeSet<String>","(",")",";","\n		for","(","PushItem","pushItem",":","pushItems",")","\n		","{","\n			tokens",".","add","(","pushItem",".","getUrl","(",")","+","TOKEN_SUFFIX",")",";","\n		","}","\n		return","tokens",";","\n	"],"docstring_tokens":["Uses","the","URLs","that","has","already","been","pushed","to","the","client","to","ensure","not","to","push","them","again"]}
{"code_tokens":["\n	protected","void","applyPageCacheHeader","(",")","\n	","{","\n		//","check","modification","of","page","html\n		Instant","pageModificationTime","=","getPageModificationTime","(",")",";","\n		//","The","date","of","the","page","is","now\n		pageWebResponse",".","setDateHeader","(","\"Date\",","Instant",".","now","(",")",")",";","\n		//","Set","the","modification","time","so","that","the","browser","sends","a","\"If-Modified-Since\"","header","which\n		//","can","be","compared\n		pageWebResponse",".","setLastModifiedTime","(","pageModificationTime",")",";","\n		//","Make","the","resource","stale","so","that","it","gets","revalidated","even","if","a","cache","entry","is","set\n		//","(","see","http://stackoverflow",".","com/questions/11357430/http-expires-header-values-0-and-1",")","\n		pageWebResponse",".","setHeader","(","\"Expires\",","\"-1\"",")",";","\n		//","Set","a","cache","but","set","it","to","max-age=0","/","must-revalidate","so","that","the","request","to","the","page","is\n		//","done\n		pageWebResponse",".","setHeader","(","\"Cache-Control\",\n			\"max-age=0,","public,","must-revalidate,","proxy-revalidate\"",")",";","\n	"],"docstring_tokens":["Applies","the","cache","header","item","to","the","response"]}
{"code_tokens":["\n	@Override\n	public","void","render","(","Response","response",")","\n	","{","\n		//","applies","the","caching","header","to","the","actual","page","request\n		applyPageCacheHeader","(",")",";","\n\n		HttpServletRequest","request","=","getContainerRequest","(","RequestCycle",".","get","(",")",".","getRequest","(",")",")",";","\n		//","Check","if","the","protocol","is","http/2","or","http/2",".","0","to","only","push","the","resources","in","this","case\n		if","(","isHttp2","(","request",")",")","\n		","{","\n\n			Instant","pageModificationTime","=","getPageModificationTime","(",")",";","\n			String","ifModifiedSinceHeader","=","pageWebRequest",".","getHeader","(","\"If-Modified-Since\"",")",";","\n\n			//","Check","if","the","if-modified-since","header","is","set","-","if","not","push","all","resources\n			if","(","ifModifiedSinceHeader","!=","null",")","\n			","{","\n\n				//","Try","to","parse","RFC1123\n				Instant","ifModifiedSinceFromRequestTime","=","parseIfModifiedSinceHeader","(","\n					ifModifiedSinceHeader,","headerDateFormat_RFC1123",")",";","\n\n				//","Try","to","parse","ASCTIME\n				if","(","ifModifiedSinceFromRequestTime","==","null",")","\n				","{","\n					ifModifiedSinceFromRequestTime","=","parseIfModifiedSinceHeader","(","\n						ifModifiedSinceHeader,","headerDateFormat_ASCTIME",")",";","\n				","}","\n\n				//","Try","to","parse","RFC1036","-","because","it","is","obsolete","due","to","RFC","1036","check","this","last",".","\n				if","(","ifModifiedSinceFromRequestTime","==","null",")","\n				","{","\n					ifModifiedSinceFromRequestTime","=","parseIfModifiedSinceHeader","(","\n						ifModifiedSinceHeader,","headerDateFormat_RFC1036",")",";","\n				","}","\n\n				//","if","the","modified","since","header","is","before","the","page","modification","time","or","if","it","can't\n				//","be","parsed","push","it",".","\n				if","(","ifModifiedSinceFromRequestTime","==","null","||\n					ifModifiedSinceFromRequestTime",".","isBefore","(","pageModificationTime",")",")","\n				","{","\n					//","Some","browsers","like","IE","9-11","or","Chrome","39","that","does","not","send","right","headers\n					//","receive","the","resource","via","push","all","the","time\n					push","(","request",")",";","\n				","}","\n			","}","\n			else\n			","{","\n				//","Push","the","resources","if","the","\"if-modified-since\"","is","not","available\n				push","(","request",")",";","\n			","}","\n		","}","\n	"],"docstring_tokens":["Pushes","the","previously","created","URLs","to","the","client"]}
{"code_tokens":["\n	protected","void","push","(","HttpServletRequest","request",")","\n	","{","\n		//","Receives","the","vendor","specific","push","builder\n		Http2Settings","http2Settings","=","Http2Settings",".","Holder",".","get","(","Application",".","get","(",")",")",";","\n		PushBuilder","pushBuilder","=","http2Settings",".","getPushBuilder","(",")",";","\n		pushBuilder",".","push","(","request,","pushItems",".","toArray","(","new","PushItem[pushItems",".","size","(",")","]",")",")",";","\n	"],"docstring_tokens":["Pushed","all","URLs","of","this","header","item","to","the","client"]}
{"code_tokens":["\n	@SuppressWarnings","(","\"unchecked\"",")","\n	public","PushHeaderItem","push","(","List<PushItem>","pushItems",")","\n	","{","\n		RequestCycle","requestCycle","=","RequestCycle",".","get","(",")",";","\n		if","(","isHttp2","(","getContainerRequest","(","requestCycle",".","getRequest","(",")",")",")",")","\n			for","(","PushItem","pushItem",":","pushItems",")","\n			","{","\n				Object","object","=","pushItem",".","getObject","(",")",";","\n				PageParameters","parameters","=","pushItem",".","getPageParameters","(",")",";","\n\n				if","(","object","==","null",")","\n				","{","\n					throw","new","WicketRuntimeException","(","\n						\"Please","provide","an","object","to","the","items","to","be","pushed,","so","that","the","url","can","be","created","for","the","given","resource",".","\"",")",";","\n				","}","\n\n				CharSequence","url","=","null",";","\n				if","(","object","instanceof","ResourceReference",")","\n				","{","\n					url","=","requestCycle",".","urlFor","(","(","ResourceReference",")","object,","parameters",")",";","\n				","}","\n				else","if","(","Page",".","class",".","isAssignableFrom","(","object",".","getClass","(",")",")",")","\n				","{","\n					url","=","requestCycle",".","urlFor","(","(","Class<?","extends","Page>",")","object,","parameters",")",";","\n				","}","\n				else","if","(","object","instanceof","IRequestHandler",")","\n				","{","\n					url","=","requestCycle",".","urlFor","(","(","IRequestHandler",")","object",")",";","\n				","}","\n				else","if","(","pushItem",".","getUrl","(",")","!=","null",")","\n				","{","\n					url","=","pushItem",".","getUrl","(",")",";","\n				","}","\n				else\n				","{","\n					Url","encoded","=","new","PageParametersEncoder","(",")",".","encodePageParameters","(","parameters",")",";","\n					String","queryString","=","encoded",".","getQueryString","(",")",";","\n					url","=","object",".","toString","(",")","+","(","queryString","!=","null","?","\"?\"","+","queryString",":","\"\"",")",";","\n				","}","\n\n				if","(","url",".","toString","(",")",".","equals","(","\"",".","\"",")",")","\n				","{","\n					url","=","\"/\"",";","\n				","}","\n				else","if","(","url",".","toString","(",")",".","startsWith","(","\"",".","\"",")",")","\n				","{","\n					url","=","url",".","toString","(",")",".","substring","(","1",")",";","\n				","}","\n\n				//","The","context","path","and","the","filter","have","to","be","applied","to","the","URL,","because","otherwise\n				//","the","resource","is","not","pushed","correctly\n				StringBuilder","partialUrl","=","new","StringBuilder","(",")",";","\n				String","contextPath","=","WebApplication",".","get","(",")",".","getServletContext","(",")",".","getContextPath","(",")",";","\n				partialUrl",".","append","(","contextPath",")",";","\n				if","(","!\"/\"",".","equals","(","contextPath",")",")","\n				","{","\n					partialUrl",".","append","(","'/'",")",";","\n				","}","\n				String","filterPath","=","WebApplication",".","get","(",")",".","getWicketFilter","(",")",".","getFilterPath","(",")",";","\n				if","(","\"/\"",".","equals","(","filterPath",")",")","\n				","{","\n					filterPath","=","\"\"",";","\n				","}","\n				else","if","(","filterPath",".","endsWith","(","\"/\"",")",")","\n				","{","\n					filterPath","=","filterPath",".","substring","(","0,","filterPath",".","length","(",")","-","1",")",";","\n				","}","\n				partialUrl",".","append","(","filterPath",")",";","\n				partialUrl",".","append","(","url",".","toString","(",")",")",";","\n\n				//","Set","the","url","the","resource","is","going","to","be","pushed","with\n				pushItem",".","setUrl","(","partialUrl",".","toString","(",")",")",";","\n\n				//","Apply","the","push","item","to","be","used","during","the","push","process\n				this",".","pushItems",".","add","(","pushItem",")",";","\n			","}","\n		return","this",";","\n	"],"docstring_tokens":["Creates","a","URL","and","pushes","the","resource","to","the","client","-","this","is","only","supported","if","http2","is	","enabled"]}
{"code_tokens":["\n	public","static","void","authorize","(","final","Component","component,","final","Action","action,\n		final","String","roles",")","\n	","{","\n		ActionPermissions","permissions","=","component",".","getMetaData","(","ACTION_PERMISSIONS",")",";","\n		if","(","permissions","==","null",")","\n		","{","\n			permissions","=","new","ActionPermissions","(",")",";","\n			component",".","setMetaData","(","ACTION_PERMISSIONS,","permissions",")",";","\n		","}","\n		permissions",".","authorize","(","action,","new","Roles","(","roles",")",")",";","\n	"],"docstring_tokens":["Authorizes","the","given","role","to","perform","the","given","action","on","the","given","component"]}
{"code_tokens":["\n	public","static","<T","extends","Component>","void","authorizeAll","(","final","Class<T>","componentClass",")","\n	","{","\n		Application","application","=","Application",".","get","(",")",";","\n		InstantiationPermissions","authorizedRoles","=","application",".","getMetaData","(","INSTANTIATION_PERMISSIONS",")",";","\n		if","(","authorizedRoles","!=","null",")","\n		","{","\n			authorizedRoles",".","authorizeAll","(","componentClass",")",";","\n		","}","\n	"],"docstring_tokens":["Grants","permission","to","all","roles","to","create","instances","of","the","given","component","class"]}
{"code_tokens":["\n	public","static","void","authorizeAll","(","Component","component,","final","Action","action",")","\n	","{","\n		ActionPermissions","permissions","=","component",".","getMetaData","(","ACTION_PERMISSIONS",")",";","\n		if","(","permissions","!=","null",")","\n		","{","\n			permissions",".","authorizeAll","(","action",")",";","\n		","}","\n	"],"docstring_tokens":["Grants","permission","to","all","roles","to","perform","the","given","action","on","the","given","component"]}
{"code_tokens":["\n	@Override\n	public","boolean","isActionAuthorized","(","final","Component","component,","final","Action","action",")","\n	","{","\n		if","(","component","==","null",")","\n		","{","\n			throw","new","IllegalArgumentException","(","\"argument","component","has","to","be","not","null\"",")",";","\n		","}","\n		if","(","action","==","null",")","\n		","{","\n			throw","new","IllegalArgumentException","(","\"argument","action","has","to","be","not","null\"",")",";","\n		","}","\n\n		final","Roles","roles","=","rolesAuthorizedToPerformAction","(","component,","action",")",";","\n		if","(","roles","!=","null",")","\n		","{","\n			return","hasAny","(","roles",")",";","\n		","}","\n		return","true",";","\n	"],"docstring_tokens":["Uses","component","level","meta","data","to","match","roles","for","component","action","execution"]}
{"code_tokens":["\n	@Override\n	public","<T","extends","IRequestableComponent>","boolean","isInstantiationAuthorized","(","\n		final","Class<T>","componentClass",")","\n	","{","\n		if","(","componentClass","==","null",")","\n		","{","\n			throw","new","IllegalArgumentException","(","\"argument","componentClass","cannot","be","null\"",")",";","\n		","}","\n\n		//","as","long","as","the","interface","does","not","use","generics,","we","should","check","this\n		if","(","!Component",".","class",".","isAssignableFrom","(","componentClass",")",")","\n		","{","\n			throw","new","IllegalArgumentException","(","\"argument","componentClass","must","be","of","type","\"","+\n				Component",".","class",".","getName","(",")",")",";","\n		","}","\n\n		final","Roles","roles","=","rolesAuthorizedToInstantiate","(","componentClass",")",";","\n		if","(","roles","!=","null",")","\n		","{","\n			return","hasAny","(","roles",")",";","\n		","}","\n		return","true",";","\n	"],"docstring_tokens":["Uses","application","level","meta","data","to","match","roles","for","component","instantiation"]}
{"code_tokens":["\n	private","static","<T","extends","IRequestableComponent>","Roles","rolesAuthorizedToInstantiate","(","\n		final","Class<T>","componentClass",")","\n	","{","\n		final","InstantiationPermissions","permissions","=","Application",".","get","(",")",".","getMetaData","(","\n			INSTANTIATION_PERMISSIONS",")",";","\n		if","(","permissions","!=","null",")","\n		","{","\n			return","permissions",".","authorizedRoles","(","componentClass",")",";","\n		","}","\n		return","null",";","\n	"],"docstring_tokens":["Gets","the","roles","for","creation","of","the","given","component","class,","or","null","if","none","were","registered"]}
{"code_tokens":["\n	public","String","getSeparator","(",")","\n	","{","\n		return","separator",";","\n	"],"docstring_tokens":["Gets","the","separator","used","by","attribute","appenders","and","prependers"]}
{"code_tokens":["\n	public","AttributeAppender","setSeparator","(","String","separator",")","\n	","{","\n		this",".","separator","=","separator",";","\n		return","this",";","\n	"],"docstring_tokens":["Sets","the","separator","used","by","attribute","appenders","and","prependers"]}
{"code_tokens":["\n	@Override\n	public","Result","check","(","Object","object",")","\n	","{","\n		Result","result","=","Result",".","SUCCESS",";","\n		if","(","!","(","object","instanceof","Serializable",")","&&","(","!Proxy",".","isProxyClass","(","object",".","getClass","(",")",")",")",")","\n		","{","\n			result","=","new","Result","(","Result",".","Status",".","FAILURE,","\"The","object","type","is","not","Serializable!\",","cause",")",";","\n		","}","\n\n		return","result",";","\n	"],"docstring_tokens":["Makes","the","check","for","all","objects"]}
{"code_tokens":["\n	protected","IRequestHandler","processBookmarkable","(","Class<?","extends","IRequestablePage>","pageClass,\n		PageParameters","pageParameters",")","\n	","{","\n		PageProvider","provider","=","new","PageProvider","(","pageClass,","pageParameters",")",";","\n		provider",".","setPageSource","(","getContext","(",")",")",";","\n		return","new","RenderPageRequestHandler","(","provider",")",";","\n	"],"docstring_tokens":["Creates","a","IRequestHandler","that","processes","a","bookmarkable","request"]}
{"code_tokens":["\n	protected","String","getNullKeyDisplayValue","(",")","\n	","{","\n		String","option","=","getLocalizer","(",")",".","getStringIgnoreSettings","(","getNullKey","(",")",",","this,","null,","null",")",";","\n\n		if","(","Strings",".","isEmpty","(","option",")",")","\n		","{","\n			option","=","getLocalizer","(",")",".","getString","(","\"null\",","this,","CHOOSE_ONE",")",";","\n		","}","\n		return","option",";","\n	"],"docstring_tokens":["Returns","the","display","value","if","null","is","not","valid","but","is","selected"]}
{"code_tokens":["\n	public","Request","cloneWithUrl","(","final","Url","url",")","\n	","{","\n		return","new","Request","(",")","\n		","{","\n			@Override\n			public","Url","getUrl","(",")","\n			","{","\n				return","url",";","\n			","}","\n\n			@Override\n			public","Url","getOriginalUrl","(",")","\n			","{","\n				return","Request",".","this",".","getOriginalUrl","(",")",";","\n			","}","\n\n			@Override\n			public","Locale","getLocale","(",")","\n			","{","\n				return","Request",".","this",".","getLocale","(",")",";","\n			","}","\n\n			@Override\n			public","IRequestParameters","getPostParameters","(",")","\n			","{","\n				return","Request",".","this",".","getPostParameters","(",")",";","\n			","}","\n\n			@Override\n			public","Charset","getCharset","(",")","\n			","{","\n				return","Request",".","this",".","getCharset","(",")",";","\n			","}","\n\n			@Override\n			public","Url","getClientUrl","(",")","\n			","{","\n				return","Request",".","this",".","getClientUrl","(",")",";","\n			","}","\n\n			@Override\n			public","Object","getContainerRequest","(",")","\n			","{","\n				return","Request",".","this",".","getContainerRequest","(",")",";","\n			","}","\n		","}",";","\n	"],"docstring_tokens":["Returns","request","with","specified","URL","and","same","POST","parameters","as","this","request"]}
{"code_tokens":["\n	public","static","AttributeModifier","replace","(","String","attributeName,","IModel<?>","value",")","\n	","{","\n		Args",".","notEmpty","(","attributeName,","\"attributeName\"",")",";","\n\n		return","new","AttributeModifier","(","attributeName,","value",")",";","\n	"],"docstring_tokens":["Creates","a","attribute","modifier","that","replaces","the","current","value","with","the","given","value"]}
{"code_tokens":["\n	public","static","AttributeModifier","remove","(","String","attributeName",")","\n	","{","\n		Args",".","notEmpty","(","attributeName,","\"attributeName\"",")",";","\n\n		return","replace","(","attributeName,","Model",".","of","(","VALUELESS_ATTRIBUTE_REMOVE",")",")",";","\n	"],"docstring_tokens":["Creates","a","attribute","modifier","that","removes","an","attribute","with","the","specified","name"]}
{"code_tokens":["\n	public","synchronized","void","invalidate","(",")","\n	","{","\n		imageData","=","null",";","\n	"],"docstring_tokens":["Causes","the","image","to","be","redrawn","the","next","time","its","requested"]}
{"code_tokens":["\n	public","Throwable","getThrowable","(",")","\n	","{","\n		return","throwable",";","\n	"],"docstring_tokens":["Get","access","to","the","exception"]}
{"code_tokens":["\n	public","static","OnLoadHeaderItem","forScript","(","CharSequence","javaScript",")","\n	","{","\n		return","new","OnLoadHeaderItem","(","javaScript",")",";","\n	"],"docstring_tokens":["Creates","a","OnLoadHeaderItem","for","the","script"]}
{"code_tokens":["\n	public","void","setMaxAge","(","int","maxAge",")","\n	","{","\n		this",".","maxAge","=","maxAge",";","\n	"],"docstring_tokens":["Sets","the","maximum","age","of","the","cookie","in","seconds"]}
{"code_tokens":["\n	public","String","getComment","(",")","\n	","{","\n		return","comment",";","\n	"],"docstring_tokens":["Gets","the","cookie","comment"]}
{"code_tokens":["\n	public","void","setComment","(","String","comment",")","\n	","{","\n		this",".","comment","=","comment",";","\n	"],"docstring_tokens":["Sets","the","cookie","comment"]}
{"code_tokens":["\n	public","String","getDomain","(",")","\n	","{","\n		return","domain",";","\n	"],"docstring_tokens":["Gets","the","cookie","domain","name"]}
{"code_tokens":["\n	public","void","setDomain","(","String","domain",")","\n	","{","\n		this",".","domain","=","domain",";","\n	"],"docstring_tokens":["Sets","the","cookie","domain","name"]}
{"code_tokens":["\n	public","void","setSecure","(","boolean","secure",")","\n	","{","\n		this",".","secure","=","secure",";","\n	"],"docstring_tokens":["Indicates","to","the","browser","whether","the","cookie","should","only","be","sent","using","a","secure","protocol,","such	","as","HTTPS","or","SSL"]}
{"code_tokens":["\n	public","boolean","isHttpOnly","(",")","\n	","{","\n		return","httpOnly",";","\n	"],"docstring_tokens":["Checks","whether","this","Cookie","has","been","marked","as","HttpOnly"]}
{"code_tokens":["\n	public","static","OnEventHeaderItem","forScript","(","String","literalTarget,","String","event,\n			CharSequence","javaScript",")","\n	","{","\n		return","new","OnEventHeaderItem","(","literalTarget,","event,","javaScript",")",";","\n	"],"docstring_tokens":["Creates","a","OnEventHeaderItem","for","the","given","parameters"]}
{"code_tokens":["\n	public","static","boolean","exists","(",")","\n	","{","\n		Session","session","=","ThreadContext",".","getSession","(",")",";","\n\n		if","(","session","==","null",")","\n		","{","\n			//","no","session","is","available","via","ThreadContext,","so","lookup","in","session","store\n			RequestCycle","requestCycle","=","RequestCycle",".","get","(",")",";","\n			if","(","requestCycle","!=","null",")","\n			","{","\n				session","=","Application",".","get","(",")",".","getSessionStore","(",")",".","lookup","(","requestCycle",".","getRequest","(",")",")",";","\n				if","(","session","!=","null",")","\n				","{","\n					ThreadContext",".","setSession","(","session",")",";","\n				","}","\n			","}","\n		","}","\n		return","session","!=","null",";","\n	"],"docstring_tokens":["Checks","existence","of","a","Session","associated","with","the","current","thread"]}
{"code_tokens":["\n	@Override\n	public","final","void","error","(","final","Serializable","message",")","\n	","{","\n		addFeedbackMessage","(","message,","FeedbackMessage",".","ERROR",")",";","\n	"],"docstring_tokens":["Registers","an","error","feedback","message","for","this","session"]}
{"code_tokens":["\n	@Override\n	public","final","void","fatal","(","final","Serializable","message",")","\n	","{","\n		addFeedbackMessage","(","message,","FeedbackMessage",".","FATAL",")",";","\n	"],"docstring_tokens":["Registers","an","fatal","feedback","message","for","this","session"]}
{"code_tokens":["\n	@Override\n	public","final","void","debug","(","final","Serializable","message",")","\n	","{","\n		addFeedbackMessage","(","message,","FeedbackMessage",".","DEBUG",")",";","\n	"],"docstring_tokens":["Registers","an","debug","feedback","message","for","this","session"]}
{"code_tokens":["\n	public","final","Application","getApplication","(",")","\n	","{","\n		return","Application",".","get","(",")",";","\n	"],"docstring_tokens":["Get","the","application","that","is","currently","working","with","this","session"]}
{"code_tokens":["\n	public","final","FeedbackMessages","getFeedbackMessages","(",")","\n	","{","\n		return","feedbackMessages",";","\n	"],"docstring_tokens":["Gets","feedback","messages","stored","in","session"]}
{"code_tokens":["\n	@Override\n	public","synchronized","final","<M","extends","Serializable>","M","getMetaData","(","final","MetaDataKey<M>","key",")","\n	","{","\n		return","key",".","get","(","metaData",")",";","\n	"],"docstring_tokens":["Gets","metadata","for","this","session","using","the","given","key"]}
{"code_tokens":["\n	@Override\n	public","final","void","info","(","final","Serializable","message",")","\n	","{","\n		addFeedbackMessage","(","message,","FeedbackMessage",".","INFO",")",";","\n	"],"docstring_tokens":["Registers","an","informational","feedback","message","for","this","session"]}
{"code_tokens":["\n	@Override\n	public","final","void","success","(","final","Serializable","message",")","\n	","{","\n		addFeedbackMessage","(","message,","FeedbackMessage",".","SUCCESS",")",";","\n	"],"docstring_tokens":["Registers","an","success","feedback","message","for","this","session"]}
{"code_tokens":["\n	private","void","destroy","(",")","\n	","{","\n		if","(","getSessionStore","(",")","!=","null",")","\n		","{","\n			sessionStore",".","invalidate","(","RequestCycle",".","get","(",")",".","getRequest","(",")",")",";","\n			sessionStore","=","null",";","\n			id","=","null",";","\n			RequestCycle",".","get","(",")",".","setMetaData","(","SESSION_INVALIDATED,","false",")",";","\n			clientInfo","=","null",";","\n			dirty","=","false",";","\n			metaData","=","null",";","\n		","}","\n	"],"docstring_tokens":["Invalidate","and","remove","session","store","and","page","manager"]}
{"code_tokens":["\n	public","Session","setLocale","(","final","Locale","locale",")","\n	","{","\n		Args",".","notNull","(","locale,","\"locale\"",")",";","\n\n		if","(","!Objects",".","equal","(","getLocale","(",")",",","locale",")",")","\n		","{","\n			this",".","locale",".","set","(","locale",")",";","\n			rtlLocale","=","isRtlLanguage","(","locale",")",";","\n			dirty","(",")",";","\n		","}","\n		return","this",";","\n	"],"docstring_tokens":["Set","the","locale","for","this","session"]}
{"code_tokens":["\n	@Override\n	public","final","void","warn","(","final","Serializable","message",")","\n	","{","\n		addFeedbackMessage","(","message,","FeedbackMessage",".","WARNING",")",";","\n	"],"docstring_tokens":["Registers","a","warning","feedback","message","for","this","session"]}
{"code_tokens":["\n	public","void","internalDetach","(",")","\n	","{","\n		if","(","dirty",")","\n		","{","\n			Request","request","=","RequestCycle",".","get","(",")",".","getRequest","(",")",";","\n			getSessionStore","(",")",".","flushSession","(","request,","this",")",";","\n		","}","\n		dirty","=","false",";","\n	"],"docstring_tokens":["NOT","PART","OF","PUBLIC","API,","DO","NOT","CALL	","	","Detaches","internal","state","of","Session"]}
{"code_tokens":["\n	public","final","void","dirty","(","boolean","forced",")","\n	","{","\n		if","(","isTemporary","(",")",")","\n		","{","\n			if","(","forced",")","\n			","{","\n				dirty","=","true",";","\n			","}","\n		","}","\n		else\n		","{","\n			dirty","=","true",";","\n		","}","\n	"],"docstring_tokens":["Marks","session","state","as","dirty","so","that","it","will","be","re-stored","in","the","ISessionStore	","at","the","end","of","the","request"]}
{"code_tokens":["\n	public","int","nextSequenceValue","(",")","\n	","{","\n		dirty","(","false",")",";","\n		return","sequence",".","getAndIncrement","(",")",";","\n	"],"docstring_tokens":["Retrieves","the","next","available","session-unique","value"]}
{"code_tokens":["\n	public","final","IPageManager","getPageManager","(",")","\n	","{","\n		if","(","Boolean",".","TRUE",".","equals","(","RequestCycle",".","get","(",")",".","getMetaData","(","PAGES_UNLOCKED",")",")",")","{","\n			throw","new","WicketRuntimeException","(","\"The","request","has","been","processed",".","Access","to","pages","is","no","longer","allowed\"",")",";","\n		","}","\n		\n		IPageManager","manager","=","Application",".","get","(",")",".","internalGetPageManager","(",")",";","\n		return","pageAccessSynchronizer",".","get","(",")",".","adapt","(","manager",")",";","\n	"],"docstring_tokens":["Returns","the","IPageManager","instance"]}
{"code_tokens":["\n	@Override\n	public","void","init","(","Application","application",")","\n	","{","\n		Http2Settings","http2Settings","=","Http2Settings",".","Holder",".","get","(","application",")",";","\n		http2Settings",".","setPushBuilder","(","new","Servlet4PushBuilder","(",")",")",";","\n	"],"docstring_tokens":["Initializes","the","push","builder","API","of","Servlet","4"]}
{"code_tokens":["\n	private","List<ComponentData>","getComponentData","(","final","Page","page",")","\n	","{","\n		final","List<ComponentData>","data","=","new","ArrayList<ComponentData>","(",")",";","\n\n		page",".","visitChildren","(","new","IVisitor<Component,","Void>","(",")","\n		","{","\n			@Override\n			public","void","component","(","final","Component","component,","final","IVisit<Void>","visit",")","\n			","{","\n				if","(","!component",".","getPath","(",")",".","startsWith","(","PageView",".","this",".","getPath","(",")",")",")","\n				","{","\n					final","ComponentData","componentData",";","\n\n					//","anonymous","class?","Get","the","parent's","class","name\n					String","name","=","component",".","getClass","(",")",".","getName","(",")",";","\n					if","(","name",".","indexOf","(","\"$\"",")",">","0",")","\n					","{","\n						name","=","component",".","getClass","(",")",".","getSuperclass","(",")",".","getName","(",")",";","\n					","}","\n\n					//","remove","the","path","component\n					name","=","Strings",".","lastPathComponent","(","name,","Component",".","PATH_SEPARATOR",")",";","\n\n					componentData","=","new","ComponentData","(","component",".","getPageRelativePath","(",")",",","name,\n						component",".","getSizeInBytes","(",")",")",";","\n\n					Long","renderDuration","=","component",".","getMetaData","(","RENDER_KEY",")",";","\n					if","(","renderDuration","!=","null",")","\n					","{","\n						componentData",".","renderDuration","=","renderDuration",";","\n					","}","\n\n					try\n					","{","\n						componentData",".","value","=","component",".","getDefaultModelObjectAsString","(",")",";","\n					","}","\n					catch","(","Exception","e",")","\n					","{","\n						componentData",".","value","=","e",".","getMessage","(",")",";","\n					","}","\n\n					data",".","add","(","componentData",")",";","\n				","}","\n\n			","}","\n		","}",")",";","\n\n		return","data",";","\n	"],"docstring_tokens":["Get","recursively","all","components","of","the","page,","extract","the","information","relevant","for","us","and","add	","them","to","a","list"]}
{"code_tokens":["\n	public","ITreeProvider<T>","getProvider","(",")","\n	","{","\n		return","provider",";","\n	"],"docstring_tokens":["Get","the","provider","of","the","tree","nodes"]}
{"code_tokens":["\n	public","final","void","add","(","IAuthorizationStrategy","strategy",")","\n	","{","\n		if","(","strategy","==","null",")","\n		","{","\n			throw","new","IllegalArgumentException","(","\"Strategy","argument","cannot","be","null\"",")",";","\n		","}","\n		strategies",".","add","(","strategy",")",";","\n	"],"docstring_tokens":["Adds","a","strategy","to","the","chain"]}
{"code_tokens":["\r\n	@Override\r\n	public","final","InputStream","getInputStream","(",")","\r\n	","{","\r\n		throw","new","IllegalStateException","(","\"getInputStream","(",")","is","not","used","with","IResourceStreamWriter\"",")",";","\r\n	"],"docstring_tokens":["this","method","should","not","be","used","as","it","is","not","required","for","resource","writers"]}
{"code_tokens":["\n	final","void","afterRender","(",")","\n	","{","\n		setRequestFlag","(","RFLAG_PREPARED_FOR_RENDER,","false",")",";","\n		\n		try\n		","{","\n			setRequestFlag","(","RFLAG_AFTER_RENDER_SUPER_CALL_VERIFIED,","false",")",";","\n\n			onAfterRender","(",")",";","\n			getApplication","(",")",".","getComponentOnAfterRenderListeners","(",")",".","onAfterRender","(","this",")",";","\n			verifySuperCall","(","\"onAfterRender\",","RFLAG_AFTER_RENDER_SUPER_CALL_VERIFIED",")",";","\n		","}","\n		finally\n		","{","\n			//","this","flag","must","always","be","set","to","false",".","\n			setRequestFlag","(","RFLAG_RENDERING,","false",")",";","\n		","}","\n	"],"docstring_tokens":["Called","on","every","component","after","the","page","is","rendered"]}
{"code_tokens":["\n	@Override\n	public","final","void","debug","(","final","Serializable","message",")","\n	","{","\n		getFeedbackMessages","(",")",".","debug","(","this,","message",")",";","\n		addStateChange","(",")",";","\n	"],"docstring_tokens":["Registers","a","debug","feedback","message","for","this","component"]}
{"code_tokens":["\n	final","void","internalOnRemove","(",")","\n	","{","\n		setRequestFlag","(","RFLAG_REMOVING_FROM_HIERARCHY,","true",")",";","\n		onRemove","(",")",";","\n		setFlag","(","FLAG_REMOVED,","true",")",";","\n		if","(","getRequestFlag","(","RFLAG_REMOVING_FROM_HIERARCHY",")",")","\n		","{","\n			throw","new","IllegalStateException","(","Component",".","class",".","getName","(",")","+\n				\"","has","not","been","properly","removed","from","hierarchy",".","Something","in","the","hierarchy","of","\"","+\n				getClass","(",")",".","getName","(",")","+\n				\"","has","not","called","super",".","onRemove","(",")","in","the","override","of","onRemove","(",")","method\"",")",";","\n		","}","\n		Behaviors",".","onRemove","(","this",")",";","\n		removeChildren","(",")",";","\n	"],"docstring_tokens":["Signals","this","Component","that","it","is","removed","from","the","Component","hierarchy"]}
{"code_tokens":["\n	@Override\n	public","final","void","error","(","final","Serializable","message",")","\n	","{","\n		getFeedbackMessages","(",")",".","error","(","this,","message",")",";","\n		addStateChange","(",")",";","\n	"],"docstring_tokens":["Registers","an","error","feedback","message","for","this","component"]}
{"code_tokens":["\n	@Override\n	public","final","void","fatal","(","final","Serializable","message",")","\n	","{","\n		getFeedbackMessages","(",")",".","fatal","(","this,","message",")",";","\n		addStateChange","(",")",";","\n	"],"docstring_tokens":["Registers","a","fatal","feedback","message","for","this","component"]}
{"code_tokens":["\n	public","final","<Z>","Z","findParent","(","final","Class<Z>","c",")","\n	","{","\n		//","Start","with","immediate","parent\n		MarkupContainer","current","=","parent",";","\n\n		//","Walk","up","containment","hierarchy\n		while","(","current","!=","null",")","\n		","{","\n			//","Is","current","an","instance","of","this","class?\n			if","(","c",".","isInstance","(","current",")",")","\n			","{","\n				return","c",".","cast","(","current",")",";","\n			","}","\n\n			//","Check","parent\n			current","=","current",".","getParent","(",")",";","\n		","}","\n\n		//","Failed","to","find","component\n		return","null",";","\n	"],"docstring_tokens":["Finds","the","first","container","parent","of","this","component","of","the","given","class"]}
{"code_tokens":["\n	public","final","Application","getApplication","(",")","\n	","{","\n		return","Application",".","get","(",")",";","\n	"],"docstring_tokens":["Gets","interface","to","application","that","this","component","is","a","part","of"]}
{"code_tokens":["\n	protected","IConverter<?>","createConverter","(","Class<?>","type",")","{","\n		return","null",";","\n	"],"docstring_tokens":["Factory","method","for","converters","to","be","used","by","this","component,	","returns","null","by","default"]}
{"code_tokens":["\n	@Override\n	public","String","getId","(",")","\n	","{","\n		return","id",";","\n	"],"docstring_tokens":["Gets","the","id","of","this","component"]}
{"code_tokens":["\n	public","final","Localizer","getLocalizer","(",")","\n	","{","\n		return","getApplication","(",")",".","getResourceSettings","(",")",".","getLocalizer","(",")",";","\n	"],"docstring_tokens":["Convenience","method","to","provide","easy","access","to","the","localizer","object","within","any","component"]}
{"code_tokens":["\n	@Override\n	public","final","<M","extends","Serializable>","M","getMetaData","(","final","MetaDataKey<M>","key",")","\n	","{","\n		return","key",".","get","(","getMetaData","(",")",")",";","\n	"],"docstring_tokens":["Gets","metadata","for","this","component","using","the","given","key"]}
{"code_tokens":["\n	private","MetaDataEntry<?>[]","getMetaData","(",")","\n	","{","\n		MetaDataEntry<?>[]","metaData","=","null",";","\n\n		//","index","where","we","should","expect","the","entry\n		int","index","=","getFlag","(","FLAG_MODEL_SET",")","?","1",":","0",";","\n\n		int","length","=","data_length","(",")",";","\n\n		if","(","index","<","length",")","\n		","{","\n			Object","object","=","data_get","(","index",")",";","\n			if","(","object","instanceof","MetaDataEntry<?>[]",")","\n			","{","\n				metaData","=","(","MetaDataEntry<?>[]",")","object",";","\n			","}","\n			else","if","(","object","instanceof","MetaDataEntry",")","\n			","{","\n				metaData","=","new","MetaDataEntry[]","{","(","MetaDataEntry<?>",")","object","}",";","\n			","}","\n		","}","\n\n		return","metaData",";","\n	"],"docstring_tokens":["Gets","the","meta","data","entries","for","this","component","as","an","array","of","MetaDataEntry","objects"]}
{"code_tokens":["\n	public","final","boolean","getOutputMarkupId","(",")","\n	","{","\n		return","getFlag","(","FLAG_OUTPUT_MARKUP_ID",")",";","\n	"],"docstring_tokens":["Gets","whether","or","not","component","will","output","id","attribute","into","the","markup"]}
{"code_tokens":["\n	public","final","boolean","getOutputMarkupPlaceholderTag","(",")","\n	","{","\n		return","getFlag","(","FLAG_PLACEHOLDER",")",";","\n	"],"docstring_tokens":["Gets","whether","or","not","an","invisible","component","will","render","a","placeholder","tag"]}
{"code_tokens":["\n	@Override\n	public","final","Page","getPage","(",")","\n	","{","\n		//","Search","for","nearest","Page\n		final","Page","page","=","findPage","(",")",";","\n\n		//","If","no","Page","was","found\n		if","(","page","==","null",")","\n		","{","\n			//","Give","up","with","a","nice","exception\n			throw","new","WicketRuntimeException","(","\"No","Page","found","for","component:","\"","+","this",".","toString","(","true",")","\n					+","\"",".","You","probably","forgot","to","add","it","to","its","parent","component",".","\"",")",";","\n		","}","\n\n		return","page",";","\n	"],"docstring_tokens":["Gets","the","page","holding","this","component"]}
{"code_tokens":["\n	@Override\n	public","final","String","getPageRelativePath","(",")","\n	","{","\n		return","Strings",".","afterFirstPathComponent","(","getPath","(",")",",","PATH_SEPARATOR",")",";","\n	"],"docstring_tokens":["Gets","the","path","to","this","component","relative","to","its","containing","page,","i.e"]}
{"code_tokens":["\n	public","final","RequestCycle","getRequestCycle","(",")","\n	","{","\n		return","RequestCycle",".","get","(",")",";","\n	"],"docstring_tokens":["Gets","the","active","request","cycle","for","this","component"]}
{"code_tokens":["\n	public","final","boolean","hasBeenRendered","(",")","\n	","{","\n		return","getFlag","(","FLAG_HAS_BEEN_RENDERED",")",";","\n	"],"docstring_tokens":["Gets","whether","this","component","was","rendered","at","least","once"]}
{"code_tokens":["\n	@Override\n	public","final","void","info","(","final","Serializable","message",")","\n	","{","\n		getFeedbackMessages","(",")",".","info","(","this,","message",")",";","\n		addStateChange","(",")",";","\n	"],"docstring_tokens":["Registers","an","informational","feedback","message","for","this","component"]}
{"code_tokens":["\n	@Override\n	public","final","void","success","(","final","Serializable","message",")","\n	","{","\n		getFeedbackMessages","(",")",".","success","(","this,","message",")",";","\n		addStateChange","(",")",";","\n	"],"docstring_tokens":["Registers","an","success","feedback","message","for","this","component"]}
{"code_tokens":["\n	public","final","boolean","isActionAuthorized","(","Action","action",")","\n	","{","\n		IAuthorizationStrategy","authorizationStrategy","=","getSession","(",")",".","getAuthorizationStrategy","(",")",";","\n		if","(","authorizationStrategy","!=","null",")","\n		","{","\n			return","authorizationStrategy",".","isActionAuthorized","(","this,","action",")",";","\n		","}","\n		return","true",";","\n	"],"docstring_tokens":["Authorizes","an","action","for","a","component"]}
{"code_tokens":["\n	public","final","boolean","isVisibleInHierarchy","(",")","\n	","{","\n		if","(","getRequestFlag","(","RFLAG_VISIBLE_IN_HIERARCHY_SET",")",")","\n		","{","\n			return","getRequestFlag","(","RFLAG_VISIBLE_IN_HIERARCHY_VALUE",")",";","\n		","}","\n\n		final","boolean","state",";","\n		Component","parent","=","getParent","(",")",";","\n		if","(","parent","!=","null","&&","!parent",".","isVisibleInHierarchy","(",")",")","\n		","{","\n			state","=","false",";","\n		","}","\n		else\n		","{","\n			state","=","determineVisibility","(",")",";","\n		","}","\n\n		setRequestFlag","(","RFLAG_VISIBLE_IN_HIERARCHY_SET,","true",")",";","\n		setRequestFlag","(","RFLAG_VISIBLE_IN_HIERARCHY_VALUE,","state",")",";","\n		return","state",";","\n	"],"docstring_tokens":["Checks","if","the","component","itself","and","all","its","parents","are","visible"]}
{"code_tokens":["\n	public","final","void","modelChanged","(",")","\n	","{","\n		//","Call","user","code\n		internalOnModelChanged","(",")",";","\n		onModelChanged","(",")",";","\n	"],"docstring_tokens":["Called","to","indicate","that","the","model","content","for","this","component","has","been","changed"]}
{"code_tokens":["\n	public","final","void","modelChanging","(",")","\n	","{","\n		checkHierarchyChange","(","this",")",";","\n\n		//","Call","user","code\n		onModelChanging","(",")",";","\n\n		//","Tell","the","page","that","our","model","changed\n		final","Page","page","=","findPage","(",")",";","\n		if","(","page","!=","null",")","\n		","{","\n			page",".","componentModelChanging","(","this",")",";","\n		","}","\n	"],"docstring_tokens":["Called","to","indicate","that","the","model","content","for","this","component","is","about","to","change"]}
{"code_tokens":["\n	public","final","void","render","(",")","\n	","{","\n		if","(","isAuto","(",")",")","\n		","{","\n			//","auto","components","are","prepared","when","rendered\n			beforeRender","(",")",";","\n		","}","\n\n		//","Do","the","render\n		RuntimeException","exception","=","null",";","\n		try\n		","{","\n			setRequestFlag","(","RFLAG_RENDERING,","true",")",";","\n			\n			internalRender","(",")",";","\n		","}","\n		catch","(","final","RuntimeException","ex",")","\n		","{","\n			//","Remember","it","as","the","originating","exception\n			exception","=","ex",";","\n		","}","\n		finally\n		","{","\n			try\n			","{","\n				//","Cleanup\n				afterRender","(",")",";","\n			","}","\n			catch","(","RuntimeException","ex2",")","\n			","{","\n				//","Only","remember","it","if","not","already","another","exception","happened\n				if","(","exception","==","null",")","\n				","{","\n					exception","=","ex2",";","\n				","}","\n			","}","\n		","}","\n\n		//","Re-throw","if","needed\n		if","(","exception","!=","null",")","\n		","{","\n			throw","exception",";","\n		","}","\n	"],"docstring_tokens":["Render","this","component","and","all","its","children"]}
{"code_tokens":["\n	private","void","internalRender","(",")","\n	","{","\n		//","Make","sure","there","is","a","markup","available","for","the","Component\n		IMarkupFragment","markup","=","getMarkup","(",")",";","\n		if","(","markup","==","null",")","\n		","{","\n			throw","new","MarkupNotFoundException","(","\"Markup","not","found","for","Component:","\"","+","toString","(",")",")",";","\n		","}","\n\n		//","MarkupStream","is","an","Iterator","for","the","markup\n		MarkupStream","markupStream","=","new","MarkupStream","(","markup",")",";","\n\n		MarkupElement","elem","=","markup",".","get","(","0",")",";","\n		if","(","elem","instanceof","ComponentTag",")","\n		","{","\n			//","Guarantee","that","the","markupStream","is","set","and","determineVisibility","not","yet","tested\n			//","See","WICKET-2049\n			","(","(","ComponentTag",")","elem",")",".","onBeforeRender","(","this,","markupStream",")",";","\n		","}","\n\n		//","Determine","if","component","is","visible","using","it's","authorization","status\n		//","and","the","isVisible","property",".","\n		if","(","determineVisibility","(",")",")","\n		","{","\n			setFlag","(","FLAG_HAS_BEEN_RENDERED,","true",")",";","\n\n			//","Rendering","is","beginning\n			if","(","log",".","isDebugEnabled","(",")",")","\n			","{","\n				log",".","debug","(","\"Begin","render","{","}","\",","this",")",";","\n			","}","\n\n			try\n			","{","\n				notifyBehaviorsComponentBeforeRender","(",")",";","\n				onRender","(",")",";","\n				notifyBehaviorsComponentRendered","(",")",";","\n\n				//","Component","has","been","rendered\n				rendered","(",")",";","\n			","}","\n			catch","(","RuntimeException","ex",")","\n			","{","\n				onException","(","ex",")",";","\n			","}","\n\n			if","(","log",".","isDebugEnabled","(",")",")","\n			","{","\n				log",".","debug","(","\"End","render","{","}","\",","this",")",";","\n			","}","\n		","}","\n		//","elem","is","null","when","rendering","a","page\n		else","if","(","(","elem","!=","null",")","&&","(","elem","instanceof","ComponentTag",")",")","\n		","{","\n			if","(","getFlag","(","FLAG_PLACEHOLDER",")",")","\n			","{","\n				renderPlaceholderTag","(","(","(","ComponentTag",")","elem",")",".","mutable","(",")",",","getResponse","(",")",")",";","\n			","}","\n		","}","\n	"],"docstring_tokens":["Performs","a","render","of","this","component","as","part","of","a","Page","level","render","process"]}
{"code_tokens":["\n	protected","final","IMarkupSourcingStrategy","getMarkupSourcingStrategy","(",")","\n	","{","\n		if","(","markupSourcingStrategy","==","null",")","\n		","{","\n			markupSourcingStrategy","=","newMarkupSourcingStrategy","(",")",";","\n\n			//","If","not","strategy","by","provided,","than","we","use","a","default","one",".","\n			if","(","markupSourcingStrategy","==","null",")","\n			","{","\n				markupSourcingStrategy","=","DefaultMarkupSourcingStrategy",".","get","(",")",";","\n			","}","\n		","}","\n		return","markupSourcingStrategy",";","\n	"],"docstring_tokens":["Get","the","markup","sourcing","strategy","for","the","component"]}
{"code_tokens":["\n	public","final","Component","setOutputMarkupId","(","final","boolean","output",")","\n	","{","\n		setFlag","(","FLAG_OUTPUT_MARKUP_ID,","output",")",";","\n		return","this",";","\n	"],"docstring_tokens":["Sets","whether","or","not","component","will","output","id","attribute","into","the","markup"]}
{"code_tokens":["\n	public","final","<C","extends","IRequestablePage>","void","setResponsePage","(","final","Class<C>","cls",")","\n	","{","\n		getRequestCycle","(",")",".","setResponsePage","(","cls,","(","PageParameters",")","null",")",";","\n	"],"docstring_tokens":["Sets","the","page","that","will","respond","to","this","request"]}
{"code_tokens":["\n	public","final","<C","extends","IRequestablePage>","void","setResponsePage","(","final","Class<C>","cls,\n		PageParameters","parameters",")","\n	","{","\n		getRequestCycle","(",")",".","setResponsePage","(","cls,","parameters",")",";","\n	"],"docstring_tokens":["Sets","the","page","class","and","its","parameters","that","will","respond","to","this","request"]}
{"code_tokens":["\n	public","final","Component","setVisible","(","final","boolean","visible",")","\n	","{","\n		//","Is","new","visibility","state","a","change?\n		if","(","visible","!=","getFlag","(","FLAG_VISIBLE",")",")","\n		","{","\n			//","record","component's","visibility","change\n			addStateChange","(",")",";","\n\n			//","Change","visibility\n			setFlag","(","FLAG_VISIBLE,","visible",")",";","\n			onVisibleStateChanged","(",")",";","\n		","}","\n		return","this",";","\n	"],"docstring_tokens":["Sets","whether","this","component","and","any","children","are","visible"]}
{"code_tokens":["\n	@Override\n	public","String","toString","(",")","\n	","{","\n		return","toString","(","false",")",";","\n	"],"docstring_tokens":["Gets","the","string","representation","of","this","component"]}
{"code_tokens":["\n	private","IRequestHandler","createRequestHandler","(","PageParameters","parameters,","Integer","id",")","\n	","{","\n		Page","page","=","getPage","(",")",";","\n\n		PageAndComponentProvider","provider","=","new","PageAndComponentProvider","(","page,","this,","parameters",")",";","\n\n		if","(","page",".","isPageStateless","(",")","\n			||","(","page",".","isBookmarkable","(",")","&&","page",".","wasCreatedBookmarkable","(",")",")",")","\n		","{","\n			return","new","BookmarkableListenerRequestHandler","(","provider,","id",")",";","\n		","}","\n		else\n		","{","\n			return","new","ListenerRequestHandler","(","provider,","id",")",";","\n		","}","\n	"],"docstring_tokens":["Create","a","suitable","request","handler","depending","whether","the","page","is","stateless","or","bookmarkable"]}
{"code_tokens":["\n	public","final","CharSequence","urlFor","(","final","IRequestHandler","requestHandler",")","\n	","{","\n		return","getRequestCycle","(",")",".","urlFor","(","requestHandler",")",";","\n	"],"docstring_tokens":["Returns","a","URL","that","references","the","given","request","target"]}
{"code_tokens":["\n	public","final","CharSequence","urlForListener","(","final","PageParameters","parameters",")","\n	","{","\n		IRequestHandler","handler","=","createRequestHandler","(","parameters,","null",")",";","\n		return","getRequestCycle","(",")",".","urlFor","(","handler",")",";","\n	"],"docstring_tokens":["Gets","a","URL","for","this","IRequestListener"]}
{"code_tokens":["\n	@Override\n	public","final","void","warn","(","final","Serializable","message",")","\n	","{","\n		getFeedbackMessages","(",")",".","warn","(","this,","message",")",";","\n		addStateChange","(",")",";","\n	"],"docstring_tokens":["Registers","a","warning","feedback","message","for","this","component"]}
{"code_tokens":["\n	protected","final","void","checkComponentTag","(","final","ComponentTag","tag,","final","String","name",")","\n	","{","\n		if","(","!tag",".","getName","(",")",".","equalsIgnoreCase","(","name",")",")","\n		","{","\n			String","msg","=","String",".","format","(","\"Component","[%s]","(","path","=","[%s]",")","must","be","\"\n				+","\"applied","to","a","tag","of","type","[%s],","not:","%s\",","getId","(",")",",","getPath","(",")",",","name,\n				tag",".","toUserDebugString","(",")",")",";","\n\n			findMarkupStream","(",")",".","throwMarkupException","(","msg",")",";","\n		","}","\n	"],"docstring_tokens":["Checks","whether","the","given","type","has","the","expected","name"]}
{"code_tokens":["\n	protected","void","detachModel","(",")","\n	","{","\n		IModel<?>","model","=","getModelImpl","(",")",";","\n		if","(","model","!=","null",")","\n		","{","\n			model",".","detach","(",")",";","\n		","}","\n		//","also","detach","the","wrapped","model","of","a","component","assigned","wrap","(","not\n		//","inherited",")","\n		if","(","model","instanceof","IWrapModel","&&","!getFlag","(","FLAG_INHERITABLE_MODEL",")",")","\n		","{","\n			","(","(","IWrapModel<?>",")","model",")",".","getWrappedModel","(",")",".","detach","(",")",";","\n		","}","\n	"],"docstring_tokens":["Detaches","the","model","for","this","component","if","it","is","detachable"]}
{"code_tokens":["\n	protected","final","MarkupStream","findMarkupStream","(",")","\n	","{","\n		return","new","MarkupStream","(","getMarkup","(",")",")",";","\n	"],"docstring_tokens":["Finds","the","markup","stream","for","this","component"]}
{"code_tokens":["\n	protected","boolean","isBehaviorAccepted","(","final","Behavior","behavior",")","\n	","{","\n		//","Ignore","AttributeModifiers","when","FLAG_IGNORE_ATTRIBUTE_MODIFIER","is","set\n		if","(","(","behavior","instanceof","AttributeModifier",")","&&\n			","(","getFlag","(","FLAG_IGNORE_ATTRIBUTE_MODIFIER",")","!=","false",")",")","\n		","{","\n			return","false",";","\n		","}","\n\n		return","behavior",".","isEnabled","(","this",")",";","\n	"],"docstring_tokens":["Components","are","allowed","to","reject","behavior","modifiers"]}
{"code_tokens":["\n	protected","void","onAfterRender","(",")","\n	","{","\n		setRequestFlag","(","RFLAG_AFTER_RENDER_SUPER_CALL_VERIFIED,","true",")",";","\n	"],"docstring_tokens":["Called","immediately","after","a","component","and","all","its","children","have","been","rendered,	","regardless","of","any","exception"]}
{"code_tokens":["\n	void","detachChildren","(",")","\n	","{","\n	"],"docstring_tokens":["Detaches","any","child","components"]}
{"code_tokens":["\n	void","removeChildren","(",")","\n	","{","\n	"],"docstring_tokens":["Signals","this","components","removal","from","hierarchy","to","all","its","children"]}
{"code_tokens":["\n	@Override\n	public","Component","get","(","final","String","path",")","\n	","{","\n		//","Path","to","this","component","is","an","empty","path\n		if","(","path",".","length","(",")","==","0",")","\n		","{","\n			return","this",";","\n		","}","\n		throw","new","IllegalArgumentException","(","\n			exceptionMessage","(","\"Component","is","not","a","container","and","so","does","not","contain","the","path","\"","+\n				path",")",")",";","\n	"],"docstring_tokens":["Gets","the","component","at","the","given","path"]}
{"code_tokens":["\n	final","void","renderClosingComponentTag","(","final","MarkupStream","markupStream,\n		final","ComponentTag","openTag,","final","boolean","renderBodyOnly",")","\n	","{","\n		//","Tag","should","be","open","tag","and","not","openclose","tag\n		if","(","openTag",".","isOpen","(",")",")","\n		","{","\n			//","If","we","found","a","close","tag","and","it","closes","the","open","tag,","we're","good\n			if","(","markupStream",".","atCloseTag","(",")","&&","markupStream",".","getTag","(",")",".","closes","(","openTag",")",")","\n			","{","\n				//","Render","the","close","tag\n				if","(","(","renderBodyOnly","==","false",")","&&","needToRenderTag","(","openTag",")",")","\n				","{","\n					openTag",".","writeSyntheticCloseTag","(","getResponse","(",")",")",";","\n				","}","\n			","}","\n			else","if","(","openTag",".","requiresCloseTag","(",")",")","\n			","{","\n				//","Missing","close","tag",".","Some","tags,","e",".","g",".","<p>","are","handled","like","<p/>","by","most","browsers","and\n				//","thus","will","not","throw","an","exception",".","\n				markupStream",".","throwMarkupException","(","\"Expected","close","tag","for","\"","+","openTag",")",";","\n			","}","\n		","}","\n	"],"docstring_tokens":["Renders","the","close","tag","at","the","current","position","in","the","markup","stream"]}
{"code_tokens":["\n	private","void","checkId","(","final","String","id",")","\n	","{","\n		if","(","!","(","this","instanceof","Page",")",")","\n		","{","\n			if","(","Strings",".","isEmpty","(","id",")",")","\n			","{","\n				throw","new","WicketRuntimeException","(","\"Null","or","empty","component","ID's","are","not","allowed",".","\"",")",";","\n			","}","\n		","}","\n\n		if","(","(","id","!=","null",")","&&","(","id",".","indexOf","(","':'",")","!=","-1","||","id",".","indexOf","(","'~'",")","!=","-1",")",")","\n		","{","\n			throw","new","WicketRuntimeException","(","\"The","component","ID","must","not","contain","':'","or","'~'","chars",".","\"",")",";","\n		","}","\n	"],"docstring_tokens":["Sets","the","id","of","this","component"]}
{"code_tokens":["\n	final","void","setRenderAllowed","(","boolean","renderAllowed",")","\n	","{","\n		setFlag","(","FLAG_IS_RENDER_ALLOWED,","renderAllowed",")",";","\n	"],"docstring_tokens":["Sets","the","render","allowed","flag"]}
{"code_tokens":["\n	public","final","boolean","isVisibilityAllowed","(",")","\n	","{","\n		return","getFlag","(","FLAG_VISIBILITY_ALLOWED",")",";","\n	"],"docstring_tokens":["Gets","whether","or","not","visibility","is","allowed","on","this","component"]}
{"code_tokens":["\n	public","final","boolean","isRendering","(",")","\n	","{","\n		return","getRequestFlag","(","RFLAG_PREPARED_FOR_RENDER",")","||","getRequestFlag","(","RFLAG_RENDERING",")",";","\n	"],"docstring_tokens":["Says","if","the","component","is","rendering","currently"]}
{"code_tokens":["\n	@Override\n	public","void","renderHead","(","IHeaderResponse","response",")","\n	","{","\n		//","noop\n	"],"docstring_tokens":["Render","to","the","web","response","whatever","the","component","wants","to","contribute","to","the","head","section"]}
{"code_tokens":["\n	public","Component","remove","(","final","Behavior",".",".",".","behaviors",")","\n	","{","\n		for","(","Behavior","behavior",":","behaviors",")","\n		","{","\n			Behaviors",".","remove","(","this,","behavior",")",";","\n		","}","\n		return","this",";","\n	"],"docstring_tokens":["Removes","behavior","from","component"]}
{"code_tokens":["\n	public","Component","add","(","final","Behavior",".",".",".","behaviors",")","\n	","{","\n		Behaviors",".","add","(","this,","behaviors",")",";","\n		return","this",";","\n	"],"docstring_tokens":["Adds","a","behavior","modifier","to","the","component"]}
{"code_tokens":["\n	@Around","(","\"execution","(","*","org",".","apache",".","wicket",".","protocol",".","http",".","WicketFilter",".","init","(",".",".",")",")","\"",")","\n	public","Object","aroundInit","(","ProceedingJoinPoint","joinPoint",")","throws","Throwable\n	","{","\n		Object[]","args","=","joinPoint",".","getArgs","(",")",";","\n		String","filterName","=","null",";","\n		if","(","args",".","length","==","2",")","\n		","{","\n			FilterConfig","filterConfig","=","(","FilterConfig",")","args[1]",";","\n			filterName","=","filterConfig",".","getFilterName","(",")",";","\n		","}","\n		else\n		","{","\n			FilterConfig","filterConfig","=","(","FilterConfig",")","args[0]",";","\n			filterName","=","filterConfig",".","getFilterName","(",")",";","\n		","}","\n		WicketMetrics",".","setFilterName","(","filterName",")",";","\n		return","joinPoint",".","proceed","(",")",";","\n	"],"docstring_tokens":["Gets","the","filter","name","during","the","initialization"]}
{"code_tokens":["\n	public","static","void","agentmain","(","String","agentArgs,","Instrumentation","instrumentation",")","\n	","{","\n\n		InstrumentationObjectSizeOfStrategy","strategy","=","new","InstrumentationObjectSizeOfStrategy","(","\n				instrumentation",")",";","\n		WicketObjects",".","setObjectSizeOfStrategy","(","strategy",")",";","\n	"],"docstring_tokens":["Initializes","agent","when","it","is","attached","to","an","already","running","JVM"]}
{"code_tokens":["\n	public","static","void","premain","(","String","agentArgs,","Instrumentation","instrumentation",")","\n	","{","\n\n		InstrumentationObjectSizeOfStrategy","strategy","=","new","InstrumentationObjectSizeOfStrategy","(","\n				instrumentation",")",";","\n		WicketObjects",".","setObjectSizeOfStrategy","(","strategy",")",";","\n	"],"docstring_tokens":["Initializes","agent","before","the","main","function","of","the","application","is","executed"]}
{"code_tokens":["\n	protected","void","onError","(","AjaxRequestTarget","target",")","\n	","{","\n	"],"docstring_tokens":["Listener","method","invoked","on","form","submit","with","errors"]}
{"code_tokens":["\n	@Before","(","\"call","(","*","org",".","apache",".","wicket",".","Component",".","setResponsePage","(",".",".",")",")","\"",")","\n	public","void","beforeResponsePage","(",")","throws","Throwable\n	","{","\n		mark","(","\"core/component/redirect\",","null",")",";","\n	"],"docstring_tokens":["Collects","data","how","often","components","redirect","to","another","page"]}
{"code_tokens":["\n	@Around","(","\"execution","(","*","org",".","apache",".","wicket",".","Component",".","onConfigure","(",".",".",")",")","\"",")","\n	public","Object","aroundOnConfigure","(","ProceedingJoinPoint","joinPoint",")","throws","Throwable\n	","{","\n		return","measureTime","(","\"core/component/configure\",","joinPoint",")",";","\n	"],"docstring_tokens":["Collects","data","how","often","components","calls","onConfigure"]}
{"code_tokens":["\n	@Override\n	public","void","init","(","Application","application",")","\n	","{","\n		Http2Settings","http2Settings","=","Http2Settings",".","Holder",".","get","(","application",")",";","\n		http2Settings",".","setPushBuilder","(","new","UndertowPushBuilder","(",")",")",";","\n	"],"docstring_tokens":["Initializes","the","push","builder","API","of","undertow"]}
{"code_tokens":["\n	@Override\n	public","void","read","(","IRequestParameters","parameters",")","\n	","{","\n		super",".","read","(","parameters",")",";","\n		\n		setExtendedProperty","(","parameters",".","getParameterValue","(","\"extendedProperty\"",")",".","toString","(","\"N/A\"",")",")",";","\n	"],"docstring_tokens":["Overridden","to","read","additional","properties"]}
{"code_tokens":["\r\n	@Override\r\n	public","int","getCompatibilityScore","(","final","Request","request",")","\r\n	","{","\r\n		Url","decryptedUrl","=","decryptUrl","(","request,","request",".","getUrl","(",")",")",";","\r\n\r\n		if","(","decryptedUrl","==","null",")","\r\n		","{","\r\n			return","0",";","\r\n		","}","\r\n\r\n		Request","decryptedRequest","=","request",".","cloneWithUrl","(","decryptedUrl",")",";","\r\n\r\n		return","wrappedMapper",".","getCompatibilityScore","(","decryptedRequest",")",";","\r\n	"],"docstring_tokens":["This","implementation","decrypts","the","URL","and","passes","the","decrypted","URL","to","the","wrapped","mapper"]}
{"code_tokens":["\r\n	protected","Url","encryptRequestListenerParameter","(","final","Url","url",")","\r\n	","{","\r\n		Url","encryptedUrl","=","new","Url","(","url",")",";","\r\n		boolean","encrypted","=","false",";","\r\n\r\n		for","(","Iterator<Url",".","QueryParameter>","it","=","encryptedUrl",".","getQueryParameters","(",")",".","iterator","(",")",";","it",".","hasNext","(",")",";",")","\r\n		","{","\r\n			Url",".","QueryParameter","qp","=","it",".","next","(",")",";","\r\n\r\n			if","(","MapperUtils",".","parsePageComponentInfoParameter","(","qp",")","!=","null",")","\r\n			","{","\r\n				it",".","remove","(",")",";","\r\n				String","encryptedParameterValue","=","getCrypt","(",")",".","encryptUrlSafe","(","qp",".","getName","(",")",")",";","\r\n				Url",".","QueryParameter","encryptedParameter\r\n					=","new","Url",".","QueryParameter","(","ENCRYPTED_PAGE_COMPONENT_INFO_PARAMETER,","encryptedParameterValue",")",";","\r\n				encryptedUrl",".","getQueryParameters","(",")",".","add","(","0,","encryptedParameter",")",";","\r\n				encrypted","=","true",";","\r\n				break",";","\r\n			","}","\r\n		","}","\r\n\r\n		if","(","encrypted",")","\r\n		","{","\r\n			return","encryptedUrl",";","\r\n		","}","\r\n		else\r\n		","{","\r\n			return","url",";","\r\n		","}","\r\n	"],"docstring_tokens":["Encrypts","the","PageComponentInfo","query","parameter","in","the","URL,","if","any","is","found"]}
{"code_tokens":["\r\n	protected","Url","decryptRequestListenerParameter","(","final","Request","request,","Url","encryptedUrl",")","\r\n	","{","\r\n		Url","url","=","new","Url","(","encryptedUrl",")",";","\r\n\r\n		url",".","getQueryParameters","(",")",".","clear","(",")",";","\r\n\r\n		for","(","Url",".","QueryParameter","qp",":","encryptedUrl",".","getQueryParameters","(",")",")","\r\n		","{","\r\n			if","(","MapperUtils",".","parsePageComponentInfoParameter","(","qp",")","!=","null",")","\r\n			","{","\r\n				/*\r\n				","*","Plain","text","request","listener","parameter","found",".","This","should","have","been","encrypted,","so","we\r\n				","*","refuse","to","map","the","request","unless","the","original","URL","did","not","include","this","parameter,","which\r\n				","*","case","there","are","likely","to","be","multiple","cryptomappers","installed",".","\r\n				","*/\r\n				if","(","request",".","getOriginalUrl","(",")",".","getQueryParameter","(","qp",".","getName","(",")",")","==","null",")","\r\n				","{","\r\n					url",".","getQueryParameters","(",")",".","add","(","qp",")",";","\r\n				","}","\r\n				else\r\n				","{","\r\n					return","null",";","\r\n				","}","\r\n			","}","\r\n			else","if","(","ENCRYPTED_PAGE_COMPONENT_INFO_PARAMETER",".","equals","(","qp",".","getName","(",")",")",")","\r\n			","{","\r\n				String","encryptedValue","=","qp",".","getValue","(",")",";","\r\n\r\n				if","(","Strings",".","isEmpty","(","encryptedValue",")",")","\r\n				","{","\r\n					url",".","getQueryParameters","(",")",".","add","(","qp",")",";","\r\n				","}","\r\n				else\r\n				","{","\r\n					String","decryptedValue","=","null",";","\r\n\r\n					try\r\n					","{","\r\n						decryptedValue","=","getCrypt","(",")",".","decryptUrlSafe","(","encryptedValue",")",";","\r\n					","}","\r\n					catch","(","Exception","e",")","\r\n					","{","\r\n						log",".","error","(","\"Error","decrypting","encrypted","request","listener","query","parameter\",","e",")",";","\r\n					","}","\r\n\r\n					if","(","Strings",".","isEmpty","(","decryptedValue",")",")","\r\n					","{","\r\n						url",".","getQueryParameters","(",")",".","add","(","qp",")",";","\r\n					","}","\r\n					else\r\n					","{","\r\n						Url",".","QueryParameter","decryptedParamter","=","new","Url",".","QueryParameter","(","decryptedValue,","\"\"",")",";","\r\n						url",".","getQueryParameters","(",")",".","add","(","0,","decryptedParamter",")",";","\r\n					","}","\r\n				","}","\r\n			","}","\r\n			else\r\n			","{","\r\n				url",".","getQueryParameters","(",")",".","add","(","qp",")",";","\r\n			","}","\r\n		","}","\r\n\r\n		return","url",";","\r\n	"],"docstring_tokens":["Decrypts","a","URL","which","may","contain","an","encrypted","PageComponentInfo","query","parameter"]}
{"code_tokens":["\n	public","JavaScriptHeaderItem","setId","(","String","markupId",")","\n	","{","\n		this",".","markupId","=","markupId",";","\n		return","this",";","\n	"],"docstring_tokens":["Sets","the","markup","id","for","this","header","item"]}
{"code_tokens":["\n	public","static","FooExpansion","get","(",")","\n	","{","\n		FooExpansion","expansion","=","Session",".","get","(",")",".","getMetaData","(","KEY",")",";","\n		if","(","expansion","==","null",")","\n		","{","\n			expansion","=","new","FooExpansion","(",")",";","\n\n			Session",".","get","(",")",".","setMetaData","(","KEY,","expansion",")",";","\n		","}","\n		return","expansion",";","\n	"],"docstring_tokens":["Get","the","expansion","for","the","session"]}
{"code_tokens":["\n	public","final","void","setFlag","(","final","int","flag,","final","boolean","set",")","\n	","{","\n		if","(","set",")","\n		","{","\n			flags","|=","flag",";","\n		","}","\n		else\n		","{","\n			flags","&=","~flag",";","\n		","}","\n	"],"docstring_tokens":["THIS","METHOD","IS","NOT","PART","OF","THE","WICKET","PUBLIC","API"]}
{"code_tokens":["\n	public","final","void","addBehavior","(","final","Behavior","behavior",")","\n	","{","\n		Args",".","notNull","(","behavior,","\"behavior\"",")",";","\n\n		if","(","behaviors","==","null",")","\n		","{","\n			behaviors","=","Generics",".","newArrayList","(",")",";","\n		","}","\n		behaviors",".","add","(","behavior",")",";","\n	"],"docstring_tokens":["Adds","a","behavior","to","this","component","tag"]}
{"code_tokens":["\n	@Override\n	public","final","boolean","closes","(","final","MarkupElement","open",")","\n	","{","\n		if","(","open","instanceof","ComponentTag",")","\n		","{","\n			return","(","openTag","==","open",")","||","getXmlTag","(",")",".","closes","(","(","(","ComponentTag",")","open",")",".","getXmlTag","(",")",")",";","\n		","}","\n\n		return","false",";","\n	"],"docstring_tokens":["Gets","whether","this","tag","closes","the","provided","open","tag"]}
{"code_tokens":["\n	public","final","void","enableAutolink","(","final","boolean","autolink",")","\n	","{","\n		setFlag","(","AUTOLINK,","autolink",")",";","\n	"],"docstring_tokens":["If","autolink","is","set","to","true,","href","attributes","will","automatically","be","converted","into","Wicket	","bookmarkable","URLs"]}
{"code_tokens":["\n	public","final","boolean","isAutolinkEnabled","(",")","\n	","{","\n		return","getFlag","(","AUTOLINK",")",";","\n	"],"docstring_tokens":["True","if","autolink","is","enabled","and","the","tag","contains","a","href","attribute"]}
{"code_tokens":["\n	public","final","void","append","(","String","key,","CharSequence","value,","String","separator",")","\n	","{","\n		String","current","=","getAttribute","(","key",")",";","\n		if","(","Strings",".","isEmpty","(","current",")",")","\n		","{","\n			xmlTag",".","put","(","key,","value",")",";","\n		","}","\n		else\n		","{","\n			xmlTag",".","put","(","key,","current","+","separator","+","value",")",";","\n		","}","\n\n		setModified","(","true",")",";","\n	"],"docstring_tokens":["Appends","specified","value","to","the","attribute"]}
{"code_tokens":["\n	public","final","boolean","requiresCloseTag","(",")","\n	","{","\n		if","(","getNamespace","(",")","==","null",")","\n		","{","\n			return","HtmlHandler",".","requiresCloseTag","(","getName","(",")",")",";","\n		","}","\n		else\n		","{","\n			return","HtmlHandler",".","requiresCloseTag","(","getNamespace","(",")","+","\":\"","+","getName","(",")",")",";","\n		","}","\n	"],"docstring_tokens":["Gets","whether","this","tag","does","not","require","a","closing","tag"]}
{"code_tokens":["\n	public","final","void","setModified","(","final","boolean","modified",")","\n	","{","\n		setFlag","(","MODIFIED,","modified",")",";","\n	"],"docstring_tokens":["Manually","mark","the","ComponentTag","being","modified"]}
{"code_tokens":["\n	@Test\n	public","void","markupFiles","(",")","\n	","{","\n		factory","=","DocumentBuilderFactory",".","newInstance","(",")",";","\n		factory",".","setNamespaceAware","(","true",")",";","\n\n		File","root","=","new","File","(","\"\"",")",".","getAbsoluteFile","(",")",";","\n		processDirectory","(","root",")",";","\n	"],"docstring_tokens":["Checks","xml","well","formedness","of","html","markup","files","under","the","current","working","directory"]}
{"code_tokens":["\n	@Override\n	public","void","write","(","final","byte","b[],","final","int","off,","final","int","len",")","throws","IOException\n	","{","\n		checkThreshold","(","len",")",";","\n		getStream","(",")",".","write","(","b,","off,","len",")",";","\n		written","+=","len",";","\n	"],"docstring_tokens":["Writes","len","bytes","from","the","specified","byte","array","starting","at","offset	","off","to","this","output","stream"]}
{"code_tokens":["\n	public","long","getByteCount","(",")","\n	","{","\n		return","written",";","\n	"],"docstring_tokens":["Returns","the","number","of","bytes","that","have","been","written","to","this","output","stream"]}
{"code_tokens":["\n	@Override\n	public","boolean","isCachingEnabled","(",")","\n	","{","\n		return","cachingEnabled",";","\n	"],"docstring_tokens":["Returns","true","if","the","caching","for","this","resource","is","enabled"]}
{"code_tokens":["\n	public","void","setCachingEnabled","(","final","boolean","enabled",")","\n	","{","\n		this",".","cachingEnabled","=","enabled",";","\n	"],"docstring_tokens":["Sets","the","caching","for","this","resource","to","be","enabled"]}
{"code_tokens":["\n	public","final","Class<?>","getScope","(",")","\n	","{","\n		return","WicketObjects",".","resolveClass","(","scopeName",")",";","\n	"],"docstring_tokens":["Gets","the","scoping","class,","used","for","class","loading","and","to","determine","the","package"]}
{"code_tokens":["\n	protected","byte[]","processResponse","(","final","Attributes","attributes,","final","byte[]","original",")","\n	","{","\n		return","compressResponse","(","attributes,","original",")",";","\n	"],"docstring_tokens":["Gives","a","chance","to","modify","the","resource","going","to","be","written","in","the","response"]}
{"code_tokens":["\n	protected","byte[]","compressResponse","(","final","Attributes","attributes,","final","byte[]","original",")","\n	","{","\n		ITextResourceCompressor","compressor","=","getCompressor","(",")",";","\n\n		if","(","compressor","!=","null","&&","getCompress","(",")",")","\n		","{","\n			try\n			","{","\n				Charset","charset","=","getProcessingEncoding","(",")",";","\n				String","nonCompressed","=","new","String","(","original,","charset",")",";","\n				String","output",";","\n				if","(","compressor","instanceof","IScopeAwareTextResourceProcessor",")","\n				","{","\n					IScopeAwareTextResourceProcessor","scopeAwareProcessor","=","(","IScopeAwareTextResourceProcessor",")","compressor",";","\n					output","=","scopeAwareProcessor",".","process","(","nonCompressed,","getScope","(",")",",","name",")",";","\n				","}","\n				else\n				","{","\n					output","=","compressor",".","compress","(","nonCompressed",")",";","\n				","}","\n				final","String","textEncoding","=","getTextEncoding","(",")",";","\n				final","Charset","outputCharset",";","\n				if","(","Strings",".","isEmpty","(","textEncoding",")",")","\n				","{","\n					outputCharset","=","charset",";","\n				","}","\n				else\n				","{","\n					outputCharset","=","Charset",".","forName","(","textEncoding",")",";","\n				","}","\n				return","output",".","getBytes","(","outputCharset",")",";","\n			","}","\n			catch","(","Exception","e",")","\n			","{","\n				log",".","error","(","\"Error","while","compressing","the","content\",","e",")",";","\n				return","original",";","\n			","}","\n		","}","\n		else\n		","{","\n			//","don't","strip","the","comments\n			return","original",";","\n		","}","\n	"],"docstring_tokens":["Compresses","the","response","if","its","is","eligible","and","there","is","a","configured","compressor"]}
{"code_tokens":["\n	@Override\n	public","IResourceStream","getResourceStream","(",")","\n	","{","\n		return","internalGetResourceStream","(","getCurrentStyle","(",")",",","getCurrentLocale","(",")",")",";","\n","	"],"docstring_tokens":["locate","resource","stream","for","current","resource"]}
{"code_tokens":["\n	public","static","boolean","exists","(","final","ResourceReference",".","Key","key",")","\n	","{","\n		return","exists","(","key",".","getScopeClass","(",")",",","key",".","getName","(",")",",","key",".","getLocale","(",")",",","key",".","getStyle","(",")",",\n			key",".","getVariation","(",")",")",";","\n	"],"docstring_tokens":["Checks","whether","a","resource","for","a","given","set","of","criteria","exists"]}
{"code_tokens":["\n	@Around","(","\"execution","(","*","org",".","apache",".","wicket",".","protocol",".","http",".","WicketFilter",".","processRequestCycle","(",".",".",")",")","\"",")","\n	public","Object","aroundRequestProcessed","(","ProceedingJoinPoint","joinPoint",")","throws","Throwable\n	","{","\n		return","measureTime","(","\"core/application/requestCycle\",","joinPoint",")",";","\n	"],"docstring_tokens":["Collects","the","time","how","long","a","request","took","to","be","processed"]}
{"code_tokens":["\n	public","int","getInt","(","final","Matcher","matcher,","final","int","defaultValue",")","\n	","{","\n		final","String","value","=","get","(","matcher",")",";","\n		return","value","==","null","?","defaultValue",":","Integer",".","parseInt","(","value,","radix",")",";","\n	"],"docstring_tokens":["Gets","an","int","by","parsing","the","String","matched","by","this","capturing","group"]}
{"code_tokens":["\r\n	public","String","toString","(",")","\r\n	","{","\r\n		return","toCharSequence","(",")",".","toString","(",")",";","\r\n	"],"docstring_tokens":["Representation","as","encoded","markup","attributes"]}
{"code_tokens":["\n	public","void","clearCache","(",")","\n	","{","\n		cache",".","clear","(",")",";","\n	"],"docstring_tokens":["Clears","the","resource","cache"]}
{"code_tokens":["\n	protected","ISerializer","getSerializer","(",")","\n	","{","\n		return","application",".","getFrameworkSettings","(",")",".","getSerializer","(",")",";","\n	"],"docstring_tokens":["Get","the","ISerializer","to","use","for","serializing","of","pages.	","	","By","default","the","serializer","of","the","applications","FrameworkSettings"]}
{"code_tokens":["\n	protected","IPageStore","newRequestStore","(","IPageStore","pageStore",")","\n	","{","\n		return","new","RequestPageStore","(","pageStore",")",";","\n	"],"docstring_tokens":["Keep","pages","in","the","request","until","it","is","finished"]}
{"code_tokens":["\n	protected","IPageStore","newPersistentStore","(",")","\n	","{","\n		StoreSettings","storeSettings","=","application",".","getStoreSettings","(",")",";","\n		Bytes","maxSizePerSession","=","storeSettings",".","getMaxSizePerSession","(",")",";","\n		File","fileStoreFolder","=","storeSettings",".","getFileStoreFolder","(",")",";","\n\n		return","new","DiskPageStore","(","application",".","getName","(",")",",","fileStoreFolder,","maxSizePerSession",")",";","\n	"],"docstring_tokens":["Keep","persistent","copies","of","all","pages","on","disk"]}
{"code_tokens":["\n	static","boolean","isLocale","(","String","localeCandidate",")","\n	","{","\n		boolean","isLocale","=","false",";","\n\n		Locale","locale","=","parseLocale","(","localeCandidate",")",";","\n		if","(","locale","!=","null",")","\n		","{","\n			for","(","final","Locale","l",":","Locale",".","getAvailableLocales","(",")",")","\n			","{","\n				if","(","l",".","equals","(","locale",")",")","\n				","{","\n					isLocale","=","true",";","\n					break",";","\n				","}","\n			","}","\n		","}","\n\n		return","isLocale",";","\n	"],"docstring_tokens":["Checks","whether","the","passed","parameter","can","be","parsed","to","an","existing","locale"]}
{"code_tokens":["\n	protected","ContextRelativeResource","buildContextRelativeResource","(","final","String","name,","final","String","minPostfix",")","\n	","{","\n		String","minifiedName","=","name",";","\n		\n		if","(","canBeMinified","(",")",")","\n		","{","\n			minifiedName","=","ResourceUtils",".","getMinifiedName","(","name,","minPostfix",")",";","\n		","}","\n		\n		return","new","ContextRelativeResource","(","minifiedName",")",";","\n	"],"docstring_tokens":["Build","the","context-relative","resource","for","this","resource","reference"]}
{"code_tokens":["\n	public","String","getMinPostfix","(",")","\n	","{","\n		return","minPostfix",";","\n	"],"docstring_tokens":["Gets","the","minified","postfix","we","use","for","this","resource"]}
{"code_tokens":["\n	public","final","String","get","(","final","Matcher","matcher",")","\n	","{","\n		if","(","group","==","-1",")","\n		","{","\n			throw","new","GroupNotBoundException","(",")",";","\n		","}","\n\n		return","matcher",".","group","(","group",")",";","\n	"],"docstring_tokens":["Threadsafe","method","to","retrieve","contents","of","this","captured","group"]}
{"code_tokens":["\n	public","Object","getObject","(",")","\n	","{","\n		return","object",";","\n	"],"docstring_tokens":["Gets","the","object","which","contains","the","push","URL","information"]}
{"code_tokens":["\n	public","PushItem","setObject","(","Serializable","object",")","\n	","{","\n		this",".","object","=","object",";","\n		return","this",";","\n	"],"docstring_tokens":["Sets","the","object","which","contains","the","push","URL","information"]}
{"code_tokens":["\n	public","String","getUrl","(",")","\n	","{","\n		return","url",";","\n	"],"docstring_tokens":["Gets","the","URL","composed","within","the","push","header","item"]}
{"code_tokens":["\n	public","PushItem","setUrl","(","String","url",")","\n	","{","\n		this",".","url","=","url",";","\n		return","this",";","\n	"],"docstring_tokens":["Sets","the","URL","composed","within","the","push","header","item"]}
{"code_tokens":["\n	public","Map<String,","PushItemHeaderValue>","getHeaders","(",")","\n	","{","\n		return","headers",";","\n	"],"docstring_tokens":["Gets","the","headers","to","be","added","to","the","push","response"]}
{"code_tokens":["\n	public","PushItem","setHeaders","(","Map<String,","PushItemHeaderValue>","headers",")","\n	","{","\n		this",".","headers","=","headers",";","\n		return","this",";","\n	"],"docstring_tokens":["Sets","the","headers","to","be","added","to","the","push","response"]}
{"code_tokens":["\n	public","String","getNamespace","(",")","\n	","{","\n		return","namespace",";","\n	"],"docstring_tokens":["Namespace","of","the","tag,","if","available"]}
{"code_tokens":["\n	public","int","getPos","(",")","\n	","{","\n		return","(","text","!=","null","?","text",".","pos",":","0",")",";","\n	"],"docstring_tokens":["Gets","the","location","of","the","tag","in","the","input","string"]}
{"code_tokens":["\n	public","CharSequence","getAttribute","(","final","String","key",")","\n	","{","\n		return","getAttributes","(",")",".","getCharSequence","(","key",")",";","\n	"],"docstring_tokens":["Get","a","string","attribute"]}
{"code_tokens":["\n	public","TagType","getType","(",")","\n	","{","\n		return","type",";","\n	"],"docstring_tokens":["Get","the","tag","type"]}
{"code_tokens":["\n	public","boolean","isClose","(",")","\n	","{","\n		return","type","==","TagType",".","CLOSE",";","\n	"],"docstring_tokens":["Gets","whether","this","is","a","close","tag"]}
{"code_tokens":["\n	public","boolean","isOpen","(",")","\n	","{","\n		return","type","==","TagType",".","OPEN",";","\n	"],"docstring_tokens":["Gets","whether","this","is","an","open","tag"]}
{"code_tokens":["\n	public","void","setName","(","final","String","name",")","\n	","{","\n		if","(","isMutable",")","\n		","{","\n			this",".","name","=","name",".","intern","(",")",";","\n		","}","\n		else\n		","{","\n			throw","new","UnsupportedOperationException","(","\"Attempt","to","set","name","of","immutable","tag\"",")",";","\n		","}","\n	"],"docstring_tokens":["Sets","the","tag","name"]}
{"code_tokens":["\n	public","void","setNamespace","(","final","String","namespace",")","\n	","{","\n		if","(","isMutable",")","\n		","{","\n			this",".","namespace","=","namespace","!=","null","?","namespace",".","intern","(",")",":","null",";","\n		","}","\n		else\n		","{","\n			throw","new","UnsupportedOperationException","(","\"Attempt","to","set","namespace","of","immutable","tag\"",")",";","\n		","}","\n	"],"docstring_tokens":["Sets","the","tag","namespace"]}
{"code_tokens":["\n	public","void","setType","(","final","TagType","type",")","\n	","{","\n		if","(","isMutable",")","\n		","{","\n			this",".","type","=","type",";","\n		","}","\n		else\n		","{","\n			throw","new","UnsupportedOperationException","(","\"Attempt","to","set","type","of","immutable","tag\"",")",";","\n		","}","\n	"],"docstring_tokens":["Sets","type","of","this","tag","if","it","is","not","immutable"]}
{"code_tokens":["\n	public","CharSequence","toXmlString","(",")","\n	","{","\n		final","AppendingStringBuffer","buffer","=","new","AppendingStringBuffer","(",")",";","\n\n		buffer",".","append","(","'<'",")",";","\n\n		if","(","type","==","TagType",".","CLOSE",")","\n		","{","\n			buffer",".","append","(","'/'",")",";","\n		","}","\n\n		if","(","namespace","!=","null",")","\n		","{","\n			buffer",".","append","(","namespace",")",";","\n			buffer",".","append","(","':'",")",";","\n		","}","\n\n		buffer",".","append","(","name",")",";","\n\n		buffer",".","append","(","attributes","(",")",".","toCharSequence","(",")",")",";","\n\n		if","(","type","==","TagType",".","OPEN_CLOSE",")","\n		","{","\n			buffer",".","append","(","'/'",")",";","\n		","}","\n\n		buffer",".","append","(","'>'",")",";","\n		return","buffer",";","\n	"],"docstring_tokens":["Assuming","some","attributes","have","been","changed,","toXmlString","rebuilds","the","String","on","based","on","the	","tags","informations"]}
{"code_tokens":["\n	public","void","addProvidedResources","(","HeaderItem",".",".",".","items",")","\n	","{","\n		providedResources",".","addAll","(","Arrays",".","asList","(","items",")",")",";","\n	"],"docstring_tokens":["Adds","the","HeaderItems","that","this","bundle","provides"]}
{"code_tokens":["\n	protected","void","updateEditorAjaxAttributes","(","AjaxRequestAttributes","attributes",")","\n	","{","\n	"],"docstring_tokens":["Gives","a","chance","to","the","specializations","to","modify","the","Ajax","attributes","for","the","request","when","this	","component","switches","from","a","label","to","an","editor"]}
{"code_tokens":["\n	protected","void","onCancel","(","final","AjaxRequestTarget","target",")","\n	","{","\n		label",".","setVisible","(","true",")",";","\n		editor",".","setVisible","(","false",")",";","\n		editor",".","clearInput","(",")",";","\n		target",".","add","(","AjaxEditableLabel",".","this",")",";","\n	"],"docstring_tokens":["Invoked","when","the","label","is","in","edit","mode,","and","received","a","cancel","event"]}
{"code_tokens":["\n	public","void","onEdit","(","final","AjaxRequestTarget","target",")","\n	","{","\n		label",".","setVisible","(","false",")",";","\n		editor",".","setVisible","(","true",")",";","\n		target",".","add","(","AjaxEditableLabel",".","this",")",";","\n		String","selectScript","=","String",".","format","(","\n			\"","(","function","(",")","{","var","el","=","Wicket",".","$","(","'%s'",")",";","if","(","el",".","select",")","el",".","select","(",")",";","}",")","(",")","\",\n			editor",".","getMarkupId","(",")",")",";","\n		target",".","appendJavaScript","(","selectScript",")",";","\n		target",".","focusComponent","(","editor",")",";","\n	"],"docstring_tokens":["Called","when","the","label","is","clicked","and","the","component","is","put","in","edit","mode"]}
{"code_tokens":["\n	@Override\n	protected","ZonedDateTime","createTemporal","(","LocalDate","date,","LocalTime","time",")","{","\n		return","ZonedDateTime",".","of","(","date,","time,","ZoneId",".","systemDefault","(",")",")",";","\n	"],"docstring_tokens":["Creates","a","zoned","date","time","in","the","systems","default","zone"]}
{"code_tokens":["\n	protected","final","String","getContextConfigLocation","(","final","WicketFilter","filter",")","\n	","{","\n		return","filter",".","getFilterConfig","(",")",".","getInitParameter","(","\"contextConfigLocation\"",")",";","\n	"],"docstring_tokens":["Returns","location","of","context","config","that","will","be","used","to","create","a","WebApplication	","-specific","application","context"]}
{"code_tokens":["\n	protected","final","ConfigurableWebApplicationContext","createWebApplicationContext","(","\n		final","WebApplicationContext","parent,","final","WicketFilter","filter",")","throws","BeansException\n	","{","\n		webApplicationContext","=","newApplicationContext","(",")",";","\n		webApplicationContext",".","setParent","(","parent",")",";","\n		webApplicationContext",".","setServletContext","(","filter",".","getFilterConfig","(",")",".","getServletContext","(",")",")",";","\n		webApplicationContext",".","setConfigLocation","(","getContextConfigLocation","(","filter",")",")",";","\n\n		postProcessWebApplicationContext","(","webApplicationContext,","filter",")",";","\n		webApplicationContext",".","refresh","(",")",";","\n\n		return","webApplicationContext",";","\n	"],"docstring_tokens":["Creates","and","initializes","a","new","WebApplicationContext,","with","the","given","context","as","the	","parent"]}
{"code_tokens":["\n	public","static","boolean","exists","(",")","\n	","{","\n		return","ThreadContext",".","getApplication","(",")","!=","null",";","\n	"],"docstring_tokens":["Checks","if","the","Application","threadlocal","is","set","in","this","thread"]}
{"code_tokens":["\n	public","static","Application","get","(",")","\n	","{","\n		Application","application","=","ThreadContext",".","getApplication","(",")",";","\n		if","(","application","==","null",")","\n		","{","\n			throw","new","WicketRuntimeException","(","\"There","is","no","application","attached","to","current","thread","\"","+\n				Thread",".","currentThread","(",")",".","getName","(",")",")",";","\n		","}","\n		return","application",";","\n	"],"docstring_tokens":["Get","Application","for","current","thread"]}
{"code_tokens":["\n	public","final","void","configure","(",")","\n	","{","\n		//","As","long","as","this","is","public","api","the","development","and","deployment","mode\n		//","should","counter","act","each","other","for","all","properties",".","\n		switch","(","getConfigurationType","(",")",")","\n		","{","\n			case","DEVELOPMENT",":","{","\n				getResourceSettings","(",")",".","setResourcePollFrequency","(","Duration",".","ofSeconds","(","1",")",")",";","\n				getResourceSettings","(",")",".","setJavaScriptCompressor","(","null",")",";","\n				getResourceSettings","(",")",".","setUseMinifiedResources","(","false",")",";","\n				getMarkupSettings","(",")",".","setStripWicketTags","(","false",")",";","\n				getExceptionSettings","(",")",".","setUnexpectedExceptionDisplay","(","\n					ExceptionSettings",".","SHOW_EXCEPTION_PAGE",")",";","\n				getDebugSettings","(",")",".","setComponentUseCheck","(","true",")",";","\n				getDebugSettings","(",")",".","setAjaxDebugModeEnabled","(","true",")",";","\n				getDebugSettings","(",")",".","setDevelopmentUtilitiesEnabled","(","true",")",";","\n				//","getDebugSettings","(",")",".","setOutputMarkupContainerClassName","(","true",")",";","\n				getRequestCycleSettings","(",")",".","addResponseFilter","(","EmptySrcAttributeCheckFilter",".","INSTANCE",")",";","\n				break",";","\n			","}","\n			case","DEPLOYMENT",":","{","\n				getResourceSettings","(",")",".","setResourcePollFrequency","(","null",")",";","\n				getResourceSettings","(",")",".","setJavaScriptCompressor","(","new","DefaultJavaScriptCompressor","(",")",")",";","\n				getMarkupSettings","(",")",".","setStripWicketTags","(","true",")",";","\n				getExceptionSettings","(",")",".","setUnexpectedExceptionDisplay","(","\n					ExceptionSettings",".","SHOW_INTERNAL_ERROR_PAGE",")",";","\n				getDebugSettings","(",")",".","setComponentUseCheck","(","false",")",";","\n				getDebugSettings","(",")",".","setAjaxDebugModeEnabled","(","false",")",";","\n				getDebugSettings","(",")",".","setDevelopmentUtilitiesEnabled","(","false",")",";","\n				break",";","\n			","}","\n		","}","\n	"],"docstring_tokens":["Configures","application","settings","to","good","defaults"]}
{"code_tokens":["\n	@Override\n	public","final","synchronized","<T>","T","getMetaData","(","final","MetaDataKey<T>","key",")","\n	","{","\n		return","key",".","get","(","metaData",")",";","\n	"],"docstring_tokens":["Gets","metadata","for","this","application","using","the","given","key"]}
{"code_tokens":["\n	public","final","String","getName","(",")","\n	","{","\n		return","name",";","\n	"],"docstring_tokens":["Gets","the","name","of","this","application"]}
{"code_tokens":["\n	protected","void","validateInit","(",")","\n	","{","\n		if","(","getPageRendererProvider","(",")","==","null",")","\n		","{","\n			throw","new","IllegalStateException","(","\n				\"An","instance","of","IPageRendererProvider","has","not","yet","been","set","on","this","Application",".","@see","Application#setPageRendererProvider\"",")",";","\n		","}","\n		if","(","getSessionStoreProvider","(",")","==","null",")","\n		","{","\n			throw","new","IllegalStateException","(","\n				\"An","instance","of","ISessionStoreProvider","has","not","yet","been","set","on","this","Application",".","@see","Application#setSessionStoreProvider\"",")",";","\n		","}","\n		if","(","getPageManagerProvider","(",")","==","null",")","\n		","{","\n			throw","new","IllegalStateException","(","\n				\"An","instance","of","IPageManagerProvider","has","not","yet","been","set","on","this","Application",".","@see","Application#setPageManagerProvider\"",")",";","\n		","}","\n	"],"docstring_tokens":["Gives","the","Application","object","a","chance","to","validate","if","it","has","been","properly","initialized"]}
{"code_tokens":["\n	public","final","ResourceReferenceRegistry","getResourceReferenceRegistry","(",")","\n	","{","\n		return","resourceReferenceRegistry",";","\n	"],"docstring_tokens":["Returns","ResourceReferenceRegistry","for","this","application"]}
{"code_tokens":["\n	public","final","IPageFactory","getPageFactory","(",")","\n	","{","\n		return","pageFactory",";","\n	"],"docstring_tokens":["Returns","IPageFactory","for","this","application"]}
{"code_tokens":["\n	public","HeaderItem","findBundle","(","HeaderItem","item",")","\n	","{","\n		return","providedResourcesToBundles",".","get","(","item",")",";","\n	"],"docstring_tokens":["Finds","a","bundle","that","provides","the","given","item"]}
{"code_tokens":["\n	@Override\n	protected","final","IBreadCrumbParticipant","getParticipant","(","final","String","componentId",")","\n	","{","\n		return","breadCrumbPanelFactory",".","create","(","componentId,","breadCrumbModel",")",";","\n	"],"docstring_tokens":["Uses","the","set","factory","for","creating","a","new","instance","of","IBreadCrumbParticipant"]}
{"code_tokens":["\n	protected","final","void","addFeedbackPanels","(","final","AjaxRequestTarget","target",")","\n	","{","\n		form",".","getPage","(",")",".","visitChildren","(","IFeedback",".","class,","new","IVisitor<Component,","Void>","(",")","\n		","{","\n			@Override\n			public","void","component","(","final","Component","component,","final","IVisit<Void>","visit",")","\n			","{","\n				component",".","configure","(",")",";","//","feedback","component","might","change","its","visibility\n				if","(","component",".","isVisibleInHierarchy","(",")",")","\n				","{","\n					target",".","add","(","component",")",";","\n				","}","\n				else\n				","{","\n					visit",".","dontGoDeeper","(",")",";","\n				","}","\n			","}","\n		","}",")",";","\n	"],"docstring_tokens":["Adds","all","feedback","panels","on","the","page","to","the","ajax","request","target","so","they","are","updated"]}
{"code_tokens":["\n	public","IRequestHandler","getActive","(",")","\n	","{","\n		return","active",";","\n	"],"docstring_tokens":["Get","the","handler","currently","executed"]}
{"code_tokens":["\n	public","IRequestHandler","execute","(","final","IRequestHandler","handler",")","\n	","{","\n		active","=","handler",";","\n		try\n		","{","\n			respond","(","handler",")",";","\n		","}","\n		finally\n		","{","\n			active","=","null",";","\n			inactiveRequestHandlers",".","add","(","handler",")",";","\n		","}","\n\n		IRequestHandler","scheduled","=","scheduledAfterCurrent",";","\n		scheduledAfterCurrent","=","null",";","\n		return","scheduled",";","\n	"],"docstring_tokens":["Execute","the","given","handler"]}
{"code_tokens":["\n	public","void","schedule","(","final","IRequestHandler","handler",")","\n	","{","\n		scheduledAfterCurrent","=","handler",";","\n	"],"docstring_tokens":["Schedules","the","handler","after","the","current","one"]}
{"code_tokens":["\n	public","void","detach","(",")","\n	","{","\n		if","(","active","!=","null",")","\n		","{","\n			//","no","request","handler","should","be","active","at","this","point\n			log",".","warn","(","\"request","handler","is","still","active",".","\"",")",";","\n\n			inactiveRequestHandlers",".","add","(","active",")",";","\n			active","=","null",";","\n		","}","\n\n		RuntimeException","rethrow","=","null",";",";","\n		for","(","IRequestHandler","handler",":","inactiveRequestHandlers",")","\n		","{","\n			try\n			","{","\n				detach","(","handler",")",";","\n			","}","\n			catch","(","Exception","exception",")","\n			","{","\n				if","(","rethrow","==","null","&&","exception","instanceof","RuntimeException",")","{","\n					rethrow","=","(","RuntimeException",")","exception",";","\n				","}","else","{","\n					log",".","error","(","\"Error","detaching","RequestHandler\",","exception",")",";","\n				","}","\n			","}","\n		","}","\n		if","(","rethrow","!=","null",")","{","\n			//","WICKET-6001","runtime","exceptions","are","rethrown\n			//","TODO","obsolete","should","component-queueing","be","removed\n			throw","rethrow",";","\n		","}","\n	"],"docstring_tokens":["Detaches","all","request","handlers"]}
{"code_tokens":["\n	public","StringResourceModel","setDefaultValue","(","final","IModel<String>","defaultValue",")","\n	","{","\n		this",".","defaultValue","=","defaultValue",";","\n		return","this",";","\n	"],"docstring_tokens":["Sets","the","default","value","if","the","resource","key","is","not","found"]}
{"code_tokens":["\n	public","StringResourceModel","setModel","(","final","IModel<?>","model",")","\n	","{","\n		this",".","model","=","model",";","\n		return","this",";","\n	"],"docstring_tokens":["Sets","the","model","used","for","property","substitutions"]}
{"code_tokens":["\n	public","StringResourceModel","setParameters","(","Object",".",".",".","parameters",")","\n	","{","\n		this",".","parameters","=","parameters",";","\n		return","this",";","\n	"],"docstring_tokens":["Sets","the","parameters","used","for","substitution"]}
{"code_tokens":["\n	public","Localizer","getLocalizer","(",")","\n	","{","\n		return","Application",".","get","(",")",".","getResourceSettings","(",")",".","getLocalizer","(",")",";","\n	"],"docstring_tokens":["Gets","the","localizer","that","is","being","used","by","this","string","resource","model"]}
{"code_tokens":["\n	public","boolean","isShown","(",")","\n	","{","\n		return","shown",";","\n	"],"docstring_tokens":["Is","this","window","currently","showing"]}
{"code_tokens":["\n	public","void","show","(","final","IPartialPageRequestHandler","target",")","\n	","{","\n		if","(","shown","==","false",")","\n		","{","\n			getContent","(",")",".","setVisible","(","true",")",";","\n			target",".","add","(","this",")",";","\n			target",".","appendJavaScript","(","getWindowOpenJavaScript","(",")",")",";","\n			shown","=","true",";","\n		","}","\n	"],"docstring_tokens":["Shows","the","modal","window"]}
{"code_tokens":["\n	public","void","close","(","final","IPartialPageRequestHandler","target",")","\n	","{","\n		getContent","(",")",".","setVisible","(","false",")",";","\n		if","(","isCustomComponent","(",")",")","\n		","{","\n			target",".","add","(","getContent","(",")",")",";","\n		","}","\n		target",".","appendJavaScript","(","getCloseJavacript","(",")",")",";","\n		shown","=","false",";","\n	"],"docstring_tokens":["Closes","the","modal","window"]}
{"code_tokens":["\n	protected","CharSequence","getShowJavaScript","(",")","\n	","{","\n		return","\"window",".","setTimeout","(","function","(",")","{","\\n\"","+","\"","Wicket",".","Window",".","create","(","settings",")",".","show","(",")",";","\\n\"\n			+","\"","}",",","0",")",";","\\n\"",";","\n	"],"docstring_tokens":["Method","that","allows","alternate","script","for","showing","the","window"]}
{"code_tokens":["\n	protected","String","getCloseJavacript","(",")","\n	","{","\n		return","getCloseJavacriptInternal","(",")",";","\n	"],"docstring_tokens":["Method","that","allows","alternate","script","for","closing","the","window"]}
{"code_tokens":["\n	public","String","getCssClassName","(",")","\n	","{","\n		return","cssClassName",";","\n	"],"docstring_tokens":["Returns","the","CSS","class","name","for","this","window"]}
{"code_tokens":["\n	public","int","getInitialWidth","(",")","\n	","{","\n		return","initialWidth",";","\n	"],"docstring_tokens":["Returns","the","initial","width","of","the","window"]}
{"code_tokens":["\n	public","int","getInitialHeight","(",")","\n	","{","\n		return","initialHeight",";","\n	"],"docstring_tokens":["Returns","the","initial","height","of","the","window"]}
{"code_tokens":["\n	public","ModalWindow","setResizable","(","final","boolean","resizable",")","\n	","{","\n		this",".","resizable","=","resizable",";","\n		return","this",";","\n	"],"docstring_tokens":["Sets","whether","the","user","will","be","able","to","resize","the","window"]}
{"code_tokens":["\n	public","boolean","isResizable","(",")","\n	","{","\n		return","resizable",";","\n	"],"docstring_tokens":["Returns","whether","the","window","is","resizable"]}
{"code_tokens":["\n	public","ModalWindow","setWidthUnit","(","final","String","widthUnit",")","\n	","{","\n		this",".","widthUnit","=","widthUnit",";","\n		return","this",";","\n	"],"docstring_tokens":["Sets","the","CSS","unit","used","for","initial","window","width"]}
{"code_tokens":["\n	public","String","getWidthUnit","(",")","\n	","{","\n		return","widthUnit",";","\n	"],"docstring_tokens":["Returns","the","CSS","unit","for","initial","window","width"]}
{"code_tokens":["\n	public","ModalWindow","setHeightUnit","(","final","String","heightUnit",")","\n	","{","\n		this",".","heightUnit","=","heightUnit",";","\n		return","this",";","\n	"],"docstring_tokens":["Sets","the","CSS","unit","used","for","initial","window","height"]}
{"code_tokens":["\n	public","String","getHeightUnit","(",")","\n	","{","\n		return","heightUnit",";","\n	"],"docstring_tokens":["Retrns","the","CSS","unit","for","initial","window","height"]}
{"code_tokens":["\n	public","ModalWindow","setTitle","(","final","String","title",")","\n	","{","\n		this",".","title","=","new","Model<>","(","title",")",";","\n		return","this",";","\n	"],"docstring_tokens":["Sets","the","title","of","window"]}
{"code_tokens":["\n	public","IModel<String>","getTitle","(",")","\n	","{","\n		return","title",";","\n	"],"docstring_tokens":["Returns","the","title","of","the","window"]}
{"code_tokens":["\n	public","ModalWindow","setMaskType","(","final","MaskType","mask",")","\n	","{","\n		maskType","=","mask",";","\n		return","this",";","\n	"],"docstring_tokens":["Sets","the","mask","type","of","the","window"]}
{"code_tokens":["\n	public","MaskType","getMaskType","(",")","\n	","{","\n		return","maskType",";","\n	"],"docstring_tokens":["Returns","the","mask","type","of","the","window"]}
{"code_tokens":["\n	protected","final","Component","getContent","(",")","\n	","{","\n		return","get","(","getContentId","(",")",")",";","\n	"],"docstring_tokens":["Returns","a","content","component"]}
{"code_tokens":["\n	protected","boolean","isCustomComponent","(",")","\n	","{","\n		return","getContent","(",")","!=","empty",";","\n	"],"docstring_tokens":["Returns","true","if","user","has","added","own","component","to","the","window"]}
{"code_tokens":["\n	public","ModalWindow","setContent","(","final","Component","component",")","\n	","{","\n		if","(","component",".","getId","(",")",".","equals","(","getContentId","(",")",")","==","false",")","\n		","{","\n			throw","new","WicketRuntimeException","(","\"Modal","window","content","id","is","wrong",".","Component","ID:\"","+\n				component",".","getId","(",")","+","\"",";","content","ID:","\"","+","getContentId","(",")",")",";","\n		","}","\n		else","if","(","component","instanceof","AbstractRepeater",")","\n		","{","\n			throw","new","WicketRuntimeException","(","\n				\"A","repeater","component","cannot","be","used","as","the","content","of","a","modal","window,","please","use","repeater's","parent\"",")",";","\n		","}","\n\n		component",".","setOutputMarkupPlaceholderTag","(","true",")",";","\n		component",".","setVisible","(","false",")",";","\n		replace","(","component",")",";","\n		shown","=","false",";","\n		pageCreator","=","null",";","\n		return","this",";","\n	"],"docstring_tokens":["Sets","the","content","of","the","modal","window"]}
{"code_tokens":["\n	public","boolean","isAutoSize","(",")","\n	","{","\n		return","autoSize",";","\n	"],"docstring_tokens":["Returns","whether","window","will","be","opened","in","autosize","mode"]}
{"code_tokens":["\n	public","static","OnDomReadyHeaderItem","forScript","(","CharSequence","javaScript",")","\n	","{","\n		return","new","OnDomReadyHeaderItem","(","javaScript",")",";","\n	"],"docstring_tokens":["Creates","a","OnDomReadyHeaderItem","for","the","script"]}
{"code_tokens":["\n	private","Constructor<?","extends","BreadCrumbPanel>","getConstructor","(",")","\n	","{","\n		try\n		","{","\n			return","panelClass",".","getConstructor","(","String",".","class,","IBreadCrumbModel",".","class",")",";","\n		","}","\n		catch","(","SecurityException","e",")","\n		","{","\n			throw","new","RuntimeException","(","e",")",";","\n		","}","\n		catch","(","NoSuchMethodException","e",")","\n		","{","\n			throw","new","RuntimeException","(","e",")",";","\n		","}","\n	"],"docstring_tokens":["Gets","the","proper","constructor","of","the","panel","class"]}
{"code_tokens":["\n	@Around","(","\"execution","(","org",".","apache",".","wicket",".","behavior",".","Behavior",".","new","(",".",".",")",")","\"",")","\n	public","Object","aroundNew","(","ProceedingJoinPoint","joinPoint",")","throws","Throwable\n	","{","\n		return","mark","(","\"core/behavior/create\",","joinPoint",")",";","\n	"],"docstring_tokens":["Collects","data","how","often","a","behavior","is","created"]}
{"code_tokens":["\n	private","AppendingStringBuffer","invokeResponseFilters","(","final","StringResponse","contentResponse",")","\n	","{","\n		AppendingStringBuffer","responseBuffer","=","new","AppendingStringBuffer","(","\n			contentResponse",".","getBuffer","(",")",")",";","\n\n		List<IResponseFilter>","responseFilters","=","Application",".","get","(",")","\n			",".","getRequestCycleSettings","(",")","\n			",".","getResponseFilters","(",")",";","\n\n		if","(","responseFilters","!=","null",")","\n		","{","\n			for","(","IResponseFilter","filter",":","responseFilters",")","\n			","{","\n				responseBuffer","=","filter",".","filter","(","responseBuffer",")",";","\n			","}","\n		","}","\n		return","responseBuffer",";","\n	"],"docstring_tokens":["Runs","the","configured","IResponseFilters","over","the","constructed","Ajax","response"]}
{"code_tokens":["\n	public","void","addAll","(","Cookie[]","cookies",")","\n	","{","\n		if","(","cookies","!=","null",")","\n		","{","\n			addAll","(","Arrays",".","asList","(","cookies",")",")",";","\n		","}","\n	"],"docstring_tokens":["calls","add","on","each","cookie"]}
{"code_tokens":["\n	public","List<Cookie>","asList","(",")","\n	","{","\n		ArrayList<Cookie>","ret","=","new","ArrayList<Cookie>","(",")",";","\n		ret",".","addAll","(","cookies",".","values","(",")",")",";","\n		return","ret",";","\n	"],"docstring_tokens":["list","of","non","expired","cookies"]}
{"code_tokens":["\n	public","List<Cookie>","expiredAsList","(",")","\n	","{","\n		ArrayList<Cookie>","ret","=","new","ArrayList<Cookie>","(",")",";","\n		ret",".","addAll","(","expiredCookies",".","values","(",")",")",";","\n		return","ret",";","\n	"],"docstring_tokens":["list","of","expired","cookies"]}
{"code_tokens":["\n	public","List<Cookie>","allAsList","(",")","\n	","{","\n		ArrayList<Cookie>","ret","=","new","ArrayList<Cookie>","(",")",";","\n		ret",".","addAll","(","cookies",".","values","(",")",")",";","\n		ret",".","addAll","(","expiredCookies",".","values","(",")",")",";","\n		return","ret",";","\n	"],"docstring_tokens":["list","of","all","cookies,","expired","or","not"]}
{"code_tokens":["\n	protected","void","onBeforeRespond","(","Response","response",")","{","\n	"],"docstring_tokens":["Hook-method","called","before","components","are","written"]}
{"code_tokens":["\n	protected","void","onAfterRespond","(","Response","response",")","{","\n	"],"docstring_tokens":["Hook-method","called","after","components","are","written"]}
{"code_tokens":["\n	public","final","void","add","(","final","Component","component,","final","String","markupId",")","\n	","{","\n		Args",".","notEmpty","(","markupId,","\"markupId\"",")",";","\n		Args",".","notNull","(","component,","\"component\"",")",";","\n\n		if","(","component","instanceof","Page",")","\n		","{","\n			if","(","component","!=","page",")","\n			","{","\n				throw","new","IllegalArgumentException","(","\"Cannot","add","another","page\"",")",";","\n			","}","\n		","}","\n		else\n		","{","\n			Page","pageOfComponent","=","component",".","findParent","(","Page",".","class",")",";","\n			if","(","pageOfComponent","==","null",")","\n			","{","\n				//","no","longer","on","page","-","log","the","error","but","don't","block","the","user","of","the","application\n				//","(","which","was","the","behavior","in","Wicket","<=","7",")",".","\n				LOG",".","warn","(","\"Component","'","{","}","'","not","cannot","be","updated","because","it","was","already","removed","from","page\",","component",")",";","\n				return",";","\n			","}","\n			else","if","(","pageOfComponent","!=","page",")","\n			","{","\n				//","on","another","page\n				throw","new","IllegalArgumentException","(","\"Component","\"","+","component",".","toString","(",")","+","\"","cannot","be","updated","because","it","is","on","another","page",".","\"",")",";","\n			","}","\n\n			if","(","component","instanceof","AbstractRepeater",")","\n			","{","\n				throw","new","IllegalArgumentException","(","\n					\"Component","\"","+\n					Classes",".","name","(","component",".","getClass","(",")",")","+\n					\"","is","a","repeater","and","cannot","be","added","to","a","partial","page","update","directly",".","\"","+\n					\"Instead","add","its","parent","or","another","markup","container","higher","in","the","hierarchy",".","\"",")",";","\n			","}","\n		","}","\n\n		if","(","componentsFrozen",")","\n		","{","\n			throw","new","IllegalStateException","(","\"A","partial","update","of","the","page","is","being","rendered,","component","\"","+","component",".","toString","(",")","+","\"","can","no","longer","be","added\"",")",";","\n		","}","\n\n		component",".","setMarkupId","(","markupId",")",";","\n		markupIdToComponent",".","put","(","markupId,","component",")",";","\n	"],"docstring_tokens":["Adds","a","component","to","be","updated","at","the","client","side","with","its","current","markup"]}
{"code_tokens":["\n	public","void","detach","(","IRequestCycle","requestCycle",")","\n	","{","\n		for","(","final","Component","component",":","markupIdToComponent",".","values","(",")",")","{","\n			final","Page","parentPage","=","component",".","findParent","(","Page",".","class",")",";","\n			if","(","parentPage","!=","null",")","{","\n				parentPage",".","detach","(",")",";","\n				break",";","\n			","}","\n		","}","\n	"],"docstring_tokens":["Detaches","the","page","if","at","least","one","of","its","components","was","updated"]}
{"code_tokens":["\n	protected","long","cullPageNumber","(","long","pageNumber",")","\n	","{","\n		long","idx","=","pageNumber",";","\n		if","(","idx","<","0",")","\n		","{","\n			idx","=","pageable",".","getPageCount","(",")","+","idx",";","\n		","}","\n\n		if","(","idx",">","(","pageable",".","getPageCount","(",")","-","1",")",")","\n		","{","\n			idx","=","pageable",".","getPageCount","(",")","-","1",";","\n		","}","\n\n		if","(","idx","<","0",")","\n		","{","\n			idx","=","0",";","\n		","}","\n\n		return","idx",";","\n	"],"docstring_tokens":["Allows","the","link","to","cull","the","page","number","to","the","valid","range","before","it","is","retrieved","from","the	","link"]}
{"code_tokens":["\n	@Override\n	public","final","boolean","linksTo","(","final","Page","page",")","\n	","{","\n		return","getPageNumber","(",")","==","pageable",".","getCurrentPage","(",")",";","\n	"],"docstring_tokens":["Returns","true","if","this","PageableListView","navigation","link","links","to","the","given","page"]}
{"code_tokens":["\n	protected","void","encodePageComponentInfo","(","Url","url,","PageComponentInfo","info",")","\n	","{","\n		Args",".","notNull","(","url,","\"url\"",")",";","\n\n		if","(","info","!=","null",")","\n		","{","\n			String","s","=","info",".","toString","(",")",";","\n			if","(","!Strings",".","isEmpty","(","s",")",")","\n			","{","\n				QueryParameter","parameter","=","new","QueryParameter","(","s,","\"\"",")",";","\n				url",".","getQueryParameters","(",")",".","add","(","parameter",")",";","\n			","}","\n		","}","\n	"],"docstring_tokens":["Encodes","the","PageComponentInfo","instance","as","the","first","query","string","parameter","to","the	","URL"]}
{"code_tokens":["\n	protected","Class<?","extends","IRequestablePage>","getPageClass","(","String","name",")","\n	","{","\n		String","cleanedClassName","=","cleanClassName","(","name",")",";","\n		return","WicketObjects",".","resolveClass","(","cleanedClassName",")",";","\n	"],"docstring_tokens":["Loads","page","class","with","given","name"]}
{"code_tokens":["\n	protected","String","importAsString","(",")","\n	","{","\n		//","gets","the","model","object:","should","provide","us","with","either","an","absolute","or","a\n		//","relative","url\n		String","url","=","getModelObject","(",")",";","\n\n		if","(","UrlUtils",".","isRelative","(","url",")",")","\n		","{","\n			return","importRelativeUrl","(","url",")",";","\n		","}","\n		else\n		","{","\n			return","importAbsoluteUrl","(","url",")",";","\n		","}","\n	"],"docstring_tokens":["Imports","the","contents","of","the","url","of","the","model","object"]}
{"code_tokens":["\n	public","ContainerInfo","getContainerInfo","(",")","\n	","{","\n		return","containerInfo",";","\n	"],"docstring_tokens":["Get","the","container","info","associated","with","the","markup"]}
{"code_tokens":["\n	public","IResourceStream","getResource","(",")","\n	","{","\n		return","resourceStream",";","\n	"],"docstring_tokens":["Gets","the","resource","that","contains","this","markup"]}
{"code_tokens":["\n	public","String","getWicketNamespace","(",")","\n	","{","\n		return","wicketNamespace",";","\n	"],"docstring_tokens":["Get","the","wicket","namespace","valid","for","this","specific","markup"]}
{"code_tokens":["\n	public","Markup","getBaseMarkup","(",")","\n	","{","\n		return","baseMarkup",";","\n	"],"docstring_tokens":["In","case","of","markup","inheritance,","the","base","markup","resource"]}
{"code_tokens":["\n	private","Markup","getBaseMarkup","(","final","MarkupContainer","container,","final","Markup","markup,\n		final","boolean","enforceReload",")","\n	","{","\n		final","Class<?>","location","=","markup",".","getMarkupResourceStream","(",")",".","getMarkupClass","(",")",".","getSuperclass","(",")",";","\n\n		//","get","the","base","markup\n		return","MarkupFactory",".","get","(",")",".","getMarkup","(","container,","location,","enforceReload",")",";","\n	"],"docstring_tokens":["Load","the","base","markup"]}
{"code_tokens":["\n	@Override\n	public","boolean","linksTo","(","final","Page","page",")","\n	","{","\n		pageable",".","getCurrentPage","(",")",";","\n		return","(","(","increment","<","0",")","&&","isFirst","(",")",")","||","(","(","increment",">","0",")","&&","isLast","(",")",")",";","\n	"],"docstring_tokens":["Returns","true","if","the","page","link","links","to","the","given","page"]}
{"code_tokens":["\n	public","void","setCookies","(","List<Cookie>","cookies",")","\n	","{","\n		this",".","cookies",".","clear","(",")",";","\n		this",".","cookies",".","addAll","(","cookies",")",";","\n	"],"docstring_tokens":["Sets","cookies","for","current","request"]}
{"code_tokens":["\n	public","final","void","addListener","(","final","IBreadCrumbModelListener","listener",")","\n	","{","\n		Args",".","notNull","(","listener,","\"listener\"",")",";","\n		listeners",".","add","(","listener",")",";","\n	"],"docstring_tokens":["Adds","a","bread","crumb","model","listener"]}
{"code_tokens":["\n	public","final","void","fireBreadCrumbActivated","(","final","IBreadCrumbParticipant","previousParticipant,\n		final","IBreadCrumbParticipant","breadCrumbParticipant",")","\n	","{","\n		for","(","IBreadCrumbModelListener","listener",":","listeners",")","\n		","{","\n			listener",".","breadCrumbActivated","(","previousParticipant,","breadCrumbParticipant",")",";","\n		","}","\n	"],"docstring_tokens":["Notifies","all","listeners","that","a","bread","crumb","was","activated"]}
{"code_tokens":["\n	public","final","void","fireBreadCrumbAdded","(","final","IBreadCrumbParticipant","breadCrumbParticipant",")","\n	","{","\n		for","(","IBreadCrumbModelListener","listener",":","listeners",")","\n		","{","\n			listener",".","breadCrumbAdded","(","breadCrumbParticipant",")",";","\n		","}","\n	"],"docstring_tokens":["Notifies","all","listeners","that","a","new","bread","crumb","was","added"]}
{"code_tokens":["\n	public","final","void","fireBreadCrumbRemoved","(","final","IBreadCrumbParticipant","breadCrumbParticipant",")","\n	","{","\n		for","(","IBreadCrumbModelListener","listener",":","listeners",")","\n		","{","\n			listener",".","breadCrumbRemoved","(","breadCrumbParticipant",")",";","\n		","}","\n	"],"docstring_tokens":["Notifies","all","listeners","that","a","bread","crumb","was","removed"]}
{"code_tokens":["\n	public","final","void","removeListener","(","final","IBreadCrumbModelListener","listener",")","\n	","{","\n		if","(","listener","!=","null",")","\n		","{","\n			listeners",".","remove","(","listener",")",";","\n		","}","\n	"],"docstring_tokens":["Removes","a","bread","crumb","model","listener"]}
{"code_tokens":["\n	protected","boolean","isRequired","(",")","\n	","{","\n		BeanValidationContext","config","=","BeanValidationConfiguration",".","get","(",")",";","\n\n		HashSet<Class<?>>","groups","=","new","HashSet<Class<?>>","(","Arrays",".","asList","(","getGroups","(",")",")",")",";","\n\n		Iterator<ConstraintDescriptor<?>>","it","=","new","ConstraintIterator","(","config",".","getValidator","(",")",",","getProperty","(",")",")",";","\n		while","(","it",".","hasNext","(",")",")","\n		","{","\n			ConstraintDescriptor<?>","constraint","=","it",".","next","(",")",";","\n			\n			if","(","config",".","isRequiredConstraint","(","constraint",")",")","\n			","{","\n				if","(","canApplyToDefaultGroup","(","constraint",")","&&","groups",".","size","(",")","==","0",")","\n				","{","\n					return","true",";","\n				","}","\n		\n				for","(","Class<?>","constraintGroup",":","constraint",".","getGroups","(",")",")","\n				","{","\n					if","(","groups",".","contains","(","constraintGroup",")",")","\n					","{","\n						return","true",";","\n					","}","\n				","}","\n			","}","\n		","}","\n\n		return","false",";","\n	"],"docstring_tokens":["Should","this","property","make","the","owning","component","required"]}
{"code_tokens":["\n	protected","final","MarkupContainer","getMarkupProvider","(","final","Component","component",")","\n	","{","\n		return","(","markupProvider","!=","null","?","markupProvider",":","component",".","getParent","(",")",")",";","\n	"],"docstring_tokens":["Returns","markup","provider","associated","with","this","fragment"]}
{"code_tokens":["\n	public","IMarkupFragment","chooseMarkup","(","final","Component","component",")","\n	","{","\n		return","getMarkupProvider","(","component",")",".","getMarkup","(","null",")",";","\n	"],"docstring_tokens":["Get","the","markup","stream","which","shall","be","used","to","search","for","the","fragment"]}
{"code_tokens":["\n	public","final","boolean","anyErrorMessage","(",")","\n	","{","\n		return","anyMessage","(","FeedbackMessage",".","ERROR",")",";","\n	"],"docstring_tokens":["Search","messages","that","this","panel","will","render,","and","see","if","there","is","any","message","of","level","ERROR	","or","up"]}
{"code_tokens":["\n	public","final","boolean","anyMessage","(",")","\n	","{","\n		return","anyMessage","(","FeedbackMessage",".","UNDEFINED",")",";","\n	"],"docstring_tokens":["Search","messages","that","this","panel","will","render,","and","see","if","there","is","any","message"]}
{"code_tokens":["\n	public","final","boolean","anyMessage","(","int","level",")","\n	","{","\n		List<FeedbackMessage>","msgs","=","getCurrentMessages","(",")",";","\n\n		for","(","FeedbackMessage","msg",":","msgs",")","\n		","{","\n			if","(","msg",".","isLevel","(","level",")",")","\n			","{","\n				return","true",";","\n			","}","\n		","}","\n\n		return","false",";","\n	"],"docstring_tokens":["Search","messages","that","this","panel","will","render,","and","see","if","there","is","any","message","of","the","given	","level"]}
{"code_tokens":["\n	public","final","FeedbackPanel","setFilter","(","IFeedbackMessageFilter","filter",")","\n	","{","\n		getFeedbackMessagesModel","(",")",".","setFilter","(","filter",")",";","\n		return","this",";","\n	"],"docstring_tokens":["Sets","a","filter","to","use","on","the","feedback","messages","model"]}
{"code_tokens":["\n	protected","String","getCSSClass","(","final","FeedbackMessage","message",")","\n	","{","\n		String","cssClass",";","\n		switch","(","message",".","getLevel","(",")",")","\n		","{","\n			case","FeedbackMessage",".","UNDEFINED:\n				cssClass","=","getString","(","FeedbackMessage",".","UNDEFINED_CSS_CLASS_KEY",")",";","\n				break",";","\n			case","FeedbackMessage",".","DEBUG:\n				cssClass","=","getString","(","FeedbackMessage",".","DEBUG_CSS_CLASS_KEY",")",";","\n				break",";","\n			case","FeedbackMessage",".","INFO:\n				cssClass","=","getString","(","FeedbackMessage",".","INFO_CSS_CLASS_KEY",")",";","\n				break",";","\n			case","FeedbackMessage",".","SUCCESS:\n				cssClass","=","getString","(","FeedbackMessage",".","SUCCESS_CSS_CLASS_KEY",")",";","\n				break",";","\n			case","FeedbackMessage",".","WARNING:\n				cssClass","=","getString","(","FeedbackMessage",".","WARNING_CSS_CLASS_KEY",")",";","\n				break",";","\n			case","FeedbackMessage",".","ERROR:\n				cssClass","=","getString","(","FeedbackMessage",".","ERROR_CSS_CLASS_KEY",")",";","\n				break",";","\n			case","FeedbackMessage",".","FATAL:\n				cssClass","=","getString","(","FeedbackMessage",".","FATAL_CSS_CLASS_KEY",")",";","\n				break",";","\n			default:\n				cssClass","=","\"feedbackPanel\"","+","message",".","getLevelAsString","(",")",";","\n		","}","\n		return","cssClass",";","\n	"],"docstring_tokens":["Gets","the","css","class","for","the","given","message"]}
{"code_tokens":["\n	protected","final","List<FeedbackMessage>","getCurrentMessages","(",")","\n	","{","\n		final","List<?","extends","FeedbackMessage>","messages","=","messageListView",".","getModelObject","(",")",";","\n		return","Collections",".","unmodifiableList","(","messages",")",";","\n	"],"docstring_tokens":["Gets","the","currently","collected","messages","for","this","panel"]}
{"code_tokens":["\n	public","final","String","getExtension","(",")","\n	","{","\n		String","name","=","getName","(",")",";","\n\n		final","int","queryAt","=","name",".","indexOf","(","'?'",")",";","\n\n		//","remove","query","string","part\n		if","(","queryAt","!=","-1",")","\n		","{","\n			name","=","name",".","substring","(","0,","queryAt",")",";","\n		","}","\n\n		//","get","start","of","extension\n		final","int","extPos","=","name",".","lastIndexOf","(","'",".","'",")",";","\n\n		if","(","extPos","==","-1",")","\n		","{","\n			return","null",";","\n		","}","\n\n		//","return","extension\n		return","name",".","substring","(","extPos","+","1",")",".","toLowerCase","(","Locale",".","ROOT",")",";","\n	"],"docstring_tokens":["returns","extension","of","the","resource","reference"]}
{"code_tokens":["\n	public","boolean","canBeRegistered","(",")","\n	","{","\n		return","true",";","\n	"],"docstring_tokens":["Can","be","used","to","disable","registering","certain","resource","references","in	","ResourceReferenceRegistry"]}
{"code_tokens":["\n	public","UrlAttributes","getUrlAttributes","(",")","\n	","{","\n		return","new","UrlAttributes","(","getLocale","(",")",",","getStyle","(",")",",","getVariation","(",")",")",";","\n	"],"docstring_tokens":["Allows","to","specify","which","locale,","style","and","variation","values","will","the","generated","URL","for","this	","resource","reference","have"]}
{"code_tokens":["\n	protected","IModel<F>","getFilterModel","(","final","FilterForm<?>","form",")","\n	","{","\n		return","new","PropertyModel<>","(","form",".","getDefaultModel","(",")",",","getPropertyExpression","(",")",")",";","\n	"],"docstring_tokens":["Returns","the","model","that","will","be","passed","on","to","the","text","filter"]}
{"code_tokens":["\n	@Override\n	public","String","getTextFormat","(",")","\n	","{","\n		return","datePattern",";","\n	"],"docstring_tokens":["Returns","the","date","pattern"]}
{"code_tokens":["\n	private","static","String","defaultDatePattern","(",")","\n	","{","\n		//","It","is","possible","to","retrieve","from","session?\n		Locale","locale","=","Session",".","get","(",")",".","getLocale","(",")",";","\n		if","(","locale","!=","null",")","\n		","{","\n			DateFormat","format","=","DateFormat",".","getDateInstance","(","DateFormat",".","SHORT,","locale",")",";","\n			if","(","format","instanceof","SimpleDateFormat",")","\n			","{","\n				return","(","(","SimpleDateFormat",")","format",")",".","toPattern","(",")",";","\n			","}","\n		","}","\n		return","DEFAULT_PATTERN",";","\n	"],"docstring_tokens":["Try","to","get","datePattern","from","user","session","locale"]}
{"code_tokens":["\n	protected","void","checkComponent","(","FormComponent<?>","component",")","\n	","{","\n		if","(","Application",".","get","(",")",".","usesDevelopmentConfig","(",")","\n			&&","AjaxFormChoiceComponentUpdatingBehavior",".","appliesTo","(","component",")",")","\n		","{","\n			log",".","warn","(","String\n				",".","format","(","\n					\"AjaxFormComponentUpdatingBehavior","is","not","supposed","to","be","added","in","the","form","component","at","path:","\\\"%s\\\"",".","\"\n						+","\"Use","the","AjaxFormChoiceComponentUpdatingBehavior","instead,","that","is","meant","for","choices/groups","that","are","not","one","component","in","the","html","but","many\",\n					component",".","getPageRelativePath","(",")",")",")",";","\n		","}","\n	"],"docstring_tokens":["Check","the","component","this","behavior","is","bound","to.	","	","Logs","a","warning","in","development","mode","when","an","AjaxFormChoiceComponentUpdatingBehavior	","should","be","used"]}
{"code_tokens":["\n	public","static","AjaxFormComponentUpdatingBehavior","onUpdate","(","String","eventName,\n		SerializableConsumer<AjaxRequestTarget>","onUpdate",")","\n	","{","\n		Args",".","notNull","(","onUpdate,","\"onUpdate\"",")",";","\n\n		return","new","AjaxFormComponentUpdatingBehavior","(","eventName",")","\n		","{","\n			private","static","final","long","serialVersionUID","=","1L",";","\n\n			@Override\n			protected","void","onUpdate","(","AjaxRequestTarget","target",")","\n			","{","\n				onUpdate",".","accept","(","target",")",";","\n			","}","\n		","}",";","\n	"],"docstring_tokens":["Creates","an","AjaxFormComponentUpdatingBehavior","based","on","lambda","expressions"]}
{"code_tokens":["\n	@Override\n	public","Component","newNodeComponent","(","String","id,","IModel<T>","model",")","\n	","{","\n		Component","node","=","super",".","newNodeComponent","(","id,","model",")",";","\n\n		node",".","setOutputMarkupId","(","true",")",";","\n\n		return","node",";","\n	"],"docstring_tokens":["Overridden","to","let","the","node","output","its","markup","id"]}
{"code_tokens":["\r\n	public","static","String","getMinifiedName","(","String","name,","String","minPostfix",")","\r\n	","{","\r\n		String","minifiedName",";","\r\n		int","idxOfExtension","=","name",".","lastIndexOf","(","'",".","'",")",";","\r\n		final","String","dottedPostfix","=","\"",".","\"","+","minPostfix",";","\r\n		\r\n		if","(","idxOfExtension",">","-1",")","\r\n		","{","\r\n			String","extension","=","name",".","substring","(","idxOfExtension",")",";","\r\n			final","String","baseName","=","name",".","substring","(","0,","name",".","length","(",")","-","extension",".","length","(",")","+","1",")",";","\r\n			if","(","!dottedPostfix",".","equals","(","extension",")","&&","!baseName",".","endsWith","(","dottedPostfix","+","\"",".","\"",")",")","\r\n			","{","\r\n				minifiedName","=","baseName","+","minPostfix","+","extension",";","\r\n			","}","else\r\n			","{","\r\n				minifiedName","=","name",";","\r\n			","}","\r\n		","}","else\r\n		","{","\r\n			minifiedName","=","name","+","dottedPostfix",";","\r\n		","}","\r\n		return","minifiedName",";","\r\n	"],"docstring_tokens":["Return","the","minified","version","for","a","given","resource","name"]}
{"code_tokens":["\n	@Around","(","\"execution","(","*","org",".","apache",".","wicket",".","request",".","IRequestHandler",".","detach","(",".",".",")",")","\"",")","\n	public","Object","aroundOnRender","(","ProceedingJoinPoint","joinPoint",")","throws","Throwable\n	","{","\n		return","measureTime","(","\"core/requesthandler/detach\",","joinPoint",")",";","\n	"],"docstring_tokens":["Collects","data","how","often","a","request","handler","calls","detach"]}
{"code_tokens":["\r\n	public","Kind","getKind","(",")","\r\n	","{","\r\n		return","kind",";","\r\n	"],"docstring_tokens":["Gets","the","kind","of","the","track","belongs","to","the","media","component"]}
{"code_tokens":["\r\n	public","String","getLabel","(",")","\r\n	","{","\r\n		return","label",";","\r\n	"],"docstring_tokens":["The","label","for","this","track"]}
{"code_tokens":["\r\n	public","void","setLabel","(","String","label",")","\r\n	","{","\r\n		this",".","label","=","label",";","\r\n	"],"docstring_tokens":["Sets","the","label","for","this","track"]}
{"code_tokens":["\r\n	public","PageParameters","getPageParameters","(",")","\r\n	","{","\r\n		return","pageParameters",";","\r\n	"],"docstring_tokens":["Gets","the","page","parameter","applied","to","the","URL","of","the","track"]}
{"code_tokens":["\r\n	public","void","setPageParameters","(","PageParameters","pageParameters",")","\r\n	","{","\r\n		this",".","pageParameters","=","pageParameters",";","\r\n	"],"docstring_tokens":["Sets","the","page","parameter","applied","to","the","URL","of","the","track"]}
{"code_tokens":["\n	@Override\n	public","final","String","loadStringResource","(","final","Class<?>","clazz,","final","String","key,","Locale","locale,\n		final","String","style,","final","String","variation",")","\n	","{","\n		if","(","locale","==","null",")","\n		","{","\n			locale","=","Session",".","exists","(",")","?","Session",".","get","(",")",".","getLocale","(",")",":","Locale",".","getDefault","(",")",";","\n		","}","\n		try\n		","{","\n			return","ResourceBundle",".","getBundle","(","bundleName,","locale",")",".","getString","(","key",")",";","\n		","}","\n		catch","(","MissingResourceException","mrx",")","\n		","{","\n			try\n			","{","\n				return","ResourceBundle",".","getBundle","(","bundleName,","locale,","Thread",".","currentThread","(",")",".","getContextClassLoader","(",")",")",".","getString","(","key",")",";","\n			","}","\n			catch","(","MissingResourceException","mrx2",")","\n			","{","\n				return","null",";","\n			","}","\n		","}","\n	"],"docstring_tokens":["Get","the","value","via","a","Java","ResourceBundle"]}
{"code_tokens":["\r\n	@Override\r\n	protected","void","onComponentTag","(","ComponentTag","tag",")","\r\n	","{","\r\n		this",".","checkComponentTag","(","tag,","\"picture\"",")",";","\r\n		super",".","onComponentTag","(","tag",")",";","\r\n	"],"docstring_tokens":["builds","the","component","tag","and","checks","the","tag","to","be","a","picture"]}
{"code_tokens":["\n	private","String","getStringValue","(",")","\n	","{","\n		T","value","=","getModelObject","(",")",";","\n		String","converted","=","value","!=","null","?","getString","(","resourceKey","(","value",")",")",":","nullValue","(",")",";","\n		return","getDefaultModelObjectAsString","(","converted",")",";","\n	"],"docstring_tokens":["Converts","model","object","into","the","display","value"]}
{"code_tokens":["\n	protected","String","resourceKey","(","T","value",")","\n	","{","\n		return","Classes",".","simpleName","(","value",".","getDeclaringClass","(",")",")","+","'",".","'","+","value",".","name","(",")",";","\n	"],"docstring_tokens":["Converts","enum","value","into","a","resource","key","that","should","be","used","to","lookup","the","text","the","label","will	","display"]}
{"code_tokens":["\n	public","synchronized","void","removePage","(","int","pageId",")","\n	","{","\n		int","index","=","getWindowIndex","(","pageId",")",";","\n		if","(","index","!=","-1",")","\n		","{","\n			FileWindow","window","=","windows",".","get","(","index",")",";","\n			removeWindowIndex","(","pageId",")",";","\n			if","(","index","==","windows",".","size","(",")","-","1",")","\n			","{","\n				windows",".","remove","(","index",")",";","\n				totalSize","-=","window",".","filePartSize",";","\n				if","(","indexPointer","==","index",")","\n				","{","\n					--indexPointer",";","\n				","}","\n			","}","\n			else\n			","{","\n				window",".","id","=","-1",";","\n			","}","\n		","}","\n	"],"docstring_tokens":["Removes","the","page","window","for","given","page"]}
{"code_tokens":["\n	public","synchronized","List<FileWindow>","getFileWindows","(",")","\n	","{","\n		List<FileWindow>","result","=","new","ArrayList<>","(",")",";","\n\n		//","start","from","current","index","to","0\n		int","currentIndex","=","indexPointer",";","\n\n		do\n		","{","\n			if","(","currentIndex","==","-1",")","\n			","{","\n				break",";","\n			","}","\n\n			if","(","currentIndex","<","windows",".","size","(",")",")","\n			","{","\n				FileWindow","window","=","windows",".","get","(","currentIndex",")",";","\n				if","(","window",".","id","!=","-1",")","\n				","{","\n					result",".","add","(","window",")",";","\n				","}","\n			","}","\n\n			--currentIndex",";","\n			if","(","currentIndex","==","-1",")","\n			","{","\n				//","rewind","to","the","last","entry","and","collect","all","entries","until","current","index\n				currentIndex","=","windows",".","size","(",")","-","1",";","\n			","}","\n		","}","\n		while","(","currentIndex","!=","indexPointer",")",";","\n\n		return","result",";","\n	"],"docstring_tokens":["Returns","last","n","saved","page","windows"]}
{"code_tokens":["\n	public","synchronized","int","getTotalSize","(",")","\n	","{","\n		return","totalSize",";","\n	"],"docstring_tokens":["Returns","the","size","of","all","saved","pages"]}
{"code_tokens":["\n	private","String","getStatusString","(","long","timeTaken,","String","resourceKey",")","\n	","{","\n		final","HashMap<String,","String>","map","=","new","HashMap<String,","String>","(","4",")",";","\n		map",".","put","(","\"servertime\",","(","(","double",")","timeTaken",")","/","1000","+","\"s\"",")",";","\n		map",".","put","(","\"clienttime\",","\"'","+","(","new","Date","(",")",".","getTime","(",")","-","clientTimeVariable",")","/1000","+","'s\"",")",";","\n\n		return","Application",".","get","(",")","\n			",".","getResourceSettings","(",")","\n			",".","getLocalizer","(",")","\n			",".","getString","(","resourceKey,","null,","Model",".","of","(","map",")",",\n				\"'Server","parsetime:","$","{","servertime","}",",","Client","parsetime:","$","{","clienttime","}","'\"",")",";","\n	"],"docstring_tokens":["Returns","a","locale","specific","status","message","about","the","server","and","client","time"]}
{"code_tokens":["\n	@Override\n	public","void","updateBranch","(","T","node,","IPartialPageRequestHandler","target",")","\n	","{","\n		//","TableTree","always","outputs","markupId\n		target",".","add","(","this",")",";","\n	"],"docstring_tokens":["For","updating","of","a","single","branch","the","whole","table","is","added","to","the","ART"]}
{"code_tokens":["\n	public","boolean","equalTo","(","final","MarkupStream","that",")","\n	","{","\n		//","While","a","has","more","markup","elements\n		while","(","isCurrentIndexInsideTheStream","(",")",")","\n		","{","\n			//","Get","an","element","from","each\n			final","MarkupElement","thisElement","=","this",".","get","(",")",";","\n			final","MarkupElement","thatElement","=","that",".","get","(",")",";","\n\n			//","and","if","the","elements","are","not","equal\n			if","(","thisElement","!=","null","&&","thatElement","!=","null",")","\n			","{","\n				if","(","!thisElement",".","equalTo","(","thatElement",")",")","\n				","{","\n					//","fail","the","comparison\n					return","false",";","\n				","}","\n			","}","\n			else\n			","{","\n				//","If","one","element","is","null,\n				if","(","!","(","thisElement","==","null","&&","thatElement","==","null",")",")","\n				","{","\n					//","fail","the","comparison\n					return","false",";","\n				","}","\n			","}","\n			next","(",")",";","\n			that",".","next","(",")",";","\n		","}","\n\n		//","If","we've","run","out","of","markup","elements","in","b\n		if","(","!that",".","isCurrentIndexInsideTheStream","(",")",")","\n		","{","\n			//","then","the","two","streams","match","perfectly\n			return","true",";","\n		","}","\n\n		//","Stream","b","had","extra","elements\n		return","false",";","\n	"],"docstring_tokens":["Compare","this","markup","stream","with","another","one"]}
{"code_tokens":["\n	public","void","skipUntil","(","final","String","wicketTagName",")","\n	","{","\n		while","(","true",")","\n		","{","\n			if","(","(","current","instanceof","WicketTag",")","&&\n				","(","(","WicketTag",")","current",")",".","getName","(",")",".","equals","(","wicketTagName",")",")","\n			","{","\n				return",";","\n			","}","\n\n			//","go","on","until","we","reach","the","end\n			if","(","next","(",")","==","null",")","\n			","{","\n				return",";","\n			","}","\n		","}","\n	"],"docstring_tokens":["Skips","any","markup","at","the","current","position","until","the","wicket","tag","name","is","found"]}
{"code_tokens":["\n	public","void","skipToMatchingCloseTag","(","final","ComponentTag","openTag",")","\n	","{","\n		//","Loop","through","the","markup","in","this","container\n		while","(","isCurrentIndexInsideTheStream","(",")",")","\n		","{","\n			//","If","the","current","markup","tag","closes","the","openTag\n			if","(","get","(",")",".","closes","(","openTag",")",")","\n			","{","\n				//","Done!\n				return",";","\n			","}","\n\n			//","Skip","element\n			next","(",")",";","\n		","}","\n		throwMarkupException","(","\"Expected","close","tag","for","\"","+","openTag",")",";","\n	"],"docstring_tokens":["Renders","markup","until","a","closing","tag","for","openTag","is","reached"]}
{"code_tokens":["\n	public","final","ComponentTag","getPreviousTag","(",")","\n	","{","\n		MarkupElement","elem","=","get","(","currentIndex","-","1",")",";","\n		if","(","(","elem","instanceof","ComponentTag",")","==","false",")","\n		","{","\n			throwMarkupException","(","\"Tag","expected\"",")",";","\n		","}","\n\n		return","(","ComponentTag",")","elem",";","\n	"],"docstring_tokens":["Sometime","its","necessary","to","get","the","previous","markup","element","versus","the","current","one"]}
{"code_tokens":["\n	public","final","Markup","parse","(",")","throws","IOException,","ResourceStreamNotFoundException\n	","{","\n		//","The","root","of","all","markup","filters","is","the","xml","parser\n		markupFilterChain","=","new","RootMarkupFilter","(","xmlParser,","markup",".","getMarkupResourceStream","(",")",")",";","\n\n		//","Convert","the","list","of","markup","filters","into","a","chain\n		for","(","IMarkupFilter","filter",":","getMarkupFilters","(",")",")","\n		","{","\n			filter",".","setNextFilter","(","markupFilterChain",")",";","\n			markupFilterChain","=","filter",";","\n		","}","\n\n		//","Initialize","the","xml","parser\n		MarkupResourceStream","markupResourceStream","=","markup",".","getMarkupResourceStream","(",")",";","\n		xmlParser",".","parse","(","markupResourceStream",".","getResource","(",")",".","getInputStream","(",")",",\n			markupSettings",".","getDefaultMarkupEncoding","(",")",")",";","\n\n		//","parse","the","xml","markup","and","tokenize","it","into","wicket","relevant","markup\n		//","elements\n		parseMarkup","(",")",";","\n\n		markupResourceStream",".","setEncoding","(","xmlParser",".","getEncoding","(",")",")",";","\n		markupResourceStream",".","setDoctype","(","xmlParser",".","getDoctype","(",")",")",";","\n\n		if","(","xmlParser",".","getEncoding","(",")","==","null",")","\n		","{","\n			String","a","=","\"The","markup","file","does","not","have","a","XML","declaration","prolog","with","'encoding'","attribute\"",";","\n			String","b","=","\"",".","E",".","g",".","<?xml","version=\\\"1",".","0\\\"","encoding=\\\"UTF-8\\\"","?>\"",";","\n\n			if","(","markupSettings",".","getThrowExceptionOnMissingXmlDeclaration","(",")",")","\n			","{","\n				throw","new","MarkupException","(","markupResourceStream",".","getResource","(",")",",","a","+","b",")",";","\n			","}","\n			else\n			","{","\n				log",".","debug","(","a","+","\":\"","+","markupResourceStream",".","getResource","(",")","+","\"",".","It","is","safer","to","use","it\"","+\n					b",")",";","\n			","}","\n		","}","\n\n		return","markup",";","\n	"],"docstring_tokens":["Reads","and","parses","markup","from","a","file"]}
{"code_tokens":["\n	private","MarkupElement","getNextTag","(",")","throws","ParseException\n	","{","\n		return","markupFilterChain",".","nextElement","(",")",";","\n	"],"docstring_tokens":["Get","the","next","tag","from","the","markup","file"]}
{"code_tokens":["\n	private","void","parseMarkup","(",")","\n	","{","\n		try\n		","{","\n			//","always","remember","the","latest","index","(","size",")","\n			int","size","=","markup",".","size","(",")",";","\n\n			//","Loop","through","tags\n			MarkupElement","elem",";","\n			while","(","null","!=","(","elem","=","getNextTag","(",")",")",")","\n			","{","\n				if","(","elem","instanceof","HtmlSpecialTag",")","\n				","{","\n					elem","=","new","ComponentTag","(","(","(","HtmlSpecialTag",")","elem",")",".","getXmlTag","(",")",")",";","\n				","}","\n\n				if","(","elem","instanceof","ComponentTag",")","\n				","{","\n					ComponentTag","tag","=","(","ComponentTag",")","elem",";","\n\n					boolean","add","=","(","tag",".","getId","(",")","!=","null",")",";","\n					if","(","!add","&&","tag",".","isClose","(",")",")","\n					","{","\n						add","=","(","(","tag",".","getOpenTag","(",")","!=","null",")","&&","(","tag",".","getOpenTag","(",")",".","getId","(",")","!=","null",")",")",";","\n					","}","\n\n					//","Add","tag","to","list?\n					if","(","add","||","tag",".","isModified","(",")","||","(","markup",".","size","(",")","!=","size",")",")","\n					","{","\n						//","Add","text","from","last","position","to","the","current","tag","position\n						CharSequence","text","=","xmlParser",".","getInputFromPositionMarker","(","tag",".","getPos","(",")",")",";","\n						if","(","text",".","length","(",")",">","0",")","\n						","{","\n							text","=","handleRawText","(","text",".","toString","(",")",")",";","\n\n							//","Make","sure","you","add","it","at","the","correct","location",".","\n							//","IMarkupFilters","might","have","added","elements","as","well",".","\n							markup",".","addMarkupElement","(","size,","new","RawMarkup","(","text",")",")",";","\n						","}","\n\n						xmlParser",".","setPositionMarker","(",")",";","\n\n						if","(","add",")","\n						","{","\n							//","Add","to","the","markup","unless","the","tag","has","been","flagged","as\n							//","to","be","removed","from","the","markup",".","(","e",".","g",".","<wicket:remove>\n							if","(","tag",".","isIgnore","(",")","==","false",")","\n							","{","\n								markup",".","addMarkupElement","(","tag",")",";","\n							","}","\n						","}","\n						else","if","(","tag",".","isModified","(",")",")","\n						","{","\n							markup",".","addMarkupElement","(","new","RawMarkup","(","tag",".","toCharSequence","(",")",")",")",";","\n						","}","\n						else\n						","{","\n							xmlParser",".","setPositionMarker","(","tag",".","getPos","(",")",")",";","\n						","}","\n					","}","\n\n					//","always","remember","the","latest","index","(","size",")","\n					size","=","markup",".","size","(",")",";","\n				","}","\n			","}","\n		","}","\n		catch","(","final","ParseException","ex",")","\n		","{","\n			//","Add","remaining","input","string\n			final","CharSequence","text","=","xmlParser",".","getInputFromPositionMarker","(","-1",")",";","\n			if","(","text",".","length","(",")",">","0",")","\n			","{","\n				markup",".","addMarkupElement","(","new","RawMarkup","(","text",")",")",";","\n			","}","\n\n			markup",".","getMarkupResourceStream","(",")",".","setEncoding","(","xmlParser",".","getEncoding","(",")",")",";","\n			markup",".","getMarkupResourceStream","(",")",".","setDoctype","(","xmlParser",".","getDoctype","(",")",")",";","\n\n			final","MarkupStream","markupStream","=","new","MarkupStream","(","markup",")",";","\n			markupStream",".","setCurrentIndex","(","markup",".","size","(",")","-","1",")",";","\n			throw","new","MarkupException","(","markupStream,","ex",".","getMessage","(",")",",","ex",")",";","\n		","}","\n\n		//","Add","tail?\n		CharSequence","text","=","xmlParser",".","getInputFromPositionMarker","(","-1",")",";","\n		if","(","text",".","length","(",")",">","0",")","\n		","{","\n			text","=","handleRawText","(","text",".","toString","(",")",")",";","\n\n			//","Make","sure","you","add","it","at","the","correct","location",".","\n			//","IMarkupFilters","might","have","added","elements","as","well",".","\n			markup",".","addMarkupElement","(","new","RawMarkup","(","text",")",")",";","\n		","}","\n\n		postProcess","(","markup",")",";","\n\n		//","Make","all","tags","immutable","and","the","list","of","elements","unmodifiable\n		markup",".","makeImmutable","(",")",";","\n	"],"docstring_tokens":["Scans","the","given","markup","and","extracts","balancing","tags"]}
{"code_tokens":["\n	protected","String","compressWhitespace","(","String","rawMarkup",")","\n	","{","\n		//","We","don't","want","to","compress","whitespace","inside","<pre>","tags,","so","we","look\n		//","for","matches","and:\n		//","-","Do","whitespace","compression","on","everything","before","the","first","match",".","\n		//","-","Append","the","<pre>",".","*?</pre>","match","with","no","compression",".","\n		//","-","Loop","to","find","the","next","match",".","\n		//","-","Append","with","compression","everything","between","the","two","matches",".","\n		//","-","Repeat","until","no","match,","then","special-case","the","fragment","after","the\n		//","last","<pre>",".","\n		Matcher","m","=","PRE_BLOCK",".","matcher","(","rawMarkup",")",";","\n		int","lastend","=","0",";","\n		StringBuilder","sb","=","null",";","\n		while","(","true",")","\n		","{","\n			boolean","matched","=","m",".","find","(",")",";","\n			String","nonPre","=","matched","?","rawMarkup",".","substring","(","lastend,","m",".","start","(",")",")","\n				:","rawMarkup",".","substring","(","lastend",")",";","\n			nonPre","=","SPACE_OR_TAB_PATTERN",".","matcher","(","nonPre",")",".","replaceAll","(","\"","\"",")",";","\n			nonPre","=","NEW_LINE_PATTERN",".","matcher","(","nonPre",")",".","replaceAll","(","\"\\n\"",")",";","\n\n			//","Don't","create","a","StringBuilder","if","we","don't","actually","need","one",".","\n			//","This","optimizes","the","trivial","common","case","where","there","is","no","<pre>\n			//","tag","at","all","down","to","just","doing","the","replaceAlls","above",".","\n			if","(","lastend","==","0",")","\n			","{","\n				if","(","matched",")","\n				","{","\n					sb","=","new","StringBuilder","(","rawMarkup",".","length","(",")",")",";","\n				","}","\n				else\n				","{","\n					return","nonPre",";","\n				","}","\n			","}","\n			sb",".","append","(","nonPre",")",";","\n			if","(","matched",")","\n			","{","\n				sb",".","append","(","m",".","group","(",")",")",";","\n				lastend","=","m",".","end","(",")",";","\n			","}","\n			else\n			","{","\n				break",";","\n			","}","\n		","}","\n		return","sb",".","toString","(",")",";","\n	"],"docstring_tokens":["Remove","whitespace","from","the","raw","markup"]}
{"code_tokens":["\n	protected","boolean","isClickable","(",")","\n	","{","\n		return","false",";","\n	"],"docstring_tokens":["Clicking","is","disabled","by","default,","override","this","method","if","you","want","your","link","to","be","enabled"]}
{"code_tokens":["\n	protected","void","onClick","(","Optional<AjaxRequestTarget>","target",")","\n	","{","\n	"],"docstring_tokens":["Hook","method","to","be","notified","of","a","click","on","the","link"]}
{"code_tokens":["\n	public","final","void","debug","(","Component","reporter,","Serializable","message",")","\n	","{","\n		add","(","new","FeedbackMessage","(","reporter,","message,","FeedbackMessage",".","DEBUG",")",")",";","\n	"],"docstring_tokens":["Adds","a","new","ui","message","with","level","DEBUG","to","the","current","messages"]}
{"code_tokens":["\n	public","final","void","info","(","Component","reporter,","Serializable","message",")","\n	","{","\n		add","(","new","FeedbackMessage","(","reporter,","message,","FeedbackMessage",".","INFO",")",")",";","\n	"],"docstring_tokens":["Adds","a","new","ui","message","with","level","INFO","to","the","current","messages"]}
{"code_tokens":["\n	public","final","void","success","(","Component","reporter,","Serializable","message",")","\n	","{","\n		add","(","new","FeedbackMessage","(","reporter,","message,","FeedbackMessage",".","SUCCESS",")",")",";","\n	"],"docstring_tokens":["Adds","a","new","ui","message","with","level","SUCCESS","to","the","current","messages"]}
{"code_tokens":["\n	public","final","void","warn","(","Component","reporter,","Serializable","message",")","\n	","{","\n		add","(","new","FeedbackMessage","(","reporter,","message,","FeedbackMessage",".","WARNING",")",")",";","\n	"],"docstring_tokens":["Adds","a","new","ui","message","with","level","WARNING","to","the","current","messages"]}
{"code_tokens":["\n	public","final","void","error","(","Component","reporter,","Serializable","message",")","\n	","{","\n		add","(","new","FeedbackMessage","(","reporter,","message,","FeedbackMessage",".","ERROR",")",")",";","\n	"],"docstring_tokens":["Adds","a","new","ui","message","with","level","ERROR","to","the","current","messages"]}
{"code_tokens":["\n	public","final","void","fatal","(","Component","reporter,","Serializable","message",")","\n	","{","\n		add","(","new","FeedbackMessage","(","reporter,","message,","FeedbackMessage",".","FATAL",")",")",";","\n	"],"docstring_tokens":["Adds","a","new","ui","message","with","level","FATAL","to","the","current","messages"]}
{"code_tokens":["\n	public","final","FeedbackMessage","first","(",")","\n	","{","\n		return","messages",".","size","(",")",">","0","?","messages",".","get","(","0",")",":","null",";","\n	"],"docstring_tokens":["Retrieves","the","first","message"]}
{"code_tokens":["\n	public","final","FeedbackMessage","first","(","final","int","level",")","\n	","{","\n		for","(","FeedbackMessage","message",":","messages",")","\n		","{","\n			if","(","message",".","isLevel","(","level",")",")","\n			","{","\n				return","message",";","\n			","}","\n		","}","\n		return","null",";","\n	"],"docstring_tokens":["Retrieves","the","first","message","that","level","is","greater","than","or","equal","to","the","given","level"]}
{"code_tokens":["\n	public","final","int","size","(",")","\n	","{","\n		return","messages",".","size","(",")",";","\n	"],"docstring_tokens":["Gets","the","number","of","messages"]}
{"code_tokens":["\r\n	@Override\r\n	public","String","toString","(",")","\r\n	","{","\r\n		return","toTimeString","(",")",";","\r\n	"],"docstring_tokens":["Converts","this","Time","to","a","String","suitable","for","use","in","a","file","system","	","name"]}
{"code_tokens":["\r\n	public","final","boolean","greaterThan","(","final","int","value",")","\r\n	","{","\r\n		return","this",".","value",">","value",";","\r\n	"],"docstring_tokens":["Compares","this","IntValue","with","a","primitive","int","value"]}
{"code_tokens":["\r\n	public","final","boolean","greaterThan","(","final","IntValue","that",")","\r\n	","{","\r\n		return","value",">","that",".","value",";","\r\n	"],"docstring_tokens":["Compares","this","IntValue","with","another","IntValue"]}
{"code_tokens":["\n	@Override\n	public","void","setObject","(","T","object",")","\n	","{","\n		if","(","!","(","object","instanceof","Serializable",")",")","\n		","{","\n			object","=","createSerializableVersionOf","(","object",")",";","\n		","}","\n		this",".","object","=","object",";","\n	"],"docstring_tokens":["Set","the","model","object"]}
{"code_tokens":["\r\n	public","T","put","(","final","Class<?>","key,","final","T","value",")","\r\n	","{","\r\n		ConcurrentHashMap<String,","T>","container","=","getClassLoaderCache","(","key",".","getClassLoader","(",")",",","true",")",";","\r\n		return","container",".","put","(","key","(","key",")",",","value",")",";","\r\n	"],"docstring_tokens":["Puts","value","into","cache"]}
{"code_tokens":["\r\n	public","T","get","(","final","Class<?>","key",")","\r\n	","{","\r\n		ConcurrentHashMap<String,","T>","container","=","getClassLoaderCache","(","key",".","getClassLoader","(",")",",","false",")",";","\r\n		if","(","container","==","null",")","\r\n		","{","\r\n			return","null",";","\r\n		","}","\r\n		else\r\n		","{","\r\n			return","container",".","get","(","key","(","key",")",")",";","\r\n		","}","\r\n	"],"docstring_tokens":["Gets","value","from","cache","or","returns","null","if","not","in","cache"]}
{"code_tokens":["\r\n	private","static","String","key","(","final","Class<?>","clazz",")","\r\n	","{","\r\n		return","clazz",".","getName","(",")",";","\r\n	"],"docstring_tokens":["converts","class","into","a","key","used","by","the","cache"]}
{"code_tokens":["\n	public","float","getFloat","(","final","Matcher","matcher,","final","float","defaultValue",")","\n	","{","\n		final","String","value","=","get","(","matcher",")",";","\n		return","value","==","null","?","defaultValue",":","Float",".","parseFloat","(","value",")",";","\n	"],"docstring_tokens":["Gets","float","by","parsing","the","String","matched","by","this","capturing","group"]}
{"code_tokens":["\n	public","double","getDouble","(","final","Matcher","matcher,","final","double","defaultValue",")","\n	","{","\n		final","String","value","=","get","(","matcher",")",";","\n		return","value","==","null","?","defaultValue",":","Double",".","parseDouble","(","value",")",";","\n	"],"docstring_tokens":["Gets","double","by","parsing","the","String","matched","by","this","capturing","group"]}
{"code_tokens":["\n	public","synchronized","void","addDelta","(","final","Delta","delta",")","\n	","{","\n		if","(","delta","==","null",")","\n		","{","\n			throw","new","IllegalArgumentException","(","\"new","delta","is","null\"",")",";","\n		","}","\n		deltas_",".","add","(","delta",")",";","\n	"],"docstring_tokens":["Adds","a","delta","to","this","revision"]}
{"code_tokens":["\n	public","synchronized","void","insertDelta","(","final","Delta","delta",")","\n	","{","\n		if","(","delta","==","null",")","\n		","{","\n			throw","new","IllegalArgumentException","(","\"new","delta","is","null\"",")",";","\n		","}","\n		deltas_",".","add","(","0,","delta",")",";","\n	"],"docstring_tokens":["Adds","a","delta","to","the","start","of","this","revision"]}
{"code_tokens":["\n	public","Delta","getDelta","(","final","int","i",")","\n	","{","\n		return","deltas_",".","get","(","i",")",";","\n	"],"docstring_tokens":["Retrieves","a","delta","from","this","revision","by","position"]}
{"code_tokens":["\n	public","int","size","(",")","\n	","{","\n		return","deltas_",".","size","(",")",";","\n	"],"docstring_tokens":["Returns","the","number","of","deltas","in","this","revision"]}
{"code_tokens":["\n	public","Object[]","patch","(","final","Object[]","src",")","throws","PatchFailedException\n	","{","\n		List<Object>","target","=","new","ArrayList<>","(","Arrays",".","asList","(","src",")",")",";","\n		applyTo","(","target",")",";","\n		return","target",".","toArray","(",")",";","\n	"],"docstring_tokens":["Applies","the","series","of","deltas","in","this","revision","as","patches","to","the","given","text"]}
{"code_tokens":["\n	@Override\n	public","synchronized","void","toString","(","final","StringBuilder","s",")","\n	","{","\n		for","(","Delta","delta",":","deltas_",")","\n		","{","\n			delta",".","toString","(","s",")",";","\n		","}","\n	"],"docstring_tokens":["Converts","this","revision","into","its","Unix","diff","style","string","representation"]}
{"code_tokens":["\n	public","synchronized","void","toRCSString","(","final","StringBuilder","s,","final","String","EOL",")","\n	","{","\n		for","(","Delta","deltas",":","deltas_",")","\n		","{","\n			deltas",".","toRCSString","(","s,","EOL",")",";","\n		","}","\n	"],"docstring_tokens":["Converts","this","revision","into","its","RCS","style","string","representation"]}
{"code_tokens":["\n	@Override\n	protected","void","onDetach","(",")","\n	","{","\n		if","(","resetPassword",")","{","\n			clearInput","(",")",";","\n\n			if","(","getModel","(",")","!=","null",")","{","\n				getModel","(",")",".","setObject","(","null",")",";","\n			","}","\n		","}","\n\n		super",".","onDetach","(",")",";","\n	"],"docstring_tokens":["Overridden","to","nullify","the","password"]}
{"code_tokens":["\n	private","StreamData","getData","(","boolean","initialize",")","\n	","{","\n		if","(","streamData","==","null","&&","initialize",")","\n		","{","\n			streamData","=","new","StreamData","(",")",";","\n\n			try\n			","{","\n				streamData",".","connection","=","url",".","openConnection","(",")",";","\n				streamData",".","contentLength","=","streamData",".","connection",".","getContentLength","(",")",";","\n\n				//","Default","implementation","\"sun",".","net",".","www",".","MimeTable\"","works","on","strings","with","\"/\"","only","and\n				//","doesn't","properly","parse","paths","nor","URLs",".","So","providing","an","absolute","URI","is","compatible\n				//","with","the","default","implementation,","while","the","string","can't","be","misinterpreted","as","path\n				//","like","has","been","the","case","with","\"URL",".","getFile\"","before",".","That","doesn't","decode","to","paths,\n				//","results","only","look","similar","sometimes",".","\n				String","uriStr","=","url",".","toURI","(",")",".","toString","(",")",";","\n\n				if","(","Application",".","exists","(",")",")","\n				","{","\n					streamData",".","contentType","=","Application",".","get","(",")",".","getMimeType","(","uriStr",")",";","\n				","}","\n				else\n				","{","\n					streamData",".","contentType","=","streamData",".","connection",".","getContentType","(",")",";","\n				","}","\n\n				if","(","streamData",".","contentType","==","null","||","streamData",".","contentType",".","contains","(","\"unknown\"",")",")","\n				","{","\n					streamData",".","contentType","=","URLConnection",".","getFileNameMap","(",")",".","getContentTypeFor","(","\n						uriStr",")",";","\n				","}","\n			","}","\n			catch","(","IOException","|","URISyntaxException","ex",")","\n			","{","\n				throw","new","IllegalArgumentException","(","\"Invalid","URL","parameter","\"","+","url,","ex",")",";","\n			","}","\n		","}","\n\n		return","streamData",";","\n	"],"docstring_tokens":["Lazy","loads","the","stream","settings","on","demand"]}
{"code_tokens":["\n	@Around","(","\"execution","(","org",".","apache",".","wicket",".","Component",".","new","(",".",".",")",")","\"",")","\n	public","Object","aroundNew","(","ProceedingJoinPoint","joinPoint",")","throws","Throwable\n	","{","\n		return","measureTime","(","\"core/component/create\",","joinPoint",")",";","\n	"],"docstring_tokens":["Collects","data","how","often","components","are","created"]}
{"code_tokens":["\n	private","ResourceReference","_getResourceReference","(","final","String","scope,","final","String","name,\n		final","Locale","locale,","final","String","style,","final","String","variation,","final","boolean","strict",")","\n	","{","\n		//","Create","a","registry","key","containing","all","of","the","relevant","attributes\n		Key","key","=","new","Key","(","scope,","name,","locale,","style,","variation",")",";","\n\n		//","Get","resource","reference","matching","exactly","the","attrs","provided\n		ResourceReference","res","=","map",".","get","(","key",")",";","\n		if","(","(","res","!=","null",")","||","strict",")","\n		","{","\n			return","res",";","\n		","}","\n\n		res","=","_getResourceReference","(","scope,","name,","locale,","style,","null,","true",")",";","\n		if","(","res","==","null",")","\n		","{","\n			res","=","_getResourceReference","(","scope,","name,","locale,","null,","variation,","true",")",";","\n		","}","\n		if","(","res","==","null",")","\n		","{","\n			res","=","_getResourceReference","(","scope,","name,","locale,","null,","null,","true",")",";","\n		","}","\n		if","(","res","==","null",")","\n		","{","\n			res","=","_getResourceReference","(","scope,","name,","null,","style,","variation,","true",")",";","\n		","}","\n		if","(","res","==","null",")","\n		","{","\n			res","=","_getResourceReference","(","scope,","name,","null,","style,","null,","true",")",";","\n		","}","\n		if","(","res","==","null",")","\n		","{","\n			res","=","_getResourceReference","(","scope,","name,","null,","null,","variation,","true",")",";","\n		","}","\n		if","(","res","==","null",")","\n		","{","\n			res","=","_getResourceReference","(","scope,","name,","null,","null,","null,","true",")",";","\n		","}","\n		return","res",";","\n	"],"docstring_tokens":["Get","a","resource","reference","matching","the","parameters","from","the","registry"]}
{"code_tokens":["\n	private","ResourceReference","addDefaultResourceReference","(","final","Key","key",")","\n	","{","\n		//","Can","be","subclassed","to","create","other","than","PackagedResourceReference\n		ResourceReference","reference","=","createDefaultResourceReference","(","key",")",";","\n\n		if","(","reference","!=","null",")","\n		","{","\n			//","number","of","RRs","which","can","be","auto-added","is","restricted","(","cache","size",")",".","Remove","entries,","and\n			//","unregister","excessive","ones,","if","needed",".","\n			enforceAutoAddedCacheSize","(","getAutoAddedCapacity","(",")",")",";","\n\n			//","Register","the","new","RR\n			_registerResourceReference","(","reference",")",";","\n\n			//","Add","it","to","the","auto-added","list\n			if","(","autoAddedQueue","!=","null",")","\n			","{","\n				autoAddedQueue",".","add","(","key",")",";","\n			","}","\n		","}","\n		else\n		","{","\n			log",".","warn","(","\"A","ResourceReference","wont","be","created","for","a","resource","with","key","[","{","}","]","because","it","cannot","be","located",".","\",","key",")",";","\n		","}","\n		return","reference",";","\n	"],"docstring_tokens":["Creates","a","default","resource","reference","and","registers","it"]}
{"code_tokens":["\n	protected","ResourceReference","createDefaultResourceReference","(","final","Key","key",")","\n	","{","\n		IResourceReferenceFactory","factory","=","getResourceReferenceFactory","(",")",";","\n		if","(","factory","==","null",")","\n		","{","\n			factory","=","new","DefaultResourceReferenceFactory","(",")",";","\n		","}","\n		return","factory",".","create","(","key",")",";","\n	"],"docstring_tokens":["Creates","a","default","resource","reference","in","case","no","registry","entry","and","it","was","requested","to","create	","one.	","	","A","PackageResourceReference","will","be","created","by","default"]}
{"code_tokens":["\n	public","final","void","setAutoAddedCapacity","(","final","int","autoAddedCapacity",")","\n	","{","\n		//","Disable","aging","of","auto-added","references?\n		if","(","autoAddedCapacity","<","0",")","\n		","{","\n			//","unregister","all","auto-added","references\n			clearAutoAddedEntries","(",")",";","\n\n			//","disable","aging","from","now","on\n			autoAddedQueue","=","null",";","\n		","}","\n		else\n		","{","\n			this",".","autoAddedCapacity","=","autoAddedCapacity",";","\n\n			if","(","autoAddedQueue","==","null",")","\n			","{","\n				autoAddedQueue","=","new","ConcurrentLinkedQueue<Key>","(",")",";","\n			","}","\n			else\n			","{","\n				//","remove","all","extra","entries","if","necessary\n				enforceAutoAddedCacheSize","(","autoAddedCapacity",")",";","\n			","}","\n		","}","\n	"],"docstring_tokens":["Set","the","cache","size","in","number","of","entries"]}
{"code_tokens":["\n	public","final","void","clearAutoAddedEntries","(",")","\n	","{","\n		enforceAutoAddedCacheSize","(","0",")",";","\n	"],"docstring_tokens":["Unregisters","all","auto-added","Resource","References"]}
{"code_tokens":["\n	public","void","setResourceReferenceFactory","(","IResourceReferenceFactory","resourceReferenceFactory",")","\n	","{","\n		this",".","resourceReferenceFactory","=","resourceReferenceFactory",";","\n	"],"docstring_tokens":["Sets","the","factory","to","use","when","a","ResourceReference","is","not","previously	","registered","and","a","new","instance","should","be","created"]}
{"code_tokens":["\n	@Override\n	public","boolean","supportsVersioning","(",")","\n	","{","\n		return","true",";","\n	"],"docstring_tokens":["Pages","are","already","serialized"]}
{"code_tokens":["\n	public","Bookmark","save","(",")","\n	","{","\n		return","new","Bookmark","(","this",")",";","\n	"],"docstring_tokens":["Saves","the","state","of","the","context","into","a","bookmark","which","can","later","be","used","to","restore","it"]}
{"code_tokens":["\n	public","void","restore","(","Bookmark","bookmark",")","\n	","{","\n		bookmark",".","restore","(","this",")",";","\n	"],"docstring_tokens":["Restores","the","state","of","the","context","from","the","bookmark"]}
{"code_tokens":["\n	public","ComponentTag","takeTag","(",")","\n	","{","\n		ComponentTag","taken","=","next",";","\n\n		if","(","taken","==","null",")","\n		","{","\n			return","null",";","\n		","}","\n\n		if","(","taken",".","isOpen","(",")","&&","!taken",".","hasNoCloseTag","(",")",")","\n		","{","\n			tags",".","push","(","taken",")",";","\n		","}","\n		else","if","(","tags",".","size","(",")",">","0","&&","taken",".","closes","(","tags",".","peek","(",")",")",")","\n		","{","\n			tags",".","pop","(",")",";","\n		","}","\n		next","=","nextTag","(",")",";","\n		return","taken",";","\n	"],"docstring_tokens":["Retrieves","the","next","markup","tag"]}
{"code_tokens":["\n	public","void","generate","(","Collection<Contact>","collection,","int","count",")","\n	","{","\n		for","(","int","i","=","0",";","i","<","count",";","i++",")","\n		","{","\n			collection",".","add","(","generate","(",")",")",";","\n		","}","\n	"],"docstring_tokens":["generats","count","number","contacts","and","puts","them","into","collection	","collection"]}
{"code_tokens":["\n	public","DebugSettings","setComponentUseCheck","(","final","boolean","componentUseCheck",")","\n	","{","\n		this",".","componentUseCheck","=","componentUseCheck",";","\n		return","this",";","\n	"],"docstring_tokens":["Sets","componentUseCheck","debug","settings"]}
{"code_tokens":["\n	@Around","(","\"execution","(","*","org",".","apache",".","wicket",".","Component",".","onInitialize","(",".",".",")",")","\"",")","\n	public","Object","aroundOnInitialize","(","ProceedingJoinPoint","joinPoint",")","throws","Throwable\n	","{","\n		return","measureTime","(","\"core/component/initialize\",","joinPoint",")",";","\n	"],"docstring_tokens":["Collects","data","how","often","components","calls","onInitialize"]}
{"code_tokens":["\n	@Override\n	public","IRequestHandler","getDelegateHandler","(",")","\n	","{","\n		return","delegate",";","\n	"],"docstring_tokens":["Returns","the","request","handler","to","which","responding","will","be","delegated"]}
{"code_tokens":["\n	protected","IItemFactory<T>","newItemFactory","(",")","\n	","{","\n		return","new","IItemFactory<T>","(",")","\n		","{","\n			@Override\n			public","Item<T>","newItem","(","int","index,","IModel<T>","model",")","\n			","{","\n				String","id","=","RefreshingView",".","this",".","newChildId","(",")",";","\n				Item<T>","item","=","RefreshingView",".","this",".","newItem","(","id,","index,","model",")",";","\n				RefreshingView",".","this",".","populateItem","(","item",")",";","\n				return","item",";","\n			","}","\n		","}",";","\n	"],"docstring_tokens":["Create","a","new","IItemFactory","based","upon","the","RefreshingView"]}
{"code_tokens":["\n	protected","void","addItems","(","Iterator<Item<T>>","items",")","\n	","{","\n		int","index","=","0",";","\n		while","(","items",".","hasNext","(",")",")","\n		","{","\n			Item<T>","item","=","items",".","next","(",")",";","\n			item",".","setIndex","(","index",")",";","\n			add","(","item",")",";","\n			++index",";","\n		","}","\n	"],"docstring_tokens":["Add","items","to","the","view"]}
{"code_tokens":["\n	@SuppressWarnings","(","\"rawtypes\"",")","\n	public","static","VelocityPanel","forTemplateResource","(","final","String","id,\n		final","IModel<?","extends","Map>","model,","final","IResourceStream","templateResource",")","\n	","{","\n		if","(","templateResource","==","null",")","\n		","{","\n			throw","new","IllegalArgumentException","(","\"argument","templateResource","must","be","not","null\"",")",";","\n		","}","\n\n		return","new","VelocityPanel","(","id,","model",")","\n		","{","\n			private","static","final","long","serialVersionUID","=","1L",";","\n\n			@Override\n			protected","IResourceStream","getTemplateResource","(",")","\n			","{","\n				return","templateResource",";","\n			","}","\n		","}",";","\n	"],"docstring_tokens":["Convenience","factory","method","to","create","a","VelocityPanel","instance","with","a","given	","IStringResourceStream","template","resource"]}
{"code_tokens":["\n	private","Reader","getTemplateReader","(",")","\n	","{","\n		final","IResourceStream","resource","=","getTemplateResource","(",")",";","\n		if","(","resource","==","null",")","\n		","{","\n			throw","new","IllegalArgumentException","(","\"getTemplateResource","must","return","a","resource\"",")",";","\n		","}","\n\n		final","String","template","=","ResourceUtil",".","readString","(","resource",")",";","\n		if","(","template","!=","null",")","\n		","{","\n			return","new","StringReader","(","template",")",";","\n		","}","\n\n		return","null",";","\n	"],"docstring_tokens":["Gets","a","reader","for","the","velocity","template"]}
{"code_tokens":["\n	protected","final","void","onConnect","(","final","IWebSocketConnection","connection",")","{","\n		IKey","key","=","getRegistryKey","(",")",";","\n		connectionRegistry",".","setConnection","(","getApplication","(",")",",","getSessionId","(",")",",","key,","connection",")",";","\n\n		if","(","connectionFilter","!=","null",")","\n		","{","\n			ConnectionRejected","connectionRejected","=","connectionFilter",".","doFilter","(","servletRequest",")",";","\n			if","(","connectionRejected","!=","null",")","\n			","{","\n				broadcastMessage","(","new","AbortedMessage","(","getApplication","(",")",",","getSessionId","(",")",",","key",")",")",";","\n				connectionRegistry",".","removeConnection","(","getApplication","(",")",",","getSessionId","(",")",",","key",")",";","\n				connection",".","close","(","connectionRejected",".","getCode","(",")",",","connectionRejected",".","getReason","(",")",")",";","\n				return",";","\n			","}","\n		","}","\n\n		broadcastMessage","(","new","ConnectedMessage","(","getApplication","(",")",",","getSessionId","(",")",",","key",")",",","connection,","webSocketSettings",".","isAsynchronousPush","(",")",",","webSocketSettings",".","getAsynchronousPushTimeout","(",")",")",";","\n	"],"docstring_tokens":["A","helper","that","registers","the","opened","connection","in","the","application-level","registry"]}
{"code_tokens":["\r\n	public","static","Component","resolveByApplication","(","final","MarkupContainer","container,\r\n		final","MarkupStream","markupStream,","final","ComponentTag","tag,","final","ResolverFilter","filter",")","\r\n	","{","\r\n		for","(","final","IComponentResolver","resolver",":","Application",".","get","(",")","\r\n			",".","getPageSettings","(",")","\r\n			",".","getComponentResolvers","(",")",")","\r\n		","{","\r\n			if","(","(","filter","==","null",")","||","(","filter",".","ignoreResolver","(","resolver",")","==","false",")",")","\r\n			","{","\r\n				Component","component","=","resolver",".","resolve","(","container,","markupStream,","tag",")",";","\r\n				if","(","component","!=","null",")","\r\n				","{","\r\n					return","component",";","\r\n				","}","\r\n			","}","\r\n		","}","\r\n\r\n		return","null",";","\r\n	"],"docstring_tokens":["Attempts","to","resolve","a","component","via","application","registered","resolvers"]}
{"code_tokens":["\n	protected","ZoneId","getTargetTimeZone","(",")","\n	","{","\n		return","ZoneId",".","systemDefault","(",")",";","\n	"],"docstring_tokens":["What","is","the","ZoneId","of","created","ZonedDateTime","objects"]}
{"code_tokens":["\n	public","static","void","encodeResourceReferenceAttributes","(","Url","url,","ResourceReference","reference",")","\n	","{","\n		Args",".","notNull","(","url,","\"url\"",")",";","\n		Args",".","notNull","(","reference,","\"reference\"",")",";","\n\n		String","encoded","=","encodeResourceReferenceAttributes","(","reference",".","getUrlAttributes","(",")",")",";","\n		if","(","!Strings",".","isEmpty","(","encoded",")",")","\n		","{","\n			url",".","getQueryParameters","(",")",".","add","(","new","Url",".","QueryParameter","(","encoded,","\"\"",")",")",";","\n		","}","\n	"],"docstring_tokens":["Encodes","the","attributes","of","the","given","resource","reference","in","the","specified","url"]}
{"code_tokens":["\n	public","static","String","readString","(","IResourceStream","resourceStream",")","\n	","{","\n		return","readString","(","resourceStream,","null",")",";","\n	"],"docstring_tokens":["read","string","with","platform","default","encoding","from","resource","stream"]}
{"code_tokens":["\n	public","static","String","readString","(","IResourceStream","resourceStream,","Charset","charset",")","\n	","{","\n		try\n		","{","\n			InputStream","stream","=","resourceStream",".","getInputStream","(",")",";","\n\n			try\n			","{","\n				byte[]","bytes","=","IOUtils",".","toByteArray","(","stream",")",";","\n\n				if","(","charset","==","null",")","\n","{","\n					charset","=","Charset",".","defaultCharset","(",")",";","\n","}","\n\n				return","new","String","(","bytes,","charset",".","name","(",")",")",";","\n			","}","\n			finally\n			","{","\n				resourceStream",".","close","(",")",";","\n			","}","\n		","}","\n		catch","(","IOException","e",")","\n		","{","\n			throw","new","WicketRuntimeException","(","\"failed","to","read","string","from","\"","+","resourceStream,","e",")",";","\n		","}","\n		catch","(","ResourceStreamNotFoundException","e",")","\n		","{","\n			throw","new","WicketRuntimeException","(","\"failed","to","locate","stream","from","\"","+","resourceStream,","e",")",";","\n		","}","\n	"],"docstring_tokens":["read","string","with","specified","encoding","from","resource","stream"]}
{"code_tokens":["\n	@Override\n	public","ICrypt","newCrypt","(",")","\n	","{","\n		Session","session","=","Session",".","get","(",")",";","\n		session",".","bind","(",")",";","\n\n		//","retrieve","or","generate","encryption","key","from","session\n		T","key","=","session",".","getMetaData","(","KEY",")",";","\n		if","(","key","==","null",")","\n		","{","\n			//","generate","new","key\n			key","=","generateKey","(","session",")",";","\n			session",".","setMetaData","(","KEY,","key",")",";","\n		","}","\n\n		//","build","the","crypt","based","on","session","key\n		ICrypt","crypt","=","createCrypt","(","key",")",";","\n		return","crypt",";","\n	"],"docstring_tokens":["Creates","a","new","crypt","for","the","current","user","session"]}
{"code_tokens":["\r\n	public","final","String","join","(","final","String","separator",")","\r\n	","{","\r\n		return","join","(","0,","size","(",")",",","separator",")",";","\r\n	"],"docstring_tokens":["Joins","this","sequence","of","strings","using","a","separator"]}
{"code_tokens":["\r\n	public","final","String","join","(","final","int","first,","final","int","last,","final","String","separator",")","\r\n	","{","\r\n		//","Allocate","buffer","of","exactly","the","right","length\r\n		final","int","length","=","totalLength","(",")","+","(","separator",".","length","(",")","*","(","Math",".","max","(","0,","last","-","first","-","1",")",")",")",";","\r\n		final","AppendingStringBuffer","buf","=","new","AppendingStringBuffer","(","length",")",";","\r\n\r\n		//","Loop","through","indexes","requested\r\n		for","(","int","i","=","first",";","i","<","last",";","i++",")","\r\n		","{","\r\n			//","Add","next","string\r\n			buf",".","append","(","get","(","i",")",")",";","\r\n\r\n			//","Add","separator?\r\n			if","(","i","!=","(","last","-","1",")",")","\r\n			","{","\r\n				buf",".","append","(","separator",")",";","\r\n			","}","\r\n		","}","\r\n\r\n		return","buf",".","toString","(",")",";","\r\n	"],"docstring_tokens":["Joins","this","sequence","of","strings","from","first","index","to","last","using","a","separator"]}
{"code_tokens":["\r\n	@Override\r\n	public","String","process","(","String","input,","Class<?>","scope,","String","name",")","\r\n	","{","\r\n		//","filter","out","the","excluded","css","files\r\n		for","(","String","excludeName",":","excludes",")","\r\n		","{","\r\n			if","(","name",".","endsWith","(","excludeName",")",")","{","\r\n				return","input",";","\r\n			","}","\r\n		","}","\r\n		RequestCycle","cycle","=","RequestCycle",".","get","(",")",";","\r\n		Url","cssUrl","=","Url",".","parse","(","name",")",";","\r\n		Matcher","matcher","=","URL_PATTERN",".","matcher","(","input",")",";","\r\n		StringBuffer","output","=","new","StringBuffer","(",")",";","\r\n\r\n		while","(","matcher",".","find","(",")",")","\r\n		","{","\r\n			Url","imageCandidateUrl","=","Url",".","parse","(","matcher",".","group","(","1",")",")",";","\r\n			CharSequence","processedUrl",";","\r\n			boolean","embedded","=","false",";","\r\n\r\n			if","(","imageCandidateUrl",".","isFull","(",")",")","\r\n			","{","\r\n				processedUrl","=","imageCandidateUrl",".","toString","(","Url",".","StringMode",".","FULL",")",";","\r\n			","}","\r\n			else","if","(","imageCandidateUrl",".","isContextAbsolute","(",")",")","\r\n			","{","\r\n				processedUrl","=","imageCandidateUrl",".","toString","(",")",";","\r\n			","}","\r\n			else","if","(","imageCandidateUrl",".","isDataUrl","(",")",")","\r\n			","{","\r\n				embedded","=","true",";","\r\n				processedUrl","=","imageCandidateUrl",".","toString","(",")",";","\r\n			","}","\r\n			else\r\n			","{","\r\n				//","relativize","against","the","url","for","the","containing","CSS","file\r\n				Url","cssUrlCopy","=","new","Url","(","cssUrl",")",";","\r\n				cssUrlCopy",".","resolveRelative","(","imageCandidateUrl",")",";","\r\n\r\n				//","if","the","image","should","be","processed","as","URL","or","base64","embedded\r\n				if","(","cssUrlCopy",".","getQueryString","(",")","!=","null\r\n					&&","cssUrlCopy",".","getQueryString","(",")",".","contains","(","EMBED_BASE64",")",")","\r\n				","{","\r\n					embedded","=","true",";","\r\n					PackageResourceReference","imageReference","=","new","PackageResourceReference","(","scope,\r\n						cssUrlCopy",".","toString","(",")",".","replace","(","\"?\"","+","EMBED_BASE64,","\"\"",")",")",";","\r\n					try\r\n					","{","\r\n						processedUrl","=","ImageUtil",".","createBase64EncodedImage","(","imageReference,","true",")",";","\r\n					","}","\r\n					catch","(","Exception","e",")","\r\n					","{","\r\n						throw","new","WicketRuntimeException","(","\r\n							\"Error","while","embedding","an","image","into","the","css:","\"","+","imageReference,","e",")",";","\r\n					","}","\r\n				","}","\r\n				else\r\n				","{","\r\n					PackageResourceReference","imageReference","=","new","PackageResourceReference","(","scope,\r\n						cssUrlCopy",".","toString","(",")",")",";","\r\n					processedUrl","=","cycle",".","urlFor","(","imageReference,","null",")",";","\r\n				","}","\r\n\r\n			","}","\r\n\r\n			//","embedded","data","urls","don't","need","single","quotes,","but","regular","urls","do:\r\n			matcher",".","appendReplacement","(","output,\r\n				embedded","?","\"url","(","\"","+","processedUrl","+","\"",")","\"",":","\"url","(","'\"","+","processedUrl","+","\"'",")","\"",")",";","\r\n		","}","\r\n		matcher",".","appendTail","(","output",")",";","\r\n		return","output",".","toString","(",")",";","\r\n	"],"docstring_tokens":["Replaces","the","URLs","of","CSS","resources","with","Wicket","representatives"]}
{"code_tokens":["\r\n	public","Collection<String>","getExcludes","(",")","\r\n	","{","\r\n		return","excludes",";","\r\n	"],"docstring_tokens":["Gets","excluded","css","file","names"]}
{"code_tokens":["\r\n	public","void","setExcludes","(","Collection<String>","excludes",")","\r\n	","{","\r\n		this",".","excludes",".","clear","(",")",";","\r\n		this",".","excludes",".","addAll","(","excludes",")",";","\r\n	"],"docstring_tokens":["Sets","a","list","of","css","file","names","to","be","excluded"]}
{"code_tokens":["\n	public","static","EmailAddressValidator","getInstance","(",")","\n	","{","\n		return","INSTANCE",";","\n	"],"docstring_tokens":["Retrieves","the","singleton","instance","of","EmailAddressValidator"]}
{"code_tokens":["\n	public","final","String","getPropertyExpression","(",")","\n	","{","\n		return","propertyExpression","(",")",";","\n	"],"docstring_tokens":["Gets","the","property","expression","for","this","model"]}
{"code_tokens":["\n	@Override\n	@SuppressWarnings","(","\"unchecked\"",")","\n	public","void","setObject","(","T","object",")","\n	","{","\n		final","String","expression","=","propertyExpression","(",")",";","\n		if","(","Strings",".","isEmpty","(","expression",")",")","\n		","{","\n			//","TODO","check,","really","do","this?\n			//","why","not","just","set","the","target","to","the","object?\n			Object","target","=","getTarget","(",")",";","\n			if","(","target","instanceof","IModel",")","\n			","{","\n				","(","(","IModel<T>",")","target",")",".","setObject","(","object",")",";","\n			","}","\n			else\n			","{","\n				setTarget","(","object",")",";","\n			","}","\n		","}","\n		else\n		","{","\n			PropertyResolverConverter","prc","=","new","PropertyResolverConverter","(","\n					Application",".","get","(",")",".","getConverterLocator","(",")",",","Session",".","get","(",")",".","getLocale","(",")",")",";","\n			PropertyResolver",".","setValue","(","expression,","getInnermostModelOrObject","(",")",",","object,","prc",")",";","\n		","}","\n	"],"docstring_tokens":["Applies","the","property","expression","on","the","model","object","using","the","given","object","argument"]}
{"code_tokens":["\n	protected","BigDecimal","parse","(","Object","value,","final","BigDecimal","min,","final","BigDecimal","max,","Locale","locale",")","\n	","{","\n		if","(","locale","==","null",")","\n		","{","\n			locale","=","Locale",".","getDefault","(","Locale",".","Category",".","FORMAT",")",";","\n		","}","\n\n		if","(","value","==","null",")","\n		","{","\n			return","null",";","\n		","}","\n		else","if","(","value","instanceof","String",")","\n		","{","\n			char","groupingSeparator","=","DecimalFormatSymbols",".","getInstance","(","locale",")",".","getGroupingSeparator","(",")",";","\n			//","Convert","spaces","to","no-break","space","(","groupingSeparator",")","as","required","by","Java","formats:\n			//","http://bugs",".","sun",".","com/view_bug",".","do?bug_id=4510618\n			value","=","(","(","String",")","value",")",".","replaceAll","(","\"","(","\\\\d+",")","\\\\s","(","?=\\\\d",")","\",","\"$1\"","+","groupingSeparator",")",";","\n		","}","\n\n		final","NumberFormat","numberFormat","=","getNumberFormat","(","locale",")",";","\n		final","N","number","=","parse","(","numberFormat,","value,","locale",")",";","\n\n		if","(","number","==","null",")","\n		","{","\n			return","null",";","\n		","}","\n\n		BigDecimal","bigDecimal",";","\n		if","(","number","instanceof","BigDecimal",")","\n		","{","\n			bigDecimal","=","(","BigDecimal",")","number",";","\n		","}","\n		else\n		","{","\n			//","should","occur","rarely,","see","#getNumberFormat","(","Locale",")","\n			bigDecimal","=","new","BigDecimal","(","number",".","toString","(",")",")",";","\n		","}","\n\n		if","(","min","!=","null","&&","bigDecimal",".","compareTo","(","min",")","<","0",")","\n		","{","\n			throw","newConversionException","(","\"Value","cannot","be","less","than","\"","+","min,","value,","locale",")","\n					",".","setFormat","(","numberFormat",")",";","\n		","}","\n\n		if","(","max","!=","null","&&","bigDecimal",".","compareTo","(","max",")",">","0",")","\n		","{","\n			throw","newConversionException","(","\"Value","cannot","be","greater","than","\"","+","max,","value,","locale",")","\n					",".","setFormat","(","numberFormat",")",";","\n		","}","\n\n		return","bigDecimal",";","\n	"],"docstring_tokens":["Parses","a","value","as","a","String","and","returns","a","Number"]}
{"code_tokens":["\n	@Override\n	protected","ResourceResponse","newResourceResponse","(","Attributes","attributes",")","\n	","{","\n		return","createResourceResponse","(","attributes,","getPath","(",")",")",";","\n	"],"docstring_tokens":["Creates","a","new","resource","response","and","reads","the","given","path"]}
{"code_tokens":["\n	protected","long","getSize","(",")","throws","IOException\n	","{","\n		return","Files",".","readAttributes","(","getPath","(",")",",","BasicFileAttributes",".","class",")",".","size","(",")",";","\n	"],"docstring_tokens":["Gets","the","size","of","the","resource"]}
{"code_tokens":["\n	protected","String","getMimeType","(",")","throws","IOException\n	","{","\n		final","Path","_path","=","getPath","(",")",";","\n		String","mimeType","=","null",";","\n		if","(","Application",".","exists","(",")",")","\n		","{","\n			mimeType","=","Application",".","get","(",")",".","getMimeType","(","_path",".","getFileName","(",")",".","toString","(",")",")",";","\n		","}","\n		if","(","mimeType","==","null",")","\n		","{","\n			mimeType","=","Files",".","probeContentType","(","_path",")",";","\n		","}","\n		return","mimeType",";","\n	"],"docstring_tokens":["Gets","the","mime","type","to","be","used","for","the","response","it","first","uses","the","URL","connection","to","get","the	","mime","type","and","after","this","the","FileTypeDetector","SPI","is","used"]}
{"code_tokens":["\n	protected","InputStream","getInputStream","(",")","throws","IOException\n	","{","\n		return","Files",".","newInputStream","(","getPath","(",")",")",";","\n	"],"docstring_tokens":["Gets","the","input","stream","of","the","given","path"]}
{"code_tokens":["\n	public","static","UploadInfo","getUploadInfo","(","final","HttpServletRequest","req,","String","upload",")","\n	","{","\n		Args",".","notNull","(","req,","\"req\"",")",";","\n		return","(","UploadInfo",")","req",".","getSession","(",")",".","getAttribute","(","getSessionKey","(","upload",")",")",";","\n	"],"docstring_tokens":["Retrieves","UploadInfo","from","session,","null","if","not","found"]}
{"code_tokens":["\n	public","static","void","setUploadInfo","(","final","HttpServletRequest","req,","String","upload,\n		final","UploadInfo","uploadInfo",")","\n	","{","\n		Args",".","notNull","(","req,","\"req\"",")",";","\n		Args",".","notNull","(","upload,","\"upload\"",")",";","\n		Args",".","notNull","(","uploadInfo,","\"uploadInfo\"",")",";","\n		req",".","getSession","(",")",".","setAttribute","(","getSessionKey","(","upload",")",",","uploadInfo",")",";","\n	"],"docstring_tokens":["Sets","the","UploadInfo","object","into","session"]}
{"code_tokens":["\n	public","static","void","clearUploadInfo","(","final","HttpServletRequest","req,","String","upload",")","\n	","{","\n		Args",".","notNull","(","req,","\"req\"",")",";","\n		Args",".","notNull","(","upload,","\"upload\"",")",";","\n		req",".","getSession","(",")",".","removeAttribute","(","getSessionKey","(","upload",")",")",";","\n	"],"docstring_tokens":["Clears","the","UploadInfo","object","from","session","if","one","exists"]}
{"code_tokens":["\n	public","void","notifyListeners","(","final","T","t",")","\n	","{","\n		notify","(","new","INotifier<IChangeListener<T>>","(",")","\n		","{","\n			@Override\n			public","void","notify","(","final","IChangeListener<T>","listener",")","\n			","{","\n				listener",".","onChange","(","t",")",";","\n			","}","\n		","}",")",";","\n	"],"docstring_tokens":["Notifies","all","change","listeners","of","a","change","in","t"]}
{"code_tokens":["\n	@Override\n	public","void","init","(","Application","application",")","\n	","{","\n		Http2Settings","http2Settings","=","Http2Settings",".","Holder",".","get","(","application",")",";","\n		http2Settings",".","setPushBuilder","(","new","Tomcat85PushBuilder","(",")",")",";","\n	"],"docstring_tokens":["Initializes","the","push","builder","API","of","tomcat"]}
{"code_tokens":["\r\n	public","String","getMedia","(",")","\r\n	","{","\r\n		return","media",";","\r\n	"],"docstring_tokens":["The","media","for","which","the","content","of","this","source","should","be","shown"]}
{"code_tokens":["\r\n	public","PageParameters","getPageParameters","(",")","\r\n	","{","\r\n		return","pageParameters",";","\r\n	"],"docstring_tokens":["Gets","the","page","parameter","applied","to","the","URL","of","the","source"]}
{"code_tokens":["\r\n	public","void","setPageParameters","(","PageParameters","pageParameters",")","\r\n	","{","\r\n		this",".","pageParameters","=","pageParameters",";","\r\n	"],"docstring_tokens":["Sets","the","page","parameter","applied","to","the","URL","of","the","source"]}
{"code_tokens":["\n	protected","boolean","canBeHandled","(","final","Url","url",")","\n	","{","\n		List<String>","segments","=","url",".","getSegments","(",")",";","\n		return","(","segments",".","size","(",")",">=","4","&&\n				urlStartsWith","(","url,","getContext","(",")",".","getNamespace","(",")",",","getContext","(",")",".","getResourceIdentifier","(",")",")","&&\n				Strings",".","isEmpty","(","segments",".","get","(","3",")",")","==","false\n		",")",";","\n\n	"],"docstring_tokens":["Checks","whether","the","passed","Url","can","be","handled","by","this","mapper"]}
{"code_tokens":["\n	public","void","reset","(",")","\n	","{","\n	"],"docstring_tokens":["Called","when","the","Response","needs","to","reset","itself"]}
{"code_tokens":["\n	@Test\n	final","void","emptyConstructor","(",")","throws","Exception\n	","{","\n		Class<?>","c","=","Class",".","forName","(","getExceptionClassName","(",")",")",";","\n		Constructor<?>","constructor","=","c",".","getConstructor","(","(","Class[]",")","null",")",";","\n		Exception","e","=","(","Exception",")","constructor",".","newInstance","(","(","Object[]",")","null",")",";","\n		assertNotNull","(","e,","\"Exception","should","be","created\"",")",";","\n		assertNull","(","e",".","getMessage","(",")",")",";","\n		assertNull","(","e",".","getCause","(",")",")",";","\n	"],"docstring_tokens":["Test","the","no","argument","constructor"]}
{"code_tokens":["\n	@Test\n	final","void","messageConstructor","(",")","throws","Exception\n	","{","\n		Class<?>","c","=","Class",".","forName","(","getExceptionClassName","(",")",")",";","\n		Constructor<?>","constructor","=","c",".","getConstructor","(","new","Class[]","{","String",".","class","}",")",";","\n		Exception","e","=","(","Exception",")","constructor",".","newInstance","(","\"test","message\"",")",";","\n		assertNotNull","(","e,","\"Exception","should","be","created\"",")",";","\n		assertEquals","(","\"test","message\",","e",".","getMessage","(",")",")",";","\n		assertNull","(","e",".","getCause","(",")",")",";","\n	"],"docstring_tokens":["Test","the","string","message","constructor"]}
{"code_tokens":["\n	@Test\n	final","void","causeConstructor","(",")","throws","Exception\n	","{","\n		NullPointerException","npe","=","new","NullPointerException","(",")",";","\n		Class<?>","c","=","Class",".","forName","(","getExceptionClassName","(",")",")",";","\n		Constructor<?>","constructor","=","c",".","getConstructor","(","new","Class[]","{","Throwable",".","class","}",")",";","\n		Exception","e","=","(","Exception",")","constructor",".","newInstance","(","npe",")",";","\n		assertNotNull","(","e,","\"Exception","should","be","created\"",")",";","\n		assertSame","(","npe,","e",".","getCause","(",")",")",";","\n	"],"docstring_tokens":["Test","the","cause","constructor"]}
{"code_tokens":["\n	@Test\n	final","void","messageAndCauseConstructor","(",")","throws","Exception\n	","{","\n		NullPointerException","npe","=","new","NullPointerException","(",")",";","\n		Class<?>","c","=","Class",".","forName","(","getExceptionClassName","(",")",")",";","\n		Constructor<?>","constructor","=","c",".","getConstructor","(","new","Class[]","{","String",".","class,","Throwable",".","class","}",")",";","\n		Exception","e","=","(","Exception",")","constructor",".","newInstance","(","\"test","message\",","npe",")",";","\n		assertNotNull","(","e,","\"Exception","should","be","created\"",")",";","\n		assertEquals","(","\"test","message\",","e",".","getMessage","(",")",")",";","\n		assertSame","(","npe,","e",".","getCause","(",")",")",";","\n	"],"docstring_tokens":["Test","the","message","and","cause","constructor"]}
{"code_tokens":["\n	protected","Integer","resolvePort","(","final","Url","url",")","\n	","{","\n		return","choose","(","url",".","getPort","(",")",",","baseUrl",".","getPort","(",")",",","request",".","getClientUrl","(",")",".","getPort","(",")",")",";","\n	"],"docstring_tokens":["Gets","port","that","should","be","used","to","render","the","url"]}
{"code_tokens":["\n	protected","String","resolveHost","(","final","Url","url",")","\n	","{","\n		return","choose","(","url",".","getHost","(",")",",","baseUrl",".","getHost","(",")",",","request",".","getClientUrl","(",")",".","getHost","(",")",")",";","\n	"],"docstring_tokens":["Gets","the","host","name","that","should","be","used","to","render","the","url"]}
{"code_tokens":["\n	protected","String","resolveProtocol","(","final","Url","url",")","\n	","{","\n		return","choose","(","url",".","getProtocol","(",")",",","baseUrl",".","getProtocol","(",")",",","request",".","getClientUrl","(",")","\n			",".","getProtocol","(",")",")",";","\n	"],"docstring_tokens":["Gets","the","protocol","that","should","be","used","to","render","the","url"]}
{"code_tokens":["\n	private","void","removeCommonPrefixes","(","Request","request,","List<String>","segments",")","\n	","{","\n		//","try","to","remove","context/filter","path","only","if","the","Url","starts","with","'/',\n		//","i",".","e",".","has","an","empty","segment","in","the","beginning\n		if","(","(","segments",".","isEmpty","(",")","||","segments",".","get","(","0",")",".","isEmpty","(",")",")","==","false",")","\n		","{","\n			return",";","\n		","}","\n\n		Url","commonPrefix","=","Url",".","parse","(","request",".","getContextPath","(",")","+","request",".","getFilterPath","(",")",")",";","\n		//","if","both","context","and","filter","path","are","empty,","common","prefixes","are","empty","too\n		if","(","commonPrefix",".","getSegments","(",")",".","isEmpty","(",")",")","\n		","{","\n			//","WICKET-4920","and","WICKET-4935\n			commonPrefix",".","getSegments","(",")",".","add","(","\"\"",")",";","\n		","}","\n\n		for","(","int","i","=","0",";","i","<","commonPrefix",".","getSegments","(",")",".","size","(",")","&&","i","<","segments",".","size","(",")",";","i++",")","\n		","{","\n			String","commonPrefixSegment","=","Strings",".","stripJSessionId","(","commonPrefix",".","getSegments","(",")",".","get","(","i",")",")",";","\n			String","segmentToClean","=","Strings",".","stripJSessionId","(","segments",".","get","(","i",")",")",";","\n			if","(","commonPrefixSegment",".","equals","(","segmentToClean",")","==","false",")","\n			","{","\n				LOG",".","debug","(","\"Segments","'","{","}","'","do","not","start","with","common","prefix","'","{","}","'\",","segments,\n					commonPrefix",")",";","\n				return",";","\n			","}","\n		","}","\n\n		for","(","int","i","=","0",";","i","<","commonPrefix",".","getSegments","(",")",".","size","(",")","&&","!segments",".","isEmpty","(",")",";","i++",")","\n		","{","\n			segments",".","remove","(","0",")",";","\n		","}","\n	"],"docstring_tokens":["Removes","common","prefixes","like","empty","first","segment,","context","path","and","filter","path"]}
{"code_tokens":["\n	protected","boolean","shouldRenderAsFull","(","final","Url","url",")","\n	","{","\n		if","(","url",".","shouldRenderAsFull","(",")",")","{","\n			return","true",";","\n		","}","\n\n		Url","clientUrl","=","request",".","getClientUrl","(",")",";","\n\n		if","(","!Strings",".","isEmpty","(","url",".","getProtocol","(",")",")","&&\n			!url",".","getProtocol","(",")",".","equals","(","clientUrl",".","getProtocol","(",")",")",")","\n		","{","\n			return","true",";","\n		","}","\n		if","(","!Strings",".","isEmpty","(","url",".","getHost","(",")",")","&&","!url",".","getHost","(",")",".","equals","(","clientUrl",".","getHost","(",")",")",")","\n		","{","\n			return","true",";","\n		","}","\n		if","(","(","url",".","getPort","(",")","!=","null",")","&&","!url",".","getPort","(",")",".","equals","(","clientUrl",".","getPort","(",")",")",")","\n		","{","\n			return","true",";","\n		","}","\n		if","(","url",".","isContextAbsolute","(",")",")","\n		","{","\n			//","do","not","relativize","urls","like","\"/a/b\"\n			return","true",";","\n		","}","\n		return","false",";","\n	"],"docstring_tokens":["Determines","whether","a","URL","should","be","rendered","in","its","full","form"]}
{"code_tokens":["\n	public","String","renderContextRelativeUrl","(","String","url",")","\n	","{","\n		Args",".","notNull","(","url,","\"url\"",")",";","\n\n		if","(","url",".","startsWith","(","\"/\"",")",")","\n		","{","\n			url","=","url",".","substring","(","1",")",";","\n		","}","\n\n		PrependingStringBuffer","buffer","=","new","PrependingStringBuffer","(","url",")",";","\n		for","(","int","i","=","0",";","i","<","getBaseUrl","(",")",".","getSegments","(",")",".","size","(",")","-","1",";","++i",")","\n		","{","\n			buffer",".","prepend","(","\"",".",".","/\"",")",";","\n		","}","\n\n		buffer",".","prepend","(","request",".","getPrefixToContextPath","(",")",")",";","\n\n		return","buffer",".","toString","(",")",";","\n	"],"docstring_tokens":["Renders","the","URL","within","context","relative","to","current","base","URL"]}
{"code_tokens":["\n	protected","void","setOptionAttributes","(","AppendingStringBuffer","buffer,","E","choice,","int","index,","String","selected",")","\n	","{","\n		if","(","isSelected","(","choice,","index,","selected",")",")","\n		","{","\n			buffer",".","append","(","\"selected=\\\"selected\\\"","\"",")",";","\n		","}","\n\n		if","(","isDisabled","(","choice,","index,","selected",")",")","\n		","{","\n			buffer",".","append","(","\"disabled=\\\"disabled\\\"","\"",")",";","\n		","}","\n\n		buffer",".","append","(","\"value=\\\"\"",")",";","\n		buffer",".","append","(","Strings",".","escapeMarkup","(","renderer",".","getIdValue","(","choice,","index",")",")",")",";","\n		buffer",".","append","(","'\"'",")",";","\n	"],"docstring_tokens":["Sets","the","attributes","of","a","single","choice","into","the","provided","buffer"]}
{"code_tokens":["\n	public","AbstractCspHeaderItem","setNonce","(","String","nonce",")","\n	","{","\n		this",".","nonce","=","nonce",";","\n		return","this",";","\n	"],"docstring_tokens":["Set","the","CSP","nonce"]}
{"code_tokens":["\n	private","IRequestHandler","internalMap","(","Exception","e",")","\n	","{","\n		final","Application","application","=","Application",".","get","(",")",";","\n\n		//","check","if","we","are","processing","an","Ajax","request","and","if","we","want","to","invoke","the","failure","handler\n		if","(","isProcessingAjaxRequest","(",")",")","\n		","{","\n			switch","(","application",".","getExceptionSettings","(",")",".","getAjaxErrorHandlingStrategy","(",")",")","\n			","{","\n				case","INVOKE_FAILURE_HANDLER",":\n					return","new","ErrorCodeRequestHandler","(","500",")",";","\n			","}","\n		","}","\n\n		IRequestHandler","handleExpectedExceptions","=","mapExpectedExceptions","(","e,","application",")",";","\n		\n		if","(","handleExpectedExceptions","!=","null",")","\n		","{","\n			return","handleExpectedExceptions",";","\n		","}","\n\n		return","mapUnexpectedExceptions","(","e,","application",")",";","\n	\n	"],"docstring_tokens":["Maps","exceptions","to","their","corresponding","IRequestHandler"]}
{"code_tokens":["\n	public","boolean","isAscending","(",")","\n	","{","\n		return","ascending",";","\n	"],"docstring_tokens":["check","if","sort","order","is","ascending"]}
{"code_tokens":["\n	public","void","assertAjaxLocation","(",")","\n	","{","\n		if","(","null","!=","getLastResponse","(",")",".","getHeader","(","\"Location\"",")",")","\n		","{","\n			fail","(","\"Location","header","should","*not*","be","present","when","using","Ajax\"",")",";","\n		","}","\n\n		String","ajaxLocation","=","getLastResponse","(",")",".","getHeader","(","\"Ajax-Location\"",")",";","\n		if","(","null","==","ajaxLocation",")","\n		","{","\n			fail","(","\"Ajax-Location","header","should","be","present","when","using","Ajax\"",")",";","\n		","}","\n\n		int","statusCode","=","getLastResponse","(",")",".","getStatus","(",")",";","\n		if","(","statusCode","!=","200",")","\n		","{","\n			fail","(","\"Expected","HTTP","status","code","to","be","200","(","OK",")","\"",")",";","\n		","}","\n	"],"docstring_tokens":["Asserts","that","the","Ajax","location","header","is","present"]}
{"code_tokens":["\n	public","void","assertBehavior","(","String","path,","Class<?","extends","Behavior>","expectedBehaviorClass",")","\n	","{","\n		Args",".","notNull","(","expectedBehaviorClass,","\"expectedBehaviorClass\"",")",";","\n\n		Component","component","=","assertExists","(","path",")",";","\n		List<?","extends","Behavior>","behaviors","=","component",".","getBehaviors","(","expectedBehaviorClass",")",";","\n		final","String","message","=","String",".","format","(","\"Component","'%s'","has","no","behaviors","of","type","'%s'\",\n			component",".","getPageRelativePath","(",")",",","expectedBehaviorClass",")",";","\n		assertResult","(","new","Result","(","CollectionUtils",".","isEmpty","(","behaviors",")",",","message",")",")",";","\n	"],"docstring_tokens":["Asserts","that","the","Component","a","the","given","path","has","a","behavior","of","the","given","type"]}
{"code_tokens":["\n	public","void","assertErrorMessages","(","Serializable",".",".",".","expectedErrorMessages",")","\n	","{","\n		assertFeedbackMessages","(","new","ExactLevelFeedbackMessageFilter","(","FeedbackMessage",".","ERROR",")",",\n			expectedErrorMessages",")",";","\n	"],"docstring_tokens":["Asserts","error-level","feedback","messages"]}
{"code_tokens":["\n	public","void","assertInfoMessages","(","Serializable",".",".",".","expectedInfoMessages",")","\n	","{","\n		assertFeedbackMessages","(","new","ExactLevelFeedbackMessageFilter","(","FeedbackMessage",".","INFO",")",",\n			expectedInfoMessages",")",";","\n	"],"docstring_tokens":["Assert","info-level","feedback","messages"]}
{"code_tokens":["\n	public","void","assertInvisible","(","String","path",")","\n	","{","\n		assertResult","(","isInvisible","(","path",")",")",";","\n	"],"docstring_tokens":["Asserts","that","a","Component","is","invisible"]}
{"code_tokens":["\n	public","void","assertLabel","(","String","path,","String","expectedLabelText",")","\n	","{","\n		Label","label","=","(","Label",")","getComponentFromLastRenderedPage","(","path",")",";","\n		assertEquals","(","expectedLabelText,","label",".","getDefaultModelObjectAsString","(",")",")",";","\n	"],"docstring_tokens":["Asserts","the","text","of","a","Label","Component"]}
{"code_tokens":["\n	public","void","assertModelValue","(","String","path,","Object","expectedValue",")","\n	","{","\n		Component","component","=","getComponentFromLastRenderedPage","(","path",")",";","\n		assertEquals","(","expectedValue,","component",".","getDefaultModelObject","(",")",")",";","\n	"],"docstring_tokens":["Asserts","the","model","value","of","a","component"]}
{"code_tokens":["\n	public","void","assertNoErrorMessage","(",")","\n	","{","\n		assertNoFeedbackMessage","(","FeedbackMessage",".","ERROR",")",";","\n	"],"docstring_tokens":["Asserts","no","error-level","feedback","messages"]}
{"code_tokens":["\n	public","void","assertNoInfoMessage","(",")","\n	","{","\n		assertNoFeedbackMessage","(","FeedbackMessage",".","INFO",")",";","\n	"],"docstring_tokens":["Asserts","no","info-level","feedback","messages"]}
{"code_tokens":["\n	public","void","assertRenderedPage","(","Class<?","extends","Page>","expectedRenderedPageClass",")","\n	","{","\n		assertResult","(","isRenderedPage","(","expectedRenderedPageClass",")",")",";","\n	"],"docstring_tokens":["Asserts","a","last-rendered","Page","class"]}
{"code_tokens":["\n	public","void","assertResultPage","(","final","String","expectedDocument",")","\n	","{","\n		//","Validate","the","document\n		String","document","=","getLastResponseAsString","(",")",";","\n		assertEquals","(","expectedDocument,","document",")",";","\n	"],"docstring_tokens":["Asserts","last-rendered","Page","against","an","expected","HTML","document","as","a	","String"]}
{"code_tokens":["\n	public","void","assertVisible","(","String","path",")","\n	","{","\n		assertResult","(","isVisible","(","path",")",")",";","\n	"],"docstring_tokens":["Asserts","that","a","Component","is","visible"]}
{"code_tokens":["\n	public","void","assertRedirectUrl","(","String","expectedRedirectUrl",")","\n	","{","\n		String","actualRedirectUrl","=","getLastResponse","(",")",".","getRedirectLocation","(",")",";","\n		assertEquals","(","expectedRedirectUrl,","actualRedirectUrl",")",";","\n	"],"docstring_tokens":["Assert","that","the","last","request","redirected","to","the","given","Url"]}
{"code_tokens":["\n	@Around","(","\"execution","(","*","org",".","apache",".","wicket",".","Component",".","onDetach","(",".",".",")",")","\"",")","\n	public","Object","arroundOnDetach","(","ProceedingJoinPoint","joinPoint",")","throws","Throwable\n	","{","\n		return","mark","(","\"core/component/detach\",","joinPoint",")",";","\n	"],"docstring_tokens":["Collects","data","how","often","components","calls","onDetach"]}
{"code_tokens":["\r\n	public","static","int","hashCode","(","final","Object",".",".",".","obj",")","\r\n	","{","\r\n		if","(","(","obj","==","null",")","||","(","obj",".","length","==","0",")",")","\r\n		","{","\r\n			return","0",";","\r\n		","}","\r\n		int","result","=","37",";","\r\n		for","(","int","i","=","obj",".","length","-","1",";","i",">","-1",";","i--",")","\r\n		","{","\r\n			result","=","37","*","result","+","(","obj[i]","!=","null","?","obj[i]",".","hashCode","(",")",":","0",")",";","\r\n		","}","\r\n		return","result",";","\r\n	"],"docstring_tokens":["returns","hashcode","of","the","objects","by","calling","obj.hashcode"]}
{"code_tokens":["\n	@Override\n	public","int","getCompatibilityScore","(","final","Request","request",")","\n	","{","\n		int","score","=","Integer",".","MIN_VALUE",";","\n		for","(","IRequestMapper","mapper",":","this",")","\n		","{","\n			score","=","Math",".","max","(","score,","mapper",".","getCompatibilityScore","(","request",")",")",";","\n		","}","\n		return","score",";","\n	"],"docstring_tokens":["The","scope","of","the","compound","mapper","is","the","highest","score","of","the","registered","mappers"]}
{"code_tokens":["\r\n	public","static","TimeOfDay","militaryTime","(","final","int","hour,","final","int","minute,","final","int","second",")","\r\n	","{","\r\n		if","(","(","hour",">","23",")","||","(","hour","<","0",")",")","\r\n		","{","\r\n			throw","new","IllegalArgumentException","(","\"Hour","\"","+","hour","+","\"","is","not","valid\"",")",";","\r\n		","}","\r\n\r\n		if","(","(","minute",">","59",")","||","(","minute","<","0",")",")","\r\n		","{","\r\n			throw","new","IllegalArgumentException","(","\"Minute","\"","+","minute","+","\"","is","not","valid\"",")",";","\r\n		","}","\r\n\r\n		if","(","(","second",">","59",")","||","(","second","<","0",")",")","\r\n		","{","\r\n			throw","new","IllegalArgumentException","(","\"Second","\"","+","second","+","\"","is","not","valid\"",")",";","\r\n		","}","\r\n\r\n		return","valueOf","(","Duration",".","hours","(","hour",")","\r\n			",".","add","(","Duration",".","minutes","(","minute",")",")","\r\n			",".","add","(","Duration",".","seconds","(","second",")",")",")",";","\r\n	"],"docstring_tokens":["Retrieves","a","TimeOfDay","value","on","a","24-hour","clock"]}
{"code_tokens":["\r\n	public","static","TimeOfDay","time","(","final","int","hour,","final","int","minute,","final","int","second,\r\n		final","Meridian","meridian",")","\r\n	","{","\r\n		if","(","meridian","==","PM",")","\r\n		","{","\r\n			if","(","hour","==","12",")","\r\n			","{","\r\n				return","militaryTime","(","12,","minute,","second",")",";","\r\n			","}","\r\n			else\r\n			","{","\r\n				return","militaryTime","(","hour","+","12,","minute,","second",")",";","\r\n			","}","\r\n		","}","\r\n		else\r\n		","{","\r\n			if","(","hour","==","12",")","\r\n			","{","\r\n				return","militaryTime","(","0,","minute,","second",")",";","\r\n			","}","\r\n			else\r\n			","{","\r\n				return","militaryTime","(","hour,","minute,","second",")",";","\r\n			","}","\r\n		","}","\r\n	"],"docstring_tokens":["Retrieves","a","TimeOfDay","on","a","12-hour","clock"]}
{"code_tokens":["\r\n	public","static","TimeOfDay","valueOf","(","final","Calendar","calendar,","final","String","time",")","\r\n		throws","ParseException\r\n	","{","\r\n		synchronized","(","timeFormat",")","\r\n		","{","\r\n			synchronized","(","calendar",")","\r\n			","{","\r\n				timeFormat",".","setCalendar","(","calendar",")",";","\r\n				return","new","TimeOfDay","(","timeFormat",".","parse","(","time",")",".","getTime","(",")",")",";","\r\n			","}","\r\n		","}","\r\n	"],"docstring_tokens":["Converts","a","time","String","and","Calendar","to","a","TimeOfDay","	","instance"]}
{"code_tokens":["\r\n	public","static","TimeOfDay","valueOf","(","final","Calendar","calendar,","final","Time","time",")","\r\n	","{","\r\n		return","militaryTime","(","time",".","getHour","(","calendar",")",",","time",".","getMinute","(","calendar",")",",\r\n			time",".","getSecond","(","calendar",")",")",";","\r\n	"],"docstring_tokens":["Converts","a","Time","instance","and","Calendar","to","a","TimeOfDay","	","instance"]}
{"code_tokens":["\r\n	public","static","TimeOfDay","valueOf","(","final","Duration","duration",")","\r\n	","{","\r\n		return","new","TimeOfDay","(","duration",".","getMilliseconds","(",")",")",";","\r\n	"],"docstring_tokens":["Converts","a","Duration","instance","to","a","TimeOfDay","instance"]}
{"code_tokens":["\r\n	public","static","TimeOfDay","valueOf","(","final","long","time",")","\r\n	","{","\r\n		return","new","TimeOfDay","(","time",")",";","\r\n	"],"docstring_tokens":["Converts","a","long","value","to","a","TimeOfDay","instance"]}
{"code_tokens":["\r\n	public","static","TimeOfDay","valueOf","(","final","String","time",")","throws","ParseException\r\n	","{","\r\n		return","valueOf","(","localtime,","time",")",";","\r\n	"],"docstring_tokens":["Converts","a","String","value","to","a","TimeOfDay","instance"]}
{"code_tokens":["\r\n	public","int","hour","(",")","\r\n	","{","\r\n		return","toHours","(","getMilliseconds","(",")",")",";","\r\n	"],"docstring_tokens":["Retrieves","the","hour","of","the","day"]}
{"code_tokens":["\r\n	public","Time","next","(",")","\r\n	","{","\r\n		return","next","(","AbstractTime",".","localtime",")",";","\r\n	"],"docstring_tokens":["Retrieves","the","next","occurrence","of","this","TimeOfDay","in","local","time"]}
{"code_tokens":["\r\n	public","Time","next","(","final","Calendar","calendar",")","\r\n	","{","\r\n		//","Get","this","time","of","day","today\r\n		final","Time","timeToday","=","Time",".","valueOf","(","calendar,","this",")",";","\r\n\r\n		//","If","it","has","already","passed\r\n		if","(","timeToday",".","before","(","Time",".","now","(",")",")",")","\r\n		","{","\r\n			//","Return","the","time","tomorrow\r\n			return","Time",".","valueOf","(","calendar,","this",")",".","add","(","Duration",".","ONE_DAY",")",";","\r\n		","}","\r\n		else\r\n		","{","\r\n			//","Time","hasn't","happened","yet","today\r\n			return","timeToday",";","\r\n		","}","\r\n	"],"docstring_tokens":["Retrieves","the","next","occurrence","of","this","TimeOfDay","on","the","given","	","Calendar"]}
{"code_tokens":["\n	protected","void","configureCache","(","final","ResourceResponse","data,","final","Attributes","attributes",")","\n	","{","\n		Response","response","=","attributes",".","getResponse","(",")",";","\n\n		if","(","response","instanceof","WebResponse",")","\n		","{","\n			Duration","duration","=","data",".","getCacheDuration","(",")",";","\n			WebResponse","webResponse","=","(","WebResponse",")","response",";","\n			if","(","duration",".","compareTo","(","Duration",".","ZERO",")",">","0",")","\n			","{","\n				webResponse",".","enableCaching","(","duration,","data",".","getCacheScope","(",")",")",";","\n			","}","\n			else\n			","{","\n				webResponse",".","disableCaching","(",")",";","\n			","}","\n		","}","\n	"],"docstring_tokens":["Configure","the","web","response","header","for","client","cache","control"]}
{"code_tokens":["\n	protected","void","setResponseHeaders","(","final","ResourceResponse","resourceResponse,\n		final","Attributes","attributes",")","\n	","{","\n		Response","response","=","attributes",".","getResponse","(",")",";","\n		if","(","response","instanceof","WebResponse",")","\n		","{","\n			WebResponse","webResponse","=","(","WebResponse",")","response",";","\n\n			//","1",".","Last","Modified\n			Instant","lastModified","=","resourceResponse",".","getLastModified","(",")",";","\n			if","(","lastModified","!=","null",")","\n			","{","\n				webResponse",".","setLastModifiedTime","(","lastModified",")",";","\n			","}","\n\n			//","2",".","Caching\n			configureCache","(","resourceResponse,","attributes",")",";","\n\n			if","(","resourceResponse",".","getErrorCode","(",")","!=","null",")","\n			","{","\n				webResponse",".","sendError","(","resourceResponse",".","getErrorCode","(",")",",\n					resourceResponse",".","getErrorMessage","(",")",")",";","\n				return",";","\n			","}","\n\n			if","(","resourceResponse",".","getStatusCode","(",")","!=","null",")","\n			","{","\n				webResponse",".","setStatus","(","resourceResponse",".","getStatusCode","(",")",")",";","\n			","}","\n\n			if","(","!resourceResponse",".","dataNeedsToBeWritten","(","attributes",")",")","\n			","{","\n				webResponse",".","setStatus","(","HttpServletResponse",".","SC_NOT_MODIFIED",")",";","\n				return",";","\n			","}","\n\n			//","3",".","Content","Disposition\n			String","fileName","=","resourceResponse",".","getFileName","(",")",";","\n			ContentDisposition","disposition","=","resourceResponse",".","getContentDisposition","(",")",";","\n			if","(","ContentDisposition",".","ATTACHMENT","==","disposition",")","\n			","{","\n				webResponse",".","setAttachmentHeader","(","fileName",")",";","\n			","}","\n			else","if","(","ContentDisposition",".","INLINE","==","disposition",")","\n			","{","\n				webResponse",".","setInlineHeader","(","fileName",")",";","\n			","}","\n\n			//","4",".","Mime","Type","(","+","encoding",")","\n			String","mimeType","=","resourceResponse",".","getContentType","(",")",";","\n			if","(","mimeType","!=","null",")","\n			","{","\n				final","String","encoding","=","resourceResponse",".","getTextEncoding","(",")",";","\n\n				if","(","encoding","==","null",")","\n				","{","\n					webResponse",".","setContentType","(","mimeType",")",";","\n				","}","\n				else\n				","{","\n					webResponse",".","setContentType","(","mimeType","+","\"",";","charset=\"","+","encoding",")",";","\n				","}","\n			","}","\n\n			//","5",".","Accept","Range\n			ContentRangeType","acceptRange","=","resourceResponse",".","getAcceptRange","(",")",";","\n			if","(","acceptRange","!=","null",")","\n			","{","\n				webResponse",".","setAcceptRange","(","acceptRange",".","getTypeName","(",")",")",";","\n			","}","\n\n			long","contentLength","=","resourceResponse",".","getContentLength","(",")",";","\n			boolean","contentRangeApplied","=","false",";","\n\n			//","6",".","Content","Range\n			//","for","more","information","take","a","look","here:\n			//","http://stackoverflow",".","com/questions/8293687/sample-http-range-request-session\n			//","if","the","content","range","header","has","been","set","directly\n			//","to","the","resource","response","use","it","otherwise","calculate","it\n			String","contentRange","=","resourceResponse",".","getContentRange","(",")",";","\n			if","(","contentRange","!=","null",")","\n			","{","\n				webResponse",".","setContentRange","(","contentRange",")",";","\n			","}","\n			else\n			","{","\n				//","content","length","has","to","be","set","otherwise","the","content","range","header","can","not","be\n				//","calculated","-","accept","range","must","be","set","to","bytes","-","others","are","not","supported","at","the\n				//","moment\n				if","(","contentLength","!=","-1","&&","ContentRangeType",".","BYTES",".","equals","(","acceptRange",")",")","\n				","{","\n					contentRangeApplied","=","setResponseContentRangeHeaderFields","(","webResponse,\n						attributes,","contentLength",")",";","\n				","}","\n			","}","\n\n			//","7",".","Content","Length\n			if","(","contentLength","!=","-1","&&","!contentRangeApplied",")","\n			","{","\n				webResponse",".","setContentLength","(","contentLength",")",";","\n			","}","\n\n			//","add","custom","headers","and","values\n			final","HttpHeaderCollection","headers","=","resourceResponse",".","getHeaders","(",")",";","\n\n			for","(","String","name",":","headers",".","getHeaderNames","(",")",")","\n			","{","\n				checkHeaderAccess","(","name",")",";","\n\n				for","(","String","value",":","headers",".","getHeaderValues","(","name",")",")","\n				","{","\n					webResponse",".","addHeader","(","name,","value",")",";","\n				","}","\n			","}","\n		","}","\n	"],"docstring_tokens":["Sets","the","response","header","of","resource","response","to","the","response","received","from","the","attributes"]}
{"code_tokens":["\n	@Override\n	public","boolean","isVersioned","(",")","\n	","{","\n		return","false",";","\n	"],"docstring_tokens":["No","need","for","versioning","this","frame"]}
{"code_tokens":["\r\n	public","void","assertValidInStack","(","ComponentTag","tag",")","throws","ParseException\r\n	","{","\r\n		//","Get","the","next","tag",".","If","null,","no","more","tags","are","available\r\n		if","(","tag","==","null",")","\r\n		","{","\r\n			validate","(",")",";","\r\n			return",";","\r\n		","}","\r\n\r\n		if","(","log",".","isDebugEnabled","(",")","&&","debug",")","\r\n		","{","\r\n			log",".","debug","(","\"tag:","\"","+","tag",".","toUserDebugString","(",")","+","\",","stack:","\"","+","stack",")",";","\r\n		","}","\r\n\r\n		//","Check","tag","type\r\n		if","(","tag",".","isOpen","(",")",")","\r\n		","{","\r\n			//","Push","onto","stack\r\n			stack",".","push","(","tag",")",";","\r\n		","}","\r\n		else","if","(","tag",".","isClose","(",")",")","\r\n		","{","\r\n			assertOpenTagFor","(","tag",")",";","\r\n		","}","\r\n		else","if","(","tag",".","isOpenClose","(",")",")","\r\n		","{","\r\n			//","Tag","closes","itself\r\n			tag",".","setOpenTag","(","tag",")",";","\r\n		","}","\r\n	"],"docstring_tokens":["Assert","that","tag","has","no","mismatch","error"]}
{"code_tokens":["\r\n	private","void","assertOpenTagFor","(","ComponentTag","closeTag",")","throws","ParseException\r\n	","{","\r\n		//","Check","that","there","is","something","on","the","stack\r\n		if","(","stack",".","size","(",")",">","0",")","\r\n		","{","\r\n			//","Pop","the","top","tag","off","the","stack\r\n			ComponentTag","top","=","stack",".","pop","(",")",";","\r\n\r\n			//","If","the","name","of","the","current","close","tag","does","not","match","the\r\n			//","tag","on","the","stack","then","we","may","have","a","mismatched","close","tag\r\n			boolean","mismatch","=","!hasEqualTagName","(","top,","closeTag",")",";","\r\n\r\n			if","(","mismatch",")","\r\n			","{","\r\n				top",".","setHasNoCloseTag","(","true",")",";","\r\n\r\n				//","Pop","any","simple","tags","off","the","top","of","the","stack\r\n				while","(","mismatch","&&","!requiresCloseTag","(","top",".","getName","(",")",")",")","\r\n				","{","\r\n					top",".","setHasNoCloseTag","(","true",")",";","\r\n\r\n					//","Pop","simple","tag\r\n					if","(","stack",".","isEmpty","(",")",")","\r\n					","{","\r\n						break",";","\r\n					","}","\r\n					top","=","stack",".","pop","(",")",";","\r\n\r\n					//","Does","new","top","of","stack","mismatch","too?\r\n					mismatch","=","!hasEqualTagName","(","top,","closeTag",")",";","\r\n				","}","\r\n\r\n				//","If","adjusting","for","simple","tags","did","not","fix","the","problem,\r\n				//","it","must","be","a","real","mismatch",".","\r\n				if","(","mismatch",")","\r\n				","{","\r\n					throw","new","ParseException","(","\"Tag","\"","+","top",".","toUserDebugString","(",")","+\r\n						\"","has","a","mismatched","close","tag","at","\"","+","closeTag",".","toUserDebugString","(",")",",\r\n						top",".","getPos","(",")",")",";","\r\n				","}","\r\n			","}","\r\n\r\n			//","Tag","matches,","so","add","pointer","to","matching","tag\r\n			closeTag",".","setOpenTag","(","top",")",";","\r\n		","}","\r\n		else\r\n		","{","\r\n			throw","new","WicketParseException","(","\"Tag","does","not","have","a","matching","open","tag:\",","closeTag",")",";","\r\n		","}","\r\n	"],"docstring_tokens":["Bind","close","tag","with","its","open","tag","and","pop","it","from","the","stack"]}
{"code_tokens":["\r\n	public","void","debug","(",")","\r\n	","{","\r\n		debug","=","true",";","\r\n	"],"docstring_tokens":["Configure","this","stack","to","call","log.debug","at","operations"]}
{"code_tokens":["\r\n	public","static","boolean","hasEqualTagName","(","final","ComponentTag","tag1,","final","ComponentTag","tag2",")","\r\n	","{","\r\n		if","(","!tag1",".","getName","(",")",".","equalsIgnoreCase","(","tag2",".","getName","(",")",")",")","\r\n		","{","\r\n			return","false",";","\r\n		","}","\r\n\r\n		if","(","(","tag1",".","getNamespace","(",")","==","null",")","&&","(","tag2",".","getNamespace","(",")","==","null",")",")","\r\n		","{","\r\n			return","true",";","\r\n		","}","\r\n\r\n		if","(","(","tag1",".","getNamespace","(",")","!=","null",")","&&","(","tag2",".","getNamespace","(",")","!=","null",")",")","\r\n		","{","\r\n			return","tag1",".","getNamespace","(",")",".","equalsIgnoreCase","(","tag2",".","getNamespace","(",")",")",";","\r\n		","}","\r\n\r\n		return","false",";","\r\n	"],"docstring_tokens":["Compare","tag","name","including","namespace"]}
{"code_tokens":["\r\n	public","Integer","getWidth","(",")","\r\n	","{","\r\n		return","width",";","\r\n	"],"docstring_tokens":["Gets","the","width","of","the","video","area"]}
{"code_tokens":["\r\n	public","void","setWidth","(","Integer","width",")","\r\n	","{","\r\n		this",".","width","=","width",";","\r\n	"],"docstring_tokens":["Sets","the","width","of","the","video","area"]}
{"code_tokens":["\r\n	public","Integer","getHeight","(",")","\r\n	","{","\r\n		return","height",";","\r\n	"],"docstring_tokens":["Gets","the","height","of","the","video","area"]}
{"code_tokens":["\r\n	public","void","setHeight","(","Integer","height",")","\r\n	","{","\r\n		this",".","height","=","height",";","\r\n	"],"docstring_tokens":["Sets","the","height","of","the","video","area"]}
{"code_tokens":["\n	protected","boolean","shouldTrigger","(",")","\n	","{","\n		return","isStopped","(",")","==","false","&&\n				isEnabled","(","getComponent","(",")",")","&&\n				","(","getComponent","(",")","instanceof","Page","||","getComponent","(",")",".","findParent","(","Page",".","class",")","!=","null",")",";","\n	"],"docstring_tokens":["Decides","whether","the","timer","behavior","should","render","its","JavaScript","to","re-trigger","it","after","the	","update","interval"]}
{"code_tokens":["\n	public","static","AbstractAjaxTimerBehavior","onTimer","(","Duration","interval,","SerializableConsumer<AjaxRequestTarget>","onTimer",")","\n	","{","\n		Args",".","notNull","(","onTimer,","\"onTimer\"",")",";","\n\n		return","new","AbstractAjaxTimerBehavior","(","interval",")","\n		","{","\n			private","static","final","long","serialVersionUID","=","1L",";","\n\n			@Override\n			protected","void","onTimer","(","AjaxRequestTarget","target",")","\n			","{","\n				onTimer",".","accept","(","target",")",";","\n			","}","\n		","}",";","\n	"],"docstring_tokens":["Creates","an","AbstractAjaxTimerBehavior","based","on","lambda","expressions"]}
{"code_tokens":["\n	@Override\n	protected","void","updateAjaxAttributes","(","AjaxRequestAttributes","attributes",")","\n	","{","\n		super",".","updateAjaxAttributes","(","attributes",")",";","\n\n		String","parameter","=","\"return","{","'\"","+","PARAM_WINDOW_NAME","+","\"':","window",".","name","}","\"",";","\n		attributes",".","getDynamicExtraParameters","(",")",".","add","(","parameter",")",";","\n\n		if","(","boundName","!=","null",")","\n		","{","\n			//","already","bound,","send","request","only","when","changed\n			attributes",".","getAjaxCallListeners","(",")",".","add","(","new","AjaxCallListener","(",")","\n			","{","\n				@Override\n				public","CharSequence","getPrecondition","(","Component","component",")","\n				","{","\n					return","String",".","format","(","\"return","(","window",".","name","!==","'%s'",")",";","\",","boundName",")",";","\n				","}","\n			","}",")",";","\n		","}","\n	"],"docstring_tokens":["Overridden","to","add","the","current","window","name","to","the","request"]}
{"code_tokens":["\n	public","static","AjaxNewWindowNotifyingBehavior","onNewWindow","(","SerializableConsumer<AjaxRequestTarget>","onNewWindow",")","\n	","{","\n		Args",".","notNull","(","onNewWindow,","\"onNewWindow\"",")",";","\n\n		return","new","AjaxNewWindowNotifyingBehavior","(",")","\n		","{","\n			private","static","final","long","serialVersionUID","=","1L",";","\n\n			@Override\n			protected","void","onNewWindow","(","AjaxRequestTarget","target",")","\n			","{","\n				onNewWindow",".","accept","(","target",")",";","\n			","}","\n		","}",";","\n	"],"docstring_tokens":["Creates","an","AjaxNewWindowNotifyingBehavior","based","on","lambda","expressions"]}
{"code_tokens":["\n	public","static","IMarkupCache","get","(",")","\n	","{","\n		return","Application",".","get","(",")",".","getMarkupSettings","(",")",".","getMarkupFactory","(",")",".","getMarkupCache","(",")",";","\n	"],"docstring_tokens":["A","convenient","helper","to","get","the","markup","cache","registered","with","the","application"]}
{"code_tokens":["\r\n	public","IPageManager","adapt","(","final","IPageManager","manager",")","\r\n	","{","\r\n		return","new","IPageManager","(",")","\r\n		","{","\r\n			@Override\r\n			public","boolean","supportsVersioning","(",")","\r\n			","{","\r\n				return","manager",".","supportsVersioning","(",")",";","\r\n			","}","\r\n\r\n			@Override\r\n			public","IManageablePage","getPage","(","int","pageId",")","\r\n			","{","\r\n				IManageablePage","page","=","null",";","\r\n				try\r\n				","{","\r\n					lockPage","(","pageId",")",";","\r\n					page","=","manager",".","getPage","(","pageId",")",";","\r\n				","}","\r\n				finally\r\n				","{","\r\n					if","(","page","==","null",")","\r\n					","{","\r\n						unlockPage","(","pageId",")",";","\r\n					","}","\r\n				","}","\r\n				return","page",";","\r\n			","}","\r\n\r\n			@Override\r\n			public","void","removePage","(","IManageablePage","page",")","\r\n			","{","\r\n				if","(","page","!=","null",")","\r\n				","{","\r\n					try\r\n					","{","\r\n						manager",".","removePage","(","page",")",";","\r\n					","}","\r\n					finally\r\n					","{","\r\n						unlockPage","(","page",".","getPageId","(",")",")",";","\r\n					","}","\r\n				","}","\r\n			","}","\r\n\r\n			@Override\r\n			public","void","touchPage","(","IManageablePage","page",")","\r\n			","{","\r\n				lockPage","(","page",".","getPageId","(",")",")",";","\r\n\r\n				manager",".","touchPage","(","page",")",";","\r\n			","}","\r\n\r\n			@Override\r\n			public","void","clear","(",")","\r\n			","{","\r\n				manager",".","clear","(",")",";","\r\n			","}","\r\n\r\n			@Override\r\n			public","void","untouchPage","(","IManageablePage","page",")","\r\n			","{","\r\n				manager",".","untouchPage","(","page",")",";","\r\n			","}","\r\n\r\n			@Override\r\n			public","void","detach","(",")","\r\n			","{","\r\n				try\r\n				","{","\r\n					manager",".","detach","(",")",";","\r\n				","}","\r\n				finally\r\n				","{","\r\n					unlockAllPages","(",")",";","\r\n				","}","\r\n			","}","\r\n\r\n			@Override\r\n			public","IPageStore","getPageStore","(",")","\r\n			","{","\r\n				return","manager",".","getPageStore","(",")",";","\r\n			","}","\r\n\r\n			@Override\r\n			public","void","destroy","(",")","\r\n			","{","\r\n				manager",".","destroy","(",")",";","\r\n			","}","\r\n		","}",";","\r\n	"],"docstring_tokens":["Wraps","a","page","manager","with","this","synchronizer"]}
{"code_tokens":["\n	public","void","reset","(",")","\n	","{","\n		guessed","=","false",";","\n	"],"docstring_tokens":["Resets","this","letter","into","the","default","state"]}
{"code_tokens":["\n	public","LabeledWebMarkupContainer","getFormComponent","(",")","\n	","{","\n		return","component",";","\n	"],"docstring_tokens":["Returns","LabeledWebMarkupContainer","bound","to","this","label"]}
{"code_tokens":["\n	@Override\n	public","void","push","(","HttpServletRequest","httpServletRequest,","PushItem",".",".",".","pushItems",")","\n	","{","\n		LOG",".","warn","(","\n			\"This","PushBuilder","does","nothing",".","Please","use","one","of","the","other","implementations","-","Jetty9","or","Tomcat8",".","5+\"",")",";","\n	"],"docstring_tokens":["Warns","the","dev","to","provide","a","vendor","specific","push","builder","API"]}
{"code_tokens":["\n	private","void","load","(",")","{","\n		if","(","buffer",".","length","(",")","==","0",")","\n		","{","\n			String","path","=","Packages",".","absolutePath","(","scope,","fileName",")",";","\n\n			Application","app","=","Application",".","get","(",")",";","\n\n			//","first","try","default","class","loading","locator","to","find","the","resource\n			IResourceStream","stream","=","app",".","getResourceSettings","(",")","\n				",".","getResourceStreamLocator","(",")","\n				",".","locate","(","scope,","path,","getStyle","(",")",",","getVariation","(",")",",","getLocale","(",")",",","null,","false",")",";","\n\n			if","(","stream","==","null",")","\n			","{","\n				//","if","the","default","locator","didn't","find","the","resource","then","fallback\n				stream","=","new","ResourceStreamLocator","(",")",".","locate","(","scope,","path,","getStyle","(",")",",","getVariation","(",")",",","getLocale","(",")",",","null,","false",")",";","\n			","}","\n\n			if","(","stream","==","null",")","\n			","{","\n				throw","new","IllegalArgumentException","(","\"resource","\"","+","fileName","+","\"","not","found","for","scope","\"","+\n					scope","+","\"","(","path","=","\"","+","path","+","\"",")","\"",")",";","\n			","}","\n\n			setLastModified","(","stream",".","lastModifiedTime","(",")",")",";","\n\n			try\n			","{","\n				if","(","encoding","!=","null",")","\n				","{","\n					buffer",".","append","(","Streams",".","readString","(","stream",".","getInputStream","(",")",",","encoding",")",")",";","\n				","}","\n				else\n				","{","\n					buffer",".","append","(","Streams",".","readString","(","stream",".","getInputStream","(",")",")",")",";","\n				","}","\n			","}","\n			catch","(","IOException","e",")","\n			","{","\n				throw","new","RuntimeException","(","e",")",";","\n			","}","\n			catch","(","ResourceStreamNotFoundException","e",")","\n			","{","\n				throw","new","RuntimeException","(","e",")",";","\n			","}","\n			finally\n			","{","\n				try\n				","{","\n					stream",".","close","(",")",";","\n				","}","\n				catch","(","IOException","e",")","\n				","{","\n					log",".","error","(","e",".","getMessage","(",")",",","e",")",";","\n				","}","\n			","}","\n		","}","\n	"],"docstring_tokens":["Loads","the","template","if","it","is","not","loaded","yet"]}
{"code_tokens":["\n	public","String","getTitle","(",")","\n	","{","\n		return","(","title","!=","null",")","?","title",".","getObject","(",")",":","null",";","\n	"],"docstring_tokens":["Gets","the","title","of","this","step"]}
{"code_tokens":["\n	protected","void","onInit","(","final","IWizardModel","wizardModel",")","\n	","{","\n	"],"docstring_tokens":["Template","method","that","is","called","when","the","step","is","being","initialized"]}
{"code_tokens":["\n	@Override\n	public","final","String","encryptUrlSafe","(","final","String","plainText",")","\n	","{","\n		try\n		","{","\n			byte[]","encrypted","=","encryptStringToByteArray","(","plainText",")",";","\n			Base64",".","Encoder","encoder","=","Base64",".","getUrlEncoder","(",")",".","withoutPadding","(",")",";","\n			byte[]","encoded","=","encoder",".","encode","(","encrypted",")",";","\n			return","new","String","(","encoded,","CHARACTER_ENCODING",")",";","\n		","}","\n		catch","(","GeneralSecurityException","e",")","\n		","{","\n			log",".","error","(","\"Unable","to","encrypt","text","'\"","+","plainText","+","\"'\",","e",")",";","\n			return","null",";","\n		","}","\n		catch","(","UnsupportedEncodingException","e",")","\n		","{","\n			log",".","error","(","\"Unable","to","encrypt","text","'\"","+","plainText","+","\"'\",","e",")",";","\n			return","null",";","\n		","}","\n	"],"docstring_tokens":["Encrypt","a","string","into","a","string","using","URL","safe","Base64","encoding"]}
{"code_tokens":["\n	public","ResourceReference","get","(","Class<?>","scope,","String","name,","Locale","locale,","String","style,\n		String","variation,","boolean","strict",")","\n	","{","\n		return","registry",".","getResourceReference","(","scope,","name,","locale,","style,","variation,","strict,","true",")",";","\n	"],"docstring_tokens":["Resolves","a","ResourceReference","for","a","shared","resource"]}
{"code_tokens":["\n	public","final","Class<?","extends","Page>","getPageClass","(",")","\n	","{","\n		return","WicketObjects",".","resolveClass","(","pageClassName",")",";","\n	"],"docstring_tokens":["Get","the","page","class","registered","with","the","link"]}
{"code_tokens":["\n	@Override\n	public","boolean","linksTo","(","final","Page","page",")","\n	","{","\n		return","page",".","getClass","(",")","==","getPageClass","(",")",";","\n	"],"docstring_tokens":["Whether","this","link","refers","to","the","given","page"]}
{"code_tokens":["\n	private","void","setContainsWicketIdFlag","(","ComponentTag","tag",")","\n	","{","\n		//","check","if","it","is","a","wicket:id","component\n		String","wicketIdAttr","=","getWicketNamespace","(",")","+","\":\"","+","\"id\"",";","\n		boolean","hasWicketId","=","tag",".","getAttributes","(",")",".","get","(","wicketIdAttr",")","!=","null",";","\n\n		if","(","hasWicketId",")","\n		","{","\n			for","(","ComponentTag","componentTag",":","stack",")","\n			","{","\n				componentTag",".","setContainsWicketId","(","hasWicketId",")",";","\n			","}","\n		","}","\n	"],"docstring_tokens":["Checks","if","the","tag","is","a","Wicket","component","explicitly","added"]}
{"code_tokens":["\n	public","boolean","getBoolean","(","final","Matcher","matcher,","final","boolean","defaultValue",")","\n	","{","\n		final","String","value","=","get","(","matcher",")",";","\n		return","value","==","null","?","defaultValue",":","value",".","equals","(","\"true\"",")",";","\n	"],"docstring_tokens":["Gets","a","boolean","by","parsing","the","String","matched","by","this","capturing","group"]}
{"code_tokens":["\n	protected","IPropertiesFactory","getPropertiesFactory","(",")","\n	","{","\n		return","Application",".","get","(",")",".","getResourceSettings","(",")",".","getPropertiesFactory","(",")",";","\n	"],"docstring_tokens":["Get","the","properties","file","factory","which","loads","the","properties","based","on","locale","and","style","from	",".properties","and",".xml","files"]}
{"code_tokens":["\n	public","String","stripCommentsAndWhitespace","(","String","original",")","\n	","{","\n		//","let's","be","optimistic\n		AppendingStringBuffer","result","=","new","AppendingStringBuffer","(","original",".","length","(",")","/","2",")",";","\n		int","state","=","REGULAR_TEXT",";","\n		boolean","wasNewLineInWhitespace","=","false",";","\n\n		for","(","int","i","=","0",";","i","<","original",".","length","(",")",";","++i",")","\n		","{","\n			char","c","=","original",".","charAt","(","i",")",";","\n			char","next","=","(","i","<","original",".","length","(",")","-","1",")","?","original",".","charAt","(","i","+","1",")",":","0",";","\n			char","prev","=","(","i",">","0",")","?","original",".","charAt","(","i","-","1",")",":","0",";","\n\n			if","(","state","==","WHITE_SPACE",")","\n			","{","\n				//","WICKET","2060\n				if","(","c","==","'\\n'","&&","!wasNewLineInWhitespace",")","\n				","{","\n					result",".","append","(","\"\\n\"",")",";","\n					wasNewLineInWhitespace","=","true",";","\n				","}","\n				if","(","Character",".","isWhitespace","(","next",")","==","false",")","\n				","{","\n					state","=","REGULAR_TEXT",";","\n				","}","\n				continue",";","\n			","}","\n\n			if","(","state","==","REGULAR_TEXT",")","\n			","{","\n				if","(","c","==","'/'","&&","next","==","'/'","&&","prev","!=","'\\\\'",")","\n				","{","\n					state","=","LINE_COMMENT",";","\n					continue",";","\n				","}","\n				else","if","(","c","==","'/'","&&","next","==","'*'",")","\n				","{","\n					state","=","MULTILINE_COMMENT",";","\n					++i",";","\n					continue",";","\n				","}","\n				else","if","(","c","==","'/'",")","\n				","{","\n					//","This","might","be","a","divide","operator,","or","it","might","be","a","regular","expression",".","\n					//","Work","out","if","it's","a","regular","expression","by","finding","the","previous","non-whitespace\n					//","char,","which\n					//","will","be","either","'='","or","'","(","'",".","If","it's","not,","it's","just","a","divide","operator",".","\n					int","idx","=","result",".","length","(",")","-","1",";","\n					while","(","idx",">","0",")","\n					","{","\n						char","tmp","=","result",".","charAt","(","idx",")",";","\n						if","(","Character",".","isWhitespace","(","tmp",")",")","\n						","{","\n							idx--",";","\n							continue",";","\n						","}","\n						if","(","tmp","==","'='","||","tmp","==","'","(","'","||","tmp","==","'","{","'","||","tmp","==","':'","||","tmp","==","','","||\n							tmp","==","'['","||","tmp","==","'",";","'","||","tmp","==","'!'",")","\n						","{","\n							state","=","REG_EXP",";","\n							break",";","\n						","}","\n						break",";","\n					","}","\n				","}","\n				else","if","(","Character",".","isWhitespace","(","c",")","&&","Character",".","isWhitespace","(","next",")",")","\n				","{","\n					//","WICKET-2060\n					if","(","c","==","'\\n'","||","next","==","'\\n'",")","\n					","{","\n						c","=","'\\n'",";","\n						wasNewLineInWhitespace","=","true",";","\n					","}","\n					else\n					","{","\n						c","=","'","'",";","\n						wasNewLineInWhitespace","=","false",";","\n					","}","\n					//","ignore","all","whitespace","characters","after","this","one\n					state","=","WHITE_SPACE",";","\n				","}","\n				else","if","(","c","==","'\\''",")","\n				","{","\n					state","=","STRING_SINGLE_QUOTE",";","\n				","}","\n				else","if","(","c","==","'\"'",")","\n				","{","\n					state","=","STRING_DOUBLE_QUOTES",";","\n				","}","\n				else","if","(","c","==","'`'",")","\n				","{","\n					state","=","TEMPLATE_LITERAL",";","\n				","}","\n				result",".","append","(","c",")",";","\n				continue",";","\n			","}","\n\n			if","(","state","==","LINE_COMMENT",")","\n			","{","\n				if","(","c","==","'\\n'","||","c","==","'\\r'",")","\n				","{","\n					state","=","REGULAR_TEXT",";","\n					result",".","append","(","c",")",";","\n					continue",";","\n				","}","\n			","}","\n\n			if","(","state","==","MULTILINE_COMMENT",")","\n			","{","\n				if","(","c","==","'*'","&&","next","==","'/'",")","\n				","{","\n					state","=","REGULAR_TEXT",";","\n					++i",";","\n					continue",";","\n				","}","\n			","}","\n\n			if","(","state","==","STRING_SINGLE_QUOTE",")","\n			","{","\n				//","to","leave","a","string","expression","we","need","even","(","or","zero",")","number","of","backslashes\n				int","count","=","getPrevCount","(","original,","i,","'\\\\'",")",";","\n				if","(","c","==","'\\''","&&","count","%","2","==","0",")","\n				","{","\n					state","=","REGULAR_TEXT",";","\n				","}","\n				result",".","append","(","c",")",";","\n				continue",";","\n			","}","\n\n			if","(","state","==","STRING_DOUBLE_QUOTES",")","\n			","{","\n				//","to","leave","a","string","expression","we","need","even","(","or","zero",")","number","of","backslashes\n				int","count","=","getPrevCount","(","original,","i,","'\\\\'",")",";","\n				if","(","c","==","'\"'","&&","count","%","2","==","0",")","\n				","{","\n					state","=","REGULAR_TEXT",";","\n				","}","\n				result",".","append","(","c",")",";","\n				continue",";","\n			","}","\n\n			if","(","state","==","REG_EXP",")","\n			","{","\n				//","to","leave","regular","expression","we","need","even","(","or","zero",")","number","of","backslashes\n				int","count","=","getPrevCount","(","original,","i,","'\\\\'",")",";","\n				if","(","c","==","'/'","&&","count","%","2","==","0",")","\n				","{","\n					state","=","REGULAR_TEXT",";","\n				","}","\n				result",".","append","(","c",")",";","\n			","}","\n\n			if","(","state","==","TEMPLATE_LITERAL",")","{","\n				//","to","leave","a","template","literal","expression","we","need","even","(","or","zero",")","number","of","backslashes\n				int","count","=","getPrevCount","(","original,","i,","'\\\\'",")",";","\n				if","(","c","==","'`'","&&","count","%","2","==","0",")","{","\n					state","=","REGULAR_TEXT",";","\n				","}","\n				result",".","append","(","c",")",";","\n				continue",";","\n			","}","\n		","}","\n\n		return","result",".","toString","(",")",";","\n	"],"docstring_tokens":["Removes","javascript","comments","and","whitespace","from","specified","string"]}
{"code_tokens":["\n	@Override\n	public","int","getCompatibilityScore","(","Request","request",")","\n	","{","\n		return","Integer",".","MIN_VALUE","+","1",";","\n	"],"docstring_tokens":["Use","this","mapper","as","a","last","option"]}
{"code_tokens":["\n	protected","FileSystemResource","getFileSystemResource","(",")","\n	","{","\n		if","(","path","==","null",")","\n		","{","\n			throw","new","WicketRuntimeException","(","\n				\"Please","override","#getResource","(",")","and","provide","a","path","if","using","a","constructor","which","doesn't","take","one","as","argument",".","\"",")",";","\n		","}","\n		return","new","FileSystemResource","(","path",")",";","\n	"],"docstring_tokens":["Gets","the","file","system","resource","to","be","used","for","the","resource","reference"]}
{"code_tokens":["\n	public","static","StringHeaderItem","forString","(","CharSequence","string",")","\n	","{","\n		return","new","StringHeaderItem","(","string",")",";","\n	"],"docstring_tokens":["Creates","a","StringHeaderItem","for","the","snippet"]}
{"code_tokens":["\n	public","HttpServletRequest","getWrapper","(","final","HttpServletRequest","request",")","\n	","{","\n		if","(","isEnabled","(",")","&&","needsWrapper","(","request",")",")","\n		","{","\n			return","newRequestWrapper","(","request",")",";","\n		","}","\n		return","request",";","\n	"],"docstring_tokens":["Wrap","the","given","request"]}
{"code_tokens":["\n	public","final","void","remove","(","final","String","key",")","\n	","{","\n		final","Cookie","cookie","=","getCookie","(","key",")",";","\n		if","(","cookie","!=","null",")","\n		","{","\n			remove","(","cookie",")",";","\n		","}","\n	"],"docstring_tokens":["Remove","the","cookie","identified","by","the","key"]}
{"code_tokens":["\n	public","final","void","remove","(","final","FormComponent<?>","formComponent",")","\n	","{","\n		remove","(","getKey","(","formComponent",")",")",";","\n	"],"docstring_tokens":["Remove","the","cookie","identified","by","the","form","component"]}
{"code_tokens":["\n	public","final","String","load","(","final","String","key",")","\n	","{","\n		final","Cookie","cookie","=","getCookie","(","key",")",";","\n		if","(","cookie","!=","null",")","\n		","{","\n			return","cookie",".","getValue","(",")",";","\n		","}","\n		return","null",";","\n	"],"docstring_tokens":["Retrieve","the","cookie","value","by","means","of","its","key"]}
{"code_tokens":["\n	public","final","String","load","(","final","FormComponent<?>","formComponent",")","\n	","{","\n		String","value","=","load","(","getKey","(","formComponent",")",")",";","\n		if","(","value","!=","null",")","\n		","{","\n			//","Assign","the","retrieved/persisted","value","to","the","component\n			formComponent",".","setModelValue","(","new","String[]","{","value","}",")",";","\n		","}","\n		return","value",";","\n	"],"docstring_tokens":["Retrieve","the","cookie","value","associated","with","the","formComponent","and","load","the","model","object","with	","the","cookie","value"]}
{"code_tokens":["\n	public","final","void","save","(","String","name,","final","String","value",")","\n	","{","\n		Cookie","cookie","=","getCookie","(","name",")",";","\n		if","(","cookie","==","null",")","\n		","{","\n			cookie","=","new","Cookie","(","name,","value",")",";","\n		","}","\n		else\n		","{","\n			cookie",".","setValue","(","value",")",";","\n		","}","\n		save","(","cookie",")",";","\n	"],"docstring_tokens":["Create","a","Cookie","with","key","and","value","and","save","it","in","the","browser","with","the","next","response"]}
{"code_tokens":["\n	public","final","void","save","(","final","FormComponent<?>","formComponent",")","\n	","{","\n		save","(","getKey","(","formComponent",")",",","formComponent",".","getValue","(",")",")",";","\n	"],"docstring_tokens":["Save","the","form","components","model","value","in","a","cookie"]}
{"code_tokens":["\n	protected","final","boolean","hasAny","(","Roles","roles",")","\n	","{","\n		if","(","roles",".","isEmpty","(",")",")","\n		","{","\n			return","true",";","\n		","}","\n		else\n		","{","\n			return","roleCheckingStrategy",".","hasAnyRole","(","roles",")",";","\n		","}","\n	"],"docstring_tokens":["Gets","whether","any","of","the","given","roles","applies","to","the","authorizer"]}
{"code_tokens":["\n	protected","void","setWicketSession","(","final","Request","request,","final","Session","session",")","\n	","{","\n		setAttribute","(","request,","Session",".","SESSION_ATTRIBUTE_NAME,","session",")",";","\n	"],"docstring_tokens":["Stores","the","Wicket","Session","in","an","attribute","in","the","HttpSession"]}
{"code_tokens":["\n	@Override\n	public","void","registerBindListener","(","BindListener","listener",")","\n	","{","\n		bindListeners",".","add","(","listener",")",";","\n	"],"docstring_tokens":["Registers","listener","invoked","when","session","is","bound"]}
{"code_tokens":["\n	@Override\n	public","void","unregisterBindListener","(","BindListener","listener",")","\n	","{","\n		bindListeners",".","remove","(","listener",")",";","\n	"],"docstring_tokens":["Unregisters","listener","invoked","when","session","is","bound"]}
{"code_tokens":["\r\n	public","final","void","setComponentTagOnly","(","boolean","componentTagOnly",")","\r\n	","{","\r\n		this",".","componentTagOnly","=","componentTagOnly",";","\r\n	"],"docstring_tokens":["Ignore","raw","markup","and","iterate","over","component","and","wicket","tags","only"]}
{"code_tokens":["\r\n	public","final","void","setWicketTagOnly","(","boolean","wicketTagOnly",")","\r\n	","{","\r\n		this",".","wicketTagOnly","=","wicketTagOnly",";","\r\n	"],"docstring_tokens":["Ignore","raw","markup","and","component","tags,","and","iterate","over","WicketTags","only"]}
{"code_tokens":["\n	public","static","IPageRequestHandler","getLastHandler","(","RequestCycle","cycle",")","\n	","{","\n		return","cycle",".","getMetaData","(","LAST_HANDLER_KEY",")",";","\n	"],"docstring_tokens":["retrieves","last","handler","from","request","cycle"]}
{"code_tokens":["\n	public","static","IPageRequestHandler","getFirstHandler","(","RequestCycle","cycle",")","\n	","{","\n		return","cycle",".","getMetaData","(","FIRST_HANDLER_KEY",")",";","\n	"],"docstring_tokens":["retrieves","first","handler","from","the","request","cycle"]}
{"code_tokens":["\n	public","void","configure","(","Application","application",")","\n	","{","\n		application",".","setMetaData","(","KEY,","this",")",";","\n	"],"docstring_tokens":["Binds","this","configuration","to","the","application","instance"]}
{"code_tokens":["\r\n	public","static","IMarkupFragment","findStartTag","(","final","IMarkupFragment","markup,","final","String","tagName",")","\r\n	","{","\r\n		MarkupStream","stream","=","new","MarkupStream","(","markup",")",";","\r\n\r\n		while","(","stream",".","skipUntil","(","WicketTag",".","class",")",")","\r\n		","{","\r\n			ComponentTag","tag","=","stream",".","getTag","(",")",";","\r\n			if","(","tag",".","isOpen","(",")","||","tag",".","isOpenClose","(",")",")","\r\n			","{","\r\n				WicketTag","wtag","=","(","WicketTag",")","tag",";","\r\n				if","(","tagName",".","equalsIgnoreCase","(","wtag",".","getName","(",")",")",")","\r\n				","{","\r\n					return","stream",".","getMarkupFragment","(",")",";","\r\n				","}","\r\n\r\n				stream",".","skipToMatchingCloseTag","(","tag",")",";","\r\n			","}","\r\n\r\n			stream",".","next","(",")",";","\r\n		","}","\r\n\r\n		return","null",";","\r\n	"],"docstring_tokens":["Searches","for","tagName","in","the","given","markup"]}
{"code_tokens":["\n	protected","int","inversedComponentOrder","(","RecordedHeaderItem","item1,","RecordedHeaderItem","item2",")","\n	","{","\n		return","item1",".","getMinDepth","(",")","-","item2",".","getMinDepth","(",")",";","\n	"],"docstring_tokens":["Compare","two","recorded","PriorityHeaderItems,","converting","the","child-first","order","into	","parent-first"]}
{"code_tokens":["\n	public","RequestCycleSettings",".","RenderStrategy","getRenderStrategy","(",")","\n	","{","\n		return","renderStrategy",";","\n	"],"docstring_tokens":["Gets","in","what","way","the","render","part","of","a","request","is","handled"]}
{"code_tokens":["\n	public","Duration","getTimeout","(",")","\n	","{","\n		return","timeout",";","\n	"],"docstring_tokens":["Gets","the","time","that","a","request","will","by","default","be","waiting","for","the","previous","request","to","be	","handled","before","giving","up"]}
{"code_tokens":["\n	public","RequestCycleSettings","setTimeout","(","Duration","timeout",")","\n	","{","\n		Args",".","notNull","(","timeout,","\"timeout\"",")",";","\n		this",".","timeout","=","timeout",";","\n		return","this",";","\n	"],"docstring_tokens":["Sets","the","time","that","a","request","will","by","default","be","waiting","for","the","previous","request","to","be	","handled","before","giving","up"]}
{"code_tokens":["\n	public","RequestCycleSettings","setExceptionRetryCount","(","int","retries",")","\n	","{","\n		this",".","exceptionRetryCount","=","retries",";","\n		return","this",";","\n	"],"docstring_tokens":["Sets","how","many","attempts","Wicket","will","make","to","render","the","exception","request","handler","before	","giving","up"]}
{"code_tokens":["\n	protected","MarkupContainer","createJunctionComponent","(","String","id",")","\n	","{","\n		return","new","AjaxFallbackLink<Void>","(","id",")","\n		","{","\n			private","static","final","long","serialVersionUID","=","1L",";","\n\n			@Override\n			public","void","onClick","(","Optional<AjaxRequestTarget>","targetOptional",")","\n			","{","\n				toggle","(",")",";","\n			","}","\n\n			@Override\n			public","boolean","isEnabled","(",")","\n			","{","\n				return","tree",".","getProvider","(",")",".","hasChildren","(","Node",".","this",".","getModelObject","(",")",")",";","\n			","}","\n		","}",";","\n	"],"docstring_tokens":["The","junction","component","expands","and","collapses","this","node"]}
{"code_tokens":["\n	protected","String","getStyleClass","(",")","\n	","{","\n		T","t","=","getModelObject","(",")",";","\n\n		if","(","tree",".","getProvider","(",")",".","hasChildren","(","t",")",")","\n		","{","\n			if","(","tree",".","getState","(","t",")","==","State",".","EXPANDED",")","\n			","{","\n				return","getExpandedStyleClass","(","t",")",";","\n			","}","\n			else\n			","{","\n				return","getCollapsedStyleClass","(",")",";","\n			","}","\n		","}","\n		return","getOtherStyleClass","(",")",";","\n	"],"docstring_tokens":["Get","the","style","class","depending","on","the","current","State","of","this","node"]}
{"code_tokens":["\n	private","void","registerRequestedUrl","(","RequestCycle","cycle",")","\n	","{","\n		IRequestLogger","requestLogger","=","Application",".","get","(",")",".","getRequestLogger","(",")",";","\n		if","(","cycle",".","getRequest","(",")",".","getContainerRequest","(",")","instanceof","HttpServletRequest",")","\n		","{","\n			HttpServletRequest","containerRequest","=","(","HttpServletRequest",")","cycle",".","getRequest","(",")","\n				",".","getContainerRequest","(",")",";","\n\n			AppendingStringBuffer","url","=","new","AppendingStringBuffer","(","containerRequest",".","getRequestURL","(",")",")",";","\n			if","(","containerRequest",".","getQueryString","(",")","!=","null",")","\n				url",".","append","(","\"?\"",")",".","append","(","containerRequest",".","getQueryString","(",")",")",";","\n\n			requestLogger",".","logRequestedUrl","(","url",".","toString","(",")",")",";","\n		","}","\n	"],"docstring_tokens":["Registers","the","requested","URL","with","the","request","logger,","if","one","can","be","determined"]}
{"code_tokens":["\n	private","void","registerHandler","(","IRequestHandler","handler",")","\n	","{","\n		IRequestLogger","requestLogger","=","Application",".","get","(",")",".","getRequestLogger","(",")",";","\n\n		if","(","first",".","get","(",")","==","null",")","\n		","{","\n			first",".","set","(","handler",")",";","\n			requestLogger",".","logEventTarget","(","handler",")",";","\n		","}","\n		requestLogger",".","logResponseTarget","(","handler",")",";","\n	"],"docstring_tokens":["Registers","the","handler","with","the","request","logger"]}
{"code_tokens":["\n	public","static","void","addLocation","(","URL","url",")","\n	","{","\n		urls",".","add","(","url",")",";","\n	"],"docstring_tokens":["Add","the","location","of","a","directory","containing","class","files"]}
{"code_tokens":["\n	public","static","Set<URL>","getLocations","(",")","\n	","{","\n		return","urls",";","\n	"],"docstring_tokens":["Returns","the","list","of","all","configured","locations","of","directories","containing","class","files"]}
{"code_tokens":["\n	private","static","void","addClassLoaderUrls","(","ClassLoader","loader",")","\n	","{","\n		if","(","loader","!=","null",")","\n		","{","\n			final","Enumeration<URL>","resources",";","\n			try\n			","{","\n				resources","=","loader",".","getResources","(","\"\"",")",";","\n			","}","\n			catch","(","IOException","e",")","\n			","{","\n				throw","new","RuntimeException","(","e",")",";","\n			","}","\n			while","(","resources",".","hasMoreElements","(",")",")","\n			","{","\n				URL","location","=","resources",".","nextElement","(",")",";","\n				ReloadingClassLoader",".","addLocation","(","location",")",";","\n			","}","\n		","}","\n	"],"docstring_tokens":["Add","all","the","url","locations","we","can","find","for","the","provided","class","loader"]}
{"code_tokens":["\n	public","void","setListener","(","IChangeListener<Class<?>>","listener",")","\n	","{","\n		this",".","listener","=","listener",";","\n	"],"docstring_tokens":["Sets","the","listener","that","will","be","notified","when","a","class","changes"]}
{"code_tokens":["\n	public","void","destroy","(",")","\n	","{","\n		watcher",".","destroy","(",")",";","\n	"],"docstring_tokens":["Remove","the","ModificationWatcher","from","the","current","reloading","class","loader"]}
{"code_tokens":["\n	@Override\n	public","final","void","dirty","(","boolean","isInitialization",")","\n	","{","\n		Request","request","=","getRequest","(",")",";","\n		if","(","isInitialization","==","false","&&","request","instanceof","WebRequest","&&\n			","(","(","WebRequest",")","request",")",".","isAjax","(",")",")","\n		","{","\n			return",";","\n		","}","\n		super",".","dirty","(","isInitialization",")",";","\n	"],"docstring_tokens":["Prevents","page","from","get","dirty","inside","an","AJAX","request"]}
{"code_tokens":["\n	public","void","putBean","(","final","String","name,","final","Object","bean",")","\n	","{","\n		if","(","beans",".","containsKey","(","name",")",")","\n		","{","\n			throw","new","IllegalArgumentException","(","\"a","bean","with","name","[\"","+","name","+\n				\"]","has","already","been","added","to","the","context\"",")",";","\n		","}","\n		beans",".","put","(","name,","bean",")",";","\n	"],"docstring_tokens":["puts","bean","with","the","given","name","into","the","context"]}
{"code_tokens":["\n	public","void","putBean","(","final","Object","bean",")","\n	","{","\n		putBean","(","bean",".","getClass","(",")",".","getName","(",")",",","bean",")",";","\n	"],"docstring_tokens":["puts","bean","with","into","the","context"]}
{"code_tokens":["\n	protected","List<T>","getData","(",")","\n	","{","\n		return","list",";","\n	"],"docstring_tokens":["Subclass","to","lazy","load","the","list"]}
{"code_tokens":["\n	@Override\n	public","long","sizeOf","(","Serializable","obj",")","\n	","{","\n		if","(","obj","==","null",")","\n		","{","\n			return","0",";","\n		","}","\n		try\n		","{","\n			SizeRecodingOutputStream","recorder","=","new","SizeRecodingOutputStream","(",")",";","\n			recorder",".","writeObject","(","obj",")",";","\n			return","recorder",".","getTotalSize","(",")",";","\n		","}","\n		catch","(","IOException","e",")","\n		","{","\n			LOG",".","error","(","\"An","error","occurred","while","calculating","the","size","of","object:","\"","+","obj,","e",")",";","\n			return","-1",";","\n		","}","\n\n	"],"docstring_tokens":["Calculates","full","size","of","object","iterating","over","its","hierarchy","graph"]}
{"code_tokens":["\n	protected","void","prependLicenseHeader","(","final","File","file",")","\n	","{","\n		try\n		","{","\n			String","content","=","new","org",".","apache",".","wicket",".","util",".","file",".","File","(","file",")",".","readString","(",")",";","\n			content","=","getLicenseHeader","(",")","+","LINE_ENDING","+","content",";","\n			new","org",".","apache",".","wicket",".","util",".","file",".","File","(","file",")",".","write","(","content",")",";","\n		","}","\n		catch","(","Exception","e",")","\n		","{","\n			throw","new","AssertionError","(","e",".","getMessage","(",")",")",";","\n		","}","\n	"],"docstring_tokens":["Add","the","license","header","to","the","start","of","the","file","without","caring","about","existing","license	","headers"]}
{"code_tokens":["\n	protected","T","getObject","(","Component","component",")","\n	","{","\n		return","null",";","\n	"],"docstring_tokens":["Returns","the","object","from","the","model","with","the","use","of","the","component","where","it","is","attached","to"]}
{"code_tokens":["\n	protected","LoopItem","newItem","(","int","iteration",")","\n	","{","\n		return","new","LoopItem","(","iteration",")",";","\n	"],"docstring_tokens":["Create","a","new","LoopItem","for","loop","at","iteration"]}
{"code_tokens":["\n	protected","void","renderItem","(","final","LoopItem","item",")","\n	","{","\n		item",".","render","(",")",";","\n	"],"docstring_tokens":["Renders","this","loop","iteration"]}
{"code_tokens":["\n	protected","final","Component","getComponent","(",")","\n	","{","\n		return","component",";","\n	"],"docstring_tokens":["Gets","the","component","that","this","handler","is","bound","to"]}
{"code_tokens":["\n	@Override\n	public","final","boolean","doesProvideNewPage","(",")","\n	","{","\n		return","getProvision","(",")",".","doesProvideNewPage","(",")",";","\n	"],"docstring_tokens":["Returns","whether","or","not","the","page","instance","held","by","this","provider","has","been","instantiated","by","the	","provider"]}
{"code_tokens":["\r\n	public","void","generate","(","final","Collection<Contact>","collection,","final","int","count",")","\r\n	","{","\r\n		for","(","int","i","=","0",";","i","<","count",";","i++",")","\r\n		","{","\r\n			collection",".","add","(","generate","(",")",")",";","\r\n		","}","\r\n	"],"docstring_tokens":["generats","count","number","contacts","and","puts","them","into","collection","	","collection"]}
{"code_tokens":["\n	@Override\n	public","void","respond","(","IRequestCycle","requestCycle",")","\n	","{","\n		Attributes","attributes","=","new","Attributes","(","requestCycle",".","getRequest","(",")",",\n			requestCycle",".","getResponse","(",")",")",";","\n\n		ResourceStreamResource","resource","=","new","ResourceStreamResource","(","resourceStream",")",";","\n\n		configure","(","resource",")",";","\n\n		resource",".","respond","(","attributes",")",";","\n	"],"docstring_tokens":["Responds","by","sending","the","contents","of","the","resource","stream"]}
{"code_tokens":["\n	protected","void","configure","(","ResourceStreamResource","resource",")","\n	","{","\n		resource",".","setFileName","(","fileName",")",";","\n		if","(","contentDisposition","!=","null",")","\n		","{","\n			resource",".","setContentDisposition","(","contentDisposition",")",";","\n		","}","\n		else\n		","{","\n			resource",".","setContentDisposition","(","Strings",".","isEmpty","(","fileName",")","?","ContentDisposition",".","INLINE\n					:","ContentDisposition",".","ATTACHMENT",")",";","\n		","}","\n\n		final","Duration","cacheDuration","=","getCacheDuration","(",")",";","\n		if","(","cacheDuration","!=","null",")","\n		","{","\n			resource",".","setCacheDuration","(","cacheDuration",")",";","\n		","}","\n	"],"docstring_tokens":["Configures","the","ResourceStreamResource","used","by","this","request","handler"]}
{"code_tokens":["\n	public","static","boolean","exists","(",")","\n	","{","\n		return","get","(","false",")","!=","null",";","\n	"],"docstring_tokens":["Checks","if","ThreadContext","exists","for","the","current","thread"]}
{"code_tokens":["\n	public","static","void","setApplication","(","Application","application",")","\n	","{","\n		ThreadContext","context","=","get","(","true",")",";","\n		context",".","application","=","application",";","\n	"],"docstring_tokens":["Binds","the","specified","application","to","current","thread"]}
{"code_tokens":["\n	public","static","void","setRequestCycle","(","RequestCycle","requestCycle",")","\n	","{","\n		ThreadContext","context","=","get","(","true",")",";","\n		context",".","requestCycle","=","requestCycle",";","\n	"],"docstring_tokens":["Binds","the","RequestCycle","to","current","thread"]}
{"code_tokens":["\n	public","static","void","setSession","(","Session","session",")","\n	","{","\n		ThreadContext","context","=","get","(","true",")",";","\n		context",".","session","=","session",";","\n	"],"docstring_tokens":["Binds","the","session","to","current","thread"]}
{"code_tokens":["\n	public","static","ThreadContext","detach","(",")","\n	","{","\n		ThreadContext","value","=","threadLocal",".","get","(",")",";","\n		threadLocal",".","remove","(",")",";","\n		return","value",";","\n	"],"docstring_tokens":["Cleans","the","ThreadContext","and","returns","previous","context"]}
{"code_tokens":["\n	@Override\n	public","List<HeaderItem>","getDependencies","(",")","\n	","{","\n		return","getBundleReference","(",")",".","getDependencies","(",")",";","\n	"],"docstring_tokens":["Returns","the","dependencies","of","the","replacing","resource","reference"]}
{"code_tokens":["\r\n	public","final","FilterFactoryManager","add","(","final","AbstractRequestWrapperFactory","wrapperFactory",")","\r\n	","{","\r\n		if","(","wrapperFactory","!=","null",")","\r\n		","{","\r\n			if","(","filters","==","null",")","\r\n			","{","\r\n				filters","=","Generics",".","newArrayList","(","2",")",";","\r\n			","}","\r\n\r\n			filters",".","add","(","wrapperFactory",")",";","\r\n		","}","\r\n\r\n		return","this",";","\r\n	"],"docstring_tokens":["Add","a","filter","factory"]}
{"code_tokens":["\r\n	public","final","FilterFactoryManager","addXForwardedRequestWrapperFactory","(","FilterConfig","config",")","\r\n	","{","\r\n		if","(","config","==","null",")","\r\n		","{","\r\n			config","=","WebApplication",".","get","(",")",".","getWicketFilter","(",")",".","getFilterConfig","(",")",";","\r\n		","}","\r\n\r\n		XForwardedRequestWrapperFactory","factory","=","new","XForwardedRequestWrapperFactory","(",")",";","\r\n		factory",".","init","(","config",")",";","\r\n\r\n		return","add","(","factory",")",";","\r\n	"],"docstring_tokens":["Add","a","X-Forwarded","web","filter","factory"]}
{"code_tokens":["\r\n	public","final","FilterFactoryManager","addSecuredRemoteAddressRequestWrapperFactory","(","\r\n		FilterConfig","config",")","\r\n	","{","\r\n		if","(","config","==","null",")","\r\n		","{","\r\n			config","=","WebApplication",".","get","(",")",".","getWicketFilter","(",")",".","getFilterConfig","(",")",";","\r\n		","}","\r\n\r\n		SecuredRemoteAddressRequestWrapperFactory","factory","=","new","SecuredRemoteAddressRequestWrapperFactory","(",")",";","\r\n		factory",".","init","(","config",")",";","\r\n\r\n		return","add","(","factory",")",";","\r\n	"],"docstring_tokens":["Add","a","Secure","remote","address","web","filter","factory"]}
{"code_tokens":["\r\n	public","final","long","getMilliseconds","(",")","\r\n	","{","\r\n		return","value",";","\r\n	"],"docstring_tokens":["Retrieves","the","number","of","milliseconds","in","this","Time","value"]}
{"code_tokens":["\n	@Around","(","\"execution","(","*","org",".","apache",".","wicket",".","request",".","IRequestHandler",".","respond","(",".",".",")",")","\"",")","\n	public","Object","aroundOnRender","(","ProceedingJoinPoint","joinPoint",")","throws","Throwable\n	","{","\n		return","measureTime","(","\"core/requesthandler/respond\",","joinPoint",")",";","\n	"],"docstring_tokens":["Collects","data","how","often","a","request","handler","processes","its","response"]}
{"code_tokens":["\n	public","static","String","extension","(","final","String","path",")","\n	","{","\n		if","(","path",".","indexOf","(","'",".","'",")","!=","-1",")","\n		","{","\n			return","Strings",".","lastPathComponent","(","path,","'",".","'",")",";","\n		","}","\n		return","null",";","\n	"],"docstring_tokens":["Gets","extension","from","path"]}
{"code_tokens":["\n	public","static","String","filename","(","final","String","path",")","\n	","{","\n		return","Strings",".","lastPathComponent","(","path",".","replace","(","'/',","java",".","io",".","File",".","separatorChar",")",",\n			java",".","io",".","File",".","separatorChar",")",";","\n	"],"docstring_tokens":["Gets","filename","from","path"]}
{"code_tokens":["\n	public","static","Instant","getLastModified","(","File","file",")","\n	","{","\n		//","get","file","modification","timestamp\n		long","millis","=","file",".","lastModified","(",")",";","\n\n		//","zero","indicates","the","timestamp","could","not","be","retrieved","or","the","file","does","not","exist\n		if","(","millis","==","0",")","\n		","{","\n			return","null",";","\n		","}","\n\n		//","last","file","modification","timestamp\n		return","Instant",".","ofEpochMilli","(","millis",")",";","\n	"],"docstring_tokens":["get","last","modification","timestamp","for","file"]}
{"code_tokens":["\n	@Override\n	public","void","addCookie","(","final","Cookie","cookie",")","\n	","{","\n		//","remove","any","potential","duplicates\n		//","see","http://www",".","ietf",".","org/rfc/rfc2109",".","txt,","p",".","4",".","3",".","3\n		Iterator<Cookie>","iterator","=","cookies",".","iterator","(",")",";","\n		while","(","iterator",".","hasNext","(",")",")","\n		","{","\n			Cookie","old","=","iterator",".","next","(",")",";","\n			if","(","Cookies",".","isEqual","(","cookie,","old",")",")","\n			","{","\n				iterator",".","remove","(",")",";","\n			","}","\n		","}","\n		cookies",".","add","(","cookie",")",";","\n	"],"docstring_tokens":["Add","a","cookie","to","the","response"]}
{"code_tokens":["\n	@Override\n	public","boolean","containsHeader","(","final","String","name",")","\n	","{","\n		return","headers",".","containsKey","(","name",")",";","\n	"],"docstring_tokens":["Check","if","the","response","contains","the","given","header","name"]}
{"code_tokens":["\n	public","byte[]","getBinaryContent","(",")","\n	","{","\n		return","byteStream",".","toByteArray","(",")",";","\n	"],"docstring_tokens":["Get","the","binary","content","that","was","written","to","the","servlet","stream"]}
{"code_tokens":["\n	@Override\n	public","String","getCharacterEncoding","(",")","\n	","{","\n		return","characterEncoding",";","\n	"],"docstring_tokens":["Get","the","character","encoding","of","the","response"]}
{"code_tokens":["\n	public","List<Cookie>","getCookies","(",")","\n	","{","\n		List<Cookie>","copies","=","new","ArrayList<Cookie>","(",")",";","\n		for","(","Cookie","cookie",":","cookies",")","\n		","{","\n			copies",".","add","(","Cookies",".","copyOf","(","cookie",")",")",";","\n		","}","\n		return","copies",";","\n	"],"docstring_tokens":["Get","all","of","the","cookies","that","have","been","added","to","the","response"]}
{"code_tokens":["\n	public","String","getDocument","(",")","\n	","{","\n		if","(","mode","==","MODE_BINARY",")","\n		","{","\n			return","new","String","(","byteStream",".","toByteArray","(",")",")",";","\n		","}","\n		else\n		","{","\n			return","stringWriter",".","getBuffer","(",")",".","toString","(",")",";","\n		","}","\n	"],"docstring_tokens":["Get","the","text","document","that","was","written","as","part","of","this","response"]}
{"code_tokens":["\n	@Override\n	public","ServletOutputStream","getOutputStream","(",")","\n	","{","\n		if","(","mode","==","MODE_TEXT",")","\n		","{","\n			throw","new","IllegalArgumentException","(","\"Can't","write","binary","after","already","selecting","text\"",")",";","\n		","}","\n		mode","=","MODE_BINARY",";","\n		return","servletStream",";","\n	"],"docstring_tokens":["Get","the","output","stream","for","writing","binary","data","from","the","servlet"]}
{"code_tokens":["\n	@Override\n	public","PrintWriter","getWriter","(",")","throws","IOException\n	","{","\n		if","(","mode","==","MODE_BINARY",")","\n		","{","\n			throw","new","IllegalArgumentException","(","\"Can't","write","text","after","already","selecting","binary\"",")",";","\n		","}","\n		mode","=","MODE_TEXT",";","\n		return","printWriter",";","\n	"],"docstring_tokens":["Get","the","print","writer","for","writing","text","output","for","this","response"]}
{"code_tokens":["\n	public","void","initialize","(",")","\n	","{","\n		cookies",".","clear","(",")",";","\n		headers",".","clear","(",")",";","\n		errorMessage","=","null",";","\n		redirectLocation","=","null",";","\n		status","=","HttpServletResponse",".","SC_OK",";","\n		characterEncoding","=","\"UTF-8\"",";","\n		locale","=","null",";","\n\n		byteStream","=","new","ByteArrayOutputStream","(",")",";","\n		servletStream","=","new","ServletOutputStream","(",")","\n		","{","\n			@Override\n			public","boolean","isReady","(",")","\n			","{","\n				return","true",";","\n			","}","\n\n			@Override\n			public","void","setWriteListener","(","WriteListener","writeListener",")","\n			","{","\n			","}","\n\n			@Override\n			public","void","write","(","int","b",")","\n			","{","\n				byteStream",".","write","(","b",")",";","\n			","}","\n		","}",";","\n		stringWriter","=","new","StringWriter","(",")",";","\n		printWriter","=","new","PrintWriter","(","stringWriter",")","\n		","{","\n			@Override\n			public","void","close","(",")","\n			","{","\n				//","Do","nothing\n			","}","\n\n			@Override\n			public","void","flush","(",")","\n			","{","\n				//","Do","nothing\n			","}","\n		","}",";","\n		mode","=","MODE_NONE",";","\n	"],"docstring_tokens":["Reset","the","response","ready","for","reuse"]}
{"code_tokens":["\n	public","boolean","isError","(",")","\n	","{","\n		return","(","status","!=","HttpServletResponse",".","SC_OK",")",";","\n	"],"docstring_tokens":["Return","whether","the","servlet","returned","an","error","code","or","not"]}
{"code_tokens":["\n	public","boolean","isRedirect","(",")","\n	","{","\n		return","(","redirectLocation","!=","null",")",";","\n	"],"docstring_tokens":["Check","whether","the","response","was","redirected","or","not"]}
{"code_tokens":["\n	@Override\n	public","void","reset","(",")","\n	","{","\n		initialize","(",")",";","\n	"],"docstring_tokens":["Delegate","to","initialize","method"]}
{"code_tokens":["\n	@Override\n	public","void","setLocale","(","final","Locale","locale",")","\n	","{","\n		this",".","locale","=","locale",";","\n	"],"docstring_tokens":["Set","the","locale","in","the","response","header"]}
{"code_tokens":["\n	@Override\n	public","void","setStatus","(","final","int","status",")","\n	","{","\n		this",".","status","=","status",";","\n	"],"docstring_tokens":["Set","the","status","for","this","response"]}
{"code_tokens":["\n	public","final","CompoundValidator<T>","add","(","IValidator<T>","validator",")","\n	","{","\n		Args",".","notNull","(","validator,","\"validator\"",")",";","\n\n		validators",".","add","(","validator",")",";","\n		return","this",";","\n	"],"docstring_tokens":["Adds","an","IValidator","to","the","chain","of","validators"]}
{"code_tokens":["\n	public","final","void","setVariables","(","final","Map<?,","?>","variables",")","\n	","{","\n		this",".","variables","=","variables",";","\n	"],"docstring_tokens":["Sets","the","Map","of","variables"]}
{"code_tokens":["\n	@Override\n	protected","String","getValue","(","final","String","variableName",")","\n	","{","\n		return","Strings",".","toString","(","variables",".","get","(","variableName",")",")",";","\n	"],"docstring_tokens":["Retrieves","a","value","for","a","variable","name","during","interpolation"]}
{"code_tokens":["\n	public","static","String","interpolate","(","final","String","string,","final","Map<?,","?>","variables",")","\n	","{","\n		return","new","MapVariableInterpolator","(","string,","variables",")",".","toString","(",")",";","\n	"],"docstring_tokens":["Interpolates","a","String","with","the","arguments","defined","in","the","given","Map"]}
{"code_tokens":["\n	public","void","reset","(",")","\n	","{","\n		pos","=","0",";","\n	"],"docstring_tokens":["Resets","the","iterator","position","back","to","the","beginning","of","the","array"]}
{"code_tokens":["\n	@Override\n	public","Contact","get","(","long","id",")","\n	","{","\n		Contact","c","=","map",".","get","(","id",")",";","\n		if","(","c","==","null",")","\n			throw","new","RuntimeException","(","\"contact","with","id","[\"","+","id","+","\"]","not","found","in","the","database\"",")",";","\n		return","c",";","\n	"],"docstring_tokens":["find","contact","by","id"]}
{"code_tokens":["\n	@Override\n	public","Iterator<Contact>","find","(","QueryParam","qp",")","\n	","{","\n		List<Contact>","sublist","=","getIndex","(","qp",".","getSort","(",")",")",".","subList","(","(","int",")","qp",".","getFirst","(",")",",\n			","(","int",")","(","qp",".","getFirst","(",")","+","qp",".","getCount","(",")",")",")",";","\n		return","sublist",".","iterator","(",")",";","\n	"],"docstring_tokens":["select","contacts","and","apply","sort"]}
{"code_tokens":["\n	public","static","void","writeScript","(","final","Response","response,","AttributeMap","attributes",")","\n	","{","\n		response",".","write","(","\"<script\"",")",";","\n		response",".","write","(","attributes",".","toCharSequence","(",")",")",";","\n		response",".","write","(","\"></script>\"",")",";","\n		response",".","write","(","\"\\n\"",")",";","\n	"],"docstring_tokens":["Write","a","reference","to","a","javascript","file","to","the","response","object"]}
{"code_tokens":["\n	public","static","void","writeJavaScript","(","final","Response","response,","final","CharSequence","text,","String","id",")","\n	","{","\n		writeOpenTag","(","response,","id",")",";","\n		response",".","write","(","Strings",".","replaceAll","(","text,","\"</\",","\"<\\\\/\"",")",")",";","\n		writeCloseTag","(","response",")",";","\n	"],"docstring_tokens":["Write","the","simple","text","to","the","response","object","surrounded","by","a","script","tag"]}
{"code_tokens":["\n	public","static","void","writeCloseTag","(","final","Response","response",")","\n	","{","\n		response",".","write","(","SCRIPT_CONTENT_SUFFIX",")",";","\n		response",".","write","(","\"</script>\\n\"",")",";","\n	"],"docstring_tokens":["Write","close","script","tag","for","inline","script"]}
{"code_tokens":["\n	protected","WicketTester","create","(",")","\n	","{","\n		return","new","WicketTester","(",")",";","\n	"],"docstring_tokens":["Allows","setup","of","the","tester","instance"]}
{"code_tokens":["\n	private","Object","lookupSpringBean","(","ApplicationContext","ctx,","String","name,","Class<?>","clazz",")","\n	","{","\n		try\n		","{","\n			//","If","the","name","is","set","the","lookup","is","clear\n			if","(","name","!=","null",")","\n			","{","\n				return","ctx",".","getBean","(","name,","clazz",")",";","\n			","}","\n\n			//","If","the","beanField","information","is","null","the","clazz","is","going","to","be","used\n			if","(","fieldResolvableType","==","null",")","\n			","{","\n				return","ctx",".","getBean","(","clazz",")",";","\n			","}","\n\n			//","If","the","given","class","is","a","list","try","to","get","the","generic","of","the","list\n			Class<?>","lookupClass","=","fieldElementsResolvableType","!=","null","?","\n				fieldElementsResolvableType",".","resolve","(",")",":","clazz",";","\n\n			//","Else","the","lookup","is","done","via","Generic\n			List<String>","names","=","loadBeanNames","(","ctx,","lookupClass",")",";","\n\n			Object","foundBeans","=","getBeansByName","(","ctx,","names",")",";","\n\n			if","(","foundBeans","!=","null",")","\n			","{","\n				return","foundBeans",";","\n			","}","\n\n			throw","new","IllegalStateException","(","\n				\"Concrete","bean","could","not","be","received","from","the","application","context","for","class:","\"","+\n					clazz",".","getName","(",")","+","\"",".","\"",")",";","\n		","}","\n		catch","(","NoSuchBeanDefinitionException","e",")","\n		","{","\n			throw","new","IllegalStateException","(","\"bean","with","name","[\"","+","name","+","\"]","and","class","[\"","+\n				clazz",".","getName","(",")","+","\"]","not","found\",","e",")",";","\n		","}","\n	"],"docstring_tokens":["Looks","up","a","bean","by","its","name","and","class"]}
{"code_tokens":["\n	private","Object","getBeansByName","(","ApplicationContext","ctx,","List<String>","names",")","\n	","{","\n		FieldBeansCollector","beansCollector","=","new","FieldBeansCollector","(","fieldResolvableType",")",";","\n		\n		for","(","String","beanName",":","names",")","\n		","{","\n			RootBeanDefinition","beanDef","=","getBeanDefinition","(","ctx,","beanName",")",";","\n\n			if","(","beanDef","==","null",")","\n			","{","\n				continue",";","\n			","}","\n\n			ResolvableType","candidateResolvableType","=","null",";","\n\n			//check","if","we","have","the","class","of","the","bean","or","the","factory","method",".","\n			//Usually","if","use","XML","as","config","file","we","have","the","class","while","we","\n			//have","the","factory","method","if","we","use","Java-based","configuration",".","\n			if","(","beanDef",".","hasBeanClass","(",")",")","\n			","{","\n				candidateResolvableType","=","ResolvableType",".","forClass","(","beanDef",".","getBeanClass","(",")",")",";","\n			","}","\n			else","if","(","beanDef",".","getResolvedFactoryMethod","(",")","!=","null",")","\n			","{","\n				candidateResolvableType","=","ResolvableType",".","forMethodReturnType","(","\n					beanDef",".","getResolvedFactoryMethod","(",")",")",";","\n			","}","\n\n			if","(","candidateResolvableType","==","null",")","\n			","{","\n				continue",";","\n			","}","\n\n			boolean","exactMatch","=","fieldResolvableType",".","isAssignableFrom","(","candidateResolvableType",")",";","\n			boolean","elementMatch","=","fieldElementsResolvableType","!=","null","&&","fieldElementsResolvableType",".","isAssignableFrom","(","candidateResolvableType",")",";","\n\n			if","(","exactMatch",")","\n			","{","\n				this",".","beanName","=","beanName",";","\n				return","ctx",".","getBean","(","beanName",")",";","\n			","}","\n			\n			if","(","elementMatch",")","\n			","{","\n				beansCollector",".","addBean","(","beanName,","ctx",".","getBean","(","beanName",")",")",";","\n			","}","\n\n		","}","\n		\n		return","beansCollector",".","getBeansToInject","(",")",";","\n	"],"docstring_tokens":["Retrieves","a","list","of","beans","or","a","single","bean","for","the","given","list","of","names","and","assignable","to","the	","current","field","to","inject"]}
{"code_tokens":["\n	public","RootBeanDefinition","getBeanDefinition","(","final","ApplicationContext","ctx,","final","String","name",")","\n	","{","\n		ConfigurableListableBeanFactory","beanFactory","=","(","(","AbstractApplicationContext",")","ctx",")",".","getBeanFactory","(",")",";","\n\n		BeanDefinition","beanDef","=","beanFactory",".","containsBean","(","name",")","?\n			beanFactory",".","getMergedBeanDefinition","(","name",")",":","null",";","\n\n		if","(","beanDef","instanceof","RootBeanDefinition",")","\n		","{","\n			return","(","RootBeanDefinition",")","beanDef",";","\n		","}","\n\n		return","null",";","\n	"],"docstring_tokens":["Gets","the","root","bean","definition","for","the","given","name"]}
{"code_tokens":["\n	@Override\n	protected","boolean","getStatelessHint","(",")","\n	","{","\n		return","resourceReference","!=","null",";","\n	"],"docstring_tokens":["For","ResourceReferences","this","link","is","stateless"]}
{"code_tokens":["\n	public","boolean","matches","(",")","\n	","{","\n		return","matcher",".","matches","(",")",";","\n	"],"docstring_tokens":["Whether","the","matcher","matches","the","pattern"]}
{"code_tokens":["\r\n	public","void","configure","(","Application","application",")","\r\n	","{","\r\n		if","(","application",".","getMetaData","(","CDI_CONFIGURATION_KEY",")","!=","null",")","\r\n		","{","\r\n			throw","new","IllegalStateException","(","\"Cdi","already","configured","for","this","application\"",")",";","\r\n		","}","\r\n		application",".","setMetaData","(","CDI_CONFIGURATION_KEY,","this",")",";","\r\n\r\n		RequestCycleListenerCollection","listeners","=","new","RequestCycleListenerCollection","(",")",";","\r\n		application",".","getRequestCycleListeners","(",")",".","add","(","listeners",")",";","\r\n\r\n		//","enable","conversation","propagation\r\n		if","(","getPropagation","(",")","!=","ConversationPropagation",".","NONE",")","\r\n		","{","\r\n			listeners",".","add","(","new","ConversationPropagator","(","application,","getPropagation","(",")",")",")",";","\r\n			application",".","getComponentPreOnBeforeRenderListeners","(",")",".","add","(","\r\n					new","AutoConversationManager","(","getPropagation","(",")",")",")",";","\r\n			application",".","getComponentPreOnBeforeRenderListeners","(",")",".","add","(","\r\n					new","ConversationExpiryChecker","(",")",")",";","\r\n		","}","\r\n\r\n		//","enable","detach","event\r\n		listeners",".","add","(","new","DetachEventEmitter","(",")",")",";","\r\n\r\n		NonContextual",".","of","(","application",")",".","postConstruct","(","application",")",";","\r\n\r\n		//","enable","injection","of","various","framework","components\r\n		application",".","getSessionListeners","(",")",".","add","(","new","SessionInjector","(",")",")",";","\r\n		application",".","getComponentInstantiationListeners","(",")",".","add","(","new","ComponentInjector","(",")",")",";","\r\n		application",".","getBehaviorInstantiationListeners","(",")",".","add","(","new","BehaviorInjector","(",")",")",";","\r\n\r\n		//","enable","cleanup\r\n		application",".","getApplicationListeners","(",")",".","add","(","new","CdiShutdownCleaner","(",")",")",";","\r\n	"],"docstring_tokens":["Configures","the","specified","application"]}
{"code_tokens":["\n	protected","boolean","isLast","(",")","\n	","{","\n		return","getIndex","(",")","==","getParent","(",")",".","size","(",")","-","1",";","\n	"],"docstring_tokens":["Is","this","the","last","branch","in","the","containing","subtree"]}
{"code_tokens":["\n	protected","static","Map<String,","String>","loadPath","(","final","String","path",")","throws","IOException\n	","{","\n		return","loadFile","(","new","File","(","path",")",")",";","\n	"],"docstring_tokens":["Loads","mappings","from","a","file","path"]}
{"code_tokens":["\n	public","final","IBreadCrumbModel","getBreadCrumbModel","(",")","\n	","{","\n		return","breadCrumbModel",";","\n	"],"docstring_tokens":["Gets","the","bread","crumb","panel"]}
{"code_tokens":["\n	public","final","void","setBreadCrumbModel","(","final","IBreadCrumbModel","breadCrumbModel",")","\n	","{","\n		this",".","breadCrumbModel","=","breadCrumbModel",";","\n	"],"docstring_tokens":["Sets","the","bread","crumb","panel"]}
{"code_tokens":["\n	public","final","Pattern","pattern","(",")","\n	","{","\n		return","pattern","(","0",")",";","\n	"],"docstring_tokens":["Gets","the","regular","expression","Pattern","for","this","MetaPattern","by","compiling","it"]}
{"code_tokens":["\n	public","final","Pattern","pattern","(","final","int","flags",")","\n	","{","\n		compile","(","flags",")",";","\n		return","compiledPattern",";","\n	"],"docstring_tokens":["Gets","the","regular","expression","Pattern","for","this","MetaPattern","by","compiling","it","using","the","given	","flags"]}
{"code_tokens":["\n	@Override\n	public","String","toString","(",")","\n	","{","\n		if","(","pattern","!=","null",")","\n		","{","\n			return","pattern",".","pattern","(",")",";","\n		","}","\n		else\n		","{","\n			final","StringBuilder","buffer","=","new","StringBuilder","(",")",";","\n			for","(","MetaPattern","metaPattern",":","patterns",")","\n			","{","\n				buffer",".","append","(","metaPattern",")",";","\n			","}","\n			return","buffer",".","toString","(",")",";","\n		","}","\n	"],"docstring_tokens":["Converts","this","MetaPattern","to","a","String"]}
{"code_tokens":["\n	private","synchronized","void","compile","(","final","int","flags",")","\n	","{","\n		if","(","compiledPattern","==","null",")","\n		","{","\n			bind","(","1",")",";","\n			compiledPattern","=","Pattern",".","compile","(","toString","(",")",",","flags",")",";","\n		","}","\n	"],"docstring_tokens":["Compiles","this","MetaPattern","with","the","given","Java","regular","expression","flags"]}
{"code_tokens":["\r\n	protected","boolean","contains","(","final","String","name",")","\r\n	","{","\r\n		return","REPLACE_FOR_TAGS",".","contains","(","name",".","toLowerCase","(","Locale",".","ROOT",")",")",";","\r\n	"],"docstring_tokens":["Allows","subclasses","to","easily","expand","the","list","of","tag","which","needs","to","be","expanded"]}
{"code_tokens":["\n	public","static","AjaxFormChoiceComponentUpdatingBehavior","onUpdateChoice","(","\n		SerializableConsumer<AjaxRequestTarget>","onUpdateChoice",")","\n	","{","\n		Args",".","notNull","(","onUpdateChoice,","\"onUpdateChoice\"",")",";","\n		return","new","AjaxFormChoiceComponentUpdatingBehavior","(",")","\n		","{","\n			private","static","final","long","serialVersionUID","=","1L",";","\n\n			@Override\n			protected","void","onUpdate","(","AjaxRequestTarget","target",")","\n			","{","\n				onUpdateChoice",".","accept","(","target",")",";","\n			","}","\n		","}",";","\n	"],"docstring_tokens":["Creates","an","AjaxFormChoiceComponentUpdatingBehavior","based","on","lambda","expressions"]}
{"code_tokens":["\n	public","MarkupSettings","setStripComments","(","boolean","stripComments",")","\n	","{","\n		this",".","stripComments","=","stripComments",";","\n		return","this",";","\n	"],"docstring_tokens":["Enables","stripping","of","markup","comments","denoted","in","markup","by","HTML","comment","tagging"]}
{"code_tokens":["\n	public","MarkupSettings","setThrowExceptionOnMissingXmlDeclaration","(","boolean","throwException",")","\n	","{","\n		throwExceptionOnMissingXmlDeclaration","=","throwException",";","\n		return","this",";","\n	"],"docstring_tokens":["If","true,","an","exception","is","thrown","if","the","markup","file","does","not","contain","a","xml","declaration"]}
{"code_tokens":["\n	public","static","Bytes","bytes","(","final","long","bytes",")","\n	","{","\n		return","new","Bytes","(","bytes",")",";","\n	"],"docstring_tokens":["Instantiate","immutable","Bytes","value","object"]}
{"code_tokens":["\n	public","final","long","bytes","(",")","\n	","{","\n		return","value",";","\n	"],"docstring_tokens":["Gets","the","byte","count","represented","by","this","value","object"]}
{"code_tokens":["\n	@Override\n	public","String","toString","(",")","\n	","{","\n		return","toString","(","Locale",".","getDefault","(","Locale",".","Category",".","FORMAT",")",")",";","\n	"],"docstring_tokens":["Converts","this","byte","count","to","a","string","using","the","default","locale"]}
{"code_tokens":["\n	public","String","toString","(","final","Locale","locale",")","\n	","{","\n		if","(","terabytes","(",")",">=","1",".","0",")","\n		","{","\n			return","unitString","(","terabytes","(",")",",","\"TB\",","locale",")",";","\n		","}","\n\n		if","(","gigabytes","(",")",">=","1",".","0",")","\n		","{","\n			return","unitString","(","gigabytes","(",")",",","\"GB\",","locale",")",";","\n		","}","\n\n		if","(","megabytes","(",")",">=","1",".","0",")","\n		","{","\n			return","unitString","(","megabytes","(",")",",","\"MB\",","locale",")",";","\n		","}","\n\n		if","(","kilobytes","(",")",">=","1",".","0",")","\n		","{","\n			return","unitString","(","kilobytes","(",")",",","\"KB\",","locale",")",";","\n		","}","\n\n		return","Long",".","toString","(","value",")","+","\"","bytes\"",";","\n	"],"docstring_tokens":["Converts","this","byte","count","to","a","string","using","the","given","locale"]}
{"code_tokens":["\n	private","String","unitString","(","final","double","value,","final","String","units,","final","Locale","locale",")","\n	","{","\n		return","StringValue",".","valueOf","(","value,","locale",")","+","units",";","\n	"],"docstring_tokens":["Convert","value","to","formatted","floating","point","number","and","units"]}
{"code_tokens":["\n	public","final","boolean","isRendered","(",")","\n	","{","\n		return","rendered",";","\n	"],"docstring_tokens":["Gets","whether","or","not","this","message","has","been","rendered"]}
{"code_tokens":["\n	public","final","void","markRendered","(",")","\n	","{","\n		rendered","=","true",";","\n	"],"docstring_tokens":["Marks","this","message","as","rendered"]}
{"code_tokens":["\n	public","final","Serializable","getMessage","(",")","\n	","{","\n		return","message",";","\n	"],"docstring_tokens":["Gets","the","actual","message"]}
{"code_tokens":["\n	public","final","boolean","isDebug","(",")","\n	","{","\n		return","isLevel","(","DEBUG",")",";","\n	"],"docstring_tokens":["Gets","whether","the","current","level","is","DEBUG","or","up"]}
{"code_tokens":["\n	public","final","boolean","isInfo","(",")","\n	","{","\n		return","isLevel","(","INFO",")",";","\n	"],"docstring_tokens":["Gets","whether","the","current","level","is","INFO","or","up"]}
{"code_tokens":["\n	public","final","boolean","isSuccess","(",")","\n	","{","\n		return","isLevel","(","SUCCESS",")",";","\n	"],"docstring_tokens":["Gets","whether","the","current","level","is","SUCCESS","or","up"]}
{"code_tokens":["\n	public","final","boolean","isWarning","(",")","\n	","{","\n		return","isLevel","(","WARNING",")",";","\n	"],"docstring_tokens":["Gets","whether","the","current","level","is","WARNING","or","up"]}
{"code_tokens":["\n	public","final","boolean","isError","(",")","\n	","{","\n		return","isLevel","(","ERROR",")",";","\n	"],"docstring_tokens":["Gets","whether","the","current","level","is","ERROR","or","up"]}
{"code_tokens":["\n	public","final","boolean","isFatal","(",")","\n	","{","\n		return","isLevel","(","FATAL",")",";","\n	"],"docstring_tokens":["Gets","whether","the","current","level","is","FATAL","or","up"]}
{"code_tokens":["\n	public","final","boolean","isUndefined","(",")","\n	","{","\n		return","(","getLevel","(",")","==","UNDEFINED",")",";","\n	"],"docstring_tokens":["Gets","whether","the","current","level","is","UNDEFINED"]}
{"code_tokens":["\n","public","static","IPropertyReflectionAwareModel<?>","resolvePropertyModelFrom","(","FormComponent<?>","component",")","\n","{","\n","IModel<?>","model","=","component",".","getModel","(",")",";","\n","while","(","true",")","\n","{","\n","if","(","model","==","null",")","\n","{","\n","return","null",";","\n","}","\n","if","(","model","instanceof","IPropertyReflectionAwareModel",")","\n","{","\n","return","(","IPropertyReflectionAwareModel<?>",")","model",";","\n","}","\n","if","(","model","instanceof","IWrapModel<?>",")","\n","{","\n","model","=","(","(","IWrapModel<?>",")","model",")",".","getWrappedModel","(",")",";","\n","continue",";","\n","}","\n","break",";","//","not","model","found\n","}","\n","return","null",";","\n"],"docstring_tokens":["Lookup","for","property-aware","model,","attached","to","certain","form","component"]}
{"code_tokens":["\n	@Override\n	public","Url","mapHandler","(","IRequestHandler","requestHandler",")","\n	","{","\n		Url","homeUrl","=","super",".","mapHandler","(","requestHandler",")",";","\n\n		if","(","homeUrl","!=","null",")","\n		","{","\n			String","locale","=","Session",".","get","(",")",".","getLocale","(",")",".","toString","(",")",";","\n			homeUrl",".","getSegments","(",")",".","add","(","0,","locale",")",";","\n		","}","\n\n		return","homeUrl",";","\n	"],"docstring_tokens":["Sets","the","current","session","Locale","as","first","segment","in","the","Url"]}
{"code_tokens":["\n	@Override\n	public","IRequestHandler","mapRequest","(","Request","request",")","\n	","{","\n		IRequestHandler","requestHandler","=","null",";","\n		Url","url","=","request",".","getUrl","(",")",";","\n		List<String>","segments","=","url",".","getSegments","(",")",";","\n\n		if","(","segments",".","size","(",")","==","1",")","\n		","{","\n			String","localeAsString","=","segments",".","get","(","0",")",";","\n			Locale","locale","=","LocaleHelper",".","parseLocale","(","localeAsString",")",";","\n			if","(","locale","!=","null",")","\n			","{","\n				Session",".","get","(",")",".","setLocale","(","locale",")",";","\n				segments",".","remove","(","0",")",";","\n\n				Request","requestWithoutLocale","=","request",".","cloneWithUrl","(","url",")",";","\n				requestHandler","=","super",".","mapRequest","(","requestWithoutLocale",")",";","\n			","}","\n		","}","\n\n		return","requestHandler",";","\n	"],"docstring_tokens":["Removes","the","leading","segment","if","it","a","valid","Locale"]}
{"code_tokens":["\n	public","CSPHeaderConfiguration","disabled","(",")","\n	","{","\n		return","clear","(",")",";","\n	"],"docstring_tokens":["Removes","all","directives","from","the","CSP,","returning","an","empty","configuration"]}
{"code_tokens":["\n	public","CSPHeaderConfiguration","remove","(","CSPDirective","directive",")","\n	","{","\n		directives",".","remove","(","directive",")",";","\n		return","recalculateState","(",")",";","\n	"],"docstring_tokens":["Removes","the","given","directive","from","the","configuration"]}
{"code_tokens":["\n	public","CSPHeaderConfiguration","add","(","CSPDirective","directive,","CSPRenderable",".",".",".","values",")","\n	","{","\n		for","(","CSPRenderable","value",":","values",")","\n		","{","\n			doAddDirective","(","directive,","value",")",";","\n		","}","\n		return","recalculateState","(",")",";","\n	"],"docstring_tokens":["Adds","the","given","values","to","the","CSP","directive","on","this","configuraiton"]}
{"code_tokens":["\n	public","CSPHeaderConfiguration","add","(","CSPDirective","directive,","String",".",".",".","values",")","\n	","{","\n		for","(","String","value",":","values",")","\n		","{","\n			doAddDirective","(","directive,","new","FixedCSPValue","(","value",")",")",";","\n		","}","\n		return","recalculateState","(",")",";","\n	"],"docstring_tokens":["Adds","a","free-form","value","to","a","directive","for","the","CSP","header"]}
{"code_tokens":["\n	public","CSPHeaderConfiguration","clear","(",")","\n	","{","\n		directives",".","clear","(",")",";","\n		return","recalculateState","(",")",";","\n	"],"docstring_tokens":["Removes","all","CSP","directives","from","the","configuration"]}
{"code_tokens":["\n	private","void","internalAdd","(","String","name,","Object","object",")","\n	","{","\n		final","HeaderKey","key","=","new","HeaderKey","(","name",")",";","\n\n		List<Object>","values","=","headers",".","get","(","key",")",";","\n\n		if","(","values","==","null",")","\n		","{","\n			values","=","new","ArrayList<>","(",")",";","\n			headers",".","put","(","key,","values",")",";","\n		","}","\n		values",".","add","(","object",")",";","\n	"],"docstring_tokens":["internally","add","new","object","to","header","values"]}
{"code_tokens":["\n	public","void","setDateHeader","(","String","name,","Instant","time",")","\n	","{","\n		//","remove","previous","values\n		removeHeader","(","name",")",";","\n\n		//","add","time","object","to","values\n		addDateHeader","(","name,","time",")",";","\n	"],"docstring_tokens":["add","date","header","value"]}
{"code_tokens":["\n	public","String","getHeader","(","String","name",")","\n	","{","\n		final","List<Object>","objects","=","headers",".","get","(","new","HeaderKey","(","name",")",")",";","\n\n		if","(","objects","==","null","||","objects",".","isEmpty","(",")",")","\n		","{","\n			return","null",";","\n		","}","\n		return","valueToString","(","objects",".","get","(","0",")",")",";","\n	"],"docstring_tokens":["Gets","the","header","identified","with","the","name","as","a","String"]}
{"code_tokens":["\n	public","boolean","isEmpty","(",")","\n	","{","\n		return","headers",".","isEmpty","(",")",";","\n	"],"docstring_tokens":["Check","if","collection","is","empty"]}
{"code_tokens":["\n	public","int","getCount","(",")","\n	","{","\n		return","headers",".","size","(",")",";","\n	"],"docstring_tokens":["get","number","of","headers"]}
{"code_tokens":["\n	public","static","AjaxClientInfoBehavior","onClientInfo","(","SerializableBiConsumer<AjaxRequestTarget,","WebClientInfo>","onClientInfo",")","\n	","{","\n		Args",".","notNull","(","onClientInfo,","\"onClientInfo\"",")",";","\n\n		return","new","AjaxClientInfoBehavior","(",")","\n		","{","\n\n			private","static","final","long","serialVersionUID","=","1L",";","\n\n			@Override\n			protected","void","onClientInfo","(","AjaxRequestTarget","target,","WebClientInfo","clientInfo",")","\n			","{","\n				onClientInfo",".","accept","(","target,","clientInfo",")",";","\n			","}","\n		","}",";","\n	"],"docstring_tokens":["Creates","an","AjaxClientInfoBehavior","based","on","lambda","expressions"]}
{"code_tokens":["\n	public","final","IWizardStep","getActiveStep","(",")","\n	","{","\n		return","getWizardModel","(",")",".","getActiveStep","(",")",";","\n	"],"docstring_tokens":["Convenience","method","to","get","the","active","step","from","the","model"]}
{"code_tokens":["\n	public","Form<?>","getForm","(",")","\n	","{","\n		return","form",";","\n	"],"docstring_tokens":["Gets","the","form","in","which","the","view","is","nested,","and","on","which","the","wizard","buttons","work"]}
{"code_tokens":["\n	@Override\n	public","void","onCancel","(",")","\n	","{","\n	"],"docstring_tokens":["Called","when","the","wizard","is","canceled"]}
{"code_tokens":["\n	@Override\n	public","void","onFinish","(",")","\n	","{","\n	"],"docstring_tokens":["Called","when","the","wizard","is","finished"]}
{"code_tokens":["\r\n	public","static","String","absolutePath","(","final","Class<?>","p,","final","String","path",")","\r\n	","{","\r\n		String","packName","=","(","p","!=","null","?","extractPackageName","(","p",")",":","\"\"",")",";","\r\n		return","absolutePath","(","packName,","path",")",";","\r\n	"],"docstring_tokens":["Takes","a","package","and","a","path","to","a","resource","and","returns","an","absolute","path","to","the","resource"]}
{"code_tokens":["\r\n	public","static","String","parent","(","final","String","packageName",")","\r\n	","{","\r\n		int","pos","=","packageName",".","lastIndexOf","(","\"",".","\"",")",";","\r\n		String","parent",";","\r\n		if","(","pos","<","0",")","\r\n		","{","\r\n			pos","=","packageName",".","lastIndexOf","(","\"/\"",")",";","\r\n			if","(","pos","<","0",")","\r\n			","{","\r\n				pos","=","0",";","\r\n			","}","\r\n		","}","\r\n		parent","=","packageName",".","substring","(","0,","pos",")",";","\r\n		return","parent",";","\r\n	"],"docstring_tokens":["Gets","the","parent","package","name"]}
{"code_tokens":["\n	protected","boolean","mustProtect","(","IRequestHandler","handler",")","\n	","{","\n		if","(","handler","instanceof","IRequestHandlerDelegate",")","\n		","{","\n			return","mustProtect","(","(","(","IRequestHandlerDelegate",")","handler",")",".","getDelegateHandler","(",")",")",";","\n		","}","\n		\n		return","settings",".","mustProtectRequest","(","handler",")",";","\n	"],"docstring_tokens":["Must","the","given","handler","be","protected"]}
{"code_tokens":["\n	@Override\n	protected","void","onConfigure","(",")","\n	","{","\n		super",".","onConfigure","(",")",";","\n		setVisible","(","getTable","(",")",".","getRowCount","(",")","==","0",")",";","\n	"],"docstring_tokens":["Only","shows","this","toolbar","when","there","are","no","rows"]}
{"code_tokens":["\n	protected","boolean","enableAutoSubmit","(",")","\n	","{","\n		return","true",";","\n	"],"docstring_tokens":["Returns","true","if","the","constructed","choice","filter","should","autosubmit","the","form","when","its","value","is	","changed"]}
{"code_tokens":["\n	public","final","void","setPosition","(","final","int","pos",")","\n	","{","\n		inputPosition","=","pos",";","\n	"],"docstring_tokens":["Position","the","reader","at","the","index","provided"]}
{"code_tokens":["\n	@Override\n	public","void","renderHead","(","final","Component","component,","HtmlHeaderContainer","container",")","\n	","{","\n		if","(","!","(","component","instanceof","WebMarkupContainer",")",")","\n		","{","\n			throw","new","WicketRuntimeException","(","Classes",".","simpleName","(","component",".","getClass","(",")",")","+\n				\"","can","only","be","associated","with","WebMarkupContainer",".","\"",")",";","\n		","}","\n\n		renderHeadFromAssociatedMarkupFile","(","(","WebMarkupContainer",")","component,","container",")",";","\n	"],"docstring_tokens":["Render","the","header","from","the","associated","markup","file"]}
{"code_tokens":["\n	public","final","IPageable","getPageable","(",")","\n	","{","\n		return","pageable",";","\n	"],"docstring_tokens":["IPageable","this","navigator","is","linked","with"]}
{"code_tokens":["\n	private","void","checkMutability","(",")","\n	","{","\n		if","(","immutable",")","\n		","{","\n			throw","new","UnsupportedOperationException","(","\"Map","is","immutable\"",")",";","\n		","}","\n	"],"docstring_tokens":["Throws","an","exception","if","ValueMap","is","immutable"]}
{"code_tokens":["\n	public","final","void","authorize","(","final","Action","action,","final","Roles","rolesToAdd",")","\n	","{","\n		if","(","action","==","null",")","\n		","{","\n			throw","new","IllegalArgumentException","(","\"Argument","action","cannot","be","null\"",")",";","\n		","}","\n\n		if","(","rolesToAdd","==","null",")","\n		","{","\n			throw","new","IllegalArgumentException","(","\"Argument","rolesToAdd","cannot","be","null\"",")",";","\n		","}","\n\n		Roles","roles","=","rolesForAction",".","get","(","action",")",";","\n		if","(","roles","==","null",")","\n		","{","\n			roles","=","new","Roles","(",")",";","\n			rolesForAction",".","put","(","action,","roles",")",";","\n		","}","\n		roles",".","addAll","(","rolesToAdd",")",";","\n	"],"docstring_tokens":["Gives","permission","for","the","given","roles","to","perform","the","given","action"]}
{"code_tokens":["\n	public","final","void","authorizeAll","(","final","Action","action",")","\n	","{","\n		if","(","action","==","null",")","\n		","{","\n			throw","new","IllegalArgumentException","(","\"Argument","action","cannot","be","null\"",")",";","\n		","}","\n\n		rolesForAction",".","remove","(","action",")",";","\n	"],"docstring_tokens":["Remove","all","authorization","for","the","given","action"]}
{"code_tokens":["\n	public","final","Roles","rolesFor","(","final","Action","action",")","\n	","{","\n		if","(","action","==","null",")","\n		","{","\n			throw","new","IllegalArgumentException","(","\"Argument","action","cannot","be","null\"",")",";","\n		","}","\n\n		return","rolesForAction",".","get","(","action",")",";","\n	"],"docstring_tokens":["Gets","the","roles","that","have","a","binding","for","the","given","action"]}
{"code_tokens":["\n	public","final","boolean","isAttached","(",")","\n	","{","\n		return","attached",";","\n	"],"docstring_tokens":["Gets","whether","this","model","has","been","attached","to","the","current","session"]}
{"code_tokens":["\n	protected","final","void","setAttached","(",")","\n	","{","\n		attached","=","true",";","\n	"],"docstring_tokens":["Set","this","model","in","an","attached","state"]}
{"code_tokens":["\r\n	protected","boolean","urlStartsWith","(","final","Url","url,","final","String",".",".",".","segments",")","\r\n	","{","\r\n		if","(","url","==","null",")","\r\n		","{","\r\n			return","false",";","\r\n		","}","\r\n\r\n		List<String>","urlSegments","=","url",".","getSegments","(",")",";","\r\n		\r\n		for","(","int","i","=","0",";","i","<","segments",".","length",";","++i",")","\r\n		","{","\r\n			String","segment","=","segments[i]",";","\r\n			String","urlSegment","=","safeSegmentGetter","(","urlSegments,","i,","null",")",";","\r\n			if","(","urlSegment","==","null","&&","getOptionalPlaceholder","(","segment",")","==","null",")","\r\n			","{","\r\n				//","if","the","'segment'","has","static","value","or","is","mandatory","placeholder\r\n				return","false",";","\r\n			","}","\r\n			else","if","(","!segment",".","equals","(","urlSegment",")","&&\r\n			","(","getPlaceholder","(","segment",")","==","null","&&\r\n			","getOptionalPlaceholder","(","segment",")","==","null",")",")","\r\n			","{","\r\n				return","false",";","\r\n			","}","\r\n		","}","\r\n			\r\n		return","true",";","\r\n	"],"docstring_tokens":["Returns","true","if","the","given","url","starts","with","specified","segments"]}
{"code_tokens":["\n	public","static","boolean","isRelative","(","final","String","url",")","\n	","{","\n		//","the","regex","means","\"doesn't","start","with","'scheme://'\"\n		if","(","(","url","!=","null",")","&&","(","url",".","startsWith","(","\"/\"",")","==","false",")","&&","(","!url",".","matches","(","\"^\\\\w+\\\\:\\\\/\\\\/",".","*\"",")",")","&&\n			!","(","url",".","startsWith","(","\"#\"",")",")",")","\n		","{","\n			return","true",";","\n		","}","\n		else\n		","{","\n			return","false",";","\n		","}","\n	"],"docstring_tokens":["Checks","if","the","url","is","relative","or","absolute"]}
{"code_tokens":["\n	public","static","String","rewriteToContextRelative","(","String","url,","IRequestCycle","requestCycle",")","\n	","{","\n		if","(","isRelative","(","url",")",")","\n		","{","\n			return","requestCycle",".","getUrlRenderer","(",")",".","renderContextRelativeUrl","(","url",")",";","\n		","}","\n		else\n		","{","\n			return","url",";","\n		","}","\n	"],"docstring_tokens":["Rewrites","a","relative","url","to","be","context","relative,","leaves","absolute","urls","same"]}
{"code_tokens":["\n	public","ValidationError","addKey","(","String","key",")","\n	","{","\n		Args",".","notEmpty","(","key,","\"key\"",")",";","\n\n		if","(","keys","==","null",")","\n		","{","\n			keys","=","new","ArrayList<>","(","1",")",";","\n		","}","\n		keys",".","add","(","key",")",";","\n		return","this",";","\n	"],"docstring_tokens":["Adds","a","key","to","the","list","of","keys","that","will","be","tried","against","IErrorMessageSource","to	","locate","the","error","message","string"]}
{"code_tokens":["\n	public","final","Map<String,","Object>","getVariables","(",")","\n	","{","\n		if","(","vars","==","null",")","\n		","{","\n			vars","=","new","HashMap<>","(","2",")",";","\n		","}","\n		return","vars",";","\n	"],"docstring_tokens":["Retrieves","the","variables","map","for","this","error"]}
{"code_tokens":["\n	public","final","ValidationError","setVariables","(","Map<String,","Object>","vars",")","\n	","{","\n		Args",".","notNull","(","vars,","\"vars\"",")",";","\n\n		this",".","vars","=","vars",";","\n		return","this",";","\n	"],"docstring_tokens":["Sets","the","variables","map","for","this","error"]}
{"code_tokens":["\n	public","final","FeedbackCollector","setRecursive","(","boolean","value",")","\n	","{","\n		recursive","=","value",";","\n		return","this",";","\n	"],"docstring_tokens":["Controls","whether","or","not","feedback","will","be","collected","recursively","from","the","descendants","of","the	","specified","component"]}
{"code_tokens":["\n	public","final","List<FeedbackMessage>","collect","(",")","\n	","{","\n		return","collect","(","IFeedbackMessageFilter",".","ALL",")",";","\n	"],"docstring_tokens":["Collects","all","feedback","messages"]}
{"code_tokens":["\n	public","final","List<FeedbackMessage>","collect","(","final","IFeedbackMessageFilter","filter",")","\n	","{","\n		final","List<FeedbackMessage>","messages","=","new","ArrayList<>","(",")",";","\n\n		if","(","includeSession","&&","Session",".","exists","(",")",")","\n		","{","\n			messages",".","addAll","(","Session",".","get","(",")",".","getFeedbackMessages","(",")",".","messages","(","filter",")",")",";","\n		","}","\n\n		if","(","component","!=","null","&&","component",".","hasFeedbackMessage","(",")",")","\n		","{","\n			messages",".","addAll","(","component",".","getFeedbackMessages","(",")",".","messages","(","filter",")",")",";","\n		","}","\n\n		if","(","component","!=","null","&&","recursive","&&","component","instanceof","MarkupContainer",")","\n		","{","\n			","(","(","MarkupContainer",")","component",")",".","visitChildren","(","new","IVisitor<Component,","Void>","(",")","\n			","{","\n				@Override\n				public","void","component","(","Component","object,","IVisit<Void>","visit",")","\n				","{","\n					if","(","!shouldRecurseInto","(","object",")",")","\n					","{","\n						visit",".","dontGoDeeper","(",")",";","\n						return",";","\n					","}","\n\n					if","(","object",".","hasFeedbackMessage","(",")",")","\n					","{","\n						messages",".","addAll","(","object",".","getFeedbackMessages","(",")",".","messages","(","filter",")",")",";","\n					","}","\n				","}","\n			","}",")",";","\n		","}","\n\n		return","messages",";","\n	"],"docstring_tokens":["Collects","all","feedback","messages","that","match","the","specified","filter"]}
{"code_tokens":["\n	public","final","Visit<Void>","visit","(","final","Component","rootComponent",")","\n	","{","\n		Visit<Void>","visitor","=","new","Visit<Void>","(",")",";","\n		return","visit","(","rootComponent,","visitor",")",";","\n	"],"docstring_tokens":["Render","the","child","hierarchy","headers"]}
{"code_tokens":["\n	public","String","getValue","(",")","\n	","{","\n		return","value",";","\n	"],"docstring_tokens":["The","value","of","the","header"]}
{"code_tokens":["\n	public","void","setValue","(","String","value",")","\n	","{","\n		this",".","value","=","value",";","\n	"],"docstring_tokens":["Sets","the","value","of","the","header"]}
{"code_tokens":["\n	public","HeaderOperation","getOperation","(",")","\n	","{","\n		return","operation",";","\n	"],"docstring_tokens":["Gets","the","header","operation"]}
{"code_tokens":["\n	public","void","setOperation","(","HeaderOperation","operation",")","\n	","{","\n		this",".","operation","=","operation",";","\n	"],"docstring_tokens":["Sets","the","header","operation"]}
{"code_tokens":["\n	public","void","generate","(","Collection<Contact>","collection,","int","count",")","\n	","{","\n		for","(","int","i","=","0",";","i","<","count",";","i++",")","\n		","{","\n			collection",".","add","(","generate","(",")",")",";","\n		","}","\n	"],"docstring_tokens":["generates","count","number","contacts","and","puts","them","into","collection	","collection"]}
{"code_tokens":["\n	public","ILinkParser","addLinkRenderStrategy","(","final","String","pattern,\n		final","ILinkRenderStrategy","renderStrategy",")","\n	","{","\n		final","Pattern","compiledPattern","=","Pattern",".","compile","(","pattern,","Pattern",".","DOTALL",")",";","\n		renderStrategies",".","put","(","compiledPattern,","renderStrategy",")",";","\n		return","this",";","\n	"],"docstring_tokens":["Adds","a","render","strategy","to","the","parser"]}
{"code_tokens":["\n	public","PageParameters","add","(","final","String","name,","final","Object","value",")","\n	","{","\n		return","add","(","name,","value,","Type",".","MANUAL",")",";","\n	"],"docstring_tokens":["Adds","a","page","parameter","to","these","with","name","and","value"]}
{"code_tokens":["\n	public","PageParameters","set","(","final","String","name,","final","Object","value,","final","int","index",")","\n	","{","\n		return","set","(","name,","value,","index,","Type",".","MANUAL",")",";","\n	"],"docstring_tokens":["Sets","the","page","parameter","with","name","and","value","at","the","given","index"]}
{"code_tokens":["\n	public","PageParameters","set","(","final","String","name,","final","Object","value",")","\n	","{","\n		return","set","(","name,","value,","Type",".","MANUAL",")",";","\n	"],"docstring_tokens":["Sets","the","page","parameter","with","name","and","value"]}
{"code_tokens":["\n	public","PageParameters","overwriteWith","(","final","PageParameters","other",")","\n	","{","\n		if","(","this","!=","other",")","\n		","{","\n			indexedParameters","=","other",".","indexedParameters",";","\n			namedParameters","=","other",".","namedParameters",";","\n			locale","=","other",".","locale",";","\n		","}","\n		return","this",";","\n	"],"docstring_tokens":["Copy","the","page","parameters"]}
{"code_tokens":["\n	public","PageParameters","mergeWith","(","final","PageParameters","other",")","\n	","{","\n		if","(","other","!=","null","&&","this","!=","other",")","\n		","{","\n			mergeIndexed","(","other",")",";","\n			mergeNamed","(","other",")",";","\n		","}","\n		return","this",";","\n	"],"docstring_tokens":["Merges","the","page","parameters","into","this,","overwriting","existing","values"]}
{"code_tokens":["\n	public","static","synchronized","WicketMetricsSettings","getSettings","(",")","\n	","{","\n		Application","application","=","Application",".","get","(","getFilterName","(",")",")",";","\n		if","(","application","==","null",")","\n		","{","\n			throw","new","WicketRuntimeException","(","APPLICATION_ERROR",")",";","\n		","}","\n		WicketMetricsSettings","wicketMetricsSettings","=","application",".","getMetaData","(","METRIC_SETTINGS",")",";","\n		if","(","wicketMetricsSettings","==","null",")","\n		","{","\n			wicketMetricsSettings","=","new","WicketMetricsSettings","(",")",";","\n			wicketMetricsSettings",".","setPrefix","(","getFilterName","(",")",")",";","\n			application",".","setMetaData","(","METRIC_SETTINGS,","wicketMetricsSettings",")",";","\n		","}","\n		return","wicketMetricsSettings",";","\n	"],"docstring_tokens":["Gets","the","wicket","metrics","settings"]}
{"code_tokens":["\n	protected","byte[]","computeDigest","(","InputStream","inputStream",")","throws","IOException\n	","{","\n		final","MessageDigest","digest","=","getMessageDigest","(",")",";","\n\n		//","get","actual","buffer","size\n		final","int","bufferLen","=","(","int",")","Math",".","min","(","Integer",".","MAX_VALUE,","bufferSize",".","bytes","(",")",")",";","\n\n		//","allocate","read","buffer\n		final","byte[]","buf","=","new","byte[bufferLen]",";","\n		int","len",";","\n\n		//","read","stream","and","update","message","digest\n		while","(","(","len","=","inputStream",".","read","(","buf",")",")","!=","-1",")","\n		","{","\n			digest",".","update","(","buf,","0,","len",")",";","\n		","}","\n		//","finish","message","digest","and","return","hash\n		return","digest",".","digest","(",")",";","\n	"],"docstring_tokens":["compute","digest","for","resource","stream"]}
{"code_tokens":["\r\n	public","void","addFile","(","String","fieldName,","File","file,","String","contentType",")","\r\n	","{","\r\n		if","(","file","!=","null",")","{","\r\n			if","(","file",".","exists","(",")","==","false",")","\r\n			","{","\r\n				throw","new","IllegalArgumentException","(","\r\n					\"File","does","not","exists",".","You","must","provide","an","existing","file:","\"\r\n						+","file",".","getAbsolutePath","(",")",")",";","\r\n			","}","\r\n\r\n			if","(","file",".","isFile","(",")","==","false",")","\r\n			","{","\r\n				throw","new","IllegalArgumentException","(","\r\n					\"You","can","only","add","a","File,","which","is","not","a","directory",".","Only","files","can","be","uploaded",".","\"",")",";","\r\n			","}","\r\n		","}","\r\n\r\n		if","(","uploadedFiles","==","null",")","\r\n		","{","\r\n			uploadedFiles","=","new","HashMap<>","(",")",";","\r\n		","}","\r\n\r\n		UploadedFile","uf","=","new","UploadedFile","(","fieldName,","file,","contentType",")",";","\r\n\r\n		List<UploadedFile>","filesPerField","=","uploadedFiles",".","get","(","fieldName",")",";","\r\n		if","(","filesPerField","==","null",")","\r\n		","{","\r\n			filesPerField","=","new","ArrayList<>","(",")",";","\r\n			uploadedFiles",".","put","(","fieldName,","filesPerField",")",";","\r\n		","}","\r\n\r\n		filesPerField",".","add","(","uf",")",";","\r\n		setUseMultiPartContentType","(","true",")",";","\r\n	"],"docstring_tokens":["Add","an","uploaded","file","to","the","request"]}
{"code_tokens":["\r\n	public","void","addHeader","(","String","name,","String","value",")","\r\n	","{","\r\n		@SuppressWarnings","(","\"unchecked\"",")","\r\n		List<String>","list","=","(","List<String>",")","headers",".","get","(","name",")",";","\r\n		if","(","list","==","null",")","\r\n		","{","\r\n			list","=","new","ArrayList<>","(","1",")",";","\r\n			headers",".","put","(","name,","list",")",";","\r\n		","}","\r\n		list",".","add","(","value",")",";","\r\n	"],"docstring_tokens":["Add","a","header","to","the","request"]}
{"code_tokens":["\r\n	public","void","setHeader","(","String","name,","String","value",")","\r\n	","{","\r\n		@SuppressWarnings","(","\"unchecked\"",")","\r\n		List<String>","list","=","(","List<String>",")","headers",".","get","(","name",")",";","\r\n		if","(","list","==","null",")","\r\n		","{","\r\n			list","=","new","ArrayList<>","(","1",")",";","\r\n			headers",".","put","(","name,","list",")",";","\r\n		","}","\r\n		list",".","clear","(",")",";","\r\n		list",".","add","(","value",")",";","\r\n	"],"docstring_tokens":["Sets","a","header","to","the","request"]}
{"code_tokens":["\r\n	public","Charset","getCharset","(",")","\r\n	","{","\r\n		return","Charset",".","forName","(","characterEncoding",")",";","\r\n	"],"docstring_tokens":["Get","the","current","character","set"]}
{"code_tokens":["\r\n	public","void","setUseMultiPartContentType","(","boolean","useMultiPartContentType",")","\r\n	","{","\r\n		this",".","useMultiPartContentType","=","useMultiPartContentType",";","\r\n	"],"docstring_tokens":["true","will","force","Request","generate","multiPart","ContentType","and","ContentLength"]}
{"code_tokens":["\r\n	@Override\r\n	public","Cookie[]","getCookies","(",")","\r\n	","{","\r\n		if","(","cookies",".","isEmpty","(",")",")","\r\n		","{","\r\n			return","null",";","\r\n		","}","\r\n		List<Cookie>","cookieValues","=","new","ArrayList<Cookie>","(",")",";","\r\n		cookieValues",".","addAll","(","cookies",".","values","(",")",")",";","\r\n		return","cookieValues",".","toArray","(","new","Cookie[cookieValues",".","size","(",")","]",")",";","\r\n	"],"docstring_tokens":["Get","all","of","the","cookies","for","this","request"]}
{"code_tokens":["\r\n	@Override\r\n	public","Locale","getLocale","(",")","\r\n	","{","\r\n		return","getLocales","(",")",".","nextElement","(",")",";","\r\n	"],"docstring_tokens":["Get","the","locale","of","the","request"]}
{"code_tokens":["\r\n	@Override\r\n	public","String","getParameter","(","final","String","name",")","\r\n	","{","\r\n		String[]","param","=","getParameterMap","(",")",".","get","(","name",")",";","\r\n		if","(","param","==","null",")","\r\n		","{","\r\n			return","null",";","\r\n		","}","\r\n		else\r\n		","{","\r\n			return","param[0]",";","\r\n		","}","\r\n	"],"docstring_tokens":["Get","the","request","parameter","with","the","given","name"]}
{"code_tokens":["\r\n	@Override\r\n	public","String","getQueryString","(",")","\r\n	","{","\r\n		if","(","parameters",".","size","(",")","==","0",")","\r\n		","{","\r\n			return","null",";","\r\n		","}","\r\n		else\r\n		","{","\r\n			final","StringBuilder","buf","=","new","StringBuilder","(",")",";","\r\n			for","(","Iterator<String>","iterator","=","parameters",".","keySet","(",")",".","iterator","(",")",";","iterator",".","hasNext","(",")",";",")","\r\n			","{","\r\n				final","String","name","=","iterator",".","next","(",")",";","\r\n				final","String[]","values","=","getParameterValues","(","name",")",";","\r\n				for","(","int","i","=","0",";","i","<","values",".","length",";","i++",")","\r\n				","{","\r\n					if","(","name","!=","null",")","\r\n					","{","\r\n						buf",".","append","(","UrlEncoder",".","QUERY_INSTANCE",".","encode","(","name,","getCharset","(",")",")",")",";","\r\n					","}","\r\n					buf",".","append","(","'='",")",";","\r\n					if","(","values[i]","!=","null",")","\r\n					","{","\r\n						buf",".","append","(","UrlEncoder",".","QUERY_INSTANCE",".","encode","(","values[i],","getCharset","(",")",")",")",";","\r\n					","}","\r\n					if","(","i","+","1","<","values",".","length",")","\r\n					","{","\r\n						buf",".","append","(","'&'",")",";","\r\n					","}","\r\n				","}","\r\n				if","(","iterator",".","hasNext","(",")",")","\r\n				","{","\r\n					buf",".","append","(","'&'",")",";","\r\n				","}","\r\n			","}","\r\n			return","buf",".","toString","(",")",";","\r\n		","}","\r\n	"],"docstring_tokens":["Get","the","query","string","part","of","the","request"]}
{"code_tokens":["\r\n	@Override\r\n	public","String","getRemoteUser","(",")","\r\n	","{","\r\n		return","getHeader","(","\"REMOTE_USER\"",")",";","\r\n	"],"docstring_tokens":["Get","the","name","of","the","remote","user","from","the","REMOTE_USER","header"]}
{"code_tokens":["\r\n	public","void","setServerPort","(","int","port",")","\r\n	","{","\r\n		serverPort","=","port",";","\r\n	"],"docstring_tokens":["Sets","the","server","port","for","this","request"]}
{"code_tokens":["\r\n	public","void","initialize","(","Locale","locale",")","\r\n	","{","\r\n		authType","=","null",";","\r\n		method","=","\"post\"",";","\r\n		cookies",".","clear","(",")",";","\r\n		setDefaultHeaders","(","locale",")",";","\r\n		path","=","null",";","\r\n		url","=","null",";","\r\n		characterEncoding","=","\"UTF-8\"",";","\r\n		parameters",".","clear","(",")",";","\r\n		attributes",".","clear","(",")",";","\r\n		post",".","reset","(",")",";","\r\n	"],"docstring_tokens":["Reset","the","request","back","to","a","default","state"]}
{"code_tokens":["\r\n	public","void","setURL","(","String","url",")","\r\n	","{","\r\n		setUrl","(","Url",".","parse","(","url",")",")",";","\r\n	"],"docstring_tokens":["Set","the","complete","url","for","this","request"]}
{"code_tokens":["\r\n	private","void","setDefaultHeaders","(","Locale","l",")","\r\n	","{","\r\n		headers",".","clear","(",")",";","\r\n		addHeader","(","\"Accept\",","\"text/xml,application/xml,application/xhtml+xml,\"\r\n			+","\"text/html",";","q=0",".","9,text/plain",";","q=0",".","8,image/png,*/*",";","q=0",".","5\"",")",";","\r\n		addHeader","(","\"Accept-Charset\",","\"ISO-8859-1,utf-8",";","q=0",".","7,*",";","q=0",".","7\"",")",";","\r\n		addHeader","(","\"Accept-Language\",","l",".","getLanguage","(",")",".","toLowerCase","(","Locale",".","ROOT",")","+","\"-\"\r\n			+","l",".","getCountry","(",")",".","toLowerCase","(","Locale",".","ROOT",")","+","\",\"","+","l",".","getLanguage","(",")",".","toLowerCase","(","Locale",".","ROOT",")","+","\"",";","q=0",".","5\"",")",";","\r\n		addHeader","(","\"User-Agent\",\r\n			\"Mozilla/5",".","0","(","X11",";","Ubuntu",";","Linux","x86_64",";","rv:41",".","0",")","Gecko/20100101","Firefox/41",".","0\"",")",";","\r\n	"],"docstring_tokens":["Helper","method","to","create","some","default","headers","for","the","request"]}
{"code_tokens":["\r\n	private","byte[]","buildRequest","(",")","\r\n	","{","\r\n		if","(","uploadedFiles","==","null","&&","useMultiPartContentType","==","false",")","\r\n		","{","\r\n			if","(","post",".","getParameterNames","(",")",".","size","(",")","==","0",")","\r\n			","{","\r\n				return","\"\"",".","getBytes","(",")",";","\r\n			","}","\r\n			Url","url","=","new","Url","(",")",";","\r\n			for","(","final","String","parameterName",":","post",".","getParameterNames","(",")",")","\r\n			","{","\r\n				List<StringValue>","values","=","post",".","getParameterValues","(","parameterName",")",";","\r\n				for","(","StringValue","value",":","values",")","\r\n				","{","\r\n					url",".","addQueryParameter","(","parameterName,","value",".","toString","(",")",")",";","\r\n				","}","\r\n			","}","\r\n			String","body","=","url",".","toString","(",")",".","substring","(","1",")",";","\r\n			return","body",".","getBytes","(",")",";","\r\n		","}","\r\n\r\n\r\n		try\r\n		","{","\r\n			//","Build","up","the","input","stream","based","on","the","files","and","parameters\r\n			ByteArrayOutputStream","out","=","new","ByteArrayOutputStream","(",")",";","\r\n\r\n			//","Add","parameters\r\n			for","(","final","String","parameterName",":","post",".","getParameterNames","(",")",")","\r\n			","{","\r\n				List<StringValue>","values","=","post",".","getParameterValues","(","parameterName",")",";","\r\n				for","(","StringValue","value",":","values",")","\r\n				","{","\r\n					newAttachment","(","out",")",";","\r\n					out",".","write","(","\"",";","name=\\\"\"",".","getBytes","(",")",")",";","\r\n					out",".","write","(","parameterName",".","getBytes","(",")",")",";","\r\n					out",".","write","(","\"\\\"\"",".","getBytes","(",")",")",";","\r\n					out",".","write","(","crlf",".","getBytes","(",")",")",";","\r\n					out",".","write","(","crlf",".","getBytes","(",")",")",";","\r\n					out",".","write","(","value",".","toString","(",")",".","getBytes","(",")",")",";","\r\n					out",".","write","(","crlf",".","getBytes","(",")",")",";","\r\n				","}","\r\n			","}","\r\n\r\n			//","Add","files\r\n			if","(","uploadedFiles","!=","null",")","\r\n			","{","\r\n				for","(","Map",".","Entry<String,","List<UploadedFile>>","entry",":","uploadedFiles",".","entrySet","(",")",")","\r\n				","{","\r\n					String","fieldName","=","entry",".","getKey","(",")",";","\r\n					List<UploadedFile>","files","=","entry",".","getValue","(",")",";","\r\n\r\n					for","(","UploadedFile","uf",":","files",")","\r\n					","{","\r\n						newAttachment","(","out",")",";","\r\n						out",".","write","(","\"",";","name=\\\"\"",".","getBytes","(",")",")",";","\r\n						out",".","write","(","fieldName",".","getBytes","(",")",")",";","\r\n						out",".","write","(","\"\\\"",";","filename=\\\"\"",".","getBytes","(",")",")",";","\r\n						if","(","uf",".","getFile","(",")","!=","null",")","{","\r\n							out",".","write","(","uf",".","getFile","(",")",".","getName","(",")",".","getBytes","(",")",")",";","\r\n						","}","\r\n						out",".","write","(","\"\\\"\"",".","getBytes","(",")",")",";","\r\n						out",".","write","(","crlf",".","getBytes","(",")",")",";","\r\n						out",".","write","(","\"Content-Type:","\"",".","getBytes","(",")",")",";","\r\n						out",".","write","(","uf",".","getContentType","(",")",".","getBytes","(",")",")",";","\r\n						out",".","write","(","crlf",".","getBytes","(",")",")",";","\r\n						out",".","write","(","crlf",".","getBytes","(",")",")",";","\r\n\r\n						if","(","uf",".","getFile","(",")","!=","null",")","{","\r\n							//","Load","the","file","and","put","it","into","the","the","inputstream\r\n							FileInputStream","fis","=","new","FileInputStream","(","uf",".","getFile","(",")",")",";","\r\n\r\n							try\r\n							","{","\r\n								IOUtils",".","copy","(","fis,","out",")",";","\r\n							","}","\r\n							finally\r\n							","{","\r\n								fis",".","close","(",")",";","\r\n							","}","\r\n						","}","\r\n						out",".","write","(","crlf",".","getBytes","(",")",")",";","\r\n					","}","\r\n				","}","\r\n			","}","\r\n\r\n			out",".","write","(","boundary",".","getBytes","(",")",")",";","\r\n			out",".","write","(","\"--\"",".","getBytes","(",")",")",";","\r\n			out",".","write","(","crlf",".","getBytes","(",")",")",";","\r\n			return","out",".","toByteArray","(",")",";","\r\n		","}","\r\n		catch","(","IOException","e",")","\r\n		","{","\r\n			//","NOTE:","IllegalStateException","(","Throwable",")","only","exists","since","Java","1",".","5\r\n			throw","new","WicketRuntimeException","(","e",")",";","\r\n		","}","\r\n	"],"docstring_tokens":["Build","the","request","based","on","the","uploaded","files","and","the","parameters"]}
{"code_tokens":["\n	public","boolean","okToRenderComponent","(","final","String","scope,","final","String","id",")","\n	","{","\n		if","(","renderedComponentsPerScope","==","null",")","\n		","{","\n			renderedComponentsPerScope","=","new","HashMap<>","(",")",";","\n		","}","\n\n		List<String>","componentScope","=","renderedComponentsPerScope",".","get","(","scope",")",";","\n		if","(","componentScope","==","null",")","\n		","{","\n			componentScope","=","new","ArrayList<>","(",")",";","\n			renderedComponentsPerScope",".","put","(","scope,","componentScope",")",";","\n		","}","\n\n		if","(","componentScope",".","contains","(","id",")",")","\n		","{","\n			return","false",";","\n		","}","\n		componentScope",".","add","(","id",")",";","\n		return","true",";","\n	"],"docstring_tokens":["Check","if","the","header","component","is","ok","to","render","within","the","scope","given"]}
{"code_tokens":["\n	@Around","(","\"execution","(","*","org",".","apache",".","wicket",".","Component",".","onRender","(",".",".",")",")","\"",")","\n	public","Object","aroundOnRender","(","ProceedingJoinPoint","joinPoint",")","throws","Throwable\n	","{","\n		return","measureTime","(","\"core/component/render\",","joinPoint",")",";","\n	"],"docstring_tokens":["Collects","data","how","often","components","are","rendered"]}
{"code_tokens":["\n	@Override\n	public","void","bind","(","Component","component",")","\n	","{","\n		if","(","!","(","component","instanceof","Form",")",")","\n		","{","\n			throw","new","WicketRuntimeException","(","\"Behavior","\"","+","getClass","(",")",".","getName","(",")","\n				+","\"","can","only","be","added","to","an","instance","of","a","Form\"",")",";","\n		","}","\n	"],"docstring_tokens":["Can","be","bound","to","Forms","only"]}
{"code_tokens":["\n	public","void","error","(","FormComponent<?>","fc,","final","String","resourceKey,","Map<String,","Object>","vars",")","\n	","{","\n		Args",".","notNull","(","fc,","\"fc\"",")",";","\n		Args",".","notNull","(","vars,","\"vars\"",")",";","\n		Args",".","notNull","(","resourceKey,","\"resourceKey\"",")",";","\n\n		ValidationError","error","=","new","ValidationError","(",")",".","addKey","(","resourceKey",")",";","\n		final","String","defaultKey","=","Classes",".","simpleName","(","getClass","(",")",")",";","\n		if","(","!resourceKey",".","equals","(","defaultKey",")",")","\n		","{","\n			error",".","addKey","(","defaultKey",")",";","\n		","}","\n\n		error",".","setVariables","(","vars",")",";","\n		fc",".","error","(","error",")",";","\n	"],"docstring_tokens":["Reports","an","error","against","the","validatable","using","the","specified","resource","key","and","variable","map"]}
{"code_tokens":["\n	public","void","disableCaching","(",")","\n	","{","\n		setDateHeader","(","\"Date\",","Instant",".","now","(",")",")",";","\n		setDateHeader","(","\"Expires\",","Instant",".","EPOCH",")",";","\n		setHeader","(","\"Pragma\",","\"no-cache\"",")",";","\n		setHeader","(","\"Cache-Control\",","\"no-cache,","no-store\"",")",";","\n	"],"docstring_tokens":["Make","this","response","non-cacheable"]}
{"code_tokens":["\n","private","MockComponent","setId","(","String","id",")","\n	","{","\n		this",".","id","=","id",";","\n		return","this",";","\n	"],"docstring_tokens":["Sets","the","component","id"]}
{"code_tokens":["\n","MockComponent","setPath","(","String","path",")","\n	","{","\n		this",".","path","=","path",";","\n		return","this",";","\n	"],"docstring_tokens":["Sets","the","component","path"]}
{"code_tokens":["\n	static","int","indexFor","(","final","int","h,","final","int","length",")","\n	","{","\n		return","h","&","(","length","-","1",")",";","\n	"],"docstring_tokens":["Returns","index","for","hash","code","h"]}
{"code_tokens":["\n	public","synchronized","final","void","setFormat","(","String","format",")","\n	","{","\n		Args",".","notNull","(","format,","\"format\"",")",";","\n		this",".","format","=","format",";","\n	"],"docstring_tokens":["Sets","the","format","of","this","resource"]}
{"code_tokens":["\n	protected","synchronized","void","setLastModifiedTime","(","Instant","time",")","\n	","{","\n		lastModifiedTime","=","time",";","\n	"],"docstring_tokens":["set","the","last","modified","time","for","this","resource"]}
{"code_tokens":["\n	public","boolean","processRequest","(","final","MockHttpServletRequest","request",")","\n	","{","\n		return","processRequest","(","request,","null",")",";","\n	"],"docstring_tokens":["Processes","the","request","in","mocked","Wicket","environment"]}
{"code_tokens":["\n	public","ResourceReference","startResourceReference","(","final","ResourceReference","reference,\n		final","PageParameters","pageParameters",")","\n	","{","\n		//","prepare","request\n		request",".","setURL","(","request",".","getContextPath","(",")","+","request",".","getServletPath","(",")","+","\"/\"",")",";","\n		IRequestHandler","handler","=","new","ResourceReferenceRequestHandler","(","reference,","pageParameters",")",";","\n\n		//","execute","request\n		processRequest","(","request,","handler",")",";","\n\n		//","the","reference","processed\n		return","reference",";","\n	"],"docstring_tokens":["Simulates","a","request","to","a","mounted","ResourceReference"]}
{"code_tokens":["\n	public","String","getWicketAjaxBaseUrlEncodedInLastResponse","(",")","\n		throws","IOException,","ParseException\n	","{","\n		XmlPullParser","parser","=","new","XmlPullParser","(",")",";","\n		parser",".","parse","(","getLastResponseAsString","(",")",")",";","\n		XmlTag","tag",";","\n		while","(","(","tag","=","parser",".","nextTag","(",")",")","!=","null",")","\n		","{","\n			if","(","tag",".","isOpen","(",")","&&","tag",".","getName","(",")",".","equals","(","\"script\"",")","&&\n				\"wicket-ajax-base-url\"",".","equals","(","tag",".","getAttribute","(","\"id\"",")",")",")","\n			","{","\n				parser",".","next","(",")",";","\n				return","parser",".","getString","(",")",".","toString","(",")",".","split","(","\"\\\\\\\"\"",")","[1]",";","\n			","}","\n		","}","\n\n		fail","(","\"Last","response","has","no","AJAX","base","URL","set","by","AbstractDefaultAjaxBehavior",".","\"",")",";","\n		return","null",";","\n	"],"docstring_tokens":["This","method","tries","to","parse","the","last","response","to","return","the","encoded","base","URL","and","will","throw","an	","exception","if","there","none","was","encoded"]}
{"code_tokens":["\n	public","void","executeBehavior","(","final","AbstractAjaxBehavior","behavior",")","\n	","{","\n		Args",".","notNull","(","behavior,","\"behavior\"",")",";","\n\n		Url","url","=","Url",".","parse","(","behavior",".","getCallbackUrl","(",")",".","toString","(",")",",\n			Charset",".","forName","(","request",".","getCharacterEncoding","(",")",")",")",";","\n		transform","(","url",")",";","\n		request",".","setUrl","(","url",")",";","\n		request",".","addHeader","(","WebRequest",".","HEADER_ORIGIN,","createOriginHeader","(",")",")",";","\n		request",".","addHeader","(","WebRequest",".","HEADER_AJAX_BASE_URL,","url",".","toString","(",")",")",";","\n		request",".","addHeader","(","WebRequest",".","HEADER_AJAX,","\"true\"",")",";","\n\n		if","(","behavior","instanceof","AjaxFormSubmitBehavior",")","\n		","{","\n			AjaxFormSubmitBehavior","formSubmitBehavior","=","(","AjaxFormSubmitBehavior",")","behavior",";","\n			Form<?>","form","=","formSubmitBehavior",".","getForm","(",")",";","\n			getRequest","(",")",".","setUseMultiPartContentType","(","form",".","isMultiPart","(",")",")",";","\n			serializeFormToRequest","(","form",")",";","\n\n			//","mark","behavior's","component","as","the","form","submitter,\n			String","name","=","Form",".","getRootFormRelativeId","(","\n				new","PropertyModel<Component>","(","behavior,","\"component\"",")",".","getObject","(",")",")",";","\n			if","(","!request",".","getPostParameters","(",")",".","getParameterNames","(",")",".","contains","(","name",")",")","\n			","{","\n				request",".","getPostParameters","(",")",".","setParameterValue","(","name,","\"marked\"",")",";","\n			","}","\n		","}","\n\n		processRequest","(",")",";","\n	"],"docstring_tokens":["Builds","and","processes","a","request","suitable","for","executing","an","AbstractAjaxBehavior"]}
{"code_tokens":["\n	protected","String","createOriginHeader","(",")","\n	","{","\n		Url","url","=","RequestCycle",".","get","(",")",".","getRequest","(",")",".","getUrl","(",")",";","\n		return","url",".","getProtocol","(",")","+","\"://\"","+","url",".","getHost","(",")","+","\":\"","+","url",".","getPort","(",")",";","\n	"],"docstring_tokens":["Build","value","to","Origin","header","based","on","RequestCycle","Url"]}
{"code_tokens":["\n	public","FormTester","newFormTester","(","final","String","path",")","\n	","{","\n		return","newFormTester","(","path,","true",")",";","\n	"],"docstring_tokens":["Creates","a","FormTester","for","the","Form","at","a","given","path,","and","fills","all","child	","org.apache.wicket.markup.html.form.FormComponents","with","blank","Strings"]}
{"code_tokens":["\n	public","Result","hasLabel","(","String","path,","String","expectedLabelText",")","\n	","{","\n		Label","label","=","(","Label",")","getComponentFromLastRenderedPage","(","path",")",";","\n		return","isEqual","(","expectedLabelText,","label",".","getDefaultModelObjectAsString","(",")",")",";","\n	"],"docstring_tokens":["assert","the","text","of","Label","component"]}
{"code_tokens":["\n	public","Result","isNotRequired","(","String","path",")","\n	","{","\n		FormComponent<?>","formComponent","=","assertFormComponent","(","path",")",";","\n\n		return","isNotRequired","(","formComponent",")",";","\n	"],"docstring_tokens":["Asserts","that","a","component","is","not","required"]}
{"code_tokens":["\n	public","void","clickLink","(","String","path",")","\n	","{","\n		clickLink","(","path,","true",")",";","\n	"],"docstring_tokens":["Click","the","Link","in","the","last","rendered","Page.	","	","Simulate","that","AJAX","is","enabled"]}
{"code_tokens":["\n	public","<C","extends","Page>","Result","isRenderedPage","(","Class<C>","expectedRenderedPageClass",")","\n	","{","\n		Args",".","notNull","(","expectedRenderedPageClass,","\"expectedRenderedPageClass\"",")",";","\n\n		Page","page","=","getLastRenderedPage","(",")",";","\n		if","(","page","==","null",")","\n		","{","\n			return","Result",".","fail","(","\"page","was","null\"",")",";","\n		","}","\n		if","(","!expectedRenderedPageClass",".","isAssignableFrom","(","page",".","getClass","(",")",")",")","\n		","{","\n			return","Result",".","fail","(","String",".","format","(","\"classes","not","the","same,","expected","'%s',","current","'%s'\",\n				expectedRenderedPageClass,","page",".","getClass","(",")",")",")",";","\n		","}","\n		return","Result",".","pass","(",")",";","\n	"],"docstring_tokens":["Asserts","the","last","rendered","Page","class"]}
{"code_tokens":["\n	public","Result","isResultPage","(","final","String","expectedDocument",")","{","\n		//","Validate","the","document\n		String","document","=","getLastResponseAsString","(",")",";","\n		return","isTrue","(","\"expected","rendered","page","equals\",","document",".","equals","(","expectedDocument",")",")",";","\n	"],"docstring_tokens":["Asserts","last","rendered","Page","against","an","expected","HTML","document","as","a	","String"]}
{"code_tokens":["\n	public","Result","hasNoFeedbackMessage","(","int","level",")","\n	","{","\n		List<Serializable>","messages","=","getMessages","(","level",")",";","\n		return","isTrue","(","String",".","format","(","\"expected","no","%s","message,","but","contains\\n%s\",\n			new","FeedbackMessage","(","null,","\"\",","level",")",".","getLevelAsString","(",")",".","toLowerCase","(","Locale",".","ROOT",")",",\n			WicketTesterHelper",".","asLined","(","messages",")",")",",","messages",".","isEmpty","(",")",")",";","\n	"],"docstring_tokens":["Asserts","there","are","no","feedback","messages","with","the","given","level"]}
{"code_tokens":["\n	public","void","dumpPage","(",")","\n	","{","\n		log",".","info","(","getLastResponseAsString","(",")",")",";","\n	"],"docstring_tokens":["Dumps","the","source","of","last","rendered","Page"]}
{"code_tokens":["\n	public","void","executeUrl","(","final","String","_url",")","\n	","{","\n		Url","url","=","Url",".","parse","(","_url,","Charset",".","forName","(","request",".","getCharacterEncoding","(",")",")",")",";","\n		transform","(","url",")",";","\n		getRequest","(",")",".","setUrl","(","url",")",";","\n		processRequest","(",")",";","\n	"],"docstring_tokens":["Starts","a","page,","a","shared","resource","or","a","IRequestListener","depending","on","what","the	","IRequestMappers","resolve","for","the","passed","url"]}
{"code_tokens":["\n	public","static","String[]","getInputValue","(","FormComponent<?>","formComponent",")","\n	","{","\n		//","the","browser","sends","parameters","for","visible","and","enabled","components","only\n		if","(","formComponent",".","isVisibleInHierarchy","(",")","&&","formComponent",".","isEnabledInHierarchy","(",")",")","\n		","{","\n			if","(","formComponent","instanceof","IFormSubmittingComponent",")","\n			","{","\n				//","buttons","have","to","be","submitted","explicitely\n			","}","\n			else","if","(","formComponent","instanceof","AbstractTextComponent",")","\n			","{","\n				return","new","String[]","{","getFormComponentValue","(","formComponent",")","}",";","\n			","}","\n			else\n			","{","\n				//","TODO","is","it","safe","to","assume","that","all","other","components'","values","can","be","split?\n				String","value","=","getFormComponentValue","(","formComponent",")",";","\n				if","(","!Strings",".","isEmpty","(","value",")",")","\n				","{","\n					return","value",".","split","(","FormComponent",".","VALUE_SEPARATOR",")",";","\n				","}","\n			","}","\n		","}","\n		return","new","String[]","{","}",";","\n	"],"docstring_tokens":["Gets","request","parameter","values","for","the","form","component","that","represents","its","current","model","value"]}
{"code_tokens":["\n	public","FormTester","setValue","(","final","String","formComponentId,","final","String","value",")","\n	","{","\n		Component","component","=","workingForm",".","get","(","formComponentId",")",";","\n		assertNotNull","(","component,","\"Unable","to","set","value",".","Couldn't","find","component","with","name:","\"","+\n			formComponentId",")",";","\n		return","setValue","(","component,","value",")",";","\n	"],"docstring_tokens":["Simulates","filling","in","a","field","on","a","Form"]}
{"code_tokens":["\n	public","FormTester","submitLink","(","String","path,","final","boolean","pageRelative",")","\n	","{","\n		if","(","pageRelative",")","\n		","{","\n			tester",".","clickLink","(","path,","false",")",";","\n		","}","\n		else\n		","{","\n			path","=","this",".","path","+","\":\"","+","path",";","\n			tester",".","clickLink","(","path,","false",")",";","\n		","}","\n		return","this",";","\n	"],"docstring_tokens":["A","convenience","method","to","submit","the","Form","via","a","SubmitLink","which","may","inside","or","outside","of","the	","Form"]}
{"code_tokens":["\n	private","void","checkClosed","(",")","\n	","{","\n		if","(","closed",")","\n		","{","\n			fail","(","\"'\"","+","path","+","\"'","already","submitted",".","Note","that","FormTester","\"","+\n				\"is","allowed","to","submit","only","once\"",")",";","\n		","}","\n	"],"docstring_tokens":["FormTester","must","only","be","used","once"]}
{"code_tokens":["\n	public","Border","addToBorder","(","final","Component",".",".",".","children",")","\n	","{","\n		super",".","add","(","children",")",";","\n		return","this",";","\n	"],"docstring_tokens":["Adds","children","components","to","the","Border","itself"]}
{"code_tokens":["\n	@Override\n	public","IMarkupFragment","getMarkup","(","final","Component","child",")","\n	","{","\n		//","Border","require","an","associated","markup","resource","file\n		IMarkupFragment","markup","=","getAssociatedMarkup","(",")",";","\n		if","(","markup","==","null",")","\n		","{","\n			throw","new","MarkupException","(","\"Unable","to","find","associated","markup","file","for","Border:","\"","+\n				this",".","toString","(",")",")",";","\n		","}","\n\n		//","Find","<wicket:border>\n		IMarkupFragment","borderMarkup","=","null",";","\n		for","(","int","i","=","0",";","i","<","markup",".","size","(",")",";","i++",")","\n		","{","\n			MarkupElement","elem","=","markup",".","get","(","i",")",";","\n			if","(","TagUtils",".","isWicketBorderTag","(","elem",")",")","\n			","{","\n				borderMarkup","=","new","MarkupFragment","(","markup,","i",")",";","\n				break",";","\n			","}","\n		","}","\n\n		if","(","borderMarkup","==","null",")","\n		","{","\n			throw","new","MarkupException","(","markup",".","getMarkupResourceStream","(",")",",\n				\"Unable","to","find","<wicket:border>","tag","in","associated","markup","file","for","Border:","\"","+\n					this",".","toString","(",")",")",";","\n		","}","\n\n		//","If","child","==","null,","return","the","markup","fragment","starting","with","the","<wicket:border>","tag\n		if","(","child","==","null",")","\n		","{","\n			return","borderMarkup",";","\n		","}","\n\n		//","Is","child","==","BorderBody?\n		if","(","child","==","body",")","\n		","{","\n			//","Get","the","<wicket:body>","markup\n			return","body",".","getMarkup","(",")",";","\n		","}","\n\n		//","Find","the","markup","for","the","child","component\n		IMarkupFragment","childMarkup","=","borderMarkup",".","find","(","child",".","getId","(",")",")",";","\n		if","(","childMarkup","!=","null",")","\n		","{","\n			return","childMarkup",";","\n		","}","\n\n		return","(","(","BorderMarkupSourcingStrategy",")","getMarkupSourcingStrategy","(",")",")",".","findMarkupInAssociatedFileHeader","(","\n			this,","child",")",";","\n	"],"docstring_tokens":["Search","for","the","child","markup","in","the","file","associated","with","the","Border"]}
{"code_tokens":["\n	public","static","AjaxEventBehavior","onEvent","(","String","eventName,","SerializableConsumer<AjaxRequestTarget>","onEvent",")","\n	","{","\n		Args",".","notNull","(","onEvent,","\"onEvent\"",")",";","\n\n		return","new","AjaxEventBehavior","(","eventName",")","\n		","{","\n			private","static","final","long","serialVersionUID","=","1L",";","\n\n			@Override\n			protected","void","onEvent","(","AjaxRequestTarget","target",")","\n			","{","\n				onEvent",".","accept","(","target",")",";","\n			","}","\n		","}",";","\n	"],"docstring_tokens":["Creates","an","AjaxEventBehavior","based","on","lambda","expressions"]}
{"code_tokens":["\n	public","static","String","name","(","Class<?>","c",")","\n	","{","\n		String","name","=","null",";","\n		if","(","c","!=","null",")","\n		","{","\n			while","(","c",".","isAnonymousClass","(",")",")","\n			","{","\n				c","=","c",".","getSuperclass","(",")",";","\n			","}","\n			name","=","c",".","getName","(",")",";","\n		","}","\n\n		return","name",";","\n	"],"docstring_tokens":["Gets","the","name","of","the","given","class","or","null","if","the","class","is","null"]}
{"code_tokens":["\n	public","static","CustomEntityResolver","getPreloaded","(",")","\n	","{","\n		CustomEntityResolver","resolver","=","new","CustomEntityResolver","(",")",";","\n\n		resolver",".","put","(","new","EntityKey","(","\"-//Sun","Microsystems,","Inc",".","//DTD","Web","Application","2",".","3//EN\",\n			\"http://java",".","sun",".","com/dtd/web-app_2_3",".","dtd\"",")",",","new","ServletApiEntityLocator","(","\n			\"web-app_2_3",".","dtd\"",")",")",";","\n\n		return","resolver",";","\n	"],"docstring_tokens":["get","default","instances","of","custom","entity","resolver","with","preloaded","well-known","entities"]}
{"code_tokens":["\n	public","void","put","(","final","EntityKey","key,","final","EntityLocator","locator",")","\n	","{","\n		Args",".","notNull","(","key,","\"key\"",")",";","\n		Args",".","notNull","(","locator,","\"locator\"",")",";","\n		entities",".","put","(","key,","locator",")",";","\n	"],"docstring_tokens":["add","custom","entity","resolver"]}
{"code_tokens":["\n	public","Component","getComponent","(",")","\n	","{","\n		return","component",";","\n	"],"docstring_tokens":["Get","check","failure","component"]}
{"code_tokens":["\n	public","final","OrderByLink<S>","sort","(",")","\n	","{","\n		if","(","isVersioned","(",")",")","\n		","{","\n			//","version","the","old","state\n			addStateChange","(",")",";","\n		","}","\n\n		ISortState<S>","state","=","stateLocator",".","getSortState","(",")",";","\n\n		//","get","current","sort","order\n		SortOrder","order","=","state",".","getPropertySortOrder","(","property",")",";","\n\n		//","set","next","sort","order\n		state",".","setPropertySortOrder","(","property,","nextSortOrder","(","order",")",")",";","\n\n		return","this",";","\n	"],"docstring_tokens":["Re-sort","data","provider","according","to","this","link"]}
{"code_tokens":["\n	@Test\n	void","licenseHeaders","(",")","\n	","{","\n		licenseHeaderHandlers","=","new","ILicenseHeaderHandler[]","{","\n				new","JavaLicenseHeaderHandler","(","javaIgnore",")",",\n				new","JavaScriptLicenseHeaderHandler","(","javaScriptIgnore",")",",\n				new","XmlLicenseHeaderHandler","(","xmlIgnore",")",",\n				new","PropertiesLicenseHeaderHandler","(","propertiesIgnore",")",",\n				new","HtmlLicenseHeaderHandler","(","htmlIgnore",")",",\n				new","VelocityLicenseHeaderHandler","(","velocityIgnore",")",",\n				new","XmlPrologHeaderHandler","(","xmlPrologIgnore",")",",\n				new","CssLicenseHeaderHandler","(","cssIgnore",")",",","}",";","\n\n		final","Map<ILicenseHeaderHandler,","List<File>>","badFiles","=","new","HashMap<>","(",")",";","\n\n		for","(","final","ILicenseHeaderHandler","licenseHeaderHandler",":","licenseHeaderHandlers",")","\n		","{","\n			visitFiles","(","licenseHeaderHandler",".","getSuffixes","(",")",",","licenseHeaderHandler",".","getIgnoreFiles","(",")",",\n				new","FileVisitor","(",")","\n				","{","\n					@Override\n					public","void","visitFile","(","final","File","file",")","\n					","{","\n						if","(","licenseHeaderHandler",".","checkLicenseHeader","(","file",")","==","false",")","\n						","{","\n							if","(","(","addHeaders","==","false",")","||\n								","(","licenseHeaderHandler",".","addLicenseHeader","(","file",")","==","false",")",")","\n							","{","\n								List<File>","files","=","badFiles",".","get","(","licenseHeaderHandler",")",";","\n\n								if","(","files","==","null",")","\n								","{","\n									files","=","new","ArrayList<>","(",")",";","\n									badFiles",".","put","(","licenseHeaderHandler,","files",")",";","\n								","}","\n\n								files",".","add","(","file",")",";","\n							","}","\n						","}","\n					","}","\n				","}",")",";","\n		","}","\n\n		failIncorrectLicenceHeaders","(","badFiles",")",";","\n	"],"docstring_tokens":["Test","all","the","files","in","the","project","which","has","an","associated","ILicenseHeaderHandler"]}
{"code_tokens":["\n	protected","T","getData","(","final","Attributes","attributes",")","\n	","{","\n		return","data",";","\n	"],"docstring_tokens":["Gets","the","data","for","this","resource"]}
{"code_tokens":["\n	private","Field[]","findFields","(","Class<?>","clazz,","final","IFieldValueFactory","factory",")","\n	","{","\n		List<Field>","matched","=","new","ArrayList<>","(",")",";","\n\n		while","(","clazz","!=","null",")","\n		","{","\n			Field[]","fields","=","clazz",".","getDeclaredFields","(",")",";","\n			for","(","final","Field","field",":","fields",")","\n			","{","\n				if","(","factory",".","supportsField","(","field",")",")","\n				","{","\n					matched",".","add","(","field",")",";","\n				","}","\n			","}","\n			clazz","=","clazz",".","getSuperclass","(",")",";","\n		","}","\n\n		return","matched",".","toArray","(","new","Field[matched",".","size","(",")","]",")",";","\n	"],"docstring_tokens":["Returns","an","array","of","fields","that","can","be","injected","using","the","given","field","value","factory"]}
{"code_tokens":["\n	public","final","boolean","isValid","(","String","value",")","\n	","{","\n		if","(","value","==","null",")","\n		","{","\n			return","false",";","\n		","}","\n\n		Matcher","matchAsciiPat","=","Pattern",".","compile","(","LEGAL_ASCII_PATTERN",")",".","matcher","(","value",")",";","\n		if","(","!matchAsciiPat",".","matches","(",")",")","\n		","{","\n			return","false",";","\n		","}","\n\n		//","Check","the","whole","url","address","structure\n		Matcher","matchUrlPat","=","Pattern",".","compile","(","URL_PATTERN",")",".","matcher","(","value",")",";","\n		if","(","!matchUrlPat",".","matches","(",")",")","\n		","{","\n			return","false",";","\n		","}","\n\n		if","(","!isValidScheme","(","matchUrlPat",".","group","(","PARSE_URL_SCHEME",")",")",")","\n		","{","\n			return","false",";","\n		","}","\n\n		if","(","!isValidAuthority","(","matchUrlPat",".","group","(","PARSE_URL_AUTHORITY",")",")",")","\n		","{","\n			return","false",";","\n		","}","\n\n		if","(","!isValidPath","(","matchUrlPat",".","group","(","PARSE_URL_PATH",")",")",")","\n		","{","\n			return","false",";","\n		","}","\n\n		if","(","!isValidQuery","(","matchUrlPat",".","group","(","PARSE_URL_QUERY",")",")",")","\n		","{","\n			return","false",";","\n		","}","\n\n		if","(","!isValidFragment","(","matchUrlPat",".","group","(","PARSE_URL_FRAGMENT",")",")",")","\n		","{","\n			return","false",";","\n		","}","\n\n		return","true",";","\n	"],"docstring_tokens":["Checks","if","a","field","has","a","valid","URL"]}
{"code_tokens":["\n	public","final","void","setIndex","(","int","index",")","\n	","{","\n		if","(","this",".","index","!=","index",")","\n		","{","\n			if","(","isVersioned","(",")",")","\n			","{","\n				addStateChange","(",")",";","\n			","}","\n			this",".","index","=","index",";","\n		","}","\n	"],"docstring_tokens":["Sets","the","index","of","this","item"]}
{"code_tokens":["\n	@Override\n	public","final","void","doGet","(","final","HttpServletRequest","servletRequest,\n		final","HttpServletResponse","servletResponse",")","throws","ServletException,","IOException\n	","{","\n		if","(","wicketFilter",".","processRequest","(","servletRequest,","servletResponse,","null",")","==","false",")","\n		","{","\n			fallback","(","servletRequest,","servletResponse",")",";","\n		","}","\n	"],"docstring_tokens":["Handles","servlet","page","requests"]}
{"code_tokens":["\n	@Override\n	public","void","onComponentTag","(","final","Component","component,","final","ComponentTag","tag",")","\n	","{","\n	"],"docstring_tokens":["Nothing","to","add","to","the","response","by","default"]}
{"code_tokens":["\n	public","boolean","closes","(","final","MarkupElement","open",")","\n	","{","\n		return","false",";","\n	"],"docstring_tokens":["Gets","whether","this","element","closes","the","given","element"]}
{"code_tokens":["\n	public","static","void","contribute","(","final","Application","application,","final","IHeaderResponse","response",")","\n	","{","\n		JavaScriptLibrarySettings","jsLibrarySettings","=","application",".","getJavaScriptLibrarySettings","(",")",";","\n		ResourceReference","wicketAjaxReference","=","jsLibrarySettings",".","getWicketAjaxReference","(",")",";","\n		response",".","render","(","JavaScriptHeaderItem",".","forReference","(","wicketAjaxReference",")",")",";","\n	"],"docstring_tokens":["Contributes","the","backing","library","plus","the","implementation","of","Wicket.Event"]}
