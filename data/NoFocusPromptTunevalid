{"code_tokens":["public","long","position","(",")","{","return","position",";"],"docstring_tokens":["Get","the","position","where","the","next","write","operation","will","begin","writing","from"],"prompt_tokens":[]}
{"code_tokens":["public","void","flushAndForceWrite","(","boolean","forceMetadata",")","throws","IOException","{","flush","(",")",";","forceWrite","(","forceMetadata",")",";"],"docstring_tokens":["calls","both","flush","and","forceWrite","methods"],"prompt_tokens":[]}
{"code_tokens":["public","StorageServerChannel","intercept","(","long","scId",")","{","return","intercept","(","new","StorageContainerClientInterceptor","(","scId",")",")",";"],"docstring_tokens":["Create","an","intercepted","server","channel","that","add","additional","storage","container","metadata"],"prompt_tokens":[]}
{"code_tokens":["public","LedgerCache",".","PageEntriesIterable","listEntries","(","long","ledgerId",")","throws","IOException","{","return","new","PageEntriesIterableImpl","(","ledgerId",")",";"],"docstring_tokens":["Return","iterator","over","pages","for","mapping","entries","to","entry","loggers"],"prompt_tokens":[]}
{"code_tokens":["@Override\n","public","boolean","hasPassword","(",")","{","return","hasPassword",";"],"docstring_tokens":["In","versions","4.1.0","and","below,","the","digest","type","and","password","were","not","stored","in","the","metadata"],"prompt_tokens":[]}
{"code_tokens":["@Override\n","public","String","toSafeString","(",")","{","return","toStringRepresentation","(","false",")",";"],"docstring_tokens":["Returns","a","string","representation","of","this","LedgerMetadata","object","by","filtering","out","the","password","field"],"prompt_tokens":[]}
{"code_tokens":["public","void","updateBookieIdInLedgers","(","final","BookieId","oldBookieId,","final","BookieId","newBookieId,\n","final","int","rate,","int","maxOutstandingReads,","final","int","limit,\n","final","UpdateLedgerNotifier","progressable",")","throws","IOException,","InterruptedException","{","\n\n","final","AtomicInteger","issuedLedgerCnt","=","new","AtomicInteger","(",")",";","final","AtomicInteger","updatedLedgerCnt","=","new","AtomicInteger","(",")",";","final","CompletableFuture<Void>","finalPromise","=","new","CompletableFuture<>","(",")",";","final","Set<CompletableFuture<?>>","outstanding","=\n","Collections",".","newSetFromMap","(","new","ConcurrentHashMap<CompletableFuture<?>,","Boolean>","(",")",")",";","final","RateLimiter","throttler","=","RateLimiter",".","create","(","rate",")",";","final","Semaphore","outstandingReads","=","new","Semaphore","(","maxOutstandingReads",")",";","final","Iterator<Long>","ledgerItr","=","admin",".","listLedgers","(",")",".","iterator","(",")",";","\n\n","//","iterate","through","all","the","ledgers\n","while","(","ledgerItr",".","hasNext","(",")","&&","!finalPromise",".","isDone","(",")","&&","(","limit","==","Integer",".","MIN_VALUE","||","issuedLedgerCnt",".","get","(",")","<","limit",")",")","{","//","semaphore","to","control","reads","according","to","update","throttling\n","outstandingReads",".","acquire","(",")",";","\n\n","final","long","ledgerId","=","ledgerItr",".","next","(",")",";","issuedLedgerCnt",".","incrementAndGet","(",")",";","\n\n","CompletableFuture<Versioned<LedgerMetadata>>","writePromise","=","lm",".","readLedgerMetadata","(","ledgerId",")",".","thenCompose","(","(","readMetadata",")","->","{","AtomicReference<Versioned<LedgerMetadata>>","ref","=","new","AtomicReference<>","(","readMetadata",")",";","return","new","MetadataUpdateLoop","(","lm,","ledgerId,\n","ref::get,\n","(","metadata",")","->","{","return","metadata",".","getAllEnsembles","(",")",".","values","(",")",".","stream","(",")",".","flatMap","(","Collection::stream",")",".","anyMatch","(","b","->","b",".","equals","(","oldBookieId",")",")",";","}",",\n","(","metadata",")","->","{","return","replaceBookieInEnsembles","(","metadata,","oldBookieId,","newBookieId",")",";","}",",\n","ref::compareAndSet,","throttler",")",".","run","(",")",";","}",")",";","\n\n","outstanding",".","add","(","writePromise",")",";","writePromise",".","whenComplete","(","(","metadata,","ex",")","->","{","if","(","ex","!=","null\n","&&","!","(","ex","instanceof","BKException",".","BKNoSuchLedgerExistsOnMetadataServerException",")",")","{","String","error","=","String",".","format","(","\"Failed","to","update","ledger","metadata","%s,","replacing","%s","with","%s\",\n","ledgerId,","oldBookieId,","newBookieId",")",";","LOG",".","error","(","error,","ex",")",";","finalPromise",".","completeExceptionally","(","new","IOException","(","error,","ex",")",")",";","}","else","{","LOG",".","info","(","\"Updated","ledger","{","}","metadata,","replacing","{","}","with","{","}","\",\n","ledgerId,","oldBookieId,","newBookieId",")",";","\n\n","updatedLedgerCnt",".","incrementAndGet","(",")",";","progressable",".","progress","(","updatedLedgerCnt",".","get","(",")",",","issuedLedgerCnt",".","get","(",")",")",";","}","outstandingReads",".","release","(",")",";","outstanding",".","remove","(","writePromise",")",";","}",")",";","}","\n\n","CompletableFuture",".","allOf","(","outstanding",".","stream","(",")",".","toArray","(","CompletableFuture[]::new",")",")",".","whenComplete","(","(","res,","ex",")","->","{","if","(","ex","!=","null",")","{","finalPromise",".","completeExceptionally","(","ex",")",";","}","else","{","finalPromise",".","complete","(","null",")",";","}","}",")",";","\n\n","try","{","finalPromise",".","get","(",")",";","LOG",".","info","(","\"Total","number","of","ledgers","issued=","{","}","updated=","{","}","\",\n","issuedLedgerCnt",".","get","(",")",",","updatedLedgerCnt",".","get","(",")",")",";","}","catch","(","ExecutionException","e",")","{","String","error","=","String",".","format","(","\"Error","waiting","for","ledger","metadata","updates","to","complete","(","replacing","%s","with","%s",")","\",\n","oldBookieId,","newBookieId",")",";","LOG",".","info","(","error,","e",")",";","if","(","e",".","getCause","(",")","instanceof","IOException",")","{","throw","(","IOException",")","e",".","getCause","(",")",";","}","else","{","throw","new","IOException","(","error,","e",")",";","}","}"],"docstring_tokens":["Update","the","bookie","id","present","in","the","ledger","metadata"],"prompt_tokens":[]}
{"code_tokens":["private","CompletableFuture<Versioned<Set<BookieId>>>","getChildren","(","String","regPath,","Watcher","watcher",")","{","CompletableFuture<Versioned<Set<BookieId>>>","future","=","FutureUtils",".","createFuture","(",")",";","zk",".","getChildren","(","regPath,","watcher,","(","rc,","path,","ctx,","children,","stat",")","->","{","if","(","KeeperException",".","Code",".","OK",".","intValue","(",")","!=","rc",")","{","ZKException","zke","=","new","ZKException","(","KeeperException",".","create","(","KeeperException",".","Code",".","get","(","rc",")",",","path",")",")",";","future",".","completeExceptionally","(","zke",".","fillInStackTrace","(",")",")",";","return",";","}","\n\n","Version","version","=","new","LongVersion","(","stat",".","getCversion","(",")",")",";","Set<BookieId>","bookies","=","convertToBookieAddresses","(","children",")",";","List<CompletableFuture<Versioned<BookieServiceInfo>>>","bookieInfoUpdated","=","new","ArrayList<>","(","bookies",".","size","(",")",")",";","for","(","BookieId","id",":","bookies",")","{","//","update","the","cache","for","new","bookies\n","if","(","!bookieServiceInfoCache",".","containsKey","(","id",")",")","{","bookieInfoUpdated",".","add","(","readBookieServiceInfoAsync","(","id",")",")",";","}","}","if","(","bookieInfoUpdated",".","isEmpty","(",")",")","{","future",".","complete","(","new","Versioned<>","(","bookies,","version",")",")",";","}","else","{","FutureUtils\n",".","collect","(","bookieInfoUpdated",")",".","whenComplete","(","(","List<Versioned<BookieServiceInfo>>","info,","Throwable","error",")","->","{","//","we","are","ignoring","errors","intentionally\n","//","there","could","be","bookies","that","publish","unparseable","information\n","//","or","other","temporary/permanent","errors\n","future",".","complete","(","new","Versioned<>","(","bookies,","version",")",")",";","}",")",";","}","}",",","null",")",";","return","future",";"],"docstring_tokens":["Reads","the","list","of","bookies","at","the","given","path","and","eagerly","caches","the","BookieServiceInfo","structure"],"prompt_tokens":[]}
{"code_tokens":["public","static","SchedulerBuilder","newSchedulerBuilder","(",")","{","return","new","SchedulerBuilder","(",")",";"],"docstring_tokens":["Create","a","builder","to","build","ordered","scheduler"],"prompt_tokens":[]}
{"code_tokens":["public","ScheduledFuture<?>","scheduleOrdered","(","Object","orderingKey,","SafeRunnable","command,","long","delay,","TimeUnit","unit",")","{","return","chooseThread","(","orderingKey",")",".","schedule","(","command,","delay,","unit",")",";"],"docstring_tokens":["Creates","and","executes","a","one-shot","action","that","becomes","enabled","after","the","given","delay"],"prompt_tokens":[]}
{"code_tokens":["public","static","void","forceFlush","(","Bookie","b",")","throws","IOException","{","CheckpointSourceList","source","=","new","CheckpointSourceList","(","b",".","journals",")",";","Checkpoint","cp","=","source",".","newCheckpoint","(",")",";","b",".","ledgerStorage",".","flush","(",")",";","source",".","checkpointComplete","(","cp,","true",")",";"],"docstring_tokens":["Force","a","bookie","to","flush","its","ledger","storage"],"prompt_tokens":[]}
{"code_tokens":["@SuppressWarnings","(","\"deprecation\"",")","public","static","LedgerManagerFactory","newLedgerManagerFactory","(","final","AbstractConfiguration<?>","conf,","LayoutManager","layoutManager",")","throws","IOException,","InterruptedException","{","String","metadataServiceUriStr",";","try","{","metadataServiceUriStr","=","conf",".","getMetadataServiceUri","(",")",";","}","catch","(","ConfigurationException","e",")","{","log",".","error","(","\"Failed","to","retrieve","metadata","service","uri","from","configuration\",","e",")",";","throw","new","IOException","(","\"Failed","to","retrieve","metadata","service","uri","from","configuration\",","e",")",";","}","\n\n","Class<?","extends","LedgerManagerFactory>","factoryClass",";","String","ledgerRootPath",";","//","`metadataServiceUri`","can","be","null","when","constructing","bookkeeper","client","using","an","external","zookeeper","client",".","if","(","null","==","metadataServiceUriStr",")","{","//\n","try","{","factoryClass","=","conf",".","getLedgerManagerFactoryClass","(",")",";","}","catch","(","ConfigurationException","e",")","{","log",".","error","(","\"Failed","to","get","ledger","manager","factory","class","when","using","an","external","zookeeper","client\",","e",")",";","throw","new","IOException","(","\"Failed","to","get","ledger","manager","factory","class","when","using","an","external","zookeeper","client\",","e",")",";","}","ledgerRootPath","=","conf",".","getZkLedgersRootPath","(",")",";","}","else","{","URI","metadataServiceUri","=","URI",".","create","(","metadataServiceUriStr",")",";","factoryClass","=","ZKMetadataDriverBase",".","resolveLedgerManagerFactory","(","metadataServiceUri",")",";","ledgerRootPath","=","metadataServiceUri",".","getPath","(",")",";","}","\n\n","if","(","null","==","ledgerRootPath","||","ledgerRootPath",".","length","(",")","==","0",")","{","throw","new","IOException","(","\"Empty","Ledger","Root","Path",".","\"",")",";","}","\n\n","//","if","layoutManager","is","null,","return","the","default","ledger","manager\n","if","(","layoutManager","==","null",")","{","return","new","FlatLedgerManagerFactory","(",")",".","initialize","(","conf,","null,","FlatLedgerManagerFactory",".","CUR_VERSION",")",";","}","\n\n","LedgerManagerFactory","lmFactory",";","\n\n","//","check","that","the","configured","ledger","manager","is\n","//","compatible","with","the","existing","layout\n","LedgerLayout","layout","=","layoutManager",".","readLedgerLayout","(",")",";","\n\n","if","(","layout","==","null",")","{","//","no","existing","layout\n","lmFactory","=","createNewLMFactory","(","conf,","layoutManager,","factoryClass",")",";","return","lmFactory\n",".","initialize","(","conf,","layoutManager,","lmFactory",".","getCurrentVersion","(",")",")",";","}","if","(","log",".","isDebugEnabled","(",")",")","{","log",".","debug","(","\"read","ledger","layout","{","}","\",","layout",")",";","}","\n\n","//","there","is","existing","layout,","we","need","to","look","into","the","layout",".","//","handle","pre","V2","layout\n","if","(","layout",".","getLayoutFormatVersion","(",")","<=","V1",")","{","//","pre","V2","layout","we","use","type","of","ledger","manager\n","String","lmType","=","conf",".","getLedgerManagerType","(",")",";","if","(","lmType","!=","null","&&","!layout",".","getManagerFactoryClass","(",")",".","equals","(","lmType",")",")","{","throw","new","IOException","(","\"Configured","layout","\"","+","lmType\n","+","\"","does","not","match","existing","layout","\"","+","layout",".","getManagerFactoryClass","(",")",")",";","}","\n\n","//","create","the","ledger","manager\n","if","(","FlatLedgerManagerFactory",".","NAME",".","equals","(","layout",".","getManagerFactoryClass","(",")",")",")","{","lmFactory","=","new","FlatLedgerManagerFactory","(",")",";","}","else","if","(","HierarchicalLedgerManagerFactory",".","NAME",".","equals","(","layout",".","getManagerFactoryClass","(",")",")",")","{","lmFactory","=","new","HierarchicalLedgerManagerFactory","(",")",";","}","else","{","throw","new","IOException","(","\"Unknown","ledger","manager","type:","\"","+","lmType",")",";","}","return","lmFactory",".","initialize","(","conf,","layoutManager,","layout",".","getManagerVersion","(",")",")",";","}","\n\n","//","handle","V2","layout","case\n","if","(","factoryClass","!=","null\n","&&","!isSameLedgerManagerFactory","(","conf,","layout",".","getManagerFactoryClass","(",")",",","factoryClass",".","getName","(",")",")","&&","conf",".","getProperty","(","AbstractConfiguration",".","LEDGER_MANAGER_FACTORY_DISABLE_CLASS_CHECK",")","==","null",")","{","//","Disable","should","ONLY","happen","during","compatibility","testing",".","\n\n","throw","new","IOException","(","\"Configured","layout","\"","+","factoryClass",".","getName","(",")","+","\"","does","not","match","existing","layout","\"","+","layout",".","getManagerFactoryClass","(",")",")",";","}","if","(","factoryClass","==","null",")","{","//","no","factory","specified","in","configuration\n","try","{","Class<?>","theCls","=","Class",".","forName","(","layout",".","getManagerFactoryClass","(",")",")",";","if","(","!LedgerManagerFactory",".","class",".","isAssignableFrom","(","theCls",")",")","{","throw","new","IOException","(","\"Wrong","ledger","manager","factory","\"","+","layout",".","getManagerFactoryClass","(",")",")",";","}","factoryClass","=","theCls",".","asSubclass","(","LedgerManagerFactory",".","class",")",";","}","catch","(","ClassNotFoundException","|","IOException","e",")","{","factoryClass","=","attemptToResolveShadedLedgerManagerFactory","(","conf,\n","layout",".","getManagerFactoryClass","(",")",",\n","e",")",";","}","}","//","instantiate","a","factory\n","lmFactory","=","ReflectionUtils",".","newInstance","(","factoryClass",")",";","return","lmFactory",".","initialize","(","conf,","layoutManager,","layout",".","getManagerVersion","(",")",")",";"],"docstring_tokens":["Create","new","Ledger","Manager","Factory"],"prompt_tokens":[]}
{"code_tokens":["@SuppressWarnings","(","\"deprecation\"",")","protected","static","LedgerManagerFactory","createNewLMFactory","(","final","AbstractConfiguration","conf,","final","LayoutManager","layoutManager,\n","Class<?","extends","LedgerManagerFactory>","factoryClass",")","throws","IOException,","InterruptedException","{","\n\n","LedgerManagerFactory","lmFactory",";","LedgerLayout","layout",";","//","use","default","ledger","manager","factory","if","no","one","provided\n","if","(","factoryClass","==","null",")","{","//","for","backward","compatibility,","check","manager","type\n","String","lmType","=","conf",".","getLedgerManagerType","(",")",";","if","(","lmType","==","null",")","{","factoryClass","=","HierarchicalLedgerManagerFactory",".","class",";","}","else","{","if","(","FlatLedgerManagerFactory",".","NAME",".","equals","(","lmType",")",")","{","factoryClass","=","FlatLedgerManagerFactory",".","class",";","}","else","if","(","HierarchicalLedgerManagerFactory",".","NAME",".","equals","(","lmType",")",")","{","factoryClass","=","HierarchicalLedgerManagerFactory",".","class",";","}","else","if","(","LongHierarchicalLedgerManagerFactory",".","NAME",".","equals","(","lmType",")",")","{","factoryClass","=","LongHierarchicalLedgerManagerFactory",".","class",";","}","else","{","throw","new","IOException","(","\"Unknown","ledger","manager","type:","\"\n","+","lmType",")",";","}","}","}","\n\n","lmFactory","=","ReflectionUtils",".","newInstance","(","factoryClass",")",";","\n\n","layout","=","new","LedgerLayout","(","factoryClass",".","getName","(",")",",\n","lmFactory",".","getCurrentVersion","(",")",")",";","try","{","layoutManager",".","storeLedgerLayout","(","layout",")",";","}","catch","(","LedgerLayoutExistsException","e",")","{","LedgerLayout","layout2","=","layoutManager",".","readLedgerLayout","(",")",";","if","(","!layout2",".","equals","(","layout",")",")","{","throw","new","IOException","(","\"Contention","writing","to","layout","to","zookeeper,","\"\n","+","\"","other","layout","\"","+","layout2\n","+","\"","is","incompatible","with","our","\"","+","\"layout","\"\n","+","layout",")",";","}","}","return","lmFactory",";"],"docstring_tokens":["Creates","the","new","layout","and","stores","in","zookeeper","and","returns","the","LedgerManagerFactory","instance"],"prompt_tokens":[]}
{"code_tokens":["public","static","BookKeeperClientBuilder","newBuilder","(",")","{","return","new","BookKeeperClientBuilder","(",")",";"],"docstring_tokens":["Create","a","bookkeeper","client","builder","to","build","bookkeeper","clients"],"prompt_tokens":[]}
{"code_tokens":["public","synchronized","BookKeeperClientBuilder","dlConfig","(","DistributedLogConfiguration","dlConfig",")","{","this",".","dlConfig","=","dlConfig",";","return","this",";"],"docstring_tokens":["dlConfig","used","to","configure","bookkeeper","client"],"prompt_tokens":[]}
{"code_tokens":["public","synchronized","BookKeeperClientBuilder","ledgersPath","(","String","ledgersPath",")","{","this",".","ledgersPath","=","ledgersPath",";","return","this",";"],"docstring_tokens":["Set","the","ledgers","path","that","bookkeeper","client","is","going","to","access"],"prompt_tokens":[]}
{"code_tokens":["public","synchronized","BookKeeperClientBuilder","bkc","(","BookKeeperClient","bkc",")","{","this",".","cachedClient","=","bkc",";","return","this",";"],"docstring_tokens":["Build","BookKeeper","client","using","existing","bkc","client"],"prompt_tokens":[]}
{"code_tokens":["public","synchronized","BookKeeperClientBuilder","eventLoopGroup","(","EventLoopGroup","eventLoopGroup",")","{","this",".","eventLoopGroup","=","eventLoopGroup",";","return","this",";"],"docstring_tokens":["Build","BookKeeper","client","using","existing","channelFactory"],"prompt_tokens":[]}
{"code_tokens":["public","synchronized","BookKeeperClientBuilder","requestTimer","(","HashedWheelTimer","requestTimer",")","{","this",".","requestTimer","=","requestTimer",";","return","this",";"],"docstring_tokens":["Build","BookKeeper","client","using","existing","request","timer"],"prompt_tokens":[]}
{"code_tokens":["public","synchronized","BookKeeperClientBuilder","statsLogger","(","StatsLogger","statsLogger",")","{","this",".","statsLogger","=","statsLogger",";","return","this",";"],"docstring_tokens":["Build","BookKeeper","Client","using","given","stats","logger","statsLogger"],"prompt_tokens":[]}
{"code_tokens":["public","static","ZooKeeperClientBuilder","newBuilder","(",")","{","return","new","ZooKeeperClientBuilder","(",")",";"],"docstring_tokens":["Create","a","zookeeper","client","builder","to","build","zookeeper","clients"],"prompt_tokens":[]}
{"code_tokens":["public","synchronized","ZooKeeperClientBuilder","name","(","String","name",")","{","this",".","name","=","name",";","return","this",";"],"docstring_tokens":["Set","zookeeper","client","name"],"prompt_tokens":[]}
{"code_tokens":["public","synchronized","ZooKeeperClientBuilder","zkc","(","ZooKeeperClient","zkc",")","{","this",".","cachedClient","=","zkc",";","return","this",";"],"docstring_tokens":["Build","zookeeper","client","using","existing","zkc","client"],"prompt_tokens":[]}
{"code_tokens":["public","synchronized","ZooKeeperClientBuilder","retryPolicy","(","RetryPolicy","retryPolicy",")","{","this",".","retryPolicy","=","retryPolicy",";","return","this",";"],"docstring_tokens":["Build","zookeeper","client","with","given","retry","policy","retryPolicy"],"prompt_tokens":[]}
{"code_tokens":["public","synchronized","ZooKeeperClientBuilder","statsLogger","(","StatsLogger","statsLogger",")","{","this",".","statsLogger","=","statsLogger",";","return","this",";"],"docstring_tokens":["Build","zookeeper","client","with","given","stats","logger","statsLogger"],"prompt_tokens":[]}
{"code_tokens":["public","synchronized","ZooKeeperClientBuilder","zkAclId","(","String","zkAclId",")","{","this",".","zkAclIdSet","=","true",";","this",".","zkAclId","=","zkAclId",";","return","this",";"],"docstring_tokens":["Build","zookeeper","client","with","given","zk","acl","digest","id","zkAclId"],"prompt_tokens":[]}
{"code_tokens":["public","synchronized","ZooKeeperClient","build","(",")","{","if","(","null","==","cachedClient",")","{","cachedClient","=","buildClient","(",")",";","}","return","cachedClient",";"],"docstring_tokens":["Build","a","zookeeper","client"],"prompt_tokens":[]}
{"code_tokens":["public","long","size","(",")","throws","IOException","{","return","validateAndGetFileChannel","(",")",".","size","(",")",";"],"docstring_tokens":["Get","the","current","size","of","the","underlying","FileChannel"],"prompt_tokens":[]}
{"code_tokens":["public","void","advance","(","Duration","duration",")","{","now","=","now",".","plus","(","duration",")",";"],"docstring_tokens":["Advance","the","clock","by","the","given","amount","of","time"],"prompt_tokens":[]}
{"code_tokens":["public","static","long","resumeChecksum","(","long","previousChecksum,","ByteBuf","payload",")","{","int","crc","=","(","int",")","previousChecksum",";","if","(","payload",".","hasMemoryAddress","(",")","&&","(","CRC32C_HASH","instanceof","Sse42Crc32C",")",")","{","crc","=","CRC32C_HASH",".","resume","(","crc,","payload",".","memoryAddress","(",")","+","payload",".","readerIndex","(",")",",\n","payload",".","readableBytes","(",")",")",";","}","else","if","(","payload",".","hasArray","(",")",")","{","crc","=","CRC32C_HASH",".","resume","(","crc,","payload",".","array","(",")",",","payload",".","arrayOffset","(",")","+","payload",".","readerIndex","(",")",",\n","payload",".","readableBytes","(",")",")",";","}","else","{","crc","=","CRC32C_HASH",".","resume","(","crc,","payload",".","nioBuffer","(",")",")",";","}","return","crc","&","0xffffffffL",";"],"docstring_tokens":["Computes","incremental","checksum","with","input","previousChecksum","and","input","payload"],"prompt_tokens":[]}
{"code_tokens":["private","void","verifyLedgerFragment","(","LedgerFragment","fragment,\n","int","bookieIndex,\n","GenericCallback<LedgerFragment>","cb,\n","long","percentageOfLedgerFragmentToBeVerified",")","throws","InvalidFragmentException","{","long","firstStored","=","fragment",".","getFirstStoredEntryId","(","bookieIndex",")",";","long","lastStored","=","fragment",".","getLastStoredEntryId","(","bookieIndex",")",";","\n\n","BookieId","bookie","=","fragment",".","getAddress","(","bookieIndex",")",";","if","(","null","==","bookie",")","{","throw","new","InvalidFragmentException","(",")",";","}","\n\n","if","(","firstStored","==","LedgerHandle",".","INVALID_ENTRY_ID",")","{","//","this","fragment","is","not","on","this","bookie\n","if","(","lastStored","!=","LedgerHandle",".","INVALID_ENTRY_ID",")","{","throw","new","InvalidFragmentException","(",")",";","}","cb",".","operationComplete","(","BKException",".","Code",".","OK,","fragment",")",";","}","else","if","(","bookieWatcher",".","isBookieUnavailable","(","fragment",".","getAddress","(","bookieIndex",")",")",")","{","//","fragment","is","on","this","bookie,","but","already","know","it's","unavailable,","so","skip","the","call\n","cb",".","operationComplete","(","BKException",".","Code",".","BookieHandleNotAvailableException,","fragment",")",";","}","else","if","(","firstStored","==","lastStored",")","{","ReadManyEntriesCallback","manycb","=","new","ReadManyEntriesCallback","(","1,\n","fragment,","cb",")",";","bookieClient",".","readEntry","(","bookie,","fragment",".","getLedgerId","(",")",",","firstStored,\n","manycb,","null,","BookieProtocol",".","FLAG_NONE",")",";","}","else","{","if","(","lastStored","<=","firstStored",")","{","cb",".","operationComplete","(","Code",".","IncorrectParameterException,","null",")",";","return",";","}","\n\n","long","lengthOfLedgerFragment","=","lastStored","-","firstStored","+","1",";","\n\n","int","numberOfEntriesToBeVerified","=\n","(","int",")","(","lengthOfLedgerFragment","*","(","percentageOfLedgerFragmentToBeVerified","/","100",".","0",")",")",";","\n\n","TreeSet<Long>","entriesToBeVerified","=","new","TreeSet<Long>","(",")",";","\n\n","if","(","numberOfEntriesToBeVerified","<","lengthOfLedgerFragment",")","{","//","Evenly","pick","random","entries","over","the","length","of","the","fragment\n","if","(","numberOfEntriesToBeVerified",">","0",")","{","int","lengthOfBucket","=","(","int",")","(","lengthOfLedgerFragment","/","numberOfEntriesToBeVerified",")",";","for","(","long","index","=","firstStored",";","index","<","(","lastStored","-","lengthOfBucket","-","1",")",";","index","+=","lengthOfBucket",")","{","long","potentialEntryId","=","ThreadLocalRandom",".","current","(",")",".","nextInt","(","(","lengthOfBucket",")",")","+","index",";","if","(","fragment",".","isStoredEntryId","(","potentialEntryId,","bookieIndex",")",")","{","entriesToBeVerified",".","add","(","potentialEntryId",")",";","}","}","}","entriesToBeVerified",".","add","(","firstStored",")",";","entriesToBeVerified",".","add","(","lastStored",")",";","}","else","{","//","Verify","the","entire","fragment\n","while","(","firstStored","<=","lastStored",")","{","if","(","fragment",".","isStoredEntryId","(","firstStored,","bookieIndex",")",")","{","entriesToBeVerified",".","add","(","firstStored",")",";","}","firstStored++",";","}","}","ReadManyEntriesCallback","manycb","=","new","ReadManyEntriesCallback","(","entriesToBeVerified",".","size","(",")",",\n","fragment,","cb",")",";","for","(","Long","entryID:","entriesToBeVerified",")","{","bookieClient",".","readEntry","(","bookie,","fragment",".","getLedgerId","(",")",",","entryID,","manycb,","null,","BookieProtocol",".","FLAG_NONE",")",";","}","}"],"docstring_tokens":["Verify","a","bookie","inside","a","ledger","fragment"],"prompt_tokens":[]}
{"code_tokens":["public","void","checkLedger","(","final","LedgerHandle","lh,\n","final","GenericCallback<Set<LedgerFragment>>","cb",")","{","checkLedger","(","lh,","cb,","0L",")",";"],"docstring_tokens":["Check","that","all","the","fragments","in","the","passed","in","ledger,","and","report","those","which","are","missing"],"prompt_tokens":[]}
{"code_tokens":["public","NamespaceBuilder","conf","(","DistributedLogConfiguration","conf",")","{","this",".","_conf","=","conf",";","return","this",";"],"docstring_tokens":["DistributedLog","Configuration","used","for","the","namespace"],"prompt_tokens":[]}
{"code_tokens":["public","NamespaceBuilder","dynConf","(","DynamicDistributedLogConfiguration","dynConf",")","{","this",".","_dynConf","=","dynConf",";","return","this",";"],"docstring_tokens":["Dynamic","DistributedLog","Configuration","used","for","the","namespace"],"prompt_tokens":[]}
{"code_tokens":["public","NamespaceBuilder","featureProvider","(","FeatureProvider","featureProvider",")","{","this",".","_featureProvider","=","featureProvider",";","return","this",";"],"docstring_tokens":["Feature","provider","used","to","control","the","availabilities","of","features","in","the","namespace"],"prompt_tokens":[]}
{"code_tokens":["public","NamespaceBuilder","clientId","(","String","clientId",")","{","this",".","_clientId","=","clientId",";","return","this",";"],"docstring_tokens":["Client","Id","used","for","accessing","the","namespace"],"prompt_tokens":[]}
{"code_tokens":["public","NamespaceBuilder","regionId","(","int","regionId",")","{","this",".","_regionId","=","regionId",";","return","this",";"],"docstring_tokens":["Region","Id","used","for","encoding","logs","in","the","namespace"],"prompt_tokens":[]}
{"code_tokens":["public","static","StringUtf8Coder","of","(",")","{","return","INSTANCE",";"],"docstring_tokens":["Get","the","coder","to","encode","strings","in","utf-8"],"prompt_tokens":[]}
{"code_tokens":["public","byte[]","serialize","(",")","{","StringBuilder","sb","=","new","StringBuilder","(",")",";","sb",".","append","(","metadataFormatVersion",")",".","append","(","LINE_SPLITTER",")",";","sb",".","append","(","dlType",")",".","append","(","LINE_SPLITTER",")",";","sb",".","append","(","dlConfig",".","serialize","(",")",")",";","LOG",".","debug","(","\"Serialized","dl","metadata","{","}",".","\",","sb",")",";","return","sb",".","toString","(",")",".","getBytes","(","UTF_8",")",";"],"docstring_tokens":["Serialize","the","DL","metadata","into","bytes","array"],"prompt_tokens":[]}
{"code_tokens":["public","static","DLMetadata","deserialize","(","URI","uri,","byte[]","data",")","throws","IOException","{","String","metadata","=","new","String","(","data,","UTF_8",")",";","LOG",".","debug","(","\"Parsing","dl","metadata","{","}",".","\",","metadata",")",";","BufferedReader","br","=","new","BufferedReader","(","new","StringReader","(","metadata",")",")",";","String","versionLine","=","br",".","readLine","(",")",";","if","(","null","==","versionLine",")","{","throw","new","IOException","(","\"Empty","DL","Metadata",".","\"",")",";","}","int","version",";","try","{","version","=","Integer",".","parseInt","(","versionLine",")",";","}","catch","(","NumberFormatException","nfe",")","{","version","=","-1",";","}","if","(","METADATA_FORMAT_VERSION","!=","version",")","{","throw","new","IOException","(","\"Metadata","version","not","compatible",".","Expected","\"\n","+","METADATA_FORMAT_VERSION","+","\"","but","got","\"","+","version",")",";","}","String","type","=","br",".","readLine","(",")",";","if","(","!BK_DL_TYPE",".","equals","(","type",")",")","{","throw","new","IOException","(","\"Invalid","DL","type",":","\"","+","type",")",";","}","DLConfig","dlConfig","=","new","BKDLConfig","(","uri",")",";","StringBuilder","sb","=","new","StringBuilder","(",")",";","String","line",";","while","(","null","!=","(","line","=","br",".","readLine","(",")",")",")","{","sb",".","append","(","line",")",";","}","dlConfig",".","deserialize","(","sb",".","toString","(",")",".","getBytes","(","UTF_8",")",")",";","return","new","DLMetadata","(","type,","dlConfig,","version",")",";"],"docstring_tokens":["Deserialize","dl","metadata","of","given","uri","from","a","given","bytes","array"],"prompt_tokens":[]}
{"code_tokens":["public","void","registerListener","(","NamespaceListener","listener",")","{","if","(","listeners",".","add","(","listener",")",")","{","watchNamespaceChanges","(",")",";","}"],"docstring_tokens":["Register","listener","for","namespace","changes"],"prompt_tokens":[]}
{"code_tokens":["public","void","unregisterListener","(","NamespaceListener","listener",")","{","listeners",".","remove","(","listener",")",";"],"docstring_tokens":["Unregister","listener","from","the","namespace","watcher"],"prompt_tokens":[]}
{"code_tokens":["public","static","CompressionCodec",".","Type","stringToType","(","String","compressionString",")","{","if","(","compressionString",".","equals","(","LZ4",")",")","{","return","CompressionCodec",".","Type",".","LZ4",";","}","else","if","(","compressionString",".","equals","(","NONE",")",")","{","return","CompressionCodec",".","Type",".","NONE",";","}","else","{","return","CompressionCodec",".","Type",".","UNKNOWN",";","}"],"docstring_tokens":["Compression","type","value","from","string"],"prompt_tokens":[]}
{"code_tokens":["public","static","<T","extends","CliFlags>","Builder<T>","newBuilder","(",")","{","return","new","Builder<>","(",")",";"],"docstring_tokens":["Create","a","new","builder","to","build","the","cli","spec"],"prompt_tokens":[]}
{"code_tokens":["public","static","MonitoringServerInterceptor","create","(","StatsLogger","statsLogger,\n","boolean","includeLatencyHistograms",")","{","return","new","MonitoringServerInterceptor","(","new","Factory","(","includeLatencyHistograms",")",",","statsLogger",")",";"],"docstring_tokens":["Create","a","monitoring","client","interceptor","with","provided","stats","logger","and","configuration"],"prompt_tokens":[]}
{"code_tokens":["@SuppressWarnings","(","\"unchecked\"",")","public","void","loadConf","(","URL","confURL",")","throws","ConfigurationException","{","PropertiesConfiguration","loadedConf","=","new","PropertiesConfiguration","(","confURL",")",";","for","(","Iterator<String>","iter","=","loadedConf",".","getKeys","(",")",";","iter",".","hasNext","(",")",";",")","{","String","key","=","iter",".","next","(",")",";","setProperty","(","key,","loadedConf",".","getProperty","(","key",")",")",";","}"],"docstring_tokens":["You","can","load","configurations","in","precedence","order"],"prompt_tokens":[]}
{"code_tokens":["@SuppressWarnings","(","\"unchecked\"",")","public","void","loadConf","(","CompositeConfiguration","baseConf",")","{","for","(","Iterator<String>","iter","=","baseConf",".","getKeys","(",")",";","iter",".","hasNext","(",")",";",")","{","String","key","=","iter",".","next","(",")",";","setProperty","(","key,","baseConf",".","getProperty","(","key",")",")",";","}"],"docstring_tokens":["You","can","load","configuration","from","other","configuration"],"prompt_tokens":[]}
{"code_tokens":["@Override\n","public","void","suspend","(",")","{","synchronized","(","suspensionLock",")","{","suspended","=","true",";","suspensionLock",".","notifyAll","(",")",";","}"],"docstring_tokens":["Suspend","the","controller","if","the","leader","disconnects","from","zookeeper"],"prompt_tokens":[]}
{"code_tokens":["public","static","void","put","(","ByteBuffer","dst",")","{","put","(","dst,","dst",".","remaining","(",")",")",";"],"docstring_tokens":["Fill","zeros","into","given","buffer"],"prompt_tokens":[]}
{"code_tokens":["public","static","void","put","(","ByteBuffer","dst,","int","length",")","{","while","(","length",">","zeroBytes",".","length",")","{","dst",".","put","(","zeroBytes",")",";","length","-=","zeroBytes",".","length",";","}","if","(","length",">","0",")","{","dst",".","put","(","zeroBytes,","0,","length",")",";","}"],"docstring_tokens":["Fill","zeros","into","given","buffer","up","to","given","length"],"prompt_tokens":[]}
{"code_tokens":["public","static","ByteBuffer","readOnlyBuffer","(","int","length",")","{","ByteBuffer","buffer",";","if","(","length","<=","zeroBytes",".","length",")","{","buffer","=","ByteBuffer",".","wrap","(","zeroBytes,","0,","length",")",";","}","else","{","buffer","=","ByteBuffer",".","allocate","(","length",")",";","put","(","buffer",")",";","buffer",".","rewind","(",")",";","}","return","buffer",".","asReadOnlyBuffer","(",")",";"],"docstring_tokens":["Returns","read-only","zero-filled","buffer"],"prompt_tokens":[]}
{"code_tokens":["public","byte[]","serializeBytes","(",")","{","return","serializeBytes","(","CUR_VERSION",")",";"],"docstring_tokens":["Serialize","the","DLSN","into","bytes","with","current","version"],"prompt_tokens":[]}
{"code_tokens":["public","byte[]","serializeBytes","(","byte","version",")","{","checkArgument","(","version","<=","CUR_VERSION","&&","version",">=","VERSION0",")",";","byte[]","data","=","new","byte[CUR_VERSION","==","version","?","VERSION1_LEN",":","VERSION0_LEN]",";","ByteBuffer","bb","=","ByteBuffer",".","wrap","(","data",")",";","bb",".","put","(","version",")",";","bb",".","putLong","(","logSegmentSequenceNo",")",";","bb",".","putLong","(","entryId",")",";","bb",".","putLong","(","slotId",")",";","return","data",";"],"docstring_tokens":["Serialize","the","DLSN","into","bytes","with","given","version"],"prompt_tokens":[]}
{"code_tokens":["public","String","serialize","(",")","{","return","serialize","(","CUR_VERSION",")",";"],"docstring_tokens":["Serialize","the","DLSN","into","base64","encoded","string"],"prompt_tokens":[]}
{"code_tokens":["public","String","serialize","(","byte","version",")","{","return","Base64",".","encodeBase64String","(","serializeBytes","(","version",")",")",";"],"docstring_tokens":["Serialize","the","DLSN","into","base64","encoded","string","with","given","version"],"prompt_tokens":[]}
{"code_tokens":["public","static","DLSN","deserialize","(","String","dlsn",")","{","byte[]","data","=","Base64",".","decodeBase64","(","dlsn",")",";","return","deserializeBytes","(","data",")",";"],"docstring_tokens":["Deserialize","the","DLSN","from","base64","encoded","string","dlsn"],"prompt_tokens":[]}
{"code_tokens":["public","static","DLSN","deserializeBytes","(","byte[]","data",")","{","ByteBuffer","bb","=","ByteBuffer",".","wrap","(","data",")",";","byte","version","=","bb",".","get","(",")",";","if","(","VERSION0","==","version",")","{","if","(","VERSION0_LEN","!=","data",".","length",")","{","throw","new","IllegalArgumentException","(","\"Invalid","version","zero","DLSN","\"","+","Hex",".","encodeHexString","(","data",")",")",";","}","}","else","if","(","VERSION1","==","version",")","{","if","(","VERSION1_LEN","!=","data",".","length",")","{","throw","new","IllegalArgumentException","(","\"Invalid","version","one","DLSN","\"","+","Hex",".","encodeHexString","(","data",")",")",";","}","}","else","{","throw","new","IllegalArgumentException","(","\"Invalid","DLSN",":","version","=","\"\n","+","version","+","\",","\"","+","Hex",".","encodeHexString","(","data",")",")",";","}","return","new","DLSN","(","bb",".","getLong","(",")",",","bb",".","getLong","(",")",",","bb",".","getLong","(",")",")",";"],"docstring_tokens":["Deserialize","the","DLSN","from","bytes","array"],"prompt_tokens":[]}
{"code_tokens":["public","void","add","(","String","name,","LogSegmentMetadata","metadata",")","{","synchronized","(","logSegments",")","{","if","(","!logSegments",".","containsKey","(","name",")",")","{","logSegments",".","put","(","name,","metadata",")",";","LOG",".","info","(","\"","{","}","added","log","segment","(","{","}",":","{","}",")","to","cache",".","\",\n","streamName,","name,","metadata",")",";","}","LogSegmentMetadata","oldMetadata","=","lid2LogSegments",".","remove","(","metadata",".","getLogSegmentId","(",")",")",";","if","(","null","==","oldMetadata",")","{","lid2LogSegments",".","put","(","metadata",".","getLogSegmentId","(",")",",","metadata",")",";","}","else","{","if","(","oldMetadata",".","isInProgress","(",")","&&","!metadata",".","isInProgress","(",")",")","{","lid2LogSegments",".","put","(","metadata",".","getLogSegmentId","(",")",",","metadata",")",";","}","else","{","lid2LogSegments",".","put","(","oldMetadata",".","getLogSegmentId","(",")",",","oldMetadata",")",";","}","}","}"],"docstring_tokens":["Add","the","segment","metadata","for","name","in","the","cache"],"prompt_tokens":[]}
{"code_tokens":["public","LogSegmentMetadata","get","(","String","name",")","{","synchronized","(","logSegments",")","{","return","logSegments",".","get","(","name",")",";","}"],"docstring_tokens":["Retrieve","log","segment","name","from","the","cache"],"prompt_tokens":[]}
{"code_tokens":["public","Pair<Set<String>,","Set<String>>","diff","(","Set<String>","segmentsReceived",")","{","Set<String>","segmentsAdded",";","Set<String>","segmentsRemoved",";","synchronized","(","logSegments",")","{","Set<String>","segmentsCached","=","logSegments",".","keySet","(",")",";","segmentsAdded","=","Sets",".","difference","(","segmentsReceived,","segmentsCached",")",".","immutableCopy","(",")",";","segmentsRemoved","=","Sets",".","difference","(","segmentsCached,","segmentsReceived",")",".","immutableCopy","(",")",";","}","return","Pair",".","of","(","segmentsAdded,","segmentsRemoved",")",";"],"docstring_tokens":["Diff","with","new","received","segment","list","segmentReceived"],"prompt_tokens":[]}
{"code_tokens":["public","LogSegmentMetadata","remove","(","String","name",")","{","synchronized","(","logSegments",")","{","LogSegmentMetadata","metadata","=","logSegments",".","remove","(","name",")",";","if","(","null","!=","metadata",")","{","lid2LogSegments",".","remove","(","metadata",".","getLogSegmentId","(",")",",","metadata",")",";","LOG",".","debug","(","\"Removed","log","segment","(","{","}",":","{","}",")","from","cache",".","\",","name,","metadata",")",";","}","return","metadata",";","}"],"docstring_tokens":["Remove","log","segment","name","from","the","cache"],"prompt_tokens":[]}
{"code_tokens":["@Override\n","public","long","addEntry","(","final","long","entryId,","byte[]","data",")","throws","InterruptedException,","BKException","{","\n\n","return","addEntry","(","entryId,","data,","0,","data",".","length",")",";","\n\n"],"docstring_tokens":["Add","entry","synchronously","to","an","open","ledger"],"prompt_tokens":[]}
{"code_tokens":["@Override\n","public","void","asyncAddEntry","(","long","entryId,","byte[]","data,","AddCallback","cb,","Object","ctx",")","{","asyncAddEntry","(","entryId,","data,","0,","data",".","length,","cb,","ctx",")",";"],"docstring_tokens":["Add","entry","asynchronously","to","an","open","ledger"],"prompt_tokens":[]}
{"code_tokens":["@Override\n","public","void","asyncAddEntry","(","final","long","entryId,","final","byte[]","data,","final","int","offset,","final","int","length,\n","final","AddCallback","cb,","final","Object","ctx",")","{","asyncAddEntry","(","entryId,","Unpooled",".","wrappedBuffer","(","data,","offset,","length",")",",","cb,","ctx",")",";"],"docstring_tokens":["Add","entry","asynchronously","to","an","open","ledger,","using","an","offset","and","range"],"prompt_tokens":[]}
{"code_tokens":["@Override\n","public","void","asyncAddEntry","(","ByteBuf","data,","AddCallback","cb,","Object","ctx",")","{","cb",".","addCompleteWithLatency","(","BKException",".","Code",".","IllegalOpException,","this,","LedgerHandle",".","INVALID_ENTRY_ID,","0,","ctx",")",";"],"docstring_tokens":["LedgerHandleAdv","will","not","allow","addEntry","without","providing","an","entryId"],"prompt_tokens":[]}
{"code_tokens":["private","void","startAudit","(","boolean","shutDownTask",")","{","try","{","auditBookies","(",")",";","shutDownTask","=","false",";","}","catch","(","BKException","bke",")","{","LOG",".","error","(","\"Exception","getting","bookie","list\",","bke",")",";","}","catch","(","InterruptedException","ie",")","{","Thread",".","currentThread","(",")",".","interrupt","(",")",";","LOG",".","error","(","\"Interrupted","while","watching","available","bookies","\",","ie",")",";","}","catch","(","BKAuditException","bke",")","{","LOG",".","error","(","\"Exception","while","watching","available","bookies\",","bke",")",";","}","if","(","shutDownTask",")","{","submitShutdownTask","(",")",";","}"],"docstring_tokens":["Start","running","the","actual","audit","task"],"prompt_tokens":[]}
{"code_tokens":["public","boolean","isRunning","(",")","{","return","!executor",".","isShutdown","(",")",";"],"docstring_tokens":["Return","true","if","auditor","is","running","otherwise","return","false"],"prompt_tokens":[]}
{"code_tokens":["public","<T>","CompletableFuture<T>","execute","(","Supplier<CompletableFuture<T>>","action",")","{","return","Retries",".","run","(","backoffPolicy",".","toBackoffs","(",")",",\n","retryPredicate,\n","action,\n","scheduler\n",")",";"],"docstring_tokens":["Run","the","action","with","retries"],"prompt_tokens":[]}
{"code_tokens":["protected","void","handleException","(","Thread","t,","Throwable","e",")","{","LOG",".","error","(","\"Uncaught","exception","in","thread","{","}","\",","t",".","getName","(",")",",","e",")",";"],"docstring_tokens":["Handles","uncaught","exception","occurred","in","thread"],"prompt_tokens":[]}
{"code_tokens":["@Override\n","public","void","checkpointComplete","(","Checkpoint","checkpoint,","boolean","compact",")","throws","IOException","{","if","(","!","(","checkpoint","instanceof","LogMarkCheckpoint",")",")","{","return",";","//","we","didn't","create","this","checkpoint,","so","dont","do","anything","with","it\n","}","LogMarkCheckpoint","lmcheckpoint","=","(","LogMarkCheckpoint",")","checkpoint",";","LastLogMark","mark","=","lmcheckpoint",".","mark",";","\n\n","mark",".","rollLog","(","mark",")",";","if","(","compact",")","{","//","list","the","journals","that","have","been","marked\n","List<Long>","logs","=","listJournalIds","(","journalDirectory,","new","JournalRollingFilter","(","mark",")",")",";","//","keep","MAX_BACKUP_JOURNALS","journal","files","before","marked","journal\n","if","(","logs",".","size","(",")",">=","maxBackupJournals",")","{","int","maxIdx","=","logs",".","size","(",")","-","maxBackupJournals",";","for","(","int","i","=","0",";","i","<","maxIdx",";","i++",")","{","long","id","=","logs",".","get","(","i",")",";","//","make","sure","the","journal","id","is","smaller","than","marked","journal","id\n","if","(","id","<","mark",".","getCurMark","(",")",".","getLogFileId","(",")",")","{","File","journalFile","=","new","File","(","journalDirectory,","Long",".","toHexString","(","id",")","+","\"",".","txn\"",")",";","if","(","!journalFile",".","delete","(",")",")","{","LOG",".","warn","(","\"Could","not","delete","old","journal","file","{","}","\",","journalFile",")",";","}","LOG",".","info","(","\"garbage","collected","journal","\"","+","journalFile",".","getName","(",")",")",";","}","}","}","}"],"docstring_tokens":["Telling","journal","a","checkpoint","is","finished"],"prompt_tokens":[]}
{"code_tokens":["public","void","logAddEntry","(","ByteBuf","entry,","boolean","ackBeforeSync,","WriteCallback","cb,","Object","ctx",")","throws","InterruptedException","{","long","ledgerId","=","entry",".","getLong","(","entry",".","readerIndex","(",")","+","0",")",";","long","entryId","=","entry",".","getLong","(","entry",".","readerIndex","(",")","+","8",")",";","logAddEntry","(","ledgerId,","entryId,","entry,","ackBeforeSync,","cb,","ctx",")",";"],"docstring_tokens":["record","an","add","entry","operation","in","journal"],"prompt_tokens":[]}
{"code_tokens":["public","synchronized","void","shutdown","(",")","{","try","{","if","(","!running",")","{","return",";","}","LOG",".","info","(","\"Shutting","down","Journal\"",")",";","forceWriteThread",".","shutdown","(",")",";","cbThreadPool",".","shutdown","(",")",";","if","(","!cbThreadPool",".","awaitTermination","(","5,","TimeUnit",".","SECONDS",")",")","{","LOG",".","warn","(","\"Couldn't","shutdown","journal","callback","thread","gracefully",".","Forcing\"",")",";","}","cbThreadPool",".","shutdownNow","(",")",";","\n\n","running","=","false",";","this",".","interrupt","(",")",";","this",".","join","(",")",";","LOG",".","info","(","\"Finished","Shutting","down","Journal","thread\"",")",";","}","catch","(","InterruptedException","ie",")","{","Thread",".","currentThread","(",")",".","interrupt","(",")",";","LOG",".","warn","(","\"Interrupted","during","shutting","down","journal",":","\",","ie",")",";","}"],"docstring_tokens":["Shuts","down","the","journal"],"prompt_tokens":[]}
{"code_tokens":["public","void","await","(",")","throws","InterruptedException","{","if","(","LOG",".","isDebugEnabled","(",")",")","{","LOG",".","debug","(","\"Automatic","ledger","re-replication","is","disabled",".","Hence","waiting","until","its","enabled!\"",")",";","}","latch",".","await","(",")",";"],"docstring_tokens":["This","is","a","blocking","call","and","causes","the","current","thread","to","wait","until","the","replication","process","is","enabled"],"prompt_tokens":[]}
{"code_tokens":["public","void","start","(",")","{","this",".","workerThread",".","start","(",")",";"],"docstring_tokens":["Start","the","replication","worker"],"prompt_tokens":[]}
{"code_tokens":["private","void","rereplicate","(",")","throws","InterruptedException,","BKException,\n","UnavailableException","{","long","ledgerIdToReplicate","=","underreplicationManager\n",".","getLedgerToRereplicate","(",")",";","\n\n","Stopwatch","stopwatch","=","Stopwatch",".","createStarted","(",")",";","boolean","success","=","false",";","try","{","success","=","rereplicate","(","ledgerIdToReplicate",")",";","}","finally","{","long","latencyMillis","=","stopwatch",".","stop","(",")",".","elapsed","(","TimeUnit",".","MILLISECONDS",")",";","if","(","success",")","{","rereplicateOpStats",".","registerSuccessfulEvent","(","latencyMillis,","TimeUnit",".","MILLISECONDS",")",";","}","else","{","rereplicateOpStats",".","registerFailedEvent","(","latencyMillis,","TimeUnit",".","MILLISECONDS",")",";","}","}"],"docstring_tokens":["Replicates","the","under","replicated","fragments","from","failed","bookie","ledger","to","targetBookie"],"prompt_tokens":[]}
{"code_tokens":["private","void","deferLedgerLockReleaseOfFailedLedger","(","final","long","ledgerId",")","{","int","numOfTimesFailedSoFar","=","replicationFailedLedgers",".","getUnchecked","(","ledgerId",")",".","getAndIncrement","(",")",";","/*\n","*","for","the","first","NUM_OF_EXPONENTIAL_BACKOFF_RETRIALS","retrials","do\n","*","exponential","backoff,","starting","from\n","*","baseBackoffForLockReleaseOfFailedLedger\n","*/\n","long","delayOfLedgerLockReleaseInMSecs","=","(","numOfTimesFailedSoFar",">=","NUM_OF_EXPONENTIAL_BACKOFF_RETRIALS",")","?","this",".","lockReleaseOfFailedLedgerGracePeriod\n",":","this",".","baseBackoffForLockReleaseOfFailedLedger","*","(","int",")","Math",".","pow","(","2,","numOfTimesFailedSoFar",")",";","LOG",".","error","(","\"ReplicationWorker","failed","to","replicate","Ledger",":","{","}","for","{","}","number","of","times,","\"\n","+","\"so","deferring","the","ledger","lock","release","by","{","}","msecs\",\n","ledgerId,","numOfTimesFailedSoFar,","delayOfLedgerLockReleaseInMSecs",")",";","TimerTask","timerTask","=","new","TimerTask","(",")","{","@Override\n","public","void","run","(",")","{","try","{","underreplicationManager",".","releaseUnderreplicatedLedger","(","ledgerId",")",";","}","catch","(","UnavailableException","e",")","{","LOG",".","error","(","\"UnavailableException","while","replicating","fragments","of","ledger","{","}","\",","ledgerId,","e",")",";","shutdown","(",")",";","}","}","}",";","scheduleTaskWithDelay","(","timerTask,","delayOfLedgerLockReleaseInMSecs",")",";"],"docstring_tokens":["Schedules","a","timer","task","for","releasing","the","lock"],"prompt_tokens":[]}
{"code_tokens":["public","void","shutdown","(",")","{","LOG",".","info","(","\"Shutting","down","replication","worker\"",")",";","\n\n","synchronized","(","this",")","{","if","(","!workerRunning",")","{","return",";","}","workerRunning","=","false",";","}","LOG",".","info","(","\"Shutting","down","ReplicationWorker\"",")",";","this",".","pendingReplicationTimer",".","cancel","(",")",";","try","{","this",".","workerThread",".","interrupt","(",")",";","this",".","workerThread",".","join","(",")",";","}","catch","(","InterruptedException","e",")","{","LOG",".","error","(","\"Interrupted","during","shutting","down","replication","worker",":","\",\n","e",")",";","Thread",".","currentThread","(",")",".","interrupt","(",")",";","}","if","(","ownBkc",")","{","try","{","bkc",".","close","(",")",";","}","catch","(","InterruptedException","e",")","{","LOG",".","warn","(","\"Interrupted","while","closing","the","Bookie","client\",","e",")",";","Thread",".","currentThread","(",")",".","interrupt","(",")",";","}","catch","(","BKException","e",")","{","LOG",".","warn","(","\"Exception","while","closing","the","Bookie","client\",","e",")",";","}","}","try","{","underreplicationManager",".","close","(",")",";","}","catch","(","UnavailableException","e",")","{","LOG",".","warn","(","\"Exception","while","closing","the","\"\n","+","\"ZkLedgerUnderrepliationManager\",","e",")",";","}"],"docstring_tokens":["Stop","the","replication","worker","service"],"prompt_tokens":[]}
{"code_tokens":["boolean","isRunning","(",")","{","return","workerRunning","&&","workerThread",".","isAlive","(",")",";"],"docstring_tokens":["Gives","the","running","status","of","ReplicationWorker"],"prompt_tokens":[]}
{"code_tokens":["@Override\n","public","void","cleanUpAndRecover","(",")","{","//","clean","up","compacting","logs","and","recover","index","for","already","compacted","logs\n","List<File>","ledgerDirs","=","entryLogger",".","getLedgerDirsManager","(",")",".","getAllLedgerDirs","(",")",";","for","(","File","dir",":","ledgerDirs",")","{","File[]","compactingPhaseFiles","=","dir",".","listFiles","(","file","->","file",".","getName","(",")",".","endsWith","(","COMPACTING_SUFFIX",")",")",";","if","(","compactingPhaseFiles","!=","null",")","{","for","(","File","file",":","compactingPhaseFiles",")","{","if","(","file",".","delete","(",")",")","{","LOG",".","info","(","\"Deleted","failed","compaction","file","{","}","\",","file",")",";","}","}","}","File[]","compactedPhaseFiles","=","dir",".","listFiles","(","file","->","file",".","getName","(",")",".","endsWith","(","COMPACTED_SUFFIX",")",")",";","if","(","compactedPhaseFiles","!=","null",")","{","for","(","File","compactedFile",":","compactedPhaseFiles",")","{","LOG",".","info","(","\"Found","compacted","log","file","{","}","has","partially","flushed","index,","recovering","index",".","\",\n","compactedFile",")",";","CompactionPhase","updateIndex","=","new","UpdateIndexPhase","(","compactedFile,","true",")",";","updateIndex",".","run","(",")",";","}","}","}"],"docstring_tokens":["Delete","all","previously","incomplete","compacting","logs","and","recover","the","index","for","compacted","logs"],"prompt_tokens":[]}
{"code_tokens":["@Override\n","public","void","add","(","Node","node",")","{","if","(","node","==","null",")","{","return",";","}","String","oldTopoStr","=","this",".","toString","(",")",";","if","(","node","instanceof","InnerNode",")","{","throw","new","IllegalArgumentException","(","\"Not","allow","to","add","an","inner","node:","\"","+","NodeBase",".","getPath","(","node",")",")",";","}","int","newDepth","=","NodeBase",".","locationToDepth","(","node",".","getNetworkLocation","(",")",")","+","1",";","netlock",".","writeLock","(",")",".","lock","(",")",";","try","{","if","(","(","depthOfAllLeaves","!=","-1",")","&&","(","depthOfAllLeaves","!=","newDepth",")",")","{","LOG",".","error","(","\"Error:","can't","add","leaf","node","{","}","at","depth","{","}","to","topology:\\n","{","}","\",","node,","newDepth,","oldTopoStr",")",";","throw","new","InvalidTopologyException","(","\"Invalid","network","topology",".","\"\n","+","\"You","cannot","have","a","rack","and","a","non-rack","node","at","the","same","level","of","the","network","topology",".","\"",")",";","}","Node","rack","=","getNodeForNetworkLocation","(","node",")",";","if","(","rack","!=","null","&&","!","(","rack","instanceof","InnerNode",")",")","{","LOG",".","error","(","\"Unexpected","data","node","{","}","at","an","illegal","network","location\",","node",")",";","throw","new","IllegalArgumentException","(","\"Unexpected","data","node","\"","+","node",".","toString","(",")","+","\"","at","an","illegal","network","location\"",")",";","}","if","(","clusterMap",".","add","(","node",")",")","{","LOG",".","info","(","\"Adding","a","new","node:","\"","+","NodeBase",".","getPath","(","node",")",")",";","if","(","rack","==","null",")","{","numOfRacks++",";","}","if","(","!","(","node","instanceof","InnerNode",")",")","{","if","(","depthOfAllLeaves","==","-1",")","{","depthOfAllLeaves","=","node",".","getLevel","(",")",";","}","}","}","if","(","LOG",".","isDebugEnabled","(",")",")","{","LOG",".","debug","(","\"NetworkTopology","became:\\n\"","+","this",".","toString","(",")",")",";","}","}","finally","{","netlock",".","writeLock","(",")",".","unlock","(",")",";","}"],"docstring_tokens":["Add","a","leaf","node"],"prompt_tokens":[]}
{"code_tokens":["public","boolean","isNodeGroupAware","(",")","{","return","false",";"],"docstring_tokens":["Check","if","network","topology","is","aware","of","NodeGroup"],"prompt_tokens":[]}
{"code_tokens":["@Override\n","public","String","toString","(",")","{","//","print","the","number","of","racks\n","StringBuilder","tree","=","new","StringBuilder","(",")",";","tree",".","append","(","\"Number","of","racks:","\"",")",";","tree",".","append","(","numOfRacks",")",";","tree",".","append","(","\"\\n\"",")",";","//","print","the","number","of","leaves\n","int","numOfLeaves","=","getNumOfLeaves","(",")",";","tree",".","append","(","\"Expected","number","of","leaves:\"",")",";","tree",".","append","(","numOfLeaves",")",";","tree",".","append","(","\"\\n\"",")",";","//","print","nodes\n","for","(","int","i","=","0",";","i","<","numOfLeaves",";","i++",")","{","tree",".","append","(","NodeBase",".","getPath","(","clusterMap",".","getLeaf","(","i,","null",")",")",")",";","tree",".","append","(","\"\\n\"",")",";","}","return","tree",".","toString","(",")",";"],"docstring_tokens":["Convert","a","network","tree","to","a","string"],"prompt_tokens":[]}
{"code_tokens":["public","static","String","getFirstHalf","(","String","networkLocation",")","{","int","index","=","networkLocation",".","lastIndexOf","(","NodeBase",".","PATH_SEPARATOR_STR",")",";","return","networkLocation",".","substring","(","0,","index",")",";"],"docstring_tokens":["Divide","networklocation","string","into","two","parts","by","last","separator,","and","get","the","first","part","here"],"prompt_tokens":[]}
{"code_tokens":["public","static","String","getLastHalf","(","String","networkLocation",")","{","int","index","=","networkLocation",".","lastIndexOf","(","NodeBase",".","PATH_SEPARATOR_STR",")",";","return","networkLocation",".","substring","(","index",")",";"],"docstring_tokens":["Divide","networklocation","string","into","two","parts","by","last","separator,","and","get","the","second","part","here"],"prompt_tokens":[]}
{"code_tokens":["HttpServer",".","Method","httpServerMethod","(","HttpServletRequest","request",")","{","switch","(","request",".","getMethod","(",")",")","{","case","\"POST\":\n","return","HttpServer",".","Method",".","POST",";","case","\"DELETE\":\n","return","HttpServer",".","Method",".","DELETE",";","case","\"PUT\":\n","return","HttpServer",".","Method",".","PUT",";","case","\"GET\":\n","return","HttpServer",".","Method",".","GET",";","default:\n","throw","new","UnsupportedOperationException","(","\"Unsupported","http","method\"",")",";","}"],"docstring_tokens":["Get","servlet","request","method","and","convert","to","the","method","that","can","be","recognized","by","HttpServer"],"prompt_tokens":[]}
{"code_tokens":["static","Set<LedgerFragment>","splitIntoSubFragments","(","LedgerHandle","lh,\n","LedgerFragment","ledgerFragment,","long","rereplicationEntryBatchSize",")","{","Set<LedgerFragment>","fragments","=","new","HashSet<LedgerFragment>","(",")",";","if","(","rereplicationEntryBatchSize","<=","0",")","{","//","rereplicationEntryBatchSize","can","not","be","0","or","less","than","0,\n","//","returning","with","the","current","fragment\n","fragments",".","add","(","ledgerFragment",")",";","return","fragments",";","}","\n\n","long","firstEntryId","=","ledgerFragment",".","getFirstStoredEntryId","(",")",";","long","lastEntryId","=","ledgerFragment",".","getLastStoredEntryId","(",")",";","\n\n","/*\n","*","if","firstEntryId","is","INVALID_ENTRY_ID","then","lastEntryId","should","be\n","*","INVALID_ENTRY_ID","and","viceversa",".","*/\n","if","(","firstEntryId","==","INVALID_ENTRY_ID","^","lastEntryId","==","INVALID_ENTRY_ID",")","{","LOG",".","error","(","\"For","LedgerFragment:","{","}",",","seeing","inconsistent","firstStoredEntryId:","{","}","and","lastStoredEntryId:","{","}","\",\n","ledgerFragment,","firstEntryId,","lastEntryId",")",";","assert","false",";","}","\n\n","long","numberOfEntriesToReplicate","=","(","lastEntryId","-","firstEntryId",")","+","1",";","long","splitsWithFullEntries","=","numberOfEntriesToReplicate\n","/","rereplicationEntryBatchSize",";","\n\n","if","(","splitsWithFullEntries","==","0",")","{","//","only","one","fragment\n","fragments",".","add","(","ledgerFragment",")",";","return","fragments",";","}","\n\n","long","fragmentSplitLastEntry","=","0",";","for","(","int","i","=","0",";","i","<","splitsWithFullEntries",";","i++",")","{","fragmentSplitLastEntry","=","(","firstEntryId","+","rereplicationEntryBatchSize",")","-","1",";","fragments",".","add","(","new","LedgerFragment","(","lh,","firstEntryId,\n","fragmentSplitLastEntry,","ledgerFragment",".","getBookiesIndexes","(",")",")",")",";","firstEntryId","=","fragmentSplitLastEntry","+","1",";","}","\n\n","long","lastSplitWithPartialEntries","=","numberOfEntriesToReplicate\n","%","rereplicationEntryBatchSize",";","if","(","lastSplitWithPartialEntries",">","0",")","{","fragments",".","add","(","new","LedgerFragment","(","lh,","firstEntryId,","firstEntryId\n","+","lastSplitWithPartialEntries","-","1,","ledgerFragment\n",".","getBookiesIndexes","(",")",")",")",";","}","return","fragments",";"],"docstring_tokens":["Split","the","full","fragment","into","batched","entry","fragments","by","keeping","rereplicationEntryBatchSize","of","entries","in","each","one","and","can","treat","them","as","sub","fragments"],"prompt_tokens":[]}
{"code_tokens":["public","static","ProtoCompareImpl","newCompareOp","(","Compare","protoCompare",")","{","ProtoCompareImpl","op","=","RECYCLER",".","get","(",")",";","op",".","setRequest","(","protoCompare",")",";","op",".","setTarget","(","toApiCompareTarget","(","protoCompare",".","getTarget","(",")",")",")",";","op",".","setResult","(","toApiCompareResult","(","protoCompare",".","getResult","(",")",")",")",";","return","op",";"],"docstring_tokens":["Create","a","protobuf","encoded","compare","operation"],"prompt_tokens":[]}
{"code_tokens":["long","flush","(","final","SkipListFlusher","flusher",")","throws","IOException","{","try","{","long","flushSize","=","flushSnapshot","(","flusher,","Checkpoint",".","MAX",")",";","previousFlushSucceeded",".","set","(","true",")",";","return","flushSize",";","}","catch","(","IOException","ioe",")","{","previousFlushSucceeded",".","set","(","false",")",";","throw","ioe",";","}"],"docstring_tokens":["Flush","snapshot","and","clear","it"],"prompt_tokens":[]}
{"code_tokens":["public","long","flush","(","SkipListFlusher","flusher,","Checkpoint","checkpoint",")","throws","IOException","{","try","{","long","size","=","flushSnapshot","(","flusher,","checkpoint",")",";","if","(","null","!=","snapshot","(","checkpoint",")",")","{","size","+=","flushSnapshot","(","flusher,","checkpoint",")",";","}","previousFlushSucceeded",".","set","(","true",")",";","return","size",";","}","catch","(","IOException","ioe",")","{","previousFlushSucceeded",".","set","(","false",")",";","throw","ioe",";","}"],"docstring_tokens":["Flush","memtable","until","checkpoint"],"prompt_tokens":[]}
{"code_tokens":["public","EntryKeyValue","getLastEntry","(","long","ledgerId",")","throws","IOException","{","EntryKey","result","=","null",";","EntryKey","key","=","new","EntryKey","(","ledgerId,","Long",".","MAX_VALUE",")",";","long","startTimeNanos","=","MathUtils",".","nowInNano","(",")",";","boolean","success","=","false",";","this",".","lock",".","readLock","(",")",".","lock","(",")",";","try","{","result","=","this",".","kvmap",".","floorKey","(","key",")",";","if","(","result","==","null","||","result",".","getLedgerId","(",")","!=","ledgerId",")","{","result","=","this",".","snapshot",".","floorKey","(","key",")",";","}","success","=","true",";","}","finally","{","this",".","lock",".","readLock","(",")",".","unlock","(",")",";","if","(","success",")","{","memTableStats",".","getGetEntryStats","(",")",".","registerSuccessfulEvent","(","MathUtils",".","elapsedNanos","(","startTimeNanos",")",",","TimeUnit",".","NANOSECONDS",")",";","}","else","{","memTableStats",".","getGetEntryStats","(",")",".","registerFailedEvent","(","MathUtils",".","elapsedNanos","(","startTimeNanos",")",",","TimeUnit",".","NANOSECONDS",")",";","}","}","\n\n","if","(","result","==","null","||","result",".","getLedgerId","(",")","!=","ledgerId",")","{","return","null",";","}","return","(","EntryKeyValue",")","result",";"],"docstring_tokens":["Find","the","last","entry","with","the","given","ledger","key"],"prompt_tokens":[]}
{"code_tokens":["boolean","isSizeLimitReached","(",")","{","return","size",".","get","(",")",">=","skipListSizeLimit",";"],"docstring_tokens":["Check","if","the","entire","heap","usage","for","this","EntryMemTable","exceeds","limit"],"prompt_tokens":[]}
{"code_tokens":["boolean","isEmpty","(",")","{","return","size",".","get","(",")","==","0","&&","snapshot",".","isEmpty","(",")",";"],"docstring_tokens":["Check","if","there","is","data","in","the","mem-table"],"prompt_tokens":[]}
{"code_tokens":["private","void","checkState","(",")","throws","IOException","{","if","(","closed",".","get","(",")",")","{","LOG",".","error","(","\"BK","namespace","{","}","is","already","closed\",","namespace",")",";","throw","new","AlreadyClosedException","(","\"BK","namespace","\"","+","namespace","+","\"","is","already","closed\"",")",";","}"],"docstring_tokens":["Check","the","namespace","state"],"prompt_tokens":[]}
{"code_tokens":["public","void","initialBlockingBookieRead","(",")","throws","BKException","{","\n\n","CompletableFuture<?>","writable",";","CompletableFuture<?>","readonly",";","synchronized","(","this",")","{","if","(","initialReadonlyBookiesFuture","==","null",")","{","assert","initialWritableBookiesFuture","==","null",";","\n\n","writable","=","this",".","registrationClient",".","watchWritableBookies","(","bookies","->","processWritableBookiesChanged","(","bookies",".","getValue","(",")",")",")",";","\n\n","readonly","=","this",".","registrationClient",".","watchReadOnlyBookies","(","bookies","->","processReadOnlyBookiesChanged","(","bookies",".","getValue","(",")",")",")",";","initialWritableBookiesFuture","=","writable",";","initialReadonlyBookiesFuture","=","readonly",";","}","else","{","writable","=","initialWritableBookiesFuture",";","readonly","=","initialReadonlyBookiesFuture",";","}","}","try","{","FutureUtils",".","result","(","writable,","EXCEPTION_FUNC",")",";","}","catch","(","BKInterruptedException","ie",")","{","Thread",".","currentThread","(",")",".","interrupt","(",")",";","throw","ie",";","}","try","{","FutureUtils",".","result","(","readonly,","EXCEPTION_FUNC",")",";","}","catch","(","BKInterruptedException","ie",")","{","Thread",".","currentThread","(",")",".","interrupt","(",")",";","throw","ie",";","}","catch","(","Exception","e",")","{","log",".","error","(","\"Failed","getReadOnlyBookies:","\",","e",")",";","}"],"docstring_tokens":["Blocks","until","bookies","are","read","from","zookeeper,","used","in","the","BookKeeper","constructor"],"prompt_tokens":[]}
{"code_tokens":["public","Value","project","(","Set<String>","fields",")","{","if","(","ALL_FIELDS","==","fields",")","{","return","new","Value","(","this",")",";","}","Value","v","=","new","Value","(",")",";","for","(","String","f",":","fields",")","{","byte[]","data","=","this",".","fields",".","get","(","f",")",";","v",".","setField","(","f,","data",")",";","}","return","v",";"],"docstring_tokens":["Select","parts","of","fields"],"prompt_tokens":[]}
{"code_tokens":["private","void","copyFilesToDest","(","String","checkpointId,","List<CheckpointFile>","files",")","throws","IOException","{","for","(","CheckpointFile","file",":","files",")","{","file",".","copyToRemote","(","checkpointStore,","dbPrefix,","checkpointId",")",";","}"],"docstring_tokens":["All","sst","files","are","copied","to","checkpoint","location","first"],"prompt_tokens":[]}
{"code_tokens":["public","BKStats","diff","(","BKStats","base",")","{","BKStats","diff","=","new","BKStats","(",")",";","for","(","int","i","=","0",";","i","<","NUM_STATS",";","i++",")","{","diff",".","setOpStats","(","i,","stats[i]",".","diff","(","base",".","getOpStats","(","i",")",")",")",";","}","return","diff",";"],"docstring_tokens":["Diff","with","base","stats"],"prompt_tokens":[]}
{"code_tokens":["public","void","copyOf","(","BKStats","other",")","{","for","(","int","i","=","0",";","i","<","NUM_STATS",";","i++",")","{","stats[i]",".","copyOf","(","other",".","getOpStats","(","i",")",")",";","}"],"docstring_tokens":["Copy","stats","from","other","stats"],"prompt_tokens":[]}
{"code_tokens":["public","NavigableMap<K,","V>","snapshot","(",")","{","this",".","lock",".","writeLock","(",")",".","lock","(",")",";","try","{","if","(","updates",".","isEmpty","(",")",")","{","return","snapshot",";","}","//","put","updates","for","merge","to","snapshot\n","updatesToMerge","=","updates",";","updates","=","new","ConcurrentHashMap<K,","V>","(",")",";","}","finally","{","this",".","lock",".","writeLock","(",")",".","unlock","(",")",";","}","//","merging","the","updates","to","snapshot\n","for","(","Map",".","Entry<K,","V>","entry",":","updatesToMerge",".","entrySet","(",")",")","{","snapshot",".","put","(","entry",".","getKey","(",")",",","entry",".","getValue","(",")",")",";","}","//","clear","updatesToMerge\n","this",".","lock",".","writeLock","(",")",".","lock","(",")",";","try","{","updatesToMerge","=","new","ConcurrentHashMap<K,","V>","(",")",";","}","finally","{","this",".","lock",".","writeLock","(",")",".","unlock","(",")",";","}","return","snapshot",";"],"docstring_tokens":["Create","a","snapshot","of","current","map"],"prompt_tokens":[]}
{"code_tokens":["public","void","put","(","K","key,","V","value",")","{","this",".","lock",".","readLock","(",")",".","lock","(",")",";","try","{","updates",".","put","(","key,","value",")",";","}","finally","{","this",".","lock",".","readLock","(",")",".","unlock","(",")",";","}","\n\n"],"docstring_tokens":["Associates","the","specified","value","with","the","specified","key","in","this","map"],"prompt_tokens":[]}
{"code_tokens":["public","void","remove","(","K","key",")","{","this",".","lock",".","readLock","(",")",".","lock","(",")",";","try","{","//","first","remove","updates\n","updates",".","remove","(","key",")",";","updatesToMerge",".","remove","(","key",")",";","//","then","remove","snapshot\n","snapshot",".","remove","(","key",")",";","}","finally","{","this",".","lock",".","readLock","(",")",".","unlock","(",")",";","}"],"docstring_tokens":["Removes","the","mapping","for","the","key","from","this","map","if","it","is","present"],"prompt_tokens":[]}
{"code_tokens":["public","boolean","containsKey","(","K","key",")","{","this",".","lock",".","readLock","(",")",".","lock","(",")",";","try","{","return","updates",".","containsKey","(","key",")","|","updatesToMerge",".","containsKey","(","key",")","|","snapshot",".","containsKey","(","key",")",";","}","finally","{","this",".","lock",".","readLock","(",")",".","unlock","(",")",";","}"],"docstring_tokens":["Returns","true","if","this","map","contains","a","mapping","for","the","specified","key"],"prompt_tokens":[]}
{"code_tokens":["private","Header","getHeaderForLogId","(","long","entryLogId",")","throws","IOException","{","BufferedReadChannel","bc","=","getChannelForLogId","(","entryLogId",")",";","\n\n","//","Allocate","buffer","to","read","(","version,","ledgersMapOffset,","ledgerCount",")","ByteBuf","headers","=","allocator",".","directBuffer","(","LOGFILE_HEADER_SIZE",")",";","try","{","bc",".","read","(","headers,","0",")",";","\n\n","//","Skip","marker","string","\"BKLO\"\n","headers",".","readInt","(",")",";","\n\n","int","headerVersion","=","headers",".","readInt","(",")",";","if","(","headerVersion","<","HEADER_V0","||","headerVersion",">","HEADER_CURRENT_VERSION",")","{","LOG",".","info","(","\"Unknown","entry","log","header","version","for","log","{","}",":","{","}","\",","entryLogId,","headerVersion",")",";","}","\n\n","long","ledgersMapOffset","=","headers",".","readLong","(",")",";","int","ledgersCount","=","headers",".","readInt","(",")",";","return","new","Header","(","headerVersion,","ledgersMapOffset,","ledgersCount",")",";","}","finally","{","headers",".","release","(",")",";","}"],"docstring_tokens":["Read","the","header","of","an","entry","log"],"prompt_tokens":[]}
{"code_tokens":["public","void","shutdown","(",")","{","//","since","logChannel","is","buffered","channel,","do","flush","when","shutting","down\n","LOG",".","info","(","\"Stopping","EntryLogger\"",")",";","try","{","flush","(",")",";","for","(","FileChannel","fc",":","logid2FileChannel",".","values","(",")",")","{","fc",".","close","(",")",";","}","//","clear","the","mapping,","so","we","don't","need","to","go","through","the","channels","again","in","finally","block","in","normal","case",".","logid2FileChannel",".","clear","(",")",";","entryLogManager",".","close","(",")",";","synchronized","(","compactionLogLock",")","{","if","(","compactionLogChannel","!=","null",")","{","compactionLogChannel",".","close","(",")",";","compactionLogChannel","=","null",";","}","}","}","catch","(","IOException","ie",")","{","//","we","have","no","idea","how","to","avoid","io","exception","during","shutting","down,","so","just","ignore","it\n","LOG",".","error","(","\"Error","flush","entry","log","during","shutting","down,","which","may","cause","entry","log","corrupted",".","\",","ie",")",";","}","finally","{","for","(","FileChannel","fc",":","logid2FileChannel",".","values","(",")",")","{","IOUtils",".","close","(","LOG,","fc",")",";","}","\n\n","entryLogManager",".","forceClose","(",")",";","synchronized","(","compactionLogLock",")","{","IOUtils",".","close","(","LOG,","compactionLogChannel",")",";","}","}","//","shutdown","the","pre-allocation","thread\n","entryLoggerAllocator",".","stop","(",")",";"],"docstring_tokens":["Shutdown","method","to","gracefully","stop","entry","logger"],"prompt_tokens":[]}
{"code_tokens":["@Override\n","public","void","safeRun","(",")","{","hasRun","=","true",";","if","(","callbackTriggered",")","{","//","this","should","only","be","true","if","the","request","was","failed","due\n","//","to","another","request","ahead","in","the","pending","queue,\n","//","so","we","can","just","ignore","this","request\n","maybeRecycle","(",")",";","return",";","}","\n\n","this",".","requestTimeNanos","=","MathUtils",".","nowInNano","(",")",";","checkNotNull","(","lh",")",";","checkNotNull","(","lh",".","macManager",")",";","\n\n","this",".","toSend","=","lh",".","macManager",".","computeDigestAndPackageForSending","(","entryId,","lh",".","lastAddConfirmed,","currentLedgerLength,\n","payload",")",";","//","ownership","of","RefCounted","ByteBuf","was","passed","to","computeDigestAndPackageForSending\n","payload","=","null",";","\n\n","//","We","are","about","to","send",".","Check","if","we","need","to","make","an","ensemble","change\n","//","because","of","delayed","write","errors\n","lh",".","maybeHandleDelayedWriteBookieFailure","(",")",";","\n\n","//","Iterate","over","set","and","trigger","the","sendWriteRequests\n","DistributionSchedule",".","WriteSet","writeSet","=","lh",".","distributionSchedule",".","getWriteSet","(","entryId",")",";","\n\n","try","{","for","(","int","i","=","0",";","i","<","writeSet",".","size","(",")",";","i++",")","{","sendWriteRequest","(","ensemble,","writeSet",".","get","(","i",")",")",";","}","}","finally","{","writeSet",".","recycle","(",")",";","}"],"docstring_tokens":["Initiate","the","add","operation"],"prompt_tokens":[]}
{"code_tokens":["private","LogRecordWithInputStream","nextLogRecord","(",")","throws","IOException","{","return","nextLogRecord","(","reader",")",";"],"docstring_tokens":["Get","input","stream","representing","next","entry","in","the","ledger"],"prompt_tokens":[]}
{"code_tokens":["public","static","StreamCluster","build","(","StreamClusterSpec","spec",")","{","return","new","StreamCluster","(","spec",")",";"],"docstring_tokens":["Build","a","stream","cluster","from","the","provided","cluster","spec"],"prompt_tokens":[]}
{"code_tokens":["public","BookieId","getBookie","(","int","index",")","throws","Exception","{","if","(","bs",".","size","(",")","<=","index","||","index","<","0",")","{","throw","new","IllegalArgumentException","(","\"Invalid","index,","there","are","only","\"","+","bs",".","size","(",")","+","\"","bookies",".","Asked","for","\"","+","index",")",";","}","return","bs",".","get","(","index",")",".","getBookieId","(",")",";"],"docstring_tokens":["Get","bookie","address","for","bookie","at","index"],"prompt_tokens":[]}
{"code_tokens":["public","ServerConfiguration","getBkConf","(","BookieId","addr",")","throws","Exception","{","int","bkIndex","=","0",";","for","(","BookieServer","server",":","bs",")","{","if","(","server",".","getBookieId","(",")",".","equals","(","addr",")",")","{","break",";","}","++bkIndex",";","}","if","(","bkIndex","<","bs",".","size","(",")",")","{","return","bsConfs",".","get","(","bkIndex",")",";","}","return","null",";"],"docstring_tokens":["Get","bookie","configuration","for","bookie"],"prompt_tokens":[]}
{"code_tokens":["public","void","stopReplicationService","(",")","throws","Exception","{","if","(","!isAutoRecoveryEnabled","(",")",")","{","return",";","}","for","(","Entry<BookieServer,","AutoRecoveryMain>","autoRecoveryProcess",":","autoRecoveryProcesses\n",".","entrySet","(",")",")","{","autoRecoveryProcess",".","getValue","(",")",".","shutdown","(",")",";","LOG",".","debug","(","\"Shutdown","Auditor","Recovery","for","the","bookie:\"\n","+","autoRecoveryProcess",".","getKey","(",")",".","getBookieId","(",")",")",";","}"],"docstring_tokens":["Will","stops","all","the","auto","recovery","processes","for","the","bookie","cluster,","if","isAutoRecoveryEnabled","is","true"],"prompt_tokens":[]}
{"code_tokens":["private","boolean","makeSpace","(","int","len",")","{","if","(","bytebuff",".","remaining","(",")","<","len",")","{","flush","(",")",";","bytebuff",".","clear","(",")",";","return","bytebuff",".","capacity","(",")",">=","len",";","}","return","true",";"],"docstring_tokens":["make","space","for","len","bytes","to","be","written","to","the","buffer"],"prompt_tokens":[]}
{"code_tokens":["public","void","init","(",")","throws","DiskErrorException,","NoWritableLedgerDirException","{","checkDirs","(",")",";"],"docstring_tokens":["Sweep","through","all","the","directories","to","check","disk","errors","or","disk","full"],"prompt_tokens":[]}
{"code_tokens":["public","ClientConfiguration","setExplictLacInterval","(","int","interval",")","{","setProperty","(","EXPLICIT_LAC_INTERVAL,","interval",")",";","return","this",";"],"docstring_tokens":["Set","the","interval","to","check","the","need","for","sending","an","explicit","LAC"],"prompt_tokens":[]}
{"code_tokens":["public","Class<?","extends","EnsemblePlacementPolicy>","getEnsemblePlacementPolicy","(",")","throws","ConfigurationException","{","return","ReflectionUtils",".","getClass","(","this,","ENSEMBLE_PLACEMENT_POLICY,\n","RackawareEnsemblePlacementPolicy",".","class,\n","EnsemblePlacementPolicy",".","class,\n","DEFAULT_LOADER",")",";"],"docstring_tokens":["Get","Ensemble","Placement","Policy","Class"],"prompt_tokens":[]}
{"code_tokens":["public","ClientConfiguration","setTLSKeyStoreType","(","String","arg",")","{","setProperty","(","TLS_KEYSTORE_TYPE,","arg",")",";","return","this",";"],"docstring_tokens":["Set","the","keystore","type","for","client"],"prompt_tokens":[]}
{"code_tokens":["public","ClientConfiguration","setTLSKeyStore","(","String","arg",")","{","setProperty","(","TLS_KEYSTORE,","arg",")",";","return","this",";"],"docstring_tokens":["Set","the","keystore","path","for","the","client"],"prompt_tokens":[]}
{"code_tokens":["public","ClientConfiguration","setTLSKeyStorePasswordPath","(","String","arg",")","{","setProperty","(","TLS_KEYSTORE_PASSWORD_PATH,","arg",")",";","return","this",";"],"docstring_tokens":["Set","the","path","to","file","containing","keystore","password,","if","the","client","keystore","is","password","protected"],"prompt_tokens":[]}
{"code_tokens":["public","ClientConfiguration","setTLSTrustStoreType","(","String","arg",")","{","setProperty","(","TLS_TRUSTSTORE_TYPE,","arg",")",";","return","this",";"],"docstring_tokens":["Set","the","truststore","type","for","client"],"prompt_tokens":[]}
{"code_tokens":["public","ClientConfiguration","setTLSTrustStore","(","String","arg",")","{","setProperty","(","TLS_TRUSTSTORE,","arg",")",";","return","this",";"],"docstring_tokens":["Set","the","truststore","path","for","the","client"],"prompt_tokens":[]}
{"code_tokens":["public","ClientConfiguration","setTLSTrustStorePasswordPath","(","String","arg",")","{","setProperty","(","TLS_TRUSTSTORE_PASSWORD_PATH,","arg",")",";","return","this",";"],"docstring_tokens":["Set","the","path","to","file","containing","truststore","password,","if","the","client","truststore","is","password","protected"],"prompt_tokens":[]}
{"code_tokens":["public","CompletableFuture<DLSN>","writeControlRecord","(","final","LogRecord","record",")","{","record",".","setControl","(",")",";","return","write","(","record",")",";"],"docstring_tokens":["Write","a","log","record","as","control","record"],"prompt_tokens":[]}
{"code_tokens":["@Override\n","public","CompletableFuture<DLSN>","write","(","final","LogRecord","record",")","{","final","Stopwatch","stopwatch","=","Stopwatch",".","createStarted","(",")",";","return","FutureUtils",".","stats","(","asyncWrite","(","record,","true",")",",\n","writeOpStatsLogger,\n","stopwatch",")",";"],"docstring_tokens":["Write","a","log","record","to","the","stream"],"prompt_tokens":[]}
{"code_tokens":["@Override\n","public","String","getStreamName","(",")","{","return","bkDistributedLogManager",".","getStreamName","(",")",";"],"docstring_tokens":["TEMP","HACK","Get","the","name","of","the","stream","this","writer","writes","data","to"],"prompt_tokens":[]}
{"code_tokens":["public","static","void","close","(","@Nullable","AsyncCloseable","closeable",")","throws","IOException","{","if","(","null","==","closeable",")","{","return",";","}","Utils",".","ioResult","(","closeable",".","asyncClose","(",")",")",";"],"docstring_tokens":["Close","an","async","closeable"],"prompt_tokens":[]}
{"code_tokens":["public","static","CompletableFuture<Void>","closeSequence","(","ExecutorService","executorService,\n","boolean","ignoreCloseError,\n","AsyncCloseable",".",".",".","closeables",")","{","List<AsyncCloseable>","closeableList","=","Lists",".","newArrayListWithExpectedSize","(","closeables",".","length",")",";","for","(","AsyncCloseable","closeable",":","closeables",")","{","if","(","null","==","closeable",")","{","closeableList",".","add","(","AsyncCloseable",".","NULL",")",";","}","else","{","closeableList",".","add","(","closeable",")",";","}","}","return","FutureUtils",".","processList","(","closeableList,\n","ignoreCloseError","?","AsyncCloseable",".","CLOSE_FUNC_IGNORE_ERRORS",":","AsyncCloseable",".","CLOSE_FUNC,\n","executorService\n",")",".","thenApply","(","VoidFunctions",".","LIST_TO_VOID_FUNC",")",";"],"docstring_tokens":["Close","the","closeables","in","sequence","and","ignore","errors","during","closing"],"prompt_tokens":[]}
{"code_tokens":["public","static","Long","nextLogSegmentSequenceNumber","(","List<LogSegmentMetadata>","segmentListDesc",")","{","int","lastAssignedLogSegmentIdx","=","-1",";","Long","lastAssignedLogSegmentSeqNo","=","null",";","Long","nextLogSegmentSeqNo","=","null",";","\n\n","for","(","int","i","=","0",";","i","<","segmentListDesc",".","size","(",")",";","i++",")","{","LogSegmentMetadata","metadata","=","segmentListDesc",".","get","(","i",")",";","if","(","LogSegmentMetadata",".","supportsLogSegmentSequenceNo","(","metadata",".","getVersion","(",")",")",")","{","lastAssignedLogSegmentSeqNo","=","metadata",".","getLogSegmentSequenceNumber","(",")",";","lastAssignedLogSegmentIdx","=","i",";","break",";","}","}","\n\n","if","(","null","!=","lastAssignedLogSegmentSeqNo",")","{","//","latest","log","segment","is","assigned","with","a","sequence","number,","start","with","next","sequence","number\n","nextLogSegmentSeqNo","=","lastAssignedLogSegmentSeqNo","+","lastAssignedLogSegmentIdx","+","1",";","}","return","nextLogSegmentSeqNo",";"],"docstring_tokens":["Assign","next","log","segment","sequence","number","based","on","a","decreasing","list","of","log","segments"],"prompt_tokens":[]}
{"code_tokens":["public","static","long","computeStartSequenceId","(","List<LogSegmentMetadata>","logSegmentDescList,\n","LogSegmentMetadata","segment",")","throws","UnexpectedException","{","long","startSequenceId","=","0L",";","for","(","LogSegmentMetadata","metadata",":","logSegmentDescList",")","{","if","(","metadata",".","getLogSegmentSequenceNumber","(",")",">=","segment",".","getLogSegmentSequenceNumber","(",")",")","{","continue",";","}","else","if","(","metadata",".","getLogSegmentSequenceNumber","(",")","<","(","segment",".","getLogSegmentSequenceNumber","(",")","-","1",")",")","{","break",";","}","if","(","metadata",".","isInProgress","(",")",")","{","throw","new","UnexpectedException","(","\"Should","not","complete","log","segment","\"","+","segment",".","getLogSegmentSequenceNumber","(",")","+","\"","since","it's","previous","log","segment","is","still","inprogress",":","\"","+","logSegmentDescList",")",";","}","if","(","metadata",".","supportsSequenceId","(",")",")","{","startSequenceId","=","metadata",".","getStartSequenceId","(",")","+","metadata",".","getRecordCount","(",")",";","}","}","return","startSequenceId",";"],"docstring_tokens":["Compute","the","start","sequence","id","for","segment,","based","on","previous","segment","list","segmentListDesc"],"prompt_tokens":[]}
{"code_tokens":["public","static","long","deserializeTransactionId","(","byte[]","data",")","{","String","seqNoStr","=","new","String","(","data,","UTF_8",")",";","return","Long",".","parseLong","(","seqNoStr",")",";"],"docstring_tokens":["Deserialize","log","record","transaction","id","for","bytes","data"],"prompt_tokens":[]}
{"code_tokens":["public","static","byte[]","serializeTransactionId","(","long","transactionId",")","{","return","Long",".","toString","(","transactionId",")",".","getBytes","(","UTF_8",")",";"],"docstring_tokens":["Serilize","log","record","transaction","id","transactionId","into","bytes"],"prompt_tokens":[]}
{"code_tokens":["public","static","byte[]","logSegmentId2Bytes","(","long","logSegmentId",")","{","return","Long",".","toString","(","logSegmentId",")",".","getBytes","(","UTF_8",")",";"],"docstring_tokens":["Serialize","log","segment","id","into","bytes"],"prompt_tokens":[]}
{"code_tokens":["public","static","long","bytes2LogSegmentId","(","byte[]","data",")","{","return","Long",".","parseLong","(","new","String","(","data,","UTF_8",")",")",";"],"docstring_tokens":["Deserialize","bytes","into","log","segment","id"],"prompt_tokens":[]}
{"code_tokens":["public","static","String","validateAndNormalizeName","(","String","logName",")","throws","InvalidStreamNameException","{","if","(","isReservedStreamName","(","logName",")",")","{","throw","new","InvalidStreamNameException","(","logName,","\"Log","Name","is","reserved\"",")",";","}","\n\n","if","(","logName",".","charAt","(","0",")","==","'/'",")","{","validatePathName","(","logName",")",";","return","logName",".","substring","(","1",")",";","}","else","{","validatePathName","(","\"/\"","+","logName",")",";","return","logName",";","}"],"docstring_tokens":["Validate","the","log","name"],"prompt_tokens":[]}
{"code_tokens":["public","StorageContainerStoreBuilder","withStatsLogger","(","StatsLogger","statsLogger",")","{","if","(","null","==","statsLogger",")","{","return","this",";","}","this",".","statsLogger","=","statsLogger",";","return","this",";"],"docstring_tokens":["Build","the","range","store","with","the","provided","StatsLogger"],"prompt_tokens":[]}
{"code_tokens":["public","StorageContainerStoreBuilder","withStorageConfiguration","(","StorageConfiguration","storeConf",")","{","this",".","storeConf","=","storeConf",";","return","this",";"],"docstring_tokens":["Build","the","range","store","with","provided","StorageConfiguration"],"prompt_tokens":[]}
{"code_tokens":["public","StorageContainerStoreBuilder","withStorageContainerManagerFactory","(","StorageContainerManagerFactory","scmFactory",")","{","this",".","scmFactory","=","scmFactory",";","return","this",";"],"docstring_tokens":["Build","the","range","store","with","provided","StorageContainerManagerFactory"],"prompt_tokens":[]}
{"code_tokens":["public","StorageContainerStoreBuilder","withStorageResources","(","StorageResources","resources",")","{","this",".","storeResources","=","resources",";","return","this",";"],"docstring_tokens":["Build","the","range","store","with","provided","StorageResources"],"prompt_tokens":[]}
{"code_tokens":["public","StorageContainerStoreBuilder","withDefaultBackendUri","(","URI","uri",")","{","this",".","defaultBackendUri","=","uri",";","return","this",";"],"docstring_tokens":["Backend","uri","for","storing","table","ranges"],"prompt_tokens":[]}
{"code_tokens":["public","static","long","toLong","(","byte[]","memory,","int","index",")","{","return","(","(","long",")","memory[index]","&","0xff",")","<<","56\n","|","(","(","long",")","memory[index","+","1]","&","0xff",")","<<","48\n","|","(","(","long",")","memory[index","+","2]","&","0xff",")","<<","40\n","|","(","(","long",")","memory[index","+","3]","&","0xff",")","<<","32\n","|","(","(","long",")","memory[index","+","4]","&","0xff",")","<<","24\n","|","(","(","long",")","memory[index","+","5]","&","0xff",")","<<","16\n","|","(","(","long",")","memory[index","+","6]","&","0xff",")","<<","8\n","|","(","long",")","memory[index","+","7]","&","0xff",";"],"docstring_tokens":["Get","a","long","number","from","a","bytes","array","starting","from","the","provided","index"],"prompt_tokens":[]}
{"code_tokens":["public","static","byte[]","toBytes","(","long","value",")","{","byte[]","memory","=","new","byte[8]",";","toBytes","(","value,","memory,","0",")",";","return","memory",";"],"docstring_tokens":["Convert","a","long","number","to","a","bytes","array"],"prompt_tokens":[]}
{"code_tokens":["private","void","notifyEvent","(","WatchedEvent","event",")","{","//","notify","child","watchers\n","for","(","Watcher","w",":","childWatchers",")","{","try","{","w",".","process","(","event",")",";","}","catch","(","Exception","t",")","{","LOG",".","warn","(","\"Encountered","unexpected","exception","from","watcher","{","}",":","\",","w,","t",")",";","}","}"],"docstring_tokens":["Notify","Event","to","child","watchers"],"prompt_tokens":[]}
{"code_tokens":["private","static","Closeable","tryAcquireFileLock","(","int","cpu",")","throws","IOException","{","String","lockPath","=","LOCK_FILE_PREFIX","+","cpu",";","\n\n","RandomAccessFile","file","=","null",";","FileChannel","channel","=","null",";","FileLock","lock","=","null",";","\n\n","try","{","file","=","new","RandomAccessFile","(","new","File","(","lockPath",")",",","\"rw\"",")",";","channel","=","file",".","getChannel","(",")",";","lock","=","channel",".","tryLock","(",")",";","\n\n","if","(","lock","==","null",")","{","return","null",";","}","else","{","final","FileLock","finalLock","=","lock",";","final","FileChannel","finalChannel","=","channel",";","final","RandomAccessFile","finalFile","=","file",";","return","(",")","->","{","//","Closable","object\n","finalLock",".","close","(",")",";","finalChannel",".","close","(",")",";","finalFile",".","close","(",")",";","}",";","}","}","finally","{","if","(","lock","==","null",")","{","if","(","channel","!=","null",")","{","channel",".","close","(",")",";","}","\n\n","if","(","file","!=","null",")","{","file",".","close","(",")",";","}","}","}"],"docstring_tokens":["Try","to","acquire","a","lock","on","a","particular","cpu"],"prompt_tokens":[]}
{"code_tokens":["public","static","void","readLedgerIndexEntries","(","long","ledgerId,","ServerConfiguration","serverConf,\n","LedgerLoggerProcessor","processor",")","throws","IOException","{","\n\n","checkNotNull","(","serverConf,","\"ServerConfiguration","can't","be","null\"",")",";","checkNotNull","(","processor,","\"LedgerLoggger","info","processor","can't","null\"",")",";","\n\n","LedgerDirsManager","ledgerDirsManager","=","new","LedgerDirsManager","(","serverConf,","serverConf",".","getLedgerDirs","(",")",",\n","new","DiskChecker","(","serverConf",".","getDiskUsageThreshold","(",")",",","serverConf",".","getDiskUsageWarnThreshold","(",")",")",")",";","List<File>","ledgerDirs","=","ledgerDirsManager",".","getAllLedgerDirs","(",")",";","\n\n","int","dirIndex","=","MathUtils",".","signSafeMod","(","ledgerId,","ledgerDirs",".","size","(",")",")",";","String","ledgerBasePath","=","ledgerDirs",".","get","(","dirIndex",")",".","toString","(",")",";","\n\n","EntryLocationIndex","entryLocationIndex","=","new","EntryLocationIndex","(","serverConf,\n","(","basePath,","subPath,","dbConfigType,","conf1",")","->\n","new","KeyValueStorageRocksDB","(","basePath,","subPath,","DbConfigType",".","Small,","conf1,","true",")",",\n","ledgerBasePath,","NullStatsLogger",".","INSTANCE",")",";","try","{","long","lastEntryId","=","entryLocationIndex",".","getLastEntryInLedger","(","ledgerId",")",";","for","(","long","currentEntry","=","0",";","currentEntry","<=","lastEntryId",";","currentEntry++",")","{","long","offset","=","entryLocationIndex",".","getLocation","(","ledgerId,","currentEntry",")",";","if","(","offset","<=","0",")","{","//","entry","not","found","in","this","bookie\n","continue",";","}","long","entryLogId","=","offset",">>","32L",";","long","position","=","offset","&","0xffffffffL",";","processor",".","process","(","currentEntry,","entryLogId,","position",")",";","}","}","finally","{","entryLocationIndex",".","close","(",")",";","}"],"docstring_tokens":["Reads","ledger","index","entries","to","get","list","of","entry-logger","that","contains","given","ledgerId"],"prompt_tokens":[]}
{"code_tokens":["private","void","completeExceptionally","(","Throwable","throwable,","boolean","isBackground",")","{","lastExceptionUpdater",".","compareAndSet","(","this,","null,","throwable",")",";","if","(","isBackground",")","{","notifyReaders","(",")",";","}"],"docstring_tokens":["Set","the","reader","into","error","state","with","return","code","rc"],"prompt_tokens":[]}
{"code_tokens":["@Override\n","public","void","safeRun","(",")","{","long","scheduleCountLocal","=","scheduleCountUpdater",".","get","(","this",")",";","while","(","true",")","{","PendingReadRequest","nextRequest","=","null",";","synchronized","(","readQueue",")","{","nextRequest","=","readQueue",".","peek","(",")",";","}","\n\n","//","if","read","queue","is","empty,","nothing","to","read,","return\n","if","(","null","==","nextRequest",")","{","scheduleCountUpdater",".","set","(","this,","0L",")",";","return",";","}","\n\n","//","if","the","oldest","pending","promise","is","interrupted","then","we","must\n","//","mark","the","reader","in","error","and","abort","all","pending","reads","since\n","//","we","don't","know","the","last","consumed","read\n","if","(","null","==","lastExceptionUpdater",".","get","(","this",")",")","{","if","(","nextRequest",".","getPromise","(",")",".","isCancelled","(",")",")","{","completeExceptionally","(","new","DLInterruptedException","(","\"Interrupted","on","reading","log","segment","\"\n","+","getSegment","(",")","+","\"",":","\"","+","nextRequest",".","getPromise","(",")",".","isCancelled","(",")",")",",","false",")",";","}","}","\n\n","//","if","the","reader","is","in","error","state,","stop","read\n","if","(","checkClosedOrInError","(",")",")","{","return",";","}","\n\n","//","read","entries","from","readahead","cache","to","satisfy","next","read","request\n","readEntriesFromReadAheadCache","(","nextRequest",")",";","\n\n","//","check","if","we","can","satisfy","the","read","request\n","if","(","nextRequest",".","hasReadEntries","(",")",")","{","PendingReadRequest","request",";","synchronized","(","readQueue",")","{","request","=","readQueue",".","poll","(",")",";","}","if","(","null","!=","request","&&","nextRequest","==","request",")","{","request",".","complete","(",")",";","}","else","{","DLIllegalStateException","ise","=","new","DLIllegalStateException","(","\"Unexpected","condition","at","reading","from","\"\n","+","getSegment","(",")",")",";","nextRequest",".","completeExceptionally","(","ise",")",";","if","(","null","!=","request",")","{","request",".","completeExceptionally","(","ise",")",";","}","completeExceptionally","(","ise,","false",")",";","}","}","else","{","if","(","0","==","scheduleCountLocal",")","{","return",";","}","scheduleCountLocal","=","scheduleCountUpdater",".","decrementAndGet","(","this",")",";","}","}"],"docstring_tokens":["The","core","function","to","propagate","fetched","entries","to","read","requests"],"prompt_tokens":[]}
{"code_tokens":["public","static","Builder","builder","(",")","{","return","new","Builder","(",")",";"],"docstring_tokens":["Create","a","builder","to","build","a","config","def"],"prompt_tokens":[]}
{"code_tokens":["@SuppressWarnings","(","\"unchecked\"",")","public","static","ConfigDef","of","(","Class","configClass",")","{","ConfigDef",".","Builder","builder","=","ConfigDef",".","builder","(",")",";","\n\n","Field[]","fields","=","configClass",".","getDeclaredFields","(",")",";","for","(","Field","field",":","fields",")","{","if","(","Modifier",".","isStatic","(","field",".","getModifiers","(",")",")","&&","field",".","getType","(",")",".","equals","(","ConfigKey",".","class",")",")","{","field",".","setAccessible","(","true",")",";","try","{","builder",".","withConfigKey","(","(","ConfigKey",")","field",".","get","(","null",")",")",";","}","catch","(","IllegalAccessException","e",")","{","log",".","error","(","\"Illegal","to","access","{","}","#","{","}","\",","configClass",".","getSimpleName","(",")",",","field",".","getName","(",")",",","e",")",";","}","}","}","\n\n","return","builder",".","build","(",")",";"],"docstring_tokens":["Build","the","config","definitation","of","a","config","class"],"prompt_tokens":[]}
{"code_tokens":["public","static","CompletableFuture<Void>","closeLedgers","(","LedgerHandle",".",".",".","lhs",")","{","List<CompletableFuture<Void>>","closeResults","=","Lists",".","newArrayListWithExpectedSize","(","lhs",".","length",")",";","for","(","LedgerHandle","lh",":","lhs",")","{","closeResults",".","add","(","closeLedger","(","lh",")",")",";","}","return","FutureUtils",".","collect","(","closeResults",")",".","thenApply","(","VoidFunctions",".","LIST_TO_VOID_FUNC",")",";"],"docstring_tokens":["Close","a","list","of","ledgers","lhs"],"prompt_tokens":[]}
{"code_tokens":["private","MetadataBookieDriver","instantiateMetadataDriver","(","ServerConfiguration","conf",")","throws","BookieException","{","try","{","String","metadataServiceUriStr","=","conf",".","getMetadataServiceUri","(",")",";","if","(","null","==","metadataServiceUriStr",")","{","return","null",";","}","\n\n","MetadataBookieDriver","driver","=","MetadataDrivers",".","getBookieDriver","(","URI",".","create","(","metadataServiceUriStr",")",")",";","driver",".","initialize","(","conf,\n","(",")","->","{","stateManager",".","forceToUnregistered","(",")",";","//","schedule","a","re-register","operation\n","stateManager",".","registerBookie","(","false",")",";","}",",\n","statsLogger",")",";","return","driver",";","}","catch","(","MetadataException","me",")","{","throw","new","MetadataStoreException","(","\"Failed","to","initialize","metadata","bookie","driver\",","me",")",";","}","catch","(","ConfigurationException","e",")","{","throw","new","BookieIllegalOpException","(","e",")",";","}"],"docstring_tokens":["Instantiate","the","metadata","driver","for","the","Bookie"],"prompt_tokens":[]}
{"code_tokens":["public","boolean","isAvailableForHighPriorityWrites","(",")","{","return","stateManager",".","isAvailableForHighPriorityWrites","(",")",";"],"docstring_tokens":["Check","whether","Bookie","is","available","for","high","priority","writes"],"prompt_tokens":[]}
{"code_tokens":["@VisibleForTesting\n","LedgerDescriptor","getLedgerForEntry","(","ByteBuf","entry,","final","byte[]","masterKey",")","throws","IOException,","BookieException","{","final","long","ledgerId","=","entry",".","getLong","(","entry",".","readerIndex","(",")",")",";","\n\n","return","handles",".","getHandle","(","ledgerId,","masterKey",")",";"],"docstring_tokens":["Retrieve","the","ledger","descriptor","for","the","ledger","which","entry","should","be","added","to"],"prompt_tokens":[]}
{"code_tokens":["private","void","addEntryInternal","(","LedgerDescriptor","handle,","ByteBuf","entry,\n","boolean","ackBeforeSync,","WriteCallback","cb,","Object","ctx,","byte[]","masterKey",")","throws","IOException,","BookieException,","InterruptedException","{","long","ledgerId","=","handle",".","getLedgerId","(",")",";","long","entryId","=","handle",".","addEntry","(","entry",")",";","\n\n","bookieStats",".","getWriteBytes","(",")",".","add","(","entry",".","readableBytes","(",")",")",";","\n\n","//","journal","`addEntry`","should","happen","after","the","entry","is","added","to","ledger","storage",".","//","otherwise","the","journal","entry","can","potentially","be","rolled","before","the","ledger","is","created","in","ledger","storage",".","if","(","masterKeyCache",".","get","(","ledgerId",")","==","null",")","{","//","Force","the","load","into","masterKey","cache\n","byte[]","oldValue","=","masterKeyCache",".","putIfAbsent","(","ledgerId,","masterKey",")",";","if","(","oldValue","==","null",")","{","//","new","handle,","we","should","add","the","key","to","journal","ensure","we","can","rebuild\n","ByteBuffer","bb","=","ByteBuffer",".","allocate","(","8","+","8","+","4","+","masterKey",".","length",")",";","bb",".","putLong","(","ledgerId",")",";","bb",".","putLong","(","METAENTRY_ID_LEDGER_KEY",")",";","bb",".","putInt","(","masterKey",".","length",")",";","bb",".","put","(","masterKey",")",";","bb",".","flip","(",")",";","\n\n","getJournal","(","ledgerId",")",".","logAddEntry","(","bb,","false","/*","ackBeforeSync","*/,","new","NopWriteCallback","(",")",",","null",")",";","}","}","\n\n","if","(","!writeDataToJournal",")","{","cb",".","writeComplete","(","0,","ledgerId,","entryId,","null,","ctx",")",";","return",";","}","\n\n","if","(","LOG",".","isTraceEnabled","(",")",")","{","LOG",".","trace","(","\"Adding","{","}","@","{","}","\",","entryId,","ledgerId",")",";","}","getJournal","(","ledgerId",")",".","logAddEntry","(","entry,","ackBeforeSync,","cb,","ctx",")",";"],"docstring_tokens":["Add","an","entry","to","a","ledger","as","specified","by","handle"],"prompt_tokens":[]}
{"code_tokens":["public","void","addEntry","(","ByteBuf","entry,","boolean","ackBeforeSync,","WriteCallback","cb,","Object","ctx,","byte[]","masterKey",")","throws","IOException,","BookieException,","InterruptedException","{","long","requestNanos","=","MathUtils",".","nowInNano","(",")",";","boolean","success","=","false",";","int","entrySize","=","0",";","try","{","LedgerDescriptor","handle","=","getLedgerForEntry","(","entry,","masterKey",")",";","synchronized","(","handle",")","{","if","(","handle",".","isFenced","(",")",")","{","throw","BookieException\n",".","create","(","BookieException",".","Code",".","LedgerFencedException",")",";","}","entrySize","=","entry",".","readableBytes","(",")",";","addEntryInternal","(","handle,","entry,","ackBeforeSync,","cb,","ctx,","masterKey",")",";","}","success","=","true",";","}","catch","(","NoWritableLedgerDirException","e",")","{","stateManager",".","transitionToReadOnlyMode","(",")",";","throw","new","IOException","(","e",")",";","}","finally","{","long","elapsedNanos","=","MathUtils",".","elapsedNanos","(","requestNanos",")",";","if","(","success",")","{","bookieStats",".","getAddEntryStats","(",")",".","registerSuccessfulEvent","(","elapsedNanos,","TimeUnit",".","NANOSECONDS",")",";","bookieStats",".","getAddBytesStats","(",")",".","registerSuccessfulValue","(","entrySize",")",";","}","else","{","bookieStats",".","getAddEntryStats","(",")",".","registerFailedEvent","(","elapsedNanos,","TimeUnit",".","NANOSECONDS",")",";","bookieStats",".","getAddBytesStats","(",")",".","registerFailedValue","(","entrySize",")",";","}","\n\n","entry",".","release","(",")",";","}"],"docstring_tokens":["Add","entry","to","a","ledger"],"prompt_tokens":[]}
{"code_tokens":["public","static","boolean","format","(","ServerConfiguration","conf,\n","boolean","isInteractive,","boolean","force",")","{","for","(","File","journalDir",":","conf",".","getJournalDirs","(",")",")","{","String[]","journalDirFiles","=\n","journalDir",".","exists","(",")","&&","journalDir",".","isDirectory","(",")","?","journalDir",".","list","(",")",":","null",";","if","(","journalDirFiles","!=","null","&&","journalDirFiles",".","length","!=","0",")","{","try","{","boolean","confirm","=","false",";","if","(","!isInteractive",")","{","//","If","non","interactive","and","force","is","set,","then","delete","old\n","//","data",".","confirm","=","force",";","}","else","{","confirm","=","IOUtils\n",".","confirmPrompt","(","\"Are","you","sure","to","format","Bookie","data",".",".","?\"",")",";","}","\n\n","if","(","!confirm",")","{","LOG",".","error","(","\"Bookie","format","aborted!!\"",")",";","return","false",";","}","}","catch","(","IOException","e",")","{","LOG",".","error","(","\"Error","during","bookie","format\",","e",")",";","return","false",";","}","}","if","(","!cleanDir","(","journalDir",")",")","{","LOG",".","error","(","\"Formatting","journal","directory","failed\"",")",";","return","false",";","}","}","\n\n","File[]","ledgerDirs","=","conf",".","getLedgerDirs","(",")",";","for","(","File","dir",":","ledgerDirs",")","{","if","(","!cleanDir","(","dir",")",")","{","LOG",".","error","(","\"Formatting","ledger","directory","\"","+","dir","+","\"","failed\"",")",";","return","false",";","}","}","\n\n","//","Clean","up","index","directories","if","they","are","separate","from","the","ledger","dirs\n","File[]","indexDirs","=","conf",".","getIndexDirs","(",")",";","if","(","null","!=","indexDirs",")","{","for","(","File","dir",":","indexDirs",")","{","if","(","!cleanDir","(","dir",")",")","{","LOG",".","error","(","\"Formatting","index","directory","\"","+","dir","+","\"","failed\"",")",";","return","false",";","}","}","}","\n\n","LOG",".","info","(","\"Bookie","format","completed","successfully\"",")",";","return","true",";"],"docstring_tokens":["Format","the","bookie","server","data"],"prompt_tokens":[]}
{"code_tokens":["private","void","handleSessionExpired","(","final","int","lockEpoch",")","{","executeLockAction","(","lockEpoch,","new","LockAction","(",")","{","@Override\n","public","void","execute","(",")","{","if","(","lockState",".","inState","(","State",".","CLOSED",")","||","lockState",".","inState","(","State",".","CLOSING",")",")","{","//","Already","fully","closed,","no","need","to","process","expire",".","return",";","}","\n\n","boolean","shouldNotifyLockListener","=","lockState",".","inState","(","State",".","CLAIMED",")",";","\n\n","lockState",".","transition","(","State",".","EXPIRED",")",";","\n\n","//","remove","the","watcher\n","if","(","null","!=","watcher",")","{","zkClient",".","unregister","(","watcher",")",";","}","\n\n","//","increment","epoch","to","avoid","any","ongoing","locking","action\n","epochUpdater",".","incrementAndGet","(","ZKSessionLock",".","this",")",";","\n\n","//","if","session","expired,","just","notify","the","waiter",".","as","the","lock","acquire","doesn't","succeed",".","//","we","don't","even","need","to","clean","up","the","lock","as","the","znode","will","disappear","after","session","expired\n","acquireFuture",".","completeExceptionally","(","new","LockSessionExpiredException","(","lockPath,","lockId,","lockState",".","getState","(",")",")",")",";","\n\n","//","session","expired,","ephemeral","node","is","gone",".","currentNode","=","null",";","currentId","=","null",";","\n\n","if","(","shouldNotifyLockListener",")","{","//","if","session","expired","after","claimed,","we","need","to","notify","the","caller","to","re-lock\n","if","(","null","!=","lockListener",")","{","lockListener",".","onExpired","(",")",";","}","}","}","\n\n","@Override\n","public","String","getActionName","(",")","{","return","\"handleSessionExpired","(","epoch=\"","+","lockEpoch","+","\"",")","\"",";","}","}",")",";"],"docstring_tokens":["Handle","session","expired","for","lock","watcher","at","epoch","lockEpoch"],"prompt_tokens":[]}
{"code_tokens":["public","static","File","createTempDir","(","String","prefix,","String","suffix",")","throws","IOException","{","return","createTempDir","(","prefix,","suffix,","null",")",";"],"docstring_tokens":["Create","a","temp","directory","with","given","prefix","and","suffix"],"prompt_tokens":[]}
{"code_tokens":["public","Set<Integer>","getCpusOnSameCore","(","int","targetCpu",")","{","Set<Integer>","result","=","new","TreeSet<>","(",")",";","int","targetCore","=","cpus",".","get","(","targetCpu",")",";","\n\n","cpus",".","forEach","(","(","cpu,","core",")","->","{","if","(","core","==","targetCore",")","{","result",".","add","(","cpu",")",";","}","}",")",";","\n\n","return","result",";"],"docstring_tokens":["Given","one","cpu","id,","return","all","CPUs","that","are","sharing","the","same","core"],"prompt_tokens":[]}
{"code_tokens":["public","static","LogMetadataForReader","of","(","URI","uri,","String","logName,","String","logIdentifier",")","{","return","new","LogMetadataForReader","(","uri,","logName,","logIdentifier",")",";"],"docstring_tokens":["Create","a","metadata","representation","of","a","log","for","reader"],"prompt_tokens":[]}
{"code_tokens":["public","String","getReadLockPath","(","Optional<String>","subscriberId",")","{","if","(","subscriberId",".","isPresent","(",")",")","{","return","logRootPath","+","SUBSCRIBERS_PATH","+","\"/\"","+","subscriberId",".","get","(",")","+","READ_LOCK_PATH",";","}","else","{","return","logRootPath","+","READ_LOCK_PATH",";","}"],"docstring_tokens":["Get","the","readlock","path","for","the","log","or","a","subscriber","of","the","log"],"prompt_tokens":[]}
{"code_tokens":["protected","BookieNode","selectRandomFromRack","(","String","netPath,","Set<Node>","excludeBookies,","Predicate<BookieNode>","predicate,\n","Ensemble<BookieNode>","ensemble",")","throws","BKNotEnoughBookiesException","{","WeightedRandomSelection<BookieNode>","wRSelection","=","null",";","List<Node>","leaves","=","new","ArrayList<Node>","(","topology",".","getLeaves","(","netPath",")",")",";","if","(","!this",".","isWeighted",")","{","Collections",".","shuffle","(","leaves",")",";","}","else","{","if","(","CollectionUtils",".","subtract","(","leaves,","excludeBookies",")",".","size","(",")","<","1",")","{","throw","new","BKNotEnoughBookiesException","(",")",";","}","wRSelection","=","prepareForWeightedSelection","(","leaves",")",";","if","(","wRSelection","==","null",")","{","throw","new","BKNotEnoughBookiesException","(",")",";","}","}","\n\n","Iterator<Node>","it","=","leaves",".","iterator","(",")",";","Set<Node>","bookiesSeenSoFar","=","new","HashSet<Node>","(",")",";","while","(","true",")","{","Node","n",";","if","(","isWeighted",")","{","if","(","bookiesSeenSoFar",".","size","(",")","==","leaves",".","size","(",")",")","{","//","Don't","loop","infinitely",".","break",";","}","n","=","wRSelection",".","getNextRandom","(",")",";","bookiesSeenSoFar",".","add","(","n",")",";","}","else","{","if","(","it",".","hasNext","(",")",")","{","n","=","it",".","next","(",")",";","}","else","{","break",";","}","}","if","(","excludeBookies",".","contains","(","n",")",")","{","continue",";","}","if","(","!","(","n","instanceof","BookieNode",")","||","!predicate",".","apply","(","(","BookieNode",")","n,","ensemble",")",")","{","continue",";","}","BookieNode","bn","=","(","BookieNode",")","n",";","//","got","a","good","candidate\n","if","(","ensemble",".","addNode","(","bn",")",")","{","//","add","the","candidate","to","exclude","set\n","excludeBookies",".","add","(","bn",")",";","}","return","bn",";","}","throw","new","BKNotEnoughBookiesException","(",")",";"],"docstring_tokens":["Choose","random","node","under","a","given","network","path"],"prompt_tokens":[]}
{"code_tokens":["public","static","RangeValidator","atLeast","(","Number","min",")","{","return","new","RangeValidator","(","min,","null",")",";"],"docstring_tokens":["A","numeric","range","that","checks","the","lower","bound"],"prompt_tokens":[]}
{"code_tokens":["public","static","RangeValidator","atMost","(","Number","max",")","{","return","new","RangeValidator","(","null,","max",")",";"],"docstring_tokens":["A","numeric","range","that","checks","the","upper","bound"],"prompt_tokens":[]}
{"code_tokens":["public","static","RangeValidator","between","(","Number","min,","Number","max",")","{","return","new","RangeValidator","(","min,","max",")",";"],"docstring_tokens":["A","numeric","range","that","checks","both","lower","and","upper","bounds"],"prompt_tokens":[]}
{"code_tokens":["@Override\n","public","long","getCount","(",")","{","long","sum","=","0",";","for","(","AtomicLong","c",":","counter",")","{","sum","+=","c",".","get","(",")",";","}","return","sum",";"],"docstring_tokens":["Returns","the","all-time","count","of","events","this","timer","has","seen"],"prompt_tokens":[]}
{"code_tokens":["@Override\n","public","Snapshot","getSnapshot","(",")","{","long","sum","=","0",";","long","cnt","=","0",";","long","min","=","0",";","long","max","=","0",";","\n\n","//","get","time","and","trigger","housekeeping\n","int","now","=","getNow","(","0",")","-","1",";","//","start","from","last","completed","second\n","int","secFrom","=","now","-","(","timeWindow","-","2",")",";","\n\n","for","(","int","i","=","1",";","i","<","HASH_SIZE",";","i++",")","{","getNow","(","i",")",";","}","\n\n","long[]","buckets","=","(","numBuckets",">","0","?","new","long[numBuckets]",":","null",")",";","for","(","int","i","=","now",";","i",">","secFrom",";","i--",")","{","int","t","=","(","timeWindow","+","i",")","%","timeWindow",";","for","(","int","h","=","0",";","h","<","HASH_SIZE",";","h++",")","{","synchronized","(","locks[h]",")","{","sum","+=","this",".","sum[h][t]",";","cnt","+=","this",".","meter[h][t]",";","if","(","(","this",".","min[h][t]","<","min","&&","this",".","min[h][t]",">","0",")","||","min","==","0",")","{","min","=","this",".","min[h][t]",";","}","if","(","this",".","max[h][t]",">","max",")","{","max","=","this",".","max[h][t]",";","}","}","}","//","no","need","to","synchronize","for","reading","(","buckets","(","int",")","is","written","atomically",")","for","(","int","b","=","0",";","b","<","numBuckets",";","b++",")","{","buckets[b]","+=","this",".","buckets[b][t]",";","}","}","\n\n","return","new","FastSnapshot","(","this,","min,","max,","sum,","cnt,","buckets",")",";"],"docstring_tokens":["Returns","a","snapshot","of","this","timer"],"prompt_tokens":[]}
{"code_tokens":["@Override\n","public","void","update","(","long","duration,","TimeUnit","unit",")","{","update","(","unit",".","toNanos","(","duration",")",")",";"],"docstring_tokens":["Add","an","event","to","this","timer"],"prompt_tokens":[]}
{"code_tokens":["private","SettableFuture<Boolean>","logFenceEntryInJournal","(","Journal","journal",")","{","SettableFuture<Boolean>","result",";","synchronized","(","this",")","{","result","=","logFenceResult","=","SettableFuture",".","create","(",")",";","}","ByteBuf","entry","=","createLedgerFenceEntry","(","ledgerId",")",";","try","{","journal",".","logAddEntry","(","entry,","false","/*","ackBeforeSync","*/,","(","rc,","ledgerId,","entryId,","addr,","ctx",")","->","{","if","(","LOG",".","isDebugEnabled","(",")",")","{","LOG",".","debug","(","\"Record","fenced","state","for","ledger","{","}","in","journal","with","rc","{","}","\",\n","ledgerId,","BKException",".","codeLogger","(","rc",")",")",";","}","if","(","rc","==","0",")","{","fenceEntryPersisted",".","compareAndSet","(","false,","true",")",";","result",".","set","(","true",")",";","}","else","{","result",".","set","(","false",")",";","}","}",",","null",")",";","}","catch","(","InterruptedException","e",")","{","Thread",".","currentThread","(",")",".","interrupt","(",")",";","result",".","setException","(","e",")",";","}","return","result",";"],"docstring_tokens":["Log","the","fence","ledger","entry","in","Journal","so","that","we","can","rebuild","the","state"],"prompt_tokens":[]}
{"code_tokens":["private","Future<?>","waitForBookieInSet","(","BookieId","b,\n","boolean","writable",")","throws","Exception","{","log",".","info","(","\"Wait","for","{","}","to","become","{","}","\",\n","b,","writable","?","\"writable\"",":","\"readonly\"",")",";","\n\n","CompletableFuture<Void>","readOnlyFuture","=","new","CompletableFuture<>","(",")",";","CompletableFuture<Void>","writableFuture","=","new","CompletableFuture<>","(",")",";","\n\n","RegistrationListener","readOnlyListener","=","(","bookies",")","->","{","boolean","contains","=","bookies",".","getValue","(",")",".","contains","(","b",")",";","if","(","(","!writable","&&","contains",")","||","(","writable","&&","!contains",")",")","{","readOnlyFuture",".","complete","(","null",")",";","}","}",";","RegistrationListener","writableListener","=","(","bookies",")","->","{","boolean","contains","=","bookies",".","getValue","(",")",".","contains","(","b",")",";","if","(","(","writable","&&","contains",")","||","(","!writable","&&","!contains",")",")","{","writableFuture",".","complete","(","null",")",";","}","}",";","\n\n","getMetadataClientDriver","(",")",".","getRegistrationClient","(",")",".","watchWritableBookies","(","writableListener",")",";","getMetadataClientDriver","(",")",".","getRegistrationClient","(",")",".","watchReadOnlyBookies","(","readOnlyListener",")",";","\n\n","if","(","writable",")","{","return","writableFuture\n",".","thenCompose","(","ignored","->","getMetadataClientDriver","(",")",".","getRegistrationClient","(",")",".","getReadOnlyBookies","(",")",")",".","thenCompose","(","readonlyBookies","->","{","if","(","readonlyBookies",".","getValue","(",")",".","contains","(","b",")",")","{","//","if","the","bookie","still","shows","up","at","readonly","path,","wait","for","it","to","disappear\n","return","readOnlyFuture",";","}","else","{","return","FutureUtils",".","Void","(",")",";","}","}",")",";","}","else","{","return","readOnlyFuture\n",".","thenCompose","(","ignored","->","getMetadataClientDriver","(",")",".","getRegistrationClient","(",")",".","getWritableBookies","(",")",")",".","thenCompose","(","writableBookies","->","{","if","(","writableBookies",".","getValue","(",")",".","contains","(","b",")",")","{","//","if","the","bookie","still","shows","up","at","writable","path,","wait","for","it","to","disappear\n","return","writableFuture",";","}","else","{","return","FutureUtils",".","Void","(",")",";","}","}",")",";","}"],"docstring_tokens":["Wait","for","bookie","to","appear","in","either","the","writable","set","of","bookies,","or","the","read","only","set","of","bookies"],"prompt_tokens":[]}
{"code_tokens":["protected","void","addCommand","(","Command","command",")","{","commands",".","put","(","command",".","getName","(",")",",","command",")",";"],"docstring_tokens":["Add","a","command","in","this","tool"],"prompt_tokens":[]}
{"code_tokens":["protected","static","void","println","(","String","msg",")","{","System",".","out",".","println","(","msg",")",";"],"docstring_tokens":["Print","a","message","in","this","tool"],"prompt_tokens":[]}
{"code_tokens":["public","StorageContainerChannel","remove","(","long","scId",")","{","return","scChannels",".","remove","(","scId",")",";"],"docstring_tokens":["Remove","the","storage","container","channel","from","the","channels","map"],"prompt_tokens":[]}
{"code_tokens":["@Override\n","public","void","notifyOnError","(","Throwable","cause",")","{","if","(","cause","instanceof","IOException",")","{","setLastException","(","(","IOException",")","cause",")",";","}","else","{","setLastException","(","new","IOException","(","cause",")",")",";","}","scheduleBackgroundRead","(",")",";"],"docstring_tokens":["Triggered","when","the","background","activity","encounters","an","exception"],"prompt_tokens":[]}
{"code_tokens":["@Override\n","public","void","notifyOnOperationComplete","(",")","{","scheduleBackgroundRead","(",")",";"],"docstring_tokens":["Triggered","when","the","background","activity","completes","an","operation"],"prompt_tokens":[]}
{"code_tokens":["public","void","writeToRegistrationManager","(","RegistrationManager","rm,","ServerConfiguration","conf,","Version","version",")","throws","BookieException","{","BookieId","address","=","null",";","try","{","address","=","Bookie",".","getBookieId","(","conf",")",";","}","catch","(","UnknownHostException","e",")","{","throw","new","UnknownBookieIdException","(","e",")",";","}","byte[]","data","=","toString","(",")",".","getBytes","(","UTF_8",")",";","rm",".","writeCookie","(","address,","new","Versioned<>","(","data,","version",")",")",";"],"docstring_tokens":["Writes","cookie","details","to","registration","manager"],"prompt_tokens":[]}
{"code_tokens":["public","void","deleteFromRegistrationManager","(","RegistrationManager","rm,\n","ServerConfiguration","conf,\n","Version","version",")","throws","BookieException","{","BookieId","address","=","null",";","try","{","address","=","Bookie",".","getBookieId","(","conf",")",";","}","catch","(","UnknownHostException","e",")","{","throw","new","UnknownBookieIdException","(","e",")",";","}","deleteFromRegistrationManager","(","rm,","address,","version",")",";"],"docstring_tokens":["Deletes","cookie","from","registration","manager"],"prompt_tokens":[]}
{"code_tokens":["public","void","deleteFromRegistrationManager","(","RegistrationManager","rm,\n","BookieId","address,\n","Version","version",")","throws","BookieException","{","if","(","!","(","version","instanceof","LongVersion",")",")","{","throw","new","IllegalArgumentException","(","\"Invalid","version","type,","expected","ZkVersion","type\"",")",";","}","\n\n","rm",".","removeCookie","(","address,","version",")",";"],"docstring_tokens":["Delete","cookie","from","registration","manager"],"prompt_tokens":[]}
{"code_tokens":["public","static","Versioned<Cookie>","readFromRegistrationManager","(","RegistrationManager","rm,","ServerConfiguration","conf",")","throws","BookieException","{","try","{","return","readFromRegistrationManager","(","rm,","Bookie",".","getBookieId","(","conf",")",")",";","}","catch","(","UnknownHostException","e",")","{","throw","new","UnknownBookieIdException","(","e",")",";","}"],"docstring_tokens":["Read","cookie","from","registration","manager"],"prompt_tokens":[]}
{"code_tokens":["public","static","Versioned<Cookie>","readFromRegistrationManager","(","RegistrationManager","rm,\n","BookieId","address",")","throws","BookieException","{","Versioned<byte[]>","cookieData","=","rm",".","readCookie","(","address",")",";","try","{","try","(","BufferedReader","reader","=","new","BufferedReader","(","new","StringReader","(","new","String","(","cookieData",".","getValue","(",")",",","UTF_8",")",")",")",")","{","Builder","builder","=","parse","(","reader",")",";","Cookie","cookie","=","builder",".","build","(",")",";","return","new","Versioned<Cookie>","(","cookie,","cookieData",".","getVersion","(",")",")",";","}","}","catch","(","IOException","ioe",")","{","throw","new","InvalidCookieException","(","ioe",")",";","}"],"docstring_tokens":["Read","cookie","from","registration","manager","for","a","given","bookie","address"],"prompt_tokens":[]}
{"code_tokens":["public","static","Cookie","readFromDirectory","(","File","directory",")","throws","IOException","{","File","versionFile","=","new","File","(","directory,","BookKeeperConstants",".","VERSION_FILENAME",")",";","try","(","BufferedReader","reader","=","new","BufferedReader","(","new","InputStreamReader","(","new","FileInputStream","(","versionFile",")",",","UTF_8",")",")",")","{","return","parse","(","reader",")",".","build","(",")",";","}"],"docstring_tokens":["Returns","cookie","from","the","given","directory"],"prompt_tokens":[]}
{"code_tokens":["public","static","Builder","newBuilder","(","Cookie","oldCookie",")","{","return","new","Builder","(","oldCookie",".","layoutVersion,","oldCookie",".","bookieId,","oldCookie",".","journalDirs,","oldCookie",".","ledgerDirs,\n","oldCookie",".","instanceId",")",";"],"docstring_tokens":["Returns","Cookie","builder","with","the","copy","of","given","oldCookie"],"prompt_tokens":[]}
{"code_tokens":["public","ByteBufList","computeDigestAndPackageForSending","(","long","entryId,","long","lastAddConfirmed,","long","length,\n","ByteBuf","data",")","{","ByteBuf","headersBuffer",";","if","(","this",".","useV2Protocol",")","{","headersBuffer","=","allocator",".","buffer","(","METADATA_LENGTH","+","macCodeLength",")",";","}","else","{","headersBuffer","=","Unpooled",".","buffer","(","METADATA_LENGTH","+","macCodeLength",")",";","}","headersBuffer",".","writeLong","(","ledgerId",")",";","headersBuffer",".","writeLong","(","entryId",")",";","headersBuffer",".","writeLong","(","lastAddConfirmed",")",";","headersBuffer",".","writeLong","(","length",")",";","\n\n","update","(","headersBuffer",")",";","\n\n","//","don't","unwrap","slices\n","final","ByteBuf","unwrapped","=","data",".","unwrap","(",")","!=","null","&&","data",".","unwrap","(",")","instanceof","CompositeByteBuf\n","?","data",".","unwrap","(",")",":","data",";","ReferenceCountUtil",".","retain","(","unwrapped",")",";","ReferenceCountUtil",".","release","(","data",")",";","\n\n","if","(","unwrapped","instanceof","CompositeByteBuf",")","{","(","(","CompositeByteBuf",")","unwrapped",")",".","forEach","(","this::update",")",";","}","else","{","update","(","unwrapped",")",";","}","populateValueAndReset","(","headersBuffer",")",";","\n\n","return","ByteBufList",".","get","(","headersBuffer,","unwrapped",")",";"],"docstring_tokens":["Computes","the","digest","for","an","entry","and","put","bytes","together","for","sending"],"prompt_tokens":[]}
{"code_tokens":["public","ByteBuf","verifyDigestAndReturnData","(","long","entryId,","ByteBuf","dataReceived",")","throws","BKDigestMatchException","{","verifyDigest","(","entryId,","dataReceived",")",";","dataReceived",".","readerIndex","(","METADATA_LENGTH","+","macCodeLength",")",";","return","dataReceived",";"],"docstring_tokens":["Verify","that","the","digest","matches","and","returns","the","data","in","the","entry"],"prompt_tokens":[]}
{"code_tokens":["public","static","CompletableFuture<LogRecordWithDLSN>","asyncReadLastRecord","(","final","String","streamName,\n","final","LogSegmentMetadata","l,\n","final","boolean","fence,\n","final","boolean","includeControl,\n","final","boolean","includeEndOfStream,\n","final","int","scanStartBatchSize,\n","final","int","scanMaxBatchSize,\n","final","AtomicInteger","numRecordsScanned,\n","final","ExecutorService","executorService,\n","final","LogSegmentEntryStore","entryStore",")","{","final","LogRecordSelector","selector","=","new","LastRecordSelector","(",")",";","return","asyncReadRecord","(","streamName,","l,","fence,","includeControl,","includeEndOfStream,","scanStartBatchSize,\n","scanMaxBatchSize,","numRecordsScanned,","executorService,","entryStore,\n","selector,","true","/*","backward","*/,","0L",")",";"],"docstring_tokens":["Read","last","record","from","a","log","segment"],"prompt_tokens":[]}
{"code_tokens":["public","static","CompletableFuture<LogRecordWithDLSN>","asyncReadFirstUserRecord","(","final","String","streamName,\n","final","LogSegmentMetadata","l,\n","final","int","scanStartBatchSize,\n","final","int","scanMaxBatchSize,\n","final","AtomicInteger","numRecordsScanned,\n","final","ExecutorService","executorService,\n","final","LogSegmentEntryStore","entryStore,\n","final","DLSN","dlsn",")","{","long","startEntryId","=","0L",";","if","(","l",".","getLogSegmentSequenceNumber","(",")","==","dlsn",".","getLogSegmentSequenceNo","(",")",")","{","startEntryId","=","dlsn",".","getEntryId","(",")",";","}","final","LogRecordSelector","selector","=","new","FirstDLSNNotLessThanSelector","(","dlsn",")",";","return","asyncReadRecord","(","streamName,","l,","false,","false,","false,","scanStartBatchSize,\n","scanMaxBatchSize,","numRecordsScanned,","executorService,","entryStore,\n","selector,","false","/*","backward","*/,","startEntryId",")",";"],"docstring_tokens":["Read","first","record","from","a","log","segment","with","a","DLSN","larger","than","that","given"],"prompt_tokens":[]}
{"code_tokens":["private","static","CompletableFuture<LogRecordWithDLSN>","asyncReadRecordFromEntries","(","final","String","streamName,\n","final","LogSegmentRandomAccessEntryReader","reader,\n","final","LogSegmentMetadata","metadata,\n","final","ExecutorService","executorService,\n","final","ScanContext","context,\n","final","LogRecordSelector","selector",")","{","final","CompletableFuture<LogRecordWithDLSN>","promise","=","new","CompletableFuture<LogRecordWithDLSN>","(",")",";","final","long","startEntryId","=","context",".","curStartEntryId",".","get","(",")",";","final","long","endEntryId","=","context",".","curEndEntryId",".","get","(",")",";","if","(","LOG",".","isDebugEnabled","(",")",")","{","LOG",".","debug","(","\"","{","}","reading","entries","[","{","}","-","{","}","]","from","{","}",".","\",\n","streamName,","startEntryId,","endEntryId,","metadata",")",";","}","FutureEventListener<List<Entry",".","Reader>>","readEntriesListener","=\n","new","FutureEventListener<List<Entry",".","Reader>>","(",")","{","@Override\n","public","void","onSuccess","(","final","List<Entry",".","Reader>","entries",")","{","if","(","LOG",".","isDebugEnabled","(",")",")","{","LOG",".","debug","(","\"","{","}","finished","reading","entries","[","{","}","-","{","}","]","from","{","}","\",\n","streamName,","startEntryId,","endEntryId,","metadata",")",";","}","for","(","Entry",".","Reader","entry",":","entries",")","{","try","{","visitEntryRecords","(","entry,","context,","selector",")",";","}","catch","(","IOException","ioe",")","{","//","exception","is","only","thrown","due","to","bad","ledger","entry,","so","it","might","be","corrupted\n","//","we","shouldn't","do","anything","beyond","this","point",".","throw","the","exception","to","application\n","promise",".","completeExceptionally","(","ioe",")",";","return",";","}","}","\n\n","LogRecordWithDLSN","record","=","selector",".","result","(",")",";","if","(","LOG",".","isDebugEnabled","(",")",")","{","LOG",".","debug","(","\"","{","}","got","record","from","entries","[","{","}","-","{","}","]","of","{","}",":","{","}","\",\n","streamName,","startEntryId,","endEntryId,","metadata,","record",")",";","}","promise",".","complete","(","record",")",";","}","\n\n","@Override\n","public","void","onFailure","(","final","Throwable","cause",")","{","promise",".","completeExceptionally","(","cause",")",";","}","}",";","reader",".","readEntries","(","startEntryId,","endEntryId",")",".","whenCompleteAsync","(","readEntriesListener,","executorService",")",";","return","promise",";"],"docstring_tokens":["Read","record","from","a","given","range","of","log","segment","entries"],"prompt_tokens":[]}
{"code_tokens":["private","static","void","visitEntryRecords","(","Entry",".","Reader","entry,\n","ScanContext","context,\n","LogRecordSelector","selector",")","throws","IOException","{","LogRecordWithDLSN","nextRecord","=","entry",".","nextRecord","(",")",";","while","(","nextRecord","!=","null",")","{","LogRecordWithDLSN","record","=","nextRecord",";","nextRecord","=","entry",".","nextRecord","(",")",";","context",".","numRecordsScanned",".","incrementAndGet","(",")",";","if","(","!context",".","includeControl","&&","record",".","isControl","(",")",")","{","continue",";","}","if","(","!context",".","includeEndOfStream","&&","record",".","isEndOfStream","(",")",")","{","continue",";","}","selector",".","process","(","record",")",";","}"],"docstring_tokens":["Process","each","record","using","LogRecordSelector"],"prompt_tokens":[]}
{"code_tokens":["public","static","boolean","supportsLogSegmentSequenceNo","(","int","version",")","{","return","version",">=","LogSegmentMetadataVersion",".","VERSION_V2_LEDGER_SEQNO",".","value",";"],"docstring_tokens":["Whether","the","provided","version","supports","log","segment","sequence","number"],"prompt_tokens":[]}
{"code_tokens":["void","recordReadErrorOnBookie","(","int","bookieIndex",")","{","//","If","sticky","bookie","reads","are","enabled,","switch","the","sticky","bookie","to","the\n","//","next","bookie","in","the","ensemble","so","that","we","avoid","to","keep","reading","from","the\n","//","same","failed","bookie\n","if","(","stickyBookieIndex","!=","STICKY_READ_BOOKIE_INDEX_UNSET",")","{","//","This","will","be","idempotent","when","we","have","multiple","read","errors","on","the\n","//","same","bookie",".","The","net","result","is","that","we","just","go","to","the","next","bookie\n","stickyBookieIndex","=","clientCtx",".","getPlacementPolicy","(",")",".","getStickyReadBookieIndex","(","getLedgerMetadata","(",")",",\n","Optional",".","of","(","bookieIndex",")",")",";","}"],"docstring_tokens":["Notify","the","LedgerHandle","that","a","read","operation","was","failed","on","a","particular","bookie"],"prompt_tokens":[]}
{"code_tokens":["@Override\n","public","long","getId","(",")","{","return","ledgerId",";"],"docstring_tokens":["Get","the","id","of","the","current","ledger"],"prompt_tokens":[]}
{"code_tokens":["public","synchronized","long","getNumBookies","(",")","{","Map<Long,","?","extends","List<BookieId>>","m","=","getLedgerMetadata","(",")",".","getAllEnsembles","(",")",";","Set<BookieId>","s","=","Sets",".","newHashSet","(",")",";","for","(","List<BookieId>","aList",":","m",".","values","(",")",")","{","s",".","addAll","(","aList",")",";","}","return","s",".","size","(",")",";"],"docstring_tokens":["Get","the","count","of","unique","bookies","that","own","part","of","this","ledger","by","going","over","all","the","fragments","of","the","ledger"],"prompt_tokens":[]}
{"code_tokens":["synchronized","long","addToLength","(","long","delta",")","{","this",".","length","+=","delta",";","return","this",".","length",";"],"docstring_tokens":["Add","to","the","length","of","the","ledger","in","bytes"],"prompt_tokens":[]}
{"code_tokens":["@Override\n","public","synchronized","long","getLength","(",")","{","return","this",".","length",";"],"docstring_tokens":["Returns","the","length","of","the","ledger","in","bytes"],"prompt_tokens":[]}
{"code_tokens":["public","void","start","(",")","throws","IOException","{","//","no-op\n"],"docstring_tokens":["Start","the","feature","provider"],"prompt_tokens":[]}
{"code_tokens":["public","void","stop","(",")","{","//","no-op\n"],"docstring_tokens":["Stop","the","feature","provider"],"prompt_tokens":[]}
{"code_tokens":["boolean","updatePage","(","LedgerEntryPage","lep",")","throws","IOException","{","if","(","!lep",".","isClean","(",")",")","{","throw","new","IOException","(","\"Trying","to","update","a","dirty","page\"",")",";","}","CachedFileInfo","fi","=","null",";","try","{","fi","=","getFileInfo","(","lep",".","getLedger","(",")",",","null",")",";","long","pos","=","lep",".","getFirstEntryPosition","(",")",";","if","(","pos",">=","fi",".","size","(",")",")","{","lep",".","zeroPage","(",")",";","return","true",";","}","else","{","lep",".","readPage","(","fi",")",";","return","false",";","}","}","finally","{","if","(","fi","!=","null",")","{","fi",".","release","(",")",";","}","}"],"docstring_tokens":["Update","the","ledger","entry","page"],"prompt_tokens":[]}
{"code_tokens":["String","completedLedgerZNode","(","long","firstTxId,","long","lastTxId,","long","logSegmentSeqNo",")","{","return","String",".","format","(","\"%s/%s\",","logMetadata",".","getLogSegmentsPath","(",")",",\n","completedLedgerZNodeName","(","firstTxId,","lastTxId,","logSegmentSeqNo",")",")",";"],"docstring_tokens":["Get","the","znode","path","for","a","finalize","ledger"],"prompt_tokens":[]}
{"code_tokens":["String","inprogressZNodeName","(","long","logSegmentId,","long","firstTxId,","long","logSegmentSeqNo",")","{","if","(","DistributedLogConstants",".","LOGSEGMENT_NAME_VERSION","==","conf",".","getLogSegmentNameVersion","(",")",")","{","//","Lots","of","the","problems","are","introduced","due","to","different","inprogress","names","with","same","ledger","sequence","number",".","return","String",".","format","(","\"%s_%018d\",","DistributedLogConstants",".","INPROGRESS_LOGSEGMENT_PREFIX,","logSegmentSeqNo",")",";","}","else","{","return","DistributedLogConstants",".","INPROGRESS_LOGSEGMENT_PREFIX","+","\"_\"","+","Long",".","toString","(","firstTxId,","16",")",";","}"],"docstring_tokens":["Get","the","name","of","the","inprogress","znode"],"prompt_tokens":[]}
{"code_tokens":["String","inprogressZNode","(","long","logSegmentId,","long","firstTxId,","long","logSegmentSeqNo",")","{","return","logMetadata",".","getLogSegmentsPath","(",")","+","\"/\"","+","inprogressZNodeName","(","logSegmentId,","firstTxId,","logSegmentSeqNo",")",";"],"docstring_tokens":["Get","the","znode","path","for","the","inprogressZNode"],"prompt_tokens":[]}
{"code_tokens":["public","static","RetryPolicy","infiniteRetry","(","long","baseBackoffTimeMs,","long","maxBackoffTimeMs",")","{","return","new","BoundExponentialBackoffRetryPolicy","(","baseBackoffTimeMs,","maxBackoffTimeMs,","Integer",".","MAX_VALUE",")",";"],"docstring_tokens":["Create","an","infinite","retry","policy","with","backoff","time","between","baseBackOffTimeMs","and","maxBackoffTimeMs"],"prompt_tokens":[]}
{"code_tokens":["int","writeToByteBuffer","(","ByteBuffer","dst",")","{","if","(","dst",".","remaining","(",")","<","getLength","(",")",")","{","throw","new","IllegalArgumentException","(","\"Buffer","size","\"","+","dst",".","remaining","(",")","+","\"","<","\"","+","getLength","(",")",")",";","}","\n\n","dst",".","put","(","getBuffer","(",")",",","getOffset","(",")",",","getLength","(",")",")",";","return","getLength","(",")",";"],"docstring_tokens":["Write","EntryKeyValue","blob","into","the","provided","byte","buffer"],"prompt_tokens":[]}
{"code_tokens":["public","static","Stream<Long>","constant","(","long","startMs",")","{","return","Stream",".","iterate","(","startMs,","lastMs","->","startMs",")",";"],"docstring_tokens":["Create","a","stream","with","constant","backoffs"],"prompt_tokens":[]}
{"code_tokens":["public","static","Stream<Long>","exponential","(","long","startMs,\n","int","multiplier,\n","long","maxMs",")","{","return","Stream",".","iterate","(","startMs,","lastMs","->","Math",".","min","(","lastMs","*","multiplier,","maxMs",")",")",";"],"docstring_tokens":["Create","a","stream","with","exponential","backoffs"],"prompt_tokens":[]}
{"code_tokens":["public","static","Stream<Long>","exponentialJittered","(","long","startMs,\n","long","maxMs",")","{","final","long","startNanos","=","TimeUnit",".","NANOSECONDS",".","convert","(","startMs,","TimeUnit",".","MILLISECONDS",")",";","final","long","maxNanos","=","TimeUnit",".","NANOSECONDS",".","convert","(","maxMs,","TimeUnit",".","MILLISECONDS",")",";","final","AtomicLong","attempts","=","new","AtomicLong","(","1",")",";","return","Stream",".","iterate","(","startMs,","lastMs","->","{","long","shift","=","Math",".","min","(","attempts",".","get","(",")",",","MaxBitShift",")",";","long","maxBackoffNanos","=","Math",".","min","(","maxNanos,","startNanos","*","(","1L","<<","shift",")",")",";","long","randomMs","=","TimeUnit",".","MILLISECONDS",".","convert","(","ThreadLocalRandom",".","current","(",")",".","nextLong","(","startNanos,","maxBackoffNanos",")",",\n","TimeUnit",".","NANOSECONDS",")",";","attempts",".","incrementAndGet","(",")",";","return","randomMs",";","}",")",";"],"docstring_tokens":["Create","a","stream","of","exponential","backoffs","with","jitters"],"prompt_tokens":[]}
{"code_tokens":["public","static","Collection<ServerServiceDefinition>","create","(","RangeStoreService","store",")","{","return","Lists",".","newArrayList","(","new","GrpcRootRangeService","(","store",")",".","bindService","(",")",",\n","new","GrpcMetaRangeService","(","store",")",".","bindService","(",")",",\n","new","GrpcTableService","(","store",")",".","bindService","(",")",")",";"],"docstring_tokens":["Create","the","grpc","services","of","a","range","store"],"prompt_tokens":[]}
{"code_tokens":["protected","CompletableFuture<Void>","closeNoThrow","(",")","{","CompletableFuture<Void>","closeFuture",";","synchronized","(","this",")","{","if","(","null","!=","closePromise",")","{","return","closePromise",";","}","closeFuture","=","closePromise","=","new","CompletableFuture<Void>","(",")",";","}","cancelTruncation","(",")",";","FutureUtils",".","proxyTo","(","Utils",".","closeSequence","(","bkDistributedLogManager",".","getScheduler","(",")",",\n","true,","/**","ignore","close","errors","**/\n","getCachedLogWriter","(",")",",\n","getAllocatedLogWriter","(",")",",\n","getCachedWriteHandler","(",")",")",",\n","closeFuture",")",";","return","closeFuture",";"],"docstring_tokens":["Close","the","writer","and","release","all","the","underlying","resources"],"prompt_tokens":[]}
{"code_tokens":["@Override\n","public","ScheduledFuture<?>","initiateSpeculativeRequest","(","final","ScheduledExecutorService","scheduler,\n","final","SpeculativeRequestExecutor","requestExecutor",")","{","return","scheduleSpeculativeRead","(","scheduler,","requestExecutor,","firstSpeculativeRequestTimeout",")",";"],"docstring_tokens":["Initialize","the","speculative","request","execution","policy"],"prompt_tokens":[]}
{"code_tokens":["@Override\n","public","ConfigurationException","getCause","(",")","{","return","(","ConfigurationException",")","super",".","getCause","(",")",";"],"docstring_tokens":["Returns","the","cause","of","this","exception"],"prompt_tokens":[]}
{"code_tokens":["synchronized","Optional<Long>","getFreeDiskSpace","(","BookieId","bookie",")","{","BookieInfo","bookieInfo","=","bookieInfoMap",".","getInfo","(","bookie",")",";","if","(","bookieInfo","!=","null",")","{","return","Optional",".","of","(","bookieInfo",".","getFreeDiskSpace","(",")",")",";","}","else","{","return","Optional",".","empty","(",")",";","}"],"docstring_tokens":["Method","to","allow","tests","to","block","until","bookie","info","is","available"],"prompt_tokens":[]}
{"code_tokens":["@VisibleForTesting\n","LedgerRecoveryOp","setEntryListener","(","ReadEntryListener","entryListener",")","{","this",".","entryListener","=","entryListener",";","return","this",";"],"docstring_tokens":["Set","an","entry","listener","to","listen","on","individual","recovery","reads","during","recovery","procedure"],"prompt_tokens":[]}
{"code_tokens":["synchronized","void","writeToDirectories","(","List<File>","directories",")","{","boolean","success","=","false",";","for","(","File","dir",":","directories",")","{","try","{","File","statusFile","=","new","File","(","dir,","BOOKIE_STATUS_FILENAME",")",";","writeToFile","(","statusFile,","toString","(",")",")",";","success","=","true",";","}","catch","(","IOException","e",")","{","LOG",".","warn","(","\"IOException","while","trying","to","write","bookie","status","to","directory","{","}",".","\"\n","+","\"","This","is","fine","if","not","all","directories","are","failed",".","\",","dir",")",";","}","}","if","(","success",")","{","LOG",".","info","(","\"Successfully","persist","bookie","status","{","}","\",","this",".","bookieMode",")",";","}","else","{","LOG",".","warn","(","\"Failed","to","persist","bookie","status","{","}","\",","this",".","bookieMode",")",";","}"],"docstring_tokens":["Write","bookie","status","to","multiple","directories","in","best","effort"],"prompt_tokens":[]}
{"code_tokens":["private","BookieStatus","readFromFile","(","File","file",")","throws","IOException,","IllegalArgumentException","{","if","(","!file",".","exists","(",")",")","{","return","null",";","}","\n\n","try","(","BufferedReader","reader","=","new","BufferedReader","(","new","InputStreamReader","(","new","FileInputStream","(","file",")",",","UTF_8",")",")",")","{","return","parse","(","reader",")",";","}"],"docstring_tokens":["Function","to","read","the","bookie","status","from","a","single","file"],"prompt_tokens":[]}
{"code_tokens":["public","BookieStatus","parse","(","BufferedReader","reader",")","throws","IOException,","IllegalArgumentException","{","BookieStatus","status","=","new","BookieStatus","(",")",";","String","line","=","reader",".","readLine","(",")",";","if","(","line","==","null","||","line",".","trim","(",")",".","isEmpty","(",")",")","{","LOG",".","debug","(","\"Empty","line","when","parsing","bookie","status\"",")",";","return","null",";","}","String[]","parts","=","line",".","split","(","\",\"",")",";","if","(","parts",".","length","==","0",")","{","LOG",".","debug","(","\"Error","in","parsing","bookie","status:","{","}","\",","line",")",";","return","null",";","}","synchronized","(","status",")","{","status",".","layoutVersion","=","Integer",".","parseInt","(","parts[0]",".","trim","(",")",")",";","if","(","status",".","layoutVersion","==","1","&&","parts",".","length","==","3",")","{","status",".","bookieMode","=","BookieMode",".","valueOf","(","parts[1]",")",";","status",".","lastUpdateTime","=","Long",".","parseLong","(","parts[2]",".","trim","(",")",")",";","return","status",";","}","}","return","null",";","\n\n"],"docstring_tokens":["Parse","the","bookie","status","object","using","appropriate","layout","version"],"prompt_tokens":[]}
{"code_tokens":["public","byte[]","serialize","(",")","throws","IOException","{","String","s","=\n","new","StringBuilder","(",")",".","append","(","layoutFormatVersion",")",".","append","(","lSplitter",")",".","append","(","managerFactoryClass",")",".","append","(","splitter",")",".","append","(","managerVersion",")",".","toString","(",")",";","\n\n","if","(","log",".","isDebugEnabled","(",")",")","{","log",".","debug","(","\"Serialized","layout","info:","{","}","\",","s",")",";","}","return","s",".","getBytes","(","StandardCharsets",".","UTF_8",")",";"],"docstring_tokens":["Generates","a","byte","array","based","on","the","LedgerLayout","object"],"prompt_tokens":[]}
{"code_tokens":["public","static","LedgerLayout","parseLayout","(","byte[]","bytes",")","throws","IOException","{","String","layout","=","new","String","(","bytes,","StandardCharsets",".","UTF_8",")",";","if","(","log",".","isDebugEnabled","(",")",")","{","log",".","debug","(","\"Parsing","Layout:","{","}","\",","layout",")",";","}","\n\n","String[]","lines","=","layout",".","split","(","lSplitter",")",";","\n\n","try","{","int","layoutFormatVersion","=","Integer",".","parseInt","(","lines[0]",")",";","if","(","LAYOUT_FORMAT_VERSION","<","layoutFormatVersion","||","LAYOUT_MIN_COMPAT_VERSION",">","layoutFormatVersion",")","{","throw","new","IOException","(","\"Metadata","version","not","compatible",".","Expected","\"\n","+","LAYOUT_FORMAT_VERSION","+","\",","but","got","\"","+","layoutFormatVersion",")",";","}","\n\n","if","(","lines",".","length","<","2",")","{","throw","new","IOException","(","\"Ledger","manager","and","its","version","absent","from","layout:","\"","+","layout",")",";","}","\n\n","String[]","parts","=","lines[1]",".","split","(","splitter",")",";","if","(","parts",".","length","!=","2",")","{","throw","new","IOException","(","\"Invalid","Ledger","Manager","defined","in","layout",":","\"","+","layout",")",";","}","//","ledger","manager","factory","class\n","String","managerFactoryCls","=","parts[0]",";","//","ledger","manager","version\n","int","managerVersion","=","Integer",".","parseInt","(","parts[1]",")",";","return","new","LedgerLayout","(","managerFactoryCls,","managerVersion,","layoutFormatVersion",")",";","}","catch","(","NumberFormatException","e",")","{","throw","new","IOException","(","\"Could","not","parse","layout","'\"","+","layout","+","\"'\",","e",")",";","}"],"docstring_tokens":["Parses","a","given","byte","array","and","transforms","into","a","LedgerLayout","object"],"prompt_tokens":[]}
{"code_tokens":["public","void","loadConf","(","URL","confURL",")","throws","ConfigurationException","{","Configuration","loadedConf","=","new","PropertiesConfiguration","(","confURL",")",";","loadConf","(","loadedConf",")",";"],"docstring_tokens":["Load","configuration","from","a","given","confURL"],"prompt_tokens":[]}
{"code_tokens":["public","HttpWaitStrategy","forStatusCode","(","int","statusCode",")","{","this",".","statusCode","=","statusCode",";","return","this",";"],"docstring_tokens":["Waits","for","the","given","status","code"],"prompt_tokens":[]}
{"code_tokens":["public","HttpWaitStrategy","forPath","(","String","path",")","{","this",".","path","=","path",";","return","this",";"],"docstring_tokens":["Waits","for","the","given","path"],"prompt_tokens":[]}
{"code_tokens":["public","HttpWaitStrategy","forPort","(","int","port",")","{","this",".","port","=","port",";","return","this",";"],"docstring_tokens":["Wait","for","the","given","port"],"prompt_tokens":[]}
{"code_tokens":["public","HttpWaitStrategy","usingTls","(",")","{","this",".","tlsEnabled","=","true",";","return","this",";"],"docstring_tokens":["Indicates","that","the","status","check","should","use","HTTPS"],"prompt_tokens":[]}
{"code_tokens":["public","HttpWaitStrategy","withBasicCredentials","(","String","username,","String","password",")","{","this",".","username","=","username",";","this",".","password","=","password",";","return","this",";"],"docstring_tokens":["Authenticate","with","HTTP","Basic","Authorization","credentials"],"prompt_tokens":[]}
{"code_tokens":["public","HttpWaitStrategy","forResponsePredicate","(","Predicate<String>","responsePredicate",")","{","this",".","responsePredicate","=","responsePredicate",";","return","this",";"],"docstring_tokens":["Waits","for","the","response","to","pass","the","given","predicate"],"prompt_tokens":[]}
{"code_tokens":["private","URI","buildLivenessUri","(","int","livenessCheckPort",")","{","final","String","scheme","=","(","tlsEnabled","?","\"https\"",":","\"http\"",")","+","\"://\"",";","final","String","host","=","waitStrategyTarget",".","getContainerIpAddress","(",")",";","final","String","portSuffix",";","if","(","(","tlsEnabled","&&","443","==","livenessCheckPort",")","||","(","!tlsEnabled","&&","80","==","livenessCheckPort",")",")","{","portSuffix","=","\"\"",";","}","else","{","portSuffix","=","\":\"","+","String",".","valueOf","(","livenessCheckPort",")",";","}","return","URI",".","create","(","scheme","+","host","+","portSuffix","+","path",")",";"],"docstring_tokens":["Build","the","URI","on","which","to","check","if","the","container","is","ready"],"prompt_tokens":[]}
{"code_tokens":["@Override\n","public","String","toString","(",")","{","return","id",";"],"docstring_tokens":["Returns","the","serialized","version","of","this","object"],"prompt_tokens":[]}
{"code_tokens":["public","static","BookieId","parse","(","String","serialized",")","{","return","new","BookieId","(","serialized",")",";"],"docstring_tokens":["Parses","the","given","serialized","representation","of","a","BookieId"],"prompt_tokens":[]}
{"code_tokens":["public","static","boolean","hasCache","(",")","{","return","HASH_CACHE","!=","null",";"],"docstring_tokens":["Returns","whether","a","hash","function","cache","is","available"],"prompt_tokens":[]}
{"code_tokens":["public","static","HashCache","getCache","(",")","{","if","(","HASH_CACHE","==","null",")","throw","new","UnsupportedOperationException","(",")",";","return","HASH_CACHE",";"],"docstring_tokens":["Returns","the","single","hash","function","cache"],"prompt_tokens":[]}
{"code_tokens":["public","static","StorageClientBuilder","newBuilder","(",")","{","return","new","StorageClientBuilder","(",")",";"],"docstring_tokens":["Create","a","builder","to","build","StorageClient","clients"],"prompt_tokens":[]}
{"code_tokens":["public","StorageClientBuilder","withSettings","(","StorageClientSettings","settings",")","{","this",".","settings","=","settings",";","return","this",";"],"docstring_tokens":["Configure","the","client","with","StorageClientSettings"],"prompt_tokens":[]}
{"code_tokens":["public","StorageClient","build","(",")","{","checkNotNull","(","settings,","\"Stream","settings","is","null\"",")",";","checkArgument","(","validateNamespaceName","(","namespaceName",")",",","\"Namespace","name","'\"","+","namespaceName","+","\"'is","invalid\"",")",";","\n\n","if","(","settings",".","enableServerSideRouting","(",")",")","{","return","new","SimpleStorageClientImpl","(","namespaceName,","settings",")",";","}","else","{","return","new","StorageClientImpl","(","namespaceName,\n","settings,\n","ClientResources",".","create","(",")",")",";","}"],"docstring_tokens":["Build","a","StorageClient","client"],"prompt_tokens":[]}
{"code_tokens":["public","StorageAdminClient","buildAdmin","(",")","{","checkNotNull","(","settings,","\"Storage","client","settings","is","null\"",")",";","\n\n","if","(","settings",".","enableServerSideRouting","(",")",")","{","return","new","SimpleStorageAdminClientImpl","(","settings",")",";","}","else","{","return","new","StorageAdminClientImpl","(","settings,","ClientResources",".","create","(",")",")",";","}"],"docstring_tokens":["Build","a","StorageAdminClient","client"],"prompt_tokens":[]}
{"code_tokens":["public","static","Object","codeLogger","(","int","code",")","{","return","logMessagePool",".","get","(","code",")",";"],"docstring_tokens":["Returns","a","lazy","error","code","formatter","suitable","to","pass","to","log","functions"],"prompt_tokens":[]}
{"code_tokens":["public","static","void","main","(","String[]","args",")","{","Main",".","main","(","args",")",";"],"docstring_tokens":["Legacy","Method","to","run","bookie","server"],"prompt_tokens":[]}
{"code_tokens":["public","static","ServiceURI","create","(","String","uriStr",")","{","checkNotNull","(","uriStr,","\"service","uri","string","is","null\"",")",";","\n\n","//","a","service","uri","first","should","be","a","valid","java",".","net",".","URI\n","URI","uri","=","URI",".","create","(","uriStr",")",";","\n\n","return","create","(","uri",")",";"],"docstring_tokens":["Create","a","service","uri","instance","from","a","uri","string"],"prompt_tokens":[]}
{"code_tokens":["public","static","ServiceURI","create","(","URI","uri",")","{","checkNotNull","(","uri,","\"service","uri","instance","is","null\"",")",";","\n\n","String","serviceName",";","String[]","serviceInfos","=","new","String[0]",";","String","scheme","=","uri",".","getScheme","(",")",";","if","(","null","!=","scheme",")","{","scheme","=","scheme",".","toLowerCase","(",")",";","final","String","serviceSep",";","if","(","scheme",".","startsWith","(","SERVICE_DLOG",")",")","{","serviceSep","=","SERVICE_DLOG_SEP",";","}","else","{","serviceSep","=","SERVICE_SEP",";","}","String[]","schemeParts","=","StringUtils",".","split","(","scheme,","serviceSep",")",";","serviceName","=","schemeParts[0]",";","serviceInfos","=","new","String[schemeParts",".","length","-","1]",";","System",".","arraycopy","(","schemeParts,","1,","serviceInfos,","0,","serviceInfos",".","length",")",";","}","else","{","serviceName","=","null",";","}","\n\n","String","userAndHostInformation","=","uri",".","getAuthority","(",")",";","checkArgument","(","!Strings",".","isNullOrEmpty","(","userAndHostInformation",")",",\n","\"authority","component","is","missing","in","service","uri",":","\"","+","uri",")",";","\n\n","String","serviceUser",";","List<String>","serviceHosts",";","int","atIndex","=","userAndHostInformation",".","indexOf","(","'@'",")",";","Splitter","splitter","=","Splitter",".","on","(","CharMatcher",".","anyOf","(","\",",";","\"",")",")",";","if","(","atIndex",">","0",")","{","serviceUser","=","userAndHostInformation",".","substring","(","0,","atIndex",")",";","serviceHosts","=","splitter",".","splitToList","(","userAndHostInformation",".","substring","(","atIndex","+","1",")",")",";","}","else","{","serviceUser","=","null",";","serviceHosts","=","splitter",".","splitToList","(","userAndHostInformation",")",";","}","serviceHosts","=","serviceHosts\n",".","stream","(",")",".","map","(","host","->","validateHostName","(","serviceName,","host",")",")",".","collect","(","Collectors",".","toList","(",")",")",";","\n\n","String","servicePath","=","uri",".","getPath","(",")",";","checkArgument","(","null","!=","servicePath,\n","\"service","path","component","is","missing","in","service","uri",":","\"","+","uri",")",";","\n\n","return","new","ServiceURI","(","serviceName,\n","serviceInfos,\n","serviceUser,\n","serviceHosts",".","toArray","(","new","String[serviceHosts",".","size","(",")","]",")",",\n","servicePath,\n","uri",")",";"],"docstring_tokens":["Create","a","service","uri","instance","from","a","URI","instance"],"prompt_tokens":[]}
{"code_tokens":["public","static","Provider","getBCProviderFromClassPath","(",")","throws","Exception","{","Class","clazz",";","try","{","clazz","=","Class",".","forName","(","BC_FIPS_PROVIDER_CLASS",")",";","}","catch","(","ClassNotFoundException","cnf",")","{","if","(","log",".","isDebugEnabled","(",")",")","{","log",".","debug","(","\"Not","able","to","get","Bouncy","Castle","provider:","{","}",",","try","to","get","FIPS","provider","{","}","\",\n","BC_NON_FIPS_PROVIDER_CLASS,","BC_FIPS_PROVIDER_CLASS",")",";","}","//","attempt","to","use","the","NON_FIPS","provider",".","clazz","=","Class",".","forName","(","BC_NON_FIPS_PROVIDER_CLASS",")",";","\n\n","}","\n\n","@SuppressWarnings","(","\"unchecked\"",")","Provider","provider","=","(","Provider",")","clazz",".","getDeclaredConstructor","(",")",".","newInstance","(",")",";","Security",".","addProvider","(","provider",")",";","if","(","log",".","isDebugEnabled","(",")",")","{","log",".","debug","(","\"Found","and","Instantiated","Bouncy","Castle","provider","in","classpath","{","}","\",","provider",".","getName","(",")",")",";","}","return","provider",";"],"docstring_tokens":["Get","Bouncy","Castle","provider","from","classpath,","and","call","Security.addProvider"],"prompt_tokens":[]}
{"code_tokens":["public","int","bitWidth","(",")","{","return","bitWidth",";"],"docstring_tokens":["Returns","the","width","in","bits","of","the","CRC","function"],"prompt_tokens":[]}
{"code_tokens":["public","long","initial","(",")","{","return","initial",";"],"docstring_tokens":["Returns","the","initial","value","of","the","CRC","register"],"prompt_tokens":[]}
{"code_tokens":["public","boolean","match","(","int","bitWidth,","long","polynomial,","long","initial,","long","xorOut,","boolean","reflected",")","{","return","bitWidth","==","this",".","bitWidth","&&","polynomial","==","this",".","polynomial","&&\n","initial","==","this",".","initial","&&","xorOut","==","this",".","xorOut","&&","reflected","==","this",".","reflected",";"],"docstring_tokens":["Returns","whether","this","object","matches","the","given","CRC","parameters"],"prompt_tokens":[]}
{"code_tokens":["public","void","asyncIsClosed","(","long","lId,","final","IsClosedCallback","cb,","final","Object","ctx",")","{","ledgerManager",".","readLedgerMetadata","(","lId",")",".","whenComplete","(","(","metadata,","exception",")","->","{","if","(","exception","==","null",")","{","cb",".","isClosedComplete","(","BKException",".","Code",".","OK,","metadata",".","getValue","(",")",".","isClosed","(",")",",","ctx",")",";","}","else","{","cb",".","isClosedComplete","(","BKException",".","getExceptionCode","(","exception",")",",","false,","ctx",")",";","}","}",")",";"],"docstring_tokens":["Check","asynchronously","whether","the","ledger","with","identifier","lId","has","been","closed"],"prompt_tokens":[]}
{"code_tokens":["public","synchronized","void","createPrincipal","(","String","principal,","String","password",")","throws","Exception","{","simpleKdc",".","createPrincipal","(","principal,","password",")",";"],"docstring_tokens":["Creates","a","principal","in","the","KDC","with","the","specified","user","and","password"],"prompt_tokens":[]}
{"code_tokens":["public","synchronized","void","createPrincipal","(","File","keytabFile,\n","String",".",".",".","principals",")","throws","Exception","{","simpleKdc",".","createPrincipals","(","principals",")",";","if","(","keytabFile",".","exists","(",")","&&","!keytabFile",".","delete","(",")",")","{","LOG",".","error","(","\"Failed","to","delete","keytab","file:","\"","+","keytabFile",")",";","}","for","(","String","principal",":","principals",")","{","simpleKdc",".","getKadmin","(",")",".","exportKeytab","(","keytabFile,","principal",")",";","}"],"docstring_tokens":["Creates","multiple","principals","in","the","KDC","and","adds","them","to","a","keytab","file"],"prompt_tokens":[]}
{"code_tokens":["public","LedgerFragment","subset","(","Set<Integer>","subset",")","{","return","new","LedgerFragment","(","this,","subset",")",";"],"docstring_tokens":["Return","a","ledger","fragment","contains","subset","of","bookies"],"prompt_tokens":[]}
{"code_tokens":["public","long","getFirstStoredEntryId","(",")","{","long","firstEntry","=","LedgerHandle",".","INVALID_ENTRY_ID",";","for","(","int","bookieIndex",":","bookieIndexes",")","{","Long","firstStoredEntryForBookie","=","getFirstStoredEntryId","(","bookieIndex",")",";","if","(","firstStoredEntryForBookie","!=","LedgerHandle",".","INVALID_ENTRY_ID",")","{","if","(","firstEntry","==","LedgerHandle",".","INVALID_ENTRY_ID",")","{","firstEntry","=","firstStoredEntryForBookie",";","}","else","{","firstEntry","=","Math",".","min","(","firstEntry,","firstStoredEntryForBookie",")",";","}","}","}","return","firstEntry",";"],"docstring_tokens":["Gets","the","first","stored","entry","id","of","the","fragment","in","failed","bookies"],"prompt_tokens":[]}
{"code_tokens":["public","Long","getFirstStoredEntryId","(","int","bookieIndex",")","{","long","firstEntry","=","firstEntryId",";","\n\n","for","(","int","i","=","0",";","i","<","ensemble",".","size","(",")","&&","firstEntry","<=","lastKnownEntryId",";","i++",")","{","if","(","schedule",".","hasEntry","(","firstEntry,","bookieIndex",")",")","{","return","firstEntry",";","}","else","{","firstEntry++",";","}","}","return","LedgerHandle",".","INVALID_ENTRY_ID",";"],"docstring_tokens":["Get","the","first","stored","entry","id","of","the","fragment","in","the","given","failed","bookies"],"prompt_tokens":[]}
{"code_tokens":["public","long","getLastStoredEntryId","(",")","{","long","lastEntry","=","LedgerHandle",".","INVALID_ENTRY_ID",";","for","(","int","bookieIndex",":","bookieIndexes",")","{","Long","lastStoredEntryIdForBookie","=","getLastStoredEntryId","(","bookieIndex",")",";","if","(","lastStoredEntryIdForBookie","!=","LedgerHandle",".","INVALID_ENTRY_ID",")","{","if","(","lastEntry","==","LedgerHandle",".","INVALID_ENTRY_ID",")","{","lastEntry","=","lastStoredEntryIdForBookie",";","}","else","{","lastEntry","=","Math",".","max","(","lastEntry,","lastStoredEntryIdForBookie",")",";","}","}","}","return","lastEntry",";"],"docstring_tokens":["Gets","the","last","stored","entry","id","of","the","fragment","in","failed","bookie"],"prompt_tokens":[]}
{"code_tokens":["public","Long","getLastStoredEntryId","(","int","bookieIndex",")","{","long","lastEntry","=","lastKnownEntryId",";","for","(","int","i","=","0",";","i","<","ensemble",".","size","(",")","&&","lastEntry",">=","firstEntryId",";","i++",")","{","if","(","schedule",".","hasEntry","(","lastEntry,","bookieIndex",")",")","{","return","lastEntry",";","}","else","{","lastEntry--",";","}","}","return","LedgerHandle",".","INVALID_ENTRY_ID",";"],"docstring_tokens":["Get","the","last","stored","entry","id","of","the","fragment","in","the","given","failed","bookie"],"prompt_tokens":[]}
{"code_tokens":["public","static","Supplier<MVCCAsyncStore<byte[],","byte[]>>","bytesStoreSupplier","(","Supplier<Namespace>","nsSupplier",")","{","return","(",")","->","new","MVCCAsyncBytesStoreImpl","(","(",")","->","new","MVCCStoreImpl<>","(",")",",\n","nsSupplier\n",")",";"],"docstring_tokens":["Provide","a","supplier","to","supply","mvcc","stores","with","a","given","namespace","supplier"],"prompt_tokens":[]}
{"code_tokens":["public","static","Writer","newEntry","(","String","logName,\n","int","initialBufferSize,\n","boolean","envelopeBeforeTransmit,\n","CompressionCodec",".","Type","codec",")","{","return","new","EnvelopedEntryWriter","(","logName,\n","initialBufferSize,\n","envelopeBeforeTransmit,\n","codec",")",";"],"docstring_tokens":["Create","a","new","log","record","set"],"prompt_tokens":[]}
{"code_tokens":["private","synchronized","BufferedLogChannel","allocateNewLog","(","File","dirForNextEntryLog,","String","suffix",")","throws","IOException","{","List<File>","ledgersDirs","=","ledgerDirsManager",".","getAllLedgerDirs","(",")",";","String","logFileName",";","//","It","would","better","not","to","overwrite","existing","entry","log","files\n","File","testLogFile","=","null",";","do","{","if","(","preallocatedLogId",">=","Integer",".","MAX_VALUE",")","{","preallocatedLogId","=","0",";","}","else","{","++preallocatedLogId",";","}","logFileName","=","Long",".","toHexString","(","preallocatedLogId",")","+","suffix",";","for","(","File","dir",":","ledgersDirs",")","{","testLogFile","=","new","File","(","dir,","logFileName",")",";","if","(","testLogFile",".","exists","(",")",")","{","log",".","warn","(","\"Found","existed","entry","log","\"","+","testLogFile\n","+","\"","when","trying","to","create","it","as","a","new","log",".","\"",")",";","testLogFile","=","null",";","break",";","}","}","}","while","(","testLogFile","==","null",")",";","\n\n","File","newLogFile","=","new","File","(","dirForNextEntryLog,","logFileName",")",";","FileChannel","channel","=","new","RandomAccessFile","(","newLogFile,","\"rw\"",")",".","getChannel","(",")",";","\n\n","BufferedLogChannel","logChannel","=","new","BufferedLogChannel","(","byteBufAllocator,","channel,","conf",".","getWriteBufferBytes","(",")",",\n","conf",".","getReadBufferBytes","(",")",",","preallocatedLogId,","newLogFile,","conf",".","getFlushIntervalInBytes","(",")",")",";","logfileHeader",".","readerIndex","(","0",")",";","logChannel",".","write","(","logfileHeader",")",";","\n\n","for","(","File","f",":","ledgersDirs",")","{","setLastLogId","(","f,","preallocatedLogId",")",";","}","\n\n","if","(","suffix",".","equals","(","EntryLogger",".","LOG_FILE_SUFFIX",")",")","{","recentlyCreatedEntryLogsStatus",".","createdEntryLog","(","preallocatedLogId",")",";","}","\n\n","log",".","info","(","\"Created","new","entry","log","file","{","}","for","logId","{","}",".","\",","newLogFile,","preallocatedLogId",")",";","return","logChannel",";"],"docstring_tokens":["Allocate","a","new","log","file"],"prompt_tokens":[]}
{"code_tokens":["void","checkReadLock","(",")","throws","DLIllegalStateException,","LockingException","{","synchronized","(","this",")","{","if","(","(","null","==","lockAcquireFuture",")","||","(","!lockAcquireFuture",".","isDone","(",")",")",")","{","throw","new","DLIllegalStateException","(","\"Attempt","to","check","for","lock","before","it","has","been","acquired","successfully\"",")",";","}","}","\n\n","readLock",".","checkOwnership","(",")",";"],"docstring_tokens":["Check","ownership","of","elective","stream","lock"],"prompt_tokens":[]}
{"code_tokens":["CompletableFuture<Versioned<List<LogSegmentMetadata>>>","asyncStartFetchLogSegments","(",")","{","CompletableFuture<Versioned<List<LogSegmentMetadata>>>","promise","=\n","new","CompletableFuture<Versioned<List<LogSegmentMetadata>>>","(",")",";","asyncStartFetchLogSegments","(","promise",")",";","return","promise",";"],"docstring_tokens":["Start","fetch","the","log","segments","and","register","the","LogSegmentNamesListener"],"prompt_tokens":[]}
{"code_tokens":["public","boolean","isControl","(",")","{","return","isControl","(","metadata",")",";"],"docstring_tokens":["Check","if","the","record","is","a","control","record"],"prompt_tokens":[]}
{"code_tokens":["public","static","boolean","isControl","(","long","flags",")","{","return","(","(","flags","&","LOGRECORD_FLAGS_CONTROL_MESSAGE",")","!=","0",")",";"],"docstring_tokens":["Check","flags","to","see","if","it","indicates","a","control","record"],"prompt_tokens":[]}
{"code_tokens":["int","getPersistentSize","(",")","{","//","Flags","+","TxId","+","Payload-length","+","payload\n","return","2","*","(","Long",".","SIZE","/","8",")","+","Integer",".","SIZE","/","8","+","payload",".","readableBytes","(",")",";"],"docstring_tokens":["The","size","of","the","serialized","log","record"],"prompt_tokens":[]}
{"code_tokens":["public","static","CompletableFuture<Void>","startComponent","(","LifecycleComponent","component",")","{","CompletableFuture<Void>","future","=","new","CompletableFuture<>","(",")",";","final","Thread","shutdownHookThread","=","new","Thread","(","new","ComponentShutdownHook","(","component,","future",")",",\n","\"component-shutdown-thread\"\n",")",";","\n\n","//","register","a","shutdown","hook\n","Runtime",".","getRuntime","(",")",".","addShutdownHook","(","shutdownHookThread",")",";","\n\n","//","register","a","component","exception","handler\n","component",".","setExceptionHandler","(","(","t,","e",")","->","{","log",".","error","(","\"Triggered","exceptionHandler","of","Component:","{","}","because","of","Exception","in","Thread:","{","}","\",\n","component",".","getName","(",")",",","t,","e",")",";","//","start","the","shutdown","hook","when","an","uncaught","exception","happen","in","the","lifecycle","component",".","shutdownHookThread",".","start","(",")",";","}",")",";","\n\n","component",".","publishInfo","(","new","ComponentInfoPublisher","(",")",")",";","\n\n","log",".","info","(","\"Starting","component","{","}",".","\",","component",".","getName","(",")",")",";","component",".","start","(",")",";","log",".","info","(","\"Started","component","{","}",".","\",","component",".","getName","(",")",")",";","return","future",";"],"docstring_tokens":["Start","a","component","and","register","a","shutdown","hook"],"prompt_tokens":[]}
{"code_tokens":["public","static","void","registerClientDriver","(","String","metadataBackendScheme,\n","Class<?","extends","MetadataClientDriver>","driver",")","{","registerClientDriver","(","metadataBackendScheme,","driver,","false",")",";"],"docstring_tokens":["Register","the","metadata","client","driver"],"prompt_tokens":[]}
{"code_tokens":["public","static","void","registerBookieDriver","(","String","metadataBackendScheme,\n","Class<?","extends","MetadataBookieDriver>","driver",")","{","registerBookieDriver","(","metadataBackendScheme,","driver,","false",")",";"],"docstring_tokens":["Register","the","metadata","bookie","driver"],"prompt_tokens":[]}
{"code_tokens":["public","static","MetadataClientDriver","getClientDriver","(","String","scheme",")","{","checkNotNull","(","scheme,","\"Client","Driver","Scheme","is","null\"",")",";","MetadataClientDriverInfo","driverInfo","=","clientDrivers",".","get","(","scheme",".","toLowerCase","(",")",")",";","if","(","null","==","driverInfo",")","{","throw","new","IllegalArgumentException","(","\"Unknown","backend","\"","+","scheme",")",";","}","return","ReflectionUtils",".","newInstance","(","driverInfo",".","driverClass",")",";"],"docstring_tokens":["Retrieve","the","client","driver","for","scheme"],"prompt_tokens":[]}
{"code_tokens":["public","static","MetadataClientDriver","getClientDriver","(","URI","uri",")","{","//","Validate","the","uri","and","load","the","backend","according","to","scheme\n","checkNotNull","(","uri,","\"Metadata","service","uri","is","null\"",")",";","String","scheme","=","uri",".","getScheme","(",")",";","checkNotNull","(","scheme,","\"Invalid","metadata","service","uri",":","\"","+","uri",")",";","scheme","=","scheme",".","toLowerCase","(",")",";","String[]","schemeParts","=","StringUtils",".","split","(","scheme,","'+'",")",";","checkArgument","(","schemeParts",".","length",">","0,\n","\"Invalid","metadata","service","scheme","found",":","\"","+","uri",")",";","return","getClientDriver","(","schemeParts[0]",")",";"],"docstring_tokens":["Retrieve","the","client","driver","for","uri"],"prompt_tokens":[]}
{"code_tokens":["public","static","MetadataBookieDriver","getBookieDriver","(","String","scheme",")","{","checkNotNull","(","scheme,","\"Bookie","Driver","Scheme","is","null\"",")",";","MetadataBookieDriverInfo","driverInfo","=","bookieDrivers",".","get","(","scheme",".","toLowerCase","(",")",")",";","if","(","null","==","driverInfo",")","{","throw","new","IllegalArgumentException","(","\"Unknown","backend","\"","+","scheme",")",";","}","return","ReflectionUtils",".","newInstance","(","driverInfo",".","driverClass",")",";"],"docstring_tokens":["Retrieve","the","bookie","driver","for","scheme"],"prompt_tokens":[]}
{"code_tokens":["public","static","MetadataBookieDriver","getBookieDriver","(","URI","uri",")","{","//","Validate","the","uri","and","load","the","backend","according","to","scheme\n","checkNotNull","(","uri,","\"Metadata","service","uri","is","null\"",")",";","String","scheme","=","uri",".","getScheme","(",")",";","checkNotNull","(","scheme,","\"Invalid","metadata","service","uri",":","\"","+","uri",")",";","scheme","=","scheme",".","toLowerCase","(",")",";","String[]","schemeParts","=","StringUtils",".","split","(","scheme,","'+'",")",";","checkArgument","(","schemeParts",".","length",">","0,\n","\"Invalid","metadata","service","scheme","found",":","\"","+","uri",")",";","return","getBookieDriver","(","schemeParts[0]",")",";"],"docstring_tokens":["Retrieve","the","bookie","driver","for","uri"],"prompt_tokens":[]}
{"code_tokens":["File","pickRandomWritableDir","(",")","throws","NoWritableLedgerDirException","{","return","pickRandomWritableDir","(","null",")",";"],"docstring_tokens":["Returns","one","of","the","ledger","dir","from","writable","dirs","list","randomly"],"prompt_tokens":[]}
{"code_tokens":["public","void","executeOrdered","(","Object","orderingKey,","SafeRunnable","r",")","{","chooseThread","(","orderingKey",")",".","execute","(","r",")",";"],"docstring_tokens":["Schedules","a","one","time","action","to","execute","with","an","ordering","guarantee","on","the","key"],"prompt_tokens":[]}
{"code_tokens":["public","static","void","registerDriver","(","String","backend,","Class<?","extends","NamespaceDriver>","driver",")","{","if","(","!initialized",")","{","initialize","(",")",";","}","\n\n","String","scheme","=","backend",".","toLowerCase","(",")",";","NamespaceDriverInfo","oldDriverInfo","=","drivers",".","get","(","scheme",")",";","if","(","null","!=","oldDriverInfo",")","{","return",";","}","NamespaceDriverInfo","newDriverInfo","=","new","NamespaceDriverInfo","(","driver",")",";","oldDriverInfo","=","drivers",".","putIfAbsent","(","scheme,","newDriverInfo",")",";","if","(","null","!=","oldDriverInfo",")","{","logger",".","debug","(","\"Driver","for","{","}","is","already","there",".","\",","scheme",")",";","}"],"docstring_tokens":["Register","the","namespace","driver"],"prompt_tokens":[]}
{"code_tokens":["public","static","NamespaceDriver","getDriver","(","String","scheme",")","{","checkNotNull","(","scheme,","\"Driver","Scheme","is","null\"",")",";","if","(","!initialized",")","{","initialize","(",")",";","}","NamespaceDriverInfo","driverInfo","=","drivers",".","get","(","scheme",".","toLowerCase","(",")",")",";","if","(","null","==","driverInfo",")","{","throw","new","IllegalArgumentException","(","\"Unknown","backend","\"","+","scheme",")",";","}","return","ReflectionUtils",".","newInstance","(","driverInfo",".","driverClass",")",";"],"docstring_tokens":["Retrieve","the","namespace","driver","for","scheme"],"prompt_tokens":[]}
{"code_tokens":["public","static","NamespaceDriver","getDriver","(","URI","uri",")","{","//","Validate","the","uri","and","load","the","backend","according","to","scheme\n","checkNotNull","(","uri,","\"DistributedLog","uri","is","null\"",")",";","String","scheme","=","uri",".","getScheme","(",")",";","checkNotNull","(","scheme,","\"Invalid","distributedlog","uri",":","\"","+","uri",")",";","scheme","=","scheme",".","toLowerCase","(",")",";","String[]","schemeParts","=","StringUtils",".","split","(","scheme,","'-'",")",";","checkArgument","(","schemeParts",".","length",">","0,\n","\"Invalid","distributedlog","scheme","found",":","\"","+","uri",")",";","checkArgument","(","Objects",".","equal","(","DistributedLogConstants",".","SCHEME_PREFIX,","schemeParts[0]",".","toLowerCase","(",")",")",",\n","\"Unknown","distributedlog","scheme","found",":","\"","+","uri",")",";","//","bookkeeper","is","the","default","backend\n","String","backend","=","DistributedLogConstants",".","BACKEND_BK",";","if","(","schemeParts",".","length",">","1",")","{","backend","=","schemeParts[1]",";","}","return","getDriver","(","backend",")",";"],"docstring_tokens":["Retrieve","the","namespace","driver","for","uri"],"prompt_tokens":[]}
{"code_tokens":["public","void","loadConf","(","Configuration","baseConf",")","{","for","(","Iterator<String>","iter","=","baseConf",".","getKeys","(",")",";","iter",".","hasNext","(",")",";",")","{","String","key","=","iter",".","next","(",")",";","setProperty","(","key,","baseConf",".","getProperty","(","key",")",")",";","}"],"docstring_tokens":["Load","configuration","from","other","configuration","object"],"prompt_tokens":[]}
{"code_tokens":["public","void","loadStreamConf","(","Optional<DistributedLogConfiguration>","streamConfiguration",")","{","if","(","!streamConfiguration",".","isPresent","(",")",")","{","return",";","}","ArrayList<Object>","ignoredSettings","=","new","ArrayList<Object>","(",")",";","Iterator","iterator","=","streamConfiguration",".","get","(",")",".","getKeys","(",")",";","while","(","iterator",".","hasNext","(",")",")","{","Object","setting","=","iterator",".","next","(",")",";","if","(","setting","instanceof","String","&&","streamSettings",".","contains","(","setting",")",")","{","String","settingStr","=","(","String",")","setting",";","setProperty","(","settingStr,","streamConfiguration",".","get","(",")",".","getProperty","(","settingStr",")",")",";","}","else","{","ignoredSettings",".","add","(","setting",")",";","}","}","if","(","LOG",".","isWarnEnabled","(",")","&&","!ignoredSettings",".","isEmpty","(",")",")","{","LOG",".","warn","(","\"invalid","stream","configuration","override","(","s",")",":","{","}","\",\n","StringUtils",".","join","(","ignoredSettings,","\"",";","\"",")",")",";","}"],"docstring_tokens":["Load","whitelisted","stream","configuration","from","another","configuration","object"],"prompt_tokens":[]}
{"code_tokens":["public","DistributedLogConfiguration","setDLLedgerMetadataLayoutVersion","(","int","layoutVersion",")","throws","IllegalArgumentException","{","if","(","(","layoutVersion","<=","0",")","||","(","layoutVersion",">","LogSegmentMetadata",".","LEDGER_METADATA_CURRENT_LAYOUT_VERSION",")",")","{","//","Incorrect","version","specified\n","throw","new","IllegalArgumentException","(","\"Incorrect","value","for","ledger","metadata","layout","version\"",")",";","}","setProperty","(","BKDL_LEDGER_METADATA_LAYOUT_VERSION,","layoutVersion",")",";","return","this",";"],"docstring_tokens":["Set","DL","ledger","metadata","output","layout","version"],"prompt_tokens":[]}
{"code_tokens":["public","DistributedLogConfiguration","setEnableRecordCounts","(","boolean","enableRecordCounts",")","{","setProperty","(","BKDL_ENABLE_RECORD_COUNTS,","enableRecordCounts",")",";","return","this",";"],"docstring_tokens":["Set","if","we","should","publish","record","counts","in","the","log","records","and","metadata"],"prompt_tokens":[]}
{"code_tokens":["public","DistributedLogConfiguration","setOutputBufferSize","(","int","opBufferSize",")","{","setProperty","(","BKDL_OUTPUT_BUFFER_SIZE,","opBufferSize",")",";","return","this",";"],"docstring_tokens":["Set","output","buffer","size","for","DL","writers,","in","bytes"],"prompt_tokens":[]}
{"code_tokens":["public","DistributedLogConfiguration","setPeriodicFlushFrequencyMilliSeconds","(","int","flushFrequencyMs",")","{","setProperty","(","BKDL_PERIODIC_FLUSH_FREQUENCY_MILLISECONDS,","flushFrequencyMs",")",";","return","this",";"],"docstring_tokens":["Set","Periodic","Log","Flush","Frequency","in","milliseconds"],"prompt_tokens":[]}
{"code_tokens":["public","int","getRetentionPeriodHours","(",")","{","return","this",".","getInt","(","BKDL_RETENTION_PERIOD_IN_HOURS,\n","getInt","(","BKDL_RETENTION_PERIOD_IN_HOURS_OLD,\n","BKDL_RETENTION_PERIOD_IN_HOURS_DEFAULT",")",")",";"],"docstring_tokens":["Get","log","segment","retention","period","in","hours"],"prompt_tokens":[]}
{"code_tokens":["public","DistributedLogConfiguration","setRetentionPeriodHours","(","int","retentionHours",")","{","setProperty","(","BKDL_RETENTION_PERIOD_IN_HOURS,","retentionHours",")",";","return","this",";"],"docstring_tokens":["Set","log","segment","retention","period","in","hours"],"prompt_tokens":[]}
{"code_tokens":["public","boolean","getPositionGapDetectionEnabled","(",")","{","return\n","getBoolean","(","BKDL_READER_POSITION_GAP_DETECTION_ENABLED,\n","BKDL_READER_POSITION_GAP_DETECTION_ENABLED_DEFAULT",")",";"],"docstring_tokens":["Get","whether","position","gap","detection","for","reader","enabled"],"prompt_tokens":[]}
{"code_tokens":["public","DistributedLogConfiguration","setReadAheadWaitTime","(","int","readAheadWaitTime",")","{","setProperty","(","BKDL_READAHEAD_WAITTIME,","readAheadWaitTime",")",";","return","this",";"],"docstring_tokens":["Set","the","wait","time","between","successive","attempts","to","poll","for","new","log","records,","in","milliseconds"],"prompt_tokens":[]}
{"code_tokens":["public","DistributedLogConfiguration","setEnableTaskExecutionStats","(","boolean","enabled",")","{","setProperty","(","BKDL_ENABLE_TASK_EXECUTION_STATS,","enabled",")",";","return","this",";"],"docstring_tokens":["Set","to","trace","long","running","tasks","and","record","task","execution","stats","in","thread","pools"],"prompt_tokens":[]}
{"code_tokens":["public","DistributedLogConfiguration","setFederatedCheckExistenceWhenCacheMiss","(","boolean","enabled",")","{","setProperty","(","BKDL_FEDERATED_CHECK_EXISTENCE_WHEN_CACHE_MISS,","enabled",")",";","return","this",";"],"docstring_tokens":["Enable","check","existence","of","a","log","if","quering","local","cache","of","a","federated","namespace","missed"],"prompt_tokens":[]}
{"code_tokens":["public","DistributedLogConfiguration","setDynamicConfigReloadIntervalSec","(","int","intervalSec",")","{","setProperty","(","BKDL_DYNAMIC_CONFIG_RELOAD_INTERVAL_SEC,","intervalSec",")",";","return","this",";"],"docstring_tokens":["Get","dynamic","configuration","reload","interval","in","seconds"],"prompt_tokens":[]}
{"code_tokens":["private","void","doGcLedgers","(",")","{","garbageCollector",".","gc","(","garbageCleaner",")",";"],"docstring_tokens":["Do","garbage","collection","ledger","index","files"],"prompt_tokens":[]}
{"code_tokens":["private","void","doGcEntryLogs","(",")","{","//","Get","a","cumulative","count,","don't","update","until","complete\n","AtomicLong","totalEntryLogSizeAcc","=","new","AtomicLong","(","0L",")",";","\n\n","//","Loop","through","all","of","the","entry","logs","and","remove","the","non-active","ledgers",".","entryLogMetaMap",".","forEach","(","(","entryLogId,","meta",")","->","{","removeIfLedgerNotExists","(","meta",")",";","if","(","meta",".","isEmpty","(",")",")","{","//","This","means","the","entry","log","is","not","associated","with","any","active","ledgers","anymore",".","//","We","can","remove","this","entry","log","file","now",".","LOG",".","info","(","\"Deleting","entryLogId","\"","+","entryLogId","+","\"","as","it","has","no","active","ledgers!\"",")",";","removeEntryLog","(","entryLogId",")",";","gcStats",".","getReclaimedSpaceViaDeletes","(",")",".","add","(","meta",".","getTotalSize","(",")",")",";","}","\n\n","totalEntryLogSizeAcc",".","getAndAdd","(","meta",".","getRemainingSize","(",")",")",";","}",")",";","\n\n","this",".","totalEntryLogSize","=","totalEntryLogSizeAcc",".","get","(",")",";","this",".","numActiveEntryLogs","=","entryLogMetaMap",".","keySet","(",")",".","size","(",")",";"],"docstring_tokens":["Garbage","collect","those","entry","loggers","which","are","not","associated","with","any","active","ledgers"],"prompt_tokens":[]}
{"code_tokens":["public","void","shutdown","(",")","throws","InterruptedException","{","this",".","running","=","false",";","LOG",".","info","(","\"Shutting","down","GarbageCollectorThread\"",")",";","\n\n","while","(","!compacting",".","compareAndSet","(","false,","true",")",")","{","//","Wait","till","the","thread","stops","compacting\n","Thread",".","sleep","(","100",")",";","}","\n\n","//","Interrupt","GC","executor","thread\n","gcExecutor",".","shutdownNow","(",")",";"],"docstring_tokens":["Shutdown","the","garbage","collector","thread"],"prompt_tokens":[]}
{"code_tokens":["public","double","getEIInjectedWriteDelayPercent","(",")","{","return","getDouble","(","DistributedLogConfiguration",".","BKDL_EI_INJECTED_WRITE_DELAY_PERCENT,\n","defaultConfig",".","getDouble","(","DistributedLogConfiguration",".","BKDL_EI_INJECTED_WRITE_DELAY_PERCENT,\n","DistributedLogConfiguration",".","BKDL_EI_INJECTED_WRITE_DELAY_PERCENT_DEFAULT",")",")",";"],"docstring_tokens":["Get","percent","of","write","bytes","which","should","be","delayed","by","BKDL_EI_INJECTED_WRITE_DELAY_MS"],"prompt_tokens":[]}
{"code_tokens":["public","int","getPeriodicFlushFrequencyMilliSeconds","(",")","{","return","getInt","(","DistributedLogConfiguration",".","BKDL_PERIODIC_FLUSH_FREQUENCY_MILLISECONDS,\n","defaultConfig",".","getInt","(","DistributedLogConfiguration",".","BKDL_PERIODIC_FLUSH_FREQUENCY_MILLISECONDS,\n","DistributedLogConfiguration",".","BKDL_PERIODIC_FLUSH_FREQUENCY_MILLISECONDS_DEFAULT",")",")",";"],"docstring_tokens":["Get","Periodic","Log","Flush","Frequency","in","seconds"],"prompt_tokens":[]}
{"code_tokens":["private","ByteBuf","getLastEntryId","(","long","ledgerId",")","throws","IOException","{","EntryKeyValue","kv","=","memTable",".","getLastEntry","(","ledgerId",")",";","if","(","null","!=","kv",")","{","return","kv",".","getValueAsByteBuffer","(",")",";","}","//","If","it","doesn't","exist","in","the","skip","list,","then","fallback","to","the","ledger","cache+index",".","return","interleavedLedgerStorage",".","getEntry","(","ledgerId,","BookieProtocol",".","LAST_ADD_CONFIRMED",")",";"],"docstring_tokens":["Get","the","last","entry","id","for","a","particular","ledger"],"prompt_tokens":[]}
{"code_tokens":["@Override\n","public","CompletableFuture<DLSN>","getLastCommitPosition","(",")","{","DLSN","dlsn","=","lastCommittedPositionUpdater",".","get","(","this",")",";","if","(","null","!=","dlsn",")","{","return","FutureUtils",".","value","(","dlsn",")",";","}","else","{","return","getLastCommitPositionFromZK","(",")",";","}"],"docstring_tokens":["Get","the","last","committed","position","stored","for","this","subscription"],"prompt_tokens":[]}
{"code_tokens":["public","Watcher","registerExpirationHandler","(","final","ZooKeeperSessionExpireNotifier","onExpired",")","{","Watcher","watcher","=","new","Watcher","(",")","{","@Override\n","public","void","process","(","WatchedEvent","event",")","{","if","(","event",".","getType","(",")","==","EventType",".","None","&&","event",".","getState","(",")","==","KeeperState",".","Expired",")","{","try","{","onExpired",".","notifySessionExpired","(",")",";","}","catch","(","Exception","exc",")","{","//","do","nothing\n","}","}","}","}",";","register","(","watcher",")",";","return","watcher",";"],"docstring_tokens":["Clients","that","need","to","re-establish","state","after","session","expiration","can","register","an","onExpired","command","to","execute"],"prompt_tokens":[]}
{"code_tokens":["public","boolean","unregister","(","Watcher","watcher",")","{","return","null","!=","watcher","&&","watchers",".","remove","(","watcher",")",";"],"docstring_tokens":["Clients","can","attempt","to","unregister","a","top-level","Watcher","that","has","previously","been","registered"],"prompt_tokens":[]}
{"code_tokens":["public","static","ByteBufList","clone","(","ByteBufList","other",")","{","ByteBufList","buf","=","get","(",")",";","for","(","int","i","=","0",";","i","<","other",".","buffers",".","size","(",")",";","i++",")","{","//","Create","a","duplicate","of","the","buffer","so","that","there","is","no","interference","from","other","threads\n","buf",".","add","(","other",".","buffers",".","get","(","i",")",".","retainedDuplicate","(",")",")",";","}","return","buf",";"],"docstring_tokens":["Get","a","new","ByteBufList","instance","from","the","pool","that","is","the","clone","of","an","already","existing","instance"],"prompt_tokens":[]}
{"code_tokens":["public","void","add","(","ByteBuf","buf",")","{","final","ByteBuf","unwrapped","=","buf",".","unwrap","(",")","!=","null","&&","buf",".","unwrap","(",")","instanceof","CompositeByteBuf\n","?","buf",".","unwrap","(",")",":","buf",";","ReferenceCountUtil",".","retain","(","unwrapped",")",";","ReferenceCountUtil",".","release","(","buf",")",";","\n\n","if","(","unwrapped","instanceof","CompositeByteBuf",")","{","(","(","CompositeByteBuf",")","unwrapped",")",".","forEach","(","b","->","{","ReferenceCountUtil",".","retain","(","b",")",";","buffers",".","add","(","b",")",";","}",")",";","ReferenceCountUtil",".","release","(","unwrapped",")",";","}","else","{","buffers",".","add","(","unwrapped",")",";","}"],"docstring_tokens":["Append","a","ByteBuf","at","the","end","of","this","ByteBufList"],"prompt_tokens":[]}
{"code_tokens":["public","void","prepend","(","ByteBuf","buf",")","{","//","don't","unwrap","slices\n","final","ByteBuf","unwrapped","=","buf",".","unwrap","(",")","!=","null","&&","buf",".","unwrap","(",")","instanceof","CompositeByteBuf\n","?","buf",".","unwrap","(",")",":","buf",";","ReferenceCountUtil",".","retain","(","unwrapped",")",";","ReferenceCountUtil",".","release","(","buf",")",";","\n\n","if","(","unwrapped","instanceof","CompositeByteBuf",")","{","CompositeByteBuf","composite","=","(","CompositeByteBuf",")","unwrapped",";","for","(","int","i","=","composite",".","numComponents","(",")","-","1",";","i",">=","0",";","i--",")","{","ByteBuf","b","=","composite",".","component","(","i",")",";","ReferenceCountUtil",".","retain","(","b",")",";","buffers",".","add","(","0,","b",")",";","}","ReferenceCountUtil",".","release","(","unwrapped",")",";","}","else","{","buffers",".","add","(","0,","unwrapped",")",";","}"],"docstring_tokens":["Prepend","a","ByteBuf","at","the","beginning","of","this","ByteBufList"],"prompt_tokens":[]}
{"code_tokens":["public","int","getBytes","(","byte[]","dst",")","{","int","copied","=","0",";","for","(","int","idx","=","0",";","idx","<","buffers",".","size","(",")","&&","copied","<","dst",".","length",";","idx++",")","{","ByteBuf","b","=","buffers",".","get","(","idx",")",";","int","len","=","Math",".","min","(","b",".","readableBytes","(",")",",","dst",".","length","-","copied",")",";","b",".","getBytes","(","b",".","readerIndex","(",")",",","dst,","copied,","len",")",";","\n\n","copied","+=","len",";","}","\n\n","return","copied",";"],"docstring_tokens":["Write","bytes","from","the","current","ByteBufList","into","a","byte","array"],"prompt_tokens":[]}
{"code_tokens":["@Override\n","public","boolean","isEndOfStreamMarked","(",")","throws","IOException","{","checkClosedOrInError","(","\"isEndOfStreamMarked\"",")",";","long","lastTxId","=","Utils",".","ioResult","(","getLastLogRecordAsyncInternal","(","false,","true",")",")",".","getTransactionId","(",")",";","return","lastTxId","==","DistributedLogConstants",".","MAX_TXID",";"],"docstring_tokens":["Check","if","an","end","of","stream","marker","was","added","to","the","stream"],"prompt_tokens":[]}
{"code_tokens":["public","AppendOnlyStreamWriter","getAppendOnlyStreamWriter","(",")","throws","IOException","{","long","position",";","try","{","position","=","Utils",".","ioResult","(","getLastLogRecordAsyncInternal","(","true,","false",")",")",".","getTransactionId","(",")",";","if","(","DistributedLogConstants",".","INVALID_TXID","==","position\n","||","DistributedLogConstants",".","EMPTY_LOGSEGMENT_TX_ID","==","position",")","{","position","=","0",";","}","}","catch","(","LogEmptyException","ex",")","{","position","=","0",";","}","catch","(","LogNotFoundException","ex",")","{","position","=","0",";","}","return","new","AppendOnlyStreamWriter","(","startAsyncLogSegmentNonPartitioned","(",")",",","position",")",";"],"docstring_tokens":["Begin","appending","to","the","end","of","the","log","stream","which","is","being","treated","as","a","sequence","of","bytes"],"prompt_tokens":[]}
{"code_tokens":["@Override\n","public","BKAsyncLogWriter","startAsyncLogSegmentNonPartitioned","(",")","throws","IOException","{","return","(","BKAsyncLogWriter",")","Utils",".","ioResult","(","openAsyncLogWriter","(",")",")",";"],"docstring_tokens":["Begin","writing","to","the","log","stream","identified","by","the","name"],"prompt_tokens":[]}
{"code_tokens":["@Override\n","public","LogReader","openLogReader","(","long","fromTxnId",")","throws","IOException","{","return","getInputStreamInternal","(","fromTxnId",")",";"],"docstring_tokens":["Get","the","input","stream","starting","with","fromTxnId","for","the","specified","log"],"prompt_tokens":[]}
{"code_tokens":["@Override\n","public","CompletableFuture<Long>","getLastTxIdAsync","(",")","{","return","getLastLogRecordAsyncInternal","(","false,","false",")",".","thenApply","(","RECORD_2_TXID_FUNCTION",")",";"],"docstring_tokens":["Get","Latest","Transaction","Id","in","the","log"],"prompt_tokens":[]}
{"code_tokens":["@Override\n","public","CompletableFuture<DLSN>","getFirstDLSNAsync","(",")","{","return","getFirstRecordAsyncInternal","(",")",".","thenApply","(","RECORD_2_DLSN_FUNCTION",")",";"],"docstring_tokens":["Get","first","DLSN","in","the","log"],"prompt_tokens":[]}
{"code_tokens":["@Override\n","public","CompletableFuture<DLSN>","getLastDLSNAsync","(",")","{","return","getLastLogRecordAsyncInternal","(","false,","false",")",".","thenApply","(","RECORD_2_DLSN_FUNCTION",")",";"],"docstring_tokens":["Get","Latest","DLSN","in","the","log"],"prompt_tokens":[]}
{"code_tokens":["@Override\n","public","void","delete","(",")","throws","IOException","{","//","delete","the","actual","log","stream","and","log","segments\n","BKLogWriteHandler","ledgerHandler","=","createWriteHandler","(","true",")",";","ledgerHandler",".","deleteLog","(",")",";","//","delete","the","log","stream","metadata\n","Utils",".","ioResult","(","driver",".","getLogStreamMetadataStore","(","WRITER",")",".","deleteLog","(","uri,","getStreamName","(",")",")",")",";"],"docstring_tokens":["Delete","all","the","partitions","of","the","specified","log"],"prompt_tokens":[]}
{"code_tokens":["@Override\n","public","CompletableFuture<Void>","asyncClose","(",")","{","CompletableFuture<Void>","closeFuture",";","BKLogReadHandler","readHandlerToClose",";","synchronized","(","this",")","{","if","(","null","!=","closePromise",")","{","return","closePromise",";","}","closeFuture","=","closePromise","=","new","CompletableFuture<Void>","(",")",";","readHandlerToClose","=","readHandlerForListener",";","}","\n\n","CompletableFuture<Void>","closeResult","=","Utils",".","closeSequence","(","null,","true,\n","readHandlerToClose,\n","pendingReaders,\n","resourcesCloseable",".","orElse","(","AsyncCloseable",".","NULL",")",")",";","FutureUtils",".","proxyTo","(","closeResult,","closeFuture",")",";","return","closeFuture",";"],"docstring_tokens":["Close","the","distributed","log","manager,","freeing","any","resources","it","may","hold"],"prompt_tokens":[]}
{"code_tokens":["public","static","long","get","(","long","value,","long","mask",")","{","checkArgument","(","value",">=","0L","&&","mask",">=","0L",")",";","return","(","value","&","mask",")",";"],"docstring_tokens":["Get","the","bits","where","mask","is","1"],"prompt_tokens":[]}
{"code_tokens":["public","static","<T>","CompletableFuture<T>","whenCompleteAsync","(","CompletableFuture<T>","future,\n","BiConsumer<?","super","T,","?","super","Throwable>","action,\n","OrderedScheduler","scheduler,\n","Object","scheduleKey",")","{","return","future",".","whenCompleteAsync","(","action,","scheduler",".","chooseThread","(","scheduleKey",")",")",";"],"docstring_tokens":["Completing","the","future","in","the","thread","in","the","scheduler","identified","by","the","scheduleKey"],"prompt_tokens":[]}
{"code_tokens":["public","static","<T>","CompletableFuture<Void>","ignore","(","CompletableFuture<T>","future",")","{","return","ignore","(","future,","null",")",";"],"docstring_tokens":["Ignore","exception","from","the","future"],"prompt_tokens":[]}
{"code_tokens":["public","static","<T>","CompletableFuture<Void>","ignore","(","CompletableFuture<T>","future,\n","final","String","errorMsg",")","{","final","CompletableFuture<Void>","promise","=","new","CompletableFuture<Void>","(",")",";","future",".","whenComplete","(","new","FutureEventListener<T>","(",")","{","@Override\n","public","void","onSuccess","(","T","value",")","{","promise",".","complete","(","null",")",";","}","\n\n","@Override\n","public","void","onFailure","(","Throwable","cause",")","{","if","(","null","!=","errorMsg",")","{","log",".","error","(","errorMsg,","cause",")",";","}","promise",".","complete","(","null",")",";","}","}",")",";","return","promise",";"],"docstring_tokens":["Ignore","exception","from","the","future","and","log","errorMsg","on","exceptions"],"prompt_tokens":[]}
{"code_tokens":["private","void","unsafeInitializeLogSegments","(","List<LogSegmentMetadata>","segments",")","{","if","(","segments",".","isEmpty","(",")",")","{","//","not","initialize","the","background","reader,","until","the","first","log","segment","is","notified\n","return",";","}","boolean","skipTruncatedLogSegments","=","true",";","DLSN","dlsnToStart","=","fromDLSN",";","//","positioning","the","reader\n","for","(","int","i","=","0",";","i","<","segments",".","size","(",")",";","i++",")","{","LogSegmentMetadata","segment","=","segments",".","get","(","i",")",";","//","skip","any","log","segments","that","have","smaller","log","segment","sequence","numbers\n","if","(","segment",".","getLogSegmentSequenceNumber","(",")","<","fromDLSN",".","getLogSegmentSequenceNo","(",")",")","{","continue",";","}","//","if","the","log","segment","is","truncated,","skip","it",".","if","(","skipTruncatedLogSegments\n","&&","!conf",".","getIgnoreTruncationStatus","(",")","&&","segment",".","isTruncated","(",")",")","{","continue",";","}","//","if","the","log","segment","is","partially","truncated,","move","the","start","dlsn","to","the","min","active","dlsn\n","if","(","skipTruncatedLogSegments\n","&&","!conf",".","getIgnoreTruncationStatus","(",")","&&","segment",".","isPartiallyTruncated","(",")",")","{","if","(","segment",".","getMinActiveDLSN","(",")",".","compareTo","(","fromDLSN",")",">","0",")","{","dlsnToStart","=","segment",".","getMinActiveDLSN","(",")",";","}","}","skipTruncatedLogSegments","=","false",";","if","(","!isAllowedToPosition","(","segment,","dlsnToStart",")",")","{","logger",".","error","(","\"segment","{","}","is","not","allowed","to","position","at","{","}","\",","segment,","dlsnToStart",")",";","return",";","}","\n\n","SegmentReader","reader","=","new","SegmentReader","(","segment,\n","segment",".","getLogSegmentSequenceNumber","(",")","==","dlsnToStart",".","getLogSegmentSequenceNo","(",")","?","dlsnToStart",".","getEntryId","(",")",":","0L",")",";","segmentReaders",".","add","(","reader",")",";","}","if","(","segmentReaders",".","isEmpty","(",")",")","{","//","not","initialize","the","background","reader,","until","the","first","log","segment","is","available","to","read\n","return",";","}","currentSegmentReader","=","segmentReaders",".","pollFirst","(",")",";","currentSegmentReader",".","openReader","(",")",";","currentSegmentReader",".","startRead","(",")",";","currentSegmentSequenceNumber","=","currentSegmentReader",".","getSegment","(",")",".","getLogSegmentSequenceNumber","(",")",";","\n\n","scheduleRead","(",")",";","\n\n","if","(","!segmentReaders",".","isEmpty","(",")",")","{","for","(","SegmentReader","reader",":","segmentReaders",")","{","reader",".","openReader","(",")",";","}","unsafePrefetchNextSegment","(","true",")",";","}","//","mark","the","reader","initialized\n","isInitialized","=","true",";"],"docstring_tokens":["Initialize","the","reader","with","the","log","segments"],"prompt_tokens":[]}
{"code_tokens":["private","boolean","isAllowedToPosition","(","LogSegmentMetadata","segment,","DLSN","fromDLSN",")","{","if","(","segment",".","isTruncated","(",")","&&","segment",".","getLastDLSN","(",")",".","compareTo","(","fromDLSN",")",">=","0\n","&&","!conf",".","getIgnoreTruncationStatus","(",")",")","{","setLastException","(","new","AlreadyTruncatedTransactionException","(","streamName\n","+","\"",":","trying","to","position","read","ahead","at","\"","+","fromDLSN\n","+","\"","on","a","segment","\"","+","segment","+","\"","that","is","already","marked","as","truncated\"",")",")",";","return","false",";","}","if","(","segment",".","isPartiallyTruncated","(",")","&&","segment",".","getMinActiveDLSN","(",")",".","compareTo","(","fromDLSN",")",">","0",")","{","if","(","conf",".","getAlertWhenPositioningOnTruncated","(",")",")","{","alertStatsLogger",".","raise","(","\"Trying","to","position","reader","on","{","}","when","{","}","is","marked","partially","truncated\",\n","fromDLSN,","segment",")",";","}","if","(","!conf",".","getIgnoreTruncationStatus","(",")",")","{","logger",".","error","(","\"","{","}",":","Trying","to","position","reader","on","{","}","when","{","}","is","marked","partially","truncated\",\n","streamName,","fromDLSN,","segment",")",";","\n\n","setLastException","(","new","AlreadyTruncatedTransactionException","(","streamName\n","+","\"",":","trying","to","position","read","ahead","at","\"","+","fromDLSN\n","+","\"","on","a","segment","\"","+","segment","+","\"","that","is","already","marked","as","truncated\"",")",")",";","return","false",";","}","}","return","true",";"],"docstring_tokens":["Check","if","we","are","allowed","to","position","the","reader","at","fromDLSN"],"prompt_tokens":[]}
{"code_tokens":["public","void","initiate","(",")","{","startTime","=","MathUtils",".","nowInNano","(",")",";","\n\n","/**\n","*","Asynchronously","read","the","ledger","metadata","node",".","*/\n","bk",".","getLedgerManager","(",")",".","readLedgerMetadata","(","ledgerId",")",".","whenComplete","(","(","metadata,","exception",")","->","{","if","(","exception","!=","null",")","{","openComplete","(","BKException",".","getExceptionCode","(","exception",")",",","null",")",";","}","else","{","openWithMetadata","(","metadata",")",";","}","}",")",";"],"docstring_tokens":["Inititates","the","ledger","open","operation"],"prompt_tokens":[]}
{"code_tokens":["public","void","initiateWithoutRecovery","(",")","{","this",".","doRecovery","=","false",";","initiate","(",")",";"],"docstring_tokens":["Inititates","the","ledger","open","operation","without","recovery"],"prompt_tokens":[]}
{"code_tokens":["private","synchronized","boolean","refill","(",")","throws","IOException","{","bytebuff",".","clear","(",")",";","if","(","!ledgerSeq",".","hasMoreElements","(",")","&&","lastEntry",">=","lh",".","getLastAddConfirmed","(",")",")","{","return","false",";","}","if","(","!ledgerSeq",".","hasMoreElements","(",")",")","{","//","do","refill\n","long","last","=","Math",".","min","(","lastEntry","+","increment,","lh",".","getLastAddConfirmed","(",")",")",";","try","{","ledgerSeq","=","lh",".","readEntries","(","lastEntry","+","1,","last",")",";","}","catch","(","BKException","bk",")","{","IOException","ie","=","new","IOException","(","bk",".","getMessage","(",")",")",";","ie",".","initCause","(","bk",")",";","throw","ie",";","}","catch","(","InterruptedException","ie",")","{","Thread",".","currentThread","(",")",".","interrupt","(",")",";","}","lastEntry","=","last",";","}","LedgerEntry","le","=","ledgerSeq",".","nextElement","(",")",";","bbytes","=","le",".","getEntry","(",")",";","bytebuff","=","ByteBuffer",".","wrap","(","bbytes",")",";","return","true",";"],"docstring_tokens":["refill","the","buffer,","we","need","to","read","more","bytes"],"prompt_tokens":[]}
{"code_tokens":["protected","void","run","(",")","throws","IOException","{","if","(","lastTime","+","interval",">","System",".","currentTimeMillis","(",")",")","{","return",";","}","exitCode","=","0",";","//","reset","for","next","run\n","runCommand","(",")",";"],"docstring_tokens":["Check","to","see","if","a","command","needs","to","be","executed","and","execute","if","needed"],"prompt_tokens":[]}
{"code_tokens":["public","boolean","isTimedOut","(",")","{","return","timedOut",".","get","(",")",";"],"docstring_tokens":["To","check","if","the","passed","script","to","shell","command","executor","timed","out","or","not"],"prompt_tokens":[]}
{"code_tokens":["protected","NavigableSet<Long>","ledgerListToSet","(","List<String>","ledgerNodes,","String","path",")","{","NavigableSet<Long>","zkActiveLedgers","=","new","TreeSet<Long>","(",")",";","for","(","String","ledgerNode",":","ledgerNodes",")","{","if","(","isSpecialZnode","(","ledgerNode",")",")","{","continue",";","}","try","{","//","convert","the","node","path","to","ledger","id","according","to","different","ledger","manager","implementation\n","zkActiveLedgers",".","add","(","getLedgerId","(","path","+","\"/\"","+","ledgerNode",")",")",";","}","catch","(","IOException","e",")","{","LOG",".","warn","(","\"Error","extracting","ledgerId","from","ZK","ledger","node:","\"","+","ledgerNode",")",";","//","This","is","a","pretty","bad","error","as","it","indicates","a","ledger","node","in","ZK\n","//","has","an","incorrect","format",".","For","now","just","continue","and","consider\n","//","this","as","a","non-existent","ledger",".","continue",";","}","}","return","zkActiveLedgers",";"],"docstring_tokens":["Convert","the","ZK","retrieved","ledger","nodes","to","a","HashSet","for","easier","comparisons"],"prompt_tokens":[]}
{"code_tokens":["public","Map<String,","Long>","calculateStreamSpaceUsage","(","final","URI","uri",")","throws","IOException","{","logger",".","info","(","\"Collecting","stream","space","usage","for","{","}",".","\",","uri",")",";","Namespace","namespace","=","NamespaceBuilder",".","newBuilder","(",")",".","conf","(","conf",")",".","uri","(","uri",")",".","build","(",")",";","try","{","return","calculateStreamSpaceUsage","(","uri,","namespace",")",";","}","finally","{","namespace",".","close","(",")",";","}"],"docstring_tokens":["Calculating","stream","space","usage","from","given","uri"],"prompt_tokens":[]}
{"code_tokens":["public","static","List<String>","getChildrenInSingleNode","(","final","ZooKeeper","zk,","final","String","node,","long","zkOpTimeoutMs",")","throws","InterruptedException,","IOException,","KeeperException",".","NoNodeException","{","final","GetChildrenCtx","ctx","=","new","GetChildrenCtx","(",")",";","getChildrenInSingleNode","(","zk,","node,","new","GenericCallback<List<String>>","(",")","{","@Override\n","public","void","operationComplete","(","int","rc,","List<String>","ledgers",")","{","synchronized","(","ctx",")","{","if","(","Code",".","OK",".","intValue","(",")","==","rc",")","{","ctx",".","children","=","ledgers",";","}","ctx",".","rc","=","rc",";","ctx",".","done","=","true",";","ctx",".","notifyAll","(",")",";","}","}","}",")",";","\n\n","synchronized","(","ctx",")","{","long","startTime","=","System",".","currentTimeMillis","(",")",";","while","(","!ctx",".","done",")","{","try","{","ctx",".","wait","(","zkOpTimeoutMs",">","0","?","zkOpTimeoutMs",":","0",")",";","}","catch","(","InterruptedException","e",")","{","ctx",".","rc","=","Code",".","OPERATIONTIMEOUT",".","intValue","(",")",";","ctx",".","done","=","true",";","}","//","timeout","the","process","if","get-children","response","not","received\n","//","zkOpTimeoutMs",".","if","(","zkOpTimeoutMs",">","0","&&","(","System",".","currentTimeMillis","(",")","-","startTime",")",">=","zkOpTimeoutMs",")","{","ctx",".","rc","=","Code",".","OPERATIONTIMEOUT",".","intValue","(",")",";","ctx",".","done","=","true",";","}","}","}","if","(","Code",".","NONODE",".","intValue","(",")","==","ctx",".","rc",")","{","throw","new","KeeperException",".","NoNodeException","(","\"Got","NoNode","on","call","to","getChildren","on","path","\"","+","node",")",";","}","else","if","(","Code",".","OK",".","intValue","(",")","!=","ctx",".","rc",")","{","throw","new","IOException","(","\"Error","on","getting","children","from","node","\"","+","node",")",";","}","return","ctx",".","children",";"],"docstring_tokens":["Sync","get","all","children","under","single","zk","node"],"prompt_tokens":[]}
{"code_tokens":["public","static","void","getChildrenInSingleNode","(","final","ZooKeeper","zk,","final","String","node,\n","final","GenericCallback<List<String>>","cb",")","{","zk",".","sync","(","node,","new","AsyncCallback",".","VoidCallback","(",")","{","@Override\n","public","void","processResult","(","int","rc,","String","path,","Object","ctx",")","{","if","(","rc","!=","Code",".","OK",".","intValue","(",")",")","{","LOG",".","error","(","\"ZK","error","syncing","nodes","when","getting","children:","\",","KeeperException\n",".","create","(","KeeperException",".","Code",".","get","(","rc",")",",","path",")",")",";","cb",".","operationComplete","(","rc,","null",")",";","return",";","}","zk",".","getChildren","(","node,","false,","new","AsyncCallback",".","ChildrenCallback","(",")","{","@Override\n","public","void","processResult","(","int","rc,","String","path,","Object","ctx,","List<String>","nodes",")","{","if","(","rc","!=","Code",".","OK",".","intValue","(",")",")","{","LOG",".","error","(","\"Error","polling","ZK","for","the","available","nodes:","\",","KeeperException\n",".","create","(","KeeperException",".","Code",".","get","(","rc",")",",","path",")",")",";","cb",".","operationComplete","(","rc,","null",")",";","return",";","}","\n\n","cb",".","operationComplete","(","rc,","nodes",")",";","\n\n","}","}",",","null",")",";","}","}",",","null",")",";"],"docstring_tokens":["Async","get","direct","children","under","single","node"],"prompt_tokens":[]}
{"code_tokens":["@Override\n","public","CompletableFuture<Void>","asyncClose","(",")","{","CompletableFuture<Void>","closeFuture",";","synchronized","(","this",")","{","if","(","null","!=","closePromise",")","{","return","closePromise",";","}","closeFuture","=","closePromise","=","new","CompletableFuture<Void>","(",")",";","}","//","NOTE:","ownWriterZKC","and","ownReaderZKC","are","mostly","used","by","tests\n","//","the","managers","created","by","the","namespace","-","whose","zkc","will","be","closed","by","namespace\n","try","{","if","(","ownWriterZKC",")","{","writerZKC",".","close","(",")",";","}","if","(","ownReaderZKC",")","{","readerZKC",".","close","(",")",";","}","}","catch","(","Exception","e",")","{","LOG",".","warn","(","\"Exception","while","closing","distributed","log","manager\",","e",")",";","}","FutureUtils",".","complete","(","closeFuture,","null",")",";","return","closeFuture",";"],"docstring_tokens":["Close","the","metadata","accessor,","freeing","any","resources","it","may","hold"],"prompt_tokens":[]}
{"code_tokens":["public","static","String","getShortHierarchicalLedgerPath","(","long","ledgerId",")","{","String","ledgerIdStr","=","getZKStringId","(","ledgerId",")",";","//","do","2-4-4","split\n","StringBuilder","sb","=","new","StringBuilder","(",")",";","sb",".","append","(","\"/\"",")",".","append","(","ledgerIdStr",".","substring","(","0,","2",")",")",".","append","(","\"/\"",")",".","append","(","ledgerIdStr",".","substring","(","2,","6",")",")",".","append","(","\"/\"",")",".","append","(","LEDGER_NODE_PREFIX",")",".","append","(","ledgerIdStr",".","substring","(","6,","10",")",")",";","return","sb",".","toString","(",")",";"],"docstring_tokens":["Get","the","hierarchical","ledger","path","according","to","the","ledger","id"],"prompt_tokens":[]}
{"code_tokens":["public","static","String","getLongHierarchicalLedgerPath","(","long","ledgerId",")","{","String","ledgerIdStr","=","getZKStringIdForLongHierarchical","(","ledgerId",")",";","//","do","3-4-4-4-4","split\n","StringBuilder","sb","=","new","StringBuilder","(",")",";","sb",".","append","(","\"/\"",")",".","append","(","ledgerIdStr",".","substring","(","0,","3",")",")",".","append","(","\"/\"",")",".","append","(","ledgerIdStr",".","substring","(","3,","7",")",")",".","append","(","\"/\"",")",".","append","(","ledgerIdStr",".","substring","(","7,","11",")",")",".","append","(","\"/\"",")",".","append","(","ledgerIdStr",".","substring","(","11,","15",")",")",".","append","(","\"/\"",")",".","append","(","LEDGER_NODE_PREFIX",")",".","append","(","ledgerIdStr",".","substring","(","15,","19",")",")",";","return","sb",".","toString","(",")",";"],"docstring_tokens":["Get","the","long","hierarchical","ledger","path","according","to","the","ledger","id"],"prompt_tokens":[]}
{"code_tokens":["public","Map<String,","Set<Long>>","getBookieToLedgerIndex","(",")","throws","BKAuditException","{","//","bookie","vs","ledgers","map\n","final","ConcurrentHashMap<String,","Set<Long>>","bookie2ledgersMap","=","new","ConcurrentHashMap<String,","Set<Long>>","(",")",";","final","CountDownLatch","ledgerCollectorLatch","=","new","CountDownLatch","(","1",")",";","\n\n","Processor<Long>","ledgerProcessor","=","new","Processor<Long>","(",")","{","@Override\n","public","void","process","(","Long","ledgerId,","AsyncCallback",".","VoidCallback","iterCallback",")","{","ledgerManager",".","readLedgerMetadata","(","ledgerId",")",".","whenComplete","(","(","metadata,","exception",")","->","{","if","(","exception","==","null",")","{","for","(","Map",".","Entry<Long,","?","extends","List<BookieId>>","ensemble\n",":","metadata",".","getValue","(",")",".","getAllEnsembles","(",")",".","entrySet","(",")",")","{","for","(","BookieId","bookie",":","ensemble",".","getValue","(",")",")","{","putLedger","(","bookie2ledgersMap,","bookie",".","toString","(",")",",","ledgerId",")",";","}","}","iterCallback",".","processResult","(","BKException",".","Code",".","OK,","null,","null",")",";","}","else","if","(","BKException",".","getExceptionCode","(","exception",")","==","BKException",".","Code",".","NoSuchLedgerExistsOnMetadataServerException",")","{","LOG",".","info","(","\"Ignoring","replication","of","already","deleted","ledger","{","}","\",","ledgerId",")",";","iterCallback",".","processResult","(","BKException",".","Code",".","OK,","null,","null",")",";","}","else","{","LOG",".","warn","(","\"Unable","to","read","the","ledger:","{","}","information\",","ledgerId",")",";","iterCallback",".","processResult","(","BKException",".","getExceptionCode","(","exception",")",",","null,","null",")",";","}","}",")",";","}","}",";","//","Reading","the","result","after","processing","all","the","ledgers\n","final","List<Integer>","resultCode","=","new","ArrayList<Integer>","(","1",")",";","ledgerManager",".","asyncProcessLedgers","(","ledgerProcessor,\n","new","AsyncCallback",".","VoidCallback","(",")","{","\n\n","@Override\n","public","void","processResult","(","int","rc,","String","s,","Object","obj",")","{","resultCode",".","add","(","rc",")",";","ledgerCollectorLatch",".","countDown","(",")",";","}","}",",","null,","BKException",".","Code",".","OK,","BKException",".","Code",".","ReadException",")",";","try","{","ledgerCollectorLatch",".","await","(",")",";","}","catch","(","InterruptedException","e",")","{","Thread",".","currentThread","(",")",".","interrupt","(",")",";","throw","new","BKAuditException","(","\"Exception","while","getting","the","bookie-ledgers\",","e",")",";","}","if","(","!resultCode",".","contains","(","BKException",".","Code",".","OK",")",")","{","throw","new","BKAuditException","(","\"Exception","while","getting","the","bookie-ledgers\",","BKException\n",".","create","(","resultCode",".","get","(","0",")",")",")",";","}","return","bookie2ledgersMap",";"],"docstring_tokens":["Generating","bookie","vs","its","ledgers","map","by","reading","all","the","ledgers","in","each","bookie","and","parsing","its","metadata"],"prompt_tokens":[]}
{"code_tokens":["public","static","int","hash32","(","ByteBuf","data,","int","offset,","int","length,","int","seed",")","{","int","m","=","0x5bd1e995",";","int","r","=","24",";","\n\n","int","h","=","seed","^","length",";","\n\n","int","len4","=","length",">>","2",";","\n\n","for","(","int","i","=","0",";","i","<","len4",";","i++",")","{","int","i4","=","i","<<","2",";","int","k","=","data",".","getByte","(","offset","+","i4","+","3",")",";","k","=","k","<<","8",";","k","=","k","|","(","data",".","getByte","(","offset","+","i4","+","2",")","&","0xff",")",";","k","=","k","<<","8",";","k","=","k","|","(","data",".","getByte","(","offset","+","i4","+","1",")","&","0xff",")",";","k","=","k","<<","8",";","k","=","k","|","(","data",".","getByte","(","offset","+","i4","+","0",")","&","0xff",")",";","k","*=","m",";","k","^=","k",">>>","r",";","k","*=","m",";","h","*=","m",";","h","^=","k",";","}","\n\n","//","avoid","calculating","modulo\n","int","lenM","=","len4","<<","2",";","int","left","=","length","-","lenM",";","\n\n","if","(","left","!=","0",")","{","if","(","left",">=","3",")","{","h","^=","(","int",")","data",".","getByte","(","offset","+","length","-","3",")","<<","16",";","}","if","(","left",">=","2",")","{","h","^=","(","int",")","data",".","getByte","(","offset","+","length","-","2",")","<<","8",";","}","if","(","left",">=","1",")","{","h","^=","(","int",")","data",".","getByte","(","offset","+","length","-","1",")",";","}","\n\n","h","*=","m",";","}","\n\n","h","^=","h",">>>","13",";","h","*=","m",";","h","^=","h",">>>","15",";","\n\n","return","h",";"],"docstring_tokens":["Create","a","32","bits","murmur","hash","value","for","the","provided","data"],"prompt_tokens":[]}
{"code_tokens":["public","static","long","hash64","(","ByteBuf","key,","int","offset,","int","length,","long","seed",")","{","long","m64","=","0xc6a4a7935bd1e995L",";","int","r64","=","47",";","\n\n","long","h64","=","(","seed","&","0xffffffffL",")","^","(","m64","*","length",")",";","\n\n","int","lenLongs","=","length",">>","3",";","\n\n","for","(","int","i","=","0",";","i","<","lenLongs",";","++i",")","{","int","i8","=","i","<<","3",";","\n\n","long","k64","=","(","(","long",")","key",".","getByte","(","offset","+","i8","+","0",")","&","0xff",")","+","(","(","(","long",")","key",".","getByte","(","offset","+","i8","+","1",")","&","0xff",")","<<","8",")","+","(","(","(","long",")","key",".","getByte","(","offset","+","i8","+","2",")","&","0xff",")","<<","16",")","+","(","(","(","long",")","key",".","getByte","(","offset","+","i8","+","3",")","&","0xff",")","<<","24",")","+","(","(","(","long",")","key",".","getByte","(","offset","+","i8","+","4",")","&","0xff",")","<<","32",")","+","(","(","(","long",")","key",".","getByte","(","offset","+","i8","+","5",")","&","0xff",")","<<","40",")","+","(","(","(","long",")","key",".","getByte","(","offset","+","i8","+","6",")","&","0xff",")","<<","48",")","+","(","(","(","long",")","key",".","getByte","(","offset","+","i8","+","7",")","&","0xff",")","<<","56",")",";","\n\n","k64","*=","m64",";","k64","^=","k64",">>>","r64",";","k64","*=","m64",";","\n\n","h64","^=","k64",";","h64","*=","m64",";","}","\n\n","int","rem","=","length","&","0x7",";","\n\n","//","CHECKSTYLE",".","OFF:","FallThrough\n","switch","(","rem",")","{","case","0:\n","break",";","case","7:\n","h64","^=","(","long",")","key",".","getByte","(","offset","+","length","-","rem","+","6",")","<<","48",";","case","6:\n","h64","^=","(","long",")","key",".","getByte","(","offset","+","length","-","rem","+","5",")","<<","40",";","case","5:\n","h64","^=","(","long",")","key",".","getByte","(","offset","+","length","-","rem","+","4",")","<<","32",";","case","4:\n","h64","^=","(","long",")","key",".","getByte","(","offset","+","length","-","rem","+","3",")","<<","24",";","case","3:\n","h64","^=","(","long",")","key",".","getByte","(","offset","+","length","-","rem","+","2",")","<<","16",";","case","2:\n","h64","^=","(","long",")","key",".","getByte","(","offset","+","length","-","rem","+","1",")","<<","8",";","case","1:\n","h64","^=","(","long",")","key",".","getByte","(","offset","+","length","-","rem",")",";","h64","*=","m64",";","}","//","CHECKSTYLE",".","ON:","FallThrough\n\n","h64","^=","h64",">>>","r64",";","h64","*=","m64",";","h64","^=","h64",">>>","r64",";","\n\n","return","h64",";"],"docstring_tokens":["Create","a","64","bits","murmur","hash","value","for","the","provided","data"],"prompt_tokens":[]}
{"code_tokens":["public","static","NullValidator","of","(",")","{","return","INSTANCE",";"],"docstring_tokens":["Return","the","instance","of","NullValidator"],"prompt_tokens":[]}
{"code_tokens":["@Override\n","public","void","write","(","LogRecord","record",")","throws","IOException","{","getLedgerWriter","(","record",".","getTransactionId","(",")",",","false",")",".","write","(","record",")",";"],"docstring_tokens":["Write","log","records","to","the","stream"],"prompt_tokens":[]}
{"code_tokens":["@Override\n","@Deprecated\n","public","int","writeBulk","(","List<LogRecord>","records",")","throws","IOException","{","return","getLedgerWriter","(","records",".","get","(","0",")",".","getTransactionId","(",")",",","false",")",".","writeBulk","(","records",")",";"],"docstring_tokens":["Write","edits","logs","operation","to","the","stream"],"prompt_tokens":[]}
{"code_tokens":["public","ServerConfiguration","setGcWaitTime","(","long","gcWaitTime",")","{","this",".","setProperty","(","GC_WAIT_TIME,","Long",".","toString","(","gcWaitTime",")",")",";","return","this",";"],"docstring_tokens":["Set","garbage","collection","wait","time"],"prompt_tokens":[]}
{"code_tokens":["public","boolean","isLocalScrubEnabled","(",")","{","return","this",".","getLocalScrubPeriod","(",")",">","0",";"],"docstring_tokens":["Get","whether","local","scrub","is","enabled"],"prompt_tokens":[]}
{"code_tokens":["public","ServerConfiguration","setFlushIntervalInBytes","(","long","flushInterval",")","{","this",".","setProperty","(","FLUSH_ENTRYLOG_INTERVAL_BYTES,","Long",".","toString","(","flushInterval",")",")",";","return","this",";"],"docstring_tokens":["Set","entry","log","flush","interval","in","bytes"],"prompt_tokens":[]}
{"code_tokens":["public","ServerConfiguration","setPageLimit","(","int","pageLimit",")","{","this",".","setProperty","(","PAGE_LIMIT,","pageLimit",")",";","return","this",";"],"docstring_tokens":["Set","limitation","number","of","index","pages","in","ledger","cache"],"prompt_tokens":[]}
{"code_tokens":["public","ServerConfiguration","setBookiePort","(","int","port",")","{","this",".","setProperty","(","BOOKIE_PORT,","Integer",".","toString","(","port",")",")",";","return","this",";"],"docstring_tokens":["Set","new","bookie","port","that","bookie","server","listen","on"],"prompt_tokens":[]}
{"code_tokens":["public","ServerConfiguration","setListeningInterface","(","String","iface",")","{","this",".","setProperty","(","LISTENING_INTERFACE,","iface",")",";","return","this",";"],"docstring_tokens":["Set","the","network","interface","that","the","bookie","should","listen","on"],"prompt_tokens":[]}
{"code_tokens":["public","ServerConfiguration","setAllowLoopback","(","boolean","allow",")","{","this",".","setProperty","(","ALLOW_LOOPBACK,","allow",")",";","return","this",";"],"docstring_tokens":["Configure","the","bookie","to","allow","loopback","interfaces","to","be","used","as","the","primary","bookie","interface"],"prompt_tokens":[]}
{"code_tokens":["public","ServerConfiguration","setAllowEphemeralPorts","(","boolean","allow",")","{","this",".","setProperty","(","ALLOW_EPHEMERAL_PORTS,","allow",")",";","return","this",";"],"docstring_tokens":["Configure","the","bookie","to","allow","using","an","ephemeral","port"],"prompt_tokens":[]}
{"code_tokens":["public","ServerConfiguration","setJournalDirName","(","String","journalDir",")","{","this",".","setProperty","(","JOURNAL_DIRS,","new","String[]","{","journalDir","}",")",";","return","this",";"],"docstring_tokens":["Set","dir","name","to","store","journal","files"],"prompt_tokens":[]}
{"code_tokens":["public","File[]","getIndexDirs","(",")","{","String[]","idxDirNames","=","getIndexDirNames","(",")",";","if","(","null","==","idxDirNames",")","{","return","null",";","}","File[]","idxDirs","=","new","File[idxDirNames",".","length]",";","for","(","int","i","=","0",";","i","<","idxDirNames",".","length",";","i++",")","{","idxDirs[i]","=","new","File","(","idxDirNames[i]",")",";","}","return","idxDirs",";"],"docstring_tokens":["Get","index","dir","to","store","ledger","index","files"],"prompt_tokens":[]}
{"code_tokens":["public","ServerConfiguration","setIsForceGCAllowWhenNoSpace","(","boolean","force",")","{","setProperty","(","IS_FORCE_GC_ALLOW_WHEN_NO_SPACE,","force",")",";","return","this",";"],"docstring_tokens":["Set","whether","force","GC","is","allowed","when","disk","full","or","almost","full"],"prompt_tokens":[]}
{"code_tokens":["public","ServerConfiguration","setPersistBookieStatusEnabled","(","boolean","enabled",")","{","setProperty","(","PERSIST_BOOKIE_STATUS_ENABLED,","enabled",")",";","return","this",";"],"docstring_tokens":["Whether","to","persist","the","bookie","status","so","that","when","bookie","server","restarts,","it","will","continue","using","the","previous","status"],"prompt_tokens":[]}
{"code_tokens":["public","boolean","isPersistBookieStatusEnabled","(",")","{","return","getBoolean","(","PERSIST_BOOKIE_STATUS_ENABLED,","false",")",";"],"docstring_tokens":["Get","whether","to","persist","the","bookie","status","so","that","when","bookie","server","restarts,","it","will","continue","using","the","previous","status"],"prompt_tokens":[]}
{"code_tokens":["public","ServerConfiguration","setDiskUsageThreshold","(","float","threshold",")","{","setProperty","(","DISK_USAGE_THRESHOLD,","threshold",")",";","return","this",";"],"docstring_tokens":["Set","the","Disk","free","space","threshold","as","a","fraction","of","the","total","after","which","disk","will","be","considered","as","full","during","disk","check"],"prompt_tokens":[]}
{"code_tokens":["public","ServerConfiguration","setAutoRecoveryDaemonEnabled","(","boolean","enabled",")","{","setProperty","(","AUTO_RECOVERY_DAEMON_ENABLED,","enabled",")",";","return","this",";"],"docstring_tokens":["Sets","that","whether","the","auto-recovery","service","can","start","along","with","Bookie","server","itself","or","not"],"prompt_tokens":[]}
{"code_tokens":["public","boolean","isAutoRecoveryDaemonEnabled","(",")","{","return","getBoolean","(","AUTO_RECOVERY_DAEMON_ENABLED,","false",")",";"],"docstring_tokens":["Get","whether","the","Bookie","itself","can","start","auto-recovery","service","also","or","not"],"prompt_tokens":[]}
{"code_tokens":["public","ServerConfiguration","setForceReadOnlyBookie","(","boolean","enabled",")","{","setProperty","(","FORCE_READ_ONLY_BOOKIE,","enabled",")",";","return","this",";"],"docstring_tokens":["Sets","that","whether","force","start","a","bookie","in","readonly","mode"],"prompt_tokens":[]}
{"code_tokens":["public","boolean","isForceReadOnlyBookie","(",")","{","return","getBoolean","(","FORCE_READ_ONLY_BOOKIE,","false",")",";"],"docstring_tokens":["Get","whether","the","Bookie","is","force","started","in","read","only","mode","or","not"],"prompt_tokens":[]}
{"code_tokens":["public","boolean","isEnableLocalTransport","(",")","{","return","getBoolean","(","ENABLE_LOCAL_TRANSPORT,","false",")",";"],"docstring_tokens":["Get","whether","to","listen","for","local","JVM","clients"],"prompt_tokens":[]}
{"code_tokens":["public","ServerConfiguration","setEnableLocalTransport","(","boolean","enableLocalTransport",")","{","setProperty","(","ENABLE_LOCAL_TRANSPORT,","enableLocalTransport",")",";","return","this",";"],"docstring_tokens":["Configure","the","bookie","to","listen","for","BookKeeper","clients","executed","on","the","local","JVM"],"prompt_tokens":[]}
{"code_tokens":["public","ServerConfiguration","setStatsProviderClass","(","Class<?","extends","StatsProvider>","providerClass",")","{","setProperty","(","STATS_PROVIDER_CLASS,","providerClass",".","getName","(",")",")",";","return","this",";"],"docstring_tokens":["Set","the","stats","provider","used","by","bookie"],"prompt_tokens":[]}
{"code_tokens":["public","ServerConfiguration","setMinUsableSizeForHighPriorityWrites","(","long","minUsableSizeForHighPriorityWrites",")","{","this",".","setProperty","(","MIN_USABLESIZE_FOR_HIGH_PRIORITY_WRITES,","minUsableSizeForHighPriorityWrites",")",";","return","this",";"],"docstring_tokens":["Sets","the","minimum","safe","usable","size","to","be","available","in","ledger","directory","for","Bookie","to","accept","high","priority","writes"],"prompt_tokens":[]}
{"code_tokens":["public","String[]","getExtraServerComponents","(",")","{","String","extraServerComponentsStr","=","getString","(","EXTRA_SERVER_COMPONENTS",")",";","if","(","Strings",".","isNullOrEmpty","(","extraServerComponentsStr",")",")","{","return","null",";","}","return","this",".","getStringArray","(","EXTRA_SERVER_COMPONENTS",")",";"],"docstring_tokens":["Get","the","extra","list","of","server","lifecycle","components","to","enable","on","a","bookie","server"],"prompt_tokens":[]}
{"code_tokens":["public","ServerConfiguration","setExtraServerComponents","(","String[]","componentClasses",")","{","this",".","setProperty","(","EXTRA_SERVER_COMPONENTS,","componentClasses",")",";","return","this",";"],"docstring_tokens":["Set","the","extra","list","of","server","lifecycle","components","to","enable","on","a","bookie","server"],"prompt_tokens":[]}
{"code_tokens":["public","static","InetSocketAddress","of","(","Endpoint","endpoint",")","{","return","new","InetSocketAddress","(","endpoint",".","getHostname","(",")",",","endpoint",".","getPort","(",")",")",";"],"docstring_tokens":["Get","the","inet","socket","address","for","the","provided","endpoint"],"prompt_tokens":[]}
{"code_tokens":["private","synchronized","boolean","haveDataToTransmit","(",")","{","if","(","!transmitResultUpdater",".","compareAndSet","(","this,","BKException",".","Code",".","OK,","BKException",".","Code",".","OK",")",")","{","//","Even","if","there","is","data","it","cannot","be","transmitted,","so","effectively","nothing","to","send\n","return","false",";","}","\n\n","return","(","recordSetWriter",".","getNumRecords","(",")",">","0",")",";"],"docstring_tokens":["Checks","if","there","is","any","data","to","transmit","so","that","the","periodic","flush","task","can","determine","if","there","is","anything","it","needs","to","do"],"prompt_tokens":[]}
{"code_tokens":["private","void","submitShutdownTask","(",")","{","executor",".","submit","(","new","Runnable","(",")","{","@Override\n","public","void","run","(",")","{","if","(","!running",".","compareAndSet","(","true,","false",")",")","{","return",";","}","\n\n","try","{","ledgerAuditorManager",".","close","(",")",";","}","catch","(","InterruptedException","ie",")","{","Thread",".","currentThread","(",")",".","interrupt","(",")",";","LOG",".","warn","(","\"InterruptedException","while","closing","ledger","auditor","manager\",","ie",")",";","}","catch","(","Exception","ke",")","{","LOG",".","error","(","\"Exception","while","closing","ledger","auditor","manager\",","ke",")",";","}","}","}",")",";"],"docstring_tokens":["Run","cleanup","operations","for","the","auditor","elector"],"prompt_tokens":[]}
{"code_tokens":["@SuppressWarnings","(","\"unchecked\"",")","Map<String,","String>","convertParams","(","HttpServerRequest","request",")","{","Map<String,","String>","map","=","new","HashMap<>","(",")",";","Iterator<Map",".","Entry<String,","String>>","iterator","=","request",".","params","(",")",".","iterator","(",")",";","while","(","iterator",".","hasNext","(",")",")","{","Map",".","Entry<String,","String>","entry","=","iterator",".","next","(",")",";","map",".","put","(","entry",".","getKey","(",")",",","entry",".","getValue","(",")",")",";","}","return","map",";"],"docstring_tokens":["Convert","http","request","parameters","to","a","map"],"prompt_tokens":[]}
{"code_tokens":["HttpServer",".","Method","convertMethod","(","HttpServerRequest","request",")","{","switch","(","request",".","method","(",")",")","{","case","POST:\n","return","HttpServer",".","Method",".","POST",";","case","DELETE:\n","return","HttpServer",".","Method",".","DELETE",";","case","PUT:\n","return","HttpServer",".","Method",".","PUT",";","default:\n","return","HttpServer",".","Method",".","GET",";","}"],"docstring_tokens":["Convert","http","request","method","to","the","method","that","can","be","recognized","by","HttpServer"],"prompt_tokens":[]}
{"code_tokens":["public","void","put","(","String","path,","LogSegmentMetadata","segment",")","{","if","(","isCacheEnabled",")","{","cache",".","put","(","path,","segment",")",";","}"],"docstring_tokens":["Add","the","log","segment","of","path","to","the","cache"],"prompt_tokens":[]}
{"code_tokens":["public","void","invalidate","(","String","path",")","{","if","(","isCacheEnabled",")","{","cache",".","invalidate","(","path",")",";","}"],"docstring_tokens":["Invalid","the","cache","entry","associated","with","path"],"prompt_tokens":[]}
{"code_tokens":["public","void","replicateLedgerFragment","(","LedgerHandle","lh,\n","final","LedgerFragment","ledgerFragment,\n","final","BiConsumer<Long,","Long>","onReadEntryFailureCallback",")","throws","InterruptedException,","BKException","{","Optional<Set<BookieId>>","excludedBookies","=","Optional",".","empty","(",")",";","Map<Integer,","BookieId>","targetBookieAddresses","=\n","getReplacementBookiesByIndexes","(","lh,","ledgerFragment",".","getEnsemble","(",")",",\n","ledgerFragment",".","getBookiesIndexes","(",")",",","excludedBookies",")",";","replicateLedgerFragment","(","lh,","ledgerFragment,","targetBookieAddresses,","onReadEntryFailureCallback",")",";"],"docstring_tokens":["Replicate","the","Ledger","fragment","to","target","Bookie","passed"],"prompt_tokens":[]}
{"code_tokens":["public","static","boolean","format","(","ServerConfiguration","conf,\n","boolean","isInteractive,","boolean","force",")","throws","Exception","{","return","runFunctionWithMetadataBookieDriver","(","conf,","driver","->","{","try","{","boolean","ledgerRootExists","=","driver",".","getRegistrationManager","(",")",".","prepareFormat","(",")",";","\n\n","//","If","old","data","was","there","then","confirm","with","admin",".","boolean","doFormat","=","true",";","if","(","ledgerRootExists",")","{","if","(","!isInteractive",")","{","//","If","non","interactive","and","force","is","set,","then","delete","old","data",".","doFormat","=","force",";","}","else","{","//","Confirm","with","the","admin",".","doFormat","=","IOUtils\n",".","confirmPrompt","(","\"Ledger","root","already","exists",".","\"\n","+","\"Are","you","sure","to","format","bookkeeper","metadata?","\"\n","+","\"This","may","cause","data","loss",".","\"",")",";","}","}","\n\n","if","(","!doFormat",")","{","return","false",";","}","\n\n","driver",".","getLedgerManagerFactory","(",")",".","format","(","conf,\n","driver",".","getLayoutManager","(",")",")",";","\n\n","return","driver",".","getRegistrationManager","(",")",".","format","(",")",";","}","catch","(","Exception","e",")","{","throw","new","UncheckedExecutionException","(","e",".","getMessage","(",")",",","e",")",";","}","}",")",";"],"docstring_tokens":["Format","the","BookKeeper","metadata","in","zookeeper"],"prompt_tokens":[]}
{"code_tokens":["public","static","boolean","initNewCluster","(","ServerConfiguration","conf",")","throws","Exception","{","return","runFunctionWithRegistrationManager","(","conf,","rm","->","{","try","{","return","rm",".","initNewCluster","(",")",";","}","catch","(","Exception","e",")","{","throw","new","UncheckedExecutionException","(","e",".","getMessage","(",")",",","e",")",";","}","}",")",";"],"docstring_tokens":["Intializes","new","cluster","by","creating","required","znodes","for","the","cluster"],"prompt_tokens":[]}
{"code_tokens":["public","static","boolean","initBookie","(","ServerConfiguration","conf",")","throws","Exception","{","/*\n","*","make","sure","that","journalDirs,","ledgerDirs","and","indexDirs","are","empty\n","*/\n","File[]","journalDirs","=","conf",".","getJournalDirs","(",")",";","if","(","!validateDirectoriesAreEmpty","(","journalDirs,","\"JournalDir\"",")",")","{","return","false",";","}","\n\n","File[]","ledgerDirs","=","conf",".","getLedgerDirs","(",")",";","if","(","!validateDirectoriesAreEmpty","(","ledgerDirs,","\"LedgerDir\"",")",")","{","return","false",";","}","\n\n","File[]","indexDirs","=","conf",".","getIndexDirs","(",")",";","if","(","indexDirs","!=","null",")","{","if","(","!validateDirectoriesAreEmpty","(","indexDirs,","\"IndexDir\"",")",")","{","return","false",";","}","}","\n\n","return","runFunctionWithRegistrationManager","(","conf,","rm","->","{","try","{","/*\n","*","make","sure","that","there","is","no","bookie","registered","with","the","same\n","*","bookieid","and","the","cookie","for","the","same","bookieid","is","not","existing",".","*/\n","BookieId","bookieId","=","Bookie",".","getBookieId","(","conf",")",";","if","(","rm",".","isBookieRegistered","(","bookieId",")",")","{","LOG",".","error","(","\"Bookie","with","bookieId:","{","}","is","still","registered,","\"\n","+","\"If","this","node","is","running","bookie","process,","try","stopping","it","first",".","\",","bookieId",")",";","return","false",";","}","\n\n","try","{","rm",".","readCookie","(","bookieId",")",";","LOG",".","error","(","\"Cookie","still","exists","in","the","ZK","for","this","bookie:","{","}",",","try","formatting","the","bookie\",","bookieId",")",";","return","false",";","}","catch","(","BookieException",".","CookieNotFoundException","nfe",")","{","//","it","is","expected","for","readCookie","to","fail","with\n","//","BookieException",".","CookieNotFoundException\n","}","return","true",";","}","catch","(","Exception","e",")","{","throw","new","UncheckedExecutionException","(","e",".","getMessage","(",")",",","e",")",";","}","}",")",";"],"docstring_tokens":["Initializes","bookie,","by","making","sure","that","the","journalDir,","ledgerDirs","and","indexDirs","are","empty","and","there","is","no","registered","Bookie","with","this","BookieId"],"prompt_tokens":[]}
{"code_tokens":["public","CompletableFuture<AvailabilityOfEntriesOfLedger>","asyncGetListOfEntriesOfLedger","(","BookieId","address,\n","long","ledgerId",")","{","return","bkc",".","getBookieClient","(",")",".","getListOfEntriesOfLedger","(","address,","ledgerId",")",";"],"docstring_tokens":["Makes","async","request","for","getting","list","of","entries","of","ledger","from","a","bookie","and","returns","Future","for","the","result"],"prompt_tokens":[]}
{"code_tokens":["public","static","boolean","isRecoverableException","(","int","rc",")","{","return","KeeperException",".","Code",".","CONNECTIONLOSS",".","intValue","(",")","==","rc\n","||","KeeperException",".","Code",".","OPERATIONTIMEOUT",".","intValue","(",")","==","rc\n","||","KeeperException",".","Code",".","SESSIONMOVED",".","intValue","(",")","==","rc\n","||","KeeperException",".","Code",".","SESSIONEXPIRED",".","intValue","(",")","==","rc",";"],"docstring_tokens":["Check","whether","the","given","result","code","is","recoverable","by","retry"],"prompt_tokens":[]}
{"code_tokens":["public","CompletableFuture<Long>","asyncGetLogRecordCount","(","final","DLSN","beginDLSN",")","{","return","streamMetadataStore",".","logExists","(","logMetadata",".","getUri","(",")",",","logMetadata",".","getLogName","(",")",")",".","thenCompose","(","new","Function<Void,","CompletableFuture<Long>>","(",")","{","public","CompletableFuture<Long>","apply","(","Void","done",")","{","\n\n","return","readLogSegmentsFromStore","(","LogSegmentMetadata",".","COMPARATOR,\n","LogSegmentFilter",".","DEFAULT_FILTER,\n","null\n",")",".","thenCompose","(","new","Function<Versioned<List<LogSegmentMetadata>>,","CompletableFuture<Long>>","(",")","{","public","CompletableFuture<Long>","apply","(","Versioned<List<LogSegmentMetadata>>","ledgerList",")","{","\n\n","List<CompletableFuture<Long>>","futureCounts","=\n","Lists",".","newArrayListWithExpectedSize","(","ledgerList",".","getValue","(",")",".","size","(",")",")",";","for","(","LogSegmentMetadata","ledger",":","ledgerList",".","getValue","(",")",")","{","if","(","ledger",".","getLogSegmentSequenceNumber","(",")",">=","beginDLSN",".","getLogSegmentSequenceNo","(",")",")","{","futureCounts",".","add","(","asyncGetLogRecordCount","(","ledger,","beginDLSN",")",")",";","}","}","return","FutureUtils",".","collect","(","futureCounts",")",".","thenApply","(","counts","->","sum","(","counts",")",")",";","}","}",")",";","}","}",")",";"],"docstring_tokens":["Get","a","count","of","records","between","beginDLSN","and","the","end","of","the","stream"],"prompt_tokens":[]}
{"code_tokens":["public","void","disconnect","(",")","{","disconnect","(","true",")",";"],"docstring_tokens":["Disconnects","the","bookie","client"],"prompt_tokens":[]}
{"code_tokens":["public","void","close","(",")","{","close","(","true",")",";"],"docstring_tokens":["Closes","the","bookie","client","permanently"],"prompt_tokens":[]}
{"code_tokens":["@Override\n","public","void","channelInactive","(","ChannelHandlerContext","ctx",")","throws","Exception","{","LOG",".","info","(","\"Disconnected","from","bookie","channel","{","}","\",","ctx",".","channel","(",")",")",";","if","(","ctx",".","channel","(",")","!=","null",")","{","closeChannel","(","ctx",".","channel","(",")",")",";","if","(","ctx",".","channel","(",")",".","pipeline","(",")",".","get","(","SslHandler",".","class",")","!=","null",")","{","activeTlsChannelCounter",".","dec","(",")",";","}","else","{","activeNonTlsChannelCounter",".","dec","(",")",";","}","}","\n\n","errorOutOutstandingEntries","(","BKException",".","Code",".","BookieHandleNotAvailableException",")",";","errorOutPendingOps","(","BKException",".","Code",".","BookieHandleNotAvailableException",")",";","\n\n","synchronized","(","this",")","{","if","(","this",".","channel","==","ctx",".","channel","(",")","&&","state","!=","ConnectionState",".","CLOSED",")","{","state","=","ConnectionState",".","DISCONNECTED",";","}","}","\n\n","//","we","don't","want","to","reconnect","right","away",".","If","someone","sends","a","request","to\n","//","this","address,","we","will","reconnect","."],"docstring_tokens":["If","our","channel","has","disconnected,","we","just","error","out","the","pending","entries"],"prompt_tokens":[]}
{"code_tokens":["private","static","CachedFileInfo","tryRetainFileInfo","(","CachedFileInfo","fi",")","throws","IOException","{","boolean","retained","=","fi",".","tryRetain","(",")",";","if","(","!retained",")","{","throw","new","IOException","(","\"FileInfo","\"","+","fi","+","\"","is","already","marked","dead\"",")",";","}","else","if","(","fi",".","isDeleted","(",")",")","{","throw","new","Bookie",".","NoLedgerException","(","fi",".","ledgerId",")",";","}","return","fi",";"],"docstring_tokens":["This","method","should","be","under","`lock`","of","FileInfoBackingCache"],"prompt_tokens":[]}
{"code_tokens":["private","Chunk","getCurrentChunk","(",")","{","while","(","true",")","{","//","Try","to","get","the","chunk\n","Chunk","c","=","curChunk",".","get","(",")",";","if","(","c","!=","null",")","{","return","c",";","}","\n\n","//","No","current","chunk,","so","we","want","to","allocate","one",".","We","race\n","//","against","other","allocators","to","CAS","in","an","uninitialized","chunk\n","//","(","which","is","cheap","to","allocate",")","c","=","new","Chunk","(","chunkSize",")",";","if","(","curChunk",".","compareAndSet","(","null,","c",")",")","{","c",".","init","(",")",";","return","c",";","}","//","lost","race\n","}"],"docstring_tokens":["Get","the","current","chunk,","or,","if","there","is","no","current","chunk,","allocate","a","new","one","from","the","JVM"],"prompt_tokens":[]}
{"code_tokens":["private","void","rescueAllocator","(","final","SimpleLedgerAllocator","ledgerAllocator",")","throws","DLInterruptedException","{","SimpleLedgerAllocator","oldAllocator",";","synchronized","(","this",")","{","oldAllocator","=","rescueMap",".","put","(","ledgerAllocator",".","allocatePath,","ledgerAllocator",")",";","}","if","(","oldAllocator","!=","null",")","{","logger",".","info","(","\"ledger","allocator","{","}","is","being","rescued",".","\",","ledgerAllocator",".","allocatePath",")",";","return",";","}","try","{","zkc",".","get","(",")",".","getData","(","ledgerAllocator",".","allocatePath,","false,","new","AsyncCallback",".","DataCallback","(",")","{","@Override\n","public","void","processResult","(","int","rc,","String","path,","Object","ctx,","byte[]","data,","Stat","stat",")","{","boolean","retry","=","false",";","SimpleLedgerAllocator","newAllocator","=","null",";","if","(","KeeperException",".","Code",".","OK",".","intValue","(",")","==","rc",")","{","Versioned<byte[]>","allocatorData","=\n","new","Versioned<byte[]>","(","data,","new","LongVersion","(","stat",".","getVersion","(",")",")",")",";","logger",".","info","(","\"Rescuing","ledger","allocator","{","}",".","\",","path",")",";","newAllocator","=","new","SimpleLedgerAllocator","(","path,","allocatorData,","quorumConfigProvider,","zkc,","bkc",")",";","newAllocator",".","start","(",")",";","logger",".","info","(","\"Rescued","ledger","allocator","{","}",".","\",","path",")",";","}","else","if","(","KeeperException",".","Code",".","NONODE",".","intValue","(",")","==","rc",")","{","logger",".","info","(","\"Ledger","allocator","{","}","doesn't","exist,","skip","rescuing","it",".","\",","path",")",";","}","else","{","retry","=","true",";","}","synchronized","(","LedgerAllocatorPool",".","this",")","{","rescueMap",".","remove","(","ledgerAllocator",".","allocatePath",")",";","if","(","null","!=","newAllocator",")","{","pendingList",".","addLast","(","newAllocator",")",";","}","}","if","(","retry",")","{","scheduleAllocatorRescue","(","ledgerAllocator",")",";","}","}","}",",","null",")",";","}","catch","(","InterruptedException","ie",")","{","Thread",".","currentThread","(",")",".","interrupt","(",")",";","logger",".","warn","(","\"Interrupted","on","rescuing","ledger","allocator","{","}",":","\",","ledgerAllocator",".","allocatePath,","ie",")",";","synchronized","(","LedgerAllocatorPool",".","this",")","{","rescueMap",".","remove","(","ledgerAllocator",".","allocatePath",")",";","}","throw","new","DLInterruptedException","(","\"Interrupted","on","rescuing","ledger","allocator","\"\n","+","ledgerAllocator",".","allocatePath,","ie",")",";","}","catch","(","IOException","ioe",")","{","logger",".","warn","(","\"Failed","to","rescue","ledger","allocator","{","}",",","retry","rescuing","it","later",":","\",\n","ledgerAllocator",".","allocatePath,","ioe",")",";","synchronized","(","LedgerAllocatorPool",".","this",")","{","rescueMap",".","remove","(","ledgerAllocator",".","allocatePath",")",";","}","scheduleAllocatorRescue","(","ledgerAllocator",")",";","}"],"docstring_tokens":["Rescue","a","ledger","allocator","from","an","ERROR","state"],"prompt_tokens":[]}
{"code_tokens":["@Deprecated\n","public","static","boolean","canHandle","(","Table","table",")","{","if","(","table","instanceof","TransientTable",")","{","//","CALCITE-3673:","TransientTable","can't","be","implemented","with","Enumerable\n","return","false",";","}","//","See","org",".","apache",".","calcite",".","prepare",".","RelOptTableImpl",".","getClassExpressionFunction\n","return","table","instanceof","QueryableTable\n","||","table","instanceof","FilterableTable\n","||","table","instanceof","ProjectableFilterableTable\n","||","table","instanceof","ScannableTable",";"],"docstring_tokens":["Returns","whether","EnumerableTableScan","can","generate","code","to","handle","a","particular","variant","of","the","Table","SPI"],"prompt_tokens":[]}
{"code_tokens":["public","boolean","supportsApproxCountDistinct","(",")","{","return","false",";"],"docstring_tokens":["Returns","whether","this","dialect","supports","APPROX_COUNT_DISTINCT","functions"],"prompt_tokens":[]}
{"code_tokens":["public","boolean","supportsDataType","(","RelDataType","type",")","{","return","true",";"],"docstring_tokens":["Returns","whether","this","dialect","supports","a","given","type"],"prompt_tokens":[]}
{"code_tokens":["public","boolean","supportsJoinType","(","JoinRelType","joinType",")","{","return","true",";"],"docstring_tokens":["Returns","whether","this","dialect","support","the","specified","type","of","join"],"prompt_tokens":[]}
{"code_tokens":["protected","SqlNode","parseQuery","(","String","sql",")","{","SqlNode","node",";","try","{","node","=","SqlParser",".","create","(","sql",")",".","parseQuery","(",")",";","}","catch","(","SqlParseException","e",")","{","String","message","=","\"Received","error","while","parsing","SQL","'\"","+","sql","+","\"'\"\n","+","\"",";","error","is:\\n\"\n","+","e",".","toString","(",")",";","throw","new","AssertionError","(","message",")",";","}","return","node",";"],"docstring_tokens":["Parses","a","SQL","query"],"prompt_tokens":[]}
{"code_tokens":["public","Enumerable<Object>","query","(","final","TableReaderFactory","tableReaderFactory,\n","final","List<Map",".","Entry<String,","Class>>","fields,\n","final","List<Map",".","Entry<String,","String>>","selectFields,\n","final","IndexCondition","condition,\n","final","Boolean","ascOrder",")","{","final","QueryType","queryType","=","condition",".","getQueryType","(",")",";","final","List<Object>","pointQueryKey","=","condition",".","getPointQueryKey","(",")",";","final","ComparisonOperator","rangeQueryLowerOp","=","condition",".","getRangeQueryLowerOp","(",")",";","final","List<Object>","rangeQueryLowerKey","=","condition",".","getRangeQueryLowerKey","(",")",";","final","ComparisonOperator","rangeQueryUpperOp","=","condition",".","getRangeQueryUpperOp","(",")",";","final","List<Object>","rangeQueryUpperKey","=","condition",".","getRangeQueryUpperKey","(",")",";","final","String","indexName","=","condition",".","getIndexName","(",")",";","\n\n","//","Build","the","type","of","the","resulting","row","based","on","the","provided","fields\n","final","RelDataTypeFactory","typeFactory","=\n","new","SqlTypeFactoryImpl","(","RelDataTypeSystem",".","DEFAULT",")",";","final","RelDataTypeFactory",".","Builder","fieldInfo","=","typeFactory",".","builder","(",")",";","final","RelDataType","rowType","=","getRowType","(","typeFactory",")",";","\n\n","Function1<String,","Void>","addField","=","fieldName","->","{","RelDataType","relDataType","=\n","rowType",".","getField","(","fieldName,","true,","false",")",".","getType","(",")",";","fieldInfo",".","add","(","fieldName,","relDataType",")",".","nullable","(","relDataType",".","isNullable","(",")",")",";","return","null",";","}",";","\n\n","List<String>","selectedColumnNames","=","new","ArrayList<>","(","selectFields",".","size","(",")",")",";","if","(","selectFields",".","isEmpty","(",")",")","{","for","(","Map",".","Entry<String,","Class>","field",":","fields",")","{","addField",".","apply","(","field",".","getKey","(",")",")",";","}","}","else","{","for","(","Map",".","Entry<String,","String>","field",":","selectFields",")","{","addField",".","apply","(","field",".","getKey","(",")",")",";","selectedColumnNames",".","add","(","field",".","getKey","(",")",")",";","}","}","\n\n","final","RelProtoDataType","resultRowType","=","RelDataTypeImpl",".","proto","(","fieldInfo",".","build","(",")",")",";","\n\n","TableReader","tableReader","=","tableReaderFactory",".","createTableReader","(","tableName",")",";","tableReader",".","open","(",")",";","return","new","AbstractEnumerable<Object>","(",")","{","@Override","public","Enumerator<Object>","enumerator","(",")","{","Iterator<GenericRecord>","resultIterator",";","LOGGER",".","debug","(","\"Create","query","iterator,","queryType=","{","}",",","indexName=","{","}",",","\"\n","+","\"pointQueryKey=","{","}",",","projection=","{","}",",","rangeQueryKey=","{","}","{","}","AND","{","}","{","}",",","\"\n","+","\"ascOrder=","{","}","\",","queryType,","indexName,","pointQueryKey,\n","selectedColumnNames,","rangeQueryLowerKey,","rangeQueryLowerOp,\n","rangeQueryUpperKey,","rangeQueryUpperOp,","ascOrder",")",";","switch","(","queryType",")","{","case","PK_POINT_QUERY:\n","resultIterator","=\n","RecordIterator",".","create","(","tableReader\n",".","queryByPrimaryKey","(","pointQueryKey,","selectedColumnNames",")",")",";","break",";","case","PK_RANGE_QUERY:\n","resultIterator","=","tableReader",".","getRangeQueryIterator","(","rangeQueryLowerKey,","rangeQueryLowerOp,","rangeQueryUpperKey,","rangeQueryUpperOp,\n","selectedColumnNames,","ascOrder",")",";","break",";","case","SK_POINT_QUERY:\n","resultIterator","=","tableReader",".","getRecordIteratorBySk","(","indexName,\n","pointQueryKey,","ComparisonOperator",".","GTE,","pointQueryKey,","ComparisonOperator",".","LTE,\n","selectedColumnNames,","ascOrder",")",";","break",";","case","SK_RANGE_QUERY:\n","case","SK_FULL_SCAN:\n","resultIterator","=","tableReader",".","getRecordIteratorBySk","(","indexName,\n","rangeQueryLowerKey,","rangeQueryLowerOp,","rangeQueryUpperKey,","rangeQueryUpperOp,\n","selectedColumnNames,","ascOrder",")",";","break",";","case","PK_FULL_SCAN:\n","resultIterator","=\n","tableReader",".","getQueryAllIterator","(","selectedColumnNames,","ascOrder",")",";","break",";","default:\n","throw","new","AssertionError","(","\"query","type","is","invalid\"",")",";","}","\n\n","RelDataType","rowType","=","resultRowType",".","apply","(","typeFactory",")",";","return","new","InnodbEnumerator","(","resultIterator,","rowType",")","{","@Override","public","void","close","(",")","{","super",".","close","(",")",";","tableReader",".","close","(",")",";","}","}",";","}","}",";"],"docstring_tokens":["Executes","a","query","on","the","underlying","InnoDB","table"],"prompt_tokens":[]}
{"code_tokens":["public","final","SqlValidatorFixture","sql","(","String","sql",")","{","return","fixture","(",")",".","withSql","(","sql",")",";"],"docstring_tokens":["Creates","a","test","context","with","a","SQL","query"],"prompt_tokens":[]}
{"code_tokens":["public","final","SqlValidatorFixture","expr","(","String","sql",")","{","return","fixture","(",")",".","withExpr","(","sql",")",";"],"docstring_tokens":["Creates","a","test","context","with","a","SQL","expression"],"prompt_tokens":[]}
{"code_tokens":["public","final","boolean","containsOver","(",")","{","return","RexOver",".","containsOver","(","condition",")",";"],"docstring_tokens":["Returns","whether","this","Filter","contains","any","windowed-aggregate","functions"],"prompt_tokens":[]}
{"code_tokens":["public","List<RelHint>","apply","(","List<RelHint>","hints,","RelNode","rel",")","{","return","hints",".","stream","(",")",".","filter","(","relHint","->","canApply","(","relHint,","rel",")",")",".","collect","(","Collectors",".","toList","(",")",")",";"],"docstring_tokens":["Applies","this","HintStrategyTable","hint","strategies","to","the","given","relational","expression","and","the","hints"],"prompt_tokens":[]}
{"code_tokens":["public","boolean","validateHint","(","RelHint","hint",")","{","final","Key","key","=","Key",".","of","(","hint",".","hintName",")",";","boolean","hintExists","=","this",".","errorHandler",".","check","(","this",".","strategies",".","containsKey","(","key",")",",\n","\"Hint:","{","}","should","be","registered","in","the","{","}","\",\n","hint",".","hintName,\n","this",".","getClass","(",")",".","getSimpleName","(",")",")",";","if","(","!hintExists",")","{","return","false",";","}","final","HintStrategy","strategy","=","strategies",".","get","(","key",")",";","if","(","strategy","!=","null","&&","strategy",".","hintOptionChecker","!=","null",")","{","return","strategy",".","hintOptionChecker",".","checkOptions","(","hint,","this",".","errorHandler",")",";","}","return","true",";"],"docstring_tokens":["Checks","if","the","given","hint","is","valid"],"prompt_tokens":[]}
{"code_tokens":["public","boolean","isRuleExcluded","(","Hintable","hintable,","RelOptRule","rule",")","{","final","List<RelHint>","hints","=","hintable",".","getHints","(",")",";","if","(","hints",".","size","(",")","==","0",")","{","return","false",";","}","\n\n","for","(","RelHint","hint",":","hints",")","{","final","Key","key","=","Key",".","of","(","hint",".","hintName",")",";","assert","this",".","strategies",".","containsKey","(","key",")",":","\"hint","\"","+","hint",".","hintName","+","\"","must","be","present\"",";","final","HintStrategy","strategy","=","strategies",".","get","(","key",")",";","if","(","strategy",".","excludedRules",".","contains","(","rule",")",")","{","return","isDesiredConversionPossible","(","strategy",".","converterRules,","hintable",")",";","}","}","\n\n","return","false",";"],"docstring_tokens":["Returns","whether","the","hintable","has","hints","that","imply","the","given","rule","should","be","excluded"],"prompt_tokens":[]}
{"code_tokens":["private","static","boolean","isDesiredConversionPossible","(","Set<ConverterRule>","converterRules,\n","Hintable","hintable",")","{","//","If","no","converter","rules","are","specified,","we","assume","the","conversion","is","possible",".","return","converterRules",".","size","(",")","==","0\n","||","converterRules",".","stream","(",")",".","anyMatch","(","converterRule","->","converterRule",".","convert","(","(","RelNode",")","hintable",")","!=","null",")",";"],"docstring_tokens":["Returns","whether","the","hintable","has","hints","that","imply","the","given","hintable","can","make","conversion","successfully"],"prompt_tokens":[]}
{"code_tokens":["public","static","Builder","builder","(",")","{","return","new","Builder","(",")",";"],"docstring_tokens":["Returns","a","HintStrategyTable","builder"],"prompt_tokens":[]}
{"code_tokens":["private","static","CassandraResource","getOrCreate","(","ExtensionContext","context",")","{","//","same","cassandra","instance","should","be","shared","across","all","extension","instances\n","return","context",".","getRoot","(",")",".","getStore","(","NAMESPACE",")",".","getOrComputeIfAbsent","(","KEY,","key","->","new","CassandraResource","(",")",",","CassandraResource",".","class",")",";"],"docstring_tokens":["Registers","a","Cassandra","resource","in","root","context,","so","it","can","be","shared","with","other","tests"],"prompt_tokens":[]}
{"code_tokens":["public","String","asString","(",")","{","final","Map<String,","@Nullable","Object>","map","=","jsonBuilder",".","map","(",")",";","map",".","put","(","\"rels\",","relList",")",";","return","jsonBuilder",".","toJsonString","(","map",")",";"],"docstring_tokens":["Returns","a","JSON","string","describing","the","relational","expressions","that","were","just","explained"],"prompt_tokens":[]}
{"code_tokens":["public","static","RelDistribution","hash","(","Collection<?","extends","Number>","numbers",")","{","ImmutableIntList","list","=","normalizeKeys","(","numbers",")",";","return","of","(","RelDistribution",".","Type",".","HASH_DISTRIBUTED,","list",")",";"],"docstring_tokens":["Creates","a","hash","distribution"],"prompt_tokens":[]}
{"code_tokens":["private","static","ImmutableIntList","normalizeKeys","(","Collection<?","extends","Number>","keys",")","{","ImmutableIntList","list","=","ImmutableIntList",".","copyOf","(","keys",")",";","if","(","list",".","size","(",")",">","1\n","&&","!Ordering",".","natural","(",")",".","isOrdered","(","list",")",")","{","list","=","ImmutableIntList",".","copyOf","(","Ordering",".","natural","(",")",".","sortedCopy","(","list",")",")",";","}","return","list",";"],"docstring_tokens":["Creates","ordered","immutable","copy","of","keys","collection"],"prompt_tokens":[]}
{"code_tokens":["public","void","setDataSource","(","String","jdbcURL,","Properties","jdbcProps",")","{","this",".","jdbcURL","=","jdbcURL",";","this",".","jdbcProps","=","jdbcProps",";"],"docstring_tokens":["Sets","the","jdbc","data","source","for","executing","the","command","threads"],"prompt_tokens":[]}
{"code_tokens":["public","boolean","failed","(",")","{","return","!failedThreads",".","isEmpty","(",")",";"],"docstring_tokens":["Returns","whether","any","test","thread","failed"],"prompt_tokens":[]}
{"code_tokens":["void","printCommands","(","PrintStream","out,\n","Integer","threadId",")","{","int","stepNumber","=","1",";","for","(","ConcurrentTestCommand","command",":","getCommandIterable","(","threadId",")",")","{","out",".","println","(","\"\\tStep","\"","+","stepNumber++\n","+","\":","\"","+","command",".","getClass","(",")",".","getName","(",")",")",";","}"],"docstring_tokens":["Prints","a","description","of","the","commands","to","be","executed","for","a","given","thread"],"prompt_tokens":[]}
{"code_tokens":["public","static","<T>","ComparableList<T>","of","(",")","{","//noinspection","unchecked\n","return","COMPARABLE_EMPTY_LIST",";"],"docstring_tokens":["Creates","a","flat","list","with","0","elements"],"prompt_tokens":[]}
{"code_tokens":["public","static","<T>","List<T>","of","(","T","t0",")","{","return","new","Flat1List<>","(","t0",")",";"],"docstring_tokens":["Creates","a","flat","list","with","1","element"],"prompt_tokens":[]}
{"code_tokens":["public","static","<T>","List<T>","of","(","T","t0,","T","t1",")","{","return","new","Flat2List<>","(","t0,","t1",")",";"],"docstring_tokens":["Creates","a","flat","list","with","2","elements"],"prompt_tokens":[]}
{"code_tokens":["public","static","<T>","List<T>","of","(","T","t0,","T","t1,","T","t2",")","{","return","new","Flat3List<>","(","t0,","t1,","t2",")",";"],"docstring_tokens":["Creates","a","flat","list","with","3","elements"],"prompt_tokens":[]}
{"code_tokens":["public","static","<T>","List<T>","of","(","T","t0,","T","t1,","T","t2,","T","t3",")","{","return","new","Flat4List<>","(","t0,","t1,","t2,","t3",")",";"],"docstring_tokens":["Creates","a","flat","list","with","4","elements"],"prompt_tokens":[]}
{"code_tokens":["public","static","<T>","List<T>","of","(","T","t0,","T","t1,","T","t2,","T","t3,","T","t4",")","{","return","new","Flat5List<>","(","t0,","t1,","t2,","t3,","t4",")",";"],"docstring_tokens":["Creates","a","flat","list","with","6","elements"],"prompt_tokens":[]}
{"code_tokens":["public","static","boolean","isStar","(","List<RexNode>","exps,","RelDataType","inputRowType,\n","RelDataType","projectRowType",")","{","assert","exps",".","size","(",")","==","projectRowType",".","getFieldCount","(",")",";","int","i","=","0",";","for","(","RexNode","ref",":","exps",")","{","if","(","!","(","ref","instanceof","RexInputRef",")",")","{","return","false",";","}","else","if","(","(","(","RexInputRef",")","ref",")",".","getIndex","(",")","!=","i++",")","{","return","false",";","}","}","return","i","==","inputRowType",".","getFieldCount","(",")","&&","inputRowType",".","getFieldNames","(",")",".","equals","(","projectRowType",".","getFieldNames","(",")",")",";"],"docstring_tokens":["Returns","whether","a","list","of","expressions","projects","all","fields,","in","order,","from","the","input,","with","the","same","names"],"prompt_tokens":[]}
{"code_tokens":["private","boolean","requiresAlias","(","SqlNode","node",")","{","if","(","!dialect",".","requiresAliasForFromItems","(",")",")","{","return","false",";","}","switch","(","node",".","getKind","(",")",")","{","case","IDENTIFIER:\n","return","!dialect",".","hasImplicitTableAlias","(",")",";","case","AS:\n","case","JOIN:\n","case","EXPLICIT_TABLE:\n","return","false",";","default:\n","return","true",";","}"],"docstring_tokens":["Returns","whether","we","need","to","add","an","alias","if","this","node","is","to","be","the","FROM","clause","of","a","SELECT"],"prompt_tokens":[]}
{"code_tokens":["public","static","SqlKeyConstraint","unique","(","SqlParserPos","pos,","SqlIdentifier","name,\n","SqlNodeList","columnList",")","{","return","new","SqlKeyConstraint","(","pos,","name,","columnList",")",";"],"docstring_tokens":["Creates","a","UNIQUE","constraint"],"prompt_tokens":[]}
{"code_tokens":["public","static","SqlKeyConstraint","primary","(","SqlParserPos","pos,","SqlIdentifier","name,\n","SqlNodeList","columnList",")","{","return","new","SqlKeyConstraint","(","pos,","name,","columnList",")","{","@Override","public","SqlOperator","getOperator","(",")","{","return","PRIMARY",";","}","}",";"],"docstring_tokens":["Creates","a","PRIMARY","KEY","constraint"],"prompt_tokens":[]}
{"code_tokens":["static","SqlUserDefinedFunction","createPigBagUDF","(","ImmutableList<RexNode>","operands",")","{","final","SqlOperandMetadata","operandMetadata","=\n","OperandTypes",".","operandMetadata","(","getTypeFamilies","(","operands",")",",\n","typeFactory","->","getRelDataTypes","(","operands",")",",","i","->","\"arg\"","+","i,\n","i","->","false",")",";","return","new","PigUserDefinedFunction","(","\"PIG_BAG\",\n","infer","(","PigRelSqlUdfs",".","PIG_BAG_FUNC",")",",","operandMetadata,\n","PigRelSqlUdfs",".","PIG_BAG_FUNC",")",";"],"docstring_tokens":["Creates","a","Pig","DataBag","from","a","list","of","relational","operands"],"prompt_tokens":[]}
{"code_tokens":["private","static","RelDataType","getRelDataType","(","ScalarFunction","function",")","{","final","JavaTypeFactory","typeFactory","=","TYPE_FACTORY",";","final","RelDataType","type","=","function",".","getReturnType","(","typeFactory",")",";","if","(","type","instanceof","RelDataTypeFactoryImpl",".","JavaType\n","&&","(","(","RelDataTypeFactoryImpl",".","JavaType",")","type",")",".","getJavaClass","(",")","==","Object",".","class",")","{","return","typeFactory",".","createTypeWithNullability","(","typeFactory",".","createSqlType","(","SqlTypeName",".","ANY",")",",","true",")",";","}","return","typeFactory",".","toSql","(","type",")",";"],"docstring_tokens":["Gets","the","return","data","type","for","a","given","function"],"prompt_tokens":[]}
{"code_tokens":["public","static","Tuple","buildTuple","(","Object",".",".",".","elements",")","{","return","TupleFactory",".","getInstance","(",")",".","newTuple","(","Arrays",".","asList","(","elements",")",")",";"],"docstring_tokens":["Implementation","for","PIG_TUPLE","functions"],"prompt_tokens":[]}
{"code_tokens":["public","static","Tuple","buildBag","(","Object",".",".",".","elements",")","{","final","TupleFactory","tupleFactory","=","TupleFactory",".","getInstance","(",")",";","final","BagFactory","bagFactory","=","BagFactory",".","getInstance","(",")",";","//","Convert","each","row","into","a","Tuple\n","List<Tuple>","tupleList","=","new","ArrayList<>","(",")",";","if","(","elements","!=","null",")","{","//","The","first","input","contains","a","list","of","rows","for","the","bag\n","final","List","bag","=","(","elements[0]","instanceof","List",")","?","(","List",")","elements[0]\n",":","Collections",".","singletonList","(","elements[0]",")",";","for","(","Object","row",":","bag",")","{","tupleList",".","add","(","tupleFactory",".","newTuple","(","Arrays",".","asList","(","row",")",")",")",";","}","}","\n\n","//","Then","build","a","bag","from","the","tuple","list\n","DataBag","resultBag","=","bagFactory",".","newDefaultBag","(","tupleList",")",";","\n\n","//","The","returned","result","is","a","new","Tuple","with","the","newly","constructed","DataBag\n","//","as","the","first","item",".","List<Object>","finalTuple","=","new","ArrayList<>","(",")",";","finalTuple",".","add","(","resultBag",")",";","\n\n","if","(","elements","!=","null",")","{","//","Add","the","remaining","elements","from","the","input\n","for","(","int","i","=","1",";","i","<","elements",".","length",";","i++",")","{","finalTuple",".","add","(","elements[i]",")",";","}","}","\n\n","return","tupleFactory",".","newTuple","(","finalTuple",")",";"],"docstring_tokens":["Implementation","for","PIG_BAG","functions"],"prompt_tokens":[]}
{"code_tokens":["public","RelJson","withInputTranslator","(","InputTranslator","inputTranslator",")","{","if","(","inputTranslator","==","this",".","inputTranslator",")","{","return","this",";","}","return","new","RelJson","(","jsonBuilder,","inputTranslator",")",";"],"docstring_tokens":["Returns","a","RelJson","with","a","given","InputTranslator"],"prompt_tokens":[]}
{"code_tokens":["public","void","attachTo","(","RelOptPlanner","planner",")","{","assert","this",".","planner","==","null",";","planner",".","addListener","(","this",")",";","this",".","planner","=","planner",";"],"docstring_tokens":["Attaches","the","visualizer","to","the","planner"],"prompt_tokens":[]}
{"code_tokens":["private","static","List<RelNode>","getInputs","(","final","RelNode","node",")","{","return","node",".","getInputs","(",")",".","stream","(",")",".","map","(","n","->","{","if","(","n","instanceof","HepRelVertex",")","{","return","(","(","HepRelVertex",")","n",")",".","getCurrentRel","(",")",";","}","return","n",";","}",")",".","collect","(","Collectors",".","toList","(",")",")",";"],"docstring_tokens":["Get","the","inputs","for","a","node,","unwrapping","HepRelVertex","nodes"],"prompt_tokens":[]}
{"code_tokens":["private","void","updateFinalPlan","(","RelNode","node",")","{","int","size","=","this",".","steps",".","size","(",")",";","if","(","size",">","0","&&","FINAL",".","equals","(","this",".","steps",".","get","(","size","-","1",")",".","getId","(",")",")",")","{","return",";","}","\n\n","this",".","registerRelNode","(","node",")",".","updateAttribute","(","\"inFinalPlan\",","Boolean",".","TRUE",")",";","if","(","node","instanceof","RelSubset",")","{","RelNode","best","=","(","(","RelSubset",")","node",")",".","getBest","(",")",";","if","(","best","==","null",")","{","return",";","}","updateFinalPlan","(","best",")",";","}","else","{","for","(","RelNode","input",":","getInputs","(","node",")",")","{","updateFinalPlan","(","input",")",";","}","}"],"docstring_tokens":["Mark","nodes","that","are","part","of","the","final","plan"],"prompt_tokens":[]}
{"code_tokens":["private","void","updateNodeInfo","(","final","RelNode","rel,","final","boolean","isLastStep",")","{","NodeUpdateHelper","helper","=","registerRelNode","(","rel",")",";","if","(","this",".","includeIntermediateCosts","||","isLastStep",")","{","RelOptPlanner","planner","=","this",".","planner",";","assert","planner","!=","null",";","RelMetadataQuery","mq","=","rel",".","getCluster","(",")",".","getMetadataQuery","(",")",";","RelOptCost","cost","=","planner",".","getCost","(","rel,","mq",")",";","Double","rowCount","=","mq",".","getRowCount","(","rel",")",";","helper",".","updateAttribute","(","\"cost\",","formatCost","(","rowCount,","cost",")",")",";","}","\n\n","List<String>","inputs","=","new","ArrayList<>","(",")",";","if","(","rel","instanceof","RelSubset",")","{","RelSubset","relSubset","=","(","RelSubset",")","rel",";","relSubset",".","getRels","(",")",".","forEach","(","input","->","inputs",".","add","(","key","(","input",")",")",")",";","Set<String>","transitive","=","new","HashSet<>","(",")",";","relSubset",".","getSubsetsSatisfyingThis","(",")",".","filter","(","other","->","!other",".","equals","(","relSubset",")",")",".","forEach","(","input","->","{","inputs",".","add","(","key","(","input",")",")",";","if","(","!includeTransitiveEdges",")","{","input",".","getRels","(",")",".","forEach","(","r","->","transitive",".","add","(","key","(","r",")",")",")",";","}","}",")",";","inputs",".","removeAll","(","transitive",")",";","}","else","{","getInputs","(","rel",")",".","forEach","(","input","->","inputs",".","add","(","key","(","input",")",")",")",";","}","\n\n","helper",".","updateAttribute","(","\"inputs\",","inputs",")",";"],"docstring_tokens":["Check","and","store","the","changes","of","the","rel","node"],"prompt_tokens":[]}
{"code_tokens":["public","void","writeToFile","(",")","{","if","(","outputDirectory","==","null","||","outputSuffix","==","null",")","{","return",";","}","\n\n","try","{","String","templatePath","=","Paths",".","get","(","templateDirectory",")",".","resolve","(","\"viz-template",".","html\"",")",".","toString","(",")",";","ClassLoader","cl","=","getClass","(",")",".","getClassLoader","(",")",";","assert","cl","!=","null",";","InputStream","resourceAsStream","=","cl",".","getResourceAsStream","(","templatePath",")",";","assert","resourceAsStream","!=","null",";","String","htmlTemplate","=","IOUtils",".","toString","(","resourceAsStream,","StandardCharsets",".","UTF_8",")",";","\n\n","String","htmlFileName","=","\"planner-viz\"","+","outputSuffix","+","\"",".","html\"",";","String","dataFileName","=","\"planner-viz-data\"","+","outputSuffix","+","\"",".","js\"",";","\n\n","String","replaceString","=","\"src=\\\"planner-viz-data",".","js\\\"\"",";","int","replaceIndex","=","htmlTemplate",".","indexOf","(","replaceString",")",";","String","htmlContent","=","htmlTemplate",".","substring","(","0,","replaceIndex",")","+","\"src=\\\"\"","+","dataFileName","+","\"\\\"\"\n","+","htmlTemplate",".","substring","(","replaceIndex","+","replaceString",".","length","(",")",")",";","\n\n","String","dataJsContent","=","\"var","data","=","\"","+","getJsonStringResult","(",")","+","\"",";","\\n\"",";","\n\n","Path","outputDirPath","=","Paths",".","get","(","outputDirectory",")",";","Path","htmlOutput","=","outputDirPath",".","resolve","(","htmlFileName",")",";","Path","dataOutput","=","outputDirPath",".","resolve","(","dataFileName",")",";","\n\n","if","(","!Files",".","exists","(","outputDirPath",")",")","{","Files",".","createDirectories","(","outputDirPath",")",";","}","\n\n","Files",".","write","(","htmlOutput,","htmlContent",".","getBytes","(","Charsets",".","UTF_8",")",",","StandardOpenOption",".","CREATE,\n","StandardOpenOption",".","TRUNCATE_EXISTING",")",";","Files",".","write","(","dataOutput,","dataJsContent",".","getBytes","(","Charsets",".","UTF_8",")",",","StandardOpenOption",".","CREATE,\n","StandardOpenOption",".","TRUNCATE_EXISTING",")",";","}","catch","(","IOException","e",")","{","throw","new","UncheckedIOException","(","e",")",";","}"],"docstring_tokens":["Writes","the","HTML","and","JS","files","of","the","rule","match","visualization"],"prompt_tokens":[]}
{"code_tokens":["public","boolean","isCaseSensitive","(",")","{","return","caseSensitive",";"],"docstring_tokens":["Returns","whether","this","operator","matches","the","case","of","its","operands"],"prompt_tokens":[]}
{"code_tokens":["public","final","boolean","containsOver","(",")","{","return","RexOver",".","containsOver","(","getProjects","(",")",",","null",")",";"],"docstring_tokens":["Returns","whether","this","Project","contains","any","windowed-aggregate","functions"],"prompt_tokens":[]}
{"code_tokens":["public","@Nullable","RelOptPredicateList","getAllPredicates","(","TableScan","scan,","RelMetadataQuery","mq",")","{","final","BuiltInMetadata",".","AllPredicates",".","Handler","handler","=\n","scan",".","getTable","(",")",".","unwrap","(","BuiltInMetadata",".","AllPredicates",".","Handler",".","class",")",";","if","(","handler","!=","null",")","{","return","handler",".","getAllPredicates","(","scan,","mq",")",";","}","return","RelOptPredicateList",".","EMPTY",";"],"docstring_tokens":["Extracts","predicates","for","a","table","scan"],"prompt_tokens":[]}
{"code_tokens":["private","static","@Nullable","RelOptPredicateList","getAllFilterPredicates","(","RelNode","rel,\n","RelMetadataQuery","mq,","RexNode","pred",")","{","final","RexBuilder","rexBuilder","=","rel",".","getCluster","(",")",".","getRexBuilder","(",")",";","final","RelOptPredicateList","predsBelow","=","mq",".","getAllPredicates","(","rel",")",";","if","(","predsBelow","==","null",")","{","//","Safety","check\n","return","null",";","}","\n\n","//","Extract","input","fields","referenced","by","Filter","condition\n","final","Set<RelDataTypeField>","inputExtraFields","=","new","LinkedHashSet<>","(",")",";","final","RelOptUtil",".","InputFinder","inputFinder","=","new","RelOptUtil",".","InputFinder","(","inputExtraFields",")",";","pred",".","accept","(","inputFinder",")",";","final","ImmutableBitSet","inputFieldsUsed","=","inputFinder",".","build","(",")",";","\n\n","//","Infer","column","origin","expressions","for","given","references\n","final","Map<RexInputRef,","Set<RexNode>>","mapping","=","new","LinkedHashMap<>","(",")",";","for","(","int","idx",":","inputFieldsUsed",")","{","final","RexInputRef","ref","=","RexInputRef",".","of","(","idx,","rel",".","getRowType","(",")",".","getFieldList","(",")",")",";","final","Set<RexNode>","originalExprs","=","mq",".","getExpressionLineage","(","rel,","ref",")",";","if","(","originalExprs","==","null",")","{","//","Bail","out\n","return","null",";","}","mapping",".","put","(","ref,","originalExprs",")",";","}","\n\n","//","Replace","with","new","expressions","and","return","union","of","predicates\n","final","Set<RexNode>","allExprs","=\n","RelMdExpressionLineage",".","createAllPossibleExpressions","(","rexBuilder,","pred,","mapping",")",";","if","(","allExprs","==","null",")","{","return","null",";","}","return","predsBelow",".","union","(","rexBuilder,","RelOptPredicateList",".","of","(","rexBuilder,","allExprs",")",")",";"],"docstring_tokens":["Add","the","Filter","condition","to","the","list","obtained","from","the","input"],"prompt_tokens":[]}
{"code_tokens":["public","@Nullable","RelOptPredicateList","getAllPredicates","(","Join","join,","RelMetadataQuery","mq",")","{","if","(","join",".","getJoinType","(",")",".","isOuterJoin","(",")",")","{","//","We","cannot","map","origin","of","this","expression",".","return","null",";","}","\n\n","final","RexBuilder","rexBuilder","=","join",".","getCluster","(",")",".","getRexBuilder","(",")",";","final","RexNode","pred","=","join",".","getCondition","(",")",";","\n\n","final","Multimap<List<String>,","RelTableRef>","qualifiedNamesToRefs","=","HashMultimap",".","create","(",")",";","RelOptPredicateList","newPreds","=","RelOptPredicateList",".","EMPTY",";","for","(","RelNode","input",":","join",".","getInputs","(",")",")","{","final","RelOptPredicateList","inputPreds","=","mq",".","getAllPredicates","(","input",")",";","if","(","inputPreds","==","null",")","{","//","Bail","out\n","return","null",";","}","//","Gather","table","references\n","final","Set<RelTableRef>","tableRefs","=","mq",".","getTableReferences","(","input",")",";","if","(","tableRefs","==","null",")","{","return","null",";","}","if","(","input","==","join",".","getLeft","(",")",")","{","//","Left","input","references","remain","unchanged\n","for","(","RelTableRef","leftRef",":","tableRefs",")","{","qualifiedNamesToRefs",".","put","(","leftRef",".","getQualifiedName","(",")",",","leftRef",")",";","}","newPreds","=","newPreds",".","union","(","rexBuilder,","inputPreds",")",";","}","else","{","//","Right","input","references","might","need","to","be","updated","if","there","are","table","name\n","//","clashes","with","left","input\n","final","Map<RelTableRef,","RelTableRef>","currentTablesMapping","=","new","HashMap<>","(",")",";","for","(","RelTableRef","rightRef",":","tableRefs",")","{","int","shift","=","0",";","Collection<RelTableRef>","lRefs","=","qualifiedNamesToRefs",".","get","(","rightRef",".","getQualifiedName","(",")",")",";","if","(","lRefs","!=","null",")","{","shift","=","lRefs",".","size","(",")",";","}","currentTablesMapping",".","put","(","rightRef,\n","RelTableRef",".","of","(","rightRef",".","getTable","(",")",",","shift","+","rightRef",".","getEntityNumber","(",")",")",")",";","}","final","List<RexNode>","updatedPreds","=\n","Util",".","transform","(","inputPreds",".","pulledUpPredicates,\n","e","->","RexUtil",".","swapTableReferences","(","rexBuilder,","e,\n","currentTablesMapping",")",")",";","newPreds","=","newPreds",".","union","(","rexBuilder,\n","RelOptPredicateList",".","of","(","rexBuilder,","updatedPreds",")",")",";","}","}","\n\n","//","Extract","input","fields","referenced","by","Join","condition\n","final","Set<RelDataTypeField>","inputExtraFields","=","new","LinkedHashSet<>","(",")",";","final","RelOptUtil",".","InputFinder","inputFinder","=","new","RelOptUtil",".","InputFinder","(","inputExtraFields",")",";","pred",".","accept","(","inputFinder",")",";","final","ImmutableBitSet","inputFieldsUsed","=","inputFinder",".","build","(",")",";","\n\n","//","Infer","column","origin","expressions","for","given","references\n","final","Map<RexInputRef,","Set<RexNode>>","mapping","=","new","LinkedHashMap<>","(",")",";","final","RelDataType","fullRowType","=","SqlValidatorUtil",".","createJoinType","(","rexBuilder",".","getTypeFactory","(",")",",\n","join",".","getLeft","(",")",".","getRowType","(",")",",\n","join",".","getRight","(",")",".","getRowType","(",")",",\n","null,\n","ImmutableList",".","of","(",")",")",";","for","(","int","idx",":","inputFieldsUsed",")","{","final","RexInputRef","inputRef","=","RexInputRef",".","of","(","idx,","fullRowType",".","getFieldList","(",")",")",";","final","Set<RexNode>","originalExprs","=","mq",".","getExpressionLineage","(","join,","inputRef",")",";","if","(","originalExprs","==","null",")","{","//","Bail","out\n","return","null",";","}","final","RexInputRef","ref","=","RexInputRef",".","of","(","idx,","fullRowType",".","getFieldList","(",")",")",";","mapping",".","put","(","ref,","originalExprs",")",";","}","\n\n","//","Replace","with","new","expressions","and","return","union","of","predicates\n","final","Set<RexNode>","allExprs","=\n","RelMdExpressionLineage",".","createAllPossibleExpressions","(","rexBuilder,","pred,","mapping",")",";","if","(","allExprs","==","null",")","{","return","null",";","}","return","newPreds",".","union","(","rexBuilder,","RelOptPredicateList",".","of","(","rexBuilder,","allExprs",")",")",";"],"docstring_tokens":["Add","the","Join","condition","to","the","list","obtained","from","the","input"],"prompt_tokens":[]}
{"code_tokens":["public","static","SqlOperatorTable","spatialInstance","(",")","{","return","SPATIAL",".","get","(",")",";"],"docstring_tokens":["Returns","the","Spatial","operator","table,","creating","it","if","necessary"],"prompt_tokens":[]}
{"code_tokens":["public","static","SqlOperatorTable","chain","(","Iterable<SqlOperatorTable>","tables",")","{","final","ImmutableList<SqlOperatorTable>","list","=\n","ImmutableList",".","copyOf","(","tables",")",";","if","(","list",".","size","(",")","==","1",")","{","return","list",".","get","(","0",")",";","}","return","new","ChainedSqlOperatorTable","(","list",")",";"],"docstring_tokens":["Creates","a","composite","operator","table"],"prompt_tokens":[]}
{"code_tokens":["public","static","SqlOperatorTable","chain","(","SqlOperatorTable",".",".",".","tables",")","{","return","chain","(","ImmutableList",".","copyOf","(","tables",")",")",";"],"docstring_tokens":["Creates","a","composite","operator","table","from","an","array","of","tables"],"prompt_tokens":[]}
{"code_tokens":["public","void","run","(",")","{","try","{","connection","=","DriverManager",".","getConnection","(","jdbcURL,","jdbcProps",")",";","if","(","connection",".","getMetaData","(",")",".","supportsTransactions","(",")",")","{","connection",".","setAutoCommit","(","false",")",";","}","}","catch","(","Throwable","t",")","{","handleError","(","t,","\"during","connect\",","null",")",";","}","\n\n","//","stepNumber","is","used","to","reconstitute","the","original","step\n","//","numbers","passed","by","the","test","case","author",".","int","stepNumber","=","0",";","\n\n","for","(","ConcurrentTestCommand","command",":","commands",")","{","if","(","!","(","command\n","instanceof\n","ConcurrentTestCommandGenerator",".","AutoSynchronizationCommand",")",")","{","stepNumber++",";","}","\n\n","//","if","(","debugPrintStream","!=","null",")","{","//","debugPrintStream",".","println","(","Thread",".","currentThread","(",")",".","getName","(",")","//","+","\":","Step","\"\n","//","+","stepNumber\n","//","+","\":","\"\n","//","+","System",".","currentTimeMillis","(",")",")",";","//","}","\n\n","//","synchronization","commands","are","always","executed,","lest","we","deadlock\n","boolean","isSync","=","command\n","instanceof","ConcurrentTestCommandGenerator",".","SynchronizationCommand",";","\n\n","if","(","isSync\n","||","(","(","connection","!=","null",")","&&","(","command","!=","null",")","&&","(","error","==","null",")",")",")","{","try","{","command",".","execute","(","this",")",";","}","catch","(","Throwable","t",")","{","handleError","(","t,","\"during","step","\"","+","stepNumber,","command",")",";","}","}","}","\n\n","try","{","if","(","connection","!=","null",")","{","if","(","connection",".","getMetaData","(",")",".","supportsTransactions","(",")",")","{","connection",".","rollback","(",")",";","}","connection",".","close","(",")",";","}","}","catch","(","Throwable","t",")","{","handleError","(","t,","\"during","connection","close\",","null",")",";","}"],"docstring_tokens":["Executes","the","configured","commands"],"prompt_tokens":[]}
{"code_tokens":["protected","RexLiteral","null_","(","RelDataType","type",")","{","return","rexBuilder",".","makeNullLiteral","(","nullable","(","type",")",")",";"],"docstring_tokens":["Creates","null","literal","with","given","type"],"prompt_tokens":[]}
{"code_tokens":["public","static","BitSet","range","(","int","toIndex",")","{","return","range","(","0,","toIndex",")",";"],"docstring_tokens":["Creates","a","BitSet","with","bits","between","0","and","toIndex","set"],"prompt_tokens":[]}
{"code_tokens":["public","static","void","setAll","(","BitSet","bitSet,","Iterable<?","extends","Number>","list",")","{","for","(","Number","number",":","list",")","{","bitSet",".","set","(","number",".","intValue","(",")",")",";","}"],"docstring_tokens":["Sets","all","bits","in","a","given","BitSet","corresponding","to","integers","from","a","list"],"prompt_tokens":[]}
{"code_tokens":["RelOptFixture","fixture","(",")","{","return","RelOptFixture",".","DEFAULT",";"],"docstring_tokens":["Creates","a","fixture","for","a","test"],"prompt_tokens":[]}
{"code_tokens":["protected","final","RelOptFixture","sql","(","String","sql",")","{","return","fixture","(",")",".","sql","(","sql",")",";"],"docstring_tokens":["Creates","a","fixture","and","sets","its","SQL","statement"],"prompt_tokens":[]}
{"code_tokens":["protected","final","RelOptFixture","relFn","(","Function<RelBuilder,","RelNode>","relFn",")","{","return","fixture","(",")",".","relFn","(","relFn",")",";"],"docstring_tokens":["Initiates","a","test","case","with","a","given","RelNode","supplier"],"prompt_tokens":[]}
{"code_tokens":["private","String","computeDigest","(",")","{","StringBuilder","buf","=\n","new","StringBuilder","(","\"rule","[\"","+","getRule","(",")","+","\"]","rels","[\"",")",";","for","(","int","i","=","0",";","i","<","rels",".","length",";","i++",")","{","if","(","i",">","0",")","{","buf",".","append","(","','",")",";","}","buf",".","append","(","'#'",")",".","append","(","rels[i]",".","getId","(",")",")",";","}","buf",".","append","(","']'",")",";","return","buf",".","toString","(",")",";"],"docstring_tokens":["Computes","a","string","describing","this","rule","match"],"prompt_tokens":[]}
{"code_tokens":["@Deprecated","//","to","be","removed","before","2",".","0\n","public","void","recomputeDigest","(",")","{","digest","=","computeDigest","(",")",";"],"docstring_tokens":["Recomputes","the","digest","of","this","VolcanoRuleMatch"],"prompt_tokens":[]}
{"code_tokens":["private","static","<E>","boolean","allNotNull","(","E[]","es,","Litmus","litmus",")","{","for","(","E","e",":","es",")","{","if","(","e","==","null",")","{","return","litmus",".","fail","(","\"was","null\",","(","Object",")","es",")",";","}","}","return","litmus",".","succeed","(",")",";"],"docstring_tokens":["Returns","whether","all","elements","of","a","given","array","are","not-null;","fails","if","any","are","null"],"prompt_tokens":[]}
{"code_tokens":["protected","<MH","extends","MetadataHandler<?>>","MH","handler","(","Class<MH>","handlerClass",")","{","return","getMetadataHandlerProvider","(",")",".","handler","(","handlerClass",")",";"],"docstring_tokens":["Provide","a","handler","for","the","requested","metadata","class"],"prompt_tokens":[]}
{"code_tokens":["public","boolean","clearCache","(","RelNode","rel",")","{","Map<Object,","Object>","row","=","map",".","row","(","rel",")",";","if","(","row",".","isEmpty","(",")",")","{","return","false",";","}","\n\n","row",".","clear","(",")",";","return","true",";"],"docstring_tokens":["Removes","cached","metadata","values","for","specified","RelNode"],"prompt_tokens":[]}
{"code_tokens":["public","static","RelDataType","toSql","(","final","RelDataTypeFactory","typeFactory,\n","RelDataType","type",")","{","if","(","type","instanceof","RelRecordType",")","{","return","typeFactory",".","createTypeWithNullability","(","typeFactory",".","createStructType","(","type",".","getFieldList","(",")",".","stream","(",")",".","map","(","field","->","toSql","(","typeFactory,","field",".","getType","(",")",")",")",".","collect","(","Collectors",".","toList","(",")",")",",\n","type",".","getFieldNames","(",")",")",",\n","type",".","isNullable","(",")",")",";","}","else","if","(","type","instanceof","JavaType",")","{","SqlTypeName","sqlTypeName","=","type",".","getSqlTypeName","(",")",";","final","RelDataType","relDataType",";","if","(","SqlTypeUtil",".","isArray","(","type",")",")","{","//","Transform","to","sql","type,","take","care","for","two","cases:\n","//","1",".","type",".","getJavaClass","(",")","is","collection","with","erased","generic","type\n","//","2",".","ElementType","returned","by","JavaType","is","also","of","JavaType,\n","//","and","needs","conversion","using","typeFactory\n","final","RelDataType","elementType","=","toSqlTypeWithNullToAny","(","typeFactory,","type",".","getComponentType","(",")",")",";","relDataType","=","typeFactory",".","createArrayType","(","elementType,","-1",")",";","}","else","if","(","SqlTypeUtil",".","isMap","(","type",")",")","{","final","RelDataType","keyType","=","toSqlTypeWithNullToAny","(","typeFactory,","type",".","getKeyType","(",")",")",";","final","RelDataType","valueType","=","toSqlTypeWithNullToAny","(","typeFactory,","type",".","getValueType","(",")",")",";","relDataType","=","typeFactory",".","createMapType","(","keyType,","valueType",")",";","}","else","{","relDataType","=","typeFactory",".","createSqlType","(","sqlTypeName",")",";","}","return","typeFactory",".","createTypeWithNullability","(","relDataType,","type",".","isNullable","(",")",")",";","}","return","type",";"],"docstring_tokens":["Converts","a","type","in","Java","format","to","a","SQL-oriented","type"],"prompt_tokens":[]}
{"code_tokens":["private","Type","createSyntheticType","(","RelRecordType","type",")","{","final","String","name","=\n","\"Record\"","+","type",".","getFieldCount","(",")","+","\"_\"","+","syntheticTypes",".","size","(",")",";","final","SyntheticRecordType","syntheticType","=\n","new","SyntheticRecordType","(","type,","name",")",";","for","(","final","RelDataTypeField","recordField",":","type",".","getFieldList","(",")",")","{","final","Type","javaClass","=","getJavaClass","(","recordField",".","getType","(",")",")",";","syntheticType",".","fields",".","add","(","new","RecordFieldImpl","(","syntheticType,\n","recordField",".","getName","(",")",",\n","javaClass,\n","recordField",".","getType","(",")",".","isNullable","(",")","&&","!Primitive",".","is","(","javaClass",")",",\n","Modifier",".","PUBLIC",")",")",";","}","return","register","(","syntheticType",")",";"],"docstring_tokens":["Creates","a","synthetic","Java","class","whose","fields","have","the","same","names","and","relational","types"],"prompt_tokens":[]}
{"code_tokens":["public","static","AggregateCall","create","(","SqlAggFunction","aggFunction,\n","boolean","distinct,","boolean","approximate,","boolean","ignoreNulls,\n","List<Integer>","argList,","int","filterArg,\n","@Nullable","ImmutableBitSet","distinctKeys,","RelCollation","collation,\n","int","groupCount,\n","RelNode","input,","@Nullable","RelDataType","type,","@Nullable","String","name",")","{","if","(","type","==","null",")","{","final","RelDataTypeFactory","typeFactory","=\n","input",".","getCluster","(",")",".","getTypeFactory","(",")",";","final","List<RelDataType>","types","=\n","SqlTypeUtil",".","projectTypes","(","input",".","getRowType","(",")",",","argList",")",";","final","Aggregate",".","AggCallBinding","callBinding","=\n","new","Aggregate",".","AggCallBinding","(","typeFactory,","aggFunction,","types,\n","groupCount,","filterArg",">=","0",")",";","type","=","aggFunction",".","inferReturnType","(","callBinding",")",";","}","return","create","(","aggFunction,","distinct,","approximate,","ignoreNulls,","argList,\n","filterArg,","distinctKeys,","collation,","type,","name",")",";"],"docstring_tokens":["Creates","an","AggregateCall,","inferring","its","type","if","type","is","null"],"prompt_tokens":[]}
{"code_tokens":["public","final","boolean","ignoreNulls","(",")","{","return","ignoreNulls",";"],"docstring_tokens":["Returns","whether","this","AggregateCall","ignores","nulls"],"prompt_tokens":[]}
{"code_tokens":["public","boolean","hasFilter","(",")","{","return","filterArg",">=","0",";"],"docstring_tokens":["Returns","whether","this","AggregateCall","has","a","filter","argument"],"prompt_tokens":[]}
{"code_tokens":["public","Aggregate",".","AggCallBinding","createBinding","(","Aggregate","aggregateRelBase",")","{","final","RelDataType","rowType","=","aggregateRelBase",".","getInput","(",")",".","getRowType","(",")",";","\n\n","return","new","Aggregate",".","AggCallBinding","(","aggregateRelBase",".","getCluster","(",")",".","getTypeFactory","(",")",",","aggFunction,\n","SqlTypeUtil",".","projectTypes","(","rowType,","argList",")",",\n","aggregateRelBase",".","getGroupCount","(",")",",","hasFilter","(",")",")",";"],"docstring_tokens":["Creates","a","binding","of","this","call","in","the","context","of","an","org.apache.calcite.rel.logical.LogicalAggregate,","which","can","then","be","used","to","infer","the","return","type"],"prompt_tokens":[]}
{"code_tokens":["@Deprecated","//","to","be","removed","before","2",".","0\n","public","AggregateCall","copy","(","List<Integer>","args,","int","filterArg,\n","@Nullable","ImmutableBitSet","distinctKeys,","RelCollation","collation",")","{","return","new","AggregateCall","(","aggFunction,","distinct,","approximate,","ignoreNulls,\n","args,","filterArg,","distinctKeys,","collation,","type,","name",")",";"],"docstring_tokens":["Creates","an","equivalent","AggregateCall","with","new","argument","ordinals"],"prompt_tokens":[]}
{"code_tokens":["public","AggregateCall","transform","(","Mappings",".","TargetMapping","mapping",")","{","return","copy","(","Mappings",".","apply2","(","(","Mapping",")","mapping,","argList",")",",\n","hasFilter","(",")","?","Mappings",".","apply","(","mapping,","filterArg",")",":","-1,\n","distinctKeys","==","null","?","null",":","distinctKeys",".","permute","(","mapping",")",",\n","RelCollations",".","permute","(","collation,","mapping",")",")",";"],"docstring_tokens":["Creates","a","copy","of","this","aggregate","call,","applying","a","mapping","to","its","arguments"],"prompt_tokens":[]}
{"code_tokens":["@Override","public","String","toString","(",")","{","return","\"rel#\"","+","id","+","':'","+","getDigest","(",")",";"],"docstring_tokens":["Description;","consists","of","id","plus","digest"],"prompt_tokens":[]}
{"code_tokens":["@API","(","since","=","\"1",".","25\",","status","=","API",".","Status",".","MAINTAINED",")","@Override","public","int","deepHashCode","(",")","{","int","result","=","31","+","getTraitSet","(",")",".","hashCode","(",")",";","List<Pair<String,","@Nullable","Object>>","items","=","this",".","getDigestItems","(",")",";","for","(","Pair<String,","@Nullable","Object>","item",":","items",")","{","Object","value","=","item",".","right",";","final","int","h",";","if","(","value","==","null",")","{","h","=","0",";","}","else","if","(","value","instanceof","RelNode",")","{","h","=","(","(","RelNode",")","value",")",".","deepHashCode","(",")",";","}","else","{","h","=","value",".","hashCode","(",")",";","}","result","=","result","*","31","+","h",";","}","return","result",";"],"docstring_tokens":["Compute","hash","code","for","RelNode","digest"],"prompt_tokens":[]}
{"code_tokens":["private","static","@Nullable","DruidJsonFilter","toEqualityKindDruidFilter","(","RexNode","rexNode,\n","RelDataType","rowType,","DruidQuery","druidQuery",")","{","if","(","rexNode",".","getKind","(",")","!=","SqlKind",".","EQUALS\n","&&","rexNode",".","getKind","(",")","!=","SqlKind",".","NOT_EQUALS",")","{","throw","new","AssertionError","(","DruidQuery",".","format","(","\"Expecting","EQUALS","or","NOT_EQUALS","but","got","[%s]\",","rexNode",".","getKind","(",")",")",")",";","}","final","RexCall","rexCall","=","(","RexCall",")","rexNode",";","if","(","rexCall",".","getOperands","(",")",".","size","(",")","<","2",")","{","return","null",";","}","final","RexLiteral","rexLiteral",";","final","RexNode","refNode",";","final","RexNode","lhs","=","rexCall",".","getOperands","(",")",".","get","(","0",")",";","final","RexNode","rhs","=","rexCall",".","getOperands","(",")",".","get","(","1",")",";","if","(","lhs",".","getKind","(",")","==","SqlKind",".","LITERAL","&&","rhs",".","getKind","(",")","!=","SqlKind",".","LITERAL",")","{","rexLiteral","=","(","RexLiteral",")","lhs",";","refNode","=","rhs",";","}","else","if","(","rhs",".","getKind","(",")","==","SqlKind",".","LITERAL","&&","lhs",".","getKind","(",")","!=","SqlKind",".","LITERAL",")","{","rexLiteral","=","(","RexLiteral",")","rhs",";","refNode","=","lhs",";","}","else","{","//","must","have","at","least","one","literal\n","return","null",";","}","\n\n","if","(","RexLiteral",".","isNullLiteral","(","rexLiteral",")",")","{","//","we","are","not","handling","is","NULL","filter","here","thus","we","bail","out","if","Literal","is","null\n","return","null",";","}","final","String","literalValue","=","toDruidLiteral","(","rexLiteral,","rowType,","druidQuery",")",";","if","(","literalValue","==","null",")","{","//","cannot","translate","literal",";","better","bail","out\n","return","null",";","}","final","boolean","isNumeric","=","refNode",".","getType","(",")",".","getFamily","(",")","==","SqlTypeFamily",".","NUMERIC\n","||","rexLiteral",".","getType","(",")",".","getFamily","(",")","==","SqlTypeFamily",".","NUMERIC",";","final","Pair<String,","ExtractionFunction>","druidColumn","=","DruidQuery",".","toDruidColumn","(","refNode,","rowType,\n","druidQuery",")",";","final","String","columnName","=","druidColumn",".","left",";","final","ExtractionFunction","extractionFunction","=","druidColumn",".","right",";","if","(","columnName","==","null",")","{","//","no","column","name","better","bail","out",".","return","null",";","}","final","DruidJsonFilter","partialFilter",";","if","(","isNumeric",")","{","//need","bound","filter","since","it","one","of","operands","is","numeric\n","partialFilter","=","new","JsonBound","(","columnName,","literalValue,","false,","literalValue,","false,","true,\n","extractionFunction",")",";","}","else","{","partialFilter","=","new","JsonSelector","(","columnName,","literalValue,","extractionFunction",")",";","}","\n\n","if","(","rexNode",".","getKind","(",")","==","SqlKind",".","EQUALS",")","{","return","partialFilter",";","}","return","toNotDruidFilter","(","partialFilter",")",";"],"docstring_tokens":["Converts","a","RexNode","to","a","Druid","JSON","filter"],"prompt_tokens":[]}
{"code_tokens":["private","static","@Nullable","DruidJsonFilter","toBoundDruidFilter","(","RexNode","rexNode,","RelDataType","rowType,\n","DruidQuery","druidQuery",")","{","final","RexCall","rexCall","=","(","RexCall",")","rexNode",";","final","RexLiteral","rexLiteral",";","if","(","rexCall",".","getOperands","(",")",".","size","(",")","<","2",")","{","return","null",";","}","final","RexNode","refNode",";","final","RexNode","lhs","=","rexCall",".","getOperands","(",")",".","get","(","0",")",";","final","RexNode","rhs","=","rexCall",".","getOperands","(",")",".","get","(","1",")",";","final","boolean","lhsIsRef",";","if","(","lhs",".","getKind","(",")","==","SqlKind",".","LITERAL","&&","rhs",".","getKind","(",")","!=","SqlKind",".","LITERAL",")","{","rexLiteral","=","(","RexLiteral",")","lhs",";","refNode","=","rhs",";","lhsIsRef","=","false",";","}","else","if","(","rhs",".","getKind","(",")","==","SqlKind",".","LITERAL","&&","lhs",".","getKind","(",")","!=","SqlKind",".","LITERAL",")","{","rexLiteral","=","(","RexLiteral",")","rhs",";","refNode","=","lhs",";","lhsIsRef","=","true",";","}","else","{","//","must","have","at","least","one","literal\n","return","null",";","}","\n\n","if","(","RexLiteral",".","isNullLiteral","(","rexLiteral",")",")","{","//","we","are","not","handling","is","NULL","filter","here",";","thus","we","bail","out","if","Literal","is\n","//","null\n","return","null",";","}","final","String","literalValue","=\n","DruidJsonFilter",".","toDruidLiteral","(","rexLiteral,","rowType,","druidQuery",")",";","if","(","literalValue","==","null",")","{","//","cannot","translate","literal",";","better","bail","out\n","return","null",";","}","final","boolean","isNumeric","=","refNode",".","getType","(",")",".","getFamily","(",")","==","SqlTypeFamily",".","NUMERIC\n","||","rexLiteral",".","getType","(",")",".","getFamily","(",")","==","SqlTypeFamily",".","NUMERIC",";","final","Pair<String,","ExtractionFunction>","druidColumn","=\n","DruidQuery",".","toDruidColumn","(","refNode,","rowType,","druidQuery",")",";","final","String","columnName","=","druidColumn",".","left",";","final","ExtractionFunction","extractionFunction","=","druidColumn",".","right",";","if","(","columnName","==","null",")","{","//","no","column","name","better","bail","out",".","return","null",";","}","switch","(","rexCall",".","getKind","(",")",")","{","case","LESS_THAN_OR_EQUAL:\n","case","LESS_THAN:\n","if","(","lhsIsRef",")","{","return","new","JsonBound","(","columnName,","null,","false,","literalValue,\n","rexCall",".","getKind","(",")","==","SqlKind",".","LESS_THAN,","isNumeric,\n","extractionFunction",")",";","}","else","{","return","new","JsonBound","(","columnName,","literalValue,","rexCall",".","getKind","(",")","==","SqlKind",".","LESS_THAN,","null,\n","false,","isNumeric,\n","extractionFunction",")",";","}","case","GREATER_THAN_OR_EQUAL:\n","case","GREATER_THAN:\n","if","(","!lhsIsRef",")","{","return","new","JsonBound","(","columnName,","null,","false,","literalValue,\n","rexCall",".","getKind","(",")","==","SqlKind",".","GREATER_THAN,","isNumeric,\n","extractionFunction",")",";","}","else","{","return","new","JsonBound","(","columnName,","literalValue,","rexCall",".","getKind","(",")","==","SqlKind",".","GREATER_THAN,\n","null,\n","false,","isNumeric,\n","extractionFunction",")",";","}","default:\n","return","null",";","}","\n\n"],"docstring_tokens":["Converts","a","RexNode","to","a","Druid","JSON","bound","filter"],"prompt_tokens":[]}
{"code_tokens":["private","static","SqlNode","reg","(","SqlValidatorScope","scope,","SqlNode","e",")","{","scope",".","getValidator","(",")",".","deriveType","(","scope,","e",")",";","return","e",";"],"docstring_tokens":["Registers","with","the","validator","a","SqlNode","that","has","been","created","during","the","Sql-to-Rel","process"],"prompt_tokens":[]}
{"code_tokens":["public","RelNode","convertToSingleValueSubq","(","SqlNode","query,\n","RelNode","plan",")","{","//","Check","whether","query","is","guaranteed","to","produce","a","single","value",".","if","(","query","instanceof","SqlSelect",")","{","SqlSelect","select","=","(","SqlSelect",")","query",";","SqlNodeList","selectList","=","select",".","getSelectList","(",")",";","SqlNodeList","groupList","=","select",".","getGroup","(",")",";","\n\n","if","(","(","selectList",".","size","(",")","==","1",")","&&","(","(","groupList","==","null",")","||","(","groupList",".","size","(",")","==","0",")",")",")","{","SqlNode","selectExpr","=","selectList",".","get","(","0",")",";","if","(","selectExpr","instanceof","SqlCall",")","{","SqlCall","selectExprCall","=","(","SqlCall",")","selectExpr",";","if","(","Util",".","isSingleValue","(","selectExprCall",")",")","{","return","plan",";","}","}","\n\n","//","If","there","is","a","limit","with","0","or","1,\n","//","it","is","ensured","to","produce","a","single","value\n","SqlNode","fetch","=","select",".","getFetch","(",")",";","if","(","fetch","instanceof","SqlNumericLiteral",")","{","long","value","=","(","(","SqlNumericLiteral",")","fetch",")",".","getValueAs","(","Long",".","class",")",";","if","(","value","<","2",")","{","return","plan",";","}","}","}","}","else","if","(","query","instanceof","SqlCall",")","{","//","If","the","query","is","(","values",".",".",".",")",",\n","//","it","is","necessary","to","look","into","the","operands","to","determine\n","//","whether","SingleValueAgg","is","necessary\n","SqlCall","exprCall","=","(","SqlCall",")","query",";","if","(","exprCall",".","getOperator","(",")","instanceof","SqlValuesOperator\n","&&","Util",".","isSingleValue","(","exprCall",")",")","{","return","plan",";","}","}","\n\n","//","If","not,","project","SingleValueAgg\n","return","RelOptUtil",".","createSingleValueAggRel","(","cluster,\n","plan",")",";"],"docstring_tokens":["Converts","the","RelNode","tree","for","a","select","statement","to","a","select","that","produces","a","single","value"],"prompt_tokens":[]}
{"code_tokens":["private","RelNode","createModify","(","RelOptTable","targetTable,","RelNode","source",")","{","final","ModifiableTable","modifiableTable","=\n","targetTable",".","unwrap","(","ModifiableTable",".","class",")",";","if","(","modifiableTable","!=","null\n","&&","modifiableTable","==","targetTable",".","unwrap","(","Table",".","class",")",")","{","return","modifiableTable",".","toModificationRel","(","cluster,","targetTable,\n","catalogReader,","source,","LogicalTableModify",".","Operation",".","INSERT,","null,\n","null,","false",")",";","}","final","ModifiableView","modifiableView","=\n","targetTable",".","unwrap","(","ModifiableView",".","class",")",";","if","(","modifiableView","!=","null",")","{","final","Table","delegateTable","=","modifiableView",".","getTable","(",")",";","final","RelDataType","delegateRowType","=","delegateTable",".","getRowType","(","typeFactory",")",";","final","RelOptTable","delegateRelOptTable","=\n","RelOptTableImpl",".","create","(","null,","delegateRowType,","delegateTable,\n","modifiableView",".","getTablePath","(",")",")",";","final","RelNode","newSource","=\n","createSource","(","targetTable,","source,","modifiableView,","delegateRowType",")",";","return","createModify","(","delegateRelOptTable,","newSource",")",";","}","return","LogicalTableModify",".","create","(","targetTable,","catalogReader,","source,\n","LogicalTableModify",".","Operation",".","INSERT,","null,","null,","false",")",";"],"docstring_tokens":["Creates","a","relational","expression","to","modify","a","table","or","modifiable","view"],"prompt_tokens":[]}
{"code_tokens":["private","Blackboard","createInsertBlackboard","(","RelOptTable","targetTable,\n","RexNode","sourceRef,","List<String>","targetColumnNames",")","{","final","Map<String,","RexNode>","nameToNodeMap","=","new","HashMap<>","(",")",";","int","j","=","0",";","\n\n","//","Assign","expressions","for","non-generated","columns",".","final","List<ColumnStrategy>","strategies","=","targetTable",".","getColumnStrategies","(",")",";","final","List<String>","targetFields","=","targetTable",".","getRowType","(",")",".","getFieldNames","(",")",";","for","(","String","targetColumnName",":","targetColumnNames",")","{","final","int","i","=","targetFields",".","indexOf","(","targetColumnName",")",";","switch","(","strategies",".","get","(","i",")",")","{","case","STORED:\n","case","VIRTUAL:\n","break",";","default:\n","nameToNodeMap",".","put","(","targetColumnName,\n","rexBuilder",".","makeFieldAccess","(","sourceRef,","j++",")",")",";","}","}","return","createBlackboard","(","null,","nameToNodeMap,","false",")",";"],"docstring_tokens":["Creates","a","blackboard","for","translating","the","expressions","of","generated","columns","in","an","INSERT","statement"],"prompt_tokens":[]}
{"code_tokens":["protected","void","collectInsertTargets","(","SqlInsert","call,\n","final","RexNode","sourceRef,\n","final","List<String>","targetColumnNames,\n","List<RexNode>","columnExprs",")","{","final","RelOptTable","targetTable","=","getTargetTable","(","call",")",";","final","RelDataType","tableRowType","=","targetTable",".","getRowType","(",")",";","SqlNodeList","targetColumnList","=","call",".","getTargetColumnList","(",")",";","if","(","targetColumnList","==","null",")","{","if","(","validator","(",")",".","config","(",")",".","conformance","(",")",".","isInsertSubsetColumnsAllowed","(",")",")","{","final","RelDataType","targetRowType","=\n","typeFactory",".","createStructType","(","tableRowType",".","getFieldList","(",")",".","subList","(","0,","sourceRef",".","getType","(",")",".","getFieldCount","(",")",")",")",";","targetColumnNames",".","addAll","(","targetRowType",".","getFieldNames","(",")",")",";","}","else","{","targetColumnNames",".","addAll","(","tableRowType",".","getFieldNames","(",")",")",";","}","}","else","{","for","(","int","i","=","0",";","i","<","targetColumnList",".","size","(",")",";","i++",")","{","SqlIdentifier","id","=","(","SqlIdentifier",")","targetColumnList",".","get","(","i",")",";","RelDataTypeField","field","=\n","SqlValidatorUtil",".","getTargetField","(","tableRowType,","typeFactory,","id,","catalogReader,","targetTable",")",";","assert","field","!=","null",":","\"column","\"","+","id",".","toString","(",")","+","\"","not","found\"",";","targetColumnNames",".","add","(","field",".","getName","(",")",")",";","}","}","\n\n","final","Blackboard","bb","=\n","createInsertBlackboard","(","targetTable,","sourceRef,","targetColumnNames",")",";","\n\n","//","Next,","assign","expressions","for","generated","columns",".","final","List<ColumnStrategy>","strategies","=","targetTable",".","getColumnStrategies","(",")",";","for","(","String","columnName",":","targetColumnNames",")","{","final","int","i","=","tableRowType",".","getFieldNames","(",")",".","indexOf","(","columnName",")",";","final","RexNode","expr",";","switch","(","strategies",".","get","(","i",")",")","{","case","STORED:\n","final","InitializerExpressionFactory","f","=\n","targetTable",".","maybeUnwrap","(","InitializerExpressionFactory",".","class",")",".","orElse","(","NullInitializerExpressionFactory",".","INSTANCE",")",";","expr","=","f",".","newColumnDefaultValue","(","targetTable,","i,","bb",")",";","break",";","case","VIRTUAL:\n","expr","=","null",";","break",";","default:\n","expr","=","requireNonNull","(","bb",".","nameToNodeMap,","\"nameToNodeMap\"",")",".","get","(","columnName",")",";","}","//","expr","is","nullable,","however,","all","the","nulls","will","be","removed","in","the","loop","below\n","columnExprs",".","add","(","castNonNull","(","expr",")",")",";","}","\n\n","//","Remove","virtual","columns","from","the","list",".","for","(","int","i","=","0",";","i","<","targetColumnNames",".","size","(",")",";","i++",")","{","if","(","columnExprs",".","get","(","i",")","==","null",")","{","columnExprs",".","remove","(","i",")",";","targetColumnNames",".","remove","(","i",")",";","--i",";","}","}"],"docstring_tokens":["Given","an","INSERT","statement,","collects","the","list","of","names","to","be","populated","and","the","expressions","to","put","in","them"],"prompt_tokens":[]}
{"code_tokens":["public","static","SqlTypeName","strictTypeName","(","RelDataType","type",")","{","final","SqlTypeName","typeName","=","type",".","getSqlTypeName","(",")",";","switch","(","typeName",")","{","case","INTEGER:\n","case","TINYINT:\n","case","SMALLINT:\n","return","SqlTypeName",".","DECIMAL",";","case","REAL:\n","case","FLOAT:\n","return","SqlTypeName",".","DOUBLE",";","case","VARBINARY:\n","return","SqlTypeName",".","BINARY",";","case","VARCHAR:\n","return","SqlTypeName",".","CHAR",";","default:\n","return","typeName",";","}"],"docstring_tokens":["Returns","the","strict","literal","type","for","a","given","type"],"prompt_tokens":[]}
{"code_tokens":["public","void","printAsJava","(","PrintWriter","pw",")","{","Util",".","asStringBuilder","(","pw,","sb","->\n","appendAsJava","(","value,","sb,","typeName,","type,","true,\n","RexDigestIncludeType",".","NO_TYPE",")",")",";"],"docstring_tokens":["Prints","the","value","this","literal","as","a","Java","string","constant"],"prompt_tokens":[]}
{"code_tokens":["public","@Nullable","Object","getValue2","(",")","{","if","(","value","==","null",")","{","return","null",";","}","switch","(","typeName",")","{","case","CHAR:\n","return","getValueAs","(","String",".","class",")",";","case","DECIMAL:\n","case","TIMESTAMP:\n","case","TIMESTAMP_WITH_LOCAL_TIME_ZONE:\n","return","getValueAs","(","Long",".","class",")",";","case","DATE:\n","case","TIME:\n","case","TIME_WITH_LOCAL_TIME_ZONE:\n","return","getValueAs","(","Integer",".","class",")",";","default:\n","return","value",";","}"],"docstring_tokens":["Returns","the","value","of","this","literal,","in","the","form","that","the","calculator","program","builder","wants","it"],"prompt_tokens":[]}
{"code_tokens":["public","@Nullable","Object","getValue3","(",")","{","if","(","value","==","null",")","{","return","null",";","}","switch","(","typeName",")","{","case","DECIMAL:\n","assert","value","instanceof","BigDecimal",";","return","value",";","default:\n","return","getValue2","(",")",";","}"],"docstring_tokens":["Returns","the","value","of","this","literal,","in","the","form","that","the","rex-to-lix","translator","wants","it"],"prompt_tokens":[]}
{"code_tokens":["public","@Nullable","Comparable","getValue4","(",")","{","if","(","value","==","null",")","{","return","null",";","}","switch","(","typeName",")","{","case","TIMESTAMP:\n","case","TIMESTAMP_WITH_LOCAL_TIME_ZONE:\n","return","getValueAs","(","Long",".","class",")",";","case","DATE:\n","case","TIME:\n","case","TIME_WITH_LOCAL_TIME_ZONE:\n","return","getValueAs","(","Integer",".","class",")",";","default:\n","return","value",";","}"],"docstring_tokens":["Returns","the","value","of","this","literal,","in","the","form","that","RexInterpreter","wants","it"],"prompt_tokens":[]}
{"code_tokens":["@SuppressWarnings","(","\"UnusedDeclaration\"",")","public","static","CalcitePrepare",".","SparkHandler","instance","(",")","{","return","Holder",".","INSTANCE",";"],"docstring_tokens":["Creates","a","SparkHandlerImpl,","initializing","on","first","call"],"prompt_tokens":[]}
{"code_tokens":["private","static","List<Integer>","getAggColumns","(","RexCall","pigAggCall",")","{","if","(","isMultisetProjection","(","pigAggCall",")",")","{","return","getColsFromMultisetProjection","(","pigAggCall",")",";","}","\n\n","//","The","only","operand","should","be","PIG_BAG\n","assert","pigAggCall",".","getOperands","(",")",".","size","(",")","==","1\n","&&","pigAggCall",".","getOperands","(",")",".","get","(","0",")","instanceof","RexCall",";","final","RexCall","pigBag","=","(","RexCall",")","pigAggCall",".","getOperands","(",")",".","get","(","0",")",";","assert","pigBag",".","getOperands","(",")",".","size","(",")","==","1",";","final","RexNode","pigBagInput","=","pigBag",".","getOperands","(",")",".","get","(","0",")",";","\n\n","if","(","pigBagInput","instanceof","RexCall",")","{","//","Multiset-projection","call\n","final","RexCall","multisetProjection","=","(","RexCall",")","pigBagInput",";","assert","isMultisetProjection","(","multisetProjection",")",";","return","getColsFromMultisetProjection","(","multisetProjection",")",";","}","return","new","ArrayList<>","(",")",";"],"docstring_tokens":["Returns","a","list","of","columns","accessed","in","a","Pig","aggregate","UDF","call"],"prompt_tokens":[]}
{"code_tokens":["private","void","doGenerateWithoutMultisetFlatten","(","LOGenerate","gen,","List<Integer>","multisetFlattens,\n","List<String>","flattenOutputAliases",")","throws","FrontendException","{","final","List<LogicalExpressionPlan>","pigProjections","=","gen",".","getOutputPlans","(",")",";","final","List<RexNode>","innerCols","=","new","ArrayList<>","(",")",";","//","For","projection","expressions\n","final","List<String>","fieldAlias","=","new","ArrayList<>","(",")",";","//","For","projection","names/alias\n\n","if","(","gen",".","getOutputPlanSchemas","(",")","==","null",")","{","throw","new","IllegalArgumentException","(","\"Generate","statement","at","line","\"","+","gen",".","getLocation","(",")",".","line","(",")","+","\"","produces","empty","schema\"",")",";","}","\n\n","for","(","int","i","=","0",";","i","<","pigProjections",".","size","(",")",";","i++",")","{","final","LogicalSchema","outputFieldSchema","=","gen",".","getOutputPlanSchemas","(",")",".","get","(","i",")",";","RexNode","rexNode","=","PigRelExVisitor",".","translatePigEx","(","builder,","pigProjections",".","get","(","i",")",")",";","RelDataType","dataType","=","rexNode",".","getType","(",")",";","//","If","project","field","in","null","constant,","dataType","will","by","NULL","type,","need","to","check","the","original\n","//","type","of","Pig","Schema\n","if","(","dataType",".","getSqlTypeName","(",")","==","SqlTypeName",".","NULL",")","{","dataType","=","PigTypes",".","convertSchema","(","outputFieldSchema,","true",")",";","}","\n\n","if","(","outputFieldSchema",".","size","(",")","==","1","&&","!gen",".","getFlattenFlags","(",")","[i]",")","{","final","RelDataType","scriptType","=","PigTypes",".","convertSchemaField","(","outputFieldSchema",".","getField","(","0",")",")",";","if","(","dataType",".","getSqlTypeName","(",")","==","SqlTypeName",".","ANY\n","||","!SqlTypeUtil",".","isComparable","(","dataType,","scriptType",")",")","{","//","Script","schema","is","different","from","project","expression","schema,","need","to","do","type","cast\n","rexNode","=","builder",".","getRexBuilder","(",")",".","makeCast","(","scriptType,","rexNode",")",";","}","}","\n\n","if","(","gen",".","getFlattenFlags","(",")","[i]","&&","dataType",".","isStruct","(",")","&&","(","dataType",".","getFieldCount","(",")",">","0","||","dataType","instanceof","DynamicTupleRecordType",")",")","{","if","(","dataType","instanceof","DynamicTupleRecordType",")","{","(","(","DynamicTupleRecordType",")","dataType",")",".","resize","(","outputFieldSchema",".","size","(",")",")",";","for","(","int","j","=","0",";","j","<","outputFieldSchema",".","size","(",")",";","j++",")","{","final","RelDataType","scriptType","=","PigTypes",".","convertSchemaField","(","outputFieldSchema",".","getField","(","j",")",")",";","RexNode","exp","=","builder",".","call","(","SqlStdOperatorTable",".","ITEM,","rexNode,","builder",".","literal","(","j","+","1",")",")",";","innerCols",".","add","(","builder",".","getRexBuilder","(",")",".","makeCast","(","scriptType,","exp",")",")",";","fieldAlias",".","add","(","outputFieldSchema",".","getField","(","j",")",".","alias",")",";","}","}","else","{","for","(","int","j","=","0",";","j","<","dataType",".","getFieldCount","(",")",";","j++",")","{","innerCols",".","add","(","builder",".","dot","(","rexNode,","j",")",")",";","fieldAlias",".","add","(","outputFieldSchema",".","getField","(","j",")",".","alias",")",";","}","}","}","else","{","innerCols",".","add","(","rexNode",")",";","String","alias","=","null",";","if","(","outputFieldSchema",".","size","(",")","==","1",")","{","//","If","simple","type,","take","user","alias","if","available\n","alias","=","outputFieldSchema",".","getField","(","0",")",".","alias",";","}","fieldAlias",".","add","(","alias",")",";","if","(","gen",".","getFlattenFlags","(",")","[i]","&&","dataType",".","getFamily","(",")","instanceof","MultisetSqlType",")","{","multisetFlattens",".","add","(","innerCols",".","size","(",")","-","1",")",";","for","(","LogicalSchema",".","LogicalFieldSchema","field",":","outputFieldSchema",".","getFields","(",")",")","{","String","colAlias","=","field",".","alias",";","if","(","colAlias",".","contains","(","\"::\"",")",")","{","String[]","tokens","=","colAlias",".","split","(","\"::\"",")",";","colAlias","=","tokens[tokens",".","length","-","1]",";","}","flattenOutputAliases",".","add","(","colAlias",")",";","}","}","}","}","builder",".","project","(","innerCols,","fieldAlias,","true",")",";"],"docstring_tokens":["Projects","all","expressions","in","LOGenerate","output","expressions,","but","not","consider","flatten","multiset","columns","yet"],"prompt_tokens":[]}
{"code_tokens":["public","static","Config","config","(","ConverterRule","converterRule,\n","RelBuilderFactory","relBuilderFactory",")","{","final","RelOptRuleOperand","operand","=","converterRule",".","getOperand","(",")",";","assert","operand",".","childPolicy","==","RelOptRuleOperandChildPolicy",".","ANY",";","return","ImmutableTraitMatchingRule",".","Config",".","builder","(",")",".","withRelBuilderFactory","(","relBuilderFactory",")",".","withDescription","(","\"TraitMatchingRule:","\"","+","converterRule",")",".","withOperandSupplier","(","b0","->\n","b0",".","operand","(","operand",".","getMatchedClass","(",")",")",".","oneInput","(","b1","->\n","b1",".","operand","(","RelNode",".","class",")",".","anyInputs","(",")",")",")",".","withConverterRule","(","converterRule",")",".","build","(",")",";"],"docstring_tokens":["Creates","a","configuration","for","a","TraitMatchingRule"],"prompt_tokens":[]}
{"code_tokens":["@Override","public","Object","current","(",")","{","if","(","fieldTypes",".","size","(",")","==","1",")","{","//","If","we","just","have","one","field,","produce","it","directly\n","return","currentRowField","(","0",")",";","}","else","{","//","Build","an","array","with","all","fields","in","this","row\n","Object[]","row","=","new","Object[fieldTypes",".","size","(",")","]",";","for","(","int","i","=","0",";","i","<","fieldTypes",".","size","(",")",";","i++",")","{","row[i]","=","currentRowField","(","i",")",";","}","\n\n","return","row",";","}"],"docstring_tokens":["Produces","the","next","row","from","the","results"],"prompt_tokens":[]}
{"code_tokens":["private","@Nullable","Object","currentRowField","(","int","index",")","{","assert","current","!=","null",";","final","Object","o","=","current",".","get","(","index,\n","CodecRegistry",".","DEFAULT",".","codecFor","(","current",".","getColumnDefinitions","(",")",".","get","(","index",")",".","getType","(",")",")",")",";","\n\n","return","convertToEnumeratorObject","(","o",")",";"],"docstring_tokens":["Get","a","field","for","the","current","row","from","the","underlying","object"],"prompt_tokens":[]}
{"code_tokens":["public","List<RelDataType>","getFieldTypes","(","RelDataTypeFactory","typeFactory",")","{","if","(","fieldTypes","==","null",")","{","fieldTypes","=","new","ArrayList<>","(",")",";","CsvEnumerator",".","deduceRowType","(","(","JavaTypeFactory",")","typeFactory,","source,\n","fieldTypes,","isStream","(",")",")",";","}","return","fieldTypes",";"],"docstring_tokens":["Returns","the","field","types","of","this","CSV","table"],"prompt_tokens":[]}
{"code_tokens":["protected","boolean","isStream","(",")","{","return","false",";"],"docstring_tokens":["Returns","whether","the","table","represents","a","stream"],"prompt_tokens":[]}
{"code_tokens":["public","boolean","isHomogeneous","(","boolean","compareNames",")","{","RelDataType","unionType","=","getRowType","(",")",";","for","(","RelNode","input",":","getInputs","(",")",")","{","if","(","!RelOptUtil",".","areRowTypesEqual","(","input",".","getRowType","(",")",",","unionType,","compareNames",")",")","{","return","false",";","}","}","return","true",";"],"docstring_tokens":["Returns","whether","all","the","inputs","of","this","set","operator","have","the","same","row","type","as","its","output","row"],"prompt_tokens":[]}
{"code_tokens":["public","static","SqlParserFixture","forParser","(",")","{","return","new","SqlParserTest","(",")",".","fixture","(",")",";"],"docstring_tokens":["Creates","a","fixture","for","parser","tests"],"prompt_tokens":[]}
{"code_tokens":["public","static","SqlValidatorFixture","forValidator","(",")","{","return","SqlValidatorTestCase",".","FIXTURE",";"],"docstring_tokens":["Creates","a","fixture","for","validation","tests"],"prompt_tokens":[]}
{"code_tokens":["public","static","SqlToRelFixture","forSqlToRel","(",")","{","return","SqlToRelFixture",".","DEFAULT",";"],"docstring_tokens":["Creates","a","fixture","for","SQL-to-Rel","tests"],"prompt_tokens":[]}
{"code_tokens":["public","static","RelOptFixture","forRules","(",")","{","return","RelOptFixture",".","DEFAULT",";"],"docstring_tokens":["Creates","a","fixture","for","rule","tests"],"prompt_tokens":[]}
{"code_tokens":["public","static","SqlOperatorFixture","forOperators","(","boolean","execute",")","{","return","execute\n","?","SqlOperatorFixtureImpl",".","DEFAULT",".","withTester","(","t","->","SqlOperatorTest",".","TESTER",")",":","SqlOperatorFixtureImpl",".","DEFAULT",";"],"docstring_tokens":["Creates","a","fixture","for","operator","tests"],"prompt_tokens":[]}
{"code_tokens":["public","static","RelMetadataFixture","forMetadata","(",")","{","return","RelMetadataFixture",".","DEFAULT",";"],"docstring_tokens":["Creates","a","fixture","for","metadata","tests"],"prompt_tokens":[]}
{"code_tokens":["public","Set<LatticeTable>","tables","(",")","{","return","rootNode",".","descendants",".","stream","(",")",".","map","(","n","->","n",".","table",")",".","collect","(","Collectors",".","toCollection","(","LinkedHashSet::new",")",")",";"],"docstring_tokens":["Returns","the","set","of","tables","in","this","lattice"],"prompt_tokens":[]}
{"code_tokens":["private","Collection<SqlOperator>","lookUpOperators","(","String","name,","SqlSyntax","syntax,\n","SqlNameMatcher","nameMatcher",")","{","//","Case","sensitive","only","works","for","UDFs",".","//","Always","look","up","built-in","operators","case-insensitively",".","Even","in","sessions\n","//","with","unquotedCasing=UNCHANGED","and","caseSensitive=true",".","if","(","nameMatcher",".","isCaseSensitive","(",")","&&","!","(","this","instanceof","SqlStdOperatorTable",")",")","{","return","caseSensitiveOperators",".","get","(","new","CaseSensitiveKey","(","name,","syntax",")",")",";","}","else","{","return","caseInsensitiveOperators",".","get","(","new","CaseInsensitiveKey","(","name,","syntax",")",")",";","}"],"docstring_tokens":["Look","up","operators","based","on","case-sensitiveness"],"prompt_tokens":[]}
{"code_tokens":["public","void","register","(","SqlOperator","op",")","{","//","Register","both","for","case-sensitive","and","case-insensitive","look","up",".","caseSensitiveOperators",".","put","(","new","CaseSensitiveKey","(","op",".","getName","(",")",",","op",".","getSyntax","(",")",")",",","op",")",";","caseInsensitiveOperators",".","put","(","new","CaseInsensitiveKey","(","op",".","getName","(",")",",","op",".","getSyntax","(",")",")",",","op",")",";"],"docstring_tokens":["Registers","a","function","or","operator","in","the","table"],"prompt_tokens":[]}
{"code_tokens":["private","static","void","applyMapping","(","ObjectNode","parent,","String","key,","String","type",")","{","final","int","index","=","key",".","indexOf","(","'",".","'",")",";","if","(","index",">","-1",")","{","String","prefix","=","key",".","substring","(","0,","index",")",";","String","suffix","=","key",".","substring","(","index","+","1,","key",".","length","(",")",")",";","applyMapping","(","parent",".","with","(","prefix",")",".","with","(","\"properties\"",")",",","suffix,","type",")",";","}","else","{","parent",".","with","(","key",")",".","put","(","\"type\",","type",")",";","}"],"docstring_tokens":["Creates","nested","mappings","for","an","index"],"prompt_tokens":[]}
{"code_tokens":["RestClient","restClient","(",")","{","if","(","client","!=","null",")","{","return","client",";","}","\n\n","final","RestClient","client","=","RestClient",".","builder","(","httpHost","(",")",")",".","setRequestConfigCallback","(","requestConfigBuilder","->","requestConfigBuilder\n",".","setConnectTimeout","(","60","*","1000",")","//","default","1000\n",".","setSocketTimeout","(","3","*","60","*","1000",")",")","//","default","30000\n",".","build","(",")",";","closer",".","add","(","client",")",";","this",".","client","=","client",";","return","client",";"],"docstring_tokens":["Low-level","http","rest","client","connected","to","current","embedded","elastic","search","instance"],"prompt_tokens":[]}
{"code_tokens":["public","static","List<RelOptMaterialization>","getApplicableMaterializations","(","RelNode","rel,","List<RelOptMaterialization>","materializations",")","{","DirectedGraph<List<String>,","DefaultEdge>","usesGraph","=\n","DefaultDirectedGraph",".","create","(",")",";","final","Map<List<String>,","RelOptMaterialization>","qnameMap","=","new","HashMap<>","(",")",";","for","(","RelOptMaterialization","materialization",":","materializations",")","{","//","If","materialization","is","a","tile","in","a","lattice,","we","will","deal","with","it","shortly",".","if","(","materialization",".","qualifiedTableName","!=","null\n","&&","materialization",".","starTable","==","null",")","{","final","List<String>","qname","=","materialization",".","qualifiedTableName",";","qnameMap",".","put","(","qname,","materialization",")",";","for","(","RelOptTable","usedTable\n",":","RelOptUtil",".","findTables","(","materialization",".","queryRel",")",")","{","usesGraph",".","addVertex","(","qname",")",";","usesGraph",".","addVertex","(","usedTable",".","getQualifiedName","(",")",")",";","usesGraph",".","addEdge","(","usedTable",".","getQualifiedName","(",")",",","qname",")",";","}","}","}","\n\n","//","Use","a","materialization","if","uses","at","least","one","of","the","tables","are","used","by\n","//","the","query",".","(","Simple","rule","that","includes","some","materializations","we","won't\n","//","actually","use",".",")","//","For","example,","given","materializations:\n","//","T","=","Emps","Join","Depts\n","//","T2","=","T","Group","by","C1\n","//","the","graph","will","contain\n","//","(","T,","Emps",")",",","(","T,","Depts",")",",","(","T2,","T",")","//","and","therefore","we","can","deduce","T2","uses","Emps",".","final","Graphs",".","FrozenGraph<List<String>,","DefaultEdge>","frozenGraph","=\n","Graphs",".","makeImmutable","(","usesGraph",")",";","final","Set<RelOptTable>","queryTablesUsed","=","RelOptUtil",".","findTables","(","rel",")",";","final","List<RelOptMaterialization>","applicableMaterializations","=\n","new","ArrayList<>","(",")",";","for","(","List<String>","qname",":","TopologicalOrderIterator",".","of","(","usesGraph",")",")","{","RelOptMaterialization","materialization","=","qnameMap",".","get","(","qname",")",";","if","(","materialization","!=","null\n","&&","usesTable","(","materialization",".","qualifiedTableName,","queryTablesUsed,","frozenGraph",")",")","{","applicableMaterializations",".","add","(","materialization",")",";","}","}","return","applicableMaterializations",";"],"docstring_tokens":["Returns","a","list","of","materializations","that","can","potentially","be","used","by","the","query"],"prompt_tokens":[]}
{"code_tokens":["public","final","<T","extends","@Nullable","RexNode>","boolean","mutate","(","List<T>","exprList",")","{","int","changeCount","=","0",";","for","(","int","i","=","0",";","i","<","exprList",".","size","(",")",";","i++",")","{","T","expr","=","exprList",".","get","(","i",")",";","T","expr2","=","(","T",")","apply","(","expr",")",";","//","Avoid","NPE","if","expr","is","null\n","if","(","expr","!=","expr2",")","{","++changeCount",";","exprList",".","set","(","i,","expr2",")",";","}","}","return","changeCount",">","0",";"],"docstring_tokens":["Applies","this","shuttle","to","each","expression","in","a","list"],"prompt_tokens":[]}
{"code_tokens":["public","final","@PolyNull","RexNode","apply","(","@PolyNull","RexNode","expr",")","{","return","(","expr","==","null",")","?","expr",":","expr",".","accept","(","this",")",";"],"docstring_tokens":["Applies","this","shuttle","to","an","expression,","or","returns","null","if","the","expression","is","null"],"prompt_tokens":[]}
{"code_tokens":["public","@Nullable","RelNode","rewrite","(","RelNode","node",")","{","return","RelOptMaterialization",".","tryUseStar","(","node,","starRelOptTable",")",";"],"docstring_tokens":["Rewrites","a","relational","expression","to","use","a","lattice"],"prompt_tokens":[]}
{"code_tokens":["public","static","List<RelDataTypeField>","getExtendedColumns","(","@Nullable","SqlValidator","validator,","SqlValidatorTable","table,","SqlNodeList","extendedColumns",")","{","final","ImmutableList",".","Builder<RelDataTypeField>","extendedFields","=\n","ImmutableList",".","builder","(",")",";","final","ExtensibleTable","extTable","=","table",".","unwrap","(","ExtensibleTable",".","class",")",";","int","extendedFieldOffset","=\n","extTable","==","null\n","?","table",".","getRowType","(",")",".","getFieldCount","(",")",":","extTable",".","getExtendedColumnOffset","(",")",";","for","(","final","Pair<SqlIdentifier,","SqlDataTypeSpec>","pair",":","pairs","(","extendedColumns",")",")","{","final","SqlIdentifier","identifier","=","pair",".","left",";","final","SqlDataTypeSpec","type","=","pair",".","right",";","extendedFields",".","add","(","new","RelDataTypeFieldImpl","(","identifier",".","toString","(",")",",\n","extendedFieldOffset++,\n","type",".","deriveType","(","requireNonNull","(","validator,","\"validator\"",")",")",")",")",";","}","return","extendedFields",".","build","(",")",";"],"docstring_tokens":["Gets","a","list","of","extended","columns","with","field","indices","to","the","underlying","table"],"prompt_tokens":[]}
{"code_tokens":["public","static","ImmutableMap<Integer,","RelDataTypeField>","getIndexToFieldMap","(","List<RelDataTypeField>","sourceFields,\n","RelDataType","targetFields",")","{","final","ImmutableMap",".","Builder<Integer,","RelDataTypeField>","output","=\n","ImmutableMap",".","builder","(",")",";","for","(","final","RelDataTypeField","source",":","sourceFields",")","{","final","RelDataTypeField","target","=","targetFields",".","getField","(","source",".","getName","(",")",",","true,","false",")",";","if","(","target","!=","null",")","{","output",".","put","(","source",".","getIndex","(",")",",","target",")",";","}","}","return","output",".","build","(",")",";"],"docstring_tokens":["Gets","a","map","of","indexes","from","the","source","to","fields","in","the","target","for","the","intersecting","set","of","source","and","target","fields"],"prompt_tokens":[]}
{"code_tokens":["public","static","ImmutableBitSet","getOrdinalBitSet","(","RelDataType","sourceRowType,\n","Map<Integer,","RelDataTypeField>","indexToField",")","{","ImmutableBitSet","source","=","ImmutableBitSet",".","of","(","Util",".","transform","(","sourceRowType",".","getFieldList","(",")",",","RelDataTypeField::getIndex",")",")",";","//","checkerframework:","found",":","Set<@KeyFor","(","\"indexToField\"",")","Integer>\n","//noinspection","RedundantCast\n","ImmutableBitSet","target","=\n","ImmutableBitSet",".","of","(","(","Iterable<Integer>",")","indexToField",".","keySet","(",")",")",";","return","source",".","intersect","(","target",")",";"],"docstring_tokens":["Gets","the","bit-set","to","the","column","ordinals","in","the","source","for","columns","that","intersect","in","the","target"],"prompt_tokens":[]}
{"code_tokens":["public","static","String","uniquify","(","@Nullable","String","name,","Set<String>","usedNames,\n","Suggester","suggester",")","{","if","(","name","!=","null",")","{","if","(","usedNames",".","add","(","name",")",")","{","return","name",";","}","}","final","String","originalName","=","name",";","for","(","int","j","=","0",";",";","j++",")","{","name","=","suggester",".","apply","(","originalName,","j,","usedNames",".","size","(",")",")",";","if","(","usedNames",".","add","(","name",")",")","{","return","name",";","}","}"],"docstring_tokens":["Makes","a","name","distinct","from","other","names","which","have","already","been","used,","adds","it","to","the","list,","and","returns","it"],"prompt_tokens":[]}
{"code_tokens":["public","static","@Nullable","RelDataTypeField","getTargetField","(","RelDataType","rowType,","RelDataTypeFactory","typeFactory,\n","SqlIdentifier","id,","SqlValidatorCatalogReader","catalogReader,\n","@Nullable","RelOptTable","table",")","{","final","Table","t","=","table","==","null","?","null",":","table",".","unwrap","(","Table",".","class",")",";","if","(","!","(","t","instanceof","CustomColumnResolvingTable",")",")","{","final","SqlNameMatcher","nameMatcher","=","catalogReader",".","nameMatcher","(",")",";","return","nameMatcher",".","field","(","rowType,","id",".","getSimple","(",")",")",";","}","\n\n","final","List<Pair<RelDataTypeField,","List<String>>>","entries","=\n","(","(","CustomColumnResolvingTable",")","t",")",".","resolveColumn","(","rowType,","typeFactory,","id",".","names",")",";","switch","(","entries",".","size","(",")",")","{","case","1:\n","if","(","!entries",".","get","(","0",")",".","getValue","(",")",".","isEmpty","(",")",")","{","return","null",";","}","return","entries",".","get","(","0",")",".","getKey","(",")",";","default:\n","return","null",";","}"],"docstring_tokens":["Resolve","a","target","column","name","in","the","target","table"],"prompt_tokens":[]}
{"code_tokens":["private","static","ImmutableBitSet","analyzeGroupExpr","(","SqlValidatorScope","scope,\n","GroupAnalyzer","groupAnalyzer,\n","SqlNode","groupExpr",")","{","final","SqlNode","expandedGroupExpr","=\n","scope",".","getValidator","(",")",".","expand","(","groupExpr,","scope",")",";","\n\n","switch","(","expandedGroupExpr",".","getKind","(",")",")","{","case","ROW:\n","return","ImmutableBitSet",".","union","(","analyzeGroupTuple","(","scope,","groupAnalyzer,\n","(","(","SqlCall",")","expandedGroupExpr",")",".","getOperandList","(",")",")",")",";","case","OTHER:\n","if","(","expandedGroupExpr","instanceof","SqlNodeList\n","&&","(","(","SqlNodeList",")","expandedGroupExpr",")",".","size","(",")","==","0",")","{","return","ImmutableBitSet",".","of","(",")",";","}","break",";","default:\n","break",";","}","\n\n","final","int","ref","=","lookupGroupExpr","(","groupAnalyzer,","expandedGroupExpr",")",";","if","(","expandedGroupExpr","instanceof","SqlIdentifier",")","{","//","SQL","2003","does","not","allow","expressions","of","column","references\n","SqlIdentifier","expr","=","(","SqlIdentifier",")","expandedGroupExpr",";","\n\n","//","column","references","should","be","fully","qualified",".","assert","expr",".","names",".","size","(",")",">=","2",";","String","originalRelName","=","expr",".","names",".","get","(","0",")",";","String","originalFieldName","=","expr",".","names",".","get","(","1",")",";","\n\n","final","SqlNameMatcher","nameMatcher","=\n","scope",".","getValidator","(",")",".","getCatalogReader","(",")",".","nameMatcher","(",")",";","final","SqlValidatorScope",".","ResolvedImpl","resolved","=\n","new","SqlValidatorScope",".","ResolvedImpl","(",")",";","scope",".","resolve","(","ImmutableList",".","of","(","originalRelName",")",",","nameMatcher,","false,\n","resolved",")",";","\n\n","assert","resolved",".","count","(",")","==","1",";","final","SqlValidatorScope",".","Resolve","resolve","=","resolved",".","only","(",")",";","final","RelDataType","rowType","=","resolve",".","rowType","(",")",";","final","int","childNamespaceIndex","=","resolve",".","path",".","steps","(",")",".","get","(","0",")",".","i",";","\n\n","int","namespaceOffset","=","0",";","\n\n","if","(","childNamespaceIndex",">","0",")","{","//","If","not","the","first","child,","need","to","figure","out","the","width","of\n","//","output","types","from","all","the","preceding","namespaces\n","final","SqlValidatorScope","ancestorScope","=","resolve",".","scope",";","assert","ancestorScope","instanceof","ListScope",";","List<SqlValidatorNamespace>","children","=\n","(","(","ListScope",")","ancestorScope",")",".","getChildren","(",")",";","\n\n","for","(","int","j","=","0",";","j","<","childNamespaceIndex",";","j++",")","{","namespaceOffset","+=\n","children",".","get","(","j",")",".","getRowType","(",")",".","getFieldCount","(",")",";","}","}","\n\n","RelDataTypeField","field","=","requireNonNull","(","nameMatcher",".","field","(","rowType,","originalFieldName",")",",\n","(",")","->","\"field","\"","+","originalFieldName","+","\"","is","not","found","in","\"","+","rowType\n","+","\"","with","\"","+","nameMatcher",")",";","int","origPos","=","namespaceOffset","+","field",".","getIndex","(",")",";","\n\n","groupAnalyzer",".","groupExprProjection",".","put","(","origPos,","ref",")",";","}","\n\n","return","ImmutableBitSet",".","of","(","ref",")",";"],"docstring_tokens":["Analyzes","a","component","of","a","tuple","in","a","GROUPING","SETS","clause"],"prompt_tokens":[]}
{"code_tokens":["public","static","CalciteSchema",".","@Nullable","TypeEntry","getTypeEntry","(","CalciteSchema","rootSchema,","SqlIdentifier","typeName",")","{","final","String","name",";","final","List<String>","path",";","if","(","typeName",".","isSimple","(",")",")","{","path","=","ImmutableList",".","of","(",")",";","name","=","typeName",".","getSimple","(",")",";","}","else","{","path","=","Util",".","skipLast","(","typeName",".","names",")",";","name","=","Util",".","last","(","typeName",".","names",")",";","}","CalciteSchema","schema","=","rootSchema",";","for","(","String","p",":","path",")","{","if","(","schema","==","rootSchema\n","&&","SqlNameMatchers",".","withCaseSensitive","(","true",")",".","matches","(","p,","schema",".","getName","(",")",")",")","{","continue",";","}","schema","=","schema",".","getSubSchema","(","p,","true",")",";","if","(","schema","==","null",")","{","return","null",";","}","}","return","schema",".","getType","(","name,","false",")",";"],"docstring_tokens":["Finds","a","org.apache.calcite.jdbc.CalciteSchema.TypeEntry","in","a","given","schema","whose","type","has","the","given","name,","possibly","qualified"],"prompt_tokens":[]}
{"code_tokens":["public","static","@Nullable","SqlOperator","lookupSqlFunctionByID","(","SqlOperatorTable","opTab,\n","SqlIdentifier","funName,\n","@Nullable","SqlFunctionCategory","funcType",")","{","if","(","funName",".","isSimple","(",")",")","{","final","List<SqlOperator>","list","=","new","ArrayList<>","(",")",";","opTab",".","lookupOperatorOverloads","(","funName,","funcType,","SqlSyntax",".","FUNCTION,","list,\n","SqlNameMatchers",".","withCaseSensitive","(","funName",".","isComponentQuoted","(","0",")",")",")",";","if","(","list",".","size","(",")","==","1",")","{","return","list",".","get","(","0",")",";","}","}","return","null",";"],"docstring_tokens":["Lookup","sql","function","by","sql","identifier","and","function","category"],"prompt_tokens":[]}
{"code_tokens":["public","static","FlatAggregate","flatten","(","SqlCall","call",")","{","return","flattenRecurse","(","null,","null,","null,","call",")",";"],"docstring_tokens":["Flattens","an","aggregate","call"],"prompt_tokens":[]}
{"code_tokens":["private","boolean","containsAvgStddevVarCall","(","List<AggregateCall>","aggCallList",")","{","return","aggCallList",".","stream","(",")",".","anyMatch","(","this::canReduce",")",";"],"docstring_tokens":["Returns","whether","any","of","the","aggregates","are","calls","to","AVG,","STDDEV_,","VAR_"],"prompt_tokens":[]}
{"code_tokens":["public","boolean","canReduce","(","AggregateCall","call",")","{","return","functionsToReduce",".","contains","(","call",".","getAggregation","(",")",".","getKind","(",")",")","&&","config",".","extraCondition","(",")",".","test","(","call",")",";"],"docstring_tokens":["Returns","whether","this","rule","can","reduce","a","given","aggregate","function","call"],"prompt_tokens":[]}
{"code_tokens":["protected","void","newCalcRel","(","RelBuilder","relBuilder,\n","RelDataType","rowType,\n","List<RexNode>","exprs",")","{","relBuilder",".","project","(","exprs,","rowType",".","getFieldNames","(",")",")",";"],"docstring_tokens":["Adds","a","calculation","with","the","expressions","to","compute","the","original","aggregate","calls","from","the","decomposed","ones"],"prompt_tokens":[]}
{"code_tokens":["@Override","protected","Expression\n","tryOptimizeNewInstance","(","NewExpression","newExpression",")","{","if","(","newExpression",".","type","instanceof","Class\n","&&","isConstant","(","newExpression",".","arguments",")","&&","isConstructorDeterministic","(","newExpression",")",")","{","//","Reuse","instance","creation","when","class","is","immutable:","new","BigInteger","(","3",")","return","createField","(","newExpression",")",";","}","return","newExpression",";"],"docstring_tokens":["Optimizes","new","Type","constructs"],"prompt_tokens":[]}
{"code_tokens":["protected","Expression","tryOptimizeMethodCall","(","MethodCallExpression\n","methodCallExpression",")","{","if","(","isConstant","(","methodCallExpression",".","targetExpression",")","&&","isConstant","(","methodCallExpression",".","expressions",")","&&","isMethodDeterministic","(","methodCallExpression",".","method",")",")","{","return","createField","(","methodCallExpression",")",";","}","return","methodCallExpression",";"],"docstring_tokens":["Optimized","method","call,","possibly","converting","it","to","final","static","field"],"prompt_tokens":[]}
{"code_tokens":["public","RelWriter","explainCalc","(","RelWriter","pw",")","{","if","(","pw","instanceof","RelJsonWriter",")","{","return","pw\n",".","item","(","\"exprs\",","exprs",")",".","item","(","\"projects\",","projects",")",".","item","(","\"condition\",","condition",")",".","item","(","\"inputRowType\",","inputRowType",")",".","item","(","\"outputRowType\",","outputRowType",")",";","}","else","{","return","collectExplainTerms","(","\"\",","pw,","pw",".","getDetailLevel","(",")",")",";","}"],"docstring_tokens":["Writes","an","explanation","of","the","expressions","in","this","program","to","a","plan","writer"],"prompt_tokens":[]}
{"code_tokens":["public","RelWriter","collectExplainTerms","(","String","prefix,\n","RelWriter","pw,\n","SqlExplainLevel","level",")","{","final","List<RelDataTypeField>","inFields","=","inputRowType",".","getFieldList","(",")",";","final","List<RelDataTypeField>","outFields","=","outputRowType",".","getFieldList","(",")",";","assert","outFields",".","size","(",")","==","projects",".","size","(",")",":","\"outFields",".","length=\"","+","outFields",".","size","(",")","+","\",","projects",".","length=\"","+","projects",".","size","(",")",";","pw",".","item","(","prefix","+","\"expr#0\"\n","+","(","(","inFields",".","size","(",")",">","1",")","?","(","\"",".",".","\"","+","(","inFields",".","size","(",")","-","1",")",")",":","\"\"",")",",\n","\"","{","inputs","}","\"",")",";","for","(","int","i","=","inFields",".","size","(",")",";","i","<","exprs",".","size","(",")",";","i++",")","{","pw",".","item","(","prefix","+","\"expr#\"","+","i,","exprs",".","get","(","i",")",")",";","}","\n\n","//","If","a","lot","of","the","fields","are","simply","projections","of","the","underlying\n","//","expression,","try","to","be","a","bit","less","verbose",".","int","trivialCount","=","countTrivial","(","projects",")",";","\n\n","switch","(","trivialCount",")","{","case","0:\n","break",";","case","1:\n","trivialCount","=","0",";","break",";","default:\n","pw",".","item","(","prefix","+","\"proj#0",".",".","\"","+","(","trivialCount","-","1",")",",","\"","{","exprs","}","\"",")",";","break",";","}","\n\n","final","boolean","withFieldNames","=","level","!=","SqlExplainLevel",".","DIGEST_ATTRIBUTES",";","//","Print","the","non-trivial","fields","with","their","names","as","they","appear","in","the\n","//","output","row","type",".","for","(","int","i","=","trivialCount",";","i","<","projects",".","size","(",")",";","i++",")","{","final","String","fieldName","=","withFieldNames","?","prefix","+","outFields",".","get","(","i",")",".","getName","(",")",":","prefix","+","i",";","pw",".","item","(","fieldName,","projects",".","get","(","i",")",")",";","}","if","(","condition","!=","null",")","{","pw",".","item","(","prefix","+","\"$condition\",","condition",")",";","}","return","pw",";"],"docstring_tokens":["Collects","the","expressions","in","this","program","into","a","list","of","terms","and","values"],"prompt_tokens":[]}
{"code_tokens":["public","int","getExprCount","(",")","{","return","exprs",".","size","(",")","+","projects",".","size","(",")","+","(","(","condition","==","null",")","?","0",":","1",")",";"],"docstring_tokens":["Returns","the","number","of","expressions","in","this","program"],"prompt_tokens":[]}
{"code_tokens":["public","static","RexProgram","createIdentity","(","RelDataType","rowType",")","{","return","createIdentity","(","rowType,","rowType",")",";"],"docstring_tokens":["Creates","the","identity","program"],"prompt_tokens":[]}
{"code_tokens":["public","static","RexProgram","createIdentity","(","RelDataType","rowType,\n","RelDataType","outputRowType",")","{","if","(","rowType","!=","outputRowType\n","&&","!Pair",".","right","(","rowType",".","getFieldList","(",")",")",".","equals","(","Pair",".","right","(","outputRowType",".","getFieldList","(",")",")",")",")","{","throw","new","IllegalArgumentException","(","\"field","type","mismatch:","\"","+","rowType","+","\"","vs",".","\"","+","outputRowType",")",";","}","final","List<RelDataTypeField>","fields","=","rowType",".","getFieldList","(",")",";","final","List<RexLocalRef>","projectRefs","=","new","ArrayList<>","(",")",";","final","List<RexInputRef>","refs","=","new","ArrayList<>","(",")",";","for","(","int","i","=","0",";","i","<","fields",".","size","(",")",";","i++",")","{","final","RexInputRef","ref","=","RexInputRef",".","of","(","i,","fields",")",";","refs",".","add","(","ref",")",";","projectRefs",".","add","(","new","RexLocalRef","(","i,","ref",".","getType","(",")",")",")",";","}","return","new","RexProgram","(","rowType,","refs,","projectRefs,","null,","outputRowType",")",";"],"docstring_tokens":["Creates","a","program","that","projects","its","input","fields","but","with","possibly","different","names","for","the","output","fields"],"prompt_tokens":[]}
{"code_tokens":["public","boolean","containsAggs","(",")","{","return","RexOver",".","containsOver","(","this",")",";"],"docstring_tokens":["Returns","whether","this","program","contains","windowed","aggregate","functions"],"prompt_tokens":[]}
{"code_tokens":["public","boolean","projectsIdentity","(","final","boolean","fail",")","{","final","int","fieldCount","=","inputRowType",".","getFieldCount","(",")",";","if","(","projects",".","size","(",")","<","fieldCount",")","{","assert","!fail\n",":","\"program","'\"","+","toString","(",")","+","\"'","does","not","project","identity","for","input","row","type","'\"\n","+","inputRowType","+","\"'\"",";","return","false",";","}","for","(","int","i","=","0",";","i","<","fieldCount",";","i++",")","{","RexLocalRef","project","=","projects",".","get","(","i",")",";","if","(","project",".","index","!=","i",")","{","assert","!fail\n",":","\"program","\"","+","toString","(",")","+","\"'","does","not","project","identity","for","input","row","type","'\"\n","+","inputRowType","+","\"',","field","#\"","+","i",";","return","false",";","}","}","return","true",";"],"docstring_tokens":["Returns","whether","the","fields","on","the","leading","edge","of","the","project","list","are","the","input","fields"],"prompt_tokens":[]}
{"code_tokens":["public","boolean","isTrivial","(",")","{","return","getCondition","(",")","==","null","&&","projectsOnlyIdentity","(",")",";"],"docstring_tokens":["Returns","whether","this","program","returns","its","input","exactly"],"prompt_tokens":[]}
{"code_tokens":["public","boolean","isPermutation","(",")","{","if","(","projects",".","size","(",")","!=","inputRowType",".","getFieldList","(",")",".","size","(",")",")","{","return","false",";","}","for","(","int","i","=","0",";","i","<","projects",".","size","(",")",";","++i",")","{","if","(","getSourceField","(","i",")","<","0",")","{","return","false",";","}","}","return","true",";"],"docstring_tokens":["Returns","whether","this","program","is","a","permutation","of","its","inputs"],"prompt_tokens":[]}
{"code_tokens":["@CheckReturnValue\n","public","@Nullable","Permutation","getPermutation","(",")","{","Permutation","permutation","=","new","Permutation","(","projects",".","size","(",")",")",";","if","(","projects",".","size","(",")","!=","inputRowType",".","getFieldList","(",")",".","size","(",")",")","{","return","null",";","}","for","(","int","i","=","0",";","i","<","projects",".","size","(",")",";","++i",")","{","int","sourceField","=","getSourceField","(","i",")",";","if","(","sourceField","<","0",")","{","return","null",";","}","permutation",".","set","(","i,","sourceField",")",";","}","return","permutation",";"],"docstring_tokens":["Returns","a","permutation,","if","this","program","is","a","permutation,","otherwise","null"],"prompt_tokens":[]}
{"code_tokens":["public","boolean","isNormalized","(","Litmus","litmus,","RexBuilder","rexBuilder",")","{","final","RexProgram","normalizedProgram","=","normalize","(","rexBuilder,","null",")",";","String","normalized","=","normalizedProgram",".","toString","(",")",";","String","string","=","toString","(",")",";","if","(","!normalized",".","equals","(","string",")",")","{","final","String","message","=","\"Program","is","not","normalized:\\n\"\n","+","\"program:","{","}","\\n\"\n","+","\"normalized:","{","}","\\n\"",";","return","litmus",".","fail","(","message,","string,","normalized",")",";","}","return","litmus",".","succeed","(",")",";"],"docstring_tokens":["Returns","whether","this","program","is","in","canonical","form"],"prompt_tokens":[]}
{"code_tokens":["public","RelMetadataFixture","withSql","(","String","sql",")","{","final","RelSupplier","relSupplier","=","RelSupplier",".","of","(","sql",")",";","if","(","relSupplier",".","equals","(","this",".","relSupplier",")",")","{","return","this",";","}","return","new","RelMetadataFixture","(","tester,","factory,","metadataConfig,","relSupplier,\n","convertAsCalc,","relTransform",")",";"],"docstring_tokens":["Creates","a","copy","of","this","fixture","that","uses","a","given","SQL","query"],"prompt_tokens":[]}
{"code_tokens":["public","RelMetadataFixture","withRelFn","(","Function<RelBuilder,","RelNode>","relFn",")","{","final","RelSupplier","relSupplier","=\n","RelSupplier",".","of","(","builder","->","{","metadataConfig",".","applyMetadata","(","builder",".","getCluster","(",")",")",";","return","relFn",".","apply","(","builder",")",";","}",")",";","if","(","relSupplier",".","equals","(","this",".","relSupplier",")",")","{","return","this",";","}","return","new","RelMetadataFixture","(","tester,","factory,","metadataConfig,","relSupplier,\n","convertAsCalc,","relTransform",")",";"],"docstring_tokens":["Creates","a","copy","of","this","fixture","that","uses","a","given","function","to","create","a","RelNode"],"prompt_tokens":[]}
{"code_tokens":["@SuppressWarnings","(","{","\"UnusedReturnValue\"","}",")","public","RelMetadataFixture","assertThatUniqueKeysAre","(","ImmutableBitSet",".",".",".","expectedUniqueKeys",")","{","RelNode","rel","=","toRel","(",")",";","final","RelMetadataQuery","mq","=","rel",".","getCluster","(",")",".","getMetadataQuery","(",")",";","Set<ImmutableBitSet>","result","=","mq",".","getUniqueKeys","(","rel",")",";","assertThat","(","result,","notNullValue","(",")",")",";","assertEquals","(","ImmutableSortedSet",".","copyOf","(","expectedUniqueKeys",")",",\n","ImmutableSortedSet",".","copyOf","(","result",")",",\n","(",")","->","\"unique","keys,","sql:","\"","+","relSupplier","+","\",","rel:","\"","+","RelOptUtil",".","toString","(","rel",")",")",";","checkUniqueConsistent","(","rel",")",";","return","this",";"],"docstring_tokens":["Checks","result","of","getting","unique","keys","for","SQL"],"prompt_tokens":[]}
{"code_tokens":["private","static","boolean","isEmptyAggregate","(","Aggregate","aggregate",")","{","return","aggregate",".","getRowType","(",")",".","getFieldCount","(",")","==","0",";"],"docstring_tokens":["Tests","if","an","Aggregate","always","produces","1","row","and","0","columns"],"prompt_tokens":[]}
{"code_tokens":["public","final","boolean","containsOver","(",")","{","return","RexOver",".","containsOver","(","program",")",";"],"docstring_tokens":["Returns","whether","this","Calc","contains","any","windowed-aggregate","functions"],"prompt_tokens":[]}
{"code_tokens":["@SuppressWarnings","(","\"method",".","invocation",".","invalid\"",")","protected","void","computeDigest","(","@UnknownInitialization","RelDataTypeImpl","this\n",")","{","StringBuilder","sb","=","new","StringBuilder","(",")",";","generateTypeString","(","sb,","true",")",";","if","(","!isNullable","(",")",")","{","sb",".","append","(","NON_NULLABLE_SUFFIX",")",";","}","digest","=","sb",".","toString","(",")",";"],"docstring_tokens":["Computes","the","digest","field"],"prompt_tokens":[]}
{"code_tokens":["public","static","RelNode","strip","(","Project","project",")","{","return","isTrivial","(","project",")","?","project",".","getInput","(",")",":","project",";"],"docstring_tokens":["Returns","the","child","of","a","project","if","the","project","is","trivial,","otherwise","the","project","itself"],"prompt_tokens":[]}
{"code_tokens":["@Deprecated","//","to","be","removed","before","2",".","0\n","public","static","int[]","toArray","(","List<Integer>","integers",")","{","return","Ints",".","toArray","(","integers",")",";"],"docstring_tokens":["Converts","a","list","of","Integer","objects","to","an","array","of","primitive","ints"],"prompt_tokens":[]}
{"code_tokens":["public","static","ImmutableIntList","identity","(","RelOptTable","table",")","{","return","ImmutableIntList",".","identity","(","table",".","getRowType","(",")",".","getFieldCount","(",")",")",";"],"docstring_tokens":["Returns","an","identity","projection","for","the","given","table"],"prompt_tokens":[]}
{"code_tokens":["public","static","<K,","V>","Pair<K,","V>","of","(","Map",".","Entry<?","extends","K,","?","extends","V>","entry",")","{","return","of","(","entry",".","getKey","(",")",",","entry",".","getValue","(",")",")",";"],"docstring_tokens":["Creates","a","Pair","from","a","java.util.Map.Entry"],"prompt_tokens":[]}
{"code_tokens":["public","static","<K,","V>","void","forEach","(","final","Iterable<?","extends","Map",".","Entry<?","extends","K,","?","extends","V>>","entries,\n","BiConsumer<?","super","K,","?","super","V>","consumer",")","{","for","(","Map",".","Entry<?","extends","K,","?","extends","V>","entry",":","entries",")","{","consumer",".","accept","(","entry",".","getKey","(",")",",","entry",".","getValue","(",")",")",";","}"],"docstring_tokens":["Applies","an","action","to","every","element","of","an","iterable","of","pairs"],"prompt_tokens":[]}
{"code_tokens":["private","static","RelCollation","extendCollation","(","RelCollation","collation,","List<Integer>","keys",")","{","List<RelFieldCollation>","fieldsForNewCollation","=","new","ArrayList<>","(","keys",".","size","(",")",")",";","fieldsForNewCollation",".","addAll","(","collation",".","getFieldCollations","(",")",")",";","\n\n","ImmutableBitSet","keysBitset","=","ImmutableBitSet",".","of","(","keys",")",";","ImmutableBitSet","colKeysBitset","=","ImmutableBitSet",".","of","(","collation",".","getKeys","(",")",")",";","ImmutableBitSet","exceptBitset","=","keysBitset",".","except","(","colKeysBitset",")",";","for","(","Integer","i",":","exceptBitset",")","{","fieldsForNewCollation",".","add","(","new","RelFieldCollation","(","i",")",")",";","}","return","RelCollations",".","of","(","fieldsForNewCollation",")",";"],"docstring_tokens":["This","function","extends","collation","by","appending","new","collation","fields","defined","on","keys"],"prompt_tokens":[]}
{"code_tokens":["static","MatchAllQueryBuilder","matchAll","(",")","{","return","new","MatchAllQueryBuilder","(",")",";"],"docstring_tokens":["A","query","that","matches","on","all","documents"],"prompt_tokens":[]}
{"code_tokens":["public","RelOptPredicateList","getPredicates","(","Filter","filter,","RelMetadataQuery","mq",")","{","final","RelNode","input","=","filter",".","getInput","(",")",";","final","RexBuilder","rexBuilder","=","filter",".","getCluster","(",")",".","getRexBuilder","(",")",";","final","RelOptPredicateList","inputInfo","=","mq",".","getPulledUpPredicates","(","input",")",";","\n\n","return","Util",".","first","(","inputInfo,","RelOptPredicateList",".","EMPTY",")",".","union","(","rexBuilder,\n","RelOptPredicateList",".","of","(","rexBuilder,\n","RexUtil",".","retainDeterministic","(","RelOptUtil",".","conjunctions","(","filter",".","getCondition","(",")",")",")",")",")",";"],"docstring_tokens":["Add","the","Filter","condition","to","the","pulledPredicates","list","from","the","input"],"prompt_tokens":[]}
{"code_tokens":["List<RelNode>","translate","(",")","throws","FrontendException","{","List<RelNode>","relNodes","=","new","ArrayList<>","(",")",";","for","(","Operator","pigOp",":","plan",".","getSinks","(",")",")","{","currentRoot","=","pigOp",";","currentWalker",".","walk","(","this",")",";","if","(","!","(","pigOp","instanceof","LOStore",")",")","{","relNodes",".","add","(","builder",".","build","(",")",")",";","}","}","return","relNodes",";"],"docstring_tokens":["Translates","the","given","pig","logical","plan","into","a","list","of","relational","algebra","plans"],"prompt_tokens":[]}
{"code_tokens":["private","void","adjustCubeInput","(",")","{","RelNode","project1","=","builder",".","peek","(",")",";","assert","project1","instanceof","LogicalProject",";","RelNode","correl","=","(","(","LogicalProject",")","project1",")",".","getInput","(",")",";","assert","correl","instanceof","LogicalCorrelate",";","RelNode","project2","=","(","(","LogicalCorrelate",")","correl",")",".","getLeft","(",")",";","assert","project2","instanceof","LogicalProject",";","builder",".","replaceTop","(","(","(","LogicalProject",")","project2",")",".","getInput","(",")",")",";"],"docstring_tokens":["Adjusts","the","rel","input","for","Pig","Cube","operator"],"prompt_tokens":[]}
{"code_tokens":["private","void","preprocessCogroup","(","LOCogroup","loCogroup,","boolean","isCubeRollup",")","throws","FrontendException","{","final","int","numRels","=","loCogroup",".","getExpressionPlans","(",")",".","size","(",")",";","\n\n","//","Pull","out","all","cogrouped","relations","from","the","builder\n","List<RelNode>","inputRels","=","new","ArrayList<>","(",")",";","for","(","int","i","=","0",";","i","<","numRels",";","i++",")","{","inputRels",".","add","(","0,","builder",".","build","(",")",")",";","}","\n\n","//","Then","adding","back","with","the","corresponding","projection\n","for","(","int","i","=","0",";","i","<","numRels",";","i++",")","{","final","RelNode","originalRel","=","inputRels",".","get","(","i",")",";","builder",".","push","(","originalRel",")",";","final","Collection<LogicalExpressionPlan>","pigGroupKeys","=\n","loCogroup",".","getExpressionPlans","(",")",".","get","(","i",")",";","List<RexNode>","fieldRels","=","new","ArrayList<>","(",")",";","for","(","LogicalExpressionPlan","pigKey",":","pigGroupKeys",")","{","fieldRels",".","add","(","PigRelExVisitor",".","translatePigEx","(","builder,","pigKey",")",")",";","}","final","RexNode","row","=","builder",".","getRexBuilder","(",")",".","makeCall","(","getGroupRowType","(","fieldRels,","isCubeRollup",")",",\n","SqlStdOperatorTable",".","ROW,","getGroupRowOperands","(","fieldRels,","isCubeRollup",")",")",";","fieldRels",".","add","(","row",")",";","builder",".","project","(","fieldRels",")",";","builder",".","updateAlias","(","builder",".","getPig","(","originalRel",")",",","builder",".","getAlias","(","originalRel",")",",","false",")",";","}"],"docstring_tokens":["Projects","out","group","key","and","the","row","for","each","relation"],"prompt_tokens":[]}
{"code_tokens":["public","static","EnumerableProject","create","(","final","RelNode","input,\n","final","List<?","extends","RexNode>","projects,","RelDataType","rowType",")","{","final","RelOptCluster","cluster","=","input",".","getCluster","(",")",";","final","RelMetadataQuery","mq","=","cluster",".","getMetadataQuery","(",")",";","final","RelTraitSet","traitSet","=\n","cluster",".","traitSet","(",")",".","replace","(","EnumerableConvention",".","INSTANCE",")",".","replaceIfs","(","RelCollationTraitDef",".","INSTANCE,\n","(",")","->","RelMdCollation",".","project","(","mq,","input,","projects",")",")",";","return","new","EnumerableProject","(","cluster,","traitSet,","input,","projects,","rowType",")",";"],"docstring_tokens":["Creates","an","EnumerableProject,","specifying","row","type","rather","than","field","names"],"prompt_tokens":[]}
{"code_tokens":["public","Set<ImmutableBitSet>","getUniqueKeys","(","Minus","rel,\n","RelMetadataQuery","mq,","boolean","ignoreNulls",")","{","Set<ImmutableBitSet>","uniqueKeys","=","mq",".","getUniqueKeys","(","rel",".","getInput","(","0",")",",","ignoreNulls",")",";","if","(","uniqueKeys","!=","null",")","{","return","uniqueKeys",";","}","\n\n","if","(","!rel",".","all",")","{","return","ImmutableSet",".","of","(","ImmutableBitSet",".","range","(","rel",".","getRowType","(",")",".","getFieldCount","(",")",")",")",";","}","return","ImmutableSet",".","of","(",")",";"],"docstring_tokens":["The","unique","keys","of","Minus","are","precisely","the","unique","keys","of","its","first","input"],"prompt_tokens":[]}
{"code_tokens":["public","RexCall","clone","(","RelDataType","type,","List<RexNode>","operands",")","{","return","new","RexCall","(","type,","op,","operands",")",";"],"docstring_tokens":["Creates","a","new","call","to","the","same","operator","with","different","operands"],"prompt_tokens":[]}
{"code_tokens":["public","static","void","assumeRealMongoInstance","(",")","{","assumeTrue","(","useMongo","(",")",",","\"Expect","mongo","instance\"",")",";"],"docstring_tokens":["Used","to","skip","tests","if","current","instance","is","not","mongo"],"prompt_tokens":[]}
{"code_tokens":["public","static","@NonNull","TCatalogReader","create","(","RelDataTypeFactory","typeFactory,\n","boolean","caseSensitive",")","{","return","new","TCatalogReader","(","typeFactory,","caseSensitive",")",".","init","(",")",";"],"docstring_tokens":["Creates","and","initializes","a","TCatalogReader"],"prompt_tokens":[]}
{"code_tokens":["public","static","<V,","E","extends","DefaultEdge>","Iterable<V>","of","(","DirectedGraph<V,","E>","graph,","V","start",")","{","//","Doesn't","actually","return","a","DepthFirstIterator,","but","a","list","with","the","same\n","//","contents,","which","is","more","efficient",".","return","buildList","(","graph,","start",")",";"],"docstring_tokens":["Creates","an","iterable","over","the","vertices","in","the","given","graph","in","a","depth-first","iteration","order"],"prompt_tokens":[]}
{"code_tokens":["public","static","ClassDeclarationFinder","create","(","final","Class<?","extends","ClassDeclarationFinder>","optimizingClass",")","{","return","create","(","newChildCreator","(","optimizingClass",")",")",";"],"docstring_tokens":["Creates","visitor","that","uses","given","class","as","optimizer"],"prompt_tokens":[]}
{"code_tokens":["@Override","public","Shuttle","preVisit","(","NewExpression","newExpression",")","{","if","(","newExpression",".","memberDeclarations","==","null",")","{","return","this",";","}","ClassDeclarationFinder","visitor","=","goDeeper","(",")",";","visitor",".","learnFinalStaticDeclarations","(","newExpression",".","memberDeclarations",")",";","return","visitor",";"],"docstring_tokens":["Creates","optimizer","local","to","the","newly","generated","anonymous","class"],"prompt_tokens":[]}
{"code_tokens":["@Override","public","Shuttle","preVisit","(","ClassDeclaration","classDeclaration",")","{","ClassDeclarationFinder","visitor","=","goDeeper","(",")",";","visitor",".","learnFinalStaticDeclarations","(","classDeclaration",".","memberDeclarations",")",";","return","visitor",";"],"docstring_tokens":["Creates","optimizer","local","to","the","newly","generated","class"],"prompt_tokens":[]}
{"code_tokens":["protected","@Nullable","ParameterExpression","findDeclaredExpression","(","Expression","expression",")","{","return","null",";"],"docstring_tokens":["Finds","if","there","exists","ready","for","reuse","declaration","for","given","expression"],"prompt_tokens":[]}
{"code_tokens":["public","static","RelCollation","of","(","int","fieldIndex",")","{","return","of","(","new","RelFieldCollation","(","fieldIndex",")",")",";"],"docstring_tokens":["Creates","a","collation","containing","one","field"],"prompt_tokens":[]}
{"code_tokens":["public","static","RelCollation","of","(","ImmutableIntList","keys",")","{","List<RelFieldCollation>","cols","=","keys",".","stream","(",")",".","map","(","k","->","new","RelFieldCollation","(","k",")",")",".","collect","(","Collectors",".","toList","(",")",")",";","return","of","(","cols",")",";"],"docstring_tokens":["Creates","a","collation","containing","multiple","fields"],"prompt_tokens":[]}
{"code_tokens":["public","static","List<Integer>","ordinals","(","RelCollation","collation",")","{","return","ordinals","(","collation",".","getFieldCollations","(",")",")",";"],"docstring_tokens":["Returns","the","indexes","of","the","field","collations","in","a","given","collation"],"prompt_tokens":[]}
{"code_tokens":["public","static","boolean","contains","(","RelCollation","collation,\n","Iterable<Integer>","keys",")","{","return","contains","(","collation,","Util",".","distinctList","(","keys",")",")",";"],"docstring_tokens":["Returns","whether","a","collation","indicates","that","the","collection","is","sorted","on","a","given","list","of","keys"],"prompt_tokens":[]}
{"code_tokens":["public","static","RelCollation","permute","(","RelCollation","collation,\n","Map<Integer,","Integer>","mapping",")","{","return","of","(","Util",".","transform","(","collation",".","getFieldCollations","(",")",",\n","fc","->","fc",".","withFieldIndex","(","requireNonNull","(","mapping",".","get","(","fc",".","getFieldIndex","(",")",")",",\n","(",")","->","\"no","entry","for","\"","+","fc",".","getFieldIndex","(",")","+","\"","in","\"","+","mapping",")",")",")",")",";"],"docstring_tokens":["Creates","a","copy","of","this","collation","that","changes","the","ordinals","of","input","fields"],"prompt_tokens":[]}
{"code_tokens":["void","resize","(","int","size",")","{","int","currentSize","=","getFieldCount","(",")",";","if","(","size",">","currentSize",")","{","for","(","int","i","=","currentSize",";","i","<","size",";","i++",")","{","super",".","getField","(","\"$\"","+","i,","true,","true",")",";","}","computeDigest","(",")",";","}"],"docstring_tokens":["Resizes","the","record","if","the","new","size","greater","than","the","current","size"],"prompt_tokens":[]}
{"code_tokens":["private","static","int","nameToIndex","(","String","fieldName",")","{","Matcher","matcher","=","INDEX_PATTERN",".","matcher","(","fieldName",")",";","if","(","matcher",".","find","(",")",")","{","return","Integer",".","parseInt","(","matcher",".","group","(","1",")",")",";","}","return","-1",";"],"docstring_tokens":["Gets","index","number","from","field","name"],"prompt_tokens":[]}
{"code_tokens":["public","static","Expression","convert","(","Expression","operand,","Type","toType",")","{","final","Type","fromType","=","operand",".","getType","(",")",";","return","convert","(","operand,","fromType,","toType",")",";"],"docstring_tokens":["Convert","operand","to","target","type","toType"],"prompt_tokens":[]}
{"code_tokens":["public","static","<T>","@Nullable","T","evaluate","(","Object","o,","Class<T>","clazz",")","{","//","We","need","optimization","here","for","constant","folding",".","//","Not","all","the","expressions","can","be","interpreted","(","e",".","g",".","ternary",")",",","so\n","//","we","rely","on","optimization","capabilities","to","fold","non-interpretable\n","//","expressions",".","//noinspection","unchecked\n","clazz","=","Primitive",".","box","(","clazz",")",";","BlockBuilder","bb","=","new","BlockBuilder","(",")",";","final","Expression","expr","=\n","convert","(","Expressions",".","constant","(","o",")",",","clazz",")",";","bb",".","add","(","Expressions",".","return_","(","null,","expr",")",")",";","final","FunctionExpression<?>","convert","=\n","Expressions",".","lambda","(","bb",".","toBlock","(",")",",","ImmutableList",".","of","(",")",")",";","return","clazz",".","cast","(","convert",".","compile","(",")",".","dynamicInvoke","(",")",")",";"],"docstring_tokens":["Converts","a","value","to","a","given","class"],"prompt_tokens":[]}
{"code_tokens":["static","Expression","generatePredicate","(","EnumerableRelImplementor","implementor,\n","RexBuilder","rexBuilder,\n","RelNode","left,\n","RelNode","right,\n","PhysType","leftPhysType,\n","PhysType","rightPhysType,\n","RexNode","condition",")","{","final","BlockBuilder","builder","=","new","BlockBuilder","(",")",";","final","ParameterExpression","left_","=\n","Expressions",".","parameter","(","leftPhysType",".","getJavaRowType","(",")",",","\"left\"",")",";","final","ParameterExpression","right_","=\n","Expressions",".","parameter","(","rightPhysType",".","getJavaRowType","(",")",",","\"right\"",")",";","final","RexProgramBuilder","program","=\n","new","RexProgramBuilder","(","implementor",".","getTypeFactory","(",")",".","builder","(",")",".","addAll","(","left",".","getRowType","(",")",".","getFieldList","(",")",")",".","addAll","(","right",".","getRowType","(",")",".","getFieldList","(",")",")",".","build","(",")",",\n","rexBuilder",")",";","program",".","addCondition","(","condition",")",";","builder",".","add","(","Expressions",".","return_","(","null,\n","RexToLixTranslator",".","translateCondition","(","program",".","getProgram","(",")",",\n","implementor",".","getTypeFactory","(",")",",\n","builder,\n","new","RexToLixTranslator",".","InputGetterImpl","(","ImmutableMap",".","of","(","left_,","leftPhysType,\n","right_,","rightPhysType",")",")",",\n","implementor",".","allCorrelateVariables,\n","implementor",".","getConformance","(",")",")",")",")",";","return","Expressions",".","lambda","(","Predicate2",".","class,","builder",".","toBlock","(",")",",","left_,","right_",")",";"],"docstring_tokens":["Returns","a","predicate","expression","based","on","a","join","condition"],"prompt_tokens":[]}
{"code_tokens":["protected","static","Geom","bind","(","Geometry","geometry,","int","srid",")","{","if","(","srid","==","NO_SRID",")","{","return","new","SimpleGeom","(","geometry",")",";","}","return","bind","(","geometry,","SpatialReference",".","create","(","srid",")",")",";"],"docstring_tokens":["Returns","a","Geom","that","is","a","Geometry","bound","to","a","SRID"],"prompt_tokens":[]}
{"code_tokens":["public","static","Type","type","(","Geometry","g",")","{","switch","(","g",".","getType","(",")",")","{","case","Point:\n","return","Type",".","POINT",";","case","Polyline:\n","return","Type",".","LINESTRING",";","case","Polygon:\n","return","Type",".","POLYGON",";","case","MultiPoint:\n","return","Type",".","MULTIPOINT",";","case","Envelope:\n","return","Type",".","POLYGON",";","case","Line:\n","return","Type",".","LINESTRING",";","case","Unknown:\n","return","Type",".","Geometry",";","default:\n","throw","new","AssertionError","(","g",")",";","}"],"docstring_tokens":["Returns","the","OGC","type","of","a","geometry"],"prompt_tokens":[]}
{"code_tokens":["public","String","simplifySql","(","String","sql",")","{","Tokenizer","tokenizer","=","new","Tokenizer","(","sql,","hintToken,","parserConfig",".","quoting","(",")",")",";","List<Token>","list","=","new","ArrayList<>","(",")",";","while","(","true",")","{","Token","token","=","tokenizer",".","nextToken","(",")",";","if","(","token","==","null",")","{","break",";","}","if","(","token",".","type","==","TokenType",".","COMMENT",")","{","//","ignore","comments\n","continue",";","}","list",".","add","(","token",")",";","}","\n\n","//","Gather","consecutive","sub-sequences","of","tokens","into","sub-queries",".","List<Token>","outList","=","new","ArrayList<>","(",")",";","consumeQuery","(","list",".","listIterator","(",")",",","outList",")",";","\n\n","//","Simplify",".","Query",".","simplifyList","(","outList,","hintToken",")",";","\n\n","//","Convert","to","string",".","StringBuilder","buf","=","new","StringBuilder","(",")",";","int","k","=","-1",";","for","(","Token","token",":","outList",")","{","if","(","++k",">","0",")","{","buf",".","append","(","'","'",")",";","}","token",".","unparse","(","buf",")",";","}","return","buf",".","toString","(",")",";"],"docstring_tokens":["Turns","a","partially","completed","or","syntactically","incorrect","SQL","statement","into","a","simplified,","valid","one","that","can","be","validated"],"prompt_tokens":[]}
{"code_tokens":["@Override","public","void","validateIdentifier","(","SqlIdentifier","id,","SqlValidatorScope","scope",")","{","registerId","(","id,","scope",")",";","try","{","super",".","validateIdentifier","(","id,","scope",")",";","}","catch","(","CalciteException","e",")","{","Util",".","swallow","(","e,","TRACER",")",";","}"],"docstring_tokens":["Registers","the","identifier","and","its","scope","into","a","map","keyed","by","ParserPosition"],"prompt_tokens":[]}
{"code_tokens":["public","static","@Nullable","String","getCharacterSet","(","String","s",")","{","if","(","s",".","charAt","(","0",")","==","'\\''",")","{","return","null",";","}","if","(","Character",".","toUpperCase","(","s",".","charAt","(","0",")",")","==","'N'",")","{","return","CalciteSystemProperty",".","DEFAULT_NATIONAL_CHARSET",".","value","(",")",";","}","int","i","=","s",".","indexOf","(","\"'\"",")",";","return","s",".","substring","(","1,","i",")",";","//","skip","prefixed","'_'\n"],"docstring_tokens":["Returns","the","character-set","prefix","of","a","SQL","string","literal;","returns","null","if","there","is","none"],"prompt_tokens":[]}
{"code_tokens":["public","static","long","intervalToMillis","(","SqlIntervalLiteral",".","IntervalValue","interval",")","{","return","intervalToMillis","(","interval",".","getIntervalLiteral","(",")",",\n","interval",".","getIntervalQualifier","(",")",")",";"],"docstring_tokens":["Converts","the","interval","value","into","a","millisecond","representation"],"prompt_tokens":[]}
{"code_tokens":["public","static","long","intervalToMonths","(","SqlIntervalLiteral",".","IntervalValue","interval",")","{","return","intervalToMonths","(","interval",".","getIntervalLiteral","(",")",",\n","interval",".","getIntervalQualifier","(",")",")",";"],"docstring_tokens":["Converts","the","interval","value","into","a","months","representation"],"prompt_tokens":[]}
{"code_tokens":["public","static","boolean","allowsIdentifier","(","String[]","tokenImage,","int[][]","expectedTokenSequences",")","{","//","Compares","from","tailing","tokens","first","because","the","<IDENTIFIER>\n","//","was","very","probably","at","the","tail",".","for","(","int","i","=","expectedTokenSequences",".","length","-","1",";","i",">=","0",";","i--",")","{","int[]","expectedTokenSequence","=","expectedTokenSequences[i]",";","for","(","int","j","=","expectedTokenSequence",".","length","-","1",";","j",">=","0",";","j--",")","{","if","(","tokenImage[expectedTokenSequence[j]]",".","equals","(","\"<IDENTIFIER>\"",")",")","{","return","true",";","}","}","}","\n\n","return","false",";"],"docstring_tokens":["Returns","whether","the","reported","ParseException","tokenImage","allows","SQL","identifier"],"prompt_tokens":[]}
{"code_tokens":["public","static","RexInputRef","of","(","int","index,","RelDataType","rowType",")","{","return","of","(","index,","rowType",".","getFieldList","(",")",")",";"],"docstring_tokens":["Creates","a","reference","to","a","given","field","in","a","row","type"],"prompt_tokens":[]}
{"code_tokens":["public","static","RexInputRef","of","(","int","index,","List<RelDataTypeField>","fields",")","{","return","new","RexInputRef","(","index,","fields",".","get","(","index",")",".","getType","(",")",")",";"],"docstring_tokens":["Creates","a","reference","to","a","given","field","in","a","list","of","fields"],"prompt_tokens":[]}
{"code_tokens":["static","String","sqlToRegexLike","(","String","sqlPattern,\n","@Nullable","CharSequence","escapeStr",")","{","final","char","escapeChar",";","if","(","escapeStr","!=","null",")","{","if","(","escapeStr",".","length","(",")","!=","1",")","{","throw","invalidEscapeCharacter","(","escapeStr",".","toString","(",")",")",";","}","escapeChar","=","escapeStr",".","charAt","(","0",")",";","}","else","{","escapeChar","=","0",";","}","return","sqlToRegexLike","(","sqlPattern,","escapeChar",")",";"],"docstring_tokens":["Translates","a","SQL","LIKE","pattern","to","Java","regex","pattern,","with","optional","escape","string"],"prompt_tokens":[]}
{"code_tokens":["static","String","sqlToRegexSimilar","(","String","sqlPattern,\n","@Nullable","CharSequence","escapeStr",")","{","final","char","escapeChar",";","if","(","escapeStr","!=","null",")","{","if","(","escapeStr",".","length","(",")","!=","1",")","{","throw","invalidEscapeCharacter","(","escapeStr",".","toString","(",")",")",";","}","escapeChar","=","escapeStr",".","charAt","(","0",")",";","}","else","{","escapeChar","=","0",";","}","return","sqlToRegexSimilar","(","sqlPattern,","escapeChar",")",";"],"docstring_tokens":["Translates","a","SQL","SIMILAR","pattern","to","Java","regex","pattern,","with","optional","escape","string"],"prompt_tokens":[]}
{"code_tokens":["public","static","PigConverter","create","(","FrameworkConfig","config,\n","Properties","properties",")","throws","Exception","{","return","new","PigConverter","(","config,","ExecType",".","LOCAL,","properties",")",";"],"docstring_tokens":["Creates","a","PigConverter","using","the","given","property","settings"],"prompt_tokens":[]}
{"code_tokens":["public","static","PigConverter","create","(","FrameworkConfig","config",")","throws","Exception","{","return","create","(","config,","PropertiesUtil",".","loadDefaultProperties","(",")",")",";"],"docstring_tokens":["Creates","a","PigConverter","using","default","property","settings"],"prompt_tokens":[]}
{"code_tokens":["public","List<RelNode>","pigScript2Rel","(","String","fileName,","Map<String,","String>","params,\n","boolean","planRewrite",")","throws","IOException","{","setBatchOn","(",")",";","registerScript","(","fileName,","params",")",";","final","LogicalPlan","pigPlan","=","getCurrentDAG","(",")",".","getLogicalPlan","(",")",";","pigPlan",".","validate","(","getPigContext","(",")",",","scope,","false",")",";","\n\n","return","pigPlan2Rel","(","pigPlan,","planRewrite,","true",")",";"],"docstring_tokens":["Parses","a","Pig","script","and","converts","it","into","relational","algebra","plans"],"prompt_tokens":[]}
{"code_tokens":["public","List<String>","pigToSql","(","String","pigQuery,","SqlDialect","sqlDialect",")","throws","IOException","{","final","SqlWriterConfig","config","=","SqlPrettyWriter",".","config","(",")",".","withQuoteAllIdentifiers","(","false",")",".","withAlwaysUseParentheses","(","false",")",".","withSelectListItemsOnSeparateLines","(","false",")",".","withIndentation","(","2",")",".","withDialect","(","sqlDialect",")",";","final","SqlPrettyWriter","writer","=","new","SqlPrettyWriter","(","config",")",";","return","pigToSql","(","pigQuery,","writer",")",";"],"docstring_tokens":["Converts","a","Pig","script","to","a","list","of","SQL","statements"],"prompt_tokens":[]}
{"code_tokens":["private","static","boolean","invokeVisitorInternal","(","Object","visitor,\n","Object","visitee,\n","Class","hierarchyRoot,\n","String","visitMethodName",")","{","Class<?>","visitorClass","=","visitor",".","getClass","(",")",";","Class","visiteeClass","=","visitee",".","getClass","(",")",";","Method","method","=\n","lookupVisitMethod","(","visitorClass,\n","visiteeClass,\n","visitMethodName",")",";","if","(","method","==","null",")","{","return","false",";","}","\n\n","if","(","hierarchyRoot","!=","null",")","{","Class","paramType","=","method",".","getParameterTypes","(",")","[0]",";","if","(","!hierarchyRoot",".","isAssignableFrom","(","paramType",")",")","{","return","false",";","}","}","\n\n","try","{","method",".","invoke","(","visitor,\n","visitee",")",";","}","catch","(","IllegalAccessException","ex",")","{","throw","new","RuntimeException","(","ex",")",";","}","catch","(","InvocationTargetException","ex",")","{","//","visit","methods","aren't","allowed","to","have","throws","clauses,\n","//","so","the","only","exceptions","which","should","come\n","//","to","us","are","RuntimeExceptions","and","Errors\n","throw","Util",".","throwAsRuntime","(","Util",".","causeOrSelf","(","ex",")",")",";","}","return","true",";"],"docstring_tokens":["Shared","implementation","of","the","two","forms","of","invokeVisitor"],"prompt_tokens":[]}
{"code_tokens":["protected","void","validateQuantifier","(","SqlValidator","validator,","SqlCall","call",")","{","SqlLiteral","functionQuantifier","=","call",".","getFunctionQuantifier","(",")",";","if","(","(","null","!=","functionQuantifier",")","&&","!isQuantifierAllowed","(",")",")","{","throw","validator",".","newValidationError","(","functionQuantifier,\n","RESOURCE",".","functionQuantifierNotAllowed","(","call",".","getOperator","(",")",".","getName","(",")",")",")",";","}"],"docstring_tokens":["Throws","a","validation","error","if","a","DISTINCT","or","ALL","quantifier","is","present","but","not","allowed"],"prompt_tokens":[]}
{"code_tokens":["public","static","@Nullable","ByteString","compress","(","@Nullable","String","data",")","{","try","{","if","(","data","==","null",")","{","return","null",";","}","if","(","StringUtils",".","isEmpty","(","data",")",")","{","return","new","ByteString","(","new","byte[0]",")",";","}","ByteArrayOutputStream","outputStream","=","new","ByteArrayOutputStream","(",")",";","ByteBuffer","dataLength","=","ByteBuffer",".","allocate","(","4",")",";","dataLength",".","order","(","ByteOrder",".","LITTLE_ENDIAN",")",";","dataLength",".","putInt","(","data",".","length","(",")",")",";","outputStream",".","write","(","dataLength",".","array","(",")",")",";","DeflaterOutputStream","inflaterStream","=","new","DeflaterOutputStream","(","outputStream",")",";","inflaterStream",".","write","(","data",".","getBytes","(","Charset",".","defaultCharset","(",")",")",")",";","inflaterStream",".","close","(",")",";","return","new","ByteString","(","outputStream",".","toByteArray","(",")",")",";","}","catch","(","IOException","e",")","{","return","null",";","}"],"docstring_tokens":["MySql","Compression","is","based","on","zlib"],"prompt_tokens":[]}
{"code_tokens":["public","static","AssertThat","that","(",")","{","return","AssertThat",".","EMPTY",";"],"docstring_tokens":["Creates","an","instance","of","CalciteAssert","with","the","empty","configuration"],"prompt_tokens":[]}
{"code_tokens":["public","static","AssertThat","that","(","Config","config",")","{","return","that","(",")",".","with","(","config",")",";"],"docstring_tokens":["Creates","an","instance","of","CalciteAssert","with","a","given","configuration"],"prompt_tokens":[]}
{"code_tokens":["public","final","SqlToRelFixture","sql","(","String","sql",")","{","return","fixture","(",")",".","expression","(","false",")",".","withSql","(","sql",")",";"],"docstring_tokens":["Sets","the","SQL","statement","for","a","test"],"prompt_tokens":[]}
{"code_tokens":["@SuppressWarnings","(","\"unchecked\"",")","public","static","<K,","V>","Map<K,","V>","of","(",")","{","return","(","Map<K,","V>",")","INSTANCE",";"],"docstring_tokens":["Gets","an","instance","of","BlackholeMap"],"prompt_tokens":[]}
{"code_tokens":["public","SqlTypeName","lookup","(","DataType","name",")","{","return","rules",".","getOrDefault","(","name,","SqlTypeName",".","ANY",")",";"],"docstring_tokens":["Returns","a","corresponding","SqlTypeName","for","a","given","CQL","type","name"],"prompt_tokens":[]}
{"code_tokens":["@Override","public","TranslatableTable","apply","(","List<?","extends","@Nullable","Object>","arguments",")","{","try","{","Object","o","=","null",";","if","(","!Modifier",".","isStatic","(","method",".","getModifiers","(",")",")",")","{","final","Constructor<?>","constructor","=\n","method",".","getDeclaringClass","(",")",".","getConstructor","(",")",";","o","=","constructor",".","newInstance","(",")",";","}","return","(","TranslatableTable",")","requireNonNull","(","method",".","invoke","(","o,","arguments",".","toArray","(",")",")",",\n","(",")","->","\"got","null","from","\"","+","method","+","\"","with","arguments","\"","+","arguments",")",";","}","catch","(","IllegalArgumentException","e",")","{","throw","new","RuntimeException","(","\"Expected","\"\n","+","Arrays",".","toString","(","method",".","getParameterTypes","(",")",")","+","\"","actual","\"\n","+","arguments,\n","e",")",";","}","catch","(","IllegalAccessException","|","InvocationTargetException\n","|","NoSuchMethodException","|","InstantiationException","e",")","{","throw","new","RuntimeException","(","e",")",";","}"],"docstring_tokens":["Applies","arguments","to","yield","a","table"],"prompt_tokens":[]}
{"code_tokens":["public","static","SqlBasicAggFunction","create","(","SqlKind","kind,\n","SqlReturnTypeInference","returnTypeInference,\n","SqlOperandTypeChecker","operandTypeChecker",")","{","return","create","(","kind",".","name","(",")",",","kind,","returnTypeInference,","operandTypeChecker",")",";"],"docstring_tokens":["Creates","a","SqlBasicAggFunction","whose","name","is","the","same","as","its","kind"],"prompt_tokens":[]}
{"code_tokens":["public","static","@NonNull","MockCatalogReaderDynamic","create","(","RelDataTypeFactory","typeFactory,","boolean","caseSensitive",")","{","return","new","MockCatalogReaderDynamic","(","typeFactory,","caseSensitive",")",".","init","(",")",";"],"docstring_tokens":["Creates","and","initializes","a","MockCatalogReaderDynamic"],"prompt_tokens":[]}
{"code_tokens":["private","int[]","evaluateIntervalLiteralAsYear","(","RelDataTypeSystem","typeSystem,","int","sign,\n","String","value,\n","String","originalValue,\n","SqlParserPos","pos",")","{","BigDecimal","year",";","\n\n","//","validate","as","YEAR","(","startPrecision",")",",","e",".","g",".","'YY'\n","String","intervalPattern","=","\"","(","\\\\d+",")","\"",";","\n\n","Matcher","m","=","Pattern",".","compile","(","intervalPattern",")",".","matcher","(","value",")",";","if","(","m",".","matches","(",")",")","{","//","Break","out","field","values\n","try","{","year","=","parseField","(","m,","1",")",";","}","catch","(","NumberFormatException","e",")","{","throw","invalidValueException","(","pos,","originalValue",")",";","}","\n\n","//","Validate","individual","fields\n","checkLeadFieldInRange","(","typeSystem,","sign,","year,","TimeUnit",".","YEAR,","pos",")",";","\n\n","//","package","values","up","for","return\n","return","fillIntervalValueArray","(","sign,","year,","ZERO",")",";","}","else","{","throw","invalidValueException","(","pos,","originalValue",")",";","}"],"docstring_tokens":["Validates","an","INTERVAL","literal","against","a","YEAR","interval","qualifier"],"prompt_tokens":[]}
{"code_tokens":["private","int[]","evaluateIntervalLiteralAsYearToMonth","(","RelDataTypeSystem","typeSystem,","int","sign,\n","String","value,\n","String","originalValue,\n","SqlParserPos","pos",")","{","BigDecimal","year",";","BigDecimal","month",";","\n\n","//","validate","as","YEAR","(","startPrecision",")","TO","MONTH,","e",".","g",".","'YY-DD'\n","String","intervalPattern","=","\"","(","\\\\d+",")","-","(","\\\\d","{","1,2","}",")","\"",";","\n\n","Matcher","m","=","Pattern",".","compile","(","intervalPattern",")",".","matcher","(","value",")",";","if","(","m",".","matches","(",")",")","{","//","Break","out","field","values\n","try","{","year","=","parseField","(","m,","1",")",";","month","=","parseField","(","m,","2",")",";","}","catch","(","NumberFormatException","e",")","{","throw","invalidValueException","(","pos,","originalValue",")",";","}","\n\n","//","Validate","individual","fields\n","checkLeadFieldInRange","(","typeSystem,","sign,","year,","TimeUnit",".","YEAR,","pos",")",";","if","(","!isSecondaryFieldInRange","(","month,","TimeUnit",".","MONTH",")",")","{","throw","invalidValueException","(","pos,","originalValue",")",";","}","\n\n","//","package","values","up","for","return\n","return","fillIntervalValueArray","(","sign,","year,","month",")",";","}","else","{","throw","invalidValueException","(","pos,","originalValue",")",";","}"],"docstring_tokens":["Validates","an","INTERVAL","literal","against","a","YEAR","TO","MONTH","interval","qualifier"],"prompt_tokens":[]}
{"code_tokens":["private","int[]","evaluateIntervalLiteralAsMonth","(","RelDataTypeSystem","typeSystem,","int","sign,\n","String","value,\n","String","originalValue,\n","SqlParserPos","pos",")","{","BigDecimal","month",";","\n\n","//","validate","as","MONTH","(","startPrecision",")",",","e",".","g",".","'MM'\n","String","intervalPattern","=","\"","(","\\\\d+",")","\"",";","\n\n","Matcher","m","=","Pattern",".","compile","(","intervalPattern",")",".","matcher","(","value",")",";","if","(","m",".","matches","(",")",")","{","//","Break","out","field","values\n","try","{","month","=","parseField","(","m,","1",")",";","}","catch","(","NumberFormatException","e",")","{","throw","invalidValueException","(","pos,","originalValue",")",";","}","\n\n","//","Validate","individual","fields\n","checkLeadFieldInRange","(","typeSystem,","sign,","month,","TimeUnit",".","MONTH,","pos",")",";","\n\n","//","package","values","up","for","return\n","return","fillIntervalValueArray","(","sign,","ZERO,","month",")",";","}","else","{","throw","invalidValueException","(","pos,","originalValue",")",";","}"],"docstring_tokens":["Validates","an","INTERVAL","literal","against","a","MONTH","interval","qualifier"],"prompt_tokens":[]}
{"code_tokens":["private","int[]","evaluateIntervalLiteralAsDay","(","RelDataTypeSystem","typeSystem,","int","sign,\n","String","value,\n","String","originalValue,\n","SqlParserPos","pos",")","{","BigDecimal","day",";","\n\n","//","validate","as","DAY","(","startPrecision",")",",","e",".","g",".","'DD'\n","String","intervalPattern","=","\"","(","\\\\d+",")","\"",";","\n\n","Matcher","m","=","Pattern",".","compile","(","intervalPattern",")",".","matcher","(","value",")",";","if","(","m",".","matches","(",")",")","{","//","Break","out","field","values\n","try","{","day","=","parseField","(","m,","1",")",";","}","catch","(","NumberFormatException","e",")","{","throw","invalidValueException","(","pos,","originalValue",")",";","}","\n\n","//","Validate","individual","fields\n","checkLeadFieldInRange","(","typeSystem,","sign,","day,","TimeUnit",".","DAY,","pos",")",";","\n\n","//","package","values","up","for","return\n","return","fillIntervalValueArray","(","sign,","day,","ZERO,","ZERO,","ZERO,","ZERO",")",";","}","else","{","throw","invalidValueException","(","pos,","originalValue",")",";","}"],"docstring_tokens":["Validates","an","INTERVAL","literal","against","a","DAY","interval","qualifier"],"prompt_tokens":[]}
{"code_tokens":["private","int[]","evaluateIntervalLiteralAsDayToHour","(","RelDataTypeSystem","typeSystem,","int","sign,\n","String","value,\n","String","originalValue,\n","SqlParserPos","pos",")","{","BigDecimal","day",";","BigDecimal","hour",";","\n\n","//","validate","as","DAY","(","startPrecision",")","TO","HOUR,","e",".","g",".","'DD","HH'\n","String","intervalPattern","=","\"","(","\\\\d+",")","(","\\\\d","{","1,2","}",")","\"",";","\n\n","Matcher","m","=","Pattern",".","compile","(","intervalPattern",")",".","matcher","(","value",")",";","if","(","m",".","matches","(",")",")","{","//","Break","out","field","values\n","try","{","day","=","parseField","(","m,","1",")",";","hour","=","parseField","(","m,","2",")",";","}","catch","(","NumberFormatException","e",")","{","throw","invalidValueException","(","pos,","originalValue",")",";","}","\n\n","//","Validate","individual","fields\n","checkLeadFieldInRange","(","typeSystem,","sign,","day,","TimeUnit",".","DAY,","pos",")",";","if","(","!isSecondaryFieldInRange","(","hour,","TimeUnit",".","HOUR",")",")","{","throw","invalidValueException","(","pos,","originalValue",")",";","}","\n\n","//","package","values","up","for","return\n","return","fillIntervalValueArray","(","sign,","day,","hour,","ZERO,","ZERO,","ZERO",")",";","}","else","{","throw","invalidValueException","(","pos,","originalValue",")",";","}"],"docstring_tokens":["Validates","an","INTERVAL","literal","against","a","DAY","TO","HOUR","interval","qualifier"],"prompt_tokens":[]}
{"code_tokens":["private","int[]","evaluateIntervalLiteralAsDayToMinute","(","RelDataTypeSystem","typeSystem,","int","sign,\n","String","value,\n","String","originalValue,\n","SqlParserPos","pos",")","{","BigDecimal","day",";","BigDecimal","hour",";","BigDecimal","minute",";","\n\n","//","validate","as","DAY","(","startPrecision",")","TO","MINUTE,","e",".","g",".","'DD","HH:MM'\n","String","intervalPattern","=","\"","(","\\\\d+",")","(","\\\\d","{","1,2","}",")",":","(","\\\\d","{","1,2","}",")","\"",";","\n\n","Matcher","m","=","Pattern",".","compile","(","intervalPattern",")",".","matcher","(","value",")",";","if","(","m",".","matches","(",")",")","{","//","Break","out","field","values\n","try","{","day","=","parseField","(","m,","1",")",";","hour","=","parseField","(","m,","2",")",";","minute","=","parseField","(","m,","3",")",";","}","catch","(","NumberFormatException","e",")","{","throw","invalidValueException","(","pos,","originalValue",")",";","}","\n\n","//","Validate","individual","fields\n","checkLeadFieldInRange","(","typeSystem,","sign,","day,","TimeUnit",".","DAY,","pos",")",";","if","(","!isSecondaryFieldInRange","(","hour,","TimeUnit",".","HOUR",")","||","!isSecondaryFieldInRange","(","minute,","TimeUnit",".","MINUTE",")",")","{","throw","invalidValueException","(","pos,","originalValue",")",";","}","\n\n","//","package","values","up","for","return\n","return","fillIntervalValueArray","(","sign,","day,","hour,","minute,","ZERO,","ZERO",")",";","}","else","{","throw","invalidValueException","(","pos,","originalValue",")",";","}"],"docstring_tokens":["Validates","an","INTERVAL","literal","against","a","DAY","TO","MINUTE","interval","qualifier"],"prompt_tokens":[]}
{"code_tokens":["private","int[]","evaluateIntervalLiteralAsDayToSecond","(","RelDataTypeSystem","typeSystem,","int","sign,\n","String","value,\n","String","originalValue,\n","SqlParserPos","pos",")","{","BigDecimal","day",";","BigDecimal","hour",";","BigDecimal","minute",";","BigDecimal","second",";","BigDecimal","secondFrac",";","boolean","hasFractionalSecond",";","\n\n","//","validate","as","DAY","(","startPrecision",")","TO","MINUTE,\n","//","e",".","g",".","'DD","HH:MM:SS'","or","'DD","HH:MM:SS",".","SSS'\n","//","Note:","must","check","two","patterns,","since","fractional","second","is","optional\n","final","int","fractionalSecondPrecision","=\n","getFractionalSecondPrecision","(","typeSystem",")",";","String","intervalPatternWithFracSec","=\n","\"","(","\\\\d+",")","(","\\\\d","{","1,2","}",")",":","(","\\\\d","{","1,2","}",")",":","(","\\\\d","{","1,2","}",")","\\\\",".","(","\\\\d","{","1,\"\n","+","fractionalSecondPrecision","+","\"","}",")","\"",";","String","intervalPatternWithoutFracSec","=\n","\"","(","\\\\d+",")","(","\\\\d","{","1,2","}",")",":","(","\\\\d","{","1,2","}",")",":","(","\\\\d","{","1,2","}",")","\"",";","\n\n","Matcher","m","=","Pattern",".","compile","(","intervalPatternWithFracSec",")",".","matcher","(","value",")",";","if","(","m",".","matches","(",")",")","{","hasFractionalSecond","=","true",";","}","else","{","m","=","Pattern",".","compile","(","intervalPatternWithoutFracSec",")",".","matcher","(","value",")",";","hasFractionalSecond","=","false",";","}","\n\n","if","(","m",".","matches","(",")",")","{","//","Break","out","field","values\n","try","{","day","=","parseField","(","m,","1",")",";","hour","=","parseField","(","m,","2",")",";","minute","=","parseField","(","m,","3",")",";","second","=","parseField","(","m,","4",")",";","}","catch","(","NumberFormatException","e",")","{","throw","invalidValueException","(","pos,","originalValue",")",";","}","\n\n","if","(","hasFractionalSecond",")","{","secondFrac","=","normalizeSecondFraction","(","castNonNull","(","m",".","group","(","5",")",")",")",";","}","else","{","secondFrac","=","ZERO",";","}","\n\n","//","Validate","individual","fields\n","checkLeadFieldInRange","(","typeSystem,","sign,","day,","TimeUnit",".","DAY,","pos",")",";","if","(","!isSecondaryFieldInRange","(","hour,","TimeUnit",".","HOUR",")","||","!isSecondaryFieldInRange","(","minute,","TimeUnit",".","MINUTE",")","||","!isSecondaryFieldInRange","(","second,","TimeUnit",".","SECOND",")","||","!isFractionalSecondFieldInRange","(","secondFrac",")",")","{","throw","invalidValueException","(","pos,","originalValue",")",";","}","\n\n","//","package","values","up","for","return\n","return","fillIntervalValueArray","(","sign,\n","day,\n","hour,\n","minute,\n","second,\n","secondFrac",")",";","}","else","{","throw","invalidValueException","(","pos,","originalValue",")",";","}"],"docstring_tokens":["Validates","an","INTERVAL","literal","against","a","DAY","TO","SECOND","interval","qualifier"],"prompt_tokens":[]}
{"code_tokens":["private","int[]","evaluateIntervalLiteralAsHour","(","RelDataTypeSystem","typeSystem,","int","sign,\n","String","value,\n","String","originalValue,\n","SqlParserPos","pos",")","{","BigDecimal","hour",";","\n\n","//","validate","as","HOUR","(","startPrecision",")",",","e",".","g",".","'HH'\n","String","intervalPattern","=","\"","(","\\\\d+",")","\"",";","\n\n","Matcher","m","=","Pattern",".","compile","(","intervalPattern",")",".","matcher","(","value",")",";","if","(","m",".","matches","(",")",")","{","//","Break","out","field","values\n","try","{","hour","=","parseField","(","m,","1",")",";","}","catch","(","NumberFormatException","e",")","{","throw","invalidValueException","(","pos,","originalValue",")",";","}","\n\n","//","Validate","individual","fields\n","checkLeadFieldInRange","(","typeSystem,","sign,","hour,","TimeUnit",".","HOUR,","pos",")",";","\n\n","//","package","values","up","for","return\n","return","fillIntervalValueArray","(","sign,","ZERO,","hour,","ZERO,","ZERO,","ZERO",")",";","}","else","{","throw","invalidValueException","(","pos,","originalValue",")",";","}"],"docstring_tokens":["Validates","an","INTERVAL","literal","against","an","HOUR","interval","qualifier"],"prompt_tokens":[]}
{"code_tokens":["private","int[]","evaluateIntervalLiteralAsHourToMinute","(","RelDataTypeSystem","typeSystem,","int","sign,\n","String","value,\n","String","originalValue,\n","SqlParserPos","pos",")","{","BigDecimal","hour",";","BigDecimal","minute",";","\n\n","//","validate","as","HOUR","(","startPrecision",")","TO","MINUTE,","e",".","g",".","'HH:MM'\n","String","intervalPattern","=","\"","(","\\\\d+",")",":","(","\\\\d","{","1,2","}",")","\"",";","\n\n","Matcher","m","=","Pattern",".","compile","(","intervalPattern",")",".","matcher","(","value",")",";","if","(","m",".","matches","(",")",")","{","//","Break","out","field","values\n","try","{","hour","=","parseField","(","m,","1",")",";","minute","=","parseField","(","m,","2",")",";","}","catch","(","NumberFormatException","e",")","{","throw","invalidValueException","(","pos,","originalValue",")",";","}","\n\n","//","Validate","individual","fields\n","checkLeadFieldInRange","(","typeSystem,","sign,","hour,","TimeUnit",".","HOUR,","pos",")",";","if","(","!isSecondaryFieldInRange","(","minute,","TimeUnit",".","MINUTE",")",")","{","throw","invalidValueException","(","pos,","originalValue",")",";","}","\n\n","//","package","values","up","for","return\n","return","fillIntervalValueArray","(","sign,","ZERO,","hour,","minute,","ZERO,","ZERO",")",";","}","else","{","throw","invalidValueException","(","pos,","originalValue",")",";","}"],"docstring_tokens":["Validates","an","INTERVAL","literal","against","an","HOUR","TO","MINUTE","interval","qualifier"],"prompt_tokens":[]}
{"code_tokens":["private","int[]","evaluateIntervalLiteralAsHourToSecond","(","RelDataTypeSystem","typeSystem,","int","sign,\n","String","value,\n","String","originalValue,\n","SqlParserPos","pos",")","{","BigDecimal","hour",";","BigDecimal","minute",";","BigDecimal","second",";","BigDecimal","secondFrac",";","boolean","hasFractionalSecond",";","\n\n","//","validate","as","HOUR","(","startPrecision",")","TO","SECOND,\n","//","e",".","g",".","'HH:MM:SS'","or","'HH:MM:SS",".","SSS'\n","//","Note:","must","check","two","patterns,","since","fractional","second","is","optional\n","final","int","fractionalSecondPrecision","=\n","getFractionalSecondPrecision","(","typeSystem",")",";","String","intervalPatternWithFracSec","=\n","\"","(","\\\\d+",")",":","(","\\\\d","{","1,2","}",")",":","(","\\\\d","{","1,2","}",")","\\\\",".","(","\\\\d","{","1,\"\n","+","fractionalSecondPrecision","+","\"","}",")","\"",";","String","intervalPatternWithoutFracSec","=\n","\"","(","\\\\d+",")",":","(","\\\\d","{","1,2","}",")",":","(","\\\\d","{","1,2","}",")","\"",";","\n\n","Matcher","m","=","Pattern",".","compile","(","intervalPatternWithFracSec",")",".","matcher","(","value",")",";","if","(","m",".","matches","(",")",")","{","hasFractionalSecond","=","true",";","}","else","{","m","=","Pattern",".","compile","(","intervalPatternWithoutFracSec",")",".","matcher","(","value",")",";","hasFractionalSecond","=","false",";","}","\n\n","if","(","m",".","matches","(",")",")","{","//","Break","out","field","values\n","try","{","hour","=","parseField","(","m,","1",")",";","minute","=","parseField","(","m,","2",")",";","second","=","parseField","(","m,","3",")",";","}","catch","(","NumberFormatException","e",")","{","throw","invalidValueException","(","pos,","originalValue",")",";","}","\n\n","if","(","hasFractionalSecond",")","{","secondFrac","=","normalizeSecondFraction","(","castNonNull","(","m",".","group","(","4",")",")",")",";","}","else","{","secondFrac","=","ZERO",";","}","\n\n","//","Validate","individual","fields\n","checkLeadFieldInRange","(","typeSystem,","sign,","hour,","TimeUnit",".","HOUR,","pos",")",";","if","(","!isSecondaryFieldInRange","(","minute,","TimeUnit",".","MINUTE",")","||","!isSecondaryFieldInRange","(","second,","TimeUnit",".","SECOND",")","||","!isFractionalSecondFieldInRange","(","secondFrac",")",")","{","throw","invalidValueException","(","pos,","originalValue",")",";","}","\n\n","//","package","values","up","for","return\n","return","fillIntervalValueArray","(","sign,\n","ZERO,\n","hour,\n","minute,\n","second,\n","secondFrac",")",";","}","else","{","throw","invalidValueException","(","pos,","originalValue",")",";","}"],"docstring_tokens":["Validates","an","INTERVAL","literal","against","an","HOUR","TO","SECOND","interval","qualifier"],"prompt_tokens":[]}
{"code_tokens":["private","int[]","evaluateIntervalLiteralAsMinute","(","RelDataTypeSystem","typeSystem,","int","sign,\n","String","value,\n","String","originalValue,\n","SqlParserPos","pos",")","{","BigDecimal","minute",";","\n\n","//","validate","as","MINUTE","(","startPrecision",")",",","e",".","g",".","'MM'\n","String","intervalPattern","=","\"","(","\\\\d+",")","\"",";","\n\n","Matcher","m","=","Pattern",".","compile","(","intervalPattern",")",".","matcher","(","value",")",";","if","(","m",".","matches","(",")",")","{","//","Break","out","field","values\n","try","{","minute","=","parseField","(","m,","1",")",";","}","catch","(","NumberFormatException","e",")","{","throw","invalidValueException","(","pos,","originalValue",")",";","}","\n\n","//","Validate","individual","fields\n","checkLeadFieldInRange","(","typeSystem,","sign,","minute,","TimeUnit",".","MINUTE,","pos",")",";","\n\n","//","package","values","up","for","return\n","return","fillIntervalValueArray","(","sign,","ZERO,","ZERO,","minute,","ZERO,","ZERO",")",";","}","else","{","throw","invalidValueException","(","pos,","originalValue",")",";","}"],"docstring_tokens":["Validates","an","INTERVAL","literal","against","an","MINUTE","interval","qualifier"],"prompt_tokens":[]}
{"code_tokens":["private","int[]","evaluateIntervalLiteralAsMinuteToSecond","(","RelDataTypeSystem","typeSystem,","int","sign,\n","String","value,\n","String","originalValue,\n","SqlParserPos","pos",")","{","BigDecimal","minute",";","BigDecimal","second",";","BigDecimal","secondFrac",";","boolean","hasFractionalSecond",";","\n\n","//","validate","as","MINUTE","(","startPrecision",")","TO","SECOND,\n","//","e",".","g",".","'MM:SS'","or","'MM:SS",".","SSS'\n","//","Note:","must","check","two","patterns,","since","fractional","second","is","optional\n","final","int","fractionalSecondPrecision","=\n","getFractionalSecondPrecision","(","typeSystem",")",";","String","intervalPatternWithFracSec","=\n","\"","(","\\\\d+",")",":","(","\\\\d","{","1,2","}",")","\\\\",".","(","\\\\d","{","1,\"","+","fractionalSecondPrecision","+","\"","}",")","\"",";","String","intervalPatternWithoutFracSec","=\n","\"","(","\\\\d+",")",":","(","\\\\d","{","1,2","}",")","\"",";","\n\n","Matcher","m","=","Pattern",".","compile","(","intervalPatternWithFracSec",")",".","matcher","(","value",")",";","if","(","m",".","matches","(",")",")","{","hasFractionalSecond","=","true",";","}","else","{","m","=","Pattern",".","compile","(","intervalPatternWithoutFracSec",")",".","matcher","(","value",")",";","hasFractionalSecond","=","false",";","}","\n\n","if","(","m",".","matches","(",")",")","{","//","Break","out","field","values\n","try","{","minute","=","parseField","(","m,","1",")",";","second","=","parseField","(","m,","2",")",";","}","catch","(","NumberFormatException","e",")","{","throw","invalidValueException","(","pos,","originalValue",")",";","}","\n\n","if","(","hasFractionalSecond",")","{","secondFrac","=","normalizeSecondFraction","(","castNonNull","(","m",".","group","(","3",")",")",")",";","}","else","{","secondFrac","=","ZERO",";","}","\n\n","//","Validate","individual","fields\n","checkLeadFieldInRange","(","typeSystem,","sign,","minute,","TimeUnit",".","MINUTE,","pos",")",";","if","(","!isSecondaryFieldInRange","(","second,","TimeUnit",".","SECOND",")","||","!isFractionalSecondFieldInRange","(","secondFrac",")",")","{","throw","invalidValueException","(","pos,","originalValue",")",";","}","\n\n","//","package","values","up","for","return\n","return","fillIntervalValueArray","(","sign,\n","ZERO,\n","ZERO,\n","minute,\n","second,\n","secondFrac",")",";","}","else","{","throw","invalidValueException","(","pos,","originalValue",")",";","}"],"docstring_tokens":["Validates","an","INTERVAL","literal","against","an","MINUTE","TO","SECOND","interval","qualifier"],"prompt_tokens":[]}
{"code_tokens":["private","int[]","evaluateIntervalLiteralAsSecond","(","RelDataTypeSystem","typeSystem,\n","int","sign,\n","String","value,\n","String","originalValue,\n","SqlParserPos","pos",")","{","BigDecimal","second",";","BigDecimal","secondFrac",";","boolean","hasFractionalSecond",";","\n\n","//","validate","as","SECOND","(","startPrecision,","fractionalSecondPrecision",")","//","e",".","g",".","'SS'","or","'SS",".","SSS'\n","//","Note:","must","check","two","patterns,","since","fractional","second","is","optional\n","final","int","fractionalSecondPrecision","=\n","getFractionalSecondPrecision","(","typeSystem",")",";","String","intervalPatternWithFracSec","=\n","\"","(","\\\\d+",")","\\\\",".","(","\\\\d","{","1,\"","+","fractionalSecondPrecision","+","\"","}",")","\"",";","String","intervalPatternWithoutFracSec","=\n","\"","(","\\\\d+",")","\"",";","\n\n","Matcher","m","=","Pattern",".","compile","(","intervalPatternWithFracSec",")",".","matcher","(","value",")",";","if","(","m",".","matches","(",")",")","{","hasFractionalSecond","=","true",";","}","else","{","m","=","Pattern",".","compile","(","intervalPatternWithoutFracSec",")",".","matcher","(","value",")",";","hasFractionalSecond","=","false",";","}","\n\n","if","(","m",".","matches","(",")",")","{","//","Break","out","field","values\n","try","{","second","=","parseField","(","m,","1",")",";","}","catch","(","NumberFormatException","e",")","{","throw","invalidValueException","(","pos,","originalValue",")",";","}","\n\n","if","(","hasFractionalSecond",")","{","secondFrac","=","normalizeSecondFraction","(","castNonNull","(","m",".","group","(","2",")",")",")",";","}","else","{","secondFrac","=","ZERO",";","}","\n\n","//","Validate","individual","fields\n","checkLeadFieldInRange","(","typeSystem,","sign,","second,","TimeUnit",".","SECOND,","pos",")",";","if","(","!isFractionalSecondFieldInRange","(","secondFrac",")",")","{","throw","invalidValueException","(","pos,","originalValue",")",";","}","\n\n","//","package","values","up","for","return\n","return","fillIntervalValueArray","(","sign,","ZERO,","ZERO,","ZERO,","second,","secondFrac",")",";","}","else","{","throw","invalidValueException","(","pos,","originalValue",")",";","}"],"docstring_tokens":["Validates","an","INTERVAL","literal","against","an","SECOND","interval","qualifier"],"prompt_tokens":[]}
{"code_tokens":["@Pure\n","public","@Nullable","SqlIdentifier","getAlias","(",")","{","return","alias",";"],"docstring_tokens":["Returns","the","alias","for","the","target","table","of","this","UPDATE"],"prompt_tokens":[]}
{"code_tokens":["private","void","postOrderWalk","(","Operator","root,","PlanVisitor","visitor",")","throws","FrontendException","{","final","Collection<Operator>","nexts","=\n","Utils",".","mergeCollection","(","plan",".","getSuccessors","(","root",")",",","plan",".","getSuccessors","(","root",")",")",";","if","(","nexts","!=","null",")","{","for","(","Operator","op",":","nexts",")","{","postOrderWalk","(","op,","visitor",")",";","}","}","root",".","accept","(","visitor",")",";"],"docstring_tokens":["Does","post-order","walk","on","the","Pig","expression","plan","from","source","to","sinks"],"prompt_tokens":[]}
{"code_tokens":["protected","SqlParserListFixture","list","(",")","{","return","new","SqlParserListFixture","(","factory,","tester,","dialect,","convertToLinux,","sap",")",";"],"docstring_tokens":["Creates","an","instance","of","helper","class","SqlParserListFixture","to","test","parsing","a","list","of","statements"],"prompt_tokens":[]}
{"code_tokens":["public","SqlParserFixture","withFactory","(","UnaryOperator<SqlTestFactory>","transform",")","{","final","SqlTestFactory","factory","=","transform",".","apply","(","this",".","factory",")",";","if","(","factory","==","this",".","factory",")","{","return","this",";","}","return","new","SqlParserFixture","(","factory,","sap,","expression,","tester,","dialect,\n","convertToLinux,","parserChecker",")",";"],"docstring_tokens":["Creates","a","copy","of","this","fixture","with","a","new","test","factory"],"prompt_tokens":[]}
{"code_tokens":["private","IndexCondition","translateAnd","(","RexNode","condition",")","{","//","expand","calls","to","SEARCH","(",".",".",".",",","Sarg","(",")",")","to",">,","=,","etc",".","final","RexNode","condition2","=\n","RexUtil",".","expandSearch","(","rexBuilder,","null,","condition",")",";","//","decompose","condition","by","AND,","flatten","row","expression\n","List<RexNode>","rexNodeList","=","RelOptUtil",".","conjunctions","(","condition2",")",";","\n\n","List<IndexCondition>","indexConditions","=","new","ArrayList<>","(",")",";","\n\n","//","try","to","push","down","filter","by","primary","key\n","if","(","pkMeta","!=","null",")","{","IndexCondition","pkPushDownCond","=","findPushDownCondition","(","rexNodeList,","pkMeta",")",";","indexConditions",".","add","(","pkPushDownCond",")",";","}","\n\n","//","try","to","push","down","filter","by","secondary","keys\n","if","(","CollectionUtils",".","isNotEmpty","(","skMetaList",")",")","{","for","(","KeyMeta","skMeta",":","skMetaList",")","{","indexConditions",".","add","(","findPushDownCondition","(","rexNodeList,","skMeta",")",")",";","}","}","\n\n","//","a","collection","of","all","possible","push","down","conditions,","see","if","it","can\n","//","be","pushed","down,","filter","by","forcing","index","name,","then","sort","by","comparator\n","Stream<IndexCondition>","pushDownConditions","=","indexConditions",".","stream","(",")",".","filter","(","IndexCondition::canPushDown",")",".","filter","(","this::nonForceIndexOrMatchForceIndexName",")",".","sorted","(","new","IndexConditionComparator","(",")",")",";","\n\n","return","pushDownConditions",".","findFirst","(",")",".","orElse","(","IndexCondition",".","EMPTY_CONDITION",")",";"],"docstring_tokens":["Translates","a","conjunctive","predicate","to","a","push","down","condition"],"prompt_tokens":[]}
{"code_tokens":["private","IndexCondition","findPushDownCondition","(","List<RexNode>","rexNodeList,","KeyMeta","keyMeta",")","{","//","find","field","expressions","matching","index","columns","and","specific","operators\n","List<InternalRexNode>","matchedRexNodeList","=","analyzePrefixMatches","(","rexNodeList,","keyMeta",")",";","\n\n","//","none","of","the","conditions","can","be","pushed","down\n","if","(","CollectionUtils",".","isEmpty","(","matchedRexNodeList",")",")","{","return","IndexCondition",".","EMPTY_CONDITION",";","}","\n\n","//","a","collection","that","maps","ordinal","in","index","column","list\n","//","to","multiple","field","expressions\n","Multimap<Integer,","InternalRexNode>","keyOrdToNodesMap","=","HashMultimap",".","create","(",")",";","for","(","InternalRexNode","node",":","matchedRexNodeList",")","{","keyOrdToNodesMap",".","put","(","node",".","ordinalInKey,","node",")",";","}","\n\n","//","left-prefix","index","rule","not","match\n","Collection<InternalRexNode>","leftMostKeyNodes","=","keyOrdToNodesMap",".","get","(","0",")",";","if","(","CollectionUtils",".","isEmpty","(","leftMostKeyNodes",")",")","{","return","IndexCondition",".","EMPTY_CONDITION",";","}","\n\n","//","create","result","which","might","have","conditions","to","push","down\n","List<String>","indexColumnNames","=","keyMeta",".","getKeyColumnNames","(",")",";","List<RexNode>","pushDownRexNodeList","=","new","ArrayList<>","(",")",";","List<RexNode>","remainderRexNodeList","=","new","ArrayList<>","(","rexNodeList",")",";","IndexCondition","condition","=\n","IndexCondition",".","create","(","fieldNames,","keyMeta",".","getName","(",")",",","indexColumnNames,\n","pushDownRexNodeList,","remainderRexNodeList",")",";","\n\n","//","handle","point","query","if","possible\n","condition","=","handlePointQuery","(","condition,","keyMeta,","leftMostKeyNodes,\n","keyOrdToNodesMap,","pushDownRexNodeList,","remainderRexNodeList",")",";","if","(","condition",".","canPushDown","(",")",")","{","return","condition",";","}","\n\n","//","handle","range","query\n","condition","=","handleRangeQuery","(","condition,","keyMeta,","leftMostKeyNodes,\n","pushDownRexNodeList,","remainderRexNodeList,","\">=\",","\">\"",")",";","condition","=","handleRangeQuery","(","condition,","keyMeta,","leftMostKeyNodes,\n","pushDownRexNodeList,","remainderRexNodeList,","\"<=\",","\"<\"",")",";","\n\n","return","condition",";"],"docstring_tokens":["Tries","to","translate","a","conjunctive","predicate","to","push","down","condition"],"prompt_tokens":[]}
{"code_tokens":["private","Optional<InternalRexNode>","translateMatch2","(","RexNode","node,","KeyMeta","keyMeta",")","{","switch","(","node",".","getKind","(",")",")","{","case","EQUALS:\n","return","translateBinary","(","\"=\",","\"=\",","(","RexCall",")","node,","keyMeta",")",";","case","LESS_THAN:\n","return","translateBinary","(","\"<\",","\">\",","(","RexCall",")","node,","keyMeta",")",";","case","LESS_THAN_OR_EQUAL:\n","return","translateBinary","(","\"<=\",","\">=\",","(","RexCall",")","node,","keyMeta",")",";","case","GREATER_THAN:\n","return","translateBinary","(","\">\",","\"<\",","(","RexCall",")","node,","keyMeta",")",";","case","GREATER_THAN_OR_EQUAL:\n","return","translateBinary","(","\">=\",","\"<=\",","(","RexCall",")","node,","keyMeta",")",";","default:\n","return","Optional",".","empty","(",")",";","}"],"docstring_tokens":["Translates","a","binary","relation"],"prompt_tokens":[]}
{"code_tokens":["private","Optional<InternalRexNode>","translateBinary2","(","String","op,","RexNode","left,\n","RexNode","right,","RexNode","originNode,","KeyMeta","keyMeta",")","{","RexLiteral","rightLiteral",";","if","(","right",".","isA","(","SqlKind",".","LITERAL",")",")","{","rightLiteral","=","(","RexLiteral",")","right",";","}","else","{","//","because","MySQL's","TIMESTAMP","is","mapped","to","TIMESTAMP_WITH_TIME_ZONE","sql","type,\n","//","we","should","cast","the","value","to","literal",".","if","(","right",".","isA","(","SqlKind",".","CAST",")","&&","isSqlTypeMatch","(","(","RexCall",")","right,","SqlTypeName",".","TIMESTAMP_WITH_LOCAL_TIME_ZONE",")",")","{","rightLiteral","=","(","RexLiteral",")","(","(","RexCall",")","right",")",".","operands",".","get","(","0",")",";","}","else","{","return","Optional",".","empty","(",")",";","}","}","switch","(","left",".","getKind","(",")",")","{","case","INPUT_REF:\n","final","RexInputRef","left1","=","(","RexInputRef",")","left",";","String","name","=","fieldNames",".","get","(","left1",".","getIndex","(",")",")",";","//","filter","out","field","does","not","show","in","index","column\n","if","(","!keyMeta",".","getKeyColumnNames","(",")",".","contains","(","name",")",")","{","return","Optional",".","empty","(",")",";","}","return","translateOp2","(","op,","name,","rightLiteral,","originNode,","keyMeta",")",";","case","CAST:\n","return","translateBinary2","(","op,","(","(","RexCall",")","left",")",".","operands",".","get","(","0",")",",","right,\n","originNode,","keyMeta",")",";","default:\n","return","Optional",".","empty","(",")",";","}"],"docstring_tokens":["Translates","a","call","to","a","binary","operator"],"prompt_tokens":[]}
{"code_tokens":["private","static","Optional<InternalRexNode>","translateOp2","(","String","op,","String","name,\n","RexLiteral","right,","RexNode","originNode,","KeyMeta","keyMeta",")","{","String","value","=","literalValue","(","right",")",";","InternalRexNode","node","=","new","InternalRexNode","(",")",";","node",".","node","=","originNode",";","node",".","ordinalInKey","=","keyMeta",".","getKeyColumnNames","(",")",".","indexOf","(","name",")",";","//","For","variable","length","column,","Innodb-java-reader","have","a","limitation,\n","//","left-prefix","index","length","should","be","less","than","search","value","literal",".","//","For","example,","we","cannot","leverage","index","of","EMAIL","(","3",")","upon","search","value\n","//","`someone@apache",".","org`,","because","the","value","length","is","longer","than","3",".","if","(","keyMeta",".","getVarLen","(","name",")",".","isPresent","(",")","&&","keyMeta",".","getVarLen","(","name",")",".","get","(",")","<","value",".","length","(",")",")","{","return","Optional",".","empty","(",")",";","}","node",".","fieldName","=","name",";","node",".","op","=","op",";","node",".","right","=","value",";","return","Optional",".","of","(","node",")",";"],"docstring_tokens":["Combines","a","field","name,","operator,","and","literal","to","produce","a","predicate","string"],"prompt_tokens":[]}
{"code_tokens":["public","static","<E>","Iterable<Ord<E>>","zip","(","final","Iterable<?","extends","E>","iterable",")","{","return","(",")","->","zip","(","iterable",".","iterator","(",")",")",";"],"docstring_tokens":["Creates","an","iterable","of","Ords","over","an","iterable"],"prompt_tokens":[]}
{"code_tokens":["public","static","<E>","Iterator<Ord<E>>","zip","(","final","Iterator<?","extends","E>","iterator",")","{","return","new","Iterator<Ord<E>>","(",")","{","int","n","=","0",";","\n\n","@Override","public","boolean","hasNext","(",")","{","return","iterator",".","hasNext","(",")",";","}","\n\n","@Override","public","Ord<E>","next","(",")","{","return","Ord",".","of","(","n++,","iterator",".","next","(",")",")",";","}","\n\n","@Override","public","void","remove","(",")","{","iterator",".","remove","(",")",";","}","}",";"],"docstring_tokens":["Creates","an","iterator","of","Ords","over","an","iterator"],"prompt_tokens":[]}
{"code_tokens":["public","static","@PolyNull","SerializableCharset","forCharset","(","@PolyNull","Charset","charset",")","{","if","(","charset","==","null",")","{","return","null",";","}","return","new","SerializableCharset","(","charset",")",";"],"docstring_tokens":["Returns","a","SerializableCharset","wrapping","the","given","Charset,","or","null","if","the","charset","is","null"],"prompt_tokens":[]}
{"code_tokens":["@EnsuresNonNull","(","{","\"this",".","metadataProvider\",","\"this",".","metadataFactory\"","}",")","@SuppressWarnings","(","\"deprecation\"",")","public","void","setMetadataProvider","(","@UnknownInitialization","RelOptCluster","this,\n","RelMetadataProvider","metadataProvider",")","{","this",".","metadataProvider","=","metadataProvider",";","this",".","metadataFactory","=\n","new","org",".","apache",".","calcite",".","rel",".","metadata",".","MetadataFactoryImpl","(","metadataProvider",")",";","//","Wrap","the","metadata","provider","as","a","JaninoRelMetadataProvider\n","//","and","set","it","to","the","ThreadLocal,\n","//","JaninoRelMetadataProvider","is","required","by","the","RelMetadataQuery",".","RelMetadataQueryBase",".","THREAD_PROVIDERS\n",".","set","(","JaninoRelMetadataProvider",".","of","(","metadataProvider",")",")",";"],"docstring_tokens":["Overrides","the","default","metadata","provider","for","this","cluster"],"prompt_tokens":[]}
{"code_tokens":["public","HintStrategyTable","getHintStrategies","(",")","{","if","(","this",".","hintStrategies","==","null",")","{","this",".","hintStrategies","=","HintStrategyTable",".","EMPTY",";","}","return","this",".","hintStrategies",";"],"docstring_tokens":["Returns","the","hint","strategies","of","this","cluster"],"prompt_tokens":[]}
{"code_tokens":["public","CorrelationId","createCorrel","(",")","{","return","new","CorrelationId","(","nextCorrel",".","getAndIncrement","(",")",")",";"],"docstring_tokens":["Constructs","a","new","id","for","a","correlating","variable"],"prompt_tokens":[]}
{"code_tokens":["public","RelTraitSet","traitSet","(",")","{","return","emptyTraitSet",";"],"docstring_tokens":["Returns","the","default","trait","set","for","this","cluster"],"prompt_tokens":[]}
{"code_tokens":["public","static","@Nullable","Object","fromEnum","(","@Nullable","Object","value",")","{","return","value","instanceof","Enum","?","fromEnum","(","(","Enum",")","value",")",":","value",";"],"docstring_tokens":["Converts","a","literal","into","a","value","that","can","be","serialized","to","JSON"],"prompt_tokens":[]}
{"code_tokens":["public","static","SqlCharStringLiteral","createRegexPatternLiteral","(","SqlNode","call,","SqlLiteral","trimFlag",")","{","final","String","regexPattern","=","requireNonNull","(","(","(","SqlCharStringLiteral",")","call",")",".","toValue","(",")",",\n","(",")","->","\"null","value","for","SqlNode","\"","+","call",")",";","String","escaped","=","escapeSpecialChar","(","regexPattern",")",";","final","StringBuilder","builder","=","new","StringBuilder","(",")",";","switch","(","trimFlag",".","getValueAs","(","SqlTrimFunction",".","Flag",".","class",")",")","{","case","LEADING:\n","builder",".","append","(","\"^","(","\"",")",".","append","(","escaped",")",".","append","(","\"",")","*\"",")",";","break",";","case","TRAILING:\n","builder",".","append","(","\"","(","\"",")",".","append","(","escaped",")",".","append","(","\"",")","*$\"",")",";","break",";","default:\n","builder",".","append","(","\"^","(","\"",")",".","append","(","escaped",")",".","append","(","\"",")","*|","(","\"",")",".","append","(","escaped",")",".","append","(","\"",")","*$\"",")",";","break",";","}","return","SqlLiteral",".","createCharString","(","builder",".","toString","(",")",",\n","call",".","getParserPosition","(",")",")",";"],"docstring_tokens":["Creates","regex","pattern","based","on","the","TRIM","flag"],"prompt_tokens":[]}
{"code_tokens":["public","static","SqlSpecialOperator","specialOperatorByName","(","String","opName",")","{","return","new","SqlSpecialOperator","(","opName,","SqlKind",".","OTHER_FUNCTION",")","{","@Override","public","void","unparse","(","SqlWriter","writer,\n","SqlCall","call,\n","int","leftPrec,\n","int","rightPrec",")","{","writer",".","print","(","getName","(",")",")",";","final","SqlWriter",".","Frame","frame","=\n","writer",".","startList","(","SqlWriter",".","FrameTypeEnum",".","FUN_CALL,","\"","(","\",","\"",")","\"",")",";","for","(","SqlNode","operand",":","call",".","getOperandList","(",")",")","{","writer",".","sep","(","\",\"",")",";","operand",".","unparse","(","writer,","0,","0",")",";","}","writer",".","endList","(","frame",")",";","}","}",";"],"docstring_tokens":["Returns","a","SqlSpecialOperator","with","given","operator","name,","mainly","used","for","unparse","override"],"prompt_tokens":[]}
{"code_tokens":["public","static","<E>","Set<E>","of","(","E","e1",")","{","//noinspection","unchecked\n","return","e1","==","null","?","(","Set<E>",")","SINGLETON_NULL",":","ImmutableSet",".","of","(","e1",")",";"],"docstring_tokens":["Creates","an","immutable","set","of","1","element"],"prompt_tokens":[]}
{"code_tokens":["@SuppressWarnings","(","\"unchecked\"",")","public","static","<E>","Set<E>","of","(","E","e1,","E","e2",")","{","return","copyOf","(","(","E","[]",")","new","Object[]","{","e1,","e2","}",",","false",")",";"],"docstring_tokens":["Creates","an","immutable","set","of","2","elements"],"prompt_tokens":[]}
{"code_tokens":["@SuppressWarnings","(","\"unchecked\"",")","public","static","<E>","Set<E>","of","(","E","e1,","E","e2,","E","e3",")","{","return","copyOf","(","(","E","[]",")","new","Object[]","{","e1,","e2,","e3","}",",","false",")",";"],"docstring_tokens":["Creates","an","immutable","set","of","3","elements"],"prompt_tokens":[]}
{"code_tokens":["@SuppressWarnings","(","\"unchecked\"",")","public","static","<E>","Set<E>","of","(","E","e1,","E","e2,","E","e3,","E","e4",")","{","return","copyOf","(","(","E","[]",")","new","Object[]","{","e1,","e2,","e3,","e4","}",",","false",")",";"],"docstring_tokens":["Creates","an","immutable","set","of","4","elements"],"prompt_tokens":[]}
{"code_tokens":["@SuppressWarnings","(","\"unchecked\"",")","public","static","<E>","Set<E>","of","(","E","e1,","E","e2,","E","e3,","E","e4,","E","e5,","E",".",".",".","others",")","{","E[]","elements","=","(","E[]",")","new","Object[5","+","others",".","length]",";","elements[0]","=","e1",";","elements[1]","=","e2",";","elements[2]","=","e3",";","elements[3]","=","e4",";","elements[4]","=","e5",";","System",".","arraycopy","(","others,","0,","elements,","5,","others",".","length",")",";","return","copyOf","(","elements,","false",")",";"],"docstring_tokens":["Creates","an","immutable","set","of","5","or","more","elements"],"prompt_tokens":[]}
{"code_tokens":["public","static","List<Integer>","left","(","final","List<IntPair>","pairs",")","{","return","Util",".","transform","(","pairs,","x","->","x",".","source",")",";"],"docstring_tokens":["Returns","the","left","side","of","a","list","of","pairs"],"prompt_tokens":[]}
{"code_tokens":["public","static","List<Integer>","right","(","final","List<IntPair>","pairs",")","{","return","Util",".","transform","(","pairs,","x","->","x",".","target",")",";"],"docstring_tokens":["Returns","the","right","side","of","a","list","of","pairs"],"prompt_tokens":[]}
{"code_tokens":["protected","NodeLineage","generateSwapTableColumnReferencesLineage","(","RexBuilder","rexBuilder,\n","RelMetadataQuery","mq,\n","RelNode","node,\n","BiMap<RelTableRef,","RelTableRef>","tableMapping,\n","EquivalenceClasses","ec,\n","List<RexNode>","nodeExprs",")","{","final","Map<RexNode,","Integer>","exprsLineage","=","new","HashMap<>","(",")",";","final","Map<RexNode,","Integer>","exprsLineageLosslessCasts","=","new","HashMap<>","(",")",";","for","(","int","i","=","0",";","i","<","nodeExprs",".","size","(",")",";","i++",")","{","final","RexNode","expr","=","nodeExprs",".","get","(","i",")",";","final","Set<RexNode>","lineages","=","mq",".","getExpressionLineage","(","node,","expr",")",";","if","(","lineages","==","null",")","{","//","Next","expression\n","continue",";","}","if","(","lineages",".","size","(",")","!=","1",")","{","throw","new","IllegalStateException","(","\"We","only","support","project","-","filter","-","join,","\"\n","+","\"thus","expression","lineage","should","map","to","a","single","expression,","got:","'\"\n","+","lineages","+","\"'","for","expr","'\"","+","expr","+","\"'","in","node","'\"","+","node","+","\"'\"",")",";","}","//","Rewrite","expr",".","First","we","swap","the","table","references","following","the","table\n","//","mapping,","then","we","take","first","element","from","the","corresponding","equivalence","class\n","final","RexNode","e","=","RexUtil",".","swapTableColumnReferences","(","rexBuilder,\n","lineages",".","iterator","(",")",".","next","(",")",",","tableMapping,","ec",".","getEquivalenceClassesMap","(",")",")",";","exprsLineage",".","put","(","e,","i",")",";","if","(","RexUtil",".","isLosslessCast","(","e",")",")","{","exprsLineageLosslessCasts",".","put","(","(","(","RexCall",")","e",")",".","getOperands","(",")",".","get","(","0",")",",","i",")",";","}","}","return","new","NodeLineage","(","exprsLineage,","exprsLineageLosslessCasts",")",";"],"docstring_tokens":["It","swaps","the","table","references","and","then","the","column","references","of","the","input","expressions","using","the","table","mapping","and","the","equivalence","classes"],"prompt_tokens":[]}
{"code_tokens":["protected","NodeLineage","generateSwapColumnTableReferencesLineage","(","RexBuilder","rexBuilder,\n","RelMetadataQuery","mq,\n","RelNode","node,\n","BiMap<RelTableRef,","RelTableRef>","tableMapping,\n","EquivalenceClasses","ec,\n","List<RexNode>","nodeExprs",")","{","final","Map<RexNode,","Integer>","exprsLineage","=","new","HashMap<>","(",")",";","final","Map<RexNode,","Integer>","exprsLineageLosslessCasts","=","new","HashMap<>","(",")",";","for","(","int","i","=","0",";","i","<","nodeExprs",".","size","(",")",";","i++",")","{","final","RexNode","expr","=","nodeExprs",".","get","(","i",")",";","final","Set<RexNode>","lineages","=","mq",".","getExpressionLineage","(","node,","expr",")",";","if","(","lineages","==","null",")","{","//","Next","expression\n","continue",";","}","if","(","lineages",".","size","(",")","!=","1",")","{","throw","new","IllegalStateException","(","\"We","only","support","project","-","filter","-","join,","\"\n","+","\"thus","expression","lineage","should","map","to","a","single","expression,","got:","'\"\n","+","lineages","+","\"'","for","expr","'\"","+","expr","+","\"'","in","node","'\"","+","node","+","\"'\"",")",";","}","//","Rewrite","expr",".","First","we","take","first","element","from","the","corresponding","equivalence","class,\n","//","then","we","swap","the","table","references","following","the","table","mapping\n","final","RexNode","e","=","RexUtil",".","swapColumnTableReferences","(","rexBuilder,\n","lineages",".","iterator","(",")",".","next","(",")",",","ec",".","getEquivalenceClassesMap","(",")",",","tableMapping",")",";","exprsLineage",".","put","(","e,","i",")",";","if","(","RexUtil",".","isLosslessCast","(","e",")",")","{","exprsLineageLosslessCasts",".","put","(","(","(","RexCall",")","e",")",".","getOperands","(",")",".","get","(","0",")",",","i",")",";","}","}","return","new","NodeLineage","(","exprsLineage,","exprsLineageLosslessCasts",")",";"],"docstring_tokens":["It","swaps","the","column","references","and","then","the","table","references","of","the","input","expressions","using","the","equivalence","classes","and","the","table","mapping"],"prompt_tokens":[]}
{"code_tokens":["private","<T>","@Nullable","Table","fieldRelation","(","final","Field","field",")","{","final","Type","elementType","=","getElementType","(","field",".","getType","(",")",")",";","if","(","elementType","==","null",")","{","return","null",";","}","Object","o",";","try","{","o","=","field",".","get","(","target",")",";","}","catch","(","IllegalAccessException","e",")","{","throw","new","RuntimeException","(","\"Error","while","accessing","field","\"","+","field,","e",")",";","}","requireNonNull","(","o,","(",")","->","\"field","\"","+","field","+","\"","is","null","for","\"","+","target",")",";","@SuppressWarnings","(","\"unchecked\"",")","final","Enumerable<T>","enumerable","=","toEnumerable","(","o",")",";","return","new","FieldTable<>","(","field,","elementType,","enumerable",")",";"],"docstring_tokens":["Returns","a","table","based","on","a","particular","field","of","this","schema"],"prompt_tokens":[]}
{"code_tokens":["public","static","String","regexpReplace","(","String","s,","String","regex,\n","String","replacement",")","{","return","regexpReplace","(","s,","regex,","replacement,","1,","0,","null",")",";"],"docstring_tokens":["SQL","REGEXP_REPLACE","function","with","3","arguments"],"prompt_tokens":[]}
{"code_tokens":["public","static","String","regexpReplace","(","String","s,","String","regex,","String","replacement,\n","int","pos",")","{","return","regexpReplace","(","s,","regex,","replacement,","pos,","0,","null",")",";"],"docstring_tokens":["SQL","REGEXP_REPLACE","function","with","4","arguments"],"prompt_tokens":[]}
{"code_tokens":["public","static","String","regexpReplace","(","String","s,","String","regex,","String","replacement,\n","int","pos,","int","occurrence",")","{","return","regexpReplace","(","s,","regex,","replacement,","pos,","occurrence,","null",")",";"],"docstring_tokens":["SQL","REGEXP_REPLACE","function","with","5","arguments"],"prompt_tokens":[]}
{"code_tokens":["public","static","String","regexpReplace","(","String","s,","String","regex,","String","replacement,\n","int","pos,","int","occurrence,","@Nullable","String","matchType",")","{","if","(","pos","<","1","||","pos",">","s",".","length","(",")",")","{","throw","RESOURCE",".","invalidInputForRegexpReplace","(","Integer",".","toString","(","pos",")",")",".","ex","(",")",";","}","\n\n","final","int","flags","=","makeRegexpFlags","(","matchType",")",";","final","Pattern","pattern","=","Pattern",".","compile","(","regex,","flags",")",";","\n\n","return","Unsafe",".","regexpReplace","(","s,","pattern,","replacement,","pos,","occurrence",")",";"],"docstring_tokens":["SQL","REGEXP_REPLACE","function","with","6","arguments"],"prompt_tokens":[]}
{"code_tokens":["public","static","String","concat","(","String","s0,","String","s1",")","{","return","s0","+","s1",";"],"docstring_tokens":["SQL","string","||","string","operator"],"prompt_tokens":[]}
{"code_tokens":["public","static","ByteString","concat","(","ByteString","s0,","ByteString","s1",")","{","return","s0",".","concat","(","s1",")",";"],"docstring_tokens":["SQL","binary","||","binary","operator"],"prompt_tokens":[]}
{"code_tokens":["public","static","String","rtrim","(","String","s",")","{","return","trim","(","false,","true,","\"","\",","s",")",";"],"docstring_tokens":["SQL","RTRIM","function","applied","to","string"],"prompt_tokens":[]}
{"code_tokens":["public","static","ByteString","trim","(","ByteString","s",")","{","return","trim_","(","s,","true,","true",")",";"],"docstring_tokens":["SQL","TRIM","function","applied","to","binary","string"],"prompt_tokens":[]}
{"code_tokens":["public","static","ByteString","overlay","(","ByteString","s,","ByteString","r,","int","start",")","{","return","s",".","substring","(","0,","start","-","1",")",".","concat","(","r",")",".","concat","(","s",".","substring","(","start","-","1","+","r",".","length","(",")",")",")",";"],"docstring_tokens":["SQL","OVERLAY","function","applied","to","binary","strings"],"prompt_tokens":[]}
{"code_tokens":["public","static","boolean","like","(","String","s,","String","pattern,","String","escape",")","{","final","String","regex","=","Like",".","sqlToRegexLike","(","pattern,","escape",")",";","return","Pattern",".","matches","(","regex,","s",")",";"],"docstring_tokens":["SQL","LIKE","function","with","escape"],"prompt_tokens":[]}
{"code_tokens":["public","static","boolean","ilike","(","String","s,","String","pattern,","String","escape",")","{","final","String","regex","=","Like",".","sqlToRegexLike","(","pattern,","escape",")",";","return","Pattern",".","compile","(","regex,","Pattern",".","CASE_INSENSITIVE",")",".","matcher","(","s",")",".","matches","(",")",";"],"docstring_tokens":["SQL","ILIKE","function","with","escape"],"prompt_tokens":[]}
{"code_tokens":["public","static","boolean","similar","(","String","s,","String","pattern,","String","escape",")","{","final","String","regex","=","Like",".","sqlToRegexSimilar","(","pattern,","escape",")",";","return","Pattern",".","matches","(","regex,","s",")",";"],"docstring_tokens":["SQL","SIMILAR","function","with","escape"],"prompt_tokens":[]}
{"code_tokens":["public","static","boolean","eq","(","String","s0,","String","s1,","Comparator<String>","comparator",")","{","return","comparator",".","compare","(","s0,","s1",")","==","0",";"],"docstring_tokens":["SQL","=","operator","applied","to","String","values","with","a","certain","Comparator"],"prompt_tokens":[]}
{"code_tokens":["public","static","int","plus","(","int","b0,","int","b1",")","{","return","b0","+","b1",";"],"docstring_tokens":["SQL","+","operator","applied","to","int","values"],"prompt_tokens":[]}
{"code_tokens":["public","static","@PolyNull","Integer","plus","(","@PolyNull","Integer","b0,","@PolyNull","Integer","b1",")","{","return","(","b0","==","null","||","b1","==","null",")","?","castNonNull","(","null",")",":","(","b0","+","b1",")",";"],"docstring_tokens":["SQL","+","operator","applied","to","nullable","int","values"],"prompt_tokens":[]}
{"code_tokens":["public","static","@PolyNull","Long","plus","(","@PolyNull","Long","b0,","@PolyNull","Integer","b1",")","{","return","(","b0","==","null","||","b1","==","null",")","?","castNonNull","(","null",")",":","(","b0",".","longValue","(",")","+","b1",".","longValue","(",")",")",";"],"docstring_tokens":["SQL","+","operator","applied","to","nullable","long","and","int","values"],"prompt_tokens":[]}
{"code_tokens":["public","static","@PolyNull","Long","plus","(","@PolyNull","Integer","b0,","@PolyNull","Long","b1",")","{","return","(","b0","==","null","||","b1","==","null",")","?","castNonNull","(","null",")",":","(","b0",".","longValue","(",")","+","b1",".","longValue","(",")",")",";"],"docstring_tokens":["SQL","+","operator","applied","to","nullable","int","and","long","values"],"prompt_tokens":[]}
{"code_tokens":["public","static","@PolyNull","BigDecimal","plus","(","@PolyNull","BigDecimal","b0,\n","@PolyNull","BigDecimal","b1",")","{","return","(","b0","==","null","||","b1","==","null",")","?","castNonNull","(","null",")",":","b0",".","add","(","b1",")",";"],"docstring_tokens":["SQL","+","operator","applied","to","BigDecimal","values"],"prompt_tokens":[]}
{"code_tokens":["public","static","int","minus","(","int","b0,","int","b1",")","{","return","b0","-","b1",";"],"docstring_tokens":["SQL","-","operator","applied","to","int","values"],"prompt_tokens":[]}
{"code_tokens":["public","static","@PolyNull","Integer","minus","(","@PolyNull","Integer","b0,","int","b1",")","{","return","b0","==","null","?","castNonNull","(","null",")",":","(","b0","-","b1",")",";"],"docstring_tokens":["SQL","-","operator","applied","to","int","values;","left","side","may","be","null"],"prompt_tokens":[]}
{"code_tokens":["public","static","@PolyNull","Integer","minus","(","int","b0,","@PolyNull","Integer","b1",")","{","return","b1","==","null","?","castNonNull","(","null",")",":","(","b0","-","b1",")",";"],"docstring_tokens":["SQL","-","operator","applied","to","int","values;","right","side","may","be","null"],"prompt_tokens":[]}
{"code_tokens":["public","static","@PolyNull","Integer","minus","(","@PolyNull","Integer","b0,","@PolyNull","Integer","b1",")","{","return","(","b0","==","null","||","b1","==","null",")","?","castNonNull","(","null",")",":","(","b0","-","b1",")",";"],"docstring_tokens":["SQL","-","operator","applied","to","nullable","int","values"],"prompt_tokens":[]}
{"code_tokens":["public","static","@PolyNull","Long","minus","(","@PolyNull","Long","b0,","@PolyNull","Integer","b1",")","{","return","(","b0","==","null","||","b1","==","null",")","?","castNonNull","(","null",")",":","(","b0",".","longValue","(",")","-","b1",".","longValue","(",")",")",";"],"docstring_tokens":["SQL","-","operator","applied","to","nullable","long","and","int","values"],"prompt_tokens":[]}
{"code_tokens":["public","static","@PolyNull","Long","minus","(","@PolyNull","Integer","b0,","@PolyNull","Long","b1",")","{","return","(","b0","==","null","||","b1","==","null",")","?","castNonNull","(","null",")",":","(","b0",".","longValue","(",")","-","b1",".","longValue","(",")",")",";"],"docstring_tokens":["SQL","-","operator","applied","to","nullable","int","and","long","values"],"prompt_tokens":[]}
{"code_tokens":["public","static","@PolyNull","BigDecimal","minus","(","@PolyNull","BigDecimal","b0,\n","@PolyNull","BigDecimal","b1",")","{","return","(","b0","==","null","||","b1","==","null",")","?","castNonNull","(","null",")",":","b0",".","subtract","(","b1",")",";"],"docstring_tokens":["SQL","-","operator","applied","to","nullable","BigDecimal","values"],"prompt_tokens":[]}
{"code_tokens":["public","static","int","multiply","(","int","b0,","int","b1",")","{","return","b0","*","b1",";"],"docstring_tokens":["SQL","operator","applied","to","int","values"],"prompt_tokens":[]}
{"code_tokens":["public","static","@PolyNull","Integer","multiply","(","@PolyNull","Integer","b0,","int","b1",")","{","return","b0","==","null","?","castNonNull","(","null",")",":","(","b0","*","b1",")",";"],"docstring_tokens":["SQL","operator","applied","to","int","values;","left","side","may","be","null"],"prompt_tokens":[]}
{"code_tokens":["public","static","@PolyNull","Integer","multiply","(","int","b0,","@PolyNull","Integer","b1",")","{","return","b1","==","null","?","castNonNull","(","null",")",":","(","b0","*","b1",")",";"],"docstring_tokens":["SQL","operator","applied","to","int","values;","right","side","may","be","null"],"prompt_tokens":[]}
{"code_tokens":["public","static","@PolyNull","Integer","multiply","(","@PolyNull","Integer","b0,\n","@PolyNull","Integer","b1",")","{","return","(","b0","==","null","||","b1","==","null",")","?","castNonNull","(","null",")",":","(","b0","*","b1",")",";"],"docstring_tokens":["SQL","operator","applied","to","nullable","int","values"],"prompt_tokens":[]}
{"code_tokens":["public","static","@PolyNull","Long","multiply","(","@PolyNull","Long","b0,","@PolyNull","Integer","b1",")","{","return","(","b0","==","null","||","b1","==","null",")","?","castNonNull","(","null",")",":","(","b0",".","longValue","(",")","*","b1",".","longValue","(",")",")",";"],"docstring_tokens":["SQL","operator","applied","to","nullable","long","and","int","values"],"prompt_tokens":[]}
{"code_tokens":["public","static","@PolyNull","Long","multiply","(","@PolyNull","Integer","b0,","@PolyNull","Long","b1",")","{","return","(","b0","==","null","||","b1","==","null",")","?","castNonNull","(","null",")",":","(","b0",".","longValue","(",")","*","b1",".","longValue","(",")",")",";"],"docstring_tokens":["SQL","operator","applied","to","nullable","int","and","long","values"],"prompt_tokens":[]}
{"code_tokens":["public","static","@PolyNull","BigDecimal","multiply","(","@PolyNull","BigDecimal","b0,\n","@PolyNull","BigDecimal","b1",")","{","return","(","b0","==","null","||","b1","==","null",")","?","castNonNull","(","null",")",":","b0",".","multiply","(","b1",")",";"],"docstring_tokens":["SQL","operator","applied","to","nullable","BigDecimal","values"],"prompt_tokens":[]}
{"code_tokens":["public","static","ByteString","bitAnd","(","ByteString","b0,","ByteString","b1",")","{","return","binaryOperator","(","b0,","b1,","(","x,","y",")","->","(","byte",")","(","x","&","y",")",")",";"],"docstring_tokens":["Bitwise","function","BIT_AND","applied","to","binary","values"],"prompt_tokens":[]}
{"code_tokens":["public","static","ByteString","bitOr","(","ByteString","b0,","ByteString","b1",")","{","return","binaryOperator","(","b0,","b1,","(","x,","y",")","->","(","byte",")","(","x","|","y",")",")",";"],"docstring_tokens":["Bitwise","function","BIT_OR","applied","to","binary","values"],"prompt_tokens":[]}
{"code_tokens":["public","static","ByteString","bitXor","(","ByteString","b0,","ByteString","b1",")","{","return","binaryOperator","(","b0,","b1,","(","x,","y",")","->","(","byte",")","(","x","^","y",")",")",";"],"docstring_tokens":["Bitwise","function","BIT_XOR","applied","to","binary","values"],"prompt_tokens":[]}
{"code_tokens":["private","static","ByteString","binaryOperator","(","ByteString","b0,","ByteString","b1,","BinaryOperator<Byte>","bitOp",")","{","if","(","b0",".","length","(",")","==","0",")","{","return","b1",";","}","if","(","b1",".","length","(",")","==","0",")","{","return","b0",";","}","\n\n","if","(","b0",".","length","(",")","!=","b1",".","length","(",")",")","{","throw","RESOURCE",".","differentLengthForBitwiseOperands","(","b0",".","length","(",")",",","b1",".","length","(",")",")",".","ex","(",")",";","}","\n\n","final","byte[]","result","=","new","byte[b0",".","length","(",")","]",";","for","(","int","i","=","0",";","i","<","b0",".","length","(",")",";","i++",")","{","result[i]","=","bitOp",".","apply","(","b0",".","byteAt","(","i",")",",","b1",".","byteAt","(","i",")",")",";","}","\n\n","return","new","ByteString","(","result",")",";"],"docstring_tokens":["Utility","for","bitwise","function","applied","to","two","byteString","values"],"prompt_tokens":[]}
{"code_tokens":["public","static","double","exp","(","double","b0",")","{","return","Math",".","exp","(","b0",")",";"],"docstring_tokens":["SQL","EXP","operator","applied","to","double","values"],"prompt_tokens":[]}
{"code_tokens":["public","static","double","power","(","double","b0,","double","b1",")","{","return","Math",".","pow","(","b0,","b1",")",";"],"docstring_tokens":["SQL","POWER","operator","applied","to","double","values"],"prompt_tokens":[]}
{"code_tokens":["public","static","byte","mod","(","byte","b0,","byte","b1",")","{","return","(","byte",")","(","b0","%","b1",")",";"],"docstring_tokens":["SQL","MOD","operator","applied","to","byte","values"],"prompt_tokens":[]}
{"code_tokens":["public","static","short","mod","(","short","b0,","short","b1",")","{","return","(","short",")","(","b0","%","b1",")",";"],"docstring_tokens":["SQL","MOD","operator","applied","to","short","values"],"prompt_tokens":[]}
{"code_tokens":["public","static","int","mod","(","int","b0,","int","b1",")","{","return","b0","%","b1",";"],"docstring_tokens":["SQL","MOD","operator","applied","to","int","values"],"prompt_tokens":[]}
{"code_tokens":["public","static","long","mod","(","long","b0,","long","b1",")","{","return","b0","%","b1",";"],"docstring_tokens":["SQL","MOD","operator","applied","to","long","values"],"prompt_tokens":[]}
{"code_tokens":["public","static","byte","floor","(","byte","b0,","byte","b1",")","{","return","(","byte",")","floor","(","(","int",")","b0,","(","int",")","b1",")",";"],"docstring_tokens":["SQL","FLOOR","operator","applied","to","byte","values"],"prompt_tokens":[]}
{"code_tokens":["public","static","short","floor","(","short","b0,","short","b1",")","{","return","(","short",")","floor","(","(","int",")","b0,","(","int",")","b1",")",";"],"docstring_tokens":["SQL","FLOOR","operator","applied","to","short","values"],"prompt_tokens":[]}
{"code_tokens":["public","static","int","floor","(","int","b0,","int","b1",")","{","int","r","=","b0","%","b1",";","if","(","r","<","0",")","{","r","+=","b1",";","}","return","b0","-","r",";"],"docstring_tokens":["SQL","FLOOR","operator","applied","to","int","values"],"prompt_tokens":[]}
{"code_tokens":["public","static","long","floor","(","long","b0,","long","b1",")","{","long","r","=","b0","%","b1",";","if","(","r","<","0",")","{","r","+=","b1",";","}","return","b0","-","r",";"],"docstring_tokens":["SQL","FLOOR","operator","applied","to","long","values"],"prompt_tokens":[]}
{"code_tokens":["public","static","byte","ceil","(","byte","b0,","byte","b1",")","{","return","floor","(","(","byte",")","(","b0","+","b1","-","1",")",",","b1",")",";"],"docstring_tokens":["SQL","CEIL","operator","applied","to","byte","values"],"prompt_tokens":[]}
{"code_tokens":["public","static","short","ceil","(","short","b0,","short","b1",")","{","return","floor","(","(","short",")","(","b0","+","b1","-","1",")",",","b1",")",";"],"docstring_tokens":["SQL","CEIL","operator","applied","to","short","values"],"prompt_tokens":[]}
{"code_tokens":["public","static","int","ceil","(","int","b0,","int","b1",")","{","int","r","=","b0","%","b1",";","if","(","r",">","0",")","{","r","-=","b1",";","}","return","b0","-","r",";"],"docstring_tokens":["SQL","CEIL","operator","applied","to","int","values"],"prompt_tokens":[]}
{"code_tokens":["public","static","long","ceil","(","long","b0,","long","b1",")","{","return","floor","(","b0","+","b1","-","1,","b1",")",";"],"docstring_tokens":["SQL","CEIL","operator","applied","to","long","values"],"prompt_tokens":[]}
{"code_tokens":["public","static","byte","abs","(","byte","b0",")","{","return","(","byte",")","Math",".","abs","(","b0",")",";"],"docstring_tokens":["SQL","ABS","operator","applied","to","byte","values"],"prompt_tokens":[]}
{"code_tokens":["public","static","short","abs","(","short","b0",")","{","return","(","short",")","Math",".","abs","(","b0",")",";"],"docstring_tokens":["SQL","ABS","operator","applied","to","short","values"],"prompt_tokens":[]}
{"code_tokens":["public","static","int","abs","(","int","b0",")","{","return","Math",".","abs","(","b0",")",";"],"docstring_tokens":["SQL","ABS","operator","applied","to","int","values"],"prompt_tokens":[]}
{"code_tokens":["public","static","long","abs","(","long","b0",")","{","return","Math",".","abs","(","b0",")",";"],"docstring_tokens":["SQL","ABS","operator","applied","to","long","values"],"prompt_tokens":[]}
{"code_tokens":["public","static","float","abs","(","float","b0",")","{","return","Math",".","abs","(","b0",")",";"],"docstring_tokens":["SQL","ABS","operator","applied","to","float","values"],"prompt_tokens":[]}
{"code_tokens":["public","static","double","abs","(","double","b0",")","{","return","Math",".","abs","(","b0",")",";"],"docstring_tokens":["SQL","ABS","operator","applied","to","double","values"],"prompt_tokens":[]}
{"code_tokens":["public","static","BigDecimal","abs","(","BigDecimal","b0",")","{","return","b0",".","abs","(",")",";"],"docstring_tokens":["SQL","ABS","operator","applied","to","BigDecimal","values"],"prompt_tokens":[]}
{"code_tokens":["public","static","double","acos","(","BigDecimal","b0",")","{","return","Math",".","acos","(","b0",".","doubleValue","(",")",")",";"],"docstring_tokens":["SQL","ACOS","operator","applied","to","BigDecimal","values"],"prompt_tokens":[]}
{"code_tokens":["public","static","double","acos","(","double","b0",")","{","return","Math",".","acos","(","b0",")",";"],"docstring_tokens":["SQL","ACOS","operator","applied","to","double","values"],"prompt_tokens":[]}
{"code_tokens":["public","static","double","asin","(","BigDecimal","b0",")","{","return","Math",".","asin","(","b0",".","doubleValue","(",")",")",";"],"docstring_tokens":["SQL","ASIN","operator","applied","to","BigDecimal","values"],"prompt_tokens":[]}
{"code_tokens":["public","static","double","asin","(","double","b0",")","{","return","Math",".","asin","(","b0",")",";"],"docstring_tokens":["SQL","ASIN","operator","applied","to","double","values"],"prompt_tokens":[]}
{"code_tokens":["public","static","double","atan","(","BigDecimal","b0",")","{","return","Math",".","atan","(","b0",".","doubleValue","(",")",")",";"],"docstring_tokens":["SQL","ATAN","operator","applied","to","BigDecimal","values"],"prompt_tokens":[]}
{"code_tokens":["public","static","double","atan","(","double","b0",")","{","return","Math",".","atan","(","b0",")",";"],"docstring_tokens":["SQL","ATAN","operator","applied","to","double","values"],"prompt_tokens":[]}
{"code_tokens":["public","static","double","atan2","(","BigDecimal","b0,","BigDecimal","b1",")","{","return","Math",".","atan2","(","b0",".","doubleValue","(",")",",","b1",".","doubleValue","(",")",")",";"],"docstring_tokens":["SQL","ATAN2","operator","applied","to","BigDecimal","values"],"prompt_tokens":[]}
{"code_tokens":["public","static","double","atan2","(","double","b0,","double","b1",")","{","return","Math",".","atan2","(","b0,","b1",")",";"],"docstring_tokens":["SQL","ATAN2","operator","applied","to","double","values"],"prompt_tokens":[]}
{"code_tokens":["public","static","double","cbrt","(","BigDecimal","b",")","{","return","cbrt","(","b",".","doubleValue","(",")",")",";"],"docstring_tokens":["SQL","CBRT","operator","applied","to","BigDecimal","values"],"prompt_tokens":[]}
{"code_tokens":["public","static","double","cbrt","(","double","b",")","{","return","Math",".","cbrt","(","b",")",";"],"docstring_tokens":["SQL","CBRT","operator","applied","to","double","values"],"prompt_tokens":[]}
{"code_tokens":["public","static","double","cos","(","BigDecimal","b0",")","{","return","Math",".","cos","(","b0",".","doubleValue","(",")",")",";"],"docstring_tokens":["SQL","COS","operator","applied","to","BigDecimal","values"],"prompt_tokens":[]}
{"code_tokens":["public","static","double","cos","(","double","b0",")","{","return","Math",".","cos","(","b0",")",";"],"docstring_tokens":["SQL","COS","operator","applied","to","double","values"],"prompt_tokens":[]}
{"code_tokens":["public","static","double","cosh","(","BigDecimal","b",")","{","return","cosh","(","b",".","doubleValue","(",")",")",";"],"docstring_tokens":["SQL","COSH","operator","applied","to","BigDecimal","values"],"prompt_tokens":[]}
{"code_tokens":["public","static","double","cosh","(","double","b",")","{","return","Math",".","cosh","(","b",")",";"],"docstring_tokens":["SQL","COSH","operator","applied","to","double","values"],"prompt_tokens":[]}
{"code_tokens":["public","static","double","cot","(","BigDecimal","b0",")","{","return","1",".","0d","/","Math",".","tan","(","b0",".","doubleValue","(",")",")",";"],"docstring_tokens":["SQL","COT","operator","applied","to","BigDecimal","values"],"prompt_tokens":[]}
{"code_tokens":["public","static","double","cot","(","double","b0",")","{","return","1",".","0d","/","Math",".","tan","(","b0",")",";"],"docstring_tokens":["SQL","COT","operator","applied","to","double","values"],"prompt_tokens":[]}
{"code_tokens":["public","static","double","degrees","(","BigDecimal","b0",")","{","return","Math",".","toDegrees","(","b0",".","doubleValue","(",")",")",";"],"docstring_tokens":["SQL","DEGREES","operator","applied","to","BigDecimal","values"],"prompt_tokens":[]}
{"code_tokens":["public","static","double","degrees","(","double","b0",")","{","return","Math",".","toDegrees","(","b0",")",";"],"docstring_tokens":["SQL","DEGREES","operator","applied","to","double","values"],"prompt_tokens":[]}
{"code_tokens":["public","static","double","radians","(","BigDecimal","b0",")","{","return","Math",".","toRadians","(","b0",".","doubleValue","(",")",")",";"],"docstring_tokens":["SQL","RADIANS","operator","applied","to","BigDecimal","values"],"prompt_tokens":[]}
{"code_tokens":["public","static","double","radians","(","double","b0",")","{","return","Math",".","toRadians","(","b0",")",";"],"docstring_tokens":["SQL","RADIANS","operator","applied","to","double","values"],"prompt_tokens":[]}
{"code_tokens":["public","static","int","sround","(","int","b0",")","{","return","sround","(","b0,","0",")",";"],"docstring_tokens":["SQL","ROUND","operator","applied","to","int","values"],"prompt_tokens":[]}
{"code_tokens":["public","static","long","sround","(","long","b0",")","{","return","sround","(","b0,","0",")",";"],"docstring_tokens":["SQL","ROUND","operator","applied","to","long","values"],"prompt_tokens":[]}
{"code_tokens":["public","static","BigDecimal","sround","(","BigDecimal","b0",")","{","return","sround","(","b0,","0",")",";"],"docstring_tokens":["SQL","ROUND","operator","applied","to","BigDecimal","values"],"prompt_tokens":[]}
{"code_tokens":["public","static","double","sround","(","double","b0",")","{","return","sround","(","b0,","0",")",";"],"docstring_tokens":["SQL","ROUND","operator","applied","to","double","values"],"prompt_tokens":[]}
{"code_tokens":["public","static","int","struncate","(","int","b0",")","{","return","struncate","(","b0,","0",")",";"],"docstring_tokens":["SQL","TRUNCATE","operator","applied","to","int","values"],"prompt_tokens":[]}
{"code_tokens":["public","static","long","struncate","(","long","b0",")","{","return","struncate","(","b0,","0",")",";"],"docstring_tokens":["SQL","TRUNCATE","operator","applied","to","long","values"],"prompt_tokens":[]}
{"code_tokens":["public","static","BigDecimal","struncate","(","BigDecimal","b0",")","{","return","struncate","(","b0,","0",")",";"],"docstring_tokens":["SQL","TRUNCATE","operator","applied","to","BigDecimal","values"],"prompt_tokens":[]}
{"code_tokens":["public","static","double","struncate","(","double","b0",")","{","return","struncate","(","b0,","0",")",";"],"docstring_tokens":["SQL","TRUNCATE","operator","applied","to","double","values"],"prompt_tokens":[]}
{"code_tokens":["public","static","int","sign","(","int","b0",")","{","return","Integer",".","signum","(","b0",")",";"],"docstring_tokens":["SQL","SIGN","operator","applied","to","int","values"],"prompt_tokens":[]}
{"code_tokens":["public","static","long","sign","(","long","b0",")","{","return","Long",".","signum","(","b0",")",";"],"docstring_tokens":["SQL","SIGN","operator","applied","to","long","values"],"prompt_tokens":[]}
{"code_tokens":["public","static","BigDecimal","sign","(","BigDecimal","b0",")","{","return","BigDecimal",".","valueOf","(","b0",".","signum","(",")",")",";"],"docstring_tokens":["SQL","SIGN","operator","applied","to","BigDecimal","values"],"prompt_tokens":[]}
{"code_tokens":["public","static","double","sign","(","double","b0",")","{","return","Math",".","signum","(","b0",")",";"],"docstring_tokens":["SQL","SIGN","operator","applied","to","double","values"],"prompt_tokens":[]}
{"code_tokens":["public","static","double","sin","(","BigDecimal","b0",")","{","return","Math",".","sin","(","b0",".","doubleValue","(",")",")",";"],"docstring_tokens":["SQL","SIN","operator","applied","to","BigDecimal","values"],"prompt_tokens":[]}
{"code_tokens":["public","static","double","sin","(","double","b0",")","{","return","Math",".","sin","(","b0",")",";"],"docstring_tokens":["SQL","SIN","operator","applied","to","double","values"],"prompt_tokens":[]}
{"code_tokens":["public","static","double","sinh","(","BigDecimal","b",")","{","return","sinh","(","b",".","doubleValue","(",")",")",";"],"docstring_tokens":["SQL","SINH","operator","applied","to","BigDecimal","values"],"prompt_tokens":[]}
{"code_tokens":["public","static","double","sinh","(","double","b",")","{","return","Math",".","sinh","(","b",")",";"],"docstring_tokens":["SQL","SINH","operator","applied","to","double","values"],"prompt_tokens":[]}
{"code_tokens":["public","static","double","tan","(","BigDecimal","b0",")","{","return","Math",".","tan","(","b0",".","doubleValue","(",")",")",";"],"docstring_tokens":["SQL","TAN","operator","applied","to","BigDecimal","values"],"prompt_tokens":[]}
{"code_tokens":["public","static","double","tan","(","double","b0",")","{","return","Math",".","tan","(","b0",")",";"],"docstring_tokens":["SQL","TAN","operator","applied","to","double","values"],"prompt_tokens":[]}
{"code_tokens":["public","static","double","tanh","(","BigDecimal","b",")","{","return","tanh","(","b",".","doubleValue","(",")",")",";"],"docstring_tokens":["SQL","TANH","operator","applied","to","BigDecimal","values"],"prompt_tokens":[]}
{"code_tokens":["public","static","double","tanh","(","double","b",")","{","return","Math",".","tanh","(","b",")",";"],"docstring_tokens":["SQL","TANH","operator","applied","to","double","values"],"prompt_tokens":[]}
{"code_tokens":["public","static","String","dayNameWithTimestamp","(","long","timestamp,","Locale","locale",")","{","return","timeStampToLocalDate","(","timestamp",")",".","format","(","ROOT_DAY_FORMAT",".","withLocale","(","locale",")",")",";"],"docstring_tokens":["SQL","DAYNAME","function,","applied","to","a","TIMESTAMP","argument"],"prompt_tokens":[]}
{"code_tokens":["public","static","String","dayNameWithDate","(","int","date,","Locale","locale",")","{","return","dateToLocalDate","(","date",")",".","format","(","ROOT_DAY_FORMAT",".","withLocale","(","locale",")",")",";"],"docstring_tokens":["SQL","DAYNAME","function,","applied","to","a","DATE","argument"],"prompt_tokens":[]}
{"code_tokens":["public","static","String","monthNameWithTimestamp","(","long","timestamp,","Locale","locale",")","{","return","timeStampToLocalDate","(","timestamp",")",".","format","(","ROOT_MONTH_FORMAT",".","withLocale","(","locale",")",")",";"],"docstring_tokens":["SQL","MONTHNAME","function,","applied","to","a","TIMESTAMP","argument"],"prompt_tokens":[]}
{"code_tokens":["public","static","String","monthNameWithDate","(","int","date,","Locale","locale",")","{","return","dateToLocalDate","(","date",")",".","format","(","ROOT_MONTH_FORMAT",".","withLocale","(","locale",")",")",";"],"docstring_tokens":["SQL","MONTHNAME","function,","applied","to","a","DATE","argument"],"prompt_tokens":[]}
{"code_tokens":["public","static","int","addMonths","(","int","date,","int","m",")","{","int","y0","=","(","int",")","DateTimeUtils",".","unixDateExtract","(","TimeUnitRange",".","YEAR,","date",")",";","int","m0","=","(","int",")","DateTimeUtils",".","unixDateExtract","(","TimeUnitRange",".","MONTH,","date",")",";","int","d0","=","(","int",")","DateTimeUtils",".","unixDateExtract","(","TimeUnitRange",".","DAY,","date",")",";","m0","+=","m",";","int","deltaYear","=","(","int",")","DateTimeUtils",".","floorDiv","(","m0,","12",")",";","y0","+=","deltaYear",";","m0","=","(","int",")","DateTimeUtils",".","floorMod","(","m0,","12",")",";","if","(","m0","==","0",")","{","y0","-=","1",";","m0","+=","12",";","}","\n\n","int","last","=","lastDay","(","y0,","m0",")",";","if","(","d0",">","last",")","{","d0","=","last",";","}","return","DateTimeUtils",".","ymdToUnixDate","(","y0,","m0,","d0",")",";"],"docstring_tokens":["Adds","a","given","number","of","months","to","a","date,","represented","as","the","number","of","days","since","the","epoch"],"prompt_tokens":[]}
{"code_tokens":["public","static","boolean","isEmpty","(","@Nullable","RelOptPredicateList","value",")","{","if","(","value","==","null","||","value","==","EMPTY",")","{","return","true",";","}","return","value",".","constantMap",".","isEmpty","(",")","&&","value",".","leftInferredPredicates",".","isEmpty","(",")","&&","value",".","rightInferredPredicates",".","isEmpty","(",")","&&","value",".","pulledUpPredicates",".","isEmpty","(",")",";"],"docstring_tokens":["Returns","true","if","given","predicate","list","is","empty"],"prompt_tokens":[]}
{"code_tokens":["public","static","RelOptPredicateList","of","(","RexBuilder","rexBuilder,\n","Iterable<RexNode>","pulledUpPredicates,\n","Iterable<RexNode>","leftInferredPredicates,\n","Iterable<RexNode>","rightInferredPredicates",")","{","final","ImmutableList<RexNode>","pulledUpPredicatesList","=\n","ImmutableList",".","copyOf","(","pulledUpPredicates",")",";","final","ImmutableList<RexNode>","leftInferredPredicateList","=\n","ImmutableList",".","copyOf","(","leftInferredPredicates",")",";","final","ImmutableList<RexNode>","rightInferredPredicatesList","=\n","ImmutableList",".","copyOf","(","rightInferredPredicates",")",";","if","(","pulledUpPredicatesList",".","isEmpty","(",")","&&","leftInferredPredicateList",".","isEmpty","(",")","&&","rightInferredPredicatesList",".","isEmpty","(",")",")","{","return","EMPTY",";","}","final","ImmutableMap<RexNode,","RexNode>","constantMap","=\n","RexUtil",".","predicateConstants","(","RexNode",".","class,","rexBuilder,\n","pulledUpPredicatesList",")",";","return","new","RelOptPredicateList","(","pulledUpPredicatesList,\n","leftInferredPredicateList,","rightInferredPredicatesList,","constantMap",")",";"],"docstring_tokens":["Creates","a","RelOptPredicateList","for","a","join"],"prompt_tokens":[]}
{"code_tokens":["private","static","<E>","ImmutableList<E>","concat","(","ImmutableList<E>","list1,\n","ImmutableList<E>","list2",")","{","if","(","list1",".","isEmpty","(",")",")","{","return","list2",";","}","else","if","(","list2",".","isEmpty","(",")",")","{","return","list1",";","}","else","{","return","ImmutableList",".","<E>builder","(",")",".","addAll","(","list1",")",".","addAll","(","list2",")",".","build","(",")",";","}"],"docstring_tokens":["Concatenates","two","immutable","lists,","avoiding","a","copy","it","possible"],"prompt_tokens":[]}
{"code_tokens":["public","boolean","isEffectivelyNotNull","(","RexNode","e",")","{","if","(","!e",".","getType","(",")",".","isNullable","(",")",")","{","return","true",";","}","for","(","RexNode","p",":","pulledUpPredicates",")","{","if","(","p",".","getKind","(",")","==","SqlKind",".","IS_NOT_NULL\n","&&","(","(","RexCall",")","p",")",".","getOperands","(",")",".","get","(","0",")",".","equals","(","e",")",")","{","return","true",";","}","}","if","(","SqlKind",".","COMPARISON",".","contains","(","e",".","getKind","(",")",")",")","{","//","A","comparison","with","a","(","non-null",")","literal,","such","as","'ref","<","10',","is","not","null","if","'ref'\n","//","is","not","null",".","RexCall","call","=","(","RexCall",")","e",";","if","(","call",".","getOperands","(",")",".","get","(","1",")","instanceof","RexLiteral\n","&&","!","(","(","RexLiteral",")","call",".","getOperands","(",")",".","get","(","1",")",")",".","isNull","(",")",")","{","return","isEffectivelyNotNull","(","call",".","getOperands","(",")",".","get","(","0",")",")",";","}","}","return","false",";"],"docstring_tokens":["Returns","whether","an","expression","is","effectively","NOT","NULL","due","to","an","e","IS","NOT","NULL","condition","in","this","predicate","list"],"prompt_tokens":[]}
{"code_tokens":["protected","TrimResult","trimChild","(","RelNode","rel,\n","RelNode","input,\n","final","ImmutableBitSet","fieldsUsed,\n","Set<RelDataTypeField>","extraFields",")","{","final","ImmutableBitSet",".","Builder","fieldsUsedBuilder","=","fieldsUsed",".","rebuild","(",")",";","\n\n","//","Fields","that","define","the","collation","cannot","be","discarded",".","final","RelMetadataQuery","mq","=","rel",".","getCluster","(",")",".","getMetadataQuery","(",")",";","final","ImmutableList<RelCollation>","collations","=","mq",".","collations","(","input",")",";","if","(","collations","!=","null",")","{","for","(","RelCollation","collation",":","collations",")","{","for","(","RelFieldCollation","fieldCollation",":","collation",".","getFieldCollations","(",")",")","{","fieldsUsedBuilder",".","set","(","fieldCollation",".","getFieldIndex","(",")",")",";","}","}","}","\n\n","//","Correlating","variables","are","a","means","for","other","relational","expressions","to","use\n","//","fields",".","for","(","final","CorrelationId","correlation",":","rel",".","getVariablesSet","(",")",")","{","rel",".","accept","(","new","CorrelationReferenceFinder","(",")","{","@Override","protected","RexNode","handle","(","RexFieldAccess","fieldAccess",")","{","final","RexCorrelVariable","v","=\n","(","RexCorrelVariable",")","fieldAccess",".","getReferenceExpr","(",")",";","if","(","v",".","id",".","equals","(","correlation",")",")","{","fieldsUsedBuilder",".","set","(","fieldAccess",".","getField","(",")",".","getIndex","(",")",")",";","}","return","fieldAccess",";","}","}",")",";","}","\n\n","return","dispatchTrimFields","(","input,","fieldsUsedBuilder",".","build","(",")",",","extraFields",")",";"],"docstring_tokens":["Trims","the","fields","of","an","input","relational","expression"],"prompt_tokens":[]}
{"code_tokens":["protected","TrimResult","dummyProject","(","int","fieldCount,","RelNode","input,\n","@Nullable","RelNode","originalRelNode",")","{","final","RelOptCluster","cluster","=","input",".","getCluster","(",")",";","final","Mapping","mapping","=\n","Mappings",".","create","(","MappingType",".","INVERSE_SURJECTION,","fieldCount,","1",")",";","if","(","input",".","getRowType","(",")",".","getFieldCount","(",")","==","1",")","{","//","Input","already","has","one","field","(","and","may","in","fact","be","a","dummy","project","we\n","//","created","for","the","child",")",".","We","can't","do","better",".","return","result","(","input,","mapping",")",";","}","final","RexLiteral","expr","=\n","cluster",".","getRexBuilder","(",")",".","makeExactLiteral","(","BigDecimal",".","ZERO",")",";","relBuilder",".","push","(","input",")",";","relBuilder",".","project","(","ImmutableList",".","of","(","expr",")",",","ImmutableList",".","of","(","\"DUMMY\"",")",")",";","RelNode","newProject","=","relBuilder",".","build","(",")",";","if","(","originalRelNode","!=","null",")","{","newProject","=","RelOptUtil",".","propagateRelHints","(","originalRelNode,","newProject",")",";","}","return","result","(","newProject,","mapping",")",";"],"docstring_tokens":["Creates","a","project","with","a","dummy","column,","to","protect","the","parts","of","the","system","that","cannot","handle","a","relational","expression","with","no","columns"],"prompt_tokens":[]}
{"code_tokens":["public","static","<E>","Holder<E>","of","(","E","e",")","{","return","new","Holder<>","(","e",")",";"],"docstring_tokens":["Creates","a","holder","containing","a","given","value"],"prompt_tokens":[]}
{"code_tokens":["@SuppressWarnings","(","\"ConstantConditions\"",")","public","static","<E>","Holder<@Nullable","E>","empty","(",")","{","return","new","Holder<@Nullable","E>","(","null",")",";"],"docstring_tokens":["Creates","a","holder","containing","null"],"prompt_tokens":[]}
{"code_tokens":["@Override","public","boolean","clear","(",")","{","boolean","empty","=","true",";","if","(","!matchList",".","queue",".","isEmpty","(",")","||","!matchList",".","preQueue",".","isEmpty","(",")",")","{","empty","=","false",";","}","matchList",".","clear","(",")",";","return","!empty",";"],"docstring_tokens":["Clear","internal","data","structure","for","this","rule","queue"],"prompt_tokens":[]}
{"code_tokens":["@Override","public","void","addMatch","(","VolcanoRuleMatch","match",")","{","final","String","matchName","=","match",".","toString","(",")",";","\n\n","if","(","!matchList",".","names",".","add","(","matchName",")",")","{","//","Identical","match","has","already","been","added",".","return",";","}","\n\n","LOGGER",".","trace","(","\"Rule-match","queued:","{","}","\",","matchName",")",";","\n\n","matchList",".","offer","(","match",")",";","\n\n","matchList",".","matchMap",".","put","(","planner",".","getSubset","(","match",".","rels[0]",")",",","match",")",";"],"docstring_tokens":["Add","a","rule","match"],"prompt_tokens":[]}
{"code_tokens":["private","String","getPigGroupBy","(","Implementor","implementor",")","{","final","String","relAlias","=","implementor",".","getPigRelationAlias","(","this",")",";","final","List<RelDataTypeField>","allFields","=","getInput","(",")",".","getRowType","(",")",".","getFieldList","(",")",";","final","List<Integer>","groupedFieldIndexes","=","groupSet",".","asList","(",")",";","if","(","groupedFieldIndexes",".","size","(",")","<","1",")","{","return","relAlias","+","\"","=","GROUP","\"","+","relAlias","+","\"","ALL",";","\"",";","}","else","{","final","List<String>","groupedFieldNames","=","new","ArrayList<>","(","groupedFieldIndexes",".","size","(",")",")",";","for","(","int","fieldIndex",":","groupedFieldIndexes",")","{","groupedFieldNames",".","add","(","allFields",".","get","(","fieldIndex",")",".","getName","(",")",")",";","}","return","relAlias","+","\"","=","GROUP","\"","+","relAlias","+","\"","BY","(","\"\n","+","String",".","join","(","\",","\",","groupedFieldNames",")","+","\"",")",";","\"",";","}"],"docstring_tokens":["Generates","the","GROUP","BY","statement,","e.g"],"prompt_tokens":[]}
{"code_tokens":["@SuppressWarnings","(","\"initialization",".","invalid",".","field",".","write",".","initialized\"",")","public","void","setRule","(","@UnknownInitialization","RelOptRule","rule",")","{","this",".","rule","=","rule",";"],"docstring_tokens":["Sets","the","rule","this","operand","belongs","to"],"prompt_tokens":[]}
{"code_tokens":["public","boolean","matches","(","RelNode","rel",")","{","if","(","!clazz",".","isInstance","(","rel",")",")","{","return","false",";","}","if","(","(","trait","!=","null",")","&&","!rel",".","getTraitSet","(",")",".","contains","(","trait",")",")","{","return","false",";","}","return","predicate",".","test","(","rel",")",";"],"docstring_tokens":["Returns","whether","a","relational","expression","matches","this","operand"],"prompt_tokens":[]}
{"code_tokens":["public","void","clear","(",")","{","parents",".","clear","(",")",";"],"docstring_tokens":["Removes","all","elements","in","this","equivalence","set"],"prompt_tokens":[]}
{"code_tokens":["public","int","size","(",")","{","return","parents",".","size","(",")",";"],"docstring_tokens":["Returns","the","number","of","elements","in","this","equivalence","set"],"prompt_tokens":[]}
{"code_tokens":["public","int","classCount","(",")","{","return","new","HashSet<>","(","parents",".","values","(",")",")",".","size","(",")",";"],"docstring_tokens":["Returns","the","number","of","equivalence","classes","in","this","equivalence","set"],"prompt_tokens":[]}
{"code_tokens":["protected","boolean","coerceOperandType","(","@Nullable","SqlValidatorScope","scope,\n","SqlCall","call,\n","int","index,\n","RelDataType","targetType",")","{","//","Transform","the","JavaType","to","SQL","type","because","the","SqlDataTypeSpec\n","//","does","not","support","deriving","JavaType","yet",".","if","(","RelDataTypeFactoryImpl",".","isJavaType","(","targetType",")",")","{","targetType","=","(","(","JavaTypeFactory",")","factory",")",".","toSql","(","targetType",")",";","}","\n\n","SqlNode","operand","=","call",".","getOperandList","(",")",".","get","(","index",")",";","if","(","operand","instanceof","SqlDynamicParam",")","{","//","Do","not","support","implicit","type","coercion","for","dynamic","param",".","return","false",";","}","requireNonNull","(","scope,","\"scope\"",")",";","//","Check","it","early",".","if","(","!needToCast","(","scope,","operand,","targetType",")",")","{","return","false",";","}","//","Fix","up","nullable","attr",".","RelDataType","targetType1","=","syncAttributes","(","validator",".","deriveType","(","scope,","operand",")",",","targetType",")",";","SqlNode","desired","=","castTo","(","operand,","targetType1",")",";","call",".","setOperand","(","index,","desired",")",";","updateInferredType","(","desired,","targetType1",")",";","return","true",";"],"docstring_tokens":["Cast","operand","at","index","index","to","target","type"],"prompt_tokens":[]}
{"code_tokens":["protected","boolean","coerceColumnType","(","@Nullable","SqlValidatorScope","scope,\n","SqlNodeList","nodeList,\n","int","index,\n","RelDataType","targetType",")","{","//","Transform","the","JavaType","to","SQL","type","because","the","SqlDataTypeSpec\n","//","does","not","support","deriving","JavaType","yet",".","if","(","RelDataTypeFactoryImpl",".","isJavaType","(","targetType",")",")","{","targetType","=","(","(","JavaTypeFactory",")","factory",")",".","toSql","(","targetType",")",";","}","\n\n","//","This","will","happen","when","there","is","a","star/dynamic-star","column","in","the","select","list,\n","//","and","the","source","is","values","expression,","i",".","e",".","`select","*","from","(","values","(","1,","2,","3",")",")","`",".","//","There","is","no","need","to","coerce","the","column","type,","only","remark\n","//","the","inferred","row","type","has","changed,","we","will","then","add","in","type","coercion\n","//","when","expanding","star/dynamic-star",".","\n\n","//","See","SqlToRelConverter#convertSelectList","for","details",".","if","(","index",">=","nodeList",".","size","(",")",")","{","//","Can","only","happen","when","there","is","a","star","(","*",")","in","the","column,\n","//","just","return","true",".","return","true",";","}","\n\n","final","SqlNode","node","=","nodeList",".","get","(","index",")",";","if","(","node","instanceof","SqlDynamicParam",")","{","//","Do","not","support","implicit","type","coercion","for","dynamic","param",".","return","false",";","}","if","(","node","instanceof","SqlIdentifier",")","{","//","Do","not","expand","a","star/dynamic","table","col",".","SqlIdentifier","node1","=","(","SqlIdentifier",")","node",";","if","(","node1",".","isStar","(",")",")","{","return","true",";","}","else","if","(","DynamicRecordType",".","isDynamicStarColName","(","Util",".","last","(","node1",".","names",")",")",")","{","//","Should","support","implicit","cast","for","dynamic","table",".","return","false",";","}","}","\n\n","requireNonNull","(","scope,","\"scope","is","needed","for","needToCast","(","scope,","operand,","targetType",")","\"",")",";","if","(","node","instanceof","SqlCall",")","{","SqlCall","node2","=","(","SqlCall",")","node",";","if","(","node2",".","getOperator","(",")",".","kind","==","SqlKind",".","AS",")","{","final","SqlNode","operand","=","node2",".","operand","(","0",")",";","if","(","!needToCast","(","scope,","operand,","targetType",")",")","{","return","false",";","}","RelDataType","targetType2","=","syncAttributes","(","validator",".","deriveType","(","scope,","operand",")",",","targetType",")",";","final","SqlNode","casted","=","castTo","(","operand,","targetType2",")",";","node2",".","setOperand","(","0,","casted",")",";","updateInferredType","(","casted,","targetType2",")",";","return","true",";","}","}","if","(","!needToCast","(","scope,","node,","targetType",")",")","{","return","false",";","}","RelDataType","targetType3","=","syncAttributes","(","validator",".","deriveType","(","scope,","node",")",",","targetType",")",";","final","SqlNode","node3","=","castTo","(","node,","targetType3",")",";","nodeList",".","set","(","index,","node3",")",";","updateInferredType","(","node3,","targetType3",")",";","return","true",";"],"docstring_tokens":["Cast","column","at","index","index","to","target","type"],"prompt_tokens":[]}
{"code_tokens":["RelDataType","syncAttributes","(","RelDataType","fromType,\n","RelDataType","toType",")","{","RelDataType","syncedType","=","toType",";","if","(","fromType","!=","null",")","{","syncedType","=","factory",".","createTypeWithNullability","(","syncedType,","fromType",".","isNullable","(",")",")",";","if","(","SqlTypeUtil",".","inCharOrBinaryFamilies","(","fromType",")","&&","SqlTypeUtil",".","inCharOrBinaryFamilies","(","toType",")",")","{","Charset","charset","=","fromType",".","getCharset","(",")",";","if","(","charset","!=","null","&&","SqlTypeUtil",".","inCharFamily","(","syncedType",")",")","{","SqlCollation","collation","=","getCollation","(","fromType",")",";","syncedType","=","factory",".","createTypeWithCharsetAndCollation","(","syncedType,\n","charset,\n","collation",")",";","}","}","}","return","syncedType",";"],"docstring_tokens":["Sync","the","data","type","additional","attributes","before","casting,","i.e"],"prompt_tokens":[]}
{"code_tokens":["protected","boolean","needToCast","(","SqlValidatorScope","scope,","SqlNode","node,","RelDataType","toType",")","{","RelDataType","fromType","=","validator",".","deriveType","(","scope,","node",")",";","//","This","depends","on","the","fact","that","type","validate","happens","before","coercion",".","//","We","do","not","have","inferred","type","for","some","node,","i",".","e",".","LOCALTIME",".","if","(","fromType","==","null",")","{","return","false",";","}","\n\n","//","This","prevents","that","we","cast","a","JavaType","to","normal","RelDataType",".","if","(","fromType","instanceof","RelDataTypeFactoryImpl",".","JavaType\n","&&","toType",".","getSqlTypeName","(",")","==","fromType",".","getSqlTypeName","(",")",")","{","return","false",";","}","\n\n","//","Do","not","make","a","cast","when","we","don't","know","specific","type","(","ANY",")","of","the","origin","node",".","if","(","toType",".","getSqlTypeName","(",")","==","SqlTypeName",".","ANY\n","||","fromType",".","getSqlTypeName","(",")","==","SqlTypeName",".","ANY",")","{","return","false",";","}","\n\n","//","No","need","to","cast","between","char","and","varchar",".","if","(","SqlTypeUtil",".","isCharacter","(","toType",")","&&","SqlTypeUtil",".","isCharacter","(","fromType",")",")","{","return","false",";","}","\n\n","//","No","need","to","cast","if","the","source","type","precedence","list\n","//","contains","target","type",".","i",".","e",".","do","not","cast","from\n","//","tinyint","to","int","or","int","to","bigint",".","if","(","fromType",".","getPrecedenceList","(",")",".","containsType","(","toType",")","&&","SqlTypeUtil",".","isIntType","(","fromType",")","&&","SqlTypeUtil",".","isIntType","(","toType",")",")","{","return","false",";","}","\n\n","//","Implicit","type","coercion","does","not","handle","nullability",".","if","(","SqlTypeUtil",".","equalSansNullability","(","factory,","fromType,","toType",")",")","{","return","false",";","}","//","Should","keep","sync","with","rules","in","SqlTypeCoercionRule",".","assert","SqlTypeUtil",".","canCastFrom","(","toType,","fromType,","true",")",";","return","true",";"],"docstring_tokens":["Decide","if","a","SqlNode","should","be","casted","to","target","type,","derived","class","can","override","this","strategy"],"prompt_tokens":[]}
{"code_tokens":["protected","void","updateInferredColumnType","(","SqlValidatorScope","scope,\n","SqlNode","query,\n","int","columnIndex,\n","RelDataType","desiredType",")","{","final","RelDataType","rowType","=","validator",".","deriveType","(","scope,","query",")",";","assert","rowType",".","isStruct","(",")",";","assert","columnIndex","<","rowType",".","getFieldList","(",")",".","size","(",")",";","\n\n","final","List<Map",".","Entry<String,","RelDataType>>","fieldList","=","new","ArrayList<>","(",")",";","for","(","int","i","=","0",";","i","<","rowType",".","getFieldCount","(",")",";","i++",")","{","final","RelDataTypeField","field","=","rowType",".","getFieldList","(",")",".","get","(","i",")",";","final","String","name","=","field",".","getName","(",")",";","final","RelDataType","type","=","field",".","getType","(",")",";","final","RelDataType","targetType","=","i","==","columnIndex","?","desiredType",":","type",";","fieldList",".","add","(","Pair",".","of","(","name,","targetType",")",")",";","}","updateInferredType","(","query,","factory",".","createStructType","(","fieldList",")",")",";"],"docstring_tokens":["Update","inferred","row","type","for","a","query,","i.e"],"prompt_tokens":[]}
{"code_tokens":["public","SqlTypeName","lookup","(","String","name",")","{","return","rules",".","getOrDefault","(","name,","SqlTypeName",".","ANY",")",";"],"docstring_tokens":["Returns","a","corresponding","SqlTypeName","for","a","given","InnoDB","type","name"],"prompt_tokens":[]}
{"code_tokens":["@Deprecated","//","to","be","removed","before","2",".","0\n","public","Subtype","getSubtype","(",")","{","return","Subtype",".","valueOf","(","kind",".","name","(",")",")",";"],"docstring_tokens":["Returns","the","specific","function,","e.g"],"prompt_tokens":[]}
{"code_tokens":["public","static","StarTable","of","(","Lattice","lattice,","List<Table>","tables",")","{","return","new","StarTable","(","lattice,","ImmutableList",".","copyOf","(","tables",")",")",";"],"docstring_tokens":["Creates","a","StarTable","and","registers","it","in","a","schema"],"prompt_tokens":[]}
{"code_tokens":["public","static","SqlNodeList","of","(","SqlParserPos","pos,","List<@Nullable","SqlNode>","list",")","{","return","new","SqlNodeList","(","pos,","list",")",";"],"docstring_tokens":["Creates","a","SqlNodeList","with","a","given","backing","list"],"prompt_tokens":[]}
{"code_tokens":["void","flatten","(","List<MutableNode>","flatNodes",")","{","flatNodes",".","add","(","this",")",";","for","(","MutableNode","child",":","children",")","{","child",".","flatten","(","flatNodes",")",";","}"],"docstring_tokens":["Populates","a","flattened","list","of","mutable","nodes"],"prompt_tokens":[]}
{"code_tokens":["@SuppressWarnings","(","\"BetaApi\"",")","protected","RelDataType","canonize","(","final","RelDataType","type",")","{","return","DATATYPE_CACHE",".","intern","(","type",")",";"],"docstring_tokens":["Registers","a","type,","or","returns","the","existing","type","if","it","is","already","registered"],"prompt_tokens":[]}
{"code_tokens":["private","static","List<RelDataTypeField>","getFieldList","(","List<RelDataType>","types",")","{","final","List<RelDataTypeField>","fieldList","=","new","ArrayList<>","(",")",";","for","(","RelDataType","type",":","types",")","{","addFields","(","type,","fieldList",")",";","}","return","fieldList",";"],"docstring_tokens":["Returns","a","list","of","the","fields","in","a","list","of","types"],"prompt_tokens":[]}
{"code_tokens":["private","RelDataType","decimalOf2","(","RelDataType","type",")","{","assert","SqlTypeUtil",".","isNumeric","(","type",")","||","SqlTypeUtil",".","isNull","(","type",")",";","SqlTypeName","typeName","=","type",".","getSqlTypeName","(",")",";","assert","typeName","!=","null",";","switch","(","typeName",")","{","case","DECIMAL:\n","//","Fix","the","precision","when","the","type","is","JavaType",".","return","RelDataTypeFactoryImpl",".","isJavaType","(","type",")","?","SqlTypeUtil",".","getMaxPrecisionScaleDecimal","(","this",")",":","type",";","case","TINYINT:\n","return","createSqlType","(","SqlTypeName",".","DECIMAL,","3,","0",")",";","case","SMALLINT:\n","return","createSqlType","(","SqlTypeName",".","DECIMAL,","5,","0",")",";","case","INTEGER:\n","return","createSqlType","(","SqlTypeName",".","DECIMAL,","10,","0",")",";","case","BIGINT:\n","//","the","default","max","precision","is","19,","so","this","is","actually","DECIMAL","(","19,","0",")","//","but","derived","system","can","override","the","max","precision/scale",".","return","createSqlType","(","SqlTypeName",".","DECIMAL,","38,","0",")",";","case","REAL:\n","return","createSqlType","(","SqlTypeName",".","DECIMAL,","14,","7",")",";","case","FLOAT:\n","return","createSqlType","(","SqlTypeName",".","DECIMAL,","14,","7",")",";","case","DOUBLE:\n","//","the","default","max","precision","is","19,","so","this","is","actually","DECIMAL","(","19,","15",")","//","but","derived","system","can","override","the","max","precision/scale",".","return","createSqlType","(","SqlTypeName",".","DECIMAL,","30,","15",")",";","default:\n","//","default","precision","and","scale",".","return","createSqlType","(","SqlTypeName",".","DECIMAL",")",";","}"],"docstring_tokens":["Create","decimal","type","equivalent","with","the","given","type","while","sans","nullability"],"prompt_tokens":[]}
{"code_tokens":["public","@Nullable","SqlTypeName","lookup","(","Class","javaClass",")","{","return","rules",".","get","(","javaClass",")",";"],"docstring_tokens":["Returns","a","corresponding","SqlTypeName","for","a","given","Java","class"],"prompt_tokens":[]}
{"code_tokens":["public","static","TimestampString","fromCalendarFields","(","Calendar","calendar",")","{","return","new","TimestampString","(","calendar",".","get","(","Calendar",".","YEAR",")",",\n","calendar",".","get","(","Calendar",".","MONTH",")","+","1,\n","calendar",".","get","(","Calendar",".","DAY_OF_MONTH",")",",\n","calendar",".","get","(","Calendar",".","HOUR_OF_DAY",")",",\n","calendar",".","get","(","Calendar",".","MINUTE",")",",\n","calendar",".","get","(","Calendar",".","SECOND",")",")",".","withMillis","(","calendar",".","get","(","Calendar",".","MILLISECOND",")",")",";"],"docstring_tokens":["Creates","a","TimestampString","from","a","Calendar"],"prompt_tokens":[]}
{"code_tokens":["public","String","toString","(","int","precision",")","{","Preconditions",".","checkArgument","(","precision",">=","0",")",";","final","int","p","=","precision","(",")",";","if","(","precision","<","p",")","{","return","round","(","precision",")",".","toString","(","precision",")",";","}","if","(","precision",">","p",")","{","String","s","=","v",";","if","(","p","==","0",")","{","s","+=","\"",".","\"",";","}","return","s","+","Strings",".","repeat","(","\"0\",","precision","-","p",")",";","}","return","v",";"],"docstring_tokens":["Converts","this","TimestampString","to","a","string,","truncated","or","padded","with","zeros","to","a","given","precision"],"prompt_tokens":[]}
{"code_tokens":["protected","RelDataType","toStruct","(","RelDataType","type,","@Nullable","SqlNode","unnest",")","{","if","(","type",".","isStruct","(",")",")","{","return","type",";","}","return","validator",".","getTypeFactory","(",")",".","builder","(",")",".","add","(","castNonNull","(","validator",".","deriveAlias","(","Objects",".","requireNonNull","(","unnest,","\"unnest\"",")",",\n","0",")",")",",\n","type",")",".","build","(",")",";"],"docstring_tokens":["Converts","a","type","to","a","struct","if","it","is","not","already"],"prompt_tokens":[]}
{"code_tokens":["public","@Nullable","SqlNode","convertCall","(","RexToSqlNodeConverter","converter,\n","RexCall","call",")","{","if","(","get","(","call",")","==","null",")","{","return","null",";","}","\n\n","final","SqlOperator","op","=","call",".","getOperator","(",")",";","final","List<RexNode>","operands","=","call",".","getOperands","(",")",";","\n\n","final","@Nullable","List<@Nullable","SqlNode>","exprs","=\n","convertExpressionList","(","converter,","operands",")",";","if","(","exprs","==","null",")","{","return","null",";","}","return","new","SqlBasicCall","(","op,\n","exprs,\n","SqlParserPos",".","ZERO",")",";"],"docstring_tokens":["Converts","a","call","to","an","operator","into","a","SqlCall","to","the","same","operator"],"prompt_tokens":[]}
{"code_tokens":["protected","void","registerEquivOp","(","SqlOperator","op",")","{","registerOp","(","op,","new","EquivConvertlet","(","op",")",")",";"],"docstring_tokens":["Creates","and","registers","a","convertlet","for","an","operator","in","which","the","SQL","and","Rex","representations","are","structurally","equivalent"],"prompt_tokens":[]}
{"code_tokens":["private","void","registerCaseOp","(","final","SqlOperator","op",")","{","registerOp","(","op,","(","converter,","call",")","->","{","assert","op","instanceof","SqlCaseOperator",";","@Nullable","List<@Nullable","SqlNode>","operands","=\n","convertExpressionList","(","converter,","call",".","operands",")",";","if","(","operands","==","null",")","{","return","null",";","}","SqlNodeList","whenList","=","new","SqlNodeList","(","SqlParserPos",".","ZERO",")",";","SqlNodeList","thenList","=","new","SqlNodeList","(","SqlParserPos",".","ZERO",")",";","int","i","=","0",";","while","(","i","<","operands",".","size","(",")","-","1",")","{","whenList",".","add","(","operands",".","get","(","i",")",")",";","++i",";","thenList",".","add","(","operands",".","get","(","i",")",")",";","++i",";","}","SqlNode","elseExpr","=","operands",".","get","(","i",")",";","return","op",".","createCall","(","null,","SqlParserPos",".","ZERO,","null,","whenList,","thenList,","elseExpr",")",";","}",")",";"],"docstring_tokens":["Creates","and","registers","a","convertlet","for","the","CASE","operator,","which","takes","different","forms","for","SQL","vs","Rex"],"prompt_tokens":[]}
{"code_tokens":["public","static","RexToLixTranslator","forAggregation","(","JavaTypeFactory","typeFactory,\n","BlockBuilder","list,","@Nullable","InputGetter","inputGetter,","SqlConformance","conformance",")","{","final","ParameterExpression","root","=","DataContext",".","ROOT",";","return","new","RexToLixTranslator","(","null,","typeFactory,","root,","inputGetter,","list,\n","null,","new","RexBuilder","(","typeFactory",")",",","conformance,","null",")",";"],"docstring_tokens":["Creates","a","translator","for","translating","aggregate","functions"],"prompt_tokens":[]}
{"code_tokens":["BasicSqlType","createWithNullability","(","boolean","nullable",")","{","if","(","nullable","==","this",".","isNullable",")","{","return","this",";","}","return","new","BasicSqlType","(","this",".","typeSystem,","this",".","typeName,","nullable,\n","this",".","precision,","this",".","scale,","this",".","collation,","this",".","wrappedCharset",")",";"],"docstring_tokens":["Constructs","a","type","with","nullablity"],"prompt_tokens":[]}
{"code_tokens":["BasicSqlType","createWithCharsetAndCollation","(","Charset","charset,\n","SqlCollation","collation",")","{","Preconditions",".","checkArgument","(","SqlTypeUtil",".","inCharFamily","(","this",")",")",";","return","new","BasicSqlType","(","this",".","typeSystem,","this",".","typeName,","this",".","isNullable,\n","this",".","precision,","this",".","scale,","collation,\n","SerializableCharset",".","forCharset","(","charset",")",")",";"],"docstring_tokens":["Constructs","a","type","with","charset","and","collation"],"prompt_tokens":[]}
{"code_tokens":["private","static","Set<RexNode>","findCorrelationDependentCalls","(","CorrelationId","corrId,","RelNode","plan",")","{","SimpleCorrelationCollector","finder","=","new","SimpleCorrelationCollector","(","corrId",")",";","plan",".","accept","(","new","RelHomogeneousShuttle","(",")","{","@Override","public","RelNode","visit","(","RelNode","other",")","{","if","(","other","instanceof","Project","||","other","instanceof","Filter",")","{","other",".","accept","(","finder",")",";","}","return","super",".","visit","(","other",")",";","}","}",")",";","return","finder",".","correlations",";"],"docstring_tokens":["Traverses","a","plan","and","finds","all","simply","correlated","row","expressions","with","the","specified","id"],"prompt_tokens":[]}
{"code_tokens":["public","static","boolean","containsMixing","(","RexProgram","program",")","{","RexCallMultisetOperatorCounter","counter","=\n","new","RexCallMultisetOperatorCounter","(",")",";","for","(","RexNode","expr",":","program",".","getExprList","(",")",")","{","counter",".","reset","(",")",";","expr",".","accept","(","counter",")",";","\n\n","if","(","(","counter",".","totalCount","!=","counter",".","multisetCount",")","&&","(","0","!=","counter",".","multisetCount",")",")","{","return","true",";","}","}","return","false",";"],"docstring_tokens":["Returns","true","if","any","expression","in","a","program","contains","a","mixing","between","multiset","and","non-multiset","calls"],"prompt_tokens":[]}
{"code_tokens":["public","static","boolean","containsMixing","(","RexNode","node",")","{","RexCallMultisetOperatorCounter","counter","=\n","new","RexCallMultisetOperatorCounter","(",")",";","node",".","accept","(","counter",")",";","return","(","counter",".","totalCount","!=","counter",".","multisetCount",")","&&","(","0","!=","counter",".","multisetCount",")",";"],"docstring_tokens":["Returns","true","if","a","node","contains","a","mixing","between","multiset","and","non-multiset","calls"],"prompt_tokens":[]}
{"code_tokens":["public","static","@Nullable","RexCall","findFirstMultiset","(","final","RexNode","node,","boolean","deep",")","{","if","(","node","instanceof","RexFieldAccess",")","{","return","findFirstMultiset","(","(","(","RexFieldAccess",")","node",")",".","getReferenceExpr","(",")",",\n","deep",")",";","}","\n\n","if","(","!","(","node","instanceof","RexCall",")",")","{","return","null",";","}","final","RexCall","call","=","(","RexCall",")","node",";","RexCall","firstOne","=","null",";","for","(","SqlOperator","op",":","MULTISET_OPERATORS",")","{","firstOne","=","RexUtil",".","findOperatorCall","(","op,","call",")",";","if","(","null","!=","firstOne",")","{","if","(","firstOne",".","getOperator","(",")",".","equals","(","SqlStdOperatorTable",".","CAST",")","&&","!isMultisetCast","(","firstOne",")",")","{","firstOne","=","null",";","continue",";","}","break",";","}","}","\n\n","if","(","!deep","&&","(","firstOne","!=","call",")",")","{","return","null",";","}","return","firstOne",";"],"docstring_tokens":["Returns","a","reference","to","the","first","found","multiset","call","or","null","if","none","was","found"],"prompt_tokens":[]}
{"code_tokens":["public","void","start","(",")","{","Preconditions",".","checkState","(","!isStarted,","\"already","started\"",")",";","try","{","node",".","start","(",")",";","this",".","isStarted","=","true",";","}","catch","(","NodeValidationException","e",")","{","throw","TestUtil",".","rethrow","(","e",")",";","}"],"docstring_tokens":["Starts","the","current","node"],"prompt_tokens":[]}
{"code_tokens":["public","TransportAddress","httpAddress","(",")","{","Preconditions",".","checkState","(","isStarted,","\"node","is","not","started\"",")",";","\n\n","NodesInfoResponse","response","=","client","(",")",".","admin","(",")",".","cluster","(",")",".","prepareNodesInfo","(",")",".","execute","(",")",".","actionGet","(",")",";","if","(","response",".","getNodes","(",")",".","size","(",")","!=","1",")","{","throw","new","IllegalStateException","(","\"Expected","single","node","but","got","\"\n","+","response",".","getNodes","(",")",".","size","(",")",")",";","}","NodeInfo","node","=","response",".","getNodes","(",")",".","get","(","0",")",";","HttpInfo","httpInfo","=","node",".","getInfo","(","HttpInfo",".","class",")",";","return","httpInfo",".","address","(",")",".","boundAddresses","(",")","[0]",";"],"docstring_tokens":["Returns","current","address","to","connect","to","with","HTTP","client"],"prompt_tokens":[]}
{"code_tokens":["public","static","@Nullable","AggregateFunctionImpl","create","(","Class<?>","clazz",")","{","final","Method","initMethod","=","ReflectiveFunctionBase",".","findMethod","(","clazz,","\"init\"",")",";","final","Method","addMethod","=","ReflectiveFunctionBase",".","findMethod","(","clazz,","\"add\"",")",";","final","Method","mergeMethod","=","null",";","//","TODO:\n","final","Method","resultMethod","=","ReflectiveFunctionBase",".","findMethod","(","clazz,","\"result\"",")",";","if","(","initMethod","!=","null","&&","addMethod","!=","null",")","{","//","A","is","return","type","of","init","by","definition\n","final","Class<?>","accumulatorType","=","initMethod",".","getReturnType","(",")",";","\n\n","//","R","is","return","type","of","result","by","definition\n","final","Class<?>","resultType","=\n","resultMethod","!=","null","?","resultMethod",".","getReturnType","(",")",":","accumulatorType",";","\n\n","//","V","is","remaining","args","of","add","by","definition\n","final","List<Class>","addParamTypes","=\n","ImmutableList",".","copyOf","(","(","Class[]",")","addMethod",".","getParameterTypes","(",")",")",";","if","(","addParamTypes",".","isEmpty","(",")","||","addParamTypes",".","get","(","0",")","!=","accumulatorType",")","{","throw","RESOURCE",".","firstParameterOfAdd","(","clazz",".","getName","(",")",")",".","ex","(",")",";","}","final","ReflectiveFunctionBase",".","ParameterListBuilder","params","=\n","ReflectiveFunctionBase",".","builder","(",")",";","final","ImmutableList",".","Builder<Class<?>>","valueTypes","=\n","ImmutableList",".","builder","(",")",";","for","(","int","i","=","1",";","i","<","addParamTypes",".","size","(",")",";","i++",")","{","final","Class","type","=","addParamTypes",".","get","(","i",")",";","final","String","name","=","ReflectUtil",".","getParameterName","(","addMethod,","i",")",";","final","boolean","optional","=","ReflectUtil",".","isParameterOptional","(","addMethod,","i",")",";","params",".","add","(","type,","name,","optional",")",";","valueTypes",".","add","(","type",")",";","}","\n\n","//","A","init","(",")","//","A","add","(","A,","V",")","//","A","merge","(","A,","A",")","//","R","result","(","A",")","\n\n","//","TODO:","check","add","returns","A\n","//","TODO:","check","merge","returns","A\n","//","TODO:","check","merge","args","are","(","A,","A",")","//","TODO:","check","result","args","are","(","A",")","\n\n","return","new","AggregateFunctionImpl","(","clazz,","params",".","build","(",")",",\n","valueTypes",".","build","(",")",",","accumulatorType,","resultType,","initMethod,\n","addMethod,","mergeMethod,","resultMethod",")",";","}","return","null",";"],"docstring_tokens":["Creates","an","aggregate","function,","or","returns","null"],"prompt_tokens":[]}
{"code_tokens":["public","static","List<RexNode>","generateCastExpressions","(","RexBuilder","rexBuilder,\n","RelDataType","lhsRowType,\n","RelDataType","rhsRowType",")","{","final","List<RelDataTypeField>","fieldList","=","rhsRowType",".","getFieldList","(",")",";","int","n","=","fieldList",".","size","(",")",";","assert","n","==","lhsRowType",".","getFieldCount","(",")",":","\"field","count:","lhs","[\"","+","lhsRowType","+","\"]","rhs","[\"","+","rhsRowType","+","\"]\"",";","List<RexNode>","rhsExps","=","new","ArrayList<>","(",")",";","for","(","RelDataTypeField","field",":","fieldList",")","{","rhsExps",".","add","(","rexBuilder",".","makeInputRef","(","field",".","getType","(",")",",","field",".","getIndex","(",")",")",")",";","}","return","generateCastExpressions","(","rexBuilder,","lhsRowType,","rhsExps",")",";"],"docstring_tokens":["Generates","a","cast","from","one","row","type","to","another"],"prompt_tokens":[]}
{"code_tokens":["public","static","List<RexNode>","generateCastExpressions","(","RexBuilder","rexBuilder,\n","RelDataType","lhsRowType,\n","List<RexNode>","rhsExps",")","{","List<RelDataTypeField>","lhsFields","=","lhsRowType",".","getFieldList","(",")",";","List<RexNode>","castExps","=","new","ArrayList<>","(",")",";","for","(","Pair<RelDataTypeField,","RexNode>","pair\n",":","Pair",".","zip","(","lhsFields,","rhsExps,","true",")",")","{","RelDataTypeField","lhsField","=","pair",".","left",";","RelDataType","lhsType","=","lhsField",".","getType","(",")",";","final","RexNode","rhsExp","=","pair",".","right",";","RelDataType","rhsType","=","rhsExp",".","getType","(",")",";","if","(","lhsType",".","equals","(","rhsType",")",")","{","castExps",".","add","(","rhsExp",")",";","}","else","{","castExps",".","add","(","rexBuilder",".","makeCast","(","lhsType,","rhsExp",")",")",";","}","}","return","castExps",";"],"docstring_tokens":["Generates","a","cast","for","a","row","type"],"prompt_tokens":[]}
{"code_tokens":["public","static","boolean","isNullabilityCast","(","RelDataTypeFactory","typeFactory,\n","RexNode","node",")","{","switch","(","node",".","getKind","(",")",")","{","case","CAST:\n","final","RexCall","call","=","(","RexCall",")","node",";","final","RexNode","arg0","=","call",".","getOperands","(",")",".","get","(","0",")",";","return","SqlTypeUtil",".","equalSansNullability","(","typeFactory,","arg0",".","getType","(",")",",\n","call",".","getType","(",")",")",";","default:\n","break",";","}","return","false",";"],"docstring_tokens":["Returns","whether","an","expression","is","a","cast","just","for","the","purposes","of","nullability,","not","changing","any","other","aspect","of","the","type"],"prompt_tokens":[]}
{"code_tokens":["public","static","boolean","isCallTo","(","RexNode","expr,","SqlOperator","op",")","{","return","(","expr","instanceof","RexCall",")","&&","(","(","(","RexCall",")","expr",")",".","getOperator","(",")","==","op",")",";"],"docstring_tokens":["Returns","whether","a","RexNode","node","is","a","RexCall","call","to","a","given","SqlOperator","operator"],"prompt_tokens":[]}
{"code_tokens":["public","static","boolean","isIdentity","(","List<?","extends","RexNode>","exps,\n","RelDataType","inputRowType",")","{","return","inputRowType",".","getFieldCount","(",")","==","exps",".","size","(",")","&&","containIdentity","(","exps,","inputRowType,","Litmus",".","IGNORE",")",";"],"docstring_tokens":["Returns","whether","a","list","of","expressions","projects","the","incoming","fields"],"prompt_tokens":[]}
{"code_tokens":["public","static","@Nullable","RexNode","composeDisjunction","(","RexBuilder","rexBuilder,\n","Iterable<?","extends","RexNode>","nodes,","boolean","nullOnEmpty",")","{","ImmutableList<RexNode>","list","=","flattenOr","(","nodes",")",";","switch","(","list",".","size","(",")",")","{","case","0:\n","return","nullOnEmpty\n","?","null\n",":","rexBuilder",".","makeLiteral","(","false",")",";","case","1:\n","return","list",".","get","(","0",")",";","default:\n","if","(","containsTrue","(","list",")",")","{","return","rexBuilder",".","makeLiteral","(","true",")",";","}","return","rexBuilder",".","makeCall","(","SqlStdOperatorTable",".","OR,","list",")",";","}"],"docstring_tokens":["Converts","a","collection","of","expressions","into","an","OR,","optionally","returning","null","if","the","list","is","empty"],"prompt_tokens":[]}
{"code_tokens":["public","static","@Nullable","RelFieldCollation","apply","(","Mappings",".","TargetMapping","mapping,\n","RelFieldCollation","fieldCollation",")","{","final","int","target","=\n","mapping",".","getTargetOpt","(","fieldCollation",".","getFieldIndex","(",")",")",";","if","(","target","<","0",")","{","return","null",";","}","return","fieldCollation",".","withFieldIndex","(","target",")",";"],"docstring_tokens":["Applies","a","mapping","to","a","field","collation"],"prompt_tokens":[]}
{"code_tokens":["public","static","boolean","isFlat","(","RexNode","expr",")","{","if","(","!","(","expr","instanceof","RexCall",")",")","{","return","true",";","}","final","RexCall","call","=","(","RexCall",")","expr",";","return","isFlat","(","call",".","getOperands","(",")",",","call",".","getOperator","(",")",")","&&","all","(","call",".","getOperands","(",")",",","RexUtil::isFlat",")",";"],"docstring_tokens":["Returns","false","if","the","expression","can","be","optimized","by","flattening","calls","to","an","associative","operator","such","as","AND","and","OR"],"prompt_tokens":[]}
{"code_tokens":["public","static","RexNode","not","(","RexNode","e",")","{","switch","(","e",".","getKind","(",")",")","{","case","NOT:\n","return","(","(","RexCall",")","e",")",".","getOperands","(",")",".","get","(","0",")",";","default:\n","return","addNot","(","e",")",";","}"],"docstring_tokens":["Negates","a","logical","expression","by","adding","or","removing","a","NOT"],"prompt_tokens":[]}
{"code_tokens":["public","static","synchronized","OracleSqlOperatorTable","instance","(",")","{","OracleSqlOperatorTable","instance","=","OracleSqlOperatorTable",".","instance",";","if","(","instance","==","null",")","{","//","Creates","and","initializes","the","standard","operator","table",".","//","Uses","two-phase","construction,","because","we","can't","initialize","the\n","//","table","until","the","constructor","of","the","sub-class","has","completed",".","instance","=","new","OracleSqlOperatorTable","(",")",";","instance",".","init","(",")",";","OracleSqlOperatorTable",".","instance","=","instance",";","}","return","instance",";"],"docstring_tokens":["Returns","the","Oracle","operator","table,","creating","it","if","necessary"],"prompt_tokens":[]}
{"code_tokens":["public","Set<RelSet>","getChildSets","(","VolcanoPlanner","planner",")","{","Set<RelSet>","childSets","=","new","HashSet<>","(",")",";","for","(","RelNode","node",":","this",".","rels",")","{","if","(","node","instanceof","Converter",")","{","continue",";","}","for","(","RelNode","child",":","node",".","getInputs","(",")",")","{","RelSet","childSet","=","planner",".","equivRoot","(","(","(","RelSubset",")","child",")",".","getSet","(",")",")",";","if","(","childSet",".","id","!=","this",".","id",")","{","childSets",".","add","(","childSet",")",";","}","}","}","return","childSets",";"],"docstring_tokens":["Returns","the","child","RelSet","for","the","current","set"],"prompt_tokens":[]}
{"code_tokens":["void","addInternal","(","RelNode","rel",")","{","if","(","!rels",".","contains","(","rel",")",")","{","rels",".","add","(","rel",")",";","for","(","RelTrait","trait",":","rel",".","getTraitSet","(",")",")","{","assert","trait","==","trait",".","getTraitDef","(",")",".","canonize","(","trait",")",";","}","\n\n","VolcanoPlanner","planner","=\n","(","VolcanoPlanner",")","rel",".","getCluster","(",")",".","getPlanner","(",")",";","if","(","planner",".","getListener","(",")","!=","null",")","{","postEquivalenceEvent","(","planner,","rel",")",";","}","}","if","(","this",".","rel","==","null",")","{","this",".","rel","=","rel",";","}","else","{","//","Row","types","must","be","the","same,","except","for","field","names",".","RelOptUtil",".","verifyTypeEquivalence","(","this",".","rel,\n","rel,\n","this",")",";","}"],"docstring_tokens":["Adds","an","expression","rel","to","this","set,","without","creating","a","org.apache.calcite.plan.volcano.RelSubset"],"prompt_tokens":[]}
{"code_tokens":["private","static","String","hms","(","int","h,","int","m,","int","s",")","{","Preconditions",".","checkArgument","(","h",">=","0","&&","h","<","24,","\"Hour","out","of","range:\",","h",")",";","Preconditions",".","checkArgument","(","m",">=","0","&&","m","<","60,","\"Minute","out","of","range:\",","m",")",";","Preconditions",".","checkArgument","(","s",">=","0","&&","s","<","60,","\"Second","out","of","range:\",","s",")",";","final","StringBuilder","b","=","new","StringBuilder","(",")",";","DateTimeStringUtils",".","hms","(","b,","h,","m,","s",")",";","return","b",".","toString","(",")",";"],"docstring_tokens":["Validates","an","hour-minute-second","value","and","converts","to","a","string"],"prompt_tokens":[]}
{"code_tokens":["public","static","TimeString","fromCalendarFields","(","Calendar","calendar",")","{","return","new","TimeString","(","calendar",".","get","(","Calendar",".","HOUR_OF_DAY",")",",\n","calendar",".","get","(","Calendar",".","MINUTE",")",",\n","calendar",".","get","(","Calendar",".","SECOND",")",")",".","withMillis","(","calendar",".","get","(","Calendar",".","MILLISECOND",")",")",";"],"docstring_tokens":["Creates","a","TimeString","from","a","Calendar"],"prompt_tokens":[]}
{"code_tokens":["public","static","ConfigBuilder","newConfigBuilder","(",")","{","return","new","ConfigBuilder","(",")",";"],"docstring_tokens":["Creates","a","config","builder","with","each","setting","initialized","to","its","default","value"],"prompt_tokens":[]}
{"code_tokens":["protected","void","assertNode","(","String","message,","String","expected,","RexNode","node",")","{","String","actual",";","if","(","node",".","isA","(","SqlKind",".","CAST",")","||","node",".","isA","(","SqlKind",".","NEW_SPECIFICATION",")",")","{","//","toString","contains","type","(","see","RexCall",".","toString",")","actual","=","node",".","toString","(",")",";","}","else","{","actual","=","node","+","\":\"","+","node",".","getType","(",")","+","(","node",".","getType","(",")",".","isNullable","(",")","?","\"\"\n",":","RelDataTypeImpl",".","NON_NULLABLE_SUFFIX",")",";","}","assertEquals","(","expected,","actual,","message",")",";"],"docstring_tokens":["Asserts","that","a","given","node","has","expected","string","representation","with","account","of","node","type"],"prompt_tokens":[]}
{"code_tokens":["public","<E","extends","RelMultipleTrait>","List<E>","getTraits","(","int","index",")","{","final","RelTrait","trait","=","traits[index]",";","if","(","trait","instanceof","RelCompositeTrait",")","{","//noinspection","unchecked\n","return","(","(","RelCompositeTrait<E>",")","trait",")",".","traitList","(",")",";","}","else","{","//noinspection","unchecked\n","return","ImmutableList",".","of","(","(","E",")","trait",")",";","}"],"docstring_tokens":["Retrieves","a","list","of","traits","from","the","set"],"prompt_tokens":[]}
{"code_tokens":["public","<T","extends","RelTrait>","boolean","isEnabled","(","RelTraitDef<T>","traitDef",")","{","return","getTrait","(","traitDef",")","!=","null",";"],"docstring_tokens":["Returns","whether","a","given","kind","of","trait","is","enabled"],"prompt_tokens":[]}
{"code_tokens":["public","<T","extends","RelTrait>","@Nullable","T","getTrait","(","RelTraitDef<T>","traitDef",")","{","int","index","=","findIndex","(","traitDef",")",";","if","(","index",">=","0",")","{","//noinspection","unchecked\n","return","(","T",")","getTrait","(","index",")",";","}","\n\n","return","null",";"],"docstring_tokens":["Retrieves","a","RelTrait","of","the","given","type","from","the","set"],"prompt_tokens":[]}
{"code_tokens":["public","<T","extends","RelMultipleTrait>","RelTraitSet","replaceIfs","(","RelTraitDef<T>","def,\n","Supplier<?","extends","@Nullable","List<T>>","traitSupplier",")","{","int","index","=","findIndex","(","def",")",";","if","(","index","<","0",")","{","return","this",";","//","trait","is","not","enabled",";","ignore","it\n","}","final","List<T>","traitList","=","traitSupplier",".","get","(",")",";","if","(","traitList","==","null",")","{","return","replace","(","index,","def",".","getDefault","(",")",")",";","}","return","replace","(","index,","RelCompositeTrait",".","of","(","def,","traitList",")",")",";"],"docstring_tokens":["If","a","given","multiple","trait","is","enabled,","replaces","it","by","calling","the","given","function"],"prompt_tokens":[]}
{"code_tokens":["public","<T","extends","RelTrait>","RelTraitSet","replaceIf","(","RelTraitDef<T>","def,\n","Supplier<?","extends","@Nullable","T>","traitSupplier",")","{","int","index","=","findIndex","(","def",")",";","if","(","index","<","0",")","{","return","this",";","//","trait","is","not","enabled",";","ignore","it\n","}","T","traitList","=","traitSupplier",".","get","(",")",";","if","(","traitList","==","null",")","{","traitList","=","def",".","getDefault","(",")",";","}","return","replace","(","index,","traitList",")",";"],"docstring_tokens":["If","a","given","trait","is","enabled,","replaces","it","by","calling","the","given","function"],"prompt_tokens":[]}
{"code_tokens":["public","boolean","isDefault","(",")","{","for","(","final","RelTrait","trait",":","traits",")","{","if","(","trait","!=","trait",".","getTraitDef","(",")",".","getDefault","(",")",")","{","return","false",";","}","}","return","true",";"],"docstring_tokens":["Returns","whether","all","the","traits","are","default","trait","value"],"prompt_tokens":[]}
{"code_tokens":["public","boolean","isDefaultSansConvention","(",")","{","for","(","final","RelTrait","trait",":","traits",")","{","if","(","trait",".","getTraitDef","(",")","==","ConventionTraitDef",".","INSTANCE",")","{","continue",";","}","if","(","trait","!=","trait",".","getTraitDef","(",")",".","getDefault","(",")",")","{","return","false",";","}","}","return","true",";"],"docstring_tokens":["Returns","whether","all","the","traits","except","Convention","are","default","trait","value"],"prompt_tokens":[]}
{"code_tokens":["public","boolean","equalsSansConvention","(","RelTraitSet","other",")","{","if","(","this","==","other",")","{","return","true",";","}","if","(","this",".","size","(",")","!=","other",".","size","(",")",")","{","return","false",";","}","for","(","int","i","=","0",";","i","<","traits",".","length",";","i++",")","{","if","(","traits[i]",".","getTraitDef","(",")","==","ConventionTraitDef",".","INSTANCE",")","{","continue",";","}","//","each","trait","should","be","canonized","already\n","if","(","traits[i]","!=","other",".","traits[i]",")","{","return","false",";","}","}","return","true",";"],"docstring_tokens":["Returns","whether","all","the","traits","except","Convention","equals","with","traits","in","other","traitSet"],"prompt_tokens":[]}
{"code_tokens":["public","RelTraitSet","getDefault","(",")","{","RelTrait[]","newTraits","=","new","RelTrait[traits",".","length]",";","for","(","int","i","=","0",";","i","<","traits",".","length",";","i++",")","{","newTraits[i]","=","traits[i]",".","getTraitDef","(",")",".","getDefault","(",")",";","}","return","cache",".","getOrAdd","(","new","RelTraitSet","(","cache,","newTraits",")",")",";"],"docstring_tokens":["Returns","a","new","traitSet","with","same","traitDefs","with","current","traitSet,","but","each","trait","is","the","default","trait","value"],"prompt_tokens":[]}
{"code_tokens":["@Override","public","int","size","(",")","{","return","traits",".","length",";"],"docstring_tokens":["Returns","the","size","of","the","RelTraitSet"],"prompt_tokens":[]}
{"code_tokens":["public","<T","extends","RelTrait>","T","canonize","(","T","trait",")","{","if","(","trait","==","null",")","{","//","Return","\"trait\"","makes","the","input","type","to","be","the","same","as","the","output","type,\n","//","so","checkerframework","is","happy\n","return","trait",";","}","\n\n","if","(","trait","instanceof","RelCompositeTrait",")","{","//","Composite","traits","are","canonized","on","creation\n","//noinspection","unchecked\n","return","trait",";","}","\n\n","//noinspection","unchecked\n","return","(","T",")","trait",".","getTraitDef","(",")",".","canonize","(","trait",")",";"],"docstring_tokens":["Converts","a","trait","to","canonical","form"],"prompt_tokens":[]}
{"code_tokens":["@Override","public","boolean","equals","(","@Nullable","Object","obj",")","{","if","(","this","==","obj",")","{","return","true",";","}","if","(","!","(","obj","instanceof","RelTraitSet",")",")","{","return","false",";","}","RelTraitSet","that","=","(","RelTraitSet",")","obj",";","if","(","this",".","hash","!=","0\n","&&","that",".","hash","!=","0\n","&&","this",".","hash","!=","that",".","hash",")","{","return","false",";","}","if","(","traits",".","length","!=","that",".","traits",".","length",")","{","return","false",";","}","for","(","int","i","=","0",";","i","<","traits",".","length",";","i++",")","{","if","(","traits[i]","!=","that",".","traits[i]",")","{","return","false",";","}","}","return","true",";"],"docstring_tokens":["Compares","two","RelTraitSet","objects","for","equality"],"prompt_tokens":[]}
{"code_tokens":["public","boolean","contains","(","RelTrait","trait",")","{","for","(","RelTrait","relTrait",":","traits",")","{","if","(","trait","==","relTrait",")","{","return","true",";","}","}","return","false",";"],"docstring_tokens":["Returns","whether","this","trait","set","contains","a","given","trait"],"prompt_tokens":[]}
{"code_tokens":["public","boolean","comprises","(","RelTrait",".",".",".","relTraits",")","{","return","Arrays",".","equals","(","traits,","relTraits",")",";"],"docstring_tokens":["Returns","whether","this","trait","set","comprises","precisely","the","list","of","given","traits"],"prompt_tokens":[]}
{"code_tokens":["String","computeString","(",")","{","StringBuilder","s","=","new","StringBuilder","(",")",";","for","(","int","i","=","0",";","i","<","traits",".","length",";","i++",")","{","final","RelTrait","trait","=","traits[i]",";","if","(","i",">","0",")","{","s",".","append","(","'",".","'",")",";","}","if","(","(","trait","==","null",")","&&","(","traits",".","length","==","1",")",")","{","//","Special","format","for","a","list","containing","a","single","null","trait",";","//","otherwise","its","string","appears","as","\"null\",","which","is","the","same\n","//","as","if","the","whole","trait","set","were","null,","and","so","confusing",".","s",".","append","(","\"","{","null","}","\"",")",";","}","else","{","s",".","append","(","trait",")",";","}","}","return","s",".","toString","(",")",";"],"docstring_tokens":["Outputs","the","traits","of","this","set","as","a","String"],"prompt_tokens":[]}
{"code_tokens":["private","int","findIndex","(","RelTraitDef","traitDef",")","{","for","(","int","i","=","0",";","i","<","traits",".","length",";","i++",")","{","RelTrait","trait","=","traits[i]",";","if","(","(","trait","!=","null",")","&&","(","trait",".","getTraitDef","(",")","==","traitDef",")",")","{","return","i",";","}","}","\n\n","return","-1",";"],"docstring_tokens":["Finds","the","index","of","a","trait","of","a","given","type","in","this","set"],"prompt_tokens":[]}
{"code_tokens":["public","ImmutableList<RelTrait>","difference","(","RelTraitSet","traitSet",")","{","final","ImmutableList",".","Builder<RelTrait>","builder","=","ImmutableList",".","builder","(",")",";","final","int","n","=\n","Math",".","min","(","this",".","size","(",")",",\n","traitSet",".","size","(",")",")",";","\n\n","for","(","int","i","=","0",";","i","<","n",";","i++",")","{","RelTrait","thisTrait","=","this",".","traits[i]",";","RelTrait","thatTrait","=","traitSet",".","traits[i]",";","if","(","thisTrait","!=","thatTrait",")","{","builder",".","add","(","thatTrait",")",";","}","}","return","builder",".","build","(",")",";"],"docstring_tokens":["Returns","a","list","of","traits","that","are","in","traitSet","but","not","in","this","RelTraitSet"],"prompt_tokens":[]}
{"code_tokens":["public","boolean","allSimple","(",")","{","for","(","RelTrait","trait",":","traits",")","{","if","(","trait","instanceof","RelCompositeTrait",")","{","return","false",";","}","}","return","true",";"],"docstring_tokens":["Returns","whether","there","are","any","composite","traits","in","this","set"],"prompt_tokens":[]}
{"code_tokens":["public","RelTraitSet","simplify","(",")","{","RelTraitSet","x","=","this",";","for","(","int","i","=","0",";","i","<","traits",".","length",";","i++",")","{","final","RelTrait","trait","=","traits[i]",";","if","(","trait","instanceof","RelCompositeTrait",")","{","x","=","x",".","replace","(","i,\n","(","(","RelCompositeTrait",")","trait",")",".","size","(",")","==","1\n","?","(","(","RelCompositeTrait",")","trait",")",".","trait","(","0",")",":","trait",".","getTraitDef","(",")",".","getDefault","(",")",")",";","}","}","return","x",";"],"docstring_tokens":["Returns","a","trait","set","similar","to","this","one","but","with","all","composite","traits","flattened"],"prompt_tokens":[]}
{"code_tokens":["public","boolean","hasFilter","(",")","{","return","false",";"],"docstring_tokens":["Returns","whether","the","operator","is","an","aggregate","function","with","a","filter"],"prompt_tokens":[]}
{"code_tokens":["public","Enumerable<Object>","query","(","final","CqlSession","session,","List<Map",".","Entry<String,","Class>>","fields,\n","final","List<Map",".","Entry<String,","String>>","selectFields,","List<String>","predicates,\n","List<String>","order,","final","Integer","offset,","final","Integer","fetch",")","{","//","Build","the","type","of","the","resulting","row","based","on","the","provided","fields\n","final","RelDataTypeFactory","typeFactory","=\n","new","SqlTypeFactoryImpl","(","RelDataTypeSystem",".","DEFAULT",")",";","final","RelDataTypeFactory",".","Builder","fieldInfo","=","typeFactory",".","builder","(",")",";","final","RelDataType","rowType","=","getRowType","(","typeFactory",")",";","\n\n","Function1<String,","Void>","addField","=","fieldName","->","{","RelDataType","relDataType","=","Objects",".","requireNonNull","(","rowType",".","getField","(","fieldName,","true,","false",")",")",".","getType","(",")",";","fieldInfo",".","add","(","fieldName,","relDataType",")",".","nullable","(","true",")",";","return","null",";","}",";","\n\n","if","(","selectFields",".","isEmpty","(",")",")","{","for","(","Map",".","Entry<String,","Class>","field",":","fields",")","{","addField",".","apply","(","field",".","getKey","(",")",")",";","}","}","else","{","for","(","Map",".","Entry<String,","String>","field",":","selectFields",")","{","addField",".","apply","(","field",".","getKey","(",")",")",";","}","}","\n\n","final","RelProtoDataType","resultRowType","=","RelDataTypeImpl",".","proto","(","fieldInfo",".","build","(",")",")",";","\n\n","//","Construct","the","list","of","fields","to","project\n","final","String","selectString",";","if","(","selectFields",".","isEmpty","(",")",")","{","selectString","=","\"*\"",";","}","else","{","selectString","=","Util",".","toString","(","(",")","->","{","final","Iterator<Map",".","Entry<String,","String>>","selectIterator","=\n","selectFields",".","iterator","(",")",";","\n\n","return","new","Iterator<String>","(",")","{","@Override","public","boolean","hasNext","(",")","{","return","selectIterator",".","hasNext","(",")",";","}","\n\n","@Override","public","String","next","(",")","{","Map",".","Entry<String,","String>","entry","=","selectIterator",".","next","(",")",";","return","entry",".","getKey","(",")","+","\"","AS","\"","+","entry",".","getValue","(",")",";","}","\n\n","@Override","public","void","remove","(",")","{","throw","new","UnsupportedOperationException","(",")",";","}","}",";","}",",","\"\",","\",","\",","\"\"",")",";","}","\n\n","//","Combine","all","predicates","conjunctively\n","String","whereClause","=","\"\"",";","if","(","!predicates",".","isEmpty","(",")",")","{","whereClause","=","\"","WHERE","\"",";","whereClause","+=","Util",".","toString","(","predicates,","\"\",","\"","AND","\",","\"\"",")",";","}","\n\n","//","Build","and","issue","the","query","and","return","an","Enumerator","over","the","results\n","StringBuilder","queryBuilder","=","new","StringBuilder","(","\"SELECT","\"",")",";","queryBuilder",".","append","(","selectString",")",".","append","(","\"","FROM","\\\"\"",")",".","append","(","columnFamily",")",".","append","(","\"\\\"\"",")",".","append","(","whereClause",")",";","if","(","!order",".","isEmpty","(",")",")","{","queryBuilder",".","append","(","Util",".","toString","(","order,","\"","ORDER","BY","\",","\",","\",","\"\"",")",")",";","}","\n\n","int","limit","=","offset",";","if","(","fetch",">=","0",")","{","limit","+=","fetch",";","}","if","(","limit",">","0",")","{","queryBuilder",".","append","(","\"","LIMIT","\"",")",".","append","(","limit",")",";","}","queryBuilder",".","append","(","\"","ALLOW","FILTERING\"",")",";","\n\n","return","new","AbstractEnumerable<Object>","(",")","{","@Override","public","Enumerator<Object>","enumerator","(",")","{","final","ResultSet","results","=","session",".","execute","(","queryBuilder",".","toString","(",")",")",";","//","Skip","results","until","we","get","to","the","right","offset\n","int","skip","=","0",";","Enumerator<Object>","enumerator","=","new","CassandraEnumerator","(","results,","resultRowType",")",";","while","(","skip","<","offset","&&","enumerator",".","moveNext","(",")",")","{","skip++",";","}","return","enumerator",";","}","}",";"],"docstring_tokens":["Executes","a","CQL","query","on","the","underlying","table"],"prompt_tokens":[]}
{"code_tokens":["private","static","ImmutableBitSet","decorateWithConstantColumnsFromPredicates","(","ImmutableBitSet","checkingColumns,","RelNode","rel,","RelMetadataQuery","mq",")","{","final","RelOptPredicateList","predicates","=","mq",".","getPulledUpPredicates","(","rel",")",";","if","(","!RelOptPredicateList",".","isEmpty","(","predicates",")",")","{","final","Set<Integer>","constantIndexes","=","new","HashSet<>","(",")",";","predicates",".","constantMap",".","keySet","(",")",".","forEach","(","rex","->","{","if","(","rex","instanceof","RexInputRef",")","{","constantIndexes",".","add","(","(","(","RexInputRef",")","rex",")",".","getIndex","(",")",")",";","}","}",")",";","if","(","!constantIndexes",".","isEmpty","(",")",")","{","return","checkingColumns",".","union","(","ImmutableBitSet",".","of","(","constantIndexes",")",")",";","}","}","//","If","no","constant","columns","deduced,","return","the","original","\"checkingColumns\"",".","return","checkingColumns",";"],"docstring_tokens":["Deduce","constant","columns","from","predicates","of","rel","and","return","the","union","bitsets","of","checkingColumns","and","the","constant","columns"],"prompt_tokens":[]}
{"code_tokens":["public","static","SqlSampleSpec","sampleValue","(","SqlNode","node",")","{","return","(","(","SqlLiteral",")","node",")",".","getValueAs","(","SqlSampleSpec",".","class",")",";"],"docstring_tokens":["Extracts","the","SqlSampleSpec","value","from","a","symbol","literal"],"prompt_tokens":[]}
{"code_tokens":["@Deprecated","//","to","be","removed","before","2",".","0\n","public","static","String","stringValue","(","SqlNode","node",")","{","if","(","node","instanceof","SqlLiteral",")","{","SqlLiteral","literal","=","(","SqlLiteral",")","node",";","assert","SqlTypeUtil",".","inCharFamily","(","literal",".","getTypeName","(",")",")",";","return","requireNonNull","(","literal",".","value",")",".","toString","(",")",";","}","else","if","(","SqlUtil",".","isLiteralChain","(","node",")",")","{","final","SqlLiteral","literal","=\n","SqlLiteralChainOperator",".","concatenateOperands","(","(","SqlCall",")","node",")",";","assert","SqlTypeUtil",".","inCharFamily","(","literal",".","getTypeName","(",")",")",";","return","requireNonNull","(","literal",".","value",")",".","toString","(",")",";","}","else","if","(","node","instanceof","SqlCall\n","&&","(","(","SqlCall",")","node",")",".","getOperator","(",")","==","SqlStdOperatorTable",".","CAST",")","{","return","stringValue","(","(","(","SqlCall",")","node",")",".","operand","(","0",")",")",";","}","else","{","throw","new","AssertionError","(","\"invalid","string","literal:","\"","+","node",")",";","}"],"docstring_tokens":["Extracts","the","string","value","from","a","string","literal,","a","chain","of","string","literals,","or","a","CAST","of","a","string","literal"],"prompt_tokens":[]}
{"code_tokens":["public","static","SqlLiteral","createBoolean","(","boolean","b,\n","SqlParserPos","pos",")","{","return","b","?","new","SqlLiteral","(","Boolean",".","TRUE,","SqlTypeName",".","BOOLEAN,","pos",")",":","new","SqlLiteral","(","Boolean",".","FALSE,","SqlTypeName",".","BOOLEAN,","pos",")",";"],"docstring_tokens":["Creates","a","boolean","literal"],"prompt_tokens":[]}
{"code_tokens":["public","static","SqlLiteral","createSample","(","SqlSampleSpec","sampleSpec,\n","SqlParserPos","pos",")","{","return","new","SqlLiteral","(","sampleSpec,","SqlTypeName",".","SYMBOL,","pos",")",";"],"docstring_tokens":["Creates","a","literal","which","represents","a","sample","specification"],"prompt_tokens":[]}
{"code_tokens":["public","int","intValue","(","boolean","exact",")","{","switch","(","typeName",")","{","case","DECIMAL:\n","case","DOUBLE:\n","BigDecimal","bd","=","(","BigDecimal",")","requireNonNull","(","value,","\"value\"",")",";","if","(","exact",")","{","try","{","return","bd",".","intValueExact","(",")",";","}","catch","(","ArithmeticException","e",")","{","throw","SqlUtil",".","newContextException","(","getParserPosition","(",")",",\n","RESOURCE",".","numberLiteralOutOfRange","(","bd",".","toString","(",")",")",")",";","}","}","else","{","return","bd",".","intValue","(",")",";","}","default:\n","throw","Util",".","unexpected","(","typeName",")",";","}"],"docstring_tokens":["Returns","the","integer","value","of","this","literal"],"prompt_tokens":[]}
{"code_tokens":["public","long","longValue","(","boolean","exact",")","{","switch","(","typeName",")","{","case","DECIMAL:\n","case","DOUBLE:\n","BigDecimal","bd","=","(","BigDecimal",")","requireNonNull","(","value,","\"value\"",")",";","if","(","exact",")","{","try","{","return","bd",".","longValueExact","(",")",";","}","catch","(","ArithmeticException","e",")","{","throw","SqlUtil",".","newContextException","(","getParserPosition","(",")",",\n","RESOURCE",".","numberLiteralOutOfRange","(","bd",".","toString","(",")",")",")",";","}","}","else","{","return","bd",".","longValue","(",")",";","}","default:\n","throw","Util",".","unexpected","(","typeName",")",";","}"],"docstring_tokens":["Returns","the","long","value","of","this","literal"],"prompt_tokens":[]}
{"code_tokens":["@Deprecated","//","to","be","removed","before","2",".","0\n","public","int","signum","(",")","{","return","castNonNull","(","bigDecimalValue","(",")",")",".","compareTo","(","BigDecimal",".","ZERO",")",";"],"docstring_tokens":["Returns","sign","of","value"],"prompt_tokens":[]}
{"code_tokens":["public","static","SqlIntervalLiteral","createInterval","(","int","sign,\n","String","intervalStr,\n","SqlIntervalQualifier","intervalQualifier,\n","SqlParserPos","pos",")","{","return","new","SqlIntervalLiteral","(","sign,","intervalStr,","intervalQualifier,\n","intervalQualifier",".","typeName","(",")",",","pos",")",";"],"docstring_tokens":["Creates","an","interval","literal"],"prompt_tokens":[]}
{"code_tokens":["public","static","SqlCharStringLiteral","createCharString","(","String","s,\n","SqlParserPos","pos",")","{","//","UnsupportedCharsetException","not","possible\n","return","createCharString","(","s,","null,","pos",")",";"],"docstring_tokens":["Creates","a","string","literal","in","the","system","character","set"],"prompt_tokens":[]}
{"code_tokens":["public","static","SqlCharStringLiteral","createCharString","(","String","s,\n","@Nullable","String","charSet,\n","SqlParserPos","pos",")","{","NlsString","slit","=","new","NlsString","(","s,","charSet,","null",")",";","return","new","SqlCharStringLiteral","(","slit,","pos",")",";"],"docstring_tokens":["Creates","a","string","literal,","with","optional","character-set"],"prompt_tokens":[]}
{"code_tokens":["private","static","void","findRemovableSelfJoins","(","RelMetadataQuery","mq,","LoptMultiJoin","multiJoin",")","{","//","Candidates","for","self-joins","must","be","simple","factors\n","Map<Integer,","RelOptTable>","simpleFactors","=","getSimpleFactors","(","mq,","multiJoin",")",";","\n\n","//","See","if","a","simple","factor","is","repeated","and","therefore","potentially","is\n","//","part","of","a","self-join",".","Restrict","each","factor","to","at","most","one\n","//","self-join",".","final","List<RelOptTable>","repeatedTables","=","new","ArrayList<>","(",")",";","final","Map<Integer,","Integer>","selfJoinPairs","=","new","HashMap<>","(",")",";","@KeyFor","(","\"simpleFactors\"",")","Integer","[]","factors","=\n","new","TreeSet<>","(","simpleFactors",".","keySet","(",")",")",".","toArray","(","new","Integer[0]",")",";","for","(","int","i","=","0",";","i","<","factors",".","length",";","i++",")","{","if","(","repeatedTables",".","contains","(","simpleFactors",".","get","(","factors[i]",")",")",")","{","continue",";","}","for","(","int","j","=","i","+","1",";","j","<","factors",".","length",";","j++",")","{","@KeyFor","(","\"simpleFactors\"",")","int","leftFactor","=","factors[i]",";","@KeyFor","(","\"simpleFactors\"",")","int","rightFactor","=","factors[j]",";","if","(","simpleFactors",".","get","(","leftFactor",")",".","getQualifiedName","(",")",".","equals","(","simpleFactors",".","get","(","rightFactor",")",".","getQualifiedName","(",")",")",")","{","selfJoinPairs",".","put","(","leftFactor,","rightFactor",")",";","repeatedTables",".","add","(","simpleFactors",".","get","(","leftFactor",")",")",";","break",";","}","}","}","\n\n","//","From","the","candidate","self-join","pairs,","determine","if","there","is\n","//","the","appropriate","join","condition","between","the","two","factors","that","will\n","//","allow","the","join","to","be","removed",".","for","(","Integer","factor1",":","selfJoinPairs",".","keySet","(",")",")","{","final","int","factor2","=","selfJoinPairs",".","get","(","factor1",")",";","final","List<RexNode>","selfJoinFilters","=","new","ArrayList<>","(",")",";","for","(","RexNode","filter",":","multiJoin",".","getJoinFilters","(",")",")","{","ImmutableBitSet","joinFactors","=\n","multiJoin",".","getFactorsRefByJoinFilter","(","filter",")",";","if","(","(","joinFactors",".","cardinality","(",")","==","2",")","&&","joinFactors",".","get","(","factor1",")","&&","joinFactors",".","get","(","factor2",")",")","{","selfJoinFilters",".","add","(","filter",")",";","}","}","if","(","(","selfJoinFilters",".","size","(",")",">","0",")","&&","isSelfJoinFilterUnique","(","mq,\n","multiJoin,\n","factor1,\n","factor2,\n","selfJoinFilters",")",")","{","multiJoin",".","addRemovableSelfJoinPair","(","factor1,","factor2",")",";","}","}"],"docstring_tokens":["Locates","pairs","of","joins","that","are","self-joins","where","the","join","can","be","removed","because","the","join","condition","between","the","two","factors","is","an","equality","join","on","unique","keys"],"prompt_tokens":[]}
{"code_tokens":["private","static","boolean","isSelfJoinFilterUnique","(","RelMetadataQuery","mq,\n","LoptMultiJoin","multiJoin,\n","int","leftFactor,\n","int","rightFactor,\n","List<RexNode>","joinFilterList",")","{","RexBuilder","rexBuilder","=\n","multiJoin",".","getMultiJoinRel","(",")",".","getCluster","(",")",".","getRexBuilder","(",")",";","RelNode","leftRel","=","multiJoin",".","getJoinFactor","(","leftFactor",")",";","RelNode","rightRel","=","multiJoin",".","getJoinFactor","(","rightFactor",")",";","RexNode","joinFilters","=\n","RexUtil",".","composeConjunction","(","rexBuilder,","joinFilterList",")",";","\n\n","//","Adjust","the","offsets","in","the","filter","by","shifting","the","left","factor\n","//","to","the","left","and","shifting","the","right","factor","to","the","left","and","then","back\n","//","to","the","right","by","the","number","of","fields","in","the","left\n","int","[]","adjustments","=","new","int[multiJoin",".","getNumTotalFields","(",")","]",";","int","leftAdjust","=","multiJoin",".","getJoinStart","(","leftFactor",")",";","int","nLeftFields","=","leftRel",".","getRowType","(",")",".","getFieldCount","(",")",";","for","(","int","i","=","0",";","i","<","nLeftFields",";","i++",")","{","adjustments[leftAdjust","+","i]","=","-leftAdjust",";","}","int","rightAdjust","=","multiJoin",".","getJoinStart","(","rightFactor",")",";","for","(","int","i","=","0",";","i","<","rightRel",".","getRowType","(",")",".","getFieldCount","(",")",";","i++",")","{","adjustments[rightAdjust","+","i]","=","-rightAdjust","+","nLeftFields",";","}","joinFilters","=\n","joinFilters",".","accept","(","new","RelOptUtil",".","RexInputConverter","(","rexBuilder,\n","multiJoin",".","getMultiJoinFields","(",")",",\n","leftRel",".","getRowType","(",")",".","getFieldList","(",")",",\n","rightRel",".","getRowType","(",")",".","getFieldList","(",")",",\n","adjustments",")",")",";","\n\n","return","areSelfJoinKeysUnique","(","mq,","leftRel,","rightRel,","joinFilters",")",";"],"docstring_tokens":["Determines","if","the","equality","join","filters","between","two","factors","that","map","to","the","same","table","consist","of","unique,","identical","keys"],"prompt_tokens":[]}
{"code_tokens":["private","static","void","findBestOrderings","(","RelMetadataQuery","mq,\n","RelBuilder","relBuilder,\n","LoptMultiJoin","multiJoin,\n","LoptSemiJoinOptimizer","semiJoinOpt,\n","RelOptRuleCall","call",")","{","final","List<RelNode>","plans","=","new","ArrayList<>","(",")",";","\n\n","final","List<String>","fieldNames","=\n","multiJoin",".","getMultiJoinRel","(",")",".","getRowType","(",")",".","getFieldNames","(",")",";","\n\n","//","generate","the","N","join","orderings\n","for","(","int","i","=","0",";","i","<","multiJoin",".","getNumJoinFactors","(",")",";","i++",")","{","//","first","factor","cannot","be","null","generating\n","if","(","multiJoin",".","isNullGenerating","(","i",")",")","{","continue",";","}","LoptJoinTree","joinTree","=\n","createOrdering","(","mq,\n","relBuilder,\n","multiJoin,\n","semiJoinOpt,\n","i",")",";","if","(","joinTree","==","null",")","{","continue",";","}","\n\n","RelNode","newProject","=\n","createTopProject","(","call",".","builder","(",")",",","multiJoin,","joinTree,","fieldNames",")",";","plans",".","add","(","newProject",")",";","}","\n\n","//","transform","the","selected","plans",";","note","that","we","wait","till","then","the","end","to\n","//","transform","everything","so","any","intermediate","RelNodes","we","create","are","not\n","//","converted","to","RelSubsets","The","HEP","planner","will","choose","the","join","subtree\n","//","with","the","best","cumulative","cost",".","Volcano","planner","keeps","the","alternative\n","//","join","subtrees","and","cost","the","final","plan","to","pick","the","best","one",".","for","(","RelNode","plan",":","plans",")","{","call",".","transformTo","(","plan",")",";","}"],"docstring_tokens":["Generates","N","optimal","join","orderings"],"prompt_tokens":[]}
{"code_tokens":["private","static","@Nullable","Double","computeJoinCardinality","(","RelMetadataQuery","mq,\n","LoptMultiJoin","multiJoin,\n","LoptSemiJoinOptimizer","semiJoinOpt,\n","LoptJoinTree","joinTree,\n","List<RexNode>","filters,\n","int","factor",")","{","final","ImmutableBitSet","childFactors","=\n","ImmutableBitSet",".","builder","(",")",".","addAll","(","joinTree",".","getTreeOrder","(",")",")",".","set","(","factor",")",".","build","(",")",";","\n\n","int","factorStart","=","multiJoin",".","getJoinStart","(","factor",")",";","int","nFields","=","multiJoin",".","getNumFieldsInJoinFactor","(","factor",")",";","final","ImmutableBitSet",".","Builder","joinKeys","=","ImmutableBitSet",".","builder","(",")",";","\n\n","//","first","loop","through","the","inner","join","filters,","picking","out","the","ones\n","//","that","reference","only","the","factors","in","either","the","join","tree","or","the\n","//","factor","that","will","be","added\n","setFactorJoinKeys","(","multiJoin,\n","filters,\n","childFactors,\n","factorStart,\n","nFields,\n","joinKeys",")",";","\n\n","//","then","loop","through","the","outer","join","filters","where","the","factor","being\n","//","added","is","the","null","generating","factor","in","the","outer","join\n","setFactorJoinKeys","(","multiJoin,\n","RelOptUtil",".","conjunctions","(","multiJoin",".","getOuterJoinCond","(","factor",")",")",",\n","childFactors,\n","factorStart,\n","nFields,\n","joinKeys",")",";","\n\n","//","if","the","join","tree","doesn't","contain","all","the","necessary","factors","in\n","//","any","of","the","join","filters,","then","joinKeys","will","be","empty,","so","return\n","//","null","in","that","case\n","if","(","joinKeys",".","isEmpty","(",")",")","{","return","null",";","}","else","{","return","mq",".","getDistinctRowCount","(","semiJoinOpt",".","getChosenSemiJoin","(","factor",")",",\n","joinKeys",".","build","(",")",",","null",")",";","}"],"docstring_tokens":["Computes","the","cardinality","of","the","join","columns","from","a","particular","factor,","when","that","factor","is","joined","with","another","join","tree"],"prompt_tokens":[]}
{"code_tokens":["private","static","@Nullable","LoptJoinTree","createOrdering","(","RelMetadataQuery","mq,\n","RelBuilder","relBuilder,\n","LoptMultiJoin","multiJoin,\n","LoptSemiJoinOptimizer","semiJoinOpt,\n","int","firstFactor",")","{","LoptJoinTree","joinTree","=","null",";","final","int","nJoinFactors","=","multiJoin",".","getNumJoinFactors","(",")",";","final","BitSet","factorsToAdd","=","BitSets",".","range","(","0,","nJoinFactors",")",";","final","BitSet","factorsAdded","=","new","BitSet","(","nJoinFactors",")",";","final","List<RexNode>","filtersToAdd","=\n","new","ArrayList<>","(","multiJoin",".","getJoinFilters","(",")",")",";","\n\n","int","prevFactor","=","-1",";","while","(","factorsToAdd",".","cardinality","(",")",">","0",")","{","int","nextFactor",";","boolean","selfJoin","=","false",";","if","(","factorsAdded",".","cardinality","(",")","==","0",")","{","nextFactor","=","firstFactor",";","}","else","{","//","If","the","factor","just","added","is","part","of","a","removable","self-join\n","//","and","the","other","half","of","the","self-join","hasn't","been","added","yet,\n","//","then","add","it","next",".","Otherwise,","look","for","the","optimal","factor\n","//","to","add","next",".","Integer","selfJoinFactor","=\n","multiJoin",".","getOtherSelfJoinFactor","(","prevFactor",")",";","if","(","(","selfJoinFactor","!=","null",")","&&","!factorsAdded",".","get","(","selfJoinFactor",")",")","{","nextFactor","=","selfJoinFactor",";","selfJoin","=","true",";","}","else","{","nextFactor","=\n","getBestNextFactor","(","mq,\n","multiJoin,\n","factorsToAdd,\n","factorsAdded,\n","semiJoinOpt,\n","joinTree,\n","filtersToAdd",")",";","}","}","\n\n","//","add","the","factor",";","pass","in","a","bitmap","representing","the","factors\n","//","this","factor","joins","with","that","have","already","been","added","to\n","//","the","tree\n","BitSet","factorsNeeded","=\n","multiJoin",".","getFactorsRefByFactor","(","nextFactor",")",".","toBitSet","(",")",";","if","(","multiJoin",".","isNullGenerating","(","nextFactor",")",")","{","factorsNeeded",".","or","(","multiJoin",".","getOuterJoinFactors","(","nextFactor",")",".","toBitSet","(",")",")",";","}","factorsNeeded",".","and","(","factorsAdded",")",";","joinTree","=\n","addFactorToTree","(","mq,\n","relBuilder,\n","multiJoin,\n","semiJoinOpt,\n","joinTree,\n","nextFactor,\n","factorsNeeded,\n","filtersToAdd,\n","selfJoin",")",";","if","(","joinTree","==","null",")","{","return","null",";","}","factorsToAdd",".","clear","(","nextFactor",")",";","factorsAdded",".","set","(","nextFactor",")",";","prevFactor","=","nextFactor",";","}","\n\n","assert","filtersToAdd",".","size","(",")","==","0",";","return","joinTree",";"],"docstring_tokens":["Generates","a","join","tree","with","a","specific","factor","as","the","first","factor","in","the","join","tree"],"prompt_tokens":[]}
{"code_tokens":["private","static","int","getBestNextFactor","(","RelMetadataQuery","mq,\n","LoptMultiJoin","multiJoin,\n","BitSet","factorsToAdd,\n","BitSet","factorsAdded,\n","LoptSemiJoinOptimizer","semiJoinOpt,\n","@Nullable","LoptJoinTree","joinTree,\n","List<RexNode>","filtersToAdd",")","{","//","iterate","through","the","remaining","factors","and","determine","the\n","//","best","one","to","add","next\n","int","nextFactor","=","-1",";","int","bestWeight","=","0",";","Double","bestCardinality","=","null",";","int","[][]","factorWeights","=","multiJoin",".","getFactorWeights","(",")",";","for","(","int","factor",":","BitSets",".","toIter","(","factorsToAdd",")",")","{","//","if","the","factor","corresponds","to","a","dimension","table","whose\n","//","join","we","can","remove,","make","sure","the","the","corresponding","fact\n","//","table","is","in","the","current","join","tree\n","Integer","factIdx","=","multiJoin",".","getJoinRemovalFactor","(","factor",")",";","if","(","factIdx","!=","null",")","{","if","(","!factorsAdded",".","get","(","factIdx",")",")","{","continue",";","}","}","\n\n","//","can't","add","a","null-generating","factor","if","its","dependent,\n","//","non-null","generating","factors","haven't","been","added","yet\n","if","(","multiJoin",".","isNullGenerating","(","factor",")","&&","!BitSets",".","contains","(","factorsAdded,\n","multiJoin",".","getOuterJoinFactors","(","factor",")",")",")","{","continue",";","}","\n\n","//","determine","the","best","weight","between","the","current","factor\n","//","under","consideration","and","the","factors","that","have","already\n","//","been","added","to","the","tree\n","int","dimWeight","=","0",";","for","(","int","prevFactor",":","BitSets",".","toIter","(","factorsAdded",")",")","{","int[]","factorWeight","=","requireNonNull","(","factorWeights,","\"factorWeights\"",")","[prevFactor]",";","if","(","factorWeight[factor]",">","dimWeight",")","{","dimWeight","=","factorWeight[factor]",";","}","}","\n\n","//","only","compute","the","join","cardinality","if","we","know","that\n","//","this","factor","joins","with","some","part","of","the","current","join\n","//","tree","and","is","potentially","better","than","other","factors\n","//","already","considered\n","Double","cardinality","=","null",";","if","(","(","dimWeight",">","0",")","&&","(","(","dimWeight",">","bestWeight",")","||","(","dimWeight","==","bestWeight",")",")",")","{","cardinality","=\n","computeJoinCardinality","(","mq,\n","multiJoin,\n","semiJoinOpt,\n","requireNonNull","(","joinTree,","\"joinTree\"",")",",\n","filtersToAdd,\n","factor",")",";","}","\n\n","//","if","two","factors","have","the","same","weight,","pick","the","one\n","//","with","the","higher","cardinality","join","key,","relative","to\n","//","the","join","being","considered\n","if","(","(","dimWeight",">","bestWeight",")","||","(","(","dimWeight","==","bestWeight",")","&&","(","(","bestCardinality","==","null",")","||","(","(","cardinality","!=","null",")","&&","(","cardinality",">","bestCardinality",")",")",")",")",")","{","nextFactor","=","factor",";","bestWeight","=","dimWeight",";","bestCardinality","=","cardinality",";","}","}","\n\n","return","nextFactor",";"],"docstring_tokens":["Determines","the","best","factor","to","be","added","next","into","a","join","tree"],"prompt_tokens":[]}
{"code_tokens":["private","static","@Nullable","LoptJoinTree","pushDownFactor","(","RelMetadataQuery","mq,\n","RelBuilder","relBuilder,\n","LoptMultiJoin","multiJoin,\n","LoptSemiJoinOptimizer","semiJoinOpt,\n","LoptJoinTree","joinTree,\n","int","factorToAdd,\n","BitSet","factorsNeeded,\n","List<RexNode>","filtersToAdd,\n","boolean","selfJoin",")","{","//","pushdown","option","only","works","if","we","already","have","a","join","tree\n","if","(","!isJoinTree","(","joinTree",".","getJoinTree","(",")",")",")","{","return","null",";","}","int","childNo","=","-1",";","LoptJoinTree","left","=","joinTree",".","getLeft","(",")",";","LoptJoinTree","right","=","joinTree",".","getRight","(",")",";","Join","joinRel","=","(","Join",")","joinTree",".","getJoinTree","(",")",";","JoinRelType","joinType","=","joinRel",".","getJoinType","(",")",";","\n\n","//","can't","push","factors","pass","self-joins","because","in","order","to","later","remove\n","//","them,","we","need","to","keep","the","factors","together\n","if","(","joinTree",".","isRemovableSelfJoin","(",")",")","{","return","null",";","}","\n\n","//","If","there","are","no","constraints","as","to","which","side","the","factor","must\n","//","be","pushed,","arbitrarily","push","to","the","left",".","In","the","case","of","a\n","//","self-join,","always","push","to","the","input","that","contains","the","other\n","//","half","of","the","self-join",".","if","(","selfJoin",")","{","BitSet","selfJoinFactor","=","new","BitSet","(","multiJoin",".","getNumJoinFactors","(",")",")",";","Integer","factor","=","requireNonNull","(","multiJoin",".","getOtherSelfJoinFactor","(","factorToAdd",")",",\n","(",")","->","\"multiJoin",".","getOtherSelfJoinFactor","(","\"","+","factorToAdd","+","\"",")","is","null\"",")",";","selfJoinFactor",".","set","(","factor",")",";","if","(","multiJoin",".","hasAllFactors","(","left,","selfJoinFactor",")",")","{","childNo","=","0",";","}","else","{","assert","multiJoin",".","hasAllFactors","(","right,","selfJoinFactor",")",";","childNo","=","1",";","}","}","else","if","(","(","factorsNeeded",".","cardinality","(",")","==","0",")","&&","!joinType",".","generatesNullsOnLeft","(",")",")","{","childNo","=","0",";","}","else","{","//","push","to","the","left","if","the","LHS","contains","all","factors","that","the\n","//","current","factor","needs","and","that","side","is","not","null-generating",";","//","same","check","for","RHS\n","if","(","multiJoin",".","hasAllFactors","(","left,","factorsNeeded",")","&&","!joinType",".","generatesNullsOnLeft","(",")",")","{","childNo","=","0",";","}","else","if","(","multiJoin",".","hasAllFactors","(","right,","factorsNeeded",")","&&","!joinType",".","generatesNullsOnRight","(",")",")","{","childNo","=","1",";","}","//","if","it","couldn't","be","pushed","down","to","either","side,","then","it","can\n","//","only","be","put","on","top\n","}","if","(","childNo","==","-1",")","{","return","null",";","}","\n\n","//","remember","the","original","join","order","before","the","pushdown","so","we","can\n","//","appropriately","adjust","any","filters","already","attached","to","the","join\n","//","node\n","final","List<Integer>","origJoinOrder","=","joinTree",".","getTreeOrder","(",")",";","\n\n","//","recursively","pushdown","the","factor\n","LoptJoinTree","subTree","=","(","childNo","==","0",")","?","left",":","right",";","subTree","=\n","addFactorToTree","(","mq,\n","relBuilder,\n","multiJoin,\n","semiJoinOpt,\n","subTree,\n","factorToAdd,\n","factorsNeeded,\n","filtersToAdd,\n","selfJoin",")",";","\n\n","if","(","childNo","==","0",")","{","left","=","subTree",";","}","else","{","right","=","subTree",";","}","\n\n","//","adjust","the","join","condition","from","the","original","join","tree","to","reflect\n","//","pushdown","of","the","new","factor","as","well","as","any","swapping","that","may","have\n","//","been","done","during","the","pushdown\n","RexNode","newCondition","=\n","(","(","Join",")","joinTree",".","getJoinTree","(",")",")",".","getCondition","(",")",";","newCondition","=\n","adjustFilter","(","multiJoin,\n","requireNonNull","(","left,","\"left\"",")",",\n","requireNonNull","(","right,","\"right\"",")",",\n","newCondition,\n","factorToAdd,\n","origJoinOrder,\n","joinTree",".","getJoinTree","(",")",".","getRowType","(",")",".","getFieldList","(",")",")",";","\n\n","//","determine","if","additional","filters","apply","as","a","result","of","adding","the\n","//","new","factor,","provided","this","isn't","a","left","or","right","outer","join",";","for\n","//","those","cases,","the","additional","filters","will","be","added","on","top","of","the\n","//","join","in","createJoinSubtree\n","if","(","(","joinType","!=","JoinRelType",".","LEFT",")","&&","(","joinType","!=","JoinRelType",".","RIGHT",")",")","{","RexNode","condition","=\n","addFilters","(","multiJoin,\n","left,\n","-1,\n","right,\n","filtersToAdd,\n","true",")",";","RexBuilder","rexBuilder","=\n","multiJoin",".","getMultiJoinRel","(",")",".","getCluster","(",")",".","getRexBuilder","(",")",";","newCondition","=\n","RelOptUtil",".","andJoinFilters","(","rexBuilder,\n","newCondition,\n","condition",")",";","}","\n\n","//","create","the","new","join","tree","with","the","factor","pushed","down\n","return","createJoinSubtree","(","mq,\n","relBuilder,\n","multiJoin,\n","left,\n","right,\n","newCondition,\n","joinType,\n","filtersToAdd,\n","false,\n","false",")",";"],"docstring_tokens":["Creates","a","join","tree","where","the","new","factor","is","pushed","down","one","of","the","operands","of","the","current","join","tree"],"prompt_tokens":[]}
{"code_tokens":["private","static","@Nullable","LoptJoinTree","addToTop","(","RelMetadataQuery","mq,\n","RelBuilder","relBuilder,\n","LoptMultiJoin","multiJoin,\n","LoptSemiJoinOptimizer","semiJoinOpt,\n","LoptJoinTree","joinTree,\n","int","factorToAdd,\n","List<RexNode>","filtersToAdd,\n","boolean","selfJoin",")","{","//","self-joins","can","never","be","created","at","the","top","of","an","existing\n","//","join","tree","because","it","needs","to","be","paired","directly","with","the\n","//","other","self-join","factor\n","if","(","selfJoin","&&","isJoinTree","(","joinTree",".","getJoinTree","(",")",")",")","{","return","null",";","}","\n\n","//","if","the","factor","being","added","is","null-generating,","create","the","join\n","//","as","a","left","outer","join","since","it's","being","added","to","the","RHS","side","of\n","//","the","join",";","createJoinSubTree","may","swap","the","inputs","and","therefore\n","//","convert","the","left","outer","join","to","a","right","outer","join",";","if","the","original\n","//","MultiJoin","was","a","full","outer","join,","these","should","be","the","only\n","//","factors","in","the","join,","so","create","the","join","as","a","full","outer","join\n","JoinRelType","joinType",";","if","(","multiJoin",".","getMultiJoinRel","(",")",".","isFullOuterJoin","(",")",")","{","assert","multiJoin",".","getNumJoinFactors","(",")","==","2",";","joinType","=","JoinRelType",".","FULL",";","}","else","if","(","multiJoin",".","isNullGenerating","(","factorToAdd",")",")","{","joinType","=","JoinRelType",".","LEFT",";","}","else","{","joinType","=","JoinRelType",".","INNER",";","}","\n\n","LoptJoinTree","rightTree","=\n","new","LoptJoinTree","(","semiJoinOpt",".","getChosenSemiJoin","(","factorToAdd",")",",\n","factorToAdd",")",";","\n\n","//","in","the","case","of","a","left","or","right","outer","join,","use","the","specific\n","//","outer","join","condition\n","RexNode","condition",";","if","(","(","joinType","==","JoinRelType",".","LEFT",")","||","(","joinType","==","JoinRelType",".","RIGHT",")",")","{","condition","=","requireNonNull","(","multiJoin",".","getOuterJoinCond","(","factorToAdd",")",",\n","\"multiJoin",".","getOuterJoinCond","(","factorToAdd",")","\"",")",";","}","else","{","condition","=\n","addFilters","(","multiJoin,\n","joinTree,\n","-1,\n","rightTree,\n","filtersToAdd,\n","false",")",";","}","\n\n","return","createJoinSubtree","(","mq,\n","relBuilder,\n","multiJoin,\n","joinTree,\n","rightTree,\n","condition,\n","joinType,\n","filtersToAdd,\n","true,\n","selfJoin",")",";"],"docstring_tokens":["Creates","a","join","tree","with","the","new","factor","added","to","the","top","of","the","tree"],"prompt_tokens":[]}
{"code_tokens":["private","static","RexNode","adjustFilter","(","LoptMultiJoin","multiJoin,\n","LoptJoinTree","left,\n","LoptJoinTree","right,\n","RexNode","condition,\n","int","factorAdded,\n","List<Integer>","origJoinOrder,\n","List<RelDataTypeField>","origFields",")","{","final","List<Integer>","newJoinOrder","=","new","ArrayList<>","(",")",";","left",".","getTreeOrder","(","newJoinOrder",")",";","right",".","getTreeOrder","(","newJoinOrder",")",";","\n\n","int","totalFields","=\n","left",".","getJoinTree","(",")",".","getRowType","(",")",".","getFieldCount","(",")","+","right",".","getJoinTree","(",")",".","getRowType","(",")",".","getFieldCount","(",")","-","multiJoin",".","getNumFieldsInJoinFactor","(","factorAdded",")",";","int","[]","adjustments","=","new","int[totalFields]",";","\n\n","//","go","through","each","factor","and","adjust","relative","to","the","original\n","//","join","order\n","boolean","needAdjust","=","false",";","int","nFieldsNew","=","0",";","for","(","int","newPos","=","0",";","newPos","<","newJoinOrder",".","size","(",")",";","newPos++",")","{","int","nFieldsOld","=","0",";","\n\n","//","no","need","to","make","any","adjustments","on","the","newly","added","factor\n","int","factor","=","newJoinOrder",".","get","(","newPos",")",";","if","(","factor","!=","factorAdded",")","{","//","locate","the","position","of","the","factor","in","the","original","join\n","//","ordering\n","for","(","int","pos",":","origJoinOrder",")","{","if","(","factor","==","pos",")","{","break",";","}","nFieldsOld","+=","multiJoin",".","getNumFieldsInJoinFactor","(","pos",")",";","}","\n\n","//","fill","in","the","adjustment","array","for","this","factor\n","if","(","remapJoinReferences","(","multiJoin,\n","factor,\n","newJoinOrder,\n","newPos,\n","adjustments,\n","nFieldsOld,\n","nFieldsNew,\n","false",")",")","{","needAdjust","=","true",";","}","}","nFieldsNew","+=","multiJoin",".","getNumFieldsInJoinFactor","(","factor",")",";","}","\n\n","if","(","needAdjust",")","{","RexBuilder","rexBuilder","=\n","multiJoin",".","getMultiJoinRel","(",")",".","getCluster","(",")",".","getRexBuilder","(",")",";","condition","=\n","condition",".","accept","(","new","RelOptUtil",".","RexInputConverter","(","rexBuilder,\n","origFields,\n","left",".","getJoinTree","(",")",".","getRowType","(",")",".","getFieldList","(",")",",\n","right",".","getJoinTree","(",")",".","getRowType","(",")",".","getFieldList","(",")",",\n","adjustments",")",")",";","}","\n\n","return","condition",";"],"docstring_tokens":["Adjusts","a","filter","to","reflect","a","newly","added","factor","in","the","middle","of","an","existing","join","tree"],"prompt_tokens":[]}
{"code_tokens":["private","static","RexNode","swapFilter","(","RexBuilder","rexBuilder,\n","LoptMultiJoin","multiJoin,\n","LoptJoinTree","origLeft,\n","LoptJoinTree","origRight,\n","RexNode","condition",")","{","int","nFieldsOnLeft","=\n","origLeft",".","getJoinTree","(",")",".","getRowType","(",")",".","getFieldCount","(",")",";","int","nFieldsOnRight","=\n","origRight",".","getJoinTree","(",")",".","getRowType","(",")",".","getFieldCount","(",")",";","int","[]","adjustments","=","new","int[nFieldsOnLeft","+","nFieldsOnRight]",";","\n\n","for","(","int","i","=","0",";","i","<","nFieldsOnLeft",";","i++",")","{","adjustments[i]","=","nFieldsOnRight",";","}","for","(","int","i","=","nFieldsOnLeft",";","i","<","(","nFieldsOnLeft","+","nFieldsOnRight",")",";","i++",")","{","adjustments[i]","=","-nFieldsOnLeft",";","}","\n\n","condition","=\n","condition",".","accept","(","new","RelOptUtil",".","RexInputConverter","(","rexBuilder,\n","multiJoin",".","getJoinFields","(","origLeft,","origRight",")",",\n","multiJoin",".","getJoinFields","(","origRight,","origLeft",")",",\n","adjustments",")",")",";","\n\n","return","condition",";"],"docstring_tokens":["Adjusts","a","filter","to","reflect","swapping","of","join","inputs"],"prompt_tokens":[]}
{"code_tokens":["private","static","RexNode","rewriteSome","(","RexSubQuery","e,","Set<CorrelationId>","variablesSet,\n","RelBuilder","builder",")","{","//","Most","general","case,","where","the","left","and","right","keys","might","have","nulls,","and\n","//","caller","requires","3-valued","logic","return",".","//\n","//","select","e",".","deptno,","e",".","deptno","<","some","(","select","deptno","from","emp",")","as","v\n","//","from","emp","as","e\n","//\n","//","becomes\n","//\n","//","select","e",".","deptno,\n","//","case\n","//","when","q",".","c","=","0","then","false","//","sub-query","is","empty\n","//","when","(","e",".","deptno","<","q",".","m",")","is","true","then","true\n","//","when","q",".","c",">","q",".","d","then","unknown","//","sub-query","has","at","least","one","null\n","//","else","e",".","deptno","<","q",".","m\n","//","end","as","v\n","//","from","emp","as","e\n","//","cross","join","(","//","select","max","(","deptno",")","as","m,","count","(","*",")","as","c,","count","(","deptno",")","as","d\n","//","from","emp",")","as","q\n","//\n","final","SqlQuantifyOperator","op","=","(","SqlQuantifyOperator",")","e",".","op",";","switch","(","op",".","comparisonKind",")","{","case","GREATER_THAN_OR_EQUAL:\n","case","LESS_THAN_OR_EQUAL:\n","case","LESS_THAN:\n","case","GREATER_THAN:\n","case","NOT_EQUALS:\n","break",";","\n\n","default:\n","//","\"SOME","=\"","should","have","been","rewritten","into","IN",".","throw","new","AssertionError","(","\"unexpected","\"","+","op",")",";","}","\n\n","final","RexNode","caseRexNode",";","final","RexNode","literalFalse","=","builder",".","literal","(","false",")",";","final","RexNode","literalTrue","=","builder",".","literal","(","true",")",";","final","RexLiteral","literalUnknown","=\n","builder",".","getRexBuilder","(",")",".","makeNullLiteral","(","literalFalse",".","getType","(",")",")",";","\n\n","final","SqlAggFunction","minMax","=","op",".","comparisonKind","==","SqlKind",".","GREATER_THAN\n","||","op",".","comparisonKind","==","SqlKind",".","GREATER_THAN_OR_EQUAL\n","?","SqlStdOperatorTable",".","MIN\n",":","SqlStdOperatorTable",".","MAX",";","\n\n","if","(","variablesSet",".","isEmpty","(",")",")","{","switch","(","op",".","comparisonKind",")","{","case","GREATER_THAN_OR_EQUAL:\n","case","LESS_THAN_OR_EQUAL:\n","case","LESS_THAN:\n","case","GREATER_THAN:\n","//","for","non-correlated","case","queries","such","as\n","//","select","e",".","deptno,","e",".","deptno","<","some","(","select","deptno","from","emp",")","as","v\n","//","from","emp","as","e\n","//\n","//","becomes\n","//\n","//","select","e",".","deptno,\n","//","case\n","//","when","q",".","c","=","0","then","false","//","sub-query","is","empty\n","//","when","(","e",".","deptno","<","q",".","m",")","is","true","then","true\n","//","when","q",".","c",">","q",".","d","then","unknown","//","sub-query","has","at","least","one","null\n","//","else","e",".","deptno","<","q",".","m\n","//","end","as","v\n","//","from","emp","as","e\n","//","cross","join","(","//","select","max","(","deptno",")","as","m,","count","(","*",")","as","c,","count","(","deptno",")","as","d\n","//","from","emp",")","as","q\n","builder",".","push","(","e",".","rel",")",".","aggregate","(","builder",".","groupKey","(",")",",\n","builder",".","aggregateCall","(","minMax,","builder",".","field","(","0",")",")",".","as","(","\"m\"",")",",\n","builder",".","count","(","false,","\"c\"",")",",\n","builder",".","count","(","false,","\"d\",","builder",".","field","(","0",")",")",")",".","as","(","\"q\"",")",".","join","(","JoinRelType",".","INNER",")",";","caseRexNode","=","builder",".","call","(","SqlStdOperatorTable",".","CASE,\n","builder",".","equals","(","builder",".","field","(","\"q\",","\"c\"",")",",","builder",".","literal","(","0",")",")",",\n","literalFalse,\n","builder",".","call","(","SqlStdOperatorTable",".","IS_TRUE,\n","builder",".","call","(","RexUtil",".","op","(","op",".","comparisonKind",")",",\n","e",".","operands",".","get","(","0",")",",","builder",".","field","(","\"q\",","\"m\"",")",")",")",",\n","literalTrue,\n","builder",".","greaterThan","(","builder",".","field","(","\"q\",","\"c\"",")",",\n","builder",".","field","(","\"q\",","\"d\"",")",")",",\n","literalUnknown,\n","builder",".","call","(","RexUtil",".","op","(","op",".","comparisonKind",")",",\n","e",".","operands",".","get","(","0",")",",","builder",".","field","(","\"q\",","\"m\"",")",")",")",";","break",";","\n\n","case","NOT_EQUALS:\n","//","for","non-correlated","case","queries","such","as\n","//","select","e",".","deptno,","e",".","deptno","<>","some","(","select","deptno","from","emp",")","as","v\n","//","from","emp","as","e\n","//\n","//","becomes\n","//\n","//","select","e",".","deptno,\n","//","case\n","//","when","q",".","c","=","0","then","false","//","sub-query","is","empty\n","//","when","e",".","deptno","is","null","then","unknown\n","//","when","q",".","c","<>","q",".","d","&&","q",".","d","<=","1","then","e",".","deptno","!=","m","||","unknown\n","//","when","q",".","d","=","1\n","//","then","e",".","deptno","!=","m","//","sub-query","has","the","distinct","result\n","//","else","true\n","//","end","as","v\n","//","from","emp","as","e\n","//","cross","join","(","//","select","count","(","*",")","as","c,","count","(","deptno",")","as","d,","max","(","deptno",")","as","m\n","//","from","(","select","distinct","deptno","from","emp",")",")","as","q\n","builder",".","push","(","e",".","rel",")",";","builder",".","distinct","(",")",".","aggregate","(","builder",".","groupKey","(",")",",\n","builder",".","count","(","false,","\"c\"",")",",\n","builder",".","count","(","false,","\"d\",","builder",".","field","(","0",")",")",",\n","builder",".","max","(","builder",".","field","(","0",")",")",".","as","(","\"m\"",")",")",".","as","(","\"q\"",")",".","join","(","JoinRelType",".","INNER",")",";","caseRexNode","=","builder",".","call","(","SqlStdOperatorTable",".","CASE,\n","builder",".","equals","(","builder",".","field","(","\"c\"",")",",","builder",".","literal","(","0",")",")",",\n","literalFalse,\n","builder",".","isNull","(","e",".","getOperands","(",")",".","get","(","0",")",")",",\n","literalUnknown,\n","builder",".","and","(","builder",".","notEquals","(","builder",".","field","(","\"d\"",")",",","builder",".","field","(","\"c\"",")",")",",\n","builder",".","lessThanOrEqual","(","builder",".","field","(","\"d\"",")",",\n","builder",".","literal","(","1",")",")",")",",\n","builder",".","or","(","builder",".","notEquals","(","e",".","operands",".","get","(","0",")",",","builder",".","field","(","\"q\",","\"m\"",")",")",",\n","literalUnknown",")",",\n","builder",".","equals","(","builder",".","field","(","\"d\"",")",",","builder",".","literal","(","1",")",")",",\n","builder",".","notEquals","(","e",".","operands",".","get","(","0",")",",","builder",".","field","(","\"q\",","\"m\"",")",")",",\n","literalTrue",")",";","break",";","\n\n","default:\n","throw","new","AssertionError","(","\"not","possible","-","per","above","check\"",")",";","}","}","else","{","final","String","indicator","=","\"trueLiteral\"",";","final","List<RexNode>","parentQueryFields","=","new","ArrayList<>","(",")",";","switch","(","op",".","comparisonKind",")","{","case","GREATER_THAN_OR_EQUAL:\n","case","LESS_THAN_OR_EQUAL:\n","case","LESS_THAN:\n","case","GREATER_THAN:\n","//","for","correlated","case","queries","such","as\n","//\n","//","select","e",".","deptno,","e",".","deptno","<","some","(","//","select","deptno","from","emp","where","emp",".","name","=","e",".","name",")","as","v\n","//","from","emp","as","e\n","//\n","//","becomes\n","//\n","//","select","e",".","deptno,\n","//","case\n","//","when","indicator","is","null","then","false","//","sub-query","is","empty","for","corresponding","corr","value\n","//","when","q",".","c","=","0","then","false","//","sub-query","is","empty\n","//","when","(","e",".","deptno","<","q",".","m",")","is","true","then","true\n","//","when","q",".","c",">","q",".","d","then","unknown","//","sub-query","has","at","least","one","null\n","//","else","e",".","deptno","<","q",".","m\n","//","end","as","v\n","//","from","emp","as","e\n","//","left","outer","join","(","//","select","name,","max","(","deptno",")","as","m,","count","(","*",")","as","c,","count","(","deptno",")","as","d,\n","//","\"alwaysTrue\"","as","indicator\n","//","from","emp","group","by","name",")","as","q","on","e",".","name","=","q",".","name\n","builder",".","push","(","e",".","rel",")",".","aggregate","(","builder",".","groupKey","(",")",",\n","builder",".","aggregateCall","(","minMax,","builder",".","field","(","0",")",")",".","as","(","\"m\"",")",",\n","builder",".","count","(","false,","\"c\"",")",",\n","builder",".","count","(","false,","\"d\",","builder",".","field","(","0",")",")",")",";","\n\n","parentQueryFields",".","addAll","(","builder",".","fields","(",")",")",";","parentQueryFields",".","add","(","builder",".","alias","(","literalTrue,","indicator",")",")",";","builder",".","project","(","parentQueryFields",")",".","as","(","\"q\"",")",";","builder",".","join","(","JoinRelType",".","LEFT,","literalTrue,","variablesSet",")",";","caseRexNode","=","builder",".","call","(","SqlStdOperatorTable",".","CASE,\n","builder",".","isNull","(","builder",".","field","(","\"q\",","indicator",")",")",",\n","literalFalse,\n","builder",".","equals","(","builder",".","field","(","\"q\",","\"c\"",")",",","builder",".","literal","(","0",")",")",",\n","literalFalse,\n","builder",".","call","(","SqlStdOperatorTable",".","IS_TRUE,\n","builder",".","call","(","RexUtil",".","op","(","op",".","comparisonKind",")",",\n","e",".","operands",".","get","(","0",")",",","builder",".","field","(","\"q\",","\"m\"",")",")",")",",\n","literalTrue,\n","builder",".","greaterThan","(","builder",".","field","(","\"q\",","\"c\"",")",",\n","builder",".","field","(","\"q\",","\"d\"",")",")",",\n","literalUnknown,\n","builder",".","call","(","RexUtil",".","op","(","op",".","comparisonKind",")",",\n","e",".","operands",".","get","(","0",")",",","builder",".","field","(","\"q\",","\"m\"",")",")",")",";","break",";","\n\n","case","NOT_EQUALS:\n","//","for","correlated","case","queries","such","as\n","//\n","//","select","e",".","deptno,","e",".","deptno","<>","some","(","//","select","deptno","from","emp","where","emp",".","name","=","e",".","name",")","as","v\n","//","from","emp","as","e\n","//\n","//","becomes\n","//\n","//","select","e",".","deptno,\n","//","case\n","//","when","indicator","is","null\n","//","then","false","//","sub-query","is","empty","for","corresponding","corr","value\n","//","when","q",".","c","=","0","then","false","//","sub-query","is","empty\n","//","when","e",".","deptno","is","null","then","unknown\n","//","when","q",".","c","<>","q",".","d","&&","q",".","d","<=","1\n","//","then","e",".","deptno","!=","m","||","unknown\n","//","when","q",".","d","=","1\n","//","then","e",".","deptno","!=","m","//","sub-query","has","the","distinct","result\n","//","else","true\n","//","end","as","v\n","//","from","emp","as","e\n","//","left","outer","join","(","//","select","name,","count","(","distinct","*",")","as","c,","count","(","distinct","deptno",")","as","d,\n","//","max","(","deptno",")","as","m,","\"alwaysTrue\"","as","indicator\n","//","from","emp","group","by","name",")","as","q","on","e",".","name","=","q",".","name\n","builder",".","push","(","e",".","rel",")",".","aggregate","(","builder",".","groupKey","(",")",",\n","builder",".","count","(","true,","\"c\"",")",",\n","builder",".","count","(","true,","\"d\",","builder",".","field","(","0",")",")",",\n","builder",".","max","(","builder",".","field","(","0",")",")",".","as","(","\"m\"",")",")",";","\n\n","parentQueryFields",".","addAll","(","builder",".","fields","(",")",")",";","parentQueryFields",".","add","(","builder",".","alias","(","literalTrue,","indicator",")",")",";","builder",".","project","(","parentQueryFields",")",".","as","(","\"q\"",")",";","//","TODO","use","projectPlus\n","builder",".","join","(","JoinRelType",".","LEFT,","literalTrue,","variablesSet",")",";","caseRexNode","=","builder",".","call","(","SqlStdOperatorTable",".","CASE,\n","builder",".","isNull","(","builder",".","field","(","\"q\",","indicator",")",")",",\n","literalFalse,\n","builder",".","equals","(","builder",".","field","(","\"c\"",")",",","builder",".","literal","(","0",")",")",",\n","literalFalse,\n","builder",".","isNull","(","e",".","getOperands","(",")",".","get","(","0",")",")",",\n","literalUnknown,\n","builder",".","and","(","builder",".","notEquals","(","builder",".","field","(","\"d\"",")",",","builder",".","field","(","\"c\"",")",")",",\n","builder",".","lessThanOrEqual","(","builder",".","field","(","\"d\"",")",",\n","builder",".","literal","(","1",")",")",")",",\n","builder",".","or","(","builder",".","notEquals","(","e",".","operands",".","get","(","0",")",",","builder",".","field","(","\"q\",","\"m\"",")",")",",\n","literalUnknown",")",",\n","builder",".","equals","(","builder",".","field","(","\"d\"",")",",","builder",".","literal","(","1",")",")",",\n","builder",".","notEquals","(","e",".","operands",".","get","(","0",")",",","builder",".","field","(","\"q\",","\"m\"",")",")",",\n","literalTrue",")",";","break",";","\n\n","default:\n","throw","new","AssertionError","(","\"not","possible","-","per","above","check\"",")",";","}","}","\n\n","//","CASE","statement","above","is","created","with","nullable","boolean","type,","but","it","might\n","//","not","be","correct",".","If","the","original","sub-query","node's","type","is","not","nullable","it\n","//","is","guaranteed","for","case","statement","to","not","produce","NULLs",".","Therefore","to","avoid\n","//","planner","complaining","we","need","to","add","cast",".","Note","that","nullable","type","is\n","//","created","due","to","the","MIN","aggregate","call,","since","there","is","no","GROUP","BY",".","if","(","!e",".","getType","(",")",".","isNullable","(",")",")","{","return","builder",".","cast","(","caseRexNode,","e",".","getType","(",")",".","getSqlTypeName","(",")",")",";","}","return","caseRexNode",";"],"docstring_tokens":["Rewrites","a","SOME","sub-query","into","a","Join"],"prompt_tokens":[]}
{"code_tokens":["private","static","RexNode","rewriteExists","(","RexSubQuery","e,","Set<CorrelationId>","variablesSet,\n","RelOptUtil",".","Logic","logic,","RelBuilder","builder",")","{","builder",".","push","(","e",".","rel",")",";","\n\n","builder",".","project","(","builder",".","alias","(","builder",".","literal","(","true",")",",","\"i\"",")",")",";","switch","(","logic",")","{","case","TRUE:\n","//","Handles","queries","with","single","EXISTS","in","filter","condition:\n","//","select","e",".","deptno","from","emp","as","e\n","//","where","exists","(","select","deptno","from","emp",")","builder",".","aggregate","(","builder",".","groupKey","(","0",")",")",";","builder",".","as","(","\"dt\"",")",";","builder",".","join","(","JoinRelType",".","INNER,","builder",".","literal","(","true",")",",","variablesSet",")",";","return","builder",".","literal","(","true",")",";","default:\n","builder",".","distinct","(",")",";","}","\n\n","builder",".","as","(","\"dt\"",")",";","\n\n","builder",".","join","(","JoinRelType",".","LEFT,","builder",".","literal","(","true",")",",","variablesSet",")",";","\n\n","return","builder",".","isNotNull","(","last","(","builder",".","fields","(",")",")",")",";"],"docstring_tokens":["Rewrites","an","EXISTS","RexSubQuery","into","a","Join"],"prompt_tokens":[]}
{"code_tokens":["private","static","RexNode","rewriteIn","(","RexSubQuery","e,","Set<CorrelationId>","variablesSet,\n","RelOptUtil",".","Logic","logic,","RelBuilder","builder,","int","offset",")","{","//","Most","general","case,","where","the","left","and","right","keys","might","have","nulls,","and\n","//","caller","requires","3-valued","logic","return",".","//\n","//","select","e",".","deptno,","e",".","deptno","in","(","select","deptno","from","emp",")","//","from","emp","as","e\n","//\n","//","becomes\n","//\n","//","select","e",".","deptno,\n","//","case\n","//","when","ct",".","c","=","0","then","false\n","//","when","e",".","deptno","is","null","then","null\n","//","when","dt",".","i","is","not","null","then","true\n","//","when","ct",".","ck","<","ct",".","c","then","null\n","//","else","false\n","//","end\n","//","from","emp","as","e\n","//","left","join","(","//","(","select","count","(","*",")","as","c,","count","(","deptno",")","as","ck","from","emp",")","as","ct\n","//","cross","join","(","select","distinct","deptno,","true","as","i","from","emp",")",")","as","dt\n","//","on","e",".","deptno","=","dt",".","deptno\n","//\n","//","If","keys","are","not","null","we","can","remove","\"ct\"","and","simplify","to\n","//\n","//","select","e",".","deptno,\n","//","case\n","//","when","dt",".","i","is","not","null","then","true\n","//","else","false\n","//","end\n","//","from","emp","as","e\n","//","left","join","(","select","distinct","deptno,","true","as","i","from","emp",")","as","dt\n","//","on","e",".","deptno","=","dt",".","deptno\n","//\n","//","We","could","further","simplify","to\n","//\n","//","select","e",".","deptno,\n","//","dt",".","i","is","not","null\n","//","from","emp","as","e\n","//","left","join","(","select","distinct","deptno,","true","as","i","from","emp",")","as","dt\n","//","on","e",".","deptno","=","dt",".","deptno\n","//\n","//","but","have","not","yet",".","//\n","//","If","the","logic","is","TRUE","we","can","just","kill","the","record","if","the","condition\n","//","evaluates","to","FALSE","or","UNKNOWN",".","Thus","the","query","simplifies","to","an","inner\n","//","join:\n","//\n","//","select","e",".","deptno,\n","//","true\n","//","from","emp","as","e\n","//","inner","join","(","select","distinct","deptno","from","emp",")","as","dt\n","//","on","e",".","deptno","=","dt",".","deptno\n","//\n\n","builder",".","push","(","e",".","rel",")",";","final","List<RexNode>","fields","=","new","ArrayList<>","(","builder",".","fields","(",")",")",";","\n\n","//","for","the","case","when","IN","has","only","literal","operands,","it","may","be","handled\n","//","in","the","simpler","way:\n","//\n","//","select","e",".","deptno,","123456","in","(","select","deptno","from","emp",")","//","from","emp","as","e\n","//\n","//","becomes\n","//\n","//","select","e",".","deptno,\n","//","case\n","//","when","dt",".","c","IS","NULL","THEN","FALSE\n","//","when","e",".","deptno","IS","NULL","THEN","NULL\n","//","when","dt",".","cs","IS","FALSE","THEN","NULL\n","//","when","dt",".","cs","IS","NOT","NULL","THEN","TRUE\n","//","else","false\n","//","end\n","//","from","emp","AS","e\n","//","cross","join","(","//","select","distinct","deptno","is","not","null","as","cs,","count","(","*",")","as","c\n","//","from","emp\n","//","where","deptno","=","123456","or","deptno","is","null","or","e",".","deptno","is","null\n","//","order","by","cs","desc","limit","1",")","as","dt\n","//\n\n","boolean","allLiterals","=","RexUtil",".","allLiterals","(","e",".","getOperands","(",")",")",";","final","List<RexNode>","expressionOperands","=","new","ArrayList<>","(","e",".","getOperands","(",")",")",";","\n\n","final","List<RexNode>","keyIsNulls","=","e",".","getOperands","(",")",".","stream","(",")",".","filter","(","operand","->","operand",".","getType","(",")",".","isNullable","(",")",")",".","map","(","builder::isNull",")",".","collect","(","Collectors",".","toList","(",")",")",";","\n\n","final","RexLiteral","trueLiteral","=","builder",".","literal","(","true",")",";","final","RexLiteral","falseLiteral","=","builder",".","literal","(","false",")",";","final","RexLiteral","unknownLiteral","=\n","builder",".","getRexBuilder","(",")",".","makeNullLiteral","(","trueLiteral",".","getType","(",")",")",";","if","(","allLiterals",")","{","final","List<RexNode>","conditions","=\n","Pair",".","zip","(","expressionOperands,","fields",")",".","stream","(",")",".","map","(","pair","->","builder",".","equals","(","pair",".","left,","pair",".","right",")",")",".","collect","(","Collectors",".","toList","(",")",")",";","switch","(","logic",")","{","case","TRUE:\n","case","TRUE_FALSE:\n","builder",".","filter","(","conditions",")",";","builder",".","project","(","builder",".","alias","(","trueLiteral,","\"cs\"",")",")",";","builder",".","distinct","(",")",";","break",";","default:\n","List<RexNode>","isNullOperands","=","fields",".","stream","(",")",".","map","(","builder::isNull",")",".","collect","(","Collectors",".","toList","(",")",")",";","//","uses","keyIsNulls","conditions","in","the","filter","to","avoid","empty","results\n","isNullOperands",".","addAll","(","keyIsNulls",")",";","builder",".","filter","(","builder",".","or","(","builder",".","and","(","conditions",")",",\n","builder",".","or","(","isNullOperands",")",")",")",";","RexNode","project","=","builder",".","and","(","fields",".","stream","(",")",".","map","(","builder::isNotNull",")",".","collect","(","Collectors",".","toList","(",")",")",")",";","builder",".","project","(","builder",".","alias","(","project,","\"cs\"",")",")",";","\n\n","if","(","variablesSet",".","isEmpty","(",")",")","{","builder",".","aggregate","(","builder",".","groupKey","(","builder",".","field","(","\"cs\"",")",")",",\n","builder",".","count","(","false,","\"c\"",")",")",";","\n\n","//","sorts","input","with","desc","order","since","we","are","interested\n","//","only","in","the","case","when","one","of","the","values","is","true",".","//","When","true","value","is","absent","then","we","are","interested\n","//","only","in","false","value",".","builder",".","sortLimit","(","0,","1,\n","ImmutableList",".","of","(","builder",".","desc","(","builder",".","field","(","\"cs\"",")",")",")",")",";","}","else","{","builder",".","distinct","(",")",";","}","}","//","clears","expressionOperands","and","fields","lists","since\n","//","all","expressions","were","used","in","the","filter\n","expressionOperands",".","clear","(",")",";","fields",".","clear","(",")",";","}","else","{","switch","(","logic",")","{","case","TRUE:\n","builder",".","aggregate","(","builder",".","groupKey","(","fields",")",")",";","break",";","case","TRUE_FALSE_UNKNOWN:\n","case","UNKNOWN_AS_TRUE:\n","//","Builds","the","cross","join\n","builder",".","aggregate","(","builder",".","groupKey","(",")",",\n","builder",".","count","(","false,","\"c\"",")",",\n","builder",".","count","(","builder",".","fields","(",")",")",".","as","(","\"ck\"",")",")",";","builder",".","as","(","\"ct\"",")",";","if","(","!variablesSet",".","isEmpty","(",")",")","{","builder",".","join","(","JoinRelType",".","LEFT,","trueLiteral,","variablesSet",")",";","}","else","{","builder",".","join","(","JoinRelType",".","INNER,","trueLiteral,","variablesSet",")",";","}","offset","+=","2",";","builder",".","push","(","e",".","rel",")",";","//","fall","through\n","default:\n","fields",".","add","(","builder",".","alias","(","trueLiteral,","\"i\"",")",")",";","builder",".","project","(","fields",")",";","builder",".","distinct","(",")",";","}","}","\n\n","builder",".","as","(","\"dt\"",")",";","int","refOffset","=","offset",";","final","List<RexNode>","conditions","=\n","Pair",".","zip","(","expressionOperands,","builder",".","fields","(",")",")",".","stream","(",")",".","map","(","pair","->","builder",".","equals","(","pair",".","left,","RexUtil",".","shift","(","pair",".","right,","refOffset",")",")",")",".","collect","(","Collectors",".","toList","(",")",")",";","switch","(","logic",")","{","case","TRUE:\n","builder",".","join","(","JoinRelType",".","INNER,","builder",".","and","(","conditions",")",",","variablesSet",")",";","return","trueLiteral",";","default:\n","break",";","}","//","Now","the","left","join\n","builder",".","join","(","JoinRelType",".","LEFT,","builder",".","and","(","conditions",")",",","variablesSet",")",";","\n\n","final","ImmutableList",".","Builder<RexNode>","operands","=","ImmutableList",".","builder","(",")",";","RexLiteral","b","=","trueLiteral",";","switch","(","logic",")","{","case","TRUE_FALSE_UNKNOWN:\n","b","=","unknownLiteral",";","//","fall","through\n","case","UNKNOWN_AS_TRUE:\n","if","(","allLiterals",")","{","//","Considers","case","when","right","side","of","IN","is","empty\n","//","for","the","case","of","non-correlated","sub-queries\n","if","(","variablesSet",".","isEmpty","(",")",")","{","operands",".","add","(","builder",".","isNull","(","builder",".","field","(","\"c\"",")",")",",\n","falseLiteral",")",";","}","operands",".","add","(","builder",".","equals","(","builder",".","field","(","\"cs\"",")",",","falseLiteral",")",",\n","b",")",";","}","else","{","operands",".","add","(","builder",".","equals","(","builder",".","field","(","\"ct\",","\"c\"",")",",","builder",".","literal","(","0",")",")",",\n","falseLiteral",")",";","}","break",";","default:\n","break",";","}","\n\n","if","(","!keyIsNulls",".","isEmpty","(",")",")","{","operands",".","add","(","builder",".","or","(","keyIsNulls",")",",","unknownLiteral",")",";","}","\n\n","if","(","allLiterals",")","{","operands",".","add","(","builder",".","isNotNull","(","builder",".","field","(","\"cs\"",")",")",",\n","trueLiteral",")",";","}","else","{","operands",".","add","(","builder",".","isNotNull","(","last","(","builder",".","fields","(",")",")",")",",\n","trueLiteral",")",";","}","\n\n","if","(","!allLiterals",")","{","switch","(","logic",")","{","case","TRUE_FALSE_UNKNOWN:\n","case","UNKNOWN_AS_TRUE:\n","operands",".","add","(","builder",".","lessThan","(","builder",".","field","(","\"ct\",","\"ck\"",")",",\n","builder",".","field","(","\"ct\",","\"c\"",")",")",",\n","b",")",";","break",";","default:\n","break",";","}","}","operands",".","add","(","falseLiteral",")",";","return","builder",".","call","(","SqlStdOperatorTable",".","CASE,","operands",".","build","(",")",")",";"],"docstring_tokens":["Rewrites","an","IN","RexSubQuery","into","a","Join"],"prompt_tokens":[]}
{"code_tokens":["@Deprecated","//","to","be","removed","before","2",".","0\n","public","SqlSelect","createCall","(","SqlNodeList","keywordList,\n","SqlNodeList","selectList,\n","SqlNode","fromClause,\n","SqlNode","whereClause,\n","SqlNodeList","groupBy,\n","SqlNode","having,\n","SqlNodeList","windowDecls,\n","SqlNodeList","orderBy,\n","SqlNode","offset,\n","SqlNode","fetch,\n","SqlNodeList","hints,\n","SqlParserPos","pos",")","{","return","new","SqlSelect","(","pos,\n","keywordList,\n","selectList,\n","fromClause,\n","whereClause,\n","groupBy,\n","having,\n","windowDecls,\n","orderBy,\n","offset,\n","fetch,\n","hints",")",";"],"docstring_tokens":["Creates","a","call","to","the","SELECT","operator"],"prompt_tokens":[]}
{"code_tokens":["private","RelBuilder","example1","(","RelBuilder","builder",")","{","return","builder\n",".","scan","(","\"EMP\"",")",";"],"docstring_tokens":["Creates","a","relational","expression","for","a","table","scan"],"prompt_tokens":[]}
{"code_tokens":["public","static","ImmutableSet<CorrelationId>","setOf","(","Set<String>","set",")","{","if","(","set",".","isEmpty","(",")",")","{","return","ImmutableSet",".","of","(",")",";","}","final","ImmutableSet",".","Builder<CorrelationId>","builder","=","ImmutableSet",".","builder","(",")",";","for","(","String","s",":","set",")","{","builder",".","add","(","new","CorrelationId","(","s",")",")",";","}","return","builder",".","build","(",")",";"],"docstring_tokens":["Converts","a","set","of","correlation","ids","to","a","set","of","names"],"prompt_tokens":[]}
{"code_tokens":["public","static","Set<String>","names","(","Set<CorrelationId>","set",")","{","if","(","set",".","isEmpty","(",")",")","{","return","ImmutableSet",".","of","(",")",";","}","final","ImmutableSet",".","Builder<String>","builder","=","ImmutableSet",".","builder","(",")",";","for","(","CorrelationId","s",":","set",")","{","builder",".","add","(","s",".","name",")",";","}","return","builder",".","build","(",")",";"],"docstring_tokens":["Converts","a","set","of","names","to","a","set","of","correlation","ids"],"prompt_tokens":[]}
{"code_tokens":["@Override","public","RelDataType","rowDataType","(","final","String","topicName",")","{","final","RelDataTypeFactory","typeFactory","=\n","new","SqlTypeFactoryImpl","(","RelDataTypeSystem",".","DEFAULT",")",";","final","RelDataTypeFactory",".","Builder","fieldInfo","=","typeFactory",".","builder","(",")",";","fieldInfo",".","add","(","\"MSG_PARTITION\",","typeFactory",".","createSqlType","(","SqlTypeName",".","INTEGER",")",")",".","nullable","(","false",")",";","fieldInfo",".","add","(","\"MSG_TIMESTAMP\",","typeFactory",".","createSqlType","(","SqlTypeName",".","BIGINT",")",")",".","nullable","(","false",")",";","fieldInfo",".","add","(","\"MSG_OFFSET\",","typeFactory",".","createSqlType","(","SqlTypeName",".","BIGINT",")",")",".","nullable","(","false",")",";","fieldInfo",".","add","(","\"MSG_KEY_BYTES\",","typeFactory",".","createSqlType","(","SqlTypeName",".","VARBINARY",")",")",".","nullable","(","true",")",";","fieldInfo",".","add","(","\"MSG_VALUE_BYTES\",","typeFactory",".","createSqlType","(","SqlTypeName",".","VARBINARY",")",")",".","nullable","(","false",")",";","\n\n","return","fieldInfo",".","build","(",")",";"],"docstring_tokens":["Generates","the","row","schema","for","a","given","Kafka","topic"],"prompt_tokens":[]}
{"code_tokens":["public","TableEntry","add","(","String","tableName,","Table","table",")","{","return","add","(","tableName,","table,","ImmutableList",".","of","(",")",")",";"],"docstring_tokens":["Defines","a","table","within","this","schema"],"prompt_tokens":[]}
{"code_tokens":["public","TypeEntry","add","(","String","name,","RelProtoDataType","type",")","{","final","TypeEntry","entry","=\n","new","TypeEntryImpl","(","this,","name,","type",")",";","typeMap",".","put","(","name,","entry",")",";","return","entry",";"],"docstring_tokens":["Defines","a","type","within","this","schema"],"prompt_tokens":[]}
{"code_tokens":["public","boolean","isRoot","(",")","{","return","parent","==","null",";"],"docstring_tokens":["Returns","whether","this","is","a","root","schema"],"prompt_tokens":[]}
{"code_tokens":["public","List<String>","path","(","@Nullable","String","name",")","{","final","List<String>","list","=","new","ArrayList<>","(",")",";","if","(","name","!=","null",")","{","list",".","add","(","name",")",";","}","for","(","CalciteSchema","s","=","this",";","s","!=","null",";","s","=","s",".","parent",")","{","if","(","s",".","parent","!=","null","||","!s",".","name",".","equals","(","\"\"",")",")","{","//","Omit","the","root","schema's","name","from","the","path","if","it's","the","empty","string,\n","//","which","it","usually","is",".","list",".","add","(","s",".","name",")",";","}","}","return","ImmutableList",".","copyOf","(","Lists",".","reverse","(","list",")",")",";"],"docstring_tokens":["Returns","the","path","of","an","object","in","this","schema"],"prompt_tokens":[]}
{"code_tokens":["public","final","@Nullable","TableEntry","getTable","(","String","tableName,","boolean","caseSensitive",")","{","//","Check","explicit","tables",".","//noinspection","LoopStatementThatDoesntLoop\n","for","(","Map",".","Entry<String,","TableEntry>","entry\n",":","tableMap",".","range","(","tableName,","caseSensitive",")",".","entrySet","(",")",")","{","return","entry",".","getValue","(",")",";","}","return","getImplicitTable","(","tableName,","caseSensitive",")",";"],"docstring_tokens":["Returns","a","table","with","the","given","name"],"prompt_tokens":[]}
{"code_tokens":["public","final","@Nullable","TypeEntry","getType","(","String","name,","boolean","caseSensitive",")","{","for","(","Map",".","Entry<String,","TypeEntry>","entry\n",":","typeMap",".","range","(","name,","caseSensitive",")",".","entrySet","(",")",")","{","return","entry",".","getValue","(",")",";","}","return","getImplicitType","(","name,","caseSensitive",")",";"],"docstring_tokens":["Returns","a","type,","explicit","and","implicit,","with","a","given","name"],"prompt_tokens":[]}
{"code_tokens":["public","final","NavigableSet<String>","getFunctionNames","(",")","{","final","ImmutableSortedSet",".","Builder<String>","builder","=\n","new","ImmutableSortedSet",".","Builder<>","(","NameSet",".","COMPARATOR",")",";","//","Add","explicit","functions,","case-sensitive",".","builder",".","addAll","(","functionMap",".","map","(",")",".","keySet","(",")",")",";","//","Add","implicit","functions,","case-sensitive",".","addImplicitFuncNamesToBuilder","(","builder",")",";","return","builder",".","build","(",")",";"],"docstring_tokens":["Returns","the","list","of","function","names","in","this","schema,","both","implicit","and","explicit,","never","null"],"prompt_tokens":[]}
{"code_tokens":["public","final","@Nullable","TableEntry","getTableBasedOnNullaryFunction","(","String","tableName,\n","boolean","caseSensitive",")","{","for","(","Map",".","Entry<String,","FunctionEntry>","entry\n",":","nullaryFunctionMap",".","range","(","tableName,","caseSensitive",")",".","entrySet","(",")",")","{","final","Function","function","=","entry",".","getValue","(",")",".","getFunction","(",")",";","if","(","function","instanceof","TableMacro",")","{","assert","function",".","getParameters","(",")",".","isEmpty","(",")",";","final","Table","table","=","(","(","TableMacro",")","function",")",".","apply","(","ImmutableList",".","of","(",")",")",";","return","tableEntry","(","tableName,","table",")",";","}","}","return","getImplicitTableBasedOnNullaryFunction","(","tableName,","caseSensitive",")",";"],"docstring_tokens":["Returns","a","tables","derived","from","explicit","and","implicit","functions","that","take","zero","parameters"],"prompt_tokens":[]}
{"code_tokens":["public","static","<T>","List<T>","of","(",")","{","return","ImmutableList",".","of","(",")",";"],"docstring_tokens":["Creates","a","CompositeList","of","zero","lists"],"prompt_tokens":[]}
{"code_tokens":["public","static","<T>","List<T>","of","(","List<T>","list0",")","{","return","list0",";"],"docstring_tokens":["Creates","a","CompositeList","of","one","list"],"prompt_tokens":[]}
{"code_tokens":["public","static","<T>","CompositeList<T>","of","(","List<?","extends","T>","list0,\n","List<?","extends","T>","list1",")","{","//noinspection","unchecked\n","return","new","CompositeList<T>","(","(","ImmutableList",")","ImmutableList",".","of","(","list0,","list1",")",")",";"],"docstring_tokens":["Creates","a","CompositeList","of","two","lists"],"prompt_tokens":[]}
{"code_tokens":["public","static","<T>","CompositeList<T>","of","(","List<?","extends","T>","list0,\n","List<?","extends","T>","list1,\n","List<?","extends","T>","list2",")","{","//noinspection","unchecked\n","return","new","CompositeList<T>","(","(","ImmutableList",")","ImmutableList",".","of","(","list0,","list1,","list2",")",")",";"],"docstring_tokens":["Creates","a","CompositeList","of","three","lists"],"prompt_tokens":[]}
{"code_tokens":["@Override","public","String","toString","(",")","{","return","sql",";"],"docstring_tokens":["Returns","the","SQL","string"],"prompt_tokens":[]}
{"code_tokens":["public","static","Statistic","of","(","final","double","rowCount,\n","final","@Nullable","List<ImmutableBitSet>","keys",")","{","return","of","(","rowCount,","keys,","null,\n","null",")",";"],"docstring_tokens":["Returns","a","statistic","with","a","given","row","count","and","set","of","unique","keys"],"prompt_tokens":[]}
{"code_tokens":["public","static","Statistic","of","(","final","double","rowCount,\n","final","@Nullable","List<ImmutableBitSet>","keys,\n","final","@Nullable","List<RelCollation>","collations",")","{","return","of","(","rowCount,","keys,","null,","collations",")",";"],"docstring_tokens":["Returns","a","statistic","with","a","given","row","count,","set","of","unique","keys,","and","collations"],"prompt_tokens":[]}
{"code_tokens":["protected","RelOptPlanner","createPlanner","(","final","CalcitePrepare",".","Context","prepareContext,\n","org",".","apache",".","calcite",".","plan",".","@Nullable","Context","externalContext,\n","@Nullable","RelOptCostFactory","costFactory",")","{","if","(","externalContext","==","null",")","{","externalContext","=","Contexts",".","of","(","prepareContext",".","config","(",")",")",";","}","final","VolcanoPlanner","planner","=\n","new","VolcanoPlanner","(","costFactory,","externalContext",")",";","planner",".","addRelTraitDef","(","ConventionTraitDef",".","INSTANCE",")",";","if","(","CalciteSystemProperty",".","ENABLE_COLLATION_TRAIT",".","value","(",")",")","{","planner",".","addRelTraitDef","(","RelCollationTraitDef",".","INSTANCE",")",";","}","planner",".","setTopDownOpt","(","prepareContext",".","config","(",")",".","topDownOpt","(",")",")",";","RelOptUtil",".","registerDefaultRules","(","planner,\n","prepareContext",".","config","(",")",".","materializationsEnabled","(",")",",\n","enableBindable",")",";","\n\n","final","CalcitePrepare",".","SparkHandler","spark","=","prepareContext",".","spark","(",")",";","if","(","spark",".","enabled","(",")",")","{","spark",".","registerRules","(","new","SparkHandler",".","RuleSetBuilder","(",")","{","@Override","public","void","addRule","(","RelOptRule","rule",")","{","//","TODO:\n","}","\n\n","@Override","public","void","removeRule","(","RelOptRule","rule",")","{","//","TODO:\n","}","}",")",";","}","Hook",".","PLANNER",".","run","(","planner",")",";","//","allow","test","to","add","or","remove","rules\n\n","return","planner",";"],"docstring_tokens":["Creates","a","query","planner","and","initializes","it","with","a","default","set","of","rules"],"prompt_tokens":[]}
{"code_tokens":["private","static","Meta",".","StatementType","getStatementType","(","Prepare",".","PreparedResult","preparedResult",")","{","if","(","preparedResult",".","isDml","(",")",")","{","return","Meta",".","StatementType",".","IS_DML",";","}","else","{","return","Meta",".","StatementType",".","SELECT",";","}"],"docstring_tokens":["Deduces","the","broad","type","of","statement","for","a","prepare","result"],"prompt_tokens":[]}
{"code_tokens":["public","<R>","R","perform","(","CalciteServerStatement","statement,\n","FrameworkConfig","config,","Frameworks",".","BasePrepareAction<R>","action",")","{","final","CalcitePrepare",".","Context","prepareContext","=\n","statement",".","createPrepareContext","(",")",";","final","JavaTypeFactory","typeFactory","=","prepareContext",".","getTypeFactory","(",")",";","SchemaPlus","defaultSchema","=","config",".","getDefaultSchema","(",")",";","final","CalciteSchema","schema","=\n","defaultSchema","!=","null\n","?","CalciteSchema",".","from","(","defaultSchema",")",":","prepareContext",".","getRootSchema","(",")",";","CalciteCatalogReader","catalogReader","=\n","new","CalciteCatalogReader","(","schema",".","root","(",")",",\n","schema",".","path","(","null",")",",\n","typeFactory,\n","prepareContext",".","config","(",")",")",";","final","RexBuilder","rexBuilder","=","new","RexBuilder","(","typeFactory",")",";","final","RelOptPlanner","planner","=\n","createPlanner","(","prepareContext,\n","config",".","getContext","(",")",",\n","config",".","getCostFactory","(",")",")",";","final","RelOptCluster","cluster","=","createCluster","(","planner,","rexBuilder",")",";","return","action",".","apply","(","cluster,","catalogReader,\n","prepareContext",".","getRootSchema","(",")",".","plus","(",")",",","statement",")",";"],"docstring_tokens":["Executes","a","prepare","action"],"prompt_tokens":[]}
{"code_tokens":["public","static","boolean","isLiteralChain","(","SqlNode","node",")","{","assert","node","!=","null",";","if","(","node","instanceof","SqlCall",")","{","SqlCall","call","=","(","SqlCall",")","node",";","return","call",".","getKind","(",")","==","SqlKind",".","LITERAL_CHAIN",";","}","else","{","return","false",";","}"],"docstring_tokens":["Returns","whether","a","node","is","a","literal","chain","which","is","used","to","represent","a","continued","string","literal"],"prompt_tokens":[]}
{"code_tokens":["public","static","void","unparseFunctionSyntax","(","SqlOperator","operator,\n","SqlWriter","writer,","SqlCall","call,","boolean","ordered",")","{","if","(","operator","instanceof","SqlFunction",")","{","SqlFunction","function","=","(","SqlFunction",")","operator",";","\n\n","if","(","function",".","getFunctionType","(",")",".","isSpecific","(",")",")","{","writer",".","keyword","(","\"SPECIFIC\"",")",";","}","SqlIdentifier","id","=","function",".","getSqlIdentifier","(",")",";","if","(","id","==","null",")","{","writer",".","keyword","(","operator",".","getName","(",")",")",";","}","else","{","unparseSqlIdentifierSyntax","(","writer,","id,","true",")",";","}","}","else","{","writer",".","print","(","operator",".","getName","(",")",")",";","}","if","(","call",".","operandCount","(",")","==","0",")","{","switch","(","call",".","getOperator","(",")",".","getSyntax","(",")",")","{","case","FUNCTION_ID:\n","//","For","example,","the","\"LOCALTIME\"","function","appears","as","\"LOCALTIME\"\n","//","when","it","has","0","args,","not","\"LOCALTIME","(",")","\"",".","return",";","case","FUNCTION_STAR:","//","E",".","g",".","\"COUNT","(","*",")","\"\n","case","FUNCTION:","//","E",".","g",".","\"RANK","(",")","\"\n","case","ORDERED_FUNCTION:","//","E",".","g",".","\"STRING_AGG","(","x",")","\"\n","//","fall","through","-","dealt","with","below\n","break",";","default:\n","break",";","}","}","final","SqlWriter",".","Frame","frame","=\n","writer",".","startList","(","SqlWriter",".","FrameTypeEnum",".","FUN_CALL,","\"","(","\",","\"",")","\"",")",";","final","SqlLiteral","quantifier","=","call",".","getFunctionQuantifier","(",")",";","if","(","quantifier","!=","null",")","{","quantifier",".","unparse","(","writer,","0,","0",")",";","}","if","(","call",".","operandCount","(",")","==","0",")","{","switch","(","call",".","getOperator","(",")",".","getSyntax","(",")",")","{","case","FUNCTION_STAR:\n","writer",".","sep","(","\"*\"",")",";","break",";","default:\n","break",";","}","}","for","(","SqlNode","operand",":","call",".","getOperandList","(",")",")","{","if","(","ordered","&&","operand","instanceof","SqlNodeList",")","{","writer",".","sep","(","\"ORDER","BY\"",")",";","}","else","if","(","ordered","&&","operand",".","getKind","(",")","==","SqlKind",".","SEPARATOR",")","{","writer",".","sep","(","\"SEPARATOR\"",")",";","(","(","SqlCall",")","operand",")",".","operand","(","0",")",".","unparse","(","writer,","0,","0",")",";","continue",";","}","else","{","writer",".","sep","(","\",\"",")",";","}","operand",".","unparse","(","writer,","0,","0",")",";","}","\n\n","writer",".","endList","(","frame",")",";"],"docstring_tokens":["Unparses","a","call","to","an","operator","that","has","function","syntax"],"prompt_tokens":[]}
{"code_tokens":["public","static","Iterator<SqlOperator>","lookupSubjectRoutines","(","SqlOperatorTable","opTab,","RelDataTypeFactory","typeFactory,\n","SqlIdentifier","funcName,","List<RelDataType>","argTypes,","@Nullable","List<String>","argNames,\n","SqlSyntax","sqlSyntax,","SqlKind","sqlKind,\n","@Nullable","SqlFunctionCategory","category,","SqlNameMatcher","nameMatcher,\n","boolean","coerce",")","{","//","start","with","all","routines","matching","by","name\n","Iterator<SqlOperator>","routines","=\n","lookupSubjectRoutinesByName","(","opTab,","funcName,","sqlSyntax,","category,\n","nameMatcher",")",";","\n\n","//","first","pass:","eliminate","routines","which","don't","accept","the","given\n","//","number","of","arguments\n","routines","=","filterRoutinesByParameterCount","(","routines,","argTypes",")",";","\n\n","//","NOTE:","according","to","SQL99,","procedures","are","NOT","overloaded","on","type,\n","//","only","on","number","of","arguments",".","if","(","category","==","SqlFunctionCategory",".","USER_DEFINED_PROCEDURE",")","{","return","routines",";","}","\n\n","//","second","pass:","eliminate","routines","which","don't","accept","the","given\n","//","argument","types","and","parameter","names","if","specified\n","routines","=\n","filterRoutinesByParameterTypeAndName","(","typeFactory,","sqlSyntax,","routines,\n","argTypes,","argNames,","coerce",")",";","\n\n","//","see","if","we","can","stop","now",";","this","is","necessary","for","the","case\n","//","of","builtin","functions","where","we","don't","have","param","type","info,\n","//","or","UDF","whose","operands","can","make","type","coercion",".","final","List<SqlOperator>","list","=","Lists",".","newArrayList","(","routines",")",";","routines","=","list",".","iterator","(",")",";","if","(","list",".","size","(",")","<","2","||","coerce",")","{","return","routines",";","}","\n\n","//","third","pass:","for","each","parameter","from","left","to","right,","eliminate\n","//","all","routines","except","those","with","the","best","precedence","match","for\n","//","the","given","arguments\n","routines","=","filterRoutinesByTypePrecedence","(","sqlSyntax,","typeFactory,","routines,","argTypes,","argNames",")",";","\n\n","//","fourth","pass:","eliminate","routines","which","do","not","have","the","same\n","//","SqlKind","as","requested\n","return","filterOperatorRoutinesByKind","(","routines,","sqlKind",")",";"],"docstring_tokens":["Looks","up","all","subject","routines","matching","the","given","name","and","argument","types"],"prompt_tokens":[]}
{"code_tokens":["public","static","boolean","matchRoutinesByParameterCount","(","SqlOperatorTable","opTab,\n","SqlIdentifier","funcName,\n","List<RelDataType>","argTypes,\n","SqlFunctionCategory","category,\n","SqlNameMatcher","nameMatcher",")","{","//","start","with","all","routines","matching","by","name\n","Iterator<SqlOperator>","routines","=\n","lookupSubjectRoutinesByName","(","opTab,","funcName,","SqlSyntax",".","FUNCTION,\n","category,","nameMatcher",")",";","\n\n","//","first","pass:","eliminate","routines","which","don't","accept","the","given\n","//","number","of","arguments\n","routines","=","filterRoutinesByParameterCount","(","routines,","argTypes",")",";","\n\n","return","routines",".","hasNext","(",")",";"],"docstring_tokens":["Determines","whether","there","is","a","routine","matching","the","given","name","and","number","of","arguments"],"prompt_tokens":[]}
{"code_tokens":["private","static","Iterator<SqlOperator>","filterRoutinesByTypePrecedence","(","SqlSyntax","sqlSyntax,\n","RelDataTypeFactory","typeFactory,\n","Iterator<SqlOperator>","routines,\n","List<RelDataType>","argTypes,\n","@Nullable","List<String>","argNames",")","{","if","(","sqlSyntax","!=","SqlSyntax",".","FUNCTION",")","{","return","routines",";","}","\n\n","List<SqlFunction>","sqlFunctions","=\n","Lists",".","newArrayList","(","Iterators",".","filter","(","routines,","SqlFunction",".","class",")",")",";","\n\n","for","(","final","Ord<RelDataType>","argType",":","Ord",".","zip","(","argTypes",")",")","{","final","RelDataTypePrecedenceList","precList","=\n","argType",".","e",".","getPrecedenceList","(",")",";","final","RelDataType","bestMatch","=\n","bestMatch","(","typeFactory,","sqlFunctions,","argType",".","i,","argNames,","precList",")",";","if","(","bestMatch","!=","null",")","{","sqlFunctions","=","sqlFunctions",".","stream","(",")",".","filter","(","function","->","{","SqlOperandTypeChecker","operandTypeChecker","=","function",".","getOperandTypeChecker","(",")",";","if","(","operandTypeChecker","==","null","||","!operandTypeChecker",".","isFixedParameters","(",")",")","{","return","false",";","}","final","SqlOperandMetadata","operandMetadata","=","(","SqlOperandMetadata",")","operandTypeChecker",";","final","List<String>","paramNames","=","operandMetadata",".","paramNames","(",")",";","final","List<RelDataType>","paramTypes","=\n","operandMetadata",".","paramTypes","(","typeFactory",")",";","int","index","=","argNames","!=","null\n","?","paramNames",".","indexOf","(","argNames",".","get","(","argType",".","i",")",")",":","argType",".","i",";","final","RelDataType","paramType","=","paramTypes",".","get","(","index",")",";","return","precList",".","compareTypePrecedence","(","paramType,","bestMatch",")",">=","0",";","}",")",".","collect","(","Collectors",".","toList","(",")",")",";","}","}","//noinspection","unchecked\n","return","(","Iterator",")","sqlFunctions",".","iterator","(",")",";"],"docstring_tokens":["Filters","an","iterator","of","routines,","keeping","only","those","with","the","best","match","for","the","actual","argument","types"],"prompt_tokens":[]}
{"code_tokens":["public","static","String","getAliasedSignature","(","SqlOperator","op,\n","String","opName,\n","List<?>","typeList",")","{","StringBuilder","ret","=","new","StringBuilder","(",")",";","String","template","=","op",".","getSignatureTemplate","(","typeList",".","size","(",")",")",";","if","(","null","==","template",")","{","ret",".","append","(","\"'\"",")",";","ret",".","append","(","opName",")",";","ret",".","append","(","\"","(","\"",")",";","for","(","int","i","=","0",";","i","<","typeList",".","size","(",")",";","i++",")","{","if","(","i",">","0",")","{","ret",".","append","(","\",","\"",")",";","}","final","String","t","=","String",".","valueOf","(","typeList",".","get","(","i",")",")",".","toUpperCase","(","Locale",".","ROOT",")",";","ret",".","append","(","\"<\"",")",".","append","(","t",")",".","append","(","\">\"",")",";","}","ret",".","append","(","\"",")","'\"",")",";","}","else","{","Object[]","values","=","new","Object[typeList",".","size","(",")","+","1]",";","values[0]","=","opName",";","ret",".","append","(","\"'\"",")",";","for","(","int","i","=","0",";","i","<","typeList",".","size","(",")",";","i++",")","{","final","String","t","=","String",".","valueOf","(","typeList",".","get","(","i",")",")",".","toUpperCase","(","Locale",".","ROOT",")",";","values[i","+","1]","=","\"<\"","+","t","+","\">\"",";","}","ret",".","append","(","new","MessageFormat","(","template,","Locale",".","ROOT",")",".","format","(","values",")",")",";","ret",".","append","(","\"'\"",")",";","assert","(","typeList",".","size","(",")","+","1",")","==","values",".","length",";","}","\n\n","return","ret",".","toString","(",")",";"],"docstring_tokens":["Constructs","an","operator","signature","from","a","type","list,","substituting","an","alias","for","the","operator","name"],"prompt_tokens":[]}
{"code_tokens":["public","static","boolean","isCallTo","(","SqlNode","node,","SqlOperator","operator",")","{","return","(","node","instanceof","SqlCall",")","&&","(","(","(","SqlCall",")","node",")",".","getOperator","(",")","==","operator",")",";"],"docstring_tokens":["Returns","whether","a","SqlNode","node","is","a","SqlCall","call","to","a","given","SqlOperator","operator"],"prompt_tokens":[]}
{"code_tokens":["public","static","@Nullable","String","translateCharacterSetName","(","String","name",")","{","switch","(","name",")","{","case","\"BIG5\":\n","return","\"Big5\"",";","case","\"LATIN1\":\n","return","\"ISO-8859-1\"",";","case","\"UTF8\":\n","return","\"UTF-8\"",";","case","\"UTF16\":\n","case","\"UTF-16\":\n","return","ConversionUtil",".","NATIVE_UTF16_CHARSET_NAME",";","case","\"GB2312\":\n","case","\"GBK\":\n","case","\"UTF-16BE\":\n","case","\"UTF-16LE\":\n","case","\"ISO-8859-1\":\n","case","\"UTF-8\":\n","return","name",";","default:\n","return","null",";","}"],"docstring_tokens":["Translates","a","character","set","name","from","a","SQL-level","name","into","a","Java-level","name"],"prompt_tokens":[]}
{"code_tokens":["public","static","Charset","getCharset","(","String","charsetName",")","{","assert","charsetName","!=","null",";","charsetName","=","charsetName",".","toUpperCase","(","Locale",".","ROOT",")",";","String","javaCharsetName","=","translateCharacterSetName","(","charsetName",")",";","if","(","javaCharsetName","==","null",")","{","throw","new","UnsupportedCharsetException","(","charsetName",")",";","}","return","Charset",".","forName","(","javaCharsetName",")",";"],"docstring_tokens":["Returns","the","Java-level","Charset","based","on","given","SQL-level","name"],"prompt_tokens":[]}
{"code_tokens":["private","static","SqlNode","createBalancedCall","(","SqlOperator","op,","SqlParserPos","pos,\n","List<SqlNode>","operands,","int","start,","int","end",")","{","assert","start","<","end","&&","end","<=","operands",".","size","(",")",";","if","(","start","+","1","==","end",")","{","return","operands",".","get","(","start",")",";","}","int","mid","=","(","end","-","start",")","/","2","+","start",";","SqlNode","leftNode","=","createBalancedCall","(","op,","pos,","operands,","start,","mid",")",";","SqlNode","rightNode","=","createBalancedCall","(","op,","pos,","operands,","mid,","end",")",";","return","op",".","createCall","(","pos,","leftNode,","rightNode",")",";"],"docstring_tokens":["Creates","a","balanced","binary","call","from","sql","node","list,","start","inclusive,","end","exclusive"],"prompt_tokens":[]}
{"code_tokens":["static","IndexCondition","create","(","List<String>","fieldNames,\n","String","indexName,\n","List<String>","indexColumnNames,\n","List<RexNode>","pushDownConditions,\n","List<RexNode>","remainderConditions",")","{","return","new","IndexCondition","(","fieldNames,","indexName,","indexColumnNames,","null,\n","pushDownConditions,","remainderConditions,","null,","null,\n","ComparisonOperator",".","NOP,","ComparisonOperator",".","NOP,","ImmutableList",".","of","(",")",",\n","ImmutableList",".","of","(",")",")",";"],"docstring_tokens":["Creates","a","new","instance","for","InnodbFilterTranslator","to","build","index","condition","which","can","be","pushed","down"],"prompt_tokens":[]}
{"code_tokens":["boolean","canPushDown","(",")","{","return","!pushDownConditions",".","isEmpty","(",")",";"],"docstring_tokens":["Returns","whether","there","are","any","push","down","conditions"],"prompt_tokens":[]}
{"code_tokens":["private","static","RelCollation","deduceImplicitCollation","(","List<String>","fieldNames,\n","List<String>","indexColumnNames",")","{","checkState","(","fieldNames","!=","null,","\"field","names","cannot","be","null\"",")",";","List<RelFieldCollation>","keyCollations","=","new","ArrayList<>","(","indexColumnNames",".","size","(",")",")",";","for","(","String","keyColumnName",":","indexColumnNames",")","{","int","fieldIndex","=","fieldNames",".","indexOf","(","keyColumnName",")",";","keyCollations",".","add","(","new","RelFieldCollation","(","fieldIndex,","RelFieldCollation",".","Direction",".","ASCENDING",")",")",";","}","return","RelCollations",".","of","(","keyCollations",")",";"],"docstring_tokens":["Infers","the","implicit","correlation","from","the","index"],"prompt_tokens":[]}
{"code_tokens":["public","static","@Nullable","TableFunction","create","(","Class<?>","clazz,","String","methodName",")","{","final","Method","method","=","findMethod","(","clazz,","methodName",")",";","if","(","method","==","null",")","{","return","null",";","}","return","create","(","method",")",";"],"docstring_tokens":["Creates","a","TableFunctionImpl","from","a","class,","looking","for","a","method","with","a","given","name"],"prompt_tokens":[]}
{"code_tokens":["public","static","@Nullable","TableFunction","create","(","final","Method","method",")","{","if","(","!Modifier",".","isStatic","(","method",".","getModifiers","(",")",")",")","{","Class","clazz","=","method",".","getDeclaringClass","(",")",";","if","(","!classHasPublicZeroArgsConstructor","(","clazz",")",")","{","throw","RESOURCE",".","requireDefaultConstructor","(","clazz",".","getName","(",")",")",".","ex","(",")",";","}","}","final","Class<?>","returnType","=","method",".","getReturnType","(",")",";","if","(","!QueryableTable",".","class",".","isAssignableFrom","(","returnType",")","&&","!ScannableTable",".","class",".","isAssignableFrom","(","returnType",")",")","{","return","null",";","}","CallImplementor","implementor","=","createImplementor","(","method",")",";","return","new","TableFunctionImpl","(","method,","implementor",")",";"],"docstring_tokens":["Creates","a","TableFunctionImpl","from","a","method"],"prompt_tokens":[]}
{"code_tokens":["public","void","updateAlias","(","Operator","pigOp,","String","alias,","boolean","updatePigRelMap",")","{","final","RelNode","rel","=","peek","(",")",";","if","(","updatePigRelMap",")","{","pigRelMap",".","put","(","pigOp,","rel",")",";","}","relPigMap",".","put","(","rel,","pigOp",")",";","aliasMap",".","put","(","alias,","rel",")",";","reverseAliasMap",".","put","(","rel,","alias",")",";"],"docstring_tokens":["Updates","the","Pig","logical","operator","and","its","alias","with","the","top","relational","algebra","node"],"prompt_tokens":[]}
{"code_tokens":["void","register","(","LogicalRelationalOperator","pigOp",")","{","updateAlias","(","pigOp,","pigOp",".","getAlias","(",")",",","true",")",";"],"docstring_tokens":["Registers","the","Pig","logical","operator","with","the","top","relational","algebra","node"],"prompt_tokens":[]}
{"code_tokens":["public","RelBuilder","scan","(","RelOptTable","userSchema,","String",".",".",".","tableNames",")","{","//","First,","look","up","the","database","schema","to","find","the","table","schema","with","the","given","names\n","final","List<String>","names","=","ImmutableList",".","copyOf","(","tableNames",")",";","Objects",".","requireNonNull","(","relOptSchema,","\"relOptSchema\"",")",";","final","RelOptTable","systemSchema","=","relOptSchema",".","getTableForMember","(","names",")",";","\n\n","//","Now","we","may","end","up","with","two","different","schemas",".","if","(","systemSchema","!=","null",")","{","if","(","userSchema","!=","null","&&","!compatibleType","(","userSchema",".","getRowType","(",")",",\n","systemSchema",".","getRowType","(",")",")",")","{","//","If","both","schemas","are","valid,","they","must","be","compatible\n","throw","new","IllegalArgumentException","(","\"Pig","script","schema","does","not","match","database","schema","for","table","\"","+","names","+","\"",".","\\n\"\n","+","\"\\t","Scrip","schema:","\"","+","userSchema",".","getRowType","(",")",".","getFullTypeString","(",")","+","\"\\n\"\n","+","\"\\t","Database","schema:","\"","+","systemSchema",".","getRowType","(",")",".","getFullTypeString","(",")",")",";","}","//","We","choose","to","use","systemSchema","if","it","is","valid\n","return","scan","(","systemSchema",")",";","}","else","if","(","userSchema","!=","null",")","{","//","If","systemSchema","is","not","valid,","use","userSchema","if","it","is","valid\n","return","scan","(","userSchema",")",";","}","else","{","//","At","least","one","of","them","needs","to","be","valid\n","throw","Static",".","RESOURCE",".","tableNotFound","(","String",".","join","(","\"",".","\",","names",")",")",".","ex","(",")",";","}"],"docstring_tokens":["Scans","a","table","with","its","given","schema","and","names"],"prompt_tokens":[]}
{"code_tokens":["public","RelBuilder","scan","(","RelDataType","rowType,","List<String>","tableNames",")","{","final","RelOptTable","relOptTable","=\n","PigTable",".","createRelOptTable","(","getRelOptSchema","(",")",",","rowType,","tableNames",")",";","return","scan","(","relOptTable",")",";"],"docstring_tokens":["Makes","a","table","scan","operator","for","a","given","row","type","and","names"],"prompt_tokens":[]}
{"code_tokens":["public","RexNode","correl","(","List<RelDataTypeField>","inputFields,\n","CorrelationId","correlId",")","{","final","RelDataTypeFactory",".","Builder","fieldBuilder","=\n","PigTypes",".","TYPE_FACTORY",".","builder","(",")",";","for","(","RelDataTypeField","field",":","inputFields",")","{","fieldBuilder",".","add","(","field",".","getName","(",")",",","field",".","getType","(",")",")",";","}","return","getRexBuilder","(",")",".","makeCorrel","(","fieldBuilder",".","uniquify","(",")",".","build","(",")",",","correlId",")",";"],"docstring_tokens":["Makes","the","correlated","expression","from","rel","input","fields","and","correlation","id"],"prompt_tokens":[]}
{"code_tokens":["public","RelBuilder","collect","(",")","{","final","RelNode","inputRel","=","peek","(",")",";","\n\n","//","First","project","out","a","combined","column","which","is","a","of","all","other","columns\n","final","RexNode","row","=","getRexBuilder","(",")",".","makeCall","(","inputRel",".","getRowType","(",")",",\n","SqlStdOperatorTable",".","ROW,","fields","(",")",")",";","project","(","ImmutableList",".","of","(","literal","(","\"all\"",")",",","row",")",")",";","\n\n","//","Update","the","alias","map","for","the","new","projected","rel",".","updateAlias","(","getPig","(","inputRel",")",",","getAlias","(","inputRel",")",",","false",")",";","\n\n","//","Build","a","single","group","for","all","rows\n","cogroup","(","ImmutableList",".","of","(","groupKey","(","ImmutableList",".","<RexNode>of","(","field","(","0",")",")",")",")",")",";","\n\n","//","Finally","project","out","the","final","multiset","value\n","project","(","field","(","1",")",")",";","\n\n","return","this",";"],"docstring_tokens":["Collects","all","rows","of","the","top","rel","into","a","single","multiset","value"],"prompt_tokens":[]}
{"code_tokens":["public","List<RelNode>","getRelsForStores","(",")","{","if","(","storeMap",".","isEmpty","(",")",")","{","return","null",";","}","return","ImmutableList",".","copyOf","(","storeMap",".","values","(",")",")",";"],"docstring_tokens":["Gets","all","relational","plans","corresponding","to","Pig","Store","operators"],"prompt_tokens":[]}
{"code_tokens":["boolean","isValid","(","Litmus","litmus",")","{","for","(","int","i","=","0",";","i","<","descendants",".","size","(",")",";","i++",")","{","LatticeNode","node","=","descendants",".","get","(","i",")",";","if","(","i","==","0",")","{","if","(","node","!=","this",")","{","return","litmus",".","fail","(","\"node","0","should","be","root\"",")",";","}","}","else","{","if","(","!","(","node","instanceof","LatticeChildNode",")",")","{","return","litmus",".","fail","(","\"node","after","0","should","be","child\"",")",";","}","final","LatticeChildNode","child","=","(","LatticeChildNode",")","node",";","if","(","!descendants",".","subList","(","0,","i",")",".","contains","(","child",".","parent",")",")","{","return","litmus",".","fail","(","\"parent","not","in","preceding","list\"",")",";","}","}","}","return","litmus",".","succeed","(",")",";"],"docstring_tokens":["Validates","that","nodes","form","a","tree;","each","node","except","the","first","references","a","predecessor"],"prompt_tokens":[]}
{"code_tokens":["public","@Nullable","Set<RexNode>","getExpressionLineage","(","Join","rel,","RelMetadataQuery","mq,\n","RexNode","outputExpression",")","{","final","RexBuilder","rexBuilder","=","rel",".","getCluster","(",")",".","getRexBuilder","(",")",";","final","RelNode","leftInput","=","rel",".","getLeft","(",")",";","final","RelNode","rightInput","=","rel",".","getRight","(",")",";","final","int","nLeftColumns","=","leftInput",".","getRowType","(",")",".","getFieldList","(",")",".","size","(",")",";","\n\n","//","Extract","input","fields","referenced","by","expression\n","final","ImmutableBitSet","inputFieldsUsed","=","extractInputRefs","(","outputExpression",")",";","\n\n","if","(","rel",".","getJoinType","(",")",".","isOuterJoin","(",")",")","{","//","If","we","reference","the","inner","side,","we","will","bail","out\n","if","(","rel",".","getJoinType","(",")","==","JoinRelType",".","LEFT",")","{","ImmutableBitSet","rightFields","=","ImmutableBitSet",".","range","(","nLeftColumns,","rel",".","getRowType","(",")",".","getFieldCount","(",")",")",";","if","(","inputFieldsUsed",".","intersects","(","rightFields",")",")","{","//","We","cannot","map","origin","of","this","expression",".","return","null",";","}","}","else","if","(","rel",".","getJoinType","(",")","==","JoinRelType",".","RIGHT",")","{","ImmutableBitSet","leftFields","=","ImmutableBitSet",".","range","(","0,","nLeftColumns",")",";","if","(","inputFieldsUsed",".","intersects","(","leftFields",")",")","{","//","We","cannot","map","origin","of","this","expression",".","return","null",";","}","}","else","{","//","We","cannot","map","origin","of","this","expression",".","return","null",";","}","}","\n\n","//","Gather","table","references\n","final","Set<RelTableRef>","leftTableRefs","=","mq",".","getTableReferences","(","leftInput",")",";","if","(","leftTableRefs","==","null",")","{","//","Bail","out\n","return","null",";","}","final","Set<RelTableRef>","rightTableRefs","=","mq",".","getTableReferences","(","rightInput",")",";","if","(","rightTableRefs","==","null",")","{","//","Bail","out\n","return","null",";","}","final","Multimap<List<String>,","RelTableRef>","qualifiedNamesToRefs","=","HashMultimap",".","create","(",")",";","final","Map<RelTableRef,","RelTableRef>","currentTablesMapping","=","new","HashMap<>","(",")",";","for","(","RelTableRef","leftRef",":","leftTableRefs",")","{","qualifiedNamesToRefs",".","put","(","leftRef",".","getQualifiedName","(",")",",","leftRef",")",";","}","for","(","RelTableRef","rightRef",":","rightTableRefs",")","{","int","shift","=","0",";","Collection<RelTableRef>","lRefs","=","qualifiedNamesToRefs",".","get","(","rightRef",".","getQualifiedName","(",")",")",";","if","(","lRefs","!=","null",")","{","shift","=","lRefs",".","size","(",")",";","}","currentTablesMapping",".","put","(","rightRef,\n","RelTableRef",".","of","(","rightRef",".","getTable","(",")",",","shift","+","rightRef",".","getEntityNumber","(",")",")",")",";","}","\n\n","//","Infer","column","origin","expressions","for","given","references\n","final","Map<RexInputRef,","Set<RexNode>>","mapping","=","new","LinkedHashMap<>","(",")",";","for","(","int","idx",":","inputFieldsUsed",")","{","if","(","idx","<","nLeftColumns",")","{","final","RexInputRef","inputRef","=","RexInputRef",".","of","(","idx,","leftInput",".","getRowType","(",")",".","getFieldList","(",")",")",";","final","Set<RexNode>","originalExprs","=","mq",".","getExpressionLineage","(","leftInput,","inputRef",")",";","if","(","originalExprs","==","null",")","{","//","Bail","out\n","return","null",";","}","//","Left","input","references","remain","unchanged\n","mapping",".","put","(","RexInputRef",".","of","(","idx,","rel",".","getRowType","(",")",".","getFieldList","(",")",")",",","originalExprs",")",";","}","else","{","//","Right","input",".","final","RexInputRef","inputRef","=","RexInputRef",".","of","(","idx","-","nLeftColumns,\n","rightInput",".","getRowType","(",")",".","getFieldList","(",")",")",";","final","Set<RexNode>","originalExprs","=","mq",".","getExpressionLineage","(","rightInput,","inputRef",")",";","if","(","originalExprs","==","null",")","{","//","Bail","out\n","return","null",";","}","//","Right","input","references","might","need","to","be","updated","if","there","are\n","//","table","names","clashes","with","left","input\n","final","RelDataType","fullRowType","=","SqlValidatorUtil",".","createJoinType","(","rexBuilder",".","getTypeFactory","(",")",",\n","rel",".","getLeft","(",")",".","getRowType","(",")",",\n","rel",".","getRight","(",")",".","getRowType","(",")",",\n","null,\n","ImmutableList",".","of","(",")",")",";","final","Set<RexNode>","updatedExprs","=","ImmutableSet",".","copyOf","(","Util",".","transform","(","originalExprs,","e","->\n","RexUtil",".","swapTableReferences","(","rexBuilder,","e,\n","currentTablesMapping",")",")",")",";","mapping",".","put","(","RexInputRef",".","of","(","idx,","fullRowType",")",",","updatedExprs",")",";","}","}","\n\n","//","Return","result\n","return","createAllPossibleExpressions","(","rexBuilder,","outputExpression,","mapping",")",";"],"docstring_tokens":["Expression","lineage","from","Join"],"prompt_tokens":[]}
{"code_tokens":["public","static","SqlOperatorTable","operatorTable","(","String",".",".",".","classNames",")","{","//","Dummy","schema","to","collect","the","functions\n","final","CalciteSchema","schema","=\n","CalciteSchema",".","createRootSchema","(","false,","false",")",";","for","(","String","className",":","classNames",")","{","ModelHandler",".","addFunctions","(","schema",".","plus","(",")",",","null,","ImmutableList",".","of","(",")",",\n","className,","\"*\",","true",")",";","}","\n\n","final","ListSqlOperatorTable","table","=","new","ListSqlOperatorTable","(",")",";","for","(","String","name",":","schema",".","getFunctionNames","(",")",")","{","schema",".","getFunctions","(","name,","true",")",".","forEach","(","function","->","{","final","SqlIdentifier","id","=","new","SqlIdentifier","(","name,","SqlParserPos",".","ZERO",")",";","table",".","add","(","toOp","(","id,","function",")",")",";","}",")",";","}","return","table",";"],"docstring_tokens":["Creates","an","operator","table","that","contains","functions","in","the","given","class","or","classes"],"prompt_tokens":[]}
{"code_tokens":["public","static","List<SqlNode>","removeTypeSpecOperands","(","SqlCall","call",")","{","@Nullable","SqlNode[]","operands","=","call",".","getOperandList","(",")",".","toArray","(","new","SqlNode[0]",")",";","if","(","hasExplicitTypeSpec","(","operands",")",")","{","operands[2]","=","null",";","operands[3]","=","null",";","}","return","Arrays",".","stream","(","operands",")",".","filter","(","Objects::nonNull",")",".","collect","(","Collectors",".","toList","(",")",")",";"],"docstring_tokens":["Returns","new","operand","list","with","type","specification","removed"],"prompt_tokens":[]}
{"code_tokens":["public","boolean","canBeUsed","(","AggregateCall","call",")","{","switch","(","type",")","{","case","HYPER_UNIQUE:\n","case","THETA_SKETCH:\n","return","call","!=","null\n","&&","call",".","getAggregation","(",")",".","getKind","(",")","==","SqlKind",".","COUNT\n","&&","call",".","isDistinct","(",")",";","default:\n","return","false",";","}"],"docstring_tokens":["Returns","true","if","and","only","if","this","ComplexMetric","can","be","used","in","the","given","AggregateCall"],"prompt_tokens":[]}
{"code_tokens":["public","NlsString","rtrim","(",")","{","String","trimmed","=","SqlFunctions",".","rtrim","(","getValue","(",")",")",";","if","(","!trimmed",".","equals","(","getValue","(",")",")",")","{","return","new","NlsString","(","trimmed,","charsetName,","collation",")",";","}","return","this",";"],"docstring_tokens":["Returns","a","string","the","same","as","this","but","with","spaces","trimmed","from","the","right"],"prompt_tokens":[]}
{"code_tokens":["public","NlsString","copy","(","String","value",")","{","return","new","NlsString","(","value,","charsetName,","collation",")",";"],"docstring_tokens":["Creates","a","copy","of","this","NlsString","with","different","content","but","same","charset","and","collation"],"prompt_tokens":[]}
{"code_tokens":["public","static","RexWindowBound","create","(","SqlNode","node,","@Nullable","RexNode","rexNode",")","{","if","(","SqlWindow",".","isUnboundedPreceding","(","node",")",")","{","return","UNBOUNDED_PRECEDING",";","}","if","(","SqlWindow",".","isUnboundedFollowing","(","node",")",")","{","return","UNBOUNDED_FOLLOWING",";","}","if","(","SqlWindow",".","isCurrentRow","(","node",")",")","{","return","CURRENT_ROW",";","}","assert","rexNode","!=","null",":","\"offset","value","cannot","be","null","for","bounded","window\"",";","return","new","RexBoundedWindowBound","(","(","RexCall",")","rexNode",")",";"],"docstring_tokens":["Creates","a","window","bound","from","a","SqlNode"],"prompt_tokens":[]}
{"code_tokens":["protected","boolean","hasLeftChild","(","RelOptRuleCall","call",")","{","return","call",".","rel","(","1",")","instanceof","Project",";"],"docstring_tokens":["Returns","whether","the","rule","was","invoked","with","a","left","project","child"],"prompt_tokens":[]}
{"code_tokens":["protected","boolean","hasRightChild","(","RelOptRuleCall","call",")","{","return","call",".","rels",".","length","==","3",";"],"docstring_tokens":["Returns","whether","the","rule","was","invoked","with","2","children"],"prompt_tokens":[]}
{"code_tokens":["protected","RelNode","getProjectChild","(","RelOptRuleCall","call,\n","Project","project,\n","boolean","leftChild",")","{","return","project",".","getInput","(",")",";"],"docstring_tokens":["Returns","the","child","of","the","project","that","will","be","used","as","input","into","the","new","LogicalJoin","once","the","projects","are","pulled","above","the","LogicalJoin"],"prompt_tokens":[]}
{"code_tokens":["protected","void","createProjectExprs","(","@Nullable","Project","project,\n","RelNode","joinChild,\n","int","adjustmentAmount,\n","RexBuilder","rexBuilder,\n","List<RelDataTypeField>","joinChildrenFields,\n","List<Pair<RexNode,","String>>","projects",")","{","List<RelDataTypeField>","childFields","=\n","joinChild",".","getRowType","(",")",".","getFieldList","(",")",";","if","(","project","!=","null",")","{","List<Pair<RexNode,","String>>","namedProjects","=\n","project",".","getNamedProjects","(",")",";","int","nChildFields","=","childFields",".","size","(",")",";","int[]","adjustments","=","new","int[nChildFields]",";","for","(","int","i","=","0",";","i","<","nChildFields",";","i++",")","{","adjustments[i]","=","adjustmentAmount",";","}","for","(","Pair<RexNode,","String>","pair",":","namedProjects",")","{","RexNode","e","=","pair",".","left",";","if","(","adjustmentAmount","!=","0",")","{","//","shift","the","references","by","the","adjustment","amount\n","e","=","e",".","accept","(","new","RelOptUtil",".","RexInputConverter","(","rexBuilder,\n","childFields,\n","joinChildrenFields,\n","adjustments",")",")",";","}","projects",".","add","(","Pair",".","of","(","e,","pair",".","right",")",")",";","}","}","else","{","//","no","projection",";","just","create","references","to","the","inputs\n","for","(","int","i","=","0",";","i","<","childFields",".","size","(",")",";","i++",")","{","final","RelDataTypeField","field","=","childFields",".","get","(","i",")",";","projects",".","add","(","Pair",".","of","(","rexBuilder",".","makeInputRef","(","field",".","getType","(",")",",\n","i","+","adjustmentAmount",")",",\n","field",".","getName","(",")",")",")",";","}","}"],"docstring_tokens":["Creates","projection","expressions","corresponding","to","one","of","the","inputs","into","the","join"],"prompt_tokens":[]}
{"code_tokens":["public","void","addOperator","(","SqlOperator","op",")","{","listOpTab",".","add","(","op",")",";"],"docstring_tokens":["Adds","an","operator","to","this","table"],"prompt_tokens":[]}
{"code_tokens":["public","static","<V>","NameMap","immutableCopyOf","(","Map<String,","V>","names",")","{","return","new","NameMap<>","(","ImmutableSortedMap",".","copyOf","(","names,","COMPARATOR",")",")",";"],"docstring_tokens":["Creates","a","NameMap","that","is","an","immutable","copy","of","a","given","map"],"prompt_tokens":[]}
{"code_tokens":["public","boolean","containsKey","(","String","name,","boolean","caseSensitive",")","{","return","!range","(","name,","caseSensitive",")",".","isEmpty","(",")",";"],"docstring_tokens":["Returns","whether","this","map","contains","a","given","key,","with","a","given","case-sensitivity"],"prompt_tokens":[]}
{"code_tokens":["public","JoinInfo","analyzeCondition","(",")","{","return","joinInfo",";"],"docstring_tokens":["Analyzes","the","join","condition"],"prompt_tokens":[]}
{"code_tokens":["public","static","LogicalProject","create","(","final","RelNode","input,","List<RelHint>","hints,\n","final","List<?","extends","RexNode>","projects,","RelDataType","rowType",")","{","final","RelOptCluster","cluster","=","input",".","getCluster","(",")",";","final","RelMetadataQuery","mq","=","cluster",".","getMetadataQuery","(",")",";","final","RelTraitSet","traitSet","=\n","cluster",".","traitSet","(",")",".","replace","(","Convention",".","NONE",")",".","replaceIfs","(","RelCollationTraitDef",".","INSTANCE,\n","(",")","->","RelMdCollation",".","project","(","mq,","input,","projects",")",")",";","return","new","LogicalProject","(","cluster,","traitSet,","hints,","input,","projects,","rowType",")",";"],"docstring_tokens":["Creates","a","LogicalProject,","specifying","row","type","rather","than","field","names"],"prompt_tokens":[]}
{"code_tokens":["public","static","synchronized","SqlStdOperatorTable","instance","(",")","{","if","(","instance","==","null",")","{","//","Creates","and","initializes","the","standard","operator","table",".","//","Uses","two-phase","construction,","because","we","can't","initialize","the\n","//","table","until","the","constructor","of","the","sub-class","has","completed",".","instance","=","new","SqlStdOperatorTable","(",")",";","instance",".","init","(",")",";","}","return","instance",";"],"docstring_tokens":["Returns","the","standard","operator","table,","creating","it","if","necessary"],"prompt_tokens":[]}
{"code_tokens":["private","static","SqlCall","copy","(","SqlCall","call,","SqlOperator","operator",")","{","return","new","SqlBasicCall","(","operator,","call",".","getOperandList","(",")",",\n","call",".","getParserPosition","(",")",")",";"],"docstring_tokens":["Creates","a","copy","of","a","call","with","a","new","operator"],"prompt_tokens":[]}
{"code_tokens":["public","static","SqlQuantifyOperator","some","(","SqlKind","comparisonKind",")","{","switch","(","comparisonKind",")","{","case","EQUALS:\n","return","SOME_EQ",";","case","NOT_EQUALS:\n","return","SOME_NE",";","case","LESS_THAN:\n","return","SOME_LT",";","case","LESS_THAN_OR_EQUAL:\n","return","SOME_LE",";","case","GREATER_THAN:\n","return","SOME_GT",";","case","GREATER_THAN_OR_EQUAL:\n","return","SOME_GE",";","default:\n","throw","new","AssertionError","(","comparisonKind",")",";","}"],"docstring_tokens":["Returns","the","operator","for","SOME","comparisonKind"],"prompt_tokens":[]}
{"code_tokens":["public","static","SqlQuantifyOperator","all","(","SqlKind","comparisonKind",")","{","switch","(","comparisonKind",")","{","case","EQUALS:\n","return","ALL_EQ",";","case","NOT_EQUALS:\n","return","ALL_NE",";","case","LESS_THAN:\n","return","ALL_LT",";","case","LESS_THAN_OR_EQUAL:\n","return","ALL_LE",";","case","GREATER_THAN:\n","return","ALL_GT",";","case","GREATER_THAN_OR_EQUAL:\n","return","ALL_GE",";","default:\n","throw","new","AssertionError","(","comparisonKind",")",";","}"],"docstring_tokens":["Returns","the","operator","for","ALL","comparisonKind"],"prompt_tokens":[]}
{"code_tokens":["public","static","SqlOperator","like","(","boolean","negated,","boolean","caseSensitive",")","{","if","(","negated",")","{","if","(","caseSensitive",")","{","return","NOT_LIKE",";","}","else","{","return","SqlLibraryOperators",".","NOT_ILIKE",";","}","}","else","{","if","(","caseSensitive",")","{","return","LIKE",";","}","else","{","return","SqlLibraryOperators",".","ILIKE",";","}","}"],"docstring_tokens":["Returns","the","operator","for","LIKE","with","given","case-sensitivity,","optionally","negated"],"prompt_tokens":[]}
{"code_tokens":["@VisibleForTesting\n","@SuppressWarnings","(","\"BetaApi\"",")","public","static","RexNode","replaceTimeUnits","(","RexBuilder","rexBuilder,","RexNode","e,\n","String","timeZone",")","{","ImmutableSortedSet<TimeUnitRange>","timeUnits","=","extractTimeUnits","(","e",")",";","if","(","!timeUnits",".","contains","(","TimeUnitRange",".","YEAR",")",")","{","//","Case","when","we","have","FLOOR","or","CEIL","but","no","extract","on","YEAR",".","//","Add","YEAR","as","TimeUnit","so","that","FLOOR","gets","replaced","in","first","iteration\n","//","with","timeUnit","YEAR",".","timeUnits","=","ImmutableSortedSet",".","<TimeUnitRange>naturalOrder","(",")",".","addAll","(","timeUnits",")",".","add","(","TimeUnitRange",".","YEAR",")",".","build","(",")",";","}","final","Map<RexNode,","RangeSet<Calendar>>","operandRanges","=","new","HashMap<>","(",")",";","for","(","TimeUnitRange","timeUnit",":","timeUnits",")","{","e","=","e",".","accept","(","new","ExtractShuttle","(","rexBuilder,","timeUnit,","operandRanges,","timeUnits,\n","timeZone",")",")",";","}","return","e",";"],"docstring_tokens":["Replaces","calls","to","EXTRACT,","FLOOR","and","CEIL","in","an","expression"],"prompt_tokens":[]}
{"code_tokens":["public","void","execute","(","SqlCreateTable","create,","CalcitePrepare",".","Context","context",")","{","final","CalciteSchema","schema","=\n","Schemas",".","subSchema","(","context",".","getRootSchema","(",")",",\n","context",".","getDefaultSchemaPath","(",")",")",";","final","JavaTypeFactory","typeFactory","=","context",".","getTypeFactory","(",")",";","final","RelDataType","queryRowType",";","if","(","create",".","query","!=","null",")","{","//","A","bit","of","a","hack:","pretend","it's","a","view,","to","get","its","row","type\n","final","String","sql","=\n","create",".","query",".","toSqlString","(","CalciteSqlDialect",".","DEFAULT",")",".","getSql","(",")",";","final","ViewTableMacro","viewTableMacro","=\n","ViewTable",".","viewMacro","(","schema",".","plus","(",")",",","sql,","schema",".","path","(","null",")",",\n","context",".","getObjectPath","(",")",",","false",")",";","final","TranslatableTable","x","=","viewTableMacro",".","apply","(","ImmutableList",".","of","(",")",")",";","queryRowType","=","x",".","getRowType","(","typeFactory",")",";","\n\n","if","(","create",".","columnList","!=","null\n","&&","queryRowType",".","getFieldCount","(",")","!=","create",".","columnList",".","size","(",")",")","{","throw","SqlUtil",".","newContextException","(","create",".","columnList",".","getParserPosition","(",")",",\n","RESOURCE",".","columnCountMismatch","(",")",")",";","}","}","else","{","queryRowType","=","null",";","}","final","RelDataTypeFactory",".","Builder","builder","=","typeFactory",".","builder","(",")",";","if","(","create",".","columnList","!=","null",")","{","final","SqlValidator","validator","=","new","ContextSqlValidator","(","context,","false",")",";","create",".","forEachNameType","(","(","name,","typeSpec",")","->\n","builder",".","add","(","name",".","getSimple","(",")",",","typeSpec",".","deriveType","(","validator,","true",")",")",")",";","}","else","{","if","(","queryRowType","==","null",")","{","//","\"CREATE","TABLE","t\"","is","invalid",";","because","there","is","no","\"AS","query\"","we","need\n","//","a","list","of","column","names","and","types,","\"CREATE","TABLE","t","(","INT","c",")","\"",".","throw","SqlUtil",".","newContextException","(","create",".","name",".","getParserPosition","(",")",",\n","RESOURCE",".","createTableRequiresColumnList","(",")",")",";","}","builder",".","addAll","(","queryRowType",".","getFieldList","(",")",")",";","}","final","RelDataType","rowType","=","builder",".","build","(",")",";","schema",".","add","(","create",".","name",".","getSimple","(",")",",\n","new","MutableArrayTable","(","create",".","name",".","getSimple","(",")",",\n","RelDataTypeImpl",".","proto","(","rowType",")",")",")",";","if","(","create",".","query","!=","null",")","{","populate","(","create",".","name,","create",".","query,","context",")",";","}"],"docstring_tokens":["Executes","a","CREATE","TABLE","command"],"prompt_tokens":[]}
{"code_tokens":["protected","static","void","populate","(","SqlIdentifier","name,","SqlNode","query,\n","CalcitePrepare",".","Context","context",")","{","//","Generate,","prepare","and","execute","an","\"INSERT","INTO","table","query\"","statement",".","//","(","It's","a","bit","inefficient","that","we","convert","from","SqlNode","to","SQL","and","back\n","//","again",".",")","final","FrameworkConfig","config","=","Frameworks",".","newConfigBuilder","(",")",".","defaultSchema","(","Objects",".","requireNonNull","(","Schemas",".","subSchema","(","context",".","getRootSchema","(",")",",\n","context",".","getDefaultSchemaPath","(",")",")",")",".","plus","(",")",")",".","build","(",")",";","final","Planner","planner","=","Frameworks",".","getPlanner","(","config",")",";","try","{","final","StringBuilder","buf","=","new","StringBuilder","(",")",";","final","SqlPrettyWriter","w","=\n","new","SqlPrettyWriter","(","SqlPrettyWriter",".","config","(",")",".","withDialect","(","CalciteSqlDialect",".","DEFAULT",")",".","withAlwaysUseParentheses","(","false",")",",\n","buf",")",";","buf",".","append","(","\"INSERT","INTO","\"",")",";","name",".","unparse","(","w,","0,","0",")",";","buf",".","append","(","\"","\"",")",";","query",".","unparse","(","w,","0,","0",")",";","final","String","sql","=","buf",".","toString","(",")",";","final","SqlNode","query1","=","planner",".","parse","(","sql",")",";","final","SqlNode","query2","=","planner",".","validate","(","query1",")",";","final","RelRoot","r","=","planner",".","rel","(","query2",")",";","final","PreparedStatement","prepare","=\n","context",".","getRelRunner","(",")",".","prepareStatement","(","r",".","rel",")",";","int","rowCount","=","prepare",".","executeUpdate","(",")",";","Util",".","discard","(","rowCount",")",";","prepare",".","close","(",")",";","}","catch","(","SqlParseException","|","ValidationException\n","|","RelConversionException","|","SQLException","e",")","{","throw","Util",".","throwAsRuntime","(","e",")",";","}"],"docstring_tokens":["Populates","the","table","called","name","by","executing","query"],"prompt_tokens":[]}
{"code_tokens":["public","SqlToRelFixture","ensuring","(","Predicate<SqlToRelFixture>","predicate,\n","UnaryOperator<SqlToRelFixture>","remedy",")","{","SqlToRelFixture","f","=","this",";","if","(","!predicate",".","test","(","f",")",")","{","f","=","remedy",".","apply","(","f",")",";","assertThat","(","\"remedy","failed\",","predicate",".","test","(","f",")",",","is","(","true",")",")",";","}","return","f",";"],"docstring_tokens":["Returns","a","fixture","that","meets","a","given","condition,","applying","a","remedy","if","it","does","not","already"],"prompt_tokens":[]}
{"code_tokens":["public","List<RexNode>","identityProjects","(","final","RelDataType","rowType",")","{","return","Util",".","transform","(","rowType",".","getFieldList","(",")",",\n","input","->","new","RexInputRef","(","input",".","getIndex","(",")",",","input",".","getType","(",")",")",")",";"],"docstring_tokens":["Creates","a","list","of","org.apache.calcite.rex.RexInputRef","expressions,","projecting","the","fields","of","a","given","record","type"],"prompt_tokens":[]}
{"code_tokens":["public","RexNode","makeFieldAccess","(","RexNode","expr,\n","int","i",")","{","final","RelDataType","type","=","expr",".","getType","(",")",";","final","List<RelDataTypeField>","fields","=","type",".","getFieldList","(",")",";","if","(","(","i","<","0",")","||","(","i",">=","fields",".","size","(",")",")",")","{","throw","new","AssertionError","(","\"Field","ordinal","\"","+","i","+","\"","is","invalid","for","\"\n","+","\"","type","'\"","+","type","+","\"'\"",")",";","}","return","makeFieldAccessInternal","(","expr,","fields",".","get","(","i",")",")",";"],"docstring_tokens":["Creates","an","expression","accessing","a","field","with","a","given","ordinal","from","a","record"],"prompt_tokens":[]}
{"code_tokens":["public","final","RexNode","makeCall","(","SqlOperator","op,\n","RexNode",".",".",".","exprs",")","{","return","makeCall","(","op,","ImmutableList",".","copyOf","(","exprs",")",")",";"],"docstring_tokens":["Creates","a","call","with","a","list","of","arguments"],"prompt_tokens":[]}
{"code_tokens":["public","RelDataType","deriveReturnType","(","SqlOperator","op,\n","List<?","extends","RexNode>","exprs",")","{","return","op",".","inferReturnType","(","new","RexCallBinding","(","typeFactory,","op,","exprs,\n","ImmutableList",".","of","(",")",")",")",";"],"docstring_tokens":["Derives","the","return","type","of","a","call","to","an","operator"],"prompt_tokens":[]}
{"code_tokens":["public","RexNode","makeOver","(","RelDataType","type,\n","SqlAggFunction","operator,\n","List<RexNode>","exprs,\n","List<RexNode>","partitionKeys,\n","ImmutableList<RexFieldCollation>","orderKeys,\n","RexWindowBound","lowerBound,\n","RexWindowBound","upperBound,\n","boolean","rows,\n","boolean","allowPartial,\n","boolean","nullWhenCountZero,\n","boolean","distinct,\n","boolean","ignoreNulls",")","{","final","RexWindow","window","=\n","makeWindow","(","partitionKeys,\n","orderKeys,\n","lowerBound,\n","upperBound,\n","rows",")",";","final","RexOver","over","=","new","RexOver","(","type,","operator,","exprs,","window,\n","distinct,","ignoreNulls",")",";","RexNode","result","=","over",";","\n\n","//","This","should","be","correct","but","need","time","to","go","over","test","results",".","//","Also","want","to","look","at","combing","with","section","below",".","if","(","nullWhenCountZero",")","{","final","RelDataType","bigintType","=\n","typeFactory",".","createSqlType","(","SqlTypeName",".","BIGINT",")",";","result","=","makeCall","(","SqlStdOperatorTable",".","CASE,\n","makeCall","(","SqlStdOperatorTable",".","GREATER_THAN,\n","new","RexOver","(","bigintType,\n","SqlStdOperatorTable",".","COUNT,\n","exprs,\n","window,\n","distinct,\n","ignoreNulls",")",",\n","makeLiteral","(","BigDecimal",".","ZERO,\n","bigintType,\n","SqlTypeName",".","DECIMAL",")",")",",\n","ensureType","(","type,","//","SUM0","is","non-nullable,","thus","need","a","cast\n","new","RexOver","(","typeFactory",".","createTypeWithNullability","(","type,","false",")",",\n","operator,","exprs,","window,","distinct,","ignoreNulls",")",",\n","false",")",",\n","makeNullLiteral","(","type",")",")",";","}","if","(","!allowPartial",")","{","Preconditions",".","checkArgument","(","rows,","\"DISALLOW","PARTIAL","over","RANGE\"",")",";","final","RelDataType","bigintType","=\n","typeFactory",".","createSqlType","(","SqlTypeName",".","BIGINT",")",";","//","todo:","read","bound\n","result","=\n","makeCall","(","SqlStdOperatorTable",".","CASE,\n","makeCall","(","SqlStdOperatorTable",".","GREATER_THAN_OR_EQUAL,\n","new","RexOver","(","bigintType,\n","SqlStdOperatorTable",".","COUNT,\n","ImmutableList",".","of","(",")",",\n","window,\n","distinct,\n","ignoreNulls",")",",\n","makeLiteral","(","BigDecimal",".","valueOf","(","2",")",",\n","bigintType,\n","SqlTypeName",".","DECIMAL",")",")",",\n","result,\n","constantNull",")",";","}","return","result",";"],"docstring_tokens":["Creates","a","call","to","a","windowed","agg"],"prompt_tokens":[]}
{"code_tokens":["public","RexNode","makeCorrel","(","RelDataType","type,\n","CorrelationId","id",")","{","return","new","RexCorrelVariable","(","id,","type",")",";"],"docstring_tokens":["Creates","an","expression","referencing","a","correlation","variable"],"prompt_tokens":[]}
{"code_tokens":["public","RexNode","makeCast","(","RelDataType","type,\n","RexNode","exp",")","{","return","makeCast","(","type,","exp,","false",")",";"],"docstring_tokens":["Creates","a","call","to","the","CAST","operator"],"prompt_tokens":[]}
{"code_tokens":["public","RexNode","makeNotNull","(","RexNode","exp",")","{","final","RelDataType","type","=","exp",".","getType","(",")",";","if","(","!type",".","isNullable","(",")",")","{","return","exp",";","}","final","RelDataType","notNullType","=\n","typeFactory",".","createTypeWithNullability","(","type,","false",")",";","return","makeAbstractCast","(","notNullType,","exp",")",";"],"docstring_tokens":["Makes","a","cast","of","a","value","to","NOT","NULL;","no-op","if","the","type","already","has","NOT","NULL"],"prompt_tokens":[]}
{"code_tokens":["public","RexInputRef","makeInputRef","(","RelDataType","type,\n","int","i",")","{","type","=","SqlTypeUtil",".","addCharsetAndCollation","(","type,","typeFactory",")",";","return","new","RexInputRef","(","i,","type",")",";"],"docstring_tokens":["Creates","a","reference","to","a","given","field","of","the","input","record"],"prompt_tokens":[]}
{"code_tokens":["public","RexInputRef","makeInputRef","(","RelNode","input,","int","i",")","{","return","makeInputRef","(","input",".","getRowType","(",")",".","getFieldList","(",")",".","get","(","i",")",".","getType","(",")",",","i",")",";"],"docstring_tokens":["Creates","a","reference","to","a","given","field","of","the","input","relational","expression"],"prompt_tokens":[]}
{"code_tokens":["public","RexLiteral","makeFlag","(","Enum","flag",")","{","assert","flag","!=","null",";","return","makeLiteral","(","flag,\n","typeFactory",".","createSqlType","(","SqlTypeName",".","SYMBOL",")",",\n","SqlTypeName",".","SYMBOL",")",";"],"docstring_tokens":["Creates","a","literal","representing","a","flag"],"prompt_tokens":[]}
{"code_tokens":["public","RexLiteral","makeExactLiteral","(","BigDecimal","bd",")","{","RelDataType","relType",";","int","scale","=","bd",".","scale","(",")",";","assert","scale",">=","0",";","assert","scale","<=","typeFactory",".","getTypeSystem","(",")",".","getMaxNumericScale","(",")",":","scale",";","if","(","scale","==","0",")","{","if","(","bd",".","compareTo","(","INT_MIN",")",">=","0","&&","bd",".","compareTo","(","INT_MAX",")","<=","0",")","{","relType","=","typeFactory",".","createSqlType","(","SqlTypeName",".","INTEGER",")",";","}","else","{","relType","=","typeFactory",".","createSqlType","(","SqlTypeName",".","BIGINT",")",";","}","}","else","{","int","precision","=","bd",".","unscaledValue","(",")",".","abs","(",")",".","toString","(",")",".","length","(",")",";","if","(","precision",">","scale",")","{","//","bd","is","greater","than","or","equal","to","1\n","relType","=\n","typeFactory",".","createSqlType","(","SqlTypeName",".","DECIMAL,","precision,","scale",")",";","}","else","{","//","bd","is","less","than","1\n","relType","=\n","typeFactory",".","createSqlType","(","SqlTypeName",".","DECIMAL,","scale","+","1,","scale",")",";","}","}","return","makeExactLiteral","(","bd,","relType",")",";"],"docstring_tokens":["Creates","a","numeric","literal"],"prompt_tokens":[]}
{"code_tokens":["public","RexLiteral","makeBigintLiteral","(","@Nullable","BigDecimal","bd",")","{","RelDataType","bigintType","=\n","typeFactory",".","createSqlType","(","SqlTypeName",".","BIGINT",")",";","return","makeLiteral","(","bd,","bigintType,","SqlTypeName",".","DECIMAL",")",";"],"docstring_tokens":["Creates","a","BIGINT","literal"],"prompt_tokens":[]}
{"code_tokens":["public","RexLiteral","makeBinaryLiteral","(","ByteString","byteString",")","{","return","makeLiteral","(","byteString,\n","typeFactory",".","createSqlType","(","SqlTypeName",".","BINARY,","byteString",".","length","(",")",")",",\n","SqlTypeName",".","BINARY",")",";"],"docstring_tokens":["Creates","a","byte","array","literal"],"prompt_tokens":[]}
{"code_tokens":["public","RexLiteral","makeApproxLiteral","(","BigDecimal","bd",")","{","//","Validator","should","catch","if","underflow","is","allowed\n","//","If","underflow","is","allowed,","let","underflow","become","zero\n","if","(","bd",".","doubleValue","(",")","==","0",")","{","bd","=","BigDecimal",".","ZERO",";","}","return","makeApproxLiteral","(","bd,","typeFactory",".","createSqlType","(","SqlTypeName",".","DOUBLE",")",")",";"],"docstring_tokens":["Creates","a","double-precision","literal"],"prompt_tokens":[]}
{"code_tokens":["public","RexLiteral","makeLiteral","(","String","s",")","{","assert","s","!=","null",";","return","makePreciseStringLiteral","(","s",")",";"],"docstring_tokens":["Creates","a","character","string","literal"],"prompt_tokens":[]}
{"code_tokens":["protected","RexLiteral","makePreciseStringLiteral","(","String","s",")","{","assert","s","!=","null",";","if","(","s",".","equals","(","\"\"",")",")","{","return","charEmpty",";","}","return","makeCharLiteral","(","new","NlsString","(","s,","null,","null",")",")",";"],"docstring_tokens":["Creates","a","character","string","literal","with","type","CHAR","and","default","charset","and","collation"],"prompt_tokens":[]}
{"code_tokens":["protected","RexLiteral","makePreciseStringLiteral","(","ByteString","value,\n","String","charsetName,","SqlCollation","collation",")","{","return","makeCharLiteral","(","new","NlsString","(","value,","charsetName,","collation",")",")",";"],"docstring_tokens":["Creates","a","character","string","literal","with","type","CHAR"],"prompt_tokens":[]}
{"code_tokens":["public","RexLiteral","makeDateLiteral","(","DateString","date",")","{","return","makeLiteral","(","Objects",".","requireNonNull","(","date,","\"date\"",")",",\n","typeFactory",".","createSqlType","(","SqlTypeName",".","DATE",")",",","SqlTypeName",".","DATE",")",";"],"docstring_tokens":["Creates","a","Date","literal"],"prompt_tokens":[]}
{"code_tokens":["public","RexLiteral","makeTimeLiteral","(","TimeString","time,","int","precision",")","{","return","makeLiteral","(","Objects",".","requireNonNull","(","time,","\"time\"",")",",\n","typeFactory",".","createSqlType","(","SqlTypeName",".","TIME,","precision",")",",\n","SqlTypeName",".","TIME",")",";"],"docstring_tokens":["Creates","a","Time","literal"],"prompt_tokens":[]}
{"code_tokens":["public","RexLiteral","makeTimeWithLocalTimeZoneLiteral","(","TimeString","time,\n","int","precision",")","{","return","makeLiteral","(","Objects",".","requireNonNull","(","time,","\"time\"",")",",\n","typeFactory",".","createSqlType","(","SqlTypeName",".","TIME_WITH_LOCAL_TIME_ZONE,","precision",")",",\n","SqlTypeName",".","TIME_WITH_LOCAL_TIME_ZONE",")",";"],"docstring_tokens":["Creates","a","Time","with","local","time-zone","literal"],"prompt_tokens":[]}
{"code_tokens":["public","RexLiteral","makeTimestampLiteral","(","TimestampString","timestamp,\n","int","precision",")","{","return","makeLiteral","(","Objects",".","requireNonNull","(","timestamp,","\"timestamp\"",")",",\n","typeFactory",".","createSqlType","(","SqlTypeName",".","TIMESTAMP,","precision",")",",\n","SqlTypeName",".","TIMESTAMP",")",";"],"docstring_tokens":["Creates","a","Timestamp","literal"],"prompt_tokens":[]}
{"code_tokens":["public","RexLiteral","makeTimestampWithLocalTimeZoneLiteral","(","TimestampString","timestamp,\n","int","precision",")","{","return","makeLiteral","(","Objects",".","requireNonNull","(","timestamp,","\"timestamp\"",")",",\n","typeFactory",".","createSqlType","(","SqlTypeName",".","TIMESTAMP_WITH_LOCAL_TIME_ZONE,","precision",")",",\n","SqlTypeName",".","TIMESTAMP_WITH_LOCAL_TIME_ZONE",")",";"],"docstring_tokens":["Creates","a","Timestamp","with","local","time-zone","literal"],"prompt_tokens":[]}
{"code_tokens":["private","static","boolean","areAssignable","(","RexNode","arg,","List<?","extends","RexNode>","bounds",")","{","for","(","RexNode","bound",":","bounds",")","{","if","(","!SqlTypeUtil",".","inSameFamily","(","arg",".","getType","(",")",",","bound",".","getType","(",")",")","&&","!","(","arg",".","getType","(",")",".","isStruct","(",")","&&","bound",".","getType","(",")",".","isStruct","(",")",")",")","{","return","false",";","}","}","return","true",";"],"docstring_tokens":["Returns","whether","and","argument","and","bounds","are","have","types","that","are","sufficiently","compatible","to","be","converted","to","a","Sarg"],"prompt_tokens":[]}
{"code_tokens":["private","static","NlsString","padRight","(","NlsString","s,","int","length",")","{","if","(","s",".","getValue","(",")",".","length","(",")",">=","length",")","{","return","s",";","}","return","s",".","copy","(","padRight","(","s",".","getValue","(",")",",","length",")",")",";"],"docstring_tokens":["Returns","an","NlsString","with","spaces","to","make","it","at","least","a","given","length"],"prompt_tokens":[]}
{"code_tokens":["public","static","Builder","builder","(","String","hintName",")","{","return","new","Builder","(","hintName",")",";"],"docstring_tokens":["Creates","a","hint","builder","with","specified","hint","name"],"prompt_tokens":[]}
{"code_tokens":["public","RelHint","copy","(","List<Integer>","inheritPath",")","{","Objects",".","requireNonNull","(","inheritPath,","\"inheritPath\"",")",";","return","new","RelHint","(","inheritPath,","hintName,","listOptions,","kvOptions",")",";"],"docstring_tokens":["Returns","a","copy","of","this","hint","with","specified","inherit","path"],"prompt_tokens":[]}
{"code_tokens":["public","static","@Nullable","List<RelCollation>","enumerableHashJoin","(","RelMetadataQuery","mq,\n","RelNode","left,","RelNode","right,","JoinRelType","joinType",")","{","if","(","joinType","==","JoinRelType",".","SEMI",")","{","return","enumerableSemiJoin","(","mq,","left,","right",")",";","}","else","{","return","enumerableJoin0","(","mq,","left,","right,","joinType",")",";","}"],"docstring_tokens":["Returns","the","collation","of","EnumerableHashJoin","based","on","its","inputs","and","the","join","type"],"prompt_tokens":[]}
{"code_tokens":["public","static","@Nullable","List<RelCollation>","enumerableNestedLoopJoin","(","RelMetadataQuery","mq,\n","RelNode","left,","RelNode","right,","JoinRelType","joinType",")","{","return","enumerableJoin0","(","mq,","left,","right,","joinType",")",";"],"docstring_tokens":["Returns","the","collation","of","EnumerableNestedLoopJoin","based","on","its","inputs","and","the","join","type"],"prompt_tokens":[]}
{"code_tokens":["private","static","String","concatenate","(","List<?>","list",")","{","final","StringJoiner","buf","=","new","StringJoiner","(","\"\\n\",","\"\",","\"\\n\"",")",";","for","(","Object","o",":","list",")","{","if","(","!","(","o","instanceof","String",")",")","{","throw","new","RuntimeException","(","\"each","element","of","a","string","list","must","be","a","string",";","found:","\"","+","o",")",";","}","buf",".","add","(","(","String",")","o",")",";","}","return","buf",".","toString","(",")",";"],"docstring_tokens":["Converts","a","list","of","strings","into","a","multi-line","string"],"prompt_tokens":[]}
{"code_tokens":["@Deprecated","//","to","be","removed","before","2",".","0\n","public","static","ImmutableMultimap<String,","ScalarFunction>","createAll","(","Class<?>","clazz",")","{","final","ImmutableMultimap",".","Builder<String,","ScalarFunction>","builder","=\n","ImmutableMultimap",".","builder","(",")",";","for","(","Method","method",":","clazz",".","getMethods","(",")",")","{","if","(","method",".","getDeclaringClass","(",")","==","Object",".","class",")","{","continue",";","}","if","(","!Modifier",".","isStatic","(","method",".","getModifiers","(",")",")","&&","!classHasPublicZeroArgsConstructor","(","clazz",")",")","{","continue",";","}","final","ScalarFunction","function","=","create","(","method",")",";","builder",".","put","(","method",".","getName","(",")",",","function",")",";","}","return","builder",".","build","(",")",";"],"docstring_tokens":["Creates","org.apache.calcite.schema.ScalarFunction","for","each","method","in","a","given","class"],"prompt_tokens":[]}
{"code_tokens":["public","double","rand","(",")","{","if","(","random","==","null",")","{","random","=","new","Random","(",")",";","}","return","random",".","nextDouble","(",")",";"],"docstring_tokens":["Implements","the","RAND","SQL","function"],"prompt_tokens":[]}
{"code_tokens":["public","static","ImmutableBitSet","of","(",")","{","return","EMPTY",";"],"docstring_tokens":["Creates","an","ImmutableBitSet","with","no","bits"],"prompt_tokens":[]}
{"code_tokens":["public","static","ImmutableBitSet","fromBitSet","(","BitSet","input",")","{","return","ImmutableBitSet",".","of","(","BitSets",".","toIter","(","input",")",")",";"],"docstring_tokens":["Returns","a","new","immutable","bit","set","containing","all","the","bits","in","the","given","BitSet"],"prompt_tokens":[]}
{"code_tokens":["public","static","ImmutableBitSet","range","(","int","toIndex",")","{","return","range","(","0,","toIndex",")",";"],"docstring_tokens":["Creates","an","ImmutableBitSet","with","bits","between","0","and","toIndex","set"],"prompt_tokens":[]}
{"code_tokens":["@Pure\n","private","static","int","wordIndex","(","int","bitIndex",")","{","return","bitIndex",">>","ADDRESS_BITS_PER_WORD",";"],"docstring_tokens":["Given","a","bit","index,","return","word","index","containing","it"],"prompt_tokens":[]}
{"code_tokens":["public","int","cardinality","(",")","{","return","countBits","(","words",")",";"],"docstring_tokens":["Returns","the","number","of","bits","set","to","true","in","this","ImmutableBitSet"],"prompt_tokens":[]}
{"code_tokens":["public","int","nextClearBit","(","int","fromIndex",")","{","if","(","fromIndex","<","0",")","{","throw","new","IndexOutOfBoundsException","(","\"fromIndex","<","0:","\"","+","fromIndex",")",";","}","int","u","=","wordIndex","(","fromIndex",")",";","if","(","u",">=","words",".","length",")","{","return","fromIndex",";","}","long","word","=","~words[u]","&","(","WORD_MASK","<<","fromIndex",")",";","\n\n","while","(","true",")","{","if","(","word","!=","0",")","{","return","(","u","*","BITS_PER_WORD",")","+","Long",".","numberOfTrailingZeros","(","word",")",";","}","if","(","++u","==","words",".","length",")","{","return","words",".","length","*","BITS_PER_WORD",";","}","word","=","~words[u]",";","}"],"docstring_tokens":["Returns","the","index","of","the","first","bit","that","is","set","to","false","that","occurs","on","or","after","the","specified","starting","index"],"prompt_tokens":[]}
{"code_tokens":["public","List<Integer>","toList","(",")","{","final","List<Integer>","list","=","new","ArrayList<>","(",")",";","for","(","int","i","=","nextSetBit","(","0",")",";","i",">=","0",";","i","=","nextSetBit","(","i","+","1",")",")","{","list",".","add","(","i",")",";","}","return","list",";"],"docstring_tokens":["Converts","this","bit","set","to","a","list"],"prompt_tokens":[]}
{"code_tokens":["public","int[]","toArray","(",")","{","final","int[]","integers","=","new","int[cardinality","(",")","]",";","int","j","=","0",";","for","(","int","i","=","nextSetBit","(","0",")",";","i",">=","0",";","i","=","nextSetBit","(","i","+","1",")",")","{","integers[j++]","=","i",";","}","return","integers",";"],"docstring_tokens":["Converts","this","bit","set","to","an","array"],"prompt_tokens":[]}
{"code_tokens":["public","long[]","toLongArray","(",")","{","return","words",".","length","==","0","?","words",":","words",".","clone","(",")",";"],"docstring_tokens":["Converts","this","bit","set","to","an","array","of","little-endian","words"],"prompt_tokens":[]}
{"code_tokens":["public","ImmutableBitSet","union","(","BitSet","other",")","{","return","rebuild","(",")","//","remember","\"this\"","and","try","to","re-use","later\n",".","addAll","(","BitSets",".","toIter","(","other",")",")",".","build","(",")",";"],"docstring_tokens":["Returns","the","union","of","this","immutable","bit","set","with","a","BitSet"],"prompt_tokens":[]}
{"code_tokens":["public","ImmutableBitSet","union","(","ImmutableBitSet","other",")","{","return","rebuild","(",")","//","remember","\"this\"","and","try","to","re-use","later\n",".","addAll","(","other",")",".","build","(","other",")",";","//","try","to","re-use","\"other\"\n"],"docstring_tokens":["Returns","the","union","of","this","bit","set","with","another"],"prompt_tokens":[]}
{"code_tokens":["public","static","ImmutableBitSet","union","(","Iterable<?","extends","ImmutableBitSet>","sets",")","{","final","Builder","builder","=","builder","(",")",";","for","(","ImmutableBitSet","set",":","sets",")","{","builder",".","addAll","(","set",")",";","}","return","builder",".","build","(",")",";"],"docstring_tokens":["Returns","the","union","of","a","number","of","bit","sets"],"prompt_tokens":[]}
{"code_tokens":["public","ImmutableBitSet","except","(","ImmutableBitSet","that",")","{","final","Builder","builder","=","rebuild","(",")",";","builder",".","removeAll","(","that",")",";","return","builder",".","build","(",")",";"],"docstring_tokens":["Returns","a","bit","set","with","all","the","bits","in","this","set","that","are","not","in","another"],"prompt_tokens":[]}
{"code_tokens":["public","ImmutableBitSet","intersect","(","ImmutableBitSet","that",")","{","final","Builder","builder","=","rebuild","(",")",";","builder",".","intersect","(","that",")",";","return","builder",".","build","(",")",";"],"docstring_tokens":["Returns","a","bit","set","with","all","the","bits","set","in","both","this","set","and","in","another"],"prompt_tokens":[]}
{"code_tokens":["public","int","indexOf","(","int","bit",")","{","for","(","int","i","=","nextSetBit","(","0",")",",","k","=","0",";",";","i","=","nextSetBit","(","i","+","1",")",",","++k",")","{","if","(","i","<","0",")","{","return","-1",";","}","if","(","i","==","bit",")","{","return","k",";","}","}"],"docstring_tokens":["The","ordinal","of","a","given","bit,","or","-1","if","it","is","not","set"],"prompt_tokens":[]}
{"code_tokens":["public","boolean","isEmpty","(",")","{","return","words",".","length","==","0",";"],"docstring_tokens":["Returns","true","if","this","ImmutableBitSet","contains","no","bits","that","are","set","to","true"],"prompt_tokens":[]}
{"code_tokens":["public","Builder","rebuild","(",")","{","return","new","Rebuilder","(","this",")",";"],"docstring_tokens":["Creates","a","Builder","whose","initial","contents","are","the","same","as","this","ImmutableBitSet"],"prompt_tokens":[]}
{"code_tokens":["public","int","nth","(","int","n",")","{","int","start","=","0",";","for","(","long","word",":","words",")","{","final","int","bitCount","=","Long",".","bitCount","(","word",")",";","if","(","n","<","bitCount",")","{","while","(","word","!=","0",")","{","if","(","(","word","&","1",")","==","1",")","{","if","(","n","==","0",")","{","return","start",";","}","--n",";","}","word",">>=","1",";","++start",";","}","}","start","+=","64",";","n","-=","bitCount",";","}","throw","new","IndexOutOfBoundsException","(","\"index","out","of","range:","\"","+","n",")",";"],"docstring_tokens":["Returns","the","nth","set","bit"],"prompt_tokens":[]}
{"code_tokens":["public","ImmutableBitSet","clear","(","int","i",")","{","return","except","(","ImmutableBitSet",".","of","(","i",")",")",";"],"docstring_tokens":["Returns","a","bit","set","the","same","as","this","but","with","a","given","bit","cleared"],"prompt_tokens":[]}
{"code_tokens":["public","ImmutableBitSet","clearIf","(","int","i,","boolean","condition",")","{","return","condition","?","except","(","ImmutableBitSet",".","of","(","i",")",")",":","this",";"],"docstring_tokens":["Returns","a","bit","set","the","same","as","this","but","with","a","given","bit","cleared","if","condition","is","true"],"prompt_tokens":[]}
{"code_tokens":["public","BitSet","toBitSet","(",")","{","return","BitSets",".","of","(","this",")",";"],"docstring_tokens":["Returns","a","BitSet","that","has","the","same","contents","as","this","ImmutableBitSet"],"prompt_tokens":[]}
{"code_tokens":["public","ImmutableBitSet","permute","(","Map<Integer,","Integer>","map",")","{","final","Builder","builder","=","builder","(",")",";","for","(","int","i","=","nextSetBit","(","0",")",";","i",">=","0",";","i","=","nextSetBit","(","i","+","1",")",")","{","Integer","value","=","map",".","get","(","i",")",";","if","(","value","==","null",")","{","throw","new","NullPointerException","(","\"Index","\"","+","i","+","\"","is","not","mapped","in","\"","+","map",")",";","}","builder",".","set","(","value",")",";","}","return","builder",".","build","(",")",";"],"docstring_tokens":["Permutes","a","bit","set","according","to","a","given","mapping"],"prompt_tokens":[]}
{"code_tokens":["public","static","Iterable<ImmutableBitSet>","permute","(","Iterable<ImmutableBitSet>","bitSets,\n","final","Map<Integer,","Integer>","map",")","{","return","Util",".","transform","(","bitSets,","bitSet","->","bitSet",".","permute","(","map",")",")",";"],"docstring_tokens":["Permutes","a","collection","of","bit","sets","according","to","a","given","mapping"],"prompt_tokens":[]}
{"code_tokens":["public","static","boolean","allContain","(","Collection<ImmutableBitSet>","bitSets,","int","bit",")","{","for","(","ImmutableBitSet","bitSet",":","bitSets",")","{","if","(","!bitSet",".","get","(","bit",")",")","{","return","false",";","}","}","return","true",";"],"docstring_tokens":["Checks","if","all","bit","sets","contain","a","particular","bit"],"prompt_tokens":[]}
{"code_tokens":["public","HepProgramBuilder","addConverters","(","boolean","guaranteed",")","{","checkArgument","(","group","<","0",")",";","return","addInstruction","(","new","HepInstruction",".","ConverterRules","(","guaranteed",")",")",";"],"docstring_tokens":["Adds","an","instruction","to","attempt","to","match","instances","of","org.apache.calcite.rel.convert.ConverterRule,","but","only","where","a","conversion","is","actually","required"],"prompt_tokens":[]}
{"code_tokens":["public","HepProgram","build","(",")","{","checkArgument","(","group","<","0",")",";","HepProgram","program","=","new","HepProgram","(","instructions",")",";","clear","(",")",";","return","program",";"],"docstring_tokens":["Returns","the","constructed","program,","clearing","the","state","of","this","program","builder","as","a","side-effect"],"prompt_tokens":[]}
{"code_tokens":["public","static","Mapping","create","(","MappingType","mappingType,\n","int","sourceCount,\n","int","targetCount",")","{","switch","(","mappingType",")","{","case","BIJECTION:\n","assert","sourceCount","==","targetCount",";","return","new","Permutation","(","sourceCount",")",";","case","INVERSE_SURJECTION:\n","assert","sourceCount",">=","targetCount",";","return","new","SurjectionWithInverse","(","sourceCount,\n","targetCount",")",";","case","PARTIAL_SURJECTION:\n","case","SURJECTION:\n","return","new","Mappings",".","PartialMapping","(","sourceCount,\n","targetCount,\n","mappingType",")",";","case","PARTIAL_FUNCTION:\n","case","FUNCTION:\n","return","new","PartialFunctionImpl","(","sourceCount,\n","targetCount,\n","mappingType",")",";","case","INVERSE_FUNCTION:\n","case","INVERSE_PARTIAL_FUNCTION:\n","return","new","InverseMapping","(","create","(","mappingType",".","inverse","(",")",",","targetCount,","sourceCount",")",")",";","default:\n","throw","Util",".","needToImplement","(","\"no","known","implementation","for","mapping","type","\"","+","mappingType",")",";","}"],"docstring_tokens":["Creates","a","mapping","with","required","properties"],"prompt_tokens":[]}
{"code_tokens":["public","static","Mapping","invert","(","Mapping","mapping",")","{","if","(","mapping","instanceof","InverseMapping",")","{","return","(","(","InverseMapping",")","mapping",")",".","parent",";","}","return","new","InverseMapping","(","mapping",")",";"],"docstring_tokens":["Converts","a","mapping","to","its","inverse"],"prompt_tokens":[]}
{"code_tokens":["public","static","Expression","expression","(","SchemaPlus","schema",")","{","return","schema",".","getExpression","(","schema",".","getParentSchema","(",")",",","schema",".","getName","(",")",")",";"],"docstring_tokens":["Returns","the","expression","for","a","schema"],"prompt_tokens":[]}
{"code_tokens":["public","static","<E>","Queryable<E>","queryable","(","DataContext","root,","SchemaPlus","schema,\n","Class<E>","clazz,","String","tableName",")","{","QueryableTable","table","=","(","QueryableTable",")","requireNonNull","(","schema",".","getTable","(","tableName",")",",\n","(",")","->","\"table","\"","+","tableName","+","\"","is","not","found","in","\"","+","schema",")",";","QueryProvider","queryProvider","=","root",".","getQueryProvider","(",")",";","return","table",".","asQueryable","(","queryProvider,","schema,","tableName",")",";"],"docstring_tokens":["Returns","a","Queryable,","given","a","schema","and","table","name"],"prompt_tokens":[]}
{"code_tokens":["private","static","CalcitePrepare",".","Context","makeContext","(","CalciteConnection","connection,","CalciteSchema","schema,\n","@Nullable","List<String>","schemaPath,","@Nullable","List<String>","objectPath,\n","final","ImmutableMap<CalciteConnectionProperty,","String>","propValues",")","{","if","(","connection","==","null",")","{","final","CalcitePrepare",".","Context","context0","=","CalcitePrepare",".","Dummy",".","peek","(",")",";","final","CalciteConnectionConfig","config","=\n","mutate","(","context0",".","config","(",")",",","propValues",")",";","return","makeContext","(","config,","context0",".","getTypeFactory","(",")",",\n","context0",".","getDataContext","(",")",",","schema,","schemaPath,","objectPath",")",";","}","else","{","final","CalciteConnectionConfig","config","=\n","mutate","(","connection",".","config","(",")",",","propValues",")",";","return","makeContext","(","config,","connection",".","getTypeFactory","(",")",",\n","DataContexts",".","of","(","connection,","schema",".","root","(",")",".","plus","(",")",")",",","schema,\n","schemaPath,","objectPath",")",";","}"],"docstring_tokens":["Creates","a","context","for","the","purposes","of","preparing","a","statement"],"prompt_tokens":[]}
{"code_tokens":["public","static","Path","path","(","CalciteSchema","rootSchema,","Iterable<String>","names",")","{","final","ImmutableList",".","Builder<Pair<String,","Schema>>","builder","=\n","ImmutableList",".","builder","(",")",";","Schema","schema","=","rootSchema",".","plus","(",")",";","final","Iterator<String>","iterator","=","names",".","iterator","(",")",";","if","(","!iterator",".","hasNext","(",")",")","{","return","PathImpl",".","EMPTY",";","}","if","(","!rootSchema",".","name",".","isEmpty","(",")",")","{","//","If","path","starts","with","the","name","of","the","root","schema,","ignore","the","first","step\n","//","in","the","path",".","Preconditions",".","checkState","(","rootSchema",".","name",".","equals","(","iterator",".","next","(",")",")",")",";","}","for","(",";",";",")","{","final","String","name","=","iterator",".","next","(",")",";","builder",".","add","(","Pair",".","of","(","name,","schema",")",")",";","if","(","!iterator",".","hasNext","(",")",")","{","return","path","(","builder",".","build","(",")",")",";","}","Schema","next","=","schema",".","getSubSchema","(","name",")",";","if","(","next","==","null",")","{","throw","new","IllegalArgumentException","(","\"schema","\"","+","name","+","\"","is","not","found","in","\"","+","schema",")",";","}","schema","=","next",";","}"],"docstring_tokens":["Creates","a","path","with","a","given","list","of","names","starting","from","a","given","root","schema"],"prompt_tokens":[]}
{"code_tokens":["public","static","Path","path","(","SchemaPlus","schema",")","{","List<Pair<String,","Schema>>","list","=","new","ArrayList<>","(",")",";","for","(","SchemaPlus","s","=","schema",";","s","!=","null",";","s","=","s",".","getParentSchema","(",")",")","{","list",".","add","(","Pair",".","of","(","s",".","getName","(",")",",","s",")",")",";","}","return","new","PathImpl","(","ImmutableList",".","copyOf","(","Lists",".","reverse","(","list",")",")",")",";"],"docstring_tokens":["Returns","the","path","to","get","to","a","schema","from","its","root"],"prompt_tokens":[]}
{"code_tokens":["private","static","CalciteConnectionConfig","connConfig","(","Context","context,\n","SqlParser",".","Config","parserConfig",")","{","CalciteConnectionConfigImpl","config","=\n","context",".","maybeUnwrap","(","CalciteConnectionConfigImpl",".","class",")",".","orElse","(","CalciteConnectionConfig",".","DEFAULT",")",";","if","(","!config",".","isSet","(","CalciteConnectionProperty",".","CASE_SENSITIVE",")",")","{","config","=","config",".","set","(","CalciteConnectionProperty",".","CASE_SENSITIVE,\n","String",".","valueOf","(","parserConfig",".","caseSensitive","(",")",")",")",";","}","if","(","!config",".","isSet","(","CalciteConnectionProperty",".","CONFORMANCE",")",")","{","config","=","config",".","set","(","CalciteConnectionProperty",".","CONFORMANCE,\n","String",".","valueOf","(","parserConfig",".","conformance","(",")",")",")",";","}","return","config",";"],"docstring_tokens":["Gets","a","user-defined","config","and","appends","default","connection","values"],"prompt_tokens":[]}
{"code_tokens":["public","void","addIdentity","(",")","{","assert","projectRefList",".","isEmpty","(",")",";","for","(","RelDataTypeField","field",":","inputRowType",".","getFieldList","(",")",")","{","addProject","(","new","RexInputRef","(","field",".","getIndex","(",")",",\n","field",".","getType","(",")",")",",\n","field",".","getName","(",")",")",";","}"],"docstring_tokens":["Adds","a","project","item","for","every","input","field"],"prompt_tokens":[]}
{"code_tokens":["public","RexLocalRef","makeInputRef","(","int","index",")","{","final","List<RelDataTypeField>","fields","=","inputRowType",".","getFieldList","(",")",";","assert","index","<","fields",".","size","(",")",";","final","RelDataTypeField","field","=","fields",".","get","(","index",")",";","return","new","RexLocalRef","(","index,\n","field",".","getType","(",")",")",";"],"docstring_tokens":["Creates","a","reference","to","a","given","input","field"],"prompt_tokens":[]}
{"code_tokens":["public","SqlGroupedWindowFunction","auxiliary","(","SqlKind","kind",")","{","return","auxiliary","(","kind",".","name","(",")",",","kind",")",";"],"docstring_tokens":["Creates","an","auxiliary","function","from","this","grouped","window","function"],"prompt_tokens":[]}
{"code_tokens":["protected","static","List<Integer>","simplifyDistributionKeys","(","RelDistribution","distribution,\n","Set<Integer>","constants",")","{","return","distribution",".","getKeys","(",")",".","stream","(",")",".","filter","(","key","->","!constants",".","contains","(","key",")",")",".","collect","(","Collectors",".","toList","(",")",")",";"],"docstring_tokens":["Removes","constant","in","distribution","keys"],"prompt_tokens":[]}
{"code_tokens":["public","static","@Nullable","Boolean","toBoolean","(","@Nullable","String","str",")","{","if","(","str","==","null",")","{","return","null",";","}","str","=","str",".","trim","(",")",";","if","(","str",".","equalsIgnoreCase","(","\"TRUE\"",")",")","{","return","Boolean",".","TRUE",";","}","else","if","(","str",".","equalsIgnoreCase","(","\"FALSE\"",")",")","{","return","Boolean",".","FALSE",";","}","else","if","(","str",".","equalsIgnoreCase","(","\"UNKNOWN\"",")",")","{","return","null",";","}","else","{","throw","RESOURCE",".","invalidBoolean","(","str",")",".","ex","(",")",";","}"],"docstring_tokens":["Converts","a","string","into","a","BOOLEAN"],"prompt_tokens":[]}
{"code_tokens":["@Pure\n","public","SqlNode","getExplicandum","(",")","{","return","explicandum",";"],"docstring_tokens":["Returns","the","underlying","SQL","statement","to","be","explained"],"prompt_tokens":[]}
{"code_tokens":["@Deprecated","//","to","be","removed","before","2",".","0\n","public","boolean","isXml","(",")","{","return","getFormat","(",")","==","SqlExplainFormat",".","XML",";"],"docstring_tokens":["Returns","whether","result","is","to","be","in","XML","format"],"prompt_tokens":[]}
{"code_tokens":["public","boolean","isJson","(",")","{","return","getFormat","(",")","==","SqlExplainFormat",".","JSON",";"],"docstring_tokens":["Returns","whether","result","is","to","be","in","JSON","format"],"prompt_tokens":[]}
{"code_tokens":["private","static","RexNode","convertNvl","(","SqlRexContext","cx,","SqlCall","call",")","{","final","RexBuilder","rexBuilder","=","cx",".","getRexBuilder","(",")",";","final","RexNode","operand0","=\n","cx",".","convertExpression","(","call",".","getOperandList","(",")",".","get","(","0",")",")",";","final","RexNode","operand1","=\n","cx",".","convertExpression","(","call",".","getOperandList","(",")",".","get","(","1",")",")",";","final","RelDataType","type","=\n","cx",".","getValidator","(",")",".","getValidatedNodeType","(","call",")",";","//","Preserve","Operand","Nullability\n","return","rexBuilder",".","makeCall","(","type,","SqlStdOperatorTable",".","CASE,\n","ImmutableList",".","of","(","rexBuilder",".","makeCall","(","SqlStdOperatorTable",".","IS_NOT_NULL,\n","operand0",")",",\n","rexBuilder",".","makeCast","(","cx",".","getTypeFactory","(",")",".","createTypeWithNullability","(","type,","operand0",".","getType","(",")",".","isNullable","(",")",")",",\n","operand0",")",",\n","rexBuilder",".","makeCast","(","cx",".","getTypeFactory","(",")",".","createTypeWithNullability","(","type,","operand1",".","getType","(",")",".","isNullable","(",")",")",",\n","operand1",")",")",")",";"],"docstring_tokens":["Converts","a","call","to","the","NVL","function"],"prompt_tokens":[]}
{"code_tokens":["private","static","RexNode","convertDecode","(","SqlRexContext","cx,","SqlCall","call",")","{","final","RexBuilder","rexBuilder","=","cx",".","getRexBuilder","(",")",";","final","List<RexNode>","operands","=\n","convertOperands","(","cx,","call,","SqlOperandTypeChecker",".","Consistency",".","NONE",")",";","final","RelDataType","type","=\n","cx",".","getValidator","(",")",".","getValidatedNodeType","(","call",")",";","final","List<RexNode>","exprs","=","new","ArrayList<>","(",")",";","for","(","int","i","=","1",";","i","<","operands",".","size","(",")","-","1",";","i","+=","2",")","{","exprs",".","add","(","RelOptUtil",".","isDistinctFrom","(","rexBuilder,","operands",".","get","(","0",")",",\n","operands",".","get","(","i",")",",","true",")",")",";","exprs",".","add","(","operands",".","get","(","i","+","1",")",")",";","}","if","(","operands",".","size","(",")","%","2","==","0",")","{","exprs",".","add","(","Util",".","last","(","operands",")",")",";","}","else","{","exprs",".","add","(","rexBuilder",".","makeNullLiteral","(","type",")",")",";","}","return","rexBuilder",".","makeCall","(","type,","SqlStdOperatorTable",".","CASE,","exprs",")",";"],"docstring_tokens":["Converts","a","call","to","the","DECODE","function"],"prompt_tokens":[]}
{"code_tokens":["private","static","RexNode","convertInterval","(","SqlRexContext","cx,","SqlCall","call",")","{","//","\"INTERVAL","n","HOUR\"","becomes","\"n","*","INTERVAL","'1'","HOUR\"\n","final","SqlNode","n","=","call",".","operand","(","0",")",";","final","SqlIntervalQualifier","intervalQualifier","=","call",".","operand","(","1",")",";","final","SqlIntervalLiteral","literal","=\n","SqlLiteral",".","createInterval","(","1,","\"1\",","intervalQualifier,\n","call",".","getParserPosition","(",")",")",";","final","SqlCall","multiply","=\n","SqlStdOperatorTable",".","MULTIPLY",".","createCall","(","call",".","getParserPosition","(",")",",","n,\n","literal",")",";","return","cx",".","convertExpression","(","multiply",")",";"],"docstring_tokens":["Converts","an","interval","expression","to","a","numeric","multiplied","by","an","interval","literal"],"prompt_tokens":[]}
{"code_tokens":["public","RexNode","convertCase","(","SqlRexContext","cx,\n","SqlCase","call",")","{","SqlNodeList","whenList","=","call",".","getWhenOperands","(",")",";","SqlNodeList","thenList","=","call",".","getThenOperands","(",")",";","assert","whenList",".","size","(",")","==","thenList",".","size","(",")",";","\n\n","RexBuilder","rexBuilder","=","cx",".","getRexBuilder","(",")",";","final","List<RexNode>","exprList","=","new","ArrayList<>","(",")",";","final","RelDataTypeFactory","typeFactory","=","rexBuilder",".","getTypeFactory","(",")",";","final","RexLiteral","unknownLiteral","=","rexBuilder",".","makeNullLiteral","(","typeFactory",".","createSqlType","(","SqlTypeName",".","BOOLEAN",")",")",";","final","RexLiteral","nullLiteral","=","rexBuilder",".","makeNullLiteral","(","typeFactory",".","createSqlType","(","SqlTypeName",".","NULL",")",")",";","for","(","int","i","=","0",";","i","<","whenList",".","size","(",")",";","i++",")","{","if","(","SqlUtil",".","isNullLiteral","(","whenList",".","get","(","i",")",",","false",")",")","{","exprList",".","add","(","unknownLiteral",")",";","}","else","{","exprList",".","add","(","cx",".","convertExpression","(","whenList",".","get","(","i",")",")",")",";","}","if","(","SqlUtil",".","isNullLiteral","(","thenList",".","get","(","i",")",",","false",")",")","{","exprList",".","add","(","nullLiteral",")",";","}","else","{","exprList",".","add","(","cx",".","convertExpression","(","thenList",".","get","(","i",")",")",")",";","}","}","SqlNode","elseOperand","=","call",".","getElseOperand","(",")",";","if","(","SqlUtil",".","isNullLiteral","(","elseOperand,","false",")",")","{","exprList",".","add","(","nullLiteral",")",";","}","else","{","exprList",".","add","(","cx",".","convertExpression","(","requireNonNull","(","elseOperand,","\"elseOperand\"",")",")",")",";","}","\n\n","RelDataType","type","=\n","rexBuilder",".","deriveReturnType","(","call",".","getOperator","(",")",",","exprList",")",";","for","(","int","i",":","elseArgs","(","exprList",".","size","(",")",")",")","{","exprList",".","set","(","i,\n","rexBuilder",".","ensureType","(","type,","exprList",".","get","(","i",")",",","false",")",")",";","}","return","rexBuilder",".","makeCall","(","type,","SqlStdOperatorTable",".","CASE,","exprList",")",";"],"docstring_tokens":["Converts","a","CASE","expression"],"prompt_tokens":[]}
{"code_tokens":["public","RexNode","convertExtract","(","SqlRexContext","cx,\n","SqlExtractFunction","op,\n","SqlCall","call",")","{","return","convertFunction","(","cx,","(","SqlFunction",")","call",".","getOperator","(",")",",","call",")",";"],"docstring_tokens":["Converts","a","call","to","the","EXTRACT","function"],"prompt_tokens":[]}
{"code_tokens":["public","RexNode","convertCall","(","@UnknownInitialization","StandardConvertletTable","this,\n","SqlRexContext","cx,\n","SqlCall","call",")","{","final","SqlOperator","op","=","call",".","getOperator","(",")",";","final","RexBuilder","rexBuilder","=","cx",".","getRexBuilder","(",")",";","SqlOperandTypeChecker","operandTypeChecker","=","op",".","getOperandTypeChecker","(",")",";","final","SqlOperandTypeChecker",".","Consistency","consistency","=\n","operandTypeChecker","==","null\n","?","SqlOperandTypeChecker",".","Consistency",".","NONE\n",":","operandTypeChecker",".","getConsistency","(",")",";","final","List<RexNode>","exprs","=","convertOperands","(","cx,","call,","consistency",")",";","RelDataType","type","=","rexBuilder",".","deriveReturnType","(","op,","exprs",")",";","\n\n","//","Expand","'ROW","(","x0,","x1,",".",".",".",")","=","ROW","(","y0,","y1,",".",".",".",")","'\n","//","to","'x0","=","y0","AND","x1","=","y1","AND",".",".",".","'\n","if","(","op",".","kind","==","SqlKind",".","EQUALS",")","{","final","RexNode","expr0","=","RexUtil",".","removeCast","(","exprs",".","get","(","0",")",")",";","final","RexNode","expr1","=","RexUtil",".","removeCast","(","exprs",".","get","(","1",")",")",";","if","(","expr0",".","getKind","(",")","==","SqlKind",".","ROW","&&","expr1",".","getKind","(",")","==","SqlKind",".","ROW",")","{","final","RexCall","call0","=","(","RexCall",")","expr0",";","final","RexCall","call1","=","(","RexCall",")","expr1",";","final","List<RexNode>","eqList","=","new","ArrayList<>","(",")",";","Pair",".","forEach","(","call0",".","getOperands","(",")",",","call1",".","getOperands","(",")",",","(","x,","y",")","->\n","eqList",".","add","(","rexBuilder",".","makeCall","(","op,","x,","y",")",")",")",";","return","RexUtil",".","composeConjunction","(","rexBuilder,","eqList",")",";","}","}","return","rexBuilder",".","makeCall","(","type,","op,","RexUtil",".","flatten","(","exprs,","op",")",")",";"],"docstring_tokens":["Converts","a","call","to","an","operator","into","a","RexCall","to","the","same","operator"],"prompt_tokens":[]}
{"code_tokens":["private","SqlOperatorTable","create","(","ImmutableSet<SqlLibrary>","librarySet",")","{","final","ImmutableList",".","Builder<SqlOperator>","list","=","ImmutableList",".","builder","(",")",";","boolean","custom","=","false",";","boolean","standard","=","false",";","for","(","SqlLibrary","library",":","librarySet",")","{","switch","(","library",")","{","case","STANDARD:\n","standard","=","true",";","break",";","case","SPATIAL:\n","list",".","addAll","(","SqlOperatorTables",".","spatialInstance","(",")",".","getOperatorList","(",")",")",";","break",";","default:\n","custom","=","true",";","}","}","\n\n","//","Use","reflection","to","register","the","expressions","stored","in","public","fields",".","//","Skip","if","the","only","libraries","asked","for","are","\"standard\"","or","\"spatial\"",".","if","(","custom",")","{","for","(","Class","aClass",":","classes",")","{","for","(","Field","field",":","aClass",".","getFields","(",")",")","{","try","{","if","(","SqlOperator",".","class",".","isAssignableFrom","(","field",".","getType","(",")",")",")","{","final","SqlOperator","op","=","(","SqlOperator",")","requireNonNull","(","field",".","get","(","this",")",",\n","(",")","->","\"null","value","of","\"","+","field","+","\"","for","\"","+","this",")",";","if","(","operatorIsInLibrary","(","op",".","getName","(",")",",","field,","librarySet",")",")","{","list",".","add","(","op",")",";","}","}","}","catch","(","IllegalArgumentException","|","IllegalAccessException","e",")","{","throw","Util",".","throwAsRuntime","(","Util",".","causeOrSelf","(","e",")",")",";","}","}","}","}","SqlOperatorTable","operatorTable","=","new","ListSqlOperatorTable","(","list",".","build","(",")",")",";","if","(","standard",")","{","operatorTable","=\n","SqlOperatorTables",".","chain","(","SqlStdOperatorTable",".","instance","(",")",",\n","operatorTable",")",";","}","return","operatorTable",";"],"docstring_tokens":["Creates","an","operator","table","that","contains","operators","in","the","given","set","of","libraries"],"prompt_tokens":[]}
{"code_tokens":["public","SqlOperatorTable","getOperatorTable","(","Iterable<SqlLibrary>","librarySet",")","{","try","{","return","cache",".","get","(","ImmutableSet",".","copyOf","(","librarySet",")",")",";","}","catch","(","ExecutionException","e",")","{","throw","Util",".","throwAsRuntime","(","\"populating","SqlOperatorTable","for","library","\"\n","+","librarySet,","Util",".","causeOrSelf","(","e",")",")",";","}"],"docstring_tokens":["Returns","a","SQL","operator","table","that","contains","operators","in","the","given","set","of","libraries"],"prompt_tokens":[]}
{"code_tokens":["@Override","public","boolean","argumentMustBeScalar","(","int","ordinal",")","{","return","ordinal","!=","0",";"],"docstring_tokens":["Overrides","because","the","first","parameter","of","table-value","function","windowing","is","an","explicit","TABLE","parameter,","which","is","not","scalar"],"prompt_tokens":[]}
{"code_tokens":["public","static","<TSource>","Queryable<TSource>","asQueryable","(","Enumerable<TSource>","enumerable",")","{","throw","Extensions",".","todo","(",")",";"],"docstring_tokens":["Converts","an","Enumerable","to","an","IQueryable"],"prompt_tokens":[]}
{"code_tokens":["public","static","<TSource,","TInner,","TResult>","Enumerable<TResult>","correlateJoin","(","final","JoinType","joinType,","final","Enumerable<TSource>","outer,\n","final","Function1<TSource,","Enumerable<TInner>>","inner,\n","final","Function2<TSource,","?","super","@Nullable","TInner,","TResult>","resultSelector",")","{","if","(","joinType","==","JoinType",".","RIGHT","||","joinType","==","JoinType",".","FULL",")","{","throw","new","IllegalArgumentException","(","\"JoinType","\"","+","joinType","+","\"","is","not","valid","for","correlation\"",")",";","}","\n\n","return","new","AbstractEnumerable<TResult>","(",")","{","@Override","public","Enumerator<TResult>","enumerator","(",")","{","return","new","Enumerator<TResult>","(",")","{","private","final","Enumerator<TSource>","outerEnumerator","=","outer",".","enumerator","(",")",";","private","@Nullable","Enumerator<TInner>","innerEnumerator",";","@Nullable","TSource","outerValue",";","@Nullable","TInner","innerValue",";","int","state","=","0",";","//","0","--","moving","outer,","1","moving","inner",";","\n\n","@Override","public","TResult","current","(",")","{","return","resultSelector",".","apply","(","castNonNull","(","outerValue",")",",","innerValue",")",";","}","\n\n","@Override","public","boolean","moveNext","(",")","{","while","(","true",")","{","switch","(","state",")","{","case","0:\n","//","move","outer\n","if","(","!outerEnumerator",".","moveNext","(",")",")","{","return","false",";","}","outerValue","=","outerEnumerator",".","current","(",")",";","//","initial","move","inner\n","Enumerable<TInner>","innerEnumerable","=","inner",".","apply","(","outerValue",")",";","if","(","innerEnumerable","==","null",")","{","innerEnumerable","=","Linq4j",".","emptyEnumerable","(",")",";","}","if","(","innerEnumerator","!=","null",")","{","innerEnumerator",".","close","(",")",";","}","innerEnumerator","=","innerEnumerable",".","enumerator","(",")",";","if","(","innerEnumerator",".","moveNext","(",")",")","{","switch","(","joinType",")","{","case","ANTI:\n","//","For","anti-join","need","to","try","next","outer","row\n","//","Current","does","not","match\n","continue",";","case","SEMI:\n","return","true",";","//","current","row","matches\n","default:\n","break",";","}","//","INNER","and","LEFT","just","return","result\n","innerValue","=","innerEnumerator",".","current","(",")",";","state","=","1",";","//","iterate","over","inner","results\n","return","true",";","}","//","No","match","detected\n","innerValue","=","null",";","switch","(","joinType",")","{","case","LEFT:\n","case","ANTI:\n","return","true",";","default:\n","break",";","}","//","For","INNER","and","LEFT","need","to","find","another","outer","row\n","continue",";","case","1:\n","//","subsequent","move","inner\n","Enumerator<TInner>","innerEnumerator","=","requireNonNull","(","this",".","innerEnumerator",")",";","if","(","innerEnumerator",".","moveNext","(",")",")","{","innerValue","=","innerEnumerator",".","current","(",")",";","return","true",";","}","state","=","0",";","//","continue","loop,","move","outer\n","break",";","default:\n","break",";","}","}","}","\n\n","@Override","public","void","reset","(",")","{","state","=","0",";","outerEnumerator",".","reset","(",")",";","closeInner","(",")",";","}","\n\n","@Override","public","void","close","(",")","{","outerEnumerator",".","close","(",")",";","closeInner","(",")",";","outerValue","=","null",";","}","\n\n","private","void","closeInner","(",")","{","innerValue","=","null",";","if","(","innerEnumerator","!=","null",")","{","innerEnumerator",".","close","(",")",";","innerEnumerator","=","null",";","}","}","}",";","}","}",";"],"docstring_tokens":["For","each","row","of","the","outer","enumerable","returns","the","correlated","rows","from","the","inner","enumerable"],"prompt_tokens":[]}
{"code_tokens":["public","static","<TSource>","double","max","(","Enumerable<TSource>","source,\n","DoubleFunction1<TSource>","selector",")","{","return","requireNonNull","(","aggregate","(","source",".","select","(","adapt","(","selector",")",")",",","Extensions",".","DOUBLE_MAX",")",")",";"],"docstring_tokens":["Invokes","a","transform","function","on","each","element","of","a","sequence","and","returns","the","maximum","Double","value"],"prompt_tokens":[]}
{"code_tokens":["public","static","<TSource>","long","max","(","Enumerable<TSource>","source,\n","LongFunction1<TSource>","selector",")","{","return","requireNonNull","(","aggregate","(","source",".","select","(","adapt","(","selector",")",")",",","Extensions",".","LONG_MAX",")",")",";"],"docstring_tokens":["Invokes","a","transform","function","on","each","element","of","a","sequence","and","returns","the","maximum","long","value"],"prompt_tokens":[]}
{"code_tokens":["public","static","<TSource>","float","max","(","Enumerable<TSource>","source,\n","FloatFunction1<TSource>","selector",")","{","return","requireNonNull","(","aggregate","(","source",".","select","(","adapt","(","selector",")",")",",","Extensions",".","FLOAT_MAX",")",")",";"],"docstring_tokens":["Invokes","a","transform","function","on","each","element","of","a","sequence","and","returns","the","maximum","Float","value"],"prompt_tokens":[]}
{"code_tokens":["public","static","<TSource>","double","min","(","Enumerable<TSource>","source,\n","DoubleFunction1<TSource>","selector",")","{","return","requireNonNull","(","aggregate","(","source",".","select","(","adapt","(","selector",")",")",",","Extensions",".","DOUBLE_MIN",")",")",";"],"docstring_tokens":["Invokes","a","transform","function","on","each","element","of","a","sequence","and","returns","the","minimum","Double","value"],"prompt_tokens":[]}
{"code_tokens":["public","static","<TSource>","long","min","(","Enumerable<TSource>","source,\n","LongFunction1<TSource>","selector",")","{","return","aggregate","(","source",".","select","(","adapt","(","selector",")",")",",","null,","Extensions",".","LONG_MIN",")",";"],"docstring_tokens":["Invokes","a","transform","function","on","each","element","of","a","sequence","and","returns","the","minimum","long","value"],"prompt_tokens":[]}
{"code_tokens":["public","static","<TSource>","float","min","(","Enumerable<TSource>","source,\n","FloatFunction1<TSource>","selector",")","{","return","aggregate","(","source",".","select","(","adapt","(","selector",")",")",",","null,\n","Extensions",".","FLOAT_MIN",")",";"],"docstring_tokens":["Invokes","a","transform","function","on","each","element","of","a","sequence","and","returns","the","minimum","Float","value"],"prompt_tokens":[]}
{"code_tokens":["public","SqlValidatorFixture","withLenientOperatorLookup","(","boolean","lenient",")","{","return","withValidatorConfig","(","c","->","c",".","withLenientOperatorLookup","(","lenient",")",")",";"],"docstring_tokens":["Returns","a","tester","that","does","not","fail","validation","if","it","encounters","an","unknown","function"],"prompt_tokens":[]}
{"code_tokens":["SqlValidatorFixture","fails","(","String","expected",")","{","requireNonNull","(","expected,","\"expected\"",")",";","tester",".","assertExceptionIsThrown","(","factory,","toSql","(","true",")",",","expected",")",";","return","this",";"],"docstring_tokens":["Checks","that","a","SQL","expression","gives","a","particular","error"],"prompt_tokens":[]}
{"code_tokens":["public","SqlValidatorFixture","assertMonotonicity","(","Matcher<SqlMonotonicity>","matcher",")","{","tester",".","validateAndThen","(","factory,","toSql","(","false",")",",\n","(","sap,","validator,","n",")","->","{","final","RelDataType","rowType","=","validator",".","getValidatedNodeType","(","n",")",";","final","SqlValidatorNamespace","selectNamespace","=\n","validator",".","getNamespace","(","n",")",";","final","String","field0","=","rowType",".","getFieldList","(",")",".","get","(","0",")",".","getName","(",")",";","final","SqlMonotonicity","monotonicity","=\n","selectNamespace",".","getMonotonicity","(","field0",")",";","assertThat","(","monotonicity,","matcher",")",";","}",")",";","return","this",";"],"docstring_tokens":["Tests","that","the","first","column","of","the","query","has","a","given","monotonicity"],"prompt_tokens":[]}
{"code_tokens":["public","RelFieldCollation","withFieldIndex","(","int","fieldIndex",")","{","return","this",".","fieldIndex","==","fieldIndex","?","this\n",":","new","RelFieldCollation","(","fieldIndex,","direction,","nullDirection",")",";"],"docstring_tokens":["Creates","a","copy","of","this","RelFieldCollation","against","a","different","field"],"prompt_tokens":[]}
{"code_tokens":["public","RelFieldCollation","withDirection","(","Direction","direction",")","{","return","this",".","direction","==","direction","?","this\n",":","new","RelFieldCollation","(","fieldIndex,","direction,","nullDirection",")",";"],"docstring_tokens":["Creates","a","copy","of","this","RelFieldCollation","with","a","different","direction"],"prompt_tokens":[]}
{"code_tokens":["public","RelFieldCollation","withNullDirection","(","NullDirection","nullDirection",")","{","return","this",".","nullDirection","==","nullDirection","?","this\n",":","new","RelFieldCollation","(","fieldIndex,","direction,","nullDirection",")",";"],"docstring_tokens":["Creates","a","copy","of","this","RelFieldCollation","with","a","different","null","direction"],"prompt_tokens":[]}
{"code_tokens":["public","RelFieldCollation","shift","(","int","offset",")","{","return","withFieldIndex","(","fieldIndex","+","offset",")",";"],"docstring_tokens":["Returns","a","copy","of","this","RelFieldCollation","with","the","field","index","shifted","offset","to","the","right"],"prompt_tokens":[]}
{"code_tokens":["public","static","Expression","castIfNecessary","(","Type","returnType,\n","Expression","expression",")","{","final","Type","type","=","expression",".","getType","(",")",";","if","(","!needTypeCast","(","type,","returnType",")",")","{","return","expression",";","}","if","(","returnType","instanceof","Class\n","&&","Number",".","class",".","isAssignableFrom","(","(","Class",")","returnType",")","&&","type","instanceof","Class\n","&&","Number",".","class",".","isAssignableFrom","(","(","Class",")","type",")",")","{","//","E",".","g",".","//","Integer","foo","(","BigDecimal","o",")","{","//","return","o",".","intValue","(",")",";","//","}","return","Expressions",".","unbox","(","expression,","requireNonNull","(","Primitive",".","ofBox","(","returnType",")",")",")",";","}","if","(","Primitive",".","is","(","returnType",")","&&","!Primitive",".","is","(","type",")",")","{","//","E",".","g",".","//","int","foo","(","Object","o",")","{","//","return","(","(","Integer",")","o",")",".","intValue","(",")",";","//","}","return","Expressions",".","unbox","(","Expressions",".","convert_","(","expression,","Types",".","box","(","returnType",")",")",",\n","requireNonNull","(","Primitive",".","of","(","returnType",")",")",")",";","}","if","(","!Primitive",".","is","(","returnType",")","&&","Primitive",".","is","(","type",")",")","{","//","E",".","g",".","//","Short","foo","(","Object","o",")","{","//","return","(","short",")","(","int",")","o",";","//","}","return","Expressions",".","convert_","(","expression,\n","Types",".","unbox","(","returnType",")",")",";","}","return","Expressions",".","convert_","(","expression,","returnType",")",";"],"docstring_tokens":["Wraps","an","expression","in","a","cast","if","it","is","not","already","of","the","desired","type,","or","cannot","be","implicitly","converted","to","it"],"prompt_tokens":[]}
{"code_tokens":["public","static","SqlIdentifier","star","(","SqlParserPos","pos",")","{","return","star","(","ImmutableList",".","of","(","\"\"",")",",","pos,","ImmutableList",".","of","(","pos",")",")",";"],"docstring_tokens":["Creates","an","identifier","that","is","a","singleton","wildcard","star"],"prompt_tokens":[]}
{"code_tokens":["public","static","SqlIdentifier","star","(","List<String>","names,","SqlParserPos","pos,\n","List<SqlParserPos>","componentPositions",")","{","return","new","SqlIdentifier","(","Util",".","transform","(","names,","s","->","s",".","equals","(","\"*\"",")","?","\"\"",":","s",")",",","null,","pos,\n","componentPositions",")",";"],"docstring_tokens":["Creates","an","identifier","that","ends","in","a","wildcard","star"],"prompt_tokens":[]}
{"code_tokens":["public","static","List<String>","toStar","(","List<String>","names",")","{","return","Util",".","transform","(","names,","s","->","s",".","equals","(","\"\"",")","?","\"*\"",":","s",")",";"],"docstring_tokens":["Converts","empty","strings","in","a","list","of","names","to","stars"],"prompt_tokens":[]}
{"code_tokens":["public","void","setNames","(","List<String>","names,","@Nullable","List<SqlParserPos>","poses",")","{","this",".","names","=","ImmutableList",".","copyOf","(","names",")",";","this",".","componentPositions","=","poses","==","null","?","null\n",":","ImmutableList",".","copyOf","(","poses",")",";"],"docstring_tokens":["Modifies","the","components","of","this","identifier","and","their","positions"],"prompt_tokens":[]}
{"code_tokens":["public","SqlIdentifier","setName","(","int","i,","String","name",")","{","if","(","!names",".","get","(","i",")",".","equals","(","name",")",")","{","String[]","nameArray","=","names",".","toArray","(","new","String[0]",")",";","nameArray[i]","=","name",";","return","new","SqlIdentifier","(","ImmutableList",".","copyOf","(","nameArray",")",",","collation,","pos,\n","componentPositions",")",";","}","else","{","return","this",";","}"],"docstring_tokens":["Returns","an","identifier","that","is","the","same","as","this","except","one","modified","name"],"prompt_tokens":[]}
{"code_tokens":["public","SqlIdentifier","add","(","int","i,","String","name,","SqlParserPos","pos",")","{","final","List<String>","names2","=","new","ArrayList<>","(","names",")",";","names2",".","add","(","i,","name",")",";","final","List<SqlParserPos>","pos2",";","if","(","componentPositions","==","null",")","{","pos2","=","null",";","}","else","{","pos2","=","new","ArrayList<>","(","componentPositions",")",";","pos2",".","add","(","i,","pos",")",";","}","return","new","SqlIdentifier","(","names2,","collation,","pos,","pos2",")",";"],"docstring_tokens":["Returns","an","identifier","that","is","the","same","as","this","except","with","a","component","added","at","a","given","position"],"prompt_tokens":[]}
{"code_tokens":["public","SqlParserPos","getComponentParserPosition","(","int","i",")","{","assert","(","i",">=","0",")","&&","(","i","<","names",".","size","(",")",")",";","return","(","componentPositions","==","null",")","?","getParserPosition","(",")",":","componentPositions",".","get","(","i",")",";"],"docstring_tokens":["Returns","the","position","of","the","ith","component","of","a","compound","identifier,","or","the","position","of","the","whole","identifier","if","that","information","is","not","present"],"prompt_tokens":[]}
{"code_tokens":["public","void","assignNamesFrom","(","SqlIdentifier","other",")","{","setNames","(","other",".","names,","other",".","componentPositions",")",";"],"docstring_tokens":["Copies","names","and","components","from","another","identifier"],"prompt_tokens":[]}
{"code_tokens":["public","SqlIdentifier","plus","(","String","name,","SqlParserPos","pos",")","{","final","ImmutableList<String>","names","=\n","ImmutableList",".","<String>builder","(",")",".","addAll","(","this",".","names",")",".","add","(","name",")",".","build","(",")",";","final","ImmutableList<SqlParserPos>","componentPositions",";","final","SqlParserPos","pos2",";","ImmutableList<SqlParserPos>","thisComponentPositions","=","this",".","componentPositions",";","if","(","thisComponentPositions","!=","null",")","{","final","ImmutableList",".","Builder<SqlParserPos>","builder","=\n","ImmutableList",".","builder","(",")",";","componentPositions","=\n","builder",".","addAll","(","thisComponentPositions",")",".","add","(","pos",")",".","build","(",")",";","pos2","=","SqlParserPos",".","sum","(","builder",".","add","(","this",".","pos",")",".","build","(",")",")",";","}","else","{","componentPositions","=","null",";","pos2","=","pos",";","}","return","new","SqlIdentifier","(","names,","collation,","pos2,","componentPositions",")",";"],"docstring_tokens":["Creates","an","identifier","that","consists","of","this","identifier","plus","a","name","segment"],"prompt_tokens":[]}
{"code_tokens":["public","SqlIdentifier","plusStar","(",")","{","final","SqlIdentifier","id","=","this",".","plus","(","\"*\",","SqlParserPos",".","ZERO",")",";","return","new","SqlIdentifier","(","id",".","names",".","stream","(",")",".","map","(","s","->","s",".","equals","(","\"*\"",")","?","\"\"",":","s",")",".","collect","(","Util",".","toImmutableList","(",")",")",",\n","null,","id",".","pos,","id",".","componentPositions",")",";"],"docstring_tokens":["Creates","an","identifier","that","consists","of","this","identifier","plus","a","wildcard","star"],"prompt_tokens":[]}
{"code_tokens":["public","SqlIdentifier","skipLast","(","int","n",")","{","return","getComponent","(","0,","names",".","size","(",")","-","n",")",";"],"docstring_tokens":["Creates","an","identifier","that","consists","of","all","but","the","last","n","name","segments","of","this","one"],"prompt_tokens":[]}
{"code_tokens":["public","static","List<String>","simpleNames","(","List<?","extends","SqlNode>","list",")","{","return","Util",".","transform","(","list,","n","->","(","(","SqlIdentifier",")","n",")",".","getSimple","(",")",")",";"],"docstring_tokens":["Returns","the","simple","names","in","a","list","of","identifiers"],"prompt_tokens":[]}
{"code_tokens":["public","static","Iterable<String>","simpleNames","(","Iterable<?","extends","SqlNode>","list",")","{","return","Util",".","transform","(","list,","n","->","(","(","SqlIdentifier",")","n",")",".","getSimple","(",")",")",";"],"docstring_tokens":["Returns","the","simple","names","in","a","iterable","of","identifiers"],"prompt_tokens":[]}
{"code_tokens":["public","boolean","isSimple","(",")","{","return","names",".","size","(",")","==","1","&&","!isStar","(",")",";"],"docstring_tokens":["Returns","whether","this","is","a","simple","identifier"],"prompt_tokens":[]}
{"code_tokens":["public","boolean","isComponentQuoted","(","int","i",")","{","return","componentPositions","!=","null\n","&&","componentPositions",".","get","(","i",")",".","isQuoted","(",")",";"],"docstring_tokens":["Returns","whether","the","ith","component","of","a","compound","identifier","is","quoted"],"prompt_tokens":[]}
{"code_tokens":["public","static","@PolyNull","BigDecimal","toBigDecimal","(","@PolyNull","Number","number",")","{","if","(","number","==","null",")","{","return","castNonNull","(","null",")",";","}","if","(","number","instanceof","BigDecimal",")","{","return","(","BigDecimal",")","number",";","}","else","if","(","(","number","instanceof","Double",")","||","(","number","instanceof","Float",")",")","{","return","BigDecimal",".","valueOf","(","number",".","doubleValue","(",")",")",";","}","else","if","(","number","instanceof","BigInteger",")","{","return","new","BigDecimal","(","(","BigInteger",")","number",")",";","}","else","{","return","new","BigDecimal","(","number",".","longValue","(",")",")",";","}"],"docstring_tokens":["Converts","a","number","to","a","BigDecimal","with","the","same","value;","returns","null","if","and","only","if","the","number","is","null"],"prompt_tokens":[]}
{"code_tokens":["public","static","@PolyNull","Double","add","(","@PolyNull","Double","a,","@PolyNull","Double","b",")","{","if","(","a","==","null","||","b","==","null",")","{","return","null",";","}","\n\n","return","a","+","b",";"],"docstring_tokens":["Returns","the","sum","of","two","numbers,","or","null","if","either","is","null"],"prompt_tokens":[]}
{"code_tokens":["public","static","@PolyNull","Double","subtract","(","@PolyNull","Double","a,","@PolyNull","Double","b",")","{","if","(","a","==","null","||","b","==","null",")","{","return","castNonNull","(","null",")",";","}","\n\n","return","a","-","b",";"],"docstring_tokens":["Returns","the","difference","of","two","numbers,","or","null","if","either","is","null"],"prompt_tokens":[]}
{"code_tokens":["public","static","@Nullable","Double","divide","(","@Nullable","Double","a,","@Nullable","Double","b",")","{","if","(","(","a","==","null",")","||","(","b","==","null",")","||","(","b","==","0D",")",")","{","return","castNonNull","(","null",")",";","}","\n\n","return","a","/","b",";"],"docstring_tokens":["Returns","the","quotient","of","two","numbers,","or","null","if","either","is","null","or","the","divisor","is","zero"],"prompt_tokens":[]}
{"code_tokens":["public","static","@PolyNull","Double","multiply","(","@PolyNull","Double","a,","@PolyNull","Double","b",")","{","if","(","a","==","null","||","b","==","null",")","{","return","castNonNull","(","null",")",";","}","\n\n","return","a","*","b",";"],"docstring_tokens":["Returns","the","product","of","two","numbers,","or","null","if","either","is","null"],"prompt_tokens":[]}
{"code_tokens":["public","void","append","(","StringBuilder","buf,","int","indent,","@Nullable","Object","o",")","{","if","(","o","==","null",")","{","buf",".","append","(","\"null\"",")",";","}","else","if","(","o","instanceof","Map",")","{","//noinspection","unchecked\n","appendMap","(","buf,","indent,","(","Map",")","o",")",";","}","else","if","(","o","instanceof","List",")","{","appendList","(","buf,","indent,","(","List<?>",")","o",")",";","}","else","if","(","o","instanceof","String",")","{","buf",".","append","(","'\"'",")",".","append","(","(","(","String",")","o",")",".","replace","(","\"\\\"\",","\"\\\\\\\"\"",")",".","replace","(","\"\\n\",","\"\\\\n\"",")",")",".","append","(","'\"'",")",";","}","else","{","assert","o","instanceof","Number","||","o","instanceof","Boolean",";","buf",".","append","(","o",")",";","}"],"docstring_tokens":["Appends","a","JSON","object","to","a","string","builder"],"prompt_tokens":[]}
{"code_tokens":["private","static","boolean","rowTypesAreEquivalent","(","MutableRel","rel0,","MutableRel","rel1,","Litmus","litmus",")","{","if","(","rel0",".","rowType",".","getFieldCount","(",")","!=","rel1",".","rowType",".","getFieldCount","(",")",")","{","return","litmus",".","fail","(","\"Mismatch","for","column","count:","[","{","}","]\",","Pair",".","of","(","rel0,","rel1",")",")",";","}","for","(","Pair<RelDataTypeField,","RelDataTypeField>","pair\n",":","Pair",".","zip","(","rel0",".","rowType",".","getFieldList","(",")",",","rel1",".","rowType",".","getFieldList","(",")",")",")","{","if","(","!pair",".","left",".","getType","(",")",".","equals","(","pair",".","right",".","getType","(",")",")",")","{","return","litmus",".","fail","(","\"Mismatch","for","column","type:","[","{","}","]\",","Pair",".","of","(","rel0,","rel1",")",")",";","}","}","return","litmus",".","succeed","(",")",";"],"docstring_tokens":["Equivalence","checking","for","row","types,","but","except","for","the","field","names"],"prompt_tokens":[]}
{"code_tokens":["public","static","Pair<RexNode,","List<RexNode>>","explainCalc","(","MutableCalc","calc",")","{","final","RexShuttle","shuttle","=","getExpandShuttle","(","calc",".","program",")",";","final","RexNode","condition","=","shuttle",".","apply","(","calc",".","program",".","getCondition","(",")",")",";","final","List<RexNode>","projects","=","new","ArrayList<>","(",")",";","for","(","RexNode","rex:","shuttle",".","apply","(","calc",".","program",".","getProjectList","(",")",")",")","{","projects",".","add","(","rex",")",";","}","if","(","condition","==","null",")","{","return","Pair",".","of","(","calc",".","cluster",".","getRexBuilder","(",")",".","makeLiteral","(","true",")",",","projects",")",";","}","else","{","return","Pair",".","of","(","condition,","projects",")",";","}"],"docstring_tokens":["Explain","filtering","condition","and","projections","from","MutableCalc"],"prompt_tokens":[]}
{"code_tokens":["public","static","boolean","equalType","(","String","desc0,","MutableRel","rel0,","String","desc1,\n","MutableRel","rel1,","Litmus","litmus",")","{","return","RelOptUtil",".","equal","(","desc0,","rel0",".","rowType,","desc1,","rel1",".","rowType,","litmus",")",";"],"docstring_tokens":["Returns","whether","two","relational","expressions","have","the","same","row-type"],"prompt_tokens":[]}
{"code_tokens":["@API","(","since","=","\"1",".","24\",","status","=","API",".","Status",".","EXPERIMENTAL",")","public","static","Pair<SqlOperator,","List<RexNode>>","normalize","(","SqlOperator","operator,\n","List<RexNode>","operands",")","{","final","Pair<SqlOperator,","List<RexNode>>","original","=","Pair",".","of","(","operator,","operands",")",";","if","(","!allowsNormalize","(",")","||","operands",".","size","(",")","!=","2",")","{","return","original",";","}","\n\n","final","RexNode","operand0","=","operands",".","get","(","0",")",";","final","RexNode","operand1","=","operands",".","get","(","1",")",";","\n\n","//","If","arguments","are","the","same,","then","we","normalize","<","vs",">\n","//","'<'","==","60,","'>'","==","62,","so","we","prefer","<",".","final","SqlKind","kind","=","operator",".","getKind","(",")",";","final","SqlKind","reversedKind","=","kind",".","reverse","(",")",";","final","int","x","=","reversedKind",".","compareTo","(","kind",")",";","if","(","x","<","0",")","{","return","Pair",".","of","(","requireNonNull","(","operator",".","reverse","(",")",")",",\n","ImmutableList",".","of","(","operand1,","operand0",")",")",";","}","if","(","x",">","0",")","{","return","original",";","}","\n\n","if","(","!isSymmetricalCall","(","operator,","operand0,","operand1",")",")","{","return","original",";","}","\n\n","if","(","reorderOperands","(","operand0,","operand1",")","<","0",")","{","//","$0=$1","is","the","same","as","$1=$0,","so","we","make","sure","the","digest","is","the","same","for","them",".","\n\n","//","When","$1",">","$0","is","normalized,","the","operation","needs","to","be","flipped\n","//","so","we","sort","arguments","first,","then","flip","the","sign",".","return","Pair",".","of","(","requireNonNull","(","operator",".","reverse","(",")",")",",\n","ImmutableList",".","of","(","operand1,","operand0",")",")",";","}","return","original",";"],"docstring_tokens":["Normalizes","the","variables","of","a","rex","call"],"prompt_tokens":[]}
{"code_tokens":["private","static","boolean","allowsNormalize","(",")","{","return","CalciteSystemProperty",".","ENABLE_REX_DIGEST_NORMALIZE",".","value","(",")",";"],"docstring_tokens":["The","digest","of","RexNode","is","normalized","by","default"],"prompt_tokens":[]}
{"code_tokens":["private","static","String","ymd","(","int","year,","int","month,","int","day",")","{","Preconditions",".","checkArgument","(","year",">=","1","&&","year","<=","9999,\n","\"Year","out","of","range:\",","year",")",";","Preconditions",".","checkArgument","(","month",">=","1","&&","month","<=","12,\n","\"Month","out","of","range:\",","month",")",";","Preconditions",".","checkArgument","(","day",">=","1","&&","day","<=","31,\n","\"Day","out","of","range:\",","day",")",";","final","StringBuilder","b","=","new","StringBuilder","(",")",";","DateTimeStringUtils",".","ymd","(","b,","year,","month,","day",")",";","return","b",".","toString","(",")",";"],"docstring_tokens":["Validates","a","year-month-date","and","converts","to","a","string"],"prompt_tokens":[]}
{"code_tokens":["public","static","DateString","fromCalendarFields","(","Calendar","calendar",")","{","return","new","DateString","(","calendar",".","get","(","Calendar",".","YEAR",")",",\n","calendar",".","get","(","Calendar",".","MONTH",")","+","1,\n","calendar",".","get","(","Calendar",".","DAY_OF_MONTH",")",")",";"],"docstring_tokens":["Creates","a","DateString","from","a","Calendar"],"prompt_tokens":[]}
{"code_tokens":["public","static","boolean","isCharTypeComparable","(","SqlCallBinding","binding,\n","List<SqlNode>","operands,\n","boolean","throwOnFailure",")","{","requireNonNull","(","operands,","\"operands\"",")",";","assert","operands",".","size","(",")",">=","2\n",":","\"operands",".","size","(",")","should","be","2","or","greater,","actual:","\"","+","operands",".","size","(",")",";","\n\n","if","(","!isCharTypeComparable","(","SqlTypeUtil",".","deriveType","(","binding,","operands",")",")",")","{","if","(","throwOnFailure",")","{","String","msg","=","String",".","join","(","\",","\",","Util",".","transform","(","operands,","String::valueOf",")",")",";","throw","binding",".","newError","(","RESOURCE",".","operandNotComparable","(","msg",")",")",";","}","return","false",";","}","return","true",";"],"docstring_tokens":["Returns","whether","the","operands","to","a","call","are","char","type-comparable"],"prompt_tokens":[]}
{"code_tokens":["@API","(","since","=","\"1",".","26\",","status","=","API",".","Status",".","EXPERIMENTAL",")","public","static","RelDataType","deriveType","(","SqlCallBinding","binding",")","{","return","deriveType","(","binding,","binding",".","getCall","(",")",")",";"],"docstring_tokens":["Derives","type","of","the","call","via","its","binding"],"prompt_tokens":[]}
{"code_tokens":["public","static","RelDataType","makeNullableIfOperandsAre","(","final","SqlValidator","validator,\n","final","SqlValidatorScope","scope,\n","final","SqlCall","call,\n","RelDataType","type",")","{","for","(","SqlNode","operand",":","call",".","getOperandList","(",")",")","{","RelDataType","operandType","=","validator",".","deriveType","(","scope,","operand",")",";","\n\n","if","(","containsNullable","(","operandType",")",")","{","RelDataTypeFactory","typeFactory","=","validator",".","getTypeFactory","(",")",";","type","=","typeFactory",".","createTypeWithNullability","(","type,","true",")",";","break",";","}","}","return","type",";"],"docstring_tokens":["Recreates","a","given","RelDataType","with","nullability","iff","any","of","the","operands","of","a","call","are","nullable"],"prompt_tokens":[]}
{"code_tokens":["public","static","RelDataType","makeNullableIfOperandsAre","(","final","RelDataTypeFactory","typeFactory,\n","final","List<RelDataType>","argTypes,\n","RelDataType","type",")","{","requireNonNull","(","type,","\"type\"",")",";","if","(","containsNullable","(","argTypes",")",")","{","type","=","typeFactory",".","createTypeWithNullability","(","type,","true",")",";","}","return","type",";"],"docstring_tokens":["Recreates","a","given","RelDataType","with","nullability","iff","any","of","the","param","argTypes","are","nullable"],"prompt_tokens":[]}
{"code_tokens":["public","static","boolean","allNullable","(","List<RelDataType>","types",")","{","for","(","RelDataType","type",":","types",")","{","if","(","!containsNullable","(","type",")",")","{","return","false",";","}","}","return","true",";"],"docstring_tokens":["Returns","whether","all","of","array","of","types","are","nullable"],"prompt_tokens":[]}
{"code_tokens":["public","static","boolean","containsNullable","(","List<RelDataType>","types",")","{","for","(","RelDataType","type",":","types",")","{","if","(","containsNullable","(","type",")",")","{","return","true",";","}","}","return","false",";"],"docstring_tokens":["Returns","whether","one","or","more","of","an","array","of","types","is","nullable"],"prompt_tokens":[]}
{"code_tokens":["public","static","boolean","isOfSameTypeName","(","Collection<SqlTypeName>","typeNames,\n","RelDataType","type",")","{","for","(","SqlTypeName","typeName",":","typeNames",")","{","if","(","isOfSameTypeName","(","typeName,","type",")",")","{","return","true",";","}","}","return","false",";"],"docstring_tokens":["Returns","true","if","any","element","in","typeNames","matches","type.getSqlTypeName"],"prompt_tokens":[]}
{"code_tokens":["public","static","boolean","isDatetime","(","RelDataType","type",")","{","return","SqlTypeFamily",".","DATETIME",".","contains","(","type",")",";"],"docstring_tokens":["Returns","whether","a","type","is","DATE,","TIME,","or","TIMESTAMP"],"prompt_tokens":[]}
{"code_tokens":["public","static","boolean","isDate","(","RelDataType","type",")","{","SqlTypeName","typeName","=","type",".","getSqlTypeName","(",")",";","if","(","typeName","==","null",")","{","return","false",";","}","\n\n","return","type",".","getSqlTypeName","(",")","==","SqlTypeName",".","DATE",";"],"docstring_tokens":["Returns","whether","a","type","is","DATE"],"prompt_tokens":[]}
{"code_tokens":["public","static","boolean","isTimestamp","(","RelDataType","type",")","{","return","SqlTypeFamily",".","TIMESTAMP",".","contains","(","type",")",";"],"docstring_tokens":["Returns","whether","a","type","is","TIMESTAMP"],"prompt_tokens":[]}
{"code_tokens":["@SuppressWarnings","(","\"contracts",".","conditional",".","postcondition",".","not",".","satisfied\"",")","@EnsuresNonNullIf","(","expression","=","\"#1",".","getIntervalQualifier","(",")","\",","result","=","true",")","public","static","boolean","isInterval","(","RelDataType","type",")","{","return","SqlTypeFamily",".","DATETIME_INTERVAL",".","contains","(","type",")",";"],"docstring_tokens":["Returns","whether","a","type","is","some","kind","of","INTERVAL"],"prompt_tokens":[]}
{"code_tokens":["@SuppressWarnings","(","\"contracts",".","conditional",".","postcondition",".","not",".","satisfied\"",")","@EnsuresNonNullIf","(","expression","=","\"#1",".","getCharset","(",")","\",","result","=","true",")","@EnsuresNonNullIf","(","expression","=","\"#1",".","getCollation","(",")","\",","result","=","true",")","public","static","boolean","inCharFamily","(","RelDataType","type",")","{","return","type",".","getFamily","(",")","==","SqlTypeFamily",".","CHARACTER",";"],"docstring_tokens":["Returns","whether","a","type","is","in","SqlTypeFamily.Character"],"prompt_tokens":[]}
{"code_tokens":["public","static","boolean","inCharFamily","(","SqlTypeName","typeName",")","{","return","typeName",".","getFamily","(",")","==","SqlTypeFamily",".","CHARACTER",";"],"docstring_tokens":["Returns","whether","a","type","name","is","in","SqlTypeFamily.Character"],"prompt_tokens":[]}
{"code_tokens":["public","static","boolean","inBooleanFamily","(","RelDataType","type",")","{","return","type",".","getFamily","(",")","==","SqlTypeFamily",".","BOOLEAN",";"],"docstring_tokens":["Returns","whether","a","type","is","in","SqlTypeFamily.Boolean"],"prompt_tokens":[]}
{"code_tokens":["public","static","boolean","inSameFamily","(","RelDataType","t1,","RelDataType","t2",")","{","return","t1",".","getFamily","(",")","==","t2",".","getFamily","(",")",";"],"docstring_tokens":["Returns","whether","two","types","are","in","same","type","family"],"prompt_tokens":[]}
{"code_tokens":["public","static","boolean","inCharOrBinaryFamilies","(","RelDataType","type",")","{","return","(","type",".","getFamily","(",")","==","SqlTypeFamily",".","CHARACTER",")","||","(","type",".","getFamily","(",")","==","SqlTypeFamily",".","BINARY",")",";"],"docstring_tokens":["Returns","whether","a","type","family","is","either","character","or","binary"],"prompt_tokens":[]}
{"code_tokens":["public","static","boolean","isLob","(","RelDataType","type",")","{","//","TODO","jvs","9-Dec-2004:","once","we","support","LOB","types\n","return","false",";"],"docstring_tokens":["Returns","whether","a","type","is","a","LOB","of","some","kind"],"prompt_tokens":[]}
{"code_tokens":["public","static","boolean","isBoundedVariableWidth","(","RelDataType","type",")","{","SqlTypeName","typeName","=","type",".","getSqlTypeName","(",")",";","if","(","typeName","==","null",")","{","return","false",";","}","switch","(","typeName",")","{","case","VARCHAR:\n","case","VARBINARY:\n\n","//","TODO","angel","8-June-2005:","Multiset","should","be","LOB\n","case","MULTISET:\n","return","true",";","default:\n","return","false",";","}"],"docstring_tokens":["Returns","whether","a","type","is","variable","width","with","bounded","precision"],"prompt_tokens":[]}
{"code_tokens":["public","static","boolean","isIntType","(","RelDataType","type",")","{","SqlTypeName","typeName","=","type",".","getSqlTypeName","(",")",";","if","(","typeName","==","null",")","{","return","false",";","}","switch","(","typeName",")","{","case","TINYINT:\n","case","SMALLINT:\n","case","INTEGER:\n","case","BIGINT:\n","return","true",";","default:\n","return","false",";","}"],"docstring_tokens":["Returns","whether","a","type","is","one","of","the","integer","types"],"prompt_tokens":[]}
{"code_tokens":["public","static","boolean","isDecimal","(","RelDataType","type",")","{","SqlTypeName","typeName","=","type",".","getSqlTypeName","(",")",";","if","(","typeName","==","null",")","{","return","false",";","}","return","typeName","==","SqlTypeName",".","DECIMAL",";"],"docstring_tokens":["Returns","whether","a","type","is","DECIMAL"],"prompt_tokens":[]}
{"code_tokens":["public","static","boolean","isDouble","(","RelDataType","type",")","{","SqlTypeName","typeName","=","type",".","getSqlTypeName","(",")",";","if","(","typeName","==","null",")","{","return","false",";","}","return","typeName","==","SqlTypeName",".","DOUBLE",";"],"docstring_tokens":["Returns","whether","a","type","is","DOUBLE"],"prompt_tokens":[]}
{"code_tokens":["public","static","boolean","isBigint","(","RelDataType","type",")","{","SqlTypeName","typeName","=","type",".","getSqlTypeName","(",")",";","if","(","typeName","==","null",")","{","return","false",";","}","return","typeName","==","SqlTypeName",".","BIGINT",";"],"docstring_tokens":["Returns","whether","a","type","is","BIGINT"],"prompt_tokens":[]}
{"code_tokens":["public","static","boolean","isExactNumeric","(","RelDataType","type",")","{","SqlTypeName","typeName","=","type",".","getSqlTypeName","(",")",";","if","(","typeName","==","null",")","{","return","false",";","}","switch","(","typeName",")","{","case","TINYINT:\n","case","SMALLINT:\n","case","INTEGER:\n","case","BIGINT:\n","case","DECIMAL:\n","return","true",";","default:\n","return","false",";","}"],"docstring_tokens":["Returns","whether","a","type","is","numeric","with","exact","precision"],"prompt_tokens":[]}
{"code_tokens":["public","static","long","maxValue","(","RelDataType","type",")","{","assert","SqlTypeUtil",".","isIntType","(","type",")",";","switch","(","type",".","getSqlTypeName","(",")",")","{","case","TINYINT:\n","return","Byte",".","MAX_VALUE",";","case","SMALLINT:\n","return","Short",".","MAX_VALUE",";","case","INTEGER:\n","return","Integer",".","MAX_VALUE",";","case","BIGINT:\n","return","Long",".","MAX_VALUE",";","default:\n","throw","Util",".","unexpected","(","type",".","getSqlTypeName","(",")",")",";","}"],"docstring_tokens":["Returns","the","maximum","value","of","an","integral","type,","as","a","long","value"],"prompt_tokens":[]}
{"code_tokens":["public","static","boolean","isApproximateNumeric","(","RelDataType","type",")","{","SqlTypeName","typeName","=","type",".","getSqlTypeName","(",")",";","if","(","typeName","==","null",")","{","return","false",";","}","switch","(","typeName",")","{","case","FLOAT:\n","case","REAL:\n","case","DOUBLE:\n","return","true",";","default:\n","return","false",";","}"],"docstring_tokens":["Returns","whether","a","type","is","numeric","with","approximate","precision"],"prompt_tokens":[]}
{"code_tokens":["public","static","boolean","isNumeric","(","RelDataType","type",")","{","return","isExactNumeric","(","type",")","||","isApproximateNumeric","(","type",")",";"],"docstring_tokens":["Returns","whether","a","type","is","numeric"],"prompt_tokens":[]}
{"code_tokens":["public","static","boolean","isNull","(","RelDataType","type",")","{","SqlTypeName","typeName","=","type",".","getSqlTypeName","(",")",";","if","(","typeName","==","null",")","{","return","false",";","}","return","typeName","==","SqlTypeName",".","NULL",";"],"docstring_tokens":["Returns","whether","a","type","is","the","NULL","type"],"prompt_tokens":[]}
{"code_tokens":["public","static","long","getMinValue","(","RelDataType","type",")","{","SqlTypeName","typeName","=","type",".","getSqlTypeName","(",")",";","switch","(","typeName",")","{","case","TINYINT:\n","return","Byte",".","MIN_VALUE",";","case","SMALLINT:\n","return","Short",".","MIN_VALUE",";","case","INTEGER:\n","return","Integer",".","MIN_VALUE",";","case","BIGINT:\n","case","DECIMAL:\n","return","NumberUtil",".","getMinUnscaled","(","type",".","getPrecision","(",")",")",".","longValue","(",")",";","default:\n","throw","new","AssertionError","(","\"getMinValue","(","\"","+","typeName","+","\"",")","\"",")",";","}"],"docstring_tokens":["Returns","the","minimum","unscaled","value","of","a","numeric","type"],"prompt_tokens":[]}
{"code_tokens":["public","static","long","getMaxValue","(","RelDataType","type",")","{","SqlTypeName","typeName","=","type",".","getSqlTypeName","(",")",";","switch","(","typeName",")","{","case","TINYINT:\n","return","Byte",".","MAX_VALUE",";","case","SMALLINT:\n","return","Short",".","MAX_VALUE",";","case","INTEGER:\n","return","Integer",".","MAX_VALUE",";","case","BIGINT:\n","case","DECIMAL:\n","return","NumberUtil",".","getMaxUnscaled","(","type",".","getPrecision","(",")",")",".","longValue","(",")",";","default:\n","throw","new","AssertionError","(","\"getMaxValue","(","\"","+","typeName","+","\"",")","\"",")",";","}"],"docstring_tokens":["Returns","the","maximum","unscaled","value","of","a","numeric","type"],"prompt_tokens":[]}
{"code_tokens":["@Deprecated","//","to","be","removed","before","2",".","0\n","public","static","@Nullable","String","getPrimitiveWrapperJavaClassName","(","@Nullable","RelDataType","type",")","{","if","(","type","==","null",")","{","return","null",";","}","SqlTypeName","typeName","=","type",".","getSqlTypeName","(",")",";","if","(","typeName","==","null",")","{","return","null",";","}","\n\n","switch","(","typeName",")","{","case","BOOLEAN:\n","return","\"Boolean\"",";","default:\n","//noinspection","deprecation\n","return","getNumericJavaClassName","(","type",")",";","}"],"docstring_tokens":["Returns","the","class","name","of","the","wrapper","for","the","primitive","data","type"],"prompt_tokens":[]}
{"code_tokens":["@Deprecated","//","to","be","removed","before","2",".","0\n","public","static","@Nullable","String","getNumericJavaClassName","(","@Nullable","RelDataType","type",")","{","if","(","type","==","null",")","{","return","null",";","}","SqlTypeName","typeName","=","type",".","getSqlTypeName","(",")",";","if","(","typeName","==","null",")","{","return","null",";","}","\n\n","switch","(","typeName",")","{","case","TINYINT:\n","return","\"Byte\"",";","case","SMALLINT:\n","return","\"Short\"",";","case","INTEGER:\n","return","\"Integer\"",";","case","BIGINT:\n","return","\"Long\"",";","case","REAL:\n","return","\"Float\"",";","case","DECIMAL:\n","case","FLOAT:\n","case","DOUBLE:\n","return","\"Double\"",";","default:\n","return","null",";","}"],"docstring_tokens":["Returns","the","class","name","of","a","numeric","data","type"],"prompt_tokens":[]}
{"code_tokens":["public","static","boolean","canAssignFrom","(","RelDataType","toType,\n","RelDataType","fromType",")","{","if","(","isAny","(","toType",")","||","isAny","(","fromType",")",")","{","return","true",";","}","\n\n","//","TODO","jvs","2-Jan-2005:","handle","all","the","other","cases","like\n","//","rows,","collections,","UDT's\n","if","(","fromType",".","getSqlTypeName","(",")","==","SqlTypeName",".","NULL",")","{","//","REVIEW","jvs","4-Dec-2008:","We","allow","assignment","from","NULL","to","any\n","//","type,","including","NOT","NULL","types,","since","in","the","case","where","no\n","//","rows","are","actually","processed,","the","assignment","is","legal\n","//","(","FRG-365",")",".","However,","it","would","be","better","if","the","validator's\n","//","NULL","type","inference","guaranteed","that","we","had","already\n","//","assigned","a","real","(","nullable",")","type","to","every","NULL","literal",".","return","true",";","}","\n\n","if","(","fromType",".","getSqlTypeName","(",")","==","SqlTypeName",".","ARRAY",")","{","if","(","toType",".","getSqlTypeName","(",")","!=","SqlTypeName",".","ARRAY",")","{","return","false",";","}","return","canAssignFrom","(","getComponentTypeOrThrow","(","toType",")",",","getComponentTypeOrThrow","(","fromType",")",")",";","}","\n\n","if","(","areCharacterSetsMismatched","(","toType,","fromType",")",")","{","return","false",";","}","\n\n","return","toType",".","getFamily","(",")","==","fromType",".","getFamily","(",")",";"],"docstring_tokens":["Tests","whether","a","value","can","be","assigned","to","a","site"],"prompt_tokens":[]}
{"code_tokens":["public","static","RelDataType","addCharsetAndCollation","(","RelDataType","type,\n","RelDataTypeFactory","typeFactory",")","{","if","(","!inCharFamily","(","type",")",")","{","return","type",";","}","Charset","charset","=","type",".","getCharset","(",")",";","if","(","charset","==","null",")","{","charset","=","typeFactory",".","getDefaultCharset","(",")",";","}","SqlCollation","collation","=","type",".","getCollation","(",")",";","if","(","collation","==","null",")","{","collation","=","SqlCollation",".","IMPLICIT",";","}","\n\n","//","todo:","should","get","the","implicit","collation","from","repository\n","//","instead","of","null\n","type","=\n","typeFactory",".","createTypeWithCharsetAndCollation","(","type,\n","charset,\n","collation",")",";","SqlValidatorUtil",".","checkCharsetAndCollateConsistentIfCharType","(","type",")",";","return","type",";"],"docstring_tokens":["Adds","collation","and","charset","to","a","character","type,","returns","other","types","unchanged"],"prompt_tokens":[]}
{"code_tokens":["public","static","boolean","equalSansNullability","(","RelDataTypeFactory","factory,\n","RelDataType","type1,\n","RelDataType","type2",")","{","if","(","type1",".","isNullable","(",")","==","type2",".","isNullable","(",")",")","{","return","type1",".","equals","(","type2",")",";","}","return","type1",".","equals","(","factory",".","createTypeWithNullability","(","type2,","type1",".","isNullable","(",")",")",")",";"],"docstring_tokens":["Returns","whether","two","types","are","equal,","ignoring","nullability"],"prompt_tokens":[]}
{"code_tokens":["public","static","boolean","equalAsCollectionSansNullability","(","RelDataTypeFactory","factory,\n","RelDataType","type1,\n","RelDataType","type2",")","{","Preconditions",".","checkArgument","(","isCollection","(","type1",")",",\n","\"Input","type1","must","be","collection","type\"",")",";","Preconditions",".","checkArgument","(","isCollection","(","type2",")",",\n","\"Input","type2","must","be","collection","type\"",")",";","\n\n","return","(","type1","==","type2",")","||","(","type1",".","getSqlTypeName","(",")","==","type2",".","getSqlTypeName","(",")","&&","equalSansNullability","(","factory,","getComponentTypeOrThrow","(","type1",")",",","getComponentTypeOrThrow","(","type2",")",")",")",";"],"docstring_tokens":["Returns","whether","two","collection","types","are","equal,","ignoring","nullability"],"prompt_tokens":[]}
{"code_tokens":["public","static","boolean","equalAsMapSansNullability","(","RelDataTypeFactory","factory,\n","RelDataType","type1,\n","RelDataType","type2",")","{","Preconditions",".","checkArgument","(","isMap","(","type1",")",",","\"Input","type1","must","be","map","type\"",")",";","Preconditions",".","checkArgument","(","isMap","(","type2",")",",","\"Input","type2","must","be","map","type\"",")",";","\n\n","MapSqlType","mType1","=","(","MapSqlType",")","type1",";","MapSqlType","mType2","=","(","MapSqlType",")","type2",";","return","(","type1","==","type2",")","||","(","equalSansNullability","(","factory,","mType1",".","getKeyType","(",")",",","mType2",".","getKeyType","(",")",")","&&","equalSansNullability","(","factory,","mType1",".","getValueType","(",")",",","mType2",".","getValueType","(",")",")",")",";"],"docstring_tokens":["Returns","whether","two","map","types","are","equal,","ignoring","nullability"],"prompt_tokens":[]}
{"code_tokens":["public","static","boolean","equalAsStructSansNullability","(","RelDataTypeFactory","factory,\n","RelDataType","type1,\n","RelDataType","type2,\n","@Nullable","SqlNameMatcher","nameMatcher",")","{","Preconditions",".","checkArgument","(","type1",".","isStruct","(",")",",","\"Input","type1","must","be","struct","type\"",")",";","Preconditions",".","checkArgument","(","type2",".","isStruct","(",")",",","\"Input","type2","must","be","struct","type\"",")",";","\n\n","if","(","type1","==","type2",")","{","return","true",";","}","\n\n","if","(","type1",".","getFieldCount","(",")","!=","type2",".","getFieldCount","(",")",")","{","return","false",";","}","\n\n","for","(","Pair<RelDataTypeField,","RelDataTypeField>","pair\n",":","Pair",".","zip","(","type1",".","getFieldList","(",")",",","type2",".","getFieldList","(",")",")",")","{","if","(","nameMatcher","!=","null\n","&&","!nameMatcher",".","matches","(","pair",".","left",".","getName","(",")",",","pair",".","right",".","getName","(",")",")",")","{","return","false",";","}","if","(","!equalSansNullability","(","factory,","pair",".","left",".","getType","(",")",",","pair",".","right",".","getType","(",")",")",")","{","return","false",";","}","}","\n\n","return","true",";"],"docstring_tokens":["Returns","whether","two","struct","types","are","equal,","ignoring","nullability"],"prompt_tokens":[]}
{"code_tokens":["public","static","boolean","isFlat","(","RelDataType","type",")","{","if","(","type",".","isStruct","(",")",")","{","for","(","RelDataTypeField","field",":","type",".","getFieldList","(",")",")","{","if","(","field",".","getType","(",")",".","isStruct","(",")",")","{","return","false",";","}","}","}","return","true",";"],"docstring_tokens":["Returns","whether","a","type","is","flat"],"prompt_tokens":[]}
{"code_tokens":["public","static","boolean","isUnicode","(","RelDataType","type",")","{","Charset","charset","=","type",".","getCharset","(",")",";","if","(","charset","==","null",")","{","return","false",";","}","return","charset",".","name","(",")",".","startsWith","(","\"UTF\"",")",";"],"docstring_tokens":["Checks","whether","a","type","represents","Unicode","character","data"],"prompt_tokens":[]}
{"code_tokens":["public","static","boolean","isArray","(","RelDataType","type",")","{","return","type",".","getSqlTypeName","(",")","==","SqlTypeName",".","ARRAY",";"],"docstring_tokens":["Returns","whether","a","type","is","ARRAY"],"prompt_tokens":[]}
{"code_tokens":["public","static","boolean","isRow","(","RelDataType","type",")","{","SqlTypeName","typeName","=","type",".","getSqlTypeName","(",")",";","if","(","typeName","==","null",")","{","return","false",";","}","return","type",".","getSqlTypeName","(",")","==","SqlTypeName",".","ROW",";"],"docstring_tokens":["Returns","whether","a","type","is","ROW"],"prompt_tokens":[]}
{"code_tokens":["public","static","boolean","isMap","(","RelDataType","type",")","{","SqlTypeName","typeName","=","type",".","getSqlTypeName","(",")",";","if","(","typeName","==","null",")","{","return","false",";","}","return","type",".","getSqlTypeName","(",")","==","SqlTypeName",".","MAP",";"],"docstring_tokens":["Returns","whether","a","type","is","MAP"],"prompt_tokens":[]}
{"code_tokens":["public","static","boolean","isMultiset","(","RelDataType","type",")","{","SqlTypeName","typeName","=","type",".","getSqlTypeName","(",")",";","if","(","typeName","==","null",")","{","return","false",";","}","return","type",".","getSqlTypeName","(",")","==","SqlTypeName",".","MULTISET",";"],"docstring_tokens":["Returns","whether","a","type","is","MULTISET"],"prompt_tokens":[]}
{"code_tokens":["public","static","boolean","isCollection","(","RelDataType","type",")","{","SqlTypeName","typeName","=","type",".","getSqlTypeName","(",")",";","if","(","typeName","==","null",")","{","return","false",";","}","return","type",".","getSqlTypeName","(",")","==","SqlTypeName",".","ARRAY\n","||","type",".","getSqlTypeName","(",")","==","SqlTypeName",".","MULTISET",";"],"docstring_tokens":["Returns","whether","a","type","is","ARRAY","or","MULTISET"],"prompt_tokens":[]}
{"code_tokens":["public","static","boolean","isCharacter","(","RelDataType","type",")","{","SqlTypeName","typeName","=","type",".","getSqlTypeName","(",")",";","if","(","typeName","==","null",")","{","return","false",";","}","return","SqlTypeFamily",".","CHARACTER",".","contains","(","type",")",";"],"docstring_tokens":["Returns","whether","a","type","is","CHARACTER"],"prompt_tokens":[]}
{"code_tokens":["@Deprecated","//","to","be","removed","before","2",".","0\n","public","static","boolean","hasCharactor","(","RelDataType","type",")","{","return","hasCharacter","(","type",")",";"],"docstring_tokens":["Returns","whether","a","type","is","a","CHARACTER","or","contains","a","CHARACTER","type"],"prompt_tokens":[]}
{"code_tokens":["public","static","boolean","isString","(","RelDataType","type",")","{","SqlTypeName","typeName","=","type",".","getSqlTypeName","(",")",";","if","(","typeName","==","null",")","{","return","false",";","}","return","SqlTypeFamily",".","STRING",".","contains","(","type",")",";"],"docstring_tokens":["Returns","whether","a","type","is","STRING"],"prompt_tokens":[]}
{"code_tokens":["public","static","boolean","isBoolean","(","RelDataType","type",")","{","SqlTypeName","typeName","=","type",".","getSqlTypeName","(",")",";","if","(","typeName","==","null",")","{","return","false",";","}","return","SqlTypeFamily",".","BOOLEAN",".","contains","(","type",")",";"],"docstring_tokens":["Returns","whether","a","type","is","BOOLEAN"],"prompt_tokens":[]}
{"code_tokens":["public","static","boolean","isBinary","(","RelDataType","type",")","{","SqlTypeName","typeName","=","type",".","getSqlTypeName","(",")",";","if","(","typeName","==","null",")","{","return","false",";","}","return","SqlTypeFamily",".","BINARY",".","contains","(","type",")",";"],"docstring_tokens":["Returns","whether","a","type","is","BINARY"],"prompt_tokens":[]}
{"code_tokens":["public","static","RelDataType","getMaxPrecisionScaleDecimal","(","RelDataTypeFactory","factory",")","{","int","maxPrecision","=","factory",".","getTypeSystem","(",")",".","getMaxNumericPrecision","(",")",";","//","scale","should","not","greater","than","precision",".","int","scale","=","maxPrecision","/","2",";","return","factory",".","createSqlType","(","SqlTypeName",".","DECIMAL,","maxPrecision,","scale",")",";"],"docstring_tokens":["Returns","a","DECIMAL","type","with","the","maximum","precision","for","the","current","type","system"],"prompt_tokens":[]}
{"code_tokens":["public","static","RelDataType","extractLastNFields","(","RelDataTypeFactory","typeFactory,\n","RelDataType","type,","int","numToKeep",")","{","assert","type",".","isStruct","(",")",";","assert","type",".","getFieldCount","(",")",">=","numToKeep",";","final","int","fieldsCnt","=","type",".","getFieldCount","(",")",";","return","typeFactory",".","createStructType","(","type",".","getFieldList","(",")",".","subList","(","fieldsCnt","-","numToKeep,","fieldsCnt",")",")",";"],"docstring_tokens":["Keeps","only","the","last","N","fields","and","returns","the","new","struct","type"],"prompt_tokens":[]}
{"code_tokens":["public","static","boolean","isValidDecimalValue","(","@Nullable","BigDecimal","value,","RelDataType","toType",")","{","if","(","value","==","null",")","{","return","true",";","}","switch","(","toType",".","getSqlTypeName","(",")",")","{","case","DECIMAL:\n","final","int","intDigits","=","value",".","precision","(",")","-","value",".","scale","(",")",";","final","int","maxIntDigits","=","toType",".","getPrecision","(",")","-","toType",".","getScale","(",")",";","return","intDigits","<=","maxIntDigits",";","default:\n","return","true",";","}"],"docstring_tokens":["Returns","whether","the","decimal","value","is","valid","for","the","type"],"prompt_tokens":[]}
{"code_tokens":["public","static","SqlNameMatcher","withCaseSensitive","(","final","boolean","caseSensitive",")","{","return","caseSensitive","?","CASE_SENSITIVE",":","CASE_INSENSITIVE",";"],"docstring_tokens":["Returns","a","name","matcher","with","the","given","case","sensitivity"],"prompt_tokens":[]}
{"code_tokens":["@Override","public","String[]","readNext","(",")","throws","IOException","{","String[]","result","=","null",";","do","{","String","nextLine","=","getNextLine","(",")",";","if","(","nextLine","==","null",")","{","return","null",";","}","String[]","r","=","parser",".","parseLineMulti","(","nextLine",")",";","if","(","r",".","length",">","0",")","{","if","(","result","==","null",")","{","result","=","r",";","}","else","{","String[]","t","=","new","String[result",".","length","+","r",".","length]",";","System",".","arraycopy","(","result,","0,","t,","0,","result",".","length",")",";","System",".","arraycopy","(","r,","0,","t,","result",".","length,","r",".","length",")",";","result","=","t",";","}","}","}","while","(","parser",".","isPending","(",")",")",";","return","result",";"],"docstring_tokens":["Reads","the","next","line","from","the","buffer","and","converts","to","a","string","array"],"prompt_tokens":[]}
{"code_tokens":["@Override","public","void","close","(",")","throws","IOException","{"],"docstring_tokens":["Closes","the","underlying","reader"],"prompt_tokens":[]}
{"code_tokens":["CalciteConnection","connect","(","CalciteSchema","rootSchema,\n","@Nullable","JavaTypeFactory","typeFactory",")","{","return","(","CalciteConnection",")","(","(","CalciteFactory",")","factory",")",".","newConnection","(","this,","factory,","CONNECT_STRING_PREFIX,","new","Properties","(",")",",\n","rootSchema,","typeFactory",")",";"],"docstring_tokens":["Creates","an","internal","connection"],"prompt_tokens":[]}
{"code_tokens":["public","Expression","append","(","String","name,","BlockStatement","block,\n","boolean","optimize",")","{","if","(","statements",".","size","(",")",">","0",")","{","Statement","lastStatement","=","statements",".","get","(","statements",".","size","(",")","-","1",")",";","if","(","lastStatement","instanceof","GotoStatement",")","{","//","convert","\"return","expr",";","\"","into","\"expr",";","\"\n","statements",".","set","(","statements",".","size","(",")","-","1,\n","Expressions",".","statement","(","(","(","GotoStatement",")","lastStatement",")",".","expression",")",")",";","}","}","Expression","result","=","null",";","final","IdentityHashMap<ParameterExpression,","Expression>","replacements","=\n","new","IdentityHashMap<>","(",")",";","final","Shuttle","shuttle","=","new","SubstituteVariableVisitor","(","replacements",")",";","for","(","int","i","=","0",";","i","<","block",".","statements",".","size","(",")",";","i++",")","{","Statement","statement","=","block",".","statements",".","get","(","i",")",";","if","(","!replacements",".","isEmpty","(",")",")","{","//","Save","effort,","and","only","substitute","variables","if","there","are","some",".","statement","=","statement",".","accept","(","shuttle",")",";","}","if","(","statement","instanceof","DeclarationStatement",")","{","DeclarationStatement","declaration","=","(","DeclarationStatement",")","statement",";","if","(","!variables",".","contains","(","declaration",".","parameter",".","name",")",")","{","add","(","statement",")",";","}","else","{","String","newName","=","newName","(","declaration",".","parameter",".","name,","optimize",")",";","Expression","x",";","//","When","initializer","is","null,","append","(","name,","initializer",")","can't","deduce","expression","type\n","if","(","declaration",".","initializer","!=","null","&&","isSafeForReuse","(","declaration",")",")","{","x","=","append","(","newName,","declaration",".","initializer",")",";","}","else","{","ParameterExpression","pe","=","Expressions",".","parameter","(","declaration",".","parameter",".","type,","newName",")",";","DeclarationStatement","newDeclaration","=","Expressions",".","declare","(","declaration",".","modifiers,","pe,","declaration",".","initializer",")",";","x","=","pe",";","add","(","newDeclaration",")",";","}","statement","=","null",";","result","=","x",";","if","(","declaration",".","parameter","!=","x",")","{","//","declaration",".","parameter","can","be","equal","to","x","if","exactly","the","same\n","//","declaration","was","present","in","BlockBuilder\n","replacements",".","put","(","declaration",".","parameter,","x",")",";","}","}","}","else","{","add","(","statement",")",";","}","if","(","i","==","block",".","statements",".","size","(",")","-","1",")","{","if","(","statement","instanceof","DeclarationStatement",")","{","result","=","(","(","DeclarationStatement",")","statement",")",".","parameter",";","}","else","if","(","statement","instanceof","GotoStatement",")","{","statements",".","remove","(","statements",".","size","(",")","-","1",")",";","result","=","append_","(","name,\n","requireNonNull","(","(","(","GotoStatement",")","statement",")",".","expression,","\"expression\"",")",",\n","optimize",")",";","if","(","isSimpleExpression","(","result",")",")","{","//","already","simple",";","no","need","to","declare","a","variable","or\n","//","even","to","evaluate","the","expression\n","}","else","{","DeclarationStatement","declare","=","Expressions",".","declare","(","Modifier",".","FINAL,\n","newName","(","name,","optimize",")",",","result",")",";","add","(","declare",")",";","result","=","declare",".","parameter",";","}","}","else","{","//","not","an","expression","--","result","remains","null\n","}","}","}","return","requireNonNull","(","result,","(",")","->","\"empty","result","when","appending","name=\"","+","name","+","\",","\"","+","block",")",";"],"docstring_tokens":["Appends","an","expression","to","a","list","of","statements,","optionally","optimizing","it","to","a","variable","if","it","is","used","more","than","once"],"prompt_tokens":[]}
{"code_tokens":["public","Expression","append","(","String","name,","Expression","expression,\n","boolean","optimize",")","{","if","(","statements",".","size","(",")",">","0",")","{","Statement","lastStatement","=","statements",".","get","(","statements",".","size","(",")","-","1",")",";","if","(","lastStatement","instanceof","GotoStatement",")","{","//","convert","\"return","expr",";","\"","into","\"expr",";","\"\n","statements",".","set","(","statements",".","size","(",")","-","1,\n","Expressions",".","statement","(","(","(","GotoStatement",")","lastStatement",")",".","expression",")",")",";","}","}","return","append_","(","name,","expression,","optimize",")",";"],"docstring_tokens":["Appends","an","expression","to","a","list","of","statements,","optionally","optimizing","if","the","expression","is","used","more","than","once"],"prompt_tokens":[]}
{"code_tokens":["private","static","Expression","normalizeDeclaration","(","DeclarationStatement","decl",")","{","Expression","expr","=","decl",".","initializer",";","Type","declType","=","decl",".","parameter",".","getType","(",")",";","if","(","expr","==","null",")","{","expr","=","Expressions",".","constant","(","null,","declType",")",";","}","else","if","(","expr",".","getType","(",")","!=","declType",")","{","expr","=","Expressions",".","convert_","(","expr,","declType",")",";","}","return","expr",";"],"docstring_tokens":["Prepares","declaration","for","inlining,","adds","cast"],"prompt_tokens":[]}
{"code_tokens":["public","BlockStatement","toBlock","(",")","{","if","(","optimizing","&&","removeUnused",")","{","//","We","put","an","artificial","limit","of","10","iterations","just","to","prevent","an","endless\n","//","loop",".","Optimize","should","not","loop","forever,","however","it","is","hard","to","prove","if\n","//","it","always","finishes","in","reasonable","time",".","for","(","int","i","=","0",";","i","<","10",";","i++",")","{","if","(","!optimize","(","createOptimizeShuttle","(",")",",","true",")",")","{","break",";","}","}","optimize","(","createFinishingOptimizeShuttle","(",")",",","false",")",";","}","return","Expressions",".","block","(","statements",")",";"],"docstring_tokens":["Returns","a","block","consisting","of","the","current","list","of","statements"],"prompt_tokens":[]}
{"code_tokens":["private","boolean","optimize","(","Shuttle","optimizer,","boolean","performInline",")","{","int","optimizeCount","=","0",";","final","UseCounter","useCounter","=","new","UseCounter","(",")",";","for","(","Statement","statement",":","statements",")","{","if","(","statement","instanceof","DeclarationStatement","&&","performInline",")","{","DeclarationStatement","decl","=","(","DeclarationStatement",")","statement",";","useCounter",".","map",".","put","(","decl",".","parameter,","new","Slot","(",")",")",";","}","//","We","are","added","only","counters","up","to","current","statement",".","//","It","is","fine","to","count","usages","as","the","latter","declarations","cannot","be","used\n","//","in","more","recent","statements",".","if","(","!useCounter",".","map",".","isEmpty","(",")",")","{","statement",".","accept","(","useCounter",")",";","}","}","final","IdentityHashMap<ParameterExpression,","Expression>","subMap","=\n","new","IdentityHashMap<>","(","useCounter",".","map",".","size","(",")",")",";","final","Shuttle","visitor","=","new","InlineVariableVisitor","(","subMap",")",";","final","ArrayList<Statement>","oldStatements","=","new","ArrayList<>","(","statements",")",";","statements",".","clear","(",")",";","\n\n","for","(","Statement","oldStatement",":","oldStatements",")","{","if","(","oldStatement","instanceof","DeclarationStatement",")","{","DeclarationStatement","statement","=","(","DeclarationStatement",")","oldStatement",";","final","Slot","slot","=","useCounter",".","map",".","get","(","statement",".","parameter",")",";","int","count","=","slot","==","null","?","Integer",".","MAX_VALUE","-","10",":","slot",".","count",";","if","(","count",">","1","&&","isSimpleExpression","(","statement",".","initializer",")",")","{","//","Inline","simple","final","constants\n","count","=","1",";","}","if","(","!isSafeForReuse","(","statement",")",")","{","//","Don't","inline","variables","that","are","not","final",".","They","might","be","assigned\n","//","more","than","once",".","count","=","100",";","}","if","(","isCostly","(","statement",")",")","{","//","Don't","inline","variables","that","are","costly,","such","as","\"new","MyFunction","(",")","\"",".","//","Later","we","will","make","their","declarations","static",".","count","=","100",";","}","if","(","statement",".","parameter",".","name",".","startsWith","(","\"_\"",")",")","{","//","Don't","inline","variables","whose","name","begins","with","\"_\"",".","This\n","//","is","a","hacky","way","to","prevent","inlining",".","E",".","g",".","//","final","int","_count","=","collection",".","size","(",")",";","//","foo","(","collection",")",";","//","return","collection",".","size","(",")","-","_count",";","count","=","Integer",".","MAX_VALUE",";","}","if","(","statement",".","initializer","instanceof","NewExpression\n","&&","(","(","NewExpression",")","statement",".","initializer",")",".","memberDeclarations\n","!=","null",")","{","//","Don't","inline","anonymous","inner","classes",".","Janino","gets\n","//","confused","referencing","variables","from","deeply","nested\n","//","anonymous","classes",".","count","=","Integer",".","MAX_VALUE",";","}","Expression","normalized","=","normalizeDeclaration","(","statement",")",";","expressionForReuse",".","remove","(","normalized",")",";","switch","(","count",")","{","case","0:\n","//","Only","declared,","never","used",".","Throw","away","declaration",".","break",";","case","1:\n","//","declared,","used","once",".","inline","it",".","subMap",".","put","(","statement",".","parameter,","normalized",")",";","break",";","default:\n","Statement","beforeOptimize","=","oldStatement",";","if","(","!subMap",".","isEmpty","(",")",")","{","oldStatement","=","oldStatement",".","accept","(","visitor",")",";","//","remap\n","}","oldStatement","=","oldStatement",".","accept","(","optimizer",")",";","if","(","beforeOptimize","!=","oldStatement",")","{","++optimizeCount",";","if","(","count","!=","Integer",".","MAX_VALUE\n","&&","oldStatement","instanceof","DeclarationStatement\n","&&","isSafeForReuse","(","(","DeclarationStatement",")","oldStatement",")","&&","isSimpleExpression","(","(","(","DeclarationStatement",")","oldStatement",")",".","initializer",")",")","{","//","Allow","to","inline","the","expression","that","became","simple","after\n","//","optimizations",".","DeclarationStatement","newDecl","=\n","(","DeclarationStatement",")","oldStatement",";","subMap",".","put","(","newDecl",".","parameter,","normalizeDeclaration","(","newDecl",")",")",";","oldStatement","=","OptimizeShuttle",".","EMPTY_STATEMENT",";","}","}","if","(","oldStatement","!=","OptimizeShuttle",".","EMPTY_STATEMENT",")","{","if","(","oldStatement","instanceof","DeclarationStatement",")","{","addExpressionForReuse","(","(","DeclarationStatement",")","oldStatement",")",";","}","statements",".","add","(","oldStatement",")",";","}","break",";","}","}","else","{","Statement","beforeOptimize","=","oldStatement",";","if","(","!subMap",".","isEmpty","(",")",")","{","oldStatement","=","oldStatement",".","accept","(","visitor",")",";","//","remap\n","}","oldStatement","=","oldStatement",".","accept","(","optimizer",")",";","if","(","beforeOptimize","!=","oldStatement",")","{","++optimizeCount",";","}","if","(","oldStatement","!=","OptimizeShuttle",".","EMPTY_STATEMENT",")","{","statements",".","add","(","oldStatement",")",";","}","}","}","return","optimizeCount",">","0",";"],"docstring_tokens":["Optimizes","the","list","of","statements"],"prompt_tokens":[]}
{"code_tokens":["public","String","newName","(","String","suggestion",")","{","int","i","=","0",";","String","candidate","=","suggestion",";","while","(","hasVariable","(","candidate",")",")","{","candidate","=","suggestion","+","i++",";","}","return","candidate",";"],"docstring_tokens":["Creates","a","name","for","a","new","variable,","unique","within","this","block"],"prompt_tokens":[]}
{"code_tokens":["public","SqlParserPos","plusAll","(","Collection<?","extends","@Nullable","SqlNode>","nodes",")","{","final","PosBuilder","b","=","new","PosBuilder","(","this",")",";","for","(","SqlNode","node",":","nodes",")","{","if","(","node","!=","null",")","{","b",".","add","(","node",".","getParserPosition","(",")",")",";","}","}","return","b",".","build","(","this",")",";"],"docstring_tokens":["Combines","this","parser","position","with","a","list","of","positions"],"prompt_tokens":[]}
{"code_tokens":["public","static","<C","extends","Comparable<C>>","RangeSet<C>","minus","(","RangeSet<C>","rangeSet,\n","Range<C>","range",")","{","final","TreeRangeSet<C>","mutableRangeSet","=","TreeRangeSet",".","create","(","rangeSet",")",";","mutableRangeSet",".","remove","(","range",")",";","return","mutableRangeSet",".","equals","(","rangeSet",")","?","rangeSet\n",":","ImmutableRangeSet",".","copyOf","(","mutableRangeSet",")",";"],"docstring_tokens":["Subtracts","a","range","from","a","range","set"],"prompt_tokens":[]}
{"code_tokens":["public","static","<C","extends","Comparable<C>>","int","compare","(","RangeSet<C>","s0,\n","RangeSet<C>","s1",")","{","final","Iterator<Range<C>>","i0","=","s0",".","asRanges","(",")",".","iterator","(",")",";","final","Iterator<Range<C>>","i1","=","s1",".","asRanges","(",")",".","iterator","(",")",";","for","(",";",";",")","{","final","boolean","h0","=","i0",".","hasNext","(",")",";","final","boolean","h1","=","i1",".","hasNext","(",")",";","if","(","!h0","||","!h1",")","{","return","Boolean",".","compare","(","h0,","h1",")",";","}","final","Range<C>","r0","=","i0",".","next","(",")",";","final","Range<C>","r1","=","i1",".","next","(",")",";","int","c","=","compare","(","r0,","r1",")",";","if","(","c","!=","0",")","{","return","c",";","}","}"],"docstring_tokens":["Compares","two","range","sets"],"prompt_tokens":[]}
{"code_tokens":["public","static","<C","extends","Comparable<C>>","boolean","isPoint","(","Range<C>","range",")","{","return","range",".","hasLowerBound","(",")","&&","range",".","hasUpperBound","(",")","&&","range",".","lowerEndpoint","(",")",".","equals","(","range",".","upperEndpoint","(",")",")","&&","!range",".","isEmpty","(",")",";"],"docstring_tokens":["Returns","whether","a","range","is","a","point"],"prompt_tokens":[]}
{"code_tokens":["public","static","<C","extends","Comparable<C>>","boolean","isOpenInterval","(","RangeSet<C>","rangeSet",")","{","if","(","rangeSet",".","isEmpty","(",")",")","{","return","false",";","}","final","Set<Range<C>>","ranges","=","rangeSet",".","asRanges","(",")",";","final","Range<C>","range","=","ranges",".","iterator","(",")",".","next","(",")",";","return","ranges",".","size","(",")","==","1\n","&&","(","!range",".","hasLowerBound","(",")","||","!range",".","hasUpperBound","(",")",")",";"],"docstring_tokens":["Returns","whether","a","range","set","is","a","single","open","interval"],"prompt_tokens":[]}
{"code_tokens":["public","static","<C","extends","Comparable<C>,","R>","R","map","(","Range<C>","range,\n","Handler<C,","R>","handler",")","{","if","(","range",".","hasLowerBound","(",")","&&","range",".","hasUpperBound","(",")",")","{","final","C","lower","=","range",".","lowerEndpoint","(",")",";","final","C","upper","=","range",".","upperEndpoint","(",")",";","if","(","range",".","lowerBoundType","(",")","==","BoundType",".","OPEN",")","{","if","(","range",".","upperBoundType","(",")","==","BoundType",".","OPEN",")","{","return","handler",".","open","(","lower,","upper",")",";","}","else","{","return","handler",".","openClosed","(","lower,","upper",")",";","}","}","else","{","if","(","range",".","upperBoundType","(",")","==","BoundType",".","OPEN",")","{","return","handler",".","closedOpen","(","lower,","upper",")",";","}","else","{","if","(","lower",".","equals","(","upper",")",")","{","return","handler",".","singleton","(","lower",")",";","}","else","{","return","handler",".","closed","(","lower,","upper",")",";","}","}","}","}","else","if","(","range",".","hasLowerBound","(",")",")","{","final","C","lower","=","range",".","lowerEndpoint","(",")",";","if","(","range",".","lowerBoundType","(",")","==","BoundType",".","OPEN",")","{","return","handler",".","greaterThan","(","lower",")",";","}","else","{","return","handler",".","atLeast","(","lower",")",";","}","}","else","if","(","range",".","hasUpperBound","(",")",")","{","final","C","upper","=","range",".","upperEndpoint","(",")",";","if","(","range",".","upperBoundType","(",")","==","BoundType",".","OPEN",")","{","return","handler",".","lessThan","(","upper",")",";","}","else","{","return","handler",".","atMost","(","upper",")",";","}","}","else","{","return","handler",".","all","(",")",";","}"],"docstring_tokens":["Calls","the","appropriate","handler","method","for","the","type","of","range"],"prompt_tokens":[]}
{"code_tokens":["public","static","<C","extends","Comparable<C>,","C2","extends","Comparable<C2>>\n","RangeSet<C2>","copy","(","RangeSet<C>","rangeSet,","Function<C,","C2>","map",")","{","return","map","(","rangeSet,","new","CopyingHandler<C,","C2>","(",")","{","@Override","C2","convert","(","C","c",")","{","return","map",".","apply","(","c",")",";","}","}",")",";"],"docstring_tokens":["Copies","a","range","set"],"prompt_tokens":[]}
{"code_tokens":["Cache","cache","(",")","{","requireStatus","(","AbstractLauncher",".","Status",".","ONLINE",")",";","return","CacheFactory",".","getAnyInstance","(",")",";"],"docstring_tokens":["Returns","current","cache","instance","which","was","initialized","for","tests"],"prompt_tokens":[]}
{"code_tokens":["public","static","Consumer<List>","elasticsearchChecker","(","final","String",".",".",".","strings",")","{","Objects",".","requireNonNull","(","strings,","\"strings\"",")",";","return","a","->","{","ObjectNode","actual","=","a","==","null","||","a",".","isEmpty","(",")","?","null\n",":","(","(","ObjectNode",")","a",".","get","(","0",")",")",";","\n\n","actual","=","expandDots","(","actual",")",";","try","{","\n\n","String","json","=","\"","{","\"","+","Arrays",".","stream","(","strings",")",".","collect","(","Collectors",".","joining","(","\",\"",")",")","+","\"","}","\"",";","ObjectNode","expected","=","(","ObjectNode",")","MAPPER",".","readTree","(","json",")",";","expected","=","expandDots","(","expected",")",";","\n\n","if","(","!expected",".","equals","(","actual",")",")","{","assertEquals","(","MAPPER",".","writeValueAsString","(","expected",")",",","MAPPER",".","writeValueAsString","(","actual",")",",\n","\"expected","and","actual","Elasticsearch","queries","do","not","match\"",")",";","}","}","catch","(","IOException","e",")","{","throw","new","UncheckedIOException","(","e",")",";","}","}",";"],"docstring_tokens":["Returns","a","function","that","checks","that","a","particular","Elasticsearch","pipeline","is","generated","to","implement","a","query"],"prompt_tokens":[]}
{"code_tokens":["static","Table","create","(","DruidSchema","druidSchema,","String","dataSourceName,\n","List<Interval>","intervals,","Map<String,","SqlTypeName>","fieldMap,\n","Set<String>","metricNameSet,","String","timestampColumnName,\n","Map<String,","List<ComplexMetric>>","complexMetrics",")","{","final","ImmutableMap<String,","SqlTypeName>","fields","=\n","ImmutableMap",".","copyOf","(","fieldMap",")",";","return","new","DruidTable","(","druidSchema,\n","dataSourceName,\n","new","MapRelProtoDataType","(","fields,","timestampColumnName",")",",\n","ImmutableSet",".","copyOf","(","metricNameSet",")",",\n","timestampColumnName,\n","intervals,\n","complexMetrics,\n","fieldMap",")",";"],"docstring_tokens":["Creates","a","DruidTable","by","copying","the","given","parameters"],"prompt_tokens":[]}
{"code_tokens":["public","static","boolean","isDynamicStarColName","(","String","name",")","{","return","name",".","startsWith","(","DYNAMIC_STAR_PREFIX",")",";"],"docstring_tokens":["Returns","true","if","the","column","name","starts","with","DYNAMIC_STAR_PREFIX"],"prompt_tokens":[]}
{"code_tokens":["public","static","ConnectionFactory","empty","(",")","{","return","EMPTY",";"],"docstring_tokens":["Returns","an","empty","connection","factory"],"prompt_tokens":[]}
{"code_tokens":["public","static","RexCallBinding","create","(","RelDataTypeFactory","typeFactory,\n","RexCall","call,\n","List<RelCollation>","inputCollations",")","{","return","create","(","typeFactory,","call,","null,","inputCollations",")",";"],"docstring_tokens":["Creates","a","binding","of","the","appropriate","type"],"prompt_tokens":[]}
{"code_tokens":["public","static","RexCallBinding","create","(","RelDataTypeFactory","typeFactory,\n","RexCall","call,","@Nullable","RexProgram","program,\n","List<RelCollation>","inputCollations",")","{","final","List<RexNode>","operands","=\n","program","!=","null","?","program",".","expandList","(","call",".","getOperands","(",")",")",":","call",".","getOperands","(",")",";","switch","(","call",".","getKind","(",")",")","{","case","CAST:\n","return","new","RexCastCallBinding","(","typeFactory,","call",".","getOperator","(",")",",\n","operands,","call",".","getType","(",")",",","inputCollations",")",";","default:\n","return","new","RexCallBinding","(","typeFactory,","call",".","getOperator","(",")",",\n","operands,","inputCollations",")",";","}"],"docstring_tokens":["Creates","a","binding","of","the","appropriate","type,","optionally","with","a","program"],"prompt_tokens":[]}
{"code_tokens":["private","void","postOrderWalk","(","Operator","root,","PlanPreVisitor","visitor",")","throws","FrontendException","{","if","(","root","==","null","||","visitor",".","preVisit","(","(","LogicalRelationalOperator",")","root",")",")","{","return",";","}","\n\n","Collection<Operator>","nexts","=\n","Utils",".","mergeCollection","(","plan",".","getPredecessors","(","root",")",",","plan",".","getSoftLinkPredecessors","(","root",")",")",";","if","(","nexts","!=","null",")","{","for","(","Operator","op",":","nexts",")","{","postOrderWalk","(","op,","visitor",")",";","}","}","root",".","accept","(","visitor",")",";"],"docstring_tokens":["Does","post-order","walk","on","the","Pig","logical","relational","plans","from","sinks","to","sources"],"prompt_tokens":[]}
{"code_tokens":["public","static","void","addFunctions","(","SchemaPlus","schema,","@Nullable","String","functionName,\n","List<String>","path,","String","className,","@Nullable","String","methodName,","boolean","upCase",")","{","final","Class<?>","clazz",";","try","{","clazz","=","Class",".","forName","(","className",")",";","}","catch","(","ClassNotFoundException","e",")","{","throw","new","RuntimeException","(","\"UDF","class","'\"\n","+","className","+","\"'","not","found\"",")",";","}","String","methodNameOrDefault","=","Util",".","first","(","methodName,","\"eval\"",")",";","String","actualFunctionName",";","if","(","functionName","!=","null",")","{","actualFunctionName","=","functionName",";","}","else","{","actualFunctionName","=","methodNameOrDefault",";","}","if","(","upCase",")","{","actualFunctionName","=","actualFunctionName",".","toUpperCase","(","Locale",".","ROOT",")",";","}","final","TableFunction","tableFunction","=\n","TableFunctionImpl",".","create","(","clazz,","methodNameOrDefault",")",";","if","(","tableFunction","!=","null",")","{","schema",".","add","(","Util",".","first","(","functionName,","methodNameOrDefault",")",",\n","tableFunction",")",";","return",";","}","//","Must","look","for","TableMacro","before","ScalarFunction",".","Both","have","an","\"eval\"\n","//","method",".","final","TableMacro","macro","=","TableMacroImpl",".","create","(","clazz",")",";","if","(","macro","!=","null",")","{","schema",".","add","(","actualFunctionName,","macro",")",";","return",";","}","if","(","methodName","!=","null","&&","methodName",".","equals","(","\"*\"",")",")","{","for","(","Map",".","Entry<String,","Function>","entry\n",":","ScalarFunctionImpl",".","functions","(","clazz",")",".","entries","(",")",")","{","String","name","=","entry",".","getKey","(",")",";","if","(","upCase",")","{","name","=","name",".","toUpperCase","(","Locale",".","ROOT",")",";","}","schema",".","add","(","name,","entry",".","getValue","(",")",")",";","}","return",";","}","else","{","final","ScalarFunction","function","=\n","ScalarFunctionImpl",".","create","(","clazz,","methodNameOrDefault",")",";","if","(","function","!=","null",")","{","schema",".","add","(","actualFunctionName,","function",")",";","return",";","}","}","if","(","methodName","==","null",")","{","final","AggregateFunction","aggFunction","=","AggregateFunctionImpl",".","create","(","clazz",")",";","if","(","aggFunction","!=","null",")","{","schema",".","add","(","actualFunctionName,","aggFunction",")",";","return",";","}","}","throw","new","RuntimeException","(","\"Not","a","valid","function","class:","\"","+","clazz\n","+","\"",".","Scalar","functions","and","table","macros","have","an","'eval'","method",";","\"\n","+","\"aggregate","functions","have","'init'","and","'add'","methods,","and","optionally","\"\n","+","\"'initAdd',","'merge'","and","'result'","methods",".","\"",")",";"],"docstring_tokens":["Creates","and","validates","a","ScalarFunctionImpl,","and","adds","it","to","a","schema"],"prompt_tokens":[]}
{"code_tokens":["public","static","boolean","isPureOrder","(","RelNode","rel",")","{","return","!isLimit","(","rel",")","&&","isOrder","(","rel",")",";"],"docstring_tokens":["Whether","this","node","is","a","sort","without","limit","specification"],"prompt_tokens":[]}
{"code_tokens":["public","static","Set<RelOptTable>","findTables","(","RelNode","rel",")","{","return","new","LinkedHashSet<>","(","findAllTables","(","rel",")",")",";"],"docstring_tokens":["Returns","a","set","of","tables","used","by","this","expression","or","its","children"],"prompt_tokens":[]}
{"code_tokens":["public","static","void","go","(","RelVisitor","visitor,\n","RelNode","p",")","{","try","{","visitor",".","go","(","p",")",";","}","catch","(","Exception","e",")","{","throw","new","RuntimeException","(","\"while","visiting","tree\",","e",")",";","}"],"docstring_tokens":["Sets","a","RelVisitor","going","on","a","given","relational","expression,","and","returns","the","result"],"prompt_tokens":[]}
{"code_tokens":["public","static","void","verifyTypeEquivalence","(","RelNode","originalRel,\n","RelNode","newRel,\n","Object","equivalenceClass",")","{","RelDataType","expectedRowType","=","originalRel",".","getRowType","(",")",";","RelDataType","actualRowType","=","newRel",".","getRowType","(",")",";","\n\n","//","Row","types","must","be","the","same,","except","for","field","names",".","if","(","areRowTypesEqual","(","expectedRowType,","actualRowType,","false",")",")","{","return",";","}","\n\n","String","s","=","\"Cannot","add","expression","of","different","type","to","set:\\n\"\n","+","\"set","type","is","\"","+","expectedRowType",".","getFullTypeString","(",")","+","\"\\nexpression","type","is","\"","+","actualRowType",".","getFullTypeString","(",")","+","\"\\nset","is","\"","+","equivalenceClass",".","toString","(",")","+","\"\\nexpression","is","\"","+","RelOptUtil",".","toString","(","newRel",")",";","throw","new","AssertionError","(","s",")",";"],"docstring_tokens":["Verifies","that","a","row","type","being","added","to","an","equivalence","class","matches","the","existing","type,","raising","an","assertion","if","this","is","not","the","case"],"prompt_tokens":[]}
{"code_tokens":["public","static","RelNode","createFilter","(","RelNode","child,\n","Iterable<?","extends","RexNode>","conditions",")","{","return","createFilter","(","child,","conditions,","RelFactories",".","DEFAULT_FILTER_FACTORY",")",";"],"docstring_tokens":["Creates","a","filter,","using","the","default","filter","factory,","or","returns","the","original","relational","expression","if","the","condition","is","trivial"],"prompt_tokens":[]}
{"code_tokens":["public","static","Set<Integer>","getAllFields2","(","ImmutableBitSet","groupSet,\n","List<AggregateCall>","aggCallList",")","{","final","Set<Integer>","allFields","=","new","TreeSet<>","(",")",";","allFields",".","addAll","(","groupSet",".","asList","(",")",")",";","for","(","AggregateCall","aggregateCall",":","aggCallList",")","{","allFields",".","addAll","(","aggregateCall",".","getArgList","(",")",")",";","if","(","aggregateCall",".","filterArg",">=","0",")","{","allFields",".","add","(","aggregateCall",".","filterArg",")",";","}","if","(","aggregateCall",".","distinctKeys","!=","null",")","{","allFields",".","addAll","(","aggregateCall",".","distinctKeys",".","asList","(",")",")",";","}","allFields",".","addAll","(","RelCollations",".","ordinals","(","aggregateCall",".","collation",")",")",";","}","return","allFields",";"],"docstring_tokens":["Gets","all","fields","in","an","aggregate"],"prompt_tokens":[]}
{"code_tokens":["public","static","String","dumpPlan","(","String","header,\n","RelNode","rel,\n","SqlExplainFormat","format,\n","SqlExplainLevel","detailLevel",")","{","StringWriter","sw","=","new","StringWriter","(",")",";","PrintWriter","pw","=","new","PrintWriter","(","sw",")",";","if","(","!header",".","equals","(","\"\"",")",")","{","pw",".","println","(","header",")",";","}","RelWriter","planWriter",";","switch","(","format",")","{","case","XML:\n","planWriter","=","new","RelXmlWriter","(","pw,","detailLevel",")",";","break",";","case","JSON:\n","planWriter","=","new","RelJsonWriter","(",")",";","rel",".","explain","(","planWriter",")",";","return","(","(","RelJsonWriter",")","planWriter",")",".","asString","(",")",";","case","DOT:\n","planWriter","=","new","RelDotWriter","(","pw,","detailLevel,","false",")",";","break",";","default:\n","planWriter","=","new","RelWriterImpl","(","pw,","detailLevel,","false",")",";","}","rel",".","explain","(","planWriter",")",";","pw",".","flush","(",")",";","return","sw",".","toString","(",")",";"],"docstring_tokens":["Dumps","a","plan","as","a","string"],"prompt_tokens":[]}
{"code_tokens":["public","static","String","toString","(","final","RelNode","rel",")","{","return","toString","(","rel,","SqlExplainLevel",".","EXPPLAN_ATTRIBUTES",")",";"],"docstring_tokens":["Converts","a","relational","expression","to","a","string,","showing","just","basic","attributes"],"prompt_tokens":[]}
{"code_tokens":["public","static","@PolyNull","String","toString","(","final","@PolyNull","RelNode","rel,\n","SqlExplainLevel","detailLevel",")","{","if","(","rel","==","null",")","{","return","null",";","}","final","StringWriter","sw","=","new","StringWriter","(",")",";","final","RelWriter","planWriter","=\n","new","RelWriterImpl","(","new","PrintWriter","(","sw",")",",","detailLevel,","false",")",";","rel",".","explain","(","planWriter",")",";","return","sw",".","toString","(",")",";"],"docstring_tokens":["Converts","a","relational","expression","to","a","string;","returns","null","if","and","only","if","rel","is","null"],"prompt_tokens":[]}
{"code_tokens":["public","static","List<RexNode>","disjunctions","(","RexNode","rexPredicate",")","{","final","List<RexNode>","list","=","new","ArrayList<>","(",")",";","decomposeDisjunction","(","rexPredicate,","list",")",";","return","list",";"],"docstring_tokens":["Returns","a","condition","decomposed","by","OR"],"prompt_tokens":[]}
{"code_tokens":["public","static","Map<Integer,","RexNode>","getColumnConstraints","(","ModifiableView","modifiableViewTable,","RelDataType","targetRowType,\n","RelDataTypeFactory","typeFactory",")","{","final","RexBuilder","rexBuilder","=","new","RexBuilder","(","typeFactory",")",";","final","RexNode","constraint","=\n","modifiableViewTable",".","getConstraint","(","rexBuilder,","targetRowType",")",";","final","Map<Integer,","RexNode>","projectMap","=","new","HashMap<>","(",")",";","final","List<RexNode>","filters","=","new","ArrayList<>","(",")",";","RelOptUtil",".","inferViewPredicates","(","projectMap,","filters,","constraint",")",";","assert","filters",".","isEmpty","(",")",";","return","projectMap",";"],"docstring_tokens":["Returns","a","mapping","of","the","column","ordinal","in","the","underlying","table","to","a","column","constraint","of","the","modifiable","view"],"prompt_tokens":[]}
{"code_tokens":["public","static","RelNode","replaceInput","(","RelNode","parent,","int","ordinal,","RelNode","newInput",")","{","final","List<RelNode>","inputs","=","new","ArrayList<>","(","parent",".","getInputs","(",")",")",";","if","(","inputs",".","get","(","ordinal",")","==","newInput",")","{","return","parent",";","}","inputs",".","set","(","ordinal,","newInput",")",";","return","parent",".","copy","(","parent",".","getTraitSet","(",")",",","inputs",")",";"],"docstring_tokens":["Returns","a","shallow","copy","of","a","relational","expression","with","a","particular","input","replaced"],"prompt_tokens":[]}
{"code_tokens":["public","static","RelDataType","permute","(","RelDataTypeFactory","typeFactory,\n","RelDataType","rowType,","Mapping","mapping",")","{","return","typeFactory",".","createStructType","(","Mappings",".","apply3","(","mapping,","rowType",".","getFieldList","(",")",")",")",";"],"docstring_tokens":["Permutes","a","record","type","according","to","a","mapping"],"prompt_tokens":[]}
{"code_tokens":["public","static","RelNode","createProject","(","final","RelNode","child,\n","final","List<Integer>","posList",")","{","return","createProject","(","RelFactories",".","DEFAULT_PROJECT_FACTORY,","child,","posList",")",";"],"docstring_tokens":["Creates","a","relational","expression","that","projects","the","given","fields","of","the","input"],"prompt_tokens":[]}
{"code_tokens":["private","Ord<RelDataType>","getNewFieldForOldInput","(","int","oldOrdinal,","int","innerOrdinal",")","{","//","sum","of","predecessors","post","flatten","sizes","points","to","new","ordinal\n","//","of","flat","field","or","first","field","of","flattened","struct\n","final","int","postFlatteningOrdinal","=","getCurrentRelOrThrow","(",")",".","getInputs","(",")",".","stream","(",")",".","flatMap","(","node","->","node",".","getRowType","(",")",".","getFieldList","(",")",".","stream","(",")",")",".","limit","(","oldOrdinal",")",".","map","(","RelDataTypeField::getType",")",".","mapToInt","(","this::postFlattenSize",")",".","sum","(",")",";","final","int","newOrdinal","=","postFlatteningOrdinal","+","innerOrdinal",";","//","NoSuchElementException","may","be","thrown","because","of","two","reasons:\n","//","1",".","postFlattenSize","(",")","didn't","predict","well\n","//","2",".","innerOrdinal","has","wrong","value\n","RelDataTypeField","newField","=","getNewInputFieldByNewOrdinal","(","newOrdinal",")",";","return","Ord",".","of","(","newOrdinal,","newField",".","getType","(",")",")",";"],"docstring_tokens":["Finds","type","and","new","ordinal","relative","to","new","inputs","by","oldOrdinal","and","innerOrdinal","indexes"],"prompt_tokens":[]}
{"code_tokens":["private","boolean","noFlatteningForInput","(","int","fieldIdx",")","{","final","List<RelNode>","inputs","=","getCurrentRelOrThrow","(",")",".","getInputs","(",")",";","int","fieldCnt","=","0",";","for","(","RelNode","input",":","inputs",")","{","fieldCnt","+=","input",".","getRowType","(",")",".","getFieldCount","(",")",";","if","(","fieldCnt",">","fieldIdx",")","{","return","getNewForOldRel","(","input",")",".","getRowType","(",")",".","getFieldList","(",")",".","size","(",")","==","input",".","getRowType","(",")",".","getFieldList","(",")",".","size","(",")",";","}","}","return","false",";"],"docstring_tokens":["Returns","whether","the","old","field","at","index","fieldIdx","was","not","flattened"],"prompt_tokens":[]}
{"code_tokens":["private","Mappings",".","TargetMapping","getNewForOldInputMapping","(","RelNode","oldRel",")","{","final","RelNode","newRel","=","getNewForOldRel","(","oldRel",")",";","return","Mappings",".","target","(","this::getNewForOldInput,\n","oldRel",".","getRowType","(",")",".","getFieldCount","(",")",",\n","newRel",".","getRowType","(",")",".","getFieldCount","(",")",")",";"],"docstring_tokens":["Returns","a","mapping","between","old","and","new","fields"],"prompt_tokens":[]}
{"code_tokens":["private","void","flattenInputs","(","List<RelDataTypeField>","fieldList,","RexNode","prefix,\n","List<Pair<RexNode,","String>>","flattenedExpList",")","{","for","(","RelDataTypeField","field",":","fieldList",")","{","final","RexNode","ref","=\n","rexBuilder",".","makeFieldAccess","(","prefix,","field",".","getIndex","(",")",")",";","if","(","field",".","getType","(",")",".","isStruct","(",")",")","{","final","List<RelDataTypeField>","structFields","=","field",".","getType","(",")",".","getFieldList","(",")",";","flattenInputs","(","structFields,","ref,","flattenedExpList",")",";","}","else","{","flattenedExpList",".","add","(","Pair",".","of","(","ref,","field",".","getName","(",")",")",")",";","}","}"],"docstring_tokens":["Generates","expressions","that","reference","the","flattened","input","fields","from","a","given","row","type"],"prompt_tokens":[]}
{"code_tokens":["@Override","public","CalciteSchema","add","(","String","name,","Schema","schema",")","{","final","CalciteSchema","calciteSchema","=\n","new","CachingCalciteSchema","(","this,","schema,","name",")",";","subSchemaMap",".","put","(","name,","calciteSchema",")",";","return","calciteSchema",";"],"docstring_tokens":["Adds","a","child","schema","of","this","schema"],"prompt_tokens":[]}
{"code_tokens":["public","final","SqlCall","createCall","(","@Nullable","SqlLiteral","functionQualifier,\n","SqlParserPos","pos,\n","Iterable<?","extends","@Nullable","SqlNode>","operands",")","{","return","createCall","(","functionQualifier,","pos,\n","Iterables",".","toArray","(","operands,","SqlNode",".","class",")",")",";"],"docstring_tokens":["Creates","a","call","to","this","operator","with","a","list","of","operands"],"prompt_tokens":[]}
{"code_tokens":["public","SqlCall","createCall","(","@Nullable","SqlLiteral","functionQualifier,\n","SqlParserPos","pos,\n","@Nullable","SqlNode",".",".",".","operands",")","{","pos","=","pos",".","plusAll","(","operands",")",";","return","new","SqlBasicCall","(","this,","ImmutableNullableList",".","copyOf","(","operands",")",",","pos,\n","functionQualifier",")",";"],"docstring_tokens":["Creates","a","call","to","this","operator","with","an","array","of","operands"],"prompt_tokens":[]}
{"code_tokens":["public","final","SqlCall","createCall","(","SqlNodeList","nodeList",")","{","return","createCall","(","null,\n","nodeList",".","getParserPosition","(",")",",\n","nodeList",".","toArray","(","new","SqlNode[0]",")",")",";"],"docstring_tokens":["Creates","a","call","to","this","operator","with","a","list","of","operands","contained","in","a","SqlNodeList"],"prompt_tokens":[]}
{"code_tokens":["public","final","RelDataType","validateOperands","(","SqlValidator","validator,\n","@Nullable","SqlValidatorScope","scope,\n","SqlCall","call",")","{","//","Let","subclasses","know","what's","up",".","preValidateCall","(","validator,","scope,","call",")",";","\n\n","//","Check","the","number","of","operands\n","checkOperandCount","(","validator,","operandTypeChecker,","call",")",";","\n\n","SqlCallBinding","opBinding","=","new","SqlCallBinding","(","validator,","scope,","call",")",";","\n\n","checkOperandTypes","(","opBinding,\n","true",")",";","\n\n","//","Now","infer","the","result","type",".","RelDataType","ret","=","inferReturnType","(","opBinding",")",";","validator",".","setValidatedNodeType","(","call,","ret",")",";","return","ret",";"],"docstring_tokens":["Validates","the","operands","of","a","call,","inferring","the","return","type","in","the","process"],"prompt_tokens":[]}
{"code_tokens":["boolean","needsSpace","(",")","{","return","true",";"],"docstring_tokens":["Returns","whether","this","operator","should","be","surrounded","by","space","when","unparsed"],"prompt_tokens":[]}
{"code_tokens":["protected","RelDataType","adjustType","(","SqlValidator","validator,\n","final","SqlCall","call,\n","RelDataType","type",")","{","return","type",";"],"docstring_tokens":["Validates","and","determines","coercibility","and","resulting","collation","name","of","binary","operator","if","needed"],"prompt_tokens":[]}
{"code_tokens":["public","final","RelDataType","inferReturnType","(","RelDataTypeFactory","typeFactory,\n","List<RelDataType>","operandTypes",")","{","return","inferReturnType","(","new","ExplicitOperatorBinding","(","typeFactory,\n","this,\n","operandTypes",")",")",";"],"docstring_tokens":["Infers","the","type","of","a","call","to","this","operator","with","a","given","set","of","operand","types"],"prompt_tokens":[]}
{"code_tokens":["public","<R>","@Nullable","R","acceptCall","(","SqlVisitor<R>","visitor,","SqlCall","call",")","{","for","(","SqlNode","operand",":","call",".","getOperandList","(",")",")","{","if","(","operand","==","null",")","{","continue",";","}","operand",".","accept","(","visitor",")",";","}","return","null",";"],"docstring_tokens":["Accepts","a","SqlVisitor,","visiting","each","operand","of","a","call"],"prompt_tokens":[]}
{"code_tokens":["@Deprecated","//","to","be","removed","before","2",".","0\n","public","SqlMonotonicity","getMonotonicity","(","SqlCall","call,\n","SqlValidatorScope","scope",")","{","return","getMonotonicity","(","new","SqlCallBinding","(","scope",".","getValidator","(",")",",","scope,","call",")",")",";"],"docstring_tokens":["Returns","whether","this","operator","is","monotonic"],"prompt_tokens":[]}
{"code_tokens":["public","List<T>","traitList","(",")","{","return","ImmutableList",".","copyOf","(","traits",")",";"],"docstring_tokens":["Returns","an","immutable","list","of","the","traits","in","this","composite","trait"],"prompt_tokens":[]}
{"code_tokens":["public","int","size","(",")","{","return","traits",".","length",";"],"docstring_tokens":["Returns","the","number","of","traits"],"prompt_tokens":[]}
{"code_tokens":["protected","static","void","findReducibleExps","(","RelDataTypeFactory","typeFactory,\n","List<RexNode>","exps,","ImmutableMap<RexNode,","RexNode>","constants,\n","List<RexNode>","constExps,","List<Boolean>","addCasts,","boolean","treatDynamicCallsAsConstant",")","{","ReducibleExprLocator","gardener","=\n","new","ReducibleExprLocator","(","typeFactory,","constants,","constExps,\n","addCasts,","treatDynamicCallsAsConstant",")",";","for","(","RexNode","exp",":","exps",")","{","gardener",".","analyze","(","exp",")",";","}","assert","constExps",".","size","(",")","==","addCasts",".","size","(",")",";"],"docstring_tokens":["Locates","expressions","that","can","be","reduced","to","literals","or","converted","to","expressions","with","redundant","casts","removed"],"prompt_tokens":[]}
{"code_tokens":["public","SqlCall","withExpanded","(","boolean","expanded",")","{","return","!expanded\n","?","this\n",":","new","ExpandedBasicCall","(","operator,","operandList,","pos,\n","functionQuantifier",")",";"],"docstring_tokens":["Sets","whether","this","call","is","expanded"],"prompt_tokens":[]}
{"code_tokens":["public","static","boolean","enabled","(",")","{","return","LOGGER",".","isDebugEnabled","(",")",";"],"docstring_tokens":["Returns","whether","performance","tests","are","enabled"],"prompt_tokens":[]}
{"code_tokens":["public","List<SqlNode>","operands","(",")","{","if","(","hasAssignment","(",")","&&","!","(","call",".","getOperator","(",")","instanceof","SqlUnresolvedFunction",")",")","{","return","permutedOperands","(","call",")",";","}","else","{","final","List<SqlNode>","operandList","=","call",".","getOperandList","(",")",";","final","SqlOperandTypeChecker","checker","=\n","call",".","getOperator","(",")",".","getOperandTypeChecker","(",")",";","if","(","checker","==","null",")","{","return","operandList",";","}","final","SqlOperandCountRange","range","=","checker",".","getOperandCountRange","(",")",";","final","List<SqlNode>","list","=","Lists",".","newArrayList","(","operandList",")",";","while","(","list",".","size","(",")","<","range",".","getMax","(",")","&&","checker",".","isOptional","(","list",".","size","(",")",")","&&","checker",".","isFixedParameters","(",")",")","{","list",".","add","(","DefaultCallHolder",".","DEFAULT_CALL",")",";","}","return","list",";","}"],"docstring_tokens":["Returns","the","operands","to","a","call","permuted","into","the","same","order","as","the","formal","parameters","of","the","function"],"prompt_tokens":[]}
{"code_tokens":["public","SqlNode","operand","(","int","i",")","{","return","operands","(",")",".","get","(","i",")",";"],"docstring_tokens":["Returns","a","particular","operand"],"prompt_tokens":[]}
{"code_tokens":["public","CalciteException","newValidationSignatureError","(",")","{","return","validator",".","newValidationError","(","call,\n","RESOURCE",".","canNotApplyOp2Type","(","getOperator","(",")",".","getName","(",")",",\n","call",".","getCallSignature","(","validator,","scope",")",",\n","getOperator","(",")",".","getAllowedSignatures","(",")",")",")",";"],"docstring_tokens":["Constructs","a","new","validation","signature","error","for","the","call"],"prompt_tokens":[]}
{"code_tokens":["public","CalciteException","newValidationError","(","Resources",".","ExInst<SqlValidatorException>","ex",")","{","return","validator",".","newValidationError","(","call,","ex",")",";"],"docstring_tokens":["Constructs","a","new","validation","error","for","the","call"],"prompt_tokens":[]}
{"code_tokens":["@Benchmark\n","public","void","appendString","(","Blackhole","bh,","AppenderState","appenderState",")","throws","IOException","{","bh",".","consume","(","appenderState",".","getOrCreateAppender","(",")",".","append","(","\"placeholder\"",")",")",";"],"docstring_tokens":["Benchmarks","the","performance","of","instantiating","different","Appendable","objects","and","appending","the","same","string","a","fixed","number","of","times"],"prompt_tokens":[]}
{"code_tokens":["public","static","Span","of","(",")","{","return","new","Span","(",")",";"],"docstring_tokens":["Creates","an","empty","Span"],"prompt_tokens":[]}
{"code_tokens":["public","static","Span","of","(","SqlParserPos","p",")","{","return","new","Span","(",")",".","add","(","p",")",";"],"docstring_tokens":["Creates","a","Span","with","one","position"],"prompt_tokens":[]}
{"code_tokens":["public","static","Span","of","(","SqlNode","n",")","{","return","new","Span","(",")",".","add","(","n",")",";"],"docstring_tokens":["Creates","a","Span","of","one","node"],"prompt_tokens":[]}
{"code_tokens":["public","static","Span","of","(","SqlNode","n0,","SqlNode","n1",")","{","return","new","Span","(",")",".","add","(","n0",")",".","add","(","n1",")",";"],"docstring_tokens":["Creates","a","Span","between","two","nodes"],"prompt_tokens":[]}
{"code_tokens":["public","static","Span","of","(","Collection<?","extends","SqlNode>","nodes",")","{","return","new","Span","(",")",".","addAll","(","nodes",")",";"],"docstring_tokens":["Creates","a","Span","of","a","list","of","nodes"],"prompt_tokens":[]}
{"code_tokens":["public","static","Span","of","(","SqlNodeList","nodeList",")","{","//","SqlNodeList","has","its","own","position,","so","just","that","position,","not","all","of","the\n","//","constituent","nodes",".","return","new","Span","(",")",".","add","(","nodeList",")",";"],"docstring_tokens":["Creates","a","Span","of","a","node","list"],"prompt_tokens":[]}
{"code_tokens":["public","Span","add","(","SqlParserPos","pos",")","{","posList",".","add","(","pos",")",";","return","this",";"],"docstring_tokens":["Adds","a","position","to","the","list,","and","returns","this","Span"],"prompt_tokens":[]}
{"code_tokens":["public","Span","addAll","(","Iterable<?","extends","SqlNode>","nodes",")","{","for","(","SqlNode","node",":","nodes",")","{","add","(","node",")",";","}","return","this",";"],"docstring_tokens":["Adds","the","positions","of","a","collection","of","nodes","to","the","list,","and","returns","this","Span"],"prompt_tokens":[]}
{"code_tokens":["public","Span","add","(","SqlAbstractParserImpl","parser",")","{","try","{","final","SqlParserPos","pos","=","parser",".","getPos","(",")",";","return","add","(","pos",")",";","}","catch","(","Exception","e",")","{","//","getPos","does","not","really","throw","an","exception\n","throw","new","AssertionError","(","e",")",";","}"],"docstring_tokens":["Adds","the","position","of","the","last","token","emitted","by","a","parser","to","the","list,","and","returns","this","Span"],"prompt_tokens":[]}
{"code_tokens":["public","Span","clear","(",")","{","posList",".","clear","(",")",";","return","this",";"],"docstring_tokens":["Clears","the","contents","of","this","Span,","and","returns","this","Span"],"prompt_tokens":[]}
{"code_tokens":["public","StringBuilder","printTo","(","StringBuilder","sb,\n","BiConsumer<StringBuilder,","C>","valuePrinter",")","{","sb",".","append","(","\"Sarg[\"",")",";","final","RangeSets",".","Consumer<C>","printer","=","RangeSets",".","printer","(","sb,","valuePrinter",")",";","Ord",".","forEach","(","rangeSet",".","asRanges","(",")",",","(","r,","i",")","->","{","if","(","i",">","0",")","{","sb",".","append","(","\",","\"",")",";","}","RangeSets",".","forEach","(","r,","printer",")",";","}",")",";","switch","(","nullAs",")","{","case","FALSE:\n","return","sb",".","append","(","\"",";","NULL","AS","FALSE]\"",")",";","case","TRUE:\n","return","sb",".","append","(","\"",";","NULL","AS","TRUE]\"",")",";","case","UNKNOWN:\n","return","sb",".","append","(","\"]\"",")",";","default:\n","throw","new","AssertionError","(",")",";","}"],"docstring_tokens":["Prints","this","Sarg","to","a","StringBuilder,","using","the","given","printer","to","deal","with","each","embedded","value"],"prompt_tokens":[]}
{"code_tokens":["public","Sarg","negate","(",")","{","return","Sarg",".","of","(","nullAs",".","negate","(",")",",","rangeSet",".","complement","(",")",")",";"],"docstring_tokens":["Returns","a","Sarg","that","matches","a","value","if","and","only","this","Sarg","does","not"],"prompt_tokens":[]}
{"code_tokens":["private","static","@Nullable","RelNode","changeConvention","(","RelNode","rel,\n","Convention","source,\n","Convention","target,\n","final","Multimap<Pair<Convention,","Convention>,","ConverterRule>\n","mapArcToConverterRule",")","{","assert","source","==","rel",".","getConvention","(",")",";","\n\n","//","Try","to","apply","each","converter","rule","for","this","arc's","source/target","calling\n","//","conventions",".","final","Pair<Convention,","Convention>","key","=","Pair",".","of","(","source,","target",")",";","for","(","ConverterRule","rule",":","mapArcToConverterRule",".","get","(","key",")",")","{","assert","rule",".","getInTrait","(",")","==","source",";","assert","rule",".","getOutTrait","(",")","==","target",";","RelNode","converted","=","rule",".","convert","(","rel",")",";","if","(","converted","!=","null",")","{","return","converted",";","}","}","return","null",";"],"docstring_tokens":["Tries","to","convert","a","relational","expression","to","the","target","convention","of","an","arc"],"prompt_tokens":[]}
{"code_tokens":["private","Lattice","findMatch","(","final","Lattice","lattice,","MutableNode","mutableNode",")","{","final","Lattice","lattice1","=","latticeMap",".","get","(","lattice",".","toString","(",")",")",";","if","(","lattice1","!=","null",")","{","//","Exact","match","for","an","existing","lattice\n","return","lattice1",";","}","\n\n","if","(","evolve",")","{","//","No","exact","match",".","Scan","existing","lattices","for","a","sub-set",".","int","bestMatchQuality","=","0",";","Lattice","bestMatch","=","null",";","for","(","Lattice","lattice2",":","latticeMap",".","values","(",")",")","{","int","q","=","matchQuality","(","lattice2,","lattice",")",";","if","(","q",">","bestMatchQuality",")","{","bestMatch","=","lattice2",";","bestMatchQuality","=","q",";","}","else","if","(","q","==","bestMatchQuality\n","&&","bestMatch","!=","null\n","&&","!lattice2",".","rootNode",".","paths",".","equals","(","bestMatch",".","rootNode",".","paths",")","&&","lattice2",".","rootNode",".","paths",".","containsAll","(","bestMatch",".","rootNode",".","paths",")",")","{","bestMatch","=","lattice2",";","}","}","\n\n","if","(","bestMatch","!=","null",")","{","//","Fix","up","the","best","batch\n","for","(","Path","path\n",":","minus","(","bestMatch",".","rootNode",".","paths,","lattice",".","rootNode",".","paths",")",")","{","//","TODO:","assign","alias","based","on","node","in","bestMatch\n","mutableNode",".","addPath","(","path,","null",")",";","}","final","CalciteSchema","rootSchema","=","CalciteSchema",".","createRootSchema","(","false",")",";","final","Lattice",".","Builder","builder","=\n","new","Lattice",".","Builder","(","space,","rootSchema,","mutableNode",")",";","copyMeasures","(","builder,","bestMatch",")",";","copyMeasures","(","builder,","lattice",")",";","final","Lattice","lattice2","=","builder",".","build","(",")",";","latticeMap",".","remove","(","bestMatch",".","toString","(",")",")",";","obsoleteLatticeMap",".","put","(","bestMatch,","lattice2",")",";","latticeMap",".","put","(","lattice2",".","toString","(",")",",","lattice2",")",";","return","lattice2",";","}","}","\n\n","//","No","suitable","existing","lattice",".","Register","this","one",".","latticeMap",".","put","(","lattice",".","toString","(",")",",","lattice",")",";","return","lattice",";"],"docstring_tokens":["Returns","the","best","match","for","a","lattice"],"prompt_tokens":[]}
{"code_tokens":["public","static","@Nullable","String","toDruidExpression","(","final","RexNode","rexNode,\n","final","RelDataType","inputRowType,\n","final","DruidQuery","druidRel",")","{","SqlKind","kind","=","rexNode",".","getKind","(",")",";","SqlTypeName","sqlTypeName","=","rexNode",".","getType","(",")",".","getSqlTypeName","(",")",";","\n\n","if","(","kind","==","SqlKind",".","INPUT_REF",")","{","final","RexInputRef","ref","=","(","RexInputRef",")","rexNode",";","final","String","columnName","=","inputRowType",".","getFieldNames","(",")",".","get","(","ref",".","getIndex","(",")",")",";","if","(","columnName","==","null",")","{","return","null",";","}","if","(","druidRel",".","getDruidTable","(",")",".","timestampFieldName",".","equals","(","columnName",")",")","{","return","DruidExpressions",".","fromColumn","(","DruidTable",".","DEFAULT_TIMESTAMP_COLUMN",")",";","}","return","DruidExpressions",".","fromColumn","(","columnName",")",";","}","\n\n","if","(","rexNode","instanceof","RexCall",")","{","final","SqlOperator","operator","=","(","(","RexCall",")","rexNode",")",".","getOperator","(",")",";","final","DruidSqlOperatorConverter","conversion","=","druidRel",".","getOperatorConversionMap","(",")",".","get","(","operator",")",";","if","(","conversion","==","null",")","{","//unknown","operator","can","not","translate\n","return","null",";","}","else","{","return","conversion",".","toDruidExpression","(","rexNode,","inputRowType,","druidRel",")",";","}","}","if","(","kind","==","SqlKind",".","LITERAL",")","{","//","Translate","literal",".","if","(","RexLiteral",".","isNullLiteral","(","rexNode",")",")","{","//case","the","filter/project","might","yield","to","unknown","let","Calcite","deal","with","this","for","now\n","return","null",";","}","else","if","(","SqlTypeName",".","NUMERIC_TYPES",".","contains","(","sqlTypeName",")",")","{","return","DruidExpressions",".","numberLiteral","(","(","Number",")","RexLiteral\n",".","value","(","rexNode",")",")",";","}","else","if","(","SqlTypeFamily",".","INTERVAL_DAY_TIME","==","sqlTypeName",".","getFamily","(",")",")","{","//","Calcite","represents","DAY-TIME","intervals","in","milliseconds",".","final","long","milliseconds","=","(","(","Number",")","RexLiteral",".","value","(","rexNode",")",")",".","longValue","(",")",";","return","DruidExpressions",".","numberLiteral","(","milliseconds",")",";","}","else","if","(","SqlTypeFamily",".","INTERVAL_YEAR_MONTH","==","sqlTypeName",".","getFamily","(",")",")","{","//","Calcite","represents","YEAR-MONTH","intervals","in","months",".","final","long","months","=","(","(","Number",")","RexLiteral",".","value","(","rexNode",")",")",".","longValue","(",")",";","return","DruidExpressions",".","numberLiteral","(","months",")",";","}","else","if","(","SqlTypeName",".","STRING_TYPES",".","contains","(","sqlTypeName",")",")","{","return\n","DruidExpressions",".","stringLiteral","(","RexLiteral",".","stringValue","(","rexNode",")",")",";","}","else","if","(","SqlTypeName",".","DATE","==","sqlTypeName\n","||","SqlTypeName",".","TIMESTAMP","==","sqlTypeName\n","||","SqlTypeName",".","TIME_WITH_LOCAL_TIME_ZONE","==","sqlTypeName",")","{","return","DruidExpressions",".","numberLiteral","(","DruidDateTimeUtils",".","literalValue","(","rexNode",")",")",";","}","else","if","(","SqlTypeName",".","BOOLEAN","==","sqlTypeName",")","{","return","DruidExpressions",".","numberLiteral","(","RexLiteral",".","booleanValue","(","rexNode",")","?","1",":","0",")",";","}","}","//","Not","Literal/InputRef/RexCall","or","unknown","type?\n","return","null",";"],"docstring_tokens":["Translates","a","Calcite","RexNode","to","a","Druid","expression,","if","possible;","returns","null","if","not","possible"],"prompt_tokens":[]}
{"code_tokens":["public","static","RelOptTable",".","ToRelContext","toRelContext","(","RelOptTable",".","ViewExpander","viewExpander,\n","RelOptCluster","cluster,\n","List<RelHint>","hints",")","{","return","new","RelOptTable",".","ToRelContext","(",")","{","@Override","public","RelOptCluster","getCluster","(",")","{","return","cluster",";","}","\n\n","@Override","public","List<RelHint>","getTableHints","(",")","{","return","hints",";","}","\n\n","@Override","public","RelRoot","expandView","(","RelDataType","rowType,","String","queryString,\n","List<String>","schemaPath,","@Nullable","List<String>","viewPath",")","{","return","viewExpander",".","expandView","(","rowType,","queryString,","schemaPath,\n","viewPath",")",";","}","}",";"],"docstring_tokens":["Converts","a","ViewExpander","to","a","ToRelContext"],"prompt_tokens":[]}
{"code_tokens":["public","static","RelOptTable",".","ToRelContext","simpleContext","(","RelOptCluster","cluster",")","{","return","simpleContext","(","cluster,","ImmutableList",".","of","(",")",")",";"],"docstring_tokens":["Creates","a","simple","ToRelContext","that","cannot","expand","views"],"prompt_tokens":[]}
{"code_tokens":["Set<RelNode>","getParents","(",")","{","final","Set<RelNode>","list","=","new","LinkedHashSet<>","(",")",";","for","(","RelNode","parent",":","set",".","getParentRels","(",")",")","{","for","(","RelSubset","rel",":","inputSubsets","(","parent",")",")","{","//","see","usage","of","this","method","in","propagateCostImprovements0","(",")","if","(","rel","==","this",")","{","list",".","add","(","parent",")",";","}","}","}","return","list",";"],"docstring_tokens":["Returns","the","collection","of","RelNodes","one","of","whose","inputs","is","in","this","subset"],"prompt_tokens":[]}
{"code_tokens":["Set<RelSubset>","getParentSubsets","(","VolcanoPlanner","planner",")","{","final","Set<RelSubset>","list","=","new","LinkedHashSet<>","(",")",";","for","(","RelNode","parent",":","set",".","getParentRels","(",")",")","{","for","(","RelSubset","rel",":","inputSubsets","(","parent",")",")","{","if","(","rel",".","set","==","set","&&","rel",".","getTraitSet","(",")",".","equals","(","traitSet",")",")","{","list",".","add","(","planner",".","getSubsetNonNull","(","parent",")",")",";","}","}","}","return","list",";"],"docstring_tokens":["Returns","the","collection","of","distinct","subsets","that","contain","a","RelNode","one","of","whose","inputs","is","in","this","subset"],"prompt_tokens":[]}
{"code_tokens":["void","add","(","RelNode","rel",")","{","if","(","set",".","rels",".","contains","(","rel",")",")","{","return",";","}","\n\n","VolcanoPlanner","planner","=","(","VolcanoPlanner",")","rel",".","getCluster","(",")",".","getPlanner","(",")",";","if","(","planner",".","getListener","(",")","!=","null",")","{","RelOptListener",".","RelEquivalenceEvent","event","=\n","new","RelOptListener",".","RelEquivalenceEvent","(","planner,\n","rel,\n","this,\n","true",")",";","planner",".","getListener","(",")",".","relEquivalenceFound","(","event",")",";","}","\n\n","//","If","this","isn't","the","first","rel","in","the","set,","it","must","have","compatible\n","//","row","type",".","if","(","set",".","rel","!=","null",")","{","RelOptUtil",".","equal","(","\"rowtype","of","new","rel\",","rel",".","getRowType","(",")",",\n","\"rowtype","of","set\",","getRowType","(",")",",","Litmus",".","THROW",")",";","}","set",".","addInternal","(","rel",")",";","if","(","false",")","{","Set<CorrelationId>","variablesSet","=","RelOptUtil",".","getVariablesSet","(","rel",")",";","Set<CorrelationId>","variablesStopped","=","rel",".","getVariablesSet","(",")",";","Set<CorrelationId>","variablesPropagated","=\n","Util",".","minus","(","variablesSet,","variablesStopped",")",";","assert","set",".","variablesPropagated",".","containsAll","(","variablesPropagated",")",";","Set<CorrelationId>","variablesUsed","=","RelOptUtil",".","getVariablesUsed","(","rel",")",";","assert","set",".","variablesUsed",".","containsAll","(","variablesUsed",")",";","}"],"docstring_tokens":["Adds","expression","rel","to","this","subset"],"prompt_tokens":[]}
{"code_tokens":["public","Iterable<RelNode>","getRels","(",")","{","return","(",")","->","Linq4j",".","asEnumerable","(","set",".","rels",")",".","where","(","v1","->","v1",".","getTraitSet","(",")",".","satisfies","(","traitSet",")",")",".","iterator","(",")",";"],"docstring_tokens":["Returns","the","rel","nodes","in","this","rel","subset"],"prompt_tokens":[]}
{"code_tokens":["public","boolean","contains","(","RelNode","node",")","{","return","set",".","rels",".","contains","(","node",")","&&","node",".","getTraitSet","(",")",".","satisfies","(","traitSet",")",";"],"docstring_tokens":["Returns","whether","this","subset","contains","the","specified","relational","expression"],"prompt_tokens":[]}
{"code_tokens":["@API","(","since","=","\"1",".","24\",","status","=","API",".","Status",".","INTERNAL",")","public","@Nullable","RelOptCost","getWinnerCost","(",")","{","if","(","taskState","==","OptimizeState",".","COMPLETED","&&","bestCost",".","isLe","(","upperBound",")",")","{","return","bestCost",";","}","//","if","bestCost","!=","upperBound,","it","means","optimize","failed\n","return","null",";"],"docstring_tokens":["Returns","the","best","cost","if","this","subset","is","fully","optimized","or","null","if","the","subset","is","not","fully","optimized"],"prompt_tokens":[]}
{"code_tokens":["public","static","NameSet","immutableCopyOf","(","Set<String>","names",")","{","return","new","NameSet","(","NameMap",".","immutableCopyOf","(","Maps",".","asMap","(","names,","k","->","DUMMY",")",")",")",";"],"docstring_tokens":["Creates","a","NameSet","that","is","an","immutable","copy","of","a","given","collection"],"prompt_tokens":[]}
{"code_tokens":["public","boolean","contains","(","String","name,","boolean","caseSensitive",")","{","return","names",".","containsKey","(","name,","caseSensitive",")",";"],"docstring_tokens":["Returns","whether","this","set","contains","the","given","name,","with","a","given","case-sensitivity"],"prompt_tokens":[]}
{"code_tokens":["public","CalciteSchema",".","@Nullable","TableEntry","checkValid","(","MaterializationKey","key",")","{","final","MaterializationActor",".","Materialization","materialization","=\n","actor",".","keyMap",".","get","(","key",")",";","if","(","materialization","!=","null",")","{","return","materialization",".","materializedTable",";","}","return","null",";"],"docstring_tokens":["Checks","whether","a","materialization","is","valid,","and","if","so,","returns","the","table","where","the","data","are","stored"],"prompt_tokens":[]}
{"code_tokens":["public","static","void","setLeftRightBitmaps","(","ImmutableBitSet","groupKey,\n","ImmutableBitSet",".","Builder","leftMask,\n","ImmutableBitSet",".","Builder","rightMask,\n","int","nFieldsOnLeft",")","{","for","(","int","bit",":","groupKey",")","{","if","(","bit","<","nFieldsOnLeft",")","{","leftMask",".","set","(","bit",")",";","}","else","{","rightMask",".","set","(","bit","-","nFieldsOnLeft",")",";","}","}"],"docstring_tokens":["Separates","a","bit-mask","representing","a","join","into","masks","representing","the","left","and","right","inputs","into","the","join"],"prompt_tokens":[]}
{"code_tokens":["public","static","@Nullable","Double","getJoinPopulationSize","(","RelMetadataQuery","mq,\n","RelNode","join_,","ImmutableBitSet","groupKey",")","{","Join","join","=","(","Join",")","join_",";","if","(","!join",".","getJoinType","(",")",".","projectsRight","(",")",")","{","return","mq",".","getPopulationSize","(","join",".","getLeft","(",")",",","groupKey",")",";","}","ImmutableBitSet",".","Builder","leftMask","=","ImmutableBitSet",".","builder","(",")",";","ImmutableBitSet",".","Builder","rightMask","=","ImmutableBitSet",".","builder","(",")",";","RelNode","left","=","join",".","getLeft","(",")",";","RelNode","right","=","join",".","getRight","(",")",";","\n\n","//","separate","the","mask","into","masks","for","the","left","and","right\n","RelMdUtil",".","setLeftRightBitmaps","(","groupKey,","leftMask,","rightMask,","left",".","getRowType","(",")",".","getFieldCount","(",")",")",";","\n\n","Double","population","=\n","multiply","(","mq",".","getPopulationSize","(","left,","leftMask",".","build","(",")",")",",\n","mq",".","getPopulationSize","(","right,","rightMask",".","build","(",")",")",")",";","\n\n","return","numDistinctVals","(","population,","mq",".","getRowCount","(","join",")",")",";"],"docstring_tokens":["Computes","the","population","size","for","a","set","of","keys","returned","from","a","join"],"prompt_tokens":[]}
{"code_tokens":["public","static","double","getMinusRowCount","(","RelMetadataQuery","mq,","Minus","minus",")","{","//","REVIEW","jvs","30-May-2005:","I","just","pulled","this","out","of","a","hat",".","final","List<RelNode>","inputs","=","minus",".","getInputs","(",")",";","double","dRows","=","mq",".","getRowCount","(","inputs",".","get","(","0",")",")",";","for","(","int","i","=","1",";","i","<","inputs",".","size","(",")",";","i++",")","{","dRows","-=","0",".","5","*","mq",".","getRowCount","(","inputs",".","get","(","i",")",")",";","}","if","(","dRows","<","0",")","{","dRows","=","0",";","}","return","dRows",";"],"docstring_tokens":["Returns","an","estimate","of","the","number","of","rows","returned","by","a","Minus"],"prompt_tokens":[]}
{"code_tokens":["public","static","@Nullable","Double","getJoinRowCount","(","RelMetadataQuery","mq,","Join","join,\n","RexNode","condition",")","{","if","(","!join",".","getJoinType","(",")",".","projectsRight","(",")",")","{","//","Create","a","RexNode","representing","the","selectivity","of","the\n","//","semijoin","filter","and","pass","it","to","getSelectivity\n","RexNode","semiJoinSelectivity","=\n","RelMdUtil",".","makeSemiJoinSelectivityRexNode","(","mq,","join",")",";","Double","selectivity","=","mq",".","getSelectivity","(","join",".","getLeft","(",")",",","semiJoinSelectivity",")",";","if","(","selectivity","==","null",")","{","return","null",";","}","return","(","join",".","getJoinType","(",")","==","JoinRelType",".","SEMI\n","?","selectivity\n",":","1D","-","selectivity",")","//","ANTI","join\n","*","mq",".","getRowCount","(","join",".","getLeft","(",")",")",";","}","//","Row","count","estimates","of","0","will","be","rounded","up","to","1",".","//","So,","use","maxRowCount","where","the","product","is","very","small",".","final","Double","left","=","mq",".","getRowCount","(","join",".","getLeft","(",")",")",";","final","Double","right","=","mq",".","getRowCount","(","join",".","getRight","(",")",")",";","if","(","left","==","null","||","right","==","null",")","{","return","null",";","}","if","(","left","<=","1D","||","right","<=","1D",")","{","Double","max","=","mq",".","getMaxRowCount","(","join",")",";","if","(","max","!=","null","&&","max","<=","1D",")","{","return","max",";","}","}","\n\n","Double","selectivity","=","mq",".","getSelectivity","(","join,","condition",")",";","if","(","selectivity","==","null",")","{","return","null",";","}","double","innerRowCount","=","left","*","right","*","selectivity",";","switch","(","join",".","getJoinType","(",")",")","{","case","INNER:\n","return","innerRowCount",";","case","LEFT:\n","return","left","*","(","1D","-","selectivity",")","+","innerRowCount",";","case","RIGHT:\n","return","right","*","(","1D","-","selectivity",")","+","innerRowCount",";","case","FULL:\n","return","(","left","+","right",")","*","(","1D","-","selectivity",")","+","innerRowCount",";","default:\n","throw","Util",".","unexpected","(","join",".","getJoinType","(",")",")",";","}"],"docstring_tokens":["Returns","an","estimate","of","the","number","of","rows","returned","by","a","Join"],"prompt_tokens":[]}
{"code_tokens":["public","void","identity","(",")","{","for","(","int","i","=","0",";","i","<","targets",".","length",";","i++",")","{","targets[i]","=","sources[i]","=","i",";","}"],"docstring_tokens":["Initializes","this","permutation","to","the","identity","permutation"],"prompt_tokens":[]}
{"code_tokens":["@Override","public","final","int","size","(",")","{","return","targets",".","length",";"],"docstring_tokens":["Returns","the","number","of","elements","in","this","permutation"],"prompt_tokens":[]}
{"code_tokens":["@Override","public","Permutation","inverse","(",")","{","return","new","Permutation","(","sources",".","clone","(",")",",\n","targets",".","clone","(",")",")",";"],"docstring_tokens":["Returns","the","inverse","permutation"],"prompt_tokens":[]}
{"code_tokens":["@Override","public","boolean","isIdentity","(",")","{","for","(","int","i","=","0",";","i","<","targets",".","length",";","i++",")","{","if","(","targets[i]","!=","i",")","{","return","false",";","}","}","return","true",";"],"docstring_tokens":["Returns","whether","this","is","the","identity","permutation"],"prompt_tokens":[]}
{"code_tokens":["@RequiresNonNull","(","{","\"sources\",","\"targets\"","}",")","private","boolean","isValid","(","@UnknownInitialization","Permutation","this,","boolean","fail",")","{","final","int","size","=","targets",".","length",";","if","(","sources",".","length","!=","size",")","{","assert","!fail",":","\"different","lengths\"",";","return","false",";","}","\n\n","//","Every","element","in","sources","has","corresponding","element","in","targets",".","int[]","occurCount","=","new","int[size]",";","for","(","int","i","=","0",";","i","<","size",";","i++",")","{","int","target","=","targets[i]",";","if","(","sources[target]","!=","i",")","{","assert","!fail\n",":","\"source[\"","+","target","+","\"]","=","\"","+","sources[target]\n","+","\",","should","be","\"","+","i",";","return","false",";","}","int","source","=","sources[i]",";","if","(","targets[source]","!=","i",")","{","assert","!fail\n",":","\"target[\"","+","source","+","\"]","=","\"","+","targets[source]\n","+","\",","should","be","\"","+","i",";","return","false",";","}","\n\n","//","Every","member","should","occur","once",".","if","(","occurCount[target]","!=","0",")","{","assert","!fail",":","\"target","\"","+","target","+","\"","occurs","more","than","once\"",";","return","false",";","}","occurCount[target]++",";","}","return","true",";"],"docstring_tokens":["Checks","whether","this","permutation","is","valid"],"prompt_tokens":[]}
{"code_tokens":["public","synchronized","void","set","(","String","resourceName,","String","value",")","{","assert","resourceName","!=","null",";","final","String","testCaseName","=","getCurrentTestCaseName","(","true",")",";","update","(","testCaseName,","resourceName,","value",")",";"],"docstring_tokens":["Sets","the","value","of","a","given","resource","of","the","current","test","case"],"prompt_tokens":[]}
{"code_tokens":["private","synchronized","String","get","(","final","String","testCaseName,\n","String","resourceName",")","{","Element","testCaseElement","=","getTestCaseElement","(","testCaseName,","true,","null",")",";","if","(","testCaseElement","==","null",")","{","if","(","baseRepository","!=","null",")","{","return","baseRepository",".","get","(","testCaseName,","resourceName",")",";","}","else","{","return","null",";","}","}","final","Element","resourceElement","=\n","getResourceElement","(","testCaseElement,","resourceName",")",";","if","(","resourceElement","!=","null",")","{","return","getText","(","resourceElement",")",";","}","return","null",";"],"docstring_tokens":["Returns","a","given","resource","from","a","given","test","case"],"prompt_tokens":[]}
{"code_tokens":["public","static","DiffRepository","lookup","(","Class<?>","clazz",")","{","return","lookup","(","clazz,","null,","null,","2",")",";"],"docstring_tokens":["Finds","the","repository","instance","for","a","given","class,","with","no","base","repository","or","filter"],"prompt_tokens":[]}
{"code_tokens":["static","RelDataType","convertSchemaField","(","LogicalSchema",".","LogicalFieldSchema","pigField",")","{","return","convertSchemaField","(","pigField,","true",")",";"],"docstring_tokens":["Converts","a","Pig","schema","field","to","relational","type"],"prompt_tokens":[]}
{"code_tokens":["static","RelDataType","convertSchema","(","LogicalSchema","pigSchema",")","{","return","convertSchema","(","pigSchema,","true",")",";"],"docstring_tokens":["Converts","a","Pig","tuple","schema","to","a","SQL","row","type"],"prompt_tokens":[]}
{"code_tokens":["public","static","Template","of","(","String","pattern",")","{","return","of","(","pattern,","Locale",".","getDefault","(",")",")",";"],"docstring_tokens":["Creates","a","Template","for","the","default","locale","and","the","specified","pattern"],"prompt_tokens":[]}
{"code_tokens":["public","static","Template","of","(","String","pattern,","Locale","locale",")","{","final","List<String>","parameterNames","=","new","ArrayList<>","(",")",";","final","String","processedPattern","=","process","(","pattern,","parameterNames",")",";","return","new","Template","(","processedPattern,","parameterNames,","locale",")",";"],"docstring_tokens":["Creates","a","Template","for","the","specified","locale","and","pattern"],"prompt_tokens":[]}
{"code_tokens":["public","Enumerable<V>","valuesEnumerable","(",")","{","return","new","AbstractEnumerable<V>","(",")","{","@Override","public","Enumerator<V>","enumerator","(",")","{","final","Enumerator<Enumerable<V>>","listEnumerator","=\n","Linq4j",".","iterableEnumerator","(","values","(",")",")",";","return","new","Enumerator<V>","(",")","{","Enumerator<V>","enumerator","=","Linq4j",".","emptyEnumerator","(",")",";","\n\n","@Override","public","V","current","(",")","{","return","enumerator",".","current","(",")",";","}","\n\n","@Override","public","boolean","moveNext","(",")","{","for","(",";",";",")","{","if","(","enumerator",".","moveNext","(",")",")","{","return","true",";","}","enumerator",".","close","(",")",";","if","(","!listEnumerator",".","moveNext","(",")",")","{","enumerator","=","Linq4j",".","emptyEnumerator","(",")",";","return","false",";","}","enumerator","=","listEnumerator",".","current","(",")",".","enumerator","(",")",";","}","}","\n\n","@Override","public","void","reset","(",")","{","listEnumerator",".","reset","(",")",";","enumerator","=","Linq4j",".","emptyEnumerator","(",")",";","}","\n\n","@Override","public","void","close","(",")","{","enumerator",".","close","(",")",";","}","}",";","}","}",";"],"docstring_tokens":["Returns","an","enumerable","over","the","values","in","this","lookup,","in","map","order"],"prompt_tokens":[]}
{"code_tokens":["public","List<Pair<AggregateCall,","String>>","getNamedAggCalls","(",")","{","final","int","offset","=","getGroupCount","(",")",";","return","Pair",".","zip","(","aggCalls,","Util",".","skip","(","getRowType","(",")",".","getFieldNames","(",")",",","offset",")",")",";"],"docstring_tokens":["Returns","a","list","of","calls","to","aggregate","functions","together","with","their","output","field","names"],"prompt_tokens":[]}
{"code_tokens":["public","static","RelDataType","deriveRowType","(","RelDataTypeFactory","typeFactory,\n","final","RelDataType","inputRowType,","boolean","indicator,\n","ImmutableBitSet","groupSet,","@Nullable","List<ImmutableBitSet>","groupSets,\n","final","List<AggregateCall>","aggCalls",")","{","final","List<Integer>","groupList","=","groupSet",".","asList","(",")",";","assert","groupList",".","size","(",")","==","groupSet",".","cardinality","(",")",";","final","RelDataTypeFactory",".","Builder","builder","=","typeFactory",".","builder","(",")",";","final","List<RelDataTypeField>","fieldList","=","inputRowType",".","getFieldList","(",")",";","final","Set<String>","containedNames","=","new","HashSet<>","(",")",";","for","(","int","groupKey",":","groupList",")","{","final","RelDataTypeField","field","=","fieldList",".","get","(","groupKey",")",";","containedNames",".","add","(","field",".","getName","(",")",")",";","builder",".","add","(","field",")",";","if","(","groupSets","!=","null","&&","!ImmutableBitSet",".","allContain","(","groupSets,","groupKey",")",")","{","builder",".","nullable","(","true",")",";","}","}","checkIndicator","(","indicator",")",";","for","(","Ord<AggregateCall>","aggCall",":","Ord",".","zip","(","aggCalls",")",")","{","final","String","base",";","if","(","aggCall",".","e",".","name","!=","null",")","{","base","=","aggCall",".","e",".","name",";","}","else","{","base","=","\"$f\"","+","(","groupList",".","size","(",")","+","aggCall",".","i",")",";","}","String","name","=","base",";","int","i","=","0",";","while","(","containedNames",".","contains","(","name",")",")","{","name","=","base","+","\"_\"","+","i++",";","}","containedNames",".","add","(","name",")",";","builder",".","add","(","name,","aggCall",".","e",".","type",")",";","}","return","builder",".","build","(",")",";"],"docstring_tokens":["Computes","the","row","type","of","an","Aggregate","before","it","exists"],"prompt_tokens":[]}
{"code_tokens":["private","boolean","typeMatchesInferred","(","final","AggregateCall","aggCall,\n","final","Litmus","litmus",")","{","SqlAggFunction","aggFunction","=","aggCall",".","getAggregation","(",")",";","AggCallBinding","callBinding","=","aggCall",".","createBinding","(","this",")",";","RelDataType","type","=","aggFunction",".","inferReturnType","(","callBinding",")",";","RelDataType","expectedType","=","aggCall",".","type",";","return","RelOptUtil",".","eq","(","\"aggCall","type\",\n","expectedType,\n","\"inferred","type\",\n","type,\n","litmus",")",";"],"docstring_tokens":["Returns","whether","the","inferred","type","of","an","AggregateCall","matches","the","type","it","was","given","when","it","was","created"],"prompt_tokens":[]}
{"code_tokens":["public","boolean","containsDistinctCall","(",")","{","for","(","AggregateCall","call",":","aggCalls",")","{","if","(","call",".","isDistinct","(",")",")","{","return","true",";","}","}","return","false",";"],"docstring_tokens":["Returns","whether","any","of","the","aggregates","are","DISTINCT"],"prompt_tokens":[]}
{"code_tokens":["AutomatonBuilder","symbol","(","State","fromState,","State","toState,\n","String","name",")","{","Objects",".","requireNonNull","(","name,","\"name\"",")",";","final","int","symbolId","=\n","symbolIds",".","computeIfAbsent","(","name,","k","->","symbolIds",".","size","(",")",")",";","transitionList",".","add","(","new","SymbolTransition","(","fromState,","toState,","symbolId",")",")",";","return","this",";"],"docstring_tokens":["Adds","a","symbol","transition"],"prompt_tokens":[]}
{"code_tokens":["AutomatonBuilder","seq","(","State","fromState,","State","toState,\n","List<Pattern>","patterns",")","{","State","prevState","=","fromState",";","for","(","int","i","=","0",";","i","<","patterns",".","size","(",")",";","i++",")","{","Pattern","pattern","=","patterns",".","get","(","i",")",";","final","State","nextState",";","if","(","i","==","patterns",".","size","(",")","-","1",")","{","nextState","=","toState",";","}","else","{","nextState","=","createState","(",")",";","}","add","(","pattern,","prevState,","nextState",")",";","prevState","=","nextState",";","}","return","this",";"],"docstring_tokens":["Adds","a","transition","made","up","of","a","sequence","of","patterns"],"prompt_tokens":[]}
{"code_tokens":["AutomatonBuilder","star","(","State","fromState,","State","toState,","Pattern","pattern",")","{","//\n","//","+-------------------------","e","------------------------+\n","//","|","+--------","e","-------+","|\n","//","|","|","|","|\n","//","|","V","|","V\n","//","fromState","----->","beforeState","----->","afterState","----->","toState\n","//","e","pattern","e\n","//\n","final","State","beforeState","=","createState","(",")",";","final","State","afterState","=","createState","(",")",";","transitionList",".","add","(","new","EpsilonTransition","(","fromState,","beforeState",")",")",";","add","(","pattern,","beforeState,","afterState",")",";","transitionList",".","add","(","new","EpsilonTransition","(","afterState,","beforeState",")",")",";","transitionList",".","add","(","new","EpsilonTransition","(","afterState,","toState",")",")",";","transitionList",".","add","(","new","EpsilonTransition","(","fromState,","toState",")",")",";","return","this",";"],"docstring_tokens":["Adds","a","transition","made","up","of","the","Kleene","star","applied","to","a","pattern"],"prompt_tokens":[]}
{"code_tokens":["AutomatonBuilder","plus","(","State","fromState,","State","toState,","Pattern","pattern",")","{","//\n","//","+--------","e","-------+\n","//","|","|\n","//","V","|\n","//","fromState","----->","beforeState","----->","afterState","----->","toState\n","//","e","pattern","e\n","//\n","final","State","beforeState","=","createState","(",")",";","final","State","afterState","=","createState","(",")",";","transitionList",".","add","(","new","EpsilonTransition","(","fromState,","beforeState",")",")",";","add","(","pattern,","beforeState,","afterState",")",";","transitionList",".","add","(","new","EpsilonTransition","(","afterState,","beforeState",")",")",";","transitionList",".","add","(","new","EpsilonTransition","(","afterState,","toState",")",")",";","return","this",";"],"docstring_tokens":["Adds","a","transition","made","up","of","a","pattern","repeated","1","or","more","times"],"prompt_tokens":[]}
{"code_tokens":["AutomatonBuilder","repeat","(","State","fromState,","State","toState,","Pattern","pattern,\n","int","minRepeat,","int","maxRepeat",")","{","//","Diagram","for","repeat","(","1,","3",")","//","+--------","e","--------------+\n","//","|","+----","e","----+","|\n","//","|","|","V","V\n","//","fromState","--->","state0","--->","state1","--->","state2","--->","state3","--->","toState\n","//","e","pattern","pattern","pattern","e\n","//\n","Preconditions",".","checkArgument","(","0","<=","minRepeat",")",";","Preconditions",".","checkArgument","(","minRepeat","<=","maxRepeat",")",";","Preconditions",".","checkArgument","(","1","<=","maxRepeat",")",";","State","prevState","=","fromState",";","for","(","int","i","=","0",";","i","<=","maxRepeat",";","i++",")","{","final","State","s","=","createState","(",")",";","if","(","i","==","0",")","{","transitionList",".","add","(","new","EpsilonTransition","(","fromState,","s",")",")",";","}","else","{","add","(","pattern,","prevState,","s",")",";","}","if","(","i",">=","minRepeat",")","{","transitionList",".","add","(","new","EpsilonTransition","(","s,","toState",")",")",";","}","prevState","=","s",";","}","transitionList",".","add","(","new","EpsilonTransition","(","prevState,","toState",")",")",";","return","this",";"],"docstring_tokens":["Adds","a","transition","made","up","of","a","pattern","repeated","between","minRepeat","and","maxRepeat","times"],"prompt_tokens":[]}
{"code_tokens":["void","lookupSelectHints","(","SqlSelect","select,\n","SqlParserPos","pos,\n","Collection<SqlMoniker>","hintList",")","{","IdInfo","info","=","idPositions",".","get","(","pos",".","toString","(",")",")",";","if","(","(","info","==","null",")","||","(","info",".","scope","==","null",")",")","{","SqlNode","fromNode","=","select",".","getFrom","(",")",";","final","SqlValidatorScope","fromScope","=","getFromScope","(","select",")",";","lookupFromHints","(","fromNode,","fromScope,","pos,","hintList",")",";","}","else","{","lookupNameCompletionHints","(","info",".","scope,","info",".","id",".","names,\n","info",".","id",".","getParserPosition","(",")",",","hintList",")",";","}"],"docstring_tokens":["Looks","up","completion","hints","for","a","syntactically","correct","select","SQL","that","has","been","parsed","into","an","expression","tree"],"prompt_tokens":[]}
{"code_tokens":["public","final","void","lookupNameCompletionHints","(","SqlValidatorScope","scope,\n","List<String>","names,\n","SqlParserPos","pos,\n","Collection<SqlMoniker>","hintList",")","{","//","Remove","the","last","part","of","name","-","it","is","a","dummy\n","List<String>","subNames","=","Util",".","skipLast","(","names",")",";","\n\n","if","(","subNames",".","size","(",")",">","0",")","{","//","If","there's","a","prefix,","resolve","it","to","a","namespace",".","SqlValidatorNamespace","ns","=","null",";","for","(","String","name",":","subNames",")","{","if","(","ns","==","null",")","{","final","SqlValidatorScope",".","ResolvedImpl","resolved","=\n","new","SqlValidatorScope",".","ResolvedImpl","(",")",";","final","SqlNameMatcher","nameMatcher","=","catalogReader",".","nameMatcher","(",")",";","scope",".","resolve","(","ImmutableList",".","of","(","name",")",",","nameMatcher,","false,","resolved",")",";","if","(","resolved",".","count","(",")","==","1",")","{","ns","=","resolved",".","only","(",")",".","namespace",";","}","}","else","{","ns","=","ns",".","lookupChild","(","name",")",";","}","if","(","ns","==","null",")","{","break",";","}","}","if","(","ns","!=","null",")","{","RelDataType","rowType","=","ns",".","getRowType","(",")",";","if","(","rowType",".","isStruct","(",")",")","{","for","(","RelDataTypeField","field",":","rowType",".","getFieldList","(",")",")","{","hintList",".","add","(","new","SqlMonikerImpl","(","field",".","getName","(",")",",\n","SqlMonikerType",".","COLUMN",")",")",";","}","}","}","\n\n","//","builtin","function","names","are","valid","completion","hints","when","the\n","//","identifier","has","only","1","name","part\n","findAllValidFunctionNames","(","names,","this,","hintList,","pos",")",";","}","else","{","//","No","prefix",";","use","the","children","of","the","current","scope","(","that","is,\n","//","the","aliases","in","the","FROM","clause",")","scope",".","findAliases","(","hintList",")",";","\n\n","//","If","there's","only","one","alias,","add","all","child","columns\n","SelectScope","selectScope","=\n","SqlValidatorUtil",".","getEnclosingSelectScope","(","scope",")",";","if","(","(","selectScope","!=","null",")","&&","(","selectScope",".","getChildren","(",")",".","size","(",")","==","1",")",")","{","RelDataType","rowType","=\n","selectScope",".","getChildren","(",")",".","get","(","0",")",".","getRowType","(",")",";","for","(","RelDataTypeField","field",":","rowType",".","getFieldList","(",")",")","{","hintList",".","add","(","new","SqlMonikerImpl","(","field",".","getName","(",")",",\n","SqlMonikerType",".","COLUMN",")",")",";","}","}","}","\n\n","findAllValidUdfNames","(","names,","this,","hintList",")",";"],"docstring_tokens":["Populates","a","list","of","all","the","valid","alternatives","for","an","identifier"],"prompt_tokens":[]}
{"code_tokens":["@Nullable","RelDataType","getTableConstructorRowType","(","SqlCall","values,\n","SqlValidatorScope","scope",")","{","final","List<SqlNode>","rows","=","values",".","getOperandList","(",")",";","assert","rows",".","size","(",")",">=","1",";","final","List<RelDataType>","rowTypes","=","new","ArrayList<>","(",")",";","for","(","final","SqlNode","row",":","rows",")","{","assert","row",".","getKind","(",")","==","SqlKind",".","ROW",";","SqlCall","rowConstructor","=","(","SqlCall",")","row",";","\n\n","//","REVIEW","jvs","10-Sept-2003:","Once","we","support","single-row","queries","as\n","//","rows,","need","to","infer","aliases","from","there",".","final","List<String>","aliasList","=","new","ArrayList<>","(",")",";","final","List<RelDataType>","typeList","=","new","ArrayList<>","(",")",";","for","(","Ord<SqlNode>","column",":","Ord",".","zip","(","rowConstructor",".","getOperandList","(",")",")",")","{","final","String","alias","=","deriveAliasNonNull","(","column",".","e,","column",".","i",")",";","aliasList",".","add","(","alias",")",";","final","RelDataType","type","=","deriveType","(","scope,","column",".","e",")",";","typeList",".","add","(","type",")",";","}","rowTypes",".","add","(","typeFactory",".","createStructType","(","typeList,","aliasList",")",")",";","}","if","(","rows",".","size","(",")","==","1",")","{","//","TODO","jvs","10-Oct-2005:","get","rid","of","this","workaround","once\n","//","leastRestrictive","can","handle","all","cases\n","return","rowTypes",".","get","(","0",")",";","}","return","typeFactory",".","leastRestrictive","(","rowTypes",")",";"],"docstring_tokens":["Returns","null","if","there","is","no","common","type"],"prompt_tokens":[]}
{"code_tokens":["protected","void","addToSelectList","(","List<SqlNode>","list,\n","Set<String>","aliases,\n","List<Map",".","Entry<String,","RelDataType>>","fieldList,\n","SqlNode","exp,\n","SelectScope","scope,\n","final","boolean","includeSystemVars",")","{","String","alias","=","SqlValidatorUtil",".","getAlias","(","exp,","-1",")",";","String","uniqueAlias","=\n","SqlValidatorUtil",".","uniquify","(","alias,","aliases,","SqlValidatorUtil",".","EXPR_SUGGESTER",")",";","if","(","!Objects",".","equals","(","alias,","uniqueAlias",")",")","{","exp","=","SqlValidatorUtil",".","addAlias","(","exp,","uniqueAlias",")",";","}","fieldList",".","add","(","Pair",".","of","(","uniqueAlias,","deriveType","(","scope,","exp",")",")",")",";","list",".","add","(","exp",")",";"],"docstring_tokens":["Adds","an","expression","to","a","select","list,","ensuring","that","its","alias","does","not","clash","with","any","existing","expressions","on","the","list"],"prompt_tokens":[]}
{"code_tokens":["private","void","registerQuery","(","SqlValidatorScope","parentScope,\n","@Nullable","SqlValidatorScope","usingScope,\n","SqlNode","node,\n","SqlNode","enclosingNode,\n","@Nullable","String","alias,\n","boolean","forceNullable,\n","boolean","checkUpdate",")","{","requireNonNull","(","node,","\"node\"",")",";","requireNonNull","(","enclosingNode,","\"enclosingNode\"",")",";","Preconditions",".","checkArgument","(","usingScope","==","null","||","alias","!=","null",")",";","\n\n","SqlCall","call",";","List<SqlNode>","operands",";","switch","(","node",".","getKind","(",")",")","{","case","SELECT:\n","final","SqlSelect","select","=","(","SqlSelect",")","node",";","final","SelectNamespace","selectNs","=\n","createSelectNamespace","(","select,","enclosingNode",")",";","registerNamespace","(","usingScope,","alias,","selectNs,","forceNullable",")",";","final","SqlValidatorScope","windowParentScope","=\n","(","usingScope","!=","null",")","?","usingScope",":","parentScope",";","SelectScope","selectScope","=\n","new","SelectScope","(","parentScope,","windowParentScope,","select",")",";","scopes",".","put","(","select,","selectScope",")",";","\n\n","//","Start","by","registering","the","WHERE","clause\n","clauseScopes",".","put","(","IdPair",".","of","(","select,","Clause",".","WHERE",")",",","selectScope",")",";","registerOperandSubQueries","(","selectScope,\n","select,\n","SqlSelect",".","WHERE_OPERAND",")",";","\n\n","//","Register","FROM","with","the","inherited","scope","'parentScope',","not\n","//","'selectScope',","otherwise","tables","in","the","FROM","clause","would","be\n","//","able","to","see","each","other",".","final","SqlNode","from","=","select",".","getFrom","(",")",";","if","(","from","!=","null",")","{","final","SqlNode","newFrom","=\n","registerFrom","(","parentScope,\n","selectScope,\n","true,\n","from,\n","from,\n","null,\n","null,\n","false,\n","false",")",";","if","(","newFrom","!=","from",")","{","select",".","setFrom","(","newFrom",")",";","}","}","\n\n","//","If","this","is","an","aggregating","query,","the","SELECT","list","and","HAVING\n","//","clause","use","a","different","scope,","where","you","can","only","reference\n","//","columns","which","are","in","the","GROUP","BY","clause",".","SqlValidatorScope","aggScope","=","selectScope",";","if","(","isAggregate","(","select",")",")","{","aggScope","=\n","new","AggregatingSelectScope","(","selectScope,","select,","false",")",";","clauseScopes",".","put","(","IdPair",".","of","(","select,","Clause",".","SELECT",")",",","aggScope",")",";","}","else","{","clauseScopes",".","put","(","IdPair",".","of","(","select,","Clause",".","SELECT",")",",","selectScope",")",";","}","if","(","select",".","getGroup","(",")","!=","null",")","{","GroupByScope","groupByScope","=\n","new","GroupByScope","(","selectScope,","select",".","getGroup","(",")",",","select",")",";","clauseScopes",".","put","(","IdPair",".","of","(","select,","Clause",".","GROUP_BY",")",",","groupByScope",")",";","registerSubQueries","(","groupByScope,","select",".","getGroup","(",")",")",";","}","registerOperandSubQueries","(","aggScope,\n","select,\n","SqlSelect",".","HAVING_OPERAND",")",";","registerSubQueries","(","aggScope,","SqlNonNullableAccessors",".","getSelectList","(","select",")",")",";","final","SqlNodeList","orderList","=","select",".","getOrderList","(",")",";","if","(","orderList","!=","null",")","{","//","If","the","query","is","'SELECT","DISTINCT',","restrict","the","columns\n","//","available","to","the","ORDER","BY","clause",".","if","(","select",".","isDistinct","(",")",")","{","aggScope","=\n","new","AggregatingSelectScope","(","selectScope,","select,","true",")",";","}","OrderByScope","orderScope","=\n","new","OrderByScope","(","aggScope,","orderList,","select",")",";","clauseScopes",".","put","(","IdPair",".","of","(","select,","Clause",".","ORDER",")",",","orderScope",")",";","registerSubQueries","(","orderScope,","orderList",")",";","\n\n","if","(","!isAggregate","(","select",")",")","{","//","Since","this","is","not","an","aggregating","query,\n","//","there","cannot","be","any","aggregates","in","the","ORDER","BY","clause",".","SqlNode","agg","=","aggFinder",".","findAgg","(","orderList",")",";","if","(","agg","!=","null",")","{","throw","newValidationError","(","agg,","RESOURCE",".","aggregateIllegalInOrderBy","(",")",")",";","}","}","}","break",";","\n\n","case","INTERSECT:\n","validateFeature","(","RESOURCE",".","sQLFeature_F302","(",")",",","node",".","getParserPosition","(",")",")",";","registerSetop","(","parentScope,\n","usingScope,\n","node,\n","node,\n","alias,\n","forceNullable",")",";","break",";","\n\n","case","EXCEPT:\n","validateFeature","(","RESOURCE",".","sQLFeature_E071_03","(",")",",","node",".","getParserPosition","(",")",")",";","registerSetop","(","parentScope,\n","usingScope,\n","node,\n","node,\n","alias,\n","forceNullable",")",";","break",";","\n\n","case","UNION:\n","registerSetop","(","parentScope,\n","usingScope,\n","node,\n","node,\n","alias,\n","forceNullable",")",";","break",";","\n\n","case","WITH:\n","registerWith","(","parentScope,","usingScope,","(","SqlWith",")","node,","enclosingNode,\n","alias,","forceNullable,","checkUpdate",")",";","break",";","\n\n","case","VALUES:\n","call","=","(","SqlCall",")","node",";","scopes",".","put","(","call,","parentScope",")",";","final","TableConstructorNamespace","tableConstructorNamespace","=\n","new","TableConstructorNamespace","(","this,\n","call,\n","parentScope,\n","enclosingNode",")",";","registerNamespace","(","usingScope,\n","alias,\n","tableConstructorNamespace,\n","forceNullable",")",";","operands","=","call",".","getOperandList","(",")",";","for","(","int","i","=","0",";","i","<","operands",".","size","(",")",";","++i",")","{","assert","operands",".","get","(","i",")",".","getKind","(",")","==","SqlKind",".","ROW",";","\n\n","//","FIXME","jvs","9-Feb-2005:","Correlation","should\n","//","be","illegal","in","these","sub-queries",".","Same","goes","for\n","//","any","non-lateral","SELECT","in","the","FROM","list",".","registerOperandSubQueries","(","parentScope,","call,","i",")",";","}","break",";","\n\n","case","INSERT:\n","SqlInsert","insertCall","=","(","SqlInsert",")","node",";","InsertNamespace","insertNs","=\n","new","InsertNamespace","(","this,\n","insertCall,\n","enclosingNode,\n","parentScope",")",";","registerNamespace","(","usingScope,","null,","insertNs,","forceNullable",")",";","registerQuery","(","parentScope,\n","usingScope,\n","insertCall",".","getSource","(",")",",\n","enclosingNode,\n","null,\n","false",")",";","break",";","\n\n","case","DELETE:\n","SqlDelete","deleteCall","=","(","SqlDelete",")","node",";","DeleteNamespace","deleteNs","=\n","new","DeleteNamespace","(","this,\n","deleteCall,\n","enclosingNode,\n","parentScope",")",";","registerNamespace","(","usingScope,","null,","deleteNs,","forceNullable",")",";","registerQuery","(","parentScope,\n","usingScope,\n","SqlNonNullableAccessors",".","getSourceSelect","(","deleteCall",")",",\n","enclosingNode,\n","null,\n","false",")",";","break",";","\n\n","case","UPDATE:\n","if","(","checkUpdate",")","{","validateFeature","(","RESOURCE",".","sQLFeature_E101_03","(",")",",\n","node",".","getParserPosition","(",")",")",";","}","SqlUpdate","updateCall","=","(","SqlUpdate",")","node",";","UpdateNamespace","updateNs","=\n","new","UpdateNamespace","(","this,\n","updateCall,\n","enclosingNode,\n","parentScope",")",";","registerNamespace","(","usingScope,","null,","updateNs,","forceNullable",")",";","registerQuery","(","parentScope,\n","usingScope,\n","SqlNonNullableAccessors",".","getSourceSelect","(","updateCall",")",",\n","enclosingNode,\n","null,\n","false",")",";","break",";","\n\n","case","MERGE:\n","validateFeature","(","RESOURCE",".","sQLFeature_F312","(",")",",","node",".","getParserPosition","(",")",")",";","SqlMerge","mergeCall","=","(","SqlMerge",")","node",";","MergeNamespace","mergeNs","=\n","new","MergeNamespace","(","this,\n","mergeCall,\n","enclosingNode,\n","parentScope",")",";","registerNamespace","(","usingScope,","null,","mergeNs,","forceNullable",")",";","registerQuery","(","parentScope,\n","usingScope,\n","SqlNonNullableAccessors",".","getSourceSelect","(","mergeCall",")",",\n","enclosingNode,\n","null,\n","false",")",";","\n\n","//","update","call","can","reference","either","the","source","table","reference\n","//","or","the","target","table,","so","set","its","parent","scope","to","the","merge's\n","//","source","select",";","when","validating","the","update,","skip","the","feature\n","//","validation","check\n","SqlUpdate","mergeUpdateCall","=","mergeCall",".","getUpdateCall","(",")",";","if","(","mergeUpdateCall","!=","null",")","{","registerQuery","(","getScope","(","SqlNonNullableAccessors",".","getSourceSelect","(","mergeCall",")",",","Clause",".","WHERE",")",",\n","null,\n","mergeUpdateCall,\n","enclosingNode,\n","null,\n","false,\n","false",")",";","}","SqlInsert","mergeInsertCall","=","mergeCall",".","getInsertCall","(",")",";","if","(","mergeInsertCall","!=","null",")","{","registerQuery","(","parentScope,\n","null,\n","mergeInsertCall,\n","enclosingNode,\n","null,\n","false",")",";","}","break",";","\n\n","case","UNNEST:\n","call","=","(","SqlCall",")","node",";","final","UnnestNamespace","unnestNs","=\n","new","UnnestNamespace","(","this,","call,","parentScope,","enclosingNode",")",";","registerNamespace","(","usingScope,\n","alias,\n","unnestNs,\n","forceNullable",")",";","registerOperandSubQueries","(","parentScope,","call,","0",")",";","scopes",".","put","(","node,","parentScope",")",";","break",";","case","OTHER_FUNCTION:\n","call","=","(","SqlCall",")","node",";","ProcedureNamespace","procNs","=\n","new","ProcedureNamespace","(","this,\n","parentScope,\n","call,\n","enclosingNode",")",";","registerNamespace","(","usingScope,\n","alias,\n","procNs,\n","forceNullable",")",";","registerSubQueries","(","parentScope,","call",")",";","break",";","\n\n","case","MULTISET_QUERY_CONSTRUCTOR:\n","case","MULTISET_VALUE_CONSTRUCTOR:\n","validateFeature","(","RESOURCE",".","sQLFeature_S271","(",")",",","node",".","getParserPosition","(",")",")",";","call","=","(","SqlCall",")","node",";","CollectScope","cs","=","new","CollectScope","(","parentScope,","usingScope,","call",")",";","final","CollectNamespace","tableConstructorNs","=\n","new","CollectNamespace","(","call,","cs,","enclosingNode",")",";","final","String","alias2","=","deriveAliasNonNull","(","node,","nextGeneratedId++",")",";","registerNamespace","(","usingScope,\n","alias2,\n","tableConstructorNs,\n","forceNullable",")",";","operands","=","call",".","getOperandList","(",")",";","for","(","int","i","=","0",";","i","<","operands",".","size","(",")",";","i++",")","{","registerOperandSubQueries","(","parentScope,","call,","i",")",";","}","break",";","\n\n","default:\n","throw","Util",".","unexpected","(","node",".","getKind","(",")",")",";","}"],"docstring_tokens":["Registers","a","query","in","a","parent","scope"],"prompt_tokens":[]}
{"code_tokens":["private","@Nullable","SqlNode","getAgg","(","SqlSelect","select",")","{","final","SelectScope","selectScope","=","getRawSelectScope","(","select",")",";","if","(","selectScope","!=","null",")","{","final","List<SqlNode>","selectList","=","selectScope",".","getExpandedSelectList","(",")",";","if","(","selectList","!=","null",")","{","return","aggFinder",".","findAgg","(","selectList",")",";","}","}","return","aggFinder",".","findAgg","(","SqlNonNullableAccessors",".","getSelectList","(","select",")",")",";"],"docstring_tokens":["If","there","is","at","least","one","call","to","an","aggregate","function,","returns","the","first"],"prompt_tokens":[]}
{"code_tokens":["private","void","registerOperandSubQueries","(","SqlValidatorScope","parentScope,\n","SqlCall","call,\n","int","operandOrdinal",")","{","SqlNode","operand","=","call",".","operand","(","operandOrdinal",")",";","if","(","operand","==","null",")","{","return",";","}","if","(","operand",".","getKind","(",")",".","belongsTo","(","SqlKind",".","QUERY",")","&&","call",".","getOperator","(",")",".","argumentMustBeScalar","(","operandOrdinal",")",")","{","operand","=\n","SqlStdOperatorTable",".","SCALAR_QUERY",".","createCall","(","operand",".","getParserPosition","(",")",",\n","operand",")",";","call",".","setOperand","(","operandOrdinal,","operand",")",";","}","registerSubQueries","(","parentScope,","operand",")",";"],"docstring_tokens":["Registers","any","sub-queries","inside","a","given","call","operand,","and","converts","the","operand","to","a","scalar","sub-query","if","the","operator","requires","it"],"prompt_tokens":[]}
{"code_tokens":["private","void","validateNoAggs","(","AggFinder","aggFinder,","SqlNode","node,\n","String","clause",")","{","final","SqlCall","agg","=","aggFinder",".","findAgg","(","node",")",";","if","(","agg","==","null",")","{","return",";","}","final","SqlOperator","op","=","agg",".","getOperator","(",")",";","if","(","op","==","SqlStdOperatorTable",".","OVER",")","{","throw","newValidationError","(","agg,\n","RESOURCE",".","windowedAggregateIllegalInClause","(","clause",")",")",";","}","else","if","(","op",".","isGroup","(",")","||","op",".","isGroupAuxiliary","(",")",")","{","throw","newValidationError","(","agg,\n","RESOURCE",".","groupFunctionMustAppearInGroupByClause","(","op",".","getName","(",")",")",")",";","}","else","{","throw","newValidationError","(","agg,\n","RESOURCE",".","aggregateIllegalInClause","(","clause",")",")",";","}"],"docstring_tokens":["Throws","an","error","if","there","is","an","aggregate","or","windowed","aggregate","in","the","given","clause"],"prompt_tokens":[]}
{"code_tokens":["private","void","validateModality","(","SqlNode","query",")","{","final","SqlModality","modality","=","deduceModality","(","query",")",";","if","(","query","instanceof","SqlSelect",")","{","final","SqlSelect","select","=","(","SqlSelect",")","query",";","validateModality","(","select,","modality,","true",")",";","}","else","if","(","query",".","getKind","(",")","==","SqlKind",".","VALUES",")","{","switch","(","modality",")","{","case","STREAM:\n","throw","newValidationError","(","query,","Static",".","RESOURCE",".","cannotStreamValues","(",")",")",";","default:\n","break",";","}","}","else","{","assert","query",".","isA","(","SqlKind",".","SET_QUERY",")",";","final","SqlCall","call","=","(","SqlCall",")","query",";","for","(","SqlNode","operand",":","call",".","getOperandList","(",")",")","{","if","(","deduceModality","(","operand",")","!=","modality",")","{","throw","newValidationError","(","operand,\n","Static",".","RESOURCE",".","streamSetOpInconsistentInputs","(",")",")",";","}","validateModality","(","operand",")",";","}","}"],"docstring_tokens":["Validates","that","a","query","can","deliver","the","modality","it","promises"],"prompt_tokens":[]}
{"code_tokens":["protected","void","validateOrderList","(","SqlSelect","select",")","{","//","ORDER","BY","is","validated","in","a","scope","where","aliases","in","the","SELECT","clause\n","//","are","visible",".","For","example,","\"SELECT","empno","AS","x","FROM","emp","ORDER","BY","x\"\n","//","is","valid",".","SqlNodeList","orderList","=","select",".","getOrderList","(",")",";","if","(","orderList","==","null",")","{","return",";","}","if","(","!shouldAllowIntermediateOrderBy","(",")",")","{","if","(","!cursorSet",".","contains","(","select",")",")","{","throw","newValidationError","(","select,","RESOURCE",".","invalidOrderByPos","(",")",")",";","}","}","final","SqlValidatorScope","orderScope","=","getOrderScope","(","select",")",";","requireNonNull","(","orderScope,","\"orderScope\"",")",";","\n\n","List<SqlNode>","expandList","=","new","ArrayList<>","(",")",";","for","(","SqlNode","orderItem",":","orderList",")","{","SqlNode","expandedOrderItem","=","expand","(","orderItem,","orderScope",")",";","expandList",".","add","(","expandedOrderItem",")",";","}","\n\n","SqlNodeList","expandedOrderList","=","new","SqlNodeList","(","expandList,\n","orderList",".","getParserPosition","(",")",")",";","select",".","setOrderBy","(","expandedOrderList",")",";","\n\n","for","(","SqlNode","orderItem",":","expandedOrderList",")","{","validateOrderItem","(","select,","orderItem",")",";","}"],"docstring_tokens":["Validates","the","ORDER","BY","clause","of","a","SELECT","statement"],"prompt_tokens":[]}
{"code_tokens":["private","void","validateGroupByItem","(","SqlSelect","select,","SqlNode","groupByItem",")","{","final","SqlValidatorScope","groupByScope","=","getGroupScope","(","select",")",";","validateGroupByExpr","(","groupByItem,","groupByScope",")",";","groupByScope",".","validateExpr","(","groupByItem",")",";"],"docstring_tokens":["Validates","an","item","in","the","GROUP","BY","clause","of","a","SELECT","statement"],"prompt_tokens":[]}
{"code_tokens":["protected","void","validateGroupClause","(","SqlSelect","select",")","{","SqlNodeList","groupList","=","select",".","getGroup","(",")",";","if","(","groupList","==","null",")","{","return",";","}","final","String","clause","=","\"GROUP","BY\"",";","validateNoAggs","(","aggOrOverFinder,","groupList,","clause",")",";","final","SqlValidatorScope","groupScope","=","getGroupScope","(","select",")",";","\n\n","//","expand","the","expression","in","group","list",".","List<SqlNode>","expandedList","=","new","ArrayList<>","(",")",";","for","(","SqlNode","groupItem",":","groupList",")","{","SqlNode","expandedItem","=","expandGroupByOrHavingExpr","(","groupItem,","groupScope,","select,","false",")",";","expandedList",".","add","(","expandedItem",")",";","}","groupList","=","new","SqlNodeList","(","expandedList,","groupList",".","getParserPosition","(",")",")",";","select",".","setGroupBy","(","groupList",")",";","inferUnknownTypes","(","unknownType,","groupScope,","groupList",")",";","for","(","SqlNode","groupItem",":","expandedList",")","{","validateGroupByItem","(","select,","groupItem",")",";","}","\n\n","//","Nodes","in","the","GROUP","BY","clause","are","expressions","except","if","they","are","calls\n","//","to","the","GROUPING","SETS,","ROLLUP","or","CUBE","operators",";","this","operators","are","not\n","//","expressions,","because","they","do","not","have","a","type",".","for","(","SqlNode","node",":","groupList",")","{","switch","(","node",".","getKind","(",")",")","{","case","GROUPING_SETS:\n","case","ROLLUP:\n","case","CUBE:\n","node",".","validate","(","this,","groupScope",")",";","break",";","default:\n","node",".","validateExpr","(","this,","groupScope",")",";","}","}","\n\n","//","Derive","the","type","of","each","GROUP","BY","item",".","We","don't","need","the","type,","but\n","//","it","resolves","functions,","and","that","is","necessary","for","deducing\n","//","monotonicity",".","final","SqlValidatorScope","selectScope","=","getSelectScope","(","select",")",";","AggregatingSelectScope","aggregatingScope","=","null",";","if","(","selectScope","instanceof","AggregatingSelectScope",")","{","aggregatingScope","=","(","AggregatingSelectScope",")","selectScope",";","}","for","(","SqlNode","groupItem",":","groupList",")","{","if","(","groupItem","instanceof","SqlNodeList\n","&&","(","(","SqlNodeList",")","groupItem",")",".","size","(",")","==","0",")","{","continue",";","}","validateGroupItem","(","groupScope,","aggregatingScope,","groupItem",")",";","}","\n\n","SqlNode","agg","=","aggFinder",".","findAgg","(","groupList",")",";","if","(","agg","!=","null",")","{","throw","newValidationError","(","agg,","RESOURCE",".","aggregateIllegalInClause","(","clause",")",")",";","}"],"docstring_tokens":["Validates","the","GROUP","BY","clause","of","a","SELECT","statement"],"prompt_tokens":[]}
{"code_tokens":["protected","RelDataType","createTargetRowType","(","SqlValidatorTable","table,\n","@Nullable","SqlNodeList","targetColumnList,\n","boolean","append",")","{","RelDataType","baseRowType","=","table",".","getRowType","(",")",";","if","(","targetColumnList","==","null",")","{","return","baseRowType",";","}","List<RelDataTypeField>","targetFields","=","baseRowType",".","getFieldList","(",")",";","final","List<Map",".","Entry<String,","RelDataType>>","fields","=","new","ArrayList<>","(",")",";","if","(","append",")","{","for","(","RelDataTypeField","targetField",":","targetFields",")","{","fields",".","add","(","Pair",".","of","(","SqlUtil",".","deriveAliasFromOrdinal","(","fields",".","size","(",")",")",",\n","targetField",".","getType","(",")",")",")",";","}","}","final","Set<Integer>","assignedFields","=","new","HashSet<>","(",")",";","final","RelOptTable","relOptTable","=","table","instanceof","RelOptTable\n","?","(","(","RelOptTable",")","table",")",":","null",";","for","(","SqlNode","node",":","targetColumnList",")","{","SqlIdentifier","id","=","(","SqlIdentifier",")","node",";","RelDataTypeField","targetField","=\n","SqlValidatorUtil",".","getTargetField","(","baseRowType,","typeFactory,","id,","catalogReader,","relOptTable",")",";","if","(","targetField","==","null",")","{","throw","newValidationError","(","id,\n","RESOURCE",".","unknownTargetColumn","(","id",".","toString","(",")",")",")",";","}","if","(","!assignedFields",".","add","(","targetField",".","getIndex","(",")",")",")","{","throw","newValidationError","(","id,\n","RESOURCE",".","duplicateTargetColumn","(","targetField",".","getName","(",")",")",")",";","}","fields",".","add","(","targetField",")",";","}","return","typeFactory",".","createStructType","(","fields",")",";"],"docstring_tokens":["Derives","a","row-type","for","INSERT","and","UPDATE","operations"],"prompt_tokens":[]}
{"code_tokens":["private","void","checkConstraint","(","SqlValidatorTable","validatorTable,\n","SqlNode","source,\n","RelDataType","targetRowType",")","{","final","ModifiableViewTable","modifiableViewTable","=\n","validatorTable",".","unwrap","(","ModifiableViewTable",".","class",")",";","if","(","modifiableViewTable","!=","null","&&","source","instanceof","SqlCall",")","{","final","Table","table","=","modifiableViewTable",".","getTable","(",")",";","final","RelDataType","tableRowType","=","table",".","getRowType","(","typeFactory",")",";","final","List<RelDataTypeField>","tableFields","=","tableRowType",".","getFieldList","(",")",";","\n\n","//","Get","the","mapping","from","column","indexes","of","the","underlying","table\n","//","to","the","target","columns","and","view","constraints",".","final","Map<Integer,","RelDataTypeField>","tableIndexToTargetField","=\n","SqlValidatorUtil",".","getIndexToFieldMap","(","tableFields,","targetRowType",")",";","final","Map<Integer,","RexNode>","projectMap","=\n","RelOptUtil",".","getColumnConstraints","(","modifiableViewTable,","targetRowType,","typeFactory",")",";","\n\n","//","Determine","columns","(","indexed","to","the","underlying","table",")","that","need\n","//","to","be","validated","against","the","view","constraint",".","@SuppressWarnings","(","\"RedundantCast\"",")","final","ImmutableBitSet","targetColumns","=\n","ImmutableBitSet",".","of","(","(","Iterable<Integer>",")","tableIndexToTargetField",".","keySet","(",")",")",";","@SuppressWarnings","(","\"RedundantCast\"",")","final","ImmutableBitSet","constrainedColumns","=\n","ImmutableBitSet",".","of","(","(","Iterable<Integer>",")","projectMap",".","keySet","(",")",")",";","@SuppressWarnings","(","\"assignment",".","type",".","incompatible\"",")","List<@KeyFor","(","{","\"tableIndexToTargetField\",","\"projectMap\"","}",")","Integer>","constrainedTargetColumns","=\n","targetColumns",".","intersect","(","constrainedColumns",")",".","asList","(",")",";","\n\n","//","Validate","insert","values","against","the","view","constraint",".","final","List<SqlNode>","values","=","(","(","SqlCall",")","source",")",".","getOperandList","(",")",";","for","(","final","int","colIndex:","constrainedTargetColumns",")","{","final","String","colName","=","tableFields",".","get","(","colIndex",")",".","getName","(",")",";","final","RelDataTypeField","targetField","=","tableIndexToTargetField",".","get","(","colIndex",")",";","for","(","SqlNode","row",":","values",")","{","final","SqlCall","call","=","(","SqlCall",")","row",";","final","SqlNode","sourceValue","=","call",".","operand","(","targetField",".","getIndex","(",")",")",";","final","ValidationError","validationError","=\n","new","ValidationError","(","sourceValue,\n","RESOURCE",".","viewConstraintNotSatisfied","(","colName,\n","Util",".","last","(","validatorTable",".","getQualifiedName","(",")",")",")",")",";","RelOptUtil",".","validateValueAgainstConstraint","(","sourceValue,\n","projectMap",".","get","(","colIndex",")",",","validationError",")",";","}","}","}"],"docstring_tokens":["Validates","insert","values","against","the","constraint","of","a","modifiable","view"],"prompt_tokens":[]}
{"code_tokens":["private","void","checkConstraint","(","SqlValidatorTable","validatorTable,\n","SqlUpdate","update,\n","RelDataType","targetRowType",")","{","final","ModifiableViewTable","modifiableViewTable","=\n","validatorTable",".","unwrap","(","ModifiableViewTable",".","class",")",";","if","(","modifiableViewTable","!=","null",")","{","final","Table","table","=","modifiableViewTable",".","getTable","(",")",";","final","RelDataType","tableRowType","=","table",".","getRowType","(","typeFactory",")",";","\n\n","final","Map<Integer,","RexNode>","projectMap","=\n","RelOptUtil",".","getColumnConstraints","(","modifiableViewTable,","targetRowType,\n","typeFactory",")",";","final","Map<String,","Integer>","nameToIndex","=\n","SqlValidatorUtil",".","mapNameToIndex","(","tableRowType",".","getFieldList","(",")",")",";","\n\n","//","Validate","update","values","against","the","view","constraint",".","final","List<String>","targetNames","=\n","SqlIdentifier",".","simpleNames","(","update",".","getTargetColumnList","(",")",")",";","final","List<SqlNode>","sources","=","update",".","getSourceExpressionList","(",")",";","Pair",".","forEach","(","targetNames,","sources,","(","columnName,","expr",")","->","{","final","Integer","columnIndex","=","nameToIndex",".","get","(","columnName",")",";","if","(","projectMap",".","containsKey","(","columnIndex",")",")","{","final","RexNode","columnConstraint","=","projectMap",".","get","(","columnIndex",")",";","final","ValidationError","validationError","=\n","new","ValidationError","(","expr,\n","RESOURCE",".","viewConstraintNotSatisfied","(","columnName,\n","Util",".","last","(","validatorTable",".","getQualifiedName","(",")",")",")",")",";","RelOptUtil",".","validateValueAgainstConstraint","(","expr,\n","columnConstraint,","validationError",")",";","}","}",")",";","}"],"docstring_tokens":["Validates","updates","against","the","constraint","of","a","modifiable","view"],"prompt_tokens":[]}
{"code_tokens":["private","void","checkFieldCount","(","SqlNode","node,","SqlValidatorTable","table,\n","List<ColumnStrategy>","strategies,","RelDataType","targetRowTypeToValidate,\n","RelDataType","realTargetRowType,","SqlNode","source,\n","RelDataType","logicalSourceRowType,","RelDataType","logicalTargetRowType",")","{","final","int","sourceFieldCount","=","logicalSourceRowType",".","getFieldCount","(",")",";","final","int","targetFieldCount","=","logicalTargetRowType",".","getFieldCount","(",")",";","final","int","targetRealFieldCount","=","realTargetRowType",".","getFieldCount","(",")",";","if","(","sourceFieldCount","!=","targetFieldCount\n","&&","sourceFieldCount","!=","targetRealFieldCount",")","{","//","Allows","the","source","row","fields","count","to","be","equal","with","either\n","//","the","logical","or","the","real","(","excludes","columns","that","can","not","insert","into",")","//","target","row","fields","count",".","throw","newValidationError","(","node,\n","RESOURCE",".","unmatchInsertColumn","(","targetFieldCount,","sourceFieldCount",")",")",";","}","//","Ensure","that","non-nullable","fields","are","targeted",".","for","(","final","RelDataTypeField","field",":","table",".","getRowType","(",")",".","getFieldList","(",")",")","{","final","RelDataTypeField","targetField","=\n","targetRowTypeToValidate",".","getField","(","field",".","getName","(",")",",","true,","false",")",";","switch","(","strategies",".","get","(","field",".","getIndex","(",")",")",")","{","case","NOT_NULLABLE:\n","assert","!field",".","getType","(",")",".","isNullable","(",")",";","if","(","targetField","==","null",")","{","throw","newValidationError","(","node,\n","RESOURCE",".","columnNotNullable","(","field",".","getName","(",")",")",")",";","}","break",";","case","NULLABLE:\n","assert","field",".","getType","(",")",".","isNullable","(",")",";","break",";","case","VIRTUAL:\n","case","STORED:\n","if","(","targetField","!=","null\n","&&","!isValuesWithDefault","(","source,","targetField",".","getIndex","(",")",")",")","{","throw","newValidationError","(","node,\n","RESOURCE",".","insertIntoAlwaysGenerated","(","field",".","getName","(",")",")",")",";","}","break",";","default:\n","break",";","}","}"],"docstring_tokens":["Check","the","field","count","of","sql","insert","source","and","target","node","row","type"],"prompt_tokens":[]}
{"code_tokens":["private","void","validateSnapshot","(","SqlNode","node,\n","@Nullable","SqlValidatorScope","scope,\n","SqlValidatorNamespace","ns",")","{","if","(","node",".","getKind","(",")","==","SqlKind",".","SNAPSHOT",")","{","SqlSnapshot","snapshot","=","(","SqlSnapshot",")","node",";","SqlNode","period","=","snapshot",".","getPeriod","(",")",";","RelDataType","dataType","=","deriveType","(","requireNonNull","(","scope,","\"scope\"",")",",","period",")",";","if","(","dataType",".","getSqlTypeName","(",")","!=","SqlTypeName",".","TIMESTAMP",")","{","throw","newValidationError","(","period,\n","Static",".","RESOURCE",".","illegalExpressionForTemporal","(","dataType",".","getSqlTypeName","(",")",".","getName","(",")",")",")",";","}","SqlValidatorTable","table","=","getTable","(","ns",")",";","if","(","!table",".","isTemporal","(",")",")","{","List<String>","qualifiedName","=","table",".","getQualifiedName","(",")",";","String","tableName","=","qualifiedName",".","get","(","qualifiedName",".","size","(",")","-","1",")",";","throw","newValidationError","(","snapshot",".","getTableRef","(",")",",\n","Static",".","RESOURCE",".","notTemporalTable","(","tableName",")",")",";","}","}"],"docstring_tokens":["Validates","snapshot","to","a","table"],"prompt_tokens":[]}
{"code_tokens":["public","static","MaterializedViewTableMacro","create","(","final","CalciteSchema","schema,\n","final","String","viewSql,","final","@Nullable","List<String>","viewSchemaPath,","List<String>","viewPath,\n","final","@Nullable","String","suggestedTableName,","boolean","existing",")","{","return","new","MaterializedViewTableMacro","(","schema,","viewSql,","viewSchemaPath,","viewPath,\n","suggestedTableName,","existing",")",";"],"docstring_tokens":["Table","macro","that","returns","a","materialized","view"],"prompt_tokens":[]}
{"code_tokens":["public","static","<E>","List<E>","of","(","@Nullable","E","e1",")","{","//noinspection","unchecked\n","return","e1","==","null","?","(","List<E>",")","SINGLETON_NULL",":","ImmutableList",".","of","(","e1",")",";"],"docstring_tokens":["Creates","an","immutable","list","of","1","element"],"prompt_tokens":[]}
{"code_tokens":["public","static","<E>","List<E>","of","(","E","e1,","E","e2",")","{","//","Only","we","can","see","the","varargs","array",".","Therefore","the","list","is","immutable",".","//noinspection","unchecked\n","return","UnmodifiableArrayList",".","of","(","e1,","e2",")",";"],"docstring_tokens":["Creates","an","immutable","list","of","2","elements"],"prompt_tokens":[]}
{"code_tokens":["public","static","<E>","List<E>","of","(","E","e1,","E","e2,","E","e3",")","{","//","Only","we","can","see","the","varargs","array",".","Therefore","the","list","is","immutable",".","//noinspection","unchecked\n","return","UnmodifiableArrayList",".","of","(","e1,","e2,","e3",")",";"],"docstring_tokens":["Creates","an","immutable","list","of","3","elements"],"prompt_tokens":[]}
{"code_tokens":["public","static","<E>","List<E>","of","(","E","e1,","E","e2,","E","e3,","E","e4",")","{","//","Only","we","can","see","the","varargs","array",".","Therefore","the","list","is","immutable",".","//noinspection","unchecked\n","return","UnmodifiableArrayList",".","of","(","e1,","e2,","e3,","e4",")",";"],"docstring_tokens":["Creates","an","immutable","list","of","4","elements"],"prompt_tokens":[]}
{"code_tokens":["public","static","<E>","List<E>","of","(","E","e1,","E","e2,","E","e3,","E","e4,","E","e5",")","{","//","Only","we","can","see","the","varargs","array",".","Therefore","the","list","is","immutable",".","//noinspection","unchecked\n","return","UnmodifiableArrayList",".","of","(","e1,","e2,","e3,","e4,","e5",")",";"],"docstring_tokens":["Creates","an","immutable","list","of","5","elements"],"prompt_tokens":[]}
{"code_tokens":["public","static","<E>","List<E>","of","(","E","e1,","E","e2,","E","e3,","E","e4,","E","e5,","E","e6",")","{","//","Only","we","can","see","the","varargs","array",".","Therefore","the","list","is","immutable",".","//noinspection","unchecked\n","return","UnmodifiableArrayList",".","of","(","e1,","e2,","e3,","e4,","e5,","e6",")",";"],"docstring_tokens":["Creates","an","immutable","list","of","6","elements"],"prompt_tokens":[]}
{"code_tokens":["public","static","<E>","List<E>","of","(","E","e1,","E","e2,","E","e3,","E","e4,","E","e5,","E","e6,","E","e7",")","{","//","Only","we","can","see","the","varargs","array",".","Therefore","the","list","is","immutable",".","//noinspection","unchecked\n","return","UnmodifiableArrayList",".","of","(","e1,","e2,","e3,","e4,","e5,","e6,","e7",")",";"],"docstring_tokens":["Creates","an","immutable","list","of","7","elements"],"prompt_tokens":[]}
{"code_tokens":["public","static","<E>","List<E>","of","(","E","e1,","E","e2,","E","e3,","E","e4,","E","e5,","E","e6,","E","e7,","E","e8,\n","E",".",".",".","others",")","{","@SuppressWarnings","(","\"unchecked\"",")","E[]","array","=","(","E[]",")","new","Object[8","+","others",".","length]",";","array[0]","=","e1",";","array[1]","=","e2",";","array[2]","=","e3",";","array[3]","=","e4",";","array[4]","=","e5",";","array[5]","=","e6",";","array[6]","=","e7",";","array[7]","=","e8",";","System",".","arraycopy","(","others,","0,","array,","8,","others",".","length",")",";","return","new","ImmutableNullableList<>","(","array",")",";"],"docstring_tokens":["Creates","an","immutable","list","of","8","or","more","elements"],"prompt_tokens":[]}
{"code_tokens":["private","boolean","enabled","(",")","{","return","CalciteSystemProperty",".","TEST_REDIS",".","value","(",")",";"],"docstring_tokens":["Whether","to","run","this","test"],"prompt_tokens":[]}
{"code_tokens":["public","static","FamilyOperandTypeChecker","family","(","SqlTypeFamily",".",".",".","families",")","{","return","new","FamilyOperandTypeChecker","(","ImmutableList",".","copyOf","(","families",")",",\n","i","->","false",")",";"],"docstring_tokens":["Creates","a","checker","that","passes","if","each","operand","is","a","member","of","a","corresponding","family"],"prompt_tokens":[]}
{"code_tokens":["public","static","SqlSingleOperandTypeChecker","or","(","SqlSingleOperandTypeChecker",".",".",".","rules",")","{","return","new","CompositeSingleOperandTypeChecker","(","CompositeOperandTypeChecker",".","Composition",".","OR,\n","ImmutableList",".","copyOf","(","rules",")",",","null",")",";"],"docstring_tokens":["Creates","a","single-operand","checker","that","passes","if","any","one","of","the","rules","passes"],"prompt_tokens":[]}
{"code_tokens":["public","static","SqlOperandTypeChecker","sequence","(","String","allowedSignatures,\n","SqlSingleOperandTypeChecker",".",".",".","rules",")","{","return","new","CompositeOperandTypeChecker","(","CompositeOperandTypeChecker",".","Composition",".","SEQUENCE,\n","ImmutableList",".","copyOf","(","rules",")",",","allowedSignatures,","null",")",";"],"docstring_tokens":["Creates","an","operand","checker","from","a","sequence","of","single-operand","checkers"],"prompt_tokens":[]}
{"code_tokens":["public","boolean","requireParentheses","(","Expression","expression,","int","lprec,\n","int","rprec",")","{","if","(","lprec","<","expression",".","nodeType",".","lprec\n","&&","expression",".","nodeType",".","rprec",">=","rprec",")","{","return","false",";","}","buf",".","append","(","\"","(","\"",")",";","expression",".","accept","(","this,","0,","0",")",";","buf",".","append","(","\"",")","\"",")",";","return","true",";"],"docstring_tokens":["If","parentheses","are","required,","writes","this","expression","out","with","parentheses","and","returns","true"],"prompt_tokens":[]}
{"code_tokens":["private","List<RexNode>","translate","(",")","throws","FrontendException","{","currentWalker",".","walk","(","this",")",";","return","new","ArrayList<>","(","stack",")",";"],"docstring_tokens":["Translates","the","given","pig","expression","plan","into","a","list","of","relational","algebra","expressions"],"prompt_tokens":[]}
{"code_tokens":["private","ImmutableList<RexNode>","buildOperands","(","int","numOps",")","{","List<RexNode>","opList","=","new","ArrayList<>","(",")",";","for","(","int","i","=","0",";","i","<","numOps",";","i++",")","{","opList",".","add","(","0,","stack",".","pop","(",")",")",";","}","return","ImmutableList",".","copyOf","(","opList",")",";"],"docstring_tokens":["Builds","operands","for","an","operator","from","expressions","on","the","top","of","the","visitor","stack"],"prompt_tokens":[]}
{"code_tokens":["private","static","RexNode","replacePatternIfPossible","(","RexNode","rexNode",")","{","//","Until\n","//","[CALCITE-3194]","Convert","Pig","string","patterns","into","SQL","string","patterns\n","//","is","fixed,","return","the","pattern","unchanged",".","return","rexNode",";"],"docstring_tokens":["Replaces","Pig","regular","expressions","with","SQL","regular","expressions","in","a","string"],"prompt_tokens":[]}
{"code_tokens":["@SuppressWarnings","(","\"AmbiguousMethodReference\"",")","public","static","<E","extends","SqlNode>","E","clone","(","E","e",")","{","//noinspection","unchecked\n","return","(","E",")","e",".","clone","(","e",".","pos",")",";"],"docstring_tokens":["Creates","a","copy","of","a","SqlNode"],"prompt_tokens":[]}
{"code_tokens":["public","static","<T","extends","SqlNode>","Collector<T,","ArrayList<@Nullable","SqlNode>,","SqlNodeList>\n","toList","(",")","{","return","toList","(","SqlParserPos",".","ZERO",")",";"],"docstring_tokens":["Returns","a","Collector","that","accumulates","the","input","elements","into","a","SqlNodeList,","with","zero","position"],"prompt_tokens":[]}
{"code_tokens":["public","static","BlockStatement","create","(","Statement","statement,\n","BlockStatement","block",")","{","return","Expressions",".","block","(","Expressions",".","list","(","statement",")",".","appendAll","(","block",".","statements",")",")",";"],"docstring_tokens":["Prepends","a","statement","to","a","block"],"prompt_tokens":[]}
{"code_tokens":["public","SqlDataTypeSpec","withNullable","(","Boolean","nullable",")","{","return","withNullable","(","nullable,","SqlParserPos",".","ZERO",")",";"],"docstring_tokens":["Returns","a","copy","of","this","data","type","specification","with","a","given","nullability"],"prompt_tokens":[]}
{"code_tokens":["public","RelDataType","deriveType","(","SqlValidator","validator",")","{","return","deriveType","(","validator,","false",")",";"],"docstring_tokens":["Converts","this","type","specification","to","a","RelDataType"],"prompt_tokens":[]}
{"code_tokens":["private","RelDataType","fixUpNullability","(","RelDataTypeFactory","typeFactory,\n","RelDataType","type,","boolean","nullable",")","{","if","(","this",".","nullable","!=","null",")","{","nullable","=","this",".","nullable",";","}","return","typeFactory",".","createTypeWithNullability","(","type,","nullable",")",";"],"docstring_tokens":["Fix","up","the","nullability","of","the","type"],"prompt_tokens":[]}
{"code_tokens":["private","static","void","unparseFloor","(","SqlWriter","writer,","SqlCall","call",")","{","SqlLiteral","node","=","call",".","operand","(","1",")",";","TimeUnitRange","unit","=","node",".","getValueAs","(","TimeUnitRange",".","class",")",";","\n\n","if","(","unit","==","TimeUnitRange",".","WEEK",")","{","writer",".","print","(","\"STR_TO_DATE\"",")",";","SqlWriter",".","Frame","frame","=","writer",".","startList","(","\"","(","\",","\"",")","\"",")",";","\n\n","writer",".","print","(","\"DATE_FORMAT","(","\"",")",";","call",".","operand","(","0",")",".","unparse","(","writer,","0,","0",")",";","writer",".","print","(","\",","'%x%v-1'",")",",","'%x%v-%w'\"",")",";","writer",".","endList","(","frame",")",";","return",";","}","\n\n","String","format",";","switch","(","unit",")","{","case","YEAR:\n","format","=","\"%Y-01-01\"",";","break",";","case","MONTH:\n","format","=","\"%Y-%m-01\"",";","break",";","case","DAY:\n","format","=","\"%Y-%m-%d\"",";","break",";","case","HOUR:\n","format","=","\"%Y-%m-%d","%H:00:00\"",";","break",";","case","MINUTE:\n","format","=","\"%Y-%m-%d","%H:%i:00\"",";","break",";","case","SECOND:\n","format","=","\"%Y-%m-%d","%H:%i:%s\"",";","break",";","default:\n","throw","new","AssertionError","(","\"MYSQL","does","not","support","FLOOR","for","time","unit:","\"\n","+","unit",")",";","}","\n\n","writer",".","print","(","\"DATE_FORMAT\"",")",";","SqlWriter",".","Frame","frame","=","writer",".","startList","(","\"","(","\",","\"",")","\"",")",";","call",".","operand","(","0",")",".","unparse","(","writer,","0,","0",")",";","writer",".","sep","(","\",\",","true",")",";","writer",".","print","(","\"'\"","+","format","+","\"'\"",")",";","writer",".","endList","(","frame",")",";"],"docstring_tokens":["Unparses","datetime","floor","for","MySQL"],"prompt_tokens":[]}
{"code_tokens":["public","static","RelNode","create","(","RelOptCluster","cluster,\n","RelTraitSet","traitSet,","RelBuilder","relBuilder,","RelNode","child,\n","final","RexProgram","program",")","{","final","RelDataType","outRowType","=","program",".","getOutputRowType","(",")",";","//","Build","a","list","of","distinct","groups,","partitions","and","aggregate\n","//","functions",".","final","Multimap<WindowKey,","RexOver>","windowMap","=\n","LinkedListMultimap",".","create","(",")",";","\n\n","final","int","inputFieldCount","=","child",".","getRowType","(",")",".","getFieldCount","(",")",";","\n\n","final","Map<RexLiteral,","RexInputRef>","constantPool","=","new","HashMap<>","(",")",";","final","List<RexLiteral>","constants","=","new","ArrayList<>","(",")",";","\n\n","//","Identify","constants","in","the","expression","tree","and","replace","them","with\n","//","references","to","newly","generated","constant","pool",".","RexShuttle","replaceConstants","=","new","RexShuttle","(",")","{","@Override","public","RexNode","visitLiteral","(","RexLiteral","literal",")","{","RexInputRef","ref","=","constantPool",".","get","(","literal",")",";","if","(","ref","!=","null",")","{","return","ref",";","}","constants",".","add","(","literal",")",";","ref","=","new","RexInputRef","(","constantPool",".","size","(",")","+","inputFieldCount,\n","literal",".","getType","(",")",")",";","constantPool",".","put","(","literal,","ref",")",";","return","ref",";","}","}",";","\n\n","//","Build","a","list","of","groups,","partitions,","and","aggregate","functions",".","Each\n","//","aggregate","function","will","add","its","arguments","as","outputs","of","the","input\n","//","program",".","final","IdentityHashMap<RexOver,","RexOver>","origToNewOver","=","new","IdentityHashMap<>","(",")",";","for","(","RexNode","agg",":","program",".","getExprList","(",")",")","{","if","(","agg","instanceof","RexOver",")","{","final","RexOver","origOver","=","(","RexOver",")","agg",";","final","RexOver","newOver","=","(","RexOver",")","origOver",".","accept","(","replaceConstants",")",";","origToNewOver",".","put","(","origOver,","newOver",")",";","addWindows","(","windowMap,","newOver,","inputFieldCount",")",";","}","}","\n\n","final","Map<RexOver,","Window",".","RexWinAggCall>","aggMap","=","new","HashMap<>","(",")",";","List<Group>","groups","=","new","ArrayList<>","(",")",";","for","(","Map",".","Entry<WindowKey,","Collection<RexOver>>","entry\n",":","windowMap",".","asMap","(",")",".","entrySet","(",")",")","{","final","WindowKey","windowKey","=","entry",".","getKey","(",")",";","final","List<RexWinAggCall>","aggCalls","=","new","ArrayList<>","(",")",";","for","(","RexOver","over",":","entry",".","getValue","(",")",")","{","final","RexWinAggCall","aggCall","=\n","new","RexWinAggCall","(","over",".","getAggOperator","(",")",",\n","over",".","getType","(",")",",\n","toInputRefs","(","over",".","operands",")",",\n","aggMap",".","size","(",")",",\n","over",".","isDistinct","(",")",",\n","over",".","ignoreNulls","(",")",")",";","aggCalls",".","add","(","aggCall",")",";","aggMap",".","put","(","over,","aggCall",")",";","}","RexShuttle","toInputRefs","=","new","RexShuttle","(",")","{","@Override","public","RexNode","visitLocalRef","(","RexLocalRef","localRef",")","{","return","new","RexInputRef","(","localRef",".","getIndex","(",")",",","localRef",".","getType","(",")",")",";","}","}",";","groups",".","add","(","new","Group","(","windowKey",".","groupSet,\n","windowKey",".","isRows,\n","windowKey",".","lowerBound",".","accept","(","toInputRefs",")",",\n","windowKey",".","upperBound",".","accept","(","toInputRefs",")",",\n","windowKey",".","orderKeys,\n","aggCalls",")",")",";","}","\n\n","//","Figure","out","the","type","of","the","inputs","to","the","output","program",".","//","They","are:","the","inputs","to","this","rel,","followed","by","the","outputs","of\n","//","each","window",".","final","List<Window",".","RexWinAggCall>","flattenedAggCallList","=","new","ArrayList<>","(",")",";","final","List<Map",".","Entry<String,","RelDataType>>","fieldList","=\n","new","ArrayList<>","(","child",".","getRowType","(",")",".","getFieldList","(",")",")",";","final","int","offset","=","fieldList",".","size","(",")",";","\n\n","//","Use","better","field","names","for","agg","calls","that","are","projected",".","final","Map<Integer,","String>","fieldNames","=","new","HashMap<>","(",")",";","for","(","Ord<RexLocalRef>","ref",":","Ord",".","zip","(","program",".","getProjectList","(",")",")",")","{","final","int","index","=","ref",".","e",".","getIndex","(",")",";","if","(","index",">=","offset",")","{","fieldNames",".","put","(","index","-","offset,","outRowType",".","getFieldNames","(",")",".","get","(","ref",".","i",")",")",";","}","}","\n\n","for","(","Ord<Group>","window",":","Ord",".","zip","(","groups",")",")","{","for","(","Ord<RexWinAggCall>","over",":","Ord",".","zip","(","window",".","e",".","aggCalls",")",")","{","//","Add","the","k-th","over","expression","of\n","//","the","i-th","window","to","the","output","of","the","program",".","String","name","=","fieldNames",".","get","(","over",".","i",")",";","if","(","name","==","null","||","name",".","startsWith","(","\"$\"",")",")","{","name","=","\"w\"","+","window",".","i","+","\"$o\"","+","over",".","i",";","}","fieldList",".","add","(","Pair",".","of","(","name,","over",".","e",".","getType","(",")",")",")",";","flattenedAggCallList",".","add","(","over",".","e",")",";","}","}","final","RelDataType","intermediateRowType","=\n","cluster",".","getTypeFactory","(",")",".","createStructType","(","fieldList",")",";","\n\n","//","The","output","program","is","the","windowed","agg's","program,","combined","with\n","//","the","output","calc","(","if","it","exists",")",".","RexShuttle","shuttle","=\n","new","RexShuttle","(",")","{","@Override","public","RexNode","visitOver","(","RexOver","over",")","{","//","Look","up","the","aggCall","which","this","expr","was","translated","to",".","final","Window",".","RexWinAggCall","aggCall","=\n","aggMap",".","get","(","origToNewOver",".","get","(","over",")",")",";","assert","aggCall","!=","null",";","assert","RelOptUtil",".","eq","(","\"over\",\n","over",".","getType","(",")",",\n","\"aggCall\",\n","aggCall",".","getType","(",")",",\n","Litmus",".","THROW",")",";","\n\n","//","Find","the","index","of","the","aggCall","among","all","partitions","of","all\n","//","groups",".","final","int","aggCallIndex","=\n","flattenedAggCallList",".","indexOf","(","aggCall",")",";","assert","aggCallIndex",">=","0",";","\n\n","//","Replace","expression","with","a","reference","to","the","window","slot",".","final","int","index","=","inputFieldCount","+","aggCallIndex",";","assert","RelOptUtil",".","eq","(","\"over\",\n","over",".","getType","(",")",",\n","\"intermed\",\n","intermediateRowType",".","getFieldList","(",")",".","get","(","index",")",".","getType","(",")",",\n","Litmus",".","THROW",")",";","return","new","RexInputRef","(","index,\n","over",".","getType","(",")",")",";","}","\n\n","@Override","public","RexNode","visitLocalRef","(","RexLocalRef","localRef",")","{","final","int","index","=","localRef",".","getIndex","(",")",";","if","(","index","<","inputFieldCount",")","{","//","Reference","to","input","field",".","return","localRef",";","}","return","new","RexLocalRef","(","flattenedAggCallList",".","size","(",")","+","index,\n","localRef",".","getType","(",")",")",";","}","}",";","\n\n","final","LogicalWindow","window","=\n","LogicalWindow",".","create","(","traitSet,","child,","constants,","intermediateRowType,\n","groups",")",";","\n\n","//","The","order","that","the","\"over\"","calls","occur","in","the","groups","and\n","//","partitions","may","not","match","the","order","in","which","they","occurred","in","the\n","//","original","expression",".","//","Add","a","project","to","permute","them",".","final","List<RexNode>","refToWindow","=\n","toInputRefs","(","shuttle",".","visitList","(","program",".","getExprList","(",")",")",")",";","\n\n","final","List<RexNode>","projectList","=","new","ArrayList<>","(",")",";","for","(","RexLocalRef","inputRef",":","program",".","getProjectList","(",")",")","{","final","int","index","=","inputRef",".","getIndex","(",")",";","final","RexInputRef","ref","=","(","RexInputRef",")","refToWindow",".","get","(","index",")",";","projectList",".","add","(","ref",")",";","}","\n\n","return","relBuilder",".","push","(","window",")",".","project","(","projectList,","outRowType",".","getFieldNames","(",")",")",".","build","(",")",";"],"docstring_tokens":["Creates","a","LogicalWindow","by","parsing","a","RexProgram"],"prompt_tokens":[]}
{"code_tokens":["private","static","ImmutableIntList","getNewColumnMapping","(","Table","underlying,\n","ImmutableIntList","oldColumnMapping,","List<RelDataTypeField>","extendedColumns,\n","RelDataTypeFactory","typeFactory",")","{","final","List<RelDataTypeField>","baseColumns","=\n","underlying",".","getRowType","(","typeFactory",")",".","getFieldList","(",")",";","final","Map<String,","Integer>","nameToIndex","=","mapNameToIndex","(","baseColumns",")",";","\n\n","final","ImmutableList",".","Builder<Integer>","newMapping","=","ImmutableList",".","builder","(",")",";","newMapping",".","addAll","(","oldColumnMapping",")",";","int","newMappedIndex","=","baseColumns",".","size","(",")",";","for","(","RelDataTypeField","extendedColumn",":","extendedColumns",")","{","String","extendedColumnName","=","extendedColumn",".","getName","(",")",";","if","(","nameToIndex",".","containsKey","(","extendedColumnName",")",")","{","//","The","extended","column","duplicates","a","column","in","the","underlying","table",".","//","Map","to","the","index","in","the","underlying","table",".","newMapping",".","add","(","nameToIndex",".","get","(","extendedColumnName",")",")",";","}","else","{","//","The","extended","column","is","not","in","the","underlying","table",".","newMapping",".","add","(","newMappedIndex++",")",";","}","}","return","ImmutableIntList",".","copyOf","(","newMapping",".","build","(",")",")",";"],"docstring_tokens":["Creates","a","mapping","from","the","view","index","to","the","index","in","the","underlying","table"],"prompt_tokens":[]}
{"code_tokens":["@Override","public","boolean","equalsDeep","(","@Nullable","SqlNode","node,","Litmus","litmus",")","{","//","This","is","the","difference","over","super",".","equalsDeep",".","It","skips\n","//","operands[0]","the","declared","name","fo","this","window",".","We","only","want\n","//","to","check","the","window","components",".","return","node","==","this\n","||","node","instanceof","SqlWindow\n","&&","SqlNode",".","equalDeep","(","Util",".","skip","(","getOperandList","(",")",")",",\n","Util",".","skip","(","(","(","SqlWindow",")","node",")",".","getOperandList","(",")",")",",","litmus",")",";"],"docstring_tokens":["Overridden","method","to","specifically","check","only","the","right","subtree","of","a","window","definition"],"prompt_tokens":[]}
{"code_tokens":["public","boolean","isSinglePartition","(",")","{","return","singlePartition",";"],"docstring_tokens":["Check","if","the","filter","restricts","to","a","single","partition"],"prompt_tokens":[]}
{"code_tokens":["public","boolean","isExpanded","(",")","{","return","false",";"],"docstring_tokens":["Whether","this","call","was","created","by","expanding","a","parentheses-free","call","to","what","was","syntactically","an","identifier"],"prompt_tokens":[]}
{"code_tokens":["public","void","describe","(","PrintWriter","pw,","boolean","omitDefaults",")","{","final","Bean","properties","=","getBean","(",")",";","final","String[]","propertyNames","=","properties",".","getPropertyNames","(",")",";","int","count","=","0",";","for","(","String","key",":","propertyNames",")","{","final","Object","value","=","properties",".","get","(","key",")",";","final","Object","defaultValue","=","DEFAULT_BEAN",".","get","(","key",")",";","if","(","Objects",".","equals","(","value,","defaultValue",")",")","{","continue",";","}","if","(","count++",">","0",")","{","pw",".","print","(","\",\"",")",";","}","pw",".","print","(","key","+","\"=\"","+","value",")",";","}"],"docstring_tokens":["Prints","the","property","settings","of","this","pretty-writer","to","a","writer"],"prompt_tokens":[]}
{"code_tokens":["@Pure\n","public","@Nullable","SqlIdentifier","getAlias","(",")","{","return","alias",";"],"docstring_tokens":["Returns","the","alias","for","the","target","table","of","this","MERGE"],"prompt_tokens":[]}
{"code_tokens":["public","void","setPosition","(","int","posLine,","int","posColumn",")","{","this",".","posLine","=","posLine",";","this",".","posColumn","=","posColumn",";","this",".","endPosLine","=","posLine",";","this",".","endPosColumn","=","posColumn",";"],"docstring_tokens":["Sets","a","textual","position","at","which","this","exception","was","detected"],"prompt_tokens":[]}
{"code_tokens":["public","void","setPosition","(","@UnknownInitialization","CalciteContextException","this,\n","int","posLine,\n","int","posColumn,\n","int","endPosLine,\n","int","endPosColumn",")","{","this",".","posLine","=","posLine",";","this",".","posColumn","=","posColumn",";","this",".","endPosLine","=","endPosLine",";","this",".","endPosColumn","=","endPosColumn",";"],"docstring_tokens":["Sets","a","textual","range","at","which","this","exception","was","detected"],"prompt_tokens":[]}
{"code_tokens":["public","static","@NonNull","MockCatalogReaderSimple","create","(","RelDataTypeFactory","typeFactory,","boolean","caseSensitive",")","{","return","new","MockCatalogReaderSimple","(","typeFactory,","caseSensitive",")",".","init","(",")",";"],"docstring_tokens":["Creates","and","initializes","a","MockCatalogReaderSimple"],"prompt_tokens":[]}
{"code_tokens":["public","static","<E>","int","lastWithSymbol","(","String","symbol,","List<E>","rows,","List<String>","symbols,\n","int","startIndex",")","{","for","(","int","i","=","startIndex",";","i",">=","0",";","i--",")","{","if","(","symbol",".","equals","(","symbols",".","get","(","i",")",")",")","{","return","i",";","}","}","return","-1",";"],"docstring_tokens":["Returns","the","row","with","the","highest","index","whose","corresponding","symbol","matches,","null","otherwese"],"prompt_tokens":[]}
{"code_tokens":["public","RexSimplify","withParanoid","(","boolean","paranoid",")","{","return","paranoid","==","this",".","paranoid\n","?","this\n",":","new","RexSimplify","(","rexBuilder,","predicates,","defaultUnknownAs,\n","predicateElimination,","paranoid,","executor",")",";"],"docstring_tokens":["Returns","a","RexSimplify","the","same","as","this","but","which","verifies","that","the","expression","before","and","after","simplification","are","equivalent"],"prompt_tokens":[]}
{"code_tokens":["public","static","RuleSet","ofList","(","RelOptRule",".",".",".","rules",")","{","return","new","ListRuleSet","(","ImmutableList",".","copyOf","(","rules",")",")",";"],"docstring_tokens":["Creates","a","rule","set","with","a","given","array","of","rules"],"prompt_tokens":[]}
{"code_tokens":["public","static","RuleSet","ofList","(","Iterable<?","extends","RelOptRule>","rules",")","{","return","new","ListRuleSet","(","ImmutableList",".","copyOf","(","rules",")",")",";"],"docstring_tokens":["Creates","a","rule","set","with","a","given","collection","of","rules"],"prompt_tokens":[]}
{"code_tokens":["public","static","JdbcSchema","create","(","SchemaPlus","parentSchema,\n","String","name,\n","Map<String,","Object>","operand",")","{","DataSource","dataSource",";","try","{","final","String","dataSourceName","=","(","String",")","operand",".","get","(","\"dataSource\"",")",";","if","(","dataSourceName","!=","null",")","{","dataSource","=\n","AvaticaUtils",".","instantiatePlugin","(","DataSource",".","class,","dataSourceName",")",";","}","else","{","final","String","jdbcUrl","=","(","String",")","requireNonNull","(","operand",".","get","(","\"jdbcUrl\"",")",",","\"jdbcUrl\"",")",";","final","String","jdbcDriver","=","(","String",")","operand",".","get","(","\"jdbcDriver\"",")",";","final","String","jdbcUser","=","(","String",")","operand",".","get","(","\"jdbcUser\"",")",";","final","String","jdbcPassword","=","(","String",")","operand",".","get","(","\"jdbcPassword\"",")",";","dataSource","=","dataSource","(","jdbcUrl,","jdbcDriver,","jdbcUser,","jdbcPassword",")",";","}","}","catch","(","Exception","e",")","{","throw","new","RuntimeException","(","\"Error","while","reading","dataSource\",","e",")",";","}","String","jdbcCatalog","=","(","String",")","operand",".","get","(","\"jdbcCatalog\"",")",";","String","jdbcSchema","=","(","String",")","operand",".","get","(","\"jdbcSchema\"",")",";","String","sqlDialectFactory","=","(","String",")","operand",".","get","(","\"sqlDialectFactory\"",")",";","\n\n","if","(","sqlDialectFactory","==","null","||","sqlDialectFactory",".","isEmpty","(",")",")","{","return","JdbcSchema",".","create","(","parentSchema,","name,","dataSource,","jdbcCatalog,","jdbcSchema",")",";","}","else","{","SqlDialectFactory","factory","=","AvaticaUtils",".","instantiatePlugin","(","SqlDialectFactory",".","class,","sqlDialectFactory",")",";","return","JdbcSchema",".","create","(","parentSchema,","name,","dataSource,","factory,","jdbcCatalog,","jdbcSchema",")",";","}"],"docstring_tokens":["Creates","a","JdbcSchema,","taking","credentials","from","a","map"],"prompt_tokens":[]}
{"code_tokens":["public","static","DataSource","dataSource","(","String","url,","@Nullable","String","driverClassName,\n","@Nullable","String","username,","@Nullable","String","password",")","{","if","(","url",".","startsWith","(","\"jdbc:hsqldb:\"",")",")","{","//","Prevent","hsqldb","from","screwing","up","java",".","util",".","logging",".","System",".","setProperty","(","\"hsqldb",".","reconfig_logging\",","\"false\"",")",";","}","return","JdbcUtils",".","DataSourcePool",".","INSTANCE",".","get","(","url,","driverClassName,","username,\n","password",")",";"],"docstring_tokens":["Creates","a","JDBC","data","source","with","the","given","specification"],"prompt_tokens":[]}
{"code_tokens":["protected","void","onMatch","(",")","{","assert","getRule","(",")",".","matches","(","this",")",";","volcanoPlanner",".","checkCancel","(",")",";","try","{","if","(","volcanoPlanner",".","isRuleExcluded","(","getRule","(",")",")",")","{","LOGGER",".","debug","(","\"Rule","[","{","}","]","not","fired","due","to","exclusion","filter\",","getRule","(",")",")",";","return",";","}","\n\n","if","(","isRuleExcluded","(",")",")","{","LOGGER",".","debug","(","\"Rule","[","{","}","]","not","fired","due","to","exclusion","hint\",","getRule","(",")",")",";","return",";","}","\n\n","for","(","int","i","=","0",";","i","<","rels",".","length",";","i++",")","{","RelNode","rel","=","rels[i]",";","RelSubset","subset","=","volcanoPlanner",".","getSubset","(","rel",")",";","\n\n","if","(","subset","==","null",")","{","LOGGER",".","debug","(","\"Rule","[","{","}","]","not","fired","because","operand","#","{","}","(","{","}",")","has","no","subset\",\n","getRule","(",")",",","i,","rel",")",";","return",";","}","\n\n","if","(","(","subset",".","set",".","equivalentSet","!=","null",")","//","When","rename","RelNode","via","VolcanoPlanner#rename","(","RelNode","rel",")",",\n","//","we","may","remove","rel","from","its","subset:","\"subset",".","set",".","rels",".","remove","(","rel",")","\"",".","//","Skip","rule","match","when","the","rel","has","been","removed","from","set",".","||","(","subset","!=","rel","&&","!subset",".","contains","(","rel",")",")",")","{","LOGGER",".","debug","(","\"Rule","[","{","}","]","not","fired","because","operand","#","{","}","(","{","}",")","belongs","to","obsolete","set\",\n","getRule","(",")",",","i,","rel",")",";","return",";","}","\n\n","if","(","volcanoPlanner",".","prunedNodes",".","contains","(","rel",")",")","{","LOGGER",".","debug","(","\"Rule","[","{","}","]","not","fired","because","operand","#","{","}","(","{","}",")","has","importance=0\",\n","getRule","(",")",",","i,","rel",")",";","return",";","}","}","\n\n","if","(","volcanoPlanner",".","getListener","(",")","!=","null",")","{","RelOptListener",".","RuleAttemptedEvent","event","=\n","new","RelOptListener",".","RuleAttemptedEvent","(","volcanoPlanner,\n","rels[0],\n","this,\n","true",")",";","volcanoPlanner",".","getListener","(",")",".","ruleAttempted","(","event",")",";","}","\n\n","if","(","LOGGER",".","isDebugEnabled","(",")",")","{","this",".","generatedRelList","=","new","ArrayList<>","(",")",";","}","\n\n","volcanoPlanner",".","ruleCallStack",".","push","(","this",")",";","try","{","getRule","(",")",".","onMatch","(","this",")",";","}","finally","{","volcanoPlanner",".","ruleCallStack",".","pop","(",")",";","}","\n\n","if","(","generatedRelList","!=","null",")","{","if","(","generatedRelList",".","isEmpty","(",")",")","{","LOGGER",".","debug","(","\"call#","{","}","generated","0","successors",".","\",","id",")",";","}","else","{","LOGGER",".","debug","(","\"call#","{","}","generated","{","}","successors:","{","}","\",\n","id,","generatedRelList",".","size","(",")",",","generatedRelList",")",";","}","this",".","generatedRelList","=","null",";","}","\n\n","if","(","volcanoPlanner",".","getListener","(",")","!=","null",")","{","RelOptListener",".","RuleAttemptedEvent","event","=\n","new","RelOptListener",".","RuleAttemptedEvent","(","volcanoPlanner,\n","rels[0],\n","this,\n","false",")",";","volcanoPlanner",".","getListener","(",")",".","ruleAttempted","(","event",")",";","}","}","catch","(","Exception","e",")","{","throw","new","RuntimeException","(","\"Error","while","applying","rule","\"","+","getRule","(",")","+","\",","args","\"","+","Arrays",".","toString","(","rels",")",",","e",")",";","}"],"docstring_tokens":["Called","when","all","operands","have","matched"],"prompt_tokens":[]}
{"code_tokens":["void","match","(","RelNode","rel",")","{","assert","getOperand0","(",")",".","matches","(","rel",")",":","\"precondition\"",";","final","int","solve","=","0",";","int","operandOrdinal","=","castNonNull","(","getOperand0","(",")",".","solveOrder",")","[solve]",";","this",".","rels[operandOrdinal]","=","rel",";","matchRecurse","(","solve","+","1",")",";"],"docstring_tokens":["Applies","this","rule,","with","a","given","relational","expression","in","the","first","slot"],"prompt_tokens":[]}
{"code_tokens":["private","void","matchRecurse","(","int","solve",")","{","assert","solve",">","0",";","assert","solve","<=","rule",".","operands",".","size","(",")",";","final","List<RelOptRuleOperand>","operands","=","getRule","(",")",".","operands",";","if","(","solve","==","operands",".","size","(",")",")","{","//","We","have","matched","all","operands",".","Now","ask","the","rule","whether","it\n","//","matches",";","this","gives","the","rule","chance","to","apply","side-conditions",".","//","If","the","side-conditions","are","satisfied,","we","have","a","match",".","if","(","getRule","(",")",".","matches","(","this",")",")","{","onMatch","(",")",";","}","}","else","{","final","int[]","solveOrder","=","castNonNull","(","operand0",".","solveOrder",")",";","final","int","operandOrdinal","=","solveOrder[solve]",";","final","int","previousOperandOrdinal","=","solveOrder[solve","-","1]",";","boolean","ascending","=","operandOrdinal","<","previousOperandOrdinal",";","final","RelOptRuleOperand","previousOperand","=\n","operands",".","get","(","previousOperandOrdinal",")",";","final","RelOptRuleOperand","operand","=","operands",".","get","(","operandOrdinal",")",";","final","RelNode","previous","=","rels[previousOperandOrdinal]",";","\n\n","final","RelOptRuleOperand","parentOperand",";","final","Collection<?","extends","RelNode>","successors",";","if","(","ascending",")","{","assert","previousOperand",".","getParent","(",")","==","operand",";","assert","operand",".","getMatchedClass","(",")","!=","RelSubset",".","class",";","if","(","previousOperand",".","getMatchedClass","(",")","!=","RelSubset",".","class\n","&&","previous","instanceof","RelSubset",")","{","throw","new","RuntimeException","(","\"RelSubset","should","not","match","with","\"\n","+","previousOperand",".","getMatchedClass","(",")",".","getSimpleName","(",")",")",";","}","parentOperand","=","operand",";","final","RelSubset","subset","=","volcanoPlanner",".","getSubsetNonNull","(","previous",")",";","successors","=","subset",".","getParentRels","(",")",";","}","else","{","parentOperand","=","requireNonNull","(","operand",".","getParent","(",")",",\n","(",")","->","\"operand",".","getParent","(",")","for","\"","+","operand",")",";","final","RelNode","parentRel","=","rels[parentOperand",".","ordinalInRule]",";","final","List<RelNode>","inputs","=","parentRel",".","getInputs","(",")",";","//","if","the","child","is","unordered,","then","add","all","rels","in","all","input","subsets","to","the","successors","list\n","//","because","unordered","can","match","child","in","any","ordinal\n","if","(","parentOperand",".","childPolicy","==","RelOptRuleOperandChildPolicy",".","UNORDERED",")","{","if","(","operand",".","getMatchedClass","(",")","==","RelSubset",".","class",")","{","//","Find","all","the","sibling","subsets","that","satisfy","this","subset's","traitSet\n","successors","=","inputs",".","stream","(",")",".","flatMap","(","subset","->","(","(","RelSubset",")","subset",")",".","getSubsetsSatisfyingThis","(",")",")",".","collect","(","Collectors",".","toList","(",")",")",";","}","else","{","List<RelNode>","allRelsInAllSubsets","=","new","ArrayList<>","(",")",";","Set<RelNode>","duplicates","=","new","HashSet<>","(",")",";","for","(","RelNode","input",":","inputs",")","{","if","(","!duplicates",".","add","(","input",")",")","{","//","Ignore","duplicate","subsets\n","continue",";","}","RelSubset","inputSubset","=","(","RelSubset",")","input",";","for","(","RelNode","rel",":","inputSubset",".","getRels","(",")",")","{","if","(","!duplicates",".","add","(","rel",")",")","{","//","Ignore","duplicate","relations\n","continue",";","}","allRelsInAllSubsets",".","add","(","rel",")",";","}","}","successors","=","allRelsInAllSubsets",";","}","}","else","if","(","operand",".","ordinalInParent","<","inputs",".","size","(",")",")","{","//","child","policy","is","not","unordered\n","//","we","need","to","find","the","exact","input","node","based","on","child","operand's","ordinalInParent\n","final","RelSubset","subset","=\n","(","RelSubset",")","inputs",".","get","(","operand",".","ordinalInParent",")",";","if","(","operand",".","getMatchedClass","(",")","==","RelSubset",".","class",")","{","//","Find","all","the","sibling","subsets","that","satisfy","this","subset'straitSet\n","successors","=\n","subset",".","getSubsetsSatisfyingThis","(",")",".","collect","(","Collectors",".","toList","(",")",")",";","}","else","{","successors","=","subset",".","getRelList","(",")",";","}","}","else","{","//","The","operand","expects","parentRel","to","have","a","certain","number\n","//","of","inputs","and","it","does","not",".","successors","=","ImmutableList",".","of","(",")",";","}","}","\n\n","for","(","RelNode","rel",":","successors",")","{","if","(","operand",".","getRule","(",")","instanceof","TransformationRule\n","&&","rel",".","getConvention","(",")","!=","previous",".","getConvention","(",")",")","{","continue",";","}","if","(","!operand",".","matches","(","rel",")",")","{","continue",";","}","if","(","ascending","&&","operand",".","childPolicy","!=","RelOptRuleOperandChildPolicy",".","UNORDERED",")","{","//","We","know","that","the","previous","operand","was","*a*","child","of","its","parent,\n","//","but","now","check","that","it","is","the","*correct*","child",".","if","(","previousOperand",".","ordinalInParent",">=","rel",".","getInputs","(",")",".","size","(",")",")","{","continue",";","}","final","RelSubset","input","=\n","(","RelSubset",")","rel",".","getInput","(","previousOperand",".","ordinalInParent",")",";","if","(","previousOperand",".","getMatchedClass","(",")","==","RelSubset",".","class",")","{","//","The","matched","subset","(","previous",")","should","satisfy","our","input","subset","(","input",")","if","(","input",".","getSubsetsSatisfyingThis","(",")",".","noneMatch","(","previous::equals",")",")","{","continue",";","}","}","else","{","if","(","!input",".","contains","(","previous",")",")","{","continue",";","}","}","}","\n\n","//","Assign","\"childRels\"","if","the","operand","is","UNORDERED",".","switch","(","parentOperand",".","childPolicy",")","{","case","UNORDERED:\n","//","Note:","below","is","ill-defined",".","Suppose","there's","a","union","with","3","inputs,\n","//","and","the","rule","is","written","as","Union",".","class,","unordered","(",".",".",".",")","//","What","should","be","provided","for","the","rest","2","arguments?\n","//","RelSubsets?","Random","relations","from","those","subsets?\n","//","For","now,","Calcite","code","does","not","use","getChildRels,","so","the","bug","is","just","waiting","its","day\n","if","(","ascending",")","{","final","List<RelNode>","inputs","=","Lists",".","newArrayList","(","rel",".","getInputs","(",")",")",";","inputs",".","set","(","previousOperand",".","ordinalInParent,","previous",")",";","setChildRels","(","rel,","inputs",")",";","}","else","{","List<RelNode>","inputs","=","getChildRels","(","previous",")",";","if","(","inputs","==","null",")","{","inputs","=","Lists",".","newArrayList","(","previous",".","getInputs","(",")",")",";","}","inputs",".","set","(","operand",".","ordinalInParent,","rel",")",";","setChildRels","(","previous,","inputs",")",";","}","break",";","default:\n","break",";","}","\n\n","rels[operandOrdinal]","=","rel",";","matchRecurse","(","solve","+","1",")",";","}","}"],"docstring_tokens":["Recursively","matches","operands","above","a","given","solve","order"],"prompt_tokens":[]}
{"code_tokens":["public","static","Object","convertToRowValues","(","List<RelDataTypeField>","relDataTypeFields,","Object","geodeResultObject",")","{","\n\n","Object","values",";","\n\n","if","(","geodeResultObject","instanceof","Struct",")","{","values","=","handleStructEntry","(","relDataTypeFields,","geodeResultObject",")",";","}","else","if","(","geodeResultObject","instanceof","PdxInstance",")","{","values","=","handlePdxInstanceEntry","(","relDataTypeFields,","geodeResultObject",")",";","}","else","{","values","=","handleJavaObjectEntry","(","relDataTypeFields,","geodeResultObject",")",";","}","\n\n","return","values",";"],"docstring_tokens":["Converts","a","Geode","object","into","a","Row","tuple"],"prompt_tokens":[]}
{"code_tokens":["public","static","RelDataType","autodetectRelTypeFromRegion","(","Region<?,","?>","region",")","{","Objects",".","requireNonNull","(","region,","\"region\"",")",";","\n\n","//","try","to","detect","type","using","value","constraints","(","if","they","exists",")","final","Class<?>","constraint","=","region",".","getAttributes","(",")",".","getValueConstraint","(",")",";","if","(","constraint","!=","null","&&","!PdxInstance",".","class",".","isAssignableFrom","(","constraint",")",")","{","return","new","JavaTypeFactoryExtImpl","(",")",".","createStructType","(","constraint",")",";","}","\n\n","final","Iterator<?>","iter",";","if","(","region",".","getAttributes","(",")",".","getPoolName","(",")","==","null",")","{","//","means","current","cache","is","server","(","not","ClientCache",")","iter","=","region",".","keySet","(",")",".","iterator","(",")",";","}","else","{","//","for","ClientCache\n","iter","=","region",".","keySetOnServer","(",")",".","iterator","(",")",";","}","\n\n","if","(","!iter",".","hasNext","(",")",")","{","String","message","=","String",".","format","(","Locale",".","ROOT,","\"Region","%s","is","empty,","can't","\"\n","+","\"autodetect","type","(","s",")","\",","region",".","getName","(",")",")",";","throw","new","IllegalStateException","(","message",")",";","}","\n\n","final","Object","entry","=","region",".","get","(","iter",".","next","(",")",")",";","return","createRelDataType","(","entry",")",";"],"docstring_tokens":["Extract","the","first","entity","of","each","Regions","and","use","it","to","build","a","table","types"],"prompt_tokens":[]}
{"code_tokens":["private","static","RelNode","getInputWithSameRowType","(","Aggregate","bottomAggRel",")","{","if","(","RelOptUtil",".","areRowTypesEqual","(","bottomAggRel",".","getRowType","(",")",",\n","bottomAggRel",".","getInput","(","0",")",".","getRowType","(",")",",\n","false",")",")","{","return","bottomAggRel",".","getInput","(","0",")",";","}","else","{","return","RelOptUtil",".","createProject","(","bottomAggRel",".","getInput","(",")",",\n","bottomAggRel",".","getGroupSet","(",")",".","asList","(",")",")",";","}"],"docstring_tokens":["Returns","an","input","with","the","same","row","type","with","the","input","Aggregate,","create","a","Project","node","if","needed"],"prompt_tokens":[]}
{"code_tokens":["public","static","SimpleDateFormat","getDateFormatter","(","String","format,","TimeZone","timeZone",")","{","final","SimpleDateFormat","dateFormatter","=","new","SimpleDateFormat","(","format,","Locale",".","ROOT",")",";","dateFormatter",".","setTimeZone","(","timeZone",")",";","return","dateFormatter",";"],"docstring_tokens":["Create","a","SimpleDateFormat","with","format","string","and","time","zone"],"prompt_tokens":[]}
{"code_tokens":["public","static","RelMetadataQuery","instance","(",")","{","return","new","RelMetadataQuery","(",")",";"],"docstring_tokens":["Returns","an","instance","of","RelMetadataQuery"],"prompt_tokens":[]}
{"code_tokens":["public","@Nullable","Set<RexNode>","getExpressionLineage","(","RelNode","rel,","RexNode","expression",")","{","for","(",";",";",")","{","try","{","return","expressionLineageHandler",".","getExpressionLineage","(","rel,","this,","expression",")",";","}","catch","(","MetadataHandlerProvider",".","NoHandler","e",")","{","expressionLineageHandler","=","revise","(","BuiltInMetadata",".","ExpressionLineage",".","Handler",".","class",")",";","}","}"],"docstring_tokens":["Determines","the","origin","of","a","column"],"prompt_tokens":[]}
{"code_tokens":["static","@Nullable","SqlDialect","simple","(","SqlDialect",".","DatabaseProduct","databaseProduct",")","{","switch","(","databaseProduct",")","{","case","ACCESS:\n","return","AccessSqlDialect",".","DEFAULT",";","case","BIG_QUERY:\n","return","BigQuerySqlDialect",".","DEFAULT",";","case","CALCITE:\n","return","CalciteSqlDialect",".","DEFAULT",";","case","CLICKHOUSE:\n","return","ClickHouseSqlDialect",".","DEFAULT",";","case","DB2:\n","return","Db2SqlDialect",".","DEFAULT",";","case","DERBY:\n","return","DerbySqlDialect",".","DEFAULT",";","case","EXASOL:\n","return","ExasolSqlDialect",".","DEFAULT",";","case","FIREBIRD:\n","return","FirebirdSqlDialect",".","DEFAULT",";","case","H2:\n","return","H2SqlDialect",".","DEFAULT",";","case","HIVE:\n","return","HiveSqlDialect",".","DEFAULT",";","case","HSQLDB:\n","return","HsqldbSqlDialect",".","DEFAULT",";","case","INFOBRIGHT:\n","return","InfobrightSqlDialect",".","DEFAULT",";","case","INFORMIX:\n","return","InformixSqlDialect",".","DEFAULT",";","case","INGRES:\n","return","IngresSqlDialect",".","DEFAULT",";","case","INTERBASE:\n","return","InterbaseSqlDialect",".","DEFAULT",";","case","JETHRO:\n","throw","new","RuntimeException","(","\"Jethro","does","not","support","simple","creation\"",")",";","case","LUCIDDB:\n","return","LucidDbSqlDialect",".","DEFAULT",";","case","MSSQL:\n","return","MssqlSqlDialect",".","DEFAULT",";","case","MYSQL:\n","return","MysqlSqlDialect",".","DEFAULT",";","case","NEOVIEW:\n","return","NeoviewSqlDialect",".","DEFAULT",";","case","NETEZZA:\n","return","NetezzaSqlDialect",".","DEFAULT",";","case","ORACLE:\n","return","OracleSqlDialect",".","DEFAULT",";","case","PARACCEL:\n","return","ParaccelSqlDialect",".","DEFAULT",";","case","PHOENIX:\n","return","PhoenixSqlDialect",".","DEFAULT",";","case","POSTGRESQL:\n","return","PostgresqlSqlDialect",".","DEFAULT",";","case","PRESTO:\n","return","PrestoSqlDialect",".","DEFAULT",";","case","REDSHIFT:\n","return","RedshiftSqlDialect",".","DEFAULT",";","case","SNOWFLAKE:\n","return","SnowflakeSqlDialect",".","DEFAULT",";","case","SPARK:\n","return","SparkSqlDialect",".","DEFAULT",";","case","SYBASE:\n","return","SybaseSqlDialect",".","DEFAULT",";","case","TERADATA:\n","return","TeradataSqlDialect",".","DEFAULT",";","case","VERTICA:\n","return","VerticaSqlDialect",".","DEFAULT",";","case","SQLSTREAM:\n","case","UNKNOWN:\n","default:\n","return","null",";","}"],"docstring_tokens":["Returns","a","basic","dialect","for","a","given","product,","or","null","if","none","is","known"],"prompt_tokens":[]}
{"code_tokens":["@Deprecated","//","to","be","removed","before","2",".","0\n","public","static","int","getCorrelOrdinal","(","String","correlName",")","{","assert","correlName",".","startsWith","(","CORREL_PREFIX",")",";","return","Integer",".","parseInt","(","correlName",".","substring","(","CORREL_PREFIX",".","length","(",")",")",")",";"],"docstring_tokens":["Converts","a","correlating","variable","name","into","an","ordinal,","unique","within","the","query"],"prompt_tokens":[]}
{"code_tokens":["private","static","Config","getConfig","(","Context","context",")","{","final","Config","config","=\n","context",".","maybeUnwrap","(","Config",".","class",")",".","orElse","(","Config",".","DEFAULT",")",";","boolean","simplify","=","Hook",".","REL_BUILDER_SIMPLIFY",".","get","(","config",".","simplify","(",")",")",";","return","config",".","withSimplify","(","simplify",")",";"],"docstring_tokens":["Derives","the","Config","to","be","used","for","this","RelBuilder"],"prompt_tokens":[]}
{"code_tokens":["public","RelBuilder","transform","(","UnaryOperator<Config>","transform",")","{","final","Context","context","=\n","Contexts",".","of","(","struct,","transform",".","apply","(","config",")",")",";","return","new","RelBuilder","(","context,","cluster,","relOptSchema",")",";"],"docstring_tokens":["Creates","a","copy","of","this","RelBuilder,","with","the","same","state","as","this,","applying","a","transform","to","the","config"],"prompt_tokens":[]}
{"code_tokens":["@Override","public","String","toString","(",")","{","return","stack",".","stream","(",")",".","map","(","frame","->","RelOptUtil",".","toString","(","frame",".","rel",")",")",".","collect","(","Collectors",".","joining","(","\"\"",")",")",";"],"docstring_tokens":["Converts","this","RelBuilder","to","a","string"],"prompt_tokens":[]}
{"code_tokens":["public","RelBuilder","adoptConvention","(","Convention","convention",")","{","this",".","struct","=","convention",".","getRelFactories","(",")",";","return","this",";"],"docstring_tokens":["Returns","new","RelBuilder","that","adopts","the","convention","provided"],"prompt_tokens":[]}
{"code_tokens":["public","static","RelBuilderFactory","proto","(","final","Context","context",")","{","return","(","cluster,","schema",")","->","new","RelBuilder","(","context,","cluster,","schema",")",";"],"docstring_tokens":["Creates","a","RelBuilderFactory,","a","partially-created","RelBuilder"],"prompt_tokens":[]}
{"code_tokens":["public","static","RelBuilderFactory","proto","(","Object",".",".",".","factories",")","{","return","proto","(","Contexts",".","of","(","factories",")",")",";"],"docstring_tokens":["Creates","a","RelBuilderFactory","that","uses","a","given","set","of","factories"],"prompt_tokens":[]}
{"code_tokens":["private","void","replaceTop","(","RelNode","node",")","{","final","Frame","frame","=","stack",".","pop","(",")",";","stack",".","push","(","new","Frame","(","node,","frame",".","fields",")",")",";"],"docstring_tokens":["Adds","a","rel","node","to","the","top","of","the","stack","while","preserving","the","field","names","and","aliases"],"prompt_tokens":[]}
{"code_tokens":["public","RelNode","build","(",")","{","return","stack",".","pop","(",")",".","rel",";"],"docstring_tokens":["Returns","the","final","relational","expression"],"prompt_tokens":[]}
{"code_tokens":["public","RelNode","peek","(",")","{","return","castNonNull","(","peek_","(",")",")",".","rel",";"],"docstring_tokens":["Returns","the","relational","expression","at","the","top","of","the","stack,","but","does","not","remove","it"],"prompt_tokens":[]}
{"code_tokens":["public","RelBuilder","variable","(","Holder<RexCorrelVariable>","v",")","{","v",".","set","(","(","RexCorrelVariable",")","getRexBuilder","(",")",".","makeCorrel","(","peek","(",")",".","getRowType","(",")",",\n","cluster",".","createCorrel","(",")",")",")",";","return","this",";"],"docstring_tokens":["Creates","a","correlation","variable","for","the","current","input,","and","writes","it","into","a","Holder"],"prompt_tokens":[]}
{"code_tokens":["public","RexInputRef","field","(","String","fieldName",")","{","return","field","(","1,","0,","fieldName",")",";"],"docstring_tokens":["Creates","a","reference","to","a","field","by","name"],"prompt_tokens":[]}
{"code_tokens":["public","RexInputRef","field","(","int","fieldOrdinal",")","{","return","(","RexInputRef",")","field","(","1,","0,","fieldOrdinal,","false",")",";"],"docstring_tokens":["Creates","a","reference","to","an","input","field","by","ordinal"],"prompt_tokens":[]}
{"code_tokens":["public","RexNode","field","(","String","alias,","String","fieldName",")","{","return","field","(","1,","alias,","fieldName",")",";"],"docstring_tokens":["Creates","a","reference","to","a","field","of","the","current","record","which","originated","in","a","relation","with","a","given","alias"],"prompt_tokens":[]}
{"code_tokens":["public","ImmutableList<RexNode>","fields","(",")","{","return","fields","(","1,","0",")",";"],"docstring_tokens":["Returns","references","to","the","fields","of","the","top","input"],"prompt_tokens":[]}
{"code_tokens":["public","RexNode","dot","(","RexNode","node,","String","fieldName",")","{","final","RexBuilder","builder","=","cluster",".","getRexBuilder","(",")",";","return","builder",".","makeFieldAccess","(","node,","fieldName,","true",")",";"],"docstring_tokens":["Creates","an","access","to","a","field","by","name"],"prompt_tokens":[]}
{"code_tokens":["public","RexNode","dot","(","RexNode","node,","int","fieldOrdinal",")","{","final","RexBuilder","builder","=","cluster",".","getRexBuilder","(",")",";","return","builder",".","makeFieldAccess","(","node,","fieldOrdinal",")",";"],"docstring_tokens":["Creates","an","access","to","a","field","by","ordinal"],"prompt_tokens":[]}
{"code_tokens":["public","RexNode","call","(","SqlOperator","operator,","RexNode",".",".",".","operands",")","{","return","call","(","operator,","ImmutableList",".","copyOf","(","operands",")",")",";"],"docstring_tokens":["Creates","a","call","to","a","scalar","operator"],"prompt_tokens":[]}
{"code_tokens":["public","RexNode","cast","(","RexNode","expr,","SqlTypeName","typeName",")","{","final","RelDataType","type","=","cluster",".","getTypeFactory","(",")",".","createSqlType","(","typeName",")",";","return","cluster",".","getRexBuilder","(",")",".","makeCast","(","type,","expr",")",";"],"docstring_tokens":["Creates","an","expression","that","casts","an","expression","to","a","given","type"],"prompt_tokens":[]}
{"code_tokens":["public","RexNode","cast","(","RexNode","expr,","SqlTypeName","typeName,","int","precision",")","{","final","RelDataType","type","=\n","cluster",".","getTypeFactory","(",")",".","createSqlType","(","typeName,","precision",")",";","return","cluster",".","getRexBuilder","(",")",".","makeCast","(","type,","expr",")",";"],"docstring_tokens":["Creates","an","expression","that","casts","an","expression","to","a","type","with","a","given","name","and","precision","or","length"],"prompt_tokens":[]}
{"code_tokens":["public","RexNode","cast","(","RexNode","expr,","SqlTypeName","typeName,","int","precision,\n","int","scale",")","{","final","RelDataType","type","=\n","cluster",".","getTypeFactory","(",")",".","createSqlType","(","typeName,","precision,","scale",")",";","return","cluster",".","getRexBuilder","(",")",".","makeCast","(","type,","expr",")",";"],"docstring_tokens":["Creates","an","expression","that","casts","an","expression","to","a","type","with","a","given","name,","precision","and","scale"],"prompt_tokens":[]}
{"code_tokens":["public","RexNode","desc","(","RexNode","node",")","{","return","call","(","SqlStdOperatorTable",".","DESC,","node",")",";"],"docstring_tokens":["Converts","a","sort","expression","to","descending"],"prompt_tokens":[]}
{"code_tokens":["public","RexNode","nullsLast","(","RexNode","node",")","{","return","call","(","SqlStdOperatorTable",".","NULLS_LAST,","node",")",";"],"docstring_tokens":["Converts","a","sort","expression","to","nulls","last"],"prompt_tokens":[]}
{"code_tokens":["public","RexNode","nullsFirst","(","RexNode","node",")","{","return","call","(","SqlStdOperatorTable",".","NULLS_FIRST,","node",")",";"],"docstring_tokens":["Converts","a","sort","expression","to","nulls","first"],"prompt_tokens":[]}
{"code_tokens":["public","GroupKey","groupKey","(",")","{","return","groupKey","(","ImmutableList",".","of","(",")",")",";"],"docstring_tokens":["Creates","an","empty","group","key"],"prompt_tokens":[]}
{"code_tokens":["public","GroupKey","groupKey","(","String",".",".",".","fieldNames",")","{","return","groupKey","(","fields","(","ImmutableList",".","copyOf","(","fieldNames",")",")",")",";"],"docstring_tokens":["Creates","a","group","key","of","fields","identified","by","name"],"prompt_tokens":[]}
{"code_tokens":["public","AggCall","aggregateCall","(","AggregateCall","a",")","{","return","aggregateCall","(","a",".","getAggregation","(",")",",","a",".","isDistinct","(",")",",","a",".","isApproximate","(",")",",\n","a",".","ignoreNulls","(",")",",","a",".","filterArg","<","0","?","null",":","field","(","a",".","filterArg",")",",\n","a",".","distinctKeys","==","null","?","null",":","fields","(","a",".","distinctKeys",")",",\n","fields","(","a",".","collation",")",",","a",".","name,","fields","(","a",".","getArgList","(",")",")",")",";"],"docstring_tokens":["Creates","a","call","to","an","aggregate","function","as","a","copy","of","an","AggregateCall"],"prompt_tokens":[]}
{"code_tokens":["public","AggCall","aggregateCall","(","AggregateCall","a,","Mapping","mapping",")","{","return","aggregateCall","(","a",".","getAggregation","(",")",",","a",".","isDistinct","(",")",",","a",".","isApproximate","(",")",",\n","a",".","ignoreNulls","(",")",",\n","a",".","filterArg","<","0","?","null",":","field","(","Mappings",".","apply","(","mapping,","a",".","filterArg",")",")",",\n","a",".","distinctKeys","==","null","?","null\n",":","fields","(","Mappings",".","apply","(","mapping,","a",".","distinctKeys",")",")",",\n","fields","(","RexUtil",".","apply","(","mapping,","a",".","collation",")",")",",","a",".","name,\n","fields","(","Mappings",".","apply2","(","mapping,","a",".","getArgList","(",")",")",")",")",";"],"docstring_tokens":["Creates","a","call","to","an","aggregate","function","as","a","copy","of","an","AggregateCall,","applying","a","mapping"],"prompt_tokens":[]}
{"code_tokens":["public","AggCall","count","(","RexNode",".",".",".","operands",")","{","return","count","(","false,","null,","operands",")",";"],"docstring_tokens":["Creates","a","call","to","the","COUNT","aggregate","function"],"prompt_tokens":[]}
{"code_tokens":["public","AggCall","count","(","boolean","distinct,","@Nullable","String","alias,","RexNode",".",".",".","operands",")","{","return","aggregateCall","(","SqlStdOperatorTable",".","COUNT,","distinct,","false,","false,","null,\n","null,","ImmutableList",".","of","(",")",",","alias,","ImmutableList",".","copyOf","(","operands",")",")",";"],"docstring_tokens":["Creates","a","call","to","the","COUNT","aggregate","function,","optionally","distinct","and","with","an","alias"],"prompt_tokens":[]}
{"code_tokens":["public","AggCall","sum","(","RexNode","operand",")","{","return","sum","(","false,","null,","operand",")",";"],"docstring_tokens":["Creates","a","call","to","the","SUM","aggregate","function"],"prompt_tokens":[]}
{"code_tokens":["public","AggCall","sum","(","boolean","distinct,","@Nullable","String","alias,","RexNode","operand",")","{","return","aggregateCall","(","SqlStdOperatorTable",".","SUM,","distinct,","false,","false,","null,\n","null,","ImmutableList",".","of","(",")",",","alias,","ImmutableList",".","of","(","operand",")",")",";"],"docstring_tokens":["Creates","a","call","to","the","SUM","aggregate","function,","optionally","distinct","and","with","an","alias"],"prompt_tokens":[]}
{"code_tokens":["public","AggCall","avg","(","boolean","distinct,","@Nullable","String","alias,","RexNode","operand",")","{","return","aggregateCall","(","SqlStdOperatorTable",".","AVG,","distinct,","false,","false,","null,\n","null,","ImmutableList",".","of","(",")",",","alias,","ImmutableList",".","of","(","operand",")",")",";"],"docstring_tokens":["Creates","a","call","to","the","AVG","aggregate","function,","optionally","distinct","and","with","an","alias"],"prompt_tokens":[]}
{"code_tokens":["public","AggCall","min","(","RexNode","operand",")","{","return","min","(","null,","operand",")",";"],"docstring_tokens":["Creates","a","call","to","the","MIN","aggregate","function"],"prompt_tokens":[]}
{"code_tokens":["public","AggCall","min","(","@Nullable","String","alias,","RexNode","operand",")","{","return","aggregateCall","(","SqlStdOperatorTable",".","MIN,","false,","false,","false,","null,\n","null,","ImmutableList",".","of","(",")",",","alias,","ImmutableList",".","of","(","operand",")",")",";"],"docstring_tokens":["Creates","a","call","to","the","MIN","aggregate","function,","optionally","with","an","alias"],"prompt_tokens":[]}
{"code_tokens":["public","AggCall","max","(","RexNode","operand",")","{","return","max","(","null,","operand",")",";"],"docstring_tokens":["Creates","a","call","to","the","MAX","aggregate","function,","optionally","with","an","alias"],"prompt_tokens":[]}
{"code_tokens":["public","AggCall","max","(","@Nullable","String","alias,","RexNode","operand",")","{","return","aggregateCall","(","SqlStdOperatorTable",".","MAX,","false,","false,","false,","null,\n","null,","ImmutableList",".","of","(",")",",","alias,","ImmutableList",".","of","(","operand",")",")",";"],"docstring_tokens":["Creates","a","call","to","the","MAX","aggregate","function"],"prompt_tokens":[]}
{"code_tokens":["public","RexNode","cursor","(","int","inputCount,","int","ordinal",")","{","if","(","inputCount","<=","ordinal","||","ordinal","<","0",")","{","throw","new","IllegalArgumentException","(","\"bad","input","count","or","ordinal\"",")",";","}","//","Refer","to","the","\"ordinal\"th","input","as","if","it","were","a","field\n","//","(","because","that's","how","things","are","laid","out","inside","a","TableFunctionScan",")","final","RelNode","input","=","peek","(","inputCount,","ordinal",")",";","return","call","(","SqlStdOperatorTable",".","CURSOR,\n","getRexBuilder","(",")",".","makeInputRef","(","input",".","getRowType","(",")",",","ordinal",")",")",";"],"docstring_tokens":["Creates","a","RexCall","to","the","CURSOR","function","by","ordinal"],"prompt_tokens":[]}
{"code_tokens":["public","RelBuilder","project","(","RexNode",".",".",".","nodes",")","{","return","project","(","ImmutableList",".","copyOf","(","nodes",")",")",";"],"docstring_tokens":["Creates","a","Project","of","the","given","expressions"],"prompt_tokens":[]}
{"code_tokens":["public","RelBuilder","project","(","Iterable<?","extends","RexNode>","nodes,\n","Iterable<?","extends","@Nullable","String>","fieldNames",")","{","return","project","(","nodes,","fieldNames,","false",")",";"],"docstring_tokens":["Creates","a","Project","of","the","given","list","of","expressions","and","field","names"],"prompt_tokens":[]}
{"code_tokens":["public","RelBuilder","distinct","(",")","{","return","aggregate","(","groupKey","(","fields","(",")",")",")",";"],"docstring_tokens":["Creates","an","Aggregate","that","makes","the","relational","expression","distinct","on","all","fields"],"prompt_tokens":[]}
{"code_tokens":["public","RelBuilder","aggregate","(","GroupKey","groupKey,","AggCall",".",".",".","aggCalls",")","{","return","aggregate","(","groupKey,","ImmutableList",".","copyOf","(","aggCalls",")",")",";"],"docstring_tokens":["Creates","an","Aggregate","with","an","array","of","calls"],"prompt_tokens":[]}
{"code_tokens":["public","RelBuilder","aggregate","(","GroupKey","groupKey,","List<AggregateCall>","aggregateCalls",")","{","return","aggregate","(","groupKey,\n","aggregateCalls",".","stream","(",")",".","map","(","aggregateCall","->\n","new","AggCallImpl2","(","aggregateCall,\n","aggregateCall",".","getArgList","(",")",".","stream","(",")",".","map","(","this::field",")",".","collect","(","Util",".","toImmutableList","(",")",")",")",")",".","collect","(","Collectors",".","toList","(",")",")",")",";"],"docstring_tokens":["Creates","an","Aggregate","with","an","array","of","AggregateCalls"],"prompt_tokens":[]}
{"code_tokens":["public","RelBuilder","aggregate","(","GroupKey","groupKey,","Iterable<AggCall>","aggCalls",")","{","final","Registrar","registrar","=\n","new","Registrar","(","fields","(",")",",","peek","(",")",".","getRowType","(",")",".","getFieldNames","(",")",")",";","final","GroupKeyImpl","groupKey_","=","(","GroupKeyImpl",")","groupKey",";","ImmutableBitSet","groupSet","=\n","ImmutableBitSet",".","of","(","registrar",".","registerExpressions","(","groupKey_",".","nodes",")",")",";","label:\n","if","(","Iterables",".","isEmpty","(","aggCalls",")",")","{","final","RelMetadataQuery","mq","=","peek","(",")",".","getCluster","(",")",".","getMetadataQuery","(",")",";","if","(","groupSet",".","isEmpty","(",")",")","{","final","Double","minRowCount","=","mq",".","getMinRowCount","(","peek","(",")",")",";","if","(","minRowCount","==","null","||","minRowCount","<","1D",")","{","//","We","can't","remove","\"GROUP","BY","(",")","\"","if","there's","a","chance","the","rel","could","be\n","//","empty",".","break","label",";","}","}","if","(","registrar",".","extraNodes",".","size","(",")","==","fields","(",")",".","size","(",")",")","{","final","Boolean","unique","=","mq",".","areColumnsUnique","(","peek","(",")",",","groupSet",")",";","if","(","unique","!=","null","&&","unique\n","&&","!config",".","aggregateUnique","(",")","&&","groupKey_",".","isSimple","(",")",")","{","//","Rel","is","already","unique",".","return","project","(","fields","(","groupSet",")",")",";","}","}","final","Double","maxRowCount","=","mq",".","getMaxRowCount","(","peek","(",")",")",";","if","(","maxRowCount","!=","null","&&","maxRowCount","<=","1D\n","&&","!config",".","aggregateUnique","(",")","&&","groupKey_",".","isSimple","(",")",")","{","//","If","there","is","at","most","one","row,","rel","is","already","unique",".","return","project","(","fields","(","groupSet",")",")",";","}","}","\n\n","ImmutableList<ImmutableBitSet>","groupSets",";","if","(","groupKey_",".","nodeLists","!=","null",")","{","final","int","sizeBefore","=","registrar",".","extraNodes",".","size","(",")",";","final","List<ImmutableBitSet>","groupSetList","=","new","ArrayList<>","(",")",";","for","(","ImmutableList<RexNode>","nodeList",":","groupKey_",".","nodeLists",")","{","final","ImmutableBitSet","groupSet2","=\n","ImmutableBitSet",".","of","(","registrar",".","registerExpressions","(","nodeList",")",")",";","if","(","!groupSet",".","contains","(","groupSet2",")",")","{","throw","new","IllegalArgumentException","(","\"group","set","element","\"","+","nodeList\n","+","\"","must","be","a","subset","of","group","key\"",")",";","}","groupSetList",".","add","(","groupSet2",")",";","}","final","ImmutableSortedMultiset<ImmutableBitSet>","groupSetMultiset","=\n","ImmutableSortedMultiset",".","copyOf","(","ImmutableBitSet",".","COMPARATOR,\n","groupSetList",")",";","if","(","Iterables",".","any","(","aggCalls,","RelBuilder::isGroupId",")","||","!ImmutableBitSet",".","ORDERING",".","isStrictlyOrdered","(","groupSetMultiset",")",")","{","return","rewriteAggregateWithDuplicateGroupSets","(","groupSet,","groupSetMultiset,\n","ImmutableList",".","copyOf","(","aggCalls",")",")",";","}","groupSets","=","ImmutableList",".","copyOf","(","groupSetMultiset",".","elementSet","(",")",")",";","if","(","registrar",".","extraNodes",".","size","(",")",">","sizeBefore",")","{","throw","new","IllegalArgumentException","(","\"group","sets","contained","expressions","\"\n","+","\"not","in","group","key:","\"\n","+","Util",".","skip","(","registrar",".","extraNodes,","sizeBefore",")",")",";","}","}","else","{","groupSets","=","ImmutableList",".","of","(","groupSet",")",";","}","\n\n","for","(","AggCall","aggCall",":","aggCalls",")","{","(","(","AggCallPlus",")","aggCall",")",".","register","(","registrar",")",";","}","project","(","registrar",".","extraNodes",")",";","rename","(","registrar",".","names",")",";","final","Frame","frame","=","stack",".","pop","(",")",";","RelNode","r","=","frame",".","rel",";","final","List<AggregateCall>","aggregateCalls","=","new","ArrayList<>","(",")",";","for","(","AggCall","aggCall",":","aggCalls",")","{","aggregateCalls",".","add","(","(","(","AggCallPlus",")","aggCall",")",".","aggregateCall","(","registrar,","groupSet,","r",")",")",";","}","\n\n","assert","ImmutableBitSet",".","ORDERING",".","isStrictlyOrdered","(","groupSets",")",":","groupSets",";","for","(","ImmutableBitSet","set",":","groupSets",")","{","assert","groupSet",".","contains","(","set",")",";","}","\n\n","List<Field>","inFields","=","frame",".","fields",";","if","(","config",".","pruneInputOfAggregate","(",")","&&","r","instanceof","Project",")","{","final","Set<Integer>","fieldsUsed","=\n","RelOptUtil",".","getAllFields2","(","groupSet,","aggregateCalls",")",";","//","Some","parts","of","the","system","can't","handle","rows","with","zero","fields,","so\n","//","pretend","that","one","field","is","used",".","if","(","fieldsUsed",".","isEmpty","(",")",")","{","r","=","(","(","Project",")","r",")",".","getInput","(",")",";","}","else","if","(","fieldsUsed",".","size","(",")","<","r",".","getRowType","(",")",".","getFieldCount","(",")",")","{","//","Some","fields","are","computed","but","not","used",".","Prune","them",".","final","Map<Integer,","Integer>","map","=","new","HashMap<>","(",")",";","for","(","int","source",":","fieldsUsed",")","{","map",".","put","(","source,","map",".","size","(",")",")",";","}","\n\n","groupSet","=","groupSet",".","permute","(","map",")",";","groupSets","=\n","ImmutableBitSet",".","ORDERING",".","immutableSortedCopy","(","ImmutableBitSet",".","permute","(","groupSets,","map",")",")",";","\n\n","final","Mappings",".","TargetMapping","targetMapping","=\n","Mappings",".","target","(","map,","r",".","getRowType","(",")",".","getFieldCount","(",")",",\n","fieldsUsed",".","size","(",")",")",";","final","List<AggregateCall>","oldAggregateCalls","=\n","new","ArrayList<>","(","aggregateCalls",")",";","aggregateCalls",".","clear","(",")",";","for","(","AggregateCall","aggregateCall",":","oldAggregateCalls",")","{","aggregateCalls",".","add","(","aggregateCall",".","transform","(","targetMapping",")",")",";","}","inFields","=","Mappings",".","permute","(","inFields,","targetMapping",".","inverse","(",")",")",";","\n\n","final","Project","project","=","(","Project",")","r",";","final","List<RexNode>","newProjects","=","new","ArrayList<>","(",")",";","final","RelDataTypeFactory",".","Builder","builder","=\n","cluster",".","getTypeFactory","(",")",".","builder","(",")",";","for","(","int","i",":","fieldsUsed",")","{","newProjects",".","add","(","project",".","getProjects","(",")",".","get","(","i",")",")",";","builder",".","add","(","project",".","getRowType","(",")",".","getFieldList","(",")",".","get","(","i",")",")",";","}","r","=","project",".","copy","(","cluster",".","traitSet","(",")",",","project",".","getInput","(",")",",","newProjects,\n","builder",".","build","(",")",")",";","}","}","\n\n","if","(","!config",".","dedupAggregateCalls","(",")","||","Util",".","isDistinct","(","aggregateCalls",")",")","{","return","aggregate_","(","groupSet,","groupSets,","r,","aggregateCalls,\n","registrar",".","extraNodes,","inFields",")",";","}","\n\n","//","There","are","duplicate","aggregate","calls",".","Rebuild","the","list","to","eliminate\n","//","duplicates,","then","add","a","Project",".","final","Set<AggregateCall>","callSet","=","new","HashSet<>","(",")",";","final","List<Pair<Integer,","@Nullable","String>>","projects","=","new","ArrayList<>","(",")",";","Util",".","range","(","groupSet",".","cardinality","(",")",")",".","forEach","(","i","->","projects",".","add","(","Pair",".","of","(","i,","null",")",")",")",";","final","List<AggregateCall>","distinctAggregateCalls","=","new","ArrayList<>","(",")",";","for","(","AggregateCall","aggregateCall",":","aggregateCalls",")","{","final","int","i",";","if","(","callSet",".","add","(","aggregateCall",")",")","{","i","=","distinctAggregateCalls",".","size","(",")",";","distinctAggregateCalls",".","add","(","aggregateCall",")",";","}","else","{","i","=","distinctAggregateCalls",".","indexOf","(","aggregateCall",")",";","assert","i",">=","0",";","}","projects",".","add","(","Pair",".","of","(","groupSet",".","cardinality","(",")","+","i,","aggregateCall",".","name",")",")",";","}","aggregate_","(","groupSet,","groupSets,","r,","distinctAggregateCalls,\n","registrar",".","extraNodes,","inFields",")",";","final","List<RexNode>","fields","=","projects",".","stream","(",")",".","map","(","p","->","p",".","right","==","null","?","field","(","p",".","left",")",":","alias","(","field","(","p",".","left",")",",","p",".","right",")",")",".","collect","(","Collectors",".","toList","(",")",")",";","return","project","(","fields",")",";"],"docstring_tokens":["Creates","an","Aggregate","with","multiple","calls"],"prompt_tokens":[]}
{"code_tokens":["public","RelBuilder","union","(","boolean","all",")","{","return","union","(","all,","2",")",";"],"docstring_tokens":["Creates","a","Union","of","the","two","most","recent","relational","expressions","on","the","stack"],"prompt_tokens":[]}
{"code_tokens":["@Experimental\n","public","RelBuilder","transientScan","(","String","tableName,","RelDataType","rowType",")","{","TransientTable","transientTable","=","new","ListTransientTable","(","tableName,","rowType",")",";","requireNonNull","(","relOptSchema,","\"relOptSchema\"",")",";","RelOptTable","relOptTable","=","RelOptTableImpl",".","create","(","relOptSchema,\n","rowType,\n","transientTable,\n","ImmutableList",".","of","(","tableName",")",")",";","RelNode","scan","=\n","struct",".","scanFactory",".","createScan","(","ViewExpanders",".","toRelContext","(","viewExpander,","cluster",")",",\n","relOptTable",")",";","push","(","scan",")",";","rename","(","rowType",".","getFieldNames","(",")",")",";","return","this",";"],"docstring_tokens":["Creates","a","TableScan","on","a","TransientTable","with","the","given","name","and","type"],"prompt_tokens":[]}
{"code_tokens":["public","RelBuilder","join","(","JoinRelType","joinType,","RexNode","condition0,\n","RexNode",".",".",".","conditions",")","{","return","join","(","joinType,","Lists",".","asList","(","condition0,","conditions",")",")",";"],"docstring_tokens":["Creates","a","Join","with","an","array","of","conditions"],"prompt_tokens":[]}
{"code_tokens":["public","RelBuilder","join","(","JoinRelType","joinType,","RexNode","condition",")","{","return","join","(","joinType,","condition,","ImmutableSet",".","of","(",")",")",";"],"docstring_tokens":["Creates","a","Join","with","one","condition"],"prompt_tokens":[]}
{"code_tokens":["public","RelBuilder","correlate","(","JoinRelType","joinType,\n","CorrelationId","correlationId,","RexNode",".",".",".","requiredFields",")","{","return","correlate","(","joinType,","correlationId,","ImmutableList",".","copyOf","(","requiredFields",")",")",";"],"docstring_tokens":["Creates","a","Correlate","with","a","CorrelationId","and","an","array","of","fields","that","are","used","by","correlation"],"prompt_tokens":[]}
{"code_tokens":["public","RelBuilder","as","(","final","String","alias",")","{","final","Frame","pair","=","stack",".","pop","(",")",";","List<Field>","newFields","=\n","Util",".","transform","(","pair",".","fields,","field","->","field",".","addAlias","(","alias",")",")",";","stack",".","push","(","new","Frame","(","pair",".","rel,","ImmutableList",".","copyOf","(","newFields",")",")",")",";","return","this",";"],"docstring_tokens":["Assigns","a","table","alias","to","the","top","entry","on","the","stack"],"prompt_tokens":[]}
{"code_tokens":["public","RelBuilder","limit","(","int","offset,","int","fetch",")","{","return","sortLimit","(","offset,","fetch,","ImmutableList",".","of","(",")",")",";"],"docstring_tokens":["Creates","a","limit","without","a","sort"],"prompt_tokens":[]}
{"code_tokens":["public","RelBuilder","exchange","(","RelDistribution","distribution",")","{","RelNode","exchange","=\n","struct",".","exchangeFactory",".","createExchange","(","peek","(",")",",","distribution",")",";","replaceTop","(","exchange",")",";","return","this",";"],"docstring_tokens":["Creates","an","Exchange","by","distribution"],"prompt_tokens":[]}
{"code_tokens":["public","RelBuilder","sortExchange","(","RelDistribution","distribution,\n","RelCollation","collation",")","{","RelNode","exchange","=\n","struct",".","sortExchangeFactory",".","createSortExchange","(","peek","(",")",",","distribution,\n","collation",")",";","replaceTop","(","exchange",")",";","return","this",";"],"docstring_tokens":["Creates","a","SortExchange","by","distribution","and","collation"],"prompt_tokens":[]}
{"code_tokens":["public","RelBuilder","sort","(","RexNode",".",".",".","nodes",")","{","return","sortLimit","(","-1,","-1,","ImmutableList",".","copyOf","(","nodes",")",")",";"],"docstring_tokens":["Creates","a","Sort","by","expressions"],"prompt_tokens":[]}
{"code_tokens":["public","RelBuilder","sortLimit","(","int","offset,","int","fetch,\n","Iterable<?","extends","RexNode>","nodes",")","{","final","Registrar","registrar","=","new","Registrar","(","fields","(",")",",","ImmutableList",".","of","(",")",")",";","final","List<RelFieldCollation>","fieldCollations","=\n","registrar",".","registerFieldCollations","(","nodes",")",";","\n\n","final","RexNode","offsetNode","=","offset","<=","0","?","null",":","literal","(","offset",")",";","final","RexNode","fetchNode","=","fetch","<","0","?","null",":","literal","(","fetch",")",";","if","(","offsetNode","==","null","&&","fetch","==","0","&&","config",".","simplifyLimit","(",")",")","{","return","empty","(",")",";","}","if","(","offsetNode","==","null","&&","fetchNode","==","null","&&","fieldCollations",".","isEmpty","(",")",")","{","return","this",";","//","sort","is","trivial\n","}","\n\n","if","(","fieldCollations",".","isEmpty","(",")",")","{","assert","registrar",".","addedFieldCount","(",")","==","0",";","RelNode","top","=","peek","(",")",";","if","(","top","instanceof","Sort",")","{","final","Sort","sort2","=","(","Sort",")","top",";","if","(","sort2",".","offset","==","null","&&","sort2",".","fetch","==","null",")","{","replaceTop","(","sort2",".","getInput","(",")",")",";","final","RelNode","sort","=\n","struct",".","sortFactory",".","createSort","(","peek","(",")",",","sort2",".","collation,\n","offsetNode,","fetchNode",")",";","replaceTop","(","sort",")",";","return","this",";","}","}","if","(","top","instanceof","Project",")","{","final","Project","project","=","(","Project",")","top",";","if","(","project",".","getInput","(",")","instanceof","Sort",")","{","final","Sort","sort2","=","(","Sort",")","project",".","getInput","(",")",";","if","(","sort2",".","offset","==","null","&&","sort2",".","fetch","==","null",")","{","final","RelNode","sort","=\n","struct",".","sortFactory",".","createSort","(","sort2",".","getInput","(",")",",\n","sort2",".","collation,","offsetNode,","fetchNode",")",";","replaceTop","(","struct",".","projectFactory",".","createProject","(","sort,\n","project",".","getHints","(",")",",\n","project",".","getProjects","(",")",",\n","Pair",".","right","(","project",".","getNamedProjects","(",")",")",")",")",";","return","this",";","}","}","}","}","if","(","registrar",".","addedFieldCount","(",")",">","0",")","{","project","(","registrar",".","extraNodes",")",";","}","final","RelNode","sort","=\n","struct",".","sortFactory",".","createSort","(","peek","(",")",",\n","RelCollations",".","of","(","fieldCollations",")",",","offsetNode,","fetchNode",")",";","replaceTop","(","sort",")",";","if","(","registrar",".","addedFieldCount","(",")",">","0",")","{","project","(","registrar",".","originalExtraNodes",")",";","}","return","this",";"],"docstring_tokens":["Creates","a","Sort","by","a","list","of","expressions,","with","limit","and","offset"],"prompt_tokens":[]}
{"code_tokens":["public","RelBuilder","hints","(","Iterable<RelHint>","hints",")","{","requireNonNull","(","hints,","\"hints\"",")",";","final","List<RelHint>","relHintList","=","hints","instanceof","List","?","(","List<RelHint>",")","hints\n",":","Lists",".","newArrayList","(","hints",")",";","if","(","relHintList",".","isEmpty","(",")",")","{","return","this",";","}","final","Frame","frame","=","peek_","(",")",";","assert","frame","!=","null",":","\"There","is","no","relational","expression","to","attach","the","hints\"",";","assert","frame",".","rel","instanceof","Hintable",":","\"The","top","relational","expression","is","not","a","Hintable\"",";","Hintable","hintable","=","(","Hintable",")","frame",".","rel",";","replaceTop","(","hintable",".","attachHints","(","relHintList",")",")",";","return","this",";"],"docstring_tokens":["Attaches","multiple","hints","to","the","stack","top","relational","expression"],"prompt_tokens":[]}
{"code_tokens":["public","static","RelDataType","deriveRowType","(","RelDataTypeFactory","typeFactory,\n","SqlTypeName","collectionType,","String","fieldName,","RelDataType","elementType",")","{","final","RelDataType","type1",";","switch","(","collectionType",")","{","case","ARRAY:\n","type1","=","SqlTypeUtil",".","createArrayType","(","typeFactory,","elementType,","false",")",";","break",";","case","MULTISET:\n","type1","=","SqlTypeUtil",".","createMultisetType","(","typeFactory,","elementType,","false",")",";","break",";","case","MAP:\n","type1","=","SqlTypeUtil",".","createMapTypeFromRecord","(","typeFactory,","elementType",")",";","break",";","default:\n","throw","new","AssertionError","(","collectionType",")",";","}","return","typeFactory",".","createTypeWithNullability","(","typeFactory",".","builder","(",")",".","add","(","fieldName,","type1",")",".","build","(",")",",","false",")",";"],"docstring_tokens":["Derives","the","output","row","type","of","a","Collect","relational","expression"],"prompt_tokens":[]}
{"code_tokens":["public","static","List<RelOptRule>","rules","(","JdbcConvention","out",")","{","final","ImmutableList",".","Builder<RelOptRule>","b","=","ImmutableList",".","builder","(",")",";","foreachRule","(","out,","b::add",")",";","return","b",".","build","(",")",";"],"docstring_tokens":["Creates","a","list","of","rules","with","the","given","JDBC","convention","instance"],"prompt_tokens":[]}
{"code_tokens":["public","static","List<RelOptRule>","rules","(","JdbcConvention","out,\n","RelBuilderFactory","relBuilderFactory",")","{","final","ImmutableList",".","Builder<RelOptRule>","b","=","ImmutableList",".","builder","(",")",";","foreachRule","(","out,","r","->\n","b",".","add","(","r",".","config",".","withRelBuilderFactory","(","relBuilderFactory",")",".","toRule","(",")",")",")",";","return","b",".","build","(",")",";"],"docstring_tokens":["Creates","a","list","of","rules","with","the","given","JDBC","convention","instance","and","builder","factory"],"prompt_tokens":[]}
{"code_tokens":["private","static","boolean","canImplement","(","AggregateCall","aggregateCall,\n","SqlDialect","sqlDialect",")","{","return","sqlDialect",".","supportsAggregateFunction","(","aggregateCall",".","getAggregation","(",")",".","getKind","(",")",")","&&","aggregateCall",".","distinctKeys","==","null",";"],"docstring_tokens":["Returns","whether","this","JDBC","data","source","can","implement","a","given","aggregate","function"],"prompt_tokens":[]}
{"code_tokens":["public","static","RexSubQuery","exists","(","RelNode","rel",")","{","final","RelDataTypeFactory","typeFactory","=","rel",".","getCluster","(",")",".","getTypeFactory","(",")",";","final","RelDataType","type","=","typeFactory",".","createSqlType","(","SqlTypeName",".","BOOLEAN",")",";","return","new","RexSubQuery","(","type,","SqlStdOperatorTable",".","EXISTS,\n","ImmutableList",".","of","(",")",",","rel",")",";"],"docstring_tokens":["Creates","an","EXISTS","sub-query"],"prompt_tokens":[]}
{"code_tokens":["public","static","RexSubQuery","unique","(","RelNode","rel",")","{","final","RelDataTypeFactory","typeFactory","=","rel",".","getCluster","(",")",".","getTypeFactory","(",")",";","final","RelDataType","type","=","typeFactory",".","createSqlType","(","SqlTypeName",".","BOOLEAN",")",";","return","new","RexSubQuery","(","type,","SqlStdOperatorTable",".","UNIQUE,\n","ImmutableList",".","of","(",")",",","rel",")",";"],"docstring_tokens":["Creates","an","UNIQUE","sub-query"],"prompt_tokens":[]}
{"code_tokens":["public","static","RexSubQuery","scalar","(","RelNode","rel",")","{","final","List<RelDataTypeField>","fieldList","=","rel",".","getRowType","(",")",".","getFieldList","(",")",";","if","(","fieldList",".","size","(",")","!=","1",")","{","throw","new","IllegalArgumentException","(",")",";","}","final","RelDataTypeFactory","typeFactory","=","rel",".","getCluster","(",")",".","getTypeFactory","(",")",";","final","RelDataType","type","=\n","typeFactory",".","createTypeWithNullability","(","fieldList",".","get","(","0",")",".","getType","(",")",",","true",")",";","return","new","RexSubQuery","(","type,","SqlStdOperatorTable",".","SCALAR_QUERY,\n","ImmutableList",".","of","(",")",",","rel",")",";"],"docstring_tokens":["Creates","a","scalar","sub-query"],"prompt_tokens":[]}
{"code_tokens":["public","static","RexSubQuery","array","(","RelNode","rel",")","{","final","RelDataTypeFactory","typeFactory","=","rel",".","getCluster","(",")",".","getTypeFactory","(",")",";","final","RelDataType","type","=\n","typeFactory",".","createArrayType","(","rel",".","getRowType","(",")",",","-1L",")",";","return","new","RexSubQuery","(","type,","SqlStdOperatorTable",".","ARRAY_QUERY,\n","ImmutableList",".","of","(",")",",","rel",")",";"],"docstring_tokens":["Creates","an","ARRAY","sub-query"],"prompt_tokens":[]}
{"code_tokens":["public","static","RexSubQuery","multiset","(","RelNode","rel",")","{","final","RelDataTypeFactory","typeFactory","=","rel",".","getCluster","(",")",".","getTypeFactory","(",")",";","final","RelDataType","type","=\n","typeFactory",".","createMultisetType","(","rel",".","getRowType","(",")",",","-1L",")",";","return","new","RexSubQuery","(","type,","SqlStdOperatorTable",".","MULTISET_QUERY,\n","ImmutableList",".","of","(",")",",","rel",")",";"],"docstring_tokens":["Creates","a","MULTISET","sub-query"],"prompt_tokens":[]}
{"code_tokens":["public","static","RexSubQuery","map","(","RelNode","rel",")","{","final","RelDataTypeFactory","typeFactory","=","rel",".","getCluster","(",")",".","getTypeFactory","(",")",";","final","RelDataType","rowType","=","rel",".","getRowType","(",")",";","Preconditions",".","checkArgument","(","rowType",".","getFieldCount","(",")","==","2,\n","\"MAP","requires","exactly","two","fields,","got","%s",";","row","type","%s\",\n","rowType",".","getFieldCount","(",")",",","rowType",")",";","final","List<RelDataTypeField>","fieldList","=","rowType",".","getFieldList","(",")",";","final","RelDataType","type","=\n","typeFactory",".","createMapType","(","fieldList",".","get","(","0",")",".","getType","(",")",",\n","fieldList",".","get","(","1",")",".","getType","(",")",")",";","return","new","RexSubQuery","(","type,","SqlStdOperatorTable",".","MAP_QUERY,\n","ImmutableList",".","of","(",")",",","rel",")",";"],"docstring_tokens":["Creates","a","MAP","sub-query"],"prompt_tokens":[]}
{"code_tokens":["public","static","TimeExtractionFunction","createDefault","(","String","timeZone",")","{","return","new","TimeExtractionFunction","(","ISO_DATETIME_FRACTIONAL_SECOND_FORMAT,\n","null,","timeZone,","null",")",";"],"docstring_tokens":["Creates","the","default","time","format","extraction","function"],"prompt_tokens":[]}
{"code_tokens":["public","static","TimeExtractionFunction","createExtractFromGranularity","(","Granularity","granularity,","String","timeZone",")","{","final","String","local","=","Locale",".","US",".","toLanguageTag","(",")",";","switch","(","granularity",".","getType","(",")",")","{","case","DAY:\n","return","new","TimeExtractionFunction","(","\"d\",","null,","timeZone,","local",")",";","case","MONTH:\n","return","new","TimeExtractionFunction","(","\"M\",","null,","timeZone,","local",")",";","case","YEAR:\n","return","new","TimeExtractionFunction","(","\"yyyy\",","null,","timeZone,","local",")",";","case","WEEK:\n","return","new","TimeExtractionFunction","(","\"w\",","null,","timeZone,","local",")",";","case","HOUR:\n","return","new","TimeExtractionFunction","(","\"H\",","null,","timeZone,","local",")",";","case","MINUTE:\n","return","new","TimeExtractionFunction","(","\"m\",","null,","timeZone,","local",")",";","case","SECOND:\n","return","new","TimeExtractionFunction","(","\"s\",","null,","timeZone,","local",")",";","default:\n","throw","new","IllegalArgumentException","(","\"Granularity","[\"","+","granularity","+","\"]","is","not","supported\"",")",";","}"],"docstring_tokens":["Creates","the","time","format","extraction","function","for","the","given","granularity"],"prompt_tokens":[]}
{"code_tokens":["public","static","TimeExtractionFunction","createFloorFromGranularity","(","Granularity","granularity,","String","timeZone",")","{","return","new","TimeExtractionFunction","(","ISO_DATETIME_FRACTIONAL_SECOND_FORMAT,","granularity,","timeZone,\n","Locale",".","ROOT",".","toLanguageTag","(",")",")",";"],"docstring_tokens":["Creates","time","format","floor","time","extraction","function","using","a","given","granularity"],"prompt_tokens":[]}
{"code_tokens":["\n\n","public","static","boolean","isValidTimeExtract","(","RexNode","rexNode",")","{","final","RexCall","call","=","(","RexCall",")","rexNode",";","if","(","call",".","getKind","(",")","!=","SqlKind",".","EXTRACT","||","call",".","getOperands","(",")",".","size","(",")","!=","2",")","{","return","false",";","}","final","RexLiteral","flag","=","(","RexLiteral",")","call",".","operands",".","get","(","0",")",";","final","TimeUnitRange","timeUnit","=","(","TimeUnitRange",")","flag",".","getValue","(",")",";","return","timeUnit","!=","null","&&","VALID_TIME_EXTRACT",".","contains","(","timeUnit",")",";"],"docstring_tokens":["Returns","whether","the","RexCall","contains","a","valid","extract","unit","that","we","can","serialize","to","Druid"],"prompt_tokens":[]}
{"code_tokens":["public","static","boolean","isValidTimeFloor","(","RexNode","rexNode",")","{","if","(","rexNode",".","getKind","(",")","!=","SqlKind",".","FLOOR",")","{","return","false",";","}","final","RexCall","call","=","(","RexCall",")","rexNode",";","if","(","call",".","operands",".","size","(",")","!=","2",")","{","return","false",";","}","final","RexLiteral","flag","=","(","RexLiteral",")","call",".","operands",".","get","(","1",")",";","final","TimeUnitRange","timeUnit","=","(","TimeUnitRange",")","flag",".","getValue","(",")",";","return","timeUnit","!=","null","&&","VALID_TIME_FLOOR",".","contains","(","timeUnit",")",";"],"docstring_tokens":["Returns","whether","the","RexCall","contains","a","valid","FLOOR","unit","that","we","can","serialize","to","Druid"],"prompt_tokens":[]}
{"code_tokens":["public","static","@Nullable","TimeExtractionFunction","translateCastToTimeExtract","(","RexNode","rexNode,\n","TimeZone","timeZone",")","{","assert","rexNode",".","getKind","(",")","==","SqlKind",".","CAST",";","final","RexCall","rexCall","=","(","RexCall",")","rexNode",";","final","String","castFormat","=","DruidSqlCastConverter\n",".","dateTimeFormatString","(","rexCall",".","getType","(",")",".","getSqlTypeName","(",")",")",";","final","String","timeZoneId","=","timeZone","==","null","?","null",":","timeZone",".","getID","(",")",";","if","(","castFormat","==","null",")","{","//","unknown","format\n","return","null",";","}","SqlTypeName","fromType","=","rexCall",".","getOperands","(",")",".","get","(","0",")",".","getType","(",")",".","getSqlTypeName","(",")",";","SqlTypeName","toType","=","rexCall",".","getType","(",")",".","getSqlTypeName","(",")",";","String","granularityTZId",";","switch","(","fromType",")","{","case","DATE:\n","case","TIMESTAMP:\n","granularityTZId","=","DateTimeUtils",".","UTC_ZONE",".","getID","(",")",";","break",";","case","TIMESTAMP_WITH_LOCAL_TIME_ZONE:\n","granularityTZId","=","timeZoneId",";","break",";","default:\n","return","null",";","}","switch","(","toType",")","{","case","DATE:\n","return","new","TimeExtractionFunction","(","castFormat,\n","Granularities",".","createGranularity","(","TimeUnitRange",".","DAY,","granularityTZId",")",",\n","DateTimeUtils",".","UTC_ZONE",".","getID","(",")",",","Locale",".","ENGLISH",".","toString","(",")",")",";","case","TIMESTAMP:\n","//","date","->","timestamp:","UTC\n","//","timestamp","->","timestamp:","UTC\n","//","timestamp","with","local","time","zone","->","granularityTZId\n","return","new","TimeExtractionFunction","(","castFormat,","null,","granularityTZId,","Locale",".","ENGLISH",".","toString","(",")",")",";","case","TIMESTAMP_WITH_LOCAL_TIME_ZONE:\n","return","new","TimeExtractionFunction","(","castFormat,","null,","DateTimeUtils",".","UTC_ZONE",".","getID","(",")",",","Locale",".","ENGLISH",".","toString","(",")",")",";","default:\n","return","null",";","}"],"docstring_tokens":["Translates","a","CAST","expression","to","a","Druid","Time","extraction","function,","or","null","when","can","not","translate","the","cast"],"prompt_tokens":[]}
{"code_tokens":["public","List<SqlMoniker>","getCompletionHints","(","String","sql,","SqlParserPos","pos",")","{","//","First","try","the","statement","they","gave","us",".","If","this","fails,","just","return\n","//","the","tokens","which","were","expected","at","the","failure","point",".","List<SqlMoniker>","hintList","=","new","ArrayList<>","(",")",";","SqlNode","sqlNode","=","tryParse","(","sql,","hintList",")",";","if","(","sqlNode","==","null",")","{","return","hintList",";","}","\n\n","//","Now","construct","a","statement","which","is","bound","to","fail",".","(","Character","7","BEL\n","//","is","not","legal","in","any","SQL","statement",".",")","final","int","x","=","pos",".","getColumnNum","(",")","-","1",";","sql","=","sql",".","substring","(","0,","x",")","+","\"","\\07\"\n","+","sql",".","substring","(","x",")",";","tryParse","(","sql,","hintList",")",";","\n\n","final","SqlMoniker","star","=\n","new","SqlMonikerImpl","(","ImmutableList",".","of","(","\"*\"",")",",","SqlMonikerType",".","KEYWORD",")",";","String","hintToken","=\n","parserConfig",".","unquotedCasing","(",")","==","Casing",".","TO_UPPER","?","UPPER_HINT_TOKEN",":","HINT_TOKEN",";","if","(","hintList",".","contains","(","star",")","&&","!isSelectListItem","(","sqlNode,","pos,","hintToken",")",")","{","hintList",".","remove","(","star",")",";","}","\n\n","//","Add","the","identifiers","which","are","expected","at","the","point","of","interest",".","try","{","validator",".","validate","(","sqlNode",")",";","}","catch","(","Exception","e",")","{","//","mask","any","exception","that","is","thrown","during","the","validation,","i",".","e",".","//","try","to","continue","even","if","the","sql","is","invalid",".","we","are","doing","a","best\n","//","effort","here","to","try","to","come","up","with","the","requested","completion\n","//","hints\n","Util",".","swallow","(","e,","LOGGER",")",";","}","final","List<SqlMoniker>","validatorHints","=\n","validator",".","lookupHints","(","sqlNode,","pos",")",";","hintList",".","addAll","(","validatorHints",")",";","return","hintList",";"],"docstring_tokens":["Gets","completion","hints","for","a","syntactically","correct","SQL","statement","with","dummy","SqlIdentifier"],"prompt_tokens":[]}
{"code_tokens":["public","@Nullable","SqlMoniker","getQualifiedName","(","String","sql,","int","cursor",")","{","SqlNode","sqlNode",";","try","{","sqlNode","=","parseQuery","(","sql",")",";","validator",".","validate","(","sqlNode",")",";","}","catch","(","Exception","e",")","{","return","null",";","}","SqlParserPos","pos","=","new","SqlParserPos","(","1,","cursor","+","1",")",";","try","{","return","validator",".","lookupQualifiedName","(","sqlNode,","pos",")",";","}","catch","(","CalciteContextException","|","AssertionError","e",")","{","return","null",";","}"],"docstring_tokens":["Gets","the","fully","qualified","name","for","a","SqlIdentifier","at","a","given","position","of","a","sql","statement"],"prompt_tokens":[]}
{"code_tokens":["@EnsuresNonNull","(","{","\"reservedWordsSet\",","\"reservedWordsList\"","}",")","public","List<String>","getReservedAndKeyWords","(",")","{","ensureReservedAndKeyWords","(",")",";","return","reservedWordsList",";"],"docstring_tokens":["Returns","an","array","of","SQL","reserved","and","keywords"],"prompt_tokens":[]}
{"code_tokens":["protected","void","registerOp","(","SqlOperator","op,","RexSqlConvertlet","convertlet",")","{","map",".","put","(","op,","convertlet",")",";"],"docstring_tokens":["Registers","a","convertlet","for","a","given","operator","instance"],"prompt_tokens":[]}
{"code_tokens":["private","CalciteAssert",".","AssertQuery","foodmartApprox","(","String","sql",")","{","return","approxQuery","(","FOODMART,","sql",")",";"],"docstring_tokens":["Creates","a","query","against","FOODMART","with","approximate","parameters"],"prompt_tokens":[]}
{"code_tokens":["private","CalciteAssert",".","AssertQuery","wikiApprox","(","String","sql",")","{","return","approxQuery","(","WIKI,","sql",")",";"],"docstring_tokens":["Creates","a","query","against","WIKI","with","approximate","parameters"],"prompt_tokens":[]}
{"code_tokens":["private","CalciteAssert",".","AssertQuery","sql","(","String","sql,","URL","url",")","{","return","fixture","(",")",".","withModel","(","url",")",".","query","(","sql",")",";"],"docstring_tokens":["Creates","a","query","against","a","data","set","given","by","a","map"],"prompt_tokens":[]}
{"code_tokens":["protected","void","notifyChosen","(","RelNode","rel",")","{","LOGGER",".","debug","(","\"For","final","plan,","using","{","}","\",","rel",")",";","\n\n","if","(","listener","!=","null",")","{","RelOptListener",".","RelChosenEvent","event","=\n","new","RelOptListener",".","RelChosenEvent","(","this,\n","rel",")",";","listener",".","relChosen","(","event",")",";","}"],"docstring_tokens":["Takes","care","of","tracing","and","listener","notification","when","a","rel","is","chosen","as","part","of","the","final","plan"],"prompt_tokens":[]}
{"code_tokens":["protected","void","notifyEquivalence","(","RelNode","rel,\n","Object","equivalenceClass,\n","boolean","physical",")","{","if","(","listener","!=","null",")","{","RelOptListener",".","RelEquivalenceEvent","event","=\n","new","RelOptListener",".","RelEquivalenceEvent","(","this,\n","rel,\n","equivalenceClass,\n","physical",")",";","listener",".","relEquivalenceFound","(","event",")",";","}"],"docstring_tokens":["Takes","care","of","tracing","and","listener","notification","when","a","rel","equivalence","is","detected"],"prompt_tokens":[]}
{"code_tokens":["protected","void","notifyDiscard","(","RelNode","rel",")","{","if","(","listener","!=","null",")","{","RelOptListener",".","RelDiscardedEvent","event","=\n","new","RelOptListener",".","RelDiscardedEvent","(","this,\n","rel",")",";","listener",".","relDiscarded","(","event",")",";","}"],"docstring_tokens":["Takes","care","of","tracing","and","listener","notification","when","a","rel","is","discarded"],"prompt_tokens":[]}
{"code_tokens":["private","static","int","soleArgument","(","AggregateCall","aggregateCall",")","{","return","aggregateCall",".","getArgList","(",")",".","size","(",")","==","1\n","?","aggregateCall",".","getArgList","(",")",".","get","(","0",")",":","-1",";"],"docstring_tokens":["Returns","the","argument,","if","an","aggregate","call","has","a","single","argument,","otherwise","-1"],"prompt_tokens":[]}
{"code_tokens":["public","static","LogicalJoin","create","(","RelNode","left,","RelNode","right,","List<RelHint>","hints,\n","RexNode","condition,","Set<CorrelationId>","variablesSet,","JoinRelType","joinType,\n","boolean","semiJoinDone,","ImmutableList<RelDataTypeField>","systemFieldList",")","{","final","RelOptCluster","cluster","=","left",".","getCluster","(",")",";","final","RelTraitSet","traitSet","=","cluster",".","traitSetOf","(","Convention",".","NONE",")",";","return","new","LogicalJoin","(","cluster,","traitSet,","hints,","left,","right,","condition,\n","variablesSet,","joinType,","semiJoinDone,","systemFieldList",")",";"],"docstring_tokens":["Creates","a","LogicalJoin,","flagged","with","whether","it","has","been","translated","to","a","semi-join"],"prompt_tokens":[]}
{"code_tokens":["public","static","SqlTypeTransformCascade","cascade","(","SqlReturnTypeInference","rule,\n","SqlTypeTransform",".",".",".","transforms",")","{","return","new","SqlTypeTransformCascade","(","rule,","transforms",")",";"],"docstring_tokens":["Creates","a","return-type","inference","that","applies","a","rule","then","a","sequence","of","transforms"],"prompt_tokens":[]}
{"code_tokens":["public","static","ExplicitReturnTypeInference","explicit","(","RelDataType","type",")","{","return","explicit","(","RelDataTypeImpl",".","proto","(","type",")",")",";"],"docstring_tokens":["Creates","an","inference","rule","which","returns","a","copy","of","a","given","data","type"],"prompt_tokens":[]}
{"code_tokens":["public","static","ExplicitReturnTypeInference","explicit","(","SqlTypeName","typeName",")","{","return","explicit","(","RelDataTypeImpl",".","proto","(","typeName,","false",")",")",";"],"docstring_tokens":["Creates","an","inference","rule","which","returns","a","type","with","no","precision","or","scale,","such","as","DATE"],"prompt_tokens":[]}
{"code_tokens":["protected","OutputStream","openTestLogOutputStream","(","File","testFileSansExt",")","throws","IOException","{","assert","logOutputStream","==","null",";","\n\n","logFile","=","new","File","(","testFileSansExt",".","toString","(",")","+","\"",".","log\"",")",";","logFile",".","delete","(",")",";","\n\n","refFile","=","new","File","(","testFileSansExt",".","toString","(",")","+","\"",".","ref\"",")",";","\n\n","logOutputStream","=","new","FileOutputStream","(","logFile",")",";","return","logOutputStream",";"],"docstring_tokens":["Initializes","a","diff-based","test,","overriding","the","default","log","file","naming","scheme","altogether"],"prompt_tokens":[]}
{"code_tokens":["private","static","boolean","inIde","(",")","{","Throwable","runtimeException","=","new","Throwable","(",")",";","runtimeException",".","fillInStackTrace","(",")",";","final","StackTraceElement[]","stackTrace","=\n","runtimeException",".","getStackTrace","(",")",";","StackTraceElement","lastStackTraceElement","=\n","stackTrace[stackTrace",".","length","-","1]",";","\n\n","//","Junit","test","launched","from","IntelliJ","6",".","0\n","if","(","lastStackTraceElement",".","getClassName","(",")",".","equals","(","\"com",".","intellij",".","rt",".","execution",".","junit",".","JUnitStarter\"",")","&&","lastStackTraceElement",".","getMethodName","(",")",".","equals","(","\"main\"",")",")","{","return","true",";","}","\n\n","//","Application","launched","from","IntelliJ","6",".","0\n","if","(","lastStackTraceElement",".","getClassName","(",")",".","equals","(","\"com",".","intellij",".","rt",".","execution",".","application",".","AppMain\"",")","&&","lastStackTraceElement",".","getMethodName","(",")",".","equals","(","\"main\"",")",")","{","return","true",";","}","return","false",";"],"docstring_tokens":["Returns","whether","this","test","is","running","inside","the","IntelliJ","IDE"],"prompt_tokens":[]}
{"code_tokens":["public","boolean","isNullGenerating","(","int","factIdx",")","{","return","joinTypes",".","get","(","factIdx",")",".","isOuterJoin","(",")",";"],"docstring_tokens":["Returns","whether","the","factor","corresponds","to","a","null-generating","factor","in","a","left","or","right","outer","join"],"prompt_tokens":[]}
{"code_tokens":["@RequiresNonNull","(","{","\"allJoinFilters\",","\"joinStart\",","\"nFieldsInJoinFactor\"","}",")","private","void","setJoinFilterRefs","(","@UnderInitialization","LoptMultiJoin","this",")","{","ListIterator<RexNode>","filterIter","=","allJoinFilters",".","listIterator","(",")",";","while","(","filterIter",".","hasNext","(",")",")","{","RexNode","joinFilter","=","filterIter",".","next","(",")",";","\n\n","//","ignore","the","literal","filter",";","if","necessary,","we'll","add","it","back\n","//","later\n","if","(","joinFilter",".","isAlwaysTrue","(",")",")","{","filterIter",".","remove","(",")",";","}","ImmutableBitSet","factorRefBitmap","=\n","getJoinFilterFactorBitmap","(","joinFilter,","true",")",";","factorsRefByJoinFilter",".","put","(","joinFilter,","factorRefBitmap",")",";","}"],"docstring_tokens":["Sets","bitmaps","indicating","which","factors","and","fields","each","join","filter","references"],"prompt_tokens":[]}
{"code_tokens":["@RequiresNonNull","(","{","\"joinStart\",","\"nFieldsInJoinFactor\"","}",")","private","ImmutableBitSet","factorBitmap","(","@UnknownInitialization","LoptMultiJoin","this,\n","ImmutableBitSet","fieldRefBitmap",")","{","ImmutableBitSet",".","Builder","factorRefBitmap","=","ImmutableBitSet",".","builder","(",")",";","for","(","int","field",":","fieldRefBitmap",")","{","int","factor","=","findRef","(","field",")",";","factorRefBitmap",".","set","(","factor",")",";","}","return","factorRefBitmap",".","build","(",")",";"],"docstring_tokens":["Sets","the","bitmap","indicating","which","factors","a","filter","references","based","on","which","fields","it","references"],"prompt_tokens":[]}
{"code_tokens":["@RequiresNonNull","(","{","\"joinStart\",","\"nFieldsInJoinFactor\"","}",")","public","int","findRef","(","@UnknownInitialization","LoptMultiJoin","this,\n","int","rexInputRef",")","{","for","(","int","i","=","0",";","i","<","nJoinFactors",";","i++",")","{","if","(","(","rexInputRef",">=","joinStart[i]",")","&&","(","rexInputRef","<","(","joinStart[i]","+","nFieldsInJoinFactor[i]",")",")",")","{","return","i",";","}","}","throw","new","AssertionError","(",")",";"],"docstring_tokens":["Determines","the","join","factor","corresponding","to","a","RexInputRef"],"prompt_tokens":[]}
{"code_tokens":["public","boolean","hasAllFactors","(","LoptJoinTree","joinTree,\n","BitSet","factorsNeeded",")","{","return","BitSets",".","contains","(","BitSets",".","of","(","joinTree",".","getTreeOrder","(",")",")",",","factorsNeeded",")",";"],"docstring_tokens":["Returns","whether","if","a","join","tree","contains","all","factors","required"],"prompt_tokens":[]}
{"code_tokens":["@Deprecated","//","to","be","removed","before","2",".","0\n","public","void","getChildFactors","(","LoptJoinTree","joinTree,\n","ImmutableBitSet",".","Builder","childFactors",")","{","for","(","int","child",":","joinTree",".","getTreeOrder","(",")",")","{","childFactors",".","set","(","child",")",";","}"],"docstring_tokens":["Sets","a","bitmap","indicating","all","child","RelNodes","in","a","join","tree"],"prompt_tokens":[]}
{"code_tokens":["public","List<RelDataTypeField>","getJoinFields","(","LoptJoinTree","left,\n","LoptJoinTree","right",")","{","RelDataType","rowType","=\n","factory",".","createJoinType","(","left",".","getJoinTree","(",")",".","getRowType","(",")",",\n","right",".","getJoinTree","(",")",".","getRowType","(",")",")",";","return","rowType",".","getFieldList","(",")",";"],"docstring_tokens":["Retrieves","the","fields","corresponding","to","a","join","between","a","left","and","right","tree"],"prompt_tokens":[]}
{"code_tokens":["public","String","simple","(",")","{","final","StringBuilder","buf","=","new","StringBuilder","(","\"","(","\"",")",";","for","(","Ord<Pair<String,","@Nullable","Object>>","ord",":","Ord",".","zip","(","values",")",")","{","if","(","ord",".","i",">","0",")","{","buf",".","append","(","\",","\"",")",";","}","buf",".","append","(","ord",".","e",".","left",")",".","append","(","\"=[\"",")",".","append","(","ord",".","e",".","right",")",".","append","(","\"]\"",")",";","}","buf",".","append","(","\"",")","\"",")",";","return","buf",".","toString","(",")",";"],"docstring_tokens":["Converts","the","collected","terms","and","values","to","a","string"],"prompt_tokens":[]}
{"code_tokens":["private","RelDataType","getBaseRowType","(",")","{","final","Table","schemaTable","=","Objects",".","requireNonNull","(","table",".","unwrap","(","Table",".","class",")",",\n","(",")","->","\"can't","unwrap","Table","from","\"","+","table",")",";","if","(","schemaTable","instanceof","ModifiableViewTable",")","{","final","Table","underlying","=\n","(","(","ModifiableViewTable",")","schemaTable",")",".","unwrap","(","Table",".","class",")",";","assert","underlying","!=","null",";","return","underlying",".","getRowType","(","validator",".","typeFactory",")",";","}","return","schemaTable",".","getRowType","(","validator",".","typeFactory",")",";"],"docstring_tokens":["Gets","the","data-type","of","all","columns","in","a","table"],"prompt_tokens":[]}
{"code_tokens":["private","void","checkExtendedColumnTypes","(","SqlNodeList","extendList",")","{","final","List<RelDataTypeField>","extendedFields","=\n","SqlValidatorUtil",".","getExtendedColumns","(","validator,","table,","extendList",")",";","final","List<RelDataTypeField>","baseFields","=\n","getBaseRowType","(",")",".","getFieldList","(",")",";","final","Map<String,","Integer>","nameToIndex","=\n","SqlValidatorUtil",".","mapNameToIndex","(","baseFields",")",";","\n\n","for","(","final","RelDataTypeField","extendedField",":","extendedFields",")","{","final","String","extFieldName","=","extendedField",".","getName","(",")",";","if","(","nameToIndex",".","containsKey","(","extFieldName",")",")","{","final","Integer","baseIndex","=","nameToIndex",".","get","(","extFieldName",")",";","final","RelDataType","baseType","=","baseFields",".","get","(","baseIndex",")",".","getType","(",")",";","final","RelDataType","extType","=","extendedField",".","getType","(",")",";","\n\n","if","(","!extType",".","equals","(","baseType",")",")","{","//","Get","the","extended","column","node","that","failed","validation",".","final","SqlNode","extColNode","=\n","Iterables",".","find","(","extendList,\n","sqlNode","->","sqlNode","instanceof","SqlIdentifier\n","&&","Util",".","last","(","(","(","SqlIdentifier",")","sqlNode",")",".","names",")",".","equals","(","extendedField",".","getName","(",")",")",")",";","\n\n","throw","validator",".","getValidationErrorFunction","(",")",".","apply","(","extColNode,\n","RESOURCE",".","typeNotAssignable","(","baseFields",".","get","(","baseIndex",")",".","getName","(",")",",","baseType",".","getFullTypeString","(",")",",\n","extendedField",".","getName","(",")",",","extType",".","getFullTypeString","(",")",")",")",";","}","}","}"],"docstring_tokens":["Ensures","that","extended","columns","that","have","the","same","name","as","a","base","column","also","have","the","same","data-type"],"prompt_tokens":[]}
{"code_tokens":["public","Enumerator<String>","enumerator","(","final","Set<Integer>","solutionSet",")","{","final","CellContent","cellContent",";","if","(","solutionSet","==","null",")","{","cellContent","=","CellContent",".","SPACE",";","}","else","{","cellContent","=","c","->","solutionSet",".","contains","(","c",")","?","\"*","\"",":","\"","\"",";","}","return","new","Enumerator<String>","(",")","{","int","i","=","-1",";","final","StringBuilder","b","=","new","StringBuilder","(",")",";","final","StringBuilder","b2","=","new","StringBuilder","(",")",";","\n\n","@Override","public","String","current","(",")","{","return","i","%","2","==","0","?","b",".","toString","(",")",":","b2",".","toString","(",")",";","}","\n\n","@Override","public","boolean","moveNext","(",")","{","if","(","i",">=","height","*","2",")","{","return","false",";","}","++i",";","if","(","i","%","2","==","0",")","{","b",".","setLength","(","0",")",";","b2",".","setLength","(","0",")",";","row","(","cellContent,","b,","b2,","i","/","2",")",";","}","return","true",";","}","\n\n","@Override","public","void","reset","(",")","{","i","=","-1",";","}","\n\n","@Override","public","void","close","(",")","{","}","}",";"],"docstring_tokens":["Generates","a","list","of","lines","representing","the","maze","in","text","form"],"prompt_tokens":[]}
{"code_tokens":["private","void","row","(","CellContent","cellContent,","StringBuilder","b,","StringBuilder","b2,\n","int","y",")","{","final","int","c0","=","y","*","width",";","for","(","int","x","=","0",";","x","<","width",";","x++",")","{","b",".","append","(","'+'",")",";","b",".","append","(","ups[c0","+","x]","?","\"","\"",":","\"--\"",")",";","}","b",".","append","(","'+'",")",";","if","(","y","==","height",")","{","return",";","}","for","(","int","x","=","0",";","x","<","width",";","x++",")","{","b2",".","append","(","lefts[c0","+","x]","?","'","'",":","'|'",")",".","append","(","cellContent",".","get","(","c0","+","x",")",")",";","}","b2",".","append","(","'|'",")",";"],"docstring_tokens":["Returns","a","pair","of","strings","representing","a","row","of","the","maze"],"prompt_tokens":[]}
{"code_tokens":["@Deprecated","//","to","be","removed","before","2",".","0\n","protected","static","<R","extends","RelNode>","ConverterRelOptRuleOperand\n","convertOperand","(","Class<R>","clazz,","Predicate<?","super","R>","predicate,\n","RelTrait","trait",")","{","return","new","ConverterRelOptRuleOperand","(","clazz,","trait,","predicate",")",";"],"docstring_tokens":["Creates","an","operand","for","a","converter","rule"],"prompt_tokens":[]}
{"code_tokens":["public","static","RelNode","convert","(","RelNode","rel,","RelTraitSet","toTraits",")","{","RelOptPlanner","planner","=","rel",".","getCluster","(",")",".","getPlanner","(",")",";","\n\n","RelTraitSet","outTraits","=","rel",".","getTraitSet","(",")",";","for","(","int","i","=","0",";","i","<","toTraits",".","size","(",")",";","i++",")","{","RelTrait","toTrait","=","toTraits",".","getTrait","(","i",")",";","if","(","toTrait","!=","null",")","{","outTraits","=","outTraits",".","replace","(","i,","toTrait",")",";","}","}","\n\n","if","(","rel",".","getTraitSet","(",")",".","matches","(","outTraits",")",")","{","return","rel",";","}","\n\n","return","planner",".","changeTraits","(","rel,","outTraits",")",";"],"docstring_tokens":["Converts","a","relation","expression","to","a","given","set","of","traits,","if","it","does","not","already","have","those","traits"],"prompt_tokens":[]}
{"code_tokens":["public","static","RelNode","convert","(","RelNode","rel,","@Nullable","RelTrait","toTrait",")","{","RelOptPlanner","planner","=","rel",".","getCluster","(",")",".","getPlanner","(",")",";","RelTraitSet","outTraits","=","rel",".","getTraitSet","(",")",";","if","(","toTrait","!=","null",")","{","outTraits","=","outTraits",".","replace","(","toTrait",")",";","}","\n\n","if","(","rel",".","getTraitSet","(",")",".","matches","(","outTraits",")",")","{","return","rel",";","}","\n\n","return","planner",".","changeTraits","(","rel,","outTraits",".","simplify","(",")",")",";"],"docstring_tokens":["Converts","one","trait","of","a","relational","expression,","if","it","does","not","already","have","that","trait"],"prompt_tokens":[]}
{"code_tokens":["public","void","dump","(","PrintWriter","pw",")","{","pw",".","println","(","\"Root:","\"","+","root",")",";","pw",".","println","(","\"Original","rel:\"",")",";","\n\n","if","(","originalRoot","!=","null",")","{","originalRoot",".","explain","(","new","RelWriterImpl","(","pw,","SqlExplainLevel",".","ALL_ATTRIBUTES,","false",")",")",";","}","\n\n","try","{","if","(","CalciteSystemProperty",".","DUMP_SETS",".","value","(",")",")","{","pw",".","println","(",")",";","pw",".","println","(","\"Sets:\"",")",";","Dumpers",".","dumpSets","(","this,","pw",")",";","}","if","(","CalciteSystemProperty",".","DUMP_GRAPHVIZ",".","value","(",")",")","{","pw",".","println","(",")",";","pw",".","println","(","\"Graphviz:\"",")",";","Dumpers",".","dumpGraphviz","(","this,","pw",")",";","}","}","catch","(","Exception","|","AssertionError","e",")","{","pw",".","println","(","\"Error","when","dumping","plan","state:","\\n\"\n","+","e",")",";","}"],"docstring_tokens":["Dumps","the","internal","state","of","this","VolcanoPlanner","to","a","writer"],"prompt_tokens":[]}
{"code_tokens":["void","fireRules","(","RelNode","rel",")","{","for","(","RelOptRuleOperand","operand",":","classOperands",".","get","(","rel",".","getClass","(",")",")",")","{","if","(","operand",".","matches","(","rel",")",")","{","final","VolcanoRuleCall","ruleCall",";","ruleCall","=","new","DeferringRuleCall","(","this,","operand",")",";","ruleCall",".","match","(","rel",")",";","}","}"],"docstring_tokens":["Fires","all","rules","matched","by","a","relational","expression"],"prompt_tokens":[]}
{"code_tokens":["@API","(","since","=","\"1",".","24\",","status","=","API",".","Status",".","EXPERIMENTAL",")","protected","boolean","isSubstituteRule","(","VolcanoRuleCall","match",")","{","return","match",".","getRule","(",")","instanceof","SubstitutionRule",";"],"docstring_tokens":["Checks","whether","a","rule","match","is","a","substitution","rule","match"],"prompt_tokens":[]}
{"code_tokens":["@API","(","since","=","\"1",".","24\",","status","=","API",".","Status",".","EXPERIMENTAL",")","protected","RelOptCost","getLowerBound","(","RelNode","rel",")","{","RelMetadataQuery","mq","=","rel",".","getCluster","(",")",".","getMetadataQuery","(",")",";","RelOptCost","lowerBound","=","mq",".","getLowerBoundCost","(","rel,","this",")",";","if","(","lowerBound","==","null",")","{","return","zeroCost",";","}","return","lowerBound",";"],"docstring_tokens":["Gets","the","lower","bound","cost","of","a","relational","operator"],"prompt_tokens":[]}
{"code_tokens":["public","static","SqlTypeCoercionRule","instance","(","Map<SqlTypeName,","ImmutableSet<SqlTypeName>>","map",")","{","return","new","SqlTypeCoercionRule","(","map",")",";"],"docstring_tokens":["Returns","an","instance","with","specified","type","mappings"],"prompt_tokens":[]}
{"code_tokens":["public","static","LogicalValues","createEmpty","(","RelOptCluster","cluster,\n","RelDataType","rowType",")","{","return","create","(","cluster,","rowType,\n","ImmutableList",".","of","(",")",")",";"],"docstring_tokens":["Creates","a","LogicalValues","that","outputs","no","rows","of","a","given","row","type"],"prompt_tokens":[]}
{"code_tokens":["public","static","Builder","builder","(","HintPredicate","hintPredicate",")","{","return","new","Builder","(","hintPredicate",")",";"],"docstring_tokens":["Returns","a","HintStrategy","builder","with","given","hint","predicate"],"prompt_tokens":[]}
{"code_tokens":["protected","Socket","applySettings","(","Socket","s",")","{","try","{","s",".","setKeepAlive","(","SO_KEEPALIVE",")",";","s",".","setOOBInline","(","OOBINLINE",")",";","s",".","setReuseAddress","(","SO_REUSEADDR",")",";","s",".","setTcpNoDelay","(","TCP_NODELAY",")",";","s",".","setOOBInline","(","OOBINLINE",")",";","\n\n","s",".","setReceiveBufferSize","(","SO_RCVBUF",")",";","s",".","setSendBufferSize","(","SO_SNDBUF",")",";","s",".","setSoTimeout","(","SO_TIMEOUT",")",";","s",".","setSoLinger","(","SO_LINGER,","LINGER",")",";","}","catch","(","SocketException","e",")","{","throw","new","RuntimeException","(","e",")",";","}","return","s",";"],"docstring_tokens":["Applies","the","current","settings","to","the","given","socket"],"prompt_tokens":[]}
{"code_tokens":["public","void","stringTag","(","String","name,","String","data",")","{","beginTag","(","name,","null",")",";","cdata","(","data",")",";","endTag","(","name",")",";"],"docstring_tokens":["Writes","a","String","tag;","a","tag","containing","nothing","but","a","CDATA","section"],"prompt_tokens":[]}
{"code_tokens":["private","static","void","printAtt","(","PrintWriter","pw,","String","name,","@Nullable","String","val",")","{","if","(","val","!=","null","/*","&&","!val",".","equals","(","\"\"",")","*/",")","{","pw",".","print","(","\"","\"",")",";","pw",".","print","(","name",")",";","pw",".","print","(","\"=\\\"\"",")",";","pw",".","print","(","escapeForQuoting","(","val",")",")",";","pw",".","print","(","\"\\\"\"",")",";","}"],"docstring_tokens":["Prints","an","XML","attribute","name","and","value","for","string","val"],"prompt_tokens":[]}
{"code_tokens":["private","static","void","stringEncodeXML","(","String","input,","PrintWriter","out",")","{","for","(","int","i","=","0",";","i","<","input",".","length","(",")",";","i++",")","{","char","c","=","input",".","charAt","(","i",")",";","switch","(","c",")","{","case","'<':\n","case","'>':\n","case","'\"':\n","case","'\\'':\n","case","'&':\n","case","'\\t':\n","case","'\\n':\n","case","'\\r':\n","out",".","print","(","\"&#\"","+","(","int",")","c","+","\"",";","\"",")",";","break",";","default:\n","out",".","print","(","c",")",";","}","}"],"docstring_tokens":["Encode","a","String","for","XML","output,","displaying","it","to","a","PrintWriter"],"prompt_tokens":[]}
{"code_tokens":["@Deprecated","//","to","be","removed","before","2",".","0\n","public","static","RelMetadataProvider","reflectiveSource","(","MetadataHandler","target,\n","Method",".",".",".","methods",")","{","return","reflectiveSource","(","target,","ImmutableList",".","copyOf","(","methods",")",",","target",".","getDef","(",")",".","handlerClass",")",";"],"docstring_tokens":["Returns","a","reflective","metadata","provider","that","implements","several","methods"],"prompt_tokens":[]}
{"code_tokens":["public","void","execute","(","SqlCreateForeignSchema","create,\n","CalcitePrepare",".","Context","context",")","{","final","Pair<CalciteSchema,","String>","pair","=\n","schema","(","context,","true,","create",".","name",")",";","final","SchemaPlus","subSchema0","=","pair",".","left",".","plus","(",")",".","getSubSchema","(","pair",".","right",")",";","if","(","subSchema0","!=","null",")","{","if","(","!create",".","getReplace","(",")","&&","!create",".","ifNotExists",")","{","throw","SqlUtil",".","newContextException","(","create",".","name",".","getParserPosition","(",")",",\n","RESOURCE",".","schemaExists","(","pair",".","right",")",")",";","}","}","final","Schema","subSchema",";","final","String","libraryName",";","if","(","create",".","type","!=","null",")","{","Preconditions",".","checkArgument","(","create",".","library","==","null",")",";","final","String","typeName","=","(","String",")","value","(","create",".","type",")",";","final","JsonSchema",".","Type","type","=\n","Util",".","enumVal","(","JsonSchema",".","Type",".","class,\n","typeName",".","toUpperCase","(","Locale",".","ROOT",")",")",";","if","(","type","!=","null",")","{","switch","(","type",")","{","case","JDBC:\n","libraryName","=","JdbcSchema",".","Factory",".","class",".","getName","(",")",";","break",";","default:\n","libraryName","=","null",";","}","}","else","{","libraryName","=","null",";","}","if","(","libraryName","==","null",")","{","throw","SqlUtil",".","newContextException","(","create",".","type",".","getParserPosition","(",")",",\n","RESOURCE",".","schemaInvalidType","(","typeName,\n","Arrays",".","toString","(","JsonSchema",".","Type",".","values","(",")",")",")",")",";","}","}","else","{","Preconditions",".","checkArgument","(","create",".","library","!=","null",")",";","libraryName","=","(","String",")","value","(","create",".","library",")",";","}","final","SchemaFactory","schemaFactory","=\n","AvaticaUtils",".","instantiatePlugin","(","SchemaFactory",".","class,","libraryName",")",";","final","Map<String,","Object>","operandMap","=","new","LinkedHashMap<>","(",")",";","for","(","Pair<SqlIdentifier,","SqlNode>","option",":","create",".","options","(",")",")","{","operandMap",".","put","(","option",".","left",".","getSimple","(",")",",","value","(","option",".","right",")",")",";","}","subSchema","=\n","schemaFactory",".","create","(","pair",".","left",".","plus","(",")",",","pair",".","right,","operandMap",")",";","pair",".","left",".","add","(","pair",".","right,","subSchema",")",";"],"docstring_tokens":["Executes","a","CREATE","FOREIGN","SCHEMA","command"],"prompt_tokens":[]}
{"code_tokens":["public","void","execute","(","SqlCreateMaterializedView","create,\n","CalcitePrepare",".","Context","context",")","{","final","Pair<CalciteSchema,","String>","pair","=","schema","(","context,","true,","create",".","name",")",";","if","(","pair",".","left",".","plus","(",")",".","getTable","(","pair",".","right",")","!=","null",")","{","//","Materialized","view","exists",".","if","(","!create",".","ifNotExists",")","{","//","They","did","not","specify","IF","NOT","EXISTS,","so","give","error",".","throw","SqlUtil",".","newContextException","(","create",".","name",".","getParserPosition","(",")",",\n","RESOURCE",".","tableExists","(","pair",".","right",")",")",";","}","return",";","}","final","SqlNode","q","=","renameColumns","(","create",".","columnList,","create",".","query",")",";","final","String","sql","=","q",".","toSqlString","(","CalciteSqlDialect",".","DEFAULT",")",".","getSql","(",")",";","final","List<String>","schemaPath","=","pair",".","left",".","path","(","null",")",";","final","ViewTableMacro","viewTableMacro","=\n","ViewTable",".","viewMacro","(","pair",".","left",".","plus","(",")",",","sql,","schemaPath,\n","context",".","getObjectPath","(",")",",","false",")",";","final","TranslatableTable","x","=","viewTableMacro",".","apply","(","ImmutableList",".","of","(",")",")",";","final","RelDataType","rowType","=","x",".","getRowType","(","context",".","getTypeFactory","(",")",")",";","\n\n","//","Table","does","not","exist",".","Create","it",".","final","MaterializedViewTable","table","=\n","new","MaterializedViewTable","(","pair",".","right,","RelDataTypeImpl",".","proto","(","rowType",")",")",";","pair",".","left",".","add","(","pair",".","right,","table",")",";","populate","(","create",".","name,","create",".","query,","context",")",";","table",".","key","=\n","MaterializationService",".","instance","(",")",".","defineMaterialization","(","pair",".","left,","null,\n","sql,","schemaPath,","pair",".","right,","true,","true",")",";"],"docstring_tokens":["Executes","a","CREATE","MATERIALIZED","VIEW","command"],"prompt_tokens":[]}
{"code_tokens":["public","void","execute","(","SqlCreateSchema","create,\n","CalcitePrepare",".","Context","context",")","{","final","Pair<CalciteSchema,","String>","pair","=","schema","(","context,","true,","create",".","name",")",";","final","SchemaPlus","subSchema0","=","pair",".","left",".","plus","(",")",".","getSubSchema","(","pair",".","right",")",";","if","(","subSchema0","!=","null",")","{","if","(","create",".","ifNotExists",")","{","return",";","}","if","(","!create",".","getReplace","(",")",")","{","throw","SqlUtil",".","newContextException","(","create",".","name",".","getParserPosition","(",")",",\n","RESOURCE",".","schemaExists","(","pair",".","right",")",")",";","}","}","final","Schema","subSchema","=","new","AbstractSchema","(",")",";","pair",".","left",".","add","(","pair",".","right,","subSchema",")",";"],"docstring_tokens":["Executes","a","CREATE","SCHEMA","command"],"prompt_tokens":[]}
{"code_tokens":["public","void","execute","(","SqlDropSchema","drop,\n","CalcitePrepare",".","Context","context",")","{","final","Pair<CalciteSchema,","String>","pair","=","schema","(","context,","false,","drop",".","name",")",";","final","boolean","existed","=","pair",".","left","!=","null","&&","pair",".","left",".","removeSubSchema","(","pair",".","right",")",";","if","(","!existed","&&","!drop",".","ifExists",")","{","throw","SqlUtil",".","newContextException","(","drop",".","name",".","getParserPosition","(",")",",\n","RESOURCE",".","schemaNotFound","(","pair",".","right",")",")",";","}"],"docstring_tokens":["Executes","a","DROP","SCHEMA","command"],"prompt_tokens":[]}
{"code_tokens":["public","void","execute","(","SqlCreateView","create,\n","CalcitePrepare",".","Context","context",")","{","final","Pair<CalciteSchema,","String>","pair","=\n","schema","(","context,","true,","create",".","name",")",";","final","SchemaPlus","schemaPlus","=","pair",".","left",".","plus","(",")",";","for","(","Function","function",":","schemaPlus",".","getFunctions","(","pair",".","right",")",")","{","if","(","function",".","getParameters","(",")",".","isEmpty","(",")",")","{","if","(","!create",".","getReplace","(",")",")","{","throw","SqlUtil",".","newContextException","(","create",".","name",".","getParserPosition","(",")",",\n","RESOURCE",".","viewExists","(","pair",".","right",")",")",";","}","pair",".","left",".","removeFunction","(","pair",".","right",")",";","}","}","final","SqlNode","q","=","renameColumns","(","create",".","columnList,","create",".","query",")",";","final","String","sql","=","q",".","toSqlString","(","CalciteSqlDialect",".","DEFAULT",")",".","getSql","(",")",";","final","ViewTableMacro","viewTableMacro","=\n","ViewTable",".","viewMacro","(","schemaPlus,","sql,","pair",".","left",".","path","(","null",")",",\n","context",".","getObjectPath","(",")",",","false",")",";","final","TranslatableTable","x","=","viewTableMacro",".","apply","(","ImmutableList",".","of","(",")",")",";","Util",".","discard","(","x",")",";","schemaPlus",".","add","(","pair",".","right,","viewTableMacro",")",";"],"docstring_tokens":["Executes","a","CREATE","VIEW","command"],"prompt_tokens":[]}
{"code_tokens":["static","boolean","isValidSignature","(","String","signature",")","{","return","VALID_SIG",".","matcher","(","signature",")",".","matches","(",")",";"],"docstring_tokens":["Returns","whether","a","signature","represents","an","sequence","of","relational","operators","that","can","be","translated","into","a","valid","Druid","query"],"prompt_tokens":[]}
{"code_tokens":["private","static","boolean","needUtcTimeExtract","(","RexNode","rexNode",")","{","return","rexNode",".","getType","(",")",".","getSqlTypeName","(",")","==","SqlTypeName",".","DATE\n","||","rexNode",".","getType","(",")",".","getSqlTypeName","(",")","==","SqlTypeName",".","TIMESTAMP\n","||","rexNode",".","getType","(",")",".","getSqlTypeName","(",")","==","SqlTypeName",".","TIMESTAMP_WITH_LOCAL_TIME_ZONE",";"],"docstring_tokens":["Check","if","it","is","needed","to","use","UTC","for","DATE","and","TIMESTAMP","types"],"prompt_tokens":[]}
{"code_tokens":["private","static","boolean","isValidLeafCast","(","RexNode","rexNode",")","{","assert","rexNode",".","isA","(","SqlKind",".","CAST",")",";","final","RexNode","input","=","(","(","RexCall",")","rexNode",")",".","getOperands","(",")",".","get","(","0",")",";","if","(","!input",".","isA","(","SqlKind",".","INPUT_REF",")",")","{","//","it","is","not","a","leaf","cast","don't","bother","going","further",".","return","false",";","}","final","SqlTypeName","toTypeName","=","rexNode",".","getType","(",")",".","getSqlTypeName","(",")",";","if","(","toTypeName",".","getFamily","(",")","==","SqlTypeFamily",".","CHARACTER",")","{","//","CAST","of","input","to","character","type\n","return","true",";","}","if","(","toTypeName",".","getFamily","(",")","==","SqlTypeFamily",".","NUMERIC",")","{","//","CAST","of","input","to","numeric","type,","it","is","part","of","a","bounded","comparison\n","return","true",";","}","if","(","toTypeName",".","getFamily","(",")","==","SqlTypeFamily",".","TIMESTAMP\n","||","toTypeName",".","getFamily","(",")","==","SqlTypeFamily",".","DATETIME",")","{","//","CAST","of","literal","to","timestamp","type\n","return","true",";","}","if","(","toTypeName",".","getFamily","(",")",".","contains","(","input",".","getType","(",")",")",")","{","//","same","type","it","is","okay","to","push","it\n","return","true",";","}","//","Currently","other","CAST","operations","cannot","be","pushed","to","Druid\n","return","false",";","\n\n"],"docstring_tokens":["Returns","whether","a","RexNode","is","a","valid","Druid","cast","operation"],"prompt_tokens":[]}
{"code_tokens":["protected","static","@Nullable","String","extractColumnName","(","RexNode","rexNode,","RelDataType","rowType,\n","DruidQuery","query",")","{","if","(","rexNode",".","getKind","(",")","==","SqlKind",".","INPUT_REF",")","{","final","RexInputRef","ref","=","(","RexInputRef",")","rexNode",";","final","String","columnName","=","rowType",".","getFieldNames","(",")",".","get","(","ref",".","getIndex","(",")",")",";","if","(","columnName","==","null",")","{","return","null",";","}","//","calcite","has","this","un-direct","renaming","of","timestampFieldName","to","native","druid","`__time`\n","if","(","query",".","getDruidTable","(",")",".","timestampFieldName",".","equals","(","columnName",")",")","{","return","DruidTable",".","DEFAULT_TIMESTAMP_COLUMN",";","}","return","columnName",";","}","return","null",";"],"docstring_tokens":["Returns","Druid","column","name","or","null","when","it","is","not","possible","to","translate"],"prompt_tokens":[]}
{"code_tokens":["public","static","String","toString","(","Node","expression",")","{","return","toString","(","Collections",".","singletonList","(","expression",")",",","\"\",","true",")",";"],"docstring_tokens":["Converts","an","expression","to","Java","source","code"],"prompt_tokens":[]}
{"code_tokens":["public","static","BinaryExpression","add","(","Expression","left,","Expression","right",")","{","return","makeBinary","(","ExpressionType",".","Add,","left,","right",")",";"],"docstring_tokens":["Creates","a","BinaryExpression","that","represents","an","arithmetic","addition","operation","that","does","not","have","overflow","checking"],"prompt_tokens":[]}
{"code_tokens":["public","static","IndexExpression","arrayIndex","(","Expression","array,\n","Expression","indexExpression",")","{","return","new","IndexExpression","(","array,\n","Collections",".","singletonList","(","indexExpression",")",")",";"],"docstring_tokens":["Creates","an","expression","that","represents","applying","an","array","index","operator","to","an","array","of","rank","one"],"prompt_tokens":[]}
{"code_tokens":["public","static","BlockStatement","block","(","Iterable<?","extends","Statement>","statements",")","{","return","block","(","(","Type",")","null,","statements",")",";"],"docstring_tokens":["Creates","a","BlockExpression","that","contains","the","given","statements"],"prompt_tokens":[]}
{"code_tokens":["public","static","BlockStatement","block","(","@Nullable","Type","type,\n","Iterable<?","extends","Statement>","expressions",")","{","List<Statement>","list","=","toList","(","expressions",")",";","if","(","type","==","null",")","{","if","(","list",".","size","(",")",">","0",")","{","type","=","list",".","get","(","list",".","size","(",")","-","1",")",".","getType","(",")",";","}","else","{","type","=","Void",".","TYPE",";","}","}","return","new","BlockStatement","(","list,","type",")",";"],"docstring_tokens":["Creates","a","BlockExpression","that","contains","the","given","expressions,","has","no","variables","and","has","specific","result","type"],"prompt_tokens":[]}
{"code_tokens":["public","static","MethodCallExpression","call","(","@Nullable","Expression","expression,","Method","method,\n","Expression",".",".",".","arguments",")","{","return","new","MethodCallExpression","(","method,","expression,","toList","(","arguments",")",")",";"],"docstring_tokens":["Creates","a","MethodCallExpression","that","represents","a","call","to","a","method","that","takes","arguments,","using","varargs"],"prompt_tokens":[]}
{"code_tokens":["public","static","MethodCallExpression","call","(","Type","type,","String","methodName,\n","Iterable<?","extends","Expression>","arguments",")","{","Method","method","=","Types",".","lookupMethod","(","Types",".","toClass","(","type",")",",","methodName,\n","Types",".","toClassArray","(","arguments",")",")",";","return","new","MethodCallExpression","(","method,","null,","toList","(","arguments",")",")",";"],"docstring_tokens":["Creates","a","MethodCallExpression","that","represents","a","call","to","a","static","method","by","calling","the","appropriate","factory","method"],"prompt_tokens":[]}
{"code_tokens":["public","static","ConstantExpression","constant","(","@Nullable","Object","value,","Type","type",")","{","if","(","value","!=","null","&&","type","instanceof","Class",")","{","//","Fix","up","value","so","that","it","matches","type",".","Class<?>","clazz","=","(","Class<?>",")","type",";","Primitive","primitive","=","Primitive",".","ofBoxOr","(","clazz",")",";","if","(","primitive","!=","null",")","{","clazz","=","requireNonNull","(","primitive",".","boxClass,","\"boxClass\"",")",";","}","if","(","(","clazz","==","Float",".","class","||","clazz","==","Double",".","class",")","&&","value","instanceof","BigDecimal",")","{","//","Don't","try","to","convert","the","value","of","float","and","double","literals",".","//","We'd","experience","rounding,","e",".","g",".","3",".","2","becomes","3",".","1999998",".","}","else","if","(","!clazz",".","isInstance","(","value",")",")","{","String","stringValue","=","String",".","valueOf","(","value",")",";","if","(","type","==","BigDecimal",".","class",")","{","value","=","new","BigDecimal","(","stringValue",")",";","}","if","(","type","==","BigInteger",".","class",")","{","value","=","new","BigInteger","(","stringValue",")",";","}","if","(","primitive","!=","null",")","{","value","=","primitive",".","parse","(","stringValue",")",";","}","}","}","return","new","ConstantExpression","(","type,","value",")",";"],"docstring_tokens":["Creates","a","ConstantExpression","that","has","the","Value","and","Type","properties","set","to","the","specified","values"],"prompt_tokens":[]}
{"code_tokens":["public","static","UnaryExpression","convert_","(","Expression","expression,","Type","type",")","{","return","new","UnaryExpression","(","ExpressionType",".","Convert,","type,","expression",")",";"],"docstring_tokens":["Creates","a","UnaryExpression","that","represents","a","type","conversion","operation"],"prompt_tokens":[]}
{"code_tokens":["public","static","BinaryExpression","equal","(","Expression","left,","Expression","right",")","{","return","makeBinary","(","ExpressionType",".","Equal,","left,","right",")",";"],"docstring_tokens":["Creates","a","BinaryExpression","that","represents","an","equality","comparison"],"prompt_tokens":[]}
{"code_tokens":["public","static","MemberExpression","field","(","@Nullable","Expression","expression,","Field","field",")","{","return","makeMemberAccess","(","expression,","Types",".","field","(","field",")",")",";"],"docstring_tokens":["Creates","a","MemberExpression","that","represents","accessing","a","field"],"prompt_tokens":[]}
{"code_tokens":["public","static","MemberExpression","field","(","Expression","expression,\n","String","fieldName",")","{","PseudoField","field","=","Types",".","getField","(","fieldName,","expression",".","getType","(",")",")",";","return","makeMemberAccess","(","expression,","field",")",";"],"docstring_tokens":["Creates","a","MemberExpression","that","represents","accessing","a","field","given","the","name","of","the","field"],"prompt_tokens":[]}
{"code_tokens":["public","static","ConditionalStatement","ifThen","(","Expression","test,","Node","ifTrue",")","{","return","new","ConditionalStatement","(","Arrays",".","asList","(","test,","ifTrue",")",")",";"],"docstring_tokens":["Creates","a","ConditionalExpression","that","represents","a","conditional","block","with","an","if","statement"],"prompt_tokens":[]}
{"code_tokens":["public","static","ConditionalStatement","ifThenElse","(","Expression","test,","Node","ifTrue,\n","Node","ifFalse",")","{","return","new","ConditionalStatement","(","Arrays",".","asList","(","test,","ifTrue,","ifFalse",")",")",";"],"docstring_tokens":["Creates","a","ConditionalExpression","that","represents","a","conditional","block","with","if","and","else","statements"],"prompt_tokens":[]}
{"code_tokens":["public","static","<F","extends","Function<?>>","FunctionExpression<F>","lambda","(","BlockStatement","body,\n","Iterable<?","extends","ParameterExpression>","parameters",")","{","final","List<ParameterExpression>","parameterList","=","toList","(","parameters",")",";","@SuppressWarnings","(","\"unchecked\"",")","Class<F>","type","=","deduceType","(","parameterList,","body",".","getType","(",")",")",";","return","new","FunctionExpression<>","(","type,","body,","parameterList",")",";"],"docstring_tokens":["Creates","a","LambdaExpression","by","first","constructing","a","delegate","type"],"prompt_tokens":[]}
{"code_tokens":["public","static","BinaryExpression","multiply","(","Expression","left,","Expression","right",")","{","return","makeBinary","(","ExpressionType",".","Multiply,","left,","right",")",";"],"docstring_tokens":["Creates","a","BinaryExpression","that","represents","an","arithmetic","multiplication","operation","that","does","not","have","overflow","checking"],"prompt_tokens":[]}
{"code_tokens":["public","static","NewExpression","new_","(","Type","type",")","{","return","new_","(","type,","ImmutableList",".","of","(",")",")",";"],"docstring_tokens":["Creates","a","NewExpression","that","represents","calling","the","parameterless","constructor","of","the","specified","type"],"prompt_tokens":[]}
{"code_tokens":["public","static","ParameterExpression","parameter","(","Type","type,","String","name",")","{","return","new","ParameterExpression","(","0,","type,","name",")",";"],"docstring_tokens":["Creates","a","ParameterExpression","node","that","can","be","used","to","identify","a","parameter","or","a","variable","in","an","expression","tree"],"prompt_tokens":[]}
{"code_tokens":["public","static","SwitchCase","switchCase","(","Expression","expression,\n","Iterable<?","extends","Expression>","body",")","{","throw","Extensions",".","todo","(",")",";"],"docstring_tokens":["Creates","a","SwitchCase","for","use","in","a","SwitchExpression"],"prompt_tokens":[]}
{"code_tokens":["public","static","SwitchCase","switchCase","(","Expression","expression,\n","Expression",".",".",".","body",")","{","return","switchCase","(","expression,","toList","(","body",")",")",";"],"docstring_tokens":["Creates","a","SwitchCase","for","use","in","a","SwitchExpression,","with","varargs"],"prompt_tokens":[]}
{"code_tokens":["public","static","ThrowStatement","throw_","(","Expression","expression",")","{","return","new","ThrowStatement","(","expression",")",";"],"docstring_tokens":["Creates","a","statement","that","represents","the","throwing","of","an","exception"],"prompt_tokens":[]}
{"code_tokens":["public","static","DeclarationStatement","declare","(","int","modifiers,\n","ParameterExpression","parameter,","@Nullable","Expression","initializer",")","{","return","new","DeclarationStatement","(","modifiers,","parameter,","initializer",")",";"],"docstring_tokens":["Creates","a","statement","that","declares","a","variable"],"prompt_tokens":[]}
{"code_tokens":["public","static","ImmutableIntList","of","(",")","{","return","EMPTY",";"],"docstring_tokens":["Returns","an","empty","ImmutableIntList"],"prompt_tokens":[]}
{"code_tokens":["public","static","ImmutableIntList","of","(","int",".",".",".","ints",")","{","return","new","ImmutableIntList","(","ints",".","clone","(",")",")",";"],"docstring_tokens":["Creates","an","ImmutableIntList","from","an","array","of","int"],"prompt_tokens":[]}
{"code_tokens":["public","static","ImmutableIntList","copyOf","(","Number",".",".",".","numbers",")","{","final","int[]","ints","=","new","int[numbers",".","length]",";","for","(","int","i","=","0",";","i","<","ints",".","length",";","i++",")","{","ints[i]","=","numbers[i]",".","intValue","(",")",";","}","return","new","ImmutableIntList","(","ints",")",";"],"docstring_tokens":["Creates","an","ImmutableIntList","from","an","array","of","Number"],"prompt_tokens":[]}
{"code_tokens":["public","static","ImmutableIntList","copyOf","(","Iterable<?","extends","Number>","list",")","{","if","(","list","instanceof","ImmutableIntList",")","{","return","(","ImmutableIntList",")","list",";","}","@SuppressWarnings","(","\"unchecked\"",")","final","Collection<?","extends","Number>","collection","=\n","list","instanceof","Collection\n","?","(","Collection<?","extends","Number>",")","list\n",":","Lists",".","newArrayList","(","list",")",";","return","copyFromCollection","(","collection",")",";"],"docstring_tokens":["Creates","an","ImmutableIntList","from","an","iterable","of","Number"],"prompt_tokens":[]}
{"code_tokens":["public","static","ImmutableIntList","copyOf","(","Iterator<?","extends","Number>","list",")","{","return","copyFromCollection","(","Lists",".","newArrayList","(","list",")",")",";"],"docstring_tokens":["Creates","an","ImmutableIntList","from","an","iterator","of","Number"],"prompt_tokens":[]}
{"code_tokens":["public","int[]","toIntArray","(",")","{","return","ints",".","clone","(",")",";"],"docstring_tokens":["Returns","an","array","of","ints","with","the","same","contents","as","this","list"],"prompt_tokens":[]}
{"code_tokens":["public","ImmutableIntList","append","(","int","element",")","{","if","(","ints",".","length","==","0",")","{","return","of","(","element",")",";","}","final","int[]","newInts","=","Arrays",".","copyOf","(","this",".","ints,","ints",".","length","+","1",")",";","newInts[ints",".","length]","=","element",";","return","new","ImmutableIntList","(","newInts",")",";"],"docstring_tokens":["Returns","a","copy","of","this","list","with","one","element","added"],"prompt_tokens":[]}
{"code_tokens":["public","static","ImmutableIntList","identity","(","int","count",")","{","final","int[]","integers","=","new","int[count]",";","for","(","int","i","=","0",";","i","<","integers",".","length",";","i++",")","{","integers[i]","=","i",";","}","return","new","ImmutableIntList","(","integers",")",";"],"docstring_tokens":["Returns","the","identity","list","[0,","...,","count","-","1]"],"prompt_tokens":[]}
{"code_tokens":["public","ImmutableIntList","appendAll","(","Iterable<Integer>","list",")","{","if","(","list","instanceof","Collection","&&","(","(","Collection",")","list",")",".","isEmpty","(",")",")","{","return","this",";","}","return","ImmutableIntList",".","copyOf","(","Iterables",".","concat","(","this,","list",")",")",";"],"docstring_tokens":["Returns","a","copy","of","this","list","with","all","of","the","given","integers","added"],"prompt_tokens":[]}
{"code_tokens":["public","ImmutableIntList","incr","(","int","offset",")","{","final","int[]","integers","=","new","int[ints",".","length]",";","for","(","int","i","=","0",";","i","<","ints",".","length",";","i++",")","{","integers[i]","=","ints[i]","+","offset",";","}","return","new","ImmutableIntList","(","integers",")",";"],"docstring_tokens":["Increments","offset","to","each","element","of","the","list","and","returns","a","new","int","list"],"prompt_tokens":[]}
{"code_tokens":["public","T","value","(",")","{","return","value",";"],"docstring_tokens":["Returns","the","value","of","this","property"],"prompt_tokens":[]}
{"code_tokens":["Iterable<SqlCall>","findAll","(","Iterable<SqlNode>","nodes",")","{","final","AggIterable","aggIterable","=\n","new","AggIterable","(","opTab,","over,","aggregate,","group,","delegate,","nameMatcher",")",";","for","(","SqlNode","node",":","nodes",")","{","node",".","accept","(","aggIterable",")",";","}","return","aggIterable",".","calls",";"],"docstring_tokens":["Creates","a","copy","of","this","finder","that","has","the","same","parameters","as","this,","then","returns","the","list","of","all","aggregates","found"],"prompt_tokens":[]}
{"code_tokens":["public","boolean","isRuleExcluded","(",")","{","if","(","!","(","rels[0]","instanceof","Hintable",")",")","{","return","false",";","}","\n\n","return","rels[0]",".","getCluster","(",")",".","getHintStrategies","(",")",".","isRuleExcluded","(","(","Hintable",")","rels[0],","rule",")",";"],"docstring_tokens":["Determines","whether","the","rule","is","excluded","by","any","root","node","hint"],"prompt_tokens":[]}
{"code_tokens":["public","void","addListener","(","RelOptListener","listener",")","{","listeners",".","add","(","listener",")",";"],"docstring_tokens":["Adds","a","listener","which","will","receive","multicast","events"],"prompt_tokens":[]}
{"code_tokens":["public","void","put","(","String","name,","V","v",")","{","List<V>","list","=","map","(",")",".","computeIfAbsent","(","name,","k","->","new","ArrayList<>","(",")",")",";","list",".","add","(","v",")",";"],"docstring_tokens":["Adds","an","entry","to","this","multimap"],"prompt_tokens":[]}
{"code_tokens":["public","Collection<Map",".","Entry<String,","V>>","range","(","String","name,\n","boolean","caseSensitive",")","{","NavigableMap<String,","List<V>>","range","=","map",".","range","(","name,","caseSensitive",")",";","List<Pair<String,","V>>","result","=","range",".","entrySet","(",")",".","stream","(",")",".","flatMap","(","e","->","e",".","getValue","(",")",".","stream","(",")",".","map","(","v","->","Pair",".","of","(","e",".","getKey","(",")",",","v",")",")",")",".","collect","(","Collectors",".","toList","(",")",")",";","return","Collections",".","unmodifiableList","(","result",")",";"],"docstring_tokens":["Returns","a","map","containing","all","the","entries","in","this","multimap","that","match","the","given","name"],"prompt_tokens":[]}
{"code_tokens":["public","static","ViewTableMacro","viewMacro","(","SchemaPlus","schema,","String","viewSql,\n","List<String>","schemaPath,","@Nullable","List<String>","viewPath,\n","@Nullable","Boolean","modifiable",")","{","return","new","ViewTableMacro","(","CalciteSchema",".","from","(","schema",")",",","viewSql,","schemaPath,\n","viewPath,","modifiable",")",";"],"docstring_tokens":["Table","macro","that","returns","a","view"],"prompt_tokens":[]}
{"code_tokens":["private","static","int","prevRight","(","@Nullable","Token","token",")","{","for","(",";","token","!=","null",";","token","=","token",".","previous",")","{","if","(","token",".","type","==","Type",".","POSTFIX",")","{","return","Integer",".","MAX_VALUE",";","}","if","(","token",".","right",">=","0",")","{","return","token",".","right",";","}","}","return","-1",";"],"docstring_tokens":["Returns","the","right","precedence","of","the","preceding","operator","token"],"prompt_tokens":[]}
{"code_tokens":["private","static","int","nextLeft","(","@Nullable","Token","token",")","{","for","(",";","token","!=","null",";","token","=","token",".","next",")","{","if","(","token",".","type","==","Type",".","PREFIX",")","{","return","Integer",".","MAX_VALUE",";","}","if","(","token",".","left",">=","0",")","{","return","token",".","left",";","}","}","return","-1",";"],"docstring_tokens":["Returns","the","left","precedence","of","the","following","operator","token"],"prompt_tokens":[]}
{"code_tokens":["public","static","Builder","builder","(",")","{","return","new","Builder","(",")",";"],"docstring_tokens":["Returns","a","Builder","to","build","the","type","mappings"],"prompt_tokens":[]}
{"code_tokens":["public","static","Program","of","(","RuleSet","ruleSet",")","{","return","new","RuleSetProgram","(","ruleSet",")",";"],"docstring_tokens":["Creates","a","program","that","executes","a","rule","set"],"prompt_tokens":[]}
{"code_tokens":["public","static","Program","ofRules","(","RelOptRule",".",".",".","rules",")","{","return","of","(","RuleSets",".","ofList","(","rules",")",")",";"],"docstring_tokens":["Creates","a","program","from","a","list","of","rules"],"prompt_tokens":[]}
{"code_tokens":["public","static","Program","hep","(","Iterable<?","extends","RelOptRule>","rules,\n","boolean","noDag,","RelMetadataProvider","metadataProvider",")","{","final","HepProgramBuilder","builder","=","HepProgram",".","builder","(",")",";","for","(","RelOptRule","rule",":","rules",")","{","builder",".","addRuleInstance","(","rule",")",";","}","return","of","(","builder",".","build","(",")",",","noDag,","metadataProvider",")",";"],"docstring_tokens":["Creates","a","program","that","executes","a","list","of","rules","in","a","HEP","planner"],"prompt_tokens":[]}
{"code_tokens":["public","static","Program","standard","(",")","{","return","standard","(","DefaultRelMetadataProvider",".","INSTANCE",")",";"],"docstring_tokens":["Returns","the","standard","program","used","by","Prepare"],"prompt_tokens":[]}
{"code_tokens":["protected","@Nullable","Multimap<Integer,","Integer>","generateMapping","(","RexBuilder","rexBuilder,\n","RexSimplify","simplify,\n","RelMetadataQuery","mq,\n","RelNode","node,\n","RelNode","target,\n","ImmutableBitSet","positions,\n","BiMap<RelTableRef,","RelTableRef>","tableMapping,\n","EquivalenceClasses","sourceEC,\n","List<RexNode>","additionalExprs",")","{","Preconditions",".","checkArgument","(","additionalExprs",".","isEmpty","(",")",")",";","Multimap<Integer,","Integer>","m","=","ArrayListMultimap",".","create","(",")",";","Map<RexTableInputRef,","Set<RexTableInputRef>>","equivalenceClassesMap","=\n","sourceEC",".","getEquivalenceClassesMap","(",")",";","Multimap<RexNode,","Integer>","exprsLineage","=","ArrayListMultimap",".","create","(",")",";","final","List<RexNode>","timestampExprs","=","new","ArrayList<>","(",")",";","for","(","int","i","=","0",";","i","<","target",".","getRowType","(",")",".","getFieldCount","(",")",";","i++",")","{","Set<RexNode>","s","=","mq",".","getExpressionLineage","(","target,","rexBuilder",".","makeInputRef","(","target,","i",")",")",";","if","(","s","==","null",")","{","//","Bail","out\n","continue",";","}","//","We","only","support","project","-","filter","-","join,","thus","it","should","map","to\n","//","a","single","expression\n","final","RexNode","e","=","Iterables",".","getOnlyElement","(","s",")",";","//","Rewrite","expr","to","be","expressed","on","query","tables\n","final","RexNode","simplified","=","simplify",".","simplifyUnknownAsFalse","(","e",")",";","final","RexNode","expr","=","RexUtil",".","swapTableColumnReferences","(","rexBuilder,\n","simplified,\n","tableMapping",".","inverse","(",")",",\n","equivalenceClassesMap",")",";","exprsLineage",".","put","(","expr,","i",")",";","SqlTypeName","sqlTypeName","=","expr",".","getType","(",")",".","getSqlTypeName","(",")",";","if","(","sqlTypeName","==","SqlTypeName",".","TIMESTAMP\n","||","sqlTypeName","==","SqlTypeName",".","TIMESTAMP_WITH_LOCAL_TIME_ZONE",")","{","timestampExprs",".","add","(","expr",")",";","}","}","\n\n","//","If","this","is","a","column","of","TIMESTAMP","(","WITH","LOCAL","TIME","ZONE",")","//","type,","we","add","the","possible","rollup","columns","too",".","//","This","way","we","will","be","able","to","match","FLOOR","(","ts","to","HOUR",")","to\n","//","FLOOR","(","ts","to","DAY",")","via","FLOOR","(","FLOOR","(","ts","to","HOUR",")","to","DAY",")","for","(","RexNode","timestampExpr",":","timestampExprs",")","{","for","(","TimeUnitRange","value",":","SUPPORTED_DATE_TIME_ROLLUP_UNITS",")","{","final","SqlFunction[]","functions","=","{","getCeilSqlFunction","(","value",")",",\n","getFloorSqlFunction","(","value",")","}",";","for","(","SqlFunction","function",":","functions",")","{","final","RexNode","call","=\n","rexBuilder",".","makeCall","(","function,\n","timestampExpr,","rexBuilder",".","makeFlag","(","value",")",")",";","//","References","self-row\n","final","RexNode","rewrittenCall","=\n","shuttleReferences","(","rexBuilder,","call,","exprsLineage",")",";","if","(","rewrittenCall","==","null",")","{","continue",";","}","//","We","add","the","CEIL","or","FLOOR","expression","to","the","additional\n","//","expressions,","replacing","the","child","expression","by","the","position","that\n","//","it","references\n","additionalExprs",".","add","(","rewrittenCall",")",";","//","Then","we","simplify","the","expression","and","we","add","it","to","the","expressions\n","//","lineage","so","we","can","try","to","find","a","match",".","final","RexNode","simplified","=\n","simplify",".","simplifyUnknownAsFalse","(","call",")",";","exprsLineage",".","put","(","simplified,\n","target",".","getRowType","(",")",".","getFieldCount","(",")","+","additionalExprs",".","size","(",")","-","1",")",";","}","}","}","\n\n","for","(","int","i",":","positions",")","{","Set<RexNode>","s","=","mq",".","getExpressionLineage","(","node,","rexBuilder",".","makeInputRef","(","node,","i",")",")",";","if","(","s","==","null",")","{","//","Bail","out\n","return","null",";","}","//","We","only","support","project","-","filter","-","join,","thus","it","should","map","to\n","//","a","single","expression\n","final","RexNode","e","=","Iterables",".","getOnlyElement","(","s",")",";","//","Rewrite","expr","to","be","expressed","on","query","tables\n","final","RexNode","simplified","=","simplify",".","simplifyUnknownAsFalse","(","e",")",";","RexNode","targetExpr","=","RexUtil",".","swapColumnReferences","(","rexBuilder,\n","simplified,","equivalenceClassesMap",")",";","final","Collection<Integer>","c","=","exprsLineage",".","get","(","targetExpr",")",";","if","(","!c",".","isEmpty","(",")",")","{","for","(","Integer","j",":","c",")","{","m",".","put","(","i,","j",")",";","}","}","else","{","//","If","we","did","not","find","the","expression,","try","to","navigate","it\n","RexNode","rewrittenTargetExpr","=\n","shuttleReferences","(","rexBuilder,","targetExpr,","exprsLineage",")",";","if","(","rewrittenTargetExpr","==","null",")","{","//","Some","expressions","were","not","present\n","return","null",";","}","m",".","put","(","i,","target",".","getRowType","(",")",".","getFieldCount","(",")","+","additionalExprs",".","size","(",")",")",";","additionalExprs",".","add","(","rewrittenTargetExpr",")",";","}","}","return","m",";"],"docstring_tokens":["Mapping","from","node","expressions","to","target","expressions"],"prompt_tokens":[]}
{"code_tokens":["List<String>","getPartitionKeys","(","String","columnFamily,","boolean","isView",")","{","RelationMetadata","table","=","getRelationMetadata","(","columnFamily,","isView",")",";","return","table",".","getPartitionKey","(",")",".","stream","(",")",".","map","(","ColumnMetadata::getName",")",".","map","(","CqlIdentifier::asInternal",")",".","collect","(","Collectors",".","toList","(",")",")",";"],"docstring_tokens":["Returns","the","partition","key","columns","from","the","underlying","CQL","table"],"prompt_tokens":[]}
{"code_tokens":["List<String>","getClusteringKeys","(","String","columnFamily,","boolean","isView",")","{","RelationMetadata","table","=","getRelationMetadata","(","columnFamily,","isView",")",";","return","table",".","getClusteringColumns","(",")",".","keySet","(",")",".","stream","(",")",".","map","(","ColumnMetadata::getName",")",".","map","(","CqlIdentifier::asInternal",")",".","collect","(","Collectors",".","toList","(",")",")",";"],"docstring_tokens":["Returns","the","clustering","keys","from","the","underlying","CQL","table"],"prompt_tokens":[]}
{"code_tokens":["private","void","addMaterializedViews","(",")","{","//","Close","the","hook","used","to","get","us","here\n","hook",".","close","(",")",";","\n\n","for","(","ViewMetadata","view",":","getKeyspace","(",")",".","getViews","(",")",".","values","(",")",")","{","String","tableName","=","view",".","getBaseTable","(",")",".","asInternal","(",")",";","StringBuilder","queryBuilder","=","new","StringBuilder","(","\"SELECT","\"",")",";","\n\n","//","Add","all","the","selected","columns","to","the","query\n","String","columnsList","=","view",".","getColumns","(",")",".","values","(",")",".","stream","(",")",".","map","(","c","->","c",".","getName","(",")",".","asInternal","(",")",")",".","collect","(","Collectors",".","joining","(","\",","\"",")",")",";","queryBuilder",".","append","(","columnsList",")",";","\n\n","queryBuilder",".","append","(","\"","FROM","\"",")",".","append","(","tableName",")",";","\n\n","//","Get","the","where","clause","from","the","system","schema\n","String","whereQuery","=","\"SELECT","where_clause","from","system_schema",".","views","\"\n","+","\"WHERE","keyspace_name='\"","+","keyspace","+","\"'","AND","view_name='\"\n","+","view",".","getName","(",")",".","asInternal","(",")","+","\"'\"",";","\n\n","Row","whereClauseRow","=","Objects",".","requireNonNull","(","session",".","execute","(","whereQuery",")",".","one","(",")",")",";","\n\n","queryBuilder",".","append","(","\"","WHERE","\"",")",".","append","(","whereClauseRow",".","getString","(","0",")",")",";","\n\n","//","Parse","and","unparse","the","view","query","to","get","properly","quoted","field","names\n","String","query","=","queryBuilder",".","toString","(",")",";","SqlParser",".","Config","parserConfig","=","SqlParser",".","config","(",")",".","withUnquotedCasing","(","Casing",".","UNCHANGED",")",";","\n\n","SqlSelect","parsedQuery",";","try","{","parsedQuery","=","(","SqlSelect",")","SqlParser",".","create","(","query,","parserConfig",")",".","parseQuery","(",")",";","}","catch","(","SqlParseException","e",")","{","LOGGER",".","warn","(","\"Could","not","parse","query","{","}","for","CQL","view","{","}",".","{","}","\",\n","query,","keyspace,","view",".","getName","(",")",".","asInternal","(",")",")",";","continue",";","}","\n\n","final","StringBuilder","buf","=","new","StringBuilder","(","query",".","length","(",")",")",";","final","SqlWriterConfig","config","=","SqlPrettyWriter",".","config","(",")",".","withAlwaysUseParentheses","(","true",")",";","final","SqlWriter","writer","=","new","SqlPrettyWriter","(","config,","buf",")",";","parsedQuery",".","unparse","(","writer,","0,","0",")",";","query","=","buf",".","toString","(",")",";","\n\n","//","Add","the","view","for","this","query\n","String","viewName","=","\"$\"","+","getTableNames","(",")",".","size","(",")",";","SchemaPlus","schema","=","parentSchema",".","getSubSchema","(","name",")",";","if","(","schema","==","null",")","{","throw","new","IllegalStateException","(","\"Cannot","find","schema","\"","+","name\n","+","\"","in","parent","schema","\"","+","parentSchema",".","getName","(",")",")",";","}","CalciteSchema","calciteSchema","=","CalciteSchema",".","from","(","schema",")",";","\n\n","List<String>","viewPath","=","calciteSchema",".","path","(","viewName",")",";","\n\n","schema",".","add","(","viewName,\n","MaterializedViewTable",".","create","(","calciteSchema,","query,\n","null,","viewPath,","view",".","getName","(",")",".","asInternal","(",")",",","true",")",")",";","}"],"docstring_tokens":["Adds","all","materialized","views","defined","in","the","schema","to","this","column","family"],"prompt_tokens":[]}
{"code_tokens":["public","List<Object>","getDataList","(","RelDataTypeFactory","typeFactory",")","{","if","(","dataList","==","null",")","{","JsonDataConverter","jsonDataConverter","=\n","JsonEnumerator",".","deduceRowType","(","typeFactory,","source",")",";","dataList","=","jsonDataConverter",".","getDataList","(",")",";","}","return","dataList",";"],"docstring_tokens":["Returns","the","data","list","of","the","table"],"prompt_tokens":[]}
{"code_tokens":["protected","boolean","binaryArithmeticWithStrings","(","SqlCallBinding","binding,\n","RelDataType","left,\n","RelDataType","right",")","{","//","For","expression","\"NUMERIC","<OP>","CHARACTER\",\n","//","PostgreSQL","and","MS-SQL","coerce","the","CHARACTER","operand","to","NUMERIC,\n","//","i",".","e",".","for","'9':VARCHAR","(","1",")","/","2:","INT,","'9'","would","be","coerced","to","INTEGER,\n","//","while","for","'9':VARCHAR","(","1",")","/","3",".","3:","DOUBLE,","'9'","would","be","coerced","to","DOUBLE",".","//","They","do","not","allow","both","CHARACTER","operands","for","binary","arithmetic","operators",".","\n\n","//","MySQL","and","Oracle","would","coerce","all","the","string","operands","to","DOUBLE",".","\n\n","//","Keep","sync","with","PostgreSQL","and","MS-SQL","because","their","behaviors","are","more","in\n","//","line","with","the","SQL","standard",".","if","(","SqlTypeUtil",".","isString","(","left",")","&&","SqlTypeUtil",".","isNumeric","(","right",")",")","{","//","If","the","numeric","operand","is","DECIMAL","type,","coerce","the","STRING","operand","to\n","//","max","precision/scale","DECIMAL",".","if","(","SqlTypeUtil",".","isDecimal","(","right",")",")","{","right","=","SqlTypeUtil",".","getMaxPrecisionScaleDecimal","(","factory",")",";","}","return","coerceOperandType","(","binding",".","getScope","(",")",",","binding",".","getCall","(",")",",","0,","right",")",";","}","else","if","(","SqlTypeUtil",".","isNumeric","(","left",")","&&","SqlTypeUtil",".","isString","(","right",")",")","{","if","(","SqlTypeUtil",".","isDecimal","(","left",")",")","{","left","=","SqlTypeUtil",".","getMaxPrecisionScaleDecimal","(","factory",")",";","}","return","coerceOperandType","(","binding",".","getScope","(",")",",","binding",".","getCall","(",")",",","1,","left",")",";","}","return","false",";"],"docstring_tokens":["For","NUMERIC","and","STRING","operands,","cast","STRING","to","data","type","of","the","other","operand"],"prompt_tokens":[]}
{"code_tokens":["private","boolean","coerceSourceRowType","(","@Nullable","SqlValidatorScope","sourceScope,\n","SqlNode","query,\n","int","columnIndex,\n","RelDataType","targetType",")","{","switch","(","query",".","getKind","(",")",")","{","case","INSERT:\n","SqlInsert","insert","=","(","SqlInsert",")","query",";","return","coerceSourceRowType","(","sourceScope,\n","insert",".","getSource","(",")",",\n","columnIndex,\n","targetType",")",";","case","UPDATE:\n","SqlUpdate","update","=","(","SqlUpdate",")","query",";","final","SqlNodeList","sourceExpressionList","=","update",".","getSourceExpressionList","(",")",";","if","(","sourceExpressionList","!=","null",")","{","return","coerceColumnType","(","sourceScope,","sourceExpressionList,","columnIndex,","targetType",")",";","}","else","{","//","Note:","this","is","dead","code","since","sourceExpressionList","is","always","non-null\n","return","coerceSourceRowType","(","sourceScope,\n","castNonNull","(","update",".","getSourceSelect","(",")",")",",\n","columnIndex,\n","targetType",")",";","}","default:\n","return","rowTypeCoercion","(","sourceScope,","query,","columnIndex,","targetType",")",";","}"],"docstring_tokens":["Coerces","the","field","expression","at","index","columnIndex","of","source","in","an","INSERT","or","UPDATE","query","to","target","type"],"prompt_tokens":[]}
{"code_tokens":["void","checkMaterialize","(","MaterializedViewFixture","f",")","{","final","TestConfig","testConfig","=","build","(","f",")",";","final","Predicate<String>","checker","=\n","Util",".","first","(","f",".","checker,\n","s","->","MaterializedViewFixture",".","resultContains","(","s,\n","\"EnumerableTableScan","(","table=[[\"\n","+","testConfig",".","defaultSchema","+","\",","MV0]]\"",")",")",";","final","List<RelNode>","substitutes","=\n","optimize","(","testConfig",".","queryRel,","testConfig",".","materializationList",")",";","if","(","substitutes",".","stream","(",")",".","noneMatch","(","sub","->","checker",".","test","(","RelOptUtil",".","toString","(","sub",")",")",")",")","{","StringBuilder","substituteMessages","=","new","StringBuilder","(",")",";","for","(","RelNode","sub:","substitutes",")","{","substituteMessages",".","append","(","RelOptUtil",".","toString","(","sub",")",")",".","append","(","\"\\n\"",")",";","}","throw","new","AssertionError","(","\"Materialized","view","failed","to","be","matched","by","optimized","results:\\n\"\n","+","substituteMessages",")",";","}"],"docstring_tokens":["Checks","that","a","given","query","can","use","a","materialized","view","with","a","given","definition"],"prompt_tokens":[]}
{"code_tokens":["void","checkNoMaterialize","(","MaterializedViewFixture","f",")","{","final","TestConfig","testConfig","=","build","(","f",")",";","final","List<RelNode>","results","=\n","optimize","(","testConfig",".","queryRel,","testConfig",".","materializationList",")",";","if","(","results",".","isEmpty","(",")","||","(","results",".","size","(",")","==","1\n","&&","!RelOptUtil",".","toString","(","results",".","get","(","0",")",")",".","contains","(","\"MV0\"",")",")",")","{","return",";","}","final","StringBuilder","errMsgBuilder","=","new","StringBuilder","(",")",";","errMsgBuilder",".","append","(","\"Optimization","succeeds","out","of","expectation:","\"",")",";","for","(","RelNode","res:","results",")","{","errMsgBuilder",".","append","(","RelOptUtil",".","toString","(","res",")",")",".","append","(","\"\\n\"",")",";","}","throw","new","AssertionError","(","errMsgBuilder",".","toString","(",")",")",";"],"docstring_tokens":["Checks","that","a","given","query","cannot","use","a","materialized","view","with","a","given","definition"],"prompt_tokens":[]}
{"code_tokens":["private","static","void","parse","(","QueryType","queryType,","InputStream","in,","Sink","sink,\n","List<String>","fieldNames,","List<ColumnMetaData",".","Rep>","fieldTypes,","Page","page",")","{","final","JsonFactory","factory","=","new","JsonFactory","(",")",";","final","Row",".","RowBuilder","rowBuilder","=","Row",".","newBuilder","(","fieldNames",".","size","(",")",")",";","\n\n","if","(","CalciteSystemProperty",".","DEBUG",".","value","(",")",")","{","try","{","final","byte[]","bytes","=","AvaticaUtils",".","readFullyToBytes","(","in",")",";","System",".","out",".","println","(","\"Response:","\"\n","+","new","String","(","bytes,","StandardCharsets",".","UTF_8",")",")",";","//","CHECKSTYLE:","IGNORE","0\n","in","=","new","ByteArrayInputStream","(","bytes",")",";","}","catch","(","IOException","e",")","{","throw","new","RuntimeException","(","e",")",";","}","}","\n\n","int","posTimestampField","=","-1",";","for","(","int","i","=","0",";","i","<","fieldTypes",".","size","(",")",";","i++",")","{","/*@TODO","This","need","to","be","revisited",".","The","logic","seems","implying","that","only\n","one","column","of","type","timestamp","is","present,","this","is","not","necessarily","true,\n","see","https://issues",".","apache",".","org/jira/browse/CALCITE-2175\n","*/\n","if","(","fieldTypes",".","get","(","i",")","==","ColumnMetaData",".","Rep",".","JAVA_SQL_TIMESTAMP",")","{","posTimestampField","=","i",";","break",";","}","}","\n\n","try","(","JsonParser","parser","=","factory",".","createParser","(","in",")",")","{","switch","(","queryType",")","{","case","TIMESERIES:\n","if","(","parser",".","nextToken","(",")","==","JsonToken",".","START_ARRAY",")","{","while","(","parser",".","nextToken","(",")","==","JsonToken",".","START_OBJECT",")","{","//","loop","until","token","equal","to","\"","}","\"\n","final","Long","timeValue","=","extractTimestampField","(","parser",")",";","if","(","parser",".","nextToken","(",")","==","JsonToken",".","FIELD_NAME\n","&&","parser",".","getCurrentName","(",")",".","equals","(","\"result\"",")","&&","parser",".","nextToken","(",")","==","JsonToken",".","START_OBJECT",")","{","if","(","posTimestampField","!=","-1",")","{","rowBuilder",".","set","(","posTimestampField,","timeValue",")",";","}","parseFields","(","fieldNames,","fieldTypes,","rowBuilder,","parser",")",";","sink",".","send","(","rowBuilder",".","build","(",")",")",";","rowBuilder",".","reset","(",")",";","}","expect","(","parser,","JsonToken",".","END_OBJECT",")",";","}","}","break",";","\n\n","case","TOP_N:\n","if","(","parser",".","nextToken","(",")","==","JsonToken",".","START_ARRAY\n","&&","parser",".","nextToken","(",")","==","JsonToken",".","START_OBJECT",")","{","final","Long","timeValue","=","extractTimestampField","(","parser",")",";","if","(","parser",".","nextToken","(",")","==","JsonToken",".","FIELD_NAME\n","&&","parser",".","getCurrentName","(",")",".","equals","(","\"result\"",")","&&","parser",".","nextToken","(",")","==","JsonToken",".","START_ARRAY",")","{","while","(","parser",".","nextToken","(",")","==","JsonToken",".","START_OBJECT",")","{","//","loop","until","token","equal","to","\"","}","\"\n","if","(","posTimestampField","!=","-1",")","{","rowBuilder",".","set","(","posTimestampField,","timeValue",")",";","}","parseFields","(","fieldNames,","fieldTypes,","rowBuilder,","parser",")",";","sink",".","send","(","rowBuilder",".","build","(",")",")",";","rowBuilder",".","reset","(",")",";","}","}","}","break",";","\n\n","case","SELECT:\n","if","(","parser",".","nextToken","(",")","==","JsonToken",".","START_ARRAY\n","&&","parser",".","nextToken","(",")","==","JsonToken",".","START_OBJECT",")","{","page",".","pagingIdentifier","=","null",";","page",".","offset","=","-1",";","page",".","totalRowCount","=","0",";","expectScalarField","(","parser,","DEFAULT_RESPONSE_TIMESTAMP_COLUMN",")",";","if","(","parser",".","nextToken","(",")","==","JsonToken",".","FIELD_NAME\n","&&","parser",".","getCurrentName","(",")",".","equals","(","\"result\"",")","&&","parser",".","nextToken","(",")","==","JsonToken",".","START_OBJECT",")","{","while","(","parser",".","nextToken","(",")","==","JsonToken",".","FIELD_NAME",")","{","if","(","parser",".","getCurrentName","(",")",".","equals","(","\"pagingIdentifiers\"",")","&&","parser",".","nextToken","(",")","==","JsonToken",".","START_OBJECT",")","{","JsonToken","token","=","parser",".","nextToken","(",")",";","while","(","parser",".","getCurrentToken","(",")","==","JsonToken",".","FIELD_NAME",")","{","page",".","pagingIdentifier","=","parser",".","getCurrentName","(",")",";","if","(","parser",".","nextToken","(",")","==","JsonToken",".","VALUE_NUMBER_INT",")","{","page",".","offset","=","parser",".","getIntValue","(",")",";","}","token","=","parser",".","nextToken","(",")",";","}","expect","(","token,","JsonToken",".","END_OBJECT",")",";","}","else","if","(","parser",".","getCurrentName","(",")",".","equals","(","\"events\"",")","&&","parser",".","nextToken","(",")","==","JsonToken",".","START_ARRAY",")","{","while","(","parser",".","nextToken","(",")","==","JsonToken",".","START_OBJECT",")","{","expectScalarField","(","parser,","\"segmentId\"",")",";","expectScalarField","(","parser,","\"offset\"",")",";","if","(","parser",".","nextToken","(",")","==","JsonToken",".","FIELD_NAME\n","&&","parser",".","getCurrentName","(",")",".","equals","(","\"event\"",")","&&","parser",".","nextToken","(",")","==","JsonToken",".","START_OBJECT",")","{","parseFields","(","fieldNames,","fieldTypes,","posTimestampField,","rowBuilder,","parser",")",";","sink",".","send","(","rowBuilder",".","build","(",")",")",";","rowBuilder",".","reset","(",")",";","page",".","totalRowCount","+=","1",";","}","expect","(","parser,","JsonToken",".","END_OBJECT",")",";","}","parser",".","nextToken","(",")",";","}","else","if","(","parser",".","getCurrentName","(",")",".","equals","(","\"dimensions\"",")","||","parser",".","getCurrentName","(",")",".","equals","(","\"metrics\"",")",")","{","expect","(","parser,","JsonToken",".","START_ARRAY",")",";","while","(","parser",".","nextToken","(",")","!=","JsonToken",".","END_ARRAY",")","{","//","empty\n","}","}","}","}","}","break",";","\n\n","case","GROUP_BY:\n","if","(","parser",".","nextToken","(",")","==","JsonToken",".","START_ARRAY",")","{","while","(","parser",".","nextToken","(",")","==","JsonToken",".","START_OBJECT",")","{","expectScalarField","(","parser,","\"version\"",")",";","final","Long","timeValue","=","extractTimestampField","(","parser",")",";","if","(","parser",".","nextToken","(",")","==","JsonToken",".","FIELD_NAME\n","&&","parser",".","getCurrentName","(",")",".","equals","(","\"event\"",")","&&","parser",".","nextToken","(",")","==","JsonToken",".","START_OBJECT",")","{","if","(","posTimestampField","!=","-1",")","{","rowBuilder",".","set","(","posTimestampField,","timeValue",")",";","}","parseFields","(","fieldNames,","fieldTypes,","posTimestampField,","rowBuilder,","parser",")",";","sink",".","send","(","rowBuilder",".","build","(",")",")",";","rowBuilder",".","reset","(",")",";","}","expect","(","parser,","JsonToken",".","END_OBJECT",")",";","}","}","break",";","\n\n","case","SCAN:\n","if","(","parser",".","nextToken","(",")","==","JsonToken",".","START_ARRAY",")","{","while","(","parser",".","nextToken","(",")","==","JsonToken",".","START_OBJECT",")","{","expectScalarField","(","parser,","\"segmentId\"",")",";","\n\n","expect","(","parser,","JsonToken",".","FIELD_NAME",")",";","if","(","parser",".","getCurrentName","(",")",".","equals","(","\"columns\"",")",")","{","expect","(","parser,","JsonToken",".","START_ARRAY",")",";","while","(","parser",".","nextToken","(",")","!=","JsonToken",".","END_ARRAY",")","{","//","Skip","the","columns","list\n","}","}","if","(","parser",".","nextToken","(",")","==","JsonToken",".","FIELD_NAME\n","&&","parser",".","getCurrentName","(",")",".","equals","(","\"events\"",")","&&","parser",".","nextToken","(",")","==","JsonToken",".","START_ARRAY",")","{","//","Events","is","Array","of","Arrays","where","each","array","is","a","row\n","while","(","parser",".","nextToken","(",")","==","JsonToken",".","START_ARRAY",")","{","for","(","String","field",":","fieldNames",")","{","parseFieldForName","(","fieldNames,","fieldTypes,","posTimestampField,","rowBuilder,","parser,\n","field",")",";","}","expect","(","parser,","JsonToken",".","END_ARRAY",")",";","Row","row","=","rowBuilder",".","build","(",")",";","sink",".","send","(","row",")",";","rowBuilder",".","reset","(",")",";","page",".","totalRowCount","+=","1",";","}","}","expect","(","parser,","JsonToken",".","END_OBJECT",")",";","}","}","break",";","default:\n","break",";","}","}","catch","(","IOException","|","InterruptedException","e",")","{","throw","new","RuntimeException","(","e",")",";","}"],"docstring_tokens":["Parses","the","output","of","a","query,","sending","the","results","to","a","Sink"],"prompt_tokens":[]}
{"code_tokens":["void","metadata","(","String","dataSourceName,","String","timestampColumnName,\n","List<Interval>","intervals,\n","Map<String,","SqlTypeName>","fieldBuilder,","Set<String>","metricNameBuilder,\n","Map<String,","List<ComplexMetric>>","complexMetrics",")","{","final","String","url","=","this",".","url","+","\"/druid/v2/?pretty\"",";","final","Map<String,","String>","requestHeaders","=\n","ImmutableMap",".","of","(","\"Content-Type\",","\"application/json\"",")",";","final","String","data","=","DruidQuery",".","metadataQuery","(","dataSourceName,","intervals",")",";","if","(","CalciteSystemProperty",".","DEBUG",".","value","(",")",")","{","System",".","out",".","println","(","\"Druid:","\"","+","data",")",";","}","try","(","InputStream","in0","=","post","(","url,","data,","requestHeaders,","10000,","1800000",")",";","InputStream","in","=","traceResponse","(","in0",")",")","{","final","ObjectMapper","mapper","=","new","ObjectMapper","(",")",".","configure","(","DeserializationFeature",".","FAIL_ON_UNKNOWN_PROPERTIES,","false",")",";","final","CollectionType","listType","=\n","mapper",".","getTypeFactory","(",")",".","constructCollectionType","(","List",".","class,\n","JsonSegmentMetadata",".","class",")",";","final","List<JsonSegmentMetadata>","list","=","mapper",".","readValue","(","in,","listType",")",";","in",".","close","(",")",";","fieldBuilder",".","put","(","timestampColumnName,","SqlTypeName",".","TIMESTAMP_WITH_LOCAL_TIME_ZONE",")",";","for","(","JsonSegmentMetadata","o",":","list",")","{","for","(","Map",".","Entry<String,","JsonColumn>","entry",":","o",".","columns",".","entrySet","(",")",")","{","if","(","entry",".","getKey","(",")",".","equals","(","DruidTable",".","DEFAULT_TIMESTAMP_COLUMN",")",")","{","//","timestamp","column\n","continue",";","}","final","DruidType","druidType",";","try","{","druidType","=","DruidType",".","getTypeFromMetaData","(","entry",".","getValue","(",")",".","type",")",";","}","catch","(","AssertionError","e",")","{","//","ignore","exception",";","not","a","supported","type\n","continue",";","}","fieldBuilder",".","put","(","entry",".","getKey","(",")",",","druidType",".","sqlType",")",";","}","if","(","o",".","aggregators","!=","null",")","{","for","(","Map",".","Entry<String,","JsonAggregator>","entry\n",":","o",".","aggregators",".","entrySet","(",")",")","{","if","(","!fieldBuilder",".","containsKey","(","entry",".","getKey","(",")",")",")","{","continue",";","}","DruidType","type","=","DruidType",".","getTypeFromMetaData","(","entry",".","getValue","(",")",".","type",")",";","if","(","type",".","isComplex","(",")",")","{","//","Each","complex","type","will","get","their","own","alias,","equal","to","their","actual","name",".","//","Maybe","we","should","have","some","smart","string","replacement","strategies","to","make","the","column\n","//","names","more","natural",".","List<ComplexMetric>","metricList","=","new","ArrayList<>","(",")",";","metricList",".","add","(","new","ComplexMetric","(","entry",".","getKey","(",")",",","type",")",")",";","complexMetrics",".","put","(","entry",".","getKey","(",")",",","metricList",")",";","}","else","{","metricNameBuilder",".","add","(","entry",".","getKey","(",")",")",";","}","}","}","}","}","catch","(","IOException","e",")","{","throw","new","RuntimeException","(","e",")",";","}"],"docstring_tokens":["Reads","segment","metadata,","and","populates","a","list","of","columns","and","metrics"],"prompt_tokens":[]}
{"code_tokens":["Set<String>","tableNames","(",")","{","final","Map<String,","String>","requestHeaders","=\n","ImmutableMap",".","of","(","\"Content-Type\",","\"application/json\"",")",";","final","String","data","=","null",";","final","String","url","=","coordinatorUrl","+","\"/druid/coordinator/v1/metadata/datasources\"",";","if","(","CalciteSystemProperty",".","DEBUG",".","value","(",")",")","{","System",".","out",".","println","(","\"Druid:","table","names\"","+","data","+","\"",";","\"","+","url",")",";","}","try","(","InputStream","in0","=","post","(","url,","data,","requestHeaders,","10000,","1800000",")",";","InputStream","in","=","traceResponse","(","in0",")",")","{","final","ObjectMapper","mapper","=","new","ObjectMapper","(",")",";","final","CollectionType","listType","=\n","mapper",".","getTypeFactory","(",")",".","constructCollectionType","(","List",".","class,\n","String",".","class",")",";","final","List<String>","list","=","mapper",".","readValue","(","in,","listType",")",";","return","ImmutableSet",".","copyOf","(","list",")",";","}","catch","(","IOException","e",")","{","throw","new","RuntimeException","(","e",")",";","}"],"docstring_tokens":["Reads","data","source","names","from","Druid"],"prompt_tokens":[]}
{"code_tokens":["public","static","ResultSetEnumerable<@Nullable","Object>","of","(","DataSource","dataSource,","String","sql,\n","Primitive[]","primitives",")","{","return","of","(","dataSource,","sql,","primitiveRowBuilderFactory","(","primitives",")",")",";"],"docstring_tokens":["Creates","a","ResultSetEnumerable","that","retrieves","columns","as","specific","Java","types"],"prompt_tokens":[]}
{"code_tokens":["public","static","PreparedStatementEnricher","createEnricher","(","Integer[]","indexes,\n","DataContext","context",")","{","return","preparedStatement","->","{","for","(","int","i","=","0",";","i","<","indexes",".","length",";","i++",")","{","final","int","index","=","indexes[i]",";","setDynamicParam","(","preparedStatement,","i","+","1,\n","context",".","get","(","\"?\"","+","index",")",")",";","}","}",";"],"docstring_tokens":["Called","from","generated","code","that","proposes","to","create","a","ResultSetEnumerable","over","a","prepared","statement"],"prompt_tokens":[]}
{"code_tokens":["public","static","Row","of","(","@Nullable","Object","value0",")","{","return","new","Row","(","new","Object[]","{","value0","}",")",";"],"docstring_tokens":["Creates","a","Row","with","one","column","value"],"prompt_tokens":[]}
{"code_tokens":["public","static","Row","of","(","@Nullable","Object","value0,","@Nullable","Object","value1",")","{","return","new","Row","(","new","Object[]","{","value0,","value1","}",")",";"],"docstring_tokens":["Creates","a","Row","with","two","column","values"],"prompt_tokens":[]}
{"code_tokens":["public","static","Row","of","(","@Nullable","Object","value0,","@Nullable","Object","value1,","@Nullable","Object","value2",")","{","return","new","Row","(","new","Object[]","{","value0,","value1,","value2","}",")",";"],"docstring_tokens":["Creates","a","Row","with","three","column","values"],"prompt_tokens":[]}
{"code_tokens":["public","static","Row","of","(","@Nullable","Object",".",".",".","values",")","{","return","new","Row","(","values",")",";"],"docstring_tokens":["Creates","a","Row","with","variable","number","of","values"],"prompt_tokens":[]}
{"code_tokens":["public","static","RowBuilder","newBuilder","(","int","size",")","{","return","new","RowBuilder","(","size",")",";"],"docstring_tokens":["Create","a","RowBuilder","object","that","eases","creation","of","a","new","row"],"prompt_tokens":[]}
{"code_tokens":["public","boolean","isFullOuterJoin","(",")","{","return","isFullOuterJoin",";"],"docstring_tokens":["Returns","true","if","the","MultiJoin","corresponds","to","a","full","outer","join"],"prompt_tokens":[]}
{"code_tokens":["public","SqlNode","parseExpression","(",")","throws","SqlParseException","{","try","{","return","parser",".","parseSqlExpressionEof","(",")",";","}","catch","(","Throwable","ex",")","{","if","(","ex","instanceof","CalciteContextException",")","{","final","String","originalSql","=","parser",".","getOriginalSql","(",")",";","if","(","originalSql","!=","null",")","{","(","(","CalciteContextException",")","ex",")",".","setOriginalStatement","(","originalSql",")",";","}","}","throw","parser",".","normalizeException","(","ex",")",";","}"],"docstring_tokens":["Parses","a","SQL","expression"],"prompt_tokens":[]}
{"code_tokens":["private","SqlParseException","handleException","(","Throwable","ex",")","{","if","(","ex","instanceof","CalciteContextException",")","{","final","String","originalSql","=","parser",".","getOriginalSql","(",")",";","if","(","originalSql","!=","null",")","{","(","(","CalciteContextException",")","ex",")",".","setOriginalStatement","(","originalSql",")",";","}","}","return","parser",".","normalizeException","(","ex",")",";"],"docstring_tokens":["Normalizes","a","SQL","exception"],"prompt_tokens":[]}
{"code_tokens":["public","SqlNode","parseQuery","(","String","sql",")","throws","SqlParseException","{","parser",".","ReInit","(","new","StringReader","(","sql",")",")",";","return","parseQuery","(",")",";"],"docstring_tokens":["Parses","a","SELECT","statement","and","reuses","parser"],"prompt_tokens":[]}
{"code_tokens":["public","SqlNode","parseStmt","(",")","throws","SqlParseException","{","return","parseQuery","(",")",";"],"docstring_tokens":["Parses","an","SQL","statement"],"prompt_tokens":[]}
{"code_tokens":["public","SqlNodeList","parseStmtList","(",")","throws","SqlParseException","{","try","{","return","parser",".","parseSqlStmtList","(",")",";","}","catch","(","Throwable","ex",")","{","throw","handleException","(","ex",")",";","}"],"docstring_tokens":["Parses","a","list","of","SQL","statements","separated","by","semicolon"],"prompt_tokens":[]}
{"code_tokens":["public","@Nullable","Frame","decorrelateRel","(","RelNode","rel,","boolean","isCorVarDefined",")","{","RelNode","newRel","=","rel",".","copy","(","rel",".","getTraitSet","(",")",",","rel",".","getInputs","(",")",")",";","\n\n","if","(","rel",".","getInputs","(",")",".","size","(",")",">","0",")","{","List<RelNode>","oldInputs","=","rel",".","getInputs","(",")",";","List<RelNode>","newInputs","=","new","ArrayList<>","(",")",";","for","(","int","i","=","0",";","i","<","oldInputs",".","size","(",")",";","++i",")","{","final","Frame","frame","=","getInvoke","(","oldInputs",".","get","(","i",")",",","isCorVarDefined,","rel",")",";","if","(","frame","==","null","||","!frame",".","corDefOutputs",".","isEmpty","(",")",")","{","//","if","input","is","not","rewritten,","or","if","it","produces","correlated\n","//","variables,","terminate","rewrite\n","return","null",";","}","newInputs",".","add","(","frame",".","r",")",";","newRel",".","replaceInput","(","i,","frame",".","r",")",";","}","\n\n","if","(","!Util",".","equalShallow","(","oldInputs,","newInputs",")",")","{","newRel","=","rel",".","copy","(","rel",".","getTraitSet","(",")",",","newInputs",")",";","}","}","\n\n","//","the","output","position","should","not","change","since","there","are","no","corVars\n","//","coming","from","below",".","return","register","(","rel,","newRel,","identityMap","(","rel",".","getRowType","(",")",".","getFieldCount","(",")",")",",\n","ImmutableSortedMap",".","of","(",")",")",";"],"docstring_tokens":["Fallback","if","none","of","the","other","decorrelateRel","methods","match"],"prompt_tokens":[]}
{"code_tokens":["private","RelNode","aggregateCorrelatorOutput","(","Correlate","correlate,\n","Project","project,\n","Set<Integer>","isCount",")","{","final","RelNode","left","=","correlate",".","getLeft","(",")",";","final","JoinRelType","joinType","=","correlate",".","getJoinType","(",")",";","\n\n","//","now","create","the","new","project\n","final","List<Pair<RexNode,","String>>","newProjects","=","new","ArrayList<>","(",")",";","\n\n","//","Project","everything","from","the","LHS","and","then","those","from","the","original\n","//","project\n","final","List<RelDataTypeField>","leftInputFields","=\n","left",".","getRowType","(",")",".","getFieldList","(",")",";","\n\n","for","(","int","i","=","0",";","i","<","leftInputFields",".","size","(",")",";","i++",")","{","newProjects",".","add","(","RexInputRef",".","of2","(","i,","leftInputFields",")",")",";","}","\n\n","//","Marked","where","the","projected","expr","is","coming","from","so","that","the","types","will\n","//","become","nullable","for","the","original","projections","which","are","now","coming","out\n","//","of","the","nullable","side","of","the","OJ",".","boolean","projectPulledAboveLeftCorrelator","=\n","joinType",".","generatesNullsOnRight","(",")",";","\n\n","for","(","Pair<RexNode,","String>","pair",":","project",".","getNamedProjects","(",")",")","{","RexNode","newProjExpr","=\n","removeCorrelationExpr","(","pair",".","left,\n","projectPulledAboveLeftCorrelator,\n","isCount",")",";","newProjects",".","add","(","Pair",".","of","(","newProjExpr,","pair",".","right",")",")",";","}","\n\n","return","relBuilder",".","push","(","correlate",")",".","projectNamed","(","Pair",".","left","(","newProjects",")",",","Pair",".","right","(","newProjects",")",",","true",")",".","build","(",")",";"],"docstring_tokens":["Pulls","a","Project","above","a","Correlate","from","its","RHS","input"],"prompt_tokens":[]}
{"code_tokens":["private","RelNode","createProjectWithAdditionalExprs","(","RelNode","input,\n","List<Pair<RexNode,","String>>","additionalExprs",")","{","final","List<RelDataTypeField>","fieldList","=\n","input",".","getRowType","(",")",".","getFieldList","(",")",";","List<Pair<RexNode,","String>>","projects","=","new","ArrayList<>","(",")",";","Ord",".","forEach","(","fieldList,","(","field,","i",")","->\n","projects",".","add","(","Pair",".","of","(","relBuilder",".","getRexBuilder","(",")",".","makeInputRef","(","field",".","getType","(",")",",","i",")",",\n","field",".","getName","(",")",")",")",")",";","projects",".","addAll","(","additionalExprs",")",";","return","relBuilder",".","push","(","input",")",".","projectNamed","(","Pair",".","left","(","projects",")",",","Pair",".","right","(","projects",")",",","true",")",".","build","(",")",";"],"docstring_tokens":["Projects","all","input","output","fields","plus","the","additional","expressions"],"prompt_tokens":[]}
{"code_tokens":["public","static","SqlSampleSpec","createNamed","(","String","name",")","{","return","new","SqlSubstitutionSampleSpec","(","name",")",";"],"docstring_tokens":["Creates","a","sample","which","substitutes","one","relation","for","another"],"prompt_tokens":[]}
{"code_tokens":["private","RexNode","adjustSemiJoinCondition","(","LoptMultiJoin","multiJoin,\n","int","leftAdjustment,\n","RexNode","semiJoinCondition,\n","int","leftIdx,\n","int","rightIdx",")","{","//","adjust","the","semijoin","condition","to","reflect","the","fact","that","the\n","//","RHS","is","now","the","second","factor","into","the","semijoin","and","the","LHS\n","//","is","the","first\n","int","rightAdjustment","=","0",";","for","(","int","i","=","0",";","i","<","rightIdx",";","i++",")","{","rightAdjustment","-=","multiJoin",".","getNumFieldsInJoinFactor","(","i",")",";","}","int","rightStart","=","-rightAdjustment",";","int","numFieldsLeftIdx","=","multiJoin",".","getNumFieldsInJoinFactor","(","leftIdx",")",";","int","numFieldsRightIdx","=","multiJoin",".","getNumFieldsInJoinFactor","(","rightIdx",")",";","rightAdjustment","+=","numFieldsLeftIdx",";","\n\n","//","only","adjust","the","filter","if","adjustments","are","required\n","if","(","(","leftAdjustment","!=","0",")","||","(","rightAdjustment","!=","0",")",")","{","int","[]","adjustments","=","new","int[multiJoin",".","getNumTotalFields","(",")","]",";","if","(","leftAdjustment","!=","0",")","{","for","(","int","i","=","-leftAdjustment",";","i","<","(","-leftAdjustment","+","numFieldsLeftIdx",")",";","i++",")","{","adjustments[i]","=","leftAdjustment",";","}","}","if","(","rightAdjustment","!=","0",")","{","for","(","int","i","=","rightStart",";","i","<","(","rightStart","+","numFieldsRightIdx",")",";","i++",")","{","adjustments[i]","=","rightAdjustment",";","}","}","return","semiJoinCondition",".","accept","(","new","RelOptUtil",".","RexInputConverter","(","rexBuilder,\n","multiJoin",".","getMultiJoinFields","(",")",",\n","adjustments",")",")",";","}","\n\n","return","semiJoinCondition",";"],"docstring_tokens":["Modifies","the","semijoin","condition","to","reflect","the","fact","that","the","RHS","is","now","the","second","factor","into","a","join","and","the","LHS","is","the","first"],"prompt_tokens":[]}
{"code_tokens":["public","static","RelRoot","of","(","RelNode","rel,","SqlKind","kind",")","{","return","of","(","rel,","rel",".","getRowType","(",")",",","kind",")",";"],"docstring_tokens":["Creates","a","simple","RelRoot"],"prompt_tokens":[]}
{"code_tokens":["public","RelRoot","withRel","(","RelNode","rel",")","{","if","(","rel","==","this",".","rel",")","{","return","this",";","}","return","new","RelRoot","(","rel,","validatedRowType,","kind,","fields,","collation,","hints",")",";"],"docstring_tokens":["Creates","a","copy","of","this","RelRoot,","assigning","a","RelNode"],"prompt_tokens":[]}
{"code_tokens":["public","RelRoot","withHints","(","List<RelHint>","hints",")","{","return","new","RelRoot","(","rel,","validatedRowType,","kind,","fields,","collation,","hints",")",";"],"docstring_tokens":["Creates","a","copy,","assigning","the","query","hints"],"prompt_tokens":[]}
{"code_tokens":["public","RelNode","project","(","boolean","force",")","{","if","(","isRefTrivial","(",")","&&","(","SqlKind",".","DML",".","contains","(","kind",")","||","!force\n","||","rel","instanceof","LogicalProject",")",")","{","return","rel",";","}","final","List<RexNode>","projects","=","new","ArrayList<>","(","fields",".","size","(",")",")",";","final","RexBuilder","rexBuilder","=","rel",".","getCluster","(",")",".","getRexBuilder","(",")",";","for","(","Pair<Integer,","String>","field",":","fields",")","{","projects",".","add","(","rexBuilder",".","makeInputRef","(","rel,","field",".","left",")",")",";","}","return","LogicalProject",".","create","(","rel,","hints,","projects,","Pair",".","right","(","fields",")",")",";"],"docstring_tokens":["Returns","the","root","relational","expression","as","a","LogicalProject"],"prompt_tokens":[]}
{"code_tokens":["public","static","JoinInfo","of","(","RelNode","left,","RelNode","right,","RexNode","condition",")","{","final","List<Integer>","leftKeys","=","new","ArrayList<>","(",")",";","final","List<Integer>","rightKeys","=","new","ArrayList<>","(",")",";","final","List<Boolean>","filterNulls","=","new","ArrayList<>","(",")",";","final","List<RexNode>","nonEquiList","=","new","ArrayList<>","(",")",";","RelOptUtil",".","splitJoinCondition","(","left,","right,","condition,","leftKeys,","rightKeys,\n","filterNulls,","nonEquiList",")",";","return","new","JoinInfo","(","ImmutableIntList",".","copyOf","(","leftKeys",")",",\n","ImmutableIntList",".","copyOf","(","rightKeys",")",",","ImmutableList",".","copyOf","(","nonEquiList",")",")",";"],"docstring_tokens":["Creates","a","JoinInfo","by","analyzing","a","condition"],"prompt_tokens":[]}
{"code_tokens":["public","static","Matcher<?","super","Throwable>","expectThrowable","(","Throwable","expected",")","{","return","new","BaseMatcher<Throwable>","(",")","{","@Override","public","boolean","matches","(","Object","item",")","{","if","(","!","(","item","instanceof","Throwable",")",")","{","return","false",";","}","Throwable","error","=","(","Throwable",")","item",";","return","expected","!=","null\n","&&","Objects",".","equals","(","error",".","getClass","(",")",",","expected",".","getClass","(",")",")","&&","Objects",".","equals","(","error",".","getMessage","(",")",",","expected",".","getMessage","(",")",")",";","}","\n\n","@Override","public","void","describeTo","(","Description","description",")","{","description",".","appendText","(","\"is","\"",")",".","appendText","(","expected",".","toString","(",")",")",";","}","}",";"],"docstring_tokens":["Creates","a","matcher","that","matches","if","the","examined","value","is","expected","throwable"],"prompt_tokens":[]}
{"code_tokens":["private","boolean","coerceOperands","(","SqlCallBinding","callBinding,","boolean","repeat",")","{","//","Type","coercion","for","the","call,\n","//","collect","SqlTypeFamily","and","data","type","of","all","the","operands",".","List<SqlTypeFamily>","families","=","allowedRules",".","stream","(",")",".","filter","(","r","->","r","instanceof","ImplicitCastOperandTypeChecker",")","//","All","the","rules","are","SqlSingleOperandTypeChecker",".",".","map","(","r","->","(","(","ImplicitCastOperandTypeChecker",")","r",")",".","getOperandSqlTypeFamily","(","0",")",")",".","collect","(","Collectors",".","toList","(",")",")",";","if","(","families",".","size","(",")","<","allowedRules",".","size","(",")",")","{","//","Not","all","the","checkers","are","ImplicitCastOperandTypeChecker,","returns","early",".","return","false",";","}","if","(","repeat",")","{","assert","families",".","size","(",")","==","1",";","families","=","Collections",".","nCopies","(","callBinding",".","getOperandCount","(",")",",","families",".","get","(","0",")",")",";","}","final","List<RelDataType>","operandTypes","=","new","ArrayList<>","(",")",";","for","(","int","i","=","0",";","i","<","callBinding",".","getOperandCount","(",")",";","i++",")","{","operandTypes",".","add","(","callBinding",".","getOperandType","(","i",")",")",";","}","TypeCoercion","typeCoercion","=","callBinding",".","getValidator","(",")",".","getTypeCoercion","(",")",";","return","typeCoercion",".","builtinFunctionCoercion","(","callBinding,\n","operandTypes,","families",")",";"],"docstring_tokens":["Tries","to","coerce","the","operands","based","on","the","defined","type","families"],"prompt_tokens":[]}
{"code_tokens":["public","static","SqlLiteral","concatenateOperands","(","SqlCall","call",")","{","final","List<SqlNode>","operandList","=","call",".","getOperandList","(",")",";","assert","operandList",".","size","(",")",">","0",";","assert","operandList",".","get","(","0",")","instanceof","SqlLiteral\n",":","operandList",".","get","(","0",")",".","getClass","(",")",";","return","SqlUtil",".","concatenateLiterals","(","Util",".","cast","(","operandList,","SqlLiteral",".","class",")",")",";"],"docstring_tokens":["Concatenates","the","operands","of","a","call","to","this","operator"],"prompt_tokens":[]}
{"code_tokens":["private","static","void","appendPosixDaylightTransition","(","TimeZone","tz,\n","StringBuilder","buf,\n","int","mode,\n","int","day,\n","int","month,\n","int","dayOfWeek,\n","int","time,\n","int","timeMode,\n","boolean","verbose,\n","boolean","isEnd",")","{","buf",".","append","(","','",")",";","int","week","=","day",";","switch","(","mode",")","{","case","1:","//","SimpleTimeZone",".","DOM_MODE\n","throw","Util",".","needToImplement","(","0",")",";","\n\n","case","3:","//","SimpleTimeZone",".","DOW_GE_DOM_MODE\n\n","//","If","the","day","is","1,","8,","15,","22,","we","can","translate","this","to","case","2",".","switch","(","day",")","{","case","1:\n","week","=","1",";","//","1st","week","of","month\n","break",";","case","8:\n","week","=","2",";","//","2nd","week","of","month\n","break",";","case","15:\n","week","=","3",";","//","3rd","week","of","month\n","break",";","case","22:\n","week","=","4",";","//","4th","week","of","month\n","break",";","default:\n","throw","new","AssertionError","(","\"POSIX","timezone","format","cannot","represent","\"","+","tz",")",";","}","//","fall","through\n\n","case","2:","//","SimpleTimeZone",".","DOW_IN_MONTH_MODE\n","buf",".","append","(","'M'",")",";","buf",".","append","(","month","+","1",")",";","//","1","<=","m","<=","12\n","buf",".","append","(","'",".","'",")",";","if","(","week","==","-1",")","{","//","java","represents","'last","week'","differently","from","POSIX\n","week","=","5",";","}","buf",".","append","(","week",")",";","//","1","<=","n","<=","5,","5","means","'last'\n","buf",".","append","(","'",".","'",")",";","buf",".","append","(","dayOfWeek","-","1",")",";","//","0","<=","d","<=","6,","0=Sunday\n","break",";","\n\n","case","4:","//","SimpleTimeZone",".","DOW_LE_DOM_MODE\n","throw","Util",".","needToImplement","(","0",")",";","default:\n","throw","new","AssertionError","(","\"unexpected","value:","\"","+","mode",")",";","}","switch","(","timeMode",")","{","case","0:","//","SimpleTimeZone",".","WALL_TIME\n","break",";","case","1:","//","SimpleTimeZone",".","STANDARD_TIME,","e",".","g",".","Australia/Sydney\n","if","(","isEnd",")","{","time","+=","tz",".","getDSTSavings","(",")",";","}","break",";","case","2:","//","SimpleTimeZone",".","UTC_TIME,","e",".","g",".","Europe/Paris\n","time","+=","tz",".","getRawOffset","(",")",";","if","(","isEnd",")","{","time","+=","tz",".","getDSTSavings","(",")",";","}","break",";","default:\n","break",";","}","if","(","verbose","||","(","time","!=","7200000",")",")","{","//","POSIX","allows","us","to","omit","the","time","if","it","is","2am","(","the","default",")","buf",".","append","(","'/'",")",";","appendPosixTime","(","buf,","time",")",";","}"],"docstring_tokens":["Writes","a","daylight","savings","time","transition","to","a","POSIX","timezone","description"],"prompt_tokens":[]}
{"code_tokens":["public","SqlBuilder","append","(","SqlString","s",")","{","buf",".","append","(","s",".","getSql","(",")",")",";","return","this",";"],"docstring_tokens":["Appends","a","hygienic","SQL","string"],"prompt_tokens":[]}
{"code_tokens":["public","SqlBuilder","identifier","(","String","name",")","{","dialect",".","quoteIdentifier","(","buf,","name",")",";","return","this",";"],"docstring_tokens":["Appends","an","identifier","to","this","buffer,","quoting","accordingly"],"prompt_tokens":[]}
{"code_tokens":["public","SqlBuilder","identifier","(","String",".",".",".","names",")","{","dialect",".","quoteIdentifier","(","buf,","UnmodifiableArrayList",".","of","(","names",")",")",";","return","this",";"],"docstring_tokens":["Appends","one","or","more","identifiers","to","this","buffer,","quoting","accordingly"],"prompt_tokens":[]}
{"code_tokens":["public","SqlBuilder","identifier","(","List<String>","names",")","{","dialect",".","quoteIdentifier","(","buf,","names",")",";","return","this",";"],"docstring_tokens":["Appends","a","compound","identifier","to","this","buffer,","quoting","accordingly"],"prompt_tokens":[]}
{"code_tokens":["public","SqlBuilder","literal","(","Timestamp","timestamp",")","{","buf",".","append","(","timestamp","==","null\n","?","\"null\"\n",":","dialect",".","quoteTimestampLiteral","(","timestamp",")",")",";","return","this",";"],"docstring_tokens":["Appends","a","timestamp","literal","to","this","buffer"],"prompt_tokens":[]}
{"code_tokens":["protected","boolean","isStrictEngine","(",")","{","return","options",".","isStrict","(",")",";"],"docstring_tokens":["Whether","this","interpreter","is","currently","evaluating","with","a","strict","engine","flag"],"prompt_tokens":[]}
{"code_tokens":["protected","boolean","isSafe","(",")","{","return","options",".","isSafe","(",")",";"],"docstring_tokens":["Whether","this","interpreter","ignores","null","in","navigation","expression","as","errors"],"prompt_tokens":[]}
{"code_tokens":["protected","boolean","isSilent","(",")","{","return","options",".","isSilent","(",")",";"],"docstring_tokens":["Whether","this","interpreter","is","currently","evaluating","with","a","silent","mode"],"prompt_tokens":[]}
{"code_tokens":["protected","boolean","isCancelled","(",")","{","return","cancelled",".","get","(",")","|","Thread",".","currentThread","(",")",".","isInterrupted","(",")",";"],"docstring_tokens":["Checks","whether","this","interpreter","execution","was","cancelled","due","to","thread","interruption"],"prompt_tokens":[]}
{"code_tokens":["protected","Object","functionArgument","(","final","boolean","narrow,","final","Object","arg",")","{","return","narrow","&&","arg","instanceof","Number","?","arithmetic",".","narrow","(","(","Number",")","arg",")",":","arg",";"],"docstring_tokens":["Optionally","narrows","an","argument","for","a","function","call"],"prompt_tokens":[]}
{"code_tokens":["@Override\n","public","void","jjtAddChild","(","final","Node","n,","final","int","i",")","{","if","(","children","==","null",")","{","children","=","new","JexlNode[i","+","1]",";","}","else","if","(","i",">=","children",".","length",")","{","final","JexlNode[]","c","=","new","JexlNode[i","+","1]",";","System",".","arraycopy","(","children,","0,","c,","0,","children",".","length",")",";","children","=","c",";","}","children[i]","=","(","JexlNode",")","n",";"],"docstring_tokens":["Adds","a","child","node"],"prompt_tokens":[]}
{"code_tokens":["@Override\n","public","JexlNode","jjtGetChild","(","final","int","i",")","{","return","children[i]",";"],"docstring_tokens":["Gets","a","child","of","this","node"],"prompt_tokens":[]}
{"code_tokens":["@Override\n","public","int","jjtGetNumChildren","(",")","{","return","(","children","==","null",")","?","0",":","children",".","length",";"],"docstring_tokens":["Gets","this","node","number","of","children"],"prompt_tokens":[]}
{"code_tokens":["public","void","jjtSetValue","(","final","Object","value",")","{","this",".","value","=","value",";"],"docstring_tokens":["Sets","this","node","value"],"prompt_tokens":[]}
{"code_tokens":["public","Object","jjtGetValue","(",")","{","return","value",";"],"docstring_tokens":["Gets","this","node","value"],"prompt_tokens":[]}
{"code_tokens":["private","static","JexlInfo","detailedInfo","(","final","JexlNode","node,","final","JexlInfo","info",")","{","if","(","info","!=","null","&&","node","!=","null",")","{","final","Debugger","dbg","=","new","Debugger","(",")",";","if","(","dbg",".","debug","(","node",")",")","{","return","new","JexlInfo","(","info",")","{","@Override\n","public","JexlInfo",".","Detail","getDetail","(",")","{","return","dbg",";","}","}",";","}","}","return","info",";"],"docstring_tokens":["Gets","the","most","specific","information","attached","to","a","node"],"prompt_tokens":[]}
{"code_tokens":["public","JexlException","clean","(",")","{","return","clean","(","this",")",";"],"docstring_tokens":["Cleans","a","JexlException","from","any","org.apache.commons.jexl3.internal","stack","trace","element"],"prompt_tokens":[]}
{"code_tokens":["public","static","String","propertyError","(","final","JexlNode","node,","final","String","pty,","final","boolean","undef",")","{","final","StringBuilder","msg","=","errorAt","(","node",")",";","if","(","undef",")","{","msg",".","append","(","\"unsolvable\"",")",";","}","else","{","msg",".","append","(","\"null","value\"",")",";","}","msg",".","append","(","\"","property","'\"",")",";","msg",".","append","(","pty",")",";","msg",".","append","(","'\\''",")",";","return","msg",".","toString","(",")",";"],"docstring_tokens":["Generates","a","message","for","an","unsolvable","property","error"],"prompt_tokens":[]}
{"code_tokens":["public","static","String","methodError","(","final","JexlNode","node,","final","String","method,","final","Object[]","args",")","{","final","StringBuilder","msg","=","errorAt","(","node",")",";","msg",".","append","(","\"unsolvable","function/method","'\"",")",";","msg",".","append","(","methodSignature","(","method,","args",")",")",";","msg",".","append","(","'\\''",")",";","return","msg",".","toString","(",")",";"],"docstring_tokens":["Generates","a","message","for","a","unsolvable","method","error"],"prompt_tokens":[]}
{"code_tokens":["public","static","JexlException","tryFailed","(","final","InvocationTargetException","xinvoke",")","{","final","Throwable","cause","=","xinvoke",".","getCause","(",")",";","return","cause","instanceof","JexlException\n","?","(","JexlException",")","cause\n",":","new","JexlException",".","TryFailed","(","xinvoke",")",";","//","fail\n"],"docstring_tokens":["Wrap","an","invocation","exception"],"prompt_tokens":[]}
{"code_tokens":["public","static","DuckGetExecutor","discover","(","final","Introspector","is,","final","Class<?>","clazz,","final","Object","identifier",")","{","final","java",".","lang",".","reflect",".","Method","method","=","is",".","getMethod","(","clazz,","\"get\",","makeArgs","(","identifier",")",")",";","return","method","==","null?","null",":","new","DuckGetExecutor","(","clazz,","method,","identifier",")",";"],"docstring_tokens":["Attempts","to","discover","a","DuckGetExecutor"],"prompt_tokens":[]}
{"code_tokens":["public","static","MapGetExecutor","discover","(","final","Introspector","is,","final","Class<?>","clazz,","final","Object","identifier",")","{","if","(","Map",".","class",".","isAssignableFrom","(","clazz",")",")","{","return","new","MapGetExecutor","(","clazz,","MAP_GET,","identifier",")",";","}","return","null",";"],"docstring_tokens":["Attempts","to","discover","a","MapGetExecutor"],"prompt_tokens":[]}
{"code_tokens":["public","JexlArithmetic","options","(","final","JexlOptions","options",")","{","if","(","options","!=","null",")","{","final","boolean","ostrict","=","options",".","isStrictArithmetic","(",")",";","MathContext","bigdContext","=","options",".","getMathContext","(",")",";","if","(","bigdContext","==","null",")","{","bigdContext","=","getMathContext","(",")",";","}","int","bigdScale","=","options",".","getMathScale","(",")",";","if","(","bigdScale","==","Integer",".","MIN_VALUE",")","{","bigdScale","=","getMathScale","(",")",";","}","if","(","ostrict","!=","isStrict","(",")","||","bigdScale","!=","getMathScale","(",")","||","bigdContext","!=","getMathContext","(",")",")","{","return","createWithOptions","(","ostrict,","bigdContext,","bigdScale",")",";","}","}","return","this",";"],"docstring_tokens":["Apply","options","to","this","arithmetic","which","eventually","may","create","another","instance"],"prompt_tokens":[]}
{"code_tokens":["protected","JexlArithmetic","createWithOptions","(","final","boolean","astrict,","final","MathContext","bigdContext,","final","int","bigdScale",")","{","if","(","ctor","!=","null",")","{","try","{","return","ctor",".","newInstance","(","astrict,","bigdContext,","bigdScale",")",";","}","catch","(","IllegalAccessException","|","IllegalArgumentException\n","|","InstantiationException","|","InvocationTargetException","xany",")","{","//","it","was","worth","the","try\n","}","}","return","new","JexlArithmetic","(","astrict,","bigdContext,","bigdScale",")",";"],"docstring_tokens":["Creates","a","JexlArithmetic","instance"],"prompt_tokens":[]}
{"code_tokens":["protected","BigDecimal","roundBigDecimal","(","final","BigDecimal","number",")","{","final","int","mscale","=","getMathScale","(",")",";","if","(","mscale",">=","0",")","{","return","number",".","setScale","(","mscale,","getMathContext","(",")",".","getRoundingMode","(",")",")",";","}","return","number",";"],"docstring_tokens":["Ensure","a","big","decimal","is","rounded","by","this","arithmetic","scale","and","rounding","mode"],"prompt_tokens":[]}
{"code_tokens":["protected","void","controlNullOperand","(",")","{","if","(","isStrict","(",")",")","{","throw","new","NullOperand","(",")",";","}"],"docstring_tokens":["Throw","a","NPE","if","arithmetic","is","strict"],"prompt_tokens":[]}
{"code_tokens":["protected","boolean","isFloatingPointNumber","(","final","Object","val",")","{","if","(","val","instanceof","Float","||","val","instanceof","Double",")","{","return","true",";","}","if","(","val","instanceof","CharSequence",")","{","final","Matcher","m","=","FLOAT_PATTERN",".","matcher","(","(","CharSequence",")","val",")",";","//","first","group","is","decimal,","second","is","exponent",";","//","one","of","them","must","exist","hence","start","(","{","1,2","}",")",">=","0\n","return","m",".","matches","(",")","&&","(","m",".","start","(","1",")",">=","0","||","m",".","start","(","2",")",">=","0",")",";","}","return","false",";"],"docstring_tokens":["Test","if","the","passed","value","is","a","floating","point","number,","i.e"],"prompt_tokens":[]}
{"code_tokens":["protected","Number","narrowBigDecimal","(","final","Object","lhs,","final","Object","rhs,","final","BigDecimal","bigd",")","{","if","(","isNumberable","(","lhs",")","||","isNumberable","(","rhs",")",")","{","try","{","final","long","l","=","bigd",".","longValueExact","(",")",";","//","coerce","to","int","when","possible","(","int","being","so","often","used","in","method","parms",")","if","(","l","<=","Integer",".","MAX_VALUE","&&","l",">=","Integer",".","MIN_VALUE",")","{","return","(","int",")","l",";","}","return","l",";","}","catch","(","final","ArithmeticException","xa",")","{","//","ignore,","no","exact","value","possible\n","}","}","return","bigd",";"],"docstring_tokens":["Given","a","BigDecimal,","attempt","to","narrow","it","to","an","Integer","or","Long","if","it","fits","if","one","of","the","arguments","is","a","numberable"],"prompt_tokens":[]}
{"code_tokens":["public","Object","and","(","final","Object","left,","final","Object","right",")","{","final","long","l","=","toLong","(","left",")",";","final","long","r","=","toLong","(","right",")",";","return","l","&","r",";"],"docstring_tokens":["Performs","a","bitwise","and"],"prompt_tokens":[]}
{"code_tokens":["public","Object","or","(","final","Object","left,","final","Object","right",")","{","final","long","l","=","toLong","(","left",")",";","final","long","r","=","toLong","(","right",")",";","return","l","|","r",";"],"docstring_tokens":["Performs","a","bitwise","or"],"prompt_tokens":[]}
{"code_tokens":["public","Object","xor","(","final","Object","left,","final","Object","right",")","{","final","long","l","=","toLong","(","left",")",";","final","long","r","=","toLong","(","right",")",";","return","l","^","r",";"],"docstring_tokens":["Performs","a","bitwise","xor"],"prompt_tokens":[]}
{"code_tokens":["public","Object","not","(","final","Object","val",")","{","return","!toBoolean","(","val",")",";"],"docstring_tokens":["Performs","a","logical","not"],"prompt_tokens":[]}
{"code_tokens":["private","static","int","append","(","final","StringBuilder","strb,","final","CharSequence","expr,","final","int","position,","final","char","c",")","{","strb",".","append","(","c",")",";","if","(","c","!=","'\"'","&&","c","!=","'\\''",")","{","return","position",";","}","//","read","thru","strings\n","final","int","end","=","expr",".","length","(",")",";","boolean","escape=","false",";","int","index","=","position","+","1",";","for","(",";","index","<","end",";","++index",")","{","final","char","ec","=","expr",".","charAt","(","index",")",";","strb",".","append","(","ec",")",";","if","(","ec","==","'\\\\'",")","{","escape","=","!escape",";","}","else","if","(","escape",")","{","escape","=","false",";","}","else","if","(","ec","==","c",")","{","break",";","}","}","return","index",";"],"docstring_tokens":["Helper","for","expression","dealing","with","embedded","strings"],"prompt_tokens":[]}
{"code_tokens":["public","void","reset","(",")","{","builder",".","setLength","(","0",")",";","cause","=","null",";","start","=","0",";","end","=","0",";","indentLevel","=","0",";","indent","=","2",";","depth","=","Integer",".","MAX_VALUE",";"],"docstring_tokens":["Resets","this","debugger","state"],"prompt_tokens":[]}
{"code_tokens":["public","boolean","debug","(","final","JexlExpression","jscript",")","{","if","(","jscript","instanceof","Script",")","{","return","debug","(","(","(","Script",")","jscript",")",".","script",")",";","}","return","false",";"],"docstring_tokens":["Position","the","debugger","on","the","root","of","an","expression"],"prompt_tokens":[]}
{"code_tokens":["public","boolean","debug","(","final","JexlScript","jscript",")","{","if","(","jscript","instanceof","Script",")","{","return","debug","(","(","(","Script",")","jscript",")",".","script",")",";","}","return","false",";"],"docstring_tokens":["Position","the","debugger","on","the","root","of","a","script"],"prompt_tokens":[]}
{"code_tokens":["public","Debugger","indentation","(","final","int","level",")","{","indent","=","Math",".","max","(","level,","0",")",";","indentLevel","=","0",";","return","this",";"],"docstring_tokens":["Sets","the","indentation","level"],"prompt_tokens":[]}
{"code_tokens":["public","Debugger","depth","(","final","int","rdepth",")","{","this",".","depth","=","rdepth",";","return","this",";"],"docstring_tokens":["Sets","this","debugger","relative","maximum","depth"],"prompt_tokens":[]}
{"code_tokens":["public","Class<?>","getClassByName","(","final","String","className",")","{","try","{","return","Class",".","forName","(","className,","false,","loader",")",";","}","catch","(","final","ClassNotFoundException","xignore",")","{","return","null",";","}"],"docstring_tokens":["Gets","a","class","by","name","through","this","introspector","class","loader"],"prompt_tokens":[]}
{"code_tokens":["public","Method[]","getMethods","(","final","Class<?>","c,","final","String","methodName",")","{","if","(","c","==","null",")","{","return","null",";","}","final","ClassMap","classMap","=","getMap","(","c",")",";","return","classMap",".","getMethods","(","methodName",")",";"],"docstring_tokens":["Gets","the","array","of","accessible","method","known","for","a","given","class"],"prompt_tokens":[]}
{"code_tokens":["private","static","boolean","isLoadedBy","(","final","ClassLoader","loader,","final","Class<?>","clazz",")","{","if","(","loader","!=","null",")","{","ClassLoader","cloader","=","clazz",".","getClassLoader","(",")",";","while","(","cloader","!=","null",")","{","if","(","cloader",".","equals","(","loader",")",")","{","return","true",";","}","cloader","=","cloader",".","getParent","(",")",";","}","}","return","false",";"],"docstring_tokens":["Checks","whether","a","class","is","loaded","through","a","given","class","loader","or","one","of","its","ascendants"],"prompt_tokens":[]}
{"code_tokens":["public","void","setScope","(","final","Scope","theScope",")","{","this",".","scope","=","theScope",";","if","(","theScope","!=","null",")","{","for","(","int","a","=","0",";","a","<","theScope",".","getArgCount","(",")",";","++a",")","{","this",".","declareSymbol","(","a",")",";","}","}"],"docstring_tokens":["Sets","this","script","scope"],"prompt_tokens":[]}
{"code_tokens":["private","Integer","getSymbol","(","final","String","name,","final","boolean","capture",")","{","Integer","register","=","namedVariables","!=","null","?","namedVariables",".","get","(","name",")",":","null",";","if","(","register","==","null","&&","capture","&&","parent","!=","null",")","{","final","Integer","pr","=","parent",".","getSymbol","(","name,","true",")",";","if","(","pr","!=","null",")","{","if","(","capturedVariables","==","null",")","{","capturedVariables","=","new","LinkedHashMap<Integer,","Integer>","(",")",";","}","if","(","namedVariables","==","null",")","{","namedVariables","=","new","LinkedHashMap<String,","Integer>","(",")",";","}","register","=","namedVariables",".","size","(",")",";","namedVariables",".","put","(","name,","register",")",";","capturedVariables",".","put","(","register,","pr",")",";","}","}","return","register",";"],"docstring_tokens":["Checks","whether","an","identifier","is","a","local","variable","or","argument,","ie","a","symbol"],"prompt_tokens":[]}
{"code_tokens":["public","boolean","isCapturedSymbol","(","final","int","symbol",")","{","return","capturedVariables","!=","null","&&","capturedVariables",".","containsKey","(","symbol",")",";"],"docstring_tokens":["Checks","whether","a","given","symbol","is","captured"],"prompt_tokens":[]}
{"code_tokens":["private","boolean","isSymbolDeclared","(","final","JexlNode",".","Info","info,","final","int","symbol",")","{","JexlNode","walk","=","info",".","getNode","(",")",";","while","(","walk","!=","null",")","{","if","(","walk","instanceof","JexlParser",".","LexicalUnit",")","{","final","LexicalScope","scope","=","(","(","JexlParser",".","LexicalUnit",")","walk",")",".","getLexicalScope","(",")",";","if","(","scope","!=","null","&&","scope",".","hasSymbol","(","symbol",")",")","{","return","true",";","}","//","stop","at","first","new","scope","reset,","aka","lambda\n","if","(","walk","instanceof","ASTJexlLambda",")","{","break",";","}","}","walk","=","walk",".","jjtGetParent","(",")",";","}","return","false",";"],"docstring_tokens":["Checks","if","a","symbol","is","defined","in","lexical","scopes"],"prompt_tokens":[]}
{"code_tokens":["protected","String","checkVariable","(","final","ASTIdentifier","identifier,","final","String","name",")","{","if","(","frame","!=","null",")","{","final","Integer","symbol","=","frame",".","getSymbol","(","name",")",";","if","(","symbol","!=","null",")","{","boolean","declared","=","true",";","if","(","frame",".","isCapturedSymbol","(","symbol",")",")","{","//","captured","are","declared","in","all","cases\n","identifier",".","setCaptured","(","true",")",";","}","else","{","declared","=","block",".","hasSymbol","(","symbol",")",";","//","one","of","the","lexical","blocks","above","should","declare","it\n","if","(","!declared",")","{","for","(","final","LexicalUnit","u",":","blocks",")","{","if","(","u",".","hasSymbol","(","symbol",")",")","{","declared","=","true",";","break",";","}","}","}","if","(","!declared","&&","info","instanceof","JexlNode",".","Info",")","{","declared","=","isSymbolDeclared","(","(","JexlNode",".","Info",")","info,","symbol",")",";","}","}","identifier",".","setSymbol","(","symbol,","name",")",";","if","(","!declared",")","{","identifier",".","setShaded","(","true",")",";","if","(","getFeatures","(",")",".","isLexicalShade","(",")",")","{","//","can","not","reuse","a","local","as","a","global\n","throw","new","JexlException","(","identifier,","name","+","\":","variable","is","not","defined\"",")",";","}","}","}","}","return","name",";"],"docstring_tokens":["Checks","whether","an","identifier","is","a","local","variable","or","argument,","ie","a","symbol,","stored","in","a","register"],"prompt_tokens":[]}
{"code_tokens":["protected","boolean","allowVariable","(","final","String","image",")","{","final","JexlFeatures","features","=","getFeatures","(",")",";","if","(","!features",".","supportsLocalVar","(",")",")","{","return","false",";","}","if","(","features",".","isReservedName","(","image",")",")","{","return","false",";","}","return","true",";"],"docstring_tokens":["Whether","a","given","variable","name","is","allowed"],"prompt_tokens":[]}
{"code_tokens":["protected","void","declareVariable","(","final","ASTVar","variable,","final","Token","token",")","{","final","String","name","=","token",".","image",";","if","(","!allowVariable","(","name",")",")","{","throwFeatureException","(","JexlFeatures",".","LOCAL_VAR,","token",")",";","}","if","(","frame","==","null",")","{","frame","=","new","Scope","(","null,","(","String[]",")","null",")",";","}","final","int","symbol","=","frame",".","declareVariable","(","name",")",";","variable",".","setSymbol","(","symbol,","name",")",";","if","(","frame",".","isCapturedSymbol","(","symbol",")",")","{","variable",".","setCaptured","(","true",")",";","}","//","lexical","feature","error\n","if","(","!declareSymbol","(","symbol",")",")","{","if","(","getFeatures","(",")",".","isLexical","(",")",")","{","throw","new","JexlException","(","variable,","name","+","\":","variable","is","already","declared\"",")",";","}","variable",".","setRedefined","(","true",")",";","}"],"docstring_tokens":["Declares","a","local","variable"],"prompt_tokens":[]}
{"code_tokens":["protected","void","declareParameter","(","final","Token","token",")","{","final","String","identifier","=","token",".","image",";","if","(","!allowVariable","(","identifier",")",")","{","throwFeatureException","(","JexlFeatures",".","LOCAL_VAR,","token",")",";","}","if","(","frame","==","null",")","{","frame","=","new","Scope","(","null,","(","String[]",")","null",")",";","}","final","int","symbol","=","frame",".","declareParameter","(","identifier",")",";","//","not","sure","how","declaring","a","parameter","could","fail",".",".",".","//","lexical","feature","error\n","if","(","!block",".","declareSymbol","(","symbol",")","&&","getFeatures","(",")",".","isLexical","(",")",")","{","final","JexlInfo","xinfo","=","info",".","at","(","token",".","beginLine,","token",".","beginColumn",")",";","throw","new","JexlException","(","xinfo,","identifier","+","\":","variable","is","already","declared\",","null",")",";","}"],"docstring_tokens":["Declares","a","local","parameter"],"prompt_tokens":[]}
{"code_tokens":["protected","void","jjtreeOpenNodeScope","(","final","JexlNode","node",")","{","//","nothing\n"],"docstring_tokens":["Called","by","parser","at","beginning","of","node","construction"],"prompt_tokens":[]}
{"code_tokens":["//","CSOFF:","DoubleCheckedLocking\n","protected","final","Introspector","base","(",")","{","Introspector","intro","=","ref",".","get","(",")",";","if","(","intro","==","null",")","{","//","double","checked","locking","is","ok","(","fixed","by","Java","5","memory","model",")",".","synchronized","(","this",")","{","intro","=","ref",".","get","(",")",";","if","(","intro","==","null",")","{","intro","=","new","Introspector","(","logger,","loader",".","get","(",")",",","permissions",")",";","ref","=","new","SoftReference<Introspector>","(","intro",")",";","loader","=","new","SoftReference<ClassLoader>","(","intro",".","getLoader","(",")",")",";","version",".","incrementAndGet","(",")",";","}","}","}","return","intro",";"],"docstring_tokens":["Gets","the","current","introspector","base"],"prompt_tokens":[]}
{"code_tokens":["@Override\n","public","String","getMessage","(",")","{","return","(","\"Lexical","error","at","line","\"\n","+","line","+","\",","column","\"\n","+","column","+","\"",".","Encountered:","\"\n","+","(","eof","?","\"<EOF>","\"\n",":","(","StringParser",".","escapeString","(","String",".","valueOf","(","current",")",",","'\"'",")",")","+","\"","(","\"","+","(","int",")","current","+","\"",")",",","\"",")","+","\"after",":","\"","+","StringParser",".","escapeString","(","after,","'\"'",")",")",";"],"docstring_tokens":["Returns","a","detailed","message","for","the","Error","when","it","is","thrown","by","the","token","manager","to","indicate","a","lexical","error"],"prompt_tokens":[]}
{"code_tokens":["private","static","ReferenceHandler","discoverHandler","(","Object","ref",")","{","//","optional","support\n","if","(","ref","instanceof","Optional<?>",")","{","return","ReferenceUberspect::handleOptional",";","}","//","atomic","ref\n","if","(","ref","instanceof","AtomicReference<?>",")","{","return","ReferenceUberspect::handleAtomic",";","}","//","a","reference\n","if","(","ref","instanceof","Reference<?>",")","{","return","ReferenceUberspect::handleReference",";","}","//","delegate\n","return","null",";"],"docstring_tokens":["Find","a","reference","handler","for","a","given","instance"],"prompt_tokens":[]}
{"code_tokens":["static","Object","handleAtomic","(","Object","ref",")","{","Object","obj","=","(","(","AtomicReference<?>",")","ref",")",".","get","(",")",";","return","obj","==","null?","ref",":","obj",";"],"docstring_tokens":["Cast","ref","to","atomic","reference,","call","get"],"prompt_tokens":[]}
{"code_tokens":["public","final","JexlScript","createScript","(","final","String","scriptText",")","{","return","createScript","(","null,","null,","scriptText,","(","String[]",")","null",")",";"],"docstring_tokens":["Creates","a","Script","from","a","String","containing","valid","JEXL","syntax"],"prompt_tokens":[]}
{"code_tokens":["public","final","JexlScript","createScript","(","final","File","scriptFile",")","{","return","createScript","(","null,","null,","readSource","(","scriptFile",")",",","(","String[]",")","null",")",";"],"docstring_tokens":["Creates","a","Script","from","a","File","containing","valid","JEXL","syntax"],"prompt_tokens":[]}
{"code_tokens":["public","final","JexlScript","createScript","(","final","URL","scriptUrl",")","{","return","createScript","(","null,","readSource","(","scriptUrl",")",",","(","String[]",")","null",")",";"],"docstring_tokens":["Creates","a","Script","from","a","URL","containing","valid","JEXL","syntax"],"prompt_tokens":[]}
{"code_tokens":["protected","String","readSource","(","final","File","file",")","{","if","(","file","==","null",")","{","throw","new","NullPointerException","(","\"source","file","is","null\"",")",";","}","try","(","BufferedReader","reader","=","new","BufferedReader","(","new","InputStreamReader","(","new","FileInputStream","(","file",")",",\n","getCharset","(",")",")",")",")","{","return","toString","(","reader",")",";","}","catch","(","final","IOException","xio",")","{","throw","new","JexlException","(","createInfo","(","file",".","toString","(",")",",","1,","1",")",",","\"could","not","read","source","File\",","xio",")",";","}"],"docstring_tokens":["Reads","a","JEXL","source","from","a","File"],"prompt_tokens":[]}
{"code_tokens":["protected","String","readSource","(","final","URL","url",")","{","if","(","url","==","null",")","{","throw","new","NullPointerException","(","\"source","URL","is","null\"",")",";","}","try","(","BufferedReader","reader","=","new","BufferedReader","(","new","InputStreamReader","(","url",".","openStream","(",")",",","getCharset","(",")",")",")",")","{","return","toString","(","reader",")",";","}","catch","(","final","IOException","xio",")","{","throw","new","JexlException","(","createInfo","(","url",".","toString","(",")",",","1,","1",")",",","\"could","not","read","source","URL\",","xio",")",";","}"],"docstring_tokens":["Reads","a","JEXL","source","from","an","URL"],"prompt_tokens":[]}
{"code_tokens":["public","boolean","isSafe","(",")","{","return","false",";"],"docstring_tokens":["Whether","this","is","a","dot","or","a","question-mark-dot","aka","safe-navigation","access"],"prompt_tokens":[]}
{"code_tokens":["public","static","LongRange","create","(","final","long","from,","final","long","to",")","{","if","(","from","<=","to",")","{","return","new","LongRange",".","Ascending","(","from,","to",")",";","}","return","new","LongRange",".","Descending","(","to,","from",")",";"],"docstring_tokens":["Creates","a","range,","ascending","or","descending","depending","on","boundaries","order"],"prompt_tokens":[]}
{"code_tokens":["private","static","Scope","scopeOf","(","final","JexlNode",".","Info","info",")","{","JexlNode","walk","=","info",".","getNode","(",")",";","while","(","walk","!=","null",")","{","if","(","walk","instanceof","ASTJexlScript",")","{","return","(","(","ASTJexlScript",")","walk",")",".","getScope","(",")",";","}","walk","=","walk",".","jjtGetParent","(",")",";","}","return","null",";"],"docstring_tokens":["Gets","the","scope","from","an","info"],"prompt_tokens":[]}
{"code_tokens":["public","boolean","addSymbol","(","final","int","symbol",")","{","if","(","symbol","<","LONGBITS",")","{","if","(","(","symbols","&","(","1L","<<","symbol",")",")","!=","0L",")","{","return","false",";","}","symbols","|=","(","1L","<<","symbol",")",";","}","else","{","final","int","s","=","symbol","-","LONGBITS",";","final","BitSet","ms","=","moreSymbols","(",")",";","if","(","ms",".","get","(","s",")",")","{","return","false",";","}","ms",".","set","(","s,","true",")",";","}","return","true",";"],"docstring_tokens":["Adds","a","symbol","in","this","scope"],"prompt_tokens":[]}
{"code_tokens":["public","static","Method","cacheMiss","(",")","{","try","{","return","ClassMap",".","class",".","getMethod","(","\"cacheMiss\"",")",";","}","catch","(","final","Exception","xio",")","{","//","this","really","can't","make","an","error",".",".",".","return","null",";","}"],"docstring_tokens":["A","method","that","returns","itself","used","as","a","marker","for","cache","miss,","allows","the","underlying","cache","map","to","be","strongly","typed"],"prompt_tokens":[]}
{"code_tokens":["Method[]","getMethods","(","final","String","methodName",")","{","final","Method[]","lm","=","byName",".","get","(","methodName",")",";","if","(","lm","!=","null","&&","lm",".","length",">","0",")","{","return","lm",".","clone","(",")",";","}","return","null",";"],"docstring_tokens":["Gets","all","the","methods","with","a","given","name","from","this","map"],"prompt_tokens":[]}
{"code_tokens":["public","String","read","(","final","Class<?>","clazz,","final","String","name",")","{","return","get","(","clazz",")",".","read","(",")",".","get","(","name",")",";"],"docstring_tokens":["Gets","the","read","permission","value","for","a","given","property","of","a","class"],"prompt_tokens":[]}
{"code_tokens":["public","String","write","(","final","Class<?>","clazz,","final","String","name",")","{","return","get","(","clazz",")",".","write","(",")",".","get","(","name",")",";"],"docstring_tokens":["Gets","the","write","permission","value","for","a","given","property","of","a","class"],"prompt_tokens":[]}
{"code_tokens":["public","String","execute","(","final","Class<?>","clazz,","final","String","name",")","{","final","String","m","=","get","(","clazz",")",".","execute","(",")",".","get","(","name",")",";","return","\"\"",".","equals","(","name",")","&&","m","!=","null?","clazz",".","getName","(",")",":","m",";"],"docstring_tokens":["Gets","the","execute","permission","value","for","a","given","method","of","a","class"],"prompt_tokens":[]}
{"code_tokens":["boolean","has","(","final","int","s",")","{","return","s",">=","0","&&","s","<","stack",".","length","&&","stack[s]","!=","Scope",".","UNDECLARED",";"],"docstring_tokens":["Whether","this","frame","defines","a","symbol,","ie","declared","it","and","assigned","it","a","value"],"prompt_tokens":[]}
{"code_tokens":["Frame","assign","(","final","Object",".",".",".","values",")","{","if","(","stack","!=","null",")","{","final","int","nparm","=","scope",".","getArgCount","(",")",";","final","Object[]","copy","=","stack",".","clone","(",")",";","int","ncopy","=","0",";","if","(","values","!=","null","&&","values",".","length",">","0",")","{","ncopy","=","Math",".","min","(","nparm","-","curried,","Math",".","min","(","nparm,","values",".","length",")",")",";","System",".","arraycopy","(","values,","0,","copy,","curried,","ncopy",")",";","}","//","unbound","parameters","are","defined","as","null\n","Arrays",".","fill","(","copy,","curried","+","ncopy,","nparm,","null",")",";","return","new","Frame","(","scope,","copy,","curried","+","ncopy",")",";","}","return","this",";"],"docstring_tokens":["Assign","values","to","this","frame"],"prompt_tokens":[]}
{"code_tokens":["public","static","JexlPropertyGet","discover","(","final","Introspector","is,","final","Class<?>","clazz,","final","String","identifier",")","{","if","(","identifier","!=","null",")","{","final","Field","field","=","is",".","getField","(","clazz,","identifier",")",";","if","(","field","!=","null",")","{","return","new","FieldGetExecutor","(","field",")",";","}","}","return","null",";"],"docstring_tokens":["Attempts","to","discover","a","FieldGetExecutor"],"prompt_tokens":[]}
{"code_tokens":["public","String","debugString","(",")","{","final","StringBuilder","builder","=","new","StringBuilder","(","method",")",";","builder",".","append","(","'","(","'",")",";","for","(","int","i","=","0",";","i","<","params",".","length",";","i++",")","{","if","(","i",">","0",")","{","builder",".","append","(","\",","\"",")",";","}","builder",".","append","(","Void",".","class","==","params[i]","?","\"null\"",":","params[i]",".","getName","(",")",")",";","}","builder",".","append","(","'",")","'",")",";","return","builder",".","toString","(",")",";"],"docstring_tokens":["Outputs","a","human","readable","debug","representation","of","this","key"],"prompt_tokens":[]}
{"code_tokens":["public","JexlInfo","jexlInfo","(",")","{","JexlInfo","info","=","null",";","JexlNode","node","=","this",";","while","(","node","!=","null",")","{","if","(","node",".","jjtGetValue","(",")","instanceof","JexlInfo",")","{","info","=","(","JexlInfo",")","node",".","jjtGetValue","(",")",";","break",";","}","node","=","node",".","jjtGetParent","(",")",";","}","if","(","lc",">=","0",")","{","final","int","c","=","lc","&","0xfff",";","final","int","l","=","lc",">>","0xc",";","//","at","least","an","info","with","line/column","number\n","return","info","!=","null?","info",".","at","(","info",".","getLine","(",")","+","l","-","1,","c",")",":","new","JexlInfo","(","null,","l,","c",")",";","}","//","weird","though",";","no","jjSetFirstToken","(",".",".",".",")","ever","called?\n","return","info",";"],"docstring_tokens":["Gets","the","associated","JexlInfo","instance"],"prompt_tokens":[]}
{"code_tokens":["public","boolean","isOperator","(",")","{","return","OperatorController",".","INSTANCE",".","control","(","this,","Boolean",".","TRUE",")",";"],"docstring_tokens":["Checks","whether","this","node","is","an","operator"],"prompt_tokens":[]}
{"code_tokens":["public","boolean","isConstant","(",")","{","return","isConstant","(","this","instanceof","JexlNode",".","Constant<?>",")",";"],"docstring_tokens":["Whether","this","node","is","a","constant","node","Its","value","can","not","change","after","the","first","evaluation","and","can","be","cached","indefinitely"],"prompt_tokens":[]}
{"code_tokens":["public","boolean","isLeftValue","(",")","{","JexlNode","walk","=","this",";","do","{","if","(","walk","instanceof","ASTIdentifier\n","||","walk","instanceof","ASTIdentifierAccess\n","||","walk","instanceof","ASTArrayAccess",")","{","return","true",";","}","final","int","nc","=","walk",".","jjtGetNumChildren","(",")","-","1",";","if","(","nc","<","0",")","{","return","walk",".","jjtGetParent","(",")","instanceof","ASTReference",";","}","walk","=","walk",".","jjtGetChild","(","nc",")",";","}","while","(","walk","!=","null",")",";","return","false",";"],"docstring_tokens":["Whether","this","node","is","a","left","value"],"prompt_tokens":[]}
{"code_tokens":["public","boolean","isLocalVar","(",")","{","return","this","instanceof","ASTIdentifier","&&","(","(","ASTIdentifier",")","this",")",".","getSymbol","(",")",">=","0",";"],"docstring_tokens":["Whether","this","node","is","a","local","variable"],"prompt_tokens":[]}
{"code_tokens":["public","boolean","isSafeLhs","(","final","boolean","safe",")","{","if","(","this","instanceof","ASTReference",")","{","return","jjtGetChild","(","0",")",".","isSafeLhs","(","safe",")",";","}","if","(","this","instanceof","ASTMethodNode",")","{","if","(","this",".","jjtGetNumChildren","(",")",">","1\n","&&","this",".","jjtGetChild","(","0",")","instanceof","ASTIdentifierAccess\n","&&","(","(","(","ASTIdentifierAccess",")","this",".","jjtGetChild","(","0",")",")",".","isSafe","(",")","||","safe",")",")","{","return","true",";","}","}","final","JexlNode","parent","=","this",".","jjtGetParent","(",")",";","if","(","parent","==","null",")","{","return","false",";","}","//","find","this","node","in","its","parent\n","final","int","nsiblings","=","parent",".","jjtGetNumChildren","(",")",";","int","rhs","=","-1",";","for","(","int","s","=","0",";","s","<","nsiblings",";","++s",")","{","final","JexlNode","sibling","=","parent",".","jjtGetChild","(","s",")",";","if","(","sibling","==","this",")","{","//","the","next","chid","offset","of","this","nodes","parent\n","rhs","=","s","+","1",";","break",";","}","}","//","seek","next","child","in","parent\n","if","(","rhs",">=","0","&&","rhs","<","nsiblings",")","{","JexlNode","rsibling","=","parent",".","jjtGetChild","(","rhs",")",";","if","(","rsibling","instanceof","ASTMethodNode","||","rsibling","instanceof","ASTFunctionNode",")","{","rsibling","=","rsibling",".","jjtGetChild","(","0",")",";","}","if","(","rsibling","instanceof","ASTIdentifierAccess\n","&&","(","(","(","ASTIdentifierAccess",")","rsibling",")",".","isSafe","(",")","||","safe",")",")","{","return","true",";","}","if","(","rsibling","instanceof","ASTArrayAccess",")","{","return","safe",";","}","}","return","false",";"],"docstring_tokens":["Whether","this","node","is","the","left-hand","side","of","a","safe","access","identifier","as","in"],"prompt_tokens":[]}
{"code_tokens":["public","static","JexlPropertySet","discover","(","final","Introspector","is,\n","final","Class<?>","clazz,\n","final","String","identifier,\n","final","Object","value",")","{","if","(","identifier","!=","null",")","{","final","Field","field","=","is",".","getField","(","clazz,","identifier",")",";","if","(","field","!=","null\n","&&","!Modifier",".","isFinal","(","field",".","getModifiers","(",")",")","&&","(","value","==","null","||","MethodKey",".","isInvocationConvertible","(","field",".","getType","(",")",",","value",".","getClass","(",")",",","false",")",")",")","{","return","new","FieldSetExecutor","(","field",")",";","}","}","return","null",";"],"docstring_tokens":["Attempts","to","discover","a","FieldSetExecutor"],"prompt_tokens":[]}
{"code_tokens":["public","boolean","debug","(","final","JxltEngine",".","Expression","je",")","{","if","(","je","instanceof","TemplateExpression",")","{","final","TemplateEngine",".","TemplateExpression","te","=","(","TemplateEngine",".","TemplateExpression",")","je",";","return","visit","(","te,","this",")","!=","null",";","}","return","false",";"],"docstring_tokens":["Position","the","debugger","on","the","root","of","a","template","expression"],"prompt_tokens":[]}
{"code_tokens":["public","boolean","debug","(","final","JxltEngine",".","Template","jt",")","{","if","(","!","(","jt","instanceof","TemplateScript",")",")","{","return","false",";","}","final","TemplateScript","ts","=","(","TemplateScript",")","jt",";","//","ensure","expr","is","not","null","for","templates\n","this",".","exprs","=","ts",".","getExpressions","(",")","==","null?","new","TemplateExpression[0]",":","ts",".","getExpressions","(",")",";","this",".","script","=","ts",".","getScript","(",")",";","start","=","0",";","end","=","0",";","indentLevel","=","0",";","builder",".","setLength","(","0",")",";","cause","=","script",";","final","int","num","=","script",".","jjtGetNumChildren","(",")",";","for","(","int","i","=","0",";","i","<","num",";","++i",")","{","final","JexlNode","child","=","script",".","jjtGetChild","(","i",")",";","acceptStatement","(","child,","null",")",";","}","//","the","last","line\n","if","(","builder",".","length","(",")",">","0","&&","builder",".","charAt","(","builder",".","length","(",")","-","1",")","!=","'\\n'",")","{","builder",".","append","(","'\\n'",")",";","}","end","=","builder",".","length","(",")",";","return","end",">","0",";"],"docstring_tokens":["Position","the","debugger","on","the","root","of","a","template","script"],"prompt_tokens":[]}
{"code_tokens":["private","Object","visit","(","final","TemplateExpression","expr,","final","Object","data",")","{","Object","r",";","switch","(","expr",".","getType","(",")",")","{","case","CONSTANT:\n","r","=","visit","(","(","ConstantExpression",")","expr,","data",")",";","break",";","case","IMMEDIATE:\n","r","=","visit","(","(","ImmediateExpression",")","expr,","data",")",";","break",";","case","DEFERRED:\n","r","=","visit","(","(","DeferredExpression",")","expr,","data",")",";","break",";","case","NESTED:\n","r","=","visit","(","(","NestedExpression",")","expr,","data",")",";","break",";","case","COMPOSITE:\n","r","=","visit","(","(","CompositeExpression",")","expr,","data",")",";","break",";","default:\n","r","=","null",";","}","return","r",";"],"docstring_tokens":["Visit","a","template","expression"],"prompt_tokens":[]}
{"code_tokens":["public","LexicalFrame","pop","(",")","{","//","undefine","all","symbols\n","clearSymbols","(","s","->","frame",".","set","(","s,","Scope",".","UNDEFINED",")",")",";","//","restore","values","of","captured","symbols","that","were","overwritten\n","if","(","stack","!=","null",")","{","while","(","!stack",".","isEmpty","(",")",")","{","Object","value","=","stack",".","pop","(",")",";","if","(","value","==","Scope",".","UNDECLARED",")","{","value","=","Scope",".","UNDEFINED",";","}","else","if","(","value","==","this",")","{","value","=","null",";","}","final","int","symbol","=","(","Integer",")","stack",".","pop","(",")",";","frame",".","set","(","symbol,","value",")",";","}","}","return","previous",";"],"docstring_tokens":["Pops","back","values","and","lexical","frame"],"prompt_tokens":[]}
{"code_tokens":["private","boolean","isArrayReferenceLiteral","(","final","JexlNode","child",")","{","if","(","child","instanceof","ASTStringLiteral",")","{","return","true",";","}","if","(","child","instanceof","ASTNumberLiteral","&&","(","(","ASTNumberLiteral",")","child",")",".","isInteger","(",")",")","{","return","true",";","}","return","false",";"],"docstring_tokens":["Checks","whether","a","node","is","a","string","or","an","integer"],"prompt_tokens":[]}
{"code_tokens":["public","void","assertExpression","(","final","String","expression,","final","Object","expected",")","throws","Exception","{","final","JexlScript","exp","=","engine",".","createScript","(","expression",")",";","final","Object","value","=","exp",".","execute","(","context",")",";","if","(","expected","instanceof","BigDecimal",")","{","final","JexlArithmetic","jexla","=","engine",".","getArithmetic","(",")",";","Assert",".","assertEquals","(","\"expression:","\"","+","expression,","0,\n","(","(","BigDecimal",")","expected",")",".","compareTo","(","jexla",".","toBigDecimal","(","value",")",")",")",";","}","if","(","expected","!=","null","&&","value","!=","null",")","{","if","(","expected",".","getClass","(",")",".","isArray","(",")","&&","value",".","getClass","(",")",".","isArray","(",")",")","{","final","int","esz","=","Array",".","getLength","(","expected",")",";","final","int","vsz","=","Array",".","getLength","(","value",")",";","final","String","report","=","\"expression:","\"","+","expression",";","Assert",".","assertEquals","(","report","+","\",","array","size\",","esz,","vsz",")",";","for","(","int","i","=","0",";","i","<","vsz",";","++i",")","{","Assert",".","assertEquals","(","report","+","\",","value@[]\"","+","i,","Array",".","get","(","expected,","i",")",",","Array",".","get","(","value,","i",")",")",";","}","}","else","{","Assert",".","assertEquals","(","\"expression:","\"","+","expression","+","\",","\"\n","+","expected",".","getClass","(",")",".","getSimpleName","(",")","+","\"","?=","\"\n","+","value",".","getClass","(",")",".","getSimpleName","(",")",",\n","expected,","value",")",";","}","}","else","{","Assert",".","assertEquals","(","\"expression:","\"","+","expression,","expected,","value",")",";","}"],"docstring_tokens":["Performs","an","assertion","that","the","value","of","the","given","JEXL","expression","evaluates","to","the","given","expected","value"],"prompt_tokens":[]}
{"code_tokens":["public","static","ListSetExecutor","discover","(","final","Introspector","is,\n","final","Class<?>","clazz,\n","final","Object","identifier,\n","final","Object","value",")","{","final","Integer","index","=","castInteger","(","identifier",")",";","if","(","index","!=","null",")","{","if","(","clazz",".","isArray","(",")",")","{","//","we","could","verify","if","the","call","can","be","performed","but","it","does","not","change\n","//","the","fact","we","would","fail",".",".",".","//","Class<?>","formal","=","clazz",".","getComponentType","(",")",";","//","Class<?>","actual","=","value","==","null?","Object",".","class",":","value",".","getClass","(",")",";","//","if","(","IntrospectionUtils",".","isMethodInvocationConvertible","(","formal,","actual,","false",")",")","{","return","new","ListSetExecutor","(","clazz,","ARRAY_SET,","index",")",";","//","}","}","if","(","List",".","class",".","isAssignableFrom","(","clazz",")",")","{","return","new","ListSetExecutor","(","clazz,","LIST_SET,","index",")",";","}","}","return","null",";"],"docstring_tokens":["Attempts","to","discover","a","ListSetExecutor"],"prompt_tokens":[]}
{"code_tokens":["protected","Frame","createFrame","(","final","Object[]","args",")","{","return","script",".","createFrame","(","args",")",";"],"docstring_tokens":["Creates","this","script","frame","for","evaluation"],"prompt_tokens":[]}
{"code_tokens":["protected","Interpreter","createInterpreter","(","final","JexlContext","context,","final","Frame","frame",")","{","final","JexlOptions","opts","=","jexl",".","options","(","script,","context",")",";","return","jexl",".","createInterpreter","(","context,","frame,","opts",")",";"],"docstring_tokens":["Creates","this","script","interpreter"],"prompt_tokens":[]}
{"code_tokens":["@Override\n","public","Map<String,","Object>","getPragmas","(",")","{","return","script",".","getPragmas","(",")",";"],"docstring_tokens":["Get","this","script","pragmas","Pragma","keys","are","ant-ish","variables,","their","values","are","scalar","literals"],"prompt_tokens":[]}
{"code_tokens":["@Override\n","public","Object","next","(",")","{","if","(","pos","<","size",")","{","return","Array",".","get","(","array,","pos++",")",";","}","//","we","screwed","up",".",".",".","throw","new","NoSuchElementException","(","\"No","more","elements:","\"","+","pos\n","+","\"","/","\"","+","size",")",";"],"docstring_tokens":["Move","to","next","element","in","the","array"],"prompt_tokens":[]}
{"code_tokens":["@Override\n","public","boolean","hasNext","(",")","{","return","(","pos","<","size",")",";"],"docstring_tokens":["Check","to","see","if","there","is","another","element","in","the","array"],"prompt_tokens":[]}
{"code_tokens":["@Override\n","public","void","remove","(",")","{","throw","new","UnsupportedOperationException","(",")",";"],"docstring_tokens":["No","op--merely","added","to","satify","the","Iterator","interface"],"prompt_tokens":[]}
{"code_tokens":["public","int","size","(",")","{","return","size",";"],"docstring_tokens":["Returns","the","cache","size"],"prompt_tokens":[]}
{"code_tokens":["public","V","get","(","final","K","key",")","{","lock",".","readLock","(",")",".","lock","(",")",";","try","{","final","Map<K,","V>","map","=","ref","!=","null","?","ref",".","get","(",")",":","null",";","return","map","!=","null","?","map",".","get","(","key",")",":","null",";","}","finally","{","lock",".","readLock","(",")",".","unlock","(",")",";","}"],"docstring_tokens":["Gets","a","value","from","cache"],"prompt_tokens":[]}
{"code_tokens":["public","void","put","(","final","K","key,","final","V","script",")","{","lock",".","writeLock","(",")",".","lock","(",")",";","try","{","Map<K,","V>","map","=","ref","!=","null","?","ref",".","get","(",")",":","null",";","if","(","map","==","null",")","{","map","=","createCache","(","size",")",";","ref","=","new","SoftReference<Map<K,","V>>","(","map",")",";","}","map",".","put","(","key,","script",")",";","}","finally","{","lock",".","writeLock","(",")",".","unlock","(",")",";","}"],"docstring_tokens":["Puts","a","value","in","cache"],"prompt_tokens":[]}
{"code_tokens":["public","List<Map",".","Entry<K,","V>>","entries","(",")","{","lock",".","readLock","(",")",".","lock","(",")",";","try","{","final","Map<K,","V>","map","=","ref","!=","null","?","ref",".","get","(",")",":","null",";","if","(","map","==","null",")","{","return","Collections",".","emptyList","(",")",";","}","final","Set<Map",".","Entry<K,","V>>","set","=","map",".","entrySet","(",")",";","final","List<Map",".","Entry<K,","V>>","entries","=","new","ArrayList<Map",".","Entry<K,","V>>","(","set",".","size","(",")",")",";","for","(","final","Map",".","Entry<K,","V>","e",":","set",")","{","entries",".","add","(","new","SoftCacheEntry<K,","V>","(","e",")",")",";","}","return","entries",";","}","finally","{","lock",".","readLock","(",")",".","unlock","(",")",";","}"],"docstring_tokens":["Produces","the","cache","entry","set"],"prompt_tokens":[]}
{"code_tokens":["public","boolean","isSafe","(",")","{","return","isSet","(","SAFE,","flags",")",";"],"docstring_tokens":["Checks","whether","the","engine","considers","null","in","navigation","expression","as","errors","during","evaluation"],"prompt_tokens":[]}
{"code_tokens":["public","boolean","isSilent","(",")","{","return","isSet","(","SILENT,","flags",")",";"],"docstring_tokens":["Checks","whether","the","engine","will","throw","a","JexlException","when","an","error","is","encountered","during","evaluation"],"prompt_tokens":[]}
{"code_tokens":["public","static","ConstructorMethod","discover","(","final","Introspector","is,","final","Object","ctorHandle,","final","Object",".",".",".","args",")","{","String","className",";","Class<?>","clazz","=","null",";","if","(","ctorHandle","instanceof","Class<?>",")","{","clazz","=","(","Class<?>",")","ctorHandle",";","className","=","clazz",".","getName","(",")",";","}","else","if","(","ctorHandle","!=","null",")","{","className","=","ctorHandle",".","toString","(",")",";","}","else","{","return","null",";","}","final","Constructor<?>","ctor","=","is",".","getConstructor","(","clazz,","new","MethodKey","(","className,","args",")",")",";","if","(","ctor","!=","null",")","{","return","new","ConstructorMethod","(","ctor",")",";","}","return","null",";"],"docstring_tokens":["Discovers","a","class","constructor","and","wrap","it","as","a","JexlMethod"],"prompt_tokens":[]}
{"code_tokens":["public","JexlBuilder","arithmetic","(","final","JexlArithmetic","a",")","{","this",".","arithmetic","=","a",";","options",".","setStrictArithmetic","(","a",".","isStrict","(",")",")",";","options",".","setMathContext","(","a",".","getMathContext","(",")",")",";","options",".","setMathScale","(","a",".","getMathScale","(",")",")",";","return","this",";"],"docstring_tokens":["Sets","the","JexlArithmetic","instance","the","engine","will","use"],"prompt_tokens":[]}
{"code_tokens":["public","JexlBuilder","sandbox","(","final","JexlSandbox","box",")","{","this",".","sandbox","=","box",";","return","this",";"],"docstring_tokens":["Sets","the","sandbox","the","engine","will","use"],"prompt_tokens":[]}
{"code_tokens":["@Deprecated\n","public","JexlBuilder","loader","(","final","Charset","arg",")","{","return","charset","(","arg",")",";"],"docstring_tokens":["Sets","the","charset","to","use"],"prompt_tokens":[]}
{"code_tokens":["public","JexlBuilder","antish","(","final","boolean","flag",")","{","options",".","setAntish","(","flag",")",";","return","this",";"],"docstring_tokens":["Sets","whether","the","engine","will","resolve","antish","variable","names"],"prompt_tokens":[]}
{"code_tokens":["public","JexlBuilder","lexical","(","final","boolean","flag",")","{","options",".","setLexical","(","flag",")",";","return","this",";"],"docstring_tokens":["Sets","whether","the","engine","is","in","lexical","mode"],"prompt_tokens":[]}
{"code_tokens":["public","JexlBuilder","lexicalShade","(","final","boolean","flag",")","{","options",".","setLexicalShade","(","flag",")",";","return","this",";"],"docstring_tokens":["Sets","whether","the","engine","is","in","lexical","shading","mode"],"prompt_tokens":[]}
{"code_tokens":["public","JexlBuilder","silent","(","final","boolean","flag",")","{","options",".","setSilent","(","flag",")",";","return","this",";"],"docstring_tokens":["Sets","whether","the","engine","will","throw","JexlException","during","evaluation","when","an","error","is","triggered"],"prompt_tokens":[]}
{"code_tokens":["public","JexlFeatures","reservedNames","(","final","Collection<String>","names",")","{","if","(","names","==","null","||","names",".","isEmpty","(",")",")","{","reservedNames","=","Collections",".","emptySet","(",")",";","}","else","{","reservedNames","=","Collections",".","unmodifiableSet","(","new","TreeSet<String>","(","names",")",")",";","}","setFeature","(","RESERVED,","!reservedNames",".","isEmpty","(",")",")",";","return","this",";"],"docstring_tokens":["Sets","a","collection","of","reserved","names","precluding","those","to","be","used","as","local","variables","or","parameter","names"],"prompt_tokens":[]}
{"code_tokens":["public","JexlFeatures","lexical","(","final","boolean","flag",")","{","setFeature","(","LEXICAL,","flag",")",";","return","this",";"],"docstring_tokens":["Sets","whether","syntactic","lexical","mode","is","enabled"],"prompt_tokens":[]}
{"code_tokens":["public","JexlFeatures","lexicalShade","(","final","boolean","flag",")","{","setFeature","(","LEXICAL_SHADE,","flag",")",";","if","(","flag",")","{","setFeature","(","LEXICAL,","true",")",";","}","return","this",";"],"docstring_tokens":["Sets","whether","syntactic","lexical","shade","is","enabled"],"prompt_tokens":[]}
{"code_tokens":["public","JexlInfo","at","(","final","int","l,","final","int","c",")","{","return","new","JexlInfo","(","name,","l,","c",")",";"],"docstring_tokens":["Creates","info","reusing","the","name"],"prompt_tokens":[]}
{"code_tokens":["public","static","JexlInfo","from","(","final","JexlScript","script",")","{","return","script","instanceof","Script?","(","(","Script",")","script",")",".","getInfo","(",")",":","null",";"],"docstring_tokens":["Gets","the","info","from","a","script"],"prompt_tokens":[]}
{"code_tokens":["private","static","void","flatten","(","final","List<JexlNode>","list,","final","JexlNode","node",")","{","final","int","nc","=","node",".","jjtGetNumChildren","(",")",";","list",".","add","(","node",")",";","for","(","int","c","=","0",";","c","<","nc",";","++c",")","{","flatten","(","list,","node",".","jjtGetChild","(","c",")",")",";","}"],"docstring_tokens":["Recursively","adds","all","children","of","a","script","to","the","list","of","descendants"],"prompt_tokens":[]}
{"code_tokens":["public","static","ListGetExecutor","discover","(","final","Introspector","is,","final","Class<?>","clazz,","final","Integer","index",")","{","if","(","index","!=","null",")","{","if","(","clazz",".","isArray","(",")",")","{","return","new","ListGetExecutor","(","clazz,","ARRAY_GET,","index",")",";","}","if","(","List",".","class",".","isAssignableFrom","(","clazz",")",")","{","return","new","ListGetExecutor","(","clazz,","LIST_GET,","index",")",";","}","}","return","null",";"],"docstring_tokens":["Attempts","to","discover","a","ListGetExecutor"],"prompt_tokens":[]}
{"code_tokens":["@SuppressWarnings","(","\"SuspiciousSystemArraycopy\"",")","private","Object[]","handleVarArg","(","Object[]","actual",")","{","final","Class<?>","vaclass","=","vaClass",";","final","int","vastart","=","vaStart",";","//","variable","arguments","count\n","final","int","varargc","=","actual",".","length","-","vastart",";","//","if","no","values","are","being","passed","into","the","vararg,","size","==","0\n","if","(","varargc","==","1",")","{","//","if","one","non-null","value","is","being","passed","into","the","vararg,\n","//","and","that","arg","is","not","the","sole","argument","and","not","an","array","of","the","expected","type,\n","//","make","the","last","arg","an","array","of","the","expected","type\n","if","(","actual[vastart]","!=","null",")","{","final","Class<?>","aclazz","=","actual[vastart]",".","getClass","(",")",";","if","(","!aclazz",".","isArray","(",")","||","!vaclass",".","isAssignableFrom","(","aclazz",".","getComponentType","(",")",")",")","{","//","create","a","1-length","array","to","hold","and","replace","the","last","argument\n","final","Object","lastActual","=","Array",".","newInstance","(","vaclass,","1",")",";","Array",".","set","(","lastActual,","0,","actual[vastart]",")",";","actual[vastart]","=","lastActual",";","}","}","//","else,","the","vararg","is","null","and","used","as","is,","considered","as","T[]\n","}","else","{","//","if","no","or","multiple","values","are","being","passed","into","the","vararg,\n","//","put","them","in","an","array","of","the","expected","type\n","final","Object","varargs","=","Array",".","newInstance","(","vaclass,","varargc",")",";","System",".","arraycopy","(","actual,","vastart,","varargs,","0,","varargc",")",";","//","put","all","arguments","into","a","new","actual","array","of","the","appropriate","size\n","final","Object[]","newActual","=","new","Object[vastart","+","1]",";","System",".","arraycopy","(","actual,","0,","newActual,","0,","vastart",")",";","newActual[vastart]","=","varargs",";","//","replace","the","old","actual","array\n","actual","=","newActual",";","}","return","actual",";"],"docstring_tokens":["Reassembles","arguments","if","the","method","is","a","vararg","method"],"prompt_tokens":[]}
{"code_tokens":["public","boolean","allow","(","final","Constructor<?>","ctor",")","{","if","(","ctor","==","null",")","{","return","false",";","}","if","(","!Modifier",".","isPublic","(","ctor",".","getModifiers","(",")",")",")","{","return","false",";","}","final","Class<?>","clazz","=","ctor",".","getDeclaringClass","(",")",";","if","(","!allow","(","clazz,","false",")",")","{","return","false",";","}","//","is","ctor","annotated","with","nojexl","?\n","final","NoJexl","nojexl","=","ctor",".","getAnnotation","(","NoJexl",".","class",")",";","if","(","nojexl","!=","null",")","{","return","false",";","}","return","true",";"],"docstring_tokens":["Checks","whether","a","constructor","explicitly","disallows","JEXL","introspection"],"prompt_tokens":[]}
{"code_tokens":["static","java",".","lang",".","reflect",".","Method","discoverGet","(","final","Introspector","is,\n","final","String","which,\n","final","Class<?>","clazz,\n","final","String","property",")","{","if","(","property","==","null","||","property",".","isEmpty","(",")",")","{","return","null",";","}","//","this","is","gross","and","linear,","but","it","keeps","it","straightforward",".","java",".","lang",".","reflect",".","Method","method",";","final","int","start","=","which",".","length","(",")",";","//","\"get\"","or","\"is\"","so","3","or","2","for","char","case","switch\n","//","start","with","get<Property>\n","final","StringBuilder","sb","=","new","StringBuilder","(","which",")",";","sb",".","append","(","property",")",";","//","uppercase","nth","char\n","final","char","c","=","sb",".","charAt","(","start",")",";","sb",".","setCharAt","(","start,","Character",".","toUpperCase","(","c",")",")",";","method","=","is",".","getMethod","(","clazz,","sb",".","toString","(",")",",","EMPTY_PARAMS",")",";","//lowercase","nth","char\n","if","(","method","==","null",")","{","sb",".","setCharAt","(","start,","Character",".","toLowerCase","(","c",")",")",";","method","=","is",".","getMethod","(","clazz,","sb",".","toString","(",")",",","EMPTY_PARAMS",")",";","}","return","method",";"],"docstring_tokens":["Base","method","for","boolean","and","object","property","get"],"prompt_tokens":[]}
{"code_tokens":["protected","final","Object","visit","(","final","SimpleNode","node,","final","Object","data",")","{","throw","new","UnsupportedOperationException","(","node",".","getClass","(",")",".","getSimpleName","(",")","+","\"",":","not","supported","yet",".","\"",")",";"],"docstring_tokens":["Unused,","satisfy","ParserVisitor","interface"],"prompt_tokens":[]}
{"code_tokens":["protected","final","Object","visit","(","final","ASTAmbiguous","node,","final","Object","data",")","{","throw","new","UnsupportedOperationException","(","\"unexpected","type","of","node\"",")",";"],"docstring_tokens":["Unused,","should","throw","in","Parser"],"prompt_tokens":[]}
{"code_tokens":["public","JexlOptions","optionsSet","(","final","JexlOptions","opts",")","{","if","(","opts","!=","null",")","{","opts",".","set","(","options",")",";","}","return","opts",";"],"docstring_tokens":["Sets","options","from","this","engine","options"],"prompt_tokens":[]}
{"code_tokens":["protected","Object","doCreateInstance","(","final","Object","clazz,","final","Object",".",".",".","args",")","{","JexlException","xjexl","=","null",";","Object","result","=","null",";","final","JexlInfo","info","=","debug","?","createInfo","(",")",":","null",";","try","{","JexlMethod","ctor","=","uberspect",".","getConstructor","(","clazz,","args",")",";","if","(","ctor","==","null","&&","arithmetic",".","narrowArguments","(","args",")",")","{","ctor","=","uberspect",".","getConstructor","(","clazz,","args",")",";","}","if","(","ctor","!=","null",")","{","result","=","ctor",".","invoke","(","clazz,","args",")",";","}","else","{","xjexl","=","new","JexlException",".","Method","(","info,","clazz",".","toString","(",")",",","args",")",";","}","}","catch","(","final","JexlException","xany",")","{","xjexl","=","xany",";","}","catch","(","final","Exception","xany",")","{","xjexl","=","new","JexlException",".","Method","(","info,","clazz",".","toString","(",")",",","args,","xany",")",";","}","if","(","xjexl","!=","null",")","{","if","(","silent",")","{","logger",".","warn","(","xjexl",".","getMessage","(",")",",","xjexl",".","getCause","(",")",")",";","return","null",";","}","throw","xjexl",".","clean","(",")",";","}","return","result",";"],"docstring_tokens":["Creates","a","new","instance","of","an","object","using","the","most","appropriate","constructor","based","on","the","arguments"],"prompt_tokens":[]}
{"code_tokens":["public","boolean","equals","(","final","AbstractExecutor","arg",")","{","//","common","equality","check\n","if","(","!this",".","getClass","(",")",".","equals","(","arg",".","getClass","(",")",")",")","{","return","false",";","}","if","(","!this",".","getMethod","(",")",".","equals","(","arg",".","getMethod","(",")",")",")","{","return","false",";","}","if","(","!this",".","getTargetClass","(",")",".","equals","(","arg",".","getTargetClass","(",")",")",")","{","return","false",";","}","//","specific","equality","check\n","final","Object","lhsp","=","this",".","getTargetProperty","(",")",";","final","Object","rhsp","=","arg",".","getTargetProperty","(",")",";","if","(","lhsp","==","null","&&","rhsp","==","null",")","{","return","true",";","}","if","(","lhsp","!=","null","&&","rhsp","!=","null",")","{","return","lhsp",".","equals","(","rhsp",")",";","}","return","false",";"],"docstring_tokens":["Indicates","whether","some","other","executor","is","equivalent","to","this","one"],"prompt_tokens":[]}
{"code_tokens":["public","final","boolean","isAlive","(",")","{","return","(","method","!=","null",")",";"],"docstring_tokens":["Tell","whether","the","executor","is","alive","by","looking","at","the","value","of","the","method"],"prompt_tokens":[]}
{"code_tokens":["public","boolean","isCacheable","(",")","{","return","method","!=","null",";"],"docstring_tokens":["Specifies","if","this","executor","is","cacheable","and","able","to","be","reused","for","this","class","of","object","it","was","returned","for"],"prompt_tokens":[]}
{"code_tokens":["public","static","MapSetExecutor","discover","(","final","Introspector","is,\n","final","Class<?>","clazz,\n","final","Object","identifier,\n","final","Object","value",")","{","if","(","Map",".","class",".","isAssignableFrom","(","clazz",")",")","{","return","new","MapSetExecutor","(","clazz,","MAP_SET,","identifier,","value",")",";","}","return","null",";"],"docstring_tokens":["Attempts","to","discover","a","MapSetExecutor"],"prompt_tokens":[]}
{"code_tokens":["private","boolean","isArithmetic","(","final","JexlMethod","vm",")","{","if","(","vm","instanceof","MethodExecutor",")","{","final","Method","method","=","(","(","MethodExecutor",")","vm",")",".","getMethod","(",")",";","return","JexlArithmetic",".","class",".","equals","(","method",".","getDeclaringClass","(",")",")",";","}","return","false",";"],"docstring_tokens":["Checks","whether","a","method","is","a","JexlArithmetic","method"],"prompt_tokens":[]}
{"code_tokens":["@Override\n","public","boolean","isCollectionAccessor","(","final","Method","method",")","{","return","false",";"],"docstring_tokens":["The","method","way","well","represent","a","collection,","but","this","facet","factory","does","not","have","any","opinion","on","the","matter"],"prompt_tokens":[]}
{"code_tokens":["public","void","run","(","final","@NonNull","UnaryOperator<InteractionContext>","sudoMapper,\n","final","@NonNull","ThrowingRunnable","runnable",")","{","call","(","sudoMapper,","ThrowingRunnable",".","toCallable","(","runnable",")",")",";"],"docstring_tokens":["Executes","the","supplied","Callable","block,","within","the","provided","InteractionContext"],"prompt_tokens":[]}
{"code_tokens":["public","void","simulateChoiceSelect","(","final","int","choiceIndex",")","{","selectedItem",".","setValue","(","choiceBox",".","getValue","(",")",".","getElseFail","(","choiceIndex",")",")",";"],"docstring_tokens":["assuming","the","parameter","is","a","scalar","type"],"prompt_tokens":[]}
{"code_tokens":["public","void","simulateMultiChoiceSelect","(","final","int",".",".",".","choiceIndices",")","{","val","newValuePojos","=","choiceBox",".","getValue","(",")",".","pickByIndex","(","choiceIndices",")",".","map","(","ManagedObject::getPojo",")",";","val","newValue","=","ManagedObject",".","of","(","valueSpecification,\n","newValuePojos",".","toList","(",")",")",";","selectedItem",".","setValue","(","newValue",")",";"],"docstring_tokens":["assuming","the","parameter","is","a","non-scalar","type"],"prompt_tokens":[]}
{"code_tokens":["public","Class<?>","unboxPrimitiveIfNecessary","(","final","@NonNull","Class<?>","clazz",")","{","//","an","optimization,","to","skip","the","lookup","if","possible\n","val","firstPass","=","clazz",".","isPrimitive","(",")","||","!clazz",".","getPackageName","(",")",".","equals","(","\"java",".","lang\"",")","?","clazz\n",":","primitiveByNameWrapper",".","get","(","clazz",")",";","return","firstPass!=null\n","?","firstPass\n",":","clazz",";"],"docstring_tokens":["Unbox","the","given","class","if","it","is","a","primitive","wrapper","class,","returning","the","corresponding","primitive","type","instead"],"prompt_tokens":[]}
{"code_tokens":["@Override\n","protected","ApplicationAdvice","appliesTo","(","final","IModel<?>","model",")","{","if","(","!","(","model","instanceof","ServiceActionsModel",")",")","{","return","ApplicationAdvice",".","DOES_NOT_APPLY",";","}","val","menuUiModel","=","(","(","ServiceActionsModel",")","model",")",".","getObject","(",")",";","val","menuBarSelect","=","menuUiModel",".","getMenuBarSelect","(",")",";","return","appliesIf","(","menuBarSelect","==","DomainServiceLayout",".","MenuBar",".","TERTIARY\n","||","menuBarSelect","==","null",")",";"],"docstring_tokens":["Applies","only","to","tertiary","service","action","models"],"prompt_tokens":[]}
{"code_tokens":["public","static","ClobJpaEmbeddable","fromClob","(","Clob","clob",")","{","if","(","clob","==","null",")","{","return","null",";","}","val","clobJpaEmbeddable","=","new","ClobJpaEmbeddable","(",")",";","clobJpaEmbeddable",".","chars","=","clob",".","getChars","(",")",".","toString","(",")",";","clobJpaEmbeddable",".","mimeType","=","clob",".","getMimeType","(",")",".","toString","(",")",";","clobJpaEmbeddable",".","name","=","clob",".","getName","(",")",";","return","clobJpaEmbeddable",";"],"docstring_tokens":["Factory","method","to","marshall","a","Clob","into","a","ClobJpaEmbeddable"],"prompt_tokens":[]}
{"code_tokens":["public","static","Clob","toClob","(","final","ClobJpaEmbeddable","clobJpaEmbeddable",")","{","return","Optional",".","ofNullable","(","clobJpaEmbeddable",")",".","map","(","ClobJpaEmbeddable::asClob",")",".","orElse","(","null",")",";"],"docstring_tokens":["Reciprocal","method","to","marshall","a","ClobJpaEmbeddable","into","a","Clob"],"prompt_tokens":[]}
{"code_tokens":["public","static","<F","extends","Facet>","void","purgeIf","(","final","Class<F>","facetType,\n","final","Predicate<?","super","F>","filter,\n","final","FacetHolder","facetHolder",")","{","\n\n","facetHolder",".","getFacetRanking","(","facetType",")",".","ifPresent","(","ranking->ranking",".","purgeIf","(","facetType,","filter",")",")",";"],"docstring_tokens":["Removes","any","facet","of","facet-type","from","facetHolder","if","it","passes","the","given","filter"],"prompt_tokens":[]}
{"code_tokens":["private","void","setProviderAndCurrAndPending","(","final","Select2","select2",")","{","\n\n","final","ChoiceProvider<ObjectMemento>","choiceProvider","=","buildChoiceProvider","(",")",";","\n\n","select2",".","setProvider","(","choiceProvider",")",";","getModel","(",")",".","clearPending","(",")",";","\n\n","val","dependsOnPreviousArgs","=","(","choiceProvider","instanceof","ObjectAdapterMementoProviderAbstract",")","&&","(","(","ObjectAdapterMementoProviderAbstract",")","choiceProvider",")",".","dependsOnPreviousArgs","(",")",";","\n\n","if","(","dependsOnPreviousArgs",")","{","syncIfNull","(","select2",")",";","}","\n\n"],"docstring_tokens":["sets","up","the","choices,","also","ensuring","that","any","currently","held","value","is","compatible"],"prompt_tokens":[]}
{"code_tokens":["public","static","String","prefix","(","final","@Nullable","String","input,","final","@NonNull","String","prefix",")","{","if","(","input==null",")","{","return","null",";","}","if","(","input",".","startsWith","(","prefix",")",")","{","return","input",";","}","return","prefix","+","input",";"],"docstring_tokens":["If","input","does","not","start","with","prefix","prepends","prefix","to","the","input"],"prompt_tokens":[]}
{"code_tokens":["public","static","String","suffix","(","final","@Nullable","String","input,","final","@NonNull","String","suffix",")","{","if","(","input==null",")","{","return","null",";","}","if","(","input",".","endsWith","(","suffix",")",")","{","return","input",";","}","return","input","+","suffix",";"],"docstring_tokens":["If","input","does","not","end","with","suffix","appends","suffix","to","the","input"],"prompt_tokens":[]}
{"code_tokens":["public","static","final","byte[]","toBytes","(","final","@Nullable","String","str,","final","@NonNull","Charset","charset",")","{","return","mapIfPresentElse","(","str,","__->str",".","getBytes","(","charset",")",",","null",")",";"],"docstring_tokens":["Encodes","str","into","a","sequence","of","bytes","using","the","given","charset"],"prompt_tokens":[]}
{"code_tokens":["public","static","final","String","ofBytes","(","final","@Nullable","byte[]","bytes,","final","@NonNull","Charset","charset",")","{","return","mapIfPresentElse","(","bytes,","__->new","String","(","bytes,","charset",")",",","null",")",";"],"docstring_tokens":["Constructs","a","new","String","by","decoding","the","specified","array","of","bytes","using","the","specified","charset"],"prompt_tokens":[]}
{"code_tokens":["public","Persistable","newInstance","(","Class","pcClass,","StateManager","sm",")","{","Persistable","pc","=","getPersistableForClass","(","pcClass",")",";","return","pc","==","null","?","null",":","pc",".","dnNewInstance","(","sm",")",";"],"docstring_tokens":["Create","a","new","instance","of","the","class","and","assign","its","StateManager"],"prompt_tokens":[]}
{"code_tokens":["@SuppressWarnings","(","\"deprecation\"",")","private","static","Persistable","getPersistableForClass","(","Class","pcClass",")","{","Meta","ret","=","registeredClasses",".","get","(","pcClass",")",";","if","(","ret","==","null",")","{","//","Commented","out","code","that","we","could","enable,","particularly","if","we","update","registerClass","to","not","pass","an","instance\n","if","(","Persistable",".","class",".","isAssignableFrom","(","pcClass",")",")","{","System",".","err",".","println","(","String",".","format","(","\"MONKEY","PATCH","INTERCEPTING","%s\",","pcClass",")",")",";","//","Not","yet","registered","but","this","is","Persistable,","so","create","an","instance\n","Persistable","pc",";","try\n","{","pc","=","(","Persistable",")","pcClass",".","newInstance","(",")",";","registeredClasses",".","put","(","pcClass,","new","Meta","(","pc",")",")",";","return","pc",";","}","catch","(","InstantiationException","|","IllegalAccessException","e",")","{","System",".","err",".","println","(","e",".","getMessage","(",")",")",";","}","}","throw","new","NucleusUserException","(","\"Cannot","lookup","meta","info","for","\"","+","pcClass","+","\"","-","nothing","found\"",")",".","setFatal","(",")",";","}","return","ret",".","getPC","(",")",";"],"docstring_tokens":["Look","up","the","instance","for","a","Persistable","class"],"prompt_tokens":[]}
{"code_tokens":["public","ReasonBuffer2","append","(","final","String","reason",")","{","append","(","true,","reason",")",";","return","this",";"],"docstring_tokens":["Append","a","reason","to","the","list","of","existing","reasons"],"prompt_tokens":[]}
{"code_tokens":["public","ReasonBuffer2","append","(","final","boolean","condition,","final","String","reason",")","{","lazyReasons",".","add","(","ConditionAndReason",".","create","(","(",")","->","condition,","reason",")",")",";","return","this",";"],"docstring_tokens":["Append","a","reason","to","the","list","of","existing","reasons","if","the","condition","flag","is","true"],"prompt_tokens":[]}
{"code_tokens":["public","ReasonBuffer2","plus","(","final","ReasonBuffer2","other",")","{","this",".","lazyReasons",".","addAll","(","other",".","lazyReasons",")",";","return","this",";"],"docstring_tokens":["Combines","sets","of","reasons","from","another"],"prompt_tokens":[]}
{"code_tokens":["public","static","<S>","S","load","(","final","Class<S>","pluginInterfaceClass,\n","final","File","classPath,\n","final","String","pluginFullyQualifiedClassName",")","{","\n\n","try","{","\n\n","ClassLoader","parentCL","=","pluginInterfaceClass",".","getClassLoader","(",")",";","URL[]","urls","=","{","classPath",".","toURI","(",")",".","toURL","(",")","}",";","\n\n","try","(","URLClassLoader","cl","=","URLClassLoader",".","newInstance","(","urls,","parentCL",")",")","{","Class<S>","pluginClass","=","_Casts",".","uncheckedCast","(","cl",".","loadClass","(","pluginFullyQualifiedClassName",")",")",";","S","plugin","=","pluginClass",".","getDeclaredConstructor","(",")",".","newInstance","(",")",";","\n\n","_Context",".","putSingleton","(","pluginInterfaceClass,","plugin",")",";","\n\n","return","plugin",";","}","\n\n","}","catch","(","Exception","e",")","{","throw","new","_PluginResolveException","(","String",".","format","(","\"Failed","to","load","plugin","'%s'","implementing","'%s'","from","path","'%s'",".","\",\n","pluginFullyQualifiedClassName,\n","pluginInterfaceClass",".","getName","(",")",",\n","classPath",".","getAbsolutePath","(",")",")",",","e",")",";","}","\n\n"],"docstring_tokens":["Loads","a","plugin","by","name","and","class-path"],"prompt_tokens":[]}
{"code_tokens":["@Bean","(","\"isis",".","testing",".","fixtures",".","FixtureScriptsSpecificationProviderDefault\"",")","@ConditionalOnMissingBean","(","FixtureScriptsSpecificationProvider",".","class",")","@Qualifier","(","\"Default\"",")","FixtureScriptsSpecificationProvider","fixtureScriptsSpecificationProvider","(","final","IsisConfiguration","isisConfiguration",")","{","\n\n","val","fixturesConfig","=","isisConfiguration",".","getTesting","(",")",".","getFixtures","(",")",".","getFixtureScriptsSpecification","(",")",";","val","builder","=","builderFrom","(","fixturesConfig",")",";","\n\n","builder",".","with","(","FixtureScripts",".","NonPersistedObjectsStrategy",".","valueOf","(","fixturesConfig",".","getNonPersistedObjectsStrategy","(",")",".","name","(",")",")",")",";","builder",".","with","(","FixtureScripts",".","MultipleExecutionStrategy",".","valueOf","(","fixturesConfig",".","getMultipleExecutionStrategy","(",")",".","name","(",")",")",")",";","builder",".","withRecreate","(","(","Class",")","fixturesConfig",".","getRecreate","(",")",")",";","builder",".","withRunScriptDefault","(","(","Class",")","fixturesConfig",".","getRunScriptDefault","(",")",")",";","\n\n","return","builder::build",";"],"docstring_tokens":["Returns","an","implementation","of","FixtureScriptsSpecificationProvider","that","uses","configuration","properties","under","isis.testing.fixtures.fixture-scripts-specification"],"prompt_tokens":[]}
{"code_tokens":["public","static","int","determineMinLength","(","final","Method","method",")","{","if","(","method","==","null\n","||","method",".","getParameterCount","(",")","==0",")","{","return","MIN_LENGTH_DEFAULT",";","}","\n\n","val","lastParam","=","method",".","getParameters","(",")","[method",".","getParameterCount","(",")","-1]",";","\n\n","for","(","Annotation","annotation:","lastParam",".","getAnnotations","(",")",")","{","if","(","annotation","instanceof","MinLength",")","{","return","(","(","MinLength",")","annotation",")",".","value","(",")",";","}","}","\n\n","return","MinLengthUtil",".","MIN_LENGTH_DEFAULT",";"],"docstring_tokens":["Finds","the","value","of","the","minimum","length,","from","the","MinLength","annotation","on","the","last","parameter","of","the","supplied","method"],"prompt_tokens":[]}
{"code_tokens":["public","<T","extends","Component>","T","attributeReplace","(","final","@Nullable","T","component,\n","final","@Nullable","String","attributeName,\n","final","@Nullable","String","attributeValue",")","{","if","(","component==null\n","||","_Strings",".","isEmpty","(","attributeName",")",")","{","return","component",";","}","if","(","_Strings",".","isEmpty","(","attributeValue",")",")","{","component",".","add","(","AttributeModifier",".","remove","(","attributeName",")",")",";","return","component",";","}","component",".","add","(","AttributeModifier",".","replace","(","attributeName,","attributeValue",")",")",";","return","component",";"],"docstring_tokens":["If","any","of","component","or","attributeName","is","null","or","empty,","does","nothing"],"prompt_tokens":[]}
{"code_tokens":["public","ComponentTag","cssAppend","(","final","ComponentTag","tag,","final","@Nullable","String","cssClass",")","{","if","(","_Strings",".","isNotEmpty","(","cssClass",")",")","{","tag",".","append","(","\"class\",","cssClass,","\"","\"",")",";","}","return","tag",";"],"docstring_tokens":["If","cssClass","is","empty,","does","nothing"],"prompt_tokens":[]}
{"code_tokens":["@Override\n","public","void","init","(","final","FilterConfig","pConfig",")","{","final","ArrayList<String[]>","newReplyHeaders","=","new","ArrayList<String[]>","(",")",";","final","String","cacheTime","=","pConfig",".","getInitParameter","(","CACHE_TIME_PARAM_NAME",")",";","this",".","cacheTime","=","Long",".","parseLong","(","cacheTime","!=","null","?","cacheTime",":","CACHE_TIME_PARAM_NAME_DEFAULT",")",";","if","(","this",".","cacheTime",">","0L",")","{","newReplyHeaders",".","add","(","new","String[]","{","CACHE_CONTROL_HEADER,","MAX_AGE_VALUE","+","this",".","cacheTime","}",")",";","newReplyHeaders",".","add","(","new","String[]","{","CACHE_CONTROL_HEADER,","PRE_CHECK_VALUE","+","this",".","cacheTime","}",")",";","newReplyHeaders",".","add","(","new","String[]","{","CACHE_CONTROL_HEADER,","POST_CHECK_VALUE","+","this",".","cacheTime","}",")",";","}","else","{","newReplyHeaders",".","add","(","new","String[]","{","PRAGMA_HEADER,","NO_CACHE_VALUE","}",")",";","newReplyHeaders",".","add","(","new","String[]","{","EXPIRES_HEADER,","ZERO_STRING_VALUE","}",")",";","newReplyHeaders",".","add","(","new","String[]","{","CACHE_CONTROL_HEADER,","NO_CACHE_VALUE","}",")",";","newReplyHeaders",".","add","(","new","String[]","{","CACHE_CONTROL_HEADER,","NO_STORE_VALUE","}",")",";","}","this",".","mReplyHeaders","=","new","String[newReplyHeaders",".","size","(",")","][2]",";","newReplyHeaders",".","toArray","(","this",".","mReplyHeaders",")",";"],"docstring_tokens":["Initializes","the","Servlet","filter","with","the","cache","time","and","sets","up","the","unchanging","headers"],"prompt_tokens":[]}
{"code_tokens":["@Override\n","public","final","ValueType","getSchemaValueType","(",")","{","return","getDelegate","(",")",".","getSchemaValueType","(",")",";"],"docstring_tokens":["By","design,","adapters","always","share","their","SchemaValueType","with","their","delegate"],"prompt_tokens":[]}
{"code_tokens":["public","static","ObjectIcon","eager","(","final","String","shortName,\n","final","URL","url,\n","final","CommonMimeType","mimeType",")","{","val","id","=","_Strings",".","base64UrlEncode","(","url",".","getPath","(",")",")",";","val","objectIcon","=","new","ObjectIcon","(","shortName,","url,","mimeType,","id",")",";","objectIcon",".","asBytes","(",")",";","//","memoize\n","return","objectIcon",";"],"docstring_tokens":["Create","an","ObjectIcon","and","eagerly","read","in","image","data","from","class-path","resources"],"prompt_tokens":[]}
{"code_tokens":["public","static","ObjectIcon","lazy","(","final","String","shortName,\n","final","URL","url,\n","final","CommonMimeType","mimeType",")","{","val","id","=","_Strings",".","base64UrlEncode","(","url",".","getPath","(",")",")",";","return","new","ObjectIcon","(","shortName,","url,","mimeType,","id",")",";"],"docstring_tokens":["Create","an","ObjectIcon","and","not","yet","read","in","image","data","from","class-path","resources"],"prompt_tokens":[]}
{"code_tokens":["\n	public","String","getPersistentClassName","(",")","{","\n		if","(","this",".","persistentClass","instanceof","Class",")","{","\n			return","(","(","Class<?>",")","this",".","persistentClass",")",".","getName","(",")",";","\n		","}","\n		return","(","this",".","persistentClass","!=","null","?","this",".","persistentClass",".","toString","(",")",":","null",")",";","\n	"],"docstring_tokens":["Return","the","name","of","the","persistent","class","of","the","object","that","was","not","found.	","Will","work","for","both","Class","objects","and","String","names"],"prompt_tokens":[]}
{"code_tokens":["@Override\n","public","String","hiddenReason","(","final","ManagedObject","target,","Where","where",")","{","return","\"Always","hidden\"",";"],"docstring_tokens":["Always","returns","Always","hidden"],"prompt_tokens":[]}
{"code_tokens":["Element","createXsElement","(","final","Document","xsdDoc,","final","String","localName",")","{","\n\n","final","Element","element","=","xsdDoc",".","createElementNS","(","XsMetaModel",".","W3_ORG_XS_URI,","XsMetaModel",".","W3_ORG_XS_PREFIX","+","\":\"","+","localName",")",";","//","xmlns:xs=\"",".",".",".","\"","added","to","root\n","helper",".","rootElementFor","(","element",")",".","setAttributeNS","(","XsMetaModel",".","W3_ORG_XMLNS_URI,","XsMetaModel",".","W3_ORG_XMLNS_PREFIX","+","\":\"","+","XsMetaModel",".","W3_ORG_XS_PREFIX,","XsMetaModel",".","W3_ORG_XS_URI",")",";","return","element",";"],"docstring_tokens":["Creates","an","element","in","the","XS","namespace,","adding","the","definition","of","the","namespace","to","the","root","element","of","the","document","if","required,"],"prompt_tokens":[]}
{"code_tokens":["\n	public","static","void","doReleasePersistenceManager","(","PersistenceManager","pm,","PersistenceManagerFactory","pmf",")","\n			throws","JDOException","{","\n\n		if","(","pm","==","null",")","{","\n			return",";","\n		","}","\n		//","Only","release","non-transactional","PersistenceManagers",".","\n		if","(","!isPersistenceManagerTransactional","(","pm,","pmf",")",")","{","\n			logger",".","debug","(","\"Closing","JDO","PersistenceManager\"",")",";","\n			pm",".","close","(",")",";","\n		","}","\n	"],"docstring_tokens":["Actually","release","a","PersistenceManager","for","the","given","factory.	","Same","as","releasePersistenceManager,","but","throwing","the","original","JDOException"],"prompt_tokens":[]}
{"code_tokens":["public","<T,","E>","Collection<E>","proxy","(","final","Collection<E>","collectionToProxy,\n","final","DomainObjectInvocationHandler<T>","handler,\n","final","OneToManyAssociation","otma",")","{","\n\n","val","collectionInvocationHandler","=","new","CollectionInvocationHandler<T,","Collection<E>>","(","collectionToProxy,","handler,","otma",")",";","collectionInvocationHandler",".","setResolveObjectChangedEnabled","(","handler",".","isResolveObjectChangedEnabled","(",")",")",";","\n\n","return","proxyCreator",".","instantiateProxy","(","collectionInvocationHandler",")",";"],"docstring_tokens":["Whether","to","execute","or","not","will","be","picked","up","from","the","supplied","parent","handler"],"prompt_tokens":[]}
{"code_tokens":["\n	public","String","getPersistentClassName","(",")","{","\n		if","(","this",".","persistentClass","instanceof","Class",")","{","\n			return","(","(","Class<?>",")","this",".","persistentClass",")",".","getName","(",")",";","\n		","}","\n		return","(","this",".","persistentClass","!=","null","?","this",".","persistentClass",".","toString","(",")",":","null",")",";","\n	"],"docstring_tokens":["Return","the","name","of","the","persistent","class","of","the","object","for","which","the","locking","failed.	","Will","work","for","both","Class","objects","and","String","names"],"prompt_tokens":[]}
{"code_tokens":["@Override\n","public","final","ManagedObject","getObject","(",")","{","if","(","isCurrentValueAbsent","(",")",")","{","return","ManagedObject",".","empty","(","proposedValue","(",")",".","getElementType","(",")",")",";","}","return","proposedValue","(",")",".","getValue","(",")",".","getValue","(",")",";"],"docstring_tokens":["Gets","the","proposed","value","as","ManagedObject"],"prompt_tokens":[]}
{"code_tokens":["public","static","String","requiresNotEmpty","(","final","@Nullable","String","obj,","final","String","paramName",")","{","if","(","obj","==","null",")","{","throw","new","NullPointerException","(","String",".","format","(","\"Parameter/Field","'%s'","is","required","to","be","present","(","not","null",")",".","\",","paramName",")",")",";","}","if","(","obj",".","length","(",")","==0",")","{","throw","new","IllegalArgumentException","(","String",".","format","(","\"Parameter/Field","'%s'","is","required","to","be","present","and","not","empty",".","\",","paramName",")",")",";","}","return","obj",";"],"docstring_tokens":["Allows","for","convenient","named","parameter","non-empty-check"],"prompt_tokens":[]}
{"code_tokens":["public","static","<T>","T","getFrom","(","Page","page,","final","Class<T>","cls",")","{","final","Object[]","pComponent","=","new","Object[1]",";","page",".","visitChildren","(","new","DeepChildFirstVisitor","(",")","{","@Override\n","public","void","component","(","Component","component,","IVisit<Void>","visit",")","{","if","(","cls",".","isAssignableFrom","(","component",".","getClass","(",")",")",")","{","pComponent[0]","=","component",";","visit",".","stop","(",")",";","}","}","@Override\n","public","boolean","preCheck","(","Component","component",")","{","return","false",";","}","}",")",";","\n\n","return","_Casts",".","uncheckedCast","(","pComponent[0]",")",";"],"docstring_tokens":["Locates","a","component","implementing","the","required","class","on","the","supplied","page"],"prompt_tokens":[]}
{"code_tokens":["public","String","getUri","(",")","{","if","(","uri","==","null",")","{","throw","new","IllegalStateException","(","\"URI","has","not","been","specified",".","\"",")",";","}","return","uri",";"],"docstring_tokens":["The","URI","of","the","application","namespace"],"prompt_tokens":[]}
{"code_tokens":["private","Element","addExtensionsElement","(","final","Element","parentXsElement",")","{","final","Element","xsExtensionsElementElement","=","xsMeta",".","createXsElementElement","(","helper",".","docFor","(","parentXsElement",")",",","\"isis-extensions\"",")",";","parentXsElement",".","appendChild","(","xsExtensionsElementElement",")",";","\n\n","//","xs:element/xs:complexType/xs:sequence/xs:element/xs:complexType/xs:sequence\n","final","Element","xsExtensionsComplexTypeElement","=","xsMeta",".","complexTypeFor","(","xsExtensionsElementElement",")",";","final","Element","xsExtensionsSequenceElement","=","xsMeta",".","sequenceFor","(","xsExtensionsComplexTypeElement",")",";","\n\n","return","xsExtensionsSequenceElement",";"],"docstring_tokens":["Adds","an","isis-extensions","element","and","a","complexType","and","sequence","elements","underneath"],"prompt_tokens":[]}
{"code_tokens":["void","configureSecurity","(","final","IsisConfiguration","configuration",")","{","getSecuritySettings","(",")",".","setAuthenticationStrategy","(","newAuthenticationStrategy","(","configuration",")",")",";"],"docstring_tokens":["protected","visibility","to","allow","ad-hoc","overriding","of","some","other","authentication","strategy"],"prompt_tokens":[]}
{"code_tokens":["@Override\n","protected","IConverterLocator","newConverterLocator","(",")","{","final","ConverterLocator","converterLocator","=","new","ConverterLocator","(",")",";","converterLocator",".","set","(","ManagedObject",".","class,","new","ConverterForObjectAdapter","(",")",")",";","converterLocator",".","set","(","ObjectMemento",".","class,","new","ConverterForObjectAdapterMemento","(","commonContext",")",")",";","return","converterLocator",";"],"docstring_tokens":["Installs","a","ConverterLocator","preconfigured","with","a","number","of","implementations","to","support","Isis","specific","objects"],"prompt_tokens":[]}
{"code_tokens":["public","boolean","isIntegralNumber","(","final","String","path",")","{","return","isIntegralNumber","(","getNode","(","path",")",")",";"],"docstring_tokens":["Is","a","long,","an","int","or","a","BigInteger"],"prompt_tokens":[]}
{"code_tokens":["public","LinkRepresentation","mapValueAsLink","(",")","{","if","(","asJsonNode","(",")",".","size","(",")","!=","1",")","{","throw","new","IllegalStateException","(","\"does","not","represent","link\"",")",";","}","final","String","linkPropertyName","=","asJsonNode","(",")",".","fieldNames","(",")",".","next","(",")",";","return","getLink","(","linkPropertyName",")",";"],"docstring_tokens":["Convert","a","representation","that","contains","a","single","node","representing","a","link","into","a","LinkRepresentation"],"prompt_tokens":[]}
{"code_tokens":["protected","ArrayNode","asArrayNode","(",")","{","if","(","!isArray","(",")",")","{","throw","new","IllegalStateException","(","\"does","not","represent","array\"",")",";","}","return","(","ArrayNode",")","asJsonNode","(",")",";"],"docstring_tokens":["Convert","underlying","representation","into","an","array"],"prompt_tokens":[]}
{"code_tokens":["private","ManagedObject","reassessPropertyValue","(",")","{","val","property","=","getProperty","(",")",";","val","owner","=","getOwner","(",")",";","\n\n","return","property",".","isVisible","(","owner,","InteractionInitiatedBy",".","FRAMEWORK,","getWhere","(",")",")",".","isAllowed","(",")","&&","property",".","isVisible","(","owner,","InteractionInitiatedBy",".","USER,","getWhere","(",")",")",".","isAllowed","(",")","?","property",".","get","(","owner,","InteractionInitiatedBy",".","USER",")",":","ManagedObject",".","empty","(","property",".","getElementType","(",")",")",";"],"docstring_tokens":["If","visibility","is","vetoed,","returns","an","empty","but","specified","ManagedObject"],"prompt_tokens":[]}
{"code_tokens":["@Override\n","public","String","getUsername","(",")","{","//",".",".",".","return","commandDto","!=","null\n","?","commandDto",".","getUser","(",")",":","null",";"],"docstring_tokens":["The","user","that","created","the","command"],"prompt_tokens":[]}
{"code_tokens":["public","List<FacetedMethod>","getActionFacetedMethods","(",")","{","if","(","actionFacetedMethods","==","null",")","{","actionFacetedMethods","=","findActionFacetedMethods","(",")",";","}","return","actionFacetedMethods",";"],"docstring_tokens":["Returns","a","List","of","FacetedMethods","representing","object","actions,","lazily","creating","them","first","if","required"],"prompt_tokens":[]}
{"code_tokens":["public","static","UserMemento","ofName","(","final","@NonNull","String","name",")","{","\n\n","return","builderWithDefaults","(","name",")",".","roles","(","Can",".","empty","(",")",")",".","build","(",")",";"],"docstring_tokens":["Creates","a","new","user","with","the","specified","name","and","no","roles"],"prompt_tokens":[]}
{"code_tokens":["public","static","UserMemento","ofNameAndRoles","(","final","@NonNull","String","name,\n","final","RoleMemento",".",".",".","roles",")","{","\n\n","return","builderWithDefaults","(","name",")",".","roles","(","Can",".","ofArray","(","roles",")",")",".","build","(",")",";"],"docstring_tokens":["Creates","a","new","user","with","the","specified","name","and","assigned","roles"],"prompt_tokens":[]}
{"code_tokens":["public","static","UserMemento","ofNameAndRoleNames","(","final","@NonNull","String","name,\n","final","String",".",".",".","roleNames",")","{","return","ofNameAndRoleNames","(","name,","Stream",".","of","(","roleNames",")",")",";"],"docstring_tokens":["Creates","a","new","user","with","the","specified","name","and","assigned","role","names"],"prompt_tokens":[]}
{"code_tokens":["@Collection\n","@CollectionLayout","(","sequence","=","\"1\"",")","public","List<RoleMemento>","getRoles","(",")","{","return","roles",".","toList","(",")",";"],"docstring_tokens":["The","roles","associated","with","this","user"],"prompt_tokens":[]}
{"code_tokens":["@Programmatic\n","public","boolean","isSystem","(",")","{","return","Objects",".","equals","(","SYSTEM_USER,","this",")",";"],"docstring_tokens":["Whether","this","UserMemento","represent","the","system","user"],"prompt_tokens":[]}
{"code_tokens":["public","void","interactionOpen","(","final","String","format,","final","Object",".",".",".","args",")","{","record","(","1,","_IconResource",".","INTERACTION_OPEN,","format,","args",")",";"],"docstring_tokens":["Interaction","open","event","entry"],"prompt_tokens":[]}
{"code_tokens":["public","void","interactionClose","(","final","String","format,","final","Object",".",".",".","args",")","{","record","(","1,","_IconResource",".","INTERACTION_CLOSE,","format,","args",")",";"],"docstring_tokens":["Interaction","close","event","entry"],"prompt_tokens":[]}
{"code_tokens":["public","void","transaction","(","final","String","format,","final","Object",".",".",".","args",")","{","record","(","1,","_IconResource",".","TRANSACTION,","format,","args",")",";"],"docstring_tokens":["General","purpose","transaction","event","entry"],"prompt_tokens":[]}
{"code_tokens":["void","record","(","final","int","depthLimit,","final","_IconResource","icon,","final","String","format,","final","Object",".",".",".","args",")","{","val","stackTrace","=","_Exceptions",".","streamStackTrace","(",")",".","skip","(","3",")",".","filter","(","_XrayEvent::accept",")",".","collect","(","Can",".","toCan","(",")",")",";","//",".","reverse","(",")",";","\n\n","val","logMessage","=","String",".","format","(","format,","args",")",";","\n\n","_Xray",".","recordDebugLogEvent","(","icon,","logMessage,","stackTrace",")",";","\n\n","val","context","=","String",".","format","(","\"%s||","%s\",\n","Thread",".","currentThread","(",")",".","getName","(",")",",\n","stackTrace",".","stream","(",")",".","limit","(","depthLimit",")",".","map","(","_XrayEvent::stringify",")",".","collect","(","Collectors",".","joining","(","\"","<-","\"",")",")",")",";","\n\n","System",".","err",".","println","(","context",")",";","System",".","err",".","println","(","\"|","\"","+","logMessage",")",";"],"docstring_tokens":["General","purpose","event","log","entry"],"prompt_tokens":[]}
{"code_tokens":["public","static","void","depthFirst","(","StructuralNodeVisitor","visitor,","StructuralNode","root",")","{","traverse","(","visitor,","root,","0,","_Refs",".","booleanRef","(","true",")",")",";"],"docstring_tokens":["Start","a","depth-first","traverse","of","the","root","and","all","of","its","descendants"],"prompt_tokens":[]}
{"code_tokens":["protected","final","List<FixtureResult>","run","(","final","String","parameters,\n","final","FixtureScripts","fixtureScripts",")","{","try","{","executionContext","=","fixtureScripts",".","newExecutionContext","(","parameters",")",";","executionContext",".","executeChildIfNotAlready","(","this",")",";","return","executionContext",".","getResults","(",")",";","}","catch","(","Exception","ex",")","{","log",".","error","(","this",".","getQualifiedName","(",")",",","ex",")",";","throw","ex",";","}"],"docstring_tokens":["Entry","point","for","FixtureScripts","service","to","call"],"prompt_tokens":[]}
{"code_tokens":["public","static","Stream<Field>","streamAllFields","(","final","@Nullable","Class<?>","type,\n","final","boolean","ignoreAccess",")","{","\n\n","return","streamTypeHierarchy","(","type,","InterfacePolicy",".","EXCLUDE",")","//","interfaces","don't","have","fields\n",".","filter","(","t->!Object",".","class",".","equals","(","t",")",")","//","do","not","process","Object","class",".",".","flatMap","(","t->streamFields","(","t,","ignoreAccess",")",")",";"],"docstring_tokens":["Stream","all","fields","of","given","type,","up","the","super","class","hierarchy"],"prompt_tokens":[]}
{"code_tokens":["public","static","Stream<Method>","streamAllMethods","(","final","@Nullable","Class<?>","type,\n","final","boolean","ignoreAccess",")","{","\n\n","return","streamTypeHierarchy","(","type,","InterfacePolicy",".","INCLUDE",")",".","filter","(","t->!t",".","equals","(","Object",".","class",")",")","//","do","not","process","Object","class",".",".","flatMap","(","t->streamMethods","(","t,","ignoreAccess",")",")",";"],"docstring_tokens":["Stream","all","methods","of","given","type,","up","the","super","class","hierarchy"],"prompt_tokens":[]}
{"code_tokens":["@Programmatic\n","public","ApplicationFeatureViewModel","getParentNamespace","(",")","{","return","ApplicationFeatureViewModel\n",".","newViewModel","(","getFeatureId","(",")",".","getParentNamespaceFeatureId","(",")",",","featureRepository,","factory",")",";"],"docstring_tokens":["The","parent","package","feature","of","this","class","or","package"],"prompt_tokens":[]}
{"code_tokens":["@Override\n","public","String","invalidates","(","final","ValidityContext","context",")","{","return","null",";"],"docstring_tokens":["No","limit","to","maximum","length"],"prompt_tokens":[]}
{"code_tokens":["@Override\n","public","void","process","(","final","ProcessMethodContext","processMethodContext",")","{","//","don't","overwrite","any","defaults","that","might","already","picked","up\n","final","PropertyDefaultFacet","existingDefaultFacet","=","processMethodContext",".","getFacetHolder","(",")",".","lookupNonFallbackFacet","(","PropertyDefaultFacet",".","class",")",".","orElse","(","null",")",";","if","(","existingDefaultFacet","!=","null",")","{","return",";","}","\n\n","//","try","to","infer","defaults","from","the","underlying","return","type\n","final","Class<?>","returnType","=","processMethodContext",".","getMethod","(",")",".","getReturnType","(",")",";","final","DefaultedFacet","returnTypeDefaultedFacet","=","getDefaultedFacet","(","returnType",")",";","if","(","returnTypeDefaultedFacet","!=","null",")","{","FacetUtil",".","addFacet","(","new","PropertyDefaultFacetFromDefaultedFacet","(","returnTypeDefaultedFacet,","processMethodContext",".","getFacetHolder","(",")",")",")",";","}"],"docstring_tokens":["If","there","is","a","DefaultedFacet","on","the","properties","return","type,","then","installs","a","PropertyDefaultFacet","for","the","property","with","the","same","default"],"prompt_tokens":[]}
{"code_tokens":["@Override\n","public","void","clearArguments","(",")","{","delegate",".","resetParametersToDefault","(",")",";"],"docstring_tokens":["Resets","arguments","to","their","fixed","point","default","values"],"prompt_tokens":[]}
{"code_tokens":["@Override\n","public","Document","apply","(","final","J2AdocUnit","unit,","final","File","file",")","{","\n\n","val","doc","=","AsciiDocFactory",".","doc","(",")",";","\n\n","//","--","title\n","if","(","!j2aContext",".","isSkipTitleHeader","(",")",")","{","title","(","unit",")",".","ifPresent","(","doc::setTitle",")",";","}","\n\n","//","--","license\n\n","_Strings",".","nonEmpty","(","j2aContext",".","getLicenseHeader","(",")",")",".","ifPresent","(","notice->AsciiDocFactory",".","attrNotice","(","doc,","notice",")",")",";","\n\n\n","//","--","intro\n\n","intro","(","unit,","doc",")",";","\n\n","//","==","API\n","val","titleBlock","=","block","(","doc",")",";","titleBlock",".","setSource","(","\"==","API\"",")",";","\n\n","//","--","java","source\n\n","javaSource","(","unit",")",".","ifPresent","(","block","(","doc",")","::setSource",")",";","\n\n","//","--","member","descriptions\n\n","memberDescriptions","(","unit,","doc",")",";","\n\n\n","//","--","inclusions\n\n","inclusions","(","unit,","file",")",".","stream","(",")",".","map","(","inclusion","->","String",".","format","(","\"include::%s[]\",","inclusion",")",")",".","forEach","(","inclusion","->","{","final","Block","block","=","block","(","doc",")",";","block",".","setSource","(","inclusion",")",";","}",")",";","\n\n","return","doc",";"],"docstring_tokens":["Main","algorithm","for","laying","out","a","unit"],"prompt_tokens":[]}
{"code_tokens":["public","<F","extends","Facet>","Can<F>","getRankLowerOrEqualTo","(","final","@NonNull","Class<F>","facetType,\n","final","@NonNull","Precedence","precedenceUpper",")","{","_Assert",".","assertEquals","(","this",".","facetType,","facetType",")",";","\n\n","val","precedenceSelected","=","getHighestPrecedenceLowerOrEqualTo","(","precedenceUpper",")",";","\n\n","return","precedenceSelected\n",".","map","(","facetsByPrecedence::get",")",".","map","(","facetsOfSameRank->Can",".","<F>ofCollection","(","_Casts",".","uncheckedCast","(","facetsOfSameRank",")",")",")",".","orElseGet","(","Can::empty",")",";"],"docstring_tokens":["Returns","a","defensive","copy","of","the","selected","rank","of","given","precedence","constraint"],"prompt_tokens":[]}
{"code_tokens":["public","Optional<Precedence>","getHighestPrecedenceLowerOrEqualTo","(","final","@NonNull","Precedence","precedenceUpper",")","{","return","facetsByPrecedence\n",".","keySet","(",")",".","stream","(",")",".","filter","(","precedence->precedence",".","ordinal","(",")","<=precedenceUpper",".","ordinal","(",")",")",".","max","(","Comparator",".","comparing","(","Precedence::ordinal",")",")",";"],"docstring_tokens":["Returns","highest","found","precedence","within","ranks","that","conforms","to","given","precedence","constraint"],"prompt_tokens":[]}
{"code_tokens":["public","<F","extends","Facet>","void","purgeIf","(","final","@NonNull","Class<F>","facetType,\n","final","@NonNull","Predicate<?","super","F>","filter",")","{","\n\n","//","reassess","the","top","precedence\n","final","_Reduction<Facet",".","Precedence>","top","=","_Reduction",".","of","(","null,","(","a,","b",")","->a==null?b:a",".","ordinal","(",")",">b",".","ordinal","(",")","?a:b",")",";","val","markedForRemoval","=","_Lists",".","newArrayList","(","facetsByPrecedence",".","size","(",")",")",";","\n\n","facetsByPrecedence",".","forEach","(","(","precedence,","facets",")","->","{","facets",".","removeIf","(","_Casts",".","uncheckedCast","(","filter",")",")",";","if","(","!facets",".","isEmpty","(",")",")","{","top",".","accept","(","precedence",")",";","}","else","{","markedForRemoval",".","add","(","precedence",")",";","}","}",")",";","\n\n","topPrecedenceRef",".","set","(","top",".","getResult","(",")",".","orElse","(","null",")",")",";","\n\n","//","remove","keys","that","associate","empty","lists,","so","finding","highest","used","precedence","by","key","is","simple\n","markedForRemoval",".","forEach","(","facetsByPrecedence::remove",")",";"],"docstring_tokens":["Removes","any","facet","of","facetType","from","facetHolder","if","it","passes","the","given","filter"],"prompt_tokens":[]}
{"code_tokens":["public","static","TranslatableString","tr","(","final","String","pattern,\n","final","Object",".",".",".","paramArgs",")","{","\n\n","if","(","pattern","==","null",")","{","return","null",";","}","return","new","TranslatableString","(","Type",".","TR,","pattern,","null,","1,","asMap","(","paramArgs",")",")",";","\n\n","//",".",".","."],"docstring_tokens":["A","translatable","string","with","a","single","pattern","for","both","singular","and","plural","forms"],"prompt_tokens":[]}
{"code_tokens":["public","static","final","IllegalArgumentException","unmatchedCase","(","final","@Nullable","Object","_case",")","{","return","new","IllegalArgumentException","(","\"internal","error:","unmatched","case","in","switch","statement:","\"+_case",")",";"],"docstring_tokens":["Most","likely","to","be","used","in","switch","statements","to","handle","the","default","case"],"prompt_tokens":[]}
{"code_tokens":["\n	protected","String","getJdoIsolationLevel","(","TransactionDefinition","definition",")","{","\n		switch","(","definition",".","getIsolationLevel","(",")",")","{","\n			case","TransactionDefinition",".","ISOLATION_SERIALIZABLE:\n				return","Constants",".","TX_SERIALIZABLE",";","\n			case","TransactionDefinition",".","ISOLATION_REPEATABLE_READ:\n				return","Constants",".","TX_REPEATABLE_READ",";","\n			case","TransactionDefinition",".","ISOLATION_READ_COMMITTED:\n				return","Constants",".","TX_READ_COMMITTED",";","\n			case","TransactionDefinition",".","ISOLATION_READ_UNCOMMITTED:\n				return","Constants",".","TX_READ_UNCOMMITTED",";","\n			default:\n				return","null",";","\n		","}","\n	"],"docstring_tokens":["Determine","the","JDO","isolation","level","String","to","use","for","the","given	","Spring","transaction","definition"],"prompt_tokens":[]}
{"code_tokens":["\n	@Override\n	public","void","cleanupTransaction","(","Object","transactionData",")","{","\n	"],"docstring_tokens":["This","implementation","does","nothing,","as","the","default","beginTransaction","implementation	","does","not","require","any","cleanup"],"prompt_tokens":[]}
{"code_tokens":["public","static","<T>","Stream<T>","streamNullable","(","final","@Nullable","T","nullable",")","{","return","nullable","!=","null\n","?","Stream",".","of","(","nullable",")",":","Stream",".","empty","(",")",";"],"docstring_tokens":["If","nullable","is","null","returns","the","empty","stream,","otherwise","returns","a","Stream","containing","the","single","element","nullable"],"prompt_tokens":[]}
{"code_tokens":["public","static","<T>","Stream<T>","stream","(","final","@Nullable","Stream<T>","stream",")","{","return","stream!=null\n","?","stream\n",":","Stream",".","empty","(",")",";"],"docstring_tokens":["If","stream","is","null","returns","the","empty","stream,","otherwise","returns","the","stream","argument"],"prompt_tokens":[]}
{"code_tokens":["public","static","String","asNormalized","(","final","@NonNull","EnumConstantDeclaration","ecd",")","{","return","ecd",".","getNameAsString","(",")",".","trim","(",")",";"],"docstring_tokens":["Returns","given","EnumConstantDeclaration","as","normal","text,","without","formatting"],"prompt_tokens":[]}
{"code_tokens":["@Override\n","public","void","process","(","final","ProcessClassContext","processClassContext",")","{","val","cls","=","processClassContext",".","getCls","(",")",";","val","facetHolder","=","processClassContext",".","getFacetHolder","(",")",";","\n\n","addFacetIfPresent","(","TitleFacetViaTitleAnnotation",".","create","(","cls,","facetHolder",")",")",";"],"docstring_tokens":["If","no","method","tagged","with","Title","annotation","then","will","use","Facets","provided","by","FallbackFacetFactory","instead"],"prompt_tokens":[]}
{"code_tokens":["public","<T>","T","execute","(","final","Callable<T>","callable,\n","final","Class<?>","callingClass,\n","final","String","methodName,\n","final","Object",".",".",".","keys",")","{","if","(","isIgnoreCache","(",")",")","{","try","{","return","callable",".","call","(",")",";","}","catch","(","Exception","e",")","{","throw","new","RuntimeException","(","e",")",";","}","}","final","Key","cacheKey","=","new","Key","(","callingClass,","methodName,","keys",")",";","return","executeWithCaching","(","callable,","cacheKey",")",";"],"docstring_tokens":["Executes","the","callable","if","not","already","cached","for","the","supplied","calling","class,","method","and","keys"],"prompt_tokens":[]}
{"code_tokens":["@Override\n","public","String","disables","(","final","UsabilityContext","ic",")","{","final","ManagedObject","target","=","ic",".","getTarget","(",")",";","switch","(","ic",".","getInteractionType","(",")",")","{","case","PROPERTY_MODIFY:\n","case","COLLECTION_ADD_TO:\n","case","COLLECTION_REMOVE_FROM:\n","return","disabledReason","(","target",")",";","default:\n","return","null",";","}"],"docstring_tokens":["Immutable","facet","only","prevents","changes","to","a","property","or","a","collection"],"prompt_tokens":[]}
{"code_tokens":["public","Optional<T>","getResult","(",")","{","if","(","!initialized",")","{","return","Optional",".","empty","(",")",";","}","return","Optional",".","ofNullable","(","result",")",";"],"docstring_tokens":["Returns","the","reduction","result","if","ever","initialized,","Optional.empty","otherwise"],"prompt_tokens":[]}
{"code_tokens":["@Programmatic\n","public","FixtureScripts",".","MultipleExecutionStrategy","getMultipleExecutionStrategy","(",")","{","return","multipleExecutionStrategy",";"],"docstring_tokens":["Note","that","this","can","be","overridden","on","a","fixture-by-fixture","basis","if","the","fixture","implements","FixtureScriptWithExecutionStrategy"],"prompt_tokens":[]}
{"code_tokens":["public","CanVector<T>","set","(","int","index,","@NonNull","Can<T>","can",")","{","cans",".","set","(","index,","can",")",";","return","this",";"],"docstring_tokens":["Replaces","the","element","at","the","specified","position","in","this","CanVector","with","the","specified","element"],"prompt_tokens":[]}
{"code_tokens":["@Bean\n","public","ServletRegistrationBean<SpringServlet>","servletRegistrationBean","(",")","{","String","urlMapping","=","configurationProperties",".","getUrlMapping","(",")",";","val","initParameters","=","new","HashMap<String,","String>","(",")",";","val","isRootMapping","=","RootMappedCondition",".","isRootMapping","(","urlMapping",")",";","if","(","isRootMapping",")","{","urlMapping","=","\"/vaadinServlet/*\"",";","initParameters",".","put","(","InitParameters",".","SERVLET_PARAMETER_PUSH_URL,\n","makeContextRelative","(","urlMapping",".","replace","(","\"*\",","\"\"",")",")",")",";","}","val","registration","=","new","ServletRegistrationBean<SpringServlet>","(","new","IsisServletForVaadin","(","interactionService,","context,","isRootMapping",")",",\n","urlMapping",")",";","registration",".","setInitParameters","(","initParameters",")",";","registration",".","setAsyncSupported","(","configurationProperties",".","isAsyncSupported","(",")",")",";","registration",".","setName","(","ClassUtils",".","getShortNameAsProperty","(","SpringServlet",".","class",")",")",";","return","registration",";"],"docstring_tokens":["Creates","a","ServletRegistrationBean","instance","with","Spring","aware","Vaadin","servlet"],"prompt_tokens":[]}
{"code_tokens":["public","FixtureScript","getTeardownFixtureWillDelete","(",")","{","return","new","TeardownFixtureJdoAbstract","(",")","{","@Override\n","protected","void","execute","(","final","ExecutionContext","executionContext",")","{","deleteFrom","(","CommandModel",".","class",")",";","}","}",";"],"docstring_tokens":["For","tests","that","need","to","delete","the","command","table","first"],"prompt_tokens":[]}
{"code_tokens":["\n	public","void","setPersistenceManagerFactory","(","PersistenceManagerFactory","pmf",")","{","\n		Assert",".","notNull","(","pmf,","\"PersistenceManagerFactory","must","not","be","null\"",")",";","\n		this",".","proxy","=","pmf",".","getPersistenceManagerProxy","(",")",";","\n	"],"docstring_tokens":["Set","the","target","JDO","PersistenceManagerFactory","that","this","proxy","should	","delegate","to"],"prompt_tokens":[]}
{"code_tokens":["@SafeVarargs\n","public","static","<T>","List<T>","of","(","final","@NonNull","T",".",".",".","elements",")","{","if","(","elements",".","length==0",")","{","return","Collections",".","emptyList","(",")",";","}","return","Collections",".","unmodifiableList","(","Arrays",".","asList","(","elements",")",")",";"],"docstring_tokens":["Copies","all","elements","into","a","new","unmodifiable","List"],"prompt_tokens":[]}
{"code_tokens":["public","static","BlobJpaEmbeddable","fromBlob","(","Blob","blob",")","{","if","(","blob","==","null",")","{","return","null",";","}","val","blobJpaEmbeddable","=","new","BlobJpaEmbeddable","(",")",";","blobJpaEmbeddable",".","bytes","=","blob",".","getBytes","(",")",";","blobJpaEmbeddable",".","mimeType","=","blob",".","getMimeType","(",")",".","toString","(",")",";","blobJpaEmbeddable",".","name","=","blob",".","getName","(",")",";","return","blobJpaEmbeddable",";"],"docstring_tokens":["Factory","method","to","marshall","a","Blob","into","a","BlobJpaEmbeddable"],"prompt_tokens":[]}
{"code_tokens":["public","static","Blob","toBlob","(","final","BlobJpaEmbeddable","blobJpaEmbeddable",")","{","return","Optional",".","ofNullable","(","blobJpaEmbeddable",")",".","map","(","BlobJpaEmbeddable::asBlob",")",".","orElse","(","null",")",";"],"docstring_tokens":["Reciprocal","method","to","marshall","a","BlobJpaEmbeddable","into","a","Blob"],"prompt_tokens":[]}
{"code_tokens":["@Override\n","public","Object","getProposed","(",")","{","return","proposed",";"],"docstring_tokens":["The","object","that","is","being","added"],"prompt_tokens":[]}
{"code_tokens":["public","static","boolean","isSpecified","(","final","@Nullable","ManagedObject","adapter",")","{","return","adapter!=null","&&","adapter!=ManagedObject",".","unspecified","(",")",";"],"docstring_tokens":["whether","has","at","least","a","spec"],"prompt_tokens":[]}
{"code_tokens":["@Override\n","protected","void","onConfigure","(",")","{","//","logged","in","already?\n","if","(","isSignedIn","(",")","==","false",")","{","IAuthenticationStrategy","authenticationStrategy","=","getApplication","(",")",".","getSecuritySettings","(",")",".","getAuthenticationStrategy","(",")",";","//","get","username,","password","and","zoneID","from","persistence","store\n","String[]","data","=","authenticationStrategy",".","load","(",")",";","\n\n","if","(","(","data","!=","null",")","&&","(","data",".","length",">","1",")",")","{","//","try","to","sign","in","the","user\n","if","(","signIn","(","data[0],","data[1]",")",")","{","username","=","data[0]",";","password","=","data[1]",";","\n\n","if","(","data",".","length",">","2\n","&&","_Strings",".","isNotEmpty","(","data[2]",")",")","{","try","{","timezone","=","ZoneId",".","of","(","data[2]",")",";","}","catch","(","Exception","e",")","{","e",".","printStackTrace","(",")",";","}","}","\n\n","onSignInRemembered","(",")",";","}","else","{","//","the","loaded","credentials","are","wrong",".","erase","them",".","authenticationStrategy",".","remove","(",")",";","}","}","}","\n\n","super",".","onConfigure","(",")",";"],"docstring_tokens":["Try","to","sign-in","with","remembered","credentials"],"prompt_tokens":[]}
{"code_tokens":["public","String","getString","(","String","key,","final","String","defaultValue",")","{","try","{","String","v","=","context",".","getJobDetail","(",")",".","getJobDataMap","(",")",".","getString","(","key",")",";","return","v","!=","null","?","v",":","defaultValue",";","}","catch","(","Exception","e",")","{","return","defaultValue",";","}"],"docstring_tokens":["Lookup","property","from","the","job","detail"],"prompt_tokens":[]}
{"code_tokens":["public","static","<T>","void","putSingleton","(","final","@NonNull","Class<?","super","T>","type,","final","@NonNull","T","singleton",")","{","\n\n","//","let","writes","to","the","map","be","atomic\n","synchronized","(","$LOCK",")","{","if","(","singletonMap",".","containsKey","(","type",")",")","throw","new","IllegalStateException","(","\"there","is","already","a","singleton","of","type","'\"+type+\"'","on","this","context",".","\"",")",";","singletonMap",".","put","(","type,","singleton",")",";","}"],"docstring_tokens":["Puts","a","singleton","instance","onto","the","current","context"],"prompt_tokens":[]}
{"code_tokens":["public","static","Class<?>","loadClass","(","final","String","className",")","throws","ClassNotFoundException","{","return","getDefaultClassLoader","(",")",".","loadClass","(","className",")",";"],"docstring_tokens":["Uses","the","frameworks","default-ClassLoader","to","load","a","class","by","name"],"prompt_tokens":[]}
{"code_tokens":["protected","static","Function<Throwable,","String>","prefix","(","final","String","prefix",")","{","return","rootCause->prefix","+","\":","\"","+","rootCause",".","getMessage","(",")",";"],"docstring_tokens":["Convenience","for","subclass","implementations","that","always","prefixes","the","exception","message","with","the","supplied","text"],"prompt_tokens":[]}
{"code_tokens":["@Programmatic\n","public","void","expand","(",")","{","final","Set<TreePath>","expandedPaths","=","getTreeState","(",")",".","getExpandedNodePaths","(",")",";","streamHierarchyUp","(",")",".","map","(","TreeNode::getPositionAsPath",")",".","forEach","(","expandedPaths::add",")",";"],"docstring_tokens":["Expands","this","node","and","all","its","parents"],"prompt_tokens":[]}
{"code_tokens":["\n	@Override\n	public","void","destroy","(",")","{","\n		logger",".","info","(","\"Closing","JDO","PersistenceManagerFactory\"",")",";","\n		this",".","persistenceManagerFactory",".","close","(",")",";","\n	"],"docstring_tokens":["Close","the","PersistenceManagerFactory","on","bean","factory","shutdown"],"prompt_tokens":[]}
{"code_tokens":["@Override\n","public","void","onInitialize","(",")","{","super",".","onInitialize","(",")",";","addDropdown","(",")",";"],"docstring_tokens":["Build","UI","only","after","added","to","parent"],"prompt_tokens":[]}
{"code_tokens":["public","DateTimeConfig","keepOpen","(","final","boolean","keepOpen",")","{","put","(","KeepOpen,","keepOpen",")",";","return","this",";"],"docstring_tokens":["Will","cause","the","date","picker","to","stay","open","after","selecting","a","date"],"prompt_tokens":[]}
{"code_tokens":["public","DateTimeConfig","allowKeyboardNavigation","(","final","boolean","value",")","{","put","(","KeyboardNavigation,","value",")",";","return","this",";"],"docstring_tokens":["Whether","or","not","to","allow","date","navigation","by","arrow","keys"],"prompt_tokens":[]}
{"code_tokens":["public","DateTimeConfig","highlightToday","(","final","boolean","value",")","{","put","(","HighlightToday,","value",")",";","return","this",";"],"docstring_tokens":["If","true,","highlights","the","current","date"],"prompt_tokens":[]}
{"code_tokens":["public","DateTimeConfig","autoClose","(","final","boolean","value",")","{","put","(","AutoClose,","value",")",";","return","this",";"],"docstring_tokens":["Whether","or","not","to","close","the","datepicker","immediately","when","a","date","is","selected"],"prompt_tokens":[]}
{"code_tokens":["public","static","Stream<Class<?>>","streamGenericTypeArgumentsOf","(","final","@NonNull","Class<?>","owner,\n","final","@NonNull","Type","genericType",")","{","\n\n","return","(","genericType","instanceof","ParameterizedType",")","?","Stream",".","of","(","(","(","ParameterizedType",")","genericType",")",".","getActualTypeArguments","(",")",")",".","flatMap","(","type->streamClassesOfType","(","owner,","type",")",")",":","Stream",".","empty","(",")",";"],"docstring_tokens":["Returns","a","Stream","of","the","actual","type","arguments","for","given","genericType"],"prompt_tokens":[]}
{"code_tokens":["public","static","<T>","ResponseDigest<T>","ofAsyncFailure","(","final","Future<Response>","asyncResponse,\n","final","Class<T>","entityType,\n","final","Exception","failure",")","{","\n\n","Response","response",";","try","{","response","=","asyncResponse",".","isDone","(",")","?","asyncResponse",".","get","(",")",":","null",";","}","catch","(","Exception","e",")","{","response","=","null",";","}","\n\n","final","ResponseDigest<T>","failureDigest","=","new","ResponseDigest<>","(","response,","entityType,","null",")",";","return","failureDigest",".","digestAsyncFailure","(","asyncResponse",".","isCancelled","(",")",",","failure",")",";"],"docstring_tokens":["a-synchronous","response","failure","processing"],"prompt_tokens":[]}
{"code_tokens":["@Override\n","public","String","toString","(",")","{","return","title",".","toString","(",")",";"],"docstring_tokens":["Returns","a","String","that","represents","the","value","of","this","object"],"prompt_tokens":[]}
{"code_tokens":["public","static","LocalDate","endDateFromStartDate","(","LocalDate","date",")","{","return","new","LocalDateInterval","(","date,","null",")",".","endDateFromStartDate","(",")",";","\n\n"],"docstring_tokens":["Returns","an","end","date","given","the","start","date","of","the","next","adjoining","interval"],"prompt_tokens":[]}
{"code_tokens":["public","ApplicationRole","act","(","final","ApplicationPermissionRule","rule,\n","final","ApplicationPermissionMode","mode,\n","@ParameterLayout","(","describedAs","=","ApplicationFeatureChoices",".","DESCRIBED_AS\n",")","final","ApplicationFeatureChoices",".","AppFeat","feature",")","{","\n\n","applicationPermissionRepository",".","newPermission","(","target,","rule,","mode,","feature",".","getFeatureId","(",")",")",";","return","target",";"],"docstring_tokens":["Adds","a","ApplicationPermission","permission","for","this","role","to","a","ApplicationFeature","feature"],"prompt_tokens":[]}
{"code_tokens":["protected","MarkupContainer","createShallowComponentForRegular","(",")","{","return","Wkt",".","container","(","ID_SCALAR_IF_REGULAR",")",";","//","empty","component",";"],"docstring_tokens":["Builds","the","hidden","REGULAR","component","when","in","COMPACT","format"],"prompt_tokens":[]}
{"code_tokens":["protected","Component","createShallowComponentForCompact","(",")","{","return","Wkt",".","container","(","ID_SCALAR_IF_COMPACT",")",";","//","empty","component\n"],"docstring_tokens":["Builds","the","hidden","COMPACT","component","when","in","REGULAR","format"],"prompt_tokens":[]}
{"code_tokens":["public","void","repaint","(","final","AjaxRequestTarget","target",")","{","target",".","add","(","this",")",";"],"docstring_tokens":["Repaints","this","panel","of","just","some","of","its","children"],"prompt_tokens":[]}
{"code_tokens":["@Override\n","protected","AuthorizationInfo","queryForAuthorizationInfo","(","final","PrincipalCollection","principals,","final","LdapContextFactory","ldapContextFactory",")","throws","NamingException","{","final","Set<String>","roleNames","=","getRoles","(","principals,","ldapContextFactory",")",";","SimpleAuthorizationInfo","simpleAuthorizationInfo","=","new","SimpleAuthorizationInfo","(","roleNames",")",";","Set<String>","stringPermissions","=","permsFor","(","roleNames",")",";","final","String","username","=","(","String",")","getAvailablePrincipal","(","principals",")",";","final","LdapContext","finalLdapContext","=","ldapContextFactory",".","getSystemLdapContext","(",")",";","stringPermissions",".","addAll","(","getPermissionForUser","(","username,","finalLdapContext",")",")",";","stringPermissions",".","addAll","(","getPermissionForRole","(","username,","finalLdapContext",")",")",";","simpleAuthorizationInfo",".","setStringPermissions","(","stringPermissions",")",";","\n\n","return","simpleAuthorizationInfo",";"],"docstring_tokens":["Get","groups","from","LDAP"],"prompt_tokens":[]}
{"code_tokens":["protected","JsonRepresentation","getLinks","(",")","{","JsonRepresentation","links","=","representation",".","getArray","(","\"links\"",")",";","if","(","links","==","null",")","{","links","=","JsonRepresentation",".","newArray","(",")",";","representation",".","mapPut","(","\"links\",","links",")",";","}","return","links",";"],"docstring_tokens":["Will","lazily","create","links","array","as","required"],"prompt_tokens":[]}
{"code_tokens":["protected","JsonRepresentation","getExtensions","(",")","{","JsonRepresentation","extensions","=","representation",".","getMap","(","\"extensions\"",")",";","if","(","extensions","==","null",")","{","extensions","=","JsonRepresentation",".","newMap","(",")",";","representation",".","mapPut","(","\"extensions\",","extensions",")",";","}","return","extensions",";"],"docstring_tokens":["Will","lazily","create","extensions","map","as","required"],"prompt_tokens":[]}
{"code_tokens":["public","static","InteractionContext","ofUserWithSystemDefaults","(","final","@NonNull","UserMemento","user",")","{","return","InteractionContext",".","builder","(",")",".","user","(","user",")",".","clock","(","VirtualClock",".","system","(",")",")",".","timeZone","(","ZoneId",".","systemDefault","(",")",")",".","build","(",")",";"],"docstring_tokens":["Creates","a","new","InteractionContext","with","the","specified","user","and","system","defaults","for","clock,","locale","and","time-zone"],"prompt_tokens":[]}
{"code_tokens":["@Override\n","public","boolean","hasReturn","(",")","{","if","(","getReturnType","(",")","==","null",")","{","//","this","shouldn't","happen",";","return","Type","always","defined,","even","if","represents","void",".","class\n","return","false",";","}","return","getReturnType","(",")","!=","getSpecificationLoader","(",")",".","loadSpecification","(","void",".","class",")",";"],"docstring_tokens":["Returns","true","if","the","represented","action","returns","something,","else","returns","false"],"prompt_tokens":[]}
{"code_tokens":["@Override\n","public","boolean","isPropertyAccessor","(","final","Method","method",")","{","return","false",";"],"docstring_tokens":["The","method","way","well","represent","a","reference","property,","but","this","facet","factory","does","not","have","any","opinion","on","the","matter"],"prompt_tokens":[]}
{"code_tokens":["public","static","void","raise","(","@NonNull","SpecificationLoader","specLoader,\n","@NonNull","Identifier","deficiencyOrigin,\n","@NonNull","String","deficiencyMessage",")","{","\n\n","specLoader",".","addValidationFailure","(","ValidationFailure",".","of","(","deficiencyOrigin,","deficiencyMessage",")",")",";"],"docstring_tokens":["Collects","a","new","ValidationFailure","with","given","origin","and","message"],"prompt_tokens":[]}
{"code_tokens":["@Override\n","public","ObjectValidityContext","createValidityInteractionContext","(","final","ManagedObject","targetAdapter,","final","InteractionInitiatedBy","interactionInitiatedBy",")","{","return","new","ObjectValidityContext","(","targetAdapter,","getFeatureIdentifier","(",")",",","interactionInitiatedBy",")",";"],"docstring_tokens":["Create","an","InteractionContext","representing","an","attempt","to","save","the","object"],"prompt_tokens":[]}
{"code_tokens":["public","static","Optional<Class<?>>","inferComponentType","(","final","@Nullable","Class<?>","arrayType",")","{","if","(","!isArrayType","(","arrayType",")",")","{","return","Optional",".","empty","(",")",";","}","return","Optional",".","ofNullable","(","arrayType",".","getComponentType","(",")",")",";"],"docstring_tokens":["Returns","the","inferred","element","type","of","the","specified","array","type"],"prompt_tokens":[]}
{"code_tokens":["@Nullable\n","Method","get","(","String","name",")","{","int","index","=","indexOf","(","name",")",";","return","index","!=","-1","?","this",".","attributeMethods[index]",":","null",";"],"docstring_tokens":["Get","the","attribute","with","the","specified","name","or","null","if","no","matching","attribute","exists"],"prompt_tokens":[]}
{"code_tokens":["boolean","canThrowTypeNotPresentException","(","int","index",")","{","return","this",".","canThrowTypeNotPresentException[index]",";"],"docstring_tokens":["Determine","if","the","attribute","at","the","specified","index","could","throw","a","TypeNotPresentException","when","accessed"],"prompt_tokens":[]}
{"code_tokens":["int","indexOf","(","String","name",")","{","for","(","int","i","=","0",";","i","<","this",".","attributeMethods",".","length",";","i++",")","{","if","(","this",".","attributeMethods[i]",".","getName","(",")",".","equals","(","name",")",")","{","return","i",";","}","}","return","-1",";"],"docstring_tokens":["Get","the","index","of","the","attribute","with","the","specified","name,","or","-1","if","there","is","no","attribute","with","the","name"],"prompt_tokens":[]}
{"code_tokens":["int","indexOf","(","Method","attribute",")","{","for","(","int","i","=","0",";","i","<","this",".","attributeMethods",".","length",";","i++",")","{","if","(","this",".","attributeMethods[i]",".","equals","(","attribute",")",")","{","return","i",";","}","}","return","-1",";"],"docstring_tokens":["Get","the","index","of","the","specified","attribute,","or","-1","if","the","attribute","is","not","in","this","collection"],"prompt_tokens":[]}
{"code_tokens":["int","size","(",")","{","return","this",".","attributeMethods",".","length",";"],"docstring_tokens":["Get","the","number","of","attributes","in","this","collection"],"prompt_tokens":[]}
{"code_tokens":["boolean","hasDefaultValueMethod","(",")","{","return","this",".","hasDefaultValueMethod",";"],"docstring_tokens":["Determine","if","at","least","one","of","the","attribute","methods","has","a","default","value"],"prompt_tokens":[]}
{"code_tokens":["boolean","hasNestedAnnotation","(",")","{","return","this",".","hasNestedAnnotation",";"],"docstring_tokens":["Determine","if","at","least","one","of","the","attribute","methods","is","a","nested","annotation"],"prompt_tokens":[]}
{"code_tokens":["static","_Annotations_AttributeMethods","forAnnotationType","(","@Nullable","Class<?","extends","Annotation>","annotationType",")","{","if","(","annotationType","==","null",")","{","return","NONE",";","}","return","cache",".","computeIfAbsent","(","annotationType,","_Annotations_AttributeMethods::compute",")",";"],"docstring_tokens":["Get","the","attribute","methods","for","the","given","annotation","type"],"prompt_tokens":[]}
{"code_tokens":["public","static","void","viewmodelRefresh","(","final","IRequestablePage","iRequestablePage",")","{","if","(","iRequestablePage","instanceof","EntityPage",")","{","\n\n","val","entityPage","=","(","EntityPage",")","iRequestablePage",";","\n\n","//","optimization,","not","strictly","required\n","if","(","entityPage",".","isAlreadyRefreshedWithinThisInteraction","(",")",")","{","return",";","}","\n\n","val","entityModel","=","(","EntityModel",")","entityPage",".","getUiHintContainerIfAny","(",")",";","val","spec","=","entityModel",".","getObject","(",")",".","getSpecification","(",")",";","if","(","spec",".","isViewModel","(",")",")","{","\n\n","val","viewModelFacet","=","spec",".","getFacet","(","ViewModelFacet",".","class",")",";","if","(","viewModelFacet",".","containsEntities","(",")",")","{","\n\n","_Debug",".","onCondition","(","XrayUi",".","isXrayEnabled","(",")",",","(",")","->","{","_Debug",".","log","(","\"about","to","refresh","EntityPage",".",".","\"",")",";","}",")",";","\n\n","val","viewmodel","=","entityModel",".","getBookmarkedOwner","(",")",";","if","(","viewmodel",".","isBookmarkMemoized","(",")",")","{","viewmodel",".","reloadViewmodelFromMemoizedBookmark","(",")",";","}","else","{","val","bookmark","=","PageParameterUtils\n",".","toBookmark","(","entityPage",".","getPageParameters","(",")",")",".","orElseThrow","(",")",";","viewmodel",".","reloadViewmodelFromBookmark","(","bookmark",")",";","}","\n\n","}","}","}"],"docstring_tokens":["Re-fetch","entities","for","view-models,","usually","required","once","at","begin","of","request"],"prompt_tokens":[]}
{"code_tokens":["@Programmatic\n","public","ApplicationFeatureId","getParentNamespaceFeatureId","(",")","{","\n\n","_Assert",".","assertFalse","(","sort",".","isMember","(",")",")",";","\n\n","if","(","sort",".","isType","(",")",")","{","return","ApplicationFeatureId",".","newNamespace","(","getNamespace","(",")",")",";","}","else","{","val","namespace","=","getNamespace","(",")",";","//","eg","aaa",".","bbb",".","ccc\n","if","(","!namespace",".","contains","(","\"",".","\"",")",")","{","return","null",";","//","parent","is","root\n","}","final","int","cutOffPos","=","namespace",".","lastIndexOf","(","'",".","'",")",";","final","String","parentPackageName","=","namespace",".","substring","(","0,","cutOffPos",")",";","return","newNamespace","(","parentPackageName",")",";","}"],"docstring_tokens":["The","ApplicationFeatureId","id","of","the","parent","package","of","this","class","or","package"],"prompt_tokens":[]}
{"code_tokens":["public","ApplicationFeatureId","withNamespace","(","final","@NonNull","String","namespace",")","{","return","newFeature","(","namespace,","this",".","getTypeSimpleName","(",")",",","this",".","getLogicalMemberName","(",")",")",";"],"docstring_tokens":["Returns","a","new","instance","that","is","a","clone","of","this,","except","for","the","namespace,","which","is","taken","from","the","argument"],"prompt_tokens":[]}
{"code_tokens":["@SneakyThrows\n","private","ManagedObject","invokeValueTypeMixin","(","final","@NonNull","Can<ManagedObject>","actionParameters",")","{","\n\n","val","method","=","(","(","ObjectMemberAbstract",")","action",")",".","getFacetedMethod","(",")",".","getMethod","(",")",";","\n\n","final","Object[]","executionParameters","=","UnwrapUtil",".","multipleAsArray","(","actionParameters",")",";","final","Object","targetPojo","=","UnwrapUtil",".","single","(","interactionHead","(",")",".","getTarget","(",")",")",";","\n\n","val","resultPojo","=","CanonicalParameterUtil\n",".","invoke","(","method,","targetPojo,","executionParameters",")",";","\n\n","return","mmc","(",")",".","getObjectManager","(",")",".","adapt","(","resultPojo",")",";"],"docstring_tokens":["value-type","mixins","have","no","rule-checking,","no","domain","events","and","no","routing"],"prompt_tokens":[]}
{"code_tokens":["public","boolean","contains","(","final","LocalDate","date",")","{","if","(","date","==","null",")","{","return","false",";","}","if","(","endDate","(",")","==","null",")","{","if","(","startDate","(",")","==","null",")","{","return","true",";","}","if","(","date",".","isEqual","(","startDate","(",")",")","||","date",".","isAfter","(","startDate","(",")",")",")","{","return","true",";","}","return","false",";","}","return","asInterval","(",")",".","contains","(","date",".","toInterval","(",")",")",";"],"docstring_tokens":["Does","this","date","contain","the","specified","time","interval"],"prompt_tokens":[]}
{"code_tokens":["public","boolean","contains","(","final","T","localDateInterval",")","{","return","asInterval","(",")",".","contains","(","localDateInterval",".","asInterval","(",")",")",";"],"docstring_tokens":["Does","this","time","interval","contain","the","specified","time","interval"],"prompt_tokens":[]}
{"code_tokens":["@SuppressWarnings","(","\"unchecked\"",")","public","T","overlap","(","final","T","otherInterval",")","{","if","(","otherInterval","==","null",")","{","return","null",";","}","if","(","otherInterval",".","isInfinite","(",")",")","{","return","(","T",")","this",";","}","if","(","this",".","isInfinite","(",")",")","{","return","otherInterval",";","}","final","Interval","thisAsInterval","=","asInterval","(",")",";","final","Interval","otherAsInterval","=","otherInterval",".","asInterval","(",")",";","Interval","overlap","=","thisAsInterval",".","overlap","(","otherAsInterval",")",";","if","(","overlap","==","null",")","{","return","null",";","}","return","newInterval","(","overlap",")",";"],"docstring_tokens":["Gets","the","overlap","between","this","interval","and","another","interval"],"prompt_tokens":[]}
{"code_tokens":["public","boolean","within","(","final","T","interval",")","{","return","interval",".","asInterval","(",")",".","contains","(","asInterval","(",")",")",";"],"docstring_tokens":["Does","this","interval","is","within","the","specified","interval"],"prompt_tokens":[]}
{"code_tokens":["private","void","buildGui","(",")","{","\n\n","//","REVIEW:","this","is","nasty,","both","write","to","the","same","entityLink","field\n","//","even","though","only","one","is","used\n","componentIfCompact","=","addComponentForCompact","(",")",";","componentIfRegular","=","addComponentForRegular","(",")",";","\n\n","getRendering","(",")",".","buildGui","(","this",")",";","addCssForMetaModel","(",")",";","\n\n","if","(","!subscribers",".","isEmpty","(",")",")","{","addFormComponentBehavior","(","new","ScalarUpdatingBehavior","(",")",")",";","}"],"docstring_tokens":["Builds","GUI","lazily","prior","to","first","render"],"prompt_tokens":[]}
{"code_tokens":["public","Optional<ManagedObject>","getMixedIn","(",")","{","return","Objects",".","equals","(","getOwner","(",")",",","getTarget","(",")",")","?","Optional",".","empty","(",")",":","Optional",".","of","(","getOwner","(",")",")",";"],"docstring_tokens":["as","used","by","the","domain","event","subsystem"],"prompt_tokens":[]}
{"code_tokens":["public","static","void","millis","(","long","millis",")","{","\n\n","try","{","Thread",".","sleep","(","millis",")",";","}","catch","(","InterruptedException","e",")","{","log",".","warn","(","\"Interrupted!\",","e",")",";","//","Restore","interrupted","state",".",".",".","Thread",".","currentThread","(",")",".","interrupt","(",")",";","}","\n\n"],"docstring_tokens":["Suspends","the","current","thread","for","given","milliseconds","of","time"],"prompt_tokens":[]}
{"code_tokens":["@Override\n","protected","ApplicationAdvice","appliesTo","(","final","IModel<?>","model",")","{","if","(","!","(","model","instanceof","ServiceActionsModel",")",")","{","return","ApplicationAdvice",".","DOES_NOT_APPLY",";","}","val","menuUiModel","=","(","(","ServiceActionsModel",")","model",")",".","getObject","(",")",";","val","menuBarSelect","=","menuUiModel",".","getMenuBarSelect","(",")",";","return","appliesIf","(","menuBarSelect","!=","DomainServiceLayout",".","MenuBar",".","TERTIARY\n","&&","menuBarSelect","!=","null",")",";"],"docstring_tokens":["Applies","to","primary","and","secondary","service","action","models"],"prompt_tokens":[]}
{"code_tokens":["private","static","int","getWorksheetProtectionBlockInsertPos","(","List<RecordBase>","records",")","{","int","i","=","getDimensionsIndex","(","records",")",";","while","(","i",">","0",")","{","i--",";","Object","rb","=","records",".","get","(","i",")",";","if","(","!isProtectionSubsequentRecord","(","rb",")",")","{","return","i+1",";","}","}","throw","new","IllegalStateException","(","\"did","not","find","insert","pos","for","protection","block\"",")",";"],"docstring_tokens":["Finds","the","index","where","the","protection","block","should","be","inserted"],"prompt_tokens":[]}
{"code_tokens":["private","static","int","findInsertPosForNewCondFormatTable","(","List<RecordBase>","records",")","{","\n\n","for","(","int","i","=","records",".","size","(",")","-","2",";","i",">=","0",";","i--",")","{","//","-2","to","skip","EOF","record\n","Object","rb","=","records",".","get","(","i",")",";","if","(","rb","instanceof","MergedCellsTable",")","{","return","i","+","1",";","}","if","(","rb","instanceof","DataValidityTable",")","{","continue",";","}","\n\n","Record","rec","=","(","org",".","apache",".","poi",".","hssf",".","record",".","Record",")","rb",";","switch","(","rec",".","getSid","(",")",")","{","case","WindowTwoRecord",".","sid:\n","case","SCLRecord",".","sid:\n","case","PaneRecord",".","sid:\n","case","SelectionRecord",".","sid:\n","case","UnknownRecord",".","STANDARDWIDTH_0099:\n","//","MergedCellsTable","usually","here\n","case","UnknownRecord",".","LABELRANGES_015F:\n","case","UnknownRecord",".","PHONETICPR_00EF:\n","//","ConditionalFormattingTable","goes","here\n","return","i","+","1",";","//","HyperlinkTable","(","not","aggregated","by","POI","yet",")","//","DataValidityTable\n","}","}","throw","new","RuntimeException","(","\"Did","not","find","Window2","record\"",")",";"],"docstring_tokens":["Find","correct","position","to","add","new","CFHeader","record"],"prompt_tokens":[]}
{"code_tokens":["private","static","int","findDataValidationTableInsertPos","(","List<RecordBase>","records",")","{","int","i","=","records",".","size","(",")","-","1",";","if","(","!","(","records",".","get","(","i",")","instanceof","EOFRecord",")",")","{","throw","new","IllegalStateException","(","\"Last","sheet","record","should","be","EOFRecord\"",")",";","}","while","(","i",">","0",")","{","i--",";","RecordBase","rb","=","records",".","get","(","i",")",";","if","(","isDVTPriorRecord","(","rb",")",")","{","Record","nextRec","=","(","org",".","apache",".","poi",".","hssf",".","record",".","Record",")","records",".","get","(","i","+","1",")",";","if","(","!isDVTSubsequentRecord","(","nextRec",".","getSid","(",")",")",")","{","throw","new","IllegalStateException","(","\"Unexpected","(","\"","+","nextRec",".","getClass","(",")",".","getName","(",")","+","\"",")","found","after","(","\"","+","rb",".","getClass","(",")",".","getName","(",")","+","\"",")","\"",")",";","}","return","i+1",";","}","Record","rec","=","(","org",".","apache",".","poi",".","hssf",".","record",".","Record",")","rb",";","if","(","!isDVTSubsequentRecord","(","rec",".","getSid","(",")",")",")","{","throw","new","IllegalStateException","(","\"Unexpected","(","\"","+","rec",".","getClass","(",")",".","getName","(",")","+","\"",")","while","looking","for","DV","Table","insert","pos\"",")",";","}","}","return","0",";"],"docstring_tokens":["Finds","the","index","where","the","sheet","validations","header","record","should","be","inserted"],"prompt_tokens":[]}
{"code_tokens":["private","static","int","getDimensionsIndex","(","List<RecordBase>","records",")","{","int","nRecs","=","records",".","size","(",")",";","for","(","int","i=0",";","i<nRecs",";","i++",")","{","if","(","records",".","get","(","i",")","instanceof","DimensionsRecord",")","{","return","i",";","}","}","//","worksheet","stream","is","seriously","broken\n","throw","new","RuntimeException","(","\"DimensionsRecord","not","found\"",")",";"],"docstring_tokens":["DIMENSIONS","record","is","always","present"],"prompt_tokens":[]}
{"code_tokens":["public","static","void","registerFunction","(","String","name,","Function","func",")","{","FunctionMetadata","metaData","=","FunctionMetadataRegistry",".","getFunctionByName","(","name",")",";","if","(","metaData","==","null",")","{","if","(","AnalysisToolPak",".","isATPFunction","(","name",")",")","{","throw","new","IllegalArgumentException","(","name","+","\"","is","a","function","from","the","Excel","Analysis","Toolpack",".","\"","+\n","\"Use","AnalysisToolpack",".","registerFunction","(","String","name,","FreeRefFunction","func",")","instead",".","\"",")",";","}","\n\n","throw","new","IllegalArgumentException","(","\"Unknown","function:","\"","+","name",")",";","}","\n\n","int","idx","=","metaData",".","getIndex","(",")",";","if","(","functions[idx]","instanceof","NotImplementedFunction",")","{","functions[idx]","=","func",";","}","else","{","throw","new","IllegalArgumentException","(","\"POI","already","implements","\"","+","name","+\n","\"",".","You","cannot","override","POI's","implementations","of","Excel","functions\"",")",";","}"],"docstring_tokens":["Register","a","new","function","in","runtime"],"prompt_tokens":[]}
{"code_tokens":["public","boolean","isColumnTracked","(","int","column",")","{","return","(","trackAllColumns","&&","!untrackedColumns",".","contains","(","column",")",")","||","maxColumnWidths",".","containsKey","(","column",")",";"],"docstring_tokens":["Returns","true","if","column","is","currently","tracked","for","auto-sizing"],"prompt_tokens":[]}
{"code_tokens":["public","void","untrackAllColumns","(",")","{","trackAllColumns","=","false",";","maxColumnWidths",".","clear","(",")",";","untrackedColumns",".","clear","(",")",";"],"docstring_tokens":["Untrack","all","columns","that","were","previously","tracked","for","auto-sizing"],"prompt_tokens":[]}
{"code_tokens":["public","int","getBestFitColumnWidth","(","int","column,","boolean","useMergedCells",")","{","if","(","!maxColumnWidths",".","containsKey","(","column",")",")","{","//","if","column","is","not","tracked,","implicitly","track","the","column","if","trackAllColumns","is","True","and","column","has","not","been","explicitly","untracked\n","if","(","trackAllColumns",")","{","if","(","!implicitlyTrackColumn","(","column",")",")","{","final","Throwable","reason","=","new","IllegalStateException","(","\"Column","was","explicitly","untracked","after","trackAllColumns","(",")","was","called",".","\"",")",";","throw","new","IllegalStateException","(","\"Cannot","get","best","fit","column","width","on","explicitly","untracked","column","\"","+","column","+","\"",".","\"","+\n","\"Either","explicitly","track","the","column","or","track","all","columns",".","\",","reason",")",";","}","}","else","{","final","Throwable","reason","=","new","IllegalStateException","(","\"Column","was","never","explicitly","tracked","and","isAllColumnsTracked","(",")","is","false","\"","+\n","\"","(","trackAllColumns","(",")","was","never","called","or","untrackAllColumns","(",")","was","called","after","trackAllColumns","(",")","was","called",")",".","\"",")",";","throw","new","IllegalStateException","(","\"Cannot","get","best","fit","column","width","on","untracked","column","\"","+","column","+","\"",".","\"","+\n","\"Either","explicitly","track","the","column","or","track","all","columns",".","\",","reason",")",";","}","}","final","double","width","=","maxColumnWidths",".","get","(","column",")",".","getMaxColumnWidth","(","useMergedCells",")",";","return","Math",".","toIntExact","(","Math",".","round","(","256*width",")",")",";"],"docstring_tokens":["Get","the","best-fit","width","of","a","tracked","column"],"prompt_tokens":[]}
{"code_tokens":["public","void","updateColumnWidths","(","Row","row",")","{","//","track","new","columns\n","implicitlyTrackColumnsInRow","(","row",")",";","//","update","the","widths\n","//","for-loop","over","the","shorter","of","the","number","of","cells","in","the","row","and","the","number","of","tracked","columns\n","//","these","two","for-loops","should","do","the","same","thing\n","if","(","maxColumnWidths",".","size","(",")","<","row",".","getPhysicalNumberOfCells","(",")",")","{","//","loop","over","the","tracked","columns,","because","there","are","fewer","tracked","columns","than","cells","in","this","row\n","for","(","final","Entry<Integer,","ColumnWidthPair>","e",":","maxColumnWidths",".","entrySet","(",")",")","{","final","int","column","=","e",".","getKey","(",")",";","final","Cell","cell","=","row",".","getCell","(","column",")",";","//is","MissingCellPolicy=Row",".","RETURN_NULL_AND_BLANK","needed?\n\n","//","FIXME:","if","cell","belongs","to","a","merged","region,","some","of","the","merged","region","may","have","fallen","outside","of","the","random","access","window\n","//","In","this","case,","getting","the","column","width","may","result","in","an","error",".","Need","to","gracefully","handle","this",".","\n\n","//","FIXME:","Most","cells","are","not","merged,","so","calling","getCellWidth","twice","re-computes","the","same","value","twice",".","//","Need","to","rewrite","this","to","avoid","unnecessary","computation","if","this","proves","to","be","a","performance","bottleneck",".","\n\n","if","(","cell","!=","null",")","{","final","ColumnWidthPair","pair","=","e",".","getValue","(",")",";","updateColumnWidth","(","cell,","pair",")",";","}","}","}","else","{","//","loop","over","the","cells","in","this","row,","because","there","are","fewer","cells","in","this","row","than","tracked","columns\n","for","(","final","Cell","cell",":","row",")","{","final","int","column","=","cell",".","getColumnIndex","(",")",";","\n\n","//","FIXME:","if","cell","belongs","to","a","merged","region,","some","of","the","merged","region","may","have","fallen","outside","of","the","random","access","window\n","//","In","this","case,","getting","the","column","width","may","result","in","an","error",".","Need","to","gracefully","handle","this",".","\n\n","//","FIXME:","Most","cells","are","not","merged,","so","calling","getCellWidth","twice","re-computes","the","same","value","twice",".","//","Need","to","rewrite","this","to","avoid","unnecessary","computation","if","this","proves","to","be","a","performance","bottleneck",".","\n\n","if","(","maxColumnWidths",".","containsKey","(","column",")",")","{","final","ColumnWidthPair","pair","=","maxColumnWidths",".","get","(","column",")",";","updateColumnWidth","(","cell,","pair",")",";","}","}","}"],"docstring_tokens":["Calculate","the","best","fit","width","for","each","tracked","column","in","row"],"prompt_tokens":[]}
{"code_tokens":["@Internal\n","public","void","setIftcHtml","(","byte","value",")","{","field_3_info3","=","(","short",")","iftcHtml",".","setValue","(","field_3_info3,","value",")",";"],"docstring_tokens":["Sets","the","iftcHtml","field","value"],"prompt_tokens":[]}
{"code_tokens":["protected","float","processColumnWidths","(","HSSFSheet","sheet,","int","maxSheetColumns,\n","Element","table",")","{","float","tableWidth","=","0",";","\n\n","if","(","isOutputRowNumbers","(",")",")","{","final","float","columnWidthIn","=","getDefaultColumnWidth","(","sheet",")","/","DPI",";","\n\n","final","Element","rowNumberColumn","=","foDocumentFacade\n",".","createTableColumn","(",")",";","rowNumberColumn",".","setAttribute","(","\"column-width\",","columnWidthIn","+","\"in\"",")",";","table",".","appendChild","(","rowNumberColumn",")",";","\n\n","tableWidth","+=","columnWidthIn",";","}","\n\n","for","(","int","c","=","0",";","c","<","maxSheetColumns",";","c++",")","{","if","(","!isOutputHiddenColumns","(",")","&&","sheet",".","isColumnHidden","(","c",")",")","{","continue",";","}","\n\n","final","float","columnWidthIn","=","getColumnWidth","(","sheet,","c",")","/","DPI",";","\n\n","Element","col","=","foDocumentFacade",".","createTableColumn","(",")",";","col",".","setAttribute","(","\"column-width\",","columnWidthIn","+","\"in\"",")",";","table",".","appendChild","(","col",")",";","\n\n","tableWidth","+=","columnWidthIn",";","}","\n\n","table",".","setAttribute","(","\"width\",","tableWidth","+","\"in\"",")",";","return","tableWidth",";"],"docstring_tokens":["Creates","COLGROUP","element","with","width","specified","for","all","columns"],"prompt_tokens":[]}
{"code_tokens":["\n\n","public","String","getName","(",")","{","return","_property",".","getName","(",")",";"],"docstring_tokens":["get","the","name","of","the","Entry"],"prompt_tokens":[]}
{"code_tokens":["@Override\n","public","String","getText","(",")","{","return","getHeaderFooter","(",")",".","getOddFooter","(",")",";"],"docstring_tokens":["Get","the","content","text","representing","the","footer"],"prompt_tokens":[]}
{"code_tokens":["@Override\n","public","void","setText","(","String","text",")","{","if","(","text","==","null",")","{","getHeaderFooter","(",")",".","unsetOddFooter","(",")",";","}","else","{","getHeaderFooter","(",")",".","setOddFooter","(","text",")",";","}"],"docstring_tokens":["Set","a","text","for","the","footer"],"prompt_tokens":[]}
{"code_tokens":["public","static","void","main","(","String[]","args",")","{","if","(","args",".","length","<=","0",")","{","System",".","err",".","println","(","\"No","files","names","provided\"",")",";","}","else","{","for","(","String","arg",":","args",")","{","try","{","Msg2txt","processor","=","new","Msg2txt","(","arg",")",";","processor",".","processMessage","(",")",";","}","catch","(","IOException","e",")","{","System",".","err",".","println","(","\"Could","not","process","\"","+","arg","+","\":","\"","+","e",")",";","}","}","}"],"docstring_tokens":["Processes","the","list","of","arguments","as","a","list","of","names","of","Outlook","MSG","files"],"prompt_tokens":[]}
{"code_tokens":["public","static","Calendar","getJavaCalendar","(","double","date,","boolean","use1904windowing,","TimeZone","timeZone,","boolean","roundSeconds",")","{","if","(","!isValidExcelDate","(","date",")",")","{","return","null",";","}","int","wholeDays","=","(","int",")","Math",".","floor","(","date",")",";","int","millisecondsInDay","=","(","int",")","(","(","date","-","wholeDays",")","*","DAY_MILLISECONDS","+","0",".","5",")",";","Calendar","calendar",";","if","(","timeZone","!=","null",")","{","calendar","=","LocaleUtil",".","getLocaleCalendar","(","timeZone",")",";","}","else","{","calendar","=","LocaleUtil",".","getLocaleCalendar","(",")",";","//","using","default","time-zone\n","}","setCalendar","(","calendar,","wholeDays,","millisecondsInDay,","use1904windowing,","roundSeconds",")",";","return","calendar",";"],"docstring_tokens":["Get","EXCEL","date","as","Java","Calendar","with","given","time","zone"],"prompt_tokens":[]}
{"code_tokens":["public","static","boolean","isCellDateFormatted","(","Cell","cell",")","{","return","isCellDateFormatted","(","cell,","null",")",";"],"docstring_tokens":["Check","if","a","cell","contains","a","date","Since","dates","are","stored","internally","in","Excel","as","double","values","we","infer","it","is","a","date","if","it","is","formatted","as","such"],"prompt_tokens":[]}
{"code_tokens":["@Test\n","protected","void","cloneSheetMultipleTimes","(",")","throws","IOException","{","try","(","Workbook","workbook","=","_testDataProvider",".","createWorkbook","(",")",")","{","CreationHelper","factory","=","workbook",".","getCreationHelper","(",")",";","Sheet","sheet","=","workbook",".","createSheet","(","\"Test","Clone\"",")",";","Row","row","=","sheet",".","createRow","(","0",")",";","Cell","cell","=","row",".","createCell","(","0",")",";","cell",".","setCellValue","(","factory",".","createRichTextString","(","\"clone_test\"",")",")",";","//Clone","the","sheet","multiple","times\n","workbook",".","cloneSheet","(","0",")",";","workbook",".","cloneSheet","(","0",")",";","\n\n","assertNotNull","(","workbook",".","getSheet","(","\"Test","Clone\"",")",")",";","assertNotNull","(","workbook",".","getSheet","(","\"Test","Clone","(","2",")","\"",")",")",";","assertEquals","(","\"Test","Clone","(","3",")","\",","workbook",".","getSheetName","(","2",")",")",";","assertNotNull","(","workbook",".","getSheet","(","\"Test","Clone","(","3",")","\"",")",")",";","\n\n","workbook",".","removeSheetAt","(","0",")",";","workbook",".","removeSheetAt","(","0",")",";","workbook",".","removeSheetAt","(","0",")",";","workbook",".","createSheet","(","\"abc","(","123",")","\"",")",";","workbook",".","cloneSheet","(","0",")",";","assertEquals","(","\"abc","(","124",")","\",","workbook",".","getSheetName","(","1",")",")",";","}"],"docstring_tokens":["tests","that","the","sheet","name","for","multiple","clones","of","the","same","sheet","is","unique","BUG","37416"],"prompt_tokens":[]}
{"code_tokens":["@Test\n","void","printSetupLandscapeNew","(",")","throws","IOException","{","try","(","Workbook","wb1","=","_testDataProvider",".","createWorkbook","(",")",")","{","Sheet","sheetL","=","wb1",".","createSheet","(","\"LandscapeS\"",")",";","Sheet","sheetP","=","wb1",".","createSheet","(","\"LandscapeP\"",")",";","\n\n","//","Check","two","aspects","of","the","print","setup\n","assertFalse","(","sheetL",".","getPrintSetup","(",")",".","getLandscape","(",")",")",";","assertFalse","(","sheetP",".","getPrintSetup","(",")",".","getLandscape","(",")",")",";","assertEquals","(","1,","sheetL",".","getPrintSetup","(",")",".","getCopies","(",")",")",";","assertEquals","(","1,","sheetP",".","getPrintSetup","(",")",".","getCopies","(",")",")",";","\n\n","//","Change","one","on","each\n","sheetL",".","getPrintSetup","(",")",".","setLandscape","(","true",")",";","sheetP",".","getPrintSetup","(",")",".","setCopies","(","(","short",")","3",")",";","\n\n","//","Check","taken\n","assertTrue","(","sheetL",".","getPrintSetup","(",")",".","getLandscape","(",")",")",";","assertFalse","(","sheetP",".","getPrintSetup","(",")",".","getLandscape","(",")",")",";","assertEquals","(","1,","sheetL",".","getPrintSetup","(",")",".","getCopies","(",")",")",";","assertEquals","(","3,","sheetP",".","getPrintSetup","(",")",".","getCopies","(",")",")",";","\n\n","//","Save","and","re-load,","and","check","still","there\n","try","(","Workbook","wb2","=","_testDataProvider",".","writeOutAndReadBack","(","wb1",")",")","{","sheetL","=","wb2",".","getSheet","(","\"LandscapeS\"",")",";","sheetP","=","wb2",".","getSheet","(","\"LandscapeP\"",")",";","\n\n","assertTrue","(","sheetL",".","getPrintSetup","(",")",".","getLandscape","(",")",")",";","assertFalse","(","sheetP",".","getPrintSetup","(",")",".","getLandscape","(",")",")",";","assertEquals","(","1,","sheetL",".","getPrintSetup","(",")",".","getCopies","(",")",")",";","assertEquals","(","3,","sheetP",".","getPrintSetup","(",")",".","getCopies","(",")",")",";","}","}"],"docstring_tokens":["Setting","landscape","and","portrait","stuff","on","new","sheets"],"prompt_tokens":[]}
{"code_tokens":["@Test\n","void","addOverlappingMergedRegions","(",")","throws","IOException","{","try","(","final","Workbook","wb","=","_testDataProvider",".","createWorkbook","(",")",")","{","final","Sheet","sheet","=","wb",".","createSheet","(",")",";","\n\n","final","CellRangeAddress","baseRegion","=","new","CellRangeAddress","(","0,","1,","0,","1",")",";","//A1:B2\n","assertEquals","(","0,","sheet",".","addMergedRegion","(","baseRegion",")",")",";","\n\n","final","CellRangeAddress","duplicateRegion","=","new","CellRangeAddress","(","0,","1,","0,","1",")",";","//A1:B2\n","assertThrows","(","IllegalStateException",".","class,\n","(",")","->","sheet",".","addMergedRegion","(","duplicateRegion",")",",\n","\"Should","not","be","able","to","add","a","merged","region","(","\"","+","duplicateRegion",".","formatAsString","(",")","+","\"",")","\"","+\n","\"if","sheet","already","contains","the","same","merged","region","(","\"","+","baseRegion",".","formatAsString","(",")","+","\"",")","\"\n",")",";","\n\n","final","CellRangeAddress","partiallyOverlappingRegion","=","new","CellRangeAddress","(","1,","2,","1,","2",")",";","//B2:C3\n","assertThrows","(","IllegalStateException",".","class,\n","(",")","->","sheet",".","addMergedRegion","(","partiallyOverlappingRegion",")",",\n","\"Should","not","be","able","to","add","a","merged","region","(","\"","+","partiallyOverlappingRegion",".","formatAsString","(",")","+","\"",")","\"","+\n","\"if","it","partially","overlaps","with","an","existing","merged","region","(","\"","+","baseRegion",".","formatAsString","(",")","+","\"",")","\"\n",")",";","\n\n","final","CellRangeAddress","subsetRegion","=","new","CellRangeAddress","(","0,","1,","0,","0",")",";","//A1:A2\n","assertThrows","(","IllegalStateException",".","class,\n","(",")","->","sheet",".","addMergedRegion","(","subsetRegion",")",",\n","\"Should","not","be","able","to","add","a","merged","region","(","\"","+","subsetRegion",".","formatAsString","(",")","+","\"",")","\"","+\n","\"if","it","is","a","formal","subset","of","an","existing","merged","region","(","\"","+","baseRegion",".","formatAsString","(",")","+","\"",")","\"\n",")",";","\n\n","final","CellRangeAddress","supersetRegion","=","new","CellRangeAddress","(","0,","2,","0,","2",")",";","//A1:C3\n","assertThrows","(","IllegalStateException",".","class,\n","(",")","->","sheet",".","addMergedRegion","(","supersetRegion",")",",\n","\"Should","not","be","able","to","add","a","merged","region","(","\"","+","supersetRegion",".","formatAsString","(",")","+","\"",")","\"","+\n","\"if","it","is","a","formal","superset","of","an","existing","merged","region","(","\"","+","baseRegion",".","formatAsString","(",")","+","\"",")","\"\n",")",";","\n\n","final","CellRangeAddress","disjointRegion","=","new","CellRangeAddress","(","10,","11,","10,","11",")",";","assertEquals","(","1,","sheet",".","addMergedRegion","(","disjointRegion",")",")",";","}"],"docstring_tokens":["Disallow","creating","wholly","or","partially","overlapping","merged","regions","as","this","results","in","a","corrupted","workbook"],"prompt_tokens":[]}
{"code_tokens":["@Test\n","void","addMerged","(",")","throws","IOException","{","try","(","Workbook","wb","=","_testDataProvider",".","createWorkbook","(",")",")","{","Sheet","sheet","=","wb",".","createSheet","(",")",";","assertEquals","(","0,","sheet",".","getNumMergedRegions","(",")",")",";","SpreadsheetVersion","ssVersion","=","_testDataProvider",".","getSpreadsheetVersion","(",")",";","\n\n","CellRangeAddress","region","=","new","CellRangeAddress","(","0,","1,","0,","1",")",";","assertEquals","(","0,","sheet",".","addMergedRegion","(","region",")",")",";","assertEquals","(","1,","sheet",".","getNumMergedRegions","(",")",")",";","\n\n","IllegalArgumentException","ex","=","assertThrows","(","IllegalArgumentException",".","class,\n","(",")","->","sheet",".","addMergedRegion","(","new","CellRangeAddress","(","-1,","-1,","-1,","-1",")",")",")",";","assertEquals","(","\"Merged","region",":","must","contain","2","or","more","cells\",","ex",".","getMessage","(",")",")",";","\n\n","ex","=","assertThrows","(","IllegalArgumentException",".","class,\n","(",")","->","sheet",".","addMergedRegion","(","new","CellRangeAddress","(","0,","0,","0,","ssVersion",".","getLastColumnIndex","(",")","+","1",")",")",")",";","assertEquals","(","\"Maximum","column","number","is","\"","+","ssVersion",".","getLastColumnIndex","(",")",",","ex",".","getMessage","(",")",")",";","\n\n","ex","=","assertThrows","(","IllegalArgumentException",".","class,\n","(",")","->","sheet",".","addMergedRegion","(","new","CellRangeAddress","(","0,","ssVersion",".","getLastRowIndex","(",")","+","1,","0,","1",")",")",")",";","assertEquals","(","\"Maximum","row","number","is","\"","+","ssVersion",".","getLastRowIndex","(",")",",","ex",".","getMessage","(",")",")",";","\n\n","assertEquals","(","1,","sheet",".","getNumMergedRegions","(",")",")",";","}"],"docstring_tokens":["Test","adding","merged","regions"],"prompt_tokens":[]}
{"code_tokens":["@Test\n","void","removeMerged","(",")","throws","IOException","{","try","(","Workbook","wb","=","_testDataProvider",".","createWorkbook","(",")",")","{","Sheet","sheet","=","wb",".","createSheet","(",")",";","CellRangeAddress","region","=","new","CellRangeAddress","(","0,","1,","0,","1",")",";","assertEquals","(","0,","sheet",".","addMergedRegion","(","region",")",")",";","region","=","new","CellRangeAddress","(","2,","3,","0,","1",")",";","assertEquals","(","1,","sheet",".","addMergedRegion","(","region",")",")",";","\n\n","sheet",".","removeMergedRegion","(","0",")",";","\n\n","region","=","sheet",".","getMergedRegion","(","0",")",";","assertEquals","(","2,","region",".","getFirstRow","(",")",",","\"Left","over","region","should","be","starting","at","row","2\"",")",";","\n\n","sheet",".","removeMergedRegion","(","0",")",";","\n\n","assertEquals","(","0,","sheet",".","getNumMergedRegions","(",")",",","\"there","should","be","no","merged","regions","left!\"",")",";","\n\n","//an,","add,","remove,","get","(","0",")","would","null","pointer\n","assertEquals","(","0,","sheet",".","addMergedRegion","(","region",")",")",";","assertEquals","(","1,","sheet",".","getNumMergedRegions","(",")",",","\"there","should","now","be","one","merged","region!\"",")",";","sheet",".","removeMergedRegion","(","0",")",";","assertEquals","(","0,","sheet",".","getNumMergedRegions","(",")",",","\"there","should","now","be","zero","merged","regions!\"",")",";","//add","it","again!\n","region",".","setLastRow","(","4",")",";","\n\n","assertEquals","(","0,","sheet",".","addMergedRegion","(","region",")",")",";","assertEquals","(","1,","sheet",".","getNumMergedRegions","(",")",",","\"there","should","now","be","one","merged","region!\"",")",";","\n\n","//should","exist","now!\n","assertTrue","(","1","<=","sheet",".","getNumMergedRegions","(",")",",","\"there","isn't","more","than","one","merged","region","in","there\"",")",";","region","=","sheet",".","getMergedRegion","(","0",")",";","assertEquals","(","4,","region",".","getLastRow","(",")",",","\"the","merged","row","to","doesn't","match","the","one","we","put","in","\"",")",";","}"],"docstring_tokens":["When","removing","one","merged","region,","it","would","break"],"prompt_tokens":[]}
{"code_tokens":["@Test\n","void","displayOptions","(",")","throws","IOException","{","try","(","Workbook","wb1","=","_testDataProvider",".","createWorkbook","(",")",")","{","Sheet","sheet","=","wb1",".","createSheet","(",")",";","\n\n","assertTrue","(","sheet",".","isDisplayGridlines","(",")",")",";","assertTrue","(","sheet",".","isDisplayRowColHeadings","(",")",")",";","assertFalse","(","sheet",".","isDisplayFormulas","(",")",")",";","assertTrue","(","sheet",".","isDisplayZeros","(",")",")",";","\n\n","sheet",".","setDisplayGridlines","(","false",")",";","sheet",".","setDisplayRowColHeadings","(","false",")",";","sheet",".","setDisplayFormulas","(","true",")",";","sheet",".","setDisplayZeros","(","false",")",";","\n\n","try","(","Workbook","wb2","=","_testDataProvider",".","writeOutAndReadBack","(","wb1",")",")","{","sheet","=","wb2",".","getSheetAt","(","0",")",";","\n\n","assertFalse","(","sheet",".","isDisplayGridlines","(",")",")",";","assertFalse","(","sheet",".","isDisplayRowColHeadings","(",")",")",";","assertTrue","(","sheet",".","isDisplayFormulas","(",")",")",";","assertFalse","(","sheet",".","isDisplayZeros","(",")",")",";","}","}"],"docstring_tokens":["Tests","the","display","of","gridlines,","formulas,","and","rowcolheadings"],"prompt_tokens":[]}
{"code_tokens":["@Test\n","protected","void","bug35084","(",")","throws","IOException","{","try","(","Workbook","wb","=","_testDataProvider",".","createWorkbook","(",")",")","{","Sheet","s","=","wb",".","createSheet","(","\"Sheet1\"",")",";","Row","r","=","s",".","createRow","(","0",")",";","r",".","createCell","(","0",")",".","setCellValue","(","1",")",";","r",".","createCell","(","1",")",".","setCellFormula","(","\"A1*2\"",")",";","Sheet","s1","=","wb",".","cloneSheet","(","0",")",";","r","=","s1",".","getRow","(","0",")",";","//","sanity","check\n","assertEquals","(","1,","r",".","getCell","(","0",")",".","getNumericCellValue","(",")",",","0,","\"double\"",")",";","assertNotNull","(","r",".","getCell","(","1",")",")",";","assertEquals","(","\"A1*2\",","r",".","getCell","(","1",")",".","getCellFormula","(",")",",","\"formula\"",")",";","}"],"docstring_tokens":["cell","with","formula","becomes","null","on","cloning","a","sheet"],"prompt_tokens":[]}
{"code_tokens":["@Test\n","protected","void","defaultColumnStyle","(",")","throws","IOException","{","try","(","Workbook","wb","=","_testDataProvider",".","createWorkbook","(",")",")","{","CellStyle","style","=","wb",".","createCellStyle","(",")",";","Sheet","sheet","=","wb",".","createSheet","(",")",";","sheet",".","setDefaultColumnStyle","(","0,","style",")",";","assertNotNull","(","sheet",".","getColumnStyle","(","0",")",")",";","assertEquals","(","style",".","getIndex","(",")",",","sheet",".","getColumnStyle","(","0",")",".","getIndex","(",")",")",";","\n\n","Row","row","=","sheet",".","createRow","(","0",")",";","Cell","cell","=","row",".","createCell","(","0",")",";","CellStyle","style2","=","cell",".","getCellStyle","(",")",";","assertNotNull","(","style2",")",";","assertEquals","(","style",".","getIndex","(",")",",","style2",".","getIndex","(",")",",","\"style","should","match\"",")",";","}"],"docstring_tokens":["test","that","new","default","column","styles","get","applied"],"prompt_tokens":[]}
{"code_tokens":["@Test\n","void","sheetProperties","(",")","throws","IOException","{","try","(","Workbook","wb","=","_testDataProvider",".","createWorkbook","(",")",")","{","Sheet","sheet","=","wb",".","createSheet","(",")",";","\n\n","assertFalse","(","sheet",".","getHorizontallyCenter","(",")",")",";","sheet",".","setHorizontallyCenter","(","true",")",";","assertTrue","(","sheet",".","getHorizontallyCenter","(",")",")",";","sheet",".","setHorizontallyCenter","(","false",")",";","assertFalse","(","sheet",".","getHorizontallyCenter","(",")",")",";","\n\n","assertFalse","(","sheet",".","getVerticallyCenter","(",")",")",";","sheet",".","setVerticallyCenter","(","true",")",";","assertTrue","(","sheet",".","getVerticallyCenter","(",")",")",";","sheet",".","setVerticallyCenter","(","false",")",";","assertFalse","(","sheet",".","getVerticallyCenter","(",")",")",";","\n\n","assertFalse","(","sheet",".","isPrintGridlines","(",")",")",";","sheet",".","setPrintGridlines","(","true",")",";","assertTrue","(","sheet",".","isPrintGridlines","(",")",")",";","\n\n","assertFalse","(","sheet",".","isPrintRowAndColumnHeadings","(",")",")",";","sheet",".","setPrintRowAndColumnHeadings","(","true",")",";","assertTrue","(","sheet",".","isPrintRowAndColumnHeadings","(",")",")",";","\n\n","assertFalse","(","sheet",".","isDisplayFormulas","(",")",")",";","sheet",".","setDisplayFormulas","(","true",")",";","assertTrue","(","sheet",".","isDisplayFormulas","(",")",")",";","\n\n","assertTrue","(","sheet",".","isDisplayGridlines","(",")",")",";","sheet",".","setDisplayGridlines","(","false",")",";","assertFalse","(","sheet",".","isDisplayGridlines","(",")",")",";","\n\n","//TODO:","default","\"guts\"","is","different","in","HSSF","and","XSSF\n","//assertTrue","(","sheet",".","getDisplayGuts","(",")",")",";","sheet",".","setDisplayGuts","(","false",")",";","assertFalse","(","sheet",".","getDisplayGuts","(",")",")",";","\n\n","assertTrue","(","sheet",".","isDisplayRowColHeadings","(",")",")",";","sheet",".","setDisplayRowColHeadings","(","false",")",";","assertFalse","(","sheet",".","isDisplayRowColHeadings","(",")",")",";","\n\n","//TODO:","default","\"autobreaks\"","is","different","in","HSSF","and","XSSF\n","//assertTrue","(","sheet",".","getAutobreaks","(",")",")",";","sheet",".","setAutobreaks","(","false",")",";","assertFalse","(","sheet",".","getAutobreaks","(",")",")",";","\n\n","assertFalse","(","sheet",".","getScenarioProtect","(",")",")",";","\n\n","//TODO:","default","\"fit-to-page\"","is","different","in","HSSF","and","XSSF\n","//assertFalse","(","sheet",".","getFitToPage","(",")",")",";","sheet",".","setFitToPage","(","true",")",";","assertTrue","(","sheet",".","getFitToPage","(",")",")",";","sheet",".","setFitToPage","(","false",")",";","assertFalse","(","sheet",".","getFitToPage","(",")",")",";","}"],"docstring_tokens":["Test","basic","display","and","print","properties"],"prompt_tokens":[]}
{"code_tokens":["@Test\n","void","bug48325","(",")","throws","IOException","{","try","(","Workbook","wb","=","_testDataProvider",".","createWorkbook","(",")",")","{","Sheet","sheet","=","wb",".","createSheet","(","\"Test\"",")",";","trackColumnsForAutoSizingIfSXSSF","(","sheet",")",";","CreationHelper","factory","=","wb",".","getCreationHelper","(",")",";","\n\n","Row","row","=","sheet",".","createRow","(","0",")",";","Cell","cell","=","row",".","createCell","(","0",")",";","\n\n","Font","font","=","wb",".","createFont","(",")",";","RichTextString","rts","=","factory",".","createRichTextString","(","\"\"",")",";","rts",".","applyFont","(","font",")",";","cell",".","setCellValue","(","rts",")",";","\n\n","sheet",".","autoSizeColumn","(","0",")",";","\n\n","assertNotNull","(","_testDataProvider",".","writeOutAndReadBack","(","wb",")",")",";","}"],"docstring_tokens":["XSSFSheet","autoSizeColumn","on","empty","RichTextString","fails"],"prompt_tokens":[]}
{"code_tokens":["@Test\n","void","setActiveCell","(",")","throws","IOException","{","try","(","Workbook","wb1","=","_testDataProvider",".","createWorkbook","(",")",")","{","Sheet","sheet","=","wb1",".","createSheet","(",")",";","CellAddress","B42","=","new","CellAddress","(","\"B42\"",")",";","\n\n","//","active","cell","behavior","is","undefined","if","not","set",".","//","HSSFSheet","defaults","to","A1","active","cell,","while","XSSFSheet","defaults","to","null",".","CellAddress","ac","=","sheet",".","getActiveCell","(",")",";","assertTrue","(","ac","==","null","||","CellAddress",".","A1",".","equals","(","ac",")",",","\"If","not","set,","active","cell","should","default","to","null","or","A1\"",")",";","\n\n","sheet",".","setActiveCell","(","B42",")",";","\n\n","try","(","Workbook","wb2","=","_testDataProvider",".","writeOutAndReadBack","(","wb1",")",")","{","sheet","=","wb2",".","getSheetAt","(","0",")",";","assertEquals","(","B42,","sheet",".","getActiveCell","(",")",")",";","}","}"],"docstring_tokens":["Tests","that","the","setAsActiveCell","and","getActiveCell","function","pairs","work","together"],"prompt_tokens":[]}
{"code_tokens":["public","int","write","(","final","OutputStream","out,","final","int","codepage",")","throws","IOException,","WritingNotSupportedException","{","int","length","=","0",";","long","variantType","=","getType","(",")",";","\n\n","/*","Ensure","that","wide","strings","are","written","if","the","codepage","is","Unicode",".","*/\n//","if","(","codepage","==","CodePageUtil",".","CP_UNICODE","&&","variantType","==","Variant",".","VT_LPSTR",")","{","\n//","variantType","=","Variant",".","VT_LPWSTR",";","\n//","}","\n\n","if","(","variantType","==","Variant",".","VT_LPSTR","&&","codepage","!=","CodePageUtil",".","CP_UTF16",")","{","String","csStr","=","CodePageUtil",".","codepageToEncoding","(","codepage",">","0","?","codepage",":","Property",".","DEFAULT_CODEPAGE",")",";","if","(","!Charset",".","forName","(","csStr",")",".","newEncoder","(",")",".","canEncode","(","(","String",")","value",")",")","{","variantType","=","Variant",".","VT_LPWSTR",";","}","}","\n\n","LittleEndian",".","putUInt","(","variantType,","out",")",";","length","+=","LittleEndianConsts",".","INT_SIZE",";","length","+=","VariantSupport",".","write","(","out,","variantType,","getValue","(",")",",","codepage",")",";","return","length",";"],"docstring_tokens":["Writes","the","property","to","an","output","stream"],"prompt_tokens":[]}
{"code_tokens":["static","void","unCompressPAPOperation","(","ParagraphProperties","newPAP,","SprmOperation","sprm",")","{","switch","(","sprm",".","getOperation","(",")",")","{","case","0:\n","newPAP",".","setIstd","(","sprm",".","getOperand","(",")",")",";","break",";","case","0x1:\n\n","//","Used","only","for","piece","table","grpprl's","not","for","PAPX\n//","int","istdFirst","=","LittleEndian",".","getShort","(","varParam,","2",")",";","\n//","int","istdLast","=","LittleEndian",".","getShort","(","varParam,","4",")",";","\n//","if","(","(","newPAP",".","getIstd","(",")",">","istdFirst",")","||","(","newPAP",".","getIstd","(",")","<=","istdLast",")",")","\n//","{","\n//","permuteIstd","(","newPAP,","varParam,","opSize",")",";","\n//","}","break",";","case","0x2:\n","if","(","newPAP",".","getIstd","(",")","<=","9","||","newPAP",".","getIstd","(",")",">=","1",")","{","byte","paramTmp","=","(","byte",")","sprm",".","getOperand","(",")",";","newPAP",".","setIstd","(","newPAP",".","getIstd","(",")","+","paramTmp",")",";","newPAP",".","setLvl","(","(","byte",")","(","newPAP",".","getLvl","(",")","+","paramTmp",")",")",";","\n\n","if","(","(","(","paramTmp",">>","7",")","&","0x01",")","==","1",")","{","newPAP",".","setIstd","(","Math",".","max","(","newPAP",".","getIstd","(",")",",","1",")",")",";","}","else\n","{","newPAP",".","setIstd","(","Math",".","min","(","newPAP",".","getIstd","(",")",",","9",")",")",";","}","\n\n","}","break",";","case","0x3:\n","//","Physical","justification","of","the","paragraph\n","newPAP",".","setJc","(","(","byte",")","sprm",".","getOperand","(",")",")",";","break",";","case","0x4:\n","newPAP",".","setFSideBySide","(","sprm",".","getOperand","(",")","!=","0",")",";","break",";","case","0x5:\n","newPAP",".","setFKeep","(","sprm",".","getOperand","(",")","!=","0",")",";","break",";","case","0x6:\n","newPAP",".","setFKeepFollow","(","sprm",".","getOperand","(",")","!=","0",")",";","break",";","case","0x7:\n","newPAP",".","setFPageBreakBefore","(","sprm",".","getOperand","(",")","!=","0",")",";","break",";","case","0x8:\n","newPAP",".","setBrcl","(","(","byte",")","sprm",".","getOperand","(",")",")",";","break",";","case","0x9:\n","newPAP",".","setBrcp","(","(","byte",")","sprm",".","getOperand","(",")",")",";","break",";","case","0xa:\n","newPAP",".","setIlvl","(","(","byte",")","sprm",".","getOperand","(",")",")",";","break",";","case","0xb:\n","/*","sprmPIlfo","--","0x460B","*/\n","newPAP",".","setIlfo","(","sprm",".","getOperandShortSigned","(",")",")",";","break",";","case","0xc:\n","newPAP",".","setFNoLnn","(","sprm",".","getOperand","(",")","!=","0",")",";","break",";","case","0xd:\n","//","handle","tabs",".","variable","parameter",".","seperate","processing","needed\n","handleTabs","(","newPAP,","sprm",")",";","break",";","case","0xe:\n","newPAP",".","setDxaRight","(","sprm",".","getOperand","(",")",")",";","break",";","case","0xf:\n","newPAP",".","setDxaLeft","(","sprm",".","getOperand","(",")",")",";","break",";","case","0x10:\n\n","//","sprmPNest","is","only","stored","in","grpprls","linked","to","a","piece","table",".","newPAP",".","setDxaLeft","(","newPAP",".","getDxaLeft","(",")","+","sprm",".","getOperand","(",")",")",";","newPAP",".","setDxaLeft","(","Math",".","max","(","0,","newPAP",".","getDxaLeft","(",")",")",")",";","break",";","case","0x11:\n","newPAP",".","setDxaLeft1","(","sprm",".","getOperand","(",")",")",";","break",";","case","0x12:\n","newPAP",".","setLspd","(","new","LineSpacingDescriptor","(","sprm",".","getGrpprl","(",")",",","sprm",".","getGrpprlOffset","(",")",")",")",";","break",";","case","0x13:\n","newPAP",".","setDyaBefore","(","sprm",".","getOperand","(",")",")",";","break",";","case","0x14:\n","newPAP",".","setDyaAfter","(","sprm",".","getOperand","(",")",")",";","break",";","case","0x15:\n","//","fast","saved","only\n","//applySprmPChgTabs","(","newPAP,","varParam,","opSize",")",";","break",";","case","0x16:\n","//","sprmPFInTable","--","0x2416\n","newPAP",".","setFInTable","(","sprm",".","getOperand","(",")","!=","0",")",";","break",";","case","0x17:\n","newPAP",".","setFTtp","(","sprm",".","getOperand","(",")","!=","0",")",";","break",";","case","0x18:\n","newPAP",".","setDxaAbs","(","sprm",".","getOperand","(",")",")",";","break",";","case","0x19:\n","newPAP",".","setDyaAbs","(","sprm",".","getOperand","(",")",")",";","break",";","case","0x1a:\n","newPAP",".","setDxaWidth","(","sprm",".","getOperand","(",")",")",";","break",";","case","0x1b:\n","byte","param","=","(","byte",")","sprm",".","getOperand","(",")",";","//","TODO:","handle","paragraph","postioning\n","byte","pcVert","=","(","byte",")","(","(","param","&","0x0c",")",">>","2",")",";","byte","pcHorz","=","(","byte",")","(","param","&","0x03",")",";","if","(","pcVert","!=","3",")","{","newPAP",".","setPcVert","(","pcVert",")",";","}","if","(","pcHorz","!=","3",")","{","newPAP",".","setPcHorz","(","pcHorz",")",";","}","break",";","\n\n","//","BrcXXX1","is","older","Version",".","Brc","is","used\n","//","case","0x1c:\n","//","newPAP",".","setBrcTop1","(","(","short",")","param",")",";","//","break",";","//","case","0x1d:\n","//","newPAP",".","setBrcLeft1","(","(","short",")","param",")",";","//","break",";","//","case","0x1e:\n","//","newPAP",".","setBrcBottom1","(","(","short",")","param",")",";","//","break",";","//","case","0x1f:\n","//","newPAP",".","setBrcRight1","(","(","short",")","param",")",";","//","break",";","//","case","0x20:\n","//","newPAP",".","setBrcBetween1","(","(","short",")","param",")",";","//","break",";","//","case","0x21:\n","//","newPAP",".","setBrcBar1","(","(","byte",")","param",")",";","//","break",";","\n\n","case","0x22:\n","newPAP",".","setDxaFromText","(","sprm",".","getOperand","(",")",")",";","break",";","case","0x23:\n","newPAP",".","setWr","(","(","byte",")","sprm",".","getOperand","(",")",")",";","break",";","case","0x24:\n","newPAP",".","setBrcTop","(","new","BorderCode","(","sprm",".","getGrpprl","(",")",",","sprm",".","getGrpprlOffset","(",")",")",")",";","break",";","case","0x25:\n","newPAP",".","setBrcLeft","(","new","BorderCode","(","sprm",".","getGrpprl","(",")",",","sprm",".","getGrpprlOffset","(",")",")",")",";","break",";","case","0x26:\n","newPAP",".","setBrcBottom","(","new","BorderCode","(","sprm",".","getGrpprl","(",")",",","sprm",".","getGrpprlOffset","(",")",")",")",";","break",";","case","0x27:\n","newPAP",".","setBrcRight","(","new","BorderCode","(","sprm",".","getGrpprl","(",")",",","sprm",".","getGrpprlOffset","(",")",")",")",";","break",";","case","0x28:\n","newPAP",".","setBrcBetween","(","new","BorderCode","(","sprm",".","getGrpprl","(",")",",","sprm",".","getGrpprlOffset","(",")",")",")",";","break",";","case","0x29:\n","newPAP",".","setBrcBar","(","new","BorderCode","(","sprm",".","getGrpprl","(",")",",","sprm",".","getGrpprlOffset","(",")",")",")",";","break",";","case","0x2a:\n","newPAP",".","setFNoAutoHyph","(","sprm",".","getOperand","(",")","!=","0",")",";","break",";","case","0x2b:\n","newPAP",".","setDyaHeight","(","sprm",".","getOperand","(",")",")",";","break",";","case","0x2c:\n","newPAP",".","setDcs","(","new","DropCapSpecifier","(","(","short",")","sprm",".","getOperand","(",")",")",")",";","break",";","case","0x2d:\n","newPAP",".","setShd","(","new","ShadingDescriptor80","(","(","short",")","sprm",".","getOperand","(",")",")",".","toShadingDescriptor","(",")",")",";","break",";","case","0x2e:\n","newPAP",".","setDyaFromText","(","sprm",".","getOperand","(",")",")",";","break",";","case","0x2f:\n","newPAP",".","setDxaFromText","(","sprm",".","getOperand","(",")",")",";","break",";","case","0x30:\n","newPAP",".","setFLocked","(","sprm",".","getOperand","(",")","!=","0",")",";","break",";","case","0x31:\n","newPAP",".","setFWidowControl","(","sprm",".","getOperand","(",")","!=","0",")",";","break",";","case","0x33:\n","newPAP",".","setFKinsoku","(","sprm",".","getOperand","(",")","!=","0",")",";","break",";","case","0x34:\n","newPAP",".","setFWordWrap","(","sprm",".","getOperand","(",")","!=","0",")",";","break",";","case","0x35:\n","newPAP",".","setFOverflowPunct","(","sprm",".","getOperand","(",")","!=","0",")",";","break",";","case","0x36:\n","newPAP",".","setFTopLinePunct","(","sprm",".","getOperand","(",")","!=","0",")",";","break",";","case","0x37:\n","newPAP",".","setFAutoSpaceDE","(","sprm",".","getOperand","(",")","!=","0",")",";","break",";","case","0x38:\n","newPAP",".","setFAutoSpaceDN","(","sprm",".","getOperand","(",")","!=","0",")",";","break",";","case","0x39:\n","newPAP",".","setWAlignFont","(","sprm",".","getOperand","(",")",")",";","break",";","case","0x3a:\n","newPAP",".","setFontAlign","(","(","short",")","sprm",".","getOperand","(",")",")",";","break",";","case","0x3b:\n","//obsolete\n","break",";","case","0x3e:","{","//","TODO:","REMOVEME\n","byte[]","buf","=","Arrays",".","copyOfRange","(","sprm",".","getGrpprl","(",")",",","sprm",".","getGrpprlOffset","(",")",",","sprm",".","getGrpprlOffset","(",")","+","(","sprm",".","size","(",")","-","3",")",")",";","newPAP",".","setAnld","(","buf",")",";","break",";","}","case","0x3f:\n","//don't","really","need","this",".","spec","is","confusing","regarding","this\n","//sprm\n","byte[]","varParam","=","sprm",".","getGrpprl","(",")",";","int","offset","=","sprm",".","getGrpprlOffset","(",")",";","newPAP",".","setFPropRMark","(","varParam[offset]","!=","0",")",";","newPAP",".","setIbstPropRMark","(","LittleEndian",".","getShort","(","varParam,","offset","+","1",")",")",";","newPAP",".","setDttmPropRMark","(","new","DateAndTime","(","varParam,","offset","+","3",")",")",";","break",";","case","0x40:\n","//","This","condition","commented","out,","as","Word","seems","to","set","outline","levels","even","for\n","//","paragraph","with","other","styles","than","Heading","1",".",".","9,","even","though","specification\n","//","does","not","say","so",".","See","bug","49820","for","discussion",".","//if","(","newPAP",".","getIstd","(",")","<","1","&&","newPAP",".","getIstd","(",")",">","9",")","{","newPAP",".","setLvl","(","(","byte",")","sprm",".","getOperand","(",")",")",";","}","break",";","case","0x41:\n","//","sprmPFBiDi\n","newPAP",".","setFBiDi","(","sprm",".","getOperand","(",")","!=","0",")",";","break",";","case","0x43:\n\n","//pap",".","fNumRMIns\n","newPAP",".","setFNumRMIns","(","sprm",".","getOperand","(",")","!=","0",")",";","break",";","case","0x44:\n\n","//undocumented\n","break",";","case","0x45:\n","if","(","sprm",".","getSizeCode","(",")","==","6",")","{","byte[]","buf","=","new","byte[sprm",".","size","(",")","-","3]",";","System",".","arraycopy","(","buf,","0,","sprm",".","getGrpprl","(",")",",","sprm",".","getGrpprlOffset","(",")",",","buf",".","length",")",";","newPAP",".","setNumrm","(","buf",")",";","}","else\n","{","/**@todo","handle","large","PAPX","from","data","stream*/\n","}","break",";","\n\n","case","0x47:\n","newPAP",".","setFUsePgsuSettings","(","sprm",".","getOperand","(",")","!=","0",")",";","break",";","case","0x48:\n","newPAP",".","setFAdjustRight","(","sprm",".","getOperand","(",")","!=","0",")",";","break",";","case","0x49:\n","//","sprmPItap","--","0x6649\n","newPAP",".","setItap","(","sprm",".","getOperand","(",")",")",";","break",";","case","0x4a:\n","//","sprmPDtap","--","0x664a\n","newPAP",".","setItap","(","(","byte",")","(","newPAP",".","getItap","(",")","+","sprm",".","getOperand","(",")",")",")",";","break",";","case","0x4b:\n","//","sprmPFInnerTableCell","--","0x244b\n","newPAP",".","setFInnerTableCell","(","sprm",".","getOperand","(",")","!=","0",")",";","break",";","case","0x4c:\n","//","sprmPFInnerTtp","--","0x244c\n","newPAP",".","setFTtpEmbedded","(","sprm",".","getOperand","(",")","!=","0",")",";","break",";","case","0x4d:\n","//","sprmPShd","--","0xc64d\n","ShadingDescriptor","shadingDescriptor","=","new","ShadingDescriptor","(","sprm",".","getGrpprl","(",")",",","3",")",";","newPAP",".","setShading","(","shadingDescriptor",")",";","break",";","case","0x5d:\n","//","sprmPDxaRight","--","0x845d\n","newPAP",".","setDxaRight","(","sprm",".","getOperand","(",")",")",";","break",";","case","0x5e:\n","//","sprmPDxaLeft","--","0x845e\n","newPAP",".","setDxaLeft","(","sprm",".","getOperand","(",")",")",";","break",";","case","0x60:\n","//","sprmPDxaLeft1","--","0x8460\n","newPAP",".","setDxaLeft1","(","sprm",".","getOperand","(",")",")",";","break",";","case","0x61:\n","//","sprmPJc\n","newPAP",".","setJustificationLogical","(","(","byte",")","sprm",".","getOperand","(",")",")",";","break",";","case","0x67:\n","//","sprmPRsid","--","0x6467\n","newPAP",".","setRsid","(","sprm",".","getOperand","(",")",")",";","break",";","default:\n","LOG",".","atDebug","(",")",".","log","(","\"Unknown","PAP","sprm","ignored:","{","}","\",","sprm",")",";","break",";","}"],"docstring_tokens":["Performs","an","operation","on","a","ParagraphProperties","object"],"prompt_tokens":[]}
{"code_tokens":["private","void","findInterestingChildren","(",")","{","\n\n","//","First","child","should","be","the","ExMediaAtom\n","Record","child","=","_children[0]",";","if","(","child","instanceof","ExMediaAtom",")","{","mediaAtom","=","(","ExMediaAtom",")","child",";","}","else","{","LOG",".","atError","(",")",".","log","(","\"First","child","record","wasn't","a","ExMediaAtom,","was","of","type","{","}","\",","box","(","child",".","getRecordType","(",")",")",")",";","}","child","=","_children[1]",";","if","(","child","instanceof","CString",")","{","pathAtom","=","(","CString",")","child",";","}","else","{","LOG",".","atError","(",")",".","log","(","\"Second","child","record","wasn't","a","CString,","was","of","type","{","}","\",","box","(","child",".","getRecordType","(",")",")",")",";","}"],"docstring_tokens":["Go","through","our","child","records,","picking","out","the","ones","that","are","interesting,","and","saving","those","for","use","by","the","easy","helper","methods"],"prompt_tokens":[]}
{"code_tokens":["public","void","writeOut","(","OutputStream","out",")","throws","IOException","{","writeOut","(","_header[0],_header[1],getRecordType","(",")",",_children,out",")",";"],"docstring_tokens":["Write","the","contents","of","the","record","back,","so","it","can","be","written","to","disk"],"prompt_tokens":[]}
{"code_tokens":["@Removal","(","version","=","\"6",".","0",".","0\"",")","//make","this","protected","or","private","in","POI","6",".","0",".","0","-","no","need","for","this","to","be","public\n","public","Writer","createWriter","(","File","fd",")","throws","IOException","{","FileOutputStream","fos","=","new","FileOutputStream","(","fd",")",";","OutputStream","decorated",";","try","{","decorated","=","decorateOutputStream","(","fos",")",";","}","catch","(","final","IOException","e",")","{","fos",".","close","(",")",";","throw","e",";","}","return","new","BufferedWriter","(","new","OutputStreamWriter","(","decorated,","StandardCharsets",".","UTF_8",")",")",";"],"docstring_tokens":["Create","a","writer","for","the","sheet","data"],"prompt_tokens":[]}
{"code_tokens":["public","void","close","(",")","throws","IOException","{","//","this","would","break","writing","the","same","document","multiple","times:","_out",".","flush","(",")",";","_out",".","close","(",")",";"],"docstring_tokens":["flush","and","close","the","temp","data","writer"],"prompt_tokens":[]}
{"code_tokens":["boolean","dispose","(",")","throws","IOException","{","final","boolean","ret",";","try","{","_out",".","close","(",")",";","}","finally","{","ret","=","_fd",".","delete","(",")",";","}","return","ret",";"],"docstring_tokens":["Deletes","the","temporary","file","that","backed","this","sheet","on","disk"],"prompt_tokens":[]}
{"code_tokens":["\n\n","public","short","getBackup","(",")","{","return","field_1_backup",";"],"docstring_tokens":["get","the","backup","flag"],"prompt_tokens":[]}
{"code_tokens":["public","byte","getHorizontalAlignment","(",")","{","return","field_1_horizontalAlignment",";"],"docstring_tokens":["Get","the","horizontal","alignment","field","for","the","Text","record"],"prompt_tokens":[]}
{"code_tokens":["public","void","setHorizontalAlignment","(","byte","field_1_horizontalAlignment",")","{","this",".","field_1_horizontalAlignment","=","field_1_horizontalAlignment",";"],"docstring_tokens":["Set","the","horizontal","alignment","field","for","the","Text","record"],"prompt_tokens":[]}
{"code_tokens":["public","byte","getVerticalAlignment","(",")","{","return","field_2_verticalAlignment",";"],"docstring_tokens":["Get","the","vertical","alignment","field","for","the","Text","record"],"prompt_tokens":[]}
{"code_tokens":["public","void","setVerticalAlignment","(","byte","field_2_verticalAlignment",")","{","this",".","field_2_verticalAlignment","=","field_2_verticalAlignment",";"],"docstring_tokens":["Set","the","vertical","alignment","field","for","the","Text","record"],"prompt_tokens":[]}
{"code_tokens":["public","short","getDisplayMode","(",")","{","return","field_3_displayMode",";"],"docstring_tokens":["Get","the","display","mode","field","for","the","Text","record"],"prompt_tokens":[]}
{"code_tokens":["public","void","setDisplayMode","(","short","field_3_displayMode",")","{","this",".","field_3_displayMode","=","field_3_displayMode",";"],"docstring_tokens":["Set","the","display","mode","field","for","the","Text","record"],"prompt_tokens":[]}
{"code_tokens":["public","int","getRgbColor","(",")","{","return","field_4_rgbColor",";"],"docstring_tokens":["Get","the","rgbColor","field","for","the","Text","record"],"prompt_tokens":[]}
{"code_tokens":["public","void","setRgbColor","(","int","field_4_rgbColor",")","{","this",".","field_4_rgbColor","=","field_4_rgbColor",";"],"docstring_tokens":["Set","the","rgbColor","field","for","the","Text","record"],"prompt_tokens":[]}
{"code_tokens":["public","int","getX","(",")","{","return","field_5_x",";"],"docstring_tokens":["Get","the","x","field","for","the","Text","record"],"prompt_tokens":[]}
{"code_tokens":["public","void","setX","(","int","field_5_x",")","{","this",".","field_5_x","=","field_5_x",";"],"docstring_tokens":["Set","the","x","field","for","the","Text","record"],"prompt_tokens":[]}
{"code_tokens":["public","int","getY","(",")","{","return","field_6_y",";"],"docstring_tokens":["Get","the","y","field","for","the","Text","record"],"prompt_tokens":[]}
{"code_tokens":["public","void","setY","(","int","field_6_y",")","{","this",".","field_6_y","=","field_6_y",";"],"docstring_tokens":["Set","the","y","field","for","the","Text","record"],"prompt_tokens":[]}
{"code_tokens":["public","int","getWidth","(",")","{","return","field_7_width",";"],"docstring_tokens":["Get","the","width","field","for","the","Text","record"],"prompt_tokens":[]}
{"code_tokens":["public","void","setWidth","(","int","field_7_width",")","{","this",".","field_7_width","=","field_7_width",";"],"docstring_tokens":["Set","the","width","field","for","the","Text","record"],"prompt_tokens":[]}
{"code_tokens":["public","int","getHeight","(",")","{","return","field_8_height",";"],"docstring_tokens":["Get","the","height","field","for","the","Text","record"],"prompt_tokens":[]}
{"code_tokens":["public","void","setHeight","(","int","field_8_height",")","{","this",".","field_8_height","=","field_8_height",";"],"docstring_tokens":["Set","the","height","field","for","the","Text","record"],"prompt_tokens":[]}
{"code_tokens":["public","short","getOptions1","(",")","{","return","field_9_options1",";"],"docstring_tokens":["Get","the","options1","field","for","the","Text","record"],"prompt_tokens":[]}
{"code_tokens":["public","void","setOptions1","(","short","field_9_options1",")","{","this",".","field_9_options1","=","field_9_options1",";"],"docstring_tokens":["Set","the","options1","field","for","the","Text","record"],"prompt_tokens":[]}
{"code_tokens":["public","short","getIndexOfColorValue","(",")","{","return","field_10_indexOfColorValue",";"],"docstring_tokens":["Get","the","index","of","color","value","field","for","the","Text","record"],"prompt_tokens":[]}
{"code_tokens":["public","void","setIndexOfColorValue","(","short","field_10_indexOfColorValue",")","{","this",".","field_10_indexOfColorValue","=","field_10_indexOfColorValue",";"],"docstring_tokens":["Set","the","index","of","color","value","field","for","the","Text","record"],"prompt_tokens":[]}
{"code_tokens":["public","short","getOptions2","(",")","{","return","field_11_options2",";"],"docstring_tokens":["Get","the","options2","field","for","the","Text","record"],"prompt_tokens":[]}
{"code_tokens":["public","void","setOptions2","(","short","field_11_options2",")","{","this",".","field_11_options2","=","field_11_options2",";"],"docstring_tokens":["Set","the","options2","field","for","the","Text","record"],"prompt_tokens":[]}
{"code_tokens":["public","short","getTextRotation","(",")","{","return","field_12_textRotation",";"],"docstring_tokens":["Get","the","text","rotation","field","for","the","Text","record"],"prompt_tokens":[]}
{"code_tokens":["public","void","setTextRotation","(","short","field_12_textRotation",")","{","this",".","field_12_textRotation","=","field_12_textRotation",";"],"docstring_tokens":["Set","the","text","rotation","field","for","the","Text","record"],"prompt_tokens":[]}
{"code_tokens":["public","boolean","isShowValue","(",")","{","return","showValue",".","isSet","(","field_9_options1",")",";"],"docstring_tokens":["false","=","text","is","category","label"],"prompt_tokens":[]}
{"code_tokens":["public","boolean","isVertical","(",")","{","return","vertical",".","isSet","(","field_9_options1",")",";"],"docstring_tokens":["true","=","text","is","vertical"],"prompt_tokens":[]}
{"code_tokens":["public","void","setRotation","(","short","value",")","{","field_9_options1","=","rotation",".","setShortValue","(","field_9_options1,","value",")",";"],"docstring_tokens":["Sets","the","rotation","field","value"],"prompt_tokens":[]}
{"code_tokens":["public","void","setDataLabelPlacement","(","short","value",")","{","field_11_options2","=","dataLabelPlacement",".","setShortValue","(","field_11_options2,","value",")",";"],"docstring_tokens":["Sets","the","data","label","placement","field","value"],"prompt_tokens":[]}
{"code_tokens":["protected","List<EvaluationConditionalFormatRule>","getRules","(","Sheet","sheet",")","{","final","String","sheetName","=","sheet",".","getSheetName","(",")",";","List<EvaluationConditionalFormatRule>","rules","=","formats",".","get","(","sheetName",")",";","if","(","rules","==","null",")","{","if","(","formats",".","containsKey","(","sheetName",")",")","{","return","Collections",".","emptyList","(",")",";","}","final","SheetConditionalFormatting","scf","=","sheet",".","getSheetConditionalFormatting","(",")",";","final","int","count","=","scf",".","getNumConditionalFormattings","(",")",";","rules","=","new","ArrayList<>","(","count",")",";","formats",".","put","(","sheetName,","rules",")",";","for","(","int","i=0",";","i","<","count",";","i++",")","{","ConditionalFormatting","f","=","scf",".","getConditionalFormattingAt","(","i",")",";","//optimization,","as","this","may","be","expensive","for","lots","of","ranges\n","final","CellRangeAddress[]","regions","=","f",".","getFormattingRanges","(",")",";","for","(","int","r=0",";","r","<","f",".","getNumberOfRules","(",")",";","r++",")","{","ConditionalFormattingRule","rule","=","f",".","getRule","(","r",")",";","rules",".","add","(","new","EvaluationConditionalFormatRule","(","workbookEvaluator,","sheet,","f,","i,","rule,","r,","regions",")",")",";","}","}","//","need","them","in","formatting","and","priority","order","so","logic","works","right\n","Collections",".","sort","(","rules",")",";","}","return","Collections",".","unmodifiableList","(","rules",")",";"],"docstring_tokens":["lazy","load","by","sheet","since","reading","can","be","expensive"],"prompt_tokens":[]}
{"code_tokens":["public","void","draw","(","Graphics2D","graphics",")","{","\n\n","String","textContent","=","getTextContent","(",")",";","if","(","textContent",".","length","(",")","==","0",")","{","return",";","}","\n\n","Rectangle2D",".","Double","bounds","=","getTextBounds","(",")",";","\n\n","String[]","lines","=","textContent",".","trim","(",")",".","split","(","\"\\n\"",")",";","FontRenderContext","frc","=","graphics",".","getFontRenderContext","(",")",";","Font","font","=","graphics",".","getFont","(",")",";","\n\n","AffineTransform","oldTr","=","graphics",".","getTransform","(",")",";","\n\n","//","visio","is","in","flipped","coordinates,","so","translate","the","text","to","be","in","the\n","//","right","place\n","Boolean","flipX","=","_parent",".","getFlipX","(",")",";","Boolean","flipY","=","_parent",".","getFlipY","(",")",";","\n\n","if","(","flipY","==","null","||","!_parent",".","getFlipY","(",")",")","{","graphics",".","translate","(","bounds",".","x,","bounds",".","y",")",";","graphics",".","scale","(","1,","-1",")",";","graphics",".","translate","(","0,","-bounds",".","height\n","+","graphics",".","getFontMetrics","(",")",".","getMaxCharBounds","(","graphics",")",".","getHeight","(",")",")",";","}","\n\n","if","(","flipX","!=","null","&&","_parent",".","getFlipX","(",")",")","{","graphics",".","scale","(","-1,","1",")",";","graphics",".","translate","(","-bounds",".","width,","0",")",";","}","\n\n","Double","txtAngle","=","_parent",".","getTxtAngle","(",")",";","if","(","txtAngle","!=","null","&&","Math",".","abs","(","txtAngle",")",">","0",".","01",")","{","graphics",".","rotate","(","txtAngle",")",";","}","\n\n","float","nextY","=","0",";","for","(","String","line",":","lines",")","{","\n\n","if","(","line",".","length","(",")","==","0",")","{","continue",";","}","\n\n","TextLayout","layout","=","new","TextLayout","(","line,","font,","frc",")",";","\n\n","if","(","layout",".","isLeftToRight","(",")",")","{","layout",".","draw","(","graphics,","0,","nextY",")",";","}","else","{","layout",".","draw","(","graphics,\n","(","float",")","(","bounds",".","width","-","layout",".","getAdvance","(",")",")",",","nextY",")",";","}","\n\n","nextY","+=","layout",".","getAscent","(",")","+","layout",".","getDescent","(",")","+","layout",".","getLeading","(",")",";","}","\n\n","graphics",".","setTransform","(","oldTr",")",";"],"docstring_tokens":["When","calling","this","to","draw","text,","it","assumes","graphics","is","set","properly","to","draw","in","the","right","style"],"prompt_tokens":[]}
{"code_tokens":["\n\n","public","int","hashCode","(",")","{","if","(","hashcode","==","0",")","{","hashcode","=","path",".","hashCode","(",")","^","name",".","hashCode","(",")",";","}","return","hashcode",";"],"docstring_tokens":["calculate","and","return","the","hashcode"],"prompt_tokens":[]}
{"code_tokens":["public","XSLFSlide","createSlide","(","XSLFSlideLayout","layout",")","{","CTSlideIdList","slideList","=","_presentation",".","isSetSldIdLst","(",")","?","_presentation",".","getSldIdLst","(",")",":","_presentation",".","addNewSldIdLst","(",")",";","\n\n","@SuppressWarnings","(","\"deprecation\"",")","OptionalLong","maxId","=","Stream",".","of","(","slideList",".","getSldIdArray","(",")",")",".","mapToLong","(","CTSlideIdListEntry::getId",")",".","max","(",")",";","\n\n","final","XSLFRelation","relationType","=","XSLFRelation",".","SLIDE",";","final","int","slideNumber","=","(","int",")","(","Math",".","max","(","maxId",".","orElse","(","0",")",",255",")","+1",")",";","final","int","cnt","=","findNextAvailableFileNameIndex","(","relationType",")",";","\n\n","RelationPart","rp","=","createRelationship\n","(","relationType,","XSLFFactory",".","getInstance","(",")",",","cnt,","false",")",";","XSLFSlide","slide","=","rp",".","getDocumentPart","(",")",";","\n\n","CTSlideIdListEntry","slideId","=","slideList",".","addNewSldId","(",")",";","slideId",".","setId","(","slideNumber",")",";","slideId",".","setId2","(","rp",".","getRelationship","(",")",".","getId","(",")",")",";","\n\n","layout",".","copyLayout","(","slide",")",";","slide",".","getPackagePart","(",")",".","clearRelationships","(",")",";","slide",".","addRelation","(","null,","XSLFRelation",".","SLIDE_LAYOUT,","layout",")",";","\n\n","_slides",".","add","(","slide",")",";","return","slide",";"],"docstring_tokens":["Create","a","slide","and","initialize","it","from","the","specified","layout"],"prompt_tokens":[]}
{"code_tokens":["public","XSLFNotes","getNotesSlide","(","XSLFSlide","slide",")","{","\n\n","XSLFNotes","notesSlide","=","slide",".","getNotes","(",")",";","if","(","notesSlide","==","null",")","{","notesSlide","=","createNotesSlide","(","slide",")",";","}","\n\n","return","notesSlide",";"],"docstring_tokens":["Return","notes","slide","for","the","specified","slide","or","create","new","if","it","does","not","exist","yet"],"prompt_tokens":[]}
{"code_tokens":["public","XSLFSlideLayout","findLayout","(","String","name",")","{","for","(","XSLFSlideMaster","master",":","getSlideMasters","(",")",")","{","XSLFSlideLayout","layout","=","master",".","getLayout","(","name",")",";","if","(","layout","!=","null",")","{","return","layout",";","}","}","return","null",";"],"docstring_tokens":["Scan","the","master","slides","for","the","first","slide","layout","with","the","given","name"],"prompt_tokens":[]}
{"code_tokens":["String","importBlip","(","String","blipId,","POIXMLDocumentPart","parent,","POIXMLDocumentPart","target",")","{","OPCPackage","targetPackage","=","target",".","getPackagePart","(",")",".","getPackage","(",")",";","if","(","targetPackage","!=","getPackage","(",")",")","{","throw","new","RuntimeException","(","\"the","target","document","part","is","not","a","child","of","this","package\"",")",";","}","final","POIXMLDocumentPart","docPart","=","parent",".","getRelationPartById","(","blipId",")",".","getDocumentPart","(",")",";","XSLFPictureData","parData",";","if","(","docPart","instanceof","XSLFPictureData",")","{","parData","=","(","XSLFPictureData",")","docPart",";","}","else","{","throw","new","RuntimeException","(","\"cannot","import","blip","\"","+","blipId","+","\"","-","its","document","part","is","not","XSLFPictureData\"",")",";","}","final","XSLFPictureData","pictureData",";","if","(","targetPackage","==","parent",".","getPackagePart","(",")",".","getPackage","(",")",")","{","//","handle","ref","counter","correct,","if","the","parent","document","is","the","same","as","this\n","pictureData","=","parData",";","}","else","{","pictureData","=","addPicture","(","parData",".","getData","(",")",",","parData",".","getType","(",")",")",";","}","\n\n","RelationPart","rp","=","target",".","addRelation","(","null,","XSLFRelation",".","IMAGES,","pictureData",")",";","return","rp",".","getRelationship","(",")",".","getId","(",")",";"],"docstring_tokens":["Import","a","picture","data","from","a","document","part"],"prompt_tokens":[]}
{"code_tokens":["void","importPart","(","PackageRelationship","srcRel,","PackagePart","srcPart",")","{","PackagePart","destPP","=","getPackagePart","(",")",";","PackagePartName","srcPPName","=","srcPart",".","getPartName","(",")",";","\n\n","OPCPackage","pkg","=","destPP",".","getPackage","(",")",";","if","(","pkg",".","containPart","(","srcPPName",")",")","{","//","already","exists\n","return",";","}","\n\n","destPP",".","addRelationship","(","srcPPName,","TargetMode",".","INTERNAL,","srcRel",".","getRelationshipType","(",")",")",";","\n\n","PackagePart","part","=","pkg",".","createPart","(","srcPPName,","srcPart",".","getContentType","(",")",")",";","try","(","OutputStream","out","=","part",".","getOutputStream","(",")",";","InputStream","is","=","srcPart",".","getInputStream","(",")",";",")","{","IOUtils",".","copy","(","is,","out",")",";","}","catch","(","IOException","e",")","{","throw","new","POIXMLException","(","e",")",";","}"],"docstring_tokens":["Import","a","package","part","into","this","sheet"],"prompt_tokens":[]}
{"code_tokens":["void","removePictureRelation","(","XSLFPictureShape","pictureShape",")","{","int","numberOfRelations","=","0",";","String","targetBlipId","=","pictureShape",".","getBlipId","(",")",";","for","(","XSLFShape","shape",":","pictureShape",".","getSheet","(",")",".","getShapes","(",")",")","{","if","(","shape","instanceof","XSLFPictureShape",")","{","XSLFPictureShape","currentPictureShape","=","(","(","XSLFPictureShape",")","shape",")",";","String","currentBlipId","=","currentPictureShape",".","getBlipId","(",")",";","if","(","currentBlipId","!=","null","&&","currentBlipId",".","equals","(","targetBlipId",")",")","{","numberOfRelations++",";","}","}","}","if","(","numberOfRelations","<=","1",")","{","removeRelation","(","pictureShape",".","getBlipId","(",")",")",";","}"],"docstring_tokens":["Helper","method","for","sheet","and","group","shapes"],"prompt_tokens":[]}
{"code_tokens":["public","void","addChart","(","XSLFChart","chart,","Rectangle2D","rect2D",")","{","RelationPart","rp","=","addRelation","(","null,","XSLFRelation",".","CHART,","chart",")",";","getDrawing","(",")",".","addChart","(","rp",".","getRelationship","(",")",".","getId","(",")",",","rect2D",")",";"],"docstring_tokens":["this","method","will","add","chart","into","slide","with","given","height,","width,","x","and","y"],"prompt_tokens":[]}
{"code_tokens":["@Override\n","public","int","serialize","(","final","int","offset,","final","byte[]","data",")","{","//","Determine","buffer","size\n","List","<EscherRecord>records","=","getEscherRecords","(",")",";","int","size","=","getEscherRecordSize","(","records",")",";","byte[]","buffer","=","new","byte[size]",";","\n\n","//","Serialize","escher","records","into","one","big","data","structure","and","keep","note","of","ending","offsets",".","final","List","<Integer>spEndingOffsets","=","new","ArrayList<>","(",")",";","final","List","<EscherRecord>","shapes","=","new","ArrayList<>","(",")",";","int","pos","=","0",";","for","(","EscherRecord","record",":","records",")","{","pos","+=","record",".","serialize","(","pos,","buffer,","new","EscherSerializationListener","(",")","{","@Override\n","public","void","beforeRecordSerialize","(","int","offset,","short","recordId,","EscherRecord","record",")","{","}","\n\n","@Override\n","public","void","afterRecordSerialize","(","int","offset,","short","recordId,","int","size,","EscherRecord","record",")","{","if","(","recordId","==","EscherClientDataRecord",".","RECORD_ID","||","recordId","==","EscherTextboxRecord",".","RECORD_ID",")","{","spEndingOffsets",".","add","(","offset",")",";","shapes",".","add","(","record",")",";","}","}","}",")",";","}","shapes",".","add","(","0,","null",")",";","spEndingOffsets",".","add","(","0,","0",")",";","\n\n","//","Split","escher","records","into","separate","MSODRAWING","and","OBJ,","TXO","records",".","(","We","don't","break","on\n","//","the","first","one","because","it's","the","patriach",")",".","pos","=","offset",";","int","writtenEscherBytes","=","0",";","boolean","isFirst","=","true",";","int","endOffset","=","0",";","for","(","int","i","=","1",";","i","<","shapes",".","size","(",")",";","i++",")","{","int","startOffset","=","endOffset",";","endOffset","=","spEndingOffsets",".","get","(","i",")",";","\n\n","byte[]","drawingData","=","Arrays",".","copyOfRange","(","buffer,","startOffset,","endOffset",")",";","pos","+=","writeDataIntoDrawingRecord","(","drawingData,","writtenEscherBytes,","pos,","data,","isFirst",")",";","\n\n","writtenEscherBytes","+=","drawingData",".","length",";","\n\n","//","Write","the","matching","OBJ","record\n","Record","obj","=","shapeToObj",".","get","(","shapes",".","get","(","i",")",")",";","pos","+=","obj",".","serialize","(","pos,","data",")",";","\n\n","isFirst","=","false",";","}","\n\n","if","(","endOffset","<","buffer",".","length","-","1",")","{","byte[]","drawingData","=","Arrays",".","copyOfRange","(","buffer,","endOffset,","buffer",".","length",")",";","pos","+=","writeDataIntoDrawingRecord","(","drawingData,","writtenEscherBytes,","pos,","data,","isFirst",")",";","}","\n\n","for","(","NoteRecord","noteRecord",":","tailRec",".","values","(",")",")","{","pos","+=","noteRecord",".","serialize","(","pos,","data",")",";","}","\n\n","int","bytesWritten","=","pos","-","offset",";","if","(","bytesWritten","!=","getRecordSize","(",")",")","{","throw","new","RecordFormatException","(","bytesWritten","+","\"","bytes","written","but","getRecordSize","(",")","reports","\"","+","getRecordSize","(",")",")",";","}","return","bytesWritten",";"],"docstring_tokens":["Serializes","this","aggregate","to","a","byte","array"],"prompt_tokens":[]}
{"code_tokens":["public","void","associateShapeToObjRecord","(","EscherRecord","r,","Record","objRecord",")","{","shapeToObj",".","put","(","r,","objRecord",")",";"],"docstring_tokens":["Associates","an","escher","record","to","an","OBJ","record","or","a","TXO","record"],"prompt_tokens":[]}
{"code_tokens":["public","void","setDgId","(","short","dgId",")","{","EscherContainerRecord","dgContainer","=","getEscherContainer","(",")",";","EscherDgRecord","dg","=","dgContainer",".","getChildById","(","EscherDgRecord",".","RECORD_ID",")",";","if","(","dg","!=","null",")","{","dg",".","setOptions","(","(","short",")","(","dgId","<<","4",")",")",";","}"],"docstring_tokens":["EscherDgContainer","-EscherSpgrContainer","-EscherDgRecord","-","set","id","for","this","record","set","id","for","DgRecord","of","DgContainer"],"prompt_tokens":[]}
{"code_tokens":["\n\n","public","DocumentEntry","createDocument","(","final","InputStream","stream,\n","final","String","name",")","throws","IOException","{","return","getRoot","(",")",".","createDocument","(","name,","stream",")",";"],"docstring_tokens":["Create","a","new","document","to","be","added","to","the","root","directory"],"prompt_tokens":[]}
{"code_tokens":["public","DocumentEntry","createDocument","(","final","String","name,","final","int","size,","final","POIFSWriterListener","writer",")","throws","IOException","{","return","getRoot","(",")",".","createDocument","(","name,","size,","writer",")",";"],"docstring_tokens":["create","a","new","DocumentEntry","in","the","root","entry;","the","data","will","be","provided","later"],"prompt_tokens":[]}
{"code_tokens":["\n\n","public","DirectoryEntry","createDirectory","(","final","String","name",")","throws","IOException","{","return","getRoot","(",")",".","createDirectory","(","name",")",";"],"docstring_tokens":["create","a","new","DirectoryEntry","in","the","root","directory"],"prompt_tokens":[]}
{"code_tokens":["@SuppressWarnings","(","\"UnusedReturnValue\"",")","public","DocumentEntry","createOrUpdateDocument","(","final","InputStream","stream,","final","String","name",")","throws","IOException","{","return","getRoot","(",")",".","createOrUpdateDocument","(","name,","stream",")",";"],"docstring_tokens":["Set","the","contents","of","a","document","in","the","root","directory,","creating","if","needed,","otherwise","updating"],"prompt_tokens":[]}
{"code_tokens":["public","void","writeFilesystem","(",")","throws","IOException","{","if","(","!","(","_data","instanceof","FileBackedDataSource",")",")","{","throw","new","IllegalArgumentException","(","\"POIFS","opened","from","an","inputstream,","so","writeFilesystem","(",")","may","\"","+\n","\"not","be","called",".","Use","writeFilesystem","(","OutputStream",")","instead\"\n",")",";","}","if","(","!","(","(","FileBackedDataSource",")","_data",")",".","isWriteable","(",")",")","{","throw","new","IllegalArgumentException","(","\"POIFS","opened","in","read","only","mode,","so","writeFilesystem","(",")","may","\"","+\n","\"not","be","called",".","Open","the","FileSystem","in","read-write","mode","first\"\n",")",";","}","syncWithDataSource","(",")",";"],"docstring_tokens":["Write","the","filesystem","out","to","the","open","file"],"prompt_tokens":[]}
{"code_tokens":["private","void","syncWithDataSource","(",")","throws","IOException","{","//","Mini","Stream","+","SBATs","first,","as","mini-stream","details","have\n","//","to","be","stored","in","the","Root","Property\n","_mini_store",".","syncWithDataSource","(",")",";","\n\n","//","Properties\n","POIFSStream","propStream","=","new","POIFSStream","(","this,","_header",".","getPropertyStart","(",")",")",";","_property_table",".","preWrite","(",")",";","_property_table",".","write","(","propStream",")",";","//","_header",".","setPropertyStart","has","been","updated","on","write",".",".",".","\n\n","//","HeaderBlock\n","UnsynchronizedByteArrayOutputStream","baos","=","new","UnsynchronizedByteArrayOutputStream","(","_header",".","getBigBlockSize","(",")",".","getBigBlockSize","(",")",")",";","_header",".","writeData","(","baos",")",";","getBlockAt","(","-1",")",".","put","(","baos",".","toByteArray","(",")",")",";","\n\n\n","//","BATs\n","for","(","BATBlock","bat",":","_bat_blocks",")","{","ByteBuffer","block","=","getBlockAt","(","bat",".","getOurBlockIndex","(",")",")",";","bat",".","writeData","(","block",")",";","}","//","XBats\n","for","(","BATBlock","bat",":","_xbat_blocks",")","{","ByteBuffer","block","=","getBlockAt","(","bat",".","getOurBlockIndex","(",")",")",";","bat",".","writeData","(","block",")",";","}"],"docstring_tokens":["Has","our","in-memory","objects","write","their","state","to","their","backing","blocks"],"prompt_tokens":[]}
{"code_tokens":["public","static","void","main","(","String[]","args",")","throws","IOException","{","if","(","args",".","length","!=","2",")","{","System",".","err",".","println","(","\"two","arguments","required:","input","filename","and","output","filename\"",")",";","System",".","exit","(","1",")",";","}","\n\n","try","(","FileInputStream","istream","=","new","FileInputStream","(","args[0]",")",")","{","try","(","FileOutputStream","ostream","=","new","FileOutputStream","(","args[1]",")",")","{","try","(","POIFSFileSystem","fs","=","new","POIFSFileSystem","(","istream",")",")","{","fs",".","writeFilesystem","(","ostream",")",";","}","}","}"],"docstring_tokens":["read","in","a","file","and","write","it","back","out","again"],"prompt_tokens":[]}
{"code_tokens":["public","DirectoryNode","getRoot","(",")","{","if","(","_root","==","null",")","{","_root","=","new","DirectoryNode","(","_property_table",".","getRoot","(",")",",","this,","null",")",";","}","return","_root",";"],"docstring_tokens":["Get","the","root","entry"],"prompt_tokens":[]}
{"code_tokens":["\n\n","@Override\n","public","boolean","preferArray","(",")","{","return","getRoot","(",")",".","preferArray","(",")",";"],"docstring_tokens":["Give","viewers","a","hint","as","to","whether","to","call","getViewableArray","or","getViewableIterator"],"prompt_tokens":[]}
{"code_tokens":["@Override\n","public","void","setSelectedTab","(","int","index",")","{","\n\n","validateSheetIndex","(","index",")",";","int","nSheets","=","_sheets",".","size","(",")",";","for","(","int","i","=","0",";","i","<","nSheets",";","i++",")","{","getSheetAt","(","i",")",".","setSelected","(","i","==","index",")",";","}","workbook",".","getWindowOne","(",")",".","setNumSelectedTabs","(","(","short",")","1",")",";"],"docstring_tokens":["Selects","a","single","sheet"],"prompt_tokens":[]}
{"code_tokens":["\n\n","@Override\n","public","HSSFSheet","createSheet","(",")","{","HSSFSheet","sheet","=","new","HSSFSheet","(","this",")",";","\n\n","_sheets",".","add","(","sheet",")",";","workbook",".","setSheetName","(","_sheets",".","size","(",")","-","1,","\"Sheet\"","+","(","_sheets",".","size","(",")","-","1",")",")",";","boolean","isOnlySheet","=","_sheets",".","size","(",")","==","1",";","sheet",".","setSelected","(","isOnlySheet",")",";","sheet",".","setActive","(","isOnlySheet",")",";","return","sheet",";"],"docstring_tokens":["create","an","HSSFSheet","for","this","HSSFWorkbook,","adds","it","to","the","sheets","and","returns","the","high","level","representation"],"prompt_tokens":[]}
{"code_tokens":["\n\n","@Override\n","public","HSSFSheet","cloneSheet","(","int","sheetIndex",")","{","validateSheetIndex","(","sheetIndex",")",";","HSSFSheet","srcSheet","=","_sheets",".","get","(","sheetIndex",")",";","String","srcName","=","workbook",".","getSheetName","(","sheetIndex",")",";","HSSFSheet","clonedSheet","=","srcSheet",".","cloneSheet","(","this",")",";","clonedSheet",".","setSelected","(","false",")",";","clonedSheet",".","setActive","(","false",")",";","\n\n","String","name","=","getUniqueSheetName","(","srcName",")",";","int","newSheetIndex","=","_sheets",".","size","(",")",";","_sheets",".","add","(","clonedSheet",")",";","workbook",".","setSheetName","(","newSheetIndex,","name",")",";","\n\n","//","Check","this","sheet","has","an","autofilter,","(","which","has","a","built-in","NameRecord","at","workbook","level",")","int","filterDbNameIndex","=","findExistingBuiltinNameRecordIdx","(","sheetIndex,","NameRecord",".","BUILTIN_FILTER_DB",")",";","if","(","filterDbNameIndex","!=","-1",")","{","NameRecord","newNameRecord","=","workbook",".","cloneFilter","(","filterDbNameIndex,","newSheetIndex",")",";","HSSFName","newName","=","new","HSSFName","(","this,","newNameRecord",")",";","names",".","add","(","newName",")",";","}","//","TODO","-","maybe","same","logic","required","for","other/all","built-in","name","records\n//","workbook",".","cloneDrawings","(","clonedSheet",".","getSheet","(",")",")",";","\n\n","return","clonedSheet",";"],"docstring_tokens":["create","an","HSSFSheet","from","an","existing","sheet","in","the","HSSFWorkbook"],"prompt_tokens":[]}
{"code_tokens":["@Override\n","public","HSSFSheet","getSheetAt","(","int","index",")","{","validateSheetIndex","(","index",")",";","return","_sheets",".","get","(","index",")",";"],"docstring_tokens":["Get","the","HSSFSheet","object","at","the","given","index"],"prompt_tokens":[]}
{"code_tokens":["@Override\n","public","HSSFFont","findFont","(","boolean","bold,","short","color,","short","fontHeight,\n","String","name,","boolean","italic,","boolean","strikeout,\n","short","typeOffset,","byte","underline",")","{","int","numberOfFonts","=","getNumberOfFonts","(",")",";","for","(","int","i","=","0",";","i","<=","numberOfFonts",";","i++",")","{","//","Remember","-","there","is","no","4!\n","if","(","i","==","4",")","{","continue",";","}","\n\n","HSSFFont","hssfFont","=","getFontAt","(","i",")",";","if","(","hssfFont",".","getBold","(",")","==","bold\n","&&","hssfFont",".","getColor","(",")","==","color\n","&&","hssfFont",".","getFontHeight","(",")","==","fontHeight\n","&&","hssfFont",".","getFontName","(",")",".","equals","(","name",")","&&","hssfFont",".","getItalic","(",")","==","italic\n","&&","hssfFont",".","getStrikeout","(",")","==","strikeout\n","&&","hssfFont",".","getTypeOffset","(",")","==","typeOffset\n","&&","hssfFont",".","getUnderline","(",")","==","underline",")","{","return","hssfFont",";","}","}","\n\n","return","null",";"],"docstring_tokens":["Finds","a","font","that","matches","the","one","with","the","supplied","attributes"],"prompt_tokens":[]}
{"code_tokens":["@Override\n","public","void","setPrintArea","(","int","sheetIndex,","String","reference",")","{","NameRecord","name","=","workbook",".","getSpecificBuiltinRecord","(","NameRecord",".","BUILTIN_PRINT_AREA,","sheetIndex","+","1",")",";","\n\n\n","if","(","name","==","null",")","{","name","=","workbook",".","createBuiltInName","(","NameRecord",".","BUILTIN_PRINT_AREA,","sheetIndex","+","1",")",";","//","adding","one","here","because","0","indicates","a","global","named","region",";","doesn't","make","sense","for","print","areas\n","}","String[]","parts","=","COMMA_PATTERN",".","split","(","reference",")",";","StringBuilder","sb","=","new","StringBuilder","(","32",")",";","for","(","int","i","=","0",";","i","<","parts",".","length",";","i++",")","{","if","(","i",">","0",")","{","sb",".","append","(","','",")",";","}","SheetNameFormatter",".","appendFormat","(","sb,","getSheetName","(","sheetIndex",")",")",";","sb",".","append","(","'!'",")",";","sb",".","append","(","parts[i]",")",";","}","name",".","setNameDefinition","(","HSSFFormulaParser",".","parse","(","sb",".","toString","(",")",",","this,","FormulaType",".","NAMEDRANGE,","sheetIndex",")",")",";"],"docstring_tokens":["Sets","the","printarea","for","the","sheet","provided","i.e"],"prompt_tokens":[]}
{"code_tokens":["@Override\n","public","HSSFName","createName","(",")","{","NameRecord","nameRecord","=","workbook",".","createName","(",")",";","\n\n","HSSFName","newName","=","new","HSSFName","(","this,","nameRecord",")",";","\n\n","names",".","add","(","newName",")",";","\n\n","return","newName",";"],"docstring_tokens":["creates","a","new","named","range","and","add","it","to","the","model"],"prompt_tokens":[]}
{"code_tokens":["private","void","searchForPictures","(","List<EscherRecord>","escherRecords,","List<HSSFPictureData>","pictures",")","{","for","(","EscherRecord","escherRecord",":","escherRecords",")","{","\n\n","if","(","escherRecord","instanceof","EscherBSERecord",")","{","EscherBlipRecord","blip","=","(","(","EscherBSERecord",")","escherRecord",")",".","getBlipRecord","(",")",";","if","(","blip","!=","null",")","{","//","TODO:","Some","kind","of","structure",".","HSSFPictureData","picture","=","new","HSSFPictureData","(","blip",")",";","pictures",".","add","(","picture",")",";","}","\n\n\n","}","\n\n","//","Recursive","call",".","searchForPictures","(","escherRecord",".","getChildRecords","(",")",",","pictures",")",";","}","\n\n"],"docstring_tokens":["Performs","a","recursive","search","for","pictures","in","the","given","list","of","escher","records"],"prompt_tokens":[]}
{"code_tokens":["public","void","unwriteProtectWorkbook","(",")","{","this",".","workbook",".","unwriteProtectWorkbook","(",")",";"],"docstring_tokens":["removes","the","write","protect","flag"],"prompt_tokens":[]}
{"code_tokens":["@Override\n","public","boolean","getForceFormulaRecalculation","(",")","{","InternalWorkbook","iwb","=","getWorkbook","(",")",";","RecalcIdRecord","recalc","=","(","RecalcIdRecord",")","iwb",".","findFirstRecordBySid","(","RecalcIdRecord",".","sid",")",";","return","recalc","!=","null","&&","recalc",".","getEngineId","(",")","!=","0",";"],"docstring_tokens":["Whether","Excel","will","be","asked","to","recalculate","all","formulas","when","the","workbook","is","opened"],"prompt_tokens":[]}
{"code_tokens":["public","static","Date","getAsDate","(","MAPIAttribute","attr",")","{","if","(","attr","==","null",")","{","return","null",";","}","if","(","attr","instanceof","MAPIDateAttribute",")","{","return","(","(","MAPIDateAttribute",")","attr",")",".","getDate","(",")",";","}","\n\n","LOG",".","atWarn","(",")",".","log","(","\"Warning,","non","date","property","found:","{","}","\",","attr",")",";","return","null",";"],"docstring_tokens":["Returns","the","Date","of","a","Attribute,","converting","as","appropriate"],"prompt_tokens":[]}
{"code_tokens":["@Internal\n","public","void","setIcoFore","(","byte","value",")","{","field_1_value","=","(","short",")","icoFore",".","setValue","(","field_1_value,","value",")",";"],"docstring_tokens":["Sets","the","icoFore","field","value"],"prompt_tokens":[]}
{"code_tokens":["@Internal\n","public","void","setIcoBack","(","byte","value",")","{","field_1_value","=","(","short",")","icoBack",".","setValue","(","field_1_value,","value",")",";"],"docstring_tokens":["Sets","the","icoBack","field","value"],"prompt_tokens":[]}
{"code_tokens":["@Internal\n","public","void","setIpat","(","byte","value",")","{","field_1_value","=","(","short",")","ipat",".","setValue","(","field_1_value,","value",")",";"],"docstring_tokens":["Sets","the","ipat","field","value"],"prompt_tokens":[]}
{"code_tokens":["public","String","getFileName","(",")","{","EscherComplexProperty","propFile","=","getOptRecord","(",")",".","lookup","(","EscherPropertyTypes",".","BLIP__BLIPFILENAME",")",";","return","(","null","==","propFile",")","?","\"\"\n",":","StringUtil",".","getFromUnicodeLE","(","propFile",".","getComplexData","(",")",")",".","trim","(",")",";"],"docstring_tokens":["The","filename","of","the","embedded","image"],"prompt_tokens":[]}
{"code_tokens":["public","static","short","lookupIndexByName","(","String","name",")","{","FunctionMetadata","fd","=","getInstance","(",")",".","getFunctionByNameInternal","(","name",")",";","if","(","fd","==","null",")","{","//","also","try","the","cetab","functions\n","fd","=","getInstanceCetab","(",")",".","getFunctionByNameInternal","(","name",")",";","if","(","fd","==","null",")","{","return","-1",";","}","}","return","(","short",")","fd",".","getIndex","(",")",";"],"docstring_tokens":["Resolves","a","built-in","function","index"],"prompt_tokens":[]}
{"code_tokens":["@Override\n","public","HSSFRow","getRow","(",")","{","int","rowIndex","=","getRowIndex","(",")",";","return","_sheet",".","getRow","(","rowIndex",")",";"],"docstring_tokens":["Returns","the","HSSFRow","this","cell","belongs","to"],"prompt_tokens":[]}
{"code_tokens":["@Override\n","@SuppressWarnings","(","\"fallthrough\"",")","public","void","setCellValue","(","boolean","value",")","{","int","row=_record",".","getRow","(",")",";","short","col=_record",".","getColumn","(",")",";","short","styleIndex=_record",".","getXFIndex","(",")",";","\n\n","switch","(","_cellType",")","{","default:\n","setCellType","(","CellType",".","BOOLEAN,","false,","row,","col,","styleIndex",")",";","//","fall","through\n","case","BOOLEAN:\n","(","(","BoolErrRecord",")","_record",")",".","setValue","(","value",")",";","break",";","case","FORMULA:\n","(","(","FormulaRecordAggregate",")","_record",")",".","setCachedBooleanResult","(","value",")",";","break",";","}"],"docstring_tokens":["set","a","boolean","value","for","the","cell"],"prompt_tokens":[]}
{"code_tokens":["@Override\n","public","CellType","getCachedFormulaResultType","(",")","{","if","(","_cellType","!=","CellType",".","FORMULA",")","{","throw","new","IllegalStateException","(","\"Only","formula","cells","have","cached","results\"",")",";","}","\n\n","return","(","(","FormulaRecordAggregate",")","_record",")",".","getFormulaRecord","(",")",".","getCachedResultTypeEnum","(",")",";"],"docstring_tokens":["Only","valid","for","formula","cells"],"prompt_tokens":[]}
{"code_tokens":["@Override\n","public","void","initialize","(","EncryptionInfo","info,","LittleEndianInput","dis",")","throws","IOException","{","/*","int","hSize","=","*/","dis",".","readInt","(",")",";","CryptoAPIEncryptionHeader","header","=","new","CryptoAPIEncryptionHeader","(","dis",")",";","info",".","setHeader","(","header",")",";","info",".","setVerifier","(","new","CryptoAPIEncryptionVerifier","(","dis,","header",")",")",";","CryptoAPIDecryptor","dec","=","new","CryptoAPIDecryptor","(",")",";","dec",".","setEncryptionInfo","(","info",")",";","info",".","setDecryptor","(","dec",")",";","CryptoAPIEncryptor","enc","=","new","CryptoAPIEncryptor","(",")",";","enc",".","setEncryptionInfo","(","info",")",";","info",".","setEncryptor","(","enc",")",";"],"docstring_tokens":["initialize","the","builder","from","a","stream"],"prompt_tokens":[]}
{"code_tokens":["@Override\n","public","void","initialize","(","EncryptionInfo","info,\n","CipherAlgorithm","cipherAlgorithm,","HashAlgorithm","hashAlgorithm,\n","int","keyBits,","int","blockSize,","ChainingMode","chainingMode",")","{","if","(","cipherAlgorithm","==","null",")","{","cipherAlgorithm","=","CipherAlgorithm",".","rc4",";","}","if","(","hashAlgorithm","==","null",")","{","hashAlgorithm","=","HashAlgorithm",".","sha1",";","}","if","(","keyBits","==","-1",")","{","keyBits","=","0x28",";","}","assert","(","cipherAlgorithm","==","CipherAlgorithm",".","rc4","&&","hashAlgorithm","==","HashAlgorithm",".","sha1",")",";","info",".","setHeader","(","new","CryptoAPIEncryptionHeader","(","cipherAlgorithm,","hashAlgorithm,","keyBits,","blockSize,","chainingMode",")",")",";","info",".","setVerifier","(","new","CryptoAPIEncryptionVerifier","(","cipherAlgorithm,","hashAlgorithm,","keyBits,","blockSize,","chainingMode",")",")",";","CryptoAPIDecryptor","dec","=","new","CryptoAPIDecryptor","(",")",";","dec",".","setEncryptionInfo","(","info",")",";","info",".","setDecryptor","(","dec",")",";","CryptoAPIEncryptor","enc","=","new","CryptoAPIEncryptor","(",")",";","enc",".","setEncryptionInfo","(","info",")",";","info",".","setEncryptor","(","enc",")",";"],"docstring_tokens":["initialize","the","builder","from","scratch"],"prompt_tokens":[]}
{"code_tokens":["\n\n","public","void","setXFType","(","short","type",")","{","field_3_cell_options","=","_xf_type",".","setShortValue","(","field_3_cell_options,\n","type",")",";"],"docstring_tokens":["set","whether","the","cell","is","a","cell","or","style","XFRecord"],"prompt_tokens":[]}
{"code_tokens":["\n\n","public","void","set123Prefix","(","boolean","prefix",")","{","field_3_cell_options","=\n","_123_prefix",".","setShortBoolean","(","field_3_cell_options,","prefix",")",";"],"docstring_tokens":["set","some","old","holdover","from","lotus","123"],"prompt_tokens":[]}
{"code_tokens":["\n\n","public","void","setLeftBorderPaletteIdx","(","short","border",")","{","field_7_palette_options","=\n","_left_border_palette_idx",".","setShortValue","(","field_7_palette_options,\n","border",")",";"],"docstring_tokens":["set","the","palette","index","for","the","left","border","color"],"prompt_tokens":[]}
{"code_tokens":["\n\n","public","void","setRightBorderPaletteIdx","(","short","border",")","{","field_7_palette_options","=\n","_right_border_palette_idx",".","setShortValue","(","field_7_palette_options,\n","border",")",";"],"docstring_tokens":["set","the","palette","index","for","the","right","border","color"],"prompt_tokens":[]}
{"code_tokens":["\n\n","public","void","setFillForeground","(","short","color",")","{","field_9_fill_palette_options","=\n","_fill_foreground",".","setShortValue","(","field_9_fill_palette_options,\n","color",")",";"],"docstring_tokens":["set","the","foreground","palette","color","index"],"prompt_tokens":[]}
{"code_tokens":["\n\n","public","void","setFillBackground","(","short","color",")","{","field_9_fill_palette_options","=\n","_fill_background",".","setShortValue","(","field_9_fill_palette_options,\n","color",")",";"],"docstring_tokens":["set","the","background","palette","color","index"],"prompt_tokens":[]}
{"code_tokens":["\n\n","public","boolean","isLocked","(",")","{","return","_locked",".","isSet","(","field_3_cell_options",")",";"],"docstring_tokens":["get","whether","the","cell","is","locked","or","not"],"prompt_tokens":[]}
{"code_tokens":["\n\n","public","boolean","isHidden","(",")","{","return","_hidden",".","isSet","(","field_3_cell_options",")",";"],"docstring_tokens":["get","whether","the","cell","is","hidden","or","not"],"prompt_tokens":[]}
{"code_tokens":["\n\n","public","short","getXFType","(",")","{","return","_xf_type",".","getShortValue","(","field_3_cell_options",")",";"],"docstring_tokens":["get","whether","the","cell","is","a","cell","or","style","XFRecord"],"prompt_tokens":[]}
{"code_tokens":["\n\n","public","boolean","get123Prefix","(",")","{","return","_123_prefix",".","isSet","(","field_3_cell_options",")",";"],"docstring_tokens":["get","some","old","holdover","from","lotus","123"],"prompt_tokens":[]}
{"code_tokens":["\n\n","public","short","getLeftBorderPaletteIdx","(",")","{","return","_left_border_palette_idx\n",".","getShortValue","(","field_7_palette_options",")",";"],"docstring_tokens":["get","the","palette","index","for","the","left","border","color"],"prompt_tokens":[]}
{"code_tokens":["\n\n","public","short","getRightBorderPaletteIdx","(",")","{","return","_right_border_palette_idx\n",".","getShortValue","(","field_7_palette_options",")",";"],"docstring_tokens":["get","the","palette","index","for","the","right","border","color"],"prompt_tokens":[]}
{"code_tokens":["\n\n","public","short","getFillForeground","(",")","{","return","_fill_foreground",".","getShortValue","(","field_9_fill_palette_options",")",";"],"docstring_tokens":["get","the","foreground","palette","color","index"],"prompt_tokens":[]}
{"code_tokens":["\n\n","public","short","getFillBackground","(",")","{","return","_fill_background",".","getShortValue","(","field_9_fill_palette_options",")",";"],"docstring_tokens":["get","the","background","palette","color","index"],"prompt_tokens":[]}
{"code_tokens":["public","static","Stream","createStream","(","Pointer","pointer,","byte[]","documentData,","ChunkFactory","chunkFactory,","PointerFactory","pointerFactory",")","{","//","Create","the","store\n","StreamStore","store",";","if","(","pointer",".","destinationCompressed","(",")",")","{","try","{","store","=","new","CompressedStreamStore","(","documentData,","pointer",".","getOffset","(",")",",","pointer",".","getLength","(",")",")",";","}","catch","(","IOException","e",")","{","//","Should","never","occur\n","throw","new","HDGFException","(","e",")",";","}","}","else","{","store","=","new","StreamStore","(","documentData,","pointer",".","getOffset","(",")",",","pointer",".","getLength","(",")",")",";","}","\n\n","//","Figure","out","what","sort","of","Stream","to","create,","create","and","return","it\n","if","(","pointer",".","getType","(",")","==","20",")","{","return","new","TrailerStream","(","pointer,","store,","chunkFactory,","pointerFactory",")",";","}","else","if","(","pointer",".","destinationHasPointers","(",")",")","{","return","new","PointerContainingStream","(","pointer,","store,","chunkFactory,","pointerFactory",")",";","}","else","if","(","pointer",".","destinationHasChunks","(",")",")","{","return","new","ChunkStream","(","pointer,","store,","chunkFactory",")",";","}","else","if","(","pointer",".","destinationHasStrings","(",")",")","{","return","new","StringsStream","(","pointer,","store,","chunkFactory",")",";","}","\n\n","//","Give","up","and","return","a","generic","one\n","return","new","UnknownStream","(","pointer,","store",")",";"],"docstring_tokens":["Uses","the","pointer","to","locate","a","Stream","within","the","document","data,","and","creates","it"],"prompt_tokens":[]}
{"code_tokens":["@Deprecated\n","@Removal","(","version","=","\"6",".","0",".","0\"",")","public","static","OPCPackage","clone","(","OPCPackage","pkg,","File","file",")","throws","OpenXML4JException,","IOException","{","\n\n","String","path","=","file",".","getAbsolutePath","(",")",";","\n\n","try","(","OPCPackage","dest","=","OPCPackage",".","create","(","path",")",")","{","PackageRelationshipCollection","rels","=","pkg",".","getRelationships","(",")",";","for","(","PackageRelationship","rel",":","rels",")","{","PackagePart","part","=","pkg",".","getPart","(","rel",")",";","PackagePart","part_tgt",";","if","(","rel",".","getRelationshipType","(",")",".","equals","(","PackageRelationshipTypes",".","CORE_PROPERTIES",")",")","{","copyProperties","(","pkg",".","getPackageProperties","(",")",",","dest",".","getPackageProperties","(",")",")",";","continue",";","}","dest",".","addRelationship","(","part",".","getPartName","(",")",",","rel",".","getTargetMode","(",")",",","rel",".","getRelationshipType","(",")",")",";","part_tgt","=","dest",".","createPart","(","part",".","getPartName","(",")",",","part",".","getContentType","(",")",")",";","\n\n","try","(","InputStream","in","=","part",".","getInputStream","(",")",";","OutputStream","out","=","part_tgt",".","getOutputStream","(",")",")","{","IOUtils",".","copy","(","in,","out",")",";","}","\n\n","if","(","part",".","hasRelationships","(",")",")","{","copy","(","pkg,","part,","dest,","part_tgt",")",";","}","}","}","\n\n","//the","temp","file","will","be","deleted","when","JVM","terminates\n","new","File","(","path",")",".","deleteOnExit","(",")",";","return","OPCPackage",".","open","(","path",")",";"],"docstring_tokens":["Clone","the","specified","package"],"prompt_tokens":[]}
{"code_tokens":["private","static","void","copy","(","OPCPackage","pkg,","PackagePart","part,","OPCPackage","tgt,","PackagePart","part_tgt",")","throws","OpenXML4JException,","IOException","{","PackageRelationshipCollection","rels","=","part",".","getRelationships","(",")",";","if","(","rels","!=","null",")","for","(","PackageRelationship","rel",":","rels",")","{","PackagePart","p",";","if","(","rel",".","getTargetMode","(",")","==","TargetMode",".","EXTERNAL",")","{","part_tgt",".","addExternalRelationship","(","rel",".","getTargetURI","(",")",".","toString","(",")",",","rel",".","getRelationshipType","(",")",",","rel",".","getId","(",")",")",";","//external","relations","don't","have","associated","package","parts\n","continue",";","}","URI","uri","=","rel",".","getTargetURI","(",")",";","\n\n","if","(","uri",".","getRawFragment","(",")","!=","null",")","{","part_tgt",".","addRelationship","(","uri,","rel",".","getTargetMode","(",")",",","rel",".","getRelationshipType","(",")",",","rel",".","getId","(",")",")",";","continue",";","}","PackagePartName","relName","=","PackagingURIHelper",".","createPartName","(","rel",".","getTargetURI","(",")",")",";","p","=","pkg",".","getPart","(","relName",")",";","part_tgt",".","addRelationship","(","p",".","getPartName","(",")",",","rel",".","getTargetMode","(",")",",","rel",".","getRelationshipType","(",")",",","rel",".","getId","(",")",")",";","\n\n","PackagePart","dest",";","if","(","!tgt",".","containPart","(","p",".","getPartName","(",")",")",")","{","dest","=","tgt",".","createPart","(","p",".","getPartName","(",")",",","p",".","getContentType","(",")",")",";","try","(","InputStream","in","=","p",".","getInputStream","(",")",";","OutputStream","out","=","dest",".","getOutputStream","(",")",")","{","IOUtils",".","copy","(","in,","out",")",";","}","copy","(","pkg,","p,","tgt,","dest",")",";","}","}"],"docstring_tokens":["Recursively","copy","package","parts","to","the","destination","package"],"prompt_tokens":[]}
{"code_tokens":["private","static","void","copyProperties","(","PackageProperties","src,","PackageProperties","tgt",")","{","tgt",".","setCategoryProperty","(","src",".","getCategoryProperty","(",")",")",";","tgt",".","setContentStatusProperty","(","src",".","getContentStatusProperty","(",")",")",";","tgt",".","setContentTypeProperty","(","src",".","getContentTypeProperty","(",")",")",";","tgt",".","setCreatorProperty","(","src",".","getCreatorProperty","(",")",")",";","tgt",".","setDescriptionProperty","(","src",".","getDescriptionProperty","(",")",")",";","tgt",".","setIdentifierProperty","(","src",".","getIdentifierProperty","(",")",")",";","tgt",".","setKeywordsProperty","(","src",".","getKeywordsProperty","(",")",")",";","tgt",".","setLanguageProperty","(","src",".","getLanguageProperty","(",")",")",";","tgt",".","setRevisionProperty","(","src",".","getRevisionProperty","(",")",")",";","tgt",".","setSubjectProperty","(","src",".","getSubjectProperty","(",")",")",";","tgt",".","setTitleProperty","(","src",".","getTitleProperty","(",")",")",";","tgt",".","setVersionProperty","(","src",".","getVersionProperty","(",")",")",";"],"docstring_tokens":["Copy","core","package","properties"],"prompt_tokens":[]}
{"code_tokens":["public","void","addSlidePersistAtom","(","SlidePersistAtom","spa",")","{","//","Add","the","new","SlidePersistAtom","at","the","end\n","appendChildRecord","(","spa",")",";","\n\n","SlideAtomsSet","newSAS","=","new","SlideAtomsSet","(","spa,","new","org",".","apache",".","poi",".","hslf",".","record",".","Record[0]",")",";","\n\n","//","Update","our","SlideAtomsSets","with","this\n","SlideAtomsSet[]","sas","=","new","SlideAtomsSet[slideAtomsSets",".","length+1]",";","System",".","arraycopy","(","slideAtomsSets,","0,","sas,","0,","slideAtomsSets",".","length",")",";","sas[sas",".","length-1]","=","newSAS",";","slideAtomsSets","=","sas",";"],"docstring_tokens":["Add","a","new","SlidePersistAtom,","to","the","end","of","the","current","list,","and","update","the","internal","list","of","SlidePersistAtoms"],"prompt_tokens":[]}
{"code_tokens":["public","int","addEmbed","(","POIFSFileSystem","poiData",")","{","DirectoryNode","root","=","poiData",".","getRoot","(",")",";","\n\n","//","prepare","embedded","data\n","if","(","new","ClassID","(",")",".","equals","(","root",".","getStorageClsid","(",")",")",")","{","//","need","to","set","class","id\n","Map<String,ClassID>","olemap","=","getOleMap","(",")",";","ClassID","classID","=","null",";","for","(","Map",".","Entry<String,ClassID>","entry",":","olemap",".","entrySet","(",")",")","{","if","(","root",".","hasEntry","(","entry",".","getKey","(",")",")",")","{","classID","=","entry",".","getValue","(",")",";","break",";","}","}","if","(","classID","==","null",")","{","throw","new","IllegalArgumentException","(","\"Unsupported","embedded","document\"",")",";","}","\n\n","root",".","setStorageClsid","(","classID",")",";","}","\n\n","ExEmbed","exEmbed","=","new","ExEmbed","(",")",";","//","remove","unneccessary","infos,","so","we","don't","need","to","specify","the","type\n","//","of","the","ole","object","multiple","times\n","Record[]","children","=","exEmbed",".","getChildRecords","(",")",";","exEmbed",".","removeChild","(","children[2]",")",";","exEmbed",".","removeChild","(","children[3]",")",";","exEmbed",".","removeChild","(","children[4]",")",";","\n\n","ExEmbedAtom","eeEmbed","=","exEmbed",".","getExEmbedAtom","(",")",";","eeEmbed",".","setCantLockServerB","(","true",")",";","\n\n","ExOleObjAtom","eeAtom","=","exEmbed",".","getExOleObjAtom","(",")",";","eeAtom",".","setDrawAspect","(","ExOleObjAtom",".","DRAW_ASPECT_VISIBLE",")",";","eeAtom",".","setType","(","ExOleObjAtom",".","TYPE_EMBEDDED",")",";","//","eeAtom",".","setSubType","(","ExOleObjAtom",".","SUBTYPE_EXCEL",")",";","//","should","be","ignored?!?,","see","MS-PPT","ExOleObjAtom,","but","Libre","Office","sets","it",".",".",".","eeAtom",".","setOptions","(","1226240",")",";","\n\n","ExOleObjStg","exOleObjStg","=","new","ExOleObjStg","(",")",";","try","{","Ole10Native",".","createOleMarkerEntry","(","poiData",")",";","UnsynchronizedByteArrayOutputStream","bos","=","new","UnsynchronizedByteArrayOutputStream","(",")",";","poiData",".","writeFilesystem","(","bos",")",";","exOleObjStg",".","setData","(","bos",".","toByteArray","(",")",")",";","}","catch","(","IOException","e",")","{","throw","new","HSLFException","(","e",")",";","}","\n\n","int","psrId","=","addPersistentObject","(","exOleObjStg",")",";","exOleObjStg",".","setPersistId","(","psrId",")",";","eeAtom",".","setObjStgDataRef","(","psrId",")",";","\n\n","int","objectId","=","addToObjListAtom","(","exEmbed",")",";","eeAtom",".","setObjID","(","objectId",")",";","return","objectId",";"],"docstring_tokens":["Add","a","embedded","object","to","this","presentation"],"prompt_tokens":[]}
{"code_tokens":["public","Pointer","createPointer","(","byte[]","data,","int","offset",")","{","Pointer","p",";","if","(","version",">=","6",")","{","p","=","new","PointerV6","(",")",";","p",".","setType","(","LittleEndian",".","getInt","(","data,","offset",")",")",";","p",".","setAddress","(","(","int",")","LittleEndian",".","getUInt","(","data,","offset+4",")",")",";","p",".","setOffset","(","(","int",")","LittleEndian",".","getUInt","(","data,","offset+8",")",")",";","p",".","setLength","(","(","int",")","LittleEndian",".","getUInt","(","data,","offset+12",")",")",";","p",".","setFormat","(","LittleEndian",".","getShort","(","data,","offset+16",")",")",";","\n\n","return","p",";","}","else","if","(","version","==","5",")","{","p","=","new","PointerV5","(",")",";","p",".","setType","(","LittleEndian",".","getShort","(","data,","offset",")",")",";","p",".","setFormat","(","LittleEndian",".","getShort","(","data,","offset+2",")",")",";","p",".","setAddress","(","(","int",")","LittleEndian",".","getUInt","(","data,","offset+4",")",")",";","p",".","setOffset","(","(","int",")","LittleEndian",".","getUInt","(","data,","offset+8",")",")",";","p",".","setLength","(","(","int",")","LittleEndian",".","getUInt","(","data,","offset+12",")",")",";","\n\n","return","p",";","}","else","{","throw","new","OldVisioFormatException","(","\"Visio","files","with","versions","below","5","are","not","supported,","yours","was","\"","+","version",")",";","}"],"docstring_tokens":["Creates","a","single","Pointer","from","the","data","at","the","given","offset"],"prompt_tokens":[]}
{"code_tokens":["public","Pointer[]","createContainerPointers","(","Pointer","parent,","byte[]","data",")","{","//","Where","in","the","stream","does","the","\"number","of","pointers\"","offset","live?\n","int","numPointersOffset","=","parent",".","getNumPointersOffset","(","data",")",";","//","How","many","do","we","have?\n","int","numPointers","=","parent",".","getNumPointers","(","numPointersOffset,","data",")",";","//","How","much","to","skip","for","the","num","pointers","+","any","extra","data?\n","int","skip","=","parent",".","getPostNumPointersSkip","(",")",";","\n\n","if","(","numPointers","<","0",")","{","throw","new","IllegalArgumentException","(","\"Cannot","create","container","pointers","with","negative","count:","\"","+","numPointers",")",";","}","\n\n","IOUtils",".","safelyAllocateCheck","(","numPointers,","MAX_NUMBER_OF_POINTERS",")",";","\n\n","//","Create\n","int","pos","=","numPointersOffset","+","skip",";","Pointer[]","childPointers","=","new","Pointer[numPointers]",";","for","(","int","i=0",";","i<numPointers",";","i++",")","{","childPointers[i]","=","this",".","createPointer","(","data,","pos",")",";","pos","+=","childPointers[i]",".","getSizeInBytes","(",")",";","}","\n\n","return","childPointers",";"],"docstring_tokens":["Parsers","the","PointerContainingStream","contents","and","creates","all","the","child","Pointers","for","it"],"prompt_tokens":[]}
{"code_tokens":["@Override\n","protected","EscherContainerRecord","createSpContainer","(","boolean","isChild",")","{","EscherContainerRecord","ecr","=","super",".","createSpContainer","(","isChild",")",";","\n\n","setPlaceholder","(","Placeholder",".","BODY",")",";","\n\n","return","ecr",";"],"docstring_tokens":["Create","a","new","Placeholder","and","initialize","internal","structures"],"prompt_tokens":[]}
{"code_tokens":["static","HSSFPatriarch","createPatriarch","(","HSSFPatriarch","patriarch,","HSSFSheet","sheet",")","{","HSSFPatriarch","newPatriarch","=","new","HSSFPatriarch","(","sheet,","new","EscherAggregate","(","true",")",")",";","newPatriarch",".","afterCreate","(",")",";","for","(","HSSFShape","shape:","patriarch",".","getChildren","(",")",")","{","HSSFShape","newShape",";","if","(","shape","instanceof","HSSFShapeGroup",")","{","newShape","=","(","(","HSSFShapeGroup",")","shape",")",".","cloneShape","(","newPatriarch",")",";","}","else","{","newShape","=","shape",".","cloneShape","(",")",";","}","newPatriarch",".","onCreate","(","newShape",")",";","newPatriarch",".","addShape","(","newShape",")",";","}","return","newPatriarch",";"],"docstring_tokens":["used","to","clone","patriarch","create","patriarch","from","existing","one"],"prompt_tokens":[]}
{"code_tokens":["public","HSSFShapeGroup","createGroup","(","HSSFClientAnchor","anchor",")","{","HSSFShapeGroup","group","=","new","HSSFShapeGroup","(","null,","anchor",")",";","addShape","(","group",")",";","onCreate","(","group",")",";","return","group",";"],"docstring_tokens":["Creates","a","new","group","record","stored","under","this","patriarch"],"prompt_tokens":[]}
{"code_tokens":["public","HSSFComment","createComment","(","HSSFAnchor","anchor",")","{","HSSFComment","shape","=","new","HSSFComment","(","null,","anchor",")",";","addShape","(","shape",")",";","onCreate","(","shape",")",";","return","shape",";"],"docstring_tokens":["Constructs","a","cell","comment"],"prompt_tokens":[]}
{"code_tokens":["@Override\n","public","List<HSSFShape>","getChildren","(",")","{","return","Collections",".","unmodifiableList","(","_shapes",")",";"],"docstring_tokens":["Returns","a","unmodifiable","list","of","all","shapes","contained","by","the","patriarch"],"prompt_tokens":[]}
{"code_tokens":["@Override\n","public","void","clear","(",")","{","ArrayList","<HSSFShape>","copy","=","new","ArrayList<>","(","_shapes",")",";","for","(","HSSFShape","shape:","copy",")","{","removeShape","(","shape",")",";","}"],"docstring_tokens":["remove","all","shapes","inside","patriarch"],"prompt_tokens":[]}
{"code_tokens":["void","buildShapeTree","(",")","{","EscherContainerRecord","dgContainer","=","_boundAggregate",".","getEscherContainer","(",")",";","if","(","dgContainer","==","null",")","{","return",";","}","EscherContainerRecord","spgrConrainer","=","dgContainer",".","getChildContainers","(",")",".","get","(","0",")",";","List<EscherContainerRecord>","spgrChildren","=","spgrConrainer",".","getChildContainers","(",")",";","\n\n","for","(","int","i","=","0",";","i","<","spgrChildren",".","size","(",")",";","i++",")","{","EscherContainerRecord","spContainer","=","spgrChildren",".","get","(","i",")",";","if","(","i","!=","0",")","{","HSSFShapeFactory",".","createShapeTree","(","spContainer,","_boundAggregate,","this,","_sheet",".","getWorkbook","(",")",".","getDirectory","(",")",")",";","}","}"],"docstring_tokens":["create","shape","tree","from","existing","escher","records","tree"],"prompt_tokens":[]}
{"code_tokens":["@Beta\n","public","void","addRowLabel","(","int","columnIndex",")","{","checkColumnIndex","(","columnIndex",")",";","AreaReference","pivotArea","=","getPivotArea","(",")",";","final","int","lastRowIndex","=","pivotArea",".","getLastCell","(",")",".","getRow","(",")","-","pivotArea",".","getFirstCell","(",")",".","getRow","(",")",";","CTPivotFields","pivotFields","=","pivotTableDefinition",".","getPivotFields","(",")",";","\n\n","CTPivotField","pivotField","=","CTPivotField",".","Factory",".","newInstance","(",")",";","CTItems","items","=","pivotField",".","addNewItems","(",")",";","\n\n","pivotField",".","setAxis","(","STAxis",".","AXIS_ROW",")",";","pivotField",".","setShowAll","(","false",")",";","for","(","int","i","=","0",";","i","<=","lastRowIndex",";","i++",")","{","items",".","addNewItem","(",")",".","setT","(","STItemType",".","DEFAULT",")",";","}","items",".","setCount","(","items",".","sizeOfItemArray","(",")",")",";","pivotFields",".","setPivotFieldArray","(","columnIndex,","pivotField",")",";","\n\n","CTRowFields","rowFields",";","if","(","pivotTableDefinition",".","getRowFields","(",")","!=","null",")","{","rowFields","=","pivotTableDefinition",".","getRowFields","(",")",";","}","else","{","rowFields","=","pivotTableDefinition",".","addNewRowFields","(",")",";","}","\n\n","rowFields",".","addNewField","(",")",".","setX","(","columnIndex",")",";","rowFields",".","setCount","(","rowFields",".","sizeOfFieldArray","(",")",")",";"],"docstring_tokens":["Add","a","row","label","using","data","from","the","given","column"],"prompt_tokens":[]}
{"code_tokens":["@Beta\n","public","void","addColLabel","(","int","columnIndex,","String","valueFormat",")","{","checkColumnIndex","(","columnIndex",")",";","AreaReference","pivotArea","=","getPivotArea","(",")",";","final","int","lastRowIndex","=","pivotArea",".","getLastCell","(",")",".","getRow","(",")","-","pivotArea",".","getFirstCell","(",")",".","getRow","(",")",";","CTPivotFields","pivotFields","=","pivotTableDefinition",".","getPivotFields","(",")",";","\n\n","CTPivotField","pivotField","=","CTPivotField",".","Factory",".","newInstance","(",")",";","CTItems","items","=","pivotField",".","addNewItems","(",")",";","\n\n","pivotField",".","setAxis","(","STAxis",".","AXIS_COL",")",";","pivotField",".","setShowAll","(","false",")",";","if","(","valueFormat","!=","null","&&","!valueFormat",".","trim","(",")",".","isEmpty","(",")",")","{","DataFormat","df","=","parentSheet",".","getWorkbook","(",")",".","createDataFormat","(",")",";","pivotField",".","setNumFmtId","(","df",".","getFormat","(","valueFormat",")",")",";","}","for","(","int","i","=","0",";","i","<=","lastRowIndex",";","i++",")","{","items",".","addNewItem","(",")",".","setT","(","STItemType",".","DEFAULT",")",";","}","items",".","setCount","(","items",".","sizeOfItemArray","(",")",")",";","pivotFields",".","setPivotFieldArray","(","columnIndex,","pivotField",")",";","\n\n","CTColFields","colFields",";","if","(","pivotTableDefinition",".","getColFields","(",")","!=","null",")","{","colFields","=","pivotTableDefinition",".","getColFields","(",")",";","}","else","{","colFields","=","pivotTableDefinition",".","addNewColFields","(",")",";","}","\n\n","colFields",".","addNewField","(",")",".","setX","(","columnIndex",")",";","colFields",".","setCount","(","colFields",".","sizeOfFieldArray","(",")",")",";"],"docstring_tokens":["Add","a","col","label","using","data","from","the","given","column"],"prompt_tokens":[]}
{"code_tokens":["@Beta\n","private","void","addDataField","(","DataConsolidateFunction","function,","int","columnIndex,","String","valueFieldName,","String","valueFormat",")","{","checkColumnIndex","(","columnIndex",")",";","CTDataFields","dataFields",";","if","(","pivotTableDefinition",".","getDataFields","(",")","!=","null",")","{","dataFields","=","pivotTableDefinition",".","getDataFields","(",")",";","}","else","{","dataFields","=","pivotTableDefinition",".","addNewDataFields","(",")",";","}","CTDataField","dataField","=","dataFields",".","addNewDataField","(",")",";","dataField",".","setSubtotal","(","STDataConsolidateFunction",".","Enum",".","forInt","(","function",".","getValue","(",")",")",")",";","dataField",".","setName","(","valueFieldName",")",";","dataField",".","setFld","(","columnIndex",")",";","if","(","valueFormat","!=","null","&&","!valueFormat",".","trim","(",")",".","isEmpty","(",")",")","{","DataFormat","df","=","parentSheet",".","getWorkbook","(",")",".","createDataFormat","(",")",";","dataField",".","setNumFmtId","(","df",".","getFormat","(","valueFormat",")",")",";","}","dataFields",".","setCount","(","dataFields",".","sizeOfDataFieldArray","(",")",")",";"],"docstring_tokens":["Add","data","field","with","data","from","the","given","column","and","specified","function"],"prompt_tokens":[]}
{"code_tokens":["@Beta\n","public","void","addReportFilter","(","int","columnIndex",")","{","checkColumnIndex","(","columnIndex",")",";","AreaReference","pivotArea","=","getPivotArea","(",")",";","int","lastRowIndex","=","pivotArea",".","getLastCell","(",")",".","getRow","(",")","-","pivotArea",".","getFirstCell","(",")",".","getRow","(",")",";","//","check","and","change","row","of","location\n","CTLocation","location","=","pivotTableDefinition",".","getLocation","(",")",";","AreaReference","destination","=","new","AreaReference","(","location",".","getRef","(",")",",","SpreadsheetVersion",".","EXCEL2007",")",";","if","(","destination",".","getFirstCell","(",")",".","getRow","(",")","<","2",")","{","AreaReference","newDestination","=","new","AreaReference","(","new","CellReference","(","2,","destination",".","getFirstCell","(",")",".","getCol","(",")",")",",","new","CellReference","(","3,","destination",".","getFirstCell","(",")",".","getCol","(",")","+1",")",",","SpreadsheetVersion",".","EXCEL2007",")",";","location",".","setRef","(","newDestination",".","formatAsString","(",")",")",";","}","\n\n","CTPivotFields","pivotFields","=","pivotTableDefinition",".","getPivotFields","(",")",";","CTPivotField","pivotField","=","CTPivotField",".","Factory",".","newInstance","(",")",";","CTItems","items","=","pivotField",".","addNewItems","(",")",";","\n\n","pivotField",".","setAxis","(","STAxis",".","AXIS_PAGE",")",";","pivotField",".","setShowAll","(","false",")",";","for","(","int","i","=","0",";","i","<=","lastRowIndex",";","i++",")","{","items",".","addNewItem","(",")",".","setT","(","STItemType",".","DEFAULT",")",";","}","items",".","setCount","(","items",".","sizeOfItemArray","(",")",")",";","pivotFields",".","setPivotFieldArray","(","columnIndex,","pivotField",")",";","\n\n","CTPageFields","pageFields",";","if","(","pivotTableDefinition",".","getPageFields","(",")","!=","null",")","{","pageFields","=","pivotTableDefinition",".","getPageFields","(",")",";","//Another","filter","has","already","been","created\n","pivotTableDefinition",".","setMultipleFieldFilters","(","true",")",";","}","else","{","pageFields","=","pivotTableDefinition",".","addNewPageFields","(",")",";","}","CTPageField","pageField","=","pageFields",".","addNewPageField","(",")",";","pageField",".","setHier","(","-1",")",";","pageField",".","setFld","(","columnIndex",")",";","\n\n","pageFields",".","setCount","(","pageFields",".","sizeOfPageFieldArray","(",")",")",";","pivotTableDefinition",".","getLocation","(",")",".","setColPageCount","(","pageFields",".","getCount","(",")",")",";"],"docstring_tokens":["Add","filter","for","the","column","with","the","corresponding","index","and","cell","value"],"prompt_tokens":[]}
{"code_tokens":["public","short","getBarSpace","(",")","{","return","field_1_barSpace",";"],"docstring_tokens":["Get","the","bar","space","field","for","the","Bar","record"],"prompt_tokens":[]}
{"code_tokens":["public","void","setBarSpace","(","short","field_1_barSpace",")","{","this",".","field_1_barSpace","=","field_1_barSpace",";"],"docstring_tokens":["Set","the","bar","space","field","for","the","Bar","record"],"prompt_tokens":[]}
{"code_tokens":["public","short","getCategorySpace","(",")","{","return","field_2_categorySpace",";"],"docstring_tokens":["Get","the","category","space","field","for","the","Bar","record"],"prompt_tokens":[]}
{"code_tokens":["public","void","setCategorySpace","(","short","field_2_categorySpace",")","{","this",".","field_2_categorySpace","=","field_2_categorySpace",";"],"docstring_tokens":["Set","the","category","space","field","for","the","Bar","record"],"prompt_tokens":[]}
{"code_tokens":["public","short","getFormatFlags","(",")","{","return","field_3_formatFlags",";"],"docstring_tokens":["Get","the","format","flags","field","for","the","Bar","record"],"prompt_tokens":[]}
{"code_tokens":["public","void","setFormatFlags","(","short","field_3_formatFlags",")","{","this",".","field_3_formatFlags","=","field_3_formatFlags",";"],"docstring_tokens":["Set","the","format","flags","field","for","the","Bar","record"],"prompt_tokens":[]}
{"code_tokens":["public","boolean","isHorizontal","(",")","{","return","horizontal",".","isSet","(","field_3_formatFlags",")",";"],"docstring_tokens":["true","to","display","horizontal","bar","charts,","false","for","vertical"],"prompt_tokens":[]}
{"code_tokens":["@SuppressWarnings","(","{","\"squid:S2755\"","}",")","private","boolean","isValid","(","Document","xml",")","throws","SAXException","{","try","{","SchemaFactory","factory","=","XMLHelper",".","getSchemaFactory","(",")",";","\n\n","Source","source","=","new","DOMSource","(","map",".","getSchema","(",")",")",";","Schema","schema","=","factory",".","newSchema","(","source",")",";","Validator","validator","=","schema",".","newValidator","(",")",";","validator",".","validate","(","new","DOMSource","(","xml",")",")",";","//if","no","exceptions","where","raised,","the","document","is","valid\n","return","true",";","}","catch","(","IOException","e",")","{","LOG",".","atError","(",")",".","withThrowable","(","e",")",".","log","(","\"document","is","not","valid\"",")",";","}","\n\n","return","false",";"],"docstring_tokens":["Validate","the","generated","XML","against","the","XML","Schema","associated","with","the","XSSFMap"],"prompt_tokens":[]}
{"code_tokens":["@Override\n","public","int","compare","(","String","leftXpath,","String","rightXpath",")","{","Node","xmlSchema","=","map",".","getSchema","(",")",";","\n\n","String[]","leftTokens","=","leftXpath",".","split","(","\"/\"",")",";","String[]","rightTokens","=","rightXpath",".","split","(","\"/\"",")",";","String","samePath","=","\"\"",";","\n\n","int","minLength","=","Math",".","min","(","leftTokens",".","length,","rightTokens",".","length",")",";","\n\n","Node","localComplexTypeRootNode","=","xmlSchema",";","\n\n","for","(","int","i","=1",";","i","<minLength",";","i++",")","{","\n\n","String","leftElementName","=","leftTokens[i]",";","String","rightElementName","=","rightTokens[i]",";","\n\n","if","(","leftElementName",".","equals","(","rightElementName",")",")","{","samePath","+=","\"/\"","+","leftElementName",";","localComplexTypeRootNode","=","getComplexTypeForElement","(","leftElementName,","xmlSchema,","localComplexTypeRootNode",")",";","}","else","{","return","indexOfElementInComplexType","(","samePath,","leftElementName,","rightElementName,localComplexTypeRootNode",")",";","}","}","\n\n","return","0",";"],"docstring_tokens":["Compares","two","xpaths","to","define","an","ordering","according","to","the","XML","Schema"],"prompt_tokens":[]}
{"code_tokens":["\n\n","public","void","setColWidth","(","int","width",")","{","field_1_col_width","=","width",";"],"docstring_tokens":["set","the","default","column","width"],"prompt_tokens":[]}
{"code_tokens":["\n\n","public","int","getColWidth","(",")","{","return","field_1_col_width",";"],"docstring_tokens":["get","the","default","column","width"],"prompt_tokens":[]}
{"code_tokens":["public","String[]","getParagraphText","(",")","{","String[]","ret",";","\n\n","//","Extract","using","the","model","code\n","try","{","Range","r","=","doc",".","getRange","(",")",";","\n\n","ret","=","getParagraphText","(","r",")",";","}","catch","(","Exception","e",")","{","//","Something's","up","with","turning","the","text","pieces","into","paragraphs\n","//","Fall","back","to","ripping","out","the","text","pieces\n","ret","=","new","String[1]",";","ret[0]","=","getTextFromPieces","(",")",";","}","\n\n","return","ret",";"],"docstring_tokens":["Get","the","text","from","the","word","file,","as","an","array","with","one","String","per","paragraph"],"prompt_tokens":[]}
{"code_tokens":["public","short","getObjectType","(",")","{","return","field_1_objectType",";"],"docstring_tokens":["Get","the","object","type","field","for","the","CommonObjectData","record"],"prompt_tokens":[]}
{"code_tokens":["public","void","setObjectType","(","short","field_1_objectType",")","{","this",".","field_1_objectType","=","field_1_objectType",";"],"docstring_tokens":["Set","the","object","type","field","for","the","CommonObjectData","record"],"prompt_tokens":[]}
{"code_tokens":["public","int","getObjectId","(",")","{","return","field_2_objectId",";"],"docstring_tokens":["Get","the","object","id","field","for","the","CommonObjectData","record"],"prompt_tokens":[]}
{"code_tokens":["public","void","setObjectId","(","int","field_2_objectId",")","{","this",".","field_2_objectId","=","field_2_objectId",";"],"docstring_tokens":["Set","the","object","id","field","for","the","CommonObjectData","record"],"prompt_tokens":[]}
{"code_tokens":["public","short","getOption","(",")","{","return","field_3_option",";"],"docstring_tokens":["Get","the","option","field","for","the","CommonObjectData","record"],"prompt_tokens":[]}
{"code_tokens":["public","void","setOption","(","short","field_3_option",")","{","this",".","field_3_option","=","field_3_option",";"],"docstring_tokens":["Set","the","option","field","for","the","CommonObjectData","record"],"prompt_tokens":[]}
{"code_tokens":["public","int","getReserved1","(",")","{","return","field_4_reserved1",";"],"docstring_tokens":["Get","the","reserved1","field","for","the","CommonObjectData","record"],"prompt_tokens":[]}
{"code_tokens":["public","void","setReserved1","(","int","field_4_reserved1",")","{","this",".","field_4_reserved1","=","field_4_reserved1",";"],"docstring_tokens":["Set","the","reserved1","field","for","the","CommonObjectData","record"],"prompt_tokens":[]}
{"code_tokens":["public","int","getReserved2","(",")","{","return","field_5_reserved2",";"],"docstring_tokens":["Get","the","reserved2","field","for","the","CommonObjectData","record"],"prompt_tokens":[]}
{"code_tokens":["public","void","setReserved2","(","int","field_5_reserved2",")","{","this",".","field_5_reserved2","=","field_5_reserved2",";"],"docstring_tokens":["Set","the","reserved2","field","for","the","CommonObjectData","record"],"prompt_tokens":[]}
{"code_tokens":["public","int","getReserved3","(",")","{","return","field_6_reserved3",";"],"docstring_tokens":["Get","the","reserved3","field","for","the","CommonObjectData","record"],"prompt_tokens":[]}
{"code_tokens":["public","void","setReserved3","(","int","field_6_reserved3",")","{","this",".","field_6_reserved3","=","field_6_reserved3",";"],"docstring_tokens":["Set","the","reserved3","field","for","the","CommonObjectData","record"],"prompt_tokens":[]}
{"code_tokens":["public","boolean","isLocked","(",")","{","return","locked",".","isSet","(","field_3_option",")",";"],"docstring_tokens":["true","if","object","is","locked","when","sheet","has","been","protected"],"prompt_tokens":[]}
{"code_tokens":["public","boolean","isPrintable","(",")","{","return","printable",".","isSet","(","field_3_option",")",";"],"docstring_tokens":["object","appears","when","printed"],"prompt_tokens":[]}
{"code_tokens":["public","boolean","isAutofill","(",")","{","return","autofill",".","isSet","(","field_3_option",")",";"],"docstring_tokens":["whether","object","uses","an","automatic","fill","style"],"prompt_tokens":[]}
{"code_tokens":["public","boolean","isAutoline","(",")","{","return","autoline",".","isSet","(","field_3_option",")",";"],"docstring_tokens":["whether","object","uses","an","automatic","line","style"],"prompt_tokens":[]}
{"code_tokens":["public","void","addBreak","(","int","main,","int","subFrom,","int","subTo",")","{","\n\n","Integer","key","=","main",";","Break","region","=","_breakMap",".","get","(","key",")",";","if","(","region","==","null",")","{","region","=","new","Break","(","main,","subFrom,","subTo",")",";","_breakMap",".","put","(","key,","region",")",";","_breaks",".","add","(","region",")",";","}","else","{","region",".","main","=","main",";","region",".","subFrom","=","subFrom",";","region",".","subTo","=","subTo",";","}"],"docstring_tokens":["Adds","the","page","break","at","the","specified","parameters"],"prompt_tokens":[]}
{"code_tokens":["@Override\n","public","final","String","toString","(",")","{","return","toString","(","true",")",";"],"docstring_tokens":["Returns","the","content","type","as","a","string,","including","parameters"],"prompt_tokens":[]}
{"code_tokens":["public","void","setLevelNumberProperties","(","int","level,","CharacterProperties","chp",")","{","ListLevel","listLevel","=","_listData",".","getLevel","(","level",")",";","int","styleIndex","=","_listData",".","getLevelStyle","(","level",")",";","CharacterProperties","base","=","_styleSheet",".","getCharacterStyle","(","styleIndex",")",";","\n\n","byte[]","grpprl","=","CharacterSprmCompressor",".","compressCharacterProperty","(","chp,","base",")",";","listLevel",".","setNumberProperties","(","grpprl",")",";"],"docstring_tokens":["Sets","the","character","properties","of","the","list","numbers"],"prompt_tokens":[]}
{"code_tokens":["private","static","String","processFormatPattern","(","String","f",")","{","String","t","=","f",".","replace","(","\"MMMMM\",","MMMMM_START_SYMBOL","+","\"MMM\"","+","MMMMM_TRUNCATE_SYMBOL",")",";","t","=","t",".","replace","(","\"[H]\",","String",".","valueOf","(","H_BRACKET_SYMBOL",")",")",";","t","=","t",".","replace","(","\"[HH]\",","String",".","valueOf","(","HH_BRACKET_SYMBOL",")",")",";","t","=","t",".","replace","(","\"[m]\",","String",".","valueOf","(","M_BRACKET_SYMBOL",")",")",";","t","=","t",".","replace","(","\"[mm]\",","String",".","valueOf","(","MM_BRACKET_SYMBOL",")",")",";","t","=","t",".","replace","(","\"[s]\",","String",".","valueOf","(","S_BRACKET_SYMBOL",")",")",";","t","=","t",".","replace","(","\"[ss]\",","String",".","valueOf","(","SS_BRACKET_SYMBOL",")",")",";","t","=","t",".","replace","(","\"T\",","\"'T'\"",")",";","t","=","t",".","replace","(","\"''T''\",","\"'T'\"",")",";","t","=","t",".","replaceAll","(","\"s",".","000\",","\"s",".","SSS\"",")",";","t","=","t",".","replaceAll","(","\"s",".","00\",","\"s",".","\"","+","LL_BRACKET_SYMBOL",")",";","t","=","t",".","replaceAll","(","\"s",".","0\",","\"s",".","\"","+","L_BRACKET_SYMBOL",")",";","return","t",";"],"docstring_tokens":["Takes","a","format","String,","and","replaces","Excel","specific","bits","with","our","detection","sequences"],"prompt_tokens":[]}
{"code_tokens":["@Override\n","public","void","setSheetIndex","(","int","index",")","{","int","lastSheetIx","=","_workbook",".","getNumberOfSheets","(",")","-","1",";","if","(","index","<","-1","||","index",">","lastSheetIx",")","{","throw","new","IllegalArgumentException","(","\"Sheet","index","(","\"","+","index","+\"",")","is","out","of","range\"","+\n","(","lastSheetIx","==","-1","?","\"\"",":","(","\"","(","0",".",".","\"","+","lastSheetIx","+","\"",")","\"",")",")",")",";","}","\n\n","if","(","index","==","-1",")","{","if","(","_ctName",".","isSetLocalSheetId","(",")",")","_ctName",".","unsetLocalSheetId","(",")",";","}","else","{","_ctName",".","setLocalSheetId","(","index",")",";","}"],"docstring_tokens":["Tell","Excel","that","this","name","applies","to","the","worksheet","with","the","specified","index","instead","of","the","entire","workbook"],"prompt_tokens":[]}
{"code_tokens":["@Override\n","public","int","getSheetIndex","(",")","{","return","_ctName",".","isSetLocalSheetId","(",")","?","(","int",")","_ctName",".","getLocalSheetId","(",")",":","-1",";"],"docstring_tokens":["Returns","the","sheet","index","this","name","applies","to"],"prompt_tokens":[]}
{"code_tokens":["public","int","getCharCount","(",")","{","if","(","field_1_charCount","<","0",")","{","return","field_1_charCount","+","65536",";","}","return","field_1_charCount",";"],"docstring_tokens":["get","the","number","of","characters","in","the","string,","as","an","un-wrapped","int"],"prompt_tokens":[]}
{"code_tokens":["\n\n","public","void","setCharCount","(","short","cc",")","{","field_1_charCount","=","cc",";"],"docstring_tokens":["set","the","number","of","characters","in","the","string"],"prompt_tokens":[]}
{"code_tokens":["\n\n","public","byte","getOptionFlags","(",")","{","return","field_2_optionflags",";"],"docstring_tokens":["get","the","option","flags","which","among","other","things","return","if","this","is","a","16-bit","or","8","bit","string"],"prompt_tokens":[]}
{"code_tokens":["\n\n","public","void","setOptionFlags","(","byte","of",")","{","field_2_optionflags","=","of",";"],"docstring_tokens":["set","the","option","flags","which","among","other","things","return","if","this","is","a","16-bit","or","8","bit","string"],"prompt_tokens":[]}
{"code_tokens":["public","void","addFormatRun","(","FormatRun","r",")","{","if","(","field_4_format_runs","==","null",")","{","field_4_format_runs","=","new","ArrayList<>","(",")",";","}","\n\n","int","index","=","findFormatRunAt","(","r",".","_character",")",";","if","(","index","!=","-1",")","{","field_4_format_runs",".","remove","(","index",")",";","}","\n\n","field_4_format_runs",".","add","(","r",")",";","//Need","to","sort","the","font","runs","to","ensure","that","the","font","runs","appear","in\n","//character","order\n","Collections",".","sort","(","field_4_format_runs",")",";","\n\n","//Make","sure","that","we","now","say","that","we","are","a","rich","string\n","field_2_optionflags","=","richText",".","setByte","(","field_2_optionflags",")",";"],"docstring_tokens":["Adds","a","font","run","to","the","formatted","string"],"prompt_tokens":[]}
{"code_tokens":["public","void","serialize","(","ContinuableRecordOutput","out",")","{","int","numberOfRichTextRuns","=","0",";","int","extendedDataSize","=","0",";","if","(","isRichText","(",")","&&","field_4_format_runs","!=","null",")","{","numberOfRichTextRuns","=","field_4_format_runs",".","size","(",")",";","}","if","(","isExtendedText","(",")","&&","field_5_ext_rst","!=","null",")","{","extendedDataSize","=","4","+","field_5_ext_rst",".","getDataSize","(",")",";","}","\n\n","//","Serialise","the","bulk","of","the","String\n","//","The","writeString","handles","tricky","continue","stuff","for","us\n","out",".","writeString","(","field_3_string,","numberOfRichTextRuns,","extendedDataSize",")",";","\n\n","if","(","numberOfRichTextRuns",">","0",")","{","\n\n","//This","will","ensure","that","a","run","does","not","split","a","continue\n","for","(","int","i=0",";","i<numberOfRichTextRuns",";","i++",")","{","if","(","out",".","getAvailableSpace","(",")","<","4",")","{","out",".","writeContinue","(",")",";","}","FormatRun","r","=","field_4_format_runs",".","get","(","i",")",";","r",".","serialize","(","out",")",";","}","}","\n\n","if","(","extendedDataSize",">","0","&&","field_5_ext_rst","!=","null",")","{","field_5_ext_rst",".","serialize","(","out",")",";","}"],"docstring_tokens":["Serialises","out","the","String"],"prompt_tokens":[]}
{"code_tokens":["public","void","debug","(",")","{","System",".","err",".","println","(","\"Trailer","is","at","\"","+","trailerPointer",".","getOffset","(",")",")",";","System",".","err",".","println","(","\"Trailer","has","type","\"","+","trailerPointer",".","getType","(",")",")",";","System",".","err",".","println","(","\"Trailer","has","length","\"","+","trailerPointer",".","getLength","(",")",")",";","System",".","err",".","println","(","\"Trailer","has","format","\"","+","trailerPointer",".","getFormat","(",")",")",";","\n\n","for","(","int","i=0",";","i<trailer",".","getPointedToStreams","(",")",".","length",";","i++",")","{","Stream","stream","=","trailer",".","getPointedToStreams","(",")","[i]",";","Pointer","ptr","=","stream",".","getPointer","(",")",";","\n\n","System",".","err",".","println","(","\"Looking","at","pointer","\"","+","i",")",";","System",".","err",".","println","(","\"\\tType","is","\"","+","ptr",".","getType","(",")","+","\"\\t\\t\"","+","Integer",".","toHexString","(","ptr",".","getType","(",")",")",")",";","System",".","err",".","println","(","\"\\tOffset","is","\"","+","ptr",".","getOffset","(",")","+","\"\\t\\t\"","+","Long",".","toHexString","(","ptr",".","getOffset","(",")",")",")",";","System",".","err",".","println","(","\"\\tAddress","is","\"","+","ptr",".","getAddress","(",")","+","\"\\t\"","+","Long",".","toHexString","(","ptr",".","getAddress","(",")",")",")",";","System",".","err",".","println","(","\"\\tLength","is","\"","+","ptr",".","getLength","(",")","+","\"\\t\\t\"","+","Long",".","toHexString","(","ptr",".","getLength","(",")",")",")",";","System",".","err",".","println","(","\"\\tFormat","is","\"","+","ptr",".","getFormat","(",")","+","\"\\t\\t\"","+","Long",".","toHexString","(","ptr",".","getFormat","(",")",")",")",";","System",".","err",".","println","(","\"\\tCompressed","is","\"","+","ptr",".","destinationCompressed","(",")",")",";","System",".","err",".","println","(","\"\\tStream","is","\"","+","stream",".","getClass","(",")",")",";","\n\n","if","(","stream","instanceof","PointerContainingStream",")","{","PointerContainingStream","pcs","=","(","PointerContainingStream",")","stream",";","\n\n","if","(","pcs",".","getPointedToStreams","(",")","!=","null","&&","pcs",".","getPointedToStreams","(",")",".","length",">","0",")","{","System",".","err",".","println","(","\"\\tContains","\"","+","pcs",".","getPointedToStreams","(",")",".","length","+","\"","other","pointers/streams\"",")",";","for","(","int","j=0",";","j<pcs",".","getPointedToStreams","(",")",".","length",";","j++",")","{","Stream","ss","=","pcs",".","getPointedToStreams","(",")","[j]",";","Pointer","sptr","=","ss",".","getPointer","(",")",";","System",".","err",".","println","(","\"\\t\\t\"","+","j","+","\"","-","Type","is","\"","+","sptr",".","getType","(",")","+","\"\\t\\t\"","+","Integer",".","toHexString","(","sptr",".","getType","(",")",")",")",";","System",".","err",".","println","(","\"\\t\\t\"","+","j","+","\"","-","Length","is","\"","+","sptr",".","getLength","(",")","+","\"\\t\\t\"","+","Long",".","toHexString","(","sptr",".","getLength","(",")",")",")",";","}","}","}","\n\n","if","(","stream","instanceof","StringsStream",")","{","System",".","err",".","println","(","\"\\t\\t**strings**\"",")",";","StringsStream","ss","=","(","StringsStream",")","stream",";","System",".","err",".","println","(","\"\\t\\t\"","+","ss",".","_getContentsLength","(",")",")",";","}","}"],"docstring_tokens":["Prints","out","some","simple","debug","on","the","base","contents","of","the","file"],"prompt_tokens":[]}
{"code_tokens":["private","int","findChildLocation","(","Record","child",")","{","int","i=0",";","for","(","org",".","apache",".","poi",".","hslf",".","record",".","Record","r",":","_children",")","{","if","(","r",".","equals","(","child",")",")","{","return","i",";","}","i++",";","}","return","-1",";"],"docstring_tokens":["Finds","the","location","of","the","given","child","record"],"prompt_tokens":[]}
{"code_tokens":["private","int","appendChild","(","Record","newChild",")","{","//","Copy","over,","and","pop","the","child","in","at","the","end\n","Record[]","nc","=","Arrays",".","copyOf","(","_children,","_children",".","length+1,","org",".","apache",".","poi",".","hslf",".","record",".","Record[]",".","class",")",";","//","Switch","the","arrays\n","nc[_children",".","length]","=","newChild",";","_children","=","nc",";","return","_children",".","length",";"],"docstring_tokens":["Adds","a","child","record,","at","the","very","end"],"prompt_tokens":[]}
{"code_tokens":["private","void","addChildAt","(","Record","newChild,","int","position",")","{","//","Firstly,","have","the","child","added","in","at","the","end\n","appendChild","(","newChild",")",";","\n\n","//","Now,","have","them","moved","to","the","right","place\n","moveChildRecords","(","(","_children",".","length-1",")",",","position,","1",")",";"],"docstring_tokens":["Adds","the","given","new","Child","Record","at","the","given","location,","shuffling","everything","from","there","on","down","by","one"],"prompt_tokens":[]}
{"code_tokens":["public","org",".","apache",".","poi",".","hslf",".","record",".","Record","findFirstOfType","(","long","type",")","{","for","(","org",".","apache",".","poi",".","hslf",".","record",".","Record","r",":","_children",")","{","if","(","r",".","getRecordType","(",")","==","type",")","{","return","r",";","}","}","return","null",";"],"docstring_tokens":["Finds","the","first","child","record","of","the","given","type,","or","null","if","none","of","the","child","records","are","of","the","given","type"],"prompt_tokens":[]}
{"code_tokens":["public","org",".","apache",".","poi",".","hslf",".","record",".","Record","removeChild","(","Record","ch",")","{","org",".","apache",".","poi",".","hslf",".","record",".","Record","rm","=","null",";","ArrayList<org",".","apache",".","poi",".","hslf",".","record",".","Record>","lst","=","new","ArrayList<>","(",")",";","for","(","org",".","apache",".","poi",".","hslf",".","record",".","Record","r",":","_children",")","{","if","(","r","!=","ch",")","{","lst",".","add","(","r",")",";","}","else","{","rm","=","r",";","}","}","_children","=","lst",".","toArray","(","new","org",".","apache",".","poi",".","hslf",".","record",".","Record[0]",")",";","return","rm",";"],"docstring_tokens":["Remove","a","child","record","from","this","record","container"],"prompt_tokens":[]}
{"code_tokens":["public","int","addChildAfter","(","Record","newChild,","Record","after",")","{","//","Decide","where","we're","going","to","put","it\n","int","loc","=","findChildLocation","(","after",")",";","if","(","loc","==","-1",")","{","throw","new","IllegalArgumentException","(","\"Asked","to","add","a","new","child","after","another","record,","but","that","record","wasn't","one","of","our","children!\"",")",";","}","\n\n","//","Add","one","place","after","the","supplied","record\n","addChildAt","(","newChild,","loc+1",")",";","return","loc+1",";"],"docstring_tokens":["Adds","the","given","Child","Record","after","the","supplied","record"],"prompt_tokens":[]}
{"code_tokens":["public","int","addChildBefore","(","Record","newChild,","Record","before",")","{","//","Decide","where","we're","going","to","put","it\n","int","loc","=","findChildLocation","(","before",")",";","if","(","loc","==","-1",")","{","throw","new","IllegalArgumentException","(","\"Asked","to","add","a","new","child","before","another","record,","but","that","record","wasn't","one","of","our","children!\"",")",";","}","\n\n","//","Add","at","the","place","of","the","supplied","record\n","addChildAt","(","newChild,","loc",")",";","return","loc",";"],"docstring_tokens":["Adds","the","given","Child","Record","before","the","supplied","record"],"prompt_tokens":[]}
{"code_tokens":["public","static","void","handleParentAwareRecords","(","RecordContainer","br",")","{","//","Loop","over","child","records,","looking","for","interesting","ones\n","for","(","org",".","apache",".","poi",".","hslf",".","record",".","Record","record",":","br",".","getChildRecords","(",")",")","{","//","Tell","parent","aware","records","of","their","parent\n","if","(","record","instanceof","ParentAwareRecord",")","{","(","(","ParentAwareRecord",")","record",")",".","setParentRecord","(","br",")",";","}","//","Walk","on","down","for","the","case","of","container","records\n","if","(","record","instanceof","RecordContainer",")","{","handleParentAwareRecords","(","(","RecordContainer",")","record",")",";","}","}"],"docstring_tokens":["Find","the","records","that","are","parent-aware,","and","tell","them","who","their","parent","is"],"prompt_tokens":[]}
{"code_tokens":["@Beta\n","protected","void","createCacheFields","(","Sheet","sheet",")","{","//Get","values","for","start","row,","start","and","end","column\n","AreaReference","ar","=","getPivotArea","(","sheet",".","getWorkbook","(",")",")",";","CellReference","firstCell","=","ar",".","getFirstCell","(",")",";","CellReference","lastCell","=","ar",".","getLastCell","(",")",";","int","columnStart","=","firstCell",".","getCol","(",")",";","int","columnEnd","=","lastCell",".","getCol","(",")",";","Row","row","=","sheet",".","getRow","(","firstCell",".","getRow","(",")",")",";","CTCacheFields","cFields",";","if","(","ctPivotCacheDefinition",".","getCacheFields","(",")","!=","null",")","{","cFields","=","ctPivotCacheDefinition",".","getCacheFields","(",")",";","}","else","{","cFields","=","ctPivotCacheDefinition",".","addNewCacheFields","(",")",";","}","//For","each","column,","create","a","cache","field","and","give","it","en","empty","sharedItems\n","for","(","int","i=columnStart",";","i<=columnEnd",";","i++",")","{","CTCacheField","cf","=","cFields",".","addNewCacheField","(",")",";","if","(","i==columnEnd",")","{","cFields",".","setCount","(","cFields",".","sizeOfCacheFieldArray","(",")",")",";","}","//General","number","format\n","cf",".","setNumFmtId","(","0",")",";","cf",".","setName","(","row",".","getCell","(","i",")",".","getStringCellValue","(",")",")",";","cf",".","addNewSharedItems","(",")",";","}"],"docstring_tokens":["Generates","a","cache","field","for","each","column","in","the","reference","area","for","the","pivot","table"],"prompt_tokens":[]}
{"code_tokens":["public","static","FontDetails","create","(","String","fontName,","Properties","fontMetricsProps",")","{","String","heightStr","=","fontMetricsProps",".","getProperty","(","buildFontHeightProperty","(","fontName",")",")",";","String","widthsStr","=","fontMetricsProps",".","getProperty","(","buildFontWidthsProperty","(","fontName",")",")",";","String","charactersStr","=","fontMetricsProps",".","getProperty","(","buildFontCharactersProperty","(","fontName",")",")",";","\n\n","//","Ensure","that","this","is","a","font","we","know","about\n","if","(","heightStr","==","null","||","widthsStr","==","null","||","charactersStr","==","null",")","{","//","We","don't","know","all","we","need","to","about","this","font\n","//","Since","we","don't","know","its","sizes,","we","can't","work","with","it\n","throw","new","IllegalArgumentException","(","\"The","supplied","FontMetrics","doesn't","know","about","the","font","'\"","+","fontName","+","\"',","so","we","can't","use","it",".","Please","add","it","to","your","font","metrics","file","(","see","StaticFontMetrics",".","getFontDetails\"",")",";","}","\n\n","int","height","=","Integer",".","parseInt","(","heightStr",")",";","FontDetails","d","=","new","FontDetails","(","fontName,","height",")",";","String[]","charactersStrArray","=","split","(","charactersStr,","\",\",","-1",")",";","String[]","widthsStrArray","=","split","(","widthsStr,","\",\",","-1",")",";","if","(","charactersStrArray",".","length","!=","widthsStrArray",".","length",")","throw","new","RuntimeException","(","\"Number","of","characters","does","not","number","of","widths","for","font","\"","+","fontName",")",";","for","(","int","i","=","0",";","i","<","widthsStrArray",".","length",";","i++",")","{","if","(","charactersStrArray[i]",".","length","(",")","!=","0",")","d",".","addChar","(","charactersStrArray[i]",".","charAt","(","0",")",",","Integer",".","parseInt","(","widthsStrArray[i]",")",")",";","}","return","d",";"],"docstring_tokens":["Create","an","instance","of","FontDetails","by","loading","them","from","the","provided","property","object"],"prompt_tokens":[]}
{"code_tokens":["public","static","Workbook","create","(","boolean","xssf",")","throws","IOException","{","return","wp","(","xssf","?","FileMagic",".","OOXML",":","FileMagic",".","OLE2,","WorkbookProvider::create",")",";"],"docstring_tokens":["Create","a","new","empty","Workbook,","either","XSSF","or","HSSF","depending","on","the","parameter"],"prompt_tokens":[]}
{"code_tokens":["@Override\n","public","int","getSignature","(",")","{","return","(","getUIDInstanceCount","(",")","==","1","?","0x3D40",":","0x3D50",")",";"],"docstring_tokens":["EMF","signature","is","0x3D40","or","0x3D50"],"prompt_tokens":[]}
{"code_tokens":["@Override\n","public","void","setSignature","(","int","signature",")","{","switch","(","signature",")","{","case","0x3D40:\n","setUIDInstanceCount","(","1",")",";","break",";","case","0x3D50:\n","setUIDInstanceCount","(","2",")",";","break",";","default:\n","throw","new","IllegalArgumentException","(","signature+\"","is","not","a","valid","instance/signature","value","for","EMF\"",")",";","}"],"docstring_tokens":["Sets","the","EMF","signature","-","either","0x3D40","or","0x3D50"],"prompt_tokens":[]}
{"code_tokens":["protected","static","String","parseAs7BitData","(","byte[]","data",")","{","return","parseAs7BitData","(","data,","DEFAULT_ENCODING",")",";"],"docstring_tokens":["Parses","as","non-unicode,","supposedly","7","bit","CP1252","data","and","returns","the","string","that","that","yields"],"prompt_tokens":[]}
{"code_tokens":["protected","static","String","parseAs7BitData","(","byte[]","data,","String","encoding",")","{","//","Handle","any","encoding","aliases,","where","outlook","describes","it","differently\n","if","(","\"ansi\"",".","equals","(","encoding",")",")","{","encoding","=","DEFAULT_ENCODING",";","}","\n\n","//","Decode\n","return","new","String","(","data,","Charset",".","forName","(","encoding",")",")",";"],"docstring_tokens":["Parses","as","non-unicode,","supposedly","7","bit","data","and","returns","the","string","that","that","yields"],"prompt_tokens":[]}
{"code_tokens":["private","void","searchForPictures","(","List<EscherRecord>","escherRecords,","List<Picture>","pictures",")","{","for","(","EscherRecord","escherRecord",":","escherRecords",")","{","if","(","escherRecord","instanceof","EscherBSERecord",")","{","EscherBSERecord","bse","=","(","EscherBSERecord",")","escherRecord",";","EscherBlipRecord","blip","=","bse",".","getBlipRecord","(",")",";","if","(","blip","!=","null",")","{","pictures",".","add","(","new","Picture","(","blip",")",")",";","}","else","if","(","bse",".","getOffset","(",")",">","0",")","{","try","{","//","Blip","stored","in","delay","stream,","which","in","a","word","doc,","is\n","//","the","main","stream\n","EscherRecordFactory","recordFactory","=","new","DefaultEscherRecordFactory","(",")",";","EscherRecord","record","=","recordFactory",".","createRecord","(","_mainStream,","bse",".","getOffset","(",")",")",";","\n\n","if","(","record","instanceof","EscherBlipRecord",")","{","record",".","fillFields","(","_mainStream,","bse",".","getOffset","(",")",",\n","recordFactory",")",";","blip","=","(","EscherBlipRecord",")","record",";","pictures",".","add","(","new","Picture","(","blip",")",")",";","}","}","catch","(","Exception","exc",")","{","LOG",".","atWarn","(",")",".","withThrowable","(","exc",")",".","log","(","\"Unable","to","load","picture","from","BLIP","record","at","offset","#","{","}","\",","box","(","bse",".","getOffset","(",")",")",")",";","}","}","}","}"],"docstring_tokens":["Performs","a","search","for","pictures","in","the","given","list","of","escher","records"],"prompt_tokens":[]}
{"code_tokens":["public","String","text","(",")","{","return","_text",".","substring","(","_start,","_end",")",";"],"docstring_tokens":["Gets","the","text","that","this","Range","contains"],"prompt_tokens":[]}
{"code_tokens":["public","int","numSections","(",")","{","initSections","(",")",";","return","_sectionEnd","-","_sectionStart",";"],"docstring_tokens":["Used","to","get","the","number","of","sections","in","a","range"],"prompt_tokens":[]}
{"code_tokens":["\n\n","public","int","numParagraphs","(",")","{","initParagraphs","(",")",";","return","_parEnd","-","_parStart",";"],"docstring_tokens":["Used","to","get","the","number","of","paragraphs","in","a","range"],"prompt_tokens":[]}
{"code_tokens":["public","CharacterRun","insertBefore","(","String","text",")","{","initAll","(",")",";","\n\n","_text",".","insert","(","_start,","text",")",";","_doc",".","getCharacterTable","(",")",".","adjustForInsert","(","_charStart,","text",".","length","(",")",")",";","_doc",".","getParagraphTable","(",")",".","adjustForInsert","(","_parStart,","text",".","length","(",")",")",";","_doc",".","getSectionTable","(",")",".","adjustForInsert","(","_sectionStart,","text",".","length","(",")",")",";","if","(","_doc","instanceof","HWPFDocument",")","{","(","(","BookmarksImpl",")","(","(","HWPFDocument",")","_doc",")",".","getBookmarks","(",")",")",".","afterInsert","(","_start,","text",".","length","(",")",")",";","}","adjustForInsert","(","text",".","length","(",")",")",";","\n\n","//","update","the","FIB",".","CCPText","+","friends","fields\n","adjustFIB","(","text",".","length","(",")",")",";","\n\n","sanityCheck","(",")",";","\n\n","return","getCharacterRun","(","0",")",";"],"docstring_tokens":["Inserts","text","into","the","front","of","this","range"],"prompt_tokens":[]}
{"code_tokens":["public","CharacterRun","insertAfter","(","String","text",")","{","initAll","(",")",";","\n\n","_text",".","insert","(","_end,","text",")",";","\n\n","_doc",".","getCharacterTable","(",")",".","adjustForInsert","(","_charEnd","-","1,","text",".","length","(",")",")",";","_doc",".","getParagraphTable","(",")",".","adjustForInsert","(","_parEnd","-","1,","text",".","length","(",")",")",";","_doc",".","getSectionTable","(",")",".","adjustForInsert","(","_sectionEnd","-","1,","text",".","length","(",")",")",";","if","(","_doc","instanceof","HWPFDocument",")","{","(","(","BookmarksImpl",")","(","(","HWPFDocument",")","_doc",")",".","getBookmarks","(",")",")",".","afterInsert","(","_end,","text",".","length","(",")",")",";","}","adjustForInsert","(","text",".","length","(",")",")",";","\n\n","sanityCheck","(",")",";","return","getCharacterRun","(","numCharacterRuns","(",")","-","1",")",";"],"docstring_tokens":["Inserts","text","onto","the","end","of","this","range"],"prompt_tokens":[]}
{"code_tokens":["@Deprecated\n","private","CharacterRun","insertBefore","(","String","text,","CharacterProperties","props",")","{","initAll","(",")",";","PAPX","papx","=","_paragraphs",".","get","(","_parStart",")",";","short","istd","=","papx",".","getIstd","(",")",";","\n\n","StyleSheet","ss","=","_doc",".","getStyleSheet","(",")",";","CharacterProperties","baseStyle","=","ss",".","getCharacterStyle","(","istd",")",";","byte[]","grpprl","=","CharacterSprmCompressor",".","compressCharacterProperty","(","props,","baseStyle",")",";","SprmBuffer","buf","=","new","SprmBuffer","(","grpprl,","0",")",";","_doc",".","getCharacterTable","(",")",".","insert","(","_charStart,","_start,","buf",")",";","\n\n","return","insertBefore","(","text",")",";"],"docstring_tokens":["Inserts","text","into","the","front","of","this","range","and","it","gives","that","text","the","CharacterProperties","specified","in","props"],"prompt_tokens":[]}
{"code_tokens":["@Deprecated\n","private","CharacterRun","insertAfter","(","String","text,","CharacterProperties","props",")","{","initAll","(",")",";","PAPX","papx","=","_paragraphs",".","get","(","_parEnd","-","1",")",";","short","istd","=","papx",".","getIstd","(",")",";","\n\n","StyleSheet","ss","=","_doc",".","getStyleSheet","(",")",";","CharacterProperties","baseStyle","=","ss",".","getCharacterStyle","(","istd",")",";","byte[]","grpprl","=","CharacterSprmCompressor",".","compressCharacterProperty","(","props,","baseStyle",")",";","SprmBuffer","buf","=","new","SprmBuffer","(","grpprl,","0",")",";","_doc",".","getCharacterTable","(",")",".","insert","(","_charEnd,","_end,","buf",")",";","_charEnd++",";","return","insertAfter","(","text",")",";"],"docstring_tokens":["Inserts","text","onto","the","end","of","this","range","and","gives","that","text","the","CharacterProperties","specified","in","props"],"prompt_tokens":[]}
{"code_tokens":["@Deprecated\n","private","Paragraph","insertBefore","(","ParagraphProperties","props,","int","styleIndex",")","{","return","this",".","insertBefore","(","props,","styleIndex,","\"\\r\"",")",";"],"docstring_tokens":["Inserts","and","empty","paragraph","into","the","front","of","this","range"],"prompt_tokens":[]}
{"code_tokens":["@Deprecated\n","Paragraph","insertAfter","(","ParagraphProperties","props,","int","styleIndex",")","{","return","this",".","insertAfter","(","props,","styleIndex,","\"\\r\"",")",";"],"docstring_tokens":["Inserts","and","empty","paragraph","into","the","end","of","this","range"],"prompt_tokens":[]}
{"code_tokens":["public","Table","insertTableBefore","(","short","columns,","int","rows",")","{","ParagraphProperties","parProps","=","new","ParagraphProperties","(",")",";","parProps",".","setFInTable","(","true",")",";","parProps",".","setItap","(","1",")",";","\n\n","final","int","oldEnd","=","this",".","_end",";","\n\n","for","(","int","x","=","0",";","x","<","rows",";","x++",")","{","Paragraph","cell","=","this",".","insertBefore","(","parProps,","StyleSheet",".","NIL_STYLE",")",";","cell",".","insertAfter","(","String",".","valueOf","(","'\\u0007'",")",")",";","for","(","int","y","=","1",";","y","<","columns",";","y++",")","{","cell","=","cell",".","insertAfter","(","parProps,","StyleSheet",".","NIL_STYLE",")",";","cell",".","insertAfter","(","String",".","valueOf","(","'\\u0007'",")",")",";","}","cell","=","cell",".","insertAfter","(","parProps,","StyleSheet",".","NIL_STYLE,\n","String",".","valueOf","(","'\\u0007'",")",")",";","cell",".","setTableRowEnd","(","new","TableProperties","(","columns",")",")",";","}","\n\n","final","int","newEnd","=","this",".","_end",";","final","int","diff","=","newEnd","-","oldEnd",";","\n\n","return","new","Table","(","_start,","_start","+","diff,","this,","1",")",";"],"docstring_tokens":["Inserts","a","simple","table","into","the","beginning","of","this","range"],"prompt_tokens":[]}
{"code_tokens":["public","void","replaceText","(","String","newText,","boolean","addAfter",")","{","if","(","addAfter",")","{","int","originalEnd","=","getEndOffset","(",")",";","insertAfter","(","newText",")",";","new","Range","(","getStartOffset","(",")",",","originalEnd,","this",")",".","delete","(",")",";","}","else\n","{","int","originalStart","=","getStartOffset","(",")",";","int","originalEnd","=","getEndOffset","(",")",";","\n\n","insertBefore","(","newText",")",";","new","Range","(","originalStart","+","newText",".","length","(",")",",","originalEnd\n","+","newText",".","length","(",")",",","this",")",".","delete","(",")",";","}"],"docstring_tokens":["Replace","range","text","with","new","one,","adding","it","to","the","range","and","deleting","original","text","from","document"],"prompt_tokens":[]}
{"code_tokens":["private","void","adjustForInsert","(","int","length",")","{","_end","+=","length",";","\n\n","reset","(",")",";","Range","parent","=","_parent",";","if","(","parent","!=","null",")","{","parent",".","adjustForInsert","(","length",")",";","}"],"docstring_tokens":["adjust","this","range","after","an","insert","happens"],"prompt_tokens":[]}
{"code_tokens":["private","void","outputCompressed","(",")","throws","IOException","{","//","It's","not","worth","compressing","only","1","or","two","bytes,","due","to","the","overheads\n","//","So","if","asked,","just","output","uncompressed\n","if","(","rawCodeLen","<","3",")","{","final","int","rcl","=","rawCodeLen",";","for","(","int","i","=","0",";","i","<","rcl",";","i++",")","{","outputUncompressed","(","rawCode[i]",")",";","}","return",";","}","\n\n","//","Grab","where","the","data","lives\n","int","codesAt","=","findRawCodeInBuffer","(",")",";","codesAt","=","(","codesAt-18",")","&","DICT_MASK",";","\n\n","//","Increment","the","mask","bit","count,","we've","done","another","code\n","maskBitsSet++",";","\n\n","//","Add","the","length+code","to","the","buffer\n","//","(","The","position","is","the","first","12","bits,","the","length","is","the","last","4","bits",")","int","bp1","=","(","codesAt","&","0xFF",")",";","int","bp2","=","(","rawCodeLen","-","3",")","+","(","(","codesAt","-","bp1",")",">>>","4",")",";","buffer[bufferLen++]","=","(","byte",")","bp1",";","buffer[bufferLen++]","=","(","byte",")","bp2",";","\n\n","assert","(","maskBitsSet","<=","8",")",";","\n\n","//","If","we're","now","at","8","codes,","output\n","if","(","maskBitsSet","==","8",")","{","output8Codes","(",")",";","}","\n\n","rawCodeLen","=","0",";"],"docstring_tokens":["Output","the","compressed","representation","for","the","bytes","found","in","rawCode"],"prompt_tokens":[]}
{"code_tokens":["public","void","construct","(","CellValueRecordInterface","rec,","RecordStream","rs,","SharedValueManager","sfh",")","{","if","(","rec","instanceof","FormulaRecord",")","{","FormulaRecord","formulaRec","=","(","FormulaRecord",")","rec",";","//","read","optional","cached","text","value\n","StringRecord","cachedText",";","Class<?","extends","Record>","nextClass","=","rs",".","peekNextClass","(",")",";","if","(","nextClass","==","StringRecord",".","class",")","{","cachedText","=","(","StringRecord",")","rs",".","getNext","(",")",";","}","else","{","cachedText","=","null",";","}","insertCell","(","new","FormulaRecordAggregate","(","formulaRec,","cachedText,","sfh",")",")",";","}","else","{","insertCell","(","rec",")",";","}"],"docstring_tokens":["Processes","a","single","cell","value","record"],"prompt_tokens":[]}
{"code_tokens":["public","int","getRowCellBlockSize","(","int","startRow,","int","endRow",")","{","int","result","=","0",";","for","(","int","rowIx=startRow",";","rowIx<=endRow","&&","rowIx<records",".","length",";","rowIx++",")","{","result","+=","getRowSerializedSize","(","records[rowIx]",")",";","}","return","result",";"],"docstring_tokens":["Tallies","a","count","of","the","size","of","the","cell","records","that","are","attached","to","the","rows","in","the","range","specified"],"prompt_tokens":[]}
{"code_tokens":["@Override\n","public","boolean","marshall","(","PackagePart","part,","OutputStream","out",")","throws","OpenXML4JException","{","if","(","!","(","part","instanceof","PackagePropertiesPart",")",")","throw","new","IllegalArgumentException","(","\"'part'","must","be","a","PackagePropertiesPart","instance",".","\"",")",";","propsPart","=","(","PackagePropertiesPart",")","part",";","\n\n","//","Configure","the","document\n","xmlDoc","=","DocumentHelper",".","createDocument","(",")",";","Element","rootElem","=","xmlDoc",".","createElementNS","(","namespaceCoreProperties",".","getNamespaceURI","(",")",",\n","getQName","(","\"coreProperties\",","namespaceCoreProperties",")",")",";","DocumentHelper",".","addNamespaceDeclaration","(","rootElem,\n","namespaceCoreProperties",".","getPrefix","(",")",",","namespaceCoreProperties",".","getNamespaceURI","(",")",")",";","DocumentHelper",".","addNamespaceDeclaration","(","rootElem,\n","namespaceDC",".","getPrefix","(",")",",","namespaceDC",".","getNamespaceURI","(",")",")",";","DocumentHelper",".","addNamespaceDeclaration","(","rootElem,\n","namespaceDcTerms",".","getPrefix","(",")",",","namespaceDcTerms",".","getNamespaceURI","(",")",")",";","DocumentHelper",".","addNamespaceDeclaration","(","rootElem,\n","namespaceXSI",".","getPrefix","(",")",",","namespaceXSI",".","getNamespaceURI","(",")",")",";","xmlDoc",".","appendChild","(","rootElem",")",";","\n\n","addCategory","(",")",";","addContentStatus","(",")",";","addContentType","(",")",";","addCreated","(",")",";","addCreator","(",")",";","addDescription","(",")",";","addIdentifier","(",")",";","addKeywords","(",")",";","addLanguage","(",")",";","addLastModifiedBy","(",")",";","addLastPrinted","(",")",";","addModified","(",")",";","addRevision","(",")",";","addSubject","(",")",";","addTitle","(",")",";","addVersion","(",")",";","return","true",";"],"docstring_tokens":["Marshall","package","core","properties","to","an","XML","document"],"prompt_tokens":[]}
{"code_tokens":["private","void","addCategory","(",")","{","setElementTextContent","(","KEYWORD_CATEGORY,","namespaceCoreProperties,","propsPart",".","getCategoryProperty","(",")",")",";"],"docstring_tokens":["Add","category","property","element","if","needed"],"prompt_tokens":[]}
{"code_tokens":["private","void","addContentStatus","(",")","{","setElementTextContent","(","KEYWORD_CONTENT_STATUS,","namespaceCoreProperties,","propsPart",".","getContentStatusProperty","(",")",")",";"],"docstring_tokens":["Add","content","status","property","element","if","needed"],"prompt_tokens":[]}
{"code_tokens":["private","void","addContentType","(",")","{","setElementTextContent","(","KEYWORD_CONTENT_TYPE,","namespaceCoreProperties,","propsPart",".","getContentTypeProperty","(",")",")",";"],"docstring_tokens":["Add","content","type","property","element","if","needed"],"prompt_tokens":[]}
{"code_tokens":["private","void","addCreated","(",")","{","setElementTextContent","(","KEYWORD_CREATED,","namespaceDcTerms,","propsPart",".","getCreatedProperty","(",")",",\n","propsPart",".","getCreatedPropertyString","(",")",",","\"dcterms:W3CDTF\"",")",";"],"docstring_tokens":["Add","created","property","element","if","needed"],"prompt_tokens":[]}
{"code_tokens":["private","void","addCreator","(",")","{","setElementTextContent","(","KEYWORD_CREATOR,","namespaceDC,","propsPart",".","getCreatorProperty","(",")",")",";"],"docstring_tokens":["Add","creator","property","element","if","needed"],"prompt_tokens":[]}
{"code_tokens":["private","void","addDescription","(",")","{","setElementTextContent","(","KEYWORD_DESCRIPTION,","namespaceDC,","propsPart",".","getDescriptionProperty","(",")",")",";"],"docstring_tokens":["Add","description","property","element","if","needed"],"prompt_tokens":[]}
{"code_tokens":["private","void","addIdentifier","(",")","{","setElementTextContent","(","KEYWORD_IDENTIFIER,","namespaceDC,","propsPart",".","getIdentifierProperty","(",")",")",";"],"docstring_tokens":["Add","identifier","property","element","if","needed"],"prompt_tokens":[]}
{"code_tokens":["private","void","addKeywords","(",")","{","setElementTextContent","(","KEYWORD_KEYWORDS,","namespaceCoreProperties,","propsPart",".","getKeywordsProperty","(",")",")",";"],"docstring_tokens":["Add","keywords","property","element","if","needed"],"prompt_tokens":[]}
{"code_tokens":["private","void","addLanguage","(",")","{","setElementTextContent","(","KEYWORD_LANGUAGE,","namespaceDC,","propsPart",".","getLanguageProperty","(",")",")",";"],"docstring_tokens":["Add","language","property","element","if","needed"],"prompt_tokens":[]}
{"code_tokens":["private","void","addModified","(",")","{","setElementTextContent","(","KEYWORD_MODIFIED,","namespaceDcTerms,","propsPart",".","getModifiedProperty","(",")",",\n","propsPart",".","getModifiedPropertyString","(",")",",","\"dcterms:W3CDTF\"",")",";"],"docstring_tokens":["Add","modified","property","element","if","needed"],"prompt_tokens":[]}
{"code_tokens":["private","void","addRevision","(",")","{","setElementTextContent","(","KEYWORD_REVISION,","namespaceCoreProperties,","propsPart",".","getRevisionProperty","(",")",")",";"],"docstring_tokens":["Add","revision","property","if","needed"],"prompt_tokens":[]}
{"code_tokens":["private","void","addSubject","(",")","{","setElementTextContent","(","KEYWORD_SUBJECT,","namespaceDC,","propsPart",".","getSubjectProperty","(",")",")",";"],"docstring_tokens":["Add","subject","property","if","needed"],"prompt_tokens":[]}
{"code_tokens":["private","void","addTitle","(",")","{","setElementTextContent","(","KEYWORD_TITLE,","namespaceDC,","propsPart",".","getTitleProperty","(",")",")",";"],"docstring_tokens":["Add","title","property","if","needed"],"prompt_tokens":[]}
{"code_tokens":["public","static","ValueEval","evaluate","(","OperationPtg","ptg,","ValueEval[]","args,\n","OperationEvaluationContext","ec",")","{","if","(","ptg","==","null",")","{","throw","new","IllegalArgumentException","(","\"ptg","must","not","be","null\"",")",";","}","Function","result","=","_instancesByPtgClass",".","get","(","ptg",".","getSid","(",")",")",";","FreeRefFunction","udfFunc","=","null",";","if","(","result","==","null",")","{","if","(","ptg","instanceof","AbstractFunctionPtg",")","{","AbstractFunctionPtg","fptg","=","(","AbstractFunctionPtg",")","ptg",";","int","functionIndex","=","fptg",".","getFunctionIndex","(",")",";","switch","(","functionIndex",")","{","case","FunctionMetadataRegistry",".","FUNCTION_INDEX_INDIRECT:\n","udfFunc","=","Indirect",".","instance",";","break",";","case","FunctionMetadataRegistry",".","FUNCTION_INDEX_EXTERNAL:\n","udfFunc","=","UserDefinedFunction",".","instance",";","break",";","default:\n","result","=","FunctionEval",".","getBasicFunction","(","functionIndex",")",";","break",";","}","}","}","if","(","result","!=","null",")","{","\n\n","if","(","result","instanceof","ArrayFunction",")","{","ArrayFunction","func","=","(","ArrayFunction",")","result",";","ValueEval","eval","=","evaluateArrayFunction","(","func,","args,","ec",")",";","if","(","eval","!=","null",")","{","return","eval",";","}","}","\n\n","return","result",".","evaluate","(","args,","ec",".","getRowIndex","(",")",",","ec",".","getColumnIndex","(",")",")",";","}","else","if","(","udfFunc","!=","null",")","{","return","udfFunc",".","evaluate","(","args,","ec",")",";","}","\n\n","throw","new","RuntimeException","(","\"Unexpected","operation","ptg","class","(","\"","+","ptg",".","getClass","(",")",".","getName","(",")","+","\"",")","\"",")",";"],"docstring_tokens":["returns","the","OperationEval","concrete","impl","instance","corresponding","to","the","supplied","operationPtg"],"prompt_tokens":[]}
{"code_tokens":["@Override\n","public","String","getText","(",")","{","return","getHeaderFooter","(",")",".","getFirstHeader","(",")",";"],"docstring_tokens":["Get","the","content","text","representing","this","header"],"prompt_tokens":[]}
{"code_tokens":["@Test\n","public","final","void","readComments","(",")","throws","IOException","{","\n\n","Workbook","wb","=","_testDataProvider",".","openSampleWorkbook","(","\"SimpleWithComments",".","\"","+","_testDataProvider",".","getStandardFileNameExtension","(",")",")",";","\n\n","Sheet","sheet","=","wb",".","getSheetAt","(","0",")",";","\n\n","Cell","cell",";","Row","row",";","Comment","comment",";","\n\n","for","(","int","rownum","=","0",";","rownum","<","3",";","rownum++",")","{","row","=","sheet",".","getRow","(","rownum",")",";","cell","=","row",".","getCell","(","0",")",";","comment","=","cell",".","getCellComment","(",")",";","assertNull","(","comment,","\"Cells","in","the","first","column","are","not","commented\"",")",";","assertNull","(","sheet",".","getCellComment","(","new","CellAddress","(","rownum,","0",")",")",")",";","}","\n\n","for","(","int","rownum","=","0",";","rownum","<","3",";","rownum++",")","{","row","=","sheet",".","getRow","(","rownum",")",";","cell","=","row",".","getCell","(","1",")",";","comment","=","cell",".","getCellComment","(",")",";","assertNotNull","(","comment,","\"Cells","in","the","second","column","have","comments\"",")",";","assertNotNull","(","sheet",".","getCellComment","(","new","CellAddress","(","rownum,","1",")",")",",","\"Cells","in","the","second","column","have","comments\"",")",";","\n\n","assertEquals","(","\"Yegor","Kozlov\",","comment",".","getAuthor","(",")",")",";","assertFalse","(","comment",".","getString","(",")",".","getString","(",")",".","isEmpty","(",")",")",";","assertEquals","(","rownum,","comment",".","getRow","(",")",")",";","assertEquals","(","cell",".","getColumnIndex","(",")",",","comment",".","getColumn","(",")",")",";","}","\n\n","wb",".","close","(",")",";"],"docstring_tokens":["test","that","we","can","read","cell","comments","from","an","existing","workbook"],"prompt_tokens":[]}
{"code_tokens":["@Test\n","public","final","void","modifyComments","(",")","throws","IOException","{","\n\n","Workbook","wb1","=","_testDataProvider",".","openSampleWorkbook","(","\"SimpleWithComments",".","\"","+","_testDataProvider",".","getStandardFileNameExtension","(",")",")",";","CreationHelper","factory","=","wb1",".","getCreationHelper","(",")",";","\n\n","Sheet","sheet","=","wb1",".","getSheetAt","(","0",")",";","\n\n","Cell","cell",";","Row","row",";","Comment","comment",";","\n\n","for","(","int","rownum","=","0",";","rownum","<","3",";","rownum++",")","{","row","=","sheet",".","getRow","(","rownum",")",";","cell","=","row",".","getCell","(","1",")",";","comment","=","cell",".","getCellComment","(",")",";","comment",".","setAuthor","(","\"Mofified[\"","+","rownum","+","\"]","by","Yegor\"",")",";","comment",".","setString","(","factory",".","createRichTextString","(","\"Modified","comment","at","row","\"","+","rownum",")",")",";","}","\n\n","Workbook","wb2","=","_testDataProvider",".","writeOutAndReadBack","(","wb1",")",";","wb1",".","close","(",")",";","sheet","=","wb2",".","getSheetAt","(","0",")",";","\n\n","for","(","int","rownum","=","0",";","rownum","<","3",";","rownum++",")","{","row","=","sheet",".","getRow","(","rownum",")",";","cell","=","row",".","getCell","(","1",")",";","comment","=","cell",".","getCellComment","(",")",";","\n\n","assertEquals","(","\"Mofified[\"","+","rownum","+","\"]","by","Yegor\",","comment",".","getAuthor","(",")",")",";","assertEquals","(","\"Modified","comment","at","row","\"","+","rownum,","comment",".","getString","(",")",".","getString","(",")",")",";","}","\n\n","wb2",".","close","(",")",";"],"docstring_tokens":["test","that","we","can","modify","existing","cell","comments"],"prompt_tokens":[]}
{"code_tokens":["@Override\n","public","int","getRow","(",")","{","return","_note",".","getRow","(",")",";"],"docstring_tokens":["Return","the","row","of","the","cell","that","contains","the","comment"],"prompt_tokens":[]}
{"code_tokens":["@Override\n","public","void","setRow","(","int","row",")","{","_note",".","setRow","(","row",")",";"],"docstring_tokens":["Set","the","row","of","the","cell","that","contains","the","comment"],"prompt_tokens":[]}
{"code_tokens":["@Override\n","public","int","getColumn","(",")","{","return","_note",".","getColumn","(",")",";"],"docstring_tokens":["Return","the","column","of","the","cell","that","contains","the","comment"],"prompt_tokens":[]}
{"code_tokens":["@Override\n","public","void","setColumn","(","int","col",")","{","_note",".","setColumn","(","col",")",";"],"docstring_tokens":["Set","the","column","of","the","cell","that","contains","the","comment"],"prompt_tokens":[]}
{"code_tokens":["@Override\n","public","String","getAuthor","(",")","{","return","_note",".","getAuthor","(",")",";"],"docstring_tokens":["Name","of","the","original","comment","author"],"prompt_tokens":[]}
{"code_tokens":["public","static","synchronized","Map<Integer,HSSFColor>","getIndexHash","(",")","{","if","(","indexHash","==","null",")","{","indexHash","=","Collections",".","unmodifiableMap","(","createColorsByIndexMap","(",")",")",";","}","\n\n","return","indexHash",";"],"docstring_tokens":["This","function","returns","all","the","colours","in","an","unmodifiable","Map"],"prompt_tokens":[]}
{"code_tokens":["@Deprecated\n","@Removal","(","version=\"3",".","18\"",")","private","static","synchronized","Map<HSSFColorPredefined,HSSFColor>","mapEnumToColorClass","(",")","{","if","(","enumList","==","null",")","{","enumList","=","new","EnumMap<>","(","HSSFColorPredefined",".","class",")",";","//","AUTOMATIC","is","not","add","to","list\n","addHSSFColorPredefined","(","HSSFColorPredefined",".","BLACK",")",";","addHSSFColorPredefined","(","HSSFColorPredefined",".","BROWN",")",";","addHSSFColorPredefined","(","HSSFColorPredefined",".","OLIVE_GREEN",")",";","addHSSFColorPredefined","(","HSSFColorPredefined",".","DARK_GREEN",")",";","addHSSFColorPredefined","(","HSSFColorPredefined",".","DARK_TEAL",")",";","addHSSFColorPredefined","(","HSSFColorPredefined",".","DARK_BLUE",")",";","addHSSFColorPredefined","(","HSSFColorPredefined",".","INDIGO",")",";","addHSSFColorPredefined","(","HSSFColorPredefined",".","GREY_80_PERCENT",")",";","addHSSFColorPredefined","(","HSSFColorPredefined",".","ORANGE",")",";","addHSSFColorPredefined","(","HSSFColorPredefined",".","DARK_YELLOW",")",";","addHSSFColorPredefined","(","HSSFColorPredefined",".","GREEN",")",";","addHSSFColorPredefined","(","HSSFColorPredefined",".","TEAL",")",";","addHSSFColorPredefined","(","HSSFColorPredefined",".","BLUE",")",";","addHSSFColorPredefined","(","HSSFColorPredefined",".","BLUE_GREY",")",";","addHSSFColorPredefined","(","HSSFColorPredefined",".","GREY_50_PERCENT",")",";","addHSSFColorPredefined","(","HSSFColorPredefined",".","RED",")",";","addHSSFColorPredefined","(","HSSFColorPredefined",".","LIGHT_ORANGE",")",";","addHSSFColorPredefined","(","HSSFColorPredefined",".","LIME",")",";","addHSSFColorPredefined","(","HSSFColorPredefined",".","SEA_GREEN",")",";","addHSSFColorPredefined","(","HSSFColorPredefined",".","AQUA",")",";","addHSSFColorPredefined","(","HSSFColorPredefined",".","LIGHT_BLUE",")",";","addHSSFColorPredefined","(","HSSFColorPredefined",".","VIOLET",")",";","addHSSFColorPredefined","(","HSSFColorPredefined",".","GREY_40_PERCENT",")",";","addHSSFColorPredefined","(","HSSFColorPredefined",".","PINK",")",";","addHSSFColorPredefined","(","HSSFColorPredefined",".","GOLD",")",";","addHSSFColorPredefined","(","HSSFColorPredefined",".","YELLOW",")",";","addHSSFColorPredefined","(","HSSFColorPredefined",".","BRIGHT_GREEN",")",";","addHSSFColorPredefined","(","HSSFColorPredefined",".","TURQUOISE",")",";","addHSSFColorPredefined","(","HSSFColorPredefined",".","DARK_RED",")",";","addHSSFColorPredefined","(","HSSFColorPredefined",".","SKY_BLUE",")",";","addHSSFColorPredefined","(","HSSFColorPredefined",".","PLUM",")",";","addHSSFColorPredefined","(","HSSFColorPredefined",".","GREY_25_PERCENT",")",";","addHSSFColorPredefined","(","HSSFColorPredefined",".","ROSE",")",";","addHSSFColorPredefined","(","HSSFColorPredefined",".","LIGHT_YELLOW",")",";","addHSSFColorPredefined","(","HSSFColorPredefined",".","LIGHT_GREEN",")",";","addHSSFColorPredefined","(","HSSFColorPredefined",".","LIGHT_TURQUOISE",")",";","addHSSFColorPredefined","(","HSSFColorPredefined",".","PALE_BLUE",")",";","addHSSFColorPredefined","(","HSSFColorPredefined",".","LAVENDER",")",";","addHSSFColorPredefined","(","HSSFColorPredefined",".","WHITE",")",";","addHSSFColorPredefined","(","HSSFColorPredefined",".","CORNFLOWER_BLUE",")",";","addHSSFColorPredefined","(","HSSFColorPredefined",".","LEMON_CHIFFON",")",";","addHSSFColorPredefined","(","HSSFColorPredefined",".","MAROON",")",";","addHSSFColorPredefined","(","HSSFColorPredefined",".","ORCHID",")",";","addHSSFColorPredefined","(","HSSFColorPredefined",".","CORAL",")",";","addHSSFColorPredefined","(","HSSFColorPredefined",".","ROYAL_BLUE",")",";","addHSSFColorPredefined","(","HSSFColorPredefined",".","LIGHT_CORNFLOWER_BLUE",")",";","addHSSFColorPredefined","(","HSSFColorPredefined",".","TAN",")",";","}","return","enumList",";"],"docstring_tokens":["Maps","the","Enums","to","the","HSSFColor,","in","cases","of","user","code","evaluating","the","classname"],"prompt_tokens":[]}
{"code_tokens":["\n\n","public","short","getIndex","(",")","{","return","(","short",")","index",";"],"docstring_tokens":["returns","color","standard","palette","index"],"prompt_tokens":[]}
{"code_tokens":["\n\n","public","short","getIndex2","(",")","{","return","(","short",")","index2",";"],"docstring_tokens":["returns","alternative","color","standard","palette","index"],"prompt_tokens":[]}
{"code_tokens":["public","static","HSSFColor","toHSSFColor","(","Color","color",")","{","//","FIXME:","this","method","would","be","more","useful","if","it","could","convert","any","Color","to","an","HSSFColor\n","//","Currently","the","only","benefit","of","this","method","is","to","throw","an","IllegalArgumentException\n","//","instead","of","a","ClassCastException",".","if","(","color","!=","null","&&","!","(","color","instanceof","HSSFColor",")",")","{","throw","new","IllegalArgumentException","(","\"Only","HSSFColor","objects","are","supported,","but","had","\"","+","color",".","getClass","(",")",")",";","}","return","(","HSSFColor",")","color",";"],"docstring_tokens":["Checked","type","cast","color","to","an","HSSFColor"],"prompt_tokens":[]}
{"code_tokens":["public","int","getEscherProperty","(","short","propId",")","{","AbstractEscherOptRecord","opt","=","getEscherOptRecord","(",")",";","EscherSimpleProperty","prop","=","getEscherProperty","(","opt,","propId",")",";","return","prop","==","null","?","0",":","prop",".","getPropertyValue","(",")",";"],"docstring_tokens":["Get","the","value","of","a","simple","escher","property","for","this","shape"],"prompt_tokens":[]}
{"code_tokens":["protected","HSLFEscherClientDataRecord","getClientData","(","boolean","create",")","{","HSLFEscherClientDataRecord","clientData","=","getEscherChild","(","EscherClientDataRecord",".","RECORD_ID",")",";","if","(","clientData","==","null","&&","create",")","{","clientData","=","new","HSLFEscherClientDataRecord","(",")",";","clientData",".","setOptions","(","(","short",")","15",")",";","clientData",".","setRecordId","(","EscherClientDataRecord",".","RECORD_ID",")",";","getSpContainer","(",")",".","addChildBefore","(","clientData,","EscherTextboxRecord",".","RECORD_ID",")",";","}","return","clientData",";"],"docstring_tokens":["Create","a","new","HSLF-specific","EscherClientDataRecord"],"prompt_tokens":[]}
{"code_tokens":["\n\n","public","boolean","containsAll","(","final","IntList","c",")","{","if","(","this","!=","c",")","{","for","(","int","j","=","0",";","j","<","c",".","_limit",";","j++",")","{","if","(","!contains","(","c",".","_array[","j","]",")",")","{","return","false",";","}","}","}","return","true",";"],"docstring_tokens":["Returns","true","if","this","list","contains","all","of","the","elements","of","the","specified","collection"],"prompt_tokens":[]}
{"code_tokens":["\n\n","public","int","get","(","final","int","index",")","{","if","(","index",">=","_limit",")","{","throw","new","IndexOutOfBoundsException","(","index","+","\"","not","accessible","in","a","list","of","length","\"","+","_limit\n",")",";","}","return","_array[","index","]",";"],"docstring_tokens":["Returns","the","element","at","the","specified","position","in","this","list"],"prompt_tokens":[]}
{"code_tokens":["\n\n","public","boolean","isEmpty","(",")","{","return","_limit","==","0",";"],"docstring_tokens":["Returns","true","if","this","list","contains","no","elements"],"prompt_tokens":[]}
{"code_tokens":["\n\n","public","boolean","removeAll","(","final","IntList","c",")","{","boolean","rval","=","false",";","\n\n","for","(","int","j","=","0",";","j","<","c",".","_limit",";","j++",")","{","if","(","removeValue","(","c",".","_array[","j","]",")",")","{","rval","=","true",";","}","}","return","rval",";"],"docstring_tokens":["Removes","from","this","list","all","the","elements","that","are","contained","in","the","specified","collection"],"prompt_tokens":[]}
{"code_tokens":["\n\n","public","int","set","(","final","int","index,","final","int","element",")","{","if","(","index",">=","_limit",")","{","throw","new","IndexOutOfBoundsException","(",")",";","}","int","rval","=","_array[","index","]",";","\n\n","_array[","index","]","=","element",";","return","rval",";"],"docstring_tokens":["Replaces","the","element","at","the","specified","position","in","this","list","with","the","specified","element"],"prompt_tokens":[]}
{"code_tokens":["\n\n","public","int","getSize","(",")","{","return","getProperty","(",")",".","getSize","(",")",";"],"docstring_tokens":["get","the","zize","of","the","document,","in","bytes"],"prompt_tokens":[]}
{"code_tokens":["public","void","addRelationship","(","PackageRelationship","relPart",")","{","if","(","relPart","==","null","||","relPart",".","getId","(",")","==","null","||","relPart",".","getId","(",")",".","isEmpty","(",")",")","{","throw","new","IllegalArgumentException","(","\"invalid","relationship","part/id:","\"","+\n","(","relPart","==","null","?","\"<null>\"",":","relPart",".","getId","(",")",")","+","\"","for","relationship:","\"","+","relPart",")",";","}","relationshipsByID",".","put","(","relPart",".","getId","(",")",",","relPart",")",";","relationshipsByType",".","put","(","relPart",".","getRelationshipType","(",")",",","relPart",")",";"],"docstring_tokens":["Add","the","specified","relationship","to","the","collection"],"prompt_tokens":[]}
{"code_tokens":["public","PackageRelationship","addRelationship","(","URI","targetUri,\n","TargetMode","targetMode,","String","relationshipType,","String","id",")","{","if","(","id","==","null","||","id",".","length","(",")","==","0",")","{","//","Generate","a","unique","ID","is","id","parameter","is","null",".","if","(","nextRelationshipId","==","-1",")","{","nextRelationshipId","=","size","(",")","+","1",";","}","\n\n","//","Work","up","until","we","find","a","unique","number","(","there","could","be","gaps","etc",")","do","{","id","=","\"rId\"","+","nextRelationshipId++",";","}","while","(","relationshipsByID",".","get","(","id",")","!=","null",")",";","}","\n\n","PackageRelationship","rel","=","new","PackageRelationship","(","container,\n","sourcePart,","targetUri,","targetMode,","relationshipType,","id",")",";","addRelationship","(","rel",")",";","if","(","targetMode","==","TargetMode",".","INTERNAL",")","{","internalRelationshipsByTargetName",".","put","(","targetUri",".","toASCIIString","(",")",",","rel",")",";","}","return","rel",";"],"docstring_tokens":["Add","a","relationship","to","the","collection"],"prompt_tokens":[]}
{"code_tokens":["public","void","removeRelationship","(","String","id",")","{","PackageRelationship","rel","=","relationshipsByID",".","get","(","id",")",";","if","(","rel","!=","null",")","{","relationshipsByID",".","remove","(","rel",".","getId","(",")",")",";","relationshipsByType",".","values","(",")",".","remove","(","rel",")",";","internalRelationshipsByTargetName",".","values","(",")",".","remove","(","rel",")",";","}"],"docstring_tokens":["Remove","a","relationship","by","its","ID"],"prompt_tokens":[]}
{"code_tokens":["public","PackageRelationship","getRelationship","(","int","index",")","{","if","(","index","<","0","||","index",">","relationshipsByID",".","values","(",")",".","size","(",")",")","throw","new","IllegalArgumentException","(","\"index\"",")",";","\n\n","int","i","=","0",";","for","(","PackageRelationship","rel",":","relationshipsByID",".","values","(",")",")","{","if","(","index","==","i++",")","return","rel",";","}","\n\n","return","null",";"],"docstring_tokens":["Retrieves","a","relationship","by","its","index","in","the","collection"],"prompt_tokens":[]}
{"code_tokens":["public","int","size","(",")","{","return","relationshipsByID",".","size","(",")",";"],"docstring_tokens":["Get","the","number","of","relationships","in","the","collection"],"prompt_tokens":[]}
{"code_tokens":["public","void","parseRelationshipsPart","(","PackagePart","relPart",")","throws","InvalidFormatException","{","try","{","LOG",".","atDebug","(",")",".","log","(","\"Parsing","relationship:","{","}","\",","relPart",".","getPartName","(",")",")",";","Document","xmlRelationshipsDoc",";","try","(","InputStream","partStream","=","relPart",".","getInputStream","(",")",")","{","xmlRelationshipsDoc","=","DocumentHelper",".","readDocument","(","partStream",")",";","}","\n\n","//","Browse","default","types\n","Element","root","=","xmlRelationshipsDoc",".","getDocumentElement","(",")",";","\n\n","//","Check","OPC","compliance","M4",".","1","rule\n","boolean","fCorePropertiesRelationship","=","false",";","\n\n","NodeList","nodeList","=","root",".","getElementsByTagNameNS","(","PackageNamespaces",".","RELATIONSHIPS,","PackageRelationship",".","RELATIONSHIP_TAG_NAME",")",";","int","nodeCount","=","nodeList",".","getLength","(",")",";","for","(","int","i","=","0",";","i","<","nodeCount",";","i++",")","{","Element","element","=","(","Element",")","nodeList",".","item","(","i",")",";","//","Relationship","ID\n","String","id","=","element",".","getAttribute","(","PackageRelationship",".","ID_ATTRIBUTE_NAME",")",";","//","Relationship","type\n","String","type","=","element",".","getAttribute","(","PackageRelationship",".","TYPE_ATTRIBUTE_NAME",")",";","\n\n","/*","Check","OPC","Compliance","*/\n","//","Check","Rule","M4",".","1\n","if","(","type",".","equals","(","PackageRelationshipTypes",".","CORE_PROPERTIES",")",")","if","(","!fCorePropertiesRelationship",")","fCorePropertiesRelationship","=","true",";","else\n","throw","new","InvalidFormatException","(","\"OPC","Compliance","error","[M4",".","1]:","there","is","more","than","one","core","properties","relationship","in","the","package","!\"",")",";","\n\n","/*","End","OPC","Compliance","*/\n\n","//","TargetMode","(","default","value","\"Internal\"",")","Attr","targetModeAttr","=","element",".","getAttributeNode","(","PackageRelationship",".","TARGET_MODE_ATTRIBUTE_NAME",")",";","TargetMode","targetMode","=","TargetMode",".","INTERNAL",";","if","(","targetModeAttr","!=","null",")","{","targetMode","=","targetModeAttr",".","getValue","(",")",".","toLowerCase","(","Locale",".","ROOT",")",".","equals","(","\"internal\"",")","?","TargetMode",".","INTERNAL\n",":","TargetMode",".","EXTERNAL",";","}","\n\n","//","Target","converted","in","URI\n","URI","target","=","PackagingURIHelper",".","toURI","(","\"http://invalid",".","uri\"",")",";","//","dummy","url\n","String","value","=","element",".","getAttribute","(","PackageRelationship",".","TARGET_ATTRIBUTE_NAME",")",";","try","{","//","when","parsing","of","the","given","uri","fails,","we","can","either\n","//","ignore","this","relationship,","which","leads","to","IllegalStateException\n","//","later","on,","or","use","a","dummy","value","and","thus","enable","processing","of","the\n","//","package\n","target","=","PackagingURIHelper",".","toURI","(","value",")",";","}","catch","(","URISyntaxException","e",")","{","LOG",".","atError","(",")",".","withThrowable","(","e",")",".","log","(","\"Cannot","convert","{","}","in","a","valid","relationship","URI->","dummy-URI","used\",","value",")",";","}","addRelationship","(","target,","targetMode,","type,","id",")",";","}","}","catch","(","Exception","e",")","{","throw","new","InvalidFormatException","(","\"Failed","to","parse","relationships\",","e",")",";","}"],"docstring_tokens":["Parse","the","relationship","part","and","add","all","relationship","in","this","collection"],"prompt_tokens":[]}
{"code_tokens":["public","Iterator<PackageRelationship>","iterator","(","String","typeFilter",")","{","ArrayList<PackageRelationship>","retArr","=","new","ArrayList<>","(",")",";","for","(","PackageRelationship","rel",":","relationshipsByID",".","values","(",")",")","{","if","(","rel",".","getRelationshipType","(",")",".","equals","(","typeFilter",")",")","retArr",".","add","(","rel",")",";","}","return","retArr",".","iterator","(",")",";"],"docstring_tokens":["Get","an","iterator","of","a","collection","with","all","relationship","with","the","specified","type"],"prompt_tokens":[]}
{"code_tokens":["public","void","serialize","(","LittleEndianOutput","out",")","{","out",".","writeShort","(","sid",")",";","out",".","writeShort","(","length",")",";","out",".","writeShort","(","flags",")",";"],"docstring_tokens":["Serialize","the","record","data","into","the","supplied","array","of","bytes"],"prompt_tokens":[]}
{"code_tokens":["@SuppressWarnings","(","\"unused\"",")","public","CommandDefinition[]","getCommandDefinitions","(",")","{","return","commandDefinitions",";"],"docstring_tokens":["Gets","the","command","definitions,","which","define","and","describe","much","of","the","data","held","by","the","chunk"],"prompt_tokens":[]}
{"code_tokens":["public","int","getOnDiskSize","(",")","{","int","size","=","header",".","getSizeInBytes","(",")","+","contents",".","length",";","if","(","trailer","!=","null",")","{","size","+=","trailer",".","getTrailerData","(",")",".","length",";","}","if","(","separator","!=","null",")","{","size","+=","separator",".","separatorData",".","length",";","}","return","size",";"],"docstring_tokens":["Returns","the","size","of","the","chunk,","including","any","headers,","trailers","and","separators"],"prompt_tokens":[]}
{"code_tokens":["void","processCommands","(",")","{","if","(","commandDefinitions","==","null",")","{","throw","new","IllegalStateException","(","\"You","must","supply","the","command","definitions","before","calling","processCommands!\"",")",";","}","\n\n","//","Loop","over","the","definitions,","building","the","commands\n","//","and","getting","their","values\n","ArrayList<Command>","commandList","=","new","ArrayList<>","(",")",";","for","(","CommandDefinition","cdef",":","commandDefinitions",")","{","int","type","=","cdef",".","getType","(",")",";","int","offset","=","cdef",".","getOffset","(",")",";","\n\n","//","Handle","virtual","commands\n","if","(","type","==","10",")","{","name","=","cdef",".","getName","(",")",";","continue",";","}","else","if","(","type","==","18",")","{","continue",";","}","\n\n\n","//","Build","the","appropriate","command","for","the","type\n","Command","command",";","if","(","type","==","11","||","type","==","21",")","{","command","=","new","BlockOffsetCommand","(","cdef",")",";","}","else","{","command","=","new","Command","(","cdef",")",";","}","\n\n","//","Bizarrely,","many","of","the","offsets","are","from","the","start","of","the\n","//","header,","not","from","the","start","of","the","chunk","body\n","switch","(","type",")","{","case","0:","case","1:","case","2:","case","3:","case","4:","case","5:","case","6:","case","7:\n","case","11:","case","21:\n","case","12:","case","16:","case","17:","case","28:","case","29:\n","//","Offset","is","from","start","of","chunk","(","case","18","has","been","taken","care","of","above",")","break",";","default:\n","//","Offset","is","from","start","of","header!\n","if","(","offset",">=","19",")","{","offset","-=","19",";","}","}","\n\n","//","Check","we","seem","to","have","enough","data\n","if","(","offset",">=","contents",".","length",")","{","LOG",".","atWarn","(",")",".","log","(","\"Command","offset","{","}","past","end","of","data","at","{","}","\",","box","(","offset",")",",box","(","contents",".","length",")",")",";","continue",";","}","\n\n","try","{","//","Process\n","switch","(","type",")","{","//","Types","0->7","=","a","flag","at","bit","0->7\n","case","0:","case","1:","case","2:","case","3:","case","4:","case","5:","case","6:","case","7:\n","command",".","value","=","(","(","contents[offset]",">>>","type",")","&","1",")","==","1",";","break",";","case","8:\n","command",".","value","=","contents[offset]",";","break",";","case","9:\n","command",".","value","=","LittleEndian",".","getDouble","(","contents,","offset",")",";","break",";","case","12:\n","//","A","Little","Endian","String\n","//","Starts","8","bytes","into","the","data","segment\n","//","Ends","at","end","of","data,","or","00","00\n\n","//","Ensure","we","have","enough","data\n","if","(","contents",".","length","<","8",")","{","command",".","value","=","\"\"",";","break",";","}","\n\n","//","Find","the","end","point\n","int","startsAt","=","8",";","int","endsAt","=","startsAt",";","for","(","int","j=startsAt",";","j<contents",".","length-1","&&","endsAt","==","startsAt",";","j++",")","{","if","(","contents[j]","==","0","&&","contents[j+1]","==","0",")","{","endsAt","=","j",";","}","}","if","(","endsAt","==","startsAt",")","{","endsAt","=","contents",".","length",";","}","\n\n","int","strLen","=","endsAt","-","startsAt",";","command",".","value","=","new","String","(","contents,","startsAt,","strLen,","header",".","getChunkCharset","(",")",".","name","(",")",")",";","break",";","case","25:\n","command",".","value","=","LittleEndian",".","getShort","(","contents,","offset",")",";","break",";","case","26:\n","command",".","value","=","LittleEndian",".","getInt","(","contents,","offset",")",";","break",";","\n\n","//","Types","11","and","21","hold","the","offset","to","the","blocks\n","case","11:","case","21:\n","if","(","offset","<","contents",".","length","-","3",")","{","int","bOffset","=","(","int",")","LittleEndian",".","getUInt","(","contents,","offset",")",";","BlockOffsetCommand","bcmd","=","(","BlockOffsetCommand",")","command",";","bcmd",".","setOffset","(","bOffset",")",";","}","break",";","\n\n","default:\n","LOG",".","atInfo","(",")",".","log","(","\"Command","of","type","{","}","not","processed!\",","box","(","type",")",")",";","}","}","catch","(","Exception","e",")","{","LOG",".","atError","(",")",".","withThrowable","(","e",")",".","log","(","\"Unexpected","error","processing","command,","ignoring","and","continuing",".","Command:","{","}","\",","command",")",";","}","\n\n","//","Add","to","the","array\n","commandList",".","add","(","command",")",";","}","\n\n","//","Save","the","commands","we","liked","the","look","of\n","this",".","commands","=","commandList",".","toArray","(","new","Command[0]",")",";","\n\n","//","Now","build","up","the","blocks,","if","we","had","a","command","that","tells\n","//","us","where","a","block","is\n"],"docstring_tokens":["Uses","our","CommandDefinitions","to","process","the","commands","our","chunk","type","has,","and","figure","out","the","values","for","them"],"prompt_tokens":[]}
{"code_tokens":["@Override\n","public","void","onDocumentRead","(",")","throws","IOException","{","try","(","InputStream","is","=","getPackagePart","(",")",".","getInputStream","(",")",")","{","CommentsDocument","doc","=","CommentsDocument",".","Factory",".","parse","(","is,","DEFAULT_XML_OPTIONS",")",";","ctComments","=","doc",".","getComments","(",")",";","for","(","CTComment","ctComment",":","ctComments",".","getCommentList","(",")",")","{","comments",".","add","(","new","XWPFComment","(","ctComment,","this",")",")",";","}","}","catch","(","XmlException","e",")","{","throw","new","POIXMLException","(","\"Unable","to","read","comments\",","e",")",";","}","\n\n","for","(","POIXMLDocumentPart","poixmlDocumentPart",":","getRelations","(",")",")","{","if","(","poixmlDocumentPart","instanceof","XWPFPictureData",")","{","XWPFPictureData","xwpfPicData","=","(","XWPFPictureData",")","poixmlDocumentPart",";","pictures",".","add","(","xwpfPicData",")",";","document",".","registerPackagePictureData","(","xwpfPicData",")",";","}","}"],"docstring_tokens":["read","comments","form","an","existing","package"],"prompt_tokens":[]}
{"code_tokens":["public","XWPFComment","createComment","(","BigInteger","cid",")","{","CTComment","ctComment","=","ctComments",".","addNewComment","(",")",";","ctComment",".","setId","(","cid",")",";","XWPFComment","comment","=","new","XWPFComment","(","ctComment,","this",")",";","comments",".","add","(","comment",")",";","return","comment",";"],"docstring_tokens":["Create","a","new","comment","and","add","it","to","the","document"],"prompt_tokens":[]}
{"code_tokens":["private","int","setGroupHidden","(","int","pIdx,","int","level,","boolean","hidden",")","{","int","idx","=","pIdx",";","ColumnInfoRecord","columnInfo","=","getColInfo","(","idx",")",";","while","(","idx","<","records",".","size","(",")",")","{","columnInfo",".","setHidden","(","hidden",")",";","if","(","idx","+","1","<","records",".","size","(",")",")","{","ColumnInfoRecord","nextColumnInfo","=","getColInfo","(","idx","+","1",")",";","if","(","!columnInfo",".","isAdjacentBefore","(","nextColumnInfo",")",")","{","break",";","}","if","(","nextColumnInfo",".","getOutlineLevel","(",")","<","level",")","{","break",";","}","columnInfo","=","nextColumnInfo",";","}","idx++",";","}","return","columnInfo",".","getLastColumn","(",")",";"],"docstring_tokens":["Sets","all","adjacent","columns","of","the","same","outline","level","to","the","specified","hidden","status"],"prompt_tokens":[]}
{"code_tokens":["public","void","readFrom","(","InputStream","is",")","throws","IOException,","SAXException","{","//","test","if","the","file","is","empty,","otherwise","parse","it\n","PushbackInputStream","pis","=","new","PushbackInputStream","(","is,","1",")",";","int","emptyTest","=","pis",".","read","(",")",";","if","(","emptyTest",">","-1",")","{","pis",".","unread","(","emptyTest",")",";","InputSource","sheetSource","=","new","InputSource","(","pis",")",";","try","{","XMLReader","sheetParser","=","XMLHelper",".","newXMLReader","(",")",";","sheetParser",".","setContentHandler","(","this",")",";","sheetParser",".","parse","(","sheetSource",")",";","}","catch","(","ParserConfigurationException","e",")","{","throw","new","SAXException","(","\"SAX","parser","appears","to","be","broken","-","\"","+","e",".","getMessage","(",")",")",";","}","}"],"docstring_tokens":["Read","this","shared","strings","table","from","an","XML","file"],"prompt_tokens":[]}
{"code_tokens":["@Override\n","public","int","getValue","(",")","{","return","maskValue","(","super",".","getValue","(",")",")",";"],"docstring_tokens":["Return","the","text","property","value"],"prompt_tokens":[]}
{"code_tokens":["public","static","void","registerFunction","(","String","name,","FreeRefFunction","func",")","{","AnalysisToolPak","inst","=","(","AnalysisToolPak",")","instance",";","if","(","!isATPFunction","(","name",")",")","{","FunctionMetadata","metaData","=","FunctionMetadataRegistry",".","getFunctionByName","(","name",")",";","if","(","metaData","!=","null",")","{","throw","new","IllegalArgumentException","(","name","+","\"","is","a","built-in","Excel","function",".","\"","+\n","\"Use","FunctionEval",".","registerFunction","(","String","name,","Function","func",")","instead",".","\"",")",";","}","\n\n","throw","new","IllegalArgumentException","(","name","+","\"","is","not","a","function","from","the","Excel","Analysis","Toolpack",".","\"",")",";","}","FreeRefFunction","f","=","inst",".","findFunction","(","name",")",";","if","(","f","!=","null","&&","!","(","f","instanceof","NotImplemented",")",")","{","throw","new","IllegalArgumentException","(","\"POI","already","implements","\"","+","name","+\n","\"",".","You","cannot","override","POI's","implementations","of","Excel","functions\"",")",";","}","\n\n","//","FIXME:","inconsistent","case-sensitivity\n","inst",".","_functionsByName",".","put","(","name,","func",")",";"],"docstring_tokens":["Register","an","ATP","function","in","runtime"],"prompt_tokens":[]}
{"code_tokens":["@Override\n","public","int","serializeSimplePart","(","byte[]","data,","int","offset",")","{","LittleEndian",".","putShort","(","data,","offset,","getId","(",")",")",";","LittleEndian",".","putInt","(","data,","offset","+","2,","propertyValue",")",";","return","6",";"],"docstring_tokens":["Serialize","the","simple","part","of","the","escher","record"],"prompt_tokens":[]}
{"code_tokens":["@Override\n","public","boolean","equals","(","Object","o",")","{","if","(","this","==","o",")","{","return","true",";","}","if","(","!","(","o","instanceof","EscherSimpleProperty",")",")","{","return","false",";","}","\n\n","final","EscherSimpleProperty","escherSimpleProperty","=","(","EscherSimpleProperty",")","o",";","\n\n","if","(","propertyValue","!=","escherSimpleProperty",".","propertyValue",")","{","return","false",";","}","if","(","getId","(",")","!=","escherSimpleProperty",".","getId","(",")",")","{","return","false",";","}","\n\n","return","true",";"],"docstring_tokens":["Returns","true","if","one","escher","property","is","equal","to","another"],"prompt_tokens":[]}
{"code_tokens":["public","void","clearText","(",")","{","_paragraphs",".","clear","(",")",";","CTTextBody","txBody","=","getTextBody","(","true",")",";","txBody",".","setPArray","(","null",")",";","//","remove","any","existing","paragraphs\n"],"docstring_tokens":["unset","text","from","this","shape"],"prompt_tokens":[]}
{"code_tokens":["public","XSLFTextParagraph","addNewTextParagraph","(",")","{","CTTextBody","txBody","=","getTextBody","(","false",")",";","CTTextParagraph","p",";","if","(","txBody","==","null",")","{","txBody","=","getTextBody","(","true",")",";","new","XDDFTextBody","(","this,","txBody",")",".","initialize","(",")",";","p","=","txBody",".","getPArray","(","0",")",";","p",".","removeR","(","0",")",";","}","else","{","p","=","txBody",".","addNewP","(",")",";","}","XSLFTextParagraph","paragraph","=","newTextParagraph","(","p",")",";","_paragraphs",".","add","(","paragraph",")",";","return","paragraph",";"],"docstring_tokens":["add","a","new","paragraph","run","to","this","shape"],"prompt_tokens":[]}
{"code_tokens":["@Override\n","public","void","close","(",")","throws","IOException","{","this",".","flush","(",")",";"],"docstring_tokens":["Close","this","stream","and","flush","the","content"],"prompt_tokens":[]}
{"code_tokens":["public","static","CFRecordsAggregate","createCFAggregate","(","RecordStream","rs",")","{","Record","rec","=","rs",".","getNext","(",")",";","if","(","rec",".","getSid","(",")","!=","CFHeaderRecord",".","sid","&&\n","rec",".","getSid","(",")","!=","CFHeader12Record",".","sid",")","{","throw","new","IllegalStateException","(","\"next","record","sid","was","\"","+","rec",".","getSid","(",")","+","\"","instead","of","\"","+","CFHeaderRecord",".","sid","+","\"","or","\"","+\n","CFHeader12Record",".","sid","+","\"","as","expected\"",")",";","}","\n\n","CFHeaderBase","header","=","(","CFHeaderBase",")","rec",";","int","nRules","=","header",".","getNumberOfConditionalFormats","(",")",";","\n\n","CFRuleBase[]","rules","=","new","CFRuleBase[nRules]",";","for","(","int","i","=","0",";","i","<","rules",".","length",";","i++",")","{","rules[i]","=","(","CFRuleBase",")","rs",".","getNext","(",")",";","}","\n\n","return","new","CFRecordsAggregate","(","header,","rules",")",";"],"docstring_tokens":["Create","CFRecordsAggregate","from","a","list","of","CF","Records"],"prompt_tokens":[]}
{"code_tokens":["public","String","toString","(",")","{","return","GenericRecordJsonWriter",".","marshal","(","this",")",";"],"docstring_tokens":["String","representation","of","CFRecordsAggregate"],"prompt_tokens":[]}
{"code_tokens":["public","XWPFFootnote","createFootnote","(",")","{","CTFtnEdn","newNote","=","CTFtnEdn",".","Factory",".","newInstance","(",")",";","newNote",".","setType","(","STFtnEdn",".","NORMAL",")",";","\n\n","XWPFFootnote","footnote","=","addFootnote","(","newNote",")",";","footnote",".","getCTFtnEdn","(",")",".","setId","(","getIdManager","(",")",".","nextId","(",")",")",";","return","footnote",";","\n\n"],"docstring_tokens":["Create","a","new","footnote","and","add","it","to","the","document"],"prompt_tokens":[]}
{"code_tokens":["@SuppressWarnings","(","\"WeakerAccess\"",")","public","void","mergeCells","(","int","firstCol,","int","lastCol",")","{","if","(","firstCol",">=","lastCol",")","{","throw","new","IllegalArgumentException","(","\"Cannot","merge,","first","column",">=","last","column",":","\"\n","+","firstCol","+","\"",">=","\"","+","lastCol\n",")",";","}","\n\n","final","int","colSpan","=","(","lastCol","-","firstCol",")","+","1",";","\n\n","_cells",".","get","(","firstCol",")",".","setGridSpan","(","colSpan",")",";","for","(","final","XSLFTableCell","cell",":","_cells",".","subList","(","firstCol+1,","lastCol+1",")",")","{","cell",".","setHMerge","(",")",";","}"],"docstring_tokens":["Merge","cells","of","a","table","row,","inclusive"],"prompt_tokens":[]}
{"code_tokens":["\n\n","@Override\n","public","void","setColor","(","short","color",")","{","font",".","setColorPaletteIndex","(","color",")",";"],"docstring_tokens":["set","the","color","for","the","font"],"prompt_tokens":[]}
{"code_tokens":["@Override\n","public","short","getColor","(",")","{","return","font",".","getColorPaletteIndex","(",")",";"],"docstring_tokens":["get","the","color","for","the","font"],"prompt_tokens":[]}
{"code_tokens":["public","HSSFColor","getHSSFColor","(","HSSFWorkbook","wb",")","{","HSSFPalette","pallette","=","wb",".","getCustomPalette","(",")",";","return","pallette",".","getColor","(","getColor","(",")",")",";"],"docstring_tokens":["get","the","color","value","for","the","font"],"prompt_tokens":[]}
{"code_tokens":["@Override\n","public","void","setBold","(","boolean","bold",")","{","if","(","bold",")","font",".","setBoldWeight","(","BOLDWEIGHT_BOLD",")",";","else\n","font",".","setBoldWeight","(","BOLDWEIGHT_NORMAL",")",";"],"docstring_tokens":["sets","the","font","to","be","bold","or","not"],"prompt_tokens":[]}
{"code_tokens":["@Override\n","public","boolean","getBold","(",")","{","return","font",".","getBoldWeight","(",")","==","BOLDWEIGHT_BOLD",";"],"docstring_tokens":["get","if","the","font","is","bold","or","not"],"prompt_tokens":[]}
{"code_tokens":["public","String","format","(","Object","value",")","{","StringBuffer","sb","=","new","StringBuffer","(",")",";","formatValue","(","sb,","value",")",";","return","sb",".","toString","(",")",";"],"docstring_tokens":["Formats","the","value,","returning","the","resulting","string"],"prompt_tokens":[]}
{"code_tokens":["public","String","simpleFormat","(","Object","value",")","{","StringBuffer","sb","=","new","StringBuffer","(",")",";","simpleValue","(","sb,","value",")",";","return","sb",".","toString","(",")",";"],"docstring_tokens":["Formats","the","value","in","the","most","basic","way,","returning","the","resulting","string"],"prompt_tokens":[]}
{"code_tokens":["@Override\n","protected","void","onDocumentRead","(",")","throws","IOException","{","NumberingDocument","numberingDoc",";","InputStream","is",";","is","=","getPackagePart","(",")",".","getInputStream","(",")",";","try","{","numberingDoc","=","NumberingDocument",".","Factory",".","parse","(","is,","DEFAULT_XML_OPTIONS",")",";","ctNumbering","=","numberingDoc",".","getNumbering","(",")",";","//get","any","Nums\n","for","(","CTNum","ctNum",":","ctNumbering",".","getNumArray","(",")",")","{","nums",".","add","(","new","XWPFNum","(","ctNum,","this",")",")",";","}","for","(","CTAbstractNum","ctAbstractNum",":","ctNumbering",".","getAbstractNumArray","(",")",")","{","abstractNums",".","add","(","new","XWPFAbstractNum","(","ctAbstractNum,","this",")",")",";","}","isNew","=","false",";","}","catch","(","XmlException","e",")","{","throw","new","POIXMLException","(",")",";","}","finally","{","is",".","close","(",")",";","}"],"docstring_tokens":["read","numbering","form","an","existing","package"],"prompt_tokens":[]}
{"code_tokens":["public","boolean","isCommitted","(",")","{","return","isCommitted",";"],"docstring_tokens":["to","check","whether","embedded","part","is","already","committed"],"prompt_tokens":[]}
{"code_tokens":["public","final","List<POIXMLDocumentPart>","getRelations","(",")","{","List<POIXMLDocumentPart>","l","=","new","ArrayList<>","(",")",";","for","(","RelationPart","rp",":","relations",".","values","(",")",")","{","l",".","add","(","rp",".","getDocumentPart","(",")",")",";","}","return","Collections",".","unmodifiableList","(","l",")",";"],"docstring_tokens":["Returns","the","list","of","child","relations","for","this","POIXMLDocumentPart"],"prompt_tokens":[]}
{"code_tokens":["public","final","RelationPart","addRelation","(","String","relId,","POIXMLRelation","relationshipType,","POIXMLDocumentPart","part",")","{","PackageRelationship","pr","=","this",".","packagePart",".","findExistingRelation","(","part",".","getPackagePart","(",")",")",";","if","(","pr","==","null",")","{","PackagePartName","ppn","=","part",".","getPackagePart","(",")",".","getPartName","(",")",";","String","relType","=","relationshipType",".","getRelation","(",")",";","pr","=","packagePart",".","addRelationship","(","ppn,","TargetMode",".","INTERNAL,","relType,","relId",")",";","}","addRelation","(","pr,","part",")",";","return","new","RelationPart","(","pr,","part",")",";"],"docstring_tokens":["Add","a","new","child","POIXMLDocumentPart"],"prompt_tokens":[]}
{"code_tokens":["private","boolean","removeRelation","(","String","partId,","boolean","removeUnusedParts",")","{","RelationPart","rp","=","relations",".","get","(","partId",")",";","if","(","rp","==","null",")","{","//","part","is","not","related","with","this","POIXMLDocumentPart\n","return","false",";","}","POIXMLDocumentPart","part","=","rp",".","getDocumentPart","(",")",";","/*","decrement","usage","counter","*/\n","part",".","decrementRelationCounter","(",")",";","/*","remove","packagepart","relationship","*/\n","getPackagePart","(",")",".","removeRelationship","(","partId",")",";","/*","remove","POIXMLDocument","from","relations","*/\n","relations",".","remove","(","partId",")",";","\n\n","if","(","removeUnusedParts",")","{","/*","if","last","relation","to","target","part","was","removed,","delete","according","target","part","*/\n","if","(","part",".","getRelationCounter","(",")","==","0",")","{","try","{","part",".","onDocumentRemove","(",")",";","}","catch","(","IOException","e",")","{","throw","new","POIXMLException","(","e",")",";","}","getPackagePart","(",")",".","getPackage","(",")",".","removePart","(","part",".","getPackagePart","(",")",")",";","}","}","return","true",";"],"docstring_tokens":["Remove","the","relation","to","the","specified","part","in","this","package","and","remove","the","part,","if","it","is","no","longer","needed","and","flag","is","set","to","true"],"prompt_tokens":[]}
{"code_tokens":["protected","final","void","onSave","(","Set<PackagePart>","alreadySaved",")","throws","IOException","{","//if","part","is","already","committed","then","return\n","if","(","this",".","isCommitted",")","{","return",";","}","\n\n","//","this","usually","clears","out","previous","content","in","the","part",".",".",".","prepareForCommit","(",")",";","\n\n","commit","(",")",";","alreadySaved",".","add","(","this",".","getPackagePart","(",")",")",";","for","(","RelationPart","rp",":","relations",".","values","(",")",")","{","POIXMLDocumentPart","p","=","rp",".","getDocumentPart","(",")",";","if","(","!alreadySaved",".","contains","(","p",".","getPackagePart","(",")",")",")","{","p",".","onSave","(","alreadySaved",")",";","}","}"],"docstring_tokens":["Save","changes","in","the","underlying","OOXML","package"],"prompt_tokens":[]}
{"code_tokens":["public","final","POIXMLDocumentPart","createRelationship","(","POIXMLRelation","descriptor,","POIXMLFactory","factory",")","{","return","createRelationship","(","descriptor,","factory,","-1,","false",")",".","getDocumentPart","(",")",";"],"docstring_tokens":["Create","a","new","child","POIXMLDocumentPart"],"prompt_tokens":[]}
{"code_tokens":["protected","void","onDocumentCreate","(",")","throws","IOException","{","\n\n"],"docstring_tokens":["Fired","when","a","new","package","part","is","created"],"prompt_tokens":[]}
{"code_tokens":["protected","void","onDocumentRead","(",")","throws","IOException","{","\n\n"],"docstring_tokens":["Fired","when","a","package","part","is","read"],"prompt_tokens":[]}
{"code_tokens":["protected","void","onDocumentRemove","(",")","throws","IOException","{","\n\n"],"docstring_tokens":["Fired","when","a","package","part","is","about","to","be","removed","from","the","package"],"prompt_tokens":[]}
{"code_tokens":["public","boolean","mapsTo","(","long","id",")","{","List<XSSFXmlColumnPr>","pointers","=","getXmlColumnPrs","(",")",";","\n\n","for","(","XSSFXmlColumnPr","pointer:","pointers",")","{","if","(","pointer",".","getMapId","(",")","==id",")","{","return","true",";","}","}","\n\n","return","false",";"],"docstring_tokens":["Checks","if","this","Table","element","contains","even","a","single","mapping","to","the","map","identified","by","id"],"prompt_tokens":[]}
{"code_tokens":["public","XSSFTableColumn","createColumn","(","String","columnName",")","{","return","createColumn","(","columnName,","getColumnCount","(",")",")",";"],"docstring_tokens":["Add","a","new","column","to","the","right","end","of","the","table"],"prompt_tokens":[]}
{"code_tokens":["public","void","setName","(","String","newName",")","{","if","(","newName","==","null",")","{","ctTable",".","unsetName","(",")",";","name","=","null",";","return",";","}","ctTable",".","setName","(","newName",")",";","name","=","newName",";"],"docstring_tokens":["Changes","the","name","of","the","Table"],"prompt_tokens":[]}
{"code_tokens":["public","void","setDisplayName","(","String","name",")","{","if","(","name","==","null","||","name",".","isEmpty","(",")",")","{","throw","new","IllegalArgumentException","(","\"Display","name","must","not","be","null","or","empty\"",")",";","}","ctTable",".","setDisplayName","(","name",")",";"],"docstring_tokens":["Changes","the","display","name","of","the","Table"],"prompt_tokens":[]}
{"code_tokens":["@Override\n","public","int","getSignature","(",")","{","return","(","getUIDInstanceCount","(",")","==","1","?","0x2160",":","0x2170",")",";"],"docstring_tokens":["WMF","signature","is","either","0x2160","or","0x2170"],"prompt_tokens":[]}
{"code_tokens":["@Override\n","public","void","setSignature","(","int","signature",")","{","switch","(","signature",")","{","case","0x2160:\n","setUIDInstanceCount","(","1",")",";","break",";","case","0x2170:\n","setUIDInstanceCount","(","2",")",";","break",";","default:\n","throw","new","IllegalArgumentException","(","signature+\"","is","not","a","valid","instance/signature","value","for","WMF\"",")",";","}"],"docstring_tokens":["Sets","the","WMF","signature","-","either","0x2160","or","0x2170"],"prompt_tokens":[]}
{"code_tokens":["public","POIXMLDocumentPart","createDocumentPart","(","POIXMLDocumentPart","parent,","PackagePart","part",")","{","final","PackageRelationship","rel","=","getPackageRelationship","(","parent,","part",")",";","final","String","relType","=","rel",".","getRelationshipType","(",")",";","final","POIXMLRelation","descriptor","=","getDescriptor","(","relType",")",";","\n\n","//","don't","parse","the","document","parts,","if","its","class","can't","be","determined\n","//","or","if","it's","a","package","relation","of","another","embedded","resource\n","try","{","if","(","descriptor","!=","null","&&","!POIXMLDocument",".","PACK_OBJECT_REL_TYPE",".","equals","(","relType",")",")","{","ParentPartConstructor","parentPartConstructor","=","descriptor",".","getParentPartConstructor","(",")",";","if","(","parentPartConstructor","!=","null",")","{","return","parentPartConstructor",".","init","(","parent,","part",")",";","}","PackagePartConstructor","packagePartConstructor","=","descriptor",".","getPackagePartConstructor","(",")",";","if","(","packagePartConstructor","!=","null",")","{","return","packagePartConstructor",".","init","(","part",")",";","}","}","\n\n","LOGGER",".","atDebug","(",")",".","log","(","\"using","default","POIXMLDocumentPart","for","{","}","\",","rel",".","getRelationshipType","(",")",")",";","return","new","POIXMLDocumentPart","(","parent,","part",")",";","}","catch","(","IOException","|","XmlException","e",")","{","throw","new","POIXMLException","(","e",".","getMessage","(",")",",","e",")",";","}"],"docstring_tokens":["Create","a","POIXMLDocumentPart","from","existing","package","part","and","relation"],"prompt_tokens":[]}
{"code_tokens":["protected","PackageRelationship","getPackageRelationship","(","POIXMLDocumentPart","parent,","PackagePart","part",")","{","try","{","String","partName","=","part",".","getPartName","(",")",".","getName","(",")",";","for","(","PackageRelationship","pr",":","parent",".","getPackagePart","(",")",".","getRelationships","(",")",")","{","String","packName","=","pr",".","getTargetURI","(",")",".","toASCIIString","(",")",";","if","(","packName",".","equalsIgnoreCase","(","partName",")",")","{","return","pr",";","}","}","}","catch","(","InvalidFormatException","e",")","{","throw","new","POIXMLException","(","\"error","while","determining","package","relations\",","e",")",";","}","\n\n","throw","new","POIXMLException","(","\"package","part","isn't","a","child","of","the","parent","document",".","\"",")",";"],"docstring_tokens":["Retrieves","the","package","relationship","of","the","child","part","within","the","parent"],"prompt_tokens":[]}
{"code_tokens":["public","boolean","nameAlreadyExists","(","NameRecord","name",")","{","//","Check","to","ensure","no","other","names","have","the","same","case-insensitive","name\n","for","(","int","i","=","getNumNames","(",")","-","1",";","i",">=","0",";","i--",")","{","NameRecord","rec","=","getNameRecord","(","i",")",";","if","(","rec","!=","name",")","{","if","(","isDuplicatedNames","(","name,","rec",")",")","return","true",";","}","}","return","false",";"],"docstring_tokens":["checks","if","the","given","name","is","already","included","in","the","linkTable"],"prompt_tokens":[]}
{"code_tokens":["public","NameXPtg","addNameXPtg","(","String","name",")","{","int","extBlockIndex","=","-1",";","ExternalBookBlock","extBlock","=","null",";","\n\n","//","find","ExternalBlock","for","Add-In","functions","and","remember","its","index\n","for","(","int","i","=","0",";","i","<","_externalBookBlocks",".","length",";","i++",")","{","SupBookRecord","ebr","=","_externalBookBlocks[i]",".","getExternalBookRecord","(",")",";","if","(","ebr",".","isAddInFunctions","(",")",")","{","extBlock","=","_externalBookBlocks[i]",";","extBlockIndex","=","i",";","break",";","}","}","//","An","ExternalBlock","for","Add-In","functions","was","not","found",".","Create","a","new","one",".","if","(","extBlock","==","null",")","{","extBlock","=","new","ExternalBookBlock","(",")",";","extBlockIndex","=","extendExternalBookBlocks","(","extBlock",")",";","\n\n","//","add","the","created","SupBookRecord","before","ExternSheetRecord\n","int","idx","=","findFirstRecordLocBySid","(","ExternSheetRecord",".","sid",")",";","_workbookRecordList",".","add","(","idx,","extBlock",".","getExternalBookRecord","(",")",")",";","\n\n","//","register","the","SupBookRecord","in","the","ExternSheetRecord\n","//","-2","means","that","the","scope","of","this","name","is","Workbook","and","the","reference","applies","to","the","entire","workbook",".","_externSheetRecord",".","addRef","(","_externalBookBlocks",".","length","-","1,","-2,","-2",")",";","}","\n\n","//","create","a","ExternalNameRecord","that","will","describe","this","name\n","ExternalNameRecord","extNameRecord","=","new","ExternalNameRecord","(",")",";","extNameRecord",".","setText","(","name",")",";","//","The","docs","don't","explain","why","Excel","set","the","formula","to","#REF!\n","extNameRecord",".","setParsedExpression","(","new","Ptg[]","{","ErrPtg",".","REF_INVALID","}",")",";","\n\n","int","nameIndex","=","extBlock",".","addExternalName","(","extNameRecord",")",";","int","supLinkIndex","=","0",";","//","find","the","posistion","of","the","Add-In","SupBookRecord","in","the","workbook","stream,\n","//","the","created","ExternalNameRecord","will","be","appended","to","it\n","for","(","org",".","apache",".","poi",".","hssf",".","record",".","Record","record",":","_workbookRecordList",".","getRecords","(",")",")","{","if","(","record","instanceof","SupBookRecord","&&","(","(","SupBookRecord",")","record",")",".","isAddInFunctions","(",")",")","{","break",";","}","supLinkIndex++",";","}","int","numberOfNames","=","extBlock",".","getNumberOfNames","(",")",";","//","a","new","name","is","inserted","in","the","end","of","the","SupBookRecord,","after","the","last","name\n","_workbookRecordList",".","add","(","supLinkIndex","+","numberOfNames,","extNameRecord",")",";","int","fakeSheetIdx","=","-2",";","/*","the","scope","is","workbook*/\n","int","ix","=","_externSheetRecord",".","getRefIxForSheet","(","extBlockIndex,","fakeSheetIdx,","fakeSheetIdx",")",";","return","new","NameXPtg","(","ix,","nameIndex",")",";"],"docstring_tokens":["Register","an","external","name","in","this","workbook"],"prompt_tokens":[]}
{"code_tokens":["@Override\n","public","TextPropCollection","getPropCollection","(","final","int","txtype,","final","int","level,","final","String","name,","final","boolean","isCharacter",")","{","final","HSLFMasterSheet","master","=","getMasterSheet","(",")",";","return","(","master","==","null",")","?","null",":","master",".","getPropCollection","(","txtype,","level,","name,","isCharacter",")",";"],"docstring_tokens":["Delegate","the","call","to","the","underlying","slide","master"],"prompt_tokens":[]}
{"code_tokens":["@Override\n","public","HSLFMasterSheet","getMasterSheet","(",")","{","SlideAtom","sa","=","(","(","org",".","apache",".","poi",".","hslf",".","record",".","Slide",")","getSheetContainer","(",")",")",".","getSlideAtom","(",")",";","int","masterId","=","sa",".","getMasterID","(",")",";","for","(","HSLFSlideMaster","sm",":","getSlideShow","(",")",".","getSlideMasters","(",")",")","{","if","(","masterId","==","sm",".","_getSheetNumber","(",")",")","{","return","sm",";","}","}","return","null",";"],"docstring_tokens":["Returns","the","slide","master","for","this","title","master"],"prompt_tokens":[]}
{"code_tokens":["public","int","allocateShapeId","(","EscherDgRecord","dg,","boolean","sort",")","{","final","short","drawingGroupId","=","dg",".","getDrawingGroupId","(",")",";","field_3_numShapesSaved++",";","\n\n","//","check","for","an","existing","cluster,","which","has","space","available\n","//","see","2",".","2",".","46","OfficeArtIDCL","(","cspidCur",")","for","the","1024","limitation\n","//","multiple","clusters","can","belong","to","the","same","drawing","group\n","FileIdCluster","ficAdd","=","null",";","int","index","=","1",";","for","(","FileIdCluster","fic",":","field_5_fileIdClusters",")","{","if","(","fic",".","getDrawingGroupId","(",")","==","drawingGroupId\n","&&","fic",".","getNumShapeIdsUsed","(",")","<","1024",")","{","ficAdd","=","fic",";","break",";","}","index++",";","}","\n\n","if","(","ficAdd","==","null",")","{","ficAdd","=","addCluster","(","drawingGroupId,","0,","sort",")",";","maxDgId","=","Math",".","max","(","maxDgId,","drawingGroupId",")",";","}","\n\n","int","shapeId","=","index*1024","+","ficAdd",".","getNumShapeIdsUsed","(",")",";","ficAdd",".","incrementUsedShapeId","(",")",";","\n\n","dg",".","setNumShapes","(","dg",".","getNumShapes","(",")","+","1",")",";","dg",".","setLastMSOSPID","(","shapeId",")",";","field_1_shapeIdMax","=","Math",".","max","(","field_1_shapeIdMax,","shapeId","+","1",")",";","\n\n","return","shapeId",";"],"docstring_tokens":["Allocates","new","shape","id","for","the","drawing","group"],"prompt_tokens":[]}
{"code_tokens":["public","InputStream","getData","(",")","{","if","(","isCompressed","(",")",")","{","int","size","=","LittleEndian",".","getInt","(","_data",")",";","\n\n","InputStream","compressedStream","=","new","ByteArrayInputStream","(","_data,","4,","_data",".","length",")",";","return","new","BoundedInputStream","(","new","InflaterInputStream","(","compressedStream",")",",","size",")",";","}","else","{","return","new","ByteArrayInputStream","(","_data,","0,","_data",".","length",")",";","}"],"docstring_tokens":["Opens","an","input","stream","which","will","decompress","the","data","on","the","fly"],"prompt_tokens":[]}
{"code_tokens":["public","void","setData","(","byte[]","data",")","throws","IOException","{","try","(","UnsynchronizedByteArrayOutputStream","out","=","new","UnsynchronizedByteArrayOutputStream","(",")",";","DeflaterOutputStream","def","=","new","DeflaterOutputStream","(","out",")",")","{","//first","four","bytes","is","the","length","of","the","raw","data\n","byte[]","b","=","new","byte[4]",";","LittleEndian",".","putInt","(","b,","0,","data",".","length",")",";","out",".","write","(","b",")",";","\n\n","def",".","write","(","data,","0,","data",".","length",")",";","def",".","finish","(",")",";","//","TODO:","CHECK","if","it's","correct","that","DeflaterOutputStream","is","only","finished","and","not","closed?\n","_data","=","out",".","toByteArray","(",")",";","LittleEndian",".","putInt","(","_header,","4,","_data",".","length",")",";","}"],"docstring_tokens":["Sets","the","embedded","data"],"prompt_tokens":[]}
{"code_tokens":["public","int","buildTextPropList","(","int","containsField,","byte[]","data,","int","dataOffset",")","{","int","bytesPassed","=","0",";","\n\n","//","For","each","possible","entry,","see","if","we","match","the","mask\n","//","If","we","do,","decode","that,","save","it,","and","shuffle","on\n","for","(","TextProp","tp",":","getPotentialProperties","(",")",")","{","//","Check","there's","still","data","left","to","read\n\n","//","Check","if","this","property","is","found","in","the","mask\n","if","(","(","containsField","&","tp",".","getMask","(",")",")","!=","0",")","{","if","(","dataOffset+bytesPassed",">=","data",".","length",")","{","//","Out","of","data,","can't","be","any","more","properties","to","go\n","//","remember","the","mask","and","return\n","maskSpecial","|=","tp",".","getMask","(",")",";","return","bytesPassed",";","}","\n\n","//","Bingo,","data","contains","this","property\n","TextProp","prop","=","tp",".","copy","(",")",";","int","val","=","0",";","if","(","prop","instanceof","HSLFTabStopPropCollection",")","{","(","(","HSLFTabStopPropCollection",")","prop",")",".","parseProperty","(","data,","dataOffset+bytesPassed",")",";","}","else","if","(","prop",".","getSize","(",")","==","2",")","{","val","=","LittleEndian",".","getShort","(","data,dataOffset+bytesPassed",")",";","}","else","if","(","prop",".","getSize","(",")","==","4",")","{","val","=","LittleEndian",".","getInt","(","data,dataOffset+bytesPassed",")",";","}","else","if","(","prop",".","getSize","(",")","==","0",")","{","//remember","\"special\"","bits",".","maskSpecial","|=","tp",".","getMask","(",")",";","continue",";","}","\n\n","if","(","prop","instanceof","BitMaskTextProp",")","{","(","(","BitMaskTextProp",")","prop",")",".","setValueWithMask","(","val,","containsField",")",";","}","else","if","(","!","(","prop","instanceof","HSLFTabStopPropCollection",")",")","{","prop",".","setValue","(","val",")",";","}","bytesPassed","+=","prop",".","getSize","(",")",";","addProp","(","prop",")",";","}","}","\n\n","//","Return","how","many","bytes","were","used\n","return","bytesPassed",";"],"docstring_tokens":["For","an","existing","set","of","text","properties,","build","the","list","of","properties","coded","for","in","a","given","run","of","properties"],"prompt_tokens":[]}
{"code_tokens":["@Override\n","public","TextPropCollection","copy","(",")","{","return","new","TextPropCollection","(","this",")",";"],"docstring_tokens":["Clones","the","given","text","properties"],"prompt_tokens":[]}
{"code_tokens":["public","void","updateTextSize","(","int","textSize",")","{","charactersCovered","=","textSize",";"],"docstring_tokens":["Update","the","size","of","the","text","that","this","set","of","properties","applies","to"],"prompt_tokens":[]}
{"code_tokens":["public","void","writeOut","(","OutputStream","o,","boolean","isMasterStyle",")","throws","IOException","{","if","(","!isMasterStyle",")","{","//","First","goes","the","number","of","characters","we","affect\n","//","MasterStyles","don't","have","this","field\n","Record",".","writeLittleEndian","(","charactersCovered,o",")",";","}","\n\n","//","Then","we","have","the","indentLevel","field","if","it's","a","paragraph","collection\n","if","(","textPropType","==","TextPropType",".","paragraph","&&","indentLevel",">","-1",")","{","Record",".","writeLittleEndian","(","indentLevel,","o",")",";","}","\n\n","//","Then","the","mask","field\n","int","mask","=","maskSpecial",";","for","(","TextProp","textProp",":","textProps",".","values","(",")",")","{","mask","|=","textProp",".","getWriteMask","(",")",";","}","Record",".","writeLittleEndian","(","mask,o",")",";","\n\n","//","Then","the","contents","of","all","the","properties\n","for","(","TextProp","textProp",":","getTextPropList","(",")",")","{","int","val","=","textProp",".","getValue","(",")",";","if","(","textProp","instanceof","BitMaskTextProp","&&","textProp",".","getWriteMask","(",")","==","0",")","{","//","don't","add","empty","properties,","as","they","can't","be","recognized","while","reading\n","continue",";","}","else","if","(","textProp",".","getSize","(",")","==","2",")","{","Record",".","writeLittleEndian","(","(","short",")","val,o",")",";","}","else","if","(","textProp",".","getSize","(",")","==","4",")","{","Record",".","writeLittleEndian","(","val,o",")",";","}","else","if","(","textProp","instanceof","HSLFTabStopPropCollection",")","{","(","(","HSLFTabStopPropCollection",")","textProp",")",".","writeProperty","(","o",")",";","}","}"],"docstring_tokens":["Writes","out","to","disk","the","header,","and","then","all","the","properties"],"prompt_tokens":[]}
{"code_tokens":["public","POIXMLTextExtractor","create","(","OPCPackage","pkg",")","throws","IOException","{","try","{","//","Check","for","the","normal","Office","core","document\n","PackageRelationshipCollection","core",";","core","=","pkg",".","getRelationshipsByType","(","CORE_DOCUMENT_REL",")",";","\n\n","//","If","nothing","was","found,","try","some","of","the","other","OOXML-based","core","types\n","if","(","core",".","isEmpty","(",")",")","{","//","Could","it","be","an","OOXML-Strict","one?\n","core","=","pkg",".","getRelationshipsByType","(","STRICT_DOCUMENT_REL",")",";","}","if","(","core",".","isEmpty","(",")",")","{","//","Could","it","be","a","visio","one?\n","core","=","pkg",".","getRelationshipsByType","(","VISIO_DOCUMENT_REL",")",";","if","(","core",".","size","(",")","==","1",")","{","return","new","XDGFVisioExtractor","(","pkg",")",";","}","}","\n\n","//","Should","just","be","a","single","core","document,","complain","if","not\n","if","(","core",".","size","(",")","!=","1",")","{","throw","new","IllegalArgumentException","(","\"Invalid","OOXML","Package","received","-","expected","1","core","document,","found","\"","+","core",".","size","(",")",")",";","}","\n\n","//","Grab","the","core","document","part,","and","try","to","identify","from","that\n","final","PackagePart","corePart","=","pkg",".","getPart","(","core",".","getRelationship","(","0",")",")",";","final","String","contentType","=","corePart",".","getContentType","(",")",";","\n\n","//","Is","it","XSSF?\n","for","(","XSSFRelation","rel",":","XSSFExcelExtractor",".","SUPPORTED_TYPES",")","{","if","(","rel",".","getContentType","(",")",".","equals","(","contentType",")",")","{","if","(","getPreferEventExtractor","(",")",")","{","return","new","XSSFEventBasedExcelExtractor","(","pkg",")",";","}","return","new","XSSFExcelExtractor","(","pkg",")",";","}","}","\n\n","//","Is","it","XWPF?\n","for","(","XWPFRelation","rel",":","XWPFWordExtractor",".","SUPPORTED_TYPES",")","{","if","(","rel",".","getContentType","(",")",".","equals","(","contentType",")",")","{","return","new","XWPFWordExtractor","(","pkg",")",";","}","}","\n\n","//","Is","it","XSLF?\n","for","(","XSLFRelation","rel",":","SUPPORTED_XSLF_TYPES",")","{","if","(","rel",".","getContentType","(",")",".","equals","(","contentType",")",")","{","return","new","XSLFExtractor","(","new","XMLSlideShow","(","pkg",")",")",";","}","}","\n\n","//","special","handling","for","SlideShow-Theme-files,\n","if","(","XSLFRelation",".","THEME_MANAGER",".","getContentType","(",")",".","equals","(","contentType",")",")","{","return","new","XSLFExtractor","(","new","XMLSlideShow","(","pkg",")",")",";","}","\n\n","//","How","about","xlsb?\n","for","(","XSSFRelation","rel",":","XSSFBEventBasedExcelExtractor",".","SUPPORTED_TYPES",")","{","if","(","rel",".","getContentType","(",")",".","equals","(","contentType",")",")","{","return","new","XSSFBEventBasedExcelExtractor","(","pkg",")",";","}","}","\n\n","return","null",";","}","catch","(","Error","|","RuntimeException","|","XmlException","|","OpenXML4JException","e",")","{","//","NOSONAR\n","throw","new","IOException","(","e",")",";","}","//","we","used","to","close","(","revert","(",")",")","the","package","here,","but","this","is","the","callers","responsibility\n","//","and","we","can't","reuse","the","package\n"],"docstring_tokens":["Tries","to","determine","the","actual","type","of","file","and","produces","a","matching","text-extractor","for","it"],"prompt_tokens":[]}
{"code_tokens":["public","void","decode","(",")","{","if","(","escherRecords",".","isEmpty","(",")",")","{","byte[]","rawData","=","getRawData","(",")",";","convertToEscherRecords","(","0,","rawData",".","length,","rawData",")",";","}"],"docstring_tokens":["Convert","raw","data","to","escher","records"],"prompt_tokens":[]}
{"code_tokens":["public","static","XSSFBCellRange","parse","(","byte[]","data,","int","offset,","XSSFBCellRange","cellRange",")","{","if","(","cellRange","==","null",")","{","cellRange","=","new","XSSFBCellRange","(",")",";","}","cellRange",".","firstRow","=","XSSFBUtils",".","castToInt","(","LittleEndian",".","getUInt","(","data,","offset",")",")",";","offset","+=","LittleEndianConsts",".","INT_SIZE",";","cellRange",".","lastRow","=","XSSFBUtils",".","castToInt","(","LittleEndian",".","getUInt","(","data,","offset",")",")",";","offset","+=","LittleEndianConsts",".","INT_SIZE",";","cellRange",".","firstCol","=","XSSFBUtils",".","castToInt","(","LittleEndian",".","getUInt","(","data,","offset",")",")",";","offset","+=","LittleEndianConsts",".","INT_SIZE",";","cellRange",".","lastCol","=","XSSFBUtils",".","castToInt","(","LittleEndian",".","getUInt","(","data,","offset",")",")",";","\n\n","return","cellRange",";"],"docstring_tokens":["Parses","an","RfX","cell","range","from","the","data","starting","at","the","offset"],"prompt_tokens":[]}
{"code_tokens":["public","short","getIndex","(",")","{","return","field_1_index",";"],"docstring_tokens":["Get","the","index","field","for","the","SeriesIndex","record"],"prompt_tokens":[]}
{"code_tokens":["public","void","setIndex","(","short","field_1_index",")","{","this",".","field_1_index","=","field_1_index",";"],"docstring_tokens":["Set","the","index","field","for","the","SeriesIndex","record"],"prompt_tokens":[]}
{"code_tokens":["protected","static","CTGraphicalObjectFrame","prototype","(",")","{","if","(","prototype","==","null",")","{","CTGraphicalObjectFrame","graphicFrame","=","CTGraphicalObjectFrame",".","Factory",".","newInstance","(",")",";","\n\n","CTGraphicalObjectFrameNonVisual","nvGraphic","=","graphicFrame",".","addNewNvGraphicFramePr","(",")",";","CTNonVisualDrawingProps","props","=","nvGraphic",".","addNewCNvPr","(",")",";","props",".","setId","(","0",")",";","props",".","setName","(","\"Diagramm","1\"",")",";","nvGraphic",".","addNewCNvGraphicFramePr","(",")",";","\n\n","CTTransform2D","transform","=","graphicFrame",".","addNewXfrm","(",")",";","CTPositiveSize2D","extPoint","=","transform",".","addNewExt","(",")",";","CTPoint2D","offPoint","=","transform",".","addNewOff","(",")",";","\n\n","extPoint",".","setCx","(","0",")",";","extPoint",".","setCy","(","0",")",";","offPoint",".","setX","(","0",")",";","offPoint",".","setY","(","0",")",";","\n\n","/*","CTGraphicalObject","graphic","=","*/","graphicFrame",".","addNewGraphic","(",")",";","\n\n","prototype","=","graphicFrame",";","}","return","prototype",";"],"docstring_tokens":["Initialize","default","structure","of","a","new","graphic","frame"],"prompt_tokens":[]}
{"code_tokens":["@Override\n","public","XSSFClientAnchor","getAnchor","(",")","{","return","(","XSSFClientAnchor",")","anchor",";"],"docstring_tokens":["Returns","the","frame","anchor"],"prompt_tokens":[]}
{"code_tokens":["protected","void","setChart","(","XSSFChart","chart,","String","relId",")","{","CTGraphicalObjectData","data","=","graphicFrame",".","getGraphic","(",")",".","addNewGraphicData","(",")",";","appendChartElement","(","data,","relId",")",";","chart",".","setGraphicFrame","(","this",")",";"],"docstring_tokens":["Assign","a","DrawingML","chart","to","the","graphic","frame"],"prompt_tokens":[]}
{"code_tokens":["public","static","AreaReference[]","generateContiguous","(","SpreadsheetVersion","version,","String","reference",")","{","if","(","null","==","version",")","{","version","=","DEFAULT_SPREADSHEET_VERSION",";","//","how","the","code","used","to","behave",".","}","List<AreaReference>","refs","=","new","ArrayList<>","(",")",";","String[]","splitReferences","=","splitAreaReferences","(","reference",")",";","for","(","String","ref",":","splitReferences",")","{","refs",".","add","(","new","AreaReference","(","ref,","version",")",")",";","}","return","refs",".","toArray","(","new","AreaReference[0]",")",";"],"docstring_tokens":["Takes","a","non-contiguous","area","reference,","and","returns","an","array","of","contiguous","area","references"],"prompt_tokens":[]}
{"code_tokens":["public","CellReference[]","getAllReferencedCells","(",")","{","//","Special","case","for","single","cell","reference\n","if","(","_isSingleCell",")","{","return","new","CellReference[]","{","_firstCell,","}",";","}","\n\n","//","Interpolate","between","the","two\n","int","minRow","=","Math",".","min","(","_firstCell",".","getRow","(",")",",","_lastCell",".","getRow","(",")",")",";","int","maxRow","=","Math",".","max","(","_firstCell",".","getRow","(",")",",","_lastCell",".","getRow","(",")",")",";","int","minCol","=","Math",".","min","(","_firstCell",".","getCol","(",")",",","_lastCell",".","getCol","(",")",")",";","int","maxCol","=","Math",".","max","(","_firstCell",".","getCol","(",")",",","_lastCell",".","getCol","(",")",")",";","String","sheetName","=","_firstCell",".","getSheetName","(",")",";","\n\n","List<CellReference>","refs","=","new","ArrayList<>","(",")",";","for","(","int","row=minRow",";","row<=maxRow",";","row++",")","{","for","(","int","col=minCol",";","col<=maxCol",";","col++",")","{","CellReference","ref","=","new","CellReference","(","sheetName,","row,","col,","_firstCell",".","isRowAbsolute","(",")",",","_firstCell",".","isColAbsolute","(",")",")",";","refs",".","add","(","ref",")",";","}","}","return","refs",".","toArray","(","new","CellReference[0]",")",";"],"docstring_tokens":["Returns","a","reference","to","every","cell","covered","by","this","area"],"prompt_tokens":[]}
{"code_tokens":["public","void","validate","(","SpreadsheetVersion","ssVersion",")","{","validateRow","(","_firstRow,","ssVersion",")",";","validateRow","(","_lastRow,","ssVersion",")",";","validateColumn","(","_firstCol,","ssVersion",")",";","validateColumn","(","_lastCol,","ssVersion",")",";"],"docstring_tokens":["Validate","the","range","limits","against","the","supplied","version","of","Excel"],"prompt_tokens":[]}
{"code_tokens":["public","boolean","containsRow","(","int","rowInd",")","{","return","_firstRow","<=","rowInd","&&","rowInd","<=","_lastRow",";"],"docstring_tokens":["Check","if","the","row","is","in","the","specified","cell","range"],"prompt_tokens":[]}
{"code_tokens":["public","boolean","containsColumn","(","int","colInd",")","{","return","_firstCol","<=","colInd","&&","colInd","<=","_lastCol",";"],"docstring_tokens":["Check","if","the","column","is","in","the","specified","cell","range"],"prompt_tokens":[]}
{"code_tokens":["@Override\n","public","Iterator<CellAddress>","iterator","(",")","{","return","new","RowMajorCellAddressIterator","(","this",")",";"],"docstring_tokens":["Returns","an","iterator","over","the","CellAddresses","in","this","cell","range","in","row-major","order"],"prompt_tokens":[]}
{"code_tokens":["@Override\n","public","Spliterator<CellAddress>","spliterator","(",")","{","return","Spliterators",".","spliterator","(","iterator","(",")",",","getNumberOfCells","(",")",",","0",")",";"],"docstring_tokens":["Returns","a","spliterator","over","the","CellAddresses","in","this","cell","range","in","row-major","order"],"prompt_tokens":[]}
{"code_tokens":["@Override\n","public","void","record","(","Chunk","chunk",")","{","if","(","chunk",".","getType","(",")","==","Types",".","BINARY",")","{","switch","(","chunk",".","getChunkId","(",")",")","{","case","2:\n","guidStream","=","(","ByteChunk",")","chunk",";","break",";","case","3:\n","entryStream","=","(","ByteChunk",")","chunk",";","break",";","case","4:\n","stringStream","=","(","ByteChunk",")","chunk",";","break",";","}","}","allChunks",".","add","(","chunk",")",";"],"docstring_tokens":["Called","by","the","parser","whenever","a","chunk","is","found"],"prompt_tokens":[]}
{"code_tokens":["public","long","getPropertyTag","(","ClassID","guid,","String","name,","long","id",")","{","final","byte[]","entryStreamBytes","=","(","entryStream","==","null",")","?","null",":","entryStream",".","getValue","(",")",";","if","(","guidStream","==","null","||","entryStream","==","null","||","stringStream","==","null","||","guid","==","null","||\n","entryStreamBytes","==","null",")","{","return","0",";","}","\n\n","LittleEndianByteArrayInputStream","leis","=","new","LittleEndianByteArrayInputStream","(","entryStreamBytes",")",";","for","(","int","i","=","0",";","i","<","entryStreamBytes",".","length","/","8",";","i++",")","{","final","long","nameOffset","=","leis",".","readUInt","(",")",";","int","guidIndex","=","leis",".","readUShort","(",")",";","final","int","propertyKind","=","guidIndex","&","0x01",";","guidIndex","=","guidIndex",">>>","1",";","final","int","propertyIndex","=","leis",".","readUShort","(",")",";","\n\n","//","fetch","and","match","property","GUID\n","if","(","!guid",".","equals","(","getPropertyGUID","(","guidIndex",")",")",")","{","continue",";","}","\n\n","//","fetch","property","name","/","stream","ID\n","final","String[]","propertyName","=","{","null","}",";","final","long[]","propertyNameCRC32","=","{","-1L","}",";","long","streamID","=","getStreamID","(","propertyKind,","(","int",")","nameOffset,","guid,","guidIndex,\n","n","->","propertyName[0]","=","n,","c","->","propertyNameCRC32[0]","=","c",")",";","\n\n","if","(","!matchesProperty","(","propertyKind,","nameOffset,","name,","propertyName[0],","id",")",")","{","continue",";","}","\n\n","//","find","property","index","in","matching","stream","entry\n","if","(","propertyKind","==","1","&&","propertyNameCRC32[0]","<","0",")","{","//","skip","stream","entry","matching","and","return","tag","from","property","index","from","entry","stream\n","//","this","code","should","not","be","reached\n","return","0x8000L","+","propertyIndex",";","}","\n\n","return","getPropertyTag","(","streamID,","nameOffset,","propertyNameCRC32[0]",")",";","}","return","0",";"],"docstring_tokens":["Get","property","tag","id","by","property","set","GUID","and","string","name","or","numerical","name","from","named","properties","mapping"],"prompt_tokens":[]}
{"code_tokens":["public","void","dump","(","byte[]","data,","int","offset,","int","size,","PrintStream","out",")","{","EscherRecordFactory","recordFactory","=","new","DefaultEscherRecordFactory","(",")",";","int","pos","=","offset",";","while","(","pos","<","offset","+","size",")","{","EscherRecord","r","=","recordFactory",".","createRecord","(","data,","pos",")",";","int","bytesRead","=","r",".","fillFields","(","data,","pos,","recordFactory",")",";","out",".","println","(","r",")",";","pos","+=","bytesRead",";","}"],"docstring_tokens":["Decodes","the","escher","stream","from","a","byte","array","and","dumps","the","results","to","a","print","stream"],"prompt_tokens":[]}
{"code_tokens":["public","Date","calculateWorkdays","(","double","start,","int","workdays,","int","weekendType,","double[]","holidays",")","{","Set<Integer>","weekendDays","=","weekendTypeMap",".","getOrDefault","(","weekendType,","standardWeekend",")",";","Date","startDate","=","DateUtil",".","getJavaDate","(","start",")",";","int","direction","=","workdays","<","0","?","-1",":","1",";","Calendar","endDate","=","LocaleUtil",".","getLocaleCalendar","(",")",";","endDate",".","setTime","(","startDate",")",";","double","excelEndDate","=","DateUtil",".","getExcelDate","(","endDate",".","getTime","(",")",")",";","while","(","workdays","!=","0",")","{","endDate",".","add","(","Calendar",".","DAY_OF_YEAR,","direction",")",";","excelEndDate","+=","direction",";","if","(","!isWeekend","(","endDate,","weekendDays",")","&&","!isHoliday","(","excelEndDate,","holidays",")",")","{","workdays","-=","direction",";","}","}","return","endDate",".","getTime","(",")",";"],"docstring_tokens":["Calculate","the","workday","past","x","workdays","from","a","starting","date,","considering","a","range","of","holidays"],"prompt_tokens":[]}
{"code_tokens":["protected","int","pastDaysOfWeek","(","double","start,","double","end,","int","dayOfWeek",")","{","int","pastDaysOfWeek","=","0",";","int","startDay","=","(","int",")","Math",".","floor","(","start","<","end","?","start",":","end",")",";","int","endDay","=","(","int",")","Math",".","floor","(","end",">","start","?","end",":","start",")",";","for","(",";","startDay","<=","endDay",";","startDay++",")","{","Calendar","today","=","LocaleUtil",".","getLocaleCalendar","(",")",";","today",".","setTime","(","DateUtil",".","getJavaDate","(","startDay",")",")",";","if","(","today",".","get","(","Calendar",".","DAY_OF_WEEK",")","==","dayOfWeek",")","{","pastDaysOfWeek++",";","}","}","return","start","<=","end","?","pastDaysOfWeek",":","-pastDaysOfWeek",";"],"docstring_tokens":["Calculates","how","many","days","of","week","past","between","a","start","and","an","end","date"],"prompt_tokens":[]}
{"code_tokens":["protected","int","calculateNonWeekendHolidays","(","double","start,","double","end,","double[]","holidays",")","{","int","nonWeekendHolidays","=","0",";","double","startDay","=","start","<","end","?","start",":","end",";","double","endDay","=","end",">","start","?","end",":","start",";","for","(","double","holiday",":","holidays",")","{","if","(","isInARange","(","startDay,","endDay,","holiday",")",")","{","if","(","!isWeekend","(","holiday",")",")","{","nonWeekendHolidays++",";","}","}","}","return","start","<=","end","?","nonWeekendHolidays",":","-nonWeekendHolidays",";"],"docstring_tokens":["Calculates","how","many","holidays","in","a","list","are","workdays,","considering","an","interval","of","dates"],"prompt_tokens":[]}
{"code_tokens":["@Override\n","public","SXSSFRow","createRow","(","int","rownum",")","{","int","maxrow","=","SpreadsheetVersion",".","EXCEL2007",".","getLastRowIndex","(",")",";","if","(","rownum","<","0","||","rownum",">","maxrow",")","{","throw","new","IllegalArgumentException","(","\"Invalid","row","number","(","\"","+","rownum\n","+","\"",")","outside","allowable","range","(","0",".",".","\"","+","maxrow","+","\"",")","\"",")",";","}","\n\n","//","attempt","to","overwrite","a","row","that","is","already","flushed","to","disk\n","if","(","_writer","!=","null","&&","rownum","<=","_writer",".","getLastFlushedRow","(",")",")","{","throw","new","IllegalArgumentException","(","\"Attempting","to","write","a","row[\"+rownum+\"]","\"","+\n","\"in","the","range","[0,\"","+","_writer",".","getLastFlushedRow","(",")","+","\"]","that","is","already","written","to","disk",".","\"",")",";","}","\n\n","//","attempt","to","overwrite","a","existing","row","in","the","input","template\n","if","(","_sh",".","getPhysicalNumberOfRows","(",")",">","0","&&","rownum","<=","_sh",".","getLastRowNum","(",")",")","{","throw","new","IllegalArgumentException","(","\"Attempting","to","write","a","row[\"+rownum+\"]","\"","+\n","\"in","the","range","[0,\"","+","_sh",".","getLastRowNum","(",")","+","\"]","that","is","already","written","to","disk",".","\"",")",";","}","\n\n","SXSSFRow","newRow","=","new","SXSSFRow","(","this",")",";","newRow",".","setRowNumWithoutUpdatingSheet","(","rownum",")",";","_rows",".","put","(","rownum,","newRow",")",";","allFlushed","=","false",";","if","(","_randomAccessWindowSize",">=","0","&&","_rows",".","size","(",")",">","_randomAccessWindowSize",")","{","try","{","flushRows","(","_randomAccessWindowSize",")",";","}","catch","(","IOException","ioe",")","{","throw","new","RuntimeException","(","ioe",")",";","}","}","return","newRow",";"],"docstring_tokens":["Create","a","new","row","within","the","sheet","and","return","the","high","level","representation"],"prompt_tokens":[]}
{"code_tokens":["@Override\n","public","void","removeRow","(","Row","row",")","{","if","(","row",".","getSheet","(",")","!=","this",")","{","throw","new","IllegalArgumentException","(","\"Specified","row","does","not","belong","to","this","sheet\"",")",";","}","\n\n","for","(","Iterator<Map",".","Entry<Integer,","SXSSFRow>>","iter","=","_rows",".","entrySet","(",")",".","iterator","(",")",";","iter",".","hasNext","(",")",";",")","{","Map",".","Entry<Integer,","SXSSFRow>","entry","=","iter",".","next","(",")",";","if","(","entry",".","getValue","(",")","==","row",")","{","iter",".","remove","(",")",";","return",";","}","}"],"docstring_tokens":["Remove","a","row","from","this","sheet"],"prompt_tokens":[]}
{"code_tokens":["@Override\n","@SuppressWarnings","(","\"unchecked\"",")","public","Spliterator<Row>","spliterator","(",")","{","return","(","Spliterator<Row>",")","(","Spliterator<?","extends","Row>",")","_rows",".","values","(",")",".","spliterator","(",")",";"],"docstring_tokens":["Returns","a","spliterator","of","the","physical","rows"],"prompt_tokens":[]}
{"code_tokens":["public","void","addStyle","(","XWPFStyle","style",")","{","listStyle",".","add","(","style",")",";","ctStyles",".","addNewStyle","(",")",";","int","pos","=","ctStyles",".","sizeOfStyleArray","(",")","-","1",";","ctStyles",".","setStyleArray","(","pos,","style",".","getCTStyle","(",")",")",";"],"docstring_tokens":["add","a","style","to","the","document"],"prompt_tokens":[]}
{"code_tokens":["protected","void","attach","(","String","chartRelId,","XWPFRun","run",")","throws","InvalidFormatException,","IOException","{","ctInline","=","run",".","addChart","(","chartRelId",")",";","ctInline",".","addNewExtent","(",")",";","setChartBoundingBox","(","DEFAULT_WIDTH,","DEFAULT_HEIGHT",")",";"],"docstring_tokens":["Attach","this","chart","known","by","its","relation","id","to","the","given","text","run"],"prompt_tokens":[]}
{"code_tokens":["public","void","setChartBoundingBox","(","long","width,","long","height",")","{","this",".","setChartWidth","(","width",")",";","this",".","setChartHeight","(","height",")",";"],"docstring_tokens":["set","chart","height","and","width"],"prompt_tokens":[]}
{"code_tokens":["public","static","Color","HSL2RGB","(","double","h,","double","s,","double","l,","double","alpha",")","{","//","we","clamp","the","values,","as","it","possible","to","come","up","with","more","than","100%","sat/lum\n","//","(","see","links","in","applyColorTransform","(",")","for","more","info",")","s","=","Math",".","max","(","0,","Math",".","min","(","100,","s",")",")",";","l","=","Math",".","max","(","0,","Math",".","min","(","100,","l",")",")",";","\n\n","if","(","alpha","<0",".","0f","||","alpha",">","1",".","0f",")","{","String","message","=","\"Color","parameter","outside","of","expected","range","-","Alpha:","\"","+","alpha",";","throw","new","IllegalArgumentException","(","message",")",";","}","\n\n","//","Formula","needs","all","values","between","0","-","1",".","\n\n","h","=","h","%","360",".","0f",";","h","/=","360f",";","s","/=","100f",";","l","/=","100f",";","\n\n","double","q","=","(","l","<","0",".","5d",")","?","l","*","(","1d","+","s",")",":","(","l","+","s",")","-","(","s","*","l",")",";","\n\n","double","p","=","2d","*","l","-","q",";","\n\n","double","r","=","Math",".","max","(","0,","HUE2RGB","(","p,","q,","h","+","(","1",".","0d","/","3",".","0d",")",")",")",";","double","g","=","Math",".","max","(","0,","HUE2RGB","(","p,","q,","h",")",")",";","double","b","=","Math",".","max","(","0,","HUE2RGB","(","p,","q,","h","-","(","1",".","0d","/","3",".","0d",")",")",")",";","\n\n","r","=","Math",".","min","(","r,","1",".","0d",")",";","g","=","Math",".","min","(","g,","1",".","0d",")",";","b","=","Math",".","min","(","b,","1",".","0d",")",";","\n\n","return","new","Color","(","(","float",")","r,","(","float",")","g,","(","float",")","b,","(","float",")","alpha",")",";"],"docstring_tokens":["Convert","HSL","values","to","a","RGB","Color"],"prompt_tokens":[]}
{"code_tokens":["public","static","double[]","RGB2HSL","(","Color","color",")","{","//","Get","RGB","values","in","the","range","0","-","1\n\n","float[]","rgb","=","color",".","getRGBColorComponents","(","null",")",";","double","r","=","rgb[0]",";","double","g","=","rgb[1]",";","double","b","=","rgb[2]",";","\n\n","//","Minimum","and","Maximum","RGB","values","are","used","in","the","HSL","calculations\n\n","double","min","=","Math",".","min","(","r,","Math",".","min","(","g,","b",")",")",";","double","max","=","Math",".","max","(","r,","Math",".","max","(","g,","b",")",")",";","\n\n","//","Calculate","the","Hue\n\n","double","h","=","0",";","\n\n","if","(","max","==","min",")","{","h","=","0",";","}","else","if","(","max","==","r",")","{","h","=","(","(","60d","*","(","g","-","b",")","/","(","max","-","min",")",")","+","360d",")","%","360d",";","}","else","if","(","max","==","g",")","{","h","=","(","60d","*","(","b","-","r",")","/","(","max","-","min",")",")","+","120d",";","}","else","if","(","max","==","b",")","{","h","=","(","60d","*","(","r","-","g",")","/","(","max","-","min",")",")","+","240d",";","}","\n\n","//","Calculate","the","Luminance\n\n","double","l","=","(","max","+","min",")","/","2d",";","\n\n","//","Calculate","the","Saturation\n\n","final","double","s",";","\n\n","if","(","max","==","min",")","{","s","=","0",";","}","else","if","(","l","<=",".","5d",")","{","s","=","(","max","-","min",")","/","(","max","+","min",")",";","}","else","{","s","=","(","max","-","min",")","/","(","2d","-","max","-","min",")",";","}","\n\n","return","new","double[]","{","h,","s","*","100,","l","*","100","}",";"],"docstring_tokens":["Convert","a","RGB","Color","to","it","corresponding","HSL","values"],"prompt_tokens":[]}
{"code_tokens":["@Override\n","public","HSLFObjectData","getObjectData","(",")","{","HSLFSlideShow","ppt","=","getSheet","(",")",".","getSlideShow","(",")",";","HSLFObjectData[]","ole","=","ppt",".","getEmbeddedObjects","(",")",";","\n\n","//persist","reference\n","ExEmbed","exEmbed","=","getExEmbed","(",")",";","HSLFObjectData","data","=","null",";","if","(","exEmbed","!=","null",")","{","int","ref","=","exEmbed",".","getExOleObjAtom","(",")",".","getObjStgDataRef","(",")",";","\n\n","for","(","HSLFObjectData","hod",":","ole",")","{","if","(","hod",".","getExOleObjStg","(",")",".","getPersistId","(",")","==","ref",")","{","data=hod",";","//","keep","searching","to","return","the","last","persistent","object","with","that","refId\n","}","}","}","if","(","data==null",")","{","LOG",".","atWarn","(",")",".","log","(","\"OLE","data","not","found\"",")",";","}","\n\n","return","data",";"],"docstring_tokens":["Returns","unique","identifier","for","the","OLE","object"],"prompt_tokens":[]}
{"code_tokens":["public","String","getInstanceName","(",")","{","ExEmbed","ee","=","getExEmbed","(",")",";","return","(","ee","==","null",")","?","null",":","ee",".","getMenuName","(",")",";"],"docstring_tokens":["Returns","the","instance","name","of","the","embedded","object,","e.g"],"prompt_tokens":[]}
{"code_tokens":["static","void","sameCell","(","Sheet","sheet",")","{","sheet",".","createRow","(","0",")",".","createCell","(","0",")",".","setCellValue","(","84",")",";","sheet",".","createRow","(","1",")",".","createCell","(","0",")",".","setCellValue","(","74",")",";","sheet",".","createRow","(","2",")",".","createCell","(","0",")",".","setCellValue","(","50",")",";","sheet",".","createRow","(","3",")",".","createCell","(","0",")",".","setCellValue","(","51",")",";","sheet",".","createRow","(","4",")",".","createCell","(","0",")",".","setCellValue","(","49",")",";","sheet",".","createRow","(","5",")",".","createCell","(","0",")",".","setCellValue","(","41",")",";","\n\n","SheetConditionalFormatting","sheetCF","=","sheet",".","getSheetConditionalFormatting","(",")",";","\n\n","//","Condition","1:","Cell","Value","Is","greater","than","70","(","Blue","Fill",")","ConditionalFormattingRule","rule1","=","sheetCF",".","createConditionalFormattingRule","(","ComparisonOperator",".","GT,","\"70\"",")",";","PatternFormatting","fill1","=","rule1",".","createPatternFormatting","(",")",";","fill1",".","setFillBackgroundColor","(","IndexedColors",".","BLUE",".","index",")",";","fill1",".","setFillPattern","(","PatternFormatting",".","SOLID_FOREGROUND",")",";","\n\n","//","Condition","2:","Cell","Value","Is","less","than","50","(","Green","Fill",")","ConditionalFormattingRule","rule2","=","sheetCF",".","createConditionalFormattingRule","(","ComparisonOperator",".","LT,","\"50\"",")",";","PatternFormatting","fill2","=","rule2",".","createPatternFormatting","(",")",";","fill2",".","setFillBackgroundColor","(","IndexedColors",".","GREEN",".","index",")",";","fill2",".","setFillPattern","(","PatternFormatting",".","SOLID_FOREGROUND",")",";","\n\n","CellRangeAddress[]","regions","=","{","CellRangeAddress",".","valueOf","(","\"A1:A6\"",")","}",";","\n\n","sheetCF",".","addConditionalFormatting","(","regions,","rule1,","rule2",")",";","\n\n","sheet",".","getRow","(","0",")",".","createCell","(","2",")",".","setCellValue","(","\"<==","Condition","1:","Cell","Value","Is","greater","than","70","(","Blue","Fill",")","\"",")",";","sheet",".","getRow","(","4",")",".","createCell","(","2",")",".","setCellValue","(","\"<==","Condition","2:","Cell","Value","Is","less","than","50","(","Green","Fill",")","\"",")",";"],"docstring_tokens":["Highlight","cells","based","on","their","values"],"prompt_tokens":[]}
{"code_tokens":["static","void","formatDuplicates","(","Sheet","sheet",")","{","sheet",".","createRow","(","0",")",".","createCell","(","0",")",".","setCellValue","(","\"Code\"",")",";","sheet",".","createRow","(","1",")",".","createCell","(","0",")",".","setCellValue","(","4",")",";","sheet",".","createRow","(","2",")",".","createCell","(","0",")",".","setCellValue","(","3",")",";","sheet",".","createRow","(","3",")",".","createCell","(","0",")",".","setCellValue","(","6",")",";","sheet",".","createRow","(","4",")",".","createCell","(","0",")",".","setCellValue","(","3",")",";","sheet",".","createRow","(","5",")",".","createCell","(","0",")",".","setCellValue","(","5",")",";","sheet",".","createRow","(","6",")",".","createCell","(","0",")",".","setCellValue","(","8",")",";","sheet",".","createRow","(","7",")",".","createCell","(","0",")",".","setCellValue","(","0",")",";","sheet",".","createRow","(","8",")",".","createCell","(","0",")",".","setCellValue","(","2",")",";","sheet",".","createRow","(","9",")",".","createCell","(","0",")",".","setCellValue","(","8",")",";","sheet",".","createRow","(","10",")",".","createCell","(","0",")",".","setCellValue","(","6",")",";","\n\n","SheetConditionalFormatting","sheetCF","=","sheet",".","getSheetConditionalFormatting","(",")",";","\n\n","//","Condition","1:","Formula","Is","=A2=A1","(","White","Font",")","ConditionalFormattingRule","rule1","=","sheetCF",".","createConditionalFormattingRule","(","\"COUNTIF","(","$A$2:$A$11,A2",")",">1\"",")",";","FontFormatting","font","=","rule1",".","createFontFormatting","(",")",";","font",".","setFontStyle","(","false,","true",")",";","font",".","setFontColorIndex","(","IndexedColors",".","BLUE",".","index",")",";","\n\n","CellRangeAddress[]","regions","=","{","CellRangeAddress",".","valueOf","(","\"A2:A11\"",")","}",";","\n\n","sheetCF",".","addConditionalFormatting","(","regions,","rule1",")",";","\n\n","sheet",".","getRow","(","2",")",".","createCell","(","1",")",".","setCellValue","(","\"<==","Duplicates","numbers","in","the","column","are","highlighted",".","\"","+\n","\"Condition:","Formula","Is","=COUNTIF","(","$A$2:$A$11,A2",")",">1","(","Blue","Font",")","\"",")",";"],"docstring_tokens":["Use","Excel","conditional","formatting","to","highlight","duplicate","entries","in","a","column"],"prompt_tokens":[]}
{"code_tokens":["static","void","inList","(","Sheet","sheet",")","{","sheet",".","createRow","(","0",")",".","createCell","(","0",")",".","setCellValue","(","\"Codes\"",")",";","sheet",".","createRow","(","1",")",".","createCell","(","0",")",".","setCellValue","(","\"AA\"",")",";","sheet",".","createRow","(","2",")",".","createCell","(","0",")",".","setCellValue","(","\"BB\"",")",";","sheet",".","createRow","(","3",")",".","createCell","(","0",")",".","setCellValue","(","\"GG\"",")",";","sheet",".","createRow","(","4",")",".","createCell","(","0",")",".","setCellValue","(","\"AA\"",")",";","sheet",".","createRow","(","5",")",".","createCell","(","0",")",".","setCellValue","(","\"FF\"",")",";","sheet",".","createRow","(","6",")",".","createCell","(","0",")",".","setCellValue","(","\"XX\"",")",";","sheet",".","createRow","(","7",")",".","createCell","(","0",")",".","setCellValue","(","\"CC\"",")",";","\n\n","sheet",".","getRow","(","0",")",".","createCell","(","2",")",".","setCellValue","(","\"Valid\"",")",";","sheet",".","getRow","(","1",")",".","createCell","(","2",")",".","setCellValue","(","\"AA\"",")",";","sheet",".","getRow","(","2",")",".","createCell","(","2",")",".","setCellValue","(","\"BB\"",")",";","sheet",".","getRow","(","3",")",".","createCell","(","2",")",".","setCellValue","(","\"CC\"",")",";","\n\n","SheetConditionalFormatting","sheetCF","=","sheet",".","getSheetConditionalFormatting","(",")",";","\n\n","//","Condition","1:","Formula","Is","=A2=A1","(","White","Font",")","ConditionalFormattingRule","rule1","=","sheetCF",".","createConditionalFormattingRule","(","\"COUNTIF","(","$C$2:$C$4,A2",")","\"",")",";","PatternFormatting","fill1","=","rule1",".","createPatternFormatting","(",")",";","fill1",".","setFillBackgroundColor","(","IndexedColors",".","LIGHT_BLUE",".","index",")",";","fill1",".","setFillPattern","(","PatternFormatting",".","SOLID_FOREGROUND",")",";","\n\n","CellRangeAddress[]","regions","=","{","CellRangeAddress",".","valueOf","(","\"A2:A8\"",")","}",";","\n\n","sheetCF",".","addConditionalFormatting","(","regions,","rule1",")",";","\n\n","sheet",".","getRow","(","2",")",".","createCell","(","3",")",".","setCellValue","(","\"<==","Use","Excel","conditional","formatting","to","highlight","items","that","are","in","a","list","on","the","worksheet\"",")",";"],"docstring_tokens":["Use","Excel","conditional","formatting","to","highlight","items","that","are","in","a","list","on","the","worksheet"],"prompt_tokens":[]}
{"code_tokens":["static","void","shadeAlt","(","Sheet","sheet",")","{","SheetConditionalFormatting","sheetCF","=","sheet",".","getSheetConditionalFormatting","(",")",";","\n\n","//","Condition","1:","Formula","Is","=A2=A1","(","White","Font",")","ConditionalFormattingRule","rule1","=","sheetCF",".","createConditionalFormattingRule","(","\"MOD","(","ROW","(",")",",2",")","\"",")",";","PatternFormatting","fill1","=","rule1",".","createPatternFormatting","(",")",";","fill1",".","setFillBackgroundColor","(","IndexedColors",".","LIGHT_GREEN",".","index",")",";","fill1",".","setFillPattern","(","PatternFormatting",".","SOLID_FOREGROUND",")",";","\n\n","CellRangeAddress[]","regions","=","{","CellRangeAddress",".","valueOf","(","\"A1:Z100\"",")","}",";","\n\n","sheetCF",".","addConditionalFormatting","(","regions,","rule1",")",";","\n\n","sheet",".","createRow","(","0",")",".","createCell","(","1",")",".","setCellValue","(","\"Shade","Alternating","Rows\"",")",";","sheet",".","createRow","(","1",")",".","createCell","(","1",")",".","setCellValue","(","\"Condition:","Formula","Is","=MOD","(","ROW","(",")",",2",")","(","Light","Green","Fill",")","\"",")",";"],"docstring_tokens":["Use","Excel","conditional","formatting","to","shade","alternating","rows","on","the","worksheet"],"prompt_tokens":[]}
{"code_tokens":["@Internal\n","public","byte","getIxchFollow","(",")","{","return","field_5_ixchFollow",";"],"docstring_tokens":["An","unsigned","integer","that","specifies","the","character","that","follows","the","number","text"],"prompt_tokens":[]}
{"code_tokens":["@Internal\n","public","short","getCbGrpprlChpx","(",")","{","return","field_8_cbGrpprlChpx",";"],"docstring_tokens":["An","unsigned","integer","that","specifies","the","size,","in","bytes,","of","the","grpprlChpx","in","the","LVL","that","contains","this","LVLF"],"prompt_tokens":[]}
{"code_tokens":["@Internal\n","public","void","setCbGrpprlPapx","(","short","field_9_cbGrpprlPapx",")","{","this",".","field_9_cbGrpprlPapx","=","field_9_cbGrpprlPapx",";"],"docstring_tokens":["An","unsigned","integer","that","specifies","the","size,","in","bytes,","of","the","grpprlPapx","in","the","LVL","that","contains","this","LVLF"],"prompt_tokens":[]}
{"code_tokens":["@Internal\n","public","void","setJc","(","byte","value",")","{","field_3_info","=","(","byte",")","jc",".","setValue","(","field_3_info,","value",")",";"],"docstring_tokens":["Sets","the","jc","field","value"],"prompt_tokens":[]}
{"code_tokens":["private","static","double","evaluate","(","int","year,","int","month,","int","pDay",")","throws","EvaluationException","{","//","We","don't","support","negative","years","yet\n","if","(","year","<","0",")","{","throw","new","EvaluationException","(","ErrorEval",".","VALUE_INVALID",")",";","}","//","Negative","months","are","fairly","easy\n","while","(","month","<","0",")","{","year--",";","month","+=","12",";","}","//","Negative","days","are","handled","by","the","Java","Calendar\n","//","Excel","has","bugs","around","leap","years","in","1900,","handle","them\n","//","Special","case","for","the","non-existant","1900","leap","year\n","if","(","year","==","1900","&&","month","==","Calendar",".","FEBRUARY","&&","pDay","==","29",")","{","return","60",".","0",";","}","\n\n","//","If","they","give","a","date","in","1900","in","Jan/Feb,","with","the","days\n","//","putting","it","past","the","leap","year,","adjust\n","int","day","=","pDay",";","if","(","year","==","1900",")","{","if","(","(","month","==","Calendar",".","JANUARY","&&","day",">=","60",")","||\n","(","month","==","Calendar",".","FEBRUARY","&&","day",">=","30",")",")","{","day--",";","}","}","\n\n","//","Turn","this","into","a","Java","date\n","Calendar","c","=","LocaleUtil",".","getLocaleCalendar","(","year,","month,","day",")",";","//","Handle","negative","days","of","the","week,","that","pull","us","across\n","//","the","29th","of","Feb","1900\n","if","(","pDay","<","0","&&","c",".","get","(","Calendar",".","YEAR",")","==","1900","&&\n","month",">","Calendar",".","FEBRUARY","&&","c",".","get","(","Calendar",".","MONTH",")","<","Calendar",".","MARCH",")","{","c",".","add","(","Calendar",".","DATE,","1",")",";","}","\n\n","//","TODO","Identify","if","we're","doing","1900","or","1904","date","windowing\n","boolean","use1904windowing","=","false",";","//","Have","this","Java","date","turned","back","into","an","Excel","one\n","return","DateUtil",".","getExcelDate","(","c",".","getTime","(",")",",","use1904windowing",")",";"],"docstring_tokens":["Note","-","works","with","Java","Calendar","months,","not","Excel","months"],"prompt_tokens":[]}
{"code_tokens":["byte[]","getHashMagic","(",")","{","//","in","an","earlier","release","the","hashMagic","(","aka","DigestAlgorithmIdentifier",")","contained","only\n","//","an","object","identifier,","but","to","conform","with","the","header","generated","by","the\n","//","javax-signature","API,","the","empty","<associated","parameters>","are","also","included\n","try","(","UnsynchronizedByteArrayOutputStream","bos","=","new","UnsynchronizedByteArrayOutputStream","(",")",")","{","final","byte[]","oidBytes","=","new","Oid","(","algo",".","rsaOid",")",".","getDER","(",")",";","\n\n","bos",".","write","(","0x30",")",";","bos",".","write","(","algo",".","hashSize+oidBytes",".","length+6",")",";","bos",".","write","(","0x30",")",";","bos",".","write","(","oidBytes",".","length+2",")",";","bos",".","write","(","oidBytes",")",";","bos",".","write","(","new","byte[]","{","5,0,4","}",")",";","bos",".","write","(","algo",".","hashSize",")",";","\n\n","return","bos",".","toByteArray","(",")",";","}","catch","(","GSSException|IOException","e",")","{","throw","new","IllegalStateException","(","e",")",";","}"],"docstring_tokens":["Each","digest","method","has","its","own","ASN1","header"],"prompt_tokens":[]}
{"code_tokens":["protected","void","init","(",")","{","//type","of","the","text\n","int","type","=","getTextType","(",")",";","\n\n","int","head",";","int","pos","=","0",";","\n\n","//number","of","indentation","levels\n","short","levels","=","LittleEndian",".","getShort","(","_data,","0",")",";","pos","+=","LittleEndianConsts",".","SHORT_SIZE",";","\n\n","paragraphStyles","=","new","ArrayList<>","(","levels",")",";","charStyles","=","new","ArrayList<>","(","levels",")",";","\n\n","for","(","short","i","=","0",";","i","<","levels",";","i++",")","{","TextPropCollection","prprops","=","new","TextPropCollection","(","0,","TextPropType",".","paragraph",")",";","if","(","type",">=","TextPlaceholder",".","CENTER_BODY",".","nativeId",")","{","//","Fetch","the","2","byte","value,","that","is","safe","to","ignore","for","some","types","of","text\n","short","indentLevel","=","LittleEndian",".","getShort","(","_data,","pos",")",";","prprops",".","setIndentLevel","(","indentLevel",")",";","pos","+=","LittleEndianConsts",".","SHORT_SIZE",";","}","else","{","prprops",".","setIndentLevel","(","(","short",")","-1",")",";","}","\n\n","head","=","LittleEndian",".","getInt","(","_data,","pos",")",";","pos","+=","LittleEndianConsts",".","INT_SIZE",";","\n\n","pos","+=","prprops",".","buildTextPropList","(","head,","_data,","pos",")",";","paragraphStyles",".","add","(","prprops",")",";","\n\n","head","=","LittleEndian",".","getInt","(","_data,","pos",")",";","pos","+=","LittleEndianConsts",".","INT_SIZE",";","TextPropCollection","chprops","=","new","TextPropCollection","(","0,","TextPropType",".","character",")",";","pos","+=","chprops",".","buildTextPropList","(","head,","_data,","pos",")",";","charStyles",".","add","(","chprops",")",";","}"],"docstring_tokens":["parse","the","record","data","and","initialize","styles"],"prompt_tokens":[]}
{"code_tokens":["public","String","getTitleFormula","(",")","{","if","(","!getCTChart","(",")",".","isSetTitle","(",")",")","{","return","null",";","}","\n\n","CTTitle","title","=","getCTChart","(",")",".","getTitle","(",")",";","\n\n","if","(","!title",".","isSetTx","(",")",")","{","return","null",";","}","\n\n","CTTx","tx","=","title",".","getTx","(",")",";","\n\n","if","(","!tx",".","isSetStrRef","(",")",")","{","return","null",";","}","\n\n","return","tx",".","getStrRef","(",")",".","getF","(",")",";"],"docstring_tokens":["Get","the","chart","title","formula","expression","if","there","is","one"],"prompt_tokens":[]}
{"code_tokens":["public","void","setTitleFormula","(","String","formula",")","{","CTTitle","ctTitle",";","if","(","getCTChart","(",")",".","isSetTitle","(",")",")","{","ctTitle","=","getCTChart","(",")",".","getTitle","(",")",";","}","else","{","ctTitle","=","getCTChart","(",")",".","addNewTitle","(",")",";","}","\n\n","CTTx","tx",";","if","(","ctTitle",".","isSetTx","(",")",")","{","tx","=","ctTitle",".","getTx","(",")",";","}","else","{","tx","=","ctTitle",".","addNewTx","(",")",";","}","\n\n","if","(","tx",".","isSetRich","(",")",")","{","tx",".","unsetRich","(",")",";","}","\n\n","CTStrRef","strRef",";","if","(","tx",".","isSetStrRef","(",")",")","{","strRef","=","tx",".","getStrRef","(",")",";","}","else","{","strRef","=","tx",".","addNewStrRef","(",")",";","}","\n\n","strRef",".","setF","(","formula",")",";"],"docstring_tokens":["Set","the","formula","expression","to","use","for","the","chart","title"],"prompt_tokens":[]}
{"code_tokens":["@Internal\n","public","boolean","getFInTable","(",")","{","return","field_14_fInTable",";"],"docstring_tokens":["Paragraph","is","in","table","flag"],"prompt_tokens":[]}
{"code_tokens":["@Internal\n","public","boolean","getFWidowControl","(",")","{","return","field_32_fWidowControl",";"],"docstring_tokens":["1,","Word","will","prevent","widowed","lines","in","this","paragraph","from","being","placed","at","the","beginning","of","a","page"],"prompt_tokens":[]}
{"code_tokens":["@Internal\n","public","boolean","getFKinsoku","(",")","{","return","field_33_fKinsoku",";"],"docstring_tokens":["apply","Kinsoku","rules","when","performing","line","wrapping"],"prompt_tokens":[]}
{"code_tokens":["@Internal\n","public","boolean","getFInnerTableCell","(",")","{","return","field_48_fInnerTableCell",";"],"docstring_tokens":["When","1,","the","end","of","paragraph","mark","is","really","an","end","of","cell","mark","for","a","nested","table","cell"],"prompt_tokens":[]}
{"code_tokens":["//","Keep","this","code","in","sync","with","{","@link","ColumnShifter#shiftMergedRegions","}","@Override\n","public","List<CellRangeAddress>","shiftMergedRegions","(","int","startRow,","int","endRow,","int","n",")","{","List<CellRangeAddress>","shiftedRegions","=","new","ArrayList<>","(",")",";","Set<Integer>","removedIndices","=","new","HashSet<>","(",")",";","//move","merged","regions","completely","if","they","fall","within","the","new","region","boundaries","when","they","are","shifted\n","int","size","=","sheet",".","getNumMergedRegions","(",")",";","for","(","int","i","=","0",";","i","<","size",";","i++",")","{","CellRangeAddress","merged","=","sheet",".","getMergedRegion","(","i",")",";","\n\n","//","remove","merged","region","that","are","replaced","by","the","shifting,\n","//","i",".","e",".","where","the","area","includes","something","in","the","overwritten","area\n","if","(","removalNeeded","(","merged,","startRow,","endRow,","n",")",")","{","removedIndices",".","add","(","i",")",";","continue",";","}","\n\n","boolean","inStart","=","(","merged",".","getFirstRow","(",")",">=","startRow","||","merged",".","getLastRow","(",")",">=","startRow",")",";","boolean","inEnd","=","(","merged",".","getFirstRow","(",")","<=","endRow","||","merged",".","getLastRow","(",")","<=","endRow",")",";","\n\n","//don't","check","if","it's","not","within","the","shifted","area\n","if","(","!inStart","||","!inEnd",")","{","continue",";","}","\n\n","//only","shift","if","the","region","outside","the","shifted","rows","is","not","merged","too\n","if","(","!merged",".","containsRow","(","startRow","-","1",")","&&","!merged",".","containsRow","(","endRow","+","1",")",")","{","merged",".","setFirstRow","(","merged",".","getFirstRow","(",")","+","n",")",";","merged",".","setLastRow","(","merged",".","getLastRow","(",")","+","n",")",";","//have","to","remove/add","it","back\n","shiftedRegions",".","add","(","merged",")",";","removedIndices",".","add","(","i",")",";","}","}","if","(","!removedIndices",".","isEmpty","(",")",")","{","sheet",".","removeMergedRegions","(","removedIndices",")",";","}","\n\n","//read","so","it","doesn't","get","shifted","again\n","for","(","CellRangeAddress","region",":","shiftedRegions",")","{","sheet",".","addMergedRegion","(","region",")",";","}","return","shiftedRegions",";"],"docstring_tokens":["Shifts,","grows,","or","shrinks","the","merged","regions","due","to","a","row","shift"],"prompt_tokens":[]}
{"code_tokens":["public","static","CellFormatCondition","getInstance","(","String","opString,\n","String","constStr",")","{","\n\n","if","(","!TESTS",".","containsKey","(","opString",")",")","throw","new","IllegalArgumentException","(","\"Unknown","test:","\"","+","opString",")",";","int","test","=","TESTS",".","get","(","opString",")",";","\n\n","final","double","c","=","Double",".","parseDouble","(","constStr",")",";","\n\n","switch","(","test",")","{","case","LT:\n","return","new","CellFormatCondition","(",")","{","@Override\n","public","boolean","pass","(","double","value",")","{","return","value","<","c",";","}","}",";","case","LE:\n","return","new","CellFormatCondition","(",")","{","@Override\n","public","boolean","pass","(","double","value",")","{","return","value","<=","c",";","}","}",";","case","GT:\n","return","new","CellFormatCondition","(",")","{","@Override\n","public","boolean","pass","(","double","value",")","{","return","value",">","c",";","}","}",";","case","GE:\n","return","new","CellFormatCondition","(",")","{","@Override\n","public","boolean","pass","(","double","value",")","{","return","value",">=","c",";","}","}",";","case","EQ:\n","return","new","CellFormatCondition","(",")","{","@Override\n","public","boolean","pass","(","double","value",")","{","return","value","==","c",";","}","}",";","case","NE:\n","return","new","CellFormatCondition","(",")","{","@Override\n","public","boolean","pass","(","double","value",")","{","return","value","!=","c",";","}","}",";","default:\n","throw","new","IllegalArgumentException","(","\"Cannot","create","for","test","number","\"","+","test","+","\"","(","\\\"\"","+","opString","+\n","\"\\\"",")","\"",")",";","}"],"docstring_tokens":["Returns","an","instance","of","a","condition","object"],"prompt_tokens":[]}
{"code_tokens":["@Override\n","public","int","getSignature","(",")","{","return","(","getUIDInstanceCount","(",")","==","1","?","0x5420",":","0x5430",")",";"],"docstring_tokens":["PICT","signature","is","0x5420","or","0x5430"],"prompt_tokens":[]}
{"code_tokens":["@Override\n","public","void","setSignature","(","int","signature",")","{","switch","(","signature",")","{","case","0x5420:\n","setUIDInstanceCount","(","1",")",";","break",";","case","0x5430:\n","setUIDInstanceCount","(","2",")",";","break",";","default:\n","throw","new","IllegalArgumentException","(","signature+\"","is","not","a","valid","instance/signature","value","for","PICT\"",")",";","}"],"docstring_tokens":["Sets","the","PICT","signature","-","either","0x5420","or","0x5430"],"prompt_tokens":[]}
{"code_tokens":["public","static","void","setBorderLeft","(","BorderStyle","border,","CellRangeAddress","region,","Sheet","sheet",")","{","int","rowStart","=","region",".","getFirstRow","(",")",";","int","rowEnd","=","region",".","getLastRow","(",")",";","int","column","=","region",".","getFirstColumn","(",")",";","\n\n","CellPropertySetter","cps","=","new","CellPropertySetter","(","CellUtil",".","BORDER_LEFT,","border",")",";","for","(","int","i","=","rowStart",";","i","<=","rowEnd",";","i++",")","{","cps",".","setProperty","(","CellUtil",".","getRow","(","i,","sheet",")",",","column",")",";","}"],"docstring_tokens":["Sets","the","left","border","style","for","a","region","of","cells","by","manipulating","the","cell","style","of","the","individual","cells","on","the","left"],"prompt_tokens":[]}
{"code_tokens":["public","static","void","setLeftBorderColor","(","int","color,","CellRangeAddress","region,","Sheet","sheet",")","{","int","rowStart","=","region",".","getFirstRow","(",")",";","int","rowEnd","=","region",".","getLastRow","(",")",";","int","column","=","region",".","getFirstColumn","(",")",";","\n\n","CellPropertySetter","cps","=","new","CellPropertySetter","(","CellUtil",".","LEFT_BORDER_COLOR,","color",")",";","for","(","int","i","=","rowStart",";","i","<=","rowEnd",";","i++",")","{","cps",".","setProperty","(","CellUtil",".","getRow","(","i,","sheet",")",",","column",")",";","}"],"docstring_tokens":["Sets","the","left","border","color","for","a","region","of","cells","by","manipulating","the","cell","style","of","the","individual","cells","on","the","left"],"prompt_tokens":[]}
{"code_tokens":["public","static","void","setBorderRight","(","BorderStyle","border,","CellRangeAddress","region,","Sheet","sheet",")","{","int","rowStart","=","region",".","getFirstRow","(",")",";","int","rowEnd","=","region",".","getLastRow","(",")",";","int","column","=","region",".","getLastColumn","(",")",";","\n\n","CellPropertySetter","cps","=","new","CellPropertySetter","(","CellUtil",".","BORDER_RIGHT,","border",")",";","for","(","int","i","=","rowStart",";","i","<=","rowEnd",";","i++",")","{","cps",".","setProperty","(","CellUtil",".","getRow","(","i,","sheet",")",",","column",")",";","}"],"docstring_tokens":["Sets","the","right","border","style","for","a","region","of","cells","by","manipulating","the","cell","style","of","the","individual","cells","on","the","right"],"prompt_tokens":[]}
{"code_tokens":["public","static","void","setRightBorderColor","(","int","color,","CellRangeAddress","region,","Sheet","sheet",")","{","int","rowStart","=","region",".","getFirstRow","(",")",";","int","rowEnd","=","region",".","getLastRow","(",")",";","int","column","=","region",".","getLastColumn","(",")",";","\n\n","CellPropertySetter","cps","=","new","CellPropertySetter","(","CellUtil",".","RIGHT_BORDER_COLOR,","color",")",";","for","(","int","i","=","rowStart",";","i","<=","rowEnd",";","i++",")","{","cps",".","setProperty","(","CellUtil",".","getRow","(","i,","sheet",")",",","column",")",";","}"],"docstring_tokens":["Sets","the","right","border","color","for","a","region","of","cells","by","manipulating","the","cell","style","of","the","individual","cells","on","the","right"],"prompt_tokens":[]}
{"code_tokens":["public","static","void","setBorderBottom","(","BorderStyle","border,","CellRangeAddress","region,","Sheet","sheet",")","{","int","colStart","=","region",".","getFirstColumn","(",")",";","int","colEnd","=","region",".","getLastColumn","(",")",";","int","rowIndex","=","region",".","getLastRow","(",")",";","CellPropertySetter","cps","=","new","CellPropertySetter","(","CellUtil",".","BORDER_BOTTOM,","border",")",";","Row","row","=","CellUtil",".","getRow","(","rowIndex,","sheet",")",";","for","(","int","i","=","colStart",";","i","<=","colEnd",";","i++",")","{","cps",".","setProperty","(","row,","i",")",";","}"],"docstring_tokens":["Sets","the","bottom","border","style","for","a","region","of","cells","by","manipulating","the","cell","style","of","the","individual","cells","on","the","bottom"],"prompt_tokens":[]}
{"code_tokens":["public","static","void","setBottomBorderColor","(","int","color,","CellRangeAddress","region,","Sheet","sheet",")","{","int","colStart","=","region",".","getFirstColumn","(",")",";","int","colEnd","=","region",".","getLastColumn","(",")",";","int","rowIndex","=","region",".","getLastRow","(",")",";","CellPropertySetter","cps","=","new","CellPropertySetter","(","CellUtil",".","BOTTOM_BORDER_COLOR,","color",")",";","Row","row","=","CellUtil",".","getRow","(","rowIndex,","sheet",")",";","for","(","int","i","=","colStart",";","i","<=","colEnd",";","i++",")","{","cps",".","setProperty","(","row,","i",")",";","}"],"docstring_tokens":["Sets","the","bottom","border","color","for","a","region","of","cells","by","manipulating","the","cell","style","of","the","individual","cells","on","the","bottom"],"prompt_tokens":[]}
{"code_tokens":["public","static","void","setBorderTop","(","BorderStyle","border,","CellRangeAddress","region,","Sheet","sheet",")","{","int","colStart","=","region",".","getFirstColumn","(",")",";","int","colEnd","=","region",".","getLastColumn","(",")",";","int","rowIndex","=","region",".","getFirstRow","(",")",";","CellPropertySetter","cps","=","new","CellPropertySetter","(","CellUtil",".","BORDER_TOP,","border",")",";","Row","row","=","CellUtil",".","getRow","(","rowIndex,","sheet",")",";","for","(","int","i","=","colStart",";","i","<=","colEnd",";","i++",")","{","cps",".","setProperty","(","row,","i",")",";","}"],"docstring_tokens":["Sets","the","top","border","style","for","a","region","of","cells","by","manipulating","the","cell","style","of","the","individual","cells","on","the","top"],"prompt_tokens":[]}
{"code_tokens":["public","static","void","setTopBorderColor","(","int","color,","CellRangeAddress","region,","Sheet","sheet",")","{","int","colStart","=","region",".","getFirstColumn","(",")",";","int","colEnd","=","region",".","getLastColumn","(",")",";","int","rowIndex","=","region",".","getFirstRow","(",")",";","CellPropertySetter","cps","=","new","CellPropertySetter","(","CellUtil",".","TOP_BORDER_COLOR,","color",")",";","Row","row","=","CellUtil",".","getRow","(","rowIndex,","sheet",")",";","for","(","int","i","=","colStart",";","i","<=","colEnd",";","i++",")","{","cps",".","setProperty","(","row,","i",")",";","}"],"docstring_tokens":["Sets","the","top","border","color","for","a","region","of","cells","by","manipulating","the","cell","style","of","the","individual","cells","on","the","top"],"prompt_tokens":[]}
{"code_tokens":["public","void","updateCell","(","String","sheetName,","int","rowIndex,","int","columnIndex,","ValueEval","value",")","{","\n\n","ForkedEvaluationCell","cell","=","_sewb",".","getOrCreateUpdatableCell","(","sheetName,","rowIndex,","columnIndex",")",";","cell",".","setValue","(","value",")",";","_evaluator",".","notifyUpdateCell","(","cell",")",";"],"docstring_tokens":["Sets","the","specified","cell","to","the","supplied","value"],"prompt_tokens":[]}
{"code_tokens":["public","void","setAlternateFormula","(","boolean","formula",")","{","field_2_wsbool","=","alternateformula",".","setByteBoolean","(","field_2_wsbool,\n","formula",")",";"],"docstring_tokens":["whether","alternative","formula","entry","is","on"],"prompt_tokens":[]}
{"code_tokens":["public","ListLevel","getLevel","(","int","index",")","{","return","_levels[index","-","1]",";"],"docstring_tokens":["Gets","the","level","associated","to","a","particular","List","at","a","particular","index"],"prompt_tokens":[]}
{"code_tokens":["\n\n","public","short","getNumEntries","(",")","{","return","_cEntries",";"],"docstring_tokens":["get","the","number","of","AutoFilter","drop-down","arrows","on","the","sheet"],"prompt_tokens":[]}
{"code_tokens":["public","int","getSize","(",")","{","return","PLAIN_TOKEN_SIZE\n","//","data","written","after","the","all","tokens:\n","+","1","+","2","//","column,","row\n","+","ConstantValueParser",".","getEncodedSize","(","_arrayValues",")",";"],"docstring_tokens":["This","size","includes","the","size","of","the","array","Ptg","plus","the","Array","Ptg","Token","value","size"],"prompt_tokens":[]}
{"code_tokens":["private","static","Map<String,","CellStyle>","createStyles","(","Workbook","wb",")","{","Map<String,","CellStyle>","styles","=","new","HashMap<>","(",")",";","\n\n","CellStyle","style",";","Font","titleFont","=","wb",".","createFont","(",")",";","titleFont",".","setFontHeightInPoints","(","(","short",")","14",")",";","titleFont",".","setFontName","(","\"Trebuchet","MS\"",")",";","style","=","wb",".","createCellStyle","(",")",";","style",".","setFont","(","titleFont",")",";","style",".","setBorderBottom","(","BorderStyle",".","DOTTED",")",";","style",".","setBottomBorderColor","(","IndexedColors",".","GREY_40_PERCENT",".","getIndex","(",")",")",";","styles",".","put","(","\"title\",","style",")",";","\n\n","Font","itemFont","=","wb",".","createFont","(",")",";","itemFont",".","setFontHeightInPoints","(","(","short",")","9",")",";","itemFont",".","setFontName","(","\"Trebuchet","MS\"",")",";","style","=","wb",".","createCellStyle","(",")",";","style",".","setAlignment","(","HorizontalAlignment",".","LEFT",")",";","style",".","setFont","(","itemFont",")",";","styles",".","put","(","\"item_left\",","style",")",";","\n\n","style","=","wb",".","createCellStyle","(",")",";","style",".","setAlignment","(","HorizontalAlignment",".","RIGHT",")",";","style",".","setFont","(","itemFont",")",";","styles",".","put","(","\"item_right\",","style",")",";","\n\n","style","=","wb",".","createCellStyle","(",")",";","style",".","setAlignment","(","HorizontalAlignment",".","RIGHT",")",";","style",".","setFont","(","itemFont",")",";","style",".","setBorderRight","(","BorderStyle",".","DOTTED",")",";","style",".","setRightBorderColor","(","IndexedColors",".","GREY_40_PERCENT",".","getIndex","(",")",")",";","style",".","setBorderBottom","(","BorderStyle",".","DOTTED",")",";","style",".","setBottomBorderColor","(","IndexedColors",".","GREY_40_PERCENT",".","getIndex","(",")",")",";","style",".","setBorderLeft","(","BorderStyle",".","DOTTED",")",";","style",".","setLeftBorderColor","(","IndexedColors",".","GREY_40_PERCENT",".","getIndex","(",")",")",";","style",".","setBorderTop","(","BorderStyle",".","DOTTED",")",";","style",".","setTopBorderColor","(","IndexedColors",".","GREY_40_PERCENT",".","getIndex","(",")",")",";","style",".","setDataFormat","(","wb",".","createDataFormat","(",")",".","getFormat","(","\"_","(","$*","#,##0",".","00_",")",";","_","(","$*","(","#,##0",".","00",")",";","_","(","$*","\\\"-\\\"??_",")",";","_","(","@_",")","\"",")",")",";","styles",".","put","(","\"input_$\",","style",")",";","\n\n","style","=","wb",".","createCellStyle","(",")",";","style",".","setAlignment","(","HorizontalAlignment",".","RIGHT",")",";","style",".","setFont","(","itemFont",")",";","style",".","setBorderRight","(","BorderStyle",".","DOTTED",")",";","style",".","setRightBorderColor","(","IndexedColors",".","GREY_40_PERCENT",".","getIndex","(",")",")",";","style",".","setBorderBottom","(","BorderStyle",".","DOTTED",")",";","style",".","setBottomBorderColor","(","IndexedColors",".","GREY_40_PERCENT",".","getIndex","(",")",")",";","style",".","setBorderLeft","(","BorderStyle",".","DOTTED",")",";","style",".","setLeftBorderColor","(","IndexedColors",".","GREY_40_PERCENT",".","getIndex","(",")",")",";","style",".","setBorderTop","(","BorderStyle",".","DOTTED",")",";","style",".","setTopBorderColor","(","IndexedColors",".","GREY_40_PERCENT",".","getIndex","(",")",")",";","style",".","setDataFormat","(","wb",".","createDataFormat","(",")",".","getFormat","(","\"0",".","000%\"",")",")",";","styles",".","put","(","\"input_%\",","style",")",";","\n\n","style","=","wb",".","createCellStyle","(",")",";","style",".","setAlignment","(","HorizontalAlignment",".","RIGHT",")",";","style",".","setFont","(","itemFont",")",";","style",".","setBorderRight","(","BorderStyle",".","DOTTED",")",";","style",".","setRightBorderColor","(","IndexedColors",".","GREY_40_PERCENT",".","getIndex","(",")",")",";","style",".","setBorderBottom","(","BorderStyle",".","DOTTED",")",";","style",".","setBottomBorderColor","(","IndexedColors",".","GREY_40_PERCENT",".","getIndex","(",")",")",";","style",".","setBorderLeft","(","BorderStyle",".","DOTTED",")",";","style",".","setLeftBorderColor","(","IndexedColors",".","GREY_40_PERCENT",".","getIndex","(",")",")",";","style",".","setBorderTop","(","BorderStyle",".","DOTTED",")",";","style",".","setTopBorderColor","(","IndexedColors",".","GREY_40_PERCENT",".","getIndex","(",")",")",";","style",".","setDataFormat","(","wb",".","createDataFormat","(",")",".","getFormat","(","\"0\"",")",")",";","styles",".","put","(","\"input_i\",","style",")",";","\n\n","style","=","wb",".","createCellStyle","(",")",";","style",".","setAlignment","(","HorizontalAlignment",".","CENTER",")",";","style",".","setFont","(","itemFont",")",";","style",".","setDataFormat","(","wb",".","createDataFormat","(",")",".","getFormat","(","\"m/d/yy\"",")",")",";","styles",".","put","(","\"input_d\",","style",")",";","\n\n","style","=","wb",".","createCellStyle","(",")",";","style",".","setAlignment","(","HorizontalAlignment",".","RIGHT",")",";","style",".","setFont","(","itemFont",")",";","style",".","setBorderRight","(","BorderStyle",".","DOTTED",")",";","style",".","setRightBorderColor","(","IndexedColors",".","GREY_40_PERCENT",".","getIndex","(",")",")",";","style",".","setBorderBottom","(","BorderStyle",".","DOTTED",")",";","style",".","setBottomBorderColor","(","IndexedColors",".","GREY_40_PERCENT",".","getIndex","(",")",")",";","style",".","setBorderLeft","(","BorderStyle",".","DOTTED",")",";","style",".","setLeftBorderColor","(","IndexedColors",".","GREY_40_PERCENT",".","getIndex","(",")",")",";","style",".","setBorderTop","(","BorderStyle",".","DOTTED",")",";","style",".","setTopBorderColor","(","IndexedColors",".","GREY_40_PERCENT",".","getIndex","(",")",")",";","style",".","setDataFormat","(","wb",".","createDataFormat","(",")",".","getFormat","(","\"$##,##0",".","00\"",")",")",";","style",".","setBorderBottom","(","BorderStyle",".","DOTTED",")",";","style",".","setBottomBorderColor","(","IndexedColors",".","GREY_40_PERCENT",".","getIndex","(",")",")",";","style",".","setFillForegroundColor","(","IndexedColors",".","GREY_25_PERCENT",".","getIndex","(",")",")",";","style",".","setFillPattern","(","FillPatternType",".","SOLID_FOREGROUND",")",";","styles",".","put","(","\"formula_$\",","style",")",";","\n\n","style","=","wb",".","createCellStyle","(",")",";","style",".","setAlignment","(","HorizontalAlignment",".","RIGHT",")",";","style",".","setFont","(","itemFont",")",";","style",".","setBorderRight","(","BorderStyle",".","DOTTED",")",";","style",".","setRightBorderColor","(","IndexedColors",".","GREY_40_PERCENT",".","getIndex","(",")",")",";","style",".","setBorderBottom","(","BorderStyle",".","DOTTED",")",";","style",".","setBottomBorderColor","(","IndexedColors",".","GREY_40_PERCENT",".","getIndex","(",")",")",";","style",".","setBorderLeft","(","BorderStyle",".","DOTTED",")",";","style",".","setLeftBorderColor","(","IndexedColors",".","GREY_40_PERCENT",".","getIndex","(",")",")",";","style",".","setBorderTop","(","BorderStyle",".","DOTTED",")",";","style",".","setTopBorderColor","(","IndexedColors",".","GREY_40_PERCENT",".","getIndex","(",")",")",";","style",".","setDataFormat","(","wb",".","createDataFormat","(",")",".","getFormat","(","\"0\"",")",")",";","style",".","setBorderBottom","(","BorderStyle",".","DOTTED",")",";","style",".","setBottomBorderColor","(","IndexedColors",".","GREY_40_PERCENT",".","getIndex","(",")",")",";","style",".","setFillForegroundColor","(","IndexedColors",".","GREY_25_PERCENT",".","getIndex","(",")",")",";","style",".","setFillPattern","(","FillPatternType",".","SOLID_FOREGROUND",")",";","styles",".","put","(","\"formula_i\",","style",")",";","\n\n","return","styles",";"],"docstring_tokens":["cell","styles","used","for","formatting","calendar","sheets"],"prompt_tokens":[]}
{"code_tokens":["public","XWPFTableRow","createRow","(",")","{","int","sizeCol","=","ctTbl",".","sizeOfTrArray","(",")",">","0","?","ctTbl",".","getTrArray","(","0",")",".","sizeOfTcArray","(",")",":","0",";","XWPFTableRow","tabRow","=","new","XWPFTableRow","(","ctTbl",".","addNewTr","(",")",",","this",")",";","addColumn","(","tabRow,","sizeCol",")",";","tableRows",".","add","(","tabRow",")",";","return","tabRow",";"],"docstring_tokens":["create","a","new","XWPFTableRow","object","with","as","many","cells","as","the","number","of","columns","defined","in","that","moment"],"prompt_tokens":[]}
{"code_tokens":["public","void","removeInsideHBorder","(",")","{","removeBorder","(","Border",".","INSIDE_H",")",";"],"docstring_tokens":["Remove","inside","horizontal","borders","for","table"],"prompt_tokens":[]}
{"code_tokens":["public","void","removeInsideVBorder","(",")","{","removeBorder","(","Border",".","INSIDE_V",")",";"],"docstring_tokens":["Remove","inside","vertical","borders","for","table"],"prompt_tokens":[]}
{"code_tokens":["private","void","cleanupTblBorders","(",")","{","final","CTTblPr","pr","=","getTblPr","(","false",")",";","if","(","pr","!=","null","&&","pr",".","isSetTblBorders","(",")",")","{","final","CTTblBorders","b","=","pr",".","getTblBorders","(",")",";","if","(","!","(","b",".","isSetInsideH","(",")","||\n","b",".","isSetInsideV","(",")","||\n","b",".","isSetTop","(",")","||\n","b",".","isSetBottom","(",")","||\n","b",".","isSetLeft","(",")","||\n","b",".","isSetRight","(",")",")",")","{","pr",".","unsetTblBorders","(",")",";","}","}"],"docstring_tokens":["removes","the","Borders","node","from","Table","properties","if","there","are","no","border","elements"],"prompt_tokens":[]}
{"code_tokens":["public","boolean","removeRow","(","int","pos",")","throws","IndexOutOfBoundsException","{","if","(","pos",">=","0","&&","pos","<","tableRows",".","size","(",")",")","{","if","(","ctTbl",".","sizeOfTrArray","(",")",">","0",")","{","ctTbl",".","removeTr","(","pos",")",";","}","tableRows",".","remove","(","pos",")",";","return","true",";","}","return","false",";"],"docstring_tokens":["Remove","a","row","at","position","pos","from","the","table"],"prompt_tokens":[]}
{"code_tokens":["public","XWPFTableRow","getRow","(","CTRow","row",")","{","for","(","int","i","=","0",";","i","<","getRows","(",")",".","size","(",")",";","i++",")","{","if","(","getRows","(",")",".","get","(","i",")",".","getCtRow","(",")","==","row",")","{","return","getRow","(","i",")",";","}","}","return","null",";"],"docstring_tokens":["returns","the","XWPFRow","which","belongs","to","the","CTRow","row","if","this","row","is","not","existing","in","the","table","null","will","be","returned"],"prompt_tokens":[]}
{"code_tokens":["protected","static","void","setWidthPercentage","(","CTTblWidth","ctWidth,","String","widthValue",")","{","ctWidth",".","setType","(","STTblWidth",".","PCT",")",";","if","(","widthValue",".","matches","(","REGEX_PERCENTAGE",")",")","{","String","numberPart","=","widthValue",".","substring","(","0,","widthValue",".","length","(",")","-","1",")",";","double","percentage","=","Double",".","parseDouble","(","numberPart",")","*","50",";","long","intValue","=","Math",".","round","(","percentage",")",";","ctWidth",".","setW","(","BigInteger",".","valueOf","(","intValue",")",")",";","}","else","if","(","widthValue",".","matches","(","\"[0-9]+\"",")",")","{","ctWidth",".","setW","(","new","BigInteger","(","widthValue",")",")",";","}","else","{","throw","new","RuntimeException","(","\"setWidthPercentage","(",")",":","Width","value","must","be","a","percentage","(","\\\"33",".","3%\\\"","or","an","integer,","was","\\\"\"","+","widthValue","+","\"\\\"\"",")",";","}"],"docstring_tokens":["Set","the","underlying","table","width","value","to","a","percentage","value"],"prompt_tokens":[]}
{"code_tokens":["public","short","getFontIndex","(",")","{","return","field_1_fontIndex",";"],"docstring_tokens":["Get","the","font","index","field","for","the","FontIndex","record"],"prompt_tokens":[]}
{"code_tokens":["public","void","setFontIndex","(","short","field_1_fontIndex",")","{","this",".","field_1_fontIndex","=","field_1_fontIndex",";"],"docstring_tokens":["Set","the","font","index","field","for","the","FontIndex","record"],"prompt_tokens":[]}
{"code_tokens":["@Override\n","public","FillStyle","getFillStyle","(",")","{","return","XSLFSimpleShape",".","this::getFillPaint",";"],"docstring_tokens":["fetch","shape","fill","as","a","java.awt.Paint"],"prompt_tokens":[]}
{"code_tokens":["@Override\n","public","XSSFSheet","getSheet","(",")","{","return","this",".","_sheet",";"],"docstring_tokens":["Returns","the","XSSFSheet","this","row","belongs","to"],"prompt_tokens":[]}
{"code_tokens":["@Override\n","public","short","getFirstCellNum","(",")","{","return","(","short",")","(","_cells",".","isEmpty","(",")","?","-1",":","_cells",".","firstKey","(",")",")",";"],"docstring_tokens":["Get","the","0-based","number","of","the","first","cell","contained","in","this","row"],"prompt_tokens":[]}
{"code_tokens":["@Override\n","public","boolean","getZeroHeight","(",")","{","return","this",".","_row",".","getHidden","(",")",";"],"docstring_tokens":["Get","whether","or","not","to","display","this","row","with","0","height"],"prompt_tokens":[]}
{"code_tokens":["@Override\n","public","void","removeCell","(","Cell","cell",")","{","if","(","cell",".","getRow","(",")","!=","this",")","{","throw","new","IllegalArgumentException","(","\"Specified","cell","does","not","belong","to","this","row\"",")",";","}","//noinspection","SuspiciousMethodCalls\n","if","(","!_cells",".","containsValue","(","cell",")",")","{","throw","new","IllegalArgumentException","(","\"the","row","does","not","contain","this","cell\"",")",";","}","\n\n","XSSFCell","xcell","=","(","XSSFCell",")","cell",";","if","(","xcell",".","isPartOfArrayFormulaGroup","(",")",")","{","xcell",".","setCellFormula","(","null",")",";","//","to","remove","the","array","formula\n","}","if","(","cell",".","getCellType","(",")","==","CellType",".","FORMULA",")","{","_sheet",".","getWorkbook","(",")",".","onDeleteFormula","(","xcell",")",";","}","//","Performance","optimization","for","bug","57840:","explicit","boxing","is","slightly","faster","than","auto-unboxing,","though","may","use","more","memory\n","final","Integer","colI","=","Integer",".","valueOf","(","cell",".","getColumnIndex","(",")",")",";","//","NOSONAR\n","XSSFCell","removed","=","_cells",".","remove","(","colI",")",";","\n\n","//","also","remove","the","corresponding","CTCell","from","the","_row",".","cArray,\n","//","it","may","not","be","at","the","same","position","right","now\n","//","thus","search","for","it\n","int","i","=","0",";","for","(","CTCell","ctCell",":","_row",".","getCArray","(",")",")","{","if","(","ctCell","==","removed",".","getCTCell","(",")",")","{","_row",".","removeC","(","i",")",";","}","i++",";","}"],"docstring_tokens":["Remove","the","Cell","from","this","row"],"prompt_tokens":[]}
{"code_tokens":["@Internal\n","public","CTRow","getCTRow","(",")","{","return","_row",";"],"docstring_tokens":["Returns","the","underlying","CTRow","xml","bean","containing","all","cell","definitions","in","this","row"],"prompt_tokens":[]}
{"code_tokens":["protected","void","shift","(","int","n",")","{","final","int","rownum","=","getRowNum","(",")",";","final","int","newRownum","=","rownum","+","n",";","String","msg","=","\"Row[rownum=\"","+","rownum","+","\"]","contains","cell","(","s",")","included","in","a","multi-cell","array","formula",".","\"","+\n","\"You","cannot","change","part","of","an","array",".","\"",";","setRowNum","(","newRownum",")",";","for","(","Cell","c",":","this",")","{","(","(","XSSFCell",")","c",")",".","updateCellReferencesForShifting","(","msg",")",";","}","\n\n"],"docstring_tokens":["update","cell","references","when","shifting","rows"],"prompt_tokens":[]}
{"code_tokens":["private","static","int","countTokensToBeSkipped","(","Ptg[]","ptgs,","int","startIndex,","int","distInBytes",")","{","int","remBytes","=","distInBytes",";","int","index","=","startIndex",";","while","(","remBytes","!=","0",")","{","index++",";","if","(","index",">=","ptgs",".","length",")","{","throw","new","RuntimeException","(","\"Skip","distance","too","far","(","ran","out","of","formula","tokens",")",".","\"",")",";","}","remBytes","-=","ptgs[index]",".","getSize","(",")",";","if","(","remBytes","<","0",")","{","throw","new","RuntimeException","(","\"Bad","skip","distance","(","wrong","token","size","calculation",")",".","\"",")",";","}","}","return","index","-","startIndex",";"],"docstring_tokens":["Calculates","the","number","of","tokens","that","the","evaluator","should","skip","upon","reaching","a","tAttrSkip"],"prompt_tokens":[]}
{"code_tokens":["public","void","setRow","(","int","row",")","{","field_1_row","=","row",";"],"docstring_tokens":["set","the","row","this","cell","occurs","on"],"prompt_tokens":[]}
{"code_tokens":["public","void","setXFIndex","(","short","xf",")","{","field_3_xf","=","xf",";"],"docstring_tokens":["set","the","index","of","the","extended","format","record","to","style","this","cell","with"],"prompt_tokens":[]}
{"code_tokens":["public","short","getXFIndex","(",")","{","return","field_3_xf",";"],"docstring_tokens":["get","the","index","of","the","extended","format","record","to","style","this","cell","with"],"prompt_tokens":[]}
{"code_tokens":["\n\n","public","void","setColumn","(","short","col",")","{","field_2_col","=","col",";"],"docstring_tokens":["set","the","column","this","cell","defines","within","the","row"],"prompt_tokens":[]}
{"code_tokens":["public","short","getSid","(",")","{","return","sid",";"],"docstring_tokens":["return","the","non","static","version","of","the","id","for","this","record"],"prompt_tokens":[]}
{"code_tokens":["public","int[]","getKnownSlideIDs","(",")","{","int[]","ids","=","new","int[_slideLocations",".","size","(",")","]",";","int","i","=","0",";","for","(","Integer","slideId",":","_slideLocations",".","keySet","(",")",")","{","ids[i++]","=","slideId",";","}","return","ids",";"],"docstring_tokens":["Get","the","list","of","slides","that","this","PersistPtrHolder","knows","about"],"prompt_tokens":[]}
{"code_tokens":["public","void","clear","(",")","{","_slideLocations",".","clear","(",")",";"],"docstring_tokens":["remove","all","slide","references","Convenience","method","provided,","for","easier","reviewing","of","invocations"],"prompt_tokens":[]}
{"code_tokens":["public","static","Formula","read","(","int","encodedTokenLen,","LittleEndianInput","in,","int","totalEncodedLen",")","{","byte[]","byteEncoding","=","IOUtils",".","safelyAllocate","(","totalEncodedLen,","MAX_ENCODED_LEN",")",";","in",".","readFully","(","byteEncoding",")",";","return","new","Formula","(","byteEncoding,","encodedTokenLen",")",";"],"docstring_tokens":["When","there","are","no","array","constants","present,","encodedTokenLen==totalEncodedLen"],"prompt_tokens":[]}
{"code_tokens":["public","static","Formula","create","(","Ptg[]","ptgs",")","{","if","(","ptgs","==","null","||","ptgs",".","length","<","1",")","{","return","EMPTY",";","}","int","totalSize","=","Ptg",".","getEncodedSize","(","ptgs",")",";","byte[]","encodedData","=","new","byte[totalSize]",";","Ptg",".","serializePtgs","(","ptgs,","encodedData,","0",")",";","int","encodedTokenLen","=","Ptg",".","getEncodedSizeWithoutArrayData","(","ptgs",")",";","return","new","Formula","(","encodedData,","encodedTokenLen",")",";"],"docstring_tokens":["Creates","a","Formula","object","from","a","supplied","Ptg","array"],"prompt_tokens":[]}
{"code_tokens":["public","static","Ptg[]","getTokens","(","Formula","formula",")","{","if","(","formula","==","null",")","{","return","null",";","}","return","formula",".","getTokens","(",")",";"],"docstring_tokens":["Gets","the","Ptg","array","from","the","supplied","Formula"],"prompt_tokens":[]}
{"code_tokens":["public","int","getHorizontalScale","(",")","{","return","field_1_horizontalScale",";"],"docstring_tokens":["Get","the","horizontalScale","field","for","the","PlotGrowth","record"],"prompt_tokens":[]}
{"code_tokens":["public","void","setHorizontalScale","(","int","field_1_horizontalScale",")","{","this",".","field_1_horizontalScale","=","field_1_horizontalScale",";"],"docstring_tokens":["Set","the","horizontalScale","field","for","the","PlotGrowth","record"],"prompt_tokens":[]}
{"code_tokens":["public","int","getVerticalScale","(",")","{","return","field_2_verticalScale",";"],"docstring_tokens":["Get","the","verticalScale","field","for","the","PlotGrowth","record"],"prompt_tokens":[]}
{"code_tokens":["public","void","setVerticalScale","(","int","field_2_verticalScale",")","{","this",".","field_2_verticalScale","=","field_2_verticalScale",";"],"docstring_tokens":["Set","the","verticalScale","field","for","the","PlotGrowth","record"],"prompt_tokens":[]}
{"code_tokens":["public","short","getStyleIndex","(",")","{","return","_istd",";"],"docstring_tokens":["Returns","the","index","of","the","style","which","applies","to","this","Paragraph"],"prompt_tokens":[]}
{"code_tokens":["public","int","getTabStopsNumber","(",")","{","return","_props",".","getItbdMac","(",")",";"],"docstring_tokens":["Returns","number","of","tabs","stops","defined","for","paragraph"],"prompt_tokens":[]}
{"code_tokens":["public","ParagraphProperties","cloneProperties","(",")","{","return","_props",".","copy","(",")",";"],"docstring_tokens":["Clone","the","ParagraphProperties","object","associated","with","this","Paragraph,","so","that","you","can","apply","the","same","properties","to","another","Paragraph"],"prompt_tokens":[]}
{"code_tokens":["@Override\n","public","String","getSheetName","(",")","{","int","indexToExternSheet","=","_definedNameRec",".","getExternSheetNumber","(",")",";","\n\n","return","_book",".","getWorkbook","(",")",".","findSheetFirstNameFromExternSheet","(","indexToExternSheet",")",";"],"docstring_tokens":["Get","the","sheets","name","which","this","named","range","is","referenced","to"],"prompt_tokens":[]}
{"code_tokens":["@Override\n","public","boolean","isHidden","(",")","{","return","_definedNameRec",".","isHiddenName","(",")",";"],"docstring_tokens":["Checks","if","this","name","is","hidden,","eg","one","of","the","built-in","Excel","internal","names"],"prompt_tokens":[]}
{"code_tokens":["public","static","XSSFColor","toXSSFColor","(","Color","color",")","{","//","FIXME:","this","method","would","be","more","useful","if","it","could","convert","any","Color","to","an","XSSFColor\n","//","Currently","the","only","benefit","of","this","method","is","to","throw","an","IllegalArgumentException\n","//","instead","of","a","ClassCastException",".","if","(","color","!=","null","&&","!","(","color","instanceof","XSSFColor",")",")","{","throw","new","IllegalArgumentException","(","\"Only","XSSFColor","objects","are","supported,","but","had","\"","+","color",".","getClass","(",")",")",";","}","return","(","XSSFColor",")","color",";"],"docstring_tokens":["Checked","type","cast","color","to","an","XSSFColor"],"prompt_tokens":[]}
{"code_tokens":["public","XWPFTableCell","createCell","(",")","{","XWPFTableCell","tableCell","=","new","XWPFTableCell","(","ctRow",".","addNewTc","(",")",",","this,","table",".","getBody","(",")",")",";","ensureBlockLevelElement","(","tableCell",")",";","tableCells",".","add","(","tableCell",")",";","return","tableCell",";"],"docstring_tokens":["create","a","new","XWPFTableCell","and","add","it","to","the","tableCell-list","of","this","tableRow"],"prompt_tokens":[]}
{"code_tokens":["public","List<ICell>","getTableICells","(",")","{","\n\n","List<ICell>","cells","=","new","ArrayList<>","(",")",";","//Can't","use","ctRow",".","getTcList","because","that","only","gets","table","cells\n","//Can't","use","ctRow",".","getSdtList","because","that","only","gets","sdts","that","are","at","cell","level\n","XmlCursor","cursor","=","ctRow",".","newCursor","(",")",";","try","{","cursor",".","selectPath","(","\"",".","/*\"",")",";","while","(","cursor",".","toNextSelection","(",")",")","{","XmlObject","o","=","cursor",".","getObject","(",")",";","if","(","o","instanceof","CTTc",")","{","cells",".","add","(","new","XWPFTableCell","(","(","CTTc",")","o,","this,","table",".","getBody","(",")",")",")",";","}","else","if","(","o","instanceof","CTSdtCell",")","{","cells",".","add","(","new","XWPFSDTCell","(","(","CTSdtCell",")","o,","this,","table",".","getBody","(",")",")",")",";","}","}","}","finally","{","cursor",".","dispose","(",")",";","}","return","cells",";"],"docstring_tokens":["create","and","return","a","list","of","all","XWPFTableCell","who","belongs","to","this","row"],"prompt_tokens":[]}
{"code_tokens":["private","void","unhook","(",")","{","if","(","_evaluators",".","length","<","1",")","{","//","Never","dismantle","the","EMPTY","environment\n","return",";","}","for","(","WorkbookEvaluator","evaluator",":","_evaluators",")","{","evaluator",".","detachFromEnvironment","(",")",";","}","_unhooked","=","true",";"],"docstring_tokens":["Tell","all","contained","evaluators","that","this","environment","should","be","discarded"],"prompt_tokens":[]}
{"code_tokens":["@Override\n","public","int","getRecordSize","(",")","{","return","8","+","8",";"],"docstring_tokens":["Returns","the","number","of","bytes","that","are","required","to","serialize","this","record"],"prompt_tokens":[]}
{"code_tokens":["public","int","getLastMSOSPID","(",")","{","return","field_2_lastMSOSPID",";"],"docstring_tokens":["The","last","shape","id","used","in","this","drawing","group"],"prompt_tokens":[]}
{"code_tokens":["public","short","getDrawingGroupId","(",")","{","return","(","short",")","(","getOptions","(",")",">>","4",")",";"],"docstring_tokens":["Gets","the","drawing","group","id","for","this","record"],"prompt_tokens":[]}
{"code_tokens":["public","String","getText","(",")","{","StringBuilder","out","=","new","StringBuilder","(","64",")",";","for","(","IRunElement","run",":","iruns",")","{","if","(","run","instanceof","XWPFRun",")","{","XWPFRun","xRun","=","(","XWPFRun",")","run",";","//","don't","include","the","text","if","reviewing","is","enabled","and","this","is","a","deleted","run\n","if","(","xRun",".","getCTR","(",")",".","getDelTextArray","(",")",".","length","==","0",")","{","out",".","append","(","xRun",")",";","}","}","else","if","(","run","instanceof","XWPFSDT",")","{","out",".","append","(","(","(","XWPFSDT",")","run",")",".","getContent","(",")",".","getText","(",")",")",";","}","else","{","out",".","append","(","run",")",";","}","}","out",".","append","(","footnoteText",")",";","return","out",".","toString","(",")",";"],"docstring_tokens":["Return","the","textual","content","of","the","paragraph,","including","text","from","pictures","and","sdt","elements","in","it"],"prompt_tokens":[]}
{"code_tokens":["public","BigInteger","getNumStartOverride","(",")","{","BigInteger","numID","=","getNumID","(",")",";","XWPFNumbering","numbering","=","document",".","getNumbering","(",")",";","if","(","numID","!=","null","&&","numbering","!=","null",")","{","XWPFNum","num","=","numbering",".","getNum","(","numID",")",";","\n\n","if","(","num","!=","null",")","{","CTNum","ctNum","=","num",".","getCTNum","(",")",";","if","(","ctNum","==","null",")","{","return","null",";","}","BigInteger","ilvl","=","getNumIlvl","(",")",";","CTNumLvl","level","=","null",";","for","(","int","i","=","0",";","i","<","ctNum",".","sizeOfLvlOverrideArray","(",")",";","i++",")","{","CTNumLvl","ctNumLvl","=","ctNum",".","getLvlOverrideArray","(","i",")",";","if","(","ctNumLvl","!=","null","&&","ctNumLvl",".","getIlvl","(",")","!=","null","&&\n","ctNumLvl",".","getIlvl","(",")",".","equals","(","ilvl",")",")","{","level","=","ctNumLvl",";","break",";","}","}","if","(","level","!=","null","&&","level",".","getStartOverride","(",")","!=","null",")","{","return","level",".","getStartOverride","(",")",".","getVal","(",")",";","}","}","}","return","null",";"],"docstring_tokens":["Gets","the","numstartOverride","for","the","paragraph","numbering","for","this","paragraph"],"prompt_tokens":[]}
{"code_tokens":["public","Borders","getBorderTop","(",")","{","CTPBdr","border","=","getCTPBrd","(","false",")",";","CTBorder","ct","=","null",";","if","(","border","!=","null",")","{","ct","=","border",".","getTop","(",")",";","}","STBorder",".","Enum","ptrn","=","(","ct","!=","null",")","?","ct",".","getVal","(",")",":","STBorder",".","NONE",";","return","Borders",".","valueOf","(","ptrn",".","intValue","(",")",")",";"],"docstring_tokens":["Specifies","the","border","which","shall","be","displayed","above","a","set","of","paragraphs","which","have","the","same","set","of","paragraph","border","settings"],"prompt_tokens":[]}
{"code_tokens":["public","void","setStyle","(","String","styleId",")","{","CTPPr","pr","=","getCTPPr","(",")",";","CTString","style","=","pr",".","getPStyle","(",")","!=","null","?","pr",".","getPStyle","(",")",":","pr",".","addNewPStyle","(",")",";","style",".","setVal","(","styleId",")",";"],"docstring_tokens":["Set","the","style","ID","for","the","paragraph"],"prompt_tokens":[]}
{"code_tokens":["public","XWPFRun","createRun","(",")","{","XWPFRun","xwpfRun","=","new","XWPFRun","(","paragraph",".","addNewR","(",")",",","(","IRunBody",")","this",")",";","runs",".","add","(","xwpfRun",")",";","iruns",".","add","(","xwpfRun",")",";","return","xwpfRun",";"],"docstring_tokens":["Appends","a","new","run","to","this","paragraph"],"prompt_tokens":[]}
{"code_tokens":["public","XWPFHyperlinkRun","createHyperlinkRun","(","String","uri",")","{","//","Create","a","relationship","ID","for","this","link",".","String","rId","=","getPart","(",")",".","getPackagePart","(",")",".","addExternalRelationship","(","uri,","XWPFRelation",".","HYPERLINK",".","getRelation","(",")",")",".","getId","(",")",";","\n\n","//","Create","the","run",".","CTHyperlink","ctHyperLink","=","getCTP","(",")",".","addNewHyperlink","(",")",";","ctHyperLink",".","setId","(","rId",")",";","ctHyperLink",".","addNewR","(",")",";","\n\n","//","Append","this","run","to","the","paragraph",".","XWPFHyperlinkRun","link","=","new","XWPFHyperlinkRun","(","ctHyperLink,","ctHyperLink",".","getRArray","(","0",")",",","this",")",";","runs",".","add","(","link",")",";","iruns",".","add","(","link",")",";","return","link",";"],"docstring_tokens":["Appends","a","new","hyperlink","run","to","this","paragraph"],"prompt_tokens":[]}
{"code_tokens":["public","XWPFFieldRun","createFieldRun","(",")","{","CTSimpleField","ctSimpleField","=","paragraph",".","addNewFldSimple","(",")",";","XWPFFieldRun","newRun","=","new","XWPFFieldRun","(","ctSimpleField,","ctSimpleField",".","addNewR","(",")",",","this",")",";","runs",".","add","(","newRun",")",";","iruns",".","add","(","newRun",")",";","return","newRun",";"],"docstring_tokens":["Appends","a","new","field","run","to","this","paragraph"],"prompt_tokens":[]}
{"code_tokens":["public","XWPFRun","getRun","(","CTR","r",")","{","for","(","int","i","=","0",";","i","<","getRuns","(",")",".","size","(",")",";","i++",")","{","if","(","getRuns","(",")",".","get","(","i",")",".","getCTR","(",")","==","r",")","{","return","getRuns","(",")",".","get","(","i",")",";","}","}","return","null",";"],"docstring_tokens":["return","the","XWPFRun-Element","which","owns","the","CTR","run-Element"],"prompt_tokens":[]}
{"code_tokens":["public","void","addFootnoteReference","(","XWPFAbstractFootnoteEndnote","footnote",")","{","XWPFRun","run","=","createRun","(",")",";","CTR","ctRun","=","run",".","getCTR","(",")",";","ctRun",".","addNewRPr","(",")",".","addNewRStyle","(",")",".","setVal","(","\"FootnoteReference\"",")",";","if","(","footnote","instanceof","XWPFEndnote",")","{","ctRun",".","addNewEndnoteReference","(",")",".","setId","(","footnote",".","getId","(",")",")",";","}","else","{","ctRun",".","addNewFootnoteReference","(",")",".","setId","(","footnote",".","getId","(",")",")",";","}"],"docstring_tokens":["Add","a","new","run","with","a","reference","to","the","specified","footnote"],"prompt_tokens":[]}
{"code_tokens":["public","short","getUnits","(",")","{","return","field_1_units",";"],"docstring_tokens":["Get","the","units","field","for","the","Units","record"],"prompt_tokens":[]}
{"code_tokens":["public","void","setUnits","(","short","field_1_units",")","{","this",".","field_1_units","=","field_1_units",";"],"docstring_tokens":["Set","the","units","field","for","the","Units","record"],"prompt_tokens":[]}
{"code_tokens":["@Internal\n","public","static","void","copyNodeRecursively","(","Entry","entry,","DirectoryEntry","target",")","throws","IOException","{","if","(","entry",".","isDirectoryEntry","(",")",")","{","DirectoryEntry","dirEntry","=","(","DirectoryEntry",")","entry",";","DirectoryEntry","newTarget","=","target",".","createDirectory","(","entry",".","getName","(",")",")",";","newTarget",".","setStorageClsid","(","dirEntry",".","getStorageClsid","(",")",")",";","Iterator<Entry>","entries","=","dirEntry",".","getEntries","(",")",";","\n\n","while","(","entries",".","hasNext","(",")",")","{","copyNodeRecursively","(","entries",".","next","(",")",",","newTarget",")",";","}","}","else","{","DocumentEntry","dentry","=","(","DocumentEntry",")","entry",";","DocumentInputStream","dstream","=","new","DocumentInputStream","(","dentry",")",";","target",".","createDocument","(","dentry",".","getName","(",")",",","dstream",")",";","dstream",".","close","(",")",";","}"],"docstring_tokens":["Copies","an","Entry","into","a","target","POIFS","directory,","recursively"],"prompt_tokens":[]}
{"code_tokens":["@SuppressWarnings","(","\"WeakerAccess\"",")","public","XSLFSlideMaster","getSlideMaster","(",")","{","if","(","_master","==","null",")","{","for","(","POIXMLDocumentPart","p",":","getRelations","(",")",")","{","if","(","p","instanceof","XSLFSlideMaster",")","{","_master","=","(","XSLFSlideMaster",")","p",";","}","}","}","if","(","_master","==","null",")","{","throw","new","IllegalStateException","(","\"SlideMaster","was","not","found","for","\"","+","this",")",";","}","return","_master",";"],"docstring_tokens":["Slide","master","object","associated","with","this","layout"],"prompt_tokens":[]}
{"code_tokens":["@SuppressWarnings","(","\"WeakerAccess\"",")","public","void","copyLayout","(","XSLFSlide","slide",")","{","for","(","XSLFShape","sh",":","getShapes","(",")",")","{","if","(","sh","instanceof","XSLFTextShape",")","{","XSLFTextShape","tsh","=","(","XSLFTextShape",")","sh",";","Placeholder","ph","=","tsh",".","getTextType","(",")",";","if","(","ph","==","null",")","continue",";","\n\n","switch","(","ph",")","{","//","these","are","special","and","not","copied","by","default\n","case","DATETIME:\n","case","SLIDE_NUMBER:\n","case","FOOTER:\n","break",";","default:\n","slide",".","getSpTree","(",")",".","addNewSp","(",")",".","set","(","tsh",".","getXmlObject","(",")",".","copy","(",")",")",";","}","}","}"],"docstring_tokens":["Copy","placeholders","from","this","layout","to","the","destination","slide"],"prompt_tokens":[]}
{"code_tokens":["public","SummaryInformation","getSummaryInformation","(",")","{","if","(","!initialized",")","{","readProperties","(",")",";","}","return","sInf",";"],"docstring_tokens":["Fetch","the","Summary","Information","of","the","document"],"prompt_tokens":[]}
{"code_tokens":["public","void","draw","(","Graphics2D","graphics",")","{","visitShapes","(","new","ShapeRenderer","(","graphics",")",")",";"],"docstring_tokens":["Draws","the","contents","of","a","page","onto","a","Graphics2D","object"],"prompt_tokens":[]}
{"code_tokens":["@Test\n","void","setRepeatingRowsAndColumns","(",")","throws","IOException","{","try","(","Workbook","wb","=","_testDataProvider",".","createWorkbook","(",")",")","{","CellRangeAddress","cra","=","new","CellRangeAddress","(","0,","3,","0,","0",")",";","String","expRows","=","\"1:4\",","expCols","=","\"A:A\"",";","\n\n\n","Sheet","sheet1","=","wb",".","createSheet","(",")",";","sheet1",".","setRepeatingRows","(","cra",")",";","sheet1",".","setRepeatingColumns","(","cra",")",";","assertEquals","(","expRows,","sheet1",".","getRepeatingRows","(",")",".","formatAsString","(",")",")",";","assertEquals","(","expCols,","sheet1",".","getRepeatingColumns","(",")",".","formatAsString","(",")",")",";","\n\n","//must","handle","sheets","with","quotas,","see","Bugzilla","#47294\n","Sheet","sheet2","=","wb",".","createSheet","(","\"My'","Sheet\"",")",";","sheet2",".","setRepeatingRows","(","cra",")",";","sheet2",".","setRepeatingColumns","(","cra",")",";","assertEquals","(","expRows,","sheet2",".","getRepeatingRows","(",")",".","formatAsString","(",")",")",";","assertEquals","(","expCols,","sheet2",".","getRepeatingColumns","(",")",".","formatAsString","(",")",")",";","}"],"docstring_tokens":["Test","to","validate","that","replacement","for","removed","setRepeatingRowsAndColumns","methods","is","still","working","correctly"],"prompt_tokens":[]}
{"code_tokens":["@Test\n","protected","void","unicodeInAll","(",")","throws","IOException","{","try","(","Workbook","wb1","=","_testDataProvider",".","createWorkbook","(",")",")","{","CreationHelper","factory","=","wb1",".","getCreationHelper","(",")",";","//Create","a","unicode","dataformat","(","contains","euro","symbol",")","DataFormat","df","=","wb1",".","createDataFormat","(",")",";","final","String","formatStr","=","\"_","(","[$\\u20ac-2]\\\\\\\\\\\\","*","#,##0",".","00_",")",";","_","(","[$\\u20ac-2]\\\\\\\\\\\\","*","\\\\\\\\\\\\","(","#,##0",".","00\\\\\\\\\\\\",")",";","_","(","[$\\u20ac-2]\\\\\\\\\\\\","*\\\\\\\"\\\\-\\\\\\\\\\\"??_",")",";","_","(","@_",")","\"",";","short","fmt","=","df",".","getFormat","(","formatStr",")",";","\n\n","//Create","a","unicode","sheet","name","(","euro","symbol",")","Sheet","s","=","wb1",".","createSheet","(","\"\\u20ac\"",")",";","\n\n","//Set","a","unicode","header","(","you","guessed","it","the","euro","symbol",")","Header","h","=","s",".","getHeader","(",")",";","h",".","setCenter","(","\"\\u20ac\"",")",";","h",".","setLeft","(","\"\\u20ac\"",")",";","h",".","setRight","(","\"\\u20ac\"",")",";","\n\n","//Set","a","unicode","footer\n","Footer","f","=","s",".","getFooter","(",")",";","f",".","setCenter","(","\"\\u20ac\"",")",";","f",".","setLeft","(","\"\\u20ac\"",")",";","f",".","setRight","(","\"\\u20ac\"",")",";","\n\n","Row","r","=","s",".","createRow","(","0",")",";","Cell","c","=","r",".","createCell","(","1",")",";","c",".","setCellValue","(","12",".","34",")",";","c",".","getCellStyle","(",")",".","setDataFormat","(","fmt",")",";","\n\n","/*Cell","c2","=*/\n","r",".","createCell","(","2",")",";","//","TODO","-","c2","unused","but","changing","next","line","(","'c'->'c2'",")","causes","test","to","fail\n","c",".","setCellValue","(","factory",".","createRichTextString","(","\"\\u20ac\"",")",")",";","\n\n","Cell","c3","=","r",".","createCell","(","3",")",";","String","formulaString","=","\"TEXT","(","12",".","34,\\\"\\u20ac###,##\\\"",")","\"",";","c3",".","setCellFormula","(","formulaString",")",";","\n\n","try","(","Workbook","wb2","=","_testDataProvider",".","writeOutAndReadBack","(","wb1",")",")","{","//Test","the","sheetname\n","s","=","wb2",".","getSheet","(","\"\\u20ac\"",")",";","assertNotNull","(","s",")",";","\n\n","//Test","the","header\n","h","=","s",".","getHeader","(",")",";","assertEquals","(","\"\\u20ac\",","h",".","getCenter","(",")",")",";","assertEquals","(","\"\\u20ac\",","h",".","getLeft","(",")",")",";","assertEquals","(","\"\\u20ac\",","h",".","getRight","(",")",")",";","\n\n","//Test","the","footer\n","f","=","s",".","getFooter","(",")",";","assertEquals","(","\"\\u20ac\",","f",".","getCenter","(",")",")",";","assertEquals","(","\"\\u20ac\",","f",".","getLeft","(",")",")",";","assertEquals","(","\"\\u20ac\",","f",".","getRight","(",")",")",";","\n\n","//Test","the","dataformat\n","r","=","s",".","getRow","(","0",")",";","c","=","r",".","getCell","(","1",")",";","df","=","wb2",".","createDataFormat","(",")",";","assertEquals","(","formatStr,","df",".","getFormat","(","c",".","getCellStyle","(",")",".","getDataFormat","(",")",")",")",";","\n\n","//Test","the","cell","string","value\n","/*c2","=*/\n","r",".","getCell","(","2",")",";","assertEquals","(","\"\\u20ac\",","c",".","getRichStringCellValue","(",")",".","getString","(",")",")",";","\n\n","//Test","the","cell","formula\n","c3","=","r",".","getCell","(","3",")",";","assertEquals","(","c3",".","getCellFormula","(",")",",","formulaString",")",";","}","}"],"docstring_tokens":["Tests","that","all","the","unicode","capable","string","fields","can","be","set,","written","and","then","read","back"],"prompt_tokens":[]}
{"code_tokens":["public","String","getText","(",")","{","try","{","XSSFBSharedStringsTable","strings","=","new","XSSFBSharedStringsTable","(","getPackage","(",")",")",";","XSSFBReader","xssfbReader","=","new","XSSFBReader","(","getPackage","(",")",")",";","XSSFBStylesTable","styles","=","xssfbReader",".","getXSSFBStylesTable","(",")",";","XSSFBReader",".","SheetIterator","iter","=","(","XSSFBReader",".","SheetIterator",")","xssfbReader",".","getSheetsData","(",")",";","\n\n","StringBuilder","text","=","new","StringBuilder","(","64",")",";","SheetTextExtractor","sheetExtractor","=","new","SheetTextExtractor","(",")",";","XSSFBHyperlinksTable","hyperlinksTable","=","null",";","while","(","iter",".","hasNext","(",")",")","{","try","(","InputStream","stream","=","iter",".","next","(",")",")","{","if","(","getIncludeSheetNames","(",")",")","{","text",".","append","(","iter",".","getSheetName","(",")",")",";","text",".","append","(","'\\n'",")",";","}","if","(","handleHyperlinksInCells",")","{","hyperlinksTable","=","new","XSSFBHyperlinksTable","(","iter",".","getSheetPart","(",")",")",";","}","XSSFBCommentsTable","comments","=","getIncludeCellComments","(",")","?","iter",".","getXSSFBSheetComments","(",")",":","null",";","processSheet","(","sheetExtractor,","styles,","comments,","strings,","stream",")",";","if","(","getIncludeHeadersFooters","(",")",")","{","sheetExtractor",".","appendHeaderText","(","text",")",";","}","sheetExtractor",".","appendCellText","(","text",")",";","if","(","getIncludeTextBoxes","(",")",")","{","processShapes","(","iter",".","getShapes","(",")",",","text",")",";","}","if","(","getIncludeHeadersFooters","(",")",")","{","sheetExtractor",".","appendFooterText","(","text",")",";","}","sheetExtractor",".","reset","(",")",";","}","}","\n\n","return","text",".","toString","(",")",";","}","catch","(","IOException","|","OpenXML4JException","|","SAXException","e",")","{","LOGGER",".","atWarn","(",")",".","withThrowable","(","e",")",".","log","(","\"Failed","to","load","text\"",")",";","return","\"\"",";","}"],"docstring_tokens":["Processes","the","file","and","returns","the","text"],"prompt_tokens":[]}
{"code_tokens":["public","void","setItcFirst","(","byte","value",")","{","field_2_bkf_flags","=","(","short",")","itcFirst",".","setValue","(","field_2_bkf_flags,","value",")",";"],"docstring_tokens":["Sets","the","itcFirst","field","value"],"prompt_tokens":[]}
{"code_tokens":["protected","void","generateData","(",")","{","int","size","=","0",";","for","(","int","i=0",";","i<records",".","length",";","i++",")","{","size","+=","records[i]",".","getRecordSize","(",")",";","}","\n\n","byte[]","data","=","IOUtils",".","safelyAllocate","(","size,","MAX_RECORD_LENGTH",")",";","size","=","0",";","for","(","int","i=0",";","i<records",".","length",";","i++",")","{","int","thisSize","=\n","records[i]",".","serialize","(","size,","data",")",";","size","+=","thisSize",";","}","setData","(","data",")",";"],"docstring_tokens":["Serialises","our","Escher","children","back","into","bytes"],"prompt_tokens":[]}
{"code_tokens":["\n\n","public","void","setProtect","(","boolean","protect",")","{","if","(","protect",")","{","field_1_protect","=","1",";","}","else\n","{","field_1_protect","=","0",";","}"],"docstring_tokens":["set","whether","the","sheet","is","protected","or","not"],"prompt_tokens":[]}
{"code_tokens":["protected","void","breakText","(","Graphics2D","graphics",")","{","lines",".","clear","(",")",";","\n\n","DrawFactory","fact","=","DrawFactory",".","getInstance","(","graphics",")",";","StringBuilder","text","=","new","StringBuilder","(",")",";","\n\n","List<AttributedStringData>","attList","=","getAttributedString","(","graphics,","text",")",";","AttributedString","as","=","new","AttributedString","(","text",".","toString","(",")",")",";","AttributedString","asNoCR","=","new","AttributedString","(","text",".","toString","(",")",".","replaceAll","(","\"[\\\\r\\\\n]\",","\"","\"",")",")",";","\n\n","for","(","AttributedStringData","asd",":","attList",")","{","as",".","addAttribute","(","asd",".","attribute,","asd",".","value,","asd",".","beginIndex,","asd",".","endIndex",")",";","asNoCR",".","addAttribute","(","asd",".","attribute,","asd",".","value,","asd",".","beginIndex,","asd",".","endIndex",")",";","}","\n\n","AttributedCharacterIterator","it","=","as",".","getIterator","(",")",";","AttributedCharacterIterator","itNoCR","=","asNoCR",".","getIterator","(",")",";","LineBreakMeasurer","measurer","=","new","LineBreakMeasurer","(","it,","graphics",".","getFontRenderContext","(",")",")",";","for","(",";",";",")","{","int","startIndex","=","measurer",".","getPosition","(",")",";","\n\n","//","add","a","pixel","to","compensate","rounding","errors\n","double","wrappingWidth","=","getWrappingWidth","(","lines",".","isEmpty","(",")",",","graphics",")","+","1",";","//","shape","width","can","be","smaller","that","the","sum","of","insets","(","this","was","proved","by","a","test","file",")","if","(","wrappingWidth","<","0",")","{","wrappingWidth","=","1",";","}","\n\n","//","usually","\"\\n\"","is","added","after","a","line,","if","it","occurs","before","it","-","only","possible","as","first","char","-\n","//","we","need","to","add","an","empty","line\n","TextLayout","layout",";","int","endIndex",";","if","(","startIndex","==","0","&&","text",".","toString","(",")",".","startsWith","(","\"\\n\"",")",")","{","layout","=","measurer",".","nextLayout","(","(","float",")","wrappingWidth,","1,","false",")",";","endIndex","=","1",";","}","else","{","int","nextBreak","=","text",".","indexOf","(","\"\\n\",","startIndex","+","1",")",";","if","(","nextBreak","==","-1",")","{","nextBreak","=","it",".","getEndIndex","(",")",";","}","\n\n","layout","=","measurer",".","nextLayout","(","(","float",")","wrappingWidth,","nextBreak,","true",")",";","if","(","layout","==","null",")","{","//","layout","can","be","null","if","the","entire","word","at","the","current","position\n","//","does","not","fit","within","the","wrapping","width",".","Try","with","requireNextWord=false",".","layout","=","measurer",".","nextLayout","(","(","float",")","wrappingWidth,","nextBreak,","false",")",";","}","\n\n","if","(","layout","==","null",")","{","//","exit","if","can't","break","any","more\n","break",";","}","\n\n","endIndex","=","measurer",".","getPosition","(",")",";","//","skip","over","new","line","breaks","(","we","paint","'clear'","text","runs","not","starting","or","ending","with","\\n",")","if","(","endIndex","<","it",".","getEndIndex","(",")","&&","text",".","charAt","(","endIndex",")","==","'\\n'",")","{","measurer",".","setPosition","(","endIndex","+","1",")",";","}","\n\n","TextAlign","hAlign","=","paragraph",".","getTextAlign","(",")",";","if","(","hAlign","==","TextAlign",".","JUSTIFY","||","hAlign","==","TextAlign",".","JUSTIFY_LOW",")","{","layout","=","layout",".","getJustifiedLayout","(","(","float",")","wrappingWidth",")",";","}","}","\n\n","AttributedString","str","=","new","AttributedString","(","itNoCR,","startIndex,","endIndex",")",";","DrawTextFragment","line","=","fact",".","getTextFragment","(","layout,","str",")",";","lines",".","add","(","line",")",";","\n\n","if","(","endIndex","==","it",".","getEndIndex","(",")",")","{","break",";","}","}","\n\n","rawText","=","text",".","toString","(",")",";"],"docstring_tokens":["break","text","into","lines,","each","representing","a","line","of","text","that","fits","in","the","wrapping","width"],"prompt_tokens":[]}
{"code_tokens":["protected","double","getWrappingWidth","(","boolean","firstLine,","Graphics2D","graphics",")","{","final","long","TAB_SIZE","=","347663L",";","TextShape<?,?>","ts","=","paragraph",".","getParentShape","(",")",";","\n\n","//","internal","margins","for","the","text","box\n","Insets2D","insets","=","ts",".","getInsets","(",")",";","double","leftInset","=","insets",".","left",";","double","rightInset","=","insets",".","right",";","\n\n","int","indentLevel","=","paragraph",".","getIndentLevel","(",")",";","if","(","indentLevel","==","-1",")","{","//","default","to","0,","if","indentLevel","is","not","set\n","indentLevel","=","0",";","}","Double","leftMargin","=","paragraph",".","getLeftMargin","(",")",";","if","(","leftMargin","==","null",")","{","//","if","the","marL","attribute","is","omitted,","then","a","value","of","347663","is","implied\n","leftMargin","=","Units",".","toPoints","(","TAB_SIZE","*","indentLevel",")",";","}","Double","indent","=","paragraph",".","getIndent","(",")",";","if","(","indent","==","null",")","{","indent","=","0",".",";","}","Double","rightMargin","=","paragraph",".","getRightMargin","(",")",";","if","(","rightMargin","==","null",")","{","rightMargin","=","0d",";","}","\n\n","Rectangle2D","anchor","=","DrawShape",".","getAnchor","(","graphics,","ts",")",";","TextDirection","textDir","=","ts",".","getTextDirection","(",")",";","double","width",";","if","(","!ts",".","getWordWrap","(",")",")","{","Dimension","pageDim","=","ts",".","getSheet","(",")",".","getSlideShow","(",")",".","getPageSize","(",")",";","//","if","wordWrap","==","false","then","we","return","the","advance","to","the","(","right",")","border","of","the","sheet\n","switch","(","textDir",")","{","default:\n","width","=","pageDim",".","getWidth","(",")","-","anchor",".","getX","(",")",";","break",";","case","VERTICAL:\n","width","=","pageDim",".","getHeight","(",")","-","anchor",".","getX","(",")",";","break",";","case","VERTICAL_270:\n","width","=","anchor",".","getX","(",")",";","break",";","}","}","else","{","switch","(","textDir",")","{","default:\n","width","=","anchor",".","getWidth","(",")","-","leftInset","-","rightInset","-","leftMargin","-","rightMargin",";","break",";","case","VERTICAL:\n","case","VERTICAL_270:\n","width","=","anchor",".","getHeight","(",")","-","leftInset","-","rightInset","-","leftMargin","-","rightMargin",";","break",";","}","if","(","firstLine","&&","bullet","==","null",")","{","//","indent","is","usually","negative","in","XSLF\n","width","+=","isHSLF","(",")","?","(","leftMargin","-","indent",")",":","-indent",";","}","}","\n\n","return","width",";"],"docstring_tokens":["Returns","wrapping","width","to","break","lines","in","this","paragraph"],"prompt_tokens":[]}
{"code_tokens":["public","void","serialize","(","LittleEndianOutput","out",")","{","out",".","write","(","_rawData",")",";"],"docstring_tokens":["spit","the","record","out","AS","IS"],"prompt_tokens":[]}
{"code_tokens":["public","short","getCategoryDataType","(",")","{","return","field_1_categoryDataType",";"],"docstring_tokens":["Get","the","category","data","type","field","for","the","Series","record"],"prompt_tokens":[]}
{"code_tokens":["public","void","setCategoryDataType","(","short","field_1_categoryDataType",")","{","this",".","field_1_categoryDataType","=","field_1_categoryDataType",";"],"docstring_tokens":["Set","the","category","data","type","field","for","the","Series","record"],"prompt_tokens":[]}
{"code_tokens":["public","short","getValuesDataType","(",")","{","return","field_2_valuesDataType",";"],"docstring_tokens":["Get","the","values","data","type","field","for","the","Series","record"],"prompt_tokens":[]}
{"code_tokens":["public","void","setValuesDataType","(","short","field_2_valuesDataType",")","{","this",".","field_2_valuesDataType","=","field_2_valuesDataType",";"],"docstring_tokens":["Set","the","values","data","type","field","for","the","Series","record"],"prompt_tokens":[]}
{"code_tokens":["public","short","getNumCategories","(",")","{","return","field_3_numCategories",";"],"docstring_tokens":["Get","the","num","categories","field","for","the","Series","record"],"prompt_tokens":[]}
{"code_tokens":["public","void","setNumCategories","(","short","field_3_numCategories",")","{","this",".","field_3_numCategories","=","field_3_numCategories",";"],"docstring_tokens":["Set","the","num","categories","field","for","the","Series","record"],"prompt_tokens":[]}
{"code_tokens":["public","short","getNumValues","(",")","{","return","field_4_numValues",";"],"docstring_tokens":["Get","the","num","values","field","for","the","Series","record"],"prompt_tokens":[]}
{"code_tokens":["public","void","setNumValues","(","short","field_4_numValues",")","{","this",".","field_4_numValues","=","field_4_numValues",";"],"docstring_tokens":["Set","the","num","values","field","for","the","Series","record"],"prompt_tokens":[]}
{"code_tokens":["public","short","getBubbleSeriesType","(",")","{","return","field_5_bubbleSeriesType",";"],"docstring_tokens":["Get","the","bubble","series","type","field","for","the","Series","record"],"prompt_tokens":[]}
{"code_tokens":["public","void","setBubbleSeriesType","(","short","field_5_bubbleSeriesType",")","{","this",".","field_5_bubbleSeriesType","=","field_5_bubbleSeriesType",";"],"docstring_tokens":["Set","the","bubble","series","type","field","for","the","Series","record"],"prompt_tokens":[]}
{"code_tokens":["public","short","getNumBubbleValues","(",")","{","return","field_6_numBubbleValues",";"],"docstring_tokens":["Get","the","num","bubble","values","field","for","the","Series","record"],"prompt_tokens":[]}
{"code_tokens":["public","void","setNumBubbleValues","(","short","field_6_numBubbleValues",")","{","this",".","field_6_numBubbleValues","=","field_6_numBubbleValues",";"],"docstring_tokens":["Set","the","num","bubble","values","field","for","the","Series","record"],"prompt_tokens":[]}
{"code_tokens":["@Internal\n","@Override\n","protected","void","setSlideShow","(","HSLFSlideShow","ss",")","{","super",".","setSlideShow","(","ss",")",";","\n\n","//after","the","slide","show","is","assigned","collect","all","available","style","records\n","assert","(","_txmaster","==","null",")",";","_txmaster","=","new","TxMasterStyleAtom[9]",";","\n\n","if","(","getSlideShow","(",")","==","null","||","getSlideShow","(",")",".","getDocumentRecord","(",")","==","null","||\n","getSlideShow","(",")",".","getDocumentRecord","(",")",".","getEnvironment","(",")","==","null",")","{","throw","new","IllegalStateException","(","\"Did","not","find","a","TxMasterStyleAtom","in","the","current","slide","show\"",")",";","}","\n\n","TxMasterStyleAtom","txdoc","=","getSlideShow","(",")",".","getDocumentRecord","(",")",".","getEnvironment","(",")",".","getTxMasterStyleAtom","(",")",";","if","(","txdoc","==","null",")","{","throw","new","IllegalStateException","(","\"Did","not","find","a","TxMasterStyleAtom","in","the","current","slide","show\"",")",";","}","\n\n","_txmaster[txdoc",".","getTextType","(",")","]","=","txdoc",";","\n\n","TxMasterStyleAtom[]","txrec","=","(","(","MainMaster",")","getSheetContainer","(",")",")",".","getTxMasterStyleAtoms","(",")",";","for","(","TxMasterStyleAtom","txMasterStyleAtom",":","txrec",")","{","int","txType","=","txMasterStyleAtom",".","getTextType","(",")",";","if","(","txType","<","_txmaster",".","length","&&","_txmaster[txType]","==","null",")","{","_txmaster[txType]","=","txMasterStyleAtom",";","}","}","\n\n","for","(","List<HSLFTextParagraph>","paras",":","getTextParagraphs","(",")",")","{","for","(","HSLFTextParagraph","htp",":","paras",")","{","int","txType","=","htp",".","getRunType","(",")",";","if","(","txType",">=","_txmaster",".","length","||","_txmaster[txType]","==","null",")","{","throw","new","HSLFException","(","\"Master","styles","not","initialized\"",")",";","}","\n\n","int","level","=","htp",".","getIndentLevel","(",")",";","\n\n","List<TextPropCollection>","charStyles","=","_txmaster[txType]",".","getCharacterStyles","(",")",";","List<TextPropCollection>","paragraphStyles","=","_txmaster[txType]",".","getParagraphStyles","(",")",";","if","(","charStyles","==","null","||","paragraphStyles","==","null","||\n","charStyles",".","size","(",")","<=","level","||","paragraphStyles",".","size","(",")","<=","level",")","{","throw","new","HSLFException","(","\"Master","styles","not","initialized\"",")",";","}","}","}"],"docstring_tokens":["Assign","SlideShow","for","this","slide","master"],"prompt_tokens":[]}
{"code_tokens":["private","int","store","(","InputStream","stream",")","throws","IOException","{","final","int","bigBlockSize","=","POIFSConstants",".","BIG_BLOCK_MINIMUM_DOCUMENT_SIZE",";","BufferedInputStream","bis","=","new","BufferedInputStream","(","stream,","bigBlockSize","+","1",")",";","bis",".","mark","(","bigBlockSize",")",";","\n\n","//","Do","we","need","to","store","as","a","mini","stream","or","a","full","one?\n","long","streamBlockSize","=","IOUtils",".","skipFully","(","bis,","bigBlockSize",")",";","if","(","streamBlockSize","<","bigBlockSize",")","{","_stream","=","new","POIFSStream","(","_filesystem",".","getMiniStore","(",")",")",";","_block_size","=","_filesystem",".","getMiniStore","(",")",".","getBlockStoreBlockSize","(",")",";","}","else","{","_stream","=","new","POIFSStream","(","_filesystem",")",";","_block_size","=","_filesystem",".","getBlockStoreBlockSize","(",")",";","}","\n\n","//","start","from","the","beginning\n","bis",".","reset","(",")",";","\n\n","//","Store","it\n","final","long","length",";","try","(","OutputStream","os","=","_stream",".","getOutputStream","(",")",")","{","length","=","IOUtils",".","copy","(","bis,","os",")",";","\n\n","//","Pad","to","the","end","of","the","block","with","-1s\n","int","usedInBlock","=","(","int",")","(","length","%","_block_size",")",";","if","(","usedInBlock","!=","0","&&","usedInBlock","!=","_block_size",")","{","int","toBlockEnd","=","_block_size","-","usedInBlock",";","byte[]","padding","=","IOUtils",".","safelyAllocate","(","toBlockEnd,","POIFSFileSystem",".","getMaxRecordLength","(",")",")",";","Arrays",".","fill","(","padding,","(","byte",")","0xFF",")",";","os",".","write","(","padding",")",";","}","}","\n\n","return","Math",".","toIntExact","(","length",")",";"],"docstring_tokens":["Stores","the","given","data","for","this","Document"],"prompt_tokens":[]}
{"code_tokens":["void","free","(",")","throws","IOException","{","_stream",".","free","(",")",";","_property",".","setStartBlock","(","POIFSConstants",".","END_OF_CHAIN",")",";"],"docstring_tokens":["Frees","the","underlying","stream","and","property"],"prompt_tokens":[]}
{"code_tokens":["private","void","openWorkbook","(","File","file",")","throws","FileNotFoundException,","IOException","{","System",".","out",".","println","(","\"Opening","workbook","[\"","+","file",".","getName","(",")","+","\"]\"",")",";","try","(","FileInputStream","fis","=","new","FileInputStream","(","file",")",")","{","\n\n","//","Open","the","workbook","and","then","create","the","FormulaEvaluator","and\n","//","DataFormatter","instances","that","will","be","needed","to,","respectively,\n","//","force","evaluation","of","forumlae","found","in","cells","and","create","a\n","//","formatted","String","encapsulating","the","cells","contents",".","this",".","workbook","=","WorkbookFactory",".","create","(","fis",")",";","this",".","evaluator","=","this",".","workbook",".","getCreationHelper","(",")",".","createFormulaEvaluator","(",")",";","this",".","formatter","=","new","DataFormatter","(","true",")",";","}"],"docstring_tokens":["Open","an","Excel","workbook","ready","for","conversion"],"prompt_tokens":[]}
{"code_tokens":["private","void","saveCSVFile","(","File","file",")","throws","IOException","{","ArrayList<String>","line",";","StringBuilder","buffer",";","String","csvLineElement",";","\n\n","//","Open","a","writer","onto","the","CSV","file",".","try","(","BufferedWriter","bw","=","Files",".","newBufferedWriter","(","file",".","toPath","(",")",",","StandardCharsets",".","ISO_8859_1",")",")","{","\n\n","System",".","out",".","println","(","\"Saving","the","CSV","file","[\"","+","file",".","getName","(",")","+","\"]\"",")",";","\n\n","//","Step","through","the","elements","of","the","ArrayList","that","was","used","to","hold\n","//","all","of","the","data","recovered","from","the","Excel","workbooks'","sheets,","rows\n","//","and","cells",".","for","(","int","i","=","0",";","i","<","this",".","csvData",".","size","(",")",";","i++",")","{","buffer","=","new","StringBuilder","(",")",";","\n\n","//","Get","an","element","from","the","ArrayList","that","contains","the","data","for\n","//","the","workbook",".","This","element","will","itself","be","an","ArrayList\n","//","containing","Strings","and","each","String","will","hold","the","data","recovered\n","//","from","a","single","cell",".","The","for","(",")","loop","is","used","to","recover","elements\n","//","from","this","'row'","ArrayList","one","at","a","time","and","to","write","the","Strings\n","//","away","to","a","StringBuilder","thus","assembling","a","single","line","for","inclusion\n","//","in","the","CSV","file",".","If","a","row","was","empty","or","if","it","was","short,","then\n","//","the","ArrayList","that","contains","it's","data","will","also","be","shorter","than\n","//","some","of","the","others",".","Therefore,","it","is","necessary","to","check","within\n","//","the","for","loop","to","ensure","that","the","ArrayList","contains","data","to","be\n","//","processed",".","If","it","does,","then","an","element","will","be","recovered","and\n","//","appended","to","the","StringBuilder",".","line","=","this",".","csvData",".","get","(","i",")",";","for","(","int","j","=","0",";","j","<","this",".","maxRowWidth",";","j++",")","{","if","(","line",".","size","(",")",">","j",")","{","csvLineElement","=","line",".","get","(","j",")",";","if","(","csvLineElement","!=","null",")","{","buffer",".","append","(","this",".","escapeEmbeddedCharacters","(","csvLineElement",")",")",";","}","}","if","(","j","<","(","this",".","maxRowWidth","-","1",")",")","{","buffer",".","append","(","this",".","separator",")",";","}","}","\n\n","//","Once","the","line","is","built,","write","it","away","to","the","CSV","file",".","bw",".","write","(","buffer",".","toString","(",")",".","trim","(",")",")",";","\n\n","//","Condition","the","inclusion","of","new","line","characters","so","as","to\n","//","avoid","an","additional,","superfluous,","new","line","at","the","end","of\n","//","the","file",".","if","(","i","<","(","this",".","csvData",".","size","(",")","-","1",")",")","{","bw",".","newLine","(",")",";","}","}","}"],"docstring_tokens":["Called","to","actually","save","the","data","recovered","from","the","Excel","workbook","as","a","CSV","file"],"prompt_tokens":[]}
{"code_tokens":["private","void","rowToCSV","(","Row","row",")","{","Cell","cell",";","int","lastCellNum",";","ArrayList<String>","csvLine","=","new","ArrayList<>","(",")",";","\n\n","//","Check","to","ensure","that","a","row","was","recovered","from","the","sheet","as","it","is\n","//","possible","that","one","or","more","rows","between","other","populated","rows","could","be\n","//","missing","-","blank",".","If","the","row","does","contain","cells","then",".",".",".","if","(","row","!=","null",")","{","\n\n","//","Get","the","index","for","the","right","most","cell","on","the","row","and","then\n","//","step","along","the","row","from","left","to","right","recovering","the","contents\n","//","of","each","cell,","converting","that","into","a","formatted","String","and\n","//","then","storing","the","String","into","the","csvLine","ArrayList",".","lastCellNum","=","row",".","getLastCellNum","(",")",";","for","(","int","i","=","0",";","i","<=","lastCellNum",";","i++",")","{","cell","=","row",".","getCell","(","i",")",";","if","(","cell","==","null",")","{","csvLine",".","add","(","\"\"",")",";","}","else","{","if","(","cell",".","getCellType","(",")","!=","CellType",".","FORMULA",")","{","csvLine",".","add","(","this",".","formatter",".","formatCellValue","(","cell",")",")",";","}","else","{","csvLine",".","add","(","this",".","formatter",".","formatCellValue","(","cell,","this",".","evaluator",")",")",";","}","}","}","//","Make","a","note","of","the","index","number","of","the","right","most","cell",".","This","value\n","//","will","later","be","used","to","ensure","that","the","matrix","of","data","in","the","CSV","file\n","//","is","square",".","if","(","lastCellNum",">","this",".","maxRowWidth",")","{","this",".","maxRowWidth","=","lastCellNum",";","}","}","this",".","csvData",".","add","(","csvLine",")",";"],"docstring_tokens":["Called","to","convert","a","row","of","cells","into","a","line","of","data","that","can","later","be","output","to","the","CSV","file"],"prompt_tokens":[]}
{"code_tokens":["public","static","OPCPackage","create","(","String","path",")","{","return","create","(","new","File","(","path",")",")",";"],"docstring_tokens":["Creates","a","new","package"],"prompt_tokens":[]}
{"code_tokens":["public","void","revert","(",")","{","revertImpl","(",")",";"],"docstring_tokens":["Close","the","package","WITHOUT","saving","its","content"],"prompt_tokens":[]}
{"code_tokens":["public","PackageProperties","getPackageProperties","(",")","throws","InvalidFormatException","{","this",".","throwExceptionIfWriteOnly","(",")",";","//","If","no","properties","part","has","been","found","then","we","create","one\n","if","(","this",".","packageProperties","==","null",")","{","this",".","packageProperties","=","new","PackagePropertiesPart","(","this,\n","PackagingURIHelper",".","CORE_PROPERTIES_PART_NAME",")",";","}","return","this",".","packageProperties",";"],"docstring_tokens":["Retrieves","or","creates","if","none","exists,","core","package","property","part"],"prompt_tokens":[]}
{"code_tokens":["public","PackagePart","getPart","(","PackagePartName","partName",")","{","throwExceptionIfWriteOnly","(",")",";","\n\n","if","(","partName","==","null",")","{","throw","new","IllegalArgumentException","(","\"partName\"",")",";","}","\n\n","//","If","the","partlist","is","null,","then","we","parse","the","package",".","if","(","partList","==","null",")","{","try","{","getParts","(",")",";","}","catch","(","InvalidFormatException","e",")","{","return","null",";","}","}","\n\n","return","partList",".","get","(","partName",")",";"],"docstring_tokens":["Retrieve","a","part","identified","by","its","name"],"prompt_tokens":[]}
{"code_tokens":["public","PackagePart","getPart","(","PackageRelationship","partRel",")","{","PackagePart","retPart","=","null",";","ensureRelationships","(",")",";","for","(","PackageRelationship","rel",":","relationships",")","{","if","(","rel",".","getRelationshipType","(",")",".","equals","(","partRel",".","getRelationshipType","(",")",")",")","{","try","{","retPart","=","getPart","(","PackagingURIHelper",".","createPartName","(","rel\n",".","getTargetURI","(",")",")",")",";","}","catch","(","InvalidFormatException","e",")","{","continue",";","}","break",";","}","}","return","retPart",";"],"docstring_tokens":["Get","the","target","part","from","the","specified","relationship"],"prompt_tokens":[]}
{"code_tokens":["public","PackagePart","createPart","(","PackagePartName","partName,","String","contentType",")","{","return","this",".","createPart","(","partName,","contentType,","true",")",";"],"docstring_tokens":["Create","and","add","a","part,","with","the","specified","name","and","content","type,","to","the","package"],"prompt_tokens":[]}
{"code_tokens":["public","void","removePart","(","PackagePartName","partName",")","{","throwExceptionIfReadOnly","(",")",";","if","(","partName","==","null","||","!this",".","containPart","(","partName",")",")","{","throw","new","IllegalArgumentException","(","\"partName\"",")",";","}","\n\n","//","Delete","the","specified","part","from","the","package",".","if","(","this",".","partList",".","containsKey","(","partName",")",")","{","this",".","partList",".","get","(","partName",")",".","setDeleted","(","true",")",";","this",".","removePartImpl","(","partName",")",";","this",".","partList",".","remove","(","partName",")",";","}","else","{","this",".","removePartImpl","(","partName",")",";","}","\n\n","//","Delete","content","type\n","this",".","contentTypeManager",".","removeContentType","(","partName",")",";","\n\n","//","If","this","part","is","a","relationship","part,","then","delete","all","relationships","of\n","//","the","source","part",".","if","(","partName",".","isRelationshipPartURI","(",")",")","{","URI","sourceURI","=","PackagingURIHelper\n",".","getSourcePartUriFromRelationshipPartUri","(","partName",".","getURI","(",")",")",";","PackagePartName","sourcePartName",";","try","{","sourcePartName","=","PackagingURIHelper",".","createPartName","(","sourceURI",")",";","}","catch","(","InvalidFormatException","e",")","{","LOG",".","atError","(",")",".","log","(","\"Part","name","URI","'","{","}","'","is","not","valid!","This","message","is","not","intended","to","be","displayed!\",","sourceURI",")",";","return",";","}","if","(","sourcePartName",".","getURI","(",")",".","equals","(","PackagingURIHelper",".","PACKAGE_ROOT_URI",")",")","{","clearRelationships","(",")",";","}","else","if","(","containPart","(","sourcePartName",")",")","{","PackagePart","part","=","getPart","(","sourcePartName",")",";","if","(","part","!=","null",")","{","part",".","clearRelationships","(",")",";","}","}","}","\n\n","this",".","isDirty","=","true",";"],"docstring_tokens":["Remove","a","part","in","this","package"],"prompt_tokens":[]}
{"code_tokens":["public","boolean","containPart","(","PackagePartName","partName",")","{","return","(","this",".","getPart","(","partName",")","!=","null",")",";"],"docstring_tokens":["Check","if","a","part","already","exists","in","this","package","from","its","name"],"prompt_tokens":[]}
{"code_tokens":["@Override\n","public","PackageRelationship","addRelationship","(","PackagePartName","targetPartName,\n","TargetMode","targetMode,","String","relationshipType",")","{","return","this",".","addRelationship","(","targetPartName,","targetMode,\n","relationshipType,","null",")",";"],"docstring_tokens":["Add","a","package","relationship"],"prompt_tokens":[]}
{"code_tokens":["public","void","save","(","File","targetFile",")","throws","IOException","{","if","(","targetFile","==","null",")","{","throw","new","IllegalArgumentException","(","\"targetFile\"",")",";","}","\n\n","this",".","throwExceptionIfReadOnly","(",")",";","\n\n","//","You","shouldn't","save","the","the","same","file,","do","a","close","instead\n","if","(","targetFile",".","exists","(",")","&&\n","targetFile",".","getAbsolutePath","(",")",".","equals","(","this",".","originalPackagePath",")",")","{","throw","new","InvalidOperationException","(","\"You","can't","call","save","(","File",")","to","save","to","the","currently","open","\"","+\n","\"file",".","To","save","to","the","current","file,","please","just","call","close","(",")","\"\n",")",";","}","\n\n","//","Do","the","save\n","try","(","FileOutputStream","fos","=","new","FileOutputStream","(","targetFile",")",")","{","this",".","save","(","fos",")",";","}"],"docstring_tokens":["Save","the","document","in","the","specified","file"],"prompt_tokens":[]}
{"code_tokens":["public","void","save","(","OutputStream","outputStream",")","throws","IOException","{","throwExceptionIfReadOnly","(",")",";","this",".","saveImpl","(","outputStream",")",";"],"docstring_tokens":["Save","the","document","in","the","specified","output","stream"],"prompt_tokens":[]}
{"code_tokens":["public","void","registerPartAndContentType","(","PackagePart","part",")","{","addPackagePart","(","part",")",";","this",".","contentTypeManager",".","addContentType","(","part",".","getPartName","(",")",",","part",".","getContentType","(",")",")",";","this",".","isDirty","=","true",";"],"docstring_tokens":["Add","the","specified","part,","and","register","its","content","type","with","the","content","type","manager"],"prompt_tokens":[]}
{"code_tokens":["public","void","unregisterPartAndContentType","(","PackagePartName","partName",")","{","removePart","(","partName",")",";","this",".","contentTypeManager",".","removeContentType","(","partName",")",";","this",".","isDirty","=","true",";"],"docstring_tokens":["Remove","the","specified","part,","and","clear","its","content","type","from","the","content","type","manager"],"prompt_tokens":[]}
{"code_tokens":["public","void","setDisplayFormulas","(","boolean","formulas",")","{","field_1_options","=","displayFormulas",".","setShortBoolean","(","field_1_options,","formulas",")",";"],"docstring_tokens":["set","whether","the","window","should","display","formulas"],"prompt_tokens":[]}
{"code_tokens":["public","void","setDisplayGridlines","(","boolean","gridlines",")","{","field_1_options","=","displayGridlines",".","setShortBoolean","(","field_1_options,","gridlines",")",";"],"docstring_tokens":["set","whether","the","window","should","display","gridlines"],"prompt_tokens":[]}
{"code_tokens":["public","void","setDisplayRowColHeadings","(","boolean","headings",")","{","field_1_options","=","displayRowColHeadings",".","setShortBoolean","(","field_1_options,","headings",")",";"],"docstring_tokens":["set","whether","the","window","should","display","row","and","column","headings"],"prompt_tokens":[]}
{"code_tokens":["public","void","setFreezePanes","(","boolean","freezepanes",")","{","field_1_options","=","freezePanes",".","setShortBoolean","(","field_1_options,","freezepanes",")",";"],"docstring_tokens":["set","whether","the","window","should","freeze","panes"],"prompt_tokens":[]}
{"code_tokens":["public","void","setDisplayZeros","(","boolean","zeros",")","{","field_1_options","=","displayZeros",".","setShortBoolean","(","field_1_options,","zeros",")",";"],"docstring_tokens":["set","whether","the","window","should","display","zero","values"],"prompt_tokens":[]}
{"code_tokens":["public","void","setDefaultHeader","(","boolean","header",")","{","field_1_options","=","defaultHeader",".","setShortBoolean","(","field_1_options,","header",")",";"],"docstring_tokens":["set","whether","the","window","should","display","a","default","header"],"prompt_tokens":[]}
{"code_tokens":["public","void","setTopRow","(","short","topRow",")","{","field_2_top_row","=","topRow",";"],"docstring_tokens":["set","the","top","row","visible","in","the","window"],"prompt_tokens":[]}
{"code_tokens":["public","void","setLeftCol","(","short","leftCol",")","{","field_3_left_col","=","leftCol",";"],"docstring_tokens":["set","the","leftmost","column","displayed","in","the","window"],"prompt_tokens":[]}
{"code_tokens":["public","boolean","getDisplayFormulas","(",")","{","return","displayFormulas",".","isSet","(","field_1_options",")",";"],"docstring_tokens":["get","whether","the","window","should","display","formulas"],"prompt_tokens":[]}
{"code_tokens":["public","boolean","getDisplayGridlines","(",")","{","return","displayGridlines",".","isSet","(","field_1_options",")",";"],"docstring_tokens":["get","whether","the","window","should","display","gridlines"],"prompt_tokens":[]}
{"code_tokens":["public","boolean","getDisplayRowColHeadings","(",")","{","return","displayRowColHeadings",".","isSet","(","field_1_options",")",";"],"docstring_tokens":["get","whether","the","window","should","display","row","and","column","headings"],"prompt_tokens":[]}
{"code_tokens":["public","boolean","getFreezePanes","(",")","{","return","freezePanes",".","isSet","(","field_1_options",")",";"],"docstring_tokens":["get","whether","the","window","should","freeze","panes"],"prompt_tokens":[]}
{"code_tokens":["public","boolean","getDisplayZeros","(",")","{","return","displayZeros",".","isSet","(","field_1_options",")",";"],"docstring_tokens":["get","whether","the","window","should","display","zero","values"],"prompt_tokens":[]}
{"code_tokens":["public","boolean","getDefaultHeader","(",")","{","return","defaultHeader",".","isSet","(","field_1_options",")",";"],"docstring_tokens":["get","whether","the","window","should","display","a","default","header"],"prompt_tokens":[]}
{"code_tokens":["public","boolean","isActive","(",")","{","return","active",".","isSet","(","field_1_options",")",";"],"docstring_tokens":["is","the","sheet","currently","displayed","in","the","window"],"prompt_tokens":[]}
{"code_tokens":["public","short","getTopRow","(",")","{","return","field_2_top_row",";"],"docstring_tokens":["get","the","top","row","visible","in","the","window"],"prompt_tokens":[]}
{"code_tokens":["public","short","getLeftCol","(",")","{","return","field_3_left_col",";"],"docstring_tokens":["get","the","leftmost","column","displayed","in","the","window"],"prompt_tokens":[]}
{"code_tokens":["public","boolean","hasSameName","(","XWPFStyle","compStyle",")","{","CTStyle","ctCompStyle","=","compStyle",".","getCTStyle","(",")",";","String","name","=","ctCompStyle",".","getName","(",")",".","getVal","(",")",";","return","name",".","equals","(","ctStyle",".","getName","(",")",".","getVal","(",")",")",";"],"docstring_tokens":["compares","the","names","of","the","Styles"],"prompt_tokens":[]}
{"code_tokens":["@Override\n","public","RichTextString","getItemAt","(","int","idx",")","{","return","new","XSSFRichTextString","(","strings",".","get","(","idx",")",")",";"],"docstring_tokens":["Return","a","string","item","by","index"],"prompt_tokens":[]}
{"code_tokens":["public","List<RichTextString>","getSharedStringItems","(",")","{","ArrayList<RichTextString>","items","=","new","ArrayList<>","(",")",";","for","(","CTRst","rst",":","strings",")","{","items",".","add","(","new","XSSFRichTextString","(","rst",")",")",";","}","return","Collections",".","unmodifiableList","(","items",")",";"],"docstring_tokens":["Provide","access","to","the","strings","in","the","SharedStringsTable"],"prompt_tokens":[]}
{"code_tokens":["public","void","writeTo","(","OutputStream","out",")","throws","IOException","{","XmlOptions","xmlOptions","=","new","XmlOptions","(","DEFAULT_XML_OPTIONS",")",";","//","the","following","two","lines","turn","off","writing","CDATA\n","//","see","Bugzilla","48936\n","xmlOptions",".","setSaveCDataLengthThreshold","(","1000000",")",";","xmlOptions",".","setSaveCDataEntityCountThreshold","(","-1",")",";","\n\n","//re-create","the","sst","table","every","time","saving","a","workbook\n","CTSst","sst","=","_sstDoc",".","getSst","(",")",";","sst",".","setCount","(","count",")",";","sst",".","setUniqueCount","(","uniqueCount",")",";","\n\n","_sstDoc",".","save","(","out,","xmlOptions",")",";"],"docstring_tokens":["Write","this","table","out","as","XML"],"prompt_tokens":[]}
{"code_tokens":["public","String","getText","(",")","{","final","int","MAX_LEVELS","=","9",";","StringBuilder","out","=","new","StringBuilder","(",")",";","List<Integer>","levelCount","=","new","ArrayList<>","(","MAX_LEVELS",")",";","//","maximum","9\n","//","levels\n","//","initialise","the","levelCount","array","-","this","maintains","a","record","of","the\n","//","numbering","to","be","used","at","each","level\n","for","(","int","k","=","0",";","k","<","MAX_LEVELS",";","k++",")","{","levelCount",".","add","(","0",")",";","}","\n\n","for","(","int","i","=","0",";","i","<","_paragraphs",".","size","(",")",";","i++",")","{","if","(","out",".","length","(",")",">","0",")","{","out",".","append","(","'\\n'",")",";","}","XSSFTextParagraph","p","=","_paragraphs",".","get","(","i",")",";","\n\n","if","(","p",".","isBullet","(",")","&&","p",".","getText","(",")",".","length","(",")",">","0",")","{","\n\n","int","level","=","Math",".","min","(","p",".","getLevel","(",")",",","MAX_LEVELS","-","1",")",";","\n\n","if","(","p",".","isBulletAutoNumber","(",")",")","{","i","=","processAutoNumGroup","(","i,","level,","levelCount,","out",")",";","}","else","{","//","indent","appropriately","for","the","level\n","for","(","int","j","=","0",";","j","<","level",";","j++",")","{","out",".","append","(","'\\t'",")",";","}","String","character","=","p",".","getBulletCharacter","(",")",";","out",".","append","(","character",".","length","(",")",">","0","?","character","+","\"","\"",":","\"-","\"",")",";","out",".","append","(","p",".","getText","(",")",")",";","}","}","else","{","out",".","append","(","p",".","getText","(",")",")",";","\n\n","//","this","paragraph","is","not","a","bullet,","so","reset","the","count","array\n","for","(","int","k","=","0",";","k","<","MAX_LEVELS",";","k++",")","{","levelCount",".","set","(","k,","0",")",";","}","}","}","\n\n","return","out",".","toString","(",")",";"],"docstring_tokens":["Returns","the","text","from","all","paragraphs","in","the","shape"],"prompt_tokens":[]}
{"code_tokens":["private","String","getBulletPrefix","(","ListAutoNumber","scheme,","int","value",")","{","StringBuilder","out","=","new","StringBuilder","(",")",";","\n\n","switch","(","scheme",")","{","case","ALPHA_LC_PARENT_BOTH:\n","case","ALPHA_LC_PARENT_R:\n","if","(","scheme","==","ListAutoNumber",".","ALPHA_LC_PARENT_BOTH",")","{","out",".","append","(","'","(","'",")",";","}","out",".","append","(","valueToAlpha","(","value",")",".","toLowerCase","(","Locale",".","ROOT",")",")",";","out",".","append","(","'",")","'",")",";","break",";","case","ALPHA_UC_PARENT_BOTH:\n","case","ALPHA_UC_PARENT_R:\n","if","(","scheme","==","ListAutoNumber",".","ALPHA_UC_PARENT_BOTH",")","{","out",".","append","(","'","(","'",")",";","}","out",".","append","(","valueToAlpha","(","value",")",")",";","out",".","append","(","'",")","'",")",";","break",";","case","ALPHA_LC_PERIOD:\n","out",".","append","(","valueToAlpha","(","value",")",".","toLowerCase","(","Locale",".","ROOT",")",")",";","out",".","append","(","'",".","'",")",";","break",";","case","ALPHA_UC_PERIOD:\n","out",".","append","(","valueToAlpha","(","value",")",")",";","out",".","append","(","'",".","'",")",";","break",";","case","ARABIC_PARENT_BOTH:\n","case","ARABIC_PARENT_R:\n","if","(","scheme","==","ListAutoNumber",".","ARABIC_PARENT_BOTH",")","{","out",".","append","(","'","(","'",")",";","}","out",".","append","(","value",")",";","out",".","append","(","'",")","'",")",";","break",";","case","ARABIC_PERIOD:\n","out",".","append","(","value",")",";","out",".","append","(","'",".","'",")",";","break",";","case","ARABIC_PLAIN:\n","out",".","append","(","value",")",";","break",";","case","ROMAN_LC_PARENT_BOTH:\n","case","ROMAN_LC_PARENT_R:\n","if","(","scheme","==","ListAutoNumber",".","ROMAN_LC_PARENT_BOTH",")","{","out",".","append","(","'","(","'",")",";","}","out",".","append","(","valueToRoman","(","value",")",".","toLowerCase","(","Locale",".","ROOT",")",")",";","out",".","append","(","'",")","'",")",";","break",";","case","ROMAN_UC_PARENT_BOTH:\n","case","ROMAN_UC_PARENT_R:\n","if","(","scheme","==","ListAutoNumber",".","ROMAN_UC_PARENT_BOTH",")","{","out",".","append","(","'","(","'",")",";","}","out",".","append","(","valueToRoman","(","value",")",")",";","out",".","append","(","'",")","'",")",";","break",";","case","ROMAN_LC_PERIOD:\n","out",".","append","(","valueToRoman","(","value",")",".","toLowerCase","(","Locale",".","ROOT",")",")",";","out",".","append","(","'",".","'",")",";","break",";","case","ROMAN_UC_PERIOD:\n","out",".","append","(","valueToRoman","(","value",")",")",";","out",".","append","(","'",".","'",")",";","break",";","default:\n","out",".","append","(","'\\u2022'",")",";","//","can't","set","the","font","to","wingdings","so","use","the\n","//","default","bullet","character\n","break",";","}","out",".","append","(","\"","\"",")",";","return","out",".","toString","(",")",";"],"docstring_tokens":["Returns","a","string","containing","an","appropriate","prefix","for","an","auto-numbering","bullet"],"prompt_tokens":[]}
{"code_tokens":["public","void","clearText","(",")","{","_paragraphs",".","clear","(",")",";","CTTextBody","txBody","=","ctShape",".","getTxBody","(",")",";","txBody",".","setPArray","(","null",")",";","//","remove","any","existing","paragraphs\n"],"docstring_tokens":["Clear","all","text","from","this","shape"],"prompt_tokens":[]}
{"code_tokens":["public","void","setText","(","String","text",")","{","clearText","(",")",";","\n\n","addNewTextParagraph","(",")",".","addNewTextRun","(",")",".","setText","(","text",")",";"],"docstring_tokens":["Set","a","single","paragraph","of","text","on","the","shape"],"prompt_tokens":[]}
{"code_tokens":["public","XSSFTextParagraph","addNewTextParagraph","(",")","{","CTTextBody","txBody","=","ctShape",".","getTxBody","(",")",";","CTTextParagraph","p","=","txBody",".","addNewP","(",")",";","XSSFTextParagraph","paragraph","=","new","XSSFTextParagraph","(","p,","ctShape",")",";","_paragraphs",".","add","(","paragraph",")",";","return","paragraph",";"],"docstring_tokens":["Add","a","new","paragraph","run","to","this","shape"],"prompt_tokens":[]}
{"code_tokens":["public","XSSFTextParagraph","addNewTextParagraph","(","String","text",")","{","XSSFTextParagraph","paragraph","=","addNewTextParagraph","(",")",";","paragraph",".","addNewTextRun","(",")",".","setText","(","text",")",";","return","paragraph",";"],"docstring_tokens":["Add","a","new","paragraph","run","to","this","shape,","set","to","the","provided","string"],"prompt_tokens":[]}
{"code_tokens":["public","XSSFTextParagraph","addNewTextParagraph","(","XSSFRichTextString","str",")","{","CTTextBody","txBody","=","ctShape",".","getTxBody","(",")",";","CTTextParagraph","p","=","txBody",".","addNewP","(",")",";","\n\n","if","(","str",".","numFormattingRuns","(",")","==","0",")","{","CTRegularTextRun","r","=","p",".","addNewR","(",")",";","CTTextCharacterProperties","rPr","=","r",".","addNewRPr","(",")",";","rPr",".","setLang","(","\"en-US\"",")",";","rPr",".","setSz","(","1100",")",";","r",".","setT","(","str",".","getString","(",")",")",";","\n\n","}","else","{","for","(","int","i","=","0",";","i","<","str",".","getCTRst","(",")",".","sizeOfRArray","(",")",";","i++",")","{","CTRElt","lt","=","str",".","getCTRst","(",")",".","getRArray","(","i",")",";","CTRPrElt","ltPr","=","lt",".","getRPr","(",")",";","if","(","ltPr","==","null",")","{","ltPr","=","lt",".","addNewRPr","(",")",";","}","\n\n","CTRegularTextRun","r","=","p",".","addNewR","(",")",";","CTTextCharacterProperties","rPr","=","r",".","addNewRPr","(",")",";","rPr",".","setLang","(","\"en-US\"",")",";","\n\n","applyAttributes","(","ltPr,","rPr",")",";","\n\n","r",".","setT","(","lt",".","getT","(",")",")",";","}","}","\n\n","//","Note:","the","XSSFTextParagraph","constructor","will","create","its","required\n","//","XSSFTextRuns","from","the","provided","CTTextParagraph\n","XSSFTextParagraph","paragraph","=","new","XSSFTextParagraph","(","p,","ctShape",")",";","_paragraphs",".","add","(","paragraph",")",";","\n\n","return","paragraph",";"],"docstring_tokens":["Add","a","new","paragraph","run","to","this","shape,","set","to","the","provided","rich","text","string"],"prompt_tokens":[]}
{"code_tokens":["public","void","setVerticalAlignment","(","VerticalAlignment","anchor",")","{","CTTextBodyProperties","bodyPr","=","ctShape",".","getTxBody","(",")",".","getBodyPr","(",")",";","if","(","bodyPr","!=","null",")","{","if","(","anchor","==","null",")","{","if","(","bodyPr",".","isSetAnchor","(",")",")","{","bodyPr",".","unsetAnchor","(",")",";","}","}","else","{","bodyPr",".","setAnchor","(","STTextAnchoringType",".","Enum",".","forInt","(","anchor",".","ordinal","(",")","+","1",")",")",";","}","}"],"docstring_tokens":["Sets","the","type","of","vertical","alignment","for","the","text","within","the","shape"],"prompt_tokens":[]}
{"code_tokens":["public","VerticalAlignment","getVerticalAlignment","(",")","{","CTTextBodyProperties","bodyPr","=","ctShape",".","getTxBody","(",")",".","getBodyPr","(",")",";","if","(","bodyPr","!=","null",")","{","if","(","bodyPr",".","isSetAnchor","(",")",")","{","return","VerticalAlignment",".","values","(",")","[bodyPr",".","getAnchor","(",")",".","intValue","(",")","-","1]",";","}","}","return","VerticalAlignment",".","TOP",";"],"docstring_tokens":["Returns","the","type","of","vertical","alignment","for","the","text","within","the","shape"],"prompt_tokens":[]}
{"code_tokens":["@Override\n","public","List<HSLFShape>","getShapes","(",")","{","PPDrawing","ppdrawing","=","getPPDrawing","(",")",";","\n\n","EscherContainerRecord","dg","=","ppdrawing",".","getDgContainer","(",")",";","EscherContainerRecord","spgr","=","null",";","\n\n","for","(","EscherRecord","rec",":","dg",")","{","if","(","rec",".","getRecordId","(",")","==","EscherContainerRecord",".","SPGR_CONTAINER",")","{","spgr","=","(","EscherContainerRecord",")","rec",";","break",";","}","}","if","(","spgr","==","null",")","{","throw","new","IllegalStateException","(","\"spgr","not","found\"",")",";","}","\n\n","List<HSLFShape>","shapeList","=","new","ArrayList<>","(",")",";","boolean","isFirst","=","true",";","for","(","EscherRecord","r",":","spgr",")","{","if","(","isFirst",")","{","//","skip","first","item\n","isFirst","=","false",";","continue",";","}","\n\n","EscherContainerRecord","sp","=","(","EscherContainerRecord",")","r",";","HSLFShape","sh","=","HSLFShapeFactory",".","createShape","(","sp,","null",")",";","sh",".","setSheet","(","this",")",";","\n\n","if","(","sh","instanceof","HSLFSimpleShape",")","{","HSLFHyperlink","link","=","HSLFHyperlink",".","find","(","sh",")",";","if","(","link","!=","null",")","{","(","(","HSLFSimpleShape",")","sh",")",".","setHyperlink","(","link",")",";","}","}","\n\n","shapeList",".","add","(","sh",")",";","}","\n\n","return","shapeList",";"],"docstring_tokens":["Returns","all","shapes","contained","in","this","Sheet"],"prompt_tokens":[]}
{"code_tokens":["public","int","allocateShapeId","(",")","{","EscherDggRecord","dgg","=","_slideShow",".","getDocumentRecord","(",")",".","getPPDrawingGroup","(",")",".","getEscherDggRecord","(",")",";","EscherDgRecord","dg","=","_container",".","getPPDrawing","(",")",".","getEscherDgRecord","(",")",";","return","dgg",".","allocateShapeId","(","dg,","false",")",";"],"docstring_tokens":["Allocates","new","shape","id","for","the","new","drawing","group","id"],"prompt_tokens":[]}
{"code_tokens":["@Override\n","public","HSLFBackground","getBackground","(",")","{","if","(","_background","==","null",")","{","PPDrawing","ppdrawing","=","getPPDrawing","(",")",";","\n\n","EscherContainerRecord","dg","=","ppdrawing",".","getDgContainer","(",")",";","EscherContainerRecord","spContainer","=","dg",".","getChildById","(","EscherContainerRecord",".","SP_CONTAINER",")",";","_background","=","new","HSLFBackground","(","spContainer,","null",")",";","_background",".","setSheet","(","this",")",";","}","return","_background",";"],"docstring_tokens":["Returns","the","background","shape","for","this","sheet"],"prompt_tokens":[]}
{"code_tokens":["public","String","getProgrammableTag","(",")","{","String","tag","=","null",";","RecordContainer","progTags","=","(","RecordContainer",")","getSheetContainer","(",")",".","findFirstOfType","(","RecordTypes",".","ProgTags",".","typeID\n",")",";","if","(","progTags","!=","null",")","{","RecordContainer","progBinaryTag","=","(","RecordContainer",")","progTags",".","findFirstOfType","(","RecordTypes",".","ProgBinaryTag",".","typeID\n",")",";","if","(","progBinaryTag","!=","null",")","{","CString","binaryTag","=","(","CString",")","progBinaryTag",".","findFirstOfType","(","RecordTypes",".","CString",".","typeID\n",")",";","if","(","binaryTag","!=","null",")","{","tag","=","binaryTag",".","getText","(",")",";","}","}","}","\n\n","return","tag",";","\n\n"],"docstring_tokens":["Return","programmable","tag","associated","with","this","sheet,","e.g"],"prompt_tokens":[]}
{"code_tokens":["/*","package","*/","static","I_MatchPredicate","createCriteriaPredicate","(","ValueEval","arg,","int","srcRowIndex,","int","srcColumnIndex",")","{","\n\n","ValueEval","evaluatedCriteriaArg","=","evaluateCriteriaArg","(","arg,","srcRowIndex,","srcColumnIndex",")",";","\n\n","if","(","evaluatedCriteriaArg","instanceof","NumberEval",")","{","return","new","NumberMatcher","(","(","(","NumberEval",")","evaluatedCriteriaArg",")",".","getNumberValue","(",")",",","CmpOp",".","OP_NONE",")",";","}","if","(","evaluatedCriteriaArg","instanceof","BoolEval",")","{","return","new","BooleanMatcher","(","(","(","BoolEval",")","evaluatedCriteriaArg",")",".","getBooleanValue","(",")",",","CmpOp",".","OP_NONE",")",";","}","\n\n","if","(","evaluatedCriteriaArg","instanceof","StringEval",")","{","return","createGeneralMatchPredicate","(","(","StringEval",")","evaluatedCriteriaArg",")",";","}","if","(","evaluatedCriteriaArg","instanceof","ErrorEval",")","{","return","new","ErrorMatcher","(","(","(","ErrorEval",")","evaluatedCriteriaArg",")",".","getErrorCode","(",")",",","CmpOp",".","OP_NONE",")",";","}","if","(","evaluatedCriteriaArg","==","BlankEval",".","instance",")","{","return","null",";","}","throw","new","RuntimeException","(","\"Unexpected","type","for","criteria","(","\"\n","+","evaluatedCriteriaArg",".","getClass","(",")",".","getName","(",")","+","\"",")","\"",")",";"],"docstring_tokens":["Creates","a","criteria","predicate","object","for","the","supplied","criteria","arg"],"prompt_tokens":[]}
{"code_tokens":["private","static","I_MatchPredicate","createGeneralMatchPredicate","(","StringEval","stringEval",")","{","String","value","=","stringEval",".","getStringValue","(",")",";","CmpOp","operator","=","CmpOp",".","getOperator","(","value",")",";","value","=","value",".","substring","(","operator",".","getLength","(",")",")",";","\n\n","Boolean","booleanVal","=","parseBoolean","(","value",")",";","if","(","booleanVal","!=","null",")","{","return","new","BooleanMatcher","(","booleanVal,","operator",")",";","}","\n\n","Double","doubleVal","=","OperandResolver",".","parseDouble","(","value",")",";","if","(","doubleVal","!=","null",")","{","return","new","NumberMatcher","(","doubleVal,","operator",")",";","}","ErrorEval","ee","=","parseError","(","value",")",";","if","(","ee","!=","null",")","{","return","new","ErrorMatcher","(","ee",".","getErrorCode","(",")",",","operator",")",";","}","\n\n","//else","-","just","a","plain","string","with","no","interpretation",".","return","new","StringMatcher","(","value,","operator",")",";"],"docstring_tokens":["When","the","second","argument","is","a","string,","many","things","are","possible"],"prompt_tokens":[]}
{"code_tokens":["public","void","setText","(","String","text",")","{","//","Convert","to","little","endian","unicode\n","_text","=","IOUtils",".","safelyAllocate","(","text",".","length","(",")","*","2L,","getMaxRecordLength","(",")",")",";","StringUtil",".","putUnicodeLE","(","text,_text,0",")",";","\n\n","//","Update","the","size","(","header","bytes","5-8",")","LittleEndian",".","putInt","(","_header,4,_text",".","length",")",";"],"docstring_tokens":["Updates","the","text","in","the","Atom"],"prompt_tokens":[]}
{"code_tokens":["@Override\n","public","String","toString","(",")","{","return","GenericRecordJsonWriter",".","marshal","(","this",")",";"],"docstring_tokens":["dump","debug","info;","use","getText","to","return","a","string","representation","of","the","atom"],"prompt_tokens":[]}
{"code_tokens":["public","Iterator<Property>","getChildren","(",")","{","return","_children",".","iterator","(",")",";"],"docstring_tokens":["Get","an","iterator","over","the","children","of","this","Parent;","all","elements","are","instances","of","Property"],"prompt_tokens":[]}
{"code_tokens":["@Override\n","public","Spliterator<Property>","spliterator","(",")","{","return","_children",".","spliterator","(",")",";"],"docstring_tokens":["Get","a","spliterator","over","the","children","of","this","Parent;","all","elements","are","instances","of","Property"],"prompt_tokens":[]}
{"code_tokens":["public","String","getValue","(",")","{","return","OldStringRecord",".","getString","(","field_5_bytes,","codepage",")",";"],"docstring_tokens":["Get","the","String","of","the","cell"],"prompt_tokens":[]}
{"code_tokens":["public","void","processWorkbookEvents","(","HSSFRequest","req,","POIFSFileSystem","fs",")","throws","IOException","{","processWorkbookEvents","(","req,","fs",".","getRoot","(",")",")",";"],"docstring_tokens":["Processes","a","file","into","essentially","record","events"],"prompt_tokens":[]}
{"code_tokens":["private","short","genericProcessEvents","(","HSSFRequest","req,","InputStream","in",")","throws","HSSFUserException","{","short","userCode","=","0",";","\n\n","//","Create","a","new","RecordStream","and","use","that\n","RecordFactoryInputStream","recordStream","=","new","RecordFactoryInputStream","(","in,","false",")",";","\n\n","//","Process","each","record","as","they","come","in\n","while","(","true",")","{","org",".","apache",".","poi",".","hssf",".","record",".","Record","r","=","recordStream",".","nextRecord","(",")",";","if","(","r","==","null",")","{","break",";","}","userCode","=","req",".","processRecord","(","r",")",";","if","(","userCode","!=","0",")","{","break",";","}","}","\n\n","//","All","done,","return","our","last","code\n","return","userCode",";"],"docstring_tokens":["Processes","a","DocumentInputStream","into","essentially","Record","events"],"prompt_tokens":[]}
{"code_tokens":["@Override\n","public","XSSFSheet","getSheet","(",")","{","return","getRow","(",")",".","getSheet","(",")",";"],"docstring_tokens":["Returns","the","sheet","this","cell","belongs","to"],"prompt_tokens":[]}
{"code_tokens":["@Override\n","public","int","getColumnIndex","(",")","{","return","this",".","_cellNum",";"],"docstring_tokens":["Returns","column","index","of","this","cell"],"prompt_tokens":[]}
{"code_tokens":["@Override\n","public","int","getRowIndex","(",")","{","return","_row",".","getRowNum","(",")",";"],"docstring_tokens":["Returns","row","index","of","a","row","in","the","sheet","that","contains","this","cell"],"prompt_tokens":[]}
{"code_tokens":["public","String","getReference","(",")","{","String","ref","=","_cell",".","getR","(",")",";","if","(","ref","==","null",")","{","return","getAddress","(",")",".","formatAsString","(",")",";","}","return","ref",";"],"docstring_tokens":["Returns","an","A1","style","reference","to","the","location","of","this","cell"],"prompt_tokens":[]}
{"code_tokens":["private","static","RuntimeException","typeMismatch","(","CellType","expectedType,","CellType","actualType,","boolean","isFormulaCell",")","{","String","msg","=","\"Cannot","get","a","\"","+","expectedType","+","\"","value","from","a","\"","+","actualType+","\"","\"","+","(","isFormulaCell","?","\"formula","\"",":","\"\"",")","+","\"cell\"",";","return","new","IllegalStateException","(","msg",")",";"],"docstring_tokens":["Used","to","help","format","error","messages"],"prompt_tokens":[]}
{"code_tokens":["@Override\n","public","XSSFHyperlink","getHyperlink","(",")","{","return","getSheet","(",")",".","getHyperlink","(","_row",".","getRowNum","(",")",",","_cellNum",")",";"],"docstring_tokens":["Returns","hyperlink","associated","with","this","cell"],"prompt_tokens":[]}
{"code_tokens":["@Override\n","public","void","setHyperlink","(","Hyperlink","hyperlink",")","{","if","(","hyperlink","==","null",")","{","removeHyperlink","(",")",";","return",";","}","\n\n","XSSFHyperlink","link",";","if","(","hyperlink","instanceof","XSSFHyperlink",")","{","link","=","(","XSSFHyperlink",")","hyperlink",";","}","else","{","link","=","new","XSSFHyperlink","(","hyperlink",")",";","}","\n\n","//","Assign","to","us\n","link",".","setCellReference","(","new","CellReference","(","_row",".","getRowNum","(",")",",","_cellNum",")",".","formatAsString","(",")",")",";","\n\n","//","Add","to","the","lists\n","getSheet","(",")",".","addHyperlink","(","link",")",";"],"docstring_tokens":["Assign","a","hyperlink","to","this","cell"],"prompt_tokens":[]}
{"code_tokens":["public","static","HSLFSoundData[]","find","(","Document","document",")","{","ArrayList<HSLFSoundData>","lst","=","new","ArrayList<>","(",")",";","org",".","apache",".","poi",".","hslf",".","record",".","Record[]","ch","=","document",".","getChildRecords","(",")",";","for","(","int","i","=","0",";","i","<","ch",".","length",";","i++",")","{","if","(","ch[i]",".","getRecordType","(",")","==","RecordTypes",".","SoundCollection",".","typeID",")","{","RecordContainer","col","=","(","RecordContainer",")","ch[i]",";","org",".","apache",".","poi",".","hslf",".","record",".","Record[]","sr","=","col",".","getChildRecords","(",")",";","for","(","int","j","=","0",";","j","<","sr",".","length",";","j++",")","{","if","(","sr[j]","instanceof","Sound",")","{","lst",".","add","(","new","HSLFSoundData","(","(","Sound",")","sr[j]",")",")",";","}","}","}","\n\n","}","return","lst",".","toArray","(","new","HSLFSoundData[0]",")",";"],"docstring_tokens":["Find","all","sound","records","in","the","supplied","Document","records"],"prompt_tokens":[]}
{"code_tokens":["public","boolean","isExternalRef","(",")","{","return","path[0]","==","0x01",";"],"docstring_tokens":["Checks","if","the","data","source","in","this","reference","record","is","external","to","this","sheet","or","internal"],"prompt_tokens":[]}
{"code_tokens":["@Override\n","public","int","serializeSimplePart","(","byte[]","data,","int","pos",")","{","LittleEndian",".","putShort","(","data,","pos,","getId","(",")",")",";","LittleEndian",".","putInt","(","data,","pos","+","2,","complexData",".","length",")",";","return","6",";"],"docstring_tokens":["Serializes","the","simple","part","of","this","property"],"prompt_tokens":[]}
{"code_tokens":["@Override\n","public","int","serializeComplexPart","(","byte[]","data,","int","pos",")","{","System",".","arraycopy","(","complexData,","0,","data,","pos,","complexData",".","length",")",";","return","complexData",".","length",";"],"docstring_tokens":["Serializes","the","complex","part","of","this","property"],"prompt_tokens":[]}
{"code_tokens":["@Override\n","public","boolean","equals","(","Object","o",")","{","if","(","this","==","o",")","{","return","true",";","}","if","(","!","(","o","instanceof","EscherComplexProperty",")",")","{","return","false",";","}","\n\n","EscherComplexProperty","escherComplexProperty","=","(","EscherComplexProperty",")","o",";","\n\n","return","Arrays",".","equals","(","complexData,","escherComplexProperty",".","complexData",")",";"],"docstring_tokens":["Determine","whether","this","property","is","equal","to","another","property"],"prompt_tokens":[]}
{"code_tokens":["public","String","getText","(",")","{","StringBuilder","s","=","new","StringBuilder","(",")",";","\n\n","//","See","if","we","can","get","a","suitable","encoding","for","any\n","//","non","unicode","text","in","the","file\n","msg",".","guess7BitEncoding","(",")",";","\n\n","//","Off","we","go\n","Iterator<String>","emails",";","try","{","emails","=","Arrays",".","asList","(","msg",".","getRecipientEmailAddressList","(",")",")",".","iterator","(",")",";","}","catch","(","ChunkNotFoundException","e",")","{","emails","=","Collections",".","emptyIterator","(",")",";","}","\n\n","try","{","s",".","append","(","\"From:","\"",")",".","append","(","msg",".","getDisplayFrom","(",")",")",".","append","(","\"\\n\"",")",";","}","catch","(","ChunkNotFoundException","ignored",")","{","}","\n\n","//","For","To,","CC","and","BCC,","try","to","match","the","names\n","//","up","with","their","email","addresses",".","Relies","on","the\n","//","Recipient","Chunks","being","in","the","same","order","as\n","//","people","in","To","+","CC","+","BCC",".","try","{","handleEmails","(","s,","\"To\",","msg",".","getDisplayTo","(",")",",","emails",")",";","}","catch","(","ChunkNotFoundException","ignored",")","{","}","try","{","handleEmails","(","s,","\"CC\",","msg",".","getDisplayCC","(",")",",","emails",")",";","}","catch","(","ChunkNotFoundException","ignored",")","{","}","try","{","handleEmails","(","s,","\"BCC\",","msg",".","getDisplayBCC","(",")",",","emails",")",";","}","catch","(","ChunkNotFoundException","ignored",")","{","}","\n\n","//","Date","-","try","two","ways","to","find","it\n","try","{","//","First","try","via","the","proper","chunk\n","SimpleDateFormat","f","=","new","SimpleDateFormat","(","\"E,","d","MMM","yyyy","HH:mm:ss","Z\",","Locale",".","ROOT",")",";","f",".","setTimeZone","(","LocaleUtil",".","getUserTimeZone","(",")",")",";","s",".","append","(","\"Date:","\"",")",".","append","(","f",".","format","(","msg",".","getMessageDate","(",")",".","getTime","(",")",")",")",".","append","(","\"\\n\"",")",";","}","catch","(","ChunkNotFoundException","e",")","{","try","{","//","Failing","that","try","via","the","raw","headers\n","String[]","headers","=","msg",".","getHeaders","(",")",";","for","(","String","header",":","headers",")","{","if","(","startsWithIgnoreCase","(","header,","\"date:\"",")",")","{","s",".","append","(","\"Date:\"",")",".","append","(","header,","header",".","indexOf","(","':'",")","+","1,","header",".","length","(",")",")",".","append","(","\"\\n\"",")",";","break",";","}","}","}","catch","(","ChunkNotFoundException","he",")","{","//","We","can't","find","the","date,","sorry",".",".",".","}","}","\n\n","try","{","s",".","append","(","\"Subject:","\"",")",".","append","(","msg",".","getSubject","(",")",")",".","append","(","\"\\n\"",")",";","}","catch","(","ChunkNotFoundException","ignored",")","{","}","\n\n","//","Display","attachment","names\n","//","To","get","the","attachments,","use","ExtractorFactory\n","for","(","AttachmentChunks","att",":","msg",".","getAttachmentFiles","(",")",")","{","StringChunk","name","=","att",".","getAttachLongFileName","(",")",";","if","(","name","==","null",")","name","=","att",".","getAttachFileName","(",")",";","String","attName","=","name","==","null","?","null",":","name",".","getValue","(",")",";","\n\n","if","(","att",".","getAttachMimeTag","(",")","!=","null","&&\n","att",".","getAttachMimeTag","(",")",".","getValue","(",")","!=","null",")","{","attName","=","att",".","getAttachMimeTag","(",")",".","getValue","(",")","+","\"","=","\"","+","attName",";","}","s",".","append","(","\"Attachment:","\"",")",".","append","(","attName",")",".","append","(","\"\\n\"",")",";","}","\n\n","try","{","s",".","append","(","\"\\n\"",")",".","append","(","msg",".","getTextBody","(",")",")",".","append","(","\"\\n\"",")",";","}","catch","(","ChunkNotFoundException","ignored",")","{","}","\n\n","return","s",".","toString","(",")",";"],"docstring_tokens":["Outputs","something","a","little","like","a","RFC822","email"],"prompt_tokens":[]}
{"code_tokens":["public","void","setMaxNumberOfDataFormats","(","int","num",")","{","if","(","num","<","getNumDataFormats","(",")",")","{","if","(","num","<","0",")","{","throw","new","IllegalArgumentException","(","\"Maximum","Number","of","Data","Formats","must","be","greater","than","or","equal","to","0\"",")",";","}","else","{","throw","new","IllegalStateException","(","\"Cannot","set","the","maximum","number","of","data","formats","less","than","the","current","quantity",".","\"","+\n","\"Data","formats","must","be","explicitly","removed","(","via","StylesTable",".","removeNumberFormat",")","before","the","limit","can","be","decreased",".","\"",")",";","}","}","MAXIMUM_NUMBER_OF_DATA_FORMATS","=","num",";"],"docstring_tokens":["Changes","the","maximum","number","of","data","formats","that","may","be","in","a","style","table"],"prompt_tokens":[]}
{"code_tokens":["public","void","readFrom","(","InputStream","is",")","throws","IOException","{","try","{","doc","=","StyleSheetDocument",".","Factory",".","parse","(","is,","DEFAULT_XML_OPTIONS",")",";","\n\n","CTStylesheet","styleSheet","=","doc",".","getStyleSheet","(",")",";","\n\n","//","Grab","all","the","different","bits","we","care","about\n\n","//","keep","this","first,","as","some","constructors","below","want","it\n","IndexedColorMap","customColors","=","CustomIndexedColorMap",".","fromColors","(","styleSheet",".","getColors","(",")",")",";","if","(","customColors","!=","null",")","indexedColors","=","customColors",";","\n\n","CTNumFmts","ctfmts","=","styleSheet",".","getNumFmts","(",")",";","if","(","ctfmts","!=","null",")","{","for","(","CTNumFmt","nfmt",":","ctfmts",".","getNumFmtArray","(",")",")","{","short","formatId","=","(","short",")","nfmt",".","getNumFmtId","(",")",";","numberFormats",".","put","(","formatId,","nfmt",".","getFormatCode","(",")",")",";","}","}","\n\n","CTFonts","ctfonts","=","styleSheet",".","getFonts","(",")",";","if","(","ctfonts","!=","null",")","{","int","idx","=","0",";","for","(","CTFont","font",":","ctfonts",".","getFontArray","(",")",")","{","//","Create","the","font","and","save","it",".","Themes","Table","supplied","later\n","XSSFFont","f","=","new","XSSFFont","(","font,","idx,","indexedColors",")",";","fonts",".","add","(","f",")",";","idx++",";","}","}","CTFills","ctfills","=","styleSheet",".","getFills","(",")",";","if","(","ctfills","!=","null",")","{","for","(","CTFill","fill",":","ctfills",".","getFillArray","(",")",")","{","fills",".","add","(","new","XSSFCellFill","(","fill,","indexedColors",")",")",";","}","}","\n\n","CTBorders","ctborders","=","styleSheet",".","getBorders","(",")",";","if","(","ctborders","!=","null",")","{","for","(","CTBorder","border",":","ctborders",".","getBorderArray","(",")",")","{","borders",".","add","(","new","XSSFCellBorder","(","border,","indexedColors",")",")",";","}","}","\n\n","CTCellXfs","cellXfs","=","styleSheet",".","getCellXfs","(",")",";","if","(","cellXfs","!=","null",")","xfs",".","addAll","(","Arrays",".","asList","(","cellXfs",".","getXfArray","(",")",")",")",";","\n\n","CTCellStyleXfs","cellStyleXfs","=","styleSheet",".","getCellStyleXfs","(",")",";","if","(","cellStyleXfs","!=","null",")","styleXfs",".","addAll","(","Arrays",".","asList","(","cellStyleXfs",".","getXfArray","(",")",")",")",";","\n\n","CTDxfs","styleDxfs","=","styleSheet",".","getDxfs","(",")",";","if","(","styleDxfs","!=","null",")","dxfs",".","addAll","(","Arrays",".","asList","(","styleDxfs",".","getDxfArray","(",")",")",")",";","\n\n","CTTableStyles","ctTableStyles","=","styleSheet",".","getTableStyles","(",")",";","if","(","ctTableStyles","!=","null","&&","styleDxfs","!=","null",")","{","int","idx","=","0",";","for","(","CTTableStyle","style",":","ctTableStyles",".","getTableStyleArray","(",")",")","{","tableStyles",".","put","(","style",".","getName","(",")",",","new","XSSFTableStyle","(","idx,","styleDxfs,","style,","indexedColors",")",")",";","idx++",";","}","}","\n\n","}","catch","(","XmlException","e",")","{","throw","new","IOException","(","e",".","getLocalizedMessage","(",")",")",";","}"],"docstring_tokens":["Read","this","shared","styles","table","from","an","XML","file"],"prompt_tokens":[]}
{"code_tokens":["@Override\n","public","boolean","removeNumberFormat","(","short","index",")","{","String","fmt","=","numberFormats",".","remove","(","index",")",";","boolean","removed","=","(","fmt","!=","null",")",";","if","(","removed",")","{","for","(","final","CTXf","style",":","xfs",")","{","if","(","style",".","isSetNumFmtId","(",")","&&","style",".","getNumFmtId","(",")","==","index",")","{","style",".","unsetApplyNumberFormat","(",")",";","style",".","unsetNumFmtId","(",")",";","}","}","}","return","removed",";"],"docstring_tokens":["Remove","a","number","format","from","the","style","table","if","it","exists"],"prompt_tokens":[]}
{"code_tokens":["@Override\n","public","boolean","removeNumberFormat","(","String","fmt",")","{","short","id","=","getNumberFormatId","(","fmt",")",";","return","removeNumberFormat","(","id",")",";"],"docstring_tokens":["Remove","a","number","format","from","the","style","table","if","it","exists","All","cell","styles","with","this","number","format","will","be","modified","to","use","the","default","number","format"],"prompt_tokens":[]}
{"code_tokens":["@Internal\n","public","int","putCellXf","(","CTXf","cellXf",")","{","xfs",".","add","(","cellXf",")",";","return","xfs",".","size","(",")",";"],"docstring_tokens":["Adds","a","cell","to","the","styles","table"],"prompt_tokens":[]}
{"code_tokens":["@Internal\n","public","int","putCellStyleXf","(","CTXf","cellStyleXf",")","{","styleXfs",".","add","(","cellStyleXf",")",";","//","TODO:","check","for","duplicate\n","return","styleXfs",".","size","(",")",";"],"docstring_tokens":["Adds","a","cell","style","to","the","styles","table"],"prompt_tokens":[]}
{"code_tokens":["@Internal\n","public","int","putDxf","(","CTDxf","dxf",")","{","this",".","dxfs",".","add","(","dxf",")",";","return","this",".","dxfs",".","size","(",")",";"],"docstring_tokens":["Adds","a","Dxf","to","the","style","table","Does","not","check","for","duplicates"],"prompt_tokens":[]}
{"code_tokens":["public","XSSFFont","findFont","(","boolean","bold,","short","color,","short","fontHeight,","String","name,","boolean","italic,","boolean","strikeout,","short","typeOffset,","byte","underline",")","{","for","(","XSSFFont","font",":","fonts",")","{","if","(","(","font",".","getBold","(",")","==","bold",")","&&","font",".","getColor","(",")","==","color\n","&&","font",".","getFontHeight","(",")","==","fontHeight\n","&&","font",".","getFontName","(",")",".","equals","(","name",")","&&","font",".","getItalic","(",")","==","italic\n","&&","font",".","getStrikeout","(",")","==","strikeout\n","&&","font",".","getTypeOffset","(",")","==","typeOffset\n","&&","font",".","getUnderline","(",")","==","underline",")","{","return","font",";","}","}","return","null",";"],"docstring_tokens":["Finds","a","font","that","matches","the","one","with","the","supplied","attributes,","where","color","is","the","indexed-value,","not","the","actual","color"],"prompt_tokens":[]}
{"code_tokens":["public","static","String","getAsString","(","TNEFAttribute","attr",")","{","if","(","attr","==","null",")","{","return","null",";","}","if","(","attr","instanceof","TNEFStringAttribute",")","{","return","(","(","TNEFStringAttribute",")","attr",")",".","getString","(",")",";","}","\n\n","LOG",".","atWarn","(",")",".","log","(","\"Warning,","non","string","property","found:","{","}","\",","attr",")",";","return","null",";"],"docstring_tokens":["Returns","the","string","of","a","Attribute,","converting","as","appropriate"],"prompt_tokens":[]}
{"code_tokens":["public","List<String>","getTextAsVector","(",")","{","List<String>","textV","=","new","ArrayList<>","(",")",";","\n\n","//","Set","to","the","start","of","the","file\n","int","walkPos","=","0",";","\n\n","//","Start","walking","the","file,","looking","for","the","records\n","while","(","walkPos","!=","-1",")","{","walkPos","=","findTextRecords","(","walkPos,textV",")",";","}","\n\n","//","Return","what","we","find\n","return","textV",";"],"docstring_tokens":["Fetches","the","ALL","the","text","of","the","powerpoint","file,","in","a","List","of","strings,","one","per","text","record"],"prompt_tokens":[]}
{"code_tokens":["public","int","adjustForInsert","(","int","listIndex,","int","length",")","{","int","size","=","_textPieces",".","size","(",")",";","\n\n","TextPiece","tp","=","_textPieces",".","get","(","listIndex",")",";","\n\n","//","Update","with","the","new","end\n","tp",".","setEnd","(","tp",".","getEnd","(",")","+","length",")",";","\n\n","//","Now","change","all","subsequent","ones\n","for","(","int","x","=","listIndex","+","1",";","x","<","size",";","x++",")","{","tp","=","_textPieces",".","get","(","x",")",";","tp",".","setStart","(","tp",".","getStart","(",")","+","length",")",";","tp",".","setEnd","(","tp",".","getEnd","(",")","+","length",")",";","}","\n\n","//","All","done\n","return","length",";"],"docstring_tokens":["Adjust","all","the","text","piece","after","inserting","some","text","into","one","of","them"],"prompt_tokens":[]}
{"code_tokens":["public","static","InputStream","getDecryptedStream","(","final","DirectoryNode","root,","String","password",")","throws","IOException","{","//","first","check","if","the","node","contains","an","plain","package\n","if","(","root",".","hasEntry","(","OOXML_PACKAGE",")",")","{","return","root",".","createDocumentInputStream","(","OOXML_PACKAGE",")",";","}","\n\n","EncryptionInfo","info","=","new","EncryptionInfo","(","root",")",";","Decryptor","d","=","Decryptor",".","getInstance","(","info",")",";","\n\n","try","{","boolean","passwordCorrect","=","false",";","if","(","password","!=","null","&&","d",".","verifyPassword","(","password",")",")","{","passwordCorrect","=","true",";","}","if","(","!passwordCorrect","&&","d",".","verifyPassword","(","Decryptor",".","DEFAULT_PASSWORD",")",")","{","passwordCorrect","=","true",";","}","\n\n","if","(","passwordCorrect",")","{","return","d",".","getDataStream","(","root",")",";","}","else","if","(","password","!=","null",")","{","throw","new","EncryptedDocumentException","(","\"Password","incorrect\"",")",";","}","else","{","throw","new","EncryptedDocumentException","(","\"The","supplied","spreadsheet","is","protected,","but","no","password","was","supplied\"",")",";","}","}","catch","(","GeneralSecurityException","e",")","{","throw","new","IOException","(","e",")",";","}"],"docstring_tokens":["Wrap","the","OLE2","data","of","the","DirectoryNode","into","a","decrypted","stream","by","using","the","given","password"],"prompt_tokens":[]}
{"code_tokens":["public","void","setText","(","String","text",")","{","if","(","text",".","length","(",")",">","MAX_LEN",")","{","throw","new","IllegalArgumentException","(","\"Text","is","too","long","(","\"\n","+","text",".","length","(",")","+","\">\"","+","MAX_LEN","+","\"",")","\"",")",";","}","field_4_text","=","text",";","is16bit","=","StringUtil",".","hasMultibyte","(","text",")",";"],"docstring_tokens":["Set","the","text","field","for","the","SeriesText","record"],"prompt_tokens":[]}
{"code_tokens":["public","byte[]","getContents","(",")","{","TNEFAttribute","contents","=","getAttribute","(","TNEFProperty",".","ID_ATTACHDATA",")",";","if","(","contents","==","null",")","{","throw","new","IllegalArgumentException","(","\"Attachment","corrupt","-","no","Data","section\"",")",";","}","return","contents",".","getData","(",")",";"],"docstring_tokens":["Returns","the","contents","of","the","attachment"],"prompt_tokens":[]}
{"code_tokens":["public","byte[]","getRenderedMetaFile","(",")","{","TNEFAttribute","meta","=","getAttribute","(","TNEFProperty",".","ID_ATTACHMETAFILE",")",";","if","(","meta","==","null",")","return","null",";","return","meta",".","getData","(",")",";"],"docstring_tokens":["Returns","the","Meta","File","rendered","representation","of","the","attachment,","or","null","if","not","set"],"prompt_tokens":[]}
{"code_tokens":["public","void","free","(",")","throws","IOException","{","ChainLoopDetector","loopDetector","=","blockStore",".","getChainLoopDetector","(",")",";","free","(","loopDetector",")",";"],"docstring_tokens":["Frees","all","blocks","in","the","stream"],"prompt_tokens":[]}
{"code_tokens":["public","short","getNumAxis","(",")","{","return","field_1_numAxis",";"],"docstring_tokens":["Get","the","num","axis","field","for","the","AxisUsed","record"],"prompt_tokens":[]}
{"code_tokens":["public","void","setNumAxis","(","short","field_1_numAxis",")","{","this",".","field_1_numAxis","=","field_1_numAxis",";"],"docstring_tokens":["Set","the","num","axis","field","for","the","AxisUsed","record"],"prompt_tokens":[]}
{"code_tokens":["public","List<String>","getSheets","(",")","{","ArrayList<String>","sheets","=","new","ArrayList<>","(",")",";","\n\n","int","sheetCount","=","workbook",".","getNumberOfSheets","(",")",";","\n\n","for","(","int","x=0",";","x<sheetCount",";","x++",")","{","sheets",".","add","(","workbook",".","getSheetName","(","x",")",")",";","}","\n\n","return","sheets",";"],"docstring_tokens":["Returns","the","list","of","sheet","names"],"prompt_tokens":[]}
{"code_tokens":["public","void","setStringValue","(","String","cellName,","String","value",")","{","Cell","cell","=","getCell","(","cellName",")",";","cell",".","setCellValue","(","value",")",";"],"docstring_tokens":["Utility","method","for","setting","the","value","of","a","Cell","with","a","String"],"prompt_tokens":[]}
{"code_tokens":["public","void","setFormulaValue","(","String","cellName,","String","formula",")","{","Cell","cell","=","getCell","(","cellName",")",";","cell",".","setCellFormula","(","formula",")",";"],"docstring_tokens":["Utility","method","for","setting","the","value","of","a","Cell","with","a","Formula"],"prompt_tokens":[]}
{"code_tokens":["public","void","setDateValue","(","String","cellName,","Date","date",")","{","Cell","cell","=","getCell","(","cellName",")",";","cell",".","setCellValue","(","date",")",";"],"docstring_tokens":["Utility","method","for","setting","the","value","of","a","Cell","with","a","Date"],"prompt_tokens":[]}
{"code_tokens":["public","String","getCellAsString","(","String","cellName",")","{","Cell","cell","=","getCell","(","cellName",")",";","return","cell",".","getStringCellValue","(",")",";"],"docstring_tokens":["Returns","a","Cell","as","a","String","value"],"prompt_tokens":[]}
{"code_tokens":["public","double","getCellAsDouble","(","String","cellName",")","{","Cell","cell","=","getCell","(","cellName",")",";","return","cell",".","getNumericCellValue","(",")",";"],"docstring_tokens":["Returns","the","value","of","the","Cell","as","a","double"],"prompt_tokens":[]}
{"code_tokens":["@Override\n","public","void","setRowNum","(","int","rowIndex",")","{","int","maxrow","=","SpreadsheetVersion",".","EXCEL97",".","getLastRowIndex","(",")",";","if","(","(","rowIndex","<","0",")","||","(","rowIndex",">","maxrow",")",")","{","throw","new","IllegalArgumentException","(","\"Invalid","row","number","(","\"","+","rowIndex\n","+","\"",")","outside","allowable","range","(","0",".",".","\"","+","maxrow","+","\"",")","\"",")",";","}","rowNum","=","rowIndex",";","if","(","row","!=","null",")","{","row",".","setRowNumber","(","rowIndex",")",";","//","used","only","for","KEY","comparison","(","HSSFRow",")","}"],"docstring_tokens":["set","the","row","number","of","this","row"],"prompt_tokens":[]}
{"code_tokens":["@Override\n","public","HSSFSheet","getSheet","(",")","{","return","sheet",";"],"docstring_tokens":["Returns","the","HSSFSheet","this","row","belongs","to"],"prompt_tokens":[]}
{"code_tokens":["@Override\n","public","boolean","getZeroHeight","(",")","{","return","row",".","getZeroHeight","(",")",";"],"docstring_tokens":["get","whether","or","not","to","display","this","row","with","0","height"],"prompt_tokens":[]}
{"code_tokens":["@Override\n","protected","void","removePartImpl","(","PackagePartName","partName",")","{","if","(","partName","==","null",")","{","throw","new","IllegalArgumentException","(","\"partUri\"",")",";","}"],"docstring_tokens":["Delete","a","part","from","the","package"],"prompt_tokens":[]}
{"code_tokens":["@Override\n","protected","void","closeImpl","(",")","throws","IOException","{","//","Flush","the","package\n","flush","(",")",";","\n\n","if","(","this",".","originalPackagePath","==","null","||","this",".","originalPackagePath",".","isEmpty","(",")",")","{","return",";","}","\n\n","//","Save","the","content\n","File","targetFile","=","new","File","(","this",".","originalPackagePath",")",";","if","(","!targetFile",".","exists","(",")",")","{","throw","new","InvalidOperationException","(","\"Can't","close","a","package","not","previously","open","with","the","open","(",")","method","!\"",")",";","}","\n\n","//","Case","of","a","package","previously","open\n","String","tempFileName","=","generateTempFileName","(","FileHelper",".","getDirectory","(","targetFile",")",")",";","File","tempFile","=","TempFile",".","createTempFile","(","tempFileName,","\"",".","tmp\"",")",";","\n\n","//","Save","the","final","package","to","a","temporary","file\n","boolean","success","=","false",";","try","{","save","(","tempFile",")",";","success","=","true",";","}","finally","{","//","Close","the","current","zip","file,","so","we","can","overwrite","it","on","all","platforms\n","IOUtils",".","closeQuietly","(","this",".","zipArchive",")",";","try","{","//","Copy","the","new","file","over","the","old","one","if","save","(",")","succeed\n","if","(","success",")","{","FileHelper",".","copyFile","(","tempFile,","targetFile",")",";","}","}","finally","{","//","Either","the","save","operation","succeed","or","not,","we","delete","the","temporary","file\n","if","(","!tempFile",".","delete","(",")",")","{","LOG",".","atWarn","(",")",".","log","(","\"The","temporary","file:","'","{","}","'","cannot","be","deleted","!","Make","sure","that","no","other","application","use","it",".","\",","targetFile",".","getAbsolutePath","(",")",")",";","}","}","}"],"docstring_tokens":["Close","and","save","the","package"],"prompt_tokens":[]}
{"code_tokens":["@Override\n","protected","void","revertImpl","(",")","{","try","{","if","(","this",".","zipArchive","!=","null",")","{","this",".","zipArchive",".","close","(",")",";","}","}","catch","(","IOException","e",")","{","//","Do","nothing,","user","dont","have","to","know\n","}"],"docstring_tokens":["Close","the","package","without","saving","the","document"],"prompt_tokens":[]}
{"code_tokens":["@Override\n","public","void","saveImpl","(","OutputStream","outputStream",")","{","//","Check","that","the","document","was","open","in","write","mode\n","throwExceptionIfReadOnly","(",")",";","\n\n","final","ZipArchiveOutputStream","zos","=","(","outputStream","instanceof","ZipArchiveOutputStream",")","?","(","ZipArchiveOutputStream",")","outputStream",":","new","ZipArchiveOutputStream","(","outputStream",")",";","\n\n","try","{","//","If","the","core","properties","part","does","not","exist","in","the","part","list,\n","//","we","save","it","as","well\n","if","(","this",".","getPartsByRelationshipType","(","PackageRelationshipTypes",".","CORE_PROPERTIES",")",".","isEmpty","(",")","&&\n","this",".","getPartsByRelationshipType","(","PackageRelationshipTypes",".","CORE_PROPERTIES_ECMA376",")",".","isEmpty","(",")",")","{","LOG",".","atDebug","(",")",".","log","(","\"Save","core","properties","part\"",")",";","\n\n","//","Ensure","that","core","properties","are","added","if","missing\n","getPackageProperties","(",")",";","//","Add","core","properties","to","part","list",".",".",".","addPackagePart","(","this",".","packageProperties",")",";","//",".",".",".","and","to","add","its","relationship",".",".",".","this",".","relationships",".","addRelationship","(","this",".","packageProperties\n",".","getPartName","(",")",".","getURI","(",")",",","TargetMode",".","INTERNAL,\n","PackageRelationshipTypes",".","CORE_PROPERTIES,","null",")",";","//",".",".",".","and","the","content","if","it","has","not","been","added","yet",".","if","(","!this",".","contentTypeManager\n",".","isContentTypeRegister","(","ContentTypes",".","CORE_PROPERTIES_PART",")",")","{","this",".","contentTypeManager",".","addContentType","(","this",".","packageProperties",".","getPartName","(",")",",\n","ContentTypes",".","CORE_PROPERTIES_PART",")",";","}","}","\n\n","//","Save","content","type","part",".","LOG",".","atDebug","(",")",".","log","(","\"Save","content","types","part\"",")",";","this",".","contentTypeManager",".","save","(","zos",")",";","\n\n","//","Save","package","relationships","part",".","LOG",".","atDebug","(",")",".","log","(","\"Save","package","relationships\"",")",";","ZipPartMarshaller",".","marshallRelationshipPart","(","this",".","getRelationships","(",")",",\n","PackagingURIHelper",".","PACKAGE_RELATIONSHIPS_ROOT_PART_NAME,\n","zos",")",";","\n\n","//","Save","parts",".","for","(","PackagePart","part",":","getParts","(",")",")","{","//","If","the","part","is","a","relationship","part,","we","don't","save","it,","it's\n","//","the","source","part","that","will","do","the","job",".","if","(","part",".","isRelationshipPart","(",")",")","{","continue",";","}","\n\n","final","PackagePartName","ppn","=","part",".","getPartName","(",")",";","LOG",".","atDebug","(",")",".","log","(","(",")","->","new","SimpleMessage","(","\"Save","part","'\"","+","ZipHelper",".","getZipItemNameFromOPCName","(","ppn",".","getName","(",")",")","+","\"'\"",")",")",";","final","PartMarshaller","marshaller","=","partMarshallers",".","get","(","part",".","_contentType",")",";","\n\n","final","PartMarshaller","pm","=","(","marshaller","!=","null",")","?","marshaller",":","defaultPartMarshaller",";","if","(","!pm",".","marshall","(","part,","zos",")",")","{","String","errMsg","=","\"The","part","\"","+","ppn",".","getURI","(",")","+","\"","failed","to","be","saved","in","the","stream","with","marshaller","\"","+","pm","+\n","\"",".","Enable","logging","via","Log4j","2","for","more","details",".","\"",";","throw","new","OpenXML4JException","(","errMsg",")",";","}","}","\n\n","zos",".","finish","(",")",";","}","catch","(","OpenXML4JRuntimeException","e",")","{","//","no","need","to","wrap","this","type","of","Exception\n","throw","e",";","}","catch","(","Exception","e",")","{","throw","new","OpenXML4JRuntimeException","(","\"Fail","to","save:","an","error","occurs","while","saving","the","package",":","\"\n","+","e",".","getMessage","(",")",",","e",")",";","}"],"docstring_tokens":["Save","this","package","into","the","specified","stream"],"prompt_tokens":[]}
{"code_tokens":["private","CTTablePartStyle","getTablePartStyle","(","TablePartStyle","tablePartStyle",")","{","CTTable","ct","=","table",".","getCTTable","(",")",";","if","(","!ct",".","isSetTblPr","(",")",")","{","return","null",";","}","\n\n","CTTableProperties","pr","=","ct",".","getTblPr","(",")",";","boolean","bandRow","=","(","pr",".","isSetBandRow","(",")","&&","pr",".","getBandRow","(",")",")",";","boolean","firstRow","=","(","pr",".","isSetFirstRow","(",")","&&","pr",".","getFirstRow","(",")",")",";","boolean","lastRow","=","(","pr",".","isSetLastRow","(",")","&&","pr",".","getLastRow","(",")",")",";","boolean","bandCol","=","(","pr",".","isSetBandCol","(",")","&&","pr",".","getBandCol","(",")",")",";","boolean","firstCol","=","(","pr",".","isSetFirstCol","(",")","&&","pr",".","getFirstCol","(",")",")",";","boolean","lastCol","=","(","pr",".","isSetLastCol","(",")","&&","pr",".","getLastCol","(",")",")",";","\n\n","TablePartStyle","tps",";","if","(","tablePartStyle","!=","null",")","{","tps","=","tablePartStyle",";","}","else","if","(","row","==","0","&&","firstRow",")","{","tps","=","TablePartStyle",".","firstRow",";","}","else","if","(","row","==","table",".","getNumberOfRows","(",")","-","1","&&","lastRow",")","{","tps","=","TablePartStyle",".","lastRow",";","}","else","if","(","col","==","0","&&","firstCol",")","{","tps","=","TablePartStyle",".","firstCol",";","}","else","if","(","col","==","table",".","getNumberOfColumns","(",")","-","1","&&","lastCol",")","{","tps","=","TablePartStyle",".","lastCol",";","}","else","{","tps","=","TablePartStyle",".","wholeTbl",";","\n\n","int","br","=","row","+","(","firstRow","?","1",":","0",")",";","int","bc","=","col","+","(","firstCol","?","1",":","0",")",";","if","(","bandRow","&&","(","br","&","1",")","==","0",")","{","tps","=","TablePartStyle",".","band1H",";","}","else","if","(","bandCol","&&","(","bc","&","1",")","==","0",")","{","tps","=","TablePartStyle",".","band1V",";","}","}","\n\n","XSLFTableStyle","tabStyle","=","table",".","getTableStyle","(",")",";","if","(","tabStyle","==","null",")","{","return","null",";","}","\n\n","CTTablePartStyle","part","=","tabStyle",".","getTablePartStyle","(","tps",")",";","return","(","part","==","null",")","?","tabStyle",".","getTablePartStyle","(","TablePartStyle",".","wholeTbl",")",":","part",";"],"docstring_tokens":["Retrieves","the","part","style","depending","on","the","location","of","this","cell"],"prompt_tokens":[]}
{"code_tokens":["public","void","setSignature","(","int","signature",")","{","switch","(","signature",")","{","case","0x6E00:\n","setUIDInstanceCount","(","1",")",";","break",";","case","0x6E10:\n","setUIDInstanceCount","(","2",")",";","break",";","default:\n","throw","new","IllegalArgumentException","(","signature+\"","is","not","a","valid","instance/signature","value","for","PNG\"",")",";","}"],"docstring_tokens":["Sets","the","PNG","signature","-","either","0x6E00","or","0x6E10"],"prompt_tokens":[]}
{"code_tokens":["public","TextPropCollection","addParagraphTextPropCollection","(","int","charactersCovered",")","{","TextPropCollection","tpc","=","new","TextPropCollection","(","charactersCovered,","TextPropType",".","paragraph",")",";","paragraphStyles",".","add","(","tpc",")",";","return","tpc",";"],"docstring_tokens":["Create","a","new","Paragraph","TextPropCollection,","and","add","it","to","the","list"],"prompt_tokens":[]}
{"code_tokens":["public","TextPropCollection","addCharacterTextPropCollection","(","int","charactersCovered",")","{","TextPropCollection","tpc","=","new","TextPropCollection","(","charactersCovered,","TextPropType",".","character",")",";","charStyles",".","add","(","tpc",")",";","return","tpc",";"],"docstring_tokens":["Create","a","new","Character","TextPropCollection,","and","add","it","to","the","list"],"prompt_tokens":[]}
{"code_tokens":["public","Ptg[]","getFormulaTokens","(","FormulaRecord","formula",")","{","int","formulaRow","=","formula",".","getRow","(",")",";","int","formulaColumn","=","formula",".","getColumn","(",")",";","//Sanity","checks\n","if","(","!isInRange","(","formulaRow,","formulaColumn",")",")","{","throw","new","RuntimeException","(","\"Shared","Formula","Conversion:","Coding","Error\"",")",";","}","\n\n","SharedFormula","sf","=","new","SharedFormula","(","SpreadsheetVersion",".","EXCEL97",")",";","return","sf",".","convertSharedFormulas","(","field_7_parsed_expr",".","getTokens","(",")",",","formulaRow,","formulaColumn",")",";"],"docstring_tokens":["Convert","formula","into","an","array","of","Ptg","tokens"],"prompt_tokens":[]}
{"code_tokens":["public","HSSFSimpleShape","createShape","(","HSSFChildAnchor","anchor",")","{","HSSFSimpleShape","shape","=","new","HSSFSimpleShape","(","this,","anchor",")",";","shape",".","setParent","(","this",")",";","shape",".","setAnchor","(","anchor",")",";","shapes",".","add","(","shape",")",";","onCreate","(","shape",")",";","EscherSpRecord","sp","=","shape",".","getEscherContainer","(",")",".","getChildById","(","EscherSpRecord",".","RECORD_ID",")",";","if","(","shape",".","getAnchor","(",")",".","isHorizontallyFlipped","(",")",")","{","sp",".","setFlags","(","sp",".","getFlags","(",")","|","EscherSpRecord",".","FLAG_FLIPHORIZ",")",";","}","if","(","shape",".","getAnchor","(",")",".","isVerticallyFlipped","(",")",")","{","sp",".","setFlags","(","sp",".","getFlags","(",")","|","EscherSpRecord",".","FLAG_FLIPVERT",")",";","}","return","shape",";"],"docstring_tokens":["Create","a","new","simple","shape","under","this","group"],"prompt_tokens":[]}
{"code_tokens":["public","HSSFTextbox","createTextbox","(","HSSFChildAnchor","anchor",")","{","HSSFTextbox","shape","=","new","HSSFTextbox","(","this,","anchor",")",";","shape",".","setParent","(","this",")",";","shape",".","setAnchor","(","anchor",")",";","shapes",".","add","(","shape",")",";","onCreate","(","shape",")",";","return","shape",";"],"docstring_tokens":["Create","a","new","textbox","under","this","group"],"prompt_tokens":[]}
{"code_tokens":["@Override\n","public","List<HSSFShape>","getChildren","(",")","{","return","Collections",".","unmodifiableList","(","shapes",")",";"],"docstring_tokens":["Return","all","children","contained","by","this","shape"],"prompt_tokens":[]}
{"code_tokens":["@Override\n","public","void","setCoordinates","(","int","x1,","int","y1,","int","x2,","int","y2",")","{","_spgrRecord",".","setRectX1","(","x1",")",";","_spgrRecord",".","setRectX2","(","x2",")",";","_spgrRecord",".","setRectY1","(","y1",")",";","_spgrRecord",".","setRectY2","(","y2",")",";"],"docstring_tokens":["Sets","the","coordinate","space","of","this","group"],"prompt_tokens":[]}
{"code_tokens":["@Override\n","public","int","getX1","(",")","{","return","_spgrRecord",".","getRectX1","(",")",";"],"docstring_tokens":["The","top","left","x","coordinate","of","this","group"],"prompt_tokens":[]}
{"code_tokens":["@Override\n","public","int","getY1","(",")","{","return","_spgrRecord",".","getRectY1","(",")",";"],"docstring_tokens":["The","top","left","y","coordinate","of","this","group"],"prompt_tokens":[]}
{"code_tokens":["@Override\n","public","int","getX2","(",")","{","return","_spgrRecord",".","getRectX2","(",")",";"],"docstring_tokens":["The","bottom","right","x","coordinate","of","this","group"],"prompt_tokens":[]}
{"code_tokens":["@Override\n","public","int","getY2","(",")","{","return","_spgrRecord",".","getRectY2","(",")",";"],"docstring_tokens":["The","bottom","right","y","coordinate","of","this","group"],"prompt_tokens":[]}
{"code_tokens":["@Override\n","public","int","countOfAllChildren","(",")","{","int","count","=","shapes",".","size","(",")",";","for","(","HSSFShape","shape",":","shapes",")","{","count","+=","shape",".","countOfAllChildren","(",")",";","}","return","count",";"],"docstring_tokens":["Count","of","all","children","and","their","childrens","children"],"prompt_tokens":[]}
{"code_tokens":["@Override\n","protected","void","afterInsert","(","HSLFSheet","sh",")","{","super",".","afterInsert","(","sh",")",";","\n\n","EscherBSERecord","bse","=","getEscherBSERecord","(",")",";","bse",".","setRef","(","bse",".","getRef","(",")","+","1",")",";","\n\n","Rectangle2D","anchor","=","getAnchor","(",")",";","if","(","anchor",".","isEmpty","(",")",")","{","new","DrawPictureShape","(","this",")",".","resize","(",")",";","}"],"docstring_tokens":["By","default","set","the","orininal","image","size"],"prompt_tokens":[]}
{"code_tokens":["private","static","void","process","(","Entry","entry,","ChunkGroup","grouping,","Map<Integer,","MultiChunk>","multiChunks",")","{","final","String","entryName","=","entry",".","getName","(",")",";","boolean[]","isMultiValued","=","{","false","}",";","\n\n","//","Is","it","a","properties","chunk?","(","They","have","special","names",")","Chunk","chunk","=","(","PropertiesChunk",".","NAME",".","equals","(","entryName",")",")","?","readPropertiesChunk","(","grouping,","entry",")",":","readPrimitiveChunk","(","entry,","isMultiValued,","multiChunks",")",";","\n\n","if","(","chunk","==","null",")","{","return",";","}","\n\n","if","(","entry","instanceof","DocumentNode",")","{","try","(","DocumentInputStream","inp","=","new","DocumentInputStream","(","(","DocumentNode",")","entry",")",")","{","chunk",".","readValue","(","inp",")",";","}","catch","(","IOException","e",")","{","LOG",".","atError","(",")",".","withThrowable","(","e",")",".","log","(","\"Error","reading","from","part","{","}","\",","entry",".","getName","(",")",")",";","}","}","\n\n","if","(","!isMultiValued[0]",")","{","//","multi","value","chunks","will","be","grouped","later,","in","the","correct","order\n","grouping",".","record","(","chunk",")",";","}"],"docstring_tokens":["Creates","a","chunk,","and","gives","it","to","its","parent","group"],"prompt_tokens":[]}
{"code_tokens":["public","int","getLineColor","(",")","{","return","field_1_lineColor",";"],"docstring_tokens":["Get","the","line","color","field","for","the","LineFormat","record"],"prompt_tokens":[]}
{"code_tokens":["public","void","setLineColor","(","int","field_1_lineColor",")","{","this",".","field_1_lineColor","=","field_1_lineColor",";"],"docstring_tokens":["Set","the","line","color","field","for","the","LineFormat","record"],"prompt_tokens":[]}
{"code_tokens":["public","short","getLinePattern","(",")","{","return","field_2_linePattern",";"],"docstring_tokens":["Get","the","line","pattern","field","for","the","LineFormat","record"],"prompt_tokens":[]}
{"code_tokens":["public","void","setLinePattern","(","short","field_2_linePattern",")","{","this",".","field_2_linePattern","=","field_2_linePattern",";"],"docstring_tokens":["Set","the","line","pattern","field","for","the","LineFormat","record"],"prompt_tokens":[]}
{"code_tokens":["public","short","getWeight","(",")","{","return","field_3_weight",";"],"docstring_tokens":["Get","the","weight","field","for","the","LineFormat","record"],"prompt_tokens":[]}
{"code_tokens":["public","void","setWeight","(","short","field_3_weight",")","{","this",".","field_3_weight","=","field_3_weight",";"],"docstring_tokens":["Set","the","weight","field","for","the","LineFormat","record"],"prompt_tokens":[]}
{"code_tokens":["public","short","getFormat","(",")","{","return","field_4_format",";"],"docstring_tokens":["Get","the","format","field","for","the","LineFormat","record"],"prompt_tokens":[]}
{"code_tokens":["public","void","setFormat","(","short","field_4_format",")","{","this",".","field_4_format","=","field_4_format",";"],"docstring_tokens":["Set","the","format","field","for","the","LineFormat","record"],"prompt_tokens":[]}
{"code_tokens":["public","short","getColourPaletteIndex","(",")","{","return","field_5_colourPaletteIndex",";"],"docstring_tokens":["Get","the","colour","palette","index","field","for","the","LineFormat","record"],"prompt_tokens":[]}
{"code_tokens":["public","void","setColourPaletteIndex","(","short","field_5_colourPaletteIndex",")","{","this",".","field_5_colourPaletteIndex","=","field_5_colourPaletteIndex",";"],"docstring_tokens":["Set","the","colour","palette","index","field","for","the","LineFormat","record"],"prompt_tokens":[]}
{"code_tokens":["@Override\n","public","boolean","isBuiltin","(",")","{","return","false",";"],"docstring_tokens":["Always","false","for","these,","these","are","user","defined","styles"],"prompt_tokens":[]}
{"code_tokens":["@Override\n","public","Range","getRange","(",")","{","//","//","First","up,","trigger","a","full-recalculate\n","//","//","Needed","in","case","of","deletes","etc\n","//","getOverallRange","(",")",";","//\n","//","if","(","getFileInformationBlock","(",")",".","isFComplex","(",")",")","//","{","//","/*\n","//","*","Page","31:\n","//","*\n","//","*","main","document","must","be","found","by","examining","the","piece","table","entries\n","//","*","from","the","0th","piece","table","entry","from","the","piece","table","entry","that\n","//","*","describes","cp=fib",".","ccpText",".","//","*/\n","//","//","TODO:","review\n","//","return","new","Range","(","_cpSplit",".","getMainDocumentStart","(",")",",\n","//","_cpSplit",".","getMainDocumentEnd","(",")",",","this",")",";","//","}","//\n","//","/*\n","//","*","Page","31:\n","//","*\n","//","*","\"In","a","non-complex","file,","this","means","text","of","the:","main","document\n","//","begins\n","//","*","at","fib",".","fcMin","in","the","file","and","continues","through\n","//","*","fib",".","fcMin+fib",".","ccpText",".","\"\n","//","*/\n","//","int","bytesStart","=","getFileInformationBlock","(",")",".","getFcMin","(",")",";","//\n","//","int","charsStart","=","getTextTable","(",")",".","getCharIndex","(","bytesStart",")",";","//","int","charsEnd","=","charsStart\n","//","+","getFileInformationBlock","(",")",".","getSubdocumentTextStreamLength","(","//","SubdocumentType",".","MAIN",")",";","\n\n","//","it","seems","much","simpler","--","sergey\n","return","getRange","(","SubdocumentType",".","MAIN",")",";"],"docstring_tokens":["Returns","the","range","which","covers","the","whole","of","the","document,","but","excludes","any","headers","and","footers"],"prompt_tokens":[]}
{"code_tokens":["@Internal\n","public","RevisionMarkAuthorTable","getRevisionMarkAuthorTable","(",")","{","return","_rmat",";"],"docstring_tokens":["Gets","a","reference","to","the","revision","mark","author","table,","which","holds","the","revision","mark","authors","for","the","document"],"prompt_tokens":[]}
{"code_tokens":["@Internal\n","public","CTChartSpace","getCTChartSpace","(",")","{","return","chartSpace",";"],"docstring_tokens":["Return","the","underlying","CTChartSpace","bean,","the","root","element","of","the","Chart","part"],"prompt_tokens":[]}
{"code_tokens":["@Internal\n","public","CTChart","getCTChart","(",")","{","return","chartSpace",".","getChart","(",")",";"],"docstring_tokens":["Return","the","underlying","CTChart","bean,","within","the","Chart","Space"],"prompt_tokens":[]}
{"code_tokens":["@Internal\n","protected","CTPlotArea","getCTPlotArea","(",")","{","return","getCTChart","(",")",".","getPlotArea","(",")",";"],"docstring_tokens":["Return","the","underlying","CTPlotArea","bean,","within","the","Chart"],"prompt_tokens":[]}
{"code_tokens":["public","void","clear","(",")","{","axes",".","clear","(",")",";","seriesCount","=","0",";","if","(","workbook","!=","null",")","{","workbook",".","removeSheetAt","(","0",")",";","workbook",".","createSheet","(",")",";","}","getCTChart","(",")",".","set","(","CTChart",".","Factory",".","newInstance","(",")",")",";","getCTChart","(",")",".","addNewPlotArea","(",")",";"],"docstring_tokens":["Clear","all","properties,","as","if","a","new","instance","had","just","been","created"],"prompt_tokens":[]}
{"code_tokens":["public","void","removeTitle","(",")","{","setAutoTitleDeleted","(","true",")",";"],"docstring_tokens":["Remove","the","chart","title"],"prompt_tokens":[]}
{"code_tokens":["@Beta\n","public","XDDFTextBody","getFormattedTitle","(",")","{","if","(","!getCTChart","(",")",".","isSetTitle","(",")",")","{","return","null",";","}","return","new","XDDFTitle","(","this,","getCTChart","(",")",".","getTitle","(",")",")",".","getBody","(",")",";"],"docstring_tokens":["Get","the","chart","title","body","if","there","is","one,","i.e"],"prompt_tokens":[]}
{"code_tokens":["public","XDDFChartData","createData","(","ChartTypes","type,","XDDFChartAxis","category,","XDDFValueAxis","values",")","{","Map<Long,","XDDFChartAxis>","categories","=","null",";","Map<Long,","XDDFValueAxis>","mapValues","=","null",";","\n\n","if","(","ChartTypes",".","PIE","!=","type","&&","ChartTypes",".","PIE3D","!=","type","&&","ChartTypes",".","DOUGHNUT","!=","type",")","{","categories","=","Collections",".","singletonMap","(","category",".","getId","(",")",",","category",")",";","mapValues","=","Collections",".","singletonMap","(","values",".","getId","(",")",",","values",")",";","}","\n\n","final","CTPlotArea","plotArea","=","getCTPlotArea","(",")",";","switch","(","type",")","{","case","AREA:\n","return","new","XDDFAreaChartData","(","this,","plotArea",".","addNewAreaChart","(",")",",","categories,","mapValues",")",";","case","AREA3D:\n","return","new","XDDFArea3DChartData","(","this,","plotArea",".","addNewArea3DChart","(",")",",","categories,","mapValues",")",";","case","BAR:\n","return","new","XDDFBarChartData","(","this,","plotArea",".","addNewBarChart","(",")",",","categories,","mapValues",")",";","case","BAR3D:\n","return","new","XDDFBar3DChartData","(","this,","plotArea",".","addNewBar3DChart","(",")",",","categories,","mapValues",")",";","case","DOUGHNUT:\n","return","new","XDDFDoughnutChartData","(","this,","plotArea",".","addNewDoughnutChart","(",")",")",";","case","LINE:\n","return","new","XDDFLineChartData","(","this,","plotArea",".","addNewLineChart","(",")",",","categories,","mapValues",")",";","case","LINE3D:\n","return","new","XDDFLine3DChartData","(","this,","plotArea",".","addNewLine3DChart","(",")",",","categories,","mapValues",")",";","case","PIE:\n","return","new","XDDFPieChartData","(","this,","plotArea",".","addNewPieChart","(",")",")",";","case","PIE3D:\n","return","new","XDDFPie3DChartData","(","this,","plotArea",".","addNewPie3DChart","(",")",")",";","case","RADAR:\n","return","new","XDDFRadarChartData","(","this,","plotArea",".","addNewRadarChart","(",")",",","categories,","mapValues",")",";","case","SCATTER:\n","return","new","XDDFScatterChartData","(","this,","plotArea",".","addNewScatterChart","(",")",",","categories,","mapValues",")",";","case","SURFACE:\n","return","new","XDDFSurfaceChartData","(","this,","plotArea",".","addNewSurfaceChart","(",")",",","categories,","mapValues",")",";","case","SURFACE3D:\n","return","new","XDDFSurface3DChartData","(","this,","plotArea",".","addNewSurface3DChart","(",")",",","categories,","mapValues",")",";","//","TODO","repeat","above","code","for","missing","charts:","Bubble,","OfPie","and","Stock\n","default:\n","return","null",";","}"],"docstring_tokens":["this","method","will","return","specified","chart","data","with","category","and","series","values"],"prompt_tokens":[]}
{"code_tokens":["public","void","saveWorkbook","(","XSSFWorkbook","workbook",")","throws","IOException,","InvalidFormatException","{","PackagePart","worksheetPart","=","getWorksheetPart","(",")",";","if","(","worksheetPart","==","null",")","{","POIXMLRelation","chartWorkbookRelation","=","getChartWorkbookRelation","(",")",";","POIXMLFactory","chartFactory","=","getChartFactory","(",")",";","if","(","chartWorkbookRelation","!=","null","&&","chartFactory","!=","null",")","{","worksheetPart","=","createWorksheetPart","(","chartWorkbookRelation,","chartFactory",")",";","}","else","{","throw","new","InvalidFormatException","(","\"unable","to","determine","chart","relations\"",")",";","}","}","try","(","OutputStream","xlsOut","=","worksheetPart",".","getOutputStream","(",")",")","{","setWorksheetPartCommitted","(",")",";","workbook",".","write","(","xlsOut",")",";","}"],"docstring_tokens":["this","method","write","the","XSSFWorkbook","object","data","into","embedded","excel","file"],"prompt_tokens":[]}
{"code_tokens":["private","XSSFRow","getRow","(","XSSFSheet","sheet,","int","index",")","{","XSSFRow","row","=","sheet",".","getRow","(","index",")",";","if","(","row","==","null",")","{","return","sheet",".","createRow","(","index",")",";","}","else","{","return","row",";","}"],"docstring_tokens":["this","method","return","row","on","given","index","if","row","is","null","then","create","new","row"],"prompt_tokens":[]}
{"code_tokens":["private","XSSFCell","getCell","(","XSSFRow","row,","int","index",")","{","XSSFCell","cell","=","row",".","getCell","(","index",")",";","if","(","cell","==","null",")","{","return","row",".","createCell","(","index",")",";","}","else","{","return","cell",";","}"],"docstring_tokens":["this","method","return","cell","on","given","index","if","cell","is","null","then","create","new","cell"],"prompt_tokens":[]}
{"code_tokens":["public","void","importContent","(","XDDFChart","other",")","{","getCTChartSpace","(",")",".","set","(","other",".","getCTChartSpace","(",")",")",";"],"docstring_tokens":["import","content","from","other","chart","to","created","chart"],"prompt_tokens":[]}
{"code_tokens":["public","void","replaceReferences","(","XSSFSheet","newSheet",")","{","for","(","XDDFChartData","data",":","getChartSeries","(",")",")","{","for","(","XDDFChartData",".","Series","series",":","data",".","series",")","{","XDDFDataSource<?>","newCategory","=","series",".","categoryData",";","XDDFNumericalDataSource<?","extends","Number>","newValues","=","series",".","valuesData",";","try","{","if","(","series",".","categoryData","!=","null","&&","series",".","categoryData",".","isReference","(",")",")","{","String","ref","=","series",".","categoryData",".","getDataRangeReference","(",")",";","CellRangeAddress","rangeAddress","=","CellRangeAddress",".","valueOf","(","ref",".","substring","(","ref",".","indexOf","(","'!'",")","+","1",")",")",";","newCategory","=","series",".","categoryData",".","isNumeric","(",")","?","XDDFDataSourcesFactory",".","fromNumericCellRange","(","newSheet,","rangeAddress",")",":","XDDFDataSourcesFactory",".","fromStringCellRange","(","newSheet,","rangeAddress",")",";","if","(","newCategory",".","isNumeric","(",")",")","{","(","(","XDDFNumericalDataSource<?","extends","Number>",")","newCategory",")",".","setFormatCode","(","series",".","categoryData",".","getFormatCode","(",")",")",";","}","}","if","(","series",".","valuesData!=","null","&&","series",".","valuesData",".","isReference","(",")",")","{","String","ref","=","series",".","valuesData",".","getDataRangeReference","(",")",";","CellRangeAddress","rangeAddress","=","CellRangeAddress",".","valueOf","(","ref",".","substring","(","ref",".","indexOf","(","'!'",")","+","1",")",")",";","newValues","=","XDDFDataSourcesFactory",".","fromNumericCellRange","(","newSheet,","rangeAddress",")",";","newValues",".","setFormatCode","(","series",".","valuesData",".","getFormatCode","(",")",")",";","}","}","catch","(","IllegalArgumentException","iae",")","{","//","keep","old","values","when","cell","range","cannot","be","parsed\n","}","series",".","replaceData","(","newCategory,","newValues",")",";","series",".","plot","(",")",";","}","}"],"docstring_tokens":["Replace","references","to","the","sheet","name","in","the","data","supporting","the","chart"],"prompt_tokens":[]}
{"code_tokens":["//","Keep","this","code","in","sync","with","{","@link","RowShifter#shiftMergedRegions","}","@Override\n","public","List<CellRangeAddress>","shiftMergedRegions","(","int","startColumn,","int","endColumn,","int","n",")","{","List<CellRangeAddress>","shiftedRegions","=","new","ArrayList<>","(",")",";","Set<Integer>","removedIndices","=","new","HashSet<>","(",")",";","//move","merged","regions","completely","if","they","fall","within","the","new","region","boundaries","when","they","are","shifted\n","int","size","=","sheet",".","getNumMergedRegions","(",")",";","for","(","int","i","=","0",";","i","<","size",";","i++",")","{","CellRangeAddress","merged","=","sheet",".","getMergedRegion","(","i",")",";","\n\n","//","remove","merged","region","that","are","replaced","by","the","shifting,\n","//","i",".","e",".","where","the","area","includes","something","in","the","overwritten","area\n","if","(","removalNeeded","(","merged,","startColumn,","endColumn,","n",")",")","{","removedIndices",".","add","(","i",")",";","continue",";","}","\n\n","boolean","inStart","=","(","merged",".","getFirstColumn","(",")",">=","startColumn","||","merged",".","getLastColumn","(",")",">=","startColumn",")",";","boolean","inEnd","=","(","merged",".","getFirstColumn","(",")","<=","endColumn","||","merged",".","getLastColumn","(",")","<=","endColumn",")",";","\n\n","//don't","check","if","it's","not","within","the","shifted","area\n","if","(","!inStart","||","!inEnd",")","{","continue",";","}","\n\n","//only","shift","if","the","region","outside","the","shifted","columns","is","not","merged","too\n","if","(","!merged",".","containsColumn","(","startColumn","-","1",")","&&","!merged",".","containsColumn","(","endColumn","+","1",")",")","{","merged",".","setFirstColumn","(","merged",".","getFirstColumn","(",")","+","n",")",";","merged",".","setLastColumn","(","merged",".","getLastColumn","(",")","+","n",")",";","//have","to","remove/add","it","back\n","shiftedRegions",".","add","(","merged",")",";","removedIndices",".","add","(","i",")",";","}","}","if","(","!removedIndices",".","isEmpty","(",")",")","{","sheet",".","removeMergedRegions","(","removedIndices",")",";","}","\n\n","//read","so","it","doesn't","get","shifted","again\n","for","(","CellRangeAddress","region",":","shiftedRegions",")","{","sheet",".","addMergedRegion","(","region",")",";","}","return","shiftedRegions",";"],"docstring_tokens":["Shifts,","grows,","or","shrinks","the","merged","regions","due","to","a","column","shift"],"prompt_tokens":[]}
{"code_tokens":["public","void","updateSheet","(",")","{","if","(","cachedFontInfo","!=","null",")","{","for","(","FontGroup","tt",":","FontGroup",".","values","(",")",")","{","setFontInfo","(","cachedFontInfo[tt",".","ordinal","(",")","],","tt",")",";","}","cachedFontInfo","=","null",";","}"],"docstring_tokens":["Supply","the","SlideShow","we","belong","to"],"prompt_tokens":[]}
{"code_tokens":["public","double","getMargin","(",")","{","return","field_1_margin",";"],"docstring_tokens":["Get","the","margin","field","for","the","BottomMargin","record"],"prompt_tokens":[]}
{"code_tokens":["public","void","setMargin","(","double","field_1_margin",")","{","this",".","field_1_margin","=","field_1_margin",";"],"docstring_tokens":["Set","the","margin","field","for","the","BottomMargin","record"],"prompt_tokens":[]}
{"code_tokens":["public","int","numStyles","(",")","{","return","_styleDescriptions",".","length",";"],"docstring_tokens":["Gets","the","number","of","styles","in","the","style","sheet"],"prompt_tokens":[]}
{"code_tokens":["public","short","getPointNumber","(",")","{","return","field_1_pointNumber",";"],"docstring_tokens":["Get","the","point","number","field","for","the","DataFormat","record"],"prompt_tokens":[]}
{"code_tokens":["public","void","setPointNumber","(","short","field_1_pointNumber",")","{","this",".","field_1_pointNumber","=","field_1_pointNumber",";"],"docstring_tokens":["Set","the","point","number","field","for","the","DataFormat","record"],"prompt_tokens":[]}
{"code_tokens":["public","short","getSeriesIndex","(",")","{","return","field_2_seriesIndex",";"],"docstring_tokens":["Get","the","series","index","field","for","the","DataFormat","record"],"prompt_tokens":[]}
{"code_tokens":["public","void","setSeriesIndex","(","short","field_2_seriesIndex",")","{","this",".","field_2_seriesIndex","=","field_2_seriesIndex",";"],"docstring_tokens":["Set","the","series","index","field","for","the","DataFormat","record"],"prompt_tokens":[]}
{"code_tokens":["public","short","getSeriesNumber","(",")","{","return","field_3_seriesNumber",";"],"docstring_tokens":["Get","the","series","number","field","for","the","DataFormat","record"],"prompt_tokens":[]}
{"code_tokens":["public","void","setSeriesNumber","(","short","field_3_seriesNumber",")","{","this",".","field_3_seriesNumber","=","field_3_seriesNumber",";"],"docstring_tokens":["Set","the","series","number","field","for","the","DataFormat","record"],"prompt_tokens":[]}
{"code_tokens":["public","short","getFormatFlags","(",")","{","return","field_4_formatFlags",";"],"docstring_tokens":["Get","the","format","flags","field","for","the","DataFormat","record"],"prompt_tokens":[]}
{"code_tokens":["public","void","setFormatFlags","(","short","field_4_formatFlags",")","{","this",".","field_4_formatFlags","=","field_4_formatFlags",";"],"docstring_tokens":["Set","the","format","flags","field","for","the","DataFormat","record"],"prompt_tokens":[]}
{"code_tokens":["public","boolean","isUseExcel4Colors","(",")","{","return","useExcel4Colors",".","isSet","(","field_4_formatFlags",")",";"],"docstring_tokens":["set","true","to","use","excel","4","colors"],"prompt_tokens":[]}
{"code_tokens":["private","static","ObjectProtectRecord","createObjectProtect","(",")","{","ObjectProtectRecord","retval","=","new","ObjectProtectRecord","(",")",";","retval",".","setProtect","(","false",")",";","return","retval",";"],"docstring_tokens":["creates","an","ObjectProtect","record","with","protect","set","to","false"],"prompt_tokens":[]}
{"code_tokens":["private","static","ScenarioProtectRecord","createScenarioProtect","(",")","{","ScenarioProtectRecord","retval","=","new","ScenarioProtectRecord","(",")",";","retval",".","setProtect","(","false",")",";","return","retval",";"],"docstring_tokens":["creates","a","ScenarioProtect","record","with","protect","set","to","false"],"prompt_tokens":[]}
{"code_tokens":["public","int","getRectX1","(",")","{","return","field_1_rectX1",";"],"docstring_tokens":["The","starting","top-left","coordinate","of","child","records"],"prompt_tokens":[]}
{"code_tokens":["public","void","setRectX1","(","int","x1",")","{","this",".","field_1_rectX1","=","x1",";"],"docstring_tokens":["The","top-left","coordinate","of","child","records"],"prompt_tokens":[]}
{"code_tokens":["public","void","setRectY1","(","int","y1",")","{","this",".","field_2_rectY1","=","y1",";"],"docstring_tokens":["The","top-left","y","coordinate","of","child","records"],"prompt_tokens":[]}
{"code_tokens":["public","int","getRectX2","(",")","{","return","field_3_rectX2",";"],"docstring_tokens":["The","bottom-right","x","coordinate","of","child","records"],"prompt_tokens":[]}
{"code_tokens":["public","int","getRectY2","(",")","{","return","field_4_rectY2",";"],"docstring_tokens":["The","bottom-right","y","coordinate","of","child","records"],"prompt_tokens":[]}
{"code_tokens":["@Test\n","protected","void","bug22720","(",")","throws","IOException","{","try","(","Workbook","wb","=","_testDataProvider",".","createWorkbook","(",")",")","{","wb",".","createSheet","(","\"TEST\"",")",";","Sheet","template","=","wb",".","getSheetAt","(","0",")",";","\n\n","assertEquals","(","0,","template",".","addMergedRegion","(","new","CellRangeAddress","(","0,","1,","0,","2",")",")",")",";","assertEquals","(","1,","template",".","addMergedRegion","(","new","CellRangeAddress","(","2,","3,","0,","2",")",")",")",";","\n\n","Sheet","clone","=","wb",".","cloneSheet","(","0",")",";","int","originalMerged","=","template",".","getNumMergedRegions","(",")",";","assertEquals","(","2,","originalMerged,","\"2","merged","regions\"",")",";","\n\n","//remove","merged","regions","from","clone\n","for","(","int","i","=","template",".","getNumMergedRegions","(",")","-","1",";","i",">=","0",";","i--",")","{","clone",".","removeMergedRegion","(","i",")",";","}","\n\n","assertEquals","(","originalMerged,","template",".","getNumMergedRegions","(",")",",","\"Original","Sheet's","Merged","Regions","were","removed\"",")",";","//check","if","template's","merged","regions","are","OK\n","if","(","template",".","getNumMergedRegions","(",")",">","0",")","{","//","fetch","the","first","merged","region",".",".",".","EXCEPTION","OCCURS","HERE\n","template",".","getMergedRegion","(","0",")",";","}","}"],"docstring_tokens":["Merged","regions","were","being","removed","from","the","parent","in","cloned","sheets"],"prompt_tokens":[]}
{"code_tokens":["@Test\n","void","bug15353","(",")","throws","IOException","{","String","hyperlinkF","=","\"HYPERLINK","(","\\\"http://google",".","com\\\",\\\"Google\\\"",")","\"",";","\n\n","try","(","Workbook","wb1","=","_testDataProvider",".","createWorkbook","(",")",")","{","Sheet","sheet","=","wb1",".","createSheet","(","\"My","sheet\"",")",";","\n\n","Row","row","=","sheet",".","createRow","(","0",")",";","Cell","cell","=","row",".","createCell","(","0",")",";","cell",".","setCellFormula","(","hyperlinkF",")",";","\n\n","assertEquals","(","hyperlinkF,","cell",".","getCellFormula","(",")",")",";","\n\n","try","(","Workbook","wb2","=","_testDataProvider",".","writeOutAndReadBack","(","wb1",")",")","{","sheet","=","wb2",".","getSheet","(","\"My","Sheet\"",")",";","row","=","sheet",".","getRow","(","0",")",";","cell","=","row",".","getCell","(","0",")",";","\n\n","assertEquals","(","hyperlinkF,","cell",".","getCellFormula","(",")",")",";","}","}"],"docstring_tokens":["Test","hyperlinks","open","resulting","file","in","excel,","and","check","that","there","is","a","link","to","Google"],"prompt_tokens":[]}
{"code_tokens":["protected","ShapeVisitorAcceptor","getAcceptor","(",")","{","return","new","ShapeVisitorAcceptor","(",")","{","@Override\n","public","boolean","accept","(","XDGFShape","shape",")","{","return","!shape",".","isDeleted","(",")",";","}","}",";"],"docstring_tokens":["Is","only","called","on","construction","of","the","visitor,","allows","mixing","visitors","and","acceptors"],"prompt_tokens":[]}
{"code_tokens":["\n\n","public","void","setWidth","(","short","w",")","{","field_3_width","=","w",";"],"docstring_tokens":["set","the","width","of","the","window"],"prompt_tokens":[]}
{"code_tokens":["\n\n","public","void","setHeight","(","short","h",")","{","field_4_height","=","h",";"],"docstring_tokens":["set","teh","height","of","the","window"],"prompt_tokens":[]}
{"code_tokens":["\n\n","public","void","setHidden","(","boolean","ishidden",")","{","field_5_options","=","hidden",".","setShortBoolean","(","field_5_options,","ishidden",")",";"],"docstring_tokens":["set","whether","the","window","is","hidden","or","not"],"prompt_tokens":[]}
{"code_tokens":["\n\n","public","void","setIconic","(","boolean","isiconic",")","{","field_5_options","=","iconic",".","setShortBoolean","(","field_5_options,","isiconic",")",";"],"docstring_tokens":["set","whether","the","window","has","been","iconized","or","not"],"prompt_tokens":[]}
{"code_tokens":["\n\n","public","short","getWidth","(",")","{","return","field_3_width",";"],"docstring_tokens":["get","the","width","of","the","window"],"prompt_tokens":[]}
{"code_tokens":["\n\n","public","short","getHeight","(",")","{","return","field_4_height",";"],"docstring_tokens":["get","the","height","of","the","window"],"prompt_tokens":[]}
{"code_tokens":["\n\n","public","boolean","getHidden","(",")","{","return","hidden",".","isSet","(","field_5_options",")",";"],"docstring_tokens":["get","whether","the","window","is","hidden","or","not"],"prompt_tokens":[]}
{"code_tokens":["\n\n","public","boolean","getIconic","(",")","{","return","iconic",".","isSet","(","field_5_options",")",";"],"docstring_tokens":["get","whether","the","window","has","been","iconized","or","not"],"prompt_tokens":[]}
{"code_tokens":["public","static","Ptg[]","parse","(","String","formula,","HSSFWorkbook","workbook",")","throws","FormulaParseException","{","return","parse","(","formula,","workbook,","FormulaType",".","CELL",")",";"],"docstring_tokens":["Convenience","method","for","parsing","cell","formulas"],"prompt_tokens":[]}
{"code_tokens":["public","int","getDxaGoal","(",")","{","return","_picf",".","getDxaGoal","(",")",";"],"docstring_tokens":["Gets","the","initial","width","of","the","picture,","in","twips,","prior","to","cropping","or","scaling"],"prompt_tokens":[]}
{"code_tokens":["public","int","getDyaGoal","(",")","{","return","_picf",".","getDyaGoal","(",")",";"],"docstring_tokens":["Gets","the","initial","height","of","the","picture,","in","twips,","prior","to","cropping","or","scaling"],"prompt_tokens":[]}
{"code_tokens":["public","int","getHeight","(",")","{","if","(","height","==","-1",")","{","fillWidthHeight","(",")",";","}","return","height",";"],"docstring_tokens":["returns","pixel","height","of","the","picture","or","-1","if","dimensions","determining","was","failed"],"prompt_tokens":[]}
{"code_tokens":["public","int","getWidth","(",")","{","if","(","width","==","-1",")","{","fillWidthHeight","(",")",";","}","return","width",";"],"docstring_tokens":["returns","pixel","width","of","the","picture","or","-1","if","dimensions","determining","was","failed"],"prompt_tokens":[]}
{"code_tokens":["public","String","getDescription","(",")","{","for","(","EscherRecord","escherRecord",":","_picfAndOfficeArtData",".","getShape","(",")",")","{","if","(","escherRecord","instanceof","EscherOptRecord",")","{","EscherOptRecord","escherOptRecord","=","(","EscherOptRecord",")","escherRecord",";","for","(","EscherProperty","property",":","escherOptRecord",".","getEscherProperties","(",")",")","{","if","(","EscherPropertyTypes",".","GROUPSHAPE__DESCRIPTION",".","propNumber","==","property",".","getPropertyNumber","(",")",")","{","byte[]","complexData","=","(","(","EscherComplexProperty",")","property",")",".","getComplexData","(",")",";","return","StringUtil",".","getFromUnicodeLE","(","complexData,0,complexData",".","length/2-1",")",";","}","}","}","}","\n\n","return","null",";"],"docstring_tokens":["returns","the","description","stored","in","the","alternative","text"],"prompt_tokens":[]}
{"code_tokens":["@Internal\n","CTComment","getCTComment","(","CellAddress","cellRef",")","{","//","Create","the","cache","if","needed\n","prepareCTCommentCache","(",")",";","\n\n","//","Return","the","comment,","or","null","if","not","known\n","return","commentRefs",".","get","(","cellRef",")",";"],"docstring_tokens":["Get","the","underlying","CTComment","xmlbean","for","a","comment","located","at","cellRef,","if","it","exists"],"prompt_tokens":[]}
{"code_tokens":["private","int","addNewAuthor","(","String","author",")","{","int","index","=","comments",".","getAuthors","(",")",".","sizeOfAuthorArray","(",")",";","comments",".","getAuthors","(",")",".","insertAuthor","(","index,","author",")",";","return","index",";"],"docstring_tokens":["Add","a","new","author","to","the","CommentsTable"],"prompt_tokens":[]}
{"code_tokens":["public","final","void","tryToDeleteArrayFormula","(","String","message",")","{","assert","isPartOfArrayFormulaGroup","(",")",";","\n\n","CellRangeAddress","arrayFormulaRange","=","getArrayFormulaRange","(",")",";","if","(","arrayFormulaRange",".","getNumberOfCells","(",")",">","1",")","{","if","(","message","==","null",")","{","message","=","\"Cell","\"","+","new","CellReference","(","this",")",".","formatAsString","(",")","+","\"","is","part","of","a","multi-cell","array","formula",".","\"","+\n","\"You","cannot","change","part","of","an","array",".","\"",";","}","throw","new","IllegalStateException","(","message",")",";","}","//un-register","the","single-cell","array","formula","from","the","parent","sheet","through","public","interface\n","getRow","(",")",".","getSheet","(",")",".","removeArrayFormula","(","this",")",";"],"docstring_tokens":["Called","when","this","an","array","formula","in","this","cell","is","deleted"],"prompt_tokens":[]}
{"code_tokens":["public","static","boolean","isRowWithinRange","(","String","rowStr,","SpreadsheetVersion","ssVersion",")","{","final","long","rowNum","=","Long",".","parseLong","(","rowStr",")","-","1",";","if","(","rowNum",">","Integer",".","MAX_VALUE",")","{","return","false",";","}","return","isRowWithinRange","(","Math",".","toIntExact","(","rowNum",")",",","ssVersion",")",";"],"docstring_tokens":["Determines","whether","rowStr","is","a","valid","row","number","for","a","given","SpreadsheetVersion"],"prompt_tokens":[]}
{"code_tokens":["private","static","CellRefParts","separateRefParts","(","String","reference",")","{","int","plingPos","=","reference",".","lastIndexOf","(","SHEET_NAME_DELIMITER",")",";","final","String","sheetName","=","parseSheetName","(","reference,","plingPos",")",";","String","cell","=","reference",".","substring","(","plingPos+1",")",".","toUpperCase","(","Locale",".","ROOT",")",";","Matcher","matcher","=","CELL_REF_PATTERN",".","matcher","(","cell",")",";","if","(","!matcher",".","matches","(",")",")","{","throw","new","IllegalArgumentException","(","\"Invalid","CellReference:","\"","+","reference",")",";","}","String","col","=","matcher",".","group","(","1",")",";","String","row","=","matcher",".","group","(","2",")",";","\n\n","return","new","CellRefParts","(","sheetName,","row,","col",")",";"],"docstring_tokens":["Separates","the","sheet","name,","row,","and","columns","from","a","cell","reference","string"],"prompt_tokens":[]}
{"code_tokens":["private","boolean","processRecord","(","org",".","apache",".","poi",".","hssf",".","record",".","Record","record",")","{","if","(","!isSidIncluded","(","record",".","getSid","(",")",")",")","{","return","true",";","}","return","_listener",".","processRecord","(","record",")",";"],"docstring_tokens":["sends","the","record","event","to","all","registered","listeners"],"prompt_tokens":[]}
{"code_tokens":["public","void","processRecords","(","InputStream","in",")","throws","RecordFormatException","{","Record","last_record","=","null",";","\n\n","RecordInputStream","recStream","=","new","RecordInputStream","(","in",")",";","\n\n","while","(","recStream",".","hasNextRecord","(",")",")","{","recStream",".","nextRecord","(",")",";","Record[]","recs","=","RecordFactory",".","createRecord","(","recStream",")",";","//","handle","MulRK","records\n","if","(","recs",".","length",">","1",")","{","for","(","org",".","apache",".","poi",".","hssf",".","record",".","Record","rec",":","recs",")","{","if","(","last_record","!=","null",")","{","if","(","!processRecord","(","last_record",")",")","{","return",";","}","}","last_record","=","rec",";","//","do","to","keep","the","algorithm","homogeneous",".",".",".","you","can't\n","}","//","actually","continue","a","number","record","anyhow",".","}","else","{","Record","record","=","recs[","0","]",";","\n\n","if","(","record","!=","null",")","{","if","(","last_record","!=","null",")","{","if","(","!processRecord","(","last_record",")",")","{","return",";","}","}","last_record","=","record",";","}","}","}","\n\n","if","(","last_record","!=","null",")","{","processRecord","(","last_record",")",";","}"],"docstring_tokens":["Create","an","array","of","records","from","an","input","stream"],"prompt_tokens":[]}
{"code_tokens":["\n\n","public","void","setTopColGutter","(","short","gut",")","{","field_2_top_col_gutter","=","gut",";"],"docstring_tokens":["set","the","size","of","the","gutter","that","appears","at","the","above","the","columns"],"prompt_tokens":[]}
{"code_tokens":["\n\n","public","void","setRowLevelMax","(","short","max",")","{","field_3_row_level_max","=","max",";"],"docstring_tokens":["set","the","maximum","outline","level","for","the","row","gutter"],"prompt_tokens":[]}
{"code_tokens":["public","static","String","format","(","String","rawSheetName",")","{","StringBuilder","sb","=","new","StringBuilder","(","(","rawSheetName","==","null","?","0",":","rawSheetName",".","length","(",")",")","+","2",")",";","appendFormat","(","sb,","rawSheetName",")",";","return","sb",".","toString","(",")",";"],"docstring_tokens":["Used","to","format","sheet","names","as","they","would","appear","in","cell","formula","expressions"],"prompt_tokens":[]}
{"code_tokens":["public","static","void","main","(","String[]","args",")","throws","IOException,","OpenXML4JException","{","UpdateEmbeddedDoc","ued","=","new","UpdateEmbeddedDoc","(","args[0]",")",";","ued",".","updateEmbeddedDoc","(",")",";","ued",".","checkUpdatedDoc","(",")",";"],"docstring_tokens":["Code","to","test","updating","of","the","embedded","Excel","workbook"],"prompt_tokens":[]}
{"code_tokens":["public","EscherDgRecord","createDgRecord","(",")","{","EscherDgRecord","dg","=","new","EscherDgRecord","(",")",";","dg",".","setRecordId","(","EscherDgRecord",".","RECORD_ID",")",";","short","dgId","=","findNewDrawingGroupId","(",")",";","dg",".","setOptions","(","(","short",")","(","dgId","<<","4",")",")",";","dg",".","setNumShapes","(","0",")",";","dg",".","setLastMSOSPID","(","-1",")",";","drawingGroups",".","add","(","dg",")",";","dgg",".","addCluster","(","dgId,","0",")",";","dgg",".","setDrawingsSaved","(","dgg",".","getDrawingsSaved","(",")","+","1",")",";","return","dg",";"],"docstring_tokens":["Creates","a","new","drawing","group"],"prompt_tokens":[]}
{"code_tokens":["public","void","setSvgImage","(","XSLFPictureData","svgPic",")","{","CTBlip","blip","=","getBlip","(",")",";","CTOfficeArtExtensionList","extLst","=","blip",".","isSetExtLst","(",")","?","blip",".","getExtLst","(",")",":","blip",".","addNewExtLst","(",")",";","\n\n","final","int","bitmapId","=","getExt","(","extLst,","BITMAP_URI",")",";","CTOfficeArtExtension","extBitmap",";","if","(","bitmapId","==","-1",")","{","extBitmap","=","extLst",".","addNewExt","(",")",";","extBitmap",".","setUri","(","BITMAP_URI",")",";","XmlCursor","cur","=","extBitmap",".","newCursor","(",")",";","try","{","cur",".","toEndToken","(",")",";","cur",".","beginElement","(","new","QName","(","MS_DML_NS,","\"useLocalDpi\",","\"a14\"",")",")",";","cur",".","insertNamespace","(","\"a14\",","MS_DML_NS",")",";","cur",".","insertAttributeWithValue","(","\"val\",","\"0\"",")",";","}","finally","{","cur",".","dispose","(",")",";","}","}","\n\n","final","int","svgId","=","getExt","(","extLst,","SVG_URI",")",";","if","(","svgId","!=","-1",")","{","extLst",".","removeExt","(","svgId",")",";","}","\n\n","String","svgRelId","=","getSheet","(",")",".","getRelationId","(","svgPic",")",";","if","(","svgRelId","==","null",")","{","svgRelId","=","getSheet","(",")",".","addRelation","(","null,","XSLFRelation",".","IMAGE_SVG,","svgPic",")",".","getRelationship","(",")",".","getId","(",")",";","}","\n\n","CTOfficeArtExtension","svgBitmap","=","extLst",".","addNewExt","(",")",";","svgBitmap",".","setUri","(","SVG_URI",")",";","XmlCursor","cur","=","svgBitmap",".","newCursor","(",")",";","try","{","cur",".","toEndToken","(",")",";","cur",".","beginElement","(","new","QName","(","MS_SVG_NS,","\"svgBlip\",","\"asvg\"",")",")",";","cur",".","insertNamespace","(","\"asvg\",","MS_SVG_NS",")",";","cur",".","insertAttributeWithValue","(","EMBED_TAG,","svgRelId",")",";","}","finally","{","cur",".","dispose","(",")",";","}"],"docstring_tokens":["Add","a","SVG","image","reference"],"prompt_tokens":[]}
{"code_tokens":["public","int","getFormatIndex","(","CellValueRecordInterface","cell",")","{","ExtendedFormatRecord","xfr","=","_xfRecords",".","get","(","cell",".","getXFIndex","(",")",")",";","if","(","xfr","==","null",")","{","LOG",".","atError","(",")",".","log","(","\"Cell","{","}",",","{","}","uses","XF","with","index","{","}",",","but","we","don't","have","that\",","box","(","cell",".","getRow","(",")",")",",box","(","cell",".","getColumn","(",")",")",",box","(","cell",".","getXFIndex","(",")",")",")",";","return","-1",";","}","return","xfr",".","getFormatIndex","(",")",";"],"docstring_tokens":["Returns","the","index","of","the","format","string,","used","by","your","cell,","or","-1","if","none","found"],"prompt_tokens":[]}
{"code_tokens":["private","static","int","performBinarySearch","(","ValueVector","vector,","LookupValueComparer","lookupComparer",")","{","//","both","low","and","high","indexes","point","to","values","assumed","too","low","and","too","high",".","BinarySearchIndexes","bsi","=","new","BinarySearchIndexes","(","vector",".","getSize","(",")",")",";","\n\n","while","(","true",")","{","int","midIx","=","bsi",".","getMidIx","(",")",";","\n\n","if","(","midIx","<","0",")","{","return","bsi",".","getLowIx","(",")",";","}","CompareResult","cr","=","lookupComparer",".","compareTo","(","vector",".","getItem","(","midIx",")",")",";","if","(","cr",".","isTypeMismatch","(",")",")","{","int","newMidIx","=","handleMidValueTypeMismatch","(","lookupComparer,","vector,","bsi,","midIx,","false",")",";","if","(","newMidIx","<","0",")","{","continue",";","}","midIx","=","newMidIx",";","cr","=","lookupComparer",".","compareTo","(","vector",".","getItem","(","midIx",")",")",";","}","if","(","cr",".","isEqual","(",")",")","{","return","findLastIndexInRunOfEqualValues","(","lookupComparer,","vector,","midIx,","bsi",".","getHighIx","(",")",")",";","}","bsi",".","narrowSearch","(","midIx,","cr",".","isLessThan","(",")",")",";","}"],"docstring_tokens":["Excel","has","funny","behaviour","when","the","some","elements","in","the","search","vector","are","the","wrong","type"],"prompt_tokens":[]}
{"code_tokens":["\n\n","public","int","getRawValue","(","final","int","holder",")","{","return","(","holder","&","_mask",")",";"],"docstring_tokens":["Obtain","the","value","for","the","specified","BitField,","unshifted"],"prompt_tokens":[]}
{"code_tokens":["\n\n","public","int","setValue","(","final","int","holder,","final","int","value",")","{","return","(","holder","&","~_mask",")","|","(","(","value","<<","_shift_count",")","&","_mask",")",";"],"docstring_tokens":["Replace","the","bits","with","new","values"],"prompt_tokens":[]}
{"code_tokens":["\n\n","public","int","setBoolean","(","final","int","holder,","final","boolean","flag",")","{","return","flag","?","set","(","holder",")",":","clear","(","holder",")",";"],"docstring_tokens":["Set","a","boolean","BitField"],"prompt_tokens":[]}
{"code_tokens":["public","boolean","getHCenter","(",")","{","return","(","field_1_hcenter","==","1",")",";"],"docstring_tokens":["get","whether","or","not","to","horizonatally","center","this","sheet"],"prompt_tokens":[]}
{"code_tokens":["public","static","CellRangeAddress","valueOf","(","String","ref",")","{","int","sep","=","ref",".","indexOf","(","':'",")",";","CellReference","a",";","CellReference","b",";","if","(","sep","==","-1",")","{","a","=","new","CellReference","(","ref",")",";","b","=","a",";","}","else","{","a","=","new","CellReference","(","ref",".","substring","(","0,","sep",")",")",";","b","=","new","CellReference","(","ref",".","substring","(","sep","+","1",")",")",";","}","return","new","CellRangeAddress","(","a",".","getRow","(",")",",","b",".","getRow","(",")",",","a",".","getCol","(",")",",","b",".","getCol","(",")",")",";"],"docstring_tokens":["Creates","a","CellRangeAddress","from","a","cell","range","reference","string"],"prompt_tokens":[]}
{"code_tokens":["@Override\n","public","XSSFWorkbook","getWorkbook","(",")","{","return","(","XSSFWorkbook",")","getParent","(",")",";"],"docstring_tokens":["Returns","the","parent","XSSFWorkbook"],"prompt_tokens":[]}
{"code_tokens":["@Override\n","protected","void","onDocumentCreate","(",")","{","worksheet","=","newSheet","(",")",";","initRows","(","worksheet",")",";","columnHelper","=","new","ColumnHelper","(","worksheet",")",";","hyperlinks","=","new","ArrayList<>","(",")",";"],"docstring_tokens":["Initialize","worksheet","data","when","creating","a","new","sheet"],"prompt_tokens":[]}
{"code_tokens":["private","static","CTWorksheet","newSheet","(",")","{","CTWorksheet","worksheet","=","CTWorksheet",".","Factory",".","newInstance","(",")",";","CTSheetFormatPr","ctFormat","=","worksheet",".","addNewSheetFormatPr","(",")",";","ctFormat",".","setDefaultRowHeight","(","DEFAULT_ROW_HEIGHT",")",";","\n\n","CTSheetView","ctView","=","worksheet",".","addNewSheetViews","(",")",".","addNewSheetView","(",")",";","ctView",".","setWorkbookViewId","(","0",")",";","\n\n","worksheet",".","addNewDimension","(",")",".","setRef","(","\"A1\"",")",";","\n\n","worksheet",".","addNewSheetData","(",")",";","\n\n","CTPageMargins","ctMargins","=","worksheet",".","addNewPageMargins","(",")",";","ctMargins",".","setBottom","(","DEFAULT_MARGIN_BOTTOM",")",";","ctMargins",".","setFooter","(","DEFAULT_MARGIN_FOOTER",")",";","ctMargins",".","setHeader","(","DEFAULT_MARGIN_HEADER",")",";","ctMargins",".","setLeft","(","DEFAULT_MARGIN_LEFT",")",";","ctMargins",".","setRight","(","DEFAULT_MARGIN_RIGHT",")",";","ctMargins",".","setTop","(","DEFAULT_MARGIN_TOP",")",";","\n\n","return","worksheet",";"],"docstring_tokens":["Create","a","new","CTWorksheet","instance","with","all","values","set","to","defaults"],"prompt_tokens":[]}
{"code_tokens":["private","void","validateArrayFormulas","(","CellRangeAddress","region",")","{","//","FIXME:","this","may","be","faster","if","it","looped","over","array","formulas","directly","rather","than","looping","over","each","cell","in\n","//","the","region","and","searching","if","that","cell","belongs","to","an","array","formula\n","int","firstRow","=","region",".","getFirstRow","(",")",";","int","firstColumn","=","region",".","getFirstColumn","(",")",";","int","lastRow","=","region",".","getLastRow","(",")",";","int","lastColumn","=","region",".","getLastColumn","(",")",";","//","for","each","cell","in","sheet,","if","cell","belongs","to","an","array","formula,","check","if","merged","region","intersects","array","formula","cells\n","for","(","int","rowIn","=","firstRow",";","rowIn","<=","lastRow",";","rowIn++",")","{","XSSFRow","row","=","getRow","(","rowIn",")",";","if","(","row","==","null",")","{","continue",";","}","\n\n","for","(","int","colIn","=","firstColumn",";","colIn","<=","lastColumn",";","colIn++",")","{","XSSFCell","cell","=","row",".","getCell","(","colIn",")",";","if","(","cell","==","null",")","{","continue",";","}","\n\n","if","(","cell",".","isPartOfArrayFormulaGroup","(",")",")","{","CellRangeAddress","arrayRange","=","cell",".","getArrayFormulaRange","(",")",";","if","(","arrayRange",".","getNumberOfCells","(",")",">","1","&&","region",".","intersects","(","arrayRange",")",")","{","String","msg","=","\"The","range","\"","+","region",".","formatAsString","(",")","+","\"","intersects","with","a","multi-cell","array","formula",".","\"","+\n","\"You","cannot","merge","cells","of","an","array",".","\"",";","throw","new","IllegalStateException","(","msg",")",";","}","}","}","}"],"docstring_tokens":["Verify","that","the","candidate","region","does","not","intersect","with","an","existing","multi-cell","array","formula","in","this","sheet"],"prompt_tokens":[]}
{"code_tokens":["@Override\n","public","void","validateMergedRegions","(",")","{","checkForMergedRegionsIntersectingArrayFormulas","(",")",";","checkForIntersectingMergedRegions","(",")",";"],"docstring_tokens":["Verify","that","merged","regions","do","not","intersect","multi-cell","array","formulas","and","no","merged","regions","intersect","another","merged","region","in","this","sheet"],"prompt_tokens":[]}
{"code_tokens":["@Override\n","public","XSSFDrawing","createDrawingPatriarch","(",")","{","XSSFDrawing","existingDrawing","=","getDrawingPatriarch","(",")",";","if","(","existingDrawing","!=","null",")","{","return","existingDrawing",";","}","\n\n","//","Default","drawingNumber","=","#drawings",".","size","(",")","+","1\n","int","drawingNumber","=","getPackagePart","(",")",".","getPackage","(",")",".","getPartsByContentType","(","XSSFRelation",".","DRAWINGS",".","getContentType","(",")",")",".","size","(",")","+","1",";","drawingNumber","=","getNextPartNumber","(","XSSFRelation",".","DRAWINGS,","drawingNumber",")",";","RelationPart","rp","=","createRelationship","(","XSSFRelation",".","DRAWINGS,","getWorkbook","(",")",".","getXssfFactory","(",")",",","drawingNumber,","false",")",";","XSSFDrawing","drawing","=","rp",".","getDocumentPart","(",")",";","String","relId","=","rp",".","getRelationship","(",")",".","getId","(",")",";","\n\n","//add","CT_Drawing","element","which","indicates","that","this","sheet","contains","drawing","components","built","on","the","drawingML","platform",".","//The","relationship","Id","references","the","part","containing","the","drawingML","definitions",".","CTDrawing","ctDrawing","=","worksheet",".","addNewDrawing","(",")",";","ctDrawing",".","setId","(","relId",")",";","\n\n","//","Return","the","newly","created","drawing\n","return","drawing",";"],"docstring_tokens":["Create","a","new","SpreadsheetML","drawing"],"prompt_tokens":[]}
{"code_tokens":["@Override\n","public","XSSFComment","getCellComment","(","CellAddress","address",")","{","if","(","sheetComments","==","null",")","{","return","null",";","}","\n\n","return","sheetComments",".","findCellComment","(","address",")",";"],"docstring_tokens":["Return","cell","comment","at","row,","column,","if","one","exists"],"prompt_tokens":[]}
{"code_tokens":["@Override\n","public","XSSFHyperlink","getHyperlink","(","CellAddress","addr",")","{","for","(","XSSFHyperlink","hyperlink",":","getHyperlinkList","(",")",")","{","if","(","addr",".","getRow","(",")",">=","hyperlink",".","getFirstRow","(",")","&&","addr",".","getRow","(",")","<=","hyperlink",".","getLastRow","(",")","&&","addr",".","getColumn","(",")",">=","hyperlink",".","getFirstColumn","(",")","&&","addr",".","getColumn","(",")","<=","hyperlink",".","getLastColumn","(",")",")","{","return","hyperlink",";","}","}","return","null",";"],"docstring_tokens":["Get","a","Hyperlink","in","this","sheet","located","in","a","cell","specified","by","{code","addr"],"prompt_tokens":[]}
{"code_tokens":["@Override\n","public","short","getTopRow","(",")","{","final","CTSheetView","dsv","=","getDefaultSheetView","(","false",")",";","final","String","cellRef","=","(","dsv","==","null",")","?","null",":","dsv",".","getTopLeftCell","(",")",";","if","(","cellRef","==","null",")","{","return","0",";","}","return","(","short",")","new","CellReference","(","cellRef",")",".","getRow","(",")",";"],"docstring_tokens":["The","top","row","in","the","visible","view","when","the","sheet","is","first","viewed","after","opening","it","in","a","viewer"],"prompt_tokens":[]}
{"code_tokens":["@Override\n","public","boolean","isColumnBroken","(","int","column",")","{","for","(","int","colBreak",":","getColumnBreaks","(",")",")","{","if","(","colBreak","==","column",")","{","return","true",";","}","}","return","false",";"],"docstring_tokens":["Determines","if","there","is","a","page","break","at","the","indicated","column"],"prompt_tokens":[]}
{"code_tokens":["@Override\n","public","boolean","isColumnHidden","(","int","columnIndex",")","{","CTCol","col","=","columnHelper",".","getColumn","(","columnIndex,","false",")",";","return","col","!=","null","&&","col",".","getHidden","(",")",";"],"docstring_tokens":["Get","the","hidden","state","for","a","given","column"],"prompt_tokens":[]}
{"code_tokens":["@Override\n","public","boolean","isDisplayFormulas","(",")","{","final","CTSheetView","dsv","=","getDefaultSheetView","(","false",")",";","return","dsv","!=","null","&&","dsv",".","getShowFormulas","(",")",";"],"docstring_tokens":["Gets","the","flag","indicating","whether","this","sheet","should","display","formulas"],"prompt_tokens":[]}
{"code_tokens":["@Override\n","public","boolean","isRowBroken","(","int","row",")","{","for","(","int","rowBreak",":","getRowBreaks","(",")",")","{","if","(","rowBreak","==","row",")","{","return","true",";","}","}","return","false",";"],"docstring_tokens":["Tests","if","there","is","a","page","break","at","the","indicated","row"],"prompt_tokens":[]}
{"code_tokens":["@Override\n","public","boolean","getAutobreaks","(",")","{","CTSheetPr","sheetPr","=","getSheetTypeSheetPr","(",")",";","CTPageSetUpPr","psSetup","=","(","sheetPr","==","null","||","!sheetPr",".","isSetPageSetUpPr","(",")",")","?\n","CTPageSetUpPr",".","Factory",".","newInstance","(",")",":","sheetPr",".","getPageSetUpPr","(",")",";","return","psSetup",".","getAutoPageBreaks","(",")",";"],"docstring_tokens":["Flag","indicating","whether","the","sheet","displays","Automatic","Page","Breaks"],"prompt_tokens":[]}
{"code_tokens":["@Override\n","public","void","setDisplayFormulas","(","boolean","show",")","{","final","CTSheetView","dsv","=","getDefaultSheetView","(","true",")",";","assert","(","dsv","!=","null",")",";","dsv",".","setShowFormulas","(","show",")",";"],"docstring_tokens":["Sets","the","flag","indicating","whether","this","sheet","should","display","formulas"],"prompt_tokens":[]}
{"code_tokens":["public","void","removeTable","(","XSSFTable","t",")","{","long","id","=","t",".","getCTTable","(",")",".","getId","(",")",";","Map",".","Entry<String,","XSSFTable>","toDelete","=","null",";","\n\n","for","(","Map",".","Entry<String,","XSSFTable>","entry",":","tables",".","entrySet","(",")",")","{","if","(","entry",".","getValue","(",")",".","getCTTable","(",")",".","getId","(",")","==","id",")","toDelete","=","entry",";","}","if","(","toDelete","!=","null",")","{","removeRelation","(","getRelationById","(","toDelete",".","getKey","(",")",")",",","true",")",";","tables",".","remove","(","toDelete",".","getKey","(",")",")",";","toDelete",".","getValue","(",")",".","onTableDelete","(",")",";","}"],"docstring_tokens":["Remove","table","references","and","relations"],"prompt_tokens":[]}
{"code_tokens":["@Beta\n","public","List<XSSFPivotTable>","getPivotTables","(",")","{","List<XSSFPivotTable>","tables","=","new","ArrayList<>","(",")",";","for","(","XSSFPivotTable","table",":","getWorkbook","(",")",".","getPivotTables","(",")",")","{","if","(","table",".","getParent","(",")","==","this",")","{","tables",".","add","(","table",")",";","}","}","return","tables",";"],"docstring_tokens":["Returns","all","the","pivot","tables","for","this","Sheet"],"prompt_tokens":[]}
{"code_tokens":["public","void","removeColumnBreak","(","int","column",")","{","getColumnBreaksRecord","(",")",".","removeBreak","(","column",")",";"],"docstring_tokens":["Removes","a","page","break","at","the","indicated","column"],"prompt_tokens":[]}
{"code_tokens":["private","static","PrintSetupRecord","createPrintSetup","(",")","{","PrintSetupRecord","retval","=","new","PrintSetupRecord","(",")",";","\n\n","retval",".","setPaperSize","(","(","short",")","1",")",";","retval",".","setScale","(","(","short",")","100",")",";","retval",".","setPageStart","(","(","short",")","1",")",";","retval",".","setFitWidth","(","(","short",")","1",")",";","retval",".","setFitHeight","(","(","short",")","1",")",";","retval",".","setOptions","(","(","short",")","2",")",";","retval",".","setHResolution","(","(","short",")","300",")",";","retval",".","setVResolution","(","(","short",")","300",")",";","retval",".","setHeaderMargin","(","0",".","5",")",";","retval",".","setFooterMargin","(","0",".","5",")",";","retval",".","setCopies","(","(","short",")","1",")",";","return","retval",";"],"docstring_tokens":["creates","the","PrintSetup","Record","and","sets","it","to","defaults","and","marks","it","invalid"],"prompt_tokens":[]}
{"code_tokens":["public","void","removeRowBreak","(","int","row",")","{","if","(","getRowBreaksRecord","(",")",".","getBreaks","(",")",".","length","<","1",")","{","throw","new","IllegalArgumentException","(","\"Sheet","does","not","define","any","row","breaks\"",")",";","}","getRowBreaksRecord","(",")",".","removeBreak","(","(","short",")","row",")",";"],"docstring_tokens":["Removes","a","page","break","at","the","indicated","row"],"prompt_tokens":[]}
{"code_tokens":["public","boolean","isRowBroken","(","int","row",")","{","return","getRowBreaksRecord","(",")",".","getBreak","(","row",")","!=","null",";"],"docstring_tokens":["Queries","if","the","specified","row","has","a","page","break"],"prompt_tokens":[]}
{"code_tokens":["public","boolean","isColumnBroken","(","int","column",")","{","return","getColumnBreaksRecord","(",")",".","getBreak","(","column",")","!=","null",";"],"docstring_tokens":["Queries","if","the","specified","column","has","a","page","break"],"prompt_tokens":[]}
{"code_tokens":["public","void","shiftRowBreaks","(","int","startingRow,","int","endingRow,","int","count",")","{","shiftBreaks","(","getRowBreaksRecord","(",")",",","startingRow,","endingRow,","count",")",";"],"docstring_tokens":["Shifts","the","horizontal","page","breaks","for","the","indicated","count"],"prompt_tokens":[]}
{"code_tokens":["public","void","shiftColumnBreaks","(","short","startingCol,","short","endingCol,","short","count",")","{","shiftBreaks","(","getColumnBreaksRecord","(",")",",","startingCol,","endingCol,","count",")",";"],"docstring_tokens":["Shifts","the","vertical","page","breaks","for","the","indicated","count"],"prompt_tokens":[]}
{"code_tokens":["public","void","setSBATBlockCount","(","final","int","count",")","{","_sbat_count","=","count",";"],"docstring_tokens":["Set","count","of","SBAT","blocks"],"prompt_tokens":[]}
{"code_tokens":["public","boolean","isTrue","(",")","{","return","getPropertyValue","(",")","!=","0",";"],"docstring_tokens":["Whether","this","boolean","property","is","true"],"prompt_tokens":[]}
{"code_tokens":["public","static","int","intersect","(","CellRangeAddress","crA,","CellRangeAddress","crB",")","{","\n\n","int","firstRow","=","crB",".","getFirstRow","(",")",";","int","lastRow","=","crB",".","getLastRow","(",")",";","int","firstCol","=","crB",".","getFirstColumn","(",")",";","int","lastCol","=","crB",".","getLastColumn","(",")",";","\n\n","if","(","gt","(","crA",".","getFirstRow","(",")",",","lastRow",")","||","lt","(","crA",".","getLastRow","(",")",",","firstRow",")","||\n","gt","(","crA",".","getFirstColumn","(",")",",","lastCol",")","||","lt","(","crA",".","getLastColumn","(",")",",","firstCol",")",")","{","return","NO_INTERSECTION",";","}","else","if","(","contains","(","crA,","crB",")",")","{","return","INSIDE",";","}","else","if","(","contains","(","crB,","crA",")",")","{","return","ENCLOSES",";","}","else\n","{","return","OVERLAP",";","}"],"docstring_tokens":["Get","the","type","of","intersection","between","two","cell","ranges"],"prompt_tokens":[]}
{"code_tokens":["public","static","boolean","hasExactSharedBorder","(","CellRangeAddress","crA,","CellRangeAddress","crB",")","{","int","oFirstRow","=","crB",".","getFirstRow","(",")",";","int","oLastRow","=","crB",".","getLastRow","(",")",";","int","oFirstCol","=","crB",".","getFirstColumn","(",")",";","int","oLastCol","=","crB",".","getLastColumn","(",")",";","\n\n","if","(","crA",".","getFirstRow","(",")",">","0","&&","crA",".","getFirstRow","(",")","-1","==","oLastRow","||\n","oFirstRow",">","0","&&","oFirstRow-1","==","crA",".","getLastRow","(",")",")","{","//","ranges","have","a","horizontal","border","in","common\n","//","make","sure","columns","are","identical:\n","return","crA",".","getFirstColumn","(",")","==","oFirstCol","&&","crA",".","getLastColumn","(",")","==","oLastCol",";","}","\n\n","if","(","crA",".","getFirstColumn","(",")",">0","&&","crA",".","getFirstColumn","(",")","-","1","==","oLastCol","||\n","oFirstCol>0","&&","crA",".","getLastColumn","(",")","==","oFirstCol","-1",")","{","//","ranges","have","a","vertical","border","in","common\n","//","make","sure","rows","are","identical:\n","return","crA",".","getFirstRow","(",")","==","oFirstRow","&&","crA",".","getLastRow","(",")","==","oLastRow",";","}","return","false",";"],"docstring_tokens":["Check","if","the","two","cell","ranges","have","a","shared","border"],"prompt_tokens":[]}
{"code_tokens":["private","static","double","getProductTerm","(","ValueEval","ve,","boolean","isScalarProduct",")","throws","EvaluationException","{","\n\n","if","(","ve","instanceof","BlankEval","||","ve","==","null",")","{","//","TODO","-","shouldn't","BlankEval",".","INSTANCE","be","used","always","instead","of","null?\n","//","null","seems","to","occur","when","the","blank","cell","is","part","of","an","area","ref","(","but","not","reliably",")","if","(","isScalarProduct",")","{","throw","new","EvaluationException","(","ErrorEval",".","VALUE_INVALID",")",";","}","return","0",";","}","\n\n","if","(","ve","instanceof","ErrorEval",")","{","throw","new","EvaluationException","(","(","ErrorEval",")","ve",")",";","}","if","(","ve","instanceof","StringEval",")","{","if","(","isScalarProduct",")","{","throw","new","EvaluationException","(","ErrorEval",".","VALUE_INVALID",")",";","}","//","Note","for","area","SUMPRODUCTs,","string","values","are","interpreted","as","zero\n","//","even","if","they","would","parse","as","valid","numeric","values\n","return","0",";","}","if","(","ve","instanceof","NumericValueEval",")","{","NumericValueEval","nve","=","(","NumericValueEval",")","ve",";","return","nve",".","getNumberValue","(",")",";","}","throw","new","RuntimeException","(","\"Unexpected","value","eval","class","(","\"\n","+","ve",".","getClass","(",")",".","getName","(",")","+","\"",")","\"",")",";"],"docstring_tokens":["Determines","a","double","value","for","the","specified","ValueEval"],"prompt_tokens":[]}
{"code_tokens":["public","static","SlideShow<?,?>","create","(","boolean","XSLF",")","throws","IOException","{","return","wp","(","XSLF","?","FileMagic",".","OOXML",":","FileMagic",".","OLE2,","SlideShowProvider::create",")",";"],"docstring_tokens":["Create","a","new","empty","SlideShow,","either","XSLF","or","HSLF","depending","on","the","parameter"],"prompt_tokens":[]}
{"code_tokens":["public","void","writeOut","(","OutputStream","out",")","throws","IOException","{","//","Ensure","the","escher","layer","reflects","the","text","changes\n","for","(","EscherTextboxWrapper","w",":","textboxWrappers",")","{","w",".","writeOut","(","null",")",";","}","\n\n","//","Find","the","new","size","of","the","escher","children",";","int","newSize","=","0",";","newSize","+=","dgContainer",".","getRecordSize","(",")",";","\n\n","//","Update","the","size","(","header","bytes","5-8",")","LittleEndian",".","putInt","(","_header,4,newSize",")",";","\n\n","//","Write","out","our","header\n","out",".","write","(","_header",")",";","\n\n","//","Now","grab","the","children's","data\n","byte[]","b","=","new","byte[newSize]",";","int","done","=","0",";","dgContainer",".","serialize","(","done,","b",")",";","\n\n","//","Finally,","write","out","the","children\n","out",".","write","(","b",")",";"],"docstring_tokens":["Write","the","contents","of","the","record","back,","so","it","can","be","written","to","disk","Walks","the","escher","layer","to","get","the","contents"],"prompt_tokens":[]}
{"code_tokens":["private","void","create","(",")","{","dgContainer",".","setRecordId","(","EscherContainerRecord",".","DG_CONTAINER",")",";","dgContainer",".","setOptions","(","(","short",")","15",")",";","\n\n","dg","=","new","EscherDgRecord","(",")",";","dg",".","setOptions","(","(","short",")","16",")",";","dg",".","setNumShapes","(","1",")",";","dgContainer",".","addChildRecord","(","dg",")",";","\n\n","EscherContainerRecord","spgrContainer","=","new","EscherContainerRecord","(",")",";","spgrContainer",".","setOptions","(","(","short",")","15",")",";","spgrContainer",".","setRecordId","(","EscherContainerRecord",".","SPGR_CONTAINER",")",";","\n\n","EscherContainerRecord","spContainer","=","new","EscherContainerRecord","(",")",";","spContainer",".","setOptions","(","(","short",")","15",")",";","spContainer",".","setRecordId","(","EscherContainerRecord",".","SP_CONTAINER",")",";","\n\n","EscherSpgrRecord","spgr","=","new","EscherSpgrRecord","(",")",";","spgr",".","setOptions","(","(","short",")","1",")",";","spContainer",".","addChildRecord","(","spgr",")",";","\n\n","EscherSpRecord","sp","=","new","EscherSpRecord","(",")",";","sp",".","setOptions","(","(","short",")","(","(","ShapeType",".","NOT_PRIMITIVE",".","nativeId","<<","4",")","+","2",")",")",";","sp",".","setFlags","(","EscherSpRecord",".","FLAG_PATRIARCH","|","EscherSpRecord",".","FLAG_GROUP",")",";","spContainer",".","addChildRecord","(","sp",")",";","spgrContainer",".","addChildRecord","(","spContainer",")",";","dgContainer",".","addChildRecord","(","spgrContainer",")",";","\n\n","spContainer","=","new","EscherContainerRecord","(",")",";","spContainer",".","setOptions","(","(","short",")","15",")",";","spContainer",".","setRecordId","(","EscherContainerRecord",".","SP_CONTAINER",")",";","sp","=","new","EscherSpRecord","(",")",";","sp",".","setOptions","(","(","short",")","(","(","ShapeType",".","RECT",".","nativeId","<<","4",")","+","2",")",")",";","sp",".","setFlags","(","EscherSpRecord",".","FLAG_BACKGROUND","|","EscherSpRecord",".","FLAG_HASSHAPETYPE",")",";","spContainer",".","addChildRecord","(","sp",")",";","\n\n","EscherOptRecord","opt","=","new","EscherOptRecord","(",")",";","opt",".","setRecordId","(","EscherOptRecord",".","RECORD_ID",")",";","opt",".","addEscherProperty","(","new","EscherRGBProperty","(","EscherPropertyTypes",".","FILL__FILLCOLOR,","134217728",")",")",";","opt",".","addEscherProperty","(","new","EscherRGBProperty","(","EscherPropertyTypes",".","FILL__FILLBACKCOLOR,","134217733",")",")",";","opt",".","addEscherProperty","(","new","EscherSimpleProperty","(","EscherPropertyTypes",".","FILL__RECTRIGHT,","10064750",")",")",";","opt",".","addEscherProperty","(","new","EscherSimpleProperty","(","EscherPropertyTypes",".","FILL__RECTBOTTOM,","7778750",")",")",";","opt",".","addEscherProperty","(","new","EscherBoolProperty","(","EscherPropertyTypes",".","FILL__NOFILLHITTEST,","1179666",")",")",";","opt",".","addEscherProperty","(","new","EscherBoolProperty","(","EscherPropertyTypes",".","LINESTYLE__NOLINEDRAWDASH,","524288",")",")",";","opt",".","addEscherProperty","(","new","EscherSimpleProperty","(","EscherPropertyTypes",".","SHAPE__BLACKANDWHITESETTINGS,","9",")",")",";","opt",".","addEscherProperty","(","new","EscherSimpleProperty","(","EscherPropertyTypes",".","SHAPE__BACKGROUNDSHAPE,","65537",")",")",";","spContainer",".","addChildRecord","(","opt",")",";","\n\n","dgContainer",".","addChildRecord","(","spContainer",")",";"],"docstring_tokens":["Create","the","Escher","records","associated","with","a","new","PPDrawing"],"prompt_tokens":[]}
{"code_tokens":["@Internal\n","public","boolean","isFComplex","(",")","{","return","fComplex",".","isSet","(","field_6_flags1",")",";"],"docstring_tokens":["Specifies","that","the","last","save","operation","that","was","performed","on","this","document","was","an","incremental","save","operation"],"prompt_tokens":[]}
{"code_tokens":["@Internal\n","public","boolean","isFHasPic","(",")","{","return","fHasPic",".","isSet","(","field_6_flags1",")",";"],"docstring_tokens":["When","set","to","0,","there","SHOULD","be","no","pictures","in","the","document"],"prompt_tokens":[]}
{"code_tokens":["@Internal\n","public","boolean","isFEncrypted","(",")","{","return","fEncrypted",".","isSet","(","field_6_flags1",")",";"],"docstring_tokens":["Specifies","whether","the","document","is","encrypted","or","obfuscated","as","specified","in","Encryption","and","Obfuscation"],"prompt_tokens":[]}
{"code_tokens":["@Internal\n","public","void","setFSpare0","(","byte","value",")","{","field_10_flags2","=","(","byte",")","fSpare0",".","setValue","(","field_10_flags2,","value",")",";"],"docstring_tokens":["Sets","the","fSpare0","field","value"],"prompt_tokens":[]}
{"code_tokens":["@Internal\n","@Deprecated\n","public","byte","getFSpare0","(",")","{","return","(","byte",")","fSpare0",".","getValue","(","field_10_flags2",")",";"],"docstring_tokens":["This","value","is","undefined","and","MUST","be","ignored"],"prompt_tokens":[]}
{"code_tokens":["public","void","writeUInt","(","long","value",")","{","try","{","out",".","write","(","(","byte",")","(","(","value",")","&","0xFF",")",")",";","out",".","write","(","(","byte",")","(","(","value",">>>","8",")","&","0xFF",")",")",";","out",".","write","(","(","byte",")","(","(","value",">>>","16",")","&","0xFF",")",")",";","out",".","write","(","(","byte",")","(","(","value",">>>","24",")","&","0xFF",")",")",";","}","catch","(","IOException","e",")","{","throw","new","RuntimeException","(","e",")",";","}"],"docstring_tokens":["Put","unsigned","int","into","output","stream"],"prompt_tokens":[]}
{"code_tokens":["public","void","putUShort","(","int","value",")","{","try","{","out",".","write","(","(","byte",")","(","(","value",")","&","0xFF",")",")",";","out",".","write","(","(","byte",")","(","(","value",">>>","8",")","&","0xFF",")",")",";","}","catch","(","IOException","e",")","{","throw","new","RuntimeException","(","e",")",";","}"],"docstring_tokens":["Put","unsigned","short","into","output","stream"],"prompt_tokens":[]}
{"code_tokens":["@Internal\n","public","boolean","getFCantSplit","(",")","{","return","field_5_fCantSplit",";"],"docstring_tokens":["When","1,","table","row","may","not","be","split","across","page","bounds"],"prompt_tokens":[]}
{"code_tokens":["@Internal\n","public","boolean","getFTableHeader","(",")","{","return","field_7_fTableHeader",";"],"docstring_tokens":["When","1,","table","row","is","to","be","used","as","the","header","of","the","table"],"prompt_tokens":[]}
{"code_tokens":["@Internal\n","public","boolean","isFAutofit","(",")","{","return","fAutofit",".","isSet","(","field_13_widthAndFitsFlags",")",";"],"docstring_tokens":["When","set","to","1,","AutoFit","this","table"],"prompt_tokens":[]}
{"code_tokens":["@Internal\n","public","boolean","isFKeepFollow","(",")","{","return","fKeepFollow",".","isSet","(","field_13_widthAndFitsFlags",")",";"],"docstring_tokens":["When","set","to","1,","keep","this","row","with","the","following","row"],"prompt_tokens":[]}
{"code_tokens":["@Internal\n","public","void","setWidthAndFitsFlags_empty1","(","byte","value",")","{","field_13_widthAndFitsFlags","=","widthAndFitsFlags_empty1",".","setValue","(","field_13_widthAndFitsFlags,","value",")",";"],"docstring_tokens":["Sets","the","widthAndFitsFlags_empty1","field","value"],"prompt_tokens":[]}
{"code_tokens":["@Internal\n","public","void","setWidthAndFitsFlags_empty2","(","short","value",")","{","field_13_widthAndFitsFlags","=","widthAndFitsFlags_empty2",".","setValue","(","field_13_widthAndFitsFlags,","value",")",";"],"docstring_tokens":["Sets","the","widthAndFitsFlags_empty2","field","value"],"prompt_tokens":[]}
{"code_tokens":["@Internal\n","public","void","setGrpfTap_unused","(","short","value",")","{","field_25_internalFlags","=","grpfTap_unused",".","setValue","(","field_25_internalFlags,","value",")",";"],"docstring_tokens":["Sets","the","grpfTap_unused","field","value"],"prompt_tokens":[]}
{"code_tokens":["@Internal\n","public","void","setViewFlags_unused2","(","short","value",")","{","field_32_viewFlags","=","viewFlags_unused2",".","setValue","(","field_32_viewFlags,","value",")",";"],"docstring_tokens":["Sets","the","viewFlags_unused2","field","value"],"prompt_tokens":[]}
{"code_tokens":["@Override\n","@Deprecated\n","@NotImplemented\n","public","void","adjustForDelete","(","int","start,","int","length",")","{","throw","new","UnsupportedOperationException","(",")",";"],"docstring_tokens":["Not","implemented","for","OldTextPiece"],"prompt_tokens":[]}
{"code_tokens":["\n\n","public","void","setVCenter","(","boolean","hc",")","{","field_1_vcenter","=","hc","?","1",":","0",";"],"docstring_tokens":["set","whether","to","center","vertically","or","not"],"prompt_tokens":[]}
{"code_tokens":["\n\n","public","boolean","getVCenter","(",")","{","return","(","field_1_vcenter","==","1",")",";"],"docstring_tokens":["get","whether","to","center","vertically","or","not"],"prompt_tokens":[]}
{"code_tokens":["@Override\n","protected","InputStream","getInputStreamImpl","(",")","throws","IOException","{","//","We","use","the","getInputStream","(",")","method","from","java",".","util",".","zip",".","ZipFile\n","//","class","which","return","an","InputStream","to","this","part","zip","entry",".","return","(","(","ZipPackage",")","_container",")",".","getZipArchive","(",")",".","getInputStream","(","zipEntry",")",";"],"docstring_tokens":["Implementation","of","the","getInputStream","which","return","the","inputStream","of","this","part","zip","entry"],"prompt_tokens":[]}
{"code_tokens":["@Override\n","public","boolean","marshall","(","PackagePart","part,","OutputStream","os",")","throws","OpenXML4JException","{","if","(","!","(","os","instanceof","ZipArchiveOutputStream",")",")","{","LOG",".","atError","(",")",".","log","(","\"Unexpected","class","{","}","\",","os",".","getClass","(",")",".","getName","(",")",")",";","throw","new","OpenXML4JException","(","\"ZipOutputStream","expected","!\"",")",";","//","Normally","should","happen","only","in","development","phase,","so","just","throw\n","//","exception\n","}","\n\n","//","check","if","there","is","anything","to","save","for","some","parts",".","We","don't","do","this","for","all","parts","as","some","code\n","//","might","depend","on","empty","parts","being","saved,","e",".","g",".","some","unit","tests","verify","this","currently",".","if","(","part",".","getSize","(",")","==","0","&&","part",".","getPartName","(",")",".","getName","(",")",".","equals","(","XSSFRelation",".","SHARED_STRINGS",".","getDefaultFileName","(",")",")",")","{","return","true",";","}","\n\n","ZipArchiveOutputStream","zos","=","(","ZipArchiveOutputStream",")","os",";","ZipArchiveEntry","partEntry","=","new","ZipArchiveEntry","(","ZipHelper\n",".","getZipItemNameFromOPCName","(","part",".","getPartName","(",")",".","getURI","(",")",".","getPath","(",")",")",")",";","try","{","//","Create","next","zip","entry\n","zos",".","putArchiveEntry","(","partEntry",")",";","\n\n","//","Saving","data","in","the","ZIP","file\n","try","(","final","InputStream","ins","=","part",".","getInputStream","(",")",")","{","IOUtils",".","copy","(","ins,","zos",")",";","}","finally","{","zos",".","closeArchiveEntry","(",")",";","}","}","catch","(","IOException","ioe",")","{","LOG",".","atError","(",")",".","withThrowable","(","ioe",")",".","log","(","\"Cannot","write:","{","}",":","in","ZIP\",","part",".","getPartName","(",")",")",";","return","false",";","}","\n\n","//","Saving","relationship","part\n","if","(","part",".","hasRelationships","(",")",")","{","PackagePartName","relationshipPartName","=","PackagingURIHelper\n",".","getRelationshipPartName","(","part",".","getPartName","(",")",")",";","\n\n","marshallRelationshipPart","(","part",".","getRelationships","(",")",",\n","relationshipPartName,","zos",")",";","}","\n\n","return","true",";"],"docstring_tokens":["Save","the","specified","part","to","the","given","stream"],"prompt_tokens":[]}
{"code_tokens":["public","static","boolean","marshallRelationshipPart","(","PackageRelationshipCollection","rels,","PackagePartName","relPartName,\n","ZipArchiveOutputStream","zos",")","{","//","Building","xml\n","Document","xmlOutDoc","=","DocumentHelper",".","createDocument","(",")",";","//","make","something","like","<Relationships\n","//","xmlns=\"http://schemas",".","openxmlformats",".","org/package/2006/relationships\">\n","Element","root","=","xmlOutDoc",".","createElementNS","(","PackageNamespaces",".","RELATIONSHIPS,","PackageRelationship",".","RELATIONSHIPS_TAG_NAME",")",";","xmlOutDoc",".","appendChild","(","root",")",";","\n\n","//","<Relationship\n","//","TargetMode=\"External\"\n","//","Id=\"rIdx\"\n","//","Target=\"http://www",".","custom",".","com/images/pic1",".","jpg\"\n","//","Type=\"http://www",".","custom",".","com/external-resource\"/>\n\n","URI","sourcePartURI","=","PackagingURIHelper\n",".","getSourcePartUriFromRelationshipPartUri","(","relPartName",".","getURI","(",")",")",";","\n\n","for","(","PackageRelationship","rel",":","rels",")","{","//","the","relationship","element\n","Element","relElem","=","xmlOutDoc",".","createElementNS","(","PackageNamespaces",".","RELATIONSHIPS,","PackageRelationship",".","RELATIONSHIP_TAG_NAME",")",";","root",".","appendChild","(","relElem",")",";","\n\n","//","the","relationship","ID\n","relElem",".","setAttribute","(","PackageRelationship",".","ID_ATTRIBUTE_NAME,","rel",".","getId","(",")",")",";","\n\n","//","the","relationship","Type\n","relElem",".","setAttribute","(","PackageRelationship",".","TYPE_ATTRIBUTE_NAME,","rel",".","getRelationshipType","(",")",")",";","\n\n","//","the","relationship","Target\n","String","targetValue",";","URI","uri","=","rel",".","getTargetURI","(",")",";","if","(","rel",".","getTargetMode","(",")","==","TargetMode",".","EXTERNAL",")","{","//","Save","the","target","as-is","-","we","don't","need","to","validate","it,\n","//","alter","it","etc\n","targetValue","=","uri",".","toString","(",")",";","\n\n","//","add","TargetMode","attribute","(","as","it","is","external","link","external",")","relElem",".","setAttribute","(","PackageRelationship",".","TARGET_MODE_ATTRIBUTE_NAME,","\"External\"",")",";","}","else","{","URI","targetURI","=","rel",".","getTargetURI","(",")",";","targetValue","=","PackagingURIHelper",".","relativizeURI","(","sourcePartURI,","targetURI,","true",")",".","toString","(",")",";","}","relElem",".","setAttribute","(","PackageRelationship",".","TARGET_ATTRIBUTE_NAME,","targetValue",")",";","}","\n\n","xmlOutDoc",".","normalize","(",")",";","\n\n","//","String","schemaFilename","=","Configuration",".","getPathForXmlSchema","(",")","+\n","//","File",".","separator","+","\"opc-relationships",".","xsd\"",";","\n\n","//","Save","part","in","zip\n","ZipArchiveEntry","ctEntry","=","new","ZipArchiveEntry","(","ZipHelper",".","getZipURIFromOPCName","(","relPartName",".","getURI","(",")",".","toASCIIString","(",")",")",".","getPath","(",")",")",";","try","{","zos",".","putArchiveEntry","(","ctEntry",")",";","try","{","return","StreamHelper",".","saveXmlInStream","(","xmlOutDoc,","zos",")",";","}","finally","{","zos",".","closeArchiveEntry","(",")",";","}","}","catch","(","IOException","e",")","{","LOG",".","atError","(",")",".","withThrowable","(","e",")",".","log","(","\"Cannot","create","zip","entry","{","}","\",","relPartName",")",";","return","false",";","}"],"docstring_tokens":["Save","relationships","into","the","part"],"prompt_tokens":[]}
{"code_tokens":["@Internal\n","public","int","getHps","(",")","{","return","field_2_hps",";"],"docstring_tokens":["Font","size","in","half","points"],"prompt_tokens":[]}
{"code_tokens":["@Internal\n","public","int","getFtcAscii","(",")","{","return","field_3_ftcAscii",";"],"docstring_tokens":["Font","for","ASCII","text"],"prompt_tokens":[]}
{"code_tokens":["@Internal\n","public","int","getDxaSpace","(",")","{","return","field_7_dxaSpace",";"],"docstring_tokens":["Space","following","each","character","in","the","run","expressed","in","twip","units"],"prompt_tokens":[]}
{"code_tokens":["@Internal\n","public","byte","getIco","(",")","{","return","field_9_ico",";"],"docstring_tokens":["Color","of","text","for","Word","97"],"prompt_tokens":[]}
{"code_tokens":["@Internal\n","public","byte","getIdctHint","(",")","{","return","field_18_idctHint",";"],"docstring_tokens":["Identifier","of","Character","type"],"prompt_tokens":[]}
{"code_tokens":["@Internal\n","public","int","getHpsKern","(",")","{","return","field_21_hpsKern",";"],"docstring_tokens":["Kerning","distance","for","characters","in","run","recorded","in","half","points"],"prompt_tokens":[]}
{"code_tokens":["@Internal\n","public","byte[]","getXstDispFldRMark","(",")","{","return","field_62_xstDispFldRMark",";"],"docstring_tokens":["The","string","value","of","the","ListNum","field","when","revision","mark","tracking","began"],"prompt_tokens":[]}
{"code_tokens":["@Internal\n","public","boolean","isFRMarkDel","(",")","{","return","fRMarkDel",".","isSet","(","field_1_grpfChp",")",";"],"docstring_tokens":["has","been","deleted","and","will","be","displayed","with","strikethrough","when","revision","marked","text","is","to","be","displayed"],"prompt_tokens":[]}
{"code_tokens":["@Internal\n","public","boolean","isFSmallCaps","(",")","{","return","fSmallCaps",".","isSet","(","field_1_grpfChp",")",";"],"docstring_tokens":["Displayed","with","small","caps"],"prompt_tokens":[]}
{"code_tokens":["@Internal\n","public","boolean","isFVanish","(",")","{","return","fVanish",".","isSet","(","field_1_grpfChp",")",";"],"docstring_tokens":["text","has","hidden","format,","and","is","not","displayed","unless","fPagHidden","is","set","in","the","DOP"],"prompt_tokens":[]}
{"code_tokens":["@Internal\n","public","boolean","isFSpec","(",")","{","return","fSpec",".","isSet","(","field_1_grpfChp",")",";"],"docstring_tokens":["Character","is","a","Word","special","character"],"prompt_tokens":[]}
{"code_tokens":["@Internal\n","public","boolean","isFShadow","(",")","{","return","fShadow",".","isSet","(","field_1_grpfChp",")",";"],"docstring_tokens":["Character","is","drawn","with","a","shadow"],"prompt_tokens":[]}
{"code_tokens":["@Internal\n","public","boolean","isFDStrike","(",")","{","return","fDStrike",".","isSet","(","field_1_grpfChp",")",";"],"docstring_tokens":["Displayed","with","double","strikethrough"],"prompt_tokens":[]}
{"code_tokens":["@Internal\n","public","boolean","isFNoProof","(",")","{","return","fNoProof",".","isSet","(","field_1_grpfChp",")",";"],"docstring_tokens":["When","set","to","1,","do","not","check","spelling","or","grammar"],"prompt_tokens":[]}
{"code_tokens":["@Internal\n","public","boolean","isFWebHidden","(",")","{","return","fWebHidden",".","isSet","(","field_1_grpfChp",")",";"],"docstring_tokens":["Text","should","be","hidden","in","Web","View","when","set","to","1"],"prompt_tokens":[]}
{"code_tokens":["@Internal\n","public","boolean","isFFitText","(",")","{","return","fFitText",".","isSet","(","field_1_grpfChp",")",";"],"docstring_tokens":["Fit","text","when","set","to","1"],"prompt_tokens":[]}
{"code_tokens":["@Internal\n","public","void","setItypFELayout","(","short","value",")","{","field_29_ufel","=","(","short",")","itypFELayout",".","setValue","(","field_29_ufel,","value",")",";"],"docstring_tokens":["Sets","the","itypFELayout","field","value"],"prompt_tokens":[]}
{"code_tokens":["@Internal\n","public","void","setSpare","(","byte","value",")","{","field_29_ufel","=","(","short",")","spare",".","setValue","(","field_29_ufel,","value",")",";"],"docstring_tokens":["Sets","the","spare","field","value"],"prompt_tokens":[]}
{"code_tokens":["@Internal\n","public","void","setIWarichuBracket","(","byte","value",")","{","field_30_copt","=","(","byte",")","iWarichuBracket",".","setValue","(","field_30_copt,","value",")",";"],"docstring_tokens":["Sets","the","iWarichuBracket","field","value"],"prompt_tokens":[]}
{"code_tokens":["@Internal\n","public","void","setIcoHighlight","(","byte","value",")","{","field_48_Highlight","=","(","short",")","icoHighlight",".","setValue","(","field_48_Highlight,","value",")",";"],"docstring_tokens":["Sets","the","icoHighlight","field","value"],"prompt_tokens":[]}
{"code_tokens":["public","void","remove","(","Object","record",")","{","//","can't","use","List",".","indexOf","here","because","it","checks","the","records","for","equality","and","not","identity\n","int","i","=","0",";","for","(","org",".","apache",".","poi",".","hssf",".","record",".","Record","r",":","records",")","{","if","(","r","==","record",")","{","remove","(","i",")",";","break",";","}","i++",";","}"],"docstring_tokens":["Find","the","given","record","in","the","record","list","by","identity","and","removes","it"],"prompt_tokens":[]}
{"code_tokens":["@Override\n","public","String","toString","(",")","{","return","toDebugFriendlyString","(","value",")",";"],"docstring_tokens":["Returns","the","data","in","a","debug-friendly","string","format"],"prompt_tokens":[]}
{"code_tokens":["private","void","onWorkbookCreate","(",")","{","workbook","=","CTWorkbook",".","Factory",".","newInstance","(",")",";","\n\n","//","don't","EVER","use","the","1904","date","system\n","CTWorkbookPr","workbookPr","=","workbook",".","addNewWorkbookPr","(",")",";","workbookPr",".","setDate1904","(","false",")",";","\n\n","setBookViewsIfMissing","(",")",";","workbook",".","addNewSheets","(",")",";","\n\n","POIXMLProperties",".","ExtendedProperties","expProps","=","getProperties","(",")",".","getExtendedProperties","(",")",";","expProps",".","getUnderlyingProperties","(",")",".","setApplication","(","DOCUMENT_CREATOR",")",";","\n\n","sharedStringSource","=","(","SharedStringsTable",")","createRelationship","(","XSSFRelation",".","SHARED_STRINGS,","this",".","xssfFactory",")",";","stylesSource","=","(","StylesTable",")","createRelationship","(","XSSFRelation",".","STYLES,","this",".","xssfFactory",")",";","stylesSource",".","setWorkbook","(","this",")",";","\n\n","namedRanges","=","new","ArrayList<>","(",")",";","namedRangesByName","=","new","ArrayListValuedHashMap<>","(",")",";","sheets","=","new","ArrayList<>","(",")",";","pivotTables","=","new","ArrayList<>","(",")",";","\n\n","externalLinks","=","new","ArrayList<>","(",")",";"],"docstring_tokens":["Create","a","new","CTWorkbook","with","all","values","set","to","default"],"prompt_tokens":[]}
{"code_tokens":["protected","static","OPCPackage","newPackage","(","XSSFWorkbookType","workbookType",")","{","OPCPackage","pkg","=","null",";","try","{","pkg","=","OPCPackage",".","create","(","new","UnsynchronizedByteArrayOutputStream","(",")",")",";","//","NOSONAR","-","we","do","not","want","to","close","this","here\n","//","Main","part\n","PackagePartName","corePartName","=","PackagingURIHelper",".","createPartName","(","XSSFRelation",".","WORKBOOK",".","getDefaultFileName","(",")",")",";","//","Create","main","part","relationship\n","pkg",".","addRelationship","(","corePartName,","TargetMode",".","INTERNAL,","PackageRelationshipTypes",".","CORE_DOCUMENT",")",";","//","Create","main","document","part\n","pkg",".","createPart","(","corePartName,","workbookType",".","getContentType","(",")",")",";","\n\n","pkg",".","getPackageProperties","(",")",".","setCreatorProperty","(","DOCUMENT_CREATOR",")",";","}","catch","(","Exception","e",")","{","IOUtils",".","closeQuietly","(","pkg",")",";","throw","new","POIXMLException","(","e",")",";","}","return","pkg",";"],"docstring_tokens":["Create","a","new","SpreadsheetML","package","and","setup","the","default","minimal","content"],"prompt_tokens":[]}
{"code_tokens":["@Override\n","public","XSSFSheet","cloneSheet","(","int","sheetNum",")","{","return","cloneSheet","(","sheetNum,","null",")",";"],"docstring_tokens":["Create","an","XSSFSheet","from","an","existing","sheet","in","the","XSSFWorkbook"],"prompt_tokens":[]}
{"code_tokens":["@Override\n","public","XSSFSheet","createSheet","(",")","{","String","sheetname","=","\"Sheet\"","+","(","sheets",".","size","(",")",")",";","int","idx","=","0",";","while","(","getSheet","(","sheetname",")","!=","null",")","{","sheetname","=","\"Sheet\"","+","idx",";","idx++",";","}","return","createSheet","(","sheetname",")",";"],"docstring_tokens":["Create","an","XSSFSheet","for","this","workbook,","adds","it","to","the","sheets","and","returns","the","high","level","representation"],"prompt_tokens":[]}
{"code_tokens":["@Override\n","public","int","getNumCellStyles","(",")","{","return","stylesSource",".","getNumCellStyles","(",")",";"],"docstring_tokens":["Get","the","number","of","styles","the","workbook","contains"],"prompt_tokens":[]}
{"code_tokens":["@Override\n","public","int","getNumberOfSheets","(",")","{","return","sheets",".","size","(",")",";"],"docstring_tokens":["Get","the","number","of","worksheets","in","the","this","workbook"],"prompt_tokens":[]}
{"code_tokens":["@Override\n","public","XSSFSheet","getSheetAt","(","int","index",")","{","validateSheetIndex","(","index",")",";","return","sheets",".","get","(","index",")",";"],"docstring_tokens":["Get","the","XSSFSheet","object","at","the","given","index"],"prompt_tokens":[]}
{"code_tokens":["private","void","onSheetDelete","(","int","index",")","{","//","remove","all","sheet","relations\n","final","XSSFSheet","sheet","=","getSheetAt","(","index",")",";","\n\n","sheet",".","onSheetDelete","(",")",";","\n\n","//delete","the","CTSheet","reference","from","workbook",".","xml\n","workbook",".","getSheets","(",")",".","removeSheet","(","index",")",";","\n\n","//calculation","chain","is","auxiliary,","remove","it","as","it","may","contain","orphan","references","to","deleted","cells\n","if","(","calcChain","!=","null",")","{","removeRelation","(","calcChain",")",";","calcChain","=","null",";","}","\n\n","//adjust","indices","of","names","ranges\n","List<XSSFName>","toRemove","=","new","ArrayList<>","(",")",";","for","(","XSSFName","nm",":","namedRanges",")","{","CTDefinedName","ct","=","nm",".","getCTName","(",")",";","if","(","!ct",".","isSetLocalSheetId","(",")",")","{","continue",";","}","if","(","ct",".","getLocalSheetId","(",")","==","index",")","{","toRemove",".","add","(","nm",")",";","}","else","if","(","ct",".","getLocalSheetId","(",")",">","index",")","{","//","Bump","down","by","one,","so","still","points","at","the","same","sheet\n","ct",".","setLocalSheetId","(","ct",".","getLocalSheetId","(",")","-1",")",";","}","}","for","(","XSSFName","nm",":","toRemove",")","{","removeName","(","nm",")",";","}"],"docstring_tokens":["Gracefully","remove","references","to","the","sheet","being","deleted"],"prompt_tokens":[]}
{"code_tokens":["public","boolean","isRevisionLocked","(",")","{","return","workbookProtectionPresent","(",")","&&","workbook",".","getWorkbookProtection","(",")",".","getLockRevision","(",")",";"],"docstring_tokens":["Specifies","a","boolean","value","that","indicates","whether","the","workbook","is","locked","for","revisions"],"prompt_tokens":[]}
{"code_tokens":["public","void","lockStructure","(",")","{","safeGetWorkbookProtection","(",")",".","setLockStructure","(","true",")",";"],"docstring_tokens":["Locks","the","structure","of","workbook"],"prompt_tokens":[]}
{"code_tokens":["public","void","unLockStructure","(",")","{","safeGetWorkbookProtection","(",")",".","setLockStructure","(","false",")",";"],"docstring_tokens":["Unlocks","the","structure","of","workbook"],"prompt_tokens":[]}
{"code_tokens":["public","void","lockWindows","(",")","{","safeGetWorkbookProtection","(",")",".","setLockWindows","(","true",")",";"],"docstring_tokens":["Locks","the","windows","that","comprise","the","workbook"],"prompt_tokens":[]}
{"code_tokens":["public","void","unLockWindows","(",")","{","safeGetWorkbookProtection","(",")",".","setLockWindows","(","false",")",";"],"docstring_tokens":["Unlocks","the","windows","that","comprise","the","workbook"],"prompt_tokens":[]}
{"code_tokens":["public","void","lockRevision","(",")","{","safeGetWorkbookProtection","(",")",".","setLockRevision","(","true",")",";"],"docstring_tokens":["Locks","the","workbook","for","revisions"],"prompt_tokens":[]}
{"code_tokens":["public","void","unLockRevision","(",")","{","safeGetWorkbookProtection","(",")",".","setLockRevision","(","false",")",";"],"docstring_tokens":["Unlocks","the","workbook","for","revisions"],"prompt_tokens":[]}
{"code_tokens":["public","boolean","validateRevisionsPassword","(","String","password",")","{","if","(","!workbookProtectionPresent","(",")",")","{","return","(","password","==","null",")",";","}","return","validatePassword","(","safeGetWorkbookProtection","(",")",",","password,","\"revisions\"",")",";"],"docstring_tokens":["Validate","the","password","against","the","stored","hash,","the","hashing","method","will","be","determined","by","the","existing","password","attributes"],"prompt_tokens":[]}
{"code_tokens":["public","void","unLock","(",")","{","if","(","workbookProtectionPresent","(",")",")","{","workbook",".","unsetWorkbookProtection","(",")",";","}"],"docstring_tokens":["Removes","the","workbook","protection","settings"],"prompt_tokens":[]}
{"code_tokens":["public","void","setVBAProject","(","InputStream","vbaProjectStream",")","throws","IOException","{","if","(","!isMacroEnabled","(",")",")","{","setWorkbookType","(","XSSFWorkbookType",".","XLSM",")",";","}","\n\n","PackagePartName","ppName",";","try","{","ppName","=","PackagingURIHelper",".","createPartName","(","XSSFRelation",".","VBA_MACROS",".","getDefaultFileName","(",")",")",";","}","catch","(","InvalidFormatException","e",")","{","throw","new","POIXMLException","(","e",")",";","}","OPCPackage","opc","=","getPackage","(",")",";","OutputStream","outputStream",";","if","(","!opc",".","containPart","(","ppName",")",")","{","POIXMLDocumentPart","relationship","=","createRelationship","(","XSSFRelation",".","VBA_MACROS,","this",".","xssfFactory",")",";","outputStream","=","relationship",".","getPackagePart","(",")",".","getOutputStream","(",")",";","}","else","{","PackagePart","part","=","opc",".","getPart","(","ppName",")",";","outputStream","=","part",".","getOutputStream","(",")",";","}","try","{","IOUtils",".","copy","(","vbaProjectStream,","outputStream",")",";","}","finally","{","IOUtils",".","closeQuietly","(","outputStream",")",";","}"],"docstring_tokens":["Adds","a","vbaProject.bin","file","to","the","workbook"],"prompt_tokens":[]}
{"code_tokens":["@Override\n","protected","EscherContainerRecord","createSpContainer","(",")","{","EscherContainerRecord","spContainer","=","new","EscherContainerRecord","(",")",";","EscherSpRecord","sp","=","new","EscherSpRecord","(",")",";","EscherOptRecord","opt","=","new","EscherOptRecord","(",")",";","EscherClientDataRecord","clientData","=","new","EscherClientDataRecord","(",")",";","\n\n","spContainer",".","setRecordId","(","EscherContainerRecord",".","SP_CONTAINER",")",";","spContainer",".","setOptions","(","(","short",")","0x000F",")",";","sp",".","setRecordId","(","EscherSpRecord",".","RECORD_ID",")",";","sp",".","setOptions","(","(","short",")","(","(","ShapeType",".","NOT_PRIMITIVE",".","nativeId","<<","4",")","|","0x2",")",")",";","if","(","getParent","(",")","==","null",")","{","sp",".","setFlags","(","EscherSpRecord",".","FLAG_HAVEANCHOR","|","EscherSpRecord",".","FLAG_HASSHAPETYPE",")",";","}","else","{","sp",".","setFlags","(","EscherSpRecord",".","FLAG_CHILD","|","EscherSpRecord",".","FLAG_HAVEANCHOR","|","EscherSpRecord",".","FLAG_HASSHAPETYPE",")",";","}","opt",".","setRecordId","(","EscherOptRecord",".","RECORD_ID",")",";","opt",".","setEscherProperty","(","new","EscherSimpleProperty","(","EscherPropertyTypes",".","TRANSFORM__ROTATION,","false,","false,","0",")",")",";","opt",".","setEscherProperty","(","new","EscherSimpleProperty","(","EscherPropertyTypes",".","GEOMETRY__RIGHT,","false,","false,","100",")",")",";","opt",".","setEscherProperty","(","new","EscherSimpleProperty","(","EscherPropertyTypes",".","GEOMETRY__BOTTOM,","false,","false,","100",")",")",";","opt",".","setEscherProperty","(","new","EscherShapePathProperty","(","EscherPropertyTypes",".","GEOMETRY__SHAPEPATH,","EscherShapePathProperty",".","COMPLEX",")",")",";","\n\n","opt",".","setEscherProperty","(","new","EscherSimpleProperty","(","EscherPropertyTypes",".","GEOMETRY__FILLOK,","false,","false,","0x00010001",")",")",";","opt",".","setEscherProperty","(","new","EscherSimpleProperty","(","EscherPropertyTypes",".","LINESTYLE__LINESTARTARROWHEAD,","false,","false,","0x0",")",")",";","opt",".","setEscherProperty","(","new","EscherSimpleProperty","(","EscherPropertyTypes",".","LINESTYLE__LINEENDARROWHEAD,","false,","false,","0x0",")",")",";","opt",".","setEscherProperty","(","new","EscherSimpleProperty","(","EscherPropertyTypes",".","LINESTYLE__LINEENDCAPSTYLE,","false,","false,","0x0",")",")",";","\n\n","opt",".","setEscherProperty","(","new","EscherSimpleProperty","(","EscherPropertyTypes",".","LINESTYLE__LINEDASHING,","LINESTYLE_SOLID",")",")",";","opt",".","setEscherProperty","(","new","EscherBoolProperty","(","EscherPropertyTypes",".","LINESTYLE__NOLINEDRAWDASH,","0x00080008",")",")",";","opt",".","setEscherProperty","(","new","EscherSimpleProperty","(","EscherPropertyTypes",".","LINESTYLE__LINEWIDTH,","LINEWIDTH_DEFAULT",")",")",";","opt",".","setEscherProperty","(","new","EscherRGBProperty","(","EscherPropertyTypes",".","FILL__FILLCOLOR,","FILL__FILLCOLOR_DEFAULT",")",")",";","opt",".","setEscherProperty","(","new","EscherRGBProperty","(","EscherPropertyTypes",".","LINESTYLE__COLOR,","LINESTYLE__COLOR_DEFAULT",")",")",";","opt",".","setEscherProperty","(","new","EscherBoolProperty","(","EscherPropertyTypes",".","FILL__NOFILLHITTEST,","1",")",")",";","\n\n","opt",".","setEscherProperty","(","new","EscherBoolProperty","(","EscherPropertyTypes",".","GROUPSHAPE__FLAGS,","0x080000",")",")",";","\n\n","EscherRecord","anchor","=","getAnchor","(",")",".","getEscherAnchor","(",")",";","clientData",".","setRecordId","(","EscherClientDataRecord",".","RECORD_ID",")",";","clientData",".","setOptions","(","(","short",")","0x0000",")",";","\n\n","spContainer",".","addChildRecord","(","sp",")",";","spContainer",".","addChildRecord","(","opt",")",";","spContainer",".","addChildRecord","(","anchor",")",";","spContainer",".","addChildRecord","(","clientData",")",";","\n\n","return","spContainer",";"],"docstring_tokens":["Generates","the","shape","records","for","this","shape"],"prompt_tokens":[]}
{"code_tokens":["/*","package","*/","static","boolean","isSimpleAscii","(","char","c",")","{","\n\n","if","(","c>=0x21","&&","c<=0x7E",")","{","//","everything","from","'!'","to","'~'","(","includes","letters,","digits,","punctuation\n","return","true",";","}","//","some","specific","whitespace","chars","below","0x21:\n","switch","(","c",")","{","case","'","':\n","case","'\\t':\n","case","'\\r':\n","case","'\\n':\n","return","true",";","}","return","false",";"],"docstring_tokens":["For","simplicity,","the","output","file","is","strictly","simple","ASCII"],"prompt_tokens":[]}
{"code_tokens":["@Override\n","public","Object","get","(","final","Object","key",")","{","final","Long","id","=","dictionary",".","getKey","(","key",")",";","final","CustomProperty","cp","=","props",".","get","(","id",")",";","return","cp","!=","null","?","cp",".","getValue","(",")",":","null",";"],"docstring_tokens":["Gets","a","named","value","from","the","custom","properties","-","only","works","for","keys","of","type","String"],"prompt_tokens":[]}
{"code_tokens":["@Override\n","public","CustomProperty","remove","(","Object","key",")","{","final","Long","id","=","dictionary",".","removeValue","(","key",")",";","return","props",".","remove","(","id",")",";"],"docstring_tokens":["Removes","a","custom","property","-","only","works","for","keys","of","type","String"],"prompt_tokens":[]}
{"code_tokens":["@Override\n","public","Set<String>","keySet","(",")","{","return","Collections",".","unmodifiableSet","(","dictionary",".","values","(",")",")",";"],"docstring_tokens":["Returns","a","set","of","all","the","names","of","our","custom","properties"],"prompt_tokens":[]}
{"code_tokens":["public","Set<Long>","idSet","(",")","{","return","Collections",".","unmodifiableSet","(","dictionary",".","keySet","(",")",")",";"],"docstring_tokens":["Returns","a","set","of","all","the","IDs","of","our","custom","properties"],"prompt_tokens":[]}
{"code_tokens":["@SuppressWarnings","(","{","\"UnusedReturnValue\",","\"WeakerAccess\"","}",")","public","synchronized","int","appendRootLevelRecord","(","Record","newRecord",")","{","int","addedAt","=","-1",";","Record[]","r","=","new","Record[_records",".","length","+","1]",";","boolean","added","=","false",";","for","(","int","i","=","(","_records",".","length","-","1",")",";","i",">=","0",";","i--",")","{","if","(","added",")","{","//","Just","copy","over\n","r[i]","=","_records[i]",";","}","else","{","r[","(","i","+","1",")","]","=","_records[i]",";","if","(","_records[i]","instanceof","PersistPtrHolder",")","{","r[i]","=","newRecord",";","added","=","true",";","addedAt","=","i",";","}","}","}","_records","=","r",";","return","addedAt",";"],"docstring_tokens":["Adds","a","new","root","level","record,","at","the","end,","but","before","the","last","PersistPtrIncrementalBlock"],"prompt_tokens":[]}
{"code_tokens":["public","HSLFObjectData[]","getEmbeddedObjects","(",")","{","if","(","_objects","==","null",")","{","List<HSLFObjectData>","objects","=","new","ArrayList<>","(",")",";","for","(","Record","r",":","_records",")","{","if","(","r","instanceof","ExOleObjStg",")","{","objects",".","add","(","new","HSLFObjectData","(","(","ExOleObjStg",")","r",")",")",";","}","}","_objects","=","objects",".","toArray","(","new","HSLFObjectData[0]",")",";","}","return","_objects",";"],"docstring_tokens":["Gets","embedded","object","data","from","the","slide","show"],"prompt_tokens":[]}
{"code_tokens":["@Internal\n","public","void","setTlc","(","byte","value",")","{","field_1_value","=","(","byte",")","tlc",".","setValue","(","field_1_value,","value",")",";"],"docstring_tokens":["Sets","the","tlc","field","value"],"prompt_tokens":[]}
{"code_tokens":["@Internal\n","public","void","setReserved","(","byte","value",")","{","field_1_value","=","(","byte",")","reserved",".","setValue","(","field_1_value,","value",")",";"],"docstring_tokens":["Sets","the","reserved","field","value"],"prompt_tokens":[]}
{"code_tokens":["public","int","calcExtSSTRecordSize","(",")","{","return","ExtSSTRecord",".","getRecordSizeForStrings","(","field_3_strings",".","size","(",")",")",";"],"docstring_tokens":["Calculates","the","size","in","bytes","of","the","EXTSST","record","as","it","would","be","if","the","record","was","serialized"],"prompt_tokens":[]}
{"code_tokens":["@Override\n","public","XWPFParagraph","getParagraphArray","(","int","pos",")","{","if","(","pos",">=","0","&&","pos<paragraphs",".","size","(",")",")","{","return","paragraphs",".","get","(","pos",")",";","}","return","null",";"],"docstring_tokens":["Returns","the","paragraph","that","holds","the","text","of","the","header","or","footer"],"prompt_tokens":[]}
{"code_tokens":["public","XWPFParagraph","createParagraph","(",")","{","XWPFParagraph","paragraph","=","new","XWPFParagraph","(","headerFooter",".","addNewP","(",")",",","this",")",";","paragraphs",".","add","(","paragraph",")",";","bodyElements",".","add","(","paragraph",")",";","return","paragraph",";"],"docstring_tokens":["Adds","a","new","paragraph","at","the","end","of","the","header","or","footer"],"prompt_tokens":[]}
{"code_tokens":["public","XWPFTable","createTable","(","int","rows,","int","cols",")","{","XWPFTable","table","=","new","XWPFTable","(","headerFooter",".","addNewTbl","(",")",",","this,","rows,","cols",")",";","tables",".","add","(","table",")",";","bodyElements",".","add","(","table",")",";","return","table",";"],"docstring_tokens":["Adds","a","new","table","at","the","end","of","the","header","or","footer"],"prompt_tokens":[]}
{"code_tokens":["@Override\n","public","XWPFParagraph","insertNewParagraph","(","XmlCursor","cursor",")","{","if","(","isCursorInHdrF","(","cursor",")",")","{","String","uri","=","CTP",".","type",".","getName","(",")",".","getNamespaceURI","(",")",";","String","localPart","=","\"p\"",";","cursor",".","beginElement","(","localPart,","uri",")",";","cursor",".","toParent","(",")",";","CTP","p","=","(","CTP",")","cursor",".","getObject","(",")",";","XWPFParagraph","newP","=","new","XWPFParagraph","(","p,","this",")",";","XmlObject","o","=","null",";","while","(","!","(","o","instanceof","CTP",")","&&","(","cursor",".","toPrevSibling","(",")",")",")","{","o","=","cursor",".","getObject","(",")",";","}","if","(","(","!","(","o","instanceof","CTP",")",")","||","o","==","p",")","{","paragraphs",".","add","(","0,","newP",")",";","}","else","{","int","pos","=","paragraphs",".","indexOf","(","getParagraph","(","(","CTP",")","o",")",")","+","1",";","paragraphs",".","add","(","pos,","newP",")",";","}","int","i","=","0",";","final","XmlCursor","p2","=","p",".","newCursor","(",")",";","try","{","cursor",".","toCursor","(","p2",")",";","}","finally","{","p2",".","dispose","(",")",";","}","while","(","cursor",".","toPrevSibling","(",")",")","{","o","=","cursor",".","getObject","(",")",";","if","(","o","instanceof","CTP","||","o","instanceof","CTTbl",")","i++",";","}","bodyElements",".","add","(","i,","newP",")",";","final","XmlCursor","p3","=","p",".","newCursor","(",")",";","try","{","cursor",".","toCursor","(","p3",")",";","cursor",".","toEndToken","(",")",";","}","finally","{","p3",".","dispose","(",")",";","}","return","newP",";","}","return","null",";"],"docstring_tokens":["add","a","new","paragraph","at","position","of","the","cursor"],"prompt_tokens":[]}
{"code_tokens":["protected","static","OPCPackage","newPackage","(",")","{","OPCPackage","pkg","=","null",";","try","{","pkg","=","OPCPackage",".","create","(","new","UnsynchronizedByteArrayOutputStream","(",")",")",";","//","NOSONAR","-","we","do","not","want","to","close","this","here\n","//","Main","part\n","PackagePartName","corePartName","=","PackagingURIHelper",".","createPartName","(","XWPFRelation",".","DOCUMENT",".","getDefaultFileName","(",")",")",";","//","Create","main","part","relationship\n","pkg",".","addRelationship","(","corePartName,","TargetMode",".","INTERNAL,","PackageRelationshipTypes",".","CORE_DOCUMENT",")",";","//","Create","main","document","part\n","pkg",".","createPart","(","corePartName,","XWPFRelation",".","DOCUMENT",".","getContentType","(",")",")",";","\n\n","pkg",".","getPackageProperties","(",")",".","setCreatorProperty","(","DOCUMENT_CREATOR",")",";","\n\n","return","pkg",";","}","catch","(","Exception","e",")","{","IOUtils",".","closeQuietly","(","pkg",")",";","throw","new","POIXMLException","(","e",")",";","}"],"docstring_tokens":["Create","a","new","WordProcessingML","package","and","setup","the","default","minimal","content"],"prompt_tokens":[]}
{"code_tokens":["private","CTSectPr","getSection","(",")","{","CTBody","ctBody","=","getDocument","(",")",".","getBody","(",")",";","return","(","ctBody",".","isSetSectPr","(",")","?\n","ctBody",".","getSectPr","(",")",":\n","ctBody",".","addNewSectPr","(",")",")",";"],"docstring_tokens":["Return","the","CTSectPr","object","that","corresponds","with","the","last","section","in","this","document"],"prompt_tokens":[]}
{"code_tokens":["private","int","getBodyElementSpecificPos","(","int","pos,","List<?","extends","IBodyElement>","list",")","{","//","If","there's","nothing","to","find,","skip","it\n","if","(","list",".","isEmpty","(",")",")","{","return","-1",";","}","\n\n","if","(","pos",">=","0","&&","pos","<","bodyElements",".","size","(",")",")","{","//","Ensure","the","type","is","correct\n","IBodyElement","needle","=","bodyElements",".","get","(","pos",")",";","if","(","needle",".","getElementType","(",")","!=","list",".","get","(","0",")",".","getElementType","(",")",")","{","//","Wrong","type\n","return","-1",";","}","\n\n","//","Work","back","until","we","find","it\n","int","startPos","=","Math",".","min","(","pos,","list",".","size","(",")","-","1",")",";","for","(","int","i","=","startPos",";","i",">=","0",";","i--",")","{","if","(","list",".","get","(","i",")","==","needle",")","{","return","i",";","}","}","}","\n\n","//","Couldn't","be","found\n","return","-1",";"],"docstring_tokens":["Finds","that","for","example","the","2nd","entry","in","the","body","list","is","the","1st","paragraph"],"prompt_tokens":[]}
{"code_tokens":["public","XWPFParagraph","createParagraph","(",")","{","XWPFParagraph","p","=","new","XWPFParagraph","(","ctDocument",".","getBody","(",")",".","addNewP","(",")",",","this",")",";","bodyElements",".","add","(","p",")",";","paragraphs",".","add","(","p",")",";","return","p",";"],"docstring_tokens":["Appends","a","new","paragraph","to","this","document"],"prompt_tokens":[]}
{"code_tokens":["public","XWPFNumbering","createNumbering","(",")","{","if","(","numbering","==","null",")","{","NumberingDocument","numberingDoc","=","NumberingDocument",".","Factory",".","newInstance","(",")",";","\n\n","XWPFRelation","relation","=","XWPFRelation",".","NUMBERING",";","int","i","=","getRelationIndex","(","relation",")",";","\n\n","XWPFNumbering","wrapper","=","(","XWPFNumbering",")","createRelationship","(","relation,","XWPFFactory",".","getInstance","(",")",",","i",")",";","wrapper",".","setNumbering","(","numberingDoc",".","addNewNumbering","(",")",")",";","numbering","=","wrapper",";","}","\n\n","return","numbering",";"],"docstring_tokens":["Creates","an","empty","numbering","if","one","does","not","already","exist","and","sets","the","numbering","member"],"prompt_tokens":[]}
{"code_tokens":["public","XWPFStyles","createStyles","(",")","{","if","(","styles","==","null",")","{","StylesDocument","stylesDoc","=","StylesDocument",".","Factory",".","newInstance","(",")",";","\n\n","XWPFRelation","relation","=","XWPFRelation",".","STYLES",";","int","i","=","getRelationIndex","(","relation",")",";","\n\n","XWPFStyles","wrapper","=","(","XWPFStyles",")","createRelationship","(","relation,","XWPFFactory",".","getInstance","(",")",",","i",")",";","wrapper",".","setStyles","(","stylesDoc",".","addNewStyles","(",")",")",";","styles","=","wrapper",";","}","\n\n","return","styles",";"],"docstring_tokens":["Creates","an","empty","styles","for","the","document","if","one","does","not","already","exist"],"prompt_tokens":[]}
{"code_tokens":["public","XWPFTable","createTable","(","int","rows,","int","cols",")","{","XWPFTable","table","=","new","XWPFTable","(","ctDocument",".","getBody","(",")",".","addNewTbl","(",")",",","this,","rows,","cols",")",";","bodyElements",".","add","(","table",")",";","tables",".","add","(","table",")",";","return","table",";"],"docstring_tokens":["Create","an","empty","table","with","a","number","of","rows","and","cols","specified"],"prompt_tokens":[]}
{"code_tokens":["public","boolean","isTrackRevisions","(",")","{","return","settings",".","isTrackRevisions","(",")",";"],"docstring_tokens":["Check","if","revision","tracking","is","turned","on"],"prompt_tokens":[]}
{"code_tokens":["@Override\n","public","XWPFTable","getTable","(","CTTbl","ctTbl",")","{","for","(","int","i","=","0",";","i","<","tables",".","size","(",")",";","i++",")","{","if","(","getTables","(",")",".","get","(","i",")",".","getCTTbl","(",")","==","ctTbl",")","{","return","getTables","(",")",".","get","(","i",")",";","}","}","return","null",";"],"docstring_tokens":["get","a","table","by","its","CTTbl-Object"],"prompt_tokens":[]}
{"code_tokens":["public","XWPFEndnote","createEndnote","(",")","{","XWPFEndnotes","endnotes","=","this",".","createEndnotes","(",")",";","\n\n","return","endnotes",".","createEndnote","(",")",";","\n\n"],"docstring_tokens":["Create","a","new","end","note","and","add","it","to","the","document"],"prompt_tokens":[]}
{"code_tokens":["public","List<XWPFEndnote>","getEndnotes","(",")","{","if","(","endnotes","==","null",")","{","return","Collections",".","emptyList","(",")",";","}","return","endnotes",".","getEndnotesList","(",")",";"],"docstring_tokens":["Gets","the","list","of","end","notes","for","the","document"],"prompt_tokens":[]}
{"code_tokens":["private","static","Map<String,","CellStyle>","createStyles","(","Workbook","wb",")","{","Map<String,","CellStyle>","styles","=","new","HashMap<>","(",")",";","CellStyle","style",";","Font","titleFont","=","wb",".","createFont","(",")",";","titleFont",".","setFontHeightInPoints","(","(","short",")","18",")",";","titleFont",".","setBold","(","true",")",";","style","=","wb",".","createCellStyle","(",")",";","style",".","setAlignment","(","HorizontalAlignment",".","CENTER",")",";","style",".","setVerticalAlignment","(","VerticalAlignment",".","CENTER",")",";","style",".","setFont","(","titleFont",")",";","styles",".","put","(","\"title\",","style",")",";","\n\n","Font","monthFont","=","wb",".","createFont","(",")",";","monthFont",".","setFontHeightInPoints","(","(","short",")","11",")",";","monthFont",".","setColor","(","IndexedColors",".","WHITE",".","getIndex","(",")",")",";","style","=","wb",".","createCellStyle","(",")",";","style",".","setAlignment","(","HorizontalAlignment",".","CENTER",")",";","style",".","setVerticalAlignment","(","VerticalAlignment",".","CENTER",")",";","style",".","setFillForegroundColor","(","IndexedColors",".","GREY_50_PERCENT",".","getIndex","(",")",")",";","style",".","setFillPattern","(","FillPatternType",".","SOLID_FOREGROUND",")",";","style",".","setFont","(","monthFont",")",";","style",".","setWrapText","(","true",")",";","styles",".","put","(","\"header\",","style",")",";","\n\n","style","=","wb",".","createCellStyle","(",")",";","style",".","setAlignment","(","HorizontalAlignment",".","CENTER",")",";","style",".","setWrapText","(","true",")",";","style",".","setBorderRight","(","BorderStyle",".","THIN",")",";","style",".","setRightBorderColor","(","IndexedColors",".","BLACK",".","getIndex","(",")",")",";","style",".","setBorderLeft","(","BorderStyle",".","THIN",")",";","style",".","setLeftBorderColor","(","IndexedColors",".","BLACK",".","getIndex","(",")",")",";","style",".","setBorderTop","(","BorderStyle",".","THIN",")",";","style",".","setTopBorderColor","(","IndexedColors",".","BLACK",".","getIndex","(",")",")",";","style",".","setBorderBottom","(","BorderStyle",".","THIN",")",";","style",".","setBottomBorderColor","(","IndexedColors",".","BLACK",".","getIndex","(",")",")",";","styles",".","put","(","\"cell\",","style",")",";","\n\n","style","=","wb",".","createCellStyle","(",")",";","style",".","setAlignment","(","HorizontalAlignment",".","CENTER",")",";","style",".","setVerticalAlignment","(","VerticalAlignment",".","CENTER",")",";","style",".","setFillForegroundColor","(","IndexedColors",".","GREY_25_PERCENT",".","getIndex","(",")",")",";","style",".","setFillPattern","(","FillPatternType",".","SOLID_FOREGROUND",")",";","style",".","setDataFormat","(","wb",".","createDataFormat","(",")",".","getFormat","(","\"0",".","00\"",")",")",";","styles",".","put","(","\"formula\",","style",")",";","\n\n","style","=","wb",".","createCellStyle","(",")",";","style",".","setAlignment","(","HorizontalAlignment",".","CENTER",")",";","style",".","setVerticalAlignment","(","VerticalAlignment",".","CENTER",")",";","style",".","setFillForegroundColor","(","IndexedColors",".","GREY_40_PERCENT",".","getIndex","(",")",")",";","style",".","setFillPattern","(","FillPatternType",".","SOLID_FOREGROUND",")",";","style",".","setDataFormat","(","wb",".","createDataFormat","(",")",".","getFormat","(","\"0",".","00\"",")",")",";","styles",".","put","(","\"formula_2\",","style",")",";","\n\n","return","styles",";"],"docstring_tokens":["Create","a","library","of","cell","styles"],"prompt_tokens":[]}
{"code_tokens":["@Internal\n","public","void","setStk","(","byte","value",")","{","field_2_info2","=","(","short",")","stk",".","setValue","(","field_2_info2,","value",")",";"],"docstring_tokens":["Sets","the","stk","field","value"],"prompt_tokens":[]}
{"code_tokens":["@Internal\n","public","void","setIstdBase","(","short","value",")","{","field_2_info2","=","(","short",")","istdBase",".","setValue","(","field_2_info2,","value",")",";"],"docstring_tokens":["Sets","the","istdBase","field","value"],"prompt_tokens":[]}
{"code_tokens":["@Internal\n","public","void","setCupx","(","byte","value",")","{","field_3_info3","=","(","short",")","cupx",".","setValue","(","field_3_info3,","value",")",";"],"docstring_tokens":["Sets","the","cupx","field","value"],"prompt_tokens":[]}
{"code_tokens":["@Internal\n","public","void","setIstdNext","(","short","value",")","{","field_3_info3","=","(","short",")","istdNext",".","setValue","(","field_3_info3,","value",")",";"],"docstring_tokens":["Sets","the","istdNext","field","value"],"prompt_tokens":[]}
{"code_tokens":["@Internal\n","public","boolean","isFUnhideWhenUsed","(",")","{","return","fUnhideWhenUsed",".","isSet","(","field_5_grfstd",")",";"],"docstring_tokens":["Specifies","whether","the","fSemiHidden","property","is","to","be","set","to","0","when","this","style","is","used"],"prompt_tokens":[]}
{"code_tokens":["@Internal\n","public","void","setFReserved","(","byte","value",")","{","field_5_grfstd","=","(","short",")","fReserved",".","setValue","(","field_5_grfstd,","value",")",";"],"docstring_tokens":["Sets","the","fReserved","field","value"],"prompt_tokens":[]}
{"code_tokens":["@Internal\n","public","byte","getFReserved","(",")","{","return","(","byte",")","fReserved",".","getValue","(","field_5_grfstd",")",";"],"docstring_tokens":["This","value","MUST","be","0","and","MUST","be","ignored"],"prompt_tokens":[]}
{"code_tokens":["public","static","Cell","getCell","(","Row","row,","int","columnIndex",")","{","Cell","cell","=","row",".","getCell","(","columnIndex",")",";","\n\n","if","(","cell","==","null",")","{","cell","=","row",".","createCell","(","columnIndex",")",";","}","return","cell",";"],"docstring_tokens":["Get","a","specific","cell","from","a","row"],"prompt_tokens":[]}
{"code_tokens":["public","static","Cell","createCell","(","Row","row,","int","column,","String","value,","CellStyle","style",")","{","Cell","cell","=","getCell","(","row,","column",")",";","\n\n","cell",".","setCellValue","(","cell",".","getRow","(",")",".","getSheet","(",")",".","getWorkbook","(",")",".","getCreationHelper","(",")",".","createRichTextString","(","value",")",")",";","if","(","style","!=","null",")","{","cell",".","setCellStyle","(","style",")",";","}","return","cell",";"],"docstring_tokens":["Creates","a","cell,","gives","it","a","value,","and","applies","a","style","if","provided"],"prompt_tokens":[]}
{"code_tokens":["public","static","void","setFont","(","Cell","cell,","Font","font",")","{","//","Check","if","font","belongs","to","workbook\n","Workbook","wb","=","cell",".","getSheet","(",")",".","getWorkbook","(",")",";","final","int","fontIndex","=","font",".","getIndex","(",")",";","if","(","!wb",".","getFontAt","(","fontIndex",")",".","equals","(","font",")",")","{","throw","new","IllegalArgumentException","(","\"Font","does","not","belong","to","this","workbook\"",")",";","}","\n\n","//","Check","if","cell","belongs","to","workbook\n","//","(","checked","in","setCellStyleProperty",")","\n\n","setCellStyleProperty","(","cell,","FONT,","fontIndex",")",";"],"docstring_tokens":["Take","a","cell,","and","apply","a","font","to","it"],"prompt_tokens":[]}
{"code_tokens":["private","static","void","setFormatProperties","(","CellStyle","style,","Workbook","workbook,","Map<String,","Object>","properties",")","{","style",".","setAlignment","(","getHorizontalAlignment","(","properties,","ALIGNMENT",")",")",";","style",".","setVerticalAlignment","(","getVerticalAlignment","(","properties,","VERTICAL_ALIGNMENT",")",")",";","style",".","setBorderBottom","(","getBorderStyle","(","properties,","BORDER_BOTTOM",")",")",";","style",".","setBorderLeft","(","getBorderStyle","(","properties,","BORDER_LEFT",")",")",";","style",".","setBorderRight","(","getBorderStyle","(","properties,","BORDER_RIGHT",")",")",";","style",".","setBorderTop","(","getBorderStyle","(","properties,","BORDER_TOP",")",")",";","style",".","setBottomBorderColor","(","getShort","(","properties,","BOTTOM_BORDER_COLOR",")",")",";","style",".","setDataFormat","(","getShort","(","properties,","DATA_FORMAT",")",")",";","style",".","setFillPattern","(","getFillPattern","(","properties,","FILL_PATTERN",")",")",";","style",".","setFillForegroundColor","(","getShort","(","properties,","FILL_FOREGROUND_COLOR",")",")",";","style",".","setFillBackgroundColor","(","getShort","(","properties,","FILL_BACKGROUND_COLOR",")",")",";","style",".","setFont","(","workbook",".","getFontAt","(","getInt","(","properties,","FONT",")",")",")",";","style",".","setHidden","(","getBoolean","(","properties,","HIDDEN",")",")",";","style",".","setIndention","(","getShort","(","properties,","INDENTION",")",")",";","style",".","setLeftBorderColor","(","getShort","(","properties,","LEFT_BORDER_COLOR",")",")",";","style",".","setLocked","(","getBoolean","(","properties,","LOCKED",")",")",";","style",".","setRightBorderColor","(","getShort","(","properties,","RIGHT_BORDER_COLOR",")",")",";","style",".","setRotation","(","getShort","(","properties,","ROTATION",")",")",";","style",".","setTopBorderColor","(","getShort","(","properties,","TOP_BORDER_COLOR",")",")",";","style",".","setWrapText","(","getBoolean","(","properties,","WRAP_TEXT",")",")",";"],"docstring_tokens":["Sets","the","format","properties","of","the","given","style","based","on","the","given","map"],"prompt_tokens":[]}
{"code_tokens":["public","XSSFColor","getBottomBorderXSSFColor","(",")","{","if","(","!_cellXf",".","getApplyBorder","(",")",")","return","null",";","\n\n","int","idx","=","Math",".","toIntExact","(","_cellXf",".","getBorderId","(",")",")",";","XSSFCellBorder","border","=","_stylesSource",".","getBorderAt","(","idx",")",";","\n\n","return","border",".","getBorderColor","(","BorderSide",".","BOTTOM",")",";"],"docstring_tokens":["Get","the","color","to","use","for","the","bottom","border","as","a","XSSFColor"],"prompt_tokens":[]}
{"code_tokens":["public","XSSFColor","getFillBackgroundXSSFColor","(",")","{","//","bug","56295:","handle","missing","applyFill","attribute","as","\"true\"","because","Excel","does","as","well\n","if","(","_cellXf",".","isSetApplyFill","(",")","&&","!_cellXf",".","getApplyFill","(",")",")","return","null",";","\n\n","int","fillIndex","=","(","int",")","_cellXf",".","getFillId","(",")",";","XSSFCellFill","fg","=","_stylesSource",".","getFillAt","(","fillIndex",")",";","\n\n","XSSFColor","fillBackgroundColor","=","fg",".","getFillBackgroundColor","(",")",";","if","(","fillBackgroundColor","!=","null","&&","_theme","!=","null",")","{","_theme",".","inheritFromThemeAsRequired","(","fillBackgroundColor",")",";","}","return","fillBackgroundColor",";"],"docstring_tokens":["Get","the","background","fill","color"],"prompt_tokens":[]}
{"code_tokens":["public","XSSFColor","getFillForegroundXSSFColor","(",")","{","//","bug","56295:","handle","missing","applyFill","attribute","as","\"true\"","because","Excel","does","as","well\n","if","(","_cellXf",".","isSetApplyFill","(",")","&&","!_cellXf",".","getApplyFill","(",")",")","return","null",";","\n\n","int","fillIndex","=","(","int",")","_cellXf",".","getFillId","(",")",";","XSSFCellFill","fg","=","_stylesSource",".","getFillAt","(","fillIndex",")",";","\n\n","XSSFColor","fillForegroundColor","=","fg",".","getFillForegroundColor","(",")",";","if","(","fillForegroundColor","!=","null","&&","_theme","!=","null",")","{","_theme",".","inheritFromThemeAsRequired","(","fillForegroundColor",")",";","}","return","fillForegroundColor",";"],"docstring_tokens":["Get","the","foreground","fill","color"],"prompt_tokens":[]}
{"code_tokens":["public","XSSFFont","getFont","(",")","{","if","(","_font","==","null",")","{","_font","=","_stylesSource",".","getFontAt","(","getFontId","(",")",")",";","}","return","_font",";"],"docstring_tokens":["Gets","the","font","for","this","style"],"prompt_tokens":[]}
{"code_tokens":["@Override\n","public","int","getFontIndex","(",")","{","return","getFontId","(",")",";"],"docstring_tokens":["Gets","the","index","of","the","font","for","this","style"],"prompt_tokens":[]}
{"code_tokens":["@Override\n","public","short","getIndention","(",")","{","CTCellAlignment","align","=","_cellXf",".","getAlignment","(",")",";","return","(","short",")","(","align","==","null","?","0",":","align",".","getIndent","(",")",")",";"],"docstring_tokens":["Get","the","number","of","spaces","to","indent","the","text","in","the","cell"],"prompt_tokens":[]}
{"code_tokens":["public","XSSFColor","getLeftBorderXSSFColor","(",")","{","if","(","!_cellXf",".","getApplyBorder","(",")",")","return","null",";","\n\n","int","idx","=","Math",".","toIntExact","(","_cellXf",".","getBorderId","(",")",")",";","XSSFCellBorder","border","=","_stylesSource",".","getBorderAt","(","idx",")",";","\n\n","return","border",".","getBorderColor","(","BorderSide",".","LEFT",")",";"],"docstring_tokens":["Get","the","color","to","use","for","the","left","border"],"prompt_tokens":[]}
{"code_tokens":["public","XSSFColor","getRightBorderXSSFColor","(",")","{","if","(","!_cellXf",".","getApplyBorder","(",")",")","return","null",";","\n\n","int","idx","=","Math",".","toIntExact","(","_cellXf",".","getBorderId","(",")",")",";","XSSFCellBorder","border","=","_stylesSource",".","getBorderAt","(","idx",")",";","\n\n","return","border",".","getBorderColor","(","BorderSide",".","RIGHT",")",";"],"docstring_tokens":["Get","the","color","to","use","for","the","right","border"],"prompt_tokens":[]}
{"code_tokens":["public","XSSFColor","getTopBorderXSSFColor","(",")","{","if","(","!_cellXf",".","getApplyBorder","(",")",")","return","null",";","\n\n","int","idx","=","Math",".","toIntExact","(","_cellXf",".","getBorderId","(",")",")",";","XSSFCellBorder","border","=","_stylesSource",".","getBorderAt","(","idx",")",";","\n\n","return","border",".","getBorderColor","(","BorderSide",".","TOP",")",";"],"docstring_tokens":["Get","the","color","to","use","for","the","top","border"],"prompt_tokens":[]}
{"code_tokens":["@Override\n","public","void","setAlignment","(","HorizontalAlignment","align",")","{","_cellXf",".","setApplyAlignment","(","true",")",";","\n\n","getCellAlignment","(",")",".","setHorizontal","(","align",")",";"],"docstring_tokens":["Set","the","type","of","horizontal","alignment","for","the","cell"],"prompt_tokens":[]}
{"code_tokens":["@Override\n","public","void","setFont","(","Font","font",")","{","if","(","font","!=","null",")","{","long","index","=","font",".","getIndex","(",")",";","this",".","_cellXf",".","setFontId","(","index",")",";","this",".","_cellXf",".","setApplyFont","(","true",")",";","}","else","{","this",".","_cellXf",".","setApplyFont","(","false",")",";","}"],"docstring_tokens":["Set","the","font","for","this","style"],"prompt_tokens":[]}
{"code_tokens":["@Override\n","public","void","setIndention","(","short","indent",")","{","getCellAlignment","(",")",".","setIndent","(","indent",")",";"],"docstring_tokens":["Set","the","number","of","spaces","to","indent","the","text","in","the","cell"],"prompt_tokens":[]}
{"code_tokens":["public","void","setVerticalAlignment","(","VerticalAlignment","align",")","{","_cellXf",".","setApplyAlignment","(","true",")",";","\n\n","getCellAlignment","(",")",".","setVertical","(","align",")",";"],"docstring_tokens":["Set","the","type","of","vertical","alignment","for","the","cell"],"prompt_tokens":[]}
{"code_tokens":["@Override\n","public","boolean","equals","(","Object","o",")","{","if","(","!","(","o","instanceof","XSSFCellStyle",")",")","return","false",";","\n\n","XSSFCellStyle","cf","=","(","XSSFCellStyle",")","o",";","return","_cellXf",".","toString","(",")",".","equals","(","cf",".","getCoreXf","(",")",".","toString","(",")",")",";"],"docstring_tokens":["Checks","is","the","supplied","style","is","equal","to","this","style"],"prompt_tokens":[]}
{"code_tokens":["\n\n","public","static","void","main","(","final","String[]","args",")","{","if","(","args",".","length","==","0",")","{","System",".","err",".","println","(","\"Must","specify","at","least","one","file","to","view\"",")",";","System",".","exit","(","1",")",";","}","boolean","printNames","=","(","args",".","length",">","1",")",";","\n\n","for","(","String","arg",":","args",")","{","viewFile","(","arg,","printNames",")",";","}"],"docstring_tokens":["Display","the","contents","of","multiple","POIFS","files"],"prompt_tokens":[]}
{"code_tokens":["public","Cipher","initCipherForBlock","(","Cipher","cipher,","int","block",")","throws","GeneralSecurityException","{","return","CryptoAPIDecryptor",".","initCipherForBlock","(","cipher,","block,","getEncryptionInfo","(",")",",","getSecretKey","(",")",",","Cipher",".","ENCRYPT_MODE",")",";"],"docstring_tokens":["Initializes","a","cipher","object","for","a","given","block","index","for","encryption"],"prompt_tokens":[]}
{"code_tokens":["public","char","getSymbolCharacter","(",")","{","if","(","isSymbol","(",")",")","{","return","(","char",")","_props",".","getXchSym","(",")",";","}","else\n","throw","new","IllegalStateException","(","\"Not","a","symbol","CharacterRun\"",")",";"],"docstring_tokens":["Returns","the","symbol","character,","if","this","is","a","symbol","character","run"],"prompt_tokens":[]}
{"code_tokens":["public","Ffn","getSymbolFont","(",")","{","if","(","isSymbol","(",")",")","{","if","(","_doc",".","getFontTable","(",")","==","null",")","return","null",";","\n\n","//","Fetch","all","font","names\n","Ffn[]","fontNames","=","_doc",".","getFontTable","(",")",".","getFontNames","(",")",";","\n\n","//","Try","to","find","the","name","of","the","font","for","our","symbol\n","if","(","fontNames",".","length","<=","_props",".","getFtcSym","(",")",")","return","null",";","\n\n","return","fontNames[_props",".","getFtcSym","(",")","]",";","}","else\n","throw","new","IllegalStateException","(","\"Not","a","symbol","CharacterRun\"",")",";"],"docstring_tokens":["Returns","the","symbol","font,","if","this","is","a","symbol","character","run"],"prompt_tokens":[]}
{"code_tokens":["public","short","getAxisType","(",")","{","return","field_1_axisType",";"],"docstring_tokens":["Get","the","axis","type","field","for","the","AxisLineFormat","record"],"prompt_tokens":[]}
{"code_tokens":["public","void","setAxisType","(","short","field_1_axisType",")","{","this",".","field_1_axisType","=","field_1_axisType",";"],"docstring_tokens":["Set","the","axis","type","field","for","the","AxisLineFormat","record"],"prompt_tokens":[]}
{"code_tokens":["@Override\n","public","boolean","equals","(","Object","obj",")","{","if","(","obj","==","null",")","{","return","false",";","}","if","(","!","obj",".","getClass","(",")",".","equals","(","this",".","getClass","(",")",")",")","{","return","false",";","}","final","EvaluationConditionalFormatRule","r","=","(","EvaluationConditionalFormatRule",")","obj",";","return","getSheet","(",")",".","getSheetName","(",")",".","equalsIgnoreCase","(","r",".","getSheet","(",")",".","getSheetName","(",")",")","&&","getFormattingIndex","(",")","==","r",".","getFormattingIndex","(",")","&&","getRuleIndex","(",")","==","r",".","getRuleIndex","(",")",";"],"docstring_tokens":["Defined","as","equal","sheet","name","and","formatting","and","rule","indexes"],"prompt_tokens":[]}
{"code_tokens":["@Internal","(","since=\"5",".","1",".","0\"",")","public","void","updateRowFormulas","(","HSSFRow","row,","FormulaShifter","formulaShifter",")","{","HSSFRowColShifter",".","updateRowFormulas","(","row,","formulaShifter",")",";"],"docstring_tokens":["Update","the","formulas","in","specified","row","using","the","formula","shifting","policy","specified","by","shifter"],"prompt_tokens":[]}
{"code_tokens":["public","void","setString","(","String","string",")","{","_text","=","string",";","_is16bitUnicode","=","StringUtil",".","hasMultibyte","(","string",")",";"],"docstring_tokens":["Sets","the","string","represented","by","this","record"],"prompt_tokens":[]}
{"code_tokens":["public","void","backup","(","Graphics2D","graphics2D",")","{","background","=","graphics2D",".","getBackground","(",")",";","clip","=","graphics2D",".","getClip","(",")",";","color","=","graphics2D",".","getColor","(",")",";","composite","=","graphics2D",".","getComposite","(",")",";","font","=","graphics2D",".","getFont","(",")",";","paint","=","graphics2D",".","getPaint","(",")",";","stroke","=","graphics2D",".","getStroke","(",")",";","trans","=","graphics2D",".","getTransform","(",")",";"],"docstring_tokens":["Saves","the","state","of","the","graphics2D","object"],"prompt_tokens":[]}
{"code_tokens":["public","void","restore","(","Graphics2D","graphics2D",")","{","graphics2D",".","setBackground","(","background",")",";","graphics2D",".","setClip","(","clip",")",";","graphics2D",".","setColor","(","color",")",";","graphics2D",".","setComposite","(","composite",")",";","graphics2D",".","setFont","(","font",")",";","graphics2D",".","setPaint","(","paint",")",";","graphics2D",".","setStroke","(","stroke",")",";","graphics2D",".","setTransform","(","trans",")",";"],"docstring_tokens":["Retrieves","the","state","into","the","graphics2D","object"],"prompt_tokens":[]}
{"code_tokens":["@Override\n","public","int","readRecordSID","(",")","{","readPlain","(","buffer,","0,","LittleEndianConsts",".","SHORT_SIZE",")",";","int","sid","=","LittleEndian",".","getUShort","(","buffer,","0",")",";","shouldSkipEncryptionOnCurrentRecord","=","isNeverEncryptedRecord","(","sid",")",";","return","sid",";"],"docstring_tokens":["Reads","an","unsigned","short","value","without","decrypting"],"prompt_tokens":[]}
{"code_tokens":["public","void","setSignatureMethodFromUri","(","final","String","signatureMethodUri",")","{","switch","(","signatureMethodUri",")","{","case","XMLSignature",".","ALGO_ID_SIGNATURE_RSA_SHA1:\n","setDigestAlgo","(","HashAlgorithm",".","sha1",")",";","break",";","case","XMLSignature",".","ALGO_ID_SIGNATURE_RSA_SHA224:\n","setDigestAlgo","(","HashAlgorithm",".","sha224",")",";","break",";","case","XMLSignature",".","ALGO_ID_SIGNATURE_RSA_SHA256:\n","setDigestAlgo","(","HashAlgorithm",".","sha256",")",";","break",";","case","XMLSignature",".","ALGO_ID_SIGNATURE_RSA_SHA384:\n","setDigestAlgo","(","HashAlgorithm",".","sha384",")",";","break",";","case","XMLSignature",".","ALGO_ID_SIGNATURE_RSA_SHA512:\n","setDigestAlgo","(","HashAlgorithm",".","sha512",")",";","break",";","case","XMLSignature",".","ALGO_ID_SIGNATURE_RSA_RIPEMD160:\n","setDigestAlgo","(","HashAlgorithm",".","ripemd160",")",";","break",";","default:","throw","new","EncryptedDocumentException","(","\"Hash","algorithm","\"\n","+signatureMethodUri+\"","not","supported",".","\"",")",";","}"],"docstring_tokens":["Set","the","digest","algorithm","based","on","the","method","uri"],"prompt_tokens":[]}
{"code_tokens":["@Override\n","public","short","getDataFormat","(",")","{","return","_format",".","getFormatIndex","(",")",";"],"docstring_tokens":["get","the","index","of","the","format"],"prompt_tokens":[]}
{"code_tokens":["@Override\n","public","void","setFont","(","Font","font",")","{","setFont","(","(","HSSFFont",")","font",")",";"],"docstring_tokens":["set","the","font","for","this","style"],"prompt_tokens":[]}
{"code_tokens":["@Override\n","public","int","getFontIndex","(",")","{","return","_format",".","getFontIndex","(",")",";"],"docstring_tokens":["gets","the","index","of","the","font","for","this","style"],"prompt_tokens":[]}
{"code_tokens":["@Override\n","public","void","setAlignment","(","HorizontalAlignment","align",")","{","_format",".","setIndentNotParentAlignment","(","true",")",";","_format",".","setAlignment","(","align",".","getCode","(",")",")",";"],"docstring_tokens":["set","the","type","of","horizontal","alignment","for","the","cell"],"prompt_tokens":[]}
{"code_tokens":["@Override\n","public","void","setIndention","(","short","indent",")","{","_format",".","setIndent","(","indent",")",";"],"docstring_tokens":["set","the","number","of","spaces","to","indent","the","text","in","the","cell"],"prompt_tokens":[]}
{"code_tokens":["@Override\n","public","short","getIndention","(",")","{","return","_format",".","getIndent","(",")",";"],"docstring_tokens":["get","the","number","of","spaces","to","indent","the","text","in","the","cell"],"prompt_tokens":[]}
{"code_tokens":["public","void","addEscherProperty","(","EscherProperty","prop",")","{","properties",".","add","(","prop",")",";"],"docstring_tokens":["Add","a","property","to","this","record"],"prompt_tokens":[]}
{"code_tokens":["public","List<EscherProperty>","getEscherProperties","(",")","{","return","properties",";"],"docstring_tokens":["The","list","of","properties","stored","by","this","record"],"prompt_tokens":[]}
{"code_tokens":["public","void","sortProperties","(",")","{","properties",".","sort","(","Comparator",".","comparingInt","(","EscherProperty::getPropertyNumber",")",")",";"],"docstring_tokens":["Records","should","be","sorted","by","property","number","before","being","stored"],"prompt_tokens":[]}
{"code_tokens":["@Override\n","public","void","formatValue","(","StringBuffer","toAppendTo,","Object","value",")","{","if","(","value","instanceof","Number",")","{","double","val","=","(","(","Number",")","value",")",".","doubleValue","(",")",";","if","(","val","==","0",")","{","toAppendTo",".","append","(","'0'",")",";","return",";","}","\n\n","String","fmt",";","double","exp","=","Math",".","log10","(","Math",".","abs","(","val",")",")",";","boolean","stripZeros","=","true",";","if","(","exp",">","10","||","exp","<","-9",")","fmt","=","\"%1",".","5E\"",";","else","if","(","(","long",")","val","!=","val",")","fmt","=","\"%1",".","9f\"",";","else","{","fmt","=","\"%1",".","0f\"",";","stripZeros","=","false",";","}","\n\n","try","(","Formatter","formatter","=","new","Formatter","(","toAppendTo,","locale",")",")","{","formatter",".","format","(","locale,","fmt,","value",")",";","}","if","(","stripZeros",")","{","//","strip","off","trailing","zeros\n","int","removeFrom",";","if","(","fmt",".","endsWith","(","\"E\"",")",")","removeFrom","=","toAppendTo",".","lastIndexOf","(","\"E\"",")","-","1",";","else\n","removeFrom","=","toAppendTo",".","length","(",")","-","1",";","while","(","toAppendTo",".","charAt","(","removeFrom",")","==","'0'",")","{","toAppendTo",".","deleteCharAt","(","removeFrom--",")",";","}","if","(","toAppendTo",".","charAt","(","removeFrom",")","==","'",".","'",")","{","toAppendTo",".","deleteCharAt","(","removeFrom--",")",";","}","}","}","else","if","(","value","instanceof","Boolean",")","{","toAppendTo",".","append","(","value",".","toString","(",")",".","toUpperCase","(","Locale",".","ROOT",")",")",";","}","else","{","toAppendTo",".","append","(","value",")",";","}"],"docstring_tokens":["The","general","style","is","not","quite","the","same","as","any","other,","or","any","combination","of","others"],"prompt_tokens":[]}
{"code_tokens":["public","short","getCategoryDataType","(",")","{","return","field_1_categoryDataType",";"],"docstring_tokens":["Get","the","category","data","type","field","for","the","DefaultDataLabelTextProperties","record"],"prompt_tokens":[]}
{"code_tokens":["public","void","setCategoryDataType","(","short","field_1_categoryDataType",")","{","this",".","field_1_categoryDataType","=","field_1_categoryDataType",";"],"docstring_tokens":["Set","the","category","data","type","field","for","the","DefaultDataLabelTextProperties","record"],"prompt_tokens":[]}
{"code_tokens":["@Override\n","public","void","simpleValue","(","StringBuffer","toAppendTo,","Object","value",")","{","SIMPLE_TEXT",".","formatValue","(","toAppendTo,","value",")",";"],"docstring_tokens":["For","text,","this","is","just","printing","the","text"],"prompt_tokens":[]}
{"code_tokens":["protected","void","setCellType","(","Cell","cell,","CellValue","cv",")","{","CellType","cellType","=","cv",".","getCellType","(",")",";","switch","(","cellType",")","{","case","BOOLEAN:\n","case","ERROR:\n","case","NUMERIC:\n","case","STRING:\n","setCellType","(","cell,","cellType",")",";","return",";","case","BLANK:\n","//","never","happens","-","blanks","eventually","get","translated","to","zero\n","throw","new","IllegalArgumentException","(","\"This","should","never","happen",".","Blanks","eventually","get","translated","to","zero",".","\"",")",";","case","FORMULA:\n","//","this","will","never","happen,","we","have","already","evaluated","the","formula\n","throw","new","IllegalArgumentException","(","\"This","should","never","happen",".","Formulas","should","have","already","been","evaluated",".","\"",")",";","default:\n","throw","new","IllegalStateException","(","\"Unexpected","cell","value","type","(","\"","+","cellType","+","\"",")","\"",")",";","}"],"docstring_tokens":["Set","the","cell","type","based","on","the","computed","cell","type","as","part","of","a","formula","evaluation"],"prompt_tokens":[]}
{"code_tokens":["public","RootProperty","getRoot","(",")","{","//","it's","always","the","first","element","in","the","List\n","return","(","RootProperty",")","_properties",".","get","(","0",")",";"],"docstring_tokens":["Get","the","root","property"],"prompt_tokens":[]}
{"code_tokens":["public","void","write","(","POIFSStream","stream",")","throws","IOException","{","OutputStream","os","=","stream",".","getOutputStream","(",")",";","for","(","Property","property",":","_properties",")","{","if","(","property","!=","null",")","{","property",".","writeData","(","os",")",";","}","}","os",".","close","(",")",";","\n\n","//","Update","the","start","position","if","needed\n","if","(","getStartBlock","(",")","!=","stream",".","getStartBlock","(",")",")","{","setStartBlock","(","stream",".","getStartBlock","(",")",")",";","}"],"docstring_tokens":["Writes","the","properties","out","into","the","given","low-level","stream"],"prompt_tokens":[]}
{"code_tokens":["public","int","getSheetNumber","(",")","{","return","field_6_sheetNumber",";"],"docstring_tokens":["For","named","ranges,","and","built-in","names"],"prompt_tokens":[]}
{"code_tokens":["@Override\n","public","void","serialize","(","ContinuableRecordOutput","out",")","{","\n\n","int","field_7_length_custom_menu","=","field_14_custom_menu_text",".","length","(",")",";","int","field_8_length_description_text","=","field_15_description_text",".","length","(",")",";","int","field_9_length_help_topic_text","=","field_16_help_topic_text",".","length","(",")",";","int","field_10_length_status_bar_text","=","field_17_status_bar_text",".","length","(",")",";","\n\n","//","size","defined","below\n","out",".","writeShort","(","getOptionFlag","(",")",")",";","out",".","writeByte","(","getKeyboardShortcut","(",")",")",";","out",".","writeByte","(","getNameTextLength","(",")",")",";","//","Note","-","formula","size","is","not","immediately","before","encoded","formula,","and","does","not","include","any","array","constant","data\n","out",".","writeShort","(","field_13_name_definition",".","getEncodedTokenSize","(",")",")",";","out",".","writeShort","(","field_5_externSheetIndex_plus1",")",";","out",".","writeShort","(","field_6_sheetNumber",")",";","out",".","writeByte","(","field_7_length_custom_menu",")",";","out",".","writeByte","(","field_8_length_description_text",")",";","out",".","writeByte","(","field_9_length_help_topic_text",")",";","out",".","writeByte","(","field_10_length_status_bar_text",")",";","out",".","writeByte","(","field_11_nameIsMultibyte","?","1",":","0",")",";","\n\n","if","(","isBuiltInName","(",")",")","{","//can","send","the","builtin","name","directly","in\n","out",".","writeByte","(","field_12_built_in_code",")",";","}","else","{","String","nameText","=","field_12_name_text",";","if","(","field_11_nameIsMultibyte",")","{","StringUtil",".","putUnicodeLE","(","nameText,","out",")",";","}","else","{","StringUtil",".","putCompressedUnicode","(","nameText,","out",")",";","}","}","field_13_name_definition",".","serializeTokens","(","out",")",";","field_13_name_definition",".","serializeArrayConstantData","(","out",")",";","\n\n","StringUtil",".","putCompressedUnicode","(","getCustomMenuText","(",")",",","out",")",";","StringUtil",".","putCompressedUnicode","(","getDescriptionText","(",")",",","out",")",";","StringUtil",".","putCompressedUnicode","(","getHelpTopicText","(",")",",","out",")",";","StringUtil",".","putCompressedUnicode","(","getStatusBarText","(",")",",","out",")",";"],"docstring_tokens":["NameRecord","can","span","into"],"prompt_tokens":[]}
{"code_tokens":["public","boolean","removeChildRecord","(","EscherRecord","toBeRemoved",")","{","return","_childRecords",".","remove","(","toBeRemoved",")",";"],"docstring_tokens":["Removes","the","given","escher","record","from","the","child","list"],"prompt_tokens":[]}
{"code_tokens":["public","void","addChildBefore","(","EscherRecord","record,","int","insertBeforeRecordId",")","{","int","idx","=","0",";","for","(","EscherRecord","rec",":","this",")","{","if","(","rec",".","getRecordId","(",")","==","(","short",")","insertBeforeRecordId",")","{","break",";","}","//","TODO","-","keep","looping?","Do","we","expect","multiple","matches?\n","idx++",";","}","_childRecords",".","add","(","idx,","record",")",";"],"docstring_tokens":["Add","a","child","record","before","the","record","with","given","recordId"],"prompt_tokens":[]}
{"code_tokens":["@SuppressWarnings","(","\"PointlessArithmeticExpression\"",")","public","void","write","(","final","byte[]","dst,","final","int","offset",")","throws","ArrayStoreException","{","/*","Check","array","size:","*/\n","if","(","dst",".","length","<","LENGTH",")","{","throw","new","ArrayStoreException\n","(","\"Destination","byte[]","must","have","room","for","at","least","16","bytes,","\"","+\n","\"but","has","a","length","of","only","\"","+","dst",".","length","+","\"",".","\"",")",";","}","\n\n","/*","Write","double","word",".","*/\n","dst[0","+","offset]","=","bytes[3]",";","dst[1","+","offset]","=","bytes[2]",";","dst[2","+","offset]","=","bytes[1]",";","dst[3","+","offset]","=","bytes[0]",";","\n\n","/*","Write","first","word",".","*/\n","dst[4","+","offset]","=","bytes[5]",";","dst[5","+","offset]","=","bytes[4]",";","\n\n","/*","Write","second","word",".","*/\n","dst[6","+","offset]","=","bytes[7]",";","dst[7","+","offset]","=","bytes[6]",";","\n\n","/*","Write","8","bytes",".","*/\n","System",".","arraycopy","(","bytes,","8,","dst,","8","+","offset,","8",")",";"],"docstring_tokens":["Writes","the","class","ID","to","a","byte","array","in","the","little-endian","format"],"prompt_tokens":[]}
{"code_tokens":["@Override\n","public","boolean","equals","(","final","Object","o",")","{","return","(","o","instanceof","ClassID",")","&&","Arrays",".","equals","(","bytes,","(","(","ClassID",")","o",")",".","bytes",")",";"],"docstring_tokens":["Checks","whether","this","ClassID","is","equal","to","another","object"],"prompt_tokens":[]}
{"code_tokens":["public","UUID","toUUID","(",")","{","final","long","mostSigBits","=","ByteBuffer",".","wrap","(","bytes,","0,","8",")",".","getLong","(",")",";","final","long","leastSigBits","=","ByteBuffer",".","wrap","(","bytes,","8,","8",")",".","getLong","(",")",";","return","new","UUID","(","mostSigBits,","leastSigBits",")",";"],"docstring_tokens":["Converts","the","ClassID","to","an","UUID"],"prompt_tokens":[]}
{"code_tokens":["public","TextAlign","getTextAlign","(",")","{","ParagraphPropertyFetcher<TextAlign>","fetcher","=","new","ParagraphPropertyFetcher<TextAlign>","(","getLevel","(",")",")","{","public","boolean","fetch","(","CTTextParagraphProperties","props",")","{","if","(","props",".","isSetAlgn","(",")",")","{","TextAlign","val","=","TextAlign",".","values","(",")","[props",".","getAlgn","(",")",".","intValue","(",")","-","1]",";","setValue","(","val",")",";","return","true",";","}","return","false",";","}","}",";","fetchParagraphProperty","(","fetcher",")",";","return","fetcher",".","getValue","(",")","==","null","?","TextAlign",".","LEFT",":","fetcher",".","getValue","(",")",";"],"docstring_tokens":["Returns","the","alignment","that","is","applied","to","the","paragraph"],"prompt_tokens":[]}
{"code_tokens":["public","void","setBulletFontColor","(","Color","color",")","{","CTTextParagraphProperties","pr","=","_p",".","isSetPPr","(",")","?","_p",".","getPPr","(",")",":","_p",".","addNewPPr","(",")",";","CTColor","c","=","pr",".","isSetBuClr","(",")","?","pr",".","getBuClr","(",")",":","pr",".","addNewBuClr","(",")",";","CTSRgbColor","clr","=","c",".","isSetSrgbClr","(",")","?","c",".","getSrgbClr","(",")",":","c",".","addNewSrgbClr","(",")",";","clr",".","setVal","(","new","byte[]","{","(","byte",")","color",".","getRed","(",")",",","(","byte",")","color",".","getGreen","(",")",",","(","byte",")","color",".","getBlue","(",")","}",")",";"],"docstring_tokens":["Set","the","color","to","be","used","on","bullet","characters","within","a","given","paragraph"],"prompt_tokens":[]}
{"code_tokens":["public","void","setIndent","(","double","value",")","{","CTTextParagraphProperties","pr","=","_p",".","isSetPPr","(",")","?","_p",".","getPPr","(",")",":","_p",".","addNewPPr","(",")",";","if","(","value","==","-1",")","{","if","(","pr",".","isSetIndent","(",")",")","pr",".","unsetIndent","(",")",";","}","else","{","pr",".","setIndent","(","Units",".","toEMU","(","value",")",")",";","}"],"docstring_tokens":["Specifies","the","indent","size","that","will","be","applied","to","the","first","line","of","text","in","the","paragraph"],"prompt_tokens":[]}
{"code_tokens":["public","int","getLevel","(",")","{","CTTextParagraphProperties","pr","=","_p",".","getPPr","(",")",";","if","(","pr","==","null",")","return","0",";","\n\n","return","pr",".","getLvl","(",")",";"],"docstring_tokens":["Returns","the","level","of","text","properties","that","this","paragraph","will","follow"],"prompt_tokens":[]}
{"code_tokens":["public","boolean","isBullet","(",")","{","ParagraphPropertyFetcher<Boolean>","fetcher","=","new","ParagraphPropertyFetcher<Boolean>","(","getLevel","(",")",")","{","public","boolean","fetch","(","CTTextParagraphProperties","props",")","{","if","(","props",".","isSetBuNone","(",")",")","{","setValue","(","false",")",";","return","true",";","}","if","(","props",".","isSetBuFont","(",")",")","{","if","(","props",".","isSetBuChar","(",")","||","props",".","isSetBuAutoNum","(",")",")","{","setValue","(","true",")",";","return","true",";","}","/*else","{","//","Excel","treats","text","with","buFont","but","no","char/autonum\n","//","as","not","bulleted\n","//","Possibly","the","font","is","just","used","if","bullets","turned","on","again?\n","}","*/\n","}","return","false",";","}","}",";","fetchParagraphProperty","(","fetcher",")",";","return","fetcher",".","getValue","(",")","==","null","?","false",":","fetcher",".","getValue","(",")",";"],"docstring_tokens":["Returns","whether","this","paragraph","has","bullets"],"prompt_tokens":[]}
{"code_tokens":["public","void","setBullet","(","boolean","flag",")","{","if","(","isBullet","(",")","==","flag",")","return",";","\n\n","CTTextParagraphProperties","pr","=","_p",".","isSetPPr","(",")","?","_p",".","getPPr","(",")",":","_p",".","addNewPPr","(",")",";","if","(","!flag",")","{","pr",".","addNewBuNone","(",")",";","\n\n","if","(","pr",".","isSetBuAutoNum","(",")",")","pr",".","unsetBuAutoNum","(",")",";","if","(","pr",".","isSetBuBlip","(",")",")","pr",".","unsetBuBlip","(",")",";","if","(","pr",".","isSetBuChar","(",")",")","pr",".","unsetBuChar","(",")",";","if","(","pr",".","isSetBuClr","(",")",")","pr",".","unsetBuClr","(",")",";","if","(","pr",".","isSetBuClrTx","(",")",")","pr",".","unsetBuClrTx","(",")",";","if","(","pr",".","isSetBuFont","(",")",")","pr",".","unsetBuFont","(",")",";","if","(","pr",".","isSetBuFontTx","(",")",")","pr",".","unsetBuFontTx","(",")",";","if","(","pr",".","isSetBuSzPct","(",")",")","pr",".","unsetBuSzPct","(",")",";","if","(","pr",".","isSetBuSzPts","(",")",")","pr",".","unsetBuSzPts","(",")",";","if","(","pr",".","isSetBuSzTx","(",")",")","pr",".","unsetBuSzTx","(",")",";","}","else","{","if","(","pr",".","isSetBuNone","(",")",")","pr",".","unsetBuNone","(",")",";","if","(","!pr",".","isSetBuFont","(",")",")","pr",".","addNewBuFont","(",")",".","setTypeface","(","\"Arial\"",")",";","if","(","!pr",".","isSetBuAutoNum","(",")",")","pr",".","addNewBuChar","(",")",".","setChar","(","\"\\u2022\"",")",";","}"],"docstring_tokens":["Set","or","unset","this","paragraph","as","a","bullet","point"],"prompt_tokens":[]}
{"code_tokens":["public","void","setBullet","(","ListAutoNumber","scheme,","int","startAt",")","{","if","(","startAt","<","1",")","throw","new","IllegalArgumentException","(","\"Start","Number","must","be","greater","or","equal","that","1\"",")",";","CTTextParagraphProperties","pr","=","_p",".","isSetPPr","(",")","?","_p",".","getPPr","(",")",":","_p",".","addNewPPr","(",")",";","CTTextAutonumberBullet","lst","=","pr",".","isSetBuAutoNum","(",")","?","pr",".","getBuAutoNum","(",")",":","pr",".","addNewBuAutoNum","(",")",";","lst",".","setType","(","STTextAutonumberScheme",".","Enum",".","forInt","(","scheme",".","ordinal","(",")","+","1",")",")",";","lst",".","setStartAt","(","startAt",")",";","\n\n","if","(","!pr",".","isSetBuFont","(",")",")","pr",".","addNewBuFont","(",")",".","setTypeface","(","\"Arial\"",")",";","if","(","pr",".","isSetBuNone","(",")",")","pr",".","unsetBuNone","(",")",";","//","remove","these","elements","if","present","as","it","results","in","invalid","content","when","opening","in","Excel",".","if","(","pr",".","isSetBuBlip","(",")",")","pr",".","unsetBuBlip","(",")",";","if","(","pr",".","isSetBuChar","(",")",")","pr",".","unsetBuChar","(",")",";"],"docstring_tokens":["Set","this","paragraph","as","an","automatic","numbered","bullet","point"],"prompt_tokens":[]}
{"code_tokens":["public","boolean","isBulletAutoNumber","(",")","{","ParagraphPropertyFetcher<Boolean>","fetcher","=","new","ParagraphPropertyFetcher<Boolean>","(","getLevel","(",")",")","{","public","boolean","fetch","(","CTTextParagraphProperties","props",")","{","if","(","props",".","isSetBuAutoNum","(",")",")","{","setValue","(","true",")",";","return","true",";","}","return","false",";","}","}",";","fetchParagraphProperty","(","fetcher",")",";","return","fetcher",".","getValue","(",")","==","null","?","false",":","fetcher",".","getValue","(",")",";"],"docstring_tokens":["Returns","whether","this","paragraph","has","automatic","numbered","bullets"],"prompt_tokens":[]}
{"code_tokens":["public","int","getBulletAutoNumberStart","(",")","{","ParagraphPropertyFetcher<Integer>","fetcher","=","new","ParagraphPropertyFetcher<Integer>","(","getLevel","(",")",")","{","public","boolean","fetch","(","CTTextParagraphProperties","props",")","{","if","(","props",".","isSetBuAutoNum","(",")","&&","props",".","getBuAutoNum","(",")",".","isSetStartAt","(",")",")","{","setValue","(","props",".","getBuAutoNum","(",")",".","getStartAt","(",")",")",";","return","true",";","}","return","false",";","}","}",";","fetchParagraphProperty","(","fetcher",")",";","return","fetcher",".","getValue","(",")","==","null","?","0",":","fetcher",".","getValue","(",")",";"],"docstring_tokens":["Returns","the","starting","number","if","this","paragraph","has","automatic","numbered","bullets,","otherwise","returns","0"],"prompt_tokens":[]}
{"code_tokens":["public","ListAutoNumber","getBulletAutoNumberScheme","(",")","{","ParagraphPropertyFetcher<ListAutoNumber>","fetcher","=","new","ParagraphPropertyFetcher<ListAutoNumber>","(","getLevel","(",")",")","{","public","boolean","fetch","(","CTTextParagraphProperties","props",")","{","if","(","props",".","isSetBuAutoNum","(",")",")","{","setValue","(","ListAutoNumber",".","values","(",")","[props",".","getBuAutoNum","(",")",".","getType","(",")",".","intValue","(",")","-","1]",")",";","return","true",";","}","return","false",";","}","}",";","fetchParagraphProperty","(","fetcher",")",";","\n\n","//","Note:","documentation","does","not","define","a","default,","return","ListAutoNumber",".","ARABIC_PLAIN","(","1,2,3",".",".",".",")","return","fetcher",".","getValue","(",")","==","null","?","ListAutoNumber",".","ARABIC_PLAIN",":","fetcher",".","getValue","(",")",";"],"docstring_tokens":["Returns","the","auto","number","scheme","if","this","paragraph","has","automatic","numbered","bullets,","otherwise","returns","ListAutoNumber.ARABIC_PLAIN"],"prompt_tokens":[]}
{"code_tokens":["public","short","getFormatFlags","(",")","{","return","field_1_formatFlags",";"],"docstring_tokens":["Get","the","format","flags","field","for","the","Area","record"],"prompt_tokens":[]}
{"code_tokens":["public","void","setFormatFlags","(","short","field_1_formatFlags",")","{","this",".","field_1_formatFlags","=","field_1_formatFlags",";"],"docstring_tokens":["Set","the","format","flags","field","for","the","Area","record"],"prompt_tokens":[]}
{"code_tokens":["public","void","setUID","(","byte[]","uid",")","{","if","(","uid","==","null","||","uid",".","length","!=","16",")","{","throw","new","IllegalArgumentException","(","\"uid","must","be","byte[16]\"",")",";","}","System",".","arraycopy","(","uid,","0,","field_1_UID,","0,","field_1_UID",".","length",")",";"],"docstring_tokens":["Sets","the","first","MD4,","that","specifies","the","unique","identifier","of","the","uncompressed","blip","data"],"prompt_tokens":[]}
{"code_tokens":["public","void","setPrimaryUID","(","byte[]","primaryUID",")","{","if","(","primaryUID","==","null","||","primaryUID",".","length","!=","16",")","{","throw","new","IllegalArgumentException","(","\"primaryUID","must","be","byte[16]\"",")",";","}","System",".","arraycopy","(","primaryUID,","0,","field_2_UID,","0,","field_2_UID",".","length",")",";"],"docstring_tokens":["Sets","the","second","MD4,","that","specifies","the","unique","identifier","of","the","uncompressed","blip","data"],"prompt_tokens":[]}
{"code_tokens":["public","Rectangle","getBounds","(",")","{","return","new","Rectangle","(","field_3_rcBounds_x1,\n","field_3_rcBounds_y1,\n","field_3_rcBounds_x2","-","field_3_rcBounds_x1,\n","field_3_rcBounds_y2","-","field_3_rcBounds_y1",")",";"],"docstring_tokens":["Get","the","clipping","region","of","the","metafile"],"prompt_tokens":[]}
{"code_tokens":["public","void","setSizeEMU","(","Dimension","sizeEMU",")","{","field_4_ptSize_w","=","sizeEMU",".","width",";","field_4_ptSize_h","=","sizeEMU",".","height",";"],"docstring_tokens":["Gets","the","dimensions","of","the","metafile"],"prompt_tokens":[]}
{"code_tokens":["public","boolean","isCompressed","(",")","{","return","(","field_6_fCompression","==","0",")",";"],"docstring_tokens":["Gets","the","compression","of","the","metafile"],"prompt_tokens":[]}
{"code_tokens":["public","short","getSignature","(",")","{","switch","(","EscherRecordTypes",".","forTypeID","(","getRecordId","(",")",")",")","{","case","BLIP_EMF:","return","HSSFPictureData",".","MSOBI_EMF",";","case","BLIP_WMF:","return","HSSFPictureData",".","MSOBI_WMF",";","case","BLIP_PICT:","return","HSSFPictureData",".","MSOBI_PICT",";","}","LOGGER",".","atWarn","(",")",".","log","(","\"Unknown","metafile:","{","}","\",","box","(","getRecordId","(",")",")",")",";","return","0",";"],"docstring_tokens":["Return","the","blip","signature"],"prompt_tokens":[]}
{"code_tokens":["public","static","CFRule12Record","create","(","HSSFSheet","sheet,","ExtendedColor","color",")","{","CFRule12Record","r","=","new","CFRule12Record","(","CONDITION_TYPE_DATA_BAR,\n","ComparisonOperator",".","NO_COMPARISON",")",";","DataBarFormatting","dbf","=","r",".","createDataBarFormatting","(",")",";","dbf",".","setColor","(","color",")",";","dbf",".","setPercentMin","(","(","byte",")","0",")",";","dbf",".","setPercentMax","(","(","byte",")","100",")",";","\n\n","DataBarThreshold","min","=","new","DataBarThreshold","(",")",";","min",".","setType","(","RangeType",".","MIN",".","id",")",";","dbf",".","setThresholdMin","(","min",")",";","\n\n","DataBarThreshold","max","=","new","DataBarThreshold","(",")",";","max",".","setType","(","RangeType",".","MAX",".","id",")",";","dbf",".","setThresholdMax","(","max",")",";","\n\n","return","r",";"],"docstring_tokens":["Creates","a","new","Data","Bar","formatting"],"prompt_tokens":[]}
{"code_tokens":["public","static","String","getFilename","(","URI","uri",")","{","if","(","uri","!=","null",")","{","String","path","=","uri",".","getPath","(",")",";","int","len","=","path",".","length","(",")",";","int","num2","=","len",";","while","(","--num2",">=","0",")","{","char","ch1","=","path",".","charAt","(","num2",")",";","if","(","ch1","==","PackagingURIHelper",".","FORWARD_SLASH_CHAR",")","return","path",".","substring","(","num2","+","1,","len",")",";","}","}","return","\"\"",";"],"docstring_tokens":["Get","file","name","from","the","specified","URI"],"prompt_tokens":[]}
{"code_tokens":["public","static","String","combine","(","String","prefix,","String","suffix",")","{","if","(","!prefix",".","endsWith","(","FORWARD_SLASH_STRING",")","&&","!suffix",".","startsWith","(","FORWARD_SLASH_STRING",")",")","return","prefix","+","FORWARD_SLASH_CHAR","+","suffix",";","else","if","(","prefix",".","endsWith","(","FORWARD_SLASH_STRING",")","^","suffix",".","startsWith","(","FORWARD_SLASH_STRING",")",")","return","prefix","+","suffix",";","else\n","return","\"\"",";"],"docstring_tokens":["Combine","a","string","URI","with","a","prefix","and","a","suffix"],"prompt_tokens":[]}
{"code_tokens":["public","static","URI","relativizeURI","(","URI","sourceURI,","URI","targetURI,","boolean","msCompatible",")","{","StringBuilder","retVal","=","new","StringBuilder","(",")",";","String[]","segmentsSource","=","sourceURI",".","getPath","(",")",".","split","(","\"/\",","-1",")",";","String[]","segmentsTarget","=","targetURI",".","getPath","(",")",".","split","(","\"/\",","-1",")",";","\n\n","//","If","the","source","URI","is","empty\n","if","(","segmentsSource",".","length","==","0",")","{","throw","new","IllegalArgumentException","(","\"Can't","relativize","an","empty","source","URI","!\"",")",";","}","\n\n","//","If","target","URI","is","empty\n","if","(","segmentsTarget",".","length","==","0",")","{","throw","new","IllegalArgumentException","(","\"Can't","relativize","an","empty","target","URI","!\"",")",";","}","\n\n","//","If","the","source","is","the","root,","then","the","relativized\n","//","form","must","actually","be","an","absolute","URI\n","if","(","sourceURI",".","toString","(",")",".","equals","(","\"/\"",")",")","{","String","path","=","targetURI",".","getPath","(",")",";","if","(","msCompatible","&&","path",".","length","(",")",">","0","&&","path",".","charAt","(","0",")","==","'/'",")","{","try","{","targetURI","=","new","URI","(","path",".","substring","(","1",")",")",";","}","catch","(","Exception","e",")","{","LOG",".","atWarn","(",")",".","withThrowable","(","e",")",".","log","(","\"Failed","to","relativize\"",")",";","return","null",";","}","}","return","targetURI",";","}","\n\n\n","//","Relativize","the","source","URI","against","the","target","URI",".","//","First","up,","figure","out","how","many","steps","along","we","can","go\n","//","and","still","have","them","be","the","same\n","int","segmentsTheSame","=","0",";","for","(","int","i","=","0",";","i","<","segmentsSource",".","length","&&","i","<","segmentsTarget",".","length",";","i++",")","{","if","(","segmentsSource[i]",".","equals","(","segmentsTarget[i]",")",")","{","//","Match","so","far,","good\n","segmentsTheSame++",";","}","else","{","break",";","}","}","\n\n","//","If","we","didn't","have","a","good","match","or","at","least","except","a","first","empty","element\n","if","(","(","segmentsTheSame","==","0","||","segmentsTheSame","==","1",")","&&\n","segmentsSource[0]",".","isEmpty","(",")","&&","segmentsTarget[0]",".","isEmpty","(",")",")","{","for","(","int","i","=","0",";","i","<","segmentsSource",".","length","-","2",";","i++",")","{","retVal",".","append","(","\"",".",".","/\"",")",";","}","for","(","int","i","=","0",";","i","<","segmentsTarget",".","length",";","i++",")","{","if","(","segmentsTarget[i]",".","isEmpty","(",")",")","continue",";","retVal",".","append","(","segmentsTarget[i]",")",";","if","(","i","!=","segmentsTarget",".","length","-","1",")","retVal",".","append","(","\"/\"",")",";","}","\n\n","try","{","return","new","URI","(","retVal",".","toString","(",")",")",";","}","catch","(","Exception","e",")","{","LOG",".","atWarn","(",")",".","withThrowable","(","e",")",".","log","(","\"Failed","to","relativize\"",")",";","return","null",";","}","}","\n\n","//","Special","case","for","where","the","two","are","the","same\n","if","(","segmentsTheSame","==","segmentsSource",".","length\n","&&","segmentsTheSame","==","segmentsTarget",".","length",")","{","if","(","sourceURI",".","equals","(","targetURI",")",")","{","//","if","source","and","target","are","the","same","they","should","be","resolved","to","the","last","segment,\n","//","Example:","if","a","slide","references","itself,","e",".","g",".","the","source","URI","is\n","//","\"/ppt/slides/slide1",".","xml\"","and","the","targetURI","is","\"slide1",".","xml\"","then\n","//","this","it","should","be","relativized","as","\"slide1",".","xml\",","i",".","e",".","the","last","segment",".","retVal",".","append","(","segmentsSource[segmentsSource",".","length","-","1]",")",";","}","\n\n","}","else","{","//","Matched","for","so","long,","but","no","more\n\n","//","Do","we","need","to","go","up","a","directory","or","two","from\n","//","the","source","to","get","here?\n","//","(","If","it's","all","the","way","up,","then","don't","bother!",")","if","(","segmentsTheSame","==","1",")","{","retVal",".","append","(","\"/\"",")",";","}","else","{","for","(","int","j","=","segmentsTheSame",";","j","<","segmentsSource",".","length","-","1",";","j++",")","{","retVal",".","append","(","\"",".",".","/\"",")",";","}","}","\n\n","//","Now","go","from","here","on","down\n","for","(","int","j","=","segmentsTheSame",";","j","<","segmentsTarget",".","length",";","j++",")","{","if","(","retVal",".","length","(",")",">","0\n","&&","retVal",".","charAt","(","retVal",".","length","(",")","-","1",")","!=","'/'",")","{","retVal",".","append","(","\"/\"",")",";","}","retVal",".","append","(","segmentsTarget[j]",")",";","}","}","\n\n","//","if","the","target","had","a","fragment","then","append","it","to","the","result\n","String","fragment","=","targetURI",".","getRawFragment","(",")",";","if","(","fragment","!=","null",")","{","retVal",".","append","(","\"#\"",")",".","append","(","fragment",")",";","}","\n\n","try","{","return","new","URI","(","retVal",".","toString","(",")",")",";","}","catch","(","Exception","e",")","{","LOG",".","atWarn","(",")",".","withThrowable","(","e",")",".","log","(","\"Failed","to","relativize\"",")",";","return","null",";","}"],"docstring_tokens":["Fully","relativize","the","source","part","URI","against","the","target","part","URI"],"prompt_tokens":[]}
{"code_tokens":["public","static","URI","resolvePartUri","(","URI","sourcePartUri,","URI","targetUri",")","{","if","(","sourcePartUri","==","null","||","sourcePartUri",".","isAbsolute","(",")",")","{","throw","new","IllegalArgumentException","(","\"sourcePartUri","invalid","-","\"\n","+","sourcePartUri",")",";","}","\n\n","if","(","targetUri","==","null","||","targetUri",".","isAbsolute","(",")",")","{","throw","new","IllegalArgumentException","(","\"targetUri","invalid","-","\"\n","+","targetUri",")",";","}","\n\n","return","sourcePartUri",".","resolve","(","targetUri",")",";"],"docstring_tokens":["Resolve","a","source","uri","against","a","target"],"prompt_tokens":[]}
{"code_tokens":["public","static","URI","getURIFromPath","(","String","path",")","{","URI","retUri",";","try","{","retUri","=","toURI","(","path",")",";","}","catch","(","URISyntaxException","e",")","{","throw","new","IllegalArgumentException","(","\"path\"",")",";","}","return","retUri",";"],"docstring_tokens":["Get","URI","from","a","string","path"],"prompt_tokens":[]}
{"code_tokens":["public","static","PackagePartName","createPartName","(","URI","partUri",")","throws","InvalidFormatException","{","if","(","partUri","==","null",")","throw","new","IllegalArgumentException","(","\"partName\"",")",";","\n\n","return","new","PackagePartName","(","partUri,","true",")",";"],"docstring_tokens":["Create","an","OPC","compliant","part","name","by","throwing","an","exception","if","the","URI","is","not","valid"],"prompt_tokens":[]}
{"code_tokens":["public","static","PackagePartName","createPartName","(","String","partName,\n","PackagePart","relativePart",")","throws","InvalidFormatException","{","URI","newPartNameURI",";","try","{","newPartNameURI","=","resolvePartUri","(","relativePart",".","getPartName","(",")",".","getURI","(",")",",","new","URI","(","partName",")",")",";","}","catch","(","URISyntaxException","e",")","{","throw","new","InvalidFormatException","(","e",".","getMessage","(",")",")",";","}","return","createPartName","(","newPartNameURI",")",";"],"docstring_tokens":["Create","an","OPC","compliant","part","name","by","resolving","it","using","a","base","part"],"prompt_tokens":[]}
{"code_tokens":["public","static","FuncVarPtg","create","(","String","pName,","int","numArgs",")","{","return","create","(","numArgs,","lookupIndex","(","pName",")",")",";"],"docstring_tokens":["Create","a","function","ptg","from","a","string","tokenised","by","the","parser"],"prompt_tokens":[]}
{"code_tokens":["@Internal\n","public","CTSlideIdList","getSlideReferences","(",")","{","if","(","!","getPresentation","(",")",".","isSetSldIdLst","(",")",")","{","getPresentation","(",")",".","setSldIdLst","(","CTSlideIdList",".","Factory",".","newInstance","(",")",")",";","}","return","getPresentation","(",")",".","getSldIdLst","(",")",";"],"docstring_tokens":["Returns","the","references","from","the","presentation","to","its","slides"],"prompt_tokens":[]}
{"code_tokens":["@Internal\n","public","CTSlideMasterIdList","getSlideMasterReferences","(",")","{","return","getPresentation","(",")",".","getSldMasterIdLst","(",")",";"],"docstring_tokens":["Returns","the","references","from","the","presentation","to","its","slide","masters"],"prompt_tokens":[]}
{"code_tokens":["public","ValueEval","getDynamicReference","(","String","workbookName,","String","sheetName,","String","refStrPart1,\n","String","refStrPart2,","boolean","isA1Style",")","{","SheetRefEvaluator","se","=","createExternSheetRefEvaluator","(","workbookName,","sheetName",")",";","if","(","se","==","null",")","{","return","ErrorEval",".","REF_INVALID",";","}","SheetRangeEvaluator","sre","=","new","SheetRangeEvaluator","(","_sheetIndex,","se",")",";","\n\n","SpreadsheetVersion","ssVersion","=","_workbook",".","getSpreadsheetVersion","(",")",";","\n\n","NameType","part1refType","=","isA1Style","?","classifyCellReference","(","refStrPart1,","ssVersion",")",":","getR1C1CellType","(","refStrPart1",")",";","switch","(","part1refType",")","{","case","BAD_CELL_OR_NAMED_RANGE:\n","return","ErrorEval",".","REF_INVALID",";","case","NAMED_RANGE:\n","EvaluationName","nm","=","_workbook",".","getName","(","refStrPart1,","_sheetIndex",")",";","if","(","nm","==","null",")","{","throw","new","RuntimeException","(","\"Specified","name","'\"","+","refStrPart1","+\n","\"'","is","not","found","in","the","workbook","(","sheetIndex=\"","+","_sheetIndex","+","\"",")",".","\"",")",";","}","if","(","!nm",".","isRange","(",")",")","{","throw","new","RuntimeException","(","\"Specified","name","'\"","+","refStrPart1","+","\"'","is","not","a","range","as","expected",".","\"",")",";","}","return","_bookEvaluator",".","evaluateNameFormula","(","nm",".","getNameDefinition","(",")",",","this",")",";","}","if","(","refStrPart2","==","null",")","{","//","no","':'\n","switch","(","part1refType",")","{","case","COLUMN:\n","if","(","isA1Style",")","{","return","ErrorEval",".","REF_INVALID",";","}","else","{","try","{","String","upRef","=","refStrPart1",".","toUpperCase","(","LocaleUtil",".","getUserLocale","(",")",")",";","int","cpos","=","upRef",".","indexOf","(","'C'",")",";","String","cval","=","refStrPart1",".","substring","(","cpos","+","1",")",".","trim","(",")",";","int","absoluteC",";","if","(","cval",".","startsWith","(","\"[\"",")","&&","cval",".","endsWith","(","\"]\"",")",")","{","int","relativeC","=","Integer",".","parseInt","(","cval",".","substring","(","1,","cval",".","length","(",")","-","1",")",".","trim","(",")",")",";","absoluteC","=","getColumnIndex","(",")","+","relativeC",";","}","else","if","(","!cval",".","isEmpty","(",")",")","{","absoluteC","=","Integer",".","parseInt","(","cval",")","-","1",";","}","else","{","return","ErrorEval",".","REF_INVALID",";","}","return","new","LazyAreaEval","(","0,","absoluteC,","ssVersion",".","getLastRowIndex","(",")",",","absoluteC,","sre",")",";","}","catch","(","Exception","e",")","{","return","ErrorEval",".","REF_INVALID",";","}","}","case","ROW:\n","if","(","isA1Style",")","{","return","ErrorEval",".","REF_INVALID",";","}","else","{","try","{","String","upRef","=","refStrPart1",".","toUpperCase","(","LocaleUtil",".","getUserLocale","(",")",")",";","int","rpos","=","upRef",".","indexOf","(","'R'",")",";","String","rval","=","refStrPart1",".","substring","(","rpos","+","1",")",".","trim","(",")",";","int","absoluteR",";","if","(","rval",".","startsWith","(","\"[\"",")","&&","rval",".","endsWith","(","\"]\"",")",")","{","int","relativeR","=","Integer",".","parseInt","(","rval",".","substring","(","1,","rval",".","length","(",")","-","1",")",".","trim","(",")",")",";","absoluteR","=","getRowIndex","(",")","+","relativeR",";","}","else","if","(","!rval",".","isEmpty","(",")",")","{","absoluteR","=","Integer",".","parseInt","(","rval",")","-","1",";","}","else","{","return","ErrorEval",".","REF_INVALID",";","}","return","new","LazyAreaEval","(","absoluteR,","0,","absoluteR,","ssVersion",".","getLastColumnIndex","(",")",",","sre",")",";","}","catch","(","Exception","e",")","{","return","ErrorEval",".","REF_INVALID",";","}","}","case","CELL:\n","CellReference","cr",";","if","(","isA1Style",")","{","cr","=","new","CellReference","(","refStrPart1",")",";","}","else","{","cr","=","applyR1C1Reference","(","new","CellReference","(","getRowIndex","(",")",",","getColumnIndex","(",")",")",",","refStrPart1",")",";","}","return","new","LazyRefEval","(","cr",".","getRow","(",")",",","cr",".","getCol","(",")",",","sre",")",";","}","throw","new","IllegalStateException","(","\"Unexpected","reference","classification","of","'\"","+","refStrPart1","+","\"'",".","\"",")",";","}","NameType","part2refType","=","isA1Style","?","classifyCellReference","(","refStrPart2,","ssVersion",")",":","getR1C1CellType","(","refStrPart2",")",";","switch","(","part2refType",")","{","case","BAD_CELL_OR_NAMED_RANGE:\n","return","ErrorEval",".","REF_INVALID",";","case","NAMED_RANGE:\n","throw","new","RuntimeException","(","\"Cannot","evaluate","'\"","+","refStrPart1\n","+","\"'",".","Indirect","evaluation","of","defined","names","not","supported","yet\"",")",";","}","\n\n","if","(","part2refType","!=","part1refType",")","{","//","LHS","and","RHS","of","':'","must","be","compatible\n","return","ErrorEval",".","REF_INVALID",";","}","int","firstRow,","firstCol,","lastRow,","lastCol",";","switch","(","part1refType",")","{","case","COLUMN:\n","firstRow","=","0",";","lastRow","=","ssVersion",".","getLastRowIndex","(",")",";","firstCol","=","parseRowRef","(","refStrPart1",")",";","lastCol","=","parseRowRef","(","refStrPart2",")",";","break",";","case","ROW:\n","//","support","of","cell","range","in","the","form","of","integer:integer\n","firstCol","=","0",";","lastCol","=","ssVersion",".","getLastColumnIndex","(",")",";","firstRow","=","parseColRef","(","refStrPart1",")",";","lastRow","=","parseColRef","(","refStrPart2",")",";","break",";","case","CELL:\n","CellReference","cr",";","if","(","isA1Style",")","{","cr","=","new","CellReference","(","refStrPart1",")",";","}","else","{","cr","=","applyR1C1Reference","(","new","CellReference","(","getRowIndex","(",")",",","getColumnIndex","(",")",")",",","refStrPart1",")",";","}","firstRow","=","cr",".","getRow","(",")",";","firstCol","=","cr",".","getCol","(",")",";","if","(","isA1Style",")","{","cr","=","new","CellReference","(","refStrPart2",")",";","}","else","{","cr","=","applyR1C1Reference","(","new","CellReference","(","getRowIndex","(",")",",","getColumnIndex","(",")",")",",","refStrPart2",")",";","}","lastRow","=","cr",".","getRow","(",")",";","lastCol","=","cr",".","getCol","(",")",";","break",";","default:\n","throw","new","IllegalStateException","(","\"Unexpected","reference","classification","of","'\"","+","refStrPart1","+","\"'",".","\"",")",";","}","return","new","LazyAreaEval","(","firstRow,","firstCol,","lastRow,","lastCol,","sre",")",";"],"docstring_tokens":["Resolves","a","cell","or","area","reference","dynamically"],"prompt_tokens":[]}
{"code_tokens":["public","short","getOptions","(",")","{","return","field_1_options",";"],"docstring_tokens":["Get","the","options","field","for","the","Dat","record"],"prompt_tokens":[]}
{"code_tokens":["public","void","setOptions","(","short","field_1_options",")","{","this",".","field_1_options","=","field_1_options",";"],"docstring_tokens":["Set","the","options","field","for","the","Dat","record"],"prompt_tokens":[]}
{"code_tokens":["public","void","setWidth","(","Double","width",")","{","if","(","width","==","null",")","{","if","(","props",".","isSetW","(",")",")","{","props",".","unsetW","(",")",";","}","}","else","{","props",".","setW","(","Units",".","toEMU","(","width",")",")",";","}"],"docstring_tokens":["Internally","converts","the","width","to","EMU","units"],"prompt_tokens":[]}
{"code_tokens":["public","String","toString","(",")","{","return","getText","(",")",";"],"docstring_tokens":["Gets","a","string","representation","of","this","object,","primarily","for","debugging"],"prompt_tokens":[]}
{"code_tokens":["public","void","unlink","(","SharedFormulaRecord","sharedFormulaRecord",")","{","SharedFormulaGroup","svg","=","_groupsBySharedFormulaRecord",".","remove","(","sharedFormulaRecord",")",";","if","(","svg","==","null",")","{","throw","new","IllegalStateException","(","\"Failed","to","find","formulas","for","shared","formula\"",")",";","}","_groupsCache","=","null",";","//","be","sure","to","reset","cached","value\n","svg",".","unlinkSharedFormulas","(",")",";"],"docstring_tokens":["Converts","all","FormulaRecords","handled","by","sharedFormulaRecord","to","plain","unshared","formulas"],"prompt_tokens":[]}
{"code_tokens":["public","int","getXAxisUpperLeft","(",")","{","return","field_1_xAxisUpperLeft",";"],"docstring_tokens":["Get","the","x","axis","upper","left","field","for","the","Legend","record"],"prompt_tokens":[]}
{"code_tokens":["public","void","setXAxisUpperLeft","(","int","field_1_xAxisUpperLeft",")","{","this",".","field_1_xAxisUpperLeft","=","field_1_xAxisUpperLeft",";"],"docstring_tokens":["Set","the","x","axis","upper","left","field","for","the","Legend","record"],"prompt_tokens":[]}
{"code_tokens":["public","int","getYAxisUpperLeft","(",")","{","return","field_2_yAxisUpperLeft",";"],"docstring_tokens":["Get","the","y","axis","upper","left","field","for","the","Legend","record"],"prompt_tokens":[]}
{"code_tokens":["public","void","setYAxisUpperLeft","(","int","field_2_yAxisUpperLeft",")","{","this",".","field_2_yAxisUpperLeft","=","field_2_yAxisUpperLeft",";"],"docstring_tokens":["Set","the","y","axis","upper","left","field","for","the","Legend","record"],"prompt_tokens":[]}
{"code_tokens":["public","int","getXSize","(",")","{","return","field_3_xSize",";"],"docstring_tokens":["Get","the","x","size","field","for","the","Legend","record"],"prompt_tokens":[]}
{"code_tokens":["public","void","setXSize","(","int","field_3_xSize",")","{","this",".","field_3_xSize","=","field_3_xSize",";"],"docstring_tokens":["Set","the","x","size","field","for","the","Legend","record"],"prompt_tokens":[]}
{"code_tokens":["public","int","getYSize","(",")","{","return","field_4_ySize",";"],"docstring_tokens":["Get","the","y","size","field","for","the","Legend","record"],"prompt_tokens":[]}
{"code_tokens":["public","void","setYSize","(","int","field_4_ySize",")","{","this",".","field_4_ySize","=","field_4_ySize",";"],"docstring_tokens":["Set","the","y","size","field","for","the","Legend","record"],"prompt_tokens":[]}
{"code_tokens":["public","byte","getType","(",")","{","return","field_5_type",";"],"docstring_tokens":["Get","the","type","field","for","the","Legend","record"],"prompt_tokens":[]}
{"code_tokens":["public","void","setType","(","byte","field_5_type",")","{","this",".","field_5_type","=","field_5_type",";"],"docstring_tokens":["Set","the","type","field","for","the","Legend","record"],"prompt_tokens":[]}
{"code_tokens":["public","byte","getSpacing","(",")","{","return","field_6_spacing",";"],"docstring_tokens":["Get","the","spacing","field","for","the","Legend","record"],"prompt_tokens":[]}
{"code_tokens":["public","void","setSpacing","(","byte","field_6_spacing",")","{","this",".","field_6_spacing","=","field_6_spacing",";"],"docstring_tokens":["Set","the","spacing","field","for","the","Legend","record"],"prompt_tokens":[]}
{"code_tokens":["public","short","getOptions","(",")","{","return","field_7_options",";"],"docstring_tokens":["Get","the","options","field","for","the","Legend","record"],"prompt_tokens":[]}
{"code_tokens":["public","void","setOptions","(","short","field_7_options",")","{","this",".","field_7_options","=","field_7_options",";"],"docstring_tokens":["Set","the","options","field","for","the","Legend","record"],"prompt_tokens":[]}
{"code_tokens":["public","boolean","isAutoXPositioning","(",")","{","return","autoXPositioning",".","isSet","(","field_7_options",")",";"],"docstring_tokens":["position","of","legend","on","the","x","axis","is","automatic"],"prompt_tokens":[]}
{"code_tokens":["public","boolean","isAutoYPositioning","(",")","{","return","autoYPositioning",".","isSet","(","field_7_options",")",";"],"docstring_tokens":["position","of","legend","on","the","y","axis","is","automatic"],"prompt_tokens":[]}
{"code_tokens":["@Override\n","public","HyperlinkType","getType","(",")","{","switch","(","info",".","getInteractiveInfoAtom","(",")",".","getHyperlinkType","(",")",")","{","case","InteractiveInfoAtom",".","LINK_Url:\n","return","(","exHyper",".","getLinkURL","(",")",".","startsWith","(","\"mailto:\"",")",")","?","HyperlinkType",".","EMAIL",":","HyperlinkType",".","URL",";","case","InteractiveInfoAtom",".","LINK_NextSlide:\n","case","InteractiveInfoAtom",".","LINK_PreviousSlide:\n","case","InteractiveInfoAtom",".","LINK_FirstSlide:\n","case","InteractiveInfoAtom",".","LINK_LastSlide:\n","case","InteractiveInfoAtom",".","LINK_SlideNumber:\n","return","HyperlinkType",".","DOCUMENT",";","case","InteractiveInfoAtom",".","LINK_CustomShow:\n","case","InteractiveInfoAtom",".","LINK_OtherPresentation:\n","case","InteractiveInfoAtom",".","LINK_OtherFile:\n","return","HyperlinkType",".","FILE",";","default:\n","case","InteractiveInfoAtom",".","LINK_NULL:\n","return","HyperlinkType",".","NONE",";","}"],"docstring_tokens":["Gets","the","type","of","the","hyperlink","action"],"prompt_tokens":[]}
{"code_tokens":["public","static","List<HSLFHyperlink>","find","(","HSLFTextShape","shape",")","{","return","find","(","shape",".","getTextParagraphs","(",")",")",";"],"docstring_tokens":["Find","hyperlinks","in","a","text","shape"],"prompt_tokens":[]}
{"code_tokens":["public","void","setValue","(","boolean","value",")","{","_value","=","value","?","1",":","0",";","_isError","=","false",";"],"docstring_tokens":["set","the","boolean","value","for","the","cell"],"prompt_tokens":[]}
{"code_tokens":["public","void","setValue","(","FormulaError","value",")","{","switch","(","value",")","{","case","NULL:\n","case","DIV0:\n","case","VALUE:\n","case","REF:\n","case","NAME:\n","case","NUM:\n","case","NA:\n","_value","=","value",".","getCode","(",")",";","_isError","=","true",";","return",";","default:\n","throw","new","IllegalArgumentException","(","\"Error","Value","can","only","be","0,7,15,23,29,36","or","42",".","It","cannot","be","\"+value",".","getCode","(",")","+\"","(","\"+value+\"",")","\"",")",";","}"],"docstring_tokens":["set","the","error","value","for","the","cell"],"prompt_tokens":[]}
{"code_tokens":["public","final","void","setText","(","String","text",")","{","if","(","text","==","null",")","{","throw","new","IllegalArgumentException","(","\"text","must","not","be","null\"",")",";","}","field_2_hasMultibyte","=","StringUtil",".","hasMultibyte","(","text",")",";","field_3_text","=","text",";","\n\n","//","Check","it'll","fit","into","the","space","in","the","record\n","if","(","getDataSize","(",")",">","RecordInputStream",".","MAX_RECORD_DATA_SIZE",")","{","throw","new","IllegalArgumentException","(","\"Header/Footer","string","too","long","(","limit","is","\"\n","+","RecordInputStream",".","MAX_RECORD_DATA_SIZE","+","\"","bytes",")","\"",")",";","}"],"docstring_tokens":["set","the","footer","string"],"prompt_tokens":[]}
{"code_tokens":["public","static","String","getLocaleFromLCID","(","int","lcid",")","{","LocaleID","lid","=","LocaleID",".","lookupByLcid","(","lcid","&","0xFFFF",")",";","return","(","lid","==","null",")","?","\"invalid\"",":","lid",".","getLanguageTag","(",")",";"],"docstring_tokens":["Decode","the","language","ID","from","LCID","value"],"prompt_tokens":[]}
{"code_tokens":["public","short","getXBasis","(",")","{","return","field_1_xBasis",";"],"docstring_tokens":["Get","the","x","Basis","field","for","the","FontBasis","record"],"prompt_tokens":[]}
{"code_tokens":["public","void","setXBasis","(","short","field_1_xBasis",")","{","this",".","field_1_xBasis","=","field_1_xBasis",";"],"docstring_tokens":["Set","the","x","Basis","field","for","the","FontBasis","record"],"prompt_tokens":[]}
{"code_tokens":["public","short","getYBasis","(",")","{","return","field_2_yBasis",";"],"docstring_tokens":["Get","the","y","Basis","field","for","the","FontBasis","record"],"prompt_tokens":[]}
{"code_tokens":["public","void","setYBasis","(","short","field_2_yBasis",")","{","this",".","field_2_yBasis","=","field_2_yBasis",";"],"docstring_tokens":["Set","the","y","Basis","field","for","the","FontBasis","record"],"prompt_tokens":[]}
{"code_tokens":["public","short","getHeightBasis","(",")","{","return","field_3_heightBasis",";"],"docstring_tokens":["Get","the","height","basis","field","for","the","FontBasis","record"],"prompt_tokens":[]}
{"code_tokens":["public","void","setHeightBasis","(","short","field_3_heightBasis",")","{","this",".","field_3_heightBasis","=","field_3_heightBasis",";"],"docstring_tokens":["Set","the","height","basis","field","for","the","FontBasis","record"],"prompt_tokens":[]}
{"code_tokens":["public","short","getScale","(",")","{","return","field_4_scale",";"],"docstring_tokens":["Get","the","scale","field","for","the","FontBasis","record"],"prompt_tokens":[]}
{"code_tokens":["public","void","setScale","(","short","field_4_scale",")","{","this",".","field_4_scale","=","field_4_scale",";"],"docstring_tokens":["Set","the","scale","field","for","the","FontBasis","record"],"prompt_tokens":[]}
{"code_tokens":["public","short","getIndexToFontTable","(",")","{","return","field_5_indexToFontTable",";"],"docstring_tokens":["Get","the","index","to","font","table","field","for","the","FontBasis","record"],"prompt_tokens":[]}
{"code_tokens":["public","void","setIndexToFontTable","(","short","field_5_indexToFontTable",")","{","this",".","field_5_indexToFontTable","=","field_5_indexToFontTable",";"],"docstring_tokens":["Set","the","index","to","font","table","field","for","the","FontBasis","record"],"prompt_tokens":[]}
{"code_tokens":["public","double","evaluateDateArg","(","ValueEval","arg,","int","srcCellRow,","int","srcCellCol",")","throws","EvaluationException","{","ValueEval","ve","=","OperandResolver",".","getSingleValue","(","arg,","srcCellRow,","(","short",")","srcCellCol",")",";","\n\n","if","(","ve","instanceof","StringEval",")","{","String","strVal","=","(","(","StringEval",")","ve",")",".","getStringValue","(",")",";","Double","dVal","=","OperandResolver",".","parseDouble","(","strVal",")",";","if","(","dVal","!=","null",")","{","return","dVal",".","doubleValue","(",")",";","}","LocalDate","date","=","DateParser",".","parseLocalDate","(","strVal",")",";","return","DateUtil",".","getExcelDate","(","date,","false",")",";","}","return","OperandResolver",".","coerceValueToDouble","(","ve",")",";"],"docstring_tokens":["Evaluate","a","generic","ValueEval","argument","to","a","double","value","that","represents","a","date","in","POI"],"prompt_tokens":[]}
{"code_tokens":["public","double[]","evaluateDatesArg","(","ValueEval","arg,","int","srcCellRow,","int","srcCellCol",")","throws","EvaluationException","{","if","(","arg","==","null",")","{","return","new","double[0]",";","}","\n\n","if","(","arg","instanceof","StringEval",")","{","return","new","double[]","{","evaluateDateArg","(","arg,","srcCellRow,","srcCellCol",")","}",";","}","else","if","(","arg","instanceof","AreaEvalBase",")","{","List<Double>","valuesList","=","new","ArrayList<>","(",")",";","AreaEvalBase","area","=","(","AreaEvalBase",")","arg",";","for","(","int","i","=","area",".","getFirstRow","(",")",";","i","<=","area",".","getLastRow","(",")",";","i++",")","{","for","(","int","j","=","area",".","getFirstColumn","(",")",";","j","<=","area",".","getLastColumn","(",")",";","j++",")","{","//","getValue","(",")","is","replaced","with","getAbsoluteValue","(",")","because","loop","variables","i,","j","are\n","//","absolute","indexes","values,","but","getValue","(",")","works","with","relative","indexes","values\n","valuesList",".","add","(","evaluateDateArg","(","area",".","getAbsoluteValue","(","i,","j",")",",","i,","j",")",")",";","}","}","double[]","values","=","new","double[valuesList",".","size","(",")","]",";","for","(","int","i","=","0",";","i","<","valuesList",".","size","(",")",";","i++",")","{","values[i]","=","valuesList",".","get","(","i",")",".","doubleValue","(",")",";","}","return","values",";","}","return","new","double[]","{","OperandResolver",".","coerceValueToDouble","(","arg",")","}",";"],"docstring_tokens":["Evaluate","a","generic","ValueEval","argument","to","an","array","of","double","values","that","represents","dates","in","POI"],"prompt_tokens":[]}
{"code_tokens":["public","double","evaluateNumberArg","(","ValueEval","arg,","int","srcCellRow,","int","srcCellCol",")","throws","EvaluationException","{","if","(","arg","==","null",")","{","return","0f",";","}","\n\n","return","OperandResolver",".","coerceValueToDouble","(","arg",")",";"],"docstring_tokens":["Evaluate","a","generic","ValueEval","argument","to","a","double","value"],"prompt_tokens":[]}
{"code_tokens":["@Override\n","public","void","applyFont","(","int","startIndex,","int","endIndex,","short","fontIndex",")","{","if","(","startIndex",">","endIndex",")","throw","new","IllegalArgumentException","(","\"Start","index","must","be","less","than","end","index",".","\"",")",";","if","(","startIndex","<","0","||","endIndex",">","length","(",")",")","throw","new","IllegalArgumentException","(","\"Start","and","end","index","not","in","range",".","\"",")",";","if","(","startIndex","==","endIndex",")","return",";","\n\n","//Need","to","check","what","the","font","is","currently,","so","we","can","reapply","it","after\n","//the","range","is","completed\n","short","currentFont","=","NO_FONT",";","if","(","endIndex","!=","length","(",")",")","{","currentFont","=","this",".","getFontAtIndex","(","endIndex",")",";","}","\n\n","//Need","to","clear","the","current","formatting","between","the","startIndex","and","endIndex\n","_string","=","cloneStringIfRequired","(",")",";","Iterator<FormatRun>","formatting","=","_string",".","formatIterator","(",")",";","if","(","formatting","!=","null",")","{","while","(","formatting",".","hasNext","(",")",")","{","FormatRun","r","=","formatting",".","next","(",")",";","if","(","(","r",".","getCharacterPos","(",")",">=","startIndex",")","&&","(","r",".","getCharacterPos","(",")","<","endIndex",")",")","formatting",".","remove","(",")",";","}","}","\n\n\n","_string",".","addFormatRun","(","new","FormatRun","(","(","short",")","startIndex,","fontIndex",")",")",";","if","(","endIndex","!=","length","(",")",")","_string",".","addFormatRun","(","new","FormatRun","(","(","short",")","endIndex,","currentFont",")",")",";","\n\n","addToSSTIfRequired","(",")",";"],"docstring_tokens":["Applies","a","font","to","the","specified","characters","of","a","string"],"prompt_tokens":[]}
{"code_tokens":["@Override\n","public","void","applyFont","(","Font","font",")","{","applyFont","(","0,","_string",".","getCharCount","(",")",",","font",")",";"],"docstring_tokens":["Sets","the","font","of","the","entire","string"],"prompt_tokens":[]}
{"code_tokens":["@Override\n","public","void","clearFormatting","(",")","{","_string","=","cloneStringIfRequired","(",")",";","_string",".","clearFormatting","(",")",";","addToSSTIfRequired","(",")",";"],"docstring_tokens":["Removes","any","formatting","that","may","have","been","applied","to","the","string"],"prompt_tokens":[]}
{"code_tokens":["@Override\n","public","int","getIndexOfFormattingRun","(","int","index",")","{","FormatRun","r","=","_string",".","getFormatRun","(","index",")",";","return","r",".","getCharacterPos","(",")",";"],"docstring_tokens":["The","index","within","the","string","to","which","the","specified","formatting","run","applies"],"prompt_tokens":[]}
{"code_tokens":["@Override\n","public","int","compareTo","(","HSSFRichTextString","r",")","{","return","_string",".","compareTo","(","r",".","_string",")",";"],"docstring_tokens":["Compares","one","rich","text","string","to","another"],"prompt_tokens":[]}
{"code_tokens":["@Override\n","public","void","applyFont","(","short","fontIndex",")","{","applyFont","(","0,","_string",".","getCharCount","(",")",",","fontIndex",")",";"],"docstring_tokens":["Applies","the","specified","font","to","the","entire","string"],"prompt_tokens":[]}
{"code_tokens":["public","static","ErrorEval","valueOf","(","int","errorCode",")","{","FormulaError","error","=","FormulaError",".","forInt","(","errorCode",")",";","ErrorEval","eval","=","evals",".","get","(","error",")",";","if","(","eval","!=","null",")","{","return","eval",";","}","else","{","throw","new","RuntimeException","(","\"Unhandled","error","type","for","code","\"","+","errorCode",")",";","}"],"docstring_tokens":["Translates","an","Excel","internal","error","code","into","the","corresponding","POI","ErrorEval","instance"],"prompt_tokens":[]}
{"code_tokens":["@Internal\n","public","short","getBits","(",")","{","return","field_2_bits",";"],"docstring_tokens":["An","FFDataBits","that","specifies","the","type","and","state","of","this","form","field"],"prompt_tokens":[]}
{"code_tokens":["@Internal\n","public","void","setIType","(","byte","value",")","{","field_2_bits","=","(","short",")","iType",".","setValue","(","field_2_bits,","value",")",";"],"docstring_tokens":["Sets","the","iType","field","value"],"prompt_tokens":[]}
{"code_tokens":["@Internal\n","public","byte","getIType","(",")","{","return","(","byte",")","iType",".","getValue","(","field_2_bits",")",";"],"docstring_tokens":["An","unsigned","integer","that","specifies","the","type","of","the","form","field"],"prompt_tokens":[]}
{"code_tokens":["public","static","void","storeDate","(","Date","date,","byte[]","dest",")","{","storeDate","(","date,","dest,","0",")",";"],"docstring_tokens":["Convert","the","supplied","java","Date","into","a","SystemTime","struct,","and","write","it","into","the","supplied","byte","array"],"prompt_tokens":[]}
{"code_tokens":["public","static","Record[]","findChildRecords","(","byte[]","b,","int","start,","int","len",")","{","List<Record>","children","=","new","ArrayList<>","(","5",")",";","\n\n","//","Jump","our","little","way","along,","creating","records","as","we","go\n","int","pos","=","start",";","while","(","pos","<=","(","start+len-8",")",")","{","long","type","=","LittleEndian",".","getUShort","(","b,pos+2",")",";","long","rlen","=","LittleEndian",".","getUInt","(","b,pos+4",")",";","\n\n","//","Sanity","check","the","length\n","int","rleni","=","(","int",")","rlen",";","if","(","rleni","<","0",")","{","rleni","=","0",";","}","\n\n","//","Abort","if","first","record","is","of","type","0000","and","length","FFFF,\n","//","as","that's","a","sign","of","a","screwed","up","record\n","if","(","pos","==","0","&&","type","==","0L","&&","rleni","==","0xffff",")","{","throw","new","CorruptPowerPointFileException","(","\"Corrupt","document","-","starts","with","record","of","type","0000","and","length","0xFFFF\"",")",";","}","\n\n","Record","r","=","createRecordForType","(","type,b,pos,8+rleni",")",";","if","(","r","!=","null",")","{","children",".","add","(","r",")",";","}","pos","+=","8",";","pos","+=","rleni",";","}","\n\n","//","Turn","the","vector","into","an","array,","and","return\n","return","children",".","toArray","(","new","Record[0]",")",";"],"docstring_tokens":["Default","method","for","finding","child","records","of","a","container","record"],"prompt_tokens":[]}
{"code_tokens":["@Override\n","public","HyperlinkType","getType","(",")","{","return","_type",";"],"docstring_tokens":["Return","the","type","of","this","hyperlink"],"prompt_tokens":[]}
{"code_tokens":["@Override\n","public","String","getLabel","(",")","{","return","_ctHyperlink",".","getDisplay","(",")",";"],"docstring_tokens":["Return","text","label","for","this","hyperlink"],"prompt_tokens":[]}
{"code_tokens":["@Override\n","public","void","setLabel","(","String","label",")","{","_ctHyperlink",".","setDisplay","(","label",")",";"],"docstring_tokens":["Sets","text","label","for","this","hyperlink"],"prompt_tokens":[]}
{"code_tokens":["@Internal\n","public","void","setCellReference","(","String","ref",")","{","_ctHyperlink",".","setRef","(","ref",")",";"],"docstring_tokens":["Assigns","this","hyperlink","to","the","given","cell","reference"],"prompt_tokens":[]}
{"code_tokens":["@Override\n","public","int","getFirstColumn","(",")","{","return","buildFirstCellReference","(",")",".","getCol","(",")",";"],"docstring_tokens":["Return","the","column","of","the","first","cell","that","contains","the","hyperlink"],"prompt_tokens":[]}
{"code_tokens":["@Override\n","public","int","getLastColumn","(",")","{","return","buildLastCellReference","(",")",".","getCol","(",")",";"],"docstring_tokens":["Return","the","column","of","the","last","cell","that","contains","the","hyperlink"],"prompt_tokens":[]}
{"code_tokens":["@Override\n","public","int","getFirstRow","(",")","{","return","buildFirstCellReference","(",")",".","getRow","(",")",";"],"docstring_tokens":["Return","the","row","of","the","first","cell","that","contains","the","hyperlink"],"prompt_tokens":[]}
{"code_tokens":["@Override\n","public","int","getLastRow","(",")","{","return","buildLastCellReference","(",")",".","getRow","(",")",";"],"docstring_tokens":["Return","the","row","of","the","last","cell","that","contains","the","hyperlink"],"prompt_tokens":[]}
{"code_tokens":["@Override\n","public","void","setFirstColumn","(","int","col",")","{","int","lastColumn","=","getLastColumn","(",")",";","if","(","col",">","lastColumn",")","lastColumn","=","col",";","String","firstCellRef","=","CellReference",".","convertNumToColString","(","col",")","+","(","getFirstRow","(",")","+","1",")",";","String","lastCellRef","=","CellReference",".","convertNumToColString","(","lastColumn",")","+","(","getLastRow","(",")","+","1",")",";","setCellRange","(","firstCellRef","+","\":\"","+","lastCellRef",")",";"],"docstring_tokens":["Set","the","column","of","the","first","cell","that","contains","the","hyperlink"],"prompt_tokens":[]}
{"code_tokens":["@Override\n","public","void","setLastColumn","(","int","col",")","{","int","firstColumn","=","getFirstColumn","(",")",";","if","(","col","<","firstColumn",")","firstColumn","=","col",";","String","firstCellRef","=","CellReference",".","convertNumToColString","(","firstColumn",")","+","(","getFirstRow","(",")","+","1",")",";","String","lastCellRef","=","CellReference",".","convertNumToColString","(","col",")","+","(","getLastRow","(",")","+","1",")",";","setCellRange","(","firstCellRef","+","\":\"","+","lastCellRef",")",";"],"docstring_tokens":["Set","the","column","of","the","last","cell","that","contains","the","hyperlink"],"prompt_tokens":[]}
{"code_tokens":["@Override\n","public","void","setFirstRow","(","int","row",")","{","int","lastRow","=","getLastRow","(",")",";","if","(","row",">","lastRow",")","lastRow","=","row",";","String","firstCellRef","=","CellReference",".","convertNumToColString","(","getFirstColumn","(",")",")","+","(","row","+","1",")",";","String","lastCellRef","=","CellReference",".","convertNumToColString","(","getLastColumn","(",")",")","+","(","lastRow","+","1",")",";","setCellRange","(","firstCellRef","+","\":\"","+","lastCellRef",")",";"],"docstring_tokens":["Set","the","row","of","the","first","cell","that","contains","the","hyperlink"],"prompt_tokens":[]}
{"code_tokens":["@Override\n","public","void","setLastRow","(","int","row",")","{","int","firstRow","=","getFirstRow","(",")",";","if","(","row","<","firstRow",")","firstRow","=","row",";","String","firstCellRef","=","CellReference",".","convertNumToColString","(","getFirstColumn","(",")",")","+","(","firstRow","+","1",")",";","String","lastCellRef","=","CellReference",".","convertNumToColString","(","getLastColumn","(",")",")","+","(","row","+","1",")",";","setCellRange","(","firstCellRef","+","\":\"","+","lastCellRef",")",";"],"docstring_tokens":["Set","the","row","of","the","last","cell","that","contains","the","hyperlink"],"prompt_tokens":[]}
{"code_tokens":["public","short","getFormatIndex","(",")","{","return","field_1_formatIndex",";"],"docstring_tokens":["Get","the","format","index","field","for","the","NumberFormatIndex","record"],"prompt_tokens":[]}
{"code_tokens":["public","void","setFormatIndex","(","short","field_1_formatIndex",")","{","this",".","field_1_formatIndex","=","field_1_formatIndex",";"],"docstring_tokens":["Set","the","format","index","field","for","the","NumberFormatIndex","record"],"prompt_tokens":[]}
{"code_tokens":["private","static","boolean","shouldCountFeb29","(","SimpleDate","start,","SimpleDate","end",")","{","if","(","isLeapYear","(","start",".","year",")",")","{","if","(","start",".","year","==","end",".","year",")","{","//","note","-","dates","may","not","actually","span","Feb-29,","but","it","gets","counted","anyway","in","this","case\n","return","true",";","}","\n\n","switch","(","start",".","month",")","{","case","SimpleDate",".","JANUARY:\n","case","SimpleDate",".","FEBRUARY:\n","return","true",";","}","return","false",";","}","\n\n","if","(","isLeapYear","(","end",".","year",")",")","{","switch","(","end",".","month",")","{","case","SimpleDate",".","JANUARY:\n","return","false",";","case","SimpleDate",".","FEBRUARY:\n","break",";","default:\n","return","true",";","}","return","end",".","day","==","LONG_FEB_LEN",";","}","return","false",";"],"docstring_tokens":["Assumes","dates","are","no","more","than","1","year","apart"],"prompt_tokens":[]}
{"code_tokens":["public","XSSFClientAnchor","getPreferredSize","(","double","scale",")","{","XSSFClientAnchor","anchor","=","getClientAnchor","(",")",";","if","(","anchor","==","null",")","{","LOG",".","atWarn","(",")",".","log","(","\"picture","is","not","anchored","via","client","anchor","-","ignoring","resize","call\"",")",";","return","null",";","}","\n\n","XSSFPictureData","data","=","getPictureData","(",")",";","Dimension","size","=","getImageDimension","(","data",".","getPackagePart","(",")",",","data",".","getPictureType","(",")",")",";","double","scaledWidth","=","size",".","getWidth","(",")","*","scale",";","double","scaledHeight","=","size",".","getHeight","(",")","*","scale",";","\n\n","float","w","=","0",";","int","col2","=","anchor",".","getCol1","(",")","-1",";","\n\n","while","(","w","<=","scaledWidth",")","{","w","+=","getColumnWidthInPixels","(","++col2",")",";","}","\n\n","assert","(","w",">","scaledWidth",")",";","double","cw","=","getColumnWidthInPixels","(","col2",")",";","double","deltaW","=","w","-","scaledWidth",";","int","dx2","=","(","int",")","(","Units",".","EMU_PER_PIXEL","*","(","cw","-","deltaW",")",")",";","\n\n","anchor",".","setCol2","(","col2",")",";","anchor",".","setDx2","(","dx2",")",";","\n\n","double","h","=","0",";","int","row2","=","anchor",".","getRow1","(",")","-1",";","\n\n","while","(","h","<=","scaledHeight",")","{","h","+=","getRowHeightInPixels","(","++row2",")",";","}","\n\n","assert","(","h",">","scaledHeight",")",";","double","ch","=","getRowHeightInPixels","(","row2",")",";","double","deltaH","=","h","-","scaledHeight",";","int","dy2","=","(","int",")","(","Units",".","EMU_PER_PIXEL","*","(","ch","-","deltaH",")",")",";","anchor",".","setRow2","(","row2",")",";","anchor",".","setDy2","(","dy2",")",";","\n\n","CTPositiveSize2D","size2d","=","getCTPicture","(",")",".","getSpPr","(",")",".","getXfrm","(",")",".","getExt","(",")",";","size2d",".","setCx","(","(","long",")","(","scaledWidth","*","Units",".","EMU_PER_PIXEL",")",")",";","size2d",".","setCy","(","(","long",")","(","scaledHeight","*","Units",".","EMU_PER_PIXEL",")",")",";","\n\n","return","anchor",";"],"docstring_tokens":["Calculate","the","preferred","size","for","this","picture"],"prompt_tokens":[]}
{"code_tokens":["public","static","void","main","(","final","String[]","args",")","throws","IOException","{","if","(","args",".","length","==","0",")","{","System",".","err",".","println","(","\"Must","specify","at","least","one","file","to","view\"",")",";","System",".","exit","(","1",")",";","}","\n\n","boolean","withSizes","=","false",";","boolean","newPOIFS","=","true",";","for","(","String","arg",":","args",")","{","if","(","arg",".","equalsIgnoreCase","(","\"-size\"",")","||","arg",".","equalsIgnoreCase","(","\"-sizes\"",")",")","{","withSizes","=","true",";","}","else","if","(","arg",".","equalsIgnoreCase","(","\"-old\"",")","||","arg",".","equalsIgnoreCase","(","\"-old-poifs\"",")",")","{","newPOIFS","=","false",";","}","else","{","if","(","newPOIFS",")","{","viewFile","(","arg,","withSizes",")",";","}","else","{","viewFileOld","(","arg,","withSizes",")",";","}","}","}"],"docstring_tokens":["Display","the","entries","of","multiple","POIFS","files"],"prompt_tokens":[]}
{"code_tokens":["@Override\n","public","void","setVisible","(","boolean","visible",")","{","if","(","_vmlShape","!=","null",")","{","if","(","visible",")","{","_vmlShape",".","setStyle","(","\"position:absolute\"",")",";","CTClientData","clientData","=","_vmlShape",".","getClientDataArray","(","0",")",";","if","(","clientData","!=","null","&&","clientData",".","sizeOfVisibleArray","(",")","==","0",")","{","clientData",".","addVisible","(","STTrueFalseBlank",".","X",")",";","}","}","else","{","_vmlShape",".","setStyle","(","\"position:absolute",";","visibility:hidden\"",")",";","CTClientData","clientData","=","_vmlShape",".","getClientDataArray","(","0",")",";","if","(","clientData","!=","null","&&","clientData",".","sizeOfVisibleArray","(",")",">","0",")","{","clientData",".","removeVisible","(","0",")",";","}","}","}","_comments",".","commentUpdated","(","this",")",";"],"docstring_tokens":["Sets","whether","this","comment","is","visible"],"prompt_tokens":[]}
{"code_tokens":["@Override\n","public","void","setString","(","RichTextString","string",")","{","if","(","!","(","string","instanceof","XSSFRichTextString",")",")","{","throw","new","IllegalArgumentException","(","\"Only","XSSFRichTextString","argument","is","supported\"",")",";","}","_str","=","(","XSSFRichTextString",")","string",";","_comment",".","setText","(","_str",".","getCTRst","(",")",")",";","_comments",".","commentUpdated","(","this",")",";"],"docstring_tokens":["Sets","the","rich","text","string","used","by","this","comment"],"prompt_tokens":[]}
{"code_tokens":["public","void","concatenate","(","byte[]","array",")","{","if","(","array","==","null",")","{","throw","new","IllegalArgumentException","(","\"array","cannot","be","null\"",")",";","}","arrays",".","add","(","array",")",";"],"docstring_tokens":["Concatenates","an","array","onto","the","end","of","our","array"],"prompt_tokens":[]}
{"code_tokens":["public","boolean","marshall","(","PackagePart","part,","OutputStream","out",")","throws","OpenXML4JException","{","return","part",".","save","(","out",")",";"],"docstring_tokens":["Save","the","given","part","in","the","output","stream","by","using","the","save","method","of","the","part"],"prompt_tokens":[]}
{"code_tokens":["public","boolean","isFooterVisible","(",")","{","return","isVisible","(","HeadersFootersAtom",".","fHasFooter,","Placeholder",".","FOOTER",")",";"],"docstring_tokens":["whether","the","footer","text","is","displayed"],"prompt_tokens":[]}
{"code_tokens":["public","boolean","isHeaderVisible","(",")","{","return","isVisible","(","HeadersFootersAtom",".","fHasHeader,","Placeholder",".","HEADER",")",";"],"docstring_tokens":["whether","the","header","text","is","displayed"],"prompt_tokens":[]}
{"code_tokens":["public","boolean","isDateTimeVisible","(",")","{","return","isVisible","(","HeadersFootersAtom",".","fHasDate,","Placeholder",".","DATETIME",")",";"],"docstring_tokens":["whether","the","date","is","displayed","in","the","footer"],"prompt_tokens":[]}
{"code_tokens":["public","boolean","isSlideNumberVisible","(",")","{","return","isVisible","(","HeadersFootersAtom",".","fHasSlideNumber,","Placeholder",".","SLIDE_NUMBER",")",";"],"docstring_tokens":["whether","the","slide","number","is","displayed","in","the","footer"],"prompt_tokens":[]}
{"code_tokens":["protected","static","CTGroupShape","prototype","(",")","{","if","(","prototype","==","null",")","{","CTGroupShape","shape","=","CTGroupShape",".","Factory",".","newInstance","(",")",";","\n\n","CTGroupShapeNonVisual","nv","=","shape",".","addNewNvGrpSpPr","(",")",";","CTNonVisualDrawingProps","nvpr","=","nv",".","addNewCNvPr","(",")",";","nvpr",".","setId","(","0",")",";","nvpr",".","setName","(","\"Group","0\"",")",";","nv",".","addNewCNvGrpSpPr","(",")",";","CTGroupShapeProperties","sp","=","shape",".","addNewGrpSpPr","(",")",";","CTGroupTransform2D","t2d","=","sp",".","addNewXfrm","(",")",";","CTPositiveSize2D","p1","=","t2d",".","addNewExt","(",")",";","p1",".","setCx","(","0",")",";","p1",".","setCy","(","0",")",";","CTPoint2D","p2","=","t2d",".","addNewOff","(",")",";","p2",".","setX","(","0",")",";","p2",".","setY","(","0",")",";","CTPositiveSize2D","p3","=","t2d",".","addNewChExt","(",")",";","p3",".","setCx","(","0",")",";","p3",".","setCy","(","0",")",";","CTPoint2D","p4","=","t2d",".","addNewChOff","(",")",";","p4",".","setX","(","0",")",";","p4",".","setY","(","0",")",";","\n\n","prototype","=","shape",";","}","return","prototype",";"],"docstring_tokens":["Initialize","default","structure","of","a","new","shape","group"],"prompt_tokens":[]}
{"code_tokens":["public","XSSFShapeGroup","createGroup","(","XSSFChildAnchor","anchor",")","{","CTGroupShape","ctShape","=","ctGroup",".","addNewGrpSp","(",")",";","ctShape",".","set","(","prototype","(",")",")",";","\n\n","XSSFShapeGroup","shape","=","new","XSSFShapeGroup","(","getDrawing","(",")",",","ctShape",")",";","shape",".","parent","=","this",";","shape",".","anchor","=","anchor",";","\n\n","//","TODO:","calculate","bounding","rectangle","on","anchor","and","set","off/ext","correctly\n\n","CTGroupTransform2D","xfrm","=","shape",".","getCTGroupShape","(",")",".","getGrpSpPr","(",")",".","getXfrm","(",")",";","CTTransform2D","t2","=","anchor",".","getCTTransform2D","(",")",";","xfrm",".","setOff","(","t2",".","getOff","(",")",")",";","xfrm",".","setExt","(","t2",".","getExt","(",")",")",";","//","child","offset","is","left","to","0,0\n","xfrm",".","setChExt","(","t2",".","getExt","(",")",")",";","xfrm",".","setFlipH","(","t2",".","getFlipH","(",")",")",";","xfrm",".","setFlipV","(","t2",".","getFlipV","(",")",")",";","\n\n","return","shape",";"],"docstring_tokens":["Creates","a","group","shape"],"prompt_tokens":[]}
{"code_tokens":["public","static","byte[]","getBytesInCodePage","(","final","String","string,","final","int","codepage",")","throws","UnsupportedEncodingException","{","String","encoding","=","codepageToEncoding","(","codepage",")",";","return","string",".","getBytes","(","encoding",")",";"],"docstring_tokens":["Converts","a","string","into","bytes,","in","the","equivalent","character","encoding","to","the","supplied","codepage","number"],"prompt_tokens":[]}
{"code_tokens":["public","static","String","getStringFromCodePage","(","final","byte[]","string,","final","int","offset,","final","int","length,","final","int","codepage",")","throws","UnsupportedEncodingException","{","String","encoding","=","codepageToEncoding","(","codepage",")",";","return","new","String","(","string,","offset,","length,","encoding",")",";"],"docstring_tokens":["Converts","the","bytes","into","a","String,","based","on","the","equivalent","character","encoding","to","the","supplied","codepage","number"],"prompt_tokens":[]}
{"code_tokens":["public","static","InternalWorkbook","createWorkbook","(",")","{","LOG",".","atDebug","(",")",".","log","(","\"creating","new","workbook","from","scratch\"",")",";","\n\n","InternalWorkbook","retval","=","new","InternalWorkbook","(",")",";","List<Record>","records","=","new","ArrayList<>","(","30",")",";","retval",".","records",".","setRecords","(","records",")",";","List<FormatRecord>","formats","=","retval",".","formats",";","\n\n","records",".","add","(","createBOF","(",")",")",";","records",".","add","(","new","InterfaceHdrRecord","(","CODEPAGE",")",")",";","records",".","add","(","createMMS","(",")",")",";","records",".","add","(","InterfaceEndRecord",".","instance",")",";","//","store","the","write-access","record","at","the","proper","position\n","retval",".","getWriteAccess","(",")",";","records",".","add","(","createCodepage","(",")",")",";","records",".","add","(","createDSF","(",")",")",";","records",".","add","(","createTabId","(",")",")",";","retval",".","records",".","setTabpos","(","records",".","size","(",")","-","1",")",";","records",".","add","(","createFnGroupCount","(",")",")",";","records",".","add","(","createWindowProtect","(",")",")",";","records",".","add","(","createProtect","(",")",")",";","retval",".","records",".","setProtpos","(","records",".","size","(",")","-","1",")",";","records",".","add","(","createPassword","(",")",")",";","records",".","add","(","createProtectionRev4","(",")",")",";","records",".","add","(","createPasswordRev4","(",")",")",";","retval",".","windowOne","=","createWindowOne","(",")",";","records",".","add","(","retval",".","windowOne",")",";","records",".","add","(","createBackup","(",")",")",";","retval",".","records",".","setBackuppos","(","records",".","size","(",")","-","1",")",";","records",".","add","(","createHideObj","(",")",")",";","records",".","add","(","createDateWindow1904","(",")",")",";","records",".","add","(","createPrecision","(",")",")",";","records",".","add","(","createRefreshAll","(",")",")",";","records",".","add","(","createBookBool","(",")",")",";","records",".","add","(","createFont","(",")",")",";","records",".","add","(","createFont","(",")",")",";","records",".","add","(","createFont","(",")",")",";","records",".","add","(","createFont","(",")",")",";","retval",".","records",".","setFontpos","(","records",".","size","(",")","-","1",")",";","//","last","font","record","position\n","retval",".","numfonts","=","4",";","\n\n","//","set","up","format","records\n","for","(","int","i","=","0",";","i","<=","7",";","i++",")","{","FormatRecord","rec","=","createFormat","(","i",")",";","retval",".","maxformatid","=","Math",".","max","(","retval",".","maxformatid,","rec",".","getIndexCode","(",")",")",";","formats",".","add","(","rec",")",";","records",".","add","(","rec",")",";","}","\n\n","for","(","int","k","=","0",";","k","<","21",";","k++",")","{","records",".","add","(","InternalWorkbook",".","createExtendedFormat","(","k",")",")",";","retval",".","numxfs++",";","}","retval",".","records",".","setXfpos","(","records",".","size","(",")","-","1",")",";","for","(","int","k","=","0",";","k","<","6",";","k++",")","{","records",".","add","(","InternalWorkbook",".","createStyle","(","k",")",")",";","}","records",".","add","(","InternalWorkbook",".","createUseSelFS","(",")",")",";","\n\n","int","nBoundSheets","=","1",";","//","now","just","do","1\n","for","(","int","k","=","0",";","k","<","nBoundSheets",";","k++",")","{","BoundSheetRecord","bsr","=","createBoundSheet","(","k",")",";","\n\n","records",".","add","(","bsr",")",";","retval",".","boundsheets",".","add","(","bsr",")",";","retval",".","records",".","setBspos","(","records",".","size","(",")","-","1",")",";","}","records",".","add","(","InternalWorkbook",".","createCountry","(",")",")",";","for","(","int","k","=","0",";","k","<","nBoundSheets",";","k++",")","{","retval",".","getOrCreateLinkTable","(",")",".","checkExternSheet","(","k",")",";","}","retval",".","sst","=","new","SSTRecord","(",")",";","records",".","add","(","retval",".","sst",")",";","records",".","add","(","InternalWorkbook",".","createExtendedSST","(",")",")",";","\n\n","records",".","add","(","EOFRecord",".","instance",")",";","LOG",".","atDebug","(",")",".","log","(","\"exit","create","new","workbook","from","scratch\"",")",";","\n\n","return","retval",";"],"docstring_tokens":["Creates","an","empty","workbook","object","with","three","blank","sheets","and","all","the","empty","fields"],"prompt_tokens":[]}
{"code_tokens":["public","boolean","isSheetVeryHidden","(","int","sheetnum",")","{","return","getBoundSheetRec","(","sheetnum",")",".","isVeryHidden","(",")",";"],"docstring_tokens":["Gets","the","very","hidden","flag","for","a","given","sheet"],"prompt_tokens":[]}
{"code_tokens":["\n\n","public","int","getNumSheets","(",")","{","LOG",".","atDebug","(",")",".","log","(","\"getNumSheets=","{","}","\",","box","(","boundsheets",".","size","(",")",")",")",";","return","boundsheets",".","size","(",")",";"],"docstring_tokens":["returns","the","number","of","boundsheet","objects","contained","in","this","workbook"],"prompt_tokens":[]}
{"code_tokens":["\n\n","public","int","getNumExFormats","(",")","{","LOG",".","atDebug","(",")",".","log","(","\"getXF=","{","}","\",","box","(","numxfs",")",")",";","return","numxfs",";"],"docstring_tokens":["get","the","number","of","ExtendedFormat","records","contained","in","this","workbook"],"prompt_tokens":[]}
{"code_tokens":["\n\n","public","ExtendedFormatRecord","createCellXF","(",")","{","ExtendedFormatRecord","xf","=","createExtendedFormat","(",")",";","\n\n","records",".","add","(","records",".","getXfpos","(",")","+1,","xf",")",";","records",".","setXfpos","(","records",".","getXfpos","(",")","+","1",")",";","numxfs++",";","return","xf",";"],"docstring_tokens":["creates","a","new","Cell-type","Extended","Format","Record","and","adds","it","to","the","end","of","ExtendedFormatRecords","collection"],"prompt_tokens":[]}
{"code_tokens":["public","UnicodeString","getSSTString","(","int","str",")","{","if","(","sst","==","null",")","{","insertSST","(",")",";","}","UnicodeString","retval","=","sst",".","getString","(","str",")",";","\n\n","LOG",".","atTrace","(",")",".","log","(","\"Returning","SST","for","index=","{","}","String=","{","}","\",","box","(","str",")",",","retval",")",";","return","retval",";"],"docstring_tokens":["given","an","index","into","the","SST","table,","this","function","returns","the","corresponding","String","value"],"prompt_tokens":[]}
{"code_tokens":["private","static","BackupRecord","createBackup","(",")","{","BackupRecord","retval","=","new","BackupRecord","(",")",";","\n\n","retval",".","setBackup","(","(","short",")","0",")",";","//","by","default","DONT","save","backups","of","files",".",".",".","just","loose","data\n","return","retval",";"],"docstring_tokens":["creates","the","Backup","record","with","backup","set","to","0"],"prompt_tokens":[]}
{"code_tokens":["private","static","HideObjRecord","createHideObj","(",")","{","HideObjRecord","retval","=","new","HideObjRecord","(",")",";","retval",".","setHideObj","(","(","short",")","0",")",";","//","by","default","set","hide","object","off\n","return","retval",";"],"docstring_tokens":["creates","the","HideObj","record","with","hide","object","set","to","0"],"prompt_tokens":[]}
{"code_tokens":["private","static","DateWindow1904Record","createDateWindow1904","(",")","{","DateWindow1904Record","retval","=","new","DateWindow1904Record","(",")",";","\n\n","retval",".","setWindowing","(","(","short",")","0",")",";","//","don't","EVER","use","1904","date","windowing",".",".",".","tick","tock",".",".","return","retval",";"],"docstring_tokens":["creates","the","DateWindow1904","record","with","windowing","set","to","0"],"prompt_tokens":[]}
{"code_tokens":["private","static","PrecisionRecord","createPrecision","(",")","{","PrecisionRecord","retval","=","new","PrecisionRecord","(",")",";","retval",".","setFullPrecision","(","true",")",";","//","always","use","real","numbers","in","calculations!\n","return","retval",";"],"docstring_tokens":["creates","the","Precision","record","with","precision","set","to","true"],"prompt_tokens":[]}
{"code_tokens":["private","static","BookBoolRecord","createBookBool","(",")","{","BookBoolRecord","retval","=","new","BookBoolRecord","(",")",";","retval",".","setSaveLinkValues","(","(","short",")","0",")",";","return","retval",";"],"docstring_tokens":["creates","the","BookBool","record","with","saveLinkValues","set","to","0"],"prompt_tokens":[]}
{"code_tokens":["private","static","ExtendedFormatRecord","createExtendedFormat","(",")","{","ExtendedFormatRecord","retval","=","new","ExtendedFormatRecord","(",")",";","\n\n","retval",".","setFontIndex","(","(","short",")","0",")",";","retval",".","setFormatIndex","(","(","short",")","0x0",")",";","retval",".","setCellOptions","(","(","short",")","0x1",")",";","retval",".","setAlignmentOptions","(","(","short",")","0x20",")",";","retval",".","setIndentionOptions","(","(","short",")","0",")",";","retval",".","setBorderOptions","(","(","short",")","0",")",";","retval",".","setPaletteOptions","(","(","short",")","0",")",";","retval",".","setAdtlPaletteOptions","(","(","short",")","0",")",";","retval",".","setFillPaletteOptions","(","(","short",")","0x20c0",")",";","retval",".","setTopBorderPaletteIdx","(","HSSFColorPredefined",".","BLACK",".","getIndex","(",")",")",";","retval",".","setBottomBorderPaletteIdx","(","HSSFColorPredefined",".","BLACK",".","getIndex","(",")",")",";","retval",".","setLeftBorderPaletteIdx","(","HSSFColorPredefined",".","BLACK",".","getIndex","(",")",")",";","retval",".","setRightBorderPaletteIdx","(","HSSFColorPredefined",".","BLACK",".","getIndex","(",")",")",";","return","retval",";"],"docstring_tokens":["creates","an","default","cell","type","ExtendedFormatRecord","object"],"prompt_tokens":[]}
{"code_tokens":["public","String","findSheetFirstNameFromExternSheet","(","int","externSheetIndex",")","{","int","indexToSheet","=","linkTable",".","getFirstInternalSheetIndexForExtIndex","(","externSheetIndex",")",";","return","findSheetNameFromIndex","(","indexToSheet",")",";"],"docstring_tokens":["Finds","the","first","sheet","name","by","his","extern","sheet","index"],"prompt_tokens":[]}
{"code_tokens":["public","short","getFormat","(","String","format,","boolean","createIfNotFound",")","{","for","(","FormatRecord","r",":","formats",")","{","if","(","r",".","getFormatString","(",")",".","equals","(","format",")",")","{","return","(","short",")","r",".","getIndexCode","(",")",";","}","}","\n\n","if","(","createIfNotFound",")","{","return","(","short",")","createFormat","(","format",")",";","}","\n\n","return","-1",";"],"docstring_tokens":["Returns","a","format","index","that","matches","the","passed","in","format"],"prompt_tokens":[]}
{"code_tokens":["public","PaletteRecord","getCustomPalette","(",")","{","PaletteRecord","palette",";","int","palettePos","=","records",".","getPalettepos","(",")",";","if","(","palettePos","!=","-1",")","{","Record","rec","=","records",".","get","(","palettePos",")",";","if","(","rec","instanceof","PaletteRecord",")","{","palette","=","(","PaletteRecord",")","rec",";","}","else","{","throw","new","RuntimeException","(","\"InternalError:","Expected","PaletteRecord","but","got","a","'\"+rec+\"'\"",")",";","}","}","else","{","palette","=","createPalette","(",")",";","//Add","the","palette","record","after","the","bof","which","is","always","the","first","record\n","records",".","add","(","1,","palette",")",";","records",".","setPalettepos","(","1",")",";","}","return","palette",";"],"docstring_tokens":["Returns","the","custom","palette","in","use","for","this","workbook;","if","a","custom","palette","record","does","not","exist,","then","it","is","created"],"prompt_tokens":[]}
{"code_tokens":["public","void","createDrawingGroup","(",")","{","if","(","drawingManager","==","null",")","{","EscherContainerRecord","dggContainer","=","new","EscherContainerRecord","(",")",";","EscherDggRecord","dgg","=","new","EscherDggRecord","(",")",";","EscherOptRecord","opt","=","new","EscherOptRecord","(",")",";","EscherSplitMenuColorsRecord","splitMenuColors","=","new","EscherSplitMenuColorsRecord","(",")",";","\n\n","dggContainer",".","setRecordId","(","(","short",")","0xF000",")",";","dggContainer",".","setOptions","(","(","short",")","0x000F",")",";","dgg",".","setRecordId","(","EscherDggRecord",".","RECORD_ID",")",";","dgg",".","setOptions","(","(","short",")","0x0000",")",";","dgg",".","setShapeIdMax","(","1024",")",";","dgg",".","setNumShapesSaved","(","0",")",";","dgg",".","setDrawingsSaved","(","0",")",";","dgg",".","setFileIdClusters","(","new","EscherDggRecord",".","FileIdCluster[]","{","}",")",";","drawingManager","=","new","DrawingManager2","(","dgg",")",";","EscherContainerRecord","bstoreContainer","=","null",";","if","(","!escherBSERecords",".","isEmpty","(",")",")","{","bstoreContainer","=","new","EscherContainerRecord","(",")",";","bstoreContainer",".","setRecordId","(","EscherContainerRecord",".","BSTORE_CONTAINER",")",";","bstoreContainer",".","setOptions","(","(","short",")","(","(","escherBSERecords",".","size","(",")","<<","4",")","|","0xF",")",")",";","for","(","EscherRecord","escherRecord",":","escherBSERecords",")","{","bstoreContainer",".","addChildRecord","(","escherRecord",")",";","}","}","opt",".","setRecordId","(","(","short",")","0xF00B",")",";","opt",".","setOptions","(","(","short",")","0x0033",")",";","opt",".","addEscherProperty","(","new","EscherBoolProperty","(","EscherPropertyTypes",".","TEXT__SIZE_TEXT_TO_FIT_SHAPE,","524296",")",")",";","opt",".","addEscherProperty","(","new","EscherRGBProperty","(","EscherPropertyTypes",".","FILL__FILLCOLOR,","0x08000041",")",")",";","opt",".","addEscherProperty","(","new","EscherRGBProperty","(","EscherPropertyTypes",".","LINESTYLE__COLOR,","134217792",")",")",";","splitMenuColors",".","setRecordId","(","(","short",")","0xF11E",")",";","splitMenuColors",".","setOptions","(","(","short",")","0x0040",")",";","splitMenuColors",".","setColor1","(","0x0800000D",")",";","splitMenuColors",".","setColor2","(","0x0800000C",")",";","splitMenuColors",".","setColor3","(","0x08000017",")",";","splitMenuColors",".","setColor4","(","0x100000F7",")",";","\n\n","dggContainer",".","addChildRecord","(","dgg",")",";","if","(","bstoreContainer","!=","null",")","{","dggContainer",".","addChildRecord","(","bstoreContainer",")",";","}","dggContainer",".","addChildRecord","(","opt",")",";","dggContainer",".","addChildRecord","(","splitMenuColors",")",";","\n\n","int","dgLoc","=","findFirstRecordLocBySid","(","DrawingGroupRecord",".","sid",")",";","if","(","dgLoc","==","-1",")","{","DrawingGroupRecord","drawingGroup","=","new","DrawingGroupRecord","(",")",";","drawingGroup",".","addEscherRecord","(","dggContainer",")",";","int","loc","=","findFirstRecordLocBySid","(","CountryRecord",".","sid",")",";","\n\n","getRecords","(",")",".","add","(","loc+1,","drawingGroup",")",";","}","else","{","DrawingGroupRecord","drawingGroup","=","new","DrawingGroupRecord","(",")",";","drawingGroup",".","addEscherRecord","(","dggContainer",")",";","getRecords","(",")",".","set","(","dgLoc,","drawingGroup",")",";","}","\n\n","}"],"docstring_tokens":["Creates","a","primary","drawing","group","record"],"prompt_tokens":[]}
{"code_tokens":["@Internal\n","public","WorkbookRecordList","getWorkbookRecordList","(",")","{","return","records",";"],"docstring_tokens":["Only","for","internal","calls","-","code","based","on","this","is","not","supported"],"prompt_tokens":[]}
{"code_tokens":["public","static","POITextExtractor","createExtractor","(","InputStream","input",")","throws","IOException","{","return","createExtractor","(","input,","getCurrentUserPassword","(",")",")",";"],"docstring_tokens":["Create","an","extractor","that","can","be","used","to","read","text","from","the","given","file"],"prompt_tokens":[]}
{"code_tokens":["public","static","String","getBuiltinFormat","(","int","index",")","{","if","(","index","<","0","||","index",">=_formats",".","length",")","{","return","null",";","}","return","_formats[index]",";"],"docstring_tokens":["Get","the","format","string","that","matches","the","given","format","index"],"prompt_tokens":[]}
{"code_tokens":["public","short","getBorderType","(",")","{","return","field_1_borderType",";"],"docstring_tokens":["Get","the","border","type","field","for","the","Frame","record"],"prompt_tokens":[]}
{"code_tokens":["public","void","setBorderType","(","short","field_1_borderType",")","{","this",".","field_1_borderType","=","field_1_borderType",";"],"docstring_tokens":["Set","the","border","type","field","for","the","Frame","record"],"prompt_tokens":[]}
{"code_tokens":["public","short","getOptions","(",")","{","return","field_2_options",";"],"docstring_tokens":["Get","the","options","field","for","the","Frame","record"],"prompt_tokens":[]}
{"code_tokens":["public","void","setOptions","(","short","field_2_options",")","{","this",".","field_2_options","=","field_2_options",";"],"docstring_tokens":["Set","the","options","field","for","the","Frame","record"],"prompt_tokens":[]}
{"code_tokens":["//@Override\n","public","long","readUInt","(",")","{","long","retNum","=","readInt","(",")",";","return","retNum","&","0x00FFFFFFFFL",";"],"docstring_tokens":["get","an","unsigned","int","value","from","an","InputStream"],"prompt_tokens":[]}
{"code_tokens":["public","void","addSection","(","final","Section","section",")","{","sections",".","add","(","section",")",";"],"docstring_tokens":["Adds","a","section","to","this","property","set"],"prompt_tokens":[]}
{"code_tokens":["public","void","clearSections","(",")","{","sections",".","clear","(",")",";"],"docstring_tokens":["Removes","all","sections","from","this","property","set"],"prompt_tokens":[]}
{"code_tokens":["public","void","write","(","final","OutputStream","out",")","throws","IOException,","WritingNotSupportedException","{","\n\n","out",".","write","(","toBytes","(",")",")",";","\n\n","/*","Indicate","that","we're","done","*/\n","out",".","close","(",")",";"],"docstring_tokens":["Writes","the","property","set","to","an","output","stream"],"prompt_tokens":[]}
{"code_tokens":["public","void","write","(","final","DirectoryEntry","dir,","final","String","name",")","throws","WritingNotSupportedException,","IOException","{","/*","If","there","is","already","an","entry","with","the","same","name,","remove","it",".","*/\n","if","(","dir",".","hasEntry","(","name",")",")","{","final","Entry","e","=","dir",".","getEntry","(","name",")",";","e",".","delete","(",")",";","}","\n\n","/*","Create","the","new","entry",".","*/\n","dir",".","createDocument","(","name,","toInputStream","(",")",")",";"],"docstring_tokens":["Writes","a","property","set","to","a","document","in","a","POI","filesystem","directory"],"prompt_tokens":[]}
{"code_tokens":["public","boolean","isSummaryInformation","(",")","{","return","!sections",".","isEmpty","(",")","&&","matchesSummary","(","getFirstSection","(",")",".","getFormatID","(",")",",","SummaryInformation",".","FORMAT_ID",")",";"],"docstring_tokens":["Checks","whether","this","PropertySet","represents","a","Summary","Information"],"prompt_tokens":[]}
{"code_tokens":["public","boolean","isDocumentSummaryInformation","(",")","{","return","!sections",".","isEmpty","(",")","&&","matchesSummary","(","getFirstSection","(",")",".","getFormatID","(",")",",","DocumentSummaryInformation",".","FORMAT_ID",")",";"],"docstring_tokens":["Checks","whether","this","PropertySet","is","a","Document","Summary","Information"],"prompt_tokens":[]}
{"code_tokens":["@SuppressWarnings","(","\"WeakerAccess\"",")","public","Section","getFirstSection","(",")","{","if","(","sections",".","isEmpty","(",")",")","{","throw","new","MissingSectionException","(","\"Property","set","does","not","contain","any","sections",".","\"",")",";","}","return","sections",".","get","(","0",")",";"],"docstring_tokens":["Gets","the","PropertySets","first","section"],"prompt_tokens":[]}
{"code_tokens":["@Override\n","public","boolean","equals","(","final","Object","o",")","{","if","(","!","(","o","instanceof","PropertySet",")",")","{","return","false",";","}","final","PropertySet","ps","=","(","PropertySet",")","o",";","int","byteOrder1","=","ps",".","getByteOrder","(",")",";","int","byteOrder2","=","getByteOrder","(",")",";","ClassID","classID1","=","ps",".","getClassID","(",")",";","ClassID","classID2","=","getClassID","(",")",";","int","format1","=","ps",".","getFormat","(",")",";","int","format2","=","getFormat","(",")",";","int","osVersion1","=","ps",".","getOSVersion","(",")",";","int","osVersion2","=","getOSVersion","(",")",";","int","sectionCount1","=","ps",".","getSectionCount","(",")",";","int","sectionCount2","=","getSectionCount","(",")",";","if","(","byteOrder1","!=","byteOrder2","||\n","!classID1",".","equals","(","classID2",")","||\n","format1","!=","format2","||\n","osVersion1","!=","osVersion2","||\n","sectionCount1","!=","sectionCount2",")","{","return","false",";","}","\n\n","/*","Compare","the","sections:","*/\n","return","getSections","(",")",".","containsAll","(","ps",".","getSections","(",")",")",";"],"docstring_tokens":["Returns","true","if","the","PropertySet","is","equal","to","the","specified","parameter,","else","false"],"prompt_tokens":[]}
{"code_tokens":["public","static","short","getShort","(","byte[]","data,","int","offset",")","{","int","b0","=","data[offset]","&","0xFF",";","int","b1","=","data[offset","+","1]","&","0xFF",";","return","(","short",")","(","(","b1","<<","8",")","+","(","b0",")",")",";"],"docstring_tokens":["get","a","short","value","from","a","byte","array"],"prompt_tokens":[]}
{"code_tokens":["public","static","long","getUInt","(","byte[]","data,","int","offset",")","{","long","retNum","=","getInt","(","data,","offset",")",";","return","retNum","&","0x00FFFFFFFFL",";"],"docstring_tokens":["get","an","unsigned","int","value","from","a","byte","array"],"prompt_tokens":[]}
{"code_tokens":["public","static","int","getUShort","(","byte[]","data,","int","offset",")","{","int","b0","=","data[offset]","&","0xFF",";","int","b1","=","data[offset","+","1]","&","0xFF",";","return","(","b1","<<","8",")","+","(","b0",")",";"],"docstring_tokens":["get","an","unsigned","short","value","from","a","byte","array"],"prompt_tokens":[]}
{"code_tokens":["public","static","void","putInt","(","byte[]","data,","int","offset,","int","value",")","{","int","i","=","offset",";","data[i++]","=","(","byte",")","(","(","value",")","&","0xFF",")",";","data[i++]","=","(","byte",")","(","(","value",">>>","8",")","&","0xFF",")",";","data[i++]","=","(","byte",")","(","(","value",">>>","16",")","&","0xFF",")",";","data[i]","=","(","byte",")","(","(","value",">>>","24",")","&","0xFF",")",";"],"docstring_tokens":["put","an","int","value","into","a","byte","array"],"prompt_tokens":[]}
{"code_tokens":["public","static","void","putLong","(","byte[]","data,","int","offset,","long","value",")","{","data[offset","]","=","(","byte",")","(","(","value",")","&","0xFF",")",";","data[offset","+","1]","=","(","byte",")","(","(","value",">>>","8",")","&","0xFF",")",";","data[offset","+","2]","=","(","byte",")","(","(","value",">>>","16",")","&","0xFF",")",";","data[offset","+","3]","=","(","byte",")","(","(","value",">>>","24",")","&","0xFF",")",";","data[offset","+","4]","=","(","byte",")","(","(","value",">>>","32",")","&","0xFF",")",";","data[offset","+","5]","=","(","byte",")","(","(","value",">>>","40",")","&","0xFF",")",";","data[offset","+","6]","=","(","byte",")","(","(","value",">>>","48",")","&","0xFF",")",";","data[offset","+","7]","=","(","byte",")","(","(","value",">>>","56",")","&","0xFF",")",";"],"docstring_tokens":["put","a","long","value","into","a","byte","array"],"prompt_tokens":[]}
{"code_tokens":["public","static","void","putShort","(","byte[]","data,","int","offset,","short","value",")","{","int","i","=","offset",";","data[i++]","=","(","byte",")","(","(","value",")","&","0xFF",")",";","data[i","]","=","(","byte",")","(","(","value",">>>","8",")","&","0xFF",")",";"],"docstring_tokens":["put","a","short","value","into","a","byte","array"],"prompt_tokens":[]}
{"code_tokens":["public","static","void","putUShort","(","byte[]","data,","int","offset,","int","value",")","{","int","i","=","offset",";","data[i++]","=","(","byte",")","(","(","value",")","&","0xFF",")",";","data[i","]","=","(","byte",")","(","(","value",">>>","8",")","&","0xFF",")",";"],"docstring_tokens":["put","an","unsigned","short","value","into","a","byte","array"],"prompt_tokens":[]}
{"code_tokens":["public","static","int","readInt","(","InputStream","stream",")","throws","IOException","{","int","ch1","=","stream",".","read","(",")",";","int","ch2","=","stream",".","read","(",")",";","int","ch3","=","stream",".","read","(",")",";","int","ch4","=","stream",".","read","(",")",";","if","(","(","ch1","|","ch2","|","ch3","|","ch4",")","<","0",")","{","throw","new","BufferUnderrunException","(",")",";","}","return","(","ch4","<<","24",")","+","(","ch3","<<","16",")","+","(","ch2","<<","8",")","+","(","ch1",")",";"],"docstring_tokens":["get","an","int","value","from","an","InputStream"],"prompt_tokens":[]}
{"code_tokens":["public","static","long","readLong","(","InputStream","stream",")","throws","IOException","{","int","ch1","=","stream",".","read","(",")",";","int","ch2","=","stream",".","read","(",")",";","int","ch3","=","stream",".","read","(",")",";","int","ch4","=","stream",".","read","(",")",";","int","ch5","=","stream",".","read","(",")",";","int","ch6","=","stream",".","read","(",")",";","int","ch7","=","stream",".","read","(",")",";","int","ch8","=","stream",".","read","(",")",";","if","(","(","ch1","|","ch2","|","ch3","|","ch4","|","ch5","|","ch6","|","ch7","|","ch8",")","<","0",")","{","throw","new","BufferUnderrunException","(",")",";","}","\n\n","return","(","(","long",")","ch8","<<","56",")","+","(","(","long",")","ch7","<<","48",")","+","(","(","long",")","ch6","<<","40",")","+","(","(","long",")","ch5","<<","32",")","+","(","(","long",")","ch4","<<","24",")","+","//","cast","to","long","to","preserve","bit","31\n","//","(","sign","bit","for","ints",")","(","ch3","<<","16",")","+","(","ch2","<<","8",")","+","(","ch1",")",";"],"docstring_tokens":["get","a","long","value","from","an","InputStream"],"prompt_tokens":[]}
{"code_tokens":["public","XSLFSlideLayout","getLayout","(","SlideLayout","type",")","{","for","(","XSLFSlideLayout","layout",":","getLayouts","(",")",".","values","(",")",")","{","if","(","layout",".","getType","(",")","==","type",")","{","return","layout",";","}","}","return","null",";"],"docstring_tokens":["Get","the","slide","layout","by","type"],"prompt_tokens":[]}
{"code_tokens":["public","boolean","isItalic","(",")","{","return","italic",".","isSet","(","field_2_attributes",")",";"],"docstring_tokens":["get","whether","the","font","is","to","be","italics","or","not"],"prompt_tokens":[]}
{"code_tokens":["public","boolean","isStruckout","(",")","{","return","strikeout",".","isSet","(","field_2_attributes",")",";"],"docstring_tokens":["get","whether","the","font","is","to","be","stricken","out","or","not"],"prompt_tokens":[]}
{"code_tokens":["public","void","cloneStyleFrom","(","FontRecord","source",")","{","field_1_font_height","=","source",".","field_1_font_height",";","field_2_attributes","=","source",".","field_2_attributes",";","field_3_color_palette_index","=","source",".","field_3_color_palette_index",";","field_4_bold_weight","=","source",".","field_4_bold_weight",";","field_5_super_sub_script","=","source",".","field_5_super_sub_script",";","field_6_underline","=","source",".","field_6_underline",";","field_7_family","=","source",".","field_7_family",";","field_8_charset","=","source",".","field_8_charset",";","field_9_zero","=","source",".","field_9_zero",";","field_11_font_name","=","source",".","field_11_font_name",";"],"docstring_tokens":["Clones","all","the","font","style","information","from","another","FontRecord,","onto","this","one"],"prompt_tokens":[]}
{"code_tokens":["@Override\n","public","XSSFConditionalFormatting","getConditionalFormattingAt","(","int","index",")","{","checkIndex","(","index",")",";","CTConditionalFormatting","cf","=","_sheet",".","getCTWorksheet","(",")",".","getConditionalFormattingArray","(","index",")",";","return","new","XSSFConditionalFormatting","(","_sheet,","cf",")",";"],"docstring_tokens":["gets","Conditional","Formatting","object","at","a","particular","index"],"prompt_tokens":[]}
{"code_tokens":["@Override\n","public","void","removeConditionalFormatting","(","int","index",")","{","checkIndex","(","index",")",";","_sheet",".","getCTWorksheet","(",")",".","removeConditionalFormatting","(","index",")",";"],"docstring_tokens":["removes","a","Conditional","Formatting","object","by","index"],"prompt_tokens":[]}
{"code_tokens":["public","static","int","pixelToEMU","(","int","pixels",")","{","return","pixels*EMU_PER_PIXEL",";"],"docstring_tokens":["Converts","pixels","to","EMUs"],"prompt_tokens":[]}
{"code_tokens":["public","void","addCRL","(","byte[]","encodedCrl",")","{","if","(","this",".","crls",".","stream","(",")",".","noneMatch","(","by","->","Arrays",".","equals","(","by,","encodedCrl",")",")",")","{","this",".","crls",".","add","(","encodedCrl",")",";","}"],"docstring_tokens":["Adds","a","CRL","to","this","revocation","data","set"],"prompt_tokens":[]}
{"code_tokens":["public","void","addOCSP","(","byte[]","encodedOcsp",")","{","this",".","ocsps",".","add","(","encodedOcsp",")",";"],"docstring_tokens":["Adds","an","OCSP","response","to","this","revocation","data","set"],"prompt_tokens":[]}
{"code_tokens":["public","boolean","hasOCSPs","(",")","{","return","!this",".","ocsps",".","isEmpty","(",")",";"],"docstring_tokens":["Returns","true","if","this","revocation","data","set","holds","OCSP","responses"],"prompt_tokens":[]}
{"code_tokens":["public","boolean","hasCRLs","(",")","{","return","!this",".","crls",".","isEmpty","(",")",";"],"docstring_tokens":["Returns","true","if","this","revocation","data","set","holds","CRLs"],"prompt_tokens":[]}
{"code_tokens":["public","Map<MAPIProperty,","List<PropertyValue>>","getProperties","(",")","{","Map<MAPIProperty,","List<PropertyValue>>","props","=\n","new","HashMap<>","(","properties",".","size","(",")",")",";","for","(","MAPIProperty","prop",":","properties",".","keySet","(",")",")","{","props",".","put","(","prop,","getValues","(","prop",")",")",";","}","return","props",";"],"docstring_tokens":["Returns","all","the","properties","in","the","chunk,","along","with","their","values"],"prompt_tokens":[]}
{"code_tokens":["public","void","writeProperties","(","DirectoryEntry","directory",")","throws","IOException","{","try","(","UnsynchronizedByteArrayOutputStream","baos","=","new","UnsynchronizedByteArrayOutputStream","(",")",")","{","List<PropertyValue>","values","=","writeProperties","(","baos",")",";","\n\n","//","write","the","header","data","with","the","properties","declaration\n","try","(","InputStream","is","=","baos",".","toInputStream","(",")",")","{","directory",".","createDocument","(","PropertiesChunk",".","NAME,","is",")",";","}","\n\n","//","write","the","property","values\n","writeNodeData","(","directory,","values",")",";","}"],"docstring_tokens":["Writes","this","chunk","in","the","specified","DirectoryEntry"],"prompt_tokens":[]}
{"code_tokens":["protected","List<PropertyValue>","writeProperties","(","OutputStream","out",")","throws","IOException","{","List<PropertyValue>","variableLengthProperties","=","new","ArrayList<>","(",")",";","for","(","Entry<MAPIProperty,","PropertyValue>","entry",":","properties",".","entrySet","(",")",")","{","MAPIProperty","property","=","entry",".","getKey","(",")",";","PropertyValue","value","=","entry",".","getValue","(",")",";","if","(","value","==","null",")","{","continue",";","}","if","(","property",".","id","<","0",")","{","continue",";","}","//","generic","header\n","//","page","23,","point","2",".","4",".","2\n","//","tag","is","the","property","id","and","its","type\n","long","tag","=","Long",".","parseLong","(","getFileName","(","property,","value",".","getActualType","(",")",")",",","16",")",";","LittleEndian",".","putUInt","(","tag,","out",")",";","LittleEndian",".","putUInt","(","value",".","getFlags","(",")",",","out",")",";","//","readable","+","writable\n\n","MAPIType","type","=","getTypeMapping","(","value",".","getActualType","(",")",")",";","if","(","type",".","isFixedLength","(",")",")","{","//","page","11,","point","2",".","1",".","2\n","writeFixedLengthValueHeader","(","out,","property,","type,","value",")",";","}","else","{","//","page","12,","point","2",".","1",".","3\n","writeVariableLengthValueHeader","(","out,","property,","type,","value",")",";","variableLengthProperties",".","add","(","value",")",";","}","}","return","variableLengthProperties",";"],"docstring_tokens":["Writes","the","header","of","the","properties"],"prompt_tokens":[]}
{"code_tokens":["@Internal\n","public","void","setReserved1","(","byte","value",")","{","field_4_flags","=","(","byte",")","reserved1",".","setValue","(","field_4_flags,","value",")",";"],"docstring_tokens":["Sets","the","reserved1","field","value"],"prompt_tokens":[]}
{"code_tokens":["static","CTGraphicalObjectFrame","prototype","(","int","shapeId,","String","rID,","Rectangle2D","anchor",")","{","CTGraphicalObjectFrame","frame","=","CTGraphicalObjectFrame",".","Factory",".","newInstance","(",")",";","CTGraphicalObjectFrameNonVisual","nvGr","=","frame",".","addNewNvGraphicFramePr","(",")",";","\n\n","CTNonVisualDrawingProps","cnv","=","nvGr",".","addNewCNvPr","(",")",";","cnv",".","setName","(","\"Chart","\"","+","shapeId",")",";","cnv",".","setId","(","shapeId",")",";","nvGr",".","addNewCNvGraphicFramePr","(",")",".","addNewGraphicFrameLocks","(",")",".","setNoGrp","(","true",")",";","nvGr",".","addNewNvPr","(",")",";","\n\n","CTTransform2D","xfrm","=","frame",".","addNewXfrm","(",")",";","\n\n","CTPoint2D","off","=","xfrm",".","addNewOff","(",")",";","off",".","setX","(","(","int",")","anchor",".","getX","(",")",")",";","off",".","setY","(","(","int",")","anchor",".","getY","(",")",")",";","\n\n","CTPositiveSize2D","ext","=","xfrm",".","addNewExt","(",")",";","ext",".","setCx","(","(","int",")","anchor",".","getWidth","(",")",")",";","ext",".","setCy","(","(","int",")","anchor",".","getHeight","(",")",")",";","\n\n","xfrm",".","setExt","(","ext",")",";","xfrm",".","setOff","(","off",")",";","\n\n","CTGraphicalObjectData","gr","=","frame",".","addNewGraphic","(",")",".","addNewGraphicData","(",")",";","XmlCursor","grCur","=","gr",".","newCursor","(",")",";","try","{","grCur",".","toNextToken","(",")",";","grCur",".","beginElement","(","new","QName","(","CHART_URI,","\"chart\"",")",")",";","grCur",".","insertAttributeWithValue","(","\"id\",","PackageRelationshipTypes",".","CORE_PROPERTIES_ECMA376_NS,","rID",")",";","}","finally","{","grCur",".","dispose","(",")",";","}","\n\n","gr",".","setUri","(","CHART_URI",")",";","return","frame",";"],"docstring_tokens":["method","to","add","graphic","frame","for","XSLF","chart"],"prompt_tokens":[]}
{"code_tokens":["public","static","ToHtml","create","(","Workbook","wb,","Appendable","output",")","{","return","new","ToHtml","(","wb,","output",")",";"],"docstring_tokens":["Creates","a","new","examples","to","HTML","for","the","given","workbook"],"prompt_tokens":[]}
{"code_tokens":["private","Map<Integer,","Integer>","computeWidths","(","Sheet","sheet",")","{","Map<Integer,","Integer>","ret","=","new","TreeMap<>","(",")",";","int","tableWidth","=","0",";","\n\n","ensureColumnBounds","(","sheet",")",";","\n\n","//","compute","width","of","the","header","column\n","int","lastRowNum","=","sheet",".","getLastRowNum","(",")",";","int","headerCharCount","=","String",".","valueOf","(","lastRowNum",")",".","length","(",")",";","int","headerColWidth","=","widthToPixels","(","(","headerCharCount","+","1",")","*","256",".","0",")",";","ret",".","put","(","IDX_HEADER_COL_WIDTH,","headerColWidth",")",";","tableWidth","+=","headerColWidth",";","\n\n","for","(","int","i","=","firstColumn",";","i","<","endColumn",";","i++",")","{","int","colWidth","=","widthToPixels","(","sheet",".","getColumnWidth","(","i",")",")",";","ret",".","put","(","i,","colWidth",")",";","tableWidth","+=","colWidth",";","}","\n\n","ret",".","put","(","IDX_TABLE_WIDTH,","tableWidth",")",";","return","ret",";"],"docstring_tokens":["computes","the","column","widths,","defined","by","the","sheet"],"prompt_tokens":[]}
{"code_tokens":["public","void","clearAll","(",")","{","this",".","defaultContentType",".","clear","(",")",";","if","(","this",".","overrideContentType","!=","null",")","{","this",".","overrideContentType",".","clear","(",")",";","}"],"docstring_tokens":["Clear","all","content","types"],"prompt_tokens":[]}
{"code_tokens":["private","void","parseContentTypesFile","(","InputStream","in",")","throws","InvalidFormatException","{","try","{","Document","xmlContentTypetDoc","=","DocumentHelper",".","readDocument","(","in",")",";","\n\n","//","Default","content","types\n","NodeList","defaultTypes","=","xmlContentTypetDoc",".","getDocumentElement","(",")",".","getElementsByTagNameNS","(","TYPES_NAMESPACE_URI,","DEFAULT_TAG_NAME",")",";","int","defaultTypeCount","=","defaultTypes",".","getLength","(",")",";","for","(","int","i","=","0",";","i","<","defaultTypeCount",";","i++",")","{","Element","element","=","(","Element",")","defaultTypes",".","item","(","i",")",";","String","extension","=","element",".","getAttribute","(","EXTENSION_ATTRIBUTE_NAME",")",";","String","contentType","=","element",".","getAttribute","(","CONTENT_TYPE_ATTRIBUTE_NAME",")",";","addDefaultContentType","(","extension,","contentType",")",";","}","\n\n","//","Overriden","content","types\n","NodeList","overrideTypes","=","xmlContentTypetDoc",".","getDocumentElement","(",")",".","getElementsByTagNameNS","(","TYPES_NAMESPACE_URI,","OVERRIDE_TAG_NAME",")",";","int","overrideTypeCount","=","overrideTypes",".","getLength","(",")",";","for","(","int","i","=","0",";","i","<","overrideTypeCount",";","i++",")","{","Element","element","=","(","Element",")","overrideTypes",".","item","(","i",")",";","URI","uri","=","new","URI","(","element",".","getAttribute","(","PART_NAME_ATTRIBUTE_NAME",")",")",";","PackagePartName","partName","=","PackagingURIHelper",".","createPartName","(","uri",")",";","String","contentType","=","element",".","getAttribute","(","CONTENT_TYPE_ATTRIBUTE_NAME",")",";","addOverrideContentType","(","partName,","contentType",")",";","}","}","catch","(","URISyntaxException","|","IOException","|","SAXException","e",")","{","throw","new","InvalidFormatException","(","e",".","getMessage","(",")",")",";","}"],"docstring_tokens":["Parse","the","content","types","part"],"prompt_tokens":[]}
{"code_tokens":["public","boolean","save","(","OutputStream","outStream",")","{","Document","xmlOutDoc","=","DocumentHelper",".","createDocument","(",")",";","\n\n","//","Building","namespace\n","Element","typesElem","=","xmlOutDoc",".","createElementNS","(","TYPES_NAMESPACE_URI,","TYPES_TAG_NAME",")",";","xmlOutDoc",".","appendChild","(","typesElem",")",";","\n\n","//","Adding","default","types\n","for","(","Entry<String,","String>","entry",":","defaultContentType",".","entrySet","(",")",")","{","appendDefaultType","(","typesElem,","entry",")",";","}","\n\n","//","Adding","specific","types","if","any","exist\n","if","(","overrideContentType","!=","null",")","{","for","(","Entry<PackagePartName,","String>","entry",":","overrideContentType\n",".","entrySet","(",")",")","{","appendSpecificTypes","(","typesElem,","entry",")",";","}","}","xmlOutDoc",".","normalize","(",")",";","\n\n","//","Save","content","in","the","specified","output","stream\n","return","this",".","saveImpl","(","xmlOutDoc,","outStream",")",";"],"docstring_tokens":["Save","the","contents","type","part"],"prompt_tokens":[]}
{"code_tokens":["private","void","appendSpecificTypes","(","Element","root,\n","Entry<PackagePartName,","String>","entry",")","{","Element","specificType","=","root",".","getOwnerDocument","(",")",".","createElementNS","(","TYPES_NAMESPACE_URI,","OVERRIDE_TAG_NAME",")",";","specificType",".","setAttribute","(","PART_NAME_ATTRIBUTE_NAME,","entry",".","getKey","(",")",".","getName","(",")",")",";","specificType",".","setAttribute","(","CONTENT_TYPE_ATTRIBUTE_NAME,","entry",".","getValue","(",")",")",";","root",".","appendChild","(","specificType",")",";"],"docstring_tokens":["Use","to","append","specific","type","XML","elements,","use","by","the","save","method"],"prompt_tokens":[]}
{"code_tokens":["private","void","appendDefaultType","(","Element","root,","Entry<String,","String>","entry",")","{","Element","defaultType","=","root",".","getOwnerDocument","(",")",".","createElementNS","(","TYPES_NAMESPACE_URI,","DEFAULT_TAG_NAME",")",";","defaultType",".","setAttribute","(","EXTENSION_ATTRIBUTE_NAME,","entry",".","getKey","(",")",")",";","defaultType",".","setAttribute","(","CONTENT_TYPE_ATTRIBUTE_NAME,","entry",".","getValue","(",")",")",";","root",".","appendChild","(","defaultType",")",";"],"docstring_tokens":["Use","to","append","default","types","XML","elements,","use","by","the","save","method"],"prompt_tokens":[]}
{"code_tokens":["public","static","String","getBiffName","(","int","sid",")","{","//","Note","to","POI","developers:\n","//","Make","sure","you","delete","the","corresponding","entry","from\n","//","this","method","any","time","a","new","Record","subclass","is","created",".","switch","(","sid",")","{","case","PRINTSIZE_0033:","return","\"PRINTSIZE\"",";","case","PLS_004D:","return","\"PLS\"",";","case","0x0050:","return","\"DCON\"",";","//","Data","Consolidation","Information\n","case","0x007F:","return","\"IMDATA\"",";","case","SHEETPR_0081:","return","\"SHEETPR\"",";","case","SORT_0090:","return","\"SORT\"",";","//","Sorting","Options\n","case","0x0094:","return","\"LHRECORD\"",";","//",".","WK?","File","Conversion","Information\n","case","STANDARDWIDTH_0099:","return","\"STANDARDWIDTH\"",";","//Standard","Column","Width\n","case","SCL_00A0:","return","\"SCL\"",";","//","Window","Zoom","Magnification\n","case","0x00AE:","return","\"SCENMAN\"",";","//","Scenario","Output","Data\n\n","case","0x00B2:","return","\"SXVI\"",";","//","(","pivot","table",")","View","Item\n","case","0x00B4:","return","\"SXIVD\"",";","//","(","pivot","table",")","Row/Column","Field","IDs\n","case","0x00B5:","return","\"SXLI\"",";","//","(","pivot","table",")","Line","Item","Array\n\n","case","0x00D3:","return","\"OBPROJ\"",";","case","0x00DC:","return","\"PARAMQRY\"",";","case","0x00DE:","return","\"OLESIZE\"",";","case","BITMAP_00E9:","return","\"BITMAP\"",";","case","PHONETICPR_00EF:","return","\"PHONETICPR\"",";","case","0x00F1:","return","\"SXEX\"",";","//","PivotTable","View","Extended","Information\n\n","case","LABELRANGES_015F:","return","\"LABELRANGES\"",";","case","0x01BA:","return","\"CODENAME\"",";","case","0x01A9:","return","\"USERBVIEW\"",";","case","0x01AD:","return","\"QSI\"",";","\n\n","case","0x01C0:","return","\"EXCEL9FILE\"",";","\n\n","case","0x0802:","return","\"QSISXTAG\"",";","//","Pivot","Table","and","Query","Table","Extensions\n","case","0x0803:","return","\"DBQUERYEXT\"",";","case","0x0805:","return","\"TXTQUERY\"",";","case","0x0810:","return","\"SXVIEWEX9\"",";","//","Pivot","Table","Extensions\n\n","case","0x0812:","return","\"CONTINUEFRT\"",";","case","QUICKTIP_0800:","return","\"QUICKTIP\"",";","case","SHEETEXT_0862:","return","\"SHEETEXT\"",";","case","0x0863:","return","\"BOOKEXT\"",";","case","0x0864:","return","\"SXADDL\"",";","//","Pivot","Table","Additional","Info\n","case","SHEETPROTECTION_0867:","return","\"SHEETPROTECTION\"",";","case","0x086B:","return","\"DATALABEXTCONTENTS\"",";","case","0x086C:","return","\"CELLWATCH\"",";","case","FeatRecord",".","v11_sid:","return","\"SHARED","FEATURE","v11\"",";","case","0x0874:","return","\"DROPDOWNOBJIDS\"",";","case","0x0876:","return","\"DCONN\"",";","case","FeatRecord",".","v12_sid:","return","\"SHARED","FEATURE","v12\"",";","case","0x087B:","return","\"CFEX\"",";","case","0x087C:","return","\"XFCRC\"",";","case","0x087D:","return","\"XFEXT\"",";","case","0x087F:","return","\"CONTINUEFRT12\"",";","case","0x088B:","return","\"PLV\"",";","case","0x088C:","return","\"COMPAT12\"",";","case","0x088D:","return","\"DXF\"",";","case","0x0892:","return","\"STYLEEXT\"",";","case","0x0896:","return","\"THEME\"",";","case","0x0897:","return","\"GUIDTYPELIB\"",";","case","0x089A:","return","\"MTRSETTINGS\"",";","case","0x089B:","return","\"COMPRESSPICTURES\"",";","case","HEADER_FOOTER_089C:","return","\"HEADERFOOTER\"",";","case","0x089D:","return","\"CRTLAYOUT12\"",";","case","0x089E:","return","\"CRTMLFRT\"",";","case","0x089F:","return","\"CRTMLFRTCONTINUE\"",";","case","0x08A1:","return","\"SHAPEPROPSSTREAM\"",";","case","0x08A3:","return","\"FORCEFULLCALCULATION\"",";","case","0x08A4:","return","\"SHAPEPROPSSTREAM\"",";","case","0x08A5:","return","\"TEXTPROPSSTREAM\"",";","case","0x08A6:","return","\"RICHTEXTSTREAM\"",";","case","0x08A7:","return","\"CRTLAYOUT12A\"",";","\n\n","case","0x08C8:","return","\"PLV","{","Mac","Excel","}","\"",";","\n\n","case","0x1001:","return","\"UNITS\"",";","case","0x1006:","return","\"CHARTDATAFORMAT\"",";","case","0x1007:","return","\"CHARTLINEFORMAT\"",";","}","if","(","isObservedButUnknown","(","sid",")",")","{","return","\"UNKNOWN-\"","+","Integer",".","toHexString","(","sid",")",".","toUpperCase","(","Locale",".","ROOT",")",";","}","\n\n","return","null",";"],"docstring_tokens":["These","BIFF","record","types","are","known","but","still","uninterpreted","by","POI"],"prompt_tokens":[]}
{"code_tokens":["public","BufferedImage","readGDIImage","(","final","byte[]","data",")","{","int[]","nBits,","bOffs",";","switch","(","pixelFormat",")","{","case","ARGB_32BPP:\n","nBits","=","new","int[]","{","8,","8,","8,","8","}",";","bOffs","=","new","int[]","{","2,","1,","0,","3","}",";","break",";","case","RGB_24BPP:\n","nBits","=","new","int[]","{","8,","8,","8","}",";","bOffs","=","new","int[]","{","2,","1,","0","}",";","break",";","default:\n","throw","new","RuntimeException","(","\"not","yet","implemented\"",")",";","}","\n\n","ColorSpace","cs","=","ColorSpace",".","getInstance","(","ColorSpace",".","CS_sRGB",")",";","ComponentColorModel","cm","=","new","ComponentColorModel\n","(","cs,","nBits,","pixelFormat",".","isAlpha","(",")",",","pixelFormat",".","isPreMultiplied","(",")",",","Transparency",".","TRANSLUCENT,","DataBuffer",".","TYPE_BYTE",")",";","PixelInterleavedSampleModel","csm","=\n","new","PixelInterleavedSampleModel","(","cm",".","getTransferType","(",")",",","width,","height,","cm",".","getNumComponents","(",")",",","stride,","bOffs",")",";","\n\n","DataBufferByte","dbb","=","new","DataBufferByte","(","data,","data",".","length",")",";","WritableRaster","raster","=","(","WritableRaster",")","Raster",".","createRaster","(","csm,","dbb,","null",")",";","\n\n","return","new","BufferedImage","(","cm,","raster,","cm",".","isAlphaPremultiplied","(",")",",","null",")",";"],"docstring_tokens":["Converts","the","gdi","pixel","data","to","a","buffered","image"],"prompt_tokens":[]}
{"code_tokens":["public","int","getSignature","(",")","{","return","(","colorSpace","==","ColorSpace",".","rgb",")","?","(","getUIDInstanceCount","(",")","==","1","?","0x46A0",":","0x46B0",")",":","(","getUIDInstanceCount","(",")","==","1","?","0x6E20",":","0x6E30",")",";"],"docstring_tokens":["JPEG","signature","is","one","of","0x46A0,","0x46B0,","0x6E20,","0x6E30"],"prompt_tokens":[]}
{"code_tokens":["@Override\n","public","String","getTitle","(",")","{","for","(","List<HSLFTextParagraph>","tp",":","getTextParagraphs","(",")",")","{","if","(","tp",".","isEmpty","(",")",")","{","continue",";","}","int","type","=","tp",".","get","(","0",")",".","getRunType","(",")",";","if","(","TextPlaceholder",".","isTitle","(","type",")",")","{","String","str","=","HSLFTextParagraph",".","getRawText","(","tp",")",";","return","HSLFTextParagraph",".","toExternalString","(","str,","type",")",";","}","}","return","null",";"],"docstring_tokens":["The","title","is","a","run","of","text","of","type","TextHeaderAtom.CENTER_TITLE_TYPE","or","TextHeaderAtom.TITLE_TYPE"],"prompt_tokens":[]}
{"code_tokens":["@Override\n","public","HSLFMasterSheet","getMasterSheet","(",")","{","int","masterId","=","getSlideRecord","(",")",".","getSlideAtom","(",")",".","getMasterID","(",")",";","for","(","HSLFSlideMaster","sm",":","getSlideShow","(",")",".","getSlideMasters","(",")",")","{","if","(","masterId","==","sm",".","_getSheetNumber","(",")",")","{","return","sm",";","}","}","for","(","HSLFTitleMaster","tm",":","getSlideShow","(",")",".","getTitleMasters","(",")",")","{","if","(","masterId","==","tm",".","_getSheetNumber","(",")",")","{","return","tm",";","}","}","return","null",";"],"docstring_tokens":["Returns","master","sheet","associated","with","this","slide"],"prompt_tokens":[]}
{"code_tokens":["public","void","setMasterSheet","(","HSLFMasterSheet","master",")","{","SlideAtom","sa","=","getSlideRecord","(",")",".","getSlideAtom","(",")",";","int","sheetNo","=","master",".","_getSheetNumber","(",")",";","sa",".","setMasterID","(","sheetNo",")",";"],"docstring_tokens":["Change","Master","of","this","slide"],"prompt_tokens":[]}
{"code_tokens":["@Override\n","public","void","setFollowMasterBackground","(","boolean","flag",")","{","SlideAtom","sa","=","getSlideRecord","(",")",".","getSlideAtom","(",")",";","sa",".","setFollowMasterBackground","(","flag",")",";"],"docstring_tokens":["Sets","whether","this","slide","follows","master","background"],"prompt_tokens":[]}
{"code_tokens":["@Override\n","public","boolean","getFollowMasterBackground","(",")","{","SlideAtom","sa","=","getSlideRecord","(",")",".","getSlideAtom","(",")",";","return","sa",".","getFollowMasterBackground","(",")",";"],"docstring_tokens":["Whether","this","slide","follows","master","sheet","background"],"prompt_tokens":[]}
{"code_tokens":["@Override\n","public","void","setFollowMasterObjects","(","boolean","flag",")","{","SlideAtom","sa","=","getSlideRecord","(",")",".","getSlideAtom","(",")",";","sa",".","setFollowMasterObjects","(","flag",")",";"],"docstring_tokens":["Sets","whether","this","slide","draws","master","sheet","objects"],"prompt_tokens":[]}
{"code_tokens":["public","boolean","getFollowMasterScheme","(",")","{","SlideAtom","sa","=","getSlideRecord","(",")",".","getSlideAtom","(",")",";","return","sa",".","getFollowMasterScheme","(",")",";"],"docstring_tokens":["Whether","this","slide","follows","master","color","scheme"],"prompt_tokens":[]}
{"code_tokens":["public","void","setFollowMasterScheme","(","boolean","flag",")","{","SlideAtom","sa","=","getSlideRecord","(",")",".","getSlideAtom","(",")",";","sa",".","setFollowMasterScheme","(","flag",")",";"],"docstring_tokens":["Sets","whether","this","slide","draws","master","color","scheme"],"prompt_tokens":[]}
{"code_tokens":["@Override\n","public","boolean","getFollowMasterObjects","(",")","{","SlideAtom","sa","=","getSlideRecord","(",")",".","getSlideAtom","(",")",";","return","sa",".","getFollowMasterObjects","(",")",";"],"docstring_tokens":["Whether","this","slide","draws","master","sheet","objects"],"prompt_tokens":[]}
{"code_tokens":["public","static","byte[]","toByteArray","(","InputStream","stream",")","throws","IOException","{","return","toByteArray","(","stream,","Integer",".","MAX_VALUE",")",";"],"docstring_tokens":["Reads","all","the","data","from","the","input","stream,","and","returns","the","bytes","read"],"prompt_tokens":[]}
{"code_tokens":["public","static","byte[]","toByteArray","(","InputStream","stream,","final","int","length",")","throws","IOException","{","return","toByteArray","(","stream,","length,","Integer",".","MAX_VALUE",")",";"],"docstring_tokens":["Reads","up","to","length","bytes","from","the","input","stream,","and","returns","the","bytes","read"],"prompt_tokens":[]}
{"code_tokens":["public","static","long","copy","(","InputStream","srcStream,","File","destFile",")","throws","IOException","{","File","destDirectory","=","destFile",".","getParentFile","(",")",";","if","(","!","(","destDirectory",".","exists","(",")","||","destDirectory",".","mkdirs","(",")",")",")","{","throw","new","RuntimeException","(","\"Can't","create","destination","directory:","\"+destDirectory",")",";","}","try","(","OutputStream","destStream","=","new","FileOutputStream","(","destFile",")",")","{","return","IOUtils",".","copy","(","srcStream,","destStream",")",";","}"],"docstring_tokens":["Copy","the","contents","of","the","stream","to","a","new","file"],"prompt_tokens":[]}
{"code_tokens":["public","static","long","calculateChecksum","(","InputStream","stream",")","throws","IOException","{","final","Checksum","sum","=","new","CRC32","(",")",";","\n\n","final","byte[]","buf","=","new","byte[DEFAULT_BUFFER_SIZE]",";","int","count",";","while","(","(","count","=","stream",".","read","(","buf",")",")","!=","-1",")","{","if","(","count",">","0",")","{","sum",".","update","(","buf,","0,","count",")",";","}","}","return","sum",".","getValue","(",")",";"],"docstring_tokens":["Calculate","checksum","on","all","the","data","read","from","input","stream"],"prompt_tokens":[]}
{"code_tokens":["public","void","setMovieIndex","(","int","idx",")","{","ExObjRefAtom","oe","=","getClientDataRecord","(","RecordTypes",".","ExObjRefAtom",".","typeID",")",";","oe",".","setExObjIdRef","(","idx",")",";","\n\n","AnimationInfo","an","=","getClientDataRecord","(","RecordTypes",".","AnimationInfo",".","typeID",")",";","if","(","an","!=","null",")","{","AnimationInfoAtom","ai","=","an",".","getAnimationInfoAtom","(",")",";","ai",".","setDimColor","(","0x07000000",")",";","ai",".","setFlag","(","AnimationInfoAtom",".","Automatic,","true",")",";","ai",".","setFlag","(","AnimationInfoAtom",".","Play,","true",")",";","ai",".","setFlag","(","AnimationInfoAtom",".","Synchronous,","true",")",";","ai",".","setOrderID","(","idx","+","1",")",";","}"],"docstring_tokens":["Assign","a","movie","to","this","shape"],"prompt_tokens":[]}
{"code_tokens":["public","void","readFrom","(","InputStream","is",")","throws","IOException","{","try","{","theme","=","ThemeDocument",".","Factory",".","parse","(","is,","DEFAULT_XML_OPTIONS",")",";","}","catch","(","XmlException","e",")","{","throw","new","IOException","(","e",".","getLocalizedMessage","(",")",",","e",")",";","}"],"docstring_tokens":["Read","this","themes","table","from","an","XML","file"],"prompt_tokens":[]}
{"code_tokens":["public","HSSFColor","findColor","(","byte","red,","byte","green,","byte","blue",")","{","byte[]","b","=","_palette",".","getColor","(","PaletteRecord",".","FIRST_COLOR_INDEX",")",";","for","(","short","i","=","PaletteRecord",".","FIRST_COLOR_INDEX",";","b","!=","null",";","b","=","_palette",".","getColor","(","++i",")",")","{","if","(","b[0]","==","red","&&","b[1]","==","green","&&","b[2]","==","blue",")","{","return","new","CustomColor","(","i,","b",")",";","}","}","return","null",";"],"docstring_tokens":["Finds","the","first","occurrence","of","a","given","color"],"prompt_tokens":[]}
{"code_tokens":["public","void","findChunks","(",")","{","ArrayList<Chunk>","chunksA","=","new","ArrayList<>","(",")",";","\n\n","if","(","getPointer","(",")",".","getOffset","(",")","==","0x64b3",")","{","int","i","=","0",";","i++",";","}","\n\n","int","pos","=","0",";","byte[]","contents","=","getStore","(",")",".","getContents","(",")",";","try","{","while","(","pos","<","contents",".","length",")","{","//","Ensure","we","have","enough","data","to","create","a","chunk","from\n","int","headerSize","=","ChunkHeader",".","getHeaderSize","(","chunkFactory",".","getVersion","(",")",")",";","if","(","pos+headerSize","<=","contents",".","length",")","{","Chunk","chunk","=","chunkFactory",".","createChunk","(","contents,","pos",")",";","chunksA",".","add","(","chunk",")",";","\n\n","pos","+=","chunk",".","getOnDiskSize","(",")",";","}","else","{","LOG",".","atWarn","(",")",".","log","(","\"Needed","{","}","bytes","to","create","the","next","chunk","header,","but","only","found","{","}","bytes,","ignoring","rest","of","data\",","box","(","headerSize",")",",box","(","contents",".","length","-","pos",")",")",";","pos","=","contents",".","length",";","}","}","}","catch","(","Exception","e",")","{","LOG",".","atError","(",")",".","withThrowable","(","e",")",".","log","(","\"Failed","to","create","chunk","at","{","}",",","ignoring","rest","of","data",".","\",","box","(","pos",")",")",";","}","\n\n","chunks","=","chunksA",".","toArray","(","new","Chunk[0]",")",";"],"docstring_tokens":["Process","the","contents","of","the","stream","out","into","chunks"],"prompt_tokens":[]}
{"code_tokens":["public","PackageRelationship","findExistingRelation","(","PackagePart","packagePart",")","{","return","_relationships",".","findExistingInternalRelation","(","packagePart",")",";"],"docstring_tokens":["Check","if","the","new","part","was","already","added","before","via","PackagePart.addRelationship"],"prompt_tokens":[]}
{"code_tokens":["@Override\n","public","PackageRelationshipCollection","getRelationships","(",")","throws","InvalidFormatException","{","return","getRelationshipsCore","(","null",")",";"],"docstring_tokens":["Retrieve","all","the","relationships","attached","to","this","part"],"prompt_tokens":[]}
{"code_tokens":["@Override\n","public","PackageRelationship","getRelationship","(","String","id",")","{","return","this",".","_relationships",".","getRelationshipByID","(","id",")",";"],"docstring_tokens":["Retrieves","a","package","relationship","from","its","id"],"prompt_tokens":[]}
{"code_tokens":["@Override\n","public","PackageRelationshipCollection","getRelationshipsByType","(","String","relationshipType",")","throws","InvalidFormatException","{","_container",".","throwExceptionIfWriteOnly","(",")",";","\n\n","return","getRelationshipsCore","(","relationshipType",")",";"],"docstring_tokens":["Retrieve","all","relationships","attached","to","this","part","which","have","the","specified","type"],"prompt_tokens":[]}
{"code_tokens":["@Override\n","public","boolean","hasRelationships","(",")","{","return","(","!this",".","_isRelationshipPart","&&","(","_relationships","!=","null","&&","!_relationships",".","isEmpty","(",")",")",")",";"],"docstring_tokens":["Knows","if","the","part","have","any","relationships"],"prompt_tokens":[]}
{"code_tokens":["@Override\n","public","boolean","isRelationshipExists","(","PackageRelationship","rel",")","{","return","rel","!=","null","&&","_relationships",".","getRelationshipByID","(","rel",".","getId","(",")",")","!=","null",";"],"docstring_tokens":["Checks","if","the","specified","relationship","is","part","of","this","package","part"],"prompt_tokens":[]}
{"code_tokens":["public","PackagePart","getRelatedPart","(","PackageRelationship","rel",")","throws","InvalidFormatException","{","//","Ensure","this","is","one","of","ours\n","if","(","!","isRelationshipExists","(","rel",")",")","{","throw","new","IllegalArgumentException","(","\"Relationship","\"","+","rel","+","\"","doesn't","start","with","this","part","\"","+","_partName",")",";","}","//","Get","the","target","URI,","excluding","any","relative","fragments\n","URI","target","=","rel",".","getTargetURI","(",")",";","if","(","target",".","getFragment","(",")","!=","null",")","{","String","t","=","target",".","toString","(",")",";","try","{","target","=","new","URI","(","t",".","substring","(","0,","t",".","indexOf","(","'#'",")",")",")",";","}","catch","(","URISyntaxException","e",")","{","throw","new","InvalidFormatException","(","\"Invalid","target","URI:","\"","+","target",")",";","}","}","\n\n","//","Turn","that","into","a","name,","and","fetch\n","PackagePartName","relName","=","PackagingURIHelper",".","createPartName","(","target",")",";","PackagePart","part","=","_container",".","getPart","(","relName",")",";","if","(","part","==","null",")","{","throw","new","IllegalArgumentException","(","\"No","part","found","for","relationship","\"","+","rel",")",";","}","return","part",";"],"docstring_tokens":["Get","the","PackagePart","that","is","the","target","of","a","relationship"],"prompt_tokens":[]}
{"code_tokens":["public","InputStream","getInputStream","(",")","throws","IOException","{","InputStream","inStream","=","this",".","getInputStreamImpl","(",")",";","if","(","inStream","==","null",")","{","throw","new","IOException","(","\"Can't","obtain","the","input","stream","from","\"\n","+","_partName",".","getName","(",")",")",";","}","return","inStream",";"],"docstring_tokens":["Get","the","input","stream","of","this","part","to","read","its","content"],"prompt_tokens":[]}
{"code_tokens":["private","void","throwExceptionIfRelationship","(",")","throws","InvalidOperationException","{","if","(","this",".","_isRelationshipPart",")","throw","new","InvalidOperationException","(","\"Can","do","this","operation","on","a","relationship","part","!\"",")",";"],"docstring_tokens":["Throws","an","exception","if","this","package","part","is","a","relationship","part"],"prompt_tokens":[]}
{"code_tokens":["/*","package","*/","void","loadRelationships","(",")","throws","InvalidFormatException","{","if","(","this",".","_relationships","==","null","&&","!this",".","_isRelationshipPart",")","{","this",".","throwExceptionIfRelationship","(",")",";","_relationships","=","new","PackageRelationshipCollection","(","this",")",";","}"],"docstring_tokens":["Ensure","the","package","relationships","collection","instance","is","built"],"prompt_tokens":[]}
{"code_tokens":["@Override\n","public","int","compareTo","(","PackagePart","other",")","{","//","NOTE","could","also","throw","a","NullPointerException","(",")","if","desired\n","if","(","other","==","null",")","return","-1",";","\n\n","return","PackagePartName",".","compare","(","this",".","_partName,","other",".","_partName",")",";"],"docstring_tokens":["Compare","based","on","the","package","part","name,","using","a","natural","sort","order"],"prompt_tokens":[]}
{"code_tokens":["public","void","clear","(",")","{"],"docstring_tokens":["Allows","sub-classes","to","clean","up","before","new","data","is","added"],"prompt_tokens":[]}
{"code_tokens":["protected","static","HSSFWorkbook","loadWorkbook","(","String","sampleFileName",")","{","return","HSSFTestDataSamples",".","openSampleWorkbook","(","sampleFileName",")",";"],"docstring_tokens":["Loads","a","workbook","from","the","given","filename","in","the","test","data","dir"],"prompt_tokens":[]}
{"code_tokens":["public","void","readValue","(","DocumentNode","node",")","{","this",".","node","=","node",";"],"docstring_tokens":["Links","the","chunk","to","a","document"],"prompt_tokens":[]}
{"code_tokens":["public","void","updateLocale","(","Locale","newLocale",")","{","if","(","!localeIsAdapting","||","newLocale",".","equals","(","locale",")",")","return",";","\n\n","locale","=","newLocale",";","\n\n","dateSymbols","=","DateFormatSymbols",".","getInstance","(","locale",")",";","decimalSymbols","=","DecimalFormatSymbols",".","getInstance","(","locale",")",";","generalNumberFormat","=","new","ExcelGeneralNumberFormat","(","locale",")",";","\n\n","//","taken","from","Date",".","toString","(",")","defaultDateformat","=","new","SimpleDateFormat","(","\"EEE","MMM","dd","HH:mm:ss","zzz","yyyy\",","dateSymbols",")",";","defaultDateformat",".","setTimeZone","(","LocaleUtil",".","getUserTimeZone","(",")",")",";","\n\n","//","init","built-in","formats\n\n","formats",".","clear","(",")",";","Format","zipFormat","=","ZipPlusFourFormat",".","instance",";","addFormat","(","\"00000\\\\-0000\",","zipFormat",")",";","addFormat","(","\"00000-0000\",","zipFormat",")",";","\n\n","Format","phoneFormat","=","PhoneFormat",".","instance",";","//","allow","for","format","string","variations\n","addFormat","(","\"[<=9999999]###\\\\-####",";","\\\\","(","###\\\\",")","\\\\","###\\\\-####\",","phoneFormat",")",";","addFormat","(","\"[<=9999999]###-####",";","(","###",")","###-####\",","phoneFormat",")",";","addFormat","(","\"###\\\\-####",";","\\\\","(","###\\\\",")","\\\\","###\\\\-####\",","phoneFormat",")",";","addFormat","(","\"###-####",";","(","###",")","###-####\",","phoneFormat",")",";","\n\n","Format","ssnFormat","=","SSNFormat",".","instance",";","addFormat","(","\"000\\\\-00\\\\-0000\",","ssnFormat",")",";","addFormat","(","\"000-00-0000\",","ssnFormat",")",";"],"docstring_tokens":["Update","formats","when","locale","has","been","changed"],"prompt_tokens":[]}
{"code_tokens":["public","byte","getLinkType","(",")","{","return","field_1_linkType",";"],"docstring_tokens":["Get","the","link","type","field","for","the","LinkedData","record"],"prompt_tokens":[]}
{"code_tokens":["public","void","setLinkType","(","byte","field_1_linkType",")","{","this",".","field_1_linkType","=","field_1_linkType",";"],"docstring_tokens":["Set","the","link","type","field","for","the","LinkedData","record"],"prompt_tokens":[]}
{"code_tokens":["public","byte","getReferenceType","(",")","{","return","field_2_referenceType",";"],"docstring_tokens":["Get","the","reference","type","field","for","the","LinkedData","record"],"prompt_tokens":[]}
{"code_tokens":["public","void","setReferenceType","(","byte","field_2_referenceType",")","{","this",".","field_2_referenceType","=","field_2_referenceType",";"],"docstring_tokens":["Set","the","reference","type","field","for","the","LinkedData","record"],"prompt_tokens":[]}
{"code_tokens":["public","short","getOptions","(",")","{","return","field_3_options",";"],"docstring_tokens":["Get","the","options","field","for","the","LinkedData","record"],"prompt_tokens":[]}
{"code_tokens":["public","void","setOptions","(","short","field_3_options",")","{","this",".","field_3_options","=","field_3_options",";"],"docstring_tokens":["Set","the","options","field","for","the","LinkedData","record"],"prompt_tokens":[]}
{"code_tokens":["public","void","setFormulaOfLink","(","Ptg[]","ptgs",")","{","this",".","field_5_formulaOfLink","=","Formula",".","create","(","ptgs",")",";"],"docstring_tokens":["Set","the","formula","of","link","field","for","the","LinkedData","record"],"prompt_tokens":[]}
{"code_tokens":["public","String","getValue","(",")","{","String","value","=","getText","(",")",";","if","(","value","==","null",")","return","\"\"",";","return","value",";"],"docstring_tokens":["Returns","the","value","of","the","header","or","footer"],"prompt_tokens":[]}
{"code_tokens":["@Override\n","public","String","getCenter","(",")","{","String","text","=","helper",".","getCenterSection","(","getText","(",")",")",";","if","(","stripFields",")","return","stripFields","(","text",")",";","return","text",";"],"docstring_tokens":["get","the","text","representing","the","center","part","of","this","element"],"prompt_tokens":[]}
{"code_tokens":["@Override\n","public","String","getLeft","(",")","{","String","text","=","helper",".","getLeftSection","(","getText","(",")",")",";","if","(","stripFields",")","return","stripFields","(","text",")",";","return","text",";"],"docstring_tokens":["get","the","text","representing","the","left","part","of","this","element"],"prompt_tokens":[]}
{"code_tokens":["@Override\n","public","String","getRight","(",")","{","String","text","=","helper",".","getRightSection","(","getText","(",")",")",";","if","(","stripFields",")","return","stripFields","(","text",")",";","return","text",";"],"docstring_tokens":["get","the","text","representing","the","right","part","of","this","element"],"prompt_tokens":[]}
{"code_tokens":["@Override\n","public","void","setCenter","(","String","newCenter",")","{","setText","(","helper",".","setCenterSection","(","getText","(",")",",","newCenter",")",")",";"],"docstring_tokens":["set","a","centered","string","value","for","this","element"],"prompt_tokens":[]}
{"code_tokens":["@Override\n","public","void","setLeft","(","String","newLeft",")","{","setText","(","helper",".","setLeftSection","(","getText","(",")",",","newLeft",")",")",";"],"docstring_tokens":["set","a","left","string","value","for","this","element"],"prompt_tokens":[]}
{"code_tokens":["@Override\n","public","void","setRight","(","String","newRight",")","{","setText","(","helper",".","setRightSection","(","getText","(",")",",","newRight",")",")",";"],"docstring_tokens":["set","a","right","string","value","for","this","element"],"prompt_tokens":[]}
{"code_tokens":["private","static","boolean","isCTOnOff","(","CTOnOff","onoff",")","{","return","!onoff",".","isSetVal","(",")","||","POIXMLUnits",".","parseOnOff","(","onoff",")",";"],"docstring_tokens":["For","isBold,","isItalic","etc"],"prompt_tokens":[]}
{"code_tokens":["public","String","getLang","(",")","{","CTRPr","pr","=","getRunProperties","(","false",")",";","Object","lang","=","(","pr","==","null","||","pr",".","sizeOfLangArray","(",")","==","0",")","?","null",":","pr",".","getLangArray","(","0",")",".","getVal","(",")",";","return","(","String",")","lang",";"],"docstring_tokens":["Get","the","language","tag","associated","with","this","run,","if","any"],"prompt_tokens":[]}
{"code_tokens":["public","void","setLang","(","String","lang",")","{","CTRPr","pr","=","getRunProperties","(","true",")",";","CTLanguage","ctLang","=","pr",".","sizeOfLangArray","(",")",">","0","?","pr",".","getLangArray","(","0",")",":","pr",".","addNewLang","(",")",";","ctLang",".","setVal","(","lang",")",";"],"docstring_tokens":["Set","the","language","tag","associated","with","this","run"],"prompt_tokens":[]}
{"code_tokens":["private","CTUnderline","getCTUnderline","(","boolean","create",")","{","CTRPr","pr","=","getRunProperties","(","true",")",";","return","pr",".","sizeOfUArray","(",")",">","0","?","pr",".","getUArray","(","0",")",":","(","create","?","pr",".","addNewU","(",")",":","null",")",";"],"docstring_tokens":["Get","the","CTUnderline","for","the","run"],"prompt_tokens":[]}
{"code_tokens":["@Override\n","public","boolean","isDoubleStrikeThrough","(",")","{","CTRPr","pr","=","getRunProperties","(","false",")",";","return","pr","!=","null","&&","pr",".","sizeOfDstrikeArray","(",")",">","0","&&","isCTOnOff","(","pr",".","getDstrikeArray","(","0",")",")",";"],"docstring_tokens":["Specifies","that","the","contents","of","this","run","shall","be","displayed","with","a","double","horizontal","line","through","the","center","of","the","line"],"prompt_tokens":[]}
{"code_tokens":["@Internal\n","public","CTInline","addChart","(","String","chartRelId",")","throws","InvalidFormatException,","IOException","{","try","{","CTInline","inline","=","run",".","addNewDrawing","(",")",".","addNewInline","(",")",";","\n\n","//xml","part","of","chart","in","document\n","String","xml","=\n","\"<a:graphic","xmlns:a=\\\"\"","+","CTGraphicalObject",".","type",".","getName","(",")",".","getNamespaceURI","(",")","+","\"\\\">\"","+\n","\"<a:graphicData","uri=\\\"\"","+","CTChart",".","type",".","getName","(",")",".","getNamespaceURI","(",")","+","\"\\\">\"","+\n","\"<c:chart","xmlns:c=\\\"\"","+","CTChart",".","type",".","getName","(",")",".","getNamespaceURI","(",")","+","\"\\\"","xmlns:r=\\\"http://schemas",".","openxmlformats",".","org/officeDocument/2006/relationships\\\"","r:id=\\\"\"","+","chartRelId","+","\"\\\"","/>\"","+\n","\"</a:graphicData>\"","+\n","\"</a:graphic>\"",";","\n\n","InputSource","is","=","new","InputSource","(","new","StringReader","(","xml",")",")",";","\n\n","org",".","w3c",".","dom",".","Document","doc","=","DocumentHelper",".","readDocument","(","is",")",";","\n\n","inline",".","set","(","XmlToken",".","Factory",".","parse","(","doc",".","getDocumentElement","(",")",",","DEFAULT_XML_OPTIONS",")",")",";","\n\n","//","Setup","the","inline","with","0","margin\n","inline",".","setDistT","(","0",")",";","inline",".","setDistR","(","0",")",";","inline",".","setDistB","(","0",")",";","inline",".","setDistL","(","0",")",";","\n\n","CTNonVisualDrawingProps","docPr","=","inline",".","addNewDocPr","(",")",";","long","id","=","getParent","(",")",".","getDocument","(",")",".","getDrawingIdManager","(",")",".","reserveNew","(",")",";","docPr",".","setId","(","id",")",";","//This","name","is","not","visible","in","Word","anywhere",".","docPr",".","setName","(","\"chart","\"","+","id",")",";","\n\n","return","inline",";","}","catch","(","XmlException","|","SAXException","e",")","{","throw","new","IllegalStateException","(","e",")",";","}"],"docstring_tokens":["this","method","add","chart","template","into","document"],"prompt_tokens":[]}
{"code_tokens":["public","void","setStyle","(","String","styleId",")","{","CTRPr","pr","=","getCTR","(",")",".","getRPr","(",")",";","if","(","null","==","pr",")","{","pr","=","getCTR","(",")",".","addNewRPr","(",")",";","}","CTString","style","=","pr",".","sizeOfRStyleArray","(",")",">","0","?","pr",".","getRStyleArray","(","0",")",":","pr",".","addNewRStyle","(",")",";","style",".","setVal","(","styleId",")",";"],"docstring_tokens":["Set","the","style","ID","for","the","run"],"prompt_tokens":[]}
{"code_tokens":["@Override\n","public","String","toString","(",")","{","String","phonetic","=","getPhonetic","(",")",";","if","(","phonetic",".","length","(",")",">","0",")","{","return","text","(",")","+","\"","(","\"","+","phonetic","+","\"",")","\"",";","}","else","{","return","text","(",")",";","}"],"docstring_tokens":["Returns","the","string","version","of","the","text","and","the","phonetic","string"],"prompt_tokens":[]}
{"code_tokens":["@Override\n","public","String","text","(",")","{","StringBuilder","text","=","new","StringBuilder","(","64",")",";","\n\n","//","Grab","the","text","and","tabs","of","the","text","run\n","//","Do","so","in","a","way","that","preserves","the","ordering\n","XmlCursor","c","=","run",".","newCursor","(",")",";","c",".","selectPath","(","\"",".","/*\"",")",";","while","(","c",".","toNextSelection","(",")",")","{","XmlObject","o","=","c",".","getObject","(",")",";","if","(","o","instanceof","CTRuby",")","{","handleRuby","(","o,","text,","false",")",";","continue",";","}","_getText","(","o,","text",")",";","}","c",".","dispose","(",")",";","return","text",".","toString","(",")",";","\n\n"],"docstring_tokens":["Returns","the","string","version","of","the","text,","with","tabs","and","carriage","returns","in","place","of","their","xml","equivalents"],"prompt_tokens":[]}
{"code_tokens":["public","void","setTextHighlightColor","(","String","colorName",")","{","CTRPr","pr","=","getRunProperties","(","true",")",";","CTHighlight","highlight","=","pr",".","sizeOfHighlightArray","(",")",">","0","?","pr",".","getHighlightArray","(","0",")",":","pr",".","addNewHighlight","(",")",";","STHighlightColor","color","=","highlight",".","xgetVal","(",")",";","if","(","color","==","null",")","{","color","=","STHighlightColor",".","Factory",".","newInstance","(",")",";","}","STHighlightColor",".","Enum","val","=","STHighlightColor",".","Enum",".","forString","(","colorName",")",";","if","(","val","!=","null",")","{","color",".","setStringValue","(","val",".","toString","(",")",")",";","highlight",".","xsetVal","(","color",")",";","}","\n\n"],"docstring_tokens":["Set","the","highlight","color","for","the","run"],"prompt_tokens":[]}
{"code_tokens":["public","STHighlightColor",".","Enum","getTextHightlightColor","(",")","{","CTRPr","pr","=","getRunProperties","(","true",")",";","CTHighlight","highlight","=","pr",".","sizeOfHighlightArray","(",")",">","0","?","pr",".","getHighlightArray","(","0",")",":","pr",".","addNewHighlight","(",")",";","STHighlightColor","color","=","highlight",".","xgetVal","(",")",";","if","(","color","==","null",")","{","color","=","STHighlightColor",".","Factory",".","newInstance","(",")",";","color",".","setEnumValue","(","STHighlightColor",".","NONE",")",";","}","return","(","STHighlightColor",".","Enum",")","(","color",".","getEnumValue","(",")",")",";"],"docstring_tokens":["Gets","the","highlight","color","for","the","run"],"prompt_tokens":[]}
{"code_tokens":["public","void","setVerticalAlignment","(","String","verticalAlignment",")","{","CTRPr","pr","=","getRunProperties","(","true",")",";","CTVerticalAlignRun","vertAlign","=","pr",".","sizeOfVertAlignArray","(",")",">","0","?","pr",".","getVertAlignArray","(","0",")",":","pr",".","addNewVertAlign","(",")",";","STVerticalAlignRun","align","=","vertAlign",".","xgetVal","(",")",";","if","(","align","==","null",")","{","align","=","STVerticalAlignRun",".","Factory",".","newInstance","(",")",";","}","STVerticalAlignRun",".","Enum","val","=","STVerticalAlignRun",".","Enum",".","forString","(","verticalAlignment",")",";","if","(","val","!=","null",")","{","align",".","setStringValue","(","val",".","toString","(",")",")",";","vertAlign",".","xsetVal","(","align",")",";","}","\n\n\n"],"docstring_tokens":["Set","the","vertical","alignment","of","the","run"],"prompt_tokens":[]}
{"code_tokens":["public","STEm",".","Enum","getEmphasisMark","(",")","{","CTRPr","pr","=","getRunProperties","(","true",")",";","CTEm","emphasis","=","pr",".","sizeOfEmArray","(",")",">","0","?","pr",".","getEmArray","(","0",")",":","pr",".","addNewEm","(",")",";","\n\n","STEm",".","Enum","val","=","emphasis",".","getVal","(",")",";","if","(","val","==","null",")","{","val","=","STEm",".","NONE",";","}","return","val",";"],"docstring_tokens":["Get","the","emphasis","mark","value","for","the","run"],"prompt_tokens":[]}
{"code_tokens":["public","void","setEmphasisMark","(","String","markType",")","{","CTRPr","pr","=","getRunProperties","(","true",")",";","CTEm","emphasisMark","=","pr",".","sizeOfEmArray","(",")",">","0","?","pr",".","getEmArray","(","0",")",":","pr",".","addNewEm","(",")",";","STEm","mark","=","emphasisMark",".","xgetVal","(",")",";","if","(","mark","==","null",")","{","mark","=","STEm",".","Factory",".","newInstance","(",")",";","}","STEm",".","Enum","val","=","STEm",".","Enum",".","forString","(","markType",")",";","if","(","val","!=","null",")","{","mark",".","setStringValue","(","val",".","toString","(",")",")",";","emphasisMark",".","xsetVal","(","mark",")",";","}","\n\n\n"],"docstring_tokens":["Set","the","emphasis","mark","for","the","run"],"prompt_tokens":[]}
{"code_tokens":["@Internal\n","public","boolean","isFMerged","(",")","{","return","fMerged",".","isSet","(","field_1_rgf",")",";"],"docstring_tokens":["When","1,","cell","has","been","merged","with","preceding","cell"],"prompt_tokens":[]}
{"code_tokens":["@Internal\n","public","boolean","isFVertical","(",")","{","return","fVertical",".","isSet","(","field_1_rgf",")",";"],"docstring_tokens":["When","1,","cell","has","vertical","text","flow"],"prompt_tokens":[]}
{"code_tokens":["@Internal\n","public","void","setFtsWidth","(","byte","value",")","{","field_1_rgf","=","(","short",")","ftsWidth",".","setValue","(","field_1_rgf,","value",")",";"],"docstring_tokens":["Sets","the","ftsWidth","field","value"],"prompt_tokens":[]}
{"code_tokens":["@Internal\n","public","void","setFUnused","(","byte","value",")","{","field_1_rgf","=","(","short",")","fUnused",".","setValue","(","field_1_rgf,","value",")",";"],"docstring_tokens":["Sets","the","fUnused","field","value"],"prompt_tokens":[]}
{"code_tokens":["public","void","process","(",")","throws","IOException,","OpenXML4JException,","SAXException","{","ReadOnlySharedStringsTable","strings","=","new","ReadOnlySharedStringsTable","(","this",".","xlsxPackage",")",";","XSSFReader","xssfReader","=","new","XSSFReader","(","this",".","xlsxPackage",")",";","StylesTable","styles","=","xssfReader",".","getStylesTable","(",")",";","XSSFReader",".","SheetIterator","iter","=","(","XSSFReader",".","SheetIterator",")","xssfReader",".","getSheetsData","(",")",";","int","index","=","0",";","while","(","iter",".","hasNext","(",")",")","{","try","(","InputStream","stream","=","iter",".","next","(",")",")","{","String","sheetName","=","iter",".","getSheetName","(",")",";","this",".","output",".","println","(",")",";","this",".","output",".","println","(","sheetName","+","\"","[index=\"","+","index","+","\"]:\"",")",";","processSheet","(","styles,","strings,","new","SheetToCSV","(",")",",","stream",")",";","}","++index",";","}"],"docstring_tokens":["Initiates","the","processing","of","the","XLS","workbook","file","to","CSV"],"prompt_tokens":[]}
{"code_tokens":["public","double","getMinimumAxisValue","(",")","{","return","field_1_minimumAxisValue",";"],"docstring_tokens":["Get","the","minimum","axis","value","field","for","the","ValueRange","record"],"prompt_tokens":[]}
{"code_tokens":["public","void","setMinimumAxisValue","(","double","field_1_minimumAxisValue",")","{","this",".","field_1_minimumAxisValue","=","field_1_minimumAxisValue",";"],"docstring_tokens":["Set","the","minimum","axis","value","field","for","the","ValueRange","record"],"prompt_tokens":[]}
{"code_tokens":["public","double","getMaximumAxisValue","(",")","{","return","field_2_maximumAxisValue",";"],"docstring_tokens":["Get","the","maximum","axis","value","field","for","the","ValueRange","record"],"prompt_tokens":[]}
{"code_tokens":["public","void","setMaximumAxisValue","(","double","field_2_maximumAxisValue",")","{","this",".","field_2_maximumAxisValue","=","field_2_maximumAxisValue",";"],"docstring_tokens":["Set","the","maximum","axis","value","field","for","the","ValueRange","record"],"prompt_tokens":[]}
{"code_tokens":["public","double","getMajorIncrement","(",")","{","return","field_3_majorIncrement",";"],"docstring_tokens":["Get","the","major","increment","field","for","the","ValueRange","record"],"prompt_tokens":[]}
{"code_tokens":["public","void","setMajorIncrement","(","double","field_3_majorIncrement",")","{","this",".","field_3_majorIncrement","=","field_3_majorIncrement",";"],"docstring_tokens":["Set","the","major","increment","field","for","the","ValueRange","record"],"prompt_tokens":[]}
{"code_tokens":["public","double","getMinorIncrement","(",")","{","return","field_4_minorIncrement",";"],"docstring_tokens":["Get","the","minor","increment","field","for","the","ValueRange","record"],"prompt_tokens":[]}
{"code_tokens":["public","void","setMinorIncrement","(","double","field_4_minorIncrement",")","{","this",".","field_4_minorIncrement","=","field_4_minorIncrement",";"],"docstring_tokens":["Set","the","minor","increment","field","for","the","ValueRange","record"],"prompt_tokens":[]}
{"code_tokens":["public","double","getCategoryAxisCross","(",")","{","return","field_5_categoryAxisCross",";"],"docstring_tokens":["Get","the","category","axis","cross","field","for","the","ValueRange","record"],"prompt_tokens":[]}
{"code_tokens":["public","void","setCategoryAxisCross","(","double","field_5_categoryAxisCross",")","{","this",".","field_5_categoryAxisCross","=","field_5_categoryAxisCross",";"],"docstring_tokens":["Set","the","category","axis","cross","field","for","the","ValueRange","record"],"prompt_tokens":[]}
{"code_tokens":["public","short","getOptions","(",")","{","return","field_6_options",";"],"docstring_tokens":["Get","the","options","field","for","the","ValueRange","record"],"prompt_tokens":[]}
{"code_tokens":["public","void","setOptions","(","short","field_6_options",")","{","this",".","field_6_options","=","field_6_options",";"],"docstring_tokens":["Set","the","options","field","for","the","ValueRange","record"],"prompt_tokens":[]}
{"code_tokens":["public","void","setAutomaticMinimum","(","boolean","value",")","{","field_6_options","=","automaticMinimum",".","setShortBoolean","(","field_6_options,","value",")",";"],"docstring_tokens":["Sets","the","automatic","minimum","field","value"],"prompt_tokens":[]}
{"code_tokens":["public","boolean","isAutomaticMinimum","(",")","{","return","automaticMinimum",".","isSet","(","field_6_options",")",";"],"docstring_tokens":["automatic","minimum","value","selected"],"prompt_tokens":[]}
{"code_tokens":["public","void","setAutomaticMaximum","(","boolean","value",")","{","field_6_options","=","automaticMaximum",".","setShortBoolean","(","field_6_options,","value",")",";"],"docstring_tokens":["Sets","the","automatic","maximum","field","value"],"prompt_tokens":[]}
{"code_tokens":["public","boolean","isAutomaticMaximum","(",")","{","return","automaticMaximum",".","isSet","(","field_6_options",")",";"],"docstring_tokens":["automatic","maximum","value","selected"],"prompt_tokens":[]}
{"code_tokens":["public","void","setAutomaticMajor","(","boolean","value",")","{","field_6_options","=","automaticMajor",".","setShortBoolean","(","field_6_options,","value",")",";"],"docstring_tokens":["Sets","the","automatic","major","field","value"],"prompt_tokens":[]}
{"code_tokens":["public","void","setAutomaticMinor","(","boolean","value",")","{","field_6_options","=","automaticMinor",".","setShortBoolean","(","field_6_options,","value",")",";"],"docstring_tokens":["Sets","the","automatic","minor","field","value"],"prompt_tokens":[]}
{"code_tokens":["public","void","setAutomaticCategoryCrossing","(","boolean","value",")","{","field_6_options","=","automaticCategoryCrossing",".","setShortBoolean","(","field_6_options,","value",")",";"],"docstring_tokens":["Sets","the","automatic","category","crossing","field","value"],"prompt_tokens":[]}
{"code_tokens":["public","void","setLogarithmicScale","(","boolean","value",")","{","field_6_options","=","logarithmicScale",".","setShortBoolean","(","field_6_options,","value",")",";"],"docstring_tokens":["Sets","the","logarithmic","scale","field","value"],"prompt_tokens":[]}
{"code_tokens":["public","void","setCrossCategoryAxisAtMaximum","(","boolean","value",")","{","field_6_options","=","crossCategoryAxisAtMaximum",".","setShortBoolean","(","field_6_options,","value",")",";"],"docstring_tokens":["Sets","the","cross","category","axis","at","maximum","field","value"],"prompt_tokens":[]}
{"code_tokens":["public","boolean","isCrossCategoryAxisAtMaximum","(",")","{","return","crossCategoryAxisAtMaximum",".","isSet","(","field_6_options",")",";"],"docstring_tokens":["category","axis","to","cross","at","maximum","value"],"prompt_tokens":[]}
{"code_tokens":["public","void","setMargin","(","double","field_1_margin",")","{","this",".","field_1_margin","=","field_1_margin",";"],"docstring_tokens":["Set","the","margin","field","for","the","LeftMargin","record"],"prompt_tokens":[]}
{"code_tokens":["\n\n","@Override\n","public","Entry","getEntry","(","final","String","name",")","throws","FileNotFoundException","{","Entry","rval","=","null",";","\n\n","if","(","name","!=","null",")","{","rval","=","_byname",".","get","(","name",")",";","}","if","(","rval","==","null",")","{","//","throw","more","useful","exceptions","for","known","wrong","file-extensions\n","if","(","_byname",".","containsKey","(","\"Workbook\"",")",")","{","throw","new","IllegalArgumentException","(","\"The","document","is","really","a","XLS","file\"",")",";","}","else","if","(","_byname",".","containsKey","(","\"PowerPoint","Document\"",")",")","{","throw","new","IllegalArgumentException","(","\"The","document","is","really","a","PPT","file\"",")",";","}","else","if","(","_byname",".","containsKey","(","\"VisioDocument\"",")",")","{","throw","new","IllegalArgumentException","(","\"The","document","is","really","a","VSD","file\"",")",";","}","\n\n","//","either","a","null","name","was","given,","or","there","is","no","such","name\n","throw","new","FileNotFoundException","(","\"no","such","entry:","\\\"\"","+","name\n","+","\"\\\",","had:","\"","+","_byname",".","keySet","(",")",")",";","}","return","rval",";"],"docstring_tokens":["get","a","specified","Entry","by","name"],"prompt_tokens":[]}
{"code_tokens":["@SuppressWarnings","(","\"WeakerAccess\"",")","public","DocumentEntry","createOrUpdateDocument","(","final","String","name,\n","final","InputStream","stream",")","throws","IOException\n","{","if","(","!","hasEntry","(","name",")",")","{","return","createDocument","(","name,","stream",")",";","}","else","{","DocumentNode","existing","=","(","DocumentNode",")","getEntry","(","name",")",";","POIFSDocument","nDoc","=","new","POIFSDocument","(","existing",")",";","nDoc",".","replaceContents","(","stream",")",";","return","existing",";","}"],"docstring_tokens":["Set","the","contents","of","a","document,","creating","if","needed,","otherwise","updating"],"prompt_tokens":[]}
{"code_tokens":["@Override\n","public","ClassID","getStorageClsid","(",")","{","return","getProperty","(",")",".","getStorageClsid","(",")",";"],"docstring_tokens":["Gets","the","storage","clsid","of","the","directory","entry"],"prompt_tokens":[]}
{"code_tokens":["@Override\n","public","void","setStorageClsid","(","ClassID","clsidStorage",")","{","getProperty","(",")",".","setStorageClsid","(","clsidStorage",")",";"],"docstring_tokens":["Sets","the","storage","clsid","for","the","directory","entry"],"prompt_tokens":[]}
{"code_tokens":["public","void","addSlideListWithText","(","SlideListWithText","slwt",")","{","//","The","new","SlideListWithText","should","go","in\n","//","just","before","the","EndDocumentRecord\n","Record","endDoc","=","_children[_children",".","length","-","1]",";","if","(","endDoc",".","getRecordType","(",")","==","RecordTypes",".","RoundTripCustomTableStyles12",".","typeID",")","{","//","last","record","can","optionally","be","a","RoundTripCustomTableStyles12Atom\n","endDoc","=","_children[_children",".","length","-","2]",";","}","if","(","endDoc",".","getRecordType","(",")","!=","RecordTypes",".","EndDocument",".","typeID",")","{","throw","new","IllegalStateException","(","\"The","last","child","record","of","a","Document","should","be","EndDocument,","but","it","was","\"","+","endDoc",")",";","}","\n\n","//","Add","in","the","record\n","addChildBefore","(","slwt,","endDoc",")",";","\n\n","//","Updated","our","cached","list","of","SlideListWithText","records\n","int","newSize","=","slwts",".","length","+","1",";","SlideListWithText[]","nl","=","new","SlideListWithText[newSize]",";","System",".","arraycopy","(","slwts,","0,","nl,","0,","slwts",".","length",")",";","nl[nl",".","length-1]","=","slwt",";","slwts","=","nl",";"],"docstring_tokens":["Adds","a","new","SlideListWithText","record,","at","the","appropriate","point","in","the","child","records"],"prompt_tokens":[]}
{"code_tokens":["public","void","removeItem","(","int","sheetId,","String","ref",")","{","//sheet","Id","of","a","sheet","the","cell","belongs","to\n","int","id","=","-1",";","CTCalcCell[]","c","=","chain",".","getCArray","(",")",";","\n\n","for","(","int","i","=","0",";","i","<","c",".","length",";","i++",")","{","//If","sheet","Id","is","omitted,","it","is","assumed","to","be","the","same","as","the","value","of","the","previous","cell",".","if","(","c[i]",".","isSetI","(",")",")","id","=","c[i]",".","getI","(",")",";","\n\n","if","(","id","==","sheetId","&&","c[i]",".","getR","(",")",".","equals","(","ref",")",")","{","if","(","c[i]",".","isSetI","(",")","&&","i","<","c",".","length","-","1","&&","!c[i+1]",".","isSetI","(",")",")","{","c[i+1]",".","setI","(","id",")",";","}","chain",".","removeC","(","i",")",";","break",";","}","}"],"docstring_tokens":["Remove","a","formula","reference","from","the","calculation","chain"],"prompt_tokens":[]}
{"code_tokens":["public","InputStream","openResourceAsStream","(","String","sampleFileName",")","{","\n\n","if","(","_sampleDataIsAvaliableOnClassPath",")","{","InputStream","result","=","sampleFileName","==","null","?","null",":\n","openClasspathResource","(","sampleFileName",")",";","if","(","result","==","null",")","{","throw","new","RuntimeException","(","\"specified","test","sample","file","'\"","+","sampleFileName\n","+","\"'","not","found","on","the","classpath\"",")",";","}","//","wrap","to","avoid","temp","warning","method","about","auto-closing","input","stream\n","return","new","NonSeekableInputStream","(","result",")",";","}","if","(","_resolvedDataDir","==","null",")","{","throw","new","RuntimeException","(","\"Must","set","system","property","'\"\n","+","TEST_PROPERTY\n","+","\"'","properly","before","running","tests\"",")",";","}","\n\n","File","f","=","getFile","(","sampleFileName",")",";","try","{","return","new","FileInputStream","(","f",")",";","}","catch","(","FileNotFoundException","e",")","{","throw","new","RuntimeException","(","e",")",";","}"],"docstring_tokens":["Opens","a","sample","file","from","the","test","data","directory"],"prompt_tokens":[]}
{"code_tokens":["public","POIXMLProperties","getProperties","(",")","{","if","(","properties","==","null",")","{","try","{","properties","=","new","POIXMLProperties","(","pkg",")",";","}","catch","(","Exception","e",")","{","throw","new","POIXMLException","(","e",")",";","}","}","return","properties",";"],"docstring_tokens":["Get","the","document","properties"],"prompt_tokens":[]}
{"code_tokens":["public","void","confirmSignature","(",")","throws","XMLSignatureException,","MarshalException","{","initXmlProvider","(",")",";","final","Document","document","=","DocumentHelper",".","createDocument","(",")",";","final","DOMSignContext","xmlSignContext","=","createXMLSignContext","(","document",")",";","\n\n","//","operate\n","final","DOMSignedInfo","signedInfo","=","preSign","(","xmlSignContext",")",";","\n\n","//","setup:","key","material,","signature","value\n","final","String","signatureValue","=","signDigest","(","xmlSignContext,","signedInfo",")",";","\n\n","//","operate:","postSign\n","postSign","(","xmlSignContext,","signatureValue",")",";"],"docstring_tokens":["add","the","xml","signature","to","the","document"],"prompt_tokens":[]}
{"code_tokens":["public","DOMSignContext","createXMLSignContext","(","final","Document","document",")","{","initXmlProvider","(",")",";","return","new","DOMSignContext","(","signatureConfig",".","getKey","(",")",",","document",")",";"],"docstring_tokens":["Convenience","method","for","creating","the","signature","context"],"prompt_tokens":[]}
{"code_tokens":["@SuppressWarnings","(","\"unchecked\"",")","public","DOMSignedInfo","preSign","(","final","DOMSignContext","xmlSignContext",")","throws","XMLSignatureException,","MarshalException","{","final","Document","document","=","(","Document",")","xmlSignContext",".","getParent","(",")",";","\n\n","registerEventListener","(","document",")",";","\n\n","//","Signature","context","construction",".","if","(","uriDereferencer","!=","null",")","{","xmlSignContext",".","setURIDereferencer","(","uriDereferencer",")",";","}","\n\n","signatureConfig",".","getNamespacePrefixes","(",")",".","forEach","(","xmlSignContext::putNamespacePrefix",")",";","\n\n","xmlSignContext",".","setDefaultNamespacePrefix","(","\"\"",")",";","\n\n","/*\n","*","Add","ds:References","that","come","from","signing","client","local","files",".","*/\n","List<Reference>","references","=","new","ArrayList<>","(",")",";","\n\n","/*\n","*","Invoke","the","signature","facets",".","*/\n","List<XMLObject>","objects","=","new","ArrayList<>","(",")",";","for","(","SignatureFacet","signatureFacet",":","signatureConfig",".","getSignatureFacets","(",")",")","{","LOG",".","atDebug","(",")",".","log","(","\"invoking","signature","facet:","{","}","\",","signatureFacet",".","getClass","(",")",".","getSimpleName","(",")",")",";","signatureFacet",".","preSign","(","this,","document,","references,","objects",")",";","}","\n\n","/*\n","*","ds:SignedInfo\n","*/\n","SignedInfo","signedInfo",";","try","{","SignatureMethod","signatureMethod","=","signatureFactory",".","newSignatureMethod\n","(","signatureConfig",".","getSignatureMethodUri","(",")",",","null",")",";","CanonicalizationMethod","canonicalizationMethod","=","signatureFactory\n",".","newCanonicalizationMethod","(","signatureConfig",".","getCanonicalizationMethod","(",")",",\n","(","C14NMethodParameterSpec",")","null",")",";","signedInfo","=","signatureFactory",".","newSignedInfo","(","canonicalizationMethod,","signatureMethod,","references",")",";","}","catch","(","GeneralSecurityException","e",")","{","throw","new","XMLSignatureException","(","e",")",";","}","\n\n","/*\n","*","JSR105","ds:Signature","creation\n","*/\n","String","signatureValueId","=","signatureConfig",".","getPackageSignatureId","(",")","+","\"-signature-value\"",";","XMLSignature","xmlSignature","=","signatureFactory\n",".","newXMLSignature","(","signedInfo,","null,","objects,","signatureConfig",".","getPackageSignatureId","(",")",",\n","signatureValueId",")",";","\n\n","/*\n","*","ds:Signature","Marshalling",".","*/\n","xmlSignature",".","sign","(","xmlSignContext",")",";","\n\n","/*\n","*","Completion","of","undigested","ds:References","in","the","ds:Manifests",".","*/\n","for","(","XMLObject","object",":","objects",")","{","LOG",".","atDebug","(",")",".","log","(","\"object","java","type:","{","}","\",","object",".","getClass","(",")",".","getName","(",")",")",";","List<XMLStructure>","objectContentList","=","object",".","getContent","(",")",";","for","(","XMLStructure","objectContent",":","objectContentList",")","{","LOG",".","atDebug","(",")",".","log","(","\"object","content","java","type:","{","}","\",","objectContent",".","getClass","(",")",".","getName","(",")",")",";","if","(","!","(","objectContent","instanceof","Manifest",")",")","{","continue",";","}","Manifest","manifest","=","(","Manifest",")","objectContent",";","List<Reference>","manifestReferences","=","manifest",".","getReferences","(",")",";","for","(","Reference","manifestReference",":","manifestReferences",")","{","if","(","manifestReference",".","getDigestValue","(",")","!=","null",")","{","continue",";","}","\n\n","DOMReference","manifestDOMReference","=","(","DOMReference",")","manifestReference",";","manifestDOMReference",".","digest","(","xmlSignContext",")",";","}","}","}","\n\n","/*\n","*","Completion","of","undigested","ds:References",".","*/\n","List<Reference>","signedInfoReferences","=","signedInfo",".","getReferences","(",")",";","for","(","Reference","signedInfoReference",":","signedInfoReferences",")","{","DOMReference","domReference","=","(","DOMReference",")","signedInfoReference",";","\n\n","//","ds:Reference","with","external","digest","value\n","if","(","domReference",".","getDigestValue","(",")","!=","null",")","{","continue",";","}","\n\n","domReference",".","digest","(","xmlSignContext",")",";","}","\n\n","return","(","DOMSignedInfo",")","signedInfo",";"],"docstring_tokens":["Helper","method","for","adding","informations","before","the","signing"],"prompt_tokens":[]}
{"code_tokens":["protected","void","writeDocument","(","Document","document",")","throws","MarshalException","{","XmlOptions","xo","=","new","XmlOptions","(",")",";","Map<String,String>","namespaceMap","=","new","HashMap<>","(",")",";","signatureConfig",".","getNamespacePrefixes","(",")",".","forEach","(","(","k,v",")","->","namespaceMap",".","put","(","v,k",")",")",";","xo",".","setSaveSuggestedPrefixes","(","namespaceMap",")",";","xo",".","setUseDefaultNamespace","(",")",";","\n\n","LOG",".","atDebug","(",")",".","log","(","\"output","signed","Office","OpenXML","document\"",")",";","\n\n","/*\n","*","Copy","the","original","OOXML","content","to","the","signed","OOXML","package",".","During\n","*","copying","some","files","need","to","changed",".","*/\n","try","{","//","<Default","Extension=\"sigs\"","ContentType=\"application/vnd",".","openxmlformats-package",".","digital-signature-origin\"/>\n","final","DSigRelation","originDesc","=","DSigRelation",".","ORIGIN_SIGS",";","PackagePartName","originPartName","=","PackagingURIHelper",".","createPartName","(","originDesc",".","getFileName","(","0",")",")",";","\n\n","PackagePart","originPart","=","opcPackage",".","getPart","(","originPartName",")",";","if","(","originPart","==","null",")","{","//","touch","empty","marker","file\n","originPart","=","opcPackage",".","createPart","(","originPartName,","originDesc",".","getContentType","(",")",")",";","opcPackage",".","addRelationship","(","originPartName,","TargetMode",".","INTERNAL,","originDesc",".","getRelation","(",")",")",";","}","\n\n","//","<Override","PartName=\"/_xmlsignatures/sig1",".","xml\"","ContentType=\"application/vnd",".","openxmlformats-package",".","digital-signature-xmlsignature+xml\"/>\n","final","DSigRelation","sigDesc","=","DSigRelation",".","SIG",";","int","nextSigIdx","=","opcPackage",".","getUnusedPartIndex","(","sigDesc",".","getDefaultFileName","(",")",")",";","\n\n","if","(","!signatureConfig",".","isAllowMultipleSignatures","(",")",")","{","PackageRelationshipCollection","prc","=","originPart",".","getRelationshipsByType","(","sigDesc",".","getRelation","(",")",")",";","for","(","int","i=2",";","i<nextSigIdx",";","i++",")","{","PackagePartName","pn","=","PackagingURIHelper",".","createPartName","(","sigDesc",".","getFileName","(","i",")",")",";","for","(","PackageRelationship","rel",":","prc",")","{","PackagePart","pp","=","originPart",".","getRelatedPart","(","rel",")",";","if","(","pp",".","getPartName","(",")",".","equals","(","pn",")",")","{","originPart",".","removeRelationship","(","rel",".","getId","(",")",")",";","prc",".","removeRelationship","(","rel",".","getId","(",")",")",";","break",";","}","}","\n\n","opcPackage",".","removePart","(","opcPackage",".","getPart","(","pn",")",")",";","}","nextSigIdx","=","1",";","}","\n\n\n","PackagePartName","sigPartName","=","PackagingURIHelper",".","createPartName","(","sigDesc",".","getFileName","(","nextSigIdx",")",")",";","PackagePart","sigPart","=","opcPackage",".","getPart","(","sigPartName",")",";","if","(","sigPart","==","null",")","{","sigPart","=","opcPackage",".","createPart","(","sigPartName,","sigDesc",".","getContentType","(",")",")",";","originPart",".","addRelationship","(","sigPartName,","TargetMode",".","INTERNAL,","sigDesc",".","getRelation","(",")",")",";","}","else","{","sigPart",".","clear","(",")",";","}","\n\n","try","(","OutputStream","os","=","sigPart",".","getOutputStream","(",")",")","{","SignatureDocument","sigDoc","=","SignatureDocument",".","Factory",".","parse","(","document,","DEFAULT_XML_OPTIONS",")",";","sigDoc",".","save","(","os,","xo",")",";","}","\n\n","}","catch","(","Exception","e",")","{","throw","new","MarshalException","(","\"Unable","to","write","signature","document\",","e",")",";","}"],"docstring_tokens":["Write","XML","signature","into","the","OPC","package"],"prompt_tokens":[]}
{"code_tokens":["private","ParseNode","getFunction","(","String","name,","Ptg","namePtg,","ParseNode[]","args",")","{","\n\n","FunctionMetadata","fm","=","FunctionMetadataRegistry",".","getFunctionByName","(","name",".","toUpperCase","(","Locale",".","ROOT",")",")",";","int","numArgs","=","args",".","length",";","if","(","fm","==","null",")","{","if","(","namePtg","==","null",")","{","throw","new","IllegalStateException","(","\"NamePtg","must","be","supplied","for","external","functions\"",")",";","}","//","must","be","external","function\n","ParseNode[]","allArgs","=","new","ParseNode[numArgs+1]",";","allArgs[0]","=","new","ParseNode","(","namePtg",")",";","System",".","arraycopy","(","args,","0,","allArgs,","1,","numArgs",")",";","return","new","ParseNode","(","FuncVarPtg",".","create","(","name,","numArgs+1",")",",","allArgs",")",";","}","\n\n","if","(","namePtg","!=","null",")","{","throw","new","IllegalStateException","(","\"NamePtg","no","applicable","to","internal","functions\"",")",";","}","boolean","isVarArgs","=","!fm",".","hasFixedArgsLength","(",")",";","int","funcIx","=","fm",".","getIndex","(",")",";","if","(","funcIx","==","FunctionMetadataRegistry",".","FUNCTION_INDEX_SUM","&&","args",".","length","==","1",")","{","//","Excel","encodes","the","sum","of","a","single","argument","as","tAttrSum\n","//","POI","does","the","same","for","consistency,","but","this","is","not","critical\n","return","new","ParseNode","(","AttrPtg",".","getSumSingle","(",")",",","args",")",";","//","The","code","below","would","encode","tFuncVar","(","SUM",")","which","seems","to","do","no","harm\n","}","validateNumArgs","(","args",".","length,","fm",")",";","\n\n","AbstractFunctionPtg","retval",";","if","(","isVarArgs",")","{","retval","=","FuncVarPtg",".","create","(","name,","numArgs",")",";","}","else","{","retval","=","FuncPtg",".","create","(","funcIx",")",";","}","return","new","ParseNode","(","retval,","args",")",";"],"docstring_tokens":["Generates","the","variable","function","ptg","for","the","formula"],"prompt_tokens":[]}
{"code_tokens":["private","ParseNode[]","Arguments","(",")","{","//average","2","args","per","function\n","List<ParseNode>","temp","=","new","ArrayList<>","(","2",")",";","SkipWhite","(",")",";","if","(","look","==","'",")","'",")","{","return","ParseNode",".","EMPTY_ARRAY",";","}","\n\n","boolean","missedPrevArg","=","true",";","while","(","true",")","{","SkipWhite","(",")",";","if","(","isArgumentDelimiter","(","look",")",")","{","if","(","missedPrevArg",")","{","temp",".","add","(","new","ParseNode","(","MissingArgPtg",".","instance",")",")",";","}","if","(","look","==","'",")","'",")","{","break",";","}","Match","(","','",")",";","missedPrevArg","=","true",";","continue",";","}","temp",".","add","(","intersectionExpression","(",")",")",";","missedPrevArg","=","false",";","SkipWhite","(",")",";","if","(","!isArgumentDelimiter","(","look",")",")","{","throw","expected","(","\"','","or","'",")","'\"",")",";","}","}","ParseNode[]","result","=","new","ParseNode[temp",".","size","(",")","]",";","temp",".","toArray","(","result",")",";","return","result",";"],"docstring_tokens":["get","arguments","to","a","function"],"prompt_tokens":[]}
{"code_tokens":["private","ParseNode","powerFactor","(",")","{","ParseNode","result","=","percentFactor","(",")",";","while","(","true",")","{","SkipWhite","(",")",";","if","(","look","!=","'^'",")","{","return","result",";","}","Match","(","'^'",")",";","ParseNode","other","=","percentFactor","(",")",";","result","=","new","ParseNode","(","PowerPtg",".","instance,","result,","other",")",";","}"],"docstring_tokens":["Parse","and","Translate","a","Math","Factor"],"prompt_tokens":[]}
{"code_tokens":["private","void","parse","(",")","{","_pointer=0",";","GetChar","(",")",";","_rootNode","=","unionExpression","(",")",";","\n\n","if","(","_pointer","<=","_formulaLength",")","{","String","msg","=","\"Unused","input","[\"","+","_formulaString",".","substring","(","_pointer-1",")","+","\"]","after","attempting","to","parse","the","formula","[\"","+","_formulaString","+","\"]\"",";","throw","new","FormulaParseException","(","msg",")",";","}"],"docstring_tokens":["API","call","to","execute","the","parsing","of","the","formula"],"prompt_tokens":[]}
{"code_tokens":["public","static","List<String>","compare","(","Workbook","wb1,","Workbook","wb2",")","{","Locator","loc1","=","new","Locator","(",")",";","Locator","loc2","=","new","Locator","(",")",";","loc1",".","workbook","=","wb1",";","loc2",".","workbook","=","wb2",";","\n\n","ExcelComparator","excelComparator","=","new","ExcelComparator","(",")",";","excelComparator",".","compareNumberOfSheets","(","loc1,","loc2",")",";","excelComparator",".","compareSheetNames","(","loc1,","loc2",")",";","excelComparator",".","compareSheetData","(","loc1,","loc2",")",";","\n\n","return","Collections",".","unmodifiableList","(","excelComparator",".","listOfDifferences",")",";"],"docstring_tokens":["Utility","to","compare","Excel","File","Contents","cell","by","cell","for","all","sheets"],"prompt_tokens":[]}
{"code_tokens":["private","void","isCellBorderMatches","(","Locator","loc1,","Locator","loc2,","char","borderSide",")","{","if","(","!","(","loc1",".","cell","instanceof","XSSFCell",")",")","{","return",";","}","\n\n","CellStyle","style1","=","loc1",".","cell",".","getCellStyle","(",")",";","if","(","style1","==","null",")","{","return",";","}","CellStyle","style2","=","loc2",".","cell",".","getCellStyle","(",")",";","if","(","style2","==","null",")","{","return",";","}","\n\n","boolean","b1,","b2",";","String","borderName",";","switch","(","borderSide",")","{","case","'b':\n","b1","=","style1",".","getBorderBottom","(",")","==","BorderStyle",".","THIN",";","b2","=","style2",".","getBorderBottom","(",")","==","BorderStyle",".","THIN",";","borderName","=","\"BOTTOM\"",";","break",";","case","'l':\n","b1","=","style1",".","getBorderLeft","(",")","==","BorderStyle",".","THIN",";","b2","=","style2",".","getBorderLeft","(",")","==","BorderStyle",".","THIN",";","borderName","=","\"LEFT\"",";","break",";","case","'r':\n","b1","=","style1",".","getBorderRight","(",")","==","BorderStyle",".","THIN",";","b2","=","style2",".","getBorderRight","(",")","==","BorderStyle",".","THIN",";","borderName","=","\"RIGHT\"",";","break",";","case","'t':\n","default:\n","b1","=","style1",".","getBorderTop","(",")","==","BorderStyle",".","THIN",";","b2","=","style2",".","getBorderTop","(",")","==","BorderStyle",".","THIN",";","borderName","=","\"TOP\"",";","break",";","}","if","(","b1","!=","b2",")","{","addMessage","(","loc1,","loc2,\n","\"Cell","Border","Attributes","does","not","Match","::\",\n","(","b1","?","\"\"",":","\"NOT","\"",")","+borderName+\"","BORDER\",\n","(","b2","?","\"\"",":","\"NOT","\"",")","+borderName+\"","BORDER\"\n",")",";","}"],"docstring_tokens":["Checks","if","cell","border","bottom","matches"],"prompt_tokens":[]}
{"code_tokens":["@Internal\n","public","void","setGrfSupression","(","byte","value",")","{","field_1_formatFlags","=","(","byte",")","grfSupression",".","setValue","(","field_1_formatFlags,","value",")",";"],"docstring_tokens":["Sets","the","grfSupression","field","value"],"prompt_tokens":[]}
{"code_tokens":["@Internal\n","public","void","setFpc","(","byte","value",")","{","field_1_formatFlags","=","(","byte",")","fpc",".","setValue","(","field_1_formatFlags,","value",")",";"],"docstring_tokens":["Sets","the","fpc","field","value"],"prompt_tokens":[]}
{"code_tokens":["@Internal\n","public","void","setRncFtn","(","byte","value",")","{","field_3_footnoteInfo","=","(","short",")","rncFtn",".","setValue","(","field_3_footnoteInfo,","value",")",";"],"docstring_tokens":["Sets","the","rncFtn","field","value"],"prompt_tokens":[]}
{"code_tokens":["@Internal\n","public","void","setNFtn","(","short","value",")","{","field_3_footnoteInfo","=","(","short",")","nFtn",".","setValue","(","field_3_footnoteInfo,","value",")",";"],"docstring_tokens":["Sets","the","nFtn","field","value"],"prompt_tokens":[]}
{"code_tokens":["@Internal\n","public","void","setUnused5","(","byte","value",")","{","field_8_docinfo3","=","(","short",")","unused5",".","setValue","(","field_8_docinfo3,","value",")",";"],"docstring_tokens":["Sets","the","unused5","field","value"],"prompt_tokens":[]}
{"code_tokens":["@Internal\n","public","void","setRncEdn","(","byte","value",")","{","field_23_Edn","=","(","short",")","rncEdn",".","setValue","(","field_23_Edn,","value",")",";"],"docstring_tokens":["Sets","the","rncEdn","field","value"],"prompt_tokens":[]}
{"code_tokens":["@Internal\n","public","void","setNEdn","(","short","value",")","{","field_23_Edn","=","(","short",")","nEdn",".","setValue","(","field_23_Edn,","value",")",";"],"docstring_tokens":["Sets","the","nEdn","field","value"],"prompt_tokens":[]}
{"code_tokens":["@Internal\n","public","void","setEpc","(","byte","value",")","{","field_24_Edn1","=","(","short",")","epc",".","setValue","(","field_24_Edn1,","value",")",";"],"docstring_tokens":["Sets","the","epc","field","value"],"prompt_tokens":[]}
{"code_tokens":["@Internal\n","public","void","setNfcFtnRef1","(","byte","value",")","{","field_24_Edn1","=","(","short",")","nfcFtnRef1",".","setValue","(","field_24_Edn1,","value",")",";"],"docstring_tokens":["Sets","the","nfcFtnRef1","field","value"],"prompt_tokens":[]}
{"code_tokens":["@Internal\n","public","void","setNfcEdnRef1","(","byte","value",")","{","field_24_Edn1","=","(","short",")","nfcEdnRef1",".","setValue","(","field_24_Edn1,","value",")",";"],"docstring_tokens":["Sets","the","nfcEdnRef1","field","value"],"prompt_tokens":[]}
{"code_tokens":["@Internal\n","public","void","setWvkSaved","(","byte","value",")","{","field_32_view","=","(","short",")","wvkSaved",".","setValue","(","field_32_view,","value",")",";"],"docstring_tokens":["Sets","the","wvkSaved","field","value"],"prompt_tokens":[]}
{"code_tokens":["@Internal\n","public","void","setWScaleSaved","(","short","value",")","{","field_32_view","=","(","short",")","wScaleSaved",".","setValue","(","field_32_view,","value",")",";"],"docstring_tokens":["Sets","the","wScaleSaved","field","value"],"prompt_tokens":[]}
{"code_tokens":["@Internal\n","public","void","setZkSaved","(","byte","value",")","{","field_32_view","=","(","short",")","zkSaved",".","setValue","(","field_32_view,","value",")",";"],"docstring_tokens":["Sets","the","zkSaved","field","value"],"prompt_tokens":[]}
{"code_tokens":["@Internal\n","public","void","setLvl","(","byte","value",")","{","field_37_docinfo5","=","(","short",")","lvl",".","setValue","(","field_37_docinfo5,","value",")",";"],"docstring_tokens":["Sets","the","lvl","field","value"],"prompt_tokens":[]}
{"code_tokens":["@Internal\n","public","void","setKeyVirusSession30","(","int","value",")","{","field_43_virusinfo","=","KeyVirusSession30",".","setValue","(","field_43_virusinfo,","value",")",";"],"docstring_tokens":["Sets","the","KeyVirusSession30","field","value"],"prompt_tokens":[]}
{"code_tokens":["public","static","boolean","startsWithIgnoreCase","(","String","haystack,","String","prefix",")","{","return","haystack",".","regionMatches","(","true,","0,","prefix,","0,","prefix",".","length","(",")",")",";"],"docstring_tokens":["Tests","if","the","string","starts","with","the","specified","prefix,","ignoring","case","consideration"],"prompt_tokens":[]}
{"code_tokens":["public","static","boolean","endsWithIgnoreCase","(","String","haystack,","String","suffix",")","{","int","length","=","suffix",".","length","(",")",";","int","start","=","haystack",".","length","(",")","-","length",";","return","haystack",".","regionMatches","(","true,","start,","suffix,","0,","length",")",";"],"docstring_tokens":["Tests","if","the","string","ends","with","the","specified","suffix,","ignoring","case","consideration"],"prompt_tokens":[]}
{"code_tokens":["public","String","getFormat","(","short","index",")","{","if","(","_movedBuiltins",")","{","return","_formats",".","get","(","index",")",";","}","\n\n","if","(","index","==","-1",")","{","//","YK:","formatIndex","can","be","-1,","for","example,","for","cell","in","column","Y","in","test-data/spreadsheet/45322",".","xls\n","//","return","null","for","those\n","return","null",";","}","\n\n","String","fmt","=","_formats",".","size","(",")",">","index","?","_formats",".","get","(","index",")",":","null",";","if","(","_builtinFormats",".","length",">","index","&&","_builtinFormats[index]","!=","null",")","{","//","It's","in","the","built","in","range\n","if","(","fmt","!=","null",")","{","//","It's","been","overriden,","use","that","value\n","return","fmt",";","}","else","{","//","Standard","built","in","format\n","return","_builtinFormats[index]",";","}","}","return","fmt",";"],"docstring_tokens":["get","the","format","string","that","matches","the","given","format","index"],"prompt_tokens":[]}
{"code_tokens":["public","void","setParsedExpression","(","Ptg[]","ptgs",")","{","notifyFormulaChanging","(",")",";","_formulaRecord",".","setParsedExpression","(","ptgs",")",";"],"docstring_tokens":["Also","checks","for","a","related","shared","formula","and","unlinks","it","if","found"],"prompt_tokens":[]}
{"code_tokens":["public","short","getChartGroupIndex","(",")","{","return","field_1_chartGroupIndex",";"],"docstring_tokens":["Get","the","chart","group","index","field","for","the","SeriesChartGroupIndex","record"],"prompt_tokens":[]}
{"code_tokens":["public","void","setChartGroupIndex","(","short","field_1_chartGroupIndex",")","{","this",".","field_1_chartGroupIndex","=","field_1_chartGroupIndex",";"],"docstring_tokens":["Set","the","chart","group","index","field","for","the","SeriesChartGroupIndex","record"],"prompt_tokens":[]}
{"code_tokens":["protected","void","cacheProperties","(",")","{","if","(","origSize","==","null","||","checksum","==","null",")","{","byte[]","data","=","getData","(",")",";","checksum","=","IOUtils",".","calculateChecksum","(","data",")",";","PictureType","pt","=","getType","(",")",";","if","(","pt","==","null",")","{","origSize","=","new","Dimension","(","1,1",")",";","return",";","}","switch","(","pt",")","{","case","EMF:\n","origSize","=","new","ImageHeaderEMF","(","data,","0",")",".","getSize","(",")",";","break",";","case","WMF:\n","//","wmf","files","in","pptx","usually","have","their","placeable","header","//","stripped","away,","so","this","returns","only","the","dummy","size\n","origSize","=","new","ImageHeaderWMF","(","data,","0",")",".","getSize","(",")",";","break",";","case","PICT:\n","origSize","=","new","ImageHeaderPICT","(","data,","0",")",".","getSize","(",")",";","break",";","default:\n","origSize","=","new","ImageHeaderBitmap","(","data,","0",")",".","getSize","(",")",";","break",";","}","}"],"docstring_tokens":["Determine","and","cache","image","properties"],"prompt_tokens":[]}
{"code_tokens":["private","int","writeHidden","(","RowRecord","pRowRecord,","int","row",")","{","int","rowIx","=","row",";","RowRecord","rowRecord","=","pRowRecord",";","int","level","=","rowRecord",".","getOutlineLevel","(",")",";","while","(","rowRecord","!=","null","&&","getRow","(","rowIx",")",".","getOutlineLevel","(",")",">=","level",")","{","rowRecord",".","setZeroHeight","(","true",")",";","rowIx++",";","rowRecord","=","getRow","(","rowIx",")",";","}","return","rowIx",";"],"docstring_tokens":["Hide","all","rows","at","or","below","the","current","outline","level"],"prompt_tokens":[]}
{"code_tokens":["@SuppressWarnings","(","\"WeakerAccess\"",")","public","void","setBulletAutoNumber","(","AutoNumberingScheme","scheme,","int","startAt",")","{","if","(","startAt","<","1",")","{","throw","new","IllegalArgumentException","(","\"Start","Number","must","be","greater","or","equal","that","1\"",")",";","}","CTTextParagraphProperties","pr","=","_p",".","isSetPPr","(",")","?","_p",".","getPPr","(",")",":","_p",".","addNewPPr","(",")",";","CTTextAutonumberBullet","lst","=","pr",".","isSetBuAutoNum","(",")","?","pr",".","getBuAutoNum","(",")",":","pr",".","addNewBuAutoNum","(",")",";","lst",".","setType","(","STTextAutonumberScheme",".","Enum",".","forInt","(","scheme",".","ooxmlId",")",")",";","lst",".","setStartAt","(","startAt",")",";"],"docstring_tokens":["Specifies","that","automatic","numbered","bullet","points","should","be","applied","to","this","paragraph"],"prompt_tokens":[]}
{"code_tokens":["public","short","getMinimumCategory","(",")","{","return","field_1_minimumCategory",";"],"docstring_tokens":["Get","the","minimum","category","field","for","the","AxisOptions","record"],"prompt_tokens":[]}
{"code_tokens":["public","void","setMinimumCategory","(","short","field_1_minimumCategory",")","{","this",".","field_1_minimumCategory","=","field_1_minimumCategory",";"],"docstring_tokens":["Set","the","minimum","category","field","for","the","AxisOptions","record"],"prompt_tokens":[]}
{"code_tokens":["public","short","getMaximumCategory","(",")","{","return","field_2_maximumCategory",";"],"docstring_tokens":["Get","the","maximum","category","field","for","the","AxisOptions","record"],"prompt_tokens":[]}
{"code_tokens":["public","void","setMaximumCategory","(","short","field_2_maximumCategory",")","{","this",".","field_2_maximumCategory","=","field_2_maximumCategory",";"],"docstring_tokens":["Set","the","maximum","category","field","for","the","AxisOptions","record"],"prompt_tokens":[]}
{"code_tokens":["public","short","getMajorUnitValue","(",")","{","return","field_3_majorUnitValue",";"],"docstring_tokens":["Get","the","major","unit","value","field","for","the","AxisOptions","record"],"prompt_tokens":[]}
{"code_tokens":["public","void","setMajorUnitValue","(","short","field_3_majorUnitValue",")","{","this",".","field_3_majorUnitValue","=","field_3_majorUnitValue",";"],"docstring_tokens":["Set","the","major","unit","value","field","for","the","AxisOptions","record"],"prompt_tokens":[]}
{"code_tokens":["public","short","getMajorUnit","(",")","{","return","field_4_majorUnit",";"],"docstring_tokens":["Get","the","major","unit","field","for","the","AxisOptions","record"],"prompt_tokens":[]}
{"code_tokens":["public","void","setMajorUnit","(","short","field_4_majorUnit",")","{","this",".","field_4_majorUnit","=","field_4_majorUnit",";"],"docstring_tokens":["Set","the","major","unit","field","for","the","AxisOptions","record"],"prompt_tokens":[]}
{"code_tokens":["public","short","getMinorUnitValue","(",")","{","return","field_5_minorUnitValue",";"],"docstring_tokens":["Get","the","minor","unit","value","field","for","the","AxisOptions","record"],"prompt_tokens":[]}
{"code_tokens":["public","void","setMinorUnitValue","(","short","field_5_minorUnitValue",")","{","this",".","field_5_minorUnitValue","=","field_5_minorUnitValue",";"],"docstring_tokens":["Set","the","minor","unit","value","field","for","the","AxisOptions","record"],"prompt_tokens":[]}
{"code_tokens":["public","short","getMinorUnit","(",")","{","return","field_6_minorUnit",";"],"docstring_tokens":["Get","the","minor","unit","field","for","the","AxisOptions","record"],"prompt_tokens":[]}
{"code_tokens":["public","void","setMinorUnit","(","short","field_6_minorUnit",")","{","this",".","field_6_minorUnit","=","field_6_minorUnit",";"],"docstring_tokens":["Set","the","minor","unit","field","for","the","AxisOptions","record"],"prompt_tokens":[]}
{"code_tokens":["public","short","getBaseUnit","(",")","{","return","field_7_baseUnit",";"],"docstring_tokens":["Get","the","base","unit","field","for","the","AxisOptions","record"],"prompt_tokens":[]}
{"code_tokens":["public","void","setBaseUnit","(","short","field_7_baseUnit",")","{","this",".","field_7_baseUnit","=","field_7_baseUnit",";"],"docstring_tokens":["Set","the","base","unit","field","for","the","AxisOptions","record"],"prompt_tokens":[]}
{"code_tokens":["public","short","getCrossingPoint","(",")","{","return","field_8_crossingPoint",";"],"docstring_tokens":["Get","the","crossing","point","field","for","the","AxisOptions","record"],"prompt_tokens":[]}
{"code_tokens":["public","void","setCrossingPoint","(","short","field_8_crossingPoint",")","{","this",".","field_8_crossingPoint","=","field_8_crossingPoint",";"],"docstring_tokens":["Set","the","crossing","point","field","for","the","AxisOptions","record"],"prompt_tokens":[]}
{"code_tokens":["public","short","getOptions","(",")","{","return","field_9_options",";"],"docstring_tokens":["Get","the","options","field","for","the","AxisOptions","record"],"prompt_tokens":[]}
{"code_tokens":["public","void","setOptions","(","short","field_9_options",")","{","this",".","field_9_options","=","field_9_options",";"],"docstring_tokens":["Set","the","options","field","for","the","AxisOptions","record"],"prompt_tokens":[]}
{"code_tokens":["public","boolean","isIsDate","(",")","{","return","isDate",".","isSet","(","field_9_options",")",";"],"docstring_tokens":["this","is","a","date","axis"],"prompt_tokens":[]}
{"code_tokens":["public","boolean","isDefaultDateSettings","(",")","{","return","defaultDateSettings",".","isSet","(","field_9_options",")",";"],"docstring_tokens":["use","default","date","setttings","for","this","axis"],"prompt_tokens":[]}
{"code_tokens":["public","static","void","createShapeTree","(","EscherContainerRecord","container,","EscherAggregate","agg,","HSSFShapeContainer","out,","DirectoryNode","root",")","{","if","(","container",".","getRecordId","(",")","==","EscherContainerRecord",".","SPGR_CONTAINER",")","{","ObjRecord","obj","=","null",";","EscherClientDataRecord","clientData","=","(","(","EscherContainerRecord",")","container",".","getChild","(","0",")",")",".","getChildById","(","EscherClientDataRecord",".","RECORD_ID",")",";","if","(","null","!=","clientData",")","{","obj","=","(","ObjRecord",")","agg",".","getShapeToObjMapping","(",")",".","get","(","clientData",")",";","}","HSSFShapeGroup","group","=","new","HSSFShapeGroup","(","container,","obj",")",";","List<EscherContainerRecord>","children","=","container",".","getChildContainers","(",")",";","//","skip","the","first","child","record,","it","is","group","descriptor\n","if","(","children",".","size","(",")",">","1",")","{","children",".","subList","(","1,","children",".","size","(",")",")",".","forEach","(","c","->","createShapeTree","(","c,","agg,","group,","root",")",")",";","}","out",".","addShape","(","group",")",";","}","else","if","(","container",".","getRecordId","(",")","==","EscherContainerRecord",".","SP_CONTAINER",")","{","Map<EscherRecord,","Record>","shapeToObj","=","agg",".","getShapeToObjMapping","(",")",";","ObjRecord","objRecord","=","null",";","TextObjectRecord","txtRecord","=","null",";","\n\n","for","(","EscherRecord","record",":","container",")","{","switch","(","EscherRecordTypes",".","forTypeID","(","record",".","getRecordId","(",")",")",")","{","case","CLIENT_DATA:\n","objRecord","=","(","ObjRecord",")","shapeToObj",".","get","(","record",")",";","break",";","case","CLIENT_TEXTBOX:\n","txtRecord","=","(","TextObjectRecord",")","shapeToObj",".","get","(","record",")",";","break",";","default:\n","break",";","}","}","if","(","objRecord","==","null",")","{","throw","new","RecordFormatException","(","\"EscherClientDataRecord","can't","be","found",".","\"",")",";","}","if","(","isEmbeddedObject","(","objRecord",")",")","{","HSSFObjectData","objectData","=","new","HSSFObjectData","(","container,","objRecord,","root",")",";","out",".","addShape","(","objectData",")",";","return",";","}","CommonObjectDataSubRecord","cmo","=","(","CommonObjectDataSubRecord",")","objRecord",".","getSubRecords","(",")",".","get","(","0",")",";","final","HSSFShape","shape",";","switch","(","cmo",".","getObjectType","(",")",")","{","case","CommonObjectDataSubRecord",".","OBJECT_TYPE_PICTURE:\n","shape","=","new","HSSFPicture","(","container,","objRecord",")",";","break",";","case","CommonObjectDataSubRecord",".","OBJECT_TYPE_RECTANGLE:\n","shape","=","new","HSSFSimpleShape","(","container,","objRecord,","txtRecord",")",";","break",";","case","CommonObjectDataSubRecord",".","OBJECT_TYPE_LINE:\n","shape","=","new","HSSFSimpleShape","(","container,","objRecord",")",";","break",";","case","CommonObjectDataSubRecord",".","OBJECT_TYPE_COMBO_BOX:\n","shape","=","new","HSSFCombobox","(","container,","objRecord",")",";","break",";","case","CommonObjectDataSubRecord",".","OBJECT_TYPE_MICROSOFT_OFFICE_DRAWING:\n","EscherOptRecord","optRecord","=","container",".","getChildById","(","EscherOptRecord",".","RECORD_ID",")",";","if","(","optRecord","==","null",")","{","shape","=","new","HSSFSimpleShape","(","container,","objRecord,","txtRecord",")",";","}","else","{","EscherProperty","property","=","optRecord",".","lookup","(","EscherPropertyTypes",".","GEOMETRY__VERTICES",")",";","if","(","null","!=","property",")","{","shape","=","new","HSSFPolygon","(","container,","objRecord,","txtRecord",")",";","}","else","{","shape","=","new","HSSFSimpleShape","(","container,","objRecord,","txtRecord",")",";","}","}","break",";","case","CommonObjectDataSubRecord",".","OBJECT_TYPE_TEXT:\n","shape","=","new","HSSFTextbox","(","container,","objRecord,","txtRecord",")",";","break",";","case","CommonObjectDataSubRecord",".","OBJECT_TYPE_COMMENT:\n","shape","=","new","HSSFComment","(","container,","objRecord,","txtRecord,","agg",".","getNoteRecordByObj","(","objRecord",")",")",";","break",";","default:\n","shape","=","new","HSSFSimpleShape","(","container,","objRecord,","txtRecord",")",";","}","out",".","addShape","(","shape",")",";","}"],"docstring_tokens":["build","shape","tree","from","escher","container"],"prompt_tokens":[]}
{"code_tokens":["public","void","setSheetname","(","String","sheetName",")","{","\n\n","WorkbookUtil",".","validateSheetName","(","sheetName",")",";","field_5_sheetname","=","sheetName",";","field_4_isMultibyteUnicode","=","StringUtil",".","hasMultibyte","(","sheetName",")","?","1",":","0",";"],"docstring_tokens":["Set","the","sheetname","for","this","sheet"],"prompt_tokens":[]}
{"code_tokens":["public","static","BoundSheetRecord[]","orderByBofPosition","(","List<BoundSheetRecord>","boundSheetRecords",")","{","BoundSheetRecord[]","bsrs","=","new","BoundSheetRecord[boundSheetRecords",".","size","(",")","]",";","boundSheetRecords",".","toArray","(","bsrs",")",";","Arrays",".","sort","(","bsrs,","BoundSheetRecord::compareRecords",")",";","return","bsrs",";"],"docstring_tokens":["Converts","a","List","of","BoundSheetRecords","to","an","array","and","sorts","by","the","position","of","their","BOFs"],"prompt_tokens":[]}
{"code_tokens":["private","void","checkForEmptyCellComments","(","EmptyCellCommentsCheckType","type",")","{","if","(","commentCellRefs","!=","null","&&","!commentCellRefs",".","isEmpty","(",")",")","{","//","If","we've","reached","the","end","of","the","sheet","data,","output","any\n","//","comments","we","haven't","yet","already","handled\n","if","(","type","==","EmptyCellCommentsCheckType",".","END_OF_SHEET_DATA",")","{","while","(","!commentCellRefs",".","isEmpty","(",")",")","{","outputEmptyCellComment","(","commentCellRefs",".","remove","(",")",")",";","}","return",";","}","\n\n","//","At","the","end","of","a","row,","handle","any","comments","for","\"missing\"","rows","before","us\n","if","(","this",".","cellRef","==","null",")","{","if","(","type","==","EmptyCellCommentsCheckType",".","END_OF_ROW",")","{","while","(","!commentCellRefs",".","isEmpty","(",")",")","{","if","(","commentCellRefs",".","peek","(",")",".","getRow","(",")","==","rowNum",")","{","outputEmptyCellComment","(","commentCellRefs",".","remove","(",")",")",";","}","else","{","return",";","}","}","return",";","}","else","{","throw","new","IllegalStateException","(","\"Cell","ref","should","be","null","only","if","there","are","only","empty","cells","in","the","row",";","rowNum:","\"","+","rowNum",")",";","}","}","\n\n","CellAddress","nextCommentCellRef",";","do","{","CellAddress","cellRef","=","new","CellAddress","(","this",".","cellRef",")",";","CellAddress","peekCellRef","=","commentCellRefs",".","peek","(",")",";","if","(","type","==","EmptyCellCommentsCheckType",".","CELL","&&","cellRef",".","equals","(","peekCellRef",")",")","{","//","remove","the","comment","cell","ref","from","the","list","if","we're","about","to","handle","it","alongside","the","cell","content\n","commentCellRefs",".","remove","(",")",";","return",";","}","else","{","//","fill","in","any","gaps","if","there","are","empty","cells","with","comment","mixed","in","with","non-empty","cells\n","int","comparison","=","peekCellRef",".","compareTo","(","cellRef",")",";","if","(","comparison",">","0","&&","type","==","EmptyCellCommentsCheckType",".","END_OF_ROW","&&","peekCellRef",".","getRow","(",")","<=","rowNum",")","{","nextCommentCellRef","=","commentCellRefs",".","remove","(",")",";","outputEmptyCellComment","(","nextCommentCellRef",")",";","}","else","if","(","comparison","<","0","&&","type","==","EmptyCellCommentsCheckType",".","CELL","&&","peekCellRef",".","getRow","(",")","<=","rowNum",")","{","nextCommentCellRef","=","commentCellRefs",".","remove","(",")",";","outputEmptyCellComment","(","nextCommentCellRef",")",";","}","else","{","nextCommentCellRef","=","null",";","}","}","}","while","(","nextCommentCellRef","!=","null","&&","!commentCellRefs",".","isEmpty","(",")",")",";","}"],"docstring_tokens":["Do","a","check","for,","and","output,","comments","in","otherwise","empty","cells"],"prompt_tokens":[]}
{"code_tokens":["@Override\n","protected","EscherContainerRecord","createSpContainer","(","boolean","isChild",")","{","EscherContainerRecord","ecr","=","super",".","createSpContainer","(","isChild",")",";","ecr",".","setRecordId","(","EscherContainerRecord",".","SP_CONTAINER",")",";","\n\n","EscherSpRecord","sp","=","new","EscherSpRecord","(",")",";","int","flags","=","EscherSpRecord",".","FLAG_HAVEANCHOR","|","EscherSpRecord",".","FLAG_HASSHAPETYPE",";","if","(","isChild",")","{","flags","|=","EscherSpRecord",".","FLAG_CHILD",";","}","sp",".","setFlags","(","flags",")",";","ecr",".","addChildRecord","(","sp",")",";","\n\n","AbstractEscherOptRecord","opt","=","new","EscherOptRecord","(",")",";","opt",".","setRecordId","(","EscherOptRecord",".","RECORD_ID",")",";","ecr",".","addChildRecord","(","opt",")",";","\n\n","EscherRecord","anchor",";","if","(","isChild",")","{","anchor","=","new","EscherChildAnchorRecord","(",")",";","}","else","{","anchor","=","new","EscherClientAnchorRecord","(",")",";","\n\n","//hack",".","internal","variable","EscherClientAnchorRecord",".","shortRecord","can","be\n","//initialized","only","in","fillFields","(",")",".","We","need","to","set","shortRecord=false",";","byte[]","header","=","new","byte[16]",";","LittleEndian",".","putUShort","(","header,","0,","0",")",";","LittleEndian",".","putUShort","(","header,","2,","0",")",";","LittleEndian",".","putInt","(","header,","4,","8",")",";","anchor",".","fillFields","(","header,","0,","null",")",";","}","ecr",".","addChildRecord","(","anchor",")",";","\n\n","return","ecr",";"],"docstring_tokens":["Create","a","new","Shape"],"prompt_tokens":[]}
{"code_tokens":["public","void","setLineCompound","(","LineCompound","style",")","{","AbstractEscherOptRecord","opt","=","getEscherOptRecord","(",")",";","setEscherProperty","(","opt,","EscherPropertyTypes",".","LINESTYLE__LINESTYLE,","style","==","LineCompound",".","SINGLE","?","-1",":","style",".","nativeId",")",";"],"docstring_tokens":["Sets","the","line","compound","style"],"prompt_tokens":[]}
{"code_tokens":["\n\n","public","static","String","dump","(","final","byte","[]","data,","final","long","offset,","final","int","index",")","{","return","dump","(","data,","offset,","index,","Integer",".","MAX_VALUE",")",";"],"docstring_tokens":["dump","an","array","of","bytes","to","a","String"],"prompt_tokens":[]}
{"code_tokens":["public","short","getCrossingPoint","(",")","{","return","field_1_crossingPoint",";"],"docstring_tokens":["Get","the","crossing","point","field","for","the","CategorySeriesAxis","record"],"prompt_tokens":[]}
{"code_tokens":["public","void","setCrossingPoint","(","short","field_1_crossingPoint",")","{","this",".","field_1_crossingPoint","=","field_1_crossingPoint",";"],"docstring_tokens":["Set","the","crossing","point","field","for","the","CategorySeriesAxis","record"],"prompt_tokens":[]}
{"code_tokens":["public","short","getLabelFrequency","(",")","{","return","field_2_labelFrequency",";"],"docstring_tokens":["Get","the","label","frequency","field","for","the","CategorySeriesAxis","record"],"prompt_tokens":[]}
{"code_tokens":["public","void","setLabelFrequency","(","short","field_2_labelFrequency",")","{","this",".","field_2_labelFrequency","=","field_2_labelFrequency",";"],"docstring_tokens":["Set","the","label","frequency","field","for","the","CategorySeriesAxis","record"],"prompt_tokens":[]}
{"code_tokens":["public","short","getTickMarkFrequency","(",")","{","return","field_3_tickMarkFrequency",";"],"docstring_tokens":["Get","the","tick","mark","frequency","field","for","the","CategorySeriesAxis","record"],"prompt_tokens":[]}
{"code_tokens":["public","void","setTickMarkFrequency","(","short","field_3_tickMarkFrequency",")","{","this",".","field_3_tickMarkFrequency","=","field_3_tickMarkFrequency",";"],"docstring_tokens":["Set","the","tick","mark","frequency","field","for","the","CategorySeriesAxis","record"],"prompt_tokens":[]}
{"code_tokens":["public","short","getOptions","(",")","{","return","field_4_options",";"],"docstring_tokens":["Get","the","options","field","for","the","CategorySeriesAxis","record"],"prompt_tokens":[]}
{"code_tokens":["public","void","setOptions","(","short","field_4_options",")","{","this",".","field_4_options","=","field_4_options",";"],"docstring_tokens":["Set","the","options","field","for","the","CategorySeriesAxis","record"],"prompt_tokens":[]}
{"code_tokens":["public","boolean","isValueAxisCrossing","(",")","{","return","valueAxisCrossing",".","isSet","(","field_4_options",")",";"],"docstring_tokens":["set","true","to","indicate","axis","crosses","between","categories","and","false","to","cross","axis","midway"],"prompt_tokens":[]}
{"code_tokens":["public","boolean","isCrossesFarRight","(",")","{","return","crossesFarRight",".","isSet","(","field_4_options",")",";"],"docstring_tokens":["axis","crosses","at","the","far","right"],"prompt_tokens":[]}
{"code_tokens":["public","boolean","isReversed","(",")","{","return","reversed",".","isSet","(","field_4_options",")",";"],"docstring_tokens":["categories","are","displayed","in","reverse","order"],"prompt_tokens":[]}
{"code_tokens":["private","List<?","extends","DataValidation>","getValidations","(","Sheet","sheet",")","{","List<?","extends","DataValidation>","dvs","=","validations",".","get","(","sheet",".","getSheetName","(",")",")",";","if","(","dvs","==","null","&&","!validations",".","containsKey","(","sheet",".","getSheetName","(",")",")",")","{","dvs","=","sheet",".","getDataValidations","(",")",";","validations",".","put","(","sheet",".","getSheetName","(",")",",","dvs",")",";","}","return","dvs",";"],"docstring_tokens":["Lazy","load","validations","by","sheet,","since","reading","the","CT","types","is","expensive"],"prompt_tokens":[]}
{"code_tokens":["public","static","boolean","isType","(","Cell","cell,","CellType","type",")","{","final","CellType","cellType","=","cell",".","getCellType","(",")",";","return","cellType","==","type","||","(","cellType","==","CellType",".","FORMULA","&&","cell",".","getCachedFormulaResultType","(",")","==","type\n",")",";"],"docstring_tokens":["Note","that","this","assumes","the","cell","cached","value","is","up","to","date","and","in","sync","with","data","edits"],"prompt_tokens":[]}
{"code_tokens":["public","void","writeTo","(","ByteArrayOutputStream","tableStream",")","throws","IOException\n","{","SttbUtils",".","writeSttbfRMark","(","entries,","tableStream",")",";"],"docstring_tokens":["Writes","this","table","to","the","table","stream"],"prompt_tokens":[]}
{"code_tokens":["public","int","getNumPointersOffset","(","byte[]","data",")","{","switch","(","getType","(",")",")","{","case","0x1d:\n","case","0x4e:\n","return","30",";","case","0x1e:\n","return","54",";","case","0x14:\n","return","130",";","}","return","10",";"],"docstring_tokens":["Depends","on","the","type","only,","not","stored"],"prompt_tokens":[]}
{"code_tokens":["public","boolean","isShadow","(",")","{","return","_fShadow",".","getValue","(","_info2",")","!=","0",";"],"docstring_tokens":["When","true,","border","is","drawn","with","shadow","Must","be","false","when","BRC","is","a","substructure","of","the","TC"],"prompt_tokens":[]}
{"code_tokens":["public","List<EscherProperty>","createProperties","(","byte[]","data,","int","offset,","short","numProperties",")","{","List<EscherProperty>","results","=","new","ArrayList<>","(",")",";","\n\n","int","pos","=","offset",";","\n\n","for","(","int","i","=","0",";","i","<","numProperties",";","i++",")","{","final","short","propId","=","LittleEndian",".","getShort","(","data,","pos",")",";","final","int","propData","=","LittleEndian",".","getInt","(","data,","pos","+","2",")",";","final","boolean","isComplex","=","(","propId","&","EscherProperty",".","IS_COMPLEX",")","!=","0",";","\n\n","EscherPropertyTypes","propertyType","=","EscherPropertyTypes",".","forPropertyID","(","propId",")",";","\n\n","final","BiFunction<Short,Integer,EscherProperty>","con",";","switch","(","propertyType",".","holder",")","{","case","BOOLEAN:\n","con","=","EscherBoolProperty::new",";","break",";","case","RGB:\n","con","=","EscherRGBProperty::new",";","break",";","case","SHAPE_PATH:\n","con","=","EscherShapePathProperty::new",";","break",";","default:\n","if","(","isComplex",")","{","con","=","(","propertyType",".","holder","==","EscherPropertyTypesHolder",".","ARRAY",")","?","EscherArrayProperty::new\n",":","EscherComplexProperty::new",";","}","else","{","con","=","EscherSimpleProperty::new",";","}","break",";","}","\n\n","results",".","add","(","con",".","apply","(","propId,propData",")",")",";","pos","+=","6",";","}","\n\n","//","Get","complex","data\n","for","(","EscherProperty","p",":","results",")","{","if","(","p","instanceof","EscherArrayProperty",")","{","EscherArrayProperty","eap","=","(","EscherArrayProperty",")","p",";","pos","+=","eap",".","setArrayData","(","data,","pos",")",";","}","else","if","(","p","instanceof","EscherComplexProperty",")","{","EscherComplexProperty","ecp","=","(","EscherComplexProperty",")","p",";","int","cdLen","=","ecp",".","getComplexData","(",")",".","length",";","int","leftover","=","data",".","length","-","pos",";","if","(","leftover","<","cdLen",")","{","throw","new","IllegalStateException","(","\"Could","not","read","complex","escher","property,","length","was","\"","+\n","cdLen","+","\",","but","had","only","\"","+","leftover","+","\"","bytes","left\"",")",";","}","pos","+=","ecp",".","setComplexData","(","data,","pos",")",";","}","}","return","results",";"],"docstring_tokens":["Create","new","properties","from","a","byte","array"],"prompt_tokens":[]}
{"code_tokens":["@Override\n","public","SXSSFSheet","createSheet","(",")","{","return","createAndRegisterSXSSFSheet","(","_wb",".","createSheet","(",")",")",";"],"docstring_tokens":["Create","a","Sheet","for","this","Workbook,","adds","it","to","the","sheets","and","returns","the","high","level","representation"],"prompt_tokens":[]}
{"code_tokens":["@Override\n","@NotImplemented\n","public","Sheet","cloneSheet","(","int","sheetNum",")","{","throw","new","RuntimeException","(","\"Not","Implemented\"",")",";"],"docstring_tokens":["Not","implemented","for","SXSSFWorkbook","Create","a","Sheet","from","an","existing","sheet","in","the","Workbook"],"prompt_tokens":[]}
{"code_tokens":["@Override\n","public","int","getNumberOfSheets","(",")","{","return","_wb",".","getNumberOfSheets","(",")",";"],"docstring_tokens":["Get","the","number","of","spreadsheets","in","the","workbook"],"prompt_tokens":[]}
{"code_tokens":["@Override\n","public","void","write","(","OutputStream","stream",")","throws","IOException","{","flushSheets","(",")",";","\n\n","//Save","the","template\n","File","tmplFile","=","TempFile",".","createTempFile","(","\"poi-sxssf-template\",","\"",".","xlsx\"",")",";","boolean","deleted",";","try","{","try","(","FileOutputStream","os","=","new","FileOutputStream","(","tmplFile",")",")","{","_wb",".","write","(","os",")",";","}","\n\n","//Substitute","the","template","entries","with","the","generated","sheet","data","files\n","try","(","ZipSecureFile","zf","=","new","ZipSecureFile","(","tmplFile",")",";","ZipFileZipEntrySource","source","=","new","ZipFileZipEntrySource","(","zf",")",")","{","injectData","(","source,","stream",")",";","}","}","finally","{","deleted","=","tmplFile",".","delete","(",")",";","}","if","(","!deleted",")","{","throw","new","IOException","(","\"Could","not","delete","temporary","file","after","processing:","\"","+","tmplFile",")",";","}"],"docstring_tokens":["Write","out","this","workbook","to","an","OutputStream"],"prompt_tokens":[]}
{"code_tokens":["private","CellFormatResult","apply","(","Date","date,","double","numericValue",")","{","return","getApplicableFormatPart","(","numericValue",")",".","apply","(","date",")",";"],"docstring_tokens":["Returns","the","result","of","applying","the","format","to","the","given","date"],"prompt_tokens":[]}
{"code_tokens":["@Override\n","public","boolean","equals","(","Object","obj",")","{","if","(","this","==","obj",")","return","true",";","if","(","obj","instanceof","CellFormat",")","{","CellFormat","that","=","(","CellFormat",")","obj",";","return","format",".","equals","(","that",".","format",")",";","}","return","false",";"],"docstring_tokens":["Returns","true","if","the","other","object","is","a","CellFormat","object","with","the","same","format"],"prompt_tokens":[]}
{"code_tokens":["@Override\n","public","int","hashCode","(",")","{","return","format",".","hashCode","(",")",";"],"docstring_tokens":["Returns","a","hash","code","for","the","format"],"prompt_tokens":[]}
{"code_tokens":["@Override\n","public","List<IBodyElement>","getBodyElements","(",")","{","return","Collections",".","unmodifiableList","(","bodyElements",")",";"],"docstring_tokens":["returns","an","Iterator","with","paragraphs","and","tables"],"prompt_tokens":[]}
{"code_tokens":["public","XWPFParagraph","addParagraph","(",")","{","XWPFParagraph","p","=","new","XWPFParagraph","(","ctTc",".","addNewP","(",")",",","this",")",";","addParagraph","(","p",")",";","return","p",";"],"docstring_tokens":["Add","a","Paragraph","to","this","Table","Cell"],"prompt_tokens":[]}
{"code_tokens":["public","XWPFVertAlign","getVerticalAlignment","(",")","{","XWPFVertAlign","vAlign","=","null",";","CTTcPr","tcpr","=","ctTc",".","getTcPr","(",")",";","if","(","tcpr","!=","null",")","{","CTVerticalJc","va","=","tcpr",".","getVAlign","(",")",";","if","(","va","!=","null",")","{","vAlign","=","stVertAlignTypeMap",".","get","(","va",".","getVal","(",")",".","intValue","(",")",")",";","}","}","return","vAlign",";"],"docstring_tokens":["Get","the","vertical","alignment","of","the","cell"],"prompt_tokens":[]}
{"code_tokens":["public","void","setVerticalAlignment","(","XWPFVertAlign","vAlign",")","{","CTTcPr","tcpr","=","getTcPr","(",")",";","CTVerticalJc","va","=","tcpr",".","addNewVAlign","(",")",";","va",".","setVal","(","alignMap",".","get","(","vAlign",")",")",";"],"docstring_tokens":["Set","the","vertical","alignment","of","the","cell"],"prompt_tokens":[]}
{"code_tokens":["@Override\n","public","void","insertTable","(","int","pos,","XWPFTable","table",")","{","bodyElements",".","add","(","pos,","table",")",";","int","i","=","0",";","for","(","CTTbl","tbl",":","ctTc",".","getTblList","(",")",")","{","if","(","tbl","==","table",".","getCTTbl","(",")",")","{","break",";","}","i++",";","}","tables",".","add","(","i,","table",")",";"],"docstring_tokens":["inserts","an","existing","XWPFTable","to","the","arrays","bodyElements","and","tables"],"prompt_tokens":[]}
{"code_tokens":["public","void","removeTable","(","int","pos",")","{","XWPFTable","removedTable","=","tables",".","get","(","pos",")",";","tables",".","remove","(","pos",")",";","ctTc",".","removeTbl","(","pos",")",";","bodyElements",".","remove","(","removedTable",")",";"],"docstring_tokens":["removes","a","table","of","this","table","cell"],"prompt_tokens":[]}
{"code_tokens":["public","String","getTextRecursively","(",")","{","\n\n","StringBuilder","text","=","new","StringBuilder","(","64",")",";","for","(","int","i","=","0",";","i","<","bodyElements",".","size","(",")",";","i++",")","{","boolean","isLast","=","(","i","==","bodyElements",".","size","(",")","-","1",")",";","appendBodyElementText","(","text,","bodyElements",".","get","(","i",")",",","isLast",")",";","}","\n\n","return","text",".","toString","(",")",";"],"docstring_tokens":["extracts","all","text","recursively","through","embedded","tables","and","embedded","SDTs"],"prompt_tokens":[]}
{"code_tokens":["public","String","getEntryName","(",")","{","String","type","=","this",".","type",".","asFileEnding","(",")",";","\n\n","String","chunkId","=","Integer",".","toHexString","(","this",".","chunkId",")",";","while","(","chunkId",".","length","(",")","<","4",")","{","chunkId","=","\"0\"","+","chunkId",";","}","\n\n","return","this",".","namePrefix\n","+","chunkId",".","toUpperCase","(","Locale",".","ROOT",")","+","type",".","toUpperCase","(","Locale",".","ROOT",")",";"],"docstring_tokens":["Creates","a","string","to","use","to","identify","this","chunk","in","the","POI","file","system","object"],"prompt_tokens":[]}
{"code_tokens":["public","short","getX","(",")","{","return","field_1_x",";"],"docstring_tokens":["Get","the","x","field","for","the","Pane","record"],"prompt_tokens":[]}
{"code_tokens":["public","void","setX","(","short","field_1_x",")","{","this",".","field_1_x","=","field_1_x",";"],"docstring_tokens":["Set","the","x","field","for","the","Pane","record"],"prompt_tokens":[]}
{"code_tokens":["public","short","getY","(",")","{","return","field_2_y",";"],"docstring_tokens":["Get","the","y","field","for","the","Pane","record"],"prompt_tokens":[]}
{"code_tokens":["public","void","setY","(","short","field_2_y",")","{","this",".","field_2_y","=","field_2_y",";"],"docstring_tokens":["Set","the","y","field","for","the","Pane","record"],"prompt_tokens":[]}
{"code_tokens":["public","short","getTopRow","(",")","{","return","field_3_topRow",";"],"docstring_tokens":["Get","the","top","row","field","for","the","Pane","record"],"prompt_tokens":[]}
{"code_tokens":["public","void","setTopRow","(","short","field_3_topRow",")","{","this",".","field_3_topRow","=","field_3_topRow",";"],"docstring_tokens":["Set","the","top","row","field","for","the","Pane","record"],"prompt_tokens":[]}
{"code_tokens":["public","short","getLeftColumn","(",")","{","return","field_4_leftColumn",";"],"docstring_tokens":["Get","the","left","column","field","for","the","Pane","record"],"prompt_tokens":[]}
{"code_tokens":["public","void","setLeftColumn","(","short","field_4_leftColumn",")","{","this",".","field_4_leftColumn","=","field_4_leftColumn",";"],"docstring_tokens":["Set","the","left","column","field","for","the","Pane","record"],"prompt_tokens":[]}
{"code_tokens":["public","short","getActivePane","(",")","{","return","field_5_activePane",";"],"docstring_tokens":["Get","the","active","pane","field","for","the","Pane","record"],"prompt_tokens":[]}
{"code_tokens":["public","void","setActivePane","(","short","field_5_activePane",")","{","this",".","field_5_activePane","=","field_5_activePane",";"],"docstring_tokens":["Set","the","active","pane","field","for","the","Pane","record"],"prompt_tokens":[]}
{"code_tokens":["private","boolean","isRelationshipPartURI","(","URI","partUri",")","{","if","(","partUri","==","null",")","{","throw","new","IllegalArgumentException","(","\"partUri\"",")",";","}","\n\n","return","partUri",".","getPath","(",")",".","matches","(","\"^",".","*/\"","+","PackagingURIHelper",".","RELATIONSHIP_PART_SEGMENT_NAME","+","\"/",".","*\\\\\"\n","+","PackagingURIHelper",".","RELATIONSHIP_PART_EXTENSION_NAME\n","+","\"$\"",")",";"],"docstring_tokens":["Check","if","the","specified","part","name","is","a","relationship","part","name"],"prompt_tokens":[]}
{"code_tokens":["public","boolean","isRelationshipPartURI","(",")","{","return","this",".","isRelationship",";"],"docstring_tokens":["Know","if","this","part","name","is","a","relationship","part","name"],"prompt_tokens":[]}
{"code_tokens":["public","static","byte[]","getChecksum","(","byte[]","data",")","{","MessageDigest","md5","=","CryptoFunctions",".","getMessageDigest","(","HashAlgorithm",".","md5",")",";","md5",".","update","(","data",")",";","return","md5",".","digest","(",")",";"],"docstring_tokens":["Compute","16-byte","checksum","of","this","picture","using","MD5","algorithm"],"prompt_tokens":[]}
{"code_tokens":["public","void","write","(","OutputStream","out",")","throws","IOException","{","LittleEndian",".","putUShort","(","getSignature","(",")",",","out",")",";","\n\n","PictureType","pt","=","getType","(",")",";","LittleEndian",".","putUShort","(","pt",".","nativeId","+","EscherRecordTypes",".","BLIP_START",".","typeID,","out",")",";","\n\n","byte[]","rd","=","getRawData","(",")",";","LittleEndian",".","putInt","(","rd",".","length,","out",")",";","out",".","write","(","rd",")",";"],"docstring_tokens":["Write","this","picture","into","OutputStream"],"prompt_tokens":[]}
{"code_tokens":["@Deprecated\n","@Removal","(","version","=","\"5",".","3\"",")","public","static","HSLFPictureData","create","(","PictureType","type",")","{","LOGGER",".","atWarn","(",")",".","log","(","\"HSLFPictureData#create","(","PictureType",")","is","deprecated",".","Some","functionality","such","\"","+\n","\"as","updating","pictures","won't","work",".","\"",")",";","\n\n","//","This","record","code","is","a","stub",".","It","exists","only","for","API","compatibility",".","EscherContainerRecord","record","=","new","EscherContainerRecord","(",")",";","EscherBSERecord","bse","=","new","EscherBSERecord","(",")",";","return","new","HSLFSlideShowImpl",".","PictureFactory","(","record,","type,","new","byte[0],","0,","0",")",".","setRecord","(","bse",")",".","build","(",")",";"],"docstring_tokens":["Create","an","instance","of","HSLFPictureData","by","type"],"prompt_tokens":[]}
{"code_tokens":["public","void","setSignature","(","int","signature",")","{","switch","(","signature",")","{","case","0x7A80:\n","setUIDInstanceCount","(","1",")",";","break",";","case","0x7A90:\n","setUIDInstanceCount","(","2",")",";","break",";","default:\n","throw","new","IllegalArgumentException","(","signature+\"","is","not","a","valid","instance/signature","value","for","DIB\"",")",";","}"],"docstring_tokens":["Sets","the","DIB","signature","-","either","0x7A80","or","0x7A90"],"prompt_tokens":[]}
{"code_tokens":["public","byte[]","getRemainingData","(",")","{","return","remainingData",";"],"docstring_tokens":["Any","remaining","data","in","the","record"],"prompt_tokens":[]}
{"code_tokens":["protected","PackageRelationship","addPictureReference","(","int","pictureIndex",")","{","XSSFPictureData","data","=","getSheet","(",")",".","getWorkbook","(",")",".","getAllPictures","(",")",".","get","(","pictureIndex",")",";","XSSFPictureData","pic","=","new","XSSFPictureData","(","data",".","getPackagePart","(",")",")",";","RelationPart","rp","=","addRelation","(","null,","XSSFRelation",".","IMAGES,","pic",")",";","return","rp",".","getRelationship","(",")",";"],"docstring_tokens":["Add","the","indexed","picture","to","this","drawing","relations"],"prompt_tokens":[]}
{"code_tokens":["public","XSSFShapeGroup","createGroup","(","XSSFClientAnchor","anchor",")","{","CTTwoCellAnchor","ctAnchor","=","createTwoCellAnchor","(","anchor",")",";","CTGroupShape","ctGroup","=","ctAnchor",".","addNewGrpSp","(",")",";","ctGroup",".","set","(","XSSFShapeGroup",".","prototype","(",")",")",";","CTTransform2D","xfrm","=","createXfrm","(","anchor",")",";","CTGroupTransform2D","grpXfrm","=","ctGroup",".","getGrpSpPr","(",")",".","getXfrm","(",")",";","grpXfrm",".","setOff","(","xfrm",".","getOff","(",")",")",";","grpXfrm",".","setExt","(","xfrm",".","getExt","(",")",")",";","grpXfrm",".","setChExt","(","xfrm",".","getExt","(",")",")",";","\n\n","XSSFShapeGroup","shape","=","new","XSSFShapeGroup","(","this,","ctGroup",")",";","shape",".","anchor","=","anchor",";","return","shape",";"],"docstring_tokens":["Creates","a","simple","shape"],"prompt_tokens":[]}
{"code_tokens":["private","CTTwoCellAnchor","createTwoCellAnchor","(","XSSFClientAnchor","anchor",")","{","CTTwoCellAnchor","ctAnchor","=","drawing",".","addNewTwoCellAnchor","(",")",";","ctAnchor",".","setFrom","(","anchor",".","getFrom","(",")",")",";","ctAnchor",".","setTo","(","anchor",".","getTo","(",")",")",";","ctAnchor",".","addNewClientData","(",")",";","anchor",".","setTo","(","ctAnchor",".","getTo","(",")",")",";","anchor",".","setFrom","(","ctAnchor",".","getFrom","(",")",")",";","STEditAs",".","Enum","editAs",";","switch","(","anchor",".","getAnchorType","(",")",")","{","case","DONT_MOVE_AND_RESIZE:\n","editAs","=","STEditAs",".","ABSOLUTE",";","break",";","case","MOVE_AND_RESIZE:\n","editAs","=","STEditAs",".","TWO_CELL",";","break",";","case","MOVE_DONT_RESIZE:\n","editAs","=","STEditAs",".","ONE_CELL",";","break",";","default:\n","editAs","=","STEditAs",".","ONE_CELL",";","}","ctAnchor",".","setEditAs","(","editAs",")",";","return","ctAnchor",";"],"docstring_tokens":["Create","and","initialize","a","CTTwoCellAnchor","that","anchors","a","shape","against","top-left","and","bottom-right","cells"],"prompt_tokens":[]}
{"code_tokens":["public","void","markAsClaimed","(","Picture","picture",")","{","claimed",".","add","(","picture",")",";"],"docstring_tokens":["Mark","a","Picture","as","claimed"],"prompt_tokens":[]}
{"code_tokens":["protected","void","setIndex","(","int","index",")","{","if","(","_headerAtom","!=","null",")","{","_headerAtom",".","setIndex","(","index",")",";","}"],"docstring_tokens":["Sets","the","index","of","the","paragraph","in","the","SLWT","container"],"prompt_tokens":[]}
{"code_tokens":["public","boolean","isBullet","(",")","{","return","getFlag","(","ParagraphFlagsTextProp",".","BULLET_IDX",")",";"],"docstring_tokens":["Returns","whether","this","rich","text","run","has","bullets"],"prompt_tokens":[]}
{"code_tokens":["protected","static","void","fixLineEndings","(","List<HSLFTextParagraph>","paragraphs",")","{","HSLFTextRun","lastRun","=","null",";","for","(","HSLFTextParagraph","p",":","paragraphs",")","{","if","(","lastRun","!=","null","&&","!lastRun",".","getRawText","(",")",".","endsWith","(","\"\\r\"",")",")","{","lastRun",".","setText","(","lastRun",".","getRawText","(",")","+","\"\\r\"",")",";","}","List<HSLFTextRun>","ltr","=","p",".","getTextRuns","(",")",";","if","(","ltr",".","isEmpty","(",")",")","{","throw","new","HSLFException","(","\"paragraph","without","textruns","found\"",")",";","}","lastRun","=","ltr",".","get","(","ltr",".","size","(",")","-","1",")",";","assert","(","lastRun",".","getRawText","(",")","!=","null",")",";","}"],"docstring_tokens":["Check","and","add","linebreaks","to","text","runs","leading","other","paragraphs"],"prompt_tokens":[]}
{"code_tokens":["private","static","void","updateTextAtom","(","List<HSLFTextParagraph>","paragraphs",")","{","final","String","rawText","=","toInternalString","(","getRawText","(","paragraphs",")",")",";","\n\n","//","Will","it","fit","in","a","8","bit","atom?\n","boolean","isUnicode","=","StringUtil",".","hasMultibyte","(","rawText",")",";","//","isUnicode","=","true",";","\n\n","TextHeaderAtom","headerAtom","=","paragraphs",".","get","(","0",")",".","_headerAtom",";","TextBytesAtom","byteAtom","=","paragraphs",".","get","(","0",")",".","_byteAtom",";","TextCharsAtom","charAtom","=","paragraphs",".","get","(","0",")",".","_charAtom",";","StyleTextPropAtom","styleAtom","=","findStyleAtomPresent","(","headerAtom,","rawText",".","length","(",")",")",";","\n\n","//","Store","in","the","appropriate","record\n","Record","oldRecord","=","null,","newRecord",";","if","(","isUnicode",")","{","if","(","byteAtom","!=","null","||","charAtom","==","null",")","{","oldRecord","=","byteAtom",";","charAtom","=","new","TextCharsAtom","(",")",";","}","newRecord","=","charAtom",";","charAtom",".","setText","(","rawText",")",";","}","else","{","if","(","charAtom","!=","null","||","byteAtom","==","null",")","{","oldRecord","=","charAtom",";","byteAtom","=","new","TextBytesAtom","(",")",";","}","newRecord","=","byteAtom",";","byte[]","byteText","=","new","byte[rawText",".","length","(",")","]",";","StringUtil",".","putCompressedUnicode","(","rawText,","byteText,","0",")",";","byteAtom",".","setText","(","byteText",")",";","}","\n\n","RecordContainer","_txtbox","=","headerAtom",".","getParentRecord","(",")",";","Record[]","cr","=","_txtbox",".","getChildRecords","(",")",";","int","/*","headerIdx","=","-1,","*/","textIdx","=","-1,","styleIdx","=","-1",";","for","(","int","i","=","0",";","i","<","cr",".","length",";","i++",")","{","Record","r","=","cr[i]",";","if","(","r","==","headerAtom",")","{","//","headerIdx","=","i",";","}","else","if","(","r","==","oldRecord","||","r","==","newRecord",")","{","textIdx","=","i",";","}","else","if","(","r","==","styleAtom",")","{","styleIdx","=","i",";","}","}","\n\n","if","(","textIdx","==","-1",")","{","//","the","old","record","was","never","registered,","ignore","it\n","_txtbox",".","addChildAfter","(","newRecord,","headerAtom",")",";","//","textIdx","=","headerIdx","+","1",";","}","else","{","//","swap","not","appropriated","records","-","noop","if","unchanged\n","cr[textIdx]","=","newRecord",";","}","\n\n","if","(","styleIdx","==","-1",")","{","//","Add","the","new","StyleTextPropAtom","after","the","TextCharsAtom","/","TextBytesAtom\n","_txtbox",".","addChildAfter","(","styleAtom,","newRecord",")",";","}","\n\n","for","(","HSLFTextParagraph","p",":","paragraphs",")","{","if","(","newRecord","==","byteAtom",")","{","p",".","_byteAtom","=","byteAtom",";","p",".","_charAtom","=","null",";","}","else","{","p",".","_byteAtom","=","null",";","p",".","_charAtom","=","charAtom",";","}","}","\n\n"],"docstring_tokens":["Set","the","correct","text","atom","depending","on","the","multibyte","usage"],"prompt_tokens":[]}
{"code_tokens":["private","static","void","updateStyles","(","List<HSLFTextParagraph>","paragraphs",")","{","final","String","rawText","=","toInternalString","(","getRawText","(","paragraphs",")",")",";","TextHeaderAtom","headerAtom","=","paragraphs",".","get","(","0",")",".","_headerAtom",";","StyleTextPropAtom","styleAtom","=","findStyleAtomPresent","(","headerAtom,","rawText",".","length","(",")",")",";","\n\n","//","Update","the","text","length","for","its","Paragraph","and","Character","stylings\n","//","*","reset","the","length,","to","the","new","string's","length\n","//","*","add","on","+1","if","the","last","block\n\n","styleAtom",".","clearStyles","(",")",";","\n\n","TextPropCollection","lastPTPC","=","null,","lastRTPC","=","null,","ptpc","=","null,","rtpc","=","null",";","for","(","HSLFTextParagraph","para",":","paragraphs",")","{","ptpc","=","para",".","getParagraphStyle","(",")",";","ptpc",".","updateTextSize","(","0",")",";","if","(","!ptpc",".","equals","(","lastPTPC",")",")","{","lastPTPC","=","ptpc",".","copy","(",")",";","lastPTPC",".","updateTextSize","(","0",")",";","styleAtom",".","addParagraphTextPropCollection","(","lastPTPC",")",";","}","for","(","HSLFTextRun","tr",":","para",".","getTextRuns","(",")",")","{","rtpc","=","tr",".","getCharacterStyle","(",")",";","rtpc",".","updateTextSize","(","0",")",";","if","(","!rtpc",".","equals","(","lastRTPC",")",")","{","lastRTPC","=","rtpc",".","copy","(",")",";","lastRTPC",".","updateTextSize","(","0",")",";","styleAtom",".","addCharacterTextPropCollection","(","lastRTPC",")",";","}","int","len","=","tr",".","getLength","(",")",";","ptpc",".","updateTextSize","(","ptpc",".","getCharactersCovered","(",")","+","len",")",";","rtpc",".","updateTextSize","(","len",")",";","lastPTPC",".","updateTextSize","(","lastPTPC",".","getCharactersCovered","(",")","+","len",")",";","lastRTPC",".","updateTextSize","(","lastRTPC",".","getCharactersCovered","(",")","+","len",")",";","}","}","\n\n","if","(","lastPTPC","==","null","||","lastRTPC","==","null","||","ptpc","==","null","||","rtpc","==","null",")","{","//","NOSONAR\n","throw","new","HSLFException","(","\"Not","all","TextPropCollection","could","be","determined",".","\"",")",";","}","\n\n","ptpc",".","updateTextSize","(","ptpc",".","getCharactersCovered","(",")","+","1",")",";","rtpc",".","updateTextSize","(","rtpc",".","getCharactersCovered","(",")","+","1",")",";","lastPTPC",".","updateTextSize","(","lastPTPC",".","getCharactersCovered","(",")","+","1",")",";","lastRTPC",".","updateTextSize","(","lastRTPC",".","getCharactersCovered","(",")","+","1",")",";","\n\n","//","If","TextSpecInfoAtom","is","present,","we","must","update","the","text","size","in","it,\n","//","otherwise","the","ppt","will","be","corrupted\n","for","(","Record","r",":","paragraphs",".","get","(","0",")",".","getRecords","(",")",")","{","if","(","r","instanceof","TextSpecInfoAtom",")","{","(","(","TextSpecInfoAtom",")","r",")",".","setParentSize","(","rawText",".","length","(",")","+","1",")",";","break",";","}","}"],"docstring_tokens":["Update","paragraph","and","character","styles","-","merges","them","when","subsequential","styles","match"],"prompt_tokens":[]}
{"code_tokens":["private","static","void","refreshRecords","(","List<HSLFTextParagraph>","paragraphs",")","{","TextHeaderAtom","headerAtom","=","paragraphs",".","get","(","0",")",".","_headerAtom",";","RecordContainer","_txtbox","=","headerAtom",".","getParentRecord","(",")",";","if","(","_txtbox","instanceof","EscherTextboxWrapper",")","{","try","{","_txtbox",".","writeOut","(","null",")",";","}","catch","(","IOException","e",")","{","throw","new","HSLFException","(","\"failed","dummy","write\",","e",")",";","}","}"],"docstring_tokens":["Writes","the","textbox","records","back","to","the","document","record"],"prompt_tokens":[]}
{"code_tokens":["protected","static","HSLFTextRun","appendText","(","List<HSLFTextParagraph>","paragraphs,","String","text,","boolean","newParagraph",")","{","text","=","toInternalString","(","text",")",";","\n\n","//","check","paragraphs\n","assert","(","!paragraphs",".","isEmpty","(",")","&&","!paragraphs",".","get","(","0",")",".","getTextRuns","(",")",".","isEmpty","(",")",")",";","\n\n","HSLFTextParagraph","htp","=","paragraphs",".","get","(","paragraphs",".","size","(",")","-","1",")",";","HSLFTextRun","htr","=","htp",".","getTextRuns","(",")",".","get","(","htp",".","getTextRuns","(",")",".","size","(",")","-","1",")",";","\n\n","boolean","addParagraph","=","newParagraph",";","for","(","String","rawText",":","text",".","split","(","\"","(","?<=\\r",")","\"",")",")","{","//","special","case,","if","last","text","paragraph","or","run","is","empty,","we","will","reuse","it\n","boolean","lastRunEmpty","=","(","htr",".","getLength","(",")","==","0",")",";","boolean","lastParaEmpty","=","lastRunEmpty","&&","(","htp",".","getTextRuns","(",")",".","size","(",")","==","1",")",";","\n\n","if","(","addParagraph","&&","!lastParaEmpty",")","{","TextPropCollection","tpc","=","htp",".","getParagraphStyle","(",")",";","HSLFTextParagraph","prevHtp","=","htp",";","htp","=","new","HSLFTextParagraph","(","htp",".","_headerAtom,","htp",".","_byteAtom,","htp",".","_charAtom,","paragraphs",")",";","htp",".","setParagraphStyle","(","tpc",".","copy","(",")",")",";","htp",".","setParentShape","(","prevHtp",".","getParentShape","(",")",")",";","htp",".","setShapeId","(","prevHtp",".","getShapeId","(",")",")",";","htp",".","supplySheet","(","prevHtp",".","getSheet","(",")",")",";","paragraphs",".","add","(","htp",")",";","}","addParagraph","=","true",";","\n\n","if","(","!lastRunEmpty",")","{","TextPropCollection","tpc","=","htr",".","getCharacterStyle","(",")",";","htr","=","new","HSLFTextRun","(","htp",")",";","htr",".","setCharacterStyle","(","tpc",".","copy","(",")",")",";","htp",".","addTextRun","(","htr",")",";","}","htr",".","setText","(","rawText",")",";","}","\n\n","storeText","(","paragraphs",")",";","\n\n","return","htr",";"],"docstring_tokens":["Adds","the","supplied","text","onto","the","end","of","the","TextParagraphs,","creating","a","new","RichTextRun","for","it","to","sit","in"],"prompt_tokens":[]}
{"code_tokens":["public","void","read","(","final","POIFSFileSystem","poifs",")","throws","IOException","{","registryClosed","=","true",";","\n\n","//","get","property","table","from","the","document\n","PropertyTable","properties","=","poifs",".","getPropertyTable","(",")",";","\n\n","//","process","documents\n","RootProperty","root","=","properties",".","getRoot","(",")",";","processProperties","(","poifs,","root,","new","POIFSDocumentPath","(",")",")",";"],"docstring_tokens":["Read","from","a","POIFSFileSystem","and","process","the","documents","we","get"],"prompt_tokens":[]}
{"code_tokens":["public","static","void","setPassword","(","XmlObject","xobj,","String","password,","HashAlgorithm","hashAlgo,","String","prefix",")","{","XmlCursor","cur","=","xobj",".","newCursor","(",")",";","try","{","if","(","password","==","null",")","{","cur",".","removeAttribute","(","getAttrName","(","prefix,","\"password\"",")",")",";","cur",".","removeAttribute","(","getAttrName","(","prefix,","\"algorithmName\"",")",")",";","cur",".","removeAttribute","(","getAttrName","(","prefix,","\"hashValue\"",")",")",";","cur",".","removeAttribute","(","getAttrName","(","prefix,","\"saltValue\"",")",")",";","cur",".","removeAttribute","(","getAttrName","(","prefix,","\"spinCount\"",")",")",";","return",";","}","\n\n","cur",".","toFirstContentToken","(",")",";","if","(","hashAlgo","==","null",")","{","int","hash","=","CryptoFunctions",".","createXorVerifier1","(","password",")",";","cur",".","insertAttributeWithValue","(","getAttrName","(","prefix,","\"password\"",")",",\n","String",".","format","(","Locale",".","ROOT,","\"%04X\",","hash",")",".","toUpperCase","(","Locale",".","ROOT",")",")",";","}","else","{","byte[]","salt","=","RandomSingleton",".","getInstance","(",")",".","generateSeed","(","16",")",";","\n\n","//","Iterations","specifies","the","number","of","times","the","hashing","function","shall","be","iteratively","run","(","using","each\n","//","iteration's","result","as","the","input","for","the","next","iteration",")",".","int","spinCount","=","100000",";","\n\n","//","Implementation","Notes","List:\n","//","-->","In","this","third","stage,","the","reversed","byte","order","legacy","hash","from","the","second","stage","shall\n","//","be","converted","to","Unicode","hex","string","representation\n","byte[]","hash","=","CryptoFunctions",".","hashPassword","(","password,","hashAlgo,","salt,","spinCount,","false",")",";","\n\n","Base64",".","Encoder","enc64","=","Base64",".","getEncoder","(",")",";","\n\n","cur",".","insertAttributeWithValue","(","getAttrName","(","prefix,","\"algorithmName\"",")",",","hashAlgo",".","jceId",")",";","cur",".","insertAttributeWithValue","(","getAttrName","(","prefix,","\"hashValue\"",")",",","enc64",".","encodeToString","(","hash",")",")",";","cur",".","insertAttributeWithValue","(","getAttrName","(","prefix,","\"saltValue\"",")",",","enc64",".","encodeToString","(","salt",")",")",";","cur",".","insertAttributeWithValue","(","getAttrName","(","prefix,","\"spinCount\"",")",",","\"\"+spinCount",")",";","}","}","finally","{","cur",".","dispose","(",")",";","}"],"docstring_tokens":["Sets","the","XORed","or","hashed","password"],"prompt_tokens":[]}
{"code_tokens":["public","HSLFFontInfo","getFontInfo","(","int","index",")","{","for","(","HSLFFontInfo","fi",":","fonts",".","values","(",")",")","{","if","(","fi",".","getIndex","(",")","==","index",")","{","return","fi",";","}","}","return","null",";"],"docstring_tokens":["Lookup","a","FontInfo","object","by","its","internal","font","index"],"prompt_tokens":[]}
{"code_tokens":["public","static","double","getColumnWidth","(","Sheet","sheet,","int","column,","boolean","useMergedCells,","int","firstRow,","int","lastRow",")","{","DataFormatter","formatter","=","new","DataFormatter","(",")",";","int","defaultCharWidth","=","getDefaultCharWidth","(","sheet",".","getWorkbook","(",")",")",";","\n\n","List<CellRangeAddress>","mergedRegions","=","sheet",".","getMergedRegions","(",")",";","double","width","=","-1",";","for","(","int","rowIdx","=","firstRow",";","rowIdx","<=","lastRow",";","++rowIdx",")","{","Row","row","=","sheet",".","getRow","(","rowIdx",")",";","if","(","row","!=","null",")","{","double","cellWidth","=","getColumnWidthForRow","(","row,","column,","defaultCharWidth,","formatter,","useMergedCells,","mergedRegions",")",";","width","=","Math",".","max","(","width,","cellWidth",")",";","}","}","return","width",";"],"docstring_tokens":["Compute","width","of","a","column","based","on","a","subset","of","the","rows","and","return","the","result"],"prompt_tokens":[]}
{"code_tokens":["private","static","void","copyAttributes","(","Font","font,","AttributedString","str,","@SuppressWarnings","(","\"SameParameterValue\"",")","int","startIdx,","int","endIdx",")","{","str",".","addAttribute","(","TextAttribute",".","FAMILY,","font",".","getFontName","(",")",",","startIdx,","endIdx",")",";","str",".","addAttribute","(","TextAttribute",".","SIZE,","(","float",")","font",".","getFontHeightInPoints","(",")",")",";","if","(","font",".","getBold","(",")",")","str",".","addAttribute","(","TextAttribute",".","WEIGHT,","TextAttribute",".","WEIGHT_BOLD,","startIdx,","endIdx",")",";","if","(","font",".","getItalic","(",")",")","str",".","addAttribute","(","TextAttribute",".","POSTURE,","TextAttribute",".","POSTURE_OBLIQUE,","startIdx,","endIdx",")",";","if","(","font",".","getUnderline","(",")","==","Font",".","U_SINGLE",")","str",".","addAttribute","(","TextAttribute",".","UNDERLINE,","TextAttribute",".","UNDERLINE_ON,","startIdx,","endIdx",")",";"],"docstring_tokens":["Copy","text","attributes","from","the","supplied","Font","to","Java2D","AttributedString"],"prompt_tokens":[]}
{"code_tokens":["public","boolean","isFResultDirty","(",")","{","return","fResultDirty",".","isSet","(","field_2_flt",")",";","\n\n"],"docstring_tokens":["==1","when","user","has","edited","or","formatted","the","result"],"prompt_tokens":[]}
{"code_tokens":["public","boolean","isFResultEdited","(",")","{","return","fResultEdited",".","isSet","(","field_2_flt",")",";","\n\n"],"docstring_tokens":["==1","when","user","has","inserted","text","into","or","deleted","text","from","the","result"],"prompt_tokens":[]}
{"code_tokens":["@Override\n","public","void","applyTransform","(","Graphics2D","graphics",")","{","if","(","!","(","shape","instanceof","PlaceableShape",")","||","graphics","==","null",")","{","return",";","}","\n\n","final","Rectangle2D","anchor","=","getAnchor","(","graphics,","(","PlaceableShape<?,?>",")","shape",")",";","if","(","anchor","==","null",")","{","return",";","}","\n\n","if","(","isHSLF","(","shape",")",")","{","flipHorizontal","(","graphics,","anchor",")",";","flipVertical","(","graphics,","anchor",")",";","rotate","(","graphics,","anchor",")",";","}","else","{","rotate","(","graphics,","anchor",")",";","flipHorizontal","(","graphics,","anchor",")",";","flipVertical","(","graphics,","anchor",")",";","}"],"docstring_tokens":["Apply","2-D","transforms","before","drawing","this","shape"],"prompt_tokens":[]}
{"code_tokens":["@Internal\n","public","int","getInfo3","(",")","{","return","field_3_info3",";"],"docstring_tokens":["Get","the","info3","field","for","the","Stshif","record"],"prompt_tokens":[]}
{"code_tokens":["@Internal\n","public","void","setInfo3","(","int","field_3_info3",")","{","this",".","field_3_info3","=","field_3_info3",";"],"docstring_tokens":["Set","the","info3","field","for","the","Stshif","record"],"prompt_tokens":[]}
{"code_tokens":["@Internal\n","public","short","getFReserved","(",")","{","return","(","short",")","fReserved",".","getValue","(","field_3_info3",")",";"],"docstring_tokens":["This","value","MUST","be","zero","and","MUST","be","ignored"],"prompt_tokens":[]}
{"code_tokens":["/*package*/","int","getCellIndex","(","SXSSFCell","cell",")","{","for","(","Entry<Integer,","SXSSFCell>","entry",":","_cells",".","entrySet","(",")",")","{","if","(","entry",".","getValue","(",")","==cell",")","{","return","entry",".","getKey","(",")",";","}","}","return","-1",";"],"docstring_tokens":["Return","the","column","number","of","a","cell","if","it","is","in","this","row","Otherwise","return","-1"],"prompt_tokens":[]}
{"code_tokens":["@Override\n","public","SXSSFSheet","getSheet","(",")","{","return","_sheet",";"],"docstring_tokens":["Returns","the","Sheet","this","row","belongs","to"],"prompt_tokens":[]}
{"code_tokens":["@Override\n","protected","EscherContainerRecord","createSpContainer","(","boolean","isChild",")","{","EscherContainerRecord","ecr","=","super",".","createSpContainer","(","isChild",")",";","ecr",".","setRecordId","(","EscherContainerRecord",".","SPGR_CONTAINER",")",";","\n\n","//The","group","itself","is","a","shape,","and","always","appears","as","the","first","EscherSpContainer","in","the","group","container",".","EscherContainerRecord","spcont","=","new","EscherContainerRecord","(",")",";","spcont",".","setRecordId","(","EscherContainerRecord",".","SP_CONTAINER",")",";","spcont",".","setOptions","(","(","short",")","15",")",";","\n\n","EscherSpgrRecord","spg","=","new","EscherSpgrRecord","(",")",";","spg",".","setOptions","(","(","short",")","1",")",";","spcont",".","addChildRecord","(","spg",")",";","\n\n","EscherSpRecord","sp","=","new","EscherSpRecord","(",")",";","short","type","=","(","short",")","(","(","ShapeType",".","NOT_PRIMITIVE",".","nativeId","<<","4",")","+","2",")",";","sp",".","setOptions","(","type",")",";","sp",".","setFlags","(","EscherSpRecord",".","FLAG_HAVEANCHOR","|","EscherSpRecord",".","FLAG_GROUP",")",";","spcont",".","addChildRecord","(","sp",")",";","\n\n","EscherClientAnchorRecord","anchor","=","new","EscherClientAnchorRecord","(",")",";","spcont",".","addChildRecord","(","anchor",")",";","\n\n","ecr",".","addChildRecord","(","spcont",")",";","return","ecr",";"],"docstring_tokens":["Create","a","new","ShapeGroup","and","create","an","instance","of","EscherSpgrContainer","which","represents","a","group","of","shapes"],"prompt_tokens":[]}
{"code_tokens":["@Override\n","public","void","addShape","(","HSLFShape","shape",")","{","getSpContainer","(",")",".","addChildRecord","(","shape",".","getSpContainer","(",")",")",";","\n\n","HSLFSheet","sheet","=","getSheet","(",")",";","shape",".","setSheet","(","sheet",")",";","shape",".","setShapeId","(","sheet",".","allocateShapeId","(",")",")",";","shape",".","afterInsert","(","sheet",")",";"],"docstring_tokens":["Add","a","shape","to","this","group"],"prompt_tokens":[]}
{"code_tokens":["protected","void","moveAndScale","(","Rectangle2D","anchorDest",")","{","Rectangle2D","anchorSrc","=","getAnchor","(",")",";","double","scaleX","=","(","anchorSrc",".","getWidth","(",")","==","0",")","?","0",":","anchorDest",".","getWidth","(",")","/","anchorSrc",".","getWidth","(",")",";","double","scaleY","=","(","anchorSrc",".","getHeight","(",")","==","0",")","?","0",":","anchorDest",".","getHeight","(",")","/","anchorSrc",".","getHeight","(",")",";","\n\n","setExteriorAnchor","(","anchorDest",")",";","for","(","HSLFShape","shape",":","getShapes","(",")",")","{","Rectangle2D","chanchor","=","shape",".","getAnchor","(",")",";","double","x","=","anchorDest",".","getX","(",")","+","(","chanchor",".","getX","(",")","-anchorSrc",".","getX","(",")",")","*scaleX",";","double","y","=","anchorDest",".","getY","(",")","+","(","chanchor",".","getY","(",")","-anchorSrc",".","getY","(",")",")","*scaleY",";","double","width","=","chanchor",".","getWidth","(",")","*scaleX",";","double","height","=","chanchor",".","getHeight","(",")","*scaleY",";","shape",".","setAnchor","(","new","Rectangle2D",".","Double","(","x,","y,","width,","height",")",")",";","}"],"docstring_tokens":["Moves","and","scales","this","ShapeGroup","to","the","specified","anchor"],"prompt_tokens":[]}
{"code_tokens":["@Override\n","protected","void","afterInsert","(","HSLFSheet","sh",")","{","super",".","afterInsert","(","sh",")",";","\n\n","storeText","(",")",";","\n\n","EscherTextboxWrapper","thisTxtbox","=","getEscherTextboxWrapper","(",")",";","if","(","thisTxtbox","!=","null",")","{","getSpContainer","(",")",".","addChildRecord","(","thisTxtbox",".","getEscherRecord","(",")",")",";","\n\n","PPDrawing","ppdrawing","=","sh",".","getPPDrawing","(",")",";","ppdrawing",".","addTextboxWrapper","(","thisTxtbox",")",";","//","Ensure","the","escher","layer","knows","about","the","added","records\n","try","{","thisTxtbox",".","writeOut","(","null",")",";","}","catch","(","IOException","e",")","{","throw","new","HSLFException","(","e",")",";","}","boolean","isInitialAnchor","=","getAnchor","(",")",".","equals","(","new","Rectangle2D",".","Double","(",")",")",";","boolean","isFilledTxt","=","!\"\"",".","equals","(","getText","(",")",")",";","if","(","isInitialAnchor","&&","isFilledTxt",")","{","resizeToFitText","(",")",";","}","}","for","(","HSLFTextParagraph","htp",":","_paragraphs",")","{","htp",".","setShapeId","(","getShapeId","(",")",")",";","}","sh",".","onAddTextShape","(","this",")",";"],"docstring_tokens":["When","a","textbox","is","added","to","a","sheet","we","need","to","tell","upper-level","PPDrawing","about","it"],"prompt_tokens":[]}
{"code_tokens":["public","int","getRunType","(",")","{","getEscherTextboxWrapper","(",")",";","if","(","_txtbox","==","null",")","{","return","-1",";","}","List<HSLFTextParagraph>","paras","=","HSLFTextParagraph",".","findTextParagraphs","(","_txtbox,","getSheet","(",")",")",";","return","(","paras",".","isEmpty","(",")","||","paras",".","get","(","0",")",".","getIndex","(",")","==","-1",")","?","-1",":","paras",".","get","(","0",")",".","getRunType","(",")",";"],"docstring_tokens":["Returns","the","type","of","the","text,","from","the","TextHeaderAtom"],"prompt_tokens":[]}
{"code_tokens":["public","void","setRunType","(","int","type",")","{","getEscherTextboxWrapper","(",")",";","if","(","_txtbox","==","null",")","{","return",";","}","List<HSLFTextParagraph>","paras","=","HSLFTextParagraph",".","findTextParagraphs","(","_txtbox,","getSheet","(",")",")",";","if","(","!paras",".","isEmpty","(",")",")","{","paras",".","get","(","0",")",".","setRunType","(","type",")",";","}"],"docstring_tokens":["Changes","the","type","of","the","text"],"prompt_tokens":[]}
{"code_tokens":["/*","package","*/","HSLFTextAnchor","getAlignment","(",")","{","AbstractEscherOptRecord","opt","=","getEscherOptRecord","(",")",";","EscherSimpleProperty","prop","=","getEscherProperty","(","opt,","EscherPropertyTypes",".","TEXT__ANCHORTEXT",")",";","final","HSLFTextAnchor","align",";","if","(","prop","==","null",")","{","/**\n","*","If","vertical","alignment","was","not","found","in","the","shape","properties","then","try","to\n","*","fetch","the","master","shape","and","search","for","the","align","property","there",".","*/\n","int","type","=","getRunType","(",")",";","HSLFSheet","sh","=","getSheet","(",")",";","HSLFMasterSheet","master","=","(","sh","!=","null",")","?","sh",".","getMasterSheet","(",")",":","null",";","HSLFTextShape","masterShape","=","(","master","!=","null",")","?","master",".","getPlaceholderByTextType","(","type",")",":","null",";","if","(","masterShape","!=","null","&&","type","!=","TextPlaceholder",".","OTHER",".","nativeId",")","{","align","=","masterShape",".","getAlignment","(",")",";","}","else","{","//not","found","in","the","master","sheet",".","Use","the","hardcoded","defaults",".","align","=","(","TextPlaceholder",".","isTitle","(","type",")",")","?","HSLFTextAnchor",".","MIDDLE",":","HSLFTextAnchor",".","TOP",";","}","}","else","{","align","=","HSLFTextAnchor",".","fromNativeId","(","prop",".","getPropertyValue","(",")",")",";","}","\n\n","return","(","align","==","null",")","?","HSLFTextAnchor",".","TOP",":","align",";"],"docstring_tokens":["Returns","the","type","of","vertical","alignment","for","the","text"],"prompt_tokens":[]}
{"code_tokens":["public","int","getWordWrapEx","(",")","{","AbstractEscherOptRecord","opt","=","getEscherOptRecord","(",")",";","EscherSimpleProperty","prop","=","getEscherProperty","(","opt,","EscherPropertyTypes",".","TEXT__WRAPTEXT",")",";","return","prop","==","null","?","WrapSquare",":","prop",".","getPropertyValue","(",")",";"],"docstring_tokens":["Returns","the","value","indicating","word","wrap"],"prompt_tokens":[]}
{"code_tokens":["protected","void","copyBlockHeaderToContents","(",")","{","if","(","blockHeaderInContents",")","return",";","\n\n","prependContentsWith","(","blockHeader",")",";","blockHeaderInContents","=","true",";"],"docstring_tokens":["Some","kinds","of","streams","expect","their","4","byte","header","to","be","on","the","front","of","the","contents"],"prompt_tokens":[]}
{"code_tokens":["public","void","setPoints","(","float[]","xPoints,","float[]","yPoints",")","{","float","right","=","findBiggest","(","xPoints",")",";","float","bottom","=","findBiggest","(","yPoints",")",";","float","left","=","findSmallest","(","xPoints",")",";","float","top","=","findSmallest","(","yPoints",")",";","\n\n","AbstractEscherOptRecord","opt","=","getEscherOptRecord","(",")",";","opt",".","addEscherProperty","(","new","EscherSimpleProperty","(","EscherPropertyTypes",".","GEOMETRY__RIGHT,","Units",".","pointsToMaster","(","right","-","left",")",")",")",";","opt",".","addEscherProperty","(","new","EscherSimpleProperty","(","EscherPropertyTypes",".","GEOMETRY__BOTTOM,","Units",".","pointsToMaster","(","bottom","-","top",")",")",")",";","\n\n","for","(","int","i","=","0",";","i","<","xPoints",".","length",";","i++",")","{","xPoints[i]","+=","-left",";","yPoints[i]","+=","-top",";","}","\n\n","int","numpoints","=","xPoints",".","length",";","\n\n","EscherArrayProperty","verticesProp","=","new","EscherArrayProperty","(","EscherPropertyTypes",".","GEOMETRY__VERTICES,","false,","0",")",";","verticesProp",".","setNumberOfElementsInArray","(","numpoints+1",")",";","verticesProp",".","setNumberOfElementsInMemory","(","numpoints+1",")",";","verticesProp",".","setSizeOfElements","(","0xFFF0",")",";","for","(","int","i","=","0",";","i","<","numpoints",";","i++",")","{","byte[]","data","=","new","byte[4]",";","LittleEndian",".","putShort","(","data,","0,","(","short",")","Units",".","pointsToMaster","(","xPoints[i]",")",")",";","LittleEndian",".","putShort","(","data,","2,","(","short",")","Units",".","pointsToMaster","(","yPoints[i]",")",")",";","verticesProp",".","setElement","(","i,","data",")",";","}","byte[]","data","=","new","byte[4]",";","LittleEndian",".","putShort","(","data,","0,","(","short",")","Units",".","pointsToMaster","(","xPoints[0]",")",")",";","LittleEndian",".","putShort","(","data,","2,","(","short",")","Units",".","pointsToMaster","(","yPoints[0]",")",")",";","verticesProp",".","setElement","(","numpoints,","data",")",";","opt",".","addEscherProperty","(","verticesProp",")",";","\n\n","EscherArrayProperty","segmentsProp","=","new","EscherArrayProperty","(","EscherPropertyTypes",".","GEOMETRY__SEGMENTINFO,","false,","0",")",";","segmentsProp",".","setSizeOfElements","(","0x0002",")",";","segmentsProp",".","setNumberOfElementsInArray","(","numpoints","*","2","+","4",")",";","segmentsProp",".","setNumberOfElementsInMemory","(","numpoints","*","2","+","4",")",";","segmentsProp",".","setElement","(","0,","new","byte[]","{","(","byte",")","0x00,","(","byte",")","0x40","}",")",";","segmentsProp",".","setElement","(","1,","new","byte[]","{","(","byte",")","0x00,","(","byte",")","0xAC","}",")",";","for","(","int","i","=","0",";","i","<","numpoints",";","i++",")","{","segmentsProp",".","setElement","(","2","+","i","*","2,","new","byte[]","{","(","byte",")","0x01,","(","byte",")","0x00","}",")",";","segmentsProp",".","setElement","(","3","+","i","*","2,","new","byte[]","{","(","byte",")","0x00,","(","byte",")","0xAC","}",")",";","}","segmentsProp",".","setElement","(","segmentsProp",".","getNumberOfElementsInArray","(",")","-","2,","new","byte[]","{","(","byte",")","0x01,","(","byte",")","0x60","}",")",";","segmentsProp",".","setElement","(","segmentsProp",".","getNumberOfElementsInArray","(",")","-","1,","new","byte[]","{","(","byte",")","0x00,","(","byte",")","0x80","}",")",";","opt",".","addEscherProperty","(","segmentsProp",")",";","\n\n","opt",".","sortProperties","(",")",";"],"docstring_tokens":["Set","the","polygon","vertices"],"prompt_tokens":[]}
{"code_tokens":["public","STPatternType",".","Enum","getPatternType","(",")","{","CTPatternFill","ptrn","=","_fill",".","getPatternFill","(",")",";","return","ptrn","==","null","?","null",":","ptrn",".","getPatternType","(",")",";"],"docstring_tokens":["get","the","fill","pattern"],"prompt_tokens":[]}
{"code_tokens":["public","void","setPatternType","(","STPatternType",".","Enum","patternType",")","{","CTPatternFill","ptrn","=","ensureCTPatternFill","(",")",";","ptrn",".","setPatternType","(","patternType",")",";"],"docstring_tokens":["set","the","fill","pattern"],"prompt_tokens":[]}
{"code_tokens":["public","void","reset","(","int","size",")","{","TextSpecInfoRun","sir","=","new","TextSpecInfoRun","(","size",")",";","UnsynchronizedByteArrayOutputStream","bos","=","new","UnsynchronizedByteArrayOutputStream","(",")",";","try","{","sir",".","writeOut","(","bos",")",";","}","catch","(","IOException","e",")","{","throw","new","HSLFException","(","e",")",";","}","_data","=","bos",".","toByteArray","(",")",";","\n\n","//","Update","the","size","(","header","bytes","5-8",")","LittleEndian",".","putInt","(","_header,","4,","_data",".","length",")",";"],"docstring_tokens":["Reset","the","content","to","one","info","run","with","the","default","values"],"prompt_tokens":[]}
{"code_tokens":["public","void","setParentSize","(","int","size",")","{","assert","(","size",">","0",")",";","\n\n","try","(","UnsynchronizedByteArrayOutputStream","bos","=","new","UnsynchronizedByteArrayOutputStream","(",")",")","{","TextSpecInfoRun[]","runs","=","getTextSpecInfoRuns","(",")",";","int","remaining","=","size",";","int","idx","=","0",";","for","(","TextSpecInfoRun","run",":","runs",")","{","int","len","=","run",".","getLength","(",")",";","if","(","len",">","remaining","||","idx","==","runs",".","length","-","1",")","{","run",".","setLength","(","len","=","remaining",")",";","}","remaining","-=","len",";","run",".","writeOut","(","bos",")",";","idx++",";","}","\n\n","_data","=","bos",".","toByteArray","(",")",";","\n\n","//","Update","the","size","(","header","bytes","5-8",")","LittleEndian",".","putInt","(","_header,","4,","_data",".","length",")",";","}","catch","(","IOException","e",")","{","throw","new","HSLFException","(","e",")",";","}"],"docstring_tokens":["Adapts","the","size","by","enlarging","the","last","TextSpecInfoRun","or","chopping","the","runs","to","the","given","length"],"prompt_tokens":[]}
{"code_tokens":["\n\n","@Override\n","public","void","processPOIFSReaderEvent","(","POIFSReaderEvent","event",")","{"],"docstring_tokens":["Process","a","POIFSReaderEvent","that","this","listener","had","registered","for"],"prompt_tokens":[]}
{"code_tokens":["@SuppressWarnings","(","\"resource\"",")","public","String","getCorePropertiesText","(",")","{","POIXMLDocument","document","=","getDocument","(",")",";","if","(","document","==","null",")","{","//","event","based","extractor","does","not","have","a","document\n","return","\"\"",";","}","\n\n","StringBuilder","text","=","new","StringBuilder","(","64",")",";","PackagePropertiesPart","props","=\n","document",".","getProperties","(",")",".","getCoreProperties","(",")",".","getUnderlyingProperties","(",")",";","\n\n","appendIfPresent","(","text,","\"Category\",","props",".","getCategoryProperty","(",")",")",";","appendIfPresent","(","text,","\"ContentStatus\",","props",".","getContentStatusProperty","(",")",")",";","appendIfPresent","(","text,","\"ContentType\",","props",".","getContentTypeProperty","(",")",")",";","appendDateIfPresent","(","text,","\"Created\",","props",".","getCreatedProperty","(",")",")",";","appendIfPresent","(","text,","\"CreatedString\",","props",".","getCreatedPropertyString","(",")",")",";","appendIfPresent","(","text,","\"Creator\",","props",".","getCreatorProperty","(",")",")",";","appendIfPresent","(","text,","\"Description\",","props",".","getDescriptionProperty","(",")",")",";","appendIfPresent","(","text,","\"Identifier\",","props",".","getIdentifierProperty","(",")",")",";","appendIfPresent","(","text,","\"Keywords\",","props",".","getKeywordsProperty","(",")",")",";","appendIfPresent","(","text,","\"Language\",","props",".","getLanguageProperty","(",")",")",";","appendIfPresent","(","text,","\"LastModifiedBy\",","props",".","getLastModifiedByProperty","(",")",")",";","appendDateIfPresent","(","text,","\"LastPrinted\",","props",".","getLastPrintedProperty","(",")",")",";","appendIfPresent","(","text,","\"LastPrintedString\",","props",".","getLastPrintedPropertyString","(",")",")",";","appendDateIfPresent","(","text,","\"Modified\",","props",".","getModifiedProperty","(",")",")",";","appendIfPresent","(","text,","\"ModifiedString\",","props",".","getModifiedPropertyString","(",")",")",";","appendIfPresent","(","text,","\"Revision\",","props",".","getRevisionProperty","(",")",")",";","appendIfPresent","(","text,","\"Subject\",","props",".","getSubjectProperty","(",")",")",";","appendIfPresent","(","text,","\"Title\",","props",".","getTitleProperty","(",")",")",";","appendIfPresent","(","text,","\"Version\",","props",".","getVersionProperty","(",")",")",";","\n\n","return","text",".","toString","(",")",";"],"docstring_tokens":["Returns","the","core","document","properties,","eg","author"],"prompt_tokens":[]}
{"code_tokens":["@SuppressWarnings","(","\"resource\"",")","public","String","getExtendedPropertiesText","(",")","{","POIXMLDocument","document","=","getDocument","(",")",";","if","(","document","==","null",")","{","//","event","based","extractor","does","not","have","a","document\n","return","\"\"",";","}","\n\n","StringBuilder","text","=","new","StringBuilder","(","64",")",";","org",".","openxmlformats",".","schemas",".","officeDocument",".","x2006",".","extendedProperties",".","CTProperties\n","props","=","document",".","getProperties","(",")",".","getExtendedProperties","(",")",".","getUnderlyingProperties","(",")",";","\n\n","appendIfPresent","(","text,","\"Application\",","props",".","getApplication","(",")",")",";","appendIfPresent","(","text,","\"AppVersion\",","props",".","getAppVersion","(",")",")",";","appendIfPresent","(","text,","\"Characters\",","props",".","getCharacters","(",")",")",";","appendIfPresent","(","text,","\"CharactersWithSpaces\",","props",".","getCharactersWithSpaces","(",")",")",";","appendIfPresent","(","text,","\"Company\",","props",".","getCompany","(",")",")",";","appendIfPresent","(","text,","\"HyperlinkBase\",","props",".","getHyperlinkBase","(",")",")",";","appendIfPresent","(","text,","\"HyperlinksChanged\",","props",".","getHyperlinksChanged","(",")",")",";","appendIfPresent","(","text,","\"Lines\",","props",".","getLines","(",")",")",";","appendIfPresent","(","text,","\"LinksUpToDate\",","props",".","getLinksUpToDate","(",")",")",";","appendIfPresent","(","text,","\"Manager\",","props",".","getManager","(",")",")",";","appendIfPresent","(","text,","\"Pages\",","props",".","getPages","(",")",")",";","appendIfPresent","(","text,","\"Paragraphs\",","props",".","getParagraphs","(",")",")",";","appendIfPresent","(","text,","\"PresentationFormat\",","props",".","getPresentationFormat","(",")",")",";","appendIfPresent","(","text,","\"Template\",","props",".","getTemplate","(",")",")",";","appendIfPresent","(","text,","\"TotalTime\",","props",".","getTotalTime","(",")",")",";","\n\n","return","text",".","toString","(",")",";"],"docstring_tokens":["Returns","the","extended","document","properties,","eg","application"],"prompt_tokens":[]}
{"code_tokens":["@SuppressWarnings","(","{","\"resource\"","}",")","public","String","getCustomPropertiesText","(",")","{","POIXMLDocument","document","=","getDocument","(",")",";","if","(","document","==","null",")","{","//","event","based","extractor","does","not","have","a","document\n","return","\"\"",";","}","\n\n","StringBuilder","text","=","new","StringBuilder","(",")",";","org",".","openxmlformats",".","schemas",".","officeDocument",".","x2006",".","customProperties",".","CTProperties\n","props","=","document",".","getProperties","(",")",".","getCustomProperties","(",")",".","getUnderlyingProperties","(",")",";","\n\n","for","(","CTProperty","property",":","props",".","getPropertyList","(",")",")","{","String","val","=","\"","(","not","implemented!",")","\"",";","\n\n","if","(","property",".","isSetLpwstr","(",")",")","{","val","=","property",".","getLpwstr","(",")",";","}","else","if","(","property",".","isSetLpstr","(",")",")","{","val","=","property",".","getLpstr","(",")",";","}","else","if","(","property",".","isSetDate","(",")",")","{","val","=","property",".","getDate","(",")",".","toString","(",")",";","}","else","if","(","property",".","isSetFiletime","(",")",")","{","val","=","property",".","getFiletime","(",")",".","toString","(",")",";","}","else","if","(","property",".","isSetBool","(",")",")","{","val","=","Boolean",".","toString","(","property",".","getBool","(",")",")",";","}","\n\n","//","Integers\n","else","if","(","property",".","isSetI1","(",")",")","{","val","=","Integer",".","toString","(","property",".","getI1","(",")",")",";","}","else","if","(","property",".","isSetI2","(",")",")","{","val","=","Integer",".","toString","(","property",".","getI2","(",")",")",";","}","else","if","(","property",".","isSetI4","(",")",")","{","val","=","Integer",".","toString","(","property",".","getI4","(",")",")",";","}","else","if","(","property",".","isSetI8","(",")",")","{","val","=","Long",".","toString","(","property",".","getI8","(",")",")",";","}","else","if","(","property",".","isSetInt","(",")",")","{","val","=","Integer",".","toString","(","property",".","getInt","(",")",")",";","}","\n\n","//","Unsigned","Integers\n","else","if","(","property",".","isSetUi1","(",")",")","{","val","=","Integer",".","toString","(","property",".","getUi1","(",")",")",";","}","else","if","(","property",".","isSetUi2","(",")",")","{","val","=","Integer",".","toString","(","property",".","getUi2","(",")",")",";","}","else","if","(","property",".","isSetUi4","(",")",")","{","val","=","Long",".","toString","(","property",".","getUi4","(",")",")",";","}","else","if","(","property",".","isSetUi8","(",")",")","{","val","=","property",".","getUi8","(",")",".","toString","(",")",";","}","else","if","(","property",".","isSetUint","(",")",")","{","val","=","Long",".","toString","(","property",".","getUint","(",")",")",";","}","\n\n","//","Reals\n","else","if","(","property",".","isSetR4","(",")",")","{","val","=","Float",".","toString","(","property",".","getR4","(",")",")",";","}","else","if","(","property",".","isSetR8","(",")",")","{","val","=","Double",".","toString","(","property",".","getR8","(",")",")",";","}","else","if","(","property",".","isSetDecimal","(",")",")","{","BigDecimal","d","=","property",".","getDecimal","(",")",";","if","(","d","==","null",")","{","val","=","null",";","}","else","{","val","=","d",".","toPlainString","(",")",";","}","}","\n\n","/*else","if","(","property",".","isSetArray","(",")",")","{","//","TODO","Fetch","the","array","values","and","output\n","}","else","if","(","property",".","isSetVector","(",")",")","{","//","TODO","Fetch","the","vector","values","and","output\n","}","\n\n","else","if","(","property",".","isSetBlob","(",")","||","property",".","isSetOblob","(",")",")","{","//","TODO","Decode,","if","possible\n","}","else","if","(","property",".","isSetStream","(",")","||","property",".","isSetOstream","(",")","||\n","property",".","isSetVstream","(",")",")","{","//","TODO","Decode,","if","possible\n","}","else","if","(","property",".","isSetStorage","(",")","||","property",".","isSetOstorage","(",")",")","{","//","TODO","Decode,","if","possible\n","}","*/\n\n","text",".","append","(","property",".","getName","(",")",")",".","append","(","\"","=","\"",")",".","append","(","val",")",".","append","(","\"\\n\"",")",";","}","\n\n","return","text",".","toString","(",")",";"],"docstring_tokens":["Returns","the","custom","document","properties,","if","there","are","any"],"prompt_tokens":[]}
{"code_tokens":["public","ExHyperlink","get","(","int","id",")","{","for","(","int","i=0",";","i<_children",".","length",";","i++",")","{","if","(","_children[i]","instanceof","ExHyperlink",")","{","ExHyperlink","rec","=","(","ExHyperlink",")","_children[i]",";","if","(","rec",".","getExHyperlinkAtom","(",")",".","getNumber","(",")","==","id",")","{","return","rec",";","}","}","}","return","null",";"],"docstring_tokens":["Lookup","a","hyperlink","by","its","unique","id"],"prompt_tokens":[]}
{"code_tokens":["\n\n","public","void","setRowHeight","(","short","height",")","{","field_2_row_height","=","height",";"],"docstring_tokens":["set","the","default","row","height"],"prompt_tokens":[]}
{"code_tokens":["\n\n","public","short","getRowHeight","(",")","{","return","field_2_row_height",";"],"docstring_tokens":["get","the","default","row","height"],"prompt_tokens":[]}
{"code_tokens":["public","void","append","(","String","text,","XSSFFont","font",")","{","if","(","st",".","sizeOfRArray","(",")","==","0","&&","st",".","isSetT","(",")",")","{","//convert","<t>string</t>","into","a","text","run:","<r><t>string</t></r>\n","CTRElt","lt","=","st",".","addNewR","(",")",";","lt",".","setT","(","st",".","getT","(",")",")",";","preserveSpaces","(","lt",".","xgetT","(",")",")",";","st",".","unsetT","(",")",";","}","CTRElt","lt","=","st",".","addNewR","(",")",";","lt",".","setT","(","text",")",";","preserveSpaces","(","lt",".","xgetT","(",")",")",";","\n\n","if","(","font","!=","null",")","{","CTRPrElt","pr","=","lt",".","addNewRPr","(",")",";","setRunAttributes","(","font",".","getCTFont","(",")",",","pr",")",";","}"],"docstring_tokens":["Append","new","text","to","this","text","run","and","apply","the","specify","font","to","it"],"prompt_tokens":[]}
{"code_tokens":["public","void","append","(","String","text",")","{","append","(","text,","null",")",";"],"docstring_tokens":["Append","new","text","to","this","text","run"],"prompt_tokens":[]}
{"code_tokens":["private","void","setRunAttributes","(","CTFont","ctFont,","CTRPrElt","pr",")","{","if","(","ctFont",".","sizeOfBArray","(",")",">","0",")","pr",".","addNewB","(",")",".","setVal","(","ctFont",".","getBArray","(","0",")",".","getVal","(",")",")",";","if","(","ctFont",".","sizeOfUArray","(",")",">","0",")","pr",".","addNewU","(",")",".","setVal","(","ctFont",".","getUArray","(","0",")",".","getVal","(",")",")",";","if","(","ctFont",".","sizeOfIArray","(",")",">","0",")","pr",".","addNewI","(",")",".","setVal","(","ctFont",".","getIArray","(","0",")",".","getVal","(",")",")",";","if","(","ctFont",".","sizeOfColorArray","(",")",">","0",")","{","CTColor","c1","=","ctFont",".","getColorArray","(","0",")",";","CTColor","c2","=","pr",".","addNewColor","(",")",";","if","(","c1",".","isSetAuto","(",")",")","c2",".","setAuto","(","c1",".","getAuto","(",")",")",";","if","(","c1",".","isSetIndexed","(",")",")","c2",".","setIndexed","(","c1",".","getIndexed","(",")",")",";","if","(","c1",".","isSetRgb","(",")",")","c2",".","setRgb","(","c1",".","getRgb","(",")",")",";","if","(","c1",".","isSetTheme","(",")",")","c2",".","setTheme","(","c1",".","getTheme","(",")",")",";","if","(","c1",".","isSetTint","(",")",")","c2",".","setTint","(","c1",".","getTint","(",")",")",";","}","if","(","ctFont",".","sizeOfSzArray","(",")",">","0",")","pr",".","addNewSz","(",")",".","setVal","(","ctFont",".","getSzArray","(","0",")",".","getVal","(",")",")",";","if","(","ctFont",".","sizeOfNameArray","(",")",">","0",")","pr",".","addNewRFont","(",")",".","setVal","(","ctFont",".","getNameArray","(","0",")",".","getVal","(",")",")",";","if","(","ctFont",".","sizeOfFamilyArray","(",")",">","0",")","pr",".","addNewFamily","(",")",".","setVal","(","ctFont",".","getFamilyArray","(","0",")",".","getVal","(",")",")",";","if","(","ctFont",".","sizeOfSchemeArray","(",")",">","0",")","pr",".","addNewScheme","(",")",".","setVal","(","ctFont",".","getSchemeArray","(","0",")",".","getVal","(",")",")",";","if","(","ctFont",".","sizeOfCharsetArray","(",")",">","0",")","pr",".","addNewCharset","(",")",".","setVal","(","ctFont",".","getCharsetArray","(","0",")",".","getVal","(",")",")",";","if","(","ctFont",".","sizeOfCondenseArray","(",")",">","0",")","pr",".","addNewCondense","(",")",".","setVal","(","ctFont",".","getCondenseArray","(","0",")",".","getVal","(",")",")",";","if","(","ctFont",".","sizeOfExtendArray","(",")",">","0",")","pr",".","addNewExtend","(",")",".","setVal","(","ctFont",".","getExtendArray","(","0",")",".","getVal","(",")",")",";","if","(","ctFont",".","sizeOfVertAlignArray","(",")",">","0",")","pr",".","addNewVertAlign","(",")",".","setVal","(","ctFont",".","getVertAlignArray","(","0",")",".","getVal","(",")",")",";","if","(","ctFont",".","sizeOfOutlineArray","(",")",">","0",")","pr",".","addNewOutline","(",")",".","setVal","(","ctFont",".","getOutlineArray","(","0",")",".","getVal","(",")",")",";","if","(","ctFont",".","sizeOfShadowArray","(",")",">","0",")","pr",".","addNewShadow","(",")",".","setVal","(","ctFont",".","getShadowArray","(","0",")",".","getVal","(",")",")",";","if","(","ctFont",".","sizeOfStrikeArray","(",")",">","0",")","pr",".","addNewStrike","(",")",".","setVal","(","ctFont",".","getStrikeArray","(","0",")",".","getVal","(",")",")",";"],"docstring_tokens":["Copy","font","attributes","from","CTFont","bean","into","CTRPrElt","bean"],"prompt_tokens":[]}
{"code_tokens":["public","int","length","(",")","{","return","getString","(",")",".","length","(",")",";"],"docstring_tokens":["Returns","the","number","of","characters","in","this","string"],"prompt_tokens":[]}
{"code_tokens":["public","XSSFFont","getFontAtIndex","(","int","index",")","{","final","ThemesTable","themes","=","getThemesTable","(",")",";","int","pos","=","0",";","//noinspection","deprecation","-","for","performance","reasons!\n","for","(","CTRElt","r",":","st",".","getRArray","(",")",")","{","final","int","length","=","r",".","getT","(",")",".","length","(",")",";","if","(","index",">=","pos","&&","index","<","pos","+","length",")","{","XSSFFont","fnt","=","new","XSSFFont","(","toCTFont","(","r",".","getRPr","(",")",")",")",";","fnt",".","setThemesTable","(","themes",")",";","return","fnt",";","}","\n\n","pos","+=","length",";","}","return","null",";","\n\n"],"docstring_tokens":["Return","a","copy","of","the","font","in","use","at","a","particular","index"],"prompt_tokens":[]}
{"code_tokens":["public","static","boolean","isLogUnsupportedTypes","(",")","{","return","logUnsupportedTypes",";"],"docstring_tokens":["Checks","whether","logging","of","unsupported","variant","types","warning","is","turned","on","or","off"],"prompt_tokens":[]}
{"code_tokens":["protected","static","void","writeUnsupportedTypeMessage\n","(","final","UnsupportedVariantTypeException","ex",")","{","if","(","isLogUnsupportedTypes","(",")",")","{","if","(","unsupportedMessage","==","null",")","{","unsupportedMessage","=","new","LinkedList<>","(",")",";","}","Long","vt","=","Long",".","valueOf","(","ex",".","getVariantType","(",")",")",";","if","(","!unsupportedMessage",".","contains","(","vt",")",")","{","LOG",".","atError","(",")",".","withThrowable","(","ex",")",".","log","(","\"Unsupported","type\"",")",";","unsupportedMessage",".","add","(","vt",")",";","}","}"],"docstring_tokens":["Writes","a","warning","to","System.err","that","a","variant","type","is","unsupported","by","HPSF"],"prompt_tokens":[]}
{"code_tokens":["public","static","Object","read","(","final","byte[]","src,","final","int","offset,\n","final","int","length,","final","long","type,","final","int","codepage",")","throws","ReadingNotSupportedException,","UnsupportedEncodingException","{","LittleEndianByteArrayInputStream","lei","=","new","LittleEndianByteArrayInputStream","(","src,","offset",")",";","return","read","(","lei,","length,","type,","codepage",")",";"],"docstring_tokens":["Reads","a","variant","type","from","a","byte","array"],"prompt_tokens":[]}
{"code_tokens":["private","String[]","getParts","(","String","string",")","{","String[]","parts","=","new","String[]","{","\"\",","\"\",","\"\"","}",";","if","(","string","==","null",")","return","parts",";","//","They","can","come","in","any","order,","which","is","just","nasty\n","//","Work","backwards","from","the","end,","picking","the","last\n","//","on","off","each","time","as","we","go\n","int","lAt","=","0",";","int","cAt","=","0",";","int","rAt","=","0",";","while","(","//","Ensure","all","indicies","get","updated,","then","-1","tested\n","(","lAt","=","string",".","indexOf","(","HeaderFooterEntity_L",")",")",">","-2","&&\n","(","cAt","=","string",".","indexOf","(","HeaderFooterEntity_C",")",")",">","-2","&&","(","rAt","=","string",".","indexOf","(","HeaderFooterEntity_R",")",")",">","-2","&&\n","(","lAt",">","-1","||","cAt",">","-1","||","rAt",">","-1",")",")","{","//","Pick","off","the","last","one\n","if","(","rAt",">","cAt","&&","rAt",">","lAt",")","{","parts[2]","=","string",".","substring","(","rAt","+","HeaderFooterEntity_R",".","length","(",")",")",";","string","=","string",".","substring","(","0,","rAt",")",";","}","else","if","(","cAt",">","rAt","&&","cAt",">","lAt",")","{","parts[1]","=","string",".","substring","(","cAt","+","HeaderFooterEntity_C",".","length","(",")",")",";","string","=","string",".","substring","(","0,","cAt",")",";","}","else","{","parts[0]","=","string",".","substring","(","lAt","+","HeaderFooterEntity_L",".","length","(",")",")",";","string","=","string",".","substring","(","0,","lAt",")",";","}","}","return","parts",";"],"docstring_tokens":["Split","into","left,","center,","right"],"prompt_tokens":[]}
{"code_tokens":["public","short","getFormatFlags","(",")","{","return","field_1_formatFlags",";"],"docstring_tokens":["Get","the","format","flags","field","for","the","SeriesLabels","record"],"prompt_tokens":[]}
{"code_tokens":["public","void","setFormatFlags","(","short","field_1_formatFlags",")","{","this",".","field_1_formatFlags","=","field_1_formatFlags",";"],"docstring_tokens":["Set","the","format","flags","field","for","the","SeriesLabels","record"],"prompt_tokens":[]}
{"code_tokens":["public","void","setValue","(","double","value",")","{","field_4_value","=","value",";","specialCachedValue","=","null",";"],"docstring_tokens":["set","the","calculated","value","of","the","formula"],"prompt_tokens":[]}
{"code_tokens":["@Internal\n","public","CTMarker","getFrom","(",")","{","return","getCell1","(",")",";"],"docstring_tokens":["Return","starting","anchor","point"],"prompt_tokens":[]}
{"code_tokens":["@Internal\n","public","CTMarker","getTo","(",")","{","return","getCell2","(",")",";"],"docstring_tokens":["Return","ending","anchor","point"],"prompt_tokens":[]}
{"code_tokens":["private","static","double","evaluate","(","int","hours,","int","minutes,","int","seconds",")","throws","EvaluationException","{","\n\n","if","(","hours",">","32767","||","minutes",">","32767","||","seconds",">","32767",")","{","throw","new","EvaluationException","(","ErrorEval",".","VALUE_INVALID",")",";","}","int","totalSeconds","=","hours","*","SECONDS_PER_HOUR","+","minutes","*","SECONDS_PER_MINUTE","+","seconds",";","\n\n","if","(","totalSeconds","<","0",")","{","throw","new","EvaluationException","(","ErrorEval",".","VALUE_INVALID",")",";","}","return","(","totalSeconds","%","SECONDS_PER_DAY",")","/","(","double",")","SECONDS_PER_DAY",";"],"docstring_tokens":["Converts","the","supplied","hours,","minutes","and","seconds","to","an","Excel","time","value"],"prompt_tokens":[]}
{"code_tokens":["@Override\n","public","void","write","(",")","throws","IOException","{","POIFSFileSystem","fs","=","getDirectory","(",")",".","getFileSystem","(",")",";","\n\n","validateInPlaceWritePossible","(",")",";","writeProperties","(","fs,","null",")",";","fs",".","writeFilesystem","(",")",";"],"docstring_tokens":["Write","out","to","the","currently","open","file","the","properties","changes,","but","nothing","else"],"prompt_tokens":[]}
{"code_tokens":["@Override\n","public","Row","getRow","(",")","{","return","_row",";"],"docstring_tokens":["Returns","the","Row","this","cell","belongs","to"],"prompt_tokens":[]}
{"code_tokens":["protected","void","readMacros","(","DirectoryNode","macroDir,","ModuleMap","modules",")","throws","IOException","{","//bug59858","shows","that","dirstream","may","not","be","in","this","directory","(","\\MBD00082648\\_VBA_PROJECT_CUR\\VBA","ENTRY","NAME",")","//but","may","be","in","another","directory","(","\\_VBA_PROJECT_CUR\\VBA","ENTRY","NAME",")","//process","the","dirstream","first","--","\"dir\"","is","case","insensitive\n","for","(","String","entryName",":","macroDir",".","getEntryNames","(",")",")","{","if","(","\"dir\"",".","equalsIgnoreCase","(","entryName",")",")","{","processDirStream","(","macroDir",".","getEntry","(","entryName",")",",","modules",")",";","break",";","}","}","\n\n","for","(","Entry","entry",":","macroDir",")","{","if","(","!","(","entry","instanceof","DocumentNode",")",")","{","continue",";","}","\n\n","String","name","=","entry",".","getName","(",")",";","DocumentNode","document","=","(","DocumentNode",")","entry",";","\n\n","if","(","!","\"dir\"",".","equalsIgnoreCase","(","name",")","&&","!startsWithIgnoreCase","(","name,","\"__SRP\"",")","&&","!startsWithIgnoreCase","(","name,","\"_VBA_PROJECT\"",")",")","{","//","process","module,","skip","__SRP","and","_VBA_PROJECT","since","these","do","not","contain","macros\n","readModuleFromDocumentStream","(","document,","name,","modules",")",";","}","}"],"docstring_tokens":["Reads","VBA","Project","modules","from","a","VBA","Project","directory","located","at","macroDir","into","modules"],"prompt_tokens":[]}
{"code_tokens":["@Override\n","public","void","setText","(","String","text",")","{","if","(","text","==","null",")","{","getHeaderFooter","(",")",".","unsetOddHeader","(",")",";","}","else","{","getHeaderFooter","(",")",".","setOddHeader","(","text",")",";","}"],"docstring_tokens":["Set","a","text","for","the","header"],"prompt_tokens":[]}
{"code_tokens":["public","void","setUsername","(","String","username",")","{","boolean","is16bit","=","StringUtil",".","hasMultibyte","(","username",")",";","int","encodedByteCount","=","3","+","username",".","length","(",")","*","(","is16bit","?","2",":","1",")",";","int","paddingSize","=","DATA_SIZE","-","encodedByteCount",";","if","(","paddingSize","<","0",")","{","throw","new","IllegalArgumentException","(","\"Name","is","too","long:","\"","+","username",")",";","}","\n\n","field_1_username","=","username",";"],"docstring_tokens":["set","the","username","for","the","user","that","created","the","report"],"prompt_tokens":[]}
{"code_tokens":["protected","byte[]","generateImage","(","boolean","showSignature,","boolean","showInvalidStamp",")","throws","IOException","{","BufferedImage","bi","=","new","BufferedImage","(","400,","150,","BufferedImage",".","TYPE_INT_ARGB",")",";","Graphics2D","gfx","=","bi",".","createGraphics","(",")",";","gfx",".","setRenderingHint","(","RenderingHints",".","KEY_FRACTIONALMETRICS,","RenderingHints",".","VALUE_FRACTIONALMETRICS_ON",")",";","gfx",".","setRenderingHint","(","RenderingHints",".","KEY_ALPHA_INTERPOLATION,","RenderingHints",".","VALUE_ALPHA_INTERPOLATION_QUALITY",")",";","gfx",".","setRenderingHint","(","RenderingHints",".","KEY_ANTIALIASING,","RenderingHints",".","VALUE_ANTIALIAS_ON",")",";","gfx",".","setRenderingHint","(","RenderingHints",".","KEY_TEXT_ANTIALIASING,","RenderingHints",".","VALUE_TEXT_ANTIALIAS_ON",")",";","\n\n","String","markX","=","\"X\\n\"",";","String","lineX","=","(","new","String","(","new","char[500]",")",".","replace","(","\"\\0\",","\"","\"",")",")","+\"\\n\"",";","String","cap","=","(","getCaption","(",")","==","null",")","?","getDefaultCaption","(",")",":","getCaption","(",")",";","String","text","=","markX+lineX+cap",".","replaceAll","(","\"","(","?m",")","^\",","\"","\"",")",";","\n\n","AttributedString","as","=","new","AttributedString","(","text",")",";","as",".","addAttribute","(","TextAttribute",".","FAMILY,","Font",".","SANS_SERIF",")",";","as",".","addAttribute","(","TextAttribute",".","UNDERLINE,","TextAttribute",".","UNDERLINE_ON,","markX",".","length","(",")",",","text",".","indexOf","(","'\\n',","markX",".","length","(",")",")",")",";","\n\n","as",".","addAttribute","(","TextAttribute",".","SIZE,","15,","0,","markX",".","length","(",")",")",";","as",".","addAttribute","(","TextAttribute",".","SIZE,","12,","markX",".","length","(",")",",","text",".","length","(",")",")",";","\n\n","gfx",".","setColor","(","Color",".","BLACK",")",";","\n\n","AttributedCharacterIterator","chIter","=","as",".","getIterator","(",")",";","FontRenderContext","frc","=","gfx",".","getFontRenderContext","(",")",";","LineBreakMeasurer","measurer","=","new","LineBreakMeasurer","(","chIter,","frc",")",";","float","y","=","80,","x","=","5",";","for","(","int","lineNr","=","0",";","measurer",".","getPosition","(",")","<","chIter",".","getEndIndex","(",")",";","lineNr++",")","{","int","mpos","=","measurer",".","getPosition","(",")",";","int","limit","=","text",".","indexOf","(","'\\n',","mpos",")",";","limit","=","(","limit","==","-1",")","?","text",".","length","(",")",":","limit+1",";","TextLayout","textLayout","=","measurer",".","nextLayout","(","bi",".","getWidth","(",")","-10f,","limit,","false",")",";","if","(","lineNr","!=","1",")","{","y","+=","textLayout",".","getAscent","(",")",";","}","textLayout",".","draw","(","gfx,","x,","y",")",";","y","+=","textLayout",".","getDescent","(",")","+","textLayout",".","getLeading","(",")",";","}","\n\n","if","(","showSignature","&&","plainSignature","!=","null","&&","contentType","!=","null",")","{","\n\n","ImageRenderer","renderer","=","DrawPictureShape",".","getImageRenderer","(","gfx,","contentType",")",";","\n\n","renderer",".","loadImage","(","plainSignature,","contentType",")",";","\n\n","double","targetX","=","10",";","double","targetY","=","100",";","double","targetWidth","=","bi",".","getWidth","(",")","-","targetX",";","double","targetHeight","=","targetY","-","5",";","Dimension2D","dim","=","renderer",".","getDimension","(",")",";","double","scale","=","Math",".","min","(","targetWidth","/","dim",".","getWidth","(",")",",","targetHeight","/","dim",".","getHeight","(",")",")",";","double","effWidth","=","dim",".","getWidth","(",")","*","scale",";","double","effHeight","=","dim",".","getHeight","(",")","*","scale",";","\n\n","renderer",".","drawImage","(","gfx,","new","Rectangle2D",".","Double","(","targetX","+","(","(","bi",".","getWidth","(",")","-","effWidth",")","/","2",")",",","targetY","-","effHeight,","effWidth,","effHeight",")",")",";","}","\n\n","if","(","showInvalidStamp","&&","invalidStamp","!=","null","&&","!invalidStamp",".","isEmpty","(",")",")","{","gfx",".","setFont","(","new","Font","(","\"Lucida","Bright\",","Font",".","ITALIC,","60",")",")",";","gfx",".","rotate","(","Math",".","toRadians","(","-15",")",",","bi",".","getWidth","(",")","/2",".",",","bi",".","getHeight","(",")","/2",".",")",";","TextLayout","tl","=","new","TextLayout","(","invalidStamp,","gfx",".","getFont","(",")",",","gfx",".","getFontRenderContext","(",")",")",";","Rectangle2D","bounds","=","tl",".","getBounds","(",")",";","x","=","(","float",")","(","(","bi",".","getWidth","(",")","-bounds",".","getWidth","(",")",")","/2","-","bounds",".","getX","(",")",")",";","y","=","(","float",")","(","(","bi",".","getHeight","(",")","-bounds",".","getHeight","(",")",")","/2","-","bounds",".","getY","(",")",")",";","Shape","outline","=","tl",".","getOutline","(","AffineTransform",".","getTranslateInstance","(","x+2,","y+1",")",")",";","gfx",".","setComposite","(","AlphaComposite",".","getInstance","(","AlphaComposite",".","SRC_OVER,","0",".","3f",")",")",";","gfx",".","setPaint","(","Color",".","RED",")",";","gfx",".","draw","(","outline",")",";","gfx",".","setPaint","(","new","GradientPaint","(","0,","0,","Color",".","RED,","30,","20,","new","Color","(","128,","128,","255",")",",","true",")",")",";","tl",".","draw","(","gfx,","x,","y",")",";","}","\n\n","gfx",".","dispose","(",")",";","\n\n","UnsynchronizedByteArrayOutputStream","bos","=","new","UnsynchronizedByteArrayOutputStream","(",")",";","ImageIO",".","write","(","bi,","\"PNG\",","bos",")",";","return","bos",".","toByteArray","(",")",";"],"docstring_tokens":["Generate","the","image","for","a","signature","line"],"prompt_tokens":[]}
{"code_tokens":["public","void","extractMessageBody","(","File","dest",")","throws","IOException","{","MAPIAttribute","body","=","getBodyAttribute","(",")",";","if","(","body","==","null",")","{","System",".","err",".","println","(","\"No","message","body","found,","\"","+","dest","+","\"","not","created\"",")",";","return",";","}","if","(","body","instanceof","MAPIStringAttribute",")","{","String","name","=","dest",".","toString","(",")",";","if","(","name",".","endsWith","(","\"",".","rtf\"",")",")","{","name","=","name",".","substring","(","0,","name",".","length","(",")","-4",")",";","}","dest","=","new","File","(","name","+","\"",".","txt\"",")",";","}","\n\n","try","(","OutputStream","fout","=","new","FileOutputStream","(","dest",")",")","{","if","(","body","instanceof","MAPIStringAttribute",")","{","//","Save","in","a","predictable","encoding,","not","raw","bytes\n","String","text","=","(","(","MAPIStringAttribute",")","body",")",".","getDataString","(",")",";","fout",".","write","(","text",".","getBytes","(","StringUtil",".","UTF8",")",")",";","}","else","{","//","Save","the","raw","bytes,","should","be","raw","RTF\n","fout",".","write","(","body",".","getData","(",")",")",";","}","}"],"docstring_tokens":["Extracts","the","RTF","message","body","to","the","supplied","file"],"prompt_tokens":[]}
{"code_tokens":["private","static","StringBuilder","buildInitSB","(","byte[]","text,","PieceDescriptor","pd",")","{","if","(","DoubleByteUtil",".","BIG5",".","equals","(","pd",".","getCharset","(",")",")",")","{","return","new","StringBuilder","(","DoubleByteUtil",".","cp950ToString","(","text,","0,","text",".","length",")",")",";","}","\n\n","String","str","=","new","String","(","text,","0,","text",".","length,","(","pd",".","isUnicode","(",")",")","?","StringUtil",".","UTF16LE",":","pd",".","getCharset","(",")",")",";","return","new","StringBuilder","(","str",")",";"],"docstring_tokens":["Create","the","StringBuilder","from","the","text","and","unicode","flag"],"prompt_tokens":[]}
{"code_tokens":["public","byte","getMajorTickType","(",")","{","return","field_1_majorTickType",";"],"docstring_tokens":["Get","the","major","tick","type","field","for","the","Tick","record"],"prompt_tokens":[]}
{"code_tokens":["public","void","setMajorTickType","(","byte","field_1_majorTickType",")","{","this",".","field_1_majorTickType","=","field_1_majorTickType",";"],"docstring_tokens":["Set","the","major","tick","type","field","for","the","Tick","record"],"prompt_tokens":[]}
{"code_tokens":["public","byte","getMinorTickType","(",")","{","return","field_2_minorTickType",";"],"docstring_tokens":["Get","the","minor","tick","type","field","for","the","Tick","record"],"prompt_tokens":[]}
{"code_tokens":["public","void","setMinorTickType","(","byte","field_2_minorTickType",")","{","this",".","field_2_minorTickType","=","field_2_minorTickType",";"],"docstring_tokens":["Set","the","minor","tick","type","field","for","the","Tick","record"],"prompt_tokens":[]}
{"code_tokens":["public","byte","getLabelPosition","(",")","{","return","field_3_labelPosition",";"],"docstring_tokens":["Get","the","label","position","field","for","the","Tick","record"],"prompt_tokens":[]}
{"code_tokens":["public","void","setLabelPosition","(","byte","field_3_labelPosition",")","{","this",".","field_3_labelPosition","=","field_3_labelPosition",";"],"docstring_tokens":["Set","the","label","position","field","for","the","Tick","record"],"prompt_tokens":[]}
{"code_tokens":["public","byte","getBackground","(",")","{","return","field_4_background",";"],"docstring_tokens":["Get","the","background","field","for","the","Tick","record"],"prompt_tokens":[]}
{"code_tokens":["public","void","setBackground","(","byte","field_4_background",")","{","this",".","field_4_background","=","field_4_background",";"],"docstring_tokens":["Set","the","background","field","for","the","Tick","record"],"prompt_tokens":[]}
{"code_tokens":["public","int","getLabelColorRgb","(",")","{","return","field_5_labelColorRgb",";"],"docstring_tokens":["Get","the","label","color","rgb","field","for","the","Tick","record"],"prompt_tokens":[]}
{"code_tokens":["public","void","setLabelColorRgb","(","int","field_5_labelColorRgb",")","{","this",".","field_5_labelColorRgb","=","field_5_labelColorRgb",";"],"docstring_tokens":["Set","the","label","color","rgb","field","for","the","Tick","record"],"prompt_tokens":[]}
{"code_tokens":["public","int","getZero1","(",")","{","return","field_6_zero1",";"],"docstring_tokens":["Get","the","zero","1","field","for","the","Tick","record"],"prompt_tokens":[]}
{"code_tokens":["public","void","setZero1","(","int","field_6_zero1",")","{","this",".","field_6_zero1","=","field_6_zero1",";"],"docstring_tokens":["Set","the","zero","1","field","for","the","Tick","record"],"prompt_tokens":[]}
{"code_tokens":["public","int","getZero2","(",")","{","return","field_7_zero2",";"],"docstring_tokens":["Get","the","zero","2","field","for","the","Tick","record"],"prompt_tokens":[]}
{"code_tokens":["public","void","setZero2","(","int","field_7_zero2",")","{","this",".","field_7_zero2","=","field_7_zero2",";"],"docstring_tokens":["Set","the","zero","2","field","for","the","Tick","record"],"prompt_tokens":[]}
{"code_tokens":["public","short","getOptions","(",")","{","return","field_10_options",";"],"docstring_tokens":["Get","the","options","field","for","the","Tick","record"],"prompt_tokens":[]}
{"code_tokens":["public","void","setOptions","(","short","field_10_options",")","{","this",".","field_10_options","=","field_10_options",";"],"docstring_tokens":["Set","the","options","field","for","the","Tick","record"],"prompt_tokens":[]}
{"code_tokens":["public","short","getTickColor","(",")","{","return","field_11_tickColor",";"],"docstring_tokens":["Get","the","tick","color","field","for","the","Tick","record"],"prompt_tokens":[]}
{"code_tokens":["public","void","setTickColor","(","short","field_11_tickColor",")","{","this",".","field_11_tickColor","=","field_11_tickColor",";"],"docstring_tokens":["Set","the","tick","color","field","for","the","Tick","record"],"prompt_tokens":[]}
{"code_tokens":["public","short","getZero3","(",")","{","return","field_12_zero5",";"],"docstring_tokens":["Get","the","zero","3","field","for","the","Tick","record"],"prompt_tokens":[]}
{"code_tokens":["public","void","setZero3","(","short","field_12_zero3",")","{","this",".","field_12_zero5","=","field_12_zero3",";"],"docstring_tokens":["Set","the","zero","3","field","for","the","Tick","record"],"prompt_tokens":[]}
{"code_tokens":["public","void","traverse","(","CellHandler","handler",")","{","int","firstRow","=","range",".","getFirstRow","(",")",";","int","lastRow","=","range",".","getLastRow","(",")",";","int","firstColumn","=","range",".","getFirstColumn","(",")",";","int","lastColumn","=","range",".","getLastColumn","(",")",";","final","int","width","=","lastColumn","-","firstColumn","+","1",";","SimpleCellWalkContext","ctx","=","new","SimpleCellWalkContext","(",")",";","Row","currentRow",";","Cell","currentCell",";","\n\n","for","(","ctx",".","rowNumber","=","firstRow",";","ctx",".","rowNumber","<=","lastRow",";","++ctx",".","rowNumber",")","{","currentRow","=","sheet",".","getRow","(","ctx",".","rowNumber",")",";","if","(","currentRow","==","null",")","{","continue",";","}","for","(","ctx",".","colNumber","=","firstColumn",";","ctx",".","colNumber","<=","lastColumn",";","++ctx",".","colNumber",")","{","currentCell","=","currentRow",".","getCell","(","ctx",".","colNumber",")",";","\n\n","if","(","currentCell","==","null",")","{","continue",";","}","if","(","isEmpty","(","currentCell",")","&&","!traverseEmptyCells",")","{","continue",";","}","\n\n","long","rowSize","=","Math",".","multiplyExact","(","Math",".","subtractExact","(","ctx",".","rowNumber,","firstRow",")",",","(","long",")","width",")",";","\n\n","ctx",".","ordinalNumber","=","Math",".","addExact","(","rowSize,","(","ctx",".","colNumber","-","firstColumn","+","1",")",")",";","\n\n","handler",".","onCell","(","currentCell,","ctx",")",";","}","}"],"docstring_tokens":["Traverse","cell","range","from","top","left","to","bottom","right","cell"],"prompt_tokens":[]}
{"code_tokens":["public","void","setStartBlock","(","int","startBlock",")","{","_start_block",".","set","(","startBlock,","_raw_data",")",";"],"docstring_tokens":["Set","the","start","block","for","the","document","referred","to","by","this","Property"],"prompt_tokens":[]}
{"code_tokens":["public","String","getName","(",")","{","return","_name",";"],"docstring_tokens":["Get","the","name","of","this","property"],"prompt_tokens":[]}
{"code_tokens":["protected","void","setSize","(","int","size",")","{","_size",".","set","(","size,","_raw_data",")",";"],"docstring_tokens":["Set","the","size","of","the","document","associated","with","this","Property"],"prompt_tokens":[]}
{"code_tokens":["protected","void","setIndex","(","int","index",")","{","_index","=","index",";"],"docstring_tokens":["Set","the","index","for","this","Property"],"prompt_tokens":[]}
{"code_tokens":["protected","int","getIndex","(",")","{","return","_index",";"],"docstring_tokens":["get","the","index","for","this","Property"],"prompt_tokens":[]}
{"code_tokens":["@Override\n","public","void","setVaryColors","(","Boolean","varyColors",")","{","//","nothing","to","do\n"],"docstring_tokens":["Surface","chart","is","not","supporting","vary","color","property"],"prompt_tokens":[]}
{"code_tokens":["public","static","long","dateToFileTime","(","final","Date","date",")","{","return","BigInteger",".","valueOf","(","date",".","getTime","(",")",")",".","subtract","(","EPOCH_DIFF",")",".","multiply","(","NANO_100",")",".","longValue","(",")",";"],"docstring_tokens":["Converts","a","Date","into","a","filetime"],"prompt_tokens":[]}
{"code_tokens":["public","static","boolean","isUndefined","(","Date","date",")","{","return","(","date","==","null","||","dateToFileTime","(","date",")","==","0",")",";"],"docstring_tokens":["Return","true","if","the","date","is","undefined"],"prompt_tokens":[]}
{"code_tokens":["@SuppressWarnings","(","\"resource\"",")","public","HSLFPictureData","getPictureData","(",")","{","AbstractEscherOptRecord","opt","=","shape",".","getEscherOptRecord","(",")",";","EscherSimpleProperty","p","=","HSLFShape",".","getEscherProperty","(","opt,","EscherPropertyTypes",".","FILL__PATTERNTEXTURE",")",";","if","(","p","==","null",")","{","return","null",";","}","\n\n","HSLFSlideShow","ppt","=","shape",".","getSheet","(",")",".","getSlideShow","(",")",";","List<HSLFPictureData>","pict","=","ppt",".","getPictureData","(",")",";","Document","doc","=","ppt",".","getDocumentRecord","(",")",";","\n\n","EscherContainerRecord","dggContainer","=","doc",".","getPPDrawingGroup","(",")",".","getDggContainer","(",")",";","EscherContainerRecord","bstore","=","HSLFShape",".","getEscherChild","(","dggContainer,","EscherContainerRecord",".","BSTORE_CONTAINER",")",";","\n\n","int","idx","=","p",".","getPropertyValue","(",")",";","if","(","idx","==","0",")","{","LOG",".","atWarn","(",")",".","log","(","\"no","reference","to","picture","data","found","\"",")",";","}","else","{","EscherBSERecord","bse","=","(","EscherBSERecord",")","bstore",".","getChild","(","idx","-","1",")",";","for","(","HSLFPictureData","pd",":","pict",")","{","\n\n","//","Reference","equals","is","safe","because","these","BSE","belong","to","the","same","slideshow\n","if","(","pd",".","bse","==","bse",")","{","return","pd",";","}","}","}","\n\n","return","null",";"],"docstring_tokens":["PictureData","object","used","in","a","texture,","pattern","of","picture","fill"],"prompt_tokens":[]}
{"code_tokens":["@Override\n","public","ExcelNumberFormat","getNumberFormat","(",")","{","CTDxf","dxf","=","getDxf","(","false",")",";","if","(","dxf","==","null","||","!dxf",".","isSetNumFmt","(",")",")","return","null",";","\n\n","CTNumFmt","numFmt","=","dxf",".","getNumFmt","(",")",";","return","new","ExcelNumberFormat","(","(","int",")","numFmt",".","getNumFmtId","(",")",",","numFmt",".","getFormatCode","(",")",")",";"],"docstring_tokens":["Return","the","number","format","from","the","dxf","style","record","if","present,","null","if","not"],"prompt_tokens":[]}
{"code_tokens":["@Override\n","public","ConditionType","getConditionType","(",")","{","return","typeLookup",".","get","(","_cfRule",".","getType","(",")",")",";"],"docstring_tokens":["Type","of","conditional","formatting","rule"],"prompt_tokens":[]}
{"code_tokens":["public","MAPIMessage","getEmbeddedMessage","(",")","throws","IOException","{","if","(","attachmentDirectory","!=","null",")","{","return","attachmentDirectory",".","getAsEmbeddedMessage","(",")",";","}","return","null",";"],"docstring_tokens":["Returns","the","embedded","MAPI","message,","if","the","attachment","is","an","embedded","message,","or","null","otherwise"],"prompt_tokens":[]}
{"code_tokens":["@Override\n","public","void","chunksComplete","(",")","{","//","Currently,","we","don't","need","to","do","anything","special","once\n","//","all","the","chunks","have","been","located\n"],"docstring_tokens":["Used","to","flag","that","all","the","chunks","of","the","attachment","have","now","been","located"],"prompt_tokens":[]}
{"code_tokens":["public","byte[]","getRemainingData","(",")","{","return","remainingData",";"],"docstring_tokens":["Any","data","recording","this","record"],"prompt_tokens":[]}
{"code_tokens":["@SuppressWarnings","(","{","\"unchecked\",","\"WeakerAccess\",","\"unused\",","\"SameParameterValue\"","}",")","protected","<T","extends","XmlObject>","T","getChild","(","Class<T>","childClass,","String","namespace,","String","nodename",")","{","T","child","=","null",";","XmlCursor","cur","=","getXmlObject","(",")",".","newCursor","(",")",";","try","{","if","(","cur",".","toChild","(","namespace,","nodename",")",")","{","child","=","(","T",")","cur",".","getObject","(",")",";","}","if","(","cur",".","toChild","(","XSLFRelation",".","NS_DRAWINGML,","nodename",")",")","{","child","=","(","T",")","cur",".","getObject","(",")",";","}","}","finally","{","cur",".","dispose","(",")",";","}","return","child",";"],"docstring_tokens":["Return","direct","child","objects","of","this","shape"],"prompt_tokens":[]}
{"code_tokens":["@Internal\n","public","int","getFlags","(",")","{","return","field_2_flags",";"],"docstring_tokens":["Get","the","flags","field","for","the","LFOLVLBase","record"],"prompt_tokens":[]}
{"code_tokens":["@Internal\n","public","void","setFlags","(","int","field_2_flags",")","{","this",".","field_2_flags","=","field_2_flags",";"],"docstring_tokens":["Set","the","flags","field","for","the","LFOLVLBase","record"],"prompt_tokens":[]}
{"code_tokens":["@Internal\n","public","boolean","isFStartAt","(",")","{","return","fStartAt",".","isSet","(","field_2_flags",")",";"],"docstring_tokens":["A","bit","that","specifies","whether","this","LFOLVL","overrides","the","start-at","value","of","the","level"],"prompt_tokens":[]}
{"code_tokens":["@Internal\n","public","boolean","isFFormatting","(",")","{","return","fFormatting",".","isSet","(","field_2_flags",")",";"],"docstring_tokens":["A","bit","that","specifies","whether","lvl","is","an","LVL","that","overrides","the","corresponding","LVL"],"prompt_tokens":[]}
{"code_tokens":["@Internal\n","public","void","setGrfhic","(","short","value",")","{","field_2_flags","=","grfhic",".","setValue","(","field_2_flags,","value",")",";"],"docstring_tokens":["Sets","the","grfhic","field","value"],"prompt_tokens":[]}
{"code_tokens":["@Internal\n","public","void","setUnused1","(","short","value",")","{","field_2_flags","=","unused1",".","setValue","(","field_2_flags,","value",")",";"],"docstring_tokens":["Sets","the","unused1","field","value"],"prompt_tokens":[]}
{"code_tokens":["@Internal\n","public","void","setUnused2","(","byte","value",")","{","field_2_flags","=","unused2",".","setValue","(","field_2_flags,","value",")",";"],"docstring_tokens":["Sets","the","unused2","field","value"],"prompt_tokens":[]}
{"code_tokens":["public","String","getStringFromChunk","(","StringChunk","chunk",")","throws","ChunkNotFoundException","{","if","(","chunk","==","null",")","{","if","(","returnNullOnMissingChunk",")","{","return","null",";","}","else","{","throw","new","ChunkNotFoundException","(",")",";","}","}","return","chunk",".","getValue","(",")",";"],"docstring_tokens":["Gets","a","string","value","based","on","the","passed","chunk"],"prompt_tokens":[]}
{"code_tokens":["public","short","getAxisType","(",")","{","return","field_1_axisType",";"],"docstring_tokens":["Get","the","axis","type","field","for","the","AxisParent","record"],"prompt_tokens":[]}
{"code_tokens":["public","void","setAxisType","(","short","field_1_axisType",")","{","this",".","field_1_axisType","=","field_1_axisType",";"],"docstring_tokens":["Set","the","axis","type","field","for","the","AxisParent","record"],"prompt_tokens":[]}
{"code_tokens":["public","int","getX","(",")","{","return","field_2_x",";"],"docstring_tokens":["Get","the","x","field","for","the","AxisParent","record"],"prompt_tokens":[]}
{"code_tokens":["public","void","setX","(","int","field_2_x",")","{","this",".","field_2_x","=","field_2_x",";"],"docstring_tokens":["Set","the","x","field","for","the","AxisParent","record"],"prompt_tokens":[]}
{"code_tokens":["public","int","getY","(",")","{","return","field_3_y",";"],"docstring_tokens":["Get","the","y","field","for","the","AxisParent","record"],"prompt_tokens":[]}
{"code_tokens":["public","void","setY","(","int","field_3_y",")","{","this",".","field_3_y","=","field_3_y",";"],"docstring_tokens":["Set","the","y","field","for","the","AxisParent","record"],"prompt_tokens":[]}
{"code_tokens":["public","int","getWidth","(",")","{","return","field_4_width",";"],"docstring_tokens":["Get","the","width","field","for","the","AxisParent","record"],"prompt_tokens":[]}
{"code_tokens":["public","void","setWidth","(","int","field_4_width",")","{","this",".","field_4_width","=","field_4_width",";"],"docstring_tokens":["Set","the","width","field","for","the","AxisParent","record"],"prompt_tokens":[]}
{"code_tokens":["public","int","getHeight","(",")","{","return","field_5_height",";"],"docstring_tokens":["Get","the","height","field","for","the","AxisParent","record"],"prompt_tokens":[]}
{"code_tokens":["public","void","setHeight","(","int","field_5_height",")","{","this",".","field_5_height","=","field_5_height",";"],"docstring_tokens":["Set","the","height","field","for","the","AxisParent","record"],"prompt_tokens":[]}
{"code_tokens":["static","OldFfn","build","(","byte[]","buf,","int","offset,","int","fontTableEnd",")","{","int","start","=","offset",";","//preliminary","bytes\n","if","(","offset","+","6",">","fontTableEnd",")","{","return","null",";","}","//first","byte\n","short","fontDescriptionLength","=","buf[offset]",";","offset","+=","1",";","if","(","offset","+","fontDescriptionLength",">","fontTableEnd",")","{","LOG",".","atWarn","(",")",".","log","(","\"Asked","to","read","beyond","font","table","end",".","Skipping","font\"",")",";","return","null",";","}","\n\n","//no","idea","what","these","3","bytes","do\n","offset","+=","3",";","byte","chs","=","buf[offset]",";","Charset","charset","=","null",";","FontCharset","wmfCharset","=","FontCharset",".","valueOf","(","chs","&","0xff",")",";","if","(","wmfCharset","==","null",")","{","LOG",".","atWarn","(",")",".","log","(","\"Couldn't","find","font","for","type:","{","}","\",","box","(","(","chs","&","0xff",")",")",")",";","}","else","{","charset","=","wmfCharset",".","getCharset","(",")",";","}","charset","=","charset","==","null","?","StringUtil",".","WIN_1252",":","charset",";","offset","+=","LittleEndianConsts",".","BYTE_SIZE",";","//if","this","byte","here","==","7,","it","_may_","signify","existence","of\n","//an","altername","font","name\n\n","//not","sure","what","the","byte","after","the","_chs","does\n","offset","+=","LittleEndianConsts",".","BYTE_SIZE",";","int","fontNameLength","=","-1",";","for","(","int","i","=","offset",";","i","<","fontTableEnd",";","i++",")","{","if","(","buf[i]","==","0",")","{","fontNameLength","=","i","-","offset",";","break",";","}","}","if","(","fontNameLength","==","-1",")","{","LOG",".","atWarn","(",")",".","log","(","\"Couldn't","find","the","zero-byte","delimited","font","name","length\"",")",";","return","null",";","}","String","fontName","=","new","String","(","buf,","offset,","fontNameLength,","charset",")",";","String","altFontName","=","null",";","int","altFontNameLength","=","-1",";","offset","+=","fontNameLength","+","1",";","if","(","offset","-","start","<","fontDescriptionLength",")","{","for","(","int","i","=","offset",";","i","<=","start","+","fontDescriptionLength",";","i++",")","{","if","(","buf[i]","==","0",")","{","altFontNameLength","=","i","-","offset",";","break",";","}","}","if","(","altFontNameLength",">","-1",")","{","altFontName","=","new","String","(","buf,","offset,","altFontNameLength,","charset",")",";","}","}","//reset","to","0","for","length","calculation\n","altFontNameLength","=","(","altFontNameLength","<","0",")","?","0",":","altFontNameLength","+","1",";","//add","one","for","zero","byte\n\n","int","len","=","LittleEndianConsts",".","INT_SIZE","+","LittleEndianConsts",".","BYTE_SIZE","+","LittleEndianConsts",".","BYTE_SIZE","+//6","starting","bytes\n","fontNameLength","+","altFontNameLength","+","1",";","//+1","is","for","the","zero","byte\n","//this","len","should","==","fontDescriptionLength\n\n","return","new","OldFfn","(","chs,","fontName,","altFontName,","len",")",";","\n\n"],"docstring_tokens":["try","to","read","an","OldFfn","starting","at","offset;","read","no","farther","than","end"],"prompt_tokens":[]}
{"code_tokens":["public","static","Ptg[]","toTokenArray","(","ParseNode","rootNode",")","{","TokenCollector","temp","=","new","TokenCollector","(","rootNode",".","getTokenCount","(",")",")",";","rootNode",".","collectPtgs","(","temp",")",";","return","temp",".","getResult","(",")",";"],"docstring_tokens":["Collects","the","array","of","Ptg","tokens","for","the","specified","tree"],"prompt_tokens":[]}
{"code_tokens":["public","int","getForegroundColor","(",")","{","return","field_1_foregroundColor",";"],"docstring_tokens":["Get","the","foreground","color","field","for","the","AreaFormat","record"],"prompt_tokens":[]}
{"code_tokens":["public","void","setForegroundColor","(","int","field_1_foregroundColor",")","{","this",".","field_1_foregroundColor","=","field_1_foregroundColor",";"],"docstring_tokens":["Set","the","foreground","color","field","for","the","AreaFormat","record"],"prompt_tokens":[]}
{"code_tokens":["public","int","getBackgroundColor","(",")","{","return","field_2_backgroundColor",";"],"docstring_tokens":["Get","the","background","color","field","for","the","AreaFormat","record"],"prompt_tokens":[]}
{"code_tokens":["public","void","setBackgroundColor","(","int","field_2_backgroundColor",")","{","this",".","field_2_backgroundColor","=","field_2_backgroundColor",";"],"docstring_tokens":["Set","the","background","color","field","for","the","AreaFormat","record"],"prompt_tokens":[]}
{"code_tokens":["public","short","getPattern","(",")","{","return","field_3_pattern",";"],"docstring_tokens":["Get","the","pattern","field","for","the","AreaFormat","record"],"prompt_tokens":[]}
{"code_tokens":["public","void","setPattern","(","short","field_3_pattern",")","{","this",".","field_3_pattern","=","field_3_pattern",";"],"docstring_tokens":["Set","the","pattern","field","for","the","AreaFormat","record"],"prompt_tokens":[]}
{"code_tokens":["public","short","getFormatFlags","(",")","{","return","field_4_formatFlags",";"],"docstring_tokens":["Get","the","format","flags","field","for","the","AreaFormat","record"],"prompt_tokens":[]}
{"code_tokens":["public","void","setFormatFlags","(","short","field_4_formatFlags",")","{","this",".","field_4_formatFlags","=","field_4_formatFlags",";"],"docstring_tokens":["Set","the","format","flags","field","for","the","AreaFormat","record"],"prompt_tokens":[]}
{"code_tokens":["public","short","getForecolorIndex","(",")","{","return","field_5_forecolorIndex",";"],"docstring_tokens":["Get","the","forecolor","index","field","for","the","AreaFormat","record"],"prompt_tokens":[]}
{"code_tokens":["public","void","setForecolorIndex","(","short","field_5_forecolorIndex",")","{","this",".","field_5_forecolorIndex","=","field_5_forecolorIndex",";"],"docstring_tokens":["Set","the","forecolor","index","field","for","the","AreaFormat","record"],"prompt_tokens":[]}
{"code_tokens":["public","short","getBackcolorIndex","(",")","{","return","field_6_backcolorIndex",";"],"docstring_tokens":["Get","the","backcolor","index","field","for","the","AreaFormat","record"],"prompt_tokens":[]}
{"code_tokens":["public","void","setBackcolorIndex","(","short","field_6_backcolorIndex",")","{","this",".","field_6_backcolorIndex","=","field_6_backcolorIndex",";"],"docstring_tokens":["Set","the","backcolor","index","field","for","the","AreaFormat","record"],"prompt_tokens":[]}
{"code_tokens":["public","static","int","getEncodedSizeWithoutArrayData","(","Ptg[]","ptgs",")","{","int","result","=","0",";","for","(","Ptg","ptg",":","ptgs",")","{","if","(","ptg","instanceof","ArrayPtg",")","{","result","+=","ArrayPtg",".","PLAIN_TOKEN_SIZE",";","}","else","{","result","+=","ptg",".","getSize","(",")",";","}","}","return","result",";"],"docstring_tokens":["Used","to","calculate","value","that","should","be","encoded","at","the","start","of","the","encoded","Ptg","token","array;"],"prompt_tokens":[]}
{"code_tokens":["@Override\n","public","Iterator<XSLFShape>","iterator","(",")","{","return","_shapes",".","iterator","(",")",";"],"docstring_tokens":["Returns","an","iterator","over","the","shapes","in","this","sheet"],"prompt_tokens":[]}
{"code_tokens":["private","void","removeBorders","(","CellRangeAddress","range",")","{","Set<String>","properties","=","new","HashSet<>","(",")",";","properties",".","add","(","CellUtil",".","BORDER_TOP",")",";","properties",".","add","(","CellUtil",".","BORDER_BOTTOM",")",";","properties",".","add","(","CellUtil",".","BORDER_LEFT",")",";","properties",".","add","(","CellUtil",".","BORDER_RIGHT",")",";","for","(","int","row","=","range",".","getFirstRow","(",")",";","row","<=","range",".","getLastRow","(",")",";","row++",")","{","for","(","int","col","=","range",".","getFirstColumn","(",")",";","col","<=","range\n",".","getLastColumn","(",")",";","col++",")","{","removeProperties","(","row,","col,","properties",")",";","}","}","removeBorderColors","(","range",")",";"],"docstring_tokens":["Removes","all","border","properties","from","this","PropertyTemplate","for","the","specified","range"],"prompt_tokens":[]}
{"code_tokens":["private","void","addProperty","(","int","row,","int","col,","String","property,","short","value",")","{","addProperty","(","row,","col,","property,","Short",".","valueOf","(","value",")",")",";"],"docstring_tokens":["Adds","a","property","to","this","PropertyTemplate","for","a","given","cell"],"prompt_tokens":[]}
{"code_tokens":["private","void","removeProperties","(","int","row,","int","col,","Set<String>","properties",")","{","CellAddress","cell","=","new","CellAddress","(","row,","col",")",";","Map<String,","Object>","cellProperties","=","_propertyTemplate",".","get","(","cell",")",";","if","(","cellProperties","!=","null",")","{","cellProperties",".","keySet","(",")",".","removeAll","(","properties",")",";","if","(","cellProperties",".","isEmpty","(",")",")","{","_propertyTemplate",".","remove","(","cell",")",";","}","else","{","_propertyTemplate",".","put","(","cell,","cellProperties",")",";","}","}"],"docstring_tokens":["Removes","a","set","of","properties","from","this","PropertyTemplate","for","a","given","cell"],"prompt_tokens":[]}
{"code_tokens":["public","static","ChunkHeader","createChunkHeader","(","int","documentVersion,","byte[]","data,","int","offset",")","{","if","(","documentVersion",">=","6",")","{","ChunkHeaderV6","ch",";","if","(","documentVersion",">","6",")","{","ch","=","new","ChunkHeaderV11","(",")",";","}","else","{","ch","=","new","ChunkHeaderV6","(",")",";","}","ch",".","setType","(","(","int",")","LittleEndian",".","getUInt","(","data,","offset",")",")",";","ch",".","setId","(","(","int",")","LittleEndian",".","getUInt","(","data,","offset","+","4",")",")",";","ch",".","setUnknown1","(","(","int",")","LittleEndian",".","getUInt","(","data,","offset","+","8",")",")",";","ch",".","setLength","(","(","int",")","LittleEndian",".","getUInt","(","data,","offset","+","12",")",")",";","ch",".","setUnknown2","(","LittleEndian",".","getShort","(","data,","offset","+","16",")",")",";","ch",".","setUnknown3","(","LittleEndian",".","getUByte","(","data,","offset","+","18",")",")",";","\n\n","return","ch",";","}","else","if","(","documentVersion","==","5","||","documentVersion","==","4",")","{","ChunkHeaderV4V5","ch","=","new","ChunkHeaderV4V5","(",")",";","\n\n","ch",".","setType","(","LittleEndian",".","getShort","(","data,","offset",")",")",";","ch",".","setId","(","LittleEndian",".","getShort","(","data,","offset","+","2",")",")",";","ch",".","setUnknown2","(","LittleEndian",".","getUByte","(","data,","offset","+","4",")",")",";","ch",".","setUnknown3","(","LittleEndian",".","getUByte","(","data,","offset","+","5",")",")",";","ch",".","setUnknown1","(","LittleEndian",".","getShort","(","data,","offset","+","6",")",")",";","ch",".","setLength","(","Math",".","toIntExact","(","LittleEndian",".","getUInt","(","data,","offset","+","8",")",")",")",";","\n\n","return","ch",";","}","else","{","throw","new","OldVisioFormatException","(","\"Visio","files","with","versions","below","4","are","not","supported,","yours","was","\"","+","documentVersion",")",";","}"],"docstring_tokens":["Creates","the","appropriate","ChunkHeader","for","the","Chunk","Header","at","the","given","location,","for","the","given","document","version"],"prompt_tokens":[]}
{"code_tokens":["public","int","getIndentAt","(","int","offset",")","{","int","charsUntil","=","0",";","for","(","IndentProp","prop",":","indents",")","{","charsUntil","+=","prop",".","getCharactersCovered","(",")",";","if","(","offset","<","charsUntil",")","{","return","prop",".","getIndentLevel","(",")",";","}","}","return","-1",";"],"docstring_tokens":["Returns","the","indent","that","applies","at","the","given","text","offset"],"prompt_tokens":[]}
{"code_tokens":["private","CellFormatType","getCellFormatType","(","Matcher","matcher",")","{","String","fdesc","=","matcher",".","group","(","SPECIFICATION_GROUP",")",";","return","formatType","(","fdesc",")",";"],"docstring_tokens":["Returns","the","CellFormatType","object","implied","by","the","format","specification","for","the","format","part"],"prompt_tokens":[]}
{"code_tokens":["private","CellFormatter","getFormatter","(","Locale","locale,","Matcher","matcher",")","{","String","fdesc","=","matcher",".","group","(","SPECIFICATION_GROUP",")",";","\n\n","//","For","now,","we","don't","support","localised","currencies,","so","simplify","if","there\n","Matcher","currencyM","=","CURRENCY_PAT",".","matcher","(","fdesc",")",";","if","(","currencyM",".","find","(",")",")","{","String","currencyPart","=","currencyM",".","group","(","1",")",";","String","currencyRepl",";","if","(","currencyPart",".","startsWith","(","\"[$-\"",")",")","{","//","Default","$","in","a","different","locale\n","currencyRepl","=","\"$\"",";","}","else","if","(","!currencyPart",".","contains","(","\"-\"",")",")","{","//","Accounting","formats","such","as","USD","[$USD]\n","currencyRepl","=","currencyPart",".","substring","(","2,","currencyPart",".","indexOf","(","\"]\"",")",")",";","}","else","{","currencyRepl","=","currencyPart",".","substring","(","2,","currencyPart",".","lastIndexOf","(","'-'",")",")",";","}","fdesc","=","fdesc",".","replace","(","currencyPart,","currencyRepl",")",";","}","\n\n","//","Build","a","formatter","for","this","simplified","string\n","return","type",".","formatter","(","locale,","fdesc",")",";"],"docstring_tokens":["Returns","the","formatter","object","implied","by","the","format","specification","for","the","format","part"],"prompt_tokens":[]}
{"code_tokens":["public","CellFormatResult","apply","(","Object","value",")","{","boolean","applies","=","applies","(","value",")",";","String","text",";","Color","textColor",";","if","(","applies",")","{","text","=","format",".","format","(","value",")",";","textColor","=","color",";","}","else","{","text","=","format",".","simpleFormat","(","value",")",";","textColor","=","null",";","}","return","new","CellFormatResult","(","applies,","text,","textColor",")",";"],"docstring_tokens":["Apply","this","format","part","to","the","given","value"],"prompt_tokens":[]}
{"code_tokens":["public","CellFormatResult","apply","(","JLabel","label,","Object","value",")","{","CellFormatResult","result","=","apply","(","value",")",";","label",".","setText","(","result",".","text",")",";","if","(","result",".","textColor","!=","null",")","{","label",".","setForeground","(","result",".","textColor",")",";","}","return","result",";"],"docstring_tokens":["Apply","this","format","part","to","the","given","value,","applying","the","result","to","the","given","label"],"prompt_tokens":[]}
{"code_tokens":["boolean","hasCondition","(",")","{","return","condition","!=","null",";"],"docstring_tokens":["Returns","true","if","this","format","part","has","a","condition"],"prompt_tokens":[]}
{"code_tokens":["@Override\n","public","int","getFirstRowNum","(",")","{","return","_firstrow",";"],"docstring_tokens":["Gets","the","first","row","on","the","sheet"],"prompt_tokens":[]}
{"code_tokens":["@Override\n","public","void","addValidationData","(","DataValidation","dataValidation",")","{","if","(","dataValidation","==","null",")","{","throw","new","IllegalArgumentException","(","\"objValidation","must","not","be","null\"",")",";","}","HSSFDataValidation","hssfDataValidation","=","(","HSSFDataValidation",")","dataValidation",";","DataValidityTable","dvt","=","_sheet",".","getOrCreateDataValidityTable","(",")",";","\n\n","DVRecord","dvRecord","=","hssfDataValidation",".","createDVRecord","(","this",")",";","dvt",".","addDataValidation","(","dvRecord",")",";"],"docstring_tokens":["Creates","a","data","validation","object"],"prompt_tokens":[]}
{"code_tokens":["@Override\n","public","int","addMergedRegion","(","CellRangeAddress","region",")","{","return","addMergedRegion","(","region,","true",")",";"],"docstring_tokens":["Adds","a","merged","region","of","cells","on","a","sheet"],"prompt_tokens":[]}
{"code_tokens":["@Override\n","public","void","setVerticallyCenter","(","boolean","value",")","{","_sheet",".","getPageSettings","(",")",".","getVCenter","(",")",".","setVCenter","(","value",")",";"],"docstring_tokens":["determines","whether","the","output","is","vertically","centered","on","the","page"],"prompt_tokens":[]}
{"code_tokens":["@Override\n","public","void","setHorizontallyCenter","(","boolean","value",")","{","_sheet",".","getPageSettings","(",")",".","getHCenter","(",")",".","setHCenter","(","value",")",";"],"docstring_tokens":["determines","whether","the","output","is","horizontally","centered","on","the","page"],"prompt_tokens":[]}
{"code_tokens":["@Override\n","public","boolean","isRightToLeft","(",")","{","return","_sheet",".","getWindowTwo","(",")",".","getArabic","(",")",";"],"docstring_tokens":["Whether","the","text","is","displayed","in","right-to-left","mode","in","the","window"],"prompt_tokens":[]}
{"code_tokens":["@Internal\n","public","InternalSheet","getSheet","(",")","{","return","_sheet",";"],"docstring_tokens":["used","internally","in","the","API","to","get","the","low","level","Sheet","record","represented","by","this","Object"],"prompt_tokens":[]}
{"code_tokens":["public","void","setAlternativeExpression","(","boolean","b",")","{","WSBoolRecord","record","=\n","(","WSBoolRecord",")","_sheet",".","findFirstRecordBySid","(","WSBoolRecord",".","sid",")",";","\n\n","record",".","setAlternateExpression","(","b",")",";"],"docstring_tokens":["whether","alternate","expression","evaluation","is","on"],"prompt_tokens":[]}
{"code_tokens":["@Override\n","public","void","setSelected","(","boolean","sel",")","{","getSheet","(",")",".","getWindowTwo","(",")",".","setSelected","(","sel",")",";"],"docstring_tokens":["Sets","whether","sheet","is","selected"],"prompt_tokens":[]}
{"code_tokens":["@Override\n","public","boolean","getProtect","(",")","{","return","getProtectionBlock","(",")",".","isSheetProtected","(",")",";"],"docstring_tokens":["Answer","whether","protection","is","enabled","or","disabled"],"prompt_tokens":[]}
{"code_tokens":["@Override\n","public","boolean","getScenarioProtect","(",")","{","return","getProtectionBlock","(",")",".","isScenarioProtected","(",")",";"],"docstring_tokens":["Answer","whether","scenario","protection","is","enabled","or","disabled"],"prompt_tokens":[]}
{"code_tokens":["@Override\n","public","void","protectSheet","(","String","password",")","{","getProtectionBlock","(",")",".","protectSheet","(","password,","true,","true",")",";","//protect","objs&scenarios","(","normal",")"],"docstring_tokens":["Sets","the","protection","enabled","as","well","as","the","password"],"prompt_tokens":[]}
{"code_tokens":["private","void","showInPane","(","short","toprow,","short","leftcol",")","{","_sheet",".","setTopRow","(","toprow",")",";","_sheet",".","setLeftCol","(","leftcol",")",";"],"docstring_tokens":["Sets","desktop","window","pane","display","area,","when","the","file","is","first","opened","in","a","viewer"],"prompt_tokens":[]}
{"code_tokens":["@Override\n","public","void","removeRowBreak","(","int","row",")","{","_sheet",".","getPageSettings","(",")",".","removeRowBreak","(","row",")",";"],"docstring_tokens":["Removes","the","page","break","at","the","indicated","row"],"prompt_tokens":[]}
{"code_tokens":["public","void","dumpDrawingRecords","(","boolean","fat,","PrintWriter","pw",")","{","_sheet",".","aggregateDrawingRecords","(","_book",".","getDrawingManager","(",")",",","false",")",";","\n\n","EscherAggregate","r","=","(","EscherAggregate",")","getSheet","(",")",".","findFirstRecordBySid","(","EscherAggregate",".","sid",")",";","List<EscherRecord>","escherRecords","=","r",".","getEscherRecords","(",")",";","for","(","EscherRecord","escherRecord",":","escherRecords",")","{","if","(","fat",")","{","pw",".","println","(","escherRecord",")",";","}","else","{","escherRecord",".","display","(","pw,","0",")",";","}","}","pw",".","flush","(",")",";"],"docstring_tokens":["Aggregates","the","drawing","records","and","dumps","the","escher","record","hierarchy","to","the","standard","output"],"prompt_tokens":[]}
{"code_tokens":["public","EscherAggregate","getDrawingEscherAggregate","(",")","{","_book",".","findDrawingGroup","(",")",";","\n\n","//","If","there's","now","no","drawing","manager,","then","there's\n","//","no","drawing","escher","records","on","the","workbook\n","if","(","_book",".","getDrawingManager","(",")","==","null",")","{","return","null",";","}","\n\n","int","found","=","_sheet",".","aggregateDrawingRecords","(","_book",".","getDrawingManager","(",")",",","false\n",")",";","if","(","found","==","-1",")","{","//","Workbook","has","drawing","stuff,","but","this","sheet","doesn't\n","return","null",";","}","\n\n","//","Grab","our","aggregate","record,","and","wire","it","up\n","return","(","EscherAggregate",")","_sheet",".","findFirstRecordBySid","(","EscherAggregate",".","sid",")",";"],"docstring_tokens":["Returns","the","agregate","escher","records","for","this","sheet,","it","there","is","one"],"prompt_tokens":[]}
{"code_tokens":["@Override\n","public","HSSFPatriarch","getDrawingPatriarch","(",")","{","_patriarch","=","getPatriarch","(","false",")",";","return","_patriarch",";"],"docstring_tokens":["This","will","hold","any","graphics","or","charts","for","the","sheet"],"prompt_tokens":[]}
{"code_tokens":["@Override\n","public","void","groupColumn","(","int","fromColumn,","int","toColumn",")","{","_sheet",".","groupColumnRange","(","fromColumn,","toColumn,","true",")",";"],"docstring_tokens":["Create","an","outline","for","the","provided","column","range"],"prompt_tokens":[]}
{"code_tokens":["@Override\n","public","void","groupRow","(","int","fromRow,","int","toRow",")","{","_sheet",".","groupRowRange","(","fromRow,","toRow,","true",")",";"],"docstring_tokens":["Tie","a","range","of","cell","together","so","that","they","can","be","collapsed","or","expanded"],"prompt_tokens":[]}
{"code_tokens":["@Override\n","public","HSSFComment","getCellComment","(","CellAddress","ref",")","{","return","findCellComment","(","ref",".","getRow","(",")",",","ref",".","getColumn","(",")",")",";"],"docstring_tokens":["Returns","cell","comment","for","the","specified","row","and","column"],"prompt_tokens":[]}
{"code_tokens":["@Override\n","public","HSSFHyperlink","getHyperlink","(","int","row,","int","column",")","{","for","(","RecordBase","rec",":","_sheet",".","getRecords","(",")",")","{","if","(","rec","instanceof","HyperlinkRecord",")","{","HyperlinkRecord","link","=","(","HyperlinkRecord",")","rec",";","if","(","link",".","getFirstColumn","(",")","==","column","&&","link",".","getFirstRow","(",")","==","row",")","{","return","new","HSSFHyperlink","(","link",")",";","}","}","}","return","null",";"],"docstring_tokens":["Get","a","Hyperlink","in","this","sheet","anchored","at","row,","column"],"prompt_tokens":[]}
{"code_tokens":["public","void","walkEscherDDF","(","int","indent,","int","pos,","int","len",")","{","if","(","len","<","8",")","{","return",";","}","\n\n","final","String","ind","=","(","indent","==","0",")","?","\"%1$s\"",":","\"%1$\"","+","indent","+","\"s\"",";","\n\n","byte[]","contents","=","IOUtils",".","safelyClone","(","docstream,","pos,","len,","MAX_RECORD_LENGTH",")",";","DefaultEscherRecordFactory","erf","=","new","HSLFEscherRecordFactory","(",")",";","EscherRecord","record","=","erf",".","createRecord","(","contents,","0",")",";","\n\n","//","For","now,","try","filling","in","the","fields\n","record",".","fillFields","(","contents,","0,","erf",")",";","\n\n","long","atomType","=","LittleEndian",".","getUShort","(","contents,","2",")",";","//","This","lacks","the","8","byte","header","size\n","long","atomLen","=","LittleEndian",".","getUShort","(","contents,","4",")",";","//","This","(","should",")","include","the","8","byte","header","size\n","int","recordLen","=","record",".","getRecordSize","(",")",";","\n\n","String","fmt","=","ind","+","\"At","position","%2$d","(","%2$04x",")",":","type","is","%3$d","(","%3$04x",")",",","len","is","%4$d","(","%4$04x",")","(","%5$d",")","-","record","claims","%6$d\"",";","out",".","println","(","String",".","format","(","Locale",".","ROOT,","fmt,","\"\",","pos,","atomType,","atomLen,","atomLen","+","8,","recordLen",")",")",";","\n\n\n","//","Check","for","corrupt","/","lying","ones\n","if","(","recordLen","!=","8","&&","(","recordLen","!=","(","atomLen","+","8",")",")",")","{","out",".","println","(","String",".","format","(","Locale",".","ROOT,","ind","+","\"**","Atom","length","of","$2d","(","$3d",")","doesn't","match","record","length","of","%4d\",","\"\",","atomLen,","atomLen","+","8,","recordLen",")",")",";","}","\n\n","//","Print","the","record's","details\n","String","recordStr","=","record",".","toString","(",")",".","replace","(","\"\\n\",","String",".","format","(","Locale",".","ROOT,","\"\\n\"","+","ind,","\"\"",")",")",";","out",".","println","(","String",".","format","(","Locale",".","ROOT,","ind","+","\"%2$s\",","\"\",","recordStr",")",")",";","\n\n","if","(","record","instanceof","EscherContainerRecord",")","{","walkEscherDDF","(","(","indent","+","3",")",",","pos","+","8,","(","int",")","atomLen",")",";","}","\n\n","//","Handle","records","that","seem","to","lie\n","if","(","atomType","==","61451L",")","{","//","Normally","claims","a","size","of","8\n","recordLen","=","(","int",")","atomLen","+","8",";","}","if","(","atomType","==","61453L",")","{","//","Returns","EscherContainerRecord,","but","really","msofbtClientTextbox\n","recordLen","=","(","int",")","atomLen","+","8",";","record",".","fillFields","(","contents,","0,","erf",")",";","if","(","!","(","record","instanceof","EscherTextboxRecord",")",")","{","out",".","println","(","String",".","format","(","Locale",".","ROOT,","ind","+","\"%2$s\",","\"\",","\"**","Really","a","msofbtClientTextbox","!\"",")",")",";","}","}","\n\n","//","Decide","on","what","to","do,","based","on","how","the","lengths","match","up\n","if","(","recordLen","==","8","&&","atomLen",">","8",")","{","//","Assume","it","has","children,","rather","than","being","corrupted\n","walkEscherDDF","(","(","indent","+","3",")",",","pos","+","8,","(","int",")","atomLen",")",";","\n\n","//","Wind","on","our","length","+","our","header\n","pos","+=","atomLen",";","pos","+=","8",";","len","-=","atomLen",";","len","-=","8",";","}","else","{","//","No","children,","wind","on","our","real","length\n","pos","+=","atomLen",";","pos","+=","8",";","len","-=","atomLen",";","len","-=","8",";","}","\n\n","//","Move","on","to","the","next","one,","if","we're","not","at","the","end","yet\n","if","(","len",">=","8",")","{","walkEscherDDF","(","indent,","pos,","len",")",";","}"],"docstring_tokens":["Use","the","DDF","code","to","walk","the","Escher","records"],"prompt_tokens":[]}
{"code_tokens":["protected","int","readHeader","(","byte[]","data,","int","offset",")","{","_options","=","LittleEndian",".","getShort","(","data,","offset",")",";","_recordId","=","LittleEndian",".","getShort","(","data,","offset","+","2",")",";","return","LittleEndian",".","getInt","(","data,","offset","+","4",")",";"],"docstring_tokens":["Reads","the","8","byte","header","information","and","populates","the","options","and","recordId","records"],"prompt_tokens":[]}
{"code_tokens":["public","byte[]","serialize","(",")","{","byte[]","retval","=","new","byte[getRecordSize","(",")","]",";","\n\n","serialize","(","0,","retval",")",";","return","retval",";"],"docstring_tokens":["Serializes","to","a","new","byte","array"],"prompt_tokens":[]}
{"code_tokens":["public","void","display","(","PrintWriter","w,","int","indent",")","{","for","(","int","i","=","0",";","i","<","indent","*","4",";","i++",")","{","w",".","print","(","'","'",")",";","}","w",".","println","(","getRecordName","(",")",")",";"],"docstring_tokens":["The","display","methods","allows","escher","variables","to","print","the","record","names","according","to","their","hierarchy"],"prompt_tokens":[]}
{"code_tokens":["public","short","getInstance","(",")","{","return","fInstance",".","getShortValue","(","_options",")",";"],"docstring_tokens":["Returns","the","instance","part","of","the","option","record"],"prompt_tokens":[]}
{"code_tokens":["public","void","setInstance","(","short","value",")","{","_options","=","fInstance",".","setShortValue","(","_options,","value",")",";"],"docstring_tokens":["Sets","the","instance","part","of","record"],"prompt_tokens":[]}
{"code_tokens":["public","short","getVersion","(",")","{","return","fVersion",".","getShortValue","(","_options",")",";"],"docstring_tokens":["Returns","the","version","part","of","the","option","record"],"prompt_tokens":[]}
{"code_tokens":["public","void","setVersion","(","short","value",")","{","_options","=","fVersion",".","setShortValue","(","_options,","value",")",";"],"docstring_tokens":["Sets","the","version","part","of","record"],"prompt_tokens":[]}
{"code_tokens":["public","static","Dimension","getDimensionFromAnchor","(","Picture","picture",")","{","ClientAnchor","anchor","=","picture",".","getClientAnchor","(",")",";","boolean","isHSSF","=","(","anchor","instanceof","HSSFClientAnchor",")",";","Sheet","sheet","=","picture",".","getSheet","(",")",";","\n\n","//","default","to","image","size","(","in","pixel",")",",","if","the","anchor","is","only","specified","for","Col1/Row1\n","Dimension","imgSize","=","null",";","if","(","anchor",".","getCol2","(",")","<","anchor",".","getCol1","(",")","||","anchor",".","getRow2","(",")","<","anchor",".","getRow1","(",")",")","{","PictureData","data","=","picture",".","getPictureData","(",")",";","imgSize","=","getImageDimension","(","new","UnsynchronizedByteArrayInputStream","(","data",".","getData","(",")",")",",","data",".","getPictureType","(",")",")",";","}","\n\n","int","w","=","getDimFromCell","(","imgSize","==","null","?","0",":","imgSize",".","getWidth","(",")",",","anchor",".","getCol1","(",")",",","anchor",".","getDx1","(",")",",","anchor",".","getCol2","(",")",",","anchor",".","getDx2","(",")",",\n","isHSSF","?","WIDTH_UNITS",":","0,","sheet::getColumnWidthInPixels",")",";","\n\n","int","h","=","getDimFromCell","(","imgSize","==","null","?","0",":","imgSize",".","getHeight","(",")",",","anchor",".","getRow1","(",")",",","anchor",".","getDy1","(",")",",","anchor",".","getRow2","(",")",",","anchor",".","getDy2","(",")",",\n","isHSSF","?","HEIGHT_UNITS",":","0,","(","row",")","->","getRowHeightInPixels","(","sheet,","row",")",")",";","\n\n","return","new","Dimension","(","w,","h",")",";"],"docstring_tokens":["Calculates","the","dimensions","in","EMUs","for","the","anchor","of","the","given","picture"],"prompt_tokens":[]}
{"code_tokens":["@Override\n","public","void","updateOtherRecordReferences","(","Map<Integer,Integer>","oldToNewReferencesLookup",")","{","//","Look","up","the","new","positions","of","our","preceding","UserEditAtomOffset\n","if","(","lastUserEditAtomOffset","!=","0",")","{","Integer","newLocation","=","oldToNewReferencesLookup",".","get","(","Integer",".","valueOf","(","lastUserEditAtomOffset",")",")",";","if","(","newLocation","==","null",")","{","throw","new","HSLFException","(","\"Couldn't","find","the","new","location","of","the","UserEditAtom","that","used","to","be","at","\"","+","lastUserEditAtomOffset",")",";","}","lastUserEditAtomOffset","=","newLocation",".","intValue","(",")",";","}","\n\n","//","Ditto","for","our","PersistPtr\n","Integer","newLocation","=","oldToNewReferencesLookup",".","get","(","Integer",".","valueOf","(","persistPointersOffset",")",")",";","if","(","newLocation","==","null",")","{","throw","new","HSLFException","(","\"Couldn't","find","the","new","location","of","the","PersistPtr","that","used","to","be","at","\"","+","persistPointersOffset",")",";","}","persistPointersOffset","=","newLocation",".","intValue","(",")",";"],"docstring_tokens":["At","write-out","time,","update","the","references","to","PersistPtrs","and","other","UserEditAtoms","to","point","to","their","new","positions"],"prompt_tokens":[]}
{"code_tokens":["private","static","void","confirmCycleErrorCode","(","CellValue","cellValue",")","{","assertSame","(","CellType",".","ERROR,","cellValue",".","getCellType","(",")",")",";","assertEquals","(","ErrorEval",".","CIRCULAR_REF_ERROR",".","getErrorCode","(",")",",","cellValue",".","getErrorValue","(",")",")",";"],"docstring_tokens":["Makes","sure","that","the","specified","evaluated","cell","value","represents","a","circular","reference","error"],"prompt_tokens":[]}
{"code_tokens":["private","void","updateFormula","(","XSSFCell","cell,","String","oldName,","String","newName",")","{","CTCellFormula","f","=","cell",".","getCTCell","(",")",".","getF","(",")",";","if","(","f","!=","null",")","{","String","formula","=","f",".","getStringValue","(",")",";","if","(","formula","!=","null","&&","formula",".","length","(",")",">","0",")","{","int","sheetIndex","=","_wb",".","getSheetIndex","(","cell",".","getSheet","(",")",")",";","Ptg[]","ptgs","=","FormulaParser",".","parse","(","formula,","_fpwb,","FormulaType",".","CELL,","sheetIndex,","cell",".","getRowIndex","(",")",")",";","for","(","Ptg","ptg",":","ptgs",")","{","updatePtg","(","ptg,","oldName,","newName",")",";","}","String","updatedFormula","=","FormulaRenderer",".","toFormulaString","(","_fpwb,","ptgs",")",";","if","(","!formula",".","equals","(","updatedFormula",")",")","{","f",".","setStringValue","(","updatedFormula",")",";","}","}","}"],"docstring_tokens":["Parse","cell","formula","and","re-assemble","it","back","using","the","new","sheet","name"],"prompt_tokens":[]}
{"code_tokens":["private","void","updateName","(","XSSFName","name,","String","oldName,","String","newName",")","{","String","formula","=","name",".","getRefersToFormula","(",")",";","if","(","formula","!=","null",")","{","int","sheetIndex","=","name",".","getSheetIndex","(",")",";","int","rowIndex","=","-1",";","//don't","care\n","Ptg[]","ptgs","=","FormulaParser",".","parse","(","formula,","_fpwb,","FormulaType",".","NAMEDRANGE,","sheetIndex,","rowIndex",")",";","for","(","Ptg","ptg",":","ptgs",")","{","updatePtg","(","ptg,","oldName,","newName",")",";","}","String","updatedFormula","=","FormulaRenderer",".","toFormulaString","(","_fpwb,","ptgs",")",";","if","(","!formula",".","equals","(","updatedFormula",")",")","{","name",".","setRefersToFormula","(","updatedFormula",")",";","}","}"],"docstring_tokens":["Parse","formula","in","the","named","range","and","re-assemble","it","back","using","the","new","sheet","name"],"prompt_tokens":[]}
{"code_tokens":["private","void","updateDomSheetReference","(","Node","dom,","final","String","oldName,","final","String","newName",")","{","String","value","=","dom",".","getNodeValue","(",")",";","if","(","value","!=","null",")","{","//","make","sure","the","value","contains","the","old","sheet","and","not","a","similar","sheet\n","//","(","ex:","Valid:","'Sheet1'!","or","Sheet1!",";","NotValid:","'Sheet1Test'!","or","Sheet1Test!",")","if","(","value",".","contains","(","oldName+\"!\"",")","||","value",".","contains","(","oldName+\"'!\"",")",")","{","XSSFName","temporary","=","_wb",".","createName","(",")",";","temporary",".","setRefersToFormula","(","value",")",";","updateName","(","temporary,","oldName,","newName",")",";","dom",".","setNodeValue","(","temporary",".","getRefersToFormula","(",")",")",";","_wb",".","removeName","(","temporary",")",";","}","}","NodeList","nl","=","dom",".","getChildNodes","(",")",";","for","(","int","i","=","0",";","i","<","nl",".","getLength","(",")",";","i++",")","{","updateDomSheetReference","(","nl",".","item","(","i",")",",","oldName,","newName",")",";","}"],"docstring_tokens":["Parse","the","DOM","tree","recursively","searching","for","text","containing","reference","to","the","old","sheet","name","and","replacing","it"],"prompt_tokens":[]}
{"code_tokens":["public","Integer","getFileNameIndex","(","POIXMLDocumentPart","part",")","{","String","regex","=","_defaultName",".","replace","(","\"#\",","\"","(","\\\\d+",")","\"",")",";","return","Integer",".","valueOf","(","part",".","getPackagePart","(",")",".","getPartName","(",")",".","getName","(",")",".","replaceAll","(","regex,","\"$1\"",")",")",";"],"docstring_tokens":["Returns","the","index","of","the","filename","within","the","package","for","the","given","part"],"prompt_tokens":[]}
{"code_tokens":["@Internal\n","public","void","setBx","(","byte","value",")","{","field_6_flags","=","(","short",")","bx",".","setValue","(","field_6_flags,","value",")",";"],"docstring_tokens":["Sets","the","bx","field","value"],"prompt_tokens":[]}
{"code_tokens":["@Internal\n","public","void","setBy","(","byte","value",")","{","field_6_flags","=","(","short",")","by",".","setValue","(","field_6_flags,","value",")",";"],"docstring_tokens":["Sets","the","by","field","value"],"prompt_tokens":[]}
{"code_tokens":["@Internal\n","public","void","setWr","(","byte","value",")","{","field_6_flags","=","(","short",")","wr",".","setValue","(","field_6_flags,","value",")",";"],"docstring_tokens":["Sets","the","wr","field","value"],"prompt_tokens":[]}
{"code_tokens":["protected","ByteBuffer","getBlockAt","(","final","int","offset",")","throws","IOException","{","//","Which","big","block","is","this?\n","int","byteOffset","=","offset","*","POIFSConstants",".","SMALL_BLOCK_SIZE",";","int","bigBlockNumber","=","byteOffset","/","_filesystem",".","getBigBlockSize","(",")",";","int","bigBlockOffset","=","byteOffset","%","_filesystem",".","getBigBlockSize","(",")",";","\n\n","//","Now","locate","the","data","block","for","it\n","Iterator<Integer>","it","=","_mini_stream",".","getBlockOffsetIterator","(",")",";","for","(","int","i","=","0",";","i","<","bigBlockNumber",";","i++",")","{","it",".","next","(",")",";","}","\n\n","ByteBuffer","dataBlock","=","_filesystem",".","getBlockAt","(","it",".","next","(",")",")",";","assert","(","dataBlock","!=","null",")",";","\n\n","//","Position","ourselves,","and","take","a","slice\n","dataBlock",".","position","(","dataBlock",".","position","(",")","+","bigBlockOffset\n",")",";","ByteBuffer","miniBuffer","=","dataBlock",".","slice","(",")",";","miniBuffer",".","limit","(","POIFSConstants",".","SMALL_BLOCK_SIZE",")",";","return","miniBuffer",";"],"docstring_tokens":["Load","the","block","at","the","given","offset"],"prompt_tokens":[]}
{"code_tokens":["public","static","SummaryInformation","newSummaryInformation","(",")","{","return","new","SummaryInformation","(",")",";"],"docstring_tokens":["Creates","a","new","summary","information"],"prompt_tokens":[]}
{"code_tokens":["public","static","DocumentSummaryInformation","newDocumentSummaryInformation","(",")","{","return","new","DocumentSummaryInformation","(",")",";"],"docstring_tokens":["Creates","a","new","document","summary","information"],"prompt_tokens":[]}
{"code_tokens":["public","static","File","getDirectory","(","File","f",")","{","if","(","f","!=","null",")","{","String","path","=","f",".","getPath","(",")",";","int","num2","=","path",".","length","(",")",";","while","(","--num2",">=","0",")","{","char","ch1","=","path",".","charAt","(","num2",")",";","if","(","ch1","==","File",".","separatorChar",")","{","return","new","File","(","path",".","substring","(","0,","num2",")",")",";","}","}","}","return","null",";"],"docstring_tokens":["Get","the","directory","part","of","the","specified","file","path"],"prompt_tokens":[]}
{"code_tokens":["public","static","String","getFilename","(","File","file",")","{","if","(","file","!=","null",")","{","String","path","=","file",".","getPath","(",")",";","int","len","=","path",".","length","(",")",";","int","num2","=","len",";","while","(","--num2",">=","0",")","{","char","ch1","=","path",".","charAt","(","num2",")",";","if","(","ch1","==","File",".","separatorChar",")","return","path",".","substring","(","num2","+","1,","len",")",";","}","}","return","\"\"",";"],"docstring_tokens":["Get","file","name","from","the","specified","File","object"],"prompt_tokens":[]}
{"code_tokens":["private","void","cacheExternalWorkbookCells","(","EvaluationCell","evalCell",")","{","//\n","Ptg[]","formulaTokens","=","getEvaluationWorkbook","(",")",".","getFormulaTokens","(","evalCell",")",";","for","(","Ptg","ptg",":","formulaTokens",")","{","if","(","ptg","instanceof","Area3DPxg",")","{","Area3DPxg","area3DPxg","=","(","Area3DPxg",")","ptg",";","if","(","area3DPxg",".","getExternalWorkbookNumber","(",")",">","0",")","{","EvaluationWorkbook",".","ExternalSheet","externalSheet","=","getEvaluationWorkbook","(",")",".","getExternalSheet","(","area3DPxg",".","getSheetName","(",")",",","area3DPxg",".","getLastSheetName","(",")",",","area3DPxg",".","getExternalWorkbookNumber","(",")",")",";","\n\n","XSSFCell","xssfCell","=","(","(","XSSFEvaluationCell",")","evalCell",")",".","getXSSFCell","(",")",";","XSSFWorkbook","externalWorkbook","=","(","XSSFWorkbook",")","xssfCell",".","getSheet","(",")",".","getWorkbook","(",")",".","getCreationHelper","(",")",".","getReferencedWorkbooks","(",")",".","get","(","externalSheet",".","getWorkbookName","(",")",")",";","ExternalLinksTable","externalLinksTable","=","xssfCell",".","getSheet","(",")",".","getWorkbook","(",")",".","getExternalLinksTable","(",")",".","get","(","area3DPxg",".","getExternalWorkbookNumber","(",")","-","1",")",";","\n\n","int","firstSheet","=","externalWorkbook",".","getSheetIndex","(","area3DPxg",".","getSheetName","(",")",")",";","int","lastSheet","=","firstSheet",";","if","(","area3DPxg",".","getLastSheetName","(",")","!=","null",")","{","lastSheet","=","externalWorkbook",".","getSheetIndex","(","area3DPxg",".","getLastSheetName","(",")",")",";","}","\n\n","for","(","int","sheetIndex","=","firstSheet",";","sheetIndex","<=","lastSheet",";","sheetIndex++",")","{","XSSFSheet","sheet","=","externalWorkbook",".","getSheetAt","(","sheetIndex",")",";","int","firstRow","=","area3DPxg",".","getFirstRow","(",")",";","int","lastRow","=","area3DPxg",".","getLastRow","(",")",";","for","(","int","rowIndex","=","firstRow",";","rowIndex","<=","lastRow",";","rowIndex++",")","{","XSSFRow","row","=","sheet",".","getRow","(","rowIndex",")",";","int","firstColumn","=","area3DPxg",".","getFirstColumn","(",")",";","int","lastColumn","=","area3DPxg",".","getLastColumn","(",")",";","for","(","int","cellIndex","=","firstColumn",";","cellIndex","<=","lastColumn",";","cellIndex++",")","{","XSSFCell","cell","=","row",".","getCell","(","cellIndex",")",";","String","cellValue","=","cell",".","getRawValue","(",")",";","String","cellR","=","new","CellReference","(","cell",")",".","formatAsString","(","false",")",";","externalLinksTable",".","cacheData","(","sheet",".","getSheetName","(",")",",","(","long",")","rowIndex","+","1,","cellR,","cellValue",")",";","}","}","\n\n","}","}","\n\n","}","}"],"docstring_tokens":["cache","cell","value","of","external","workbook"],"prompt_tokens":[]}
{"code_tokens":["public","boolean","isBold","(",")","{","return","fontFormatting",".","isFontWeightModified","(",")","&&","fontFormatting",".","isBold","(",")",";"],"docstring_tokens":["get","whether","the","font","weight","is","set","to","bold","or","not"],"prompt_tokens":[]}
{"code_tokens":["@Override\n","public","boolean","markSupported","(",")","{","return","true",";"],"docstring_tokens":["Tests","if","this","input","stream","supports","the","mark","and","reset","methods"],"prompt_tokens":[]}
{"code_tokens":["public","void","demonstrateMethodCalls","(","String","outputFilename",")","{","try","(","HSSFWorkbook","workbook","=","new","HSSFWorkbook","(",")",")","{","HSSFSheet","sheet","=","workbook",".","createSheet","(","\"In","Cell","Lists\"",")",";","HSSFRow","row","=","sheet",".","createRow","(","0",")",";","\n\n","//","Create","a","cell","at","A1","and","insert","a","single,","bulleted,","item","into\n","//","that","cell",".","HSSFCell","cell","=","row",".","createCell","(","0",")",";","this",".","bulletedItemInCell","(","workbook,","\"List","Item\",","cell",")",";","\n\n","//","Create","a","cell","at","A2","and","insert","a","plain","list","-","that","is","one\n","//","whose","items","are","neither","bulleted","or","numbered","-","into","that","cell",".","row","=","sheet",".","createRow","(","1",")",";","cell","=","row",".","createCell","(","0",")",";","List<String>","listItems","=","new","ArrayList<>","(",")",";","listItems",".","add","(","\"List","Item","One",".","\"",")",";","listItems",".","add","(","\"List","Item","Two",".","\"",")",";","listItems",".","add","(","\"List","Item","Three",".","\"",")",";","listItems",".","add","(","\"List","Item","Four",".","\"",")",";","this",".","listInCell","(","workbook,","listItems,","cell",")",";","//","The","row","height","and","cell","width","are","set","here","to","ensure","that","the\n","//","list","may","be","seen",".","row",".","setHeight","(","(","short",")","1100",")",";","sheet",".","setColumnWidth","(","0,","9500",")",";","\n\n","//","Create","a","cell","at","A3","and","insert","a","numbered","list","into","that","cell",".","//","Note","that","a","couple","of","items","have","been","added","to","the","listItems\n","//","ArrayList\n","row","=","sheet",".","createRow","(","2",")",";","cell","=","row",".","createCell","(","0",")",";","listItems",".","add","(","\"List","Item","Five",".","\"",")",";","listItems",".","add","(","\"List","Item","Six",".","\"",")",";","this",".","numberedListInCell","(","workbook,","listItems,","cell,","1,","2",")",";","row",".","setHeight","(","(","short",")","1550",")",";","\n\n","//","Create","a","cell","at","A4","and","insert","a","numbered","list","into","that","cell",".","//","Note","that","a","couple","of","items","have","been","added","to","the","listItems\n","//","ArrayList\n","row","=","sheet",".","createRow","(","3",")",";","cell","=","row",".","createCell","(","0",")",";","listItems",".","add","(","\"List","Item","Seven",".","\"",")",";","listItems",".","add","(","\"List","Item","Eight",".","\"",")",";","listItems",".","add","(","\"List","Item","Nine",".","\"",")",";","listItems",".","add","(","\"List","Item","Ten",".","\"",")",";","this",".","bulletedListInCell","(","workbook,","listItems,","cell",")",";","row",".","setHeight","(","(","short",")","2550",")",";","\n\n","//","Insert","a","plain,","multi-level","list","into","cell","A5",".","Note","that\n","//","the","major","difference","here","is","that","the","list","items","are","passed","as\n","//","an","ArrayList","of","MultiLevelListItems",".","Note","that","an","ArrayList\n","//","of","instances","of","an","inner","class","was","used","here","in","preference","to\n","//","a","Hashtable","or","HashMap","as","the","ArrayList","will","preserve","the\n","//","ordering","of","the","items","added","to","it",";","the","first","item","added","will\n","//","be","the","first","item","recovered","and","the","last","item","added,","the","last\n","//","item","recovered",".","Alternatively,","a","LinkedHashMap","could","be","used\n","//","to","preserve","order",".","row","=","sheet",".","createRow","(","4",")",";","cell","=","row",".","createCell","(","0",")",";","List<MultiLevelListItem>","multiLevelListItems","=","new","ArrayList<>","(",")",";","listItems","=","new","ArrayList<>","(",")",";","listItems",".","add","(","\"ML","List","Item","One","-","Sub","Item","One",".","\"",")",";","listItems",".","add","(","\"ML","List","Item","One","-","Sub","Item","Two",".","\"",")",";","listItems",".","add","(","\"ML","List","Item","One","-","Sub","Item","Three",".","\"",")",";","listItems",".","add","(","\"ML","List","Item","One","-","Sub","Item","Four",".","\"",")",";","multiLevelListItems",".","add","(","new","MultiLevelListItem","(","\"List","Item","One",".","\",","listItems",")",")",";","//","Passing","either","null","or","an","empty","ArrayList","will","signal","that\n","//","there","are","no","lower","level","items","associated","with","the","top","level\n","//","item\n","multiLevelListItems",".","add","(","new","MultiLevelListItem","(","\"List","Item","Two",".","\",","null",")",")",";","multiLevelListItems",".","add","(","new","MultiLevelListItem","(","\"List","Item","Three",".","\",","null",")",")",";","listItems","=","new","ArrayList<>","(",")",";","listItems",".","add","(","\"ML","List","Item","Four","-","Sub","Item","One",".","\"",")",";","listItems",".","add","(","\"ML","List","Item","Four","-","Sub","Item","Two",".","\"",")",";","listItems",".","add","(","\"ML","List","Item","Four","-","Sub","Item","Three",".","\"",")",";","multiLevelListItems",".","add","(","new","MultiLevelListItem","(","\"List","Item","Four",".","\",","listItems",")",")",";","this",".","multiLevelListInCell","(","workbook,","multiLevelListItems,","cell",")",";","row",".","setHeight","(","(","short",")","2800",")",";","\n\n","//","Insert","a","numbered","multi-level","list","into","cell","A6",".","Note","that","the\n","//","same","ArrayList","as","constructed","for","the","above","plain","multi-level\n","//","list","example","will","be","re-used\n","row","=","sheet",".","createRow","(","5",")",";","cell","=","row",".","createCell","(","0",")",";","this",".","multiLevelNumberedListInCell","(","workbook,","multiLevelListItems,\n","cell,","1,","1,","1,","2",")",";","row",".","setHeight","(","(","short",")","2800",")",";","\n\n","//","Insert","a","numbered","multi-level","list","into","cell","A7",".","Note","that","the\n","//","same","ArrayList","as","constructed","for","the","plain","multi-level","list\n","//","example","will","be","re-used\n","row","=","sheet",".","createRow","(","6",")",";","cell","=","row",".","createCell","(","0",")",";","this",".","multiLevelBulletedListInCell","(","workbook,","multiLevelListItems,","cell",")",";","row",".","setHeight","(","(","short",")","2800",")",";","\n\n","//","Save","the","completed","workbook\n","try","(","FileOutputStream","fos","=","new","FileOutputStream","(","outputFilename",")",")","{","workbook",".","write","(","fos",")",";","}","}","catch","(","IOException","ioEx",")","{","LOG",".","atWarn","(",")",".","withThrowable","(","ioEx",")",".","log","(","\"Unexpected","IOException\"",")",";","}"],"docstring_tokens":["Call","each","of","the","list","creation","methods"],"prompt_tokens":[]}
{"code_tokens":["public","VerticalAlignment","getVertical","(",")","{","STVerticalAlignment",".","Enum","align","=","cellAlignement",".","getVertical","(",")",";","if","(","align","==","null",")","align","=","STVerticalAlignment",".","BOTTOM",";","\n\n","return","VerticalAlignment",".","values","(",")","[align",".","intValue","(",")","-","1]",";"],"docstring_tokens":["Get","the","type","of","vertical","alignment","for","the","cell"],"prompt_tokens":[]}
{"code_tokens":["public","HorizontalAlignment","getHorizontal","(",")","{","STHorizontalAlignment",".","Enum","align","=","cellAlignement",".","getHorizontal","(",")",";","if","(","align","==","null",")","align","=","STHorizontalAlignment",".","GENERAL",";","\n\n","return","HorizontalAlignment",".","values","(",")","[align",".","intValue","(",")","-","1]",";"],"docstring_tokens":["Get","the","type","of","horizontal","alignment","for","the","cell"],"prompt_tokens":[]}
{"code_tokens":["protected","static","short","lookupIndex","(","String","name",")","{","short","ix","=","FunctionMetadataRegistry",".","lookupIndexByName","(","name",".","toUpperCase","(","Locale",".","ROOT",")",")",";","if","(","ix","<","0",")","{","return","FUNCTION_INDEX_EXTERNAL",";","}","return","ix",";"],"docstring_tokens":["Resolves","internal","function","names","into","function","indexes"],"prompt_tokens":[]}
{"code_tokens":["public","ExControl","getExControl","(",")","{","int","idx","=","getControlIndex","(",")",";","Document","doc","=","getSheet","(",")",".","getSlideShow","(",")",".","getDocumentRecord","(",")",";","ExObjList","lst","=","(","ExObjList",")","doc",".","findFirstOfType","(","RecordTypes",".","ExObjList",".","typeID",")",";","if","(","lst","==","null",")","{","return","null",";","}","\n\n","for","(","Record","ch",":","lst",".","getChildRecords","(",")",")","{","if","(","ch","instanceof","ExControl",")","{","ExControl","c","=","(","ExControl",")","ch",";","if","(","c",".","getExOleObjAtom","(",")",".","getObjID","(",")","==","idx",")","{","return","c",";","}","}","}","return","null",";"],"docstring_tokens":["Document-level","container","that","specifies","information","about","an","ActiveX","control"],"prompt_tokens":[]}
{"code_tokens":["\n\n","public","int","getFirstRow","(",")","{","return","field_1_first_row",";"],"docstring_tokens":["get","the","first","row","number","for","the","sheet"],"prompt_tokens":[]}
{"code_tokens":["\n\n","public","int","getLastRow","(",")","{","return","field_2_last_row",";"],"docstring_tokens":["get","the","last","row","number","for","the","sheet"],"prompt_tokens":[]}
{"code_tokens":["\n\n","public","short","getFirstCol","(",")","{","return","field_3_first_col",";"],"docstring_tokens":["get","the","first","column","number","for","the","sheet"],"prompt_tokens":[]}
{"code_tokens":["\n\n","public","short","getLastCol","(",")","{","return","field_4_last_col",";"],"docstring_tokens":["get","the","last","col","number","for","the","sheet"],"prompt_tokens":[]}
{"code_tokens":["public","void","adjustForDelete","(","int","start,","int","length",")","{","int","end","=","start","+","length",";","\n\n","if","(","_cpEnd",">","start",")","{","//","The","start","of","the","change","is","before","we","end\n\n","if","(","_cpStart","<","end",")","{","//","The","delete","was","somewhere","in","the","middle","of","us\n","_cpEnd","=","end",">=","_cpEnd","?","start",":","_cpEnd","-","length",";","_cpStart","=","Math",".","min","(","start,","_cpStart",")",";","}","else","{","//","The","delete","was","before","us\n","_cpEnd","-=","length",";","_cpStart","-=","length",";","}","}"],"docstring_tokens":["Adjust","for","a","deletion","that","can","span","multiple","PropertyNodes"],"prompt_tokens":[]}
{"code_tokens":["@Override\n","public","List<XWPFParagraph>","getParagraphs","(",")","{","return","paragraphs",";"],"docstring_tokens":["Get","the","list","of","XWPFParagraphs","in","the","footnote"],"prompt_tokens":[]}
{"code_tokens":["@Override\n","public","Iterator<XWPFParagraph>","iterator","(",")","{","return","paragraphs",".","iterator","(",")",";"],"docstring_tokens":["Get","an","iterator","over","the","XWPFParagraphs","in","the","footnote"],"prompt_tokens":[]}
{"code_tokens":["@Override\n","public","Spliterator<XWPFParagraph>","spliterator","(",")","{","return","paragraphs",".","spliterator","(",")",";"],"docstring_tokens":["Get","a","spliterator","over","the","XWPFParagraphs","in","the","footnote"],"prompt_tokens":[]}
{"code_tokens":["@Override\n","public","List<XWPFTable>","getTables","(",")","{","return","tables",";"],"docstring_tokens":["Get","the","list","of","XWPFTables","in","the","footnote"],"prompt_tokens":[]}
{"code_tokens":["@Override\n","public","XWPFTable","insertNewTbl","(","XmlCursor","cursor",")","{","if","(","isCursorInFtn","(","cursor",")",")","{","String","uri","=","CTTbl",".","type",".","getName","(",")",".","getNamespaceURI","(",")",";","String","localPart","=","\"tbl\"",";","cursor",".","beginElement","(","localPart,","uri",")",";","cursor",".","toParent","(",")",";","CTTbl","t","=","(","CTTbl",")","cursor",".","getObject","(",")",";","XWPFTable","newT","=","new","XWPFTable","(","t,","this",")",";","cursor",".","removeXmlContents","(",")",";","XmlObject","o","=","null",";","while","(","!","(","o","instanceof","CTTbl",")","&&","(","cursor",".","toPrevSibling","(",")",")",")","{","o","=","cursor",".","getObject","(",")",";","}","if","(","!","(","o","instanceof","CTTbl",")",")","{","tables",".","add","(","0,","newT",")",";","}","else","{","int","pos","=","tables",".","indexOf","(","getTable","(","(","CTTbl",")","o",")",")","+","1",";","tables",".","add","(","pos,","newT",")",";","}","int","i","=","0",";","cursor","=","t",".","newCursor","(",")",";","while","(","cursor",".","toPrevSibling","(",")",")","{","o","=","cursor",".","getObject","(",")",";","if","(","o","instanceof","CTP","||","o","instanceof","CTTbl",")","i++",";","}","bodyElements",".","add","(","i,","newT",")",";","XmlCursor","c2","=","t",".","newCursor","(",")",";","try","{","cursor",".","toCursor","(","c2",")",";","cursor",".","toEndToken","(",")",";","}","finally","{","c2",".","dispose","(",")",";","}","return","newT",";","}","return","null",";"],"docstring_tokens":["Insert","a","table","constructed","from","OOXML","table","markup"],"prompt_tokens":[]}
{"code_tokens":["@Override\n","public","XWPFParagraph","insertNewParagraph","(","final","XmlCursor","cursor",")","{","if","(","isCursorInFtn","(","cursor",")",")","{","String","uri","=","CTP",".","type",".","getName","(",")",".","getNamespaceURI","(",")",";","String","localPart","=","\"p\"",";","cursor",".","beginElement","(","localPart,","uri",")",";","cursor",".","toParent","(",")",";","CTP","p","=","(","CTP",")","cursor",".","getObject","(",")",";","XWPFParagraph","newP","=","new","XWPFParagraph","(","p,","this",")",";","XmlObject","o","=","null",";","while","(","!","(","o","instanceof","CTP",")","&&","(","cursor",".","toPrevSibling","(",")",")",")","{","o","=","cursor",".","getObject","(",")",";","}","if","(","(","!","(","o","instanceof","CTP",")",")","||","o","==","p",")","{","paragraphs",".","add","(","0,","newP",")",";","}","else","{","int","pos","=","paragraphs",".","indexOf","(","getParagraph","(","(","CTP",")","o",")",")","+","1",";","paragraphs",".","add","(","pos,","newP",")",";","}","int","i","=","0",";","XmlCursor","p2","=","p",".","newCursor","(",")",";","try","{","cursor",".","toCursor","(","p2",")",";","}","finally","{","p2",".","dispose","(",")",";","}","while","(","cursor",".","toPrevSibling","(",")",")","{","o","=","cursor",".","getObject","(",")",";","if","(","o","instanceof","CTP","||","o","instanceof","CTTbl",")","i++",";","}","bodyElements",".","add","(","i,","newP",")",";","p2","=","p",".","newCursor","(",")",";","cursor",".","toCursor","(","p2",")",";","cursor",".","toEndToken","(",")",";","p2",".","dispose","(",")",";","return","newP",";","}","return","null",";"],"docstring_tokens":["Add","a","new","XWPFParagraph","at","position","of","the","cursor"],"prompt_tokens":[]}
{"code_tokens":["public","XWPFTable","addNewTbl","(","CTTbl","table",")","{","CTTbl","newTable","=","ctFtnEdn",".","addNewTbl","(",")",";","newTable",".","set","(","table",")",";","XWPFTable","xTable","=","new","XWPFTable","(","newTable,","this",")",";","tables",".","add","(","xTable",")",";","return","xTable",";"],"docstring_tokens":["Add","a","new","XWPFTable","to","the","end","of","the","footnote"],"prompt_tokens":[]}
{"code_tokens":["public","XWPFParagraph","addNewParagraph","(","CTP","paragraph",")","{","CTP","newPara","=","ctFtnEdn",".","addNewP","(",")",";","newPara",".","set","(","paragraph",")",";","XWPFParagraph","xPara","=","new","XWPFParagraph","(","newPara,","this",")",";","paragraphs",".","add","(","xPara",")",";","return","xPara",";"],"docstring_tokens":["Add","a","new","XWPFParagraph","to","the","end","of","the","footnote"],"prompt_tokens":[]}
{"code_tokens":["@Override\n","public","XWPFDocument","getXWPFDocument","(",")","{","return","document",";"],"docstring_tokens":["Get","the","XWPFDocument","the","footnote","is","part","of"],"prompt_tokens":[]}
{"code_tokens":["@Override\n","public","POIXMLDocumentPart","getPart","(",")","{","return","footnotes",";"],"docstring_tokens":["Get","the","Part","to","which","the","footnote","belongs,","which","you","need","for","adding","relationships","to","other","parts"],"prompt_tokens":[]}
{"code_tokens":["@Override\n","public","BodyType","getPartType","(",")","{","return","BodyType",".","FOOTNOTE",";"],"docstring_tokens":["Get","the","part","type","BodyType","of","the","footnote"],"prompt_tokens":[]}
{"code_tokens":["public","XWPFParagraph","createParagraph","(",")","{","XWPFParagraph","p","=","new","XWPFParagraph","(","this",".","ctFtnEdn",".","addNewP","(",")",",","this",")",";","paragraphs",".","add","(","p",")",";","bodyElements",".","add","(","p",")",";","\n\n","//","If","the","paragraph","is","the","first","paragraph","in","the","footnote,\n","//","ensure","that","it","has","a","footnote","reference","run",".","\n\n","if","(","p",".","equals","(","getParagraphs","(",")",".","get","(","0",")",")",")","{","ensureFootnoteRef","(","p",")",";","}","return","p",";"],"docstring_tokens":["Appends","a","new","XWPFParagraph","to","this","footnote"],"prompt_tokens":[]}
{"code_tokens":["public","XWPFTable","createTable","(",")","{","XWPFTable","table","=","new","XWPFTable","(","ctFtnEdn",".","addNewTbl","(",")",",","this",")",";","if","(","bodyElements",".","isEmpty","(",")",")","{","XWPFParagraph","p","=","createParagraph","(",")",";","ensureFootnoteRef","(","p",")",";","}","bodyElements",".","add","(","table",")",";","tables",".","add","(","table",")",";","return","table",";"],"docstring_tokens":["Appends","a","new","XWPFTable","to","this","footnote"],"prompt_tokens":[]}
{"code_tokens":["public","XDDFTextRun","appendRegularRun","(","String","text",")","{","CTRegularTextRun","r","=","_p",".","addNewR","(",")",";","r",".","setT","(","text",")",";","CTTextCharacterProperties","rPr","=","r",".","addNewRPr","(",")",";","rPr",".","setLang","(","LocaleUtil",".","getUserLocale","(",")",".","toLanguageTag","(",")",")",";","XDDFTextRun","run","=","new","XDDFTextRun","(","r,","this",")",";","_runs",".","add","(","run",")",";","return","run",";"],"docstring_tokens":["Append","a","new","run","of","text"],"prompt_tokens":[]}
{"code_tokens":["public","int","getIndentationLevel","(",")","{","if","(","_p",".","isSetPPr","(",")",")","{","return","getProperties","(",")",".","getLevel","(",")",";","}","else","{","return","0",";","}"],"docstring_tokens":["Returns","the","paragraph","indentation","level"],"prompt_tokens":[]}
{"code_tokens":["public","void","setIndentationLevel","(","Integer","level",")","{","if","(","_p",".","isSetPPr","(",")",")","{","getProperties","(",")",".","setLevel","(","level",")",";","}"],"docstring_tokens":["Specifies","the","paragraph","indentation","level,","between","1","and","9"],"prompt_tokens":[]}
{"code_tokens":["public","void","setIndentation","(","Double","points",")","{","if","(","points","!=","null","||","_p",".","isSetPPr","(",")",")","{","getOrCreateProperties","(",")",".","setIndentation","(","points",")",";","}"],"docstring_tokens":["Specifies","the","indentation","size","that","will","be","applied","to","the","first","line","of","text","in","the","paragraph"],"prompt_tokens":[]}
{"code_tokens":["public","void","setDefaultTabSize","(","Double","points",")","{","if","(","points","!=","null","||","_p",".","isSetPPr","(",")",")","{","getOrCreateProperties","(",")",".","setDefaultTabSize","(","points",")",";","}"],"docstring_tokens":["Specifies","the","default","size","for","a","tab","character","within","this","paragraph"],"prompt_tokens":[]}
{"code_tokens":["public","void","setBulletFont","(","XDDFFont","font",")","{","if","(","font","!=","null","||","_p",".","isSetPPr","(",")",")","{","getOrCreateBulletProperties","(",")",".","setBulletFont","(","font",")",";","}"],"docstring_tokens":["Set","the","font","to","be","used","on","bullet","characters","within","a","given","paragraph"],"prompt_tokens":[]}
{"code_tokens":["public","static","CFRuleRecord","create","(","HSSFSheet","sheet,","String","formulaText",")","{","Ptg[]","formula1","=","parseFormula","(","formulaText,","sheet",")",";","return","new","CFRuleRecord","(","CONDITION_TYPE_FORMULA,","ComparisonOperator",".","NO_COMPARISON,\n","formula1,","null",")",";"],"docstring_tokens":["Creates","a","new","comparison","operation","rule"],"prompt_tokens":[]}
{"code_tokens":["public","static","XMLInputFactory","newXMLInputFactory","(",")","{","return","XMLHelper",".","newXMLInputFactory","(",")",";"],"docstring_tokens":["Creates","a","new","StAX","XMLInputFactory,","with","sensible","defaults"],"prompt_tokens":[]}
{"code_tokens":["public","static","XMLOutputFactory","newXMLOutputFactory","(",")","{","return","XMLHelper",".","newXMLOutputFactory","(",")",";"],"docstring_tokens":["Creates","a","new","StAX","XMLOutputFactory,","with","sensible","defaults"],"prompt_tokens":[]}
{"code_tokens":["public","static","XMLEventFactory","newXMLEventFactory","(",")","{","return","XMLHelper",".","newXMLEventFactory","(",")",";"],"docstring_tokens":["Creates","a","new","StAX","XMLEventFactory,","with","sensible","defaults"],"prompt_tokens":[]}
{"code_tokens":["@SuppressWarnings","(","\"WeakerAccess\"",")","public","void","setSuperscript","(","boolean","flag",")","{","setBaselineOffset","(","flag","?","30",".",":","0",".",")",";"],"docstring_tokens":["Set","whether","the","text","in","this","run","is","formatted","as","superscript"],"prompt_tokens":[]}
{"code_tokens":["@SuppressWarnings","(","\"WeakerAccess\"",")","public","void","setSubscript","(","boolean","flag",")","{","setBaselineOffset","(","flag","?","-25",".","0",":","0",".",")",";"],"docstring_tokens":["Set","whether","the","text","in","this","run","is","formatted","as","subscript"],"prompt_tokens":[]}
{"code_tokens":["@Internal\n","public","CTTextCharacterProperties","getRPr","(","boolean","create",")","{","if","(","_r","instanceof","CTTextField",")","{","CTTextField","tf","=","(","CTTextField",")","_r",";","if","(","tf",".","isSetRPr","(",")",")","{","return","tf",".","getRPr","(",")",";","}","else","if","(","create",")","{","return","tf",".","addNewRPr","(",")",";","}","}","else","if","(","_r","instanceof","CTTextLineBreak",")","{","CTTextLineBreak","tlb","=","(","CTTextLineBreak",")","_r",";","if","(","tlb",".","isSetRPr","(",")",")","{","return","tlb",".","getRPr","(",")",";","}","else","if","(","create",")","{","return","tlb",".","addNewRPr","(",")",";","}","}","else","{","CTRegularTextRun","tr","=","(","CTRegularTextRun",")","_r",";","if","(","tr",".","isSetRPr","(",")",")","{","return","tr",".","getRPr","(",")",";","}","else","if","(","create",")","{","return","tr",".","addNewRPr","(",")",";","}","}","if","(","_p",".","getXmlObject","(",")",".","isSetPPr","(",")","&&","_p",".","getXmlObject","(",")",".","getPPr","(",")",".","isSetDefRPr","(",")",")","{","return","_p",".","getXmlObject","(",")",".","getPPr","(",")",".","getDefRPr","(",")",";","}","return","null",";"],"docstring_tokens":["Return","the","character","properties"],"prompt_tokens":[]}
{"code_tokens":["@Override\n","public","int","serialize","(","int","offset,","byte[]","data,","EscherSerializationListener","listener",")","{","listener",".","beforeRecordSerialize","(","offset,","getRecordId","(",")",",","this",")",";","LittleEndian",".","putShort","(","data,","offset,","getOptions","(",")",")",";","LittleEndian",".","putShort","(","data,","offset","+","2,","getRecordId","(",")",")",";","int","remainingBytes","=","8",";","LittleEndian",".","putInt","(","data,","offset","+","4,","remainingBytes",")",";","LittleEndian",".","putInt","(","data,","offset","+","8,","field_1_shapeId",")",";","LittleEndian",".","putInt","(","data,","offset","+","12,","field_2_flags",")",";","listener",".","afterRecordSerialize","(","offset","+","getRecordSize","(",")",",","getRecordId","(",")",",","getRecordSize","(",")",",","this",")",";","return","8","+","8",";"],"docstring_tokens":["This","method","serializes","this","escher","record","into","a","byte","array"],"prompt_tokens":[]}
{"code_tokens":["public","int","getFlags","(",")","{","return","field_2_flags",";"],"docstring_tokens":["The","flags","that","apply","to","this","shape"],"prompt_tokens":[]}
{"code_tokens":["public","short","getAxisType","(",")","{","return","field_1_axisType",";"],"docstring_tokens":["Get","the","axis","type","field","for","the","Axis","record"],"prompt_tokens":[]}
{"code_tokens":["public","void","setAxisType","(","short","field_1_axisType",")","{","this",".","field_1_axisType","=","field_1_axisType",";"],"docstring_tokens":["Set","the","axis","type","field","for","the","Axis","record"],"prompt_tokens":[]}
{"code_tokens":["public","int","getReserved1","(",")","{","return","field_2_reserved1",";"],"docstring_tokens":["Get","the","reserved1","field","for","the","Axis","record"],"prompt_tokens":[]}
{"code_tokens":["public","void","setReserved1","(","int","field_2_reserved1",")","{","this",".","field_2_reserved1","=","field_2_reserved1",";"],"docstring_tokens":["Set","the","reserved1","field","for","the","Axis","record"],"prompt_tokens":[]}
{"code_tokens":["public","int","getReserved2","(",")","{","return","field_3_reserved2",";"],"docstring_tokens":["Get","the","reserved2","field","for","the","Axis","record"],"prompt_tokens":[]}
{"code_tokens":["public","void","setReserved2","(","int","field_3_reserved2",")","{","this",".","field_3_reserved2","=","field_3_reserved2",";"],"docstring_tokens":["Set","the","reserved2","field","for","the","Axis","record"],"prompt_tokens":[]}
{"code_tokens":["public","int","getReserved3","(",")","{","return","field_4_reserved3",";"],"docstring_tokens":["Get","the","reserved3","field","for","the","Axis","record"],"prompt_tokens":[]}
{"code_tokens":["public","void","setReserved3","(","int","field_4_reserved3",")","{","this",".","field_4_reserved3","=","field_4_reserved3",";"],"docstring_tokens":["Set","the","reserved3","field","for","the","Axis","record"],"prompt_tokens":[]}
{"code_tokens":["public","int","getReserved4","(",")","{","return","field_5_reserved4",";"],"docstring_tokens":["Get","the","reserved4","field","for","the","Axis","record"],"prompt_tokens":[]}
{"code_tokens":["public","void","setReserved4","(","int","field_5_reserved4",")","{","this",".","field_5_reserved4","=","field_5_reserved4",";"],"docstring_tokens":["Set","the","reserved4","field","for","the","Axis","record"],"prompt_tokens":[]}
{"code_tokens":["private","static","void","centerAcrossSelection","(","XSSFWorkbook","wb,","XSSFRow","row,\n","int","start_column,","int","end_column,","VerticalAlignment","valign",")","{","CreationHelper","ch","=","wb",".","getCreationHelper","(",")",";","\n\n","//","Create","cell","style","with","ALIGN_CENTER_SELECTION\n","XSSFCellStyle","cellStyle","=","wb",".","createCellStyle","(",")",";","cellStyle",".","setAlignment","(","HorizontalAlignment",".","CENTER_SELECTION",")",";","cellStyle",".","setVerticalAlignment","(","valign",")",";","\n\n","//","Create","cells","over","the","selected","area\n","for","(","int","i","=","start_column",";","i","<=","end_column",";","i++",")","{","XSSFCell","cell","=","row",".","createCell","(","i",")",";","cell",".","setCellStyle","(","cellStyle",")",";","}","\n\n","//","Set","value","to","the","first","cell\n","XSSFCell","cell","=","row",".","getCell","(","start_column",")",";","cell",".","setCellValue","(","ch",".","createRichTextString","(","\"Align","It\"",")",")",";","\n\n","//","Make","the","selection\n","CTRowImpl","ctRow","=","(","CTRowImpl",")","row",".","getCTRow","(",")",";","\n\n","//","Add","object","with","format","start_coll:end_coll",".","For","example","1:3","will","span","from\n","//","cell","1","to","cell","3,","where","the","column","index","starts","with","0\n","//\n","//","You","can","add","multiple","spans","for","one","row\n","Object","span","=","start_column","+","\":\"","+","end_column",";","\n\n","List<Object>","spanList","=","new","ArrayList<>","(",")",";","spanList",".","add","(","span",")",";","\n\n","//add","spns","to","the","row\n","ctRow",".","setSpans","(","spanList",")",";"],"docstring_tokens":["Center","a","text","over","multiple","columns","using","ALIGN_CENTER_SELECTION"],"prompt_tokens":[]}
{"code_tokens":["CTPlaceholder","getCTPlaceholder","(","final","boolean","create",")","{","if","(","_ph","!=","null",")","{","return","_ph",";","}","\n\n","final","CTApplicationNonVisualDrawingProps","nv","=","getNvProps","(",")",";","if","(","nv","==","null",")","{","//","shape","doesn't","support","CTApplicationNonVisualDrawingProps\n","return","null",";","}","\n\n","_ph","=","(","nv",".","isSetPh","(",")","||","!create",")","?","nv",".","getPh","(",")",":","nv",".","addNewPh","(",")",";","return","_ph",";"],"docstring_tokens":["Gets","or","creates","a","new","placeholder","element"],"prompt_tokens":[]}
{"code_tokens":["@Internal\n","public","CTFont","getCTFont","(",")","{","return","_ctFont",";"],"docstring_tokens":["get","the","underlying","CTFont","font"],"prompt_tokens":[]}
{"code_tokens":["@Override\n","public","short","getColor","(",")","{","CTColor","color","=","_ctFont",".","sizeOfColorArray","(",")","==","0","?","null",":","_ctFont",".","getColorArray","(","0",")",";","if","(","color","==","null",")","return","IndexedColors",".","BLACK",".","getIndex","(",")",";","\n\n","long","index","=","color",".","getIndexed","(",")",";","if","(","index","==","XSSFFont",".","DEFAULT_FONT_COLOR",")","{","return","IndexedColors",".","BLACK",".","getIndex","(",")",";","}","else","if","(","index","==","IndexedColors",".","RED",".","getIndex","(",")",")","{","return","IndexedColors",".","RED",".","getIndex","(",")",";","}","else","{","return","(","short",")","index",";","}"],"docstring_tokens":["get","the","indexed","color","value","for","the","font","References","a","color","defined","in","IndexedColors"],"prompt_tokens":[]}
{"code_tokens":["@Override\n","public","boolean","getItalic","(",")","{","CTBooleanProperty","italic","=","_ctFont",".","sizeOfIArray","(",")","==","0","?","null",":","_ctFont",".","getIArray","(","0",")",";","return","italic","!=","null","&&","italic",".","getVal","(",")",";"],"docstring_tokens":["get","a","boolean","value","that","specify","whether","to","use","italics","or","not"],"prompt_tokens":[]}
{"code_tokens":["@Override\n","public","void","setColor","(","short","color",")","{","CTColor","ctColor","=","_ctFont",".","sizeOfColorArray","(",")","==","0","?","_ctFont",".","addNewColor","(",")",":","_ctFont",".","getColorArray","(","0",")",";","switch","(","color",")","{","case","Font",".","COLOR_NORMAL:","{","ctColor",".","setIndexed","(","XSSFFont",".","DEFAULT_FONT_COLOR",")",";","break",";","}","case","Font",".","COLOR_RED:","{","ctColor",".","setIndexed","(","IndexedColors",".","RED",".","getIndex","(",")",")",";","break",";","}","default:\n","ctColor",".","setIndexed","(","color",")",";","}"],"docstring_tokens":["set","the","indexed","color","for","the","font"],"prompt_tokens":[]}
{"code_tokens":["public","void","setColor","(","XSSFColor","color",")","{","if","(","color","==","null",")","_ctFont",".","setColorArray","(","null",")",";","else","{","CTColor","ctColor","=","_ctFont",".","sizeOfColorArray","(",")","==","0","?","_ctFont",".","addNewColor","(",")",":","_ctFont",".","getColorArray","(","0",")",";","if","(","ctColor",".","isSetIndexed","(",")",")","{","ctColor",".","unsetIndexed","(",")",";","}","ctColor",".","setRgb","(","color",".","getRGB","(",")",")",";","}"],"docstring_tokens":["set","the","color","for","the","font","in","Standard","Alpha","Red","Green","Blue","color","value"],"prompt_tokens":[]}
{"code_tokens":["@Override\n","public","void","setFontHeight","(","short","height",")","{","setFontHeight","(","(","double",")","height/Font",".","TWIPS_PER_POINT",")",";"],"docstring_tokens":["set","the","font","height","in","points"],"prompt_tokens":[]}
{"code_tokens":["public","long","registerTo","(","StylesTable","styles",")","{","return","registerTo","(","styles,","true",")",";"],"docstring_tokens":["Perform","a","registration","of","ourselves","to","the","style","table"],"prompt_tokens":[]}
{"code_tokens":["public","void","setScheme","(","FontScheme","scheme",")","{","CTFontScheme","ctFontScheme","=","_ctFont",".","sizeOfSchemeArray","(",")","==","0","?","_ctFont",".","addNewScheme","(",")",":","_ctFont",".","getSchemeArray","(","0",")",";","STFontScheme",".","Enum","val","=","STFontScheme",".","Enum",".","forInt","(","scheme",".","getValue","(",")",")",";","ctFontScheme",".","setVal","(","val",")",";"],"docstring_tokens":["set","font","scheme","property"],"prompt_tokens":[]}
{"code_tokens":["@Override\n","public","String","getText","(",")","{","StringBuilder","text","=","new","StringBuilder","(",")",";","\n\n","//","To","track","formats","and","encodings\n","CodepageRecord","codepage","=","null",";","//","TODO","track","the","XFs","and","Format","Strings\n\n","//","Process","each","record","in","turn,","looking","for","interesting","ones\n","while","(","ris",".","hasNextRecord","(",")",")","{","int","sid","=","ris",".","getNextSid","(",")",";","ris",".","nextRecord","(",")",";","\n\n","switch","(","sid",")","{","case","FILE_PASS_RECORD_SID:\n","throw","new","EncryptedDocumentException","(","\"Encryption","not","supported","for","Old","Excel","files\"",")",";","\n\n","case","OldSheetRecord",".","sid:\n","OldSheetRecord","shr","=","new","OldSheetRecord","(","ris",")",";","shr",".","setCodePage","(","codepage",")",";","text",".","append","(","\"Sheet:","\"",")",";","text",".","append","(","shr",".","getSheetname","(",")",")",";","text",".","append","(","'\\n'",")",";","break",";","\n\n","case","OldLabelRecord",".","biff2_sid:\n","case","OldLabelRecord",".","biff345_sid:\n","OldLabelRecord","lr","=","new","OldLabelRecord","(","ris",")",";","lr",".","setCodePage","(","codepage",")",";","text",".","append","(","lr",".","getValue","(",")",")",";","text",".","append","(","'\\n'",")",";","break",";","case","OldStringRecord",".","biff2_sid:\n","case","OldStringRecord",".","biff345_sid:\n","OldStringRecord","sr","=","new","OldStringRecord","(","ris",")",";","sr",".","setCodePage","(","codepage",")",";","text",".","append","(","sr",".","getString","(",")",")",";","text",".","append","(","'\\n'",")",";","break",";","\n\n","case","NumberRecord",".","sid:\n","NumberRecord","nr","=","new","NumberRecord","(","ris",")",";","handleNumericCell","(","text,","nr",".","getValue","(",")",")",";","break",";","case","OldFormulaRecord",".","biff2_sid:\n","case","OldFormulaRecord",".","biff3_sid:\n","case","OldFormulaRecord",".","biff4_sid:\n","//","Biff","2","and","5+","share","the","same","SID,","due","to","a","bug",".",".",".","if","(","biffVersion","==","5",")","{","FormulaRecord","fr","=","new","FormulaRecord","(","ris",")",";","if","(","fr",".","getCachedResultTypeEnum","(",")","==","CellType",".","NUMERIC",")","{","handleNumericCell","(","text,","fr",".","getValue","(",")",")",";","}","}","else","{","OldFormulaRecord","fr","=","new","OldFormulaRecord","(","ris",")",";","if","(","fr",".","getCachedResultTypeEnum","(",")","==","CellType",".","NUMERIC",")","{","handleNumericCell","(","text,","fr",".","getValue","(",")",")",";","}","}","break",";","case","RKRecord",".","sid:\n","RKRecord","rr","=","new","RKRecord","(","ris",")",";","handleNumericCell","(","text,","rr",".","getRKNumber","(",")",")",";","break",";","\n\n","case","CodepageRecord",".","sid:\n","codepage","=","new","CodepageRecord","(","ris",")",";","break",";","\n\n","default:\n","ris",".","readFully","(","IOUtils",".","safelyAllocate","(","ris",".","remaining","(",")",",","HSSFWorkbook",".","getMaxRecordLength","(",")",")",")",";","}","}","\n\n","ris","=","null",";","\n\n","return","text",".","toString","(",")",";"],"docstring_tokens":["Retrieves","the","text","contents","of","the","file,","as","best","we","can","for","these","old","file","formats"],"prompt_tokens":[]}
{"code_tokens":["public","void","updateFormulasAfterCellShift","(","FormulaShifter","shifter,","int","externSheetIndex",")","{","getRowsAggregate","(",")",".","updateFormulasAfterRowShift","(","shifter,","externSheetIndex",")",";","if","(","condFormatting","!=","null",")","{","getConditionalFormattingTable","(",")",".","updateFormulasAfterCellShift","(","shifter,","externSheetIndex",")",";","}","//","TODO","-","adjust","data","validations\n"],"docstring_tokens":["Updates","formulas","in","cells","and","conditional","formats","due","to","moving","of","cells"],"prompt_tokens":[]}
{"code_tokens":["private","static","DefaultRowHeightRecord","createDefaultRowHeight","(",")","{","DefaultRowHeightRecord","retval","=","new","DefaultRowHeightRecord","(",")",";","\n\n","retval",".","setOptionFlags","(","(","short",")","0",")",";","retval",".","setRowHeight","(","DefaultRowHeightRecord",".","DEFAULT_ROW_HEIGHT",")",";","return","retval",";"],"docstring_tokens":["creates","the","DefaultRowHeight","Record","and","sets","its","options","to","0","and","rowheight","to","0xff"],"prompt_tokens":[]}
{"code_tokens":["private","static","WSBoolRecord","createWSBool","(",")","{","WSBoolRecord","retval","=","new","WSBoolRecord","(",")",";","\n\n","retval",".","setWSBool1","(","(","byte",")","0x4",")",";","retval",".","setWSBool2","(","(","byte",")","0xffffffc1",")",";","return","retval",";"],"docstring_tokens":["creates","the","WSBoolRecord","and","sets","its","values","to","defaults"],"prompt_tokens":[]}
{"code_tokens":["private","static","DefaultColWidthRecord","createDefaultColWidth","(",")","{","DefaultColWidthRecord","retval","=","new","DefaultColWidthRecord","(",")",";","retval",".","setColWidth","(","DefaultColWidthRecord",".","DEFAULT_COLUMN_WIDTH",")",";","return","retval",";"],"docstring_tokens":["creates","the","DefaultColWidth","Record","and","sets","it","to","8"],"prompt_tokens":[]}
{"code_tokens":["public","boolean","isColumnHidden","(","int","columnIndex",")","{","ColumnInfoRecord","cir","=","_columnInfos",".","findColumnInfo","(","columnIndex",")",";","if","(","cir","==","null",")","{","return","false",";","}","return","cir",".","getHidden","(",")",";"],"docstring_tokens":["Get","the","hidden","property","for","a","given","column"],"prompt_tokens":[]}
{"code_tokens":["public","void","groupColumnRange","(","int","fromColumn,","int","toColumn,","boolean","indent",")","{","\n\n","//","Set","the","level","for","each","column\n","_columnInfos",".","groupColumnRange","(","fromColumn,","toColumn,","indent",")",";","\n\n","//","Determine","the","maximum","overall","level\n","int","maxLevel","=","_columnInfos",".","getMaxOutlineLevel","(",")",";","\n\n","GutsRecord","guts","=","getGutsRecord","(",")",";","guts",".","setColLevelMax","(","(","short",")","(","maxLevel+1",")",")",";","if","(","maxLevel","==","0",")","{","guts",".","setTopColGutter","(","(","short",")","0",")",";","}","else","{","guts",".","setTopColGutter","(","(","short",")","(","29","+","(","12","*","(","maxLevel-1",")",")",")",")",";","}"],"docstring_tokens":["Creates","an","outline","group","for","the","specified","columns"],"prompt_tokens":[]}
{"code_tokens":["public","void","setLeftCol","(","short","leftCol",")","{","if","(","windowTwo!=null",")","{","windowTwo",".","setLeftCol","(","leftCol",")",";","}"],"docstring_tokens":["Sets","the","left","column","to","show","in","desktop","window","pane"],"prompt_tokens":[]}
{"code_tokens":["public","GridsetRecord","getGridsetRecord","(",")","{","return","gridset",";"],"docstring_tokens":["Gets","the","gridset","record","for","this","sheet"],"prompt_tokens":[]}
{"code_tokens":["public","void","setSCLRecord","(","SCLRecord","sclRecord",")","{","int","oldRecordLoc","=","findFirstRecordLocBySid","(","SCLRecord",".","sid",")",";","if","(","oldRecordLoc","==","-1",")","{","//","Insert","it","after","the","window","record\n","int","windowRecordLoc","=","findFirstRecordLocBySid","(","WindowTwoRecord",".","sid",")",";","_records",".","add","(","windowRecordLoc+1,","sclRecord",")",";","}","else","{","_records",".","set","(","oldRecordLoc,","sclRecord",")",";","}"],"docstring_tokens":["Sets","the","SCL","record","or","creates","it","in","the","correct","place","if","it","does","not","already","exist"],"prompt_tokens":[]}
{"code_tokens":["public","boolean","isPrintRowColHeadings","(",")","{","return","windowTwo",".","getDisplayRowColHeadings","(",")",";"],"docstring_tokens":["Returns","if","RowColHeadings","are","displayed"],"prompt_tokens":[]}
{"code_tokens":["public","void","removeHyperlinksChanged","(",")","{","remove1stProperty","(","PropertyIDMap",".","PID_HYPERLINKSCHANGED",")",";"],"docstring_tokens":["Removes","the","flag","for","if","the","User","Defined","Property","Set","has","been","updated","outside","of","the","Application"],"prompt_tokens":[]}
{"code_tokens":["public","void","removeLanguage","(",")","{","remove1stProperty","(","PropertyIDMap",".","PID_LANGUAGE",")",";"],"docstring_tokens":["Removes","the","document","language"],"prompt_tokens":[]}
{"code_tokens":["private","void","ensureSection2","(",")","{","if","(","getSectionCount","(",")","<","2",")","{","Section","s2","=","new","Section","(",")",";","s2",".","setFormatID","(","USER_PROPERTIES",".","getClassID","(",")",")",";","addSection","(","s2",")",";","}"],"docstring_tokens":["Creates","section","2","if","it","is","not","already","present"],"prompt_tokens":[]}
{"code_tokens":["\n\n","public","void","setItalic","(","boolean","italic",")","{","setFontOption","(","italic,","POSTURE",")",";"],"docstring_tokens":["set","the","font","to","be","italics","or","not"],"prompt_tokens":[]}
{"code_tokens":["public","static","SubRecord","createSubRecord","(","LittleEndianInput","in,","int","cmoOt",")","{","int","sid","=","in",".","readUShort","(",")",";","//","Often","(","but","not","always",")","the","datasize","for","the","sub-record\n","int","size","=","in",".","readUShort","(",")",";","SubRecordTypes","srt","=","SubRecordTypes",".","forSID","(","sid",")",";","return","srt",".","recordConstructor",".","apply","(","in,","size,","srt","==","SubRecordTypes",".","UNKNOWN","?","sid",":","cmoOt",")",";"],"docstring_tokens":["read","a","sub-record","from","the","supplied","stream"],"prompt_tokens":[]}
{"code_tokens":["public","String","getModifiedPropertyString","(",")","{","if","(","modified",".","isPresent","(",")",")","{","return","getDateValue","(","modified",")",";","}","return","getDateValue","(","Optional",".","of","(","new","Date","(",")",")",")",";"],"docstring_tokens":["Get","modified","date","formatted","into","a","String"],"prompt_tokens":[]}
{"code_tokens":["@Override\n","public","void","setCreatedProperty","(","String","created",")","throws","InvalidFormatException","{","this",".","created","=","parseDateValue","(","created",")",";"],"docstring_tokens":["Set","the","created","date"],"prompt_tokens":[]}
{"code_tokens":["@Override\n","public","void","setLastPrintedProperty","(","String","lastPrinted",")","throws","InvalidFormatException","{","this",".","lastPrinted","=","parseDateValue","(","lastPrinted",")",";"],"docstring_tokens":["Set","last","printed","date"],"prompt_tokens":[]}
{"code_tokens":["@Override\n","public","void","setModifiedProperty","(","String","modified",")","throws","InvalidFormatException","{","this",".","modified","=","parseDateValue","(","modified",")",";"],"docstring_tokens":["Set","last","modification","date"],"prompt_tokens":[]}
{"code_tokens":["public","void","nextRecord","(",")","throws","RecordFormatException","{","if","(","_nextSid","==","INVALID_SID_VALUE",")","{","throw","new","IllegalStateException","(","\"EOF","-","next","record","not","available\"",")",";","}","if","(","_currentDataLength","!=","DATA_LEN_NEEDS_TO_BE_READ",")","{","throw","new","IllegalStateException","(","\"Cannot","call","nextRecord","(",")","without","checking","hasNextRecord","(",")","first\"",")",";","}","_currentSid","=","_nextSid",";","_currentDataOffset","=","0",";","_currentDataLength","=","_bhi",".","readDataSize","(",")",";","if","(","_currentDataLength",">","MAX_RECORD_DATA_SIZE",")","{","throw","new","RecordFormatException","(","\"The","content","of","an","excel","record","cannot","exceed","\"\n","+","MAX_RECORD_DATA_SIZE","+","\"","bytes\"",")",";","}"],"docstring_tokens":["Moves","to","the","next","record","in","the","stream"],"prompt_tokens":[]}
{"code_tokens":["@Override\n","public","short","readShort","(",")","{","checkRecordPosition","(","LittleEndianConsts",".","SHORT_SIZE",")",";","_currentDataOffset","+=","LittleEndianConsts",".","SHORT_SIZE",";","return","_dataInput",".","readShort","(",")",";"],"docstring_tokens":["Reads","a","16","bit,","signed","value"],"prompt_tokens":[]}
{"code_tokens":["public","byte[]","readRemainder","(",")","{","int","size","=","remaining","(",")",";","if","(","size","==0",")","{","return","EMPTY_BYTE_ARRAY",";","}","byte[]","result","=","IOUtils",".","safelyAllocate","(","size,","HSSFWorkbook",".","getMaxRecordLength","(",")",")",";","readFully","(","result",")",";","return","result",";"],"docstring_tokens":["Returns","the","remaining","bytes","for","the","current","record"],"prompt_tokens":[]}
{"code_tokens":["@Deprecated\n","public","byte[]","readAllContinuedRemainder","(",")","{","try","(","UnsynchronizedByteArrayOutputStream","out","=","new","UnsynchronizedByteArrayOutputStream","(","2","*","MAX_RECORD_DATA_SIZE",")",")","{","\n\n","while","(","true",")","{","byte[]","b","=","readRemainder","(",")",";","out",".","write","(","b,","0,","b",".","length",")",";","if","(","!isContinueNext","(",")",")","{","break",";","}","nextRecord","(",")",";","}","return","out",".","toByteArray","(",")",";","}","catch","(","IOException","ex",")","{","throw","new","RecordFormatException","(","ex",")",";","}"],"docstring_tokens":["Reads","all","byte","data","for","the","current","record,","including","any","that","overlaps","into","any","following","continue","records"],"prompt_tokens":[]}
{"code_tokens":["public","int","remaining","(",")","{","if","(","_currentDataLength","==","DATA_LEN_NEEDS_TO_BE_READ",")","{","//","already","read","sid","of","next","record",".","so","current","one","is","finished\n","return","0",";","}","return","_currentDataLength","-","_currentDataOffset",";"],"docstring_tokens":["The","remaining","number","of","bytes","in","the","current","record"],"prompt_tokens":[]}
{"code_tokens":["@Internal\n","public","void","mark","(","int","readlimit",")","{","(","(","InputStream",")","_dataInput",")",".","mark","(","readlimit",")",";","_markedDataOffset","=","_currentDataOffset",";"],"docstring_tokens":["Mark","the","stream","position","-","experimental","function"],"prompt_tokens":[]}
{"code_tokens":["public","BigInteger","nextId","(",")","{","\n\n","List<BigInteger>","ids","=","new","ArrayList<>","(",")",";","for","(","XWPFAbstractFootnoteEndnote","note",":","document",".","getFootnotes","(",")",")","{","ids",".","add","(","note",".","getId","(",")",")",";","}","for","(","XWPFAbstractFootnoteEndnote","note",":","document",".","getEndnotes","(",")",")","{","ids",".","add","(","note",".","getId","(",")",")",";","}","int","cand","=","ids",".","size","(",")",";","BigInteger","newId","=","BigInteger",".","valueOf","(","cand",")",";","while","(","ids",".","contains","(","newId",")",")","{","cand++",";","newId","=","BigInteger",".","valueOf","(","cand",")",";","}","\n\n","return","newId",";"],"docstring_tokens":["Gets","the","next","ID","number"],"prompt_tokens":[]}
{"code_tokens":["public","static","void","assertEquals","(","File","expected,","File","actual",")","{","assertNotNull","(","expected",")",";","assertNotNull","(","actual",")",";","\n\n","assertTrue","(","expected",".","exists","(",")",",","\"File","does","not","exist","[\"","+","expected",".","getAbsolutePath","(",")","+","\"]\"",")",";","assertTrue","(","actual",".","exists","(",")",",","\"File","does","not","exist","[\"","+","actual",".","getAbsolutePath","(",")","+","\"]\"",")",";","assertTrue","(","expected",".","canRead","(",")",",","\"Expected","file","not","readable\"",")",";","assertTrue","(","actual",".","canRead","(",")",",","\"Actual","file","not","readable\"",")",";","\n\n","assertDoesNotThrow","(","(",")","->","equals","(","decompress","(","expected",")",",","decompress","(","actual",")",")",")",";"],"docstring_tokens":["Asserts","that","two","files","are","equal"],"prompt_tokens":[]}
{"code_tokens":["@Override\n","public","XSSFRichTextString","createRichTextString","(","String","text",")","{","XSSFRichTextString","rt","=","new","XSSFRichTextString","(","text",")",";","rt",".","setStylesTableReference","(","workbook",".","getStylesSource","(",")",")",";","return","rt",";"],"docstring_tokens":["Creates","a","new","XSSFRichTextString","for","you"],"prompt_tokens":[]}
{"code_tokens":["@Override\n","public","XSSFFormulaEvaluator","createFormulaEvaluator","(",")","{","XSSFFormulaEvaluator","evaluator","=","new","XSSFFormulaEvaluator","(","workbook",")",";","Map<String,","FormulaEvaluator>","evaluatorMap","=","new","HashMap<>","(",")",";","evaluatorMap",".","put","(","\"\",","evaluator",")",";","this",".","referencedWorkbooks",".","forEach","(","(","name,otherWorkbook",")","->evaluatorMap",".","put","(","name,otherWorkbook",".","getCreationHelper","(",")",".","createFormulaEvaluator","(",")",")",")",";","evaluator",".","setupReferencedWorkbooks","(","evaluatorMap",")",";","return","evaluator",";"],"docstring_tokens":["Creates","a","XSSFFormulaEvaluator,","the","object","that","evaluates","formula","cells"],"prompt_tokens":[]}
{"code_tokens":["public","short","getAnchorId","(",")","{","return","field_1_anchorId",";"],"docstring_tokens":["Get","the","anchor","id","field","for","the","ObjectLink","record"],"prompt_tokens":[]}
{"code_tokens":["public","void","setAnchorId","(","short","field_1_anchorId",")","{","this",".","field_1_anchorId","=","field_1_anchorId",";"],"docstring_tokens":["Set","the","anchor","id","field","for","the","ObjectLink","record"],"prompt_tokens":[]}
{"code_tokens":["public","short","getLink1","(",")","{","return","field_2_link1",";"],"docstring_tokens":["Get","the","link","1","field","for","the","ObjectLink","record"],"prompt_tokens":[]}
{"code_tokens":["public","void","setLink1","(","short","field_2_link1",")","{","this",".","field_2_link1","=","field_2_link1",";"],"docstring_tokens":["Set","the","link","1","field","for","the","ObjectLink","record"],"prompt_tokens":[]}
{"code_tokens":["public","short","getLink2","(",")","{","return","field_3_link2",";"],"docstring_tokens":["Get","the","link","2","field","for","the","ObjectLink","record"],"prompt_tokens":[]}
{"code_tokens":["public","void","setLink2","(","short","field_3_link2",")","{","this",".","field_3_link2","=","field_3_link2",";"],"docstring_tokens":["Set","the","link","2","field","for","the","ObjectLink","record"],"prompt_tokens":[]}
{"code_tokens":["public","String","getFirstResult","(",")","{","if","(","items","==","null","||","items",".","isEmpty","(",")",")","{","return","null",";","}","return","items",".","get","(","0",")",".","getIndex","(",")",".","getResult","(",")",";"],"docstring_tokens":["Retrieve","first","result","from","response"],"prompt_tokens":[]}
{"code_tokens":["protected","void","enqueue","(","List<TaskMessage>","msgs,","String","from",")","throws","InterruptedException","{","if","(","null","==","msgs","||","msgs",".","isEmpty","(",")","||","closing",")","{","return",";","}","addReceiveCount","(","from,","msgs",".","size","(",")",")",";","cb",".","recv","(","msgs",")",";"],"docstring_tokens":["enqueue","a","received","message"],"prompt_tokens":[]}
{"code_tokens":["public","static","void","main","(","String[]","args",")","throws","Exception","{","Options","options","=","new","Options","(",")",";","options",".","addOption","(","Option",".","builder","(","\"h\"",")",".","longOpt","(","\"help\"",")",".","desc","(","\"Print","a","help","message\"",")",".","build","(",")",")",";","options",".","addOption","(","Option",".","builder","(","\"t\"",")",".","longOpt","(","\"test-time\"",")",".","argName","(","\"MINS\"",")",".","hasArg","(",")",".","desc","(","\"How","long","to","run","the","tests","for","in","mins","(","defaults","to","\"","+","TEST_EXECUTE_TIME_DEFAULT","+","\"",")","\"",")",".","build","(",")",")",";","options",".","addOption","(","Option",".","builder","(",")",".","longOpt","(","\"rate\"",")",".","argName","(","\"SENTENCES/SEC\"",")",".","hasArg","(",")",".","desc","(","\"How","many","sentences","per","second","to","run",".","(","defaults","to","\"","+","DEFAULT_RATE_PER_SECOND","+","\"",")","\"",")",".","build","(",")",")",";","options",".","addOption","(","Option",".","builder","(",")",".","longOpt","(","\"name\"",")",".","argName","(","\"TOPO_NAME\"",")",".","hasArg","(",")",".","desc","(","\"Name","of","the","topology","to","run","(","defaults","to","\"","+","DEFAULT_TOPO_NAME","+","\"",")","\"",")",".","build","(",")",")",";","options",".","addOption","(","Option",".","builder","(",")",".","longOpt","(","\"spouts\"",")",".","argName","(","\"NUM\"",")",".","hasArg","(",")",".","desc","(","\"Number","of","spouts","to","use","(","defaults","to","\"","+","DEFAULT_NUM_SPOUTS","+","\"",")","\"",")",".","build","(",")",")",";","options",".","addOption","(","Option",".","builder","(",")",".","longOpt","(","\"splitters\"",")",".","argName","(","\"NUM\"",")",".","hasArg","(",")",".","desc","(","\"Number","of","splitter","bolts","to","use","(","defaults","to","\"","+","DEFAULT_NUM_SPLITS","+","\"",")","\"",")",".","build","(",")",")",";","options",".","addOption","(","Option",".","builder","(",")",".","longOpt","(","\"splitter-imbalance\"",")",".","argName","(","\"MS","(",":COUNT",")","?\"",")",".","hasArg","(",")",".","desc","(","\"The","number","of","ms","that","the","first","COUNT","splitters","will","wait","before","processing",".","This","creates","an","imbalance","\"\n","+","\"that","helps","test","load","aware","groupings","(","defaults","to","0:1",")","\"",")",".","build","(",")",")",";","options",".","addOption","(","Option",".","builder","(",")",".","longOpt","(","\"counters\"",")",".","argName","(","\"NUM\"",")",".","hasArg","(",")",".","desc","(","\"Number","of","counter","bolts","to","use","(","defaults","to","\"","+","DEFAULT_NUM_COUNTS","+","\"",")","\"",")",".","build","(",")",")",";","LoadMetricsServer",".","addCommandLineOptions","(","options",")",";","CommandLineParser","parser","=","new","DefaultParser","(",")",";","CommandLine","cmd","=","null",";","Exception","commandLineException","=","null",";","SlowExecutorPattern","slowness","=","null",";","double","numMins","=","TEST_EXECUTE_TIME_DEFAULT",";","double","ratePerSecond","=","DEFAULT_RATE_PER_SECOND",";","String","name","=","DEFAULT_TOPO_NAME",";","int","numSpouts","=","DEFAULT_NUM_SPOUTS",";","int","numSplits","=","DEFAULT_NUM_SPLITS",";","int","numCounts","=","DEFAULT_NUM_COUNTS",";","try","{","cmd","=","parser",".","parse","(","options,","args",")",";","if","(","cmd",".","hasOption","(","\"t\"",")",")","{","numMins","=","Double",".","valueOf","(","cmd",".","getOptionValue","(","\"t\"",")",")",";","}","if","(","cmd",".","hasOption","(","\"rate\"",")",")","{","ratePerSecond","=","Double",".","parseDouble","(","cmd",".","getOptionValue","(","\"rate\"",")",")",";","}","if","(","cmd",".","hasOption","(","\"name\"",")",")","{","name","=","cmd",".","getOptionValue","(","\"name\"",")",";","}","if","(","cmd",".","hasOption","(","\"spouts\"",")",")","{","numSpouts","=","Integer",".","parseInt","(","cmd",".","getOptionValue","(","\"spouts\"",")",")",";","}","if","(","cmd",".","hasOption","(","\"splitters\"",")",")","{","numSplits","=","Integer",".","parseInt","(","cmd",".","getOptionValue","(","\"splitters\"",")",")",";","}","if","(","cmd",".","hasOption","(","\"counters\"",")",")","{","numCounts","=","Integer",".","parseInt","(","cmd",".","getOptionValue","(","\"counters\"",")",")",";","}","if","(","cmd",".","hasOption","(","\"splitter-imbalance\"",")",")","{","slowness","=","SlowExecutorPattern",".","fromString","(","cmd",".","getOptionValue","(","\"splitter-imbalance\"",")",")",";","}","}","catch","(","ParseException","|","NumberFormatException","e",")","{","commandLineException","=","e",";","}","if","(","commandLineException","!=","null","||","cmd",".","hasOption","(","'h'",")",")","{","if","(","commandLineException","!=","null",")","{","System",".","err",".","println","(","\"ERROR","\"","+","commandLineException",".","getMessage","(",")",")",";","}","new","HelpFormatter","(",")",".","printHelp","(","\"ThroughputVsLatency","[options]\",","options",")",";","return",";","}","\n\n","Map<String,","Object>","metrics","=","new","LinkedHashMap<>","(",")",";","metrics",".","put","(","\"target_rate\",","ratePerSecond",")",";","metrics",".","put","(","\"spout_parallel\",","numSpouts",")",";","metrics",".","put","(","\"split_parallel\",","numSplits",")",";","metrics",".","put","(","\"count_parallel\",","numCounts",")",";","\n\n","Config","conf","=","new","Config","(",")",";","Map<String,","Object>","sysConf","=","Utils",".","readStormConfig","(",")",";","LoadMetricsServer","metricServer","=","new","LoadMetricsServer","(","sysConf,","cmd,","metrics",")",";","metricServer",".","serve","(",")",";","String","url","=","metricServer",".","getUrl","(",")",";","\n\n","NimbusClient","client","=","NimbusClient",".","getConfiguredClient","(","sysConf",")",";","conf",".","registerMetricsConsumer","(","LoggingMetricsConsumer",".","class",")",";","conf",".","registerMetricsConsumer","(","HttpForwardingMetricsConsumer",".","class,","url,","1",")",";","Map<String,","String>","workerMetrics","=","new","HashMap<>","(",")",";","if","(","!NimbusClient",".","isLocalOverride","(",")",")","{","//sigar","uses","JNI","and","does","not","work","in","local","mode\n","workerMetrics",".","put","(","\"CPU\",","\"org",".","apache",".","storm",".","metrics",".","sigar",".","CPUMetric\"",")",";","}","conf",".","put","(","Config",".","TOPOLOGY_WORKER_METRICS,","workerMetrics",")",";","conf",".","put","(","Config",".","TOPOLOGY_BUILTIN_METRICS_BUCKET_SIZE_SECS,","10",")",";","conf",".","put","(","Config",".","TOPOLOGY_WORKER_GC_CHILDOPTS,\n","\"-XX:+UseConcMarkSweepGC","-XX:+UseParNewGC","-XX:+UseConcMarkSweepGC","\"\n","+","\"-XX:NewSize=128m","-XX:CMSInitiatingOccupancyFraction=70","-XX:-CMSConcurrentMTEnabled\"",")",";","conf",".","put","(","Config",".","TOPOLOGY_WORKER_CHILDOPTS,","\"-Xmx2g\"",")",";","\n\n","TopologyBuilder","builder","=","new","TopologyBuilder","(",")",";","\n\n","builder",".","setSpout","(","\"spout\",","new","FastRandomSentenceSpout","(","(","long",")","ratePerSecond","/","numSpouts",")",",","numSpouts",")",";","builder",".","setBolt","(","\"split\",","new","SplitSentence","(","slowness",")",",","numSplits",")",".","shuffleGrouping","(","\"spout\"",")",";","builder",".","setBolt","(","\"count\",","new","WordCount","(",")",",","numCounts",")",".","fieldsGrouping","(","\"split\",","new","Fields","(","\"word\"",")",")",";","\n\n","int","exitStatus","=","-1",";","try","(","ScopedTopologySet","topologyNames","=","new","ScopedTopologySet","(","client",".","getClient","(",")",")",")","{","StormSubmitter",".","submitTopology","(","name,","conf,","builder",".","createTopology","(",")",")",";","topologyNames",".","add","(","name",")",";","\n\n","metricServer",".","monitorFor","(","numMins,","client",".","getClient","(",")",",","topologyNames",")",";","exitStatus","=","0",";","}","catch","(","Exception","e",")","{","LOG",".","error","(","\"Error","while","running","test\",","e",")",";","}","finally","{","System",".","exit","(","exitStatus",")",";","}"],"docstring_tokens":["The","main","entry","point","for","ThroughputVsLatency"],"prompt_tokens":[]}
{"code_tokens":["public","BatchCassandraWriterBolt","withQueueSize","(","int","size",")","{","this",".","batchMaxSize","=","size",";","return","this",";"],"docstring_tokens":["Maximum","number","of","tuple","kept","in","memory","before","inserting","batches","to","cassandra"],"prompt_tokens":[]}
{"code_tokens":["public","void","recoverRunningTopology","(","final","LocalAssignment","currentAssignment,","final","int","port,\n","final","BlobChangingCallback","cb",")","throws","IOException","{","final","PortAndAssignment","pna","=","new","PortAndAssignmentImpl","(","port,","currentAssignment",")",";","final","String","topologyId","=","pna",".","getToplogyId","(",")",";","LOG",".","info","(","\"recoverRunningTopology","for","{","}","\",","pna",")",";","\n\n","LocallyCachedBlob","topoJar","=","getTopoJar","(","topologyId,","pna",".","getAssignment","(",")",".","get_owner","(",")",")",";","topoJar",".","addReference","(","pna,","cb",")",";","\n\n","LocallyCachedBlob","topoCode","=","getTopoCode","(","topologyId,","pna",".","getAssignment","(",")",".","get_owner","(",")",")",";","topoCode",".","addReference","(","pna,","cb",")",";","\n\n","LocallyCachedBlob","topoConf","=","getTopoConf","(","topologyId,","pna",".","getAssignment","(",")",".","get_owner","(",")",")",";","topoConf",".","addReference","(","pna,","cb",")",";","\n\n","CompletableFuture<Void>","localResource","=","blobPending",".","computeIfAbsent","(","topologyId,","(","tid",")","->","ALL_DONE_FUTURE",")",";","\n\n","try","{","addReferencesToBlobs","(","pna,","cb",")",";","}","catch","(","KeyNotFoundException","|","AuthorizationException","e",")","{","LOG",".","error","(","\"Could","not","recover","all","blob","references","for","{","}","\",","pna",")",";","}","\n\n","LOG",".","debug","(","\"Recovered","blobs","{","}","{","}","\",","topologyId,","localResource",")",";"],"docstring_tokens":["Do","everything","needed","to","recover","the","state","in","the","AsyncLocalizer","for","a","running","topology"],"prompt_tokens":[]}
{"code_tokens":["private","void","removeLongTimeDisappearFromCache","(",")","{","\n\n","Map<String,","Integer>","supervisorCountMap","=","new","HashMap<String,","Integer>","(",")",";","Map<WorkerSlot,","Integer>","slotCountMap","=","new","HashMap<WorkerSlot,","Integer>","(",")",";","\n\n","for","(","Map<String,","Set<Integer>>","item",":","badSupervisorsToleranceSlidingWindow",")","{","Set<String>","supervisors","=","item",".","keySet","(",")",";","for","(","String","supervisor",":","supervisors",")","{","int","supervisorCount","=","supervisorCountMap",".","getOrDefault","(","supervisor,","0",")",";","Set<Integer>","slots","=","item",".","get","(","supervisor",")",";","//","treat","supervisor","as","bad","only","if","all","of","its","slots","matched","the","cached","supervisor\n","if","(","slots",".","equals","(","cachedSupervisors",".","get","(","supervisor",")",")",")","{","//","track","how","many","times","a","cached","supervisor","has","been","marked","bad\n","supervisorCountMap",".","put","(","supervisor,","supervisorCount","+","1",")",";","}","//","track","how","many","times","each","supervisor","slot","has","been","listed","as","bad\n","for","(","Integer","slot",":","slots",")","{","WorkerSlot","workerSlot","=","new","WorkerSlot","(","supervisor,","slot",")",";","int","slotCount","=","slotCountMap",".","getOrDefault","(","workerSlot,","0",")",";","slotCountMap",".","put","(","workerSlot,","slotCount","+","1",")",";","}","}","}","\n\n","for","(","Map",".","Entry<String,","Integer>","entry",":","supervisorCountMap",".","entrySet","(",")",")","{","String","key","=","entry",".","getKey","(",")",";","int","value","=","entry",".","getValue","(",")",";","if","(","value","==","windowSize",")","{","//","supervisor","which","was","never","back","to","normal","in","tolerance","period","will","be","removed","from","cache\n","cachedSupervisors",".","remove","(","key",")",";","LOG",".","info","(","\"Supervisor","{","}","was","never","back","to","normal","during","tolerance","period,","probably","dead",".","Will","remove","from","cache",".","\",","key",")",";","}","}","\n\n","for","(","Map",".","Entry<WorkerSlot,","Integer>","entry",":","slotCountMap",".","entrySet","(",")",")","{","WorkerSlot","workerSlot","=","entry",".","getKey","(",")",";","String","supervisorKey","=","workerSlot",".","getNodeId","(",")",";","Integer","slot","=","workerSlot",".","getPort","(",")",";","int","slotFailures","=","entry",".","getValue","(",")",";","if","(","slotFailures","==","windowSize",")","{","//","worker","slot","which","was","never","back","to","normal","in","tolerance","period","will","be","removed","from","cache\n","Set<Integer>","slots","=","cachedSupervisors",".","get","(","supervisorKey",")",";","if","(","slots","!=","null",")","{","//","slots","will","be","null","while","supervisor","has","been","removed","from","cached","supervisors\n","slots",".","remove","(","slot",")",";","cachedSupervisors",".","put","(","supervisorKey,","slots",")",";","}","LOG",".","info","(","\"Worker","slot","{","}","was","never","back","to","normal","during","tolerance","period,","probably","dead",".","Will","be","removed","from","cache",".","\",\n","workerSlot",")",";","}","}"],"docstring_tokens":["supervisor","or","port","never","exits","once","in","tolerance","time","will","be","removed","from","cache"],"prompt_tokens":[]}
{"code_tokens":["public","String","execute","(","String","callSequence",")","{","String[]","cmds","=","callSequence",".","split","(","\",\"",")",";","for","(","String","cmd",":","cmds",")","{","if","(","cmd",".","startsWith","(","\"r\"",")",")","{","int","count","=","1",";","if","(","cmd",".","length","(",")",">","1",")","{","count","=","Integer",".","parseInt","(","cmd",".","substring","(","1",")",")",";","}","for","(","int","i","=","0",";","i","<","count",";","++i",")","{","spout",".","nextTuple","(",")",";","}","}","else","if","(","cmd",".","startsWith","(","\"a\"",")",")","{","String[]","midStrs","=","cmd",".","substring","(","1",")",".","split","(","\"_\"",")",";","MessageId","msgId","=","new","MessageId","(","midStrs[0],","midStrs[1],","Long",".","parseLong","(","midStrs[1]",")",")",";","spout",".","ack","(","msgId",")",";","}","else","if","(","cmd",".","startsWith","(","\"f\"",")",")","{","String[]","midStrs","=","cmd",".","substring","(","1",")",".","split","(","\"_\"",")",";","MessageId","msgId","=","new","MessageId","(","midStrs[0],","midStrs[1],","Long",".","parseLong","(","midStrs[1]",")",")",";","spout",".","fail","(","msgId",")",";","}","}","return","collector",".","getOffsetSequenceAndReset","(",")",";"],"docstring_tokens":["Execute","a","sequence","of","calls","to","EventHubSpout"],"prompt_tokens":[]}
{"code_tokens":["@VisibleForTesting\n","List<Path>","logsForPort","(","String","user,","Path","portDir",")","{","try","{","List<Path>","workerLogs","=","directoryCleaner",".","getFilesForDir","(","portDir",")",".","stream","(",")",".","filter","(","file","->","WORKER_LOG_FILENAME_PATTERN",".","asPredicate","(",")",".","test","(","file",".","getFileName","(",")",".","toString","(",")",")",")",".","collect","(","toList","(",")",")",";","\n\n","return","workerLogs",".","stream","(",")",".","filter","(","log","->","resourceAuthorizer",".","isUserAllowedToAccessFile","(","user,","WorkerLogs",".","getTopologyPortWorkerLog","(","log",")",")",")",".","map","(","Unchecked",".","function","(","p","->","Pair",".","of","(","p,","Files",".","getLastModifiedTime","(","p",")",")",")",")",".","sorted","(","Comparator",".","comparing","(","(","Pair<Path,","FileTime>","p",")","->","p",".","getRight","(",")",")",".","reversed","(",")",")",".","map","(","p","->","p",".","getLeft","(",")",")",".","collect","(","toList","(",")",")",";","}","catch","(","IOException","e",")","{","throw","new","RuntimeException","(","e",")",";","}"],"docstring_tokens":["Get","the","filtered,","authorized,","sorted","log","files","for","a","port"],"prompt_tokens":[]}
{"code_tokens":["public","static","String","urlFormat","(","String","fmt,","Object",".",".",".","args",")","{","String[]","argsEncoded","=","new","String[args",".","length]",";","for","(","int","i","=","0",";","i","<","args",".","length",";","i++",")","{","argsEncoded[i]","=","Utils",".","urlEncodeUtf8","(","String",".","valueOf","(","args[i]",")",")",";","}","return","String",".","format","(","fmt,","argsEncoded",")",";"],"docstring_tokens":["url","formatter","for","log","links"],"prompt_tokens":[]}
{"code_tokens":["public","static","int","getLogviewerPort","(","Map<String,","Object>","config",")","{","if","(","isSecureLogviewer","(","config",")",")","{","return","(","int",")","config",".","get","(","DaemonConfig",".","LOGVIEWER_HTTPS_PORT",")",";","}","return","(","int",")","config",".","get","(","DaemonConfig",".","LOGVIEWER_PORT",")",";"],"docstring_tokens":["Get","logviewer","port","depending","on","whether","the","logviewer","is","secure","or","not"],"prompt_tokens":[]}
{"code_tokens":["public","String","execute","(","String","callSequence",")","{","\n\n","String[]","cmds","=","callSequence",".","split","(","\",\"",")",";","StringBuilder","ret","=","new","StringBuilder","(",")",";","for","(","String","cmd",":","cmds",")","{","if","(","cmd",".","startsWith","(","\"r\"",")",")","{","int","count","=","1",";","if","(","cmd",".","length","(",")",">","1",")","{","count","=","Integer",".","parseInt","(","cmd",".","substring","(","1",")",")",";","}","for","(","int","i","=","0",";","i","<","count",";","++i",")","{","EventDataWrap","ed","=","pm",".","receive","(",")",";","if","(","ed","==","null",")","{","ret",".","append","(","\"null,\"",")",";","}","else","{","ret",".","append","(","ed",".","getMessageId","(",")",".","getOffset","(",")",")",";","ret",".","append","(","\",\"",")",";","}","}","}","else","if","(","cmd",".","startsWith","(","\"a\"",")",")","{","pm",".","ack","(","cmd",".","substring","(","1",")",")",";","}","else","if","(","cmd",".","startsWith","(","\"f\"",")",")","{","pm",".","fail","(","cmd",".","substring","(","1",")",")",";","}","}","if","(","ret",".","length","(",")",">","0",")","{","ret",".","setLength","(","ret",".","length","(",")","-","1",")",";","}","return","ret",".","toString","(",")",";"],"docstring_tokens":["Execute","a","sequence","of","calls","to","Partition","Manager"],"prompt_tokens":[]}
{"code_tokens":["public","static","void","main","(","String[]","args",")","throws","Exception","{","Options","options","=","new","Options","(",")",";","options",".","addOption","(","Option",".","builder","(","\"a\"",")",".","longOpt","(","\"anonymize\"",")",".","desc","(","\"Strip","out","any","possibly","identifiable","information\"",")",".","build","(",")",")",";","options",".","addOption","(","Option",".","builder","(","\"o\"",")",".","longOpt","(","\"output-dir\"",")",".","argName","(","\"<file>\"",")",".","hasArg","(",")",".","desc","(","\"Where","to","write","(","defaults","to","\"","+","DEFAULT_OUT_DIR","+","\"",")","\"",")",".","build","(",")",")",";","options",".","addOption","(","Option",".","builder","(","\"h\"",")",".","longOpt","(","\"help\"",")",".","desc","(","\"Print","a","help","message\"",")",".","build","(",")",")",";","CommandLineParser","parser","=","new","DefaultParser","(",")",";","CommandLine","cmd","=","null",";","boolean","printHelp","=","false",";","try","{","cmd","=","parser",".","parse","(","options,","args",")",";","}","catch","(","ParseException","e",")","{","System",".","err",".","println","(","\"ERROR","\"","+","e",".","getMessage","(",")",")",";","printHelp","=","true",";","}","if","(","printHelp","||","cmd",".","hasOption","(","'h'",")",")","{","new","HelpFormatter","(",")",".","printHelp","(","\"CaptureLoad","[options]","[topologyName]*\",","options",")",";","return",";","}","\n\n","Config","conf","=","new","Config","(",")",";","int","exitStatus","=","-1",";","String","outputDir","=","DEFAULT_OUT_DIR",";","if","(","cmd",".","hasOption","(","'o'",")",")","{","outputDir","=","cmd",".","getOptionValue","(","'o'",")",";","}","File","baseOut","=","new","File","(","outputDir",")",";","LOG",".","info","(","\"Will","save","captured","topologies","to","{","}","\",","baseOut",")",";","baseOut",".","mkdirs","(",")",";","\n\n","try","(","NimbusClient","nc","=","NimbusClient",".","getConfiguredClient","(","conf",")",")","{","Nimbus",".","Iface","client","=","nc",".","getClient","(",")",";","List<String>","topologyNames","=","cmd",".","getArgList","(",")",";","\n\n","for","(","TopologySummary","topologySummary:","client",".","getTopologySummaries","(",")",")","{","if","(","topologyNames",".","isEmpty","(",")","||","topologyNames",".","contains","(","topologySummary",".","get_name","(",")",")",")","{","TopologyLoadConf","capturedConf","=","captureTopology","(","client,","topologySummary",")",";","if","(","cmd",".","hasOption","(","'a'",")",")","{","capturedConf","=","capturedConf",".","anonymize","(",")",";","}","capturedConf",".","writeTo","(","new","File","(","baseOut,","capturedConf",".","name","+","\"",".","yaml\"",")",")",";","}","}","\n\n","exitStatus","=","0",";","}","catch","(","Exception","e",")","{","LOG",".","error","(","\"Error","trying","to","capture","topologies",".",".",".","\",","e",")",";","}","finally","{","System",".","exit","(","exitStatus",")",";","}"],"docstring_tokens":["Main","entry","point","for","CaptureLoad","command"],"prompt_tokens":[]}
{"code_tokens":["@Override\n","public","String","toLocal","(","String","principal",")","{","//This","technically","does","not","conform","with","rfc1964,","but","should","work","so\n","//","long","as","you","don't","have","any","really","odd","names","in","your","KDC",".","return","principal","==","null","?","null",":","principal",".","split","(","\"[/@]\"",")","[0]",";"],"docstring_tokens":["Convert","a","Principal","to","a","local","user","name"],"prompt_tokens":[]}
{"code_tokens":["public","static","void","reset","(",")","{","ctxt",".","remove","(",")",";"],"docstring_tokens":["Reset","the","context","back","to","a","default"],"prompt_tokens":[]}
{"code_tokens":["public","Subject","subject","(",")","{","return","subject",";"],"docstring_tokens":["Retrieve","client","subject","associated","with","this","request","context"],"prompt_tokens":[]}
{"code_tokens":["public","Principal","principal","(",")","{","if","(","subject","==","null",")","{","return","null",";","}","Set<Principal>","princs","=","subject",".","getPrincipals","(",")",";","if","(","princs",".","size","(",")","==","0",")","{","return","null",";","}","return","(","Principal",")","(","princs",".","toArray","(",")","[0]",")",";"],"docstring_tokens":["The","primary","principal","associated","current","subject"],"prompt_tokens":[]}
{"code_tokens":["public","boolean","isImpersonating","(",")","{","return","this",".","realPrincipal","!=","null","&&","!this",".","realPrincipal",".","equals","(","this",".","principal","(",")",")",";"],"docstring_tokens":["Check","whether","context","is","impersonating"],"prompt_tokens":[]}
{"code_tokens":["private","TxnRecord","getTxnRecord","(","Path","indexFilePath",")","throws","IOException","{","Path","tmpPath","=","tmpFilePath","(","indexFilePath",".","toString","(",")",")",";","if","(","this",".","options",".","fs",".","exists","(","indexFilePath",")",")","{","return","readTxnRecord","(","indexFilePath",")",";","}","else","if","(","this",".","options",".","fs",".","exists","(","tmpPath",")",")","{","return","readTxnRecord","(","tmpPath",")",";","}","return","new","TxnRecord","(","0,","options",".","currentFile",".","toString","(",")",",","0",")",";"],"docstring_tokens":["Reads","the","last","txn","record","from","index","file","if","it","exists,","if","not","from",".tmp","file","if","exists"],"prompt_tokens":[]}
{"code_tokens":["public","Stream<T>","filter","(","Predicate<?","super","T>","predicate",")","{","return","new","Stream<>","(","streamBuilder,","addProcessorNode","(","new","FilterProcessor<>","(","predicate",")",",","VALUE,","true",")",")",";"],"docstring_tokens":["Returns","a","stream","consisting","of","the","elements","of","this","stream","that","matches","the","given","filter"],"prompt_tokens":[]}
{"code_tokens":["public","<K,","V>","PairStream<K,","V>","mapToPair","(","PairFunction<?","super","T,","?","extends","K,","?","extends","V>","function",")","{","return","new","PairStream<>","(","streamBuilder,","addProcessorNode","(","new","MapProcessor<>","(","function",")",",","KEY_VALUE",")",")",";"],"docstring_tokens":["Returns","a","stream","of","key-value","pairs","by","applying","a","PairFunction","on","each","value","of","this","stream"],"prompt_tokens":[]}
{"code_tokens":["public","void","forEach","(","Consumer<?","super","T>","action",")","{","addProcessorNode","(","new","ForEachProcessor<>","(","action",")",",","new","Fields","(",")",")",";"],"docstring_tokens":["Performs","an","action","for","each","element","of","this","stream"],"prompt_tokens":[]}
{"code_tokens":["public","void","print","(",")","{","forEach","(","new","PrintConsumer<T>","(",")",")",";"],"docstring_tokens":["Print","the","values","in","this","stream"],"prompt_tokens":[]}
{"code_tokens":["public","<V>","PairStream<T,","V>","stateQuery","(","StreamState<T,","V>","streamState",")","{","//","need","field","grouping","for","state","query","so","that","the","query","is","routed","to","the","correct","task\n","Node","newNode","=","partitionBy","(","VALUE,","node",".","getParallelism","(",")",")",".","addProcessorNode","(","new","StateQueryProcessor<>","(","streamState",")",",","KEY_VALUE",")",";","return","new","PairStream<>","(","streamBuilder,","newNode",")",";"],"docstring_tokens":["Queries","the","given","stream","state","with","the","values","in","this","stream","as","the","keys"],"prompt_tokens":[]}
{"code_tokens":["@Override\n","public","void","write","(","ByteBuf","dest",")","{","for","(","TaskMessage","msg",":","msgs",")","{","writeTaskMessage","(","dest,","msg",")",";","}","\n\n","//add","a","END_OF_BATCH","indicator\n","ControlMessage",".","EOB_MESSAGE",".","write","(","dest",")",";"],"docstring_tokens":["create","a","buffer","containing","the","encoding","of","this","batch"],"prompt_tokens":[]}
{"code_tokens":["void","init","(",")","throws","MetricException","{","this",".","stringMetadataCache","=","StringMetadataCache",".","getWritableStringMetadataCache","(",")",";"],"docstring_tokens":["Init","routine","called","once","the","Metadata","cache","has","been","created"],"prompt_tokens":[]}
{"code_tokens":["@Override\n","public","void","run","(",")","{","while","(","!shutdown",")","{","try","{","Metric","m","=","(","Metric",")","queue",".","take","(",")",";","processInsert","(","m",")",";","}","catch","(","Exception","e",")","{","LOG",".","error","(","\"Failed","to","insert","metric\",","e",")",";","if","(","this",".","failureMeter","!=","null",")","{","this",".","failureMeter",".","mark","(",")",";","}","}","}"],"docstring_tokens":["Run","routine","to","wait","for","metrics","on","a","queue","and","insert","into","RocksDB"],"prompt_tokens":[]}
{"code_tokens":["private","void","processInsert","(","Metric","metric",")","throws","MetricException","{","\n\n","//","convert","all","strings","to","numeric","Ids","for","the","metric","key","and","add","to","the","metadata","cache\n","long","metricTimestamp","=","metric",".","getTimestamp","(",")",";","Integer","topologyId","=","storeMetadataString","(","KeyType",".","TOPOLOGY_STRING,","metric",".","getTopologyId","(",")",",","metricTimestamp",")",";","Integer","metricId","=","storeMetadataString","(","KeyType",".","METRIC_STRING,","metric",".","getMetricName","(",")",",","metricTimestamp",")",";","Integer","componentId","=","storeMetadataString","(","KeyType",".","COMPONENT_STRING,","metric",".","getComponentId","(",")",",","metricTimestamp",")",";","Integer","executorId","=","storeMetadataString","(","KeyType",".","EXEC_ID_STRING,","metric",".","getExecutorId","(",")",",","metricTimestamp",")",";","Integer","hostId","=","storeMetadataString","(","KeyType",".","HOST_STRING,","metric",".","getHostname","(",")",",","metricTimestamp",")",";","Integer","streamId","=","storeMetadataString","(","KeyType",".","STREAM_ID_STRING,","metric",".","getStreamId","(",")",",","metricTimestamp",")",";","\n\n","RocksDbKey","key","=","RocksDbKey",".","createMetricKey","(","AggLevel",".","AGG_LEVEL_NONE,","topologyId,","metric",".","getTimestamp","(",")",",","metricId,\n","componentId,","executorId,","hostId,","metric",".","getPort","(",")",",","streamId",")",";","\n\n","//","save","metric","key/value","to","be","batched\n","RocksDbValue","value","=","new","RocksDbValue","(","metric",")",";","insertBatch",".","put","(","key,","value",")",";","\n\n","//","Aggregate","matching","metrics","over","bucket","timeframes",".","//","We'll","process","starting","with","the","longest","bucket",".","If","the","metric","for","this","does","not","exist,","we","don't","have","to\n","//","search","for","the","remaining","bucket","metrics",".","ListIterator","li","=","aggBuckets",".","listIterator","(","aggBuckets",".","size","(",")",")",";","boolean","populate","=","true",";","while","(","li",".","hasPrevious","(",")",")","{","AggLevel","bucket","=","(","AggLevel",")","li",".","previous","(",")",";","Metric","aggMetric","=","new","Metric","(","metric",")",";","aggMetric",".","setAggLevel","(","bucket",")",";","\n\n","long","msToBucket","=","1000L","*","60L","*","bucket",".","getValue","(",")",";","long","roundedToBucket","=","msToBucket","*","(","metric",".","getTimestamp","(",")","/","msToBucket",")",";","aggMetric",".","setTimestamp","(","roundedToBucket",")",";","\n\n","RocksDbKey","aggKey","=","RocksDbKey",".","createMetricKey","(","bucket,","topologyId,","aggMetric",".","getTimestamp","(",")",",","metricId,\n","componentId,","executorId,","hostId,","aggMetric",".","getPort","(",")",",","streamId",")",";","\n\n","if","(","populate",")","{","//","retrieve","any","existing","aggregation","matching","this","one","and","update","the","values\n","if","(","store",".","populateFromKey","(","aggKey,","aggMetric",")",")","{","aggMetric",".","addValue","(","metric",".","getValue","(",")",")",";","}","else","{","//","aggregating","metric","did","not","exist,","don't","look","for","further","ones","with","smaller","timestamps\n","populate","=","false",";","}","}","\n\n","//","save","metric","key/value","to","be","batched\n","RocksDbValue","aggVal","=","new","RocksDbValue","(","aggMetric",")",";","insertBatch",".","put","(","aggKey,","aggVal",")",";","}","\n\n","processBatchInsert","(","insertBatch",")",";","\n\n","insertBatch",".","clear","(",")",";"],"docstring_tokens":["Performs","the","actual","metric","insert,","and","aggregates","over","all","bucket","times"],"prompt_tokens":[]}
{"code_tokens":["public","static","InputStream","fromConf","(","Map<String,","Object>","conf",")","{","String","component","=","(","String",")","conf",".","get","(","\"from\"",")",";","String","toComp","=","(","String",")","conf",".","get","(","\"to\"",")",";","NormalDistStats","execTime","=","NormalDistStats",".","fromConf","(","(","Map<String,","Object>",")","conf",".","get","(","\"execTime\"",")",")",";","NormalDistStats","processTime","=","NormalDistStats",".","fromConf","(","(","Map<String,","Object>",")","conf",".","get","(","\"processTime\"",")",")",";","Map<String,","Object>","grouping","=","(","Map<String,","Object>",")","conf",".","get","(","\"grouping\"",")",";","GroupingType","groupingType","=","GroupingType",".","fromConf","(","(","String",")","grouping",".","get","(","\"type\"",")",")",";","String","streamId","=","(","String",")","grouping",".","getOrDefault","(","\"streamId\",","\"default\"",")",";","return","new","InputStream","(","component,","toComp,","streamId,","execTime,","processTime,","groupingType",")",";"],"docstring_tokens":["Create","an","output","stream","from","a","config"],"prompt_tokens":[]}
{"code_tokens":["public","synchronized","GlobalStreamId","gsid","(",")","{","if","(","gsid","==","null",")","{","gsid","=","new","GlobalStreamId","(","fromComponent,","id",")",";","}","return","gsid",";"],"docstring_tokens":["Get","the","global","stream","id","for","this","input","stream"],"prompt_tokens":[]}
{"code_tokens":["public","void","updateState","(","List<TridentTuple>","tuples,","TridentCollector","collector",")","{","String","topic","=","null",";","try","{","final","long","startTime","=","System",".","currentTimeMillis","(",")",";","int","numberOfRecords","=","tuples",".","size","(",")",";","List<Future<RecordMetadata>>","futures","=","new","ArrayList<>","(","numberOfRecords",")",";","for","(","TridentTuple","tuple",":","tuples",")","{","topic","=","topicSelector",".","getTopic","(","tuple",")",";","V","messageFromTuple","=","mapper",".","getMessageFromTuple","(","tuple",")",";","K","keyFromTuple","=","mapper",".","getKeyFromTuple","(","tuple",")",";","\n\n","if","(","topic","!=","null",")","{","if","(","messageFromTuple","!=","null",")","{","Future<RecordMetadata>","result","=","producer",".","send","(","new","ProducerRecord<>","(","topic,","keyFromTuple,","messageFromTuple",")",")",";","futures",".","add","(","result",")",";","}","else","{","LOG",".","warn","(","\"skipping","Message","with","Key","{","}","as","message","was","null\",","keyFromTuple",")",";","}","\n\n","}","else","{","LOG",".","warn","(","\"skipping","key","=","{","}",",","topic","selector","returned","null",".","\",","keyFromTuple",")",";","}","}","\n\n","int","emittedRecords","=","futures",".","size","(",")",";","List<ExecutionException>","exceptions","=","new","ArrayList<>","(","emittedRecords",")",";","for","(","Future<RecordMetadata>","future",":","futures",")","{","try","{","future",".","get","(",")",";","}","catch","(","ExecutionException","e",")","{","exceptions",".","add","(","e",")",";","}","}","\n\n","if","(","exceptions",".","size","(",")",">","0",")","{","StringBuilder","errorMsg","=","new","StringBuilder","(","\"Could","not","retrieve","result","for","messages","\"",")",";","errorMsg",".","append","(","tuples",")",".","append","(","\"","from","topic","=","\"",")",".","append","(","topic",")",".","append","(","\"","because","of","the","following","exceptions:\"",")",".","append","(","System",".","lineSeparator","(",")",")",";","\n\n","for","(","ExecutionException","exception",":","exceptions",")","{","errorMsg","=","errorMsg",".","append","(","exception",".","getMessage","(",")",")",".","append","(","System",".","lineSeparator","(",")",")",";","}","String","message","=","errorMsg",".","toString","(",")",";","LOG",".","error","(","message",")",";","throw","new","FailedException","(","message",")",";","}","long","latestTime","=","System",".","currentTimeMillis","(",")",";","LOG",".","info","(","\"Emitted","record","{","}","sucessfully","in","{","}","ms","to","topic","{","}","\",","emittedRecords,","latestTime","-","startTime,","topic",")",";","\n\n","}","catch","(","Exception","ex",")","{","String","errorMsg","=","\"Could","not","send","messages","\"","+","tuples","+","\"","to","topic","=","\"","+","topic",";","LOG",".","warn","(","errorMsg,","ex",")",";","throw","new","FailedException","(","errorMsg,","ex",")",";","}"],"docstring_tokens":["Write","the","given","tuples","to","Kafka"],"prompt_tokens":[]}
{"code_tokens":["public","void","readBlobTo","(","String","key,","OutputStream","out,","Subject","who",")","throws","IOException,","KeyNotFoundException,","AuthorizationException","{","InputStreamWithMeta","in","=","getBlob","(","key,","who",")",";","if","(","in","==","null",")","{","throw","new","IOException","(","\"Could","not","find","\"","+","key",")",";","}","byte[]","buffer","=","new","byte[2048]",";","int","len","=","0",";","try","{","while","(","(","len","=","in",".","read","(","buffer",")",")",">","0",")","{","out",".","write","(","buffer,","0,","len",")",";","}","}","finally","{","in",".","close","(",")",";","out",".","flush","(",")",";","}"],"docstring_tokens":["Reads","the","blob","from","the","blob","store","and","writes","it","into","the","output","stream"],"prompt_tokens":[]}
{"code_tokens":["public","byte[]","readBlob","(","String","key,","Subject","who",")","throws","IOException,","KeyNotFoundException,","AuthorizationException","{","ByteArrayOutputStream","out","=","new","ByteArrayOutputStream","(",")",";","readBlobTo","(","key,","out,","who",")",";","byte[]","bytes","=","out",".","toByteArray","(",")",";","out",".","close","(",")",";","return","bytes",";"],"docstring_tokens":["Wrapper","around","readBlobTo","which","returns","a","ByteArray","output","stream"],"prompt_tokens":[]}
{"code_tokens":["public","Set<String>","storedTopoIds","(",")","{","return","filterAndListKeys","(","TO_TOPO_ID",")",";"],"docstring_tokens":["Get","IDs","stored","in","blob","store"],"prompt_tokens":[]}
{"code_tokens":["public","void","updateLastBlobUpdateTime","(",")","throws","IOException","{","//","default","implementation","is","a","NOOP","."],"docstring_tokens":["Updates","the","last","update","time","of","existing","blobs","in","the","blobstore","to","the","current","time"],"prompt_tokens":[]}
{"code_tokens":["public","void","validateBlobUpdateTime","(",")","throws","IOException","{","//","default","implementation","is","a","NOOP","."],"docstring_tokens":["Validates","that","the","blob","update","time","of","the","blobstore","is","up","to","date","with","the","current","existing","blobs"],"prompt_tokens":[]}
{"code_tokens":["@Override\n","protected","Cluster","make","(","Map<String,","Object>","topoConf",")","{","CassandraConf","cassandraConf","=","new","CassandraConf","(","topoConf",")",";","\n\n","Cluster",".","Builder","cluster","=","Cluster",".","builder","(",")",".","withoutJMXReporting","(",")",".","withoutMetrics","(",")",".","addContactPoints","(","cassandraConf",".","getNodes","(",")",")",".","withPort","(","cassandraConf",".","getPort","(",")",")",".","withRetryPolicy","(","cassandraConf",".","getRetryPolicy","(",")",")",".","withReconnectionPolicy","(","new","ExponentialReconnectionPolicy","(","cassandraConf",".","getReconnectionPolicyBaseMs","(",")",",\n","cassandraConf",".","getReconnectionPolicyMaxMs","(",")",")",")",".","withLoadBalancingPolicy","(","cassandraConf",".","getLoadBalancingPolicy","(",")",")",";","cluster",".","getConfiguration","(",")",".","getSocketOptions","(",")",".","setReadTimeoutMillis","(","(","int",")","cassandraConf",".","getSocketReadTimeoutMillis","(",")",")",";","cluster",".","getConfiguration","(",")",".","getSocketOptions","(",")",".","setConnectTimeoutMillis","(","(","int",")","cassandraConf",".","getSocketConnectTimeoutMillis","(",")",")",";","\n\n","final","String","username","=","cassandraConf",".","getUsername","(",")",";","final","String","password","=","cassandraConf",".","getPassword","(",")",";","\n\n","if","(","StringUtils",".","isNotEmpty","(","username",")","&&","StringUtils",".","isNotEmpty","(","password",")",")","{","cluster",".","withAuthProvider","(","new","PlainTextAuthProvider","(","username,","password",")",")",";","}","\n\n","QueryOptions","options","=","new","QueryOptions","(",")",".","setConsistencyLevel","(","cassandraConf",".","getConsistencyLevel","(",")",")",";","cluster",".","withQueryOptions","(","options",")",";","\n\n","PoolingOptions","poolOps","=","new","PoolingOptions","(",")",";","poolOps",".","setMaxQueueSize","(","cassandraConf",".","getPoolMaxQueueSize","(",")",")",";","poolOps",".","setHeartbeatIntervalSeconds","(","cassandraConf",".","getHeartbeatIntervalSeconds","(",")",")",";","poolOps",".","setIdleTimeoutSeconds","(","cassandraConf",".","getIdleTimeoutSeconds","(",")",")",";","poolOps",".","setMaxRequestsPerConnection","(","HostDistance",".","LOCAL,","cassandraConf",".","getMaxRequestPerConnectionLocal","(",")",")",";","poolOps",".","setMaxRequestsPerConnection","(","HostDistance",".","REMOTE,","cassandraConf",".","getMaxRequestPerConnectionRemote","(",")",")",";","cluster",".","withPoolingOptions","(","poolOps",")",";","\n\n","return","cluster",".","build","(",")",";"],"docstring_tokens":["Creates","a","new","Cluster","based","on","the","specified","configuration"],"prompt_tokens":[]}
{"code_tokens":["public","void","addSupervisor","(","org",".","apache",".","storm",".","daemon",".","supervisor",".","Supervisor","supervisor",")","{","assignmentsDistributer",".","addLocalSupervisor","(","supervisor",")",";"],"docstring_tokens":["Used","for","local","cluster"],"prompt_tokens":[]}
{"code_tokens":["public","static","void","main","(","String","[]","args",")","throws","Exception","{","Utils",".","setupDefaultUncaughtExceptionHandler","(",")",";","Map<String,","Object>","conf","=","ConfigUtils",".","readStormConfig","(",")",";","StormMetricsRegistry","metricsRegistry","=","new","StormMetricsRegistry","(",")",";","try","(","DRPCServer","server","=","new","DRPCServer","(","conf,","metricsRegistry",")",")","{","metricsRegistry",".","startMetricsReporters","(","conf",")",";","Utils",".","addShutdownHookWithForceKillIn1Sec","(","(",")","->","{","server",".","meterShutdownCalls",".","mark","(",")",";","metricsRegistry",".","stopMetricsReporters","(",")",";","server",".","close","(",")",";","}",")",";","server",".","start","(",")",";","server",".","awaitTermination","(",")",";","}"],"docstring_tokens":["Main","method","to","start","the","server"],"prompt_tokens":[]}
{"code_tokens":["private","void","maybeAddCheckpointSpout","(",")","{","if","(","hasStatefulBolt",")","{","setSpout","(","CHECKPOINT_COMPONENT_ID,","new","CheckpointSpout","(",")",",","1",")",";","}"],"docstring_tokens":["If","the","topology","has","at","least","one","stateful","bolt","add","a","CheckpointSpout","component","to","the","topology"],"prompt_tokens":[]}
{"code_tokens":["@Override\n","public","Map<String,","Object>","load","(","String","configKey",")","{","if","(","targetUri","==","null",")","{","return","null",";","}","\n\n","//","Check","for","new","file","every","so","often\n","int","currentTimeSecs","=","Time",".","currentTimeSecs","(",")",";","if","(","lastReturnedValue","!=","null","&&","(","(","currentTimeSecs","-","lastReturnedTime",")","<","artifactoryPollTimeSecs",")",")","{","LOG",".","debug","(","\"currentTimeSecs:","{","}",";","lastReturnedTime","{","}",";","artifactoryPollTimeSecs:","{","}",".","Returning","our","last","map",".","\",\n","currentTimeSecs,","lastReturnedTime,","artifactoryPollTimeSecs",")",";","return","(","Map<String,","Object>",")","lastReturnedValue",".","get","(","configKey",")",";","}","\n\n","try","{","Map<String,","Object>","raw","=","loadFromUri","(","targetUri",")",";","if","(","raw","!=","null",")","{","return","(","Map<String,","Object>",")","raw",".","get","(","configKey",")",";","}","}","catch","(","Exception","e",")","{","LOG",".","error","(","\"Failed","to","load","from","uri","{","}","\",","targetUri",")",";","}","return","null",";"],"docstring_tokens":["Load","the","configs","associated","with","the","configKey","from","the","targetURI"],"prompt_tokens":[]}
{"code_tokens":["private","void","loginHadoopUser","(","Subject","subject",")","{","Class<?>","ugi",";","try","{","ugi","=","Class",".","forName","(","\"org",".","apache",".","hadoop",".","security",".","UserGroupInformation\"",")",";","}","catch","(","ClassNotFoundException","e",")","{","LOG",".","info","(","\"Hadoop","was","not","found","on","the","class","path\"",")",";","return",";","}","try","{","Method","isSecEnabled","=","ugi",".","getMethod","(","\"isSecurityEnabled\"",")",";","if","(","!","(","(","Boolean",")","isSecEnabled",".","invoke","(","null",")",")",")","{","LOG",".","warn","(","\"Hadoop","is","on","the","classpath","but","not","configured","for","\"\n","+","\"security,","if","you","want","security","you","need","to","be","sure","that","\"\n","+","\"hadoop",".","security",".","authentication=kerberos","in","core-site",".","xml","\"\n","+","\"in","your","jar\"",")",";","return",";","}","\n\n","LOG",".","info","(","\"Invoking","Hadoop","UserGroupInformation",".","loginUserFromSubject",".","\"",")",";","Method","login","=","ugi",".","getMethod","(","\"loginUserFromSubject\",","Subject",".","class",")",";","login",".","invoke","(","null,","subject",")",";","\n\n","//Refer","to","STORM-3606","for","details\n","LOG",".","warn","(","\"UserGroupInformation",".","loginUserFromSubject","will","spawn","a","TGT","renewal","thread","(","\\\"TGT","Renewer","for","<username>\\\"",")","\"\n","+","\"to","execute","\\\"kinit","-R\\\"","command","some","time","before","the","current","TGT","expires",".","\"\n","+","\"It","will","fail","because","TGT","is","not","in","the","local","TGT","cache","and","the","thread","will","eventually","abort",".","\"\n","+","\"Exceptions","from","this","TGT","renewal","thread","can","be","ignored",".","Note:","TGT","for","the","Worker","is","kept","in","memory",".","\"\n","+","\"Please","refer","to","STORM-3606","for","detailed","explanations\"",")",";","}","catch","(","Exception","e",")","{","LOG",".","error","(","\"Something","went","wrong","while","trying","to","initialize","Hadoop","through","reflection",".","This","version","of","hadoop","\"\n","+","\"may","not","be","compatible",".","\",","e",")",";","}"],"docstring_tokens":["Hadoop","does","not","just","go","off","of","a","TGT,","it","needs","a","bit","more"],"prompt_tokens":[]}
{"code_tokens":["public","static","void","validateField","(","String","fieldName,","Map<String,","Object>","conf",")","{","validateField","(","fieldName,","conf,","getConfigClasses","(",")",")",";"],"docstring_tokens":["Validates","a","field","given","field","name","as","string","uses","Config.java","as","the","default","config","class"],"prompt_tokens":[]}
{"code_tokens":["public","static","void","validateFields","(","Map<String,","Object>","conf",")","{","validateFields","(","conf,","getConfigClasses","(",")",")",";"],"docstring_tokens":["Validate","all","confs","in","map"],"prompt_tokens":[]}
{"code_tokens":["public","ByTopicRecordTranslator<K,","V>","forTopic","(","String","topic,","Func<ConsumerRecord<K,","V>,","List<Object>>","func,","Fields","fields",")","{","return","forTopic","(","topic,","new","SimpleRecordTranslator<>","(","func,","fields",")",")",";"],"docstring_tokens":["Configure","a","translator","for","a","given","topic","with","tuples","to","be","emitted","to","the","default","stream"],"prompt_tokens":[]}
{"code_tokens":["public","ByTopicRecordTranslator<K,","V>","forTopic","(","String","topic,","Func<ConsumerRecord<K,","V>,\n","List<Object>>","func,","Fields","fields,","String","stream",")","{","return","forTopic","(","topic,","new","SimpleRecordTranslator<>","(","func,","fields,","stream",")",")",";"],"docstring_tokens":["Configure","a","translator","for","a","given","topic"],"prompt_tokens":[]}
{"code_tokens":["public","ByTopicRecordTranslator<K,","V>","forTopic","(","String","topic,","RecordTranslator<K,","V>","translator",")","{","if","(","topicToTranslator",".","containsKey","(","topic",")",")","{","throw","new","IllegalStateException","(","\"Topic","\"","+","topic","+","\"","is","already","registered\"",")",";","}","cacheNCheckFields","(","translator",")",";","topicToTranslator",".","put","(","topic,","translator",")",";","return","this",";"],"docstring_tokens":["Configure","a","translator","for","a","given","kafka","topic"],"prompt_tokens":[]}
{"code_tokens":["public","List<Integer>","emit","(","List<Object>","tuple",")","{","return","emit","(","Utils",".","DEFAULT_STREAM_ID,","tuple",")",";"],"docstring_tokens":["Emits","a","tuple","to","the","default","output","stream"],"prompt_tokens":[]}
{"code_tokens":["@Override\n","public","boolean","doRequiredTopoFilesExist","(","Map<String,","Object>","conf,","String","topologyId",")","throws","IOException","{","return","ClientSupervisorUtils",".","doRequiredTopoFilesExist","(","conf,","topologyId",")",";"],"docstring_tokens":["Sanity","check","if","everything","the","topology","needs","is","there","for","it","to","run"],"prompt_tokens":[]}
{"code_tokens":["@Override\n","public","byte[]","slurp","(","File","location",")","throws","IOException","{","return","FileUtils",".","readFileToByteArray","(","location",")",";"],"docstring_tokens":["Read","the","contents","of","a","file","into","a","byte","array"],"prompt_tokens":[]}
{"code_tokens":["@Override\n","public","void","createSymlink","(","File","link,","File","target",")","throws","IOException","{","if","(","symlinksDisabled",")","{","throw","new","IOException","(","\"Symlinks","have","been","disabled,","this","should","not","be","called\"",")",";","}","Path","plink","=","link",".","toPath","(",")",".","toAbsolutePath","(",")",";","Path","ptarget","=","target",".","toPath","(",")",".","toAbsolutePath","(",")",";","LOG",".","debug","(","\"Creating","symlink","[","{","}","]","to","[","{","}","]\",","plink,","ptarget",")",";","if","(","Files",".","exists","(","plink",")",")","{","if","(","Files",".","isSameFile","(","plink,","ptarget",")",")","{","//It","already","points","where","we","want","it","to\n","return",";","}","FileUtils",".","forceDelete","(","link",")",";","}","Files",".","createSymbolicLink","(","plink,","ptarget",")",";"],"docstring_tokens":["Create","a","symbolic","link","pointing","at","target"],"prompt_tokens":[]}
{"code_tokens":["@Override\n","public","Double","getValue","(",")","{","return","currentRate",";"],"docstring_tokens":["Reports","the","the","average","rate","of","events","per","second","over","1","minute","for","the","metric"],"prompt_tokens":[]}
{"code_tokens":["void","update","(",")","{","time","=","(","time","+","1",")","%","values",".","length",";","values[time]","=","counter",".","getCount","(",")",";","currentRate","=","(","(","double",")","(","values[time]","-","values[","(","time","+","1",")","%","values",".","length]",")","/","timeSpanInSeconds",")",";"],"docstring_tokens":["Updates","the","rate","in","a","background","thread","by","a","StormMetricRegistry","at","a","fixed","frequency"],"prompt_tokens":[]}
{"code_tokens":["@Override\n","public","Map<String,","Object>","load","(","String","configKey",")","{","if","(","targetFilePath","!=","null",")","{","try","{","Map<String,","Object>","raw","=","(","Map<String,","Object>",")","Utils",".","readYamlFile","(","targetFilePath",")",";","if","(","raw","!=","null",")","{","return","(","Map<String,","Object>",")","raw",".","get","(","configKey",")",";","}","}","catch","(","Exception","e",")","{","LOG",".","error","(","\"Failed","to","load","from","file","{","}","\",","targetFilePath",")",";","}","}","return","null",";"],"docstring_tokens":["Load","the","configs","associated","with","the","configKey","from","the","targetFilePath"],"prompt_tokens":[]}
{"code_tokens":["public","List<Path>","getAllLogsForRootDir","(",")","throws","IOException","{","List<Path>","files","=","new","ArrayList<>","(",")",";","Set<Path>","topoDirFiles","=","getAllWorkerDirs","(",")",";","if","(","topoDirFiles","!=","null",")","{","for","(","Path","portDir",":","topoDirFiles",")","{","files",".","addAll","(","directoryCleaner",".","getFilesForDir","(","portDir",")",")",";","}","}","\n\n","return","files",";"],"docstring_tokens":["Return","a","list","of","all","log","files","from","worker","directories","in","root","log","directory"],"prompt_tokens":[]}
{"code_tokens":["public","Set<Path>","getAllWorkerDirs","(",")","{","try","(","Stream<Path>","topoDirs","=","Files",".","list","(","logRootDir",")",")","{","return","topoDirs\n",".","filter","(","Files::isDirectory",")",".","flatMap","(","Unchecked",".","function","(","Files::list",")",")","//Worker","dirs\n",".","filter","(","Files::isDirectory",")",".","collect","(","Collectors",".","toCollection","(","TreeSet::new",")",")",";","}","catch","(","IOException","e",")","{","throw","Utils",".","wrapInRuntime","(","e",")",";","}"],"docstring_tokens":["Return","a","set","of","all","worker","directories","in","all","topology","directories","in","root","log","directory"],"prompt_tokens":[]}
{"code_tokens":["public","String","getTopologyOwnerFromMetadataFile","(","Path","metaFile",")","{","Map<String,","Object>","map","=","(","Map<String,","Object>",")","Utils",".","readYamlFile","(","metaFile",".","toString","(",")",")",";","return","ObjectReader",".","getString","(","map",".","get","(","TOPOLOGY_SUBMITTER_USER",")",",","null",")",";"],"docstring_tokens":["Return","topology","owner","from","worker","meta","file"],"prompt_tokens":[]}
{"code_tokens":["public","Set<String>","getAliveIds","(","int","nowSecs",")","throws","IOException","{","return","SupervisorUtils",".","readWorkerHeartbeats","(","stormConf",")",".","entrySet","(",")",".","stream","(",")",".","filter","(","entry","->","Objects",".","nonNull","(","entry",".","getValue","(",")",")","&&","!isTimedOut","(","nowSecs,","entry",")",")",".","map","(","Map",".","Entry::getKey",")",".","collect","(","toCollection","(","TreeSet::new",")",")",";"],"docstring_tokens":["Retrieve","the","set","of","alive","worker","IDs"],"prompt_tokens":[]}
{"code_tokens":["public","SortedSet<Path>","getLogDirs","(","Set<Path>","logDirs,","Predicate<String>","predicate",")","{","//","we","could","also","make","this","static,","but","not","to","do","it","due","to","mock\n","TreeSet<Path>","ret","=","new","TreeSet<>","(",")",";","for","(","Path","logDir:","logDirs",")","{","String","workerId","=","\"\"",";","try","{","Optional<Path>","metaFile","=","getMetadataFileForWorkerLogDir","(","logDir",")",";","if","(","metaFile",".","isPresent","(",")",")","{","workerId","=","getWorkerIdFromMetadataFile","(","metaFile",".","get","(",")",".","toAbsolutePath","(",")",".","normalize","(",")",")",";","if","(","workerId","==","null",")","{","workerId","=","\"\"",";","}","}","}","catch","(","IOException","e",")","{","LOG",".","warn","(","\"Error","trying","to","find","worker",".","yaml","in","{","}","\",","logDir,","e",")",";","}","if","(","predicate",".","test","(","workerId",")",")","{","ret",".","add","(","logDir",")",";","}","}","return","ret",";"],"docstring_tokens":["Finds","directories","for","specific","worker","ids","that","can","be","cleaned","up"],"prompt_tokens":[]}
{"code_tokens":["public","static","IVersionInfo","getFromClasspath","(","String","cp",")","{","List<String>","classpath","=","Arrays",".","asList","(","cp",".","split","(","File",".","pathSeparator",")",")",";","return","getFromClasspath","(","classpath",")",";"],"docstring_tokens":["Look","for","the","version","of","storm","defined","by","the","given","classpath"],"prompt_tokens":[]}
{"code_tokens":["private","boolean","isGzipped","(","byte[]","bytes",")","{","return","(","bytes",".","length",">","1",")","&&","(","bytes[0]","==","GZIP_MAGIC_FIRST_BYTE",")","&&","(","bytes[1]","==","GZIP_MAGIC_SECOND_BYTE",")",";"],"docstring_tokens":["Looks","ahead","to","see","if","the","GZIP","magic","constant","is","heading","bytes"],"prompt_tokens":[]}
{"code_tokens":["public","static","Evaluator","newEvaluator","(","PMML","pmml",")","{","Objects",".","requireNonNull","(","pmml",")",";","final","PMMLManager","pmmlManager","=","new","PMMLManager","(","pmml",")",";","return","(","ModelEvaluator<?>",")","pmmlManager",".","getModelManager","(","null,","ModelEvaluatorFactory",".","getInstance","(",")",")",";"],"docstring_tokens":["Creates","a","new","Evaluator","object","representing","the","PMML","model","defined","in","the","PMML","argument"],"prompt_tokens":[]}
{"code_tokens":["private","Map<String,","Component>","computeComponentMap","(","StormTopology","topology",")","{","Map<String,","Component>","ret","=","new","HashMap<>","(",")",";","\n\n","Map<String,","SpoutSpec>","spouts","=","topology",".","get_spouts","(",")",";","Map<String,","Bolt>","bolts","=","topology",".","get_bolts","(",")",";","\n\n","if","(","spouts","!=","null",")","{","for","(","Map",".","Entry<String,","SpoutSpec>","entry",":","spouts",".","entrySet","(",")",")","{","String","compId","=","entry",".","getKey","(",")",";","SpoutSpec","spout","=","entry",".","getValue","(",")",";","if","(","!Utils",".","isSystemId","(","compId",")",")","{","Component","comp","=","new","Component","(","ComponentType",".","SPOUT,","compId,","componentToExecs","(","compId",")",",","spout",".","get_common","(",")",".","get_inputs","(",")",")",";","ret",".","put","(","compId,","comp",")",";","}","}","}","if","(","bolts","!=","null",")","{","for","(","Map",".","Entry<String,","Bolt>","entry",":","bolts",".","entrySet","(",")",")","{","String","compId","=","entry",".","getKey","(",")",";","Bolt","bolt","=","entry",".","getValue","(",")",";","if","(","!Utils",".","isSystemId","(","compId",")",")","{","Component","comp","=","new","Component","(","ComponentType",".","BOLT,","compId,","componentToExecs","(","compId",")",",","bolt",".","get_common","(",")",".","get_inputs","(",")",")",";","ret",".","put","(","compId,","comp",")",";","}","}","}","\n\n","//Link","the","components","together\n","if","(","spouts","!=","null",")","{","for","(","Map",".","Entry<String,","SpoutSpec>","entry",":","spouts",".","entrySet","(",")",")","{","Component","spout","=","ret",".","get","(","entry",".","getKey","(",")",")",";","for","(","String","parentId",":","getInputsTo","(","entry",".","getValue","(",")",".","get_common","(",")",")",")","{","ret",".","get","(","parentId",")",".","addChild","(","spout",")",";","}","}","}","\n\n","if","(","bolts","!=","null",")","{","for","(","Map",".","Entry<String,","Bolt>","entry",":","bolts",".","entrySet","(",")",")","{","Component","bolt","=","ret",".","get","(","entry",".","getKey","(",")",")",";","for","(","String","parentId",":","getInputsTo","(","entry",".","getValue","(",")",".","get_common","(",")",")",")","{","ret",".","get","(","parentId",")",".","addChild","(","bolt",")",";","}","}","}","return","ret",";"],"docstring_tokens":["Compute","a","map","of","user","topology","specific","components"],"prompt_tokens":[]}
{"code_tokens":["public","Double","getOnHeapMemoryRequirement","(","ExecutorDetails","exec",")","{","Double","ret","=","null",";","if","(","hasExecInTopo","(","exec",")",")","{","ret","=","resourceList\n",".","get","(","exec",")",".","getOnHeapMemoryMb","(",")",";",";","}","return","ret",";"],"docstring_tokens":["Gets","the","on","heap","memory","requirement","for","a","certain","task","within","a","topology"],"prompt_tokens":[]}
{"code_tokens":["public","Double","getOffHeapMemoryRequirement","(","ExecutorDetails","exec",")","{","Double","ret","=","null",";","if","(","hasExecInTopo","(","exec",")",")","{","ret","=","resourceList\n",".","get","(","exec",")",".","getOffHeapMemoryMb","(",")",";","}","return","ret",";"],"docstring_tokens":["Gets","the","off","heap","memory","requirement","for","a","certain","task","within","a","topology"],"prompt_tokens":[]}
{"code_tokens":["public","Double","getTotalMemReqTask","(","ExecutorDetails","exec",")","{","if","(","hasExecInTopo","(","exec",")",")","{","return","getOffHeapMemoryRequirement","(","exec",")","+","getOnHeapMemoryRequirement","(","exec",")",";","}","return","null",";"],"docstring_tokens":["Gets","the","total","memory","requirement","for","a","task"],"prompt_tokens":[]}
{"code_tokens":["public","Set<SharedMemory>","getSharedMemoryRequests","(","Collection<ExecutorDetails>","executors\n",")","{","Set<String>","components","=","new","HashSet<>","(",")",";","for","(","ExecutorDetails","exec",":","executors",")","{","String","component","=","executorToComponent",".","get","(","exec",")",";","if","(","component","!=","null",")","{","components",".","add","(","component",")",";","}","}","Set<SharedMemory>","ret","=","new","HashSet<>","(",")",";","if","(","topology","!=","null",")","{","//topology","being","null","is","used","for","tests","We","probably","should","fix","that","at","some","point,\n","//","but","it","is","not","trivial","to","do",".",".",".","Map<String,","Set<String>>","compToSharedName","=","topology",".","get_component_to_shared_memory","(",")",";","if","(","compToSharedName","!=","null",")","{","for","(","String","component",":","components",")","{","Set<String>","sharedNames","=","compToSharedName",".","get","(","component",")",";","if","(","sharedNames","!=","null",")","{","for","(","String","name",":","sharedNames",")","{","ret",".","add","(","topology",".","get_shared_memory","(",")",".","get","(","name",")",")",";","}","}","}","}","}","return","ret",";"],"docstring_tokens":["Gets","the","total","memory","resource","list","for","a","set","of","tasks","that","is","part","of","a","topology"],"prompt_tokens":[]}
{"code_tokens":["public","NormalizedResourceRequest","getApproximateTotalResources","(",")","{","NormalizedResourceRequest","ret","=","new","NormalizedResourceRequest","(",")",";","for","(","NormalizedResourceRequest","resources",":","resourceList",".","values","(",")",")","{","ret",".","add","(","resources",")",";","}","return","ret",";"],"docstring_tokens":["Get","an","approximate","total","resources","needed","for","this","topology"],"prompt_tokens":[]}
{"code_tokens":["public","NormalizedResourceRequest","getApproximateResources","(","Set<ExecutorDetails>","execs",")","{","NormalizedResourceRequest","ret","=","new","NormalizedResourceRequest","(",")",";","execs",".","stream","(",")",".","filter","(","x","->","hasExecInTopo","(","x",")",")",".","forEach","(","x","->","ret",".","add","(","resourceList",".","get","(","x",")",")",")",";","return","ret",";"],"docstring_tokens":["Get","approximate","resources","for","given","topology","executors"],"prompt_tokens":[]}
{"code_tokens":["public","boolean","hasExecInTopo","(","ExecutorDetails","exec",")","{","return","resourceList","!=","null","&&","resourceList",".","containsKey","(","exec",")",";"],"docstring_tokens":["Checks","if","a","executor","is","part","of","this","topology"],"prompt_tokens":[]}
{"code_tokens":["private","void","addDefaultResforExec","(","ExecutorDetails","exec",")","{","String","componentId","=","getExecutorToComponent","(",")",".","get","(","exec",")",";","addResourcesForExec","(","exec,","new","NormalizedResourceRequest","(","topologyConf,","componentId",")",")",";"],"docstring_tokens":["Add","default","resource","requirements","for","a","executor"],"prompt_tokens":[]}
{"code_tokens":["public","static","Exclusion","createExclusion","(","String","exclusionString",")","{","String[]","parts","=","exclusionString",".","split","(","\":\"",")",";","\n\n","String","artifactId","=","\"*\"",";","String","classifier","=","\"*\"",";","String","extension","=","\"*\"",";","\n\n","int","len","=","parts",".","length",";","if","(","len",">","1",")","{","artifactId","=","parts[1]",";","}","if","(","len",">","2",")","{","classifier","=","parts[2]",";","}","if","(","len",">","3",")","{","extension","=","parts[3]",";","}","\n\n","//","length","of","parts","should","be","greater","than","0\n","String","groupId","=","parts[0]",";","\n\n","return","new","Exclusion","(","groupId,","artifactId,","classifier,","extension",")",";"],"docstring_tokens":["Parses","exclusion","parameter","and","build","Exclusion","object"],"prompt_tokens":[]}
{"code_tokens":["public","void","setArgs","(","List<Object>","args",")","{","\n\n","List<Object>","newVal","=","new","ArrayList<Object>","(",")",";","for","(","Object","obj",":","args",")","{","if","(","obj","instanceof","LinkedHashMap",")","{","Map<String,","Object>","map","=","(","Map<String,","Object>",")","obj",";","if","(","map",".","containsKey","(","\"ref\"",")","&&","map",".","size","(",")","==","1",")","{","newVal",".","add","(","new","BeanReference","(","(","String",")","map",".","get","(","\"ref\"",")",")",")",";","this",".","hasReferences","=","true",";","}","else","if","(","map",".","containsKey","(","\"reflist\"",")","&&","map",".","size","(",")","==","1",")","{","newVal",".","add","(","new","BeanListReference","(","(","List<String>",")","map",".","get","(","\"reflist\"",")",")",")",";","this",".","hasReferences","=","true",";","}","else","{","newVal",".","add","(","obj",")",";","}","}","else","{","newVal",".","add","(","obj",")",";","}","}","this",".","args","=","newVal",";"],"docstring_tokens":["Set","the","method","arguments"],"prompt_tokens":[]}
{"code_tokens":["@Override\n","public","TriggerPolicy<T,","?>","getTriggerPolicy","(","TriggerHandler","triggerHandler,","EvictionPolicy<T,","?>","evictionPolicy",")","{","return","new","CountTriggerPolicy<>","(","windowConfig",".","getSlidingLength","(",")",",","triggerHandler,","evictionPolicy",")",";"],"docstring_tokens":["Returns","a","TriggerPolicy","which","triggers","for","every","count","of","given","sliding","window"],"prompt_tokens":[]}
{"code_tokens":["@Override\n","public","EvictionPolicy<T,","?>","getEvictionPolicy","(",")","{","return","new","CountEvictionPolicy<>","(","windowConfig",".","getWindowLength","(",")",")",";"],"docstring_tokens":["Returns","an","EvictionPolicy","instance","which","evicts","elements","after","a","count","of","given","window","length"],"prompt_tokens":[]}
{"code_tokens":["public","void","refreshPartitions","(","List<KafkaTridentSpoutTopicPartition>","partitionResponsibilities",")","{","Set<TopicPartition>","assignedTps","=","partitionResponsibilities",".","stream","(",")",".","map","(","kttp","->","kttp",".","getTopicPartition","(",")",")",".","collect","(","Collectors",".","toSet","(",")",")",";","topicAssigner",".","assignPartitions","(","consumer,","assignedTps,","new","KafkaSpoutConsumerRebalanceListener","(",")",")",";","LOG",".","debug","(","\"Assigned","partitions","[","{","}","]","to","this","task\",","assignedTps",")",";"],"docstring_tokens":["Prepare","the","emitter","to","handle","the","input","partitions"],"prompt_tokens":[]}
{"code_tokens":["public","HiveStateFactory","withOptions","(","HiveOptions","options",")","{","if","(","options",".","getTickTupleInterval","(",")","!=","HiveOptions",".","DEFAULT_TICK_TUPLE_INTERVAL_SECS",")","{","LOG",".","error","(","\"Tick","tuple","interval","will","be","ignored","for","trident",".","\"\n","+","\"","The","Hive","writers","are","flushed","after","each","batch",".","\"",")",";","}","this",".","options","=","options",";","return","this",";"],"docstring_tokens":["The","options","for","connecting","to","Hive"],"prompt_tokens":[]}
{"code_tokens":["private","Set<Component>","sortComponents","(","final","Map<String,","Component>","componentMap",")","{","Set<Component>","sortedComponents","=\n","new","TreeSet<>","(","(","o1,","o2",")","->","{","int","connections1","=","0",";","int","connections2","=","0",";","\n\n","for","(","String","childId",":","Sets",".","union","(","o1",".","getChildren","(",")",",","o1",".","getParents","(",")",")",")","{","connections1","+=\n","(","componentMap",".","get","(","childId",")",".","getExecs","(",")",".","size","(",")","*","o1",".","getExecs","(",")",".","size","(",")",")",";","}","\n\n","for","(","String","childId",":","Sets",".","union","(","o2",".","getChildren","(",")",",","o2",".","getParents","(",")",")",")","{","connections2","+=\n","(","componentMap",".","get","(","childId",")",".","getExecs","(",")",".","size","(",")","*","o2",".","getExecs","(",")",".","size","(",")",")",";","}","\n\n","if","(","connections1",">","connections2",")","{","return","-1",";","}","else","if","(","connections1","<","connections2",")","{","return","1",";","}","else","{","return","o1",".","getId","(",")",".","compareTo","(","o2",".","getId","(",")",")",";","}","}",")",";","sortedComponents",".","addAll","(","componentMap",".","values","(",")",")",";","return","sortedComponents",";"],"docstring_tokens":["sort","components","by","the","number","of","in","and","out","connections","that","need","to","be","made,","in","descending","order"],"prompt_tokens":[]}
{"code_tokens":["private","List<String>","mkProfileCommand","(","ProfileAction","action,","boolean","stop,","String","workerPid,","String","targetDir",")","{","switch","(","action",")","{","case","JMAP_DUMP:\n","return","jmapDumpCmd","(","workerPid,","targetDir",")",";","case","JSTACK_DUMP:\n","return","jstackDumpCmd","(","workerPid,","targetDir",")",";","case","JPROFILE_DUMP:\n","return","jprofileDump","(","workerPid,","targetDir",")",";","case","JVM_RESTART:\n","return","jprofileJvmRestart","(","workerPid",")",";","case","JPROFILE_STOP:\n","if","(","stop",")","{","return","jprofileStop","(","workerPid,","targetDir",")",";","}","return","jprofileStart","(","workerPid",")",";","default:\n","return","Lists",".","newArrayList","(",")",";","}"],"docstring_tokens":["Get","the","command","to","run","when","doing","profiling"],"prompt_tokens":[]}
{"code_tokens":["protected","String","getWorkerClassPath","(","String","stormJar,","List<String>","dependencyLocations,","SimpleVersion","topoVersion",")","{","List<String>","workercp","=","new","ArrayList<>","(",")",";","workercp",".","addAll","(","asStringList","(","topoConf",".","get","(","Config",".","TOPOLOGY_CLASSPATH_BEGINNING",")",")",")",";","workercp",".","addAll","(","frameworkClasspath","(","topoVersion",")",")",";","workercp",".","add","(","stormJar",")",";","workercp",".","addAll","(","dependencyLocations",")",";","workercp",".","addAll","(","asStringList","(","topoConf",".","get","(","Config",".","TOPOLOGY_CLASSPATH",")",")",")",";","return","CPJ",".","join","(","workercp",")",";"],"docstring_tokens":["Compute","the","classpath","for","the","worker","process"],"prompt_tokens":[]}
{"code_tokens":["private","List<String>","getClassPathParams","(","final","String","stormRoot,","final","SimpleVersion","topoVersion",")","throws","IOException","{","final","String","stormJar","=","ConfigUtils",".","supervisorStormJarPath","(","stormRoot",")",";","final","List<String>","dependencyLocations","=","getDependencyLocationsFor","(","conf,","topologyId,","ops,","stormRoot",")",";","final","String","workerClassPath","=","getWorkerClassPath","(","stormJar,","dependencyLocations,","topoVersion",")",";","\n\n","List<String>","classPathParams","=","new","ArrayList<>","(",")",";","classPathParams",".","add","(","\"-cp\"",")",";","classPathParams",".","add","(","workerClassPath",")",";","return","classPathParams",";"],"docstring_tokens":["Get","parameters","for","the","class","path","of","the","worker","process"],"prompt_tokens":[]}
{"code_tokens":["private","List<String>","mkLaunchCommand","(","final","int","memOnheap,","final","int","memOffheap,","final","String","stormRoot,\n","final","String","jlp,","final","String","numaId",")","throws","IOException","{","final","String","javaCmd","=","javaCmd","(","\"java\"",")",";","final","String","stormOptions","=","ConfigUtils",".","concatIfNotNull","(","System",".","getProperty","(","\"storm",".","options\"",")",")",";","final","String","topoConfFile","=","ConfigUtils",".","concatIfNotNull","(","System",".","getProperty","(","\"storm",".","conf",".","file\"",")",")",";","final","String","workerTmpDir","=","ConfigUtils",".","workerTmpRoot","(","conf,","workerId",")",";","String","topoVersionString","=","getStormVersionFor","(","conf,","topologyId,","ops,","stormRoot",")",";","if","(","topoVersionString","==","null",")","{","topoVersionString","=","(","String",")","conf",".","getOrDefault","(","Config",".","SUPERVISOR_WORKER_DEFAULT_VERSION,","VersionInfo",".","getVersion","(",")",")",";","}","final","SimpleVersion","topoVersion","=","new","SimpleVersion","(","topoVersionString",")",";","\n\n","List<String>","classPathParams","=","getClassPathParams","(","stormRoot,","topoVersion",")",";","List<String>","commonParams","=","getCommonParams","(",")",";","\n\n","String","log4jConfigurationFile","=","getWorkerLoggingConfigFile","(",")",";","String","workerLog4jConfig","=","log4jConfigurationFile",";","if","(","topoConf",".","get","(","Config",".","TOPOLOGY_LOGGING_CONFIG_FILE",")","!=","null",")","{","workerLog4jConfig","=","workerLog4jConfig","+","\",\"","+","topoConf",".","get","(","Config",".","TOPOLOGY_LOGGING_CONFIG_FILE",")",";","}","\n\n","List<String>","commandList","=","new","ArrayList<>","(",")",";","String","logWriter","=","getWorkerLogWriter","(","topoVersion",")",";","if","(","logWriter","!=","null",")","{","//Log","Writer","Command",".",".",".","commandList",".","add","(","javaCmd",")",";","commandList",".","addAll","(","classPathParams",")",";","commandList",".","addAll","(","substituteChildopts","(","topoConf",".","get","(","Config",".","TOPOLOGY_WORKER_LOGWRITER_CHILDOPTS",")",")",")",";","commandList",".","addAll","(","commonParams",")",";","commandList",".","add","(","\"-Dlog4j",".","configurationFile=\"","+","log4jConfigurationFile",")",";","commandList",".","add","(","logWriter",")",";","//The","LogWriter","in","turn","launches","the","actual","worker",".","}","\n\n","//Worker","Command",".",".",".","commandList",".","add","(","javaCmd",")",";","commandList",".","add","(","\"-server\"",")",";","commandList",".","addAll","(","commonParams",")",";","commandList",".","add","(","\"-Dlog4j",".","configurationFile=\"","+","workerLog4jConfig",")",";","commandList",".","addAll","(","substituteChildopts","(","conf",".","get","(","Config",".","WORKER_CHILDOPTS",")",",","memOnheap,","memOffheap",")",")",";","commandList",".","addAll","(","substituteChildopts","(","topoConf",".","get","(","Config",".","TOPOLOGY_WORKER_CHILDOPTS",")",",","memOnheap,","memOffheap",")",")",";","commandList",".","addAll","(","substituteChildopts","(","Utils",".","OR","(","topoConf",".","get","(","Config",".","TOPOLOGY_WORKER_GC_CHILDOPTS",")",",\n","conf",".","get","(","Config",".","WORKER_GC_CHILDOPTS",")",")",",","memOnheap,","memOffheap",")",")",";","commandList",".","addAll","(","getWorkerProfilerChildOpts","(","memOnheap,","memOffheap",")",")",";","commandList",".","add","(","\"-Djava",".","library",".","path=\"","+","jlp",")",";","commandList",".","add","(","\"-Dstorm",".","conf",".","file=\"","+","topoConfFile",")",";","commandList",".","add","(","\"-Dstorm",".","options=\"","+","stormOptions",")",";","commandList",".","add","(","\"-Djava",".","io",".","tmpdir=\"","+","workerTmpDir",")",";","commandList",".","addAll","(","classPathParams",")",";","commandList",".","add","(","getWorkerMain","(","topoVersion",")",")",";","commandList",".","add","(","topologyId",")",";","String","supervisorId","=","this",".","supervisorId",";","if","(","numaId","!=","null",")","{","supervisorId","+=","ServerConstants",".","NUMA_ID_SEPARATOR","+","numaId",";","}","commandList",".","add","(","supervisorId",")",";","//","supervisor","port","should","be","only","presented","to","worker","which","supports","RPC","heartbeat\n","//","unknown","version","should","be","treated","as","\"current","version\",","which","supports","RPC","heartbeat\n","if","(","(","topoVersion",".","getMajor","(",")","==","-1","&&","topoVersion",".","getMinor","(",")","==","-1",")","||","topoVersion",".","compareTo","(","MIN_VERSION_SUPPORT_RPC_HEARTBEAT",")",">=","0",")","{","commandList",".","add","(","String",".","valueOf","(","supervisorPort",")",")",";","}","\n\n","commandList",".","add","(","String",".","valueOf","(","port",")",")",";","commandList",".","add","(","workerId",")",";","\n\n","return","commandList",";"],"docstring_tokens":["Create","the","command","to","launch","the","worker","process"],"prompt_tokens":[]}
{"code_tokens":["public","void","deleteTopoConf","(","final","String","topoId,","final","Subject","who",")","throws","AuthorizationException,","KeyNotFoundException","{","final","String","key","=","ConfigUtils",".","masterStormConfKey","(","topoId",")",";","store",".","deleteBlob","(","key,","who",")",";","confs",".","remove","(","topoId",")",";"],"docstring_tokens":["Delete","a","topology","conf","when","we","are","done"],"prompt_tokens":[]}
{"code_tokens":["public","void","updateTopoConf","(","final","String","topoId,","final","Subject","who,","final","Map<String,","Object>","topoConf",")","throws","AuthorizationException,","KeyNotFoundException,","IOException","{","final","String","key","=","ConfigUtils",".","masterStormConfKey","(","topoId",")",";","store",".","updateBlob","(","key,","Utils",".","toCompressedJsonConf","(","topoConf",")",",","who",")",";","List<AccessControl>","acl","=","BlobStoreAclHandler",".","DEFAULT",";","WithAcl<Map<String,","Object>>","old","=","confs",".","get","(","topoId",")",";","if","(","old","!=","null",")","{","acl","=","old",".","acl",";","}","else","{","acl","=","store",".","getBlobMeta","(","key,","who",")",".","get_settable","(",")",".","get_acl","(",")",";","}","confs",".","put","(","topoId,","new","WithAcl<>","(","acl,","topoConf",")",")",";"],"docstring_tokens":["Update","an","existing","topology","conf"],"prompt_tokens":[]}
{"code_tokens":["@Override\n","public","int","hashCode","(",")","{","return","(","17","*","getPort","(",")",")","+","getAssignment","(",")",".","hashCode","(",")",";"],"docstring_tokens":["All","implementations","of","PortAndAssignment","should","implement","the","same","hashCode","method"],"prompt_tokens":[]}
{"code_tokens":["public","void","cleanupDataDirectories","(",")","throws","IOException","{","for","(","String","s",":","getDataDirs","(",")",")","{","cleanDir","(","s",")",";","}"],"docstring_tokens":["Deletes","all","data","from","cassandra","data","directories,","including","the","commit","log"],"prompt_tokens":[]}
{"code_tokens":["public","static","TopologyLoadConf","fromConf","(","File","file",")","throws","IOException","{","Yaml","yaml","=","new","Yaml","(","new","SafeConstructor","(",")",")",";","Map<String,","Object>","yamlConf","=","(","Map<String,","Object>",")","yaml",".","load","(","new","FileReader","(","file",")",")",";","return","TopologyLoadConf",".","fromConf","(","yamlConf",")",";"],"docstring_tokens":["Parse","the","TopologyLoadConf","from","a","file","in","YAML","format"],"prompt_tokens":[]}
{"code_tokens":["public","static","TopologyLoadConf","fromConf","(","Map<String,","Object>","conf",")","{","Map<String,","Object>","topoConf","=","null",";","if","(","conf",".","containsKey","(","\"config\"",")",")","{","topoConf","=","new","HashMap<>","(","(","Map<String,","Object>",")","conf",".","get","(","\"config\"",")",")",";","}","\n\n","List<LoadCompConf>","spouts","=","new","ArrayList<>","(",")",";","for","(","Map<String,","Object>","spoutInfo:","(","List<Map<String,","Object>>",")","conf",".","get","(","\"spouts\"",")",")","{","spouts",".","add","(","LoadCompConf",".","fromConf","(","spoutInfo",")",")",";","}","\n\n","List<LoadCompConf>","bolts","=","new","ArrayList<>","(",")",";","List<Map<String,","Object>>","boltInfos","=","(","List<Map<String,","Object>>",")","conf",".","get","(","\"bolts\"",")",";","if","(","boltInfos","!=","null",")","{","for","(","Map<String,","Object>","boltInfo",":","boltInfos",")","{","bolts",".","add","(","LoadCompConf",".","fromConf","(","boltInfo",")",")",";","}","}","\n\n","List<InputStream>","streams","=","new","ArrayList<>","(",")",";","List<Map<String,","Object>>","streamInfos","=","(","List<Map<String,","Object>>",")","conf",".","get","(","\"streams\"",")",";","if","(","streamInfos","!=","null",")","{","for","(","Map<String,","Object>","streamInfo:","streamInfos",")","{","streams",".","add","(","InputStream",".","fromConf","(","streamInfo",")",")",";","}","}","\n\n","return","new","TopologyLoadConf","(","(","String",")","conf",".","get","(","\"name\"",")",",","topoConf,","spouts,","bolts,","streams",")",";"],"docstring_tokens":["Parse","the","TopologyLoadConf","from","a","config","map"],"prompt_tokens":[]}
{"code_tokens":["public","TopologyLoadConf","scaleThroughput","(","double","v,","Map<String,","Double>","topoSpecific",")","{","if","(","v","==","1",".","0","&&","(","topoSpecific","==","null","||","topoSpecific",".","isEmpty","(",")",")",")","{","return","this",";","}","List<LoadCompConf>","scaledSpouts","=","spouts",".","stream","(",")",".","map","(","(","s",")","->","scaleCompThroughput","(","s,","v,","topoSpecific",")",")",".","collect","(","Collectors",".","toList","(",")",")",";","List<LoadCompConf>","scaledBolts","=","bolts",".","stream","(",")",".","map","(","(","s",")","->","scaleCompThroughput","(","s,","v,","topoSpecific",")",")",".","collect","(","Collectors",".","toList","(",")",")",";","return","new","TopologyLoadConf","(","name,","topoConf,","scaledSpouts,","scaledBolts,","streams",")",";"],"docstring_tokens":["Scale","the","throughput","of","the","entire","topology","by","a","percentage"],"prompt_tokens":[]}
{"code_tokens":["public","TopologyLoadConf","anonymize","(",")","{","Map<String,","String>","remappedComponents","=","new","HashMap<>","(",")",";","Map<GlobalStreamId,","GlobalStreamId>","remappedStreams","=","new","HashMap<>","(",")",";","for","(","LoadCompConf","comp:","bolts",")","{","String","newId","=","getUniqueBoltName","(",")",";","remappedComponents",".","put","(","comp",".","id,","newId",")",";","if","(","comp",".","streams","!=","null",")","{","for","(","OutputStream","out",":","comp",".","streams",")","{","GlobalStreamId","orig","=","new","GlobalStreamId","(","comp",".","id,","out",".","id",")",";","GlobalStreamId","remapped","=","new","GlobalStreamId","(","newId,","getUniqueStreamName","(",")",")",";","remappedStreams",".","put","(","orig,","remapped",")",";","}","}","}","\n\n","for","(","LoadCompConf","comp:","spouts",")","{","remappedComponents",".","put","(","comp",".","id,","getUniqueSpoutName","(",")",")",";","String","newId","=","getUniqueSpoutName","(",")",";","remappedComponents",".","put","(","comp",".","id,","newId",")",";","if","(","comp",".","streams","!=","null",")","{","for","(","OutputStream","out",":","comp",".","streams",")","{","GlobalStreamId","orig","=","new","GlobalStreamId","(","comp",".","id,","out",".","id",")",";","GlobalStreamId","remapped","=","new","GlobalStreamId","(","newId,","getUniqueStreamName","(",")",")",";","remappedStreams",".","put","(","orig,","remapped",")",";","}","}","}","\n\n","for","(","InputStream","in",":","streams",")","{","if","(","!remappedComponents",".","containsKey","(","in",".","toComponent",")",")","{","remappedComponents",".","put","(","in",".","toComponent,","getUniqueSpoutName","(",")",")",";","}","GlobalStreamId","orig","=","in",".","gsid","(",")",";","if","(","!remappedStreams",".","containsKey","(","orig",")",")","{","//Even","if","the","topology","is","not","valid","we","still","need","to","remap","it","all\n","String","remappedComp","=","remappedComponents",".","computeIfAbsent","(","in",".","fromComponent,","(","key",")","->","{","LOG",".","warn","(","\"stream's","{","}","from","is","not","defined","{","}","\",","in",".","id,","in",".","fromComponent",")",";","return","getUniqueBoltName","(",")",";","}",")",";","remappedStreams",".","put","(","orig,","new","GlobalStreamId","(","remappedComp,","getUniqueStreamName","(",")",")",")",";","}","}","\n\n","//Now","we","need","to","map","them","all","back","again\n","List<LoadCompConf>","remappedSpouts","=","spouts",".","stream","(",")",".","map","(","(","orig",")","->","orig",".","remap","(","remappedComponents,","remappedStreams",")",")",".","collect","(","Collectors",".","toList","(",")",")",";","List<LoadCompConf>","remappedBolts","=","bolts",".","stream","(",")",".","map","(","(","orig",")","->","orig",".","remap","(","remappedComponents,","remappedStreams",")",")",".","collect","(","Collectors",".","toList","(",")",")",";","List<InputStream>","remappedInputStreams","=","streams",".","stream","(",")",".","map","(","(","orig",")","->","orig",".","remap","(","remappedComponents,","remappedStreams",")",")",".","collect","(","Collectors",".","toList","(",")",")",";","return","new","TopologyLoadConf","(","getUniqueTopoName","(",")",",","anonymizeTopoConf","(","topoConf",")",",","remappedSpouts,","remappedBolts,","remappedInputStreams",")",";"],"docstring_tokens":["Create","a","new","version","of","this","topology","with","identifiable","information","removed"],"prompt_tokens":[]}
{"code_tokens":["public","boolean","looksLikeTrident","(",")","{","for","(","LoadCompConf","spout:","spouts",")","{","if","(","spout",".","id",".","startsWith","(","\"$mastercoord\"",")",")","{","return","true",";","}","}","\n\n","for","(","LoadCompConf","bolt:","bolts",")","{","if","(","bolt",".","id",".","startsWith","(","\"$spoutcoord\"",")",")","{","return","true",";","}","}","\n\n","for","(","InputStream","in:","streams",")","{","if","(","in",".","id",".","equals","(","\"$batch\"",")",")","{","return","true",";","}","}","return","false",";"],"docstring_tokens":["Try","to","see","if","this","looks","like","a","trident","topology"],"prompt_tokens":[]}
{"code_tokens":["public","double","getAllEmittedAggregate","(",")","{","double","ret","=","getSpoutEmittedAggregate","(",")",";","for","(","LoadCompConf","bolt:","bolts",")","{","ret","+=","bolt",".","getAllEmittedAggregate","(",")",";","}","return","ret",";"],"docstring_tokens":["Get","the","messages","emitted","per","second","in","aggregate","across","all","streams","in","the","topology"],"prompt_tokens":[]}
{"code_tokens":["public","double","getSpoutEmittedAggregate","(",")","{","double","ret","=","0",";","for","(","LoadCompConf","spout:","spouts",")","{","ret","+=","spout",".","getAllEmittedAggregate","(",")",";","}","return","ret",";"],"docstring_tokens":["Get","the","messages","emitted","per","second","in","aggregate","for","all","of","the","spouts","in","the","topology"],"prompt_tokens":[]}
{"code_tokens":["public","Response","listLogFiles","(","String","user,","Integer","port,","String","topologyId,","String","callback,","String","origin",")","throws","IOException","{","List<Path>","fileResults","=","null",";","if","(","topologyId","==","null",")","{","if","(","port","==","null",")","{","fileResults","=","workerLogs",".","getAllLogsForRootDir","(",")",";","}","else","{","fileResults","=","new","ArrayList<>","(",")",";","\n\n","File[]","logRootFiles","=","logRoot",".","toFile","(",")",".","listFiles","(",")",";","if","(","logRootFiles","!=","null",")","{","for","(","File","topoDir",":","logRootFiles",")","{","File[]","topoDirFiles","=","topoDir",".","listFiles","(",")",";","if","(","topoDirFiles","!=","null",")","{","for","(","File","portDir",":","topoDirFiles",")","{","if","(","portDir",".","getName","(",")",".","equals","(","port",".","toString","(",")",")",")","{","fileResults",".","addAll","(","directoryCleaner",".","getFilesForDir","(","portDir",".","toPath","(",")",")",")",";","}","}","}","}","}","}","}","else","{","if","(","port","==","null",")","{","fileResults","=","new","ArrayList<>","(",")",";","\n\n","Path","topoDir","=","logRoot",".","resolve","(","topologyId",")",".","toAbsolutePath","(",")",".","normalize","(",")",";","if","(","!topoDir",".","startsWith","(","logRoot",")",")","{","return","LogviewerResponseBuilder",".","buildSuccessJsonResponse","(","Collections",".","emptyList","(",")",",","callback,","origin",")",";","}","if","(","topoDir",".","toFile","(",")",".","exists","(",")",")","{","File[]","topoDirFiles","=","topoDir",".","toFile","(",")",".","listFiles","(",")",";","if","(","topoDirFiles","!=","null",")","{","for","(","File","portDir",":","topoDirFiles",")","{","fileResults",".","addAll","(","directoryCleaner",".","getFilesForDir","(","portDir",".","toPath","(",")",")",")",";","}","}","}","\n\n","}","else","{","File","portDir","=","ConfigUtils",".","getWorkerDirFromRoot","(","logRoot",".","toString","(",")",",","topologyId,","port",")",".","getCanonicalFile","(",")",";","if","(","!portDir",".","getPath","(",")",".","startsWith","(","logRoot",".","toString","(",")",")",")","{","return","LogviewerResponseBuilder",".","buildSuccessJsonResponse","(","Collections",".","emptyList","(",")",",","callback,","origin",")",";","}","if","(","portDir",".","exists","(",")",")","{","fileResults","=","directoryCleaner",".","getFilesForDir","(","portDir",".","toPath","(",")",")",";","}","}","}","\n\n","List<String>","files",";","if","(","fileResults","!=","null",")","{","files","=","fileResults",".","stream","(",")",".","map","(","WorkerLogs::getTopologyPortWorkerLog",")",".","sorted","(",")",".","collect","(","toList","(",")",")",";","}","else","{","files","=","new","ArrayList<>","(",")",";","}","\n\n","return","LogviewerResponseBuilder",".","buildSuccessJsonResponse","(","files,","callback,","origin",")",";"],"docstring_tokens":["Enumerate","worker","log","files","for","given","criteria"],"prompt_tokens":[]}
{"code_tokens":["public","Response","daemonLogPage","(","String","fileName,","Integer","start,","Integer","length,","String","grep,","String","user",")","throws","IOException,","InvalidRequestException","{","Path","file","=","daemonLogRoot",".","resolve","(","fileName",")",".","toAbsolutePath","(",")",".","normalize","(",")",";","if","(","!file",".","startsWith","(","daemonLogRoot",")","||","Paths",".","get","(","fileName",")",".","getNameCount","(",")","!=","1",")","{","//Prevent","fileName","from","pathing","into","worker","logs,","or","outside","daemon","log","root","return","LogviewerResponseBuilder",".","buildResponsePageNotFound","(",")",";","}","\n\n","if","(","file",".","toFile","(",")",".","exists","(",")",")","{","//","all","types","of","files","included\n","List<File>","logFiles","=","Arrays",".","stream","(","daemonLogRoot",".","toFile","(",")",".","listFiles","(",")",")",".","filter","(","File::isFile",")",".","collect","(","toList","(",")",")",";","\n\n","List<String>","reorderedFilesStr","=","logFiles",".","stream","(",")",".","map","(","File::getName",")",".","filter","(","fName","->","!StringUtils",".","equals","(","fileName,","fName",")",")",".","collect","(","toList","(",")",")",";","reorderedFilesStr",".","add","(","fileName",")",";","\n\n","length","=","length","!=","null","?","Math",".","min","(","10485760,","length",")",":","LogviewerConstant",".","DEFAULT_BYTES_PER_PAGE",";","final","boolean","isZipFile","=","file",".","getFileName","(",")",".","toString","(",")",".","endsWith","(","\"",".","gz\"",")",";","long","fileLength","=","getFileLength","(","file",".","toFile","(",")",",","isZipFile",")",";","if","(","start","==","null",")","{","start","=","Long",".","valueOf","(","fileLength","-","length",")",".","intValue","(",")",";","}","\n\n","String","logString","=","isTxtFile","(","fileName",")","?","escapeHtml","(","pageFile","(","file",".","toString","(",")",",","isZipFile,","fileLength,","start,","length",")",")",":\n","escapeHtml","(","\"This","is","a","binary","file","and","cannot","display!","You","may","download","the","full","file",".","\"",")",";","\n\n","List<DomContent>","bodyContents","=","new","ArrayList<>","(",")",";","if","(","StringUtils",".","isNotEmpty","(","grep",")",")","{","String","matchedString","=","String",".","join","(","\"\\n\",","Arrays",".","stream","(","logString",".","split","(","\"\\n\"",")",")",".","filter","(","str","->","str",".","contains","(","grep",")",")",".","collect","(","toList","(",")",")",")",";","bodyContents",".","add","(","pre","(","matchedString",")",".","withId","(","\"logContent\"",")",")",";","}","else","{","DomContent","pagerData","=","null",";","if","(","isTxtFile","(","fileName",")",")","{","pagerData","=","pagerLinks","(","fileName,","start,","length,","Long",".","valueOf","(","fileLength",")",".","intValue","(",")",",","\"daemonlog\"",")",";","}","\n\n","bodyContents",".","add","(","searchFileForm","(","fileName,","\"yes\"",")",")",";","//","list","all","daemon","logs\n","bodyContents",".","add","(","logFileSelectionForm","(","reorderedFilesStr,","fileName,","\"daemonlog\"",")",")",";","if","(","pagerData","!=","null",")","{","bodyContents",".","add","(","pagerData",")",";","}","bodyContents",".","add","(","daemonDownloadLink","(","fileName",")",")",";","bodyContents",".","add","(","pre","(","logString",")",".","withClass","(","\"logContent\"",")",")",";","if","(","pagerData","!=","null",")","{","bodyContents",".","add","(","pagerData",")",";","}","}","\n\n","String","content","=","logTemplate","(","bodyContents,","fileName,","user",")",".","render","(",")",";","return","LogviewerResponseBuilder",".","buildSuccessHtmlResponse","(","content",")",";","}","else","{","return","LogviewerResponseBuilder",".","buildResponsePageNotFound","(",")",";","}"],"docstring_tokens":["Provides","a","daemon","log","file","to","view"],"prompt_tokens":[]}
{"code_tokens":["public","void","setQos","(","int","qos",")","{","if","(","qos","<","0","||","qos",">","2",")","{","throw","new","IllegalArgumentException","(","\"MQTT","QoS","must","be",">=","0","and","<=","2\"",")",";","}","this",".","qos","=","qos",";"],"docstring_tokens":["Sets","the","quality","of","service","to","use","for","MQTT","messages"],"prompt_tokens":[]}
{"code_tokens":["public","void","setWillQos","(","int","qos",")","{","if","(","qos","<","0","||","qos",">","2",")","{","throw","new","IllegalArgumentException","(","\"MQTT","Will","QoS","must","be",">=","0","and","<=","2\"",")",";","}","this",".","willQos","=","qos",";"],"docstring_tokens":["Sets","the","quality","of","service","to","use","for","the","MQTT","Will","message"],"prompt_tokens":[]}
{"code_tokens":["@Override\n","public","Pair<V1,","V2>","apply","(","V1","value1,","V2","value2",")","{","return","Pair",".","of","(","value1,","value2",")",";"],"docstring_tokens":["Joins","two","values","and","produces","a","Pair","of","the","values","as","the","result"],"prompt_tokens":[]}
{"code_tokens":["public","static","void","main","(","final","String[]","args",")","{","String","name","=","args[0]",";","Map<String,","Object>","conf","=","Utils",".","readStormConfig","(",")",";","Object","value","=","conf",".","get","(","name",")",";","if","(","value","instanceof","List",")","{","List<String>","stringValues","=","(","(","List<?>",")","value",")",".","stream","(",")",".","map","(","ObjectReader::getString",")",".","collect","(","Collectors",".","toList","(",")",")",";","value","=","String",".","join","(","\"","\",","stringValues",")",";","}","System",".","out",".","println","(","\"VALUE:","\"","+","value",")",";"],"docstring_tokens":["Read","the","topology","config","and","return","the","value","for","the","given","key"],"prompt_tokens":[]}
{"code_tokens":["public","void","prepareCommit","(","long","txid",")","{","flush","(",")",";","partitionIdsState",".","prepareCommit","(","txid",")",";","windowPartitionsState",".","prepareCommit","(","txid",")",";","windowSystemState",".","prepareCommit","(","txid",")",";"],"docstring_tokens":["Prepares","the","WindowState","for","commit"],"prompt_tokens":[]}
{"code_tokens":["public","void","rollback","(","boolean","reInit",")","{","partitionIdsState",".","rollback","(",")",";","windowPartitionsState",".","rollback","(",")",";","windowSystemState",".","rollback","(",")",";","//","re-init","cache","and","partitions\n","if","(","reInit",")","{","init","(",")",";","}"],"docstring_tokens":["Rolls","back","the","WindowState"],"prompt_tokens":[]}
{"code_tokens":["public","static","void","main","(","String[]","args",")","throws","Exception","{","Configuration","config","=","HBaseConfiguration",".","create","(",")",";","if","(","args",".","length","==","1",")","{","Properties","props","=","new","Properties","(",")",";","props",".","load","(","new","FileInputStream","(","args[0]",")",")",";","System",".","out",".","println","(","\"HBase","configuration:\"",")",";","for","(","Object","key",":","props",".","keySet","(",")",")","{","System",".","out",".","println","(","key","+","\"=\"","+","props",".","get","(","key",")",")",";","config",".","set","(","(","String",")","key,","props",".","getProperty","(","(","String",")","key",")",")",";","}","}","else","{","System",".","out",".","println","(","\"Usage:","WordCountClient","<hbase_config",".","properties>\"",")",";","System",".","exit","(","1",")",";","}","\n\n","Table","table","=","ConnectionFactory",".","createConnection","(","config",")",".","getTable","(","TableName",".","valueOf","(","\"WordCount\"",")",")",";","String[]","words","=","new","String[]","{","\"nathan\",","\"mike\",","\"jackson\",","\"golda\",","\"bertels\"","}",";","\n\n","for","(","String","word",":","words",")","{","Get","get","=","new","Get","(","Bytes",".","toBytes","(","word",")",")",";","Result","result","=","table",".","get","(","get",")",";","\n\n","byte[]","countBytes","=","result",".","getValue","(","Bytes",".","toBytes","(","\"cf\"",")",",","Bytes",".","toBytes","(","\"count\"",")",")",";","byte[]","wordBytes","=","result",".","getValue","(","Bytes",".","toBytes","(","\"cf\"",")",",","Bytes",".","toBytes","(","\"word\"",")",")",";","\n\n","String","wordStr","=","Bytes",".","toString","(","wordBytes",")",";","long","count","=","Bytes",".","toLong","(","countBytes",")",";","System",".","out",".","println","(","\"Word:","'\"","+","wordStr","+","\"',","Count:","\"","+","count",")",";","}","\n\n"],"docstring_tokens":["Entry","point","for","WordCountClient"],"prompt_tokens":[]}
{"code_tokens":["@Override\n","public","Values","toValues","(","final","MqttMessage","message",")","{","String","topic","=","message",".","getTopic","(",")",";","String[]","topicElements","=","topic",".","split","(","\"/\"",")",";","String[]","payloadElements","=","new","String","(","message",".","getMessage","(",")",")",".","split","(","\"/\"",")",";","\n\n","return","new","Values","(","topicElements[TOPIC_INDEX_1],\n","topicElements[TOPIC_INDEX_2],\n","topicElements[TOPIC_INDEX_3],\n","Float",".","parseFloat","(","payloadElements[0]",")",",\n","Float",".","parseFloat","(","payloadElements[1]",")",")",";"],"docstring_tokens":["Converts","MQTT","message","to","an","instance","of","Values"],"prompt_tokens":[]}
{"code_tokens":["public","static","NormalDistStats","fromConf","(","Map<String,","Object>","conf",")","{","return","fromConf","(","conf,","null",")",";"],"docstring_tokens":["Read","the","stats","from","a","config"],"prompt_tokens":[]}
{"code_tokens":["public","static","void","main","(","String[]","args",")","throws","ParseException,","MalformedURLException","{","Options","options","=","buildOptions","(",")",";","CommandLineParser","parser","=","new","DefaultParser","(",")",";","CommandLine","commandLine","=","parser",".","parse","(","options,","args",")",";","\n\n","if","(","!commandLine",".","hasOption","(","OPTION_ARTIFACTS_LONG",")",")","{","throw","new","IllegalArgumentException","(","\"artifacts","must","be","presented",".","\"",")",";","}","\n\n","String","artifactsArg","=","commandLine",".","getOptionValue","(","OPTION_ARTIFACTS_LONG",")",";","\n\n","//","DO","NOT","CHANGE","THIS","TO","SYSOUT\n","System",".","err",".","println","(","\"DependencyResolver","input","-","artifacts:","\"","+","artifactsArg",")",";","List<Dependency>","dependencies","=","parseArtifactArgs","(","artifactsArg",")",";","\n\n","List<RemoteRepository>","repositories",";","if","(","commandLine",".","hasOption","(","OPTION_ARTIFACT_REPOSITORIES_LONG",")",")","{","String","remoteRepositoryArg","=","commandLine",".","getOptionValue","(","OPTION_ARTIFACT_REPOSITORIES_LONG",")",";","\n\n","//","DO","NOT","CHANGE","THIS","TO","SYSOUT\n","System",".","err",".","println","(","\"DependencyResolver","input","-","repositories:","\"","+","remoteRepositoryArg",")",";","\n\n","repositories","=","parseRemoteRepositoryArgs","(","remoteRepositoryArg",")",";","}","else","{","repositories","=","Collections",".","emptyList","(",")",";","}","\n\n","try","{","String","localMavenRepoPath","=","getOrDefaultLocalMavenRepositoryPath","(","commandLine",".","getOptionValue","(","OPTION_MAVEN_LOCAL_REPOSITORY_DIRECTORY_LONG",")",",\n","DEFAULT_FAILBACK_MAVEN_LOCAL_REPOSITORY_DIRECTORY",")",";","\n\n","//","create","root","directory","if","not","exist\n","Files",".","createDirectories","(","new","File","(","localMavenRepoPath",")",".","toPath","(",")",")",";","\n\n","DependencyResolver","resolver","=","new","DependencyResolver","(","localMavenRepoPath,","repositories",")",";","\n\n","if","(","commandLine",".","hasOption","(","OPTION_PROXY_URL_LONG",")",")","{","String","proxyUrl","=","commandLine",".","getOptionValue","(","OPTION_PROXY_URL_LONG",")",";","String","proxyUsername","=","commandLine",".","getOptionValue","(","OPTION_PROXY_USERNAME_LONG",")",";","String","proxyPassword","=","commandLine",".","getOptionValue","(","OPTION_PROXY_PASSWORD_LONG",")",";","\n\n","resolver",".","setProxy","(","parseProxyArg","(","proxyUrl,","proxyUsername,","proxyPassword",")",")",";","}","\n\n","List<ArtifactResult>","artifactResults","=","resolver",".","resolve","(","dependencies",")",";","\n\n","Iterable<ArtifactResult>","missingArtifacts","=","filterMissingArtifacts","(","artifactResults",")",";","if","(","missingArtifacts",".","iterator","(",")",".","hasNext","(",")",")","{","printMissingArtifactsToSysErr","(","missingArtifacts",")",";","throw","new","RuntimeException","(","\"Some","artifacts","are","not","resolved\"",")",";","}","\n\n","System",".","out",".","println","(","JSONValue",".","toJSONString","(","transformArtifactResultToArtifactToPaths","(","artifactResults",")",")",")",";","System",".","out",".","flush","(",")",";","}","catch","(","Throwable","e",")","{","throw","new","RuntimeException","(","e",")",";","}"],"docstring_tokens":["Main","entry","of","dependency","resolver"],"prompt_tokens":[]}
{"code_tokens":["public","static","void","setup","(","Map<String,","Object>","stormConf,","StormMetricsRegistry","metricRegistry",")","{","LogviewerApplication",".","stormConf","=","stormConf",";","LogviewerApplication",".","metricsRegistry","=","metricRegistry",";"],"docstring_tokens":["Spot","to","inject","storm","configuration","before","initializing","LogviewerApplication","instance"],"prompt_tokens":[]}
{"code_tokens":["@Override\n","public","TriggerPolicy<T,","?>","getTriggerPolicy","(","TriggerHandler","triggerHandler,","EvictionPolicy<T,","?>","evictionPolicy",")","{","return","new","TimeTriggerPolicy<>","(","windowConfig",".","getSlidingLength","(",")",",","triggerHandler,","evictionPolicy",")",";"],"docstring_tokens":["Returns","a","TriggerPolicy","which","triggers","for","every","configured","sliding","window","duration"],"prompt_tokens":[]}
{"code_tokens":["@Override\n","public","EvictionPolicy<T,","?>","getEvictionPolicy","(",")","{","return","new","TimeEvictionPolicy<>","(","windowConfig",".","getWindowLength","(",")",")",";"],"docstring_tokens":["Returns","an","EvictionPolicy","instance","which","evicts","elements","after","window","duration","is","reached"],"prompt_tokens":[]}
{"code_tokens":["public","String","getComponentId","(","int","taskId",")","{","if","(","taskId","==","Constants",".","SYSTEM_TASK_ID",")","{","return","Constants",".","SYSTEM_COMPONENT_ID",";","}","else","{","return","taskToComponent",".","get","(","taskId",")",";","}"],"docstring_tokens":["Gets","the","component","id","for","the","specified","task","id"],"prompt_tokens":[]}
{"code_tokens":["public","Map<String,","Map<String,","Grouping>>","getTargets","(","String","componentId",")","{","Map<String,","Map<String,","Grouping>>","ret","=","new","HashMap<>","(",")",";","for","(","String","otherComponentId",":","getComponentIds","(",")",")","{","Map<GlobalStreamId,","Grouping>","inputs","=","getComponentCommon","(","otherComponentId",")",".","get_inputs","(",")",";","for","(","Map",".","Entry<GlobalStreamId,","Grouping>","entry",":","inputs",".","entrySet","(",")",")","{","GlobalStreamId","id","=","entry",".","getKey","(",")",";","if","(","id",".","get_componentId","(",")",".","equals","(","componentId",")",")","{","Map<String,","Grouping>","curr","=","ret",".","get","(","id",".","get_streamId","(",")",")",";","if","(","curr","==","null",")","{","curr","=","new","HashMap<>","(",")",";","}","curr",".","put","(","otherComponentId,","entry",".","getValue","(",")",")",";","ret",".","put","(","id",".","get_streamId","(",")",",","curr",")",";","}","}","}","return","ret",";"],"docstring_tokens":["Gets","information","about","who","is","consuming","the","outputs","of","the","specified","component,","and","how"],"prompt_tokens":[]}
{"code_tokens":["public","DefaultFileNameFormat","withPrefix","(","String","prefix",")","{","this",".","prefix","=","prefix",";","return","this",";"],"docstring_tokens":["Overrides","the","default","prefix"],"prompt_tokens":[]}
{"code_tokens":["public","DefaultFileNameFormat","withExtension","(","String","extension",")","{","this",".","extension","=","extension",";","return","this",";"],"docstring_tokens":["Overrides","the","default","file","extension"],"prompt_tokens":[]}
{"code_tokens":["public","HBaseProjectionCriteria","addColumnFamily","(","String","columnFamily",")","{","this",".","columnFamilies",".","add","(","columnFamily",".","getBytes","(",")",")",";","return","this",";"],"docstring_tokens":["all","columns","from","this","family","will","be","included","as","result","of","HBase","lookup"],"prompt_tokens":[]}
{"code_tokens":["public","HBaseProjectionCriteria","addColumn","(","ColumnMetaData","column",")","{","this",".","columns",".","add","(","column",")",";","return","this",";"],"docstring_tokens":["Only","this","column","from","the","the","columnFamily","will","be","included","as","result","of","HBase","lookup"],"prompt_tokens":[]}
{"code_tokens":["public","void","ack","(",")","{","latch",".","countDown","(",")",";"],"docstring_tokens":["Countdown","if","the","sub","message","is","successful"],"prompt_tokens":[]}
{"code_tokens":["public","void","fail","(",")","{","hasFailure","=","true",";","//","fail","fast\n","long","count","=","latch",".","getCount","(",")",";","for","(","int","i","=","0",";","i","<","count",";","i++",")","{","latch",".","countDown","(",")",";","}"],"docstring_tokens":["Countdown","and","fail-fast","if","the","sub","message","is","failed"],"prompt_tokens":[]}
{"code_tokens":["private","void","validateConfig","(","Map<String,","Object>","config",")","throws","MetricException","{","if","(","!","(","config",".","containsKey","(","DaemonConfig",".","STORM_ROCKSDB_LOCATION",")",")",")","{","throw","new","MetricException","(","\"Not","a","vaild","RocksDB","configuration","-","Missing","store","location","\"","+","DaemonConfig",".","STORM_ROCKSDB_LOCATION",")",";","}","\n\n","if","(","!","(","config",".","containsKey","(","DaemonConfig",".","STORM_ROCKSDB_CREATE_IF_MISSING",")",")",")","{","throw","new","MetricException","(","\"Not","a","vaild","RocksDB","configuration","-","Does","not","specify","creation","policy","\"\n","+","DaemonConfig",".","STORM_ROCKSDB_CREATE_IF_MISSING",")",";","}","\n\n","//","validate","path","defined\n","String","storePath","=","getRocksDbAbsoluteDir","(","config",")",";","\n\n","boolean","createIfMissing","=","ObjectReader",".","getBoolean","(","config",".","get","(","DaemonConfig",".","STORM_ROCKSDB_CREATE_IF_MISSING",")",",","false",")",";","if","(","!createIfMissing",")","{","if","(","!","(","new","File","(","storePath",")",".","exists","(",")",")",")","{","throw","new","MetricException","(","\"Configuration","specifies","not","to","create","a","store","but","no","store","currently","exists","at","\"","+","storePath",")",";","}","}","\n\n","if","(","!","(","config",".","containsKey","(","DaemonConfig",".","STORM_ROCKSDB_METADATA_STRING_CACHE_CAPACITY",")",")",")","{","throw","new","MetricException","(","\"Not","a","valid","RocksDB","configuration","-","Missing","metadata","string","cache","size","\"\n","+","DaemonConfig",".","STORM_ROCKSDB_METADATA_STRING_CACHE_CAPACITY",")",";","}","\n\n","if","(","!config",".","containsKey","(","DaemonConfig",".","STORM_ROCKSDB_METRIC_RETENTION_HOURS",")",")","{","throw","new","MetricException","(","\"Not","a","valid","RocksDB","configuration","-","Missing","metric","retention","\"\n","+","DaemonConfig",".","STORM_ROCKSDB_METRIC_RETENTION_HOURS",")",";","}"],"docstring_tokens":["Implements","configuration","validation","of","Metrics","Store,","validates","storm","configuration","for","Metrics","Store"],"prompt_tokens":[]}
{"code_tokens":["@Override\n","public","void","insert","(","Metric","metric",")","throws","MetricException","{","try","{","//","don't","bother","blocking","on","a","full","queue,","just","drop","metrics","in","case","we","can't","keep","up\n","if","(","queue",".","remainingCapacity","(",")","<=","0",")","{","LOG",".","info","(","\"Metrics","q","full,","dropping","metric\"",")",";","return",";","}","queue",".","put","(","metric",")",";","}","catch","(","Exception","e",")","{","String","message","=","\"Failed","to","insert","metric\"",";","LOG",".","error","(","message,","e",")",";","if","(","this",".","failureMeter","!=","null",")","{","this",".","failureMeter",".","mark","(",")",";","}","throw","new","MetricException","(","message,","e",")",";","}"],"docstring_tokens":["Stores","metrics","in","the","store"],"prompt_tokens":[]}
{"code_tokens":["@Override\n","public","boolean","populateValue","(","Metric","metric",")","throws","MetricException","{","Map<String,","Integer>","localLookupCache","=","new","HashMap<>","(","6",")",";","\n\n","int","topologyId","=","lookupMetadataString","(","KeyType",".","TOPOLOGY_STRING,","metric",".","getTopologyId","(",")",",","localLookupCache",")",";","if","(","INVALID_METADATA_STRING_ID","==","topologyId",")","{","return","false",";","}","int","metricId","=","lookupMetadataString","(","KeyType",".","METRIC_STRING,","metric",".","getMetricName","(",")",",","localLookupCache",")",";","if","(","INVALID_METADATA_STRING_ID","==","metricId",")","{","return","false",";","}","int","componentId","=","lookupMetadataString","(","KeyType",".","COMPONENT_STRING,","metric",".","getComponentId","(",")",",","localLookupCache",")",";","if","(","INVALID_METADATA_STRING_ID","==","componentId",")","{","return","false",";","}","int","executorId","=","lookupMetadataString","(","KeyType",".","EXEC_ID_STRING,","metric",".","getExecutorId","(",")",",","localLookupCache",")",";","if","(","INVALID_METADATA_STRING_ID","==","executorId",")","{","return","false",";","}","int","hostId","=","lookupMetadataString","(","KeyType",".","HOST_STRING,","metric",".","getHostname","(",")",",","localLookupCache",")",";","if","(","INVALID_METADATA_STRING_ID","==","hostId",")","{","return","false",";","}","int","streamId","=","lookupMetadataString","(","KeyType",".","STREAM_ID_STRING,","metric",".","getStreamId","(",")",",","localLookupCache",")",";","if","(","INVALID_METADATA_STRING_ID","==","streamId",")","{","return","false",";","}","\n\n","RocksDbKey","key","=","RocksDbKey",".","createMetricKey","(","metric",".","getAggLevel","(",")",",","topologyId,","metric",".","getTimestamp","(",")",",","metricId,\n","componentId,","executorId,","hostId,","metric",".","getPort","(",")",",","streamId",")",";","\n\n","return","populateFromKey","(","key,","metric",")",";"],"docstring_tokens":["Fill","out","the","numeric","values","for","a","metric"],"prompt_tokens":[]}
{"code_tokens":["public","Stream","parallelismHint","(","int","hint",")","{","node",".","parallelismHint","=","hint",";","return","this",";"],"docstring_tokens":["Applies","a","parallelism","hint","to","a","stream"],"prompt_tokens":[]}
{"code_tokens":["public","Stream","filter","(","Filter","filter",")","{","return","each","(","getOutputFields","(",")",",","filter",")",";"],"docstring_tokens":["Returns","a","stream","consisting","of","the","elements","of","this","stream","that","match","the","given","filter"],"prompt_tokens":[]}
{"code_tokens":["public","Stream","tumblingWindow","(","int","windowCount,","WindowsStoreFactory","windowStoreFactory,\n","Fields","inputFields,","Aggregator","aggregator,","Fields","functionFields",")","{","return","window","(","TumblingCountWindow",".","of","(","windowCount",")",",","windowStoreFactory,","inputFields,","aggregator,","functionFields",")",";"],"docstring_tokens":["Returns","a","stream","of","tuples","which","are","aggregated","results","of","a","tumbling","window","with","every","windowCount","of","tuples"],"prompt_tokens":[]}
{"code_tokens":["public","Stream","tumblingWindow","(","BaseWindowedBolt",".","Duration","windowDuration,","WindowsStoreFactory","windowStoreFactory,\n","Fields","inputFields,","Aggregator","aggregator,","Fields","functionFields",")","{","return","window","(","TumblingDurationWindow",".","of","(","windowDuration",")",",","windowStoreFactory,","inputFields,","aggregator,","functionFields",")",";"],"docstring_tokens":["Returns","a","stream","of","tuples","which","are","aggregated","results","of","a","window","that","tumbles","at","duration","of","windowDuration"],"prompt_tokens":[]}
{"code_tokens":["public","Stream","slidingWindow","(","int","windowCount,","int","slideCount,","WindowsStoreFactory","windowStoreFactory,\n","Fields","inputFields,","Aggregator","aggregator,","Fields","functionFields",")","{","return","window","(","SlidingCountWindow",".","of","(","windowCount,","slideCount",")",",","windowStoreFactory,","inputFields,","aggregator,","functionFields",")",";"],"docstring_tokens":["Returns","a","stream","of","tuples","which","are","aggregated","results","of","a","sliding","window","with","every","windowCount","of","tuples","and","slides","the","window","after","slideCount"],"prompt_tokens":[]}
{"code_tokens":["public","Stream","slidingWindow","(","BaseWindowedBolt",".","Duration","windowDuration,","BaseWindowedBolt",".","Duration","slidingInterval,\n","WindowsStoreFactory","windowStoreFactory,","Fields","inputFields,","Aggregator","aggregator,","Fields","functionFields",")","{","return","window","(","SlidingDurationWindow",".","of","(","windowDuration,","slidingInterval",")",",","windowStoreFactory,","inputFields,","aggregator,\n","functionFields",")",";"],"docstring_tokens":["Returns","a","stream","of","tuples","which","are","aggregated","results","of","a","window","which","slides","at","duration","of","slidingInterval","and","completes","a","window","at","windowDuration"],"prompt_tokens":[]}
{"code_tokens":["public","Stream","window","(","WindowConfig","windowConfig,","WindowsStoreFactory","windowStoreFactory,","Fields","inputFields,\n","Aggregator","aggregator,","Fields","functionFields",")","{","return","window","(","windowConfig,","windowStoreFactory,","inputFields,","aggregator,","functionFields,","true",")",";"],"docstring_tokens":["Returns","stream","of","aggregated","results","based","on","the","given","window","configuration"],"prompt_tokens":[]}
{"code_tokens":["public","void","add","(","WorkerResources","value",")","{","Map<String,","Double>","workerNormalizedResources","=","value",".","get_resources","(",")",";","cpu","+=","workerNormalizedResources",".","getOrDefault","(","Constants",".","COMMON_CPU_RESOURCE_NAME,","0",".","0",")",";","add","(","RESOURCE_MAP_ARRAY_BRIDGE",".","translateToResourceArray","(","workerNormalizedResources",")",")",";"],"docstring_tokens":["Add","the","resources","from","a","worker","to","this"],"prompt_tokens":[]}
{"code_tokens":["public","boolean","remove","(","NormalizedResources","other,","ResourceMetrics","resourceMetrics",")","{","boolean","ret","=","false",";","this",".","cpu","-=","other",".","cpu",";","if","(","cpu","<","0",".","0",")","{","ret","=","true",";","if","(","resourceMetrics","!=","null",")","{","resourceMetrics",".","getNegativeResourceEventsMeter","(",")",".","mark","(",")",";","}","cpu","=","0",".","0",";","}","int","otherLength","=","other",".","otherResources",".","length",";","zeroPadOtherResourcesIfNecessary","(","otherLength",")",";","for","(","int","i","=","0",";","i","<","otherLength",";","i++",")","{","otherResources[i]","-=","other",".","otherResources[i]",";","if","(","otherResources[i]","<","0",".","0",")","{","ret","=","true",";","if","(","resourceMetrics","!=","null",")","{","resourceMetrics",".","getNegativeResourceEventsMeter","(",")",".","mark","(",")",";","}","otherResources[i]","=","0",".","0",";","}","}","return","ret",";"],"docstring_tokens":["Remove","the","other","resources","from","this"],"prompt_tokens":[]}
{"code_tokens":["public","boolean","remove","(","WorkerResources","value",")","{","Map<String,","Double>","workerNormalizedResources","=","value",".","get_resources","(",")",";","cpu","-=","workerNormalizedResources",".","getOrDefault","(","Constants",".","COMMON_CPU_RESOURCE_NAME,","0",".","0",")",";","return","remove","(","RESOURCE_MAP_ARRAY_BRIDGE",".","translateToResourceArray","(","workerNormalizedResources",")",")","||","cpu","<","0",";"],"docstring_tokens":["Remove","the","resources","of","a","worker","from","this"],"prompt_tokens":[]}
{"code_tokens":["public","FieldSelector","now","(",")","{","this",".","isNow","=","true",";","return","this",";"],"docstring_tokens":["Sets","the","fields","as","an","automatically","generated","TimeUUID"],"prompt_tokens":[]}
{"code_tokens":["public","FieldSelector","as","(","String","as",")","{","this",".","as","=","as",";","return","this",";"],"docstring_tokens":["Sets","an","alias","for","this","field"],"prompt_tokens":[]}
{"code_tokens":["public","static","<K,","V","extends","Number>","Map<String,","Object>","aggPreMergeTopoPageBolt","(","Map<String,","Object>","beat,","String","window,","boolean","includeSys",")","{","Map<String,","Object>","subRet","=","new","HashMap<>","(",")",";","subRet",".","put","(","NUM_EXECUTORS,","1",")",";","subRet",".","put","(","NUM_TASKS,","beat",".","get","(","NUM_TASKS",")",")",";","\n\n","Map<String,","Object>","stat2win2sid2num","=","ClientStatsUtil",".","getMapByKey","(","beat,","STATS",")",";","subRet",".","put","(","CAPACITY,","computeAggCapacity","(","stat2win2sid2num,","getByKeyOr0","(","beat,","ClientStatsUtil",".","UPTIME",")",".","intValue","(",")",")",")",";","\n\n","for","(","String","key",":","new","String[]","{","EMITTED,","TRANSFERRED,","ACKED,","FAILED","}",")","{","Map<String,","Map<K,","V>>","stat","=","windowSetConverter","(","ClientStatsUtil",".","getMapByKey","(","stat2win2sid2num,","key",")",",","TO_STRING",")",";","if","(","EMITTED",".","equals","(","key",")","||","TRANSFERRED",".","equals","(","key",")",")","{","stat","=","filterSysStreams","(","stat,","includeSys",")",";","}","Map<K,","V>","winStat","=","stat",".","get","(","window",")",";","long","sum","=","0",";","if","(","winStat","!=","null",")","{","for","(","V","v",":","winStat",".","values","(",")",")","{","sum","+=","v",".","longValue","(",")",";","}","}","subRet",".","put","(","key,","sum",")",";","}","\n\n","Map<String,","Map<List<String>,","Double>>","win2sid2execLat","=\n","windowSetConverter","(","ClientStatsUtil",".","getMapByKey","(","stat2win2sid2num,","EXEC_LATENCIES",")",",","TO_STRING",")",";","Map<String,","Map<List<String>,","Double>>","win2sid2procLat","=\n","windowSetConverter","(","ClientStatsUtil",".","getMapByKey","(","stat2win2sid2num,","PROC_LATENCIES",")",",","TO_STRING",")",";","Map<String,","Map<List<String>,","Long>>","win2sid2exec","=\n","windowSetConverter","(","ClientStatsUtil",".","getMapByKey","(","stat2win2sid2num,","EXECUTED",")",",","TO_STRING",")",";","subRet",".","putAll","(","aggBoltLatAndCount","(","win2sid2execLat",".","get","(","window",")",",","win2sid2procLat",".","get","(","window",")",",","win2sid2exec",".","get","(","window",")",")",")",";","\n\n","Map<String,","Object>","ret","=","new","HashMap<>","(",")",";","ret",".","put","(","(","String",")","beat",".","get","(","\"comp-id\"",")",",","subRet",")",";","return","ret",";"],"docstring_tokens":["pre-merge","component","stats","of","specified","bolt","id"],"prompt_tokens":[]}
{"code_tokens":["public","static","TopologyPageInfo","aggTopoExecsStats","(","String","topologyId,","Map","exec2nodePort,","Map","task2component,","Map<List<Integer>,","Map<String,","Object>>","beats,\n","StormTopology","topology,","String","window,","boolean","includeSys,","IStormClusterState","clusterState",")","{","List<Map<String,","Object>>","beatList","=","extractDataFromHb","(","exec2nodePort,","task2component,","beats,","includeSys,","topology",")",";","Map<String,","Object>","topoStats","=","aggregateTopoStats","(","window,","includeSys,","beatList",")",";","return","postAggregateTopoStats","(","task2component,","exec2nodePort,","topoStats,","topologyId,","clusterState",")",";"],"docstring_tokens":["aggregate","topo","executors","stats"],"prompt_tokens":[]}
{"code_tokens":["public","static","Map<String,","Object>","aggBoltExecWinStats","(","Map<String,","Object>","accStats,","Map<String,","Object>","newStats,","boolean","includeSys",")","{","Map<String,","Object>","ret","=","new","HashMap<>","(",")",";","\n\n","Map<String,","Map<String,","Number>>","m","=","new","HashMap<>","(",")",";","for","(","Object","win",":","ClientStatsUtil",".","getMapByKey","(","newStats,","EXECUTED",")",".","keySet","(",")",")","{","m",".","put","(","(","String",")","win,","aggBoltLatAndCount","(","(","Map",")","(","ClientStatsUtil",".","getMapByKey","(","newStats,","EXEC_LATENCIES",")",")",".","get","(","win",")",",\n","(","Map",")","(","ClientStatsUtil",".","getMapByKey","(","newStats,","PROC_LATENCIES",")",")",".","get","(","win",")",",\n","(","Map",")","(","ClientStatsUtil",".","getMapByKey","(","newStats,","EXECUTED",")",")",".","get","(","win",")",")",")",";","}","m","=","swapMapOrder","(","m",")",";","\n\n","Map<String,","Double>","win2execLatWgtAvg","=","ClientStatsUtil",".","getMapByKey","(","m,","EXEC_LAT_TOTAL",")",";","Map<String,","Double>","win2procLatWgtAvg","=","ClientStatsUtil",".","getMapByKey","(","m,","PROC_LAT_TOTAL",")",";","Map<String,","Long>","win2executed","=","ClientStatsUtil",".","getMapByKey","(","m,","EXECUTED",")",";","\n\n","Map<String,","Map<String,","Long>>","emitted","=","ClientStatsUtil",".","getMapByKey","(","newStats,","EMITTED",")",";","Map<String,","Long>","win2emitted","=","mergeWithSumLong","(","aggregateCountStreams","(","filterSysStreams","(","emitted,","includeSys",")",")",",\n","ClientStatsUtil",".","getMapByKey","(","accStats,","WIN_TO_EMITTED",")",")",";","ret",".","put","(","WIN_TO_EMITTED,","win2emitted",")",";","\n\n","Map<String,","Map<String,","Long>>","transferred","=","ClientStatsUtil",".","getMapByKey","(","newStats,","TRANSFERRED",")",";","Map<String,","Long>","win2transferred","=","mergeWithSumLong","(","aggregateCountStreams","(","filterSysStreams","(","transferred,","includeSys",")",")",",\n","ClientStatsUtil",".","getMapByKey","(","accStats,","WIN_TO_TRANSFERRED",")",")",";","ret",".","put","(","WIN_TO_TRANSFERRED,","win2transferred",")",";","\n\n","ret",".","put","(","WIN_TO_EXEC_LAT_WGT_AVG,","mergeWithSumDouble","(","ClientStatsUtil",".","getMapByKey","(","accStats,","WIN_TO_EXEC_LAT_WGT_AVG",")",",","win2execLatWgtAvg",")",")",";","ret",".","put","(","WIN_TO_PROC_LAT_WGT_AVG,","mergeWithSumDouble","(","ClientStatsUtil",".","getMapByKey","(","accStats,","WIN_TO_PROC_LAT_WGT_AVG",")",",","win2procLatWgtAvg",")",")",";","ret",".","put","(","WIN_TO_EXECUTED,","mergeWithSumLong","(","ClientStatsUtil",".","getMapByKey","(","accStats,","WIN_TO_EXECUTED",")",",","win2executed",")",")",";","ret",".","put","(","WIN_TO_ACKED,","mergeWithSumLong","(","aggregateCountStreams","(","ClientStatsUtil",".","getMapByKey","(","newStats,","ACKED",")",")",",","ClientStatsUtil",".","getMapByKey","(","accStats,","WIN_TO_ACKED",")",")",")",";","ret",".","put","(","WIN_TO_FAILED,","mergeWithSumLong","(","aggregateCountStreams","(","ClientStatsUtil",".","getMapByKey","(","newStats,","FAILED",")",")",",","ClientStatsUtil",".","getMapByKey","(","accStats,","WIN_TO_FAILED",")",")",")",";","\n\n","return","ret",";"],"docstring_tokens":["aggregate","windowed","stats","from","a","bolt","executor","stats","with","a","Map","of","accumulated","stats"],"prompt_tokens":[]}
{"code_tokens":["public","static","Map<String,","Object>","aggSpoutExecWinStats","(","Map<String,","Object>","accStats,","Map<String,","Object>","beat,","boolean","includeSys",")","{","Map<String,","Object>","ret","=","new","HashMap<>","(",")",";","\n\n","Map<String,","Map<String,","Number>>","m","=","new","HashMap<>","(",")",";","for","(","Object","win",":","ClientStatsUtil",".","getMapByKey","(","beat,","ACKED",")",".","keySet","(",")",")","{","m",".","put","(","(","String",")","win,","aggSpoutLatAndCount","(","(","Map<String,","Double>",")","(","ClientStatsUtil",".","getMapByKey","(","beat,","COMP_LATENCIES",")",")",".","get","(","win",")",",\n","(","Map<String,","Long>",")","(","ClientStatsUtil",".","getMapByKey","(","beat,","ACKED",")",")",".","get","(","win",")",")",")",";","}","m","=","swapMapOrder","(","m",")",";","\n\n","Map<String,","Double>","win2compLatWgtAvg","=","ClientStatsUtil",".","getMapByKey","(","m,","COMP_LAT_TOTAL",")",";","Map<String,","Long>","win2acked","=","ClientStatsUtil",".","getMapByKey","(","m,","ACKED",")",";","\n\n","Map<String,","Map<String,","Long>>","emitted","=","ClientStatsUtil",".","getMapByKey","(","beat,","EMITTED",")",";","Map<String,","Long>","win2emitted","=","mergeWithSumLong","(","aggregateCountStreams","(","filterSysStreams","(","emitted,","includeSys",")",")",",\n","ClientStatsUtil",".","getMapByKey","(","accStats,","WIN_TO_EMITTED",")",")",";","ret",".","put","(","WIN_TO_EMITTED,","win2emitted",")",";","\n\n","Map<String,","Map<String,","Long>>","transferred","=","ClientStatsUtil",".","getMapByKey","(","beat,","TRANSFERRED",")",";","Map<String,","Long>","win2transferred","=","mergeWithSumLong","(","aggregateCountStreams","(","filterSysStreams","(","transferred,","includeSys",")",")",",\n","ClientStatsUtil",".","getMapByKey","(","accStats,","WIN_TO_TRANSFERRED",")",")",";","ret",".","put","(","WIN_TO_TRANSFERRED,","win2transferred",")",";","\n\n","ret",".","put","(","WIN_TO_COMP_LAT_WGT_AVG,","mergeWithSumDouble","(","ClientStatsUtil",".","getMapByKey","(","accStats,","WIN_TO_COMP_LAT_WGT_AVG",")",",","win2compLatWgtAvg",")",")",";","ret",".","put","(","WIN_TO_ACKED,","mergeWithSumLong","(","ClientStatsUtil",".","getMapByKey","(","accStats,","WIN_TO_ACKED",")",",","win2acked",")",")",";","ret",".","put","(","WIN_TO_FAILED,","mergeWithSumLong","(","aggregateCountStreams","(","ClientStatsUtil",".","getMapByKey","(","beat,","FAILED",")",")",",","ClientStatsUtil",".","getMapByKey","(","accStats,","WIN_TO_FAILED",")",")",")",";","\n\n","return","ret",";"],"docstring_tokens":["aggregate","windowed","stats","from","a","spout","executor","stats","with","a","Map","of","accumulated","stats"],"prompt_tokens":[]}
{"code_tokens":["public","static","ComponentPageInfo","aggCompExecsStats","(","Map","exec2hostPort,","Map","task2component,","Map<List<Integer>,","Map<String,","Object>>","beats,\n","String","window,","boolean","includeSys,","String","topologyId,","StormTopology","topology,","String","componentId",")","{","\n\n","List<Map<String,","Object>>","beatList","=\n","extractDataFromHb","(","exec2hostPort,","task2component,","beats,","includeSys,","topology,","componentId",")",";","Map<String,","Object>","compStats","=","aggregateCompStats","(","window,","includeSys,","beatList,","componentType","(","topology,","componentId",")",")",";","compStats","=","postAggregateCompStats","(","compStats",")",";","return","thriftifyCompPageData","(","topologyId,","topology,","componentId,","compStats",")",";"],"docstring_tokens":["aggregate","component","executor","stats"],"prompt_tokens":[]}
{"code_tokens":["public","static","List<WorkerSummary>","aggWorkerStats","(","String","stormId,","String","stormName,\n","Map<Integer,","String>","task2Component,\n","Map<List<Integer>,","Map<String,","Object>>","beats,\n","Map<List<Long>,","List<Object>>","exec2NodePort,\n","Map<String,","String>","nodeHost,\n","Map<WorkerSlot,","WorkerResources>","worker2Resources,\n","boolean","includeSys,\n","boolean","userAuthorized,\n","String","filterSupervisor,\n","String","owner",")","{","\n\n","//","host,port","=>","WorkerSummary\n","HashMap<WorkerSlot,","WorkerSummary>","workerSummaryMap","=","new","HashMap<>","(",")",";","\n\n","if","(","exec2NodePort","!=","null",")","{","//","for","each","executor","->","node+port","pair\n","for","(","Map",".","Entry<List<Long>,","List<Object>>","execNodePort",":","exec2NodePort",".","entrySet","(",")",")","{","List<Object>","nodePort","=","execNodePort",".","getValue","(",")",";","String","node","=","(","String",")","nodePort",".","get","(","0",")",";","Long","port","=","(","Long",")","nodePort",".","get","(","1",")",";","String","host","=","nodeHost",".","get","(","node",")",";","WorkerSlot","slot","=","new","WorkerSlot","(","node,","port",")",";","WorkerResources","resources","=","worker2Resources",".","get","(","slot",")",";","\n\n","if","(","filterSupervisor","==","null","||","node",".","equals","(","filterSupervisor",")",")","{","WorkerSummary","ws","=","workerSummaryMap",".","get","(","slot",")",";","\n\n","if","(","ws","==","null",")","{","ws","=","new","WorkerSummary","(",")",";","ws",".","set_host","(","host",")",";","ws",".","set_port","(","port",".","intValue","(",")",")",";","ws",".","set_supervisor_id","(","node",")",";","ws",".","set_topology_id","(","stormId",")",";","ws",".","set_topology_name","(","stormName",")",";","ws",".","set_num_executors","(","0",")",";","ws",".","set_owner","(","owner",")",";","if","(","resources","!=","null",")","{","ws",".","set_assigned_memonheap","(","resources",".","get_mem_on_heap","(",")",")",";","ws",".","set_assigned_memoffheap","(","resources",".","get_mem_off_heap","(",")",")",";","ws",".","set_assigned_cpu","(","resources",".","get_cpu","(",")",")",";","}","else","{","ws",".","set_assigned_memonheap","(","0",")",";","ws",".","set_assigned_memoffheap","(","0",")",";","ws",".","set_assigned_cpu","(","0",")",";","}","ws",".","set_component_to_num_tasks","(","new","HashMap<String,","Long>","(",")",")",";","workerSummaryMap",".","put","(","slot,","ws",")",";","}","Map<String,","Long>","componentToNumTasks","=","ws",".","get_component_to_num_tasks","(",")",";","\n\n","//","gets","min/max","task","pairs","(","executors",")",":","[1","1]","[2","3]",".",".",".","List<Long>","exec","=","execNodePort",".","getKey","(",")",";","//","get","executor","heartbeat\n","int","hbeatSecs","=","0",";","if","(","beats","!=","null",")","{","Map<String,","Object>","beat","=","beats",".","get","(","ClientStatsUtil",".","convertExecutor","(","exec",")",")",";","hbeatSecs","=","beat","==","null","?","0",":","(","int",")","beat",".","get","(","\"uptime\"",")",";","}","ws",".","set_uptime_secs","(","hbeatSecs",")",";","ws",".","set_num_executors","(","ws",".","get_num_executors","(",")","+","1",")",";","\n\n","//","get","tasks","if","the","user","is","authorized","for","this","topology\n","if","(","userAuthorized",")","{","int","firstTask","=","exec",".","get","(","0",")",".","intValue","(",")",";","int","lastTask","=","exec",".","get","(","1",")",".","intValue","(",")",";","\n\n","//","get","per","task","components\n","for","(","int","task","=","firstTask",";","task","<=","lastTask",";","task++",")","{","String","component","=","task2Component",".","get","(","task",")",";","//","if","the","component","is","a","system","(","__*",")","component","and","we","are","hiding\n","//","them","in","UI,","keep","going\n","if","(","!includeSys","&&","Utils",".","isSystemId","(","component",")",")","{","continue",";","}","\n\n","//","good","to","go,","increment","#","of","tasks","this","component","is","being","executed","on\n","Long","counter","=","componentToNumTasks",".","get","(","component",")",";","if","(","counter","==","null",")","{","counter","=","new","Long","(","0",")",";","}","componentToNumTasks",".","put","(","component,","counter","+","1",")",";","}","}","}","}","}","return","new","ArrayList<WorkerSummary>","(","workerSummaryMap",".","values","(",")",")",";"],"docstring_tokens":["aggregate","statistics","per","worker","for","a","topology"],"prompt_tokens":[]}
{"code_tokens":["public","static","Map<List<Integer>,","Map<String,","Object>>","convertExecutorBeats","(","Map<ExecutorInfo,","ExecutorBeat>","beats",")","{","Map<List<Integer>,","Map<String,","Object>>","ret","=","new","HashMap<>","(",")",";","for","(","Map",".","Entry<ExecutorInfo,","ExecutorBeat>","beat",":","beats",".","entrySet","(",")",")","{","ExecutorInfo","executorInfo","=","beat",".","getKey","(",")",";","ExecutorBeat","executorBeat","=","beat",".","getValue","(",")",";","ret",".","put","(","Lists",".","newArrayList","(","executorInfo",".","get_task_start","(",")",",","executorInfo",".","get_task_end","(",")",")",",\n","convertZkExecutorHb","(","executorBeat",")",")",";","}","\n\n","return","ret",";"],"docstring_tokens":["convert","thrift","executor","heartbeats","into","a","java","HashMap"],"prompt_tokens":[]}
{"code_tokens":["public","static","Map<List<Integer>,","Map<String,","Object>>","convertWorkerBeats","(","SupervisorWorkerHeartbeat","workerHeartbeat",")","{","Map<List<Integer>,","Map<String,","Object>>","ret","=","new","HashMap<>","(",")",";","for","(","ExecutorInfo","executorInfo",":","workerHeartbeat",".","get_executors","(",")",")","{","Map<String,","Object>","reportBeat","=","new","HashMap<>","(",")",";","reportBeat",".","put","(","ClientStatsUtil",".","TIME_SECS,","workerHeartbeat",".","get_time_secs","(",")",")",";","ret",".","put","(","Lists",".","newArrayList","(","executorInfo",".","get_task_start","(",")",",","executorInfo",".","get_task_end","(",")",")",",\n","reportBeat",")",";","}","\n\n","return","ret",";"],"docstring_tokens":["convert","SupervisorWorkerHeartbeat","to","nimbus","local","report","executor","heartbeats"],"prompt_tokens":[]}
{"code_tokens":["public","static","List<Map<String,","Object>>","extractNodeInfosFromHbForComp","(","Map<List<?","extends","Number>,","List<Object>>","exec2hostPort,","Map<Integer,","String>","task2component,","boolean","includeSys,","String","compId",")","{","List<Map<String,","Object>>","ret","=","new","ArrayList<>","(",")",";","\n\n","Set<List>","hostPorts","=","new","HashSet<>","(",")",";","for","(","Entry<List<?","extends","Number>,","List<Object>>","entry",":","exec2hostPort",".","entrySet","(",")",")","{","List<?","extends","Number>","key","=","entry",".","getKey","(",")",";","List<Object>","value","=","entry",".","getValue","(",")",";","\n\n","Integer","start","=","key",".","get","(","0",")",".","intValue","(",")",";","String","host","=","(","String",")","value",".","get","(","0",")",";","Integer","port","=","(","Integer",")","value",".","get","(","1",")",";","String","comp","=","task2component",".","get","(","start",")",";","if","(","(","compId","==","null","||","compId",".","equals","(","comp",")",")","&&","(","includeSys","||","!Utils",".","isSystemId","(","comp",")",")",")","{","hostPorts",".","add","(","Lists",".","newArrayList","(","host,","port",")",")",";","}","}","\n\n","for","(","List","hostPort",":","hostPorts",")","{","Map<String,","Object>","m","=","new","HashMap<>","(",")",";","m",".","put","(","HOST,","hostPort",".","get","(","0",")",")",";","m",".","put","(","PORT,","hostPort",".","get","(","1",")",")",";","ret",".","add","(","m",")",";","}","\n\n","return","ret",";"],"docstring_tokens":["extract","a","list","of","host","port","info","for","specified","component"],"prompt_tokens":[]}
{"code_tokens":["public","static","List<Map<String,","Object>>","extractDataFromHb","(","Map","executor2hostPort,","Map","task2component,\n","Map<List<Integer>,","Map<String,","Object>>","beats,\n","boolean","includeSys,","StormTopology","topology,","String","compId",")","{","List<Map<String,","Object>>","ret","=","new","ArrayList<>","(",")",";","if","(","executor2hostPort","==","null","||","beats","==","null",")","{","return","ret",";","}","for","(","Object","o",":","executor2hostPort",".","entrySet","(",")",")","{","Map",".","Entry","entry","=","(","Map",".","Entry",")","o",";","List","executor","=","(","List",")","entry",".","getKey","(",")",";","List","hostPort","=","(","List",")","entry",".","getValue","(",")",";","\n\n","Integer","start","=","(","(","Number",")","executor",".","get","(","0",")",")",".","intValue","(",")",";","Integer","end","=","(","(","Number",")","executor",".","get","(","1",")",")",".","intValue","(",")",";","\n\n","String","host","=","(","String",")","hostPort",".","get","(","0",")",";","Integer","port","=","(","(","Number",")","hostPort",".","get","(","1",")",")",".","intValue","(",")",";","\n\n","Map<String,","Object>","beat","=","beats",".","get","(","ClientStatsUtil",".","convertExecutor","(","executor",")",")",";","if","(","beat","==","null",")","{","continue",";","}","String","id","=","(","String",")","task2component",".","get","(","start",")",";","\n\n","Map<String,","Object>","m","=","new","HashMap<>","(",")",";","if","(","(","compId","==","null","||","compId",".","equals","(","id",")",")","&&","(","includeSys","||","!Utils",".","isSystemId","(","id",")",")",")","{","m",".","put","(","\"exec-id\",","entry",".","getKey","(",")",")",";","m",".","put","(","\"comp-id\",","id",")",";","m",".","put","(","NUM_TASKS,","end","-","start","+","1",")",";","m",".","put","(","HOST,","host",")",";","m",".","put","(","PORT,","port",")",";","\n\n","Map","stats","=","ClientStatsUtil",".","getMapByKey","(","beat,","STATS",")",";","m",".","put","(","ClientStatsUtil",".","UPTIME,","beat",".","get","(","ClientStatsUtil",".","UPTIME",")",")",";","m",".","put","(","STATS,","stats",")",";","\n\n","String","type","=","componentType","(","topology,","compId",")",";","if","(","type","!=","null",")","{","m",".","put","(","TYPE,","type",")",";","}","else","{","m",".","put","(","TYPE,","stats",".","get","(","TYPE",")",")",";","}","ret",".","add","(","m",")",";","}","}","return","ret",";"],"docstring_tokens":["extracts","a","list","of","executor","data","from","heart","beats"],"prompt_tokens":[]}
{"code_tokens":["private","static","<K,","V>","Map<K,","V>","filterSysStreams2Stat","(","Map<K,","V>","stream2stat,","boolean","includeSys",")","{","LOG",".","trace","(","\"Filter","Sys","Streams2Stat","{","}","\",","stream2stat",")",";","if","(","!includeSys",")","{","for","(","Iterator","itr","=","stream2stat",".","keySet","(",")",".","iterator","(",")",";","itr",".","hasNext","(",")",";",")","{","Object","key","=","itr",".","next","(",")",";","if","(","key","instanceof","String","&&","Utils",".","isSystemId","(","(","String",")","key",")",")","{","itr",".","remove","(",")",";","}","}","}","return","stream2stat",";"],"docstring_tokens":["filter","system","streams","from","stats"],"prompt_tokens":[]}
{"code_tokens":["public","static","String","componentType","(","StormTopology","topology,","String","compId",")","{","if","(","compId","==","null",")","{","return","null",";","}","\n\n","Map<String,","Bolt>","bolts","=","topology",".","get_bolts","(",")",";","if","(","Utils",".","isSystemId","(","compId",")","||","bolts",".","containsKey","(","compId",")",")","{","return","ClientStatsUtil",".","BOLT",";","}","return","ClientStatsUtil",".","SPOUT",";"],"docstring_tokens":["Get","the","coponenet","type","for","a","give","id"],"prompt_tokens":[]}
{"code_tokens":["private","Set<Integer>","workerOutboundTasks","(",")","{","WorkerTopologyContext","context","=","getWorkerTopologyContext","(",")",";","Set<String>","components","=","new","HashSet<>","(",")",";","for","(","Integer","taskId",":","localTaskIds",")","{","for","(","Map<String,","Grouping>","value",":","context",".","getTargets","(","context",".","getComponentId","(","taskId",")",")",".","values","(",")",")","{","components",".","addAll","(","value",".","keySet","(",")",")",";","}","}","\n\n","Set<Integer>","outboundTasks","=","new","HashSet<>","(",")",";","\n\n","for","(","Map",".","Entry<String,","List<Integer>>","entry",":","Utils",".","reverseMap","(","taskToComponent",")",".","entrySet","(",")",")","{","if","(","components",".","contains","(","entry",".","getKey","(",")",")",")","{","outboundTasks",".","addAll","(","entry",".","getValue","(",")",")",";","}","}","return","outboundTasks",";"],"docstring_tokens":["Get","worker","outbound","tasks"],"prompt_tokens":[]}
{"code_tokens":["public","boolean","hasRemoteOutboundTasks","(",")","{","Set<Integer>","remoteTasks","=","Sets",".","difference","(","new","HashSet<>","(","outboundTasks",")",",","new","HashSet<>","(","localTaskIds",")",")",";","return","!remoteTasks",".","isEmpty","(",")",";"],"docstring_tokens":["Check","if","this","worker","has","remote","outbound","tasks"],"prompt_tokens":[]}
{"code_tokens":["public","boolean","isSingleWorker","(",")","{","Set<Integer>","nonLocalTasks","=","Sets",".","difference","(","getTaskToComponent","(",")",".","keySet","(",")",",\n","new","HashSet<>","(","localTaskIds",")",")",";","return","nonLocalTasks",".","isEmpty","(",")",";"],"docstring_tokens":["If","all","the","tasks","are","local","tasks,","the","topology","has","only","one","worker"],"prompt_tokens":[]}
{"code_tokens":["@Override\n","public","TriggerPolicy<T,","?>","getTriggerPolicy","(","TriggerHandler","triggerHandler,","EvictionPolicy<T,","?>","evictionPolicy",")","{","return","new","TimeTriggerPolicy<>","(","windowConfig",".","getSlidingLength","(",")",",","triggerHandler,","evictionPolicy",")",";"],"docstring_tokens":["Returns","a","TriggerPolicy","which","triggers","for","every","given","sliding","duration"],"prompt_tokens":[]}
{"code_tokens":["@Override\n","public","EvictionPolicy<T,","?>","getEvictionPolicy","(",")","{","return","new","TimeEvictionPolicy<>","(","windowConfig",".","getWindowLength","(",")",")",";"],"docstring_tokens":["Returns","an","EvictionPolicy","instance","which","evicts","elements","after","given","window","duration"],"prompt_tokens":[]}
{"code_tokens":["public","boolean","hasCommitted","(",")","{","return","committed",";"],"docstring_tokens":["Checks","if","this","OffsetManager","has","committed","to","Kafka"],"prompt_tokens":[]}
{"code_tokens":["public","void","refresh","(",")","{","long","current","=","Time",".","currentTimeMillis","(",")",";","if","(","lastUpdateTimestamp","<=","0","||","current",">","lastUpdateTimestamp","+","configCacheExpirationMs",")","{","LOG",".","debug","(","\"refreshing","scheduler","config","since","cache","is","expired\"",")",";","T","updatedConfig","=","reloader",".","reload","(",")",";","schedulerConfigAtomicReference",".","set","(","updatedConfig",")",";","lastUpdateTimestamp","=","current",";","}","else","{","LOG",".","debug","(","\"skip","refreshing","scheduler","config","since","cache","is","not","yet","expired",";","\"",")",";","}"],"docstring_tokens":["Refresh","the","config","only","after","the","cache","expires"],"prompt_tokens":[]}
{"code_tokens":["public","LocalFsBlobStoreFile","read","(","String","key",")","throws","IOException","{","return","new","LocalFsBlobStoreFile","(","getKeyDir","(","key",")",",","BlobStoreFile",".","BLOBSTORE_DATA_FILE",")",";"],"docstring_tokens":["Get","an","input","stream","for","reading","a","part"],"prompt_tokens":[]}
{"code_tokens":["public","boolean","exists","(","String","key",")","{","return","getKeyDir","(","key",")",".","exists","(",")",";"],"docstring_tokens":["Check","if","the","key","exists","in","the","blob","store"],"prompt_tokens":[]}
{"code_tokens":["public","void","deleteKey","(","String","key",")","throws","IOException","{","File","keyDir","=","getKeyDir","(","key",")",";","LocalFsBlobStoreFile","pf","=","new","LocalFsBlobStoreFile","(","keyDir,","BlobStoreFile",".","BLOBSTORE_DATA_FILE",")",";","pf",".","delete","(",")",";","delete","(","keyDir",")",";"],"docstring_tokens":["Delete","a","key","from","the","blob","store"],"prompt_tokens":[]}
{"code_tokens":["public","void","schedule","(","int","delaySecs,","Runnable","func,","boolean","checkActive,","int","jitterMs",")","{","scheduleMs","(","Time",".","secsToMillisLong","(","delaySecs",")",",","func,","checkActive,","jitterMs",")",";"],"docstring_tokens":["Schedule","a","function","to","be","executed","in","the","timer"],"prompt_tokens":[]}
{"code_tokens":["private","void","checkActive","(",")","{","if","(","!this",".","task",".","isActive","(",")",")","{","throw","new","IllegalStateException","(","\"Timer","is","not","active\"",")",";","}"],"docstring_tokens":["check","if","timer","is","active"],"prompt_tokens":[]}
{"code_tokens":["public","void","record","(","T","key,","long","latency",")","{","get","(","key",")",".","record","(","latency",")",";"],"docstring_tokens":["Record","a","latency","value"],"prompt_tokens":[]}
{"code_tokens":["public","Map<String,","Map<String,","List<String>>>","getThisInputFields","(",")","{","Map<String,","Map<String,","List<String>>>","outputMap","=","new","HashMap<>","(",")",";","for","(","Map",".","Entry<GlobalStreamId,","Grouping>","entry",":","this",".","getThisSources","(",")",".","entrySet","(",")",")","{","String","componentId","=","entry",".","getKey","(",")",".","get_componentId","(",")",";","Set<String>","streams","=","getComponentStreams","(","componentId",")",";","for","(","String","stream",":","streams",")","{","Map<String,","List<String>>","streamFieldMap","=","outputMap",".","get","(","componentId",")",";","if","(","streamFieldMap","==","null",")","{","streamFieldMap","=","new","HashMap<>","(",")",";","outputMap",".","put","(","componentId,","streamFieldMap",")",";","}","streamFieldMap",".","put","(","stream,","getComponentOutputFields","(","componentId,","stream",")",".","toList","(",")",")",";","}","}","return","outputMap",";"],"docstring_tokens":["Gets","the","declared","input","fields","for","this","component"],"prompt_tokens":[]}
{"code_tokens":["public","TridentJmsSpout","named","(","String","name",")","{","this",".","name","=","name",";","return","this",";"],"docstring_tokens":["Set","the","name","for","this","spout,","to","improve","log","identification"],"prompt_tokens":[]}
{"code_tokens":["public","TridentJmsSpout","withJmsProvider","(","JmsProvider","provider",")","{","this",".","jmsProvider","=","provider",";","return","this",";"],"docstring_tokens":["Set","the","JmsProvider","implementation","that","this","Spout","will","use","to","connect","to","a","JMS","javax.jms.Desination"],"prompt_tokens":[]}
{"code_tokens":["public","OpenTsdbBolt","failTupleForFailedMetrics","(",")","{","this",".","failTupleForFailedMetrics","=","true",";","return","this",";"],"docstring_tokens":["When","it","is","invoked,","this","bolt","acks","only","the","tuples","which","have","successful","metrics","stored","into","OpenTSDB","and","fails","the","respective","tuples","of","the","failed","metrics"],"prompt_tokens":[]}
{"code_tokens":["private","int","getNodesForIsolatedTop","(","TopologyDetails","td,","Set<Node>","allNodes,\n","NodePool[]","lesserPools,","int","nodesRequested",")","{","String","topId","=","td",".","getId","(",")",";","LOG",".","debug","(","\"Topology","{","}","is","isolated\",","topId",")",";","int","nodesFromUsAvailable","=","nodesAvailable","(",")",";","int","nodesFromOthersAvailable","=","NodePool",".","nodesAvailable","(","lesserPools",")",";","\n\n","int","nodesUsed","=","topologyIdToNodes",".","get","(","topId",")",".","size","(",")",";","int","nodesNeeded","=","nodesRequested","-","nodesUsed",";","LOG",".","debug","(","\"Nodes",".",".",".","requested","{","}","used","{","}","available","from","us","{","}","\"\n","+","\"avail","from","other","{","}","needed","{","}","\",\n","nodesRequested,\n","nodesUsed,\n","nodesFromUsAvailable,\n","nodesFromOthersAvailable,\n","nodesNeeded",")",";","if","(","(","nodesNeeded","-","nodesFromUsAvailable",")",">","(","maxNodes","-","usedNodes",")",")","{","cluster",".","setStatus","(","topId,\n","\"Max","Nodes","(","\"\n","+","maxNodes\n","+","\"",")","for","this","user","would","be","exceeded",".","\"\n","+","(","(","nodesNeeded","-","nodesFromUsAvailable",")","-","(","maxNodes","-","usedNodes",")",")","+","\"","more","nodes","needed","to","run","topology",".","\"",")",";","return","0",";","}","\n\n","//In","order","to","avoid","going","over","maxNodes","I","may","need","to","steal","from\n","//","myself","even","though","other","pools","have","free","nodes",".","so","figure","out","how\n","//","much","each","group","should","provide\n","int","nodesNeededFromOthers","=","Math",".","min","(","Math",".","min","(","maxNodes","-","usedNodes,\n","nodesFromOthersAvailable",")",",","nodesNeeded",")",";","int","nodesNeededFromUs","=","nodesNeeded","-","nodesNeededFromOthers",";","LOG",".","debug","(","\"Nodes",".",".",".","needed","from","us","{","}","needed","from","others","{","}","\",\n","nodesNeededFromUs,","nodesNeededFromOthers",")",";","\n\n","if","(","nodesNeededFromUs",">","nodesFromUsAvailable",")","{","cluster",".","setStatus","(","topId,","\"Not","Enough","Nodes","Available","to","Schedule","Topology\"",")",";","return","0",";","}","\n\n","//Get","the","nodes\n","Collection<Node>","found","=","NodePool",".","takeNodes","(","nodesNeededFromOthers,","lesserPools",")",";","usedNodes","+=","found",".","size","(",")",";","allNodes",".","addAll","(","found",")",";","Collection<Node>","foundMore","=","takeNodes","(","nodesNeededFromUs",")",";","usedNodes","+=","foundMore",".","size","(",")",";","allNodes",".","addAll","(","foundMore",")",";","\n\n","int","totalTasks","=","td",".","getExecutors","(",")",".","size","(",")",";","int","origRequest","=","td",".","getNumWorkers","(",")",";","int","slotsRequested","=","Math",".","min","(","totalTasks,","origRequest",")",";","int","slotsUsed","=","Node",".","countSlotsUsed","(","allNodes",")",";","int","slotsFree","=","Node",".","countFreeSlotsAlive","(","allNodes",")",";","int","slotsToUse","=","Math",".","min","(","slotsRequested","-","slotsUsed,","slotsFree",")",";","if","(","slotsToUse","<=","0",")","{","//","if","#","of","workers","requested","is","more","than","we","currently","have\n","if","(","origRequest",">","slotsUsed",")","{","cluster",".","setStatus","(","topId,\n","\"Running","with","fewer","slots","than","requested","\"\n","+","slotsUsed\n","+","\"/\"\n","+","origRequest\n","+","\"","on","\"\n","+","allNodes",".","size","(",")","+","\"","node","(","s",")","with","\"\n","+","(","slotsUsed","+","slotsFree",")","+","\"","total","slots\"",")",";","}","else","{","//","if","#","of","workers","requested","is","less","than","we","took\n","//","then","we","know","some","workers","we","track","died,","since","we","have","more","workers","than","we","are","supposed","to","have\n","cluster",".","setStatus","(","topId,","\"Node","has","partially","crashed,","if","this","situation","persists","rebalance","the","topology",".","\"",")",";","}","}","return","slotsToUse",";"],"docstring_tokens":["Get","the","nodes","needed","to","schedule","an","isolated","topology"],"prompt_tokens":[]}
{"code_tokens":["private","int","getNodesForNotIsolatedTop","(","TopologyDetails","td,","Set<Node>","allNodes,\n","NodePool[]","lesserPools",")","{","String","topId","=","td",".","getId","(",")",";","LOG",".","debug","(","\"Topology","{","}","is","not","isolated\",","topId",")",";","int","totalTasks","=","td",".","getExecutors","(",")",".","size","(",")",";","int","origRequest","=","td",".","getNumWorkers","(",")",";","int","slotsRequested","=","Math",".","min","(","totalTasks,","origRequest",")",";","int","slotsUsed","=","Node",".","countSlotsUsed","(","topId,","allNodes",")",";","int","slotsFree","=","Node",".","countFreeSlotsAlive","(","allNodes",")",";","//Check","to","see","if","we","have","enough","slots","before","trying","to","get","them\n","int","slotsAvailable","=","0",";","if","(","slotsRequested",">","slotsFree",")","{","slotsAvailable","=","NodePool",".","slotsAvailable","(","lesserPools",")",";","}","int","slotsToUse","=","Math",".","min","(","slotsRequested","-","slotsUsed,","slotsFree","+","slotsAvailable",")",";","LOG",".","debug","(","\"Slots",".",".",".","requested","{","}","used","{","}","free","{","}","available","{","}","to","be","used","{","}","\",\n","slotsRequested,","slotsUsed,","slotsFree,","slotsAvailable,","slotsToUse",")",";","if","(","slotsToUse","<=","0",")","{","cluster",".","setStatus","(","topId,","\"Not","Enough","Slots","Available","to","Schedule","Topology\"",")",";","return","0",";","}","int","slotsNeeded","=","slotsToUse","-","slotsFree",";","int","numNewNodes","=","NodePool",".","getNodeCountIfSlotsWereTaken","(","slotsNeeded,","lesserPools",")",";","LOG",".","debug","(","\"Nodes",".",".",".","new","{","}","used","{","}","max","{","}","\",\n","numNewNodes,","usedNodes,","maxNodes",")",";","if","(","(","numNewNodes","+","usedNodes",")",">","maxNodes",")","{","cluster",".","setStatus","(","topId,\n","\"Max","Nodes","(","\"\n","+","maxNodes\n","+","\"",")","for","this","user","would","be","exceeded",".","\"\n","+","(","numNewNodes","-","(","maxNodes","-","usedNodes",")",")","+","\"","more","nodes","needed","to","run","topology",".","\"",")",";","return","0",";","}","\n\n","Collection<Node>","found","=","NodePool",".","takeNodesBySlot","(","slotsNeeded,","lesserPools",")",";","usedNodes","+=","found",".","size","(",")",";","allNodes",".","addAll","(","found",")",";","return","slotsToUse",";"],"docstring_tokens":["Get","the","nodes","needed","to","schedule","a","non-isolated","topology"],"prompt_tokens":[]}
{"code_tokens":["public","LSWorkerHeartbeat","readHeartbeat","(",")","throws","IOException","{","LocalState","localState","=","ConfigUtils",".","workerState","(","conf,","workerId",")",";","LSWorkerHeartbeat","hb","=","localState",".","getWorkerHeartBeat","(",")",";","LOG",".","trace","(","\"","{","}",":","Reading","heartbeat","{","}","\",","workerId,","hb",")",";","return","hb",";"],"docstring_tokens":["Read","the","Heartbeat","for","the","current","container"],"prompt_tokens":[]}
{"code_tokens":["public","boolean","isMemoryLimitViolated","(","LocalAssignment","withUpdatedLimits",")","throws","IOException","{","updateMemoryAccounting","(",")",";","return","false",";"],"docstring_tokens":["Check","if","the","container","is","over","its","memory","limit","AND","needs","to","be","killed"],"prompt_tokens":[]}
{"code_tokens":["public","void","assign","(","WorkerSlot","slot,","String","topologyId,","Collection<ExecutorDetails>","executors",")","{","assertValidTopologyForModification","(","topologyId",")",";","if","(","isSlotOccupied","(","slot",")",")","{","throw","new","RuntimeException","(","\"slot:","[\"","+","slot",".","getNodeId","(",")","+","\",","\"","+","slot",".","getPort","(",")","+","\"]","is","already","occupied",".","\"",")",";","}","\n\n","Collection<ExecutorDetails>","executorDetails","=\n","topoIdToNodeIdToSlotIdToExecutors\n",".","computeIfAbsent","(","topologyId,","Cluster::makeMap",")",".","computeIfAbsent","(","slot",".","getNodeId","(",")",",","Cluster::makeMap",")",".","computeIfAbsent","(","slot",".","getId","(",")",",","Cluster::makeSet",")",";","executorDetails",".","clear","(",")",";","executorDetails",".","addAll","(","executors",")",";","\n\n","TopologyDetails","td","=","topologies",".","getById","(","topologyId",")",";","if","(","td","==","null",")","{","throw","new","IllegalArgumentException","(","\"Trying","to","schedule","for","topo","\"\n","+","topologyId\n","+","\"","but","that","is","not","a","known","topology","\"\n","+","topologies",".","getAllIds","(",")",")",";","}","WorkerResources","resources","=","calculateWorkerResources","(","td,","executors",")",";","SchedulerAssignmentImpl","assignment","=","assignments",".","get","(","topologyId",")",";","if","(","assignment","==","null",")","{","assignment","=","new","SchedulerAssignmentImpl","(","topologyId",")",";","assignments",".","put","(","topologyId,","assignment",")",";","}","else","{","for","(","ExecutorDetails","executor",":","executors",")","{","if","(","assignment",".","isExecutorAssigned","(","executor",")",")","{","throw","new","RuntimeException","(","\"Attempting","to","assign","executor:","\"\n","+","executor\n","+","\"","of","topology:","\"\n","+","topologyId\n","+","\"","to","workerslot:","\"\n","+","slot\n","+","\"",".","The","executor","is","already","assigned","to","workerslot:","\"\n","+","assignment",".","getExecutorToSlot","(",")",".","get","(","executor",")","+","\"",".","The","executor","must","unassigned","before","it","can","be","assigned","to","another","slot!\"",")",";","}","}","}","\n\n","assignment",".","assign","(","slot,","executors,","resources",")",";","String","nodeId","=","slot",".","getNodeId","(",")",";","double","sharedOffHeapNodeMemory","=","calculateSharedOffHeapNodeMemory","(","nodeId,","td",")",";","assignment",".","setTotalSharedOffHeapNodeMemory","(","nodeId,","sharedOffHeapNodeMemory",")",";","updateCachesForWorkerSlot","(","slot,","resources,","topologyId,","sharedOffHeapNodeMemory",")",";","totalResourcesPerNodeCache",".","remove","(","slot",".","getNodeId","(",")",")",";"],"docstring_tokens":["Assign","the","slot","to","the","executors","for","this","topology"],"prompt_tokens":[]}
{"code_tokens":["public","void","assign","(","SchedulerAssignment","assignment,","boolean","ignoreSingleExceptions",")","{","String","id","=","assignment",".","getTopologyId","(",")",";","assertValidTopologyForModification","(","id",")",";","Map<WorkerSlot,","Collection<ExecutorDetails>>","slotToExecs","=","assignment",".","getSlotToExecutors","(",")",";","for","(","Entry<WorkerSlot,","Collection<ExecutorDetails>>","entry",":","slotToExecs",".","entrySet","(",")",")","{","try","{","assign","(","entry",".","getKey","(",")",",","id,","entry",".","getValue","(",")",")",";","}","catch","(","RuntimeException","e",")","{","if","(","!ignoreSingleExceptions",")","{","throw","e",";","}","}","}"],"docstring_tokens":["Assign","everything","for","the","given","topology"],"prompt_tokens":[]}
{"code_tokens":["private","void","initializeTopoSharedOffHeapNodeMemoryFlag","(","TopologyDetails","td",")","{","String","topoId","=","td",".","getId","(",")",";","topoSharedOffHeapMemoryNodeFlag",".","put","(","topoId,","false",")",";","StormTopology","topology","=","td",".","getTopology","(",")",";","if","(","topology","==","null",")","{","return",";","//","accommodate","multitenant_scheduler_test",".","clj\n","}","if","(","topology",".","is_set_shared_memory","(",")",")","{","for","(","SharedMemory","sharedMemory",":","topology",".","get_shared_memory","(",")",".","values","(",")",")","{","double","val","=","sharedMemory",".","get_off_heap_node","(",")",";","if","(","val",">","0",".","0",")","{","topoSharedOffHeapMemoryNodeFlag",".","put","(","topoId,","true",")",";","return",";","}","}","}"],"docstring_tokens":["Initialize","the","flag","to","true","if","specified","topology","uses","SharedOffHeapNodeMemory,","false","otherwise"],"prompt_tokens":[]}
{"code_tokens":["public","void","setAssignments","(","Map<String,","?","extends","SchedulerAssignment>","newAssignments,","boolean","ignoreSingleExceptions",")","{","if","(","newAssignments","==","assignments",")","{","//NOOP\n","return",";","}","for","(","SchedulerAssignment","assignment",":","newAssignments",".","values","(",")",")","{","assertValidTopologyForModification","(","assignment",".","getTopologyId","(",")",")",";","}","for","(","SchedulerAssignment","assignment",":","assignments",".","values","(",")",")","{","assertValidTopologyForModification","(","assignment",".","getTopologyId","(",")",")",";","}","assignments",".","clear","(",")",";","totalResourcesPerNodeCache",".","clear","(",")",";","nodeToScheduledResourcesCache",".","values","(",")",".","forEach","(","Map::clear",")",";","nodeToUsedSlotsCache",".","values","(",")",".","forEach","(","Set::clear",")",";","for","(","SchedulerAssignment","assignment",":","newAssignments",".","values","(",")",")","{","assign","(","assignment,","ignoreSingleExceptions",")",";","}"],"docstring_tokens":["Set","assignments","for","cluster"],"prompt_tokens":[]}
{"code_tokens":["public","void","setStatus","(","String","topologyId,","String","statusMessage",")","{","assertValidTopologyForModification","(","topologyId",")",";","LOG",".","info","(","\"STATUS","-","{","}","{","}","\",","topologyId,","statusMessage",")",";","status",".","put","(","topologyId,","statusMessage",")",";"],"docstring_tokens":["set","scheduler","status","for","a","topology"],"prompt_tokens":[]}
{"code_tokens":["public","void","setStatusMap","(","Map<String,","String>","statusMap",")","{","if","(","statusMap","==","this",".","status",")","{","return",";","//This","is","a","NOOP\n","}","for","(","String","topologyId",":","statusMap",".","keySet","(",")",")","{","assertValidTopologyForModification","(","topologyId",")",";","}","for","(","String","topologyId",":","status",".","keySet","(",")",")","{","assertValidTopologyForModification","(","topologyId",")",";","}","this",".","status",".","clear","(",")",";","this",".","status",".","putAll","(","statusMap",")",";"],"docstring_tokens":["set","scheduler","status","map"],"prompt_tokens":[]}
{"code_tokens":["public","void","unassign","(","String","topoId",")","{","assertValidTopologyForModification","(","topoId",")",";","freeSlots","(","getUsedSlotsByTopologyId","(","topoId",")",")",";"],"docstring_tokens":["Unassign","everything","for","the","given","topology","id"],"prompt_tokens":[]}
{"code_tokens":["public","void","updateFrom","(","Cluster","other",")","{","for","(","SchedulerAssignment","assignment",":","other",".","getAssignments","(",")",".","values","(",")",")","{","assertValidTopologyForModification","(","assignment",".","getTopologyId","(",")",")",";","}","setAssignments","(","other",".","getAssignments","(",")",",","false",")",";","setStatusMap","(","other",".","getStatusMap","(",")",")",";"],"docstring_tokens":["Update","the","assignments","and","status","from","the","other","cluster"],"prompt_tokens":[]}
{"code_tokens":["@Override\n","protected","boolean","isExecAssignmentToWorkerValid","(","ExecutorDetails","exec,","WorkerSlot","worker",")","{","if","(","!super",".","isExecAssignmentToWorkerValid","(","exec,","worker",")",")","{","return","false",";","}","//","check","if","executor","can","be","on","worker","based","on","component","exclusions\n","String","execComp","=","execToComp",".","get","(","exec",")",";","Map<String,","Integer>","compAssignmentCnts","=","searcherState",".","getCompAssignmentCntMapForWorker","(","worker",")",";","Set<String>","incompatibleComponents",";","if","(","compAssignmentCnts","!=","null\n","&&","(","incompatibleComponents","=","constraintSolverConfig",".","getIncompatibleComponentSets","(",")",".","get","(","execComp",")",")","!=","null\n","&&","!incompatibleComponents",".","isEmpty","(",")",")","{","for","(","String","otherComp",":","compAssignmentCnts",".","keySet","(",")",")","{","if","(","incompatibleComponents",".","contains","(","otherComp",")",")","{","LOG",".","debug","(","\"Topology","{","}",",","exec=","{","}","with","comp=","{","}","has","constraint","violation","with","comp=","{","}","on","worker=","{","}","\",\n","topoName,","exec,","execComp,","otherComp,","worker",")",";","return","false",";","}","}","}","\n\n","//","check","if","executor","can","be","on","worker","based","on","component","node","co-location","constraint\n","Map<String,","Integer>","maxNodeCoLocationCnts","=","constraintSolverConfig",".","getMaxNodeCoLocationCnts","(",")",";","if","(","maxNodeCoLocationCnts",".","containsKey","(","execComp",")",")","{","int","coLocationMaxCnt","=","maxNodeCoLocationCnts",".","get","(","execComp",")",";","RasNode","node","=","nodes",".","getNodeById","(","worker",".","getNodeId","(",")",")",";","int","compCntOnNode","=","searcherState",".","getComponentCntOnNode","(","node,","execComp",")",";","if","(","compCntOnNode",">=","coLocationMaxCnt",")","{","LOG",".","debug","(","\"Topology","{","}",",","exec=","{","}","with","comp=","{","}","has","MaxCoLocationCnt","violation","on","node","{","}",",","count","{","}",">=","colocation","count","{","}","\",\n","topoName,","exec,","execComp,","node",".","getId","(",")",",","compCntOnNode,","coLocationMaxCnt",")",";","return","false",";","}","}","return","true",";"],"docstring_tokens":["Check","if","any","constraints","are","violated","if","exec","is","scheduled","on","worker"],"prompt_tokens":[]}
{"code_tokens":["private","boolean","isSchedulingFeasible","(",")","{","int","nodeCnt","=","nodes",".","getNodes","(",")",".","size","(",")",";","for","(","Map",".","Entry<String,","Integer>","entry",":","constraintSolverConfig",".","getMaxNodeCoLocationCnts","(",")",".","entrySet","(",")",")","{","String","comp","=","entry",".","getKey","(",")",";","int","maxCoLocationCnt","=","entry",".","getValue","(",")",";","int","numExecs","=","compToExecs",".","get","(","comp",")",".","size","(",")",";","if","(","numExecs",">","nodeCnt","*","maxCoLocationCnt",")","{","LOG",".","error","(","\"Unsatisfiable","constraint:","Component:","{","}","marked","as","spread","has","{","}","executors","which","is","larger","than","\"\n","+","\"number","of","nodes","*","maxCoLocationCnt:","{","}","*","{","}","\",","comp,","numExecs,","nodeCnt,","maxCoLocationCnt",")",";","return","false",";","}","}","return","true",";"],"docstring_tokens":["A","quick","check","to","see","if","scheduling","is","feasible"],"prompt_tokens":[]}
{"code_tokens":["public","static","Config","buildConfig","(","TopologyDef","topologyDef",")","{","//","merge","contents","of","`config`","into","topology","config\n","Config","conf","=","new","Config","(",")",";","conf",".","putAll","(","topologyDef",".","getConfig","(",")",")",";","return","conf",";"],"docstring_tokens":["Given","a","topology","definition,","return","a","populated","`org.apache.storm.Config`","instance"],"prompt_tokens":[]}
{"code_tokens":["public","static","StormTopology","buildTopology","(","ExecutionContext","context",")","throws","IllegalAccessException,\n","InstantiationException,","ClassNotFoundException,","NoSuchMethodException,","InvocationTargetException,","NoSuchFieldException","{","\n\n","StormTopology","topology","=","null",";","TopologyDef","topologyDef","=","context",".","getTopologyDef","(",")",";","\n\n","if","(","!topologyDef",".","validate","(",")",")","{","throw","new","IllegalArgumentException","(","\"Invalid","topology","config",".","Spouts,","bolts","and","streams","cannot","be","\"\n","+","\"defined","in","the","same","configuration","as","a","topologySource",".","\"",")",";","}","\n\n","//","build","components","that","may","be","referenced","by","spouts,","bolts,","etc",".","//","the","map","will","be","a","String","-->","Object","where","the","object","is","a","fully\n","//","constructed","class","instance\n","buildComponents","(","context",")",";","\n\n","if","(","topologyDef",".","isDslTopology","(",")",")","{","//","This","is","a","DSL","(","YAML,","etc",".",")","topology",".",".",".","LOG",".","info","(","\"Detected","DSL","topology",".",".",".","\"",")",";","\n\n","TopologyBuilder","builder","=","new","TopologyBuilder","(",")",";","\n\n","//","create","spouts\n","buildSpouts","(","context,","builder",")",";","\n\n","//","we","need","to","be","able","to","lookup","bolts","by","id,","then","switch","based\n","//","on","whether","they","are","IBasicBolt","or","IRichBolt","instances\n","buildBolts","(","context",")",";","\n\n","//","process","stream","definitions\n","buildStreamDefinitions","(","context,","builder",")",";","\n\n","topology","=","builder",".","createTopology","(",")",";","}","else","{","//","user","class","supplied",".",".",".","//","this","also","provides","a","bridge","to","Trident",".",".",".","LOG",".","info","(","\"A","topology","source","has","been","specified",".",".",".","\"",")",";","ObjectDef","def","=","topologyDef",".","getTopologySource","(",")",";","topology","=","buildExternalTopology","(","def,","context",")",";","}","return","topology",";"],"docstring_tokens":["Given","a","topology","definition,","return","a","Storm","topology","that","can","be","run","either","locally","or","remotely"],"prompt_tokens":[]}
{"code_tokens":["private","void","heartbeatToMasterIfLocalbeatFail","(","LSWorkerHeartbeat","lsWorkerHeartbeat",")","{","if","(","ConfigUtils",".","isLocalMode","(","this",".","conf",")",")","{","return",";","}","\n\n","//In","distributed","mode,","send","heartbeat","directly","to","master","if","local","supervisor","goes","down",".","SupervisorWorkerHeartbeat","workerHeartbeat","=","new","SupervisorWorkerHeartbeat","(","lsWorkerHeartbeat",".","get_topology_id","(",")",",\n","lsWorkerHeartbeat",".","get_executors","(",")",",\n","lsWorkerHeartbeat",".","get_time_secs","(",")",")",";","try","(","SupervisorIfaceFactory","fac","=","supervisorIfaceSupplier",".","get","(",")",")","{","fac",".","getIface","(",")",".","sendSupervisorWorkerHeartbeat","(","workerHeartbeat",")",";","}","catch","(","Exception","tr1",")","{","//If","any","error/exception","thrown,","report","directly","to","nimbus",".","LOG",".","warn","(","\"Exception","when","send","heartbeat","to","local","supervisor\",","tr1",".","getMessage","(",")",")",";","try","(","NimbusClient","nimbusClient","=","NimbusClient",".","getConfiguredClient","(","topologyConf",")",")","{","nimbusClient",".","getClient","(",")",".","sendSupervisorWorkerHeartbeat","(","workerHeartbeat",")",";","}","catch","(","Exception","tr2",")","{","//if","any","error/exception","thrown,","just","ignore",".","LOG",".","error","(","\"Exception","when","send","heartbeat","to","master\",","tr2",".","getMessage","(",")",")",";","}","}"],"docstring_tokens":["Send","a","heartbeat","to","local","supervisor","first","to","check","if","supervisor","is","ok","for","heartbeating"],"prompt_tokens":[]}
{"code_tokens":["@Override\n","public","void","close","(",")","{","if","(","!closing",")","{","LOG",".","info","(","\"closing","Netty","Client","{","}","\",","dstAddressPrefixedName",")",";","//","Set","closing","to","true","to","prevent","any","further","reconnection","attempts",".","closing","=","true",";","waitForPendingMessagesToBeSent","(",")",";","closeChannel","(",")",";","\n\n","//","stop","tracking","metrics","for","this","client\n","if","(","this",".","metricRegistry","!=","null",")","{","this",".","metricRegistry",".","deregister","(","this",".","metrics",")",";","}","}"],"docstring_tokens":["Gracefully","close","this","client"],"prompt_tokens":[]}
{"code_tokens":["public","static","void","main","(","String[]","args",")","throws","Exception","{","Map<String,","Object>","cl","=","CLI",".","opt","(","\"f\",","\"file\",","null",")",".","opt","(","\"u\",","\"user\",","null",")",".","boolOpt","(","\"e\",","\"exception-when-empty\"",")",".","arg","(","\"topologyName\",","CLI",".","FIRST_WINS",")",".","optionalArg","(","\"rawCredentials\",","CLI",".","INTO_LIST",")",".","parse","(","args",")",";","\n\n","String","credentialFile","=","(","String",")","cl",".","get","(","\"f\"",")",";","List<String>","rawCredentials","=","(","List<String>",")","cl",".","get","(","\"rawCredentials\"",")",";","String","topologyName","=","(","String",")","cl",".","get","(","\"topologyName\"",")",";","Utils",".","validateTopologyName","(","topologyName",")",";","\n\n","if","(","null","!=","rawCredentials","&&","(","(","rawCredentials",".","size","(",")","%","2",")","!=","0",")",")","{","throw","new","RuntimeException","(","\"Need","an","even","number","of","arguments","to","make","a","map\"",")",";","}","Map<String,","String>","credentialsMap","=","new","HashMap<>","(",")",";","if","(","null","!=","credentialFile",")","{","Properties","credentialProps","=","new","Properties","(",")",";","credentialProps",".","load","(","new","FileReader","(","credentialFile",")",")",";","for","(","Map",".","Entry<Object,","Object>","credentialProp",":","credentialProps",".","entrySet","(",")",")","{","credentialsMap",".","put","(","(","String",")","credentialProp",".","getKey","(",")",",\n","(","String",")","credentialProp",".","getValue","(",")",")",";","}","}","if","(","null","!=","rawCredentials",")","{","for","(","int","i","=","0",";","i","<","rawCredentials",".","size","(",")",";","i","+=","2",")","{","credentialsMap",".","put","(","rawCredentials",".","get","(","i",")",",","rawCredentials",".","get","(","i","+","1",")",")",";","}","}","\n\n","Map<String,","Object>","topologyConf","=","new","HashMap<>","(",")",";","//Try","to","get","the","topology","conf","from","nimbus,","so","we","can","reuse","it",".","try","(","NimbusClient","nc","=","NimbusClient",".","getConfiguredClient","(","new","HashMap<>","(",")",")",")","{","Nimbus",".","Iface","client","=","nc",".","getClient","(",")",";","TopologySummary","topo","=","client",".","getTopologySummaryByName","(","topologyName",")",";","//We","found","the","topology,","lets","get","the","conf\n","String","topologyId","=","topo",".","get_id","(",")",";","topologyConf","=","(","Map<String,","Object>",")","JSONValue",".","parse","(","client",".","getTopologyConf","(","topologyId",")",")",";","LOG",".","info","(","\"Using","topology","conf","from","{","}","as","basis","for","getting","new","creds\",","topologyId",")",";","\n\n","Map<String,","Object>","commandLine","=","Utils",".","readCommandLineOpts","(",")",";","List<String>","clCreds","=","(","List<String>",")","commandLine",".","get","(","Config",".","TOPOLOGY_AUTO_CREDENTIALS",")",";","List<String>","topoCreds","=","(","List<String>",")","topologyConf",".","get","(","Config",".","TOPOLOGY_AUTO_CREDENTIALS",")",";","\n\n","if","(","clCreds","!=","null",")","{","Set<String>","extra","=","new","HashSet<>","(","clCreds",")",";","if","(","topoCreds","!=","null",")","{","extra",".","removeAll","(","topoCreds",")",";","}","if","(","!extra",".","isEmpty","(",")",")","{","LOG",".","warn","(","\"The","topology","{","}","is","not","using","{","}","but","they","were","included","here",".","\",","topologyId,","extra",")",";","}","\n\n","//Now","check","for","autoCreds","that","are","missing","from","the","command","line,","but","only","if","the\n","//","command","line","is","used",".","if","(","topoCreds","!=","null",")","{","Set<String>","missing","=","new","HashSet<>","(","topoCreds",")",";","missing",".","removeAll","(","clCreds",")",";","if","(","!missing",".","isEmpty","(",")",")","{","LOG",".","warn","(","\"The","topology","{","}","is","using","{","}","but","they","were","not","included","here",".","\",","topologyId,","missing",")",";","}","}","}","}","\n\n","//","use","the","local","setting","for","the","login","config","rather","than","the","topology's\n","topologyConf",".","remove","(","\"java",".","security",".","auth",".","login",".","config\"",")",";","\n\n","boolean","throwExceptionForEmptyCreds","=","(","boolean",")","cl",".","get","(","\"e\"",")",";","boolean","hasCreds","=","StormSubmitter",".","pushCredentials","(","topologyName,","topologyConf,","credentialsMap,","(","String",")","cl",".","get","(","\"u\"",")",")",";","if","(","!hasCreds","&&","throwExceptionForEmptyCreds",")","{","String","message","=","\"No","credentials","were","uploaded","for","\"","+","topologyName",";","LOG",".","error","(","message",")",";","throw","new","RuntimeException","(","message",")",";","}","LOG",".","info","(","\"Uploaded","new","creds","to","topology:","{","}","\",","topologyName",")",";"],"docstring_tokens":["Uploads","credentials","for","a","topology"],"prompt_tokens":[]}
{"code_tokens":["public","static","void","main","(","String[]","args",")","throws","Exception","{","TopologyBuilder","builder","=","new","TopologyBuilder","(",")",";","\n\n","//","generate","random","numbers\n","builder",".","setSpout","(","\"spout\",","new","RandomIntegerSpout","(",")",")",";","\n\n","//","emits","sliding","window","and","global","averages\n","builder",".","setBolt","(","\"avgbolt\",","new","AvgBolt","(",")",".","withWindow","(","new","Duration","(","10,","TimeUnit",".","SECONDS",")",",","new","Duration","(","2,","TimeUnit",".","SECONDS",")",")","//","persist","the","window","in","state\n",".","withPersistence","(",")","//","max","number","of","events","to","be","cached","in","memory\n",".","withMaxEventsInMemory","(","25000",")",",","1",")",".","shuffleGrouping","(","\"spout\"",")",";","\n\n","//","print","the","values","to","stdout\n","builder",".","setBolt","(","\"printer\",","(","x,","y",")","->","System",".","out",".","println","(","x",".","getValue","(","0",")",")",",","1",")",".","shuffleGrouping","(","\"avgbolt\"",")",";","\n\n","Config","conf","=","new","Config","(",")",";","conf",".","setDebug","(","false",")",";","\n\n","//","checkpoint","the","state","every","5","seconds\n","conf",".","put","(","Config",".","TOPOLOGY_STATE_CHECKPOINT_INTERVAL,","5000",")",";","\n\n","//","use","redis","for","state","persistence\n","conf",".","put","(","Config",".","TOPOLOGY_STATE_PROVIDER,","\"org",".","apache",".","storm",".","redis",".","state",".","RedisKeyValueStateProvider\"",")",";","\n\n","String","topoName","=","\"test\"",";","if","(","args","!=","null","&&","args",".","length",">","0",")","{","topoName","=","args[0]",";","}","conf",".","setNumWorkers","(","1",")",";","StormSubmitter",".","submitTopologyWithProgressBar","(","topoName,","conf,","builder",".","createTopology","(",")",")",";"],"docstring_tokens":["Create","and","deploy","the","topology"],"prompt_tokens":[]}
{"code_tokens":["protected","DownloadMeta","fetch","(","ClientBlobStore","store,","String","key,\n","IOFunction<Long,","Path>","pathSupplier,\n","IOFunction<File,","OutputStream>","outStreamSupplier",")","throws","KeyNotFoundException,","AuthorizationException,","IOException","{","\n\n","try","(","InputStreamWithMeta","in","=","store",".","getBlob","(","key",")",")","{","long","newVersion","=","in",".","getVersion","(",")",";","long","currentVersion","=","getLocalVersion","(",")",";","if","(","newVersion","==","currentVersion",")","{","LOG",".","warn","(","\"The","version","did","not","change,","but","going","to","download","again","{","}","{","}","\",","currentVersion,","key",")",";","}","\n\n","//Make","sure","the","parent","directory","is","there","and","ready","to","go\n","Path","downloadPath","=","pathSupplier",".","apply","(","newVersion",")",";","LOG",".","debug","(","\"Downloading","{","}","to","{","}","\",","key,","downloadPath",")",";","\n\n","long","duration",";","long","totalRead","=","0",";","try","(","OutputStream","out","=","outStreamSupplier",".","apply","(","downloadPath",".","toFile","(",")",")",")","{","long","startTime","=","Time",".","nanoTime","(",")",";","\n\n","byte[]","buffer","=","new","byte[4096]",";","int","read",";","while","(","(","read","=","in",".","read","(","buffer",")",")",">=","0",")","{","out",".","write","(","buffer,","0,","read",")",";","totalRead","+=","read",";","}","\n\n","duration","=","Time",".","nanoTime","(",")","-","startTime",";","}","\n\n","long","expectedSize","=","in",".","getFileLength","(",")",";","if","(","totalRead","!=","expectedSize",")","{","throw","new","IOException","(","\"We","expected","to","download","\"","+","expectedSize","+","\"","bytes","but","found","we","got","\"","+","totalRead",")",";","}","else","{","double","downloadRate","=","(","(","double",")","totalRead","*","1e3",")","/","duration",";","fetchingRate",".","update","(","Math",".","round","(","downloadRate",")",")",";","}","return","new","DownloadMeta","(","downloadPath,","newVersion",")",";","}"],"docstring_tokens":["Helper","function","to","download","blob","from","blob","store"],"prompt_tokens":[]}
{"code_tokens":["protected","void","touch","(",")","{","lastUsed",".","set","(","Time",".","currentTimeMillis","(",")",")",";","LOG",".","debug","(","\"Setting","{","}","ts","to","{","}","\",","blobKey,","lastUsed",".","get","(",")",")",";"],"docstring_tokens":["Updates","the","last","updated","time"],"prompt_tokens":[]}
{"code_tokens":["public","boolean","removeReference","(","final","PortAndAssignment","pna",")","{","LOG",".","info","(","\"Removing","reference","{","}","from","{","}","\",","pna,","blobDescription",")",";","PortAndAssignment","reservedReference","=","null",";","for","(","Map",".","Entry<PortAndAssignment,","BlobChangingCallback>","entry",":","references",".","entrySet","(",")",")","{","if","(","entry",".","getKey","(",")",".","isEquivalentTo","(","pna",")",")","{","reservedReference","=","entry",".","getKey","(",")",";","break",";","}","}","\n\n","if","(","reservedReference","!=","null",")","{","references",".","remove","(","reservedReference",")",";","touch","(",")",";","return","true",";","}","else","{","LOG",".","warn","(","\"","{","}","had","no","reservation","for","{","}",",","current","references","are","{","}","with","last","update","at","{","}","\",\n","pna,","blobDescription,","getDependencies","(",")",",","getLastUsed","(",")",")",";","return","false",";","}"],"docstring_tokens":["Removes","a","reservation","for","this","blob","from","a","given","slot","and","assignemnt"],"prompt_tokens":[]}
{"code_tokens":["private","CompletableFuture<Void>","informAllOfChangeAndWaitForConsensus","(",")","{","HashMap<PortAndAssignment,","BlobChangingCallback>","refsCopy","=","new","HashMap<>","(","references",")",";","CountDownLatch","cdl","=","new","CountDownLatch","(","refsCopy",".","size","(",")",")",";","CompletableFuture<Void>","doneUpdating","=","new","CompletableFuture<>","(",")",";","for","(","Map",".","Entry<PortAndAssignment,","BlobChangingCallback>","entry",":","refsCopy",".","entrySet","(",")",")","{","GoodToGo","gtg","=","new","GoodToGo","(","cdl,","doneUpdating",")",";","try","{","PortAndAssignment","pna","=","entry",".","getKey","(",")",";","BlobChangingCallback","cb","=","entry",".","getValue","(",")",";","cb",".","blobChanging","(","pna",".","getAssignment","(",")",",","pna",".","getPort","(",")",",","this,","gtg",")",";","}","finally","{","gtg",".","countDownIfLatchWasNotGotten","(",")",";","}","}","try","{","cdl",".","await","(","3,","TimeUnit",".","MINUTES",")",";","}","catch","(","InterruptedException","e",")","{","//Interrupted","is","thrown","when","we","are","shutting","down",".","//","So","just","ignore","it","for","now",".",".",".","}","return","doneUpdating",";"],"docstring_tokens":["Inform","all","of","the","callbacks","that","a","change","is","going","to","happen","and","then","wait","for","them","to","all","get","back","that","it","is","OK","to","make","that","change"],"prompt_tokens":[]}
{"code_tokens":["boolean","requiresUpdate","(","ClientBlobStore","blobStore,","long","remoteBlobstoreUpdateTime",")","throws","KeyNotFoundException,","AuthorizationException","{","if","(","!this",".","isUsed","(",")",")","{","return","false",";","}","\n\n","if","(","!this",".","isFullyDownloaded","(",")",")","{","return","true",";","}","\n\n","//","If","we","are","already","up","to","date","with","respect","to","the","remote","blob","store,","don't","query\n","//","the","remote","blobstore","for","the","remote","file",".","This","reduces","Hadoop","namenode","impact","of\n","//","100's","of","supervisors","querying","multiple","blobs",".","if","(","remoteBlobstoreUpdateTime",">","0","&&","this",".","localUpdateTime","==","remoteBlobstoreUpdateTime",")","{","LOG",".","debug","(","\"","{","}","is","up","to","date,","blob","localUpdateTime","matches","remote","timestamp","{","}","\",","this,","remoteBlobstoreUpdateTime",")",";","return","false",";","}","\n\n","long","localVersion","=","this",".","getLocalVersion","(",")",";","long","remoteVersion","=","this",".","getRemoteVersion","(","blobStore",")",";","if","(","localVersion","!=","remoteVersion",")","{","return","true",";","}","else","{","//","track","that","we","are","now","up","to","date","with","respect","to","last","time","the","remote","blobstore","was","updated\n","this",".","localUpdateTime","=","remoteBlobstoreUpdateTime",";","return","false",";","}"],"docstring_tokens":["Checks","to","see","if","the","local","blob","requires","update","with","respect","to","a","remote","blob"],"prompt_tokens":[]}
{"code_tokens":["private","void","download","(","ClientBlobStore","blobStore,","long","remoteBlobstoreUpdateTime",")","throws","AuthorizationException,","IOException,","KeyNotFoundException","{","if","(","this",".","isFullyDownloaded","(",")",")","{","numBlobUpdateVersionChanged",".","mark","(",")",";","}","Timer",".","Context","timer","=","singleBlobLocalizationDuration",".","time","(",")",";","try","{","long","newVersion","=","this",".","fetchUnzipToTemp","(","blobStore",")",";","this",".","informReferencesAndCommitNewVersion","(","newVersion",")",";","this",".","localUpdateTime","=","remoteBlobstoreUpdateTime",";","LOG",".","debug","(","\"local","blob","{","}","downloaded,","in","sync","with","remote","blobstore","to","time","{","}","\",","this,","remoteBlobstoreUpdateTime",")",";","}","finally","{","timer",".","stop","(",")",";","this",".","cleanupOrphanedData","(",")",";","}"],"docstring_tokens":["Downloads","a","blob","locally"],"prompt_tokens":[]}
{"code_tokens":["public","void","update","(","ClientBlobStore","blobStore,","long","remoteBlobstoreUpdateTime",")","throws","KeyNotFoundException,","AuthorizationException,","IOException","{","synchronized","(","this",")","{","if","(","this",".","requiresUpdate","(","blobStore,","remoteBlobstoreUpdateTime",")",")","{","this",".","download","(","blobStore,","remoteBlobstoreUpdateTime",")",";","}","}"],"docstring_tokens":["Checks","and","downloads","a","blob","locally","as","necessary"],"prompt_tokens":[]}
{"code_tokens":["public","static","void","verifyAcls","(","Map<String,","Object>","conf,","final","boolean","fixUp",")","throws","Exception","{","if","(","!Utils",".","isZkAuthenticationConfiguredStormServer","(","conf",")",")","{","LOG",".","info","(","\"SECURITY","IS","DISABLED","NO","FURTHER","CHECKS",".",".",".","\"",")",";","//There","is","no","security","so","we","are","done",".","return",";","}","ACL","superUserAcl","=","Utils",".","getSuperUserAcl","(","conf",")",";","List<ACL>","superAcl","=","new","ArrayList<>","(","1",")",";","superAcl",".","add","(","superUserAcl",")",";","\n\n","List<ACL>","drpcFullAcl","=","new","ArrayList<>","(","2",")",";","drpcFullAcl",".","add","(","superUserAcl",")",";","\n\n","String","drpcAclString","=","(","String",")","conf",".","get","(","Config",".","STORM_ZOOKEEPER_DRPC_ACL",")",";","if","(","drpcAclString","!=","null",")","{","Id","drpcAclId","=","Utils",".","parseZkId","(","drpcAclString,","Config",".","STORM_ZOOKEEPER_DRPC_ACL",")",";","ACL","drpcUserAcl","=","new","ACL","(","ZooDefs",".","Perms",".","READ,","drpcAclId",")",";","drpcFullAcl",".","add","(","drpcUserAcl",")",";","}","\n\n","List<String>","zkServers","=","(","List<String>",")","conf",".","get","(","Config",".","STORM_ZOOKEEPER_SERVERS",")",";","int","port","=","ObjectReader",".","getInt","(","conf",".","get","(","Config",".","STORM_ZOOKEEPER_PORT",")",")",";","String","stormRoot","=","(","String",")","conf",".","get","(","Config",".","STORM_ZOOKEEPER_ROOT",")",";","\n\n","try","(","CuratorFramework","zk","=","ClientZookeeper",".","mkClient","(","conf,","zkServers,","port,","\"\",\n","new","DefaultWatcherCallBack","(",")",",","conf,","DaemonType",".","NIMBUS",")",")","{","if","(","zk",".","checkExists","(",")",".","forPath","(","stormRoot",")","!=","null",")","{","//First","off","we","want","to","verify","that","ROOT","is","good\n","verifyAclStrict","(","zk,","superAcl,","stormRoot,","fixUp",")",";","}","else","{","LOG",".","warn","(","\"","{","}","does","not","exist","no","need","to","check","any","more",".",".",".","\",","stormRoot",")",";","return",";","}","}","\n\n","//","Now","that","the","root","is","fine","we","can","start","to","look","at","the","other","paths","under","it",".","try","(","CuratorFramework","zk","=","ClientZookeeper",".","mkClient","(","conf,","zkServers,","port,","stormRoot,\n","new","DefaultWatcherCallBack","(",")",",","conf,","DaemonType",".","NIMBUS",")",")","{","//Next","verify","that","the","blob","store","is","correct","before","we","start","it","up",".","if","(","zk",".","checkExists","(",")",".","forPath","(","ClusterUtils",".","BLOBSTORE_SUBTREE",")","!=","null",")","{","verifyAclStrictRecursive","(","zk,","superAcl,","ClusterUtils",".","BLOBSTORE_SUBTREE,","fixUp",")",";","}","\n\n","if","(","zk",".","checkExists","(",")",".","forPath","(","ClusterUtils",".","BLOBSTORE_MAX_KEY_SEQUENCE_NUMBER_SUBTREE",")","!=","null",")","{","verifyAclStrict","(","zk,","superAcl,","ClusterUtils",".","BLOBSTORE_MAX_KEY_SEQUENCE_NUMBER_SUBTREE,","fixUp",")",";","}","\n\n","//The","blobstore","is","good,","now","lets","get","the","list","of","all","topo","Ids\n","Set<String>","topoIds","=","new","HashSet<>","(",")",";","if","(","zk",".","checkExists","(",")",".","forPath","(","ClusterUtils",".","STORMS_SUBTREE",")","!=","null",")","{","topoIds",".","addAll","(","zk",".","getChildren","(",")",".","forPath","(","ClusterUtils",".","STORMS_SUBTREE",")",")",";","}","\n\n","Map<String,","Id>","topoToZkCreds","=","new","HashMap<>","(",")",";","//Now","lets","get","the","creds","for","the","topos","so","we","can","verify","those","as","well",".","BlobStore","bs","=","ServerUtils",".","getNimbusBlobStore","(","conf,","NimbusInfo",".","fromConf","(","conf",")",",","null",")",";","try","{","Subject","nimbusSubject","=","new","Subject","(",")",";","nimbusSubject",".","getPrincipals","(",")",".","add","(","new","NimbusPrincipal","(",")",")",";","for","(","String","topoId",":","topoIds",")","{","try","{","String","blobKey","=","topoId","+","\"-stormconf",".","ser\"",";","Map<String,","Object>","topoConf","=","Utils",".","fromCompressedJsonConf","(","bs",".","readBlob","(","blobKey,","nimbusSubject",")",")",";","String","payload","=","(","String",")","topoConf",".","get","(","Config",".","STORM_ZOOKEEPER_TOPOLOGY_AUTH_PAYLOAD",")",";","try","{","topoToZkCreds",".","put","(","topoId,","new","Id","(","\"digest\",","DigestAuthenticationProvider",".","generateDigest","(","payload",")",")",")",";","}","catch","(","NoSuchAlgorithmException","e",")","{","throw","new","RuntimeException","(","e",")",";","}","}","catch","(","KeyNotFoundException","knf",")","{","LOG",".","debug","(","\"topo","removed","{","}","\",","topoId,","knf",")",";","}","}","}","finally","{","if","(","bs","!=","null",")","{","bs",".","shutdown","(",")",";","}","}","\n\n","verifyParentWithReadOnlyTopoChildren","(","zk,","superUserAcl,","ClusterUtils",".","STORMS_SUBTREE,","topoToZkCreds,","fixUp",")",";","verifyParentWithReadOnlyTopoChildren","(","zk,","superUserAcl,","ClusterUtils",".","ASSIGNMENTS_SUBTREE,","topoToZkCreds,","fixUp",")",";","//There","is","a","race","on","credentials","where","they","can","be","leaked","in","some","versions","of","storm",".","verifyParentWithReadOnlyTopoChildrenDeleteDead","(","zk,","superUserAcl,","ClusterUtils",".","CREDENTIALS_SUBTREE,","topoToZkCreds,","fixUp",")",";","//There","is","a","race","on","logconfig","where","they","can","be","leaked","in","some","versions","of","storm",".","verifyParentWithReadOnlyTopoChildrenDeleteDead","(","zk,","superUserAcl,","ClusterUtils",".","LOGCONFIG_SUBTREE,","topoToZkCreds,","fixUp",")",";","//There","is","a","race","on","backpressure","too",".",".",".","verifyParentWithReadWriteTopoChildrenDeleteDead","(","zk,","superUserAcl,","ClusterUtils",".","BACKPRESSURE_SUBTREE,","topoToZkCreds,","fixUp",")",";","\n\n","if","(","zk",".","checkExists","(",")",".","forPath","(","ClusterUtils",".","ERRORS_SUBTREE",")","!=","null",")","{","//errors","is","a","bit","special","because","in","older","versions","of","storm","the","worker","created","the","parent","directories","lazily\n","//","because","of","this","it","means","we","need","to","auto","create","at","least","the","topo-id","directory","for","all","running","topos",".","for","(","String","topoId",":","topoToZkCreds",".","keySet","(",")",")","{","String","path","=","ClusterUtils",".","errorStormRoot","(","topoId",")",";","if","(","zk",".","checkExists","(",")",".","forPath","(","path",")","==","null",")","{","LOG",".","warn","(","\"Creating","missing","errors","location","{","}","\",","path",")",";","zk",".","create","(",")",".","withACL","(","getTopoReadWrite","(","path,","topoId,","topoToZkCreds,","superUserAcl,","fixUp",")",")",".","forPath","(","path",")",";","}","}","}","//Error","should","not","be","leaked","according","to","the","code,","but","they","are","not","important","enough","to","fail","the","build","if\n","//","for","some","odd","reason","they","are","leaked",".","verifyParentWithReadWriteTopoChildrenDeleteDead","(","zk,","superUserAcl,","ClusterUtils",".","ERRORS_SUBTREE,","topoToZkCreds,","fixUp",")",";","\n\n","if","(","zk",".","checkExists","(",")",".","forPath","(","ClusterUtils",".","SECRET_KEYS_SUBTREE",")","!=","null",")","{","verifyAclStrict","(","zk,","superAcl,","ClusterUtils",".","SECRET_KEYS_SUBTREE,","fixUp",")",";","verifyAclStrictRecursive","(","zk,","superAcl,","ClusterUtils",".","secretKeysPath","(","WorkerTokenServiceType",".","NIMBUS",")",",","fixUp",")",";","verifyAclStrictRecursive","(","zk,","drpcFullAcl,","ClusterUtils",".","secretKeysPath","(","WorkerTokenServiceType",".","DRPC",")",",","fixUp",")",";","}","\n\n","if","(","zk",".","checkExists","(",")",".","forPath","(","ClusterUtils",".","NIMBUSES_SUBTREE",")","!=","null",")","{","verifyAclStrictRecursive","(","zk,","superAcl,","ClusterUtils",".","NIMBUSES_SUBTREE,","fixUp",")",";","}","\n\n","if","(","zk",".","checkExists","(",")",".","forPath","(","\"/leader-lock\"",")","!=","null",")","{","verifyAclStrictRecursive","(","zk,","superAcl,","\"/leader-lock\",","fixUp",")",";","}","\n\n","if","(","zk",".","checkExists","(",")",".","forPath","(","ClusterUtils",".","PROFILERCONFIG_SUBTREE",")","!=","null",")","{","verifyAclStrictRecursive","(","zk,","superAcl,","ClusterUtils",".","PROFILERCONFIG_SUBTREE,","fixUp",")",";","}","\n\n","if","(","zk",".","checkExists","(",")",".","forPath","(","ClusterUtils",".","SUPERVISORS_SUBTREE",")","!=","null",")","{","verifyAclStrictRecursive","(","zk,","superAcl,","ClusterUtils",".","SUPERVISORS_SUBTREE,","fixUp",")",";","}","\n\n","//","When","moving","to","pacemaker","workerbeats","can","be","leaked","too",".",".",".","verifyParentWithReadWriteTopoChildrenDeleteDead","(","zk,","superUserAcl,","ClusterUtils",".","WORKERBEATS_SUBTREE,","topoToZkCreds,","fixUp",")",";","}"],"docstring_tokens":["Verify","the","ZK","ACLs","are","correct","and","optionally","fix","them","if","needed"],"prompt_tokens":[]}
{"code_tokens":["public","void","putTaskIds","(","List<Integer>","taskIds",")","{","takeLock",".","lock","(",")",";","try","{","taskIdsQueue",".","add","(","taskIds",")",";","notEmpty",".","signal","(",")",";","}","finally","{","takeLock",".","unlock","(",")",";","}"],"docstring_tokens":["put","list","of","task","id","to","its","queue"],"prompt_tokens":[]}
{"code_tokens":["public","void","putBoltMsg","(","BoltMsg","boltMsg",")","throws","InterruptedException","{","boltMsgQueue",".","put","(","boltMsg",")",";","takeLock",".","lock","(",")",";","try","{","notEmpty",".","signal","(",")",";","}","finally","{","takeLock",".","unlock","(",")",";","}"],"docstring_tokens":["put","bolt","message","to","its","queue"],"prompt_tokens":[]}
{"code_tokens":["public","TopologyResources","add","(","TopologyResources","other",")","{","return","new","TopologyResources","(","requestedMemOnHeap","+","other",".","requestedMemOnHeap,\n","requestedMemOffHeap","+","other",".","requestedMemOffHeap,\n","requestedSharedMemOnHeap","+","other",".","requestedSharedMemOnHeap,\n","requestedSharedMemOffHeap","+","other",".","requestedSharedMemOffHeap,\n","requestedNonSharedMemOnHeap","+","other",".","requestedNonSharedMemOnHeap,\n","requestedNonSharedMemOffHeap","+","other",".","requestedNonSharedMemOffHeap,\n","requestedCpu","+","other",".","requestedCpu,\n","NormalizedResourceRequest",".","addResourceMap","(","requestedGenericResources,","other",".","requestedGenericResources",")",",\n","assignedMemOnHeap","+","other",".","assignedMemOnHeap,\n","assignedMemOffHeap","+","other",".","assignedMemOffHeap,\n","assignedSharedMemOnHeap","+","other",".","assignedSharedMemOnHeap,\n","assignedSharedMemOffHeap","+","other",".","assignedSharedMemOffHeap,\n","assignedNonSharedMemOnHeap","+","other",".","assignedNonSharedMemOnHeap,\n","assignedNonSharedMemOffHeap","+","other",".","assignedNonSharedMemOffHeap,\n","assignedCpu","+","other",".","assignedCpu,\n","NormalizedResourceRequest",".","addResourceMap","(","assignedGenericResources,","other",".","assignedGenericResources",")",")",";"],"docstring_tokens":["Add","the","values","in","other","to","this","and","return","a","combined","resources","object"],"prompt_tokens":[]}
{"code_tokens":["public","Response","downloadFile","(","String","host,","String","fileName,","String","user,","boolean","isDaemon",")","throws","IOException","{","Path","rootDir","=","isDaemon","?","daemonLogRoot",":","logRoot",";","Path","rawFile","=","rootDir",".","resolve","(","fileName",")",";","Path","file","=","rawFile",".","toAbsolutePath","(",")",".","normalize","(",")",";","if","(","!file",".","startsWith","(","rootDir",")","||","!rawFile",".","normalize","(",")",".","toString","(",")",".","equals","(","rawFile",".","toString","(",")",")",")","{","//Ensure","filename","doesn't","contain",".",".","/","parts","return","LogviewerResponseBuilder",".","buildResponsePageNotFound","(",")",";","}","if","(","isDaemon","&&","Paths",".","get","(","fileName",")",".","getNameCount","(",")","!=","1",")","{","//Prevent","daemon","log","reads","from","pathing","into","worker","logs\n","return","LogviewerResponseBuilder",".","buildResponsePageNotFound","(",")",";","}","if","(","file",".","toFile","(",")",".","exists","(",")",")","{","if","(","isDaemon","||","resourceAuthorizer",".","isUserAllowedToAccessFile","(","user,","fileName",")",")","{","fileDownloadSizeDistMb",".","update","(","Math",".","round","(","(","double",")","file",".","toFile","(",")",".","length","(",")","/","FileUtils",".","ONE_MB",")",")",";","String","downloadedFileName",";","Path","pathRelativeToRootDir","=","rootDir",".","relativize","(","file",")",";","if","(","isDaemon","||","pathRelativeToRootDir",".","getNameCount","(",")","!=","3",")","{","downloadedFileName","=","host","+","\"-\"","+","rawFile",".","getFileName","(",")",";","}","else","{","//host-topoId-port-fileName\n","downloadedFileName","=","host","+","\"-\"\n","+","pathRelativeToRootDir",".","getName","(","0",")","+","\"-\"\n","+","pathRelativeToRootDir",".","getName","(","1",")","+","\"-\"\n","+","pathRelativeToRootDir",".","getName","(","2",")",";","}","return","LogviewerResponseBuilder",".","buildDownloadFile","(","downloadedFileName,","file",".","toFile","(",")",",","numFileDownloadExceptions",")",";","}","else","{","return","LogviewerResponseBuilder",".","buildResponseUnauthorizedUser","(","user",")",";","}","}","else","{","return","LogviewerResponseBuilder",".","buildResponsePageNotFound","(",")",";","}"],"docstring_tokens":["Checks","authorization","for","the","log","file","and","download"],"prompt_tokens":[]}
{"code_tokens":["public","WorkerToken","createOrUpdateTokenFor","(","WorkerTokenServiceType","serviceType,","String","user,","String","topologyId",")","{","long","nextVersion","=","state",".","getNextPrivateWorkerKeyVersion","(","serviceType,","topologyId",")",";","SecretKey","topoSecret","=","getCurrentSecret","(",")",";","long","expirationTimeMillis","=","Time",".","currentTimeMillis","(",")","+","tokenLifetimeMillis",";","WorkerTokenInfo","info","=","new","WorkerTokenInfo","(","user,","topologyId,","nextVersion,","expirationTimeMillis",")",";","byte[]","serializedInfo","=","ClientAuthUtils",".","serializeWorkerTokenInfo","(","info",")",";","byte[]","signature","=","WorkerTokenSigner",".","createPassword","(","serializedInfo,","topoSecret",")",";","WorkerToken","ret","=","new","WorkerToken","(","serviceType,","ByteBuffer",".","wrap","(","serializedInfo",")",",","ByteBuffer",".","wrap","(","signature",")",")",";","PrivateWorkerKey","key","=","new","PrivateWorkerKey","(","ByteBuffer",".","wrap","(","topoSecret",".","getEncoded","(",")",")",",","user,","expirationTimeMillis",")",";","state",".","addPrivateWorkerKey","(","serviceType,","topologyId,","nextVersion,","key",")",";","LOG",".","info","(","\"Created","new","WorkerToken","for","user","{","}","topology","{","}","on","service","{","}","\",","user,","topologyId,","serviceType",")",";","return","ret",";"],"docstring_tokens":["Create","or","update","an","existing","key"],"prompt_tokens":[]}
{"code_tokens":["private","int","retireIdleWriters","(",")","{","LOG",".","info","(","\"Attempting","close","idle","writers\"",")",";","int","count","=","0",";","long","now","=","System",".","currentTimeMillis","(",")",";","\n\n","//1",")","Find","retirement","candidates\n","for","(","Entry<HiveEndPoint,","HiveWriter>","entry",":","allWriters",".","entrySet","(",")",")","{","if","(","now","-","entry",".","getValue","(",")",".","getLastUsed","(",")",">","options",".","getIdleTimeout","(",")",")","{","++count",";","retire","(","entry",".","getKey","(",")",")",";","}","}","return","count",";"],"docstring_tokens":["Locate","all","writers","past","idle","timeout","and","retire","them"],"prompt_tokens":[]}
{"code_tokens":["public","double[]","empty","(",")","{","return","new","double[counter",".","get","(",")","]",";"],"docstring_tokens":["Create","an","array","that","has","all","values","0"],"prompt_tokens":[]}
{"code_tokens":["public","Map<String,","Double>","translateFromResourceArray","(","double[]","resources",")","{","Map<String,","Double>","ret","=","new","HashMap<>","(",")",";","int","length","=","resources",".","length",";","for","(","Map",".","Entry<String,","Integer>","entry",":","resourceNamesToArrayIndex",".","entrySet","(",")",")","{","int","index","=","entry",".","getValue","(",")",";","if","(","index","<","length",")","{","ret",".","put","(","entry",".","getKey","(",")",",","resources[index]",")",";","}","}","return","ret",";"],"docstring_tokens":["Translates","an","array","of","resource","values","to","a","normalized","resource","map"],"prompt_tokens":[]}
{"code_tokens":["@Override\n","public","void","setUpContext","(","final","Class<?>","ownerCls,","final","ShellProcess","process,\n","final","TopologyContext","context",")","{","this",".","log","=","getLogger","(","ownerCls",")",";","this",".","process","=","process",";","//","context","is","not","used","by","the","default","implementation,","but","is","included\n","//","in","the","interface","in","case","it","is","useful","to","subclasses\n"],"docstring_tokens":["This","default","implementation","saves","the","ShellProcess","so","it","can","output","the","process","info","string","later"],"prompt_tokens":[]}
{"code_tokens":["public","boolean","supportsWorkerTokens","(",")","{","return","areWorkerTokensSupported",";"],"docstring_tokens":["Check","if","worker","tokens","are","supported","by","this","thrift","server"],"prompt_tokens":[]}
{"code_tokens":["public","static","StormTopology","getTopology","(","Map<String,","Object>","config",")","{","\n\n","final","int","spoutNum","=","Helper",".","getInt","(","config,","SPOUT_NUM,","DEFAULT_SPOUT_NUM",")",";","final","int","boltNum","=","Helper",".","getInt","(","config,","BOLT_NUM,","DEFAULT_BOLT_NUM",")",";","//","1","-","Setup","Kafka","Spout","--------\n\n","String","bootstrapServers","=","Optional",".","ofNullable","(","Helper",".","getStr","(","config,","BOOTSTRAP_SERVERS",")",")",".","orElse","(","\"127",".","0",".","0",".","1:9092\"",")",";","String","kafkaTopic","=","Optional",".","ofNullable","(","Helper",".","getStr","(","config,","KAFKA_TOPIC",")",")",".","orElse","(","\"storm-perf-null-bolt-topic\"",")",";","ProcessingGuarantee","processingGuarantee","=","ProcessingGuarantee",".","valueOf","(","Optional",".","ofNullable","(","Helper",".","getStr","(","config,","PROCESSING_GUARANTEE",")",")",".","orElse","(","ProcessingGuarantee",".","AT_LEAST_ONCE",".","name","(",")",")",")",";","int","offsetCommitPeriodMs","=","Helper",".","getInt","(","config,","OFFSET_COMMIT_PERIOD_MS,","30_000",")",";","\n\n","KafkaSpoutConfig<String,","String>","kafkaSpoutConfig","=","KafkaSpoutConfig",".","builder","(","bootstrapServers,","kafkaTopic",")",".","setProcessingGuarantee","(","processingGuarantee",")",".","setOffsetCommitPeriodMs","(","offsetCommitPeriodMs",")",".","setFirstPollOffsetStrategy","(","FirstPollOffsetStrategy",".","EARLIEST",")",".","setTupleTrackingEnforced","(","true",")",".","build","(",")",";","\n\n","KafkaSpout<String,","String>","spout","=","new","KafkaSpout<>","(","kafkaSpoutConfig",")",";","\n\n","//","2","-","DevNull","Bolt","--------\n","DevNullBolt","bolt","=","new","DevNullBolt","(",")",";","\n\n","//","3","-","Setup","Topology","--------\n","TopologyBuilder","builder","=","new","TopologyBuilder","(",")",";","builder",".","setSpout","(","SPOUT_ID,","spout,","spoutNum",")",";","builder",".","setBolt","(","BOLT_ID,","bolt,","boltNum",")",".","localOrShuffleGrouping","(","SPOUT_ID",")",";","\n\n","return","builder",".","createTopology","(",")",";"],"docstring_tokens":["Create","and","configure","the","topology"],"prompt_tokens":[]}
{"code_tokens":["public","static","String","writeScript","(","String","dir,","List<String>","command,\n","Map<String,","String>","environment",")","throws","IOException","{","return","writeScript","(","dir,","command,","environment,","null",")",";"],"docstring_tokens":["Writes","a","posix","shell","script","file","to","be","executed","in","its","own","process"],"prompt_tokens":[]}
{"code_tokens":["public","static","void","unJar","(","File","jarFile,","File","toDir",")","throws","IOException","{","try","(","JarFile","jar","=","new","JarFile","(","jarFile",")",")","{","extractZipFile","(","jar,","toDir,","null",")",";","}"],"docstring_tokens":["Unpack","matching","files","from","a","jar"],"prompt_tokens":[]}
{"code_tokens":["public","static","boolean","isRas","(","Map<String,","Object>","conf",")","{","if","(","conf",".","containsKey","(","DaemonConfig",".","STORM_SCHEDULER",")",")","{","if","(","conf",".","get","(","DaemonConfig",".","STORM_SCHEDULER",")",".","equals","(","\"org",".","apache",".","storm",".","scheduler",".","resource",".","ResourceAwareScheduler\"",")",")","{","return","true",";","}","}","return","false",";"],"docstring_tokens":["Check","if","the","scheduler","is","resource","aware","or","not"],"prompt_tokens":[]}
{"code_tokens":["public","static","long","getMemInfoFreeMb","(",")","throws","IOException","{","//MemFree:","14367072","kB\n","//Buffers:","536512","kB\n","//Cached:","1192096","kB\n","//","MemFree","+","Buffers","+","Cached\n","long","memFree","=","0",";","long","buffers","=","0",";","long","cached","=","0",";","try","(","BufferedReader","in","=","new","BufferedReader","(","new","FileReader","(","\"/proc/meminfo\"",")",")",")","{","String","line","=","null",";","while","(","(","line","=","in",".","readLine","(",")",")","!=","null",")","{","Matcher","match","=","MEMINFO_PATTERN",".","matcher","(","line",")",";","if","(","match",".","matches","(",")",")","{","String","tag","=","match",".","group","(","1",")",";","if","(","tag",".","equalsIgnoreCase","(","\"MemFree\"",")",")","{","memFree","=","Long",".","parseLong","(","match",".","group","(","2",")",")",";","}","else","if","(","tag",".","equalsIgnoreCase","(","\"Buffers\"",")",")","{","buffers","=","Long",".","parseLong","(","match",".","group","(","2",")",")",";","}","else","if","(","tag",".","equalsIgnoreCase","(","\"Cached\"",")",")","{","cached","=","Long",".","parseLong","(","match",".","group","(","2",")",")",";","}","}","}","}","return","(","memFree","+","buffers","+","cached",")","/","1024",";"],"docstring_tokens":["Get","system","free","memory","in","megabytes"],"prompt_tokens":[]}
{"code_tokens":["public","static","<T>","T","first","(","List<T>","list",")","{","if","(","list","==","null","||","list",".","size","(",")","<=","0",")","{","return","null",";","}","\n\n","return","list",".","get","(","0",")",";"],"docstring_tokens":["Get","the","first","element","in","list"],"prompt_tokens":[]}
{"code_tokens":["public","static","<T>","T","last","(","List<T>","list",")","{","if","(","list","==","null","||","list",".","size","(",")","<=","0",")","{","return","null",";","}","\n\n","return","list",".","get","(","list",".","size","(",")","-","1",")",";"],"docstring_tokens":["get","the","last","element","in","list"],"prompt_tokens":[]}
{"code_tokens":["public","static","<T>","List<T>","takeLast","(","List<T>","list,","int","count",")","{","if","(","list","==","null",")","{","return","null",";","}","\n\n","if","(","list",".","size","(",")","<=","count",")","{","return","list",";","}","else","{","return","list",".","stream","(",")",".","skip","(","list",".","size","(",")","-","count",")",".","limit","(","count",")",".","collect","(","Collectors",".","toList","(",")",")",";","}"],"docstring_tokens":["Get","the","last","N","elements","as","a","new","list"],"prompt_tokens":[]}
{"code_tokens":["public","static","<T>","List<T>","drop","(","List<T>","list,","int","count",")","{","if","(","list","==","null",")","{","return","null",";","}","\n\n","return","list",".","stream","(",")",".","skip","(","count",")",".","collect","(","Collectors",".","toList","(",")",")",";"],"docstring_tokens":["Drop","the","first","N","elements","and","create","a","new","list"],"prompt_tokens":[]}
{"code_tokens":["public","static","<T>","List<T>","rest","(","List<T>","list",")","{","return","drop","(","list,","1",")",";"],"docstring_tokens":["Drop","the","only","first","element","and","create","a","new","list"],"prompt_tokens":[]}
{"code_tokens":["public","List<Long>","getAllVersions","(",")","throws","IOException","{","List<Long>","ret","=","new","ArrayList<Long>","(",")",";","for","(","String","s",":","listDir","(","root",")",")","{","\n\n","if","(","s",".","endsWith","(","FINISHED_VERSION_SUFFIX",")","&&","new","File","(","s",".","substring","(","0,","s",".","length","(",")","-","FINISHED_VERSION_SUFFIX",".","length","(",")",")",")",".","exists","(",")",")","{","ret",".","add","(","validateAndGetVersion","(","s",")",")",";","}","}","Collections",".","sort","(","ret",")",";","Collections",".","reverse","(","ret",")",";","return","ret",";"],"docstring_tokens":["Sorted","from","most","recent","to","oldest"],"prompt_tokens":[]}
{"code_tokens":["private","static","DynamicState","cleanupCurrentContainer","(","DynamicState","dynamicState,","StaticState","staticState,","MachineState","nextState",")","throws\n","Exception","{","assert","(","dynamicState",".","container","!=","null",")",";","assert","(","dynamicState",".","currentAssignment","!=","null",")",";","assert","(","dynamicState",".","container",".","areAllProcessesDead","(",")",")",";","\n\n","dynamicState",".","container",".","cleanUp","(",")",";","dynamicState",".","cancelPendingBlobs","(",")",";","staticState",".","localizer",".","releaseSlotFor","(","dynamicState",".","currentAssignment,","staticState",".","port",")",";","DynamicState","ret","=","dynamicState",".","withCurrentAssignment","(","null,","null",")",";","if","(","nextState","!=","null",")","{","ret","=","ret",".","withState","(","nextState",")",";","}","return","ret",";"],"docstring_tokens":["Clean","up","a","container"],"prompt_tokens":[]}
{"code_tokens":["@Override\n","public","boolean","permit","(","ReqContext","context,","String","operation,","Map<String,","Object>","params",")","{","if","(","\"execute\"",".","equals","(","operation",")",")","{","return","permitClientRequest","(","context,","operation,","params",")",";","}","else","if","(","\"failRequest\"",".","equals","(","operation",")","||","\"fetchRequest\"",".","equals","(","operation",")","||","\"result\"",".","equals","(","operation",")",")","{","return","permitInvocationRequest","(","context,","operation,","params",")",";","}","//","Deny","unsupported","operations",".","LOG",".","warn","(","\"Denying","unsupported","operation","\\\"\"","+","operation","+","\"\\\"","from","\"","+","context",".","remoteAddress","(",")",")",";","return","false",";"],"docstring_tokens":["Authorizes","request","from","to","the","DRPC","server"],"prompt_tokens":[]}
{"code_tokens":["public","static","void","main","(","String[]","args",")","throws","Exception","{","Map<String,","Object>","cl","=","CLI",".","opt","(","\"f\",","\"function\",","null,","CLI",".","AS_STRING",")",".","arg","(","\"FUNC_AND_ARGS\",","CLI",".","INTO_LIST",")",".","parse","(","args",")",";","final","List<String>","funcAndArgs","=","(","List<String>",")","cl",".","get","(","\"FUNC_AND_ARGS\"",")",";","final","String","function","=","(","String",")","cl",".","get","(","\"f\"",")",";","Config","conf","=","new","Config","(",")",";","try","(","DRPCClient","drpc","=","DRPCClient",".","getConfiguredClient","(","conf",")",")","{","if","(","function","==","null",")","{","if","(","funcAndArgs",".","size","(",")","%","2","!=","0",")","{","LOG",".","error","(","\"If","no","-f","is","supplied","arguments","need","to","be","in","the","form","[function","arg]",".","This","has","{","}","args\",","funcAndArgs",".","size","(",")",")",";","System",".","exit","(","-1",")",";","}","for","(","int","i","=","0",";","i","<","funcAndArgs",".","size","(",")",";","i","+=","2",")","{","String","func","=","funcAndArgs",".","get","(","i",")",";","String","arg","=","funcAndArgs",".","get","(","i","+","1",")",";","runAndPrint","(","drpc,","func,","arg",")",";","}","}","else","{","for","(","String","arg",":","funcAndArgs",")","{","runAndPrint","(","drpc,","function,","arg",")",";","}","}","}"],"docstring_tokens":["Main","entry","point","for","the","basic","DRPC","client"],"prompt_tokens":[]}
{"code_tokens":["public","void","unassignBySlot","(","WorkerSlot","slot",")","{","Collection<ExecutorDetails>","executors","=","slotToExecutors",".","remove","(","slot",")",";","\n\n","//","remove\n","if","(","executors","!=","null",")","{","for","(","ExecutorDetails","executor",":","executors",")","{","executorToSlot",".","remove","(","executor",")",";","}","}","\n\n","resources",".","remove","(","slot",")",";","\n\n","String","node","=","slot",".","getNodeId","(",")",";","boolean","isFound","=","false",";","for","(","WorkerSlot","ws",":","executorToSlot",".","values","(",")",")","{","if","(","node",".","equals","(","ws",".","getNodeId","(",")",")",")","{","isFound","=","true",";","break",";","}","}","if","(","!isFound",")","{","nodeIdToTotalSharedOffHeapNode",".","remove","(","node",")",";","}"],"docstring_tokens":["Release","the","slot","occupied","by","this","assignment"],"prompt_tokens":[]}
{"code_tokens":["public","static","SlowExecutorPattern","fromConf","(","Map<String,","Object>","conf",")","{","double","slowness","=","ObjectReader",".","getDouble","(","conf",".","get","(","\"slownessMs\"",")",",","0",".","0",")",";","int","count","=","ObjectReader",".","getInt","(","conf",".","get","(","\"count\"",")",",","1",")",";","return","new","SlowExecutorPattern","(","slowness,","count",")",";"],"docstring_tokens":["Creates","a","SlowExecutorPattern","from","a","Map","config"],"prompt_tokens":[]}
{"code_tokens":["public","static","List<ACL>","mkTopoReadOnlyAcls","(","Map<String,","Object>","topoConf",")","{","return","mkTopoAcls","(","topoConf,","ZooDefs",".","Perms",".","READ",")",";"],"docstring_tokens":["Get","ZK","ACLs","for","a","topology","to","have","read","only","access"],"prompt_tokens":[]}
{"code_tokens":["public","static","String","logConfigPath","(","String","stormId",")","{","return","LOGCONFIG_SUBTREE","+","ZK_SEPERATOR","+","stormId",";"],"docstring_tokens":["Get","the","path","to","the","log","config","for","a","topology"],"prompt_tokens":[]}
{"code_tokens":["public","static","String","secretKeysPath","(","WorkerTokenServiceType","type,","String","topologyId",")","{","return","secretKeysPath","(","type",")","+","ZK_SEPERATOR","+","topologyId",";"],"docstring_tokens":["Get","the","path","to","secret","keys","for","a","specific","topology"],"prompt_tokens":[]}
{"code_tokens":["public","static","String","secretKeysPath","(","WorkerTokenServiceType","type,","String","topologyId,","long","version",")","{","return","secretKeysPath","(","type,","topologyId",")","+","ZK_SEPERATOR","+","version",";"],"docstring_tokens":["Get","the","path","to","a","specific","secret","key"],"prompt_tokens":[]}
{"code_tokens":["public","static","StormTopology","newTopology","(","String","brokerUrl,","String","topicName",")","{","final","TopologyBuilder","builder","=","new","TopologyBuilder","(",")",";","builder",".","setSpout","(","\"spout\",","(",")","->","{","Utils",".","sleep","(","1000",")",";","//Throttle","this","spout","a","bit","to","avoid","maxing","out","CPU\n","return","UUID",".","randomUUID","(",")",".","toString","(",")",";","}",")",";","\n\n","/*","The","output","field","of","the","spout","(","\"lambda\"",")","is","provided","as","the","boltMessageField\n","so","that","this","gets","written","out","as","the","message","in","the","kafka","topic",".","The","tuples","have","no","key","field,","so","the","messages","are","written","to","Kafka","without","a","key",".","*/\n","final","KafkaBolt<String,","String>","bolt","=","new","KafkaBolt<String,","String>","(",")",".","withProducerProperties","(","newProps","(","brokerUrl,","topicName",")",")",".","withTopicSelector","(","new","DefaultTopicSelector","(","topicName",")",")",".","withTupleToKafkaMapper","(","new","FieldNameBasedTupleToKafkaMapper<>","(","\"key\",","\"lambda\"",")",")",";","\n\n","builder",".","setBolt","(","\"forwardToKafka\",","bolt,","1",")",".","shuffleGrouping","(","\"spout\"",")",";","\n\n","return","builder",".","createTopology","(",")",";"],"docstring_tokens":["Create","a","new","topology","that","writes","random","UUIDs","to","Kafka"],"prompt_tokens":[]}
{"code_tokens":["public","void","pruneZeroCounts","(",")","{","int","i","=","0",";","while","(","i","<","rankedItems",".","size","(",")",")","{","if","(","rankedItems",".","get","(","i",")",".","getCount","(",")","==","0",")","{","rankedItems",".","remove","(","i",")",";","}","else","{","i++",";","}","}"],"docstring_tokens":["Removes","ranking","entries","that","have","a","count","of","zero"],"prompt_tokens":[]}
{"code_tokens":["public","static","void","main","(","String[]","args",")","throws","Exception","{","Utils",".","setupDefaultUncaughtExceptionHandler","(",")",";","StormMetricsRegistry","metricsRegistry","=","new","StormMetricsRegistry","(",")",";","@SuppressWarnings","(","\"resource\"",")","Supervisor","instance","=","new","Supervisor","(","new","StandaloneSupervisor","(",")",",","metricsRegistry",")",";","instance",".","launchDaemon","(",")",";"],"docstring_tokens":["supervisor","daemon","enter","entrance"],"prompt_tokens":[]}
{"code_tokens":["public","static","String","getHdfsPrincipal","(","Map<String,","Object>","conf",")","throws","UnknownHostException","{","String","ret",";","\n\n","String","blobstorePrincipal","=","(","String",")","conf",".","get","(","Config",".","BLOBSTORE_HDFS_PRINCIPAL",")",";","String","hdfsPrincipal","=","(","String",")","conf",".","get","(","Config",".","STORM_HDFS_LOGIN_PRINCIPAL",")",";","if","(","blobstorePrincipal","==","null","&&","hdfsPrincipal","==","null",")","{","return","null",";","}","else","if","(","blobstorePrincipal","==","null",")","{","ret","=","hdfsPrincipal",";","}","else","if","(","hdfsPrincipal","==","null",")","{","LOG",".","warn","(","\"","{","}","is","used","as","the","hdfs","principal",".","Please","use","{","}","instead\",\n","Config",".","BLOBSTORE_HDFS_PRINCIPAL,","Config",".","STORM_HDFS_LOGIN_PRINCIPAL",")",";","ret","=","blobstorePrincipal",";","}","else","{","//both","not","null",";","LOG",".","warn","(","\"Both","{","}","and","{","}","are","set",".","Use","{","}","only",".","\",\n","Config",".","BLOBSTORE_HDFS_PRINCIPAL,","Config",".","STORM_HDFS_LOGIN_PRINCIPAL,","Config",".","STORM_HDFS_LOGIN_PRINCIPAL",")",";","ret","=","hdfsPrincipal",";","}","return","substituteHostnameInPrincipal","(","ret",")",";"],"docstring_tokens":["Get","the","hostname","substituted","hdfs","principal"],"prompt_tokens":[]}
{"code_tokens":["\n\n","public","static","void","submitTopologyWithProgressBar","(","String","name,","Map<String,","Object>","topoConf,","StormTopology","topology",")","throws\n","AlreadyAliveException,","InvalidTopologyException,","AuthorizationException","{","submitTopologyWithProgressBar","(","name,","topoConf,","topology,","null",")",";"],"docstring_tokens":["Submits","a","topology","to","run","on","the","cluster","with","a","progress","bar"],"prompt_tokens":[]}
{"code_tokens":["private","void","setupBlobstore","(",")","throws","AuthorizationException,","KeyNotFoundException","{","IStormClusterState","state","=","stormClusterState",";","BlobStore","store","=","this",";","Set<String>","localKeys","=","new","HashSet<>","(",")",";","for","(","Iterator<String>","it","=","store",".","listKeys","(",")",";","it",".","hasNext","(",")",";",")","{","localKeys",".","add","(","it",".","next","(",")",")",";","}","Set<String>","activeKeys","=","new","HashSet<>","(","state",".","activeKeys","(",")",")",";","Set<String>","activeLocalKeys","=","new","HashSet<>","(","localKeys",")",";","activeLocalKeys",".","retainAll","(","activeKeys",")",";","Set<String>","keysToDelete","=","new","HashSet<>","(","localKeys",")",";","keysToDelete",".","removeAll","(","activeKeys",")",";","NimbusInfo","nimbusInfo","=","this",".","nimbusInfo",";","LOG",".","debug","(","\"Deleting","keys","not","on","the","zookeeper","{","}","\",","keysToDelete",")",";","for","(","String","toDelete:","keysToDelete",")","{","store",".","deleteBlob","(","toDelete,","NIMBUS_SUBJECT",")",";","}","LOG",".","debug","(","\"Creating","list","of","key","entries","for","blobstore","inside","zookeeper","{","}","local","{","}","\",","activeKeys,","activeLocalKeys",")",";","for","(","String","key:","activeLocalKeys",")","{","try","{","state",".","setupBlob","(","key,","nimbusInfo,","getVersionForKey","(","key,","nimbusInfo,","zkClient",")",")",";","}","catch","(","KeyNotFoundException","e",")","{","//","invalid","key,","remove","it","from","blobstore\n","store",".","deleteBlob","(","key,","NIMBUS_SUBJECT",")",";","}","}"],"docstring_tokens":["Sets","up","blobstore","state","for","all","current","keys"],"prompt_tokens":[]}
{"code_tokens":["protected","boolean","isDisconnected","(",")","{","return","session","==","null",";"],"docstring_tokens":["Checks","whether","the","client","is","already","connected","to","the","cluster"],"prompt_tokens":[]}
{"code_tokens":["public","static","void","main","(","String[]","args",")","throws","Exception","{","Options","options","=","new","Options","(",")",";","options",".","addOption","(","Option",".","builder","(","\"h\"",")",".","longOpt","(","\"help\"",")",".","desc","(","\"Print","a","help","message\"",")",".","build","(",")",")",";","options",".","addOption","(","Option",".","builder","(","\"t\"",")",".","longOpt","(","\"test-time\"",")",".","argName","(","\"MINS\"",")",".","hasArg","(",")",".","desc","(","\"How","long","to","run","the","tests","for","in","mins","(","defaults","to","\"","+","TEST_EXECUTE_TIME_DEFAULT","+","\"",")","\"",")",".","build","(",")",")",";","options",".","addOption","(","Option",".","builder","(",")",".","longOpt","(","\"parallel\"",")",".","argName","(","\"MULTIPLIER","(",":TOPO:COMP",")","?\"",")",".","hasArg","(",")",".","desc","(","\"How","much","to","scale","the","topology","up","or","down","in","parallelism",".","\"\n","+","\"The","new","parallelism","will","round","up","to","the","next","whole","number",".","\"\n","+","\"If","a","topology","+","component","is","supplied","only","that","component","will","be","scaled",".","\"\n","+","\"If","topo","or","component","is","blank","or","a","'*'","all","topologies","or","components","matched","will","be","scaled",".","\"\n","+","\"Only","1","scaling","rule,","the","most","specific,","will","be","applied","to","a","component",".","Providing","a","topology","name","is","considered","more","\"\n","+","\"specific","than","not","providing","one",".","\"\n","+","\"","(","defaults","to","1",".","0","no","scaling",")","\"",")",".","build","(",")",")",";","options",".","addOption","(","Option",".","builder","(",")",".","longOpt","(","\"throughput\"",")",".","argName","(","\"MULTIPLIER","(",":TOPO:COMP",")","?\"",")",".","hasArg","(",")",".","desc","(","\"How","much","to","scale","the","topology","up","or","down","in","throughput",".","\"\n","+","\"If","a","topology","+","component","is","supplied","only","that","component","will","be","scaled",".","\"\n","+","\"If","topo","or","component","is","blank","or","a","'*'","all","topologies","or","components","matched","will","be","scaled",".","\"\n","+","\"Only","1","scaling","rule,","the","most","specific,","will","be","applied","to","a","component",".","Providing","a","topology","name","is","considered","more","\"\n","+","\"specific","than","not","providing","one",".","\"\n","+","\"","(","defaults","to","1",".","0","no","scaling",")","\"",")",".","build","(",")",")",";","options",".","addOption","(","Option",".","builder","(",")",".","longOpt","(","\"local-or-shuffle\"",")",".","desc","(","\"replace","shuffle","grouping","with","local","or","shuffle","grouping\"",")",".","build","(",")",")",";","options",".","addOption","(","Option",".","builder","(",")",".","longOpt","(","\"imbalance\"",")",".","argName","(","\"MS","(",":COUNT",")","?:TOPO:COMP\"",")",".","hasArg","(",")",".","desc","(","\"The","number","of","ms","that","the","first","COUNT","of","TOPO:COMP","will","wait","before","processing",".","This","creates","an","imbalance","\"\n","+","\"that","helps","test","load","aware","groupings",".","By","default","there","is","no","imbalance",".","If","no","count","is","given","it","defaults","to","1\"",")",".","build","(",")",")",";","options",".","addOption","(","Option",".","builder","(",")",".","longOpt","(","\"debug\"",")",".","desc","(","\"Print","debug","information","about","the","adjusted","topology","before","submitting","it",".","\"",")",".","build","(",")",")",";","LoadMetricsServer",".","addCommandLineOptions","(","options",")",";","CommandLineParser","parser","=","new","DefaultParser","(",")",";","CommandLine","cmd","=","null",";","Exception","commandLineException","=","null",";","double","executeTime","=","TEST_EXECUTE_TIME_DEFAULT",";","double","globalParallel","=","1",".","0",";","Map<String,","Double>","topoSpecificParallel","=","new","HashMap<>","(",")",";","double","globalThroughput","=","1",".","0",";","Map<String,","Double>","topoSpecificThroughput","=","new","HashMap<>","(",")",";","Map<String,","SlowExecutorPattern>","topoSpecificImbalance","=","new","HashMap<>","(",")",";","try","{","cmd","=","parser",".","parse","(","options,","args",")",";","if","(","cmd",".","hasOption","(","\"t\"",")",")","{","executeTime","=","Double",".","valueOf","(","cmd",".","getOptionValue","(","\"t\"",")",")",";","}","if","(","cmd",".","hasOption","(","\"parallel\"",")",")","{","for","(","String","stringParallel",":","cmd",".","getOptionValues","(","\"parallel\"",")",")","{","Matcher","m","=","MULTI_PATTERN",".","matcher","(","stringParallel",")",";","if","(","!m",".","matches","(",")",")","{","throw","new","ParseException","(","\"--parallel","\"","+","stringParallel","+","\"","is","not","in","the","format","MULTIPLIER","(",":TOPO:COMP",")","?\"",")",";","}","double","parallel","=","Double",".","parseDouble","(","m",".","group","(","\"value\"",")",")",";","String","topo","=","m",".","group","(","\"topo\"",")",";","if","(","topo","==","null","||","topo",".","isEmpty","(",")",")","{","topo","=","\"*\"",";","}","String","comp","=","m",".","group","(","\"comp\"",")",";","if","(","comp","==","null","||","comp",".","isEmpty","(",")",")","{","comp","=","\"*\"",";","}","if","(","\"*\"",".","equals","(","topo",")","&&","\"*\"",".","equals","(","comp",")",")","{","globalParallel","=","parallel",";","}","else","{","topoSpecificParallel",".","put","(","topo","+","\":\"","+","comp,","parallel",")",";","}","}","}","if","(","cmd",".","hasOption","(","\"throughput\"",")",")","{","for","(","String","stringThroughput",":","cmd",".","getOptionValues","(","\"throughput\"",")",")","{","Matcher","m","=","MULTI_PATTERN",".","matcher","(","stringThroughput",")",";","if","(","!m",".","matches","(",")",")","{","throw","new","ParseException","(","\"--throughput","\"","+","stringThroughput","+","\"","is","not","in","the","format","MULTIPLIER","(",":TOPO:COMP",")","?\"",")",";","}","double","throughput","=","Double",".","parseDouble","(","m",".","group","(","\"value\"",")",")",";","String","topo","=","m",".","group","(","\"topo\"",")",";","if","(","topo","==","null","||","topo",".","isEmpty","(",")",")","{","topo","=","\"*\"",";","}","String","comp","=","m",".","group","(","\"comp\"",")",";","if","(","comp","==","null","||","comp",".","isEmpty","(",")",")","{","comp","=","\"*\"",";","}","if","(","\"*\"",".","equals","(","topo",")","&&","\"*\"",".","equals","(","comp",")",")","{","globalThroughput","=","throughput",";","}","else","{","topoSpecificThroughput",".","put","(","topo","+","\":\"","+","comp,","throughput",")",";","}","}","}","if","(","cmd",".","hasOption","(","\"imbalance\"",")",")","{","for","(","String","stringImbalance",":","cmd",".","getOptionValues","(","\"imbalance\"",")",")","{","//We","require","there","to","be","both","a","topology","and","a","component","in","this","case,","so","parse","it","out","as","such",".","String","[]","parts","=","stringImbalance",".","split","(","\":\"",")",";","if","(","parts",".","length","<","3","||","parts",".","length",">","4",")","{","throw","new","ParseException","(","stringImbalance","+","\"","does","not","appear","to","match","the","expected","pattern\"",")",";","}","else","if","(","parts",".","length","==","3",")","{","topoSpecificImbalance",".","put","(","parts[1]","+","\":\"","+","parts[2],","SlowExecutorPattern",".","fromString","(","parts[0]",")",")",";","}","else","{","//==","4\n","topoSpecificImbalance",".","put","(","parts[2]","+","\":\"","+","parts[3],\n","SlowExecutorPattern",".","fromString","(","parts[0]","+","\":\"","+","parts[1]",")",")",";","}","}","}","}","catch","(","ParseException","|","NumberFormatException","e",")","{","commandLineException","=","e",";","}","if","(","commandLineException","!=","null","||","cmd",".","hasOption","(","'h'",")",")","{","if","(","commandLineException","!=","null",")","{","System",".","err",".","println","(","\"ERROR","\"","+","commandLineException",".","getMessage","(",")",")",";","}","new","HelpFormatter","(",")",".","printHelp","(","\"GenLoad","[options]","[captured_file]*\",","options",")",";","return",";","}","Map<String,","Object>","metrics","=","new","LinkedHashMap<>","(",")",";","metrics",".","put","(","\"parallel_adjust\",","globalParallel",")",";","metrics",".","put","(","\"throughput_adjust\",","globalThroughput",")",";","metrics",".","put","(","\"local_or_shuffle\",","cmd",".","hasOption","(","\"local-or-shuffle\"",")",")",";","metrics",".","put","(","\"topo_parallel\",","topoSpecificParallel",".","entrySet","(",")",".","stream","(",")",".","map","(","(","entry",")","->","entry",".","getValue","(",")","+","\":\"","+","entry",".","getKey","(",")",")",".","collect","(","Collectors",".","toList","(",")",")",")",";","metrics",".","put","(","\"topo_throuhgput\",","topoSpecificThroughput",".","entrySet","(",")",".","stream","(",")",".","map","(","(","entry",")","->","entry",".","getValue","(",")","+","\":\"","+","entry",".","getKey","(",")",")",".","collect","(","Collectors",".","toList","(",")",")",")",";","metrics",".","put","(","\"slow_execs\",","topoSpecificImbalance",".","entrySet","(",")",".","stream","(",")",".","map","(","(","entry",")","->","entry",".","getValue","(",")","+","\":\"","+","entry",".","getKey","(",")",")",".","collect","(","Collectors",".","toList","(",")",")",")",";","\n\n","Config","conf","=","new","Config","(",")",";","LoadMetricsServer","metricServer","=","new","LoadMetricsServer","(","conf,","cmd,","metrics",")",";","\n\n","metricServer",".","serve","(",")",";","String","url","=","metricServer",".","getUrl","(",")",";","int","exitStatus","=","-1",";","try","(","NimbusClient","client","=","NimbusClient",".","getConfiguredClient","(","conf",")",";","ScopedTopologySet","topoNames","=","new","ScopedTopologySet","(","client",".","getClient","(",")",")",")","{","for","(","String","topoFile",":","cmd",".","getArgList","(",")",")","{","try","{","TopologyLoadConf","tlc","=","readTopology","(","topoFile",")",";","tlc","=","tlc",".","scaleParallel","(","globalParallel,","topoSpecificParallel",")",";","tlc","=","tlc",".","scaleThroughput","(","globalThroughput,","topoSpecificThroughput",")",";","tlc","=","tlc",".","overrideSlowExecs","(","topoSpecificImbalance",")",";","if","(","cmd",".","hasOption","(","\"local-or-shuffle\"",")",")","{","tlc","=","tlc",".","replaceShuffleWithLocalOrShuffle","(",")",";","}","if","(","cmd",".","hasOption","(","\"debug\"",")",")","{","LOG",".","info","(","\"DEBUGGING:","{","}","\",","tlc",".","toYamlString","(",")",")",";","}","topoNames",".","add","(","parseAndSubmit","(","tlc,","url",")",")",";","}","catch","(","Exception","e",")","{","System",".","err",".","println","(","\"Could","Not","Submit","Topology","From","\"","+","topoFile",")",";","e",".","printStackTrace","(","System",".","err",")",";","}","}","\n\n","metricServer",".","monitorFor","(","executeTime,","client",".","getClient","(",")",",","topoNames",")",";","exitStatus","=","0",";","}","catch","(","Exception","e",")","{","LOG",".","error","(","\"Error","trying","to","run","topologies",".",".",".","\",","e",")",";","}","finally","{","System",".","exit","(","exitStatus",")",";","}"],"docstring_tokens":["Main","entry","point","for","GenLoad","application"],"prompt_tokens":[]}
{"code_tokens":["public","byte[]","serialize","(","Object","obj",")","{","output",".","clear","(",")",";","kryo",".","writeClassAndObject","(","output,","obj",")",";","return","output",".","toBytes","(",")",";"],"docstring_tokens":["Serializes","the","given","object","into","a","byte","array","using","Kryo","serialization"],"prompt_tokens":[]}
{"code_tokens":["public","ByteBuffer","serializeToByteBuffer","(","Object","obj",")","{","output",".","clear","(",")",";","kryo",".","writeClassAndObject","(","output,","obj",")",";","return","ByteBuffer",".","wrap","(","output",".","getBuffer","(",")",",","0,","output",".","position","(",")",")",";"],"docstring_tokens":["Serializes","the","given","object","into","a","ByteBuffer","backed","by","the","byte","array","returned","by","Kryo","serialization"],"prompt_tokens":[]}
{"code_tokens":["public","Object","deserialize","(","ByteBuffer","byteBuffer",")","{","input",".","setBuffer","(","byteBuffer",".","array","(",")",",","byteBuffer",".","arrayOffset","(",")",",","byteBuffer",".","position","(",")",")",";","return","kryo",".","readClassAndObject","(","input",")",";"],"docstring_tokens":["Returns","an","Object","which","is","created","using","Kryo","deserialization","of","given","byteBuffer","instance"],"prompt_tokens":[]}
{"code_tokens":["public","static","Response","buildDownloadFile","(","String","contentDispositionName,\n","File","file,","Meter","numFileDownloadExceptions",")","throws","IOException","{","try","{","//","do","not","close","this","InputStream","in","method:","it","will","be","used","from","jetty","server\n","InputStream","is","=","Files",".","newInputStream","(","file",".","toPath","(",")",")",";","return","Response",".","status","(","OK",")",".","entity","(","wrapWithStreamingOutput","(","is",")",")",".","type","(","MediaType",".","APPLICATION_OCTET_STREAM_TYPE",")",".","header","(","\"Content-Disposition\",","\"attachment",";","filename=\\\"\"","+","contentDispositionName","+","\"\\\"\"",")",".","build","(",")",";","}","catch","(","IOException","e",")","{","numFileDownloadExceptions",".","mark","(",")",";","throw","e",";","}"],"docstring_tokens":["Build","a","Response","object","representing","download","a","file"],"prompt_tokens":[]}
{"code_tokens":["public","static","Response","buildResponseUnauthorizedUser","(","String","user",")","{","String","entity","=","buildUnauthorizedUserHtml","(","user",")",";","return","Response",".","status","(","FORBIDDEN",")",".","entity","(","entity",")",".","type","(","MediaType",".","TEXT_HTML_TYPE",")",".","build","(",")",";"],"docstring_tokens":["Build","a","Response","object","representing","unauthorized","user,","with","HTML","response"],"prompt_tokens":[]}
{"code_tokens":["public","static","DirLock","tryLock","(","FileSystem","fs,","Path","dir",")","throws","IOException","{","Path","lockFile","=","getDirLockFile","(","dir",")",";","\n\n","try","{","FSDataOutputStream","ostream","=","HdfsUtils",".","tryCreateFile","(","fs,","lockFile",")",";","if","(","ostream","!=","null",")","{","LOG",".","debug","(","\"Thread","(","{","}",")","Acquired","lock","on","dir","{","}","\",","threadInfo","(",")",",","dir",")",";","ostream",".","close","(",")",";","return","new","DirLock","(","fs,","lockFile",")",";","}","else","{","LOG",".","debug","(","\"Thread","(","{","}",")","cannot","lock","dir","{","}","as","its","already","locked",".","\",","threadInfo","(",")",",","dir",")",";","return","null",";","}","}","catch","(","IOException","e",")","{","LOG",".","error","(","\"Error","when","acquiring","lock","on","dir","\"","+","dir,","e",")",";","throw","e",";","}"],"docstring_tokens":["Get","a","lock","on","file","if","not","already","locked"],"prompt_tokens":[]}
{"code_tokens":["public","static","DirLock","takeOwnershipIfStale","(","FileSystem","fs,","Path","dirToLock,","int","lockTimeoutSec",")","{","Path","dirLockFile","=","getDirLockFile","(","dirToLock",")",";","\n\n","long","now","=","System",".","currentTimeMillis","(",")",";","long","expiryTime","=","now","-","(","lockTimeoutSec","*","1000",")",";","\n\n","try","{","long","modTime","=","fs",".","getFileStatus","(","dirLockFile",")",".","getModificationTime","(",")",";","if","(","modTime","<=","expiryTime",")","{","return","takeOwnership","(","fs,","dirLockFile",")",";","}","return","null",";","}","catch","(","IOException","e",")","{","return","null",";","}"],"docstring_tokens":["if","the","lock","on","the","directory","is","stale,","take","ownership"],"prompt_tokens":[]}
{"code_tokens":["public","void","release","(",")","throws","IOException","{","if","(","!fs",".","delete","(","lockFile,","false",")",")","{","LOG",".","error","(","\"Thread","{","}","could","not","delete","dir","lock","{","}","\",","threadInfo","(",")",",","lockFile",")",";","}","else","{","LOG",".","debug","(","\"Thread","{","}","Released","dir","lock","{","}","\",","threadInfo","(",")",",","lockFile",")",";","}"],"docstring_tokens":["Release","lock","on","dir","by","deleting","the","lock","file"],"prompt_tokens":[]}
{"code_tokens":["public","<R>","PairStream<K,","R>","mapValues","(","Function<?","super","V,","?","extends","R>","function",")","{","return","new","PairStream<>","(","streamBuilder,\n","addProcessorNode","(","new","MapValuesProcessor<>","(","function",")",",","KEY_VALUE,","true",")",")",";"],"docstring_tokens":["Returns","a","new","stream","by","applying","a","Function","to","the","value","of","each","key-value","pairs","in","this","stream"],"prompt_tokens":[]}
{"code_tokens":["public","<R>","PairStream<K,","R>","flatMapValues","(","FlatMapFunction<?","super","V,","?","extends","R>","function",")","{","return","new","PairStream<>","(","streamBuilder,\n","addProcessorNode","(","new","FlatMapValuesProcessor<>","(","function",")",",","KEY_VALUE,","true",")",")",";"],"docstring_tokens":["Return","a","new","stream","by","applying","a","FlatMapFunction","function","to","the","value","of","each","key-value","pairs","in","this","stream"],"prompt_tokens":[]}
{"code_tokens":["public","<R>","PairStream<K,","R>","aggregateByKey","(","R","initialValue,\n","BiFunction<?","super","R,","?","super","V,","?","extends","R>","accumulator,\n","BiFunction<?","super","R,","?","super","R,","?","extends","R>","combiner",")","{","return","combineByKey","(","CombinerAggregator",".","of","(","initialValue,","accumulator,","combiner",")",")",";"],"docstring_tokens":["Aggregates","the","values","for","each","key","of","this","stream","using","the","given","initial","value,","accumulator","and","combiner"],"prompt_tokens":[]}
{"code_tokens":["public","<A,","R>","PairStream<K,","R>","aggregateByKey","(","CombinerAggregator<?","super","V,","A,","?","extends","R>","aggregator",")","{","return","combineByKey","(","aggregator",")",";"],"docstring_tokens":["Aggregates","the","values","for","each","key","of","this","stream","using","the","given","CombinerAggregator"],"prompt_tokens":[]}
{"code_tokens":["public","PairStream<K,","Long>","countByKey","(",")","{","return","aggregateByKey","(","new","Count<>","(",")",")",";"],"docstring_tokens":["Counts","the","values","for","each","key","of","this","stream"],"prompt_tokens":[]}
{"code_tokens":["public","PairStream<K,","V>","reduceByKey","(","Reducer<V>","reducer",")","{","return","combineByKey","(","reducer",")",";"],"docstring_tokens":["Performs","a","reduction","on","the","values","for","each","key","of","this","stream","by","repeatedly","applying","the","reducer"],"prompt_tokens":[]}
{"code_tokens":["public","PairStream<K,","Iterable<V>>","groupByKey","(",")","{","return","partitionByKey","(",")",".","aggregatePartition","(","new","MergeValues<>","(",")",")",";"],"docstring_tokens":["Returns","a","new","stream","where","the","values","are","grouped","by","the","keys"],"prompt_tokens":[]}
{"code_tokens":["public","PairStream<K,","V>","reduceByKeyAndWindow","(","Reducer<V>","reducer,","Window<?,","?>","window",")","{","return","partitionByKey","(",")",".","window","(","window",")",".","reduceByKey","(","reducer",")",";"],"docstring_tokens":["Returns","a","new","stream","where","the","values","that","arrive","within","a","window","having","the","same","key","will","be","reduced","by","repeatedly","applying","the","reducer"],"prompt_tokens":[]}
{"code_tokens":["public","void","add","(","NormalizedResourceRequest","other",")","{","this",".","normalizedResources",".","add","(","other",".","normalizedResources",")",";","onHeap","+=","other",".","onHeap",";","offHeap","+=","other",".","offHeap",";"],"docstring_tokens":["Add","the","resources","in","other","to","this"],"prompt_tokens":[]}
{"code_tokens":["public","void","add","(","WorkerResources","value",")","{","this",".","normalizedResources",".","add","(","value",")",";","//The","resources","are","already","normalized\n","Map<String,","Double>","resources","=","value",".","get_resources","(",")",";","onHeap","+=","resources",".","getOrDefault","(","Constants",".","COMMON_ONHEAP_MEMORY_RESOURCE_NAME,","0",".","0",")",";","offHeap","+=","resources",".","getOrDefault","(","Constants",".","COMMON_OFFHEAP_MEMORY_RESOURCE_NAME,","0",".","0",")",";"],"docstring_tokens":["Add","the","resources","from","a","worker","to","those","in","this"],"prompt_tokens":[]}
{"code_tokens":["public","void","execute","(","String[]","args",")","throws","Exception","{","if","(","args",".","length","!=","4","&&","args",".","length","!=","5",")","{","System",".","out",".","println","(","\"Usage:","\"","+","this",".","getClass","(",")",".","getSimpleName","(",")","+","\"","<dataSourceClassName>","<dataSource",".","url>","\"\n","+","\"<user>","<password>","[topology","name]\"",")",";","System",".","exit","(","-1",")",";","}","Map<String,","Object>","map","=","Maps",".","newHashMap","(",")",";","map",".","put","(","\"dataSourceClassName\",","args[0]",")",";","//com",".","mysql",".","jdbc",".","jdbc2",".","optional",".","MysqlDataSource\n","map",".","put","(","\"dataSource",".","url\",","args[1]",")",";","//jdbc:mysql://localhost/test\n","map",".","put","(","\"dataSource",".","user\",","args[2]",")",";","//root\n\n","if","(","args",".","length","==","4",")","{","map",".","put","(","\"dataSource",".","password\",","args[3]",")",";","//password\n","}","\n\n","Config","config","=","new","Config","(",")",";","config",".","put","(","JDBC_CONF,","map",")",";","\n\n","ConnectionProvider","connectionProvider","=","new","HikariCPConnectionProvider","(","map",")",";","connectionProvider",".","prepare","(",")",";","int","queryTimeoutSecs","=","60",";","JdbcClient","jdbcClient","=","new","JdbcClient","(","connectionProvider,","queryTimeoutSecs",")",";","for","(","String","sql",":","setupSqls",")","{","jdbcClient",".","executeSql","(","sql",")",";","}","\n\n","this",".","userSpout","=","new","UserSpout","(",")",";","this",".","jdbcMapper","=","new","SimpleJdbcMapper","(","TABLE_NAME,","connectionProvider",")",";","connectionProvider",".","cleanup","(",")",";","Fields","outputFields","=","new","Fields","(","\"user_id\",","\"user_name\",","\"dept_name\",","\"create_date\"",")",";","List<Column>","queryParamColumns","=","Lists",".","newArrayList","(","new","Column","(","\"user_id\",","Types",".","INTEGER",")",")",";","this",".","jdbcLookupMapper","=","new","SimpleJdbcLookupMapper","(","outputFields,","queryParamColumns",")",";","this",".","connectionProvider","=","new","HikariCPConnectionProvider","(","map",")",";","String","topoName","=","\"test\"",";","if","(","args",".","length",">","4",")","{","topoName","=","args[4]",";","}","StormSubmitter",".","submitTopology","(","topoName,","config,","getTopology","(",")",")",";"],"docstring_tokens":["A","main","method","template","to","extend"],"prompt_tokens":[]}
{"code_tokens":["private","void","kill","(","long","pid,","String","user",")","throws","IOException","{","if","(","runAsUser",")","{","signal","(","pid,","15,","user",")",";","}","else","{","ServerUtils",".","killProcessWithSigTerm","(","String",".","valueOf","(","pid",")",")",";","}"],"docstring_tokens":["Kill","a","given","process"],"prompt_tokens":[]}
{"code_tokens":["private","void","forceKill","(","long","pid,","String","user",")","throws","IOException","{","if","(","runAsUser",")","{","signal","(","pid,","9,","user",")",";","}","else","{","ServerUtils",".","forceKillProcess","(","String",".","valueOf","(","pid",")",")",";","}"],"docstring_tokens":["Kill","a","given","process","forcefully"],"prompt_tokens":[]}
{"code_tokens":["public","static","RedisCommandsInstanceContainer","build","(","JedisPoolConfig","config",")","{","JedisPool","jedisPool","=\n","new","JedisPool","(","DEFAULT_POOL_CONFIG,","config",".","getHost","(",")",",","config",".","getPort","(",")",",","config",".","getTimeout","(",")",",","config",".","getPassword","(",")",",\n","config",".","getDatabase","(",")",")",";","return","new","RedisContainer","(","jedisPool",")",";"],"docstring_tokens":["Builds","container","for","single","Redis","environment"],"prompt_tokens":[]}
{"code_tokens":["public","static","RedisCommandsInstanceContainer","build","(","JedisClusterConfig","config",")","{","JedisCluster","jedisCluster","=\n","new","JedisCluster","(","config",".","getNodes","(",")",",","config",".","getTimeout","(",")",",","config",".","getMaxRedirections","(",")",",","DEFAULT_POOL_CONFIG",")",";","return","new","RedisClusterContainer","(","jedisCluster",")",";"],"docstring_tokens":["Builds","container","for","Redis","Cluster","environment"],"prompt_tokens":[]}
{"code_tokens":["public","DockerRunCommand","setPrivileged","(",")","{","super",".","addCommandArguments","(","\"--privileged\"",")",";","return","this",";"],"docstring_tokens":["Set","--privileged","option","to","run","a","privileged","container"],"prompt_tokens":[]}
{"code_tokens":["public","static","byte[]","getId","(","List<Object>","keys",")","{","ByteArrayOutputStream","bos","=","new","ByteArrayOutputStream","(",")",";","try","{","for","(","Object","key",":","keys",")","{","bos",".","write","(","String",".","valueOf","(","key",")",".","getBytes","(",")",")",";","}","bos",".","close","(",")",";","}","catch","(","IOException","e",")","{","throw","new","RuntimeException","(","\"IOException","creating","Mongo","document","_id",".","\",","e",")",";","}","return","bos",".","toByteArray","(",")",";"],"docstring_tokens":["Create","Mongo","_id","based","on","input","keys"],"prompt_tokens":[]}
{"code_tokens":["String","getMetdataString","(",")","{","if","(","this",".","value",".","length","<","MIN_METADATA_VALUE_SIZE",")","{","throw","new","RuntimeException","(","\"RocksDB","value","is","too","small","to","be","a","metadata","string!\"",")",";","}","return","new","String","(","this",".","value,","9,","this",".","value",".","length","-","9",")",";"],"docstring_tokens":["Get","the","metadata","string","portion","of","the","value"],"prompt_tokens":[]}
{"code_tokens":["void","populateMetric","(","Metric","metric",")","{","ByteBuffer","bb","=","ByteBuffer",".","wrap","(","this",".","value,","0,","METRIC_VALUE_SIZE",")",";","bb",".","get","(",")",";","//","version\n","metric",".","setValue","(","bb",".","getDouble","(",")",")",";","metric",".","setCount","(","bb",".","getLong","(",")",")",";","metric",".","setMin","(","bb",".","getDouble","(",")",")",";","metric",".","setMax","(","bb",".","getDouble","(",")",")",";","metric",".","setSum","(","bb",".","getDouble","(",")",")",";"],"docstring_tokens":["populate","metric","values","from","the","raw","data"],"prompt_tokens":[]}
{"code_tokens":["public","long","getUsedMemoryMb","(","String","topologyId",")","{","return","usedMemory\n",".","values","(",")",".","stream","(",")",".","filter","(","(","topoAndMem",")","->","topologyId",".","equals","(","topoAndMem",".","topoId",")",")",".","mapToLong","(","(","topoAndMem",")","->","topoAndMem",".","memory",")",".","sum","(",")",";"],"docstring_tokens":["Gets","the","memory","used","by","the","given","topology","across","all","ports","on","this","supervisor"],"prompt_tokens":[]}
{"code_tokens":["public","long","getReservedMemoryMb","(","String","topologyId",")","{","return","reservedMemory\n",".","values","(",")",".","stream","(",")",".","filter","(","(","topoAndMem",")","->","topologyId",".","equals","(","topoAndMem",".","topoId",")",")",".","mapToLong","(","(","topoAndMem",")","->","topoAndMem",".","memory",")",".","sum","(",")",";"],"docstring_tokens":["Gets","the","memory","reserved","by","the","given","topology","across","all","ports","on","this","supervisor"],"prompt_tokens":[]}
{"code_tokens":["public","long","getAssignedWorkerCount","(","String","topologyId",")","{","return","usedMemory\n",".","values","(",")",".","stream","(",")",".","filter","(","(","topoAndMem",")","->","topologyId",".","equals","(","topoAndMem",".","topoId",")",")",".","count","(",")",";"],"docstring_tokens":["Gets","the","number","of","worker","ports","assigned","to","the","given","topology","id","on","this","supervisor"],"prompt_tokens":[]}
{"code_tokens":["public","void","remove","(","int","port",")","{","usedMemory",".","remove","(","port",")",";","reservedMemory",".","remove","(","port",")",";"],"docstring_tokens":["Clears","the","topology","assignment","and","tracked","memory","for","the","given","port"],"prompt_tokens":[]}
{"code_tokens":["public","void","setName","(","String","name,","boolean","override",")","{","if","(","this",".","name","==","null","||","override",")","{","this",".","name","=","name",";","}","else","{","LOG",".","warn","(","\"Ignoring","attempt","to","set","property","'name'","with","override","==","false",".","\"",")",";","}"],"docstring_tokens":["Sets","the","name","of","the","topology"],"prompt_tokens":[]}
{"code_tokens":["public","boolean","validate","(",")","{","boolean","hasSpouts","=","this",".","spoutMap","!=","null","&&","this",".","spoutMap",".","size","(",")",">","0",";","boolean","hasBolts","=","this",".","boltMap","!=","null","&&","this",".","boltMap",".","size","(",")",">","0",";","boolean","hasStreams","=","this",".","streams","!=","null","&&","this",".","streams",".","size","(",")",">","0",";","//","you","cant","define","a","topologySource","and","a","DSL","topology","at","the","same","time",".",".",".","if","(","!isDslTopology","(",")","&&","(","(","hasSpouts","||","hasBolts","||","hasStreams",")",")",")","{","return","false",";","}","if","(","isDslTopology","(",")","&&","(","hasSpouts","&&","hasBolts","&&","hasStreams",")",")","{","return","true",";","}","return","true",";"],"docstring_tokens":["Determines","is","this","represents","a","valid","Topology"],"prompt_tokens":[]}
{"code_tokens":["@Override\n","public","void","start","(","Map<String,","Object>","topoConf,","WorkerTopologyContext","context",")","{","//","NOOP\n"],"docstring_tokens":["This","method","is","called","when","a","worker","is","started"],"prompt_tokens":[]}
{"code_tokens":["@Override\n","public","void","shutdown","(",")","{","//","NOOP\n"],"docstring_tokens":["This","method","is","called","right","before","a","worker","shuts","down"],"prompt_tokens":[]}
{"code_tokens":["@Override\n","public","TTransport","connect","(","TTransport","transport,","String","serverHost,","String","asUser",")","throws","TTransportException","{","int","maxBufferSize","=","type",".","getMaxBufferSize","(","topoConf",")",";","//create","a","framed","transport\n","TTransport","conn","=","new","TFramedTransport","(","transport,","maxBufferSize",")",";","\n\n","//connect\n","conn",".","open","(",")",";","LOG",".","debug","(","\"Simple","client","transport","has","been","established\"",")",";","\n\n","return","conn",";"],"docstring_tokens":["Connect","to","the","specified","server","via","framed","transport"],"prompt_tokens":[]}
{"code_tokens":["public","static","void","main","(","String[]","args",")","throws","Exception","{","Options","options","=","new","Options","(",")",";","options",".","addOption","(","Option",".","builder","(","\"h\"",")",".","longOpt","(","\"help\"",")",".","desc","(","\"Print","a","help","message\"",")",".","build","(",")",")",";","CommandLineParser","parser","=","new","DefaultParser","(",")",";","CommandLine","cmd","=","null",";","boolean","printHelp","=","false",";","try","{","cmd","=","parser",".","parse","(","options,","args",")",";","}","catch","(","ParseException","e",")","{","System",".","err",".","println","(","\"ERROR","\"","+","e",".","getMessage","(",")",")",";","printHelp","=","true",";","}","if","(","printHelp","||","cmd",".","hasOption","(","'h'",")",")","{","new","HelpFormatter","(",")",".","printHelp","(","\"EstimateThroughput","[options]","[topologyName]*\",","options",")",";","return",";","}","\n\n","Config","conf","=","new","Config","(",")",";","int","exitStatus","=","-1",";","\n\n","List<TopologyLoadConf>","regular","=","new","ArrayList<>","(",")",";","List<TopologyLoadConf>","trident","=","new","ArrayList<>","(",")",";","\n\n","try","(","NimbusClient","nc","=","NimbusClient",".","getConfiguredClient","(","conf",")",")","{","Nimbus",".","Iface","client","=","nc",".","getClient","(",")",";","List<String>","topologyNames","=","cmd",".","getArgList","(",")",";","\n\n","for","(","TopologySummary","topologySummary:","client",".","getTopologySummaries","(",")",")","{","if","(","topologyNames",".","isEmpty","(",")","||","topologyNames",".","contains","(","topologySummary",".","get_name","(",")",")",")","{","TopologyLoadConf","capturedConf","=","CaptureLoad",".","captureTopology","(","client,","topologySummary",")",";","if","(","capturedConf",".","looksLikeTrident","(",")",")","{","trident",".","add","(","capturedConf",")",";","}","else","{","regular",".","add","(","capturedConf",")",";","}","}","}","\n\n","System",".","out",".","println","(","\"TOPOLOGY\\tTOTAL","MESSAGES/sec\\tESTIMATED","INPUT","MESSAGES/sec\"",")",";","for","(","TopologyLoadConf","tl:","regular",")","{","System",".","out",".","println","(","tl",".","name","+","\"\\t\"","+","tl",".","getAllEmittedAggregate","(",")","+","\"\\t\"","+","tl",".","getSpoutEmittedAggregate","(",")",")",";","}","for","(","TopologyLoadConf","tl:","trident",")","{","System",".","out",".","println","(","tl",".","name","+","\"\\t\"","+","tl",".","getAllEmittedAggregate","(",")","+","\"\\t\"","+","tl",".","getTridentEstimatedEmittedAggregate","(",")",")",";","}","exitStatus","=","0",";","}","catch","(","Exception","e",")","{","LOG",".","error","(","\"Error","trying","to","capture","topologies",".",".",".","\",","e",")",";","}","finally","{","System",".","exit","(","exitStatus",")",";","}"],"docstring_tokens":["Main","entry","point","for","estimate","throughput","command"],"prompt_tokens":[]}
{"code_tokens":["public","Collection<String>","getFreeSlotsId","(",")","{","if","(","!isAlive",")","{","return","new","HashSet<>","(",")",";","}","Set<String>","ret","=","new","HashSet<>","(","slots",".","keySet","(",")",")",";","ret",".","removeAll","(","getUsedSlotsId","(",")",")",";","return","ret",";"],"docstring_tokens":["Get","the","IDs","of","all","free","slots","on","this","node"],"prompt_tokens":[]}
{"code_tokens":["public","void","freeAllSlots","(",")","{","if","(","!isAlive",")","{","LOG",".","warn","(","\"Freeing","all","slots","on","a","dead","node","{","}","\",","nodeId",")",";","}","cluster",".","freeSlots","(","slots",".","values","(",")",")",";","//clearing","assignments\n","topIdToUsedSlots",".","clear","(",")",";"],"docstring_tokens":["Free","all","slots","on","this","node"],"prompt_tokens":[]}
{"code_tokens":["public","void","free","(","WorkerSlot","ws",")","{","LOG",".","debug","(","\"freeing","WorkerSlot","{","}","on","node","{","}","\",","ws,","hostname",")",";","if","(","!slots",".","containsKey","(","ws",".","getId","(",")",")",")","{","throw","new","IllegalArgumentException","(","\"Tried","to","free","a","slot","\"","+","ws","+","\"","that","was","not\"","+","\"","part","of","this","node","\"","+","nodeId",")",";","}","\n\n","TopologyDetails","topo","=","findTopologyUsingWorker","(","ws",")",";","if","(","topo","==","null",")","{","throw","new","IllegalArgumentException","(","\"Tried","to","free","a","slot","\"","+","ws","+","\"","that","was","already","free!\"",")",";","}","\n\n","//free","slot\n","cluster",".","freeSlot","(","ws",")",";","//cleanup","internal","assignments\n","topIdToUsedSlots",".","get","(","topo",".","getId","(",")",")",".","remove","(","ws",".","getId","(",")",")",";"],"docstring_tokens":["Frees","a","single","slot","in","this","node"],"prompt_tokens":[]}
{"code_tokens":["public","void","assign","(","WorkerSlot","target,","TopologyDetails","td,","Collection<ExecutorDetails>","executors",")","{","if","(","!isAlive",")","{","throw","new","IllegalStateException","(","\"Trying","to","adding","to","a","dead","node","\"","+","nodeId",")",";","}","Collection<WorkerSlot>","freeSlots","=","getFreeSlots","(",")",";","if","(","freeSlots",".","isEmpty","(",")",")","{","throw","new","IllegalStateException","(","\"Trying","to","assign","to","a","full","node","\"","+","nodeId",")",";","}","if","(","executors",".","size","(",")","==","0",")","{","LOG",".","warn","(","\"Trying","to","assign","nothing","from","\"","+","td",".","getId","(",")","+","\"","to","\"","+","nodeId","+","\"","(","Ignored",")","\"",")",";","}","if","(","target","==","null",")","{","target","=","getFreeSlots","(",")",".","iterator","(",")",".","next","(",")",";","}","if","(","!freeSlots",".","contains","(","target",")",")","{","throw","new","IllegalStateException","(","\"Trying","to","assign","already","used","slot","\"","+","target",".","getPort","(",")","+","\"","on","node","\"","+","nodeId",")",";","}","LOG",".","debug","(","\"target","slot:","{","}","\",","target",")",";","\n\n","cluster",".","assign","(","target,","td",".","getId","(",")",",","executors",")",";","\n\n","//assigning","internally\n","topIdToUsedSlots",".","computeIfAbsent","(","td",".","getId","(",")",",","(","tid",")","->","new","HashMap<>","(",")",")",".","computeIfAbsent","(","target",".","getId","(",")",",","(","tid",")","->","new","LinkedList<>","(",")",")",".","addAll","(","executors",")",";"],"docstring_tokens":["Assigns","a","worker","to","a","node"],"prompt_tokens":[]}
{"code_tokens":["public","boolean","wouldFit","(","WorkerSlot","ws,","ExecutorDetails","exec,","TopologyDetails","td",")","{","assert","nodeId",".","equals","(","ws",".","getNodeId","(",")",")",":","\"Slot","\"","+","ws","+","\"","is","not","a","part","of","this","node","\"","+","nodeId",";","if","(","!isAlive","||","!cluster",".","wouldFit","(","ws,\n","exec,\n","td,\n","getTotalAvailableResources","(",")",",\n","td",".","getTopologyWorkerMaxHeapSize","(",")",")",")","{","return","false",";","}","\n\n","boolean","oneExecutorPerWorker","=","(","Boolean",")","td",".","getConf","(",")",".","get","(","Config",".","TOPOLOGY_RAS_ONE_EXECUTOR_PER_WORKER",")",";","boolean","oneComponentPerWorker","=","(","Boolean",")","td",".","getConf","(",")",".","get","(","Config",".","TOPOLOGY_RAS_ONE_COMPONENT_PER_WORKER",")",";","\n\n","if","(","oneExecutorPerWorker",")","{","return","!getUsedSlots","(","td",".","getId","(",")",")",".","contains","(","ws",")",";","}","\n\n","if","(","oneComponentPerWorker",")","{","Set<String>","components","=","new","HashSet<>","(",")",";","Map<String,","Collection<ExecutorDetails>>","topologyExecutors","=","topIdToUsedSlots",".","get","(","td",".","getId","(",")",")",";","if","(","topologyExecutors","!=","null",")","{","Collection<ExecutorDetails>","slotExecs","=","topologyExecutors",".","get","(","ws",".","getId","(",")",")",";","if","(","slotExecs","!=","null",")","{","//","components","from","WorkerSlot\n","for","(","ExecutorDetails","slotExec",":","slotExecs",")","{","components",".","add","(","td",".","getComponentFromExecutor","(","slotExec",")",")",";","}","//","component","from","exec\n","components",".","add","(","td",".","getComponentFromExecutor","(","exec",")",")",";","}","}","return","components",".","size","(",")","<=","1",";","}","\n\n","return","true",";"],"docstring_tokens":["Would","scheduling","exec","in","ws","fit","with","the","current","resource","constraints"],"prompt_tokens":[]}
{"code_tokens":["public","boolean","couldEverFit","(","ExecutorDetails","exec,","TopologyDetails","td",")","{","if","(","!isAlive",")","{","return","false",";","}","NormalizedResourceOffer","avail","=","getTotalAvailableResources","(",")",";","NormalizedResourceRequest","requestedResources","=","td",".","getTotalResources","(","exec",")",";","return","avail",".","couldFit","(","cluster",".","getMinWorkerCpu","(",")",",","requestedResources",")",";"],"docstring_tokens":["Is","there","any","possibility","that","exec","could","ever","fit","on","this","node"],"prompt_tokens":[]}
{"code_tokens":["public","NormalizedResourceOffer","getTotalResources","(",")","{","if","(","sup","!=","null",")","{","return","sup",".","getTotalResources","(",")",";","}","else","{","return","new","NormalizedResourceOffer","(",")",";","}"],"docstring_tokens":["Gets","total","resources","for","this","node"],"prompt_tokens":[]}
{"code_tokens":["public","NormalizedResourceOffer","getTotalAvailableResources","(",")","{","if","(","sup","!=","null",")","{","NormalizedResourceOffer","availableResources","=","new","NormalizedResourceOffer","(","sup",".","getTotalResources","(",")",")",";","if","(","availableResources",".","remove","(","cluster",".","getAllScheduledResourcesForNode","(","sup",".","getId","(",")",")",",","cluster",".","getResourceMetrics","(",")",")",")","{","if","(","!loggedUnderageUsage",")","{","LOG",".","error","(","\"Resources","on","{","}","became","negative","and","was","clamped","to","0","{","}",".","\",","hostname,","availableResources",")",";","loggedUnderageUsage","=","true",";","}","}","return","availableResources",";","}","else","{","return","new","NormalizedResourceOffer","(",")",";","}"],"docstring_tokens":["Gets","all","available","resources","for","this","node"],"prompt_tokens":[]}
{"code_tokens":["public","double","getTotalMemoryResources","(",")","{","if","(","sup","!=","null",")","{","return","sup",".","getTotalMemory","(",")",";","}","else","{","return","0",".","0",";","}"],"docstring_tokens":["Gets","the","total","memory","resources","for","this","node"],"prompt_tokens":[]}
{"code_tokens":["public","double","getTotalCpuResources","(",")","{","if","(","sup","!=","null",")","{","return","sup",".","getTotalCpu","(",")",";","}","else","{","return","0",".","0",";","}"],"docstring_tokens":["Gets","the","total","cpu","resources","for","this","node"],"prompt_tokens":[]}
{"code_tokens":["public","Set<LocallyCachedBlob>","cleanup","(","ClientBlobStore","store",")","{","Set<LocallyCachedBlob>","deleted","=","new","HashSet<>","(",")",";","LOG",".","debug","(","\"cleanup","target","size:","{","}","current","size","is:","{","}","\",","targetSize,","currentSize",")",";","long","bytesOver","=","currentSize","-","targetSize",";","//First","delete","everything","that","no","longer","exists",".",".",".","for","(","Iterator<Map",".","Entry<LocallyCachedBlob,","Map<String,","?","extends","LocallyCachedBlob>>>","i","=","noReferences",".","entrySet","(",")",".","iterator","(",")",";","i",".","hasNext","(",")",";",")","{","Map",".","Entry<LocallyCachedBlob,","Map<String,","?","extends","LocallyCachedBlob>>","rsrc","=","i",".","next","(",")",";","LocallyCachedBlob","resource","=","rsrc",".","getKey","(",")",";","try","{","if","(","!store",".","isRemoteBlobExists","(","resource",".","getKey","(",")",")",")","{","//The","key","was","removed","so","we","should","delete","it","too",".","Map<String,","?","extends","LocallyCachedBlob>","set","=","rsrc",".","getValue","(",")",";","if","(","removeBlob","(","resource,","set",")",")","{","bytesOver","-=","resource",".","getSizeOnDisk","(",")",";","LOG",".","info","(","\"Deleted","blob:","{","}","(","REMOVED","FROM","CLUSTER",")",".","\",","resource",".","getKey","(",")",")",";","deleted",".","add","(","resource",")",";","i",".","remove","(",")",";","}","}","}","catch","(","AuthorizationException","e",")","{","//Ignored\n","}","}","\n\n","for","(","Iterator<Map",".","Entry<LocallyCachedBlob,","Map<String,","?","extends","LocallyCachedBlob>>>","i","=","noReferences",".","entrySet","(",")",".","iterator","(",")",";","bytesOver",">","0","&&","i",".","hasNext","(",")",";",")","{","Map",".","Entry<LocallyCachedBlob,","Map<String,","?","extends","LocallyCachedBlob>>","rsrc","=","i",".","next","(",")",";","LocallyCachedBlob","resource","=","rsrc",".","getKey","(",")",";","Map<String,","?","extends","LocallyCachedBlob>","set","=","rsrc",".","getValue","(",")",";","if","(","removeBlob","(","resource,","set",")",")","{","bytesOver","-=","resource",".","getSizeOnDisk","(",")",";","LOG",".","info","(","\"Deleted","blob:","{","}","(","OVER","SIZE","LIMIT",")",".","\",","resource",".","getKey","(",")",")",";","deleted",".","add","(","resource",")",";","i",".","remove","(",")",";","}","}","return","deleted",";"],"docstring_tokens":["Actually","cleanup","the","blobs","to","try","and","get","below","the","target","cache","size"],"prompt_tokens":[]}
{"code_tokens":["public","static","void","main","(","String[]","args",")","throws","Exception","{","Options","options","=","new","Options","(",")",";","\n\n","options",".","addOption","(","option","(","0,","\"h\",","OPTION_HELP,","\"Print","this","help","message\"",")",")",";","\n\n","options",".","addOption","(","option","(","0,","\"l\",","OPTION_LOCAL,","\"Ignored:","to","run","in","local","mode","use","`storm","local`\"\n","+","\"","instead","of","`storm","jar`\"",")",")",";","\n\n","options",".","addOption","(","option","(","0,","\"r\",","OPTION_REMOTE,","\"Ignored:","to","run","on","a","remote","cluster","launch\"\n","+","\"","using","`storm","jar`","to","run","in","a","local","cluster","use","`storm","local`\"",")",")",";","\n\n","options",".","addOption","(","option","(","0,","\"R\",","OPTION_RESOURCE,","\"Treat","the","supplied","path","as","a","classpath","resource","instead","of","a","file",".","\"",")",")",";","\n\n","options",".","addOption","(","option","(","1,","\"s\",","OPTION_SLEEP,","\"ms\",","\"Ignored:","to","set","cluster","run","time\"\n","+","\"","use","`--local-ttl`","with","`storm","local`","instead",".","\"",")",")",";","\n\n","options",".","addOption","(","option","(","0,","\"d\",","OPTION_DRY_RUN,","\"Do","not","run","or","deploy","the","topology",".","Just","build,","validate,","\"\n","+","\"and","print","information","about","the","topology",".","\"",")",")",";","\n\n","options",".","addOption","(","option","(","0,","\"q\",","OPTION_NO_DETAIL,","\"Suppress","the","printing","of","topology","details",".","\"",")",")",";","\n\n","options",".","addOption","(","option","(","0,","\"n\",","OPTION_NO_SPLASH,","\"Suppress","the","printing","of","the","splash","screen",".","\"",")",")",";","\n\n","options",".","addOption","(","option","(","0,","\"i\",","OPTION_INACTIVE,","\"Deploy","the","topology,","but","do","not","activate","it",".","\"",")",")",";","\n\n","options",".","addOption","(","option","(","1,","\"z\",","OPTION_ZOOKEEPER,","\"host:port\",","\"Ignored,","if","you","want","to\"\n","+","\"","set","the","zookeeper","host/port","in","local","mode","use","`--local-zookeeper`","instead\"",")",")",";","\n\n","options",".","addOption","(","option","(","1,","\"f\",","OPTION_FILTER,","\"file\",","\"Perform","property","substitution",".","Use","the","specified","file","\"\n","+","\"as","a","source","of","properties,","and","replace","keys","identified","with","{","$[property","name]","}","with","the","value","defined","\"\n","+","\"in","the","properties","file",".","\"",")",")",";","\n\n","options",".","addOption","(","option","(","0,","\"e\",","OPTION_ENV_FILTER,","\"Perform","environment","variable","substitution",".","Replace","keys\"\n","+","\"","identified","with","`$","{","ENV-[NAME]","}","`","will","be","replaced","with","the","corresponding","`NAME`","environment","value\"",")",")",";","\n\n","CommandLineParser","parser","=","new","BasicParser","(",")",";","CommandLine","cmd","=","parser",".","parse","(","options,","args",")",";","\n\n","if","(","cmd",".","getArgs","(",")",".","length","!=","1","||","cmd",".","hasOption","(","OPTION_HELP",")",")","{","usage","(","options",")",";","System",".","exit","(","1",")",";","}","runCli","(","cmd",")",";"],"docstring_tokens":["Flux","main","entry","point"],"prompt_tokens":[]}
{"code_tokens":["public","ExecutorDetails","currentExec","(",")","{","return","execs",".","get","(","execIndex",")",";"],"docstring_tokens":["Get","the","current","unassigned","executor"],"prompt_tokens":[]}
{"code_tokens":["@VisibleForTesting\n","public","void","addEmptyTopoForTests","(","String","topoId",")","{","cache",".","put","(","topoId,","new","ConcurrentHashMap<>","(",")",")",";"],"docstring_tokens":["Add","an","empty","topology","to","the","cache","for","testing","purposes"],"prompt_tokens":[]}
{"code_tokens":["@VisibleForTesting\n","public","int","getNumToposCached","(",")","{","return","cache",".","size","(",")",";"],"docstring_tokens":["Get","the","number","of","topologies","with","cached","heartbeats"],"prompt_tokens":[]}
{"code_tokens":["@VisibleForTesting\n","public","Set<String>","getTopologyIds","(",")","{","return","cache",".","keySet","(",")",";"],"docstring_tokens":["Get","the","topology","ids","with","cached","heartbeats"],"prompt_tokens":[]}
{"code_tokens":["public","void","removeTopo","(","String","topoId",")","{","cache",".","remove","(","topoId",")",";"],"docstring_tokens":["Remove","a","specific","topology","from","the","cache"],"prompt_tokens":[]}
{"code_tokens":["public","void","updateFromZkHeartbeat","(","String","topoId,","Map<List<Integer>,","Map<String,","Object>>","executorBeats,\n","Set<List<Integer>>","allExecutors,","Integer","timeout",")","{","Map<List<Integer>,","ExecutorCache>","topoCache","=","cache",".","computeIfAbsent","(","topoId,","MAKE_MAP",")",";","if","(","executorBeats","==","null",")","{","executorBeats","=","new","HashMap<>","(",")",";","}","\n\n","for","(","List<Integer>","executor",":","allExecutors",")","{","final","Map<String,","Object>","newBeat","=","executorBeats",".","get","(","executor",")",";","ExecutorCache","currBeat","=","topoCache",".","computeIfAbsent","(","executor,","(","k",")","->","new","ExecutorCache","(","newBeat",")",")",";","currBeat",".","updateFromHb","(","timeout,","newBeat",")",";","}"],"docstring_tokens":["Update","the","cache","with","heartbeats","from","a","worker","through","zookeeper"],"prompt_tokens":[]}
{"code_tokens":["public","void","updateHeartbeat","(","SupervisorWorkerHeartbeat","workerHeartbeat,","Integer","taskTimeoutSecs",")","{","Map<List<Integer>,","Map<String,","Object>>","executorBeats","=","StatsUtil",".","convertWorkerBeats","(","workerHeartbeat",")",";","String","topoId","=","workerHeartbeat",".","get_storm_id","(",")",";","Map<List<Integer>,","ExecutorCache>","topoCache","=","cache",".","computeIfAbsent","(","topoId,","MAKE_MAP",")",";","\n\n","for","(","ExecutorInfo","executorInfo",":","workerHeartbeat",".","get_executors","(",")",")","{","List<Integer>","executor","=","Arrays",".","asList","(","executorInfo",".","get_task_start","(",")",",","executorInfo",".","get_task_end","(",")",")",";","final","Map<String,","Object>","newBeat","=","executorBeats",".","get","(","executor",")",";","ExecutorCache","currBeat","=","topoCache",".","computeIfAbsent","(","executor,","(","k",")","->","new","ExecutorCache","(","newBeat",")",")",";","currBeat",".","updateFromHb","(","taskTimeoutSecs,","newBeat",")",";","}"],"docstring_tokens":["Update","the","heartbeats","for","a","given","worker"],"prompt_tokens":[]}
{"code_tokens":["public","static","List<Object>","generateTuples","(","Message","msg,","Scheme","scheme",")","{","List<Object>","tup",";","String","rawKey","=","msg",".","getKeys","(",")",";","ByteBuffer","body","=","ByteBuffer",".","wrap","(","msg",".","getBody","(",")",")",";","if","(","rawKey","!=","null","&&","scheme","instanceof","KeyValueScheme",")","{","ByteBuffer","key","=","ByteBuffer",".","wrap","(","rawKey",".","getBytes","(","StandardCharsets",".","UTF_8",")",")",";","tup","=","(","(","KeyValueScheme",")","scheme",")",".","deserializeKeyAndValue","(","key,","body",")",";","}","else","{","tup","=","scheme",".","deserialize","(","body",")",";","}","return","tup",";"],"docstring_tokens":["Generate","Storm","tuple","values","by","Message","and","Scheme"],"prompt_tokens":[]}
{"code_tokens":["public","static","void","populateTopicData","(","KafkaUnit","kafkaUnit,","String","topicName,","int","msgCount",")","throws","Exception","{","kafkaUnit",".","createTopic","(","topicName",")",";","for","(","int","i","=","0",";","i","<","msgCount",";","i++",")","{","ProducerRecord<String,","String>","producerRecord","=","new","ProducerRecord<>","(","topicName,","Integer",".","toString","(","i",")",",\n","Integer",".","toString","(","i",")",")",";","kafkaUnit",".","sendMessage","(","producerRecord",")",";","}"],"docstring_tokens":["Using","the","given","KafkaUnit","instance,","put","some","messages","in","the","specified","topic"],"prompt_tokens":[]}
{"code_tokens":["public","final","AtomicOutputStream","createBlob","(","String","key,","SettableBlobMeta","meta",")","throws","AuthorizationException,","KeyAlreadyExistsException","{","if","(","meta","!=","null","&&","meta",".","is_set_acl","(",")",")","{","BlobStoreAclHandler",".","validateSettableACLs","(","key,","meta",".","get_acl","(",")",")",";","}","return","createBlobToExtend","(","key,","meta",")",";"],"docstring_tokens":["Client","facing","API","to","create","a","blob"],"prompt_tokens":[]}
{"code_tokens":["public","final","void","setBlobMeta","(","String","key,","SettableBlobMeta","meta",")","throws","AuthorizationException,","KeyNotFoundException","{","if","(","meta","!=","null","&&","meta",".","is_set_acl","(",")",")","{","BlobStoreAclHandler",".","validateSettableACLs","(","key,","meta",".","get_acl","(",")",")",";","}","setBlobMetaToExtend","(","key,","meta",")",";"],"docstring_tokens":["Client","facing","API","to","set","the","metadata","for","a","blob"],"prompt_tokens":[]}
{"code_tokens":["public","void","execute","(","final","K","key,","Runnable","r",")","{","Runnable","old","=","latest",".","put","(","key,","r",")",";","if","(","old","==","null",")","{","//It","was","not","there","before","so","we","need","to","run","it",".","exec",".","execute","(","(",")","->","{","Runnable","run","=","latest",".","remove","(","key",")",";","if","(","run","!=","null",")","{","run",".","run","(",")",";","}","}",")",";","}","else","{","LOG",".","debug","(","\"Replacing","runnable","for","{","}","-","{","}","\",","key,","r",")",";","}"],"docstring_tokens":["Run","something","in","the","future,","but","replace","it","with","the","latest","if","it","is","taking","too","long"],"prompt_tokens":[]}
{"code_tokens":["public","static","void","skipFully","(","DataInput","in,","int","len",")","throws","IOException","{","int","total","=","0",";","int","cur","=","0",";","\n\n","while","(","(","total","<","len",")","&&","(","(","cur","=","in",".","skipBytes","(","len","-","total",")",")",">","0",")",")","{","total","+=","cur",";","}","\n\n","if","(","total","<","len",")","{","throw","new","IOException","(","\"Not","able","to","skip","\"\n","+","len\n","+","\"","bytes,","possibly","\"\n","+","\"due","to","end","of","input",".","\"",")",";","}"],"docstring_tokens":["Skip","len","number","of","bytes","in","input","streamin"],"prompt_tokens":[]}
{"code_tokens":["int","getMetadataStringId","(",")","{","if","(","this",".","getType","(",")",".","getValue","(",")","<","KeyType",".","METADATA_STRING_END",".","getValue","(",")",")","{","return","ByteBuffer",".","wrap","(","key,","2,","4",")",".","getInt","(",")",";","}","else","{","throw","new","RuntimeException","(","\"Cannot","fetch","metadata","string","for","key","of","type","\"","+","this",".","getType","(",")",")",";","}"],"docstring_tokens":["get","the","metadata","string","Id","portion","of","the","key","for","metadata","keys"],"prompt_tokens":[]}
{"code_tokens":["@Override\n","public","int","compareTo","(","RocksDbKey","o",")","{","return","UnsignedBytes",".","lexicographicalComparator","(",")",".","compare","(","this",".","getRaw","(",")",",","o",".","getRaw","(",")",")",";"],"docstring_tokens":["compares","to","keys","on","a","byte","by","byte","basis"],"prompt_tokens":[]}
{"code_tokens":["public","static","void","main","(","String[]","args",")","throws","Exception","{","if","(","args",".","length","==","0",")","{","throw","new","IllegalArgumentException","(","\"Topology","name","must","be","provided",".","\"",")",";","}","\n\n","final","String","name","=","args[0]",";","\n\n","NimbusClient",".","withConfiguredClient","(","new","NimbusClient",".","WithNimbus","(",")","{","@Override\n","public","void","run","(","Nimbus",".","Iface","client",")","throws","Exception","{","GetInfoOptions","opts","=","new","GetInfoOptions","(",")",";","opts",".","set_num_err_choice","(","NumErrorsChoice",".","ONE",")",";","Map<String,","Object>","outputMap","=","new","HashMap<>","(",")",";","try","{","TopologyInfo","topologyInfo","=","client",".","getTopologyInfoByNameWithOpts","(","name,","opts",")",";","String","topologyName","=","topologyInfo",".","get_name","(",")",";","Map<String,","List<ErrorInfo>>","topologyErrors","=","topologyInfo",".","get_errors","(",")",";","outputMap",".","put","(","\"Topology","Name\",","topologyName",")",";","outputMap",".","put","(","\"Comp-Errors\",","getComponentErrors","(","topologyErrors",")",")",";","}","catch","(","NotAliveException","notAliveException",")","{","outputMap",".","put","(","\"Failure\",","\"No","topologies","running","with","name","\"","+","name",")",";","}","System",".","out",".","println","(","JSONValue",".","toJSONString","(","outputMap",")",")",";","}","\n\n","private","Map<String,","String>","getComponentErrors","(","Map<String,","List<ErrorInfo>>","topologyErrors",")","{","Map<String,","String>","componentErrorMap","=","new","HashMap<>","(",")",";","for","(","Map",".","Entry<String,","List<ErrorInfo>>","compNameToCompErrors",":","topologyErrors",".","entrySet","(",")",")","{","String","compName","=","compNameToCompErrors",".","getKey","(",")",";","List<ErrorInfo>","compErrors","=","compNameToCompErrors",".","getValue","(",")",";","if","(","compErrors","!=","null","&&","!compErrors",".","isEmpty","(",")",")","{","ErrorInfo","latestError","=","compErrors",".","get","(","0",")",";","componentErrorMap",".","put","(","compName,","latestError",".","get_error","(",")",")",";","}","}","\n\n","return","componentErrorMap",";","}","}",")",";"],"docstring_tokens":["Only","get","errors","for","a","topology"],"prompt_tokens":[]}
{"code_tokens":["@Override\n","public","T","addResources","(","Map<String,","Double>","resources",")","{","if","(","resources","!=","null",")","{","Map<String,","Double>","currentResources","=","(","Map<String,","Double>",")","getComponentConfiguration","(",")",".","computeIfAbsent","(","Config",".","TOPOLOGY_COMPONENT_RESOURCES_MAP,","(","k",")","->","new","HashMap<>","(",")",")",";","currentResources",".","putAll","(","resources",")",";","}","return","(","T",")","this",";"],"docstring_tokens":["Add","generic","resources","for","this","component"],"prompt_tokens":[]}
{"code_tokens":["public","ExecutorShutdown","execute","(",")","throws","Exception","{","LOG",".","info","(","\"Loading","executor","tasks","\"","+","componentId","+","\":\"","+","executorId",")",";","\n\n","String","handlerName","=","componentId","+","\"-executor\"","+","executorId",";","Utils",".","SmartThread","handler","=\n","Utils",".","asyncLoop","(","this,","false,","reportErrorDie,","Thread",".","NORM_PRIORITY,","true,","true,","handlerName",")",";","\n\n","LOG",".","info","(","\"Finished","loading","executor","\"","+","componentId","+","\":\"","+","executorId",")",";","return","new","ExecutorShutdown","(","this,","Lists",".","newArrayList","(","handler",")",",","idToTask,","receiveQueue",")",";"],"docstring_tokens":["separated","from","mkExecutor","in","order","to","replace","executor","transfer","in","executor","data","for","testing"],"prompt_tokens":[]}
{"code_tokens":["private","Map<String,","Map<String,","LoadAwareCustomStreamGrouping>>","outboundComponents","(","WorkerTopologyContext","workerTopologyContext,","String","componentId,","Map<String,","Object>","topoConf",")","{","Map<String,","Map<String,","LoadAwareCustomStreamGrouping>>","ret","=","new","HashMap<>","(",")",";","\n\n","Map<String,","Map<String,","Grouping>>","outputGroupings","=","workerTopologyContext",".","getTargets","(","componentId",")",";","for","(","Map",".","Entry<String,","Map<String,","Grouping>>","entry",":","outputGroupings",".","entrySet","(",")",")","{","String","streamId","=","entry",".","getKey","(",")",";","Map<String,","Grouping>","componentGrouping","=","entry",".","getValue","(",")",";","Fields","outFields","=","workerTopologyContext",".","getComponentOutputFields","(","componentId,","streamId",")",";","Map<String,","LoadAwareCustomStreamGrouping>","componentGrouper","=","new","HashMap<String,","LoadAwareCustomStreamGrouping>","(",")",";","for","(","Map",".","Entry<String,","Grouping>","cg",":","componentGrouping",".","entrySet","(",")",")","{","String","component","=","cg",".","getKey","(",")",";","Grouping","grouping","=","cg",".","getValue","(",")",";","List<Integer>","outTasks","=","workerTopologyContext",".","getComponentTasks","(","component",")",";","LoadAwareCustomStreamGrouping","grouper","=","GrouperFactory",".","mkGrouper","(","workerTopologyContext,","componentId,","streamId,","outFields,","grouping,","outTasks,","topoConf",")",";","componentGrouper",".","put","(","component,","grouper",")",";","}","if","(","componentGrouper",".","size","(",")",">","0",")","{","ret",".","put","(","streamId,","componentGrouper",")",";","}","}","\n\n","for","(","String","stream",":","workerTopologyContext",".","getComponentCommon","(","componentId",")",".","get_streams","(",")",".","keySet","(",")",")","{","if","(","!ret",".","containsKey","(","stream",")",")","{","ret",".","put","(","stream,","null",")",";","}","}","\n\n","return","ret",";"],"docstring_tokens":["Returns","map","of","stream","id","to","component","id","to","grouper"],"prompt_tokens":[]}
{"code_tokens":["@Override\n","public","boolean","areAllProcessesDead","(","String","user,","String","workerId",")","throws","IOException","{","boolean","areAllDead","=","isContainerDead","(","workerId,","user",")",";","LOG",".","debug","(","\"WorkerId","{","}",":","Checking","areAllProcessesDead:","{","}","\",","workerId,","areAllDead",")",";","return","areAllDead",";"],"docstring_tokens":["The","container","terminates","if","any","process","inside","the","container","dies"],"prompt_tokens":[]}
{"code_tokens":["@Override\n","public","boolean","runProfilingCommand","(","String","user,","String","workerId,","List<String>","command,","Map<String,","String>","env,\n","String","logPrefix,","File","targetDir",")","throws","IOException,","InterruptedException","{","String","workerDir","=","targetDir",".","getAbsolutePath","(",")",";","\n\n","String","profilingArgs","=","StringUtils",".","join","(","command,","\"","\"",")",";","\n\n","//run","nsenter\n","String","nsenterScriptPath","=","writeToCommandFile","(","workerDir,","profilingArgs,","\"profile\"",")",";","\n\n","Long","containerPid","=","getContainerPid","(","workerId",")",";","if","(","containerPid","==","null",")","{","LOG",".","error","(","\"Couldn't","get","container","PID","for","the","worker","{","}",".","Skip","profiling\",","workerId",")",";","return","false",";","}","\n\n","List<String>","args","=","Arrays",".","asList","(","CmdType",".","PROFILE_OCI_CONTAINER",".","toString","(",")",",","containerPid",".","toString","(",")",",","nsenterScriptPath",")",";","\n\n","int","exitCode","=","ClientSupervisorUtils",".","processLauncherAndWait","(","conf,","user,","args,","env,","logPrefix,","targetDir",")",";","LOG",".","debug","(","\"WorkerId","{","}",":","exitCode","from","{","}",":","{","}","\",","workerId,","CmdType",".","PROFILE_OCI_CONTAINER",".","toString","(",")",",","exitCode",")",";","\n\n","return","exitCode","==","0",";"],"docstring_tokens":["Run","profiling","command","in","the","container"],"prompt_tokens":[]}
{"code_tokens":["public","static","LoadCompConf","fromConf","(","Map<String,","Object>","conf",")","{","String","id","=","(","String",")","conf",".","get","(","\"id\"",")",";","int","parallelism","=","ObjectReader",".","getInt","(","conf",".","get","(","\"parallelism\"",")",",","1",")",";","List<OutputStream>","streams","=","new","ArrayList<>","(",")",";","List<Map<String,","Object>>","streamData","=","(","List<Map<String,","Object>>",")","conf",".","get","(","\"streams\"",")",";","if","(","streamData","!=","null",")","{","for","(","Map<String,","Object>","streamInfo:","streamData",")","{","streams",".","add","(","OutputStream",".","fromConf","(","streamInfo",")",")",";","}","}","double","memoryMb","=","ObjectReader",".","getDouble","(","conf",".","get","(","\"memoryLoad\"",")",",","0",".","0",")",";","double","cpuPercent","=","ObjectReader",".","getDouble","(","conf",".","get","(","\"cpuLoad\"",")",",","0",".","0",")",";","\n\n","SlowExecutorPattern","slp","=","null",";","if","(","conf",".","containsKey","(","\"slowExecutorPattern\"",")",")","{","slp","=","SlowExecutorPattern",".","fromConf","(","(","Map<String,","Object>",")","conf",".","get","(","\"slowExecutorPattern\"",")",")",";","}","return","new","LoadCompConf","(","id,","parallelism,","streams,","memoryMb,","cpuPercent,","slp",")",";"],"docstring_tokens":["Parse","the","LoadCompConf","from","a","config","Map"],"prompt_tokens":[]}
{"code_tokens":["public","LoadCompConf","setParallel","(","int","newParallelism",")","{","//We","need","to","adjust","the","throughput","accordingly","(","so","that","it","stays","the","same","in","aggregate",")","double","throughputAdjustment","=","(","(","double",")","parallelism",")","/","newParallelism",";","return","new","LoadCompConf","(","id,","newParallelism,","streams,","cpuLoad,","memoryLoad,","slp",")",".","scaleThroughput","(","throughputAdjustment",")",";"],"docstring_tokens":["Set","the","parallelism","of","this","component,","and","adjust","the","throughput","so","in","aggregate","it","stays","the","same"],"prompt_tokens":[]}
{"code_tokens":["public","boolean","isDistributed","(",")","{","return","distributed",";"],"docstring_tokens":["Returns","if","the","spout","is","distributed"],"prompt_tokens":[]}
{"code_tokens":["public","static","Map<List<Integer>,","ExecutorStats>","mkEmptyExecutorZkHbs","(","Set<List<Long>>","executors",")","{","Map<List<Integer>,","ExecutorStats>","ret","=","new","HashMap<>","(",")",";","for","(","Object","executor",":","executors",")","{","List","startEnd","=","(","List",")","executor",";","ret",".","put","(","convertExecutor","(","startEnd",")",",","null",")",";","}","return","ret",";"],"docstring_tokens":["Make","an","map","of","executors","to","empty","stats,","in","preparation","for","doing","a","heartbeat"],"prompt_tokens":[]}
{"code_tokens":["public","static","<K1,","K2>","Map","windowSetConverter","(","Map","stats,","KeyTransformer<K2>","secKeyFunc,","KeyTransformer<K1>","firstKeyFunc",")","{","Map","ret","=","new","HashMap","(",")",";","\n\n","for","(","Object","o",":","stats",".","entrySet","(",")",")","{","Map",".","Entry","entry","=","(","Map",".","Entry",")","o",";","K1","key1","=","firstKeyFunc",".","transform","(","entry",".","getKey","(",")",")",";","\n\n","Map","subRetMap","=","(","Map",")","ret",".","get","(","key1",")",";","if","(","subRetMap","==","null",")","{","subRetMap","=","new","HashMap","(",")",";","}","ret",".","put","(","key1,","subRetMap",")",";","\n\n","Map","value","=","(","Map",")","entry",".","getValue","(",")",";","for","(","Object","oo",":","value",".","entrySet","(",")",")","{","Map",".","Entry","subEntry","=","(","Map",".","Entry",")","oo",";","K2","key2","=","secKeyFunc",".","transform","(","subEntry",".","getKey","(",")",")",";","subRetMap",".","put","(","key2,","subEntry",".","getValue","(",")",")",";","}","}","return","ret",";"],"docstring_tokens":["Converts","stats","to","be","over","given","windows","of","time"],"prompt_tokens":[]}
{"code_tokens":["public","Stream<Tuple>","newStream","(","IRichSpout","spout,","int","parallelism",")","{","SpoutNode","spoutNode","=","new","SpoutNode","(","spout",")",";","String","spoutId","=","UniqueIdGen",".","getInstance","(",")",".","getUniqueSpoutId","(",")",";","spoutNode",".","setComponentId","(","spoutId",")",";","spoutNode",".","setParallelism","(","parallelism",")",";","graph",".","addVertex","(","spoutNode",")",";","return","new","Stream<>","(","this,","spoutNode",")",";"],"docstring_tokens":["Creates","a","new","Stream","of","tuples","from","the","given","IRichSpout","with","the","given","parallelism"],"prompt_tokens":[]}
{"code_tokens":["public","StormTopology","build","(",")","{","nodeGroupingInfo",".","clear","(",")",";","windowInfo",".","clear","(",")",";","curGroup",".","clear","(",")",";","TopologicalOrderIterator<Node,","Edge>","iterator","=","new","TopologicalOrderIterator<>","(","graph,","queue","(",")",")",";","TopologyBuilder","topologyBuilder","=","new","TopologyBuilder","(",")",";","while","(","iterator",".","hasNext","(",")",")","{","Node","node","=","iterator",".","next","(",")",";","if","(","node","instanceof","SpoutNode",")","{","addSpout","(","topologyBuilder,","(","SpoutNode",")","node",")",";","}","else","if","(","node","instanceof","ProcessorNode",")","{","handleProcessorNode","(","(","ProcessorNode",")","node,","topologyBuilder",")",";","}","else","if","(","node","instanceof","PartitionNode",")","{","updateNodeGroupingInfo","(","(","PartitionNode",")","node",")",";","processCurGroup","(","topologyBuilder",")",";","}","else","if","(","node","instanceof","WindowNode",")","{","updateWindowInfo","(","(","WindowNode",")","node",")",";","processCurGroup","(","topologyBuilder",")",";","}","else","if","(","node","instanceof","SinkNode",")","{","processCurGroup","(","topologyBuilder",")",";","addSink","(","topologyBuilder,","(","SinkNode",")","node",")",";","}","}","processCurGroup","(","topologyBuilder",")",";","mayBeAddTsField","(",")",";","return","topologyBuilder",".","createTopology","(",")",";"],"docstring_tokens":["Builds","a","new","StormTopology","for","the","computation","expressed","via","the","stream","api"],"prompt_tokens":[]}
{"code_tokens":["public","List<ArtifactResult>","resolve","(","List<Dependency>","dependencies",")","throws\n","DependencyResolutionException,","ArtifactResolutionException","{","\n\n","if","(","dependencies",".","size","(",")","==","0",")","{","return","Collections",".","EMPTY_LIST",";","}","\n\n","CollectRequest","collectRequest","=","new","CollectRequest","(",")",";","collectRequest",".","setRoot","(","dependencies",".","get","(","0",")",")",";","for","(","int","idx","=","1",";","idx","<","dependencies",".","size","(",")",";","idx++",")","{","collectRequest",".","addDependency","(","dependencies",".","get","(","idx",")",")",";","}","\n\n","for","(","RemoteRepository","repository",":","remoteRepositories",")","{","collectRequest",".","addRepository","(","repository",")",";","}","\n\n","DependencyFilter","classpathFilter","=","DependencyFilterUtils\n",".","classpathFilter","(","JavaScopes",".","COMPILE,","JavaScopes",".","RUNTIME",")",";","\n\n","DependencyRequest","dependencyRequest","=","new","DependencyRequest","(","collectRequest,","classpathFilter",")",";","return","system",".","resolveDependencies","(","session,","dependencyRequest",")",".","getArtifactResults","(",")",";"],"docstring_tokens":["Resolve","dependencies","and","return","downloaded","information","of","artifacts"],"prompt_tokens":[]}
{"code_tokens":["public","static","void","main","(","final","String[]","args",")","throws","Exception","{","if","(","args",".","length","<","1",")","{","throw","new","IllegalArgumentException","(","\"No","class","was","specified","to","run\"",")",";","}","\n\n","long","ttl","=","20",";","String","ttlString","=","System",".","getProperty","(","\"storm",".","local",".","sleeptime\",","\"20\"",")",";","try","{","ttl","=","Long",".","valueOf","(","ttlString",")",";","}","catch","(","NumberFormatException","e",")","{","LOG",".","warn","(","\"could","not","parse","the","sleep","time","defaulting","to","{","}","seconds\",","ttl",")",";","}","\n\n","Map<String,","Object>","daemonConf","=","new","HashMap<>","(",")",";","String","zkOverride","=","System",".","getProperty","(","\"storm",".","local",".","zookeeper\"",")",";","if","(","zkOverride","!=","null",")","{","LOG",".","info","(","\"Using","ZooKeeper","at","'","{","}","'","instead","of","in-process","one",".","\",","zkOverride",")",";","long","zkPort","=","DEFAULT_ZK_PORT",";","String","zkHost","=","null",";","if","(","zkOverride",".","contains","(","\":\"",")",")","{","String[]","hostPort","=","zkOverride",".","split","(","\":\"",")",";","zkHost","=","hostPort[0]",";","zkPort","=","hostPort",".","length",">","1","?","Long",".","parseLong","(","hostPort[1]",")",":","DEFAULT_ZK_PORT",";","}","else","{","zkHost","=","zkOverride",";","}","daemonConf",".","put","(","Config",".","TOPOLOGY_ENABLE_MESSAGE_TIMEOUTS,","true",")",";","daemonConf",".","put","(","Config",".","STORM_ZOOKEEPER_SERVERS,","Arrays",".","asList","(","zkHost",")",")",";","daemonConf",".","put","(","Config",".","STORM_ZOOKEEPER_PORT,","zkPort",")",";","}","\n\n","withLocalModeOverride","(","(",")","->","{","String","klass","=","args[0]",";","String[]","newArgs","=","Arrays",".","copyOfRange","(","args,","1,","args",".","length",")",";","Class<?>","c","=","Class",".","forName","(","klass",")",";","Method","main","=","c",".","getDeclaredMethod","(","\"main\",","String[]",".","class",")",";","\n\n","LOG",".","info","(","\"\\n\\n\\t\\tRUNNING","{","}","with","args","{","}","\\n\\n\",","main,","Arrays",".","toString","(","newArgs",")",")",";","main",".","invoke","(","null,","(","Object",")","newArgs",")",";","return","(","Void",")","null",";","}",",","ttl,","daemonConf",")",";","\n\n","//Sometimes","external","things","used","with","testing","don't","shut","down","all","the","way\n","System",".","exit","(","0",")",";"],"docstring_tokens":["Main","entry","point","to","running","in","local","mode"],"prompt_tokens":[]}
{"code_tokens":["private","boolean","hasLeader","(",")","throws","AuthorizationException,","TException","{","ClusterSummary","summary","=","getNimbus","(",")",".","getClusterInfo","(",")",";","if","(","summary",".","is_set_nimbuses","(",")",")","{","for","(","NimbusSummary","sum",":","summary",".","get_nimbuses","(",")",")","{","if","(","sum",".","is_isLeader","(",")",")","{","return","true",";","}","}","}","return","false",";"],"docstring_tokens":["Checks","if","Nimbuses","have","elected","a","leader"],"prompt_tokens":[]}
{"code_tokens":["public","static","void","withConfiguredClient","(","WithNimbus","cb",")","throws","Exception","{","withConfiguredClient","(","cb,","ConfigUtils",".","readStormConfig","(",")",")",";"],"docstring_tokens":["Execute","cb","with","a","configured","nimbus","client","that","will","be","closed","once","cb","returns"],"prompt_tokens":[]}
{"code_tokens":["public","static","NimbusClient","getConfiguredClientAs","(","Map<String,","Object>","conf,","String","asUser,","Integer","timeout",")","{","Nimbus",".","Iface","override","=","_localOverrideClient",";","if","(","override","!=","null",")","{","return","new","NimbusClient","(","override",")",";","}","Map<String,","Object>","fullConf","=","Utils",".","readStormConfig","(",")",";","fullConf",".","putAll","(","Utils",".","readCommandLineOpts","(",")",")",";","fullConf",".","putAll","(","conf",")",";","conf","=","fullConf",";","if","(","conf",".","containsKey","(","Config",".","STORM_DO_AS_USER",")",")","{","if","(","asUser","!=","null","&&","!asUser",".","isEmpty","(",")",")","{","LOG",".","warn","(","\"You","have","specified","a","doAsUser","as","param","{","}","and","a","doAsParam","as","config,","config","will","take","precedence",".","\",\n","asUser,","conf",".","get","(","Config",".","STORM_DO_AS_USER",")",")",";","}","asUser","=","(","String",")","conf",".","get","(","Config",".","STORM_DO_AS_USER",")",";","}","\n\n","if","(","asUser","==","null","||","asUser",".","isEmpty","(",")",")","{","//The","user","is","not","set","so","lets","see","what","the","request","context","is",".","ReqContext","context","=","ReqContext",".","context","(",")",";","Principal","principal","=","context",".","principal","(",")",";","asUser","=","principal","==","null","?","null",":","principal",".","getName","(",")",";","LOG",".","debug","(","\"Will","impersonate","{","}","based","off","of","request","context",".","\",","asUser",")",";","}","\n\n","List<String>","seeds","=","(","List<String>",")","conf",".","get","(","Config",".","NIMBUS_SEEDS",")",";","\n\n","for","(","String","host",":","seeds",")","{","int","port","=","Integer",".","parseInt","(","conf",".","get","(","Config",".","NIMBUS_THRIFT_PORT",")",".","toString","(",")",")",";","NimbusSummary","nimbusSummary",";","NimbusClient","client","=","null",";","try","{","client","=","new","NimbusClient","(","conf,","host,","port,","timeout,","asUser",")",";","nimbusSummary","=","client",".","getClient","(",")",".","getLeader","(",")",";","if","(","nimbusSummary","!=","null",")","{","String","leaderNimbus","=","nimbusSummary",".","get_host","(",")","+","\":\"","+","nimbusSummary",".","get_port","(",")",";","if","(","shouldLogLeader","(","leaderNimbus",")",")","{","LOG",".","info","(","\"Found","leader","nimbus",":","{","}","\",","leaderNimbus",")",";","}","if","(","nimbusSummary",".","get_host","(",")",".","equals","(","host",")","&&","nimbusSummary",".","get_port","(",")","==","port",")","{","NimbusClient","ret","=","client",";","client","=","null",";","return","ret",";","}","try","{","return","new","NimbusClient","(","conf,","nimbusSummary",".","get_host","(",")",",","nimbusSummary",".","get_port","(",")",",","timeout,","asUser",")",";","}","catch","(","TTransportException","e",")","{","throw","new","RuntimeException","(","\"Failed","to","create","a","nimbus","client","for","the","leader","\"","+","leaderNimbus,","e",")",";","}","}","}","catch","(","Exception","e",")","{","LOG",".","warn","(","\"Ignoring","exception","while","trying","to","get","leader","nimbus","info","from","\"","+","host\n","+","\"",".","will","retry","with","a","different","seed","host",".","\",","e",")",";","continue",";","}","finally","{","if","(","client","!=","null",")","{","client",".","close","(",")",";","}","}","throw","new","NimbusLeaderNotFoundException","(","\"Could","not","find","a","nimbus","leader,","please","try","again","after","some","time",".","\"",")",";","}","throw","new","NimbusLeaderNotFoundException","(","\"Could","not","find","leader","nimbus","from","seed","hosts","\"","+","seeds","+","\"",".","\"\n","+","\"Did","you","specify","a","valid","list","of","nimbus","hosts","for","config","\"\n","+","Config",".","NIMBUS_SEEDS","+","\"?\"",")",";"],"docstring_tokens":["Get","a","nimbus","client","as","configured","by","conf"],"prompt_tokens":[]}
{"code_tokens":["public","BaseCassandraBolt","withStreamOutputFields","(","String","stream,","Fields","fields",")","{","if","(","stream","==","null","||","stream",".","length","(",")","==","0",")","{","throw","new","IllegalArgumentException","(","\"'stream'","should","not","be","null\"",")",";","}","this",".","outputsFields",".","put","(","stream,","fields",")",";","return","this",";"],"docstring_tokens":["Configures","this","bolt","given","fields","as","outputfields","for","the","given","stream"],"prompt_tokens":[]}
{"code_tokens":["public","Map<String,","Double>","toNormalizedMap","(",")","{","Map<String,","Double>","ret","=","normalizedResources",".","toNormalizedMap","(",")",";","ret",".","put","(","Constants",".","COMMON_TOTAL_MEMORY_RESOURCE_NAME,","totalMemoryMb",")",";","return","ret",";"],"docstring_tokens":["Return","these","resources","as","a","normalized","map"],"prompt_tokens":[]}
{"code_tokens":["public","boolean","remove","(","NormalizedResourcesWithMemory","other,","ResourceMetrics","resourceMetrics",")","{","boolean","negativeResources","=","normalizedResources",".","remove","(","other",".","getNormalizedResources","(",")",",","resourceMetrics",")",";","totalMemoryMb","-=","other",".","getTotalMemoryMb","(",")",";","if","(","totalMemoryMb","<","0",".","0",")","{","negativeResources","=","true",";","if","(","resourceMetrics","!=","null",")","{","resourceMetrics",".","getNegativeResourceEventsMeter","(",")",".","mark","(",")",";","}","totalMemoryMb","=","0",".","0",";","}","return","negativeResources",";"],"docstring_tokens":["Remove","the","resources","in","other","from","this"],"prompt_tokens":[]}
{"code_tokens":["public","double","calculateMinPercentageUsedBy","(","NormalizedResourceOffer","used",")","{","return","normalizedResources",".","calculateMinPercentageUsedBy","(","used",".","getNormalizedResources","(",")",",","getTotalMemoryMb","(",")",",","used",".","getTotalMemoryMb","(",")",")",";"],"docstring_tokens":["Calculate","the","min","percentage","used","of","the","resource"],"prompt_tokens":[]}
{"code_tokens":["public","boolean","couldHoldIgnoringSharedMemory","(","NormalizedResourcesWithMemory","other",")","{","return","normalizedResources",".","couldHoldIgnoringSharedMemory","(","other",".","getNormalizedResources","(",")",",","getTotalMemoryMb","(",")",",","other",".","getTotalMemoryMb","(",")",")",";"],"docstring_tokens":["Check","if","resources","might","be","able","to","fit"],"prompt_tokens":[]}
{"code_tokens":["public","boolean","couldFit","(","double","minWorkerCpu,","NormalizedResourceRequest","requestedResources",")","{","if","(","minWorkerCpu","<","0",".","001",")","{","return","this",".","couldHoldIgnoringSharedMemory","(","requestedResources",")",";","}","else","{","//","Assume","that","there","could","be","a","worker","already","on","the","node","that","is","under","the","minWorkerCpu","budget",".","//","It's","possible","we","could","combine","with","it",".","Let's","disregard","minWorkerCpu","from","the","request\n","//","and","validate","that","CPU","as","a","rough","fit",".","double","requestedCpu","=","Math",".","max","(","requestedResources",".","getTotalCpu","(",")","-","minWorkerCpu,","0",".","0",")",";","if","(","requestedCpu",">","this",".","getTotalCpu","(",")",")","{","return","false",";","}","//","now","check","memory","only\n","return","this",".","couldHoldIgnoringSharedMemoryAndCpu","(","requestedResources",")",";","}"],"docstring_tokens":["Is","there","any","possibility","that","a","resource","request","could","ever","fit","on","this"],"prompt_tokens":[]}
{"code_tokens":["public","BlobStoreFile","write","(","String","key,","boolean","create",")","throws","IOException","{","return","new","HdfsBlobStoreFile","(","getKeyDir","(","key",")",",","true,","create,","hadoopConf",")",";"],"docstring_tokens":["Get","an","object","tied","to","writing","the","data"],"prompt_tokens":[]}
{"code_tokens":["public","synchronized","void","updateLastBlobUpdateTime","(",")","throws","IOException","{","Long","timestamp","=","Time",".","currentTimeMillis","(",")",";","Path","updateTimeFile","=","new","Path","(","fullPath,","BLOBSTORE_UPDATE_TIME_FILE",")",";","FSDataOutputStream","fsDataOutputStream","=","fileSystem",".","create","(","updateTimeFile,","true",")",";","BufferedWriter","bufferedWriter","=","new","BufferedWriter","(","new","OutputStreamWriter","(","fsDataOutputStream,","StandardCharsets",".","UTF_8",")",")",";","bufferedWriter",".","write","(","timestamp",".","toString","(",")",")",";","bufferedWriter",".","close","(",")",";","LOG",".","debug","(","\"Updated","blobstore","update","time","of","{","}","to","{","}","\",","updateTimeFile,","timestamp",")",";"],"docstring_tokens":["Updates","the","last","updated","time","of","existing","blobstores","to","the","current","time"],"prompt_tokens":[]}
{"code_tokens":["public","void","validateBlobUpdateTime","(",")","throws","IOException","{","int","currentBucket","=","0",";","long","baseModTime","=","0",";","while","(","currentBucket","<","BUCKETS",")","{","String","name","=","String",".","valueOf","(","currentBucket",")",";","Path","bucketDir","=","new","Path","(","fullPath,","name",")",";","\n\n","//","only","consider","bucket","dirs","that","exist","with","files","in","them\n","if","(","fileSystem",".","exists","(","bucketDir",")","&&","fileSystem",".","listStatus","(","bucketDir",")",".","length",">","0",")","{","long","modtime","=","fileSystem",".","getFileStatus","(","bucketDir",")",".","getModificationTime","(",")",";","if","(","modtime",">","baseModTime",")","{","baseModTime","=","modtime",";","}","}","\n\n","currentBucket++",";","}","if","(","baseModTime",">","0","&&","baseModTime",">","getLastBlobUpdateTime","(",")",")","{","LOG",".","info","(","\"Blobstore","update","time","requires","an","update","to","at","least","{","}","\",","baseModTime",")",";","updateLastBlobUpdateTime","(",")",";","}"],"docstring_tokens":["Validates","that","the","last","updated","blob","time","of","the","blobstore","is","up","to","date","with","the","current","existing","blobs"],"prompt_tokens":[]}
{"code_tokens":["@Override\n","public","ReqContext","populateContext","(","ReqContext","context,\n","HttpServletRequest","req",")","{","String","userName","=","getUserName","(","req",")",";","\n\n","String","doAsUser","=","req",".","getHeader","(","\"doAsUser\"",")",";","if","(","doAsUser","==","null",")","{","doAsUser","=","req",".","getParameter","(","\"doAsUser\"",")",";","}","\n\n","if","(","doAsUser","!=","null",")","{","context",".","setRealPrincipal","(","new","SingleUserPrincipal","(","userName",")",")",";","userName","=","doAsUser",";","}","else","{","context",".","setRealPrincipal","(","null",")",";","}","\n\n","Set<Principal>","principals","=","new","HashSet<>","(",")",";","if","(","userName","!=","null",")","{","Principal","p","=","new","SingleUserPrincipal","(","userName",")",";","principals",".","add","(","p",")",";","}","Subject","s","=","new","Subject","(","true,","principals,","new","HashSet","(",")",",","new","HashSet","(",")",")",";","context",".","setSubject","(","s",")",";","\n\n","return","context",";"],"docstring_tokens":["Populates","a","given","context","with","a","new","Subject","derived","from","the","credentials","in","a","servlet","request"],"prompt_tokens":[]}
{"code_tokens":["static","void","init","(","RocksDbMetricsWriter","dbWriter,","int","capacity",")","throws","MetricException","{","if","(","instance","==","null",")","{","instance","=","new","StringMetadataCache","(","dbWriter,","capacity",")",";","}","else","{","throw","new","MetricException","(","\"StringMetadataCache","already","created\"",")",";","}"],"docstring_tokens":["Initializes","the","cache","instance"],"prompt_tokens":[]}
{"code_tokens":["@Override\n","public","StringMetadata","get","(","String","s",")","{","return","lruStringCache",".","get","(","s",")",";"],"docstring_tokens":["Get","the","string","metadata","from","the","cache"],"prompt_tokens":[]}
{"code_tokens":["@Override\n","public","void","evictionCallback","(","String","key,","StringMetadata","val",")","{","writeMetadataToDisk","(","key,","val",")",";"],"docstring_tokens":["Callback","when","data","is","about","to","be","removed","from","the","cache"],"prompt_tokens":[]}
{"code_tokens":["@Override\n","public","boolean","contains","(","Integer","stringId",")","{","return","hashToString",".","containsKey","(","stringId",")",";"],"docstring_tokens":["Determines","if","a","string","Id","is","contained","in","the","cache"],"prompt_tokens":[]}
{"code_tokens":["@Override\n","public","String","getMetadataString","(","Integer","stringId",")","{","return","hashToString",".","get","(","stringId",")",";"],"docstring_tokens":["Returns","the","string","matching","the","string","Id","if","in","the","cache"],"prompt_tokens":[]}
{"code_tokens":["public","void","setValue","(","Object","value",")","{","if","(","this",".","ref","!=","null",")","{","throw","new","IllegalStateException","(","\"A","property","can","only","have","a","value","OR","a","reference,","not","both",".","\"",")",";","}","this",".","value","=","value",";"],"docstring_tokens":["Sets","the","value","of","this","property"],"prompt_tokens":[]}
{"code_tokens":["public","void","setRef","(","String","ref",")","{","if","(","this",".","value","!=","null",")","{","throw","new","IllegalStateException","(","\"A","property","can","only","have","a","value","OR","a","reference,","not","both",".","\"",")",";","}","this",".","ref","=","ref",";"],"docstring_tokens":["Sets","the","value","of","this","property","to","a","reference"],"prompt_tokens":[]}
{"code_tokens":["public","KafkaTuple","routedTo","(","String","stream",")","{","assert","this",".","stream","==","null",";","this",".","stream","=","stream",";","return","this",";"],"docstring_tokens":["Sets","the","target","stream","of","this","Tuple"],"prompt_tokens":[]}
{"code_tokens":["public","void","leaderCallBack","(",")","{","numGainedLeader",".","mark","(",")",";","//set","up","nimbus-info","to","zk\n","setUpNimbusInfo","(","acls",")",";","//sync","zk","assignments/id-info","to","local\n","LOG",".","info","(","\"Sync","remote","assignments","and","id-info","to","local\"",")",";","clusterState",".","syncRemoteAssignments","(","null",")",";","clusterState",".","syncRemoteIds","(","null",")",";","clusterState",".","setAssignmentsBackendSynchronized","(",")",";","\n\n","Set<String>","activeTopologyIds","=","new","TreeSet<>","(","ClientZookeeper",".","getChildren","(","zk,\n","ClusterUtils",".","STORMS_SUBTREE,","false",")",")",";","\n\n","Set<String>","activeTopologyBlobKeys","=","populateTopologyBlobKeys","(","activeTopologyIds",")",";","Set<String>","activeTopologyCodeKeys","=","filterTopologyCodeKeys","(","activeTopologyBlobKeys",")",";","Set<String>","allLocalBlobKeys","=","Sets",".","newHashSet","(","blobStore",".","listKeys","(",")",")",";","Set<String>","allLocalTopologyBlobKeys","=","filterTopologyBlobKeys","(","allLocalBlobKeys",")",";","\n\n","//","this","finds","all","active","topologies","blob","keys","from","all","local","topology","blob","keys\n","Sets",".","SetView<String>","diffTopology","=","Sets",".","difference","(","activeTopologyBlobKeys,","allLocalTopologyBlobKeys",")",";","LOG",".","info","(","\"active-topology-blobs","[","{","}","]","local-topology-blobs","[","{","}","]","diff-topology-blobs","[","{","}","]\",\n","generateJoinedString","(","activeTopologyIds",")",",","generateJoinedString","(","allLocalTopologyBlobKeys",")",",\n","generateJoinedString","(","diffTopology",")",")",";","\n\n","if","(","diffTopology",".","isEmpty","(",")",")","{","Set<String>","activeTopologyDependencies","=","getTopologyDependencyKeys","(","activeTopologyCodeKeys",")",";","\n\n","//","this","finds","all","dependency","blob","keys","from","active","topologies","from","all","local","blob","keys\n","Sets",".","SetView<String>","diffDependencies","=","Sets",".","difference","(","activeTopologyDependencies,","allLocalBlobKeys",")",";","LOG",".","info","(","\"active-topology-dependencies","[","{","}","]","local-blobs","[","{","}","]","diff-topology-dependencies","[","{","}","]\",\n","generateJoinedString","(","activeTopologyDependencies",")",",","generateJoinedString","(","allLocalBlobKeys",")",",\n","generateJoinedString","(","diffDependencies",")",")",";","\n\n","if","(","diffDependencies",".","isEmpty","(",")",")","{","LOG",".","info","(","\"Accepting","leadership,","all","active","topologies","and","corresponding","dependencies","found","locally",".","\"",")",";","tc",".","clear","(",")",";","}","else","{","LOG",".","info","(","\"Code","for","all","active","topologies","is","available","locally,","but","some","dependencies","are","not","found","locally,","\"\n","+","\"giving","up","leadership",".","\"",")",";","surrenderLeadership","(",")",";","}","}","else","{","LOG",".","info","(","\"code","for","all","active","topologies","not","available","locally,","giving","up","leadership",".","\"",")",";","surrenderLeadership","(",")",";","}"],"docstring_tokens":["Invoke","when","gains","leadership"],"prompt_tokens":[]}
{"code_tokens":["@SuppressWarnings","(","\"checkstyle:AbbreviationAsWordInName\"",")","public","static","List<ACL>","getWorkerACL","(","Map<String,","Object>","conf",")","{","if","(","!isZkAuthenticationConfiguredTopology","(","conf",")",")","{","return","null",";","}","ArrayList<ACL>","ret","=","new","ArrayList<>","(","ZooDefs",".","Ids",".","CREATOR_ALL_ACL",")",";","ret",".","add","(","getSuperUserAcl","(","conf",")",")",";","return","ret",";"],"docstring_tokens":["Get","the","ZK","ACLs","that","a","worker","should","use","when","writing","to","ZK"],"prompt_tokens":[]}
{"code_tokens":["public","static","boolean","isZkAuthenticationConfiguredTopology","(","Map<String,","Object>","conf",")","{","return","(","conf","!=","null\n","&&","conf",".","get","(","Config",".","STORM_ZOOKEEPER_TOPOLOGY_AUTH_SCHEME",")","!=","null\n","&&","!","(","(","String",")","conf",".","get","(","Config",".","STORM_ZOOKEEPER_TOPOLOGY_AUTH_SCHEME",")",")",".","isEmpty","(",")",")",";"],"docstring_tokens":["Is","the","topology","configured","to","have","ZooKeeper","authentication"],"prompt_tokens":[]}
{"code_tokens":["public","static","void","forceDelete","(","String","path",")","throws","IOException","{","_instance",".","forceDeleteImpl","(","path",")",";"],"docstring_tokens":["Deletes","a","file","or","directory","and","its","contents","if","it","exists"],"prompt_tokens":[]}
{"code_tokens":["public","static","Double","parseJvmHeapMemByChildOpts","(","List<String>","options,","Double","defaultValue",")","{","if","(","options","!=","null",")","{","Pattern","optsPattern","=","Pattern",".","compile","(","\"Xmx","(","[0-9]+",")","(","[mkgMKG]",")","\"",")",";","for","(","String","option",":","options",")","{","if","(","option","==","null",")","{","continue",";","}","Matcher","m","=","optsPattern",".","matcher","(","option",")",";","while","(","m",".","find","(",")",")","{","long","value","=","Long",".","parseLong","(","m",".","group","(","1",")",")",";","char","unitChar","=","m",".","group","(","2",")",".","toLowerCase","(",")",".","charAt","(","0",")",";","int","unit",";","switch","(","unitChar",")","{","case","'k':\n","unit","=","1024",";","break",";","case","'m':\n","unit","=","1024","*","1024",";","break",";","case","'g':\n","unit","=","1024","*","1024","*","1024",";","break",";","default:\n","unit","=","1",";","}","Double","result","=","value","*","unit","/","1024",".","0","/","1024",".","0",";","return","(","result","<","1",".","0",")","?","1",".","0",":","result",";","}","}","return","defaultValue",";","}","else","{","return","defaultValue",";","}"],"docstring_tokens":["parses","the","arguments","to","extract","jvm","heap","memory","size","in","MB"],"prompt_tokens":[]}
{"code_tokens":["public","static","void","validateTopologyBlobStoreMap","(","Map<String,","Object>","topoConf,","NimbusBlobStore","client",")","throws","InvalidTopologyException,","AuthorizationException","{","Map<String,","Map<String,","Object>>","blobStoreMap","=","(","Map<String,","Map<String,","Object>>",")","topoConf",".","get","(","Config",".","TOPOLOGY_BLOBSTORE_MAP",")",";","if","(","blobStoreMap","!=","null",")","{","for","(","String","key",":","blobStoreMap",".","keySet","(",")",")","{","\n\n","Map<String,","Object>","blobConf","=","blobStoreMap",".","get","(","key",")",";","try","{","ObjectReader",".","getBoolean","(","blobConf",".","get","(","\"uncompress\"",")",",","false",")",";","ObjectReader",".","getBoolean","(","blobConf",".","get","(","\"workerRestart\"",")",",","false",")",";","}","catch","(","IllegalArgumentException","e",")","{","throw","new","WrappedInvalidTopologyException","(","\"Invalid","blob","conf","option:","\"","+","e",".","getMessage","(",")",")",";","}","\n\n","//","try","to","get","BlobMeta\n","//","This","will","check","if","the","key","exists","and","if","the","subject","has","authorization\n","try","{","client",".","getBlobMeta","(","key",")",";","}","catch","(","KeyNotFoundException","keyNotFound",")","{","//","wrap","KeyNotFoundException","in","an","InvalidTopologyException\n","throw","new","WrappedInvalidTopologyException","(","\"Key","not","found:","\"","+","keyNotFound",".","get_msg","(",")",")",";","}","}","}"],"docstring_tokens":["Validate","topology","blobstore","map"],"prompt_tokens":[]}
{"code_tokens":["public","static","StormTopology","addVersions","(","StormTopology","topology",")","{","String","stormVersion","=","VersionInfo",".","getVersion","(",")",";","if","(","stormVersion","!=","null\n","&&","!\"Unknown\"",".","equalsIgnoreCase","(","stormVersion",")","&&","!topology",".","is_set_storm_version","(",")",")","{","topology",".","set_storm_version","(","stormVersion",")",";","}","\n\n","String","jdkVersion","=","System",".","getProperty","(","\"java",".","version\"",")",";","if","(","jdkVersion","!=","null","&&","!topology",".","is_set_jdk_version","(",")",")","{","topology",".","set_jdk_version","(","jdkVersion",")",";","}","return","topology",";"],"docstring_tokens":["Add","version","information","to","the","given","topology"],"prompt_tokens":[]}
{"code_tokens":["public","static","NavigableMap<SimpleVersion,","List<String>>","getConfiguredClasspathVersions","(","Map<String,","Object>","conf,\n","List<String>","currentClassPath",")","{","TreeMap<SimpleVersion,","List<String>>","ret","=","new","TreeMap<>","(",")",";","Map<String,","String>","fromConf","=\n","(","Map<String,","String>",")","conf",".","getOrDefault","(","Config",".","SUPERVISOR_WORKER_VERSION_CLASSPATH_MAP,","Collections",".","emptyMap","(",")",")",";","for","(","Map",".","Entry<String,","String>","entry",":","fromConf",".","entrySet","(",")",")","{","ret",".","put","(","new","SimpleVersion","(","entry",".","getKey","(",")",")",",","Arrays",".","asList","(","entry",".","getValue","(",")",".","split","(","File",".","pathSeparator",")",")",")",";","}","ret",".","put","(","VersionInfo",".","OUR_VERSION,","currentClassPath",")",";","return","ret",";"],"docstring_tokens":["Get","a","map","of","version","to","classpath","from","the","conf","Config.SUPERVISOR_WORKER_VERSION_CLASSPATH_MAP"],"prompt_tokens":[]}
{"code_tokens":["public","static","NavigableMap<SimpleVersion,","String>","getConfiguredWorkerMainVersions","(","Map<String,","Object>","conf",")","{","TreeMap<SimpleVersion,","String>","ret","=","new","TreeMap<>","(",")",";","Map<String,","String>","fromConf","=\n","(","Map<String,","String>",")","conf",".","getOrDefault","(","Config",".","SUPERVISOR_WORKER_VERSION_MAIN_MAP,","Collections",".","emptyMap","(",")",")",";","for","(","Map",".","Entry<String,","String>","entry",":","fromConf",".","entrySet","(",")",")","{","ret",".","put","(","new","SimpleVersion","(","entry",".","getKey","(",")",")",",","entry",".","getValue","(",")",")",";","}","\n\n","ret",".","put","(","VersionInfo",".","OUR_VERSION,","\"org",".","apache",".","storm",".","daemon",".","worker",".","Worker\"",")",";","return","ret",";"],"docstring_tokens":["Get","a","map","of","version","to","worker","main","from","the","conf","Config.SUPERVISOR_WORKER_VERSION_MAIN_MAP"],"prompt_tokens":[]}
{"code_tokens":["public","static","NavigableMap<SimpleVersion,","String>","getConfiguredWorkerLogWriterVersions","(","Map<String,","Object>","conf",")","{","TreeMap<SimpleVersion,","String>","ret","=","new","TreeMap<>","(",")",";","Map<String,","String>","fromConf","=\n","(","Map<String,","String>",")","conf",".","getOrDefault","(","Config",".","SUPERVISOR_WORKER_VERSION_LOGWRITER_MAP,","Collections",".","emptyMap","(",")",")",";","for","(","Map",".","Entry<String,","String>","entry",":","fromConf",".","entrySet","(",")",")","{","ret",".","put","(","new","SimpleVersion","(","entry",".","getKey","(",")",")",",","entry",".","getValue","(",")",")",";","}","\n\n","ret",".","put","(","VersionInfo",".","OUR_VERSION,","\"org",".","apache",".","storm",".","LogWriter\"",")",";","return","ret",";"],"docstring_tokens":["Get","a","map","of","version","to","worker","log","writer","from","the","conf","Config.SUPERVISOR_WORKER_VERSION_LOGWRITER_MAP"],"prompt_tokens":[]}
{"code_tokens":["public","static","void","validateCycleFree","(","StormTopology","topology,","String","name",")","throws","InvalidTopologyException","{","List<List<String>>","cycles","=","Utils",".","findComponentCycles","(","topology,","name",")",";","if","(","!cycles",".","isEmpty","(",")",")","{","String","err","=","String",".","format","(","\"Topology","%s","contains","cycles","in","components","\\\"%s\\\"\",","name,\n","cycles",".","stream","(",")",".","map","(","x","->","String",".","join","(","\",\",","x",")",")",".","collect","(","Collectors",".","joining","(","\"",";","\"",")",")",")",";","throw","new","WrappedInvalidTopologyException","(","err",")",";","}"],"docstring_tokens":["Validate","that","the","topology","is","cycle","free"],"prompt_tokens":[]}
{"code_tokens":["public","static","void","main","(","String[]","args",")","throws","Exception","{","String","confFile","=","\"conf/HdfsSpoutTopo",".","yaml\"",";","int","runTime","=","-1",";","//Run","until","Ctrl-C\n","if","(","args",".","length",">","0",")","{","runTime","=","Integer",".","parseInt","(","args[0]",")",";","}","\n\n","if","(","args",".","length",">","1",")","{","confFile","=","args[1]",";","}","\n\n","//","Submit","to","Storm","cluster\n","if","(","args",".","length",">","2",")","{","System",".","err",".","println","(","\"args:","[runDurationSec]","[confFile]\"",")",";","return",";","}","\n\n","Map<String,","Object>","topoConf","=","Utils",".","findAndReadConfigFile","(","confFile",")",";","topoConf",".","put","(","Config",".","TOPOLOGY_PRODUCER_BATCH_SIZE,","1000",")",";","topoConf",".","put","(","Config",".","TOPOLOGY_BOLT_WAIT_STRATEGY,","\"org",".","apache",".","storm",".","policy",".","WaitStrategyPark\"",")",";","topoConf",".","put","(","Config",".","TOPOLOGY_BOLT_WAIT_PARK_MICROSEC,","0",")",";","topoConf",".","put","(","Config",".","TOPOLOGY_DISABLE_LOADAWARE_MESSAGING,","true",")",";","topoConf",".","put","(","Config",".","TOPOLOGY_STATS_SAMPLE_RATE,","0",".","0005",")",";","\n\n","topoConf",".","putAll","(","Utils",".","readCommandLineOpts","(",")",")",";","Helper",".","runOnClusterAndPrintMetrics","(","runTime,","TOPOLOGY_NAME,","topoConf,","getTopology","(","topoConf",")",")",";"],"docstring_tokens":["Spout","generates","random","strings","and","HDFS","bolt","writes","them","to","a","text","file"],"prompt_tokens":[]}
{"code_tokens":["public","boolean","blobExists","(","String","key,","Subject","who",")","throws","AuthorizationException","{","try","{","who","=","checkAndGetSubject","(","who",")",";","validateKey","(","key",")",";","SettableBlobMeta","meta","=","extractBlobMeta","(","key",")",";","aclHandler",".","hasPermissions","(","meta",".","get_acl","(",")",",","READ,","who,","key",")",";","}","catch","(","KeyNotFoundException","e",")","{","return","false",";","}","return","true",";"],"docstring_tokens":["Checks","if","a","blob","exists"],"prompt_tokens":[]}
{"code_tokens":["@Override\n","protected","void","handleCheckpoint","(","Tuple","checkpointTuple,","Action","action,","long","txid",")","{","collector",".","emit","(","CHECKPOINT_STREAM_ID,","checkpointTuple,","new","Values","(","txid,","action",")",")",";","collector",".","ack","(","checkpointTuple",")",";"],"docstring_tokens":["Forwards","the","checkpoint","tuple","downstream"],"prompt_tokens":[]}
{"code_tokens":["public","void","hasAnyPermissions","(","List<AccessControl>","acl,","int","mask,","Subject","who,","String","key",")","throws","AuthorizationException","{","if","(","!doAclValidation",")","{","return",";","}","Set<String>","user","=","constructUserFromPrincipals","(","who",")",";","LOG",".","debug","(","\"user","{","}","\",","user",")",";","if","(","checkForValidUsers","(","who,","mask",")",")","{","return",";","}","for","(","AccessControl","ac",":","acl",")","{","int","allowed","=","getAllowed","(","ac,","user",")",";","LOG",".","debug","(","\"","user:","{","}","allowed:","{","}","key:","{","}","\",","user,","allowed,","key",")",";","if","(","(","allowed","&","mask",")",">","0",")","{","return",";","}","}","throw","new","WrappedAuthorizationException","(","user","+","\"","does","not","have","access","to","\"","+","key",")",";"],"docstring_tokens":["Validates","if","the","user","has","any","of","the","permissions","mentioned","in","the","mask"],"prompt_tokens":[]}
{"code_tokens":["public","void","hasPermissions","(","List<AccessControl>","acl,","int","mask,","Subject","who,","String","key",")","throws","AuthorizationException","{","if","(","!doAclValidation",")","{","return",";","}","Set<String>","user","=","constructUserFromPrincipals","(","who",")",";","LOG",".","debug","(","\"user","{","}","\",","user",")",";","if","(","checkForValidUsers","(","who,","mask",")",")","{","return",";","}","for","(","AccessControl","ac",":","acl",")","{","int","allowed","=","getAllowed","(","ac,","user",")",";","mask","=","~allowed","&","mask",";","LOG",".","debug","(","\"","user:","{","}","allowed:","{","}","disallowed:","{","}","key:","{","}","\",","user,","allowed,","mask,","key",")",";","}","if","(","mask","==","0",")","{","return",";","}","throw","new","WrappedAuthorizationException","(","user","+","\"","does","not","have","\"","+","namedPerms","(","mask",")","+","\"","access","to","\"","+","key",")",";"],"docstring_tokens":["Validates","if","the","user","has","at","least","the","set","of","permissions","mentioned","in","the","mask"],"prompt_tokens":[]}
{"code_tokens":["public","NodeAssignments","nextAssignments","(","Integer","queueIndex",")","throws","InterruptedException","{","NodeAssignments","target","=","null",";","while","(","true",")","{","target","=","getQueueById","(","queueIndex",")",".","poll","(",")",";","if","(","target","!=","null",")","{","return","target",";","}","Time",".","sleep","(","100L",")",";","}"],"docstring_tokens":["Get","an","assignments","from","the","target","queue","with","the","specific","index"],"prompt_tokens":[]}
{"code_tokens":["public","ColumnList","addCounter","(","byte[]","family,","byte[]","qualifier,","long","incr",")","{","counters","(",")",".","add","(","new","Counter","(","family,","qualifier,","incr",")",")",";","return","this",";"],"docstring_tokens":["Add","an","HBase","counter","column"],"prompt_tokens":[]}
{"code_tokens":["public","ColumnList","addCounter","(","ICounter","counter",")","{","return","this",".","addCounter","(","counter",".","family","(",")",",","counter",".","qualifier","(",")",",","counter",".","increment","(",")",")",";"],"docstring_tokens":["Add","an","HBase","counter","column","given","an","instance","of","a","class","that","implements","the","ICounter","interface"],"prompt_tokens":[]}
{"code_tokens":["public","void","freeTopology","(","String","topId,","Cluster","cluster",")","{","Set<WorkerSlot>","slots","=","topIdToUsedSlots",".","get","(","topId",")",";","if","(","slots","==","null","||","slots",".","isEmpty","(",")",")","{","return",";","}","for","(","WorkerSlot","ws",":","slots",")","{","cluster",".","freeSlot","(","ws",")",";","if","(","isAlive",")","{","freeSlots",".","add","(","ws",")",";","}","}","topIdToUsedSlots",".","remove","(","topId",")",";"],"docstring_tokens":["Frees","all","the","slots","for","a","topology"],"prompt_tokens":[]}
{"code_tokens":["public","void","assign","(","String","topId,","Collection<ExecutorDetails>","executors,\n","Cluster","cluster",")","{","if","(","!isAlive",")","{","throw","new","IllegalStateException","(","\"Trying","to","adding","to","a","dead","node","\"","+","nodeId",")",";","}","if","(","freeSlots",".","isEmpty","(",")",")","{","throw","new","IllegalStateException","(","\"Trying","to","assign","to","a","full","node","\"","+","nodeId",")",";","}","if","(","executors",".","size","(",")","==","0",")","{","LOG",".","warn","(","\"Trying","to","assign","nothing","from","\"","+","topId","+","\"","to","\"","+","nodeId","+","\"","(","Ignored",")","\"",")",";","}","else","{","WorkerSlot","slot","=","freeSlots",".","iterator","(",")",".","next","(",")",";","cluster",".","assign","(","slot,","topId,","executors",")",";","assignInternal","(","slot,","topId,","false",")",";","}"],"docstring_tokens":["Assign","a","free","slot","on","the","node","to","the","following","topology","and","executors"],"prompt_tokens":[]}
{"code_tokens":["public","static","void","main","(","String[]","args",")","{","if","(","args",".","length","==","0",")","{","help","(","\"Missing","command",".","\",","System",".","err",")",";","System",".","exit","(","1",")",";","}","String","commandName","=","args[0]",".","toLowerCase","(",")",";","String[]","newArgs","=","Arrays",".","copyOfRange","(","args,","1,","args",".","length",")",";","AdminCommand","command","=","COMMANDS",".","get","(","commandName",")",";","if","(","command","==","null",")","{","help","(","commandName","+","\"","is","not","a","supported","command\",","System",".","err",")",";","System",".","exit","(","2",")",";","}","\n\n","try","{","command",".","run","(","newArgs,","Utils",".","readStormConfig","(",")",",","commandName",")",";","}","catch","(","Exception","e",")","{","LOG",".","error","(","\"Error","while","running","command","{","}","\",","commandName,","e",")",";","help","(","\"Error","while","running","\"","+","commandName","+","\"","\"","+","e",".","getMessage","(",")",",","System",".","err",")",";","System",".","exit","(","3",")",";","}"],"docstring_tokens":["Main","entry","point","to","the","admin","command"],"prompt_tokens":[]}
{"code_tokens":["public","static","ContainerLauncher","make","(","Map<String,","Object>","conf,","String","supervisorId,","int","supervisorPort,\n","IContext","sharedContext,","StormMetricsRegistry","metricsRegistry,","ContainerMemoryTracker","containerMemoryTracker,\n","org",".","apache",".","storm",".","generated",".","Supervisor",".","Iface","localSupervisor",")","throws","IOException","{","if","(","ConfigUtils",".","isLocalMode","(","conf",")",")","{","return","new","LocalContainerLauncher","(","conf,","supervisorId,","supervisorPort,","sharedContext,","metricsRegistry,","containerMemoryTracker,\n","localSupervisor",")",";","}","\n\n","ResourceIsolationInterface","resourceIsolationManager",";","if","(","ObjectReader",".","getBoolean","(","conf",".","get","(","DaemonConfig",".","STORM_RESOURCE_ISOLATION_PLUGIN_ENABLE",")",",","false",")",")","{","resourceIsolationManager","=","ReflectionUtils",".","newInstance","(","(","String",")","conf",".","get","(","DaemonConfig",".","STORM_RESOURCE_ISOLATION_PLUGIN",")",")",";","LOG",".","info","(","\"Using","resource","isolation","plugin","{","}",":","{","}","\",","conf",".","get","(","DaemonConfig",".","STORM_RESOURCE_ISOLATION_PLUGIN",")",",\n","resourceIsolationManager",")",";","}","else","{","resourceIsolationManager","=","new","DefaultResourceIsolationManager","(",")",";","LOG",".","info","(","\"","{","}","is","false",".","Using","default","resource","isolation","plugin:","{","}","\",","DaemonConfig",".","STORM_RESOURCE_ISOLATION_PLUGIN_ENABLE,\n","resourceIsolationManager",")",";","}","\n\n","resourceIsolationManager",".","prepare","(","conf",")",";","\n\n","return","new","BasicContainerLauncher","(","conf,","supervisorId,","supervisorPort,","resourceIsolationManager,","metricsRegistry,","containerMemoryTracker",")",";"],"docstring_tokens":["Factory","to","create","the","right","container","launcher","for","the","config","and","the","environment"],"prompt_tokens":[]}
{"code_tokens":["public","CheckPointState","nextState","(","boolean","recovering",")","{","CheckPointState","nextState",";","switch","(","state",")","{","case","PREPARING:\n","nextState","=","recovering","?","new","CheckPointState","(","txid","-","1,","COMMITTED",")",":","new","CheckPointState","(","txid,","COMMITTING",")",";","break",";","case","COMMITTING:\n","nextState","=","new","CheckPointState","(","txid,","COMMITTED",")",";","break",";","case","COMMITTED:\n","nextState","=","recovering","?","this",":","new","CheckPointState","(","txid","+","1,","PREPARING",")",";","break",";","default:\n","throw","new","IllegalStateException","(","\"Unknown","state","\"","+","state",")",";","}","return","nextState",";"],"docstring_tokens":["Get","the","next","state","based","on","this","checkpoint","state"],"prompt_tokens":[]}
{"code_tokens":["public","Action","nextAction","(","boolean","recovering",")","{","Action","action",";","switch","(","state",")","{","case","PREPARING:\n","action","=","recovering","?","Action",".","ROLLBACK",":","Action",".","PREPARE",";","break",";","case","COMMITTING:\n","action","=","Action",".","COMMIT",";","break",";","case","COMMITTED:\n","action","=","recovering","?","Action",".","INITSTATE",":","Action",".","PREPARE",";","break",";","default:\n","throw","new","IllegalStateException","(","\"Unknown","state","\"","+","state",")",";","}","return","action",";"],"docstring_tokens":["Get","the","next","action","to","perform","based","on","this","checkpoint","state"],"prompt_tokens":[]}
{"code_tokens":["public","static","TopologyDef","parseFile","(","String","inputFile,","boolean","dumpYaml,","boolean","processIncludes,\n","Properties","properties,","boolean","envSub",")","throws","IOException","{","FileInputStream","in","=","new","FileInputStream","(","inputFile",")",";","TopologyDef","topology","=","parseInputStream","(","in,","dumpYaml,","processIncludes,","properties,","envSub",")",";","in",".","close","(",")",";","\n\n","return","topology",";"],"docstring_tokens":["Parse","a","flux","topology","definition"],"prompt_tokens":[]}
{"code_tokens":["public","static","TopologyDef","parseResource","(","String","resource,","boolean","dumpYaml,","boolean","processIncludes,\n","Properties","properties,","boolean","envSub",")","throws","IOException","{","InputStream","in","=","FluxParser",".","class",".","getResourceAsStream","(","resource",")",";","TopologyDef","topology","=","parseInputStream","(","in,","dumpYaml,","processIncludes,","properties,","envSub",")",";","in",".","close","(",")",";","\n\n","return","topology",";"],"docstring_tokens":["Parse","a","flux","topology","definition","from","a","classpath","resource"],"prompt_tokens":[]}
{"code_tokens":["private","static","TopologyDef","processIncludes","(","Yaml","yaml,","TopologyDef","topologyDef,","Properties","properties,","boolean","envSub",")","throws","IOException","{","//TODO","support","multiple","levels","of","includes\n","if","(","topologyDef",".","getIncludes","(",")","!=","null",")","{","for","(","IncludeDef","include",":","topologyDef",".","getIncludes","(",")",")","{","TopologyDef","includeTopologyDef","=","null",";","if","(","include",".","isResource","(",")",")","{","LOG",".","info","(","\"Loading","includes","from","resource:","{","}","\",","include",".","getFile","(",")",")",";","includeTopologyDef","=","parseResource","(","include",".","getFile","(",")",",","true,","false,","properties,","envSub",")",";","}","else","{","LOG",".","info","(","\"Loading","includes","from","file:","{","}","\",","include",".","getFile","(",")",")",";","includeTopologyDef","=","parseFile","(","include",".","getFile","(",")",",","true,","false,","properties,","envSub",")",";","}","\n\n","//","if","overrides","are","disabled,","we","won't","replace","anything","that","already","exists\n","boolean","override","=","include",".","isOverride","(",")",";","//","name\n","if","(","includeTopologyDef",".","getName","(",")","!=","null",")","{","topologyDef",".","setName","(","includeTopologyDef",".","getName","(",")",",","override",")",";","}","\n\n","//","config\n","if","(","includeTopologyDef",".","getConfig","(",")","!=","null",")","{","//TODO","move","this","logic","to","the","model","class\n","Map<String,","Object>","config","=","topologyDef",".","getConfig","(",")",";","Map<String,","Object>","includeConfig","=","includeTopologyDef",".","getConfig","(",")",";","if","(","override",")","{","config",".","putAll","(","includeTopologyDef",".","getConfig","(",")",")",";","}","else","{","for","(","String","key",":","includeConfig",".","keySet","(",")",")","{","if","(","config",".","containsKey","(","key",")",")","{","LOG",".","warn","(","\"Ignoring","attempt","to","set","topology","config","property","'","{","}","'","with","override","==","false\",","key",")",";","}","else","{","config",".","put","(","key,","includeConfig",".","get","(","key",")",")",";","}","}","}","}","\n\n","//component","overrides\n","if","(","includeTopologyDef",".","getComponents","(",")","!=","null",")","{","topologyDef",".","addAllComponents","(","includeTopologyDef",".","getComponents","(",")",",","override",")",";","}","//bolt","overrides\n","if","(","includeTopologyDef",".","getBolts","(",")","!=","null",")","{","topologyDef",".","addAllBolts","(","includeTopologyDef",".","getBolts","(",")",",","override",")",";","}","//spout","overrides\n","if","(","includeTopologyDef",".","getSpouts","(",")","!=","null",")","{","topologyDef",".","addAllSpouts","(","includeTopologyDef",".","getSpouts","(",")",",","override",")",";","}","//stream","overrides\n","//TODO","streams","should","be","uniquely","identifiable\n","if","(","includeTopologyDef",".","getStreams","(",")","!=","null",")","{","topologyDef",".","addAllStreams","(","includeTopologyDef",".","getStreams","(",")",",","override",")",";","}","}","//","end","include","processing\n","}","return","topologyDef",";"],"docstring_tokens":["Process","includes","contained","within","a","yaml","file"],"prompt_tokens":[]}
{"code_tokens":["public","void","filterOldTopologies","(","long","cutOffAge",")","{","LSTopoHistoryList","lsTopoHistoryListWrapper","=","(","LSTopoHistoryList",")","get","(","LS_TOPO_HISTORY",")",";","List<LSTopoHistory>","filteredTopoHistoryList","=","new","ArrayList<>","(",")",";","if","(","null","!=","lsTopoHistoryListWrapper",")","{","for","(","LSTopoHistory","topoHistory",":","lsTopoHistoryListWrapper",".","get_topo_history","(",")",")","{","if","(","topoHistory",".","get_time_stamp","(",")",">","cutOffAge",")","{","filteredTopoHistoryList",".","add","(","topoHistory",")",";","}","}","}","put","(","LS_TOPO_HISTORY,","new","LSTopoHistoryList","(","filteredTopoHistoryList",")",")",";"],"docstring_tokens":["Remove","topologies","from","local","state","which","are","older","than","cutOffAge"],"prompt_tokens":[]}
{"code_tokens":["private","boolean","emitOrRetryTuple","(","ConsumerRecord<K,","V>","record",")","{","final","TopicPartition","tp","=","new","TopicPartition","(","record",".","topic","(",")",",","record",".","partition","(",")",")",";","final","KafkaSpoutMessageId","msgId","=","retryService",".","getMessageId","(","tp,","record",".","offset","(",")",")",";","\n\n","if","(","offsetManagers",".","containsKey","(","tp",")","&&","offsetManagers",".","get","(","tp",")",".","contains","(","msgId",")",")","{","//","has","been","acked\n","LOG",".","trace","(","\"Tuple","for","record","[","{","}","]","has","already","been","acked",".","Skipping\",","record",")",";","}","else","if","(","emitted",".","contains","(","msgId",")",")","{","//","has","been","emitted","and","it","is","pending","ack","or","fail\n","LOG",".","trace","(","\"Tuple","for","record","[","{","}","]","has","already","been","emitted",".","Skipping\",","record",")",";","}","else","{","final","List<Object>","tuple","=","kafkaSpoutConfig",".","getTranslator","(",")",".","apply","(","record",")",";","if","(","isEmitTuple","(","tuple",")",")","{","final","boolean","isScheduled","=","retryService",".","isScheduled","(","msgId",")",";","//","not","scheduled","<=>","never","failed","(","i",".","e",".","never","emitted",")",",","or","scheduled","and","ready","to","be","retried\n","if","(","!isScheduled","||","retryService",".","isReady","(","msgId",")",")","{","final","String","stream","=","tuple","instanceof","KafkaTuple","?","(","(","KafkaTuple",")","tuple",")",".","getStream","(",")",":","Utils",".","DEFAULT_STREAM_ID",";","\n\n","if","(","!isAtLeastOnceProcessing","(",")",")","{","if","(","kafkaSpoutConfig",".","isTupleTrackingEnforced","(",")",")","{","collector",".","emit","(","stream,","tuple,","msgId",")",";","LOG",".","trace","(","\"Emitted","tuple","[","{","}","]","for","record","[","{","}","]","with","msgId","[","{","}","]\",","tuple,","record,","msgId",")",";","}","else","{","collector",".","emit","(","stream,","tuple",")",";","LOG",".","trace","(","\"Emitted","tuple","[","{","}","]","for","record","[","{","}","]\",","tuple,","record",")",";","}","}","else","{","emitted",".","add","(","msgId",")",";","offsetManagers",".","get","(","tp",")",".","addToEmitMsgs","(","msgId",".","offset","(",")",")",";","if","(","isScheduled",")","{","//","Was","scheduled","for","retry","and","re-emitted,","so","remove","from","schedule",".","retryService",".","remove","(","msgId",")",";","}","collector",".","emit","(","stream,","tuple,","msgId",")",";","tupleListener",".","onEmit","(","tuple,","msgId",")",";","LOG",".","trace","(","\"Emitted","tuple","[","{","}","]","for","record","[","{","}","]","with","msgId","[","{","}","]\",","tuple,","record,","msgId",")",";","}","return","true",";","}","}","else","{","/*\n","*","if","a","null","tuple","is","not","configured","to","be","emitted,","it","should","be","marked","as","emitted","and","acked","immediately","to","allow","its","offset\n","*","to","be","commited","to","Kafka\n","*/\n","LOG",".","debug","(","\"Not","emitting","null","tuple","for","record","[","{","}","]","as","defined","in","configuration",".","\",","record",")",";","if","(","isAtLeastOnceProcessing","(",")",")","{","msgId",".","setNullTuple","(","true",")",";","offsetManagers",".","get","(","tp",")",".","addToEmitMsgs","(","msgId",".","offset","(",")",")",";","ack","(","msgId",")",";","}","}","}","return","false",";"],"docstring_tokens":["Creates","a","tuple","from","the","kafka","record","and","emits","it","if","it","was","never","emitted","or","it","is","ready","to","be","retried"],"prompt_tokens":[]}
{"code_tokens":["private","boolean","isEmitTuple","(","List<Object>","tuple",")","{","return","tuple","!=","null","||","kafkaSpoutConfig",".","isEmitNullTuples","(",")",";"],"docstring_tokens":["Emits","a","tuple","if","it","is","not","a","null","tuple,","or","if","the","spout","is","configured","to","emit","null","tuples"],"prompt_tokens":[]}
{"code_tokens":["public","Response","build","(",")","{","String","body","=","UIHelpers",".","getJsonResponseBody","(","data,","callback,","needSerialize",")",";","Map<String,","Object>","respHeaders","=","UIHelpers",".","getJsonResponseHeaders","(","callback,","headers",")",";","Response",".","ResponseBuilder","respBuilder","=","Response",".","status","(","status",")",".","entity","(","body",")",";","respHeaders",".","forEach","(","respBuilder::header",")",";","return","respBuilder",".","build","(",")",";"],"docstring_tokens":["Build","a","Response","based","on","given","parameters"],"prompt_tokens":[]}
{"code_tokens":["@Override\n","public","boolean","equals","(","Object","other",")","{","\n\n","if","(","!","(","other","instanceof","Metric",")",")","{","return","false",";","}","\n\n","Metric","o","=","(","Metric",")","other",";","\n\n","return","this","==","other\n","||","(","this",".","name",".","equals","(","o",".","getMetricName","(",")",")","&&","this",".","timestamp","==","o",".","getTimestamp","(",")","&&","this",".","topologyId",".","equals","(","o",".","getTopologyId","(",")",")","&&","this",".","value","==","o",".","getValue","(",")","&&","this",".","componentId",".","equals","(","o",".","getComponentId","(",")",")","&&","this",".","executorId",".","equals","(","o",".","getExecutorId","(",")",")","&&","this",".","hostname",".","equals","(","o",".","getHostname","(",")",")","&&","this",".","streamId",".","equals","(","o",".","getStreamId","(",")",")","&&","this",".","port","==","o",".","getPort","(",")","&&","this",".","count","==","o",".","getCount","(",")","&&","this",".","min","==","o",".","getMin","(",")","&&","this",".","max","==","o",".","getMax","(",")","&&","this",".","sum","==","o",".","getSum","(",")","&&","this",".","aggLevel","==","o",".","getAggLevel","(",")",")",";"],"docstring_tokens":["Check","if","a","Metric","matches","another","object"],"prompt_tokens":[]}
{"code_tokens":["public","void","addValue","(","double","value",")","{","this",".","count","+=","1",";","this",".","min","=","Math",".","min","(","this",".","min,","value",")",";","this",".","max","=","Math",".","max","(","this",".","max,","value",")",";","this",".","sum","+=","value",";","this",".","value","=","this",".","sum","/","this",".","count",";"],"docstring_tokens":["Adds","an","additional","value","to","the","metric"],"prompt_tokens":[]}
{"code_tokens":["public","void","setValue","(","double","value",")","{","this",".","count","=","1L",";","this",".","min","=","value",";","this",".","max","=","value",";","this",".","sum","=","value",";","this",".","value","=","value",";"],"docstring_tokens":["Initialize","the","metric","value"],"prompt_tokens":[]}
{"code_tokens":["public","static","FileLock","tryLock","(","FileSystem","fs,","Path","fileToLock,","Path","lockDirPath,","String","spoutId",")","throws","IOException","{","Path","lockFile","=","new","Path","(","lockDirPath,","fileToLock",".","getName","(",")",")",";","\n\n","try","{","FSDataOutputStream","ostream","=","HdfsUtils",".","tryCreateFile","(","fs,","lockFile",")",";","if","(","ostream","!=","null",")","{","LOG",".","debug","(","\"Acquired","lock","on","file","{","}",".","LockFile=","{","}",",","Spout","=","{","}","\",","fileToLock,","lockFile,","spoutId",")",";","return","new","FileLock","(","fs,","lockFile,","ostream,","spoutId",")",";","}","else","{","LOG",".","debug","(","\"Cannot","lock","file","{","}","as","its","already","locked",".","Spout","=","{","}","\",","fileToLock,","spoutId",")",";","return","null",";","}","}","catch","(","IOException","e",")","{","LOG",".","error","(","\"Error","when","acquiring","lock","on","file","\"","+","fileToLock","+","\"","Spout","=","\"","+","spoutId,","e",")",";","throw","e",";","}"],"docstring_tokens":["returns","lock","on","file","or","null","if","file","is","already","locked"],"prompt_tokens":[]}
{"code_tokens":["public","static","FileLock","takeOwnership","(","FileSystem","fs,","Path","lockFile,","LogEntry","lastEntry,","String","spoutId",")","throws","IOException","{","try","{","if","(","fs","instanceof","DistributedFileSystem",")","{","if","(","!","(","(","DistributedFileSystem",")","fs",")",".","recoverLease","(","lockFile",")",")","{","LOG",".","warn","(","\"Unable","to","recover","lease","on","lock","file","{","}","right","now",".","Cannot","transfer","ownership",".","Will","need","to","try","later",".","Spout","=","{","}","\",\n","lockFile,","spoutId",")",";","return","null",";","}","}","return","new","FileLock","(","fs,","lockFile,","spoutId,","lastEntry",")",";","}","catch","(","IOException","e",")","{","if","(","e","instanceof","RemoteException\n","&&","(","(","RemoteException",")","e",")",".","unwrapRemoteException","(",")","instanceof","AlreadyBeingCreatedException",")","{","LOG",".","warn","(","\"Lock","file","\"","+","lockFile","+","\"is","currently","open",".","Cannot","transfer","ownership","now",".","Will","need","to","try","later",".","Spout=","\"\n","+","spoutId,\n","e",")",";","return","null",";","}","else","{","//","unexpected","error\n","LOG",".","warn","(","\"Cannot","transfer","ownership","now","for","lock","file","\"","+","lockFile","+","\"",".","Will","need","to","try","later",".","Spout","=\"","+","spoutId,","e",")",";","throw","e",";","}","}"],"docstring_tokens":["Takes","ownership","of","the","lock","file","if","possible"],"prompt_tokens":[]}
{"code_tokens":["public","void","release","(",")","throws","IOException","{","lockFileStream",".","close","(",")",";","if","(","!fs",".","delete","(","lockFile,","false",")",")","{","LOG",".","warn","(","\"Unable","to","delete","lock","file,","Spout","=","{","}","\",","componentId",")",";","throw","new","IOException","(","\"Unable","to","delete","lock","file\"",")",";","}","LOG",".","debug","(","\"Released","lock","file","{","}",".","Spout","{","}","\",","lockFile,","componentId",")",";"],"docstring_tokens":["Release","lock","by","deleting","file"],"prompt_tokens":[]}
{"code_tokens":["public","static","String","getNumaIdForPort","(","Integer","port,","Map<String,","Object>","supervisorConf",")","{","Map<String,","Object>","validatedNumaMap","=","getNumaMap","(","supervisorConf",")",";","for","(","Map",".","Entry<String,","Object>","numaEntry",":","validatedNumaMap",".","entrySet","(",")",")","{","Map<String,","Object>","numaMap","=","(","Map<String,","Object>",")","numaEntry",".","getValue","(",")",";","List<Integer>","portList","=","(","List<Integer>",")","numaMap",".","get","(","NUMA_PORTS",")",";","if","(","portList",".","contains","(","port",")",")","{","return","numaEntry",".","getKey","(",")",";","}","}","return","null",";"],"docstring_tokens":["getNumaIdForPort","for","a","specific","supervisor"],"prompt_tokens":[]}
{"code_tokens":["public","static","Set<Integer>","getNumaPorts","(","Map<String,","Object>","supervisorConf",")","{","Set<Integer>","numaPorts","=","new","HashSet<>","(",")",";","Map<String,","Object>","validatedNumaMap","=","getNumaMap","(","supervisorConf",")",";","for","(","Map",".","Entry<String,","Object>","numaEntry",":","validatedNumaMap",".","entrySet","(",")",")","{","Map<String,","Object>","numaMap","=","(","Map<String,","Object>",")","numaEntry",".","getValue","(",")",";","List<Integer>","portList","=","(","List<Integer>",")","numaMap",".","get","(","NUMA_PORTS",")",";","numaPorts",".","addAll","(","portList",")",";","}","return","numaPorts",";"],"docstring_tokens":["gets","the","set","of","all","configured","numa","ports","for","a","specific","supervisor"],"prompt_tokens":[]}
{"code_tokens":["public","static","Map<String,","Object>","getNumaMap","(","Map<String,","Object>","stormConf",")","{","Object","numa","=","stormConf",".","get","(","DaemonConfig",".","SUPERVISOR_NUMA_META",")",";","if","(","numa","==","null",")","{","return","Collections",".","emptyMap","(",")",";","}","return","(","Map<String,","Object>",")","numa",";"],"docstring_tokens":["Return","supervisor","numa","configuration"],"prompt_tokens":[]}
{"code_tokens":["public","static","final","BoundCQLStatementMapperBuilder","boundQuery","(","String","cql",")","{","return","new","BoundCQLStatementMapperBuilder","(","cql",")",";"],"docstring_tokens":["Builds","a","new","bound","statement","based","on","the","specified","query"],"prompt_tokens":[]}
{"code_tokens":["public","static","final","BoundCQLStatementMapperBuilder","boundQuery","(","ContextQuery","field",")","{","return","new","BoundCQLStatementMapperBuilder","(","field",")",";"],"docstring_tokens":["Builds","a","new","bound","statement","identified","by","the","given","field"],"prompt_tokens":[]}
{"code_tokens":["public","static","final","CQLStatementTupleMapper","async","(","final","CQLStatementBuilder",".",".",".","builders",")","{","return","new","CQLStatementTupleMapper",".","DynamicCQLStatementTupleMapper","(","Arrays",".","asList","(","builders",")",")",";"],"docstring_tokens":["Builds","multiple","statements","which","will","be","executed","asynchronously"],"prompt_tokens":[]}
{"code_tokens":["public","void","start","(",")","{","if","(","intervalSecs","!=","null",")","{","LOG",".","debug","(","\"starting","log","cleanup","thread","at","interval:","{","}","\",","intervalSecs",")",";","\n\n","logviewerCleanupTimer","=","new","StormTimer","(","\"logviewer-cleanup\",","(","t,","e",")","->","{","LOG",".","error","(","\"Error","when","doing","logs","cleanup\",","e",")",";","Utils",".","exitProcess","(","20,","\"Error","when","doing","log","cleanup\"",")",";","}",")",";","\n\n","logviewerCleanupTimer",".","scheduleRecurring","(","0,","intervalSecs,","this",")",";","}","else","{","LOG",".","warn","(","\"The","interval","for","log","cleanup","is","not","set",".","Skip","starting","log","cleanup","thread",".","\"",")",";","}"],"docstring_tokens":["Start","log","cleanup","thread"],"prompt_tokens":[]}
{"code_tokens":["@Override\n","public","void","run","(",")","{","int","numFilesCleaned","=","0",";","long","diskSpaceCleaned","=","0L",";","try","(","Timer",".","Context","t","=","cleanupRoutineDuration",".","time","(",")",")","{","final","long","nowMills","=","Time",".","currentTimeMillis","(",")",";","Set<Path>","oldLogDirs","=","selectDirsForCleanup","(","nowMills",")",";","\n\n","final","long","nowSecs","=","TimeUnit",".","MILLISECONDS",".","toSeconds","(","nowMills",")",";","SortedSet<Path>","deadWorkerDirs","=","getDeadWorkerDirs","(","(","int",")","nowSecs,","oldLogDirs",")",";","\n\n","LOG",".","debug","(","\"log","cleanup:","now=","{","}","old","log","dirs","{","}","dead","worker","dirs","{","}","\",","nowSecs,\n","oldLogDirs",".","stream","(",")",".","map","(","p","->","p",".","getFileName","(",")",".","toString","(",")",")",".","collect","(","joining","(","\",\"",")",")",",\n","deadWorkerDirs",".","stream","(",")",".","map","(","p","->","p",".","getFileName","(",")",".","toString","(",")",")",".","collect","(","joining","(","\",\"",")",")",")",";","\n\n","for","(","Path","dir",":","deadWorkerDirs",")","{","Path","path","=","dir",".","toAbsolutePath","(",")",".","normalize","(",")",";","long","sizeInBytes","=","sizeOfDir","(","dir",")",";","LOG",".","info","(","\"Cleaning","up:","Removing","{","}",",","{","}","KB\",","path,","sizeInBytes","*","1e-3",")",";","\n\n","try","{","Utils",".","forceDelete","(","path",".","toString","(",")",")",";","cleanupEmptyTopoDirectory","(","dir",")",";","numFilesCleaned++",";","diskSpaceCleaned","+=","sizeInBytes",";","}","catch","(","Exception","ex",")","{","numFileRemovalExceptions",".","mark","(",")",";","LOG",".","error","(","ex",".","getMessage","(",")",",","ex",")",";","}","}","\n\n","final","List<DeletionMeta>","perWorkerDirCleanupMeta","=","perWorkerDirCleanup","(","maxPerWorkerLogsSizeMb","*","1024","*","1024",")",";","numFilesCleaned","+=","perWorkerDirCleanupMeta",".","stream","(",")",".","mapToInt","(","meta","->","meta",".","deletedFiles",")",".","sum","(",")",";","diskSpaceCleaned","+=","perWorkerDirCleanupMeta",".","stream","(",")",".","mapToLong","(","meta","->","meta",".","deletedSize",")",".","sum","(",")",";","final","DeletionMeta","globalLogCleanupMeta","=","globalLogCleanup","(","maxSumWorkerLogsSizeMb","*","1024","*","1024",")",";","numFilesCleaned","+=","globalLogCleanupMeta",".","deletedFiles",";","diskSpaceCleaned","+=","globalLogCleanupMeta",".","deletedSize",";","}","catch","(","Exception","ex",")","{","numCleanupExceptions",".","mark","(",")",";","LOG",".","error","(","\"Exception","while","cleaning","up","old","log",".","\",","ex",")",";","}","numFilesCleanedUp",".","update","(","numFilesCleaned",")",";","diskSpaceFreed",".","update","(","diskSpaceCleaned",")",";"],"docstring_tokens":["Delete","old","log","dirs","for","which","the","workers","are","no","longer","alive"],"prompt_tokens":[]}
{"code_tokens":["@VisibleForTesting\n","List<DeletionMeta>","perWorkerDirCleanup","(","long","size",")","{","return","workerLogs",".","getAllWorkerDirs","(",")",".","stream","(",")",".","map","(","Unchecked",".","function","(","dir","->\n","directoryCleaner",".","deleteOldestWhileTooLarge","(","Collections",".","singletonList","(","dir",")",",","size,","true,","null",")",")",")",".","collect","(","toList","(",")",")",";"],"docstring_tokens":["Delete","the","oldest","files","in","each","overloaded","worker","log","dir"],"prompt_tokens":[]}
{"code_tokens":["@VisibleForTesting\n","DeletionMeta","globalLogCleanup","(","long","size",")","throws","Exception","{","List<Path>","workerDirs","=","new","ArrayList<>","(","workerLogs",".","getAllWorkerDirs","(",")",")",";","Set<Path>","aliveWorkerDirs","=","workerLogs",".","getAliveWorkerDirs","(",")",";","\n\n","return","directoryCleaner",".","deleteOldestWhileTooLarge","(","workerDirs,","size,","false,","aliveWorkerDirs",")",";"],"docstring_tokens":["Delete","the","oldest","files","in","overloaded","worker-artifacts","globally"],"prompt_tokens":[]}
{"code_tokens":["@VisibleForTesting\n","void","cleanupEmptyTopoDirectory","(","Path","dir",")","throws","IOException","{","Path","topoDir","=","dir",".","getParent","(",")",";","try","(","Stream<Path>","topoDirContent","=","Files",".","list","(","topoDir",")",")","{","if","(","!topoDirContent",".","findAny","(",")",".","isPresent","(",")",")","{","Utils",".","forceDelete","(","topoDir",".","toAbsolutePath","(",")",".","normalize","(",")",".","toString","(",")",")",";","}","}"],"docstring_tokens":["Delete","the","topo","dir","if","it","contains","zero","port","dirs"],"prompt_tokens":[]}
{"code_tokens":["public","void","notify","(","long","count",")","{","currentBucket",".","addAndGet","(","count",")",";"],"docstring_tokens":["Notify","the","tracker","upon","new","arrivals"],"prompt_tokens":[]}
{"code_tokens":["public","static","<T>","AsyncExecutor","getLocal","(","Session","session,","AsyncResultHandler<T>","handler",")","{","AsyncExecutor<T>","executor","=","localAsyncExecutor",".","<T>get","(",")",";","if","(","executor","==","null",")","{","localAsyncExecutor",".","set","(","executor","=","new","AsyncExecutor<>","(","session,","handler",")",")",";","}","return","executor",";"],"docstring_tokens":["Returns","a","new","AsyncExecutor","per","storm","executor"],"prompt_tokens":[]}
{"code_tokens":["public","static","SortedMap<String,","?>","pullConfig","(","Map<String,","Object>","topoConf,\n","String","section",")","throws","IOException","{","Configuration","configuration","=","ClientAuthUtils",".","getConfiguration","(","topoConf",")",";","AppConfigurationEntry[]","configurationEntries","=","ClientAuthUtils",".","getEntries","(","configuration,","section",")",";","\n\n","if","(","configurationEntries","==","null",")","{","return","null",";","}","\n\n","TreeMap<String,","Object>","results","=","new","TreeMap<>","(",")",";","\n\n","for","(","AppConfigurationEntry","entry",":","configurationEntries",")","{","Map<String,","?>","options","=","entry",".","getOptions","(",")",";","for","(","String","key",":","options",".","keySet","(",")",")","{","results",".","put","(","key,","options",".","get","(","key",")",")",";","}","}","\n\n","return","results",";"],"docstring_tokens":["Pull","a","set","of","keys","out","of","a","Configuration"],"prompt_tokens":[]}
{"code_tokens":["public","static","String","get","(","Map<String,","Object>","topoConf,","String","section,","String","key",")","throws","IOException","{","Configuration","configuration","=","ClientAuthUtils",".","getConfiguration","(","topoConf",")",";","return","get","(","configuration,","section,","key",")",";"],"docstring_tokens":["Pull","a","the","value","given","section","and","key","from","Configuration"],"prompt_tokens":[]}
{"code_tokens":["public","static","WorkerToken","readWorkerToken","(","Map<String,","String>","credentials,","WorkerTokenServiceType","type",")","{","WorkerToken","ret","=","null",";","String","key","=","workerTokenCredentialsKey","(","type",")",";","String","tokenStr","=","credentials",".","get","(","key",")",";","if","(","tokenStr","!=","null",")","{","ret","=","Utils",".","deserializeFromString","(","tokenStr,","WorkerToken",".","class",")",";","}","return","ret",";"],"docstring_tokens":["Read","a","WorkerToken","out","of","credentials","for","the","given","type"],"prompt_tokens":[]}
{"code_tokens":["public","static","void","setWorkerToken","(","Map<String,","String>","credentials,","WorkerToken","token",")","{","String","key","=","workerTokenCredentialsKey","(","token",".","get_serviceType","(",")",")",";","credentials",".","put","(","key,","Utils",".","serializeToString","(","token",")",")",";"],"docstring_tokens":["Store","a","worker","token","in","some","credentials"],"prompt_tokens":[]}
{"code_tokens":["public","static","WorkerToken","findWorkerToken","(","Subject","subject,","final","WorkerTokenServiceType","type",")","{","Set<WorkerToken>","creds","=","subject",".","getPrivateCredentials","(","WorkerToken",".","class",")",";","synchronized","(","creds",")","{","return","creds",".","stream","(",")",".","filter","(","(","wt",")","->\n","wt",".","get_serviceType","(",")","==","type",")",".","findAny","(",")",".","orElse","(","null",")",";","}"],"docstring_tokens":["Find","a","worker","token","in","a","given","subject","with","a","given","token","type"],"prompt_tokens":[]}
{"code_tokens":["public","static","void","updateSubject","(","Subject","subject,","Collection<IAutoCredentials>","autos,","Map<String,","String>","credentials",")","{","if","(","subject","==","null","||","autos","==","null",")","{","throw","new","RuntimeException","(","\"The","subject","or","auto","credentials","cannot","be","null","when","updating","a","subject","with","credentials\"",")",";","}","\n\n","try","{","for","(","IAutoCredentials","autoCred",":","autos",")","{","autoCred",".","updateSubject","(","subject,","credentials",")",";","}","}","catch","(","Exception","e",")","{","throw","new","RuntimeException","(","e",")",";","}","insertWorkerTokens","(","subject,","credentials",")",";"],"docstring_tokens":["Update","a","subject","from","credentials","using","the","IAutoCredentials"],"prompt_tokens":[]}
{"code_tokens":["public","boolean","isAuthorizedLogUser","(","String","user,","String","fileName",")","{","Validate",".","isTrue","(","!fileName",".","contains","(","\"",".",".","\"","+","FileSystems",".","getDefault","(",")",".","getSeparator","(",")",")",")",";","if","(","StringUtils",".","isEmpty","(","user",")","||","StringUtils",".","isEmpty","(","fileName",")",")","{","return","false",";","}","LogUserGroupWhitelist","whitelist","=","getLogUserGroupWhitelist","(","fileName",")",";","\n\n","List<String>","logsUsers","=","new","ArrayList<>","(",")",";","logsUsers",".","addAll","(","ObjectReader",".","getStrings","(","stormConf",".","get","(","DaemonConfig",".","LOGS_USERS",")",")",")",";","logsUsers",".","addAll","(","ObjectReader",".","getStrings","(","stormConf",".","get","(","Config",".","NIMBUS_ADMINS",")",")",")",";","if","(","whitelist","!=","null",")","{","logsUsers",".","addAll","(","whitelist",".","getUserWhitelist","(",")",")",";","}","\n\n","List<String>","logsGroups","=","new","ArrayList<>","(",")",";","logsGroups",".","addAll","(","ObjectReader",".","getStrings","(","stormConf",".","get","(","DaemonConfig",".","LOGS_GROUPS",")",")",")",";","logsGroups",".","addAll","(","ObjectReader",".","getStrings","(","stormConf",".","get","(","Config",".","NIMBUS_ADMINS_GROUPS",")",")",")",";","if","(","whitelist","!=","null",")","{","logsGroups",".","addAll","(","whitelist",".","getGroupWhitelist","(",")",")",";","}","\n\n","String","userName","=","principalToLocal",".","toLocal","(","user",")",";","Set<String>","groups","=","getUserGroups","(","userName",")",";","\n\n","return","logsUsers",".","stream","(",")",".","anyMatch","(","u","->","u",".","equals","(","userName",")",")","||","Sets",".","intersection","(","groups,","new","HashSet<>","(","logsGroups",")",")",".","size","(",")",">","0",";","\n\n"],"docstring_tokens":["Checks","whether","user","is","authorized","to","access","file"],"prompt_tokens":[]}
{"code_tokens":["public","LogUserGroupWhitelist","getLogUserGroupWhitelist","(","String","fileName",")","{","File","wlFile","=","ServerConfigUtils",".","getLogMetaDataFile","(","fileName",")",";","Map<String,","Object>","map","=","(","Map<String,","Object>",")","Utils",".","readYamlFile","(","wlFile",".","getAbsolutePath","(",")",")",";","\n\n","if","(","map","==","null",")","{","return","null",";","}","\n\n","List<String>","logsUsers","=","ObjectReader",".","getStrings","(","map",".","get","(","DaemonConfig",".","LOGS_USERS",")",")",";","List<String>","logsGroups","=","ObjectReader",".","getStrings","(","map",".","get","(","DaemonConfig",".","LOGS_GROUPS",")",")",";","return","new","LogUserGroupWhitelist","(","logsUsers",".","isEmpty","(",")","?","new","HashSet<>","(",")",":","new","HashSet<>","(","logsUsers",")",",\n","logsGroups",".","isEmpty","(",")","?","new","HashSet<>","(",")",":","new","HashSet<>","(","logsGroups",")",")",";"],"docstring_tokens":["Get","the","whitelist","of","users","and","groups","for","given","file"],"prompt_tokens":[]}
{"code_tokens":["private","int","getCheckpointInputTaskCount","(","TopologyContext","context",")","{","int","count","=","0",";","for","(","GlobalStreamId","inputStream",":","context",".","getThisSources","(",")",".","keySet","(",")",")","{","if","(","CHECKPOINT_STREAM_ID",".","equals","(","inputStream",".","get_streamId","(",")",")",")","{","count","+=","context",".","getComponentTasks","(","inputStream",".","get_componentId","(",")",")",".","size","(",")",";","}","}","return","count",";"],"docstring_tokens":["returns","the","total","number","of","input","checkpoint","streams","across","all","input","tasks","to","this","component"],"prompt_tokens":[]}
{"code_tokens":["private","void","processCheckpoint","(","Tuple","input",")","{","CheckPointState",".","Action","action","=","(","CheckPointState",".","Action",")","input",".","getValueByField","(","CHECKPOINT_FIELD_ACTION",")",";","long","txid","=","input",".","getLongByField","(","CHECKPOINT_FIELD_TXID",")",";","if","(","shouldProcessTransaction","(","action,","txid",")",")","{","LOG",".","debug","(","\"Processing","action","{","}",",","txid","{","}","\",","action,","txid",")",";","try","{","if","(","txid",">=","lastTxid",")","{","handleCheckpoint","(","input,","action,","txid",")",";","if","(","action","==","ROLLBACK",")","{","lastTxid","=","txid","-","1",";","}","else","{","lastTxid","=","txid",";","}","}","else","{","LOG",".","debug","(","\"Ignoring","old","transaction",".","Action","{","}",",","txid","{","}","\",","action,","txid",")",";","collector",".","ack","(","input",")",";","}","}","catch","(","Throwable","th",")","{","LOG",".","error","(","\"Got","error","while","processing","checkpoint","tuple\",","th",")",";","collector",".","fail","(","input",")",";","collector",".","reportError","(","th",")",";","}","}","else","{","LOG",".","debug","(","\"Waiting","for","action","{","}",",","txid","{","}","from","all","input","tasks",".","checkPointInputTaskCount","{","}",",","\"\n","+","\"transactionRequestCount","{","}","\",","action,","txid,","checkPointInputTaskCount,","transactionRequestCount",")",";","collector",".","ack","(","input",")",";","}"],"docstring_tokens":["Invokes","handleCheckpoint","once","checkpoint","tuple","is","received","on","all","input","checkpoint","streams","to","this","component"],"prompt_tokens":[]}
{"code_tokens":["public","static","Io",".","Builder<GraphMLIo>","graphml","(",")","{","return","GraphMLIo",".","build","(",")",";"],"docstring_tokens":["Creates","a","basic","GraphML-based","Io.Builder"],"prompt_tokens":[]}
{"code_tokens":["public","static","Io",".","Builder<GraphSONIo>","graphson","(",")","{","return","GraphSONIo",".","build","(",")",";"],"docstring_tokens":["Creates","a","basic","GraphSON-based","Io.Builder"],"prompt_tokens":[]}
{"code_tokens":["public","static","Io",".","Builder<GryoIo>","gryo","(",")","{","return","GryoIo",".","build","(",")",";"],"docstring_tokens":["Creates","a","basic","Gryo-based","Io.Builder"],"prompt_tokens":[]}
{"code_tokens":["private","static","IdManager<?>","selectIdManager","(","final","Configuration","config,","final","String","configKey,","final","Class<?","extends","Element>","clazz",")","{","final","String","vertexIdManagerConfigValue","=","config",".","getString","(","configKey,","DefaultIdManager",".","ANY",".","name","(",")",")",";","try","{","return","DefaultIdManager",".","valueOf","(","vertexIdManagerConfigValue",")",";","}","catch","(","IllegalArgumentException","iae",")","{","try","{","return","(","IdManager",")","Class",".","forName","(","vertexIdManagerConfigValue",")",".","newInstance","(",")",";","}","catch","(","Exception","ex",")","{","throw","new","IllegalStateException","(","String",".","format","(","\"Could","not","configure","TinkerGraph","%s","id","manager","with","%s\",","clazz",".","getSimpleName","(",")",",","vertexIdManagerConfigValue",")",")",";","}","}"],"docstring_tokens":["Construct","an","TinkerGraph.IdManager","from","the","TinkerGraph","Configuration"],"prompt_tokens":[]}
{"code_tokens":["public","static","PythonTranslator","of","(","final","String","traversalSource,","final","TypeTranslator","typeTranslator",")","{","return","new","PythonTranslator","(","traversalSource,","typeTranslator",")",";"],"docstring_tokens":["Creates","the","translator","with","a","custom","TypeTranslator","instance"],"prompt_tokens":[]}
{"code_tokens":["public","static","StarGraph","open","(",")","{","return","new","StarGraph","(",")",";"],"docstring_tokens":["Creates","an","empty","StarGraph"],"prompt_tokens":[]}
{"code_tokens":["public","static","StarGraph","of","(","final","Vertex","vertex",")","{","if","(","vertex","instanceof","StarVertex",")","return","(","StarGraph",")","vertex",".","graph","(",")",";","//","else","convert","to","a","star","graph\n","final","StarGraph","starGraph","=","new","StarGraph","(",")",";","final","StarVertex","starVertex","=","(","StarVertex",")","starGraph",".","addVertex","(","T",".","id,","vertex",".","id","(",")",",","T",".","label,","vertex",".","label","(",")",")",";","\n\n","final","boolean","supportsMetaProperties","=","vertex",".","graph","(",")",".","features","(",")",".","vertex","(",")",".","supportsMetaProperties","(",")",";","\n\n","vertex",".","properties","(",")",".","forEachRemaining","(","vp","->","{","final","VertexProperty<?>","starVertexProperty","=","starVertex",".","property","(","VertexProperty",".","Cardinality",".","list,","vp",".","key","(",")",",","vp",".","value","(",")",",","T",".","id,","vp",".","id","(",")",")",";","if","(","supportsMetaProperties",")","vp",".","properties","(",")",".","forEachRemaining","(","p","->","starVertexProperty",".","property","(","p",".","key","(",")",",","p",".","value","(",")",")",")",";","}",")",";","vertex",".","edges","(","Direction",".","IN",")",".","forEachRemaining","(","edge","->","{","final","Edge","starEdge","=","starVertex",".","addInEdge","(","edge",".","label","(",")",",","starGraph",".","addVertex","(","T",".","id,","edge",".","outVertex","(",")",".","id","(",")",")",",","T",".","id,","edge",".","id","(",")",")",";","edge",".","properties","(",")",".","forEachRemaining","(","p","->","starEdge",".","property","(","p",".","key","(",")",",","p",".","value","(",")",")",")",";","}",")",";","\n\n","vertex",".","edges","(","Direction",".","OUT",")",".","forEachRemaining","(","edge","->","{","final","Edge","starEdge","=","starVertex",".","addOutEdge","(","edge",".","label","(",")",",","starGraph",".","addVertex","(","T",".","id,","edge",".","inVertex","(",")",".","id","(",")",")",",","T",".","id,","edge",".","id","(",")",")",";","edge",".","properties","(",")",".","forEachRemaining","(","p","->","starEdge",".","property","(","p",".","key","(",")",",","p",".","value","(",")",")",")",";","}",")",";","return","starGraph",";"],"docstring_tokens":["Creates","a","new","StarGraph","from","a","Vertex"],"prompt_tokens":[]}
{"code_tokens":["@Override\n","public","void","readWrite","(",")","{","throw","new","UnsupportedOperationException","(","\"Remote","transaction","behaviors","are","not","auto-managed","-","they","are","always","manually","controlled\"",")",";"],"docstring_tokens":["This","Transaction","implementation","is","not","auto-managed","and","therefore","this","method","is","not","supported"],"prompt_tokens":[]}
{"code_tokens":["@Override\n","public","void","addTransactionListener","(","final","Consumer<Status>","listener",")","{","throw","new","UnsupportedOperationException","(","\"Remote","transactions","cannot","have","listeners","attached\"",")",";"],"docstring_tokens":["There","is","no","support","for","remote","transaction","listeners"],"prompt_tokens":[]}
{"code_tokens":["public","Service","get","(","final","String","service,","final","boolean","isStart,","final","Map","params",")","{","if","(","service","==","null","||","service",".","equals","(","DirectoryService",".","NAME",")",")","return","this",";","\n\n","checkRegisteredService","(","service",")",";","return","services",".","get","(","service",")",".","createService","(","isStart,","params",")",";"],"docstring_tokens":["Lookup","a","service","by","name"],"prompt_tokens":[]}
{"code_tokens":["protected","String","describe","(","final","ServiceFactory","service",")","{","final","Map","description","=","new","LinkedHashMap","(",")",";","description",".","put","(","\"name\",","service",".","getName","(",")",")",";","final","Map<Type,Set<TraverserRequirement>>","types","=","new","LinkedHashMap<>","(",")",";","for","(","Type","type",":","(","Set<Type>",")","service",".","getSupportedTypes","(",")",")","{","types",".","put","(","type,","service",".","getRequirements","(","type",")",")",";","}","description",".","put","(","\"type:[requirements]:\",","types",")",";","description",".","put","(","\"params\",","service",".","describeParams","(",")",")",";","\n\n","final","ObjectMapper","om","=","new","ObjectMapper","(",")",";","try","{","return","om",".","writeValueAsString","(","description",")",";","}","catch","(","JsonProcessingException","ex",")","{","return","description",".","toString","(",")",";","}"],"docstring_tokens":["Provide","a","service","description","for","the","supplied","service"],"prompt_tokens":[]}
{"code_tokens":["public","<R>","R","detach","(","final","R","attached",")","{","return","(","R",")","detachment",".","detach","(","attached",")",";"],"docstring_tokens":["Applies","the","appropriate","detach","operation","to","elements","that","will","be","raised","in","mutation","events"],"prompt_tokens":[]}
{"code_tokens":["public","static","DetachedVertex",".","Builder","build","(",")","{","return","new","Builder","(","new","DetachedVertex","(",")",")",";"],"docstring_tokens":["Provides","a","way","to","construct","an","immutable","DetachedVertex"],"prompt_tokens":[]}
{"code_tokens":["public","void","add","(","final","Result","result",")","{","this",".","resultLinkedBlockingQueue",".","offer","(","result",")",";","tryDrainNextWaiting","(","false",")",";"],"docstring_tokens":["Adds","a","Result","to","the","queue","which","will","be","later","read","by","the","ResultSet"],"prompt_tokens":[]}
{"code_tokens":["private","void","drainAllWaiting","(",")","{","while","(","!waiting",".","isEmpty","(",")",")","{","tryDrainNextWaiting","(","true",")",";","}"],"docstring_tokens":["Completes","all","remaining","futures"],"prompt_tokens":[]}
{"code_tokens":["@Override\n","public","boolean","submitTask","(","final","SessionTask","sessionTask",")","throws","RejectedExecutionException","{","throw","new","UnsupportedOperationException","(","\"SingleWorker","doesn't","accept","tasks","beyond","the","one","provided","to","the","constructor\"",")",";"],"docstring_tokens":["This","implementation","only","take","a","single","SessionTask","on","construction","-","no","additional","tasks","can","be","submitted"],"prompt_tokens":[]}
{"code_tokens":["@Override\n","public","synchronized","void","close","(",")","{","//","already","closing/closed\n","if","(","!sessions",".","containsKey","(","sessionId",")",")","return",";","\n\n","sessions",".","remove","(","sessionId",")",";","\n\n","if","(","sessionCancelFuture",".","get","(",")","!=","null",")","{","final","ScheduledFuture<?>","f","=","sessionCancelFuture",".","get","(",")",";","if","(","!f",".","isDone","(",")",")","f",".","cancel","(","true",")",";","}"],"docstring_tokens":["Removes","the","session","from","the","session","list","and","cancels","the","future","that","manages","the","lifetime","of","the","session"],"prompt_tokens":[]}
{"code_tokens":["protected","Iterator<?>","fromScript","(","final","SessionTask","sessionTask,","final","String","script",")","throws","Exception","{","final","RequestMessage","msg","=","sessionTask",".","getRequestMessage","(",")",";","final","Map<String,","Object>","args","=","msg",".","getArgs","(",")",";","final","String","language","=","args",".","containsKey","(","Tokens",".","ARGS_LANGUAGE",")","?","(","String",")","args",".","get","(","Tokens",".","ARGS_LANGUAGE",")",":","\"gremlin-groovy\"",";","return","IteratorUtils",".","asIterator","(","getScriptEngine","(","sessionTask,","language",")",".","eval","(","script,","mergeBindingsFromRequest","(","sessionTask,","getWorkerBindings","(",")",")",")",")",";"],"docstring_tokens":["Constructs","an","Iterator","from","the","results","of","a","script","evaluation","provided","in","the","SessionTask"],"prompt_tokens":[]}
{"code_tokens":["protected","void","handleIterator","(","final","SessionTask","sessionTask,","final","Iterator<?>","itty",")","throws","InterruptedException","{","final","ChannelHandlerContext","nettyContext","=","sessionTask",".","getChannelHandlerContext","(",")",";","final","RequestMessage","msg","=","sessionTask",".","getRequestMessage","(",")",";","final","Settings","settings","=","sessionTask",".","getSettings","(",")",";","boolean","warnOnce","=","false",";","\n\n","//","sessionless","requests","are","always","transaction","managed,","but","in-session","requests","are","configurable",".","final","boolean","managedTransactionsForRequest","=","transactionManaged","?\n","true",":","(","Boolean",")","msg",".","getArgs","(",")",".","getOrDefault","(","Tokens",".","ARGS_MANAGE_TRANSACTION,","false",")",";","\n\n","//","we","have","an","empty","iterator","-","happens","on","stuff","like:","g",".","V","(",")",".","iterate","(",")","if","(","!itty",".","hasNext","(",")",")","{","final","Map<String,","Object>","attributes","=","generateStatusAttributes","(","sessionTask,ResponseStatusCode",".","NO_CONTENT,","itty",")",";","//","as","there","is","nothing","left","to","iterate","if","we","are","transaction","managed","then","we","should","execute","a\n","//","commit","here","before","we","send","back","a","NO_CONTENT","which","implies","success\n","if","(","managedTransactionsForRequest",")","closeTransaction","(","sessionTask,","Transaction",".","Status",".","COMMIT",")",";","\n\n","sessionTask",".","writeAndFlush","(","ResponseMessage",".","build","(","msg",")",".","code","(","ResponseStatusCode",".","NO_CONTENT",")",".","statusAttributes","(","attributes",")",".","create","(",")",")",";","return",";","}","\n\n","//","the","batch","size","can","be","overridden","by","the","request\n","final","int","resultIterationBatchSize","=","(","Integer",")","msg",".","optionalArgs","(","Tokens",".","ARGS_BATCH_SIZE",")",".","orElse","(","settings",".","resultIterationBatchSize",")",";","List<Object>","aggregate","=","new","ArrayList<>","(","resultIterationBatchSize",")",";","\n\n","//","use","an","external","control","to","manage","the","loop","as","opposed","to","just","checking","hasNext","(",")","in","the","while",".","this\n","//","prevent","situations","where","auto","transactions","create","a","new","transaction","after","calls","to","commit","(",")","withing\n","//","the","loop","on","calls","to","hasNext","(",")",".","boolean","hasMore","=","itty",".","hasNext","(",")",";","\n\n","while","(","hasMore",")","{","if","(","Thread",".","interrupted","(",")",")","throw","new","InterruptedException","(",")",";","\n\n","//","check","if","an","implementation","needs","to","force","flush","the","aggregated","results","before","the","iteration","batch\n","//","size","is","reached",".","//","todo:","what","implementation","does","this?!","can","we","kill","it","going","forward","-","seems","always","false\n","//","final","boolean","forceFlush","=","isForceFlushed","(","nettyContext,","msg,","itty",")",";","final","boolean","forceFlush","=","false",";","\n\n","//","have","to","check","the","aggregate","size","because","it","is","possible","that","the","channel","is","not","writeable","(","below",")","//","so","iterating","next","(",")","if","the","message","is","not","written","and","flushed","would","bump","the","aggregate","size","beyond\n","//","the","expected","resultIterationBatchSize",".","Total","serialization","time","for","the","response","remains","in\n","//","effect","so","if","the","client","is","\"slow\"","it","may","simply","timeout",".","//\n","//","there","is","a","need","to","check","hasNext","(",")","on","the","iterator","because","if","the","channel","is","not","writeable","the\n","//","previous","pass","through","the","while","loop","will","have","next","(",")","'d","the","iterator","and","if","it","is","\"done\"","then","a\n","//","NoSuchElementException","will","raise","its","head",".","also","need","a","check","to","ensure","that","this","iteration","doesn't\n","//","require","a","forced","flush","which","can","be","forced","by","sub-classes",".","//\n","//","this","could","be","placed","inside","the","isWriteable","(",")","portion","of","the","if-then","below","but","it","seems","better","to\n","//","allow","iteration","to","continue","into","a","batch","if","that","is","possible","rather","than","just","doing","nothing","at","all\n","//","while","waiting","for","the","client","to","catch","up\n","if","(","aggregate",".","size","(",")","<","resultIterationBatchSize","&&","itty",".","hasNext","(",")","&&","!forceFlush",")","aggregate",".","add","(","itty",".","next","(",")",")",";","\n\n","//","send","back","a","page","of","results","if","batch","size","is","met","or","if","it's","the","end","of","the","results","being","iterated",".","//","also","check","writeability","of","the","channel","to","prevent","OOME","for","slow","clients",".","//\n","//","clients","might","decide","to","close","the","Netty","channel","to","the","server","with","a","CloseWebsocketFrame","after","errors\n","//","like","CorruptedFrameException",".","On","the","server,","although","the","channel","gets","closed,","there","might","be","some\n","//","executor","threads","waiting","for","watermark","to","clear","which","will","not","clear","in","these","cases","since","client","has\n","//","already","given","up","on","these","requests",".","This","leads","to","these","executors","waiting","for","the","client","to","consume\n","//","results","till","the","timeout",".","checking","for","isActive","(",")","should","help","prevent","that",".","if","(","nettyContext",".","channel","(",")",".","isActive","(",")","&&","nettyContext",".","channel","(",")",".","isWritable","(",")",")","{","if","(","forceFlush","||","aggregate",".","size","(",")","==","resultIterationBatchSize","||","!itty",".","hasNext","(",")",")","{","final","ResponseStatusCode","code","=","itty",".","hasNext","(",")","?","ResponseStatusCode",".","PARTIAL_CONTENT",":","ResponseStatusCode",".","SUCCESS",";","Frame","frame","=","null",";","try","{","frame","=","makeFrame","(","sessionTask,","aggregate,","code,","itty",")",";","}","catch","(","Exception","ex",")","{","//","a","frame","may","use","a","Bytebuf","which","is","a","countable","release","-","if","it","does","not","get","written\n","//","downstream","it","needs","to","be","released","here\n","if","(","frame","!=","null",")","frame",".","tryRelease","(",")",";","\n\n","//","exception","is","handled","in","makeFrame","(",")","-","serialization","error","gets","written","back","to","driver\n","//","at","that","point\n","if","(","managedTransactionsForRequest",")","closeTransaction","(","sessionTask,","Transaction",".","Status",".","ROLLBACK",")",";","break",";","}","\n\n","//","track","whether","there","is","anything","left","in","the","iterator","because","it","needs","to","be","accessed","after\n","//","the","transaction","could","be","closed","-","in","that","case","a","call","to","hasNext","(",")","could","open","a","new","transaction\n","//","unintentionally\n","final","boolean","moreInIterator","=","itty",".","hasNext","(",")",";","\n\n","try","{","//","only","need","to","reset","the","aggregation","list","if","there's","more","stuff","to","write\n","if","(","moreInIterator",")","aggregate","=","new","ArrayList<>","(","resultIterationBatchSize",")",";","else","{","//","iteration","and","serialization","are","both","complete","which","means","this","finished","successfully",".","note","that\n","//","errors","internal","to","script","eval","or","timeout","will","rollback","given","GremlinServer's","global","configurations",".","//","local","errors","will","get","rolledback","below","because","the","exceptions","aren't","thrown","in","those","cases","to","be\n","//","caught","by","the","GremlinExecutor","for","global","rollback","logic",".","this","only","needs","to","be","committed","if\n","//","there","are","no","more","items","to","iterate","and","serialization","is","complete\n","if","(","managedTransactionsForRequest",")","closeTransaction","(","sessionTask,","Transaction",".","Status",".","COMMIT",")",";","\n\n","//","exit","the","result","iteration","loop","as","there","are","no","more","results","left",".","using","this","external","control\n","//","because","of","the","above","commit",".","some","graphs","may","open","a","new","transaction","on","the","call","to\n","//","hasNext","(",")","hasMore","=","false",";","}","}","catch","(","Exception","ex",")","{","//","a","frame","may","use","a","Bytebuf","which","is","a","countable","release","-","if","it","does","not","get","written\n","//","downstream","it","needs","to","be","released","here\n","if","(","frame","!=","null",")","frame",".","tryRelease","(",")",";","throw","ex",";","}","\n\n","if","(","!moreInIterator",")","iterateComplete","(","sessionTask,","itty",")",";","\n\n","//","the","flush","is","called","after","the","commit","has","potentially","occurred",".","in","this","way,","if","a","commit","was\n","//","required","then","it","will","be","100%","complete","before","the","client","receives","it",".","the","\"frame\"","at","this","point\n","//","should","have","completely","detached","objects","from","the","transaction","(","i",".","e",".","serialization","has","occurred",")","//","so","a","new","one","should","not","be","opened","on","the","flush","down","the","netty","pipeline\n","sessionTask",".","writeAndFlush","(","code,","frame",")",";","}","}","else","{","//","don't","keep","triggering","this","warning","over","and","over","again","for","the","same","request\n","if","(","!warnOnce",")","{","logger",".","warn","(","\"Pausing","response","writing","as","writeBufferHighWaterMark","exceeded","on","{","}","-","writing","will","continue","once","client","has","caught","up\",","msg",")",";","warnOnce","=","true",";","}","\n\n","//","since","the","client","is","lagging","we","can","hold","here","for","a","period","of","time","for","the","client","to","catch","up",".","//","this","isn't","blocking","the","IO","thread","-","just","a","worker",".","TimeUnit",".","MILLISECONDS",".","sleep","(","10",")",";","}","}"],"docstring_tokens":["Provides","a","generic","way","of","iterating","a","result","set","back","to","the","client"],"prompt_tokens":[]}
{"code_tokens":["protected","void","handleGraphOperation","(","final","SessionTask","sessionTask,","final","Bytecode","bytecode,","final","Graph","graph",")","throws","Exception","{","final","RequestMessage","msg","=","sessionTask",".","getRequestMessage","(",")",";","if","(","graph",".","features","(",")",".","graph","(",")",".","supportsTransactions","(",")",")","{","if","(","TX_COMMIT",".","equals","(","bytecode",")","||","TX_ROLLBACK",".","equals","(","bytecode",")",")","{","final","boolean","commit","=","TX_COMMIT",".","equals","(","bytecode",")",";","closeTransaction","(","sessionTask,","commit","?","Transaction",".","Status",".","COMMIT",":","Transaction",".","Status",".","ROLLBACK",")",";","\n\n","//","write","back","a","no-op","for","success\n","final","Map<String,","Object>","attributes","=","generateStatusAttributes","(","sessionTask,\n","ResponseStatusCode",".","NO_CONTENT,","Collections",".","emptyIterator","(",")",")",";","sessionTask",".","writeAndFlush","(","ResponseMessage",".","build","(","msg",")",".","code","(","ResponseStatusCode",".","NO_CONTENT",")",".","statusAttributes","(","attributes",")",".","create","(",")",")",";","}","else","{","throw","new","IllegalStateException","(","String",".","format","(","\"Bytecode","in","request","is","not","a","recognized","graph","operation:","%s\",","bytecode",".","toString","(",")",")",")",";","}","}"],"docstring_tokens":["If","Bytecode","is","detected","to","contain","a","GraphOp","then","it","gets","processed","by","this","method"],"prompt_tokens":[]}
{"code_tokens":["public","void","reset","(",")","{","internalReset","(",")",";","getContext","(",")",".","getBindings","(","ScriptContext",".","ENGINE_SCOPE",")",".","clear","(",")",";"],"docstring_tokens":["Resets","the","entire","GremlinGroovyScriptEngine","by","clearing","script","caches,","recreating","the","classloader,","clearing","bindings"],"prompt_tokens":[]}
{"code_tokens":["@Override\n","public","Bindings","createBindings","(",")","{","return","new","SimpleBindings","(",")",";"],"docstring_tokens":["Create","bindings","to","be","used","by","this","ScriptEngine"],"prompt_tokens":[]}
{"code_tokens":["public","long","getClassCacheLoadFailureCount","(",")","{","//","don't","use","classMap",".","stats","(",")",".","loadFailureCount","(",")","because","the","load","mechanism","always","succeeds","with","a","future\n","//","that","will","in","turn","contain","the","success","or","failure\n","return","failedCompilationCount",".","longValue","(",")",";"],"docstring_tokens":["Gets","the","total","number","of","times","the","cache","lookup","method","failed","to","compile","a","new","script"],"prompt_tokens":[]}
{"code_tokens":["public","double","getClassCacheLoadFailureRate","(",")","{","//","don't","use","classMap",".","stats","(",")",".","loadFailureRate","(",")","because","the","load","mechanism","always","succeeds","with","a","future\n","//","that","will","in","turn","contain","the","success","or","failure\n","long","totalLoadCount","=","classMap",".","stats","(",")",".","loadCount","(",")",";","return","(","totalLoadCount","==","0",")","?","0",".","0\n",":","(","double",")","failedCompilationCount",".","longValue","(",")","/","totalLoadCount",";"],"docstring_tokens":["Gets","the","ratio","of","script","compilation","attempts","that","failed"],"prompt_tokens":[]}
{"code_tokens":["public","long","getClassCacheLoadSuccessCount","(",")","{","//","don't","use","classMap",".","stats","(",")",".","loadSuccessCount","(",")","because","the","load","mechanism","always","succeeds","with","a","future\n","//","that","will","in","turn","contain","the","success","or","failure\n","return","classMap",".","stats","(",")",".","loadCount","(",")","-","failedCompilationCount",".","longValue","(",")",";"],"docstring_tokens":["Gets","the","total","number","of","times","the","cache","lookup","method","succeeded","to","compile","a","new","script"],"prompt_tokens":[]}
{"code_tokens":["public","boolean","isStart","(",")","{","return","isStart",";"],"docstring_tokens":["Determines","if","this","is","a","start","step"],"prompt_tokens":[]}
{"code_tokens":["public","static","Io",".","Builder<GraphSONIo>","build","(",")","{","return","build","(","GraphSONVersion",".","V3_0",")",";"],"docstring_tokens":["Create","a","new","builder","using","the","default","version","of","GraphSON","-","v3"],"prompt_tokens":[]}
{"code_tokens":["@Override\n","public","void","setup","(","final","Map<String,Object>","config",")","{","AllowList","allowList",";","final","String","file","=","(","String",")","config",".","get","(","KEY_AUTHORIZATION_ALLOWLIST",")",";","\n\n","try","{","allowList","=","AllowList",".","read","(","file",")",";","}","catch","(","Exception","e",")","{","throw","new","IllegalArgumentException","(","String",".","format","(","\"Failed","to","read","list","with","allowed","users","from","%s\",","file",")",")",";","}","for","(","Map",".","Entry<String,","List<String>>","entry",":","allowList",".","grants",".","entrySet","(",")",")","{","if","(","!entry",".","getKey","(",")",".","equals","(","SANDBOX",")",")","{","usernamesByTraversalSource",".","put","(","entry",".","getKey","(",")",",","new","ArrayList<>","(",")",")",";","}","for","(","final","String","group",":","entry",".","getValue","(",")",")","{","if","(","allowList",".","groups",".","get","(","group",")","==","null",")","{","throw","new","RuntimeException","(","String",".","format","(","\"Group","'%s'","not","defined","in","file","with","allowed","users",".","\",","group",")",")",";","}","if","(","entry",".","getKey","(",")",".","equals","(","SANDBOX",")",")","{","usernamesSandbox",".","addAll","(","allowList",".","groups",".","get","(","group",")",")",";","}","else","{","usernamesByTraversalSource",".","get","(","entry",".","getKey","(",")",")",".","addAll","(","allowList",".","groups",".","get","(","group",")",")",";","}","}","}"],"docstring_tokens":["This","method","is","called","once","upon","system","startup","to","initialize","the","AllowListAuthorizer"],"prompt_tokens":[]}
{"code_tokens":["public","static","Cluster","open","(",")","{","return","build","(","\"localhost\"",")",".","create","(",")",";"],"docstring_tokens":["Create","a","Cluster","with","all","default","settings","which","will","connect","to","one","contact","point","at","localhost"],"prompt_tokens":[]}
{"code_tokens":["public","static","Cluster","open","(","final","Configuration","conf",")","{","return","getBuilderFromSettings","(","Settings",".","from","(","conf",")",")",".","create","(",")",";"],"docstring_tokens":["Create","a","Cluster","from","Apache","Configurations"],"prompt_tokens":[]}
{"code_tokens":["public","static","AnonymousTraversalSource<GraphTraversalSource>","traversal","(",")","{","return","traversal","(","GraphTraversalSource",".","class",")",";"],"docstring_tokens":["Constructs","an","AnonymousTraversalSource","which","will","then","be","configured","to","spawn","a","GraphTraversalSource"],"prompt_tokens":[]}
{"code_tokens":["public","static","<T","extends","TraversalSource>","AnonymousTraversalSource<T>","traversal","(","final","Class<T>","traversalSourceClass",")","{","return","new","AnonymousTraversalSource<>","(","traversalSourceClass",")",";"],"docstring_tokens":["Constructs","an","AnonymousTraversalSource","which","will","then","be","configured","to","spawn","the","specified","TraversalSource"],"prompt_tokens":[]}
{"code_tokens":["@Override\n","protected","void","doReadWrite","(",")","{","//","do","nothing\n"],"docstring_tokens":["Threaded","transactions","should","be","open","immediately","upon","creation","so","most","implementations","should","do","nothing","with","this","method"],"prompt_tokens":[]}
{"code_tokens":["private","static","Class<?>[]","filterSpecifiedTests","(","final","Class<?>[]","allTests",")","{","if","(","null","==","allTests",")","return","null",";","\n\n","Class<?>[]","filteredTests",";","final","String","override","=","System",".","getenv","(",")",".","getOrDefault","(","\"GREMLIN_TESTS\",","\"\"",")",";","if","(","override",".","equals","(","\"\"",")",")","filteredTests","=","allTests",";","else","{","final","List<String>","filters","=","Arrays",".","asList","(","override",".","split","(","\",\"",")",")",";","final","List<Class<?>>","allowed","=","Stream",".","of","(","allTests",")",".","filter","(","c","->","filters",".","contains","(","c",".","getName","(",")",")",")",".","collect","(","Collectors",".","toList","(",")",")",";","filteredTests","=","allowed",".","toArray","(","new","Class<?>[allowed",".","size","(",")","]",")",";","}","return","filteredTests",";"],"docstring_tokens":["Filter","a","list","of","test","classes","through","the","GREMLIN_TESTS","environment","variable","list"],"prompt_tokens":[]}
{"code_tokens":["public","ResultSet","submit","(","final","String","gremlin",")","{","return","submit","(","gremlin,","RequestOptions",".","EMPTY",")",";"],"docstring_tokens":["Submits","a","Gremlin","script","to","the","server","and","returns","a","ResultSet","once","the","write","of","the","request","is","complete"],"prompt_tokens":[]}
{"code_tokens":["public","static","GraphTraversal<Vertex,","?>","compile","(","final","Graph","graph,","final","String","sparqlQuery",")","{","return","compile","(","graph",".","traversal","(",")",",","sparqlQuery",")",";"],"docstring_tokens":["Converts","SPARQL","to","a","Gremlin","traversal"],"prompt_tokens":[]}
{"code_tokens":["public","static","DriverRemoteConnection","using","(","final","Client","client",")","{","return","using","(","client,","DEFAULT_TRAVERSAL_SOURCE",")",";"],"docstring_tokens":["Creates","a","DriverRemoteConnection","using","an","existing","Client","object"],"prompt_tokens":[]}
{"code_tokens":["Optional<String>","getSessionId","(",")","{","if","(","client","instanceof","Client",".","SessionedClient",")","{","Client",".","SessionedClient","c","=","(","Client",".","SessionedClient",")","client",";","return","Optional",".","of","(","c",".","getSessionId","(",")",")",";","}","\n\n","return","Optional",".","empty","(",")",";"],"docstring_tokens":["If","the","connection","is","bound","to","a","session,","then","get","the","session","identifier","from","it"],"prompt_tokens":[]}
{"code_tokens":["public","static","Settings","read","(","final","InputStream","stream",")","{","Objects",".","requireNonNull","(","stream",")",";","\n\n","final","Constructor","constructor","=","createDefaultYamlConstructor","(",")",";","final","Yaml","yaml","=","new","Yaml","(","constructor",")",";","return","yaml",".","loadAs","(","stream,","Settings",".","class",")",";"],"docstring_tokens":["Read","configuration","from","a","file","into","a","new","Settings","object"],"prompt_tokens":[]}
{"code_tokens":["public","SparkGraphComputer","skipPartitioner","(","final","boolean","skip",")","{","return","configure","(","GREMLIN_SPARK_SKIP_PARTITIONER,","skip",")",";"],"docstring_tokens":["Determines","if","the","graph","RDD","should","be","partitioned","or","not"],"prompt_tokens":[]}
{"code_tokens":["public","static","Io",".","Builder<GryoIo>","build","(",")","{","return","build","(","GryoVersion",".","V3_0",")",";"],"docstring_tokens":["Create","a","new","builder","using","the","default","version","of","Gryo","-","v3"],"prompt_tokens":[]}
{"code_tokens":["public","static","Io",".","Builder<GryoIo>","build","(","final","GryoVersion","version",")","{","return","new","Builder","(","version",")",";"],"docstring_tokens":["Create","a","new","builder","using","the","specified","version","of","Gryo"],"prompt_tokens":[]}
{"code_tokens":["public","<S>","GraphTraversal<S,?>","sparql","(","final","String","query",")","{","final","SparqlTraversalSource","clone","=","this",".","withStrategies","(","SparqlStrategy",".","instance","(",")",")",".","clone","(",")",";","\n\n","//","the","inject","(",")","holds","the","sparql","which","the","SparqlStrategy","then","detects","and","converts","to","a","traversal\n","clone",".","bytecode",".","addStep","(","GraphTraversal",".","Symbols",".","inject,","query",")",";","final","GraphTraversal",".","Admin<S,","S>","traversal","=","new","DefaultGraphTraversal","(","clone",")",";","return","traversal",".","addStep","(","new","InjectStep<>","(","traversal,","query",")",")",";"],"docstring_tokens":["The","start","step","for","a","SPARQL","based","traversal","that","accepts","a","string","representation","of","the","query","to","execute"],"prompt_tokens":[]}
{"code_tokens":["public","static","Builder","build","(","final","GraphSONMapper","mapper",")","{","Builder","builder","=","build","(",")",";","\n\n","builder",".","customModules","=","mapper",".","customModules",";","builder",".","version","=","mapper",".","version",";","builder",".","loadCustomModules","=","mapper",".","loadCustomSerializers",";","builder",".","normalize","=","mapper",".","normalize",";","builder",".","typeInfo","=","mapper",".","typeInfo",";","\n\n","return","builder",";"],"docstring_tokens":["Create","a","new","Builder","from","a","given","GraphSONMapper"],"prompt_tokens":[]}
{"code_tokens":["public","static","Object[]","getGenericLiteralList","(","final","GremlinParser",".","GenericLiteralListContext","objectLiteralList",")","{","if","(","objectLiteralList","==","null","||","objectLiteralList",".","genericLiteralExpr","(",")","==","null",")","{","return","new","Object[0]",";","}","return","objectLiteralList",".","genericLiteralExpr","(",")",".","genericLiteral","(",")",".","stream","(",")",".","filter","(","Objects::nonNull",")",".","map","(","genericLiteral","->","instance","(",")",".","visitGenericLiteral","(","genericLiteral",")",")",".","toArray","(","Object[]::new",")",";"],"docstring_tokens":["Parse","a","generic","literal","list,","and","return","an","object","array"],"prompt_tokens":[]}
{"code_tokens":["public","static","TraversalStrategy[]","getTraversalStrategyList","(","final","GremlinParser",".","TraversalStrategyListContext","traversalStrategyListContext,\n","final","DefaultGremlinBaseVisitor<TraversalStrategy>","traversalStrategyVisitor",")","{","if","(","traversalStrategyListContext","==","null","||","traversalStrategyListContext",".","traversalStrategyExpr","(",")","==","null",")","{","return","new","TraversalStrategy[0]",";","}","return","traversalStrategyListContext",".","traversalStrategyExpr","(",")",".","traversalStrategy","(",")",".","stream","(",")",".","filter","(","Objects::nonNull",")",".","map","(","tstrat","->","traversalStrategyVisitor",".","visitTraversalStrategy","(","tstrat",")",")",".","toArray","(","TraversalStrategy[]::new",")",";"],"docstring_tokens":["Parse","a","TraversalStrategy","literal","list","context","and","return","a","string","array"],"prompt_tokens":[]}
{"code_tokens":["public","boolean","isNoStarts","(",")","{","return","noStarts",";"],"docstring_tokens":["Determines","if","there","is","a","value","to","iterate","from","the","Traversal"],"prompt_tokens":[]}
{"code_tokens":["@Override\n","public","void","writeGraph","(","final","OutputStream","outputStream,","final","Graph","g",")","throws","IOException","{","final","Map<String,","String>","identifiedVertexKeyTypes","=","this",".","vertexKeyTypes",".","orElseGet","(","(",")","->","GraphMLWriter",".","determineVertexTypes","(","g",")",")",";","final","Map<String,","String>","identifiedEdgeKeyTypes","=","this",".","edgeKeyTypes",".","orElseGet","(","(",")","->","GraphMLWriter",".","determineEdgeTypes","(","g",")",")",";","\n\n","if","(","identifiedEdgeKeyTypes",".","containsKey","(","this",".","edgeLabelKey",")",")","throw","new","IllegalStateException","(","String",".","format","(","\"The","edgeLabelKey","value","of[%s]","conflicts","with","the","name","of","an","existing","property","key","to","be","included","in","the","GraphML\",","this",".","edgeLabelKey",")",")",";","if","(","identifiedVertexKeyTypes",".","containsKey","(","this",".","vertexLabelKey",")",")","throw","new","IllegalStateException","(","String",".","format","(","\"The","vertexLabelKey","value","of[%s]","conflicts","with","the","name","of","an","existing","property","key","to","be","included","in","the","GraphML\",","this",".","vertexLabelKey",")",")",";","\n\n","identifiedEdgeKeyTypes",".","put","(","this",".","edgeLabelKey,","GraphMLTokens",".","STRING",")",";","identifiedVertexKeyTypes",".","put","(","this",".","vertexLabelKey,","GraphMLTokens",".","STRING",")",";","\n\n","try","{","final","XMLStreamWriter","writer",";","writer","=","configureWriter","(","outputStream",")",";","\n\n","writer",".","writeStartDocument","(",")",";","writer",".","writeStartElement","(","GraphMLTokens",".","GRAPHML",")",";","writeXmlNsAndSchema","(","writer",")",";","\n\n","writeTypes","(","identifiedVertexKeyTypes,","identifiedEdgeKeyTypes,","writer",")",";","\n\n","writer",".","writeStartElement","(","GraphMLTokens",".","GRAPH",")",";","writer",".","writeAttribute","(","GraphMLTokens",".","ID,","GraphMLTokens",".","G",")",";","writer",".","writeAttribute","(","GraphMLTokens",".","EDGEDEFAULT,","GraphMLTokens",".","DIRECTED",")",";","\n\n","writeVertices","(","writer,","g",")",";","writeEdges","(","writer,","g",")",";","\n\n","writer",".","writeEndElement","(",")",";","//","graph\n","writer",".","writeEndElement","(",")",";","//","graphml\n","writer",".","writeEndDocument","(",")",";","\n\n","writer",".","flush","(",")",";","writer",".","close","(",")",";","}","catch","(","XMLStreamException","xse",")","{","throw","new","IOException","(","xse",")",";","}"],"docstring_tokens":["Write","the","data","in","a","Graph","to","a","GraphML","OutputStream"],"prompt_tokens":[]}
{"code_tokens":["public","void","writeValueFlagNull","(","Buffer","buffer",")","{","buffer",".","writeByte","(","VALUE_FLAG_NULL",")",";"],"docstring_tokens":["Writes","a","single","byte","representing","the","null","value_flag"],"prompt_tokens":[]}
{"code_tokens":["public","void","writeValueFlagNone","(","Buffer","buffer",")","{","buffer",".","writeByte","(","VALUE_FLAG_NONE",")",";"],"docstring_tokens":["Writes","a","single","byte","with","value","0,","representing","an","unset","value_flag"],"prompt_tokens":[]}
{"code_tokens":["@Override\n","public","<I","extends","InputShim>","StarGraph","read","(","final","KryoShim<I,","?>","kryo,","final","I","input,","final","Class<StarGraph>","clazz",")","{","final","StarGraph","starGraph","=","StarGraph",".","open","(",")",";","input",".","readByte","(",")",";","//","version","field","ignored","for","now","-","for","future","use","with","backward","compatibility\n","starGraph",".","edgeProperties","=","kryo",".","readObjectOrNull","(","input,","HashMap",".","class",")",";","starGraph",".","metaProperties","=","kryo",".","readObjectOrNull","(","input,","HashMap",".","class",")",";","starGraph",".","addVertex","(","T",".","id,","kryo",".","readClassAndObject","(","input",")",",","T",".","label,","kryo",".","readObject","(","input,","String",".","class",")",")",";","readEdges","(","kryo,","input,","starGraph,","Direction",".","IN",")",";","readEdges","(","kryo,","input,","starGraph,","Direction",".","OUT",")",";","if","(","kryo",".","readObject","(","input,","Boolean",".","class",")",")","{","final","int","numberOfUniqueKeys","=","kryo",".","readObject","(","input,","Integer",".","class",")",";","for","(","int","i","=","0",";","i","<","numberOfUniqueKeys",";","i++",")","{","final","String","vertexPropertyKey","=","kryo",".","readObject","(","input,","String",".","class",")",";","final","int","numberOfVertexPropertiesWithKey","=","kryo",".","readObject","(","input,","Integer",".","class",")",";","for","(","int","j","=","0",";","j","<","numberOfVertexPropertiesWithKey",";","j++",")","{","final","Object","id","=","kryo",".","readClassAndObject","(","input",")",";","final","Object","value","=","kryo",".","readClassAndObject","(","input",")",";","starGraph",".","starVertex",".","property","(","VertexProperty",".","Cardinality",".","list,","vertexPropertyKey,","value,","T",".","id,","id",")",";","}","}","}","return","this",".","graphFilter",".","hasFilter","(",")","?","starGraph",".","applyGraphFilter","(","this",".","graphFilter",")",".","orElse","(","null",")",":","starGraph",";"],"docstring_tokens":["If","the","returned","StarGraph","is","null,","that","means","that","the","GraphFilter","filtered","the","vertex"],"prompt_tokens":[]}
{"code_tokens":["public","boolean","isClosed","(",")","{","return","closed",";"],"docstring_tokens":["Determines","if","the","traversal","has","been","fully","iterated","and","resources","released"],"prompt_tokens":[]}
{"code_tokens":["public","CompletableFuture<Object>","eval","(","final","String","script",")","{","return","eval","(","script,","null,","new","SimpleBindings","(",")",")",";"],"docstring_tokens":["Evaluate","a","script","with","empty","bindings"],"prompt_tokens":[]}
{"code_tokens":["public","CompletableFuture<Object>","eval","(","final","String","script,","final","Bindings","boundVars",")","{","return","eval","(","script,","null,","boundVars",")",";"],"docstring_tokens":["Evaluate","a","script","with","specified","bindings"],"prompt_tokens":[]}
{"code_tokens":["public","CompletableFuture<Object>","eval","(","final","String","script,","final","Map<String,","Object>","boundVars",")","{","return","eval","(","script,","null,","new","SimpleBindings","(","boundVars",")",")",";"],"docstring_tokens":["Evaluate","a","script","with","a","Map","of","bindings"],"prompt_tokens":[]}
{"code_tokens":["public","CompletableFuture<Object>","eval","(","final","String","script,","final","String","language,","final","Bindings","boundVars,","final","LifeCycle","lifeCycle",")","{","final","String","lang","=","Optional",".","ofNullable","(","language",")",".","orElse","(","\"gremlin-groovy\"",")",";","\n\n","if","(","logger",".","isDebugEnabled","(",")",")","{","logger",".","debug","(","\"Preparing","to","evaluate","script","-","{","}","-","in","thread","[","{","}","]\",","script,","Thread",".","currentThread","(",")",".","getName","(",")",")",";","}","\n\n","final","Bindings","bindings","=","new","SimpleBindings","(",")",";","bindings",".","putAll","(","globalBindings",")",";","bindings",".","putAll","(","boundVars",")",";","\n\n","//","override","the","timeout","if","the","lifecycle","has","a","value","assigned",".","if","the","script","contains","with","(","timeout",")","//","options","then","allow","that","value","to","override","what's","provided","on","the","lifecycle\n","final","Optional<Long>","timeoutDefinedInScript","=","GremlinScriptChecker",".","parse","(","script",")",".","getTimeout","(",")",";","final","long","scriptEvalTimeOut","=","timeoutDefinedInScript",".","orElse","(","lifeCycle",".","getEvaluationTimeoutOverride","(",")",".","orElse","(","evaluationTimeout",")",")",";","\n\n","final","CompletableFuture<Object>","evaluationFuture","=","new","CompletableFuture<>","(",")",";","final","FutureTask<Void>","evalFuture","=","new","FutureTask<>","(","(",")","->","{","try","{","lifeCycle",".","getBeforeEval","(",")",".","orElse","(","beforeEval",")",".","accept","(","bindings",")",";","\n\n","logger",".","debug","(","\"Evaluating","script","-","{","}","-","in","thread","[","{","}","]\",","script,","Thread",".","currentThread","(",")",".","getName","(",")",")",";","\n\n","final","Object","o","=","gremlinScriptEngineManager",".","getEngineByName","(","lang",")",".","eval","(","script,","bindings",")",";","\n\n","//","apply","a","transformation","before","sending","back","the","result","-","useful","when","trying","to","force","serialization\n","//","in","the","same","thread","that","the","eval","took","place","given","ThreadLocal","nature","of","graphs","as","well","as","some\n","//","transactional","constraints\n","final","Object","result","=","lifeCycle",".","getTransformResult","(",")",".","isPresent","(",")","?\n","lifeCycle",".","getTransformResult","(",")",".","get","(",")",".","apply","(","o",")",":","o",";","\n\n","//","a","mechanism","for","taking","the","final","result","and","doing","something","with","it","in","the","same","thread,","but\n","//","AFTER","the","eval","and","transform","are","done","and","that","future","completed",".","this","provides","a","final","means\n","//","for","working","with","the","result","in","the","same","thread","as","it","was","eval'd\n","if","(","lifeCycle",".","getWithResult","(",")",".","isPresent","(",")",")","lifeCycle",".","getWithResult","(",")",".","get","(",")",".","accept","(","result",")",";","\n\n","lifeCycle",".","getAfterSuccess","(",")",".","orElse","(","afterSuccess",")",".","accept","(","bindings",")",";","\n\n","//","the","evaluationFuture","must","be","completed","after","all","processing","as","an","exception","in","lifecycle","events\n","//","that","must","raise","as","an","exception","to","the","caller","who","has","the","returned","evaluationFuture",".","in","other","words,\n","//","if","it","occurs","before","this","point,","then","the","handle","(",")","method","won't","be","called","again","if","there","is","an\n","//","exception","that","ends","up","below","trying","to","completeExceptionally","(",")","evaluationFuture",".","complete","(","result",")",";","}","catch","(","Throwable","ex",")","{","final","Throwable","root","=","null","==","ex",".","getCause","(",")","?","ex",":","ExceptionUtils",".","getRootCause","(","ex",")",";","\n\n","//","thread","interruptions","will","typically","come","as","the","result","of","a","timeout,","so","in","those","cases,\n","//","check","for","that","situation","and","convert","to","TimeoutException\n","if","(","root","instanceof","InterruptedException\n","||","root","instanceof","TraversalInterruptedException\n","||","root","instanceof","InterruptedIOException",")","{","lifeCycle",".","getAfterTimeout","(",")",".","orElse","(","afterTimeout",")",".","accept","(","bindings",")",";","evaluationFuture",".","completeExceptionally","(","new","TimeoutException","(","String",".","format","(","\"Evaluation","exceeded","the","configured","'evaluationTimeout'","threshold","of","%s","ms","or","evaluation","was","otherwise","cancelled","directly","for","request","[%s]:","%s\",","scriptEvalTimeOut,","script,","root",".","getMessage","(",")",")",")",")",";","}","else","{","lifeCycle",".","getAfterFailure","(",")",".","orElse","(","afterFailure",")",".","accept","(","bindings,","root",")",";","evaluationFuture",".","completeExceptionally","(","root",")",";","}","}","\n\n","return","null",";","}",")",";","\n\n","final","WeakReference<CompletableFuture<Object>>","evaluationFutureRef","=","new","WeakReference<>","(","evaluationFuture",")",";","final","Future<?>","executionFuture","=","executorService",".","submit","(","evalFuture",")",";","if","(","scriptEvalTimeOut",">","0",")","{","//","Schedule","a","timeout","in","the","thread","pool","for","future","execution\n","final","ScheduledFuture<?>","sf","=","scheduledExecutorService",".","schedule","(","(",")","->","{","if","(","executionFuture",".","cancel","(","true",")",")","{","final","CompletableFuture<Object>","ef","=","evaluationFutureRef",".","get","(",")",";","if","(","ef","!=","null",")","{","ef",".","completeExceptionally","(","new","TimeoutException","(","String",".","format","(","\"Evaluation","exceeded","the","configured","'evaluationTimeout'","threshold","of","%s","ms","or","evaluation","was","otherwise","cancelled","directly","for","request","[%s]\",","scriptEvalTimeOut,","script",")",")",")",";","}","}","}",",","scriptEvalTimeOut,","TimeUnit",".","MILLISECONDS",")",";","\n\n","//","Cancel","the","scheduled","timeout","if","the","eval","future","is","complete","or","the","script","evaluation","failed","with","exception\n","evaluationFuture",".","handleAsync","(","(","v,","t",")","->","{","if","(","!sf",".","isDone","(",")",")","{","logger",".","debug","(","\"Killing","scheduled","timeout","on","script","evaluation","-","{","}","-","as","the","eval","completed","(","possibly","with","exception",")",".","\",","script",")",";","sf",".","cancel","(","true",")",";","}","\n\n","//","no","return","is","necessary","-","nothing","downstream","is","concerned","with","what","happens","in","here\n","return","null",";","}",",","scheduledExecutorService",")",";","}","\n\n","return","evaluationFuture",";"],"docstring_tokens":["Evaluate","a","script","and","allow","for","the","submission","of","alteration","to","the","entire","evaluation","execution","lifecycle"],"prompt_tokens":[]}
{"code_tokens":["public","Traversal",".","Admin","eval","(","final","Bytecode","bytecode,","final","Bindings","boundVars,","final","String","language,","final","String","traversalSource",")","throws","ScriptException","{","final","String","lang","=","Optional",".","ofNullable","(","language",")",".","orElse","(","\"gremlin-groovy\"",")",";","\n\n","final","Bindings","bindings","=","new","SimpleBindings","(",")",";","bindings",".","putAll","(","globalBindings",")",";","bindings",".","putAll","(","boundVars",")",";","\n\n","return","gremlinScriptEngineManager",".","getEngineByName","(","lang",")",".","eval","(","bytecode,","bindings,","traversalSource",")",";"],"docstring_tokens":["Evaluates","bytecode","with","bindings","for","a","specific","language","into","a","Traversal"],"prompt_tokens":[]}
{"code_tokens":["@Override\n","public","void","close","(",")","throws","Exception","{","closeAsync","(",")",".","join","(",")",";"],"docstring_tokens":["Executors","are","only","closed","if","they","were","not","supplied","externally","in","the","GremlinExecutor.Builder"],"prompt_tokens":[]}
{"code_tokens":["public","static","Builder","build","(",")","{","return","new","Builder","(",")",";"],"docstring_tokens":["Create","a","Builder","with","the","gremlin-groovy","ScriptEngine","configured"],"prompt_tokens":[]}
{"code_tokens":["public","static","NoSuchElementException","instance","(",")","{","return","INSTANCE",";"],"docstring_tokens":["Retrieve","a","singleton,","fast","NoSuchElementException","without","a","stack","trace"],"prompt_tokens":[]}
{"code_tokens":["public","static","void","validateLabel","(","final","String","label",")","throws","IllegalArgumentException","{","if","(","null","==","label",")","throw","Element",".","Exceptions",".","labelCanNotBeNull","(",")",";","if","(","label",".","isEmpty","(",")",")","throw","Element",".","Exceptions",".","labelCanNotBeEmpty","(",")",";","if","(","Graph",".","Hidden",".","isHidden","(","label",")",")","throw","Element",".","Exceptions",".","labelCanNotBeAHiddenKey","(","label",")",";"],"docstring_tokens":["Determine","whether","the","Element","label","can","be","legally","set"],"prompt_tokens":[]}
{"code_tokens":["public","static","Result","parse","(","final","String","gremlin",")","{","if","(","gremlin",".","isEmpty","(",")",")","return","EMPTY_RESULT",";","\n\n","//","do","a","cheap","check","for","tokens","we","care","about","-","no","need","to","parse","unless","one","of","these","tokens","is","present","in\n","//","the","string",".","if","(","tokens",".","stream","(",")",".","noneMatch","(","gremlin::contains",")",")","return","EMPTY_RESULT",";","\n\n","//","kill","out","comments/whitespace",".","for","whitespace,","ignoring","the","need","to","keep","string","literals","together","as","that\n","//","isn't","currently","a","requirement\n","final","String","cleanGremlin","=","patternClean",".","matcher","(","gremlin",")",".","replaceAll","(","\"\"",")",";","\n\n","final","Matcher","m","=","patternTimeout",".","matcher","(","cleanGremlin",")",";","if","(","!m",".","find","(",")",")","return","EMPTY_RESULT",";","\n\n","long","l","=","Long",".","parseLong","(","m",".","group","(","1",")",")",";","while","(","m",".","find","(",")",")","{","l","+=","Long",".","parseLong","(","m",".","group","(","1",")",")",";","}","\n\n","return","new","Result","(","l",")",";"],"docstring_tokens":["Parses","a","Gremlin","script","and","extracts","a","Result","containing","properties","that","are","relevant","to","the","checker"],"prompt_tokens":[]}
{"code_tokens":["public","static","<S,","E>","int","stepIndex","(","final","Step<S,","E>","step,","final","Traversal",".","Admin<?,","?>","traversal",")","{","int","i","=","0",";","for","(","final","Step","s",":","traversal",".","getSteps","(",")",")","{","if","(","s",".","equals","(","step,","true",")",")","return","i",";","i++",";","}","return","-1",";"],"docstring_tokens":["Gets","the","index","of","a","particular","step","in","the","Traversal"],"prompt_tokens":[]}
{"code_tokens":["public","static","boolean","hasStepOfClass","(","final","Class","stepClass,","final","Traversal",".","Admin<?,","?>","traversal",")","{","for","(","final","Step<?,","?>","step",":","traversal",".","getSteps","(",")",")","{","if","(","step",".","getClass","(",")",".","equals","(","stepClass",")",")","{","return","true",";","}","}","return","false",";"],"docstring_tokens":["Determine","if","the","traversal","has","a","step","of","a","particular","class"],"prompt_tokens":[]}
{"code_tokens":["public","static","boolean","hasStepOfAssignableClass","(","final","Class","superClass,","final","Traversal",".","Admin<?,","?>","traversal",")","{","for","(","final","Step<?,","?>","step",":","traversal",".","getSteps","(",")",")","{","if","(","superClass",".","isAssignableFrom","(","step",".","getClass","(",")",")",")","{","return","true",";","}","}","return","false",";"],"docstring_tokens":["Determine","if","the","traversal","has","a","step","of","an","assignable","class"],"prompt_tokens":[]}
{"code_tokens":["public","static","boolean","hasStepOfAssignableClassRecursively","(","final","Class","stepClass,","final","Traversal",".","Admin<?,","?>","traversal",")","{","return","hasStepOfAssignableClassRecursively","(","null,","stepClass,","traversal",")",";"],"docstring_tokens":["Determine","if","the","traversal","has","a","step","of","an","assignable","class","in","the","current","Traversal","and","its","local","and","global","child","traversals"],"prompt_tokens":[]}
{"code_tokens":["public","static","boolean","hasStepOfAssignableClassRecursively","(","final","Scope","scope,","final","Class","stepClass,","final","Traversal",".","Admin<?,","?>","traversal",")","{","for","(","final","Step<?,","?>","step",":","traversal",".","getSteps","(",")",")","{","if","(","stepClass",".","isAssignableFrom","(","step",".","getClass","(",")",")",")","{","return","true",";","}","if","(","step","instanceof","TraversalParent",")","{","if","(","null","==","scope","||","Scope",".","local",".","equals","(","scope",")",")","{","for","(","final","Traversal",".","Admin<?,","?>","localChild",":","(","(","TraversalParent",")","step",")",".","getLocalChildren","(",")",")","{","if","(","hasStepOfAssignableClassRecursively","(","stepClass,","localChild",")",")","return","true",";","}","}","if","(","null","==","scope","||","Scope",".","global",".","equals","(","scope",")",")","{","for","(","final","Traversal",".","Admin<?,","?>","globalChild",":","(","(","TraversalParent",")","step",")",".","getGlobalChildren","(",")",")","{","if","(","hasStepOfAssignableClassRecursively","(","stepClass,","globalChild",")",")","return","true",";","}","}","}","}","return","false",";"],"docstring_tokens":["Determine","if","the","traversal","has","a","step","of","an","assignable","class","in","the","current","Traversal","and","its","Scope","child","traversals"],"prompt_tokens":[]}
{"code_tokens":["public","static","boolean","hasStepOfAssignableClassRecursively","(","final","Collection<Class>","stepClasses,","final","Traversal",".","Admin<?,","?>","traversal",")","{","return","hasStepOfAssignableClassRecursively","(","null,","stepClasses,","traversal",")",";"],"docstring_tokens":["Determine","if","the","traversal","has","any","of","the","supplied","steps","of","an","assignable","class","in","the","current","Traversal","and","its","global","or","local","child","traversals"],"prompt_tokens":[]}
{"code_tokens":["public","static","boolean","hasStepOfAssignableClassRecursively","(","final","Scope","scope,","final","Collection<Class>","stepClasses,","final","Traversal",".","Admin<?,","?>","traversal",")","{","if","(","stepClasses",".","size","(",")","==","1",")","return","hasStepOfAssignableClassRecursively","(","stepClasses",".","iterator","(",")",".","next","(",")",",","traversal",")",";","for","(","final","Step<?,","?>","step",":","traversal",".","getSteps","(",")",")","{","if","(","IteratorUtils",".","anyMatch","(","stepClasses",".","iterator","(",")",",","stepClass","->","stepClass",".","isAssignableFrom","(","step",".","getClass","(",")",")",")",")","{","return","true",";","}","if","(","step","instanceof","TraversalParent",")","{","if","(","null","==","scope","||","Scope",".","local",".","equals","(","scope",")",")","{","for","(","final","Traversal",".","Admin<?,","?>","localChild",":","(","(","TraversalParent",")","step",")",".","getLocalChildren","(",")",")","{","if","(","hasStepOfAssignableClassRecursively","(","stepClasses,","localChild",")",")","return","true",";","}","}","if","(","null","==","scope","||","Scope",".","global",".","equals","(","scope",")",")","{","for","(","final","Traversal",".","Admin<?,","?>","globalChild",":","(","(","TraversalParent",")","step",")",".","getGlobalChildren","(",")",")","{","if","(","hasStepOfAssignableClassRecursively","(","stepClasses,","globalChild",")",")","return","true",";","}","}","}","}","return","false",";"],"docstring_tokens":["Determine","if","the","traversal","has","any","of","the","supplied","steps","of","an","assignable","class","in","the","current","Traversal","and","its","Scope","child","traversals"],"prompt_tokens":[]}
{"code_tokens":["public","static","boolean","anyStepRecursively","(","final","Predicate<Step>","predicate,","final","Traversal",".","Admin<?,","?>","traversal",")","{","for","(","final","Step<?,","?>","step",":","traversal",".","getSteps","(",")",")","{","if","(","predicate",".","test","(","step",")",")","{","return","true",";","}","\n\n","if","(","step","instanceof","TraversalParent","&&","anyStepRecursively","(","predicate,","(","(","TraversalParent",")","step",")",")",")","{","return","true",";","}","}","return","false",";"],"docstring_tokens":["Determine","if","any","step","in","Traversal","or","its","children","match","the","step","given","the","provided","Predicate"],"prompt_tokens":[]}
{"code_tokens":["public","static","String","getShortName","(","final","Step","step,","final","int","maxLength",")","{","final","String","name","=","step",".","toString","(",")",";","if","(","name",".","length","(",")",">","maxLength",")","return","name",".","substring","(","0,","maxLength","-","3",")","+","\"",".",".",".","\"",";","return","name",";"],"docstring_tokens":["Returns","the","name","of","step","truncated","to","maxLength"],"prompt_tokens":[]}
{"code_tokens":["public","String","prettyPrint","(","final","int","maxLineLength",")","{","final","String","originalTraversal","=","\"Original","Traversal\"",";","final","String","finalTraversal","=","\"Final","Traversal\"",";","final","int","maxStrategyColumnLength","=","getStrategyTraversalsAsString","(",")",".","map","(","String::length",")",".","max","(","Comparator",".","naturalOrder","(",")",")",".","orElse","(","15",")",";","final","int","newLineIndent","=","maxStrategyColumnLength","+","10",";","final","int","maxTraversalColumn","=","maxLineLength","-","newLineIndent",";","if","(","maxTraversalColumn","<","1",")","throw","new","IllegalArgumentException","(","\"The","maximum","line","length","is","too","small","to","present","the","\"","+","TraversalExplanation",".","class",".","getSimpleName","(",")","+","\":","\"","+","maxLineLength",")",";","int","largestTraversalColumn","=","getTraversalStepsAsString","(",")",".","map","(","s","->","wordWrap","(","s,","maxTraversalColumn,","newLineIndent",")",")",".","flatMap","(","s","->","Stream",".","of","(","s",".","split","(","\"\\n\"",")",")",")",".","map","(","String::trim",")",".","map","(","s","->","s",".","trim","(",")",".","startsWith","(","\"[\"",")","?","s",":","\"","\"","+","s",")","//","3","indent","on","new","lines\n",".","map","(","String::length",")",".","max","(","Comparator",".","naturalOrder","(",")",")",".","get","(",")",";","\n\n","final","StringBuilder","builder","=","new","StringBuilder","(","\"Traversal","Explanation\\n\"",")",";","for","(","int","i","=","0",";","i","<","(","maxStrategyColumnLength","+","7","+","largestTraversalColumn",")",";","i++",")","{","builder",".","append","(","\"=\"",")",";","}","\n\n","spacing","(","originalTraversal,","maxStrategyColumnLength,","builder",")",";","\n\n","builder",".","append","(","wordWrap","(","getOriginalTraversalAsString","(",")",",","maxTraversalColumn,","newLineIndent",")",")",";","builder",".","append","(","\"\\n\\n\"",")",";","\n\n","final","List<Triplet<String,String,String>>","intermediates","=","this",".","getIntermediates","(",")",".","collect","(","Collectors",".","toList","(",")",")",";","for","(","Triplet<String,String,String>","t",":","intermediates",")","{","builder",".","append","(","t",".","getValue0","(",")",")",";","int","spacesToAdd","=","maxStrategyColumnLength","-","t",".","getValue0","(",")",".","length","(",")","+","1",";","for","(","int","i","=","0",";","i","<","spacesToAdd",";","i++",")","{","builder",".","append","(","\"","\"",")",";","}","builder",".","append","(","\"[\"",")",".","append","(","t",".","getValue1","(",")",".","substring","(","0,","1",")",")",".","append","(","\"]\"",")",";","for","(","int","i","=","0",";","i","<","3",";","i++",")","{","builder",".","append","(","\"","\"",")",";","}","builder",".","append","(","wordWrap","(","t",".","getValue2","(",")",",","maxTraversalColumn,","newLineIndent",")",")",".","append","(","\"\\n\"",")",";","}","\n\n","spacing","(","finalTraversal,","maxStrategyColumnLength,","builder",")",";","\n\n","builder",".","append","(","wordWrap","(","(","intermediates",".","size","(",")",">","0","?\n","intermediates",".","get","(","intermediates",".","size","(",")","-","1",")",".","getValue2","(",")",":\n","getOriginalTraversalAsString","(",")",")",",","maxTraversalColumn,","newLineIndent",")",")",";","return","builder",".","toString","(",")",";"],"docstring_tokens":["A","pretty-print","representation","of","the","traversal","explanation"],"prompt_tokens":[]}
{"code_tokens":["public","synchronized","CompletableFuture<ServerGremlinExecutor>","start","(",")","throws","Exception","{","if","(","serverStarted","!=","null",")","{","//","server","already","started","-","don't","get","it","rolling","again\n","return","serverStarted",";","}","\n\n","serverStarted","=","new","CompletableFuture<>","(",")",";","final","CompletableFuture<ServerGremlinExecutor>","serverReadyFuture","=","serverStarted",";","try","{","final","ServerBootstrap","b","=","new","ServerBootstrap","(",")",";","\n\n","//","when","high","value","is","reached","then","the","channel","becomes","non-writable","and","stays","like","that","until","the\n","//","low","value","is","so","that","there","is","time","to","recover\n","b",".","childOption","(","ChannelOption",".","WRITE_BUFFER_WATER_MARK,\n","new","WriteBufferWaterMark","(","settings",".","writeBufferLowWaterMark,","settings",".","writeBufferHighWaterMark",")",")",";","b",".","childOption","(","ChannelOption",".","ALLOCATOR,","PooledByteBufAllocator",".","DEFAULT",")",";","\n\n","//","fire","off","any","lifecycle","scripts","that","were","provided","by","the","user",".","hooks","get","initialized","during\n","//","ServerGremlinExecutor","initialization\n","serverGremlinExecutor",".","getHooks","(",")",".","forEach","(","hook","->","{","logger",".","info","(","\"Executing","start","up","{","}","\",","LifeCycleHook",".","class",".","getSimpleName","(",")",")",";","try","{","hook",".","onStartUp","(","new","LifeCycleHook",".","Context","(","logger",")",")",";","}","catch","(","UnsupportedOperationException","uoe",")","{","//","if","the","user","doesn't","implement","onStartUp","the","scriptengine","will","throw\n","//","this","exception",".","it","can","safely","be","ignored",".","}","}",")",";","\n\n","channelizer","=","createChannelizer","(","settings",")",";","channelizer",".","init","(","serverGremlinExecutor",")",";","b",".","group","(","bossGroup,","workerGroup",")",".","childHandler","(","channelizer",")",";","if","(","isEpollEnabled",")","{","b",".","channel","(","EpollServerSocketChannel",".","class",")",";","}","else","{","b",".","channel","(","NioServerSocketChannel",".","class",")",";","}","\n\n","//","bind","to","host/port","and","wait","for","channel","to","be","ready\n","b",".","bind","(","settings",".","host,","settings",".","port",")",".","addListener","(","new","ChannelFutureListener","(",")","{","@Override\n","public","void","operationComplete","(","final","ChannelFuture","channelFuture",")","throws","Exception","{","if","(","channelFuture",".","isSuccess","(",")",")","{","ch","=","channelFuture",".","channel","(",")",";","\n\n","logger",".","info","(","\"Gremlin","Server","configured","with","worker","thread","pool","of","{","}",",","gremlin","pool","of","{","}","and","boss","thread","pool","of","{","}",".","\",\n","settings",".","threadPoolWorker,","settings",".","gremlinPool,","settings",".","threadPoolBoss",")",";","logger",".","info","(","\"Channel","started","at","port","{","}",".","\",","settings",".","port",")",";","\n\n","serverReadyFuture",".","complete","(","serverGremlinExecutor",")",";","}","else","{","serverReadyFuture",".","completeExceptionally","(","new","IOException","(","String",".","format","(","\"Could","not","bind","to","%s","and","%s","-","perhaps","something","else","is","bound","to","that","address",".","\",","settings",".","host,","settings",".","port",")",")",")",";","}","}","}",")",";","}","catch","(","Exception","ex",")","{","logger",".","error","(","\"Gremlin","Server","Error\",","ex",")",";","serverReadyFuture",".","completeExceptionally","(","ex",")",";","}","\n\n","return","serverStarted",";"],"docstring_tokens":["Start","Gremlin","Server","with","Settings","provided","to","the","constructor"],"prompt_tokens":[]}
{"code_tokens":["public","static","void","cloneElements","(","final","Graph","original,","final","Graph","clone",")","{","original",".","vertices","(",")",".","forEachRemaining","(","v","->","DetachedFactory",".","detach","(","v,","true",")",".","attach","(","Attachable",".","Method",".","create","(","clone",")",")",")",";","original",".","edges","(",")",".","forEachRemaining","(","e","->","DetachedFactory",".","detach","(","e,","true",")",".","attach","(","Attachable",".","Method",".","create","(","clone",")",")",")",";"],"docstring_tokens":["make","a","deep","clone","of","the","graph","elements","that","preserves","ids"],"prompt_tokens":[]}
{"code_tokens":["public","static","<R>","EmptyTraverser<R>","instance","(",")","{","return","INSTANCE",";"],"docstring_tokens":["The","empty","Traverser","instance"],"prompt_tokens":[]}
{"code_tokens":["public","static","<T>","Stream<T>","stream","(","final","Iterator<T>","iterator",")","{","return","StreamSupport",".","stream","(","Spliterators",".","spliteratorUnknownSize","(","iterator,","Spliterator",".","IMMUTABLE","|","Spliterator",".","SIZED",")",",","false",")",".","onClose","(","(",")","->","CloseableIterator",".","closeIterator","(","iterator",")",")",";"],"docstring_tokens":["Construct","a","Stream","from","an","Iterator"],"prompt_tokens":[]}
{"code_tokens":["public","static","Neo4jGraph","open","(","final","Configuration","configuration",")","{","if","(","null","==","configuration",")","throw","Graph",".","Exceptions",".","argumentCanNotBeNull","(","\"configuration\"",")",";","if","(","!configuration",".","containsKey","(","CONFIG_DIRECTORY",")",")","throw","new","IllegalArgumentException","(","String",".","format","(","\"Neo4j","configuration","requires","that","the","%s","be","set\",","CONFIG_DIRECTORY",")",")",";","return","new","Neo4jGraph","(","configuration",")",";"],"docstring_tokens":["Open","a","new","Neo4jGraph","instance"],"prompt_tokens":[]}
{"code_tokens":["public","static","Neo4jGraph","open","(","final","String","directory",")","{","final","Configuration","config","=","new","BaseConfiguration","(",")",";","config",".","setProperty","(","CONFIG_DIRECTORY,","directory",")",";","return","open","(","config",")",";"],"docstring_tokens":["Construct","a","Neo4jGraph","instance","by","specifying","the","directory","to","create","the","database","in"],"prompt_tokens":[]}
{"code_tokens":["public","static","Neo4jGraph","open","(","final","Neo4jGraphAPI","baseGraph",")","{","return","new","Neo4jGraph","(","baseGraph,","EMPTY_CONFIGURATION",")",";"],"docstring_tokens":["Construct","a","Neo4jGraph","instance","using","an","existing","Neo4j","raw","instance"],"prompt_tokens":[]}
{"code_tokens":["public","int","size","(",")","{","return","size",";"],"docstring_tokens":["Returns","the","size","of","the","Iterable"],"prompt_tokens":[]}
{"code_tokens":["protected","static","boolean","requiresPersistence","(","final","Class<?>","test,","final","String","testMethodName",")","{","return","test","==","GraphTest",".","class","&&","testMethodName",".","equals","(","\"shouldPersistDataOnClose\"",")",";"],"docstring_tokens":["Determines","if","a","test","requires","TinkerGraph","persistence","to","be","configured","with","graph","location","and","format"],"prompt_tokens":[]}
{"code_tokens":["protected","TinkerGraph",".","DefaultIdManager","selectIdMakerFromTest","(","final","Class<?>","test,","final","String","testMethodName",")","{","if","(","test",".","equals","(","GraphTest",".","class",")",")","{","final","Set<String>","testsThatNeedLongIdManager","=","new","HashSet<String>","(",")","{","{","add","(","\"shouldIterateVerticesWithNumericIdSupportUsingDoubleRepresentation\"",")",";","add","(","\"shouldIterateVerticesWithNumericIdSupportUsingDoubleRepresentations\"",")",";","add","(","\"shouldIterateVerticesWithNumericIdSupportUsingIntegerRepresentation\"",")",";","add","(","\"shouldIterateVerticesWithNumericIdSupportUsingIntegerRepresentations\"",")",";","add","(","\"shouldIterateVerticesWithNumericIdSupportUsingFloatRepresentation\"",")",";","add","(","\"shouldIterateVerticesWithNumericIdSupportUsingFloatRepresentations\"",")",";","add","(","\"shouldIterateVerticesWithNumericIdSupportUsingStringRepresentation\"",")",";","add","(","\"shouldIterateVerticesWithNumericIdSupportUsingStringRepresentations\"",")",";","add","(","\"shouldIterateEdgesWithNumericIdSupportUsingDoubleRepresentation\"",")",";","add","(","\"shouldIterateEdgesWithNumericIdSupportUsingDoubleRepresentations\"",")",";","add","(","\"shouldIterateEdgesWithNumericIdSupportUsingIntegerRepresentation\"",")",";","add","(","\"shouldIterateEdgesWithNumericIdSupportUsingIntegerRepresentations\"",")",";","add","(","\"shouldIterateEdgesWithNumericIdSupportUsingFloatRepresentation\"",")",";","add","(","\"shouldIterateEdgesWithNumericIdSupportUsingFloatRepresentations\"",")",";","add","(","\"shouldIterateEdgesWithNumericIdSupportUsingStringRepresentation\"",")",";","add","(","\"shouldIterateEdgesWithNumericIdSupportUsingStringRepresentations\"",")",";","}","}",";","\n\n","final","Set<String>","testsThatNeedUuidIdManager","=","new","HashSet<String>","(",")","{","{","add","(","\"shouldIterateVerticesWithUuidIdSupportUsingStringRepresentation\"",")",";","add","(","\"shouldIterateVerticesWithUuidIdSupportUsingStringRepresentations\"",")",";","add","(","\"shouldIterateEdgesWithUuidIdSupportUsingStringRepresentation\"",")",";","add","(","\"shouldIterateEdgesWithUuidIdSupportUsingStringRepresentations\"",")",";","}","}",";","\n\n","if","(","testsThatNeedLongIdManager",".","contains","(","testMethodName",")",")","return","TinkerGraph",".","DefaultIdManager",".","LONG",";","else","if","(","testsThatNeedUuidIdManager",".","contains","(","testMethodName",")",")","return","TinkerGraph",".","DefaultIdManager",".","UUID",";","}","else","if","(","test",".","equals","(","IoEdgeTest",".","class",")",")","{","final","Set<String>","testsThatNeedLongIdManager","=","new","HashSet<String>","(",")","{","{","add","(","\"shouldReadWriteEdge[graphson-v1]\"",")",";","add","(","\"shouldReadWriteDetachedEdgeAsReference[graphson-v1]\"",")",";","add","(","\"shouldReadWriteDetachedEdge[graphson-v1]\"",")",";","add","(","\"shouldReadWriteEdge[graphson-v2]\"",")",";","add","(","\"shouldReadWriteDetachedEdgeAsReference[graphson-v2]\"",")",";","add","(","\"shouldReadWriteDetachedEdge[graphson-v2]\"",")",";","}","}",";","\n\n","if","(","testsThatNeedLongIdManager",".","contains","(","testMethodName",")",")","return","TinkerGraph",".","DefaultIdManager",".","LONG",";","}","else","if","(","test",".","equals","(","IoVertexTest",".","class",")",")","{","final","Set<String>","testsThatNeedLongIdManager","=","new","HashSet<String>","(",")","{","{","add","(","\"shouldReadWriteVertexWithBOTHEdges[graphson-v1]\"",")",";","add","(","\"shouldReadWriteVertexWithINEdges[graphson-v1]\"",")",";","add","(","\"shouldReadWriteVertexWithOUTEdges[graphson-v1]\"",")",";","add","(","\"shouldReadWriteVertexNoEdges[graphson-v1]\"",")",";","add","(","\"shouldReadWriteDetachedVertexNoEdges[graphson-v1]\"",")",";","add","(","\"shouldReadWriteDetachedVertexAsReferenceNoEdges[graphson-v1]\"",")",";","add","(","\"shouldReadWriteVertexMultiPropsNoEdges[graphson-v1]\"",")",";","add","(","\"shouldReadWriteVertexWithBOTHEdges[graphson-v2]\"",")",";","add","(","\"shouldReadWriteVertexWithINEdges[graphson-v2]\"",")",";","add","(","\"shouldReadWriteVertexWithOUTEdges[graphson-v2]\"",")",";","add","(","\"shouldReadWriteVertexNoEdges[graphson-v2]\"",")",";","add","(","\"shouldReadWriteDetachedVertexNoEdges[graphson-v2]\"",")",";","add","(","\"shouldReadWriteDetachedVertexAsReferenceNoEdges[graphson-v2]\"",")",";","add","(","\"shouldReadWriteVertexMultiPropsNoEdges[graphson-v2]\"",")",";","}","}",";","\n\n","if","(","testsThatNeedLongIdManager",".","contains","(","testMethodName",")",")","return","TinkerGraph",".","DefaultIdManager",".","LONG",";","}","\n\n","return","TinkerGraph",".","DefaultIdManager",".","ANY",";"],"docstring_tokens":["Some","tests","require","special","configuration","for","TinkerGraph","to","properly","configure","the","id","manager"],"prompt_tokens":[]}
{"code_tokens":["public","static","Object","indexable","(","final","Object","obj",")","{","return","null","==","obj","?","IndexedNull",".","instance","(",")",":","obj",";"],"docstring_tokens":["Provides","a","way","for","an","index","to","have","a","null","value","as","ConcurrentHashMap","will","not","allow","a","null","key"],"prompt_tokens":[]}
{"code_tokens":["public","static","synchronized","void","init","(","final","Settings","settings",")","{","if","(","!initialized",")","{","processors",".","values","(",")",".","forEach","(","processor","->","processor",".","init","(","settings",")",")",";","initialized","=","true",";","}"],"docstring_tokens":["Initialize","the","OpLoader","with","server","settings"],"prompt_tokens":[]}
{"code_tokens":["public","synchronized","CompletableFuture<Void>","closeAsync","(",")","{","if","(","closeFuture",".","get","(",")","!=","null",")","return","closeFuture",".","get","(",")",";","\n\n","logger",".","info","(","\"Signalled","closing","of","connection","pool","on","{","}","with","core","size","of","{","}","\",","host,","minPoolSize",")",";","\n\n","announceAllAvailableConnection","(",")",";","final","CompletableFuture<Void>","future","=","killAvailableConnections","(",")",";","closeFuture",".","set","(","future",")",";","\n\n","return","future",";"],"docstring_tokens":["Permanently","kills","the","pool"],"prompt_tokens":[]}
{"code_tokens":["public","static","<A","extends","TraversalStrategy>","Iterator<A>","findStrategies","(","final","Bytecode","bytecode,","final","Class<A>","clazz",")","{","return","IteratorUtils",".","map","(","IteratorUtils",".","filter","(","bytecode",".","getSourceInstructions","(",")",".","iterator","(",")",",\n","s","->","s",".","getOperator","(",")",".","equals","(","TraversalSource",".","Symbols",".","withStrategies",")","&&","clazz",".","isAssignableFrom","(","s",".","getArguments","(",")","[0]",".","getClass","(",")",")",")",",\n","os","->","(","A",")","os",".","getArguments","(",")","[0]",")",";"],"docstring_tokens":["Parses","Bytecode","to","find","TraversalStrategy","objects","added","in","the","source","instructions"],"prompt_tokens":[]}
{"code_tokens":["public","static","boolean","isGraphOperation","(","final","Bytecode","bytecode",")","{","return","Stream",".","of","(","GraphOp",".","values","(",")",")",".","anyMatch","(","op","->","op",".","equals","(","bytecode",")",")",";"],"docstring_tokens":["Checks","if","the","bytecode","is","one","of","the","standard","GraphOp","options"],"prompt_tokens":[]}
{"code_tokens":["@Override\n","public","Bindings","getBindings","(",")","{","return","globalScope",";"],"docstring_tokens":["Gets","the","bindings","of","the","Bindings","in","global","scope"],"prompt_tokens":[]}
{"code_tokens":["public","static","DetachedEdge",".","Builder","build","(",")","{","return","new","Builder","(","new","DetachedEdge","(",")",")",";"],"docstring_tokens":["Provides","a","way","to","construct","an","immutable","DetachedEdge"],"prompt_tokens":[]}
{"code_tokens":["public","Collection<Traverser",".","Admin<S>>","get","(","final","I","k",")","{","final","Collection<Traverser",".","Admin<S>>","c","=","index",".","getCollection","(","k",")",";","\n\n","//","if","remove","(",")","is","called","on","this","class,","then","the","MultiValueMap","*may*","(","javadoc","wasn't","clear\n","//","what","the","expectation","was","-","used","the","word","\"typically\"",")","return","an","empty","list","if","the","last\n","//","item","removed","leaves","the","list","empty",".","i","think","we","want","to","enforce","null","for","TraverserSet\n","//","semantics\n","return","c","!=","null","&&","c",".","isEmpty","(",")","?","null",":","c",";"],"docstring_tokens":["Gets","a","collection","of","Traverser","objects","that","contain","the","specified","value"],"prompt_tokens":[]}
{"code_tokens":["@Override\n","public","Object","visitTraversalTerminalMethod_explain","(","final","GremlinParser",".","TraversalTerminalMethod_explainContext","ctx",")","{","final","Bytecode","bc","=","this",".","traversal",".","asAdmin","(",")",".","getBytecode","(",")",";","bc",".","addStep","(","\"explain\"",")",";","return","bc",";"],"docstring_tokens":["Traversal","terminal","method","explain","step"],"prompt_tokens":[]}
{"code_tokens":["@Override\n","public","Object","visitTraversalTerminalMethod_iterate","(","final","GremlinParser",".","TraversalTerminalMethod_iterateContext","ctx",")","{","final","Bytecode","bc","=","this",".","traversal",".","asAdmin","(",")",".","getBytecode","(",")",";","bc",".","addStep","(","\"iterate\"",")",";","return","bc",";"],"docstring_tokens":["Traversal","terminal","method","iterate","step"],"prompt_tokens":[]}
{"code_tokens":["@Override\n","public","Object","visitTraversalTerminalMethod_hasNext","(","final","GremlinParser",".","TraversalTerminalMethod_hasNextContext","ctx",")","{","final","Bytecode","bc","=","this",".","traversal",".","asAdmin","(",")",".","getBytecode","(",")",";","bc",".","addStep","(","\"hasNext\"",")",";","return","bc",";"],"docstring_tokens":["Traversal","terminal","method","has","next","step"],"prompt_tokens":[]}
{"code_tokens":["@Override\n","public","Object","visitTraversalTerminalMethod_tryNext","(","final","GremlinParser",".","TraversalTerminalMethod_tryNextContext","ctx",")","{","final","Bytecode","bc","=","this",".","traversal",".","asAdmin","(",")",".","getBytecode","(",")",";","bc",".","addStep","(","\"tryNext\"",")",";","return","bc",";"],"docstring_tokens":["Traversal","terminal","method","try","next","step"],"prompt_tokens":[]}
{"code_tokens":["@Override\n","public","Object","visitTraversalTerminalMethod_next","(","final","GremlinParser",".","TraversalTerminalMethod_nextContext","ctx",")","{","final","Bytecode","bc","=","this",".","traversal",".","asAdmin","(",")",".","getBytecode","(",")",";","if","(","ctx",".","getChildCount","(",")","==","3",")","{","bc",".","addStep","(","\"next\"",")",";","}","else","{","//","the","3rd","child","is","integer","value\n","final","int","childIndexOfParamaterAmount","=","2",";","bc",".","addStep","(","\"next\",","Integer",".","decode","(","ctx",".","getChild","(","childIndexOfParamaterAmount",")",".","getText","(",")",")",")",";","}","\n\n","return","bc",";"],"docstring_tokens":["Traversal","terminal","method","next","step"],"prompt_tokens":[]}
{"code_tokens":["@Override\n","public","Object","visitTraversalTerminalMethod_toList","(","final","GremlinParser",".","TraversalTerminalMethod_toListContext","ctx",")","{","final","Bytecode","bc","=","this",".","traversal",".","asAdmin","(",")",".","getBytecode","(",")",";","bc",".","addStep","(","\"toList\"",")",";","return","bc",";"],"docstring_tokens":["Traversal","terminal","method","to","list","step"],"prompt_tokens":[]}
{"code_tokens":["@Override\n","public","Object","visitTraversalTerminalMethod_toSet","(","final","GremlinParser",".","TraversalTerminalMethod_toSetContext","ctx",")","{","final","Bytecode","bc","=","this",".","traversal",".","asAdmin","(",")",".","getBytecode","(",")",";","bc",".","addStep","(","\"toSet\"",")",";","return","bc",";"],"docstring_tokens":["Traversal","terminal","method","to","set","step"],"prompt_tokens":[]}
{"code_tokens":["@Override\n","public","Object","visitTraversalTerminalMethod_toBulkSet","(","final","GremlinParser",".","TraversalTerminalMethod_toBulkSetContext","ctx",")","{","final","Bytecode","bc","=","this",".","traversal",".","asAdmin","(",")",".","getBytecode","(",")",";","bc",".","addStep","(","\"toBulkSet\"",")",";","return","bc",";"],"docstring_tokens":["Traversal","terminal","method","to","bulk","set","step"],"prompt_tokens":[]}
{"code_tokens":["private","Object","getSingleGenericLiteralArgument","(","final","ParseTree","ctx",")","{","final","int","childIndexOfParameterValue","=","2",";","\n\n","return","GenericLiteralVisitor",".","instance","(",")",".","visitGenericLiteral","(","ParseTreeContextCastHelper",".","castChildToGenericLiteral","(","ctx,","childIndexOfParameterValue",")",")",";"],"docstring_tokens":["get","1","generic","literal","argument","from","the","antlr","parse","tree","context,","where","the","arguments","has","the","child","index","of","2"],"prompt_tokens":[]}
{"code_tokens":["private","Object[]","getDoubleGenericLiteralArgument","(","ParseTree","ctx",")","{","final","int","childIndexOfParameterFirst","=","2",";","final","int","childIndexOfParameterSecond","=","4",";","\n\n","final","Object","first","=","GenericLiteralVisitor",".","instance","(",")",".","visitGenericLiteral","(","ParseTreeContextCastHelper",".","castChildToGenericLiteral","(","ctx,","childIndexOfParameterFirst",")",")",";","final","Object","second","=","GenericLiteralVisitor",".","instance","(",")",".","visitGenericLiteral","(","ParseTreeContextCastHelper",".","castChildToGenericLiteral","(","ctx,","childIndexOfParameterSecond",")",")",";","\n\n","return","new","Object[]","{","first,","second","}",";"],"docstring_tokens":["get","2","generic","literal","arguments","from","the","antlr","parse","tree","context,","where","the","arguments","has","the","child","index","of","2","and","4"],"prompt_tokens":[]}
{"code_tokens":["public","boolean","contains","(","final","Object","key",")","{","return","this",".","parameters",".","containsKey","(","key",")",";"],"docstring_tokens":["Checks","for","existence","of","key","in","parameter","set"],"prompt_tokens":[]}
{"code_tokens":["public","boolean","contains","(","final","Object","key,","final","Object","value",")","{","return","this",".","contains","(","key",")","&&","this",".","parameters",".","get","(","key",")",".","contains","(","value",")",";"],"docstring_tokens":["Checks","for","existence","of","a","key","and","value","in","a","parameter","set"],"prompt_tokens":[]}
{"code_tokens":["public","boolean","isBoundTo","(","final","Channel","channel",")","{","return","channel","==","boundChannel",";"],"docstring_tokens":["Determines","if","the","supplied","Channel","object","is","the","same","as","the","one","bound","to","the","Session"],"prompt_tokens":[]}
{"code_tokens":["public","CompletableFuture<Void>","allItemsAvailableAsync","(",")","{","//","readCompleted","future","is","always","completed","by","Netty's","event","loop","thread","pool",".","To","avoid","blocking","the","event","loop,\n","//","create","a","new","completion","stage","that","is","completed","by","executor","thread","loop,","when","returning","a","future","outside","the\n","//","client","(","ie","application","code",")",".","return","readCompleted",".","whenCompleteAsync","(","(","s,t",")","->","{","}",",","executor",")",";"],"docstring_tokens":["Returns","a","future","that","will","complete","when","all","items","have","been","returned","from","the","server"],"prompt_tokens":[]}
{"code_tokens":["public","Result","one","(",")","{","final","List<Result>","results","=","some","(","1",")",".","join","(",")",";","\n\n","assert","results",".","size","(",")","<=","1",";","\n\n","return","results",".","size","(",")","==","1","?","results",".","get","(","0",")",":","null",";"],"docstring_tokens":["Get","the","next","Result","from","the","stream,","blocking","until","one","is","available"],"prompt_tokens":[]}
{"code_tokens":["public","Stream<Result>","stream","(",")","{","return","StreamSupport",".","stream","(","Spliterators",".","spliteratorUnknownSize","(","iterator","(",")",",\n","Spliterator",".","IMMUTABLE","|","Spliterator",".","SIZED",")",",","false",")",";"],"docstring_tokens":["Stream","items","with","a","blocking","iterator"],"prompt_tokens":[]}
{"code_tokens":["public","final","Bindings","getAsBindings","(",")","{","final","Bindings","bindings","=","new","SimpleBindings","(",")",";","graphs",".","forEach","(","bindings::put",")",";","traversalSources",".","forEach","(","bindings::put",")",";","return","bindings",";"],"docstring_tokens":["Get","the","Graph","and","TraversalSource","list","as","a","set","of","bindings"],"prompt_tokens":[]}
{"code_tokens":["public","final","void","rollbackAll","(",")","{","graphs",".","entrySet","(",")",".","forEach","(","e","->","{","final","Graph","graph","=","e",".","getValue","(",")",";","if","(","graph",".","features","(",")",".","graph","(",")",".","supportsTransactions","(",")","&&","graph",".","tx","(",")",".","isOpen","(",")",")","graph",".","tx","(",")",".","rollback","(",")",";","}",")",";"],"docstring_tokens":["Rollback","transactions","across","all","Graph","objects"],"prompt_tokens":[]}
{"code_tokens":["public","final","void","rollback","(","final","Set<String>","graphSourceNamesToCloseTxOn",")","{","closeTx","(","graphSourceNamesToCloseTxOn,","Transaction",".","Status",".","ROLLBACK",")",";"],"docstring_tokens":["Selectively","rollback","transactions","on","the","specified","graphs","or","the","graphs","of","traversal","sources"],"prompt_tokens":[]}
{"code_tokens":["public","final","void","commitAll","(",")","{","graphs",".","entrySet","(",")",".","forEach","(","e","->","{","final","Graph","graph","=","e",".","getValue","(",")",";","if","(","graph",".","features","(",")",".","graph","(",")",".","supportsTransactions","(",")","&&","graph",".","tx","(",")",".","isOpen","(",")",")","graph",".","tx","(",")",".","commit","(",")",";","}",")",";"],"docstring_tokens":["Commit","transactions","across","all","Graph","objects"],"prompt_tokens":[]}
{"code_tokens":["public","final","void","commit","(","final","Set<String>","graphSourceNamesToCloseTxOn",")","{","closeTx","(","graphSourceNamesToCloseTxOn,","Transaction",".","Status",".","COMMIT",")",";"],"docstring_tokens":["Selectively","commit","transactions","on","the","specified","graphs","or","the","graphs","of","traversal","sources"],"prompt_tokens":[]}
{"code_tokens":["private","void","closeTx","(","final","Set<String>","graphSourceNamesToCloseTxOn,","final","Transaction",".","Status","tx",")","{","final","Set<Graph>","graphsToCloseTxOn","=","new","HashSet<>","(",")",";","\n\n","//","by","the","time","this","method","has","been","called,","it","should","be","validated","that","the","source/graph","is","present",".","//","might","be","possible","that","it","could","have","been","removed","dynamically,","but","that","i'm","not","sure","how","one","would","do\n","//","that","as","of","right","now","unless","they","were","embedded","in","which","case","they'd","need","to","know","what","they","were","doing\n","//","anyway\n","graphSourceNamesToCloseTxOn",".","forEach","(","r","->","{","if","(","graphs",".","containsKey","(","r",")",")","graphsToCloseTxOn",".","add","(","graphs",".","get","(","r",")",")",";","else\n","graphsToCloseTxOn",".","add","(","traversalSources",".","get","(","r",")",".","getGraph","(",")",")",";","}",")",";","\n\n","graphsToCloseTxOn",".","forEach","(","graph","->","{","if","(","graph",".","features","(",")",".","graph","(",")",".","supportsTransactions","(",")","&&","graph",".","tx","(",")",".","isOpen","(",")",")","{","if","(","tx","==","Transaction",".","Status",".","COMMIT",")","graph",".","tx","(",")",".","commit","(",")",";","else\n","graph",".","tx","(",")",".","rollback","(",")",";","}","}",")",";"],"docstring_tokens":["Selectively","close","transactions","on","the","specified","graphs","or","the","graphs","of","traversal","sources"],"prompt_tokens":[]}
{"code_tokens":["public","GraphTraversal<Vertex,","Vertex>","addV","(",")","{","final","GraphTraversalSource","clone","=","this",".","clone","(",")",";","clone",".","bytecode",".","addStep","(","GraphTraversal",".","Symbols",".","addV",")",";","final","GraphTraversal",".","Admin<Vertex,","Vertex>","traversal","=","new","DefaultGraphTraversal<>","(","clone",")",";","return","traversal",".","addStep","(","new","AddVertexStartStep","(","traversal,","(","String",")","null",")",")",";"],"docstring_tokens":["Spawns","a","GraphTraversal","by","adding","a","vertex","with","the","default","label"],"prompt_tokens":[]}
{"code_tokens":["public","GraphTraversal<Edge,","Edge>","addE","(","final","String","label",")","{","final","GraphTraversalSource","clone","=","this",".","clone","(",")",";","clone",".","bytecode",".","addStep","(","GraphTraversal",".","Symbols",".","addE,","label",")",";","final","GraphTraversal",".","Admin<Edge,","Edge>","traversal","=","new","DefaultGraphTraversal<>","(","clone",")",";","return","traversal",".","addStep","(","new","AddEdgeStartStep","(","traversal,","label",")",")",";"],"docstring_tokens":["Spawns","a","GraphTraversal","by","adding","an","edge","with","the","specified","label"],"prompt_tokens":[]}
{"code_tokens":["public","GraphTraversal<Edge,","Edge>","addE","(","final","Traversal<?,","String>","edgeLabelTraversal",")","{","final","GraphTraversalSource","clone","=","this",".","clone","(",")",";","clone",".","bytecode",".","addStep","(","GraphTraversal",".","Symbols",".","addE,","edgeLabelTraversal",")",";","final","GraphTraversal",".","Admin<Edge,","Edge>","traversal","=","new","DefaultGraphTraversal<>","(","clone",")",";","return","traversal",".","addStep","(","new","AddEdgeStartStep","(","traversal,","edgeLabelTraversal",")",")",";"],"docstring_tokens":["Spawns","a","GraphTraversal","by","adding","a","edge","with","a","label","as","specified","by","the","provided","Traversal"],"prompt_tokens":[]}
{"code_tokens":["public","GraphTraversal<Vertex,","Vertex>","V","(","final","Object",".",".",".","vertexIds",")","{","//","a","single","null","is","[null]\n","final","Object[]","ids","=","null","==","vertexIds","?","new","Object[]","{","null","}",":","vertexIds",";","final","GraphTraversalSource","clone","=","this",".","clone","(",")",";","clone",".","bytecode",".","addStep","(","GraphTraversal",".","Symbols",".","V,","ids",")",";","final","GraphTraversal",".","Admin<Vertex,","Vertex>","traversal","=","new","DefaultGraphTraversal<>","(","clone",")",";","return","traversal",".","addStep","(","new","GraphStep<>","(","traversal,","Vertex",".","class,","true,","ids",")",")",";"],"docstring_tokens":["Spawns","a","GraphTraversal","starting","with","all","vertices","or","some","subset","of","vertices","as","specified","by","their","unique","identifier"],"prompt_tokens":[]}
{"code_tokens":["public","GraphTraversal<Edge,","Edge>","E","(","final","Object",".",".",".","edgeIds",")","{","//","a","single","null","is","[null]\n","final","Object[]","ids","=","null","==","edgeIds","?","new","Object[]","{","null","}",":","edgeIds",";","final","GraphTraversalSource","clone","=","this",".","clone","(",")",";","clone",".","bytecode",".","addStep","(","GraphTraversal",".","Symbols",".","E,","ids",")",";","final","GraphTraversal",".","Admin<Edge,","Edge>","traversal","=","new","DefaultGraphTraversal<>","(","clone",")",";","return","traversal",".","addStep","(","new","GraphStep<>","(","traversal,","Edge",".","class,","true,","ids",")",")",";"],"docstring_tokens":["Spawns","a","GraphTraversal","starting","with","all","edges","or","some","subset","of","edges","as","specified","by","their","unique","identifier"],"prompt_tokens":[]}
{"code_tokens":["public","ByteArrayOutputStream","readVertexBytes","(",")","throws","IOException","{","final","ByteArrayOutputStream","stream","=","new","ByteArrayOutputStream","(",")",";","final","LinkedList<Byte>","buffer","=","new","LinkedList<>","(",")",";","\n\n","int","current","=","read","(",")",";","while","(","current",">","-1","&&","(","buffer",".","size","(",")","<","12","||","!isMatch","(","buffer",")",")",")","{","stream",".","write","(","current",")",";","\n\n","current","=","read","(",")",";","if","(","buffer",".","size","(",")",">","11",")","buffer",".","removeFirst","(",")",";","\n\n","buffer",".","addLast","(","(","byte",")","current",")",";","}","\n\n","stream",".","write","(","current",")",";","return","stream",";"],"docstring_tokens":["Read","the","bytes","of","the","next","Vertex","in","the","stream"],"prompt_tokens":[]}
{"code_tokens":["public","void","addSource","(","final","String","sourceName,","final","Object",".",".",".","arguments",")","{","if","(","sourceName",".","equals","(","TraversalSource",".","Symbols",".","withoutStrategies",")",")","{","if","(","arguments","==","null",")","this",".","sourceInstructions",".","add","(","new","Instruction","(","sourceName,","null",")",")",";","else","{","final","Class<TraversalStrategy>[]","classes","=","new","Class[arguments",".","length]",";","for","(","int","i","=","0",";","i","<","arguments",".","length",";","i++",")","{","classes[i]","=","arguments[i]","instanceof","TraversalStrategyProxy","?\n","(","(","TraversalStrategyProxy",")","arguments[i]",")",".","getStrategyClass","(",")",":\n","(","Class",")","arguments[i]",";","}","this",".","sourceInstructions",".","add","(","new","Instruction","(","sourceName,","classes",")",")",";","}","}","else\n","this",".","sourceInstructions",".","add","(","new","Instruction","(","sourceName,","flattenArguments","(","arguments",")",")",")",";","Bindings",".","clear","(",")",";"],"docstring_tokens":["Add","a","TraversalSource","instruction","to","the","bytecode"],"prompt_tokens":[]}
{"code_tokens":["public","void","addStep","(","final","String","stepName,","final","Object",".",".",".","arguments",")","{","this",".","stepInstructions",".","add","(","new","Instruction","(","stepName,","flattenArguments","(","arguments",")",")",")",";"],"docstring_tokens":["Add","a","Traversal","instruction","to","the","bytecode"],"prompt_tokens":[]}
{"code_tokens":["public","static","AllowList","read","(","final","String","file",")","throws","Exception","{","final","InputStream","stream","=","new","FileInputStream","(","new","File","(","file",")",")",";","\n\n","final","Constructor","constructor","=","new","Constructor","(","AllowList",".","class",")",";","final","TypeDescription","allowListDescription","=","new","TypeDescription","(","AllowList",".","class",")",";","allowListDescription",".","putMapPropertyType","(","\"grants\",","String",".","class,","Object",".","class",")",";","allowListDescription",".","putMapPropertyType","(","\"groups\",","String",".","class,","Object",".","class",")",";","constructor",".","addTypeDescription","(","allowListDescription",")",";","\n\n","final","Yaml","yaml","=","new","Yaml","(","constructor",")",";","return","yaml",".","loadAs","(","stream,","AllowList",".","class",")",";"],"docstring_tokens":["Read","a","configuration","from","a","YAML","file","into","an","AllowList","object"],"prompt_tokens":[]}
{"code_tokens":["public","static","List<String>","parseFlat","(","final","String","featureDir",")","throws","IOException","{","return","parseFlat","(","featureDir,","Collections",".","emptyList","(",")",")",";"],"docstring_tokens":["Parses","features","to","a","List","of","Gremlin","strings"],"prompt_tokens":[]}
{"code_tokens":["\n	public","void","delete","(",")","\n	","{","\n		item",".","delete","(",")",";","\n	"],"docstring_tokens":["Deletes","temp","file","from","disk"],"prompt_tokens":[]}
{"code_tokens":["\n	public","byte[]","getDigest","(","String","algorithm",")","\n	","{","\n		try\n		","{","\n			Args",".","notEmpty","(","algorithm,","\"algorithm\"",")",";","\n			MessageDigest","digest","=","java",".","security",".","MessageDigest",".","getInstance","(","algorithm",")",";","\n\n			if","(","item",".","isInMemory","(",")",")","\n			","{","\n				digest",".","update","(","getBytes","(",")",")",";","\n				return","digest",".","digest","(",")",";","\n			","}","\n\n			InputStream","in","=","null",";","\n\n			try\n			","{","\n				in","=","item",".","getInputStream","(",")",";","\n				byte[]","buf","=","new","byte[Math",".","min","(","(","int",")","item",".","getSize","(",")",",","4096","*","10",")","]",";","\n				int","len",";","\n				while","(","-1","!=","(","len","=","in",".","read","(","buf",")",")",")","\n				","{","\n					digest",".","update","(","buf,","0,","len",")",";","\n				","}","\n				return","digest",".","digest","(",")",";","\n			","}","\n			catch","(","IOException","ex",")","\n			","{","\n				throw","new","WicketRuntimeException","(","\"Error","while","reading","input","data","for","\"","+","algorithm","+\n					\"","checksum\",","ex",")",";","\n			","}","\n			finally\n			","{","\n				IOUtils",".","closeQuietly","(","in",")",";","\n			","}","\n		","}","\n		catch","(","NoSuchAlgorithmException","ex",")","\n		","{","\n			String","error","=","String",".","format","(","\n				\"Your","java","runtime","does","not","support","digest","algorithm","[%s]",".","\"\n					+","\"Please","see","java",".","security",".","MessageDigest",".","getInstance","(","\\\"%s\\\"",")","\",","algorithm,\n				algorithm",")",";","\n\n			throw","new","WicketRuntimeException","(","error,","ex",")",";","\n		","}","\n	"],"docstring_tokens":["Get","the","MD5","checksum"],"prompt_tokens":[]}
{"code_tokens":["\n	public","void","writeTo","(","final","File","file",")","throws","Exception\n	","{","\n		Files",".","remove","(","file",")",";","\n		item",".","write","(","file",")",";","\n	"],"docstring_tokens":["Saves","this","file","upload","to","a","given","file","on","the","server","side"],"prompt_tokens":[]}
{"code_tokens":["\n	protected","boolean","isLocalOrigin","(","HttpServletRequest","containerRequest,","String","originHeader",")","\n	","{","\n		//","Make","comparable","strings","from","Origin","and","Location\n		String","origin","=","normalizeUri","(","originHeader",")",";","\n		if","(","origin","==","null",")","\n			return","false",";","\n\n		String","request","=","getTargetUriFromRequest","(","containerRequest",")",";","\n		if","(","request","==","null",")","\n			return","false",";","\n\n		return","origin",".","equalsIgnoreCase","(","request",")",";","\n	"],"docstring_tokens":["Checks","whether","the","Origin","HTTP","header","of","the","request","matches","where","the","request","came	","from"],"prompt_tokens":[]}
{"code_tokens":["\n	protected","final","String","getTargetUriFromRequest","(","HttpServletRequest","request",")","\n	","{","\n		//","Build","scheme://host:port","from","request\n		StringBuilder","target","=","new","StringBuilder","(",")",";","\n		String","scheme","=","request",".","getScheme","(",")",";","\n		if","(","scheme","==","null",")","\n		","{","\n			return","null",";","\n		","}","\n		else\n		","{","\n			scheme","=","scheme",".","toLowerCase","(","Locale",".","ROOT",")",";","\n		","}","\n		target",".","append","(","scheme",")",";","\n		target",".","append","(","\"://\"",")",";","\n\n		String","host","=","request",".","getServerName","(",")",";","\n		if","(","host","==","null",")","\n		","{","\n			return","null",";","\n		","}","\n		target",".","append","(","host",")",";","\n\n		int","port","=","request",".","getServerPort","(",")",";","\n		if","(","\"http\"",".","equals","(","scheme",")","&&","port","!=","80","||","\"https\"",".","equals","(","scheme",")","&&","port","!=","443",")","\n		","{","\n			target",".","append","(","':'",")",";","\n			target",".","append","(","port",")",";","\n		","}","\n\n		return","target",".","toString","(",")",";","\n	"],"docstring_tokens":["Creates","a","RFC-6454","comparable","URI","from","the","request","requested","resource"],"prompt_tokens":[]}
{"code_tokens":["\n	public","static","Cookie","copyOf","(","Cookie","cookie",")","\n	","{","\n		return","cookie","!=","null","?","(","Cookie",")","cookie",".","clone","(",")",":","null",";","\n	"],"docstring_tokens":["Make","a","copy","of","the","passed","cookie"],"prompt_tokens":[]}
{"code_tokens":["\n	public","static","Key","keyOf","(","Cookie","cookie",")","\n	","{","\n		return","new","Key","(","cookie",")",";","\n	"],"docstring_tokens":["creates","a","key","based","on","the","property","for","cookie","equality"],"prompt_tokens":[]}
{"code_tokens":["\n	public","static","boolean","isEqual","(","Cookie","c1,","Cookie","c2",")","\n	","{","\n		Args",".","notNull","(","c1,","\"c1\"",")",";","\n		Args",".","notNull","(","c2,","\"c2\"",")",";","\n\n		return","new","Key","(","c1",")",".","equals","(","new","Key","(","c2",")",")",";","\n	"],"docstring_tokens":["Checks","whether","two","cookies","are","equal"],"prompt_tokens":[]}
{"code_tokens":["\n	public","TagTester","getChild","(","String","tagName",")","\n	","{","\n		Args",".","notNull","(","tagName,","\"tagName\"",")",";","\n\n		TagTester","childTagTester","=","null",";","\n\n		if","(","openTag",".","isOpen","(",")",")","\n		","{","\n			//","Get","the","content","of","the","tag\n			int","startPos","=","openTag",".","getPos","(",")","+","openTag",".","getLength","(",")",";","\n			int","endPos","=","closeTag",".","getPos","(",")",";","\n			String","markup","=","parser",".","getInput","(","startPos,","endPos",")",".","toString","(",")",";","\n\n			childTagTester","=","createTagByName","(","markup,","tagName",")",";","\n		","}","\n\n		return","childTagTester",";","\n	"],"docstring_tokens":["Checks","if","the","tag","has","a","child","with","the","given","tagName"],"prompt_tokens":[]}
{"code_tokens":["\n	public","TagTester","getChild","(","String","attribute,","String","value",")","\n	","{","\n		TagTester","childTag","=","null",";","\n\n		if","(","openTag",".","isOpen","(",")",")","\n		","{","\n			//","Generate","the","markup","for","this","tag\n			String","markup","=","getMarkup","(",")",";","\n\n			if","(","Strings",".","isEmpty","(","markup",")","==","false",")","\n			","{","\n				childTag","=","TagTester",".","createTagByAttribute","(","markup,","attribute,","value",")",";","\n			","}","\n		","}","\n\n		return","childTag",";","\n	"],"docstring_tokens":["Gets","a","child","tag","for","testing"],"prompt_tokens":[]}
{"code_tokens":["\n	public","String","getMarkup","(",")","\n	","{","\n		int","openPos","=","openTag",".","getPos","(",")",";","\n		int","closePos","=","closeTag",".","getPos","(",")","+","closeTag",".","getLength","(",")",";","\n\n		return","parser",".","getInput","(","openPos,","closePos",")",".","toString","(",")",";","\n	"],"docstring_tokens":["Gets","the","markup","for","this","tag"],"prompt_tokens":[]}
{"code_tokens":["\n	public","String","getValue","(",")","\n	","{","\n		if","(","openTag","==","closeTag",")","\n		","{","\n			return","null",";","\n		","}","\n\n		int","openPos","=","openTag",".","getPos","(",")","+","openTag",".","getLength","(",")",";","\n		int","closePos","=","closeTag",".","getPos","(",")",";","\n\n		return","parser",".","getInput","(","openPos,","closePos",")",".","toString","(",")",";","\n	"],"docstring_tokens":["Returns","the","value","for","this","tag"],"prompt_tokens":[]}
{"code_tokens":["\n	public","static","List<TagTester>","createTagsByAttribute","(","String","markup,","String","attribute,","String","value,","boolean","stopAfterFirst",")","\n	","{","\n		if","(","Strings",".","isEmpty","(","attribute",")",")","{","\n			return","Collections",".","emptyList","(",")",";","\n		","}","\n		\n		return","createTags","(","markup,","xmlTag","->","Objects",".","equals","(","value,","xmlTag",".","getAttributes","(",")",".","get","(","attribute",")",")",",","stopAfterFirst",")",";","\n	"],"docstring_tokens":["Static","factory","method","for","creating","a","TagTester","based","on","tags","found","by","an	","attribute","with","a","specific","value"],"prompt_tokens":[]}
{"code_tokens":["\n	protected","CharSequence","getURL","(",")","\n	","{","\n		return","urlForListener","(","new","PageParameters","(",")",")",";","\n	"],"docstring_tokens":["Gets","the","url","to","use","for","this","link"],"prompt_tokens":[]}
{"code_tokens":["\n	public","Integer","getBehaviorIndex","(",")","\n	","{","\n		return","behaviorIndex",";","\n	"],"docstring_tokens":["Returns","index","of","behavior","this","listener","is","targeted","on","or","null","if","component","is	","the","target"],"prompt_tokens":[]}
{"code_tokens":["\n	public","static","RequestCycle","get","(",")","\n	","{","\n		return","ThreadContext",".","getRequestCycle","(",")",";","\n	"],"docstring_tokens":["Returns","request","cycle","associated","with","current","thread"],"prompt_tokens":[]}
{"code_tokens":["\n	@Override\n	public","final","UrlRenderer","getUrlRenderer","(",")","\n	","{","\n		if","(","urlRenderer","==","null",")","\n		","{","\n			urlRenderer","=","newUrlRenderer","(",")",";","\n		","}","\n		return","urlRenderer",";","\n	"],"docstring_tokens":["Returns","UrlRenderer","for","this","RequestCycle"],"prompt_tokens":[]}
{"code_tokens":["\n	public","boolean","processRequestAndDetach","(",")","\n	","{","\n		boolean","result",";","\n		try\n		","{","\n			result","=","processRequest","(",")",";","\n		","}","\n		finally\n		","{","\n			detach","(",")",";","\n		","}","\n		return","result",";","\n	"],"docstring_tokens":["Convenience","method","that","processes","the","request","and","detaches","the","RequestCycle"],"prompt_tokens":[]}
{"code_tokens":["\n	private","void","execute","(","IRequestHandler","handler",")","\n	","{","\n		Args",".","notNull","(","handler,","\"handler\"",")",";","\n\n		while","(","handler","!=","null",")","{","\n			try\n			","{","\n				listeners",".","onRequestHandlerResolved","(","this,","handler",")",";","\n				IRequestHandler","next","=","requestHandlerExecutor",".","execute","(","handler",")",";","\n				listeners",".","onRequestHandlerExecuted","(","this,","handler",")",";","\n				\n				handler","=","next",";","\n			","}","\n			catch","(","RuntimeException","e",")","\n			","{","\n				ReplaceHandlerException","replacer","=","Exceptions",".","findCause","(","e,","ReplaceHandlerException",".","class",")",";","\n\n				if","(","replacer","==","null",")","\n				","{","\n					throw","e",";","\n				","}","\n\n				if","(","replacer",".","getRemoveScheduled","(",")",")","\n				","{","\n					requestHandlerExecutor",".","schedule","(","null",")",";","\n				","}","\n\n				handler","=","replacer",".","getReplacementRequestHandler","(",")",";","\n			","}","\n		","}","\n	"],"docstring_tokens":["Execute","a","request","handler","and","notify","registered","IRequestCycleListeners"],"prompt_tokens":[]}
{"code_tokens":["\n	@Override\n	public","final","<T>","T","getMetaData","(","final","MetaDataKey<T>","key",")","\n	","{","\n		return","key",".","get","(","metaData",")",";","\n	"],"docstring_tokens":["Gets","metadata","for","this","request","cycle","using","the","given","key"],"prompt_tokens":[]}
{"code_tokens":["\n	public","void","onDetach","(",")","\n	","{","\n		try\n		","{","\n			requestHandlerExecutor",".","detach","(",")",";","\n		","}","\n		catch","(","RuntimeException","exception",")","\n		","{","\n			handleDetachException","(","exception",")",";","\n		","}","\n		finally\n		","{","\n			listeners",".","onDetach","(","this",")",";","\n		","}","\n\n		if","(","Session",".","exists","(",")",")","\n		","{","\n			Session",".","get","(",")",".","detach","(",")",";","\n		","}","\n\n	"],"docstring_tokens":["Called","after","request","processing","is","complete,","usually","takes","care","of","detaching","state"],"prompt_tokens":[]}
{"code_tokens":["\n	protected","void","onBeginRequest","(",")","\n	","{","\n	"],"docstring_tokens":["Called","when","the","request","cycle","object","is","beginning","its","response"],"prompt_tokens":[]}
{"code_tokens":["\n	protected","void","onEndRequest","(",")","\n	","{","\n		if","(","Session",".","exists","(",")",")","\n		","{","\n			Session",".","get","(",")",".","endRequest","(",")",";","\n		","}","\n	"],"docstring_tokens":["Called","when","the","request","cycle","object","has","finished","its","response"],"prompt_tokens":[]}
{"code_tokens":["\n	@SuppressWarnings","(","\"unchecked\"",")","\n	public","<T","extends","IRequestHandler>","Optional<T>","find","(","final","Class<T>","type",")","\n	","{","\n		if","(","type","==","null",")","\n		","{","\n			return","Optional",".","empty","(",")",";","\n		","}","\n\n		IRequestHandler","result","=","getActiveRequestHandler","(",")",";","\n		if","(","type",".","isInstance","(","result",")",")","\n		","{","\n			return","(","Optional<T>",")","Optional",".","of","(","result",")",";","\n		","}","\n		\n		result","=","getRequestHandlerScheduledAfterCurrent","(",")",";","\n		if","(","type",".","isInstance","(","result",")",")","\n		","{","\n			return","(","Optional<T>",")","Optional",".","of","(","result",")",";","\n		","}","\n\n		return","Optional",".","empty","(",")",";","\n	"],"docstring_tokens":["Finds","a","IRequestHandler","which","is","either","the","currently","executing","handler","or","is","scheduled","to","be	","executed"],"prompt_tokens":[]}
{"code_tokens":["\n	public","void","beforeRender","(","Component","component",")","\n	","{","\n	"],"docstring_tokens":["Called","when","a","component","is","about","to","render"],"prompt_tokens":[]}
{"code_tokens":["\n	public","void","afterRender","(","Component","component",")","\n	","{","\n	"],"docstring_tokens":["Called","when","a","component","that","has","this","behavior","coupled","was","rendered"],"prompt_tokens":[]}
{"code_tokens":["\n	public","void","unbind","(","Component","component",")","\n	","{","\n	"],"docstring_tokens":["Notifies","the","behavior","it","is","removed","from","the","specified","component"],"prompt_tokens":[]}
{"code_tokens":["\n	public","void","detach","(","Component","component",")","\n	","{","\n	"],"docstring_tokens":["Allows","the","behavior","to","detach","any","state","it","has","attached","during","request","processing"],"prompt_tokens":[]}
{"code_tokens":["\n	public","void","onComponentTag","(","Component","component,","ComponentTag","tag",")","\n	","{","\n	"],"docstring_tokens":["Called","any","time","a","component","that","has","this","behavior","registered","is","rendering","the","component","tag"],"prompt_tokens":[]}
{"code_tokens":["\n	@Override\n	public","void","onEvent","(","Component","component,","IEvent<?>","event",")","\n	","{","\n	"],"docstring_tokens":["Called","to","notify","the","behavior","about","any","events","sent","to","the","component"],"prompt_tokens":[]}
{"code_tokens":["\r\n	protected","PageParameters","getPageParameters","(","IRequestHandler","handler",")","\r\n	","{","\r\n		if","(","handler","instanceof","IPageClassRequestHandler",")","\r\n		","{","\r\n			IPageClassRequestHandler","pageHandler","=","(","IPageClassRequestHandler",")","handler",";","\r\n			return","pageHandler",".","getPageParameters","(",")",";","\r\n		","}","\r\n		return","null",";","\r\n	"],"docstring_tokens":["Resolves","page","parameters","from","a","request","handler"],"prompt_tokens":[]}
{"code_tokens":["\n	private","<C","extends","IRequestablePage>","Constructor<C>","constructor","(","final","Class<C>","pageClass,\n		final","Class<PageParameters>","argumentType",")","\n	","{","\n		//","Get","constructor","for","page","class","from","cache\n		Constructor<C>","constructor","=","(","Constructor<C>",")","constructorForClass",".","get","(","pageClass",")",";","\n\n		//","Need","to","look","up?\n		if","(","constructor","==","null",")","\n		","{","\n			try\n			","{","\n				//","Try","to","find","the","constructor\n				constructor","=","pageClass",".","getDeclaredConstructor","(","new","Class[]","{","argumentType","}",")",";","\n\n				//","Store","it","in","the","cache\n				Constructor<C>","tmpConstructor","=","(","Constructor<C>",")","constructorForClass",".","putIfAbsent","(","pageClass,","constructor",")",";","\n				if","(","tmpConstructor","!=","null",")","\n				","{","\n					constructor","=","tmpConstructor",";","\n				","}","\n\n				log",".","debug","(","\"Found","constructor","for","Page","of","type","'","{","}","'","and","argument","of","type","'","{","}","'",".","\",\n					pageClass,","argumentType",")",";","\n			","}","\n			catch","(","NoSuchMethodException","e",")","\n			","{","\n				log",".","debug","(","\n					\"Page","of","type","'","{","}","'","has","not","visible","constructor","with","an","argument","of","type","'","{","}","'",".","\",\n					pageClass,","argumentType",")",";","\n\n				return","null",";","\n			","}","\n		","}","\n\n		return","constructor",";","\n	"],"docstring_tokens":["Looks","up","a","one-arg","Page","constructor","by","class","and","argument","type"],"prompt_tokens":[]}
{"code_tokens":["\n	@Override\n	public","Enumeration<String>","getAttributeNames","(",")","\n	","{","\n		return","Collections",".","enumeration","(","attributes",".","keySet","(",")",")",";","\n\n	"],"docstring_tokens":["Get","the","names","of","the","attributes","in","the","session"],"prompt_tokens":[]}
{"code_tokens":["\n	@Override\n	public","long","getCreationTime","(",")","\n	","{","\n		return","creationTime",";","\n	"],"docstring_tokens":["Get","the","creation","time","of","the","session"],"prompt_tokens":[]}
{"code_tokens":["\n	@Override\n	public","String","getId","(",")","\n	","{","\n		return","id",";","\n	"],"docstring_tokens":["Return","the","id","of","this","session"],"prompt_tokens":[]}
{"code_tokens":["\n	@Override\n	public","long","getLastAccessedTime","(",")","\n	","{","\n		return","lastAccessedTime",";","\n	"],"docstring_tokens":["Get","the","time","the","session","was","last","accessed"],"prompt_tokens":[]}
{"code_tokens":["\n	@Override\n	public","ServletContext","getServletContext","(",")","\n	","{","\n		return","context",";","\n	"],"docstring_tokens":["Return","the","servlet","context","for","the","session"],"prompt_tokens":[]}
{"code_tokens":["\n	@Override\n	@Deprecated\n	public","String[]","getValueNames","(",")","\n	","{","\n		String[]","result","=","new","String[attributes",".","size","(",")","]",";","\n		return","attributes",".","keySet","(",")",".","toArray","(","result",")",";","\n	"],"docstring_tokens":["Get","the","names","of","the","values","in","the","session"],"prompt_tokens":[]}
{"code_tokens":["\n	@Override\n	public","boolean","isNew","(",")","\n	","{","\n		return","false",";","\n	"],"docstring_tokens":["Check","if","the","session","is","new"],"prompt_tokens":[]}
{"code_tokens":["\n	public","void","timestamp","(",")","\n	","{","\n		lastAccessedTime","=","System",".","currentTimeMillis","(",")",";","\n	"],"docstring_tokens":["Set","the","last","accessed","time","for","the","session"],"prompt_tokens":[]}
{"code_tokens":["\n	public","final","boolean","isTemporary","(",")","\n	","{","\n		return","temporary",";","\n	"],"docstring_tokens":["Indicates","the","state","of","the","session"],"prompt_tokens":[]}
{"code_tokens":["\n	public","final","void","setTemporary","(","boolean","temporary",")","\n	","{","\n		this",".","temporary","=","temporary",";","\n	"],"docstring_tokens":["Changes","the","state","of","this","session"],"prompt_tokens":[]}
{"code_tokens":["\n	public","static","byte[]","randomSalt","(",")","\n	","{","\n		//","must","be","8","bytes","-","for","anything","else","PBES1Core","throws\n		//","InvalidAlgorithmParameterException:","Salt","must","be","8","bytes","long","\n		byte[]","salt","=","new","byte[8]",";","\n		new","Random","(",")",".","nextBytes","(","salt",")",";","\n		return","salt",";","\n	"],"docstring_tokens":["Create","a","random","salt","to","be","used","for","this","crypt"],"prompt_tokens":[]}
{"code_tokens":["\n	public","static","void","check","(",")","\n	","{","\n		if","(","Application",".","get","(",")",".","getDebugSettings","(",")",".","isDevelopmentUtilitiesEnabled","(",")","==","false",")","\n		","{","\n			throw","new","DevelopmentUtilitiesNotEnabledException","(",")",";","\n		","}","\n	"],"docstring_tokens":["Verifies","that","development","utilities","are","enabled"],"prompt_tokens":[]}
{"code_tokens":["\n	public","void","addFactory","(","final","IFieldValueFactory","factory",")","\n	","{","\n		Args",".","notNull","(","factory,","\"factory\"",")",";","\n\n		delegates",".","add","(","factory",")",";","\n	"],"docstring_tokens":["Adds","a","factory","to","the","compound","factory"],"prompt_tokens":[]}
{"code_tokens":["\n	public","final","String","getEncoding","(",")","\n	","{","\n		return","encoding",";","\n	"],"docstring_tokens":["Return","the","encoding","used","while","reading","the","markup","file"],"prompt_tokens":[]}
{"code_tokens":["\n	private","String","determineEncoding","(","final","CharSequence","string",")","\n	","{","\n		//","Does","the","string","match","the","<?xml",".",".","?>","pattern\n		final","Matcher","matcher","=","encodingPattern",".","matcher","(","string",")",";","\n		if","(","!matcher",".","find","(",")",")","\n		","{","\n			//","No\n			return","null",";","\n		","}","\n\n		//","Extract","the","encoding\n		String","encoding","=","matcher",".","group","(","2",")",";","\n		if","(","(","encoding","==","null",")","||","(","encoding",".","length","(",")","==","0",")",")","\n		","{","\n			encoding","=","matcher",".","group","(","3",")",";","\n		","}","\n\n		if","(","encoding","!=","null",")","\n		","{","\n			encoding","=","encoding",".","trim","(",")",";","\n		","}","\n\n		return","encoding",";","\n	"],"docstring_tokens":["Determine","the","encoding","from","the","xml","decl"],"prompt_tokens":[]}
{"code_tokens":["\n	protected","Form<?>","findForm","(",")","\n	","{","\n		//","try","to","find","form","in","the","hierarchy","of","owning","component\n		Component","component","=","getComponent","(",")",";","\n		if","(","component","instanceof","Form<?>",")","\n		","{","\n			return","(","Form<?>",")","component",";","\n		","}","\n		else\n		","{","\n			return","component",".","findParent","(","Form",".","class",")",";","\n		","}","\n	"],"docstring_tokens":["Finds","form","that","will","be","submitted"],"prompt_tokens":[]}
{"code_tokens":["\n	protected","boolean","shouldTriggerJavaScriptSubmitEvent","(",")","\n	","{","\n		return","false",";","\n	"],"docstring_tokens":["Controls","whether","or","not","a","JS","submit","should","be","triggered","on","the","submitting","form.	","False","by","default"],"prompt_tokens":[]}
{"code_tokens":["\n	protected","void","onError","(","AjaxRequestTarget","target",")","\n	","{","\n	"],"docstring_tokens":["Listener","method","invoked","when","the","form","has","been","processed","and","errors","occurred"],"prompt_tokens":[]}
{"code_tokens":["\n	public","static","AjaxFormSubmitBehavior","onSubmit","(","String","eventName,\n		SerializableConsumer<AjaxRequestTarget>","onSubmit",")","\n	","{","\n		Args",".","notNull","(","onSubmit,","\"onSubmit\"",")",";","\n\n		return","new","AjaxFormSubmitBehavior","(","eventName",")","\n		","{","\n			private","static","final","long","serialVersionUID","=","1L",";","\n\n			@Override\n			protected","void","onSubmit","(","AjaxRequestTarget","target",")","\n			","{","\n				onSubmit",".","accept","(","target",")",";","\n			","}","\n		","}",";","\n	"],"docstring_tokens":["Creates","an","AjaxFormSubmitBehavior","based","on","lambda","expressions"],"prompt_tokens":[]}
{"code_tokens":["\r\n	@Override\r\n	public","boolean","supportsVersioning","(",")","\r\n	","{","\r\n		return","true",";","\r\n	"],"docstring_tokens":["Pages","are","always","serialized,","so","versioning","is","supported"],"prompt_tokens":[]}
{"code_tokens":["\r\n	@Override\r\n	public","boolean","canBeAsynchronous","(","IPageContext","context",")","\r\n	","{","\r\n		//","session","data","must","be","added","here","*before*","any","asynchronous","calls\r\n		//","when","session","is","no","longer","available\r\n		getSessionData","(","context",")",";","\r\n\r\n		return","getDelegate","(",")",".","canBeAsynchronous","(","context",")",";","\r\n	"],"docstring_tokens":["Supports","asynchronous","add","if","the","delegate","supports","it"],"prompt_tokens":[]}
{"code_tokens":["\n	@Override\n	public","void","onComponentTag","(","final","Component","component,","final","ComponentTag","tag",")","\n	","{","\n		if","(","tag",".","isOpenClose","(",")",")","\n		","{","\n			tag",".","setType","(","TagType",".","OPEN",")",";","\n		","}","\n	"],"docstring_tokens":["Make","sure","we","open","up","open-close","tags","to","open-body-close"],"prompt_tokens":[]}
{"code_tokens":["\r\n	public","static","String","join","(","final","String","separator,","final","List<String>","fragments",")","\r\n	","{","\r\n		if","(","fragments","==","null",")","\r\n		","{","\r\n			return","\"\"",";","\r\n		","}","\r\n		return","join","(","separator,","fragments",".","toArray","(","new","String[0]",")",")",";","\r\n	"],"docstring_tokens":["Joins","string","fragments","using","the","specified","separator"],"prompt_tokens":[]}
{"code_tokens":["\r\n	public","static","CharSequence","replaceAll","(","final","CharSequence","s,","final","CharSequence","searchFor,\r\n		CharSequence","replaceWith",")","\r\n	","{","\r\n		if","(","s","==","null",")","\r\n		","{","\r\n			return","null",";","\r\n		","}","\r\n\r\n		//","If","searchFor","is","null","or","the","empty","string,","then","there","is","nothing","to\r\n		//","replace,","so","returning","s","is","the","only","option","here",".","\r\n		if","(","(","searchFor","==","null",")","||","searchFor",".","length","(",")","==","0",")","\r\n		","{","\r\n			return","s",";","\r\n		","}","\r\n\r\n		//","If","replaceWith","is","null,","then","the","searchFor","should","be","replaced","with\r\n		//","nothing,","which","can","be","seen","as","the","empty","string",".","\r\n		if","(","replaceWith","==","null",")","\r\n		","{","\r\n			replaceWith","=","\"\"",";","\r\n		","}","\r\n\r\n		String","searchString","=","searchFor",".","toString","(",")",";","\r\n		//","Look","for","first","occurrence","of","searchFor\r\n		int","matchIndex","=","search","(","s,","searchString,","0",")",";","\r\n		if","(","matchIndex","==","-1",")","\r\n		","{","\r\n			//","No","replace","operation","needs","to","happen\r\n			return","s",";","\r\n		","}","\r\n		else\r\n		","{","\r\n			return","s",".","toString","(",")",".","replace","(","searchString,","replaceWith",")",";","\r\n		","}","\r\n	"],"docstring_tokens":["Replace","all","occurrences","of","one","string","replaceWith","another","string"],"prompt_tokens":[]}
{"code_tokens":["\r\n	public","static","Boolean","toBoolean","(","final","String","s",")","throws","StringValueConversionException\r\n	","{","\r\n		return","isTrue","(","s",")",";","\r\n	"],"docstring_tokens":["Converts","the","string","s","to","a","Boolean"],"prompt_tokens":[]}
{"code_tokens":["\r\n	public","static","String","toString","(","final","Throwable","throwable",")","\r\n	","{","\r\n		if","(","throwable","!=","null",")","\r\n		","{","\r\n			List<Throwable>","al","=","new","ArrayList<>","(",")",";","\r\n			Throwable","cause","=","throwable",";","\r\n			al",".","add","(","cause",")",";","\r\n			while","(","(","cause",".","getCause","(",")","!=","null",")","&&","(","cause","!=","cause",".","getCause","(",")",")",")","\r\n			","{","\r\n				cause","=","cause",".","getCause","(",")",";","\r\n				al",".","add","(","cause",")",";","\r\n			","}","\r\n\r\n			AppendingStringBuffer","sb","=","new","AppendingStringBuffer","(","256",")",";","\r\n			//","first","print","the","last","cause\r\n			int","length","=","al",".","size","(",")","-","1",";","\r\n			cause","=","al",".","get","(","length",")",";","\r\n			if","(","throwable","instanceof","RuntimeException",")","\r\n			","{","\r\n				sb",".","append","(","\"Message:","\"",")",";","\r\n				sb",".","append","(","throwable",".","getMessage","(",")",")",";","\r\n				sb",".","append","(","\"\\n\\n\"",")",";","\r\n			","}","\r\n			sb",".","append","(","\"Root","cause:\\n\\n\"",")",";","\r\n			outputThrowable","(","cause,","sb,","false",")",";","\r\n\r\n			if","(","length",">","0",")","\r\n			","{","\r\n				sb",".","append","(","\"\\n\\nComplete","stack:\\n\\n\"",")",";","\r\n				for","(","int","i","=","0",";","i","<","length",";","i++",")","\r\n				","{","\r\n					outputThrowable","(","al",".","get","(","i",")",",","sb,","true",")",";","\r\n					sb",".","append","(","'\\n'",")",";","\r\n				","}","\r\n			","}","\r\n			return","sb",".","toString","(",")",";","\r\n		","}","\r\n		else\r\n		","{","\r\n			return","\"<Null","Throwable>\"",";","\r\n		","}","\r\n	"],"docstring_tokens":["Converts","a","Throwable","to","a","string"],"prompt_tokens":[]}
{"code_tokens":["\n	public","MarkupContainer","addOrReplace","(","final","Component",".",".",".","children",")","\n	","{","\n		for","(","Component","child",":","children",")","\n		","{","\n			Args",".","notNull","(","child,","\"child\"",")",";","\n\n			checkHierarchyChange","(","child",")",";","\n\n			if","(","get","(","child",".","getId","(",")",")","==","null",")","\n			","{","\n				add","(","child",")",";","\n			","}","\n			else\n			","{","\n				replace","(","child",")",";","\n			","}","\n		","}","\n\n		return","this",";","\n	"],"docstring_tokens":["Replaces","a","child","component","of","this","container","with","another","or","just","adds","it","in","case","no","child	","with","the","same","id","existed","yet"],"prompt_tokens":[]}
{"code_tokens":["\n	public","MarkupContainer","remove","(","final","Component","component",")","\n	","{","\n		checkHierarchyChange","(","component",")",";","\n\n		Args",".","notNull","(","component,","\"component\"",")",";","\n\n		children_remove","(","component",".","getId","(",")",")",";","\n		removedComponent","(","component",")",";","\n\n		return","this",";","\n	"],"docstring_tokens":["Removes","a","component","from","the","children","identified","by","the","component.getId"],"prompt_tokens":[]}
{"code_tokens":["\n	@Deprecated","(","since","=","\"9",".","10",".","0\",","forRemoval","=","true",")","\n	public","final","void","renderAssociatedMarkup","(","final","String","openTagName,","final","String","exceptionMessage",")","\n	","{","\n		renderAssociatedMarkup","(","openTagName",")",";","\n	"],"docstring_tokens":["Renders","the","entire","associated","markup","for","a","container","such","as","a","Border","or","Panel"],"prompt_tokens":[]}
{"code_tokens":["\n	public","MarkupContainer","replace","(","final","Component","child",")","\n	","{","\n		Args",".","notNull","(","child,","\"child\"",")",";","\n\n		checkHierarchyChange","(","child",")",";","\n\n		if","(","log",".","isDebugEnabled","(",")",")","\n		","{","\n			log",".","debug","(","\"Replacing","\"","+","child",".","getId","(",")","+","\"","in","\"","+","this",")",";","\n		","}","\n\n		if","(","child",".","getParent","(",")","!=","this",")","\n		","{","\n			final","Component","replaced","=","children_put","(","child",")",";","\n\n			//","Look","up","to","make","sure","it","was","already","in","the","map\n			if","(","replaced","==","null",")","\n			","{","\n				throw","new","WicketRuntimeException","(","\n					exceptionMessage","(","\"Cannot","replace","a","component","which","has","not","been","added:","id='\"","+\n						child",".","getId","(",")","+","\"',","component=\"","+","child",")",")",";","\n			","}","\n\n			//","first","remove","the","component",".","\n			removedComponent","(","replaced",")",";","\n\n			//","The","generated","markup","id","remains","the","same\n			child",".","setMarkupId","(","replaced",")",";","\n\n			//","then","add","the","other","one",".","\n			addedComponent","(","child",")",";","\n		","}","\n\n		return","this",";","\n	"],"docstring_tokens":["Replaces","a","child","component","of","this","container","with","another"],"prompt_tokens":[]}
{"code_tokens":["\n	public","int","size","(",")","\n	","{","\n		return","children_size","(",")",";","\n	"],"docstring_tokens":["Get","the","number","of","children","in","this","container"],"prompt_tokens":[]}
{"code_tokens":["\n	private","int","children_size","(",")","\n	","{","\n		if","(","children","==","null",")","\n		","{","\n			return","0",";","\n		","}","\n		if","(","children","instanceof","Component",")","\n		","{","\n			return","1",";","\n		","}","\n		if","(","children","instanceof","List",")","\n		","{","\n			List<?>","kids","=","children","(",")",";","\n			return","kids",".","size","(",")",";","\n		","}","\n		return","(","(","Map<?,","?>",")","children",")",".","size","(",")",";","\n	"],"docstring_tokens":["Gets","the","number","of","child","components","of","this","markup","container"],"prompt_tokens":[]}
{"code_tokens":["\n	private","boolean","canRenderRawTag","(","MarkupElement","tag",")","\n	","{","\n		boolean","isWicketTag","=","tag","instanceof","WicketTag",";","\n		\n		boolean","stripTag","=","isWicketTag","?","Application",".","get","(",")",".","getMarkupSettings","(",")",".","getStripWicketTags","(",")",":","false",";","\n		\n		return","!stripTag",";","\n	"],"docstring_tokens":["Says","if","the","given","tag","can","be","handled","as","a","raw","markup"],"prompt_tokens":[]}
{"code_tokens":["\n	private","void","throwException","(","final","MarkupStream","markupStream,","final","ComponentTag","tag",")","\n	","{","\n		final","String","id","=","tag",".","getId","(",")",";","\n		\n		if","(","tag","instanceof","WicketTag",")","\n		","{","\n			if","(","(","(","WicketTag",")","tag",")",".","isChildTag","(",")",")","\n			","{","\n				markupStream",".","throwMarkupException","(","\"Found","\"","+","tag",".","toString","(",")","+\n					\"","but","no","<wicket:extend>",".","Container:","\"","+","toString","(",")",")",";","\n			","}","\n			else\n			","{","\n				markupStream",".","throwMarkupException","(","\"Failed","to","handle:","\"","+\n					tag",".","toString","(",")","+\n					\"",".","It","might","be","that","no","resolver","has","been","registered","to","handle","this","special","tag",".","\"","+\n					\"","But","it","also","could","be","that","you","declared","wicket:id=\"","+","id","+\n					\"","in","your","markup,","but","that","you","either","did","not","add","the","\"","+\n					\"component","to","your","page","at","all,","or","that","the","hierarchy","does","not","match",".","\"","+\n					\"Container:","\"","+","toString","(",")",")",";","\n			","}","\n		","}","\n\n		List<String>","names","=","findSimilarComponents","(","id",")",";","\n\n		//","No","one","was","able","to","handle","the","component","id\n		StringBuilder","msg","=","new","StringBuilder","(","500",")",";","\n		msg",".","append","(","\"Unable","to","find","component","with","id","'\"",")",";","\n		msg",".","append","(","id",")",";","\n		msg",".","append","(","\"'","in","\"",")",";","\n		msg",".","append","(","this",".","toString","(",")",")",";","\n		msg",".","append","(","\"\\n\\tExpected:","'\"",")",";","\n		msg",".","append","(","getPageRelativePath","(",")",")",";","\n		msg",".","append","(","PATH_SEPARATOR",")",";","\n		msg",".","append","(","id",")",";","\n		msg",".","append","(","\"'",".","\\n\\tFound","with","similar","names:","'\"",")",";","\n		msg",".","append","(","Strings",".","join","(","\"',","\",","names",")",")",";","\n		msg",".","append","(","'\\''",")",";","\n\n		log",".","error","(","msg",".","toString","(",")",")",";","\n		markupStream",".","throwMarkupException","(","msg",".","toString","(",")",")",";","\n	"],"docstring_tokens":["Throws","a","org.apache.wicket.markup.MarkupException","when","the	","component","markup","is","not","consistent"],"prompt_tokens":[]}
{"code_tokens":["\n	protected","final","void","renderAll","(","final","MarkupStream","markupStream,","final","ComponentTag","openTag",")","\n	","{","\n		while","(","markupStream",".","isCurrentIndexInsideTheStream","(",")",")","\n		","{","\n			//","In","case","of","Page","we","need","to","render","the","whole","file",".","For","all","other","components","just","what\n			//","is","in","between","the","open","and","the","close","tag",".","\n			if","(","(","openTag","!=","null",")","&&","markupStream",".","get","(",")",".","closes","(","openTag",")",")","\n			","{","\n				break",";","\n			","}","\n\n			//","Remember","where","we","are\n			final","int","index","=","markupStream",".","getCurrentIndex","(",")",";","\n\n			//","Render","the","markup","element\n			boolean","rawMarkup","=","renderNext","(","markupStream",")",";","\n\n			//","Go","back","to","where","we","were","and","move","the","markup","stream","forward","to","whatever","the","next\n			//","element","is",".","\n			markupStream",".","setCurrentIndex","(","index",")",";","\n\n			if","(","rawMarkup",")","\n			","{","\n				markupStream",".","next","(",")",";","\n			","}","\n			else","if","(","!markupStream",".","getTag","(",")",".","isClose","(",")",")","\n			","{","\n				markupStream",".","skipComponent","(",")",";","\n			","}","\n			else\n			","{","\n				throw","new","WicketRuntimeException","(","\"Ups",".","This","should","never","happen",".","\"","+\n					markupStream",".","toString","(",")",")",";","\n			","}","\n		","}","\n	"],"docstring_tokens":["Loop","through","the","markup","in","this","container"],"prompt_tokens":[]}
{"code_tokens":["\n	@SuppressWarnings","(","\"unchecked\"",")","\n	public","Stream<Component>","streamChildren","(",")","\n	","{","\n		class","ChildrenIterator<C>","implements","Iterator<C>\n		","{","\n			private","Iterator<C>","currentIterator",";","\n\n			private","Deque<Iterator<C>>","iteratorStack","=","new","ArrayDeque<>","(",")",";","\n\n			private","ChildrenIterator","(","Iterator<C>","iterator",")","\n			","{","\n				currentIterator","=","iterator",";","\n			","}","\n\n			@Override\n			public","boolean","hasNext","(",")","\n			","{","\n				while","(","!currentIterator",".","hasNext","(",")","&&","!iteratorStack",".","isEmpty","(",")",")","\n				","{","\n					currentIterator","=","iteratorStack",".","pop","(",")",";","\n				","}","\n				return","currentIterator",".","hasNext","(",")",";","\n			","}","\n\n			@Override\n			public","C","next","(",")","\n			","{","\n				C","child","=","currentIterator",".","next","(",")",";","\n				if","(","child","instanceof","Iterable",")","\n				","{","\n					iteratorStack",".","push","(","currentIterator",")",";","\n					currentIterator","=","(","(","Iterable<C>",")","child",")",".","iterator","(",")",";","\n				","}","\n				return","child",";","\n			","}","\n		","}","\n		return","StreamSupport",".","stream","(","\n			Spliterators",".","spliteratorUnknownSize","(","new","ChildrenIterator<>","(","iterator","(",")",")",",","0",")",",","false",")",";","\n	"],"docstring_tokens":["Returns","a","sequential","Stream","with","the","all","children","of","this","markup","container","as","its	","source"],"prompt_tokens":[]}
{"code_tokens":["\n	public","boolean","add","(","final","T","listener",")","\n	","{","\n		if","(","(","listener","==","null",")","&&","!isAllowingNulls","(",")",")","\n		","{","\n			return","false",";","\n		","}","\n		if","(","!isAllowingDuplicates","(",")","&&","listeners",".","contains","(","listener",")",")","\n		","{","\n			return","false",";","\n		","}","\n		listeners",".","add","(","listener",")",";","\n		return","true",";","\n	"],"docstring_tokens":["Adds","a","listener","to","this","set","of","listeners"],"prompt_tokens":[]}
{"code_tokens":["\n	protected","void","notify","(","final","INotifier<T>","notifier",")","\n	","{","\n		for","(","T","listener",":","listeners",")","\n		","{","\n			notifier",".","notify","(","listener",")",";","\n		","}","\n	"],"docstring_tokens":["Notifies","each","listener","in","this"],"prompt_tokens":[]}
{"code_tokens":["\n	protected","void","notifyIgnoringExceptions","(","final","INotifier<T>","notifier",")","\n	","{","\n		for","(","T","listener",":","listeners",")","\n		","{","\n			try\n			","{","\n				notifier",".","notify","(","listener",")",";","\n			","}","\n			catch","(","Exception","e",")","\n			","{","\n				logger",".","error","(","\"Error","invoking","listener:","\"","+","listener,","e",")",";","\n			","}","\n		","}","\n	"],"docstring_tokens":["Notifies","each","listener","in","this","set","ignoring","exceptions"],"prompt_tokens":[]}
{"code_tokens":["\n	protected","void","reversedNotifyIgnoringExceptions","(","final","INotifier<T>","notifier",")","\n	","{","\n		reversedNotify","(","new","INotifier<T>","(",")","\n		","{","\n			@Override\n			public","void","notify","(","T","listener",")","\n			","{","\n				try\n				","{","\n					notifier",".","notify","(","listener",")",";","\n				","}","\n				catch","(","Exception","e",")","\n				","{","\n					logger",".","error","(","\"Error","invoking","listener:","\"","+","listener,","e",")",";","\n				","}","\n\n			","}","\n\n		","}",")",";","\n	"],"docstring_tokens":["Notifies","each","listener","in","this","set","in","reverse","order","ignoring","exceptions"],"prompt_tokens":[]}
{"code_tokens":["\n	protected","void","reversedNotify","(","final","INotifier<T>","notifier",")","\n	","{","\n		Iterator<T>","it","=","new","ReverseListIterator<>","(","listeners",")",";","\n		while","(","it",".","hasNext","(",")",")","\n		","{","\n			T","listener","=","it",".","next","(",")",";","\n			notifier",".","notify","(","listener",")",";","\n		","}","\n	"],"docstring_tokens":["Notifies","each","listener","in","this","in","reversed","order"],"prompt_tokens":[]}
{"code_tokens":["\n	public","void","remove","(","final","T","listener",")","\n	","{","\n		listeners",".","remove","(","listener",")",";","\n	"],"docstring_tokens":["Removes","a","listener","from","this","set"],"prompt_tokens":[]}
{"code_tokens":["\n	protected","boolean","isAllowingDuplicates","(",")","\n	","{","\n		return","true",";","\n	"],"docstring_tokens":["Whether","or","not","added","listeners","should","be","checked","for","duplicates"],"prompt_tokens":[]}
{"code_tokens":["\n	protected","boolean","isAllowingNulls","(",")","\n	","{","\n		return","false",";","\n	"],"docstring_tokens":["Whether","or","not","to","allow","nulls","in","listener","collection"],"prompt_tokens":[]}
{"code_tokens":["\n	@Override\n	public","Iterator<T>","iterator","(",")","\n	","{","\n		return","listeners",".","iterator","(",")",";","\n	"],"docstring_tokens":["Returns","an","iterator","that","can","iterate","the","listeners"],"prompt_tokens":[]}
{"code_tokens":["\n	public","boolean","hasRole","(","String","role",")","\n	","{","\n		return","roles",".","hasRole","(","role",")",";","\n	"],"docstring_tokens":["Whether","this","user","has","the","given","role"],"prompt_tokens":[]}
{"code_tokens":["\n	public","boolean","hasAnyRole","(","Roles","roles",")","\n	","{","\n		return","this",".","roles",".","hasAnyRole","(","roles",")",";","\n	"],"docstring_tokens":["Whether","this","user","has","any","of","the","given","roles"],"prompt_tokens":[]}
{"code_tokens":["\n	protected","final","void","activate","(","final","IBreadCrumbParticipant","breadCrumbParticipant",")","\n	","{","\n		//","get","old","value\n		IBreadCrumbParticipant","previousParticipant","=","activeParticipant",";","\n\n		//","and","set","the","provided","participant","as","the","active","one\n		activeParticipant","=","breadCrumbParticipant",";","\n\n		//","fire","bread","crumb","activated","event\n		listenerSupport",".","fireBreadCrumbActivated","(","previousParticipant,","breadCrumbParticipant",")",";","\n\n		//","signal","the","bread","crumb","participant","that","it","is","selected","as","the\n		//","currently","active","one\n		breadCrumbParticipant",".","onActivate","(","previousParticipant",")",";","\n	"],"docstring_tokens":["Activates","the","bread","crumb","participant"],"prompt_tokens":[]}
{"code_tokens":["\n	public","void","invalidate","(","IStaticCacheableResource","resource",")","\n	","{","\n		//","get","cache","key","for","resource","reference\n		final","Serializable","key","=","Args",".","notNull","(","resource,","\"resource\"",")",".","getCacheKey","(",")",";","\n\n		//","if","key","is","available","purge","cache","entry\n		if","(","key","!=","null",")","\n		","{","\n			cache",".","remove","(","key",")",";","\n		","}","\n	"],"docstring_tokens":["remove","cacheable","resource","from","cache"],"prompt_tokens":[]}
{"code_tokens":["\n	public","ResourceIsolationRequestCycleListener","setUnknownOutcomeAction","(","CsrfAction","action",")","\n	","{","\n		this",".","unknownOutcomeAction","=","action",";","\n		return","this",";","\n	"],"docstring_tokens":["Sets","the","action","when","none","of","the","resource","isolation","policies","can","come","to","an","outcome"],"prompt_tokens":[]}
{"code_tokens":["\n	public","ResourceIsolationRequestCycleListener","setDisallowedOutcomeAction","(","CsrfAction","action",")","\n	","{","\n		this",".","disallowedOutcomeAction","=","action",";","\n		return","this",";","\n	"],"docstring_tokens":["Sets","the","action","when","a","request","is","disallowed","by","a","resource","isolation","policy"],"prompt_tokens":[]}
{"code_tokens":["\n	public","ResourceIsolationRequestCycleListener","setErrorCode","(","int","errorCode",")","\n	","{","\n		this",".","errorCode","=","errorCode",";","\n		return","this",";","\n	"],"docstring_tokens":["Modifies","the","HTTP","error","code","in","the","exception","when","a","disallowed","request","is","detected"],"prompt_tokens":[]}
{"code_tokens":["\n	public","ResourceIsolationRequestCycleListener","setErrorMessage","(","String","errorMessage",")","\n	","{","\n		this",".","errorMessage","=","errorMessage",";","\n		return","this",";","\n	"],"docstring_tokens":["Modifies","the","HTTP","message","in","the","exception","when","a","disallowed","request","is","detected"],"prompt_tokens":[]}
{"code_tokens":["\n	protected","boolean","isChecked","(","IRequestablePage","targetedPage",")","\n	","{","\n		return","true",";","\n	"],"docstring_tokens":["Override","to","limit","whether","the","request","to","the","specific","page","should","be","checked","for","a","possible	","CSRF","attack"],"prompt_tokens":[]}
{"code_tokens":["\n	@Override\n	public","void","onEndRequest","(","RequestCycle","cycle",")","\n	","{","\n		if","(","cycle",".","getResponse","(",")","instanceof","WebResponse",")","\n		","{","\n			WebResponse","webResponse","=","(","WebResponse",")","cycle",".","getResponse","(",")",";","\n			if","(","webResponse",".","isHeaderSupported","(",")",")","\n			","{","\n				for","(","IResourceIsolationPolicy","resourceIsolationPolicy",":","resourceIsolationPolicies",")","\n				","{","\n					resourceIsolationPolicy\n						",".","setHeaders","(","(","HttpServletResponse",")","webResponse",".","getContainerResponse","(",")",")",";","\n				","}","\n			","}","\n		","}","\n	"],"docstring_tokens":["Allow","isolation","policy","to","add","headers"],"prompt_tokens":[]}
{"code_tokens":["\r\n\r\n	@Override\r\n	public","String","getMessage","(",")","\r\n	","{","\r\n		return","message",";","\r\n	"],"docstring_tokens":["Gets","the","error","message"],"prompt_tokens":[]}
{"code_tokens":["\r\n	public","synchronized","void","setLog","(","final","Logger","log",")","\r\n	","{","\r\n		this",".","log","=","log",";","\r\n	"],"docstring_tokens":["Sets","log","for","user","code","to","log","to","when","task","runs"],"prompt_tokens":[]}
{"code_tokens":["\r\n	public","synchronized","void","setStartTime","(","final","Instant","startTime",")","\r\n	","{","\r\n		if","(","isStarted",")","\r\n		","{","\r\n			throw","new","IllegalStateException","(","\r\n				\"Attempt","to","set","start","time","of","task","that","has","already","been","started\"",")",";","\r\n		","}","\r\n\r\n		this",".","startTime","=","startTime",";","\r\n	"],"docstring_tokens":["Sets","start","time","for","this","task"],"prompt_tokens":[]}
{"code_tokens":["\r\n	protected","synchronized","Logger","getLog","(",")","\r\n	","{","\r\n		if","(","log","==","null",")","\r\n		","{","\r\n			log","=","LoggerFactory",".","getLogger","(","Task",".","class",")",";","\r\n		","}","\r\n		return","log",";","\r\n	"],"docstring_tokens":["Gets","the","log","for","this","Task"],"prompt_tokens":[]}
{"code_tokens":["\r\n	public","void","stop","(",")","\r\n	","{","\r\n		stop","=","true",";","\r\n	"],"docstring_tokens":["Stops","this","Task","as","soon","as","it","has","the","opportunity"],"prompt_tokens":[]}
{"code_tokens":["\r\n	public","void","interrupt","(",")","\r\n	","{","\r\n		stop","(",")",";","\r\n		if","(","thread","!=","null",")","\r\n		","{","\r\n			thread",".","interrupt","(",")",";","\r\n		","}","\r\n	"],"docstring_tokens":["Interrupts","the","Task","as","soon","as","it","has","the","opportunity"],"prompt_tokens":[]}
{"code_tokens":["\n	public","final","Duration","getDefaultCacheDuration","(",")","\n	","{","\n		return","defaultCacheDuration",";","\n	"],"docstring_tokens":["Get","the","the","default","cache","duration","for","resources"],"prompt_tokens":[]}
{"code_tokens":["\n	public","final","ResourceSettings","setDefaultCacheDuration","(","Duration","duration",")","\n	","{","\n		Args",".","notNull","(","duration,","\"duration\"",")",";","\n		defaultCacheDuration","=","duration",";","\n		return","this",";","\n	"],"docstring_tokens":["Set","the","the","default","cache","duration","for","resources.	","	","Based","on","RFC-2616","this","should","not","exceed","one","year"],"prompt_tokens":[]}
{"code_tokens":["\n	public","ICssCompressor","getCssCompressor","(",")","\n	","{","\n		return","cssCompressor",";","\n	"],"docstring_tokens":["Get","the","CSS","compressor","to","remove","comments","and","whitespace","characters","from","css","resources"],"prompt_tokens":[]}
{"code_tokens":["\n	public","IResourceCachingStrategy","getCachingStrategy","(",")","\n	","{","\n		if","(","resourceCachingStrategy","==","null",")","\n		","{","\n			final","IResourceVersion","resourceVersion",";","\n\n			if","(","application",".","usesDevelopmentConfig","(",")",")","\n			","{","\n				//","development","mode:\n				//","use","last-modified","timestamp","of","packaged","resource","for","resource","caching\n				//","cache","the","version","information","for","the","lifetime","of","the","current","http","request\n				resourceVersion","=","new","RequestCycleCachedResourceVersion","(","\n					new","LastModifiedResourceVersion","(",")",")",";","\n			","}","\n			else\n			","{","\n				//","deployment","mode:\n				//","use","message","digest","over","resource","content","for","resource","caching\n				//","cache","the","version","information","for","the","lifetime","of","the","application\n				resourceVersion","=","new","CachingResourceVersion","(","new","MessageDigestResourceVersion","(",")",")",";","\n			","}","\n			//","cache","resource","with","a","version","string","in","the","filename\n			resourceCachingStrategy","=","new","FilenameWithVersionResourceCachingStrategy","(","\n				resourceVersion",")",";","\n		","}","\n		return","resourceCachingStrategy",";","\n	"],"docstring_tokens":["gets","the","resource","caching","strategy"],"prompt_tokens":[]}
{"code_tokens":["\n	public","ResourceSettings","setCachingStrategy","(","IResourceCachingStrategy","strategy",")","\n	","{","\n		if","(","strategy","==","null",")","\n		","{","\n			throw","new","NullPointerException","(","\n				\"It","is","not","allowed","to","set","the","resource","caching","strategy","to","value","NULL",".","\"","+\n					\"Please","use","\"","+","NoOpResourceCachingStrategy",".","class",".","getName","(",")","+","\"","instead",".","\"",")",";","\n		","}","\n		resourceCachingStrategy","=","strategy",";","\n		return","this",";","\n	"],"docstring_tokens":["sets","the","resource","caching","strategy"],"prompt_tokens":[]}
{"code_tokens":["\n	public","MetaDataHeaderItem","addTagAttribute","(","String","attributeName",")","\n	","{","\n		Args",".","notEmpty","(","attributeName,","\"attributeName\"",")",";","\n		\n		tagMinimizedAttributes",".","add","(","attributeName",")",";","\n		return","this",";","\n	"],"docstring_tokens":["Add","a","minimized","tag","attribute","to","the","item"],"prompt_tokens":[]}
{"code_tokens":["\n	public","String","generateString","(",")","\n	","{","\n		StringBuilder","buffer","=","new","StringBuilder","(",")",";","\n\n		buffer",".","append","(","'<'",")",".","append","(","tagName",")",";","\n\n		for","(","Map",".","Entry<String,","Object>","entry",":","tagAttributes",".","entrySet","(",")",")","\n		","{","\n			Object","value","=","entry",".","getValue","(",")",";","\n\n			if","(","value","instanceof","IModel",")","\n			","{","\n				value","=","(","(","IModel<?>",")","value",")",".","getObject","(",")",";","\n			","}","\n\n			buffer",".","append","(","'","'",")","\n				",".","append","(","Strings",".","escapeMarkup","(","entry",".","getKey","(",")",")",")",";","\n\n			if","(","value","!=","null",")","\n			","{","\n				buffer",".","append","(","'='",")","\n					",".","append","(","'\"'",")","\n					",".","append","(","Strings",".","replaceAll","(","value",".","toString","(",")",",","\"\\\"\",","\"\\\\\\\"\"",")",")","\n					",".","append","(","'\"'",")",";","\n			","}","\n		","}","\n		\n		for","(","String","attrName",":","tagMinimizedAttributes",")","\n		","{","\n			buffer",".","append","(","'","'",")","\n				",".","append","(","Strings",".","escapeMarkup","(","attrName",")",")",";","\n		","}","\n\n		buffer",".","append","(","\"","/>\\n\"",")",";","\n\n		return","buffer",".","toString","(",")",";","\n	"],"docstring_tokens":["Generate","the","string","representation","for","the","current","item"],"prompt_tokens":[]}
{"code_tokens":["\n	public","void","save","(","final","Contact","contact",")","\n	","{","\n		if","(","contact",".","getId","(",")","==","0",")","\n		","{","\n			contact",".","setId","(","ContactGenerator",".","getInstance","(",")",".","generateId","(",")",")",";","\n			add","(","contact",")",";","\n			updateIndecies","(",")",";","\n		","}","\n		else\n		","{","\n			throw","new","IllegalArgumentException","(","\"contact","[\"","+","contact",".","getFirstName","(",")","+\n				\"]","is","already","persistent\"",")",";","\n		","}","\n	"],"docstring_tokens":["add","contact","to","the","database"],"prompt_tokens":[]}
{"code_tokens":["\n	public","void","delete","(","final","Contact","contact",")","\n	","{","\n		map",".","remove","(","contact",".","getId","(",")",")",";","\n\n		fnameIdx",".","remove","(","contact",")",";","\n		lnameIdx",".","remove","(","contact",")",";","\n		fnameDescIdx",".","remove","(","contact",")",";","\n		lnameDescIdx",".","remove","(","contact",")",";","\n\n		contact",".","setId","(","0",")",";","\n	"],"docstring_tokens":["delete","contact","from","the","database"],"prompt_tokens":[]}
{"code_tokens":["\n	public","static","WebApplication","get","(",")","\n	","{","\n		Application","application","=","Application",".","get","(",")",";","\n\n		if","(","application","instanceof","WebApplication","==","false",")","\n		","{","\n			throw","new","WicketRuntimeException","(","\n				\"The","application","attached","to","the","current","thread","is","not","a","\"","+\n					WebApplication",".","class",".","getSimpleName","(",")",")",";","\n		","}","\n\n		return","(","WebApplication",")","application",";","\n	"],"docstring_tokens":["Covariant","override","for","easy","getting","the","current","WebApplication","without","having","to","cast	","it"],"prompt_tokens":[]}
{"code_tokens":["\n	public","String","getInitParameter","(","String","key",")","\n	","{","\n		if","(","wicketFilter","!=","null",")","\n		","{","\n			return","wicketFilter",".","getFilterConfig","(",")",".","getInitParameter","(","key",")",";","\n		","}","\n		throw","new","IllegalStateException","(","\"init","parameter","'\"","+","key","+\n			\"'","is","not","set","yet",".","Any","code","in","your\"","+\n			\"","Application","object","that","uses","the","wicketServlet/Filter","instance","should","be","put\"","+\n			\"","in","the","init","(",")","method","instead","of","your","constructor\"",")",";","\n	"],"docstring_tokens":["Gets","an","init","parameter","of","the","filter,","or","null","if","the","parameter","does","not","exist"],"prompt_tokens":[]}
{"code_tokens":["\n	public","void","setServletContext","(","ServletContext","servletContext",")","\n	","{","\n		this",".","servletContext","=","servletContext",";","\n	"],"docstring_tokens":["Sets","servlet","context","this","application","runs","after"],"prompt_tokens":[]}
{"code_tokens":["\n	private","void","unmountFromCompound","(","ICompoundRequestMapper","parent,","Request","request",")","\n	","{","\n		Collection<IRequestMapper>","toRemove","=","new","LinkedList<>","(",")",";","\n\n		for","(","IRequestMapper","mapper",":","parent",")","\n		","{","\n			if","(","mapper",".","mapRequest","(","request",")","!=","null",")","\n			","{","\n				IRequestMapper","actualMapper","=","mapper",";","\n\n				while","(","actualMapper","instanceof","IRequestMapperDelegate",")","\n				","{","\n					actualMapper","=","(","(","IRequestMapperDelegate",")","actualMapper",")",".","getDelegateMapper","(",")",";","\n				","}","\n\n				if","(","actualMapper","instanceof","ICompoundRequestMapper",")","\n				","{","\n					unmountFromCompound","(","(","ICompoundRequestMapper",")","actualMapper,","request",")",";","\n				","}","\n				else\n				","{","\n					toRemove",".","add","(","mapper",")",";","\n				","}","\n			","}","\n		","}","\n\n		for","(","IRequestMapper","mapper",":","toRemove",")","\n		","{","\n			parent",".","remove","(","mapper",")",";","\n		","}","\n	"],"docstring_tokens":["Descends","the","tree","of","ICompoundRequestMappers","and","IRequestMapperDelegates","to","find","the","correct","descendant	","to","remove"],"prompt_tokens":[]}
{"code_tokens":["\n	final","void","logStarted","(",")","\n	","{","\n		if","(","log",".","isInfoEnabled","(",")",")","\n		","{","\n			String","version","=","getFrameworkSettings","(",")",".","getVersion","(",")",";","\n			StringBuilder","b","=","new","StringBuilder","(",")",";","\n			b",".","append","(","\"[\"",")",".","append","(","getName","(",")",")",".","append","(","\"]","Started","Wicket","\"",")",";","\n			if","(","!\"n/a\"",".","equals","(","version",")",")","\n			","{","\n				b",".","append","(","\"version","\"",")",".","append","(","version",")",".","append","(","\"","\"",")",";","\n			","}","\n			b",".","append","(","\"in","\"",")",".","append","(","getConfigurationType","(",")",")",".","append","(","\"","mode\"",")",";","\n			log",".","info","(","b",".","toString","(",")",")",";","\n		","}","\n\n		if","(","usesDevelopmentConfig","(",")",")","\n		","{","\n			outputDevelopmentModeWarning","(",")",";","\n		","}","\n	"],"docstring_tokens":["Log","that","this","application","is","started"],"prompt_tokens":[]}
{"code_tokens":["\n	public","void","storeBufferedResponse","(","String","sessionId,","Url","url,","BufferedWebResponse","response",")","\n	","{","\n		if","(","Strings",".","isEmpty","(","sessionId",")",")","\n		","{","\n			log",".","error","(","\"storeBufferedResponse","needs","a","valid","session","id","to","store","the","response,","but","a","null","one","was","found",".","\"\n					+","\"Please","report","the","problem","to","dev","team","and","try","to","reproduce","it","in","a","quickstart","project",".","\"",")",";","\n			return",";","\n		","}","\n\n		String","key","=","sessionId","+","url",".","toString","(",")",";","\n		storedResponses",".","put","(","key,","response",")",";","\n	"],"docstring_tokens":["Store","the","buffered","response","at","application","level","to","use","it","at","a","later","time"],"prompt_tokens":[]}
{"code_tokens":["\r\n	public","static","TimeFrame","valueOf","(","final","Time","start,","final","Duration","duration",")","\r\n	","{","\r\n		return","new","TimeFrame","(","start,","start",".","add","(","duration",")",")",";","\r\n	"],"docstring_tokens":["Creates","a","TimeFrame","for","a","start","Time","and","Duration"],"prompt_tokens":[]}
{"code_tokens":["\r\n	public","static","TimeFrame","valueOf","(","final","Time","start,","final","Time","end",")","\r\n	","{","\r\n		return","new","TimeFrame","(","start,","end",")",";","\r\n	"],"docstring_tokens":["Creates","a","TimeFrame","for","given","start","and","end","Times"],"prompt_tokens":[]}
{"code_tokens":["\r\n	public","boolean","contains","(","final","Time","time",")","\r\n	","{","\r\n		return","(","start",".","equals","(","time",")","||","start",".","before","(","time",")",")","&&","end",".","after","(","time",")",";","\r\n	"],"docstring_tokens":["Determines","if","this","TimeFrame","contains","a","given","point","in","time"],"prompt_tokens":[]}
{"code_tokens":["\r\n	public","Duration","getDuration","(",")","\r\n	","{","\r\n		return","end",".","subtract","(","start",")",";","\r\n	"],"docstring_tokens":["Retrieves","the","Duration","of","this","TimeFrame"],"prompt_tokens":[]}
{"code_tokens":["\r\n	public","Time","getEnd","(",")","\r\n	","{","\r\n		return","end",";","\r\n	"],"docstring_tokens":["Retrieves","the","end","Time","of","this","TimeFrame"],"prompt_tokens":[]}
{"code_tokens":["\r\n	public","Time","getStart","(",")","\r\n	","{","\r\n		return","start",";","\r\n	"],"docstring_tokens":["Retrieves","the","start","Time","of","this","TimeFrame"],"prompt_tokens":[]}
{"code_tokens":["\r\n	@Override\r\n	public","TimeFrame","getTimeFrame","(",")","\r\n	","{","\r\n		return","this",";","\r\n	"],"docstring_tokens":["Implementation","of","ITimeFrameSource","that","simply","returns","this","	","TimeFrame"],"prompt_tokens":[]}
{"code_tokens":["\r\n	public","boolean","overlaps","(","final","TimeFrame","timeframe",")","\r\n	","{","\r\n		return","contains","(","timeframe",".","start",")","||","contains","(","timeframe",".","end",")","||","timeframe",".","contains","(","start",")","||\r\n			timeframe",".","contains","(","end",")",";","\r\n	"],"docstring_tokens":["Determines","if","two","TimeFrames","overlap"],"prompt_tokens":[]}
{"code_tokens":["\r\n	@Override\r\n	public","String","toString","(",")","\r\n	","{","\r\n		return","\"[start=\"","+","start","+","\",","end=\"","+","end","+","\"]\"",";","\r\n	"],"docstring_tokens":["Converts","this","TimeFrame","to","a","String","representation"],"prompt_tokens":[]}
{"code_tokens":["\n	public","ExportToolbar","setMessageModel","(","IModel<String>","messageModel",")","\n	","{","\n		this",".","messageModel","=","wrap","(","Args",".","notNull","(","messageModel,","\"messageModel\"",")",")",";","\n		return","this",";","\n	"],"docstring_tokens":["Sets","the","models","of","the","export","message","displayed","in","the","toolbar"],"prompt_tokens":[]}
{"code_tokens":["\n	public","ExportToolbar","setFileNameModel","(","IModel<String>","fileNameModel",")","\n	","{","\n		this",".","fileNameModel","=","wrap","(","Args",".","notNull","(","fileNameModel,","\"fileNameModel\"",")",")",";","\n		return","this",";","\n	"],"docstring_tokens":["Sets","the","model","of","the","file","name","used","for","the","exported","data"],"prompt_tokens":[]}
{"code_tokens":["\n	public","IModel<String>","getFileNameModel","(",")","\n	","{","\n		return","fileNameModel",";","\n	"],"docstring_tokens":["Returns","the","model","of","the","file","name","used","for","the","exported","data"],"prompt_tokens":[]}
{"code_tokens":["\n	public","IModel<String>","getMessageModel","(",")","\n	","{","\n		return","messageModel",";","\n	"],"docstring_tokens":["Returns","the","model","of","the","export","message","displayed","in","the","toolbar"],"prompt_tokens":[]}
{"code_tokens":["\n	public","ExportToolbar","addDataExporter","(","IDataExporter","exporter",")","\n	","{","\n		Args",".","notNull","(","exporter,","\"exporter\"",")",";","\n		dataExporters",".","add","(","exporter",")",";","\n		return","this",";","\n	"],"docstring_tokens":["Adds","a","IDataExporter","to","the","list","of","data","exporters","to","be","used","in","this","toolbar"],"prompt_tokens":[]}
{"code_tokens":["\r\n	@Override\r\n	public","void","setCrossOrigin","(","CrossOrigin","crossorigin",")","\r\n	","{","\r\n		throw","new","UnsupportedOperationException","(","\r\n			\"It","is","not","allowed","to","set","the","crossorigin","attribute","for","source","tag\"",")",";","\r\n	"],"docstring_tokens":["Unsupported","for","source","tag"],"prompt_tokens":[]}
{"code_tokens":["\n	@Override\n	protected","final","void","onRender","(",")","\n	","{","\n		Iterator<?","extends","Component>","it","=","renderIterator","(",")",";","\n		while","(","it",".","hasNext","(",")",")","\n		","{","\n			Component","child","=","it",".","next","(",")",";","\n			if","(","child","==","null",")","\n			","{","\n				throw","new","IllegalStateException","(","\n					\"The","render","iterator","returned","null","for","a","child",".","Container:","\"","+","this",".","toString","(",")","+\n						\"",";","Iterator=\"","+","it",".","toString","(",")",")",";","\n			","}","\n			renderChild","(","child",")",";","\n		","}","\n	"],"docstring_tokens":["Renders","all","child","items","in","no","specified","order"],"prompt_tokens":[]}
{"code_tokens":["\n	public","File","get","(","String","name,","final","boolean","create",")","\n	","{","\n		name","=","name",".","replace","(","'*',","'_'",")",";","\n		name","=","name",".","replace","(","'/',","'_'",")",";","\n		name","=","name",".","replace","(","':',","'_'",")",";","\n\n		String","path","=","createPathFrom","(","name",")",";","\n\n		File","folder","=","new","File","(","base,","path",")",";","\n		if","(","create","&&","folder",".","exists","(",")","==","false",")","\n		","{","\n			Files",".","mkdirs","(","folder",")",";","\n		","}","\n		return","folder",";","\n	"],"docstring_tokens":["Get","a","nested","folder","for","the","given","name"],"prompt_tokens":[]}
{"code_tokens":["\n	public","void","remove","(","String","name",")","\n	","{","\n		File","folder","=","get","(","name,","false",")",";","\n		if","(","folder",".","exists","(",")",")","\n		","{","\n			Files",".","removeFolder","(","folder",")",";","\n			\n			File","high","=","folder",".","getParentFile","(",")",";","\n			final","String[]","highChildren","=","high",".","list","(",")",";","\n			if","(","highChildren","!=","null","&&","highChildren",".","length","==","0","&&","Files",".","removeFolder","(","high",")",")","\n			","{","\n				File","low","=","high",".","getParentFile","(",")",";","\n				final","String[]","lowChildren","=","low",".","list","(",")",";","\n				if","(","lowChildren","!=","null","&&","lowChildren",".","length","==","0",")","\n				","{","\n					Files",".","removeFolder","(","low",")",";","\n				","}","\n			","}","\n		","}","\n	"],"docstring_tokens":["Remove","a","nested","folder"],"prompt_tokens":[]}
{"code_tokens":["\n	public","void","newGame","(","final","int","guessesAllowed,","final","WordGenerator","wordGenerator",")","\n	","{","\n		this",".","guessesAllowed","=","guessesAllowed",";","\n		this",".","guessesRemaining","=","guessesAllowed",";","\n		this",".","word","=","wordGenerator",".","next","(",")",";","\n		this",".","wordGenerator","=","wordGenerator",";","\n\n		//","Add","letters\n		letters",".","clear","(",")",";","\n		for","(","char","c","=","'a'",";","c","<=","'z'",";","c++",")","\n		","{","\n			letters",".","add","(","new","Letter","(","c",")",")",";","\n		","}","\n	"],"docstring_tokens":["Initialise","the","hangman","read","for","a","new","game"],"prompt_tokens":[]}
{"code_tokens":["\n	@Override\n	protected","void","onComponentTag","(","ComponentTag","tag",")","\n	","{","\n		super",".","onComponentTag","(","tag",")",";","\n\n		checkComponentTag","(","tag,","\"img\"",")",";","\n\n		try\n		","{","\n			tag",".","put","(","\"src\",","ImageUtil",".","createBase64EncodedImage","(","packageResourceReference,","false",")",")",";","\n		","}","\n		catch","(","ResourceStreamNotFoundException","e",")","\n		","{","\n			throw","new","WicketRuntimeException","(","\"Couldn't","find","the","resource","stream\",","e",")",";","\n		","}","\n		catch","(","IOException","e",")","\n		","{","\n			throw","new","WicketRuntimeException","(","\"Error","while","reading","the","resource","stream\",","e",")",";","\n		","}","\n	"],"docstring_tokens":["Renders","the","complete","image","tag","with","the","base64","encoded","content"],"prompt_tokens":[]}
{"code_tokens":["\n	public","StringBufferResourceStream","append","(","final","CharSequence","s",")","\n	","{","\n		buffer",".","append","(","s",")",";","\n		setLastModified","(","Instant",".","now","(",")",")",";","\n		return","this",";","\n	"],"docstring_tokens":["Adds","to","this","string","buffer","resource"],"prompt_tokens":[]}
{"code_tokens":["\n	public","StringBufferResourceStream","prepend","(","final","CharSequence","s",")","\n	","{","\n		buffer",".","insert","(","0,","s",")",";","\n		setLastModified","(","Instant",".","now","(",")",")",";","\n		return","this",";","\n	"],"docstring_tokens":["Prepends","to","this","string","buffer","resource"],"prompt_tokens":[]}
{"code_tokens":["\n	public","StringBufferResourceStream","clear","(",")","\n	","{","\n		buffer",".","delete","(","0,","buffer",".","length","(",")",")",";","\n		return","this",";","\n	"],"docstring_tokens":["Clears","the","string","buffer","resource"],"prompt_tokens":[]}
{"code_tokens":["\n	public","void","ensureExists","(",")","throws","IOException\n	","{","\n		if","(","!exists","(",")","&&","!mkdirs","(",")",")","\n		","{","\n			throw","new","IOException","(","\"Unable","to","create","folder","\"","+","this",")",";","\n		","}","\n	"],"docstring_tokens":["Does","a","mkdirs","on","this","folder","if","it","does","not","exist"],"prompt_tokens":[]}
{"code_tokens":["\n	public","File[]","getNestedFiles","(","final","FileFilter","filter",")","\n	","{","\n		final","List<File>","files","=","new","ArrayList<>","(",")",";","\n		files",".","addAll","(","Arrays",".","asList","(","getFiles","(","filter",")",")",")",";","\n		final","Folder[]","folders","=","getFolders","(",")",";","\n		for","(","Folder","folder",":","folders",")","\n		","{","\n			files",".","addAll","(","Arrays",".","asList","(","folder",".","getNestedFiles","(","filter",")",")",")",";","\n		","}","\n		return","files",".","toArray","(","new","File[files",".","size","(",")","]",")",";","\n	"],"docstring_tokens":["Gets","files","in","this","folder","matching","a","given","filter","recursively"],"prompt_tokens":[]}
{"code_tokens":["\n	public","boolean","removeFiles","(",")","\n	","{","\n		final","File[]","files","=","getFiles","(",")",";","\n		boolean","success","=","true",";","\n		for","(","File","file",":","files",")","\n		","{","\n			success","=","file",".","remove","(",")","&&","success",";","\n		","}","\n		return","success",";","\n	"],"docstring_tokens":["Removes","all","the","files","in","this","folder"],"prompt_tokens":[]}
{"code_tokens":["\n	private","boolean","remove","(","final","Folder","folder",")","\n	","{","\n		final","Folder[]","folders","=","getFolders","(",")",";","\n		boolean","success","=","true",";","\n		for","(","Folder","subfolder",":","folders",")","\n		","{","\n			success","=","subfolder",".","remove","(",")","&&","success",";","\n		","}","\n		success","=","removeFiles","(",")","&&","success",";","\n		return","folder",".","delete","(",")","&&","success",";","\n	"],"docstring_tokens":["Removes","everything","in","the","given","folder","and","then","the","folder","itself"],"prompt_tokens":[]}
{"code_tokens":["\n	public","final","ClientProperties","getProperties","(",")","\n	","{","\n		return","properties",";","\n	"],"docstring_tokens":["Gets","the","client","properties","object"],"prompt_tokens":[]}
{"code_tokens":["\n	public","final","String","getUserAgent","(",")","\n	","{","\n		return","userAgent",";","\n	"],"docstring_tokens":["returns","the","user","agent","string"],"prompt_tokens":[]}
{"code_tokens":["\n	@Override\n	public","boolean","supportsVersioning","(",")","\n	","{","\n		return","true",";","\n	"],"docstring_tokens":["Versioning","is","supported,","since","pages","are","always","serialized"],"prompt_tokens":[]}
{"code_tokens":["\n	protected","String","findIndicatorId","(",")","\n	","{","\n		if","(","getComponent","(",")","instanceof","IAjaxIndicatorAware",")","\n		","{","\n			return","(","(","IAjaxIndicatorAware",")","getComponent","(",")",")",".","getAjaxIndicatorMarkupId","(",")",";","\n		","}","\n\n		if","(","this","instanceof","IAjaxIndicatorAware",")","\n		","{","\n			return","(","(","IAjaxIndicatorAware",")","this",")",".","getAjaxIndicatorMarkupId","(",")",";","\n		","}","\n\n		Component","parent","=","getComponent","(",")",".","getParent","(",")",";","\n		while","(","parent","!=","null",")","\n		","{","\n			if","(","parent","instanceof","IAjaxIndicatorAware",")","\n			","{","\n				return","(","(","IAjaxIndicatorAware",")","parent",")",".","getAjaxIndicatorMarkupId","(",")",";","\n			","}","\n			parent","=","parent",".","getParent","(",")",";","\n		","}","\n		return","null",";","\n	"],"docstring_tokens":["Finds","the","markup","id","of","the","indicator"],"prompt_tokens":[]}
{"code_tokens":["\n	@Deprecated\n	public","static","void","writeCss","(","final","Response","response,","final","CharSequence","text,","String","id",")","\n	","{","\n		writeOpenTag","(","response,","id",")",";","\n		response",".","write","(","text",")",";","\n		writeCloseTag","(","response",")",";","\n	"],"docstring_tokens":["Write","the","simple","text","to","the","response","object","surrounded","by","a","style","tag"],"prompt_tokens":[]}
{"code_tokens":["\n	public","static","void","writeOpenTag","(","final","Response","response,","String","id",")","\n	","{","\n		AttributeMap","attributes","=","new","AttributeMap","(",")",";","\n		attributes",".","putAttribute","(","ATTR_ID,","id",")",";","\n		writeOpenTag","(","response,","attributes",")",";","\n	"],"docstring_tokens":["Write","open","style","tag","for","the","inline","CSS"],"prompt_tokens":[]}
{"code_tokens":["\n	@Deprecated\n	public","static","void","writeLinkUrl","(","final","Response","response,","final","CharSequence","url,\n		final","CharSequence","media,","final","String","markupId",")","\n	","{","\n		CssUtils",".","writeLinkUrl","(","response,","url,","media,","markupId,","null",")",";","\n	"],"docstring_tokens":["Writes","a","reference","to","a","css","file","in","the","response","object"],"prompt_tokens":[]}
{"code_tokens":["\n	public","static","String","key","(","Class<?>","scope,","String","facet",")","\n	","{","\n		return","Classes",".","simpleName","(","scope",")","+","\"",".","CSS",".","\"","+","facet",";","\n	"],"docstring_tokens":["Get","a","standardized","key","for","a","CSS","class"],"prompt_tokens":[]}
{"code_tokens":["\n	public","synchronized","void","writeTo","(","final","OutputStream","out",")","throws","IOException\n	","{","\n		int","remaining","=","count",";","\n		for","(","int","i","=","0",";","i","<","buffers",".","size","(",")",";","i++",")","\n		","{","\n			byte[]","buf","=","getBuffer","(","i",")",";","\n			int","c","=","Math",".","min","(","buf",".","length,","remaining",")",";","\n			out",".","write","(","buf,","0,","c",")",";","\n			remaining","-=","c",";","\n			if","(","remaining","==","0",")","\n			","{","\n				break",";","\n			","}","\n		","}","\n	"],"docstring_tokens":["Write","to","the","given","output","stream"],"prompt_tokens":[]}
{"code_tokens":["\r\n	public","static","long","sizeof","(","final","Serializable","object",")","\r\n	","{","\r\n		Serializable","target","=","object",";","\r\n\r\n		if","(","object","instanceof","Component",")","\r\n		","{","\r\n			//","clone","to","not","detach","the","original","component","(","WICKET-5013,","5014",")","\r\n			Component","clone","=","(","Component",")","cloneObject","(","object",")",";","\r\n			clone",".","detach","(",")",";","\r\n\r\n			target","=","clone",";","\r\n		","}","\r\n		else","if","(","object","instanceof","IDetachable",")","\r\n		","{","\r\n			//","clone","to","not","detach","the","original","IDetachable","(","WICKET-5013,","5014",")","\r\n			IDetachable","clone","=","(","IDetachable",")","cloneObject","(","object",")",";","\r\n			clone",".","detach","(",")",";","\r\n\r\n			target","=","clone",";","\r\n		","}","\r\n\r\n		return","objectSizeOfStrategy",".","sizeOf","(","target",")",";","\r\n	"],"docstring_tokens":["Computes","the","size","of","an","object"],"prompt_tokens":[]}
{"code_tokens":["\n	private","void","process","(",")","\n	","{","\n		try\n		","{","\n			formComponent",".","validate","(",")",";","\n			if","(","formComponent",".","isValid","(",")",")","\n			","{","\n				if","(","getUpdateModel","(",")",")","\n				","{","\n					formComponent",".","valid","(",")",";","\n					formComponent",".","updateModel","(",")",";","\n				","}","\n	\n				onUpdate","(",")",";","\n			","}","\n			else\n			","{","\n				formComponent",".","invalid","(",")",";","\n				\n				onError","(","null",")",";","\n			","}","\n		","}","\n		catch","(","RuntimeException","e",")","\n		","{","\n			onError","(","e",")",";","\n		","}","\n	"],"docstring_tokens":["Process","the","form","component"],"prompt_tokens":[]}
{"code_tokens":["\n	public","int","anchor","(",")","\n	","{","\n		return","anchor",";","\n	"],"docstring_tokens":["Returns","the","anchor","position","of","the","chunk"],"prompt_tokens":[]}
{"code_tokens":["\n	public","int","size","(",")","\n	","{","\n		return","count",";","\n	"],"docstring_tokens":["Returns","the","size","of","the","chunk"],"prompt_tokens":[]}
{"code_tokens":["\n	public","int","first","(",")","\n	","{","\n		return","anchor","(",")",";","\n	"],"docstring_tokens":["Returns","the","index","of","the","first","line","of","the","chunk"],"prompt_tokens":[]}
{"code_tokens":["\n	public","int","last","(",")","\n	","{","\n		return","anchor","(",")","+","size","(",")","-","1",";","\n	"],"docstring_tokens":["Returns","the","index","of","the","last","line","of","the","chunk"],"prompt_tokens":[]}
{"code_tokens":["\n	public","int","rcsfrom","(",")","\n	","{","\n		return","anchor","+","1",";","\n	"],"docstring_tokens":["Returns","the","from","index","of","the","chunk","in","RCS","terms"],"prompt_tokens":[]}
{"code_tokens":["\n	public","int","rcsto","(",")","\n	","{","\n		return","anchor","+","count",";","\n	"],"docstring_tokens":["Returns","the","to","index","of","the","chunk","in","RCS","terms"],"prompt_tokens":[]}
{"code_tokens":["\n	public","void","applyDelete","(","final","List<Object>","target",")","\n	","{","\n		for","(","int","i","=","last","(",")",";","i",">=","first","(",")",";","i--",")","\n		","{","\n			target",".","remove","(","i",")",";","\n		","}","\n	"],"docstring_tokens":["Delete","this","chunk","from","he","given","text"],"prompt_tokens":[]}
{"code_tokens":["\n	public","void","applyAdd","(","int","start,","final","List<Object>","target",")","\n	","{","\n		for","(","Object","aChunk",":","chunk",")","\n		","{","\n			target",".","add","(","start++,","aChunk",")",";","\n		","}","\n	"],"docstring_tokens":["Add","the","text","of","this","chunk","to","the","target","at","the","given","position"],"prompt_tokens":[]}
{"code_tokens":["\n	@Override\n	public","void","toString","(","final","StringBuilder","s",")","\n	","{","\n		toString","(","s,","\"\",","\"\"",")",";","\n	"],"docstring_tokens":["Provide","a","string","image","of","the","chunk","using","the","an","empty","prefix","and","postfix"],"prompt_tokens":[]}
{"code_tokens":["\n	public","StringBuilder","toString","(","final","StringBuilder","s,","final","String","prefix,","final","String","postfix",")","\n	","{","\n		if","(","chunk","!=","null",")","\n		","{","\n			for","(","Object","aChunk",":","chunk",")","\n			","{","\n				s",".","append","(","prefix",")",";","\n				s",".","append","(","aChunk",")",";","\n				s",".","append","(","postfix",")",";","\n			","}","\n		","}","\n		return","s",";","\n	"],"docstring_tokens":["Provide","a","string","image","of","the","chunk","using","the","given","prefix","and","postfix"],"prompt_tokens":[]}
{"code_tokens":["\n	public","String","rangeString","(",")","\n	","{","\n		StringBuilder","result","=","new","StringBuilder","(",")",";","\n		rangeString","(","result",")",";","\n		return","result",".","toString","(",")",";","\n	"],"docstring_tokens":["Provide","a","string","representation","of","the","numeric","range","of","this","chunk"],"prompt_tokens":[]}
{"code_tokens":["\n	public","StoreSettings","setAsynchronousQueueCapacity","(","int","queueCapacity",")","\n	","{","\n		if","(","queueCapacity","<","1",")","\n		","{","\n			throw","new","IllegalArgumentException","(","\n				\"The","capacity","of","the","asynchronous","queue","should","be","at","least","1",".","\"",")",";","\n		","}","\n		asynchronousQueueCapacity","=","queueCapacity",";","\n		return","this",";","\n	"],"docstring_tokens":["Sets","the","capacity","of","the","queue","used","to","store","the","pages","which","will","be","stored","asynchronously"],"prompt_tokens":[]}
{"code_tokens":["\n	protected","void","onConnect","(","ConnectedMessage","message",")","\n	","{","\n	"],"docstring_tokens":["A","callback","method","called","when","a","WebSocket","client","has","connected","to","the","endpoint	","handled","by","this","WebSocketBehavior"],"prompt_tokens":[]}
{"code_tokens":["\n	protected","void","init","(","final","Chunk","orig,","final","Chunk","rev",")","\n	","{","\n		original","=","orig",";","\n		revised","=","rev",";","\n	"],"docstring_tokens":["Initializes","the","delta","with","the","given","chunks","from","the","original","and","revised","texts"],"prompt_tokens":[]}
{"code_tokens":["\n	public","final","void","patch","(","final","List<Object>","target",")","throws","PatchFailedException\n	","{","\n		verify","(","target",")",";","\n		try\n		","{","\n			applyTo","(","target",")",";","\n		","}","\n		catch","(","Exception","e",")","\n		","{","\n			throw","new","PatchFailedException","(","e",".","getMessage","(",")",")",";","\n		","}","\n	"],"docstring_tokens":["Applies","this","delta","as","a","patch","to","the","given","text"],"prompt_tokens":[]}
{"code_tokens":["\n	@Override\n	public","void","toString","(","final","StringBuilder","s",")","\n	","{","\n		original",".","rangeString","(","s",")",";","\n		s",".","append","(","\"x\"",")",";","\n		revised",".","rangeString","(","s",")",";","\n		s",".","append","(","Diff",".","NL",")",";","\n		original",".","toString","(","s,","\">","\",","\"\\n\"",")",";","\n		s",".","append","(","\"---\"",")",";","\n		s",".","append","(","Diff",".","NL",")",";","\n		revised",".","toString","(","s,","\"<","\",","\"\\n\"",")",";","\n	"],"docstring_tokens":["Converts","this","delta","into","its","Unix","diff","style","string","representation"],"prompt_tokens":[]}
{"code_tokens":["\n	public","String","toRCSString","(","final","String","EOL",")","\n	","{","\n		StringBuilder","s","=","new","StringBuilder","(",")",";","\n		toRCSString","(","s,","EOL",")",";","\n		return","s",".","toString","(",")",";","\n	"],"docstring_tokens":["Converts","this","delta","into","its","RCS","style","string","representation"],"prompt_tokens":[]}
{"code_tokens":["\r\n	public","PrependingStringBuffer","prepend","(","final","char","ch",")","\r\n	","{","\r\n		int","len","=","1",";","\r\n		if","(","position","<","len",")","\r\n		","{","\r\n			expandCapacity","(","size","+","len",")",";","\r\n		","}","\r\n		position","-=","len",";","\r\n		buffer[position]","=","ch",";","\r\n		size","+=","len",";","\r\n		return","this",";","\r\n	"],"docstring_tokens":["Prepends","one","char","to","this","PrependingStringBuffer"],"prompt_tokens":[]}
{"code_tokens":["\r\n	public","PrependingStringBuffer","prepend","(","final","String","str",")","\r\n	","{","\r\n		int","len","=","str",".","length","(",")",";","\r\n		if","(","position","<","len",")","\r\n		","{","\r\n			expandCapacity","(","size","+","len",")",";","\r\n		","}","\r\n		str",".","getChars","(","0,","len,","buffer,","position","-","len",")",";","\r\n		position","-=","len",";","\r\n		size","+=","len",";","\r\n		return","this",";","\r\n	"],"docstring_tokens":["Prepends","the","string","to","this","PrependingStringBuffer"],"prompt_tokens":[]}
{"code_tokens":["\r\n	public","int","length","(",")","\r\n	","{","\r\n		return","size",";","\r\n	"],"docstring_tokens":["Returns","the","size","of","this","PrependingStringBuffer"],"prompt_tokens":[]}
{"code_tokens":["\r\n	public","static","Time","now","(",")","\r\n	","{","\r\n		return","millis","(","System",".","currentTimeMillis","(",")",")",";","\r\n	"],"docstring_tokens":["Retrieves","a","Time","instance","based","on","the","current","time"],"prompt_tokens":[]}
{"code_tokens":["\r\n	public","static","Time","millis","(","final","long","time",")","\r\n	","{","\r\n		return","new","Time","(","time",")",";","\r\n	"],"docstring_tokens":["Retrieves","a","Time","instance","based","on","the","given","milliseconds"],"prompt_tokens":[]}
{"code_tokens":["\r\n	public","static","Time","valueOf","(","final","Calendar","calendar,","final","TimeOfDay","timeOfDay",")","\r\n	","{","\r\n		synchronized","(","calendar",")","\r\n		","{","\r\n			//","Set","time","to","midnight","today\r\n			calendar",".","setTimeInMillis","(","System",".","currentTimeMillis","(",")",")",";","\r\n			calendar",".","set","(","Calendar",".","HOUR_OF_DAY,","0",")",";","//","WICKET-2349\r\n			calendar",".","set","(","Calendar",".","MINUTE,","0",")",";","\r\n			calendar",".","set","(","Calendar",".","SECOND,","0",")",";","\r\n			calendar",".","set","(","Calendar",".","MILLISECOND,","0",")",";","//","WICKET-1670\r\n\r\n			//","Add","time","of","day","milliseconds","to","midnight\r\n			return","millis","(","calendar",".","getTimeInMillis","(",")","+","timeOfDay",".","getMilliseconds","(",")",")",";","\r\n		","}","\r\n	"],"docstring_tokens":["Retrieves","a","Time","instance","based","on","the","given","Calendar","and","	","TimeOfDay","objects"],"prompt_tokens":[]}
{"code_tokens":["\r\n	public","static","Time","valueOf","(","final","Date","date",")","\r\n	","{","\r\n		return","new","Time","(","date",".","getTime","(",")",")",";","\r\n	"],"docstring_tokens":["Retrieves","a","Time","instance","based","on","the","given","Date","object"],"prompt_tokens":[]}
{"code_tokens":["\r\n	public","static","Time","valueOf","(","final","TimeOfDay","timeOfDay",")","\r\n	","{","\r\n		return","valueOf","(","localtime,","timeOfDay",")",";","\r\n	"],"docstring_tokens":["Retrieves","a","Time","instance","based","on","the","given","TimeOfDay","object"],"prompt_tokens":[]}
{"code_tokens":["\r\n	public","Time","add","(","final","Duration","duration",")","\r\n	","{","\r\n		return","millis","(","getMilliseconds","(",")","+","duration",".","getMilliseconds","(",")",")",";","\r\n	"],"docstring_tokens":["Adds","the","given","Duration","to","this","Time","object,","moving","the","time","into","	","the","future"],"prompt_tokens":[]}
{"code_tokens":["\r\n	public","Duration","elapsedSince","(",")","\r\n	","{","\r\n		final","Time","now","=","now","(",")",";","\r\n		if","(","this",".","greaterThan","(","now",")",")","\r\n		","{","\r\n			throw","new","IllegalStateException","(","\"This","time","is","in","the","future\"",")",";","\r\n		","}","\r\n		return","now",".","subtract","(","this",")",";","\r\n	"],"docstring_tokens":["Calculates","the","amount","of","time","that","has","elapsed","since","this","Time","value"],"prompt_tokens":[]}
{"code_tokens":["\r\n	public","Time","subtract","(","final","Duration","duration",")","\r\n	","{","\r\n		return","millis","(","getMilliseconds","(",")","-","duration",".","getMilliseconds","(",")",")",";","\r\n	"],"docstring_tokens":["Subtracts","the","given","Duration","from","this","Time","object,","moving","the","time","	","into","the","past"],"prompt_tokens":[]}
{"code_tokens":["\r\n	public","Duration","subtract","(","final","Time","that",")","\r\n	","{","\r\n		return","Duration",".","milliseconds","(","getMilliseconds","(",")","-","that",".","getMilliseconds","(",")",")",";","\r\n	"],"docstring_tokens":["Subtract","time","from","this","and","returns","the","difference","as","a","Duration","object"],"prompt_tokens":[]}
{"code_tokens":["\r\n	@Override\r\n	public","String","toString","(",")","\r\n	","{","\r\n		return","toDateString","(",")","+","\"-\"","+","toTimeString","(",")",";","\r\n	"],"docstring_tokens":["Converts","this","Time","value","to","a","String","suitable","for","use","in","a","file","	","system","name"],"prompt_tokens":[]}
{"code_tokens":["\r\n	public","String","toString","(","final","Calendar","calendar,","final","String","format",")","\r\n	","{","\r\n		final","SimpleDateFormat","dateTimeFormat","=","new","SimpleDateFormat","(","format,","Locale",".","ENGLISH",")",";","\r\n		dateTimeFormat",".","setCalendar","(","calendar","==","null","?","localtime",":","calendar",")",";","\r\n		return","dateTimeFormat",".","format","(","new","Date","(","getMilliseconds","(",")",")",")",";","\r\n	"],"docstring_tokens":["Converts","this","Time","object","to","a","String","using","the","given","	","Calendar","and","format"],"prompt_tokens":[]}
{"code_tokens":["\r\n	public","String","toString","(","final","String","format",")","\r\n	","{","\r\n		return","toString","(","null,","format",")",";","\r\n	"],"docstring_tokens":["Converts","this","Time","value","to","a","String","using","the","given","format"],"prompt_tokens":[]}
{"code_tokens":["\n	@Override\n	public","ComponentTag","mutable","(",")","\n	","{","\n		if","(","xmlTag",".","isMutable","(",")",")","\n		","{","\n			return","this",";","\n		","}","\n		else\n		","{","\n			final","WicketTag","tag","=","new","WicketTag","(","xmlTag",".","mutable","(",")",")",";","\n			copyPropertiesTo","(","tag",")",";","\n\n			return","tag",";","\n		","}","\n	"],"docstring_tokens":["Gets","this","tag","if","it","is","already","mutable,","or","a","mutable","copy","of","this","tag","if","it","is","immutable"],"prompt_tokens":[]}
{"code_tokens":["\n	@Override\n	public","final","void","addListener","(","final","IWizardModelListener","listener",")","\n	","{","\n		wizardModelListeners",".","add","(","listener",")",";","\n	"],"docstring_tokens":["Adds","a","wizard","model","listener"],"prompt_tokens":[]}
{"code_tokens":["\n	@Override\n	public","final","void","removeListener","(","final","IWizardModelListener","listener",")","\n	","{","\n		wizardModelListeners",".","remove","(","listener",")",";","\n	"],"docstring_tokens":["Removes","a","wizard","model","listener"],"prompt_tokens":[]}
{"code_tokens":["\n	public","final","<T","extends","Component>","void","unauthorize","(","final","Class<T>","componentClass,\n		final","Roles","rolesToRemove",")","\n	","{","\n		if","(","componentClass","==","null",")","\n		","{","\n			throw","new","IllegalArgumentException","(","\"Argument","componentClass","cannot","be","null\"",")",";","\n		","}","\n\n		if","(","rolesToRemove","==","null",")","\n		","{","\n			throw","new","IllegalArgumentException","(","\"Argument","rolesToRemove","cannot","be","null\"",")",";","\n		","}","\n\n		Roles","roles","=","rolesForComponentClass",".","get","(","componentClass",")",";","\n		if","(","roles","!=","null",")","\n		","{","\n			roles",".","removeAll","(","rolesToRemove",")",";","\n		","}","\n		else\n		","{","\n			roles","=","new","Roles","(",")",";","\n			rolesForComponentClass",".","put","(","componentClass,","roles",")",";","\n		","}","\n\n		//","If","we","removed","the","last","authorized","role,","we","authorize","the","empty","role\n		//","so","that","removing","authorization","can't","suddenly","open","something","up","to\n		//","everyone",".","\n		if","(","roles",".","size","(",")","==","0",")","\n		","{","\n			roles",".","add","(","MetaDataRoleAuthorizationStrategy",".","NO_ROLE",")",";","\n		","}","\n	"],"docstring_tokens":["Removes","permission","for","the","given","role","to","instantiate","the","given","class"],"prompt_tokens":[]}
{"code_tokens":["\n	public","static","void","main","(","String[]","args",")","throws","Exception\n	","{","\n		System",".","setProperty","(","\"wicket",".","configuration\",","\"development\"",")",";","\n\n		Server","server","=","new","Server","(",")",";","\n\n		HttpConfiguration","http_config","=","new","HttpConfiguration","(",")",";","\n		http_config",".","setSecureScheme","(","\"https\"",")",";","\n		http_config",".","setSecurePort","(","8443",")",";","\n		http_config",".","setOutputBufferSize","(","32768",")",";","\n\n		ServerConnector","http","=","new","ServerConnector","(","server,","new","HttpConnectionFactory","(","http_config",")",")",";","\n		http",".","setPort","(","8080",")",";","\n		http",".","setIdleTimeout","(","1000","*","60","*","60",")",";","\n\n		server",".","addConnector","(","http",")",";","\n\n		Resource","keystore","=","Resource",".","newClassPathResource","(","\"/keystore\"",")",";","\n		if","(","keystore","!=","null","&&","keystore",".","exists","(",")",")","\n		","{","\n			//","if","a","keystore","for","a","SSL","certificate","is","available,","start","a","SSL\n			//","connector","on","port","8443",".","\n			//","By","default,","the","quickstart","comes","with","a","Apache","Wicket","Quickstart\n			//","Certificate","that","expires","about","half","way","september","2021",".","Do","not\n			//","use","this","certificate","anywhere","important","as","the","passwords","are\n			//","available","in","the","source",".","\n\n			SslContextFactory","sslContextFactory","=","new","SslContextFactory",".","Server","(",")",";","\n			sslContextFactory",".","setKeyStoreResource","(","keystore",")",";","\n			sslContextFactory",".","setKeyStorePassword","(","\"wicket\"",")",";","\n			sslContextFactory",".","setKeyManagerPassword","(","\"wicket\"",")",";","\n\n			HttpConfiguration","https_config","=","new","HttpConfiguration","(","http_config",")",";","\n			https_config",".","addCustomizer","(","new","SecureRequestCustomizer","(",")",")",";","\n\n			ServerConnector","https","=","new","ServerConnector","(","server,","new","SslConnectionFactory","(","\n					sslContextFactory,","\"http/1",".","1\"",")",",","new","HttpConnectionFactory","(","https_config",")",")",";","\n			https",".","setPort","(","8443",")",";","\n			https",".","setIdleTimeout","(","500000",")",";","\n\n			server",".","addConnector","(","https",")",";","\n			System",".","out",".","println","(","\"SSL","access","to","the","examples","has","been","enabled","on","port","8443\"",")",";","\n			System",".","out\n					",".","println","(","\"You","can","access","the","application","using","SSL","on","https://localhost:8443\"",")",";","\n			System",".","out",".","println","(",")",";","\n		","}","\n\n		WebAppContext","bb","=","new","WebAppContext","(",")",";","\n		bb",".","setServer","(","server",")",";","\n		bb",".","setContextPath","(","\"/\"",")",";","\n		bb",".","setWar","(","\"src/main/webapp\"",")",";","\n\n		//","uncomment","next","lines","if","you","want","to","test","with","session","persistence\n//		DefaultSessionCache","sessionCache","=","new","DefaultSessionCache","(","bb",".","getSessionHandler","(",")",")",";","\n//		FileSessionDataStore","sessionStore","=","new","FileSessionDataStore","(",")",";","\n//		sessionStore",".","setStoreDir","(","new","File","(","\"",".","/jetty-session-data\"",")",")",";","\n//		sessionCache",".","setSessionDataStore","(","sessionStore",")",";","\n//		bb",".","getSessionHandler","(",")",".","setSessionCache","(","sessionCache",")",";","\n		\n		ServerContainer","serverContainer","=","WebSocketServerContainerInitializer",".","initialize","(","bb",")",";","\n		serverContainer",".","addEndpoint","(","new","WicketServerEndpointConfig","(",")",")",";","\n\n		//","uncomment","next","line","if","you","want","to","test","with","JSESSIONID","encoded","in","the","urls\n//		","(","(","AbstractSessionManager",")","bb",".","getSessionHandler","(",")",".","getSessionManager","(",")",")",".","setUsingCookies","(","false",")",";","\n\n		server",".","setHandler","(","bb",")",";","\n\n		MBeanServer","mBeanServer","=","ManagementFactory",".","getPlatformMBeanServer","(",")",";","\n		MBeanContainer","mBeanContainer","=","new","MBeanContainer","(","mBeanServer",")",";","\n		server",".","addEventListener","(","mBeanContainer",")",";","\n		server",".","addBean","(","mBeanContainer",")",";","\n\n		try\n		","{","\n			server",".","start","(",")",";","\n			server",".","join","(",")",";","\n		","}","\n		catch","(","Exception","e",")","\n		","{","\n			e",".","printStackTrace","(",")",";","\n			System",".","exit","(","100",")",";","\n		","}","\n	"],"docstring_tokens":["Main","function,","starts","the","jetty","server"],"prompt_tokens":[]}
{"code_tokens":["\n	public","void","init","(","final","boolean","isServlet,","final","FilterConfig","filterConfig",")","\n		throws","ServletException\n	","{","\n		this",".","filterConfig","=","filterConfig",";","\n		this",".","isServlet","=","isServlet",";","\n		initIgnorePaths","(","filterConfig",")",";","\n\n		final","ClassLoader","previousClassLoader","=","Thread",".","currentThread","(",")",".","getContextClassLoader","(",")",";","\n		final","ClassLoader","newClassLoader","=","getClassLoader","(",")",";","\n		try\n		","{","\n			if","(","previousClassLoader","!=","newClassLoader",")","\n			","{","\n				Thread",".","currentThread","(",")",".","setContextClassLoader","(","newClassLoader",")",";","\n			","}","\n\n			//","locate","application","instance","unless","it","was","already","specified","during","construction\n			if","(","application","==","null",")","\n			","{","\n				applicationFactory","=","getApplicationFactory","(",")",";","\n				application","=","applicationFactory",".","createApplication","(","this",")",";","\n			","}","\n\n			if","(","application",".","getName","(",")","==","null",")","\n			","{","\n				application",".","setName","(","filterConfig",".","getFilterName","(",")",")",";","\n			","}","\n			application",".","setWicketFilter","(","this",")",";","\n\n			//","Allow","the","filterPath","to","be","preset","via","setFilterPath","(",")","\n			String","configureFilterPath","=","getFilterPath","(",")",";","\n\n			if","(","configureFilterPath","==","null",")","\n			","{","\n				configureFilterPath","=","getFilterPathFromConfig","(","filterConfig",")",";","\n\n				if","(","configureFilterPath","==","null",")","\n				","{","\n					configureFilterPath","=","getFilterPathFromWebXml","(","isServlet,","filterConfig",")",";","\n\n					if","(","configureFilterPath","==","null",")","\n					","{","\n						configureFilterPath","=","getFilterPathFromAnnotation","(","isServlet",")",";","\n					","}","\n				","}","\n\n				if","(","configureFilterPath","!=","null",")","\n				","{","\n					setFilterPath","(","configureFilterPath",")",";","\n				","}","\n			","}","\n\n			if","(","getFilterPath","(",")","==","null",")","\n			","{","\n				log",".","warn","(","\"Unable","to","determine","filter","path","from","filter","init-param,","web",".","xml,","\"\n					+","\"or","servlet","3",".","0","annotations",".","Assuming","user","will","set","filter","path","\"\n					+","\"manually","by","calling","setFilterPath","(","String",")","\"",")",";","\n			","}","\n\n			ThreadContext",".","setApplication","(","application",")",";","\n			try\n			","{","\n				application",".","initApplication","(",")",";","\n\n				//","Give","the","application","the","option","to","log","that","it","is","started\n				application",".","logStarted","(",")",";","\n			","}","\n			finally\n			","{","\n				ThreadContext",".","detach","(",")",";","\n			","}","\n		","}","\n		catch","(","Exception","e",")","\n		","{","\n			//","#destroy","(",")","might","not","be","called","by","the","web","container","when","#init","(",")","fails,\n			//","so","destroy","now\n			log",".","error","(","String",".","format","(","\"The","initialization","of","an","application","with","name","'%s'","has","failed",".","\",\n					filterConfig",".","getFilterName","(",")",")",",","e",")",";","\n\n			try\n			","{","\n				destroy","(",")",";","\n			","}","\n			catch","(","Exception","destroyException",")","\n			","{","\n				log",".","error","(","\"Unable","to","destroy","after","initialization","failure\",","destroyException",")",";","\n			","}","\n\n			throw","new","ServletException","(","e",")",";","\n		","}","\n		finally\n		","{","\n			if","(","newClassLoader","!=","previousClassLoader",")","\n			","{","\n				Thread",".","currentThread","(",")",".","setContextClassLoader","(","previousClassLoader",")",";","\n			","}","\n		","}","\n	"],"docstring_tokens":["Servlets","and","Filters","are","treated","essentially","the","same","with","Wicket"],"prompt_tokens":[]}
{"code_tokens":["\n	public","String","getRelativePath","(","HttpServletRequest","request",")","\n	","{","\n		String","path","=","Strings",".","stripJSessionId","(","request",".","getRequestURI","(",")",")",";","\n		String","contextPath","=","request",".","getContextPath","(",")",";","\n		path","=","path",".","substring","(","contextPath",".","length","(",")",")",";","\n		if","(","isServlet",")","\n		","{","\n			String","servletPath","=","request",".","getServletPath","(",")",";","\n			path","=","path",".","substring","(","servletPath",".","length","(",")",")",";","\n		","}","\n\n		if","(","path",".","length","(",")",">","0",")","\n		","{","\n			path","=","path",".","substring","(","1",")",";","\n		","}","\n\n		//","We","should","always","be","under","the","rootPath,","except\n		//","for","the","special","case","of","someone","landing","on","the\n		//","home","page","without","a","trailing","slash",".","\n		String","filterPath","=","getFilterPath","(",")",";","\n		if","(","!path",".","startsWith","(","filterPath",")",")","\n		","{","\n			if","(","filterPath",".","equals","(","path","+","\"/\"",")",")","\n			","{","\n				path","+=","\"/\"",";","\n			","}","\n		","}","\n		if","(","path",".","startsWith","(","filterPath",")",")","\n		","{","\n			path","=","path",".","substring","(","filterPath",".","length","(",")",")",";","\n		","}","\n\n		return","path",";","\n\n	"],"docstring_tokens":["Returns","a","relative","path","to","the","filter","path","and","context","root","from","an","HttpServletRequest","-","use	","this","to","resolve","a","Wicket","request"],"prompt_tokens":[]}
{"code_tokens":["\n	private","boolean","shouldIgnorePath","(","final","HttpServletRequest","request",")","\n	","{","\n		boolean","ignore","=","false",";","\n		if","(","ignorePaths",".","size","(",")",">","0",")","\n		","{","\n			String","relativePath","=","getRelativePath","(","request",")",";","\n			if","(","Strings",".","isEmpty","(","relativePath",")","==","false",")","\n			","{","\n				for","(","String","path",":","ignorePaths",")","\n				","{","\n					if","(","relativePath",".","startsWith","(","path",")",")","\n					","{","\n						ignore","=","true",";","\n						break",";","\n					","}","\n				","}","\n			","}","\n		","}","\n\n		return","ignore",";","\n	"],"docstring_tokens":["Checks","whether","this","is","a","request","to","an","ignored","path"],"prompt_tokens":[]}
{"code_tokens":["\n	public","Contact","generate","(",")","\n	","{","\n		Contact","contact","=","new","Contact","(","randomString","(","firstNames",")",",","randomString","(","lastNames",")",")",";","\n		contact",".","setId","(","generateId","(",")",")",";","\n		contact",".","setHomePhone","(","generatePhoneNumber","(",")",")",";","\n		contact",".","setCellPhone","(","generatePhoneNumber","(",")",")",";","\n		contact",".","setBornDate","(","generateDate","(",")",")",";","\n		\n		return","contact",";","\n	"],"docstring_tokens":["generates","a","new","contact"],"prompt_tokens":[]}
{"code_tokens":["\n	public","void","generate","(","Collection<Contact>","collection,","int","count",")","\n	","{","\n		for","(","int","i","=","0",";","i","<","count",";","i++",")","\n		","{","\n			collection",".","add","(","generate","(",")",")",";","\n		","}","\n	"],"docstring_tokens":["Generates","count","number","contacts","and","puts","them","into","collection	","collection"],"prompt_tokens":[]}
{"code_tokens":["\n	public","static","OnChangeAjaxBehavior","onChange","(","SerializableConsumer<AjaxRequestTarget>","onChange",")","\n	","{","\n		Args",".","notNull","(","onChange,","\"onChange\"",")",";","\n\n		return","new","OnChangeAjaxBehavior","(",")","\n		","{","\n			private","static","final","long","serialVersionUID","=","1L",";","\n\n			@Override\n			protected","void","onUpdate","(","AjaxRequestTarget","target",")","\n			","{","\n				onChange",".","accept","(","target",")",";","\n			","}","\n		","}",";","\n	"],"docstring_tokens":["Creates","an","OnChangeAjaxBehavior","based","on","lambda","expressions"],"prompt_tokens":[]}
{"code_tokens":["\r\n	@Override\r\n	public","boolean","accept","(","String","path",")","\r\n	","{","\r\n		//","First","check","the","cache\r\n		if","(","cache","!=","null",")","\r\n		","{","\r\n			Boolean","rtn","=","cache",".","get","(","path",")",";","\r\n			if","(","rtn","!=","null",")","\r\n			","{","\r\n				return","rtn",";","\r\n			","}","\r\n		","}","\r\n\r\n		//","Check","typical","files","such","as","log4j",".","xml","etc",".","\r\n		if","(","super",".","accept","(","path",")","==","false",")","\r\n		","{","\r\n			return","false",";","\r\n		","}","\r\n\r\n		//","Check","against","the","pattern\r\n		boolean","hit","=","false",";","\r\n		for","(","SearchPattern","pattern",":","new","ReverseListIterator<>","(","this",".","pattern",")",")","\r\n		","{","\r\n			if","(","(","pattern","!=","null",")","&&","pattern",".","isActive","(",")",")","\r\n			","{","\r\n				if","(","pattern",".","matches","(","path",")",")","\r\n				","{","\r\n					hit","=","pattern",".","isInclude","(",")",";","\r\n					break",";","\r\n				","}","\r\n			","}","\r\n		","}","\r\n\r\n		if","(","cache","!=","null",")","\r\n		","{","\r\n			//","Do","not","use","putIfAbsent","(",")",".","See","newCache","(",")","\r\n			cache",".","put","(","path,","(","hit","?","Boolean",".","TRUE",":","Boolean",".","FALSE",")",")",";","\r\n		","}","\r\n\r\n		if","(","hit","==","false",")","\r\n		","{","\r\n			log",".","warn","(","\"Access","denied","to","shared","(","static",")","resource:","\"","+","path",")",";","\r\n		","}","\r\n\r\n		return","hit",";","\r\n	"],"docstring_tokens":["Whether","the","provided","absolute","path","is","accepted"],"prompt_tokens":[]}
{"code_tokens":["\n	protected","Result","doCheck","(","Object","object",")","\n	","{","\n		return","Result",".","SUCCESS",";","\n	"],"docstring_tokens":["The","implementations","should","make","the","specific","check","on","the","object"],"prompt_tokens":[]}
{"code_tokens":["\n	public","Word","next","(",")","\n	","{","\n		if","(","index","==","words",".","size","(",")",")","\n		","{","\n			shuffle","(",")",";","\n		","}","\n		return","new","Word","(","words",".","get","(","index++",")",")",";","\n	"],"docstring_tokens":["Returns","the","next","word","from","the","word","generator"],"prompt_tokens":[]}
{"code_tokens":["\n	public","int","size","(",")","\n	","{","\n		return","words",".","size","(",")",";","\n	"],"docstring_tokens":["Get","the","number","of","words","that","were","discovered"],"prompt_tokens":[]}
{"code_tokens":["\n	public","CsrfPreventionRequestCycleListener","setNoOriginAction","(","CsrfAction","action",")","\n	","{","\n		this",".","noOriginAction","=","action",";","\n		return","this",";","\n	"],"docstring_tokens":["Sets","the","action","when","no","Origin","header","is","present","in","the","request"],"prompt_tokens":[]}
{"code_tokens":["\n	protected","IRequestHandler","unwrap","(","IRequestHandler","handler",")","\n	","{","\n		while","(","handler","instanceof","IRequestHandlerDelegate",")","\n			handler","=","(","(","IRequestHandlerDelegate",")","handler",")",".","getDelegateHandler","(",")",";","\n		return","handler",";","\n	"],"docstring_tokens":["Unwraps","the","handler","if","it","is","a","IRequestHandlerDelegate","down","to","the","deepest","nested	","handler"],"prompt_tokens":[]}
{"code_tokens":["\n	protected","void","checkRequest","(","HttpServletRequest","request,","String","sourceUri,","IRequestablePage","page",")","\n	","{","\n		if","(","sourceUri","==","null","||","sourceUri",".","isEmpty","(",")",")","\n		","{","\n			log",".","debug","(","\"Source","URI","not","present","in","request,","{","}","\",","noOriginAction",")",";","\n			switch","(","noOriginAction",")","\n			","{","\n				case","ALLOW",":\n					allowHandler","(","request,","sourceUri,","page",")",";","\n					break",";","\n				case","SUPPRESS",":\n					suppressHandler","(","request,","sourceUri,","page",")",";","\n					break",";","\n				case","ABORT",":\n					abortHandler","(","request,","sourceUri,","page",")",";","\n					break",";","\n			","}","\n			return",";","\n		","}","\n		sourceUri","=","sourceUri",".","toLowerCase","(","Locale",".","ROOT",")",";","\n\n		//","if","the","origin","is","a","know","and","trusted","origin,","don't","check","any","further","but","allow","the","request\n		if","(","isWhitelistedHost","(","sourceUri",")",")","\n		","{","\n			whitelistedHandler","(","request,","sourceUri,","page",")",";","\n			return",";","\n		","}","\n\n		//","check","if","the","origin","HTTP","header","matches","the","request","URI\n		if","(","!isLocalOrigin","(","request,","sourceUri",")",")","\n		","{","\n			log",".","debug","(","\"Source","URI","conflicts","with","request","origin,","{","}","\",","conflictingOriginAction",")",";","\n			switch","(","conflictingOriginAction",")","\n			","{","\n				case","ALLOW",":\n					allowHandler","(","request,","sourceUri,","page",")",";","\n					break",";","\n				case","SUPPRESS",":\n					suppressHandler","(","request,","sourceUri,","page",")",";","\n					break",";","\n				case","ABORT",":\n					abortHandler","(","request,","sourceUri,","page",")",";","\n					break",";","\n			","}","\n		","}","\n		else\n		","{","\n			matchingOrigin","(","request,","sourceUri,","page",")",";","\n		","}","\n	"],"docstring_tokens":["Performs","the","check","of","the","Origin","or","Referer","header","that","is","targeted","at","the	","page"],"prompt_tokens":[]}
{"code_tokens":["\n	protected","void","matchingOrigin","(","HttpServletRequest","request,","String","origin,\n			IRequestablePage","page",")","\n	","{","\n		onMatchingOrigin","(","request,","origin,","page",")",";","\n		if","(","log",".","isDebugEnabled","(",")",")","\n		","{","\n			log",".","debug","(","\"CSRF","Origin","{","}","matched","requested","resource,","allowed","for","page","{","}","\",","origin,\n					page",".","getClass","(",")",".","getName","(",")",")",";","\n		","}","\n	"],"docstring_tokens":["Handles","the","case","where","an","origin","was","checked","and","matched","the","request","origin"],"prompt_tokens":[]}
{"code_tokens":["\n	@Override\n	public","IRequestHandler","onException","(","final","RequestCycle","cycle,","final","Exception","ex",")","\n	","{","\n		final","List<IRequestHandler>","handlers","=","new","ArrayList<IRequestHandler>","(",")",";","\n\n		notify","(","new","INotifier<IRequestCycleListener>","(",")","\n		","{","\n			@Override\n			public","void","notify","(","IRequestCycleListener","listener",")","\n			","{","\n				IRequestHandler","handler","=","listener",".","onException","(","cycle,","ex",")",";","\n				if","(","handler","!=","null",")","\n				","{","\n					handlers",".","add","(","handler",")",";","\n				","}","\n			","}","\n		","}",")",";","\n\n		if","(","handlers",".","isEmpty","(",")",")","\n		","{","\n			return","null",";","\n		","}","\n		if","(","handlers",".","size","(",")",">","1",")","\n		","{","\n			logger",".","debug","(","\n				\"","{","}","exception","handlers","available","for","exception","{","}",",","using","the","first","handler\",\n				handlers",".","size","(",")",",","ex",")",";","\n		","}","\n		return","handlers",".","get","(","0",")",";","\n	"],"docstring_tokens":["Notifies","all","registered","listeners","of","the","exception","and","calls","the","first","handler","that","was	","returned","by","the","listeners"],"prompt_tokens":[]}
{"code_tokens":["\n	@Override\n	protected","void","appendOptionHtml","(","final","AppendingStringBuffer","buffer,","final","T","choice,","int","index,\n		final","String","selected",")","\n	","{","\n		//","Append","option","suffix\n		buffer",".","append","(","getPrefix","(","index,","choice",")",")",";","\n\n		String","id","=","getChoiceRenderer","(",")",".","getIdValue","(","choice,","index",")",";","\n		final","String","idAttr","=","getMarkupId","(",")","+","\"-\"","+","id",";","\n\n		boolean","enabled","=","isEnabledInHierarchy","(",")","&&","!isDisabled","(","choice,","index,","selected",")",";","\n\n		CharSequence","renderValue","=","renderValue","(","choice",")",";","\n\n		//","Allows","user","to","add","attributes","to","the","<label",".",".",">","tag\n		IValueMap","labelAttrs","=","getAdditionalAttributesForLabel","(","index,","choice",")",";","\n		StringBuilder","extraLabelAttributes","=","new","StringBuilder","(",")",";","\n		if","(","labelAttrs","!=","null",")","\n		","{","\n			for","(","Map",".","Entry<String,","Object>","attr",":","labelAttrs",".","entrySet","(",")",")","\n			","{","\n				extraLabelAttributes",".","append","(","'","'",")","\n						",".","append","(","Strings",".","escapeMarkup","(","attr",".","getKey","(",")",")",")","\n						",".","append","(","\"=\\\"\"",")","\n						",".","append","(","Strings",".","escapeMarkup","(","attr",".","getValue","(",")",".","toString","(",")",")",")","\n						",".","append","(","'\"'",")",";","\n			","}","\n		","}","\n\n		labelPosition",".","before","(","buffer,","idAttr,","extraLabelAttributes,","renderValue",")",";","\n\n		//","Add","radio","tag\n		buffer",".","append","(","\"<input","name=\\\"\"",")","\n			",".","append","(","getInputName","(",")",")","\n			",".","append","(","'\"'",")","\n			",".","append","(","\"","type=\\\"radio\\\"\"",")","\n			",".","append","(","(","isSelected","(","choice,","index,","selected",")","?","\"","checked=\\\"checked\\\"\"",":","\"\"",")",")","\n			",".","append","(","(","enabled","?","\"\"",":","\"","disabled=\\\"disabled\\\"\"",")",")","\n			",".","append","(","\"","value=\\\"\"",")","\n			",".","append","(","Strings",".","escapeMarkup","(","id",")",")","\n			",".","append","(","\"\\\"","id=\\\"\"",")","\n			",".","append","(","Strings",".","escapeMarkup","(","idAttr",")",")","\n			",".","append","(","'\"'",")",";","\n\n		//","Allows","user","to","add","attributes","to","the","<input",".",".",">","tag\n		","{","\n			IValueMap","attrs","=","getAdditionalAttributes","(","index,","choice",")",";","\n			if","(","attrs","!=","null",")","\n			","{","\n				for","(","Map",".","Entry<String,","Object>","attr",":","attrs",".","entrySet","(",")",")","\n				","{","\n					buffer",".","append","(","'","'",")","\n						",".","append","(","Strings",".","escapeMarkup","(","attr",".","getKey","(",")",")",")","\n						",".","append","(","\"=\\\"\"",")","\n						",".","append","(","Strings",".","escapeMarkup","(","attr",".","getValue","(",")",".","toString","(",")",")",")","\n						",".","append","(","'\"'",")",";","\n				","}","\n			","}","\n		","}","\n\n		DebugSettings","debugSettings","=","getApplication","(",")",".","getDebugSettings","(",")",";","\n		String","componentPathAttributeName","=","debugSettings",".","getComponentPathAttributeName","(",")",";","\n		if","(","Strings",".","isEmpty","(","componentPathAttributeName",")","==","false",")","\n		","{","\n			CharSequence","path","=","getPageRelativePath","(",")",";","\n			path","=","Strings",".","replaceAll","(","path,","\"_\",","\"__\"",")",";","\n			path","=","Strings",".","replaceAll","(","path,","\":\",","\"_\"",")",";","\n			buffer",".","append","(","'","'",")",".","append","(","componentPathAttributeName",")",".","append","(","\"=\\\"\"",")","\n				",".","append","(","path",")","\n				",".","append","(","\"_input_\"",")","\n				",".","append","(","index",")","\n				",".","append","(","'\"'",")",";","\n		","}","\n\n		buffer",".","append","(","\"/>\"",")",";","\n\n		labelPosition",".","after","(","buffer,","idAttr,","extraLabelAttributes,","renderValue",")",";","\n\n		//","Append","option","suffix\n		buffer",".","append","(","getSuffix","(","index,","choice",")",")",";","\n	"],"docstring_tokens":["Generates","and","appends","html","for","a","single","choice","into","the","provided","buffer"],"prompt_tokens":[]}
{"code_tokens":["\n	public","final","boolean","add","(","final","IMarkupFilter","filter",")","\n	","{","\n		return","getMarkupFilters","(",")",".","add","(","filter",")",";","\n	"],"docstring_tokens":["Add","a","markup","filter"],"prompt_tokens":[]}
{"code_tokens":["\n	protected","void","onContentLoaded","(","T","content,","Optional<AjaxRequestTarget>","target",")","\n	","{","\n	"],"docstring_tokens":["Called","after","the","loading","component","was","replaced","with","the","lazy","loaded","content.	","	","This","default","implementation","does","nothing"],"prompt_tokens":[]}
{"code_tokens":["\n	protected","void","initTimer","(",")","\n	","{","\n		//","when","the","timer","is","not","yet","installed","add","it\n		List<AjaxLazyLoadTimer>","behaviors","=","getPage","(",")",".","getBehaviors","(","AjaxLazyLoadTimer",".","class",")",";","\n		if","(","behaviors",".","isEmpty","(",")",")","{","\n			AbstractAjaxTimerBehavior","timer","=","new","AjaxLazyLoadTimer","(",")",";","\n			getPage","(",")",".","add","(","timer",")",";","\n			\n			getRequestCycle","(",")",".","find","(","AjaxRequestTarget",".","class",")",".","ifPresent","(","target","->","{","\n				//","the","timer","will","not","be","rendered,","so","restart","it","immediately","on","the","Ajax","target\n				timer",".","restart","(","target",")",";","\n			","}",")",";","\n		","}","\n	"],"docstring_tokens":["Initialize","a","timer","-","default","implementation","installs","an","AbstractAjaxTimerBehavior","on","the","page,	","if","it","is","not","already","present"],"prompt_tokens":[]}
{"code_tokens":["\n	private","void","updateResult","(","final","Component","result,","final","CharSequence","mailBody,\n		final","AjaxRequestTarget","target",")","\n	","{","\n		result",".","setDefaultModelObject","(","mailBody",")",";","\n		target",".","add","(","result",")",";","\n	"],"docstring_tokens":["Updates","the","component","that","is","used","to","show","the","generated","mail","body","for","this","example"],"prompt_tokens":[]}
{"code_tokens":["\n	protected","boolean","mustCheck","(","final","Component","component",")","\n	","{","\n		final","StatelessComponent","ann","=","component",".","getClass","(",")",".","getAnnotation","(","StatelessComponent",".","class",")",";","\n		return","(","ann","!=","null",")","&&","ann",".","enabled","(",")",";","\n	"],"docstring_tokens":["Returns","true","if","checker","must","check","given","component,","false	","otherwise"],"prompt_tokens":[]}
{"code_tokens":["\n	public","final","String","getScope","(",")","\n	","{","\n		return","scope",";","\n	"],"docstring_tokens":["Get","the","scope","of","the","header","part"],"prompt_tokens":[]}
{"code_tokens":["\r\n	@Override\r\n	public","final","void","setNextFilter","(","final","IMarkupFilter","parent",")","\r\n	","{","\r\n		throw","new","IllegalArgumentException","(","\"You","can","not","set","the","parent","with","RootMarkupFilter",".","\"",")",";","\r\n	"],"docstring_tokens":["This","is","the","root","filter"],"prompt_tokens":[]}
{"code_tokens":["\n	public","void","add","(","final","IWizardStep","step,","final","ICondition","condition",")","\n	","{","\n		steps",".","add","(","step",")",";","\n		conditions",".","add","(","condition",")",";","\n	"],"docstring_tokens":["Adds","an","optional","step","to","the","model"],"prompt_tokens":[]}
{"code_tokens":["\n	@Override\n	public","final","IWizardStep","getActiveStep","(",")","\n	","{","\n		return","activeStep",";","\n	"],"docstring_tokens":["Gets","the","current","active","step","the","wizard","should","display"],"prompt_tokens":[]}
{"code_tokens":["\n	protected","final","IWizardStep","findLastStep","(",")","\n	","{","\n		for","(","int","i","=","conditions",".","size","(",")","-","1",";","i",">=","0",";","i--",")","\n		","{","\n			ICondition","condition","=","conditions",".","get","(","i",")",";","\n			if","(","condition",".","evaluate","(",")",")","\n			","{","\n				return","steps",".","get","(","i",")",";","\n			","}","\n		","}","\n\n		throw","new","IllegalStateException","(","\"Wizard","contains","no","visible","steps\"",")",";","\n	"],"docstring_tokens":["Finds","the","last","step","in","this","model"],"prompt_tokens":[]}
{"code_tokens":["\n	public","final","boolean","isAttached","(",")","\n	","{","\n		return","state","==","InternalState",".","ATTACHED",";","\n	"],"docstring_tokens":["Gets","the","attached","status","of","this","model","instance"],"prompt_tokens":[]}
{"code_tokens":["\n	public","static","<T>","LoadableDetachableModel<T>","of","(","SerializableSupplier<T>","getter",")","\n	","{","\n		return","new","LoadableDetachableModel<T>","(",")","\n		","{","\n			private","static","final","long","serialVersionUID","=","1L",";","\n\n			@Override\n			protected","T","load","(",")","\n			","{","\n				return","getter",".","get","(",")",";","\n			","}","\n		","}",";","\n	"],"docstring_tokens":["Create","a","LoadableDetachableModel","for","the","given","supplier"],"prompt_tokens":[]}
{"code_tokens":["\n	@SuppressWarnings","(","\"resource\"",")","\n	public","final","CharSequence","getContent","(","String","filterName",")","\n	","{","\n		if","(","filterName","==","null","||","!responseFilterMap",".","containsKey","(","filterName",")",")","\n		","{","\n			return","\"\"",";","\n		","}","\n		List<HeaderItem>","resp","=","responseFilterMap",".","get","(","filterName",")",";","\n		final","StringResponse","strResponse","=","new","StringResponse","(",")",";","\n		IHeaderResponse","headerRenderer","=","new","HeaderResponse","(",")","\n		","{","\n			@Override\n			protected","Response","getRealResponse","(",")","\n			","{","\n				return","strResponse",";","\n			","}","\n\n			@Override\n			public","boolean","wasRendered","(","Object","object",")","\n			","{","\n				return","FilteringHeaderResponse",".","this",".","getRealResponse","(",")",".","wasRendered","(","object",")",";","\n			","}","\n\n			@Override\n			public","void","markRendered","(","Object","object",")","\n			","{","\n				FilteringHeaderResponse",".","this",".","getRealResponse","(",")",".","markRendered","(","object",")",";","\n			","}","\n		","}",";","\n\n		headerRenderer","=","decorate","(","headerRenderer",")",";","\n\n		for","(","HeaderItem","curItem",":","resp",")","\n		","{","\n			headerRenderer",".","render","(","curItem",")",";","\n		","}","\n\n		headerRenderer",".","close","(",")",";","\n\n		return","strResponse",".","getBuffer","(",")",";","\n	"],"docstring_tokens":["Gets","the","content","that","was","rendered","to","this","header","response","and","matched","the","filter","with","the	","given","name"],"prompt_tokens":[]}
{"code_tokens":["\n	protected","IHeaderResponse","decorate","(","IHeaderResponse","response",")","\n	","{","\n		return","response",";","\n	"],"docstring_tokens":["Decorate","the","given","response","used","to","get","contents"],"prompt_tokens":[]}
{"code_tokens":["\n	@SuppressWarnings","(","\"unchecked\"",")","\n	protected","C","parse","(","final","Format","format,","final","Object","value,","final","Locale","locale",")","\n	","{","\n		final","ParsePosition","position","=","new","ParsePosition","(","0",")",";","\n		final","String","stringValue","=","value",".","toString","(",")",";","\n		final","C","result","=","(","C",")","format",".","parseObject","(","stringValue,","position",")",";","\n\n		if","(","position",".","getIndex","(",")","!=","stringValue",".","length","(",")",")","\n		","{","\n			throw","newConversionException","(","\"Cannot","parse","'\"","+","value","+","\"'","using","format","\"","+","format,\n				value,","locale",")",".","setFormat","(","format",")",";","\n		","}","\n		return","result",";","\n	"],"docstring_tokens":["Parses","a","value","using","one","of","the","java.util.text","format","classes"],"prompt_tokens":[]}
{"code_tokens":["\n	public","void","setSort","(","final","SortParam<T>","param",")","\n	","{","\n		this",".","param","=","param",";","\n	"],"docstring_tokens":["Sets","the","current","sort","state"],"prompt_tokens":[]}
{"code_tokens":["\n	@Override\n	public","final","Locale","getLocale","(",")","\n	","{","\n		return","localeIterator",".","getLocale","(",")",";","\n	"],"docstring_tokens":["Get","the","exact","Locale","which","has","been","used","for","the","latest","resource","path"],"prompt_tokens":[]}
{"code_tokens":["\n	@Override\n	public","final","String","getStyle","(",")","\n	","{","\n		return","styleIterator",".","getStyle","(",")",";","\n	"],"docstring_tokens":["Get","the","exact","Style","which","has","been","used","for","the","latest","resource","path"],"prompt_tokens":[]}
{"code_tokens":["\n	@Override\n	public","final","String","getVariation","(",")","\n	","{","\n		return","styleIterator",".","getVariation","(",")",";","\n	"],"docstring_tokens":["Get","the","exact","Variation","which","has","been","used","for","the","latest","resource","path"],"prompt_tokens":[]}
{"code_tokens":["\n	@Override\n	public","final","String","getExtension","(",")","\n	","{","\n		return","extensionsIterator",".","getExtension","(",")",";","\n	"],"docstring_tokens":["Get","the","exact","filename","extension","used","for","the","latest","resource","path"],"prompt_tokens":[]}
{"code_tokens":["\n	protected","String","getClosedStyleClass","(",")","\n	","{","\n		return","getString","(","CLOSED_CSS_CLASS_KEY",")",";","\n	"],"docstring_tokens":["Get","a","style","class","for","anything","other","than","closed","or","open","folders"],"prompt_tokens":[]}
{"code_tokens":["\n	protected","String","getSelectedStyleClass","(",")","\n	","{","\n		return","getString","(","SELECTED_CSS_CLASS_KEY",")",";","\n	"],"docstring_tokens":["Get","a","style","class","to","render","for","a","selected","folder"],"prompt_tokens":[]}
{"code_tokens":["\n	public","void","removeXValues","(",")","\n	","{","\n		if","(","xValues","!=","null",")","\n		","{","\n			xValues",".","clear","(",")",";","\n		","}","\n	"],"docstring_tokens":["Removes","all","x","values","from","the","image","src","set"],"prompt_tokens":[]}
{"code_tokens":["\n	protected","void","buildSizesAttribute","(","final","ComponentTag","tag",")","\n	","{","\n		//","if","no","sizes","have","been","set","then","don't","build","the","attribute\n		if","(","sizes","==","null",")","\n		","{","\n			return",";","\n		","}","\n		String","sizes","=","\"\"",";","\n		for","(","String","size",":","this",".","sizes",")","\n		","{","\n			sizes","+=","size","+","\",\"",";","\n		","}","\n		int","lastIndexOf","=","sizes",".","lastIndexOf","(","\",\"",")",";","\n		if","(","lastIndexOf","!=","-1",")","\n		","{","\n			sizes","=","sizes",".","substring","(","0,","lastIndexOf",")",";","\n		","}","\n		if","(","!sizes",".","isEmpty","(",")",")","\n		","{","\n			tag",".","put","(","\"sizes\",","sizes",")",";","\n		","}","\n	"],"docstring_tokens":["builds","the","sizes","attribute","of","the","img","tag"],"prompt_tokens":[]}
{"code_tokens":["\n	protected","void","addAntiCacheParameter","(","final","ComponentTag","tag",")","\n	","{","\n		String","url","=","tag",".","getAttributes","(",")",".","getString","(","\"src\"",")",";","\n		url","=","url","+","(","url",".","contains","(","\"?\"",")","?","\"&\"",":","\"?\"",")",";","\n		url","=","url","+","\"antiCache=\"","+","System",".","currentTimeMillis","(",")",";","\n\n		tag",".","put","(","\"src\",","url",")",";","\n	"],"docstring_tokens":["Adds","random","noise","to","the","url","every","request","to","prevent","the","browser","from","caching","the","image"],"prompt_tokens":[]}
{"code_tokens":["\n	@Around","(","\"execution","(","*","org",".","apache",".","wicket",".","metrics",".","aspects",".","session",".","SessionCountListener",".","inc","(",".",".",")",")","\"",")","\n	public","Object","aroundInc","(","ProceedingJoinPoint","joinPoint",")","throws","Throwable\n	","{","\n		Object","count","=","joinPoint",".","proceed","(",")",";","\n		count","(","\"core/session/count\",","null,","CounterOperation",".","INC,","1L",")",";","\n		return","count",";","\n	"],"docstring_tokens":["Measures","if","a","session","is","going","to","be","activated"],"prompt_tokens":[]}
{"code_tokens":["\n	@Around","(","\"execution","(","*","org",".","apache",".","wicket",".","metrics",".","aspects",".","session",".","SessionCountListener",".","dec","(",".",".",")",")","\"",")","\n	public","Object","aroundDec","(","ProceedingJoinPoint","joinPoint",")","throws","Throwable\n	","{","\n		Object","count","=","joinPoint",".","proceed","(",")",";","\n		count","(","\"core/session/count\",","null,","CounterOperation",".","DEC,","1L",")",";","\n		return","count",";","\n	"],"docstring_tokens":["Measures","if","a","session","is","going","to","be","destroyed"],"prompt_tokens":[]}
{"code_tokens":["\n	public","DebugBar","positionBottom","(",")","\n	","{","\n		add","(","AttributeModifier",".","append","(","\"class\",","\"bottom\"",")",")",";","\n		return","this",";","\n	"],"docstring_tokens":["Positions","the","DebugBar","at","the","bottom","of","the","page"],"prompt_tokens":[]}
{"code_tokens":["\n	public","static","<T>","ValueProvider<T>","of","(","final","T","value",")","\n	","{","\n		return","new","ValueProvider<>","(","value",")",";","\n	"],"docstring_tokens":["Creates","a","provider","for","the","specified","value"],"prompt_tokens":[]}
{"code_tokens":["\n	public","final","<C>","IConverter<C>","get","(","Class<C>","c",")","\n	","{","\n		return","(","IConverter<C>",")","classToConverter",".","get","(","c",".","getName","(",")",")",";","\n	"],"docstring_tokens":["Gets","the","type","converter","that","is","registered","for","class","c"],"prompt_tokens":[]}
{"code_tokens":["\n	public","final","IConverter<?>","remove","(","Class<?>","c",")","\n	","{","\n		return","classToConverter",".","remove","(","c",".","getName","(",")",")",";","\n	"],"docstring_tokens":["Removes","the","type","converter","currently","registered","for","class","c"],"prompt_tokens":[]}
{"code_tokens":["\n	public","final","IConverter<?>","set","(","final","Class<?>","c,","final","IConverter<?>","converter",")","\n	","{","\n		Args",".","notNull","(","c,","\"Class\"",")",";","\n		Args",".","notNull","(","converter,","\"converter\"",")",";","\n		return","classToConverter",".","put","(","c",".","getName","(",")",",","converter",")",";","\n	"],"docstring_tokens":["Registers","a","converter","for","use","with","class","c"],"prompt_tokens":[]}
{"code_tokens":["\n	@Override\n	public","final","long","getCurrentPage","(",")","\n	","{","\n		//","If","first","cell","is","out","of","range,","bring","page","back","into","range\n		while","(","(","currentPage",">","0",")","&&","(","(","currentPage","*","itemsPerPage",")",">=","getItemCount","(",")",")",")","\n		","{","\n			currentPage--",";","\n		","}","\n\n		return","currentPage",";","\n	"],"docstring_tokens":["Gets","the","index","of","the","current","page","being","displayed","by","this","list","view"],"prompt_tokens":[]}
{"code_tokens":["\n	@Override\n	public","final","long","getPageCount","(",")","\n	","{","\n		return","(","(","getItemCount","(",")","+","itemsPerPage",")","-","1",")","/","itemsPerPage",";","\n	"],"docstring_tokens":["Gets","the","number","of","pages","in","this","list","view"],"prompt_tokens":[]}
{"code_tokens":["\n	@Override\n	public","final","void","setCurrentPage","(","long","currentPage",")","\n	","{","\n		if","(","currentPage","<","0",")","\n		","{","\n			currentPage","=","0",";","\n		","}","\n\n		long","pageCount","=","getPageCount","(",")",";","\n		if","(","(","currentPage",">","0",")","&&","(","currentPage",">=","pageCount",")",")","\n		","{","\n			currentPage","=","pageCount","-","1",";","\n		","}","\n\n		addStateChange","(",")",";","\n		this",".","currentPage","=","currentPage",";","\n	"],"docstring_tokens":["Sets","the","current","page","that","this","list","view","should","show"],"prompt_tokens":[]}
{"code_tokens":["\n	@Override\n	public","void","respond","(","final","IRequestCycle","requestCycle",")","\n	","{","\n		WebResponse","webResponse","=","(","WebResponse",")","requestCycle",".","getResponse","(",")",";","\n		webResponse",".","sendError","(","errorCode,","message",")",";","\n	"],"docstring_tokens":["Respond","by","sending","the","set","errorCode","and","optionally","the","message","to","the","browser"],"prompt_tokens":[]}
{"code_tokens":["\r\n	public","boolean","startsWith","(","final","CharSequence","prefix,","final","int","toffset",")","\r\n	","{","\r\n		char","ta[]","=","value",";","\r\n		int","to","=","toffset",";","\r\n		int","po","=","0",";","\r\n		int","pc","=","prefix",".","length","(",")",";","\r\n		//","Note:","toffset","might","be","near","-1>>>1",".","\r\n		if","(","(","toffset","<","0",")","||","(","toffset",">","count","-","pc",")",")","\r\n		","{","\r\n			return","false",";","\r\n		","}","\r\n		while","(","--pc",">=","0",")","\r\n		","{","\r\n			if","(","ta[to++]","!=","prefix",".","charAt","(","po++",")",")","\r\n			","{","\r\n				return","false",";","\r\n			","}","\r\n		","}","\r\n		return","true",";","\r\n	"],"docstring_tokens":["Tests","if","this","AppendingStringBuffer","starts","with","the","specified","prefix","beginning","a","specified","	","index"],"prompt_tokens":[]}
{"code_tokens":["\r\n	public","boolean","startsWith","(","final","CharSequence","prefix",")","\r\n	","{","\r\n		return","startsWith","(","prefix,","0",")",";","\r\n	"],"docstring_tokens":["Tests","if","this","AppendingStringBuffer","starts","with","the","specified","prefix"],"prompt_tokens":[]}
{"code_tokens":["\r\n	public","boolean","endsWith","(","final","CharSequence","suffix",")","\r\n	","{","\r\n		return","startsWith","(","suffix,","count","-","suffix",".","length","(",")",")",";","\r\n	"],"docstring_tokens":["Tests","if","this","AppendingStringBuffer","ends","with","the","specified","suffix"],"prompt_tokens":[]}
{"code_tokens":["\r\n	private","void","readObject","(","final","java",".","io",".","ObjectInputStream","s",")","throws","IOException,\r\n		ClassNotFoundException\r\n	","{","\r\n		s",".","defaultReadObject","(",")",";","\r\n		value","=","value",".","clone","(",")",";","\r\n	"],"docstring_tokens":["readObject","is","called","to","restore","the","state","of","the","AppendingStringBuffer","from","a","stream"],"prompt_tokens":[]}
{"code_tokens":["\r\n	public","void","clear","(",")","\r\n	","{","\r\n		count","=","0",";","\r\n	"],"docstring_tokens":["Clears","the","buffer","contents,","but","leaves","the","allocated","size","intact"],"prompt_tokens":[]}
{"code_tokens":["\n	public","long","getMargin","(",")","\n	","{","\n		if","(","margin","==","-1","&&","viewSize","!=","0",")","\n		","{","\n			return","viewSize","/","2",";","\n		","}","\n		return","margin",";","\n	"],"docstring_tokens":["Gets","the","margin,","default","value","is","half","the","view","size,","unless","explicitly","set"],"prompt_tokens":[]}
{"code_tokens":["\n	public","void","setViewSize","(","final","int","size",")","\n	","{","\n		viewSize","=","size",";","\n	"],"docstring_tokens":["view","size","of","the","navigation","bar"],"prompt_tokens":[]}
{"code_tokens":["\n	protected","final","long","getStartIndex","(",")","\n	","{","\n		return","startIndex",";","\n	"],"docstring_tokens":["Allow","subclasses","replacing","populateItem","to","calculate","the","current","page","number"],"prompt_tokens":[]}
{"code_tokens":["\n	protected","WicketTester","newWicketTester","(","final","WebApplication","app",")","\n	","{","\n		return","new","WicketTester","(","app",")","{","\n			@Override\n			protected","Locale","servletRequestLocale","(",")","{","\n				return","Locale",".","US",";","\n			","}","\n		","}",";","\n	"],"docstring_tokens":["In","case","you","need","to","subclass","WicketTester","and","want","to","be","independent","on","possible","changes","in	","setUp"],"prompt_tokens":[]}
{"code_tokens":["\n	@Override\n	public","String","asString","(","Map<String,","?>","variables",")","\n	","{","\n		StringBuilder","b","=","new","StringBuilder","(",")",";","\n		b",".","append","(","getBeforeTemplateContents","(",")",")",";","\n		b",".","append","(","decorated",".","asString","(","variables",")",")",";","\n		b",".","append","(","getAfterTemplateContents","(",")",")",";","\n		return","b",".","toString","(",")",";","\n	"],"docstring_tokens":["Returns","the","decorated","contents","as","a","String"],"prompt_tokens":[]}
{"code_tokens":["\n	public","void","write","(","final","char","ch",")","\n	","{","\n		buffer",".","append","(","ch",")",";","\n	"],"docstring_tokens":["Writers","the","char","to","the","buffer"],"prompt_tokens":[]}
{"code_tokens":["\n	@Around","(","\"execution","(","org",".","apache",".","wicket",".","request",".","resource",".","IResource",".","new","(",".",".",")",")","\"",")","\n	public","Object","aroundNew","(","ProceedingJoinPoint","joinPoint",")","throws","Throwable\n	","{","\n		return","mark","(","\"core/resource/resource/create\",","joinPoint",")",";","\n	"],"docstring_tokens":["Collects","data","how","often","a","resource","reference","is","created"],"prompt_tokens":[]}
{"code_tokens":["\n	@Override\n	public","void","setCharset","(","final","Charset","charset",")","\n	","{","\n		//","java",".","nio",".","Charset","itself","is","not","serializable","so","we","can","only","store","the","name\n		charsetName","=","(","charset","!=","null",")","?","charset",".","name","(",")",":","null",";","\n	"],"docstring_tokens":["Sets","the","character","set","used","for","reading","this","resource"],"prompt_tokens":[]}
{"code_tokens":["\n	protected","boolean","isLengthAndPrefixCorrect","(","String","creditCardNumber",")","\n	","{","\n		if","(","creditCardNumber","==","null",")","\n		","{","\n			return","false",";","\n		","}","\n\n		//","strip","spaces","and","dashes\n		creditCardNumber","=","creditCardNumber",".","replaceAll","(","\"[","-]\",","\"\"",")",";","\n\n		//","the","length","of","the","credit","card","number","has","to","be","between","12","and","19",".","\n		//","else","the","number","is","invalid",".","\n		if","(","(","creditCardNumber",".","length","(",")",">=","12",")","&&","(","creditCardNumber",".","length","(",")","<=","19",")","&&\n			isChecksumCorrect","(","creditCardNumber",")",")","\n		","{","\n			if","(","(","failOnUnknown","==","false",")","||\n				","(","determineCardId","(","creditCardNumber",")","!=","CreditCard",".","INVALID",")",")","\n			","{","\n				return","true",";","\n			","}","\n		","}","\n\n		return","false",";","\n	"],"docstring_tokens":["Checks","if","the","credit","card","number","can","be","determined","as","a","valid","number"],"prompt_tokens":[]}
{"code_tokens":["\n	public","static","StringValue","valueOf","(","final","double","value",")","\n	","{","\n		return","valueOf","(","value,","Locale",".","getDefault","(","Locale",".","Category",".","FORMAT",")",")",";","\n	"],"docstring_tokens":["Converts","the","given","input","to","an","instance","of","StringValue"],"prompt_tokens":[]}
{"code_tokens":["\n	@SuppressWarnings","(","{","\"unchecked\",","\"rawtypes\"","}",")","\n	public","final","<T>","T","to","(","final","Class<T>","type",")","throws","StringValueConversionException\n	","{","\n		if","(","type","==","null",")","\n		","{","\n			return","null",";","\n		","}","\n\n		if","(","type","==","String",".","class",")","\n		","{","\n			return","(","T",")","toString","(",")",";","\n		","}","\n\n		if","(","(","type","==","Integer",".","TYPE",")","||","(","type","==","Integer",".","class",")",")","\n		","{","\n			return","(","T",")","toInteger","(",")",";","\n		","}","\n\n		if","(","(","type","==","Long",".","TYPE",")","||","(","type","==","Long",".","class",")",")","\n		","{","\n			return","(","T",")","toLongObject","(",")",";","\n		","}","\n\n		if","(","(","type","==","Boolean",".","TYPE",")","||","(","type","==","Boolean",".","class",")",")","\n		","{","\n			return","(","T",")","toBooleanObject","(",")",";","\n		","}","\n\n		if","(","(","type","==","Double",".","TYPE",")","||","(","type","==","Double",".","class",")",")","\n		","{","\n			return","(","T",")","toDoubleObject","(",")",";","\n		","}","\n\n		if","(","(","type","==","Character",".","TYPE",")","||","(","type","==","Character",".","class",")",")","\n		","{","\n			return","(","T",")","toCharacter","(",")",";","\n		","}","\n\n		if","(","type","==","Instant",".","class",")","\n		","{","\n			return","(","T",")","toInstant","(",")",";","\n		","}","\n\n		if","(","type","==","Duration",".","class",")","\n		","{","\n			return","(","T",")","toDuration","(",")",";","\n		","}","\n\n		if","(","type",".","isEnum","(",")",")","\n		","{","\n			return","(","T",")","toEnum","(","(","Class",")","type",")",";","\n		","}","\n\n		throw","new","StringValueConversionException","(","\n			\"Cannot","convert","'\"","+","toString","(",")","+","\"'to","type","\"","+","type",")",";","\n	"],"docstring_tokens":["Converts","this","StringValue","to","a","given","type"],"prompt_tokens":[]}
{"code_tokens":["\n	public","final","<T>","T","toOptional","(","final","Class<T>","type",")","throws","StringValueConversionException\n	","{","\n		return","Strings",".","isEmpty","(","text",")","?","null",":","to","(","type",")",";","\n	"],"docstring_tokens":["Converts","this","StringValue","to","a","given","type","or","null","if","the","value","is","empty"],"prompt_tokens":[]}
{"code_tokens":["\n	public","final","boolean","toBoolean","(","final","boolean","defaultValue",")","\n	","{","\n		if","(","text","!=","null",")","\n		","{","\n			try\n			","{","\n				return","toBoolean","(",")",";","\n			","}","\n			catch","(","StringValueConversionException","x",")","\n			","{","\n				if","(","LOG",".","isDebugEnabled","(",")",")","\n				","{","\n					LOG",".","debug","(","\n						String",".","format","(","\"An","error","occurred","while","converting","'%s'","to","a","boolean:","%s\",\n							text,","x",".","getMessage","(",")",")",",\n						x",")",";","\n				","}","\n			","}","\n		","}","\n		return","defaultValue",";","\n	"],"docstring_tokens":["Convert","to","boolean,","returning","default","value","if","text","is","inconvertible"],"prompt_tokens":[]}
{"code_tokens":["\n	public","final","char","toChar","(","final","char","defaultValue",")","\n	","{","\n		if","(","text","!=","null",")","\n		","{","\n			try\n			","{","\n				return","toChar","(",")",";","\n			","}","\n			catch","(","StringValueConversionException","x",")","\n			","{","\n				if","(","LOG",".","isDebugEnabled","(",")",")","\n				","{","\n					LOG",".","debug","(","\n						String",".","format","(","\"An","error","occurred","while","converting","'%s'","to","a","character:","%s\",\n							text,","x",".","getMessage","(",")",")",",\n						x",")",";","\n				","}","\n			","}","\n		","}","\n		return","defaultValue",";","\n	"],"docstring_tokens":["Convert","to","character,","returning","default","value","if","text","is","inconvertible"],"prompt_tokens":[]}
{"code_tokens":["\n	public","final","double","toDouble","(","final","double","defaultValue",")","\n	","{","\n		if","(","text","!=","null",")","\n		","{","\n			try\n			","{","\n				return","toDouble","(",")",";","\n			","}","\n			catch","(","Exception","x",")","\n			","{","\n				if","(","LOG",".","isDebugEnabled","(",")",")","\n				","{","\n					LOG",".","debug","(","\n						String",".","format","(","\"An","error","occurred","while","converting","'%s'","to","a","double:","%s\",\n							text,","x",".","getMessage","(",")",")",",\n						x",")",";","\n				","}","\n			","}","\n		","}","\n		return","defaultValue",";","\n	"],"docstring_tokens":["Convert","to","double,","returning","default","value","if","text","is","inconvertible"],"prompt_tokens":[]}
{"code_tokens":["\n	public","final","Duration","toDuration","(","final","Duration","defaultValue",")","\n	","{","\n		if","(","text","!=","null",")","\n		","{","\n			try\n			","{","\n				return","toDuration","(",")",";","\n			","}","\n			catch","(","Exception","x",")","\n			","{","\n				if","(","LOG",".","isDebugEnabled","(",")",")","\n				","{","\n					LOG",".","debug","(","\n						String",".","format","(","\"An","error","occurred","while","converting","'%s'","to","a","Duration:","%s\",\n							text,","x",".","getMessage","(",")",")",",\n						x",")",";","\n				","}","\n			","}","\n		","}","\n		return","defaultValue",";","\n	"],"docstring_tokens":["Convert","to","duration,","returning","default","value","if","text","is","inconvertible"],"prompt_tokens":[]}
{"code_tokens":["\n	public","final","int","toInt","(","final","int","defaultValue",")","\n	","{","\n		if","(","text","!=","null",")","\n		","{","\n			try\n			","{","\n				return","toInt","(",")",";","\n			","}","\n			catch","(","StringValueConversionException","x",")","\n			","{","\n				if","(","LOG",".","isDebugEnabled","(",")",")","\n				","{","\n					LOG",".","debug","(","\n						String",".","format","(","\"An","error","occurred","while","converting","'%s'","to","an","integer:","%s\",\n							text,","x",".","getMessage","(",")",")",",\n						x",")",";","\n				","}","\n			","}","\n		","}","\n		return","defaultValue",";","\n	"],"docstring_tokens":["Convert","to","integer,","returning","default","value","if","text","is","inconvertible"],"prompt_tokens":[]}
{"code_tokens":["\n	public","final","long","toLong","(","final","long","defaultValue",")","\n	","{","\n		if","(","text","!=","null",")","\n		","{","\n			try\n			","{","\n				return","toLong","(",")",";","\n			","}","\n			catch","(","StringValueConversionException","x",")","\n			","{","\n				if","(","LOG",".","isDebugEnabled","(",")",")","\n				","{","\n					LOG",".","debug","(","String",".","format","(","\"An","error","occurred","while","converting","'%s'","to","a","long:","%s\",\n						text,","x",".","getMessage","(",")",")",",","x",")",";","\n				","}","\n			","}","\n		","}","\n		return","defaultValue",";","\n	"],"docstring_tokens":["Convert","to","long","integer,","returning","default","value","if","text","is","inconvertible"],"prompt_tokens":[]}
{"code_tokens":["\n	public","final","Boolean","toOptionalBoolean","(",")","throws","StringValueConversionException\n	","{","\n		return","Strings",".","isEmpty","(","text",")","?","null",":","toBooleanObject","(",")",";","\n	"],"docstring_tokens":["Convert","to","object","types,","returning","null","if","text","is","null","or","empty"],"prompt_tokens":[]}
{"code_tokens":["\n	public","final","String","toOptionalString","(",")","\n	","{","\n		return","text",";","\n	"],"docstring_tokens":["Convert","to","object","types,","returning","null","if","text","is","null"],"prompt_tokens":[]}
{"code_tokens":["\n	public","final","String","toString","(","final","String","defaultValue",")","\n	","{","\n		return","(","text","==","null",")","?","defaultValue",":","text",";","\n	"],"docstring_tokens":["Convert","to","primitive","types,","returning","default","value","if","text","is","null"],"prompt_tokens":[]}
{"code_tokens":["\n	public","final","Instant","toInstant","(","final","Instant","defaultValue",")","\n	","{","\n		if","(","text","!=","null",")","\n		","{","\n			try\n			","{","\n				return","toInstant","(",")",";","\n			","}","\n			catch","(","StringValueConversionException","x",")","\n			","{","\n				if","(","LOG",".","isDebugEnabled","(",")",")","\n				","{","\n					LOG",".","debug","(","String",".","format","(","\"An","error","occurred","while","converting","'%s'","to","an","Instant:","%s\",\n						text,","x",".","getMessage","(",")",")",",","x",")",";","\n				","}","\n			","}","\n		","}","\n		return","defaultValue",";","\n	"],"docstring_tokens":["Convert","to","Instant,","returning","default","value","if","text","is","inconvertible"],"prompt_tokens":[]}
{"code_tokens":["\n	public","final","<T","extends","Enum<T>>","T","toOptionalEnum","(","Class<T>","eClass",")","\n		throws","StringValueConversionException\n	","{","\n		return","Strings",".","isEmpty","(","text",")","?","null",":","toEnum","(","eClass",")",";","\n	"],"docstring_tokens":["Convert","to","enum,","returning","null","if","text","is","null","or","empty"],"prompt_tokens":[]}
{"code_tokens":["\n	public","void","setHandler","(","IRequestHandler","handler",")","\n	","{","\n		this",".","handler","=","handler",";","\n	"],"docstring_tokens":["Sets","the","custom","request","handler"],"prompt_tokens":[]}
{"code_tokens":["\n	public","IPageStore","getCache","(",")","\n	","{","\n		return","cache",";","\n	"],"docstring_tokens":["Get","the","store","used","a","cache"],"prompt_tokens":[]}
{"code_tokens":["\n	@Override\n	public","final","boolean","matches","(",")","\n	","{","\n		//","Are","there","any","more","elements\n		if","(","advance","(","entryGroup",")",")","\n		","{","\n			//","Add","the","first","element\n			final","String","value","=","entryGroup",".","get","(","matcher","(",")",")",";","\n			values",".","add","(","value",")",";","\n\n			//","All","remaining","elements","must","be","preceded","by","the","separator","pattern\n			while","(","advance","(","separatorPattern",")","&&","advance","(","entryGroup",")",")","\n			","{","\n				//","Add","the","value","not","including","the","separator\n				values",".","add","(","entryGroup",".","get","(","matcher","(",")",")",")",";","\n			","}","\n\n			//","Yes,","we","found","at","least","on","element\n			return","true",";","\n		","}","\n\n		//","Nothing","found,","not","even","one","element","without","separator\n		return","false",";","\n	"],"docstring_tokens":["Parse","the","input","and","add","the","elements","to","an","internal","list","to","be","accessed","by"],"prompt_tokens":[]}
{"code_tokens":["\r\n	public","final","boolean","greaterThan","(","final","long","value",")","\r\n	","{","\r\n		return","this",".","value",">","value",";","\r\n	"],"docstring_tokens":["Compares","this","LongValue","with","a","primitive","long","value"],"prompt_tokens":[]}
{"code_tokens":["\r\n	public","final","boolean","greaterThan","(","final","LongValue","that",")","\r\n	","{","\r\n		return","value",">","that",".","value",";","\r\n	"],"docstring_tokens":["Compares","this","LongValue","with","another","LongValue"],"prompt_tokens":[]}
{"code_tokens":["\r\n	@Override\r\n	public","String","toString","(",")","\r\n	","{","\r\n		return","String",".","valueOf","(","value",")",";","\r\n	"],"docstring_tokens":["Converts","this","LongValue","to","a","String"],"prompt_tokens":[]}
{"code_tokens":["\r\n	public","static","<T","extends","LongValue>","T","min","(","final","T","lhs,","final","T","rhs",")","\r\n	","{","\r\n		Args",".","notNull","(","lhs,","\"lhs\"",")",";","\r\n		Args",".","notNull","(","rhs,","\"rhs\"",")",";","\r\n		if","(","lhs",".","compareTo","(","rhs",")","<","0",")","\r\n		","{","\r\n			return","lhs",";","\r\n		","}","\r\n		return","rhs",";","\r\n	"],"docstring_tokens":["Returns","the","min","of","the","two","long","values"],"prompt_tokens":[]}
{"code_tokens":["\r\n	public","static","<T","extends","LongValue>","T","max","(","final","T","lhs,","final","T","rhs",")","\r\n	","{","\r\n		Args",".","notNull","(","lhs,","\"lhs\"",")",";","\r\n		Args",".","notNull","(","rhs,","\"rhs\"",")",";","\r\n		if","(","lhs",".","compareTo","(","rhs",")",">","0",")","\r\n		","{","\r\n			return","lhs",";","\r\n		","}","\r\n		return","rhs",";","\r\n	"],"docstring_tokens":["Returns","the","max","of","the","two","long","values"],"prompt_tokens":[]}
{"code_tokens":["\r\n	public","void","beforeRender","(",")","{","\r\n		cycle",".","setMetaData","(","KEY,","null",")",";","\r\n		cycle","=","null",";","\r\n		\r\n		for","(","IFeedback","feedback",":","feedbacks",")","\r\n		","{","\r\n			if","(","feedback","instanceof","Component",")","{","\r\n				Component","component","=","(","Component",")","feedback",";","\r\n				\r\n				//","render","only","if","it","is","still","in","the","page","hierarchy","(","WICKET-4895",")","\r\n				if","(","component",".","findParent","(","Page",".","class",")","==","null",")","\r\n				","{","\r\n					continue",";","\r\n				","}","			\r\n			","}","\r\n		\r\n			feedback",".","beforeRender","(",")",";","\r\n		","}","\r\n	"],"docstring_tokens":["Prepares","all","postponed","feedbacks","for","render"],"prompt_tokens":[]}
{"code_tokens":["\r\n	public","PageParameters","getPageParameters","(",")","\r\n	","{","\r\n		return","pageParameters",";","\r\n	"],"docstring_tokens":["Gets","the","page","parameter","applied","to","the","URL","of","the","media","component"],"prompt_tokens":[]}
{"code_tokens":["\r\n	public","void","setPageParameters","(","PageParameters","pageParameters",")","\r\n	","{","\r\n		this",".","pageParameters","=","pageParameters",";","\r\n	"],"docstring_tokens":["Sets","the","page","parameter","applied","to","the","URL","of","the","media","component"],"prompt_tokens":[]}
{"code_tokens":["\r\n	public","String","getStartTime","(",")","\r\n	","{","\r\n		return","startTime",";","\r\n	"],"docstring_tokens":["Gets","the","position","at","which","the","media","component","starts","the","playback"],"prompt_tokens":[]}
{"code_tokens":["\r\n	public","String","getEndTime","(",")","\r\n	","{","\r\n		return","endTime",";","\r\n	"],"docstring_tokens":["Gets","the","position","at","which","the","media","component","stops","the","playback"],"prompt_tokens":[]}
{"code_tokens":["\n	protected","boolean","isSelected","(","IModel<?>","model",")","\n	","{","\n		return","compareModels","(","getDefaultModelObject","(",")",",","model",".","getObject","(",")",")",";","\n	"],"docstring_tokens":["Does","the","given","model","contain","a","selected","value"],"prompt_tokens":[]}
{"code_tokens":["\n	public","static","Link<Void>","link","(","final","String","name,","final","long","id",")","\n	","{","\n		return","new","Link<Void>","(","name",")","\n		","{","\n			@Override\n			public","void","onClick","(",")","\n			","{","\n				setResponsePage","(","new","EditBook","(","Book",".","get","(","id",")",")",")",";","\n			","}","\n		","}",";","\n	"],"docstring_tokens":["Gets","a","link","to","a","page","that","will","edit","a","book"],"prompt_tokens":[]}
{"code_tokens":["\r\n	public","static","List<EnumeratedType>","getValues","(","final","Class<?","extends","EnumeratedType>","c",")","\r\n	","{","\r\n		//","Get","values","for","class\r\n		List<EnumeratedType>","valueList","=","valueListByClass",".","get","(","c",".","getName","(",")",")",";","\r\n\r\n		//","If","no","list","exists\r\n		if","(","valueList","==","null",")","\r\n		","{","\r\n			//","create","lazily\r\n			valueList","=","new","ArrayList<>","(",")",";","\r\n			valueListByClass",".","put","(","c",".","getName","(",")",",","valueList",")",";","\r\n		","}","\r\n\r\n		return","valueList",";","\r\n	"],"docstring_tokens":["Gets","the","enumerated","type","values","for","a","given","subclass","of","EnumeratedType"],"prompt_tokens":[]}
{"code_tokens":["private","Component","newHelpLabel","(","final","String","id,","final","IModel<String>","model",")","{","return","new","Label","(","id,","model",")",";"],"docstring_tokens":["creates","a","new","help","label","that","contains","a","help","message","for","the","form","field"],"prompt_tokens":[]}
{"code_tokens":["\n	protected","final","ChainingModel<T>","setTarget","(","final","Object","modelObject",")","\n	","{","\n		this",".","target","=","modelObject",";","\n		return","this",";","\n	"],"docstring_tokens":["Sets","a","new","target","-","object","or","model"],"prompt_tokens":[]}
{"code_tokens":["\n	public","static","Result","fail","(","String","message",")","\n	","{","\n		return","new","Result","(","true,","message",")",";","\n	"],"docstring_tokens":["Returns","a","Result","which","failed"],"prompt_tokens":[]}
{"code_tokens":["\n	public","static","Result","pass","(",")","\n	","{","\n		return","PASS",";","\n	"],"docstring_tokens":["Returns","a","Result","which","passed"],"prompt_tokens":[]}
{"code_tokens":["\n	public","boolean","wasFailed","(",")","\n	","{","\n		return","failed",";","\n	"],"docstring_tokens":["Returns","true","if","the","Result","was","a","failure"],"prompt_tokens":[]}
{"code_tokens":["\n	public","String","getMessage","(",")","\n	","{","\n		return","message",";","\n	"],"docstring_tokens":["Retrieves","the","error","message"],"prompt_tokens":[]}
{"code_tokens":["\n	public","void","add","(","final","IFormValidator","validator",")","\n	","{","\n		Args",".","notNull","(","validator,","\"validator\"",")",";","\n\n		if","(","validator","instanceof","Behavior",")","\n		","{","\n			add","(","(","Behavior",")","validator",")",";","\n		","}","\n		else\n		","{","\n			add","(","new","FormValidatorAdapter","(","validator",")",")",";","\n		","}","\n	"],"docstring_tokens":["Adds","a","form","validator","to","the","form"],"prompt_tokens":[]}
{"code_tokens":["\n	public","void","remove","(","final","IFormValidator","validator",")","\n	","{","\n		Args",".","notNull","(","validator,","\"validator\"",")",";","\n\n		Behavior","match","=","null",";","\n		for","(","Behavior","behavior",":","getBehaviors","(",")",")","\n		","{","\n			if","(","behavior",".","equals","(","validator",")",")","\n			","{","\n				match","=","behavior",";","\n				break",";","\n			","}","\n			else","if","(","behavior","instanceof","FormValidatorAdapter",")","\n			","{","\n				if","(","(","(","FormValidatorAdapter",")","behavior",")",".","getValidator","(",")",".","equals","(","validator",")",")","\n				","{","\n					match","=","behavior",";","\n					break",";","\n				","}","\n			","}","\n		","}","\n\n		if","(","match","!=","null",")","\n		","{","\n			remove","(","match",")",";","\n		","}","\n		else\n		","{","\n\n			throw","new","IllegalStateException","(","\n				\"Tried","to","remove","form","validator","that","was","not","previously","added",".","\"\n					+","\"Make","sure","your","validator's","equals","(",")","implementation","is","sufficient\"",")",";","\n		","}","\n	"],"docstring_tokens":["Removes","a","form","validator","from","the","form"],"prompt_tokens":[]}
{"code_tokens":["\n	public","final","CharSequence","getJsForSubmitter","(","IFormSubmittingComponent","submitter,","boolean","triggerEvent",")","\n	","{","\n		Form<?>","root","=","getRootForm","(",")",";","\n\n		String","param","=","submitter",".","getInputName","(",")","+","\"=x\"",";","\n\n		AppendingStringBuffer","buffer","=","new","AppendingStringBuffer","(",")",";","\n		buffer",".","append","(","String",".","format","(","\"var","f","=","document",".","getElementById","(","'%s'",")",";","\",","root",".","getMarkupId","(",")",")",")",";","\n		buffer",".","append","(","String",".","format","(","\"document",".","getElementById","(","'%s'",")",".","innerHTML","+=","'\",\n			root",".","getHiddenFieldsId","(","HIDDEN_FIELDS_PARAMS_IDX",")",")",")",";","\n		writeParamsAsHiddenFields","(","new","String[]","{","param","}",",","buffer",")",";","\n		buffer",".","append","(","\"'",";","\"",")",";","\n\n		if","(","triggerEvent",")","\n		","{","\n			buffer",".","append","(","\"Wicket",".","Event",".","fire","(","f,","'submit'",")",";","\"",")",";","\n		","}","\n		else\n		","{","\n			buffer",".","append","(","\"f",".","submit","(",")",";","\"",")",";","\n		","}","\n		return","buffer",";","\n	"],"docstring_tokens":["Generate","a","piece","of","JavaScript","that","submits","the","form","with","the","given	","IFormSubmittingComponent"],"prompt_tokens":[]}
{"code_tokens":["\n	public","final","Bytes","getMaxSize","(",")","\n	","{","\n		/*\n		","*","NOTE:","This","method","should","remain","final","otherwise","it","will","be","impossible","to","set","a","default\n		","*","max","size","smaller","then","the","one","specified","in","applications","settings","because","the","inner","form\n		","*","will","return","the","default","unless","it","is","specifically","set","in","the","traversal",".","With","this","method\n		","*","remaining","final","we","can","tell","when","the","value","is","explicitly","set","by","the","user",".","\n		","*","\n		","*","If","the","value","needs","to","be","dynamic","it","can","be","set","in","oncofigure","(",")","instead","of","overriding","this\n		","*","method",".","\n		","*/\n\n		final","Bytes[]","maxSize","=","{","this",".","maxSize","}",";","\n		if","(","maxSize[0]","==","null",")","\n		","{","\n			visitChildren","(","Form",".","class,","new","IVisitor<Form<?>,","Bytes>","(",")","\n			","{","\n				@Override\n				public","void","component","(","Form<?>","component,","IVisit<Bytes>","visit",")","\n				","{","\n					maxSize[0]","=","LongValue",".","maxNullSafe","(","maxSize[0],","component",".","maxSize",")",";","\n				","}","\n			","}",")",";","\n		","}","\n		if","(","maxSize[0]","==","null",")","\n		","{","\n			return","getApplication","(",")",".","getApplicationSettings","(",")",".","getDefaultMaximumUploadSize","(",")",";","\n		","}","\n		return","maxSize[0]",";","\n	"],"docstring_tokens":["Gets","the","maximum","size","for","uploads"],"prompt_tokens":[]}
{"code_tokens":["\n	public","final","boolean","hasError","(",")","\n	","{","\n		//","if","this","form","itself","has","an","error","message\n		if","(","hasErrorMessage","(",")",")","\n		","{","\n			return","true",";","\n		","}","\n\n		//","the","form","doesn't","have","any","errors,","now","check","any","nested","form\n		//","components\n		return","anyFormComponentError","(",")",";","\n	"],"docstring_tokens":["Gets","whether","the","current","form","has","any","error","registered"],"prompt_tokens":[]}
{"code_tokens":["\n	public","final","boolean","isSubmitted","(",")","\n	","{","\n		return","getFlag","(","FLAG_SUBMITTED",")",";","\n	"],"docstring_tokens":["Checks","if","this","form","has","been","submitted","during","the","current","request"],"prompt_tokens":[]}
{"code_tokens":["\n	protected","void","callOnError","(","IFormSubmitter","submitter",")","\n	","{","\n		final","Form<?>","processingForm","=","findFormToProcess","(","submitter",")",";","\n\n		if","(","submitter","!=","null",")","\n		","{","\n			submitter",".","onError","(",")",";","\n		","}","\n\n		//","invoke","Form#onSubmit","(",".",".",")","going","from","innermost","to","outermost\n		Visits",".","visitPostOrder","(","processingForm,","new","IVisitor<Form<?>,","Void>","(",")","\n		","{","\n			@Override\n			public","void","component","(","Form<?>","form,","IVisit<Void>","visit",")","\n			","{","\n				if","(","!form",".","isEnabledInHierarchy","(",")","||","!form",".","isVisibleInHierarchy","(",")",")","\n				","{","\n					visit",".","dontGoDeeper","(",")",";","\n					return",";","\n				","}","\n				if","(","form",".","hasError","(",")",")","\n				","{","\n					form",".","onError","(",")",";","\n				","}","\n			","}","\n		","}",",","new","ClassVisitFilter","(","Form",".","class",")",")",";","\n	"],"docstring_tokens":["Calls","onError","on","this","Form","and","any","enabled","and","visible","nested","form,","if","the","respective	","Form","actually","has","errors"],"prompt_tokens":[]}
{"code_tokens":["\n	private","void","markFormsSubmitted","(","IFormSubmitter","submitter",")","\n	","{","\n		setFlag","(","FLAG_SUBMITTED,","true",")",";","\n		Form<?>","formToProcess","=","findFormToProcess","(","submitter",")",";","\n		\n		visitChildren","(","Form",".","class,","new","IVisitor<Component,","Void>","(",")","\n		","{","\n			@Override\n			public","void","component","(","final","Component","component,","final","IVisit<Void>","visit",")","\n			","{","\n				Form<?>","form","=","(","Form<?>",")","component",";","\n				if","(","(","form",".","wantSubmitOnParentFormSubmit","(",")","||","form","==","formToProcess",")","\n					&&","form",".","isEnabledInHierarchy","(",")","&&","form",".","isVisibleInHierarchy","(",")",")","\n				","{","\n					form",".","setFlag","(","FLAG_SUBMITTED,","true",")",";","\n					return",";","\n				","}","\n				visit",".","dontGoDeeper","(",")",";","\n			","}","\n		","}",")",";","\n	"],"docstring_tokens":["Sets","FLAG_SUBMITTED","to","true","on","this","form","and","every","enabled","nested","form"],"prompt_tokens":[]}
{"code_tokens":["\n	protected","CharSequence","getActionUrl","(",")","\n	","{","\n		return","urlForListener","(","new","PageParameters","(",")",")",";","\n	"],"docstring_tokens":["Generates","the","action","url","for","the","form"],"prompt_tokens":[]}
{"code_tokens":["\n	@Override\n	public","void","onComponentTagBody","(","final","MarkupStream","markupStream,","final","ComponentTag","openTag",")","\n	","{","\n		if","(","isRootForm","(",")",")","\n		","{","\n			//","get","the","hidden","field","id\n			writeHiddenFields","(",")",";","\n		","}","\n\n		//","do","the","rest","of","the","processing\n		super",".","onComponentTagBody","(","markupStream,","openTag",")",";","\n	"],"docstring_tokens":["Append","an","additional","hidden","input","tag","to","support","anchor","tags","that","can","submit","a","form"],"prompt_tokens":[]}
{"code_tokens":["\n	public","final","void","writeHiddenFields","(",")","\n	","{","\n		getResponse","(",")",".","write","(","String",".","format","(","\"<div","id=\\\"%s\\\"","hidden=\\\"\\\"","class=\\\"%s\\\">\",\n			getHiddenFieldsId","(","HIDDEN_FIELDS_PARAMS_IDX",")",",\n			getString","(","HIDDEN_FIELDS_CSS_CLASS_KEY",")",")",")",";","\n		//","if","the","parameters","are","not","in","the","action","attribute,","they","have","to","be","written","as","hidden","fields\n		if","(","encodeUrlInHiddenFields","(",")",")","\n		","{","\n			AppendingStringBuffer","buffer","=","new","AppendingStringBuffer","(",")",";","				\n\n			String","url","=","getActionUrl","(",")",".","toString","(",")",";","\n			int","i","=","url",".","indexOf","(","'?'",")",";","\n			String","queryString","=","(","i",">","-1",")","?","url",".","substring","(","i","+","1",")",":","url",";","\n			String[]","params","=","Strings",".","split","(","queryString,","'&'",")",";","\n\n			writeParamsAsHiddenFields","(","params,","buffer",")",";","\n\n			getResponse","(",")",".","write","(","buffer",")",";","\n		","}","\n		getResponse","(",")",".","write","(","\"</div>\"",")",";","\n		\n		//","if","a","default","submitting","component","was","set,","handle","the","rendering","of","that\n		if","(","hasDefaultSubmittingComponent","(",")",")","\n		","{","\n			appendDefaultButtonField","(",")",";","\n		","}","\n	"],"docstring_tokens":["Writes","the","markup","for","the","hidden","input","fields","and","default","button","field","if","applicable","to","the	","current","response"],"prompt_tokens":[]}
{"code_tokens":["\n	private","String","recode","(","String","s",")","\n	","{","\n		String","un","=","UrlDecoder",".","QUERY_INSTANCE",".","decode","(","s,","getRequest","(",")",".","getCharset","(",")",")",";","\n		return","Strings",".","escapeMarkup","(","un",")",".","toString","(",")",";","\n	"],"docstring_tokens":["Take","URL-encoded","query","string","value,","decode","it","and","return","HTML-escaped","version"],"prompt_tokens":[]}
{"code_tokens":["\n	protected","void","onSubmit","(",")","\n	","{","\n	"],"docstring_tokens":["Implemented","by","subclasses","to","deal","with","form","submits"],"prompt_tokens":[]}
{"code_tokens":["\n	protected","void","onValidate","(",")","\n	","{","\n\n	"],"docstring_tokens":["Callback","during","the","validation","stage","of","the","form"],"prompt_tokens":[]}
{"code_tokens":["\n	protected","final","void","validateComponents","(",")","\n	","{","\n		visitFormComponentsPostOrder","(","new","ValidationVisitor","(",")","\n		","{","\n			@Override\n			public","void","validate","(","final","FormComponent<?>","formComponent",")","\n			","{","\n				final","Form<?>","form","=","formComponent",".","getForm","(",")",";","\n				if","(","form","==","Form",".","this","&&","form",".","isEnabledInHierarchy","(",")","&&","form",".","isVisibleInHierarchy","(",")",")","\n				","{","\n					formComponent",".","validate","(",")",";","\n				","}","\n			","}","\n		","}",")",";","\n	"],"docstring_tokens":["Triggers","type","conversion","on","form","components"],"prompt_tokens":[]}
{"code_tokens":["\n	protected","String","getInputNamePrefix","(",")","\n	","{","\n		return","\"\"",";","\n	"],"docstring_tokens":["Allows","to","customize","input","names","of","form","components","inside","this","form"],"prompt_tokens":[]}
{"code_tokens":["\n	public","Map<String,","Object>","getVariables","(",")","\n	","{","\n		return","vars",";","\n	"],"docstring_tokens":["Returns","the","map","of","variables","for","this","exception"],"prompt_tokens":[]}
{"code_tokens":["\n	public","final","void","clearCache","(",")","\n	","{","\n		if","(","cache","!=","null",")","\n		","{","\n			cache","=","newCache","(",")",";","\n		","}","\n	"],"docstring_tokens":["Clear","all","cache","entries","by","instantiating","a","new","cache","object"],"prompt_tokens":[]}
{"code_tokens":["\n	public","String","substitutePropertyExpressions","(","final","Component","component,","final","String","string,\n		final","IModel<?>","model",")","\n	","{","\n		if","(","(","string","!=","null",")","&&","(","model","!=","null",")",")","\n		","{","\n			final","IConverterLocator","locator",";","\n			final","Locale","locale",";","\n			if","(","component","==","null",")","\n			","{","\n				locator","=","Application",".","get","(",")",".","getConverterLocator","(",")",";","\n\n				if","(","Session",".","exists","(",")",")","\n				","{","\n					locale","=","Session",".","get","(",")",".","getLocale","(",")",";","\n				","}","\n				else\n				","{","\n					locale","=","Locale",".","getDefault","(",")",";","\n				","}","\n			","}","\n			else\n			","{","\n				locator","=","component",";","\n				locale","=","component",".","getLocale","(",")",";","\n			","}","\n\n			return","new","ConvertingPropertyVariableInterpolator","(","string,","model",".","getObject","(",")",",","locator,\n				locale",")",".","toString","(",")",";","\n		","}","\n		return","string",";","\n	"],"docstring_tokens":["Helper","method","to","handle","property","variable","substitution","in","strings"],"prompt_tokens":[]}
{"code_tokens":["\n	private","void","merge","(","final","IMarkupFragment","markup,","final","IMarkupFragment","baseMarkup,\n		int","extendIndex",")","\n	","{","\n		//","True","if","either","<wicket:head>","or","<head>","has","been","processed\n		boolean","wicketHeadProcessed","=","false",";","\n\n		//","True,","if","<head>","was","found\n		boolean","foundHeadTag","=","false",";","\n\n		//","Add","all","elements","from","the","base","markup","to","the","new","list\n		//","until","<wicket:child/>","is","found",".","Convert","<wicket:child/>\n		//","into","<wicket:child>","and","add","it","as","well",".","\n		WicketTag","childTag","=","null",";","\n		int","baseIndex","=","0",";","\n		MarkupResourceStream","markupResourceStream","=","baseMarkup",".","getMarkupResourceStream","(",")",";","\n		IResourceStream","resource","=","markupResourceStream",".","getResource","(",")",";","\n		Class<?","extends","Component>","markupClass","=","markupResourceStream",".","getMarkupClass","(",")",";","\n\n		for","(",";","baseIndex","<","baseMarkup",".","size","(",")",";","baseIndex++",")","\n		","{","\n			MarkupElement","element","=","baseMarkup",".","get","(","baseIndex",")",";","\n			if","(","element","instanceof","RawMarkup",")","\n			","{","\n				//","Add","the","element","to","the","merged","list\n				addMarkupElement","(","element",")",";","\n				continue",";","\n			","}","\n\n			final","ComponentTag","tag","=","(","ComponentTag",")","element",";","\n\n			//","Make","sure","all","tags","of","the","base","markup","remember","where","they","are\n			//","from\n			if","(","resource","!=","null","&&","tag",".","getMarkupClass","(",")","==","null",")","\n			","{","\n				tag",".","setMarkupClass","(","markupClass",")",";","\n			","}","\n\n			if","(","element","instanceof","WicketTag",")","\n			","{","\n				WicketTag","wtag","=","(","WicketTag",")","element",";","\n\n				//","Found","wicket:child","in","the","base","markup",".","In","case","of","3+\n				//","level","inheritance","make","sure","the","child","tag","is","not","from","one","of\n				//","the","deeper","levels\n				if","(","wtag",".","isChildTag","(",")","&&","tag",".","getMarkupClass","(",")","==","markupClass",")","\n				","{","\n					if","(","wtag",".","isOpenClose","(",")",")","\n					","{","\n						//","<wicket:child","/>","=>","<wicket:child>",".",".",".","</wicket:child>\n						childTag","=","wtag",";","\n						WicketTag","childOpenTag","=","(","WicketTag",")","wtag",".","mutable","(",")",";","\n						childOpenTag",".","getXmlTag","(",")",".","setType","(","TagType",".","OPEN",")",";","\n						childOpenTag",".","setMarkupClass","(","markupClass",")",";","\n						addMarkupElement","(","childOpenTag",")",";","\n						break",";","\n					","}","\n					else","if","(","wtag",".","isOpen","(",")",")","\n					","{","\n						//","<wicket:child>\n						addMarkupElement","(","wtag",")",";","\n						break",";","\n					","}","\n					else\n					","{","\n						throw","new","WicketRuntimeException","(","\n							\"Did","not","expect","a","</wicket:child>","tag","in","\"","+","baseMarkup",".","toString","(",")",")",";","\n					","}","\n				","}","\n\n				//","Process","the","head","of","the","extended","markup","only","once\n				if","(","wicketHeadProcessed","==","false",")","\n				","{","\n					//","if","</wicket:head>","in","base","markup","and","no","<head>\n					if","(","wtag",".","isClose","(",")","&&","wtag",".","isHeadTag","(",")","&&","(","foundHeadTag","==","false",")",")","\n					","{","\n						wicketHeadProcessed","=","true",";","\n\n						//","Add","the","current","close","tag\n						addMarkupElement","(","wtag",")",";","\n\n						//","Add","the","<wicket:head>","body","from","the","derived","markup",".","\n						copyWicketHead","(","markup,","extendIndex",")",";","\n\n						//","Do","not","add","the","current","tag",".","It","has","already","been","added",".","\n						continue",";","\n					","}","\n\n					//","if","<wicket:panel>","or",".",".",".","in","base","markup\n					if","(","wtag",".","isOpen","(",")","&&","wtag",".","isMajorWicketComponentTag","(",")",")","\n					","{","\n						wicketHeadProcessed","=","true",";","\n\n						//","Add","the","<wicket:head>","body","from","the","derived","markup",".","\n						copyWicketHead","(","markup,","extendIndex",")",";","\n					","}","\n				","}","\n			","}","\n\n			//","Process","the","head","of","the","extended","markup","only","once\n			if","(","wicketHeadProcessed","==","false",")","\n			","{","\n				//","Remember","that","we","found","<head>","in","the","base","markup\n				if","(","tag",".","isOpen","(",")","&&","TagUtils",".","isHeadTag","(","tag",")",")","\n				","{","\n					foundHeadTag","=","true",";","\n				","}","\n\n				//","if","<head>","in","base","markup\n				if","(","(","tag",".","isClose","(",")","&&","TagUtils",".","isHeadTag","(","tag",")",")","||\n				","(","tag",".","isClose","(",")","&&","TagUtils",".","isWicketHeaderItemsTag","(","tag",")",")","||\n					","(","tag",".","isOpen","(",")","&&","TagUtils",".","isBodyTag","(","tag",")",")",")","\n				","{","\n					wicketHeadProcessed","=","true",";","\n\n					//","Add","the","<wicket:head>","body","from","the","derived","markup",".","\n					copyWicketHead","(","markup,","extendIndex",")",";","\n				","}","\n			","}","\n\n			//","Add","the","element","to","the","merged","list\n			addMarkupElement","(","element",")",";","\n		","}","\n\n		if","(","baseIndex","==","baseMarkup",".","size","(",")",")","\n		","{","\n			throw","new","WicketRuntimeException","(","\"Expected","to","find","<wicket:child/>","in","base","markup:","\"","+\n				baseMarkup",".","toString","(",")",")",";","\n		","}","\n\n		//","Now","append","all","elements","from","the","derived","markup","starting","with\n		//","<wicket:extend>","until","</wicket:extend>","to","the","list\n		for","(",";","extendIndex","<","markup",".","size","(",")",";","extendIndex++",")","\n		","{","\n			MarkupElement","element","=","markup",".","get","(","extendIndex",")",";","\n			addMarkupElement","(","element",")",";","\n\n			if","(","element","instanceof","WicketTag",")","\n			","{","\n				WicketTag","wtag","=","(","WicketTag",")","element",";","\n				if","(","wtag",".","isExtendTag","(",")","&&","wtag",".","isClose","(",")",")","\n				","{","\n					break",";","\n				","}","\n			","}","\n		","}","\n\n		if","(","extendIndex","==","markup",".","size","(",")",")","\n		","{","\n			throw","new","WicketRuntimeException","(","\n				\"Missing","close","tag","</wicket:extend>","in","derived","markup:","\"","+","markup",".","toString","(",")",")",";","\n		","}","\n\n		//","If","<wicket:child>","than","skip","the","body","and","find","</wicket:child>\n		if","(","(","(","ComponentTag",")","baseMarkup",".","get","(","baseIndex",")",")",".","isOpen","(",")",")","\n		","{","\n			for","(","baseIndex++",";","baseIndex","<","baseMarkup",".","size","(",")",";","baseIndex++",")","\n			","{","\n				MarkupElement","element","=","baseMarkup",".","get","(","baseIndex",")",";","\n				if","(","element","instanceof","WicketTag",")","\n				","{","\n					WicketTag","tag","=","(","WicketTag",")","element",";","\n					if","(","tag",".","isChildTag","(",")","&&","tag",".","isClose","(",")",")","\n					","{","\n						//","Ok,","skipped","the","childs","content\n						tag",".","setMarkupClass","(","markupClass",")",";","\n						addMarkupElement","(","tag",")",";","\n						break",";","\n					","}","\n					else\n					","{","\n						throw","new","WicketRuntimeException","(","\n							\"Wicket","tags","like","<wicket:xxx>","are","not","allowed","in","between","<wicket:child>","and","</wicket:child>","tags:","\"","+\n								markup",".","toString","(",")",")",";","\n					","}","\n				","}","\n				else","if","(","element","instanceof","ComponentTag",")","\n				","{","\n					throw","new","WicketRuntimeException","(","\n						\"Wicket","tags","identified","by","wicket:id","are","not","allowed","in","between","<wicket:child>","and","</wicket:child>","tags:","\"","+\n							markup",".","toString","(",")",")",";","\n				","}","\n			","}","\n\n			//","</wicket:child>","not","found\n			if","(","baseIndex","==","baseMarkup",".","size","(",")",")","\n			","{","\n				throw","new","WicketRuntimeException","(","\n					\"Expected","to","find","</wicket:child>","in","base","markup:","\"","+","baseMarkup",".","toString","(",")",")",";","\n			","}","\n		","}","\n		else\n		","{","\n			//","And","now","all","remaining","elements","from","the","derived","markup",".","\n			//","But","first","add","</wicket:child>\n			WicketTag","childCloseTag","=","(","WicketTag",")","childTag",".","mutable","(",")",";","\n			childCloseTag",".","getXmlTag","(",")",".","setType","(","TagType",".","CLOSE",")",";","\n			childCloseTag",".","setMarkupClass","(","markupClass",")",";","\n			childCloseTag",".","setOpenTag","(","childTag",")",";","\n			addMarkupElement","(","childCloseTag",")",";","\n		","}","\n\n		for","(","baseIndex++",";","baseIndex","<","baseMarkup",".","size","(",")",";","baseIndex++",")","\n		","{","\n			MarkupElement","element","=","baseMarkup",".","get","(","baseIndex",")",";","\n			addMarkupElement","(","element",")",";","\n\n			//","Make","sure","all","tags","of","the","base","markup","remember","where","they","are\n			//","from\n			if","(","element","instanceof","ComponentTag","&&","resource","!=","null",")","\n			","{","\n				ComponentTag","tag","=","(","ComponentTag",")","element",";","\n				if","(","tag",".","getMarkupClass","(",")","==","null",")","{","\n					tag",".","setMarkupClass","(","markupClass",")",";","\n				","}","\n			","}","\n		","}","\n\n		//","Automatically","add","<head>","if","missing","and","required",".","On","a","Page\n		//","it","must","enclose","ALL","of","the","<wicket:head>","tags",".","\n		//","Note:","HtmlHeaderSectionHandler","does","something","similar,","but","because\n		//","markup","filters","are","not","called","for","merged","markup","again,",".",".",".","\n		if","(","Page",".","class",".","isAssignableFrom","(","markup",".","getMarkupResourceStream","(",")",".","getMarkupClass","(",")",")",")","\n		","{","\n			//","Find","the","position","inside","the","markup","for","first","<wicket:head>,\n			//","last","</wicket:head>","and","<head>\n			int","hasOpenWicketHead","=","-1",";","\n			int","hasCloseWicketHead","=","-1",";","\n			int","hasHead","=","-1",";","\n			for","(","int","i","=","0",";","i","<","size","(",")",";","i++",")","\n			","{","\n				MarkupElement","element","=","get","(","i",")",";","\n\n				boolean","isHeadTag","=","(","element","instanceof","WicketTag",")","&&","(","(","WicketTag",")","element",")",".","isHeadTag","(",")",";","\n				if","(","(","hasOpenWicketHead","==","-1",")","&&","isHeadTag",")","\n				","{","\n					hasOpenWicketHead","=","i",";","\n				","}","\n				else","if","(","isHeadTag","&&","(","(","ComponentTag",")","element",")",".","isClose","(",")",")","\n				","{","\n					hasCloseWicketHead","=","i",";","\n				","}","\n				else","if","(","(","hasHead","==","-1",")","&&","(","element","instanceof","ComponentTag",")","&&\n					TagUtils",".","isHeadTag","(","element",")",")","\n				","{","\n					hasHead","=","i",";","\n				","}","\n				else","if","(","(","hasHead","!=","-1",")","&&","(","hasOpenWicketHead","!=","-1",")",")","\n				","{","\n					break",";","\n				","}","\n			","}","\n\n			//","If","a","<head>","tag","is","missing,","insert","it","automatically\n			if","(","(","hasOpenWicketHead","!=","-1",")","&&","(","hasHead","==","-1",")",")","\n			","{","\n				final","XmlTag","headOpenTag","=","new","XmlTag","(",")",";","\n				headOpenTag",".","setName","(","\"head\"",")",";","\n				headOpenTag",".","setType","(","TagType",".","OPEN",")",";","\n				final","ComponentTag","openTag","=","new","ComponentTag","(","headOpenTag",")",";","\n				openTag",".","setId","(","HtmlHeaderSectionHandler",".","HEADER_ID",")",";","\n				openTag",".","setAutoComponentTag","(","true",")",";","\n\n				final","XmlTag","headCloseTag","=","new","XmlTag","(",")",";","\n				headCloseTag",".","setName","(","headOpenTag",".","getName","(",")",")",";","\n				headCloseTag",".","setType","(","TagType",".","CLOSE",")",";","\n				final","ComponentTag","closeTag","=","new","ComponentTag","(","headCloseTag",")",";","\n				closeTag",".","setOpenTag","(","openTag",")",";","\n				closeTag",".","setId","(","HtmlHeaderSectionHandler",".","HEADER_ID",")",";","\n\n				addMarkupElement","(","hasOpenWicketHead,","openTag",")",";","\n				addMarkupElement","(","hasCloseWicketHead","+","2,","closeTag",")",";","\n			","}","\n		","}","\n	"],"docstring_tokens":["Merge","inherited","and","base","markup"],"prompt_tokens":[]}
{"code_tokens":["\n	public","PatternValidator","setReverse","(","boolean","reverse",")","\n	","{","\n		this",".","reverse","=","reverse",";","\n		return","this",";","\n	"],"docstring_tokens":["If","set","to","true","then","input","that","matches","the","pattern","is","considered","invalid"],"prompt_tokens":[]}
{"code_tokens":["\n	protected","long","getSize","(","IManageablePage","page",")","\n	","{","\n		if","(","page","instanceof","SerializedPage",")","\n		","{","\n			return","(","(","SerializedPage",")","page",")",".","getData","(",")",".","length",";","\n		","}","\n		else\n		","{","\n			return","WicketObjects",".","sizeof","(","page",")",";","\n		","}","\n	"],"docstring_tokens":["Get","the","size","of","the","given","page"],"prompt_tokens":[]}
{"code_tokens":["\n	public","static","Url","parse","(","final","CharSequence","url",")","\n	","{","\n		return","parse","(","url,","null",")",";","\n	"],"docstring_tokens":["Parses","the","given","URL","string"],"prompt_tokens":[]}
{"code_tokens":["\n	public","List<String>","getSegments","(",")","\n	","{","\n		return","segments",";","\n	"],"docstring_tokens":["Returns","segments","of","the","URL"],"prompt_tokens":[]}
{"code_tokens":["\n	public","List<QueryParameter>","getQueryParameters","(",")","\n	","{","\n		return","parameters",";","\n	"],"docstring_tokens":["Returns","query","parameters","of","the","URL"],"prompt_tokens":[]}
{"code_tokens":["\n	public","boolean","isContextAbsolute","(",")","\n	","{","\n		return","!contextRelative","&&","!isFull","(",")","&&","!getSegments","(",")",".","isEmpty","(",")","&&","Strings",".","isEmpty","(","getSegments","(",")",".","get","(","0",")",")",";","\n	"],"docstring_tokens":["Returns","whether","the","Url","is","context","absolute"],"prompt_tokens":[]}
{"code_tokens":["\n	public","void","setContextRelative","(","boolean","contextRelative",")","\n	","{","\n		this",".","contextRelative","=","contextRelative",";","\n	"],"docstring_tokens":["Flags","the","URL","as","relative","to","the","application","context"],"prompt_tokens":[]}
{"code_tokens":["\n	public","Integer","getPort","(",")","\n	","{","\n		return","port",";","\n	"],"docstring_tokens":["Gets","the","port","of","this","url"],"prompt_tokens":[]}
{"code_tokens":["\n	public","void","setPort","(","final","Integer","port",")","\n	","{","\n		this",".","port","=","port",";","\n	"],"docstring_tokens":["Sets","the","port","of","this","url"],"prompt_tokens":[]}
{"code_tokens":["\n	public","String","getHost","(",")","\n	","{","\n		return","host",";","\n	"],"docstring_tokens":["Gets","the","host","name","of","this","url"],"prompt_tokens":[]}
{"code_tokens":["\n	public","void","setHost","(","final","String","host",")","\n	","{","\n		this",".","host","=","host",";","\n	"],"docstring_tokens":["Sets","the","host","name","of","this","url"],"prompt_tokens":[]}
{"code_tokens":["\n	public","String","getPath","(","Charset","charset",")","\n	","{","\n		Args",".","notNull","(","charset,","\"charset\"",")",";","\n\n		StringBuilder","path","=","new","StringBuilder","(",")",";","\n		boolean","slash","=","false",";","\n\n		for","(","String","segment",":","getSegments","(",")",")","\n		","{","\n			if","(","slash",")","\n			","{","\n				path",".","append","(","'/'",")",";","\n			","}","\n			path",".","append","(","encodeSegment","(","segment,","charset",")",")",";","\n			slash","=","true",";","\n		","}","\n		return","path",".","toString","(",")",";","\n	"],"docstring_tokens":["return","path","for","current","url","in","given","encoding"],"prompt_tokens":[]}
{"code_tokens":["\n	public","String","getPath","(",")","\n	","{","\n		return","getPath","(","getCharset","(",")",")",";","\n	"],"docstring_tokens":["return","path","for","current","url","in","original","encoding"],"prompt_tokens":[]}
{"code_tokens":["\n	public","String","getQueryString","(","Charset","charset",")","\n	","{","\n		Args",".","notNull","(","charset,","\"charset\"",")",";","\n\n		String","queryString","=","null",";","\n		List<QueryParameter>","queryParameters","=","getQueryParameters","(",")",";","\n\n		if","(","queryParameters",".","size","(",")","!=","0",")","\n		","{","\n			StringBuilder","query","=","new","StringBuilder","(",")",";","\n\n			for","(","QueryParameter","parameter",":","queryParameters",")","\n			","{","\n				if","(","query",".","length","(",")","!=","0",")","\n				","{","\n					query",".","append","(","'&'",")",";","\n				","}","\n				query",".","append","(","parameter",".","toString","(","charset",")",")",";","\n			","}","\n			queryString","=","query",".","toString","(",")",";","\n		","}","\n		return","queryString",";","\n	"],"docstring_tokens":["return","query","string","part","of","url","in","given","encoding"],"prompt_tokens":[]}
{"code_tokens":["\n	public","String","getQueryString","(",")","\n	","{","\n		return","getQueryString","(","getCharset","(",")",")",";","\n	"],"docstring_tokens":["return","query","string","part","of","url","in","original","encoding"],"prompt_tokens":[]}
{"code_tokens":["\n	public","static","<R>","R","visitComponentsPostOrder","(","Component","component,\n		final","org",".","apache",".","wicket",".","util",".","visit",".","IVisitor<Component,","R>","visitor",")","\n	","{","\n		Args",".","notNull","(","visitor,","\"visitor\"",")",";","\n\n		return","Visits",".","visitPostOrder","(","component,","visitor,","new","IVisitFilter","(",")","\n		","{","\n			@Override\n			public","boolean","visitObject","(","Object","object",")","\n			","{","\n				return","true",";","\n			","}","\n\n			@Override\n			public","boolean","visitChildren","(","Object","object",")","\n			","{","\n				if","(","object","instanceof","IFormVisitorParticipant",")","\n				","{","\n					return","(","(","IFormVisitorParticipant",")","object",")",".","processChildren","(",")",";","\n				","}","\n				return","true",";","\n			","}","\n\n		","}",")",";","\n	"],"docstring_tokens":["Visits","any","form","components","inside","component","if","it","is","a","container,","or","component","itself","if","it	","is","itself","a","form","component"],"prompt_tokens":[]}
{"code_tokens":["\n	@SuppressWarnings","(","{","\"rawtypes\",","\"unchecked\"","}",")","\n	public","final","FormComponent<T>","add","(","final","IValidator<?","super","T>","validator",")","\n	","{","\n		Args",".","notNull","(","validator,","\"validator\"",")",";","\n\n		if","(","validator","instanceof","Behavior",")","\n		","{","\n			add","(","(","Behavior",")","validator",")",";","\n		","}","\n		else\n		","{","\n			add","(","(","Behavior",")","new","ValidatorAdapter","(","validator",")",")",";","\n		","}","\n		return","this",";","\n	"],"docstring_tokens":["Adds","a","validator","to","this","form","component"],"prompt_tokens":[]}
{"code_tokens":["\n	public","final","FormComponent<T>","remove","(","final","IValidator<?","super","T>","validator",")","\n	","{","\n		Args",".","notNull","(","validator,","\"validator\"",")",";","\n		Behavior","match","=","null",";","\n		for","(","Behavior","behavior",":","getBehaviors","(",")",")","\n		","{","\n			if","(","behavior",".","equals","(","validator",")",")","\n			","{","\n				match","=","behavior",";","\n				break",";","\n			","}","\n			else","if","(","behavior","instanceof","ValidatorAdapter",")","\n			","{","\n				if","(","(","(","ValidatorAdapter<?>",")","behavior",")",".","getValidator","(",")",".","equals","(","validator",")",")","\n				","{","\n					match","=","behavior",";","\n					break",";","\n				","}","\n			","}","\n		","}","\n\n		if","(","match","!=","null",")","\n		","{","\n			remove","(","match",")",";","\n		","}","\n		else\n		","{","\n			throw","new","IllegalStateException","(","\n				\"Tried","to","remove","validator","that","was","not","previously","added",".","\"\n					+","\"Make","sure","your","validator's","equals","(",")","implementation","is","sufficient\"",")",";","\n		","}","\n		return","this",";","\n	"],"docstring_tokens":["Removes","a","validator","from","the","form","component"],"prompt_tokens":[]}
{"code_tokens":["\n	public","String","getInput","(",")","\n	","{","\n		String[]","input","=","getInputAsArray","(",")",";","\n		if","(","input","==","null","||","input",".","length","==","0",")","\n		","{","\n			return","null",";","\n		","}","\n		else\n		","{","\n			return","trim","(","input[0]",")",";","\n		","}","\n	"],"docstring_tokens":["Gets","the","request","parameter","for","this","component","as","a","string"],"prompt_tokens":[]}
{"code_tokens":["\n	public","String[]","getInputAsArray","(",")","\n	","{","\n		List<StringValue>","list","=","getParameterValues","(","getInputName","(",")",")",";","\n\n		String[]","values","=","null",";","\n		if","(","list","!=","null",")","\n		","{","\n			values","=","new","String[list",".","size","(",")","]",";","\n			for","(","int","i","=","0",";","i","<","list",".","size","(",")",";","++i",")","\n			","{","\n				values[i]","=","list",".","get","(","i",")",".","toString","(",")",";","\n			","}","\n		","}","\n\n		if","(","!isInputNullable","(",")",")","\n		","{","\n			if","(","values","!=","null","&&","values",".","length","==","1","&&","values[0]","==","null",")","\n			","{","\n				//","the","key","got","passed","in","(","otherwise","values","would","be","null",")",",\n				//","but","the","value","was","set","to","null",".","\n				//","As","the","servlet","spec","isn't","clear","on","what","to","do","with","'empty'\n				//","request","values","-","most","return","an","empty","string,","but","some","null","-\n				//","we","have","to","workaround","here","and","deliberately","set","to","an","empty\n				//","string","if","the","component","is","not","nullable","(","text","components",")","\n				return","EMPTY_STRING_ARRAY",";","\n			","}","\n		","}","\n		return","values",";","\n	"],"docstring_tokens":["Gets","the","request","parameters","for","this","component","as","strings"],"prompt_tokens":[]}
{"code_tokens":["\n	@SuppressWarnings","(","\"unchecked\"",")","\n	public","final","List<IValidator<?","super","T>>","getValidators","(",")","\n	","{","\n		final","List<IValidator<?","super","T>>","list","=","new","ArrayList<>","(",")",";","\n\n		for","(","Behavior","behavior",":","getBehaviors","(",")",")","\n		","{","\n			if","(","behavior","instanceof","IValidator",")","\n			","{","\n				list",".","add","(","(","IValidator<?","super","T>",")","behavior",")",";","\n			","}","\n		","}","\n\n		return","Collections",".","unmodifiableList","(","list",")",";","\n	"],"docstring_tokens":["Gets","an","unmodifiable","list","of","validators","for","this","FormComponent"],"prompt_tokens":[]}
{"code_tokens":["\n	public","final","boolean","hasRawInput","(",")","\n	","{","\n		return","!NO_RAW_INPUT",".","equals","(","rawInput",")",";","\n	"],"docstring_tokens":["Returns","whether","this","component","has","raw","input"],"prompt_tokens":[]}
{"code_tokens":["\n	public","final","void","inputChanged","(",")","\n	","{","\n		if","(","isVisibleInHierarchy","(",")","&&","isEnabledInHierarchy","(",")",")","\n		","{","\n			//","Get","input","as","String","array\n			final","String[]","input","=","getInputAsArray","(",")",";","\n\n			//","If","there","is","any","input\n			if","(","input","!=","null","&&","input",".","length",">","0","&&","input[0]","!=","null",")","\n			","{","\n				//","join","the","values","together","with","\"",";","\",","for","example,","\"id1",";","id2",";","id3\"\n				rawInput","=","StringList",".","valueOf","(","input",")",".","join","(","VALUE_SEPARATOR",")",";","\n			","}","\n			else","if","(","isInputNullable","(",")",")","\n			","{","\n				//","no","input\n				rawInput","=","null",";","\n			","}","\n			else\n			","{","\n				rawInput","=","NO_RAW_INPUT",";","\n			","}","\n		","}","\n	"],"docstring_tokens":["Used","by","Form","to","tell","the","FormComponent","that","a","new","user","input","is","available"],"prompt_tokens":[]}
{"code_tokens":["\n	public","final","void","invalid","(",")","\n	","{","\n		onInvalid","(",")",";","\n	"],"docstring_tokens":["Indicate","that","validation","of","this","form","component","failed"],"prompt_tokens":[]}
{"code_tokens":["\n	public","final","FormComponent<T>","setRequired","(","final","boolean","required",")","\n	","{","\n		if","(","!required","&&","getType","(",")","!=","null","&&","getType","(",")",".","isPrimitive","(",")",")","\n		","{","\n			throw","new","WicketRuntimeException","(","\n				\"FormComponent","has","to","be","required","when","the","type","is","primitive","class:","\"","+","this",")",";","\n		","}","\n		if","(","required","!=","isRequired","(",")",")","\n		","{","\n			addStateChange","(",")",";","\n		","}","\n		setFlag","(","FLAG_REQUIRED,","required",")",";","\n		return","this",";","\n	"],"docstring_tokens":["Sets","the","required","flag"],"prompt_tokens":[]}
{"code_tokens":["\n	public","FormComponent<T>","setType","(","Class<?>","type",")","\n	","{","\n		typeName","=","type","==","null","?","null",":","type",".","getName","(",")",";","\n		if","(","type","!=","null","&&","type",".","isPrimitive","(",")",")","\n		","{","\n			setRequired","(","true",")",";","\n		","}","\n		return","this",";","\n	"],"docstring_tokens":["Sets","the","type","that","will","be","used","when","updating","the","model","for","this","component"],"prompt_tokens":[]}
{"code_tokens":["\n	protected","final","int","inputAsInt","(",")","\n	","{","\n		final","String","string","=","getInput","(",")",";","\n		try\n		","{","\n			return","Integer",".","parseInt","(","string",")",";","\n		","}","\n		catch","(","NumberFormatException","e",")","\n		","{","\n			throw","new","IllegalArgumentException","(","\n				exceptionMessage","(","\"Internal","error",".","Request","string","'\"","+","string","+\n					\"'","not","a","valid","integer\"",")",")",";","\n		","}","\n	"],"docstring_tokens":["Gets","the","request","parameter","for","this","component","as","an","int"],"prompt_tokens":[]}
{"code_tokens":["\n	protected","final","int[]","inputAsIntArray","(",")","\n	","{","\n		final","String[]","strings","=","getInputAsArray","(",")",";","\n		if","(","strings","!=","null",")","\n		","{","\n			final","int[]","ints","=","new","int[strings",".","length]",";","\n			for","(","int","i","=","0",";","i","<","strings",".","length",";","i++",")","\n			","{","\n				ints[i]","=","Integer",".","parseInt","(","strings[i]",")",";","\n			","}","\n			return","ints",";","\n		","}","\n		return","null",";","\n	"],"docstring_tokens":["Gets","the","request","parameters","for","this","component","as","ints"],"prompt_tokens":[]}
{"code_tokens":["\n	protected","boolean","shouldTrimInput","(",")","\n	","{","\n		return","true",";","\n	"],"docstring_tokens":["Determines","whether","or","not","this","component","should","trim","its","input","prior","to","processing","it"],"prompt_tokens":[]}
{"code_tokens":["\n	protected","final","void","validateRequired","(",")","\n	","{","\n		if","(","!checkRequired","(",")",")","\n		","{","\n			reportRequiredError","(",")",";","\n		","}","\n	"],"docstring_tokens":["Checks","if","the","raw","input","value","is","not","null","if","this","component","is","required"],"prompt_tokens":[]}
{"code_tokens":["\n	protected","void","reportRequiredError","(",")","\n	","{","\n		error","(","new","ValidationError","(",")",".","addKey","(","\"Required\"",")",")",";","\n	"],"docstring_tokens":["Reports","required","error","against","this","component"],"prompt_tokens":[]}
{"code_tokens":["\n	protected","Scheme","getDesiredSchemeFor","(","IRequestHandler","handler",")","\n	","{","\n		if","(","handler","instanceof","IPageClassRequestHandler",")","\n		","{","\n			return","getDesiredSchemeFor","(","(","(","IPageClassRequestHandler",")","handler",")",".","getPageClass","(",")",")",";","\n		","}","\n		return","Scheme",".","ANY",";","\n	"],"docstring_tokens":["Figures","out","which","Scheme","should","be","used","to","access","the","request","handler"],"prompt_tokens":[]}
{"code_tokens":["\n	protected","Scheme","getSchemeOf","(","Request","request",")","\n	","{","\n		HttpServletRequest","req","=","(","HttpServletRequest",")","request",".","getContainerRequest","(",")",";","\n\n		if","(","\"https\"",".","equalsIgnoreCase","(","req",".","getScheme","(",")",")",")","\n		","{","\n			return","Scheme",".","HTTPS",";","\n		","}","\n		else","if","(","\"http\"",".","equalsIgnoreCase","(","req",".","getScheme","(",")",")",")","\n		","{","\n			return","Scheme",".","HTTP",";","\n		","}","\n		else\n		","{","\n			throw","new","IllegalStateException","(","\"Could","not","resolve","protocol","for","request:","\"","+","req",")",";","\n		","}","\n	"],"docstring_tokens":["Determines","the","Scheme","of","the","request"],"prompt_tokens":[]}
{"code_tokens":["\n	protected","Scheme","getDesiredSchemeFor","(","Class<?","extends","IRequestablePage>","pageClass",")","\n	","{","\n		if","(","pageClass","==","null",")","\n		","{","\n			return","Scheme",".","ANY",";","\n		","}","\n\n		Scheme","SCHEME","=","cache",".","get","(","pageClass",")",";","\n		if","(","SCHEME","==","null",")","\n		","{","\n			if","(","hasSecureAnnotation","(","pageClass",")",")","\n			","{","\n				SCHEME","=","Scheme",".","HTTPS",";","\n			","}","\n			else\n			","{","\n				SCHEME","=","Scheme",".","HTTP",";","\n			","}","\n			cache",".","put","(","pageClass,","SCHEME",")",";","\n		","}","\n		return","SCHEME",";","\n	"],"docstring_tokens":["Determines","which","Scheme","should","be","used","to","access","the","page"],"prompt_tokens":[]}
{"code_tokens":["\r\n	public","final","int","getLength","(",")","\r\n	","{","\r\n		return","xmlTag",".","getLength","(",")",";","\r\n	"],"docstring_tokens":["Gets","the","length","of","the","tag","in","characters"],"prompt_tokens":[]}
{"code_tokens":["\r\n	void","copyPropertiesTo","(","final","HtmlSpecialTag","dest",")","\r\n	","{","\r\n		dest",".","flags","=","flags",";","\r\n	"],"docstring_tokens":["Copies","all","internal","properties","from","this","tag","to","dest"],"prompt_tokens":[]}
{"code_tokens":["\r\n	public","final","void","writeOutput","(","final","Response","response,","final","boolean","stripWicketAttributes,\r\n		final","String","namespace",")","\r\n	","{","\r\n		response",".","write","(","toString","(",")",")",";","\r\n	"],"docstring_tokens":["Write","the","tag","to","the","response"],"prompt_tokens":[]}
{"code_tokens":["\n	@Override\n	public","void","detachModels","(",")","\n	","{","\n		super",".","detachModels","(",")",";","\n	"],"docstring_tokens":["Detaches","any","attached","models","referenced","by","this","page"],"prompt_tokens":[]}
{"code_tokens":["\n	final","void","endComponentRender","(","Component","component",")","\n	","{","\n		if","(","component","instanceof","MarkupContainer",")","\n		","{","\n			checkRendering","(","(","MarkupContainer",")","component",")",";","\n		","}","\n		else\n		","{","\n			renderedComponents","=","null",";","\n		","}","\n	"],"docstring_tokens":["This","method","is","called","when","a","component","was","rendered","as","a","part"],"prompt_tokens":[]}
{"code_tokens":["\n	@Override\n	public","boolean","isBookmarkable","(",")","\n	","{","\n		return","getApplication","(",")",".","getPageFactory","(",")",".","isBookmarkable","(","getClass","(",")",")",";","\n	"],"docstring_tokens":["Bookmarkable","page","can","be","instantiated","using","a","bookmarkable","URL"],"prompt_tokens":[]}
{"code_tokens":["\n	final","void","startComponentRender","(","Component","component",")","\n	","{","\n		renderedComponents","=","null",";","\n	"],"docstring_tokens":["This","method","is","called","when","a","component","will","be","rendered","as","a","part"],"prompt_tokens":[]}
{"code_tokens":["\n	private","void","checkRendering","(","final","MarkupContainer","renderedContainer",")","\n	","{","\n		//","If","the","application","wants","component","uses","checked","and\n		//","the","response","is","not","a","redirect\n		final","DebugSettings","debugSettings","=","getApplication","(",")",".","getDebugSettings","(",")",";","\n		if","(","debugSettings",".","getComponentUseCheck","(",")",")","\n		","{","\n			final","List<Component>","unrenderedComponents","=","new","ArrayList<Component>","(",")",";","\n			final","StringBuilder","buffer","=","new","StringBuilder","(",")",";","\n			renderedContainer",".","visitChildren","(","new","IVisitor<Component,","Void>","(",")","\n			","{","\n				@Override\n				public","void","component","(","final","Component","component,","final","IVisit<Void>","visit",")","\n				","{","\n					//","If","component","never","rendered\n					if","(","renderedComponents","==","null","||","!renderedComponents",".","contains","(","component",")",")","\n					","{","\n						//","If","not","an","auto","component",".",".",".","\n						if","(","!component",".","isAuto","(",")","&&","component",".","isVisibleInHierarchy","(",")",")","\n						","{","\n							//","Increase","number","of","unrendered","components\n							unrenderedComponents",".","add","(","component",")",";","\n\n							//","Add","to","explanatory","string","to","buffer\n							buffer",".","append","(","Integer",".","toString","(","unrenderedComponents",".","size","(",")",")",")","\n								",".","append","(","\"",".","\"",")","\n								",".","append","(","component",".","toString","(","true",")",")","\n								",".","append","(","'\\n'",")",";","\n							String","metadata","=","component",".","getMetaData","(","Component",".","CONSTRUCTED_AT_KEY",")",";","\n							if","(","metadata","!=","null",")","\n							","{","\n								buffer",".","append","(","metadata",")",".","append","(","'\\n'",")",";","\n							","}","\n							metadata","=","component",".","getMetaData","(","Component",".","ADDED_AT_KEY",")",";","\n							if","(","metadata","!=","null",")","\n							","{","\n								buffer",".","append","(","metadata",")",".","append","(","'\\n'",")",";","\n							","}","\n						","}","\n						else\n						","{","\n							//","if","the","component","is","not","visible","in","hierarchy","we\n							//","should","not","visit","its","children","since","they","are","also\n							//","not","visible\n							visit",".","dontGoDeeper","(",")",";","\n						","}","\n					","}","\n				","}","\n			","}",")",";","\n\n			//","Throw","exception","if","any","errors","were","found\n			if","(","unrenderedComponents",".","size","(",")",">","0",")","\n			","{","\n				renderedComponents","=","null",";","\n\n				List<Component>","transparentContainerChildren","=","Generics",".","newArrayList","(",")",";","\n\n				Iterator<Component>","iterator","=","unrenderedComponents",".","iterator","(",")",";","\n				outerWhile",":","while","(","iterator",".","hasNext","(",")",")","\n				","{","\n					Component","component","=","iterator",".","next","(",")",";","\n\n					//","If","any","of","the","transparentContainerChildren","is","a","parent","to","component,","then\n					//","ignore","it",".","\n					for","(","Component","transparentContainerChild",":","transparentContainerChildren",")","\n					","{","\n						MarkupContainer","parent","=","component",".","getParent","(",")",";","\n						while","(","parent","!=","null",")","\n						","{","\n							if","(","parent","==","transparentContainerChild",")","\n							","{","\n								iterator",".","remove","(",")",";","\n								continue","outerWhile",";","\n							","}","\n							parent","=","parent",".","getParent","(",")",";","\n						","}","\n					","}","\n\n					if","(","hasInvisibleTransparentChild","(","component",".","getParent","(",")",",","component",")",")","\n					","{","\n						//","If","we","found","a","transparent","container","that","isn't","visible","then","ignore","this\n						//","component","and","only","do","a","debug","statement","here",".","\n						if","(","log",".","isDebugEnabled","(",")",")","\n						","{","\n							log",".","debug","(","\n								\"Component","{","}","wasn't","rendered","but","might","have","a","transparent","parent",".","\",\n								component",")",";","\n						","}","\n\n						transparentContainerChildren",".","add","(","component",")",";","\n						iterator",".","remove","(",")",";","\n						continue","outerWhile",";","\n					","}","\n				","}","\n\n				//","if","still",">","0\n				if","(","unrenderedComponents",".","size","(",")",">","0",")","\n				","{","\n					//","Throw","exception\n					throw","new","WicketRuntimeException","(","\n						\"The","component","(","s",")","below","failed","to","render",".","Possible","reasons","could","be","that:\\n\\t1",")","you","have","added","a","component","in","code","but","forgot","to","reference","it","in","the","markup","(","thus","the","component","will","never","be","rendered",")",",\\n\\t2",")","if","your","components","were","added","in","a","parent","container","then","make","sure","the","markup","for","the","child","container","includes","them","in","<wicket:extend>",".","\\n\\n\"","+\n							buffer",".","toString","(",")",")",";","\n				","}","\n			","}","\n		","}","\n\n		//","Get","rid","of","set\n		renderedComponents","=","null",";","\n	"],"docstring_tokens":["Throw","an","exception","if","not","all","components","rendered"],"prompt_tokens":[]}
{"code_tokens":["\n	@Override\n	void","init","(",")","\n	","{","\n		if","(","isBookmarkable","(",")","==","false",")","\n		","{","\n			setStatelessHint","(","false",")",";","\n		","}","\n\n		//","Set","versioning","of","page","based","on","default\n		setVersioned","(","getApplication","(",")",".","getPageSettings","(",")",".","getVersionPagesByDefault","(",")",")",";","\n\n		//","All","Pages","are","born","dirty","so","they","get","clustered","right","away\n		dirty","(","true",")",";","\n\n		//","this","is","a","bit","of","a","dirty","hack,","but","calling","dirty","(","true",")","results","in","isStateless","called\n		//","which","is","bound","to","set","the","stateless","cache","to","true","as","there","are","no","components","yet\n		stateless","=","null",";","\n	"],"docstring_tokens":["Initializes","Page","by","adding","it","to","the","Session","and","initializing","it"],"prompt_tokens":[]}
{"code_tokens":["\n	@Override\n	public","final","boolean","wasCreatedBookmarkable","(",")","\n	","{","\n		return","getFlag","(","FLAG_WAS_CREATED_BOOKMARKABLE",")",";","\n	"],"docstring_tokens":["Checks","if","this","page","was","created","using","one","of","its","bookmarkable","constructors"],"prompt_tokens":[]}
{"code_tokens":["\n	@Override\n	public","String","getRealPath","(","String","name",")","\n	","{","\n		try","{","\n			URL","url","=","getResource","(","name",")",";","\n			if","(","url","!=","null",")","{","\n				//","WICKET-6755","do","not","use","url",".","getFile","(",")","as","it","does","not","properly","decode","the","path\n				return","new","File","(","url",".","toURI","(",")",")",".","getAbsolutePath","(",")",";","\n			","}","\n		","}","catch","(","IOException","|","URISyntaxException","e",")","{","\n			log",".","error","(","e",".","getMessage","(",")",",","e",")",";","\n		","}","\n		return","null",";","\n	"],"docstring_tokens":["Get","the","real","file","path","of","the","given","resource","name"],"prompt_tokens":[]}
{"code_tokens":["\n	public","Object","getBeansToInject","(",")","\n	","{","\n		if","(","beansToInjectMap","!=","null","&&","beansToInjectMap",".","size","(",")",">","0",")","\n		","{","\n			return","beansToInjectMap",";","\n		","}","\n		\n		if","(","beansToInjectColl","!=","null","&&","beansToInjectColl",".","size","(",")",">","0",")","\n		","{","\n			return","beansToInjectColl",";","\n		","}","\n		\n		return","null",";","\n	"],"docstring_tokens":["Returns","an","instance","containing","all","the","beans","collected","for","the","field","and	","compatible","with","the","type","of","the","field"],"prompt_tokens":[]}
{"code_tokens":["\n	public","CharSequence","getText","(",")","\n	","{","\n		if","(","dataStream","!=","null",")","\n		","{","\n			throw","new","IllegalStateException","(","\"write","(","byte[]",")","has","already","been","called",".","\"",")",";","\n		","}","\n		if","(","charSequenceBuilder","!=","null",")","\n		","{","\n			return","charSequenceBuilder",";","\n		","}","\n		else\n		","{","\n			return","null",";","\n		","}","\n	"],"docstring_tokens":["Returns","the","text","already","written","to","this","response"],"prompt_tokens":[]}
{"code_tokens":["\n	public","void","setText","(","CharSequence","text",")","\n	","{","\n		if","(","dataStream","!=","null",")","\n		","{","\n			throw","new","IllegalStateException","(","\"write","(","byte[]",")","has","already","been","called",".","\"",")",";","\n		","}","\n		if","(","charSequenceBuilder","!=","null",")","\n		","{","\n			charSequenceBuilder",".","setLength","(","0",")",";","\n		","}","\n		write","(","text",")",";","\n	"],"docstring_tokens":["Replaces","the","text","in","this","response"],"prompt_tokens":[]}
{"code_tokens":["\n	public","void","writeTo","(","final","WebResponse","response",")","\n	","{","\n		Args",".","notNull","(","response,","\"response\"",")",";","\n\n		Collections",".","sort","(","actions",")",";","\n\n		for","(","Action","action",":","actions",")","\n		","{","\n			action",".","invoke","(","response",")",";","\n		","}","\n	"],"docstring_tokens":["Writes","the","content","of","the","buffer","to","the","specified","response"],"prompt_tokens":[]}
{"code_tokens":["\r\n	public","static","Duration","days","(","final","double","days",")","\r\n	","{","\r\n		return","hours","(","24",".","0","*","days",")",";","\r\n	"],"docstring_tokens":["Retrieves","the","Duration","based","on","days"],"prompt_tokens":[]}
{"code_tokens":["\r\n	public","static","Duration","elapsed","(","final","Time","start",")","\r\n	","{","\r\n		return","start",".","elapsedSince","(",")",";","\r\n	"],"docstring_tokens":["Calculates","the","amount","of","time","elapsed","since","start","time"],"prompt_tokens":[]}
{"code_tokens":["\r\n	public","static","Duration","hours","(","final","double","hours",")","\r\n	","{","\r\n		return","minutes","(","60",".","0","*","hours",")",";","\r\n	"],"docstring_tokens":["Retrieves","the","Duration","based","on","hours"],"prompt_tokens":[]}
{"code_tokens":["\r\n	public","static","Duration","milliseconds","(","final","double","milliseconds",")","\r\n	","{","\r\n		return","milliseconds","(","Math",".","round","(","milliseconds",")",")",";","\r\n	"],"docstring_tokens":["Retrieves","the","Duration","based","on","milliseconds"],"prompt_tokens":[]}
{"code_tokens":["\r\n	public","static","Duration","minutes","(","final","double","minutes",")","\r\n	","{","\r\n		return","seconds","(","60",".","0","*","minutes",")",";","\r\n	"],"docstring_tokens":["Retrieves","the","Duration","based","on","minutes"],"prompt_tokens":[]}
{"code_tokens":["\r\n	public","static","Duration","seconds","(","final","double","seconds",")","\r\n	","{","\r\n		return","milliseconds","(","seconds","*","1000",".","0",")",";","\r\n	"],"docstring_tokens":["Retrieves","the","Duration","based","on","seconds"],"prompt_tokens":[]}
{"code_tokens":["\r\n	public","static","Duration","valueOf","(","final","long","time",")","\r\n	","{","\r\n		return","new","Duration","(","time",")",";","\r\n	"],"docstring_tokens":["Retrieves","the","given","long","as","a","Duration"],"prompt_tokens":[]}
{"code_tokens":["\r\n	public","Duration","add","(","final","Duration","duration",")","\r\n	","{","\r\n		return","valueOf","(","getMilliseconds","(",")","+","duration",".","getMilliseconds","(",")",")",";","\r\n	"],"docstring_tokens":["Adds","a","given","Duration","to","this","Duration"],"prompt_tokens":[]}
{"code_tokens":["\r\n	public","final","double","days","(",")","\r\n	","{","\r\n		return","hours","(",")","/","24",".","0",";","\r\n	"],"docstring_tokens":["Retrieves","the","number","of","days","of","the","current","Duration"],"prompt_tokens":[]}
{"code_tokens":["\r\n	public","final","double","hours","(",")","\r\n	","{","\r\n		return","minutes","(",")","/","60",".","0",";","\r\n	"],"docstring_tokens":["Retrieves","the","number","of","hours","of","the","current","Duration"],"prompt_tokens":[]}
{"code_tokens":["\r\n	public","final","double","minutes","(",")","\r\n	","{","\r\n		return","seconds","(",")","/","60",".","0",";","\r\n	"],"docstring_tokens":["Retrieves","the","number","of","minutes","of","the","current","Duration"],"prompt_tokens":[]}
{"code_tokens":["\r\n	public","final","double","seconds","(",")","\r\n	","{","\r\n		return","getMilliseconds","(",")","/","1000",".","0",";","\r\n	"],"docstring_tokens":["Retrieves","the","number","of","seconds","of","the","current","Duration"],"prompt_tokens":[]}
{"code_tokens":["\r\n	public","final","void","sleep","(",")","\r\n	","{","\r\n		if","(","getMilliseconds","(",")",">","0",")","\r\n		","{","\r\n			try\r\n			","{","\r\n				Thread",".","sleep","(","getMilliseconds","(",")",")",";","\r\n			","}","\r\n			catch","(","InterruptedException","e",")","\r\n			","{","\r\n				//","Ignored\r\n			","}","\r\n		","}","\r\n	"],"docstring_tokens":["Sleeps","for","the","current","Duration"],"prompt_tokens":[]}
{"code_tokens":["\r\n	public","Duration","subtract","(","final","Duration","that",")","\r\n	","{","\r\n		return","valueOf","(","getMilliseconds","(",")","-","that",".","getMilliseconds","(",")",")",";","\r\n	"],"docstring_tokens":["Subtracts","a","given","Duration","from","this","Duration"],"prompt_tokens":[]}
{"code_tokens":["\r\n	public","void","wait","(","final","Object","object",")","\r\n	","{","\r\n		try\r\n		","{","\r\n			object",".","wait","(","getMilliseconds","(",")",")",";","\r\n		","}","\r\n		catch","(","InterruptedException","e",")","\r\n		","{","\r\n			throw","new","RuntimeException","(","e",")",";","\r\n		","}","\r\n	"],"docstring_tokens":["Wait","for","this","duration","on","the","given","monitor"],"prompt_tokens":[]}
{"code_tokens":["\r\n	public","String","toString","(","final","Locale","locale",")","\r\n	","{","\r\n		if","(","getMilliseconds","(",")",">=","0",")","\r\n		","{","\r\n			if","(","days","(",")",">=","1",".","0",")","\r\n			","{","\r\n				return","unitString","(","days","(",")",",","\"day\",","locale",")",";","\r\n			","}","\r\n\r\n			if","(","hours","(",")",">=","1",".","0",")","\r\n			","{","\r\n				return","unitString","(","hours","(",")",",","\"hour\",","locale",")",";","\r\n			","}","\r\n\r\n			if","(","minutes","(",")",">=","1",".","0",")","\r\n			","{","\r\n				return","unitString","(","minutes","(",")",",","\"minute\",","locale",")",";","\r\n			","}","\r\n\r\n			if","(","seconds","(",")",">=","1",".","0",")","\r\n			","{","\r\n				return","unitString","(","seconds","(",")",",","\"second\",","locale",")",";","\r\n			","}","\r\n\r\n			return","unitString","(","getMilliseconds","(",")",",","\"millisecond\",","locale",")",";","\r\n		","}","\r\n		else\r\n		","{","\r\n			return","\"N/A\"",";","\r\n		","}","\r\n	"],"docstring_tokens":["Retrieves","the","String","representation","of","this","Duration","in","days,","	","hours,","minutes,","seconds","or","milliseconds,","as","appropriate"],"prompt_tokens":[]}
{"code_tokens":["\r\n	public","static","Instant","getLastModified","(","final","URL","url",")","throws","IOException\r\n	","{","\r\n		//","check","if","url","points","to","a","local","file\r\n		final","File","file","=","Files",".","getLocalFileFromUrl","(","url",")",";","\r\n\r\n		if","(","file","!=","null",")","\r\n		","{","\r\n			//","in","that","case","we","can","get","the","timestamp","faster\r\n			return","Files",".","getLastModified","(","file",")",";","\r\n		","}","\r\n\r\n		//","otherwise","open","the","url","and","proceed\r\n		URLConnection","connection","=","url",".","openConnection","(",")",";","\r\n\r\n		final","long","milliseconds",";","\r\n\r\n		try\r\n		","{","\r\n			if","(","connection","instanceof","JarURLConnection",")","\r\n			","{","\r\n				JarURLConnection","jarUrlConnection","=","(","JarURLConnection",")","connection",";","\r\n				URL","jarFileUrl","=","jarUrlConnection",".","getJarFileURL","(",")",";","\r\n				URLConnection","jarFileConnection","=","jarFileUrl",".","openConnection","(",")",";","\r\n				jarFileConnection",".","setDoInput","(","false",")",";","\r\n				//","get","timestamp","from","JAR\r\n				milliseconds","=","jarFileConnection",".","getLastModified","(",")",";","\r\n			","}","\r\n			else\r\n			","{","\r\n				//","get","timestamp","from","URL\r\n				milliseconds","=","connection",".","getLastModified","(",")",";","\r\n			","}","\r\n\r\n			//","return","null","if","timestamp","is","unavailable\r\n			if","(","milliseconds","==","0",")","\r\n			","{","\r\n				return","null",";","\r\n			","}","\r\n\r\n			//","return","UNIX","timestamp\r\n			return","Instant",".","ofEpochMilli","(","milliseconds",")",";","\r\n\r\n		","}","\r\n		finally\r\n		","{","\r\n			closeQuietly","(","connection",")",";","\r\n		","}","\r\n	"],"docstring_tokens":["Gets","last","modified","date","of","the","given","URL"],"prompt_tokens":[]}
{"code_tokens":["\n	public","final","String","getUrl","(",")","\n	","{","\n		return","uri",";","\n	"],"docstring_tokens":["Gets","the","url","to","the","external","resource"],"prompt_tokens":[]}
{"code_tokens":["\r\n	private","boolean","isParentRendering","(",")","\r\n	","{","\r\n		MarkupContainer","parent","=","getParent","(",")",";","\r\n\r\n		return","parent","!=","null","&&","parent",".","isRendering","(",")",";","\r\n	"],"docstring_tokens":["Says","if","parent","container","is","rendering","or","not"],"prompt_tokens":[]}
{"code_tokens":["\r\n	private","void","renderHeadForInnerSiblings","(","HtmlHeaderContainer","container",")","\r\n	","{","\r\n		MarkupStream","stream","=","new","MarkupStream","(","getMarkup","(",")",")",";","\r\n\r\n		while","(","stream",".","isCurrentIndexInsideTheStream","(",")",")","\r\n		","{","\r\n			MarkupElement","childOpenTag","=","stream",".","nextOpenTag","(",")",";","\r\n\r\n			if","(","(","childOpenTag","instanceof","ComponentTag",")","&&","!stream",".","atCloseTag","(",")",")","\r\n			","{","\r\n				//","Get","element","as","tag\r\n				final","ComponentTag","tag","=","(","ComponentTag",")","childOpenTag",";","\r\n\r\n				//","Get","component","id\r\n				final","String","id","=","tag",".","getId","(",")",";","\r\n\r\n				Component","component","=","null",";","\r\n\r\n				if","(","get","(","id",")","==","null",")","\r\n				","{","\r\n					component","=","ComponentResolvers",".","resolveByComponentHierarchy","(","this,","stream,","tag",")",";","\r\n				","}","\r\n\r\n				if","(","component","!=","null",")","\r\n				","{","\r\n					component",".","internalRenderHead","(","container",")",";","\r\n				","}","\r\n\r\n				//consider","just","direct","children\r\n				stream",".","skipToMatchingCloseTag","(","tag",")",";","\r\n			","}","\r\n		","}","\r\n	"],"docstring_tokens":["Renders","head","for","embedded","component,","i.e"],"prompt_tokens":[]}
{"code_tokens":["\n	protected","WebMarkupContainer","newOverlay","(","String","overlayId",")","\n	","{","\n		return","new","WebMarkupContainer","(","overlayId",")",";","\n	"],"docstring_tokens":["Factory","method","for","the","overlay","markup","around","the","dialog"],"prompt_tokens":[]}
{"code_tokens":["\n	public","ModalDialog","open","(","Component","content,","AjaxRequestTarget","target",")","\n	","{","\n		setContent","(","content",")",";","\n		removeContentOnClose","=","true",";","\n\n		overlay",".","setVisible","(","true",")",";","\n\n		if","(","target","!=","null",")","\n		","{","\n			target",".","add","(","this",")",";","\n		","}","\n\n		return","this",";","\n	"],"docstring_tokens":["Open","the","dialog","with","a","content.	","	","The","content","will","be","removed","on","close","of","the","dialog"],"prompt_tokens":[]}
{"code_tokens":["\n	public","boolean","isOpen","(",")","\n	","{","\n		return","overlay",".","isVisible","(",")",";","\n	"],"docstring_tokens":["Is","this","dialog","open"],"prompt_tokens":[]}
{"code_tokens":["\n	public","ModalDialog","closeOnEscape","(",")","\n	","{","\n		overlay",".","add","(","new","CloseBehavior","(","\"keydown\"",")","\n		","{","\n			protected","CharSequence","getPrecondition","(",")","\n			","{","\n				return","\"return","Wicket",".","Event",".","keyCode","(","attrs",".","event",")","==","27\"",";","\n			","}","\n		","}",")",";","\n		return","this",";","\n	"],"docstring_tokens":["Close","this","dialog","on","press","of","escape","key"],"prompt_tokens":[]}
{"code_tokens":["\n	public","ModalDialog","closeOnClick","(",")","\n	","{","\n		overlay",".","add","(","new","CloseBehavior","(","\"click\"",")","\n		","{","\n			protected","CharSequence","getPrecondition","(",")","\n			","{","\n				return","String",".","format","(","\"return","attrs",".","event",".","target",".","id","===","'%s'",";","\",","overlay",".","getMarkupId","(",")",")",";","\n			","}","\n		","}",")",";","\n		return","this",";","\n	"],"docstring_tokens":["Close","this","dialog","on","click","outside"],"prompt_tokens":[]}
{"code_tokens":["\r\n	public","static","String","newStringIso8859_1","(","final","byte[]","bytes",")","\r\n	","{","\r\n		return","StringUtils",".","newString","(","bytes,","CharEncoding",".","ISO_8859_1",")",";","\r\n	"],"docstring_tokens":["Constructs","a","new","String","by","decoding","the","specified","array","of","bytes","using","the","	","ISO-8859-1","charset"],"prompt_tokens":[]}
{"code_tokens":["\r\n	public","static","String","newStringUtf16","(","final","byte[]","bytes",")","\r\n	","{","\r\n		return","StringUtils",".","newString","(","bytes,","CharEncoding",".","UTF_16",")",";","\r\n	"],"docstring_tokens":["Constructs","a","new","String","by","decoding","the","specified","array","of","bytes","using","the","	","UTF-16","charset"],"prompt_tokens":[]}
{"code_tokens":["\r\n	public","static","String","newStringUtf16Be","(","final","byte[]","bytes",")","\r\n	","{","\r\n		return","StringUtils",".","newString","(","bytes,","CharEncoding",".","UTF_16BE",")",";","\r\n	"],"docstring_tokens":["Constructs","a","new","String","by","decoding","the","specified","array","of","bytes","using","the","	","UTF-16BE","charset"],"prompt_tokens":[]}
{"code_tokens":["\r\n	public","static","String","newStringUtf16Le","(","final","byte[]","bytes",")","\r\n	","{","\r\n		return","StringUtils",".","newString","(","bytes,","CharEncoding",".","UTF_16LE",")",";","\r\n	"],"docstring_tokens":["Constructs","a","new","String","by","decoding","the","specified","array","of","bytes","using","the","	","UTF-16LE","charset"],"prompt_tokens":[]}
{"code_tokens":["\r\n	public","static","String","newStringUtf8","(","final","byte[]","bytes",")","\r\n	","{","\r\n		return","StringUtils",".","newString","(","bytes,","CharEncoding",".","UTF_8",")",";","\r\n	"],"docstring_tokens":["Constructs","a","new","String","by","decoding","the","specified","array","of","bytes","using","the","UTF-8","	","charset"],"prompt_tokens":[]}
{"code_tokens":["\n	public","void","increment","(",")","\n	","{","\n		count++",";","\n	"],"docstring_tokens":["Increases","the","count","value","by","one"],"prompt_tokens":[]}
{"code_tokens":["\n	public","void","decrement","(",")","\n	","{","\n		count--",";","\n	"],"docstring_tokens":["Decreases","the","count","value","by","one"],"prompt_tokens":[]}
{"code_tokens":["\n	public","void","setMarkupStream","(","final","MarkupStream","markupStream",")","\n	","{","\n		this",".","markupStream","=","markupStream",";","\n	"],"docstring_tokens":["Set","the","markup","stream","which","caused","the","exception"],"prompt_tokens":[]}
{"code_tokens":["public","static","FilesSelectedBehavior","onSelected","(","SerializableBiConsumer<AjaxRequestTarget,","List<FileDescription>>","select",")","{","Args",".","notNull","(","select,","\"select\"",")",";","\n\n","return","new","FilesSelectedBehavior","(",")","{","private","static","final","long","serialVersionUID","=","1L",";","\n\n","@Override\n","protected","void","onSelected","(","AjaxRequestTarget","target,","List<FileDescription>","fileDescriptions",")","{","select",".","accept","(","target,","fileDescriptions",")",";","}","}",";"],"docstring_tokens":["Creates","an","FilesSelectedBehavior","based","on","lambda","expressions"],"prompt_tokens":[]}
{"code_tokens":["\n	@Override\n	public","void","init","(","Application","application",")","\n	","{","\n		Http2Settings","http2Settings","=","Http2Settings",".","Holder",".","get","(","application",")",";","\n		http2Settings",".","setPushBuilder","(","new","Jetty9PushBuilder","(",")",")",";","\n	"],"docstring_tokens":["Initializes","the","push","builder","API","of","Jetty","9.3+"],"prompt_tokens":[]}
{"code_tokens":["\n	@Override\n	public","Instant","lastModifiedTime","(",")","\n	","{","\n		final","long","time","=","lastModified","(",")",";","\n		\n		if","(","time","==","0",")","\n		","{","\n			return","null",";","\n		","}","\n		return","Instant",".","ofEpochMilli","(","time",")",";","\n	"],"docstring_tokens":["Returns","a","Time","object","representing","the","most","recent","time","this","file","was","modified"],"prompt_tokens":[]}
{"code_tokens":["\n	public","void","sync","(",")","throws","IOException\n	","{","\n		final","FileInputStream","in","=","new","FileInputStream","(","this",")",";","\n		try\n		","{","\n			in",".","getFD","(",")",".","sync","(",")",";","\n		","}","\n		finally\n		","{","\n			in",".","close","(",")",";","\n		","}","\n	"],"docstring_tokens":["Force","contents","of","file","to","physical","storage"],"prompt_tokens":[]}
{"code_tokens":["\n	public","int","write","(","final","File","file",")","throws","IOException\n	","{","\n		final","InputStream","in","=","new","BufferedInputStream","(","new","FileInputStream","(","file",")",")",";","\n		try\n		","{","\n			return","write","(","in",")",";","\n		","}","\n		finally\n		","{","\n			in",".","close","(",")",";","\n		","}","\n	"],"docstring_tokens":["Writes","the","given","file","to","this","one"],"prompt_tokens":[]}
{"code_tokens":["\n	public","int","write","(","final","InputStream","input",")","throws","IOException\n	","{","\n		return","Files",".","writeTo","(","this,","input",")",";","\n	"],"docstring_tokens":["Writes","the","given","input","stream","to","this","file"],"prompt_tokens":[]}
{"code_tokens":["\n	public","void","write","(","final","String","string",")","throws","IOException\n	","{","\n		final","FileWriter","out","=","new","FileWriter","(","this",")",";","\n		try\n		","{","\n			out",".","write","(","string",")",";","\n		","}","\n		finally\n		","{","\n			out",".","close","(",")",";","\n		","}","\n	"],"docstring_tokens":["Write","the","given","string","to","this","file"],"prompt_tokens":[]}
{"code_tokens":["\n	private","boolean","checkHomePage","(","Url","url",")","\n	","{","\n		if","(","url",".","getSegments","(",")",".","isEmpty","(",")","&&","url",".","getQueryParameters","(",")",".","isEmpty","(",")",")","\n		","{","\n			//","this","is","home","page\n			if","(","getPageClass","(",")",".","equals","(","getContext","(",")",".","getHomePageClass","(",")",")",")","\n			","{","\n				return","true",";","\n			","}","\n		","}","\n		return","false",";","\n	"],"docstring_tokens":["Check","if","the","URL","is","for","home","page","and","the","home","page","class","match","mounted","class"],"prompt_tokens":[]}
{"code_tokens":["\r\n	public","Object","get","(",")","\r\n	","{","\r\n		return","get","(","Time",".","now","(",")",")",";","\r\n	"],"docstring_tokens":["Retrieves","an","Object","for","the","current","Time","value"],"prompt_tokens":[]}
{"code_tokens":["\r\n	public","Object","get","(","final","Time","time",")","\r\n	","{","\r\n		for","(","ITimeFrameSource","source",":","sources",".","keySet","(",")",")","\r\n		","{","\r\n			final","TimeFrame","current","=","source",".","getTimeFrame","(",")",";","\r\n			if","(","current",".","contains","(","time",")",")","\r\n			","{","\r\n				return","sources",".","get","(","current",")",";","\r\n			","}","\r\n		","}","\r\n\r\n		return","null",";","\r\n	"],"docstring_tokens":["Retrieves","an","Object","for","the","given","Time","value"],"prompt_tokens":[]}
{"code_tokens":["\r\n	@Override\r\n	public","IResource","getResource","(",")","\r\n	","{","\r\n		return","resource",";","\r\n	"],"docstring_tokens":["Creates","a","new","resource","which","returns","the","interpolated","value","of","the","text","template"],"prompt_tokens":[]}
{"code_tokens":["\r\n	public","static","StringList","repeat","(","final","int","count,","final","String","string",")","\r\n	","{","\r\n		final","StringList","list","=","new","StringList","(","count",")",";","\r\n\r\n		for","(","int","i","=","0",";","i","<","count",";","i++",")","\r\n		","{","\r\n			list",".","add","(","string",")",";","\r\n		","}","\r\n\r\n		return","list",";","\r\n	"],"docstring_tokens":["Returns","a","list","of","a","string","repeated","a","given","number","of","times"],"prompt_tokens":[]}
{"code_tokens":["\r\n	public","static","StringList","tokenize","(","final","String","string",")","\r\n	","{","\r\n		return","tokenize","(","string,","\",","\"",")",";","\r\n	"],"docstring_tokens":["Extracts","tokens","from","a","comma","and","space","delimited","string"],"prompt_tokens":[]}
{"code_tokens":["\r\n	public","static","StringList","tokenize","(","final","String","string,","final","String","delimiters",")","\r\n	","{","\r\n		final","StringTokenizer","tokenizer","=","new","StringTokenizer","(","string,","delimiters",")",";","\r\n		final","StringList","strings","=","new","StringList","(",")",";","\r\n\r\n		while","(","tokenizer",".","hasMoreTokens","(",")",")","\r\n		","{","\r\n			strings",".","add","(","tokenizer",".","nextToken","(",")",")",";","\r\n		","}","\r\n\r\n		return","strings",";","\r\n	"],"docstring_tokens":["Extracts","tokens","from","a","delimited","string"],"prompt_tokens":[]}
{"code_tokens":["\r\n	public","static","StringList","valueOf","(","final","String","string",")","\r\n	","{","\r\n		final","StringList","strings","=","new","StringList","(",")",";","\r\n\r\n		if","(","string","!=","null",")","\r\n		","{","\r\n			strings",".","add","(","string",")",";","\r\n		","}","\r\n\r\n		return","strings",";","\r\n	"],"docstring_tokens":["Returns","a","string","list","with","just","one","string","in","it"],"prompt_tokens":[]}
{"code_tokens":["\r\n	public","static","StringList","valueOf","(","final","String[]","array",")","\r\n	","{","\r\n		int","length","=","(","array","==","null",")","?","0",":","array",".","length",";","\r\n		final","StringList","strings","=","new","StringList","(","length",")",";","\r\n\r\n		for","(","int","i","=","0",";","i","<","length",";","i++",")","\r\n		","{","\r\n			strings",".","add","(","array[i]",")",";","\r\n		","}","\r\n\r\n		return","strings",";","\r\n	"],"docstring_tokens":["Converts","a","string","array","to","a","string","list"],"prompt_tokens":[]}
{"code_tokens":["\r\n	public","void","add","(","final","String","string",")","\r\n	","{","\r\n		//","Add","to","list\r\n		add","(","size","(",")",",","string",")",";","\r\n	"],"docstring_tokens":["Adds","a","string","to","the","back","of","this","list"],"prompt_tokens":[]}
{"code_tokens":["\r\n	public","void","add","(","final","int","pos,","final","String","string",")","\r\n	","{","\r\n		strings",".","add","(","pos,","string","==","null","?","\"\"",":","string",")",";","\r\n\r\n		//","Increase","total","length\r\n		totalLength","+=","string","==","null","?","0",":","string",".","length","(",")",";","\r\n	"],"docstring_tokens":["Adds","the","string","to","the","stringlist","at","position","pos"],"prompt_tokens":[]}
{"code_tokens":["\r\n	public","void","add","(","final","StringValue","value",")","\r\n	","{","\r\n		add","(","value",".","toString","(",")",")",";","\r\n	"],"docstring_tokens":["Adds","a","string","value","to","this","list","as","a","string"],"prompt_tokens":[]}
{"code_tokens":["\r\n	@Override\r\n	public","String","get","(","final","int","index",")","\r\n	","{","\r\n		return","strings",".","get","(","index",")",";","\r\n	"],"docstring_tokens":["Gets","the","string","at","the","given","index"],"prompt_tokens":[]}
{"code_tokens":["\r\n	@Override\r\n	public","IStringIterator","iterator","(",")","\r\n	","{","\r\n		return","new","IStringIterator","(",")","\r\n		","{","\r\n			private","final","Iterator<String>","iterator","=","strings",".","iterator","(",")",";","\r\n\r\n			@Override\r\n			public","boolean","hasNext","(",")","\r\n			","{","\r\n				return","iterator",".","hasNext","(",")",";","\r\n			","}","\r\n\r\n			@Override\r\n			public","String","next","(",")","\r\n			","{","\r\n				return","iterator",".","next","(",")",";","\r\n			","}","\r\n		","}",";","\r\n	"],"docstring_tokens":["Returns","a","typesafe","iterator","over","this","collection","of","strings"],"prompt_tokens":[]}
{"code_tokens":["\r\n	public","void","prepend","(","final","String","string",")","\r\n	","{","\r\n		add","(","0,","string",")",";","\r\n	"],"docstring_tokens":["Adds","the","given","string","to","the","front","of","the","list"],"prompt_tokens":[]}
{"code_tokens":["\r\n	public","void","remove","(","final","int","index",")","\r\n	","{","\r\n		String","string","=","strings",".","remove","(","index",")",";","\r\n		totalLength","=","totalLength","-","string",".","length","(",")",";","\r\n	"],"docstring_tokens":["Removes","the","string","at","the","given","index"],"prompt_tokens":[]}
{"code_tokens":["\r\n	public","void","removeLast","(",")","\r\n	","{","\r\n		remove","(","size","(",")","-","1",")",";","\r\n	"],"docstring_tokens":["Removes","the","last","string","in","this","list"],"prompt_tokens":[]}
{"code_tokens":["\r\n	public","void","sort","(",")","\r\n	","{","\r\n		Collections",".","sort","(","strings",")",";","\r\n	"],"docstring_tokens":["Sorts","this","string","list","alphabetically"],"prompt_tokens":[]}
{"code_tokens":["\r\n	@Override\r\n	public","String[]","toArray","(",")","\r\n	","{","\r\n		return","strings",".","toArray","(","new","String[0]",")",";","\r\n	"],"docstring_tokens":["Converts","this","string","list","to","a","string","array"],"prompt_tokens":[]}
{"code_tokens":["\n	public","boolean","isEnabled","(",")","\n	","{","\n		return","enabled",";","\n	"],"docstring_tokens":["If","the","wicket","metrics","are","enabled"],"prompt_tokens":[]}
{"code_tokens":["\n	public","Iterator<Contact>","iterator","(","long","first,","long","count",")","\n	","{","\n		return","getContactsDB","(",")",".","find","(","first,","count,","\"firstName\",","true",")",".","iterator","(",")",";","\n	"],"docstring_tokens":["retrieves","contacts","from","database","starting","with","index","first","and","ending","with	","first+count"],"prompt_tokens":[]}
{"code_tokens":["\n	public","long","size","(",")","\n	","{","\n		return","getContactsDB","(",")",".","getCount","(",")",";","\n	"],"docstring_tokens":["returns","total","number","of","contacts","in","the","database"],"prompt_tokens":[]}
{"code_tokens":["\n	public","IModel<Contact>","model","(","Contact","object",")","\n	","{","\n		return","new","DetachableContactModel","(","object",")",";","\n	"],"docstring_tokens":["wraps","retrieved","contact","pojo","with","a","wicket","model"],"prompt_tokens":[]}
{"code_tokens":["\n	protected","String","getPageType","(","File","file",")","\n	","{","\n		String","pageType","=","null",";","\n		try\n		","{","\n			UserDefinedFileAttributeView","view","=","getAttributeView","(","file",")",";","\n			\n			ByteBuffer","buffer","=","ByteBuffer",".","allocate","(","view",".","size","(","ATTRIBUTE_PAGE_TYPE",")",")",";","\n			view",".","read","(","ATTRIBUTE_PAGE_TYPE,","buffer",")",";","\n			buffer",".","flip","(",")",";","\n			pageType","=","Charset",".","defaultCharset","(",")",".","decode","(","buffer",")",".","toString","(",")",";","\n		","}","\n		catch","(","Exception","ex",")","\n		","{","\n			log",".","debug","(","\"cannot","get","pageType","for","{","}","\",","file",")",";","\n		","}","\n\n		return","pageType",";","\n	"],"docstring_tokens":["Get","the","type","of","page","from","the","given","file.	","	","This","is","an","optional","operation","that","returns","null","in","case","of","any","error"],"prompt_tokens":[]}
{"code_tokens":["\n	protected","void","setPageType","(","File","file,","String","pageType",")","\n	","{","\n		try\n		","{","\n			UserDefinedFileAttributeView","view","=","getAttributeView","(","file",")",";","\n\n			view",".","write","(","ATTRIBUTE_PAGE_TYPE,","Charset",".","defaultCharset","(",")",".","encode","(","pageType",")",")",";","\n		","}","\n		catch","(","Exception","ex",")","\n		","{","\n			log",".","debug","(","\"cannot","set","pageType","for","{","}","\",","file,","ex",")",";","\n		","}","\n	"],"docstring_tokens":["Set","the","type","of","page","on","the","given","file.	","	","This","is","an","optional","operation","that","silently","fails","in","case","of","an","error"],"prompt_tokens":[]}
{"code_tokens":["\n	public","final","void","bind","(",")","\n	","{","\n		//","If","we","have","a","resource","reference\n		if","(","resourceReference","!=","null","&&","resourceReference",".","canBeRegistered","(",")","&&\n			Application",".","exists","(",")",")","\n		","{","\n			//","Bind","the","reference","to","the","application\n			Application",".","get","(",")","\n				",".","getResourceReferenceRegistry","(",")","\n				",".","registerResourceReference","(","resourceReference",")",";","\n		","}","\n	"],"docstring_tokens":["Binds","this","resource","if","it","is","shared"],"prompt_tokens":[]}
{"code_tokens":["\n	private","void","newImage","(","final","CharSequence","value",")","\n	","{","\n		//","Parse","value\n		final","ImageValueParser","valueParser","=","new","ImageValueParser","(","value",")",";","\n\n		//","Does","value","match","parser?\n		if","(","valueParser",".","matches","(",")",")","\n		","{","\n			final","String","imageReferenceName","=","valueParser",".","getImageReferenceName","(",")",";","\n			final","String","specification","=","Strings",".","replaceHtmlEscapeNumber","(","valueParser",".","getSpecification","(",")",")",";","\n			final","String","factoryName","=","valueParser",".","getFactoryName","(",")",";","\n			final","Application","application","=","component",".","getApplication","(",")",";","\n\n			//","Do","we","have","a","reference?\n			if","(","!Strings",".","isEmpty","(","imageReferenceName",")",")","\n			","{","\n				//","Is","resource","already","available","via","the","application?\n				if","(","application",".","getResourceReferenceRegistry","(",")",".","getResourceReference","(","\n					Application",".","class,","imageReferenceName,","locale,","style,","variation,","true,","false",")","==","null",")","\n				","{","\n					//","Resource","not","available","yet,","so","create","it","with","factory","and\n					//","share","via","Application\n					final","IResource","imageResource","=","getResourceFactory","(","application,","factoryName",")",".","newResource","(","\n						specification,","locale,","style,","variation",")",";","\n\n					ResourceReference","ref","=","new","SimpleStaticResourceReference","(","Application",".","class,\n						imageReferenceName,","locale,","style,","variation,","imageResource",")",";","\n\n					application",".","getResourceReferenceRegistry","(",")",".","registerResourceReference","(","ref",")",";","\n				","}","\n\n				//","Create","resource","reference\n				resourceReference","=","new","PackageResourceReference","(","Application",".","class,\n					imageReferenceName,","locale,","style,","variation",")",";","\n			","}","\n			else\n			","{","\n				resource","=","getResourceFactory","(","application,","factoryName",")",".","newResource","(","specification,\n					locale,","style,","variation",")",";","\n			","}","\n		","}","\n		else\n		","{","\n			throw","new","WicketRuntimeException","(","\n				\"Could","not","generate","image","for","value","attribute","'\"","+\n					value","+\n					\"'",".","Was","expecting","a","value","attribute","of","the","form","\\\"[resourceFactoryName]:[resourceReferenceName]?:[factorySpecification]\\\"",".","\"",")",";","\n		","}","\n	"],"docstring_tokens":["Generates","an","image","resource","based","on","the","attribute","values","on","tag"],"prompt_tokens":[]}
{"code_tokens":["\n	public","final","Link<Void>","removeLink","(","final","String","id,","final","ListItem<T>","item",")","\n	","{","\n		return","new","Link<Void>","(","id",")","\n		","{","\n			private","static","final","long","serialVersionUID","=","1L",";","\n\n			/**\n			","*","@see","org",".","apache",".","wicket",".","markup",".","html",".","link",".","Link#onClick","(",")","\n			","*/\n			@Override\n			public","void","onClick","(",")","\n			","{","\n				addStateChange","(",")",";","\n\n				item",".","modelChanging","(",")",";","\n\n				//","Remove","item","and","invalidate","listView\n				getList","(",")",".","remove","(","item",".","getIndex","(",")",")",";","\n\n				ListView",".","this",".","modelChanged","(",")",";","\n				ListView",".","this",".","removeAll","(",")",";","\n			","}","\n		","}",";","\n	"],"docstring_tokens":["Returns","a","link","that","will","remove","this","ListItem","from","the","ListView","that","holds","it"],"prompt_tokens":[]}
{"code_tokens":["\n	public","ListView<T>","setList","(","List<T>","list",")","\n	","{","\n		setDefaultModel","(","Model",".","ofList","(","list",")",")",";","\n		return","this",";","\n	"],"docstring_tokens":["Sets","the","model","as","the","provided","list","and","removes","all","children,","so","that","the","next","render","will","be	","using","the","contents","of","the","model"],"prompt_tokens":[]}
{"code_tokens":["\n	protected","ListItem<T>","newItem","(","final","int","index,","IModel<T>","itemModel",")","\n	","{","\n		return","new","ListItem<>","(","index,","itemModel",")",";","\n	"],"docstring_tokens":["Create","a","new","ListItem","for","list","item","at","index"],"prompt_tokens":[]}
{"code_tokens":["\n	public","void","addBottomToolbar","(","final","AbstractToolbar","toolbar",")","\n	","{","\n		addToolbar","(","toolbar,","bottomToolbars",")",";","\n	"],"docstring_tokens":["Adds","a","toolbar","to","the","datatable","that","will","be","displayed","after","the","data"],"prompt_tokens":[]}
{"code_tokens":["\n	public","void","addTopToolbar","(","final","AbstractToolbar","toolbar",")","\n	","{","\n		addToolbar","(","toolbar,","topToolbars",")",";","\n	"],"docstring_tokens":["Adds","a","toolbar","to","the","datatable","that","will","be","displayed","before","the","data"],"prompt_tokens":[]}
{"code_tokens":["\n	private","Component","getChildComponent","(","final","MarkupStream","markupStream,\n		MarkupContainer","enclosureParent",")","\n	","{","\n		String","fullChildId","=","getChildId","(",")",";","\n\n		Component","controller","=","enclosureParent",".","get","(","fullChildId",")",";","\n		if","(","controller","==","null",")","\n		","{","\n			int","orgIndex","=","markupStream",".","getCurrentIndex","(",")",";","\n			try\n			","{","\n				while","(","markupStream",".","isCurrentIndexInsideTheStream","(",")",")","\n				","{","\n					markupStream",".","next","(",")",";","\n					if","(","markupStream",".","skipUntil","(","ComponentTag",".","class",")",")","\n					","{","\n						ComponentTag","tag","=","markupStream",".","getTag","(",")",";","\n						if","(","(","tag","!=","null",")","&&","(","tag",".","isOpen","(",")","||","tag",".","isOpenClose","(",")",")",")","\n						","{","\n							String","tagId","=","tag",".","getId","(",")",";","\n\n							if","(","fullChildId",".","equals","(","tagId",")",")","\n							","{","\n								ComponentTag","fullComponentTag","=","new","ComponentTag","(","tag",")",";","\n								fullComponentTag",".","setId","(","childId",".","toString","(",")",")",";","\n\n								controller","=","ComponentResolvers",".","resolve","(","enclosureParent,\n									markupStream,","fullComponentTag,","new","ResolverFilter","(",")","\n									","{","\n										@Override\n										public","boolean","ignoreResolver","(","\n											final","IComponentResolver","resolver",")","\n										","{","\n											return","resolver","instanceof","EnclosureHandler",";","\n										","}","\n									","}",")",";","\n								break",";","\n							","}","\n							else","if","(","fullChildId",".","startsWith","(","tagId","+","PATH_SEPARATOR",")",")","\n							","{","\n								fullChildId","=","Strings",".","afterFirst","(","fullChildId,","PATH_SEPARATOR",")",";","\n							","}","\n						","}","\n					","}","\n				","}","\n			","}","\n			finally\n			","{","\n				markupStream",".","setCurrentIndex","(","orgIndex",")",";","\n			","}","\n		","}","\n\n		checkChildComponent","(","controller",")",";","\n		return","controller",";","\n	"],"docstring_tokens":["Resolves","the","child","component","which","is","the","controller","of","this","Enclosure"],"prompt_tokens":[]}
{"code_tokens":["\n	protected","CharSequence","getSmartLink","(","final","CharSequence","text",")","\n	","{","\n		return","getLinkParser","(",")",".","parse","(","text",".","toString","(",")",")",";","\n	"],"docstring_tokens":["Get","the","text","after","parsing","by","the","link","parser"],"prompt_tokens":[]}
{"code_tokens":["\n	public","void","initiate","(","IPartialPageRequestHandler","handler",")","\n	","{","\n		if","(","getComponent","(",")","==","null",")","\n		","{","\n			throw","new","WicketRuntimeException","(","\"not","bound","to","a","component\"",")",";","\n		","}","\n\n		CharSequence","url",";","\n		if","(","resourceBehavior","==","null",")","\n		","{","\n			if","(","resourceReference",".","canBeRegistered","(",")",")","\n			","{","\n				getComponent","(",")",".","getApplication","(",")",".","getResourceReferenceRegistry","(",")","\n					",".","registerResourceReference","(","resourceReference",")",";","\n			","}","\n\n			PageParameters","parameters","=","new","PageParameters","(",")",";","\n			if","(","resourceParameters","!=","null",")","\n			","{","\n				parameters",".","mergeWith","(","resourceParameters",")",";","\n			","}","\n			parameters",".","set","(","RESOURCE_PARAMETER_NAME,","getName","(",")",")",";","\n\n			url","=","getComponent","(",")",".","getRequestCycle","(",")","\n				",".","urlFor","(","new","ResourceReferenceRequestHandler","(","resourceReference,","parameters",")",")",";","\n		","}","\n		else\n		","{","\n			url","=","resourceBehavior",".","getUrl","(",")",";","\n		","}","\n\n		JSONObject","settings","=","new","JSONObject","(",")",";","\n		settings",".","put","(","\"attributes\",","new","JSONFunction","(","renderAjaxAttributes","(","getComponent","(",")",")",")",")",";","\n		settings",".","put","(","\"name\",","getName","(",")",")",";","\n		settings",".","put","(","\"downloadUrl\",","url",")",";","\n		settings",".","put","(","\"method\",","getLocation","(",")",".","name","(",")",".","toLowerCase","(","Locale",".","ROOT",")",")",";","\n\n		handler",".","appendJavaScript","(","String",".","format","(","\"Wicket",".","AjaxDownload",".","initiate","(","%s",")",";","\",","settings",")",")",";","\n\n		onBeforeDownload","(","handler",")",";","\n	"],"docstring_tokens":["Call","this","method","to","initiate","the","download"],"prompt_tokens":[]}
{"code_tokens":["\n	private","String","getName","(",")","\n	","{","\n		return","String",".","format","(","\"wicket-ajaxdownload-%s-%s\",","getComponent","(",")",".","getMarkupId","(",")",",\n			getComponent","(",")",".","getBehaviorId","(","this",")",")",";","\n	"],"docstring_tokens":["Identifying","name","of","this","behavior"],"prompt_tokens":[]}
{"code_tokens":["\n	public","PopupSettings","setHeight","(","int","popupHeight",")","\n	","{","\n		height","=","popupHeight",";","\n		return","this",";","\n	"],"docstring_tokens":["Sets","the","popup","window","height"],"prompt_tokens":[]}
{"code_tokens":["\n	public","PopupSettings","setLeft","(","int","popupPositionLeft",")","\n	","{","\n		left","=","popupPositionLeft",";","\n		return","this",";","\n	"],"docstring_tokens":["Sets","the","left","position","of","the","popup","window"],"prompt_tokens":[]}
{"code_tokens":["\n	public","PopupSettings","setTop","(","int","popupPositionTop",")","\n	","{","\n		top","=","popupPositionTop",";","\n		return","this",";","\n	"],"docstring_tokens":["Sets","the","top","position","of","the","popup","window"],"prompt_tokens":[]}
{"code_tokens":["\n	public","PopupSettings","setWidth","(","int","popupWidth",")","\n	","{","\n		width","=","popupWidth",";","\n		return","this",";","\n	"],"docstring_tokens":["Sets","the","popup","window","width"],"prompt_tokens":[]}
{"code_tokens":["\r\n	@Override\r\n	public","void","onBeforeRespond","(","final","Map<String,","Component>","map,","final","AjaxRequestTarget","target",")","\r\n	","{","\r\n		final","List<String>","keysToRemove","=","new","ArrayList<>","(",")",";","\r\n\r\n		target",".","getPage","(",")",".","visitChildren","(","InlineEnclosure",".","class,","new","IVisitor<InlineEnclosure,","Void>","(",")","\r\n		","{","\r\n			@Override\r\n			public","void","component","(","final","InlineEnclosure","enclosure,","final","IVisit<Void>","visit",")","\r\n			","{","\r\n				Iterator<Map",".","Entry<String,","Component>>","entriesItor","=","map",".","entrySet","(",")",".","iterator","(",")",";","\r\n				while","(","entriesItor",".","hasNext","(",")",")","\r\n				","{","\r\n					Map",".","Entry<String,","Component>","entry","=","entriesItor",".","next","(",")",";","\r\n					Component","component","=","entry",".","getValue","(",")",";","\r\n					if","(","isControllerOfEnclosure","(","component,","enclosure",")",")","\r\n					","{","\r\n						final","Component","controller","=","component",";","\r\n						target",".","add","(","enclosure",")",";","\r\n						visit",".","dontGoDeeper","(",")",";","\r\n						enclosure",".","visitChildren","(","new","IVisitor<Component,","Void>","(",")","{","\r\n							@Override\r\n							public","void","component","(","Component","descendant,","IVisit<Void>","visit",")","{","\r\n								if","(","descendant","==","controller",")","{","\r\n									//","if","the","controlling","component","is","in","the","enclosure","we","do","not","need","to","repaint","it\r\n									//","individually,","it","will","be","repainted","as","part","of","the","enclosure","repaint\r\n									keysToRemove",".","add","(","controller",".","getId","(",")",")",";","\r\n								","}","\r\n							","}","\r\n						","}",")",";","\r\n						break",";","\r\n					","}","\r\n				","}","\r\n			","}","\r\n		","}",")",";","\r\n\r\n		for","(","String","key",":","keysToRemove",")","\r\n		","{","\r\n			map",".","remove","(","key",")",";","\r\n		","}","\r\n	"],"docstring_tokens":["Try","to","find","Enclosures","that","have","their","controllers","added","already,","and","add","them","to","the","target"],"prompt_tokens":[]}
{"code_tokens":["\r\n	public","static","boolean","isControllerOfEnclosure","(","final","Component","component,\r\n		final","Enclosure","enclosure",")","\r\n	","{","\r\n		return","(","enclosure",".","get","(","enclosure",".","getChildId","(",")",")","==","component","||","//","#queue","(",")","\r\n				enclosure",".","getParent","(",")",".","get","(","enclosure",".","getChildId","(",")",")","==","component",")",";","//","#add","(",")","\r\n	"],"docstring_tokens":["Check","if","a","given","component","is","the","controlling","child","of","a","given","enclosure"],"prompt_tokens":[]}
{"code_tokens":["\n	@Override\n	public","Iterable<?>","getRenderTokens","(",")","\n	","{","\n		Set<String>","tokens","=","new","TreeSet<String>","(",")",";","\n		for","(","PushItem","pushItem",":","pushItems",")","\n		","{","\n			tokens",".","add","(","pushItem",".","getUrl","(",")","+","TOKEN_SUFFIX",")",";","\n		","}","\n		return","tokens",";","\n	"],"docstring_tokens":["Uses","the","URLs","that","has","already","been","pushed","to","the","client","to","ensure","not","to","push","them","again"],"prompt_tokens":[]}
{"code_tokens":["\n	protected","void","applyPageCacheHeader","(",")","\n	","{","\n		//","check","modification","of","page","html\n		Instant","pageModificationTime","=","getPageModificationTime","(",")",";","\n		//","The","date","of","the","page","is","now\n		pageWebResponse",".","setDateHeader","(","\"Date\",","Instant",".","now","(",")",")",";","\n		//","Set","the","modification","time","so","that","the","browser","sends","a","\"If-Modified-Since\"","header","which\n		//","can","be","compared\n		pageWebResponse",".","setLastModifiedTime","(","pageModificationTime",")",";","\n		//","Make","the","resource","stale","so","that","it","gets","revalidated","even","if","a","cache","entry","is","set\n		//","(","see","http://stackoverflow",".","com/questions/11357430/http-expires-header-values-0-and-1",")","\n		pageWebResponse",".","setHeader","(","\"Expires\",","\"-1\"",")",";","\n		//","Set","a","cache","but","set","it","to","max-age=0","/","must-revalidate","so","that","the","request","to","the","page","is\n		//","done\n		pageWebResponse",".","setHeader","(","\"Cache-Control\",\n			\"max-age=0,","public,","must-revalidate,","proxy-revalidate\"",")",";","\n	"],"docstring_tokens":["Applies","the","cache","header","item","to","the","response"],"prompt_tokens":[]}
{"code_tokens":["\n	@Override\n	public","void","render","(","Response","response",")","\n	","{","\n		//","applies","the","caching","header","to","the","actual","page","request\n		applyPageCacheHeader","(",")",";","\n\n		HttpServletRequest","request","=","getContainerRequest","(","RequestCycle",".","get","(",")",".","getRequest","(",")",")",";","\n		//","Check","if","the","protocol","is","http/2","or","http/2",".","0","to","only","push","the","resources","in","this","case\n		if","(","isHttp2","(","request",")",")","\n		","{","\n\n			Instant","pageModificationTime","=","getPageModificationTime","(",")",";","\n			String","ifModifiedSinceHeader","=","pageWebRequest",".","getHeader","(","\"If-Modified-Since\"",")",";","\n\n			//","Check","if","the","if-modified-since","header","is","set","-","if","not","push","all","resources\n			if","(","ifModifiedSinceHeader","!=","null",")","\n			","{","\n\n				//","Try","to","parse","RFC1123\n				Instant","ifModifiedSinceFromRequestTime","=","parseIfModifiedSinceHeader","(","\n					ifModifiedSinceHeader,","headerDateFormat_RFC1123",")",";","\n\n				//","Try","to","parse","ASCTIME\n				if","(","ifModifiedSinceFromRequestTime","==","null",")","\n				","{","\n					ifModifiedSinceFromRequestTime","=","parseIfModifiedSinceHeader","(","\n						ifModifiedSinceHeader,","headerDateFormat_ASCTIME",")",";","\n				","}","\n\n				//","Try","to","parse","RFC1036","-","because","it","is","obsolete","due","to","RFC","1036","check","this","last",".","\n				if","(","ifModifiedSinceFromRequestTime","==","null",")","\n				","{","\n					ifModifiedSinceFromRequestTime","=","parseIfModifiedSinceHeader","(","\n						ifModifiedSinceHeader,","headerDateFormat_RFC1036",")",";","\n				","}","\n\n				//","if","the","modified","since","header","is","before","the","page","modification","time","or","if","it","can't\n				//","be","parsed","push","it",".","\n				if","(","ifModifiedSinceFromRequestTime","==","null","||\n					ifModifiedSinceFromRequestTime",".","isBefore","(","pageModificationTime",")",")","\n				","{","\n					//","Some","browsers","like","IE","9-11","or","Chrome","39","that","does","not","send","right","headers\n					//","receive","the","resource","via","push","all","the","time\n					push","(","request",")",";","\n				","}","\n			","}","\n			else\n			","{","\n				//","Push","the","resources","if","the","\"if-modified-since\"","is","not","available\n				push","(","request",")",";","\n			","}","\n		","}","\n	"],"docstring_tokens":["Pushes","the","previously","created","URLs","to","the","client"],"prompt_tokens":[]}
{"code_tokens":["\n	protected","void","push","(","HttpServletRequest","request",")","\n	","{","\n		//","Receives","the","vendor","specific","push","builder\n		Http2Settings","http2Settings","=","Http2Settings",".","Holder",".","get","(","Application",".","get","(",")",")",";","\n		PushBuilder","pushBuilder","=","http2Settings",".","getPushBuilder","(",")",";","\n		pushBuilder",".","push","(","request,","pushItems",".","toArray","(","new","PushItem[pushItems",".","size","(",")","]",")",")",";","\n	"],"docstring_tokens":["Pushed","all","URLs","of","this","header","item","to","the","client"],"prompt_tokens":[]}
{"code_tokens":["\n	@SuppressWarnings","(","\"unchecked\"",")","\n	public","PushHeaderItem","push","(","List<PushItem>","pushItems",")","\n	","{","\n		RequestCycle","requestCycle","=","RequestCycle",".","get","(",")",";","\n		if","(","isHttp2","(","getContainerRequest","(","requestCycle",".","getRequest","(",")",")",")",")","\n			for","(","PushItem","pushItem",":","pushItems",")","\n			","{","\n				Object","object","=","pushItem",".","getObject","(",")",";","\n				PageParameters","parameters","=","pushItem",".","getPageParameters","(",")",";","\n\n				if","(","object","==","null",")","\n				","{","\n					throw","new","WicketRuntimeException","(","\n						\"Please","provide","an","object","to","the","items","to","be","pushed,","so","that","the","url","can","be","created","for","the","given","resource",".","\"",")",";","\n				","}","\n\n				CharSequence","url","=","null",";","\n				if","(","object","instanceof","ResourceReference",")","\n				","{","\n					url","=","requestCycle",".","urlFor","(","(","ResourceReference",")","object,","parameters",")",";","\n				","}","\n				else","if","(","Page",".","class",".","isAssignableFrom","(","object",".","getClass","(",")",")",")","\n				","{","\n					url","=","requestCycle",".","urlFor","(","(","Class<?","extends","Page>",")","object,","parameters",")",";","\n				","}","\n				else","if","(","object","instanceof","IRequestHandler",")","\n				","{","\n					url","=","requestCycle",".","urlFor","(","(","IRequestHandler",")","object",")",";","\n				","}","\n				else","if","(","pushItem",".","getUrl","(",")","!=","null",")","\n				","{","\n					url","=","pushItem",".","getUrl","(",")",";","\n				","}","\n				else\n				","{","\n					Url","encoded","=","new","PageParametersEncoder","(",")",".","encodePageParameters","(","parameters",")",";","\n					String","queryString","=","encoded",".","getQueryString","(",")",";","\n					url","=","object",".","toString","(",")","+","(","queryString","!=","null","?","\"?\"","+","queryString",":","\"\"",")",";","\n				","}","\n\n				if","(","url",".","toString","(",")",".","equals","(","\"",".","\"",")",")","\n				","{","\n					url","=","\"/\"",";","\n				","}","\n				else","if","(","url",".","toString","(",")",".","startsWith","(","\"",".","\"",")",")","\n				","{","\n					url","=","url",".","toString","(",")",".","substring","(","1",")",";","\n				","}","\n\n				//","The","context","path","and","the","filter","have","to","be","applied","to","the","URL,","because","otherwise\n				//","the","resource","is","not","pushed","correctly\n				StringBuilder","partialUrl","=","new","StringBuilder","(",")",";","\n				String","contextPath","=","WebApplication",".","get","(",")",".","getServletContext","(",")",".","getContextPath","(",")",";","\n				partialUrl",".","append","(","contextPath",")",";","\n				if","(","!\"/\"",".","equals","(","contextPath",")",")","\n				","{","\n					partialUrl",".","append","(","'/'",")",";","\n				","}","\n				String","filterPath","=","WebApplication",".","get","(",")",".","getWicketFilter","(",")",".","getFilterPath","(",")",";","\n				if","(","\"/\"",".","equals","(","filterPath",")",")","\n				","{","\n					filterPath","=","\"\"",";","\n				","}","\n				else","if","(","filterPath",".","endsWith","(","\"/\"",")",")","\n				","{","\n					filterPath","=","filterPath",".","substring","(","0,","filterPath",".","length","(",")","-","1",")",";","\n				","}","\n				partialUrl",".","append","(","filterPath",")",";","\n				partialUrl",".","append","(","url",".","toString","(",")",")",";","\n\n				//","Set","the","url","the","resource","is","going","to","be","pushed","with\n				pushItem",".","setUrl","(","partialUrl",".","toString","(",")",")",";","\n\n				//","Apply","the","push","item","to","be","used","during","the","push","process\n				this",".","pushItems",".","add","(","pushItem",")",";","\n			","}","\n		return","this",";","\n	"],"docstring_tokens":["Creates","a","URL","and","pushes","the","resource","to","the","client","-","this","is","only","supported","if","http2","is	","enabled"],"prompt_tokens":[]}
{"code_tokens":["\n	public","static","void","authorize","(","final","Component","component,","final","Action","action,\n		final","String","roles",")","\n	","{","\n		ActionPermissions","permissions","=","component",".","getMetaData","(","ACTION_PERMISSIONS",")",";","\n		if","(","permissions","==","null",")","\n		","{","\n			permissions","=","new","ActionPermissions","(",")",";","\n			component",".","setMetaData","(","ACTION_PERMISSIONS,","permissions",")",";","\n		","}","\n		permissions",".","authorize","(","action,","new","Roles","(","roles",")",")",";","\n	"],"docstring_tokens":["Authorizes","the","given","role","to","perform","the","given","action","on","the","given","component"],"prompt_tokens":[]}
{"code_tokens":["\n	public","static","<T","extends","Component>","void","authorizeAll","(","final","Class<T>","componentClass",")","\n	","{","\n		Application","application","=","Application",".","get","(",")",";","\n		InstantiationPermissions","authorizedRoles","=","application",".","getMetaData","(","INSTANTIATION_PERMISSIONS",")",";","\n		if","(","authorizedRoles","!=","null",")","\n		","{","\n			authorizedRoles",".","authorizeAll","(","componentClass",")",";","\n		","}","\n	"],"docstring_tokens":["Grants","permission","to","all","roles","to","create","instances","of","the","given","component","class"],"prompt_tokens":[]}
{"code_tokens":["\n	public","static","void","authorizeAll","(","Component","component,","final","Action","action",")","\n	","{","\n		ActionPermissions","permissions","=","component",".","getMetaData","(","ACTION_PERMISSIONS",")",";","\n		if","(","permissions","!=","null",")","\n		","{","\n			permissions",".","authorizeAll","(","action",")",";","\n		","}","\n	"],"docstring_tokens":["Grants","permission","to","all","roles","to","perform","the","given","action","on","the","given","component"],"prompt_tokens":[]}
{"code_tokens":["\n	@Override\n	public","boolean","isActionAuthorized","(","final","Component","component,","final","Action","action",")","\n	","{","\n		if","(","component","==","null",")","\n		","{","\n			throw","new","IllegalArgumentException","(","\"argument","component","has","to","be","not","null\"",")",";","\n		","}","\n		if","(","action","==","null",")","\n		","{","\n			throw","new","IllegalArgumentException","(","\"argument","action","has","to","be","not","null\"",")",";","\n		","}","\n\n		final","Roles","roles","=","rolesAuthorizedToPerformAction","(","component,","action",")",";","\n		if","(","roles","!=","null",")","\n		","{","\n			return","hasAny","(","roles",")",";","\n		","}","\n		return","true",";","\n	"],"docstring_tokens":["Uses","component","level","meta","data","to","match","roles","for","component","action","execution"],"prompt_tokens":[]}
{"code_tokens":["\n	@Override\n	public","<T","extends","IRequestableComponent>","boolean","isInstantiationAuthorized","(","\n		final","Class<T>","componentClass",")","\n	","{","\n		if","(","componentClass","==","null",")","\n		","{","\n			throw","new","IllegalArgumentException","(","\"argument","componentClass","cannot","be","null\"",")",";","\n		","}","\n\n		//","as","long","as","the","interface","does","not","use","generics,","we","should","check","this\n		if","(","!Component",".","class",".","isAssignableFrom","(","componentClass",")",")","\n		","{","\n			throw","new","IllegalArgumentException","(","\"argument","componentClass","must","be","of","type","\"","+\n				Component",".","class",".","getName","(",")",")",";","\n		","}","\n\n		final","Roles","roles","=","rolesAuthorizedToInstantiate","(","componentClass",")",";","\n		if","(","roles","!=","null",")","\n		","{","\n			return","hasAny","(","roles",")",";","\n		","}","\n		return","true",";","\n	"],"docstring_tokens":["Uses","application","level","meta","data","to","match","roles","for","component","instantiation"],"prompt_tokens":[]}
{"code_tokens":["\n	private","static","<T","extends","IRequestableComponent>","Roles","rolesAuthorizedToInstantiate","(","\n		final","Class<T>","componentClass",")","\n	","{","\n		final","InstantiationPermissions","permissions","=","Application",".","get","(",")",".","getMetaData","(","\n			INSTANTIATION_PERMISSIONS",")",";","\n		if","(","permissions","!=","null",")","\n		","{","\n			return","permissions",".","authorizedRoles","(","componentClass",")",";","\n		","}","\n		return","null",";","\n	"],"docstring_tokens":["Gets","the","roles","for","creation","of","the","given","component","class,","or","null","if","none","were","registered"],"prompt_tokens":[]}
{"code_tokens":["\n	public","String","getSeparator","(",")","\n	","{","\n		return","separator",";","\n	"],"docstring_tokens":["Gets","the","separator","used","by","attribute","appenders","and","prependers"],"prompt_tokens":[]}
{"code_tokens":["\n	public","AttributeAppender","setSeparator","(","String","separator",")","\n	","{","\n		this",".","separator","=","separator",";","\n		return","this",";","\n	"],"docstring_tokens":["Sets","the","separator","used","by","attribute","appenders","and","prependers"],"prompt_tokens":[]}
{"code_tokens":["\n	@Override\n	public","Result","check","(","Object","object",")","\n	","{","\n		Result","result","=","Result",".","SUCCESS",";","\n		if","(","!","(","object","instanceof","Serializable",")","&&","(","!Proxy",".","isProxyClass","(","object",".","getClass","(",")",")",")",")","\n		","{","\n			result","=","new","Result","(","Result",".","Status",".","FAILURE,","\"The","object","type","is","not","Serializable!\",","cause",")",";","\n		","}","\n\n		return","result",";","\n	"],"docstring_tokens":["Makes","the","check","for","all","objects"],"prompt_tokens":[]}
{"code_tokens":["\n	protected","IRequestHandler","processBookmarkable","(","Class<?","extends","IRequestablePage>","pageClass,\n		PageParameters","pageParameters",")","\n	","{","\n		PageProvider","provider","=","new","PageProvider","(","pageClass,","pageParameters",")",";","\n		provider",".","setPageSource","(","getContext","(",")",")",";","\n		return","new","RenderPageRequestHandler","(","provider",")",";","\n	"],"docstring_tokens":["Creates","a","IRequestHandler","that","processes","a","bookmarkable","request"],"prompt_tokens":[]}
{"code_tokens":["\n	protected","String","getNullKeyDisplayValue","(",")","\n	","{","\n		String","option","=","getLocalizer","(",")",".","getStringIgnoreSettings","(","getNullKey","(",")",",","this,","null,","null",")",";","\n\n		if","(","Strings",".","isEmpty","(","option",")",")","\n		","{","\n			option","=","getLocalizer","(",")",".","getString","(","\"null\",","this,","CHOOSE_ONE",")",";","\n		","}","\n		return","option",";","\n	"],"docstring_tokens":["Returns","the","display","value","if","null","is","not","valid","but","is","selected"],"prompt_tokens":[]}
{"code_tokens":["\n	public","Request","cloneWithUrl","(","final","Url","url",")","\n	","{","\n		return","new","Request","(",")","\n		","{","\n			@Override\n			public","Url","getUrl","(",")","\n			","{","\n				return","url",";","\n			","}","\n\n			@Override\n			public","Url","getOriginalUrl","(",")","\n			","{","\n				return","Request",".","this",".","getOriginalUrl","(",")",";","\n			","}","\n\n			@Override\n			public","Locale","getLocale","(",")","\n			","{","\n				return","Request",".","this",".","getLocale","(",")",";","\n			","}","\n\n			@Override\n			public","IRequestParameters","getPostParameters","(",")","\n			","{","\n				return","Request",".","this",".","getPostParameters","(",")",";","\n			","}","\n\n			@Override\n			public","Charset","getCharset","(",")","\n			","{","\n				return","Request",".","this",".","getCharset","(",")",";","\n			","}","\n\n			@Override\n			public","Url","getClientUrl","(",")","\n			","{","\n				return","Request",".","this",".","getClientUrl","(",")",";","\n			","}","\n\n			@Override\n			public","Object","getContainerRequest","(",")","\n			","{","\n				return","Request",".","this",".","getContainerRequest","(",")",";","\n			","}","\n		","}",";","\n	"],"docstring_tokens":["Returns","request","with","specified","URL","and","same","POST","parameters","as","this","request"],"prompt_tokens":[]}
{"code_tokens":["\n	public","static","AttributeModifier","replace","(","String","attributeName,","IModel<?>","value",")","\n	","{","\n		Args",".","notEmpty","(","attributeName,","\"attributeName\"",")",";","\n\n		return","new","AttributeModifier","(","attributeName,","value",")",";","\n	"],"docstring_tokens":["Creates","a","attribute","modifier","that","replaces","the","current","value","with","the","given","value"],"prompt_tokens":[]}
{"code_tokens":["\n	public","static","AttributeModifier","remove","(","String","attributeName",")","\n	","{","\n		Args",".","notEmpty","(","attributeName,","\"attributeName\"",")",";","\n\n		return","replace","(","attributeName,","Model",".","of","(","VALUELESS_ATTRIBUTE_REMOVE",")",")",";","\n	"],"docstring_tokens":["Creates","a","attribute","modifier","that","removes","an","attribute","with","the","specified","name"],"prompt_tokens":[]}
{"code_tokens":["\n	public","synchronized","void","invalidate","(",")","\n	","{","\n		imageData","=","null",";","\n	"],"docstring_tokens":["Causes","the","image","to","be","redrawn","the","next","time","its","requested"],"prompt_tokens":[]}
{"code_tokens":["\n	public","Throwable","getThrowable","(",")","\n	","{","\n		return","throwable",";","\n	"],"docstring_tokens":["Get","access","to","the","exception"],"prompt_tokens":[]}
{"code_tokens":["\n	public","static","OnLoadHeaderItem","forScript","(","CharSequence","javaScript",")","\n	","{","\n		return","new","OnLoadHeaderItem","(","javaScript",")",";","\n	"],"docstring_tokens":["Creates","a","OnLoadHeaderItem","for","the","script"],"prompt_tokens":[]}
{"code_tokens":["\n	public","void","setMaxAge","(","int","maxAge",")","\n	","{","\n		this",".","maxAge","=","maxAge",";","\n	"],"docstring_tokens":["Sets","the","maximum","age","of","the","cookie","in","seconds"],"prompt_tokens":[]}
{"code_tokens":["\n	public","String","getComment","(",")","\n	","{","\n		return","comment",";","\n	"],"docstring_tokens":["Gets","the","cookie","comment"],"prompt_tokens":[]}
{"code_tokens":["\n	public","void","setComment","(","String","comment",")","\n	","{","\n		this",".","comment","=","comment",";","\n	"],"docstring_tokens":["Sets","the","cookie","comment"],"prompt_tokens":[]}
{"code_tokens":["\n	public","String","getDomain","(",")","\n	","{","\n		return","domain",";","\n	"],"docstring_tokens":["Gets","the","cookie","domain","name"],"prompt_tokens":[]}
{"code_tokens":["\n	public","void","setDomain","(","String","domain",")","\n	","{","\n		this",".","domain","=","domain",";","\n	"],"docstring_tokens":["Sets","the","cookie","domain","name"],"prompt_tokens":[]}
{"code_tokens":["\n	public","void","setSecure","(","boolean","secure",")","\n	","{","\n		this",".","secure","=","secure",";","\n	"],"docstring_tokens":["Indicates","to","the","browser","whether","the","cookie","should","only","be","sent","using","a","secure","protocol,","such	","as","HTTPS","or","SSL"],"prompt_tokens":[]}
{"code_tokens":["\n	public","boolean","isHttpOnly","(",")","\n	","{","\n		return","httpOnly",";","\n	"],"docstring_tokens":["Checks","whether","this","Cookie","has","been","marked","as","HttpOnly"],"prompt_tokens":[]}
{"code_tokens":["\n	public","static","OnEventHeaderItem","forScript","(","String","literalTarget,","String","event,\n			CharSequence","javaScript",")","\n	","{","\n		return","new","OnEventHeaderItem","(","literalTarget,","event,","javaScript",")",";","\n	"],"docstring_tokens":["Creates","a","OnEventHeaderItem","for","the","given","parameters"],"prompt_tokens":[]}
{"code_tokens":["\n	public","static","boolean","exists","(",")","\n	","{","\n		Session","session","=","ThreadContext",".","getSession","(",")",";","\n\n		if","(","session","==","null",")","\n		","{","\n			//","no","session","is","available","via","ThreadContext,","so","lookup","in","session","store\n			RequestCycle","requestCycle","=","RequestCycle",".","get","(",")",";","\n			if","(","requestCycle","!=","null",")","\n			","{","\n				session","=","Application",".","get","(",")",".","getSessionStore","(",")",".","lookup","(","requestCycle",".","getRequest","(",")",")",";","\n				if","(","session","!=","null",")","\n				","{","\n					ThreadContext",".","setSession","(","session",")",";","\n				","}","\n			","}","\n		","}","\n		return","session","!=","null",";","\n	"],"docstring_tokens":["Checks","existence","of","a","Session","associated","with","the","current","thread"],"prompt_tokens":[]}
{"code_tokens":["\n	@Override\n	public","final","void","error","(","final","Serializable","message",")","\n	","{","\n		addFeedbackMessage","(","message,","FeedbackMessage",".","ERROR",")",";","\n	"],"docstring_tokens":["Registers","an","error","feedback","message","for","this","session"],"prompt_tokens":[]}
{"code_tokens":["\n	@Override\n	public","final","void","fatal","(","final","Serializable","message",")","\n	","{","\n		addFeedbackMessage","(","message,","FeedbackMessage",".","FATAL",")",";","\n	"],"docstring_tokens":["Registers","an","fatal","feedback","message","for","this","session"],"prompt_tokens":[]}
{"code_tokens":["\n	@Override\n	public","final","void","debug","(","final","Serializable","message",")","\n	","{","\n		addFeedbackMessage","(","message,","FeedbackMessage",".","DEBUG",")",";","\n	"],"docstring_tokens":["Registers","an","debug","feedback","message","for","this","session"],"prompt_tokens":[]}
{"code_tokens":["\n	public","final","Application","getApplication","(",")","\n	","{","\n		return","Application",".","get","(",")",";","\n	"],"docstring_tokens":["Get","the","application","that","is","currently","working","with","this","session"],"prompt_tokens":[]}
{"code_tokens":["\n	public","final","FeedbackMessages","getFeedbackMessages","(",")","\n	","{","\n		return","feedbackMessages",";","\n	"],"docstring_tokens":["Gets","feedback","messages","stored","in","session"],"prompt_tokens":[]}
{"code_tokens":["\n	@Override\n	public","synchronized","final","<M","extends","Serializable>","M","getMetaData","(","final","MetaDataKey<M>","key",")","\n	","{","\n		return","key",".","get","(","metaData",")",";","\n	"],"docstring_tokens":["Gets","metadata","for","this","session","using","the","given","key"],"prompt_tokens":[]}
{"code_tokens":["\n	@Override\n	public","final","void","info","(","final","Serializable","message",")","\n	","{","\n		addFeedbackMessage","(","message,","FeedbackMessage",".","INFO",")",";","\n	"],"docstring_tokens":["Registers","an","informational","feedback","message","for","this","session"],"prompt_tokens":[]}
{"code_tokens":["\n	@Override\n	public","final","void","success","(","final","Serializable","message",")","\n	","{","\n		addFeedbackMessage","(","message,","FeedbackMessage",".","SUCCESS",")",";","\n	"],"docstring_tokens":["Registers","an","success","feedback","message","for","this","session"],"prompt_tokens":[]}
{"code_tokens":["\n	private","void","destroy","(",")","\n	","{","\n		if","(","getSessionStore","(",")","!=","null",")","\n		","{","\n			sessionStore",".","invalidate","(","RequestCycle",".","get","(",")",".","getRequest","(",")",")",";","\n			sessionStore","=","null",";","\n			id","=","null",";","\n			RequestCycle",".","get","(",")",".","setMetaData","(","SESSION_INVALIDATED,","false",")",";","\n			clientInfo","=","null",";","\n			dirty","=","false",";","\n			metaData","=","null",";","\n		","}","\n	"],"docstring_tokens":["Invalidate","and","remove","session","store","and","page","manager"],"prompt_tokens":[]}
{"code_tokens":["\n	public","Session","setLocale","(","final","Locale","locale",")","\n	","{","\n		Args",".","notNull","(","locale,","\"locale\"",")",";","\n\n		if","(","!Objects",".","equal","(","getLocale","(",")",",","locale",")",")","\n		","{","\n			this",".","locale",".","set","(","locale",")",";","\n			rtlLocale","=","isRtlLanguage","(","locale",")",";","\n			dirty","(",")",";","\n		","}","\n		return","this",";","\n	"],"docstring_tokens":["Set","the","locale","for","this","session"],"prompt_tokens":[]}
{"code_tokens":["\n	@Override\n	public","final","void","warn","(","final","Serializable","message",")","\n	","{","\n		addFeedbackMessage","(","message,","FeedbackMessage",".","WARNING",")",";","\n	"],"docstring_tokens":["Registers","a","warning","feedback","message","for","this","session"],"prompt_tokens":[]}
{"code_tokens":["\n	public","void","internalDetach","(",")","\n	","{","\n		if","(","dirty",")","\n		","{","\n			Request","request","=","RequestCycle",".","get","(",")",".","getRequest","(",")",";","\n			getSessionStore","(",")",".","flushSession","(","request,","this",")",";","\n		","}","\n		dirty","=","false",";","\n	"],"docstring_tokens":["NOT","PART","OF","PUBLIC","API,","DO","NOT","CALL	","	","Detaches","internal","state","of","Session"],"prompt_tokens":[]}
{"code_tokens":["\n	public","final","void","dirty","(","boolean","forced",")","\n	","{","\n		if","(","isTemporary","(",")",")","\n		","{","\n			if","(","forced",")","\n			","{","\n				dirty","=","true",";","\n			","}","\n		","}","\n		else\n		","{","\n			dirty","=","true",";","\n		","}","\n	"],"docstring_tokens":["Marks","session","state","as","dirty","so","that","it","will","be","re-stored","in","the","ISessionStore	","at","the","end","of","the","request"],"prompt_tokens":[]}
{"code_tokens":["\n	public","int","nextSequenceValue","(",")","\n	","{","\n		dirty","(","false",")",";","\n		return","sequence",".","getAndIncrement","(",")",";","\n	"],"docstring_tokens":["Retrieves","the","next","available","session-unique","value"],"prompt_tokens":[]}
{"code_tokens":["\n	public","final","IPageManager","getPageManager","(",")","\n	","{","\n		if","(","Boolean",".","TRUE",".","equals","(","RequestCycle",".","get","(",")",".","getMetaData","(","PAGES_UNLOCKED",")",")",")","{","\n			throw","new","WicketRuntimeException","(","\"The","request","has","been","processed",".","Access","to","pages","is","no","longer","allowed\"",")",";","\n		","}","\n		\n		IPageManager","manager","=","Application",".","get","(",")",".","internalGetPageManager","(",")",";","\n		return","pageAccessSynchronizer",".","get","(",")",".","adapt","(","manager",")",";","\n	"],"docstring_tokens":["Returns","the","IPageManager","instance"],"prompt_tokens":[]}
{"code_tokens":["\n	@Override\n	public","void","init","(","Application","application",")","\n	","{","\n		Http2Settings","http2Settings","=","Http2Settings",".","Holder",".","get","(","application",")",";","\n		http2Settings",".","setPushBuilder","(","new","Servlet4PushBuilder","(",")",")",";","\n	"],"docstring_tokens":["Initializes","the","push","builder","API","of","Servlet","4"],"prompt_tokens":[]}
{"code_tokens":["\n	private","List<ComponentData>","getComponentData","(","final","Page","page",")","\n	","{","\n		final","List<ComponentData>","data","=","new","ArrayList<ComponentData>","(",")",";","\n\n		page",".","visitChildren","(","new","IVisitor<Component,","Void>","(",")","\n		","{","\n			@Override\n			public","void","component","(","final","Component","component,","final","IVisit<Void>","visit",")","\n			","{","\n				if","(","!component",".","getPath","(",")",".","startsWith","(","PageView",".","this",".","getPath","(",")",")",")","\n				","{","\n					final","ComponentData","componentData",";","\n\n					//","anonymous","class?","Get","the","parent's","class","name\n					String","name","=","component",".","getClass","(",")",".","getName","(",")",";","\n					if","(","name",".","indexOf","(","\"$\"",")",">","0",")","\n					","{","\n						name","=","component",".","getClass","(",")",".","getSuperclass","(",")",".","getName","(",")",";","\n					","}","\n\n					//","remove","the","path","component\n					name","=","Strings",".","lastPathComponent","(","name,","Component",".","PATH_SEPARATOR",")",";","\n\n					componentData","=","new","ComponentData","(","component",".","getPageRelativePath","(",")",",","name,\n						component",".","getSizeInBytes","(",")",")",";","\n\n					Long","renderDuration","=","component",".","getMetaData","(","RENDER_KEY",")",";","\n					if","(","renderDuration","!=","null",")","\n					","{","\n						componentData",".","renderDuration","=","renderDuration",";","\n					","}","\n\n					try\n					","{","\n						componentData",".","value","=","component",".","getDefaultModelObjectAsString","(",")",";","\n					","}","\n					catch","(","Exception","e",")","\n					","{","\n						componentData",".","value","=","e",".","getMessage","(",")",";","\n					","}","\n\n					data",".","add","(","componentData",")",";","\n				","}","\n\n			","}","\n		","}",")",";","\n\n		return","data",";","\n	"],"docstring_tokens":["Get","recursively","all","components","of","the","page,","extract","the","information","relevant","for","us","and","add	","them","to","a","list"],"prompt_tokens":[]}
{"code_tokens":["\n	public","ITreeProvider<T>","getProvider","(",")","\n	","{","\n		return","provider",";","\n	"],"docstring_tokens":["Get","the","provider","of","the","tree","nodes"],"prompt_tokens":[]}
{"code_tokens":["\n	public","final","void","add","(","IAuthorizationStrategy","strategy",")","\n	","{","\n		if","(","strategy","==","null",")","\n		","{","\n			throw","new","IllegalArgumentException","(","\"Strategy","argument","cannot","be","null\"",")",";","\n		","}","\n		strategies",".","add","(","strategy",")",";","\n	"],"docstring_tokens":["Adds","a","strategy","to","the","chain"],"prompt_tokens":[]}
{"code_tokens":["\r\n	@Override\r\n	public","final","InputStream","getInputStream","(",")","\r\n	","{","\r\n		throw","new","IllegalStateException","(","\"getInputStream","(",")","is","not","used","with","IResourceStreamWriter\"",")",";","\r\n	"],"docstring_tokens":["this","method","should","not","be","used","as","it","is","not","required","for","resource","writers"],"prompt_tokens":[]}
{"code_tokens":["\n	final","void","afterRender","(",")","\n	","{","\n		setRequestFlag","(","RFLAG_PREPARED_FOR_RENDER,","false",")",";","\n		\n		try\n		","{","\n			setRequestFlag","(","RFLAG_AFTER_RENDER_SUPER_CALL_VERIFIED,","false",")",";","\n\n			onAfterRender","(",")",";","\n			getApplication","(",")",".","getComponentOnAfterRenderListeners","(",")",".","onAfterRender","(","this",")",";","\n			verifySuperCall","(","\"onAfterRender\",","RFLAG_AFTER_RENDER_SUPER_CALL_VERIFIED",")",";","\n		","}","\n		finally\n		","{","\n			//","this","flag","must","always","be","set","to","false",".","\n			setRequestFlag","(","RFLAG_RENDERING,","false",")",";","\n		","}","\n	"],"docstring_tokens":["Called","on","every","component","after","the","page","is","rendered"],"prompt_tokens":[]}
{"code_tokens":["\n	@Override\n	public","final","void","debug","(","final","Serializable","message",")","\n	","{","\n		getFeedbackMessages","(",")",".","debug","(","this,","message",")",";","\n		addStateChange","(",")",";","\n	"],"docstring_tokens":["Registers","a","debug","feedback","message","for","this","component"],"prompt_tokens":[]}
{"code_tokens":["\n	final","void","internalOnRemove","(",")","\n	","{","\n		setRequestFlag","(","RFLAG_REMOVING_FROM_HIERARCHY,","true",")",";","\n		onRemove","(",")",";","\n		setFlag","(","FLAG_REMOVED,","true",")",";","\n		if","(","getRequestFlag","(","RFLAG_REMOVING_FROM_HIERARCHY",")",")","\n		","{","\n			throw","new","IllegalStateException","(","Component",".","class",".","getName","(",")","+\n				\"","has","not","been","properly","removed","from","hierarchy",".","Something","in","the","hierarchy","of","\"","+\n				getClass","(",")",".","getName","(",")","+\n				\"","has","not","called","super",".","onRemove","(",")","in","the","override","of","onRemove","(",")","method\"",")",";","\n		","}","\n		Behaviors",".","onRemove","(","this",")",";","\n		removeChildren","(",")",";","\n	"],"docstring_tokens":["Signals","this","Component","that","it","is","removed","from","the","Component","hierarchy"],"prompt_tokens":[]}
{"code_tokens":["\n	@Override\n	public","final","void","error","(","final","Serializable","message",")","\n	","{","\n		getFeedbackMessages","(",")",".","error","(","this,","message",")",";","\n		addStateChange","(",")",";","\n	"],"docstring_tokens":["Registers","an","error","feedback","message","for","this","component"],"prompt_tokens":[]}
{"code_tokens":["\n	@Override\n	public","final","void","fatal","(","final","Serializable","message",")","\n	","{","\n		getFeedbackMessages","(",")",".","fatal","(","this,","message",")",";","\n		addStateChange","(",")",";","\n	"],"docstring_tokens":["Registers","a","fatal","feedback","message","for","this","component"],"prompt_tokens":[]}
{"code_tokens":["\n	public","final","<Z>","Z","findParent","(","final","Class<Z>","c",")","\n	","{","\n		//","Start","with","immediate","parent\n		MarkupContainer","current","=","parent",";","\n\n		//","Walk","up","containment","hierarchy\n		while","(","current","!=","null",")","\n		","{","\n			//","Is","current","an","instance","of","this","class?\n			if","(","c",".","isInstance","(","current",")",")","\n			","{","\n				return","c",".","cast","(","current",")",";","\n			","}","\n\n			//","Check","parent\n			current","=","current",".","getParent","(",")",";","\n		","}","\n\n		//","Failed","to","find","component\n		return","null",";","\n	"],"docstring_tokens":["Finds","the","first","container","parent","of","this","component","of","the","given","class"],"prompt_tokens":[]}
{"code_tokens":["\n	public","final","Application","getApplication","(",")","\n	","{","\n		return","Application",".","get","(",")",";","\n	"],"docstring_tokens":["Gets","interface","to","application","that","this","component","is","a","part","of"],"prompt_tokens":[]}
{"code_tokens":["\n	protected","IConverter<?>","createConverter","(","Class<?>","type",")","{","\n		return","null",";","\n	"],"docstring_tokens":["Factory","method","for","converters","to","be","used","by","this","component,	","returns","null","by","default"],"prompt_tokens":[]}
{"code_tokens":["\n	@Override\n	public","String","getId","(",")","\n	","{","\n		return","id",";","\n	"],"docstring_tokens":["Gets","the","id","of","this","component"],"prompt_tokens":[]}
{"code_tokens":["\n	public","final","Localizer","getLocalizer","(",")","\n	","{","\n		return","getApplication","(",")",".","getResourceSettings","(",")",".","getLocalizer","(",")",";","\n	"],"docstring_tokens":["Convenience","method","to","provide","easy","access","to","the","localizer","object","within","any","component"],"prompt_tokens":[]}
{"code_tokens":["\n	@Override\n	public","final","<M","extends","Serializable>","M","getMetaData","(","final","MetaDataKey<M>","key",")","\n	","{","\n		return","key",".","get","(","getMetaData","(",")",")",";","\n	"],"docstring_tokens":["Gets","metadata","for","this","component","using","the","given","key"],"prompt_tokens":[]}
{"code_tokens":["\n	private","MetaDataEntry<?>[]","getMetaData","(",")","\n	","{","\n		MetaDataEntry<?>[]","metaData","=","null",";","\n\n		//","index","where","we","should","expect","the","entry\n		int","index","=","getFlag","(","FLAG_MODEL_SET",")","?","1",":","0",";","\n\n		int","length","=","data_length","(",")",";","\n\n		if","(","index","<","length",")","\n		","{","\n			Object","object","=","data_get","(","index",")",";","\n			if","(","object","instanceof","MetaDataEntry<?>[]",")","\n			","{","\n				metaData","=","(","MetaDataEntry<?>[]",")","object",";","\n			","}","\n			else","if","(","object","instanceof","MetaDataEntry",")","\n			","{","\n				metaData","=","new","MetaDataEntry[]","{","(","MetaDataEntry<?>",")","object","}",";","\n			","}","\n		","}","\n\n		return","metaData",";","\n	"],"docstring_tokens":["Gets","the","meta","data","entries","for","this","component","as","an","array","of","MetaDataEntry","objects"],"prompt_tokens":[]}
{"code_tokens":["\n	public","final","boolean","getOutputMarkupId","(",")","\n	","{","\n		return","getFlag","(","FLAG_OUTPUT_MARKUP_ID",")",";","\n	"],"docstring_tokens":["Gets","whether","or","not","component","will","output","id","attribute","into","the","markup"],"prompt_tokens":[]}
{"code_tokens":["\n	public","final","boolean","getOutputMarkupPlaceholderTag","(",")","\n	","{","\n		return","getFlag","(","FLAG_PLACEHOLDER",")",";","\n	"],"docstring_tokens":["Gets","whether","or","not","an","invisible","component","will","render","a","placeholder","tag"],"prompt_tokens":[]}
{"code_tokens":["\n	@Override\n	public","final","Page","getPage","(",")","\n	","{","\n		//","Search","for","nearest","Page\n		final","Page","page","=","findPage","(",")",";","\n\n		//","If","no","Page","was","found\n		if","(","page","==","null",")","\n		","{","\n			//","Give","up","with","a","nice","exception\n			throw","new","WicketRuntimeException","(","\"No","Page","found","for","component:","\"","+","this",".","toString","(","true",")","\n					+","\"",".","You","probably","forgot","to","add","it","to","its","parent","component",".","\"",")",";","\n		","}","\n\n		return","page",";","\n	"],"docstring_tokens":["Gets","the","page","holding","this","component"],"prompt_tokens":[]}
{"code_tokens":["\n	@Override\n	public","final","String","getPageRelativePath","(",")","\n	","{","\n		return","Strings",".","afterFirstPathComponent","(","getPath","(",")",",","PATH_SEPARATOR",")",";","\n	"],"docstring_tokens":["Gets","the","path","to","this","component","relative","to","its","containing","page,","i.e"],"prompt_tokens":[]}
{"code_tokens":["\n	public","final","RequestCycle","getRequestCycle","(",")","\n	","{","\n		return","RequestCycle",".","get","(",")",";","\n	"],"docstring_tokens":["Gets","the","active","request","cycle","for","this","component"],"prompt_tokens":[]}
{"code_tokens":["\n	public","final","boolean","hasBeenRendered","(",")","\n	","{","\n		return","getFlag","(","FLAG_HAS_BEEN_RENDERED",")",";","\n	"],"docstring_tokens":["Gets","whether","this","component","was","rendered","at","least","once"],"prompt_tokens":[]}
{"code_tokens":["\n	@Override\n	public","final","void","info","(","final","Serializable","message",")","\n	","{","\n		getFeedbackMessages","(",")",".","info","(","this,","message",")",";","\n		addStateChange","(",")",";","\n	"],"docstring_tokens":["Registers","an","informational","feedback","message","for","this","component"],"prompt_tokens":[]}
{"code_tokens":["\n	@Override\n	public","final","void","success","(","final","Serializable","message",")","\n	","{","\n		getFeedbackMessages","(",")",".","success","(","this,","message",")",";","\n		addStateChange","(",")",";","\n	"],"docstring_tokens":["Registers","an","success","feedback","message","for","this","component"],"prompt_tokens":[]}
{"code_tokens":["\n	public","final","boolean","isActionAuthorized","(","Action","action",")","\n	","{","\n		IAuthorizationStrategy","authorizationStrategy","=","getSession","(",")",".","getAuthorizationStrategy","(",")",";","\n		if","(","authorizationStrategy","!=","null",")","\n		","{","\n			return","authorizationStrategy",".","isActionAuthorized","(","this,","action",")",";","\n		","}","\n		return","true",";","\n	"],"docstring_tokens":["Authorizes","an","action","for","a","component"],"prompt_tokens":[]}
{"code_tokens":["\n	public","final","boolean","isVisibleInHierarchy","(",")","\n	","{","\n		if","(","getRequestFlag","(","RFLAG_VISIBLE_IN_HIERARCHY_SET",")",")","\n		","{","\n			return","getRequestFlag","(","RFLAG_VISIBLE_IN_HIERARCHY_VALUE",")",";","\n		","}","\n\n		final","boolean","state",";","\n		Component","parent","=","getParent","(",")",";","\n		if","(","parent","!=","null","&&","!parent",".","isVisibleInHierarchy","(",")",")","\n		","{","\n			state","=","false",";","\n		","}","\n		else\n		","{","\n			state","=","determineVisibility","(",")",";","\n		","}","\n\n		setRequestFlag","(","RFLAG_VISIBLE_IN_HIERARCHY_SET,","true",")",";","\n		setRequestFlag","(","RFLAG_VISIBLE_IN_HIERARCHY_VALUE,","state",")",";","\n		return","state",";","\n	"],"docstring_tokens":["Checks","if","the","component","itself","and","all","its","parents","are","visible"],"prompt_tokens":[]}
{"code_tokens":["\n	public","final","void","modelChanged","(",")","\n	","{","\n		//","Call","user","code\n		internalOnModelChanged","(",")",";","\n		onModelChanged","(",")",";","\n	"],"docstring_tokens":["Called","to","indicate","that","the","model","content","for","this","component","has","been","changed"],"prompt_tokens":[]}
{"code_tokens":["\n	public","final","void","modelChanging","(",")","\n	","{","\n		checkHierarchyChange","(","this",")",";","\n\n		//","Call","user","code\n		onModelChanging","(",")",";","\n\n		//","Tell","the","page","that","our","model","changed\n		final","Page","page","=","findPage","(",")",";","\n		if","(","page","!=","null",")","\n		","{","\n			page",".","componentModelChanging","(","this",")",";","\n		","}","\n	"],"docstring_tokens":["Called","to","indicate","that","the","model","content","for","this","component","is","about","to","change"],"prompt_tokens":[]}
{"code_tokens":["\n	public","final","void","render","(",")","\n	","{","\n		if","(","isAuto","(",")",")","\n		","{","\n			//","auto","components","are","prepared","when","rendered\n			beforeRender","(",")",";","\n		","}","\n\n		//","Do","the","render\n		RuntimeException","exception","=","null",";","\n		try\n		","{","\n			setRequestFlag","(","RFLAG_RENDERING,","true",")",";","\n			\n			internalRender","(",")",";","\n		","}","\n		catch","(","final","RuntimeException","ex",")","\n		","{","\n			//","Remember","it","as","the","originating","exception\n			exception","=","ex",";","\n		","}","\n		finally\n		","{","\n			try\n			","{","\n				//","Cleanup\n				afterRender","(",")",";","\n			","}","\n			catch","(","RuntimeException","ex2",")","\n			","{","\n				//","Only","remember","it","if","not","already","another","exception","happened\n				if","(","exception","==","null",")","\n				","{","\n					exception","=","ex2",";","\n				","}","\n			","}","\n		","}","\n\n		//","Re-throw","if","needed\n		if","(","exception","!=","null",")","\n		","{","\n			throw","exception",";","\n		","}","\n	"],"docstring_tokens":["Render","this","component","and","all","its","children"],"prompt_tokens":[]}
{"code_tokens":["\n	private","void","internalRender","(",")","\n	","{","\n		//","Make","sure","there","is","a","markup","available","for","the","Component\n		IMarkupFragment","markup","=","getMarkup","(",")",";","\n		if","(","markup","==","null",")","\n		","{","\n			throw","new","MarkupNotFoundException","(","\"Markup","not","found","for","Component:","\"","+","toString","(",")",")",";","\n		","}","\n\n		//","MarkupStream","is","an","Iterator","for","the","markup\n		MarkupStream","markupStream","=","new","MarkupStream","(","markup",")",";","\n\n		MarkupElement","elem","=","markup",".","get","(","0",")",";","\n		if","(","elem","instanceof","ComponentTag",")","\n		","{","\n			//","Guarantee","that","the","markupStream","is","set","and","determineVisibility","not","yet","tested\n			//","See","WICKET-2049\n			","(","(","ComponentTag",")","elem",")",".","onBeforeRender","(","this,","markupStream",")",";","\n		","}","\n\n		//","Determine","if","component","is","visible","using","it's","authorization","status\n		//","and","the","isVisible","property",".","\n		if","(","determineVisibility","(",")",")","\n		","{","\n			setFlag","(","FLAG_HAS_BEEN_RENDERED,","true",")",";","\n\n			//","Rendering","is","beginning\n			if","(","log",".","isDebugEnabled","(",")",")","\n			","{","\n				log",".","debug","(","\"Begin","render","{","}","\",","this",")",";","\n			","}","\n\n			try\n			","{","\n				notifyBehaviorsComponentBeforeRender","(",")",";","\n				onRender","(",")",";","\n				notifyBehaviorsComponentRendered","(",")",";","\n\n				//","Component","has","been","rendered\n				rendered","(",")",";","\n			","}","\n			catch","(","RuntimeException","ex",")","\n			","{","\n				onException","(","ex",")",";","\n			","}","\n\n			if","(","log",".","isDebugEnabled","(",")",")","\n			","{","\n				log",".","debug","(","\"End","render","{","}","\",","this",")",";","\n			","}","\n		","}","\n		//","elem","is","null","when","rendering","a","page\n		else","if","(","(","elem","!=","null",")","&&","(","elem","instanceof","ComponentTag",")",")","\n		","{","\n			if","(","getFlag","(","FLAG_PLACEHOLDER",")",")","\n			","{","\n				renderPlaceholderTag","(","(","(","ComponentTag",")","elem",")",".","mutable","(",")",",","getResponse","(",")",")",";","\n			","}","\n		","}","\n	"],"docstring_tokens":["Performs","a","render","of","this","component","as","part","of","a","Page","level","render","process"],"prompt_tokens":[]}
{"code_tokens":["\n	protected","final","IMarkupSourcingStrategy","getMarkupSourcingStrategy","(",")","\n	","{","\n		if","(","markupSourcingStrategy","==","null",")","\n		","{","\n			markupSourcingStrategy","=","newMarkupSourcingStrategy","(",")",";","\n\n			//","If","not","strategy","by","provided,","than","we","use","a","default","one",".","\n			if","(","markupSourcingStrategy","==","null",")","\n			","{","\n				markupSourcingStrategy","=","DefaultMarkupSourcingStrategy",".","get","(",")",";","\n			","}","\n		","}","\n		return","markupSourcingStrategy",";","\n	"],"docstring_tokens":["Get","the","markup","sourcing","strategy","for","the","component"],"prompt_tokens":[]}
{"code_tokens":["\n	public","final","Component","setOutputMarkupId","(","final","boolean","output",")","\n	","{","\n		setFlag","(","FLAG_OUTPUT_MARKUP_ID,","output",")",";","\n		return","this",";","\n	"],"docstring_tokens":["Sets","whether","or","not","component","will","output","id","attribute","into","the","markup"],"prompt_tokens":[]}
{"code_tokens":["\n	public","final","<C","extends","IRequestablePage>","void","setResponsePage","(","final","Class<C>","cls",")","\n	","{","\n		getRequestCycle","(",")",".","setResponsePage","(","cls,","(","PageParameters",")","null",")",";","\n	"],"docstring_tokens":["Sets","the","page","that","will","respond","to","this","request"],"prompt_tokens":[]}
{"code_tokens":["\n	public","final","<C","extends","IRequestablePage>","void","setResponsePage","(","final","Class<C>","cls,\n		PageParameters","parameters",")","\n	","{","\n		getRequestCycle","(",")",".","setResponsePage","(","cls,","parameters",")",";","\n	"],"docstring_tokens":["Sets","the","page","class","and","its","parameters","that","will","respond","to","this","request"],"prompt_tokens":[]}
{"code_tokens":["\n	public","final","Component","setVisible","(","final","boolean","visible",")","\n	","{","\n		//","Is","new","visibility","state","a","change?\n		if","(","visible","!=","getFlag","(","FLAG_VISIBLE",")",")","\n		","{","\n			//","record","component's","visibility","change\n			addStateChange","(",")",";","\n\n			//","Change","visibility\n			setFlag","(","FLAG_VISIBLE,","visible",")",";","\n			onVisibleStateChanged","(",")",";","\n		","}","\n		return","this",";","\n	"],"docstring_tokens":["Sets","whether","this","component","and","any","children","are","visible"],"prompt_tokens":[]}
{"code_tokens":["\n	@Override\n	public","String","toString","(",")","\n	","{","\n		return","toString","(","false",")",";","\n	"],"docstring_tokens":["Gets","the","string","representation","of","this","component"],"prompt_tokens":[]}
{"code_tokens":["\n	private","IRequestHandler","createRequestHandler","(","PageParameters","parameters,","Integer","id",")","\n	","{","\n		Page","page","=","getPage","(",")",";","\n\n		PageAndComponentProvider","provider","=","new","PageAndComponentProvider","(","page,","this,","parameters",")",";","\n\n		if","(","page",".","isPageStateless","(",")","\n			||","(","page",".","isBookmarkable","(",")","&&","page",".","wasCreatedBookmarkable","(",")",")",")","\n		","{","\n			return","new","BookmarkableListenerRequestHandler","(","provider,","id",")",";","\n		","}","\n		else\n		","{","\n			return","new","ListenerRequestHandler","(","provider,","id",")",";","\n		","}","\n	"],"docstring_tokens":["Create","a","suitable","request","handler","depending","whether","the","page","is","stateless","or","bookmarkable"],"prompt_tokens":[]}
{"code_tokens":["\n	public","final","CharSequence","urlFor","(","final","IRequestHandler","requestHandler",")","\n	","{","\n		return","getRequestCycle","(",")",".","urlFor","(","requestHandler",")",";","\n	"],"docstring_tokens":["Returns","a","URL","that","references","the","given","request","target"],"prompt_tokens":[]}
{"code_tokens":["\n	public","final","CharSequence","urlForListener","(","final","PageParameters","parameters",")","\n	","{","\n		IRequestHandler","handler","=","createRequestHandler","(","parameters,","null",")",";","\n		return","getRequestCycle","(",")",".","urlFor","(","handler",")",";","\n	"],"docstring_tokens":["Gets","a","URL","for","this","IRequestListener"],"prompt_tokens":[]}
{"code_tokens":["\n	@Override\n	public","final","void","warn","(","final","Serializable","message",")","\n	","{","\n		getFeedbackMessages","(",")",".","warn","(","this,","message",")",";","\n		addStateChange","(",")",";","\n	"],"docstring_tokens":["Registers","a","warning","feedback","message","for","this","component"],"prompt_tokens":[]}
{"code_tokens":["\n	protected","final","void","checkComponentTag","(","final","ComponentTag","tag,","final","String","name",")","\n	","{","\n		if","(","!tag",".","getName","(",")",".","equalsIgnoreCase","(","name",")",")","\n		","{","\n			String","msg","=","String",".","format","(","\"Component","[%s]","(","path","=","[%s]",")","must","be","\"\n				+","\"applied","to","a","tag","of","type","[%s],","not:","%s\",","getId","(",")",",","getPath","(",")",",","name,\n				tag",".","toUserDebugString","(",")",")",";","\n\n			findMarkupStream","(",")",".","throwMarkupException","(","msg",")",";","\n		","}","\n	"],"docstring_tokens":["Checks","whether","the","given","type","has","the","expected","name"],"prompt_tokens":[]}
{"code_tokens":["\n	protected","void","detachModel","(",")","\n	","{","\n		IModel<?>","model","=","getModelImpl","(",")",";","\n		if","(","model","!=","null",")","\n		","{","\n			model",".","detach","(",")",";","\n		","}","\n		//","also","detach","the","wrapped","model","of","a","component","assigned","wrap","(","not\n		//","inherited",")","\n		if","(","model","instanceof","IWrapModel","&&","!getFlag","(","FLAG_INHERITABLE_MODEL",")",")","\n		","{","\n			","(","(","IWrapModel<?>",")","model",")",".","getWrappedModel","(",")",".","detach","(",")",";","\n		","}","\n	"],"docstring_tokens":["Detaches","the","model","for","this","component","if","it","is","detachable"],"prompt_tokens":[]}
{"code_tokens":["\n	protected","final","MarkupStream","findMarkupStream","(",")","\n	","{","\n		return","new","MarkupStream","(","getMarkup","(",")",")",";","\n	"],"docstring_tokens":["Finds","the","markup","stream","for","this","component"],"prompt_tokens":[]}
{"code_tokens":["\n	protected","boolean","isBehaviorAccepted","(","final","Behavior","behavior",")","\n	","{","\n		//","Ignore","AttributeModifiers","when","FLAG_IGNORE_ATTRIBUTE_MODIFIER","is","set\n		if","(","(","behavior","instanceof","AttributeModifier",")","&&\n			","(","getFlag","(","FLAG_IGNORE_ATTRIBUTE_MODIFIER",")","!=","false",")",")","\n		","{","\n			return","false",";","\n		","}","\n\n		return","behavior",".","isEnabled","(","this",")",";","\n	"],"docstring_tokens":["Components","are","allowed","to","reject","behavior","modifiers"],"prompt_tokens":[]}
{"code_tokens":["\n	protected","void","onAfterRender","(",")","\n	","{","\n		setRequestFlag","(","RFLAG_AFTER_RENDER_SUPER_CALL_VERIFIED,","true",")",";","\n	"],"docstring_tokens":["Called","immediately","after","a","component","and","all","its","children","have","been","rendered,	","regardless","of","any","exception"],"prompt_tokens":[]}
{"code_tokens":["\n	void","detachChildren","(",")","\n	","{","\n	"],"docstring_tokens":["Detaches","any","child","components"],"prompt_tokens":[]}
{"code_tokens":["\n	void","removeChildren","(",")","\n	","{","\n	"],"docstring_tokens":["Signals","this","components","removal","from","hierarchy","to","all","its","children"],"prompt_tokens":[]}
{"code_tokens":["\n	@Override\n	public","Component","get","(","final","String","path",")","\n	","{","\n		//","Path","to","this","component","is","an","empty","path\n		if","(","path",".","length","(",")","==","0",")","\n		","{","\n			return","this",";","\n		","}","\n		throw","new","IllegalArgumentException","(","\n			exceptionMessage","(","\"Component","is","not","a","container","and","so","does","not","contain","the","path","\"","+\n				path",")",")",";","\n	"],"docstring_tokens":["Gets","the","component","at","the","given","path"],"prompt_tokens":[]}
{"code_tokens":["\n	final","void","renderClosingComponentTag","(","final","MarkupStream","markupStream,\n		final","ComponentTag","openTag,","final","boolean","renderBodyOnly",")","\n	","{","\n		//","Tag","should","be","open","tag","and","not","openclose","tag\n		if","(","openTag",".","isOpen","(",")",")","\n		","{","\n			//","If","we","found","a","close","tag","and","it","closes","the","open","tag,","we're","good\n			if","(","markupStream",".","atCloseTag","(",")","&&","markupStream",".","getTag","(",")",".","closes","(","openTag",")",")","\n			","{","\n				//","Render","the","close","tag\n				if","(","(","renderBodyOnly","==","false",")","&&","needToRenderTag","(","openTag",")",")","\n				","{","\n					openTag",".","writeSyntheticCloseTag","(","getResponse","(",")",")",";","\n				","}","\n			","}","\n			else","if","(","openTag",".","requiresCloseTag","(",")",")","\n			","{","\n				//","Missing","close","tag",".","Some","tags,","e",".","g",".","<p>","are","handled","like","<p/>","by","most","browsers","and\n				//","thus","will","not","throw","an","exception",".","\n				markupStream",".","throwMarkupException","(","\"Expected","close","tag","for","\"","+","openTag",")",";","\n			","}","\n		","}","\n	"],"docstring_tokens":["Renders","the","close","tag","at","the","current","position","in","the","markup","stream"],"prompt_tokens":[]}
{"code_tokens":["\n	private","void","checkId","(","final","String","id",")","\n	","{","\n		if","(","!","(","this","instanceof","Page",")",")","\n		","{","\n			if","(","Strings",".","isEmpty","(","id",")",")","\n			","{","\n				throw","new","WicketRuntimeException","(","\"Null","or","empty","component","ID's","are","not","allowed",".","\"",")",";","\n			","}","\n		","}","\n\n		if","(","(","id","!=","null",")","&&","(","id",".","indexOf","(","':'",")","!=","-1","||","id",".","indexOf","(","'~'",")","!=","-1",")",")","\n		","{","\n			throw","new","WicketRuntimeException","(","\"The","component","ID","must","not","contain","':'","or","'~'","chars",".","\"",")",";","\n		","}","\n	"],"docstring_tokens":["Sets","the","id","of","this","component"],"prompt_tokens":[]}
{"code_tokens":["\n	final","void","setRenderAllowed","(","boolean","renderAllowed",")","\n	","{","\n		setFlag","(","FLAG_IS_RENDER_ALLOWED,","renderAllowed",")",";","\n	"],"docstring_tokens":["Sets","the","render","allowed","flag"],"prompt_tokens":[]}
{"code_tokens":["\n	public","final","boolean","isVisibilityAllowed","(",")","\n	","{","\n		return","getFlag","(","FLAG_VISIBILITY_ALLOWED",")",";","\n	"],"docstring_tokens":["Gets","whether","or","not","visibility","is","allowed","on","this","component"],"prompt_tokens":[]}
{"code_tokens":["\n	public","final","boolean","isRendering","(",")","\n	","{","\n		return","getRequestFlag","(","RFLAG_PREPARED_FOR_RENDER",")","||","getRequestFlag","(","RFLAG_RENDERING",")",";","\n	"],"docstring_tokens":["Says","if","the","component","is","rendering","currently"],"prompt_tokens":[]}
{"code_tokens":["\n	@Override\n	public","void","renderHead","(","IHeaderResponse","response",")","\n	","{","\n		//","noop\n	"],"docstring_tokens":["Render","to","the","web","response","whatever","the","component","wants","to","contribute","to","the","head","section"],"prompt_tokens":[]}
{"code_tokens":["\n	public","Component","remove","(","final","Behavior",".",".",".","behaviors",")","\n	","{","\n		for","(","Behavior","behavior",":","behaviors",")","\n		","{","\n			Behaviors",".","remove","(","this,","behavior",")",";","\n		","}","\n		return","this",";","\n	"],"docstring_tokens":["Removes","behavior","from","component"],"prompt_tokens":[]}
{"code_tokens":["\n	public","Component","add","(","final","Behavior",".",".",".","behaviors",")","\n	","{","\n		Behaviors",".","add","(","this,","behaviors",")",";","\n		return","this",";","\n	"],"docstring_tokens":["Adds","a","behavior","modifier","to","the","component"],"prompt_tokens":[]}
{"code_tokens":["\n	@Around","(","\"execution","(","*","org",".","apache",".","wicket",".","protocol",".","http",".","WicketFilter",".","init","(",".",".",")",")","\"",")","\n	public","Object","aroundInit","(","ProceedingJoinPoint","joinPoint",")","throws","Throwable\n	","{","\n		Object[]","args","=","joinPoint",".","getArgs","(",")",";","\n		String","filterName","=","null",";","\n		if","(","args",".","length","==","2",")","\n		","{","\n			FilterConfig","filterConfig","=","(","FilterConfig",")","args[1]",";","\n			filterName","=","filterConfig",".","getFilterName","(",")",";","\n		","}","\n		else\n		","{","\n			FilterConfig","filterConfig","=","(","FilterConfig",")","args[0]",";","\n			filterName","=","filterConfig",".","getFilterName","(",")",";","\n		","}","\n		WicketMetrics",".","setFilterName","(","filterName",")",";","\n		return","joinPoint",".","proceed","(",")",";","\n	"],"docstring_tokens":["Gets","the","filter","name","during","the","initialization"],"prompt_tokens":[]}
{"code_tokens":["\n	public","static","void","agentmain","(","String","agentArgs,","Instrumentation","instrumentation",")","\n	","{","\n\n		InstrumentationObjectSizeOfStrategy","strategy","=","new","InstrumentationObjectSizeOfStrategy","(","\n				instrumentation",")",";","\n		WicketObjects",".","setObjectSizeOfStrategy","(","strategy",")",";","\n	"],"docstring_tokens":["Initializes","agent","when","it","is","attached","to","an","already","running","JVM"],"prompt_tokens":[]}
{"code_tokens":["\n	public","static","void","premain","(","String","agentArgs,","Instrumentation","instrumentation",")","\n	","{","\n\n		InstrumentationObjectSizeOfStrategy","strategy","=","new","InstrumentationObjectSizeOfStrategy","(","\n				instrumentation",")",";","\n		WicketObjects",".","setObjectSizeOfStrategy","(","strategy",")",";","\n	"],"docstring_tokens":["Initializes","agent","before","the","main","function","of","the","application","is","executed"],"prompt_tokens":[]}
{"code_tokens":["\n	protected","void","onError","(","AjaxRequestTarget","target",")","\n	","{","\n	"],"docstring_tokens":["Listener","method","invoked","on","form","submit","with","errors"],"prompt_tokens":[]}
{"code_tokens":["\n	@Before","(","\"call","(","*","org",".","apache",".","wicket",".","Component",".","setResponsePage","(",".",".",")",")","\"",")","\n	public","void","beforeResponsePage","(",")","throws","Throwable\n	","{","\n		mark","(","\"core/component/redirect\",","null",")",";","\n	"],"docstring_tokens":["Collects","data","how","often","components","redirect","to","another","page"],"prompt_tokens":[]}
{"code_tokens":["\n	@Around","(","\"execution","(","*","org",".","apache",".","wicket",".","Component",".","onConfigure","(",".",".",")",")","\"",")","\n	public","Object","aroundOnConfigure","(","ProceedingJoinPoint","joinPoint",")","throws","Throwable\n	","{","\n		return","measureTime","(","\"core/component/configure\",","joinPoint",")",";","\n	"],"docstring_tokens":["Collects","data","how","often","components","calls","onConfigure"],"prompt_tokens":[]}
{"code_tokens":["\n	@Override\n	public","void","init","(","Application","application",")","\n	","{","\n		Http2Settings","http2Settings","=","Http2Settings",".","Holder",".","get","(","application",")",";","\n		http2Settings",".","setPushBuilder","(","new","UndertowPushBuilder","(",")",")",";","\n	"],"docstring_tokens":["Initializes","the","push","builder","API","of","undertow"],"prompt_tokens":[]}
{"code_tokens":["\n	@Override\n	public","void","read","(","IRequestParameters","parameters",")","\n	","{","\n		super",".","read","(","parameters",")",";","\n		\n		setExtendedProperty","(","parameters",".","getParameterValue","(","\"extendedProperty\"",")",".","toString","(","\"N/A\"",")",")",";","\n	"],"docstring_tokens":["Overridden","to","read","additional","properties"],"prompt_tokens":[]}
{"code_tokens":["\r\n	@Override\r\n	public","int","getCompatibilityScore","(","final","Request","request",")","\r\n	","{","\r\n		Url","decryptedUrl","=","decryptUrl","(","request,","request",".","getUrl","(",")",")",";","\r\n\r\n		if","(","decryptedUrl","==","null",")","\r\n		","{","\r\n			return","0",";","\r\n		","}","\r\n\r\n		Request","decryptedRequest","=","request",".","cloneWithUrl","(","decryptedUrl",")",";","\r\n\r\n		return","wrappedMapper",".","getCompatibilityScore","(","decryptedRequest",")",";","\r\n	"],"docstring_tokens":["This","implementation","decrypts","the","URL","and","passes","the","decrypted","URL","to","the","wrapped","mapper"],"prompt_tokens":[]}
{"code_tokens":["\r\n	protected","Url","encryptRequestListenerParameter","(","final","Url","url",")","\r\n	","{","\r\n		Url","encryptedUrl","=","new","Url","(","url",")",";","\r\n		boolean","encrypted","=","false",";","\r\n\r\n		for","(","Iterator<Url",".","QueryParameter>","it","=","encryptedUrl",".","getQueryParameters","(",")",".","iterator","(",")",";","it",".","hasNext","(",")",";",")","\r\n		","{","\r\n			Url",".","QueryParameter","qp","=","it",".","next","(",")",";","\r\n\r\n			if","(","MapperUtils",".","parsePageComponentInfoParameter","(","qp",")","!=","null",")","\r\n			","{","\r\n				it",".","remove","(",")",";","\r\n				String","encryptedParameterValue","=","getCrypt","(",")",".","encryptUrlSafe","(","qp",".","getName","(",")",")",";","\r\n				Url",".","QueryParameter","encryptedParameter\r\n					=","new","Url",".","QueryParameter","(","ENCRYPTED_PAGE_COMPONENT_INFO_PARAMETER,","encryptedParameterValue",")",";","\r\n				encryptedUrl",".","getQueryParameters","(",")",".","add","(","0,","encryptedParameter",")",";","\r\n				encrypted","=","true",";","\r\n				break",";","\r\n			","}","\r\n		","}","\r\n\r\n		if","(","encrypted",")","\r\n		","{","\r\n			return","encryptedUrl",";","\r\n		","}","\r\n		else\r\n		","{","\r\n			return","url",";","\r\n		","}","\r\n	"],"docstring_tokens":["Encrypts","the","PageComponentInfo","query","parameter","in","the","URL,","if","any","is","found"],"prompt_tokens":[]}
{"code_tokens":["\r\n	protected","Url","decryptRequestListenerParameter","(","final","Request","request,","Url","encryptedUrl",")","\r\n	","{","\r\n		Url","url","=","new","Url","(","encryptedUrl",")",";","\r\n\r\n		url",".","getQueryParameters","(",")",".","clear","(",")",";","\r\n\r\n		for","(","Url",".","QueryParameter","qp",":","encryptedUrl",".","getQueryParameters","(",")",")","\r\n		","{","\r\n			if","(","MapperUtils",".","parsePageComponentInfoParameter","(","qp",")","!=","null",")","\r\n			","{","\r\n				/*\r\n				","*","Plain","text","request","listener","parameter","found",".","This","should","have","been","encrypted,","so","we\r\n				","*","refuse","to","map","the","request","unless","the","original","URL","did","not","include","this","parameter,","which\r\n				","*","case","there","are","likely","to","be","multiple","cryptomappers","installed",".","\r\n				","*/\r\n				if","(","request",".","getOriginalUrl","(",")",".","getQueryParameter","(","qp",".","getName","(",")",")","==","null",")","\r\n				","{","\r\n					url",".","getQueryParameters","(",")",".","add","(","qp",")",";","\r\n				","}","\r\n				else\r\n				","{","\r\n					return","null",";","\r\n				","}","\r\n			","}","\r\n			else","if","(","ENCRYPTED_PAGE_COMPONENT_INFO_PARAMETER",".","equals","(","qp",".","getName","(",")",")",")","\r\n			","{","\r\n				String","encryptedValue","=","qp",".","getValue","(",")",";","\r\n\r\n				if","(","Strings",".","isEmpty","(","encryptedValue",")",")","\r\n				","{","\r\n					url",".","getQueryParameters","(",")",".","add","(","qp",")",";","\r\n				","}","\r\n				else\r\n				","{","\r\n					String","decryptedValue","=","null",";","\r\n\r\n					try\r\n					","{","\r\n						decryptedValue","=","getCrypt","(",")",".","decryptUrlSafe","(","encryptedValue",")",";","\r\n					","}","\r\n					catch","(","Exception","e",")","\r\n					","{","\r\n						log",".","error","(","\"Error","decrypting","encrypted","request","listener","query","parameter\",","e",")",";","\r\n					","}","\r\n\r\n					if","(","Strings",".","isEmpty","(","decryptedValue",")",")","\r\n					","{","\r\n						url",".","getQueryParameters","(",")",".","add","(","qp",")",";","\r\n					","}","\r\n					else\r\n					","{","\r\n						Url",".","QueryParameter","decryptedParamter","=","new","Url",".","QueryParameter","(","decryptedValue,","\"\"",")",";","\r\n						url",".","getQueryParameters","(",")",".","add","(","0,","decryptedParamter",")",";","\r\n					","}","\r\n				","}","\r\n			","}","\r\n			else\r\n			","{","\r\n				url",".","getQueryParameters","(",")",".","add","(","qp",")",";","\r\n			","}","\r\n		","}","\r\n\r\n		return","url",";","\r\n	"],"docstring_tokens":["Decrypts","a","URL","which","may","contain","an","encrypted","PageComponentInfo","query","parameter"],"prompt_tokens":[]}
{"code_tokens":["\n	public","JavaScriptHeaderItem","setId","(","String","markupId",")","\n	","{","\n		this",".","markupId","=","markupId",";","\n		return","this",";","\n	"],"docstring_tokens":["Sets","the","markup","id","for","this","header","item"],"prompt_tokens":[]}
{"code_tokens":["\n	public","static","FooExpansion","get","(",")","\n	","{","\n		FooExpansion","expansion","=","Session",".","get","(",")",".","getMetaData","(","KEY",")",";","\n		if","(","expansion","==","null",")","\n		","{","\n			expansion","=","new","FooExpansion","(",")",";","\n\n			Session",".","get","(",")",".","setMetaData","(","KEY,","expansion",")",";","\n		","}","\n		return","expansion",";","\n	"],"docstring_tokens":["Get","the","expansion","for","the","session"],"prompt_tokens":[]}
{"code_tokens":["\n	public","final","void","setFlag","(","final","int","flag,","final","boolean","set",")","\n	","{","\n		if","(","set",")","\n		","{","\n			flags","|=","flag",";","\n		","}","\n		else\n		","{","\n			flags","&=","~flag",";","\n		","}","\n	"],"docstring_tokens":["THIS","METHOD","IS","NOT","PART","OF","THE","WICKET","PUBLIC","API"],"prompt_tokens":[]}
{"code_tokens":["\n	public","final","void","addBehavior","(","final","Behavior","behavior",")","\n	","{","\n		Args",".","notNull","(","behavior,","\"behavior\"",")",";","\n\n		if","(","behaviors","==","null",")","\n		","{","\n			behaviors","=","Generics",".","newArrayList","(",")",";","\n		","}","\n		behaviors",".","add","(","behavior",")",";","\n	"],"docstring_tokens":["Adds","a","behavior","to","this","component","tag"],"prompt_tokens":[]}
{"code_tokens":["\n	@Override\n	public","final","boolean","closes","(","final","MarkupElement","open",")","\n	","{","\n		if","(","open","instanceof","ComponentTag",")","\n		","{","\n			return","(","openTag","==","open",")","||","getXmlTag","(",")",".","closes","(","(","(","ComponentTag",")","open",")",".","getXmlTag","(",")",")",";","\n		","}","\n\n		return","false",";","\n	"],"docstring_tokens":["Gets","whether","this","tag","closes","the","provided","open","tag"],"prompt_tokens":[]}
{"code_tokens":["\n	public","final","void","enableAutolink","(","final","boolean","autolink",")","\n	","{","\n		setFlag","(","AUTOLINK,","autolink",")",";","\n	"],"docstring_tokens":["If","autolink","is","set","to","true,","href","attributes","will","automatically","be","converted","into","Wicket	","bookmarkable","URLs"],"prompt_tokens":[]}
{"code_tokens":["\n	public","final","boolean","isAutolinkEnabled","(",")","\n	","{","\n		return","getFlag","(","AUTOLINK",")",";","\n	"],"docstring_tokens":["True","if","autolink","is","enabled","and","the","tag","contains","a","href","attribute"],"prompt_tokens":[]}
{"code_tokens":["\n	public","final","void","append","(","String","key,","CharSequence","value,","String","separator",")","\n	","{","\n		String","current","=","getAttribute","(","key",")",";","\n		if","(","Strings",".","isEmpty","(","current",")",")","\n		","{","\n			xmlTag",".","put","(","key,","value",")",";","\n		","}","\n		else\n		","{","\n			xmlTag",".","put","(","key,","current","+","separator","+","value",")",";","\n		","}","\n\n		setModified","(","true",")",";","\n	"],"docstring_tokens":["Appends","specified","value","to","the","attribute"],"prompt_tokens":[]}
{"code_tokens":["\n	public","final","boolean","requiresCloseTag","(",")","\n	","{","\n		if","(","getNamespace","(",")","==","null",")","\n		","{","\n			return","HtmlHandler",".","requiresCloseTag","(","getName","(",")",")",";","\n		","}","\n		else\n		","{","\n			return","HtmlHandler",".","requiresCloseTag","(","getNamespace","(",")","+","\":\"","+","getName","(",")",")",";","\n		","}","\n	"],"docstring_tokens":["Gets","whether","this","tag","does","not","require","a","closing","tag"],"prompt_tokens":[]}
{"code_tokens":["\n	public","final","void","setModified","(","final","boolean","modified",")","\n	","{","\n		setFlag","(","MODIFIED,","modified",")",";","\n	"],"docstring_tokens":["Manually","mark","the","ComponentTag","being","modified"],"prompt_tokens":[]}
{"code_tokens":["\n	@Test\n	public","void","markupFiles","(",")","\n	","{","\n		factory","=","DocumentBuilderFactory",".","newInstance","(",")",";","\n		factory",".","setNamespaceAware","(","true",")",";","\n\n		File","root","=","new","File","(","\"\"",")",".","getAbsoluteFile","(",")",";","\n		processDirectory","(","root",")",";","\n	"],"docstring_tokens":["Checks","xml","well","formedness","of","html","markup","files","under","the","current","working","directory"],"prompt_tokens":[]}
{"code_tokens":["\n	@Override\n	public","void","write","(","final","byte","b[],","final","int","off,","final","int","len",")","throws","IOException\n	","{","\n		checkThreshold","(","len",")",";","\n		getStream","(",")",".","write","(","b,","off,","len",")",";","\n		written","+=","len",";","\n	"],"docstring_tokens":["Writes","len","bytes","from","the","specified","byte","array","starting","at","offset	","off","to","this","output","stream"],"prompt_tokens":[]}
{"code_tokens":["\n	public","long","getByteCount","(",")","\n	","{","\n		return","written",";","\n	"],"docstring_tokens":["Returns","the","number","of","bytes","that","have","been","written","to","this","output","stream"],"prompt_tokens":[]}
{"code_tokens":["\n	@Override\n	public","boolean","isCachingEnabled","(",")","\n	","{","\n		return","cachingEnabled",";","\n	"],"docstring_tokens":["Returns","true","if","the","caching","for","this","resource","is","enabled"],"prompt_tokens":[]}
{"code_tokens":["\n	public","void","setCachingEnabled","(","final","boolean","enabled",")","\n	","{","\n		this",".","cachingEnabled","=","enabled",";","\n	"],"docstring_tokens":["Sets","the","caching","for","this","resource","to","be","enabled"],"prompt_tokens":[]}
{"code_tokens":["\n	public","final","Class<?>","getScope","(",")","\n	","{","\n		return","WicketObjects",".","resolveClass","(","scopeName",")",";","\n	"],"docstring_tokens":["Gets","the","scoping","class,","used","for","class","loading","and","to","determine","the","package"],"prompt_tokens":[]}
{"code_tokens":["\n	protected","byte[]","processResponse","(","final","Attributes","attributes,","final","byte[]","original",")","\n	","{","\n		return","compressResponse","(","attributes,","original",")",";","\n	"],"docstring_tokens":["Gives","a","chance","to","modify","the","resource","going","to","be","written","in","the","response"],"prompt_tokens":[]}
{"code_tokens":["\n	protected","byte[]","compressResponse","(","final","Attributes","attributes,","final","byte[]","original",")","\n	","{","\n		ITextResourceCompressor","compressor","=","getCompressor","(",")",";","\n\n		if","(","compressor","!=","null","&&","getCompress","(",")",")","\n		","{","\n			try\n			","{","\n				Charset","charset","=","getProcessingEncoding","(",")",";","\n				String","nonCompressed","=","new","String","(","original,","charset",")",";","\n				String","output",";","\n				if","(","compressor","instanceof","IScopeAwareTextResourceProcessor",")","\n				","{","\n					IScopeAwareTextResourceProcessor","scopeAwareProcessor","=","(","IScopeAwareTextResourceProcessor",")","compressor",";","\n					output","=","scopeAwareProcessor",".","process","(","nonCompressed,","getScope","(",")",",","name",")",";","\n				","}","\n				else\n				","{","\n					output","=","compressor",".","compress","(","nonCompressed",")",";","\n				","}","\n				final","String","textEncoding","=","getTextEncoding","(",")",";","\n				final","Charset","outputCharset",";","\n				if","(","Strings",".","isEmpty","(","textEncoding",")",")","\n				","{","\n					outputCharset","=","charset",";","\n				","}","\n				else\n				","{","\n					outputCharset","=","Charset",".","forName","(","textEncoding",")",";","\n				","}","\n				return","output",".","getBytes","(","outputCharset",")",";","\n			","}","\n			catch","(","Exception","e",")","\n			","{","\n				log",".","error","(","\"Error","while","compressing","the","content\",","e",")",";","\n				return","original",";","\n			","}","\n		","}","\n		else\n		","{","\n			//","don't","strip","the","comments\n			return","original",";","\n		","}","\n	"],"docstring_tokens":["Compresses","the","response","if","its","is","eligible","and","there","is","a","configured","compressor"],"prompt_tokens":[]}
{"code_tokens":["\n	@Override\n	public","IResourceStream","getResourceStream","(",")","\n	","{","\n		return","internalGetResourceStream","(","getCurrentStyle","(",")",",","getCurrentLocale","(",")",")",";","	"],"docstring_tokens":["locate","resource","stream","for","current","resource"],"prompt_tokens":[]}
{"code_tokens":["\n	public","static","boolean","exists","(","final","ResourceReference",".","Key","key",")","\n	","{","\n		return","exists","(","key",".","getScopeClass","(",")",",","key",".","getName","(",")",",","key",".","getLocale","(",")",",","key",".","getStyle","(",")",",\n			key",".","getVariation","(",")",")",";","\n	"],"docstring_tokens":["Checks","whether","a","resource","for","a","given","set","of","criteria","exists"],"prompt_tokens":[]}
{"code_tokens":["\n	@Around","(","\"execution","(","*","org",".","apache",".","wicket",".","protocol",".","http",".","WicketFilter",".","processRequestCycle","(",".",".",")",")","\"",")","\n	public","Object","aroundRequestProcessed","(","ProceedingJoinPoint","joinPoint",")","throws","Throwable\n	","{","\n		return","measureTime","(","\"core/application/requestCycle\",","joinPoint",")",";","\n	"],"docstring_tokens":["Collects","the","time","how","long","a","request","took","to","be","processed"],"prompt_tokens":[]}
{"code_tokens":["\n	public","int","getInt","(","final","Matcher","matcher,","final","int","defaultValue",")","\n	","{","\n		final","String","value","=","get","(","matcher",")",";","\n		return","value","==","null","?","defaultValue",":","Integer",".","parseInt","(","value,","radix",")",";","\n	"],"docstring_tokens":["Gets","an","int","by","parsing","the","String","matched","by","this","capturing","group"],"prompt_tokens":[]}
{"code_tokens":["\r\n	public","String","toString","(",")","\r\n	","{","\r\n		return","toCharSequence","(",")",".","toString","(",")",";","\r\n	"],"docstring_tokens":["Representation","as","encoded","markup","attributes"],"prompt_tokens":[]}
{"code_tokens":["\n	public","void","clearCache","(",")","\n	","{","\n		cache",".","clear","(",")",";","\n	"],"docstring_tokens":["Clears","the","resource","cache"],"prompt_tokens":[]}
{"code_tokens":["\n	protected","ISerializer","getSerializer","(",")","\n	","{","\n		return","application",".","getFrameworkSettings","(",")",".","getSerializer","(",")",";","\n	"],"docstring_tokens":["Get","the","ISerializer","to","use","for","serializing","of","pages.	","	","By","default","the","serializer","of","the","applications","FrameworkSettings"],"prompt_tokens":[]}
{"code_tokens":["\n	protected","IPageStore","newRequestStore","(","IPageStore","pageStore",")","\n	","{","\n		return","new","RequestPageStore","(","pageStore",")",";","\n	"],"docstring_tokens":["Keep","pages","in","the","request","until","it","is","finished"],"prompt_tokens":[]}
{"code_tokens":["\n	protected","IPageStore","newPersistentStore","(",")","\n	","{","\n		StoreSettings","storeSettings","=","application",".","getStoreSettings","(",")",";","\n		Bytes","maxSizePerSession","=","storeSettings",".","getMaxSizePerSession","(",")",";","\n		File","fileStoreFolder","=","storeSettings",".","getFileStoreFolder","(",")",";","\n\n		return","new","DiskPageStore","(","application",".","getName","(",")",",","fileStoreFolder,","maxSizePerSession",")",";","\n	"],"docstring_tokens":["Keep","persistent","copies","of","all","pages","on","disk"],"prompt_tokens":[]}
{"code_tokens":["\n	static","boolean","isLocale","(","String","localeCandidate",")","\n	","{","\n		boolean","isLocale","=","false",";","\n\n		Locale","locale","=","parseLocale","(","localeCandidate",")",";","\n		if","(","locale","!=","null",")","\n		","{","\n			for","(","final","Locale","l",":","Locale",".","getAvailableLocales","(",")",")","\n			","{","\n				if","(","l",".","equals","(","locale",")",")","\n				","{","\n					isLocale","=","true",";","\n					break",";","\n				","}","\n			","}","\n		","}","\n\n		return","isLocale",";","\n	"],"docstring_tokens":["Checks","whether","the","passed","parameter","can","be","parsed","to","an","existing","locale"],"prompt_tokens":[]}
{"code_tokens":["\n	protected","ContextRelativeResource","buildContextRelativeResource","(","final","String","name,","final","String","minPostfix",")","\n	","{","\n		String","minifiedName","=","name",";","\n		\n		if","(","canBeMinified","(",")",")","\n		","{","\n			minifiedName","=","ResourceUtils",".","getMinifiedName","(","name,","minPostfix",")",";","\n		","}","\n		\n		return","new","ContextRelativeResource","(","minifiedName",")",";","\n	"],"docstring_tokens":["Build","the","context-relative","resource","for","this","resource","reference"],"prompt_tokens":[]}
{"code_tokens":["\n	public","String","getMinPostfix","(",")","\n	","{","\n		return","minPostfix",";","\n	"],"docstring_tokens":["Gets","the","minified","postfix","we","use","for","this","resource"],"prompt_tokens":[]}
{"code_tokens":["\n	public","final","String","get","(","final","Matcher","matcher",")","\n	","{","\n		if","(","group","==","-1",")","\n		","{","\n			throw","new","GroupNotBoundException","(",")",";","\n		","}","\n\n		return","matcher",".","group","(","group",")",";","\n	"],"docstring_tokens":["Threadsafe","method","to","retrieve","contents","of","this","captured","group"],"prompt_tokens":[]}
{"code_tokens":["\n	public","Object","getObject","(",")","\n	","{","\n		return","object",";","\n	"],"docstring_tokens":["Gets","the","object","which","contains","the","push","URL","information"],"prompt_tokens":[]}
{"code_tokens":["\n	public","PushItem","setObject","(","Serializable","object",")","\n	","{","\n		this",".","object","=","object",";","\n		return","this",";","\n	"],"docstring_tokens":["Sets","the","object","which","contains","the","push","URL","information"],"prompt_tokens":[]}
{"code_tokens":["\n	public","String","getUrl","(",")","\n	","{","\n		return","url",";","\n	"],"docstring_tokens":["Gets","the","URL","composed","within","the","push","header","item"],"prompt_tokens":[]}
{"code_tokens":["\n	public","PushItem","setUrl","(","String","url",")","\n	","{","\n		this",".","url","=","url",";","\n		return","this",";","\n	"],"docstring_tokens":["Sets","the","URL","composed","within","the","push","header","item"],"prompt_tokens":[]}
{"code_tokens":["\n	public","Map<String,","PushItemHeaderValue>","getHeaders","(",")","\n	","{","\n		return","headers",";","\n	"],"docstring_tokens":["Gets","the","headers","to","be","added","to","the","push","response"],"prompt_tokens":[]}
{"code_tokens":["\n	public","PushItem","setHeaders","(","Map<String,","PushItemHeaderValue>","headers",")","\n	","{","\n		this",".","headers","=","headers",";","\n		return","this",";","\n	"],"docstring_tokens":["Sets","the","headers","to","be","added","to","the","push","response"],"prompt_tokens":[]}
{"code_tokens":["\n	public","String","getNamespace","(",")","\n	","{","\n		return","namespace",";","\n	"],"docstring_tokens":["Namespace","of","the","tag,","if","available"],"prompt_tokens":[]}
{"code_tokens":["\n	public","int","getPos","(",")","\n	","{","\n		return","(","text","!=","null","?","text",".","pos",":","0",")",";","\n	"],"docstring_tokens":["Gets","the","location","of","the","tag","in","the","input","string"],"prompt_tokens":[]}
{"code_tokens":["\n	public","CharSequence","getAttribute","(","final","String","key",")","\n	","{","\n		return","getAttributes","(",")",".","getCharSequence","(","key",")",";","\n	"],"docstring_tokens":["Get","a","string","attribute"],"prompt_tokens":[]}
{"code_tokens":["\n	public","TagType","getType","(",")","\n	","{","\n		return","type",";","\n	"],"docstring_tokens":["Get","the","tag","type"],"prompt_tokens":[]}
{"code_tokens":["\n	public","boolean","isClose","(",")","\n	","{","\n		return","type","==","TagType",".","CLOSE",";","\n	"],"docstring_tokens":["Gets","whether","this","is","a","close","tag"],"prompt_tokens":[]}
{"code_tokens":["\n	public","boolean","isOpen","(",")","\n	","{","\n		return","type","==","TagType",".","OPEN",";","\n	"],"docstring_tokens":["Gets","whether","this","is","an","open","tag"],"prompt_tokens":[]}
{"code_tokens":["\n	public","void","setName","(","final","String","name",")","\n	","{","\n		if","(","isMutable",")","\n		","{","\n			this",".","name","=","name",".","intern","(",")",";","\n		","}","\n		else\n		","{","\n			throw","new","UnsupportedOperationException","(","\"Attempt","to","set","name","of","immutable","tag\"",")",";","\n		","}","\n	"],"docstring_tokens":["Sets","the","tag","name"],"prompt_tokens":[]}
{"code_tokens":["\n	public","void","setNamespace","(","final","String","namespace",")","\n	","{","\n		if","(","isMutable",")","\n		","{","\n			this",".","namespace","=","namespace","!=","null","?","namespace",".","intern","(",")",":","null",";","\n		","}","\n		else\n		","{","\n			throw","new","UnsupportedOperationException","(","\"Attempt","to","set","namespace","of","immutable","tag\"",")",";","\n		","}","\n	"],"docstring_tokens":["Sets","the","tag","namespace"],"prompt_tokens":[]}
{"code_tokens":["\n	public","void","setType","(","final","TagType","type",")","\n	","{","\n		if","(","isMutable",")","\n		","{","\n			this",".","type","=","type",";","\n		","}","\n		else\n		","{","\n			throw","new","UnsupportedOperationException","(","\"Attempt","to","set","type","of","immutable","tag\"",")",";","\n		","}","\n	"],"docstring_tokens":["Sets","type","of","this","tag","if","it","is","not","immutable"],"prompt_tokens":[]}
{"code_tokens":["\n	public","CharSequence","toXmlString","(",")","\n	","{","\n		final","AppendingStringBuffer","buffer","=","new","AppendingStringBuffer","(",")",";","\n\n		buffer",".","append","(","'<'",")",";","\n\n		if","(","type","==","TagType",".","CLOSE",")","\n		","{","\n			buffer",".","append","(","'/'",")",";","\n		","}","\n\n		if","(","namespace","!=","null",")","\n		","{","\n			buffer",".","append","(","namespace",")",";","\n			buffer",".","append","(","':'",")",";","\n		","}","\n\n		buffer",".","append","(","name",")",";","\n\n		buffer",".","append","(","attributes","(",")",".","toCharSequence","(",")",")",";","\n\n		if","(","type","==","TagType",".","OPEN_CLOSE",")","\n		","{","\n			buffer",".","append","(","'/'",")",";","\n		","}","\n\n		buffer",".","append","(","'>'",")",";","\n		return","buffer",";","\n	"],"docstring_tokens":["Assuming","some","attributes","have","been","changed,","toXmlString","rebuilds","the","String","on","based","on","the	","tags","informations"],"prompt_tokens":[]}
{"code_tokens":["\n	public","void","addProvidedResources","(","HeaderItem",".",".",".","items",")","\n	","{","\n		providedResources",".","addAll","(","Arrays",".","asList","(","items",")",")",";","\n	"],"docstring_tokens":["Adds","the","HeaderItems","that","this","bundle","provides"],"prompt_tokens":[]}
{"code_tokens":["\n	protected","void","updateEditorAjaxAttributes","(","AjaxRequestAttributes","attributes",")","\n	","{","\n	"],"docstring_tokens":["Gives","a","chance","to","the","specializations","to","modify","the","Ajax","attributes","for","the","request","when","this	","component","switches","from","a","label","to","an","editor"],"prompt_tokens":[]}
{"code_tokens":["\n	protected","void","onCancel","(","final","AjaxRequestTarget","target",")","\n	","{","\n		label",".","setVisible","(","true",")",";","\n		editor",".","setVisible","(","false",")",";","\n		editor",".","clearInput","(",")",";","\n		target",".","add","(","AjaxEditableLabel",".","this",")",";","\n	"],"docstring_tokens":["Invoked","when","the","label","is","in","edit","mode,","and","received","a","cancel","event"],"prompt_tokens":[]}
{"code_tokens":["\n	public","void","onEdit","(","final","AjaxRequestTarget","target",")","\n	","{","\n		label",".","setVisible","(","false",")",";","\n		editor",".","setVisible","(","true",")",";","\n		target",".","add","(","AjaxEditableLabel",".","this",")",";","\n		String","selectScript","=","String",".","format","(","\n			\"","(","function","(",")","{","var","el","=","Wicket",".","$","(","'%s'",")",";","if","(","el",".","select",")","el",".","select","(",")",";","}",")","(",")","\",\n			editor",".","getMarkupId","(",")",")",";","\n		target",".","appendJavaScript","(","selectScript",")",";","\n		target",".","focusComponent","(","editor",")",";","\n	"],"docstring_tokens":["Called","when","the","label","is","clicked","and","the","component","is","put","in","edit","mode"],"prompt_tokens":[]}
{"code_tokens":["\n	@Override\n	protected","ZonedDateTime","createTemporal","(","LocalDate","date,","LocalTime","time",")","{","\n		return","ZonedDateTime",".","of","(","date,","time,","ZoneId",".","systemDefault","(",")",")",";","\n	"],"docstring_tokens":["Creates","a","zoned","date","time","in","the","systems","default","zone"],"prompt_tokens":[]}
{"code_tokens":["\n	protected","final","String","getContextConfigLocation","(","final","WicketFilter","filter",")","\n	","{","\n		return","filter",".","getFilterConfig","(",")",".","getInitParameter","(","\"contextConfigLocation\"",")",";","\n	"],"docstring_tokens":["Returns","location","of","context","config","that","will","be","used","to","create","a","WebApplication	","-specific","application","context"],"prompt_tokens":[]}
{"code_tokens":["\n	protected","final","ConfigurableWebApplicationContext","createWebApplicationContext","(","\n		final","WebApplicationContext","parent,","final","WicketFilter","filter",")","throws","BeansException\n	","{","\n		webApplicationContext","=","newApplicationContext","(",")",";","\n		webApplicationContext",".","setParent","(","parent",")",";","\n		webApplicationContext",".","setServletContext","(","filter",".","getFilterConfig","(",")",".","getServletContext","(",")",")",";","\n		webApplicationContext",".","setConfigLocation","(","getContextConfigLocation","(","filter",")",")",";","\n\n		postProcessWebApplicationContext","(","webApplicationContext,","filter",")",";","\n		webApplicationContext",".","refresh","(",")",";","\n\n		return","webApplicationContext",";","\n	"],"docstring_tokens":["Creates","and","initializes","a","new","WebApplicationContext,","with","the","given","context","as","the	","parent"],"prompt_tokens":[]}
{"code_tokens":["\n	public","static","boolean","exists","(",")","\n	","{","\n		return","ThreadContext",".","getApplication","(",")","!=","null",";","\n	"],"docstring_tokens":["Checks","if","the","Application","threadlocal","is","set","in","this","thread"],"prompt_tokens":[]}
{"code_tokens":["\n	public","static","Application","get","(",")","\n	","{","\n		Application","application","=","ThreadContext",".","getApplication","(",")",";","\n		if","(","application","==","null",")","\n		","{","\n			throw","new","WicketRuntimeException","(","\"There","is","no","application","attached","to","current","thread","\"","+\n				Thread",".","currentThread","(",")",".","getName","(",")",")",";","\n		","}","\n		return","application",";","\n	"],"docstring_tokens":["Get","Application","for","current","thread"],"prompt_tokens":[]}
{"code_tokens":["\n	public","final","void","configure","(",")","\n	","{","\n		//","As","long","as","this","is","public","api","the","development","and","deployment","mode\n		//","should","counter","act","each","other","for","all","properties",".","\n		switch","(","getConfigurationType","(",")",")","\n		","{","\n			case","DEVELOPMENT",":","{","\n				getResourceSettings","(",")",".","setResourcePollFrequency","(","Duration",".","ofSeconds","(","1",")",")",";","\n				getResourceSettings","(",")",".","setJavaScriptCompressor","(","null",")",";","\n				getResourceSettings","(",")",".","setUseMinifiedResources","(","false",")",";","\n				getMarkupSettings","(",")",".","setStripWicketTags","(","false",")",";","\n				getExceptionSettings","(",")",".","setUnexpectedExceptionDisplay","(","\n					ExceptionSettings",".","SHOW_EXCEPTION_PAGE",")",";","\n				getDebugSettings","(",")",".","setComponentUseCheck","(","true",")",";","\n				getDebugSettings","(",")",".","setAjaxDebugModeEnabled","(","true",")",";","\n				getDebugSettings","(",")",".","setDevelopmentUtilitiesEnabled","(","true",")",";","\n				//","getDebugSettings","(",")",".","setOutputMarkupContainerClassName","(","true",")",";","\n				getRequestCycleSettings","(",")",".","addResponseFilter","(","EmptySrcAttributeCheckFilter",".","INSTANCE",")",";","\n				break",";","\n			","}","\n			case","DEPLOYMENT",":","{","\n				getResourceSettings","(",")",".","setResourcePollFrequency","(","null",")",";","\n				getResourceSettings","(",")",".","setJavaScriptCompressor","(","new","DefaultJavaScriptCompressor","(",")",")",";","\n				getMarkupSettings","(",")",".","setStripWicketTags","(","true",")",";","\n				getExceptionSettings","(",")",".","setUnexpectedExceptionDisplay","(","\n					ExceptionSettings",".","SHOW_INTERNAL_ERROR_PAGE",")",";","\n				getDebugSettings","(",")",".","setComponentUseCheck","(","false",")",";","\n				getDebugSettings","(",")",".","setAjaxDebugModeEnabled","(","false",")",";","\n				getDebugSettings","(",")",".","setDevelopmentUtilitiesEnabled","(","false",")",";","\n				break",";","\n			","}","\n		","}","\n	"],"docstring_tokens":["Configures","application","settings","to","good","defaults"],"prompt_tokens":[]}
{"code_tokens":["\n	@Override\n	public","final","synchronized","<T>","T","getMetaData","(","final","MetaDataKey<T>","key",")","\n	","{","\n		return","key",".","get","(","metaData",")",";","\n	"],"docstring_tokens":["Gets","metadata","for","this","application","using","the","given","key"],"prompt_tokens":[]}
{"code_tokens":["\n	public","final","String","getName","(",")","\n	","{","\n		return","name",";","\n	"],"docstring_tokens":["Gets","the","name","of","this","application"],"prompt_tokens":[]}
{"code_tokens":["\n	protected","void","validateInit","(",")","\n	","{","\n		if","(","getPageRendererProvider","(",")","==","null",")","\n		","{","\n			throw","new","IllegalStateException","(","\n				\"An","instance","of","IPageRendererProvider","has","not","yet","been","set","on","this","Application",".","@see","Application#setPageRendererProvider\"",")",";","\n		","}","\n		if","(","getSessionStoreProvider","(",")","==","null",")","\n		","{","\n			throw","new","IllegalStateException","(","\n				\"An","instance","of","ISessionStoreProvider","has","not","yet","been","set","on","this","Application",".","@see","Application#setSessionStoreProvider\"",")",";","\n		","}","\n		if","(","getPageManagerProvider","(",")","==","null",")","\n		","{","\n			throw","new","IllegalStateException","(","\n				\"An","instance","of","IPageManagerProvider","has","not","yet","been","set","on","this","Application",".","@see","Application#setPageManagerProvider\"",")",";","\n		","}","\n	"],"docstring_tokens":["Gives","the","Application","object","a","chance","to","validate","if","it","has","been","properly","initialized"],"prompt_tokens":[]}
{"code_tokens":["\n	public","final","ResourceReferenceRegistry","getResourceReferenceRegistry","(",")","\n	","{","\n		return","resourceReferenceRegistry",";","\n	"],"docstring_tokens":["Returns","ResourceReferenceRegistry","for","this","application"],"prompt_tokens":[]}
{"code_tokens":["\n	public","final","IPageFactory","getPageFactory","(",")","\n	","{","\n		return","pageFactory",";","\n	"],"docstring_tokens":["Returns","IPageFactory","for","this","application"],"prompt_tokens":[]}
{"code_tokens":["\n	public","HeaderItem","findBundle","(","HeaderItem","item",")","\n	","{","\n		return","providedResourcesToBundles",".","get","(","item",")",";","\n	"],"docstring_tokens":["Finds","a","bundle","that","provides","the","given","item"],"prompt_tokens":[]}
{"code_tokens":["\n	@Override\n	protected","final","IBreadCrumbParticipant","getParticipant","(","final","String","componentId",")","\n	","{","\n		return","breadCrumbPanelFactory",".","create","(","componentId,","breadCrumbModel",")",";","\n	"],"docstring_tokens":["Uses","the","set","factory","for","creating","a","new","instance","of","IBreadCrumbParticipant"],"prompt_tokens":[]}
{"code_tokens":["\n	protected","final","void","addFeedbackPanels","(","final","AjaxRequestTarget","target",")","\n	","{","\n		form",".","getPage","(",")",".","visitChildren","(","IFeedback",".","class,","new","IVisitor<Component,","Void>","(",")","\n		","{","\n			@Override\n			public","void","component","(","final","Component","component,","final","IVisit<Void>","visit",")","\n			","{","\n				component",".","configure","(",")",";","//","feedback","component","might","change","its","visibility\n				if","(","component",".","isVisibleInHierarchy","(",")",")","\n				","{","\n					target",".","add","(","component",")",";","\n				","}","\n				else\n				","{","\n					visit",".","dontGoDeeper","(",")",";","\n				","}","\n			","}","\n		","}",")",";","\n	"],"docstring_tokens":["Adds","all","feedback","panels","on","the","page","to","the","ajax","request","target","so","they","are","updated"],"prompt_tokens":[]}
{"code_tokens":["\n	public","IRequestHandler","getActive","(",")","\n	","{","\n		return","active",";","\n	"],"docstring_tokens":["Get","the","handler","currently","executed"],"prompt_tokens":[]}
{"code_tokens":["\n	public","IRequestHandler","execute","(","final","IRequestHandler","handler",")","\n	","{","\n		active","=","handler",";","\n		try\n		","{","\n			respond","(","handler",")",";","\n		","}","\n		finally\n		","{","\n			active","=","null",";","\n			inactiveRequestHandlers",".","add","(","handler",")",";","\n		","}","\n\n		IRequestHandler","scheduled","=","scheduledAfterCurrent",";","\n		scheduledAfterCurrent","=","null",";","\n		return","scheduled",";","\n	"],"docstring_tokens":["Execute","the","given","handler"],"prompt_tokens":[]}
{"code_tokens":["\n	public","void","schedule","(","final","IRequestHandler","handler",")","\n	","{","\n		scheduledAfterCurrent","=","handler",";","\n	"],"docstring_tokens":["Schedules","the","handler","after","the","current","one"],"prompt_tokens":[]}
{"code_tokens":["\n	public","void","detach","(",")","\n	","{","\n		if","(","active","!=","null",")","\n		","{","\n			//","no","request","handler","should","be","active","at","this","point\n			log",".","warn","(","\"request","handler","is","still","active",".","\"",")",";","\n\n			inactiveRequestHandlers",".","add","(","active",")",";","\n			active","=","null",";","\n		","}","\n\n		RuntimeException","rethrow","=","null",";",";","\n		for","(","IRequestHandler","handler",":","inactiveRequestHandlers",")","\n		","{","\n			try\n			","{","\n				detach","(","handler",")",";","\n			","}","\n			catch","(","Exception","exception",")","\n			","{","\n				if","(","rethrow","==","null","&&","exception","instanceof","RuntimeException",")","{","\n					rethrow","=","(","RuntimeException",")","exception",";","\n				","}","else","{","\n					log",".","error","(","\"Error","detaching","RequestHandler\",","exception",")",";","\n				","}","\n			","}","\n		","}","\n		if","(","rethrow","!=","null",")","{","\n			//","WICKET-6001","runtime","exceptions","are","rethrown\n			//","TODO","obsolete","should","component-queueing","be","removed\n			throw","rethrow",";","\n		","}","\n	"],"docstring_tokens":["Detaches","all","request","handlers"],"prompt_tokens":[]}
{"code_tokens":["\n	public","StringResourceModel","setDefaultValue","(","final","IModel<String>","defaultValue",")","\n	","{","\n		this",".","defaultValue","=","defaultValue",";","\n		return","this",";","\n	"],"docstring_tokens":["Sets","the","default","value","if","the","resource","key","is","not","found"],"prompt_tokens":[]}
{"code_tokens":["\n	public","StringResourceModel","setModel","(","final","IModel<?>","model",")","\n	","{","\n		this",".","model","=","model",";","\n		return","this",";","\n	"],"docstring_tokens":["Sets","the","model","used","for","property","substitutions"],"prompt_tokens":[]}
{"code_tokens":["\n	public","StringResourceModel","setParameters","(","Object",".",".",".","parameters",")","\n	","{","\n		this",".","parameters","=","parameters",";","\n		return","this",";","\n	"],"docstring_tokens":["Sets","the","parameters","used","for","substitution"],"prompt_tokens":[]}
{"code_tokens":["\n	public","Localizer","getLocalizer","(",")","\n	","{","\n		return","Application",".","get","(",")",".","getResourceSettings","(",")",".","getLocalizer","(",")",";","\n	"],"docstring_tokens":["Gets","the","localizer","that","is","being","used","by","this","string","resource","model"],"prompt_tokens":[]}
{"code_tokens":["\n	public","boolean","isShown","(",")","\n	","{","\n		return","shown",";","\n	"],"docstring_tokens":["Is","this","window","currently","showing"],"prompt_tokens":[]}
{"code_tokens":["\n	public","void","show","(","final","IPartialPageRequestHandler","target",")","\n	","{","\n		if","(","shown","==","false",")","\n		","{","\n			getContent","(",")",".","setVisible","(","true",")",";","\n			target",".","add","(","this",")",";","\n			target",".","appendJavaScript","(","getWindowOpenJavaScript","(",")",")",";","\n			shown","=","true",";","\n		","}","\n	"],"docstring_tokens":["Shows","the","modal","window"],"prompt_tokens":[]}
{"code_tokens":["\n	public","void","close","(","final","IPartialPageRequestHandler","target",")","\n	","{","\n		getContent","(",")",".","setVisible","(","false",")",";","\n		if","(","isCustomComponent","(",")",")","\n		","{","\n			target",".","add","(","getContent","(",")",")",";","\n		","}","\n		target",".","appendJavaScript","(","getCloseJavacript","(",")",")",";","\n		shown","=","false",";","\n	"],"docstring_tokens":["Closes","the","modal","window"],"prompt_tokens":[]}
{"code_tokens":["\n	protected","CharSequence","getShowJavaScript","(",")","\n	","{","\n		return","\"window",".","setTimeout","(","function","(",")","{","\\n\"","+","\"","Wicket",".","Window",".","create","(","settings",")",".","show","(",")",";","\\n\"\n			+","\"","}",",","0",")",";","\\n\"",";","\n	"],"docstring_tokens":["Method","that","allows","alternate","script","for","showing","the","window"],"prompt_tokens":[]}
{"code_tokens":["\n	protected","String","getCloseJavacript","(",")","\n	","{","\n		return","getCloseJavacriptInternal","(",")",";","\n	"],"docstring_tokens":["Method","that","allows","alternate","script","for","closing","the","window"],"prompt_tokens":[]}
{"code_tokens":["\n	public","String","getCssClassName","(",")","\n	","{","\n		return","cssClassName",";","\n	"],"docstring_tokens":["Returns","the","CSS","class","name","for","this","window"],"prompt_tokens":[]}
{"code_tokens":["\n	public","int","getInitialWidth","(",")","\n	","{","\n		return","initialWidth",";","\n	"],"docstring_tokens":["Returns","the","initial","width","of","the","window"],"prompt_tokens":[]}
{"code_tokens":["\n	public","int","getInitialHeight","(",")","\n	","{","\n		return","initialHeight",";","\n	"],"docstring_tokens":["Returns","the","initial","height","of","the","window"],"prompt_tokens":[]}
{"code_tokens":["\n	public","ModalWindow","setResizable","(","final","boolean","resizable",")","\n	","{","\n		this",".","resizable","=","resizable",";","\n		return","this",";","\n	"],"docstring_tokens":["Sets","whether","the","user","will","be","able","to","resize","the","window"],"prompt_tokens":[]}
{"code_tokens":["\n	public","boolean","isResizable","(",")","\n	","{","\n		return","resizable",";","\n	"],"docstring_tokens":["Returns","whether","the","window","is","resizable"],"prompt_tokens":[]}
{"code_tokens":["\n	public","ModalWindow","setWidthUnit","(","final","String","widthUnit",")","\n	","{","\n		this",".","widthUnit","=","widthUnit",";","\n		return","this",";","\n	"],"docstring_tokens":["Sets","the","CSS","unit","used","for","initial","window","width"],"prompt_tokens":[]}
{"code_tokens":["\n	public","String","getWidthUnit","(",")","\n	","{","\n		return","widthUnit",";","\n	"],"docstring_tokens":["Returns","the","CSS","unit","for","initial","window","width"],"prompt_tokens":[]}
{"code_tokens":["\n	public","ModalWindow","setHeightUnit","(","final","String","heightUnit",")","\n	","{","\n		this",".","heightUnit","=","heightUnit",";","\n		return","this",";","\n	"],"docstring_tokens":["Sets","the","CSS","unit","used","for","initial","window","height"],"prompt_tokens":[]}
{"code_tokens":["\n	public","String","getHeightUnit","(",")","\n	","{","\n		return","heightUnit",";","\n	"],"docstring_tokens":["Retrns","the","CSS","unit","for","initial","window","height"],"prompt_tokens":[]}
{"code_tokens":["\n	public","ModalWindow","setTitle","(","final","String","title",")","\n	","{","\n		this",".","title","=","new","Model<>","(","title",")",";","\n		return","this",";","\n	"],"docstring_tokens":["Sets","the","title","of","window"],"prompt_tokens":[]}
{"code_tokens":["\n	public","IModel<String>","getTitle","(",")","\n	","{","\n		return","title",";","\n	"],"docstring_tokens":["Returns","the","title","of","the","window"],"prompt_tokens":[]}
{"code_tokens":["\n	public","ModalWindow","setMaskType","(","final","MaskType","mask",")","\n	","{","\n		maskType","=","mask",";","\n		return","this",";","\n	"],"docstring_tokens":["Sets","the","mask","type","of","the","window"],"prompt_tokens":[]}
{"code_tokens":["\n	public","MaskType","getMaskType","(",")","\n	","{","\n		return","maskType",";","\n	"],"docstring_tokens":["Returns","the","mask","type","of","the","window"],"prompt_tokens":[]}
{"code_tokens":["\n	protected","final","Component","getContent","(",")","\n	","{","\n		return","get","(","getContentId","(",")",")",";","\n	"],"docstring_tokens":["Returns","a","content","component"],"prompt_tokens":[]}
{"code_tokens":["\n	protected","boolean","isCustomComponent","(",")","\n	","{","\n		return","getContent","(",")","!=","empty",";","\n	"],"docstring_tokens":["Returns","true","if","user","has","added","own","component","to","the","window"],"prompt_tokens":[]}
{"code_tokens":["\n	public","ModalWindow","setContent","(","final","Component","component",")","\n	","{","\n		if","(","component",".","getId","(",")",".","equals","(","getContentId","(",")",")","==","false",")","\n		","{","\n			throw","new","WicketRuntimeException","(","\"Modal","window","content","id","is","wrong",".","Component","ID:\"","+\n				component",".","getId","(",")","+","\"",";","content","ID:","\"","+","getContentId","(",")",")",";","\n		","}","\n		else","if","(","component","instanceof","AbstractRepeater",")","\n		","{","\n			throw","new","WicketRuntimeException","(","\n				\"A","repeater","component","cannot","be","used","as","the","content","of","a","modal","window,","please","use","repeater's","parent\"",")",";","\n		","}","\n\n		component",".","setOutputMarkupPlaceholderTag","(","true",")",";","\n		component",".","setVisible","(","false",")",";","\n		replace","(","component",")",";","\n		shown","=","false",";","\n		pageCreator","=","null",";","\n		return","this",";","\n	"],"docstring_tokens":["Sets","the","content","of","the","modal","window"],"prompt_tokens":[]}
{"code_tokens":["\n	public","boolean","isAutoSize","(",")","\n	","{","\n		return","autoSize",";","\n	"],"docstring_tokens":["Returns","whether","window","will","be","opened","in","autosize","mode"],"prompt_tokens":[]}
{"code_tokens":["\n	public","static","OnDomReadyHeaderItem","forScript","(","CharSequence","javaScript",")","\n	","{","\n		return","new","OnDomReadyHeaderItem","(","javaScript",")",";","\n	"],"docstring_tokens":["Creates","a","OnDomReadyHeaderItem","for","the","script"],"prompt_tokens":[]}
{"code_tokens":["\n	private","Constructor<?","extends","BreadCrumbPanel>","getConstructor","(",")","\n	","{","\n		try\n		","{","\n			return","panelClass",".","getConstructor","(","String",".","class,","IBreadCrumbModel",".","class",")",";","\n		","}","\n		catch","(","SecurityException","e",")","\n		","{","\n			throw","new","RuntimeException","(","e",")",";","\n		","}","\n		catch","(","NoSuchMethodException","e",")","\n		","{","\n			throw","new","RuntimeException","(","e",")",";","\n		","}","\n	"],"docstring_tokens":["Gets","the","proper","constructor","of","the","panel","class"],"prompt_tokens":[]}
{"code_tokens":["\n	@Around","(","\"execution","(","org",".","apache",".","wicket",".","behavior",".","Behavior",".","new","(",".",".",")",")","\"",")","\n	public","Object","aroundNew","(","ProceedingJoinPoint","joinPoint",")","throws","Throwable\n	","{","\n		return","mark","(","\"core/behavior/create\",","joinPoint",")",";","\n	"],"docstring_tokens":["Collects","data","how","often","a","behavior","is","created"],"prompt_tokens":[]}
{"code_tokens":["\n	private","AppendingStringBuffer","invokeResponseFilters","(","final","StringResponse","contentResponse",")","\n	","{","\n		AppendingStringBuffer","responseBuffer","=","new","AppendingStringBuffer","(","\n			contentResponse",".","getBuffer","(",")",")",";","\n\n		List<IResponseFilter>","responseFilters","=","Application",".","get","(",")","\n			",".","getRequestCycleSettings","(",")","\n			",".","getResponseFilters","(",")",";","\n\n		if","(","responseFilters","!=","null",")","\n		","{","\n			for","(","IResponseFilter","filter",":","responseFilters",")","\n			","{","\n				responseBuffer","=","filter",".","filter","(","responseBuffer",")",";","\n			","}","\n		","}","\n		return","responseBuffer",";","\n	"],"docstring_tokens":["Runs","the","configured","IResponseFilters","over","the","constructed","Ajax","response"],"prompt_tokens":[]}
{"code_tokens":["\n	public","void","addAll","(","Cookie[]","cookies",")","\n	","{","\n		if","(","cookies","!=","null",")","\n		","{","\n			addAll","(","Arrays",".","asList","(","cookies",")",")",";","\n		","}","\n	"],"docstring_tokens":["calls","add","on","each","cookie"],"prompt_tokens":[]}
{"code_tokens":["\n	public","List<Cookie>","asList","(",")","\n	","{","\n		ArrayList<Cookie>","ret","=","new","ArrayList<Cookie>","(",")",";","\n		ret",".","addAll","(","cookies",".","values","(",")",")",";","\n		return","ret",";","\n	"],"docstring_tokens":["list","of","non","expired","cookies"],"prompt_tokens":[]}
{"code_tokens":["\n	public","List<Cookie>","expiredAsList","(",")","\n	","{","\n		ArrayList<Cookie>","ret","=","new","ArrayList<Cookie>","(",")",";","\n		ret",".","addAll","(","expiredCookies",".","values","(",")",")",";","\n		return","ret",";","\n	"],"docstring_tokens":["list","of","expired","cookies"],"prompt_tokens":[]}
{"code_tokens":["\n	public","List<Cookie>","allAsList","(",")","\n	","{","\n		ArrayList<Cookie>","ret","=","new","ArrayList<Cookie>","(",")",";","\n		ret",".","addAll","(","cookies",".","values","(",")",")",";","\n		ret",".","addAll","(","expiredCookies",".","values","(",")",")",";","\n		return","ret",";","\n	"],"docstring_tokens":["list","of","all","cookies,","expired","or","not"],"prompt_tokens":[]}
{"code_tokens":["\n	protected","void","onBeforeRespond","(","Response","response",")","{","\n	"],"docstring_tokens":["Hook-method","called","before","components","are","written"],"prompt_tokens":[]}
{"code_tokens":["\n	protected","void","onAfterRespond","(","Response","response",")","{","\n	"],"docstring_tokens":["Hook-method","called","after","components","are","written"],"prompt_tokens":[]}
{"code_tokens":["\n	public","final","void","add","(","final","Component","component,","final","String","markupId",")","\n	","{","\n		Args",".","notEmpty","(","markupId,","\"markupId\"",")",";","\n		Args",".","notNull","(","component,","\"component\"",")",";","\n\n		if","(","component","instanceof","Page",")","\n		","{","\n			if","(","component","!=","page",")","\n			","{","\n				throw","new","IllegalArgumentException","(","\"Cannot","add","another","page\"",")",";","\n			","}","\n		","}","\n		else\n		","{","\n			Page","pageOfComponent","=","component",".","findParent","(","Page",".","class",")",";","\n			if","(","pageOfComponent","==","null",")","\n			","{","\n				//","no","longer","on","page","-","log","the","error","but","don't","block","the","user","of","the","application\n				//","(","which","was","the","behavior","in","Wicket","<=","7",")",".","\n				LOG",".","warn","(","\"Component","'","{","}","'","not","cannot","be","updated","because","it","was","already","removed","from","page\",","component",")",";","\n				return",";","\n			","}","\n			else","if","(","pageOfComponent","!=","page",")","\n			","{","\n				//","on","another","page\n				throw","new","IllegalArgumentException","(","\"Component","\"","+","component",".","toString","(",")","+","\"","cannot","be","updated","because","it","is","on","another","page",".","\"",")",";","\n			","}","\n\n			if","(","component","instanceof","AbstractRepeater",")","\n			","{","\n				throw","new","IllegalArgumentException","(","\n					\"Component","\"","+\n					Classes",".","name","(","component",".","getClass","(",")",")","+\n					\"","is","a","repeater","and","cannot","be","added","to","a","partial","page","update","directly",".","\"","+\n					\"Instead","add","its","parent","or","another","markup","container","higher","in","the","hierarchy",".","\"",")",";","\n			","}","\n		","}","\n\n		if","(","componentsFrozen",")","\n		","{","\n			throw","new","IllegalStateException","(","\"A","partial","update","of","the","page","is","being","rendered,","component","\"","+","component",".","toString","(",")","+","\"","can","no","longer","be","added\"",")",";","\n		","}","\n\n		component",".","setMarkupId","(","markupId",")",";","\n		markupIdToComponent",".","put","(","markupId,","component",")",";","\n	"],"docstring_tokens":["Adds","a","component","to","be","updated","at","the","client","side","with","its","current","markup"],"prompt_tokens":[]}
{"code_tokens":["\n	public","void","detach","(","IRequestCycle","requestCycle",")","\n	","{","\n		for","(","final","Component","component",":","markupIdToComponent",".","values","(",")",")","{","\n			final","Page","parentPage","=","component",".","findParent","(","Page",".","class",")",";","\n			if","(","parentPage","!=","null",")","{","\n				parentPage",".","detach","(",")",";","\n				break",";","\n			","}","\n		","}","\n	"],"docstring_tokens":["Detaches","the","page","if","at","least","one","of","its","components","was","updated"],"prompt_tokens":[]}
{"code_tokens":["\n	protected","long","cullPageNumber","(","long","pageNumber",")","\n	","{","\n		long","idx","=","pageNumber",";","\n		if","(","idx","<","0",")","\n		","{","\n			idx","=","pageable",".","getPageCount","(",")","+","idx",";","\n		","}","\n\n		if","(","idx",">","(","pageable",".","getPageCount","(",")","-","1",")",")","\n		","{","\n			idx","=","pageable",".","getPageCount","(",")","-","1",";","\n		","}","\n\n		if","(","idx","<","0",")","\n		","{","\n			idx","=","0",";","\n		","}","\n\n		return","idx",";","\n	"],"docstring_tokens":["Allows","the","link","to","cull","the","page","number","to","the","valid","range","before","it","is","retrieved","from","the	","link"],"prompt_tokens":[]}
{"code_tokens":["\n	@Override\n	public","final","boolean","linksTo","(","final","Page","page",")","\n	","{","\n		return","getPageNumber","(",")","==","pageable",".","getCurrentPage","(",")",";","\n	"],"docstring_tokens":["Returns","true","if","this","PageableListView","navigation","link","links","to","the","given","page"],"prompt_tokens":[]}
{"code_tokens":["\n	protected","void","encodePageComponentInfo","(","Url","url,","PageComponentInfo","info",")","\n	","{","\n		Args",".","notNull","(","url,","\"url\"",")",";","\n\n		if","(","info","!=","null",")","\n		","{","\n			String","s","=","info",".","toString","(",")",";","\n			if","(","!Strings",".","isEmpty","(","s",")",")","\n			","{","\n				QueryParameter","parameter","=","new","QueryParameter","(","s,","\"\"",")",";","\n				url",".","getQueryParameters","(",")",".","add","(","parameter",")",";","\n			","}","\n		","}","\n	"],"docstring_tokens":["Encodes","the","PageComponentInfo","instance","as","the","first","query","string","parameter","to","the	","URL"],"prompt_tokens":[]}
{"code_tokens":["\n	protected","Class<?","extends","IRequestablePage>","getPageClass","(","String","name",")","\n	","{","\n		String","cleanedClassName","=","cleanClassName","(","name",")",";","\n		return","WicketObjects",".","resolveClass","(","cleanedClassName",")",";","\n	"],"docstring_tokens":["Loads","page","class","with","given","name"],"prompt_tokens":[]}
{"code_tokens":["\n	protected","String","importAsString","(",")","\n	","{","\n		//","gets","the","model","object:","should","provide","us","with","either","an","absolute","or","a\n		//","relative","url\n		String","url","=","getModelObject","(",")",";","\n\n		if","(","UrlUtils",".","isRelative","(","url",")",")","\n		","{","\n			return","importRelativeUrl","(","url",")",";","\n		","}","\n		else\n		","{","\n			return","importAbsoluteUrl","(","url",")",";","\n		","}","\n	"],"docstring_tokens":["Imports","the","contents","of","the","url","of","the","model","object"],"prompt_tokens":[]}
{"code_tokens":["\n	public","ContainerInfo","getContainerInfo","(",")","\n	","{","\n		return","containerInfo",";","\n	"],"docstring_tokens":["Get","the","container","info","associated","with","the","markup"],"prompt_tokens":[]}
{"code_tokens":["\n	public","IResourceStream","getResource","(",")","\n	","{","\n		return","resourceStream",";","\n	"],"docstring_tokens":["Gets","the","resource","that","contains","this","markup"],"prompt_tokens":[]}
{"code_tokens":["\n	public","String","getWicketNamespace","(",")","\n	","{","\n		return","wicketNamespace",";","\n	"],"docstring_tokens":["Get","the","wicket","namespace","valid","for","this","specific","markup"],"prompt_tokens":[]}
{"code_tokens":["\n	public","Markup","getBaseMarkup","(",")","\n	","{","\n		return","baseMarkup",";","\n	"],"docstring_tokens":["In","case","of","markup","inheritance,","the","base","markup","resource"],"prompt_tokens":[]}
{"code_tokens":["\n	private","Markup","getBaseMarkup","(","final","MarkupContainer","container,","final","Markup","markup,\n		final","boolean","enforceReload",")","\n	","{","\n		final","Class<?>","location","=","markup",".","getMarkupResourceStream","(",")",".","getMarkupClass","(",")",".","getSuperclass","(",")",";","\n\n		//","get","the","base","markup\n		return","MarkupFactory",".","get","(",")",".","getMarkup","(","container,","location,","enforceReload",")",";","\n	"],"docstring_tokens":["Load","the","base","markup"],"prompt_tokens":[]}
{"code_tokens":["\n	@Override\n	public","boolean","linksTo","(","final","Page","page",")","\n	","{","\n		pageable",".","getCurrentPage","(",")",";","\n		return","(","(","increment","<","0",")","&&","isFirst","(",")",")","||","(","(","increment",">","0",")","&&","isLast","(",")",")",";","\n	"],"docstring_tokens":["Returns","true","if","the","page","link","links","to","the","given","page"],"prompt_tokens":[]}
{"code_tokens":["\n	public","void","setCookies","(","List<Cookie>","cookies",")","\n	","{","\n		this",".","cookies",".","clear","(",")",";","\n		this",".","cookies",".","addAll","(","cookies",")",";","\n	"],"docstring_tokens":["Sets","cookies","for","current","request"],"prompt_tokens":[]}
{"code_tokens":["\n	public","final","void","addListener","(","final","IBreadCrumbModelListener","listener",")","\n	","{","\n		Args",".","notNull","(","listener,","\"listener\"",")",";","\n		listeners",".","add","(","listener",")",";","\n	"],"docstring_tokens":["Adds","a","bread","crumb","model","listener"],"prompt_tokens":[]}
{"code_tokens":["\n	public","final","void","fireBreadCrumbActivated","(","final","IBreadCrumbParticipant","previousParticipant,\n		final","IBreadCrumbParticipant","breadCrumbParticipant",")","\n	","{","\n		for","(","IBreadCrumbModelListener","listener",":","listeners",")","\n		","{","\n			listener",".","breadCrumbActivated","(","previousParticipant,","breadCrumbParticipant",")",";","\n		","}","\n	"],"docstring_tokens":["Notifies","all","listeners","that","a","bread","crumb","was","activated"],"prompt_tokens":[]}
{"code_tokens":["\n	public","final","void","fireBreadCrumbAdded","(","final","IBreadCrumbParticipant","breadCrumbParticipant",")","\n	","{","\n		for","(","IBreadCrumbModelListener","listener",":","listeners",")","\n		","{","\n			listener",".","breadCrumbAdded","(","breadCrumbParticipant",")",";","\n		","}","\n	"],"docstring_tokens":["Notifies","all","listeners","that","a","new","bread","crumb","was","added"],"prompt_tokens":[]}
{"code_tokens":["\n	public","final","void","fireBreadCrumbRemoved","(","final","IBreadCrumbParticipant","breadCrumbParticipant",")","\n	","{","\n		for","(","IBreadCrumbModelListener","listener",":","listeners",")","\n		","{","\n			listener",".","breadCrumbRemoved","(","breadCrumbParticipant",")",";","\n		","}","\n	"],"docstring_tokens":["Notifies","all","listeners","that","a","bread","crumb","was","removed"],"prompt_tokens":[]}
{"code_tokens":["\n	public","final","void","removeListener","(","final","IBreadCrumbModelListener","listener",")","\n	","{","\n		if","(","listener","!=","null",")","\n		","{","\n			listeners",".","remove","(","listener",")",";","\n		","}","\n	"],"docstring_tokens":["Removes","a","bread","crumb","model","listener"],"prompt_tokens":[]}
{"code_tokens":["\n	protected","boolean","isRequired","(",")","\n	","{","\n		BeanValidationContext","config","=","BeanValidationConfiguration",".","get","(",")",";","\n\n		HashSet<Class<?>>","groups","=","new","HashSet<Class<?>>","(","Arrays",".","asList","(","getGroups","(",")",")",")",";","\n\n		Iterator<ConstraintDescriptor<?>>","it","=","new","ConstraintIterator","(","config",".","getValidator","(",")",",","getProperty","(",")",")",";","\n		while","(","it",".","hasNext","(",")",")","\n		","{","\n			ConstraintDescriptor<?>","constraint","=","it",".","next","(",")",";","\n			\n			if","(","config",".","isRequiredConstraint","(","constraint",")",")","\n			","{","\n				if","(","canApplyToDefaultGroup","(","constraint",")","&&","groups",".","size","(",")","==","0",")","\n				","{","\n					return","true",";","\n				","}","\n		\n				for","(","Class<?>","constraintGroup",":","constraint",".","getGroups","(",")",")","\n				","{","\n					if","(","groups",".","contains","(","constraintGroup",")",")","\n					","{","\n						return","true",";","\n					","}","\n				","}","\n			","}","\n		","}","\n\n		return","false",";","\n	"],"docstring_tokens":["Should","this","property","make","the","owning","component","required"],"prompt_tokens":[]}
{"code_tokens":["\n	protected","final","MarkupContainer","getMarkupProvider","(","final","Component","component",")","\n	","{","\n		return","(","markupProvider","!=","null","?","markupProvider",":","component",".","getParent","(",")",")",";","\n	"],"docstring_tokens":["Returns","markup","provider","associated","with","this","fragment"],"prompt_tokens":[]}
{"code_tokens":["\n	public","IMarkupFragment","chooseMarkup","(","final","Component","component",")","\n	","{","\n		return","getMarkupProvider","(","component",")",".","getMarkup","(","null",")",";","\n	"],"docstring_tokens":["Get","the","markup","stream","which","shall","be","used","to","search","for","the","fragment"],"prompt_tokens":[]}
{"code_tokens":["\n	public","final","boolean","anyErrorMessage","(",")","\n	","{","\n		return","anyMessage","(","FeedbackMessage",".","ERROR",")",";","\n	"],"docstring_tokens":["Search","messages","that","this","panel","will","render,","and","see","if","there","is","any","message","of","level","ERROR	","or","up"],"prompt_tokens":[]}
{"code_tokens":["\n	public","final","boolean","anyMessage","(",")","\n	","{","\n		return","anyMessage","(","FeedbackMessage",".","UNDEFINED",")",";","\n	"],"docstring_tokens":["Search","messages","that","this","panel","will","render,","and","see","if","there","is","any","message"],"prompt_tokens":[]}
{"code_tokens":["\n	public","final","boolean","anyMessage","(","int","level",")","\n	","{","\n		List<FeedbackMessage>","msgs","=","getCurrentMessages","(",")",";","\n\n		for","(","FeedbackMessage","msg",":","msgs",")","\n		","{","\n			if","(","msg",".","isLevel","(","level",")",")","\n			","{","\n				return","true",";","\n			","}","\n		","}","\n\n		return","false",";","\n	"],"docstring_tokens":["Search","messages","that","this","panel","will","render,","and","see","if","there","is","any","message","of","the","given	","level"],"prompt_tokens":[]}
{"code_tokens":["\n	public","final","FeedbackPanel","setFilter","(","IFeedbackMessageFilter","filter",")","\n	","{","\n		getFeedbackMessagesModel","(",")",".","setFilter","(","filter",")",";","\n		return","this",";","\n	"],"docstring_tokens":["Sets","a","filter","to","use","on","the","feedback","messages","model"],"prompt_tokens":[]}
{"code_tokens":["\n	protected","String","getCSSClass","(","final","FeedbackMessage","message",")","\n	","{","\n		String","cssClass",";","\n		switch","(","message",".","getLevel","(",")",")","\n		","{","\n			case","FeedbackMessage",".","UNDEFINED:\n				cssClass","=","getString","(","FeedbackMessage",".","UNDEFINED_CSS_CLASS_KEY",")",";","\n				break",";","\n			case","FeedbackMessage",".","DEBUG:\n				cssClass","=","getString","(","FeedbackMessage",".","DEBUG_CSS_CLASS_KEY",")",";","\n				break",";","\n			case","FeedbackMessage",".","INFO:\n				cssClass","=","getString","(","FeedbackMessage",".","INFO_CSS_CLASS_KEY",")",";","\n				break",";","\n			case","FeedbackMessage",".","SUCCESS:\n				cssClass","=","getString","(","FeedbackMessage",".","SUCCESS_CSS_CLASS_KEY",")",";","\n				break",";","\n			case","FeedbackMessage",".","WARNING:\n				cssClass","=","getString","(","FeedbackMessage",".","WARNING_CSS_CLASS_KEY",")",";","\n				break",";","\n			case","FeedbackMessage",".","ERROR:\n				cssClass","=","getString","(","FeedbackMessage",".","ERROR_CSS_CLASS_KEY",")",";","\n				break",";","\n			case","FeedbackMessage",".","FATAL:\n				cssClass","=","getString","(","FeedbackMessage",".","FATAL_CSS_CLASS_KEY",")",";","\n				break",";","\n			default:\n				cssClass","=","\"feedbackPanel\"","+","message",".","getLevelAsString","(",")",";","\n		","}","\n		return","cssClass",";","\n	"],"docstring_tokens":["Gets","the","css","class","for","the","given","message"],"prompt_tokens":[]}
{"code_tokens":["\n	protected","final","List<FeedbackMessage>","getCurrentMessages","(",")","\n	","{","\n		final","List<?","extends","FeedbackMessage>","messages","=","messageListView",".","getModelObject","(",")",";","\n		return","Collections",".","unmodifiableList","(","messages",")",";","\n	"],"docstring_tokens":["Gets","the","currently","collected","messages","for","this","panel"],"prompt_tokens":[]}
{"code_tokens":["\n	public","final","String","getExtension","(",")","\n	","{","\n		String","name","=","getName","(",")",";","\n\n		final","int","queryAt","=","name",".","indexOf","(","'?'",")",";","\n\n		//","remove","query","string","part\n		if","(","queryAt","!=","-1",")","\n		","{","\n			name","=","name",".","substring","(","0,","queryAt",")",";","\n		","}","\n\n		//","get","start","of","extension\n		final","int","extPos","=","name",".","lastIndexOf","(","'",".","'",")",";","\n\n		if","(","extPos","==","-1",")","\n		","{","\n			return","null",";","\n		","}","\n\n		//","return","extension\n		return","name",".","substring","(","extPos","+","1",")",".","toLowerCase","(","Locale",".","ROOT",")",";","\n	"],"docstring_tokens":["returns","extension","of","the","resource","reference"],"prompt_tokens":[]}
{"code_tokens":["\n	public","boolean","canBeRegistered","(",")","\n	","{","\n		return","true",";","\n	"],"docstring_tokens":["Can","be","used","to","disable","registering","certain","resource","references","in	","ResourceReferenceRegistry"],"prompt_tokens":[]}
{"code_tokens":["\n	public","UrlAttributes","getUrlAttributes","(",")","\n	","{","\n		return","new","UrlAttributes","(","getLocale","(",")",",","getStyle","(",")",",","getVariation","(",")",")",";","\n	"],"docstring_tokens":["Allows","to","specify","which","locale,","style","and","variation","values","will","the","generated","URL","for","this	","resource","reference","have"],"prompt_tokens":[]}
{"code_tokens":["\n	protected","IModel<F>","getFilterModel","(","final","FilterForm<?>","form",")","\n	","{","\n		return","new","PropertyModel<>","(","form",".","getDefaultModel","(",")",",","getPropertyExpression","(",")",")",";","\n	"],"docstring_tokens":["Returns","the","model","that","will","be","passed","on","to","the","text","filter"],"prompt_tokens":[]}
{"code_tokens":["\n	@Override\n	public","String","getTextFormat","(",")","\n	","{","\n		return","datePattern",";","\n	"],"docstring_tokens":["Returns","the","date","pattern"],"prompt_tokens":[]}
{"code_tokens":["\n	private","static","String","defaultDatePattern","(",")","\n	","{","\n		//","It","is","possible","to","retrieve","from","session?\n		Locale","locale","=","Session",".","get","(",")",".","getLocale","(",")",";","\n		if","(","locale","!=","null",")","\n		","{","\n			DateFormat","format","=","DateFormat",".","getDateInstance","(","DateFormat",".","SHORT,","locale",")",";","\n			if","(","format","instanceof","SimpleDateFormat",")","\n			","{","\n				return","(","(","SimpleDateFormat",")","format",")",".","toPattern","(",")",";","\n			","}","\n		","}","\n		return","DEFAULT_PATTERN",";","\n	"],"docstring_tokens":["Try","to","get","datePattern","from","user","session","locale"],"prompt_tokens":[]}
{"code_tokens":["\n	protected","void","checkComponent","(","FormComponent<?>","component",")","\n	","{","\n		if","(","Application",".","get","(",")",".","usesDevelopmentConfig","(",")","\n			&&","AjaxFormChoiceComponentUpdatingBehavior",".","appliesTo","(","component",")",")","\n		","{","\n			log",".","warn","(","String\n				",".","format","(","\n					\"AjaxFormComponentUpdatingBehavior","is","not","supposed","to","be","added","in","the","form","component","at","path:","\\\"%s\\\"",".","\"\n						+","\"Use","the","AjaxFormChoiceComponentUpdatingBehavior","instead,","that","is","meant","for","choices/groups","that","are","not","one","component","in","the","html","but","many\",\n					component",".","getPageRelativePath","(",")",")",")",";","\n		","}","\n	"],"docstring_tokens":["Check","the","component","this","behavior","is","bound","to.	","	","Logs","a","warning","in","development","mode","when","an","AjaxFormChoiceComponentUpdatingBehavior	","should","be","used"],"prompt_tokens":[]}
{"code_tokens":["\n	public","static","AjaxFormComponentUpdatingBehavior","onUpdate","(","String","eventName,\n		SerializableConsumer<AjaxRequestTarget>","onUpdate",")","\n	","{","\n		Args",".","notNull","(","onUpdate,","\"onUpdate\"",")",";","\n\n		return","new","AjaxFormComponentUpdatingBehavior","(","eventName",")","\n		","{","\n			private","static","final","long","serialVersionUID","=","1L",";","\n\n			@Override\n			protected","void","onUpdate","(","AjaxRequestTarget","target",")","\n			","{","\n				onUpdate",".","accept","(","target",")",";","\n			","}","\n		","}",";","\n	"],"docstring_tokens":["Creates","an","AjaxFormComponentUpdatingBehavior","based","on","lambda","expressions"],"prompt_tokens":[]}
{"code_tokens":["\n	@Override\n	public","Component","newNodeComponent","(","String","id,","IModel<T>","model",")","\n	","{","\n		Component","node","=","super",".","newNodeComponent","(","id,","model",")",";","\n\n		node",".","setOutputMarkupId","(","true",")",";","\n\n		return","node",";","\n	"],"docstring_tokens":["Overridden","to","let","the","node","output","its","markup","id"],"prompt_tokens":[]}
{"code_tokens":["\r\n	public","static","String","getMinifiedName","(","String","name,","String","minPostfix",")","\r\n	","{","\r\n		String","minifiedName",";","\r\n		int","idxOfExtension","=","name",".","lastIndexOf","(","'",".","'",")",";","\r\n		final","String","dottedPostfix","=","\"",".","\"","+","minPostfix",";","\r\n		\r\n		if","(","idxOfExtension",">","-1",")","\r\n		","{","\r\n			String","extension","=","name",".","substring","(","idxOfExtension",")",";","\r\n			final","String","baseName","=","name",".","substring","(","0,","name",".","length","(",")","-","extension",".","length","(",")","+","1",")",";","\r\n			if","(","!dottedPostfix",".","equals","(","extension",")","&&","!baseName",".","endsWith","(","dottedPostfix","+","\"",".","\"",")",")","\r\n			","{","\r\n				minifiedName","=","baseName","+","minPostfix","+","extension",";","\r\n			","}","else\r\n			","{","\r\n				minifiedName","=","name",";","\r\n			","}","\r\n		","}","else\r\n		","{","\r\n			minifiedName","=","name","+","dottedPostfix",";","\r\n		","}","\r\n		return","minifiedName",";","\r\n	"],"docstring_tokens":["Return","the","minified","version","for","a","given","resource","name"],"prompt_tokens":[]}
{"code_tokens":["\n	@Around","(","\"execution","(","*","org",".","apache",".","wicket",".","request",".","IRequestHandler",".","detach","(",".",".",")",")","\"",")","\n	public","Object","aroundOnRender","(","ProceedingJoinPoint","joinPoint",")","throws","Throwable\n	","{","\n		return","measureTime","(","\"core/requesthandler/detach\",","joinPoint",")",";","\n	"],"docstring_tokens":["Collects","data","how","often","a","request","handler","calls","detach"],"prompt_tokens":[]}
{"code_tokens":["\r\n	public","Kind","getKind","(",")","\r\n	","{","\r\n		return","kind",";","\r\n	"],"docstring_tokens":["Gets","the","kind","of","the","track","belongs","to","the","media","component"],"prompt_tokens":[]}
{"code_tokens":["\r\n	public","String","getLabel","(",")","\r\n	","{","\r\n		return","label",";","\r\n	"],"docstring_tokens":["The","label","for","this","track"],"prompt_tokens":[]}
{"code_tokens":["\r\n	public","void","setLabel","(","String","label",")","\r\n	","{","\r\n		this",".","label","=","label",";","\r\n	"],"docstring_tokens":["Sets","the","label","for","this","track"],"prompt_tokens":[]}
{"code_tokens":["\r\n	public","PageParameters","getPageParameters","(",")","\r\n	","{","\r\n		return","pageParameters",";","\r\n	"],"docstring_tokens":["Gets","the","page","parameter","applied","to","the","URL","of","the","track"],"prompt_tokens":[]}
{"code_tokens":["\r\n	public","void","setPageParameters","(","PageParameters","pageParameters",")","\r\n	","{","\r\n		this",".","pageParameters","=","pageParameters",";","\r\n	"],"docstring_tokens":["Sets","the","page","parameter","applied","to","the","URL","of","the","track"],"prompt_tokens":[]}
{"code_tokens":["\n	@Override\n	public","final","String","loadStringResource","(","final","Class<?>","clazz,","final","String","key,","Locale","locale,\n		final","String","style,","final","String","variation",")","\n	","{","\n		if","(","locale","==","null",")","\n		","{","\n			locale","=","Session",".","exists","(",")","?","Session",".","get","(",")",".","getLocale","(",")",":","Locale",".","getDefault","(",")",";","\n		","}","\n		try\n		","{","\n			return","ResourceBundle",".","getBundle","(","bundleName,","locale",")",".","getString","(","key",")",";","\n		","}","\n		catch","(","MissingResourceException","mrx",")","\n		","{","\n			try\n			","{","\n				return","ResourceBundle",".","getBundle","(","bundleName,","locale,","Thread",".","currentThread","(",")",".","getContextClassLoader","(",")",")",".","getString","(","key",")",";","\n			","}","\n			catch","(","MissingResourceException","mrx2",")","\n			","{","\n				return","null",";","\n			","}","\n		","}","\n	"],"docstring_tokens":["Get","the","value","via","a","Java","ResourceBundle"],"prompt_tokens":[]}
{"code_tokens":["\r\n	@Override\r\n	protected","void","onComponentTag","(","ComponentTag","tag",")","\r\n	","{","\r\n		this",".","checkComponentTag","(","tag,","\"picture\"",")",";","\r\n		super",".","onComponentTag","(","tag",")",";","\r\n	"],"docstring_tokens":["builds","the","component","tag","and","checks","the","tag","to","be","a","picture"],"prompt_tokens":[]}
{"code_tokens":["\n	private","String","getStringValue","(",")","\n	","{","\n		T","value","=","getModelObject","(",")",";","\n		String","converted","=","value","!=","null","?","getString","(","resourceKey","(","value",")",")",":","nullValue","(",")",";","\n		return","getDefaultModelObjectAsString","(","converted",")",";","\n	"],"docstring_tokens":["Converts","model","object","into","the","display","value"],"prompt_tokens":[]}
{"code_tokens":["\n	protected","String","resourceKey","(","T","value",")","\n	","{","\n		return","Classes",".","simpleName","(","value",".","getDeclaringClass","(",")",")","+","'",".","'","+","value",".","name","(",")",";","\n	"],"docstring_tokens":["Converts","enum","value","into","a","resource","key","that","should","be","used","to","lookup","the","text","the","label","will	","display"],"prompt_tokens":[]}
{"code_tokens":["\n	public","synchronized","void","removePage","(","int","pageId",")","\n	","{","\n		int","index","=","getWindowIndex","(","pageId",")",";","\n		if","(","index","!=","-1",")","\n		","{","\n			FileWindow","window","=","windows",".","get","(","index",")",";","\n			removeWindowIndex","(","pageId",")",";","\n			if","(","index","==","windows",".","size","(",")","-","1",")","\n			","{","\n				windows",".","remove","(","index",")",";","\n				totalSize","-=","window",".","filePartSize",";","\n				if","(","indexPointer","==","index",")","\n				","{","\n					--indexPointer",";","\n				","}","\n			","}","\n			else\n			","{","\n				window",".","id","=","-1",";","\n			","}","\n		","}","\n	"],"docstring_tokens":["Removes","the","page","window","for","given","page"],"prompt_tokens":[]}
{"code_tokens":["\n	public","synchronized","List<FileWindow>","getFileWindows","(",")","\n	","{","\n		List<FileWindow>","result","=","new","ArrayList<>","(",")",";","\n\n		//","start","from","current","index","to","0\n		int","currentIndex","=","indexPointer",";","\n\n		do\n		","{","\n			if","(","currentIndex","==","-1",")","\n			","{","\n				break",";","\n			","}","\n\n			if","(","currentIndex","<","windows",".","size","(",")",")","\n			","{","\n				FileWindow","window","=","windows",".","get","(","currentIndex",")",";","\n				if","(","window",".","id","!=","-1",")","\n				","{","\n					result",".","add","(","window",")",";","\n				","}","\n			","}","\n\n			--currentIndex",";","\n			if","(","currentIndex","==","-1",")","\n			","{","\n				//","rewind","to","the","last","entry","and","collect","all","entries","until","current","index\n				currentIndex","=","windows",".","size","(",")","-","1",";","\n			","}","\n		","}","\n		while","(","currentIndex","!=","indexPointer",")",";","\n\n		return","result",";","\n	"],"docstring_tokens":["Returns","last","n","saved","page","windows"],"prompt_tokens":[]}
{"code_tokens":["\n	public","synchronized","int","getTotalSize","(",")","\n	","{","\n		return","totalSize",";","\n	"],"docstring_tokens":["Returns","the","size","of","all","saved","pages"],"prompt_tokens":[]}
{"code_tokens":["\n	private","String","getStatusString","(","long","timeTaken,","String","resourceKey",")","\n	","{","\n		final","HashMap<String,","String>","map","=","new","HashMap<String,","String>","(","4",")",";","\n		map",".","put","(","\"servertime\",","(","(","double",")","timeTaken",")","/","1000","+","\"s\"",")",";","\n		map",".","put","(","\"clienttime\",","\"'","+","(","new","Date","(",")",".","getTime","(",")","-","clientTimeVariable",")","/1000","+","'s\"",")",";","\n\n		return","Application",".","get","(",")","\n			",".","getResourceSettings","(",")","\n			",".","getLocalizer","(",")","\n			",".","getString","(","resourceKey,","null,","Model",".","of","(","map",")",",\n				\"'Server","parsetime:","$","{","servertime","}",",","Client","parsetime:","$","{","clienttime","}","'\"",")",";","\n	"],"docstring_tokens":["Returns","a","locale","specific","status","message","about","the","server","and","client","time"],"prompt_tokens":[]}
{"code_tokens":["\n	@Override\n	public","void","updateBranch","(","T","node,","IPartialPageRequestHandler","target",")","\n	","{","\n		//","TableTree","always","outputs","markupId\n		target",".","add","(","this",")",";","\n	"],"docstring_tokens":["For","updating","of","a","single","branch","the","whole","table","is","added","to","the","ART"],"prompt_tokens":[]}
{"code_tokens":["\n	public","boolean","equalTo","(","final","MarkupStream","that",")","\n	","{","\n		//","While","a","has","more","markup","elements\n		while","(","isCurrentIndexInsideTheStream","(",")",")","\n		","{","\n			//","Get","an","element","from","each\n			final","MarkupElement","thisElement","=","this",".","get","(",")",";","\n			final","MarkupElement","thatElement","=","that",".","get","(",")",";","\n\n			//","and","if","the","elements","are","not","equal\n			if","(","thisElement","!=","null","&&","thatElement","!=","null",")","\n			","{","\n				if","(","!thisElement",".","equalTo","(","thatElement",")",")","\n				","{","\n					//","fail","the","comparison\n					return","false",";","\n				","}","\n			","}","\n			else\n			","{","\n				//","If","one","element","is","null,\n				if","(","!","(","thisElement","==","null","&&","thatElement","==","null",")",")","\n				","{","\n					//","fail","the","comparison\n					return","false",";","\n				","}","\n			","}","\n			next","(",")",";","\n			that",".","next","(",")",";","\n		","}","\n\n		//","If","we've","run","out","of","markup","elements","in","b\n		if","(","!that",".","isCurrentIndexInsideTheStream","(",")",")","\n		","{","\n			//","then","the","two","streams","match","perfectly\n			return","true",";","\n		","}","\n\n		//","Stream","b","had","extra","elements\n		return","false",";","\n	"],"docstring_tokens":["Compare","this","markup","stream","with","another","one"],"prompt_tokens":[]}
{"code_tokens":["\n	public","void","skipUntil","(","final","String","wicketTagName",")","\n	","{","\n		while","(","true",")","\n		","{","\n			if","(","(","current","instanceof","WicketTag",")","&&\n				","(","(","WicketTag",")","current",")",".","getName","(",")",".","equals","(","wicketTagName",")",")","\n			","{","\n				return",";","\n			","}","\n\n			//","go","on","until","we","reach","the","end\n			if","(","next","(",")","==","null",")","\n			","{","\n				return",";","\n			","}","\n		","}","\n	"],"docstring_tokens":["Skips","any","markup","at","the","current","position","until","the","wicket","tag","name","is","found"],"prompt_tokens":[]}
{"code_tokens":["\n	public","void","skipToMatchingCloseTag","(","final","ComponentTag","openTag",")","\n	","{","\n		//","Loop","through","the","markup","in","this","container\n		while","(","isCurrentIndexInsideTheStream","(",")",")","\n		","{","\n			//","If","the","current","markup","tag","closes","the","openTag\n			if","(","get","(",")",".","closes","(","openTag",")",")","\n			","{","\n				//","Done!\n				return",";","\n			","}","\n\n			//","Skip","element\n			next","(",")",";","\n		","}","\n		throwMarkupException","(","\"Expected","close","tag","for","\"","+","openTag",")",";","\n	"],"docstring_tokens":["Renders","markup","until","a","closing","tag","for","openTag","is","reached"],"prompt_tokens":[]}
{"code_tokens":["\n	public","final","ComponentTag","getPreviousTag","(",")","\n	","{","\n		MarkupElement","elem","=","get","(","currentIndex","-","1",")",";","\n		if","(","(","elem","instanceof","ComponentTag",")","==","false",")","\n		","{","\n			throwMarkupException","(","\"Tag","expected\"",")",";","\n		","}","\n\n		return","(","ComponentTag",")","elem",";","\n	"],"docstring_tokens":["Sometime","its","necessary","to","get","the","previous","markup","element","versus","the","current","one"],"prompt_tokens":[]}
{"code_tokens":["\n	public","final","Markup","parse","(",")","throws","IOException,","ResourceStreamNotFoundException\n	","{","\n		//","The","root","of","all","markup","filters","is","the","xml","parser\n		markupFilterChain","=","new","RootMarkupFilter","(","xmlParser,","markup",".","getMarkupResourceStream","(",")",")",";","\n\n		//","Convert","the","list","of","markup","filters","into","a","chain\n		for","(","IMarkupFilter","filter",":","getMarkupFilters","(",")",")","\n		","{","\n			filter",".","setNextFilter","(","markupFilterChain",")",";","\n			markupFilterChain","=","filter",";","\n		","}","\n\n		//","Initialize","the","xml","parser\n		MarkupResourceStream","markupResourceStream","=","markup",".","getMarkupResourceStream","(",")",";","\n		xmlParser",".","parse","(","markupResourceStream",".","getResource","(",")",".","getInputStream","(",")",",\n			markupSettings",".","getDefaultMarkupEncoding","(",")",")",";","\n\n		//","parse","the","xml","markup","and","tokenize","it","into","wicket","relevant","markup\n		//","elements\n		parseMarkup","(",")",";","\n\n		markupResourceStream",".","setEncoding","(","xmlParser",".","getEncoding","(",")",")",";","\n		markupResourceStream",".","setDoctype","(","xmlParser",".","getDoctype","(",")",")",";","\n\n		if","(","xmlParser",".","getEncoding","(",")","==","null",")","\n		","{","\n			String","a","=","\"The","markup","file","does","not","have","a","XML","declaration","prolog","with","'encoding'","attribute\"",";","\n			String","b","=","\"",".","E",".","g",".","<?xml","version=\\\"1",".","0\\\"","encoding=\\\"UTF-8\\\"","?>\"",";","\n\n			if","(","markupSettings",".","getThrowExceptionOnMissingXmlDeclaration","(",")",")","\n			","{","\n				throw","new","MarkupException","(","markupResourceStream",".","getResource","(",")",",","a","+","b",")",";","\n			","}","\n			else\n			","{","\n				log",".","debug","(","a","+","\":\"","+","markupResourceStream",".","getResource","(",")","+","\"",".","It","is","safer","to","use","it\"","+\n					b",")",";","\n			","}","\n		","}","\n\n		return","markup",";","\n	"],"docstring_tokens":["Reads","and","parses","markup","from","a","file"],"prompt_tokens":[]}
{"code_tokens":["\n	private","MarkupElement","getNextTag","(",")","throws","ParseException\n	","{","\n		return","markupFilterChain",".","nextElement","(",")",";","\n	"],"docstring_tokens":["Get","the","next","tag","from","the","markup","file"],"prompt_tokens":[]}
{"code_tokens":["\n	private","void","parseMarkup","(",")","\n	","{","\n		try\n		","{","\n			//","always","remember","the","latest","index","(","size",")","\n			int","size","=","markup",".","size","(",")",";","\n\n			//","Loop","through","tags\n			MarkupElement","elem",";","\n			while","(","null","!=","(","elem","=","getNextTag","(",")",")",")","\n			","{","\n				if","(","elem","instanceof","HtmlSpecialTag",")","\n				","{","\n					elem","=","new","ComponentTag","(","(","(","HtmlSpecialTag",")","elem",")",".","getXmlTag","(",")",")",";","\n				","}","\n\n				if","(","elem","instanceof","ComponentTag",")","\n				","{","\n					ComponentTag","tag","=","(","ComponentTag",")","elem",";","\n\n					boolean","add","=","(","tag",".","getId","(",")","!=","null",")",";","\n					if","(","!add","&&","tag",".","isClose","(",")",")","\n					","{","\n						add","=","(","(","tag",".","getOpenTag","(",")","!=","null",")","&&","(","tag",".","getOpenTag","(",")",".","getId","(",")","!=","null",")",")",";","\n					","}","\n\n					//","Add","tag","to","list?\n					if","(","add","||","tag",".","isModified","(",")","||","(","markup",".","size","(",")","!=","size",")",")","\n					","{","\n						//","Add","text","from","last","position","to","the","current","tag","position\n						CharSequence","text","=","xmlParser",".","getInputFromPositionMarker","(","tag",".","getPos","(",")",")",";","\n						if","(","text",".","length","(",")",">","0",")","\n						","{","\n							text","=","handleRawText","(","text",".","toString","(",")",")",";","\n\n							//","Make","sure","you","add","it","at","the","correct","location",".","\n							//","IMarkupFilters","might","have","added","elements","as","well",".","\n							markup",".","addMarkupElement","(","size,","new","RawMarkup","(","text",")",")",";","\n						","}","\n\n						xmlParser",".","setPositionMarker","(",")",";","\n\n						if","(","add",")","\n						","{","\n							//","Add","to","the","markup","unless","the","tag","has","been","flagged","as\n							//","to","be","removed","from","the","markup",".","(","e",".","g",".","<wicket:remove>\n							if","(","tag",".","isIgnore","(",")","==","false",")","\n							","{","\n								markup",".","addMarkupElement","(","tag",")",";","\n							","}","\n						","}","\n						else","if","(","tag",".","isModified","(",")",")","\n						","{","\n							markup",".","addMarkupElement","(","new","RawMarkup","(","tag",".","toCharSequence","(",")",")",")",";","\n						","}","\n						else\n						","{","\n							xmlParser",".","setPositionMarker","(","tag",".","getPos","(",")",")",";","\n						","}","\n					","}","\n\n					//","always","remember","the","latest","index","(","size",")","\n					size","=","markup",".","size","(",")",";","\n				","}","\n			","}","\n		","}","\n		catch","(","final","ParseException","ex",")","\n		","{","\n			//","Add","remaining","input","string\n			final","CharSequence","text","=","xmlParser",".","getInputFromPositionMarker","(","-1",")",";","\n			if","(","text",".","length","(",")",">","0",")","\n			","{","\n				markup",".","addMarkupElement","(","new","RawMarkup","(","text",")",")",";","\n			","}","\n\n			markup",".","getMarkupResourceStream","(",")",".","setEncoding","(","xmlParser",".","getEncoding","(",")",")",";","\n			markup",".","getMarkupResourceStream","(",")",".","setDoctype","(","xmlParser",".","getDoctype","(",")",")",";","\n\n			final","MarkupStream","markupStream","=","new","MarkupStream","(","markup",")",";","\n			markupStream",".","setCurrentIndex","(","markup",".","size","(",")","-","1",")",";","\n			throw","new","MarkupException","(","markupStream,","ex",".","getMessage","(",")",",","ex",")",";","\n		","}","\n\n		//","Add","tail?\n		CharSequence","text","=","xmlParser",".","getInputFromPositionMarker","(","-1",")",";","\n		if","(","text",".","length","(",")",">","0",")","\n		","{","\n			text","=","handleRawText","(","text",".","toString","(",")",")",";","\n\n			//","Make","sure","you","add","it","at","the","correct","location",".","\n			//","IMarkupFilters","might","have","added","elements","as","well",".","\n			markup",".","addMarkupElement","(","new","RawMarkup","(","text",")",")",";","\n		","}","\n\n		postProcess","(","markup",")",";","\n\n		//","Make","all","tags","immutable","and","the","list","of","elements","unmodifiable\n		markup",".","makeImmutable","(",")",";","\n	"],"docstring_tokens":["Scans","the","given","markup","and","extracts","balancing","tags"],"prompt_tokens":[]}
{"code_tokens":["\n	protected","String","compressWhitespace","(","String","rawMarkup",")","\n	","{","\n		//","We","don't","want","to","compress","whitespace","inside","<pre>","tags,","so","we","look\n		//","for","matches","and:\n		//","-","Do","whitespace","compression","on","everything","before","the","first","match",".","\n		//","-","Append","the","<pre>",".","*?</pre>","match","with","no","compression",".","\n		//","-","Loop","to","find","the","next","match",".","\n		//","-","Append","with","compression","everything","between","the","two","matches",".","\n		//","-","Repeat","until","no","match,","then","special-case","the","fragment","after","the\n		//","last","<pre>",".","\n		Matcher","m","=","PRE_BLOCK",".","matcher","(","rawMarkup",")",";","\n		int","lastend","=","0",";","\n		StringBuilder","sb","=","null",";","\n		while","(","true",")","\n		","{","\n			boolean","matched","=","m",".","find","(",")",";","\n			String","nonPre","=","matched","?","rawMarkup",".","substring","(","lastend,","m",".","start","(",")",")","\n				:","rawMarkup",".","substring","(","lastend",")",";","\n			nonPre","=","SPACE_OR_TAB_PATTERN",".","matcher","(","nonPre",")",".","replaceAll","(","\"","\"",")",";","\n			nonPre","=","NEW_LINE_PATTERN",".","matcher","(","nonPre",")",".","replaceAll","(","\"\\n\"",")",";","\n\n			//","Don't","create","a","StringBuilder","if","we","don't","actually","need","one",".","\n			//","This","optimizes","the","trivial","common","case","where","there","is","no","<pre>\n			//","tag","at","all","down","to","just","doing","the","replaceAlls","above",".","\n			if","(","lastend","==","0",")","\n			","{","\n				if","(","matched",")","\n				","{","\n					sb","=","new","StringBuilder","(","rawMarkup",".","length","(",")",")",";","\n				","}","\n				else\n				","{","\n					return","nonPre",";","\n				","}","\n			","}","\n			sb",".","append","(","nonPre",")",";","\n			if","(","matched",")","\n			","{","\n				sb",".","append","(","m",".","group","(",")",")",";","\n				lastend","=","m",".","end","(",")",";","\n			","}","\n			else\n			","{","\n				break",";","\n			","}","\n		","}","\n		return","sb",".","toString","(",")",";","\n	"],"docstring_tokens":["Remove","whitespace","from","the","raw","markup"],"prompt_tokens":[]}
{"code_tokens":["\n	protected","boolean","isClickable","(",")","\n	","{","\n		return","false",";","\n	"],"docstring_tokens":["Clicking","is","disabled","by","default,","override","this","method","if","you","want","your","link","to","be","enabled"],"prompt_tokens":[]}
{"code_tokens":["\n	protected","void","onClick","(","Optional<AjaxRequestTarget>","target",")","\n	","{","\n	"],"docstring_tokens":["Hook","method","to","be","notified","of","a","click","on","the","link"],"prompt_tokens":[]}
{"code_tokens":["\n	public","final","void","debug","(","Component","reporter,","Serializable","message",")","\n	","{","\n		add","(","new","FeedbackMessage","(","reporter,","message,","FeedbackMessage",".","DEBUG",")",")",";","\n	"],"docstring_tokens":["Adds","a","new","ui","message","with","level","DEBUG","to","the","current","messages"],"prompt_tokens":[]}
{"code_tokens":["\n	public","final","void","info","(","Component","reporter,","Serializable","message",")","\n	","{","\n		add","(","new","FeedbackMessage","(","reporter,","message,","FeedbackMessage",".","INFO",")",")",";","\n	"],"docstring_tokens":["Adds","a","new","ui","message","with","level","INFO","to","the","current","messages"],"prompt_tokens":[]}
{"code_tokens":["\n	public","final","void","success","(","Component","reporter,","Serializable","message",")","\n	","{","\n		add","(","new","FeedbackMessage","(","reporter,","message,","FeedbackMessage",".","SUCCESS",")",")",";","\n	"],"docstring_tokens":["Adds","a","new","ui","message","with","level","SUCCESS","to","the","current","messages"],"prompt_tokens":[]}
{"code_tokens":["\n	public","final","void","warn","(","Component","reporter,","Serializable","message",")","\n	","{","\n		add","(","new","FeedbackMessage","(","reporter,","message,","FeedbackMessage",".","WARNING",")",")",";","\n	"],"docstring_tokens":["Adds","a","new","ui","message","with","level","WARNING","to","the","current","messages"],"prompt_tokens":[]}
{"code_tokens":["\n	public","final","void","error","(","Component","reporter,","Serializable","message",")","\n	","{","\n		add","(","new","FeedbackMessage","(","reporter,","message,","FeedbackMessage",".","ERROR",")",")",";","\n	"],"docstring_tokens":["Adds","a","new","ui","message","with","level","ERROR","to","the","current","messages"],"prompt_tokens":[]}
{"code_tokens":["\n	public","final","void","fatal","(","Component","reporter,","Serializable","message",")","\n	","{","\n		add","(","new","FeedbackMessage","(","reporter,","message,","FeedbackMessage",".","FATAL",")",")",";","\n	"],"docstring_tokens":["Adds","a","new","ui","message","with","level","FATAL","to","the","current","messages"],"prompt_tokens":[]}
{"code_tokens":["\n	public","final","FeedbackMessage","first","(",")","\n	","{","\n		return","messages",".","size","(",")",">","0","?","messages",".","get","(","0",")",":","null",";","\n	"],"docstring_tokens":["Retrieves","the","first","message"],"prompt_tokens":[]}
{"code_tokens":["\n	public","final","FeedbackMessage","first","(","final","int","level",")","\n	","{","\n		for","(","FeedbackMessage","message",":","messages",")","\n		","{","\n			if","(","message",".","isLevel","(","level",")",")","\n			","{","\n				return","message",";","\n			","}","\n		","}","\n		return","null",";","\n	"],"docstring_tokens":["Retrieves","the","first","message","that","level","is","greater","than","or","equal","to","the","given","level"],"prompt_tokens":[]}
{"code_tokens":["\n	public","final","int","size","(",")","\n	","{","\n		return","messages",".","size","(",")",";","\n	"],"docstring_tokens":["Gets","the","number","of","messages"],"prompt_tokens":[]}
{"code_tokens":["\r\n	@Override\r\n	public","String","toString","(",")","\r\n	","{","\r\n		return","toTimeString","(",")",";","\r\n	"],"docstring_tokens":["Converts","this","Time","to","a","String","suitable","for","use","in","a","file","system","	","name"],"prompt_tokens":[]}
{"code_tokens":["\r\n	public","final","boolean","greaterThan","(","final","int","value",")","\r\n	","{","\r\n		return","this",".","value",">","value",";","\r\n	"],"docstring_tokens":["Compares","this","IntValue","with","a","primitive","int","value"],"prompt_tokens":[]}
{"code_tokens":["\r\n	public","final","boolean","greaterThan","(","final","IntValue","that",")","\r\n	","{","\r\n		return","value",">","that",".","value",";","\r\n	"],"docstring_tokens":["Compares","this","IntValue","with","another","IntValue"],"prompt_tokens":[]}
{"code_tokens":["\n	@Override\n	public","void","setObject","(","T","object",")","\n	","{","\n		if","(","!","(","object","instanceof","Serializable",")",")","\n		","{","\n			object","=","createSerializableVersionOf","(","object",")",";","\n		","}","\n		this",".","object","=","object",";","\n	"],"docstring_tokens":["Set","the","model","object"],"prompt_tokens":[]}
{"code_tokens":["\r\n	public","T","put","(","final","Class<?>","key,","final","T","value",")","\r\n	","{","\r\n		ConcurrentHashMap<String,","T>","container","=","getClassLoaderCache","(","key",".","getClassLoader","(",")",",","true",")",";","\r\n		return","container",".","put","(","key","(","key",")",",","value",")",";","\r\n	"],"docstring_tokens":["Puts","value","into","cache"],"prompt_tokens":[]}
{"code_tokens":["\r\n	public","T","get","(","final","Class<?>","key",")","\r\n	","{","\r\n		ConcurrentHashMap<String,","T>","container","=","getClassLoaderCache","(","key",".","getClassLoader","(",")",",","false",")",";","\r\n		if","(","container","==","null",")","\r\n		","{","\r\n			return","null",";","\r\n		","}","\r\n		else\r\n		","{","\r\n			return","container",".","get","(","key","(","key",")",")",";","\r\n		","}","\r\n	"],"docstring_tokens":["Gets","value","from","cache","or","returns","null","if","not","in","cache"],"prompt_tokens":[]}
{"code_tokens":["\r\n	private","static","String","key","(","final","Class<?>","clazz",")","\r\n	","{","\r\n		return","clazz",".","getName","(",")",";","\r\n	"],"docstring_tokens":["converts","class","into","a","key","used","by","the","cache"],"prompt_tokens":[]}
{"code_tokens":["\n	public","float","getFloat","(","final","Matcher","matcher,","final","float","defaultValue",")","\n	","{","\n		final","String","value","=","get","(","matcher",")",";","\n		return","value","==","null","?","defaultValue",":","Float",".","parseFloat","(","value",")",";","\n	"],"docstring_tokens":["Gets","float","by","parsing","the","String","matched","by","this","capturing","group"],"prompt_tokens":[]}
{"code_tokens":["\n	public","double","getDouble","(","final","Matcher","matcher,","final","double","defaultValue",")","\n	","{","\n		final","String","value","=","get","(","matcher",")",";","\n		return","value","==","null","?","defaultValue",":","Double",".","parseDouble","(","value",")",";","\n	"],"docstring_tokens":["Gets","double","by","parsing","the","String","matched","by","this","capturing","group"],"prompt_tokens":[]}
{"code_tokens":["\n	public","synchronized","void","addDelta","(","final","Delta","delta",")","\n	","{","\n		if","(","delta","==","null",")","\n		","{","\n			throw","new","IllegalArgumentException","(","\"new","delta","is","null\"",")",";","\n		","}","\n		deltas_",".","add","(","delta",")",";","\n	"],"docstring_tokens":["Adds","a","delta","to","this","revision"],"prompt_tokens":[]}
{"code_tokens":["\n	public","synchronized","void","insertDelta","(","final","Delta","delta",")","\n	","{","\n		if","(","delta","==","null",")","\n		","{","\n			throw","new","IllegalArgumentException","(","\"new","delta","is","null\"",")",";","\n		","}","\n		deltas_",".","add","(","0,","delta",")",";","\n	"],"docstring_tokens":["Adds","a","delta","to","the","start","of","this","revision"],"prompt_tokens":[]}
{"code_tokens":["\n	public","Delta","getDelta","(","final","int","i",")","\n	","{","\n		return","deltas_",".","get","(","i",")",";","\n	"],"docstring_tokens":["Retrieves","a","delta","from","this","revision","by","position"],"prompt_tokens":[]}
{"code_tokens":["\n	public","int","size","(",")","\n	","{","\n		return","deltas_",".","size","(",")",";","\n	"],"docstring_tokens":["Returns","the","number","of","deltas","in","this","revision"],"prompt_tokens":[]}
{"code_tokens":["\n	public","Object[]","patch","(","final","Object[]","src",")","throws","PatchFailedException\n	","{","\n		List<Object>","target","=","new","ArrayList<>","(","Arrays",".","asList","(","src",")",")",";","\n		applyTo","(","target",")",";","\n		return","target",".","toArray","(",")",";","\n	"],"docstring_tokens":["Applies","the","series","of","deltas","in","this","revision","as","patches","to","the","given","text"],"prompt_tokens":[]}
{"code_tokens":["\n	@Override\n	public","synchronized","void","toString","(","final","StringBuilder","s",")","\n	","{","\n		for","(","Delta","delta",":","deltas_",")","\n		","{","\n			delta",".","toString","(","s",")",";","\n		","}","\n	"],"docstring_tokens":["Converts","this","revision","into","its","Unix","diff","style","string","representation"],"prompt_tokens":[]}
{"code_tokens":["\n	public","synchronized","void","toRCSString","(","final","StringBuilder","s,","final","String","EOL",")","\n	","{","\n		for","(","Delta","deltas",":","deltas_",")","\n		","{","\n			deltas",".","toRCSString","(","s,","EOL",")",";","\n		","}","\n	"],"docstring_tokens":["Converts","this","revision","into","its","RCS","style","string","representation"],"prompt_tokens":[]}
{"code_tokens":["\n	@Override\n	protected","void","onDetach","(",")","\n	","{","\n		if","(","resetPassword",")","{","\n			clearInput","(",")",";","\n\n			if","(","getModel","(",")","!=","null",")","{","\n				getModel","(",")",".","setObject","(","null",")",";","\n			","}","\n		","}","\n\n		super",".","onDetach","(",")",";","\n	"],"docstring_tokens":["Overridden","to","nullify","the","password"],"prompt_tokens":[]}
{"code_tokens":["\n	private","StreamData","getData","(","boolean","initialize",")","\n	","{","\n		if","(","streamData","==","null","&&","initialize",")","\n		","{","\n			streamData","=","new","StreamData","(",")",";","\n\n			try\n			","{","\n				streamData",".","connection","=","url",".","openConnection","(",")",";","\n				streamData",".","contentLength","=","streamData",".","connection",".","getContentLength","(",")",";","\n\n				//","Default","implementation","\"sun",".","net",".","www",".","MimeTable\"","works","on","strings","with","\"/\"","only","and\n				//","doesn't","properly","parse","paths","nor","URLs",".","So","providing","an","absolute","URI","is","compatible\n				//","with","the","default","implementation,","while","the","string","can't","be","misinterpreted","as","path\n				//","like","has","been","the","case","with","\"URL",".","getFile\"","before",".","That","doesn't","decode","to","paths,\n				//","results","only","look","similar","sometimes",".","\n				String","uriStr","=","url",".","toURI","(",")",".","toString","(",")",";","\n\n				if","(","Application",".","exists","(",")",")","\n				","{","\n					streamData",".","contentType","=","Application",".","get","(",")",".","getMimeType","(","uriStr",")",";","\n				","}","\n				else\n				","{","\n					streamData",".","contentType","=","streamData",".","connection",".","getContentType","(",")",";","\n				","}","\n\n				if","(","streamData",".","contentType","==","null","||","streamData",".","contentType",".","contains","(","\"unknown\"",")",")","\n				","{","\n					streamData",".","contentType","=","URLConnection",".","getFileNameMap","(",")",".","getContentTypeFor","(","\n						uriStr",")",";","\n				","}","\n			","}","\n			catch","(","IOException","|","URISyntaxException","ex",")","\n			","{","\n				throw","new","IllegalArgumentException","(","\"Invalid","URL","parameter","\"","+","url,","ex",")",";","\n			","}","\n		","}","\n\n		return","streamData",";","\n	"],"docstring_tokens":["Lazy","loads","the","stream","settings","on","demand"],"prompt_tokens":[]}
{"code_tokens":["\n	@Around","(","\"execution","(","org",".","apache",".","wicket",".","Component",".","new","(",".",".",")",")","\"",")","\n	public","Object","aroundNew","(","ProceedingJoinPoint","joinPoint",")","throws","Throwable\n	","{","\n		return","measureTime","(","\"core/component/create\",","joinPoint",")",";","\n	"],"docstring_tokens":["Collects","data","how","often","components","are","created"],"prompt_tokens":[]}
{"code_tokens":["\n	private","ResourceReference","_getResourceReference","(","final","String","scope,","final","String","name,\n		final","Locale","locale,","final","String","style,","final","String","variation,","final","boolean","strict",")","\n	","{","\n		//","Create","a","registry","key","containing","all","of","the","relevant","attributes\n		Key","key","=","new","Key","(","scope,","name,","locale,","style,","variation",")",";","\n\n		//","Get","resource","reference","matching","exactly","the","attrs","provided\n		ResourceReference","res","=","map",".","get","(","key",")",";","\n		if","(","(","res","!=","null",")","||","strict",")","\n		","{","\n			return","res",";","\n		","}","\n\n		res","=","_getResourceReference","(","scope,","name,","locale,","style,","null,","true",")",";","\n		if","(","res","==","null",")","\n		","{","\n			res","=","_getResourceReference","(","scope,","name,","locale,","null,","variation,","true",")",";","\n		","}","\n		if","(","res","==","null",")","\n		","{","\n			res","=","_getResourceReference","(","scope,","name,","locale,","null,","null,","true",")",";","\n		","}","\n		if","(","res","==","null",")","\n		","{","\n			res","=","_getResourceReference","(","scope,","name,","null,","style,","variation,","true",")",";","\n		","}","\n		if","(","res","==","null",")","\n		","{","\n			res","=","_getResourceReference","(","scope,","name,","null,","style,","null,","true",")",";","\n		","}","\n		if","(","res","==","null",")","\n		","{","\n			res","=","_getResourceReference","(","scope,","name,","null,","null,","variation,","true",")",";","\n		","}","\n		if","(","res","==","null",")","\n		","{","\n			res","=","_getResourceReference","(","scope,","name,","null,","null,","null,","true",")",";","\n		","}","\n		return","res",";","\n	"],"docstring_tokens":["Get","a","resource","reference","matching","the","parameters","from","the","registry"],"prompt_tokens":[]}
{"code_tokens":["\n	private","ResourceReference","addDefaultResourceReference","(","final","Key","key",")","\n	","{","\n		//","Can","be","subclassed","to","create","other","than","PackagedResourceReference\n		ResourceReference","reference","=","createDefaultResourceReference","(","key",")",";","\n\n		if","(","reference","!=","null",")","\n		","{","\n			//","number","of","RRs","which","can","be","auto-added","is","restricted","(","cache","size",")",".","Remove","entries,","and\n			//","unregister","excessive","ones,","if","needed",".","\n			enforceAutoAddedCacheSize","(","getAutoAddedCapacity","(",")",")",";","\n\n			//","Register","the","new","RR\n			_registerResourceReference","(","reference",")",";","\n\n			//","Add","it","to","the","auto-added","list\n			if","(","autoAddedQueue","!=","null",")","\n			","{","\n				autoAddedQueue",".","add","(","key",")",";","\n			","}","\n		","}","\n		else\n		","{","\n			log",".","warn","(","\"A","ResourceReference","wont","be","created","for","a","resource","with","key","[","{","}","]","because","it","cannot","be","located",".","\",","key",")",";","\n		","}","\n		return","reference",";","\n	"],"docstring_tokens":["Creates","a","default","resource","reference","and","registers","it"],"prompt_tokens":[]}
{"code_tokens":["\n	protected","ResourceReference","createDefaultResourceReference","(","final","Key","key",")","\n	","{","\n		IResourceReferenceFactory","factory","=","getResourceReferenceFactory","(",")",";","\n		if","(","factory","==","null",")","\n		","{","\n			factory","=","new","DefaultResourceReferenceFactory","(",")",";","\n		","}","\n		return","factory",".","create","(","key",")",";","\n	"],"docstring_tokens":["Creates","a","default","resource","reference","in","case","no","registry","entry","and","it","was","requested","to","create	","one.	","	","A","PackageResourceReference","will","be","created","by","default"],"prompt_tokens":[]}
{"code_tokens":["\n	public","final","void","setAutoAddedCapacity","(","final","int","autoAddedCapacity",")","\n	","{","\n		//","Disable","aging","of","auto-added","references?\n		if","(","autoAddedCapacity","<","0",")","\n		","{","\n			//","unregister","all","auto-added","references\n			clearAutoAddedEntries","(",")",";","\n\n			//","disable","aging","from","now","on\n			autoAddedQueue","=","null",";","\n		","}","\n		else\n		","{","\n			this",".","autoAddedCapacity","=","autoAddedCapacity",";","\n\n			if","(","autoAddedQueue","==","null",")","\n			","{","\n				autoAddedQueue","=","new","ConcurrentLinkedQueue<Key>","(",")",";","\n			","}","\n			else\n			","{","\n				//","remove","all","extra","entries","if","necessary\n				enforceAutoAddedCacheSize","(","autoAddedCapacity",")",";","\n			","}","\n		","}","\n	"],"docstring_tokens":["Set","the","cache","size","in","number","of","entries"],"prompt_tokens":[]}
{"code_tokens":["\n	public","final","void","clearAutoAddedEntries","(",")","\n	","{","\n		enforceAutoAddedCacheSize","(","0",")",";","\n	"],"docstring_tokens":["Unregisters","all","auto-added","Resource","References"],"prompt_tokens":[]}
{"code_tokens":["\n	public","void","setResourceReferenceFactory","(","IResourceReferenceFactory","resourceReferenceFactory",")","\n	","{","\n		this",".","resourceReferenceFactory","=","resourceReferenceFactory",";","\n	"],"docstring_tokens":["Sets","the","factory","to","use","when","a","ResourceReference","is","not","previously	","registered","and","a","new","instance","should","be","created"],"prompt_tokens":[]}
{"code_tokens":["\n	@Override\n	public","boolean","supportsVersioning","(",")","\n	","{","\n		return","true",";","\n	"],"docstring_tokens":["Pages","are","already","serialized"],"prompt_tokens":[]}
{"code_tokens":["\n	public","Bookmark","save","(",")","\n	","{","\n		return","new","Bookmark","(","this",")",";","\n	"],"docstring_tokens":["Saves","the","state","of","the","context","into","a","bookmark","which","can","later","be","used","to","restore","it"],"prompt_tokens":[]}
{"code_tokens":["\n	public","void","restore","(","Bookmark","bookmark",")","\n	","{","\n		bookmark",".","restore","(","this",")",";","\n	"],"docstring_tokens":["Restores","the","state","of","the","context","from","the","bookmark"],"prompt_tokens":[]}
{"code_tokens":["\n	public","ComponentTag","takeTag","(",")","\n	","{","\n		ComponentTag","taken","=","next",";","\n\n		if","(","taken","==","null",")","\n		","{","\n			return","null",";","\n		","}","\n\n		if","(","taken",".","isOpen","(",")","&&","!taken",".","hasNoCloseTag","(",")",")","\n		","{","\n			tags",".","push","(","taken",")",";","\n		","}","\n		else","if","(","tags",".","size","(",")",">","0","&&","taken",".","closes","(","tags",".","peek","(",")",")",")","\n		","{","\n			tags",".","pop","(",")",";","\n		","}","\n		next","=","nextTag","(",")",";","\n		return","taken",";","\n	"],"docstring_tokens":["Retrieves","the","next","markup","tag"],"prompt_tokens":[]}
{"code_tokens":["\n	public","void","generate","(","Collection<Contact>","collection,","int","count",")","\n	","{","\n		for","(","int","i","=","0",";","i","<","count",";","i++",")","\n		","{","\n			collection",".","add","(","generate","(",")",")",";","\n		","}","\n	"],"docstring_tokens":["generats","count","number","contacts","and","puts","them","into","collection	","collection"],"prompt_tokens":[]}
{"code_tokens":["\n	public","DebugSettings","setComponentUseCheck","(","final","boolean","componentUseCheck",")","\n	","{","\n		this",".","componentUseCheck","=","componentUseCheck",";","\n		return","this",";","\n	"],"docstring_tokens":["Sets","componentUseCheck","debug","settings"],"prompt_tokens":[]}
{"code_tokens":["\n	@Around","(","\"execution","(","*","org",".","apache",".","wicket",".","Component",".","onInitialize","(",".",".",")",")","\"",")","\n	public","Object","aroundOnInitialize","(","ProceedingJoinPoint","joinPoint",")","throws","Throwable\n	","{","\n		return","measureTime","(","\"core/component/initialize\",","joinPoint",")",";","\n	"],"docstring_tokens":["Collects","data","how","often","components","calls","onInitialize"],"prompt_tokens":[]}
{"code_tokens":["\n	@Override\n	public","IRequestHandler","getDelegateHandler","(",")","\n	","{","\n		return","delegate",";","\n	"],"docstring_tokens":["Returns","the","request","handler","to","which","responding","will","be","delegated"],"prompt_tokens":[]}
{"code_tokens":["\n	protected","IItemFactory<T>","newItemFactory","(",")","\n	","{","\n		return","new","IItemFactory<T>","(",")","\n		","{","\n			@Override\n			public","Item<T>","newItem","(","int","index,","IModel<T>","model",")","\n			","{","\n				String","id","=","RefreshingView",".","this",".","newChildId","(",")",";","\n				Item<T>","item","=","RefreshingView",".","this",".","newItem","(","id,","index,","model",")",";","\n				RefreshingView",".","this",".","populateItem","(","item",")",";","\n				return","item",";","\n			","}","\n		","}",";","\n	"],"docstring_tokens":["Create","a","new","IItemFactory","based","upon","the","RefreshingView"],"prompt_tokens":[]}
{"code_tokens":["\n	protected","void","addItems","(","Iterator<Item<T>>","items",")","\n	","{","\n		int","index","=","0",";","\n		while","(","items",".","hasNext","(",")",")","\n		","{","\n			Item<T>","item","=","items",".","next","(",")",";","\n			item",".","setIndex","(","index",")",";","\n			add","(","item",")",";","\n			++index",";","\n		","}","\n	"],"docstring_tokens":["Add","items","to","the","view"],"prompt_tokens":[]}
{"code_tokens":["\n	@SuppressWarnings","(","\"rawtypes\"",")","\n	public","static","VelocityPanel","forTemplateResource","(","final","String","id,\n		final","IModel<?","extends","Map>","model,","final","IResourceStream","templateResource",")","\n	","{","\n		if","(","templateResource","==","null",")","\n		","{","\n			throw","new","IllegalArgumentException","(","\"argument","templateResource","must","be","not","null\"",")",";","\n		","}","\n\n		return","new","VelocityPanel","(","id,","model",")","\n		","{","\n			private","static","final","long","serialVersionUID","=","1L",";","\n\n			@Override\n			protected","IResourceStream","getTemplateResource","(",")","\n			","{","\n				return","templateResource",";","\n			","}","\n		","}",";","\n	"],"docstring_tokens":["Convenience","factory","method","to","create","a","VelocityPanel","instance","with","a","given	","IStringResourceStream","template","resource"],"prompt_tokens":[]}
{"code_tokens":["\n	private","Reader","getTemplateReader","(",")","\n	","{","\n		final","IResourceStream","resource","=","getTemplateResource","(",")",";","\n		if","(","resource","==","null",")","\n		","{","\n			throw","new","IllegalArgumentException","(","\"getTemplateResource","must","return","a","resource\"",")",";","\n		","}","\n\n		final","String","template","=","ResourceUtil",".","readString","(","resource",")",";","\n		if","(","template","!=","null",")","\n		","{","\n			return","new","StringReader","(","template",")",";","\n		","}","\n\n		return","null",";","\n	"],"docstring_tokens":["Gets","a","reader","for","the","velocity","template"],"prompt_tokens":[]}
{"code_tokens":["\n	protected","final","void","onConnect","(","final","IWebSocketConnection","connection",")","{","\n		IKey","key","=","getRegistryKey","(",")",";","\n		connectionRegistry",".","setConnection","(","getApplication","(",")",",","getSessionId","(",")",",","key,","connection",")",";","\n\n		if","(","connectionFilter","!=","null",")","\n		","{","\n			ConnectionRejected","connectionRejected","=","connectionFilter",".","doFilter","(","servletRequest",")",";","\n			if","(","connectionRejected","!=","null",")","\n			","{","\n				broadcastMessage","(","new","AbortedMessage","(","getApplication","(",")",",","getSessionId","(",")",",","key",")",")",";","\n				connectionRegistry",".","removeConnection","(","getApplication","(",")",",","getSessionId","(",")",",","key",")",";","\n				connection",".","close","(","connectionRejected",".","getCode","(",")",",","connectionRejected",".","getReason","(",")",")",";","\n				return",";","\n			","}","\n		","}","\n\n		broadcastMessage","(","new","ConnectedMessage","(","getApplication","(",")",",","getSessionId","(",")",",","key",")",",","connection,","webSocketSettings",".","isAsynchronousPush","(",")",",","webSocketSettings",".","getAsynchronousPushTimeout","(",")",")",";","\n	"],"docstring_tokens":["A","helper","that","registers","the","opened","connection","in","the","application-level","registry"],"prompt_tokens":[]}
{"code_tokens":["\r\n	public","static","Component","resolveByApplication","(","final","MarkupContainer","container,\r\n		final","MarkupStream","markupStream,","final","ComponentTag","tag,","final","ResolverFilter","filter",")","\r\n	","{","\r\n		for","(","final","IComponentResolver","resolver",":","Application",".","get","(",")","\r\n			",".","getPageSettings","(",")","\r\n			",".","getComponentResolvers","(",")",")","\r\n		","{","\r\n			if","(","(","filter","==","null",")","||","(","filter",".","ignoreResolver","(","resolver",")","==","false",")",")","\r\n			","{","\r\n				Component","component","=","resolver",".","resolve","(","container,","markupStream,","tag",")",";","\r\n				if","(","component","!=","null",")","\r\n				","{","\r\n					return","component",";","\r\n				","}","\r\n			","}","\r\n		","}","\r\n\r\n		return","null",";","\r\n	"],"docstring_tokens":["Attempts","to","resolve","a","component","via","application","registered","resolvers"],"prompt_tokens":[]}
{"code_tokens":["\n	protected","ZoneId","getTargetTimeZone","(",")","\n	","{","\n		return","ZoneId",".","systemDefault","(",")",";","\n	"],"docstring_tokens":["What","is","the","ZoneId","of","created","ZonedDateTime","objects"],"prompt_tokens":[]}
{"code_tokens":["\n	public","static","void","encodeResourceReferenceAttributes","(","Url","url,","ResourceReference","reference",")","\n	","{","\n		Args",".","notNull","(","url,","\"url\"",")",";","\n		Args",".","notNull","(","reference,","\"reference\"",")",";","\n\n		String","encoded","=","encodeResourceReferenceAttributes","(","reference",".","getUrlAttributes","(",")",")",";","\n		if","(","!Strings",".","isEmpty","(","encoded",")",")","\n		","{","\n			url",".","getQueryParameters","(",")",".","add","(","new","Url",".","QueryParameter","(","encoded,","\"\"",")",")",";","\n		","}","\n	"],"docstring_tokens":["Encodes","the","attributes","of","the","given","resource","reference","in","the","specified","url"],"prompt_tokens":[]}
{"code_tokens":["\n	public","static","String","readString","(","IResourceStream","resourceStream",")","\n	","{","\n		return","readString","(","resourceStream,","null",")",";","\n	"],"docstring_tokens":["read","string","with","platform","default","encoding","from","resource","stream"],"prompt_tokens":[]}
{"code_tokens":["\n	public","static","String","readString","(","IResourceStream","resourceStream,","Charset","charset",")","\n	","{","\n		try\n		","{","\n			InputStream","stream","=","resourceStream",".","getInputStream","(",")",";","\n\n			try\n			","{","\n				byte[]","bytes","=","IOUtils",".","toByteArray","(","stream",")",";","\n\n				if","(","charset","==","null",")","{","\n					charset","=","Charset",".","defaultCharset","(",")",";","}","\n\n				return","new","String","(","bytes,","charset",".","name","(",")",")",";","\n			","}","\n			finally\n			","{","\n				resourceStream",".","close","(",")",";","\n			","}","\n		","}","\n		catch","(","IOException","e",")","\n		","{","\n			throw","new","WicketRuntimeException","(","\"failed","to","read","string","from","\"","+","resourceStream,","e",")",";","\n		","}","\n		catch","(","ResourceStreamNotFoundException","e",")","\n		","{","\n			throw","new","WicketRuntimeException","(","\"failed","to","locate","stream","from","\"","+","resourceStream,","e",")",";","\n		","}","\n	"],"docstring_tokens":["read","string","with","specified","encoding","from","resource","stream"],"prompt_tokens":[]}
{"code_tokens":["\n	@Override\n	public","ICrypt","newCrypt","(",")","\n	","{","\n		Session","session","=","Session",".","get","(",")",";","\n		session",".","bind","(",")",";","\n\n		//","retrieve","or","generate","encryption","key","from","session\n		T","key","=","session",".","getMetaData","(","KEY",")",";","\n		if","(","key","==","null",")","\n		","{","\n			//","generate","new","key\n			key","=","generateKey","(","session",")",";","\n			session",".","setMetaData","(","KEY,","key",")",";","\n		","}","\n\n		//","build","the","crypt","based","on","session","key\n		ICrypt","crypt","=","createCrypt","(","key",")",";","\n		return","crypt",";","\n	"],"docstring_tokens":["Creates","a","new","crypt","for","the","current","user","session"],"prompt_tokens":[]}
{"code_tokens":["\r\n	public","final","String","join","(","final","String","separator",")","\r\n	","{","\r\n		return","join","(","0,","size","(",")",",","separator",")",";","\r\n	"],"docstring_tokens":["Joins","this","sequence","of","strings","using","a","separator"],"prompt_tokens":[]}
{"code_tokens":["\r\n	public","final","String","join","(","final","int","first,","final","int","last,","final","String","separator",")","\r\n	","{","\r\n		//","Allocate","buffer","of","exactly","the","right","length\r\n		final","int","length","=","totalLength","(",")","+","(","separator",".","length","(",")","*","(","Math",".","max","(","0,","last","-","first","-","1",")",")",")",";","\r\n		final","AppendingStringBuffer","buf","=","new","AppendingStringBuffer","(","length",")",";","\r\n\r\n		//","Loop","through","indexes","requested\r\n		for","(","int","i","=","first",";","i","<","last",";","i++",")","\r\n		","{","\r\n			//","Add","next","string\r\n			buf",".","append","(","get","(","i",")",")",";","\r\n\r\n			//","Add","separator?\r\n			if","(","i","!=","(","last","-","1",")",")","\r\n			","{","\r\n				buf",".","append","(","separator",")",";","\r\n			","}","\r\n		","}","\r\n\r\n		return","buf",".","toString","(",")",";","\r\n	"],"docstring_tokens":["Joins","this","sequence","of","strings","from","first","index","to","last","using","a","separator"],"prompt_tokens":[]}
{"code_tokens":["\r\n	@Override\r\n	public","String","process","(","String","input,","Class<?>","scope,","String","name",")","\r\n	","{","\r\n		//","filter","out","the","excluded","css","files\r\n		for","(","String","excludeName",":","excludes",")","\r\n		","{","\r\n			if","(","name",".","endsWith","(","excludeName",")",")","{","\r\n				return","input",";","\r\n			","}","\r\n		","}","\r\n		RequestCycle","cycle","=","RequestCycle",".","get","(",")",";","\r\n		Url","cssUrl","=","Url",".","parse","(","name",")",";","\r\n		Matcher","matcher","=","URL_PATTERN",".","matcher","(","input",")",";","\r\n		StringBuffer","output","=","new","StringBuffer","(",")",";","\r\n\r\n		while","(","matcher",".","find","(",")",")","\r\n		","{","\r\n			Url","imageCandidateUrl","=","Url",".","parse","(","matcher",".","group","(","1",")",")",";","\r\n			CharSequence","processedUrl",";","\r\n			boolean","embedded","=","false",";","\r\n\r\n			if","(","imageCandidateUrl",".","isFull","(",")",")","\r\n			","{","\r\n				processedUrl","=","imageCandidateUrl",".","toString","(","Url",".","StringMode",".","FULL",")",";","\r\n			","}","\r\n			else","if","(","imageCandidateUrl",".","isContextAbsolute","(",")",")","\r\n			","{","\r\n				processedUrl","=","imageCandidateUrl",".","toString","(",")",";","\r\n			","}","\r\n			else","if","(","imageCandidateUrl",".","isDataUrl","(",")",")","\r\n			","{","\r\n				embedded","=","true",";","\r\n				processedUrl","=","imageCandidateUrl",".","toString","(",")",";","\r\n			","}","\r\n			else\r\n			","{","\r\n				//","relativize","against","the","url","for","the","containing","CSS","file\r\n				Url","cssUrlCopy","=","new","Url","(","cssUrl",")",";","\r\n				cssUrlCopy",".","resolveRelative","(","imageCandidateUrl",")",";","\r\n\r\n				//","if","the","image","should","be","processed","as","URL","or","base64","embedded\r\n				if","(","cssUrlCopy",".","getQueryString","(",")","!=","null\r\n					&&","cssUrlCopy",".","getQueryString","(",")",".","contains","(","EMBED_BASE64",")",")","\r\n				","{","\r\n					embedded","=","true",";","\r\n					PackageResourceReference","imageReference","=","new","PackageResourceReference","(","scope,\r\n						cssUrlCopy",".","toString","(",")",".","replace","(","\"?\"","+","EMBED_BASE64,","\"\"",")",")",";","\r\n					try\r\n					","{","\r\n						processedUrl","=","ImageUtil",".","createBase64EncodedImage","(","imageReference,","true",")",";","\r\n					","}","\r\n					catch","(","Exception","e",")","\r\n					","{","\r\n						throw","new","WicketRuntimeException","(","\r\n							\"Error","while","embedding","an","image","into","the","css:","\"","+","imageReference,","e",")",";","\r\n					","}","\r\n				","}","\r\n				else\r\n				","{","\r\n					PackageResourceReference","imageReference","=","new","PackageResourceReference","(","scope,\r\n						cssUrlCopy",".","toString","(",")",")",";","\r\n					processedUrl","=","cycle",".","urlFor","(","imageReference,","null",")",";","\r\n				","}","\r\n\r\n			","}","\r\n\r\n			//","embedded","data","urls","don't","need","single","quotes,","but","regular","urls","do:\r\n			matcher",".","appendReplacement","(","output,\r\n				embedded","?","\"url","(","\"","+","processedUrl","+","\"",")","\"",":","\"url","(","'\"","+","processedUrl","+","\"'",")","\"",")",";","\r\n		","}","\r\n		matcher",".","appendTail","(","output",")",";","\r\n		return","output",".","toString","(",")",";","\r\n	"],"docstring_tokens":["Replaces","the","URLs","of","CSS","resources","with","Wicket","representatives"],"prompt_tokens":[]}
{"code_tokens":["\r\n	public","Collection<String>","getExcludes","(",")","\r\n	","{","\r\n		return","excludes",";","\r\n	"],"docstring_tokens":["Gets","excluded","css","file","names"],"prompt_tokens":[]}
{"code_tokens":["\r\n	public","void","setExcludes","(","Collection<String>","excludes",")","\r\n	","{","\r\n		this",".","excludes",".","clear","(",")",";","\r\n		this",".","excludes",".","addAll","(","excludes",")",";","\r\n	"],"docstring_tokens":["Sets","a","list","of","css","file","names","to","be","excluded"],"prompt_tokens":[]}
{"code_tokens":["\n	public","static","EmailAddressValidator","getInstance","(",")","\n	","{","\n		return","INSTANCE",";","\n	"],"docstring_tokens":["Retrieves","the","singleton","instance","of","EmailAddressValidator"],"prompt_tokens":[]}
{"code_tokens":["\n	public","final","String","getPropertyExpression","(",")","\n	","{","\n		return","propertyExpression","(",")",";","\n	"],"docstring_tokens":["Gets","the","property","expression","for","this","model"],"prompt_tokens":[]}
{"code_tokens":["\n	@Override\n	@SuppressWarnings","(","\"unchecked\"",")","\n	public","void","setObject","(","T","object",")","\n	","{","\n		final","String","expression","=","propertyExpression","(",")",";","\n		if","(","Strings",".","isEmpty","(","expression",")",")","\n		","{","\n			//","TODO","check,","really","do","this?\n			//","why","not","just","set","the","target","to","the","object?\n			Object","target","=","getTarget","(",")",";","\n			if","(","target","instanceof","IModel",")","\n			","{","\n				","(","(","IModel<T>",")","target",")",".","setObject","(","object",")",";","\n			","}","\n			else\n			","{","\n				setTarget","(","object",")",";","\n			","}","\n		","}","\n		else\n		","{","\n			PropertyResolverConverter","prc","=","new","PropertyResolverConverter","(","\n					Application",".","get","(",")",".","getConverterLocator","(",")",",","Session",".","get","(",")",".","getLocale","(",")",")",";","\n			PropertyResolver",".","setValue","(","expression,","getInnermostModelOrObject","(",")",",","object,","prc",")",";","\n		","}","\n	"],"docstring_tokens":["Applies","the","property","expression","on","the","model","object","using","the","given","object","argument"],"prompt_tokens":[]}
{"code_tokens":["\n	protected","BigDecimal","parse","(","Object","value,","final","BigDecimal","min,","final","BigDecimal","max,","Locale","locale",")","\n	","{","\n		if","(","locale","==","null",")","\n		","{","\n			locale","=","Locale",".","getDefault","(","Locale",".","Category",".","FORMAT",")",";","\n		","}","\n\n		if","(","value","==","null",")","\n		","{","\n			return","null",";","\n		","}","\n		else","if","(","value","instanceof","String",")","\n		","{","\n			char","groupingSeparator","=","DecimalFormatSymbols",".","getInstance","(","locale",")",".","getGroupingSeparator","(",")",";","\n			//","Convert","spaces","to","no-break","space","(","groupingSeparator",")","as","required","by","Java","formats:\n			//","http://bugs",".","sun",".","com/view_bug",".","do?bug_id=4510618\n			value","=","(","(","String",")","value",")",".","replaceAll","(","\"","(","\\\\d+",")","\\\\s","(","?=\\\\d",")","\",","\"$1\"","+","groupingSeparator",")",";","\n		","}","\n\n		final","NumberFormat","numberFormat","=","getNumberFormat","(","locale",")",";","\n		final","N","number","=","parse","(","numberFormat,","value,","locale",")",";","\n\n		if","(","number","==","null",")","\n		","{","\n			return","null",";","\n		","}","\n\n		BigDecimal","bigDecimal",";","\n		if","(","number","instanceof","BigDecimal",")","\n		","{","\n			bigDecimal","=","(","BigDecimal",")","number",";","\n		","}","\n		else\n		","{","\n			//","should","occur","rarely,","see","#getNumberFormat","(","Locale",")","\n			bigDecimal","=","new","BigDecimal","(","number",".","toString","(",")",")",";","\n		","}","\n\n		if","(","min","!=","null","&&","bigDecimal",".","compareTo","(","min",")","<","0",")","\n		","{","\n			throw","newConversionException","(","\"Value","cannot","be","less","than","\"","+","min,","value,","locale",")","\n					",".","setFormat","(","numberFormat",")",";","\n		","}","\n\n		if","(","max","!=","null","&&","bigDecimal",".","compareTo","(","max",")",">","0",")","\n		","{","\n			throw","newConversionException","(","\"Value","cannot","be","greater","than","\"","+","max,","value,","locale",")","\n					",".","setFormat","(","numberFormat",")",";","\n		","}","\n\n		return","bigDecimal",";","\n	"],"docstring_tokens":["Parses","a","value","as","a","String","and","returns","a","Number"],"prompt_tokens":[]}
{"code_tokens":["\n	@Override\n	protected","ResourceResponse","newResourceResponse","(","Attributes","attributes",")","\n	","{","\n		return","createResourceResponse","(","attributes,","getPath","(",")",")",";","\n	"],"docstring_tokens":["Creates","a","new","resource","response","and","reads","the","given","path"],"prompt_tokens":[]}
{"code_tokens":["\n	protected","long","getSize","(",")","throws","IOException\n	","{","\n		return","Files",".","readAttributes","(","getPath","(",")",",","BasicFileAttributes",".","class",")",".","size","(",")",";","\n	"],"docstring_tokens":["Gets","the","size","of","the","resource"],"prompt_tokens":[]}
{"code_tokens":["\n	protected","String","getMimeType","(",")","throws","IOException\n	","{","\n		final","Path","_path","=","getPath","(",")",";","\n		String","mimeType","=","null",";","\n		if","(","Application",".","exists","(",")",")","\n		","{","\n			mimeType","=","Application",".","get","(",")",".","getMimeType","(","_path",".","getFileName","(",")",".","toString","(",")",")",";","\n		","}","\n		if","(","mimeType","==","null",")","\n		","{","\n			mimeType","=","Files",".","probeContentType","(","_path",")",";","\n		","}","\n		return","mimeType",";","\n	"],"docstring_tokens":["Gets","the","mime","type","to","be","used","for","the","response","it","first","uses","the","URL","connection","to","get","the	","mime","type","and","after","this","the","FileTypeDetector","SPI","is","used"],"prompt_tokens":[]}
{"code_tokens":["\n	protected","InputStream","getInputStream","(",")","throws","IOException\n	","{","\n		return","Files",".","newInputStream","(","getPath","(",")",")",";","\n	"],"docstring_tokens":["Gets","the","input","stream","of","the","given","path"],"prompt_tokens":[]}
{"code_tokens":["\n	public","static","UploadInfo","getUploadInfo","(","final","HttpServletRequest","req,","String","upload",")","\n	","{","\n		Args",".","notNull","(","req,","\"req\"",")",";","\n		return","(","UploadInfo",")","req",".","getSession","(",")",".","getAttribute","(","getSessionKey","(","upload",")",")",";","\n	"],"docstring_tokens":["Retrieves","UploadInfo","from","session,","null","if","not","found"],"prompt_tokens":[]}
{"code_tokens":["\n	public","static","void","setUploadInfo","(","final","HttpServletRequest","req,","String","upload,\n		final","UploadInfo","uploadInfo",")","\n	","{","\n		Args",".","notNull","(","req,","\"req\"",")",";","\n		Args",".","notNull","(","upload,","\"upload\"",")",";","\n		Args",".","notNull","(","uploadInfo,","\"uploadInfo\"",")",";","\n		req",".","getSession","(",")",".","setAttribute","(","getSessionKey","(","upload",")",",","uploadInfo",")",";","\n	"],"docstring_tokens":["Sets","the","UploadInfo","object","into","session"],"prompt_tokens":[]}
{"code_tokens":["\n	public","static","void","clearUploadInfo","(","final","HttpServletRequest","req,","String","upload",")","\n	","{","\n		Args",".","notNull","(","req,","\"req\"",")",";","\n		Args",".","notNull","(","upload,","\"upload\"",")",";","\n		req",".","getSession","(",")",".","removeAttribute","(","getSessionKey","(","upload",")",")",";","\n	"],"docstring_tokens":["Clears","the","UploadInfo","object","from","session","if","one","exists"],"prompt_tokens":[]}
{"code_tokens":["\n	public","void","notifyListeners","(","final","T","t",")","\n	","{","\n		notify","(","new","INotifier<IChangeListener<T>>","(",")","\n		","{","\n			@Override\n			public","void","notify","(","final","IChangeListener<T>","listener",")","\n			","{","\n				listener",".","onChange","(","t",")",";","\n			","}","\n		","}",")",";","\n	"],"docstring_tokens":["Notifies","all","change","listeners","of","a","change","in","t"],"prompt_tokens":[]}
{"code_tokens":["\n	@Override\n	public","void","init","(","Application","application",")","\n	","{","\n		Http2Settings","http2Settings","=","Http2Settings",".","Holder",".","get","(","application",")",";","\n		http2Settings",".","setPushBuilder","(","new","Tomcat85PushBuilder","(",")",")",";","\n	"],"docstring_tokens":["Initializes","the","push","builder","API","of","tomcat"],"prompt_tokens":[]}
{"code_tokens":["\r\n	public","String","getMedia","(",")","\r\n	","{","\r\n		return","media",";","\r\n	"],"docstring_tokens":["The","media","for","which","the","content","of","this","source","should","be","shown"],"prompt_tokens":[]}
{"code_tokens":["\r\n	public","PageParameters","getPageParameters","(",")","\r\n	","{","\r\n		return","pageParameters",";","\r\n	"],"docstring_tokens":["Gets","the","page","parameter","applied","to","the","URL","of","the","source"],"prompt_tokens":[]}
{"code_tokens":["\r\n	public","void","setPageParameters","(","PageParameters","pageParameters",")","\r\n	","{","\r\n		this",".","pageParameters","=","pageParameters",";","\r\n	"],"docstring_tokens":["Sets","the","page","parameter","applied","to","the","URL","of","the","source"],"prompt_tokens":[]}
{"code_tokens":["\n	protected","boolean","canBeHandled","(","final","Url","url",")","\n	","{","\n		List<String>","segments","=","url",".","getSegments","(",")",";","\n		return","(","segments",".","size","(",")",">=","4","&&\n				urlStartsWith","(","url,","getContext","(",")",".","getNamespace","(",")",",","getContext","(",")",".","getResourceIdentifier","(",")",")","&&\n				Strings",".","isEmpty","(","segments",".","get","(","3",")",")","==","false\n		",")",";","\n\n	"],"docstring_tokens":["Checks","whether","the","passed","Url","can","be","handled","by","this","mapper"],"prompt_tokens":[]}
{"code_tokens":["\n	public","void","reset","(",")","\n	","{","\n	"],"docstring_tokens":["Called","when","the","Response","needs","to","reset","itself"],"prompt_tokens":[]}
{"code_tokens":["\n	@Test\n	final","void","emptyConstructor","(",")","throws","Exception\n	","{","\n		Class<?>","c","=","Class",".","forName","(","getExceptionClassName","(",")",")",";","\n		Constructor<?>","constructor","=","c",".","getConstructor","(","(","Class[]",")","null",")",";","\n		Exception","e","=","(","Exception",")","constructor",".","newInstance","(","(","Object[]",")","null",")",";","\n		assertNotNull","(","e,","\"Exception","should","be","created\"",")",";","\n		assertNull","(","e",".","getMessage","(",")",")",";","\n		assertNull","(","e",".","getCause","(",")",")",";","\n	"],"docstring_tokens":["Test","the","no","argument","constructor"],"prompt_tokens":[]}
{"code_tokens":["\n	@Test\n	final","void","messageConstructor","(",")","throws","Exception\n	","{","\n		Class<?>","c","=","Class",".","forName","(","getExceptionClassName","(",")",")",";","\n		Constructor<?>","constructor","=","c",".","getConstructor","(","new","Class[]","{","String",".","class","}",")",";","\n		Exception","e","=","(","Exception",")","constructor",".","newInstance","(","\"test","message\"",")",";","\n		assertNotNull","(","e,","\"Exception","should","be","created\"",")",";","\n		assertEquals","(","\"test","message\",","e",".","getMessage","(",")",")",";","\n		assertNull","(","e",".","getCause","(",")",")",";","\n	"],"docstring_tokens":["Test","the","string","message","constructor"],"prompt_tokens":[]}
{"code_tokens":["\n	@Test\n	final","void","causeConstructor","(",")","throws","Exception\n	","{","\n		NullPointerException","npe","=","new","NullPointerException","(",")",";","\n		Class<?>","c","=","Class",".","forName","(","getExceptionClassName","(",")",")",";","\n		Constructor<?>","constructor","=","c",".","getConstructor","(","new","Class[]","{","Throwable",".","class","}",")",";","\n		Exception","e","=","(","Exception",")","constructor",".","newInstance","(","npe",")",";","\n		assertNotNull","(","e,","\"Exception","should","be","created\"",")",";","\n		assertSame","(","npe,","e",".","getCause","(",")",")",";","\n	"],"docstring_tokens":["Test","the","cause","constructor"],"prompt_tokens":[]}
{"code_tokens":["\n	@Test\n	final","void","messageAndCauseConstructor","(",")","throws","Exception\n	","{","\n		NullPointerException","npe","=","new","NullPointerException","(",")",";","\n		Class<?>","c","=","Class",".","forName","(","getExceptionClassName","(",")",")",";","\n		Constructor<?>","constructor","=","c",".","getConstructor","(","new","Class[]","{","String",".","class,","Throwable",".","class","}",")",";","\n		Exception","e","=","(","Exception",")","constructor",".","newInstance","(","\"test","message\",","npe",")",";","\n		assertNotNull","(","e,","\"Exception","should","be","created\"",")",";","\n		assertEquals","(","\"test","message\",","e",".","getMessage","(",")",")",";","\n		assertSame","(","npe,","e",".","getCause","(",")",")",";","\n	"],"docstring_tokens":["Test","the","message","and","cause","constructor"],"prompt_tokens":[]}
{"code_tokens":["\n	protected","Integer","resolvePort","(","final","Url","url",")","\n	","{","\n		return","choose","(","url",".","getPort","(",")",",","baseUrl",".","getPort","(",")",",","request",".","getClientUrl","(",")",".","getPort","(",")",")",";","\n	"],"docstring_tokens":["Gets","port","that","should","be","used","to","render","the","url"],"prompt_tokens":[]}
{"code_tokens":["\n	protected","String","resolveHost","(","final","Url","url",")","\n	","{","\n		return","choose","(","url",".","getHost","(",")",",","baseUrl",".","getHost","(",")",",","request",".","getClientUrl","(",")",".","getHost","(",")",")",";","\n	"],"docstring_tokens":["Gets","the","host","name","that","should","be","used","to","render","the","url"],"prompt_tokens":[]}
{"code_tokens":["\n	protected","String","resolveProtocol","(","final","Url","url",")","\n	","{","\n		return","choose","(","url",".","getProtocol","(",")",",","baseUrl",".","getProtocol","(",")",",","request",".","getClientUrl","(",")","\n			",".","getProtocol","(",")",")",";","\n	"],"docstring_tokens":["Gets","the","protocol","that","should","be","used","to","render","the","url"],"prompt_tokens":[]}
{"code_tokens":["\n	private","void","removeCommonPrefixes","(","Request","request,","List<String>","segments",")","\n	","{","\n		//","try","to","remove","context/filter","path","only","if","the","Url","starts","with","'/',\n		//","i",".","e",".","has","an","empty","segment","in","the","beginning\n		if","(","(","segments",".","isEmpty","(",")","||","segments",".","get","(","0",")",".","isEmpty","(",")",")","==","false",")","\n		","{","\n			return",";","\n		","}","\n\n		Url","commonPrefix","=","Url",".","parse","(","request",".","getContextPath","(",")","+","request",".","getFilterPath","(",")",")",";","\n		//","if","both","context","and","filter","path","are","empty,","common","prefixes","are","empty","too\n		if","(","commonPrefix",".","getSegments","(",")",".","isEmpty","(",")",")","\n		","{","\n			//","WICKET-4920","and","WICKET-4935\n			commonPrefix",".","getSegments","(",")",".","add","(","\"\"",")",";","\n		","}","\n\n		for","(","int","i","=","0",";","i","<","commonPrefix",".","getSegments","(",")",".","size","(",")","&&","i","<","segments",".","size","(",")",";","i++",")","\n		","{","\n			String","commonPrefixSegment","=","Strings",".","stripJSessionId","(","commonPrefix",".","getSegments","(",")",".","get","(","i",")",")",";","\n			String","segmentToClean","=","Strings",".","stripJSessionId","(","segments",".","get","(","i",")",")",";","\n			if","(","commonPrefixSegment",".","equals","(","segmentToClean",")","==","false",")","\n			","{","\n				LOG",".","debug","(","\"Segments","'","{","}","'","do","not","start","with","common","prefix","'","{","}","'\",","segments,\n					commonPrefix",")",";","\n				return",";","\n			","}","\n		","}","\n\n		for","(","int","i","=","0",";","i","<","commonPrefix",".","getSegments","(",")",".","size","(",")","&&","!segments",".","isEmpty","(",")",";","i++",")","\n		","{","\n			segments",".","remove","(","0",")",";","\n		","}","\n	"],"docstring_tokens":["Removes","common","prefixes","like","empty","first","segment,","context","path","and","filter","path"],"prompt_tokens":[]}
{"code_tokens":["\n	protected","boolean","shouldRenderAsFull","(","final","Url","url",")","\n	","{","\n		if","(","url",".","shouldRenderAsFull","(",")",")","{","\n			return","true",";","\n		","}","\n\n		Url","clientUrl","=","request",".","getClientUrl","(",")",";","\n\n		if","(","!Strings",".","isEmpty","(","url",".","getProtocol","(",")",")","&&\n			!url",".","getProtocol","(",")",".","equals","(","clientUrl",".","getProtocol","(",")",")",")","\n		","{","\n			return","true",";","\n		","}","\n		if","(","!Strings",".","isEmpty","(","url",".","getHost","(",")",")","&&","!url",".","getHost","(",")",".","equals","(","clientUrl",".","getHost","(",")",")",")","\n		","{","\n			return","true",";","\n		","}","\n		if","(","(","url",".","getPort","(",")","!=","null",")","&&","!url",".","getPort","(",")",".","equals","(","clientUrl",".","getPort","(",")",")",")","\n		","{","\n			return","true",";","\n		","}","\n		if","(","url",".","isContextAbsolute","(",")",")","\n		","{","\n			//","do","not","relativize","urls","like","\"/a/b\"\n			return","true",";","\n		","}","\n		return","false",";","\n	"],"docstring_tokens":["Determines","whether","a","URL","should","be","rendered","in","its","full","form"],"prompt_tokens":[]}
{"code_tokens":["\n	public","String","renderContextRelativeUrl","(","String","url",")","\n	","{","\n		Args",".","notNull","(","url,","\"url\"",")",";","\n\n		if","(","url",".","startsWith","(","\"/\"",")",")","\n		","{","\n			url","=","url",".","substring","(","1",")",";","\n		","}","\n\n		PrependingStringBuffer","buffer","=","new","PrependingStringBuffer","(","url",")",";","\n		for","(","int","i","=","0",";","i","<","getBaseUrl","(",")",".","getSegments","(",")",".","size","(",")","-","1",";","++i",")","\n		","{","\n			buffer",".","prepend","(","\"",".",".","/\"",")",";","\n		","}","\n\n		buffer",".","prepend","(","request",".","getPrefixToContextPath","(",")",")",";","\n\n		return","buffer",".","toString","(",")",";","\n	"],"docstring_tokens":["Renders","the","URL","within","context","relative","to","current","base","URL"],"prompt_tokens":[]}
{"code_tokens":["\n	protected","void","setOptionAttributes","(","AppendingStringBuffer","buffer,","E","choice,","int","index,","String","selected",")","\n	","{","\n		if","(","isSelected","(","choice,","index,","selected",")",")","\n		","{","\n			buffer",".","append","(","\"selected=\\\"selected\\\"","\"",")",";","\n		","}","\n\n		if","(","isDisabled","(","choice,","index,","selected",")",")","\n		","{","\n			buffer",".","append","(","\"disabled=\\\"disabled\\\"","\"",")",";","\n		","}","\n\n		buffer",".","append","(","\"value=\\\"\"",")",";","\n		buffer",".","append","(","Strings",".","escapeMarkup","(","renderer",".","getIdValue","(","choice,","index",")",")",")",";","\n		buffer",".","append","(","'\"'",")",";","\n	"],"docstring_tokens":["Sets","the","attributes","of","a","single","choice","into","the","provided","buffer"],"prompt_tokens":[]}
{"code_tokens":["\n	public","AbstractCspHeaderItem","setNonce","(","String","nonce",")","\n	","{","\n		this",".","nonce","=","nonce",";","\n		return","this",";","\n	"],"docstring_tokens":["Set","the","CSP","nonce"],"prompt_tokens":[]}
{"code_tokens":["\n	private","IRequestHandler","internalMap","(","Exception","e",")","\n	","{","\n		final","Application","application","=","Application",".","get","(",")",";","\n\n		//","check","if","we","are","processing","an","Ajax","request","and","if","we","want","to","invoke","the","failure","handler\n		if","(","isProcessingAjaxRequest","(",")",")","\n		","{","\n			switch","(","application",".","getExceptionSettings","(",")",".","getAjaxErrorHandlingStrategy","(",")",")","\n			","{","\n				case","INVOKE_FAILURE_HANDLER",":\n					return","new","ErrorCodeRequestHandler","(","500",")",";","\n			","}","\n		","}","\n\n		IRequestHandler","handleExpectedExceptions","=","mapExpectedExceptions","(","e,","application",")",";","\n		\n		if","(","handleExpectedExceptions","!=","null",")","\n		","{","\n			return","handleExpectedExceptions",";","\n		","}","\n\n		return","mapUnexpectedExceptions","(","e,","application",")",";","\n	\n	"],"docstring_tokens":["Maps","exceptions","to","their","corresponding","IRequestHandler"],"prompt_tokens":[]}
{"code_tokens":["\n	public","boolean","isAscending","(",")","\n	","{","\n		return","ascending",";","\n	"],"docstring_tokens":["check","if","sort","order","is","ascending"],"prompt_tokens":[]}
{"code_tokens":["\n	public","void","assertAjaxLocation","(",")","\n	","{","\n		if","(","null","!=","getLastResponse","(",")",".","getHeader","(","\"Location\"",")",")","\n		","{","\n			fail","(","\"Location","header","should","*not*","be","present","when","using","Ajax\"",")",";","\n		","}","\n\n		String","ajaxLocation","=","getLastResponse","(",")",".","getHeader","(","\"Ajax-Location\"",")",";","\n		if","(","null","==","ajaxLocation",")","\n		","{","\n			fail","(","\"Ajax-Location","header","should","be","present","when","using","Ajax\"",")",";","\n		","}","\n\n		int","statusCode","=","getLastResponse","(",")",".","getStatus","(",")",";","\n		if","(","statusCode","!=","200",")","\n		","{","\n			fail","(","\"Expected","HTTP","status","code","to","be","200","(","OK",")","\"",")",";","\n		","}","\n	"],"docstring_tokens":["Asserts","that","the","Ajax","location","header","is","present"],"prompt_tokens":[]}
{"code_tokens":["\n	public","void","assertBehavior","(","String","path,","Class<?","extends","Behavior>","expectedBehaviorClass",")","\n	","{","\n		Args",".","notNull","(","expectedBehaviorClass,","\"expectedBehaviorClass\"",")",";","\n\n		Component","component","=","assertExists","(","path",")",";","\n		List<?","extends","Behavior>","behaviors","=","component",".","getBehaviors","(","expectedBehaviorClass",")",";","\n		final","String","message","=","String",".","format","(","\"Component","'%s'","has","no","behaviors","of","type","'%s'\",\n			component",".","getPageRelativePath","(",")",",","expectedBehaviorClass",")",";","\n		assertResult","(","new","Result","(","CollectionUtils",".","isEmpty","(","behaviors",")",",","message",")",")",";","\n	"],"docstring_tokens":["Asserts","that","the","Component","a","the","given","path","has","a","behavior","of","the","given","type"],"prompt_tokens":[]}
{"code_tokens":["\n	public","void","assertErrorMessages","(","Serializable",".",".",".","expectedErrorMessages",")","\n	","{","\n		assertFeedbackMessages","(","new","ExactLevelFeedbackMessageFilter","(","FeedbackMessage",".","ERROR",")",",\n			expectedErrorMessages",")",";","\n	"],"docstring_tokens":["Asserts","error-level","feedback","messages"],"prompt_tokens":[]}
{"code_tokens":["\n	public","void","assertInfoMessages","(","Serializable",".",".",".","expectedInfoMessages",")","\n	","{","\n		assertFeedbackMessages","(","new","ExactLevelFeedbackMessageFilter","(","FeedbackMessage",".","INFO",")",",\n			expectedInfoMessages",")",";","\n	"],"docstring_tokens":["Assert","info-level","feedback","messages"],"prompt_tokens":[]}
{"code_tokens":["\n	public","void","assertInvisible","(","String","path",")","\n	","{","\n		assertResult","(","isInvisible","(","path",")",")",";","\n	"],"docstring_tokens":["Asserts","that","a","Component","is","invisible"],"prompt_tokens":[]}
{"code_tokens":["\n	public","void","assertLabel","(","String","path,","String","expectedLabelText",")","\n	","{","\n		Label","label","=","(","Label",")","getComponentFromLastRenderedPage","(","path",")",";","\n		assertEquals","(","expectedLabelText,","label",".","getDefaultModelObjectAsString","(",")",")",";","\n	"],"docstring_tokens":["Asserts","the","text","of","a","Label","Component"],"prompt_tokens":[]}
{"code_tokens":["\n	public","void","assertModelValue","(","String","path,","Object","expectedValue",")","\n	","{","\n		Component","component","=","getComponentFromLastRenderedPage","(","path",")",";","\n		assertEquals","(","expectedValue,","component",".","getDefaultModelObject","(",")",")",";","\n	"],"docstring_tokens":["Asserts","the","model","value","of","a","component"],"prompt_tokens":[]}
{"code_tokens":["\n	public","void","assertNoErrorMessage","(",")","\n	","{","\n		assertNoFeedbackMessage","(","FeedbackMessage",".","ERROR",")",";","\n	"],"docstring_tokens":["Asserts","no","error-level","feedback","messages"],"prompt_tokens":[]}
{"code_tokens":["\n	public","void","assertNoInfoMessage","(",")","\n	","{","\n		assertNoFeedbackMessage","(","FeedbackMessage",".","INFO",")",";","\n	"],"docstring_tokens":["Asserts","no","info-level","feedback","messages"],"prompt_tokens":[]}
{"code_tokens":["\n	public","void","assertRenderedPage","(","Class<?","extends","Page>","expectedRenderedPageClass",")","\n	","{","\n		assertResult","(","isRenderedPage","(","expectedRenderedPageClass",")",")",";","\n	"],"docstring_tokens":["Asserts","a","last-rendered","Page","class"],"prompt_tokens":[]}
{"code_tokens":["\n	public","void","assertResultPage","(","final","String","expectedDocument",")","\n	","{","\n		//","Validate","the","document\n		String","document","=","getLastResponseAsString","(",")",";","\n		assertEquals","(","expectedDocument,","document",")",";","\n	"],"docstring_tokens":["Asserts","last-rendered","Page","against","an","expected","HTML","document","as","a	","String"],"prompt_tokens":[]}
{"code_tokens":["\n	public","void","assertVisible","(","String","path",")","\n	","{","\n		assertResult","(","isVisible","(","path",")",")",";","\n	"],"docstring_tokens":["Asserts","that","a","Component","is","visible"],"prompt_tokens":[]}
{"code_tokens":["\n	public","void","assertRedirectUrl","(","String","expectedRedirectUrl",")","\n	","{","\n		String","actualRedirectUrl","=","getLastResponse","(",")",".","getRedirectLocation","(",")",";","\n		assertEquals","(","expectedRedirectUrl,","actualRedirectUrl",")",";","\n	"],"docstring_tokens":["Assert","that","the","last","request","redirected","to","the","given","Url"],"prompt_tokens":[]}
{"code_tokens":["\n	@Around","(","\"execution","(","*","org",".","apache",".","wicket",".","Component",".","onDetach","(",".",".",")",")","\"",")","\n	public","Object","arroundOnDetach","(","ProceedingJoinPoint","joinPoint",")","throws","Throwable\n	","{","\n		return","mark","(","\"core/component/detach\",","joinPoint",")",";","\n	"],"docstring_tokens":["Collects","data","how","often","components","calls","onDetach"],"prompt_tokens":[]}
{"code_tokens":["\r\n	public","static","int","hashCode","(","final","Object",".",".",".","obj",")","\r\n	","{","\r\n		if","(","(","obj","==","null",")","||","(","obj",".","length","==","0",")",")","\r\n		","{","\r\n			return","0",";","\r\n		","}","\r\n		int","result","=","37",";","\r\n		for","(","int","i","=","obj",".","length","-","1",";","i",">","-1",";","i--",")","\r\n		","{","\r\n			result","=","37","*","result","+","(","obj[i]","!=","null","?","obj[i]",".","hashCode","(",")",":","0",")",";","\r\n		","}","\r\n		return","result",";","\r\n	"],"docstring_tokens":["returns","hashcode","of","the","objects","by","calling","obj.hashcode"],"prompt_tokens":[]}
{"code_tokens":["\n	@Override\n	public","int","getCompatibilityScore","(","final","Request","request",")","\n	","{","\n		int","score","=","Integer",".","MIN_VALUE",";","\n		for","(","IRequestMapper","mapper",":","this",")","\n		","{","\n			score","=","Math",".","max","(","score,","mapper",".","getCompatibilityScore","(","request",")",")",";","\n		","}","\n		return","score",";","\n	"],"docstring_tokens":["The","scope","of","the","compound","mapper","is","the","highest","score","of","the","registered","mappers"],"prompt_tokens":[]}
{"code_tokens":["\r\n	public","static","TimeOfDay","militaryTime","(","final","int","hour,","final","int","minute,","final","int","second",")","\r\n	","{","\r\n		if","(","(","hour",">","23",")","||","(","hour","<","0",")",")","\r\n		","{","\r\n			throw","new","IllegalArgumentException","(","\"Hour","\"","+","hour","+","\"","is","not","valid\"",")",";","\r\n		","}","\r\n\r\n		if","(","(","minute",">","59",")","||","(","minute","<","0",")",")","\r\n		","{","\r\n			throw","new","IllegalArgumentException","(","\"Minute","\"","+","minute","+","\"","is","not","valid\"",")",";","\r\n		","}","\r\n\r\n		if","(","(","second",">","59",")","||","(","second","<","0",")",")","\r\n		","{","\r\n			throw","new","IllegalArgumentException","(","\"Second","\"","+","second","+","\"","is","not","valid\"",")",";","\r\n		","}","\r\n\r\n		return","valueOf","(","Duration",".","hours","(","hour",")","\r\n			",".","add","(","Duration",".","minutes","(","minute",")",")","\r\n			",".","add","(","Duration",".","seconds","(","second",")",")",")",";","\r\n	"],"docstring_tokens":["Retrieves","a","TimeOfDay","value","on","a","24-hour","clock"],"prompt_tokens":[]}
{"code_tokens":["\r\n	public","static","TimeOfDay","time","(","final","int","hour,","final","int","minute,","final","int","second,\r\n		final","Meridian","meridian",")","\r\n	","{","\r\n		if","(","meridian","==","PM",")","\r\n		","{","\r\n			if","(","hour","==","12",")","\r\n			","{","\r\n				return","militaryTime","(","12,","minute,","second",")",";","\r\n			","}","\r\n			else\r\n			","{","\r\n				return","militaryTime","(","hour","+","12,","minute,","second",")",";","\r\n			","}","\r\n		","}","\r\n		else\r\n		","{","\r\n			if","(","hour","==","12",")","\r\n			","{","\r\n				return","militaryTime","(","0,","minute,","second",")",";","\r\n			","}","\r\n			else\r\n			","{","\r\n				return","militaryTime","(","hour,","minute,","second",")",";","\r\n			","}","\r\n		","}","\r\n	"],"docstring_tokens":["Retrieves","a","TimeOfDay","on","a","12-hour","clock"],"prompt_tokens":[]}
{"code_tokens":["\r\n	public","static","TimeOfDay","valueOf","(","final","Calendar","calendar,","final","String","time",")","\r\n		throws","ParseException\r\n	","{","\r\n		synchronized","(","timeFormat",")","\r\n		","{","\r\n			synchronized","(","calendar",")","\r\n			","{","\r\n				timeFormat",".","setCalendar","(","calendar",")",";","\r\n				return","new","TimeOfDay","(","timeFormat",".","parse","(","time",")",".","getTime","(",")",")",";","\r\n			","}","\r\n		","}","\r\n	"],"docstring_tokens":["Converts","a","time","String","and","Calendar","to","a","TimeOfDay","	","instance"],"prompt_tokens":[]}
{"code_tokens":["\r\n	public","static","TimeOfDay","valueOf","(","final","Calendar","calendar,","final","Time","time",")","\r\n	","{","\r\n		return","militaryTime","(","time",".","getHour","(","calendar",")",",","time",".","getMinute","(","calendar",")",",\r\n			time",".","getSecond","(","calendar",")",")",";","\r\n	"],"docstring_tokens":["Converts","a","Time","instance","and","Calendar","to","a","TimeOfDay","	","instance"],"prompt_tokens":[]}
{"code_tokens":["\r\n	public","static","TimeOfDay","valueOf","(","final","Duration","duration",")","\r\n	","{","\r\n		return","new","TimeOfDay","(","duration",".","getMilliseconds","(",")",")",";","\r\n	"],"docstring_tokens":["Converts","a","Duration","instance","to","a","TimeOfDay","instance"],"prompt_tokens":[]}
{"code_tokens":["\r\n	public","static","TimeOfDay","valueOf","(","final","long","time",")","\r\n	","{","\r\n		return","new","TimeOfDay","(","time",")",";","\r\n	"],"docstring_tokens":["Converts","a","long","value","to","a","TimeOfDay","instance"],"prompt_tokens":[]}
{"code_tokens":["\r\n	public","static","TimeOfDay","valueOf","(","final","String","time",")","throws","ParseException\r\n	","{","\r\n		return","valueOf","(","localtime,","time",")",";","\r\n	"],"docstring_tokens":["Converts","a","String","value","to","a","TimeOfDay","instance"],"prompt_tokens":[]}
{"code_tokens":["\r\n	public","int","hour","(",")","\r\n	","{","\r\n		return","toHours","(","getMilliseconds","(",")",")",";","\r\n	"],"docstring_tokens":["Retrieves","the","hour","of","the","day"],"prompt_tokens":[]}
{"code_tokens":["\r\n	public","Time","next","(",")","\r\n	","{","\r\n		return","next","(","AbstractTime",".","localtime",")",";","\r\n	"],"docstring_tokens":["Retrieves","the","next","occurrence","of","this","TimeOfDay","in","local","time"],"prompt_tokens":[]}
{"code_tokens":["\r\n	public","Time","next","(","final","Calendar","calendar",")","\r\n	","{","\r\n		//","Get","this","time","of","day","today\r\n		final","Time","timeToday","=","Time",".","valueOf","(","calendar,","this",")",";","\r\n\r\n		//","If","it","has","already","passed\r\n		if","(","timeToday",".","before","(","Time",".","now","(",")",")",")","\r\n		","{","\r\n			//","Return","the","time","tomorrow\r\n			return","Time",".","valueOf","(","calendar,","this",")",".","add","(","Duration",".","ONE_DAY",")",";","\r\n		","}","\r\n		else\r\n		","{","\r\n			//","Time","hasn't","happened","yet","today\r\n			return","timeToday",";","\r\n		","}","\r\n	"],"docstring_tokens":["Retrieves","the","next","occurrence","of","this","TimeOfDay","on","the","given","	","Calendar"],"prompt_tokens":[]}
{"code_tokens":["\n	protected","void","configureCache","(","final","ResourceResponse","data,","final","Attributes","attributes",")","\n	","{","\n		Response","response","=","attributes",".","getResponse","(",")",";","\n\n		if","(","response","instanceof","WebResponse",")","\n		","{","\n			Duration","duration","=","data",".","getCacheDuration","(",")",";","\n			WebResponse","webResponse","=","(","WebResponse",")","response",";","\n			if","(","duration",".","compareTo","(","Duration",".","ZERO",")",">","0",")","\n			","{","\n				webResponse",".","enableCaching","(","duration,","data",".","getCacheScope","(",")",")",";","\n			","}","\n			else\n			","{","\n				webResponse",".","disableCaching","(",")",";","\n			","}","\n		","}","\n	"],"docstring_tokens":["Configure","the","web","response","header","for","client","cache","control"],"prompt_tokens":[]}
{"code_tokens":["\n	protected","void","setResponseHeaders","(","final","ResourceResponse","resourceResponse,\n		final","Attributes","attributes",")","\n	","{","\n		Response","response","=","attributes",".","getResponse","(",")",";","\n		if","(","response","instanceof","WebResponse",")","\n		","{","\n			WebResponse","webResponse","=","(","WebResponse",")","response",";","\n\n			//","1",".","Last","Modified\n			Instant","lastModified","=","resourceResponse",".","getLastModified","(",")",";","\n			if","(","lastModified","!=","null",")","\n			","{","\n				webResponse",".","setLastModifiedTime","(","lastModified",")",";","\n			","}","\n\n			//","2",".","Caching\n			configureCache","(","resourceResponse,","attributes",")",";","\n\n			if","(","resourceResponse",".","getErrorCode","(",")","!=","null",")","\n			","{","\n				webResponse",".","sendError","(","resourceResponse",".","getErrorCode","(",")",",\n					resourceResponse",".","getErrorMessage","(",")",")",";","\n				return",";","\n			","}","\n\n			if","(","resourceResponse",".","getStatusCode","(",")","!=","null",")","\n			","{","\n				webResponse",".","setStatus","(","resourceResponse",".","getStatusCode","(",")",")",";","\n			","}","\n\n			if","(","!resourceResponse",".","dataNeedsToBeWritten","(","attributes",")",")","\n			","{","\n				webResponse",".","setStatus","(","HttpServletResponse",".","SC_NOT_MODIFIED",")",";","\n				return",";","\n			","}","\n\n			//","3",".","Content","Disposition\n			String","fileName","=","resourceResponse",".","getFileName","(",")",";","\n			ContentDisposition","disposition","=","resourceResponse",".","getContentDisposition","(",")",";","\n			if","(","ContentDisposition",".","ATTACHMENT","==","disposition",")","\n			","{","\n				webResponse",".","setAttachmentHeader","(","fileName",")",";","\n			","}","\n			else","if","(","ContentDisposition",".","INLINE","==","disposition",")","\n			","{","\n				webResponse",".","setInlineHeader","(","fileName",")",";","\n			","}","\n\n			//","4",".","Mime","Type","(","+","encoding",")","\n			String","mimeType","=","resourceResponse",".","getContentType","(",")",";","\n			if","(","mimeType","!=","null",")","\n			","{","\n				final","String","encoding","=","resourceResponse",".","getTextEncoding","(",")",";","\n\n				if","(","encoding","==","null",")","\n				","{","\n					webResponse",".","setContentType","(","mimeType",")",";","\n				","}","\n				else\n				","{","\n					webResponse",".","setContentType","(","mimeType","+","\"",";","charset=\"","+","encoding",")",";","\n				","}","\n			","}","\n\n			//","5",".","Accept","Range\n			ContentRangeType","acceptRange","=","resourceResponse",".","getAcceptRange","(",")",";","\n			if","(","acceptRange","!=","null",")","\n			","{","\n				webResponse",".","setAcceptRange","(","acceptRange",".","getTypeName","(",")",")",";","\n			","}","\n\n			long","contentLength","=","resourceResponse",".","getContentLength","(",")",";","\n			boolean","contentRangeApplied","=","false",";","\n\n			//","6",".","Content","Range\n			//","for","more","information","take","a","look","here:\n			//","http://stackoverflow",".","com/questions/8293687/sample-http-range-request-session\n			//","if","the","content","range","header","has","been","set","directly\n			//","to","the","resource","response","use","it","otherwise","calculate","it\n			String","contentRange","=","resourceResponse",".","getContentRange","(",")",";","\n			if","(","contentRange","!=","null",")","\n			","{","\n				webResponse",".","setContentRange","(","contentRange",")",";","\n			","}","\n			else\n			","{","\n				//","content","length","has","to","be","set","otherwise","the","content","range","header","can","not","be\n				//","calculated","-","accept","range","must","be","set","to","bytes","-","others","are","not","supported","at","the\n				//","moment\n				if","(","contentLength","!=","-1","&&","ContentRangeType",".","BYTES",".","equals","(","acceptRange",")",")","\n				","{","\n					contentRangeApplied","=","setResponseContentRangeHeaderFields","(","webResponse,\n						attributes,","contentLength",")",";","\n				","}","\n			","}","\n\n			//","7",".","Content","Length\n			if","(","contentLength","!=","-1","&&","!contentRangeApplied",")","\n			","{","\n				webResponse",".","setContentLength","(","contentLength",")",";","\n			","}","\n\n			//","add","custom","headers","and","values\n			final","HttpHeaderCollection","headers","=","resourceResponse",".","getHeaders","(",")",";","\n\n			for","(","String","name",":","headers",".","getHeaderNames","(",")",")","\n			","{","\n				checkHeaderAccess","(","name",")",";","\n\n				for","(","String","value",":","headers",".","getHeaderValues","(","name",")",")","\n				","{","\n					webResponse",".","addHeader","(","name,","value",")",";","\n				","}","\n			","}","\n		","}","\n	"],"docstring_tokens":["Sets","the","response","header","of","resource","response","to","the","response","received","from","the","attributes"],"prompt_tokens":[]}
{"code_tokens":["\n	@Override\n	public","boolean","isVersioned","(",")","\n	","{","\n		return","false",";","\n	"],"docstring_tokens":["No","need","for","versioning","this","frame"],"prompt_tokens":[]}
{"code_tokens":["\r\n	public","void","assertValidInStack","(","ComponentTag","tag",")","throws","ParseException\r\n	","{","\r\n		//","Get","the","next","tag",".","If","null,","no","more","tags","are","available\r\n		if","(","tag","==","null",")","\r\n		","{","\r\n			validate","(",")",";","\r\n			return",";","\r\n		","}","\r\n\r\n		if","(","log",".","isDebugEnabled","(",")","&&","debug",")","\r\n		","{","\r\n			log",".","debug","(","\"tag:","\"","+","tag",".","toUserDebugString","(",")","+","\",","stack:","\"","+","stack",")",";","\r\n		","}","\r\n\r\n		//","Check","tag","type\r\n		if","(","tag",".","isOpen","(",")",")","\r\n		","{","\r\n			//","Push","onto","stack\r\n			stack",".","push","(","tag",")",";","\r\n		","}","\r\n		else","if","(","tag",".","isClose","(",")",")","\r\n		","{","\r\n			assertOpenTagFor","(","tag",")",";","\r\n		","}","\r\n		else","if","(","tag",".","isOpenClose","(",")",")","\r\n		","{","\r\n			//","Tag","closes","itself\r\n			tag",".","setOpenTag","(","tag",")",";","\r\n		","}","\r\n	"],"docstring_tokens":["Assert","that","tag","has","no","mismatch","error"],"prompt_tokens":[]}
{"code_tokens":["\r\n	private","void","assertOpenTagFor","(","ComponentTag","closeTag",")","throws","ParseException\r\n	","{","\r\n		//","Check","that","there","is","something","on","the","stack\r\n		if","(","stack",".","size","(",")",">","0",")","\r\n		","{","\r\n			//","Pop","the","top","tag","off","the","stack\r\n			ComponentTag","top","=","stack",".","pop","(",")",";","\r\n\r\n			//","If","the","name","of","the","current","close","tag","does","not","match","the\r\n			//","tag","on","the","stack","then","we","may","have","a","mismatched","close","tag\r\n			boolean","mismatch","=","!hasEqualTagName","(","top,","closeTag",")",";","\r\n\r\n			if","(","mismatch",")","\r\n			","{","\r\n				top",".","setHasNoCloseTag","(","true",")",";","\r\n\r\n				//","Pop","any","simple","tags","off","the","top","of","the","stack\r\n				while","(","mismatch","&&","!requiresCloseTag","(","top",".","getName","(",")",")",")","\r\n				","{","\r\n					top",".","setHasNoCloseTag","(","true",")",";","\r\n\r\n					//","Pop","simple","tag\r\n					if","(","stack",".","isEmpty","(",")",")","\r\n					","{","\r\n						break",";","\r\n					","}","\r\n					top","=","stack",".","pop","(",")",";","\r\n\r\n					//","Does","new","top","of","stack","mismatch","too?\r\n					mismatch","=","!hasEqualTagName","(","top,","closeTag",")",";","\r\n				","}","\r\n\r\n				//","If","adjusting","for","simple","tags","did","not","fix","the","problem,\r\n				//","it","must","be","a","real","mismatch",".","\r\n				if","(","mismatch",")","\r\n				","{","\r\n					throw","new","ParseException","(","\"Tag","\"","+","top",".","toUserDebugString","(",")","+\r\n						\"","has","a","mismatched","close","tag","at","\"","+","closeTag",".","toUserDebugString","(",")",",\r\n						top",".","getPos","(",")",")",";","\r\n				","}","\r\n			","}","\r\n\r\n			//","Tag","matches,","so","add","pointer","to","matching","tag\r\n			closeTag",".","setOpenTag","(","top",")",";","\r\n		","}","\r\n		else\r\n		","{","\r\n			throw","new","WicketParseException","(","\"Tag","does","not","have","a","matching","open","tag:\",","closeTag",")",";","\r\n		","}","\r\n	"],"docstring_tokens":["Bind","close","tag","with","its","open","tag","and","pop","it","from","the","stack"],"prompt_tokens":[]}
{"code_tokens":["\r\n	public","void","debug","(",")","\r\n	","{","\r\n		debug","=","true",";","\r\n	"],"docstring_tokens":["Configure","this","stack","to","call","log.debug","at","operations"],"prompt_tokens":[]}
{"code_tokens":["\r\n	public","static","boolean","hasEqualTagName","(","final","ComponentTag","tag1,","final","ComponentTag","tag2",")","\r\n	","{","\r\n		if","(","!tag1",".","getName","(",")",".","equalsIgnoreCase","(","tag2",".","getName","(",")",")",")","\r\n		","{","\r\n			return","false",";","\r\n		","}","\r\n\r\n		if","(","(","tag1",".","getNamespace","(",")","==","null",")","&&","(","tag2",".","getNamespace","(",")","==","null",")",")","\r\n		","{","\r\n			return","true",";","\r\n		","}","\r\n\r\n		if","(","(","tag1",".","getNamespace","(",")","!=","null",")","&&","(","tag2",".","getNamespace","(",")","!=","null",")",")","\r\n		","{","\r\n			return","tag1",".","getNamespace","(",")",".","equalsIgnoreCase","(","tag2",".","getNamespace","(",")",")",";","\r\n		","}","\r\n\r\n		return","false",";","\r\n	"],"docstring_tokens":["Compare","tag","name","including","namespace"],"prompt_tokens":[]}
{"code_tokens":["\r\n	public","Integer","getWidth","(",")","\r\n	","{","\r\n		return","width",";","\r\n	"],"docstring_tokens":["Gets","the","width","of","the","video","area"],"prompt_tokens":[]}
{"code_tokens":["\r\n	public","void","setWidth","(","Integer","width",")","\r\n	","{","\r\n		this",".","width","=","width",";","\r\n	"],"docstring_tokens":["Sets","the","width","of","the","video","area"],"prompt_tokens":[]}
{"code_tokens":["\r\n	public","Integer","getHeight","(",")","\r\n	","{","\r\n		return","height",";","\r\n	"],"docstring_tokens":["Gets","the","height","of","the","video","area"],"prompt_tokens":[]}
{"code_tokens":["\r\n	public","void","setHeight","(","Integer","height",")","\r\n	","{","\r\n		this",".","height","=","height",";","\r\n	"],"docstring_tokens":["Sets","the","height","of","the","video","area"],"prompt_tokens":[]}
{"code_tokens":["\n	protected","boolean","shouldTrigger","(",")","\n	","{","\n		return","isStopped","(",")","==","false","&&\n				isEnabled","(","getComponent","(",")",")","&&\n				","(","getComponent","(",")","instanceof","Page","||","getComponent","(",")",".","findParent","(","Page",".","class",")","!=","null",")",";","\n	"],"docstring_tokens":["Decides","whether","the","timer","behavior","should","render","its","JavaScript","to","re-trigger","it","after","the	","update","interval"],"prompt_tokens":[]}
{"code_tokens":["\n	public","static","AbstractAjaxTimerBehavior","onTimer","(","Duration","interval,","SerializableConsumer<AjaxRequestTarget>","onTimer",")","\n	","{","\n		Args",".","notNull","(","onTimer,","\"onTimer\"",")",";","\n\n		return","new","AbstractAjaxTimerBehavior","(","interval",")","\n		","{","\n			private","static","final","long","serialVersionUID","=","1L",";","\n\n			@Override\n			protected","void","onTimer","(","AjaxRequestTarget","target",")","\n			","{","\n				onTimer",".","accept","(","target",")",";","\n			","}","\n		","}",";","\n	"],"docstring_tokens":["Creates","an","AbstractAjaxTimerBehavior","based","on","lambda","expressions"],"prompt_tokens":[]}
{"code_tokens":["\n	@Override\n	protected","void","updateAjaxAttributes","(","AjaxRequestAttributes","attributes",")","\n	","{","\n		super",".","updateAjaxAttributes","(","attributes",")",";","\n\n		String","parameter","=","\"return","{","'\"","+","PARAM_WINDOW_NAME","+","\"':","window",".","name","}","\"",";","\n		attributes",".","getDynamicExtraParameters","(",")",".","add","(","parameter",")",";","\n\n		if","(","boundName","!=","null",")","\n		","{","\n			//","already","bound,","send","request","only","when","changed\n			attributes",".","getAjaxCallListeners","(",")",".","add","(","new","AjaxCallListener","(",")","\n			","{","\n				@Override\n				public","CharSequence","getPrecondition","(","Component","component",")","\n				","{","\n					return","String",".","format","(","\"return","(","window",".","name","!==","'%s'",")",";","\",","boundName",")",";","\n				","}","\n			","}",")",";","\n		","}","\n	"],"docstring_tokens":["Overridden","to","add","the","current","window","name","to","the","request"],"prompt_tokens":[]}
{"code_tokens":["\n	public","static","AjaxNewWindowNotifyingBehavior","onNewWindow","(","SerializableConsumer<AjaxRequestTarget>","onNewWindow",")","\n	","{","\n		Args",".","notNull","(","onNewWindow,","\"onNewWindow\"",")",";","\n\n		return","new","AjaxNewWindowNotifyingBehavior","(",")","\n		","{","\n			private","static","final","long","serialVersionUID","=","1L",";","\n\n			@Override\n			protected","void","onNewWindow","(","AjaxRequestTarget","target",")","\n			","{","\n				onNewWindow",".","accept","(","target",")",";","\n			","}","\n		","}",";","\n	"],"docstring_tokens":["Creates","an","AjaxNewWindowNotifyingBehavior","based","on","lambda","expressions"],"prompt_tokens":[]}
{"code_tokens":["\n	public","static","IMarkupCache","get","(",")","\n	","{","\n		return","Application",".","get","(",")",".","getMarkupSettings","(",")",".","getMarkupFactory","(",")",".","getMarkupCache","(",")",";","\n	"],"docstring_tokens":["A","convenient","helper","to","get","the","markup","cache","registered","with","the","application"],"prompt_tokens":[]}
{"code_tokens":["\r\n	public","IPageManager","adapt","(","final","IPageManager","manager",")","\r\n	","{","\r\n		return","new","IPageManager","(",")","\r\n		","{","\r\n			@Override\r\n			public","boolean","supportsVersioning","(",")","\r\n			","{","\r\n				return","manager",".","supportsVersioning","(",")",";","\r\n			","}","\r\n\r\n			@Override\r\n			public","IManageablePage","getPage","(","int","pageId",")","\r\n			","{","\r\n				IManageablePage","page","=","null",";","\r\n				try\r\n				","{","\r\n					lockPage","(","pageId",")",";","\r\n					page","=","manager",".","getPage","(","pageId",")",";","\r\n				","}","\r\n				finally\r\n				","{","\r\n					if","(","page","==","null",")","\r\n					","{","\r\n						unlockPage","(","pageId",")",";","\r\n					","}","\r\n				","}","\r\n				return","page",";","\r\n			","}","\r\n\r\n			@Override\r\n			public","void","removePage","(","IManageablePage","page",")","\r\n			","{","\r\n				if","(","page","!=","null",")","\r\n				","{","\r\n					try\r\n					","{","\r\n						manager",".","removePage","(","page",")",";","\r\n					","}","\r\n					finally\r\n					","{","\r\n						unlockPage","(","page",".","getPageId","(",")",")",";","\r\n					","}","\r\n				","}","\r\n			","}","\r\n\r\n			@Override\r\n			public","void","touchPage","(","IManageablePage","page",")","\r\n			","{","\r\n				lockPage","(","page",".","getPageId","(",")",")",";","\r\n\r\n				manager",".","touchPage","(","page",")",";","\r\n			","}","\r\n\r\n			@Override\r\n			public","void","clear","(",")","\r\n			","{","\r\n				manager",".","clear","(",")",";","\r\n			","}","\r\n\r\n			@Override\r\n			public","void","untouchPage","(","IManageablePage","page",")","\r\n			","{","\r\n				manager",".","untouchPage","(","page",")",";","\r\n			","}","\r\n\r\n			@Override\r\n			public","void","detach","(",")","\r\n			","{","\r\n				try\r\n				","{","\r\n					manager",".","detach","(",")",";","\r\n				","}","\r\n				finally\r\n				","{","\r\n					unlockAllPages","(",")",";","\r\n				","}","\r\n			","}","\r\n\r\n			@Override\r\n			public","IPageStore","getPageStore","(",")","\r\n			","{","\r\n				return","manager",".","getPageStore","(",")",";","\r\n			","}","\r\n\r\n			@Override\r\n			public","void","destroy","(",")","\r\n			","{","\r\n				manager",".","destroy","(",")",";","\r\n			","}","\r\n		","}",";","\r\n	"],"docstring_tokens":["Wraps","a","page","manager","with","this","synchronizer"],"prompt_tokens":[]}
{"code_tokens":["\n	public","void","reset","(",")","\n	","{","\n		guessed","=","false",";","\n	"],"docstring_tokens":["Resets","this","letter","into","the","default","state"],"prompt_tokens":[]}
{"code_tokens":["\n	public","LabeledWebMarkupContainer","getFormComponent","(",")","\n	","{","\n		return","component",";","\n	"],"docstring_tokens":["Returns","LabeledWebMarkupContainer","bound","to","this","label"],"prompt_tokens":[]}
{"code_tokens":["\n	@Override\n	public","void","push","(","HttpServletRequest","httpServletRequest,","PushItem",".",".",".","pushItems",")","\n	","{","\n		LOG",".","warn","(","\n			\"This","PushBuilder","does","nothing",".","Please","use","one","of","the","other","implementations","-","Jetty9","or","Tomcat8",".","5+\"",")",";","\n	"],"docstring_tokens":["Warns","the","dev","to","provide","a","vendor","specific","push","builder","API"],"prompt_tokens":[]}
{"code_tokens":["\n	private","void","load","(",")","{","\n		if","(","buffer",".","length","(",")","==","0",")","\n		","{","\n			String","path","=","Packages",".","absolutePath","(","scope,","fileName",")",";","\n\n			Application","app","=","Application",".","get","(",")",";","\n\n			//","first","try","default","class","loading","locator","to","find","the","resource\n			IResourceStream","stream","=","app",".","getResourceSettings","(",")","\n				",".","getResourceStreamLocator","(",")","\n				",".","locate","(","scope,","path,","getStyle","(",")",",","getVariation","(",")",",","getLocale","(",")",",","null,","false",")",";","\n\n			if","(","stream","==","null",")","\n			","{","\n				//","if","the","default","locator","didn't","find","the","resource","then","fallback\n				stream","=","new","ResourceStreamLocator","(",")",".","locate","(","scope,","path,","getStyle","(",")",",","getVariation","(",")",",","getLocale","(",")",",","null,","false",")",";","\n			","}","\n\n			if","(","stream","==","null",")","\n			","{","\n				throw","new","IllegalArgumentException","(","\"resource","\"","+","fileName","+","\"","not","found","for","scope","\"","+\n					scope","+","\"","(","path","=","\"","+","path","+","\"",")","\"",")",";","\n			","}","\n\n			setLastModified","(","stream",".","lastModifiedTime","(",")",")",";","\n\n			try\n			","{","\n				if","(","encoding","!=","null",")","\n				","{","\n					buffer",".","append","(","Streams",".","readString","(","stream",".","getInputStream","(",")",",","encoding",")",")",";","\n				","}","\n				else\n				","{","\n					buffer",".","append","(","Streams",".","readString","(","stream",".","getInputStream","(",")",")",")",";","\n				","}","\n			","}","\n			catch","(","IOException","e",")","\n			","{","\n				throw","new","RuntimeException","(","e",")",";","\n			","}","\n			catch","(","ResourceStreamNotFoundException","e",")","\n			","{","\n				throw","new","RuntimeException","(","e",")",";","\n			","}","\n			finally\n			","{","\n				try\n				","{","\n					stream",".","close","(",")",";","\n				","}","\n				catch","(","IOException","e",")","\n				","{","\n					log",".","error","(","e",".","getMessage","(",")",",","e",")",";","\n				","}","\n			","}","\n		","}","\n	"],"docstring_tokens":["Loads","the","template","if","it","is","not","loaded","yet"],"prompt_tokens":[]}
{"code_tokens":["\n	public","String","getTitle","(",")","\n	","{","\n		return","(","title","!=","null",")","?","title",".","getObject","(",")",":","null",";","\n	"],"docstring_tokens":["Gets","the","title","of","this","step"],"prompt_tokens":[]}
{"code_tokens":["\n	protected","void","onInit","(","final","IWizardModel","wizardModel",")","\n	","{","\n	"],"docstring_tokens":["Template","method","that","is","called","when","the","step","is","being","initialized"],"prompt_tokens":[]}
{"code_tokens":["\n	@Override\n	public","final","String","encryptUrlSafe","(","final","String","plainText",")","\n	","{","\n		try\n		","{","\n			byte[]","encrypted","=","encryptStringToByteArray","(","plainText",")",";","\n			Base64",".","Encoder","encoder","=","Base64",".","getUrlEncoder","(",")",".","withoutPadding","(",")",";","\n			byte[]","encoded","=","encoder",".","encode","(","encrypted",")",";","\n			return","new","String","(","encoded,","CHARACTER_ENCODING",")",";","\n		","}","\n		catch","(","GeneralSecurityException","e",")","\n		","{","\n			log",".","error","(","\"Unable","to","encrypt","text","'\"","+","plainText","+","\"'\",","e",")",";","\n			return","null",";","\n		","}","\n		catch","(","UnsupportedEncodingException","e",")","\n		","{","\n			log",".","error","(","\"Unable","to","encrypt","text","'\"","+","plainText","+","\"'\",","e",")",";","\n			return","null",";","\n		","}","\n	"],"docstring_tokens":["Encrypt","a","string","into","a","string","using","URL","safe","Base64","encoding"],"prompt_tokens":[]}
{"code_tokens":["\n	public","ResourceReference","get","(","Class<?>","scope,","String","name,","Locale","locale,","String","style,\n		String","variation,","boolean","strict",")","\n	","{","\n		return","registry",".","getResourceReference","(","scope,","name,","locale,","style,","variation,","strict,","true",")",";","\n	"],"docstring_tokens":["Resolves","a","ResourceReference","for","a","shared","resource"],"prompt_tokens":[]}
{"code_tokens":["\n	public","final","Class<?","extends","Page>","getPageClass","(",")","\n	","{","\n		return","WicketObjects",".","resolveClass","(","pageClassName",")",";","\n	"],"docstring_tokens":["Get","the","page","class","registered","with","the","link"],"prompt_tokens":[]}
{"code_tokens":["\n	@Override\n	public","boolean","linksTo","(","final","Page","page",")","\n	","{","\n		return","page",".","getClass","(",")","==","getPageClass","(",")",";","\n	"],"docstring_tokens":["Whether","this","link","refers","to","the","given","page"],"prompt_tokens":[]}
{"code_tokens":["\n	private","void","setContainsWicketIdFlag","(","ComponentTag","tag",")","\n	","{","\n		//","check","if","it","is","a","wicket:id","component\n		String","wicketIdAttr","=","getWicketNamespace","(",")","+","\":\"","+","\"id\"",";","\n		boolean","hasWicketId","=","tag",".","getAttributes","(",")",".","get","(","wicketIdAttr",")","!=","null",";","\n\n		if","(","hasWicketId",")","\n		","{","\n			for","(","ComponentTag","componentTag",":","stack",")","\n			","{","\n				componentTag",".","setContainsWicketId","(","hasWicketId",")",";","\n			","}","\n		","}","\n	"],"docstring_tokens":["Checks","if","the","tag","is","a","Wicket","component","explicitly","added"],"prompt_tokens":[]}
{"code_tokens":["\n	public","boolean","getBoolean","(","final","Matcher","matcher,","final","boolean","defaultValue",")","\n	","{","\n		final","String","value","=","get","(","matcher",")",";","\n		return","value","==","null","?","defaultValue",":","value",".","equals","(","\"true\"",")",";","\n	"],"docstring_tokens":["Gets","a","boolean","by","parsing","the","String","matched","by","this","capturing","group"],"prompt_tokens":[]}
{"code_tokens":["\n	protected","IPropertiesFactory","getPropertiesFactory","(",")","\n	","{","\n		return","Application",".","get","(",")",".","getResourceSettings","(",")",".","getPropertiesFactory","(",")",";","\n	"],"docstring_tokens":["Get","the","properties","file","factory","which","loads","the","properties","based","on","locale","and","style","from	",".properties","and",".xml","files"],"prompt_tokens":[]}
{"code_tokens":["\n	public","String","stripCommentsAndWhitespace","(","String","original",")","\n	","{","\n		//","let's","be","optimistic\n		AppendingStringBuffer","result","=","new","AppendingStringBuffer","(","original",".","length","(",")","/","2",")",";","\n		int","state","=","REGULAR_TEXT",";","\n		boolean","wasNewLineInWhitespace","=","false",";","\n\n		for","(","int","i","=","0",";","i","<","original",".","length","(",")",";","++i",")","\n		","{","\n			char","c","=","original",".","charAt","(","i",")",";","\n			char","next","=","(","i","<","original",".","length","(",")","-","1",")","?","original",".","charAt","(","i","+","1",")",":","0",";","\n			char","prev","=","(","i",">","0",")","?","original",".","charAt","(","i","-","1",")",":","0",";","\n\n			if","(","state","==","WHITE_SPACE",")","\n			","{","\n				//","WICKET","2060\n				if","(","c","==","'\\n'","&&","!wasNewLineInWhitespace",")","\n				","{","\n					result",".","append","(","\"\\n\"",")",";","\n					wasNewLineInWhitespace","=","true",";","\n				","}","\n				if","(","Character",".","isWhitespace","(","next",")","==","false",")","\n				","{","\n					state","=","REGULAR_TEXT",";","\n				","}","\n				continue",";","\n			","}","\n\n			if","(","state","==","REGULAR_TEXT",")","\n			","{","\n				if","(","c","==","'/'","&&","next","==","'/'","&&","prev","!=","'\\\\'",")","\n				","{","\n					state","=","LINE_COMMENT",";","\n					continue",";","\n				","}","\n				else","if","(","c","==","'/'","&&","next","==","'*'",")","\n				","{","\n					state","=","MULTILINE_COMMENT",";","\n					++i",";","\n					continue",";","\n				","}","\n				else","if","(","c","==","'/'",")","\n				","{","\n					//","This","might","be","a","divide","operator,","or","it","might","be","a","regular","expression",".","\n					//","Work","out","if","it's","a","regular","expression","by","finding","the","previous","non-whitespace\n					//","char,","which\n					//","will","be","either","'='","or","'","(","'",".","If","it's","not,","it's","just","a","divide","operator",".","\n					int","idx","=","result",".","length","(",")","-","1",";","\n					while","(","idx",">","0",")","\n					","{","\n						char","tmp","=","result",".","charAt","(","idx",")",";","\n						if","(","Character",".","isWhitespace","(","tmp",")",")","\n						","{","\n							idx--",";","\n							continue",";","\n						","}","\n						if","(","tmp","==","'='","||","tmp","==","'","(","'","||","tmp","==","'","{","'","||","tmp","==","':'","||","tmp","==","','","||\n							tmp","==","'['","||","tmp","==","'",";","'","||","tmp","==","'!'",")","\n						","{","\n							state","=","REG_EXP",";","\n							break",";","\n						","}","\n						break",";","\n					","}","\n				","}","\n				else","if","(","Character",".","isWhitespace","(","c",")","&&","Character",".","isWhitespace","(","next",")",")","\n				","{","\n					//","WICKET-2060\n					if","(","c","==","'\\n'","||","next","==","'\\n'",")","\n					","{","\n						c","=","'\\n'",";","\n						wasNewLineInWhitespace","=","true",";","\n					","}","\n					else\n					","{","\n						c","=","'","'",";","\n						wasNewLineInWhitespace","=","false",";","\n					","}","\n					//","ignore","all","whitespace","characters","after","this","one\n					state","=","WHITE_SPACE",";","\n				","}","\n				else","if","(","c","==","'\\''",")","\n				","{","\n					state","=","STRING_SINGLE_QUOTE",";","\n				","}","\n				else","if","(","c","==","'\"'",")","\n				","{","\n					state","=","STRING_DOUBLE_QUOTES",";","\n				","}","\n				else","if","(","c","==","'`'",")","\n				","{","\n					state","=","TEMPLATE_LITERAL",";","\n				","}","\n				result",".","append","(","c",")",";","\n				continue",";","\n			","}","\n\n			if","(","state","==","LINE_COMMENT",")","\n			","{","\n				if","(","c","==","'\\n'","||","c","==","'\\r'",")","\n				","{","\n					state","=","REGULAR_TEXT",";","\n					result",".","append","(","c",")",";","\n					continue",";","\n				","}","\n			","}","\n\n			if","(","state","==","MULTILINE_COMMENT",")","\n			","{","\n				if","(","c","==","'*'","&&","next","==","'/'",")","\n				","{","\n					state","=","REGULAR_TEXT",";","\n					++i",";","\n					continue",";","\n				","}","\n			","}","\n\n			if","(","state","==","STRING_SINGLE_QUOTE",")","\n			","{","\n				//","to","leave","a","string","expression","we","need","even","(","or","zero",")","number","of","backslashes\n				int","count","=","getPrevCount","(","original,","i,","'\\\\'",")",";","\n				if","(","c","==","'\\''","&&","count","%","2","==","0",")","\n				","{","\n					state","=","REGULAR_TEXT",";","\n				","}","\n				result",".","append","(","c",")",";","\n				continue",";","\n			","}","\n\n			if","(","state","==","STRING_DOUBLE_QUOTES",")","\n			","{","\n				//","to","leave","a","string","expression","we","need","even","(","or","zero",")","number","of","backslashes\n				int","count","=","getPrevCount","(","original,","i,","'\\\\'",")",";","\n				if","(","c","==","'\"'","&&","count","%","2","==","0",")","\n				","{","\n					state","=","REGULAR_TEXT",";","\n				","}","\n				result",".","append","(","c",")",";","\n				continue",";","\n			","}","\n\n			if","(","state","==","REG_EXP",")","\n			","{","\n				//","to","leave","regular","expression","we","need","even","(","or","zero",")","number","of","backslashes\n				int","count","=","getPrevCount","(","original,","i,","'\\\\'",")",";","\n				if","(","c","==","'/'","&&","count","%","2","==","0",")","\n				","{","\n					state","=","REGULAR_TEXT",";","\n				","}","\n				result",".","append","(","c",")",";","\n			","}","\n\n			if","(","state","==","TEMPLATE_LITERAL",")","{","\n				//","to","leave","a","template","literal","expression","we","need","even","(","or","zero",")","number","of","backslashes\n				int","count","=","getPrevCount","(","original,","i,","'\\\\'",")",";","\n				if","(","c","==","'`'","&&","count","%","2","==","0",")","{","\n					state","=","REGULAR_TEXT",";","\n				","}","\n				result",".","append","(","c",")",";","\n				continue",";","\n			","}","\n		","}","\n\n		return","result",".","toString","(",")",";","\n	"],"docstring_tokens":["Removes","javascript","comments","and","whitespace","from","specified","string"],"prompt_tokens":[]}
{"code_tokens":["\n	@Override\n	public","int","getCompatibilityScore","(","Request","request",")","\n	","{","\n		return","Integer",".","MIN_VALUE","+","1",";","\n	"],"docstring_tokens":["Use","this","mapper","as","a","last","option"],"prompt_tokens":[]}
{"code_tokens":["\n	protected","FileSystemResource","getFileSystemResource","(",")","\n	","{","\n		if","(","path","==","null",")","\n		","{","\n			throw","new","WicketRuntimeException","(","\n				\"Please","override","#getResource","(",")","and","provide","a","path","if","using","a","constructor","which","doesn't","take","one","as","argument",".","\"",")",";","\n		","}","\n		return","new","FileSystemResource","(","path",")",";","\n	"],"docstring_tokens":["Gets","the","file","system","resource","to","be","used","for","the","resource","reference"],"prompt_tokens":[]}
{"code_tokens":["\n	public","static","StringHeaderItem","forString","(","CharSequence","string",")","\n	","{","\n		return","new","StringHeaderItem","(","string",")",";","\n	"],"docstring_tokens":["Creates","a","StringHeaderItem","for","the","snippet"],"prompt_tokens":[]}
{"code_tokens":["\n	public","HttpServletRequest","getWrapper","(","final","HttpServletRequest","request",")","\n	","{","\n		if","(","isEnabled","(",")","&&","needsWrapper","(","request",")",")","\n		","{","\n			return","newRequestWrapper","(","request",")",";","\n		","}","\n		return","request",";","\n	"],"docstring_tokens":["Wrap","the","given","request"],"prompt_tokens":[]}
{"code_tokens":["\n	public","final","void","remove","(","final","String","key",")","\n	","{","\n		final","Cookie","cookie","=","getCookie","(","key",")",";","\n		if","(","cookie","!=","null",")","\n		","{","\n			remove","(","cookie",")",";","\n		","}","\n	"],"docstring_tokens":["Remove","the","cookie","identified","by","the","key"],"prompt_tokens":[]}
{"code_tokens":["\n	public","final","void","remove","(","final","FormComponent<?>","formComponent",")","\n	","{","\n		remove","(","getKey","(","formComponent",")",")",";","\n	"],"docstring_tokens":["Remove","the","cookie","identified","by","the","form","component"],"prompt_tokens":[]}
{"code_tokens":["\n	public","final","String","load","(","final","String","key",")","\n	","{","\n		final","Cookie","cookie","=","getCookie","(","key",")",";","\n		if","(","cookie","!=","null",")","\n		","{","\n			return","cookie",".","getValue","(",")",";","\n		","}","\n		return","null",";","\n	"],"docstring_tokens":["Retrieve","the","cookie","value","by","means","of","its","key"],"prompt_tokens":[]}
{"code_tokens":["\n	public","final","String","load","(","final","FormComponent<?>","formComponent",")","\n	","{","\n		String","value","=","load","(","getKey","(","formComponent",")",")",";","\n		if","(","value","!=","null",")","\n		","{","\n			//","Assign","the","retrieved/persisted","value","to","the","component\n			formComponent",".","setModelValue","(","new","String[]","{","value","}",")",";","\n		","}","\n		return","value",";","\n	"],"docstring_tokens":["Retrieve","the","cookie","value","associated","with","the","formComponent","and","load","the","model","object","with	","the","cookie","value"],"prompt_tokens":[]}
{"code_tokens":["\n	public","final","void","save","(","String","name,","final","String","value",")","\n	","{","\n		Cookie","cookie","=","getCookie","(","name",")",";","\n		if","(","cookie","==","null",")","\n		","{","\n			cookie","=","new","Cookie","(","name,","value",")",";","\n		","}","\n		else\n		","{","\n			cookie",".","setValue","(","value",")",";","\n		","}","\n		save","(","cookie",")",";","\n	"],"docstring_tokens":["Create","a","Cookie","with","key","and","value","and","save","it","in","the","browser","with","the","next","response"],"prompt_tokens":[]}
{"code_tokens":["\n	public","final","void","save","(","final","FormComponent<?>","formComponent",")","\n	","{","\n		save","(","getKey","(","formComponent",")",",","formComponent",".","getValue","(",")",")",";","\n	"],"docstring_tokens":["Save","the","form","components","model","value","in","a","cookie"],"prompt_tokens":[]}
{"code_tokens":["\n	protected","final","boolean","hasAny","(","Roles","roles",")","\n	","{","\n		if","(","roles",".","isEmpty","(",")",")","\n		","{","\n			return","true",";","\n		","}","\n		else\n		","{","\n			return","roleCheckingStrategy",".","hasAnyRole","(","roles",")",";","\n		","}","\n	"],"docstring_tokens":["Gets","whether","any","of","the","given","roles","applies","to","the","authorizer"],"prompt_tokens":[]}
{"code_tokens":["\n	protected","void","setWicketSession","(","final","Request","request,","final","Session","session",")","\n	","{","\n		setAttribute","(","request,","Session",".","SESSION_ATTRIBUTE_NAME,","session",")",";","\n	"],"docstring_tokens":["Stores","the","Wicket","Session","in","an","attribute","in","the","HttpSession"],"prompt_tokens":[]}
{"code_tokens":["\n	@Override\n	public","void","registerBindListener","(","BindListener","listener",")","\n	","{","\n		bindListeners",".","add","(","listener",")",";","\n	"],"docstring_tokens":["Registers","listener","invoked","when","session","is","bound"],"prompt_tokens":[]}
{"code_tokens":["\n	@Override\n	public","void","unregisterBindListener","(","BindListener","listener",")","\n	","{","\n		bindListeners",".","remove","(","listener",")",";","\n	"],"docstring_tokens":["Unregisters","listener","invoked","when","session","is","bound"],"prompt_tokens":[]}
{"code_tokens":["\r\n	public","final","void","setComponentTagOnly","(","boolean","componentTagOnly",")","\r\n	","{","\r\n		this",".","componentTagOnly","=","componentTagOnly",";","\r\n	"],"docstring_tokens":["Ignore","raw","markup","and","iterate","over","component","and","wicket","tags","only"],"prompt_tokens":[]}
{"code_tokens":["\r\n	public","final","void","setWicketTagOnly","(","boolean","wicketTagOnly",")","\r\n	","{","\r\n		this",".","wicketTagOnly","=","wicketTagOnly",";","\r\n	"],"docstring_tokens":["Ignore","raw","markup","and","component","tags,","and","iterate","over","WicketTags","only"],"prompt_tokens":[]}
{"code_tokens":["\n	public","static","IPageRequestHandler","getLastHandler","(","RequestCycle","cycle",")","\n	","{","\n		return","cycle",".","getMetaData","(","LAST_HANDLER_KEY",")",";","\n	"],"docstring_tokens":["retrieves","last","handler","from","request","cycle"],"prompt_tokens":[]}
{"code_tokens":["\n	public","static","IPageRequestHandler","getFirstHandler","(","RequestCycle","cycle",")","\n	","{","\n		return","cycle",".","getMetaData","(","FIRST_HANDLER_KEY",")",";","\n	"],"docstring_tokens":["retrieves","first","handler","from","the","request","cycle"],"prompt_tokens":[]}
{"code_tokens":["\n	public","void","configure","(","Application","application",")","\n	","{","\n		application",".","setMetaData","(","KEY,","this",")",";","\n	"],"docstring_tokens":["Binds","this","configuration","to","the","application","instance"],"prompt_tokens":[]}
{"code_tokens":["\r\n	public","static","IMarkupFragment","findStartTag","(","final","IMarkupFragment","markup,","final","String","tagName",")","\r\n	","{","\r\n		MarkupStream","stream","=","new","MarkupStream","(","markup",")",";","\r\n\r\n		while","(","stream",".","skipUntil","(","WicketTag",".","class",")",")","\r\n		","{","\r\n			ComponentTag","tag","=","stream",".","getTag","(",")",";","\r\n			if","(","tag",".","isOpen","(",")","||","tag",".","isOpenClose","(",")",")","\r\n			","{","\r\n				WicketTag","wtag","=","(","WicketTag",")","tag",";","\r\n				if","(","tagName",".","equalsIgnoreCase","(","wtag",".","getName","(",")",")",")","\r\n				","{","\r\n					return","stream",".","getMarkupFragment","(",")",";","\r\n				","}","\r\n\r\n				stream",".","skipToMatchingCloseTag","(","tag",")",";","\r\n			","}","\r\n\r\n			stream",".","next","(",")",";","\r\n		","}","\r\n\r\n		return","null",";","\r\n	"],"docstring_tokens":["Searches","for","tagName","in","the","given","markup"],"prompt_tokens":[]}
{"code_tokens":["\n	protected","int","inversedComponentOrder","(","RecordedHeaderItem","item1,","RecordedHeaderItem","item2",")","\n	","{","\n		return","item1",".","getMinDepth","(",")","-","item2",".","getMinDepth","(",")",";","\n	"],"docstring_tokens":["Compare","two","recorded","PriorityHeaderItems,","converting","the","child-first","order","into	","parent-first"],"prompt_tokens":[]}
{"code_tokens":["\n	public","RequestCycleSettings",".","RenderStrategy","getRenderStrategy","(",")","\n	","{","\n		return","renderStrategy",";","\n	"],"docstring_tokens":["Gets","in","what","way","the","render","part","of","a","request","is","handled"],"prompt_tokens":[]}
{"code_tokens":["\n	public","Duration","getTimeout","(",")","\n	","{","\n		return","timeout",";","\n	"],"docstring_tokens":["Gets","the","time","that","a","request","will","by","default","be","waiting","for","the","previous","request","to","be	","handled","before","giving","up"],"prompt_tokens":[]}
{"code_tokens":["\n	public","RequestCycleSettings","setTimeout","(","Duration","timeout",")","\n	","{","\n		Args",".","notNull","(","timeout,","\"timeout\"",")",";","\n		this",".","timeout","=","timeout",";","\n		return","this",";","\n	"],"docstring_tokens":["Sets","the","time","that","a","request","will","by","default","be","waiting","for","the","previous","request","to","be	","handled","before","giving","up"],"prompt_tokens":[]}
{"code_tokens":["\n	public","RequestCycleSettings","setExceptionRetryCount","(","int","retries",")","\n	","{","\n		this",".","exceptionRetryCount","=","retries",";","\n		return","this",";","\n	"],"docstring_tokens":["Sets","how","many","attempts","Wicket","will","make","to","render","the","exception","request","handler","before	","giving","up"],"prompt_tokens":[]}
{"code_tokens":["\n	protected","MarkupContainer","createJunctionComponent","(","String","id",")","\n	","{","\n		return","new","AjaxFallbackLink<Void>","(","id",")","\n		","{","\n			private","static","final","long","serialVersionUID","=","1L",";","\n\n			@Override\n			public","void","onClick","(","Optional<AjaxRequestTarget>","targetOptional",")","\n			","{","\n				toggle","(",")",";","\n			","}","\n\n			@Override\n			public","boolean","isEnabled","(",")","\n			","{","\n				return","tree",".","getProvider","(",")",".","hasChildren","(","Node",".","this",".","getModelObject","(",")",")",";","\n			","}","\n		","}",";","\n	"],"docstring_tokens":["The","junction","component","expands","and","collapses","this","node"],"prompt_tokens":[]}
{"code_tokens":["\n	protected","String","getStyleClass","(",")","\n	","{","\n		T","t","=","getModelObject","(",")",";","\n\n		if","(","tree",".","getProvider","(",")",".","hasChildren","(","t",")",")","\n		","{","\n			if","(","tree",".","getState","(","t",")","==","State",".","EXPANDED",")","\n			","{","\n				return","getExpandedStyleClass","(","t",")",";","\n			","}","\n			else\n			","{","\n				return","getCollapsedStyleClass","(",")",";","\n			","}","\n		","}","\n		return","getOtherStyleClass","(",")",";","\n	"],"docstring_tokens":["Get","the","style","class","depending","on","the","current","State","of","this","node"],"prompt_tokens":[]}
{"code_tokens":["\n	private","void","registerRequestedUrl","(","RequestCycle","cycle",")","\n	","{","\n		IRequestLogger","requestLogger","=","Application",".","get","(",")",".","getRequestLogger","(",")",";","\n		if","(","cycle",".","getRequest","(",")",".","getContainerRequest","(",")","instanceof","HttpServletRequest",")","\n		","{","\n			HttpServletRequest","containerRequest","=","(","HttpServletRequest",")","cycle",".","getRequest","(",")","\n				",".","getContainerRequest","(",")",";","\n\n			AppendingStringBuffer","url","=","new","AppendingStringBuffer","(","containerRequest",".","getRequestURL","(",")",")",";","\n			if","(","containerRequest",".","getQueryString","(",")","!=","null",")","\n				url",".","append","(","\"?\"",")",".","append","(","containerRequest",".","getQueryString","(",")",")",";","\n\n			requestLogger",".","logRequestedUrl","(","url",".","toString","(",")",")",";","\n		","}","\n	"],"docstring_tokens":["Registers","the","requested","URL","with","the","request","logger,","if","one","can","be","determined"],"prompt_tokens":[]}
{"code_tokens":["\n	private","void","registerHandler","(","IRequestHandler","handler",")","\n	","{","\n		IRequestLogger","requestLogger","=","Application",".","get","(",")",".","getRequestLogger","(",")",";","\n\n		if","(","first",".","get","(",")","==","null",")","\n		","{","\n			first",".","set","(","handler",")",";","\n			requestLogger",".","logEventTarget","(","handler",")",";","\n		","}","\n		requestLogger",".","logResponseTarget","(","handler",")",";","\n	"],"docstring_tokens":["Registers","the","handler","with","the","request","logger"],"prompt_tokens":[]}
{"code_tokens":["\n	public","static","void","addLocation","(","URL","url",")","\n	","{","\n		urls",".","add","(","url",")",";","\n	"],"docstring_tokens":["Add","the","location","of","a","directory","containing","class","files"],"prompt_tokens":[]}
{"code_tokens":["\n	public","static","Set<URL>","getLocations","(",")","\n	","{","\n		return","urls",";","\n	"],"docstring_tokens":["Returns","the","list","of","all","configured","locations","of","directories","containing","class","files"],"prompt_tokens":[]}
{"code_tokens":["\n	private","static","void","addClassLoaderUrls","(","ClassLoader","loader",")","\n	","{","\n		if","(","loader","!=","null",")","\n		","{","\n			final","Enumeration<URL>","resources",";","\n			try\n			","{","\n				resources","=","loader",".","getResources","(","\"\"",")",";","\n			","}","\n			catch","(","IOException","e",")","\n			","{","\n				throw","new","RuntimeException","(","e",")",";","\n			","}","\n			while","(","resources",".","hasMoreElements","(",")",")","\n			","{","\n				URL","location","=","resources",".","nextElement","(",")",";","\n				ReloadingClassLoader",".","addLocation","(","location",")",";","\n			","}","\n		","}","\n	"],"docstring_tokens":["Add","all","the","url","locations","we","can","find","for","the","provided","class","loader"],"prompt_tokens":[]}
{"code_tokens":["\n	public","void","setListener","(","IChangeListener<Class<?>>","listener",")","\n	","{","\n		this",".","listener","=","listener",";","\n	"],"docstring_tokens":["Sets","the","listener","that","will","be","notified","when","a","class","changes"],"prompt_tokens":[]}
{"code_tokens":["\n	public","void","destroy","(",")","\n	","{","\n		watcher",".","destroy","(",")",";","\n	"],"docstring_tokens":["Remove","the","ModificationWatcher","from","the","current","reloading","class","loader"],"prompt_tokens":[]}
{"code_tokens":["\n	@Override\n	public","final","void","dirty","(","boolean","isInitialization",")","\n	","{","\n		Request","request","=","getRequest","(",")",";","\n		if","(","isInitialization","==","false","&&","request","instanceof","WebRequest","&&\n			","(","(","WebRequest",")","request",")",".","isAjax","(",")",")","\n		","{","\n			return",";","\n		","}","\n		super",".","dirty","(","isInitialization",")",";","\n	"],"docstring_tokens":["Prevents","page","from","get","dirty","inside","an","AJAX","request"],"prompt_tokens":[]}
{"code_tokens":["\n	public","void","putBean","(","final","String","name,","final","Object","bean",")","\n	","{","\n		if","(","beans",".","containsKey","(","name",")",")","\n		","{","\n			throw","new","IllegalArgumentException","(","\"a","bean","with","name","[\"","+","name","+\n				\"]","has","already","been","added","to","the","context\"",")",";","\n		","}","\n		beans",".","put","(","name,","bean",")",";","\n	"],"docstring_tokens":["puts","bean","with","the","given","name","into","the","context"],"prompt_tokens":[]}
{"code_tokens":["\n	public","void","putBean","(","final","Object","bean",")","\n	","{","\n		putBean","(","bean",".","getClass","(",")",".","getName","(",")",",","bean",")",";","\n	"],"docstring_tokens":["puts","bean","with","into","the","context"],"prompt_tokens":[]}
{"code_tokens":["\n	protected","List<T>","getData","(",")","\n	","{","\n		return","list",";","\n	"],"docstring_tokens":["Subclass","to","lazy","load","the","list"],"prompt_tokens":[]}
{"code_tokens":["\n	@Override\n	public","long","sizeOf","(","Serializable","obj",")","\n	","{","\n		if","(","obj","==","null",")","\n		","{","\n			return","0",";","\n		","}","\n		try\n		","{","\n			SizeRecodingOutputStream","recorder","=","new","SizeRecodingOutputStream","(",")",";","\n			recorder",".","writeObject","(","obj",")",";","\n			return","recorder",".","getTotalSize","(",")",";","\n		","}","\n		catch","(","IOException","e",")","\n		","{","\n			LOG",".","error","(","\"An","error","occurred","while","calculating","the","size","of","object:","\"","+","obj,","e",")",";","\n			return","-1",";","\n		","}","\n\n	"],"docstring_tokens":["Calculates","full","size","of","object","iterating","over","its","hierarchy","graph"],"prompt_tokens":[]}
{"code_tokens":["\n	protected","void","prependLicenseHeader","(","final","File","file",")","\n	","{","\n		try\n		","{","\n			String","content","=","new","org",".","apache",".","wicket",".","util",".","file",".","File","(","file",")",".","readString","(",")",";","\n			content","=","getLicenseHeader","(",")","+","LINE_ENDING","+","content",";","\n			new","org",".","apache",".","wicket",".","util",".","file",".","File","(","file",")",".","write","(","content",")",";","\n		","}","\n		catch","(","Exception","e",")","\n		","{","\n			throw","new","AssertionError","(","e",".","getMessage","(",")",")",";","\n		","}","\n	"],"docstring_tokens":["Add","the","license","header","to","the","start","of","the","file","without","caring","about","existing","license	","headers"],"prompt_tokens":[]}
{"code_tokens":["\n	protected","T","getObject","(","Component","component",")","\n	","{","\n		return","null",";","\n	"],"docstring_tokens":["Returns","the","object","from","the","model","with","the","use","of","the","component","where","it","is","attached","to"],"prompt_tokens":[]}
{"code_tokens":["\n	protected","LoopItem","newItem","(","int","iteration",")","\n	","{","\n		return","new","LoopItem","(","iteration",")",";","\n	"],"docstring_tokens":["Create","a","new","LoopItem","for","loop","at","iteration"],"prompt_tokens":[]}
{"code_tokens":["\n	protected","void","renderItem","(","final","LoopItem","item",")","\n	","{","\n		item",".","render","(",")",";","\n	"],"docstring_tokens":["Renders","this","loop","iteration"],"prompt_tokens":[]}
{"code_tokens":["\n	protected","final","Component","getComponent","(",")","\n	","{","\n		return","component",";","\n	"],"docstring_tokens":["Gets","the","component","that","this","handler","is","bound","to"],"prompt_tokens":[]}
{"code_tokens":["\n	@Override\n	public","final","boolean","doesProvideNewPage","(",")","\n	","{","\n		return","getProvision","(",")",".","doesProvideNewPage","(",")",";","\n	"],"docstring_tokens":["Returns","whether","or","not","the","page","instance","held","by","this","provider","has","been","instantiated","by","the	","provider"],"prompt_tokens":[]}
{"code_tokens":["\r\n	public","void","generate","(","final","Collection<Contact>","collection,","final","int","count",")","\r\n	","{","\r\n		for","(","int","i","=","0",";","i","<","count",";","i++",")","\r\n		","{","\r\n			collection",".","add","(","generate","(",")",")",";","\r\n		","}","\r\n	"],"docstring_tokens":["generats","count","number","contacts","and","puts","them","into","collection","	","collection"],"prompt_tokens":[]}
{"code_tokens":["\n	@Override\n	public","void","respond","(","IRequestCycle","requestCycle",")","\n	","{","\n		Attributes","attributes","=","new","Attributes","(","requestCycle",".","getRequest","(",")",",\n			requestCycle",".","getResponse","(",")",")",";","\n\n		ResourceStreamResource","resource","=","new","ResourceStreamResource","(","resourceStream",")",";","\n\n		configure","(","resource",")",";","\n\n		resource",".","respond","(","attributes",")",";","\n	"],"docstring_tokens":["Responds","by","sending","the","contents","of","the","resource","stream"],"prompt_tokens":[]}
{"code_tokens":["\n	protected","void","configure","(","ResourceStreamResource","resource",")","\n	","{","\n		resource",".","setFileName","(","fileName",")",";","\n		if","(","contentDisposition","!=","null",")","\n		","{","\n			resource",".","setContentDisposition","(","contentDisposition",")",";","\n		","}","\n		else\n		","{","\n			resource",".","setContentDisposition","(","Strings",".","isEmpty","(","fileName",")","?","ContentDisposition",".","INLINE\n					:","ContentDisposition",".","ATTACHMENT",")",";","\n		","}","\n\n		final","Duration","cacheDuration","=","getCacheDuration","(",")",";","\n		if","(","cacheDuration","!=","null",")","\n		","{","\n			resource",".","setCacheDuration","(","cacheDuration",")",";","\n		","}","\n	"],"docstring_tokens":["Configures","the","ResourceStreamResource","used","by","this","request","handler"],"prompt_tokens":[]}
{"code_tokens":["\n	public","static","boolean","exists","(",")","\n	","{","\n		return","get","(","false",")","!=","null",";","\n	"],"docstring_tokens":["Checks","if","ThreadContext","exists","for","the","current","thread"],"prompt_tokens":[]}
{"code_tokens":["\n	public","static","void","setApplication","(","Application","application",")","\n	","{","\n		ThreadContext","context","=","get","(","true",")",";","\n		context",".","application","=","application",";","\n	"],"docstring_tokens":["Binds","the","specified","application","to","current","thread"],"prompt_tokens":[]}
{"code_tokens":["\n	public","static","void","setRequestCycle","(","RequestCycle","requestCycle",")","\n	","{","\n		ThreadContext","context","=","get","(","true",")",";","\n		context",".","requestCycle","=","requestCycle",";","\n	"],"docstring_tokens":["Binds","the","RequestCycle","to","current","thread"],"prompt_tokens":[]}
{"code_tokens":["\n	public","static","void","setSession","(","Session","session",")","\n	","{","\n		ThreadContext","context","=","get","(","true",")",";","\n		context",".","session","=","session",";","\n	"],"docstring_tokens":["Binds","the","session","to","current","thread"],"prompt_tokens":[]}
{"code_tokens":["\n	public","static","ThreadContext","detach","(",")","\n	","{","\n		ThreadContext","value","=","threadLocal",".","get","(",")",";","\n		threadLocal",".","remove","(",")",";","\n		return","value",";","\n	"],"docstring_tokens":["Cleans","the","ThreadContext","and","returns","previous","context"],"prompt_tokens":[]}
{"code_tokens":["\n	@Override\n	public","List<HeaderItem>","getDependencies","(",")","\n	","{","\n		return","getBundleReference","(",")",".","getDependencies","(",")",";","\n	"],"docstring_tokens":["Returns","the","dependencies","of","the","replacing","resource","reference"],"prompt_tokens":[]}
{"code_tokens":["\r\n	public","final","FilterFactoryManager","add","(","final","AbstractRequestWrapperFactory","wrapperFactory",")","\r\n	","{","\r\n		if","(","wrapperFactory","!=","null",")","\r\n		","{","\r\n			if","(","filters","==","null",")","\r\n			","{","\r\n				filters","=","Generics",".","newArrayList","(","2",")",";","\r\n			","}","\r\n\r\n			filters",".","add","(","wrapperFactory",")",";","\r\n		","}","\r\n\r\n		return","this",";","\r\n	"],"docstring_tokens":["Add","a","filter","factory"],"prompt_tokens":[]}
{"code_tokens":["\r\n	public","final","FilterFactoryManager","addXForwardedRequestWrapperFactory","(","FilterConfig","config",")","\r\n	","{","\r\n		if","(","config","==","null",")","\r\n		","{","\r\n			config","=","WebApplication",".","get","(",")",".","getWicketFilter","(",")",".","getFilterConfig","(",")",";","\r\n		","}","\r\n\r\n		XForwardedRequestWrapperFactory","factory","=","new","XForwardedRequestWrapperFactory","(",")",";","\r\n		factory",".","init","(","config",")",";","\r\n\r\n		return","add","(","factory",")",";","\r\n	"],"docstring_tokens":["Add","a","X-Forwarded","web","filter","factory"],"prompt_tokens":[]}
{"code_tokens":["\r\n	public","final","FilterFactoryManager","addSecuredRemoteAddressRequestWrapperFactory","(","\r\n		FilterConfig","config",")","\r\n	","{","\r\n		if","(","config","==","null",")","\r\n		","{","\r\n			config","=","WebApplication",".","get","(",")",".","getWicketFilter","(",")",".","getFilterConfig","(",")",";","\r\n		","}","\r\n\r\n		SecuredRemoteAddressRequestWrapperFactory","factory","=","new","SecuredRemoteAddressRequestWrapperFactory","(",")",";","\r\n		factory",".","init","(","config",")",";","\r\n\r\n		return","add","(","factory",")",";","\r\n	"],"docstring_tokens":["Add","a","Secure","remote","address","web","filter","factory"],"prompt_tokens":[]}
{"code_tokens":["\r\n	public","final","long","getMilliseconds","(",")","\r\n	","{","\r\n		return","value",";","\r\n	"],"docstring_tokens":["Retrieves","the","number","of","milliseconds","in","this","Time","value"],"prompt_tokens":[]}
{"code_tokens":["\n	@Around","(","\"execution","(","*","org",".","apache",".","wicket",".","request",".","IRequestHandler",".","respond","(",".",".",")",")","\"",")","\n	public","Object","aroundOnRender","(","ProceedingJoinPoint","joinPoint",")","throws","Throwable\n	","{","\n		return","measureTime","(","\"core/requesthandler/respond\",","joinPoint",")",";","\n	"],"docstring_tokens":["Collects","data","how","often","a","request","handler","processes","its","response"],"prompt_tokens":[]}
{"code_tokens":["\n	public","static","String","extension","(","final","String","path",")","\n	","{","\n		if","(","path",".","indexOf","(","'",".","'",")","!=","-1",")","\n		","{","\n			return","Strings",".","lastPathComponent","(","path,","'",".","'",")",";","\n		","}","\n		return","null",";","\n	"],"docstring_tokens":["Gets","extension","from","path"],"prompt_tokens":[]}
{"code_tokens":["\n	public","static","String","filename","(","final","String","path",")","\n	","{","\n		return","Strings",".","lastPathComponent","(","path",".","replace","(","'/',","java",".","io",".","File",".","separatorChar",")",",\n			java",".","io",".","File",".","separatorChar",")",";","\n	"],"docstring_tokens":["Gets","filename","from","path"],"prompt_tokens":[]}
{"code_tokens":["\n	public","static","Instant","getLastModified","(","File","file",")","\n	","{","\n		//","get","file","modification","timestamp\n		long","millis","=","file",".","lastModified","(",")",";","\n\n		//","zero","indicates","the","timestamp","could","not","be","retrieved","or","the","file","does","not","exist\n		if","(","millis","==","0",")","\n		","{","\n			return","null",";","\n		","}","\n\n		//","last","file","modification","timestamp\n		return","Instant",".","ofEpochMilli","(","millis",")",";","\n	"],"docstring_tokens":["get","last","modification","timestamp","for","file"],"prompt_tokens":[]}
{"code_tokens":["\n	@Override\n	public","void","addCookie","(","final","Cookie","cookie",")","\n	","{","\n		//","remove","any","potential","duplicates\n		//","see","http://www",".","ietf",".","org/rfc/rfc2109",".","txt,","p",".","4",".","3",".","3\n		Iterator<Cookie>","iterator","=","cookies",".","iterator","(",")",";","\n		while","(","iterator",".","hasNext","(",")",")","\n		","{","\n			Cookie","old","=","iterator",".","next","(",")",";","\n			if","(","Cookies",".","isEqual","(","cookie,","old",")",")","\n			","{","\n				iterator",".","remove","(",")",";","\n			","}","\n		","}","\n		cookies",".","add","(","cookie",")",";","\n	"],"docstring_tokens":["Add","a","cookie","to","the","response"],"prompt_tokens":[]}
{"code_tokens":["\n	@Override\n	public","boolean","containsHeader","(","final","String","name",")","\n	","{","\n		return","headers",".","containsKey","(","name",")",";","\n	"],"docstring_tokens":["Check","if","the","response","contains","the","given","header","name"],"prompt_tokens":[]}
{"code_tokens":["\n	public","byte[]","getBinaryContent","(",")","\n	","{","\n		return","byteStream",".","toByteArray","(",")",";","\n	"],"docstring_tokens":["Get","the","binary","content","that","was","written","to","the","servlet","stream"],"prompt_tokens":[]}
{"code_tokens":["\n	@Override\n	public","String","getCharacterEncoding","(",")","\n	","{","\n		return","characterEncoding",";","\n	"],"docstring_tokens":["Get","the","character","encoding","of","the","response"],"prompt_tokens":[]}
{"code_tokens":["\n	public","List<Cookie>","getCookies","(",")","\n	","{","\n		List<Cookie>","copies","=","new","ArrayList<Cookie>","(",")",";","\n		for","(","Cookie","cookie",":","cookies",")","\n		","{","\n			copies",".","add","(","Cookies",".","copyOf","(","cookie",")",")",";","\n		","}","\n		return","copies",";","\n	"],"docstring_tokens":["Get","all","of","the","cookies","that","have","been","added","to","the","response"],"prompt_tokens":[]}
{"code_tokens":["\n	public","String","getDocument","(",")","\n	","{","\n		if","(","mode","==","MODE_BINARY",")","\n		","{","\n			return","new","String","(","byteStream",".","toByteArray","(",")",")",";","\n		","}","\n		else\n		","{","\n			return","stringWriter",".","getBuffer","(",")",".","toString","(",")",";","\n		","}","\n	"],"docstring_tokens":["Get","the","text","document","that","was","written","as","part","of","this","response"],"prompt_tokens":[]}
{"code_tokens":["\n	@Override\n	public","ServletOutputStream","getOutputStream","(",")","\n	","{","\n		if","(","mode","==","MODE_TEXT",")","\n		","{","\n			throw","new","IllegalArgumentException","(","\"Can't","write","binary","after","already","selecting","text\"",")",";","\n		","}","\n		mode","=","MODE_BINARY",";","\n		return","servletStream",";","\n	"],"docstring_tokens":["Get","the","output","stream","for","writing","binary","data","from","the","servlet"],"prompt_tokens":[]}
{"code_tokens":["\n	@Override\n	public","PrintWriter","getWriter","(",")","throws","IOException\n	","{","\n		if","(","mode","==","MODE_BINARY",")","\n		","{","\n			throw","new","IllegalArgumentException","(","\"Can't","write","text","after","already","selecting","binary\"",")",";","\n		","}","\n		mode","=","MODE_TEXT",";","\n		return","printWriter",";","\n	"],"docstring_tokens":["Get","the","print","writer","for","writing","text","output","for","this","response"],"prompt_tokens":[]}
{"code_tokens":["\n	public","void","initialize","(",")","\n	","{","\n		cookies",".","clear","(",")",";","\n		headers",".","clear","(",")",";","\n		errorMessage","=","null",";","\n		redirectLocation","=","null",";","\n		status","=","HttpServletResponse",".","SC_OK",";","\n		characterEncoding","=","\"UTF-8\"",";","\n		locale","=","null",";","\n\n		byteStream","=","new","ByteArrayOutputStream","(",")",";","\n		servletStream","=","new","ServletOutputStream","(",")","\n		","{","\n			@Override\n			public","boolean","isReady","(",")","\n			","{","\n				return","true",";","\n			","}","\n\n			@Override\n			public","void","setWriteListener","(","WriteListener","writeListener",")","\n			","{","\n			","}","\n\n			@Override\n			public","void","write","(","int","b",")","\n			","{","\n				byteStream",".","write","(","b",")",";","\n			","}","\n		","}",";","\n		stringWriter","=","new","StringWriter","(",")",";","\n		printWriter","=","new","PrintWriter","(","stringWriter",")","\n		","{","\n			@Override\n			public","void","close","(",")","\n			","{","\n				//","Do","nothing\n			","}","\n\n			@Override\n			public","void","flush","(",")","\n			","{","\n				//","Do","nothing\n			","}","\n		","}",";","\n		mode","=","MODE_NONE",";","\n	"],"docstring_tokens":["Reset","the","response","ready","for","reuse"],"prompt_tokens":[]}
{"code_tokens":["\n	public","boolean","isError","(",")","\n	","{","\n		return","(","status","!=","HttpServletResponse",".","SC_OK",")",";","\n	"],"docstring_tokens":["Return","whether","the","servlet","returned","an","error","code","or","not"],"prompt_tokens":[]}
{"code_tokens":["\n	public","boolean","isRedirect","(",")","\n	","{","\n		return","(","redirectLocation","!=","null",")",";","\n	"],"docstring_tokens":["Check","whether","the","response","was","redirected","or","not"],"prompt_tokens":[]}
{"code_tokens":["\n	@Override\n	public","void","reset","(",")","\n	","{","\n		initialize","(",")",";","\n	"],"docstring_tokens":["Delegate","to","initialize","method"],"prompt_tokens":[]}
{"code_tokens":["\n	@Override\n	public","void","setLocale","(","final","Locale","locale",")","\n	","{","\n		this",".","locale","=","locale",";","\n	"],"docstring_tokens":["Set","the","locale","in","the","response","header"],"prompt_tokens":[]}
{"code_tokens":["\n	@Override\n	public","void","setStatus","(","final","int","status",")","\n	","{","\n		this",".","status","=","status",";","\n	"],"docstring_tokens":["Set","the","status","for","this","response"],"prompt_tokens":[]}
{"code_tokens":["\n	public","final","CompoundValidator<T>","add","(","IValidator<T>","validator",")","\n	","{","\n		Args",".","notNull","(","validator,","\"validator\"",")",";","\n\n		validators",".","add","(","validator",")",";","\n		return","this",";","\n	"],"docstring_tokens":["Adds","an","IValidator","to","the","chain","of","validators"],"prompt_tokens":[]}
{"code_tokens":["\n	public","final","void","setVariables","(","final","Map<?,","?>","variables",")","\n	","{","\n		this",".","variables","=","variables",";","\n	"],"docstring_tokens":["Sets","the","Map","of","variables"],"prompt_tokens":[]}
{"code_tokens":["\n	@Override\n	protected","String","getValue","(","final","String","variableName",")","\n	","{","\n		return","Strings",".","toString","(","variables",".","get","(","variableName",")",")",";","\n	"],"docstring_tokens":["Retrieves","a","value","for","a","variable","name","during","interpolation"],"prompt_tokens":[]}
{"code_tokens":["\n	public","static","String","interpolate","(","final","String","string,","final","Map<?,","?>","variables",")","\n	","{","\n		return","new","MapVariableInterpolator","(","string,","variables",")",".","toString","(",")",";","\n	"],"docstring_tokens":["Interpolates","a","String","with","the","arguments","defined","in","the","given","Map"],"prompt_tokens":[]}
{"code_tokens":["\n	public","void","reset","(",")","\n	","{","\n		pos","=","0",";","\n	"],"docstring_tokens":["Resets","the","iterator","position","back","to","the","beginning","of","the","array"],"prompt_tokens":[]}
{"code_tokens":["\n	@Override\n	public","Contact","get","(","long","id",")","\n	","{","\n		Contact","c","=","map",".","get","(","id",")",";","\n		if","(","c","==","null",")","\n			throw","new","RuntimeException","(","\"contact","with","id","[\"","+","id","+","\"]","not","found","in","the","database\"",")",";","\n		return","c",";","\n	"],"docstring_tokens":["find","contact","by","id"],"prompt_tokens":[]}
{"code_tokens":["\n	@Override\n	public","Iterator<Contact>","find","(","QueryParam","qp",")","\n	","{","\n		List<Contact>","sublist","=","getIndex","(","qp",".","getSort","(",")",")",".","subList","(","(","int",")","qp",".","getFirst","(",")",",\n			","(","int",")","(","qp",".","getFirst","(",")","+","qp",".","getCount","(",")",")",")",";","\n		return","sublist",".","iterator","(",")",";","\n	"],"docstring_tokens":["select","contacts","and","apply","sort"],"prompt_tokens":[]}
{"code_tokens":["\n	public","static","void","writeScript","(","final","Response","response,","AttributeMap","attributes",")","\n	","{","\n		response",".","write","(","\"<script\"",")",";","\n		response",".","write","(","attributes",".","toCharSequence","(",")",")",";","\n		response",".","write","(","\"></script>\"",")",";","\n		response",".","write","(","\"\\n\"",")",";","\n	"],"docstring_tokens":["Write","a","reference","to","a","javascript","file","to","the","response","object"],"prompt_tokens":[]}
{"code_tokens":["\n	public","static","void","writeJavaScript","(","final","Response","response,","final","CharSequence","text,","String","id",")","\n	","{","\n		writeOpenTag","(","response,","id",")",";","\n		response",".","write","(","Strings",".","replaceAll","(","text,","\"</\",","\"<\\\\/\"",")",")",";","\n		writeCloseTag","(","response",")",";","\n	"],"docstring_tokens":["Write","the","simple","text","to","the","response","object","surrounded","by","a","script","tag"],"prompt_tokens":[]}
{"code_tokens":["\n	public","static","void","writeCloseTag","(","final","Response","response",")","\n	","{","\n		response",".","write","(","SCRIPT_CONTENT_SUFFIX",")",";","\n		response",".","write","(","\"</script>\\n\"",")",";","\n	"],"docstring_tokens":["Write","close","script","tag","for","inline","script"],"prompt_tokens":[]}
{"code_tokens":["\n	protected","WicketTester","create","(",")","\n	","{","\n		return","new","WicketTester","(",")",";","\n	"],"docstring_tokens":["Allows","setup","of","the","tester","instance"],"prompt_tokens":[]}
{"code_tokens":["\n	private","Object","lookupSpringBean","(","ApplicationContext","ctx,","String","name,","Class<?>","clazz",")","\n	","{","\n		try\n		","{","\n			//","If","the","name","is","set","the","lookup","is","clear\n			if","(","name","!=","null",")","\n			","{","\n				return","ctx",".","getBean","(","name,","clazz",")",";","\n			","}","\n\n			//","If","the","beanField","information","is","null","the","clazz","is","going","to","be","used\n			if","(","fieldResolvableType","==","null",")","\n			","{","\n				return","ctx",".","getBean","(","clazz",")",";","\n			","}","\n\n			//","If","the","given","class","is","a","list","try","to","get","the","generic","of","the","list\n			Class<?>","lookupClass","=","fieldElementsResolvableType","!=","null","?","\n				fieldElementsResolvableType",".","resolve","(",")",":","clazz",";","\n\n			//","Else","the","lookup","is","done","via","Generic\n			List<String>","names","=","loadBeanNames","(","ctx,","lookupClass",")",";","\n\n			Object","foundBeans","=","getBeansByName","(","ctx,","names",")",";","\n\n			if","(","foundBeans","!=","null",")","\n			","{","\n				return","foundBeans",";","\n			","}","\n\n			throw","new","IllegalStateException","(","\n				\"Concrete","bean","could","not","be","received","from","the","application","context","for","class:","\"","+\n					clazz",".","getName","(",")","+","\"",".","\"",")",";","\n		","}","\n		catch","(","NoSuchBeanDefinitionException","e",")","\n		","{","\n			throw","new","IllegalStateException","(","\"bean","with","name","[\"","+","name","+","\"]","and","class","[\"","+\n				clazz",".","getName","(",")","+","\"]","not","found\",","e",")",";","\n		","}","\n	"],"docstring_tokens":["Looks","up","a","bean","by","its","name","and","class"],"prompt_tokens":[]}
{"code_tokens":["\n	private","Object","getBeansByName","(","ApplicationContext","ctx,","List<String>","names",")","\n	","{","\n		FieldBeansCollector","beansCollector","=","new","FieldBeansCollector","(","fieldResolvableType",")",";","\n		\n		for","(","String","beanName",":","names",")","\n		","{","\n			RootBeanDefinition","beanDef","=","getBeanDefinition","(","ctx,","beanName",")",";","\n\n			if","(","beanDef","==","null",")","\n			","{","\n				continue",";","\n			","}","\n\n			ResolvableType","candidateResolvableType","=","null",";","\n\n			//check","if","we","have","the","class","of","the","bean","or","the","factory","method",".","\n			//Usually","if","use","XML","as","config","file","we","have","the","class","while","we","\n			//have","the","factory","method","if","we","use","Java-based","configuration",".","\n			if","(","beanDef",".","hasBeanClass","(",")",")","\n			","{","\n				candidateResolvableType","=","ResolvableType",".","forClass","(","beanDef",".","getBeanClass","(",")",")",";","\n			","}","\n			else","if","(","beanDef",".","getResolvedFactoryMethod","(",")","!=","null",")","\n			","{","\n				candidateResolvableType","=","ResolvableType",".","forMethodReturnType","(","\n					beanDef",".","getResolvedFactoryMethod","(",")",")",";","\n			","}","\n\n			if","(","candidateResolvableType","==","null",")","\n			","{","\n				continue",";","\n			","}","\n\n			boolean","exactMatch","=","fieldResolvableType",".","isAssignableFrom","(","candidateResolvableType",")",";","\n			boolean","elementMatch","=","fieldElementsResolvableType","!=","null","&&","fieldElementsResolvableType",".","isAssignableFrom","(","candidateResolvableType",")",";","\n\n			if","(","exactMatch",")","\n			","{","\n				this",".","beanName","=","beanName",";","\n				return","ctx",".","getBean","(","beanName",")",";","\n			","}","\n			\n			if","(","elementMatch",")","\n			","{","\n				beansCollector",".","addBean","(","beanName,","ctx",".","getBean","(","beanName",")",")",";","\n			","}","\n\n		","}","\n		\n		return","beansCollector",".","getBeansToInject","(",")",";","\n	"],"docstring_tokens":["Retrieves","a","list","of","beans","or","a","single","bean","for","the","given","list","of","names","and","assignable","to","the	","current","field","to","inject"],"prompt_tokens":[]}
{"code_tokens":["\n	public","RootBeanDefinition","getBeanDefinition","(","final","ApplicationContext","ctx,","final","String","name",")","\n	","{","\n		ConfigurableListableBeanFactory","beanFactory","=","(","(","AbstractApplicationContext",")","ctx",")",".","getBeanFactory","(",")",";","\n\n		BeanDefinition","beanDef","=","beanFactory",".","containsBean","(","name",")","?\n			beanFactory",".","getMergedBeanDefinition","(","name",")",":","null",";","\n\n		if","(","beanDef","instanceof","RootBeanDefinition",")","\n		","{","\n			return","(","RootBeanDefinition",")","beanDef",";","\n		","}","\n\n		return","null",";","\n	"],"docstring_tokens":["Gets","the","root","bean","definition","for","the","given","name"],"prompt_tokens":[]}
{"code_tokens":["\n	@Override\n	protected","boolean","getStatelessHint","(",")","\n	","{","\n		return","resourceReference","!=","null",";","\n	"],"docstring_tokens":["For","ResourceReferences","this","link","is","stateless"],"prompt_tokens":[]}
{"code_tokens":["\n	public","boolean","matches","(",")","\n	","{","\n		return","matcher",".","matches","(",")",";","\n	"],"docstring_tokens":["Whether","the","matcher","matches","the","pattern"],"prompt_tokens":[]}
{"code_tokens":["\r\n	public","void","configure","(","Application","application",")","\r\n	","{","\r\n		if","(","application",".","getMetaData","(","CDI_CONFIGURATION_KEY",")","!=","null",")","\r\n		","{","\r\n			throw","new","IllegalStateException","(","\"Cdi","already","configured","for","this","application\"",")",";","\r\n		","}","\r\n		application",".","setMetaData","(","CDI_CONFIGURATION_KEY,","this",")",";","\r\n\r\n		RequestCycleListenerCollection","listeners","=","new","RequestCycleListenerCollection","(",")",";","\r\n		application",".","getRequestCycleListeners","(",")",".","add","(","listeners",")",";","\r\n\r\n		//","enable","conversation","propagation\r\n		if","(","getPropagation","(",")","!=","ConversationPropagation",".","NONE",")","\r\n		","{","\r\n			listeners",".","add","(","new","ConversationPropagator","(","application,","getPropagation","(",")",")",")",";","\r\n			application",".","getComponentPreOnBeforeRenderListeners","(",")",".","add","(","\r\n					new","AutoConversationManager","(","getPropagation","(",")",")",")",";","\r\n			application",".","getComponentPreOnBeforeRenderListeners","(",")",".","add","(","\r\n					new","ConversationExpiryChecker","(",")",")",";","\r\n		","}","\r\n\r\n		//","enable","detach","event\r\n		listeners",".","add","(","new","DetachEventEmitter","(",")",")",";","\r\n\r\n		NonContextual",".","of","(","application",")",".","postConstruct","(","application",")",";","\r\n\r\n		//","enable","injection","of","various","framework","components\r\n		application",".","getSessionListeners","(",")",".","add","(","new","SessionInjector","(",")",")",";","\r\n		application",".","getComponentInstantiationListeners","(",")",".","add","(","new","ComponentInjector","(",")",")",";","\r\n		application",".","getBehaviorInstantiationListeners","(",")",".","add","(","new","BehaviorInjector","(",")",")",";","\r\n\r\n		//","enable","cleanup\r\n		application",".","getApplicationListeners","(",")",".","add","(","new","CdiShutdownCleaner","(",")",")",";","\r\n	"],"docstring_tokens":["Configures","the","specified","application"],"prompt_tokens":[]}
{"code_tokens":["\n	protected","boolean","isLast","(",")","\n	","{","\n		return","getIndex","(",")","==","getParent","(",")",".","size","(",")","-","1",";","\n	"],"docstring_tokens":["Is","this","the","last","branch","in","the","containing","subtree"],"prompt_tokens":[]}
{"code_tokens":["\n	protected","static","Map<String,","String>","loadPath","(","final","String","path",")","throws","IOException\n	","{","\n		return","loadFile","(","new","File","(","path",")",")",";","\n	"],"docstring_tokens":["Loads","mappings","from","a","file","path"],"prompt_tokens":[]}
{"code_tokens":["\n	public","final","IBreadCrumbModel","getBreadCrumbModel","(",")","\n	","{","\n		return","breadCrumbModel",";","\n	"],"docstring_tokens":["Gets","the","bread","crumb","panel"],"prompt_tokens":[]}
{"code_tokens":["\n	public","final","void","setBreadCrumbModel","(","final","IBreadCrumbModel","breadCrumbModel",")","\n	","{","\n		this",".","breadCrumbModel","=","breadCrumbModel",";","\n	"],"docstring_tokens":["Sets","the","bread","crumb","panel"],"prompt_tokens":[]}
{"code_tokens":["\n	public","final","Pattern","pattern","(",")","\n	","{","\n		return","pattern","(","0",")",";","\n	"],"docstring_tokens":["Gets","the","regular","expression","Pattern","for","this","MetaPattern","by","compiling","it"],"prompt_tokens":[]}
{"code_tokens":["\n	public","final","Pattern","pattern","(","final","int","flags",")","\n	","{","\n		compile","(","flags",")",";","\n		return","compiledPattern",";","\n	"],"docstring_tokens":["Gets","the","regular","expression","Pattern","for","this","MetaPattern","by","compiling","it","using","the","given	","flags"],"prompt_tokens":[]}
{"code_tokens":["\n	@Override\n	public","String","toString","(",")","\n	","{","\n		if","(","pattern","!=","null",")","\n		","{","\n			return","pattern",".","pattern","(",")",";","\n		","}","\n		else\n		","{","\n			final","StringBuilder","buffer","=","new","StringBuilder","(",")",";","\n			for","(","MetaPattern","metaPattern",":","patterns",")","\n			","{","\n				buffer",".","append","(","metaPattern",")",";","\n			","}","\n			return","buffer",".","toString","(",")",";","\n		","}","\n	"],"docstring_tokens":["Converts","this","MetaPattern","to","a","String"],"prompt_tokens":[]}
{"code_tokens":["\n	private","synchronized","void","compile","(","final","int","flags",")","\n	","{","\n		if","(","compiledPattern","==","null",")","\n		","{","\n			bind","(","1",")",";","\n			compiledPattern","=","Pattern",".","compile","(","toString","(",")",",","flags",")",";","\n		","}","\n	"],"docstring_tokens":["Compiles","this","MetaPattern","with","the","given","Java","regular","expression","flags"],"prompt_tokens":[]}
{"code_tokens":["\r\n	protected","boolean","contains","(","final","String","name",")","\r\n	","{","\r\n		return","REPLACE_FOR_TAGS",".","contains","(","name",".","toLowerCase","(","Locale",".","ROOT",")",")",";","\r\n	"],"docstring_tokens":["Allows","subclasses","to","easily","expand","the","list","of","tag","which","needs","to","be","expanded"],"prompt_tokens":[]}
{"code_tokens":["\n	public","static","AjaxFormChoiceComponentUpdatingBehavior","onUpdateChoice","(","\n		SerializableConsumer<AjaxRequestTarget>","onUpdateChoice",")","\n	","{","\n		Args",".","notNull","(","onUpdateChoice,","\"onUpdateChoice\"",")",";","\n		return","new","AjaxFormChoiceComponentUpdatingBehavior","(",")","\n		","{","\n			private","static","final","long","serialVersionUID","=","1L",";","\n\n			@Override\n			protected","void","onUpdate","(","AjaxRequestTarget","target",")","\n			","{","\n				onUpdateChoice",".","accept","(","target",")",";","\n			","}","\n		","}",";","\n	"],"docstring_tokens":["Creates","an","AjaxFormChoiceComponentUpdatingBehavior","based","on","lambda","expressions"],"prompt_tokens":[]}
{"code_tokens":["\n	public","MarkupSettings","setStripComments","(","boolean","stripComments",")","\n	","{","\n		this",".","stripComments","=","stripComments",";","\n		return","this",";","\n	"],"docstring_tokens":["Enables","stripping","of","markup","comments","denoted","in","markup","by","HTML","comment","tagging"],"prompt_tokens":[]}
{"code_tokens":["\n	public","MarkupSettings","setThrowExceptionOnMissingXmlDeclaration","(","boolean","throwException",")","\n	","{","\n		throwExceptionOnMissingXmlDeclaration","=","throwException",";","\n		return","this",";","\n	"],"docstring_tokens":["If","true,","an","exception","is","thrown","if","the","markup","file","does","not","contain","a","xml","declaration"],"prompt_tokens":[]}
{"code_tokens":["\n	public","static","Bytes","bytes","(","final","long","bytes",")","\n	","{","\n		return","new","Bytes","(","bytes",")",";","\n	"],"docstring_tokens":["Instantiate","immutable","Bytes","value","object"],"prompt_tokens":[]}
{"code_tokens":["\n	public","final","long","bytes","(",")","\n	","{","\n		return","value",";","\n	"],"docstring_tokens":["Gets","the","byte","count","represented","by","this","value","object"],"prompt_tokens":[]}
{"code_tokens":["\n	@Override\n	public","String","toString","(",")","\n	","{","\n		return","toString","(","Locale",".","getDefault","(","Locale",".","Category",".","FORMAT",")",")",";","\n	"],"docstring_tokens":["Converts","this","byte","count","to","a","string","using","the","default","locale"],"prompt_tokens":[]}
{"code_tokens":["\n	public","String","toString","(","final","Locale","locale",")","\n	","{","\n		if","(","terabytes","(",")",">=","1",".","0",")","\n		","{","\n			return","unitString","(","terabytes","(",")",",","\"TB\",","locale",")",";","\n		","}","\n\n		if","(","gigabytes","(",")",">=","1",".","0",")","\n		","{","\n			return","unitString","(","gigabytes","(",")",",","\"GB\",","locale",")",";","\n		","}","\n\n		if","(","megabytes","(",")",">=","1",".","0",")","\n		","{","\n			return","unitString","(","megabytes","(",")",",","\"MB\",","locale",")",";","\n		","}","\n\n		if","(","kilobytes","(",")",">=","1",".","0",")","\n		","{","\n			return","unitString","(","kilobytes","(",")",",","\"KB\",","locale",")",";","\n		","}","\n\n		return","Long",".","toString","(","value",")","+","\"","bytes\"",";","\n	"],"docstring_tokens":["Converts","this","byte","count","to","a","string","using","the","given","locale"],"prompt_tokens":[]}
{"code_tokens":["\n	private","String","unitString","(","final","double","value,","final","String","units,","final","Locale","locale",")","\n	","{","\n		return","StringValue",".","valueOf","(","value,","locale",")","+","units",";","\n	"],"docstring_tokens":["Convert","value","to","formatted","floating","point","number","and","units"],"prompt_tokens":[]}
{"code_tokens":["\n	public","final","boolean","isRendered","(",")","\n	","{","\n		return","rendered",";","\n	"],"docstring_tokens":["Gets","whether","or","not","this","message","has","been","rendered"],"prompt_tokens":[]}
{"code_tokens":["\n	public","final","void","markRendered","(",")","\n	","{","\n		rendered","=","true",";","\n	"],"docstring_tokens":["Marks","this","message","as","rendered"],"prompt_tokens":[]}
{"code_tokens":["\n	public","final","Serializable","getMessage","(",")","\n	","{","\n		return","message",";","\n	"],"docstring_tokens":["Gets","the","actual","message"],"prompt_tokens":[]}
{"code_tokens":["\n	public","final","boolean","isDebug","(",")","\n	","{","\n		return","isLevel","(","DEBUG",")",";","\n	"],"docstring_tokens":["Gets","whether","the","current","level","is","DEBUG","or","up"],"prompt_tokens":[]}
{"code_tokens":["\n	public","final","boolean","isInfo","(",")","\n	","{","\n		return","isLevel","(","INFO",")",";","\n	"],"docstring_tokens":["Gets","whether","the","current","level","is","INFO","or","up"],"prompt_tokens":[]}
{"code_tokens":["\n	public","final","boolean","isSuccess","(",")","\n	","{","\n		return","isLevel","(","SUCCESS",")",";","\n	"],"docstring_tokens":["Gets","whether","the","current","level","is","SUCCESS","or","up"],"prompt_tokens":[]}
{"code_tokens":["\n	public","final","boolean","isWarning","(",")","\n	","{","\n		return","isLevel","(","WARNING",")",";","\n	"],"docstring_tokens":["Gets","whether","the","current","level","is","WARNING","or","up"],"prompt_tokens":[]}
{"code_tokens":["\n	public","final","boolean","isError","(",")","\n	","{","\n		return","isLevel","(","ERROR",")",";","\n	"],"docstring_tokens":["Gets","whether","the","current","level","is","ERROR","or","up"],"prompt_tokens":[]}
{"code_tokens":["\n	public","final","boolean","isFatal","(",")","\n	","{","\n		return","isLevel","(","FATAL",")",";","\n	"],"docstring_tokens":["Gets","whether","the","current","level","is","FATAL","or","up"],"prompt_tokens":[]}
{"code_tokens":["\n	public","final","boolean","isUndefined","(",")","\n	","{","\n		return","(","getLevel","(",")","==","UNDEFINED",")",";","\n	"],"docstring_tokens":["Gets","whether","the","current","level","is","UNDEFINED"],"prompt_tokens":[]}
{"code_tokens":["public","static","IPropertyReflectionAwareModel<?>","resolvePropertyModelFrom","(","FormComponent<?>","component",")","{","IModel<?>","model","=","component",".","getModel","(",")",";","while","(","true",")","{","if","(","model","==","null",")","{","return","null",";","}","if","(","model","instanceof","IPropertyReflectionAwareModel",")","{","return","(","IPropertyReflectionAwareModel<?>",")","model",";","}","if","(","model","instanceof","IWrapModel<?>",")","{","model","=","(","(","IWrapModel<?>",")","model",")",".","getWrappedModel","(",")",";","continue",";","}","break",";","//","not","model","found\n","}","return","null",";"],"docstring_tokens":["Lookup","for","property-aware","model,","attached","to","certain","form","component"],"prompt_tokens":[]}
{"code_tokens":["\n	@Override\n	public","Url","mapHandler","(","IRequestHandler","requestHandler",")","\n	","{","\n		Url","homeUrl","=","super",".","mapHandler","(","requestHandler",")",";","\n\n		if","(","homeUrl","!=","null",")","\n		","{","\n			String","locale","=","Session",".","get","(",")",".","getLocale","(",")",".","toString","(",")",";","\n			homeUrl",".","getSegments","(",")",".","add","(","0,","locale",")",";","\n		","}","\n\n		return","homeUrl",";","\n	"],"docstring_tokens":["Sets","the","current","session","Locale","as","first","segment","in","the","Url"],"prompt_tokens":[]}
{"code_tokens":["\n	@Override\n	public","IRequestHandler","mapRequest","(","Request","request",")","\n	","{","\n		IRequestHandler","requestHandler","=","null",";","\n		Url","url","=","request",".","getUrl","(",")",";","\n		List<String>","segments","=","url",".","getSegments","(",")",";","\n\n		if","(","segments",".","size","(",")","==","1",")","\n		","{","\n			String","localeAsString","=","segments",".","get","(","0",")",";","\n			Locale","locale","=","LocaleHelper",".","parseLocale","(","localeAsString",")",";","\n			if","(","locale","!=","null",")","\n			","{","\n				Session",".","get","(",")",".","setLocale","(","locale",")",";","\n				segments",".","remove","(","0",")",";","\n\n				Request","requestWithoutLocale","=","request",".","cloneWithUrl","(","url",")",";","\n				requestHandler","=","super",".","mapRequest","(","requestWithoutLocale",")",";","\n			","}","\n		","}","\n\n		return","requestHandler",";","\n	"],"docstring_tokens":["Removes","the","leading","segment","if","it","a","valid","Locale"],"prompt_tokens":[]}
{"code_tokens":["\n	public","CSPHeaderConfiguration","disabled","(",")","\n	","{","\n		return","clear","(",")",";","\n	"],"docstring_tokens":["Removes","all","directives","from","the","CSP,","returning","an","empty","configuration"],"prompt_tokens":[]}
{"code_tokens":["\n	public","CSPHeaderConfiguration","remove","(","CSPDirective","directive",")","\n	","{","\n		directives",".","remove","(","directive",")",";","\n		return","recalculateState","(",")",";","\n	"],"docstring_tokens":["Removes","the","given","directive","from","the","configuration"],"prompt_tokens":[]}
{"code_tokens":["\n	public","CSPHeaderConfiguration","add","(","CSPDirective","directive,","CSPRenderable",".",".",".","values",")","\n	","{","\n		for","(","CSPRenderable","value",":","values",")","\n		","{","\n			doAddDirective","(","directive,","value",")",";","\n		","}","\n		return","recalculateState","(",")",";","\n	"],"docstring_tokens":["Adds","the","given","values","to","the","CSP","directive","on","this","configuraiton"],"prompt_tokens":[]}
{"code_tokens":["\n	public","CSPHeaderConfiguration","add","(","CSPDirective","directive,","String",".",".",".","values",")","\n	","{","\n		for","(","String","value",":","values",")","\n		","{","\n			doAddDirective","(","directive,","new","FixedCSPValue","(","value",")",")",";","\n		","}","\n		return","recalculateState","(",")",";","\n	"],"docstring_tokens":["Adds","a","free-form","value","to","a","directive","for","the","CSP","header"],"prompt_tokens":[]}
{"code_tokens":["\n	public","CSPHeaderConfiguration","clear","(",")","\n	","{","\n		directives",".","clear","(",")",";","\n		return","recalculateState","(",")",";","\n	"],"docstring_tokens":["Removes","all","CSP","directives","from","the","configuration"],"prompt_tokens":[]}
{"code_tokens":["\n	private","void","internalAdd","(","String","name,","Object","object",")","\n	","{","\n		final","HeaderKey","key","=","new","HeaderKey","(","name",")",";","\n\n		List<Object>","values","=","headers",".","get","(","key",")",";","\n\n		if","(","values","==","null",")","\n		","{","\n			values","=","new","ArrayList<>","(",")",";","\n			headers",".","put","(","key,","values",")",";","\n		","}","\n		values",".","add","(","object",")",";","\n	"],"docstring_tokens":["internally","add","new","object","to","header","values"],"prompt_tokens":[]}
{"code_tokens":["\n	public","void","setDateHeader","(","String","name,","Instant","time",")","\n	","{","\n		//","remove","previous","values\n		removeHeader","(","name",")",";","\n\n		//","add","time","object","to","values\n		addDateHeader","(","name,","time",")",";","\n	"],"docstring_tokens":["add","date","header","value"],"prompt_tokens":[]}
{"code_tokens":["\n	public","String","getHeader","(","String","name",")","\n	","{","\n		final","List<Object>","objects","=","headers",".","get","(","new","HeaderKey","(","name",")",")",";","\n\n		if","(","objects","==","null","||","objects",".","isEmpty","(",")",")","\n		","{","\n			return","null",";","\n		","}","\n		return","valueToString","(","objects",".","get","(","0",")",")",";","\n	"],"docstring_tokens":["Gets","the","header","identified","with","the","name","as","a","String"],"prompt_tokens":[]}
{"code_tokens":["\n	public","boolean","isEmpty","(",")","\n	","{","\n		return","headers",".","isEmpty","(",")",";","\n	"],"docstring_tokens":["Check","if","collection","is","empty"],"prompt_tokens":[]}
{"code_tokens":["\n	public","int","getCount","(",")","\n	","{","\n		return","headers",".","size","(",")",";","\n	"],"docstring_tokens":["get","number","of","headers"],"prompt_tokens":[]}
{"code_tokens":["\n	public","static","AjaxClientInfoBehavior","onClientInfo","(","SerializableBiConsumer<AjaxRequestTarget,","WebClientInfo>","onClientInfo",")","\n	","{","\n		Args",".","notNull","(","onClientInfo,","\"onClientInfo\"",")",";","\n\n		return","new","AjaxClientInfoBehavior","(",")","\n		","{","\n\n			private","static","final","long","serialVersionUID","=","1L",";","\n\n			@Override\n			protected","void","onClientInfo","(","AjaxRequestTarget","target,","WebClientInfo","clientInfo",")","\n			","{","\n				onClientInfo",".","accept","(","target,","clientInfo",")",";","\n			","}","\n		","}",";","\n	"],"docstring_tokens":["Creates","an","AjaxClientInfoBehavior","based","on","lambda","expressions"],"prompt_tokens":[]}
{"code_tokens":["\n	public","final","IWizardStep","getActiveStep","(",")","\n	","{","\n		return","getWizardModel","(",")",".","getActiveStep","(",")",";","\n	"],"docstring_tokens":["Convenience","method","to","get","the","active","step","from","the","model"],"prompt_tokens":[]}
{"code_tokens":["\n	public","Form<?>","getForm","(",")","\n	","{","\n		return","form",";","\n	"],"docstring_tokens":["Gets","the","form","in","which","the","view","is","nested,","and","on","which","the","wizard","buttons","work"],"prompt_tokens":[]}
{"code_tokens":["\n	@Override\n	public","void","onCancel","(",")","\n	","{","\n	"],"docstring_tokens":["Called","when","the","wizard","is","canceled"],"prompt_tokens":[]}
{"code_tokens":["\n	@Override\n	public","void","onFinish","(",")","\n	","{","\n	"],"docstring_tokens":["Called","when","the","wizard","is","finished"],"prompt_tokens":[]}
{"code_tokens":["\r\n	public","static","String","absolutePath","(","final","Class<?>","p,","final","String","path",")","\r\n	","{","\r\n		String","packName","=","(","p","!=","null","?","extractPackageName","(","p",")",":","\"\"",")",";","\r\n		return","absolutePath","(","packName,","path",")",";","\r\n	"],"docstring_tokens":["Takes","a","package","and","a","path","to","a","resource","and","returns","an","absolute","path","to","the","resource"],"prompt_tokens":[]}
{"code_tokens":["\r\n	public","static","String","parent","(","final","String","packageName",")","\r\n	","{","\r\n		int","pos","=","packageName",".","lastIndexOf","(","\"",".","\"",")",";","\r\n		String","parent",";","\r\n		if","(","pos","<","0",")","\r\n		","{","\r\n			pos","=","packageName",".","lastIndexOf","(","\"/\"",")",";","\r\n			if","(","pos","<","0",")","\r\n			","{","\r\n				pos","=","0",";","\r\n			","}","\r\n		","}","\r\n		parent","=","packageName",".","substring","(","0,","pos",")",";","\r\n		return","parent",";","\r\n	"],"docstring_tokens":["Gets","the","parent","package","name"],"prompt_tokens":[]}
{"code_tokens":["\n	protected","boolean","mustProtect","(","IRequestHandler","handler",")","\n	","{","\n		if","(","handler","instanceof","IRequestHandlerDelegate",")","\n		","{","\n			return","mustProtect","(","(","(","IRequestHandlerDelegate",")","handler",")",".","getDelegateHandler","(",")",")",";","\n		","}","\n		\n		return","settings",".","mustProtectRequest","(","handler",")",";","\n	"],"docstring_tokens":["Must","the","given","handler","be","protected"],"prompt_tokens":[]}
{"code_tokens":["\n	@Override\n	protected","void","onConfigure","(",")","\n	","{","\n		super",".","onConfigure","(",")",";","\n		setVisible","(","getTable","(",")",".","getRowCount","(",")","==","0",")",";","\n	"],"docstring_tokens":["Only","shows","this","toolbar","when","there","are","no","rows"],"prompt_tokens":[]}
{"code_tokens":["\n	protected","boolean","enableAutoSubmit","(",")","\n	","{","\n		return","true",";","\n	"],"docstring_tokens":["Returns","true","if","the","constructed","choice","filter","should","autosubmit","the","form","when","its","value","is	","changed"],"prompt_tokens":[]}
{"code_tokens":["\n	public","final","void","setPosition","(","final","int","pos",")","\n	","{","\n		inputPosition","=","pos",";","\n	"],"docstring_tokens":["Position","the","reader","at","the","index","provided"],"prompt_tokens":[]}
{"code_tokens":["\n	@Override\n	public","void","renderHead","(","final","Component","component,","HtmlHeaderContainer","container",")","\n	","{","\n		if","(","!","(","component","instanceof","WebMarkupContainer",")",")","\n		","{","\n			throw","new","WicketRuntimeException","(","Classes",".","simpleName","(","component",".","getClass","(",")",")","+\n				\"","can","only","be","associated","with","WebMarkupContainer",".","\"",")",";","\n		","}","\n\n		renderHeadFromAssociatedMarkupFile","(","(","WebMarkupContainer",")","component,","container",")",";","\n	"],"docstring_tokens":["Render","the","header","from","the","associated","markup","file"],"prompt_tokens":[]}
{"code_tokens":["\n	public","final","IPageable","getPageable","(",")","\n	","{","\n		return","pageable",";","\n	"],"docstring_tokens":["IPageable","this","navigator","is","linked","with"],"prompt_tokens":[]}
{"code_tokens":["\n	private","void","checkMutability","(",")","\n	","{","\n		if","(","immutable",")","\n		","{","\n			throw","new","UnsupportedOperationException","(","\"Map","is","immutable\"",")",";","\n		","}","\n	"],"docstring_tokens":["Throws","an","exception","if","ValueMap","is","immutable"],"prompt_tokens":[]}
{"code_tokens":["\n	public","final","void","authorize","(","final","Action","action,","final","Roles","rolesToAdd",")","\n	","{","\n		if","(","action","==","null",")","\n		","{","\n			throw","new","IllegalArgumentException","(","\"Argument","action","cannot","be","null\"",")",";","\n		","}","\n\n		if","(","rolesToAdd","==","null",")","\n		","{","\n			throw","new","IllegalArgumentException","(","\"Argument","rolesToAdd","cannot","be","null\"",")",";","\n		","}","\n\n		Roles","roles","=","rolesForAction",".","get","(","action",")",";","\n		if","(","roles","==","null",")","\n		","{","\n			roles","=","new","Roles","(",")",";","\n			rolesForAction",".","put","(","action,","roles",")",";","\n		","}","\n		roles",".","addAll","(","rolesToAdd",")",";","\n	"],"docstring_tokens":["Gives","permission","for","the","given","roles","to","perform","the","given","action"],"prompt_tokens":[]}
{"code_tokens":["\n	public","final","void","authorizeAll","(","final","Action","action",")","\n	","{","\n		if","(","action","==","null",")","\n		","{","\n			throw","new","IllegalArgumentException","(","\"Argument","action","cannot","be","null\"",")",";","\n		","}","\n\n		rolesForAction",".","remove","(","action",")",";","\n	"],"docstring_tokens":["Remove","all","authorization","for","the","given","action"],"prompt_tokens":[]}
{"code_tokens":["\n	public","final","Roles","rolesFor","(","final","Action","action",")","\n	","{","\n		if","(","action","==","null",")","\n		","{","\n			throw","new","IllegalArgumentException","(","\"Argument","action","cannot","be","null\"",")",";","\n		","}","\n\n		return","rolesForAction",".","get","(","action",")",";","\n	"],"docstring_tokens":["Gets","the","roles","that","have","a","binding","for","the","given","action"],"prompt_tokens":[]}
{"code_tokens":["\n	public","final","boolean","isAttached","(",")","\n	","{","\n		return","attached",";","\n	"],"docstring_tokens":["Gets","whether","this","model","has","been","attached","to","the","current","session"],"prompt_tokens":[]}
{"code_tokens":["\n	protected","final","void","setAttached","(",")","\n	","{","\n		attached","=","true",";","\n	"],"docstring_tokens":["Set","this","model","in","an","attached","state"],"prompt_tokens":[]}
{"code_tokens":["\r\n	protected","boolean","urlStartsWith","(","final","Url","url,","final","String",".",".",".","segments",")","\r\n	","{","\r\n		if","(","url","==","null",")","\r\n		","{","\r\n			return","false",";","\r\n		","}","\r\n\r\n		List<String>","urlSegments","=","url",".","getSegments","(",")",";","\r\n		\r\n		for","(","int","i","=","0",";","i","<","segments",".","length",";","++i",")","\r\n		","{","\r\n			String","segment","=","segments[i]",";","\r\n			String","urlSegment","=","safeSegmentGetter","(","urlSegments,","i,","null",")",";","\r\n			if","(","urlSegment","==","null","&&","getOptionalPlaceholder","(","segment",")","==","null",")","\r\n			","{","\r\n				//","if","the","'segment'","has","static","value","or","is","mandatory","placeholder\r\n				return","false",";","\r\n			","}","\r\n			else","if","(","!segment",".","equals","(","urlSegment",")","&&\r\n			","(","getPlaceholder","(","segment",")","==","null","&&\r\n			","getOptionalPlaceholder","(","segment",")","==","null",")",")","\r\n			","{","\r\n				return","false",";","\r\n			","}","\r\n		","}","\r\n			\r\n		return","true",";","\r\n	"],"docstring_tokens":["Returns","true","if","the","given","url","starts","with","specified","segments"],"prompt_tokens":[]}
{"code_tokens":["\n	public","static","boolean","isRelative","(","final","String","url",")","\n	","{","\n		//","the","regex","means","\"doesn't","start","with","'scheme://'\"\n		if","(","(","url","!=","null",")","&&","(","url",".","startsWith","(","\"/\"",")","==","false",")","&&","(","!url",".","matches","(","\"^\\\\w+\\\\:\\\\/\\\\/",".","*\"",")",")","&&\n			!","(","url",".","startsWith","(","\"#\"",")",")",")","\n		","{","\n			return","true",";","\n		","}","\n		else\n		","{","\n			return","false",";","\n		","}","\n	"],"docstring_tokens":["Checks","if","the","url","is","relative","or","absolute"],"prompt_tokens":[]}
{"code_tokens":["\n	public","static","String","rewriteToContextRelative","(","String","url,","IRequestCycle","requestCycle",")","\n	","{","\n		if","(","isRelative","(","url",")",")","\n		","{","\n			return","requestCycle",".","getUrlRenderer","(",")",".","renderContextRelativeUrl","(","url",")",";","\n		","}","\n		else\n		","{","\n			return","url",";","\n		","}","\n	"],"docstring_tokens":["Rewrites","a","relative","url","to","be","context","relative,","leaves","absolute","urls","same"],"prompt_tokens":[]}
{"code_tokens":["\n	public","ValidationError","addKey","(","String","key",")","\n	","{","\n		Args",".","notEmpty","(","key,","\"key\"",")",";","\n\n		if","(","keys","==","null",")","\n		","{","\n			keys","=","new","ArrayList<>","(","1",")",";","\n		","}","\n		keys",".","add","(","key",")",";","\n		return","this",";","\n	"],"docstring_tokens":["Adds","a","key","to","the","list","of","keys","that","will","be","tried","against","IErrorMessageSource","to	","locate","the","error","message","string"],"prompt_tokens":[]}
{"code_tokens":["\n	public","final","Map<String,","Object>","getVariables","(",")","\n	","{","\n		if","(","vars","==","null",")","\n		","{","\n			vars","=","new","HashMap<>","(","2",")",";","\n		","}","\n		return","vars",";","\n	"],"docstring_tokens":["Retrieves","the","variables","map","for","this","error"],"prompt_tokens":[]}
{"code_tokens":["\n	public","final","ValidationError","setVariables","(","Map<String,","Object>","vars",")","\n	","{","\n		Args",".","notNull","(","vars,","\"vars\"",")",";","\n\n		this",".","vars","=","vars",";","\n		return","this",";","\n	"],"docstring_tokens":["Sets","the","variables","map","for","this","error"],"prompt_tokens":[]}
{"code_tokens":["\n	public","final","FeedbackCollector","setRecursive","(","boolean","value",")","\n	","{","\n		recursive","=","value",";","\n		return","this",";","\n	"],"docstring_tokens":["Controls","whether","or","not","feedback","will","be","collected","recursively","from","the","descendants","of","the	","specified","component"],"prompt_tokens":[]}
{"code_tokens":["\n	public","final","List<FeedbackMessage>","collect","(",")","\n	","{","\n		return","collect","(","IFeedbackMessageFilter",".","ALL",")",";","\n	"],"docstring_tokens":["Collects","all","feedback","messages"],"prompt_tokens":[]}
{"code_tokens":["\n	public","final","List<FeedbackMessage>","collect","(","final","IFeedbackMessageFilter","filter",")","\n	","{","\n		final","List<FeedbackMessage>","messages","=","new","ArrayList<>","(",")",";","\n\n		if","(","includeSession","&&","Session",".","exists","(",")",")","\n		","{","\n			messages",".","addAll","(","Session",".","get","(",")",".","getFeedbackMessages","(",")",".","messages","(","filter",")",")",";","\n		","}","\n\n		if","(","component","!=","null","&&","component",".","hasFeedbackMessage","(",")",")","\n		","{","\n			messages",".","addAll","(","component",".","getFeedbackMessages","(",")",".","messages","(","filter",")",")",";","\n		","}","\n\n		if","(","component","!=","null","&&","recursive","&&","component","instanceof","MarkupContainer",")","\n		","{","\n			","(","(","MarkupContainer",")","component",")",".","visitChildren","(","new","IVisitor<Component,","Void>","(",")","\n			","{","\n				@Override\n				public","void","component","(","Component","object,","IVisit<Void>","visit",")","\n				","{","\n					if","(","!shouldRecurseInto","(","object",")",")","\n					","{","\n						visit",".","dontGoDeeper","(",")",";","\n						return",";","\n					","}","\n\n					if","(","object",".","hasFeedbackMessage","(",")",")","\n					","{","\n						messages",".","addAll","(","object",".","getFeedbackMessages","(",")",".","messages","(","filter",")",")",";","\n					","}","\n				","}","\n			","}",")",";","\n		","}","\n\n		return","messages",";","\n	"],"docstring_tokens":["Collects","all","feedback","messages","that","match","the","specified","filter"],"prompt_tokens":[]}
{"code_tokens":["\n	public","final","Visit<Void>","visit","(","final","Component","rootComponent",")","\n	","{","\n		Visit<Void>","visitor","=","new","Visit<Void>","(",")",";","\n		return","visit","(","rootComponent,","visitor",")",";","\n	"],"docstring_tokens":["Render","the","child","hierarchy","headers"],"prompt_tokens":[]}
{"code_tokens":["\n	public","String","getValue","(",")","\n	","{","\n		return","value",";","\n	"],"docstring_tokens":["The","value","of","the","header"],"prompt_tokens":[]}
{"code_tokens":["\n	public","void","setValue","(","String","value",")","\n	","{","\n		this",".","value","=","value",";","\n	"],"docstring_tokens":["Sets","the","value","of","the","header"],"prompt_tokens":[]}
{"code_tokens":["\n	public","HeaderOperation","getOperation","(",")","\n	","{","\n		return","operation",";","\n	"],"docstring_tokens":["Gets","the","header","operation"],"prompt_tokens":[]}
{"code_tokens":["\n	public","void","setOperation","(","HeaderOperation","operation",")","\n	","{","\n		this",".","operation","=","operation",";","\n	"],"docstring_tokens":["Sets","the","header","operation"],"prompt_tokens":[]}
{"code_tokens":["\n	public","void","generate","(","Collection<Contact>","collection,","int","count",")","\n	","{","\n		for","(","int","i","=","0",";","i","<","count",";","i++",")","\n		","{","\n			collection",".","add","(","generate","(",")",")",";","\n		","}","\n	"],"docstring_tokens":["generates","count","number","contacts","and","puts","them","into","collection	","collection"],"prompt_tokens":[]}
{"code_tokens":["\n	public","ILinkParser","addLinkRenderStrategy","(","final","String","pattern,\n		final","ILinkRenderStrategy","renderStrategy",")","\n	","{","\n		final","Pattern","compiledPattern","=","Pattern",".","compile","(","pattern,","Pattern",".","DOTALL",")",";","\n		renderStrategies",".","put","(","compiledPattern,","renderStrategy",")",";","\n		return","this",";","\n	"],"docstring_tokens":["Adds","a","render","strategy","to","the","parser"],"prompt_tokens":[]}
{"code_tokens":["\n	public","PageParameters","add","(","final","String","name,","final","Object","value",")","\n	","{","\n		return","add","(","name,","value,","Type",".","MANUAL",")",";","\n	"],"docstring_tokens":["Adds","a","page","parameter","to","these","with","name","and","value"],"prompt_tokens":[]}
{"code_tokens":["\n	public","PageParameters","set","(","final","String","name,","final","Object","value,","final","int","index",")","\n	","{","\n		return","set","(","name,","value,","index,","Type",".","MANUAL",")",";","\n	"],"docstring_tokens":["Sets","the","page","parameter","with","name","and","value","at","the","given","index"],"prompt_tokens":[]}
{"code_tokens":["\n	public","PageParameters","set","(","final","String","name,","final","Object","value",")","\n	","{","\n		return","set","(","name,","value,","Type",".","MANUAL",")",";","\n	"],"docstring_tokens":["Sets","the","page","parameter","with","name","and","value"],"prompt_tokens":[]}
{"code_tokens":["\n	public","PageParameters","overwriteWith","(","final","PageParameters","other",")","\n	","{","\n		if","(","this","!=","other",")","\n		","{","\n			indexedParameters","=","other",".","indexedParameters",";","\n			namedParameters","=","other",".","namedParameters",";","\n			locale","=","other",".","locale",";","\n		","}","\n		return","this",";","\n	"],"docstring_tokens":["Copy","the","page","parameters"],"prompt_tokens":[]}
{"code_tokens":["\n	public","PageParameters","mergeWith","(","final","PageParameters","other",")","\n	","{","\n		if","(","other","!=","null","&&","this","!=","other",")","\n		","{","\n			mergeIndexed","(","other",")",";","\n			mergeNamed","(","other",")",";","\n		","}","\n		return","this",";","\n	"],"docstring_tokens":["Merges","the","page","parameters","into","this,","overwriting","existing","values"],"prompt_tokens":[]}
{"code_tokens":["\n	public","static","synchronized","WicketMetricsSettings","getSettings","(",")","\n	","{","\n		Application","application","=","Application",".","get","(","getFilterName","(",")",")",";","\n		if","(","application","==","null",")","\n		","{","\n			throw","new","WicketRuntimeException","(","APPLICATION_ERROR",")",";","\n		","}","\n		WicketMetricsSettings","wicketMetricsSettings","=","application",".","getMetaData","(","METRIC_SETTINGS",")",";","\n		if","(","wicketMetricsSettings","==","null",")","\n		","{","\n			wicketMetricsSettings","=","new","WicketMetricsSettings","(",")",";","\n			wicketMetricsSettings",".","setPrefix","(","getFilterName","(",")",")",";","\n			application",".","setMetaData","(","METRIC_SETTINGS,","wicketMetricsSettings",")",";","\n		","}","\n		return","wicketMetricsSettings",";","\n	"],"docstring_tokens":["Gets","the","wicket","metrics","settings"],"prompt_tokens":[]}
{"code_tokens":["\n	protected","byte[]","computeDigest","(","InputStream","inputStream",")","throws","IOException\n	","{","\n		final","MessageDigest","digest","=","getMessageDigest","(",")",";","\n\n		//","get","actual","buffer","size\n		final","int","bufferLen","=","(","int",")","Math",".","min","(","Integer",".","MAX_VALUE,","bufferSize",".","bytes","(",")",")",";","\n\n		//","allocate","read","buffer\n		final","byte[]","buf","=","new","byte[bufferLen]",";","\n		int","len",";","\n\n		//","read","stream","and","update","message","digest\n		while","(","(","len","=","inputStream",".","read","(","buf",")",")","!=","-1",")","\n		","{","\n			digest",".","update","(","buf,","0,","len",")",";","\n		","}","\n		//","finish","message","digest","and","return","hash\n		return","digest",".","digest","(",")",";","\n	"],"docstring_tokens":["compute","digest","for","resource","stream"],"prompt_tokens":[]}
{"code_tokens":["\r\n	public","void","addFile","(","String","fieldName,","File","file,","String","contentType",")","\r\n	","{","\r\n		if","(","file","!=","null",")","{","\r\n			if","(","file",".","exists","(",")","==","false",")","\r\n			","{","\r\n				throw","new","IllegalArgumentException","(","\r\n					\"File","does","not","exists",".","You","must","provide","an","existing","file:","\"\r\n						+","file",".","getAbsolutePath","(",")",")",";","\r\n			","}","\r\n\r\n			if","(","file",".","isFile","(",")","==","false",")","\r\n			","{","\r\n				throw","new","IllegalArgumentException","(","\r\n					\"You","can","only","add","a","File,","which","is","not","a","directory",".","Only","files","can","be","uploaded",".","\"",")",";","\r\n			","}","\r\n		","}","\r\n\r\n		if","(","uploadedFiles","==","null",")","\r\n		","{","\r\n			uploadedFiles","=","new","HashMap<>","(",")",";","\r\n		","}","\r\n\r\n		UploadedFile","uf","=","new","UploadedFile","(","fieldName,","file,","contentType",")",";","\r\n\r\n		List<UploadedFile>","filesPerField","=","uploadedFiles",".","get","(","fieldName",")",";","\r\n		if","(","filesPerField","==","null",")","\r\n		","{","\r\n			filesPerField","=","new","ArrayList<>","(",")",";","\r\n			uploadedFiles",".","put","(","fieldName,","filesPerField",")",";","\r\n		","}","\r\n\r\n		filesPerField",".","add","(","uf",")",";","\r\n		setUseMultiPartContentType","(","true",")",";","\r\n	"],"docstring_tokens":["Add","an","uploaded","file","to","the","request"],"prompt_tokens":[]}
{"code_tokens":["\r\n	public","void","addHeader","(","String","name,","String","value",")","\r\n	","{","\r\n		@SuppressWarnings","(","\"unchecked\"",")","\r\n		List<String>","list","=","(","List<String>",")","headers",".","get","(","name",")",";","\r\n		if","(","list","==","null",")","\r\n		","{","\r\n			list","=","new","ArrayList<>","(","1",")",";","\r\n			headers",".","put","(","name,","list",")",";","\r\n		","}","\r\n		list",".","add","(","value",")",";","\r\n	"],"docstring_tokens":["Add","a","header","to","the","request"],"prompt_tokens":[]}
{"code_tokens":["\r\n	public","void","setHeader","(","String","name,","String","value",")","\r\n	","{","\r\n		@SuppressWarnings","(","\"unchecked\"",")","\r\n		List<String>","list","=","(","List<String>",")","headers",".","get","(","name",")",";","\r\n		if","(","list","==","null",")","\r\n		","{","\r\n			list","=","new","ArrayList<>","(","1",")",";","\r\n			headers",".","put","(","name,","list",")",";","\r\n		","}","\r\n		list",".","clear","(",")",";","\r\n		list",".","add","(","value",")",";","\r\n	"],"docstring_tokens":["Sets","a","header","to","the","request"],"prompt_tokens":[]}
{"code_tokens":["\r\n	public","Charset","getCharset","(",")","\r\n	","{","\r\n		return","Charset",".","forName","(","characterEncoding",")",";","\r\n	"],"docstring_tokens":["Get","the","current","character","set"],"prompt_tokens":[]}
{"code_tokens":["\r\n	public","void","setUseMultiPartContentType","(","boolean","useMultiPartContentType",")","\r\n	","{","\r\n		this",".","useMultiPartContentType","=","useMultiPartContentType",";","\r\n	"],"docstring_tokens":["true","will","force","Request","generate","multiPart","ContentType","and","ContentLength"],"prompt_tokens":[]}
{"code_tokens":["\r\n	@Override\r\n	public","Cookie[]","getCookies","(",")","\r\n	","{","\r\n		if","(","cookies",".","isEmpty","(",")",")","\r\n		","{","\r\n			return","null",";","\r\n		","}","\r\n		List<Cookie>","cookieValues","=","new","ArrayList<Cookie>","(",")",";","\r\n		cookieValues",".","addAll","(","cookies",".","values","(",")",")",";","\r\n		return","cookieValues",".","toArray","(","new","Cookie[cookieValues",".","size","(",")","]",")",";","\r\n	"],"docstring_tokens":["Get","all","of","the","cookies","for","this","request"],"prompt_tokens":[]}
{"code_tokens":["\r\n	@Override\r\n	public","Locale","getLocale","(",")","\r\n	","{","\r\n		return","getLocales","(",")",".","nextElement","(",")",";","\r\n	"],"docstring_tokens":["Get","the","locale","of","the","request"],"prompt_tokens":[]}
{"code_tokens":["\r\n	@Override\r\n	public","String","getParameter","(","final","String","name",")","\r\n	","{","\r\n		String[]","param","=","getParameterMap","(",")",".","get","(","name",")",";","\r\n		if","(","param","==","null",")","\r\n		","{","\r\n			return","null",";","\r\n		","}","\r\n		else\r\n		","{","\r\n			return","param[0]",";","\r\n		","}","\r\n	"],"docstring_tokens":["Get","the","request","parameter","with","the","given","name"],"prompt_tokens":[]}
{"code_tokens":["\r\n	@Override\r\n	public","String","getQueryString","(",")","\r\n	","{","\r\n		if","(","parameters",".","size","(",")","==","0",")","\r\n		","{","\r\n			return","null",";","\r\n		","}","\r\n		else\r\n		","{","\r\n			final","StringBuilder","buf","=","new","StringBuilder","(",")",";","\r\n			for","(","Iterator<String>","iterator","=","parameters",".","keySet","(",")",".","iterator","(",")",";","iterator",".","hasNext","(",")",";",")","\r\n			","{","\r\n				final","String","name","=","iterator",".","next","(",")",";","\r\n				final","String[]","values","=","getParameterValues","(","name",")",";","\r\n				for","(","int","i","=","0",";","i","<","values",".","length",";","i++",")","\r\n				","{","\r\n					if","(","name","!=","null",")","\r\n					","{","\r\n						buf",".","append","(","UrlEncoder",".","QUERY_INSTANCE",".","encode","(","name,","getCharset","(",")",")",")",";","\r\n					","}","\r\n					buf",".","append","(","'='",")",";","\r\n					if","(","values[i]","!=","null",")","\r\n					","{","\r\n						buf",".","append","(","UrlEncoder",".","QUERY_INSTANCE",".","encode","(","values[i],","getCharset","(",")",")",")",";","\r\n					","}","\r\n					if","(","i","+","1","<","values",".","length",")","\r\n					","{","\r\n						buf",".","append","(","'&'",")",";","\r\n					","}","\r\n				","}","\r\n				if","(","iterator",".","hasNext","(",")",")","\r\n				","{","\r\n					buf",".","append","(","'&'",")",";","\r\n				","}","\r\n			","}","\r\n			return","buf",".","toString","(",")",";","\r\n		","}","\r\n	"],"docstring_tokens":["Get","the","query","string","part","of","the","request"],"prompt_tokens":[]}
{"code_tokens":["\r\n	@Override\r\n	public","String","getRemoteUser","(",")","\r\n	","{","\r\n		return","getHeader","(","\"REMOTE_USER\"",")",";","\r\n	"],"docstring_tokens":["Get","the","name","of","the","remote","user","from","the","REMOTE_USER","header"],"prompt_tokens":[]}
{"code_tokens":["\r\n	public","void","setServerPort","(","int","port",")","\r\n	","{","\r\n		serverPort","=","port",";","\r\n	"],"docstring_tokens":["Sets","the","server","port","for","this","request"],"prompt_tokens":[]}
{"code_tokens":["\r\n	public","void","initialize","(","Locale","locale",")","\r\n	","{","\r\n		authType","=","null",";","\r\n		method","=","\"post\"",";","\r\n		cookies",".","clear","(",")",";","\r\n		setDefaultHeaders","(","locale",")",";","\r\n		path","=","null",";","\r\n		url","=","null",";","\r\n		characterEncoding","=","\"UTF-8\"",";","\r\n		parameters",".","clear","(",")",";","\r\n		attributes",".","clear","(",")",";","\r\n		post",".","reset","(",")",";","\r\n	"],"docstring_tokens":["Reset","the","request","back","to","a","default","state"],"prompt_tokens":[]}
{"code_tokens":["\r\n	public","void","setURL","(","String","url",")","\r\n	","{","\r\n		setUrl","(","Url",".","parse","(","url",")",")",";","\r\n	"],"docstring_tokens":["Set","the","complete","url","for","this","request"],"prompt_tokens":[]}
{"code_tokens":["\r\n	private","void","setDefaultHeaders","(","Locale","l",")","\r\n	","{","\r\n		headers",".","clear","(",")",";","\r\n		addHeader","(","\"Accept\",","\"text/xml,application/xml,application/xhtml+xml,\"\r\n			+","\"text/html",";","q=0",".","9,text/plain",";","q=0",".","8,image/png,*/*",";","q=0",".","5\"",")",";","\r\n		addHeader","(","\"Accept-Charset\",","\"ISO-8859-1,utf-8",";","q=0",".","7,*",";","q=0",".","7\"",")",";","\r\n		addHeader","(","\"Accept-Language\",","l",".","getLanguage","(",")",".","toLowerCase","(","Locale",".","ROOT",")","+","\"-\"\r\n			+","l",".","getCountry","(",")",".","toLowerCase","(","Locale",".","ROOT",")","+","\",\"","+","l",".","getLanguage","(",")",".","toLowerCase","(","Locale",".","ROOT",")","+","\"",";","q=0",".","5\"",")",";","\r\n		addHeader","(","\"User-Agent\",\r\n			\"Mozilla/5",".","0","(","X11",";","Ubuntu",";","Linux","x86_64",";","rv:41",".","0",")","Gecko/20100101","Firefox/41",".","0\"",")",";","\r\n	"],"docstring_tokens":["Helper","method","to","create","some","default","headers","for","the","request"],"prompt_tokens":[]}
{"code_tokens":["\r\n	private","byte[]","buildRequest","(",")","\r\n	","{","\r\n		if","(","uploadedFiles","==","null","&&","useMultiPartContentType","==","false",")","\r\n		","{","\r\n			if","(","post",".","getParameterNames","(",")",".","size","(",")","==","0",")","\r\n			","{","\r\n				return","\"\"",".","getBytes","(",")",";","\r\n			","}","\r\n			Url","url","=","new","Url","(",")",";","\r\n			for","(","final","String","parameterName",":","post",".","getParameterNames","(",")",")","\r\n			","{","\r\n				List<StringValue>","values","=","post",".","getParameterValues","(","parameterName",")",";","\r\n				for","(","StringValue","value",":","values",")","\r\n				","{","\r\n					url",".","addQueryParameter","(","parameterName,","value",".","toString","(",")",")",";","\r\n				","}","\r\n			","}","\r\n			String","body","=","url",".","toString","(",")",".","substring","(","1",")",";","\r\n			return","body",".","getBytes","(",")",";","\r\n		","}","\r\n\r\n\r\n		try\r\n		","{","\r\n			//","Build","up","the","input","stream","based","on","the","files","and","parameters\r\n			ByteArrayOutputStream","out","=","new","ByteArrayOutputStream","(",")",";","\r\n\r\n			//","Add","parameters\r\n			for","(","final","String","parameterName",":","post",".","getParameterNames","(",")",")","\r\n			","{","\r\n				List<StringValue>","values","=","post",".","getParameterValues","(","parameterName",")",";","\r\n				for","(","StringValue","value",":","values",")","\r\n				","{","\r\n					newAttachment","(","out",")",";","\r\n					out",".","write","(","\"",";","name=\\\"\"",".","getBytes","(",")",")",";","\r\n					out",".","write","(","parameterName",".","getBytes","(",")",")",";","\r\n					out",".","write","(","\"\\\"\"",".","getBytes","(",")",")",";","\r\n					out",".","write","(","crlf",".","getBytes","(",")",")",";","\r\n					out",".","write","(","crlf",".","getBytes","(",")",")",";","\r\n					out",".","write","(","value",".","toString","(",")",".","getBytes","(",")",")",";","\r\n					out",".","write","(","crlf",".","getBytes","(",")",")",";","\r\n				","}","\r\n			","}","\r\n\r\n			//","Add","files\r\n			if","(","uploadedFiles","!=","null",")","\r\n			","{","\r\n				for","(","Map",".","Entry<String,","List<UploadedFile>>","entry",":","uploadedFiles",".","entrySet","(",")",")","\r\n				","{","\r\n					String","fieldName","=","entry",".","getKey","(",")",";","\r\n					List<UploadedFile>","files","=","entry",".","getValue","(",")",";","\r\n\r\n					for","(","UploadedFile","uf",":","files",")","\r\n					","{","\r\n						newAttachment","(","out",")",";","\r\n						out",".","write","(","\"",";","name=\\\"\"",".","getBytes","(",")",")",";","\r\n						out",".","write","(","fieldName",".","getBytes","(",")",")",";","\r\n						out",".","write","(","\"\\\"",";","filename=\\\"\"",".","getBytes","(",")",")",";","\r\n						if","(","uf",".","getFile","(",")","!=","null",")","{","\r\n							out",".","write","(","uf",".","getFile","(",")",".","getName","(",")",".","getBytes","(",")",")",";","\r\n						","}","\r\n						out",".","write","(","\"\\\"\"",".","getBytes","(",")",")",";","\r\n						out",".","write","(","crlf",".","getBytes","(",")",")",";","\r\n						out",".","write","(","\"Content-Type:","\"",".","getBytes","(",")",")",";","\r\n						out",".","write","(","uf",".","getContentType","(",")",".","getBytes","(",")",")",";","\r\n						out",".","write","(","crlf",".","getBytes","(",")",")",";","\r\n						out",".","write","(","crlf",".","getBytes","(",")",")",";","\r\n\r\n						if","(","uf",".","getFile","(",")","!=","null",")","{","\r\n							//","Load","the","file","and","put","it","into","the","the","inputstream\r\n							FileInputStream","fis","=","new","FileInputStream","(","uf",".","getFile","(",")",")",";","\r\n\r\n							try\r\n							","{","\r\n								IOUtils",".","copy","(","fis,","out",")",";","\r\n							","}","\r\n							finally\r\n							","{","\r\n								fis",".","close","(",")",";","\r\n							","}","\r\n						","}","\r\n						out",".","write","(","crlf",".","getBytes","(",")",")",";","\r\n					","}","\r\n				","}","\r\n			","}","\r\n\r\n			out",".","write","(","boundary",".","getBytes","(",")",")",";","\r\n			out",".","write","(","\"--\"",".","getBytes","(",")",")",";","\r\n			out",".","write","(","crlf",".","getBytes","(",")",")",";","\r\n			return","out",".","toByteArray","(",")",";","\r\n		","}","\r\n		catch","(","IOException","e",")","\r\n		","{","\r\n			//","NOTE:","IllegalStateException","(","Throwable",")","only","exists","since","Java","1",".","5\r\n			throw","new","WicketRuntimeException","(","e",")",";","\r\n		","}","\r\n	"],"docstring_tokens":["Build","the","request","based","on","the","uploaded","files","and","the","parameters"],"prompt_tokens":[]}
{"code_tokens":["\n	public","boolean","okToRenderComponent","(","final","String","scope,","final","String","id",")","\n	","{","\n		if","(","renderedComponentsPerScope","==","null",")","\n		","{","\n			renderedComponentsPerScope","=","new","HashMap<>","(",")",";","\n		","}","\n\n		List<String>","componentScope","=","renderedComponentsPerScope",".","get","(","scope",")",";","\n		if","(","componentScope","==","null",")","\n		","{","\n			componentScope","=","new","ArrayList<>","(",")",";","\n			renderedComponentsPerScope",".","put","(","scope,","componentScope",")",";","\n		","}","\n\n		if","(","componentScope",".","contains","(","id",")",")","\n		","{","\n			return","false",";","\n		","}","\n		componentScope",".","add","(","id",")",";","\n		return","true",";","\n	"],"docstring_tokens":["Check","if","the","header","component","is","ok","to","render","within","the","scope","given"],"prompt_tokens":[]}
{"code_tokens":["\n	@Around","(","\"execution","(","*","org",".","apache",".","wicket",".","Component",".","onRender","(",".",".",")",")","\"",")","\n	public","Object","aroundOnRender","(","ProceedingJoinPoint","joinPoint",")","throws","Throwable\n	","{","\n		return","measureTime","(","\"core/component/render\",","joinPoint",")",";","\n	"],"docstring_tokens":["Collects","data","how","often","components","are","rendered"],"prompt_tokens":[]}
{"code_tokens":["\n	@Override\n	public","void","bind","(","Component","component",")","\n	","{","\n		if","(","!","(","component","instanceof","Form",")",")","\n		","{","\n			throw","new","WicketRuntimeException","(","\"Behavior","\"","+","getClass","(",")",".","getName","(",")","\n				+","\"","can","only","be","added","to","an","instance","of","a","Form\"",")",";","\n		","}","\n	"],"docstring_tokens":["Can","be","bound","to","Forms","only"],"prompt_tokens":[]}
{"code_tokens":["\n	public","void","error","(","FormComponent<?>","fc,","final","String","resourceKey,","Map<String,","Object>","vars",")","\n	","{","\n		Args",".","notNull","(","fc,","\"fc\"",")",";","\n		Args",".","notNull","(","vars,","\"vars\"",")",";","\n		Args",".","notNull","(","resourceKey,","\"resourceKey\"",")",";","\n\n		ValidationError","error","=","new","ValidationError","(",")",".","addKey","(","resourceKey",")",";","\n		final","String","defaultKey","=","Classes",".","simpleName","(","getClass","(",")",")",";","\n		if","(","!resourceKey",".","equals","(","defaultKey",")",")","\n		","{","\n			error",".","addKey","(","defaultKey",")",";","\n		","}","\n\n		error",".","setVariables","(","vars",")",";","\n		fc",".","error","(","error",")",";","\n	"],"docstring_tokens":["Reports","an","error","against","the","validatable","using","the","specified","resource","key","and","variable","map"],"prompt_tokens":[]}
{"code_tokens":["\n	public","void","disableCaching","(",")","\n	","{","\n		setDateHeader","(","\"Date\",","Instant",".","now","(",")",")",";","\n		setDateHeader","(","\"Expires\",","Instant",".","EPOCH",")",";","\n		setHeader","(","\"Pragma\",","\"no-cache\"",")",";","\n		setHeader","(","\"Cache-Control\",","\"no-cache,","no-store\"",")",";","\n	"],"docstring_tokens":["Make","this","response","non-cacheable"],"prompt_tokens":[]}
{"code_tokens":["private","MockComponent","setId","(","String","id",")","\n	","{","\n		this",".","id","=","id",";","\n		return","this",";","\n	"],"docstring_tokens":["Sets","the","component","id"],"prompt_tokens":[]}
{"code_tokens":["MockComponent","setPath","(","String","path",")","\n	","{","\n		this",".","path","=","path",";","\n		return","this",";","\n	"],"docstring_tokens":["Sets","the","component","path"],"prompt_tokens":[]}
{"code_tokens":["\n	static","int","indexFor","(","final","int","h,","final","int","length",")","\n	","{","\n		return","h","&","(","length","-","1",")",";","\n	"],"docstring_tokens":["Returns","index","for","hash","code","h"],"prompt_tokens":[]}
{"code_tokens":["\n	public","synchronized","final","void","setFormat","(","String","format",")","\n	","{","\n		Args",".","notNull","(","format,","\"format\"",")",";","\n		this",".","format","=","format",";","\n	"],"docstring_tokens":["Sets","the","format","of","this","resource"],"prompt_tokens":[]}
{"code_tokens":["\n	protected","synchronized","void","setLastModifiedTime","(","Instant","time",")","\n	","{","\n		lastModifiedTime","=","time",";","\n	"],"docstring_tokens":["set","the","last","modified","time","for","this","resource"],"prompt_tokens":[]}
{"code_tokens":["\n	public","boolean","processRequest","(","final","MockHttpServletRequest","request",")","\n	","{","\n		return","processRequest","(","request,","null",")",";","\n	"],"docstring_tokens":["Processes","the","request","in","mocked","Wicket","environment"],"prompt_tokens":[]}
{"code_tokens":["\n	public","ResourceReference","startResourceReference","(","final","ResourceReference","reference,\n		final","PageParameters","pageParameters",")","\n	","{","\n		//","prepare","request\n		request",".","setURL","(","request",".","getContextPath","(",")","+","request",".","getServletPath","(",")","+","\"/\"",")",";","\n		IRequestHandler","handler","=","new","ResourceReferenceRequestHandler","(","reference,","pageParameters",")",";","\n\n		//","execute","request\n		processRequest","(","request,","handler",")",";","\n\n		//","the","reference","processed\n		return","reference",";","\n	"],"docstring_tokens":["Simulates","a","request","to","a","mounted","ResourceReference"],"prompt_tokens":[]}
{"code_tokens":["\n	public","String","getWicketAjaxBaseUrlEncodedInLastResponse","(",")","\n		throws","IOException,","ParseException\n	","{","\n		XmlPullParser","parser","=","new","XmlPullParser","(",")",";","\n		parser",".","parse","(","getLastResponseAsString","(",")",")",";","\n		XmlTag","tag",";","\n		while","(","(","tag","=","parser",".","nextTag","(",")",")","!=","null",")","\n		","{","\n			if","(","tag",".","isOpen","(",")","&&","tag",".","getName","(",")",".","equals","(","\"script\"",")","&&\n				\"wicket-ajax-base-url\"",".","equals","(","tag",".","getAttribute","(","\"id\"",")",")",")","\n			","{","\n				parser",".","next","(",")",";","\n				return","parser",".","getString","(",")",".","toString","(",")",".","split","(","\"\\\\\\\"\"",")","[1]",";","\n			","}","\n		","}","\n\n		fail","(","\"Last","response","has","no","AJAX","base","URL","set","by","AbstractDefaultAjaxBehavior",".","\"",")",";","\n		return","null",";","\n	"],"docstring_tokens":["This","method","tries","to","parse","the","last","response","to","return","the","encoded","base","URL","and","will","throw","an	","exception","if","there","none","was","encoded"],"prompt_tokens":[]}
{"code_tokens":["\n	public","void","executeBehavior","(","final","AbstractAjaxBehavior","behavior",")","\n	","{","\n		Args",".","notNull","(","behavior,","\"behavior\"",")",";","\n\n		Url","url","=","Url",".","parse","(","behavior",".","getCallbackUrl","(",")",".","toString","(",")",",\n			Charset",".","forName","(","request",".","getCharacterEncoding","(",")",")",")",";","\n		transform","(","url",")",";","\n		request",".","setUrl","(","url",")",";","\n		request",".","addHeader","(","WebRequest",".","HEADER_ORIGIN,","createOriginHeader","(",")",")",";","\n		request",".","addHeader","(","WebRequest",".","HEADER_AJAX_BASE_URL,","url",".","toString","(",")",")",";","\n		request",".","addHeader","(","WebRequest",".","HEADER_AJAX,","\"true\"",")",";","\n\n		if","(","behavior","instanceof","AjaxFormSubmitBehavior",")","\n		","{","\n			AjaxFormSubmitBehavior","formSubmitBehavior","=","(","AjaxFormSubmitBehavior",")","behavior",";","\n			Form<?>","form","=","formSubmitBehavior",".","getForm","(",")",";","\n			getRequest","(",")",".","setUseMultiPartContentType","(","form",".","isMultiPart","(",")",")",";","\n			serializeFormToRequest","(","form",")",";","\n\n			//","mark","behavior's","component","as","the","form","submitter,\n			String","name","=","Form",".","getRootFormRelativeId","(","\n				new","PropertyModel<Component>","(","behavior,","\"component\"",")",".","getObject","(",")",")",";","\n			if","(","!request",".","getPostParameters","(",")",".","getParameterNames","(",")",".","contains","(","name",")",")","\n			","{","\n				request",".","getPostParameters","(",")",".","setParameterValue","(","name,","\"marked\"",")",";","\n			","}","\n		","}","\n\n		processRequest","(",")",";","\n	"],"docstring_tokens":["Builds","and","processes","a","request","suitable","for","executing","an","AbstractAjaxBehavior"],"prompt_tokens":[]}
{"code_tokens":["\n	protected","String","createOriginHeader","(",")","\n	","{","\n		Url","url","=","RequestCycle",".","get","(",")",".","getRequest","(",")",".","getUrl","(",")",";","\n		return","url",".","getProtocol","(",")","+","\"://\"","+","url",".","getHost","(",")","+","\":\"","+","url",".","getPort","(",")",";","\n	"],"docstring_tokens":["Build","value","to","Origin","header","based","on","RequestCycle","Url"],"prompt_tokens":[]}
{"code_tokens":["\n	public","FormTester","newFormTester","(","final","String","path",")","\n	","{","\n		return","newFormTester","(","path,","true",")",";","\n	"],"docstring_tokens":["Creates","a","FormTester","for","the","Form","at","a","given","path,","and","fills","all","child	","org.apache.wicket.markup.html.form.FormComponents","with","blank","Strings"],"prompt_tokens":[]}
{"code_tokens":["\n	public","Result","hasLabel","(","String","path,","String","expectedLabelText",")","\n	","{","\n		Label","label","=","(","Label",")","getComponentFromLastRenderedPage","(","path",")",";","\n		return","isEqual","(","expectedLabelText,","label",".","getDefaultModelObjectAsString","(",")",")",";","\n	"],"docstring_tokens":["assert","the","text","of","Label","component"],"prompt_tokens":[]}
{"code_tokens":["\n	public","Result","isNotRequired","(","String","path",")","\n	","{","\n		FormComponent<?>","formComponent","=","assertFormComponent","(","path",")",";","\n\n		return","isNotRequired","(","formComponent",")",";","\n	"],"docstring_tokens":["Asserts","that","a","component","is","not","required"],"prompt_tokens":[]}
{"code_tokens":["\n	public","void","clickLink","(","String","path",")","\n	","{","\n		clickLink","(","path,","true",")",";","\n	"],"docstring_tokens":["Click","the","Link","in","the","last","rendered","Page.	","	","Simulate","that","AJAX","is","enabled"],"prompt_tokens":[]}
{"code_tokens":["\n	public","<C","extends","Page>","Result","isRenderedPage","(","Class<C>","expectedRenderedPageClass",")","\n	","{","\n		Args",".","notNull","(","expectedRenderedPageClass,","\"expectedRenderedPageClass\"",")",";","\n\n		Page","page","=","getLastRenderedPage","(",")",";","\n		if","(","page","==","null",")","\n		","{","\n			return","Result",".","fail","(","\"page","was","null\"",")",";","\n		","}","\n		if","(","!expectedRenderedPageClass",".","isAssignableFrom","(","page",".","getClass","(",")",")",")","\n		","{","\n			return","Result",".","fail","(","String",".","format","(","\"classes","not","the","same,","expected","'%s',","current","'%s'\",\n				expectedRenderedPageClass,","page",".","getClass","(",")",")",")",";","\n		","}","\n		return","Result",".","pass","(",")",";","\n	"],"docstring_tokens":["Asserts","the","last","rendered","Page","class"],"prompt_tokens":[]}
{"code_tokens":["\n	public","Result","isResultPage","(","final","String","expectedDocument",")","{","\n		//","Validate","the","document\n		String","document","=","getLastResponseAsString","(",")",";","\n		return","isTrue","(","\"expected","rendered","page","equals\",","document",".","equals","(","expectedDocument",")",")",";","\n	"],"docstring_tokens":["Asserts","last","rendered","Page","against","an","expected","HTML","document","as","a	","String"],"prompt_tokens":[]}
{"code_tokens":["\n	public","Result","hasNoFeedbackMessage","(","int","level",")","\n	","{","\n		List<Serializable>","messages","=","getMessages","(","level",")",";","\n		return","isTrue","(","String",".","format","(","\"expected","no","%s","message,","but","contains\\n%s\",\n			new","FeedbackMessage","(","null,","\"\",","level",")",".","getLevelAsString","(",")",".","toLowerCase","(","Locale",".","ROOT",")",",\n			WicketTesterHelper",".","asLined","(","messages",")",")",",","messages",".","isEmpty","(",")",")",";","\n	"],"docstring_tokens":["Asserts","there","are","no","feedback","messages","with","the","given","level"],"prompt_tokens":[]}
{"code_tokens":["\n	public","void","dumpPage","(",")","\n	","{","\n		log",".","info","(","getLastResponseAsString","(",")",")",";","\n	"],"docstring_tokens":["Dumps","the","source","of","last","rendered","Page"],"prompt_tokens":[]}
{"code_tokens":["\n	public","void","executeUrl","(","final","String","_url",")","\n	","{","\n		Url","url","=","Url",".","parse","(","_url,","Charset",".","forName","(","request",".","getCharacterEncoding","(",")",")",")",";","\n		transform","(","url",")",";","\n		getRequest","(",")",".","setUrl","(","url",")",";","\n		processRequest","(",")",";","\n	"],"docstring_tokens":["Starts","a","page,","a","shared","resource","or","a","IRequestListener","depending","on","what","the	","IRequestMappers","resolve","for","the","passed","url"],"prompt_tokens":[]}
{"code_tokens":["\n	public","static","String[]","getInputValue","(","FormComponent<?>","formComponent",")","\n	","{","\n		//","the","browser","sends","parameters","for","visible","and","enabled","components","only\n		if","(","formComponent",".","isVisibleInHierarchy","(",")","&&","formComponent",".","isEnabledInHierarchy","(",")",")","\n		","{","\n			if","(","formComponent","instanceof","IFormSubmittingComponent",")","\n			","{","\n				//","buttons","have","to","be","submitted","explicitely\n			","}","\n			else","if","(","formComponent","instanceof","AbstractTextComponent",")","\n			","{","\n				return","new","String[]","{","getFormComponentValue","(","formComponent",")","}",";","\n			","}","\n			else\n			","{","\n				//","TODO","is","it","safe","to","assume","that","all","other","components'","values","can","be","split?\n				String","value","=","getFormComponentValue","(","formComponent",")",";","\n				if","(","!Strings",".","isEmpty","(","value",")",")","\n				","{","\n					return","value",".","split","(","FormComponent",".","VALUE_SEPARATOR",")",";","\n				","}","\n			","}","\n		","}","\n		return","new","String[]","{","}",";","\n	"],"docstring_tokens":["Gets","request","parameter","values","for","the","form","component","that","represents","its","current","model","value"],"prompt_tokens":[]}
{"code_tokens":["\n	public","FormTester","setValue","(","final","String","formComponentId,","final","String","value",")","\n	","{","\n		Component","component","=","workingForm",".","get","(","formComponentId",")",";","\n		assertNotNull","(","component,","\"Unable","to","set","value",".","Couldn't","find","component","with","name:","\"","+\n			formComponentId",")",";","\n		return","setValue","(","component,","value",")",";","\n	"],"docstring_tokens":["Simulates","filling","in","a","field","on","a","Form"],"prompt_tokens":[]}
{"code_tokens":["\n	public","FormTester","submitLink","(","String","path,","final","boolean","pageRelative",")","\n	","{","\n		if","(","pageRelative",")","\n		","{","\n			tester",".","clickLink","(","path,","false",")",";","\n		","}","\n		else\n		","{","\n			path","=","this",".","path","+","\":\"","+","path",";","\n			tester",".","clickLink","(","path,","false",")",";","\n		","}","\n		return","this",";","\n	"],"docstring_tokens":["A","convenience","method","to","submit","the","Form","via","a","SubmitLink","which","may","inside","or","outside","of","the	","Form"],"prompt_tokens":[]}
{"code_tokens":["\n	private","void","checkClosed","(",")","\n	","{","\n		if","(","closed",")","\n		","{","\n			fail","(","\"'\"","+","path","+","\"'","already","submitted",".","Note","that","FormTester","\"","+\n				\"is","allowed","to","submit","only","once\"",")",";","\n		","}","\n	"],"docstring_tokens":["FormTester","must","only","be","used","once"],"prompt_tokens":[]}
{"code_tokens":["\n	public","Border","addToBorder","(","final","Component",".",".",".","children",")","\n	","{","\n		super",".","add","(","children",")",";","\n		return","this",";","\n	"],"docstring_tokens":["Adds","children","components","to","the","Border","itself"],"prompt_tokens":[]}
{"code_tokens":["\n	@Override\n	public","IMarkupFragment","getMarkup","(","final","Component","child",")","\n	","{","\n		//","Border","require","an","associated","markup","resource","file\n		IMarkupFragment","markup","=","getAssociatedMarkup","(",")",";","\n		if","(","markup","==","null",")","\n		","{","\n			throw","new","MarkupException","(","\"Unable","to","find","associated","markup","file","for","Border:","\"","+\n				this",".","toString","(",")",")",";","\n		","}","\n\n		//","Find","<wicket:border>\n		IMarkupFragment","borderMarkup","=","null",";","\n		for","(","int","i","=","0",";","i","<","markup",".","size","(",")",";","i++",")","\n		","{","\n			MarkupElement","elem","=","markup",".","get","(","i",")",";","\n			if","(","TagUtils",".","isWicketBorderTag","(","elem",")",")","\n			","{","\n				borderMarkup","=","new","MarkupFragment","(","markup,","i",")",";","\n				break",";","\n			","}","\n		","}","\n\n		if","(","borderMarkup","==","null",")","\n		","{","\n			throw","new","MarkupException","(","markup",".","getMarkupResourceStream","(",")",",\n				\"Unable","to","find","<wicket:border>","tag","in","associated","markup","file","for","Border:","\"","+\n					this",".","toString","(",")",")",";","\n		","}","\n\n		//","If","child","==","null,","return","the","markup","fragment","starting","with","the","<wicket:border>","tag\n		if","(","child","==","null",")","\n		","{","\n			return","borderMarkup",";","\n		","}","\n\n		//","Is","child","==","BorderBody?\n		if","(","child","==","body",")","\n		","{","\n			//","Get","the","<wicket:body>","markup\n			return","body",".","getMarkup","(",")",";","\n		","}","\n\n		//","Find","the","markup","for","the","child","component\n		IMarkupFragment","childMarkup","=","borderMarkup",".","find","(","child",".","getId","(",")",")",";","\n		if","(","childMarkup","!=","null",")","\n		","{","\n			return","childMarkup",";","\n		","}","\n\n		return","(","(","BorderMarkupSourcingStrategy",")","getMarkupSourcingStrategy","(",")",")",".","findMarkupInAssociatedFileHeader","(","\n			this,","child",")",";","\n	"],"docstring_tokens":["Search","for","the","child","markup","in","the","file","associated","with","the","Border"],"prompt_tokens":[]}
{"code_tokens":["\n	public","static","AjaxEventBehavior","onEvent","(","String","eventName,","SerializableConsumer<AjaxRequestTarget>","onEvent",")","\n	","{","\n		Args",".","notNull","(","onEvent,","\"onEvent\"",")",";","\n\n		return","new","AjaxEventBehavior","(","eventName",")","\n		","{","\n			private","static","final","long","serialVersionUID","=","1L",";","\n\n			@Override\n			protected","void","onEvent","(","AjaxRequestTarget","target",")","\n			","{","\n				onEvent",".","accept","(","target",")",";","\n			","}","\n		","}",";","\n	"],"docstring_tokens":["Creates","an","AjaxEventBehavior","based","on","lambda","expressions"],"prompt_tokens":[]}
{"code_tokens":["\n	public","static","String","name","(","Class<?>","c",")","\n	","{","\n		String","name","=","null",";","\n		if","(","c","!=","null",")","\n		","{","\n			while","(","c",".","isAnonymousClass","(",")",")","\n			","{","\n				c","=","c",".","getSuperclass","(",")",";","\n			","}","\n			name","=","c",".","getName","(",")",";","\n		","}","\n\n		return","name",";","\n	"],"docstring_tokens":["Gets","the","name","of","the","given","class","or","null","if","the","class","is","null"],"prompt_tokens":[]}
{"code_tokens":["\n	public","static","CustomEntityResolver","getPreloaded","(",")","\n	","{","\n		CustomEntityResolver","resolver","=","new","CustomEntityResolver","(",")",";","\n\n		resolver",".","put","(","new","EntityKey","(","\"-//Sun","Microsystems,","Inc",".","//DTD","Web","Application","2",".","3//EN\",\n			\"http://java",".","sun",".","com/dtd/web-app_2_3",".","dtd\"",")",",","new","ServletApiEntityLocator","(","\n			\"web-app_2_3",".","dtd\"",")",")",";","\n\n		return","resolver",";","\n	"],"docstring_tokens":["get","default","instances","of","custom","entity","resolver","with","preloaded","well-known","entities"],"prompt_tokens":[]}
{"code_tokens":["\n	public","void","put","(","final","EntityKey","key,","final","EntityLocator","locator",")","\n	","{","\n		Args",".","notNull","(","key,","\"key\"",")",";","\n		Args",".","notNull","(","locator,","\"locator\"",")",";","\n		entities",".","put","(","key,","locator",")",";","\n	"],"docstring_tokens":["add","custom","entity","resolver"],"prompt_tokens":[]}
{"code_tokens":["\n	public","Component","getComponent","(",")","\n	","{","\n		return","component",";","\n	"],"docstring_tokens":["Get","check","failure","component"],"prompt_tokens":[]}
{"code_tokens":["\n	public","final","OrderByLink<S>","sort","(",")","\n	","{","\n		if","(","isVersioned","(",")",")","\n		","{","\n			//","version","the","old","state\n			addStateChange","(",")",";","\n		","}","\n\n		ISortState<S>","state","=","stateLocator",".","getSortState","(",")",";","\n\n		//","get","current","sort","order\n		SortOrder","order","=","state",".","getPropertySortOrder","(","property",")",";","\n\n		//","set","next","sort","order\n		state",".","setPropertySortOrder","(","property,","nextSortOrder","(","order",")",")",";","\n\n		return","this",";","\n	"],"docstring_tokens":["Re-sort","data","provider","according","to","this","link"],"prompt_tokens":[]}
{"code_tokens":["\n	@Test\n	void","licenseHeaders","(",")","\n	","{","\n		licenseHeaderHandlers","=","new","ILicenseHeaderHandler[]","{","\n				new","JavaLicenseHeaderHandler","(","javaIgnore",")",",\n				new","JavaScriptLicenseHeaderHandler","(","javaScriptIgnore",")",",\n				new","XmlLicenseHeaderHandler","(","xmlIgnore",")",",\n				new","PropertiesLicenseHeaderHandler","(","propertiesIgnore",")",",\n				new","HtmlLicenseHeaderHandler","(","htmlIgnore",")",",\n				new","VelocityLicenseHeaderHandler","(","velocityIgnore",")",",\n				new","XmlPrologHeaderHandler","(","xmlPrologIgnore",")",",\n				new","CssLicenseHeaderHandler","(","cssIgnore",")",",","}",";","\n\n		final","Map<ILicenseHeaderHandler,","List<File>>","badFiles","=","new","HashMap<>","(",")",";","\n\n		for","(","final","ILicenseHeaderHandler","licenseHeaderHandler",":","licenseHeaderHandlers",")","\n		","{","\n			visitFiles","(","licenseHeaderHandler",".","getSuffixes","(",")",",","licenseHeaderHandler",".","getIgnoreFiles","(",")",",\n				new","FileVisitor","(",")","\n				","{","\n					@Override\n					public","void","visitFile","(","final","File","file",")","\n					","{","\n						if","(","licenseHeaderHandler",".","checkLicenseHeader","(","file",")","==","false",")","\n						","{","\n							if","(","(","addHeaders","==","false",")","||\n								","(","licenseHeaderHandler",".","addLicenseHeader","(","file",")","==","false",")",")","\n							","{","\n								List<File>","files","=","badFiles",".","get","(","licenseHeaderHandler",")",";","\n\n								if","(","files","==","null",")","\n								","{","\n									files","=","new","ArrayList<>","(",")",";","\n									badFiles",".","put","(","licenseHeaderHandler,","files",")",";","\n								","}","\n\n								files",".","add","(","file",")",";","\n							","}","\n						","}","\n					","}","\n				","}",")",";","\n		","}","\n\n		failIncorrectLicenceHeaders","(","badFiles",")",";","\n	"],"docstring_tokens":["Test","all","the","files","in","the","project","which","has","an","associated","ILicenseHeaderHandler"],"prompt_tokens":[]}
{"code_tokens":["\n	protected","T","getData","(","final","Attributes","attributes",")","\n	","{","\n		return","data",";","\n	"],"docstring_tokens":["Gets","the","data","for","this","resource"],"prompt_tokens":[]}
{"code_tokens":["\n	private","Field[]","findFields","(","Class<?>","clazz,","final","IFieldValueFactory","factory",")","\n	","{","\n		List<Field>","matched","=","new","ArrayList<>","(",")",";","\n\n		while","(","clazz","!=","null",")","\n		","{","\n			Field[]","fields","=","clazz",".","getDeclaredFields","(",")",";","\n			for","(","final","Field","field",":","fields",")","\n			","{","\n				if","(","factory",".","supportsField","(","field",")",")","\n				","{","\n					matched",".","add","(","field",")",";","\n				","}","\n			","}","\n			clazz","=","clazz",".","getSuperclass","(",")",";","\n		","}","\n\n		return","matched",".","toArray","(","new","Field[matched",".","size","(",")","]",")",";","\n	"],"docstring_tokens":["Returns","an","array","of","fields","that","can","be","injected","using","the","given","field","value","factory"],"prompt_tokens":[]}
{"code_tokens":["\n	public","final","boolean","isValid","(","String","value",")","\n	","{","\n		if","(","value","==","null",")","\n		","{","\n			return","false",";","\n		","}","\n\n		Matcher","matchAsciiPat","=","Pattern",".","compile","(","LEGAL_ASCII_PATTERN",")",".","matcher","(","value",")",";","\n		if","(","!matchAsciiPat",".","matches","(",")",")","\n		","{","\n			return","false",";","\n		","}","\n\n		//","Check","the","whole","url","address","structure\n		Matcher","matchUrlPat","=","Pattern",".","compile","(","URL_PATTERN",")",".","matcher","(","value",")",";","\n		if","(","!matchUrlPat",".","matches","(",")",")","\n		","{","\n			return","false",";","\n		","}","\n\n		if","(","!isValidScheme","(","matchUrlPat",".","group","(","PARSE_URL_SCHEME",")",")",")","\n		","{","\n			return","false",";","\n		","}","\n\n		if","(","!isValidAuthority","(","matchUrlPat",".","group","(","PARSE_URL_AUTHORITY",")",")",")","\n		","{","\n			return","false",";","\n		","}","\n\n		if","(","!isValidPath","(","matchUrlPat",".","group","(","PARSE_URL_PATH",")",")",")","\n		","{","\n			return","false",";","\n		","}","\n\n		if","(","!isValidQuery","(","matchUrlPat",".","group","(","PARSE_URL_QUERY",")",")",")","\n		","{","\n			return","false",";","\n		","}","\n\n		if","(","!isValidFragment","(","matchUrlPat",".","group","(","PARSE_URL_FRAGMENT",")",")",")","\n		","{","\n			return","false",";","\n		","}","\n\n		return","true",";","\n	"],"docstring_tokens":["Checks","if","a","field","has","a","valid","URL"],"prompt_tokens":[]}
{"code_tokens":["\n	public","final","void","setIndex","(","int","index",")","\n	","{","\n		if","(","this",".","index","!=","index",")","\n		","{","\n			if","(","isVersioned","(",")",")","\n			","{","\n				addStateChange","(",")",";","\n			","}","\n			this",".","index","=","index",";","\n		","}","\n	"],"docstring_tokens":["Sets","the","index","of","this","item"],"prompt_tokens":[]}
{"code_tokens":["\n	@Override\n	public","final","void","doGet","(","final","HttpServletRequest","servletRequest,\n		final","HttpServletResponse","servletResponse",")","throws","ServletException,","IOException\n	","{","\n		if","(","wicketFilter",".","processRequest","(","servletRequest,","servletResponse,","null",")","==","false",")","\n		","{","\n			fallback","(","servletRequest,","servletResponse",")",";","\n		","}","\n	"],"docstring_tokens":["Handles","servlet","page","requests"],"prompt_tokens":[]}
{"code_tokens":["\n	@Override\n	public","void","onComponentTag","(","final","Component","component,","final","ComponentTag","tag",")","\n	","{","\n	"],"docstring_tokens":["Nothing","to","add","to","the","response","by","default"],"prompt_tokens":[]}
{"code_tokens":["\n	public","boolean","closes","(","final","MarkupElement","open",")","\n	","{","\n		return","false",";","\n	"],"docstring_tokens":["Gets","whether","this","element","closes","the","given","element"],"prompt_tokens":[]}
{"code_tokens":["\n	public","static","void","contribute","(","final","Application","application,","final","IHeaderResponse","response",")","\n	","{","\n		JavaScriptLibrarySettings","jsLibrarySettings","=","application",".","getJavaScriptLibrarySettings","(",")",";","\n		ResourceReference","wicketAjaxReference","=","jsLibrarySettings",".","getWicketAjaxReference","(",")",";","\n		response",".","render","(","JavaScriptHeaderItem",".","forReference","(","wicketAjaxReference",")",")",";","\n	"],"docstring_tokens":["Contributes","the","backing","library","plus","the","implementation","of","Wicket.Event"],"prompt_tokens":[]}
